{"items":[{"tags":["java","r","class","types"],"comments":[{"owner":{"account_id":1509604,"reputation":128316,"user_id":1412059,"accept_rate":80,"display_name":"Roland"},"score":0,"creation_date":1581606856,"post_id":60210646,"comment_id":106499858,"body_markdown":"Types and classes are different concepts. Types primarily correspond to what data type is used in the underlying C code. In contrast, classes are an R concept. Note that R has several different OOP systems, the main one being S3 classes. The confusing part might be that there are implicit classes corresponding to the data types (everything in R has an explicit or implicit S3 class).","body":"Types and classes are different concepts. Types primarily correspond to what data type is used in the underlying C code. In contrast, classes are an R concept. Note that R has several different OOP systems, the main one being S3 classes. The confusing part might be that there are implicit classes corresponding to the data types (everything in R has an explicit or implicit S3 class)."},{"owner":{"account_id":14462620,"reputation":1741,"user_id":10447055,"display_name":"Gainz"},"score":0,"creation_date":1581607136,"post_id":60210646,"comment_id":106500028,"body_markdown":"@Roland I think you sould post this as an answer.","body":"@Roland I think you sould post this as an answer."},{"owner":{"account_id":1509604,"reputation":128316,"user_id":1412059,"accept_rate":80,"display_name":"Roland"},"score":0,"creation_date":1581608067,"post_id":60210646,"comment_id":106500587,"body_markdown":"You cannot create new types in R. You can only create new classes, which must be based on existing types.","body":"You cannot create new types in R. You can only create new classes, which must be based on existing types."},{"owner":{"account_id":244009,"reputation":257032,"user_id":516548,"display_name":"G. Grothendieck"},"score":0,"creation_date":1581621169,"post_id":60210646,"comment_id":106507666,"body_markdown":"See https://stackoverflow.com/questions/34376318/whats-the-real-meaning-about-everything-that-exists-is-an-object-in-r","body":"See <a href=\"https://stackoverflow.com/questions/34376318/whats-the-real-meaning-about-everything-that-exists-is-an-object-in-r\" title=\"whats the real meaning about everything that exists is an object in r\">stackoverflow.com/questions/34376318/&hellip;</a>"}],"answers":[{"tags":[],"owner":{"account_id":1509604,"reputation":128316,"user_id":1412059,"accept_rate":80,"display_name":"Roland"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1581609683,"creation_date":1581607983,"answer_id":60211384,"question_id":60210646,"body_markdown":"Types and classes are different concepts. Types primarily correspond to what data type is used in the underlying C code. Quoting Chapter 2 of the [R Language Definition](https://cran.r-project.org/doc/manuals/r-release/R-lang.html#Object_002doriented-programming):\r\n\r\n&gt; The R specific function typeof returns the type of an R object. Note\r\n&gt; that in the C code underlying R, all objects are pointers to a\r\n&gt; structure with typedef SEXPREC; the different R data types are\r\n&gt; represented in C by SEXPTYPE, which determines how the information in\r\n&gt; the various parts of the structure is used.\r\n\r\nIn contrast, classes are an R concept. Note that R has several different OOP systems, the main one being S3 classes. The confusing part might be that there are implicit classes corresponding to the data types (everything in R has an explicit or implicit S3 class).\r\n\r\nLet&#39;s use data.frames as an example:\r\n\r\n    #create an object of type &quot;list&quot;\r\n    x &lt;- list(a = 1, b = 2)\r\n    \r\n    typeof(x)\r\n    #[1] &quot;list&quot;\r\n    \r\n    class(x)\r\n    #[1] &quot;list&quot;\r\n    #this is an implicit class\r\n\r\n    attributes(x)\r\n    #$names\r\n    #[1] &quot;a&quot; &quot;b&quot;\r\n    #no class attribute\r\n    \r\n    class(x) &lt;- &quot;data.frame&quot; \r\n    attr(x,&quot;row.names&quot;) &lt;- 1L\r\n    #don&#39;t create data.frames this way, I only do this for didactic reasons\r\n    \r\n    x\r\n    #  a b\r\n    #1 1 2\r\n\r\n    attributes(x)\r\n    #$names\r\n    #[1] &quot;a&quot; &quot;b&quot;\r\n    #\r\n    #$class\r\n    #[1] &quot;data.frame&quot;\r\n    #\r\n    #$row.names\r\n    #[1] 1\r\n    \r\n    is.data.frame(x)\r\n    #[1] TRUE\r\n    \r\n    class(x)\r\n    #[1] &quot;data.frame&quot;\r\n    #this is an explicit class\r\n    \r\n    typeof(x)\r\n    #[1] &quot;list&quot;\r\n    #still the same type\r\n\r\n\r\n","title":"Relation between primitive data types and classes in R","body":"<p>Types and classes are different concepts. Types primarily correspond to what data type is used in the underlying C code. Quoting Chapter 2 of the <a href=\"https://cran.r-project.org/doc/manuals/r-release/R-lang.html#Object_002doriented-programming\" rel=\"nofollow noreferrer\">R Language Definition</a>:</p>\n\n<blockquote>\n  <p>The R specific function typeof returns the type of an R object. Note\n  that in the C code underlying R, all objects are pointers to a\n  structure with typedef SEXPREC; the different R data types are\n  represented in C by SEXPTYPE, which determines how the information in\n  the various parts of the structure is used.</p>\n</blockquote>\n\n<p>In contrast, classes are an R concept. Note that R has several different OOP systems, the main one being S3 classes. The confusing part might be that there are implicit classes corresponding to the data types (everything in R has an explicit or implicit S3 class).</p>\n\n<p>Let's use data.frames as an example:</p>\n\n<pre><code>#create an object of type \"list\"\nx &lt;- list(a = 1, b = 2)\n\ntypeof(x)\n#[1] \"list\"\n\nclass(x)\n#[1] \"list\"\n#this is an implicit class\n\nattributes(x)\n#$names\n#[1] \"a\" \"b\"\n#no class attribute\n\nclass(x) &lt;- \"data.frame\" \nattr(x,\"row.names\") &lt;- 1L\n#don't create data.frames this way, I only do this for didactic reasons\n\nx\n#  a b\n#1 1 2\n\nattributes(x)\n#$names\n#[1] \"a\" \"b\"\n#\n#$class\n#[1] \"data.frame\"\n#\n#$row.names\n#[1] 1\n\nis.data.frame(x)\n#[1] TRUE\n\nclass(x)\n#[1] \"data.frame\"\n#this is an explicit class\n\ntypeof(x)\n#[1] \"list\"\n#still the same type\n</code></pre>\n"}],"owner":{"account_id":16547632,"reputation":11,"user_id":11956781,"display_name":"MiFischer22"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":97,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1699955525,"creation_date":1581605740,"question_id":60210646,"body_markdown":"Regarding the relation between primitive data types (like numeric or character) and classes in R:\r\nIs it reasonable to say that primitive data types are built-in classes in R, for which the operations (like + or -) correspond to the built-in methods?\r\nAre the primitive data types also implemented internally as classes (unlike Java which distinguishes between primitive data types and wrapper classes)?","title":"Relation between primitive data types and classes in R","body":"<p>Regarding the relation between primitive data types (like numeric or character) and classes in R:\nIs it reasonable to say that primitive data types are built-in classes in R, for which the operations (like + or -) correspond to the built-in methods?\nAre the primitive data types also implemented internally as classes (unlike Java which distinguishes between primitive data types and wrapper classes)?</p>\n"},{"tags":["java","jpa","spring-data-jpa"],"comments":[{"owner":{"account_id":1292925,"reputation":4395,"user_id":1244652,"accept_rate":78,"display_name":"Byron Voorbach"},"score":1,"creation_date":1344511668,"post_id":11881479,"comment_id":15810924,"body_markdown":"Are you sure the ID gets rewritten when you save an existing object in the database?? Never had this on my project tbh","body":"Are you sure the ID gets rewritten when you save an existing object in the database?? Never had this on my project tbh"},{"owner":{"account_id":1056871,"reputation":117729,"user_id":1059372,"accept_rate":97,"display_name":"Eugene"},"score":0,"creation_date":1344514418,"post_id":11881479,"comment_id":15812238,"body_markdown":"@ByronVoorbach yup you&#39;re right, just tested this. update the question also, thx","body":"@ByronVoorbach yup you&#39;re right, just tested this. update the question also, thx"},{"owner":{"account_id":1465525,"reputation":401,"user_id":1378481,"accept_rate":50,"display_name":"ibrahimKiraz"},"score":2,"creation_date":1449428336,"post_id":11881479,"comment_id":55991467,"body_markdown":"Hello friend, you can look this link http://stackoverflow.com/questions/24420572/update-or-saveorupdate-in-crudrespository-is-there-any-options-available you can be a approach like saveOrUpdate()","body":"Hello friend, you can look this link <a href=\"http://stackoverflow.com/questions/24420572/update-or-saveorupdate-in-crudrespository-is-there-any-options-available\" title=\"update or saveorupdate in crudrespository is there any options available\">stackoverflow.com/questions/24420572/&hellip;</a> you can be a approach like saveOrUpdate()"},{"owner":{"account_id":255080,"reputation":15519,"user_id":534877,"accept_rate":65,"display_name":"Robert Niestroj"},"score":0,"creation_date":1578776300,"post_id":11881479,"comment_id":105551463,"body_markdown":"https://stackoverflow.com/questions/39741102/how-to-beautifully-update-a-jpa-entity-in-spring-data/","body":"<a href=\"https://stackoverflow.com/questions/39741102/how-to-beautifully-update-a-jpa-entity-in-spring-data/\" title=\"how to beautifully update a jpa entity in spring data\">stackoverflow.com/questions/39741102/&hellip;</a>"},{"owner":{"account_id":7180528,"reputation":31,"user_id":6127027,"display_name":"Clebio Vieira"},"score":0,"creation_date":1591805967,"post_id":11881479,"comment_id":110198395,"body_markdown":"I think that we have a beautiful solution here: [enter link description here](https://stackoverflow.com/a/39746931/6127027)","body":"I think that we have a beautiful solution here: <a href=\"https://stackoverflow.com/a/39746931/6127027\">enter link description here</a>"}],"answers":[{"tags":[],"owner":{"account_id":36208,"reputation":240316,"user_id":103154,"display_name":"axtavt"},"down_vote_count":5,"up_vote_count":300,"is_accepted":true,"score":295,"last_activity_date":1578361126,"creation_date":1344509022,"answer_id":11881628,"question_id":11881479,"body_markdown":"Identity of entities is defined by their primary keys. Since `firstname` and `lastname` are not parts of the primary key, you cannot tell JPA to treat `User`s with the same `firstname`s and `lastname`s as equal if they have different `userId`s.\r\n\r\nSo, if you want to update a `User` identified by its `firstname` and `lastname`, you need to find that `User` by a query, and then change appropriate fields of the object your found. These changes will be flushed to the database automatically at the end of transaction, so that you don&#39;t need to do anything to save these changes explicitly.\r\n\r\n**EDIT:**\r\n\r\nPerhaps I should elaborate on overall semantics of JPA. There are two main approaches to design of persistence APIs:\r\n\r\n * **insert/update approach**. When you need to modify the database you should call methods of persistence API explicitly: you call `insert` to insert an object, or `update` to save new state of the object to the database.\r\n\r\n * **Unit of Work approach**. In this case you have a set of objects *managed* by persistence library. All changes you make to these objects will be flushed to the database automatically at the end of Unit of Work (i.e. at the end of the current transaction in typical case). When you need to insert new record to the database, you make the corresponding object *managed*. *Managed* objects are identified by their primary keys, so that if you make an object with predefined primary key *managed*, it will be associated with the database record of the same id, and state of this object will be propagated to that record automatically.\r\n\r\nJPA follows the latter approach. `save()` in Spring Data JPA is backed by `merge()` in plain JPA, therefore it makes your entity *managed* as described above. It means that calling `save()` on an object with predefined id will update the corresponding database record rather than insert a new one, and also explains why `save()` is not called `create()`.","title":"How do I update an entity using spring-data-jpa?","body":"<p>Identity of entities is defined by their primary keys. Since <code>firstname</code> and <code>lastname</code> are not parts of the primary key, you cannot tell JPA to treat <code>User</code>s with the same <code>firstname</code>s and <code>lastname</code>s as equal if they have different <code>userId</code>s.</p>\n\n<p>So, if you want to update a <code>User</code> identified by its <code>firstname</code> and <code>lastname</code>, you need to find that <code>User</code> by a query, and then change appropriate fields of the object your found. These changes will be flushed to the database automatically at the end of transaction, so that you don't need to do anything to save these changes explicitly.</p>\n\n<p><strong>EDIT:</strong></p>\n\n<p>Perhaps I should elaborate on overall semantics of JPA. There are two main approaches to design of persistence APIs:</p>\n\n<ul>\n<li><p><strong>insert/update approach</strong>. When you need to modify the database you should call methods of persistence API explicitly: you call <code>insert</code> to insert an object, or <code>update</code> to save new state of the object to the database.</p></li>\n<li><p><strong>Unit of Work approach</strong>. In this case you have a set of objects <em>managed</em> by persistence library. All changes you make to these objects will be flushed to the database automatically at the end of Unit of Work (i.e. at the end of the current transaction in typical case). When you need to insert new record to the database, you make the corresponding object <em>managed</em>. <em>Managed</em> objects are identified by their primary keys, so that if you make an object with predefined primary key <em>managed</em>, it will be associated with the database record of the same id, and state of this object will be propagated to that record automatically.</p></li>\n</ul>\n\n<p>JPA follows the latter approach. <code>save()</code> in Spring Data JPA is backed by <code>merge()</code> in plain JPA, therefore it makes your entity <em>managed</em> as described above. It means that calling <code>save()</code> on an object with predefined id will update the corresponding database record rather than insert a new one, and also explains why <code>save()</code> is not called <code>create()</code>.</p>\n"},{"tags":[],"owner":{"account_id":2593070,"reputation":4352,"user_id":2247309,"display_name":"hussachai"},"down_vote_count":2,"up_vote_count":234,"is_accepted":false,"score":232,"last_activity_date":1661729413,"creation_date":1435703339,"answer_id":31149637,"question_id":11881479,"body_markdown":"Since the answer by @axtavt focuses on `JPA` not `spring-data-jpa`\r\n\r\nTo update an entity by querying then saving is not efficient because it requires two queries and possibly the query can be quite expensive since it may join other tables and load any collections that have `fetchType=FetchType.EAGER`\r\n\r\n`Spring-data-jpa` supports update operation.  \r\nYou have to define the method in Repository interface.and annotated it with `@Query` and `@Modifying`.\r\n\r\n    @Modifying\r\n    @Query(&quot;update User u set u.firstname = ?1, u.lastname = ?2 where u.id = ?3&quot;)\r\n    void setUserInfoById(String firstname, String lastname, Integer userId);\r\n\r\n`@Query` is for defining custom query and `@Modifying` is for telling `spring-data-jpa` that this query is an update operation and it requires `executeUpdate()` not `executeQuery()`.\r\n\r\nYou can specify the return type as `int`, having the number of records being updated.  \r\n\r\n----------\r\n*Note*: Run this code in a [Transaction][1].\r\n\r\n\r\n  [1]: https://www.baeldung.com/transaction-configuration-with-jpa-and-spring","title":"How do I update an entity using spring-data-jpa?","body":"<p>Since the answer by @axtavt focuses on <code>JPA</code> not <code>spring-data-jpa</code></p>\n<p>To update an entity by querying then saving is not efficient because it requires two queries and possibly the query can be quite expensive since it may join other tables and load any collections that have <code>fetchType=FetchType.EAGER</code></p>\n<p><code>Spring-data-jpa</code> supports update operation.<br />\nYou have to define the method in Repository interface.and annotated it with <code>@Query</code> and <code>@Modifying</code>.</p>\n<pre><code>@Modifying\n@Query(&quot;update User u set u.firstname = ?1, u.lastname = ?2 where u.id = ?3&quot;)\nvoid setUserInfoById(String firstname, String lastname, Integer userId);\n</code></pre>\n<p><code>@Query</code> is for defining custom query and <code>@Modifying</code> is for telling <code>spring-data-jpa</code> that this query is an update operation and it requires <code>executeUpdate()</code> not <code>executeQuery()</code>.</p>\n<p>You can specify the return type as <code>int</code>, having the number of records being updated.</p>\n<hr />\n<p><em>Note</em>: Run this code in a <a href=\"https://www.baeldung.com/transaction-configuration-with-jpa-and-spring\" rel=\"noreferrer\">Transaction</a>.</p>\n"},{"tags":[],"owner":{"account_id":1514958,"reputation":498,"user_id":1416184,"accept_rate":67,"display_name":"smile"},"down_vote_count":0,"up_vote_count":9,"is_accepted":false,"score":9,"last_activity_date":1569405434,"creation_date":1449428080,"answer_id":34121320,"question_id":11881479,"body_markdown":"Using spring-data-jpa `save()`, I was having same problem as @DtechNet. I mean every `save()` was creating new object instead of update. To solve this I had to add `version` field to entity and related table.","title":"How do I update an entity using spring-data-jpa?","body":"<p>Using spring-data-jpa <code>save()</code>, I was having same problem as @DtechNet. I mean every <code>save()</code> was creating new object instead of update. To solve this I had to add <code>version</code> field to entity and related table.</p>\n"},{"tags":[],"owner":{"account_id":80013,"reputation":2646,"user_id":226513,"accept_rate":67,"display_name":"Adam"},"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1506008456,"creation_date":1506008456,"answer_id":46348061,"question_id":11881479,"body_markdown":"This is how I solved the problem:\r\n\r\n    User inbound = ...\r\n    User existing = userRepository.findByFirstname(inbound.getFirstname());\r\n    if(existing != null) inbound.setId(existing.getId());\r\n    userRepository.save(inbound);\r\n","title":"How do I update an entity using spring-data-jpa?","body":"<p>This is how I solved the problem:</p>\n\n<pre><code>User inbound = ...\nUser existing = userRepository.findByFirstname(inbound.getFirstname());\nif(existing != null) inbound.setId(existing.getId());\nuserRepository.save(inbound);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":11819659,"reputation":1022,"user_id":8752733,"display_name":"Kalifornium"},"down_vote_count":1,"up_vote_count":65,"is_accepted":false,"score":64,"last_activity_date":1563279619,"creation_date":1538302807,"answer_id":52576978,"question_id":11881479,"body_markdown":"You can simply use this function with save() JPAfunction, but the object sent as parameter must contain an existing id in the database otherwise it will not work, because save() when we send an object without id, it adds directly a row in database, but if we send an object with an existing id, it changes the columns already found in the database.\r\n\r\n    public void updateUser(Userinfos u) {\r\n        User userFromDb = userRepository.findById(u.getid());\r\n        // crush the variables of the object found\r\n        userFromDb.setFirstname(&quot;john&quot;); \r\n        userFromDb.setLastname(&quot;dew&quot;);\r\n        userFromDb.setAge(16);\r\n        userRepository.save(userFromDb);\r\n    }","title":"How do I update an entity using spring-data-jpa?","body":"<p>You can simply use this function with save() JPAfunction, but the object sent as parameter must contain an existing id in the database otherwise it will not work, because save() when we send an object without id, it adds directly a row in database, but if we send an object with an existing id, it changes the columns already found in the database.</p>\n\n<pre><code>public void updateUser(Userinfos u) {\n    User userFromDb = userRepository.findById(u.getid());\n    // crush the variables of the object found\n    userFromDb.setFirstname(\"john\"); \n    userFromDb.setLastname(\"dew\");\n    userFromDb.setAge(16);\n    userRepository.save(userFromDb);\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4116853,"reputation":10757,"user_id":3378204,"accept_rate":91,"display_name":"Eugene"},"down_vote_count":0,"up_vote_count":49,"is_accepted":false,"score":49,"last_activity_date":1544499527,"creation_date":1544499527,"answer_id":53717024,"question_id":11881479,"body_markdown":"As what has already mentioned by others, the `save()` itself contains both create and update operation.\r\n\r\nI just want to add supplement about what behind the `save()` method.\r\n\r\nFirstly, let&#39;s see the extend/implement hierarchy of the `CrudRepository&lt;T,ID&gt;`, \r\n[![enter image description here][1]][1]\r\n\r\nOk, let&#39;s check the `save()` implementation at `SimpleJpaRepository&lt;T, ID&gt;`,\r\n\r\n    @Transactional\r\n    public &lt;S extends T&gt; S save(S entity) {\r\n    \r\n    \tif (entityInformation.isNew(entity)) {\r\n    \t\tem.persist(entity);\r\n    \t\treturn entity;\r\n    \t} else {\r\n    \t\treturn em.merge(entity);\r\n    \t}\r\n    }\r\n\r\nAs you can see, it will check whether the ID is existed or not firstly, if the entity is already there, only update will happen by `merge(entity)` method and if else, a new record is inserted by `persist(entity)` method. \r\n  [1]: https://i.stack.imgur.com/ZCGvJ.png","title":"How do I update an entity using spring-data-jpa?","body":"<p>As what has already mentioned by others, the <code>save()</code> itself contains both create and update operation.</p>\n\n<p>I just want to add supplement about what behind the <code>save()</code> method.</p>\n\n<p>Firstly, let's see the extend/implement hierarchy of the <code>CrudRepository&lt;T,ID&gt;</code>, \n<a href=\"https://i.stack.imgur.com/ZCGvJ.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/ZCGvJ.png\" alt=\"enter image description here\"></a></p>\n\n<p>Ok, let's check the <code>save()</code> implementation at <code>SimpleJpaRepository&lt;T, ID&gt;</code>,</p>\n\n<pre><code>@Transactional\npublic &lt;S extends T&gt; S save(S entity) {\n\n    if (entityInformation.isNew(entity)) {\n        em.persist(entity);\n        return entity;\n    } else {\n        return em.merge(entity);\n    }\n}\n</code></pre>\n\n<p>As you can see, it will check whether the ID is existed or not firstly, if the entity is already there, only update will happen by <code>merge(entity)</code> method and if else, a new record is inserted by <code>persist(entity)</code> method. </p>\n"},{"tags":[],"owner":{"account_id":9704049,"reputation":39,"user_id":7198019,"display_name":"BinLee"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1553596970,"creation_date":1553596970,"answer_id":55355174,"question_id":11881479,"body_markdown":"    public void updateLaserDataByHumanId(String replacement, String humanId) {\r\n        List&lt;LaserData&gt; laserDataByHumanId = laserDataRepository.findByHumanId(humanId);\r\n        laserDataByHumanId.stream()\r\n                .map(en -&gt; en.setHumanId(replacement))\r\n                .collect(Collectors.toList())\r\n                .forEach(en -&gt; laserDataRepository.save(en));\r\n    }","title":"How do I update an entity using spring-data-jpa?","body":"<pre><code>public void updateLaserDataByHumanId(String replacement, String humanId) {\n    List&lt;LaserData&gt; laserDataByHumanId = laserDataRepository.findByHumanId(humanId);\n    laserDataByHumanId.stream()\n            .map(en -&gt; en.setHumanId(replacement))\n            .collect(Collectors.toList())\n            .forEach(en -&gt; laserDataRepository.save(en));\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":14808091,"reputation":147,"user_id":10694474,"display_name":"Amir Mhp"},"down_vote_count":2,"up_vote_count":15,"is_accepted":false,"score":13,"last_activity_date":1559561196,"creation_date":1559556414,"answer_id":56425116,"question_id":11881479,"body_markdown":"spring data `save()` method will help you to perform both: adding new item and updating an existed item. \r\n\r\nJust call the `save()` and enjoy the life :))","title":"How do I update an entity using spring-data-jpa?","body":"<p>spring data <code>save()</code> method will help you to perform both: adding new item and updating an existed item. </p>\n\n<p>Just call the <code>save()</code> and enjoy the life :))</p>\n"},{"tags":[],"owner":{"account_id":7844482,"reputation":1806,"user_id":5929974,"accept_rate":33,"display_name":"Andreas Gelever"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1564056230,"creation_date":1564056230,"answer_id":57201552,"question_id":11881479,"body_markdown":"&gt; Specifically how do I tell spring-data-jpa that users that have the\r\n&gt; same username and firstname are actually EQUAL and that it is supposed\r\n&gt; to update the entity. Overriding equals did not work.\r\n\r\nFor this particular purpose one can introduce a composite key like this:\r\n\r\n    CREATE TABLE IF NOT EXISTS `test`.`user` (\r\n      `username` VARCHAR(45) NOT NULL,\r\n      `firstname` VARCHAR(45) NOT NULL,\r\n      `description` VARCHAR(45) NOT NULL,\r\n      PRIMARY KEY (`username`, `firstname`))\r\n\r\nMapping:\r\n\r\n    @Embeddable\r\n    public class UserKey implements Serializable {\r\n        protected String username;\r\n        protected String firstname;\r\n    \r\n        public UserKey() {}\r\n    \r\n        public UserKey(String username, String firstname) {\r\n            this.username = username;\r\n            this.firstname = firstname;\r\n        }\r\n        // equals, hashCode\r\n    }\r\n\r\nHere is how to use it:\r\n\r\n    @Entity\r\n    public class UserEntity implements Serializable {\r\n        @EmbeddedId\r\n        private UserKey primaryKey;\r\n    \r\n        private String description;\r\n        \r\n        //...\r\n    }\r\n\r\nJpaRepository would look like this:\r\n\r\n    public interface UserEntityRepository extends JpaRepository&lt;UserEntity, UserKey&gt;\r\n\r\nThen, you could use the following **idiom:** accept DTO with user info, extract name and firstname and create UserKey, then create a UserEntity with this composite key and then invoke Spring Data save() which should sort everything out for you.\r\n\r\n","title":"How do I update an entity using spring-data-jpa?","body":"<blockquote>\n  <p>Specifically how do I tell spring-data-jpa that users that have the\n  same username and firstname are actually EQUAL and that it is supposed\n  to update the entity. Overriding equals did not work.</p>\n</blockquote>\n\n<p>For this particular purpose one can introduce a composite key like this:</p>\n\n<pre><code>CREATE TABLE IF NOT EXISTS `test`.`user` (\n  `username` VARCHAR(45) NOT NULL,\n  `firstname` VARCHAR(45) NOT NULL,\n  `description` VARCHAR(45) NOT NULL,\n  PRIMARY KEY (`username`, `firstname`))\n</code></pre>\n\n<p>Mapping:</p>\n\n<pre><code>@Embeddable\npublic class UserKey implements Serializable {\n    protected String username;\n    protected String firstname;\n\n    public UserKey() {}\n\n    public UserKey(String username, String firstname) {\n        this.username = username;\n        this.firstname = firstname;\n    }\n    // equals, hashCode\n}\n</code></pre>\n\n<p>Here is how to use it:</p>\n\n<pre><code>@Entity\npublic class UserEntity implements Serializable {\n    @EmbeddedId\n    private UserKey primaryKey;\n\n    private String description;\n\n    //...\n}\n</code></pre>\n\n<p>JpaRepository would look like this:</p>\n\n<pre><code>public interface UserEntityRepository extends JpaRepository&lt;UserEntity, UserKey&gt;\n</code></pre>\n\n<p>Then, you could use the following <strong>idiom:</strong> accept DTO with user info, extract name and firstname and create UserKey, then create a UserEntity with this composite key and then invoke Spring Data save() which should sort everything out for you.</p>\n"},{"tags":[],"owner":{"account_id":19763013,"reputation":9,"user_id":14471681,"display_name":"sanku"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1603274137,"creation_date":1603013876,"answer_id":64411789,"question_id":11881479,"body_markdown":"If your primary key is autoincrement then, you have to set the value for the primary key.\r\nfor the save(); method to work as a update().else it will create a new record in db.\r\n\r\n\r\nif you are using jsp form then use hidden filed to set primary key.\r\n\r\nJsp:\r\n\r\n&gt; &lt;form:input type=&quot;hidden&quot;  path=&quot;id&quot; value=&quot;${user.id}&quot;/&gt;\r\n\r\nJava:\r\n\r\n\t@PostMapping(&quot;/update&quot;)\r\n\tpublic String updateUser(@ModelAttribute User user) {\r\n\t\trepo.save(user);\r\n\t\treturn &quot;redirect:userlist&quot;;\r\n\t}\r\n\r\n\r\n\r\nalso look at this:\r\n\r\n    @Override\r\n      @Transactional\r\n      public Customer save(Customer customer) {\r\n    \r\n        // Is new?\r\n        if (customer.getId() == null) {\r\n          em.persist(customer);\r\n          return customer;\r\n        } else {\r\n          return em.merge(customer);\r\n        }\r\n      }","title":"How do I update an entity using spring-data-jpa?","body":"<p>If your primary key is autoincrement then, you have to set the value for the primary key.\nfor the save(); method to work as a update().else it will create a new record in db.</p>\n<p>if you are using jsp form then use hidden filed to set primary key.</p>\n<p>Jsp:</p>\n<blockquote>\n<p>&lt;form:input type=&quot;hidden&quot;  path=&quot;id&quot; value=&quot;${user.id}&quot;/&gt;</p>\n</blockquote>\n<p>Java:</p>\n<pre><code>@PostMapping(&quot;/update&quot;)\npublic String updateUser(@ModelAttribute User user) {\n    repo.save(user);\n    return &quot;redirect:userlist&quot;;\n}\n</code></pre>\n<p>also look at this:</p>\n<pre><code>@Override\n  @Transactional\n  public Customer save(Customer customer) {\n\n    // Is new?\n    if (customer.getId() == null) {\n      em.persist(customer);\n      return customer;\n    } else {\n      return em.merge(customer);\n    }\n  }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":17528333,"reputation":43,"user_id":12712935,"display_name":"Tarek Sahalia"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1617051416,"creation_date":1617051416,"answer_id":66861527,"question_id":11881479,"body_markdown":"Use [@DynamicUpdate][1] annotation. it is cleaner and you don&#39;t have to deal with querying the database in order to get the saved values.\r\n\r\n\r\n  [1]: https://www.baeldung.com/spring-data-jpa-dynamicupdate","title":"How do I update an entity using spring-data-jpa?","body":"<p>Use <a href=\"https://www.baeldung.com/spring-data-jpa-dynamicupdate\" rel=\"nofollow noreferrer\">@DynamicUpdate</a> annotation. it is cleaner and you don't have to deal with querying the database in order to get the saved values.</p>\n"},{"tags":[],"owner":{"account_id":18214648,"reputation":124,"user_id":13256503,"display_name":"Golam Kibria"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1653925472,"creation_date":1640687714,"answer_id":70505829,"question_id":11881479,"body_markdown":"You can see the example below:\r\n\r\n\r\n    private void updateDeliveryStatusOfEvent(Integer eventId, int deliveryStatus) {\r\n        try {\r\n            LOGGER.info(&quot;NOTIFICATION_EVENT updating with event id:{}&quot;, eventId);\r\n            Optional&lt;Event&gt; eventOptional = eventRepository.findById(eventId);\r\n            if (!eventOptional.isPresent()) {\r\n                LOGGER.info(&quot;Didn&#39;t find any updatable notification event with this eventId:{}&quot;, eventId);\r\n            }\r\n            Event event = eventOptional.get();\r\n            event.setDeliveryStatus(deliveryStatus);\r\n            event = eventRepository.save(event);\r\n            if (!Objects.isNull(event)) {\r\n                LOGGER.info(&quot;NOTIFICATION_EVENT Successfully Updated with this id:{}&quot;, eventId);\r\n            }\r\n        } catch (Exception e) {\r\n            LOGGER.error(&quot;Error :{} while updating NOTIFICATION_EVENT of event Id:{}&quot;, e, eventId);\r\n        }\r\n    }\r\n\r\n**Or Update Using Native Query:**\r\n\r\n    public interface YourRepositoryName extends JpaRepository&lt;Event,Integer&gt;{\r\n    @Transactional\r\n        @Modifying\r\n        @Query(value=&quot;update Event u set u.deliveryStatus = :deliveryStatus where u.eventId = :eventId&quot;, nativeQuery = true)\r\n        void setUserInfoById(@Param(&quot;deliveryStatus&quot;)String deliveryStatus, @Param(&quot;eventId&quot;)Integer eventId);\r\n    }","title":"How do I update an entity using spring-data-jpa?","body":"<p>You can see the example below:</p>\n<pre><code>private void updateDeliveryStatusOfEvent(Integer eventId, int deliveryStatus) {\n    try {\n        LOGGER.info(&quot;NOTIFICATION_EVENT updating with event id:{}&quot;, eventId);\n        Optional&lt;Event&gt; eventOptional = eventRepository.findById(eventId);\n        if (!eventOptional.isPresent()) {\n            LOGGER.info(&quot;Didn't find any updatable notification event with this eventId:{}&quot;, eventId);\n        }\n        Event event = eventOptional.get();\n        event.setDeliveryStatus(deliveryStatus);\n        event = eventRepository.save(event);\n        if (!Objects.isNull(event)) {\n            LOGGER.info(&quot;NOTIFICATION_EVENT Successfully Updated with this id:{}&quot;, eventId);\n        }\n    } catch (Exception e) {\n        LOGGER.error(&quot;Error :{} while updating NOTIFICATION_EVENT of event Id:{}&quot;, e, eventId);\n    }\n}\n</code></pre>\n<p><strong>Or Update Using Native Query:</strong></p>\n<pre><code>public interface YourRepositoryName extends JpaRepository&lt;Event,Integer&gt;{\n@Transactional\n    @Modifying\n    @Query(value=&quot;update Event u set u.deliveryStatus = :deliveryStatus where u.eventId = :eventId&quot;, nativeQuery = true)\n    void setUserInfoById(@Param(&quot;deliveryStatus&quot;)String deliveryStatus, @Param(&quot;eventId&quot;)Integer eventId);\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":12211707,"reputation":367,"user_id":8913302,"display_name":"Johan"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1650509995,"creation_date":1650509995,"answer_id":71948409,"question_id":11881479,"body_markdown":"As mentioned by others answer, method save() is dual function. It can both do save or update, it&#39;s automatically update if you provide the id.\r\n\r\nfor update method in controller class I suggested to use @PatchMapping. below is the example.\r\n\r\n#Save method POST\r\n\r\n    {\r\n        &quot;username&quot;: &quot;jhon.doe&quot;,\r\n        &quot;displayName&quot;: &quot;Jhon&quot;,\r\n        &quot;password&quot;: &quot;xxxyyyzzz&quot;,\r\n        &quot;email&quot;: &quot;jhon.doe@mail.com&quot;\r\n    }\r\n    @PostMapping(&quot;/user&quot;)\r\n    public void setUser(@RequestBody User user) {\r\n    \tuserService.save(user);\r\n    }\r\n\r\n#Update method PATCH\r\n\r\n    {\r\n        &quot;id&quot;: 1, // this is important. Widly important\r\n        &quot;username&quot;: &quot;jhon.doe&quot;,\r\n        &quot;displayName&quot;: &quot;Jhon&quot;,\r\n        &quot;password&quot;: &quot;xxxyyyzzz&quot;,\r\n        &quot;email&quot;: &quot;jhon.doe@mail.com&quot;\r\n    }\r\n    \r\n    @PatchMapping(&quot;/user&quot;)\r\n    public void patchUser(@RequestBody User user) {\r\n    \tuserService.save(user);\r\n    }\r\n\r\nMaybe you&#39;re wondering where the id&#39;s come from. It comes from the database of course, you want to update the existing data right?","title":"How do I update an entity using spring-data-jpa?","body":"<p>As mentioned by others answer, method save() is dual function. It can both do save or update, it's automatically update if you provide the id.</p>\n<p>for update method in controller class I suggested to use @PatchMapping. below is the example.</p>\n<p>#Save method POST</p>\n<pre><code>{\n    &quot;username&quot;: &quot;jhon.doe&quot;,\n    &quot;displayName&quot;: &quot;Jhon&quot;,\n    &quot;password&quot;: &quot;xxxyyyzzz&quot;,\n    &quot;email&quot;: &quot;jhon.doe@mail.com&quot;\n}\n@PostMapping(&quot;/user&quot;)\npublic void setUser(@RequestBody User user) {\n    userService.save(user);\n}\n</code></pre>\n<p>#Update method PATCH</p>\n<pre><code>{\n    &quot;id&quot;: 1, // this is important. Widly important\n    &quot;username&quot;: &quot;jhon.doe&quot;,\n    &quot;displayName&quot;: &quot;Jhon&quot;,\n    &quot;password&quot;: &quot;xxxyyyzzz&quot;,\n    &quot;email&quot;: &quot;jhon.doe@mail.com&quot;\n}\n\n@PatchMapping(&quot;/user&quot;)\npublic void patchUser(@RequestBody User user) {\n    userService.save(user);\n}\n</code></pre>\n<p>Maybe you're wondering where the id's come from. It comes from the database of course, you want to update the existing data right?</p>\n"},{"tags":[],"owner":{"account_id":10536282,"reputation":164,"user_id":7764065,"display_name":"Javid"},"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1655847184,"creation_date":1655844570,"answer_id":72706965,"question_id":11881479,"body_markdown":"With java 8 you can use repository&#39;s findById in UserService\r\n\r\n    @Service\r\n    public class UserServiceImpl {\r\n    \r\n        private final UserRepository repository;\r\n\r\n        public UserServiceImpl(UserRepository repository) {\r\n            this.repository = repository;\r\n        }\r\n\r\n        @Transactional\r\n        public void update(User user) {\r\n            repository\r\n                    .findById(user.getId()) // returns Optional&lt;User&gt;\r\n                    .ifPresent(user1 -&gt; {\r\n                        user1.setFirstname(user.getFirstname);\r\n                        user1.setLastname(user.getLastname);\r\n\r\n                        repository.save(user1);\r\n                    });\r\n        }\r\n\r\n    }","title":"How do I update an entity using spring-data-jpa?","body":"<p>With java 8 you can use repository's findById in UserService</p>\n<pre><code>@Service\npublic class UserServiceImpl {\n\n    private final UserRepository repository;\n\n    public UserServiceImpl(UserRepository repository) {\n        this.repository = repository;\n    }\n\n    @Transactional\n    public void update(User user) {\n        repository\n                .findById(user.getId()) // returns Optional&lt;User&gt;\n                .ifPresent(user1 -&gt; {\n                    user1.setFirstname(user.getFirstname);\n                    user1.setLastname(user.getLastname);\n\n                    repository.save(user1);\n                });\n    }\n\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4333190,"reputation":1,"user_id":3538084,"display_name":"gjuliane"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1676507318,"creation_date":1676506864,"answer_id":75466684,"question_id":11881479,"body_markdown":"I did this for my Entity UserModel:\r\n\r\nIn the Controller:\r\n\r\n```\r\n\t\t@PutMapping(&quot;/{id}&quot;)\r\n\t\tpublic Optional&lt;UserModel&gt; update(@RequestBody UserModel user, @PathVariable Long id) {\r\n\t\t\treturn this.userService.update(user, id);\r\n\t\t}\r\n```\r\nAnd in the Service:\r\n\r\n```\r\n\tpublic Optional&lt;UserModel&gt; update(UserModel req, Long id){\r\n\t\tOptional&lt;UserModel&gt; user = userRepository.findById(id);\r\n\t\tif (user != null) {\r\n\t\t\tuserRepository.save(req);\r\n\t\t}\r\n\t\treturn user;\r\n\t}\r\n```\r\nExample with postman:\r\n[Postman method PUT example][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/ZeBF0.png","title":"How do I update an entity using spring-data-jpa?","body":"<p>I did this for my Entity UserModel:</p>\n<p>In the Controller:</p>\n<pre><code>        @PutMapping(&quot;/{id}&quot;)\n        public Optional&lt;UserModel&gt; update(@RequestBody UserModel user, @PathVariable Long id) {\n            return this.userService.update(user, id);\n        }\n</code></pre>\n<p>And in the Service:</p>\n<pre><code>    public Optional&lt;UserModel&gt; update(UserModel req, Long id){\n        Optional&lt;UserModel&gt; user = userRepository.findById(id);\n        if (user != null) {\n            userRepository.save(req);\n        }\n        return user;\n    }\n</code></pre>\n<p>Example with postman:\n<a href=\"https://i.stack.imgur.com/ZeBF0.png\" rel=\"nofollow noreferrer\">Postman method PUT example</a></p>\n"},{"tags":[],"owner":{"account_id":13566136,"reputation":155,"user_id":9786128,"display_name":"Muhammad Taha"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1686820856,"creation_date":1686820856,"answer_id":76481002,"question_id":11881479,"body_markdown":"just use \r\n\r\n&gt; userRepository.save(user)\r\n\r\nif any user of this user&#39;s primary-key (i.e. **id** in your case) is found then this statement will update existing user otherwise this statement will save new user.","title":"How do I update an entity using spring-data-jpa?","body":"<p>just use</p>\n<blockquote>\n<p>userRepository.save(user)</p>\n</blockquote>\n<p>if any user of this user's primary-key (i.e. <strong>id</strong> in your case) is found then this statement will update existing user otherwise this statement will save new user.</p>\n"},{"tags":[],"owner":{"account_id":27412974,"reputation":132,"user_id":20912639,"display_name":"Martin Maťovč&#237;k"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1699955519,"creation_date":1699955519,"answer_id":77479619,"question_id":11881479,"body_markdown":"Since my Transaction entity has a lot of fields this is the approach that works best for me:\r\n\r\n      @Override\r\n      @Transactional\r\n      public Transaction updateTransaction(UUID id, Transaction updatedTransaction) {\r\n        Transaction transactionToUpdate = transactionRepository.getReferenceById(id);\r\n        BeanUtils.copyProperties(updatedTransaction, transactionToUpdate, &quot;transactionId&quot;);\r\n        return transactionRepository.save(transactionToUpdate);\r\n      }\r\n","title":"How do I update an entity using spring-data-jpa?","body":"<p>Since my Transaction entity has a lot of fields this is the approach that works best for me:</p>\n<pre><code>  @Override\n  @Transactional\n  public Transaction updateTransaction(UUID id, Transaction updatedTransaction) {\n    Transaction transactionToUpdate = transactionRepository.getReferenceById(id);\n    BeanUtils.copyProperties(updatedTransaction, transactionToUpdate, &quot;transactionId&quot;);\n    return transactionRepository.save(transactionToUpdate);\n  }\n</code></pre>\n"}],"owner":{"account_id":1056871,"reputation":117729,"user_id":1059372,"accept_rate":97,"display_name":"Eugene"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":839832,"favorite_count":0,"down_vote_count":0,"up_vote_count":326,"accepted_answer_id":11881628,"answer_count":17,"score":326,"last_activity_date":1699955519,"creation_date":1344508424,"question_id":11881479,"body_markdown":"Well the question pretty much says everything. Using JPARepository how do I update an entity?\r\n\r\nJPARepository has only a **save** method, which does not tell me if it&#39;s create or update actually. For example, I insert a simple Object to the database User, which has three fields: `firstname`, `lastname` and `age`:\r\n\r\n     @Entity\r\n     public class User {\r\n\t\r\n\t  private String firstname;\r\n\t  private String lastname;\r\n      //Setters and getters for age omitted, but they are the same as with firstname and lastname.\r\n      private int age;\r\n\t\r\n\t  @Column\r\n\t  public String getFirstname() {\r\n\t\treturn firstname;\r\n\t  }\r\n\t  public void setFirstname(String firstname) {\r\n\t\tthis.firstname = firstname;\r\n\t  }\r\n\t\r\n\t  @Column\r\n\t  public String getLastname() {\r\n\t\treturn lastname;\r\n\t  }\r\n\t  public void setLastname(String lastname) {\r\n\t\tthis.lastname = lastname;\r\n\t  }\r\n\t\r\n\t  private long userId;\r\n\t\r\n\t  @Id\r\n\t  @GeneratedValue(strategy=GenerationType.AUTO)\r\n\t  public long getUserId(){\r\n\t\treturn this.userId;\r\n\t  }\r\n\t\r\n\t  public void setUserId(long userId){\r\n\t\tthis.userId = userId;\r\n\t  }\r\n    }\r\n\r\n\r\nThen I simply call `save()`, which at this point is actually an insert into database:\r\n\r\n     User user1 = new User();\r\n     user1.setFirstname(&quot;john&quot;); user1.setLastname(&quot;dew&quot;);\r\n     user1.setAge(16);\r\n\r\n     userService.saveUser(user1);// This call is actually using the JPARepository: userRepository.save(user);\r\n\r\n\r\nSo far so good. Now I want to update this user, say change his age. For this purpose I could use a Query, either QueryDSL or NamedQuery, whatever. But, considering I just want to use spring-data-jpa and the JPARepository, how do I tell it that instead of an insert I want to do an update? \r\n\r\nSpecifically, how do I tell spring-data-jpa that users with the same username and firstname are actually EQUAL and that the existing entity supposed to be updated? Overriding equals did not solve this problem.","title":"How do I update an entity using spring-data-jpa?","body":"<p>Well the question pretty much says everything. Using JPARepository how do I update an entity?</p>\n\n<p>JPARepository has only a <strong>save</strong> method, which does not tell me if it's create or update actually. For example, I insert a simple Object to the database User, which has three fields: <code>firstname</code>, <code>lastname</code> and <code>age</code>:</p>\n\n<pre><code> @Entity\n public class User {\n\n  private String firstname;\n  private String lastname;\n  //Setters and getters for age omitted, but they are the same as with firstname and lastname.\n  private int age;\n\n  @Column\n  public String getFirstname() {\n    return firstname;\n  }\n  public void setFirstname(String firstname) {\n    this.firstname = firstname;\n  }\n\n  @Column\n  public String getLastname() {\n    return lastname;\n  }\n  public void setLastname(String lastname) {\n    this.lastname = lastname;\n  }\n\n  private long userId;\n\n  @Id\n  @GeneratedValue(strategy=GenerationType.AUTO)\n  public long getUserId(){\n    return this.userId;\n  }\n\n  public void setUserId(long userId){\n    this.userId = userId;\n  }\n}\n</code></pre>\n\n<p>Then I simply call <code>save()</code>, which at this point is actually an insert into database:</p>\n\n<pre><code> User user1 = new User();\n user1.setFirstname(\"john\"); user1.setLastname(\"dew\");\n user1.setAge(16);\n\n userService.saveUser(user1);// This call is actually using the JPARepository: userRepository.save(user);\n</code></pre>\n\n<p>So far so good. Now I want to update this user, say change his age. For this purpose I could use a Query, either QueryDSL or NamedQuery, whatever. But, considering I just want to use spring-data-jpa and the JPARepository, how do I tell it that instead of an insert I want to do an update? </p>\n\n<p>Specifically, how do I tell spring-data-jpa that users with the same username and firstname are actually EQUAL and that the existing entity supposed to be updated? Overriding equals did not solve this problem.</p>\n"},{"tags":["java","mysql","jdbi"],"comments":[{"owner":{"account_id":5289146,"reputation":8128,"user_id":4222206,"display_name":"queeg"},"score":0,"creation_date":1699874244,"post_id":77472945,"comment_id":136581440,"body_markdown":"`upsert` is a term introduced by Couchbase. On relational databases you need to distinguish insert and update. Thus I believe both your SqlUpdate statements are wrongly showing &quot;insert into ...&quot;","body":"<code>upsert</code> is a term introduced by Couchbase. On relational databases you need to distinguish insert and update. Thus I believe both your SqlUpdate statements are wrongly showing &quot;insert into ...&quot;"},{"owner":{"account_id":15516865,"reputation":53,"user_id":11194107,"display_name":"Robbie"},"score":0,"creation_date":1699876123,"post_id":77472945,"comment_id":136581756,"body_markdown":"Hey @queeg,  Query 1 is what I want to turn into the style of query 2, which is why I am using on duplicate key update which mirrors the behavior of an upsert but perhaps I have worded the question wrong?","body":"Hey @queeg,  Query 1 is what I want to turn into the style of query 2, which is why I am using on duplicate key update which mirrors the behavior of an upsert but perhaps I have worded the question wrong?"}],"answers":[{"tags":[],"owner":{"account_id":2075909,"reputation":2169,"user_id":1849261,"accept_rate":78,"display_name":"4EACH"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1699955254,"creation_date":1699955254,"answer_id":77479586,"question_id":77472945,"body_markdown":"    @SqlUpdate(&quot;&quot;&quot;\r\n        INSERT INTO table_name (\r\n            account, \r\n            state,\r\n            lock,\r\n            external_id\r\n        )\r\n        VALUES (\r\n            :account,\r\n            :state,\r\n            :lock,\r\n            :external_id)\r\n        ON DUPLICATE KEY UPDATE\r\n            external_id = :external_id,\r\n            lock = :lock\r\n    &quot;&quot;&quot;)\r\n    @GetGeneratedKeys({&quot;id&quot;, &quot;rowsAffected&quot;})\r\n    idRows upsert(@BindBean ExampleBean exampleBean);\r\n\r\n\r\n##### Your idRows record should look like this:\r\n\r\n    public record idRows(Long id, int rowsAffected) {}\r\n\r\n\r\nThis way, when you call the upsert method, it should return an instance of idRows with both the generated ID and the number of affected rows.\r\n","title":"Java JBDI how to get the affected rows and generated id with a query on duplicate key update mysql","body":"<pre><code>@SqlUpdate(&quot;&quot;&quot;\n    INSERT INTO table_name (\n        account, \n        state,\n        lock,\n        external_id\n    )\n    VALUES (\n        :account,\n        :state,\n        :lock,\n        :external_id)\n    ON DUPLICATE KEY UPDATE\n        external_id = :external_id,\n        lock = :lock\n&quot;&quot;&quot;)\n@GetGeneratedKeys({&quot;id&quot;, &quot;rowsAffected&quot;})\nidRows upsert(@BindBean ExampleBean exampleBean);\n</code></pre>\n<h5>Your idRows record should look like this:</h5>\n<pre><code>public record idRows(Long id, int rowsAffected) {}\n</code></pre>\n<p>This way, when you call the upsert method, it should return an instance of idRows with both the generated ID and the number of affected rows.</p>\n"}],"owner":{"account_id":15516865,"reputation":53,"user_id":11194107,"display_name":"Robbie"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":71,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1699955254,"creation_date":1699868617,"question_id":77472945,"body_markdown":"I&#39;m trying to find out how to return affected rows on an insert and also get the generated key `id` from the same query;\r\n\r\nI have this query\r\n``` \r\n@SqlUpdate(&quot;&quot;&quot;\r\n            INSERT INTO table_name (\r\n                account, \r\n                state,\r\n                lock,\r\n                external_id\r\n)\r\n            VALUES (\r\n                :account,\r\n                :state,\r\n                :lock,\r\n                :external_id)\r\n            &quot;&quot;&quot;)\r\n    @GetGeneratedKeys(&quot;id&quot;)\r\n    Long insert(@BindBean ExampleBean exampleBean);\r\n```\r\n\r\nThat I want to update to something like this for an upsert so when I find a duplicate entry I would like to update it to something like this\r\n```\r\n  @SqlUpdate(&quot;&quot;&quot;\r\n            INSERT INTO table_name (\r\n                account, \r\n                state,\r\n                lock,\r\n                external_id\r\n)\r\n            VALUES (\r\n                :account,\r\n                :state,\r\n                :lock,\r\n                :external_id)\r\n                ON DUPLICATE KEY\r\n                UPDATE\r\n                external_id = :external_id\r\n                lock = :lock\r\n            &quot;&quot;&quot;)\r\n    @GetGeneratedKeys(&quot;id&quot;)\r\n    idRows insert(@BindBean ExampleBean exampleBean);  \r\n\r\n public record idRows(Long id, int rowsAffected) {}\r\n```\r\n\r\ncalled by doing \r\n\r\n```\r\ntry (Handle handle = jdbi.open()) {\r\n        return handle.attach(ExampleBean.class).upsert(exampleBean));\r\n        } catch (Exception e) {\r\n            log(example);\r\n            return null;\r\n        }\r\n```\r\non my Hikari Datasource I have set `&quot;useAffectedRows&quot;, true` \r\n\r\nwhere I can map both the affected rows and the generated ID at the same time to my record, any ideas would be appreciated! ","title":"Java JBDI how to get the affected rows and generated id with a query on duplicate key update mysql","body":"<p>I'm trying to find out how to return affected rows on an insert and also get the generated key <code>id</code> from the same query;</p>\n<p>I have this query</p>\n<pre><code>@SqlUpdate(&quot;&quot;&quot;\n            INSERT INTO table_name (\n                account, \n                state,\n                lock,\n                external_id\n)\n            VALUES (\n                :account,\n                :state,\n                :lock,\n                :external_id)\n            &quot;&quot;&quot;)\n    @GetGeneratedKeys(&quot;id&quot;)\n    Long insert(@BindBean ExampleBean exampleBean);\n</code></pre>\n<p>That I want to update to something like this for an upsert so when I find a duplicate entry I would like to update it to something like this</p>\n<pre><code>  @SqlUpdate(&quot;&quot;&quot;\n            INSERT INTO table_name (\n                account, \n                state,\n                lock,\n                external_id\n)\n            VALUES (\n                :account,\n                :state,\n                :lock,\n                :external_id)\n                ON DUPLICATE KEY\n                UPDATE\n                external_id = :external_id\n                lock = :lock\n            &quot;&quot;&quot;)\n    @GetGeneratedKeys(&quot;id&quot;)\n    idRows insert(@BindBean ExampleBean exampleBean);  \n\n public record idRows(Long id, int rowsAffected) {}\n</code></pre>\n<p>called by doing</p>\n<pre><code>try (Handle handle = jdbi.open()) {\n        return handle.attach(ExampleBean.class).upsert(exampleBean));\n        } catch (Exception e) {\n            log(example);\n            return null;\n        }\n</code></pre>\n<p>on my Hikari Datasource I have set <code>&quot;useAffectedRows&quot;, true</code></p>\n<p>where I can map both the affected rows and the generated ID at the same time to my record, any ideas would be appreciated!</p>\n"},{"tags":["java","eclipse","project-structure"],"comments":[{"owner":{"account_id":6212671,"reputation":1582,"user_id":4838509,"accept_rate":75,"display_name":"Bhaskara Arani"},"score":1,"creation_date":1479093952,"post_id":40581432,"comment_id":68398608,"body_markdown":"Plz share the images to clear understanding about your problem.","body":"Plz share the images to clear understanding about your problem."},{"owner":{"account_id":2313845,"reputation":1806,"user_id":2031321,"accept_rate":91,"display_name":"msagala25"},"score":0,"creation_date":1479094537,"post_id":40581432,"comment_id":68398746,"body_markdown":"i edited my post now with image.","body":"i edited my post now with image."}],"answers":[{"tags":[],"owner":{"account_id":6212671,"reputation":1582,"user_id":4838509,"accept_rate":75,"display_name":"Bhaskara Arani"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1479102611,"creation_date":1479094132,"answer_id":40581490,"question_id":40581432,"body_markdown":"In your IDE goto Windows-&gt; Show View -&gt; Navigator, check the image for the same try to change it to &quot;navigator&quot; view your will be able to see it. If not please share the images of it, then we will help you more[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/wniU6.png","title":"My src in Java Resources suddenly disappear","body":"<p>In your IDE goto Windows-> Show View -> Navigator, check the image for the same try to change it to \"navigator\" view your will be able to see it. If not please share the images of it, then we will help you more<a href=\"https://i.stack.imgur.com/wniU6.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/wniU6.png\" alt=\"enter image description here\"></a></p>\n"},{"tags":[],"owner":{"account_id":7322177,"reputation":1011,"user_id":5577819,"accept_rate":100,"display_name":"Zia"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1479102143,"creation_date":1479102143,"answer_id":40582498,"question_id":40581432,"body_markdown":"Verify your java build path of the project and check if `src` is present there.\r\nRight click on the project and select Build Path -&gt; Configure Build Path.If `src` is not in build path it won&#39;t show you can add src folder in your build path of the project by following below steps,\r\n\r\n - right click on project\r\n - select properties\r\n - select java build path\r\n - goto source tab\r\n - click add folder\r\n - select your source folder (src/main/java)\r\n\r\nAlso look at  perspective is will be in Navigator perspective.","title":"My src in Java Resources suddenly disappear","body":"<p>Verify your java build path of the project and check if <code>src</code> is present there.\nRight click on the project and select Build Path -> Configure Build Path.If <code>src</code> is not in build path it won't show you can add src folder in your build path of the project by following below steps,</p>\n\n<ul>\n<li>right click on project</li>\n<li>select properties</li>\n<li>select java build path</li>\n<li>goto source tab</li>\n<li>click add folder</li>\n<li>select your source folder (src/main/java)</li>\n</ul>\n\n<p>Also look at  perspective is will be in Navigator perspective.</p>\n"},{"tags":[],"owner":{"account_id":9704781,"reputation":37,"user_id":7198545,"display_name":"Irek Reeves"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1479886396,"creation_date":1479886396,"answer_id":40758485,"question_id":40581432,"body_markdown":"@msagala you have to `Configure build path`. Then under `Source` tab click `Add` button and you will see your existing source folder.\r\nI hope this will help you.\r\n","title":"My src in Java Resources suddenly disappear","body":"<p>@msagala you have to <code>Configure build path</code>. Then under <code>Source</code> tab click <code>Add</code> button and you will see your existing source folder.\nI hope this will help you.</p>\n"}],"owner":{"account_id":2313845,"reputation":1806,"user_id":2031321,"accept_rate":91,"display_name":"msagala25"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":264,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":40582498,"answer_count":3,"score":0,"last_activity_date":1699955023,"creation_date":1479093659,"question_id":40581432,"body_markdown":"I&#39;m creating a Dynamic Web Project, and I have src in my Java Resources then suddenly src disappear inside of it. I find out that the src became a context folder in the root along with Java Resources, Build, WEB-INF and WebContent folders. Why did this happen?\r\n\r\n[![This is the src][1]][1]\r\n\r\n  [1]: https://i.stack.imgur.com/oCi65.png","title":"My src in Java Resources suddenly disappear","body":"<p>I'm creating a Dynamic Web Project, and I have src in my Java Resources then suddenly src disappear inside of it. I find out that the src became a context folder in the root along with Java Resources, Build, WEB-INF and WebContent folders. Why did this happen?</p>\n<p><a href=\"https://i.stack.imgur.com/oCi65.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/oCi65.png\" alt=\"This is the src\" /></a></p>\n"},{"tags":["java","swt","transparent","composite"],"comments":[{"owner":{"account_id":69443,"reputation":85343,"user_id":202009,"accept_rate":79,"display_name":"Andy Thomas"},"score":0,"creation_date":1565905746,"post_id":42087977,"comment_id":101501137,"body_markdown":"See also the style `SWT.TRANSPARENT`, at least for Composites.","body":"See also the style <code>SWT.TRANSPARENT</code>, at least for Composites."}],"answers":[{"tags":[],"owner":{"account_id":8310021,"reputation":7568,"user_id":6245535,"display_name":"Loris Securo"},"down_vote_count":0,"up_vote_count":10,"is_accepted":true,"score":10,"last_activity_date":1512073659,"creation_date":1487289031,"answer_id":42286915,"question_id":42087977,"body_markdown":"A possible solution would be to put a semi-transparent `Shell` with no trimmings over the `Composite` you want to cover.\r\n\r\nThe tricky part is to update the overlay `Shell` to continuously match the size, position and visibility of the `Composite` and its parents (since they also could affect the children bounds and visibility).\r\n\r\nSo I decided to try to make a class `Overlay` to do that; it can be used to cover any `Control` and it uses control and paint listeners to track and match the underlying `Control`. These listeners are also attached to the whole hierarchy of parents of the `Control`.\r\n\r\nYou can set the color, the transparency and a text over the `Overlay` using the corresponding methods.\r\n\r\nI made some simple tests and it seemed to work correctly, but I can&#39;t guarantee anything. You might want to give it a try it.\r\n\r\nA simple example using it:\r\n\r\n    public class OverlayTest {\r\n\r\n\t\tpublic static void main(String[] args) {\r\n\r\n\t\t\tDisplay display = new Display();\r\n\t\t\tShell shell = new Shell(display);\r\n\t\t\tshell.setLayout(new FillLayout(SWT.VERTICAL));\r\n\t\t\tshell.setSize(250, 250);\r\n\r\n\t\t\t// create the composite\r\n\t\t\tComposite composite = new Composite(shell, SWT.NONE);\r\n\t\t\tcomposite.setLayout(new FillLayout(SWT.VERTICAL));\r\n\r\n\t\t\t// add stuff to the composite\r\n\t\t\tfor (int i = 0; i &lt; 5; i++) {\r\n\t\t\t\tnew Text(composite, SWT.BORDER).setText(&quot;Text &quot; + i);\r\n\t\t\t}\r\n\r\n\t\t\t// create the overlay over the composite\r\n\t\t\tOverlay overlay = new Overlay(composite);\r\n\t\t\toverlay.setText(&quot;No data available&quot;);\r\n\r\n\t\t\t// create the button to show/hide the overlay\r\n\t\t\tButton button = new Button(shell, SWT.PUSH);\r\n\t\t\tbutton.setText(&quot;Show/hide overlay&quot;);\r\n\t\t\tbutton.addSelectionListener(new SelectionAdapter() {\r\n\t\t\t\t@Override\r\n\t\t\t\tpublic void widgetSelected(SelectionEvent arg0) {\r\n\t\t\t\t\t// if the overlay is showing we hide it, otherwise we show it\r\n\t\t\t\t\tif (overlay.isShowing()) {\r\n\t\t\t\t\t\toverlay.remove();\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse {\r\n\t\t\t\t\t\toverlay.show();\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\tshell.open();\r\n\t\t\twhile (shell != null &amp;&amp; !shell.isDisposed()) {\r\n\t\t\t\tif (!display.readAndDispatch()) {\r\n\t\t\t\t\tdisplay.sleep();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t}\r\n\r\nAnd the `Overlay` class:\r\n\r\n    import java.util.ArrayList;\r\n    import java.util.List;\r\n    import java.util.Objects;\r\n    \r\n    import org.eclipse.swt.SWT;\r\n    import org.eclipse.swt.events.ControlEvent;\r\n    import org.eclipse.swt.events.ControlListener;\r\n    import org.eclipse.swt.events.DisposeEvent;\r\n    import org.eclipse.swt.events.DisposeListener;\r\n    import org.eclipse.swt.events.PaintEvent;\r\n    import org.eclipse.swt.events.PaintListener;\r\n    import org.eclipse.swt.graphics.Color;\r\n    import org.eclipse.swt.graphics.Point;\r\n    import org.eclipse.swt.graphics.Rectangle;\r\n    import org.eclipse.swt.layout.GridData;\r\n    import org.eclipse.swt.layout.GridLayout;\r\n    import org.eclipse.swt.widgets.Composite;\r\n    import org.eclipse.swt.widgets.Control;\r\n    import org.eclipse.swt.widgets.Label;\r\n    import org.eclipse.swt.widgets.Scrollable;\r\n    import org.eclipse.swt.widgets.Shell;\r\n    \r\n    /**\r\n     *  A customizable overlay over a control.\r\n     *  \r\n     *  @author Loris Securo\r\n     */\r\n    public class Overlay {\r\n    \r\n    \tprivate List&lt;Composite&gt; parents;\r\n    \tprivate Control objectToOverlay;\r\n    \tprivate Shell overlay;\r\n    \tprivate Label label;\r\n    \tprivate ControlListener controlListener;\r\n    \tprivate DisposeListener disposeListener;\r\n    \tprivate PaintListener paintListener;\r\n    \tprivate boolean showing;\r\n    \tprivate boolean hasClientArea;\r\n    \tprivate Scrollable scrollableToOverlay;\r\n    \r\n    \tpublic Overlay(Control objectToOverlay) {\r\n    \r\n    \t\tObjects.requireNonNull(objectToOverlay);\r\n    \r\n    \t\tthis.objectToOverlay = objectToOverlay;\r\n    \r\n    \t\t// if the object to overlay is an instance of Scrollable (e.g. Shell) then it has \r\n    \t\t// the getClientArea method, which is preferable over Control.getSize\r\n    \t\tif (objectToOverlay instanceof Scrollable) {\r\n    \t\t\thasClientArea = true;\r\n    \t\t\tscrollableToOverlay = (Scrollable) objectToOverlay;\r\n    \t\t}\r\n    \t\telse {\r\n    \t\t\thasClientArea = false;\r\n    \t\t\tscrollableToOverlay = null;\r\n    \t\t}\r\n    \r\n    \t\t// save the parents of the object, so we can add/remove listeners to them\r\n    \t\tparents = new ArrayList&lt;Composite&gt;();\r\n    \t\tComposite parent = objectToOverlay.getParent();\r\n    \t\twhile (parent != null) {\r\n    \t\t\tparents.add(parent);\r\n    \t\t\tparent = parent.getParent();\r\n    \t\t}\r\n    \r\n    \t\t// listener to track position and size changes in order to modify the overlay bounds as well\r\n    \t\tcontrolListener = new ControlListener() {\r\n    \t\t\t@Override\r\n    \t\t\tpublic void controlMoved(ControlEvent e) {\r\n    \t\t\t\treposition();\r\n    \t\t\t}\r\n    \r\n    \t\t\t@Override\r\n    \t\t\tpublic void controlResized(ControlEvent e) {\r\n    \t\t\t\treposition();\r\n    \t\t\t}\r\n    \t\t};\r\n    \r\n    \t\t// listener to track paint changes, like when the object or its parents become not visible (for example changing tab in a TabFolder)\r\n    \t\tpaintListener = new PaintListener() {\r\n    \t\t\t@Override\r\n    \t\t\tpublic void paintControl(PaintEvent arg0) {\r\n    \t\t\t\treposition();\r\n    \t\t\t}\r\n    \t\t};\r\n    \r\n    \t\t// listener to remove the overlay if the object to overlay is disposed\r\n    \t\tdisposeListener = new DisposeListener() {\r\n    \t\t\t@Override\r\n    \t\t\tpublic void widgetDisposed(DisposeEvent e) {\r\n    \t\t\t\tremove();\r\n    \t\t\t}\r\n    \t\t};\r\n    \r\n    \t\t// create the overlay shell\r\n    \t\toverlay = new Shell(objectToOverlay.getShell(), SWT.NO_TRIM);\r\n    \r\n    \t\t// default values of the overlay\r\n    \t\toverlay.setBackground(objectToOverlay.getDisplay().getSystemColor(SWT.COLOR_GRAY));\r\n    \t\toverlay.setAlpha(200);\r\n    \r\n    \t\t// so the label can inherit the background of the overlay\r\n    \t\toverlay.setBackgroundMode(SWT.INHERIT_DEFAULT);\r\n    \r\n    \t\t// label to display a text\r\n    \t\t// style WRAP so if it is too long the text get wrapped\r\n    \t\tlabel = new Label(overlay, SWT.WRAP);\r\n    \r\n    \t\t// to center the label\r\n    \t\toverlay.setLayout(new GridLayout());\r\n    \t\tlabel.setLayoutData(new GridData(SWT.CENTER, SWT.CENTER, true, true));\r\n    \r\n    \t\tshowing = false;\r\n    \t\toverlay.open();\r\n    \t\toverlay.setVisible(showing);\r\n    \t}\r\n    \r\n    \tpublic void show() {\r\n    \r\n    \t\t// if it&#39;s already visible we just exit\r\n    \t\tif (showing) {\r\n    \t\t\treturn;\r\n    \t\t}\r\n    \r\n    \t\t// set the overlay position over the object\r\n    \t\treposition();\r\n    \r\n    \t\t// show the overlay\r\n    \t\toverlay.setVisible(true);\r\n    \r\n    \t\t// add listeners to the object to overlay\r\n    \t\tobjectToOverlay.addControlListener(controlListener);\r\n    \t\tobjectToOverlay.addDisposeListener(disposeListener);\r\n    \t\tobjectToOverlay.addPaintListener(paintListener);\r\n    \r\n    \t\t// add listeners also to the parents because if they change then also the visibility of our object could change\r\n    \t\tfor (Composite parent : parents) {\r\n    \t\t\tparent.addControlListener(controlListener);\r\n    \t\t\tparent.addPaintListener(paintListener);\r\n    \t\t}\r\n    \r\n    \t\tshowing = true;\r\n    \t}\r\n    \r\n    \tpublic void remove() {\r\n    \r\n    \t\t// if it&#39;s already not visible we just exit\r\n    \t\tif (!showing) {\r\n    \t\t\treturn;\r\n    \t\t}\r\n    \r\n    \t\t// remove the listeners\r\n    \t\tif (!objectToOverlay.isDisposed()) {\r\n    \t\t\tobjectToOverlay.removeControlListener(controlListener);\r\n    \t\t\tobjectToOverlay.removeDisposeListener(disposeListener);\r\n    \t\t\tobjectToOverlay.removePaintListener(paintListener);\r\n    \t\t}\r\n    \r\n    \t\t// remove the parents listeners\r\n    \t\tfor (Composite parent : parents) {\r\n    \t\t\tif (!parent.isDisposed()) {\r\n    \t\t\t\tparent.removeControlListener(controlListener);\r\n    \t\t\t\tparent.removePaintListener(paintListener);\r\n    \t\t\t}\r\n    \t\t}\r\n    \r\n    \t\t// remove the overlay shell\r\n    \t\tif (!overlay.isDisposed()) {\r\n    \t\t\toverlay.setVisible(false);\r\n    \t\t}\r\n    \r\n    \t\tshowing = false;\r\n    \t}\r\n    \r\n    \tpublic void setBackground(Color background) {\r\n    \t\toverlay.setBackground(background);\r\n    \t}\r\n    \r\n    \tpublic Color getBackground() {\r\n    \t\treturn overlay.getBackground();\r\n    \t}\r\n    \r\n    \tpublic void setAlpha(int alpha) {\r\n    \t\toverlay.setAlpha(alpha);\r\n    \t}\r\n    \r\n    \tpublic int getAlpha() {\r\n    \t\treturn overlay.getAlpha();\r\n    \t}\r\n    \r\n    \tpublic boolean isShowing() {\r\n    \t\treturn showing;\r\n    \t}\r\n    \r\n    \tpublic void setText(String text) {\r\n    \t\tlabel.setText(text);\r\n    \r\n    \t\t// to adjust the label size accordingly\r\n    \t\toverlay.layout();\r\n    \t}\r\n    \r\n    \tpublic String getText() {\r\n    \t\treturn label.getText();\r\n    \t}\r\n    \r\n    \tprivate void reposition() {\r\n    \r\n    \t\t// if the object is not visible, we hide the overlay and exit\r\n    \t\tif (!objectToOverlay.isVisible()) {\r\n    \t\t\toverlay.setBounds(new Rectangle(0, 0, 0, 0));\r\n    \t\t\treturn;\r\n    \t\t}\r\n    \r\n    \t\t// if the object is visible we need to find the visible region in order to correctly place the overlay\r\n    \r\n    \t\t// get the display bounds of the object to overlay\r\n    \t\tPoint objectToOverlayDisplayLocation = objectToOverlay.toDisplay(0, 0);\r\n    \r\n    \t\tPoint objectToOverlaySize;\r\n    \r\n    \t\t// if it has a client area, we prefer that instead of the size \r\n    \t\tif (hasClientArea) {\r\n    \t\t\tRectangle clientArea = scrollableToOverlay.getClientArea();\r\n    \t\t\tobjectToOverlaySize = new Point(clientArea.width, clientArea.height);\r\n    \t\t}\r\n    \t\telse {\r\n    \t\t\tobjectToOverlaySize = objectToOverlay.getSize();\r\n    \t\t}\r\n    \r\n    \t\tRectangle objectToOverlayBounds = new Rectangle(objectToOverlayDisplayLocation.x, objectToOverlayDisplayLocation.y, objectToOverlaySize.x,\r\n    \t\t\t\tobjectToOverlaySize.y);\r\n    \r\n    \t\tRectangle intersection = objectToOverlayBounds;\r\n    \r\n    \t\t// intersect the bounds of the object with its parents bounds so we get only the visible bounds\r\n    \t\tfor (Composite parent : parents) {\r\n    \r\n    \t\t\tRectangle parentClientArea = parent.getClientArea();\r\n    \t\t\tPoint parentLocation = parent.toDisplay(parentClientArea.x, parentClientArea.y);\r\n    \t\t\tRectangle parentBounds = new Rectangle(parentLocation.x, parentLocation.y, parentClientArea.width, parentClientArea.height);\r\n    \r\n    \t\t\tintersection = intersection.intersection(parentBounds);\r\n    \r\n    \t\t\t// if intersection has no size then it would be a waste of time to continue\r\n    \t\t\tif (intersection.width == 0 || intersection.height == 0) {\r\n    \t\t\t\tbreak;\r\n    \t\t\t}\r\n    \t\t}\r\n    \r\n    \t\toverlay.setBounds(intersection);\r\n    \t}\r\n    \r\n    }","title":"Place transparent composite over other composite in SWT","body":"<p>A possible solution would be to put a semi-transparent <code>Shell</code> with no trimmings over the <code>Composite</code> you want to cover.</p>\n\n<p>The tricky part is to update the overlay <code>Shell</code> to continuously match the size, position and visibility of the <code>Composite</code> and its parents (since they also could affect the children bounds and visibility).</p>\n\n<p>So I decided to try to make a class <code>Overlay</code> to do that; it can be used to cover any <code>Control</code> and it uses control and paint listeners to track and match the underlying <code>Control</code>. These listeners are also attached to the whole hierarchy of parents of the <code>Control</code>.</p>\n\n<p>You can set the color, the transparency and a text over the <code>Overlay</code> using the corresponding methods.</p>\n\n<p>I made some simple tests and it seemed to work correctly, but I can't guarantee anything. You might want to give it a try it.</p>\n\n<p>A simple example using it:</p>\n\n<pre><code>public class OverlayTest {\n\n    public static void main(String[] args) {\n\n        Display display = new Display();\n        Shell shell = new Shell(display);\n        shell.setLayout(new FillLayout(SWT.VERTICAL));\n        shell.setSize(250, 250);\n\n        // create the composite\n        Composite composite = new Composite(shell, SWT.NONE);\n        composite.setLayout(new FillLayout(SWT.VERTICAL));\n\n        // add stuff to the composite\n        for (int i = 0; i &lt; 5; i++) {\n            new Text(composite, SWT.BORDER).setText(\"Text \" + i);\n        }\n\n        // create the overlay over the composite\n        Overlay overlay = new Overlay(composite);\n        overlay.setText(\"No data available\");\n\n        // create the button to show/hide the overlay\n        Button button = new Button(shell, SWT.PUSH);\n        button.setText(\"Show/hide overlay\");\n        button.addSelectionListener(new SelectionAdapter() {\n            @Override\n            public void widgetSelected(SelectionEvent arg0) {\n                // if the overlay is showing we hide it, otherwise we show it\n                if (overlay.isShowing()) {\n                    overlay.remove();\n                }\n                else {\n                    overlay.show();\n                }\n            }\n        });\n\n        shell.open();\n        while (shell != null &amp;&amp; !shell.isDisposed()) {\n            if (!display.readAndDispatch()) {\n                display.sleep();\n            }\n        }\n    }\n\n}\n</code></pre>\n\n<p>And the <code>Overlay</code> class:</p>\n\n<pre><code>import java.util.ArrayList;\nimport java.util.List;\nimport java.util.Objects;\n\nimport org.eclipse.swt.SWT;\nimport org.eclipse.swt.events.ControlEvent;\nimport org.eclipse.swt.events.ControlListener;\nimport org.eclipse.swt.events.DisposeEvent;\nimport org.eclipse.swt.events.DisposeListener;\nimport org.eclipse.swt.events.PaintEvent;\nimport org.eclipse.swt.events.PaintListener;\nimport org.eclipse.swt.graphics.Color;\nimport org.eclipse.swt.graphics.Point;\nimport org.eclipse.swt.graphics.Rectangle;\nimport org.eclipse.swt.layout.GridData;\nimport org.eclipse.swt.layout.GridLayout;\nimport org.eclipse.swt.widgets.Composite;\nimport org.eclipse.swt.widgets.Control;\nimport org.eclipse.swt.widgets.Label;\nimport org.eclipse.swt.widgets.Scrollable;\nimport org.eclipse.swt.widgets.Shell;\n\n/**\n *  A customizable overlay over a control.\n *  \n *  @author Loris Securo\n */\npublic class Overlay {\n\n    private List&lt;Composite&gt; parents;\n    private Control objectToOverlay;\n    private Shell overlay;\n    private Label label;\n    private ControlListener controlListener;\n    private DisposeListener disposeListener;\n    private PaintListener paintListener;\n    private boolean showing;\n    private boolean hasClientArea;\n    private Scrollable scrollableToOverlay;\n\n    public Overlay(Control objectToOverlay) {\n\n        Objects.requireNonNull(objectToOverlay);\n\n        this.objectToOverlay = objectToOverlay;\n\n        // if the object to overlay is an instance of Scrollable (e.g. Shell) then it has \n        // the getClientArea method, which is preferable over Control.getSize\n        if (objectToOverlay instanceof Scrollable) {\n            hasClientArea = true;\n            scrollableToOverlay = (Scrollable) objectToOverlay;\n        }\n        else {\n            hasClientArea = false;\n            scrollableToOverlay = null;\n        }\n\n        // save the parents of the object, so we can add/remove listeners to them\n        parents = new ArrayList&lt;Composite&gt;();\n        Composite parent = objectToOverlay.getParent();\n        while (parent != null) {\n            parents.add(parent);\n            parent = parent.getParent();\n        }\n\n        // listener to track position and size changes in order to modify the overlay bounds as well\n        controlListener = new ControlListener() {\n            @Override\n            public void controlMoved(ControlEvent e) {\n                reposition();\n            }\n\n            @Override\n            public void controlResized(ControlEvent e) {\n                reposition();\n            }\n        };\n\n        // listener to track paint changes, like when the object or its parents become not visible (for example changing tab in a TabFolder)\n        paintListener = new PaintListener() {\n            @Override\n            public void paintControl(PaintEvent arg0) {\n                reposition();\n            }\n        };\n\n        // listener to remove the overlay if the object to overlay is disposed\n        disposeListener = new DisposeListener() {\n            @Override\n            public void widgetDisposed(DisposeEvent e) {\n                remove();\n            }\n        };\n\n        // create the overlay shell\n        overlay = new Shell(objectToOverlay.getShell(), SWT.NO_TRIM);\n\n        // default values of the overlay\n        overlay.setBackground(objectToOverlay.getDisplay().getSystemColor(SWT.COLOR_GRAY));\n        overlay.setAlpha(200);\n\n        // so the label can inherit the background of the overlay\n        overlay.setBackgroundMode(SWT.INHERIT_DEFAULT);\n\n        // label to display a text\n        // style WRAP so if it is too long the text get wrapped\n        label = new Label(overlay, SWT.WRAP);\n\n        // to center the label\n        overlay.setLayout(new GridLayout());\n        label.setLayoutData(new GridData(SWT.CENTER, SWT.CENTER, true, true));\n\n        showing = false;\n        overlay.open();\n        overlay.setVisible(showing);\n    }\n\n    public void show() {\n\n        // if it's already visible we just exit\n        if (showing) {\n            return;\n        }\n\n        // set the overlay position over the object\n        reposition();\n\n        // show the overlay\n        overlay.setVisible(true);\n\n        // add listeners to the object to overlay\n        objectToOverlay.addControlListener(controlListener);\n        objectToOverlay.addDisposeListener(disposeListener);\n        objectToOverlay.addPaintListener(paintListener);\n\n        // add listeners also to the parents because if they change then also the visibility of our object could change\n        for (Composite parent : parents) {\n            parent.addControlListener(controlListener);\n            parent.addPaintListener(paintListener);\n        }\n\n        showing = true;\n    }\n\n    public void remove() {\n\n        // if it's already not visible we just exit\n        if (!showing) {\n            return;\n        }\n\n        // remove the listeners\n        if (!objectToOverlay.isDisposed()) {\n            objectToOverlay.removeControlListener(controlListener);\n            objectToOverlay.removeDisposeListener(disposeListener);\n            objectToOverlay.removePaintListener(paintListener);\n        }\n\n        // remove the parents listeners\n        for (Composite parent : parents) {\n            if (!parent.isDisposed()) {\n                parent.removeControlListener(controlListener);\n                parent.removePaintListener(paintListener);\n            }\n        }\n\n        // remove the overlay shell\n        if (!overlay.isDisposed()) {\n            overlay.setVisible(false);\n        }\n\n        showing = false;\n    }\n\n    public void setBackground(Color background) {\n        overlay.setBackground(background);\n    }\n\n    public Color getBackground() {\n        return overlay.getBackground();\n    }\n\n    public void setAlpha(int alpha) {\n        overlay.setAlpha(alpha);\n    }\n\n    public int getAlpha() {\n        return overlay.getAlpha();\n    }\n\n    public boolean isShowing() {\n        return showing;\n    }\n\n    public void setText(String text) {\n        label.setText(text);\n\n        // to adjust the label size accordingly\n        overlay.layout();\n    }\n\n    public String getText() {\n        return label.getText();\n    }\n\n    private void reposition() {\n\n        // if the object is not visible, we hide the overlay and exit\n        if (!objectToOverlay.isVisible()) {\n            overlay.setBounds(new Rectangle(0, 0, 0, 0));\n            return;\n        }\n\n        // if the object is visible we need to find the visible region in order to correctly place the overlay\n\n        // get the display bounds of the object to overlay\n        Point objectToOverlayDisplayLocation = objectToOverlay.toDisplay(0, 0);\n\n        Point objectToOverlaySize;\n\n        // if it has a client area, we prefer that instead of the size \n        if (hasClientArea) {\n            Rectangle clientArea = scrollableToOverlay.getClientArea();\n            objectToOverlaySize = new Point(clientArea.width, clientArea.height);\n        }\n        else {\n            objectToOverlaySize = objectToOverlay.getSize();\n        }\n\n        Rectangle objectToOverlayBounds = new Rectangle(objectToOverlayDisplayLocation.x, objectToOverlayDisplayLocation.y, objectToOverlaySize.x,\n                objectToOverlaySize.y);\n\n        Rectangle intersection = objectToOverlayBounds;\n\n        // intersect the bounds of the object with its parents bounds so we get only the visible bounds\n        for (Composite parent : parents) {\n\n            Rectangle parentClientArea = parent.getClientArea();\n            Point parentLocation = parent.toDisplay(parentClientArea.x, parentClientArea.y);\n            Rectangle parentBounds = new Rectangle(parentLocation.x, parentLocation.y, parentClientArea.width, parentClientArea.height);\n\n            intersection = intersection.intersection(parentBounds);\n\n            // if intersection has no size then it would be a waste of time to continue\n            if (intersection.width == 0 || intersection.height == 0) {\n                break;\n            }\n        }\n\n        overlay.setBounds(intersection);\n    }\n\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1879117,"reputation":91,"user_id":1699692,"display_name":"Jacob L"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1699954808,"creation_date":1699265043,"answer_id":77430228,"question_id":42087977,"body_markdown":"1. Set layout to null on the parent\r\n\r\n2. Add a new Composite with style SWT.TRANSPARENT on the parent BEFORE the one you want to draw over\r\n\r\n3. Set bounds manually on the composites to the same area, use a resize listener if it can change.\r\n\r\n4. Use setVisible() to show the overlay or not.\r\n\r\nWarning! Don&#39;t use TabFolder together with this method, it has a bug that will cause continous redraw. Also CTabFolder using setTopRight() will have a similar issue but can be avoided by overriding getRightItemEdge (GC gc) and not calling super.getRightItemEdge(gc) again unless size has changed. Will file this bug as soon as the move from bugzilla is complete","title":"Place transparent composite over other composite in SWT","body":"<ol>\n<li><p>Set layout to null on the parent</p>\n</li>\n<li><p>Add a new Composite with style SWT.TRANSPARENT on the parent BEFORE the one you want to draw over</p>\n</li>\n<li><p>Set bounds manually on the composites to the same area, use a resize listener if it can change.</p>\n</li>\n<li><p>Use setVisible() to show the overlay or not.</p>\n</li>\n</ol>\n<p>Warning! Don't use TabFolder together with this method, it has a bug that will cause continous redraw. Also CTabFolder using setTopRight() will have a similar issue but can be avoided by overriding getRightItemEdge (GC gc) and not calling super.getRightItemEdge(gc) again unless size has changed. Will file this bug as soon as the move from bugzilla is complete</p>\n"}],"owner":{"account_id":2851226,"reputation":2669,"user_id":2448399,"accept_rate":86,"display_name":"JimmyD"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2526,"favorite_count":0,"down_vote_count":0,"up_vote_count":5,"accepted_answer_id":42286915,"answer_count":2,"score":5,"last_activity_date":1699954808,"creation_date":1486464894,"question_id":42087977,"body_markdown":"I&#39;m searching for a way to add an overlay over some composites in my application. The overlay will contain an label with text &quot;No data available&quot;. The underlying composite need to be shown but the user cannot do anything. My application contains different composite part in one screen so I need a way to only place the overlay over one of the composites. Is there a way to implement this in SWT?","title":"Place transparent composite over other composite in SWT","body":"<p>I'm searching for a way to add an overlay over some composites in my application. The overlay will contain an label with text \"No data available\". The underlying composite need to be shown but the user cannot do anything. My application contains different composite part in one screen so I need a way to only place the overlay over one of the composites. Is there a way to implement this in SWT?</p>\n"},{"tags":["java","unit-testing","testing","groovy","spock"],"answers":[{"tags":[],"owner":{"account_id":1087271,"reputation":64101,"user_id":1082681,"accept_rate":90,"display_name":"kriegaex"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1699841719,"creation_date":1699841719,"answer_id":77471437,"question_id":77468251,"body_markdown":"This is a Spock FAQ, also here on Stack Overflow. The [Spock manual](https://spockframework.org/spock/docs/2.4-M1/all_in_one.html#_combining_mocking_and_stubbing) clearly explains, why what you are doing does not work:\r\n\r\n&gt; ### Combining Mocking and Stubbing\r\n&gt; \r\n&gt; Mocking and stubbing go hand-in-hand:\r\n&gt; \r\n&gt; ```java\r\n&gt; 1 * subscriber.receive(&quot;message1&quot;) &gt;&gt; &quot;ok&quot;\r\n&gt; 1 * subscriber.receive(&quot;message2&quot;) &gt;&gt; &quot;fail&quot;\r\n&gt; ```\r\n&gt; \r\n&gt; When mocking and stubbing the same method call, they have to happen in the same interaction. In particular, the following Mockito-style splitting of stubbing and mocking into two separate statements will _not_ work:\r\n&gt; \r\n&gt; ```java\r\n&gt; given:\r\n&gt; subscriber.receive(&quot;message1&quot;) &gt;&gt; &quot;ok&quot;\r\n&gt; \r\n&gt; when:\r\n&gt; publisher.send(&quot;message1&quot;)\r\n&gt; \r\n&gt; then:\r\n&gt; 1 * subscriber.receive(&quot;message1&quot;)\r\n&gt; ```\r\n&gt;\r\n&gt; As explained in [Where to Declare Interactions](https://spockframework.org/spock/docs/2.4-M1/all_in_one.html#_where_to_declare_interactions), the `receive` call will first get matched against the interaction in the `then:` block. Since that interaction doesn&#39;t specify a response, the default value for the method&#39;s return type (`null` in this case) will be returned. (This is just another facet of Spock&#39;s lenient approach to mocking.). Hence, the interaction in the `given:` block will never get a chance to match.\r\n&gt;\r\n&gt; **NOTE:** Mocking and stubbing of the same method call has to happen in the same interaction.\r\n\r\nI.e., you want to use something like\r\n\r\n```java\r\n1 * appointmentRepository.findById(nonExistingAppointmentId) &gt;&gt; {\r\n  throw new AppointmentNotFoundException(&quot;Appointment with id &quot; + nonExistingAppointmentId + &quot; not found&quot;)\r\n}\r\n```\r\n\r\nin your `then:` block.","title":"Why does my test not work when splitting mocking and stubbing?","body":"<p>This is a Spock FAQ, also here on Stack Overflow. The <a href=\"https://spockframework.org/spock/docs/2.4-M1/all_in_one.html#_combining_mocking_and_stubbing\" rel=\"nofollow noreferrer\">Spock manual</a> clearly explains, why what you are doing does not work:</p>\n<blockquote>\n<h3>Combining Mocking and Stubbing</h3>\n<p>Mocking and stubbing go hand-in-hand:</p>\n<pre class=\"lang-java prettyprint-override\"><code>1 * subscriber.receive(&quot;message1&quot;) &gt;&gt; &quot;ok&quot;\n1 * subscriber.receive(&quot;message2&quot;) &gt;&gt; &quot;fail&quot;\n</code></pre>\n<p>When mocking and stubbing the same method call, they have to happen in the same interaction. In particular, the following Mockito-style splitting of stubbing and mocking into two separate statements will <em>not</em> work:</p>\n<pre class=\"lang-java prettyprint-override\"><code>given:\nsubscriber.receive(&quot;message1&quot;) &gt;&gt; &quot;ok&quot;\n\nwhen:\npublisher.send(&quot;message1&quot;)\n\nthen:\n1 * subscriber.receive(&quot;message1&quot;)\n</code></pre>\n<p>As explained in <a href=\"https://spockframework.org/spock/docs/2.4-M1/all_in_one.html#_where_to_declare_interactions\" rel=\"nofollow noreferrer\">Where to Declare Interactions</a>, the <code>receive</code> call will first get matched against the interaction in the <code>then:</code> block. Since that interaction doesn't specify a response, the default value for the method's return type (<code>null</code> in this case) will be returned. (This is just another facet of Spock's lenient approach to mocking.). Hence, the interaction in the <code>given:</code> block will never get a chance to match.</p>\n<p><strong>NOTE:</strong> Mocking and stubbing of the same method call has to happen in the same interaction.</p>\n</blockquote>\n<p>I.e., you want to use something like</p>\n<pre class=\"lang-java prettyprint-override\"><code>1 * appointmentRepository.findById(nonExistingAppointmentId) &gt;&gt; {\n  throw new AppointmentNotFoundException(&quot;Appointment with id &quot; + nonExistingAppointmentId + &quot; not found&quot;)\n}\n</code></pre>\n<p>in your <code>then:</code> block.</p>\n"},{"tags":[],"owner":{"account_id":4358,"reputation":168410,"user_id":6509,"display_name":"tim_yates"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1699954761,"creation_date":1699954761,"answer_id":77479536,"question_id":77468251,"body_markdown":"I had to add things so I could run your examples, but does:\r\n\r\n```groovy\r\nclass TestSpec extends Specification {\r\n\r\n    def &quot;should throw AppointmentNotFoundException when appointment do not exist&quot; () {\r\n        given:\r\n        AppointmentRepository appointmentRepository = Mock()\r\n        FindAppointmentQueryHandler findAppointmentQueryHandler = new FindAppointmentQueryHandler(appRepository: appointmentRepository)\r\n        long nonExistingAppointmentId = 69L\r\n\r\n        when:\r\n        findAppointmentQueryHandler.handle(nonExistingAppointmentId)\r\n\r\n        then:\r\n        def ex = thrown(AppointmentNotFoundException)\r\n        ex.message == &quot;Appointment with id $nonExistingAppointmentId not found&quot;\r\n\r\n        1 * appointmentRepository.findById(69L) &gt;&gt; {\r\n            throw new AppointmentNotFoundException(&quot;Appointment with id &quot; + nonExistingAppointmentId + &quot; not found&quot;)\r\n        }\r\n    }\r\n\r\n    static class FindAppointmentQueryHandler {\r\n\r\n        AppointmentRepository appRepository\r\n\r\n        String handle(long id) {\r\n            appRepository.findById(id)\r\n        }\r\n    }\r\n\r\n    static class AppointmentRepository {\r\n\r\n        String findById(long id) {\r\n            &quot;called $id&quot;\r\n        }\r\n    }\r\n\r\n    static class AppointmentNotFoundException extends RuntimeException {\r\n\r\n        AppointmentNotFoundException(String message) {\r\n            super(message)\r\n        }\r\n    }\r\n}\r\n```\r\n\r\nwork?","title":"Why does my test not work when splitting mocking and stubbing?","body":"<p>I had to add things so I could run your examples, but does:</p>\n<pre><code>class TestSpec extends Specification {\n\n    def &quot;should throw AppointmentNotFoundException when appointment do not exist&quot; () {\n        given:\n        AppointmentRepository appointmentRepository = Mock()\n        FindAppointmentQueryHandler findAppointmentQueryHandler = new FindAppointmentQueryHandler(appRepository: appointmentRepository)\n        long nonExistingAppointmentId = 69L\n\n        when:\n        findAppointmentQueryHandler.handle(nonExistingAppointmentId)\n\n        then:\n        def ex = thrown(AppointmentNotFoundException)\n        ex.message == &quot;Appointment with id $nonExistingAppointmentId not found&quot;\n\n        1 * appointmentRepository.findById(69L) &gt;&gt; {\n            throw new AppointmentNotFoundException(&quot;Appointment with id &quot; + nonExistingAppointmentId + &quot; not found&quot;)\n        }\n    }\n\n    static class FindAppointmentQueryHandler {\n\n        AppointmentRepository appRepository\n\n        String handle(long id) {\n            appRepository.findById(id)\n        }\n    }\n\n    static class AppointmentRepository {\n\n        String findById(long id) {\n            &quot;called $id&quot;\n        }\n    }\n\n    static class AppointmentNotFoundException extends RuntimeException {\n\n        AppointmentNotFoundException(String message) {\n            super(message)\n        }\n    }\n}\n</code></pre>\n<p>work?</p>\n"}],"owner":{"account_id":25101919,"reputation":7,"user_id":18952539,"display_name":"michalbarnat"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":57,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77479536,"answer_count":2,"score":0,"last_activity_date":1699954761,"creation_date":1699777773,"question_id":77468251,"body_markdown":"I struggle with Spock/Groovy testing.\r\nDon&#39;t know why but in WHEN section, I cannot check number of calls and checking the value at once..\r\nIf I check one of them separatly all works fine!\r\n\r\nThis test passed:\r\n```java\r\ndef &quot;should throw AppointmentNotFoundException when appointment do not exist&quot; () {\r\n  given:\r\n  long nonExistingAppointmentId = 69L\r\n\r\n  when:\r\n  appointmentRepository.findById(nonExistingAppointmentId) &gt;&gt; { throw new AppointmentNotFoundException(&quot;Appointment with id &quot; + nonExistingAppointmentId + &quot; not found&quot;) }\r\n  findAppointmentQueryHandler.handle(nonExistingAppointmentId)\r\n\r\n  then:\r\n  thrown(AppointmentNotFoundException)\r\n}\r\n```\r\n\r\nAlso this one passed without any problem:\r\n```java\r\ndef &quot;should throw AppointmentNotFoundException when appointment do not exist&quot; () {\r\n  given:\r\n  long nonExistingAppointmentId = 69L\r\n\r\n  when:\r\n  appointmentRepository.findById(nonExistingAppointmentId) &gt;&gt; { throw new AppointmentNotFoundException(&quot;Appointment with id &quot; + nonExistingAppointmentId + &quot; not found&quot;) }\r\n  findAppointmentQueryHandler.handle(nonExistingAppointmentId)\r\n\r\n  then:\r\n  1 * appointmentRepository.findById(69L)\r\n}\r\n```\r\n\r\nBut if I try to make 1 test to check all of it then I have error\r\n```java\r\ndef &quot;should throw AppointmentNotFoundException when appointment do not exist&quot; () {\r\n  given:\r\n  long nonExistingAppointmentId = 69L\r\n\r\n  when:\r\n  appointmentRepository.findById(nonExistingAppointmentId) &gt;&gt; { throw new AppointmentNotFoundException(&quot;Appointment with id &quot; + nonExistingAppointmentId + &quot; not found&quot;) }\r\n  findAppointmentQueryHandler.handle(nonExistingAppointmentId)\r\n\r\n  then:\r\n  1 * appointmentRepository.findById(69L)\r\n  thrown(AppointmentNotFoundException)\r\n}\r\n```\r\n\r\nError:\r\n```none\r\nExpected exception of type &#39;com.bbc.anotherhospital.exceptions.AppointmentNotFoundException&#39;, but no exception was thrown\r\n\tat org.spockframework.lang.SpecInternals.checkExceptionThrown(SpecInternals.java:84)\r\n\tat org.spockframework.lang.SpecInternals.thrownImpl(SpecInternals.java:71)\r\n\tat com.bbc.anotherhospital.appointment.handlers.FindAppointmentQueryHandlerSpec.should throw AppointmentNotFoundException when appointment do not exist\r\n```\r\n\r\nFirst I think that I have problem in my code or smth.. But application works fine, tested in Postman.\r\n\r\nAnybody have idea why is it behaving this way?\r\n\r\nMy pom:\r\n```xml\r\n&lt;dependency&gt;\r\n  &lt;groupId&gt;org.apache.groovy&lt;/groupId&gt;\r\n  &lt;artifactId&gt;groovy-all&lt;/artifactId&gt;\r\n  &lt;version&gt;4.0.15&lt;/version&gt;\r\n  &lt;type&gt;pom&lt;/type&gt;\r\n&lt;/dependency&gt;\r\n&lt;dependency&gt;\r\n  &lt;groupId&gt;org.spockframework&lt;/groupId&gt;\r\n  &lt;artifactId&gt;spock-core&lt;/artifactId&gt;\r\n  &lt;version&gt;2.4-M1-groovy-4.0&lt;/version&gt;\r\n  &lt;scope&gt;test&lt;/scope&gt;\r\n&lt;/dependency&gt;\r\n```","title":"Why does my test not work when splitting mocking and stubbing?","body":"<p>I struggle with Spock/Groovy testing.\nDon't know why but in WHEN section, I cannot check number of calls and checking the value at once..\nIf I check one of them separatly all works fine!</p>\n<p>This test passed:</p>\n<pre class=\"lang-java prettyprint-override\"><code>def &quot;should throw AppointmentNotFoundException when appointment do not exist&quot; () {\n  given:\n  long nonExistingAppointmentId = 69L\n\n  when:\n  appointmentRepository.findById(nonExistingAppointmentId) &gt;&gt; { throw new AppointmentNotFoundException(&quot;Appointment with id &quot; + nonExistingAppointmentId + &quot; not found&quot;) }\n  findAppointmentQueryHandler.handle(nonExistingAppointmentId)\n\n  then:\n  thrown(AppointmentNotFoundException)\n}\n</code></pre>\n<p>Also this one passed without any problem:</p>\n<pre class=\"lang-java prettyprint-override\"><code>def &quot;should throw AppointmentNotFoundException when appointment do not exist&quot; () {\n  given:\n  long nonExistingAppointmentId = 69L\n\n  when:\n  appointmentRepository.findById(nonExistingAppointmentId) &gt;&gt; { throw new AppointmentNotFoundException(&quot;Appointment with id &quot; + nonExistingAppointmentId + &quot; not found&quot;) }\n  findAppointmentQueryHandler.handle(nonExistingAppointmentId)\n\n  then:\n  1 * appointmentRepository.findById(69L)\n}\n</code></pre>\n<p>But if I try to make 1 test to check all of it then I have error</p>\n<pre class=\"lang-java prettyprint-override\"><code>def &quot;should throw AppointmentNotFoundException when appointment do not exist&quot; () {\n  given:\n  long nonExistingAppointmentId = 69L\n\n  when:\n  appointmentRepository.findById(nonExistingAppointmentId) &gt;&gt; { throw new AppointmentNotFoundException(&quot;Appointment with id &quot; + nonExistingAppointmentId + &quot; not found&quot;) }\n  findAppointmentQueryHandler.handle(nonExistingAppointmentId)\n\n  then:\n  1 * appointmentRepository.findById(69L)\n  thrown(AppointmentNotFoundException)\n}\n</code></pre>\n<p>Error:</p>\n<pre class=\"lang-none prettyprint-override\"><code>Expected exception of type 'com.bbc.anotherhospital.exceptions.AppointmentNotFoundException', but no exception was thrown\n    at org.spockframework.lang.SpecInternals.checkExceptionThrown(SpecInternals.java:84)\n    at org.spockframework.lang.SpecInternals.thrownImpl(SpecInternals.java:71)\n    at com.bbc.anotherhospital.appointment.handlers.FindAppointmentQueryHandlerSpec.should throw AppointmentNotFoundException when appointment do not exist\n</code></pre>\n<p>First I think that I have problem in my code or smth.. But application works fine, tested in Postman.</p>\n<p>Anybody have idea why is it behaving this way?</p>\n<p>My pom:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;dependency&gt;\n  &lt;groupId&gt;org.apache.groovy&lt;/groupId&gt;\n  &lt;artifactId&gt;groovy-all&lt;/artifactId&gt;\n  &lt;version&gt;4.0.15&lt;/version&gt;\n  &lt;type&gt;pom&lt;/type&gt;\n&lt;/dependency&gt;\n&lt;dependency&gt;\n  &lt;groupId&gt;org.spockframework&lt;/groupId&gt;\n  &lt;artifactId&gt;spock-core&lt;/artifactId&gt;\n  &lt;version&gt;2.4-M1-groovy-4.0&lt;/version&gt;\n  &lt;scope&gt;test&lt;/scope&gt;\n&lt;/dependency&gt;\n</code></pre>\n"},{"tags":["java","visualvm","jvisualvm"],"comments":[{"owner":{"account_id":103389,"reputation":6773,"user_id":276950,"display_name":"Tomas Hurka"},"score":0,"creation_date":1578329225,"post_id":59538974,"comment_id":105395047,"body_markdown":"I have some question about your Java setup. Is there a full JRE installation in `c:\\apps\\java\\java8\\jre`? What is in `c:\\apps\\java8` directory? Is there or was there JDK installed?","body":"I have some question about your Java setup. Is there a full JRE installation in <code>c:\\apps\\java\\java8\\jre</code>? What is in <code>c:\\apps\\java8</code> directory? Is there or was there JDK installed?"},{"owner":{"account_id":7559454,"reputation":213,"user_id":5737611,"display_name":"Ganesh C"},"score":0,"creation_date":1578493363,"post_id":59538974,"comment_id":105456592,"body_markdown":"C:\\apps\\java\\java8  is JDK installation.  I don&#39;t have anything in &quot;c:\\apps\\java8&quot;.","body":"C:\\apps\\java\\java8  is JDK installation.  I don&#39;t have anything in &quot;c:\\apps\\java8&quot;."},{"owner":{"account_id":103389,"reputation":6773,"user_id":276950,"display_name":"Tomas Hurka"},"score":0,"creation_date":1578557680,"post_id":59538974,"comment_id":105479138,"body_markdown":"Ok, please start jvisualvm from WIndows command prompt with `jvisualvm.exe --trace &lt;path_to_log_file&gt;` and publish the content of the log file.","body":"Ok, please start jvisualvm from WIndows command prompt with <code>jvisualvm.exe --trace &lt;path_to_log_file&gt;</code> and publish the content of the log file."},{"owner":{"account_id":5563676,"reputation":396,"user_id":4411755,"display_name":"Tarun Chopra"},"score":0,"creation_date":1626443522,"post_id":59538974,"comment_id":120901694,"body_markdown":"Try updating jdk path in visualvm.conf in &quot;etc&quot; folder.","body":"Try updating jdk path in visualvm.conf in &quot;etc&quot; folder."}],"answers":[{"tags":[],"owner":{"account_id":5563676,"reputation":396,"user_id":4411755,"display_name":"Tarun Chopra"},"down_vote_count":0,"up_vote_count":30,"is_accepted":false,"score":30,"last_activity_date":1678874979,"creation_date":1626443552,"answer_id":68410231,"question_id":59538974,"body_markdown":"Try updating JDK path in `visualvm.conf` in the `etc` folder.\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/vSOpG.png","title":"jvisualvm can not locate Java installation","body":"<p>Try updating JDK path in <code>visualvm.conf</code> in the <code>etc</code> folder.</p>\n<p><a href=\"https://i.stack.imgur.com/vSOpG.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/vSOpG.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":[],"owner":{"account_id":2296250,"reputation":460,"user_id":2017611,"display_name":"Nicolas Dupouy"},"down_vote_count":0,"up_vote_count":9,"is_accepted":false,"score":9,"last_activity_date":1646221375,"creation_date":1646221375,"answer_id":71322111,"question_id":59538974,"body_markdown":"As explain [here][1] and by Tarun Chopra.\r\n\r\nYou have 2 options:\r\n\r\n 1. Launch `bin/visualvm.exe` at the command line with the `--jdkhome` parameter and your JDK location\r\n 2. Update the `visualvm_jdkhome` variable in the file `etc/visualvm.conf` of your VisualVM directory.\r\n\r\n\r\n  [1]: https://github.com/oracle/visualvm/issues/112","title":"jvisualvm can not locate Java installation","body":"<p>As explain <a href=\"https://github.com/oracle/visualvm/issues/112\" rel=\"noreferrer\">here</a> and by Tarun Chopra.</p>\n<p>You have 2 options:</p>\n<ol>\n<li>Launch <code>bin/visualvm.exe</code> at the command line with the <code>--jdkhome</code> parameter and your JDK location</li>\n<li>Update the <code>visualvm_jdkhome</code> variable in the file <code>etc/visualvm.conf</code> of your VisualVM directory.</li>\n</ol>\n"},{"tags":[],"owner":{"account_id":29235170,"reputation":1,"user_id":22397949,"display_name":"Mohamed AKROUH"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1699954326,"creation_date":1699954326,"answer_id":77479494,"question_id":59538974,"body_markdown":"Open C:...\\visualvm_217\\etc\\visualvm.conf\r\n\r\nuncomment line 72\r\n\r\n#visualvm_jdkhome=&quot;/path/to/jdk&quot;\r\n\r\nand specify you jdk location\r\n \r\nvisualvm_jdkhome=&quot;C:\\Program Files\\Java\\jdk-17.0.2\\&quot;\r\n\r\ngood luck \r\n","title":"jvisualvm can not locate Java installation","body":"<p>Open C:...\\visualvm_217\\etc\\visualvm.conf</p>\n<p>uncomment line 72</p>\n<p>#visualvm_jdkhome=&quot;/path/to/jdk&quot;</p>\n<p>and specify you jdk location</p>\n<p>visualvm_jdkhome=&quot;C:\\Program Files\\Java\\jdk-17.0.2&quot;</p>\n<p>good luck</p>\n"}],"owner":{"account_id":7559454,"reputation":213,"user_id":5737611,"display_name":"Ganesh C"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":15650,"favorite_count":0,"down_vote_count":0,"up_vote_count":13,"answer_count":3,"score":13,"last_activity_date":1699954326,"creation_date":1577759863,"question_id":59538974,"body_markdown":"I am facing  following issues while running jvisualvm -\r\n\r\nJava Related environment variables set on machine\r\n\r\n![java related environment variables][1]\r\n\r\nFollowing are `PATH` variable details, there is no path mentioned as `C:\\apps\\Java8`\r\n\r\n    Path=C:\\ProgramData\\Oracle\\Java\\javapath;\r\n    C:\\windows\\system32;\r\n    C:\\windows;\r\n    C:\\windows\\System32\\Wbem;\r\n    C:\\windows\\System32\\WindowsPowerShell\\v1.0\\;\r\n    C:\\windows\\System32\\OpenSSH\\;\r\n    C:\\Program Files\\Microsoft\\Web Platform Installer\\;\r\n    C:\\Program Files (x86)\\Microsoft ASP.NET\\ASP.NET Web Pages\\v1.0\\;\r\n    C:\\Program Files\\Microsoft SQL Server\\110\\Tools\\Binn\\;\r\n    C:\\Program Files\\Microsoft DNX\\Dnvm\\;\r\n    C:\\Program Files\\Microsoft SQL Server\\120\\Tools\\Binn\\;\r\n    D:\\apps\\gradle-5.5.1-bin\\bin;\r\n    D:\\apps\\apache-ant-1.10.5\\bin;\r\n    C:\\apps\\Java\\Java8\\bin;\r\n    C:\\Program Files\\nodejs\\;\r\n\r\n\r\nWhen I am running jvisualvm.exe, I am getting following error, from the error it seems that jvisualvm is looking into some config file to locate JDK home path:\r\n\r\n\r\n[![enter image description here][2]][2]\r\n\r\n\r\n\r\n\r\nOn this message I click &quot;Yes&quot; button then getting following error which says, you are running VisualVM is running from JRE -\r\n\r\n\r\n[![enter image description here][3]][3]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/K1yos.png\r\n  [2]: https://i.stack.imgur.com/LB0mC.png\r\n  [3]: https://i.stack.imgur.com/ChObQ.png\r\n","title":"jvisualvm can not locate Java installation","body":"<p>I am facing  following issues while running jvisualvm -</p>\n<p>Java Related environment variables set on machine</p>\n<p><img src=\"https://i.stack.imgur.com/K1yos.png\" alt=\"java related environment variables\" /></p>\n<p>Following are <code>PATH</code> variable details, there is no path mentioned as <code>C:\\apps\\Java8</code></p>\n<pre><code>Path=C:\\ProgramData\\Oracle\\Java\\javapath;\nC:\\windows\\system32;\nC:\\windows;\nC:\\windows\\System32\\Wbem;\nC:\\windows\\System32\\WindowsPowerShell\\v1.0\\;\nC:\\windows\\System32\\OpenSSH\\;\nC:\\Program Files\\Microsoft\\Web Platform Installer\\;\nC:\\Program Files (x86)\\Microsoft ASP.NET\\ASP.NET Web Pages\\v1.0\\;\nC:\\Program Files\\Microsoft SQL Server\\110\\Tools\\Binn\\;\nC:\\Program Files\\Microsoft DNX\\Dnvm\\;\nC:\\Program Files\\Microsoft SQL Server\\120\\Tools\\Binn\\;\nD:\\apps\\gradle-5.5.1-bin\\bin;\nD:\\apps\\apache-ant-1.10.5\\bin;\nC:\\apps\\Java\\Java8\\bin;\nC:\\Program Files\\nodejs\\;\n</code></pre>\n<p>When I am running jvisualvm.exe, I am getting following error, from the error it seems that jvisualvm is looking into some config file to locate JDK home path:</p>\n<p><a href=\"https://i.stack.imgur.com/LB0mC.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/LB0mC.png\" alt=\"enter image description here\" /></a></p>\n<p>On this message I click &quot;Yes&quot; button then getting following error which says, you are running VisualVM is running from JRE -</p>\n<p><a href=\"https://i.stack.imgur.com/ChObQ.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/ChObQ.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":["java","multithreading","servlets","session-variables","instance-variables"],"answers":[{"tags":[],"owner":{"account_id":50535,"reputation":35297,"user_id":150771,"accept_rate":83,"display_name":"Chris Thompson"},"down_vote_count":0,"up_vote_count":42,"is_accepted":false,"score":42,"last_activity_date":1381989575,"creation_date":1277338859,"answer_id":3106467,"question_id":3106452,"body_markdown":"Session in Java servlets is the same as session in other languages such as PHP.  It is unique to the user.  The server can keep track of it in different ways such as cookies, url rewriting etc.  This [Java doc][1] article explains it in the context of Java servlets and indicates that exactly how session is maintained is an implementation detail left to the designers of the server.  The specification only stipulates that it must be maintained as unique to a user across multiple connections to the server.  Check out [this article from Oracle][2] for more information about both of your questions.\r\n\r\n\r\n**Edit** There is an excellent tutorial [here][3] on how to work with session inside of servlets. And [here][4] is a chapter from Sun about Java Servlets, what they are and how to use them.  Between those two articles, you should be able to answer all of your questions.  \r\n\r\n\r\n  [1]: http://java.sun.com/products/servlet/2.2/javadoc/javax/servlet/http/HttpSession.html\r\n  [2]: http://download.oracle.com/docs/cd/A97336_01/buslog.102/a83726/tecbkgn2.htm\r\n  [3]: http://www.apl.jhu.edu/~hall/java/Servlet-Tutorial/Servlet-Tutorial-Session-Tracking.html\r\n  [4]: http://docs.oracle.com/javaee/5/tutorial/doc/bnafd.html","title":"How do servlets work? Instantiation, sessions, shared variables and multithreading","body":"<p>Session in Java servlets is the same as session in other languages such as PHP.  It is unique to the user.  The server can keep track of it in different ways such as cookies, url rewriting etc.  This <a href=\"http://java.sun.com/products/servlet/2.2/javadoc/javax/servlet/http/HttpSession.html\" rel=\"noreferrer\">Java doc</a> article explains it in the context of Java servlets and indicates that exactly how session is maintained is an implementation detail left to the designers of the server.  The specification only stipulates that it must be maintained as unique to a user across multiple connections to the server.  Check out <a href=\"http://download.oracle.com/docs/cd/A97336_01/buslog.102/a83726/tecbkgn2.htm\" rel=\"noreferrer\">this article from Oracle</a> for more information about both of your questions.</p>\n\n<p><strong>Edit</strong> There is an excellent tutorial <a href=\"http://www.apl.jhu.edu/~hall/java/Servlet-Tutorial/Servlet-Tutorial-Session-Tracking.html\" rel=\"noreferrer\">here</a> on how to work with session inside of servlets. And <a href=\"http://docs.oracle.com/javaee/5/tutorial/doc/bnafd.html\" rel=\"noreferrer\">here</a> is a chapter from Sun about Java Servlets, what they are and how to use them.  Between those two articles, you should be able to answer all of your questions.  </p>\n"},{"tags":[],"owner":{"account_id":23706,"reputation":10697,"user_id":59604,"display_name":"Lauri Lehtinen"},"down_vote_count":0,"up_vote_count":21,"is_accepted":false,"score":21,"last_activity_date":1277339266,"creation_date":1277339266,"answer_id":3106495,"question_id":3106452,"body_markdown":"**Sessions** - what Chris Thompson said.\r\n\r\n**Instantiation** - a servlet is instantiated when the container receives the first request mapped to the servlet (unless the servlet is configured to load on startup with the `&lt;load-on-startup&gt;` element in `web.xml`). The same instance is used to serve subsequent requests.","title":"How do servlets work? Instantiation, sessions, shared variables and multithreading","body":"<p><strong>Sessions</strong> - what Chris Thompson said.</p>\n\n<p><strong>Instantiation</strong> - a servlet is instantiated when the container receives the first request mapped to the servlet (unless the servlet is configured to load on startup with the <code>&lt;load-on-startup&gt;</code> element in <code>web.xml</code>). The same instance is used to serve subsequent requests.</p>\n"},{"tags":[],"owner":{"account_id":52822,"reputation":1088960,"user_id":157882,"accept_rate":93,"display_name":"BalusC"},"down_vote_count":1,"up_vote_count":1948,"is_accepted":true,"score":1947,"last_activity_date":1699954140,"creation_date":1277347304,"answer_id":3106909,"question_id":3106452,"body_markdown":"## `ServletContext`\r\n\r\nWhen the servlet container (like [Apache Tomcat][1]) starts up, it will deploy and load all its web applications. When a web application is loaded, the servlet container creates an instance of [`ServletContext`][2] once and keeps it in the server&#39;s memory. The web app&#39;s `web.xml` and all of included `web-fragment.xml` files is parsed, and each `&lt;servlet&gt;`, `&lt;filter&gt;` and `&lt;listener&gt;` found (or each class annotated with `@WebServlet`, `@WebFilter` and `@WebListener` respectively) will be instantiated once and be kept in the server&#39;s memory as well, registred via the `ServletContext`. For each instantiated filter, its `init()` method is invoked with an instance of [`FilterConfig`][3] as argument which in turn contains the involved `ServletContext`.\r\n\r\nWhen a `Servlet` has a `&lt;servlet&gt;&lt;load-on-startup&gt;` or `@WebServlet(loadOnStartup)` value of `0` or greater, then its `init()` method is also invoked during startup. Those servlets are initialized in the same order specified by that value. If the same value is specified for more than one servlet, then each of those servlets is loaded in the same order as they appear in the `web.xml`, `web-fragment.xml`, or `@WebServlet` classloading. In the event the &quot;load-on-startup&quot; value is absent or negative, the `init()` method will be invoked whenever the [HTTP request][4] hits that servlet for the very first time. There are two `init()` methods, one taking an instance of [`ServletConfig`][5] as argument which in turn contains the involved `ServletContext`, and another which does not take any arguments but the `ServletContext` is available by inherited `getServletContext()` method.\r\n\r\nWhen the servlet container is finished with all of the above described initialization steps, then the [`ServletContextListener#contextInitialized()`][6] will be invoked with a [`ServletContextEvent`][7] argument which in turn contains the involved `ServletContext`. This will allow the developer the opportunity to programmatically register yet another `Servlet`, `Filter` or `Listener`.\r\n\r\nWhen the servlet container shuts down, it unloads all web applications, invokes the `destroy()` method of all its initialized servlets and filters, and all `Servlet`, `Filter` and `Listener` instances registered via the `ServletContext` are trashed. Finally the [`ServletContextListener#contextDestroyed()`][8] will be invoked and the `ServletContext` itself will be trashed.\r\n\r\n## `HttpServletRequest` and `HttpServletResponse`\r\n\r\nThe servlet container is attached to a web server that listens for HTTP requests on a certain port number (port 8080 is usually used during development and port 80 in production). When a client (e.g. user with a web browser, or [programmatically using `URLConnection`][9]) sends an HTTP request, the servlet container creates new instances of [`HttpServletRequest`][10] and [`HttpServletResponse`][11] and passes them through any defined `Filter` in the chain and, eventually, the `Servlet` instance. \r\n\r\nIn the case of [filters][12], the `doFilter()` method is invoked. When the servlet container&#39;s code calls `chain.doFilter(request, response)`, the request and response continue on to the next filter, or hit the servlet if there are no remaining filters.\r\n\r\nIn the case of [servlets][13], the `service()` method is invoked. By default, this method determines which one of the `doXxx()` methods to invoke based off of  `request.getMethod()`. If the determined method is absent from the servlet, then an HTTP 405 error is returned in the response. \r\n\r\nThe request object provides access to all of the information about the HTTP request, such as its [URL][14], [headers][15], [query string][16] and body. The response object provides the ability to control and send the HTTP response the way you want by, for instance, allowing you to set the headers and the body (usually with generated HTML content from a JSP file). When the HTTP response is committed and finished, both the request and response objects are recycled and made available for reuse.\r\n\r\n## `HttpSession`\r\n\r\nWhen a client visits the webapp for the first time and/or the [`HttpSession`][17] is obtained for the first time via `request.getSession()`, the servlet container creates a new `HttpSession` object, generates a long and unique ID (which you can get by `session.getId()`), and stores it in the server&#39;s memory. The servlet container also sets a [`Cookie`][18] in the `Set-Cookie` header of the HTTP response with `JSESSIONID` as its name and the unique session ID as its value. \r\n\r\nAs per the [HTTP cookie specification][19] (a contract any decent web browser and web server must adhere to), the client (the web browser) is required to send this [cookie][20] back in subsequent requests in the `Cookie` header for as long as the cookie is valid (i.e. the unique ID must refer to an unexpired session and the domain and path are correct). Using your browser&#39;s built-in HTTP traffic monitor, you can verify that the cookie is valid (press F12 in Chrome / Edge / Firefox 23+ / IE9+, and check the *Net/Network* tab). The servlet container will check the `Cookie` header of every incoming HTTP request for the presence of the cookie with the name `JSESSIONID` and use its value (the session ID) to get the associated `HttpSession` from server&#39;s memory.\r\n\r\nThe `HttpSession` stays alive until it has been idle (i.e. not used in a request) for more than the timeout value specified in `&lt;session-timeout&gt;`, a setting in `web.xml`. The default timeout value depends on the servlet container and is usually 30 minutes. So, when the client doesn&#39;t visit the web app for longer than the time specified, the servlet container trashes the [session][22]. Every subsequent request, even with the cookie specified, will not have access to the same session anymore; the servlet container will create a new session.\r\n\r\nOn the client side, the session cookie remains as long as the browser instance is running (normally). Unless the browser is configured to [restore the last browser session][23], when the client closes the browser instance (all tabs/windows), the session is lost on the client&#39;s side. In a new browser instance, the cookie associated with the session wouldn&#39;t exist, so it would no longer be sent. This causes an entirely new `HttpSession` to be created, with an entirely new session cookie being used.\r\n\r\n## In a nutshell\r\n\r\n- The `ServletContext` lives for as long as the web app lives. It is shared among *all* requests in *all* sessions.\r\n- The `HttpSession` lives for as long as the client is interacting with the web app with the same browser instance, and the session hasn&#39;t timed out at the server side. It is shared among *all* requests in the *same* session.\r\n- The `HttpServletRequest` and `HttpServletResponse` live from the time the servlet receives an HTTP request from the client, until the complete response (the web page) has arrived. It is *not* shared elsewhere.\r\n- All `Servlet`, `Filter` and `Listener` instances live as long as the web app lives. They are shared among *all* requests in *all* sessions.\r\n- Any `attribute` that is defined in `ServletContext`, `HttpServletRequest` and `HttpSession` will live as long as the object in question lives. The object itself represents the &quot;scope&quot; in bean management frameworks such as JSF, CDI, Spring, etc. Those frameworks store their scoped beans as an `attribute` of its closest matching scope.\r\n\r\n\r\n## Thread Safety\r\n\r\nThat said, your major concern is possibly [*thread safety*][24]. You should now know that servlets and filters are shared among all requests. That&#39;s the nice thing about Java, it&#39;s multithreaded and different threads (read: HTTP requests) can make use of the same instance. It would otherwise be too expensive to recreate, `init()` and `destroy()` them for every single request.\r\n\r\nYou should also realize that you should **never** assign any request or session scoped data as an *instance* variable of a servlet or filter. It will be shared among all other requests in other sessions. That&#39;s **not** thread-safe! The below example illustrates this:\r\n\r\n    public class ExampleServlet extends HttpServlet {\r\n    \r\n        private Object thisIsNOTThreadSafe;\r\n    \r\n        protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {\r\n            Object thisIsThreadSafe;\r\n    \r\n            thisIsNOTThreadSafe = request.getParameter(&quot;foo&quot;); // BAD!! Shared among all requests!\r\n            thisIsThreadSafe = request.getParameter(&quot;foo&quot;); // OK, this is thread safe.\r\n        } \r\n    }\r\n\r\n### See also:\r\n\r\n- https://stackoverflow.com/questions/2095397/what-is-the-difference-between-jsf-servlet-and-jsp\r\n- https://stackoverflow.com/questions/1700390/best-option-for-session-management-in-java\r\n- https://stackoverflow.com/questions/4140448/difference-between-and-in-servlet-mapping-url-pattern\r\n- https://stackoverflow.com/questions/2349633/doget-and-dopost-in-servlets\r\n- https://stackoverflow.com/questions/8011138/servlet-seems-to-handle-multiple-concurrent-requests-synchronously/\r\n- https://stackoverflow.com/questions/9555842/why-servlets-are-not-thread-safe/\r\n- https://stackoverflow.com/questions/35837285/different-ways-to-get-servlet-context/\r\n\r\n\r\n  [1]: https://tomcat.apache.org\r\n  [2]: https://jakarta.ee/specifications/platform/10/apidocs/jakarta/servlet/servletcontext\r\n  [3]: https://jakarta.ee/specifications/platform/10/apidocs/jakarta/servlet/filterconfig\r\n  [4]: https://en.wikipedia.org/wiki/Hypertext_Transfer_Protocol#Request_message\r\n  [5]: https://jakarta.ee/specifications/platform/10/apidocs/jakarta/servlet/servletconfig\r\n  [6]: https://jakarta.ee/specifications/platform/10/apidocs/jakarta/servlet/servletcontextlistener#contextInitialized(jakarta.servlet.ServletContextEvent)\r\n  [7]: https://jakarta.ee/specifications/platform/10/apidocs/jakarta/servlet/servletcontextevent\r\n  [8]: https://jakarta.ee/specifications/platform/10/apidocs/jakarta/servlet/servletcontextlistener#contextDestroyed(jakarta.servlet.ServletContextEvent)\r\n  [9]: https://stackoverflow.com/questions/2793150/how-to-use-java-net-urlconnection-to-fire-and-handle-http-requests\r\n  [10]: https://jakarta.ee/specifications/platform/10/apidocs/jakarta/servlet/http/httpservletrequest\r\n  [11]: https://jakarta.ee/specifications/platform/10/apidocs/jakarta/servlet/http/httpservletresponse\r\n  [12]: https://stackoverflow.com/tags/servlet-filters/info\r\n  [13]: https://stackoverflow.com/tags/servlets/info\r\n  [14]: https://en.wikipedia.org/wiki/URL\r\n  [15]: https://en.wikipedia.org/wiki/List_of_HTTP_header_fields\r\n  [16]: https://en.wikipedia.org/wiki/Query_string\r\n  [17]: https://jakarta.ee/specifications/platform/10/apidocs/jakarta/servlet/http/httpsession\r\n  [18]: https://jakarta.ee/specifications/platform/10/apidocs/jakarta/servlet/http/cookie\r\n  [19]: http://www.faqs.org/rfcs/rfc2965.html\r\n  [20]: https://en.wikipedia.org/wiki/HTTP_cookie\r\n  [21]: https://github.com/apache/tomcat/blob/main/conf/web.xml#L607\r\n  [22]: https://en.wikipedia.org/wiki/Hypertext_Transfer_Protocol#HTTP_session\r\n  [23]: https://stackoverflow.com/a/36421888/5405434\r\n  [24]: https://en.wikipedia.org/wiki/Thread_safety","title":"How do servlets work? Instantiation, sessions, shared variables and multithreading","body":"<h2><code>ServletContext</code></h2>\n<p>When the servlet container (like <a href=\"https://tomcat.apache.org\" rel=\"nofollow noreferrer\">Apache Tomcat</a>) starts up, it will deploy and load all its web applications. When a web application is loaded, the servlet container creates an instance of <a href=\"https://jakarta.ee/specifications/platform/10/apidocs/jakarta/servlet/servletcontext\" rel=\"nofollow noreferrer\"><code>ServletContext</code></a> once and keeps it in the server's memory. The web app's <code>web.xml</code> and all of included <code>web-fragment.xml</code> files is parsed, and each <code>&lt;servlet&gt;</code>, <code>&lt;filter&gt;</code> and <code>&lt;listener&gt;</code> found (or each class annotated with <code>@WebServlet</code>, <code>@WebFilter</code> and <code>@WebListener</code> respectively) will be instantiated once and be kept in the server's memory as well, registred via the <code>ServletContext</code>. For each instantiated filter, its <code>init()</code> method is invoked with an instance of <a href=\"https://jakarta.ee/specifications/platform/10/apidocs/jakarta/servlet/filterconfig\" rel=\"nofollow noreferrer\"><code>FilterConfig</code></a> as argument which in turn contains the involved <code>ServletContext</code>.</p>\n<p>When a <code>Servlet</code> has a <code>&lt;servlet&gt;&lt;load-on-startup&gt;</code> or <code>@WebServlet(loadOnStartup)</code> value of <code>0</code> or greater, then its <code>init()</code> method is also invoked during startup. Those servlets are initialized in the same order specified by that value. If the same value is specified for more than one servlet, then each of those servlets is loaded in the same order as they appear in the <code>web.xml</code>, <code>web-fragment.xml</code>, or <code>@WebServlet</code> classloading. In the event the &quot;load-on-startup&quot; value is absent or negative, the <code>init()</code> method will be invoked whenever the <a href=\"https://en.wikipedia.org/wiki/Hypertext_Transfer_Protocol#Request_message\" rel=\"nofollow noreferrer\">HTTP request</a> hits that servlet for the very first time. There are two <code>init()</code> methods, one taking an instance of <a href=\"https://jakarta.ee/specifications/platform/10/apidocs/jakarta/servlet/servletconfig\" rel=\"nofollow noreferrer\"><code>ServletConfig</code></a> as argument which in turn contains the involved <code>ServletContext</code>, and another which does not take any arguments but the <code>ServletContext</code> is available by inherited <code>getServletContext()</code> method.</p>\n<p>When the servlet container is finished with all of the above described initialization steps, then the <a href=\"https://jakarta.ee/specifications/platform/10/apidocs/jakarta/servlet/servletcontextlistener#contextInitialized(jakarta.servlet.ServletContextEvent)\" rel=\"nofollow noreferrer\"><code>ServletContextListener#contextInitialized()</code></a> will be invoked with a <a href=\"https://jakarta.ee/specifications/platform/10/apidocs/jakarta/servlet/servletcontextevent\" rel=\"nofollow noreferrer\"><code>ServletContextEvent</code></a> argument which in turn contains the involved <code>ServletContext</code>. This will allow the developer the opportunity to programmatically register yet another <code>Servlet</code>, <code>Filter</code> or <code>Listener</code>.</p>\n<p>When the servlet container shuts down, it unloads all web applications, invokes the <code>destroy()</code> method of all its initialized servlets and filters, and all <code>Servlet</code>, <code>Filter</code> and <code>Listener</code> instances registered via the <code>ServletContext</code> are trashed. Finally the <a href=\"https://jakarta.ee/specifications/platform/10/apidocs/jakarta/servlet/servletcontextlistener#contextDestroyed(jakarta.servlet.ServletContextEvent)\" rel=\"nofollow noreferrer\"><code>ServletContextListener#contextDestroyed()</code></a> will be invoked and the <code>ServletContext</code> itself will be trashed.</p>\n<h2><code>HttpServletRequest</code> and <code>HttpServletResponse</code></h2>\n<p>The servlet container is attached to a web server that listens for HTTP requests on a certain port number (port 8080 is usually used during development and port 80 in production). When a client (e.g. user with a web browser, or <a href=\"https://stackoverflow.com/questions/2793150/how-to-use-java-net-urlconnection-to-fire-and-handle-http-requests\">programmatically using <code>URLConnection</code></a>) sends an HTTP request, the servlet container creates new instances of <a href=\"https://jakarta.ee/specifications/platform/10/apidocs/jakarta/servlet/http/httpservletrequest\" rel=\"nofollow noreferrer\"><code>HttpServletRequest</code></a> and <a href=\"https://jakarta.ee/specifications/platform/10/apidocs/jakarta/servlet/http/httpservletresponse\" rel=\"nofollow noreferrer\"><code>HttpServletResponse</code></a> and passes them through any defined <code>Filter</code> in the chain and, eventually, the <code>Servlet</code> instance.</p>\n<p>In the case of <a href=\"https://stackoverflow.com/tags/servlet-filters/info\">filters</a>, the <code>doFilter()</code> method is invoked. When the servlet container's code calls <code>chain.doFilter(request, response)</code>, the request and response continue on to the next filter, or hit the servlet if there are no remaining filters.</p>\n<p>In the case of <a href=\"https://stackoverflow.com/tags/servlets/info\">servlets</a>, the <code>service()</code> method is invoked. By default, this method determines which one of the <code>doXxx()</code> methods to invoke based off of  <code>request.getMethod()</code>. If the determined method is absent from the servlet, then an HTTP 405 error is returned in the response.</p>\n<p>The request object provides access to all of the information about the HTTP request, such as its <a href=\"https://en.wikipedia.org/wiki/URL\" rel=\"nofollow noreferrer\">URL</a>, <a href=\"https://en.wikipedia.org/wiki/List_of_HTTP_header_fields\" rel=\"nofollow noreferrer\">headers</a>, <a href=\"https://en.wikipedia.org/wiki/Query_string\" rel=\"nofollow noreferrer\">query string</a> and body. The response object provides the ability to control and send the HTTP response the way you want by, for instance, allowing you to set the headers and the body (usually with generated HTML content from a JSP file). When the HTTP response is committed and finished, both the request and response objects are recycled and made available for reuse.</p>\n<h2><code>HttpSession</code></h2>\n<p>When a client visits the webapp for the first time and/or the <a href=\"https://jakarta.ee/specifications/platform/10/apidocs/jakarta/servlet/http/httpsession\" rel=\"nofollow noreferrer\"><code>HttpSession</code></a> is obtained for the first time via <code>request.getSession()</code>, the servlet container creates a new <code>HttpSession</code> object, generates a long and unique ID (which you can get by <code>session.getId()</code>), and stores it in the server's memory. The servlet container also sets a <a href=\"https://jakarta.ee/specifications/platform/10/apidocs/jakarta/servlet/http/cookie\" rel=\"nofollow noreferrer\"><code>Cookie</code></a> in the <code>Set-Cookie</code> header of the HTTP response with <code>JSESSIONID</code> as its name and the unique session ID as its value.</p>\n<p>As per the <a href=\"http://www.faqs.org/rfcs/rfc2965.html\" rel=\"nofollow noreferrer\">HTTP cookie specification</a> (a contract any decent web browser and web server must adhere to), the client (the web browser) is required to send this <a href=\"https://en.wikipedia.org/wiki/HTTP_cookie\" rel=\"nofollow noreferrer\">cookie</a> back in subsequent requests in the <code>Cookie</code> header for as long as the cookie is valid (i.e. the unique ID must refer to an unexpired session and the domain and path are correct). Using your browser's built-in HTTP traffic monitor, you can verify that the cookie is valid (press F12 in Chrome / Edge / Firefox 23+ / IE9+, and check the <em>Net/Network</em> tab). The servlet container will check the <code>Cookie</code> header of every incoming HTTP request for the presence of the cookie with the name <code>JSESSIONID</code> and use its value (the session ID) to get the associated <code>HttpSession</code> from server's memory.</p>\n<p>The <code>HttpSession</code> stays alive until it has been idle (i.e. not used in a request) for more than the timeout value specified in <code>&lt;session-timeout&gt;</code>, a setting in <code>web.xml</code>. The default timeout value depends on the servlet container and is usually 30 minutes. So, when the client doesn't visit the web app for longer than the time specified, the servlet container trashes the <a href=\"https://en.wikipedia.org/wiki/Hypertext_Transfer_Protocol#HTTP_session\" rel=\"nofollow noreferrer\">session</a>. Every subsequent request, even with the cookie specified, will not have access to the same session anymore; the servlet container will create a new session.</p>\n<p>On the client side, the session cookie remains as long as the browser instance is running (normally). Unless the browser is configured to <a href=\"https://stackoverflow.com/a/36421888/5405434\">restore the last browser session</a>, when the client closes the browser instance (all tabs/windows), the session is lost on the client's side. In a new browser instance, the cookie associated with the session wouldn't exist, so it would no longer be sent. This causes an entirely new <code>HttpSession</code> to be created, with an entirely new session cookie being used.</p>\n<h2>In a nutshell</h2>\n<ul>\n<li>The <code>ServletContext</code> lives for as long as the web app lives. It is shared among <em>all</em> requests in <em>all</em> sessions.</li>\n<li>The <code>HttpSession</code> lives for as long as the client is interacting with the web app with the same browser instance, and the session hasn't timed out at the server side. It is shared among <em>all</em> requests in the <em>same</em> session.</li>\n<li>The <code>HttpServletRequest</code> and <code>HttpServletResponse</code> live from the time the servlet receives an HTTP request from the client, until the complete response (the web page) has arrived. It is <em>not</em> shared elsewhere.</li>\n<li>All <code>Servlet</code>, <code>Filter</code> and <code>Listener</code> instances live as long as the web app lives. They are shared among <em>all</em> requests in <em>all</em> sessions.</li>\n<li>Any <code>attribute</code> that is defined in <code>ServletContext</code>, <code>HttpServletRequest</code> and <code>HttpSession</code> will live as long as the object in question lives. The object itself represents the &quot;scope&quot; in bean management frameworks such as JSF, CDI, Spring, etc. Those frameworks store their scoped beans as an <code>attribute</code> of its closest matching scope.</li>\n</ul>\n<h2>Thread Safety</h2>\n<p>That said, your major concern is possibly <a href=\"https://en.wikipedia.org/wiki/Thread_safety\" rel=\"nofollow noreferrer\"><em>thread safety</em></a>. You should now know that servlets and filters are shared among all requests. That's the nice thing about Java, it's multithreaded and different threads (read: HTTP requests) can make use of the same instance. It would otherwise be too expensive to recreate, <code>init()</code> and <code>destroy()</code> them for every single request.</p>\n<p>You should also realize that you should <strong>never</strong> assign any request or session scoped data as an <em>instance</em> variable of a servlet or filter. It will be shared among all other requests in other sessions. That's <strong>not</strong> thread-safe! The below example illustrates this:</p>\n<pre><code>public class ExampleServlet extends HttpServlet {\n\n    private Object thisIsNOTThreadSafe;\n\n    protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {\n        Object thisIsThreadSafe;\n\n        thisIsNOTThreadSafe = request.getParameter(&quot;foo&quot;); // BAD!! Shared among all requests!\n        thisIsThreadSafe = request.getParameter(&quot;foo&quot;); // OK, this is thread safe.\n    } \n}\n</code></pre>\n<h3>See also:</h3>\n<ul>\n<li><a href=\"https://stackoverflow.com/questions/2095397/what-is-the-difference-between-jsf-servlet-and-jsp\">What is the difference between JSF, Servlet and JSP?</a></li>\n<li><a href=\"https://stackoverflow.com/questions/1700390/best-option-for-session-management-in-java\">Best option for Session management in Java</a></li>\n<li><a href=\"https://stackoverflow.com/questions/4140448/difference-between-and-in-servlet-mapping-url-pattern\">Difference between / and /* in servlet mapping url pattern</a></li>\n<li><a href=\"https://stackoverflow.com/questions/2349633/doget-and-dopost-in-servlets\">doGet and doPost in Servlets</a></li>\n<li><a href=\"https://stackoverflow.com/questions/8011138/servlet-seems-to-handle-multiple-concurrent-requests-synchronously/\">Servlet seems to handle multiple concurrent browser requests synchronously</a></li>\n<li><a href=\"https://stackoverflow.com/questions/9555842/why-servlets-are-not-thread-safe/\">Why Servlets are not thread Safe?</a></li>\n<li><a href=\"https://stackoverflow.com/questions/35837285/different-ways-to-get-servlet-context/\">Different ways to get Servlet Context</a></li>\n</ul>\n"},{"tags":[],"owner":{"account_id":463980,"reputation":6162,"user_id":867206,"accept_rate":14,"display_name":"Ajay Takur"},"down_vote_count":1,"up_vote_count":34,"is_accepted":false,"score":33,"last_activity_date":1539775344,"creation_date":1329915258,"answer_id":9395156,"question_id":3106452,"body_markdown":"When the servlet container (like Apache Tomcat) starts up, it will read from the web.xml file (only one per application) if anything goes wrong or shows up an error at container side console, otherwise, it will deploy and load all web applications by using web.xml (so named it as deployment descriptor).\n\nDuring instantiation phase of the servlet, servlet instance is ready but it cannot serve the client request because it is missing with two pieces of information:   \n1: context information  \n2: initial configuration information\n  \nServlet engine creates servletConfig interface object encapsulating the above missing information into it\nservlet engine calls init() of the servlet by supplying servletConfig object references as an argument. Once init() is completely executed servlet is ready to serve the client request. \n\n### Q) In the lifetime of servlet how many times instantiation and initialization happens ??\n\nA)only once (for every client request a new thread is created)\nonly one instance of the servlet serves any number of the client request ie, after serving one client request server does not die. It waits for other client requests ie what CGI (for every client request a new process is created) limitation is overcome with the servlet (internally servlet engine creates the thread).\n\n### Q)How session concept works?\n\nA)whenever getSession() is called on HttpServletRequest object \n\n**Step 1**: request object is evaluated for incoming session ID.\n\n**Step 2**: if ID not available a brand new HttpSession object is created and its corresponding session ID is generated (ie of HashTable) session ID is stored into httpservlet response object and the reference of HttpSession object is returned to the servlet (doGet/doPost). \n\n**Step 3**: if ID available brand new session object is not created session ID is picked up from the request object search is made in the collection of sessions by using session ID as the key.  \n \nOnce the search is successful session ID is stored into HttpServletResponse and the existing session object references are returned to the doGet() or doPost() of UserDefineservlet.\n \n### Note:\n1)when control leaves from servlet code to client don&#39;t forget that session object is being held by servlet container ie, the servlet engine\n\n2)multithreading is left to servlet developers people for implementing ie., handle the multiple requests of client nothing to bother about multithread code \n\n### Inshort form:\n\n\n\n\nA servlet is created when the application starts (it is deployed on the servlet container) or when it is first accessed (depending on the load-on-startup setting)\nwhen the servlet is instantiated, the init() method of the servlet is called\nthen the servlet (its one and only instance) handles all requests (its service() method being called by multiple threads). That&#39;s why it is not advisable to have any synchronization in it, and you should avoid instance variables of the servlet\nwhen the application is undeployed (the servlet container stops), the destroy() method is called.","title":"How do servlets work? Instantiation, sessions, shared variables and multithreading","body":"<p>When the servlet container (like Apache Tomcat) starts up, it will read from the web.xml file (only one per application) if anything goes wrong or shows up an error at container side console, otherwise, it will deploy and load all web applications by using web.xml (so named it as deployment descriptor).</p>\n<p>During instantiation phase of the servlet, servlet instance is ready but it cannot serve the client request because it is missing with two pieces of information:<br />\n1: context information<br />\n2: initial configuration information</p>\n<p>Servlet engine creates servletConfig interface object encapsulating the above missing information into it\nservlet engine calls init() of the servlet by supplying servletConfig object references as an argument. Once init() is completely executed servlet is ready to serve the client request.</p>\n<h3>Q) In the lifetime of servlet how many times instantiation and initialization happens ??</h3>\n<p>A)only once (for every client request a new thread is created)\nonly one instance of the servlet serves any number of the client request ie, after serving one client request server does not die. It waits for other client requests ie what CGI (for every client request a new process is created) limitation is overcome with the servlet (internally servlet engine creates the thread).</p>\n<h3>Q)How session concept works?</h3>\n<p>A)whenever getSession() is called on HttpServletRequest object</p>\n<p><strong>Step 1</strong>: request object is evaluated for incoming session ID.</p>\n<p><strong>Step 2</strong>: if ID not available a brand new HttpSession object is created and its corresponding session ID is generated (ie of HashTable) session ID is stored into httpservlet response object and the reference of HttpSession object is returned to the servlet (doGet/doPost).</p>\n<p><strong>Step 3</strong>: if ID available brand new session object is not created session ID is picked up from the request object search is made in the collection of sessions by using session ID as the key.</p>\n<p>Once the search is successful session ID is stored into HttpServletResponse and the existing session object references are returned to the doGet() or doPost() of UserDefineservlet.</p>\n<h3>Note:</h3>\n<p>1)when control leaves from servlet code to client don't forget that session object is being held by servlet container ie, the servlet engine</p>\n<p>2)multithreading is left to servlet developers people for implementing ie., handle the multiple requests of client nothing to bother about multithread code</p>\n<h3>Inshort form:</h3>\n<p>A servlet is created when the application starts (it is deployed on the servlet container) or when it is first accessed (depending on the load-on-startup setting)\nwhen the servlet is instantiated, the init() method of the servlet is called\nthen the servlet (its one and only instance) handles all requests (its service() method being called by multiple threads). That's why it is not advisable to have any synchronization in it, and you should avoid instance variables of the servlet\nwhen the application is undeployed (the servlet container stops), the destroy() method is called.</p>\n"},{"tags":[],"owner":{"account_id":1688160,"reputation":22605,"user_id":1551022,"accept_rate":89,"display_name":"Jops"},"down_vote_count":0,"up_vote_count":445,"is_accepted":false,"score":445,"last_activity_date":1380124020,"creation_date":1373128705,"answer_id":17504918,"question_id":3106452,"body_markdown":"Sessions\r\n-\r\n![enter image description here][1]\r\n![enter image description here][2]\r\n\r\nIn short: the web server issues a unique identifier to *each visitor* on his *first* visit. The visitor must bring back that ID for him to be recognised next time around. This identifier also allows the server to properly segregate objects owned by one session against that of another.\r\n\r\nServlet Instantiation\r\n-\r\n\r\nIf **load-on-startup** is **false**:\r\n\r\n![enter image description here][3]\r\n![enter image description here][4]\r\n\r\nIf **load-on-startup** is **true**:\r\n\r\n![enter image description here][5]\r\n![enter image description here][6]\r\n\r\nOnce he&#39;s on the service mode and on the groove, the *same* servlet will work on the requests from all other clients. \r\n\r\n![enter image description here][7]\r\n\r\nWhy isn&#39;t it a good idea to have one instance per client? Think about this: Will you hire one pizza guy for every order that came? Do that and you&#39;d be out of business in no time.\r\n\r\nIt comes with a small risk though. Remember: this single guy holds all the order information in his pocket: so if you&#39;re not cautious about [thread safety on servlets](http://tutorials.jenkov.com/java-servlets/servlet-concurrency.html), he may end up giving the wrong order to a certain client.\r\n\r\n\r\n  [1]: http://i.stack.imgur.com/ABDSX.png\r\n  [2]: http://i.stack.imgur.com/IWAF3.png\r\n  [3]: http://i.stack.imgur.com/Jjvcb.png\r\n  [4]: http://i.stack.imgur.com/7Bw3x.png\r\n  [5]: http://i.stack.imgur.com/t33bd.png\r\n  [6]: http://i.stack.imgur.com/e7BB7.png\r\n  [7]: http://i.stack.imgur.com/gqoR4.png","title":"How do servlets work? Instantiation, sessions, shared variables and multithreading","body":"<h2>Sessions</h2>\n\n<p><img src=\"https://i.stack.imgur.com/ABDSX.png\" alt=\"enter image description here\">\n<img src=\"https://i.stack.imgur.com/IWAF3.png\" alt=\"enter image description here\"></p>\n\n<p>In short: the web server issues a unique identifier to <em>each visitor</em> on his <em>first</em> visit. The visitor must bring back that ID for him to be recognised next time around. This identifier also allows the server to properly segregate objects owned by one session against that of another.</p>\n\n<h2>Servlet Instantiation</h2>\n\n<p>If <strong>load-on-startup</strong> is <strong>false</strong>:</p>\n\n<p><img src=\"https://i.stack.imgur.com/Jjvcb.png\" alt=\"enter image description here\">\n<img src=\"https://i.stack.imgur.com/7Bw3x.png\" alt=\"enter image description here\"></p>\n\n<p>If <strong>load-on-startup</strong> is <strong>true</strong>:</p>\n\n<p><img src=\"https://i.stack.imgur.com/t33bd.png\" alt=\"enter image description here\">\n<img src=\"https://i.stack.imgur.com/e7BB7.png\" alt=\"enter image description here\"></p>\n\n<p>Once he's on the service mode and on the groove, the <em>same</em> servlet will work on the requests from all other clients. </p>\n\n<p><img src=\"https://i.stack.imgur.com/gqoR4.png\" alt=\"enter image description here\"></p>\n\n<p>Why isn't it a good idea to have one instance per client? Think about this: Will you hire one pizza guy for every order that came? Do that and you'd be out of business in no time.</p>\n\n<p>It comes with a small risk though. Remember: this single guy holds all the order information in his pocket: so if you're not cautious about <a href=\"http://tutorials.jenkov.com/java-servlets/servlet-concurrency.html\" rel=\"noreferrer\">thread safety on servlets</a>, he may end up giving the wrong order to a certain client.</p>\n"},{"tags":[],"owner":{"account_id":2134002,"reputation":8980,"user_id":1894198,"accept_rate":52,"display_name":"tharindu_DG"},"down_vote_count":0,"up_vote_count":13,"is_accepted":false,"score":13,"last_activity_date":1493194077,"creation_date":1394019717,"answer_id":22196727,"question_id":3106452,"body_markdown":"The Servlet Specification **JSR-315** clearly defines the web container behavior in the service (and doGet, doPost, doPut etc.) methods (2.3.3.1 Multithreading Issues, Page 9):\r\n\r\n\r\n\r\n&gt; A servlet container may send concurrent requests through the service\r\n&gt; method of the servlet. To handle the requests, the Servlet Developer\r\n&gt; must make adequate provisions for concurrent processing with multiple\r\n&gt; threads in the service method.\r\n&gt; \r\n&gt; Although it is not recommended, an alternative for the Developer is to\r\n&gt; implement the SingleThreadModel interface which requires the container\r\n&gt; to guarantee that there is only one request thread at a time in the\r\n&gt; service method. A servlet container may satisfy this requirement by\r\n&gt; serializing requests on a servlet, or by maintaining a pool of servlet\r\n&gt; instances. If the servlet is part of a Web application that has been\r\n&gt; marked as distributable, the container may maintain a pool of servlet\r\n&gt; instances in each JVM that the application is distributed across.\r\n&gt; \r\n&gt; For servlets not implementing the SingleThreadModel interface, if the\r\n&gt; service method (or methods such as doGet or doPost which are\r\n&gt; dispatched to the service method of the HttpServlet abstract class)\r\n&gt; has been defined with the synchronized keyword, the servlet container\r\n&gt; cannot use the instance pool approach, but must serialize requests\r\n&gt; through it. It is strongly recommended that Developers not synchronize\r\n&gt; the service method (or methods dispatched to it) in these\r\n&gt; circumstances because of detrimental effects on performance\r\n\r\n","title":"How do servlets work? Instantiation, sessions, shared variables and multithreading","body":"<p>The Servlet Specification <strong>JSR-315</strong> clearly defines the web container behavior in the service (and doGet, doPost, doPut etc.) methods (2.3.3.1 Multithreading Issues, Page 9):</p>\n\n<blockquote>\n  <p>A servlet container may send concurrent requests through the service\n  method of the servlet. To handle the requests, the Servlet Developer\n  must make adequate provisions for concurrent processing with multiple\n  threads in the service method.</p>\n  \n  <p>Although it is not recommended, an alternative for the Developer is to\n  implement the SingleThreadModel interface which requires the container\n  to guarantee that there is only one request thread at a time in the\n  service method. A servlet container may satisfy this requirement by\n  serializing requests on a servlet, or by maintaining a pool of servlet\n  instances. If the servlet is part of a Web application that has been\n  marked as distributable, the container may maintain a pool of servlet\n  instances in each JVM that the application is distributed across.</p>\n  \n  <p>For servlets not implementing the SingleThreadModel interface, if the\n  service method (or methods such as doGet or doPost which are\n  dispatched to the service method of the HttpServlet abstract class)\n  has been defined with the synchronized keyword, the servlet container\n  cannot use the instance pool approach, but must serialize requests\n  through it. It is strongly recommended that Developers not synchronize\n  the service method (or methods dispatched to it) in these\n  circumstances because of detrimental effects on performance</p>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":7363021,"reputation":1618,"user_id":5605687,"accept_rate":100,"display_name":"Onic Team"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1549431067,"creation_date":1523719960,"answer_id":49833116,"question_id":3106452,"body_markdown":"**No.** Servlets are **not Thread safe**\r\n\r\nThis is allows accessing more than one threads at a time\r\n\r\n**if u want to make it Servlet as Thread safe ., U can go for**\r\n\r\n`Implement SingleThreadInterface(i)` \r\nwhich is a blank Interface there is no\r\n\r\nmethods\r\n\r\nor we can go for synchronize methods\r\n\r\nwe can make whole service method as synchronized by using synchronized\r\n\r\nkeyword in front of method\r\n\r\n**Example::**\r\n\r\n    public Synchronized class service(ServletRequest request,ServletResponse response)throws ServletException,IOException\r\n\r\nor we can the put block of the code in the Synchronized block\r\n\r\n**Example::**\r\n\r\n    Synchronized(Object)\r\n    \r\n    {\r\n    \r\n    ----Instructions-----\r\n    \r\n    }\r\n\r\nI feel that Synchronized block is better than making the whole method\r\n\r\nSynchronized\r\n","title":"How do servlets work? Instantiation, sessions, shared variables and multithreading","body":"<p><strong>No.</strong> Servlets are <strong>not Thread safe</strong></p>\n\n<p>This is allows accessing more than one threads at a time</p>\n\n<p><strong>if u want to make it Servlet as Thread safe ., U can go for</strong></p>\n\n<p><code>Implement SingleThreadInterface(i)</code> \nwhich is a blank Interface there is no</p>\n\n<p>methods</p>\n\n<p>or we can go for synchronize methods</p>\n\n<p>we can make whole service method as synchronized by using synchronized</p>\n\n<p>keyword in front of method</p>\n\n<p><strong>Example::</strong></p>\n\n<pre><code>public Synchronized class service(ServletRequest request,ServletResponse response)throws ServletException,IOException\n</code></pre>\n\n<p>or we can the put block of the code in the Synchronized block</p>\n\n<p><strong>Example::</strong></p>\n\n<pre><code>Synchronized(Object)\n\n{\n\n----Instructions-----\n\n}\n</code></pre>\n\n<p>I feel that Synchronized block is better than making the whole method</p>\n\n<p>Synchronized</p>\n"},{"tags":[],"owner":{"account_id":5996646,"reputation":13,"user_id":4711103,"display_name":"Mahesh Balasubramanian"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1549435433,"creation_date":1549435433,"answer_id":54548002,"question_id":3106452,"body_markdown":"As is clear from above explanations, by implementing the &lt;B&gt;SingleThreadModel&lt;/B&gt;, a servlet can be assured thread-safety by the servlet container. The container implementation can do this in 2 ways:\r\n\r\n1) Serializing requests (queuing) to a single instance - this is similar to a servlet NOT implementing SingleThreadModel BUT synchronizing the service/ doXXX methods; OR\r\n\r\n2) Creating a pool of instances - which&#39;s a better option and a trade-off between the boot-up/initialization effort/time of the servlet as against the restrictive parameters (memory/ CPU time) of the environment hosting the servlet.","title":"How do servlets work? Instantiation, sessions, shared variables and multithreading","body":"<p>As is clear from above explanations, by implementing the <B>SingleThreadModel</B>, a servlet can be assured thread-safety by the servlet container. The container implementation can do this in 2 ways:</p>\n\n<p>1) Serializing requests (queuing) to a single instance - this is similar to a servlet NOT implementing SingleThreadModel BUT synchronizing the service/ doXXX methods; OR</p>\n\n<p>2) Creating a pool of instances - which's a better option and a trade-off between the boot-up/initialization effort/time of the servlet as against the restrictive parameters (memory/ CPU time) of the environment hosting the servlet.</p>\n"}],"owner":{"account_id":629222,"reputation":12553,"user_id":374769,"display_name":"Ku Jon"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":325983,"favorite_count":0,"down_vote_count":0,"up_vote_count":1255,"accepted_answer_id":3106909,"answer_count":8,"score":1255,"last_activity_date":1699954140,"creation_date":1277338575,"question_id":3106452,"body_markdown":"Suppose, I have a webserver which holds numerous servlets. For information passing among those servlets I am setting session and instance variables.\r\n\r\nNow, if 2 or more users send request to this server then what happens to the session variables?   \r\nWill they all be common for all the users or they will be different for each user?  \r\nIf they are different, then how was the server able to differentiate between different users?\r\n\r\nOne more similar question, if there are `n` users accessing a particular servlet, then this servlet gets instantiated only the first time the first user accessed it or does it get instantiated for all the users separately?   \r\nIn other words, what happens to the instance variables?","title":"How do servlets work? Instantiation, sessions, shared variables and multithreading","body":"<p>Suppose, I have a webserver which holds numerous servlets. For information passing among those servlets I am setting session and instance variables.</p>\n\n<p>Now, if 2 or more users send request to this server then what happens to the session variables?<br>\nWill they all be common for all the users or they will be different for each user?<br>\nIf they are different, then how was the server able to differentiate between different users?</p>\n\n<p>One more similar question, if there are <code>n</code> users accessing a particular servlet, then this servlet gets instantiated only the first time the first user accessed it or does it get instantiated for all the users separately?<br>\nIn other words, what happens to the instance variables?</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":245734,"reputation":332708,"user_id":519413,"accept_rate":97,"display_name":"Rory McCrossan"},"score":4,"creation_date":1699890769,"post_id":77475135,"comment_id":136584555,"body_markdown":"Java and Javascript are two comlpetely different things. Please take care when tagging your questions","body":"Java and Javascript are two comlpetely different things. Please take care when tagging your questions"},{"owner":{"account_id":27834272,"reputation":688,"user_id":21252090,"display_name":"Grinding For Reputation"},"score":3,"creation_date":1699890782,"post_id":77475135,"comment_id":136584558,"body_markdown":"This code gets executed every time the component is repainted","body":"This code gets executed every time the component is repainted"},{"owner":{"account_id":129540,"reputation":210837,"user_id":328193,"accept_rate":91,"display_name":"David"},"score":6,"creation_date":1699890793,"post_id":77475135,"comment_id":136584560,"body_markdown":"It sounds like you&#39;re assuming that the `if` structure is somehow broken in Java, though it seems *far* more likely that `paintComponent()` is being invoked more than once.","body":"It sounds like you&#39;re assuming that the <code>if</code> structure is somehow broken in Java, though it seems <i>far</i> more likely that <code>paintComponent()</code> is being invoked more than once."},{"owner":{"account_id":61252,"reputation":407488,"user_id":182668,"accept_rate":68,"display_name":"Pointy"},"score":4,"creation_date":1699890892,"post_id":77475135,"comment_id":136584590,"body_markdown":"You don&#39;t need the `==` comparison after the `!=` comparison. If `!=` is false, then of necessity `==` will be true, so you just need a plain `else`.","body":"You don&#39;t need the <code>==</code> comparison after the <code>!=</code> comparison. If <code>!=</code> is false, then of necessity <code>==</code> will be true, so you just need a plain <code>else</code>."},{"owner":{"account_id":29893320,"reputation":1,"user_id":22908927,"display_name":"Dylanduran"},"score":0,"creation_date":1699891721,"post_id":77475135,"comment_id":136584792,"body_markdown":"@David I think that might be the problem, I don&#39;t really know how to fix it though, the paintComponent() needs to be invoked twice in order to draw a graphic of both die. Any idea on how to fix it?","body":"@David I think that might be the problem, I don&#39;t really know how to fix it though, the paintComponent() needs to be invoked twice in order to draw a graphic of both die. Any idea on how to fix it?"},{"owner":{"account_id":27834272,"reputation":688,"user_id":21252090,"display_name":"Grinding For Reputation"},"score":0,"creation_date":1699891944,"post_id":77475135,"comment_id":136584845,"body_markdown":"why twice tho? wouldnt once work fine?","body":"why twice tho? wouldnt once work fine?"},{"owner":{"account_id":8362430,"reputation":856,"user_id":6280255,"display_name":"Just another Java programmer"},"score":0,"creation_date":1699892012,"post_id":77475135,"comment_id":136584862,"body_markdown":"Since paintComponent is called when needed, don&#39;t expect your  print&#39;s to be reliable.","body":"Since paintComponent is called when needed, don&#39;t expect your  print&#39;s to be reliable."},{"owner":{"account_id":29893320,"reputation":1,"user_id":22908927,"display_name":"Dylanduran"},"score":0,"creation_date":1699892092,"post_id":77475135,"comment_id":136584877,"body_markdown":"@GrindingForReputation To be honest I&#39;m not sure, most of the code isn&#39;t mine, only the if/else if segment near the bottom is. The exercise doesn&#39;t mention anything about changing the existing code, only adding my own for the println() statements. That&#39;s why I&#39;m so confused about why its printing/invoking twice. I&#39;m really new to coding so it doesn&#39;t make much sense to me.","body":"@GrindingForReputation To be honest I&#39;m not sure, most of the code isn&#39;t mine, only the if/else if segment near the bottom is. The exercise doesn&#39;t mention anything about changing the existing code, only adding my own for the println() statements. That&#39;s why I&#39;m so confused about why its printing/invoking twice. I&#39;m really new to coding so it doesn&#39;t make much sense to me."},{"owner":{"account_id":27834272,"reputation":688,"user_id":21252090,"display_name":"Grinding For Reputation"},"score":0,"creation_date":1699892267,"post_id":77475135,"comment_id":136584912,"body_markdown":"Can you include slightly more code so I can at least give you an idea on how to implement something?","body":"Can you include slightly more code so I can at least give you an idea on how to implement something?"},{"owner":{"account_id":29893320,"reputation":1,"user_id":22908927,"display_name":"Dylanduran"},"score":0,"creation_date":1699892478,"post_id":77475135,"comment_id":136584950,"body_markdown":"@GrindingForReputation I&#39;m afraid the code I included in the original post is all of it, there&#39;s nothing else to include. Sorry to be a bother. Just to be clear, the print statements occur twice one after another","body":"@GrindingForReputation I&#39;m afraid the code I included in the original post is all of it, there&#39;s nothing else to include. Sorry to be a bother. Just to be clear, the print statements occur twice one after another"},{"owner":{"account_id":27834272,"reputation":688,"user_id":21252090,"display_name":"Grinding For Reputation"},"score":0,"creation_date":1699892507,"post_id":77475135,"comment_id":136584954,"body_markdown":"Its completely fine dw! I&#39;ll see if I can come up with anything :D","body":"Its completely fine dw! I&#39;ll see if I can come up with anything :D"},{"owner":{"account_id":3211603,"reputation":289287,"user_id":2711488,"display_name":"Holger"},"score":6,"creation_date":1699892541,"post_id":77475135,"comment_id":136584964,"body_markdown":"If this code has been given by an online Java course you should search for a different online course. Whoever wrote this code should not teach other people Java programming. As said by others, the state of a program should not be changed in the `paintComponent` method and a program solely consisting of a `paintComponent` method does not do anything useful. Further, `(int) (Math.random() * 6) + 1` is not a recommended way of creating a random integer number.","body":"If this code has been given by an online Java course you should search for a different online course. Whoever wrote this code should not teach other people Java programming. As said by others, the state of a program should not be changed in the <code>paintComponent</code> method and a program solely consisting of a <code>paintComponent</code> method does not do anything useful. Further, <code>(int) (Math.random() * 6) + 1</code> is not a recommended way of creating a random integer number."},{"owner":{"account_id":27834272,"reputation":688,"user_id":21252090,"display_name":"Grinding For Reputation"},"score":0,"creation_date":1699892618,"post_id":77475135,"comment_id":136584981,"body_markdown":"@Holger yea especially considering you&#39;re painting 2 dice which require the paint method to be run twice.","body":"@Holger yea especially considering you&#39;re painting 2 dice which require the paint method to be run twice."},{"owner":{"account_id":29893320,"reputation":1,"user_id":22908927,"display_name":"Dylanduran"},"score":0,"creation_date":1699892672,"post_id":77475135,"comment_id":136584992,"body_markdown":"@Holger That&#39;s damning! I&#39;ve had some issues with this course before but this is the first time I&#39;ve been completely lost as to what I&#39;m doing wrong!","body":"@Holger That&#39;s damning! I&#39;ve had some issues with this course before but this is the first time I&#39;ve been completely lost as to what I&#39;m doing wrong!"},{"owner":{"account_id":27834272,"reputation":688,"user_id":21252090,"display_name":"Grinding For Reputation"},"score":0,"creation_date":1699892750,"post_id":77475135,"comment_id":136585005,"body_markdown":"@Dylanduran for the time being maybe create a temporary int, if the value is 0 print the lines and increment the variable, if the value is 1 ignore it. That&#39;s all I could think of with this code. It get&#39;s the job done (i hope)","body":"@Dylanduran for the time being maybe create a temporary int, if the value is 0 print the lines and increment the variable, if the value is 1 ignore it. That&#39;s all I could think of with this code. It get&#39;s the job done (i hope)"},{"owner":{"account_id":3211603,"reputation":289287,"user_id":2711488,"display_name":"Holger"},"score":1,"creation_date":1699892922,"post_id":77475135,"comment_id":136585035,"body_markdown":"But there must be code creating a `DiceRoll` object and displaying it somewhere as otherwise you wouldn’t notice the problem of repeated execution of the `if`/print statement.","body":"But there must be code creating a <code>DiceRoll</code> object and displaying it somewhere as otherwise you wouldn’t notice the problem of repeated execution of the <code>if</code>/print statement."},{"owner":{"account_id":27834272,"reputation":688,"user_id":21252090,"display_name":"Grinding For Reputation"},"score":0,"creation_date":1699893008,"post_id":77475135,"comment_id":136585053,"body_markdown":"@Holger exactly i asked for more code to decide onto something, but apparently all the code has been included in the original post. [look here](https://stackoverflow.com/questions/77475135/how-to-stop-double-printing-using-system-out-println-in-an-if-if-else-statemen?noredirect=1#comment136584950_77475135)","body":"@Holger exactly i asked for more code to decide onto something, but apparently all the code has been included in the original post. <a href=\"https://stackoverflow.com/questions/77475135/how-to-stop-double-printing-using-system-out-println-in-an-if-if-else-statemen?noredirect=1#comment136584950_77475135\">look here</a>"},{"owner":{"account_id":29893320,"reputation":1,"user_id":22908927,"display_name":"Dylanduran"},"score":0,"creation_date":1699893343,"post_id":77475135,"comment_id":136585119,"body_markdown":"@Holger I&#39;m a complete moron. Can&#39;t blame the course for this one! Turns out what I&#39;d down is I&#39;d somehow not seen the *second* batch of code that was in a separate file that called the code I&#39;d linked above. All I had to do was add a new public void method and call that in the second file. Thanks for pointing out about the creation of the DiceRoll object, I genuinely have no idea how I could&#39;ve missed something so obvious. It works like a charm now!","body":"@Holger I&#39;m a complete moron. Can&#39;t blame the course for this one! Turns out what I&#39;d down is I&#39;d somehow not seen the <i>second</i> batch of code that was in a separate file that called the code I&#39;d linked above. All I had to do was add a new public void method and call that in the second file. Thanks for pointing out about the creation of the DiceRoll object, I genuinely have no idea how I could&#39;ve missed something so obvious. It works like a charm now!"},{"owner":{"account_id":29893320,"reputation":1,"user_id":22908927,"display_name":"Dylanduran"},"score":0,"creation_date":1699893375,"post_id":77475135,"comment_id":136585127,"body_markdown":"@GrindingForReputation Thanks for your help too, I was being a complete idiot if you take a look at my reply to Holger. It works absolutely fine now that I&#39;ve grown a pair of eyes","body":"@GrindingForReputation Thanks for your help too, I was being a complete idiot if you take a look at my reply to Holger. It works absolutely fine now that I&#39;ve grown a pair of eyes"},{"owner":{"account_id":27834272,"reputation":688,"user_id":21252090,"display_name":"Grinding For Reputation"},"score":0,"creation_date":1699893478,"post_id":77475135,"comment_id":136585151,"body_markdown":"@Dylanduran its ok just be more careful next time (and also thats basically what i meant by more code :D)","body":"@Dylanduran its ok just be more careful next time (and also thats basically what i meant by more code :D)"},{"owner":{"account_id":3211603,"reputation":289287,"user_id":2711488,"display_name":"Holger"},"score":5,"creation_date":1699893549,"post_id":77475135,"comment_id":136585162,"body_markdown":"That doesn’t change the fact that the dice rolls should not happen in the `paintComponent` method and if that’s been given by the course, it’s teaching wrong things. As said, the `paintComponent` method will be invoked by the system whenever a refresh is needed (try dragging another window or an icon over the component), outside the program’s control.","body":"That doesn’t change the fact that the dice rolls should not happen in the <code>paintComponent</code> method and if that’s been given by the course, it’s teaching wrong things. As said, the <code>paintComponent</code> method will be invoked by the system whenever a refresh is needed (try dragging another window or an icon over the component), outside the program’s control."},{"owner":{"account_id":29893320,"reputation":1,"user_id":22908927,"display_name":"Dylanduran"},"score":0,"creation_date":1699893692,"post_id":77475135,"comment_id":136585185,"body_markdown":"@Holger Maybe not, its a degree level course as well so if the code looks sketchy to people on here that isn&#39;t a good sign.","body":"@Holger Maybe not, its a degree level course as well so if the code looks sketchy to people on here that isn&#39;t a good sign."}],"answers":[{"tags":[],"owner":{"account_id":27849471,"reputation":11,"user_id":21264263,"display_name":"minhat"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1699954027,"creation_date":1699954027,"answer_id":77479461,"question_id":77475135,"body_markdown":"Dice rolls action should not be in `paintComponent` method because you can&#39;t control how this `paintComponent` be invoked by system. Put dice roll in the `main()` and try again.","title":"How to stop double printing using System.out.println() in an if/if else statement?","body":"<p>Dice rolls action should not be in <code>paintComponent</code> method because you can't control how this <code>paintComponent</code> be invoked by system. Put dice roll in the <code>main()</code> and try again.</p>\n"}],"owner":{"account_id":29893320,"reputation":1,"user_id":22908927,"display_name":"Dylanduran"},"comment_count":22,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":95,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1699954027,"creation_date":1699890538,"question_id":77475135,"body_markdown":"I&#39;m fairly new to programming and learning Java as part of an online course.\r\n\r\nI&#39;ve been given many different coding exercises, one of which should be relatively simple where I print out two statements (&quot;Sorry, try again&quot; or &quot;Win!&quot;) depending on if the two different numbers of 6 sided die match.\r\n\r\nThe problem is for whatever reason both statements are printed even though only one should appear (either two &quot;Sorry, try again&quot;s or &quot;Sorry, try again&quot; followed by &quot;Win!&quot; if the numbers matched, I&#39;ve attached a screenshot with details.\r\n\r\nAny idea why this is happening? Code below:\r\n\r\n```\r\nimport java.awt.*;\r\nimport java.awt.event.*;\r\nimport javax.swing.*;\r\npublic class DiceRoll extends JPanel\r\n{\r\n    private int firstDice;\t\t// to hold the value for the first dice\r\n\tprivate int secondDice;\t\t// to hold the value for the second dice\r\n    public void paintComponent(Graphics g)\r\n    {\r\n        super.paintComponent(g);\r\n\t\tfirstDice  = (int) (Math.random() * 6) + 1; // get a value for the first dice\r\n\t\tsecondDice = (int) (Math.random() * 6) + 1; //get a value for the second dice\r\n\t\t// draw the dice squares\r\n\t\tg.setColor(Color.blue);\r\n\t\tg.fillRect(20, 20, 60, 60);\r\n\t\tg.setColor(Color.magenta);\r\n\t\tg.fillRect(120, 20, 60, 60);\r\n\t\t// put the values on the dice\r\n\t\tg.setColor(Color.white);\r\n\t\tg.drawString(&quot; &quot; + firstDice, 43, 54);\r\n\t\tg.drawString(&quot; &quot; + secondDice, 143, 54);\r\n\t\t// write the values under the dice\r\n\t\tg.setColor(Color.black);\r\n\t\tg.drawString(&quot;First dice = &quot; + firstDice, 20, 100); \r\n\t\tg.drawString(&quot;Second Dice = &quot; + secondDice, 120, 100); // print out the dice values\r\n\t\t\r\n\t\t\r\n\t\t\r\n\t\tif (firstDice != secondDice) \r\n\t\t{\r\n\t\t\tSystem.out.println(&quot;Sorry, try again&quot;);\r\n\t\t}\r\n\t\telse if (firstDice == secondDice) \r\n\t\t{\r\n\t\t\tSystem.out.println(&quot;Win!&quot;);\r\n\t\t}\r\n   }\r\n}\r\n```\r\n\r\nI&#39;ve looked up solutions online and according to what I&#39;ve read it should be correct. Feel like I&#39;m missing something obvious here.","title":"How to stop double printing using System.out.println() in an if/if else statement?","body":"<p>I'm fairly new to programming and learning Java as part of an online course.</p>\n<p>I've been given many different coding exercises, one of which should be relatively simple where I print out two statements (&quot;Sorry, try again&quot; or &quot;Win!&quot;) depending on if the two different numbers of 6 sided die match.</p>\n<p>The problem is for whatever reason both statements are printed even though only one should appear (either two &quot;Sorry, try again&quot;s or &quot;Sorry, try again&quot; followed by &quot;Win!&quot; if the numbers matched, I've attached a screenshot with details.</p>\n<p>Any idea why this is happening? Code below:</p>\n<pre><code>import java.awt.*;\nimport java.awt.event.*;\nimport javax.swing.*;\npublic class DiceRoll extends JPanel\n{\n    private int firstDice;      // to hold the value for the first dice\n    private int secondDice;     // to hold the value for the second dice\n    public void paintComponent(Graphics g)\n    {\n        super.paintComponent(g);\n        firstDice  = (int) (Math.random() * 6) + 1; // get a value for the first dice\n        secondDice = (int) (Math.random() * 6) + 1; //get a value for the second dice\n        // draw the dice squares\n        g.setColor(Color.blue);\n        g.fillRect(20, 20, 60, 60);\n        g.setColor(Color.magenta);\n        g.fillRect(120, 20, 60, 60);\n        // put the values on the dice\n        g.setColor(Color.white);\n        g.drawString(&quot; &quot; + firstDice, 43, 54);\n        g.drawString(&quot; &quot; + secondDice, 143, 54);\n        // write the values under the dice\n        g.setColor(Color.black);\n        g.drawString(&quot;First dice = &quot; + firstDice, 20, 100); \n        g.drawString(&quot;Second Dice = &quot; + secondDice, 120, 100); // print out the dice values\n        \n        \n        \n        if (firstDice != secondDice) \n        {\n            System.out.println(&quot;Sorry, try again&quot;);\n        }\n        else if (firstDice == secondDice) \n        {\n            System.out.println(&quot;Win!&quot;);\n        }\n   }\n}\n</code></pre>\n<p>I've looked up solutions online and according to what I've read it should be correct. Feel like I'm missing something obvious here.</p>\n"},{"tags":["java","maven-2","aem-6","aem-core-wcm-components"],"owner":{"account_id":8467666,"reputation":1,"user_id":6351383,"display_name":"NdS"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":15,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1699953837,"creation_date":1699953837,"question_id":77479445,"body_markdown":"My OSGI bundle will not start if I use the AEM wcm core components (to be specific the Image component) in my java code:\r\n\r\n\r\n```\r\npackage be.ovl.aem.services.models.components.content.enhancedimage.impl;\r\n\r\nimport be.ovl.aem.services.models.components.content.enhancedimage.EnhancedImage;\r\n\r\n**import com.adobe.cq.wcm.core.components.models.Image;**\r\nimport lombok.Data;\r\nimport org.apache.sling.api.resource.Resource;\r\nimport org.apache.sling.models.annotations.Model;\r\nimport org.apache.sling.models.annotations.Via;\r\nimport org.apache.sling.models.annotations.injectorspecific.Self;\r\nimport org.apache.sling.models.annotations.injectorspecific.ValueMapValue;\r\nimport org.apache.sling.models.annotations.via.ResourceSuperType;\r\n\r\n\r\n@Data\r\n@Model(\r\n        adaptables = Resource.class,\r\n        adapters = EnhancedImage.class,\r\n        resourceType = &quot;ovl/components/content/enhanced-image&quot;\r\n)\r\npublic class EnhancedImageImpl implements EnhancedImage {\r\n    \r\n    @ValueMapValue\r\n    String imageText;\r\n    \r\n    @ValueMapValue\r\n    String imageCopyright;\r\n\r\n    @Self\r\n    @Via(type = ResourceSuperType.class)\r\n    private Image image;\r\n\r\n    public String getImageText() {\r\n        return imageText;\r\n    }\r\n\r\n    public void setImageText(String imageText) {\r\n        this.imageText = imageText;\r\n    }\r\n\r\n    public String getImageCopyright() {\r\n        return imageCopyright;\r\n    }\r\n\r\n    public void setImageCopyright(String imageCopyright) {\r\n        this.imageCopyright = imageCopyright;\r\n    }\r\n\r\n    public Image getImage() {\r\n        return image;\r\n    }\r\n\r\n    public void setImage(Image image) {\r\n        this.image = image;\r\n    }\r\n}\r\n\r\n```\r\n\r\nIn the Adobe Experience Manager Web Console Bundles, I see this:\r\n\r\n=&gt; com.adobe.cq.wcm.core.components.models,version=[11.1,12) -- Cannot be resolved\r\n\r\nI&#39;m using Adobe Experience Manager (AEM) 6.3.1. \r\n\r\n\r\n\r\nIf I change the uber-jar version in the POM from 6.3.1 to 6.3.1.2, then it resolves but I get another unresolved depandency in my bundle. The POM:\r\n\r\n\r\n\r\n \r\n```\r\n&lt;!-- AEM public API --&gt;\r\n &lt;dependency&gt;\r\n     &lt;groupId&gt;com.adobe.aem&lt;/groupId&gt;\r\n     &lt;artifactId&gt;uber-jar&lt;/artifactId&gt;\r\n     &lt;version&gt;6.3.1.2&lt;/version&gt;\r\n     &lt;classifier&gt;apis&lt;/classifier&gt;\r\n     &lt;scope&gt;provided&lt;/scope&gt;\r\n &lt;/dependency&gt;\r\n```\r\n\r\n\r\nAnd this is the unresolved depandency:\r\n\t\r\n\t\r\n=&gt; org.apache.sling.xss,version=[2.0,3) -- Cannot be resolved\r\n\r\nIt seems like the chicken and the egg problem... Can someone help me please?\r\n","title":"Why I&#39;m getting an unresolved depandency error in my AEM OSGI bundle?","body":"<p>My OSGI bundle will not start if I use the AEM wcm core components (to be specific the Image component) in my java code:</p>\n<pre><code>package be.ovl.aem.services.models.components.content.enhancedimage.impl;\n\nimport be.ovl.aem.services.models.components.content.enhancedimage.EnhancedImage;\n\n**import com.adobe.cq.wcm.core.components.models.Image;**\nimport lombok.Data;\nimport org.apache.sling.api.resource.Resource;\nimport org.apache.sling.models.annotations.Model;\nimport org.apache.sling.models.annotations.Via;\nimport org.apache.sling.models.annotations.injectorspecific.Self;\nimport org.apache.sling.models.annotations.injectorspecific.ValueMapValue;\nimport org.apache.sling.models.annotations.via.ResourceSuperType;\n\n\n@Data\n@Model(\n        adaptables = Resource.class,\n        adapters = EnhancedImage.class,\n        resourceType = &quot;ovl/components/content/enhanced-image&quot;\n)\npublic class EnhancedImageImpl implements EnhancedImage {\n    \n    @ValueMapValue\n    String imageText;\n    \n    @ValueMapValue\n    String imageCopyright;\n\n    @Self\n    @Via(type = ResourceSuperType.class)\n    private Image image;\n\n    public String getImageText() {\n        return imageText;\n    }\n\n    public void setImageText(String imageText) {\n        this.imageText = imageText;\n    }\n\n    public String getImageCopyright() {\n        return imageCopyright;\n    }\n\n    public void setImageCopyright(String imageCopyright) {\n        this.imageCopyright = imageCopyright;\n    }\n\n    public Image getImage() {\n        return image;\n    }\n\n    public void setImage(Image image) {\n        this.image = image;\n    }\n}\n\n</code></pre>\n<p>In the Adobe Experience Manager Web Console Bundles, I see this:</p>\n<p>=&gt; com.adobe.cq.wcm.core.components.models,version=[11.1,12) -- Cannot be resolved</p>\n<p>I'm using Adobe Experience Manager (AEM) 6.3.1.</p>\n<p>If I change the uber-jar version in the POM from 6.3.1 to 6.3.1.2, then it resolves but I get another unresolved depandency in my bundle. The POM:</p>\n<pre><code>&lt;!-- AEM public API --&gt;\n &lt;dependency&gt;\n     &lt;groupId&gt;com.adobe.aem&lt;/groupId&gt;\n     &lt;artifactId&gt;uber-jar&lt;/artifactId&gt;\n     &lt;version&gt;6.3.1.2&lt;/version&gt;\n     &lt;classifier&gt;apis&lt;/classifier&gt;\n     &lt;scope&gt;provided&lt;/scope&gt;\n &lt;/dependency&gt;\n</code></pre>\n<p>And this is the unresolved depandency:</p>\n<p>=&gt; org.apache.sling.xss,version=[2.0,3) -- Cannot be resolved</p>\n<p>It seems like the chicken and the egg problem... Can someone help me please?</p>\n"},{"tags":["java","multithreading","collections","nullpointerexception"],"comments":[{"owner":{"account_id":71739,"reputation":307143,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":1,"creation_date":1699454065,"post_id":77446364,"comment_id":136533518,"body_markdown":"Stack trace please.","body":"Stack trace please."},{"owner":{"account_id":3211603,"reputation":289287,"user_id":2711488,"display_name":"Holger"},"score":2,"creation_date":1699454217,"post_id":77446364,"comment_id":136533551,"body_markdown":"Copying the set into an `ArrayList` like with `new ArrayList&lt;&gt;(_connections)` does not guaranty that you won’t get a `ConcurrentModificationException`, as that exception may already occur while copying. But: 1. Getting a `ConcurrentModificationException` is not the real problem, getting corrupted data is worse 2. You get corrupted data because you’re modifying a `LinkedHashSet` concurrently. Thinking about thread safety when everything is lost, i.e. when you want to iterate over the set, is way too late.","body":"Copying the set into an <code>ArrayList</code> like with <code>new ArrayList&lt;&gt;(_connections)</code> does not guaranty that you won’t get a <code>ConcurrentModificationException</code>, as that exception may already occur while copying. But: 1. Getting a <code>ConcurrentModificationException</code> is not the real problem, getting corrupted data is worse 2. You get corrupted data because you’re modifying a <code>LinkedHashSet</code> concurrently. Thinking about thread safety when everything is lost, i.e. when you want to iterate over the set, is way too late."},{"owner":{"account_id":24059393,"reputation":33,"user_id":18036825,"display_name":"slarti76"},"score":0,"creation_date":1699454560,"post_id":77446364,"comment_id":136533635,"body_markdown":"@Holger Thx, you&#39;re right, my approach to avoid CME is flawed. WIll have to look at that again. However, that doesn&#39;t explain how the `null` got in there. You write &quot;you get corrupted data&quot; - but how can I get a `null` in there, when I provably never add a `null`? Even if several threads concurrently call\n`_connections.add(tcpipConnection)`\nthey could never add a `null`, because `tcpipConnection` is locally on the stack and never `null`.","body":"@Holger Thx, you&#39;re right, my approach to avoid CME is flawed. WIll have to look at that again. However, that doesn&#39;t explain how the <code>null</code> got in there. You write &quot;you get corrupted data&quot; - but how can I get a <code>null</code> in there, when I provably never add a <code>null</code>? Even if several threads concurrently call <code>_connections.add(tcpipConnection)</code> they could never add a <code>null</code>, because <code>tcpipConnection</code> is locally on the stack and never <code>null</code>."},{"owner":{"account_id":24059393,"reputation":33,"user_id":18036825,"display_name":"slarti76"},"score":0,"creation_date":1699454769,"post_id":77446364,"comment_id":136533696,"body_markdown":"@user207421 I understand the call for a stack trace, but a) I don&#39;t know how to easily obfuscate it to safeguard company data, and b) I&#39;m pretty sure it&#39;s of no help here. The actual exception message is `Cannot invoke &quot;&lt;snip&gt;.close(String)&quot; because &quot;c&quot; is null`.","body":"@user207421 I understand the call for a stack trace, but a) I don&#39;t know how to easily obfuscate it to safeguard company data, and b) I&#39;m pretty sure it&#39;s of no help here. The actual exception message is <code>Cannot invoke &quot;&lt;snip&gt;.close(String)&quot; because &quot;c&quot; is null</code>."},{"owner":{"account_id":71739,"reputation":307143,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":2,"creation_date":1699454924,"post_id":77446364,"comment_id":136533745,"body_markdown":"The null got there because you are violating the usage conditions. Solution: don’t. I don’t see why you think an apparently null value is impossible. Anything is possible when you break the rules.","body":"The null got there because you are violating the usage conditions. Solution: don’t. I don’t see why you think an apparently null value is impossible. Anything is possible when you break the rules."},{"owner":{"account_id":24059393,"reputation":33,"user_id":18036825,"display_name":"slarti76"},"score":0,"creation_date":1699455346,"post_id":77446364,"comment_id":136533850,"body_markdown":"@user207421 Thx, ok, could you please elaborate which rule I&#39;m breaking? I never said I&#39;m doing nothing wrong here, I just can&#39;t see it. @Holger already pointed out my approach to avoid CME is wrong, but that doesn&#39;t explain the `null`. Thx in any case.","body":"@user207421 Thx, ok, could you please elaborate which rule I&#39;m breaking? I never said I&#39;m doing nothing wrong here, I just can&#39;t see it. @Holger already pointed out my approach to avoid CME is wrong, but that doesn&#39;t explain the <code>null</code>. Thx in any case."},{"owner":{"account_id":3211603,"reputation":289287,"user_id":2711488,"display_name":"Holger"},"score":2,"creation_date":1699457449,"post_id":77446364,"comment_id":136534383,"body_markdown":"That’s what you get when using mutable objects in way that is not thread safe a) “impossible” values, like spurious `null` b) “impossible” behavior, like infinite loops at a harmless-looking `get` on a `HashMap`, or c) exceptions, which is the most harmless category as it tells you immediately that there’s something wrong. Maybe it helps if I tell you that the `null` was already there before you added an element, which you would never see in a single threaded or a correctly synchronized program.","body":"That’s what you get when using mutable objects in way that is not thread safe a) “impossible” values, like spurious <code>null</code> b) “impossible” behavior, like infinite loops at a harmless-looking <code>get</code> on a <code>HashMap</code>, or c) exceptions, which is the most harmless category as it tells you immediately that there’s something wrong. Maybe it helps if I tell you that the <code>null</code> was already there before you added an element, which you would never see in a single threaded or a correctly synchronized program."},{"owner":{"account_id":322981,"reputation":310744,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":0,"creation_date":1699460768,"post_id":77446364,"comment_id":136535199,"body_markdown":"“So I think you will agree that there&#39;s no way a null could be added to the set.” — Instead of assuming, verify that is the case: `_connections.add( Objects.requireNonNull( tcpipConnection ) );`. Now an exception will be thrown when encountering a null.","body":"“So I think you will agree that there&#39;s no way a null could be added to the set.” — Instead of assuming, verify that is the case: <code>_connections.add( Objects.requireNonNull( tcpipConnection ) );</code>. Now an exception will be thrown when encountering a null."},{"owner":{"account_id":24059393,"reputation":33,"user_id":18036825,"display_name":"slarti76"},"score":0,"creation_date":1699461823,"post_id":77446364,"comment_id":136535431,"body_markdown":"@BasilBourque Well, by Java language specification, the result of the `new` operator cannot be `null`, so that check is really unnecessary.","body":"@BasilBourque Well, by Java language specification, the result of the <code>new</code> operator cannot be <code>null</code>, so that check is really unnecessary."}],"answers":[{"tags":[],"owner":{"account_id":3618137,"reputation":635,"user_id":3017541,"display_name":"fxrobin"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1699953563,"creation_date":1699455349,"answer_id":77446652,"question_id":77446364,"body_markdown":"As you mentioned, YOU MUST use a `Collections.synchronizedSet()` in your initializer. But it&#39;s not enough : the iterator is not safe.\r\n\r\nManipulating the set that is not synchronized in different threads can mess up (will certainly) the `LinkedHashSet` internal state. (ie. double links between entries, etc.)\r\n\r\nA good way is to encapsulate your `Set` into another class and to offer synchronized methods to add and remove a connection and, a least, return a thread-safe copy of the Set.\r\n\r\nIt could be like this :\r\n\r\n```\r\nclass ConnectionManager\r\n{\r\n  public static ConnectionManager instance = new ConnectionManager();\r\n  \r\n  private Set&lt;TcpIpConnection&gt; connections = new LinkedHashSet&lt;&gt;();\r\n\r\n  private ConnectionManager { } // protection against external construction\r\n\r\n  public static ConnectionManager getInstance() {\r\n     return instance;\r\n  }\r\n\r\n  public synchronized void add(TcpIpConnection connection) {\r\n      this.connections.add(connections);\r\n  }\r\n \r\n  public synchronized void remove(TcpIpConnection connection) {\r\n      this.connections.remove(connections);\r\n  }\r\n\r\n  // returns a synchronized copy and unmodifiable Set (thanx to Holger remark)\r\n  public synchronized  Set &lt;TcpIpConnection&gt; getConnections() {\r\n     return Collections.unmodifiableSet(new LinkedHashSet(this.connections));\r\n  }\r\n }\r\n```\r\n\r\nThen in your code :\r\n\r\n```\r\nTcpIpConnection tcpipConnection = new ServerConnection(clientSocket, _channels, MyClass.this);\r\nConnectionManager.getInstance().add(tcpipConnection);\r\n\r\n// or\r\n\r\nConnectionManager.getInstance().remove(tcpipConnection);\r\n```\r\n\r\nand using your stream :\r\n\r\n```\r\nConnectionManager.getInstance()\r\n                 .getConnections()\r\n                 .stream()\r\n                 .forEach(c -&gt; c.close(&quot;Server down&quot;));\r\n```\r\n","title":"Java Collections: NPE even though no null value was ever added","body":"<p>As you mentioned, YOU MUST use a <code>Collections.synchronizedSet()</code> in your initializer. But it's not enough : the iterator is not safe.</p>\n<p>Manipulating the set that is not synchronized in different threads can mess up (will certainly) the <code>LinkedHashSet</code> internal state. (ie. double links between entries, etc.)</p>\n<p>A good way is to encapsulate your <code>Set</code> into another class and to offer synchronized methods to add and remove a connection and, a least, return a thread-safe copy of the Set.</p>\n<p>It could be like this :</p>\n<pre><code>class ConnectionManager\n{\n  public static ConnectionManager instance = new ConnectionManager();\n  \n  private Set&lt;TcpIpConnection&gt; connections = new LinkedHashSet&lt;&gt;();\n\n  private ConnectionManager { } // protection against external construction\n\n  public static ConnectionManager getInstance() {\n     return instance;\n  }\n\n  public synchronized void add(TcpIpConnection connection) {\n      this.connections.add(connections);\n  }\n \n  public synchronized void remove(TcpIpConnection connection) {\n      this.connections.remove(connections);\n  }\n\n  // returns a synchronized copy and unmodifiable Set (thanx to Holger remark)\n  public synchronized  Set &lt;TcpIpConnection&gt; getConnections() {\n     return Collections.unmodifiableSet(new LinkedHashSet(this.connections));\n  }\n }\n</code></pre>\n<p>Then in your code :</p>\n<pre><code>TcpIpConnection tcpipConnection = new ServerConnection(clientSocket, _channels, MyClass.this);\nConnectionManager.getInstance().add(tcpipConnection);\n\n// or\n\nConnectionManager.getInstance().remove(tcpipConnection);\n</code></pre>\n<p>and using your stream :</p>\n<pre><code>ConnectionManager.getInstance()\n                 .getConnections()\n                 .stream()\n                 .forEach(c -&gt; c.close(&quot;Server down&quot;));\n</code></pre>\n"},{"tags":[],"owner":{"account_id":10777133,"reputation":7282,"user_id":7928721,"display_name":"samabcde"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1699457898,"creation_date":1699457596,"answer_id":77446953,"question_id":77446364,"body_markdown":"## Just to explain why null is possible\r\nBelow are referencing jdk-21+35\r\n\r\nIn `new ArrayList&lt;&gt;(_connections)`, which will call  \r\n[_connections.toArray()][1]  \r\n -&gt; [HashSet#toArray()][2](as LinkedHashSet extends HashSet)  \r\n -&gt; [LinkedHashMap#keysToArray()][3](as LinkedHashSet is backed by LinkedHashMap)\r\n\r\n```java\r\n    // HashSet#toArray()\r\n    @Override\r\n    public Object[] toArray() {\r\n        return map.keysToArray(new Object[map.size()]);\r\n    }\r\n```\r\nas here we can see an Object[] is constructed with length `map.size()`, and this Object[] will be copied to the ArrayList.\r\n```java\r\n    // LinkedHashMap#keysToArray()\r\n    final &lt;T&gt; T[] keysToArray(T[] a) {\r\n        return keysToArray(a, false);\r\n    }\r\n\r\n    final &lt;T&gt; T[] keysToArray(T[] a, boolean reversed) {\r\n        Object[] r = a;\r\n        int idx = 0;\r\n        if (reversed) {\r\n            for (LinkedHashMap.Entry&lt;K,V&gt; e = tail; e != null; e = e.before) {\r\n                r[idx++] = e.key;\r\n            }\r\n        } else {\r\n            for (LinkedHashMap.Entry&lt;K,V&gt; e = head; e != null; e = e.after) {\r\n                r[idx++] = e.key;\r\n            }\r\n        }\r\n        return a;\r\n    }\r\n```\r\nAnd above is how we set value to the Object[].\r\nSo in a concurrent environment, when we call `HashSet#toArray()`, the map size might be 2, but when we go to `LinkedHashMap#keysToArray()`, the map size could be 1(some thread removed element in between), hence there could be some null element in the Object[]. And vice versa `ArrayIndexOutOfBound` could be thrown.\r\n\r\n## Conclusion\r\n**Never assume any behaviour of non thread safe class when working in multi-thread environment, there is 0 guarantee.**\r\n\r\n  [1]: https://github.com/openjdk/jdk/blob/890adb6410dab4606a4f26a942aed02fb2f55387/src/java.base/share/classes/java/util/ArrayList.java#L181\r\n  [2]: https://github.com/openjdk/jdk/blob/890adb6410dab4606a4f26a942aed02fb2f55387/src/java.base/share/classes/java/util/HashSet.java#L375\r\n  [3]: https://github.com/openjdk/jdk/blob/890adb6410dab4606a4f26a942aed02fb2f55387/src/java.base/share/classes/java/util/HashSet.java#L375","title":"Java Collections: NPE even though no null value was ever added","body":"<h2>Just to explain why null is possible</h2>\n<p>Below are referencing jdk-21+35</p>\n<p>In <code>new ArrayList&lt;&gt;(_connections)</code>, which will call<br />\n<a href=\"https://github.com/openjdk/jdk/blob/890adb6410dab4606a4f26a942aed02fb2f55387/src/java.base/share/classes/java/util/ArrayList.java#L181\" rel=\"nofollow noreferrer\">_connections.toArray()</a><br />\n-&gt; <a href=\"https://github.com/openjdk/jdk/blob/890adb6410dab4606a4f26a942aed02fb2f55387/src/java.base/share/classes/java/util/HashSet.java#L375\" rel=\"nofollow noreferrer\">HashSet#toArray()</a>(as LinkedHashSet extends HashSet)<br />\n-&gt; <a href=\"https://github.com/openjdk/jdk/blob/890adb6410dab4606a4f26a942aed02fb2f55387/src/java.base/share/classes/java/util/HashSet.java#L375\" rel=\"nofollow noreferrer\">LinkedHashMap#keysToArray()</a>(as LinkedHashSet is backed by LinkedHashMap)</p>\n<pre class=\"lang-java prettyprint-override\"><code>    // HashSet#toArray()\n    @Override\n    public Object[] toArray() {\n        return map.keysToArray(new Object[map.size()]);\n    }\n</code></pre>\n<p>as here we can see an Object[] is constructed with length <code>map.size()</code>, and this Object[] will be copied to the ArrayList.</p>\n<pre class=\"lang-java prettyprint-override\"><code>    // LinkedHashMap#keysToArray()\n    final &lt;T&gt; T[] keysToArray(T[] a) {\n        return keysToArray(a, false);\n    }\n\n    final &lt;T&gt; T[] keysToArray(T[] a, boolean reversed) {\n        Object[] r = a;\n        int idx = 0;\n        if (reversed) {\n            for (LinkedHashMap.Entry&lt;K,V&gt; e = tail; e != null; e = e.before) {\n                r[idx++] = e.key;\n            }\n        } else {\n            for (LinkedHashMap.Entry&lt;K,V&gt; e = head; e != null; e = e.after) {\n                r[idx++] = e.key;\n            }\n        }\n        return a;\n    }\n</code></pre>\n<p>And above is how we set value to the Object[].\nSo in a concurrent environment, when we call <code>HashSet#toArray()</code>, the map size might be 2, but when we go to <code>LinkedHashMap#keysToArray()</code>, the map size could be 1(some thread removed element in between), hence there could be some null element in the Object[]. And vice versa <code>ArrayIndexOutOfBound</code> could be thrown.</p>\n<h2>Conclusion</h2>\n<p><strong>Never assume any behaviour of non thread safe class when working in multi-thread environment, there is 0 guarantee.</strong></p>\n"}],"owner":{"account_id":24059393,"reputation":33,"user_id":18036825,"display_name":"slarti76"},"comment_count":9,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":83,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":77446953,"answer_count":2,"score":3,"last_activity_date":1699953563,"creation_date":1699453201,"question_id":77446364,"body_markdown":"I recently got an NPE in a context where I was absolutely sure it shouldn&#39;t be possible. The class is used in a very multi-threaded program, so I&#39;m aware that you should expect basically anything to be possible, but still.\r\n\r\nSo, the class defines the following field:\r\n\r\n```java\r\nprivate final Set&lt;TcpIpConnection&gt; _connections = new LinkedHashSet&lt;&gt;();\r\n```\r\n\r\nIn the whole class, this set is only manipulated in two places:\r\n\r\n```java\r\n// some method\r\n  TcpIpConnection tcpipConnection = new ServerConnection(clientSocket, _channels, MyClass.this);\r\n  _connections.add(tcpipConnection);\r\n// some other method\r\n  _connections.remove(connection);\r\n```\r\n\r\nSo I think you will agree that there&#39;s no way a `null` could be added to the set. And yes, the set stays in the class and is never proliferated outside.\r\n\r\nBut now I have a test case which sometimes fails with an NPE in the following statement, which is the only other statement in the class that uses `_connections`:\r\n```java\r\nnew ArrayList&lt;&gt;(_connections).stream().forEach(c -&gt; c.close(&quot;Server down&quot;));\r\n```\r\nAs you can see, I already prevented a `ConcurrentModificationException` by first creating a local copy of the set as `ArrayList`.\r\n\r\nNow the NPE appears for `c`, which must be a value previously added to `_connections` - but how can that become `null`?\r\n\r\nTo be clear, I&#39;m not looking for a solution - I added `filter(Objects::nonNull)` in the stream (or I could&#39;ve used `Collections.synchronizedSet()` in the initializer), and it&#39;s guaranteed to work now.\r\n\r\nHow can that even happen? Yes, multi-threaded access can screw almost everything up, but putting a `null` in a collection which wasn&#39;t there?\r\n","title":"Java Collections: NPE even though no null value was ever added","body":"<p>I recently got an NPE in a context where I was absolutely sure it shouldn't be possible. The class is used in a very multi-threaded program, so I'm aware that you should expect basically anything to be possible, but still.</p>\n<p>So, the class defines the following field:</p>\n<pre class=\"lang-java prettyprint-override\"><code>private final Set&lt;TcpIpConnection&gt; _connections = new LinkedHashSet&lt;&gt;();\n</code></pre>\n<p>In the whole class, this set is only manipulated in two places:</p>\n<pre class=\"lang-java prettyprint-override\"><code>// some method\n  TcpIpConnection tcpipConnection = new ServerConnection(clientSocket, _channels, MyClass.this);\n  _connections.add(tcpipConnection);\n// some other method\n  _connections.remove(connection);\n</code></pre>\n<p>So I think you will agree that there's no way a <code>null</code> could be added to the set. And yes, the set stays in the class and is never proliferated outside.</p>\n<p>But now I have a test case which sometimes fails with an NPE in the following statement, which is the only other statement in the class that uses <code>_connections</code>:</p>\n<pre class=\"lang-java prettyprint-override\"><code>new ArrayList&lt;&gt;(_connections).stream().forEach(c -&gt; c.close(&quot;Server down&quot;));\n</code></pre>\n<p>As you can see, I already prevented a <code>ConcurrentModificationException</code> by first creating a local copy of the set as <code>ArrayList</code>.</p>\n<p>Now the NPE appears for <code>c</code>, which must be a value previously added to <code>_connections</code> - but how can that become <code>null</code>?</p>\n<p>To be clear, I'm not looking for a solution - I added <code>filter(Objects::nonNull)</code> in the stream (or I could've used <code>Collections.synchronizedSet()</code> in the initializer), and it's guaranteed to work now.</p>\n<p>How can that even happen? Yes, multi-threaded access can screw almost everything up, but putting a <code>null</code> in a collection which wasn't there?</p>\n"},{"tags":["java","spring-boot","apache-kafka","spring-restcontroller","spring-kafka"],"comments":[{"owner":{"account_id":2671330,"reputation":183376,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"score":0,"creation_date":1513756092,"post_id":47900942,"comment_id":82768712,"body_markdown":"You&#39;ll need to look at the internals of that ProducerFactory... Or there&#39;s a send method that includes a key, not just the topic and value","body":"You&#39;ll need to look at the internals of that ProducerFactory... Or there&#39;s a send method that includes a key, not just the topic and value"},{"owner":{"account_id":2671330,"reputation":183376,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"score":0,"creation_date":1513756177,"post_id":47900942,"comment_id":82768765,"body_markdown":"For example https://docs.spring.io/spring-kafka/api/org/springframework/kafka/core/KafkaTemplate.html#send-java.lang.String-K-V-","body":"For example <a href=\"https://docs.spring.io/spring-kafka/api/org/springframework/kafka/core/KafkaTemplate.html#send-java.lang.String-K-V-\" rel=\"nofollow noreferrer\">docs.spring.io/spring-kafka/api/org/springframework/kafka/co&zwnj;&#8203;re/&hellip;</a>"},{"owner":{"account_id":4239064,"reputation":10026,"user_id":3469489,"accept_rate":43,"display_name":"Shaaban Ebrahim"},"score":0,"creation_date":1513756446,"post_id":47900942,"comment_id":82768902,"body_markdown":"I found KEY_SERIALIZER_CLASS_CONFIG and KEY_SERIALIZER_CLASS_DOC .but there is no relation between them and exception as i think","body":"I found KEY_SERIALIZER_CLASS_CONFIG and KEY_SERIALIZER_CLASS_DOC .but there is no relation between them and exception as i think"},{"owner":{"account_id":2671330,"reputation":183376,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"score":0,"creation_date":1513756584,"post_id":47900942,"comment_id":82768960,"body_markdown":"`ProducerConfig` is the wrong class to look at","body":"<code>ProducerConfig</code> is the wrong class to look at"},{"owner":{"account_id":1288095,"reputation":169316,"user_id":1240763,"display_name":"Gary Russell"},"score":0,"creation_date":1513782807,"post_id":47900942,"comment_id":82785581,"body_markdown":"&gt;`Failed to update   metadata after 60000 ms.` - often simply means the broker is not running.","body":"&gt;<code>Failed to update   metadata after 60000 ms.</code> - often simply means the broker is not running."}],"answers":[{"tags":[],"owner":{"account_id":2671330,"reputation":183376,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1513756516,"creation_date":1513756516,"answer_id":47901214,"question_id":47900942,"body_markdown":"Use the method that includes a key\r\n\r\n    kafkaTemplate.send(topic, key, payload);\r\n\r\nIts not clear what key value you want to use, but it should evenly distribute amongst the partition count of the topic. For example, a random number within the range of the partition count. ","title":"TimeoutException thrown when sending to topic","body":"<p>Use the method that includes a key</p>\n\n<pre><code>kafkaTemplate.send(topic, key, payload);\n</code></pre>\n\n<p>Its not clear what key value you want to use, but it should evenly distribute amongst the partition count of the topic. For example, a random number within the range of the partition count. </p>\n"},{"tags":[],"owner":{"account_id":6731745,"reputation":145,"user_id":5187813,"display_name":"Santosh Rachakonda"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1546467412,"creation_date":1546467412,"answer_id":54013892,"question_id":47900942,"body_markdown":"That means your brokers are not running.\r\ncheck server.log and restart broker if necessary ","title":"TimeoutException thrown when sending to topic","body":"<p>That means your brokers are not running.\ncheck server.log and restart broker if necessary </p>\n"},{"tags":[],"owner":{"account_id":2328053,"reputation":331,"user_id":2042065,"display_name":"Niket Shah"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1568269091,"creation_date":1568269091,"answer_id":57900746,"question_id":47900942,"body_markdown":"There are few possibility for this type of error. \r\n\r\n 1. Kafka broker is not reachable using configured port.\r\n    - For this try to telnet using ```telnet localhost 9092``` if you are getting output that means kafka borker is running\r\n 2.  Check kafka-client version that spring-boot uses is the same as your kafka version. If the version mismatch, kafka may ne able to send data to topic\r\n\r\n 3.  Sometimes it take time for the brokers to know about the newly created topic. So, the producers might fail with the error ```Failed to update metadata after 60000 ms.``` To get around this create kafka manually using kafka command line options. \r\n\r\n 4. Listener configuration of server.properties not working.\r\n \r\nYou can try this as well\r\n\r\n - change the &quot;bootstrap.servers&quot; property or the --broker-list option to 0.0.0.0:9092\r\n\r\n - change the server.properties in 2 properties\r\n    * listeners = PLAINTEXT://your.host.name:9092 to listeners=PLAINTEXT://:9092\r\n    * advertised.listeners=PLAINTEXT://your.host.name:9092 to advertised.listeners=PLAINTEXT://localhost:9092\r\n\r\nHope that helps!\r\n ","title":"TimeoutException thrown when sending to topic","body":"<p>There are few possibility for this type of error. </p>\n\n<ol>\n<li>Kafka broker is not reachable using configured port.\n\n<ul>\n<li>For this try to telnet using <code>telnet localhost 9092</code> if you are getting output that means kafka borker is running</li>\n</ul></li>\n<li><p>Check kafka-client version that spring-boot uses is the same as your kafka version. If the version mismatch, kafka may ne able to send data to topic</p></li>\n<li><p>Sometimes it take time for the brokers to know about the newly created topic. So, the producers might fail with the error <code>Failed to update metadata after 60000 ms.</code> To get around this create kafka manually using kafka command line options. </p></li>\n<li><p>Listener configuration of server.properties not working.</p></li>\n</ol>\n\n<p>You can try this as well</p>\n\n<ul>\n<li><p>change the \"bootstrap.servers\" property or the --broker-list option to 0.0.0.0:9092</p></li>\n<li><p>change the server.properties in 2 properties</p>\n\n<ul>\n<li>listeners = PLAINTEXT://your.host.name:9092 to listeners=PLAINTEXT://:9092</li>\n<li>advertised.listeners=PLAINTEXT://your.host.name:9092 to advertised.listeners=PLAINTEXT://localhost:9092</li>\n</ul></li>\n</ul>\n\n<p>Hope that helps!</p>\n"}],"owner":{"account_id":4239064,"reputation":10026,"user_id":3469489,"accept_rate":43,"display_name":"Shaaban Ebrahim"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":9778,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":3,"score":3,"last_activity_date":1699952535,"creation_date":1513755296,"question_id":47900942,"body_markdown":"\r\ni have made sender class using kafkatemplate bean to send payload to topic \r\nwith some configuration in SenderConfiguration class .\r\n\r\n**Sender** Class \r\n\r\n    @Component\r\n    public class Sender {\r\n\t\tprivate static final Logger LOGGER = (Logger)  LoggerFactory.getLogger(Sender.class);\r\n\r\n\t\t@Autowired\r\n\t\tprivate KafkaTemplate&lt;String, String&gt;   kafkaTemplate;\r\n\r\n\t\tpublic void send(String topic, String payload) {\r\n\t\t\tLOGGER.info(&quot;sending payload=&#39;{}&#39; to topic=&#39;{}&#39;&quot;, payload, topic);\r\n\r\n\t\t\tkafkaTemplate.send(topic, &quot;1&quot;, payload);\r\n\t\t}\r\n\t}\r\n\r\n, **senderConfiguration**  class \r\n\r\n    @Configuration\r\n    public class SenderConfig {\r\n\r\n\t\t@Value(&quot;${kafka.bootstrap-servers}&quot;)\r\n\t\tprivate String bootstrapServers;\r\n\r\n\t\t@Bean\r\n\t\tpublic Map&lt;String, Object&gt; producerConfigs() {\r\n\t\t\tMap&lt;String, Object&gt; props = new HashMap&lt;&gt;();\r\n\t\t\t// list of host:port pairs used for establishing the initial connections to the Kakfa cluster\r\n\t\t\tprops.put(ProducerConfig.BOOTSTRAP_SERVERS_CONFIG, bootstrapServers);\r\n\t\t\tprops.put(ProducerConfig.KEY_SERIALIZER_CLASS_CONFIG, StringSerializer.class);\r\n\t\t\tprops.put(ProducerConfig.VALUE_SERIALIZER_CLASS_CONFIG, StringSerializer.class);\r\n\r\n\t\t\treturn props;\r\n\t\t}\r\n\r\n\t\t@Bean\r\n\t\tpublic ProducerFactory&lt;String, String&gt; producerFactory() {\r\n\t\t\treturn new DefaultKafkaProducerFactory&lt;&gt;(producerConfigs());\r\n\t\t}\r\n\r\n\t\t@Bean\r\n\t\tpublic KafkaTemplate&lt;String, String&gt; kafkaTemplate() {\r\n\t\t\treturn new KafkaTemplate&lt;&gt;(producerFactory());\r\n\t\t}\r\n\r\n\t\t@Bean\r\n\t\tpublic Sender sender() {\r\n\t\t\treturn new Sender();\r\n\t\t}\r\n\t}\r\n\r\n\r\nthe problem is in sending not in producing \r\n\r\nhere the application.yml file properties \r\n\r\n    kafka:\r\n       bootstrap-servers: localhost:9092\r\n    topic:\r\n       helloworld: helloworld.t\r\n\r\n\r\nand simply controller containing \r\n\r\n    @RestController\r\n    public class Controller {\r\n\t\tprotected final static String HELLOWORLD_TOPIC = &quot;helloworld.t&quot;;\r\n\t\t\r\n\t\t@Autowired\r\n\t\tprivate Sender sender;\r\n    \r\n\t\t@RequestMapping(&quot;/send&quot;)\r\n\t\tpublic String SendMessage() {\r\n\r\n\t\t\tsender.send(HELLOWORLD_TOPIC, &quot;message&quot;);\r\n\r\n\t\t\treturn &quot;success&quot;;\r\n\t\t}\r\n    }\r\n\r\n\r\n\r\nand the exception is \r\n\r\n    2017-12-20 09:58:04.645  INFO 10816 --- [nio-7060-exec-1] o.a.kafka.common.utils.AppInfoParser     : Kafka version : 0.10.1.1\r\n    2017-12-20 09:58:04.645  INFO 10816 --- [nio-7060-exec-1] o.a.kafka.common.utils.AppInfoParser     : Kafka commitId : f10ef2720b03b247\r\n    2017-12-20 09:59:04.654 ERROR 10816 --- [nio-7060-exec-1] o.s.k.support.LoggingProducerListener    : Exception thrown when sending a      message with key=&#39;1&#39; and payload=&#39;message&#39; to topic helloworld.t:\r\n\r\n    org.apache.kafka.common.errors.TimeoutException: Failed to update   metadata after 60000 ms.","title":"TimeoutException thrown when sending to topic","body":"<p>i have made sender class using kafkatemplate bean to send payload to topic \nwith some configuration in SenderConfiguration class .</p>\n\n<p><strong>Sender</strong> Class </p>\n\n<pre><code>@Component\npublic class Sender {\n    private static final Logger LOGGER = (Logger)  LoggerFactory.getLogger(Sender.class);\n\n    @Autowired\n    private KafkaTemplate&lt;String, String&gt;   kafkaTemplate;\n\n    public void send(String topic, String payload) {\n        LOGGER.info(\"sending payload='{}' to topic='{}'\", payload, topic);\n\n        kafkaTemplate.send(topic, \"1\", payload);\n    }\n}\n</code></pre>\n\n<p>, <strong>senderConfiguration</strong>  class </p>\n\n<pre><code>@Configuration\npublic class SenderConfig {\n\n    @Value(\"${kafka.bootstrap-servers}\")\n    private String bootstrapServers;\n\n    @Bean\n    public Map&lt;String, Object&gt; producerConfigs() {\n        Map&lt;String, Object&gt; props = new HashMap&lt;&gt;();\n        // list of host:port pairs used for establishing the initial connections to the Kakfa cluster\n        props.put(ProducerConfig.BOOTSTRAP_SERVERS_CONFIG, bootstrapServers);\n        props.put(ProducerConfig.KEY_SERIALIZER_CLASS_CONFIG, StringSerializer.class);\n        props.put(ProducerConfig.VALUE_SERIALIZER_CLASS_CONFIG, StringSerializer.class);\n\n        return props;\n    }\n\n    @Bean\n    public ProducerFactory&lt;String, String&gt; producerFactory() {\n        return new DefaultKafkaProducerFactory&lt;&gt;(producerConfigs());\n    }\n\n    @Bean\n    public KafkaTemplate&lt;String, String&gt; kafkaTemplate() {\n        return new KafkaTemplate&lt;&gt;(producerFactory());\n    }\n\n    @Bean\n    public Sender sender() {\n        return new Sender();\n    }\n}\n</code></pre>\n\n<p>the problem is in sending not in producing </p>\n\n<p>here the application.yml file properties </p>\n\n<pre><code>kafka:\n   bootstrap-servers: localhost:9092\ntopic:\n   helloworld: helloworld.t\n</code></pre>\n\n<p>and simply controller containing </p>\n\n<pre><code>@RestController\npublic class Controller {\n    protected final static String HELLOWORLD_TOPIC = \"helloworld.t\";\n\n    @Autowired\n    private Sender sender;\n\n    @RequestMapping(\"/send\")\n    public String SendMessage() {\n\n        sender.send(HELLOWORLD_TOPIC, \"message\");\n\n        return \"success\";\n    }\n}\n</code></pre>\n\n<p>and the exception is </p>\n\n<pre><code>2017-12-20 09:58:04.645  INFO 10816 --- [nio-7060-exec-1] o.a.kafka.common.utils.AppInfoParser     : Kafka version : 0.10.1.1\n2017-12-20 09:58:04.645  INFO 10816 --- [nio-7060-exec-1] o.a.kafka.common.utils.AppInfoParser     : Kafka commitId : f10ef2720b03b247\n2017-12-20 09:59:04.654 ERROR 10816 --- [nio-7060-exec-1] o.s.k.support.LoggingProducerListener    : Exception thrown when sending a      message with key='1' and payload='message' to topic helloworld.t:\n\norg.apache.kafka.common.errors.TimeoutException: Failed to update   metadata after 60000 ms.\n</code></pre>\n"},{"tags":["java","c","sdk","java-native-interface","jna"],"answers":[{"tags":[],"owner":{"account_id":1187908,"reputation":8617,"user_id":1161484,"accept_rate":93,"display_name":"Daniel Widdis"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1699910041,"creation_date":1699910041,"answer_id":77476920,"question_id":77475253,"body_markdown":"I see three possible problems:\r\n\r\n1. JNA needs enough type information to be able to allocate the correct number of bytes in structures (for memory allocation) or method/function signatures (for the stack).  \r\n\r\n    Your use of `Object` to map the 6th argument in `MAIDEntryPoint()` is most certainly wrong.  JNA has no way to know how many bytes that takes. Since that argument is actually `LPNKFUNC pfnComplete` it looks like a `Pointer` would be the correct mapping for it.\r\n\r\n2. Another possibility is if you&#39;ve incorrectly mapped (or allocated) the `NkMAIDObject` type that is the first argument to `MAIDEntryPoint()`.  You haven&#39;t shown us the mapping, but it could very well be an incorrect allocation.\r\n\r\n3. Finally you indicate the native allocation is done with ` malloc(stEnum.ulElements * stEnum.wPhysicalBytes)` and state \r\n&gt; the parameters `nkMAIDEnum.ulElements` and `nkMAIDEnum.wPhysicalBytes` are number not equals to 0 or null.\r\n\r\n - However, you don&#39;t show where these are assigned.  You simply define a new structure with `new NkMAIDEnum()` and do not assign any values to `.ulElements` or `.wPhysicalBytes` so they are, in fact, initialized to zero.  (Unless you have code you aren&#39;t showing us.)","title":"SDK Nikon C with JNA","body":"<p>I see three possible problems:</p>\n<ol>\n<li><p>JNA needs enough type information to be able to allocate the correct number of bytes in structures (for memory allocation) or method/function signatures (for the stack).</p>\n<p>Your use of <code>Object</code> to map the 6th argument in <code>MAIDEntryPoint()</code> is most certainly wrong.  JNA has no way to know how many bytes that takes. Since that argument is actually <code>LPNKFUNC pfnComplete</code> it looks like a <code>Pointer</code> would be the correct mapping for it.</p>\n</li>\n<li><p>Another possibility is if you've incorrectly mapped (or allocated) the <code>NkMAIDObject</code> type that is the first argument to <code>MAIDEntryPoint()</code>.  You haven't shown us the mapping, but it could very well be an incorrect allocation.</p>\n</li>\n<li><p>Finally you indicate the native allocation is done with <code> malloc(stEnum.ulElements * stEnum.wPhysicalBytes)</code> and state</p>\n</li>\n</ol>\n<blockquote>\n<p>the parameters <code>nkMAIDEnum.ulElements</code> and <code>nkMAIDEnum.wPhysicalBytes</code> are number not equals to 0 or null.</p>\n</blockquote>\n<ul>\n<li>However, you don't show where these are assigned.  You simply define a new structure with <code>new NkMAIDEnum()</code> and do not assign any values to <code>.ulElements</code> or <code>.wPhysicalBytes</code> so they are, in fact, initialized to zero.  (Unless you have code you aren't showing us.)</li>\n</ul>\n"}],"owner":{"account_id":18230880,"reputation":37,"user_id":13269835,"display_name":"Silvia Francia"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":53,"favorite_count":0,"down_vote_count":2,"up_vote_count":1,"answer_count":1,"score":-1,"last_activity_date":1699952326,"creation_date":1699891734,"question_id":77475253,"body_markdown":"I&#39;m working on a wrap between a Nikon SDK written in C and a Java program with JNA libruary.\r\n\r\nAll the process ended in a EntryPoint (MAIDEntryPoint) that is inside a dll.\r\nThe signature of this EntryPoint in C is:\r\n\r\n\r\n```\r\nSLONG CallMAIDEntryPoint( \r\n\tLPNkMAIDObject\tpObject,\t// module, source, item, or data object\r\n\tULONG\t\tulCommand,\t// Command, one of eNkMAIDCommand\r\n\tULONG\t\tulParam,        // parameter for the command\r\n\tULONG\t\tulDataType,\t// Data type, one of eNkMAIDDataType\r\n\tNKPARAM\t        data,           // Pointer or long integer\r\n\tLPNKFUNC\tpfnComplete,\t// Completion function, may be NULL\r\n\tNKREF\t\trefComplete )\t// Value passed to pfnComplete\r\n```\r\n\r\nThe `LPNkMAIDObject\tpObject` is a struct defined in C as:\r\n```\r\ntypedef struct tagNkMAIDObject\r\n{\r\n\tULONG\tulType;\t\t\t// One of eNkMAIDObjectType\r\n\tULONG\tulID;\r\n\tNKREF\trefClient;\r\n\tNKREF\trefModule;\r\n} NkMAIDObject, FAR* LPNkMAIDObject;\r\n```\r\n\r\n\r\nthe value I&#39;m interesting on is the `NKPARAM data` that is this next struct:\r\n\r\n\r\n```\r\n//stEnum Struct\r\n\r\ntypedef struct tagNkMAIDEnum\r\n{\r\n\tULONG\t\tulType;\t\t\t// one of eNkMAIDArrayType\r\n\tULONG\t\tulElements;\t\t// total number of elements\r\n\tULONG\t\tulValue;\t\t// current index\r\n\tULONG\t\tulDefault;\t\t// default index\r\n\tSWORD\t\twPhysicalBytes;\t        // bytes per element\r\n\tLPVOID\tpData;\t\t\t\t// allocated by the client\r\n} NkMAIDEnum, FAR* LPNkMAIDEnum;\r\n```\r\n\r\nand the scope of the EntryPoint is to populate the argument `LPVOID pData`.\r\nThe `pData` argument is a pointer that is allocate in this way:\r\n\r\n```\r\nNkMAIDEnum stEnum;\r\nstEnum.pData = malloc(stEnum.ulElements * stEnum.wPhysicalBytes);\r\n```\r\n\r\nwhat I done is to &quot;translate&quot; whit jna the struct and the EntryPoint, that are this:\r\n\r\n\r\n```\r\n//EntryPoint\r\nint MAIDEntryPoint(NkMAIDObject pObject,\r\n                   int kNkMAIDCommand_capGetArray,\r\n                   int ulCapID,\r\n                   int kNkMAIDDataType_enumPtr,\r\n                   NkMAIDEnum nkMAIDEnum,\r\n                   Object o,\r\n                   int i);\r\n```\r\n\r\nAnd the Struct will be defined as a Java Class:\r\n\r\n```\r\n@Structure.FieldOrder({&quot;ulType&quot;,&quot;ulID&quot;,&quot;refClient&quot;,&quot;refModule&quot;})\r\npublic class NkMAIDObject extends Structure {\r\n\r\n    public NativeLong ulType;   // One of eNkMAIDObjectType\r\n    public NativeLong ulID;\r\n    public TagRefObj.ByReference refClient;\r\n    //public Pointer refClient;\r\n    public Pointer refModule;\r\n}\r\n```\r\n\r\n```\r\n@Structure.FieldOrder({&quot;ulType&quot;, &quot;ulElements&quot;, &quot;ulValue&quot;, &quot;ulDefault&quot;, &quot;wPhysicalBytes&quot;, &quot;pData&quot;})\r\npublic class NkMAIDEnum extends Structure {\r\n    public NativeLong ulType;\r\n    public NativeLong ulElements;\r\n    public NativeLong ulValue;\r\n    public NativeLong ulDefault;\r\n    public short wPhysicalBytes;\r\n    public Pointer pData;\r\n}\r\n```\r\n\r\nAt this point I initializa the `Pointer pData` as:\r\n\r\n\r\n```\r\nNkMAIDEnum nkMAIDEnum = new NkMAIDEnum ();\r\nnkMAIDEnum.pData = new Memory(nkMAIDEnum.ulElements.longValue()*nkMAIDEnum.wPhysicalBytes);\r\n\r\nnResult = INSTANCE.MAIDEntryPoint(\r\n                   pRefMod.pObject,                \r\n                   kNkMAIDCommand_CapGetArray,     \r\n                   ulCapID,                        \r\n                   kNkMAIDDataType_EnumPtr,        \r\n                   nkMAIDEnum,                     \r\n                   null,\r\n                   0);\r\n```\r\n\r\nAnd then pass it to the EntryPoint, but I receive an Invalid Access Memory .\r\nI think the problem is how to initialize the pData in the Java-JNA part or also what kind of data should be the pData in the class NkMAIDEnum \r\n\r\nFor instance, I don&#39;t care about the other EntryPoint&#39;s parameter because they&#39;re right, and alto the parameters `nkMAIDEnum.ulElements` and `nkMAIDEnum.wPhysicalBytes` are number not equals to 0 or null, they are respectively `nkMAIDEnum.ulElements = 1` and `nkMAIDEnum.wPhysicalBytes =  4` they are initialize in a previously EntryPoint, that is exactly the same as the one written here but instade of initialize the `pData`, it initialize the `nkMAIDEnum.ulElements` and `nkMAIDEnum.wPhysicalBytes`.\r\n\r\nPlease help me to understan where I&#39;m wrong, I&#39;m stuck","title":"SDK Nikon C with JNA","body":"<p>I'm working on a wrap between a Nikon SDK written in C and a Java program with JNA libruary.</p>\n<p>All the process ended in a EntryPoint (MAIDEntryPoint) that is inside a dll.\nThe signature of this EntryPoint in C is:</p>\n<pre><code>SLONG CallMAIDEntryPoint( \n    LPNkMAIDObject  pObject,    // module, source, item, or data object\n    ULONG       ulCommand,  // Command, one of eNkMAIDCommand\n    ULONG       ulParam,        // parameter for the command\n    ULONG       ulDataType, // Data type, one of eNkMAIDDataType\n    NKPARAM         data,           // Pointer or long integer\n    LPNKFUNC    pfnComplete,    // Completion function, may be NULL\n    NKREF       refComplete )   // Value passed to pfnComplete\n</code></pre>\n<p>The <code>LPNkMAIDObject pObject</code> is a struct defined in C as:</p>\n<pre><code>typedef struct tagNkMAIDObject\n{\n    ULONG   ulType;         // One of eNkMAIDObjectType\n    ULONG   ulID;\n    NKREF   refClient;\n    NKREF   refModule;\n} NkMAIDObject, FAR* LPNkMAIDObject;\n</code></pre>\n<p>the value I'm interesting on is the <code>NKPARAM data</code> that is this next struct:</p>\n<pre><code>//stEnum Struct\n\ntypedef struct tagNkMAIDEnum\n{\n    ULONG       ulType;         // one of eNkMAIDArrayType\n    ULONG       ulElements;     // total number of elements\n    ULONG       ulValue;        // current index\n    ULONG       ulDefault;      // default index\n    SWORD       wPhysicalBytes;         // bytes per element\n    LPVOID  pData;              // allocated by the client\n} NkMAIDEnum, FAR* LPNkMAIDEnum;\n</code></pre>\n<p>and the scope of the EntryPoint is to populate the argument <code>LPVOID pData</code>.\nThe <code>pData</code> argument is a pointer that is allocate in this way:</p>\n<pre><code>NkMAIDEnum stEnum;\nstEnum.pData = malloc(stEnum.ulElements * stEnum.wPhysicalBytes);\n</code></pre>\n<p>what I done is to &quot;translate&quot; whit jna the struct and the EntryPoint, that are this:</p>\n<pre><code>//EntryPoint\nint MAIDEntryPoint(NkMAIDObject pObject,\n                   int kNkMAIDCommand_capGetArray,\n                   int ulCapID,\n                   int kNkMAIDDataType_enumPtr,\n                   NkMAIDEnum nkMAIDEnum,\n                   Object o,\n                   int i);\n</code></pre>\n<p>And the Struct will be defined as a Java Class:</p>\n<pre><code>@Structure.FieldOrder({&quot;ulType&quot;,&quot;ulID&quot;,&quot;refClient&quot;,&quot;refModule&quot;})\npublic class NkMAIDObject extends Structure {\n\n    public NativeLong ulType;   // One of eNkMAIDObjectType\n    public NativeLong ulID;\n    public TagRefObj.ByReference refClient;\n    //public Pointer refClient;\n    public Pointer refModule;\n}\n</code></pre>\n<pre><code>@Structure.FieldOrder({&quot;ulType&quot;, &quot;ulElements&quot;, &quot;ulValue&quot;, &quot;ulDefault&quot;, &quot;wPhysicalBytes&quot;, &quot;pData&quot;})\npublic class NkMAIDEnum extends Structure {\n    public NativeLong ulType;\n    public NativeLong ulElements;\n    public NativeLong ulValue;\n    public NativeLong ulDefault;\n    public short wPhysicalBytes;\n    public Pointer pData;\n}\n</code></pre>\n<p>At this point I initializa the <code>Pointer pData</code> as:</p>\n<pre><code>NkMAIDEnum nkMAIDEnum = new NkMAIDEnum ();\nnkMAIDEnum.pData = new Memory(nkMAIDEnum.ulElements.longValue()*nkMAIDEnum.wPhysicalBytes);\n\nnResult = INSTANCE.MAIDEntryPoint(\n                   pRefMod.pObject,                \n                   kNkMAIDCommand_CapGetArray,     \n                   ulCapID,                        \n                   kNkMAIDDataType_EnumPtr,        \n                   nkMAIDEnum,                     \n                   null,\n                   0);\n</code></pre>\n<p>And then pass it to the EntryPoint, but I receive an Invalid Access Memory .\nI think the problem is how to initialize the pData in the Java-JNA part or also what kind of data should be the pData in the class NkMAIDEnum</p>\n<p>For instance, I don't care about the other EntryPoint's parameter because they're right, and alto the parameters <code>nkMAIDEnum.ulElements</code> and <code>nkMAIDEnum.wPhysicalBytes</code> are number not equals to 0 or null, they are respectively <code>nkMAIDEnum.ulElements = 1</code> and <code>nkMAIDEnum.wPhysicalBytes =  4</code> they are initialize in a previously EntryPoint, that is exactly the same as the one written here but instade of initialize the <code>pData</code>, it initialize the <code>nkMAIDEnum.ulElements</code> and <code>nkMAIDEnum.wPhysicalBytes</code>.</p>\n<p>Please help me to understan where I'm wrong, I'm stuck</p>\n"},{"tags":["java","spring-boot","stripe-payments","payment-method"],"comments":[{"owner":{"account_id":25111109,"reputation":1244,"user_id":18960736,"display_name":"yuting"},"score":0,"creation_date":1699946323,"post_id":77478566,"comment_id":136591209,"body_markdown":"As part of PCI compliance, your system is only allowed to pass raw card details if you complete [SAQ-D](https://stripe.com/docs/security/guide#validating-pci-compliance). If you don&#39;t, I&#39;d recommend using stripe.js to collect the payment method details using Payment Element with the guide [here](https://stripe.com/docs/payments/save-and-reuse?platform=web&amp;ui=elements). Setup Intent flow will create a payment method and attach to an existing customer.","body":"As part of PCI compliance, your system is only allowed to pass raw card details if you complete <a href=\"https://stripe.com/docs/security/guide#validating-pci-compliance\" rel=\"nofollow noreferrer\">SAQ-D</a>. If you don&#39;t, I&#39;d recommend using stripe.js to collect the payment method details using Payment Element with the guide <a href=\"https://stripe.com/docs/payments/save-and-reuse?platform=web&amp;ui=elements\" rel=\"nofollow noreferrer\">here</a>. Setup Intent flow will create a payment method and attach to an existing customer."},{"owner":{"account_id":13927974,"reputation":13,"user_id":10056787,"display_name":"Neel Mani"},"score":0,"creation_date":1699961131,"post_id":77478566,"comment_id":136593567,"body_markdown":"thanks. But do you meant that first collect the payment method details using Payment Element from front end and then in the server side create setup intent flow.\nOR both are separate paths.?","body":"thanks. But do you meant that first collect the payment method details using Payment Element from front end and then in the server side create setup intent flow. OR both are separate paths.?"}],"answers":[{"tags":[],"owner":{"account_id":29251325,"reputation":1013,"user_id":22410625,"display_name":"Lucky2501"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1699951946,"creation_date":1699951946,"answer_id":77479268,"question_id":77478566,"body_markdown":"&gt;My Question here is that after getting the token from client how do i create a payment method out of it and attach it to an existing customer.\r\n\r\nI don&#39;t really understand the question, the token and the payment method aren&#39;t different objects here really, but I understand the confusion.\r\n\r\nIt&#39;s worth mentioning that Stripe does have a function you can call on the frontend to [create a Payment Method][1].  \r\nNow, if I recall correctly, you still can&#39;t hardcode the card details with it, it will ask you to use Elements instead, but it&#39;s not really relevant because this function is really not used beyond very specific [use-cases][2].\r\n\r\nThe reason why is that collecting a payment method isn&#39;t just about collecting the card details, you also need to perform additional steps (i.e. authentication) to authorize your application to charge the saved card later. This is something that this function doesn&#39;t do, hence why it shouldn&#39;t be used unless you have some logic to perform these actions later.\r\n\r\nIf you want to collect payment methods for future use and the above documentation isn&#39;t relevant, then you have two options:  \r\n-Save the payment method without a payment - using a [Setup Intent][3].  \r\nThis would automatically create a payment method for you when it&#39;s successfully confirmed. If you add a `customer` to it, it would automatically attach it to them as well.\r\n\r\n-Save the payment method with a payment - using a [Payment Intent][4].  \r\nSame logic applies here, except there&#39;s a charge in the flow as well.\r\n\r\nThese are the methods you should use, rather than creating Payment Methods, as they&#39;ll automatically perform any additional steps required to allow you to use the payment method later.\r\n\r\n\r\n  [1]: https://stripe.com/docs/js/payment_methods/create_payment_method\r\n  [2]: https://stripe.com/docs/payments/build-a-two-step-confirmation#create-pm\r\n  [3]: https://stripe.com/docs/payments/save-and-reuse\r\n  [4]: https://stripe.com/docs/payments/save-during-payment","title":"Create a payment method in stripe","body":"<blockquote>\n<p>My Question here is that after getting the token from client how do i create a payment method out of it and attach it to an existing customer.</p>\n</blockquote>\n<p>I don't really understand the question, the token and the payment method aren't different objects here really, but I understand the confusion.</p>\n<p>It's worth mentioning that Stripe does have a function you can call on the frontend to <a href=\"https://stripe.com/docs/js/payment_methods/create_payment_method\" rel=\"nofollow noreferrer\">create a Payment Method</a>.<br />\nNow, if I recall correctly, you still can't hardcode the card details with it, it will ask you to use Elements instead, but it's not really relevant because this function is really not used beyond very specific <a href=\"https://stripe.com/docs/payments/build-a-two-step-confirmation#create-pm\" rel=\"nofollow noreferrer\">use-cases</a>.</p>\n<p>The reason why is that collecting a payment method isn't just about collecting the card details, you also need to perform additional steps (i.e. authentication) to authorize your application to charge the saved card later. This is something that this function doesn't do, hence why it shouldn't be used unless you have some logic to perform these actions later.</p>\n<p>If you want to collect payment methods for future use and the above documentation isn't relevant, then you have two options:<br />\n-Save the payment method without a payment - using a <a href=\"https://stripe.com/docs/payments/save-and-reuse\" rel=\"nofollow noreferrer\">Setup Intent</a>.<br />\nThis would automatically create a payment method for you when it's successfully confirmed. If you add a <code>customer</code> to it, it would automatically attach it to them as well.</p>\n<p>-Save the payment method with a payment - using a <a href=\"https://stripe.com/docs/payments/save-during-payment\" rel=\"nofollow noreferrer\">Payment Intent</a>.<br />\nSame logic applies here, except there's a charge in the flow as well.</p>\n<p>These are the methods you should use, rather than creating Payment Methods, as they'll automatically perform any additional steps required to allow you to use the payment method later.</p>\n"}],"owner":{"account_id":13927974,"reputation":13,"user_id":10056787,"display_name":"Neel Mani"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":83,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77479268,"answer_count":1,"score":0,"last_activity_date":1699951946,"creation_date":1699943601,"question_id":77478566,"body_markdown":"I wish to create a payment method in stripe and attach it to a existing customer using java -spring boot.\r\nThe  [stripe docs](https://stripe.com/docs/api/payment_methods/create?shell=true&amp;api=true&amp;resource=payment_methods&amp;action=create)\r\n\r\nshares an example code for creating a payment method using a card. \r\nThe code is \r\n```\r\n\r\nPaymentMethodCreateParams params =\r\n  PaymentMethodCreateParams.builder()\r\n    .setType(PaymentMethodCreateParams.Type.CARD)\r\n    .setCard(\r\n      PaymentMethodCreateParams.Card.builder()\r\n        .setNumber(&quot;4242424242424242&quot;)\r\n        .setExpMonth(8L)\r\n        .setExpYear(2026L)\r\n        .setCvc(&quot;314&quot;)\r\n        .build()\r\n    )\r\n    .build();\r\nPaymentMethod paymentMethod = PaymentMethod.create(params);\r\n```\r\nBut upon running this code, we get response \r\n\r\n\r\n```\r\n{\r\n  &quot;error&quot;: {\r\n    &quot;message&quot;: &quot;Sending credit card numbers directly to the Stripe API is generally unsafe. We suggest you use test tokens that map to the test card you are using, see https://stripe.com/docs/testing. To enable raw card data APIs in test mode, see https://support.stripe.com/questions/enabling-access-to-raw-card-data-apis.&quot;,\r\n    &quot;request_log_url&quot;: &quot;https://dashboard.stripe.com/test/logs/req_9c6QitRqUgqM1i?t=1699942446&quot;,\r\n    &quot;type&quot;: &quot;invalid_request_error&quot;\r\n  }\r\n}\r\n```\r\n\r\n\r\nUpon reading further i understood that **we need to accept card details in front-end using stripe.js and get a card token which we will pass to server side**.\r\n\r\n**My Question here is that after getting the token from client how do i create a payment method out of it and attach it to an existing customer.**\r\nAny help in this direction would be greatly appreciated.\r\n","title":"Create a payment method in stripe","body":"<p>I wish to create a payment method in stripe and attach it to a existing customer using java -spring boot.\nThe  <a href=\"https://stripe.com/docs/api/payment_methods/create?shell=true&amp;api=true&amp;resource=payment_methods&amp;action=create\" rel=\"nofollow noreferrer\">stripe docs</a></p>\n<p>shares an example code for creating a payment method using a card.\nThe code is</p>\n<pre><code>\nPaymentMethodCreateParams params =\n  PaymentMethodCreateParams.builder()\n    .setType(PaymentMethodCreateParams.Type.CARD)\n    .setCard(\n      PaymentMethodCreateParams.Card.builder()\n        .setNumber(&quot;4242424242424242&quot;)\n        .setExpMonth(8L)\n        .setExpYear(2026L)\n        .setCvc(&quot;314&quot;)\n        .build()\n    )\n    .build();\nPaymentMethod paymentMethod = PaymentMethod.create(params);\n</code></pre>\n<p>But upon running this code, we get response</p>\n<pre><code>{\n  &quot;error&quot;: {\n    &quot;message&quot;: &quot;Sending credit card numbers directly to the Stripe API is generally unsafe. We suggest you use test tokens that map to the test card you are using, see https://stripe.com/docs/testing. To enable raw card data APIs in test mode, see https://support.stripe.com/questions/enabling-access-to-raw-card-data-apis.&quot;,\n    &quot;request_log_url&quot;: &quot;https://dashboard.stripe.com/test/logs/req_9c6QitRqUgqM1i?t=1699942446&quot;,\n    &quot;type&quot;: &quot;invalid_request_error&quot;\n  }\n}\n</code></pre>\n<p>Upon reading further i understood that <strong>we need to accept card details in front-end using stripe.js and get a card token which we will pass to server side</strong>.</p>\n<p><strong>My Question here is that after getting the token from client how do i create a payment method out of it and attach it to an existing customer.</strong>\nAny help in this direction would be greatly appreciated.</p>\n"},{"tags":["java","spring-boot","hibernate","jpa","enums"],"comments":[{"owner":{"account_id":4470050,"reputation":68258,"user_id":3636601,"accept_rate":75,"display_name":"Jens"},"score":0,"creation_date":1699943547,"post_id":77478432,"comment_id":136590880,"body_markdown":"You can’t use the enum in a native query. Try to use jpql or the name of the enum as string.","body":"You can’t use the enum in a native query. Try to use jpql or the name of the enum as string."},{"owner":{"account_id":28730357,"reputation":73,"user_id":22002449,"display_name":"dracile"},"score":0,"creation_date":1699944088,"post_id":77478432,"comment_id":136590953,"body_markdown":"@Jens how and what changes are required can you please highlight","body":"@Jens how and what changes are required can you please highlight"},{"owner":{"account_id":4470050,"reputation":68258,"user_id":3636601,"accept_rate":75,"display_name":"Jens"},"score":0,"creation_date":1699949864,"post_id":77478432,"comment_id":136591669,"body_markdown":"Remove native=true","body":"Remove native=true"},{"owner":{"account_id":4470050,"reputation":68258,"user_id":3636601,"accept_rate":75,"display_name":"Jens"},"score":1,"creation_date":1699950051,"post_id":77478432,"comment_id":136591702,"body_markdown":"BTW: I would always recommend to not use native queries in spring environment.","body":"BTW: I would always recommend to not use native queries in spring environment."}],"answers":[{"tags":[],"owner":{"account_id":26998458,"reputation":36,"user_id":20560140,"display_name":"JeslynTan"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1699944626,"creation_date":1699944626,"answer_id":77478634,"question_id":77478432,"body_markdown":"Maybe try this on the @Query\r\n\r\n    o.patientType=:#{#patientType?.code()}\r\n\r\ninstead of o.patientType = :patientType\r\n\r\nReference: https://stackoverflow.com/questions/44460394/can-i-use-enum-parameter-into-jparepository-nativequery","title":"Enum value giving jdbcMapping error while using query in springboot","body":"<p>Maybe try this on the @Query</p>\n<pre><code>o.patientType=:#{#patientType?.code()}\n</code></pre>\n<p>instead of o.patientType = :patientType</p>\n<p>Reference: <a href=\"https://stackoverflow.com/questions/44460394/can-i-use-enum-parameter-into-jparepository-nativequery\">Can I use enum parameter into JpaRepository nativeQuery?</a></p>\n"}],"owner":{"account_id":28730357,"reputation":73,"user_id":22002449,"display_name":"dracile"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":86,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"accepted_answer_id":77478634,"answer_count":1,"score":-1,"last_activity_date":1699951553,"creation_date":1699941507,"question_id":77478432,"body_markdown":"My requirement is to find entry by patientId, patientType and DeletedAt, DeletedBy, DeletedByUserType these three should be null \r\n\r\nI used this query but it is not able to map patientType which is a ENUM\r\n\r\nError\r\n```\r\n&quot;An error occurred during data insertion in An error occurred during data insertion in Cannot invoke \\&quot;org.hibernate.metamodel.mapping.JdbcMapping.getJdbcValueBinder()\\&quot; because \\&quot;jdbcMapping\\&quot; is null&quot;\r\n```\r\n\r\nQuery  \r\n```\r\n @Transactional\r\n @Query(value=&quot;SELECT * FROM tb_patient o WHERE o.patientId = :patientId AND o.patientType = :patientType AND o.deletedAt Is Null AND o.deletedBy Is Null AND o.deletedByUserType Is Null &quot;, nativeQuery = true)\r\n\r\n    List&lt;PatientInsurance&gt; findCustomQuery(@Param(&quot;patientId&quot;)String patientId, @Param(&quot;patientType&quot;)PatientTypeEnum patientType);\r\n    \r\n```\r\n\r\nEnum Class\r\n```\r\npublic enum PatientTypeEnum {\r\n    OPG(&quot;OPG&quot;),\r\n    OTS(&quot;OTS&quot;);\r\n    private final String code;\r\n\r\n    PatientTypeEnum(String code) {\r\n        this.code = code;\r\n    }\r\n    public String getCode() {\r\n        return code;\r\n    }\r\n}\r\n\r\n```\r\n\r\nEntity Class\r\n```\r\nprivate class InsuranceEntity{\r\n   @Enumerated(EnumType.STRING)\r\n    @Column(name = &quot;patientType&quot;, length = 3, nullable = false)\r\n    private PatientTypeEnum patientType;\r\n}\r\n```\r\n","title":"Enum value giving jdbcMapping error while using query in springboot","body":"<p>My requirement is to find entry by patientId, patientType and DeletedAt, DeletedBy, DeletedByUserType these three should be null</p>\n<p>I used this query but it is not able to map patientType which is a ENUM</p>\n<p>Error</p>\n<pre><code>&quot;An error occurred during data insertion in An error occurred during data insertion in Cannot invoke \\&quot;org.hibernate.metamodel.mapping.JdbcMapping.getJdbcValueBinder()\\&quot; because \\&quot;jdbcMapping\\&quot; is null&quot;\n</code></pre>\n<p>Query</p>\n<pre><code> @Transactional\n @Query(value=&quot;SELECT * FROM tb_patient o WHERE o.patientId = :patientId AND o.patientType = :patientType AND o.deletedAt Is Null AND o.deletedBy Is Null AND o.deletedByUserType Is Null &quot;, nativeQuery = true)\n\n    List&lt;PatientInsurance&gt; findCustomQuery(@Param(&quot;patientId&quot;)String patientId, @Param(&quot;patientType&quot;)PatientTypeEnum patientType);\n    \n</code></pre>\n<p>Enum Class</p>\n<pre><code>public enum PatientTypeEnum {\n    OPG(&quot;OPG&quot;),\n    OTS(&quot;OTS&quot;);\n    private final String code;\n\n    PatientTypeEnum(String code) {\n        this.code = code;\n    }\n    public String getCode() {\n        return code;\n    }\n}\n\n</code></pre>\n<p>Entity Class</p>\n<pre><code>private class InsuranceEntity{\n   @Enumerated(EnumType.STRING)\n    @Column(name = &quot;patientType&quot;, length = 3, nullable = false)\n    private PatientTypeEnum patientType;\n}\n</code></pre>\n"},{"tags":["java","itext7"],"answers":[{"tags":[],"owner":{"account_id":4297204,"reputation":2499,"user_id":9926179,"display_name":"b.s"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1658254844,"creation_date":1658244290,"answer_id":73039655,"question_id":73039034,"body_markdown":"You&#39;re using the wrong import statement here. Use the following one\r\n\r\n    import com.itextpdf.layout.Document;\r\n\r\nYou&#39;ve only included the `kernel-7.x.x.jar` dependency. `Document` is available in the `layout-7.x.x.jar`. You&#39;ve to include that dependency. If you&#39;ve maven project then you can add all iText7 core dependencies by adding the following dependency\r\n\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;com.itextpdf&lt;/groupId&gt;\r\n      &lt;artifactId&gt;itext7-core&lt;/artifactId&gt;\r\n      &lt;version&gt;${itext.version}&lt;/version&gt;\r\n      &lt;type&gt;pom&lt;/type&gt;\r\n    &lt;/dependency&gt;\r\n\r\nOtherwise you can add the corresponding jars on the classpath.\t\r\n\r\niText7 core consists of `kernel`, `layout`, `sign` etc. For more details you can see the pom having those dependencies included. ex:\r\n[itext7-core-7.1.10.pom][1] \r\n\r\n\r\n  [1]: https://repo.itextsupport.com/ui/repos/tree/PomView/releases/com/itextpdf/itext7-core/7.1.10/itext7-core-7.1.10.pom","title":"Why I cant use Document class from Itext7 properly?","body":"<p>You're using the wrong import statement here. Use the following one</p>\n<pre><code>import com.itextpdf.layout.Document;\n</code></pre>\n<p>You've only included the <code>kernel-7.x.x.jar</code> dependency. <code>Document</code> is available in the <code>layout-7.x.x.jar</code>. You've to include that dependency. If you've maven project then you can add all iText7 core dependencies by adding the following dependency</p>\n<pre><code>&lt;dependency&gt;\n  &lt;groupId&gt;com.itextpdf&lt;/groupId&gt;\n  &lt;artifactId&gt;itext7-core&lt;/artifactId&gt;\n  &lt;version&gt;${itext.version}&lt;/version&gt;\n  &lt;type&gt;pom&lt;/type&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>Otherwise you can add the corresponding jars on the classpath.</p>\n<p>iText7 core consists of <code>kernel</code>, <code>layout</code>, <code>sign</code> etc. For more details you can see the pom having those dependencies included. ex:\n<a href=\"https://repo.itextsupport.com/ui/repos/tree/PomView/releases/com/itextpdf/itext7-core/7.1.10/itext7-core-7.1.10.pom\" rel=\"nofollow noreferrer\">itext7-core-7.1.10.pom</a></p>\n"},{"tags":[],"owner":{"account_id":24017813,"reputation":1,"user_id":18000550,"display_name":"Clinton nahurira1997"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1699950678,"creation_date":1699950678,"answer_id":77479156,"question_id":73039034,"body_markdown":"Keep in mind that Document is a class. After adding the dependency in the pom file and installing it, and also &quot;import com.itextpdf.layout.Document;&quot;\r\nThen change to &quot;Document document = new Document(pdfDocument);&quot;","title":"Why I cant use Document class from Itext7 properly?","body":"<p>Keep in mind that Document is a class. After adding the dependency in the pom file and installing it, and also &quot;import com.itextpdf.layout.Document;&quot;\nThen change to &quot;Document document = new Document(pdfDocument);&quot;</p>\n"}],"owner":{"account_id":25723657,"reputation":17,"user_id":19480325,"display_name":"Szabolcs Fekete"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":293,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1699950678,"creation_date":1658241908,"question_id":73039034,"body_markdown":"    File file = new File(&quot;D/project&quot;);\r\n    PdfWriter writer = new PdfWriter(file);\r\n    PdfDocument pdfDocument = new PdfDocument(writer);\r\n    Document doc = new Document;\r\n\r\n`Unknown class document`\r\nThe import that it offered is strange as well but I didnt have any other choice:\r\n\r\n    import static com.itextpdf.kernel.pdf.PdfName.Document;\r\n\r\nI tried to re-add the Itext library, even different version but it just don&#39;t want to work for me\r\n","title":"Why I cant use Document class from Itext7 properly?","body":"<pre><code>File file = new File(&quot;D/project&quot;);\nPdfWriter writer = new PdfWriter(file);\nPdfDocument pdfDocument = new PdfDocument(writer);\nDocument doc = new Document;\n</code></pre>\n<p><code>Unknown class document</code>\nThe import that it offered is strange as well but I didnt have any other choice:</p>\n<pre><code>import static com.itextpdf.kernel.pdf.PdfName.Document;\n</code></pre>\n<p>I tried to re-add the Itext library, even different version but it just don't want to work for me</p>\n"},{"tags":["java","maven","command-line-interface","cicd","smoke-testing"],"answers":[{"tags":[],"owner":{"account_id":11377012,"reputation":12762,"user_id":8340997,"display_name":"Anish B."},"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1699950568,"creation_date":1695395773,"answer_id":77158875,"question_id":77139236,"body_markdown":"First of all, your repo code is not a Maven project. For the standalone maven batch file to work, your project needs to be completely maven project containing **pom.xml**. \r\n\r\n**Note:** DiffBlue won&#39;t work with Ant based projects.\r\n\r\nSo, consider migrating your Ant based codebase to Maven based codebase to use DiffBlue tool.\r\n\r\n----\r\n\r\nFrom [Official DiffBlue Documentation][1]:\r\n\r\n**Prerequisites**:\r\n\r\n1. **Java 8 Update 351+**, **Java 11.0.17+** or **Java 17.0.5+** are supported at this moment.\r\n\r\n2. Only **Maven 3.2.5+** or **Gradle 4.9+** build tools are supported.\r\n\r\n3. Any project (for use with Diffblue Cover) must compile and run with no failing unit tests. **JUnit** and **TestNG** testing frameworks are supported.\r\n\r\nExample on how DiffBlue works with Maven:\r\n\r\n**Note:** I&#39;m using Mac to show how it works. The process is similar for Windows as well.\r\n\r\n1. Read the documentation from [here][2] to setup DiffBlue CLI.\r\n2. Execute `dcover version` to verify the DiffBlue installed or not.\r\n\r\n       ➜  demo git:(master) ✗ dcover version\r\n          2023.09.01-9200f07-licensed \r\nI have a spring-boot based maven project with this structure below.\r\n\r\n    .\r\n    ├── mvnw\r\n    ├── mvnw.cmd\r\n    ├── pom.xml\r\n    ├── src\r\n    │&#160;&#160; ├── main\r\n    │&#160;&#160; │&#160;&#160; ├── java\r\n    │&#160;&#160; │&#160;&#160; │&#160;&#160; └── com\r\n    │&#160;&#160; │&#160;&#160; │&#160;&#160;     └── example\r\n    │&#160;&#160; │&#160;&#160; │&#160;&#160;         └── demo\r\n    │&#160;&#160; │&#160;&#160; │&#160;&#160;             ├── SampleController.java\r\n    │&#160;&#160; │&#160;&#160; │&#160;&#160;            \r\n    │&#160;&#160; │&#160;&#160; │&#160;&#160;             \r\n    │&#160;&#160; │&#160;&#160; │&#160;&#160;             \r\n    │&#160;&#160; │&#160;&#160; │&#160;&#160;\r\n    │&#160;&#160; │&#160;&#160; │&#160;&#160;             \r\n    │&#160;&#160; │&#160;&#160; └── resources\r\n    │&#160;&#160; │&#160;&#160;     ├── application.yml\r\n    │&#160;&#160; │&#160;&#160;     ├── static\r\n    │&#160;&#160; │&#160;&#160;     └── templates\r\n    │&#160;&#160; └── test\r\n    │&#160;&#160;     └── java\r\n    │&#160;&#160;         └── com\r\n    │&#160;&#160;             └── example\r\n    │&#160;&#160;                 └── demo\r\n     &#160;&#160;                     └── empty &lt;no test classes&gt;\r\n\r\n\r\n3. I have a SampleController class with an endpoint `divide`  which throws ArithmeticException:\r\n\r\n\r\n  \r\n\r\n       @RestController\r\n       public class SampleController {\r\n    \r\n          @GetMapping(&quot;divide&quot;)\r\n          public int divideByZero() throws ArithmeticException {\r\n             int number = 2;\r\n             return number / 0;\r\n         }\r\n       }\r\n\r\n4. Enter root project directory with `cd` command.\r\n\r\n**Note:** Execute the command from root directory itself as DiffBlue is smart enough to read all the classes and packages.\r\n\r\n5. The command to generate the test is as follow :\r\n   \r\n       dcover create full-qualified-package-name.ClassName\r\n\r\nExample: `dcover create com.example.demo.SampleController`\r\n\r\nCurrent project structure contains the test class after dcover got executed:\r\n\r\n    .\r\n    ├── mvnw\r\n    ├── mvnw.cmd\r\n    ├── pom.xml\r\n    ├── src\r\n    │&#160;&#160; ├── main\r\n    │&#160;&#160; │&#160;&#160; ├── java\r\n    │&#160;&#160; │&#160;&#160; │&#160;&#160; └── com\r\n    │&#160;&#160; │&#160;&#160; │&#160;&#160;     └── example\r\n    │&#160;&#160; │&#160;&#160; │&#160;&#160;         └── demo\r\n    │&#160;&#160; │&#160;&#160; │&#160;&#160;             ├── SampleController.java\r\n    │&#160;&#160; │&#160;&#160; │&#160;&#160;            \r\n    │&#160;&#160; │&#160;&#160; │&#160;&#160;             \r\n    │&#160;&#160; │&#160;&#160; │&#160;&#160;             \r\n    │&#160;&#160; │&#160;&#160; │&#160;&#160;\r\n    │&#160;&#160; │&#160;&#160; │&#160;&#160;             \r\n    │&#160;&#160; │&#160;&#160; └── resources\r\n    │&#160;&#160; │&#160;&#160;     ├── application.yml\r\n    │&#160;&#160; │&#160;&#160;     ├── static\r\n    │&#160;&#160; │&#160;&#160;     └── templates\r\n    │&#160;&#160; └── test\r\n    │&#160;&#160;     └── java\r\n    │&#160;&#160;         └── com\r\n    │&#160;&#160;             └── example\r\n    │&#160;&#160;                 └── demo\r\n     &#160;&#160;                     └── SampleControllerDiffblueTest.java\r\n\r\n\r\n\r\n\r\n6. The test class generated from the above code is given below:\r\n\r\n\r\n         package com.example.demo;\r\n    \r\n         import static org.junit.jupiter.api.Assertions.assertThrows;\r\n         import static org.mockito.Mockito.mock;\r\n         import org.junit.jupiter.api.Test;\r\n    \r\n         class SampleControllerDiffblueTest {\r\n            /**\r\n             * Method under test: {@link SampleController#divideByZero()}\r\n             */\r\n             @Test\r\n             void testDivideByZero() {\r\n              assertThrows(ArithmeticException.class, () -&gt; (new SampleController()).divideByZero());\r\n            }\r\n         }\r\n\r\nConsole Logs:\r\n\r\n    INFO  Diffblue Cover 2023.09.01-9200f07-licensed\r\n    INFO\r\n    INFO  Detecting environment:\r\n    INFO  ----------------------\r\n    INFO  Detected Java version 17.0.8\r\n    INFO  Selected build system: Maven\r\n    INFO  Selected classpath from build system Maven\r\n    INFO  Selected test framework: JUnit Jupiter\r\n    INFO  Selected Java language compliance level: 17\r\n    INFO  Selected test validation: enabled\r\n    INFO  Prefixes for filtering classes/methods:\r\n    INFO  - com.example.demo.SampleController\r\n    INFO  Gathering methods to test...\r\n    ........\r\n    INFO\r\n    INFO  Creating tests:\r\n    INFO  ---------------\r\n    INFO  [1/1] com.example.demo.SampleController\r\n    INFO  [1/1]   Tests created: 1\r\n    INFO\r\n    INFO  Summary:\r\n    INFO  --------\r\n    INFO  Total:                                               2 methods\r\n    INFO  1 test created for:                                  1 method\r\n    INFO\r\n    INFO  Tested indirectly via other methods:                 1 method\r\n    INFO      1 T005: Trivial constructor\r\n    INFO\r\n    INFO  Running validation command.\r\n    INFO  This can take a couple of minutes.........\r\n    INFO  1 created test was successfully validated.\r\n    INFO  Log file: /Users/anish/Downloads/demo/.diffblue/log/user-20230922T200532.log\r\n\r\n    INFO  Finished in 2m 12s\r\n\r\n\r\n-------\r\nAlso, You can try for other tools like **Cucumber Framework** which is an excellent framework for writing test classes via **.feature** file in human understand syntax and capable of generating test classes based on the .feature files (it uses Gherkin language).\r\n\r\n**Update:** I found one tool called **TackleTest-Unit** which is capable of generating Java based Unit test cases. The main thing of this tool is that it supports **Ant**.\r\n\r\n**Github Repo:** https://github.com/konveyor/tackle-test-generator-cli\r\n\r\nFrom **README.md** :\r\n\r\n&gt; **TackleTest-Unit** automatically generates unit test cases for Java applications. Each generated test case focuses on exercising the\r\n&gt; visible methods of an application class. Test generation can be done\r\n&gt; on a specific set of application classes or the entire application.\r\n&gt; \r\n&gt; Among its many features, TackleTest-Unit:\r\n&gt; \r\n&gt; - Supports automatic generation of test assertions: tests can be generated with or without assertions\r\n&gt; \r\n&gt; - Combines different coverage metrics and generates coverage reports: the supported coverage metrics include conventional code coverage\r\n&gt; criteria, such as statement and branch coverage, as well as a novel\r\n&gt; type-based combinatorial coverage coverage of Java methods\r\n&gt; \r\n&gt; - Accommodates developer-written unit test suites: it can perform coverage-driven augmentation and directed test generation to enhance\r\n&gt; the coverage achieved by a given test suite\r\n&gt; \r\n&gt; - Supports multiple build tools: **Maven**, **Gradle**, and **Ant**\r\n\r\n**Read the docs for more. I feel that the tool looks promising. So, you can try it.**\r\n   \r\n\r\n  [1]: https://docs.diffblue.com/get-started/free-trial\r\n  [2]: https://docs.diffblue.com/get-started/beyond-the-trial-get-started/get-started-cover-cli","title":"How to generate smoke test cases for Java application using command line","body":"<p>First of all, your repo code is not a Maven project. For the standalone maven batch file to work, your project needs to be completely maven project containing <strong>pom.xml</strong>.</p>\n<p><strong>Note:</strong> DiffBlue won't work with Ant based projects.</p>\n<p>So, consider migrating your Ant based codebase to Maven based codebase to use DiffBlue tool.</p>\n<hr />\n<p>From <a href=\"https://docs.diffblue.com/get-started/free-trial\" rel=\"nofollow noreferrer\">Official DiffBlue Documentation</a>:</p>\n<p><strong>Prerequisites</strong>:</p>\n<ol>\n<li><p><strong>Java 8 Update 351+</strong>, <strong>Java 11.0.17+</strong> or <strong>Java 17.0.5+</strong> are supported at this moment.</p>\n</li>\n<li><p>Only <strong>Maven 3.2.5+</strong> or <strong>Gradle 4.9+</strong> build tools are supported.</p>\n</li>\n<li><p>Any project (for use with Diffblue Cover) must compile and run with no failing unit tests. <strong>JUnit</strong> and <strong>TestNG</strong> testing frameworks are supported.</p>\n</li>\n</ol>\n<p>Example on how DiffBlue works with Maven:</p>\n<p><strong>Note:</strong> I'm using Mac to show how it works. The process is similar for Windows as well.</p>\n<ol>\n<li><p>Read the documentation from <a href=\"https://docs.diffblue.com/get-started/beyond-the-trial-get-started/get-started-cover-cli\" rel=\"nofollow noreferrer\">here</a> to setup DiffBlue CLI.</p>\n</li>\n<li><p>Execute <code>dcover version</code> to verify the DiffBlue installed or not.</p>\n<pre><code>➜  demo git:(master) ✗ dcover version\n   2023.09.01-9200f07-licensed \n</code></pre>\n</li>\n</ol>\n<p>I have a spring-boot based maven project with this structure below.</p>\n<pre><code>.\n├── mvnw\n├── mvnw.cmd\n├── pom.xml\n├── src\n│   ├── main\n│   │   ├── java\n│   │   │   └── com\n│   │   │       └── example\n│   │   │           └── demo\n│   │   │               ├── SampleController.java\n│   │   │              \n│   │   │               \n│   │   │               \n│   │   │  \n│   │   │               \n│   │   └── resources\n│   │       ├── application.yml\n│   │       ├── static\n│   │       └── templates\n│   └── test\n│       └── java\n│           └── com\n│               └── example\n│                   └── demo\n                        └── empty &lt;no test classes&gt;\n</code></pre>\n<ol start=\"3\">\n<li><p>I have a SampleController class with an endpoint <code>divide</code>  which throws ArithmeticException:</p>\n<pre><code>@RestController\npublic class SampleController {\n\n   @GetMapping(&quot;divide&quot;)\n   public int divideByZero() throws ArithmeticException {\n      int number = 2;\n      return number / 0;\n  }\n}\n</code></pre>\n</li>\n<li><p>Enter root project directory with <code>cd</code> command.</p>\n</li>\n</ol>\n<p><strong>Note:</strong> Execute the command from root directory itself as DiffBlue is smart enough to read all the classes and packages.</p>\n<ol start=\"5\">\n<li><p>The command to generate the test is as follow :</p>\n<pre><code>dcover create full-qualified-package-name.ClassName\n</code></pre>\n</li>\n</ol>\n<p>Example: <code>dcover create com.example.demo.SampleController</code></p>\n<p>Current project structure contains the test class after dcover got executed:</p>\n<pre><code>.\n├── mvnw\n├── mvnw.cmd\n├── pom.xml\n├── src\n│   ├── main\n│   │   ├── java\n│   │   │   └── com\n│   │   │       └── example\n│   │   │           └── demo\n│   │   │               ├── SampleController.java\n│   │   │              \n│   │   │               \n│   │   │               \n│   │   │  \n│   │   │               \n│   │   └── resources\n│   │       ├── application.yml\n│   │       ├── static\n│   │       └── templates\n│   └── test\n│       └── java\n│           └── com\n│               └── example\n│                   └── demo\n                        └── SampleControllerDiffblueTest.java\n</code></pre>\n<ol start=\"6\">\n<li><p>The test class generated from the above code is given below:</p>\n<pre><code>  package com.example.demo;\n\n  import static org.junit.jupiter.api.Assertions.assertThrows;\n  import static org.mockito.Mockito.mock;\n  import org.junit.jupiter.api.Test;\n\n  class SampleControllerDiffblueTest {\n     /**\n      * Method under test: {@link SampleController#divideByZero()}\n      */\n      @Test\n      void testDivideByZero() {\n       assertThrows(ArithmeticException.class, () -&gt; (new SampleController()).divideByZero());\n     }\n  }\n</code></pre>\n</li>\n</ol>\n<p>Console Logs:</p>\n<pre><code>INFO  Diffblue Cover 2023.09.01-9200f07-licensed\nINFO\nINFO  Detecting environment:\nINFO  ----------------------\nINFO  Detected Java version 17.0.8\nINFO  Selected build system: Maven\nINFO  Selected classpath from build system Maven\nINFO  Selected test framework: JUnit Jupiter\nINFO  Selected Java language compliance level: 17\nINFO  Selected test validation: enabled\nINFO  Prefixes for filtering classes/methods:\nINFO  - com.example.demo.SampleController\nINFO  Gathering methods to test...\n........\nINFO\nINFO  Creating tests:\nINFO  ---------------\nINFO  [1/1] com.example.demo.SampleController\nINFO  [1/1]   Tests created: 1\nINFO\nINFO  Summary:\nINFO  --------\nINFO  Total:                                               2 methods\nINFO  1 test created for:                                  1 method\nINFO\nINFO  Tested indirectly via other methods:                 1 method\nINFO      1 T005: Trivial constructor\nINFO\nINFO  Running validation command.\nINFO  This can take a couple of minutes.........\nINFO  1 created test was successfully validated.\nINFO  Log file: /Users/anish/Downloads/demo/.diffblue/log/user-20230922T200532.log\n\nINFO  Finished in 2m 12s\n</code></pre>\n<hr />\n<p>Also, You can try for other tools like <strong>Cucumber Framework</strong> which is an excellent framework for writing test classes via <strong>.feature</strong> file in human understand syntax and capable of generating test classes based on the .feature files (it uses Gherkin language).</p>\n<p><strong>Update:</strong> I found one tool called <strong>TackleTest-Unit</strong> which is capable of generating Java based Unit test cases. The main thing of this tool is that it supports <strong>Ant</strong>.</p>\n<p><strong>Github Repo:</strong> <a href=\"https://github.com/konveyor/tackle-test-generator-cli\" rel=\"nofollow noreferrer\">https://github.com/konveyor/tackle-test-generator-cli</a></p>\n<p>From <strong>README.md</strong> :</p>\n<blockquote>\n<p><strong>TackleTest-Unit</strong> automatically generates unit test cases for Java applications. Each generated test case focuses on exercising the\nvisible methods of an application class. Test generation can be done\non a specific set of application classes or the entire application.</p>\n<p>Among its many features, TackleTest-Unit:</p>\n<ul>\n<li><p>Supports automatic generation of test assertions: tests can be generated with or without assertions</p>\n</li>\n<li><p>Combines different coverage metrics and generates coverage reports: the supported coverage metrics include conventional code coverage\ncriteria, such as statement and branch coverage, as well as a novel\ntype-based combinatorial coverage coverage of Java methods</p>\n</li>\n<li><p>Accommodates developer-written unit test suites: it can perform coverage-driven augmentation and directed test generation to enhance\nthe coverage achieved by a given test suite</p>\n</li>\n<li><p>Supports multiple build tools: <strong>Maven</strong>, <strong>Gradle</strong>, and <strong>Ant</strong></p>\n</li>\n</ul>\n</blockquote>\n<p><strong>Read the docs for more. I feel that the tool looks promising. So, you can try it.</strong></p>\n"}],"owner":{"account_id":15446251,"reputation":3033,"user_id":11143113,"display_name":"Ashar"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":223,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":77158875,"answer_count":1,"score":2,"last_activity_date":1699950568,"creation_date":1695183013,"question_id":77139236,"body_markdown":"I wish to offer any new java based project to have basic/generic `smoke testing` as part of the CICD pipeline on github-actions or ansible. \r\n\r\nRather than having the developers write smoke test cases for their applications I wish to serve them with default test cases that are auto-generated by a tool or plugin. \r\n\r\nOne such plugin that I remember is [diffblue][1]\r\n\r\nIt has github CICD integration example step as well.\r\n\r\nI have a few challenges using its CLI (free license) and what it offers is why I wish to explore other options.\r\n\r\nMy repo structure is :\r\n\r\n    myrepo\r\n      |--src\r\n          |--classes\r\n                |--common\r\n                     |--com\r\n                         |--mybank\r\n                              |--common\r\n                                   |--hello1.class\r\n                                   |--hello2.class\r\n                                   |--util\r\n                                        |--hello3.class\r\n\r\nI tried to generate testcase java files which should as per documentation be generated at \r\n\r\n    myrepo\r\n      |--src\r\n          |--test\r\n                |--java\r\n                                                         \r\n\r\n1. `dcover -classpath &quot;D:\\maven\\bin\\mvn.bat&quot; com.mybank.common.hello1` does not generate any test cases java file, does not throw any error as per logs either in `com.mybank.common` or in `src.test.java` folders.\r\n\r\nNot sure what is wrong in my attempt to use the cli for a single java file or entire java repo project.\r\n\r\n2. I wish to explore alternate tools that may offer more services or are more popular.\r\n\r\nNote: this project was build using `ant` build.xml\r\n\r\nKindly suggest.\r\n\r\n  [1]: https://www.diffblue.com","title":"How to generate smoke test cases for Java application using command line","body":"<p>I wish to offer any new java based project to have basic/generic <code>smoke testing</code> as part of the CICD pipeline on github-actions or ansible.</p>\n<p>Rather than having the developers write smoke test cases for their applications I wish to serve them with default test cases that are auto-generated by a tool or plugin.</p>\n<p>One such plugin that I remember is <a href=\"https://www.diffblue.com\" rel=\"nofollow noreferrer\">diffblue</a></p>\n<p>It has github CICD integration example step as well.</p>\n<p>I have a few challenges using its CLI (free license) and what it offers is why I wish to explore other options.</p>\n<p>My repo structure is :</p>\n<pre><code>myrepo\n  |--src\n      |--classes\n            |--common\n                 |--com\n                     |--mybank\n                          |--common\n                               |--hello1.class\n                               |--hello2.class\n                               |--util\n                                    |--hello3.class\n</code></pre>\n<p>I tried to generate testcase java files which should as per documentation be generated at</p>\n<pre><code>myrepo\n  |--src\n      |--test\n            |--java\n                                                     \n</code></pre>\n<ol>\n<li><code>dcover -classpath &quot;D:\\maven\\bin\\mvn.bat&quot; com.mybank.common.hello1</code> does not generate any test cases java file, does not throw any error as per logs either in <code>com.mybank.common</code> or in <code>src.test.java</code> folders.</li>\n</ol>\n<p>Not sure what is wrong in my attempt to use the cli for a single java file or entire java repo project.</p>\n<ol start=\"2\">\n<li>I wish to explore alternate tools that may offer more services or are more popular.</li>\n</ol>\n<p>Note: this project was build using <code>ant</code> build.xml</p>\n<p>Kindly suggest.</p>\n"},{"tags":["java","postgresql","hibernate","jpa","querydsl"],"comments":[{"owner":{"account_id":159274,"reputation":858,"user_id":2267680,"accept_rate":25,"display_name":"Rodolphe"},"score":1,"creation_date":1699623811,"post_id":77459657,"comment_id":136558741,"body_markdown":"What is the source of your 38k parameters ? If they come from another query you made earlier you should change your code and use CTE or other SQL syntax to read the data and push them in a single action.","body":"What is the source of your 38k parameters ? If they come from another query you made earlier you should change your code and use CTE or other SQL syntax to read the data and push them in a single action."},{"owner":{"account_id":159274,"reputation":858,"user_id":2267680,"accept_rate":25,"display_name":"Rodolphe"},"score":1,"creation_date":1699623861,"post_id":77459657,"comment_id":136558751,"body_markdown":"Another solution if the data come from outside is to fill a temporary table with the command COPY and make a signle query that will read your temp table","body":"Another solution if the data come from outside is to fill a temporary table with the command COPY and make a signle query that will read your temp table"},{"owner":{"account_id":2652739,"reputation":523,"user_id":2294031,"display_name":"domids"},"score":0,"creation_date":1699949941,"post_id":77459657,"comment_id":136591681,"body_markdown":"@Rodolphe Yes, the source is another query.\nThanks for the ideas!","body":"@Rodolphe Yes, the source is another query. Thanks for the ideas!"}],"owner":{"account_id":2652739,"reputation":523,"user_id":2294031,"display_name":"domids"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":49,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":0,"score":-1,"last_activity_date":1699950079,"creation_date":1699615629,"question_id":77459657,"body_markdown":"I&#39;m trying to create a query using QueryDSL which accepts more than 32767 parameters ([32767 is the upper limit of parameters the PostgreSQL driver accepts][1]).\r\n\r\nThe query is currently created like this:\r\n\r\n```\r\nstatic final QInvoiceEntity invoiceEntity = ...\r\n\r\nvoid queryInvoicesWithId(String... ids) {\r\n  JPAQuery query = ...\r\n  query.where(invoiceEntity.id.in(ids));\r\n}\r\n```\r\n\r\nThis works if no more than 32767 parameters are passed. If you pass more than that (e.g. 38000) the following exception is thrown:\r\n```\r\nCaused by: java.io.IOException: Tried to send an out-of-range integer as a 2-byte value: 38000\r\n        at org.postgresql.core.PGStream.sendInteger2(PGStream.java:275)\r\n```\r\n\r\nOne solution according to [1] is to use `ANY` and pass the parameters as an array. I&#39;ve tried the following but to no avail:\r\n```\r\nquery.where(Expressions.booleanTemplate(&quot;{0} = ANY {1}&quot;, invoiceEntity.id, ids);\r\n```\r\nBut this throws the following exception:\r\n```\r\norg.hibernate.hql.internal.ast.QuerySyntaxException: unexpected token: ? near line 3, column 31 [select invoiceEntity\r\nfrom InvoiceEntity invoiceEntity\r\nwhere invoiceEntity.id = ANY (?1)\r\n```\r\n\r\nI&#39;ve even tried to pass the parameters as a string and convert it back in the query:\r\n```\r\nquery.where(Expressions.booleanTemplate(&quot;{0} = ANY string_to_array({1}, &#39;,&#39;)&quot;, invoiceEntity.id, String.join(&quot;,&quot;, ids));\r\n```\r\nBut this throws the following exception:\r\n```\r\norg.hibernate.hql.internal.ast.QuerySyntaxException: unexpected token: ( near line 3, column 45 [select invoiceEntity\r\nfrom InvoiceEntity invoiceEntity\r\nwhere invoiceEntity.id = ANY string_to_array(?1, &#39;,&#39;)\r\n```\r\n\r\n  [1]: https://luppeng.wordpress.com/2020/05/20/postgresql-jdbc-driver-upper-limit-on-parameters-in-preparedstatement/","title":"How to pass multiple values as sql array for a parameter? (Or how can I circumvent the limit of parameters of prepared statement?)","body":"<p>I'm trying to create a query using QueryDSL which accepts more than 32767 parameters (<a href=\"https://luppeng.wordpress.com/2020/05/20/postgresql-jdbc-driver-upper-limit-on-parameters-in-preparedstatement/\" rel=\"nofollow noreferrer\">32767 is the upper limit of parameters the PostgreSQL driver accepts</a>).</p>\n<p>The query is currently created like this:</p>\n<pre><code>static final QInvoiceEntity invoiceEntity = ...\n\nvoid queryInvoicesWithId(String... ids) {\n  JPAQuery query = ...\n  query.where(invoiceEntity.id.in(ids));\n}\n</code></pre>\n<p>This works if no more than 32767 parameters are passed. If you pass more than that (e.g. 38000) the following exception is thrown:</p>\n<pre><code>Caused by: java.io.IOException: Tried to send an out-of-range integer as a 2-byte value: 38000\n        at org.postgresql.core.PGStream.sendInteger2(PGStream.java:275)\n</code></pre>\n<p>One solution according to <a href=\"https://luppeng.wordpress.com/2020/05/20/postgresql-jdbc-driver-upper-limit-on-parameters-in-preparedstatement/\" rel=\"nofollow noreferrer\">1</a> is to use <code>ANY</code> and pass the parameters as an array. I've tried the following but to no avail:</p>\n<pre><code>query.where(Expressions.booleanTemplate(&quot;{0} = ANY {1}&quot;, invoiceEntity.id, ids);\n</code></pre>\n<p>But this throws the following exception:</p>\n<pre><code>org.hibernate.hql.internal.ast.QuerySyntaxException: unexpected token: ? near line 3, column 31 [select invoiceEntity\nfrom InvoiceEntity invoiceEntity\nwhere invoiceEntity.id = ANY (?1)\n</code></pre>\n<p>I've even tried to pass the parameters as a string and convert it back in the query:</p>\n<pre><code>query.where(Expressions.booleanTemplate(&quot;{0} = ANY string_to_array({1}, ',')&quot;, invoiceEntity.id, String.join(&quot;,&quot;, ids));\n</code></pre>\n<p>But this throws the following exception:</p>\n<pre><code>org.hibernate.hql.internal.ast.QuerySyntaxException: unexpected token: ( near line 3, column 45 [select invoiceEntity\nfrom InvoiceEntity invoiceEntity\nwhere invoiceEntity.id = ANY string_to_array(?1, ',')\n</code></pre>\n"},{"tags":["java","micronaut","micronaut-rest"],"owner":{"account_id":7039440,"reputation":178,"user_id":5392366,"display_name":"karan mirani"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":31,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1699949987,"creation_date":1699931351,"question_id":77477977,"body_markdown":"Currently, the login-success property as per the [documentation][1], accepts a String. \r\nI want to redirect a user to their dashboard after login\r\n 1. /user/{id}/dashboard\r\n\r\nHow can I make it so that the user is redirected to their dashboard using RedirectConfigurationProperties?\r\n\r\n  [1]: https://micronaut-projects.github.io/micronaut-security/snapshot/guide/configurationreference.html#io.micronaut.security.config.RedirectConfigurationProperties","title":"Micronaut redirect user to dashboard after login","body":"<p>Currently, the login-success property as per the <a href=\"https://micronaut-projects.github.io/micronaut-security/snapshot/guide/configurationreference.html#io.micronaut.security.config.RedirectConfigurationProperties\" rel=\"nofollow noreferrer\">documentation</a>, accepts a String.\nI want to redirect a user to their dashboard after login</p>\n<ol>\n<li>/user/{id}/dashboard</li>\n</ol>\n<p>How can I make it so that the user is redirected to their dashboard using RedirectConfigurationProperties?</p>\n"},{"tags":["java","kubernetes","jgit"],"comments":[{"owner":{"account_id":3147355,"reputation":73,"user_id":2661573,"display_name":"Katakana"},"score":0,"creation_date":1682494988,"post_id":76054210,"comment_id":134223259,"body_markdown":"For everyone who experienced this, an additional point we were able to see by logging is the fact that the add and commit seem to take the most time (70 seconds each with an empty commit), not Push itself. Still unclear for us what is the reason both take such a long time","body":"For everyone who experienced this, an additional point we were able to see by logging is the fact that the add and commit seem to take the most time (70 seconds each with an empty commit), not Push itself. Still unclear for us what is the reason both take such a long time"}],"answers":[{"tags":[],"owner":{"account_id":3147355,"reputation":73,"user_id":2661573,"display_name":"Katakana"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1699949845,"creation_date":1683284279,"answer_id":76181456,"question_id":76054210,"body_markdown":"Here&#39;s an update for whoever hits this issue in the future.\r\nThe slowness exhibited in my case is due to three compound aspects:\r\n- the frequent file read/write operations executed by the Java JGIT library when pushing data (even with an empty commit)\r\n- a large file count (started being visible after 80 files per repo)\r\n- use of Azure Files for file persistence in the kubernetes architecture my app is hosted. They mention this issue https://learn.microsoft.com/en-us/azure/storage/files/files-troubleshoot-performance?tabs=linux#high-latencies-for-metadata-heavy-workloads-involving-extensive-openclose-operations.","title":"JGIT Push takes a long time to add an empty commit (no changes) when executed from a Cloud system, but almost no time in a VM","body":"<p>Here's an update for whoever hits this issue in the future.\nThe slowness exhibited in my case is due to three compound aspects:</p>\n<ul>\n<li>the frequent file read/write operations executed by the Java JGIT library when pushing data (even with an empty commit)</li>\n<li>a large file count (started being visible after 80 files per repo)</li>\n<li>use of Azure Files for file persistence in the kubernetes architecture my app is hosted. They mention this issue <a href=\"https://learn.microsoft.com/en-us/azure/storage/files/files-troubleshoot-performance?tabs=linux#high-latencies-for-metadata-heavy-workloads-involving-extensive-openclose-operations\" rel=\"nofollow noreferrer\">https://learn.microsoft.com/en-us/azure/storage/files/files-troubleshoot-performance?tabs=linux#high-latencies-for-metadata-heavy-workloads-involving-extensive-openclose-operations</a>.</li>\n</ul>\n"}],"owner":{"account_id":3147355,"reputation":73,"user_id":2661573,"display_name":"Katakana"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":84,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1699949884,"creation_date":1681905322,"question_id":76054210,"body_markdown":"**Context:**\r\nI&#39;m using JGIT 6.5.202303070854-r in a custom application that runs as a plugin inside another Java app inside Tomcat. For all intents and purposes it&#39;s a normal Java implementation.\r\nThe end result is that methods like Push and Pull are exposed as webservices\r\n\r\n**Behavior:**\r\nWhen this plugin is deployed in a cloud environment (which means the host app is deployed in a kubernetes architecture) what I observed is that even if Pull executes relatively ok, Push on the other hand executes **very slow**, making the webservice request timing out (socket timeout exception (read timeout)).\r\n\r\n**What I tried:**\r\nFor reference, the same Push in my own local Tomcat instance executes in 5-6 seconds, while in cloud I sat once 15 minutes and it was still executing.I observed that essentially the commit is being pushed successfully with all its content, as far as I checked (though I did not do a binary check on the file count/contents)\r\nAll the tests I did were with empty commits and with a 22MB repo with 532 files with 5 commits.\r\nI did observe that during the execution time, I have the following error:\r\n&quot;.git/refs/remotes/origin/.probe-99c3f223-6a2c-4535-8c39-0c34f8f44ff6: Operation not permitted&quot;\r\nissued from JGit-FileStoreAttributeReader-2 (the thread name).\r\nHowever this error does not happen all the time - last time the service executed successfully but in 5,8 minutes without any error.\r\n\r\nI am currently in the process of retrieving the Kubernetes node logs to see if there&#39;s anything there that might point to this, **but if anyone encountered this I would be grateful to understand why that happens**.\r\n\r\nThe Push implementation is this, in case it matters, wrapper in a try/catch:\r\n\r\n    myGitFolder.add().addFilepattern(&quot;.&quot;).setUpdate(true).call();\r\n     myGitFolder.commit().setAll(true).setMessage(Message).setCommitter(str_CommitterName, str_CommitterEmail).call();\r\n    \r\n    CredentialsProvider credentialsProvider = new UsernamePasswordCredentialsProvider(str_User, str_Password);\r\n    \r\n    Iterable&lt;PushResult&gt; prList = myGitFolder.push().setRemote(&quot;origin&quot;)\r\n    \t\t\t\t.setCredentialsProvider(credentialsProvider).call();\r\n\r\n\r\n\r\n**Expectation:**\r\nI&#39;m expecting to have Push with the above implementation execute in under 10 seconds with an empty commit.","title":"JGIT Push takes a long time to add an empty commit (no changes) when executed from a Cloud system, but almost no time in a VM","body":"<p><strong>Context:</strong>\nI'm using JGIT 6.5.202303070854-r in a custom application that runs as a plugin inside another Java app inside Tomcat. For all intents and purposes it's a normal Java implementation.\nThe end result is that methods like Push and Pull are exposed as webservices</p>\n<p><strong>Behavior:</strong>\nWhen this plugin is deployed in a cloud environment (which means the host app is deployed in a kubernetes architecture) what I observed is that even if Pull executes relatively ok, Push on the other hand executes <strong>very slow</strong>, making the webservice request timing out (socket timeout exception (read timeout)).</p>\n<p><strong>What I tried:</strong>\nFor reference, the same Push in my own local Tomcat instance executes in 5-6 seconds, while in cloud I sat once 15 minutes and it was still executing.I observed that essentially the commit is being pushed successfully with all its content, as far as I checked (though I did not do a binary check on the file count/contents)\nAll the tests I did were with empty commits and with a 22MB repo with 532 files with 5 commits.\nI did observe that during the execution time, I have the following error:\n&quot;.git/refs/remotes/origin/.probe-99c3f223-6a2c-4535-8c39-0c34f8f44ff6: Operation not permitted&quot;\nissued from JGit-FileStoreAttributeReader-2 (the thread name).\nHowever this error does not happen all the time - last time the service executed successfully but in 5,8 minutes without any error.</p>\n<p>I am currently in the process of retrieving the Kubernetes node logs to see if there's anything there that might point to this, <strong>but if anyone encountered this I would be grateful to understand why that happens</strong>.</p>\n<p>The Push implementation is this, in case it matters, wrapper in a try/catch:</p>\n<pre><code>myGitFolder.add().addFilepattern(&quot;.&quot;).setUpdate(true).call();\n myGitFolder.commit().setAll(true).setMessage(Message).setCommitter(str_CommitterName, str_CommitterEmail).call();\n\nCredentialsProvider credentialsProvider = new UsernamePasswordCredentialsProvider(str_User, str_Password);\n\nIterable&lt;PushResult&gt; prList = myGitFolder.push().setRemote(&quot;origin&quot;)\n                .setCredentialsProvider(credentialsProvider).call();\n</code></pre>\n<p><strong>Expectation:</strong>\nI'm expecting to have Push with the above implementation execute in under 10 seconds with an empty commit.</p>\n"},{"tags":["java","android","unit-testing","mockito","powermock"],"comments":[{"owner":{"account_id":2535057,"reputation":25845,"user_id":2202415,"display_name":"Maciej Kowalski"},"score":0,"creation_date":1513333167,"post_id":47830130,"comment_id":82623002,"body_markdown":"can you refactor so that the `new Bundle(1);` can be moved to separate package level method?","body":"can you refactor so that the <code>new Bundle(1);</code> can be moved to separate package level method?"}],"answers":[{"tags":[],"owner":{"account_id":2535057,"reputation":25845,"user_id":2202415,"display_name":"Maciej Kowalski"},"down_vote_count":1,"up_vote_count":4,"is_accepted":true,"score":3,"last_activity_date":1513344522,"creation_date":1513333622,"answer_id":47830334,"question_id":47830130,"body_markdown":"**1)** Add proper set-up\r\n\r\n    @RunWith(PowerMockRunner.class)\r\n    @PrepareForTest(Bundle.class)\r\n    public class MyTest{\r\n\r\n**2)** Use vanilla Mockito for `do().when()`:\r\n\r\n    Bundle mBundle = PowerMockito.mock(Bundle.class);\r\n        Mockito.doNothing().when(mBundle).putString(AnalyticsController.Params.CID, cid);\r\n\r\n**3)** Use Powermock for `whenNew()`:\r\n\r\n    PowerMockito.whenNew(Bundle.class)\r\n                .withAnyArguments().thenReturn(mBundle);\r\n\r\n","title":"Mock android.os.BaseBundle without roboelectric","body":"<p><strong>1)</strong> Add proper set-up</p>\n\n<pre><code>@RunWith(PowerMockRunner.class)\n@PrepareForTest(Bundle.class)\npublic class MyTest{\n</code></pre>\n\n<p><strong>2)</strong> Use vanilla Mockito for <code>do().when()</code>:</p>\n\n<pre><code>Bundle mBundle = PowerMockito.mock(Bundle.class);\n    Mockito.doNothing().when(mBundle).putString(AnalyticsController.Params.CID, cid);\n</code></pre>\n\n<p><strong>3)</strong> Use Powermock for <code>whenNew()</code>:</p>\n\n<pre><code>PowerMockito.whenNew(Bundle.class)\n            .withAnyArguments().thenReturn(mBundle);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6713306,"reputation":1513,"user_id":5175944,"accept_rate":50,"display_name":"surga"},"down_vote_count":2,"up_vote_count":2,"is_accepted":false,"score":0,"last_activity_date":1550123588,"creation_date":1513552237,"answer_id":47860352,"question_id":47830130,"body_markdown":"I finally get the answer from my friend. The reason is somehow for mocking android class using powermockito the main class need to be set as prepared for test too :\r\n\r\n    @PrepareForTest({MainClass.class, Bundle.class})\r\n\r\nThank you for the effort @Maciej Kowalski. I&#39;ll vote up for your effort since it&#39;s on the right direction anyway.\r\n\r\n**I&#39;m not copy pasting the answer from above, preparing the test for MainClass is the important part.**","title":"Mock android.os.BaseBundle without roboelectric","body":"<p>I finally get the answer from my friend. The reason is somehow for mocking android class using powermockito the main class need to be set as prepared for test too :</p>\n\n<pre><code>@PrepareForTest({MainClass.class, Bundle.class})\n</code></pre>\n\n<p>Thank you for the effort @Maciej Kowalski. I'll vote up for your effort since it's on the right direction anyway.</p>\n\n<p><strong>I'm not copy pasting the answer from above, preparing the test for MainClass is the important part.</strong></p>\n"},{"tags":[],"owner":{"account_id":10217567,"reputation":9015,"user_id":7542765,"accept_rate":81,"display_name":"Levon Petrosyan"},"down_vote_count":0,"up_vote_count":9,"is_accepted":false,"score":9,"last_activity_date":1586656432,"creation_date":1586656432,"answer_id":61165916,"question_id":47830130,"body_markdown":"Try to add this in your **build.gradle**\r\n\r\n\r\n    android {\r\n        testOptions {\r\n            unitTests {\r\n                unitTests.returnDefaultValues = true\r\n            }\r\n        }\r\n    }","title":"Mock android.os.BaseBundle without roboelectric","body":"<p>Try to add this in your <strong>build.gradle</strong></p>\n\n<pre><code>android {\n    testOptions {\n        unitTests {\n            unitTests.returnDefaultValues = true\n        }\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1080390,"reputation":4094,"user_id":1077539,"accept_rate":40,"display_name":"sadat"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1673234496,"creation_date":1673234496,"answer_id":75052895,"question_id":47830130,"body_markdown":"    testOptions {\r\n        unitTests.returnDefaultValues = true\r\n    }\r\n\r\nworked for me.","title":"Mock android.os.BaseBundle without roboelectric","body":"<pre><code>testOptions {\n    unitTests.returnDefaultValues = true\n}\n</code></pre>\n<p>worked for me.</p>\n"},{"tags":[],"owner":{"account_id":914709,"reputation":206,"user_id":8694493,"display_name":"hollmannlu"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1699949873,"creation_date":1699949873,"answer_id":77479087,"question_id":47830130,"body_markdown":"with mockk you could use constructor-mocks (see mockk.io).\r\n\r\nexample:\r\n\r\n    mockkConstructor(Bundle::class)\r\n    every { anyConstructed&lt;Bundle&gt;().putString(any(), any()) } just runs","title":"Mock android.os.BaseBundle without roboelectric","body":"<p>with mockk you could use constructor-mocks (see mockk.io).</p>\n<p>example:</p>\n<pre><code>mockkConstructor(Bundle::class)\nevery { anyConstructed&lt;Bundle&gt;().putString(any(), any()) } just runs\n</code></pre>\n"}],"owner":{"account_id":6713306,"reputation":1513,"user_id":5175944,"accept_rate":50,"display_name":"surga"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":5784,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"accepted_answer_id":47830334,"answer_count":5,"score":4,"last_activity_date":1699949873,"creation_date":1513332942,"question_id":47830130,"body_markdown":"I am trying to do a unit test on this code :\r\n\r\n    Bundle cidParam(String accountId) {\r\n        Bundle params = new Bundle(1);\r\n        params.putString(Params.CID, accountId);\r\n\r\n        return params;\r\n    }\r\n\r\nThis is the unit test :\r\n\r\n    private void mockBundle(String cid) throws Exception {\r\n        Bundle mBundle = PowerMockito.mock(Bundle.class);\r\n        PowerMockito.doNothing().when((BaseBundle)mBundle).putString(AnalyticsController.Params.CID, cid);\r\n    }\r\n\r\nHowever, it always returns:\r\n\r\n    java.lang.RuntimeException: Method putString in android.os.BaseBundle not mocked.\r\n\r\nI know I can use roboelectric to spin up the simulator and call the real bundle. However, it will slow down the unit test. Does anyone know how to mock the Android .os.base? Thank you.","title":"Mock android.os.BaseBundle without roboelectric","body":"<p>I am trying to do a unit test on this code :</p>\n\n<pre><code>Bundle cidParam(String accountId) {\n    Bundle params = new Bundle(1);\n    params.putString(Params.CID, accountId);\n\n    return params;\n}\n</code></pre>\n\n<p>This is the unit test :</p>\n\n<pre><code>private void mockBundle(String cid) throws Exception {\n    Bundle mBundle = PowerMockito.mock(Bundle.class);\n    PowerMockito.doNothing().when((BaseBundle)mBundle).putString(AnalyticsController.Params.CID, cid);\n}\n</code></pre>\n\n<p>However, it always returns:</p>\n\n<pre><code>java.lang.RuntimeException: Method putString in android.os.BaseBundle not mocked.\n</code></pre>\n\n<p>I know I can use roboelectric to spin up the simulator and call the real bundle. However, it will slow down the unit test. Does anyone know how to mock the Android .os.base? Thank you.</p>\n"},{"tags":["java","algorithm","huffman-code","huffman-tree"],"comments":[{"owner":{"account_id":9879926,"reputation":4097,"user_id":7316365,"accept_rate":80,"display_name":"Vivick"},"score":0,"creation_date":1699514288,"post_id":77451130,"comment_id":136542069,"body_markdown":"The huffman-tree is a fundamentally tree-like structure, I&#39;m failing to see any tree (or alternatively any bitseq-to-byte map)","body":"The huffman-tree is a fundamentally tree-like structure, I&#39;m failing to see any tree (or alternatively any bitseq-to-byte map)"},{"owner":{"account_id":7142980,"reputation":323243,"user_id":5459839,"display_name":"trincot"},"score":0,"creation_date":1699533471,"post_id":77451130,"comment_id":136545601,"body_markdown":"*&quot;I transfer the binary string into a byte array.&quot;*: please explain how `{-20,31,3}` would represent `aa bbb cccc`. This encoding is wrong.","body":"<i>&quot;I transfer the binary string into a byte array.&quot;</i>: please explain how <code>{-20,31,3}</code> would represent <code>aa bbb cccc</code>. This encoding is wrong."},{"owner":{"account_id":71739,"reputation":307143,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":1,"creation_date":1699550736,"post_id":77451130,"comment_id":136549411,"body_markdown":"String is not a container for binary data.","body":"String is not a container for binary data."},{"owner":{"account_id":26746614,"reputation":15,"user_id":20346594,"display_name":"Nicholas"},"score":0,"creation_date":1699947360,"post_id":77451130,"comment_id":136591321,"body_markdown":"Explaining of {-20,31,3} to &quot;aa bbb ccc&quot;: I write them randomly in order to raise the question directly. I think I was not able to clarify the problem. I will review it and google a Huffman demo afterwards.","body":"Explaining of {-20,31,3} to &quot;aa bbb ccc&quot;: I write them randomly in order to raise the question directly. I think I was not able to clarify the problem. I will review it and google a Huffman demo afterwards."}],"answers":[{"tags":[],"owner":{"account_id":1136690,"reputation":104411,"user_id":1180620,"accept_rate":83,"display_name":"Mark Adler"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1699572798,"creation_date":1699550274,"answer_id":77455177,"question_id":77451130,"body_markdown":"You are not even thinking about the Huffman codes correctly, so your Java code and your question are irrelevant.\r\n\r\nEach code has a _number of bits_, and then those bits. This is implied where you show `c` as having three bits. You need to put those bits into your output stream as _that number of bits_, in order to realize the compression. Your encoding of one code each into a byte makes no sense, especially if you happen to end up with codes longer than eight bits.\r\n\r\nThis is done properly with the bit operations, shift and or. You build up a stream of bits into a word, and when you have at least eight bits in your word buffer, you write out that one byte. At the end, you write out any remaining bits in the last byte.\r\n\r\nThen at the other end, you read in bytes, building up a stream of bits in a word with shift and or, and then pull out bits from the stream to decode your Huffman codes as needed, using shift and the and operation.","title":"How to transfer a String data which starts with &quot;0&quot; to a byte type , and recover it without losing the &quot;0&quot; at the first place?","body":"<p>You are not even thinking about the Huffman codes correctly, so your Java code and your question are irrelevant.</p>\n<p>Each code has a <em>number of bits</em>, and then those bits. This is implied where you show <code>c</code> as having three bits. You need to put those bits into your output stream as <em>that number of bits</em>, in order to realize the compression. Your encoding of one code each into a byte makes no sense, especially if you happen to end up with codes longer than eight bits.</p>\n<p>This is done properly with the bit operations, shift and or. You build up a stream of bits into a word, and when you have at least eight bits in your word buffer, you write out that one byte. At the end, you write out any remaining bits in the last byte.</p>\n<p>Then at the other end, you read in bytes, building up a stream of bits in a word with shift and or, and then pull out bits from the stream to decode your Huffman codes as needed, using shift and the and operation.</p>\n"}],"owner":{"account_id":26746614,"reputation":15,"user_id":20346594,"display_name":"Nicholas"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":50,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1699949665,"creation_date":1699513926,"question_id":77451130,"body_markdown":"I was learning Huffman tree and code in Java recently. There is a serious problem when I am trying to encode the String binary. I will explain step by step.\r\n\r\n1, These are the original words that I&#39;m going to encode:\r\n\r\n    String words = &quot;aa bbb cccc&quot;;\r\n\r\n2, The map of the Huffman code, they are not the real code. I am trying to make some codes so that I can show you the problem as soon as possible;\r\n```\r\na:1110 0110 (ignore the space, I deliberately added it for human readability)\r\nb:0001 1001\r\nc:011\r\n```\r\n3, I transfer the binary string into a byte array.\r\n```\r\nbyte[] arr = {-20,31,3}\r\n```\r\n4, Decoding. I calculate each byte with 256(1,1111,1111) by bitwise OR in order to get the 0s back. Then I use the substring(..).\r\n\r\n```\r\nfor(int i = 0; i &lt; bytes.length; i++) {\r\n\tboolean isLast = i == bytes.length - 1;\r\n\tString byteToString = byteToString(isLast, bytes[i]);\r\n\tSystem.out.println(byteToString + &quot; &quot;);\r\n}\r\n```\r\n\r\n```\r\npublic static String byteToString(boolean isLast,byte b) {\r\n\tint temp = b;\r\n\tif(!isLast) {\r\n\t\ttemp = 256 | temp;  //temp = 256 | -20;(256 | 31)\r\n\t}\r\n        \r\n\tString stringDecode = Integer.toBinaryString(temp);\r\n\tif(!isLast){\r\n\t\treturn stringDecode.substring(stringDecode.length() - 8);\r\n\t} else {\r\n\t\treturn stringDecode;\r\n\t}\r\n}\r\n```\r\n\r\nresult:\r\n\r\n```\r\n11101100\r\n00011111\r\n11   // the 0 is missing.\r\n```\r\n\r\n \r\n\r\n\r\n\r\n\r\n\r\nI was tring to do &quot;temp = 256 | 3&quot;,but I got &quot;00000011&quot;.It has too many 0s.\r\nI don&#39;t know whether I make myself clear.\r\nIf someone can do me a favour, I will very appreciate it. Thank you.\r\n\r\n\r\n================= edit\r\n\r\n1, String to encode\r\n\r\n`\t\tString sentence = &quot;aaaa bb c dddd hhhhhhh jjk&quot;;\r\n        //contentBytes.length() : 29\r\n\t\tbyte[] contentBytes = sentence.getBytes();  \r\n\r\n`\r\n\r\n2, ANSCII and the times of appearances of the characters\r\n\r\n`32:5\r\n97:4\r\n98:2\r\n99:1\r\n100:4\r\n104:7\r\n106:2\r\n107:1\r\n`\r\n\r\n3,the Huffman Tree\r\n[![enter image description here][1]][1]\r\n\r\n4,then the Huffman code\r\n\r\n32:00\r\n\r\n97:111\r\n\r\n98:010\r\n\r\n99:01101\r\n\r\n100:110\r\n\r\n104:10\r\n\r\n106:0111\r\n\r\n107:01100\r\n\r\n5, encoding the sentence concat all of the Huffman codes to a String data.\r\n\r\n    111111111111000100100001101001101101101100010101010101010000111011101100\r\n\r\n6, splitting them by 8 bits or chars\r\n\r\n    11111111, 11110001, 00100001, 10100110, 11011011, 00010101, 01010101, 00001110, 11101100\r\n\r\n7, transfering each String to a byte type \r\n    //length: 9 &lt; 29 (length of contentBytes)\r\n    encode bytes: [-1, -15, 33, -90, -37, 21, 85, 14, -20]\r\n8, decoding\r\n\r\n```\r\n int codeInt = 256 | -1;   //and so on\r\n String stringDecode = Integer.toBinaryString(temp);\r\n stringDecode.substring(stringDecode.length() - 8);\r\n\r\n```\r\n9, if the last 8 chars in step 6 started with &quot;0&quot;, I have the problem as I mentioned before.\r\n\r\nI wish I explained the problem clearly. I hope so. \r\nPlease visit my code on github if anyone were insterested.  [Huffuman Code][2]\r\n\r\nThank you, guys!\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/V0tYo.png\r\n  [2]: https://github.com/NicholasRabbit/Data-structure-and-algorithm/tree/master/9_BinaryTree/6_HuffManCode","title":"How to transfer a String data which starts with &quot;0&quot; to a byte type , and recover it without losing the &quot;0&quot; at the first place?","body":"<p>I was learning Huffman tree and code in Java recently. There is a serious problem when I am trying to encode the String binary. I will explain step by step.</p>\n<p>1, These are the original words that I'm going to encode:</p>\n<pre><code>String words = &quot;aa bbb cccc&quot;;\n</code></pre>\n<p>2, The map of the Huffman code, they are not the real code. I am trying to make some codes so that I can show you the problem as soon as possible;</p>\n<pre><code>a:1110 0110 (ignore the space, I deliberately added it for human readability)\nb:0001 1001\nc:011\n</code></pre>\n<p>3, I transfer the binary string into a byte array.</p>\n<pre><code>byte[] arr = {-20,31,3}\n</code></pre>\n<p>4, Decoding. I calculate each byte with 256(1,1111,1111) by bitwise OR in order to get the 0s back. Then I use the substring(..).</p>\n<pre><code>for(int i = 0; i &lt; bytes.length; i++) {\n    boolean isLast = i == bytes.length - 1;\n    String byteToString = byteToString(isLast, bytes[i]);\n    System.out.println(byteToString + &quot; &quot;);\n}\n</code></pre>\n<pre><code>public static String byteToString(boolean isLast,byte b) {\n    int temp = b;\n    if(!isLast) {\n        temp = 256 | temp;  //temp = 256 | -20;(256 | 31)\n    }\n        \n    String stringDecode = Integer.toBinaryString(temp);\n    if(!isLast){\n        return stringDecode.substring(stringDecode.length() - 8);\n    } else {\n        return stringDecode;\n    }\n}\n</code></pre>\n<p>result:</p>\n<pre><code>11101100\n00011111\n11   // the 0 is missing.\n</code></pre>\n<p>I was tring to do &quot;temp = 256 | 3&quot;,but I got &quot;00000011&quot;.It has too many 0s.\nI don't know whether I make myself clear.\nIf someone can do me a favour, I will very appreciate it. Thank you.</p>\n<p>================= edit</p>\n<p>1, String to encode</p>\n<p>`       String sentence = &quot;aaaa bb c dddd hhhhhhh jjk&quot;;\n//contentBytes.length() : 29\nbyte[] contentBytes = sentence.getBytes();</p>\n<p>`</p>\n<p>2, ANSCII and the times of appearances of the characters</p>\n<p><code>32:5 97:4 98:2 99:1 100:4 104:7 106:2 107:1 </code></p>\n<p>3,the Huffman Tree\n<a href=\"https://i.stack.imgur.com/V0tYo.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/V0tYo.png\" alt=\"enter image description here\" /></a></p>\n<p>4,then the Huffman code</p>\n<p>32:00</p>\n<p>97:111</p>\n<p>98:010</p>\n<p>99:01101</p>\n<p>100:110</p>\n<p>104:10</p>\n<p>106:0111</p>\n<p>107:01100</p>\n<p>5, encoding the sentence concat all of the Huffman codes to a String data.</p>\n<pre><code>111111111111000100100001101001101101101100010101010101010000111011101100\n</code></pre>\n<p>6, splitting them by 8 bits or chars</p>\n<pre><code>11111111, 11110001, 00100001, 10100110, 11011011, 00010101, 01010101, 00001110, 11101100\n</code></pre>\n<p>7, transfering each String to a byte type\n//length: 9 &lt; 29 (length of contentBytes)\nencode bytes: [-1, -15, 33, -90, -37, 21, 85, 14, -20]\n8, decoding</p>\n<pre><code> int codeInt = 256 | -1;   //and so on\n String stringDecode = Integer.toBinaryString(temp);\n stringDecode.substring(stringDecode.length() - 8);\n\n</code></pre>\n<p>9, if the last 8 chars in step 6 started with &quot;0&quot;, I have the problem as I mentioned before.</p>\n<p>I wish I explained the problem clearly. I hope so.\nPlease visit my code on github if anyone were insterested.  <a href=\"https://github.com/NicholasRabbit/Data-structure-and-algorithm/tree/master/9_BinaryTree/6_HuffManCode\" rel=\"nofollow noreferrer\">Huffuman Code</a></p>\n<p>Thank you, guys!</p>\n"},{"tags":["java","swing","tab-ordering"],"comments":[{"owner":{"account_id":114128,"reputation":50422,"user_id":300257,"accept_rate":89,"display_name":"Gilbert Le Blanc"},"score":1,"creation_date":1699921046,"post_id":77476337,"comment_id":136589066,"body_markdown":"Edit your question to include a [mre] that we can copy into our IDE, compile, and test.  Test test test.  Testing is super critical.","body":"Edit your question to include a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> that we can copy into our IDE, compile, and test.  Test test test.  Testing is super critical."},{"owner":{"account_id":44852,"reputation":322224,"user_id":131872,"accept_rate":100,"display_name":"camickr"},"score":1,"creation_date":1699921483,"post_id":77476337,"comment_id":136589106,"body_markdown":"1) Why are you creating custom focus traversal? I don&#39;t see any reason for this. Don&#39;t let the IDE force you to do something you don&#39;t need. 2) *when it should go to numPersons* - what &quot;numPersons&quot;? I don&#39;t see a component for that.","body":"1) Why are you creating custom focus traversal? I don&#39;t see any reason for this. Don&#39;t let the IDE force you to do something you don&#39;t need. 2) <i>when it should go to numPersons</i> - what &quot;numPersons&quot;? I don&#39;t see a component for that."},{"owner":{"account_id":2485939,"reputation":19426,"user_id":2164365,"accept_rate":40,"display_name":"Abra"},"score":0,"creation_date":1699942098,"post_id":77476337,"comment_id":136590758,"body_markdown":"[Creating a GUI With Swing](https://docs.oracle.com/javase/tutorial/uiswing/)","body":"<a href=\"https://docs.oracle.com/javase/tutorial/uiswing/\" rel=\"nofollow noreferrer\">Creating a GUI With Swing</a>"},{"owner":{"account_id":29694129,"reputation":9,"user_id":22757847,"display_name":"tumorito"},"score":0,"creation_date":1699949784,"post_id":77476337,"comment_id":136591650,"body_markdown":"@GilbertLeBlanc i`ve already changed the question adding a simple class to reproduce the issue.  If there is any doubts about  my code please let me know","body":"@GilbertLeBlanc i`ve already changed the question adding a simple class to reproduce the issue.  If there is any doubts about  my code please let me know"},{"owner":{"account_id":114128,"reputation":50422,"user_id":300257,"accept_rate":89,"display_name":"Gilbert Le Blanc"},"score":0,"creation_date":1699962870,"post_id":77476337,"comment_id":136593901,"body_markdown":"And that&#39;s why we ask for a [mre].  Once I saw the `JPanel` `null` layout, I knew there wasn&#39;t much point in finding any other problems.  Oracle has a helpful tutorial, [Creating a GUI With Swing](https://docs.oracle.com/javase/tutorial/uiswing/index.html).  Skip the Learning Swing with the NetBeans IDE section.  Pay particular attention to the [Laying Out Components Within a Container](https://docs.oracle.com/javase/tutorial/uiswing/layout/index.html) section.","body":"And that&#39;s why we ask for a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>.  Once I saw the <code>JPanel</code> <code>null</code> layout, I knew there wasn&#39;t much point in finding any other problems.  Oracle has a helpful tutorial, <a href=\"https://docs.oracle.com/javase/tutorial/uiswing/index.html\" rel=\"nofollow noreferrer\">Creating a GUI With Swing</a>.  Skip the Learning Swing with the NetBeans IDE section.  Pay particular attention to the <a href=\"https://docs.oracle.com/javase/tutorial/uiswing/layout/index.html\" rel=\"nofollow noreferrer\">Laying Out Components Within a Container</a> section."},{"owner":{"account_id":44852,"reputation":322224,"user_id":131872,"accept_rate":100,"display_name":"camickr"},"score":1,"creation_date":1699975912,"post_id":77476337,"comment_id":136596530,"body_markdown":"That is NOT an [mre]. 1) You are using a 3rd party class. 2) Your question is about focus traversal. Therefore all the MouseListeners, ActionListeners, FocusListeners are irrelevant to the stated problem. All the custom Fonts, Borders and Colors are irrelevant to the stated problem. 3) Still haven&#39;t answered why you are attempting to change focus traversal. Simple answer is that changing the focus traversal is not as easy as you would think and I see no reason for you to do so.","body":"That is NOT an <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>. 1) You are using a 3rd party class. 2) Your question is about focus traversal. Therefore all the MouseListeners, ActionListeners, FocusListeners are irrelevant to the stated problem. All the custom Fonts, Borders and Colors are irrelevant to the stated problem. 3) Still haven&#39;t answered why you are attempting to change focus traversal. Simple answer is that changing the focus traversal is not as easy as you would think and I see no reason for you to do so."},{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1700002541,"post_id":77476337,"comment_id":136601015,"body_markdown":"Please trim your code to make it easier to find your problem. Follow these guidelines to create a [minimal reproducible example](https://stackoverflow.com/help/minimal-reproducible-example).","body":"Please trim your code to make it easier to find your problem. Follow these guidelines to create a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."},{"owner":{"account_id":29694129,"reputation":9,"user_id":22757847,"display_name":"tumorito"},"score":0,"creation_date":1700057130,"post_id":77476337,"comment_id":136607940,"body_markdown":"@GilbertLeBlanc i am a student at the moment and my teacher taught me to always (or almost) use the null value for the JPanel, why is that bad or not a good practice?","body":"@GilbertLeBlanc i am a student at the moment and my teacher taught me to always (or almost) use the null value for the JPanel, why is that bad or not a good practice?"},{"owner":{"account_id":114128,"reputation":50422,"user_id":300257,"accept_rate":89,"display_name":"Gilbert Le Blanc"},"score":0,"creation_date":1700068125,"post_id":77476337,"comment_id":136610169,"body_markdown":"&quot;Although it is possible to do without a layout manager, you should use a layout manager if at all possible. A layout manager makes it easier to adjust to look-and-feel-dependent component appearances, to different font sizes, to a container&#39;s changing size, and to different locales.&quot;  [Doing Without a Layout Manager (Absolute Positioning)](https://docs.oracle.com/javase/tutorial/uiswing/layout/none.html).  Good luck getting a JScrollPane or tabs working correctly.","body":"&quot;Although it is possible to do without a layout manager, you should use a layout manager if at all possible. A layout manager makes it easier to adjust to look-and-feel-dependent component appearances, to different font sizes, to a container&#39;s changing size, and to different locales.&quot;  <a href=\"https://docs.oracle.com/javase/tutorial/uiswing/layout/none.html\" rel=\"nofollow noreferrer\">Doing Without a Layout Manager (Absolute Positioning)</a>.  Good luck getting a JScrollPane or tabs working correctly."}],"owner":{"account_id":29694129,"reputation":9,"user_id":22757847,"display_name":"tumorito"},"comment_count":9,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":57,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":0,"score":-1,"last_activity_date":1699949549,"creation_date":1699903199,"question_id":77476337,"body_markdown":"I have the tab order set with `setFocusTraversalPolicy(new FocusTraversalOnArray(new Component[]{hotel, individual, multiple, numPersons, accept, cancel, exit}));` (made with swing builder automatically creating also the class itself). it works perfectly until it goes into the JRadioButtons, they are in a ButtonGroup(which i think where the problem remains). Once it entered there, the tab doesnt work anymore (when it should go to numPersons) BUT the shift+tab does work perfectly (going to hotel).\r\n\r\nHere is a picture of the UI for more clarification: \r\n[![enter image description here](https://i.stack.imgur.com/E7QHE.png)](https://i.stack.imgur.com/E7QHE.png)\r\n\r\nHere is the class FocusTraversalOnArray that the swing builder created:\r\n\r\n```\r\n/*******************************************************************************\r\n * Copyright (c) 2011, 2023 Google, Inc.\r\n * All rights reserved. This program and the accompanying materials\r\n * are made available under the terms of the Eclipse Public License v1.0\r\n * which accompanies this distribution, and is available at\r\n * http://www.eclipse.org/legal/epl-v10.html\r\n *\r\n * Contributors:\r\n *    Google, Inc. - initial API and implementation\r\n *******************************************************************************/\r\npackage org.eclipse.wb.swing;\r\n\r\nimport java.awt.Component;\r\nimport java.awt.Container;\r\nimport java.awt.FocusTraversalPolicy;\r\n\r\n/**\r\n * Cyclic focus traversal policy based on array of components.\r\n * &lt;p&gt;\r\n * This class may be freely distributed as part of any application or plugin.\r\n * \r\n * @author scheglov_ke\r\n */\r\npublic class FocusTraversalOnArray extends FocusTraversalPolicy {\r\n\tprivate final Component m_Components[];\r\n\t////////////////////////////////////////////////////////////////////////////\r\n\t//\r\n\t// Constructor\r\n\t//\r\n\t////////////////////////////////////////////////////////////////////////////\r\n\tpublic FocusTraversalOnArray(Component components[]) {\r\n\t\tm_Components = components;\r\n\t}\r\n\t////////////////////////////////////////////////////////////////////////////\r\n\t//\r\n\t// Utilities\r\n\t//\r\n\t////////////////////////////////////////////////////////////////////////////\r\n\tprivate int indexCycle(int index, int delta) {\r\n\t\tint size = m_Components.length;\r\n\t\tint next = (index + delta + size) % size;\r\n\t\treturn next;\r\n\t}\r\n\tprivate Component cycle(Component currentComponent, int delta) {\r\n\t\tint index = -1;\r\n\t\tloop : for (int i = 0; i &lt; m_Components.length; i++) {\r\n\t\t\tComponent component = m_Components[i];\r\n\t\t\tfor (Component c = currentComponent; c != null; c = c.getParent()) {\r\n\t\t\t\tif (component == c) {\r\n\t\t\t\t\tindex = i;\r\n\t\t\t\t\tbreak loop;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\t// try to find enabled component in &quot;delta&quot; direction\r\n\t\tint initialIndex = index;\r\n\t\twhile (true) {\r\n\t\t\tint newIndex = indexCycle(index, delta);\r\n\t\t\tif (newIndex == initialIndex) {\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t\tindex = newIndex;\r\n\t\t\t//\r\n\t\t\tComponent component = m_Components[newIndex];\r\n\t\t\tif (component.isEnabled() &amp;&amp; component.isVisible() &amp;&amp; component.isFocusable()) {\r\n\t\t\t\treturn component;\r\n\t\t\t}\r\n\t\t}\r\n\t\t// not found\r\n\t\treturn currentComponent;\r\n\t}\r\n\t////////////////////////////////////////////////////////////////////////////\r\n\t//\r\n\t// FocusTraversalPolicy\r\n\t//\r\n\t////////////////////////////////////////////////////////////////////////////\r\n\tpublic Component getComponentAfter(Container container, Component component) {\r\n\t\treturn cycle(component, 1);\r\n\t}\r\n\tpublic Component getComponentBefore(Container container, Component component) {\r\n\t\treturn cycle(component, -1);\r\n\t}\r\n\tpublic Component getFirstComponent(Container container) {\r\n\t\treturn m_Components[0];\r\n\t}\r\n\tpublic Component getLastComponent(Container container) {\r\n\t\treturn m_Components[m_Components.length - 1];\r\n\t}\r\n\tpublic Component getDefaultComponent(Container container) {\r\n\t\treturn getFirstComponent(container);\r\n\t}\r\n}\r\n```\r\n\r\nAlso here is a simple class to recreate what im saying(it has more functionality ive changed to make it simple but it&#180;s just to recreate the tab problem):\r\n\r\n```\r\n\r\nimport java.awt.Color;\r\nimport java.awt.Component;\r\nimport java.awt.Cursor;\r\nimport java.awt.EventQueue;\r\nimport java.awt.Font;\r\nimport java.awt.event.ActionEvent;\r\nimport java.awt.event.ActionListener;\r\nimport java.awt.event.FocusEvent;\r\nimport java.awt.event.FocusListener;\r\nimport java.awt.event.MouseEvent;\r\nimport java.awt.event.MouseListener;\r\nimport java.awt.event.MouseMotionListener;\r\n\r\nimport javax.swing.ButtonGroup;\r\nimport javax.swing.JButton;\r\nimport javax.swing.JCheckBox;\r\nimport javax.swing.JDialog;\r\nimport javax.swing.JLabel;\r\nimport javax.swing.JOptionPane;\r\nimport javax.swing.JPanel;\r\nimport javax.swing.JRadioButton;\r\nimport javax.swing.JSeparator;\r\nimport javax.swing.JTextField;\r\nimport javax.swing.SwingConstants;\r\nimport javax.swing.border.EmptyBorder;\r\nimport javax.swing.border.EtchedBorder;\r\n\r\nimport org.eclipse.wb.swing.FocusTraversalOnArray;\r\n\r\npublic class ReservaStack extends JDialog implements ActionListener , MouseListener, MouseMotionListener, FocusListener {\r\n\r\n\tprivate static final long serialVersionUID = 1L;\r\n\tprivate JPanel contentPane;\r\n\tprivate JPanel panel;\r\n\tprivate JButton exit;\r\n\t\r\n\tprivate JCheckBox hotel;\r\n\tprivate JLabel hotelLbl;\r\n\tprivate JRadioButton individual;\r\n\tprivate JRadioButton doble;\r\n\tprivate JRadioButton multiple;\r\n\tprivate JTextField numPersonas;\r\n\tprivate JButton accept;\r\n\tprivate JButton cancel;\r\n\tprivate final ButtonGroup habitacionTipo = new ButtonGroup();\r\n\t\r\n\tint yMouse;\r\n\tint xMouse;\r\n\t\r\n\t/*\r\n\t * Launch application\r\n\t */\r\n\tpublic static void main(String[] args) {\r\n\t\tEventQueue.invokeLater(new Runnable() {\r\n\t\t\tpublic void run() {\r\n\t\t\t\ttry {\r\n\t\t\t\t\tReservaStack frame = new ReservaStack();\r\n\t\t\t\t\tframe.setVisible(true);\r\n\t\t\t\t\tframe.setLocationRelativeTo(null);\r\n\t\t\t\t} catch (Exception e) {\r\n\t\t\t\t\te.printStackTrace();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\t\r\n\t/**\r\n\t * Create the frame.\r\n\t */\r\n\tpublic ReservaStack() {\r\n\t\tsetResizable(false);\r\n\t\tsetUndecorated(true);\r\n\t\tsetModal(true);\r\n\t\tsetBounds(100, 100, 600, 400);\r\n\t\tcontentPane = new JPanel();\r\n\t\tcontentPane.setBackground(new Color(255, 255, 255));\r\n\t\tcontentPane.setBorder(new EmptyBorder(5, 5, 5, 5));\r\n\r\n\t\tsetContentPane(contentPane);\r\n\t\tcontentPane.setLayout(null);\r\n\t\t\r\n\t\tpanel = new JPanel();\r\n\t\tpanel.addMouseListener(this);\r\n\t\tpanel.addMouseMotionListener(this);\r\n\t\tpanel.setBackground(new Color(255, 255, 255));\r\n\t\tpanel.setBounds(0, 0, 600, 33);\r\n\t\tcontentPane.add(panel);\r\n\t\tpanel.setLayout(null);\r\n\t\t\r\n\t\texit = new JButton(&quot;X&quot;);\r\n\t\texit.addActionListener(this);\r\n\t\texit.addMouseListener(this);\r\n\t\texit.addFocusListener(this);\r\n\t\texit.setFont(new Font(&quot;Tahoma&quot;, Font.PLAIN, 16));\r\n\t\texit.setBorder(null);\r\n\t\texit.setFocusPainted(false);\r\n\t\texit.setCursor(Cursor.getPredefinedCursor(Cursor.HAND_CURSOR));\r\n\t\texit.setContentAreaFilled(false);\r\n\t\texit.setBounds(0, 0, 63, 33);\r\n\t\tpanel.add(exit);\r\n\t\t\r\n\t\tJLabel reserva = new JLabel(&quot;BOOK&quot;);\r\n\t\treserva.setHorizontalAlignment(SwingConstants.CENTER);\r\n\t\treserva.setFont(new Font(&quot;Cascadia Code&quot;, Font.BOLD, 20));\r\n\t\treserva.setForeground(new Color(255, 255, 255));\r\n\t\treserva.setOpaque(true);\r\n\t\treserva.setBackground(new Color(0, 64, 128));\r\n\t\treserva.setBounds(0, 33, 600, 83);\r\n\t\tcontentPane.add(reserva);\r\n\t\t\r\n\t\thotel = new JCheckBox(&quot;Book a hotel&quot;);\r\n\t\thotel.addActionListener(this);\r\n\t\thotel.setFont(new Font(&quot;Cascadia Code&quot;, Font.PLAIN, 13));\r\n\t\thotel.setBackground(Color.WHITE);\r\n\t\thotel.setBounds(371, 123, 180, 23);\r\n\t\tcontentPane.add(hotel);\r\n\t\t\r\n\t\thotelLbl = new JLabel();\r\n\t\thotelLbl.setText(&quot;Room type&quot;);\r\n\t\thotelLbl.setFont(new Font(&quot;Cascadia Code&quot;, Font.PLAIN, 13));\r\n\t\thotelLbl.setBorder(null);\r\n\t\thotelLbl.setBounds(381, 152, 150, 23);\r\n\t\tcontentPane.add(hotelLbl);\r\n\t\t\r\n\t\tindividual = new JRadioButton(&quot;Individual&quot;);\r\n\t\tindividual.addActionListener(this);\r\n\t\tindividual.setEnabled(false);\r\n\t\tindividual.setFont(new Font(&quot;Cascadia Code&quot;, Font.PLAIN, 13));\r\n\t\tindividual.setOpaque(false);\r\n\t\thabitacionTipo.add(individual);\r\n\t\tindividual.setCursor(Cursor.getPredefinedCursor(Cursor.HAND_CURSOR));\r\n\t\tindividual.setBounds(391, 186, 109, 23);\r\n\t\tcontentPane.add(individual);\r\n\t\t\r\n\t\tdoble = new JRadioButton(&quot;Double&quot;);\r\n\t\tdoble.addActionListener(this);\r\n\t\tdoble.setEnabled(false);\r\n\t\tdoble.setFont(new Font(&quot;Cascadia Code&quot;, Font.PLAIN, 13));\r\n\t\tdoble.setOpaque(false);\r\n\t\thabitacionTipo.add(doble);\r\n\t\tdoble.setCursor(Cursor.getPredefinedCursor(Cursor.HAND_CURSOR));\r\n\t\tdoble.setBounds(391, 220, 109, 23);\r\n\t\tcontentPane.add(doble);\r\n\t\t\r\n\t\tmultiple = new JRadioButton(&quot;Multiple&quot;);\r\n\t\tmultiple.addActionListener(this);\r\n\t\tmultiple.setEnabled(false);\r\n\t\tmultiple.setFont(new Font(&quot;Cascadia Code&quot;, Font.PLAIN, 13));\r\n\t\tmultiple.setOpaque(false);\r\n\t\thabitacionTipo.add(multiple);\r\n\t\tmultiple.setCursor(Cursor.getPredefinedCursor(Cursor.HAND_CURSOR));\r\n\t\tmultiple.setBounds(391, 254, 109, 23);\r\n\t\tcontentPane.add(multiple);\r\n\t\t\r\n\t\tnumPersonas = new JTextField();\r\n\t\tnumPersonas.setEnabled(false);\r\n\t\tnumPersonas.setFont(new Font(&quot;Cascadia Code&quot;, Font.PLAIN, 13));\r\n\t\tnumPersonas.setBorder(null);\r\n\t\tnumPersonas.setBounds(401, 283, 150, 23);\r\n\t\tnumPersonas.setToolTipText(&quot;Introduce el numero de personas&quot;);\r\n\t\tcontentPane.add(numPersonas);\r\n\t\t\r\n\t\tJSeparator separatorNumPers = new JSeparator();\r\n\t\tseparatorNumPers.setForeground(Color.BLACK);\r\n\t\tseparatorNumPers.setBounds(401, 308, 150, 2);\r\n\t\tcontentPane.add(separatorNumPers);\r\n\t\t\r\n\t\taccept = new JButton(&quot;Accept&quot;);\r\n\t\taccept.addActionListener(this);\r\n\t\taccept.addMouseListener(this);\r\n\t\taccept.addFocusListener(this);\r\n\t\taccept.setEnabled(false);\r\n\t\taccept.setBounds(335, 346, 93, 27);\r\n\t\taccept.setBorder(new EtchedBorder(EtchedBorder.LOWERED, null, null));\r\n\t\taccept.setCursor(Cursor.getPredefinedCursor(Cursor.HAND_CURSOR));\r\n\t\taccept.setFocusPainted(false);\r\n\t\taccept.setFont(new Font(&quot;Cascadia Code&quot;, Font.PLAIN, 13));\r\n\t\taccept.setContentAreaFilled(false);\r\n\t\tcontentPane.add(accept);\r\n\t\t\r\n\t\tcancel = new JButton(&quot;Cancel&quot;);\r\n\t\tcancel.addActionListener(this);\r\n\t\tcancel.addMouseListener(this);\r\n\t\tcancel.addFocusListener(this);\r\n\t\tcancel.setBounds(438, 346, 93, 27);\r\n\t\tcancel.setBorder(new EtchedBorder(EtchedBorder.LOWERED, null, null));\r\n\t\tcancel.setCursor(Cursor.getPredefinedCursor(Cursor.HAND_CURSOR));\r\n\t\tcancel.setFocusPainted(false);\r\n\t\tcancel.setFont(new Font(&quot;Cascadia Code&quot;, Font.PLAIN, 13));\r\n\t\tcancel.setContentAreaFilled(false);\r\n\t\tcontentPane.add(cancel);\r\n\t\t\r\n\t\tsetFocusTraversalPolicy(new FocusTraversalOnArray(new Component[]{hotel, individual, doble, multiple, numPersonas, accept, cancel, exit}));\r\n\t}\r\n\r\n\t@Override\r\n\tpublic void actionPerformed(ActionEvent e) {\r\n\t\tif (hotel == e.getSource()) {\r\n\t\t\tindividual.setEnabled(!individual.isEnabled());\r\n\t\t\tdoble.setEnabled(!doble.isEnabled());\r\n\t\t\tmultiple.setEnabled(!multiple.isEnabled());\r\n\t\t\t\r\n\t\t\tif (hotel.isSelected()) {\r\n\t\t\t\taccept.setEnabled(true);\r\n\t\t\t} else {\r\n\t\t\t\taccept.setEnabled(false);\r\n\t\t\t}\r\n\r\n\t\t\tif (!hotel.isSelected()) {\r\n\t\t\t\thabitacionTipo.clearSelection();\r\n\t\t\t\tnumPersonas.setText(&quot;&quot;);\r\n\t\t\t\tnumPersonas.setEnabled(false);\r\n\r\n\t\t\t}\r\n\t\t} else if (multiple == e.getSource()) {\r\n\t\t\tnumPersonas.setEnabled(true);\r\n\t\t} else if (individual == e.getSource() || doble == e.getSource()) {\r\n\t\t\tnumPersonas.setText(&quot;&quot;);\r\n\t\t\tnumPersonas.setEnabled(false);\r\n\t\t} else if (accept == e.getSource()) {\r\n\t\t\tJOptionPane.showMessageDialog(null, &quot;You pressed accept&quot;);\r\n\t\t} else if (cancel == e.getSource() || exit == e.getSource()) {\r\n\t\t\tthis.dispose();\r\n\t\t}\r\n\t}\r\n\r\n\t\r\n\t@Override\r\n\tpublic void mouseClicked(MouseEvent e) {}\r\n\r\n\t@Override\r\n\tpublic void mousePressed(MouseEvent e) {\r\n\t\tif (panel == e.getSource()) {\r\n\t\t\txMouse = e.getX();\r\n\t\t\tyMouse = e.getY();\r\n\t\t}\r\n\t}\r\n\r\n\t@Override\r\n\tpublic void mouseReleased(MouseEvent e) {}\r\n\t\r\n\t@Override\r\n\tpublic void mouseEntered(MouseEvent e) {\r\n\t\tif (accept == e.getSource()) {\r\n\t\t\tif (accept.isEnabled()) {\r\n\t\t\t\taccept.setOpaque(true);\r\n\t\t\t\taccept.setBackground(new Color(0, 64, 128));\r\n\t\t\t\taccept.setForeground(Color.WHITE);\r\n\t\t\t}\r\n\t\t} else if (cancel == e.getSource()) {\r\n\t\t\tcancel.setOpaque(true);\r\n\t\t\tcancel.setBackground(new Color(0, 64, 128));\r\n\t\t\tcancel.setForeground(Color.WHITE);\r\n\t\t} else if (exit == e.getSource()) {\r\n\t\t\texit.setOpaque(true);\r\n\t\t\texit.setBackground(Color.RED);\r\n\t\t\texit.setForeground(Color.WHITE);\r\n\t\t}\r\n\t}\r\n\r\n\t@Override\r\n\tpublic void mouseExited(MouseEvent e) {\r\n\t\tif (accept == e.getSource()) {\r\n\t\t\taccept.setBackground(Color.WHITE);\r\n\t\t\taccept.setForeground(Color.BLACK);\r\n\t\t} else if (cancel == e.getSource()) {\r\n\t\t\tcancel.setBackground(Color.WHITE);\r\n\t\t\tcancel.setForeground(Color.BLACK);\r\n\t\t} else if (exit == e.getSource()) {\r\n\t\t\texit.setBackground(Color.WHITE);\r\n\t\t\texit.setForeground(Color.BLACK);\r\n\t\t}\r\n\t}\r\n\r\n\t@Override\r\n\tpublic void mouseDragged(MouseEvent e) {\r\n\t\tif (panel == e.getSource()) {\r\n\t\t\tint x = e.getXOnScreen();\r\n\t\t\tint y = e.getYOnScreen();\r\n\t\t\tthis.setLocation(x - xMouse, y - yMouse);\r\n\t\t}\r\n\t}\r\n\r\n\t@Override\r\n\tpublic void mouseMoved(MouseEvent e) {}\r\n\r\n\t@Override\r\n\tpublic void focusGained(FocusEvent e) {\r\n\t\tif (accept == e.getSource()) {\r\n\t\t\taccept.setOpaque(true);\r\n\t\t\taccept.setBackground(new Color(0, 64, 128));\r\n\t\t\taccept.setForeground(Color.WHITE);\r\n\t\t} else if (cancel == e.getSource()) {\r\n\t\t\tcancel.setOpaque(true);\r\n\t\t\tcancel.setBackground(new Color(0, 64, 128));\r\n\t\t\tcancel.setForeground(Color.WHITE);\r\n\t\t} else if (exit == e.getSource()) {\r\n\t\t\texit.setOpaque(true);\r\n\t\t\texit.setBackground(Color.RED);\r\n\t\t\texit.setForeground(Color.WHITE);\r\n\t\t}\r\n\t}\r\n\r\n\t@Override\r\n\tpublic void focusLost(FocusEvent e) {\r\n\t\tif (accept == e.getSource()) {\r\n\t\t\taccept.setBackground(Color.WHITE);\r\n\t\t\taccept.setForeground(Color.BLACK);\r\n\t\t} else if (cancel == e.getSource()) {\r\n\t\t\tcancel.setBackground(Color.WHITE);\r\n\t\t\tcancel.setForeground(Color.BLACK);\r\n\t\t} else if (exit == e.getSource()) {\r\n\t\t\texit.setBackground(Color.WHITE);\r\n\t\t\texit.setForeground(Color.BLACK);\r\n\t\t}\r\n\t}\r\n}\r\n```\r\n","title":"Tabs stop working on JRadioButtons but shift + tab still do","body":"<p>I have the tab order set with <code>setFocusTraversalPolicy(new FocusTraversalOnArray(new Component[]{hotel, individual, multiple, numPersons, accept, cancel, exit}));</code> (made with swing builder automatically creating also the class itself). it works perfectly until it goes into the JRadioButtons, they are in a ButtonGroup(which i think where the problem remains). Once it entered there, the tab doesnt work anymore (when it should go to numPersons) BUT the shift+tab does work perfectly (going to hotel).</p>\n<p>Here is a picture of the UI for more clarification:\n<a href=\"https://i.stack.imgur.com/E7QHE.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/E7QHE.png\" alt=\"enter image description here\" /></a></p>\n<p>Here is the class FocusTraversalOnArray that the swing builder created:</p>\n<pre><code>/*******************************************************************************\n * Copyright (c) 2011, 2023 Google, Inc.\n * All rights reserved. This program and the accompanying materials\n * are made available under the terms of the Eclipse Public License v1.0\n * which accompanies this distribution, and is available at\n * http://www.eclipse.org/legal/epl-v10.html\n *\n * Contributors:\n *    Google, Inc. - initial API and implementation\n *******************************************************************************/\npackage org.eclipse.wb.swing;\n\nimport java.awt.Component;\nimport java.awt.Container;\nimport java.awt.FocusTraversalPolicy;\n\n/**\n * Cyclic focus traversal policy based on array of components.\n * &lt;p&gt;\n * This class may be freely distributed as part of any application or plugin.\n * \n * @author scheglov_ke\n */\npublic class FocusTraversalOnArray extends FocusTraversalPolicy {\n    private final Component m_Components[];\n    ////////////////////////////////////////////////////////////////////////////\n    //\n    // Constructor\n    //\n    ////////////////////////////////////////////////////////////////////////////\n    public FocusTraversalOnArray(Component components[]) {\n        m_Components = components;\n    }\n    ////////////////////////////////////////////////////////////////////////////\n    //\n    // Utilities\n    //\n    ////////////////////////////////////////////////////////////////////////////\n    private int indexCycle(int index, int delta) {\n        int size = m_Components.length;\n        int next = (index + delta + size) % size;\n        return next;\n    }\n    private Component cycle(Component currentComponent, int delta) {\n        int index = -1;\n        loop : for (int i = 0; i &lt; m_Components.length; i++) {\n            Component component = m_Components[i];\n            for (Component c = currentComponent; c != null; c = c.getParent()) {\n                if (component == c) {\n                    index = i;\n                    break loop;\n                }\n            }\n        }\n        // try to find enabled component in &quot;delta&quot; direction\n        int initialIndex = index;\n        while (true) {\n            int newIndex = indexCycle(index, delta);\n            if (newIndex == initialIndex) {\n                break;\n            }\n            index = newIndex;\n            //\n            Component component = m_Components[newIndex];\n            if (component.isEnabled() &amp;&amp; component.isVisible() &amp;&amp; component.isFocusable()) {\n                return component;\n            }\n        }\n        // not found\n        return currentComponent;\n    }\n    ////////////////////////////////////////////////////////////////////////////\n    //\n    // FocusTraversalPolicy\n    //\n    ////////////////////////////////////////////////////////////////////////////\n    public Component getComponentAfter(Container container, Component component) {\n        return cycle(component, 1);\n    }\n    public Component getComponentBefore(Container container, Component component) {\n        return cycle(component, -1);\n    }\n    public Component getFirstComponent(Container container) {\n        return m_Components[0];\n    }\n    public Component getLastComponent(Container container) {\n        return m_Components[m_Components.length - 1];\n    }\n    public Component getDefaultComponent(Container container) {\n        return getFirstComponent(container);\n    }\n}\n</code></pre>\n<p>Also here is a simple class to recreate what im saying(it has more functionality ive changed to make it simple but it´s just to recreate the tab problem):</p>\n<pre><code>\nimport java.awt.Color;\nimport java.awt.Component;\nimport java.awt.Cursor;\nimport java.awt.EventQueue;\nimport java.awt.Font;\nimport java.awt.event.ActionEvent;\nimport java.awt.event.ActionListener;\nimport java.awt.event.FocusEvent;\nimport java.awt.event.FocusListener;\nimport java.awt.event.MouseEvent;\nimport java.awt.event.MouseListener;\nimport java.awt.event.MouseMotionListener;\n\nimport javax.swing.ButtonGroup;\nimport javax.swing.JButton;\nimport javax.swing.JCheckBox;\nimport javax.swing.JDialog;\nimport javax.swing.JLabel;\nimport javax.swing.JOptionPane;\nimport javax.swing.JPanel;\nimport javax.swing.JRadioButton;\nimport javax.swing.JSeparator;\nimport javax.swing.JTextField;\nimport javax.swing.SwingConstants;\nimport javax.swing.border.EmptyBorder;\nimport javax.swing.border.EtchedBorder;\n\nimport org.eclipse.wb.swing.FocusTraversalOnArray;\n\npublic class ReservaStack extends JDialog implements ActionListener , MouseListener, MouseMotionListener, FocusListener {\n\n    private static final long serialVersionUID = 1L;\n    private JPanel contentPane;\n    private JPanel panel;\n    private JButton exit;\n    \n    private JCheckBox hotel;\n    private JLabel hotelLbl;\n    private JRadioButton individual;\n    private JRadioButton doble;\n    private JRadioButton multiple;\n    private JTextField numPersonas;\n    private JButton accept;\n    private JButton cancel;\n    private final ButtonGroup habitacionTipo = new ButtonGroup();\n    \n    int yMouse;\n    int xMouse;\n    \n    /*\n     * Launch application\n     */\n    public static void main(String[] args) {\n        EventQueue.invokeLater(new Runnable() {\n            public void run() {\n                try {\n                    ReservaStack frame = new ReservaStack();\n                    frame.setVisible(true);\n                    frame.setLocationRelativeTo(null);\n                } catch (Exception e) {\n                    e.printStackTrace();\n                }\n            }\n        });\n    }\n    \n    /**\n     * Create the frame.\n     */\n    public ReservaStack() {\n        setResizable(false);\n        setUndecorated(true);\n        setModal(true);\n        setBounds(100, 100, 600, 400);\n        contentPane = new JPanel();\n        contentPane.setBackground(new Color(255, 255, 255));\n        contentPane.setBorder(new EmptyBorder(5, 5, 5, 5));\n\n        setContentPane(contentPane);\n        contentPane.setLayout(null);\n        \n        panel = new JPanel();\n        panel.addMouseListener(this);\n        panel.addMouseMotionListener(this);\n        panel.setBackground(new Color(255, 255, 255));\n        panel.setBounds(0, 0, 600, 33);\n        contentPane.add(panel);\n        panel.setLayout(null);\n        \n        exit = new JButton(&quot;X&quot;);\n        exit.addActionListener(this);\n        exit.addMouseListener(this);\n        exit.addFocusListener(this);\n        exit.setFont(new Font(&quot;Tahoma&quot;, Font.PLAIN, 16));\n        exit.setBorder(null);\n        exit.setFocusPainted(false);\n        exit.setCursor(Cursor.getPredefinedCursor(Cursor.HAND_CURSOR));\n        exit.setContentAreaFilled(false);\n        exit.setBounds(0, 0, 63, 33);\n        panel.add(exit);\n        \n        JLabel reserva = new JLabel(&quot;BOOK&quot;);\n        reserva.setHorizontalAlignment(SwingConstants.CENTER);\n        reserva.setFont(new Font(&quot;Cascadia Code&quot;, Font.BOLD, 20));\n        reserva.setForeground(new Color(255, 255, 255));\n        reserva.setOpaque(true);\n        reserva.setBackground(new Color(0, 64, 128));\n        reserva.setBounds(0, 33, 600, 83);\n        contentPane.add(reserva);\n        \n        hotel = new JCheckBox(&quot;Book a hotel&quot;);\n        hotel.addActionListener(this);\n        hotel.setFont(new Font(&quot;Cascadia Code&quot;, Font.PLAIN, 13));\n        hotel.setBackground(Color.WHITE);\n        hotel.setBounds(371, 123, 180, 23);\n        contentPane.add(hotel);\n        \n        hotelLbl = new JLabel();\n        hotelLbl.setText(&quot;Room type&quot;);\n        hotelLbl.setFont(new Font(&quot;Cascadia Code&quot;, Font.PLAIN, 13));\n        hotelLbl.setBorder(null);\n        hotelLbl.setBounds(381, 152, 150, 23);\n        contentPane.add(hotelLbl);\n        \n        individual = new JRadioButton(&quot;Individual&quot;);\n        individual.addActionListener(this);\n        individual.setEnabled(false);\n        individual.setFont(new Font(&quot;Cascadia Code&quot;, Font.PLAIN, 13));\n        individual.setOpaque(false);\n        habitacionTipo.add(individual);\n        individual.setCursor(Cursor.getPredefinedCursor(Cursor.HAND_CURSOR));\n        individual.setBounds(391, 186, 109, 23);\n        contentPane.add(individual);\n        \n        doble = new JRadioButton(&quot;Double&quot;);\n        doble.addActionListener(this);\n        doble.setEnabled(false);\n        doble.setFont(new Font(&quot;Cascadia Code&quot;, Font.PLAIN, 13));\n        doble.setOpaque(false);\n        habitacionTipo.add(doble);\n        doble.setCursor(Cursor.getPredefinedCursor(Cursor.HAND_CURSOR));\n        doble.setBounds(391, 220, 109, 23);\n        contentPane.add(doble);\n        \n        multiple = new JRadioButton(&quot;Multiple&quot;);\n        multiple.addActionListener(this);\n        multiple.setEnabled(false);\n        multiple.setFont(new Font(&quot;Cascadia Code&quot;, Font.PLAIN, 13));\n        multiple.setOpaque(false);\n        habitacionTipo.add(multiple);\n        multiple.setCursor(Cursor.getPredefinedCursor(Cursor.HAND_CURSOR));\n        multiple.setBounds(391, 254, 109, 23);\n        contentPane.add(multiple);\n        \n        numPersonas = new JTextField();\n        numPersonas.setEnabled(false);\n        numPersonas.setFont(new Font(&quot;Cascadia Code&quot;, Font.PLAIN, 13));\n        numPersonas.setBorder(null);\n        numPersonas.setBounds(401, 283, 150, 23);\n        numPersonas.setToolTipText(&quot;Introduce el numero de personas&quot;);\n        contentPane.add(numPersonas);\n        \n        JSeparator separatorNumPers = new JSeparator();\n        separatorNumPers.setForeground(Color.BLACK);\n        separatorNumPers.setBounds(401, 308, 150, 2);\n        contentPane.add(separatorNumPers);\n        \n        accept = new JButton(&quot;Accept&quot;);\n        accept.addActionListener(this);\n        accept.addMouseListener(this);\n        accept.addFocusListener(this);\n        accept.setEnabled(false);\n        accept.setBounds(335, 346, 93, 27);\n        accept.setBorder(new EtchedBorder(EtchedBorder.LOWERED, null, null));\n        accept.setCursor(Cursor.getPredefinedCursor(Cursor.HAND_CURSOR));\n        accept.setFocusPainted(false);\n        accept.setFont(new Font(&quot;Cascadia Code&quot;, Font.PLAIN, 13));\n        accept.setContentAreaFilled(false);\n        contentPane.add(accept);\n        \n        cancel = new JButton(&quot;Cancel&quot;);\n        cancel.addActionListener(this);\n        cancel.addMouseListener(this);\n        cancel.addFocusListener(this);\n        cancel.setBounds(438, 346, 93, 27);\n        cancel.setBorder(new EtchedBorder(EtchedBorder.LOWERED, null, null));\n        cancel.setCursor(Cursor.getPredefinedCursor(Cursor.HAND_CURSOR));\n        cancel.setFocusPainted(false);\n        cancel.setFont(new Font(&quot;Cascadia Code&quot;, Font.PLAIN, 13));\n        cancel.setContentAreaFilled(false);\n        contentPane.add(cancel);\n        \n        setFocusTraversalPolicy(new FocusTraversalOnArray(new Component[]{hotel, individual, doble, multiple, numPersonas, accept, cancel, exit}));\n    }\n\n    @Override\n    public void actionPerformed(ActionEvent e) {\n        if (hotel == e.getSource()) {\n            individual.setEnabled(!individual.isEnabled());\n            doble.setEnabled(!doble.isEnabled());\n            multiple.setEnabled(!multiple.isEnabled());\n            \n            if (hotel.isSelected()) {\n                accept.setEnabled(true);\n            } else {\n                accept.setEnabled(false);\n            }\n\n            if (!hotel.isSelected()) {\n                habitacionTipo.clearSelection();\n                numPersonas.setText(&quot;&quot;);\n                numPersonas.setEnabled(false);\n\n            }\n        } else if (multiple == e.getSource()) {\n            numPersonas.setEnabled(true);\n        } else if (individual == e.getSource() || doble == e.getSource()) {\n            numPersonas.setText(&quot;&quot;);\n            numPersonas.setEnabled(false);\n        } else if (accept == e.getSource()) {\n            JOptionPane.showMessageDialog(null, &quot;You pressed accept&quot;);\n        } else if (cancel == e.getSource() || exit == e.getSource()) {\n            this.dispose();\n        }\n    }\n\n    \n    @Override\n    public void mouseClicked(MouseEvent e) {}\n\n    @Override\n    public void mousePressed(MouseEvent e) {\n        if (panel == e.getSource()) {\n            xMouse = e.getX();\n            yMouse = e.getY();\n        }\n    }\n\n    @Override\n    public void mouseReleased(MouseEvent e) {}\n    \n    @Override\n    public void mouseEntered(MouseEvent e) {\n        if (accept == e.getSource()) {\n            if (accept.isEnabled()) {\n                accept.setOpaque(true);\n                accept.setBackground(new Color(0, 64, 128));\n                accept.setForeground(Color.WHITE);\n            }\n        } else if (cancel == e.getSource()) {\n            cancel.setOpaque(true);\n            cancel.setBackground(new Color(0, 64, 128));\n            cancel.setForeground(Color.WHITE);\n        } else if (exit == e.getSource()) {\n            exit.setOpaque(true);\n            exit.setBackground(Color.RED);\n            exit.setForeground(Color.WHITE);\n        }\n    }\n\n    @Override\n    public void mouseExited(MouseEvent e) {\n        if (accept == e.getSource()) {\n            accept.setBackground(Color.WHITE);\n            accept.setForeground(Color.BLACK);\n        } else if (cancel == e.getSource()) {\n            cancel.setBackground(Color.WHITE);\n            cancel.setForeground(Color.BLACK);\n        } else if (exit == e.getSource()) {\n            exit.setBackground(Color.WHITE);\n            exit.setForeground(Color.BLACK);\n        }\n    }\n\n    @Override\n    public void mouseDragged(MouseEvent e) {\n        if (panel == e.getSource()) {\n            int x = e.getXOnScreen();\n            int y = e.getYOnScreen();\n            this.setLocation(x - xMouse, y - yMouse);\n        }\n    }\n\n    @Override\n    public void mouseMoved(MouseEvent e) {}\n\n    @Override\n    public void focusGained(FocusEvent e) {\n        if (accept == e.getSource()) {\n            accept.setOpaque(true);\n            accept.setBackground(new Color(0, 64, 128));\n            accept.setForeground(Color.WHITE);\n        } else if (cancel == e.getSource()) {\n            cancel.setOpaque(true);\n            cancel.setBackground(new Color(0, 64, 128));\n            cancel.setForeground(Color.WHITE);\n        } else if (exit == e.getSource()) {\n            exit.setOpaque(true);\n            exit.setBackground(Color.RED);\n            exit.setForeground(Color.WHITE);\n        }\n    }\n\n    @Override\n    public void focusLost(FocusEvent e) {\n        if (accept == e.getSource()) {\n            accept.setBackground(Color.WHITE);\n            accept.setForeground(Color.BLACK);\n        } else if (cancel == e.getSource()) {\n            cancel.setBackground(Color.WHITE);\n            cancel.setForeground(Color.BLACK);\n        } else if (exit == e.getSource()) {\n            exit.setBackground(Color.WHITE);\n            exit.setForeground(Color.BLACK);\n        }\n    }\n}\n</code></pre>\n"},{"tags":["java","android","firebase","file-upload","firebase-storage"],"comments":[{"owner":{"account_id":6819231,"reputation":132841,"user_id":5246885,"accept_rate":78,"display_name":"Alex Mamo"},"score":0,"creation_date":1622644338,"post_id":67807069,"comment_id":119852049,"body_markdown":"What exactly in this code doesn&#39;t work the way you expect?\nTell us what is wrong with shared code. Do you have any errors?","body":"What exactly in this code doesn&#39;t work the way you expect? Tell us what is wrong with shared code. Do you have any errors?"},{"owner":{"account_id":11525391,"reputation":27,"user_id":8446019,"display_name":"Anon5678"},"score":0,"creation_date":1622644623,"post_id":67807069,"comment_id":119852167,"body_markdown":"@AlexMamo When the uploadImage method is called it says no image found. I&#39;m assuming its something to do with the URI not being set properly.","body":"@AlexMamo When the uploadImage method is called it says no image found. I&#39;m assuming its something to do with the URI not being set properly."},{"owner":{"account_id":6819231,"reputation":132841,"user_id":5246885,"accept_rate":78,"display_name":"Alex Mamo"},"score":0,"creation_date":1622644723,"post_id":67807069,"comment_id":119852208,"body_markdown":"This means that the `filePath` is null, right?","body":"This means that the <code>filePath</code> is null, right?"},{"owner":{"account_id":11525391,"reputation":27,"user_id":8446019,"display_name":"Anon5678"},"score":0,"creation_date":1622644815,"post_id":67807069,"comment_id":119852243,"body_markdown":"@AlexMamo yes that seems to be the case... I can&#39;t understand why filePath is null","body":"@AlexMamo yes that seems to be the case... I can&#39;t understand why filePath is null"},{"owner":{"account_id":6819231,"reputation":132841,"user_id":5246885,"accept_rate":78,"display_name":"Alex Mamo"},"score":0,"creation_date":1622644968,"post_id":67807069,"comment_id":119852313,"body_markdown":"You should try to debug your app to see why that filePath holds the value of null.","body":"You should try to debug your app to see why that filePath holds the value of null."},{"owner":{"display_name":"user15537898"},"score":0,"creation_date":1622645859,"post_id":67807069,"comment_id":119852771,"body_markdown":"@Anon5678 Which toast message it shows when uploading the image","body":"@Anon5678 Which toast message it shows when uploading the image"},{"owner":{"account_id":11525391,"reputation":27,"user_id":8446019,"display_name":"Anon5678"},"score":0,"creation_date":1622645916,"post_id":67807069,"comment_id":119852799,"body_markdown":"@SagarRawal &quot;No image found&quot; is displayed.","body":"@SagarRawal &quot;No image found&quot; is displayed."},{"owner":{"display_name":"user15537898"},"score":0,"creation_date":1622646450,"post_id":67807069,"comment_id":119853079,"body_markdown":"@Anon5678 Try my code in the answer,  it works for me see if it does for you","body":"@Anon5678 Try my code in the answer,  it works for me see if it does for you"}],"answers":[{"tags":[],"owner":{"display_name":"user15537898"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1622646226,"creation_date":1622646226,"answer_id":67807712,"question_id":67807069,"body_markdown":"This is my code which I used for my app and worked fine, try it if it works then congrats\r\n\r\n\r\n     public View onCreateView(@NonNull LayoutInflater inflater, @Nullable ViewGroup container, @Nullable Bundle savedInstanceState) {\r\n            View view = inflater.inflate(R.layout.fragment_upload, container, false);\r\n            requireActivity().setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_PORTRAIT);\r\n            Button chooseImageButton = view.findViewById(R.id.upload_image_button);\r\n            Button uploadImageButton = view.findViewById(R.id.done_button);\r\n            uploadImageView = view.findViewById(R.id.upload_image_view);\r\n            storageReference = FirebaseStorage.getInstance().getReference(&quot;uploads&quot;);\r\n            databaseReference = FirebaseDatabase.getInstance().getReference(&quot;uploads&quot;);\r\n            chooseImageButton.setOnClickListener(v -&gt; openFileChooser());\r\n            uploadImageButton.setOnClickListener(v -&gt; {\r\n                if (mUploadTask != null &amp;&amp; mUploadTask.isInProgress()) {\r\n                    Toast.makeText(getActivity(), &quot;Upload in Progress&quot;, Toast.LENGTH_SHORT).show();\r\n    \r\n                } else {\r\n                    uploadToFirebase(mImageUri);\r\n                }\r\n    \r\n    \r\n            });\r\n    \r\n            return view;\r\n        }\r\n    \r\n    \r\n        private void openFileChooser() {\r\n            Intent intent = new Intent();\r\n            intent.setType(&quot;image/*&quot;);\r\n            intent.setAction(Intent.ACTION_GET_CONTENT);\r\n            startActivityForResult(intent, PICK_IMAGE_REQUEST);\r\n        }\r\n    \r\n        @Override\r\n        public void onActivityResult(int requestCode, int resultCode, @Nullable Intent data) {\r\n            super.onActivityResult(requestCode, resultCode, data);\r\n            if (requestCode == PICK_IMAGE_REQUEST &amp;&amp; resultCode == RESULT_OK\r\n                    &amp;&amp; data != null &amp;&amp; data.getData() != null) {\r\n                mImageUri = data.getData();\r\n                Picasso.get().load(mImageUri).into(uploadImageView);\r\n    \r\n            }\r\n        }\r\n    \r\n        private String getFileExtension(Uri uri) {\r\n    \r\n            ContentResolver contentResolver = requireActivity().getContentResolver();\r\n            MimeTypeMap mime = MimeTypeMap.getSingleton();\r\n            return mime.getExtensionFromMimeType(contentResolver.getType(uri));\r\n        }\r\n    \r\n        private void uploadToFirebase(Uri mImageUri) {\r\n            if (mImageUri != null) {\r\n                final ProgressDialog progressDialog = new ProgressDialog(getActivity());\r\n                progressDialog.setTitle(&quot;Uploading...&quot;);\r\n                progressDialog.show();\r\n    \r\n                StorageReference reference = storageReference.child(System.currentTimeMillis()\r\n                        + &quot;.&quot; + getFileExtension(mImageUri));\r\n                reference.putFile(mImageUri)\r\n                        .addOnSuccessListener(taskSnapshot -&gt; {\r\n                            progressDialog.dismiss();\r\n                            Toast.makeText(getActivity(), &quot;Saved Succesfully&quot;, Toast.LENGTH_SHORT).show();\r\n                            reference.getDownloadUrl()\r\n                                    .addOnSuccessListener(uri -&gt; {\r\n                                        Upload upload = new Upload(uri.toString());\r\n                                        String uploadId = databaseReference.push().getKey();\r\n                                        databaseReference.child(uploadId).setValue(upload);\r\n                                    });\r\n                        })\r\n                        .addOnProgressListener(snapshot -&gt; {\r\n                            double progress = (100.0 * snapshot.getBytesTransferred() / snapshot\r\n                                    .getTotalByteCount());\r\n                            progressDialog.setMessage(&quot;Uploaded &quot; + (int) progress + &quot;%&quot;);\r\n                        })\r\n                        .addOnFailureListener(e -&gt; {\r\n                            progressDialog.dismiss();\r\n                            Toast.makeText(getActivity(), &quot;Error Ocurred&quot; + e.getMessage(), Toast.LENGTH_SHORT).show();\r\n                        });\r\n    \r\n    \r\n            }\r\n        }\r\n    } ","title":"How to capture image from camera and upload to Firebase","body":"<p>This is my code which I used for my app and worked fine, try it if it works then congrats</p>\n<pre><code> public View onCreateView(@NonNull LayoutInflater inflater, @Nullable ViewGroup container, @Nullable Bundle savedInstanceState) {\n        View view = inflater.inflate(R.layout.fragment_upload, container, false);\n        requireActivity().setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_PORTRAIT);\n        Button chooseImageButton = view.findViewById(R.id.upload_image_button);\n        Button uploadImageButton = view.findViewById(R.id.done_button);\n        uploadImageView = view.findViewById(R.id.upload_image_view);\n        storageReference = FirebaseStorage.getInstance().getReference(&quot;uploads&quot;);\n        databaseReference = FirebaseDatabase.getInstance().getReference(&quot;uploads&quot;);\n        chooseImageButton.setOnClickListener(v -&gt; openFileChooser());\n        uploadImageButton.setOnClickListener(v -&gt; {\n            if (mUploadTask != null &amp;&amp; mUploadTask.isInProgress()) {\n                Toast.makeText(getActivity(), &quot;Upload in Progress&quot;, Toast.LENGTH_SHORT).show();\n\n            } else {\n                uploadToFirebase(mImageUri);\n            }\n\n\n        });\n\n        return view;\n    }\n\n\n    private void openFileChooser() {\n        Intent intent = new Intent();\n        intent.setType(&quot;image/*&quot;);\n        intent.setAction(Intent.ACTION_GET_CONTENT);\n        startActivityForResult(intent, PICK_IMAGE_REQUEST);\n    }\n\n    @Override\n    public void onActivityResult(int requestCode, int resultCode, @Nullable Intent data) {\n        super.onActivityResult(requestCode, resultCode, data);\n        if (requestCode == PICK_IMAGE_REQUEST &amp;&amp; resultCode == RESULT_OK\n                &amp;&amp; data != null &amp;&amp; data.getData() != null) {\n            mImageUri = data.getData();\n            Picasso.get().load(mImageUri).into(uploadImageView);\n\n        }\n    }\n\n    private String getFileExtension(Uri uri) {\n\n        ContentResolver contentResolver = requireActivity().getContentResolver();\n        MimeTypeMap mime = MimeTypeMap.getSingleton();\n        return mime.getExtensionFromMimeType(contentResolver.getType(uri));\n    }\n\n    private void uploadToFirebase(Uri mImageUri) {\n        if (mImageUri != null) {\n            final ProgressDialog progressDialog = new ProgressDialog(getActivity());\n            progressDialog.setTitle(&quot;Uploading...&quot;);\n            progressDialog.show();\n\n            StorageReference reference = storageReference.child(System.currentTimeMillis()\n                    + &quot;.&quot; + getFileExtension(mImageUri));\n            reference.putFile(mImageUri)\n                    .addOnSuccessListener(taskSnapshot -&gt; {\n                        progressDialog.dismiss();\n                        Toast.makeText(getActivity(), &quot;Saved Succesfully&quot;, Toast.LENGTH_SHORT).show();\n                        reference.getDownloadUrl()\n                                .addOnSuccessListener(uri -&gt; {\n                                    Upload upload = new Upload(uri.toString());\n                                    String uploadId = databaseReference.push().getKey();\n                                    databaseReference.child(uploadId).setValue(upload);\n                                });\n                    })\n                    .addOnProgressListener(snapshot -&gt; {\n                        double progress = (100.0 * snapshot.getBytesTransferred() / snapshot\n                                .getTotalByteCount());\n                        progressDialog.setMessage(&quot;Uploaded &quot; + (int) progress + &quot;%&quot;);\n                    })\n                    .addOnFailureListener(e -&gt; {\n                        progressDialog.dismiss();\n                        Toast.makeText(getActivity(), &quot;Error Ocurred&quot; + e.getMessage(), Toast.LENGTH_SHORT).show();\n                    });\n\n\n        }\n    }\n} \n</code></pre>\n"},{"tags":[],"owner":{"account_id":13654747,"reputation":38532,"user_id":9851608,"display_name":"Zain"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1622691403,"creation_date":1622647986,"answer_id":67808206,"question_id":67807069,"body_markdown":"A potential workaround is to upload a byte array into firebase; so when taking a photo by camera, you can get the Bitmap byte array from the intent received in `onActivityResult()` and eventually upload the byte array to the firebase storage using [`ref.putBytes()`][1] method.\r\n\r\nThis can be done in several steps like in below: \r\n\r\nHere I&#39;m assuming that the `requestCode` for camera in `onActivityResult()` is 1:\r\n\r\n\r\n\tfinal int FROM_GALLERY = 0;\r\n\tfinal int FROM_CAMERA = 1;\r\n\r\n    @Override\r\n    protected void onActivityResult(int requestCode, int resultCode, @Nullable Intent data) {\r\n        super.onActivityResult(requestCode, resultCode, data);\r\n\r\n\t\t\r\n        if (resultCode == RESULT_OK &amp;&amp; data != null) {\r\n\r\n            switch (requestCode) {\r\n\t\t\t\r\n                case FROM_GALLERY:\r\n\t\t\t\t\r\n\t\t\t\t\t// Handle image from the gallery\r\n\t\t\t\t\tfilePath = data.getData();\r\n                    break;\r\n\r\n\r\n                case FROM_CAMERA:\r\n\t\t\t\t\r\n\t\t\t\t\t// Handle image from the camera\r\n\t\r\n\t\t\t\t\tif (data.getExtras() != null) {\r\n\t\t\t\t\t\tBitmap photoBitmap = (Bitmap) data.getExtras().get(&quot;data&quot;);\r\n\t\t\t\t\t\tbyte[] bitmapBytes = getBytesFromBitmap(bitmap, 100);\r\n\t\t\t\t\t\tuploadToFirebase(bitmapBytes);\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t}\r\n\r\n                    break;\r\n            }\r\n\r\n        }\r\n    }\r\n\t\r\n\t\r\n    // convert from bitmap to byte array\r\n    public static byte[] getBytesFromBitmap(Bitmap bitmap, int quality) {\r\n        ByteArrayOutputStream stream = new ByteArrayOutputStream();\r\n        bitmap.compress(Bitmap.CompressFormat.JPEG, quality, stream);\r\n\t\t// bitmap.compress(Bitmap.CompressFormat.PNG, quality, stream); // According to the needed quality\r\n        return stream.toByteArray();\r\n    }\t\r\n\t\r\n\t\r\n\r\n\tpublic void uploadToFirebase(bytes[] bytes) {\r\n\t    StorageReference ref = .... \r\n\t\tref.putBytes(bytes)\r\n\t\t\t.addOnSuccessListener(new OnSuccessListener&lt;UploadTask.TaskSnapshot&gt;() {\r\n\t\t\t\t@Override\r\n\t\t\t\tpublic void onSuccess(UploadTask.TaskSnapshot taskSnapshot) {\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}).addOnFailureListener(new OnFailureListener() {\r\n\t\t\t\t@Override\r\n\t\t\t\tpublic void onFailure(@NonNull Exception exception) {\r\n\t\t\t\t}\r\n\r\n\t\t\t}).addOnProgressListener(new OnProgressListener&lt;UploadTask.TaskSnapshot&gt;() {\r\n\t\t\t\t@Override\r\n\t\t\t\tpublic void onProgress(UploadTask.TaskSnapshot taskSnapshot) {\r\n\r\n\t\t\t\t}\r\n\t\t\t});\t\r\n\t}\r\n\r\n\r\n  [1]: https://firebase.google.com/docs/reference/android/com/google/firebase/storage/StorageReference#putBytes(byte[])","title":"How to capture image from camera and upload to Firebase","body":"<p>A potential workaround is to upload a byte array into firebase; so when taking a photo by camera, you can get the Bitmap byte array from the intent received in <code>onActivityResult()</code> and eventually upload the byte array to the firebase storage using <a href=\"https://firebase.google.com/docs/reference/android/com/google/firebase/storage/StorageReference#putBytes(byte%5B%5D)\" rel=\"nofollow noreferrer\"><code>ref.putBytes()</code></a> method.</p>\n<p>This can be done in several steps like in below:</p>\n<p>Here I'm assuming that the <code>requestCode</code> for camera in <code>onActivityResult()</code> is 1:</p>\n<pre><code>final int FROM_GALLERY = 0;\nfinal int FROM_CAMERA = 1;\n\n@Override\nprotected void onActivityResult(int requestCode, int resultCode, @Nullable Intent data) {\n    super.onActivityResult(requestCode, resultCode, data);\n\n    \n    if (resultCode == RESULT_OK &amp;&amp; data != null) {\n\n        switch (requestCode) {\n        \n            case FROM_GALLERY:\n            \n                // Handle image from the gallery\n                filePath = data.getData();\n                break;\n\n\n            case FROM_CAMERA:\n            \n                // Handle image from the camera\n\n                if (data.getExtras() != null) {\n                    Bitmap photoBitmap = (Bitmap) data.getExtras().get(&quot;data&quot;);\n                    byte[] bitmapBytes = getBytesFromBitmap(bitmap, 100);\n                    uploadToFirebase(bitmapBytes);\n                    \n                }\n\n                break;\n        }\n\n    }\n}\n\n\n// convert from bitmap to byte array\npublic static byte[] getBytesFromBitmap(Bitmap bitmap, int quality) {\n    ByteArrayOutputStream stream = new ByteArrayOutputStream();\n    bitmap.compress(Bitmap.CompressFormat.JPEG, quality, stream);\n    // bitmap.compress(Bitmap.CompressFormat.PNG, quality, stream); // According to the needed quality\n    return stream.toByteArray();\n}   \n\n\n\npublic void uploadToFirebase(bytes[] bytes) {\n    StorageReference ref = .... \n    ref.putBytes(bytes)\n        .addOnSuccessListener(new OnSuccessListener&lt;UploadTask.TaskSnapshot&gt;() {\n            @Override\n            public void onSuccess(UploadTask.TaskSnapshot taskSnapshot) {\n\n            }\n\n        }).addOnFailureListener(new OnFailureListener() {\n            @Override\n            public void onFailure(@NonNull Exception exception) {\n            }\n\n        }).addOnProgressListener(new OnProgressListener&lt;UploadTask.TaskSnapshot&gt;() {\n            @Override\n            public void onProgress(UploadTask.TaskSnapshot taskSnapshot) {\n\n            }\n        }); \n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":27452439,"reputation":181,"user_id":20944457,"display_name":"naveed ahmed"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1699949441,"creation_date":1699949441,"answer_id":77479050,"question_id":67807069,"body_markdown":"        @Override\r\n            protected void onActivityResult(int requestCode, int resultCode, Intent data) {\r\n                super.onActivityResult(requestCode, resultCode, data);\r\n        \r\n                if (resultCode == RESULT_OK) {\r\n                    if (requestCode == REQUEST_CAMERA) {\r\n                        Bundle bundle = data.getExtras();\r\n                        if (bundle != null) {\r\n                            Bitmap photo = (Bitmap) bundle.get(&quot;data&quot;);\r\n                            byte[] bitmapBytes = getBytesFromBitmap(photo, 100);\r\n                            profilePicture.setImageBitmap(photo);\r\n        \r\n                            StorageReference ref\r\n                                    = storageReference\r\n                                    .child(\r\n                                            &quot;images/&quot;\r\n                                                    + imagename);\r\n        \r\n                            // adding listeners on upload\r\n                            // or failure of image\r\n                            ref.putBytes(bitmapBytes)\r\n                                    .addOnSuccessListener(\r\n                                            new OnSuccessListener&lt;UploadTask.TaskSnapshot&gt;() {\r\n        \r\n                                                @Override\r\n                                                public void onSuccess(\r\n                                                        UploadTask.TaskSnapshot taskSnapshot) {\r\n        \r\n                                                    // Image uploaded successfully\r\n                                                    // Dismiss dialog\r\n                                                    Toast.makeText(getApplicationContext(),\r\n                                                                    &quot;Image Uploaded!!&quot;,\r\n                                                                    Toast.LENGTH_SHORT)\r\n                                                            .show();\r\n                                                }\r\n                                            })\r\n        \r\n                                    .addOnFailureListener(new OnFailureListener() {\r\n                                        @Override\r\n                                        public void onFailure(@NonNull Exception e) {\r\n        \r\n                                            // Error, Image not uploaded\r\n                                            Toast.makeText(getApplicationContext(), &quot;Failed &quot; + e.getMessage(), Toast.LENGTH_SHORT)\r\n                                                    .show();\r\n                                        }\r\n                                    });\r\n        \r\n        \r\n                        }\r\n                    } else if (requestCode == REQUEST_GALLERY) {\r\n                        if (data != null) {\r\n                            Uri selectedImage = data.getData();\r\n        \r\n                            try {\r\n                                Bitmap bitmap = MediaStore.Images.Media.getBitmap(getContentResolver(), selectedImage);\r\n        \r\n                                profilePicture.setImageBitmap(bitmap);\r\n                                StorageReference ref\r\n                                        = storageReference\r\n                                        .child(\r\n                                                &quot;images/&quot;\r\n                                                        + imagename);\r\n        \r\n                                // adding listeners on upload\r\n                                // or failure of image\r\n                                ref.putFile(selectedImage)\r\n                                        .addOnSuccessListener(\r\n                                                new OnSuccessListener&lt;UploadTask.TaskSnapshot&gt;() {\r\n        \r\n                                                    @Override\r\n                                                    public void onSuccess(\r\n                                                            UploadTask.TaskSnapshot taskSnapshot) {\r\n        \r\n                                                        // Image uploaded successfully\r\n                                                        // Dismiss dialog\r\n                                                        Toast.makeText(getApplicationContext(),\r\n                                                                        &quot;Your profile picture have been chnaged successfully&quot;,\r\n                                                                        Toast.LENGTH_SHORT)\r\n                                                                .show();\r\n                                                    }\r\n                                                })\r\n        \r\n                                        .addOnFailureListener(new OnFailureListener() {\r\n                                            @Override\r\n                                            public void onFailure(@NonNull Exception e) {\r\n        \r\n                                                // Error, Image not uploaded\r\n                                                Toast.makeText(getApplicationContext(), &quot;Failed &quot; + e.getMessage(), Toast.LENGTH_SHORT)\r\n                                                        .show();\r\n                                            }\r\n                                        });\r\n        \r\n        \r\n                            } catch (IOException e) {\r\n                                e.printStackTrace();\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n            public static byte[] getBytesFromBitmap(Bitmap bitmap, int quality) {\r\n                ByteArrayOutputStream stream = new ByteArrayOutputStream();\r\n                bitmap.compress(Bitmap.CompressFormat.JPEG, quality, stream);\r\n                // bitmap.compress(Bitmap.CompressFormat.PNG, quality, stream); // According to the needed quality\r\n                return stream.toByteArray();\r\n            }\r\n    private void openCamera() {\r\n            Intent cameraIntent = new Intent(MediaStore.ACTION_IMAGE_CAPTURE);\r\n            startActivityForResult(cameraIntent, REQUEST_CAMERA);\r\n        }\r\n    \r\n        private void openGallery() {\r\n            Intent galleryIntent = new Intent(Intent.ACTION_PICK, MediaStore.Images.Media.EXTERNAL_CONTENT_URI);\r\n            startActivityForResult(galleryIntent, REQUEST_GALLERY);\r\n        }\r\n\r\n","title":"How to capture image from camera and upload to Firebase","body":"<pre><code>    @Override\n        protected void onActivityResult(int requestCode, int resultCode, Intent data) {\n            super.onActivityResult(requestCode, resultCode, data);\n    \n            if (resultCode == RESULT_OK) {\n                if (requestCode == REQUEST_CAMERA) {\n                    Bundle bundle = data.getExtras();\n                    if (bundle != null) {\n                        Bitmap photo = (Bitmap) bundle.get(&quot;data&quot;);\n                        byte[] bitmapBytes = getBytesFromBitmap(photo, 100);\n                        profilePicture.setImageBitmap(photo);\n    \n                        StorageReference ref\n                                = storageReference\n                                .child(\n                                        &quot;images/&quot;\n                                                + imagename);\n    \n                        // adding listeners on upload\n                        // or failure of image\n                        ref.putBytes(bitmapBytes)\n                                .addOnSuccessListener(\n                                        new OnSuccessListener&lt;UploadTask.TaskSnapshot&gt;() {\n    \n                                            @Override\n                                            public void onSuccess(\n                                                    UploadTask.TaskSnapshot taskSnapshot) {\n    \n                                                // Image uploaded successfully\n                                                // Dismiss dialog\n                                                Toast.makeText(getApplicationContext(),\n                                                                &quot;Image Uploaded!!&quot;,\n                                                                Toast.LENGTH_SHORT)\n                                                        .show();\n                                            }\n                                        })\n    \n                                .addOnFailureListener(new OnFailureListener() {\n                                    @Override\n                                    public void onFailure(@NonNull Exception e) {\n    \n                                        // Error, Image not uploaded\n                                        Toast.makeText(getApplicationContext(), &quot;Failed &quot; + e.getMessage(), Toast.LENGTH_SHORT)\n                                                .show();\n                                    }\n                                });\n    \n    \n                    }\n                } else if (requestCode == REQUEST_GALLERY) {\n                    if (data != null) {\n                        Uri selectedImage = data.getData();\n    \n                        try {\n                            Bitmap bitmap = MediaStore.Images.Media.getBitmap(getContentResolver(), selectedImage);\n    \n                            profilePicture.setImageBitmap(bitmap);\n                            StorageReference ref\n                                    = storageReference\n                                    .child(\n                                            &quot;images/&quot;\n                                                    + imagename);\n    \n                            // adding listeners on upload\n                            // or failure of image\n                            ref.putFile(selectedImage)\n                                    .addOnSuccessListener(\n                                            new OnSuccessListener&lt;UploadTask.TaskSnapshot&gt;() {\n    \n                                                @Override\n                                                public void onSuccess(\n                                                        UploadTask.TaskSnapshot taskSnapshot) {\n    \n                                                    // Image uploaded successfully\n                                                    // Dismiss dialog\n                                                    Toast.makeText(getApplicationContext(),\n                                                                    &quot;Your profile picture have been chnaged successfully&quot;,\n                                                                    Toast.LENGTH_SHORT)\n                                                            .show();\n                                                }\n                                            })\n    \n                                    .addOnFailureListener(new OnFailureListener() {\n                                        @Override\n                                        public void onFailure(@NonNull Exception e) {\n    \n                                            // Error, Image not uploaded\n                                            Toast.makeText(getApplicationContext(), &quot;Failed &quot; + e.getMessage(), Toast.LENGTH_SHORT)\n                                                    .show();\n                                        }\n                                    });\n    \n    \n                        } catch (IOException e) {\n                            e.printStackTrace();\n                        }\n                    }\n                }\n            }\n        }\n        public static byte[] getBytesFromBitmap(Bitmap bitmap, int quality) {\n            ByteArrayOutputStream stream = new ByteArrayOutputStream();\n            bitmap.compress(Bitmap.CompressFormat.JPEG, quality, stream);\n            // bitmap.compress(Bitmap.CompressFormat.PNG, quality, stream); // According to the needed quality\n            return stream.toByteArray();\n        }\nprivate void openCamera() {\n        Intent cameraIntent = new Intent(MediaStore.ACTION_IMAGE_CAPTURE);\n        startActivityForResult(cameraIntent, REQUEST_CAMERA);\n    }\n\n    private void openGallery() {\n        Intent galleryIntent = new Intent(Intent.ACTION_PICK, MediaStore.Images.Media.EXTERNAL_CONTENT_URI);\n        startActivityForResult(galleryIntent, REQUEST_GALLERY);\n    }\n</code></pre>\n"}],"owner":{"account_id":11525391,"reputation":27,"user_id":8446019,"display_name":"Anon5678"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":443,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":3,"score":1,"last_activity_date":1699949441,"creation_date":1622643905,"question_id":67807069,"body_markdown":"I am trying to take a photo with the camera and upload it to Firebase. I&#39;m using a AlertDialog to ask the user if they want to use the camera or select image from gallery. I can take a picture with the camera but when I try to upload the image it says no image found.\r\n\r\nHere is my image selection method:\r\n\r\n        private void imageSelect(Context context) {\r\n        final CharSequence[] options = { &quot;Take Photo&quot;, &quot;Choose from Gallery&quot;,&quot;Cancel&quot; };\r\n\r\n        AlertDialog.Builder builder = new AlertDialog.Builder(context);\r\n        builder.setTitle(&quot;Choose Image&quot;);\r\n\r\n        builder.setItems(options, new DialogInterface.OnClickListener() {\r\n\r\n            @Override\r\n            public void onClick(DialogInterface dialog, int item) {\r\n\r\n                if (options[item].equals(&quot;Take Photo&quot;)) {\r\n                    Intent takePicture = new Intent(MediaStore.ACTION_IMAGE_CAPTURE);\r\n                    startActivityForResult(takePicture, 0);\r\n\r\n                } else if (options[item].equals(&quot;Choose from Gallery&quot;)) {\r\n                    Intent pickPhoto = new Intent(Intent.ACTION_PICK, android.provider.MediaStore.Images.Media.EXTERNAL_CONTENT_URI);\r\n                    startActivityForResult(pickPhoto , 1);\r\n\r\n                } else if (options[item].equals(&quot;Cancel&quot;)) {\r\n                    dialog.dismiss();\r\n                }\r\n            }\r\n        });\r\n        builder.show();\r\n    }\r\n    @Override\r\n    protected void onActivityResult(int requestCode, int resultCode, Intent data) {\r\n        super.onActivityResult(requestCode, resultCode, data);\r\n        switch(requestCode) {\r\n            case 0:\r\n                if(resultCode == RESULT_OK){\r\n                    filePath = data.getData();\r\n                }\r\n\r\n                break;\r\n            case 1:\r\n                if(resultCode == RESULT_OK){\r\n                    filePath = data.getData();\r\n                    try {\r\n                        Bitmap bitmap = MediaStore.Images.Media.getBitmap(getContentResolver(), filePath);\r\n                    }\r\n                    catch (IOException e)\r\n                    {\r\n                        e.printStackTrace();\r\n                    }\r\n                }\r\n                break;\r\n        }\r\n    }\r\n\r\nHere is my upload image method:\r\n\r\n        private void uploadImage() {\r\n        if (filePath != null) {\r\n            //Code for showing progressDialog while uploading\r\n            ProgressDialog progressDialog = new ProgressDialog(this);\r\n            progressDialog.setTitle(&quot;Uploading...&quot;);\r\n            progressDialog.show();\r\n\r\n            StorageReference ref = storageReference.child(&quot;images/&quot; + name);\r\n            //Adding listeners on upload or failure of image\r\n            ref.putFile(filePath).addOnSuccessListener(new OnSuccessListener&lt;UploadTask.TaskSnapshot&gt;() {\r\n                @Override\r\n                public void onSuccess(UploadTask.TaskSnapshot taskSnapshot) {\r\n                    //Image uploaded successfully\r\n                    progressDialog.dismiss();\r\n                    Toast.makeText(add_property.this, &quot;Image Uploaded!&quot;, Toast.LENGTH_SHORT).show();\r\n                }\r\n            }).addOnFailureListener(new OnFailureListener() {\r\n                @Override\r\n                public void onFailure(@NonNull Exception e) {\r\n                    //Error, Image not uploaded\r\n                    progressDialog.dismiss();\r\n                    Toast.makeText(add_property.this, &quot;Failed &quot; + e.getMessage(), Toast.LENGTH_SHORT).show();\r\n                }\r\n            }).addOnProgressListener(new OnProgressListener&lt;UploadTask.TaskSnapshot&gt;() {\r\n                //Progress Listener for loading\r\n                @Override\r\n                public void onProgress(UploadTask.TaskSnapshot taskSnapshot) {\r\n                    double progress = (100.0 * taskSnapshot.getBytesTransferred() / taskSnapshot.getTotalByteCount());\r\n                    progressDialog.setMessage(&quot;Uploaded &quot; + (int) progress + &quot;%&quot;);\r\n                }\r\n            });\r\n        }\r\n        else {\r\n            Toast.makeText(getApplicationContext(),&quot;No image found&quot;,Toast.LENGTH_SHORT).show();\r\n        }\r\n    }\r\n\r\nThanks in advance for any help friends.","title":"How to capture image from camera and upload to Firebase","body":"<p>I am trying to take a photo with the camera and upload it to Firebase. I'm using a AlertDialog to ask the user if they want to use the camera or select image from gallery. I can take a picture with the camera but when I try to upload the image it says no image found.</p>\n<p>Here is my image selection method:</p>\n<pre><code>    private void imageSelect(Context context) {\n    final CharSequence[] options = { &quot;Take Photo&quot;, &quot;Choose from Gallery&quot;,&quot;Cancel&quot; };\n\n    AlertDialog.Builder builder = new AlertDialog.Builder(context);\n    builder.setTitle(&quot;Choose Image&quot;);\n\n    builder.setItems(options, new DialogInterface.OnClickListener() {\n\n        @Override\n        public void onClick(DialogInterface dialog, int item) {\n\n            if (options[item].equals(&quot;Take Photo&quot;)) {\n                Intent takePicture = new Intent(MediaStore.ACTION_IMAGE_CAPTURE);\n                startActivityForResult(takePicture, 0);\n\n            } else if (options[item].equals(&quot;Choose from Gallery&quot;)) {\n                Intent pickPhoto = new Intent(Intent.ACTION_PICK, android.provider.MediaStore.Images.Media.EXTERNAL_CONTENT_URI);\n                startActivityForResult(pickPhoto , 1);\n\n            } else if (options[item].equals(&quot;Cancel&quot;)) {\n                dialog.dismiss();\n            }\n        }\n    });\n    builder.show();\n}\n@Override\nprotected void onActivityResult(int requestCode, int resultCode, Intent data) {\n    super.onActivityResult(requestCode, resultCode, data);\n    switch(requestCode) {\n        case 0:\n            if(resultCode == RESULT_OK){\n                filePath = data.getData();\n            }\n\n            break;\n        case 1:\n            if(resultCode == RESULT_OK){\n                filePath = data.getData();\n                try {\n                    Bitmap bitmap = MediaStore.Images.Media.getBitmap(getContentResolver(), filePath);\n                }\n                catch (IOException e)\n                {\n                    e.printStackTrace();\n                }\n            }\n            break;\n    }\n}\n</code></pre>\n<p>Here is my upload image method:</p>\n<pre><code>    private void uploadImage() {\n    if (filePath != null) {\n        //Code for showing progressDialog while uploading\n        ProgressDialog progressDialog = new ProgressDialog(this);\n        progressDialog.setTitle(&quot;Uploading...&quot;);\n        progressDialog.show();\n\n        StorageReference ref = storageReference.child(&quot;images/&quot; + name);\n        //Adding listeners on upload or failure of image\n        ref.putFile(filePath).addOnSuccessListener(new OnSuccessListener&lt;UploadTask.TaskSnapshot&gt;() {\n            @Override\n            public void onSuccess(UploadTask.TaskSnapshot taskSnapshot) {\n                //Image uploaded successfully\n                progressDialog.dismiss();\n                Toast.makeText(add_property.this, &quot;Image Uploaded!&quot;, Toast.LENGTH_SHORT).show();\n            }\n        }).addOnFailureListener(new OnFailureListener() {\n            @Override\n            public void onFailure(@NonNull Exception e) {\n                //Error, Image not uploaded\n                progressDialog.dismiss();\n                Toast.makeText(add_property.this, &quot;Failed &quot; + e.getMessage(), Toast.LENGTH_SHORT).show();\n            }\n        }).addOnProgressListener(new OnProgressListener&lt;UploadTask.TaskSnapshot&gt;() {\n            //Progress Listener for loading\n            @Override\n            public void onProgress(UploadTask.TaskSnapshot taskSnapshot) {\n                double progress = (100.0 * taskSnapshot.getBytesTransferred() / taskSnapshot.getTotalByteCount());\n                progressDialog.setMessage(&quot;Uploaded &quot; + (int) progress + &quot;%&quot;);\n            }\n        });\n    }\n    else {\n        Toast.makeText(getApplicationContext(),&quot;No image found&quot;,Toast.LENGTH_SHORT).show();\n    }\n}\n</code></pre>\n<p>Thanks in advance for any help friends.</p>\n"},{"tags":["java","android","okhttp","illegalstateexception","google-directions-api"],"answers":[{"tags":[],"owner":{"account_id":19972988,"reputation":51,"user_id":14638023,"display_name":"kaigalmane"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1699948886,"creation_date":1699948886,"answer_id":77479008,"question_id":75978119,"body_markdown":"I was able to resolve this exact issue by adding the below dependency to the module-level `build.gradle`\r\n\r\n    implementation(&quot;com.squareup.okhttp3:okhttp:4.11.0&quot;)","title":"Recieve IllegalStateException when I try to build GeoApiContext to get polyline for my maps","body":"<p>I was able to resolve this exact issue by adding the below dependency to the module-level <code>build.gradle</code></p>\n<pre><code>implementation(&quot;com.squareup.okhttp3:okhttp:4.11.0&quot;)\n</code></pre>\n"}],"owner":{"account_id":14984624,"reputation":17,"user_id":10817579,"display_name":"kinghabz 14"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":90,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1699948886,"creation_date":1681138193,"question_id":75978119,"body_markdown":"I am trying to display the distance between two points as a polyline on the google maps in my app. For some reason this line of code keeps giving me the same exception which causes my app to crash at run time after my main activity is displayed &amp; then when I open this activity by pressing a button. Here is the line of code:\r\n\r\n    GeoApiContext context = new GeoApiContext.Builder()\r\n                    .apiKey(&quot;apikey&quot;)\r\n                    .build();\r\n\r\nHere is the exception I recieve:\r\n\r\n    java.lang.ExceptionInInitializerError\r\n        at okhttp3.internal.platform.Platform.get(Platform.java:85)\r\n        at okhttp3.OkHttpClient.newSslSocketFactory(OkHttpClient.java:263)\r\n        at okhttp3.OkHttpClient.&lt;init&gt;(OkHttpClient.java:229)\r\n        at okhttp3.OkHttpClient$Builder.build(OkHttpClient.java:1015)\r\n        at com.google.maps.OkHttpRequestHandler$Builder.build(OkHttpRequestHandler.java:201)\r\n        at com.google.maps.GeoApiContext$Builder.build(GeoApiContext.java:625)\r\n        at com.project.prayerpal.ClosestDestination.onMapReady(ClosestDestination.java:89)\r\n        at com.google.android.gms.maps.zzat.zzb(com.google.android.gms:play-services-maps@@18.1.0:1)\r\n        at com.google.android.gms.maps.internal.zzar.zza(com.google.android.gms:play-services-maps@@18.1.0:6)\r\n        at com.google.android.gms.internal.maps.zzb.onTransact(com.google.android.gms:play-services-maps@@18.1.0:3)\r\n        at android.os.Binder.transact(Binder.java:1084)\r\n        at fe.c(:com.google.android.gms.dynamite_mapsdynamite@231254044@23.12.54 (190400-0):2)\r\n        at com.google.maps.api.android.lib6.impl.bg.run(:com.google.android.gms.dynamite_mapsdynamite@231254044@23.12.54 (190400-0):1)\r\n        at android.os.Handler.handleCallback(Handler.java:938)\r\n        at android.os.Handler.dispatchMessage(Handler.java:99)\r\n        at android.os.Looper.loopOnce(Looper.java:233)\r\n        at android.os.Looper.loop(Looper.java:344)\r\n        at android.app.ActivityThread.main(ActivityThread.java:8212)\r\n        at java.lang.reflect.Method.invoke(Native Method)\r\n        at com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:584)\r\n        at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:1034)\r\n     Caused by: java.lang.IllegalStateException: Expected Android API level 21+ but was 31\r\n        at okhttp3.internal.platform.AndroidPlatform.buildIfSupported(AndroidPlatform.java:238)\r\n        at okhttp3.internal.platform.Platform.findPlatform(Platform.java:202)\r\n        at okhttp3.internal.platform.Platform.&lt;clinit&gt;(Platform.java:79)\r\n        at okhttp3.internal.platform.Platform.get(Platform.java:85) \r\n        at okhttp3.OkHttpClient.newSslSocketFactory(OkHttpClient.java:263) \r\n        at okhttp3.OkHttpClient.&lt;init&gt;(OkHttpClient.java:229) \r\n        at okhttp3.OkHttpClient$Builder.build(OkHttpClient.java:1015) \r\n        at com.google.maps.OkHttpRequestHandler$Builder.build(OkHttpRequestHandler.java:201) \r\n        at com.google.maps.GeoApiContext$Builder.build(GeoApiContext.java:625) \r\n        at com.project.prayerpal.ClosestDestination.onMapReady(ClosestDestination.java:89) \r\n        at com.google.android.gms.maps.zzat.zzb(com.google.android.gms:play-services-maps@@18.1.0:1) \r\n        at com.google.android.gms.maps.internal.zzar.zza(com.google.android.gms:play-services-maps@@18.1.0:6) \r\n        at com.google.android.gms.internal.maps.zzb.onTransact(com.google.android.gms:play-services-maps@@18.1.0:3) \r\n        at android.os.Binder.transact(Binder.java:1084) \r\n        at fe.c(:com.google.android.gms.dynamite_mapsdynamite@231254044@23.12.54 (190400-0):2) \r\n        at com.google.maps.api.android.lib6.impl.bg.run(:com.google.android.gms.dynamite_mapsdynamite@231254044@23.12.54 (190400-0):1) \r\n        at android.os.Handler.handleCallback(Handler.java:938) \r\n        at android.os.Handler.dispatchMessage(Handler.java:99) \r\n        at android.os.Looper.loopOnce(Looper.java:233) \r\n        at android.os.Looper.loop(Looper.java:344) \r\n        at android.app.ActivityThread.main(ActivityThread.java:8212) \r\n        at java.lang.reflect.Method.invoke(Native Method) \r\n        at com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:584) \r\n        at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:1034) \r\n\r\nI replace &#39;apikey&#39; with an actual api key from my google developer console. I&#39;ve researched &amp; done many things such as making sure this exception is not caused by a restriction on my apikey, used a second apikey, check all my dependancies to make sure they&#39;re correct &amp; up to date, made sure everything is correctly typed in my code, made sure my billing account is properly configured, made sure I am using the correct api key for this project, made sure my compileSdkVersion &amp; targetSdkVersion are higher than 21, added all the necessary permissions, cleaned my project &amp; restarted/invalidated cache but still nothing seems to work.\r\n\r\nThe apikey I am using for the maps directions api is the same key I am using elsewhere in the same project for the maps places api &amp; it seems to be working there. \r\n\r\nHere is my code for this activity:\r\n\r\n    import androidx.annotation.NonNull;\r\n    import androidx.appcompat.app.AppCompatActivity;\r\n\r\n    import android.content.Intent;\r\n    import android.os.Bundle;\r\n    import android.util.Log;\r\n\r\n    import com.google.android.gms.maps.CameraUpdateFactory;\r\n    import com.google.android.gms.maps.GoogleMap;\r\n    import com.google.android.gms.maps.OnMapReadyCallback;\r\n    import com.google.android.gms.maps.SupportMapFragment;\r\n    import com.google.android.gms.maps.model.LatLng;\r\n    import com.google.android.gms.maps.model.MarkerOptions;\r\n\r\n    import com.google.maps.DirectionsApi;\r\n    import com.google.maps.DirectionsApiRequest;\r\n    import com.google.maps.GeoApiContext;\r\n    import com.google.maps.errors.ApiException;\r\n    import com.google.maps.model.DirectionsResult;\r\n    import com.google.maps.model.DirectionsRoute;\r\n    import com.google.maps.model.TravelMode;\r\n    import com.google.maps.android.PolyUtil;\r\n\r\n    import java.io.IOException;\r\n    import java.util.List;\r\n\r\n    public class ClosestDestination extends AppCompatActivity implements OnMapReadyCallback{\r\n\r\n    LatLng currentLocation;\r\n    LatLng destinationLocation;\r\n    String destinationName;\r\n    double originLat;\r\n    double originLng;\r\n    double destinationLat;\r\n    double destinationLng;\r\n    SupportMapFragment mapFragment;\r\n    MarkerOptions starterMarkerOptions;\r\n    MarkerOptions endMarkerOptions;\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_closest_mosque);\r\n\r\n        Intent intent = getIntent();\r\n        originLat = intent.getDoubleExtra(&quot;originLat&quot;, 0.0);\r\n        originLng = intent.getDoubleExtra(&quot;originLng&quot;, 0.0);\r\n\r\n        currentLocation = new LatLng(originLat, originLng);\r\n\r\n        destinationLat = Double.parseDouble(MainActivity.placesData.getMapList().get(0).get(&quot;destinationLat&quot;));\r\n        destinationLng = Double.parseDouble(MainActivity.placesData.getMapList().get(0).get(&quot;destinationLng&quot;));\r\n        destinationName = MainActivity.placesData.getMapList().get(0).get(&quot;destinationName&quot;);\r\n\r\n        destinationLocation = new LatLng(destinationLat, destinationLng);\r\n\r\n        starterMarkerOptions = new MarkerOptions().position(currentLocation).title(&quot;current location&quot;);\r\n        endMarkerOptions = new MarkerOptions().position(destinationLocation).title(&quot;destination&quot;);\r\n\r\n        mapFragment = (SupportMapFragment) getSupportFragmentManager()\r\n                .findFragmentById(R.id.map);\r\n\r\n        mapFragment.getMapAsync(ClosestDestination.this);\r\n    }\r\n\r\n    @Override\r\n    public void onMapReady(@NonNull GoogleMap googleMap) {\r\n\r\n        try {\r\n\r\n            GeoApiContext context = new GeoApiContext.Builder()\r\n                    .apiKey(&quot;apikey&quot;)\r\n                    .build();\r\n\r\n            DirectionsApiRequest directionsApiRequest = DirectionsApi.newRequest(context)\r\n                    .origin(currentLocation.toString())\r\n                    .destination(destinationLocation.toString())\r\n                    .mode(TravelMode.WALKING);\r\n\r\n            DirectionsResult directionsResult = null;\r\n\r\n            try {\r\n                directionsResult = directionsApiRequest.await();\r\n\r\n                if (directionsResult.routes.length &gt; 0) {\r\n\r\n                    DirectionsRoute route = directionsResult.routes[0];\r\n\r\n                    String polyLine = route.overviewPolyline.getEncodedPath();\r\n\r\n                    List&lt;LatLng&gt; points = PolyUtil.decode(polyLine);\r\n\r\n                    for (LatLng point : points) {\r\n\r\n                        googleMap.addMarker(new MarkerOptions().position(point));\r\n                    }\r\n\r\n                }\r\n\r\n            } catch (ApiException | InterruptedException | IOException e) {\r\n\r\n                e.printStackTrace();\r\n            }\r\n\r\n            googleMap.setMapType(GoogleMap.MAP_TYPE_TERRAIN);\r\n            googleMap.addMarker(starterMarkerOptions);\r\n            googleMap.addMarker(endMarkerOptions);\r\n            googleMap.moveCamera(CameraUpdateFactory.zoomTo(14));\r\n            googleMap.moveCamera(CameraUpdateFactory.newLatLng(currentLocation));\r\n\r\n        }catch (Exception e){\r\n\r\n            e.printStackTrace();\r\n        }\r\n\r\n    }\r\n}\r\n\r\nHere is also the XML code:\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n    &lt;fragment\r\n    xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n\r\n    android:id=&quot;@+id/map&quot;\r\n    android:name=&quot;com.google.android.gms.maps.SupportMapFragment&quot;\r\n    android:layout_width=&quot;match_parent&quot;\r\n    android:layout_height=&quot;match_parent&quot;/&gt;","title":"Recieve IllegalStateException when I try to build GeoApiContext to get polyline for my maps","body":"<p>I am trying to display the distance between two points as a polyline on the google maps in my app. For some reason this line of code keeps giving me the same exception which causes my app to crash at run time after my main activity is displayed &amp; then when I open this activity by pressing a button. Here is the line of code:</p>\n<pre><code>GeoApiContext context = new GeoApiContext.Builder()\n                .apiKey(&quot;apikey&quot;)\n                .build();\n</code></pre>\n<p>Here is the exception I recieve:</p>\n<pre><code>java.lang.ExceptionInInitializerError\n    at okhttp3.internal.platform.Platform.get(Platform.java:85)\n    at okhttp3.OkHttpClient.newSslSocketFactory(OkHttpClient.java:263)\n    at okhttp3.OkHttpClient.&lt;init&gt;(OkHttpClient.java:229)\n    at okhttp3.OkHttpClient$Builder.build(OkHttpClient.java:1015)\n    at com.google.maps.OkHttpRequestHandler$Builder.build(OkHttpRequestHandler.java:201)\n    at com.google.maps.GeoApiContext$Builder.build(GeoApiContext.java:625)\n    at com.project.prayerpal.ClosestDestination.onMapReady(ClosestDestination.java:89)\n    at com.google.android.gms.maps.zzat.zzb(com.google.android.gms:play-services-maps@@18.1.0:1)\n    at com.google.android.gms.maps.internal.zzar.zza(com.google.android.gms:play-services-maps@@18.1.0:6)\n    at com.google.android.gms.internal.maps.zzb.onTransact(com.google.android.gms:play-services-maps@@18.1.0:3)\n    at android.os.Binder.transact(Binder.java:1084)\n    at fe.c(:com.google.android.gms.dynamite_mapsdynamite@231254044@23.12.54 (190400-0):2)\n    at com.google.maps.api.android.lib6.impl.bg.run(:com.google.android.gms.dynamite_mapsdynamite@231254044@23.12.54 (190400-0):1)\n    at android.os.Handler.handleCallback(Handler.java:938)\n    at android.os.Handler.dispatchMessage(Handler.java:99)\n    at android.os.Looper.loopOnce(Looper.java:233)\n    at android.os.Looper.loop(Looper.java:344)\n    at android.app.ActivityThread.main(ActivityThread.java:8212)\n    at java.lang.reflect.Method.invoke(Native Method)\n    at com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:584)\n    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:1034)\n Caused by: java.lang.IllegalStateException: Expected Android API level 21+ but was 31\n    at okhttp3.internal.platform.AndroidPlatform.buildIfSupported(AndroidPlatform.java:238)\n    at okhttp3.internal.platform.Platform.findPlatform(Platform.java:202)\n    at okhttp3.internal.platform.Platform.&lt;clinit&gt;(Platform.java:79)\n    at okhttp3.internal.platform.Platform.get(Platform.java:85) \n    at okhttp3.OkHttpClient.newSslSocketFactory(OkHttpClient.java:263) \n    at okhttp3.OkHttpClient.&lt;init&gt;(OkHttpClient.java:229) \n    at okhttp3.OkHttpClient$Builder.build(OkHttpClient.java:1015) \n    at com.google.maps.OkHttpRequestHandler$Builder.build(OkHttpRequestHandler.java:201) \n    at com.google.maps.GeoApiContext$Builder.build(GeoApiContext.java:625) \n    at com.project.prayerpal.ClosestDestination.onMapReady(ClosestDestination.java:89) \n    at com.google.android.gms.maps.zzat.zzb(com.google.android.gms:play-services-maps@@18.1.0:1) \n    at com.google.android.gms.maps.internal.zzar.zza(com.google.android.gms:play-services-maps@@18.1.0:6) \n    at com.google.android.gms.internal.maps.zzb.onTransact(com.google.android.gms:play-services-maps@@18.1.0:3) \n    at android.os.Binder.transact(Binder.java:1084) \n    at fe.c(:com.google.android.gms.dynamite_mapsdynamite@231254044@23.12.54 (190400-0):2) \n    at com.google.maps.api.android.lib6.impl.bg.run(:com.google.android.gms.dynamite_mapsdynamite@231254044@23.12.54 (190400-0):1) \n    at android.os.Handler.handleCallback(Handler.java:938) \n    at android.os.Handler.dispatchMessage(Handler.java:99) \n    at android.os.Looper.loopOnce(Looper.java:233) \n    at android.os.Looper.loop(Looper.java:344) \n    at android.app.ActivityThread.main(ActivityThread.java:8212) \n    at java.lang.reflect.Method.invoke(Native Method) \n    at com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:584) \n    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:1034) \n</code></pre>\n<p>I replace 'apikey' with an actual api key from my google developer console. I've researched &amp; done many things such as making sure this exception is not caused by a restriction on my apikey, used a second apikey, check all my dependancies to make sure they're correct &amp; up to date, made sure everything is correctly typed in my code, made sure my billing account is properly configured, made sure I am using the correct api key for this project, made sure my compileSdkVersion &amp; targetSdkVersion are higher than 21, added all the necessary permissions, cleaned my project &amp; restarted/invalidated cache but still nothing seems to work.</p>\n<p>The apikey I am using for the maps directions api is the same key I am using elsewhere in the same project for the maps places api &amp; it seems to be working there.</p>\n<p>Here is my code for this activity:</p>\n<pre><code>import androidx.annotation.NonNull;\nimport androidx.appcompat.app.AppCompatActivity;\n\nimport android.content.Intent;\nimport android.os.Bundle;\nimport android.util.Log;\n\nimport com.google.android.gms.maps.CameraUpdateFactory;\nimport com.google.android.gms.maps.GoogleMap;\nimport com.google.android.gms.maps.OnMapReadyCallback;\nimport com.google.android.gms.maps.SupportMapFragment;\nimport com.google.android.gms.maps.model.LatLng;\nimport com.google.android.gms.maps.model.MarkerOptions;\n\nimport com.google.maps.DirectionsApi;\nimport com.google.maps.DirectionsApiRequest;\nimport com.google.maps.GeoApiContext;\nimport com.google.maps.errors.ApiException;\nimport com.google.maps.model.DirectionsResult;\nimport com.google.maps.model.DirectionsRoute;\nimport com.google.maps.model.TravelMode;\nimport com.google.maps.android.PolyUtil;\n\nimport java.io.IOException;\nimport java.util.List;\n\npublic class ClosestDestination extends AppCompatActivity implements OnMapReadyCallback{\n\nLatLng currentLocation;\nLatLng destinationLocation;\nString destinationName;\ndouble originLat;\ndouble originLng;\ndouble destinationLat;\ndouble destinationLng;\nSupportMapFragment mapFragment;\nMarkerOptions starterMarkerOptions;\nMarkerOptions endMarkerOptions;\n\n@Override\nprotected void onCreate(Bundle savedInstanceState) {\n    super.onCreate(savedInstanceState);\n    setContentView(R.layout.activity_closest_mosque);\n\n    Intent intent = getIntent();\n    originLat = intent.getDoubleExtra(&quot;originLat&quot;, 0.0);\n    originLng = intent.getDoubleExtra(&quot;originLng&quot;, 0.0);\n\n    currentLocation = new LatLng(originLat, originLng);\n\n    destinationLat = Double.parseDouble(MainActivity.placesData.getMapList().get(0).get(&quot;destinationLat&quot;));\n    destinationLng = Double.parseDouble(MainActivity.placesData.getMapList().get(0).get(&quot;destinationLng&quot;));\n    destinationName = MainActivity.placesData.getMapList().get(0).get(&quot;destinationName&quot;);\n\n    destinationLocation = new LatLng(destinationLat, destinationLng);\n\n    starterMarkerOptions = new MarkerOptions().position(currentLocation).title(&quot;current location&quot;);\n    endMarkerOptions = new MarkerOptions().position(destinationLocation).title(&quot;destination&quot;);\n\n    mapFragment = (SupportMapFragment) getSupportFragmentManager()\n            .findFragmentById(R.id.map);\n\n    mapFragment.getMapAsync(ClosestDestination.this);\n}\n\n@Override\npublic void onMapReady(@NonNull GoogleMap googleMap) {\n\n    try {\n\n        GeoApiContext context = new GeoApiContext.Builder()\n                .apiKey(&quot;apikey&quot;)\n                .build();\n\n        DirectionsApiRequest directionsApiRequest = DirectionsApi.newRequest(context)\n                .origin(currentLocation.toString())\n                .destination(destinationLocation.toString())\n                .mode(TravelMode.WALKING);\n\n        DirectionsResult directionsResult = null;\n\n        try {\n            directionsResult = directionsApiRequest.await();\n\n            if (directionsResult.routes.length &gt; 0) {\n\n                DirectionsRoute route = directionsResult.routes[0];\n\n                String polyLine = route.overviewPolyline.getEncodedPath();\n\n                List&lt;LatLng&gt; points = PolyUtil.decode(polyLine);\n\n                for (LatLng point : points) {\n\n                    googleMap.addMarker(new MarkerOptions().position(point));\n                }\n\n            }\n\n        } catch (ApiException | InterruptedException | IOException e) {\n\n            e.printStackTrace();\n        }\n\n        googleMap.setMapType(GoogleMap.MAP_TYPE_TERRAIN);\n        googleMap.addMarker(starterMarkerOptions);\n        googleMap.addMarker(endMarkerOptions);\n        googleMap.moveCamera(CameraUpdateFactory.zoomTo(14));\n        googleMap.moveCamera(CameraUpdateFactory.newLatLng(currentLocation));\n\n    }catch (Exception e){\n\n        e.printStackTrace();\n    }\n\n}\n</code></pre>\n<p>}</p>\n<p>Here is also the XML code:</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n&lt;fragment\nxmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n\nandroid:id=&quot;@+id/map&quot;\nandroid:name=&quot;com.google.android.gms.maps.SupportMapFragment&quot;\nandroid:layout_width=&quot;match_parent&quot;\nandroid:layout_height=&quot;match_parent&quot;/&gt;\n</code></pre>\n"},{"tags":["java","wkhtmltopdf"],"comments":[{"owner":{"account_id":28176439,"reputation":1,"user_id":21534150,"display_name":"CJ C"},"score":0,"creation_date":1699951504,"post_id":77478938,"comment_id":136591931,"body_markdown":"I found that the English content in the html has the same font as the generated pdf, but the Chinese content in the pdf has the same font, and it is different from the font in the html","body":"I found that the English content in the html has the same font as the generated pdf, but the Chinese content in the pdf has the same font, and it is different from the font in the html"}],"owner":{"account_id":28176439,"reputation":1,"user_id":21534150,"display_name":"CJ C"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":21,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1699948169,"creation_date":1699948169,"question_id":77478938,"body_markdown":"I need to convert an html file into pdf, and the pdf font I need to generate is Microsoft YaHei. But I now encounter a problem: I cannot set the font of the generated PDF. No matter what font I set, the font in the resulting PDF remains the same as before. The following is my test code on Windows. I will need to implement the same function on Linux later.\r\n\r\n```\r\n    /**\r\n     * html to pdf\r\n     *\r\n     * @param srcPath  html path, which can be a path on the hard disk or a network path\r\n     * @param destPath pdf save path\r\n     * @return Returns true if the conversion is successful\r\n     */\r\n    public static boolean convert(String srcPath, String destPath,String toPdfTool){\r\n        File file = new File(destPath);\r\n        File parent = file.getParentFile();\r\n        // If the pdf save path does not exist, create the path\r\n        if(!parent.exists()){\r\n            parent.mkdirs();\r\n        }\r\n        StringBuilder cmd = new StringBuilder();\r\n        cmd.append(toPdfTool);\r\n        cmd.append(&quot; &quot;);\r\n        cmd.append(&quot; --encoding utf-8 &quot;);\r\n        cmd.append(&quot; -O Landscape &quot;);\r\n        cmd.append(&quot; --disable-smart-shrinking &quot;);\r\n        cmd.append(&quot; --zoom 0.92 &quot;);\r\n\t\t// No matter what font I set here, it seems to have no effect (Microsoft YaHei, Song Dynasty)\r\n        cmd.append(&quot; --header-font-name Segoe UI &quot;);\r\n        cmd.append(srcPath);\r\n        cmd.append(&quot; &quot;);\r\n        cmd.append(destPath);\r\n        boolean result = true;\r\n        try{\r\n            Process proc = Runtime.getRuntime().exec(cmd.toString());\r\n            proc.waitFor();\r\n        }catch(Exception e){\r\n            result = false;\r\n            e.printStackTrace();\r\n        }\r\n\r\n        return result;\r\n    }\r\n```\r\n\r\nPlease tell me what I need to do to ensure that the font of the generated PDF is Microsoft YaHei. Thank you very much.","title":"How does wkhtmltopdf set the font of the generated pdf","body":"<p>I need to convert an html file into pdf, and the pdf font I need to generate is Microsoft YaHei. But I now encounter a problem: I cannot set the font of the generated PDF. No matter what font I set, the font in the resulting PDF remains the same as before. The following is my test code on Windows. I will need to implement the same function on Linux later.</p>\n<pre><code>    /**\n     * html to pdf\n     *\n     * @param srcPath  html path, which can be a path on the hard disk or a network path\n     * @param destPath pdf save path\n     * @return Returns true if the conversion is successful\n     */\n    public static boolean convert(String srcPath, String destPath,String toPdfTool){\n        File file = new File(destPath);\n        File parent = file.getParentFile();\n        // If the pdf save path does not exist, create the path\n        if(!parent.exists()){\n            parent.mkdirs();\n        }\n        StringBuilder cmd = new StringBuilder();\n        cmd.append(toPdfTool);\n        cmd.append(&quot; &quot;);\n        cmd.append(&quot; --encoding utf-8 &quot;);\n        cmd.append(&quot; -O Landscape &quot;);\n        cmd.append(&quot; --disable-smart-shrinking &quot;);\n        cmd.append(&quot; --zoom 0.92 &quot;);\n        // No matter what font I set here, it seems to have no effect (Microsoft YaHei, Song Dynasty)\n        cmd.append(&quot; --header-font-name Segoe UI &quot;);\n        cmd.append(srcPath);\n        cmd.append(&quot; &quot;);\n        cmd.append(destPath);\n        boolean result = true;\n        try{\n            Process proc = Runtime.getRuntime().exec(cmd.toString());\n            proc.waitFor();\n        }catch(Exception e){\n            result = false;\n            e.printStackTrace();\n        }\n\n        return result;\n    }\n</code></pre>\n<p>Please tell me what I need to do to ensure that the font of the generated PDF is Microsoft YaHei. Thank you very much.</p>\n"},{"tags":["java","date","timezone","date-conversion"],"comments":[{"owner":{"account_id":178445,"reputation":839,"user_id":410422,"accept_rate":65,"display_name":"angryInsomniac"},"score":1,"creation_date":1330080634,"post_id":9429357,"comment_id":11922065,"body_markdown":"Handling time using java.util quickly becomes a headache , if you have some time , check out the joda-time API","body":"Handling time using java.util quickly becomes a headache , if you have some time , check out the joda-time API"},{"owner":{"account_id":318211,"reputation":1245,"user_id":635306,"display_name":"Pavan"},"score":0,"creation_date":1330080636,"post_id":9429357,"comment_id":11922068,"body_markdown":"Take a look at this http://stackoverflow.com/questions/2356672/date-parsing-formating-with-timezone-and-simpledateformat-problem-around-dst-swi","body":"Take a look at this <a href=\"http://stackoverflow.com/questions/2356672/date-parsing-formating-with-timezone-and-simpledateformat-problem-around-dst-swi\" title=\"date parsing formating with timezone and simpledateformat problem around dst swi\">stackoverflow.com/questions/2356672/&hellip;</a>"},{"owner":{"account_id":5309069,"reputation":2033,"user_id":4236028,"display_name":"sam"},"score":0,"creation_date":1445437378,"post_id":9429357,"comment_id":54324841,"body_markdown":"[`SimpleDateFormat`](http://docs.oracle.com/javase/7/docs/api/java/text/SimpleDateFormat.html)","body":"<a href=\"http://docs.oracle.com/javase/7/docs/api/java/text/SimpleDateFormat.html\" rel=\"nofollow noreferrer\"><code>SimpleDateFormat</code></a>"},{"owner":{"account_id":945582,"reputation":625,"user_id":972897,"display_name":"mainu"},"score":0,"creation_date":1544076188,"post_id":9429357,"comment_id":94149526,"body_markdown":"though its old , I am getting same kind of problem with time zone.My problem is like: In my app I have to show GST time in and has to pass the UTC (of dubai time) to server. Not able to find solution please help. Example..","body":"though its old , I am getting same kind of problem with time zone.My problem is like: In my app I have to show GST time in and has to pass the UTC (of dubai time) to server. Not able to find solution please help. Example.."},{"owner":{"account_id":322981,"reputation":310744,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":0,"creation_date":1700073590,"post_id":9429357,"comment_id":136611169,"body_markdown":"`CST` is not a [real time zone](https://en.wikipedia.org/wiki/List_of_tz_database_time_zones)","body":"<code>CST</code> is not a <a href=\"https://en.wikipedia.org/wiki/List_of_tz_database_time_zones\" rel=\"nofollow noreferrer\">real time zone</a>"}],"answers":[{"tags":[],"owner":{"account_id":242066,"reputation":17256,"user_id":513342,"accept_rate":85,"display_name":"Oleg Mikheev"},"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1561113741,"creation_date":1330081210,"answer_id":9429592,"question_id":9429357,"body_markdown":"Your mistake is to call `parse` instead of `format`.\r\n\r\nYou call `parse` to parse a Date from a String, but in your case you&#39;ve got a Date and need to format it using the correct Timezone.\r\n\r\nReplace your code with\r\n\r\n\tCalendar currentdate = Calendar.getInstance();\r\n\tDateFormat formatter = new SimpleDateFormat(&quot;dd-MM-yyyy HH:mm:ss&quot;);\r\n\tTimeZone obj = TimeZone.getTimeZone(&quot;CST&quot;);\r\n\tformatter.setTimeZone(obj);\r\n\tSystem.out.println(&quot;Local:: &quot; +currentdate.getTime());\r\n\tSystem.out.println(&quot;CST:: &quot;+ formatter.format(currentdate.getTime()));\r\n\r\nand I hope you&#39;ll get the output you are expecting.","title":"Date and time conversion to some other Timezone in java","body":"<p>Your mistake is to call <code>parse</code> instead of <code>format</code>.</p>\n\n<p>You call <code>parse</code> to parse a Date from a String, but in your case you've got a Date and need to format it using the correct Timezone.</p>\n\n<p>Replace your code with</p>\n\n<pre><code>Calendar currentdate = Calendar.getInstance();\nDateFormat formatter = new SimpleDateFormat(\"dd-MM-yyyy HH:mm:ss\");\nTimeZone obj = TimeZone.getTimeZone(\"CST\");\nformatter.setTimeZone(obj);\nSystem.out.println(\"Local:: \" +currentdate.getTime());\nSystem.out.println(\"CST:: \"+ formatter.format(currentdate.getTime()));\n</code></pre>\n\n<p>and I hope you'll get the output you are expecting.</p>\n"},{"tags":[],"owner":{"account_id":113294,"reputation":54876,"user_id":298455,"accept_rate":100,"display_name":"Nishant"},"down_vote_count":1,"up_vote_count":23,"is_accepted":true,"score":22,"last_activity_date":1513330674,"creation_date":1330081447,"answer_id":9429644,"question_id":9429357,"body_markdown":"It&#39;s over the web. Could have googled. Anyways, here is a version for you (shamelessly picked and modified from [here][1]): \r\n\r\n\tCalendar calendar = Calendar.getInstance();\r\n\tTimeZone fromTimeZone = calendar.getTimeZone();\r\n\tTimeZone toTimeZone = TimeZone.getTimeZone(&quot;CST&quot;);\r\n\r\n\tcalendar.setTimeZone(fromTimeZone);\r\n\tcalendar.add(Calendar.MILLISECOND, fromTimeZone.getRawOffset() * -1);\r\n\tif (fromTimeZone.inDaylightTime(calendar.getTime())) {\r\n\t\tcalendar.add(Calendar.MILLISECOND, calendar.getTimeZone().getDSTSavings() * -1);\r\n\t}\r\n\r\n\tcalendar.add(Calendar.MILLISECOND, toTimeZone.getRawOffset());\r\n\tif (toTimeZone.inDaylightTime(calendar.getTime())) {\r\n\t\tcalendar.add(Calendar.MILLISECOND, toTimeZone.getDSTSavings());\r\n\t}\r\n\r\n\tSystem.out.println(calendar.getTime());\r\n\r\n\r\n  [1]: https://singztechmusings.wordpress.com/2011/06/23/java-timezone-correctionconversion-with-daylight-savings-time-settings/","title":"Date and time conversion to some other Timezone in java","body":"<p>It's over the web. Could have googled. Anyways, here is a version for you (shamelessly picked and modified from <a href=\"https://singztechmusings.wordpress.com/2011/06/23/java-timezone-correctionconversion-with-daylight-savings-time-settings/\" rel=\"noreferrer\">here</a>): </p>\n\n<pre><code>Calendar calendar = Calendar.getInstance();\nTimeZone fromTimeZone = calendar.getTimeZone();\nTimeZone toTimeZone = TimeZone.getTimeZone(\"CST\");\n\ncalendar.setTimeZone(fromTimeZone);\ncalendar.add(Calendar.MILLISECOND, fromTimeZone.getRawOffset() * -1);\nif (fromTimeZone.inDaylightTime(calendar.getTime())) {\n    calendar.add(Calendar.MILLISECOND, calendar.getTimeZone().getDSTSavings() * -1);\n}\n\ncalendar.add(Calendar.MILLISECOND, toTimeZone.getRawOffset());\nif (toTimeZone.inDaylightTime(calendar.getTime())) {\n    calendar.add(Calendar.MILLISECOND, toTimeZone.getDSTSavings());\n}\n\nSystem.out.println(calendar.getTime());\n</code></pre>\n"},{"tags":[],"owner":{"account_id":91740,"reputation":5223,"user_id":251741,"accept_rate":89,"display_name":"Dario"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1513330803,"creation_date":1330081683,"answer_id":9429697,"question_id":9429357,"body_markdown":"Handling dates in Java in my daily work is a non-trivial task. I suggest you to use [Joda-Time][1] that simplify our coding days and you don&#39;t have to &quot;re-invent the wheel&quot;.\r\n\r\n\r\n  [1]: http://www.joda.org/joda-time/","title":"Date and time conversion to some other Timezone in java","body":"<p>Handling dates in Java in my daily work is a non-trivial task. I suggest you to use <a href=\"http://www.joda.org/joda-time/\" rel=\"nofollow noreferrer\">Joda-Time</a> that simplify our coding days and you don't have to \"re-invent the wheel\".</p>\n"},{"tags":[],"owner":{"account_id":1060181,"reputation":1400,"user_id":1061977,"accept_rate":65,"display_name":"Abhishek bhutra"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1513330966,"creation_date":1330082910,"answer_id":9429990,"question_id":9429357,"body_markdown":"Problem is when you print date obj it call `toString` method and it will print in your machines default time zone. Try this code and see difference.\r\n\r\n\tCalendar currentdate = Calendar.getInstance();\r\n\tString strdate = null;\r\n\tDateFormat formatter = new SimpleDateFormat(&quot;dd-MM-yyyy HH:mm:ssz&quot;);\r\n\tstrdate = formatter.format(currentdate.getTime());\r\n\tSystem.out.println(&quot;strdate=&gt;&quot; + strdate);\r\n\tTimeZone obj = TimeZone.getTimeZone(&quot;CST&quot;);\r\n\r\n\tformatter.setTimeZone(obj);\r\n\tstrdate = formatter.format(currentdate.getTime());\r\n\tDate theResult = formatter.parse(strdate);\r\n\r\n\tSystem.out.println(&quot;The current time in India is  :: &quot; +currentdate.getTime());\r\n\r\n\tSystem.out.println(&quot;The date and time in :: &quot; + obj.getDisplayName() + &quot;is ::&quot; + theResult);\r\n\tSystem.out.println(&quot;The date and time in :: &quot; + obj.getDisplayName() + &quot;is ::&quot; + strdate);","title":"Date and time conversion to some other Timezone in java","body":"<p>Problem is when you print date obj it call <code>toString</code> method and it will print in your machines default time zone. Try this code and see difference.</p>\n\n<pre><code>Calendar currentdate = Calendar.getInstance();\nString strdate = null;\nDateFormat formatter = new SimpleDateFormat(\"dd-MM-yyyy HH:mm:ssz\");\nstrdate = formatter.format(currentdate.getTime());\nSystem.out.println(\"strdate=&gt;\" + strdate);\nTimeZone obj = TimeZone.getTimeZone(\"CST\");\n\nformatter.setTimeZone(obj);\nstrdate = formatter.format(currentdate.getTime());\nDate theResult = formatter.parse(strdate);\n\nSystem.out.println(\"The current time in India is  :: \" +currentdate.getTime());\n\nSystem.out.println(\"The date and time in :: \" + obj.getDisplayName() + \"is ::\" + theResult);\nSystem.out.println(\"The date and time in :: \" + obj.getDisplayName() + \"is ::\" + strdate);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1512481,"reputation":3083,"user_id":1414214,"accept_rate":88,"display_name":"Bon"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1445437588,"creation_date":1445437588,"answer_id":33261994,"question_id":9429357,"body_markdown":"You can use two SimpleDateFormat, one for parse the date string with EST timezone, one for print the date with UTC timezone\r\n\r\n    String format = &quot;yyyy-MM-dd HH:mm:ss&quot;;\r\n        SimpleDateFormat estFormatter = new SimpleDateFormat(format);\r\n        estFormatter.setTimeZone(TimeZone.getTimeZone(&quot;EST&quot;));\r\n        Date date = estFormatter.parse(&quot;2015-11-01 01:00:00&quot;);\r\n\r\n        SimpleDateFormat utcFormatter = new SimpleDateFormat(format);\r\n        utcFormatter.setTimeZone(TimeZone.getTimeZone(&quot;UTC&quot;));\r\n\r\n        System.out.println(utcFormatter.format(date));","title":"Date and time conversion to some other Timezone in java","body":"<p>You can use two SimpleDateFormat, one for parse the date string with EST timezone, one for print the date with UTC timezone</p>\n\n<pre><code>String format = \"yyyy-MM-dd HH:mm:ss\";\n    SimpleDateFormat estFormatter = new SimpleDateFormat(format);\n    estFormatter.setTimeZone(TimeZone.getTimeZone(\"EST\"));\n    Date date = estFormatter.parse(\"2015-11-01 01:00:00\");\n\n    SimpleDateFormat utcFormatter = new SimpleDateFormat(format);\n    utcFormatter.setTimeZone(TimeZone.getTimeZone(\"UTC\"));\n\n    System.out.println(utcFormatter.format(date));\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4225608,"reputation":14192,"user_id":3459206,"accept_rate":90,"display_name":"Alex Salauyou"},"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1445438042,"creation_date":1445437719,"answer_id":33262055,"question_id":9429357,"body_markdown":"`SimpleDateFormat#setTimezone()` is the answer. One formatter with `ETC` timezone you use for parsing, another with `UTC` for producing output string:\r\n\r\n    \t\r\n\r\n    DateFormat dfNy = new SimpleDateFormat(&quot;yyyy-MM-dd HH:mm:ss&quot;, Locale.ROOT);\r\n    dfNy.setTimeZone(TimeZone.getTimeZone(&quot;EST&quot;));\r\n    DateFormat dfUtc = new SimpleDateFormat(&quot;yyyy-MM-dd HH:mm:ss&quot;, Locale.ROOT);\r\n    dfUtc.setTimeZone(TimeZone.getTimeZone(&quot;UTC&quot;));\r\n    \r\n    try {\r\n        return dfUtc.format(dfNy.parse(input));\r\n    } catch (ParseException e) {\r\n        return null;              // invalid input\r\n    }","title":"Date and time conversion to some other Timezone in java","body":"<p><code>SimpleDateFormat#setTimezone()</code> is the answer. One formatter with <code>ETC</code> timezone you use for parsing, another with <code>UTC</code> for producing output string:</p>\n\n<pre><code>DateFormat dfNy = new SimpleDateFormat(\"yyyy-MM-dd HH:mm:ss\", Locale.ROOT);\ndfNy.setTimeZone(TimeZone.getTimeZone(\"EST\"));\nDateFormat dfUtc = new SimpleDateFormat(\"yyyy-MM-dd HH:mm:ss\", Locale.ROOT);\ndfUtc.setTimeZone(TimeZone.getTimeZone(\"UTC\"));\n\ntry {\n    return dfUtc.format(dfNy.parse(input));\n} catch (ParseException e) {\n    return null;              // invalid input\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":7155853,"reputation":1892,"user_id":5468364,"accept_rate":83,"display_name":"dossani"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1445439047,"creation_date":1445439047,"answer_id":33262545,"question_id":9429357,"body_markdown":"Please refer to below mentioned code.\r\n\r\n    \t DateFormat utcConverter = new SimpleDateFormat(&quot;yyyy-MM-dd HH:mm:ss&quot;);\r\n\t\t utcConverter.setTimeZone(TimeZone.getTimeZone(&quot;GMT&quot;));\r\n\t\t String sampleDateTime = &quot;2015-11-01 01:00:00&quot;;\r\n\t\t DateFormat nyConverter = new SimpleDateFormat(&quot;yyyy-MM-dd HH:mm:ss&quot;);\r\n\t\t nyConverter.setTimeZone(TimeZone.getTimeZone(&quot;EST&quot;));\r\n\t\t Calendar nyCal = Calendar.getInstance();\r\n\t\t \r\n\t\t nyCal.setTime(nyConverter.parse(sampleDateTime));\r\n\t\t\t\r\n\t\t System.out.println(&quot;NY TIME :&quot; +nyConverter.format(nyCal.getTime()));\r\n\t\t \r\n\t\tSystem.out.println(&quot;GMT TIME  :&quot; +utcConverter.format(nyCal.getTime()));","title":"Date and time conversion to some other Timezone in java","body":"<p>Please refer to below mentioned code.</p>\n\n<pre><code>     DateFormat utcConverter = new SimpleDateFormat(\"yyyy-MM-dd HH:mm:ss\");\n     utcConverter.setTimeZone(TimeZone.getTimeZone(\"GMT\"));\n     String sampleDateTime = \"2015-11-01 01:00:00\";\n     DateFormat nyConverter = new SimpleDateFormat(\"yyyy-MM-dd HH:mm:ss\");\n     nyConverter.setTimeZone(TimeZone.getTimeZone(\"EST\"));\n     Calendar nyCal = Calendar.getInstance();\n\n     nyCal.setTime(nyConverter.parse(sampleDateTime));\n\n     System.out.println(\"NY TIME :\" +nyConverter.format(nyCal.getTime()));\n\n    System.out.println(\"GMT TIME  :\" +utcConverter.format(nyCal.getTime()));\n</code></pre>\n"},{"tags":[],"owner":{"account_id":9706282,"reputation":244,"user_id":7199637,"accept_rate":20,"display_name":"Pratik Sinha"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1490943837,"creation_date":1490943837,"answer_id":43134469,"question_id":9429357,"body_markdown":" You can just use **&quot;CST6CDT&quot;**\r\nbecause in some countries they follow CDT in summer and CST in winter\r\n    \r\n\r\n     public static String getDateInCST() {\r\n                 Calendar calendar = Calendar.getInstance();\r\n                 DateFormat formatter = new SimpleDateFormat(&quot;yyyy-MM-dd HH:mm:ss.SSS&quot;);\r\n                 formatter.setTimeZone(TimeZone.getTimeZone( &quot;CST6CDT&quot;));\r\n                 String strdate = formatter.format(calendar.getTime());\r\n                 TimeZone.getAvailableIDs();\r\n                 return strdate;\r\n         }","title":"Date and time conversion to some other Timezone in java","body":"<p>You can just use <strong>\"CST6CDT\"</strong>\nbecause in some countries they follow CDT in summer and CST in winter</p>\n\n<pre><code> public static String getDateInCST() {\n             Calendar calendar = Calendar.getInstance();\n             DateFormat formatter = new SimpleDateFormat(\"yyyy-MM-dd HH:mm:ss.SSS\");\n             formatter.setTimeZone(TimeZone.getTimeZone( \"CST6CDT\"));\n             String strdate = formatter.format(calendar.getTime());\n             TimeZone.getAvailableIDs();\n             return strdate;\n     }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":7612423,"reputation":82476,"user_id":5772882,"display_name":"Anonymous"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1586090356,"creation_date":1586089545,"answer_id":61042550,"question_id":9429357,"body_markdown":"First message, don’t handle your date and time as strings in your code. Just as you don’t handle numbers and Boolean values as strings (I hope). Use proper date-time objects.\r\n\r\n## java.time\r\n\r\nSometimes we get date and time as string input. It may be from a text file, from the user or from data exchange with another system, for example. In those cases parse into a proper date-time object first thing. Second message, use java.time, the modern Java date and time API, for your date and time work.\r\n\r\n\t\tDateTimeFormatter formatter\r\n\t\t\t\t= DateTimeFormatter.ofPattern(&quot;uuuu-MM-dd HH:mm:ss&quot;);\r\n\t\t\r\n\t\tString input = &quot;2015-11-01 01:00:00&quot;;\r\n\t\t\r\n\t\tZonedDateTime nyTime = LocalDateTime.parse(input, formatter)\r\n\t\t\t\t.atZone(ZoneId.of(&quot;America/New_York&quot;));\r\n\t\tSystem.out.println(&quot;Time in New York: &quot; + nyTime);\r\n\r\nOutput from this snippet is:\r\n\r\n&gt;     Time in New York: 2015-11-01T01:00-04:00[America/New_York]\r\n\r\nTo convert to GMT:\r\n\r\n\t\tOffsetDateTime gmtTime = nyTime.toOffsetDateTime()\r\n\t\t\t\t.withOffsetSameInstant(ZoneOffset.UTC);\r\n\t\tSystem.out.println(&quot;GMT Time: &quot; + gmtTime);\r\n\r\n&gt;     GMT Time: 2015-11-01T05:00Z\r\n\r\nIf you need to give string output, format using a date-time formatter. Here’s an example of formatting for an American audience:\r\n\r\n\t\tDateTimeFormatter userFormatter\r\n\t\t\t\t= DateTimeFormatter.ofLocalizedDateTime(FormatStyle.MEDIUM)\r\n\t\t\t\t\t\t.withLocale(Locale.US);\r\n\t\tString formattedDateTime = gmtTime.format(userFormatter);\r\n\t\tSystem.out.println(&quot;GMT Time formatted for user: &quot; + formattedDateTime);\r\n\r\n&gt;     GMT Time formatted for user: Nov 1, 2015, 5:00:00 AM\r\n\r\nYou additionally asked:\r\n\r\n&gt; Between the two results below, which one should you take?\r\n\r\nI understand that you ask because both are valid answers. On November 1, 2015 summer time (DST) ended at 2 AM. That is, after 01:59:59 came 01:00:00 a second time. So when we have got `2015-11-01 01:00:00` as input, it is ambiguous. It could be in Eastern Daylight Time, equal to 05:00 GMT, or it could be in Eastern Standard Time, one hour later, hence equal to 06:00 GMT. There is no way that I can tell you which of them is correct in your case. You may control which result you get using `withEarlierOffsetAtOverlap()` or `withLaterOffsetAtOverlap()`. Above we got the DST interpretation. So to get the standard time interpretation:\r\n\r\n\t\tnyTime = nyTime.withLaterOffsetAtOverlap();\r\n\t\tSystem.out.println(&quot;Alternate time in New York: &quot; + nyTime);\r\n\r\n&gt; Alternate time in New York: 2015-11-01T01:00-05:00[America/New_York]\r\n\r\nWe notice that the hour of day is still 01:00, but the offset is now `-05:00` instead of `-04:00`. This also gives us a different GMT time:\r\n\r\n&gt;     GMT Time: 2015-11-01T06:00Z\r\n&gt;     GMT Time formatted for user: Nov 1, 2015, 6:00:00 AM\r\n\r\n## Avoid SimpleDateFormat and friends\r\n\r\nWhile the other answers are generally correct, the classes `DateFormat`, `SimpleDateFormat`, `Date` and `Calendar` used there are poorly designed and long outdated. The first two are particularly troublesome. I recommend you avoid all of them. I frankly find the modern API so much nicer to work with.\r\n\r\n## Link\r\n\r\n[Oracle tutorial: Date Time](https://docs.oracle.com/javase/tutorial/datetime/) explaining how to use java.time.\r\n\r\n","title":"Date and time conversion to some other Timezone in java","body":"<p>First message, don’t handle your date and time as strings in your code. Just as you don’t handle numbers and Boolean values as strings (I hope). Use proper date-time objects.</p>\n\n<h2>java.time</h2>\n\n<p>Sometimes we get date and time as string input. It may be from a text file, from the user or from data exchange with another system, for example. In those cases parse into a proper date-time object first thing. Second message, use java.time, the modern Java date and time API, for your date and time work.</p>\n\n<pre><code>    DateTimeFormatter formatter\n            = DateTimeFormatter.ofPattern(\"uuuu-MM-dd HH:mm:ss\");\n\n    String input = \"2015-11-01 01:00:00\";\n\n    ZonedDateTime nyTime = LocalDateTime.parse(input, formatter)\n            .atZone(ZoneId.of(\"America/New_York\"));\n    System.out.println(\"Time in New York: \" + nyTime);\n</code></pre>\n\n<p>Output from this snippet is:</p>\n\n<blockquote>\n<pre><code>Time in New York: 2015-11-01T01:00-04:00[America/New_York]\n</code></pre>\n</blockquote>\n\n<p>To convert to GMT:</p>\n\n<pre><code>    OffsetDateTime gmtTime = nyTime.toOffsetDateTime()\n            .withOffsetSameInstant(ZoneOffset.UTC);\n    System.out.println(\"GMT Time: \" + gmtTime);\n</code></pre>\n\n<blockquote>\n<pre><code>GMT Time: 2015-11-01T05:00Z\n</code></pre>\n</blockquote>\n\n<p>If you need to give string output, format using a date-time formatter. Here’s an example of formatting for an American audience:</p>\n\n<pre><code>    DateTimeFormatter userFormatter\n            = DateTimeFormatter.ofLocalizedDateTime(FormatStyle.MEDIUM)\n                    .withLocale(Locale.US);\n    String formattedDateTime = gmtTime.format(userFormatter);\n    System.out.println(\"GMT Time formatted for user: \" + formattedDateTime);\n</code></pre>\n\n<blockquote>\n<pre><code>GMT Time formatted for user: Nov 1, 2015, 5:00:00 AM\n</code></pre>\n</blockquote>\n\n<p>You additionally asked:</p>\n\n<blockquote>\n  <p>Between the two results below, which one should you take?</p>\n</blockquote>\n\n<p>I understand that you ask because both are valid answers. On November 1, 2015 summer time (DST) ended at 2 AM. That is, after 01:59:59 came 01:00:00 a second time. So when we have got <code>2015-11-01 01:00:00</code> as input, it is ambiguous. It could be in Eastern Daylight Time, equal to 05:00 GMT, or it could be in Eastern Standard Time, one hour later, hence equal to 06:00 GMT. There is no way that I can tell you which of them is correct in your case. You may control which result you get using <code>withEarlierOffsetAtOverlap()</code> or <code>withLaterOffsetAtOverlap()</code>. Above we got the DST interpretation. So to get the standard time interpretation:</p>\n\n<pre><code>    nyTime = nyTime.withLaterOffsetAtOverlap();\n    System.out.println(\"Alternate time in New York: \" + nyTime);\n</code></pre>\n\n<blockquote>\n  <p>Alternate time in New York: 2015-11-01T01:00-05:00[America/New_York]</p>\n</blockquote>\n\n<p>We notice that the hour of day is still 01:00, but the offset is now <code>-05:00</code> instead of <code>-04:00</code>. This also gives us a different GMT time:</p>\n\n<blockquote>\n<pre><code>GMT Time: 2015-11-01T06:00Z\nGMT Time formatted for user: Nov 1, 2015, 6:00:00 AM\n</code></pre>\n</blockquote>\n\n<h2>Avoid SimpleDateFormat and friends</h2>\n\n<p>While the other answers are generally correct, the classes <code>DateFormat</code>, <code>SimpleDateFormat</code>, <code>Date</code> and <code>Calendar</code> used there are poorly designed and long outdated. The first two are particularly troublesome. I recommend you avoid all of them. I frankly find the modern API so much nicer to work with.</p>\n\n<h2>Link</h2>\n\n<p><a href=\"https://docs.oracle.com/javase/tutorial/datetime/\" rel=\"nofollow noreferrer\">Oracle tutorial: Date Time</a> explaining how to use java.time.</p>\n"},{"tags":[],"owner":{"account_id":10867097,"reputation":51,"user_id":7990130,"display_name":"thiennt"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1594149036,"creation_date":1594149036,"answer_id":62782276,"question_id":9429357,"body_markdown":"**2020 Answer Here** \r\n\r\nIf you want the new `java.time.*` feature but still want to mess with `java.util.Date`:\r\n\r\n     public static Date convertBetweenTwoTimeZone(Date date, String fromTimeZone, String toTimeZone) {\r\n            ZoneId fromTimeZoneId = ZoneId.of(fromTimeZone);\r\n            ZoneId toTimeZoneId = ZoneId.of(toTimeZone);\r\n    \r\n            ZonedDateTime fromZonedDateTime =\r\n                    ZonedDateTime.ofInstant(date.toInstant(), ZoneId.systemDefault()).withZoneSameLocal(fromTimeZoneId);\r\n    \r\n            ZonedDateTime toZonedDateTime = fromZonedDateTime\r\n                    .withZoneSameInstant(toTimeZoneId)\r\n                    .withZoneSameLocal(ZoneId.systemDefault())\r\n                    ;\r\n    \r\n            return Date.from(toZonedDateTime.toInstant());\r\n        }\r\n\r\nfor `java.sql.Timestamp`\r\n\r\n        public static Timestamp convertBetweenTwoTimeZone(Timestamp timestamp, String fromTimeZone, String toTimeZone) {\r\n    \r\n            ZoneId fromTimeZoneId = ZoneId.of(fromTimeZone);\r\n            ZoneId toTimeZoneId = ZoneId.of(toTimeZone);\r\n    \r\n            LocalDateTime localDateTimeBeforeDST = timestamp.toLocalDateTime();\r\n\r\n            ZonedDateTime fromZonedDateTime = ZonedDateTime.of(localDateTimeBeforeDST, fromTimeZoneId);\r\n    \r\n            ZonedDateTime toZonedDateTime = fromZonedDateTime.withZoneSameInstant(toTimeZoneId);\r\n    \r\n            return Timestamp.valueOf(toZonedDateTime.toLocalDateTime());\r\n        }","title":"Date and time conversion to some other Timezone in java","body":"<p><strong>2020 Answer Here</strong></p>\n<p>If you want the new <code>java.time.*</code> feature but still want to mess with <code>java.util.Date</code>:</p>\n<pre><code> public static Date convertBetweenTwoTimeZone(Date date, String fromTimeZone, String toTimeZone) {\n        ZoneId fromTimeZoneId = ZoneId.of(fromTimeZone);\n        ZoneId toTimeZoneId = ZoneId.of(toTimeZone);\n\n        ZonedDateTime fromZonedDateTime =\n                ZonedDateTime.ofInstant(date.toInstant(), ZoneId.systemDefault()).withZoneSameLocal(fromTimeZoneId);\n\n        ZonedDateTime toZonedDateTime = fromZonedDateTime\n                .withZoneSameInstant(toTimeZoneId)\n                .withZoneSameLocal(ZoneId.systemDefault())\n                ;\n\n        return Date.from(toZonedDateTime.toInstant());\n    }\n</code></pre>\n<p>for <code>java.sql.Timestamp</code></p>\n<pre><code>    public static Timestamp convertBetweenTwoTimeZone(Timestamp timestamp, String fromTimeZone, String toTimeZone) {\n\n        ZoneId fromTimeZoneId = ZoneId.of(fromTimeZone);\n        ZoneId toTimeZoneId = ZoneId.of(toTimeZone);\n\n        LocalDateTime localDateTimeBeforeDST = timestamp.toLocalDateTime();\n\n        ZonedDateTime fromZonedDateTime = ZonedDateTime.of(localDateTimeBeforeDST, fromTimeZoneId);\n\n        ZonedDateTime toZonedDateTime = fromZonedDateTime.withZoneSameInstant(toTimeZoneId);\n\n        return Timestamp.valueOf(toZonedDateTime.toLocalDateTime());\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":398063,"reputation":1,"user_id":762544,"display_name":"Toji"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1627057970,"creation_date":1627057970,"answer_id":68502424,"question_id":9429357,"body_markdown":"**For google calendar API**\r\n\r\n    private String getFormatedDate(Date date)\r\n    \t{\r\n    \t\tDateFormat df = new SimpleDateFormat(&quot;yyyy-MM-dd&#39;T&#39;HH:mm:ss+05:30&quot;);\r\n    \t\tdf.setTimeZone(TimeZone.getTimeZone(&quot;GMT+05:30&quot;));\r\n    \t\treturn df.format(date);\r\n    \t}","title":"Date and time conversion to some other Timezone in java","body":"<p><strong>For google calendar API</strong></p>\n<pre><code>private String getFormatedDate(Date date)\n    {\n        DateFormat df = new SimpleDateFormat(&quot;yyyy-MM-dd'T'HH:mm:ss+05:30&quot;);\n        df.setTimeZone(TimeZone.getTimeZone(&quot;GMT+05:30&quot;));\n        return df.format(date);\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5124438,"reputation":2515,"user_id":4107038,"accept_rate":44,"display_name":"Rajat"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1699947088,"creation_date":1699947088,"answer_id":77478844,"question_id":9429357,"body_markdown":"**Using new Java 8 java.time API**\r\n\r\n    import java.time.Duration;\r\n    import java.time.LocalDateTime;\r\n    import java.time.ZoneId;\r\n    import java.time.ZonedDateTime;\r\n    import java.time.format.DateTimeFormatter;\r\n    import java.time.temporal.ChronoUnit;\r\n    \r\n    public class Java8TimeZoneConversion {\r\n    \r\n    \tpublic static void main(String[] args) {\r\n    \r\n    \t\t// Current date and time using now()\r\n    \t\tZonedDateTime currentDateTime = ZonedDateTime.now();\r\n    \r\n    \t\t// Creating two timezone zoneid objects using ZoneId.of() method.\r\n    \t\tZoneId losAngelesTimeZone = ZoneId.of(&quot;America/Los_Angeles&quot;);\r\n    \t\tZoneId dubaiTimeZone = ZoneId.of(&quot;Asia/Dubai&quot;);\r\n    \r\n    \t\t// Converting Current timezone time to Log Angeles time\r\n    \t\tZonedDateTime losAngelesDateTime = currentDateTime.withZoneSameInstant(losAngelesTimeZone);\r\n    \r\n    \t\t// Converting Current timezone time to Dubai time\r\n    \t\tZonedDateTime dubaiDateTime = currentDateTime.withZoneSameInstant(dubaiTimeZone);\r\n    \r\n    \t\t// Datetime formatting \r\n    \t\tDateTimeFormatter formatter = DateTimeFormatter.ofPattern(&quot;yyyy-MMM-dd HH:mm z&quot;);\r\n    \t\t\r\n    \t\t// Print all 3 dates\r\n    \t\tSystem.out.println(&quot;Current time in IST : &quot; + formatter.format(currentDateTime));\r\n    \t\tSystem.out.println(&quot;Los Angeles time now : &quot; + formatter.format(losAngelesDateTime));\r\n    \t\tSystem.out.println(&quot;Dubai time now : &quot; + formatter.format(dubaiDateTime));\r\n    \r\n    \t\t// getting the diff b/w two los angeles and dubai times.\r\n    \t\tprintDurationBetweenTwoDates(losAngelesDateTime, dubaiDateTime);\r\n    \r\n    \t}\r\n    \r\n    \tprivate static void printDurationBetweenTwoDates(ZonedDateTime sfoDateTime, ZonedDateTime dubaiDateTime) {\r\n    \t\tDuration d = Duration.between(sfoDateTime, dubaiDateTime);\r\n    \t\tlong days = d.get(ChronoUnit.SECONDS);\r\n    \t\tSystem.out.println(&quot;Time Difference between los angeles and dubai : &quot; + days / (60 * 60) + &quot; Hours &quot; + (days % (60 * 60)) / 60 + &quot; Minites&quot;);\r\n    \r\n    \t}\r\n    \r\n    }\r\n\r\n**Output:**\r\n\r\n    Current time in IST : 2020-Dec-01 16:56 IST\r\n    Los Angeles time now : 2020-Dec-01 03:26 PST\r\n    Dubai time now : 2020-Dec-01 15:26 GST\r\n    Time Difference between los angeles and dubai : 0 Hours 0 Minites","title":"Date and time conversion to some other Timezone in java","body":"<p><strong>Using new Java 8 java.time API</strong></p>\n<pre><code>import java.time.Duration;\nimport java.time.LocalDateTime;\nimport java.time.ZoneId;\nimport java.time.ZonedDateTime;\nimport java.time.format.DateTimeFormatter;\nimport java.time.temporal.ChronoUnit;\n\npublic class Java8TimeZoneConversion {\n\n    public static void main(String[] args) {\n\n        // Current date and time using now()\n        ZonedDateTime currentDateTime = ZonedDateTime.now();\n\n        // Creating two timezone zoneid objects using ZoneId.of() method.\n        ZoneId losAngelesTimeZone = ZoneId.of(&quot;America/Los_Angeles&quot;);\n        ZoneId dubaiTimeZone = ZoneId.of(&quot;Asia/Dubai&quot;);\n\n        // Converting Current timezone time to Log Angeles time\n        ZonedDateTime losAngelesDateTime = currentDateTime.withZoneSameInstant(losAngelesTimeZone);\n\n        // Converting Current timezone time to Dubai time\n        ZonedDateTime dubaiDateTime = currentDateTime.withZoneSameInstant(dubaiTimeZone);\n\n        // Datetime formatting \n        DateTimeFormatter formatter = DateTimeFormatter.ofPattern(&quot;yyyy-MMM-dd HH:mm z&quot;);\n        \n        // Print all 3 dates\n        System.out.println(&quot;Current time in IST : &quot; + formatter.format(currentDateTime));\n        System.out.println(&quot;Los Angeles time now : &quot; + formatter.format(losAngelesDateTime));\n        System.out.println(&quot;Dubai time now : &quot; + formatter.format(dubaiDateTime));\n\n        // getting the diff b/w two los angeles and dubai times.\n        printDurationBetweenTwoDates(losAngelesDateTime, dubaiDateTime);\n\n    }\n\n    private static void printDurationBetweenTwoDates(ZonedDateTime sfoDateTime, ZonedDateTime dubaiDateTime) {\n        Duration d = Duration.between(sfoDateTime, dubaiDateTime);\n        long days = d.get(ChronoUnit.SECONDS);\n        System.out.println(&quot;Time Difference between los angeles and dubai : &quot; + days / (60 * 60) + &quot; Hours &quot; + (days % (60 * 60)) / 60 + &quot; Minites&quot;);\n\n    }\n\n}\n</code></pre>\n<p><strong>Output:</strong></p>\n<pre><code>Current time in IST : 2020-Dec-01 16:56 IST\nLos Angeles time now : 2020-Dec-01 03:26 PST\nDubai time now : 2020-Dec-01 15:26 GST\nTime Difference between los angeles and dubai : 0 Hours 0 Minites\n</code></pre>\n"}],"owner":{"account_id":1274703,"reputation":1642,"user_id":1230183,"accept_rate":38,"display_name":"Shantanu Tomar"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":123508,"favorite_count":0,"down_vote_count":0,"up_vote_count":11,"accepted_answer_id":9429644,"answer_count":12,"score":11,"last_activity_date":1699947088,"creation_date":1330080166,"question_id":9429357,"body_markdown":"i have written this code to convert the current system date and time to some other timezone. I am not getting any error but i am not getting my output as expected. Like if i execute my program at a particular time.. My output is :: \r\n\r\n\r\nThe current time in **India** is  :: `Fri Feb 24 16:09:23 IST 2012`\r\n\r\nThe date and time in :: **Central Standard Time** is :: `Sat Feb 25 03:39:23 IST 2012`\r\n\r\nAnd the actual Time according to **CST time zone** is :: \r\n\r\n\r\n    Friday, 24 February 4:39:16 a.m(GMT - 6:00)\r\n\r\nSo there&#39;s some **time gap**. and i don&#39;t know why this is happening. Any help will be appreciated.. The code is :: \r\n\r\n    package MyPackage;\r\n    \r\n    import java.text.DateFormat;\r\n    import java.text.ParseException;\r\n    import java.text.SimpleDateFormat;\r\n    \r\n    import java.util.Calendar;\r\n    import java.util.Date;\r\n    import java.util.TimeZone;\r\n    \r\n    public class Temp2 {\r\n    \r\n    \t\r\n    \tpublic static void main(String[] args) {\r\n    \t\t\r\n    \t\ttry {\r\n    \t\t\tCalendar currentdate = Calendar.getInstance();\r\n    \t\t\tString strdate = null;\r\n    \t\t\tDateFormat formatter = new SimpleDateFormat(&quot;dd-MM-yyyy HH:mm:ss&quot;);\r\n    \t\t\tstrdate = formatter.format(currentdate.getTime());\r\n    \t\t\tTimeZone obj = TimeZone.getTimeZone(&quot;CST&quot;);\r\n    \t\t\t\r\n    \t\t\tformatter.setTimeZone(obj);\r\n    \t\t\t//System.out.println(strdate);\r\n    \t\t\t//System.out.println(formatter.parse(strdate));\r\n    \t\t\tDate theResult = formatter.parse(strdate);\r\n    \t\t\t\t\r\n    \t\t\tSystem.out.println(&quot;The current time in India is  :: &quot; +currentdate.getTime());\r\n    \t\t\t\t\r\n    \t\t\tSystem.out.println(&quot;The date and time in :: &quot;+ obj.getDisplayName() + &quot;is ::&quot; + theResult);\r\n    \t\t} catch (ParseException e) {\r\n    \t\t   e.printStackTrace();\r\n    \t\t}\r\n        }\r\n    }\r\n\r\n\r\n","title":"Date and time conversion to some other Timezone in java","body":"<p>i have written this code to convert the current system date and time to some other timezone. I am not getting any error but i am not getting my output as expected. Like if i execute my program at a particular time.. My output is :: </p>\n\n<p>The current time in <strong>India</strong> is  :: <code>Fri Feb 24 16:09:23 IST 2012</code></p>\n\n<p>The date and time in :: <strong>Central Standard Time</strong> is :: <code>Sat Feb 25 03:39:23 IST 2012</code></p>\n\n<p>And the actual Time according to <strong>CST time zone</strong> is :: </p>\n\n<pre><code>Friday, 24 February 4:39:16 a.m(GMT - 6:00)\n</code></pre>\n\n<p>So there's some <strong>time gap</strong>. and i don't know why this is happening. Any help will be appreciated.. The code is :: </p>\n\n<pre><code>package MyPackage;\n\nimport java.text.DateFormat;\nimport java.text.ParseException;\nimport java.text.SimpleDateFormat;\n\nimport java.util.Calendar;\nimport java.util.Date;\nimport java.util.TimeZone;\n\npublic class Temp2 {\n\n\n    public static void main(String[] args) {\n\n        try {\n            Calendar currentdate = Calendar.getInstance();\n            String strdate = null;\n            DateFormat formatter = new SimpleDateFormat(\"dd-MM-yyyy HH:mm:ss\");\n            strdate = formatter.format(currentdate.getTime());\n            TimeZone obj = TimeZone.getTimeZone(\"CST\");\n\n            formatter.setTimeZone(obj);\n            //System.out.println(strdate);\n            //System.out.println(formatter.parse(strdate));\n            Date theResult = formatter.parse(strdate);\n\n            System.out.println(\"The current time in India is  :: \" +currentdate.getTime());\n\n            System.out.println(\"The date and time in :: \"+ obj.getDisplayName() + \"is ::\" + theResult);\n        } catch (ParseException e) {\n           e.printStackTrace();\n        }\n    }\n}\n</code></pre>\n"},{"tags":["java","sql","postgresql","dbeaver","sqlexception"],"comments":[{"owner":{"account_id":47283,"reputation":703807,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":0,"creation_date":1699947835,"post_id":77478649,"comment_id":136591376,"body_markdown":"In the Java case, are you still using a PostgreSQL database?  Because `select distinct on ...` is not standard SQL.  AFAIK, it is PostgreSQL specific.","body":"In the Java case, are you still using a PostgreSQL database?  Because <code>select distinct on ...</code> is not standard SQL.  AFAIK, it is PostgreSQL specific."},{"owner":{"account_id":3112422,"reputation":741,"user_id":2633917,"display_name":"tobifasc"},"score":0,"creation_date":1699949908,"post_id":77478649,"comment_id":136591678,"body_markdown":"Have you set your hibernate dialect to Postgres?","body":"Have you set your hibernate dialect to Postgres?"},{"owner":{"account_id":9463219,"reputation":9357,"user_id":7036419,"display_name":"Maurice Perry"},"score":0,"creation_date":1699949952,"post_id":77478649,"comment_id":136591686,"body_markdown":"It seems to me that there are missing parentheses","body":"It seems to me that there are missing parentheses"},{"owner":{"account_id":3112422,"reputation":741,"user_id":2633917,"display_name":"tobifasc"},"score":1,"creation_date":1699950132,"post_id":77478649,"comment_id":136591716,"body_markdown":"It seems like hibernate doesn&#39;t support `distinct on`. See e.g. https://stackoverflow.com/a/31604888","body":"It seems like hibernate doesn&#39;t support <code>distinct on</code>. See e.g. <a href=\"https://stackoverflow.com/a/31604888\">stackoverflow.com/a/31604888</a>"}],"answers":[{"tags":[],"owner":{"account_id":3687151,"reputation":131,"user_id":3070677,"display_name":"G10"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1699946683,"creation_date":1699946683,"answer_id":77478809,"question_id":77478649,"body_markdown":"on is reserved word you can not us as alias. If you want to use wrapped it &#39;`on`&#39; ` sign","title":"java.sql.SQLSyntaxErrorException: unexpected token: ON","body":"<p>on is reserved word you can not us as alias. If you want to use wrapped it '<code>on</code>' ` sign</p>\n"}],"owner":{"account_id":1047674,"reputation":649,"user_id":1052348,"accept_rate":75,"display_name":"blueSky"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":82,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1699946683,"creation_date":1699944938,"question_id":77478649,"body_markdown":"I have this query which works fine on DBeaver for Postgres:\r\n\r\n    select profileId from (\r\n    \tselect distinct on (p.profile_id) p.profile_id as profileId, pr.creation_date as creationDate\r\n    \tfrom table1 p\r\n    \t\r\n    \t         join table2 o on (p.profile_id = o.offeree_profile_id) \r\n    \t         join table3 pr on (o.offer_id = pr.offer_id ) \r\n    \twhere \r\n    \t \r\n    \t         o.offer_status_id = &#39;ACCEPTED&#39; \r\n    \t         \r\n    \tand (pr.status != &#39;TERMINATED&#39;) \r\n    \t         and o.offeror_profile_id in \r\n    \t\r\n    \t(select p.profile_id from table4 u \r\n    \tjoin table1 p on (p.user_id = u.user_id) \r\n    \twhere customer_id = &#39;A&#39;\r\n    \tAND o.offeror_profile_id != o.offeree_profile_id)\r\n    \t) sub\r\n    order by creationDate desc limit 6\r\n\r\nBut when I run it from Java code, it throws error:\r\n\r\n    String \r\n    queryString = &quot;select profileId from (&quot; +\r\n        &quot;select distinct on (p.profile_id) p.profile_id as profileId, pr.creation_date as creationDate &quot; +\r\n        &quot;from table1 p &quot; +\r\n        &quot;join table2  o on (p.profile_id = o.offeree_profile_id ) &quot; +\r\n        &quot;join table3 pr on (o.offer_id = pr.offer_id ) &quot; +\r\n        &quot;where &quot; +\r\n        &quot;o.offer_status_id = &#39;ACCEPTED&#39; &quot; +\r\n        &quot;and (pr.status != &#39;TERMINATED&#39;) &quot; +\r\n        &quot;and o.offeror_profile_id in &quot; +\r\n        &quot;(select p.profile_id from table4 u &quot; +\r\n        &quot;join table1 p on (p.user_id = u.user_id) &quot; +\r\n        &quot;where customer_id = :CustomerId &quot; +\r\n        &quot;and o.offeror_profile_id != o.offeree_profile_id)&quot; +\r\n        &quot;) sub &quot; +\r\n        &quot;order by creationDate desc limit 6&quot;;\r\n    \r\n    \r\n    final Query profileIdQuery = getCurrentSession().createSQLQuery(queryString).setString(&quot;CustomerId&quot;, CustomerId);\r\n    \r\n    List&lt;BigInteger&gt; profileIdList = profileIdQuery.list();\r\n\r\nAbove line throws this error:\r\n\r\n    Caused by: java.sql.SQLSyntaxErrorException: unexpected token: ON\r\n\r\nP.S. The reason for using distinct on is that I need table1.profile_id to be returned but need to sort by table3.creation_date.\r\nIf I copy/paste the query I got from Java code into database client, it still runs with no error.\r\n","title":"java.sql.SQLSyntaxErrorException: unexpected token: ON","body":"<p>I have this query which works fine on DBeaver for Postgres:</p>\n<pre><code>select profileId from (\n    select distinct on (p.profile_id) p.profile_id as profileId, pr.creation_date as creationDate\n    from table1 p\n    \n             join table2 o on (p.profile_id = o.offeree_profile_id) \n             join table3 pr on (o.offer_id = pr.offer_id ) \n    where \n     \n             o.offer_status_id = 'ACCEPTED' \n             \n    and (pr.status != 'TERMINATED') \n             and o.offeror_profile_id in \n    \n    (select p.profile_id from table4 u \n    join table1 p on (p.user_id = u.user_id) \n    where customer_id = 'A'\n    AND o.offeror_profile_id != o.offeree_profile_id)\n    ) sub\norder by creationDate desc limit 6\n</code></pre>\n<p>But when I run it from Java code, it throws error:</p>\n<pre><code>String \nqueryString = &quot;select profileId from (&quot; +\n    &quot;select distinct on (p.profile_id) p.profile_id as profileId, pr.creation_date as creationDate &quot; +\n    &quot;from table1 p &quot; +\n    &quot;join table2  o on (p.profile_id = o.offeree_profile_id ) &quot; +\n    &quot;join table3 pr on (o.offer_id = pr.offer_id ) &quot; +\n    &quot;where &quot; +\n    &quot;o.offer_status_id = 'ACCEPTED' &quot; +\n    &quot;and (pr.status != 'TERMINATED') &quot; +\n    &quot;and o.offeror_profile_id in &quot; +\n    &quot;(select p.profile_id from table4 u &quot; +\n    &quot;join table1 p on (p.user_id = u.user_id) &quot; +\n    &quot;where customer_id = :CustomerId &quot; +\n    &quot;and o.offeror_profile_id != o.offeree_profile_id)&quot; +\n    &quot;) sub &quot; +\n    &quot;order by creationDate desc limit 6&quot;;\n\n\nfinal Query profileIdQuery = getCurrentSession().createSQLQuery(queryString).setString(&quot;CustomerId&quot;, CustomerId);\n\nList&lt;BigInteger&gt; profileIdList = profileIdQuery.list();\n</code></pre>\n<p>Above line throws this error:</p>\n<pre><code>Caused by: java.sql.SQLSyntaxErrorException: unexpected token: ON\n</code></pre>\n<p>P.S. The reason for using distinct on is that I need table1.profile_id to be returned but need to sort by table3.creation_date.\nIf I copy/paste the query I got from Java code into database client, it still runs with no error.</p>\n"},{"tags":["java","windows","filesystems"],"comments":[{"owner":{"account_id":2344577,"reputation":3561,"user_id":2055163,"accept_rate":81,"display_name":"Thorsten Sch&#246;ning"},"score":0,"creation_date":1573804852,"post_id":58825588,"comment_id":104013183,"body_markdown":"https://mail.openjdk.java.net/pipermail/core-libs-dev/2019-November/063437.html","body":"<a href=\"https://mail.openjdk.java.net/pipermail/core-libs-dev/2019-November/063437.html\" rel=\"nofollow noreferrer\">mail.openjdk.java.net/pipermail/core-libs-dev/2019-November/&zwnj;&#8203;&hellip;</a>"},{"owner":{"account_id":80063,"reputation":1983,"user_id":226630,"accept_rate":60,"display_name":"dSebastien"},"score":0,"creation_date":1594114545,"post_id":58825588,"comment_id":111005709,"body_markdown":"Curious if you did find out anything more since then and how you&#39;ve tackled the issue. At work we&#39;re now facing this issue after the upgrade of a file cluster from WS 2K8R2 to WS 2019.","body":"Curious if you did find out anything more since then and how you&#39;ve tackled the issue. At work we&#39;re now facing this issue after the upgrade of a file cluster from WS 2K8R2 to WS 2019."},{"owner":{"account_id":2344577,"reputation":3561,"user_id":2055163,"accept_rate":81,"display_name":"Thorsten Sch&#246;ning"},"score":0,"creation_date":1594115795,"post_id":58825588,"comment_id":111006393,"body_markdown":"@dSebastien No, I implemented workarounds somewhat assuring that target directories I work with are empty. That made the problem almost(?) go away. I came across similar problems in a native Win32-app implemented in C++ when using `FindFirstFileW` as well. Under rare circumstances, calling that resulted in `ERROR_NO_MORE_FILES` instead of `ERROR_FILE_NOT_FOUND`, which didn&#39;t happen for years in the past with older versions of Windows Server. Seems to me something has changed in Windows and one needs to deal with that additional error in some APIs now. So I hope Java gets compatible in future.","body":"@dSebastien No, I implemented workarounds somewhat assuring that target directories I work with are empty. That made the problem almost(?) go away. I came across similar problems in a native Win32-app implemented in C++ when using <code>FindFirstFileW</code> as well. Under rare circumstances, calling that resulted in <code>ERROR_NO_MORE_FILES</code> instead of <code>ERROR_FILE_NOT_FOUND</code>, which didn&#39;t happen for years in the past with older versions of Windows Server. Seems to me something has changed in Windows and one needs to deal with that additional error in some APIs now. So I hope Java gets compatible in future."},{"owner":{"account_id":2344577,"reputation":3561,"user_id":2055163,"accept_rate":81,"display_name":"Thorsten Sch&#246;ning"},"score":0,"creation_date":1594116070,"post_id":58825588,"comment_id":111006532,"body_markdown":"@dSebastien It&#39;s even possible that Windows is not the problem at all, but something low-level like a virus scanner interfering with requests to the file system or such. https://stackoverflow.com/questions/58825963/when-does-findfirstfilew-set-last-error-to-be-error-no-more-files-instead-of-err?noredirect=1&amp;lq=1#comment103948605_58825963","body":"@dSebastien It&#39;s even possible that Windows is not the problem at all, but something low-level like a virus scanner interfering with requests to the file system or such. <a href=\"https://stackoverflow.com/questions/58825963/when-does-findfirstfilew-set-last-error-to-be-error-no-more-files-instead-of-err?noredirect=1&amp;lq=1#comment103948605_58825963\" title=\"when does findfirstfilew set last error to be error no more files instead of err\">stackoverflow.com/questions/58825963/&hellip;</a>"},{"owner":{"account_id":2678092,"reputation":1134,"user_id":2313984,"display_name":"AndrWeisR"},"score":0,"creation_date":1619740717,"post_id":58825588,"comment_id":119003723,"body_markdown":"@dSebastien and Thorsten, did you try Polux2&#39;s answer below, about setting DirectoryCacheLifetime=0? We are experiencing the same behaviour.","body":"@dSebastien and Thorsten, did you try Polux2&#39;s answer below, about setting DirectoryCacheLifetime=0? We are experiencing the same behaviour."},{"owner":{"account_id":2344577,"reputation":3561,"user_id":2055163,"accept_rate":81,"display_name":"Thorsten Sch&#246;ning"},"score":0,"creation_date":1619768024,"post_id":58825588,"comment_id":119009345,"body_markdown":"@AndrWeisR I&#39;m not in control of the server, it&#39;s a production system of a customer, so I wasn&#39;t able to check this myself. This is the reason why I didn&#39;t accept the answer yet, but only upvoted, because it makes sense. If you can test it yourself and things work, tell us and I will accept the answer.","body":"@AndrWeisR I&#39;m not in control of the server, it&#39;s a production system of a customer, so I wasn&#39;t able to check this myself. This is the reason why I didn&#39;t accept the answer yet, but only upvoted, because it makes sense. If you can test it yourself and things work, tell us and I will accept the answer."},{"owner":{"account_id":2678092,"reputation":1134,"user_id":2313984,"display_name":"AndrWeisR"},"score":1,"creation_date":1620020973,"post_id":58825588,"comment_id":119068554,"body_markdown":"@ThorstenSch&#246;ning We tried the registry setting on the client server, and so far it appears the &quot;No More File&quot; errors have stopped.","body":"@ThorstenSch&#246;ning We tried the registry setting on the client server, and so far it appears the &quot;No More File&quot; errors have stopped."}],"answers":[{"tags":[],"owner":{"account_id":6377501,"reputation":562,"user_id":4947977,"display_name":"Polux2"},"down_vote_count":0,"up_vote_count":7,"is_accepted":true,"score":7,"last_activity_date":1607716976,"creation_date":1607716976,"answer_id":65257881,"question_id":58825588,"body_markdown":"This behavior is caused by an SMB incompatibility between Windows Server 2019 server (file server) and previous versions of Windows (clients). The cache of directory metadata is handled differently which causes this issue when reading a share with many files and folders.\r\n\r\nMicrosoft has unfortunately not yet released a fix for this bug.\r\n\r\nA workaround is to disable the SMB metadata caching on the client side with this registry setting: \r\n`HKLM\\System\\CurrentControlSet\\Services\\LanmanWorkstation\\Parameters\\DirectoryCacheLifetime=0 (DWORD)`","title":"Does Java need to support ERROR_NO_MORE_FILES when canonicalizing paths on Windows?","body":"<p>This behavior is caused by an SMB incompatibility between Windows Server 2019 server (file server) and previous versions of Windows (clients). The cache of directory metadata is handled differently which causes this issue when reading a share with many files and folders.</p>\n<p>Microsoft has unfortunately not yet released a fix for this bug.</p>\n<p>A workaround is to disable the SMB metadata caching on the client side with this registry setting:\n<code>HKLM\\System\\CurrentControlSet\\Services\\LanmanWorkstation\\Parameters\\DirectoryCacheLifetime=0 (DWORD)</code></p>\n"}],"owner":{"account_id":2344577,"reputation":3561,"user_id":2055163,"accept_rate":81,"display_name":"Thorsten Sch&#246;ning"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3393,"favorite_count":0,"down_vote_count":0,"up_vote_count":5,"accepted_answer_id":65257881,"answer_count":1,"score":5,"last_activity_date":1699946116,"creation_date":1573587577,"question_id":58825588,"body_markdown":"# The problem.\r\n\r\nSome daemon implemented in Java, running on Windows 7, copies files from one directory into another, while both source and target directory are a network share hosted by Windows Server 2016. Copying is done using Apache Commons IO and occasionally it happens that this process fails with the following stacktrace and a message reading somewhat like &quot;no more files&quot;:\r\n\r\n\tjava.io.IOException: Es sind keine weiteren Dateien vorhanden\r\n\t        at java.io.WinNTFileSystem.canonicalize0(Native Method)\r\n\t        at java.io.WinNTFileSystem.canonicalize(Unknown Source)\r\n\t        at java.io.File.getCanonicalPath(Unknown Source)\r\n\t        at org.apache.commons.io.FileUtils.copyFile(FileUtils.java:642)\r\n\t        at org.apache.commons.io.FileUtils.copyFileToDirectory(FileUtils.java:587)\r\n\t        at org.apache.commons.io.FileUtils.copyFileToDirectory(FileUtils.java:558)\r\n\t        at de.am_soft.osgi.dokliste.eingaenge.impl.internal.Eingang.copyFilesToDbxmlFolders(Eingang.java:283)\r\n\r\nApache Commons IO uses the following code at line 642 and the line really only is the following `if`, not the exception:\r\n\r\n\tif (srcFile.getCanonicalPath().equals(destFile.getCanonicalPath())) {\r\n\t    throw new IOException(&quot;Source &#39;&quot; + srcFile + &quot;&#39; and destination &#39;&quot; + destFile + &quot;&#39; are the same&quot;);\r\n\t}\r\n\r\nSo the problem is not with copying itself, but with generating canonical paths already. Using Process Monitor[1] at the client where the daemon runs proves that as well. The following is the last event before the daemon clearly logs the above exception, tries to send error mails using Logback and stuff. The result of that event (`NO MORE FILES`) perfectly well fits to the error message of the stacktrace:\r\n\r\n\t10:12:06,6244515        integration.exe 6928    QueryDirectory  \\\\HOST\\SHARE$\\DocBeam3\\[...].zip  NO MORE FILES   Filter: 20191106-081920-[...].zip\r\n\r\nAdditionally, looking at former lines of ProcMon, it&#39;s sure that the exception happens for `destFile` only. Executing the daemon on my local machine instead leads to the following logged event (`NO SUCH FILE`) always:\r\n\r\n\t19:08:03,7485947\tjava.exe\t6232\tQueryDirectory\tC:\\Users\\[...].zip\tNO SUCH FILE\tFilter: 20191022-143101-[...].zip\r\n\r\nI&#39;ve debugged the native methods and came across `lastErrorReportable`, which explicitly checks for some special error codes and doesn&#39;t contain `ERROR_NO_MORE_FILES` from the first event, while it does contain `ERROR_FILE_NOT_FOUND` from the second one:\r\n\r\n\t    if ((errval == ERROR_FILE_NOT_FOUND)\r\n\t        || (errval == ERROR_DIRECTORY)\r\n\t        || (errval == ERROR_PATH_NOT_FOUND)\r\n\t        || (errval == ERROR_BAD_NETPATH)\r\n\t        || (errval == ERROR_BAD_NET_NAME)\r\n\t        || (errval == ERROR_ACCESS_DENIED)\r\n\t        || (errval == ERROR_NETWORK_UNREACHABLE)\r\n\t        || (errval == ERROR_NETWORK_ACCESS_DENIED)) {\r\n\t        return 0;\r\n\t    }\r\n\r\nhttps://github.com/openjdk/jdk/blob/master/src/java.base/windows/native/libjava/canonicalize_md.c#L131\r\n\r\nSo it seems like whenever `ERROR_NO_MORE_FILES` occurs, canonicalizing a path simply gets aborted with an error instead of ignoring it like for the other errors:\r\n\r\n\tif (!lastErrorReportable()) {\r\n\t   if (!(dst = wcp(dst, dend, L&#39;\\0&#39;, src, src + wcslen(src)))){\r\n\t       goto err;\r\n\t   }\r\n\t    break;\r\n\t} else {\r\n\t    goto err;\r\n\t}\r\n\r\nhttps://github.com/openjdk/jdk/blob/master/src/java.base/windows/native/libjava/canonicalize_md.c#L246\r\n\r\nThe thrown exception fits pretty well to what I get, with the given message only being a fallback not used in my case:\r\n\r\n\tif (rv == NULL &amp;&amp; !(*env)-&gt;ExceptionCheck(env)) {\r\n\t    JNU_ThrowIOExceptionWithLastError(env, &quot;Bad pathname&quot;);\r\n\t}\r\n\r\nhttps://github.com/openjdk/jdk/blob/master/src/java.base/windows/native/libjava/WinNTFileSystem_md.c#L258\r\n\r\n# Additional observations.\r\n\r\nThe interesting thing now is that the daemon doesn&#39;t fail always on each and every file copy, but only sometimes, somewhat rarely. But if it fails it seems to have to do with other directories and files being available in the target directory already. While those are completely unrelated to the daemon and according to ProcMon those don&#39;t get iterated or stuff, their pure existance seems to make a difference already. If I simply delete all of those files and directories and empty the target directory this way, copying instantly succeeds again. That&#39;s interesting because having files and directories in the target directory in my local setup doesn&#39;t seem to have any influence: Copying never fails and especially the event logged by ProcMon NEVER is `ERROR_NO_MORE_FILES` as well. After emptying the directory on the setup where the problem happens, ProcMon logs `ERROR_FILE_NOT_FOUND` again as well.\r\n\r\n# The question.\r\n\r\nSo it seems that for some reason under some currently unknown circumstances, Windows decides to use `ERROR_NO_MORE_FILES` as last error in the calls to `FindFirstFileW` used by `wcanonicalize`. Because Java doesn&#39;t have that on its exception list, copying fails in those circumstances, even if it seems to be a perfectly valid situation. I don&#39;t see any real error otherwise.\r\n\r\n**So should `ERROR_NO_MORE_FILES` be added to `lastErrorReportable`? And if so, who do I need to ask for actually? :-)**\r\n\r\n[1]: https://learn.microsoft.com/en-us/sysinternals/downloads/procmon","title":"Does Java need to support ERROR_NO_MORE_FILES when canonicalizing paths on Windows?","body":"<h1>The problem.</h1>\n\n<p>Some daemon implemented in Java, running on Windows 7, copies files from one directory into another, while both source and target directory are a network share hosted by Windows Server 2016. Copying is done using Apache Commons IO and occasionally it happens that this process fails with the following stacktrace and a message reading somewhat like \"no more files\":</p>\n\n<pre><code>java.io.IOException: Es sind keine weiteren Dateien vorhanden\n        at java.io.WinNTFileSystem.canonicalize0(Native Method)\n        at java.io.WinNTFileSystem.canonicalize(Unknown Source)\n        at java.io.File.getCanonicalPath(Unknown Source)\n        at org.apache.commons.io.FileUtils.copyFile(FileUtils.java:642)\n        at org.apache.commons.io.FileUtils.copyFileToDirectory(FileUtils.java:587)\n        at org.apache.commons.io.FileUtils.copyFileToDirectory(FileUtils.java:558)\n        at de.am_soft.osgi.dokliste.eingaenge.impl.internal.Eingang.copyFilesToDbxmlFolders(Eingang.java:283)\n</code></pre>\n\n<p>Apache Commons IO uses the following code at line 642 and the line really only is the following <code>if</code>, not the exception:</p>\n\n<pre><code>if (srcFile.getCanonicalPath().equals(destFile.getCanonicalPath())) {\n    throw new IOException(\"Source '\" + srcFile + \"' and destination '\" + destFile + \"' are the same\");\n}\n</code></pre>\n\n<p>So the problem is not with copying itself, but with generating canonical paths already. Using Process Monitor<a href=\"https://learn.microsoft.com/en-us/sysinternals/downloads/procmon\" rel=\"noreferrer\">1</a> at the client where the daemon runs proves that as well. The following is the last event before the daemon clearly logs the above exception, tries to send error mails using Logback and stuff. The result of that event (<code>NO MORE FILES</code>) perfectly well fits to the error message of the stacktrace:</p>\n\n<pre><code>10:12:06,6244515        integration.exe 6928    QueryDirectory  \\\\HOST\\SHARE$\\DocBeam3\\[...].zip  NO MORE FILES   Filter: 20191106-081920-[...].zip\n</code></pre>\n\n<p>Additionally, looking at former lines of ProcMon, it's sure that the exception happens for <code>destFile</code> only. Executing the daemon on my local machine instead leads to the following logged event (<code>NO SUCH FILE</code>) always:</p>\n\n<pre><code>19:08:03,7485947    java.exe    6232    QueryDirectory  C:\\Users\\[...].zip  NO SUCH FILE    Filter: 20191022-143101-[...].zip\n</code></pre>\n\n<p>I've debugged the native methods and came across <code>lastErrorReportable</code>, which explicitly checks for some special error codes and doesn't contain <code>ERROR_NO_MORE_FILES</code> from the first event, while it does contain <code>ERROR_FILE_NOT_FOUND</code> from the second one:</p>\n\n<pre><code>    if ((errval == ERROR_FILE_NOT_FOUND)\n        || (errval == ERROR_DIRECTORY)\n        || (errval == ERROR_PATH_NOT_FOUND)\n        || (errval == ERROR_BAD_NETPATH)\n        || (errval == ERROR_BAD_NET_NAME)\n        || (errval == ERROR_ACCESS_DENIED)\n        || (errval == ERROR_NETWORK_UNREACHABLE)\n        || (errval == ERROR_NETWORK_ACCESS_DENIED)) {\n        return 0;\n    }\n</code></pre>\n\n<p><a href=\"https://github.com/openjdk/jdk/blob/master/src/java.base/windows/native/libjava/canonicalize_md.c#L131\" rel=\"noreferrer\">https://github.com/openjdk/jdk/blob/master/src/java.base/windows/native/libjava/canonicalize_md.c#L131</a></p>\n\n<p>So it seems like whenever <code>ERROR_NO_MORE_FILES</code> occurs, canonicalizing a path simply gets aborted with an error instead of ignoring it like for the other errors:</p>\n\n<pre><code>if (!lastErrorReportable()) {\n   if (!(dst = wcp(dst, dend, L'\\0', src, src + wcslen(src)))){\n       goto err;\n   }\n    break;\n} else {\n    goto err;\n}\n</code></pre>\n\n<p><a href=\"https://github.com/openjdk/jdk/blob/master/src/java.base/windows/native/libjava/canonicalize_md.c#L246\" rel=\"noreferrer\">https://github.com/openjdk/jdk/blob/master/src/java.base/windows/native/libjava/canonicalize_md.c#L246</a></p>\n\n<p>The thrown exception fits pretty well to what I get, with the given message only being a fallback not used in my case:</p>\n\n<pre><code>if (rv == NULL &amp;&amp; !(*env)-&gt;ExceptionCheck(env)) {\n    JNU_ThrowIOExceptionWithLastError(env, \"Bad pathname\");\n}\n</code></pre>\n\n<p><a href=\"https://github.com/openjdk/jdk/blob/master/src/java.base/windows/native/libjava/WinNTFileSystem_md.c#L258\" rel=\"noreferrer\">https://github.com/openjdk/jdk/blob/master/src/java.base/windows/native/libjava/WinNTFileSystem_md.c#L258</a></p>\n\n<h1>Additional observations.</h1>\n\n<p>The interesting thing now is that the daemon doesn't fail always on each and every file copy, but only sometimes, somewhat rarely. But if it fails it seems to have to do with other directories and files being available in the target directory already. While those are completely unrelated to the daemon and according to ProcMon those don't get iterated or stuff, their pure existance seems to make a difference already. If I simply delete all of those files and directories and empty the target directory this way, copying instantly succeeds again. That's interesting because having files and directories in the target directory in my local setup doesn't seem to have any influence: Copying never fails and especially the event logged by ProcMon NEVER is <code>ERROR_NO_MORE_FILES</code> as well. After emptying the directory on the setup where the problem happens, ProcMon logs <code>ERROR_FILE_NOT_FOUND</code> again as well.</p>\n\n<h1>The question.</h1>\n\n<p>So it seems that for some reason under some currently unknown circumstances, Windows decides to use <code>ERROR_NO_MORE_FILES</code> as last error in the calls to <code>FindFirstFileW</code> used by <code>wcanonicalize</code>. Because Java doesn't have that on its exception list, copying fails in those circumstances, even if it seems to be a perfectly valid situation. I don't see any real error otherwise.</p>\n\n<p><strong>So should <code>ERROR_NO_MORE_FILES</code> be added to <code>lastErrorReportable</code>? And if so, who do I need to ask for actually? :-)</strong></p>\n"},{"tags":["java","python","list","arraylist","tuples"],"comments":[{"owner":{"account_id":4819600,"reputation":56500,"user_id":3890632,"display_name":"khelwood"},"score":0,"creation_date":1619862947,"post_id":67344915,"comment_id":119035797,"body_markdown":"There aren&#39;t any integers in your Python code there. That&#39;s a list of tuples of strings. Java doesn&#39;t have tuples, so there isn&#39;t really an equivalent. You could use a `List&lt;List&lt;String&gt;&gt;` if you want. Or write a class.","body":"There aren&#39;t any integers in your Python code there. That&#39;s a list of tuples of strings. Java doesn&#39;t have tuples, so there isn&#39;t really an equivalent. You could use a <code>List&lt;List&lt;String&gt;&gt;</code> if you want. Or write a class."},{"owner":{"account_id":31180,"reputation":29173,"user_id":85421,"display_name":"user85421"},"score":0,"creation_date":1700487648,"post_id":67344915,"comment_id":136657011,"body_markdown":"BTW we can do `Map.of(&#39;1&#39;, &quot;One&quot;, &#39;2&#39;, &quot;Two&quot;, &#39;3&#39;, &quot;Three&quot;)`","body":"BTW we can do <code>Map.of(&#39;1&#39;, &quot;One&quot;, &#39;2&#39;, &quot;Two&quot;, &#39;3&#39;, &quot;Three&quot;)</code>"}],"answers":[{"tags":[],"owner":{"account_id":438978,"reputation":7398,"user_id":827593,"accept_rate":50,"display_name":"JP Moresmau"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1619863000,"creation_date":1619863000,"answer_id":67344952,"question_id":67344915,"body_markdown":"There are no first-class support for Tuples in Java. You can\r\n- write a little class with the fields you want\r\n- use something like javatuples library (https://www.javatuples.org/)\r\n- use something from utility libraries like Commons-lang (https://commons.apache.org/proper/commons-lang/javadocs/api-release/org/apache/commons/lang3/tuple/MutablePair.html) (note there is also an ImmutablePair)","title":"Tuple in Java lang","body":"<p>There are no first-class support for Tuples in Java. You can</p>\n<ul>\n<li>write a little class with the fields you want</li>\n<li>use something like javatuples library (<a href=\"https://www.javatuples.org/\" rel=\"nofollow noreferrer\">https://www.javatuples.org/</a>)</li>\n<li>use something from utility libraries like Commons-lang (<a href=\"https://commons.apache.org/proper/commons-lang/javadocs/api-release/org/apache/commons/lang3/tuple/MutablePair.html\" rel=\"nofollow noreferrer\">https://commons.apache.org/proper/commons-lang/javadocs/api-release/org/apache/commons/lang3/tuple/MutablePair.html</a>) (note there is also an ImmutablePair)</li>\n</ul>\n"},{"tags":[],"owner":{"account_id":3424016,"reputation":1,"user_id":2870451,"display_name":"Amol Thakurdware"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1619867152,"creation_date":1619867152,"answer_id":67345532,"question_id":67344915,"body_markdown":"Well not exactly the same. But this should solve your purpose.\r\n\r\n    package solutions;\r\n\r\n    import java.util.HashMap;\r\n    import java.util.Map;\r\n    import java.util.Set;\r\n\r\n\r\n    public class MapExample {\r\n\r\n\t    public static void main(String[] args) {\r\n\t\t\tMap&lt;Integer, String&gt; m=new HashMap&lt;Integer, String&gt;();\r\n\t\t\tm.put(1, &quot;One&quot;);\r\n\t\t\tm.put(2, &quot;Two&quot;);\r\n\t\t\tm.put(3, &quot;Three&quot;);\r\n\t\t\t\r\n\t\t\tSet&lt;Integer&gt; keySet = m.keySet();\r\n\t\t\tfor(Integer key:keySet) {\r\n\t\t\t\tSystem.out.println(key+&quot;  &quot;+m.get(key));\r\n\t\t\t}\r\n\t\t\t\r\n\t    }\r\n\r\n    }\r\n\r\n\r\n\r\n\r\n","title":"Tuple in Java lang","body":"<p>Well not exactly the same. But this should solve your purpose.</p>\n<pre><code>package solutions;\n\nimport java.util.HashMap;\nimport java.util.Map;\nimport java.util.Set;\n\n\npublic class MapExample {\n\n    public static void main(String[] args) {\n        Map&lt;Integer, String&gt; m=new HashMap&lt;Integer, String&gt;();\n        m.put(1, &quot;One&quot;);\n        m.put(2, &quot;Two&quot;);\n        m.put(3, &quot;Three&quot;);\n        \n        Set&lt;Integer&gt; keySet = m.keySet();\n        for(Integer key:keySet) {\n            System.out.println(key+&quot;  &quot;+m.get(key));\n        }\n        \n    }\n\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":15524669,"reputation":2739,"user_id":11199879,"display_name":"Kaplan"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1619878973,"creation_date":1619878629,"answer_id":67347217,"question_id":67344915,"body_markdown":"*use of* `record`&lt;br /&gt;\r\nsince Java 16&lt;br /&gt;\r\n*preview in Java 14:*&lt;br /&gt;\r\nhttps://docs.oracle.com/en/java/javase/14/language/records.html\r\n\r\n    record Pair(String n, String s) {};\r\n\r\n    Pair[] data = {             /* as array */\r\n        new Pair(&quot;1&quot;, &quot;One&quot;),\r\n        new Pair(&quot;2&quot;, &quot;Two&quot;),\r\n        new Pair(&quot;3&quot;, &quot;Three&quot;)};\r\n\r\n    List&lt;Pair&gt; data = List.of(  /* as list */\r\n        new Pair(&quot;1&quot;, &quot;One&quot;),\r\n        new Pair(&quot;2&quot;, &quot;Two&quot;),\r\n        new Pair(&quot;3&quot;, &quot;Three&quot;));\r\n\r\n*(You should define more meaningful variable names, depending on the use case in* `Pair`*)*","title":"Tuple in Java lang","body":"<p><em>use of</em> <code>record</code><br />\nsince Java 16<br />\n<em>preview in Java 14:</em><br />\n<a href=\"https://docs.oracle.com/en/java/javase/14/language/records.html\" rel=\"nofollow noreferrer\">https://docs.oracle.com/en/java/javase/14/language/records.html</a></p>\n<pre><code>record Pair(String n, String s) {};\n\nPair[] data = {             /* as array */\n    new Pair(&quot;1&quot;, &quot;One&quot;),\n    new Pair(&quot;2&quot;, &quot;Two&quot;),\n    new Pair(&quot;3&quot;, &quot;Three&quot;)};\n\nList&lt;Pair&gt; data = List.of(  /* as list */\n    new Pair(&quot;1&quot;, &quot;One&quot;),\n    new Pair(&quot;2&quot;, &quot;Two&quot;),\n    new Pair(&quot;3&quot;, &quot;Three&quot;));\n</code></pre>\n<p><em>(You should define more meaningful variable names, depending on the use case in</em> <code>Pair</code><em>)</em></p>\n"}],"owner":{"account_id":16457981,"reputation":41,"user_id":11889735,"display_name":"ValueIsEmpty"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2835,"favorite_count":0,"down_vote_count":1,"up_vote_count":2,"answer_count":3,"score":1,"last_activity_date":1699946021,"creation_date":1619862731,"question_id":67344915,"body_markdown":"I would like to do something with Java like Python.\r\n\r\n```python\r\ndata = [\r\n    (&#39;1&#39;,&#39;One&#39;),\r\n    (&#39;2&#39;,&#39;Two&#39;),\r\n    (&#39;3&#39;,&#39;Three&#39;)\r\n] # Please, Java, how can do that ?\r\n\r\n### List&lt;Integer, Double&gt; data = new ArrayList&lt;Integer, Double&gt;() ???\r\n### Or\r\n### ArrayList&lt;Integer, Double&gt; data = new ArrayList&lt;&gt;() ????\r\n## Or more ???\r\n\r\nfor datium in data:\r\n    print(f&quot;{datium[0]} - {datium[1]}&quot;)\r\n```\r\nPlease help.\r\n\r\n\r\n","title":"Tuple in Java lang","body":"<p>I would like to do something with Java like Python.</p>\n<pre class=\"lang-py prettyprint-override\"><code>data = [\n    ('1','One'),\n    ('2','Two'),\n    ('3','Three')\n] # Please, Java, how can do that ?\n\n### List&lt;Integer, Double&gt; data = new ArrayList&lt;Integer, Double&gt;() ???\n### Or\n### ArrayList&lt;Integer, Double&gt; data = new ArrayList&lt;&gt;() ????\n## Or more ???\n\nfor datium in data:\n    print(f&quot;{datium[0]} - {datium[1]}&quot;)\n</code></pre>\n<p>Please help.</p>\n"},{"tags":["java","netbeans"],"comments":[{"owner":{"account_id":56124,"reputation":7256,"user_id":2506382,"accept_rate":67,"display_name":"dcsohl"},"score":0,"creation_date":1499954153,"post_id":45081555,"comment_id":77138092,"body_markdown":"You may want to be a little clearer as to what you are expecting to happen. And what is the value of %JAVA_HOME%?","body":"You may want to be a little clearer as to what you are expecting to happen. And what is the value of %JAVA_HOME%?"},{"owner":{"account_id":11134458,"reputation":61,"user_id":8173435,"display_name":"CuriQ"},"score":0,"creation_date":1499954561,"post_id":45081555,"comment_id":77138439,"body_markdown":"I am expecting &quot;hello&quot; to be printed to output. I am sorry how do i check %JAVA_HOME%  ?","body":"I am expecting &quot;hello&quot; to be printed to output. I am sorry how do i check %JAVA_HOME%  ?"},{"owner":{"account_id":56124,"reputation":7256,"user_id":2506382,"accept_rate":67,"display_name":"dcsohl"},"score":0,"creation_date":1499954970,"post_id":45081555,"comment_id":77138766,"body_markdown":"`echo %JAVA_HOME%` in a Windows Command Prompt window.","body":"<code>echo %JAVA_HOME%</code> in a Windows Command Prompt window."},{"owner":{"account_id":11134458,"reputation":61,"user_id":8173435,"display_name":"CuriQ"},"score":0,"creation_date":1499955844,"post_id":45081555,"comment_id":77139474,"body_markdown":"c:\\windows\\system32&gt; echo %JAVA_HOME%  gives  %JAVA_HOME%. Is that ok , or is there something wrong?","body":"c:\\windows\\system32&gt; echo %JAVA_HOME%  gives  %JAVA_HOME%. Is that ok , or is there something wrong?"},{"owner":{"account_id":56124,"reputation":7256,"user_id":2506382,"accept_rate":67,"display_name":"dcsohl"},"score":0,"creation_date":1499956465,"post_id":45081555,"comment_id":77139973,"body_markdown":"Java uses the JAVA_HOME environment variable to figure out where all its component bits are. It may be that Netbeans, with the `--jdkhome` flag, has that all sorted out (I&#39;m no Netbeans expert); however I find things generally work better with JAVA_HOME properly set. So set the variable (Windows Control Panel &gt; System &gt; Advanced &gt; Environment Variables); the result of `echo %JAVA_HOME%` should print out `C:\\Program Files\\Java\\jdk1.8.0_131`","body":"Java uses the JAVA_HOME environment variable to figure out where all its component bits are. It may be that Netbeans, with the <code>--jdkhome</code> flag, has that all sorted out (I&#39;m no Netbeans expert); however I find things generally work better with JAVA_HOME properly set. So set the variable (Windows Control Panel &gt; System &gt; Advanced &gt; Environment Variables); the result of <code>echo %JAVA_HOME%</code> should print out <code>C:\\Program Files\\Java\\jdk1.8.0_131</code>"},{"owner":{"account_id":11134458,"reputation":61,"user_id":8173435,"display_name":"CuriQ"},"score":0,"creation_date":1499956921,"post_id":45081555,"comment_id":77140320,"body_markdown":"(Windows Control Panel &gt; System &gt; Advanced &gt; Environment Variables) under System variables, what should be the variable &amp; value? . Should the Variable be JAVA_HOME &amp; value C:\\Program Files\\Java\\jdk1.8.0_131 ? Should it point to C:\\Program Files\\Java\\jdk1.8.0_131 or C:\\Program Files\\Java\\jdk1.8.0_131\\bin ?","body":"(Windows Control Panel &gt; System &gt; Advanced &gt; Environment Variables) under System variables, what should be the variable &amp; value? . Should the Variable be JAVA_HOME &amp; value C:\\Program Files\\Java\\jdk1.8.0_131 ? Should it point to C:\\Program Files\\Java\\jdk1.8.0_131 or C:\\Program Files\\Java\\jdk1.8.0_131\\bin ?"},{"owner":{"account_id":56124,"reputation":7256,"user_id":2506382,"accept_rate":67,"display_name":"dcsohl"},"score":0,"creation_date":1499956986,"post_id":45081555,"comment_id":77140385,"body_markdown":"Yes, variable `JAVA_HOME`, value `C:\\Program Files\\Java\\jdk1.8.0_131`, exactly. Not the `bin` directory.","body":"Yes, variable <code>JAVA_HOME</code>, value <code>C:\\Program Files\\Java\\jdk1.8.0_131</code>, exactly. Not the <code>bin</code> directory."},{"owner":{"account_id":11134458,"reputation":61,"user_id":8173435,"display_name":"CuriQ"},"score":0,"creation_date":1499957853,"post_id":45081555,"comment_id":77141120,"body_markdown":"The echo %JAVA_HOME% looks as expected but still i don&#39;t get output. IF i run the JAR file i get output but from Netbeans IDE nothing.","body":"The echo %JAVA_HOME% looks as expected but still i don&#39;t get output. IF i run the JAR file i get output but from Netbeans IDE nothing."},{"owner":{"account_id":56124,"reputation":7256,"user_id":2506382,"accept_rate":67,"display_name":"dcsohl"},"score":0,"creation_date":1499959661,"post_id":45081555,"comment_id":77142562,"body_markdown":"Ok, well, here&#39;s where I bow out. Somebody who actually knows NetBeans is going to have to help you on this. I can only offer two solutions: 1) re-install 8.2 or 2) go back to 8.1.","body":"Ok, well, here&#39;s where I bow out. Somebody who actually knows NetBeans is going to have to help you on this. I can only offer two solutions: 1) re-install 8.2 or 2) go back to 8.1."},{"owner":{"account_id":56124,"reputation":7256,"user_id":2506382,"accept_rate":67,"display_name":"dcsohl"},"score":0,"creation_date":1499960006,"post_id":45081555,"comment_id":77142804,"body_markdown":"From [this similar but unanswered question](https://stackoverflow.com/questions/42087346/why-does-this-code-returns-after-build-run-with-netbeans-8-2-run-build-succ?rq=1): &quot;Are you sure the code gets executed? Maybe you have a second main method in your project which returns immediately. You can check in your project properties (right click on the project / properties) under &quot;Run / Main Class&quot; which main class will be executed when you run your project.&quot;","body":"From <a href=\"https://stackoverflow.com/questions/42087346/why-does-this-code-returns-after-build-run-with-netbeans-8-2-run-build-succ?rq=1\">this similar but unanswered question</a>: &quot;Are you sure the code gets executed? Maybe you have a second main method in your project which returns immediately. You can check in your project properties (right click on the project / properties) under &quot;Run / Main Class&quot; which main class will be executed when you run your project.&quot;"},{"owner":{"account_id":11134458,"reputation":61,"user_id":8173435,"display_name":"CuriQ"},"score":0,"creation_date":1499960261,"post_id":45081555,"comment_id":77142972,"body_markdown":"I have actually re-installed it twice already. I just have a single main method.  To re-check that it is executing main file i even put break point and ran in debugger mode , so it does run the file with no output, so strange.","body":"I have actually re-installed it twice already. I just have a single main method.  To re-check that it is executing main file i even put break point and ran in debugger mode , so it does run the file with no output, so strange."},{"owner":{"account_id":7360680,"reputation":365,"user_id":5604057,"display_name":"ThilinaMD"},"score":0,"creation_date":1499965402,"post_id":45081555,"comment_id":77146249,"body_markdown":"try to run `Helloapp` by right click  `Helloapp.java` in project window other than pressing F6","body":"try to run <code>Helloapp</code> by right click  <code>Helloapp.java</code> in project window other than pressing F6"},{"owner":{"account_id":11134458,"reputation":61,"user_id":8173435,"display_name":"CuriQ"},"score":0,"creation_date":1499975331,"post_id":45081555,"comment_id":77151957,"body_markdown":"tried that too it does not work.","body":"tried that too it does not work."},{"owner":{"account_id":7360680,"reputation":365,"user_id":5604057,"display_name":"ThilinaMD"},"score":0,"creation_date":1500002836,"post_id":45081555,"comment_id":77160727,"body_markdown":"try to clean the project first and then try to run it","body":"try to clean the project first and then try to run it"},{"owner":{"account_id":11134458,"reputation":61,"user_id":8173435,"display_name":"CuriQ"},"score":0,"creation_date":1500062267,"post_id":45081555,"comment_id":77192972,"body_markdown":"tried that too it does not work.","body":"tried that too it does not work."}],"answers":[{"tags":[],"owner":{"account_id":13603583,"reputation":1,"user_id":9813526,"display_name":"ekant"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1527109349,"creation_date":1527109349,"answer_id":50497413,"question_id":45081555,"body_markdown":"1. Make Sure that the class is not in the &quot;default package&quot;.  It should lie in the project&#39;s package.\r\n\r\n2. main method should be having the correct lines which are to be executed.","title":"Netbeans 8.2 build successful but no output","body":"<ol>\n<li><p>Make Sure that the class is not in the \"default package\".  It should lie in the project's package.</p></li>\n<li><p>main method should be having the correct lines which are to be executed.</p></li>\n</ol>\n"},{"tags":[],"owner":{"account_id":4811525,"reputation":163,"user_id":3884878,"display_name":"Ashish Patel"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1527116962,"creation_date":1527116962,"answer_id":50498697,"question_id":45081555,"body_markdown":"Right click on the class and add it to the classpath. Usually you should be able to Right-Click and then Run as...","title":"Netbeans 8.2 build successful but no output","body":"<p>Right click on the class and add it to the classpath. Usually you should be able to Right-Click and then Run as...</p>\n"}],"owner":{"account_id":11134458,"reputation":61,"user_id":8173435,"display_name":"CuriQ"},"comment_count":15,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":9652,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1699945711,"creation_date":1499951253,"question_id":45081555,"body_markdown":"I recently installed Netbeans 8.2 with JDK 8 on Windows 7 Enterprise 64-bit OS. Started the installation with jdk-8u131-windows-x64.exe, which was successful. After that tried to install netbeans-8.2-javase-windows.exe, which gave me error stating could not find JDK. After searching over the internet I could get Netbeans to install from command prompt with netbeans-8.2-javase-windows.exe --jdkhome &quot;C:\\Program Files\\Java\\jdk1.8.0_131&quot;, Netbeans8.2 installation was successful.\r\nWrote a simple helloapp program: \r\npackage helloapp;\r\n\r\n    public class Helloapp {\r\n\r\n    /**\r\n     * @param args the command line arguments\r\n     */\r\n    public static void main(String[] args) {\r\n        // TODO code application logic here\r\n        System.out.println(&quot;hello&quot;);\r\n    }\r\n    \r\n    }\r\n\r\nWhen I run this project by any means Run Main project, F6, right click run file gives me output as :\r\n\r\nrun:\r\nBUILD SUCCESSFUL (total time: 0 seconds).\r\n\r\nI have worked with previous version 8.1, and have never had problem. Wonder what is missing here. Can someone tell me what I might be missing here.","title":"Netbeans 8.2 build successful but no output","body":"<p>I recently installed Netbeans 8.2 with JDK 8 on Windows 7 Enterprise 64-bit OS. Started the installation with jdk-8u131-windows-x64.exe, which was successful. After that tried to install netbeans-8.2-javase-windows.exe, which gave me error stating could not find JDK. After searching over the internet I could get Netbeans to install from command prompt with netbeans-8.2-javase-windows.exe --jdkhome \"C:\\Program Files\\Java\\jdk1.8.0_131\", Netbeans8.2 installation was successful.\nWrote a simple helloapp program: \npackage helloapp;</p>\n\n<pre><code>public class Helloapp {\n\n/**\n * @param args the command line arguments\n */\npublic static void main(String[] args) {\n    // TODO code application logic here\n    System.out.println(\"hello\");\n}\n\n}\n</code></pre>\n\n<p>When I run this project by any means Run Main project, F6, right click run file gives me output as :</p>\n\n<p>run:\nBUILD SUCCESSFUL (total time: 0 seconds).</p>\n\n<p>I have worked with previous version 8.1, and have never had problem. Wonder what is missing here. Can someone tell me what I might be missing here.</p>\n"},{"tags":["java","code-coverage","execution"],"comments":[{"owner":{"account_id":10408148,"reputation":1398,"user_id":7674438,"accept_rate":100,"display_name":"Lore"},"score":0,"creation_date":1699879109,"post_id":77473915,"comment_id":136582241,"body_markdown":"Hint: you can determine it by n value before executing code.","body":"Hint: you can determine it by n value before executing code."},{"owner":{"account_id":4279913,"reputation":3623,"user_id":3499626,"accept_rate":89,"display_name":"jhamon"},"score":1,"creation_date":1699882641,"post_id":77473915,"comment_id":136582943,"body_markdown":"why do you want to do that? If it&#39;s for debugging purpose, some well-placed logs and eventually a single stacktrace should be enough.","body":"why do you want to do that? If it&#39;s for debugging purpose, some well-placed logs and eventually a single stacktrace should be enough."},{"owner":{"account_id":23740623,"reputation":1,"user_id":17758716,"display_name":"Reilas"},"score":0,"creation_date":1699908267,"post_id":77473915,"comment_id":136587526,"body_markdown":"Are you referring to a literal _&quot;[statement](https://docs.oracle.com/javase/tutorial/java/nutsandbolts/expressions.html)&quot;_, or just an _&quot;expression&quot;_?","body":"Are you referring to a literal <i>&quot;<a href=\"https://docs.oracle.com/javase/tutorial/java/nutsandbolts/expressions.html\" rel=\"nofollow noreferrer\">statement</a>&quot;</i>, or just an <i>&quot;expression&quot;</i>?"},{"owner":{"account_id":16069047,"reputation":73,"user_id":11597912,"display_name":"Luka F&#252;rst"},"score":0,"creation_date":1700056823,"post_id":77473915,"comment_id":136607872,"body_markdown":"Thanks for all the answers! Actually, the problem can be solved by adding a System.out.println after every semicolon, since I only really need to keep track of simple statements. I&#39;ve just been wondering whether there is a more elegant way, e.g., by having the JVM &quot;remember&quot; the instructions that it actually executed and using the correspondence between the source code statements and the JVM instructions (this correspondence must exist -- how else would the JVM know which line in the source code threw an exception?) to make the list of the source code statements that were executed.","body":"Thanks for all the answers! Actually, the problem can be solved by adding a System.out.println after every semicolon, since I only really need to keep track of simple statements. I&#39;ve just been wondering whether there is a more elegant way, e.g., by having the JVM &quot;remember&quot; the instructions that it actually executed and using the correspondence between the source code statements and the JVM instructions (this correspondence must exist -- how else would the JVM know which line in the source code threw an exception?) to make the list of the source code statements that were executed."}],"answers":[{"tags":[],"owner":{"account_id":8517137,"reputation":835,"user_id":6385232,"display_name":"geanakuch"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1699880112,"creation_date":1699880112,"answer_id":77474043,"question_id":77473915,"body_markdown":"I don&#39;t think it will work like that. You&#39;d definitely have to use a ```System.out``` for every line that get&#39;s executed, although you can first collect these line numbers in a ```List``` and then display them at the end.\r\n\r\nIf you really intend to get the line numbers automatically you have to grab a stacktrace\r\n\r\n    Thread.currentThread().getStackTrace()[0].getLineNumber()\r\n\r\nThis will give you the line number you&#39;re currently on (which is obviously the number of that exact statement). If you want you can also move that to a separate function and then move up the stacktrace to get the line number.\r\n\r\nHowever you **really really** should not do that. Grabbing a stacktrace is one of the most expensive operations in Java. You really don&#39;t want to do this for every statement that you execute unless performance is of absolutely  no value to you.","title":"The sequence of executed statements of a Java program","body":"<p>I don't think it will work like that. You'd definitely have to use a <code>System.out</code> for every line that get's executed, although you can first collect these line numbers in a <code>List</code> and then display them at the end.</p>\n<p>If you really intend to get the line numbers automatically you have to grab a stacktrace</p>\n<pre><code>Thread.currentThread().getStackTrace()[0].getLineNumber()\n</code></pre>\n<p>This will give you the line number you're currently on (which is obviously the number of that exact statement). If you want you can also move that to a separate function and then move up the stacktrace to get the line number.</p>\n<p>However you <strong>really really</strong> should not do that. Grabbing a stacktrace is one of the most expensive operations in Java. You really don't want to do this for every statement that you execute unless performance is of absolutely  no value to you.</p>\n"},{"tags":[],"owner":{"account_id":3446101,"reputation":11345,"user_id":2886891,"accept_rate":75,"display_name":"Honza Zidek"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1699945223,"creation_date":1699885204,"answer_id":77474550,"question_id":77473915,"body_markdown":"You can reach the requested effect by **Code Coverage**.\r\n\r\n1. Call the code from within a [JUnit test][1].\r\n2. Run the code from an IDE as &quot;run test with coverage&quot;. Most probably you will have to install some &quot;test coverage&quot; plugin to your IDE.\r\n3. You will see all the lines which ran marked with green directly in your IDE.\r\n\r\nFor example for IntelliJ IDEA, the plugin is called &quot;Code Coverage&quot;:\r\n\r\n[![enter image description here][2]][2]\r\n\r\nand you run it like this:\r\n\r\n[![enter image description here][3]][3]\r\n\r\nThen you see the result in the IDE in the &quot;coverage&quot; Window:\r\n\r\n[![enter image description here][4]][4]\r\n\r\nand after clicking on the class name notice the green and red &quot;marker&quot; on the left:\r\n\r\n[![enter image description here][5]][5]\r\n\r\n\r\n  [1]: https://junit.org/junit5/docs/current/user-guide/\r\n  [2]: https://i.stack.imgur.com/62edE.png\r\n  [3]: https://i.stack.imgur.com/Cksav.png\r\n  [4]: https://i.stack.imgur.com/7CReE.png\r\n  [5]: https://i.stack.imgur.com/lK0Pj.png","title":"The sequence of executed statements of a Java program","body":"<p>You can reach the requested effect by <strong>Code Coverage</strong>.</p>\n<ol>\n<li>Call the code from within a <a href=\"https://junit.org/junit5/docs/current/user-guide/\" rel=\"nofollow noreferrer\">JUnit test</a>.</li>\n<li>Run the code from an IDE as &quot;run test with coverage&quot;. Most probably you will have to install some &quot;test coverage&quot; plugin to your IDE.</li>\n<li>You will see all the lines which ran marked with green directly in your IDE.</li>\n</ol>\n<p>For example for IntelliJ IDEA, the plugin is called &quot;Code Coverage&quot;:</p>\n<p><a href=\"https://i.stack.imgur.com/62edE.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/62edE.png\" alt=\"enter image description here\" /></a></p>\n<p>and you run it like this:</p>\n<p><a href=\"https://i.stack.imgur.com/Cksav.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Cksav.png\" alt=\"enter image description here\" /></a></p>\n<p>Then you see the result in the IDE in the &quot;coverage&quot; Window:</p>\n<p><a href=\"https://i.stack.imgur.com/7CReE.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/7CReE.png\" alt=\"enter image description here\" /></a></p>\n<p>and after clicking on the class name notice the green and red &quot;marker&quot; on the left:</p>\n<p><a href=\"https://i.stack.imgur.com/lK0Pj.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/lK0Pj.png\" alt=\"enter image description here\" /></a></p>\n"}],"owner":{"account_id":16069047,"reputation":73,"user_id":11597912,"display_name":"Luka F&#252;rst"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":92,"favorite_count":0,"down_vote_count":4,"up_vote_count":1,"closed_date":1699963087,"answer_count":2,"score":-3,"last_activity_date":1699945223,"creation_date":1699878733,"question_id":77473915,"body_markdown":"Given a Java program, I would like to run it and determine the sequence of statements that were executed. For instance, upon running the program\r\n\r\n```\r\nimport java.util.Scanner;\r\n\r\npublic class Temp {\r\n    public static void main(String[] args) {\r\n        Scanner sc = new Scanner(System.in);  // line 4\r\n        int n = sc.nextInt();\r\n        int m = n;\r\n        if (n &gt; 0) {\r\n            m = 2 * n;\r\n        } else {\r\n            m = 3 * n;\r\n        }\r\n    }\r\n}\r\n```\r\n\r\nusing a negative integer as the input, I would like to obtain the sequence 4, 5, 6, 7, 10 (perhaps without the 7), referring to the lines that were executed.\r\n\r\nOf course, one can always add a System.out.println after every statement in the source code, but I am wondering if there is a more elegant way.\r\n\r\n","title":"The sequence of executed statements of a Java program","body":"<p>Given a Java program, I would like to run it and determine the sequence of statements that were executed. For instance, upon running the program</p>\n<pre><code>import java.util.Scanner;\n\npublic class Temp {\n    public static void main(String[] args) {\n        Scanner sc = new Scanner(System.in);  // line 4\n        int n = sc.nextInt();\n        int m = n;\n        if (n &gt; 0) {\n            m = 2 * n;\n        } else {\n            m = 3 * n;\n        }\n    }\n}\n</code></pre>\n<p>using a negative integer as the input, I would like to obtain the sequence 4, 5, 6, 7, 10 (perhaps without the 7), referring to the lines that were executed.</p>\n<p>Of course, one can always add a System.out.println after every statement in the source code, but I am wondering if there is a more elegant way.</p>\n"},{"tags":["java","json"],"comments":[{"owner":{"account_id":14507362,"reputation":137,"user_id":10478797,"display_name":"Vince D"},"score":2,"creation_date":1626974489,"post_id":12155800,"comment_id":121041065,"body_markdown":"You can directly use ObjectMapper like objectMapper.objectMapper.writeValueAsString(hasMap))","body":"You can directly use ObjectMapper like objectMapper.objectMapper.writeValueAsString(hasMap))"}],"answers":[{"tags":[],"owner":{"account_id":290705,"reputation":7460,"user_id":592392,"accept_rate":75,"display_name":"jolivier"},"down_vote_count":1,"up_vote_count":8,"is_accepted":false,"score":7,"last_activity_date":1489741910,"creation_date":1346144187,"answer_id":12155854,"question_id":12155800,"body_markdown":"This is typically the work of a Json library, you should not try to do it yourself. All json libraries should implement what you are asking for, and you can\r\nfind a list of Java Json libraries on [json.org][1], at the bottom of the page.\r\n\r\n\r\n  [1]: http://www.json.org/","title":"How to convert hashmap to JSON object in Java","body":"<p>This is typically the work of a Json library, you should not try to do it yourself. All json libraries should implement what you are asking for, and you can\nfind a list of Java Json libraries on <a href=\"http://www.json.org/\" rel=\"noreferrer\">json.org</a>, at the bottom of the page.</p>\n"},{"tags":[],"owner":{"account_id":335255,"reputation":12716,"user_id":662250,"accept_rate":85,"display_name":"Ankur"},"down_vote_count":5,"up_vote_count":545,"is_accepted":true,"score":540,"last_activity_date":1653637712,"creation_date":1346144252,"answer_id":12155874,"question_id":12155800,"body_markdown":"You can use:\r\n\r\n    new JSONObject(map);\r\n\r\n\r\nOther functions you can get from its documentation  \r\nhttp://stleary.github.io/JSON-java/index.html","title":"How to convert hashmap to JSON object in Java","body":"<p>You can use:</p>\n<pre><code>new JSONObject(map);\n</code></pre>\n<p>Other functions you can get from its documentation<br />\n<a href=\"http://stleary.github.io/JSON-java/index.html\" rel=\"noreferrer\">http://stleary.github.io/JSON-java/index.html</a></p>\n"},{"tags":[],"owner":{"account_id":1636158,"reputation":4134,"user_id":1509578,"accept_rate":50,"display_name":"Mohammod Hossain"},"down_vote_count":2,"up_vote_count":70,"is_accepted":false,"score":68,"last_activity_date":1346144888,"creation_date":1346144488,"answer_id":12155926,"question_id":12155800,"body_markdown":"Example using json \r\n\r\n    Map&lt;String, Object&gt; data = new HashMap&lt;String, Object&gt;();\r\n        data.put( &quot;name&quot;, &quot;Mars&quot; );\r\n        data.put( &quot;age&quot;, 32 );\r\n        data.put( &quot;city&quot;, &quot;NY&quot; );\r\n        JSONObject json = new JSONObject();\r\n        json.putAll( data );\r\n        System.out.printf( &quot;JSON: %s&quot;, json.toString(2) );\r\noutput::\r\n\r\n    JSON: {\r\n      &quot;age&quot;: 32,\r\n      &quot;name&quot;: &quot;Mars&quot;,\r\n      &quot;city&quot;: &quot;NY&quot;\r\n    }\r\n\r\nYou can also try to use Google&#39;s GSON.Google&#39;s GSON is the best library available to convert Java Objects into their JSON representation.\r\n\r\nhttp://code.google.com/p/google-gson/","title":"How to convert hashmap to JSON object in Java","body":"<p>Example using json </p>\n\n<pre><code>Map&lt;String, Object&gt; data = new HashMap&lt;String, Object&gt;();\n    data.put( \"name\", \"Mars\" );\n    data.put( \"age\", 32 );\n    data.put( \"city\", \"NY\" );\n    JSONObject json = new JSONObject();\n    json.putAll( data );\n    System.out.printf( \"JSON: %s\", json.toString(2) );\n</code></pre>\n\n<p>output::</p>\n\n<pre><code>JSON: {\n  \"age\": 32,\n  \"name\": \"Mars\",\n  \"city\": \"NY\"\n}\n</code></pre>\n\n<p>You can also try to use Google's GSON.Google's GSON is the best library available to convert Java Objects into their JSON representation.</p>\n\n<p><a href=\"http://code.google.com/p/google-gson/\" rel=\"noreferrer\">http://code.google.com/p/google-gson/</a></p>\n"},{"tags":[],"owner":{"account_id":282589,"reputation":8239,"user_id":579580,"accept_rate":85,"display_name":"aviad"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1346144627,"creation_date":1346144627,"answer_id":12155969,"question_id":12155800,"body_markdown":"You can use XStream - it is really handy. See the examples [here][1]\r\n\r\n    package com.thoughtworks.xstream.json.test;\r\n\r\n    import com.thoughtworks.xstream.XStream;\r\n    import com.thoughtworks.xstream.io.json.JettisonMappedXmlDriver;\r\n\r\n    public class WriteTest {\r\n\r\n    \tpublic static void main(String[] args) {\r\n\r\n          HashMap&lt;String,String&gt; map = new HashMap&lt;String,String&gt;();\r\n          map.add(&quot;1&quot;, &quot;a&quot;);\r\n          map.add(&quot;2&quot;, &quot;b&quot;);\r\n          XStream xstream = new XStream(new JettisonMappedXmlDriver());\r\n\r\n          System.out.println(xstream.toXML(map));\t\t\r\n\t\t\r\n        }\r\n\r\n    }\r\n\r\n  [1]: http://xstream.codehaus.org/json-tutorial.html","title":"How to convert hashmap to JSON object in Java","body":"<p>You can use XStream - it is really handy. See the examples <a href=\"http://xstream.codehaus.org/json-tutorial.html\" rel=\"nofollow\">here</a></p>\n\n<pre><code>package com.thoughtworks.xstream.json.test;\n\nimport com.thoughtworks.xstream.XStream;\nimport com.thoughtworks.xstream.io.json.JettisonMappedXmlDriver;\n\npublic class WriteTest {\n\n    public static void main(String[] args) {\n\n      HashMap&lt;String,String&gt; map = new HashMap&lt;String,String&gt;();\n      map.add(\"1\", \"a\");\n      map.add(\"2\", \"b\");\n      XStream xstream = new XStream(new JettisonMappedXmlDriver());\n\n      System.out.println(xstream.toXML(map));       \n\n    }\n\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1788503,"reputation":2157,"user_id":1629393,"display_name":"rama"},"down_vote_count":2,"up_vote_count":216,"is_accepted":false,"score":214,"last_activity_date":1410365800,"creation_date":1346147075,"answer_id":12156646,"question_id":12155800,"body_markdown":"[Gson][1] can also be used to serialize arbitrarily complex objects. \r\n\r\nHere is how you use it: \r\n\r\n    Gson gson = new Gson(); \r\n    String json = gson.toJson(myObject); \r\n\r\n\r\n`Gson` will automatically convert collections to `JSON` arrays. Gson can serialize private fields and automatically ignores transient fields.\r\n\r\n\r\n  [1]: https://code.google.com/p/google-gson/","title":"How to convert hashmap to JSON object in Java","body":"<p><a href=\"https://code.google.com/p/google-gson/\" rel=\"noreferrer\">Gson</a> can also be used to serialize arbitrarily complex objects. </p>\n\n<p>Here is how you use it: </p>\n\n<pre><code>Gson gson = new Gson(); \nString json = gson.toJson(myObject); \n</code></pre>\n\n<p><code>Gson</code> will automatically convert collections to <code>JSON</code> arrays. Gson can serialize private fields and automatically ignores transient fields.</p>\n"},{"tags":[],"owner":{"account_id":62450,"reputation":10263,"user_id":185565,"accept_rate":91,"display_name":"Whome"},"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1377521010,"creation_date":1377521010,"answer_id":18444414,"question_id":12155800,"body_markdown":"Late to the party but here is my [GSON][1] adhoc writer for serializing hashmap. I had to write map of key-value pairs as json string attributes, expect one specific to be integer type. I did not want to create custom JavaBean wrapper for this simple usecase. \r\n\r\nGSON JsonWriter class is easy to use serializer class containing few strongly typed writer.value() functions.\r\n\r\n\t// write Map as JSON document to http servlet response\r\n\tMap&lt;String,String&gt; sd = DAO.getSD(123);\r\n\tres.setContentType(&quot;application/json; charset=UTF-8&quot;);\r\n\tres.setCharacterEncoding(&quot;UTF-8&quot;);\r\n\tJsonWriter writer = new JsonWriter(new OutputStreamWriter(res.getOutputStream(), &quot;UTF-8&quot;));\r\n\twriter.beginObject();\r\n\tfor(String key : sd.keySet()) {\r\n\t\tString val = sd.get(key);\r\n\t\twriter.name(key);\r\n\t\tif (key.equals(&quot;UniqueID&quot;) &amp;&amp; val!=null)\r\n\t\t\twriter.value(Long.parseLong(val));\r\n\t\telse\r\n\t\t\twriter.value(val);\r\n\t}\r\n\twriter.endObject();\r\n\twriter.close();\r\n\r\n\r\nIf none of the custom types be needed I could have just use toJson() function. gson-2.2.4.jar library is just under 190KB without any brutal dependencies. Easy to use on any custom servlet app or standalone application without big framework integrations.\r\n\r\n    Gson gson = new Gson(); \r\n    String json = gson.toJson(myMap); \r\n\r\n  [1]: http://code.google.com/p/google-gson/\r\n","title":"How to convert hashmap to JSON object in Java","body":"<p>Late to the party but here is my <a href=\"http://code.google.com/p/google-gson/\" rel=\"noreferrer\">GSON</a> adhoc writer for serializing hashmap. I had to write map of key-value pairs as json string attributes, expect one specific to be integer type. I did not want to create custom JavaBean wrapper for this simple usecase. </p>\n\n<p>GSON JsonWriter class is easy to use serializer class containing few strongly typed writer.value() functions.</p>\n\n<pre><code>// write Map as JSON document to http servlet response\nMap&lt;String,String&gt; sd = DAO.getSD(123);\nres.setContentType(\"application/json; charset=UTF-8\");\nres.setCharacterEncoding(\"UTF-8\");\nJsonWriter writer = new JsonWriter(new OutputStreamWriter(res.getOutputStream(), \"UTF-8\"));\nwriter.beginObject();\nfor(String key : sd.keySet()) {\n    String val = sd.get(key);\n    writer.name(key);\n    if (key.equals(\"UniqueID\") &amp;&amp; val!=null)\n        writer.value(Long.parseLong(val));\n    else\n        writer.value(val);\n}\nwriter.endObject();\nwriter.close();\n</code></pre>\n\n<p>If none of the custom types be needed I could have just use toJson() function. gson-2.2.4.jar library is just under 190KB without any brutal dependencies. Easy to use on any custom servlet app or standalone application without big framework integrations.</p>\n\n<pre><code>Gson gson = new Gson(); \nString json = gson.toJson(myMap); \n</code></pre>\n"},{"tags":[],"owner":{"account_id":2315704,"reputation":11983,"user_id":2032823,"accept_rate":84,"display_name":"Zeeshan"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1411651718,"creation_date":1411651718,"answer_id":26039868,"question_id":12155800,"body_markdown":"If you are using `net.sf.json.JSONObject` then you won&#39;t find a `JSONObject(map)` constructor in it. You have to use the `public static JSONObject fromObject( Object object ) ` method. This method accepts JSON formatted strings, Maps, DynaBeans and JavaBeans.\r\n\r\n`JSONObject jsonObject = JSONObject.fromObject(myMap);`","title":"How to convert hashmap to JSON object in Java","body":"<p>If you are using <code>net.sf.json.JSONObject</code> then you won't find a <code>JSONObject(map)</code> constructor in it. You have to use the <code>public static JSONObject fromObject( Object object )</code> method. This method accepts JSON formatted strings, Maps, DynaBeans and JavaBeans.</p>\n\n<p><code>JSONObject jsonObject = JSONObject.fromObject(myMap);</code></p>\n"},{"tags":[],"owner":{"account_id":2203785,"reputation":2039,"user_id":1947482,"display_name":"Valentyn Kolesnikov"},"down_vote_count":0,"up_vote_count":10,"is_accepted":false,"score":10,"last_activity_date":1643043498,"creation_date":1447458751,"answer_id":33703537,"question_id":12155800,"body_markdown":"[Underscore-java][1] library can convert hash map or array list to json and vice verse.\r\n\r\n    import com.github.underscore.U;\r\n    import java.util.*;\r\n    \r\n    public class Main {\r\n    \r\n        public static void main(String[] args) {\r\n    \r\n            Map&lt;String, Object&gt; map = new LinkedHashMap&lt;&gt;();\r\n            map.put(&quot;1&quot;, &quot;a&quot;);\r\n            map.put(&quot;2&quot;, &quot;b&quot;);\r\n    \r\n            System.out.println(U.toJson(map));\r\n            // {\r\n            //    &quot;1&quot;: &quot;a&quot;,\r\n            //    &quot;2&quot;: &quot;b&quot;\r\n            // }\r\n        }\r\n    }\r\n\r\n\r\n  [1]: https://github.com/javadev/underscore-java","title":"How to convert hashmap to JSON object in Java","body":"<p><a href=\"https://github.com/javadev/underscore-java\" rel=\"nofollow noreferrer\">Underscore-java</a> library can convert hash map or array list to json and vice verse.</p>\n<pre><code>import com.github.underscore.U;\nimport java.util.*;\n\npublic class Main {\n\n    public static void main(String[] args) {\n\n        Map&lt;String, Object&gt; map = new LinkedHashMap&lt;&gt;();\n        map.put(&quot;1&quot;, &quot;a&quot;);\n        map.put(&quot;2&quot;, &quot;b&quot;);\n\n        System.out.println(U.toJson(map));\n        // {\n        //    &quot;1&quot;: &quot;a&quot;,\n        //    &quot;2&quot;: &quot;b&quot;\n        // }\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3697794,"reputation":1246,"user_id":3078602,"accept_rate":75,"display_name":"Vladislav"},"down_vote_count":1,"up_vote_count":8,"is_accepted":false,"score":7,"last_activity_date":1449856301,"creation_date":1449856301,"answer_id":34229596,"question_id":12155800,"body_markdown":"If you need use it in the code.\r\n\r\n    Gson gsone = new Gson();\r\n    JsonObject res = gsone.toJsonTree(sqlParams).getAsJsonObject();\r\n\r\n","title":"How to convert hashmap to JSON object in Java","body":"<p>If you need use it in the code.</p>\n\n<pre><code>Gson gsone = new Gson();\nJsonObject res = gsone.toJsonTree(sqlParams).getAsJsonObject();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":455475,"reputation":1442,"user_id":5691656,"display_name":"Andrey Sarul"},"down_vote_count":1,"up_vote_count":14,"is_accepted":false,"score":13,"last_activity_date":1618168747,"creation_date":1461920792,"answer_id":36934134,"question_id":12155800,"body_markdown":"In my case I didn&#39;t want any dependancies. Using Java 8 you can get JSON as a string this simple:\r\n\r\n    Map&lt;String, Object&gt; map = new HashMap&lt;&gt;();\r\n    map.put(&quot;key&quot;, &quot;value&quot;);\r\n    map.put(&quot;key2&quot;, &quot;value2&quot;);\r\n    String json = &quot;{&quot;+map.entrySet().stream()\r\n        .map(e -&gt; &quot;\\&quot;&quot;+ e.getKey() + &quot;\\&quot;:\\&quot;&quot; + String.valueOf(e.getValue()) + &quot;\\&quot;&quot;)\r\n        .collect(Collectors.joining(&quot;, &quot;))+&quot;}&quot;;","title":"How to convert hashmap to JSON object in Java","body":"<p>In my case I didn't want any dependancies. Using Java 8 you can get JSON as a string this simple:</p>\n<pre><code>Map&lt;String, Object&gt; map = new HashMap&lt;&gt;();\nmap.put(&quot;key&quot;, &quot;value&quot;);\nmap.put(&quot;key2&quot;, &quot;value2&quot;);\nString json = &quot;{&quot;+map.entrySet().stream()\n    .map(e -&gt; &quot;\\&quot;&quot;+ e.getKey() + &quot;\\&quot;:\\&quot;&quot; + String.valueOf(e.getValue()) + &quot;\\&quot;&quot;)\n    .collect(Collectors.joining(&quot;, &quot;))+&quot;}&quot;;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":7098388,"reputation":29,"user_id":5431010,"display_name":"Amras"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1465920897,"creation_date":1465920897,"answer_id":37817244,"question_id":12155800,"body_markdown":"I faced a similar problem when deserializing the Response from custom commands in selenium. The response was json, but selenium internally translates that into a java.util.HashMap[String, Object]\r\n\r\nIf you are familiar with scala and use the play-API for JSON, you might benefit from this:\r\n\r\n\r\n    import play.api.libs.json.{JsValue, Json}\r\n    import scala.collection.JavaConversions.mapAsScalaMap\r\n    \r\n    \r\n    object JsonParser {\r\n    \r\n      def parse(map: Map[String, Any]): JsValue = {\r\n        val values = for((key, value) &lt;- map) yield {\r\n          value match {\r\n            case m: java.util.Map[String, _] @unchecked =&gt; Json.obj(key -&gt; parse(m.toMap))\r\n            case m: Map[String, _] @unchecked =&gt; Json.obj(key -&gt; parse(m))\r\n            case int: Int =&gt; Json.obj(key -&gt; int)\r\n            case str: String =&gt; Json.obj(key -&gt; str)\r\n            case bool: Boolean =&gt; Json.obj(key -&gt; bool)\r\n          }\r\n        }\r\n    \r\n        values.foldLeft(Json.obj())((temp, obj) =&gt; {\r\n          temp.deepMerge(obj)\r\n        })\r\n      }\r\n    }\r\n\r\nSmall code description:\r\n\r\nThe code recursively traverses through the HashMap until basic types (String, Integer, Boolean) are found. These basic types can be directly wrapped into a JsObject. When the recursion is unfolded, the deepmerge concatenates the created objects.\r\n\r\n&#39;@unchecked&#39; takes care of type erasure warnings.","title":"How to convert hashmap to JSON object in Java","body":"<p>I faced a similar problem when deserializing the Response from custom commands in selenium. The response was json, but selenium internally translates that into a java.util.HashMap[String, Object]</p>\n\n<p>If you are familiar with scala and use the play-API for JSON, you might benefit from this:</p>\n\n<pre><code>import play.api.libs.json.{JsValue, Json}\nimport scala.collection.JavaConversions.mapAsScalaMap\n\n\nobject JsonParser {\n\n  def parse(map: Map[String, Any]): JsValue = {\n    val values = for((key, value) &lt;- map) yield {\n      value match {\n        case m: java.util.Map[String, _] @unchecked =&gt; Json.obj(key -&gt; parse(m.toMap))\n        case m: Map[String, _] @unchecked =&gt; Json.obj(key -&gt; parse(m))\n        case int: Int =&gt; Json.obj(key -&gt; int)\n        case str: String =&gt; Json.obj(key -&gt; str)\n        case bool: Boolean =&gt; Json.obj(key -&gt; bool)\n      }\n    }\n\n    values.foldLeft(Json.obj())((temp, obj) =&gt; {\n      temp.deepMerge(obj)\n    })\n  }\n}\n</code></pre>\n\n<p>Small code description:</p>\n\n<p>The code recursively traverses through the HashMap until basic types (String, Integer, Boolean) are found. These basic types can be directly wrapped into a JsObject. When the recursion is unfolded, the deepmerge concatenates the created objects.</p>\n\n<p>'@unchecked' takes care of type erasure warnings.</p>\n"},{"tags":[],"owner":{"account_id":4443642,"reputation":511,"user_id":3617571,"accept_rate":75,"display_name":"Eduardo Melo"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1471901140,"creation_date":1471901140,"answer_id":39088981,"question_id":12155800,"body_markdown":"You can use [Gson][1].\r\nThis library provides simple methods to convert Java objects to JSON objects and vice-versa. \r\n\r\nExample:\r\n\r\n    GsonBuilder gb = new GsonBuilder();\r\n    Gson gson = gb.serializeNulls().create();\r\n    gson.toJson(object);\r\n\r\nYou can use a GsonBuilder when you need to set configuration options other than the default. In the above example, the conversion process will also serialize null attributes from object.\r\n\r\nHowever, this approach only works for non-generic types. For generic types you need to use toJson(object, Type).\r\n\r\nMore information about Gson [here][2].\r\n\r\n\r\nRemember that the object must implement the **Serializable** interface.\r\n \r\n\r\n\r\n  [1]: https://github.com/google/gson\r\n  [2]: https://github.com/google/gson/blob/master/UserGuide.md","title":"How to convert hashmap to JSON object in Java","body":"<p>You can use <a href=\"https://github.com/google/gson\" rel=\"nofollow\">Gson</a>.\nThis library provides simple methods to convert Java objects to JSON objects and vice-versa. </p>\n\n<p>Example:</p>\n\n<pre><code>GsonBuilder gb = new GsonBuilder();\nGson gson = gb.serializeNulls().create();\ngson.toJson(object);\n</code></pre>\n\n<p>You can use a GsonBuilder when you need to set configuration options other than the default. In the above example, the conversion process will also serialize null attributes from object.</p>\n\n<p>However, this approach only works for non-generic types. For generic types you need to use toJson(object, Type).</p>\n\n<p>More information about Gson <a href=\"https://github.com/google/gson/blob/master/UserGuide.md\" rel=\"nofollow\">here</a>.</p>\n\n<p>Remember that the object must implement the <strong>Serializable</strong> interface.</p>\n"},{"tags":[],"owner":{"account_id":3482475,"reputation":27230,"user_id":2914140,"accept_rate":69,"display_name":"CoolMind"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1472559334,"creation_date":1472559334,"answer_id":39227242,"question_id":12155800,"body_markdown":"If you use complex objects, you should apply **enableComplexMapKeySerialization()**, as stated in https://stackoverflow.com/a/24635655/2914140 and https://stackoverflow.com/a/26374888/2914140.\r\n\r\n    Gson gson = new GsonBuilder().enableComplexMapKeySerialization().create();\r\n    Map&lt;Point, String&gt; original = new LinkedHashMap&lt;Point, String&gt;();\r\n    original.put(new Point(5, 6), &quot;a&quot;);\r\n    original.put(new Point(8, 8), &quot;b&quot;);\r\n    System.out.println(gson.toJson(original));\r\n\r\nOutput will be:\r\n\r\n    {\r\n     &quot;(5,6)&quot;: &quot;a&quot;,\r\n     &quot;(8,8)&quot;: &quot;b&quot;\r\n    }","title":"How to convert hashmap to JSON object in Java","body":"<p>If you use complex objects, you should apply <strong>enableComplexMapKeySerialization()</strong>, as stated in <a href=\"https://stackoverflow.com/a/24635655/2914140\">https://stackoverflow.com/a/24635655/2914140</a> and <a href=\"https://stackoverflow.com/a/26374888/2914140\">https://stackoverflow.com/a/26374888/2914140</a>.</p>\n\n<pre><code>Gson gson = new GsonBuilder().enableComplexMapKeySerialization().create();\nMap&lt;Point, String&gt; original = new LinkedHashMap&lt;Point, String&gt;();\noriginal.put(new Point(5, 6), \"a\");\noriginal.put(new Point(8, 8), \"b\");\nSystem.out.println(gson.toJson(original));\n</code></pre>\n\n<p>Output will be:</p>\n\n<pre><code>{\n \"(5,6)\": \"a\",\n \"(8,8)\": \"b\"\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6817682,"reputation":877,"user_id":5245762,"accept_rate":75,"display_name":"UnahD"},"down_vote_count":0,"up_vote_count":15,"is_accepted":false,"score":15,"last_activity_date":1472638136,"creation_date":1472638136,"answer_id":39246682,"question_id":12155800,"body_markdown":"You can just enumerate the map and add the key-value pairs to the JSONObject\r\n\r\nMethod : \r\n\r\n    private JSONObject getJsonFromMap(Map&lt;String, Object&gt; map) throws JSONException {\r\n        JSONObject jsonData = new JSONObject();\r\n        for (String key : map.keySet()) {\r\n            Object value = map.get(key);\r\n            if (value instanceof Map&lt;?, ?&gt;) {\r\n                value = getJsonFromMap((Map&lt;String, Object&gt;) value);\r\n            }\r\n            jsonData.put(key, value);\r\n        }\r\n        return jsonData;\r\n    }","title":"How to convert hashmap to JSON object in Java","body":"<p>You can just enumerate the map and add the key-value pairs to the JSONObject</p>\n\n<p>Method : </p>\n\n<pre><code>private JSONObject getJsonFromMap(Map&lt;String, Object&gt; map) throws JSONException {\n    JSONObject jsonData = new JSONObject();\n    for (String key : map.keySet()) {\n        Object value = map.get(key);\n        if (value instanceof Map&lt;?, ?&gt;) {\n            value = getJsonFromMap((Map&lt;String, Object&gt;) value);\n        }\n        jsonData.put(key, value);\n    }\n    return jsonData;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4877821,"reputation":3416,"user_id":3932396,"accept_rate":78,"display_name":"Ankur Mahajan"},"down_vote_count":0,"up_vote_count":102,"is_accepted":false,"score":102,"last_activity_date":1699945199,"creation_date":1480490228,"answer_id":40882429,"question_id":12155800,"body_markdown":"You can convert `Map` to `JSON` using `Jackson` as follows:\r\n\r\n    Map&lt;String,Object&gt; map = new HashMap&lt;&gt;();\r\n    //You can convert any Object.\r\n    String[] value1 = new String[] { &quot;value11&quot;, &quot;value12&quot;, &quot;value13&quot; };\r\n\tString[] value2 = new String[] { &quot;value21&quot;, &quot;value22&quot;, &quot;value23&quot; };\r\n\tmap.put(&quot;key1&quot;, value1);\r\n\tmap.put(&quot;key2&quot;, value2);\r\n    map.put(&quot;key3&quot;,&quot;string1&quot;);\r\n    map.put(&quot;key4&quot;,&quot;string2&quot;);\r\n    \r\n    String json = new ObjectMapper().writeValueAsString(map);\r\n    System.out.println(json);\r\n\r\nMaven Dependencies for `Jackson` : \r\n\r\n    &lt;dependency&gt;\r\n    \t&lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\r\n    \t&lt;artifactId&gt;jackson-core&lt;/artifactId&gt;\r\n    \t&lt;version&gt;2.5.3&lt;/version&gt;\r\n    \t&lt;scope&gt;compile&lt;/scope&gt;\r\n    &lt;/dependency&gt;\r\n    \r\n    &lt;dependency&gt;\r\n    \t&lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\r\n    \t&lt;artifactId&gt;jackson-databind&lt;/artifactId&gt;\r\n    \t&lt;version&gt;2.5.3&lt;/version&gt;\r\n    \t&lt;scope&gt;compile&lt;/scope&gt;\r\n    &lt;/dependency&gt;\r\n\r\nIf you are using `JSONObject` library, you can convert map to `JSON` as follows:\r\n\r\n**JSONObject Library:**\r\n    `import org.json.JSONObject;`\r\n\r\n\tMap&lt;String, Object&gt; map = new HashMap&lt;&gt;();\r\n\t// Convert a map having list of values.\r\n\tString[] value1 = new String[] { &quot;value11&quot;, &quot;value12&quot;, &quot;value13&quot; };\r\n\tString[] value2 = new String[] { &quot;value21&quot;, &quot;value22&quot;, &quot;value23&quot; };\r\n\tmap.put(&quot;key1&quot;, value1);\r\n\tmap.put(&quot;key2&quot;, value2);\r\n\r\n\tJSONObject json = new JSONObject(map);\r\n\tSystem.out.println(json);\r\n\r\nMaven Dependencies for `JSONObject` :\r\n\r\n    &lt;dependency&gt;\r\n    \t&lt;groupId&gt;org.json&lt;/groupId&gt;\r\n    \t&lt;artifactId&gt;json&lt;/artifactId&gt;\r\n    \t&lt;version&gt;20140107&lt;/version&gt;\r\n    &lt;/dependency&gt;","title":"How to convert hashmap to JSON object in Java","body":"<p>You can convert <code>Map</code> to <code>JSON</code> using <code>Jackson</code> as follows:</p>\n<pre><code>Map&lt;String,Object&gt; map = new HashMap&lt;&gt;();\n//You can convert any Object.\nString[] value1 = new String[] { &quot;value11&quot;, &quot;value12&quot;, &quot;value13&quot; };\nString[] value2 = new String[] { &quot;value21&quot;, &quot;value22&quot;, &quot;value23&quot; };\nmap.put(&quot;key1&quot;, value1);\nmap.put(&quot;key2&quot;, value2);\nmap.put(&quot;key3&quot;,&quot;string1&quot;);\nmap.put(&quot;key4&quot;,&quot;string2&quot;);\n\nString json = new ObjectMapper().writeValueAsString(map);\nSystem.out.println(json);\n</code></pre>\n<p>Maven Dependencies for <code>Jackson</code> :</p>\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\n    &lt;artifactId&gt;jackson-core&lt;/artifactId&gt;\n    &lt;version&gt;2.5.3&lt;/version&gt;\n    &lt;scope&gt;compile&lt;/scope&gt;\n&lt;/dependency&gt;\n\n&lt;dependency&gt;\n    &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\n    &lt;artifactId&gt;jackson-databind&lt;/artifactId&gt;\n    &lt;version&gt;2.5.3&lt;/version&gt;\n    &lt;scope&gt;compile&lt;/scope&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>If you are using <code>JSONObject</code> library, you can convert map to <code>JSON</code> as follows:</p>\n<p><strong>JSONObject Library:</strong>\n<code>import org.json.JSONObject;</code></p>\n<pre><code>Map&lt;String, Object&gt; map = new HashMap&lt;&gt;();\n// Convert a map having list of values.\nString[] value1 = new String[] { &quot;value11&quot;, &quot;value12&quot;, &quot;value13&quot; };\nString[] value2 = new String[] { &quot;value21&quot;, &quot;value22&quot;, &quot;value23&quot; };\nmap.put(&quot;key1&quot;, value1);\nmap.put(&quot;key2&quot;, value2);\n\nJSONObject json = new JSONObject(map);\nSystem.out.println(json);\n</code></pre>\n<p>Maven Dependencies for <code>JSONObject</code> :</p>\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.json&lt;/groupId&gt;\n    &lt;artifactId&gt;json&lt;/artifactId&gt;\n    &lt;version&gt;20140107&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3433236,"reputation":2920,"user_id":2877004,"display_name":"Alecs"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1485702601,"creation_date":1485702601,"answer_id":41922357,"question_id":12155800,"body_markdown":"Here my single-line solution with GSON:\r\n\r\n    myObject = new Gson().fromJson(new Gson().toJson(myHashMap), MyClass.class);\r\n","title":"How to convert hashmap to JSON object in Java","body":"<p>Here my single-line solution with GSON:</p>\n\n<pre><code>myObject = new Gson().fromJson(new Gson().toJson(myHashMap), MyClass.class);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3284132,"reputation":2685,"user_id":2764007,"display_name":"drakeet"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1489742549,"creation_date":1489742549,"answer_id":42853541,"question_id":12155800,"body_markdown":"**No need for Gson or JSON parsing libraries.**\r\nJust using `new JSONObject(Map&lt;String, JSONObject&gt;).toString()`, e.g:\r\n\r\n    /**\r\n     * convert target map to JSON string\r\n     *\r\n     * @param map the target map\r\n     * @return JSON string of the map\r\n     */\r\n    @NonNull public String toJson(@NonNull Map&lt;String, Target&gt; map) {\r\n        final Map&lt;String, JSONObject&gt; flatMap = new HashMap&lt;&gt;();\r\n        for (String key : map.keySet()) {\r\n            try {\r\n                flatMap.put(key, toJsonObject(map.get(key)));\r\n            } catch (JSONException e) {\r\n                e.printStackTrace();\r\n            }\r\n        }\r\n        try {\r\n            // 2 indentSpaces for pretty printing\r\n            return new JSONObject(flatMap).toString(2);\r\n        } catch (JSONException e) {\r\n            e.printStackTrace();\r\n            return &quot;{}&quot;;\r\n        }\r\n    }","title":"How to convert hashmap to JSON object in Java","body":"<p><strong>No need for Gson or JSON parsing libraries.</strong>\nJust using <code>new JSONObject(Map&lt;String, JSONObject&gt;).toString()</code>, e.g:</p>\n\n<pre><code>/**\n * convert target map to JSON string\n *\n * @param map the target map\n * @return JSON string of the map\n */\n@NonNull public String toJson(@NonNull Map&lt;String, Target&gt; map) {\n    final Map&lt;String, JSONObject&gt; flatMap = new HashMap&lt;&gt;();\n    for (String key : map.keySet()) {\n        try {\n            flatMap.put(key, toJsonObject(map.get(key)));\n        } catch (JSONException e) {\n            e.printStackTrace();\n        }\n    }\n    try {\n        // 2 indentSpaces for pretty printing\n        return new JSONObject(flatMap).toString(2);\n    } catch (JSONException e) {\n        e.printStackTrace();\n        return \"{}\";\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2126061,"reputation":669,"user_id":1888197,"accept_rate":73,"display_name":"shark1608"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1491871153,"creation_date":1491871153,"answer_id":43334936,"question_id":12155800,"body_markdown":"For those using `org.json.simple.JSONObject`, you could convert the map to Json String and parse it to get the `JSONObject`.\r\n\r\n    JSONObject object = (JSONObject) new JSONParser().parse(JSONObject.toJSONString(map));","title":"How to convert hashmap to JSON object in Java","body":"<p>For those using <code>org.json.simple.JSONObject</code>, you could convert the map to Json String and parse it to get the <code>JSONObject</code>.</p>\n\n<pre><code>JSONObject object = (JSONObject) new JSONParser().parse(JSONObject.toJSONString(map));\n</code></pre>\n"},{"tags":[],"owner":{"account_id":374176,"reputation":4358,"user_id":724238,"accept_rate":84,"display_name":"pushya"},"down_vote_count":1,"up_vote_count":3,"is_accepted":false,"score":2,"last_activity_date":1505910937,"creation_date":1505842287,"answer_id":46306560,"question_id":12155800,"body_markdown":"        import org.json.JSONObject;\r\n\r\n        HashMap&lt;Object, Object&gt; map = new HashMap&lt;&gt;();\r\n\t\tString[] list={&quot;Grader&quot;,&quot;Participant&quot;};\r\n\t\tString[] list1={&quot;Assistant&quot;,&quot;intern&quot;};\r\n\t\tmap.put(&quot;TeachingAssistant&quot;,list);\r\n\t\tmap.put(&quot;Writer&quot;,list1);\r\n\t\tJSONObject jsonObject = new JSONObject(map);\r\n\t\tSystem.out.printf(jsonObject.toString());\r\n\r\n        // Result: {&quot;TeachingAssistant&quot;:[&quot;Grader&quot;,&quot;Participant&quot;],&quot;Writer&quot;:[&quot;Assistant&quot;,&quot;intern&quot;]}","title":"How to convert hashmap to JSON object in Java","body":"<pre><code>    import org.json.JSONObject;\n\n    HashMap&lt;Object, Object&gt; map = new HashMap&lt;&gt;();\n    String[] list={\"Grader\",\"Participant\"};\n    String[] list1={\"Assistant\",\"intern\"};\n    map.put(\"TeachingAssistant\",list);\n    map.put(\"Writer\",list1);\n    JSONObject jsonObject = new JSONObject(map);\n    System.out.printf(jsonObject.toString());\n\n    // Result: {\"TeachingAssistant\":[\"Grader\",\"Participant\"],\"Writer\":[\"Assistant\",\"intern\"]}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1059953,"reputation":873,"user_id":1061796,"accept_rate":48,"display_name":"IMJS"},"down_vote_count":1,"up_vote_count":6,"is_accepted":false,"score":5,"last_activity_date":1699756355,"creation_date":1515446464,"answer_id":48158227,"question_id":12155800,"body_markdown":"I found another way to handle it.\r\n\r\n    Map obj=new HashMap();    \r\n    obj.put(&quot;name&quot;,&quot;sonoo&quot;);    \r\n    obj.put(&quot;age&quot;,new Integer(27));    \r\n    obj.put(&quot;salary&quot;,new Double(600000));   \r\n    String jsonText = JSONValue.toJSONString(obj);  \r\n    System.out.print(jsonText);","title":"How to convert hashmap to JSON object in Java","body":"<p>I found another way to handle it.</p>\n<pre><code>Map obj=new HashMap();    \nobj.put(&quot;name&quot;,&quot;sonoo&quot;);    \nobj.put(&quot;age&quot;,new Integer(27));    \nobj.put(&quot;salary&quot;,new Double(600000));   \nString jsonText = JSONValue.toJSONString(obj);  \nSystem.out.print(jsonText);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3650169,"reputation":3098,"user_id":3042543,"display_name":"Rafal Enden"},"down_vote_count":1,"up_vote_count":6,"is_accepted":false,"score":5,"last_activity_date":1535034697,"creation_date":1535034697,"answer_id":51988230,"question_id":12155800,"body_markdown":"If you don&#39;t really need HashMap then you can do something like that:\r\n\r\n    String jsonString = new JSONObject() {{\r\n      put(&quot;firstName&quot;, user.firstName);\r\n      put(&quot;lastName&quot;, user.lastName);\r\n    }}.toString();\r\n\r\nOutput:\r\n\r\n    {\r\n      &quot;firstName&quot;: &quot;John&quot;,\r\n      &quot;lastName&quot;: &quot;Doe&quot;\r\n    }","title":"How to convert hashmap to JSON object in Java","body":"<p>If you don't really need HashMap then you can do something like that:</p>\n\n<pre><code>String jsonString = new JSONObject() {{\n  put(\"firstName\", user.firstName);\n  put(\"lastName\", user.lastName);\n}}.toString();\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>{\n  \"firstName\": \"John\",\n  \"lastName\": \"Doe\"\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1645492,"reputation":1481,"user_id":1517100,"display_name":"jiahut"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1699756384,"creation_date":1541484654,"answer_id":53166594,"question_id":12155800,"body_markdown":"This works for me:\r\n\r\n\r\n    import groovy.json.JsonBuilder\r\n    properties = new Properties()\r\n    properties.put(&quot;name&quot;, &quot;zhangsan&quot;)\r\n    \r\n    println new JsonBuilder(properties).toPrettyString()\r\n","title":"How to convert hashmap to JSON object in Java","body":"<p>This works for me:</p>\n<pre><code>import groovy.json.JsonBuilder\nproperties = new Properties()\nproperties.put(&quot;name&quot;, &quot;zhangsan&quot;)\n\nprintln new JsonBuilder(properties).toPrettyString()\n</code></pre>\n"},{"tags":[],"owner":{"account_id":7626755,"reputation":511,"user_id":5782985,"display_name":"Galley"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1545911547,"creation_date":1545911547,"answer_id":53944639,"question_id":12155800,"body_markdown":"I&#39;m using Alibaba fastjson, easy and simple:\r\n\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;com.alibaba&lt;/groupId&gt;\r\n        &lt;artifactId&gt;fastjson&lt;/artifactId&gt;\r\n        &lt;version&gt;VERSION_CODE&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n\r\nand import:\r\n\r\n    import com.alibaba.fastjson.JSON;\r\n\r\nThen:\r\n\r\n    String text = JSON.toJSONString(obj); // serialize\r\n    VO vo = JSON.parseObject(&quot;{...}&quot;, VO.class); //unserialize\r\n\r\nEverything is ok.","title":"How to convert hashmap to JSON object in Java","body":"<p>I'm using Alibaba fastjson, easy and simple:</p>\n\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;com.alibaba&lt;/groupId&gt;\n    &lt;artifactId&gt;fastjson&lt;/artifactId&gt;\n    &lt;version&gt;VERSION_CODE&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n\n<p>and import:</p>\n\n<pre><code>import com.alibaba.fastjson.JSON;\n</code></pre>\n\n<p>Then:</p>\n\n<pre><code>String text = JSON.toJSONString(obj); // serialize\nVO vo = JSON.parseObject(\"{...}\", VO.class); //unserialize\n</code></pre>\n\n<p>Everything is ok.</p>\n"},{"tags":[],"owner":{"account_id":2273779,"reputation":1060,"user_id":2000573,"accept_rate":50,"display_name":"RiccardoCh"},"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1552928046,"creation_date":1552928046,"answer_id":55226362,"question_id":12155800,"body_markdown":"This solution works with complex JSONs:\r\n\r\n \r\n\r\n    public Object toJSON(Object object) throws JSONException {\r\n        if (object instanceof HashMap) {\r\n            JSONObject json = new JSONObject();\r\n            HashMap map = (HashMap) object;\r\n            for (Object key : map.keySet()) {\r\n                json.put(key.toString(), toJSON(map.get(key)));\r\n            }\r\n            return json;\r\n        } else if (object instanceof Iterable) {\r\n            JSONArray json = new JSONArray();\r\n            for (Object value : ((Iterable) object)) {\r\n                json.put(toJSON(value));\r\n            }\r\n            return json;\r\n        }\r\n        else {\r\n            return object;\r\n        }\r\n    }","title":"How to convert hashmap to JSON object in Java","body":"<p>This solution works with complex JSONs:</p>\n\n<pre><code>public Object toJSON(Object object) throws JSONException {\n    if (object instanceof HashMap) {\n        JSONObject json = new JSONObject();\n        HashMap map = (HashMap) object;\n        for (Object key : map.keySet()) {\n            json.put(key.toString(), toJSON(map.get(key)));\n        }\n        return json;\n    } else if (object instanceof Iterable) {\n        JSONArray json = new JSONArray();\n        for (Object value : ((Iterable) object)) {\n            json.put(toJSON(value));\n        }\n        return json;\n    }\n    else {\n        return object;\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":14390532,"reputation":75,"user_id":10395216,"display_name":"Kelly Budol"},"down_vote_count":2,"up_vote_count":8,"is_accepted":false,"score":6,"last_activity_date":1559890528,"creation_date":1559890528,"answer_id":56489348,"question_id":12155800,"body_markdown":"Better be late than never. I used **GSON** to convert list of HashMap to string if in case you want to have a serialized list.\r\n\r\n    List&lt;HashMap&lt;String, String&gt;&gt; list = new ArrayList&lt;&gt;();\r\n    HashMap&lt;String,String&gt; hashMap = new HashMap&lt;&gt;();\r\n    hashMap.add(&quot;key&quot;, &quot;value&quot;);\r\n    hashMap.add(&quot;key&quot;, &quot;value&quot;);\r\n    hashMap.add(&quot;key&quot;, &quot;value&quot;);\r\n    list.add(hashMap);\r\n\r\n    String json = new Gson().toJson(list);\r\n\r\nThis `json` produces `[{&quot;key&quot;:&quot;value&quot;,&quot;key&quot;:&quot;value&quot;,&quot;key&quot;:&quot;value&quot;}]`","title":"How to convert hashmap to JSON object in Java","body":"<p>Better be late than never. I used <strong>GSON</strong> to convert list of HashMap to string if in case you want to have a serialized list.</p>\n\n<pre><code>List&lt;HashMap&lt;String, String&gt;&gt; list = new ArrayList&lt;&gt;();\nHashMap&lt;String,String&gt; hashMap = new HashMap&lt;&gt;();\nhashMap.add(\"key\", \"value\");\nhashMap.add(\"key\", \"value\");\nhashMap.add(\"key\", \"value\");\nlist.add(hashMap);\n\nString json = new Gson().toJson(list);\n</code></pre>\n\n<p>This <code>json</code> produces <code>[{\"key\":\"value\",\"key\":\"value\",\"key\":\"value\"}]</code></p>\n"},{"tags":[],"owner":{"account_id":4182503,"reputation":2396,"user_id":3427079,"accept_rate":87,"display_name":"G_V"},"down_vote_count":2,"up_vote_count":0,"is_accepted":false,"score":-2,"last_activity_date":1559911686,"creation_date":1559902787,"answer_id":56492438,"question_id":12155800,"body_markdown":"First convert all your objects into valid Strings\r\n\r\n    HashMap&lt;String, String&gt; params = new HashMap&lt;&gt;();\r\n    params.put(&quot;arg1&quot;, &quot;&lt;b&gt;some text&lt;/b&gt;&quot;);\r\n    params.put(&quot;arg2&quot;, someObject.toString());\r\n\r\nThen insert the entire map into a org.json.JSONObject\r\n\r\n    JSONObject postData = new JSONObject(params);\r\n\r\nNow you can get the JSON by simply calling the object&#39;s toString\r\n\r\n    postData.toString()\r\n    //{&quot;arg1&quot;:&quot;&lt;b&gt;some text&lt;\\/b&gt;&quot; &quot;arg2&quot;:&quot;object output&quot;}\r\nCreate a new JSONObject\r\n\r\n    JSONObject o = new JSONObject(postData.toString());\r\n\r\nOr as a byte array for sending over HTTP\r\n\r\n    postData.toString().getBytes(&quot;UTF-8&quot;);","title":"How to convert hashmap to JSON object in Java","body":"<p>First convert all your objects into valid Strings</p>\n\n<pre><code>HashMap&lt;String, String&gt; params = new HashMap&lt;&gt;();\nparams.put(\"arg1\", \"&lt;b&gt;some text&lt;/b&gt;\");\nparams.put(\"arg2\", someObject.toString());\n</code></pre>\n\n<p>Then insert the entire map into a org.json.JSONObject</p>\n\n<pre><code>JSONObject postData = new JSONObject(params);\n</code></pre>\n\n<p>Now you can get the JSON by simply calling the object's toString</p>\n\n<pre><code>postData.toString()\n//{\"arg1\":\"&lt;b&gt;some text&lt;\\/b&gt;\" \"arg2\":\"object output\"}\n</code></pre>\n\n<p>Create a new JSONObject</p>\n\n<pre><code>JSONObject o = new JSONObject(postData.toString());\n</code></pre>\n\n<p>Or as a byte array for sending over HTTP</p>\n\n<pre><code>postData.toString().getBytes(\"UTF-8\");\n</code></pre>\n"},{"tags":[],"owner":{"account_id":394033,"reputation":10807,"user_id":756233,"accept_rate":71,"display_name":"Ray Hulha"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1574094398,"creation_date":1574094398,"answer_id":58918972,"question_id":12155800,"body_markdown":"If you are using JSR 374: Java API for JSON Processing ( javax json )\r\nThis seems to do the trick:\r\n\r\n\t\tJsonObjectBuilder job = Json.createObjectBuilder((Map&lt;String, Object&gt;) obj);\r\n\t\tJsonObject jsonObject = job.build();\r\n","title":"How to convert hashmap to JSON object in Java","body":"<p>If you are using JSR 374: Java API for JSON Processing ( javax json )\nThis seems to do the trick:</p>\n\n<pre><code>    JsonObjectBuilder job = Json.createObjectBuilder((Map&lt;String, Object&gt;) obj);\n    JsonObject jsonObject = job.build();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":9255465,"reputation":722,"user_id":6874531,"display_name":"Chamod Pathirana"},"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1699756302,"creation_date":1585158122,"answer_id":60854381,"question_id":12155800,"body_markdown":"We use Gson.\r\n\r\n    Gson gson = new Gson();\r\n    Type gsonType = new TypeToken&lt;HashMap&gt;(){}.getType();\r\n    String gsonString = gson.toJson(elements,gsonType);","title":"How to convert hashmap to JSON object in Java","body":"<p>We use Gson.</p>\n<pre><code>Gson gson = new Gson();\nType gsonType = new TypeToken&lt;HashMap&gt;(){}.getType();\nString gsonString = gson.toJson(elements,gsonType);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":10984350,"reputation":380,"user_id":8070550,"display_name":"Rok T."},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1590052299,"creation_date":1590051922,"answer_id":61930940,"question_id":12155800,"body_markdown":"Gson way for a bit more complex maps and lists using *TypeToken.getParameterized* method:\r\n\r\nWe have a map that looks like this:\r\n\r\n    Map&lt;Long, List&lt;NewFile&gt;&gt; map;\r\n\r\nWe get the Type using the above mentioned *getParameterized* method like this:\r\n\r\n    Type listOfNewFiles = TypeToken.getParameterized(ArrayList.class, NewFile.class).getType();\r\n    Type mapOfList = TypeToken.getParameterized(LinkedHashMap.class, Long.class, listOfNewFiles).getType();\r\n\r\nAnd then use the Gson object *fromJson* method like this using the *mapOfList* object like this:\r\n\r\n    Map&lt;Long, List&lt;NewFile&gt;&gt; map = new Gson().fromJson(fileContent, mapOfList);\r\n\r\nThe mentioned object *NewFile* looks like this:\r\n\r\n    class NewFile\r\n\t{\r\n\t\tprivate long id;\r\n\t\tprivate String fileName;\r\n\r\n\t\tpublic void setId(final long id)\r\n\t\t{\r\n\t\t\tthis.id = id;\r\n\t\t}\r\n\r\n\t\tpublic void setFileName(final String fileName)\r\n\t\t{\r\n\t\t\tthis.fileName = fileName;\r\n\t\t}\r\n\t}\r\n\r\nThe deserialized JSON looks like this:\r\n\r\n \r\n\r\n&lt;!-- begin snippet: js hide: false console: true babel: false --&gt;\r\n\r\n&lt;!-- language: lang-js --&gt;\r\n\r\n    {\r\n      &quot;1&quot;: [\r\n        {\r\n          &quot;id&quot;: 12232,\r\n          &quot;fileName&quot;: &quot;test.html&quot;\r\n        },\r\n        {\r\n          &quot;id&quot;: 12233,\r\n          &quot;fileName&quot;: &quot;file.txt&quot;\r\n        },\r\n        {\r\n          &quot;id&quot;: 12234,\r\n          &quot;fileName&quot;: &quot;obj.json&quot;\r\n        }\r\n      ],\r\n     &quot;2&quot;: [\r\n        {\r\n          &quot;id&quot;: 122321,\r\n          &quot;fileName&quot;: &quot;test2.html&quot;\r\n        },\r\n        {\r\n          &quot;id&quot;: 122332,\r\n          &quot;fileName&quot;: &quot;file2.txt&quot;\r\n        },\r\n        {\r\n          &quot;id&quot;: 122343,\r\n          &quot;fileName&quot;: &quot;obj2.json&quot;\r\n        }\r\n      ]\r\n    }\r\n\r\n&lt;!-- end snippet --&gt;\r\n\r\n","title":"How to convert hashmap to JSON object in Java","body":"<p>Gson way for a bit more complex maps and lists using <em>TypeToken.getParameterized</em> method:</p>\n\n<p>We have a map that looks like this:</p>\n\n<pre><code>Map&lt;Long, List&lt;NewFile&gt;&gt; map;\n</code></pre>\n\n<p>We get the Type using the above mentioned <em>getParameterized</em> method like this:</p>\n\n<pre><code>Type listOfNewFiles = TypeToken.getParameterized(ArrayList.class, NewFile.class).getType();\nType mapOfList = TypeToken.getParameterized(LinkedHashMap.class, Long.class, listOfNewFiles).getType();\n</code></pre>\n\n<p>And then use the Gson object <em>fromJson</em> method like this using the <em>mapOfList</em> object like this:</p>\n\n<pre><code>Map&lt;Long, List&lt;NewFile&gt;&gt; map = new Gson().fromJson(fileContent, mapOfList);\n</code></pre>\n\n<p>The mentioned object <em>NewFile</em> looks like this:</p>\n\n<pre><code>class NewFile\n{\n    private long id;\n    private String fileName;\n\n    public void setId(final long id)\n    {\n        this.id = id;\n    }\n\n    public void setFileName(final String fileName)\n    {\n        this.fileName = fileName;\n    }\n}\n</code></pre>\n\n<p>The deserialized JSON looks like this:</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>{\r\n  \"1\": [\r\n    {\r\n      \"id\": 12232,\r\n      \"fileName\": \"test.html\"\r\n    },\r\n    {\r\n      \"id\": 12233,\r\n      \"fileName\": \"file.txt\"\r\n    },\r\n    {\r\n      \"id\": 12234,\r\n      \"fileName\": \"obj.json\"\r\n    }\r\n  ],\r\n \"2\": [\r\n    {\r\n      \"id\": 122321,\r\n      \"fileName\": \"test2.html\"\r\n    },\r\n    {\r\n      \"id\": 122332,\r\n      \"fileName\": \"file2.txt\"\r\n    },\r\n    {\r\n      \"id\": 122343,\r\n      \"fileName\": \"obj2.json\"\r\n    }\r\n  ]\r\n}</code></pre>\r\n</div>\r\n</div>\r\n</p>\n"}],"owner":{"account_id":187930,"reputation":13065,"user_id":426344,"accept_rate":56,"display_name":"mohan"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1041167,"favorite_count":0,"down_vote_count":4,"up_vote_count":390,"closed_date":1683722973,"accepted_answer_id":12155874,"answer_count":29,"score":386,"last_activity_date":1699945199,"creation_date":1346143999,"question_id":12155800,"body_markdown":"How to convert or cast hashmap to JSON object in Java, and again convert JSON object to JSON string?","title":"How to convert hashmap to JSON object in Java","body":"<p>How to convert or cast hashmap to JSON object in Java, and again convert JSON object to JSON string?</p>\n"},{"tags":["java","rest","tomcat","servlets","jackson"],"comments":[{"owner":{"account_id":2477626,"reputation":1101,"user_id":2157911,"accept_rate":100,"display_name":"Piotr Tempes"},"score":0,"creation_date":1410873267,"post_id":25852152,"comment_id":40482138,"body_markdown":"well I am not sure whether code will help here... I will post it","body":"well I am not sure whether code will help here... I will post it"}],"answers":[{"tags":[],"owner":{"account_id":2477626,"reputation":1101,"user_id":2157911,"accept_rate":100,"display_name":"Piotr Tempes"},"down_vote_count":0,"up_vote_count":11,"is_accepted":true,"score":11,"last_activity_date":1410879914,"creation_date":1410879914,"answer_id":25872295,"question_id":25852152,"body_markdown":"Eh... after hours of debugging and thinking - the answer turned out to be the most obvious one - both clients I have been using were closing the connection (probably timeout). It worked in wget and postman while using swagger and advanced rest client caused the exception to be thrown.","title":"An established connection was aborted by the software in your host machine tomcat jackson","body":"<p>Eh... after hours of debugging and thinking - the answer turned out to be the most obvious one - both clients I have been using were closing the connection (probably timeout). It worked in wget and postman while using swagger and advanced rest client caused the exception to be thrown.</p>\n"},{"tags":[],"owner":{"account_id":8231410,"reputation":133,"user_id":6191944,"display_name":"Naresh Muthyala"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1571812771,"creation_date":1571812771,"answer_id":58516839,"question_id":25852152,"body_markdown":"The reason might be connection timeout of http request.\r\nIf you are using Tomcat server you can set the timeout in server.xml.\r\n-1 indicates no timeout.\r\n\r\n    &lt;Connector connectionTimeout=&quot;-1&quot; port=&quot;8989&quot; protocol=&quot;HTTP/1.1&quot; redirectPort=&quot;8443&quot;/&gt;\r\n\r\nreference : https://tomcat.apache.org/tomcat-7.0-doc/config/http.html ","title":"An established connection was aborted by the software in your host machine tomcat jackson","body":"<p>The reason might be connection timeout of http request.\nIf you are using Tomcat server you can set the timeout in server.xml.\n-1 indicates no timeout.</p>\n\n<pre><code>&lt;Connector connectionTimeout=\"-1\" port=\"8989\" protocol=\"HTTP/1.1\" redirectPort=\"8443\"/&gt;\n</code></pre>\n\n<p>reference : <a href=\"https://tomcat.apache.org/tomcat-7.0-doc/config/http.html\" rel=\"nofollow noreferrer\">https://tomcat.apache.org/tomcat-7.0-doc/config/http.html</a> </p>\n"},{"tags":[],"owner":{"account_id":9846171,"reputation":1,"user_id":7293600,"display_name":"babala"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1644826040,"creation_date":1644348991,"answer_id":71039896,"question_id":25852152,"body_markdown":"If you are using ColdFusion, you can also set a page&#39;s requestTimeOut to override the server setting.\r\n\r\nPer https://helpx.adobe.com/coldfusion/cfml-reference/coldfusion-tags/tags-r-s/cfsetting.html, &quot;If you specify 0 as the value, timeout is disabled for the request&quot;.\r\n\r\n    &lt;cfsetting requestTimeOut=&quot;0&quot;&gt;\r\n    \r\n    cfscript: setting requestTimeOut=&quot;0&quot;;","title":"An established connection was aborted by the software in your host machine tomcat jackson","body":"<p>If you are using ColdFusion, you can also set a page's requestTimeOut to override the server setting.</p>\n<p>Per <a href=\"https://helpx.adobe.com/coldfusion/cfml-reference/coldfusion-tags/tags-r-s/cfsetting.html\" rel=\"nofollow noreferrer\">https://helpx.adobe.com/coldfusion/cfml-reference/coldfusion-tags/tags-r-s/cfsetting.html</a>, &quot;If you specify 0 as the value, timeout is disabled for the request&quot;.</p>\n<pre><code>&lt;cfsetting requestTimeOut=&quot;0&quot;&gt;\n\ncfscript: setting requestTimeOut=&quot;0&quot;;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":17308058,"reputation":1,"user_id":12536350,"display_name":"Biswajit Rath"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1699945190,"creation_date":1699945190,"answer_id":77478673,"question_id":25852152,"body_markdown":"This error is caused by the application when the data transfer between server and client interrupted before the full transfer is complete.\r\n\r\nIn simple words if the users closes/reloads the browser before the page is fully loaded then this exception is thrown.\r\n\r\nThis is a harmless warning and can be ignored but if you are getting many of these errors in your logs then you should check the network and data transmission speed. ","title":"An established connection was aborted by the software in your host machine tomcat jackson","body":"<p>This error is caused by the application when the data transfer between server and client interrupted before the full transfer is complete.</p>\n<p>In simple words if the users closes/reloads the browser before the page is fully loaded then this exception is thrown.</p>\n<p>This is a harmless warning and can be ignored but if you are getting many of these errors in your logs then you should check the network and data transmission speed.</p>\n"}],"owner":{"account_id":2477626,"reputation":1101,"user_id":2157911,"accept_rate":100,"display_name":"Piotr Tempes"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":134500,"favorite_count":0,"down_vote_count":0,"up_vote_count":27,"accepted_answer_id":25872295,"answer_count":4,"score":27,"last_activity_date":1699945190,"creation_date":1410796720,"question_id":25852152,"body_markdown":"Below is a stacktrace I get when my rest service tries to fetch a large data set (database and tomcat are on my local machine, so everything is local). It works on smaller ones, but in some cases user wants a lot of data. I checked similar problems posted here, but there seems to be none like mine.\r\n\r\nMy questions are   \r\n1. Why does it fail to display a response?   \r\n2. Is response size limited somehow on tomcat? Maybe there is a timeout or something like that?  \r\n3. Maybe it is Jackson that fails to do its job. If it is Jackson - can it be caused by annotations like `@JsonBackReference` and `@JsonManagedReference`?   \r\n4. What can I do to fix it?\r\n\r\n    ClientAbortException:  java.io.IOException: An established connection was aborted by the software in your host machine\r\n    \tat org.apache.catalina.connector.OutputBuffer.realWriteBytes(OutputBuffer.java:413)\r\n    \tat org.apache.tomcat.util.buf.ByteChunk.flushBuffer(ByteChunk.java:480)\r\n    \tat org.apache.tomcat.util.buf.ByteChunk.append(ByteChunk.java:366)\r\n    \tat org.apache.catalina.connector.OutputBuffer.writeBytes(OutputBuffer.java:438)\r\n    \tat org.apache.catalina.connector.OutputBuffer.write(OutputBuffer.java:426)\r\n    \tat org.apache.catalina.connector.CoyoteOutputStream.write(CoyoteOutputStream.java:91)\r\n    \tat com.fasterxml.jackson.core.json.UTF8JsonGenerator._flushBuffer(UTF8JsonGenerator.java:1862)\r\n    \tat com.fasterxml.jackson.core.json.UTF8JsonGenerator._writeBytes(UTF8JsonGenerator.java:1132)\r\n    \tat com.fasterxml.jackson.core.json.UTF8JsonGenerator._writeFieldName(UTF8JsonGenerator.java:270)\r\n    \tat com.fasterxml.jackson.core.json.UTF8JsonGenerator.writeFieldName(UTF8JsonGenerator.java:249)\r\n    \tat com.fasterxml.jackson.databind.ser.BeanPropertyWriter.serializeAsField(BeanPropertyWriter.java:539)\r\n    \tat com.fasterxml.jackson.databind.ser.std.BeanSerializerBase.serializeFields(BeanSerializerBase.java:644)\r\n    \tat com.fasterxml.jackson.databind.ser.BeanSerializer.serialize(BeanSerializer.java:152)\r\n    \tat com.fasterxml.jackson.databind.ser.std.CollectionSerializer.serializeContents(CollectionSerializer.java:117)\r\n    \tat com.fasterxml.jackson.databind.ser.std.CollectionSerializer.serializeContents(CollectionSerializer.java:23)\r\n    \tat com.fasterxml.jackson.databind.ser.std.AsArraySerializerBase.serialize(AsArraySerializerBase.java:183)\r\n    \tat com.fasterxml.jackson.databind.ser.BeanPropertyWriter.serializeAsField(BeanPropertyWriter.java:541)\r\n    \tat com.fasterxml.jackson.databind.ser.std.BeanSerializerBase.serializeFields(BeanSerializerBase.java:644)\r\n    \tat com.fasterxml.jackson.databind.ser.BeanSerializer.serialize(BeanSerializer.java:152)\r\n    \tat com.fasterxml.jackson.databind.ser.std.CollectionSerializer.serializeContents(CollectionSerializer.java:117)\r\n    \tat com.fasterxml.jackson.databind.ser.std.CollectionSerializer.serializeContents(CollectionSerializer.java:23)\r\n    \tat com.fasterxml.jackson.databind.ser.std.AsArraySerializerBase.serialize(AsArraySerializerBase.java:183)\r\n    \tat com.fasterxml.jackson.databind.ser.BeanPropertyWriter.serializeAsField(BeanPropertyWriter.java:541)\r\n    \tat com.fasterxml.jackson.databind.ser.std.BeanSerializerBase.serializeFields(BeanSerializerBase.java:644)\r\n    \tat com.fasterxml.jackson.databind.ser.BeanSerializer.serialize(BeanSerializer.java:152)\r\n    \tat com.fasterxml.jackson.databind.ser.DefaultSerializerProvider.serializeValue(DefaultSerializerProvider.java:114)\r\n    \tat com.fasterxml.jackson.databind.ObjectMapper.writeValue(ObjectMapper.java:1837)\r\n    \tat org.springframework.http.converter.json.MappingJackson2HttpMessageConverter.writeInternal(MappingJackson2HttpMessageConverter.java:253)\r\n    \tat org.springframework.http.converter.AbstractHttpMessageConverter.write(AbstractHttpMessageConverter.java:208)\r\n    \tat org.springframework.web.servlet.mvc.method.annotation.AbstractMessageConverterMethodProcessor.writeWithMessageConverters(AbstractMessageConverterMethodProcessor.java:143)\r\n    \tat org.springframework.web.servlet.mvc.method.annotation.AbstractMessageConverterMethodProcessor.writeWithMessageConverters(AbstractMessageConverterMethodProcessor.java:89)\r\n    \tat org.springframework.web.servlet.mvc.method.annotation.RequestResponseBodyMethodProcessor.handleReturnValue(RequestResponseBodyMethodProcessor.java:193)\r\n    \tat org.springframework.web.method.support.HandlerMethodReturnValueHandlerComposite.handleReturnValue(HandlerMethodReturnValueHandlerComposite.java:71)\r\n    \tat org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:122)\r\n    \tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandleMethod(RequestMappingHandlerAdapter.java:749)\r\n    \tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:689)\r\n    \tat org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:83)\r\n    \tat org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:938)\r\n    \tat org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:870)\r\n    \tat org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:961)\r\n    \tat org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:852)\r\n    \tat javax.servlet.http.HttpServlet.service(HttpServlet.java:620)\r\n    \tat org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:837)\r\n    \tat javax.servlet.http.HttpServlet.service(HttpServlet.java:727)\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:303)\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:208)\r\n    \tat org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:186)\r\n    \tat org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:160)\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:241)\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:208)\r\n    \tat org.springframework.orm.jpa.support.OpenEntityManagerInViewFilter.doFilterInternal(OpenEntityManagerInViewFilter.java:177)\r\n    \tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:241)\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:208)\r\n    \tat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:220)\r\n    \tat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:122)\r\n    \tat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:501)\r\n    \tat org.apache.catalina.valves.RemoteIpValve.invoke(RemoteIpValve.java:683)\r\n    \tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:171)\r\n    \tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)\r\n    \tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:116)\r\n    \tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:408)\r\n    \tat org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1040)\r\n    \tat org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:607)\r\n    \tat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1720)\r\n    \tat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.run(NioEndpoint.java:1679)\r\n    \tat java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)\r\n    \tat java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)\r\n    \tat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\r\n    \tat java.lang.Thread.run(Unknown Source)\r\n    Caused by: java.io.IOException: An established connection was aborted by the software in your host machine\r\n    \tat sun.nio.ch.SocketDispatcher.write0(Native Method)\r\n    \tat sun.nio.ch.SocketDispatcher.write(Unknown Source)\r\n    \tat sun.nio.ch.IOUtil.writeFromNativeBuffer(Unknown Source)\r\n    \tat sun.nio.ch.IOUtil.write(Unknown Source)\r\n    \tat sun.nio.ch.SocketChannelImpl.write(Unknown Source)\r\n    \tat org.apache.tomcat.util.net.NioChannel.write(NioChannel.java:123)\r\n    \tat org.apache.tomcat.util.net.NioBlockingSelector.write(NioBlockingSelector.java:101)\r\n    \tat org.apache.tomcat.util.net.NioSelectorPool.write(NioSelectorPool.java:174)\r\n    \tat org.apache.coyote.http11.InternalNioOutputBuffer.writeToSocket(InternalNioOutputBuffer.java:163)\r\n    \tat org.apache.coyote.http11.InternalNioOutputBuffer.flushBuffer(InternalNioOutputBuffer.java:242)\r\n    \tat org.apache.coyote.http11.InternalNioOutputBuffer.addToBB(InternalNioOutputBuffer.java:213)\r\n    \tat org.apache.coyote.http11.InternalNioOutputBuffer.access$000(InternalNioOutputBuffer.java:41)\r\n    \tat org.apache.coyote.http11.InternalNioOutputBuffer$SocketOutputBuffer.doWrite(InternalNioOutputBuffer.java:268)\r\n    \tat org.apache.coyote.http11.filters.ChunkedOutputFilter.doWrite(ChunkedOutputFilter.java:119)\r\n    \tat org.apache.coyote.http11.AbstractOutputBuffer.doWrite(AbstractOutputBuffer.java:192)\r\n    \tat org.apache.coyote.Response.doWrite(Response.java:520)\r\n    \tat org.apache.catalina.connector.OutputBuffer.realWriteBytes(OutputBuffer.java:408)\r\n    \t... 69 more\r\n    \r\n    2014-09-15 17:35:31 ERROR ExceptionHandlerExceptionResolver:343 - Failed to invoke @ExceptionHandler method: public void com.acxiom.listkey.metadata.exceptions.GlobalExceptionHandler.handleInternalException(java.lang.Exception)\r\n    java.lang.IllegalStateException: Cannot call sendError() after the response has been committed\r\n    \tat org.apache.catalina.connector.ResponseFacade.sendError(ResponseFacade.java:450)\r\n    \tat javax.servlet.http.HttpServletResponseWrapper.sendError(HttpServletResponseWrapper.java:119)\r\n    \tat org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.setResponseStatus(ServletInvocableHandlerMethod.java:141)\r\n    \tat org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:106)\r\n    \tat org.springframework.web.servlet.mvc.method.annotation.ExceptionHandlerExceptionResolver.doResolveHandlerMethodException(ExceptionHandlerExceptionResolver.java:340)\r\n    \tat org.springframework.web.servlet.handler.AbstractHandlerMethodExceptionResolver.doResolveException(AbstractHandlerMethodExceptionResolver.java:60)\r\n    \tat org.springframework.web.servlet.handler.AbstractHandlerExceptionResolver.resolveException(AbstractHandlerExceptionResolver.java:138)\r\n    \tat org.springframework.web.servlet.handler.HandlerExceptionResolverComposite.resolveException(HandlerExceptionResolverComposite.java:75)\r\n    \tat org.springframework.web.servlet.DispatcherServlet.processHandlerException(DispatcherServlet.java:1161)\r\n    \tat org.springframework.web.servlet.DispatcherServlet.processDispatchResult(DispatcherServlet.java:998)\r\n    \tat org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:952)\r\n    \tat org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:870)\r\n    \tat org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:961)\r\n    \tat org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:852)\r\n    \tat javax.servlet.http.HttpServlet.service(HttpServlet.java:620)\r\n    \tat org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:837)\r\n    \tat javax.servlet.http.HttpServlet.service(HttpServlet.java:727)\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:303)\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:208)\r\n    \tat org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:186)\r\n    \tat org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:160)\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:241)\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:208)\r\n    \tat org.springframework.orm.jpa.support.OpenEntityManagerInViewFilter.doFilterInternal(OpenEntityManagerInViewFilter.java:177)\r\n    \tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:241)\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:208)\r\n    \tat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:220)\r\n    \tat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:122)\r\n    \tat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:501)\r\n    \tat org.apache.catalina.valves.RemoteIpValve.invoke(RemoteIpValve.java:683)\r\n    \tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:171)\r\n    \tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)\r\n    \tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:116)\r\n    \tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:408)\r\n    \tat org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1040)\r\n    \tat org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:607)\r\n    \tat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1720)\r\n    \tat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.run(NioEndpoint.java:1679)\r\n    \tat java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)\r\n    \tat java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)\r\n    \tat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\r\n    \tat java.lang.Thread.run(Unknown Source)\r\n\r\nbelow is the code (in controller) that returns the response to client:\r\n\r\n    @RequestMapping(method = RequestMethod.GET)\r\n \t@ResponseBody\r\n   \tpublic String getSelections(@RequestParam Integer systemId, @RequestParam String listCode)\r\n   \t\t\tthrows JsonProcessingException {\r\n   \t\tSelectionsDTO selectionsDTO = new SelectionsDTO(systemSelectionService.findSelections(systemId, listCode));\r\n    \r\n   \t\tString retVal = objectMapper.writeValueAsString(selectionsDTO);\r\n   \t\treturn retVal;\r\n   \t}\r\n\r\nas you can see I have even tried to marshall it to string before returning, to exclude jackson as the reason of failure. It does not matter if I return collection of my DTOs or string. It fails the same way. I have debugged it and I checked the size of the message that was written to output successfully (it is around 2,15MB). In my opinion size of the message is the failure cause.","title":"An established connection was aborted by the software in your host machine tomcat jackson","body":"<p>Below is a stacktrace I get when my rest service tries to fetch a large data set (database and tomcat are on my local machine, so everything is local). It works on smaller ones, but in some cases user wants a lot of data. I checked similar problems posted here, but there seems to be none like mine.</p>\n\n<p>My questions are<br>\n1. Why does it fail to display a response?<br>\n2. Is response size limited somehow on tomcat? Maybe there is a timeout or something like that?<br>\n3. Maybe it is Jackson that fails to do its job. If it is Jackson - can it be caused by annotations like <code>@JsonBackReference</code> and <code>@JsonManagedReference</code>?<br>\n4. What can I do to fix it?</p>\n\n<pre><code>ClientAbortException:  java.io.IOException: An established connection was aborted by the software in your host machine\n    at org.apache.catalina.connector.OutputBuffer.realWriteBytes(OutputBuffer.java:413)\n    at org.apache.tomcat.util.buf.ByteChunk.flushBuffer(ByteChunk.java:480)\n    at org.apache.tomcat.util.buf.ByteChunk.append(ByteChunk.java:366)\n    at org.apache.catalina.connector.OutputBuffer.writeBytes(OutputBuffer.java:438)\n    at org.apache.catalina.connector.OutputBuffer.write(OutputBuffer.java:426)\n    at org.apache.catalina.connector.CoyoteOutputStream.write(CoyoteOutputStream.java:91)\n    at com.fasterxml.jackson.core.json.UTF8JsonGenerator._flushBuffer(UTF8JsonGenerator.java:1862)\n    at com.fasterxml.jackson.core.json.UTF8JsonGenerator._writeBytes(UTF8JsonGenerator.java:1132)\n    at com.fasterxml.jackson.core.json.UTF8JsonGenerator._writeFieldName(UTF8JsonGenerator.java:270)\n    at com.fasterxml.jackson.core.json.UTF8JsonGenerator.writeFieldName(UTF8JsonGenerator.java:249)\n    at com.fasterxml.jackson.databind.ser.BeanPropertyWriter.serializeAsField(BeanPropertyWriter.java:539)\n    at com.fasterxml.jackson.databind.ser.std.BeanSerializerBase.serializeFields(BeanSerializerBase.java:644)\n    at com.fasterxml.jackson.databind.ser.BeanSerializer.serialize(BeanSerializer.java:152)\n    at com.fasterxml.jackson.databind.ser.std.CollectionSerializer.serializeContents(CollectionSerializer.java:117)\n    at com.fasterxml.jackson.databind.ser.std.CollectionSerializer.serializeContents(CollectionSerializer.java:23)\n    at com.fasterxml.jackson.databind.ser.std.AsArraySerializerBase.serialize(AsArraySerializerBase.java:183)\n    at com.fasterxml.jackson.databind.ser.BeanPropertyWriter.serializeAsField(BeanPropertyWriter.java:541)\n    at com.fasterxml.jackson.databind.ser.std.BeanSerializerBase.serializeFields(BeanSerializerBase.java:644)\n    at com.fasterxml.jackson.databind.ser.BeanSerializer.serialize(BeanSerializer.java:152)\n    at com.fasterxml.jackson.databind.ser.std.CollectionSerializer.serializeContents(CollectionSerializer.java:117)\n    at com.fasterxml.jackson.databind.ser.std.CollectionSerializer.serializeContents(CollectionSerializer.java:23)\n    at com.fasterxml.jackson.databind.ser.std.AsArraySerializerBase.serialize(AsArraySerializerBase.java:183)\n    at com.fasterxml.jackson.databind.ser.BeanPropertyWriter.serializeAsField(BeanPropertyWriter.java:541)\n    at com.fasterxml.jackson.databind.ser.std.BeanSerializerBase.serializeFields(BeanSerializerBase.java:644)\n    at com.fasterxml.jackson.databind.ser.BeanSerializer.serialize(BeanSerializer.java:152)\n    at com.fasterxml.jackson.databind.ser.DefaultSerializerProvider.serializeValue(DefaultSerializerProvider.java:114)\n    at com.fasterxml.jackson.databind.ObjectMapper.writeValue(ObjectMapper.java:1837)\n    at org.springframework.http.converter.json.MappingJackson2HttpMessageConverter.writeInternal(MappingJackson2HttpMessageConverter.java:253)\n    at org.springframework.http.converter.AbstractHttpMessageConverter.write(AbstractHttpMessageConverter.java:208)\n    at org.springframework.web.servlet.mvc.method.annotation.AbstractMessageConverterMethodProcessor.writeWithMessageConverters(AbstractMessageConverterMethodProcessor.java:143)\n    at org.springframework.web.servlet.mvc.method.annotation.AbstractMessageConverterMethodProcessor.writeWithMessageConverters(AbstractMessageConverterMethodProcessor.java:89)\n    at org.springframework.web.servlet.mvc.method.annotation.RequestResponseBodyMethodProcessor.handleReturnValue(RequestResponseBodyMethodProcessor.java:193)\n    at org.springframework.web.method.support.HandlerMethodReturnValueHandlerComposite.handleReturnValue(HandlerMethodReturnValueHandlerComposite.java:71)\n    at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:122)\n    at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandleMethod(RequestMappingHandlerAdapter.java:749)\n    at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:689)\n    at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:83)\n    at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:938)\n    at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:870)\n    at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:961)\n    at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:852)\n    at javax.servlet.http.HttpServlet.service(HttpServlet.java:620)\n    at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:837)\n    at javax.servlet.http.HttpServlet.service(HttpServlet.java:727)\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:303)\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:208)\n    at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:186)\n    at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:160)\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:241)\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:208)\n    at org.springframework.orm.jpa.support.OpenEntityManagerInViewFilter.doFilterInternal(OpenEntityManagerInViewFilter.java:177)\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:241)\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:208)\n    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:220)\n    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:122)\n    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:501)\n    at org.apache.catalina.valves.RemoteIpValve.invoke(RemoteIpValve.java:683)\n    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:171)\n    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)\n    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:116)\n    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:408)\n    at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1040)\n    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:607)\n    at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1720)\n    at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.run(NioEndpoint.java:1679)\n    at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)\n    at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)\n    at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\n    at java.lang.Thread.run(Unknown Source)\nCaused by: java.io.IOException: An established connection was aborted by the software in your host machine\n    at sun.nio.ch.SocketDispatcher.write0(Native Method)\n    at sun.nio.ch.SocketDispatcher.write(Unknown Source)\n    at sun.nio.ch.IOUtil.writeFromNativeBuffer(Unknown Source)\n    at sun.nio.ch.IOUtil.write(Unknown Source)\n    at sun.nio.ch.SocketChannelImpl.write(Unknown Source)\n    at org.apache.tomcat.util.net.NioChannel.write(NioChannel.java:123)\n    at org.apache.tomcat.util.net.NioBlockingSelector.write(NioBlockingSelector.java:101)\n    at org.apache.tomcat.util.net.NioSelectorPool.write(NioSelectorPool.java:174)\n    at org.apache.coyote.http11.InternalNioOutputBuffer.writeToSocket(InternalNioOutputBuffer.java:163)\n    at org.apache.coyote.http11.InternalNioOutputBuffer.flushBuffer(InternalNioOutputBuffer.java:242)\n    at org.apache.coyote.http11.InternalNioOutputBuffer.addToBB(InternalNioOutputBuffer.java:213)\n    at org.apache.coyote.http11.InternalNioOutputBuffer.access$000(InternalNioOutputBuffer.java:41)\n    at org.apache.coyote.http11.InternalNioOutputBuffer$SocketOutputBuffer.doWrite(InternalNioOutputBuffer.java:268)\n    at org.apache.coyote.http11.filters.ChunkedOutputFilter.doWrite(ChunkedOutputFilter.java:119)\n    at org.apache.coyote.http11.AbstractOutputBuffer.doWrite(AbstractOutputBuffer.java:192)\n    at org.apache.coyote.Response.doWrite(Response.java:520)\n    at org.apache.catalina.connector.OutputBuffer.realWriteBytes(OutputBuffer.java:408)\n    ... 69 more\n\n2014-09-15 17:35:31 ERROR ExceptionHandlerExceptionResolver:343 - Failed to invoke @ExceptionHandler method: public void com.acxiom.listkey.metadata.exceptions.GlobalExceptionHandler.handleInternalException(java.lang.Exception)\njava.lang.IllegalStateException: Cannot call sendError() after the response has been committed\n    at org.apache.catalina.connector.ResponseFacade.sendError(ResponseFacade.java:450)\n    at javax.servlet.http.HttpServletResponseWrapper.sendError(HttpServletResponseWrapper.java:119)\n    at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.setResponseStatus(ServletInvocableHandlerMethod.java:141)\n    at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:106)\n    at org.springframework.web.servlet.mvc.method.annotation.ExceptionHandlerExceptionResolver.doResolveHandlerMethodException(ExceptionHandlerExceptionResolver.java:340)\n    at org.springframework.web.servlet.handler.AbstractHandlerMethodExceptionResolver.doResolveException(AbstractHandlerMethodExceptionResolver.java:60)\n    at org.springframework.web.servlet.handler.AbstractHandlerExceptionResolver.resolveException(AbstractHandlerExceptionResolver.java:138)\n    at org.springframework.web.servlet.handler.HandlerExceptionResolverComposite.resolveException(HandlerExceptionResolverComposite.java:75)\n    at org.springframework.web.servlet.DispatcherServlet.processHandlerException(DispatcherServlet.java:1161)\n    at org.springframework.web.servlet.DispatcherServlet.processDispatchResult(DispatcherServlet.java:998)\n    at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:952)\n    at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:870)\n    at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:961)\n    at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:852)\n    at javax.servlet.http.HttpServlet.service(HttpServlet.java:620)\n    at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:837)\n    at javax.servlet.http.HttpServlet.service(HttpServlet.java:727)\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:303)\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:208)\n    at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:186)\n    at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:160)\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:241)\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:208)\n    at org.springframework.orm.jpa.support.OpenEntityManagerInViewFilter.doFilterInternal(OpenEntityManagerInViewFilter.java:177)\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:241)\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:208)\n    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:220)\n    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:122)\n    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:501)\n    at org.apache.catalina.valves.RemoteIpValve.invoke(RemoteIpValve.java:683)\n    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:171)\n    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)\n    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:116)\n    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:408)\n    at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1040)\n    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:607)\n    at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1720)\n    at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.run(NioEndpoint.java:1679)\n    at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)\n    at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)\n    at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\n    at java.lang.Thread.run(Unknown Source)\n</code></pre>\n\n<p>below is the code (in controller) that returns the response to client:</p>\n\n<pre><code>@RequestMapping(method = RequestMethod.GET)\n@ResponseBody\npublic String getSelections(@RequestParam Integer systemId, @RequestParam String listCode)\n        throws JsonProcessingException {\n    SelectionsDTO selectionsDTO = new SelectionsDTO(systemSelectionService.findSelections(systemId, listCode));\n\n    String retVal = objectMapper.writeValueAsString(selectionsDTO);\n    return retVal;\n}\n</code></pre>\n\n<p>as you can see I have even tried to marshall it to string before returning, to exclude jackson as the reason of failure. It does not matter if I return collection of my DTOs or string. It fails the same way. I have debugged it and I checked the size of the message that was written to output successfully (it is around 2,15MB). In my opinion size of the message is the failure cause.</p>\n"},{"tags":["java","crystal-reports","sap"],"comments":[{"owner":{"account_id":11884350,"reputation":1324,"user_id":8697156,"display_name":"R. McMillan"},"score":0,"creation_date":1701788485,"post_id":77445901,"comment_id":136817195,"body_markdown":"Check out the question in this [link](https://stackoverflow.com/questions/61663452/nullpointerexception-when-running-crystal-reports-with-sp24-for-eclipse) and see if it might be applicable to your issue.","body":"Check out the question in this <a href=\"https://stackoverflow.com/questions/61663452/nullpointerexception-when-running-crystal-reports-with-sp24-for-eclipse\">link</a> and see if it might be applicable to your issue."}],"owner":{"account_id":5694754,"reputation":91,"user_id":4501567,"display_name":"Himanshu Goel"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":52,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1699944757,"creation_date":1699449832,"question_id":77445901,"body_markdown":"trying to open rt file using crystal reports and getting below &quot;null pointer exception&quot;,\r\ncom.crystaldecisions.sdk.occa.report.lib.ReportSDKException---- Error code:-2147467259 Error code name:failed\r\n\r\nI tried with 12 version of crystal report and jdk 8 and jdk 11.\r\nCan some help me understanding this issue?","title":"com.crystaldecisions.sdk.occa.report.lib.ReportSDKException---- Error code:-2147467259 Error code name:failed","body":"<p>trying to open rt file using crystal reports and getting below &quot;null pointer exception&quot;,\ncom.crystaldecisions.sdk.occa.report.lib.ReportSDKException---- Error code:-2147467259 Error code name:failed</p>\n<p>I tried with 12 version of crystal report and jdk 8 and jdk 11.\nCan some help me understanding this issue?</p>\n"},{"tags":["java","android","accessibility","android-xml","accessibilityservice"],"answers":[{"tags":[],"owner":{"account_id":894472,"reputation":5501,"user_id":932052,"accept_rate":94,"display_name":"Quintin Balsdon"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1690584866,"creation_date":1690584866,"answer_id":76791405,"question_id":76785116,"body_markdown":"Good call using the uiautomator dump! Did you notice all your node&#39;s text is empty? I am not sure how Flutter is handling the text visual text on the buttons, but you need to check your content descriptions (`content-desc`) in the line \r\n\r\n```\r\nif (node.getText() != null &amp;&amp; !node.getText().toString().isEmpty())\r\n```\r\n\r\notherwise you&#39;ll miss it. Try\r\n\r\n```\r\nif (node.getText() != null &amp;&amp; (!node.getText().toString().isEmpty() || node.getContentDescription().toString().isEmpty()))\r\n```\r\n\r\nThis might not be the end to your problems though, as this will also catch images with alt text, so you might need to make the matching more complex.","title":"AccessibilityService is not able to read text from hybrid android application (i.e. flutter)","body":"<p>Good call using the uiautomator dump! Did you notice all your node's text is empty? I am not sure how Flutter is handling the text visual text on the buttons, but you need to check your content descriptions (<code>content-desc</code>) in the line</p>\n<pre><code>if (node.getText() != null &amp;&amp; !node.getText().toString().isEmpty())\n</code></pre>\n<p>otherwise you'll miss it. Try</p>\n<pre><code>if (node.getText() != null &amp;&amp; (!node.getText().toString().isEmpty() || node.getContentDescription().toString().isEmpty()))\n</code></pre>\n<p>This might not be the end to your problems though, as this will also catch images with alt text, so you might need to make the matching more complex.</p>\n"}],"owner":{"account_id":29068946,"reputation":43,"user_id":22267818,"display_name":"Adam Taylor"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":83,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":76791405,"answer_count":1,"score":3,"last_activity_date":1699944159,"creation_date":1690523136,"question_id":76785116,"body_markdown":"I&#39;m trying to create an AccessibilityService which can read text from the user screen, it works well and I&#39;m able to grab most of the texts from native Android applications. Still, when I tried it with my example Flutter application, I&#39;m getting all text as null.\r\n\r\nThis is the current code to read text from my service:\r\n\r\n```\r\nprivate void listAllTextsInActiveWindow() {\r\n    AccessibilityNodeInfo rootNode = getRootInActiveWindow();\r\n    if (rootNode != null) {\r\n        List&lt;HashMap&lt;String, String&gt;&gt; allTexts = new ArrayList&lt;&gt;();\r\n        traverseNodesForText(rootNode, allTexts);\r\n        rootNode.recycle();\r\n        // Now &#39;allTexts&#39; contains a list of all texts in the active window\r\n        Gson gson = new Gson();\r\n        String json = gson.toJson(allTexts);\r\n        Log.d(&quot;OUTPUT&quot;, json);\r\n    } else {\r\n        Log.d(&quot;OUTPUT&quot;, &quot;NULL&quot;);\r\n    }\r\n}\r\n```\r\n\r\n```\r\nprivate void traverseNodesForText(AccessibilityNodeInfo node, List&lt;HashMap&lt;String, String&gt;&gt; allTexts) {\r\n    if (node == null) return;\r\n\r\n    if (node.getText() != null &amp;&amp; !node.getText().toString().isEmpty()) {\r\n        if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.TIRAMISU) {\r\n            HashMap data = new HashMap();\r\n            data.put(&quot;view_class&quot;, node.getClassName());\r\n            data.put(&quot;view_text&quot;, node.getText());\r\n            data.put(&quot;view_description&quot;, node.getContentDescription());\r\n            data.put(&quot;view_complete_info&quot;, node.toString());\r\n            allTexts.add(data);\r\n        }\r\n    }\r\n\r\n    for (int i = 0; i &lt; node.getChildCount(); i++) {\r\n        AccessibilityNodeInfo childNode = node.getChild(i);\r\n        traverseNodesForText(childNode, allTexts);\r\n    }\r\n}\r\n```\r\n\r\nI&#39;m getting an empty array as an output.\r\n\r\nWhile I was trying to get it to work, there was an app named &#39;Automate&#39;, and when I tried that application with its Inspect layout in flow, I was able to get a hierarchy XML with all my texts.\r\n\r\nIts output was:\r\n\r\n```\r\n&lt;hierarchy rotation=&quot;0&quot;&gt;\r\n\t&lt;node index=&quot;0&quot; text=&quot;&quot; resource-id=&quot;&quot; class=&quot;android.widget.FrameLayout&quot; package=&quot;com.example.apk_installer_demo&quot; content-desc=&quot;&quot; checkable=&quot;false&quot; checked=&quot;false&quot; clickable=&quot;false&quot; enabled=&quot;true&quot; focusable=&quot;false&quot; focused=&quot;false&quot; scrollable=&quot;false&quot; long-clickable=&quot;false&quot; password=&quot;false&quot; selected=&quot;false&quot; bounds=&quot;[0,0][720,1465]&quot;&gt;\r\n\t\t&lt;node index=&quot;0&quot; text=&quot;&quot; resource-id=&quot;&quot; class=&quot;android.widget.LinearLayout&quot; package=&quot;com.example.apk_installer_demo&quot; content-desc=&quot;&quot; checkable=&quot;false&quot; checked=&quot;false&quot; clickable=&quot;false&quot; enabled=&quot;true&quot; focusable=&quot;false&quot; focused=&quot;false&quot; scrollable=&quot;false&quot; long-clickable=&quot;false&quot; password=&quot;false&quot; selected=&quot;false&quot; bounds=&quot;[0,0][720,1465]&quot;&gt;\r\n\t\t\t&lt;node index=&quot;0&quot; text=&quot;&quot; resource-id=&quot;android:id/content&quot; class=&quot;android.widget.FrameLayout&quot; package=&quot;com.example.apk_installer_demo&quot; content-desc=&quot;&quot; checkable=&quot;false&quot; checked=&quot;false&quot; clickable=&quot;false&quot; enabled=&quot;true&quot; focusable=&quot;false&quot; focused=&quot;false&quot; scrollable=&quot;false&quot; long-clickable=&quot;false&quot; password=&quot;false&quot; selected=&quot;false&quot; bounds=&quot;[0,0][720,1465]&quot;&gt;\r\n\t\t\t\t&lt;node index=&quot;0&quot; text=&quot;&quot; resource-id=&quot;&quot; class=&quot;android.widget.FrameLayout&quot; package=&quot;com.example.apk_installer_demo&quot; content-desc=&quot;&quot; checkable=&quot;false&quot; checked=&quot;false&quot; clickable=&quot;false&quot; enabled=&quot;true&quot; focusable=&quot;true&quot; focused=&quot;false&quot; scrollable=&quot;false&quot; long-clickable=&quot;false&quot; password=&quot;false&quot; selected=&quot;false&quot; bounds=&quot;[0,0][720,1465]&quot;&gt;\r\n\t\t\t\t\t&lt;node index=&quot;0&quot; text=&quot;&quot; resource-id=&quot;&quot; class=&quot;android.view.View&quot; package=&quot;com.example.apk_installer_demo&quot; content-desc=&quot;&quot; checkable=&quot;false&quot; checked=&quot;false&quot; clickable=&quot;false&quot; enabled=&quot;true&quot; focusable=&quot;false&quot; focused=&quot;false&quot; scrollable=&quot;false&quot; long-clickable=&quot;false&quot; password=&quot;false&quot; selected=&quot;false&quot; bounds=&quot;[0,0][720,1465]&quot;&gt;\r\n\t\t\t\t\t\t&lt;node index=&quot;0&quot; text=&quot;&quot; resource-id=&quot;&quot; class=&quot;android.view.View&quot; package=&quot;com.example.apk_installer_demo&quot; content-desc=&quot;&quot; checkable=&quot;false&quot; checked=&quot;false&quot; clickable=&quot;false&quot; enabled=&quot;true&quot; focusable=&quot;false&quot; focused=&quot;false&quot; scrollable=&quot;false&quot; long-clickable=&quot;false&quot; password=&quot;false&quot; selected=&quot;false&quot; bounds=&quot;[0,0][720,1465]&quot;&gt;\r\n\t\t\t\t\t\t\t&lt;node index=&quot;0&quot; text=&quot;&quot; resource-id=&quot;&quot; class=&quot;android.view.View&quot; package=&quot;com.example.apk_installer_demo&quot; content-desc=&quot;&quot; checkable=&quot;false&quot; checked=&quot;false&quot; clickable=&quot;false&quot; enabled=&quot;true&quot; focusable=&quot;false&quot; focused=&quot;false&quot; scrollable=&quot;false&quot; long-clickable=&quot;false&quot; password=&quot;false&quot; selected=&quot;false&quot; bounds=&quot;[0,0][720,1465]&quot;&gt;\r\n\t\t\t\t\t\t\t\t&lt;node index=&quot;0&quot; text=&quot;&quot; resource-id=&quot;&quot; class=&quot;android.view.View&quot; package=&quot;com.example.apk_installer_demo&quot; content-desc=&quot;&quot; checkable=&quot;false&quot; checked=&quot;false&quot; clickable=&quot;false&quot; enabled=&quot;true&quot; focusable=&quot;false&quot; focused=&quot;false&quot; scrollable=&quot;false&quot; long-clickable=&quot;false&quot; password=&quot;false&quot; selected=&quot;false&quot; bounds=&quot;[0,0][720,1465]&quot;&gt;\r\n\t\t\t\t\t\t\t\t\t&lt;node index=&quot;0&quot; text=&quot;&quot; resource-id=&quot;&quot; class=&quot;android.view.View&quot; package=&quot;com.example.apk_installer_demo&quot; content-desc=&quot;&quot; checkable=&quot;false&quot; checked=&quot;false&quot; clickable=&quot;false&quot; enabled=&quot;true&quot; focusable=&quot;false&quot; focused=&quot;false&quot; scrollable=&quot;false&quot; long-clickable=&quot;false&quot; password=&quot;false&quot; selected=&quot;false&quot; bounds=&quot;[0,0][720,154]&quot;&gt;\r\n\t\t\t\t\t\t\t\t\t\t&lt;node index=&quot;0&quot; text=&quot;&quot; resource-id=&quot;&quot; class=&quot;android.view.View&quot; package=&quot;com.example.apk_installer_demo&quot; content-desc=&quot;Download &amp; Install Test APK&quot; checkable=&quot;false&quot; checked=&quot;false&quot; clickable=&quot;false&quot; enabled=&quot;true&quot; focusable=&quot;true&quot; focused=&quot;false&quot; scrollable=&quot;false&quot; long-clickable=&quot;false&quot; password=&quot;false&quot; selected=&quot;false&quot; bounds=&quot;[30,75][549,128]&quot;/&gt;&lt;/node&gt;\r\n\t\t\t\t\t\t\t\t\t&lt;node index=&quot;1&quot; text=&quot;&quot; resource-id=&quot;&quot; class=&quot;android.widget.Button&quot; package=&quot;com.example.apk_installer_demo&quot; content-desc=&quot;Download &amp; Install New Version&quot; checkable=&quot;false&quot; checked=&quot;false&quot; clickable=&quot;true&quot; enabled=&quot;true&quot; focusable=&quot;true&quot; focused=&quot;false&quot; scrollable=&quot;false&quot; long-clickable=&quot;false&quot; password=&quot;false&quot; selected=&quot;false&quot; bounds=&quot;[126,787][594,877]&quot;/&gt;&lt;/node&gt;\r\n\t\t\t\t\t\t\t&lt;/node&gt;\r\n\t\t\t\t\t\t&lt;/node&gt;\r\n\t\t\t\t\t&lt;/node&gt;\r\n\t\t\t\t&lt;/node&gt;\r\n\t\t\t&lt;/node&gt;\r\n\t\t&lt;/node&gt;\r\n\t\t&lt;node index=&quot;1&quot; text=&quot;&quot; resource-id=&quot;android:id/navigationBarBackground&quot; class=&quot;android.view.View&quot; package=&quot;com.example.apk_installer_demo&quot; content-desc=&quot;&quot; checkable=&quot;false&quot; checked=&quot;false&quot; clickable=&quot;false&quot; enabled=&quot;true&quot; focusable=&quot;false&quot; focused=&quot;false&quot; scrollable=&quot;false&quot; long-clickable=&quot;false&quot; password=&quot;false&quot; selected=&quot;false&quot; bounds=&quot;[0,0][0,0]&quot;/&gt;&lt;/node&gt;\r\n&lt;/hierarchy&gt;\r\n```\r\n\r\nNow this output is readable, and I&#39;m trying to achieve like this.\r\n\r\nLet me know if there&#39;s anyway I can do this.","title":"AccessibilityService is not able to read text from hybrid android application (i.e. flutter)","body":"<p>I'm trying to create an AccessibilityService which can read text from the user screen, it works well and I'm able to grab most of the texts from native Android applications. Still, when I tried it with my example Flutter application, I'm getting all text as null.</p>\n<p>This is the current code to read text from my service:</p>\n<pre><code>private void listAllTextsInActiveWindow() {\n    AccessibilityNodeInfo rootNode = getRootInActiveWindow();\n    if (rootNode != null) {\n        List&lt;HashMap&lt;String, String&gt;&gt; allTexts = new ArrayList&lt;&gt;();\n        traverseNodesForText(rootNode, allTexts);\n        rootNode.recycle();\n        // Now 'allTexts' contains a list of all texts in the active window\n        Gson gson = new Gson();\n        String json = gson.toJson(allTexts);\n        Log.d(&quot;OUTPUT&quot;, json);\n    } else {\n        Log.d(&quot;OUTPUT&quot;, &quot;NULL&quot;);\n    }\n}\n</code></pre>\n<pre><code>private void traverseNodesForText(AccessibilityNodeInfo node, List&lt;HashMap&lt;String, String&gt;&gt; allTexts) {\n    if (node == null) return;\n\n    if (node.getText() != null &amp;&amp; !node.getText().toString().isEmpty()) {\n        if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.TIRAMISU) {\n            HashMap data = new HashMap();\n            data.put(&quot;view_class&quot;, node.getClassName());\n            data.put(&quot;view_text&quot;, node.getText());\n            data.put(&quot;view_description&quot;, node.getContentDescription());\n            data.put(&quot;view_complete_info&quot;, node.toString());\n            allTexts.add(data);\n        }\n    }\n\n    for (int i = 0; i &lt; node.getChildCount(); i++) {\n        AccessibilityNodeInfo childNode = node.getChild(i);\n        traverseNodesForText(childNode, allTexts);\n    }\n}\n</code></pre>\n<p>I'm getting an empty array as an output.</p>\n<p>While I was trying to get it to work, there was an app named 'Automate', and when I tried that application with its Inspect layout in flow, I was able to get a hierarchy XML with all my texts.</p>\n<p>Its output was:</p>\n<pre><code>&lt;hierarchy rotation=&quot;0&quot;&gt;\n    &lt;node index=&quot;0&quot; text=&quot;&quot; resource-id=&quot;&quot; class=&quot;android.widget.FrameLayout&quot; package=&quot;com.example.apk_installer_demo&quot; content-desc=&quot;&quot; checkable=&quot;false&quot; checked=&quot;false&quot; clickable=&quot;false&quot; enabled=&quot;true&quot; focusable=&quot;false&quot; focused=&quot;false&quot; scrollable=&quot;false&quot; long-clickable=&quot;false&quot; password=&quot;false&quot; selected=&quot;false&quot; bounds=&quot;[0,0][720,1465]&quot;&gt;\n        &lt;node index=&quot;0&quot; text=&quot;&quot; resource-id=&quot;&quot; class=&quot;android.widget.LinearLayout&quot; package=&quot;com.example.apk_installer_demo&quot; content-desc=&quot;&quot; checkable=&quot;false&quot; checked=&quot;false&quot; clickable=&quot;false&quot; enabled=&quot;true&quot; focusable=&quot;false&quot; focused=&quot;false&quot; scrollable=&quot;false&quot; long-clickable=&quot;false&quot; password=&quot;false&quot; selected=&quot;false&quot; bounds=&quot;[0,0][720,1465]&quot;&gt;\n            &lt;node index=&quot;0&quot; text=&quot;&quot; resource-id=&quot;android:id/content&quot; class=&quot;android.widget.FrameLayout&quot; package=&quot;com.example.apk_installer_demo&quot; content-desc=&quot;&quot; checkable=&quot;false&quot; checked=&quot;false&quot; clickable=&quot;false&quot; enabled=&quot;true&quot; focusable=&quot;false&quot; focused=&quot;false&quot; scrollable=&quot;false&quot; long-clickable=&quot;false&quot; password=&quot;false&quot; selected=&quot;false&quot; bounds=&quot;[0,0][720,1465]&quot;&gt;\n                &lt;node index=&quot;0&quot; text=&quot;&quot; resource-id=&quot;&quot; class=&quot;android.widget.FrameLayout&quot; package=&quot;com.example.apk_installer_demo&quot; content-desc=&quot;&quot; checkable=&quot;false&quot; checked=&quot;false&quot; clickable=&quot;false&quot; enabled=&quot;true&quot; focusable=&quot;true&quot; focused=&quot;false&quot; scrollable=&quot;false&quot; long-clickable=&quot;false&quot; password=&quot;false&quot; selected=&quot;false&quot; bounds=&quot;[0,0][720,1465]&quot;&gt;\n                    &lt;node index=&quot;0&quot; text=&quot;&quot; resource-id=&quot;&quot; class=&quot;android.view.View&quot; package=&quot;com.example.apk_installer_demo&quot; content-desc=&quot;&quot; checkable=&quot;false&quot; checked=&quot;false&quot; clickable=&quot;false&quot; enabled=&quot;true&quot; focusable=&quot;false&quot; focused=&quot;false&quot; scrollable=&quot;false&quot; long-clickable=&quot;false&quot; password=&quot;false&quot; selected=&quot;false&quot; bounds=&quot;[0,0][720,1465]&quot;&gt;\n                        &lt;node index=&quot;0&quot; text=&quot;&quot; resource-id=&quot;&quot; class=&quot;android.view.View&quot; package=&quot;com.example.apk_installer_demo&quot; content-desc=&quot;&quot; checkable=&quot;false&quot; checked=&quot;false&quot; clickable=&quot;false&quot; enabled=&quot;true&quot; focusable=&quot;false&quot; focused=&quot;false&quot; scrollable=&quot;false&quot; long-clickable=&quot;false&quot; password=&quot;false&quot; selected=&quot;false&quot; bounds=&quot;[0,0][720,1465]&quot;&gt;\n                            &lt;node index=&quot;0&quot; text=&quot;&quot; resource-id=&quot;&quot; class=&quot;android.view.View&quot; package=&quot;com.example.apk_installer_demo&quot; content-desc=&quot;&quot; checkable=&quot;false&quot; checked=&quot;false&quot; clickable=&quot;false&quot; enabled=&quot;true&quot; focusable=&quot;false&quot; focused=&quot;false&quot; scrollable=&quot;false&quot; long-clickable=&quot;false&quot; password=&quot;false&quot; selected=&quot;false&quot; bounds=&quot;[0,0][720,1465]&quot;&gt;\n                                &lt;node index=&quot;0&quot; text=&quot;&quot; resource-id=&quot;&quot; class=&quot;android.view.View&quot; package=&quot;com.example.apk_installer_demo&quot; content-desc=&quot;&quot; checkable=&quot;false&quot; checked=&quot;false&quot; clickable=&quot;false&quot; enabled=&quot;true&quot; focusable=&quot;false&quot; focused=&quot;false&quot; scrollable=&quot;false&quot; long-clickable=&quot;false&quot; password=&quot;false&quot; selected=&quot;false&quot; bounds=&quot;[0,0][720,1465]&quot;&gt;\n                                    &lt;node index=&quot;0&quot; text=&quot;&quot; resource-id=&quot;&quot; class=&quot;android.view.View&quot; package=&quot;com.example.apk_installer_demo&quot; content-desc=&quot;&quot; checkable=&quot;false&quot; checked=&quot;false&quot; clickable=&quot;false&quot; enabled=&quot;true&quot; focusable=&quot;false&quot; focused=&quot;false&quot; scrollable=&quot;false&quot; long-clickable=&quot;false&quot; password=&quot;false&quot; selected=&quot;false&quot; bounds=&quot;[0,0][720,154]&quot;&gt;\n                                        &lt;node index=&quot;0&quot; text=&quot;&quot; resource-id=&quot;&quot; class=&quot;android.view.View&quot; package=&quot;com.example.apk_installer_demo&quot; content-desc=&quot;Download &amp; Install Test APK&quot; checkable=&quot;false&quot; checked=&quot;false&quot; clickable=&quot;false&quot; enabled=&quot;true&quot; focusable=&quot;true&quot; focused=&quot;false&quot; scrollable=&quot;false&quot; long-clickable=&quot;false&quot; password=&quot;false&quot; selected=&quot;false&quot; bounds=&quot;[30,75][549,128]&quot;/&gt;&lt;/node&gt;\n                                    &lt;node index=&quot;1&quot; text=&quot;&quot; resource-id=&quot;&quot; class=&quot;android.widget.Button&quot; package=&quot;com.example.apk_installer_demo&quot; content-desc=&quot;Download &amp; Install New Version&quot; checkable=&quot;false&quot; checked=&quot;false&quot; clickable=&quot;true&quot; enabled=&quot;true&quot; focusable=&quot;true&quot; focused=&quot;false&quot; scrollable=&quot;false&quot; long-clickable=&quot;false&quot; password=&quot;false&quot; selected=&quot;false&quot; bounds=&quot;[126,787][594,877]&quot;/&gt;&lt;/node&gt;\n                            &lt;/node&gt;\n                        &lt;/node&gt;\n                    &lt;/node&gt;\n                &lt;/node&gt;\n            &lt;/node&gt;\n        &lt;/node&gt;\n        &lt;node index=&quot;1&quot; text=&quot;&quot; resource-id=&quot;android:id/navigationBarBackground&quot; class=&quot;android.view.View&quot; package=&quot;com.example.apk_installer_demo&quot; content-desc=&quot;&quot; checkable=&quot;false&quot; checked=&quot;false&quot; clickable=&quot;false&quot; enabled=&quot;true&quot; focusable=&quot;false&quot; focused=&quot;false&quot; scrollable=&quot;false&quot; long-clickable=&quot;false&quot; password=&quot;false&quot; selected=&quot;false&quot; bounds=&quot;[0,0][0,0]&quot;/&gt;&lt;/node&gt;\n&lt;/hierarchy&gt;\n</code></pre>\n<p>Now this output is readable, and I'm trying to achieve like this.</p>\n<p>Let me know if there's anyway I can do this.</p>\n"},{"tags":["java","spring"],"comments":[{"owner":{"account_id":14722107,"reputation":5143,"user_id":10632369,"display_name":"tomerpacific"},"score":4,"creation_date":1699943629,"post_id":77478554,"comment_id":136590893,"body_markdown":"You should use [String.equals](https://www.w3schools.com/java/ref_string_equals.asp) when comparing strings.","body":"You should use <a href=\"https://www.w3schools.com/java/ref_string_equals.asp\" rel=\"nofollow noreferrer\">String.equals</a> when comparing strings."},{"owner":{"account_id":322981,"reputation":310744,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":1,"creation_date":1699949496,"post_id":77478554,"comment_id":136591606,"body_markdown":"Terrible title. Rewrite to summarize your specific technical issue.","body":"Terrible title. Rewrite to summarize your specific technical issue."}],"owner":{"account_id":26673975,"reputation":1,"user_id":20285024,"display_name":"koneti adithya"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":35,"favorite_count":0,"down_vote_count":2,"up_vote_count":0,"closed_date":1699943871,"answer_count":0,"score":-2,"last_activity_date":1699943566,"creation_date":1699943463,"question_id":77478554,"body_markdown":"    package evennumbers;\r\n    \r\n    import java.util.Scanner;\r\n    \r\n    public class Evennumberz {\r\n    public static void main(String[] args) {\r\n    \t\r\n    \tString usrn1= &quot;Adi&quot;;\r\n        String pswd1= &quot;qwerty&quot;;\r\n        \r\n        Scanner sc=new Scanner(System.in);\r\n    \t\r\n        System.out.println(&quot;type  username&quot;);\r\n        \r\n        String usrn=sc.nextLine();\r\n        \r\n    \tSystem.out.println(&quot;type pAsseord&quot;);\r\n    \t\r\n    \tString pasw=sc.nextLine();\r\n    \t\r\n    \tboolean b = usrn1 == usrn;\r\n    \tboolean c = pswd1 == pasw;\r\n    \tif (b &amp;&amp; c) {\r\n    \t\t\r\n    \t\tSystem.out.println(&quot;welcome to hompage&quot;);\r\n    \t}\r\n    \telse {\r\n    \t\t\r\n    \t\tSystem.out.println(&quot;try again&quot;);\r\n    \t}\r\n    \t\r\n    \t\r\n    \t\r\n       } \t\r\n    }\r\n\r\ni have given the same input which i gave at the usr1 and pswd. \r\nso it is continusouly returning the try again . what is wrong in the above code\r\n\r\n","title":"is there any funtion which i can add to make this code work?","body":"<pre><code>package evennumbers;\n\nimport java.util.Scanner;\n\npublic class Evennumberz {\npublic static void main(String[] args) {\n    \n    String usrn1= &quot;Adi&quot;;\n    String pswd1= &quot;qwerty&quot;;\n    \n    Scanner sc=new Scanner(System.in);\n    \n    System.out.println(&quot;type  username&quot;);\n    \n    String usrn=sc.nextLine();\n    \n    System.out.println(&quot;type pAsseord&quot;);\n    \n    String pasw=sc.nextLine();\n    \n    boolean b = usrn1 == usrn;\n    boolean c = pswd1 == pasw;\n    if (b &amp;&amp; c) {\n        \n        System.out.println(&quot;welcome to hompage&quot;);\n    }\n    else {\n        \n        System.out.println(&quot;try again&quot;);\n    }\n    \n    \n    \n   }    \n}\n</code></pre>\n<p>i have given the same input which i gave at the usr1 and pswd.\nso it is continusouly returning the try again . what is wrong in the above code</p>\n"},{"tags":["java","json"],"comments":[{"owner":{"account_id":2186872,"reputation":570,"user_id":1935085,"accept_rate":44,"display_name":"wrongu"},"score":3,"creation_date":1385217590,"post_id":20163578,"comment_id":30056806,"body_markdown":"Do you need help understanding the JSON format itself, or how to parse it with json-simple?","body":"Do you need help understanding the JSON format itself, or how to parse it with json-simple?"}],"answers":[{"tags":[],"owner":{"account_id":1550230,"reputation":491,"user_id":1442795,"accept_rate":70,"display_name":"andresmafra"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1385217646,"creation_date":1385217646,"answer_id":20163659,"question_id":20163578,"body_markdown":"You can use [Gson - from Google][1]. It is simple and concise. \r\n\r\nYou need to declare your Java POJO that represents your JSON data, like:\r\n\r\n    public class Info {\r\n       private Category category;\r\n       ...\r\n    }\r\n\r\n\r\n  [1]: https://code.google.com/p/google-gson/\r\n\r\nHope this help. Good luck.","title":"Reading JSON data using Java","body":"<p>You can use <a href=\"https://code.google.com/p/google-gson/\" rel=\"nofollow\">Gson - from Google</a>. It is simple and concise. </p>\n\n<p>You need to declare your Java POJO that represents your JSON data, like:</p>\n\n<pre><code>public class Info {\n   private Category category;\n   ...\n}\n</code></pre>\n\n<p>Hope this help. Good luck.</p>\n"},{"tags":[],"owner":{"account_id":3142696,"reputation":253,"user_id":2657847,"accept_rate":75,"display_name":"NicholasKarl"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1385231111,"creation_date":1385219937,"answer_id":20164045,"question_id":20163578,"body_markdown":"Why not start with the [json-simple decoding examples][1]? If it&#39;s the size of the file you&#39;re worried about, then you should use the &#39;SAX&#39; style example. This code would be a good example of how not to do it. See the other comment for better ideas.\r\n\r\n\r\n  [1]: http://code.google.com/p/json-simple/wiki/DecodingExamples\r\n\r\n    JSONObject data= (JSONObject)JSONValue.parse(new InputStreamReader(JsonSimpleEx.class.getResourceAsStream(&quot;/test.json&quot;)) );\r\n    JSONArray dropped = (JSONArray)data.get(&quot;dropped&quot;);\r\n    JSONObject first = (JSONObject)dropped.get(0);\r\n    System.out.println( first.get(&quot;crc32&quot;));\r\n\r\n","title":"Reading JSON data using Java","body":"<p>Why not start with the <a href=\"http://code.google.com/p/json-simple/wiki/DecodingExamples\" rel=\"nofollow\">json-simple decoding examples</a>? If it's the size of the file you're worried about, then you should use the 'SAX' style example. This code would be a good example of how not to do it. See the other comment for better ideas.</p>\n\n<pre><code>JSONObject data= (JSONObject)JSONValue.parse(new InputStreamReader(JsonSimpleEx.class.getResourceAsStream(\"/test.json\")) );\nJSONArray dropped = (JSONArray)data.get(\"dropped\");\nJSONObject first = (JSONObject)dropped.get(0);\nSystem.out.println( first.get(\"crc32\"));\n</code></pre>\n"},{"tags":[],"owner":{"account_id":27828742,"reputation":1,"user_id":21247584,"display_name":"Harrison"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1699943379,"creation_date":1699943379,"answer_id":77478548,"question_id":20163578,"body_markdown":"write and read this:\r\n\r\n    [\r\n      {\r\n        &quot;id&quot;: 1,\r\n        &quot;firstname&quot;: &quot;Bart&quot;,\r\n        &quot;lastname&quot;: &quot;Simpson&quot;,\r\n        &quot;address&quot;: {\r\n          &quot;city&quot;: &quot;Springfield&quot;,\r\n          &quot;country&quot;: &quot;USA&quot;\r\n        }\r\n      },\r\n      {\r\n        &quot;id&quot;: 2,\r\n        &quot;firstname&quot;: &quot;Homer&quot;,\r\n        &quot;lastname&quot;: &quot;Simpson&quot;,\r\n        &quot;address&quot;: {\r\n          &quot;city&quot;: &quot;Springfield&quot;,\r\n          &quot;country&quot;: &quot;USA&quot;\r\n        }\r\n      },\r\n      {\r\n        &quot;id&quot;: 3,\r\n        &quot;firstname&quot;: &quot;Mickey&quot;,\r\n        &quot;lastname&quot;: &quot;Mouse&quot;,\r\n        &quot;address&quot;: {\r\n          &quot;city&quot;: &quot;Orlando&quot;,\r\n          &quot;country&quot;: &quot;USA&quot;\r\n        }\r\n      }\r\n\r\nPersonJson:\r\n\r\n    public class PersonJSON {\r\n    \tprivate int id;\r\n    \tprivate String firstname;\r\n    \tprivate String lastname;\r\n    \tprivate AddressJSON address;\r\n    \t\r\n    \tpublic PersonJSON(int id, String firstname, String lastname, AddressJSON address)\r\n    \t{\r\n    \t\tthis.id = id;\r\n    \t\tthis.firstname = firstname;\r\n    \t\tthis.lastname = lastname;\r\n    \t\tthis.address = address;\r\n    \t}\r\n    \r\n    \tpublic int getId() {\r\n    \t\treturn id;\r\n    \t}\r\n    \r\n    \tpublic void setId(int id) {\r\n    \t\tthis.id = id;\r\n    \t}\r\n    \r\n    \tpublic String getFirstname() {\r\n    \t\treturn firstname;\r\n    \t}\r\n    \r\n    \tpublic void setFirstname(String firstname) {\r\n    \t\tthis.firstname = firstname;\r\n    \t}\r\n    \r\n    \tpublic String getLastname() {\r\n    \t\treturn lastname;\r\n    \t}\r\n    \r\n    \tpublic void setLastname(String lastname) {\r\n    \t\tthis.lastname = lastname;\r\n    \t}\r\n    \t\r\n    \tpublic AddressJSON getAddress() {\r\n    \t\treturn address;\r\n    \t}\r\n    \r\n    \tpublic void setAddress(AddressJSON address) {\r\n    \t\tthis.address = address;\r\n    \t}\r\n    \r\n    \tpublic String toString()\r\n    \t{\r\n    \t\treturn &quot;id: &quot; + this.id + &quot; - Firstname: &quot; + this.firstname + &quot; - Lastname: &quot; + this.lastname + &quot;, &quot; + getAddress().toString();\r\n    \t}\r\n    }\r\n\r\nAddressJson:\r\n\r\n    import com.google.gson.annotations.SerializedName;\r\n    \r\n    public class AddressJSON {\r\n    \t//@SerializedName(&quot;Cidade&quot;)\r\n    \tprivate String city;\r\n    \tprivate String country;\r\n    \t\r\n    \tpublic AddressJSON(String city, String country)\r\n    \t{\r\n    \t\tthis.city = city;\r\n    \t\tthis.country = country;\r\n    \t}\r\n    \r\n    \tpublic String getCountry() {\r\n    \t\treturn country;\r\n    \t}\r\n    \r\n    \tpublic void setCountry(String country) {\r\n    \t\tthis.country = country;\r\n    \t}\r\n    \r\n    \tpublic String getCity() {\r\n    \t\treturn city;\r\n    \t}\r\n    \r\n    \tpublic void setCity(String city) {\r\n    \t\tthis.city = city;\r\n    \t}\r\n    \t\r\n    \t@Override\r\n    \tpublic String toString(){\r\n    \t\treturn city + &quot;, &quot; + country;\r\n    \t}\r\n    }\r\n\r\nMain:\r\n\r\n    import java.io.FileReader;\r\n    import java.io.FileWriter;\r\n    import java.lang.reflect.Type;\r\n    import java.util.ArrayList;\r\n    import java.util.List;\r\n    \r\n    import com.google.gson.Gson;\r\n    import com.google.gson.GsonBuilder;\r\n    import com.google.gson.reflect.TypeToken;\r\n    import com.google.gson.stream.JsonReader;\r\n    \r\n    public class PDJSON {\r\n    \r\n    \tprivate List&lt;PersonJSON&gt; people;\r\n    \r\n    \tpublic PDJSON() {\r\n    \t\tpeople = new ArrayList&lt;PersonJSON&gt;();\r\n    \t}\r\n    \r\n    \tpublic void saveData(String filePath) {\r\n    \t\t//Gson gson = new Gson();\r\n    \t\tGson gson = new GsonBuilder().setPrettyPrinting().create();\r\n    \t\t\r\n    \t\ttry(FileWriter fw = new FileWriter(filePath)){\r\n    \t\t\tgson.toJson(people, fw);\t\t\r\n    \t\t}catch(Exception e)\r\n    \t\t{\r\n    \t\t\te.printStackTrace();\r\n    \t\t}\r\n    \t}\r\n    \r\n    \tpublic List&lt;PersonJSON&gt; loadData(String filePath) {\r\n    \t\tGson gson = new Gson();\r\n    \t\tJsonReader jsonReader = null;\r\n    \r\n    \t\tfinal Type CUS_LIST_TYPE = new TypeToken&lt;List&lt;PersonJSON&gt;&gt;() {}.getType();\r\n    \t\t//or TypeToken.getParameterized(ArrayList.class, PersonJSON.class).getType();\r\n    \t\t\r\n    \t\ttry{\r\n    \t\t\tjsonReader = new JsonReader(new FileReader(filePath));\r\n    \t\t}catch (Exception e) {\r\n    \t\t\te.printStackTrace();\r\n    \t\t}\r\n    \r\n    \t\treturn gson.fromJson(jsonReader, CUS_LIST_TYPE); \r\n    \t}\r\n    \r\n    \tpublic static void main(String[] args) {\r\n    \t\tPDJSON pdj = new PDJSON();\r\n    \t\tpdj.people.add(new PersonJSON(1,&quot;Bart&quot;, &quot;Simpson&quot;, new AddressJSON(&quot;Springfield&quot;, &quot;USA&quot;)));\r\n    \t\tpdj.people.add(new PersonJSON(2,&quot;Homer&quot;, &quot;Simpson&quot;, new AddressJSON(&quot;Springfield&quot;, &quot;USA&quot;)));\r\n    \t\tpdj.people.add(new PersonJSON(3,&quot;Mickey&quot;, &quot;Mouse&quot;, new AddressJSON(&quot;Orlando&quot;, &quot;USA&quot;)));\r\n    \r\n    \t\tpdj.saveData(&quot;resources/listofpeople.json&quot;);\r\n    \r\n    \t\tList&lt;PersonJSON&gt; lp = pdj.loadData(&quot;resources/listofpeople.json&quot;); \r\n    \t\tfor(PersonJSON pj : lp)\r\n    \t\t{\r\n    \t\t\tSystem.out.println(pj.toString());\r\n    \t\t}\r\n    \t}\r\n    }\r\n\r\n","title":"Reading JSON data using Java","body":"<p>write and read this:</p>\n<pre><code>[\n  {\n    &quot;id&quot;: 1,\n    &quot;firstname&quot;: &quot;Bart&quot;,\n    &quot;lastname&quot;: &quot;Simpson&quot;,\n    &quot;address&quot;: {\n      &quot;city&quot;: &quot;Springfield&quot;,\n      &quot;country&quot;: &quot;USA&quot;\n    }\n  },\n  {\n    &quot;id&quot;: 2,\n    &quot;firstname&quot;: &quot;Homer&quot;,\n    &quot;lastname&quot;: &quot;Simpson&quot;,\n    &quot;address&quot;: {\n      &quot;city&quot;: &quot;Springfield&quot;,\n      &quot;country&quot;: &quot;USA&quot;\n    }\n  },\n  {\n    &quot;id&quot;: 3,\n    &quot;firstname&quot;: &quot;Mickey&quot;,\n    &quot;lastname&quot;: &quot;Mouse&quot;,\n    &quot;address&quot;: {\n      &quot;city&quot;: &quot;Orlando&quot;,\n      &quot;country&quot;: &quot;USA&quot;\n    }\n  }\n</code></pre>\n<p>PersonJson:</p>\n<pre><code>public class PersonJSON {\n    private int id;\n    private String firstname;\n    private String lastname;\n    private AddressJSON address;\n    \n    public PersonJSON(int id, String firstname, String lastname, AddressJSON address)\n    {\n        this.id = id;\n        this.firstname = firstname;\n        this.lastname = lastname;\n        this.address = address;\n    }\n\n    public int getId() {\n        return id;\n    }\n\n    public void setId(int id) {\n        this.id = id;\n    }\n\n    public String getFirstname() {\n        return firstname;\n    }\n\n    public void setFirstname(String firstname) {\n        this.firstname = firstname;\n    }\n\n    public String getLastname() {\n        return lastname;\n    }\n\n    public void setLastname(String lastname) {\n        this.lastname = lastname;\n    }\n    \n    public AddressJSON getAddress() {\n        return address;\n    }\n\n    public void setAddress(AddressJSON address) {\n        this.address = address;\n    }\n\n    public String toString()\n    {\n        return &quot;id: &quot; + this.id + &quot; - Firstname: &quot; + this.firstname + &quot; - Lastname: &quot; + this.lastname + &quot;, &quot; + getAddress().toString();\n    }\n}\n</code></pre>\n<p>AddressJson:</p>\n<pre><code>import com.google.gson.annotations.SerializedName;\n\npublic class AddressJSON {\n    //@SerializedName(&quot;Cidade&quot;)\n    private String city;\n    private String country;\n    \n    public AddressJSON(String city, String country)\n    {\n        this.city = city;\n        this.country = country;\n    }\n\n    public String getCountry() {\n        return country;\n    }\n\n    public void setCountry(String country) {\n        this.country = country;\n    }\n\n    public String getCity() {\n        return city;\n    }\n\n    public void setCity(String city) {\n        this.city = city;\n    }\n    \n    @Override\n    public String toString(){\n        return city + &quot;, &quot; + country;\n    }\n}\n</code></pre>\n<p>Main:</p>\n<pre><code>import java.io.FileReader;\nimport java.io.FileWriter;\nimport java.lang.reflect.Type;\nimport java.util.ArrayList;\nimport java.util.List;\n\nimport com.google.gson.Gson;\nimport com.google.gson.GsonBuilder;\nimport com.google.gson.reflect.TypeToken;\nimport com.google.gson.stream.JsonReader;\n\npublic class PDJSON {\n\n    private List&lt;PersonJSON&gt; people;\n\n    public PDJSON() {\n        people = new ArrayList&lt;PersonJSON&gt;();\n    }\n\n    public void saveData(String filePath) {\n        //Gson gson = new Gson();\n        Gson gson = new GsonBuilder().setPrettyPrinting().create();\n        \n        try(FileWriter fw = new FileWriter(filePath)){\n            gson.toJson(people, fw);        \n        }catch(Exception e)\n        {\n            e.printStackTrace();\n        }\n    }\n\n    public List&lt;PersonJSON&gt; loadData(String filePath) {\n        Gson gson = new Gson();\n        JsonReader jsonReader = null;\n\n        final Type CUS_LIST_TYPE = new TypeToken&lt;List&lt;PersonJSON&gt;&gt;() {}.getType();\n        //or TypeToken.getParameterized(ArrayList.class, PersonJSON.class).getType();\n        \n        try{\n            jsonReader = new JsonReader(new FileReader(filePath));\n        }catch (Exception e) {\n            e.printStackTrace();\n        }\n\n        return gson.fromJson(jsonReader, CUS_LIST_TYPE); \n    }\n\n    public static void main(String[] args) {\n        PDJSON pdj = new PDJSON();\n        pdj.people.add(new PersonJSON(1,&quot;Bart&quot;, &quot;Simpson&quot;, new AddressJSON(&quot;Springfield&quot;, &quot;USA&quot;)));\n        pdj.people.add(new PersonJSON(2,&quot;Homer&quot;, &quot;Simpson&quot;, new AddressJSON(&quot;Springfield&quot;, &quot;USA&quot;)));\n        pdj.people.add(new PersonJSON(3,&quot;Mickey&quot;, &quot;Mouse&quot;, new AddressJSON(&quot;Orlando&quot;, &quot;USA&quot;)));\n\n        pdj.saveData(&quot;resources/listofpeople.json&quot;);\n\n        List&lt;PersonJSON&gt; lp = pdj.loadData(&quot;resources/listofpeople.json&quot;); \n        for(PersonJSON pj : lp)\n        {\n            System.out.println(pj.toString());\n        }\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":3056050,"reputation":13,"user_id":2589621,"display_name":"Amos"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":8823,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":20164045,"answer_count":3,"score":1,"last_activity_date":1699943379,"creation_date":1385217227,"question_id":20163578,"body_markdown":"I have a 500,000 line json file I&#39;m trying to read, I tried out a few online examples like mkyong&#39;s and many others, but this format is a first encounter for me. Can anyone help me to get started? \r\n\r\nI&#39;m using json-simple library.\r\n\r\nAny enlighten on this topic? I&#39;ll be very grateful\r\n\r\n    \r\n\r\n\r\n     {\r\n    &quot;info&quot;: {\r\n        &quot;category&quot;: &quot;url&quot;, \r\n        &quot;started&quot;: &quot;2013-11-07 03:44:32&quot;, \r\n        &quot;ended&quot;: &quot;2013-11-07 03:46:55&quot;, \r\n        &quot;version&quot;: &quot;0.6&quot;, \r\n        &quot;duration&quot;: 143, \r\n        &quot;id&quot;: 37\r\n    }, \r\n    &quot;signatures&quot;: [], \r\n    &quot;static&quot;: {}, \r\n    &quot;dropped&quot;: [\r\n        {\r\n            &quot;yara&quot;: [], \r\n            &quot;sha1&quot;: &quot;6fd9eb6a42fd531988fba24137a2fe29ad992465&quot;, \r\n            &quot;name&quot;: &quot;tia[1].png&quot;, \r\n            &quot;type&quot;: &quot;PNG image data, 27 x 23, 8-bit/color RGB, non-interlaced&quot;, \r\n            &quot;sha256&quot;: &quot;75d6d26afb9506145d7f6472555855ef4305e0ef3e7cf4cb3d943c58123c7f74&quot;, \r\n            &quot;crc32&quot;: &quot;FDCAC92F&quot;, \r\n            &quot;path&quot;: &quot;/home/user/cuckoo/storage/analyses/37/files/2435944344/tia[1].png&quot;, \r\n            &quot;ssdeep&quot;: null, \r\n            &quot;size&quot;: 387, \r\n            &quot;sha512&quot;: &quot;b47ca17050ff4b6ddab848195c17b875454aafbec06d07bba126e553c9d32647f461adee9d1a75bbfffa08d6a8fc955429562794b123bebc9ec23dc89bdefcc5&quot;, \r\n            &quot;md5&quot;: &quot;ad07ee4cb98da073dda56ce7ceb88f5a&quot;\r\n        }\r\n     ]\r\n    }\r\n\r\n   \r\n\r\n\r\nREPLY\r\n\r\n**I currently don&#39;t understand how i can get the array in [dropped], I did some of the easier example, but this is a first for me. It seems like there a hierarchy but I don&#39;t know how to access it**","title":"Reading JSON data using Java","body":"<p>I have a 500,000 line json file I'm trying to read, I tried out a few online examples like mkyong's and many others, but this format is a first encounter for me. Can anyone help me to get started? </p>\n\n<p>I'm using json-simple library.</p>\n\n<p>Any enlighten on this topic? I'll be very grateful</p>\n\n<pre><code> {\n\"info\": {\n    \"category\": \"url\", \n    \"started\": \"2013-11-07 03:44:32\", \n    \"ended\": \"2013-11-07 03:46:55\", \n    \"version\": \"0.6\", \n    \"duration\": 143, \n    \"id\": 37\n}, \n\"signatures\": [], \n\"static\": {}, \n\"dropped\": [\n    {\n        \"yara\": [], \n        \"sha1\": \"6fd9eb6a42fd531988fba24137a2fe29ad992465\", \n        \"name\": \"tia[1].png\", \n        \"type\": \"PNG image data, 27 x 23, 8-bit/color RGB, non-interlaced\", \n        \"sha256\": \"75d6d26afb9506145d7f6472555855ef4305e0ef3e7cf4cb3d943c58123c7f74\", \n        \"crc32\": \"FDCAC92F\", \n        \"path\": \"/home/user/cuckoo/storage/analyses/37/files/2435944344/tia[1].png\", \n        \"ssdeep\": null, \n        \"size\": 387, \n        \"sha512\": \"b47ca17050ff4b6ddab848195c17b875454aafbec06d07bba126e553c9d32647f461adee9d1a75bbfffa08d6a8fc955429562794b123bebc9ec23dc89bdefcc5\", \n        \"md5\": \"ad07ee4cb98da073dda56ce7ceb88f5a\"\n    }\n ]\n}\n</code></pre>\n\n<p>REPLY</p>\n\n<p><strong>I currently don't understand how i can get the array in [dropped], I did some of the easier example, but this is a first for me. It seems like there a hierarchy but I don't know how to access it</strong></p>\n"},{"tags":["java","apache-kafka","apache-kafka-streams"],"owner":{"account_id":2397024,"reputation":81,"user_id":2095638,"display_name":"Prashanth"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":38,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1699943229,"creation_date":1699943229,"question_id":77478538,"body_markdown":"We have a kafka streams application which has a fairly decent topology and transformers etc . This application has an input topic , one state store (with changelog) and multiple output topics. The input topic has 300 partitions and we&#39;re currently running 150 pods with two kafka streams thread per pod. The application is orchestrated via kubernetes.\r\n\r\nScenario 1 : We&#39;ve given a request CPU of 3 VCPU per pod and we&#39;ve noticed kafka consumer lag building up during peak hours. However on observing the node metrics we see that the node CPU is not 100% and not bottlenecked. The PODs CPU usage does not go beyond 2 VCPU (as expected since there are only 2 threads )\r\n\r\nScenario 2 : We&#39;ve given a request CPU of 4 VCPU per pod and we see no kafka consumer lag building up during peak hours. This is surprising to us since the POD CPU usage is still not going beyond 2 VCPU and the node CPU utilization is nowhere close to its peak.\r\n\r\nIn both scenario 1 &amp; 2 the PODs are running in a 32 CPU 64 GB RAM nodepool. It is running on google cloud with N2D CPU type. \r\n\r\nWith all the above information we are suspecting that the kafka streams application is having a degraded performance due to the fact that N2D CPU types have 2 threads per core where each thread is one VCPU. This is done via a concept called [SMT][1] There have been various articles about how SMT can cause degraded performance for high scale workloads which have a lot of parallelism. Scenario 2 supports this theory because when we reserve 4 VCPU for each pod , we&#39;re essentially reserving 2 cores for each pod , this means that each kafka streams thread can get one core to itself.\r\n\r\nThis essentially means high throughput kafka streams applications will have degraded performance due to SMT (sharing of the thread in the core ) due to the high amount of parallelism that kafka streams optimizes the toplogy for.\r\nI wanted to understand if this hypothesis is true and if anybody else is experiencing something like this and what can be done to improve performance?\r\n\r\n\r\n  [1]: https://en.wikipedia.org/wiki/Simultaneous_multithreading","title":"kafka streams degraded performance at scale when sharing a thread from a core","body":"<p>We have a kafka streams application which has a fairly decent topology and transformers etc . This application has an input topic , one state store (with changelog) and multiple output topics. The input topic has 300 partitions and we're currently running 150 pods with two kafka streams thread per pod. The application is orchestrated via kubernetes.</p>\n<p>Scenario 1 : We've given a request CPU of 3 VCPU per pod and we've noticed kafka consumer lag building up during peak hours. However on observing the node metrics we see that the node CPU is not 100% and not bottlenecked. The PODs CPU usage does not go beyond 2 VCPU (as expected since there are only 2 threads )</p>\n<p>Scenario 2 : We've given a request CPU of 4 VCPU per pod and we see no kafka consumer lag building up during peak hours. This is surprising to us since the POD CPU usage is still not going beyond 2 VCPU and the node CPU utilization is nowhere close to its peak.</p>\n<p>In both scenario 1 &amp; 2 the PODs are running in a 32 CPU 64 GB RAM nodepool. It is running on google cloud with N2D CPU type.</p>\n<p>With all the above information we are suspecting that the kafka streams application is having a degraded performance due to the fact that N2D CPU types have 2 threads per core where each thread is one VCPU. This is done via a concept called <a href=\"https://en.wikipedia.org/wiki/Simultaneous_multithreading\" rel=\"nofollow noreferrer\">SMT</a> There have been various articles about how SMT can cause degraded performance for high scale workloads which have a lot of parallelism. Scenario 2 supports this theory because when we reserve 4 VCPU for each pod , we're essentially reserving 2 cores for each pod , this means that each kafka streams thread can get one core to itself.</p>\n<p>This essentially means high throughput kafka streams applications will have degraded performance due to SMT (sharing of the thread in the core ) due to the high amount of parallelism that kafka streams optimizes the toplogy for.\nI wanted to understand if this hypothesis is true and if anybody else is experiencing something like this and what can be done to improve performance?</p>\n"},{"tags":["java","spring-boot"],"comments":[{"owner":{"account_id":6014409,"reputation":15624,"user_id":4723795,"accept_rate":82,"display_name":"xenteros"},"score":0,"creation_date":1498553485,"post_id":44775539,"comment_id":76532415,"body_markdown":"I suggest using loggers instead of System.out.prinln :) Try accessing with https - would it still be the same? Maybe your tomcat forces https and rewrites the request?","body":"I suggest using loggers instead of System.out.prinln :) Try accessing with https - would it still be the same? Maybe your tomcat forces https and rewrites the request?"},{"owner":{"account_id":1919325,"reputation":4519,"user_id":1731200,"accept_rate":83,"display_name":"Matthias"},"score":2,"creation_date":1498556108,"post_id":44775539,"comment_id":76534134,"body_markdown":"If your problem is being solved, mark the answer as a solution or post an answer yourself.","body":"If your problem is being solved, mark the answer as a solution or post an answer yourself."},{"owner":{"account_id":12093988,"reputation":1393,"user_id":8838721,"display_name":"Jaime Menendez"},"score":1,"creation_date":1649378031,"post_id":44775539,"comment_id":126866517,"body_markdown":"If you want your filter to only be called once per request, extend `OncePerRequestFilter` instead of `Filter`.","body":"If you want your filter to only be called once per request, extend <code>OncePerRequestFilter</code> instead of <code>Filter</code>."}],"answers":[{"tags":[],"owner":{"account_id":60737,"reputation":15904,"user_id":181336,"display_name":"Adriaan Koster"},"down_vote_count":1,"up_vote_count":3,"is_accepted":false,"score":2,"last_activity_date":1498553178,"creation_date":1498553178,"answer_id":44775864,"question_id":44775539,"body_markdown":"I can think of two common reasons for this behavior:\r\n\r\n1. the spring application context is loaded twice by your application\r\n2. A redirect is causing a second request on the endpoint\r\n\r\n","title":"why spring boot filter call twice?","body":"<p>I can think of two common reasons for this behavior:</p>\n\n<ol>\n<li>the spring application context is loaded twice by your application</li>\n<li>A redirect is causing a second request on the endpoint</li>\n</ol>\n"},{"tags":[],"owner":{"account_id":11171121,"reputation":2994,"user_id":8198056,"display_name":"Adrian"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1498571410,"creation_date":1498571410,"answer_id":44782059,"question_id":44775539,"body_markdown":"Answer to the question is in documentation: \r\n\r\n&gt; The doFilter method of the Filter is called by the container each time a **request/response** pair is passed through the chain due to a client request for a resource at the end of the chain.\r\n\r\n[Source][1]\r\n\r\n\r\n  [1]: http://docs.oracle.com/javaee/6/api/javax/servlet/Filter.html","title":"why spring boot filter call twice?","body":"<p>Answer to the question is in documentation: </p>\n\n<blockquote>\n  <p>The doFilter method of the Filter is called by the container each time a <strong>request/response</strong> pair is passed through the chain due to a client request for a resource at the end of the chain.</p>\n</blockquote>\n\n<p><a href=\"http://docs.oracle.com/javaee/6/api/javax/servlet/Filter.html\" rel=\"nofollow noreferrer\">Source</a></p>\n"},{"tags":[],"owner":{"account_id":13268184,"reputation":121,"user_id":9580173,"display_name":"Yongzhao Zhang"},"down_vote_count":0,"up_vote_count":12,"is_accepted":false,"score":12,"last_activity_date":1540337486,"creation_date":1540337486,"answer_id":52959122,"question_id":44775539,"body_markdown":"If you try to log the request url from doFilter method, you&#39;ll see why. Here is I create new SpringBoot project and test with doFilter method.\r\n\r\n        @Override\r\n    public void doFilter(ServletRequest servletRequest, ServletResponse servletResponse, FilterChain filterChain) throws IOException, ServletException {\r\n        HttpServletRequest request = (HttpServletRequest) servletRequest;\r\n        logger.info(request.getRequestURL().toString());\r\n        filterChain.doFilter(servletRequest,servletResponse);\r\n    }\r\n\r\nWell, the two urls are\r\n\r\n    http://localhost:8080/index\r\n    http://localhost:8080/favicon.ico\r\n\r\n     \r\n","title":"why spring boot filter call twice?","body":"<p>If you try to log the request url from doFilter method, you'll see why. Here is I create new SpringBoot project and test with doFilter method.</p>\n\n<pre><code>    @Override\npublic void doFilter(ServletRequest servletRequest, ServletResponse servletResponse, FilterChain filterChain) throws IOException, ServletException {\n    HttpServletRequest request = (HttpServletRequest) servletRequest;\n    logger.info(request.getRequestURL().toString());\n    filterChain.doFilter(servletRequest,servletResponse);\n}\n</code></pre>\n\n<p>Well, the two urls are</p>\n\n<pre><code>http://localhost:8080/index\nhttp://localhost:8080/favicon.ico\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4486879,"reputation":271,"user_id":3649178,"display_name":"wrathtoliar"},"down_vote_count":0,"up_vote_count":17,"is_accepted":false,"score":17,"last_activity_date":1580755381,"creation_date":1580755381,"answer_id":60045285,"question_id":44775539,"body_markdown":"Please check if the class where in you had defined your filter was a bean or a regular class. In case it is a bean/component then you do not have to specifically register the filter in your security configuration for eg by using \r\n\r\n    http.addFilterBefore(new YourFilter(), BasicAuthenticationFilter.class). \r\n\r\nBy registering a bean additionally as mentioned, the same filter will get executed twice.","title":"why spring boot filter call twice?","body":"<p>Please check if the class where in you had defined your filter was a bean or a regular class. In case it is a bean/component then you do not have to specifically register the filter in your security configuration for eg by using </p>\n\n<pre><code>http.addFilterBefore(new YourFilter(), BasicAuthenticationFilter.class). \n</code></pre>\n\n<p>By registering a bean additionally as mentioned, the same filter will get executed twice.</p>\n"},{"tags":[],"owner":{"account_id":12211707,"reputation":367,"user_id":8913302,"display_name":"Johan"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695375403,"creation_date":1695375403,"answer_id":77156477,"question_id":44775539,"body_markdown":"Extending answer from @wrathtoliar\r\n\r\nIf your filter is invoking Spring bean. Make an autowired variable instead of manual java instantiation.\r\n\r\n    @Autowired\r\n    private YourFilter yourFilter;\r\n    \r\n    http.addFilterBefore(yourFilter, BasicAuthenticationFilter.class)","title":"why spring boot filter call twice?","body":"<p>Extending answer from @wrathtoliar</p>\n<p>If your filter is invoking Spring bean. Make an autowired variable instead of manual java instantiation.</p>\n<pre><code>@Autowired\nprivate YourFilter yourFilter;\n\nhttp.addFilterBefore(yourFilter, BasicAuthenticationFilter.class)\n</code></pre>\n"},{"tags":[],"owner":{"account_id":23980626,"reputation":7,"user_id":17968709,"display_name":"ylmzzsy"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1699942978,"creation_date":1699942978,"answer_id":77478519,"question_id":44775539,"body_markdown":"Spring Security doesn’t guarantee the filter won’t be called more than once, so we have to take care of this ourselves. The easiest way is to implement the filter using the OncePerRequestFilter class\r\n\r\nHere is an example;\r\n```java\r\npublic class AuthenticationLoggingFilter extends OncePerRequestFilter {\r\n    private final Logger logger = Logger.getLogger(AuthenticationLoggingFilter.class.getName());\r\n\r\n    @Override\r\n    protected void doFilterInternal(HttpServletRequest request,\r\n                                    HttpServletResponse response,\r\n                                    FilterChain filterChain)\r\n            throws ServletException, IOException {\r\n        String requestId = request.getHeader(&quot;Request-Id&quot;);\r\n        logger.info(&quot;Successfully authenticated request with id &quot; + requestId);\r\n        filterChain.doFilter(request, response);\r\n    }\r\n}\r\n```","title":"why spring boot filter call twice?","body":"<p>Spring Security doesn’t guarantee the filter won’t be called more than once, so we have to take care of this ourselves. The easiest way is to implement the filter using the OncePerRequestFilter class</p>\n<p>Here is an example;</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class AuthenticationLoggingFilter extends OncePerRequestFilter {\n    private final Logger logger = Logger.getLogger(AuthenticationLoggingFilter.class.getName());\n\n    @Override\n    protected void doFilterInternal(HttpServletRequest request,\n                                    HttpServletResponse response,\n                                    FilterChain filterChain)\n            throws ServletException, IOException {\n        String requestId = request.getHeader(&quot;Request-Id&quot;);\n        logger.info(&quot;Successfully authenticated request with id &quot; + requestId);\n        filterChain.doFilter(request, response);\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":6745458,"reputation":91,"user_id":5197195,"display_name":"Nestle Caau"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":13410,"favorite_count":0,"down_vote_count":0,"up_vote_count":9,"answer_count":6,"score":9,"last_activity_date":1699942978,"creation_date":1498552122,"question_id":44775539,"body_markdown":"my spring boot version is 1.5.4,here is my config code\r\n\r\n    @SpringBootApplication\r\n    @Configuration\r\n    @RestController\r\n    @ServletComponentScan\r\n    public class Application {\r\n\r\n\t    public static void main(String[] args) throws Exception {\r\n\t    \tSpringApplication.run(Application.class, args);\r\n\t    }\r\n\r\n\t    @RequestMapping(&quot;/&quot;)\r\n\t    public String home() {\r\n\t\t    System.out.println(&quot;test&quot;);\r\n\t\t    return &quot;Hello World!&quot;;\r\n\t    }\r\n\r\n    }\r\n\r\nhere is my servlet filter code\r\n\r\n    @WebFilter(urlPatterns = &quot;/*&quot;)\r\n    public class LogFilter implements Filter {\r\n\r\n\r\n\t@Override\r\n\tpublic void doFilter(ServletRequest request, ServletResponse response, FilterChain chain) throws IOException, ServletException {\r\n\t\tSystem.out.println(&quot;LogFilter&quot;);\r\n\t\tchain.doFilter(request, response);\r\n\t}\r\n\r\n    //init and destroy\r\n\r\nWhen i visit http://localhost:8080/ console is out print\r\n\r\n\r\n    LogFilter\r\n    test\r\n    LogFilter &lt;----the second time\r\n\r\nwhy call filter twice?Spring boot Why do this? Is there a relevant document or source reference?where I want him to call once, how can i do it?\r\n\r\nupdate: thx all the problem has been solved","title":"why spring boot filter call twice?","body":"<p>my spring boot version is 1.5.4,here is my config code</p>\n\n<pre><code>@SpringBootApplication\n@Configuration\n@RestController\n@ServletComponentScan\npublic class Application {\n\n    public static void main(String[] args) throws Exception {\n        SpringApplication.run(Application.class, args);\n    }\n\n    @RequestMapping(\"/\")\n    public String home() {\n        System.out.println(\"test\");\n        return \"Hello World!\";\n    }\n\n}\n</code></pre>\n\n<p>here is my servlet filter code</p>\n\n<pre><code>@WebFilter(urlPatterns = \"/*\")\npublic class LogFilter implements Filter {\n\n\n@Override\npublic void doFilter(ServletRequest request, ServletResponse response, FilterChain chain) throws IOException, ServletException {\n    System.out.println(\"LogFilter\");\n    chain.doFilter(request, response);\n}\n\n//init and destroy\n</code></pre>\n\n<p>When i visit <a href=\"http://localhost:8080/\" rel=\"noreferrer\">http://localhost:8080/</a> console is out print</p>\n\n<pre><code>LogFilter\ntest\nLogFilter &lt;----the second time\n</code></pre>\n\n<p>why call filter twice?Spring boot Why do this? Is there a relevant document or source reference?where I want him to call once, how can i do it?</p>\n\n<p>update: thx all the problem has been solved</p>\n"},{"tags":["java","mongodb"],"owner":{"account_id":4146531,"reputation":451,"user_id":3400076,"display_name":"xxestter"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":13,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1699942544,"creation_date":1699942544,"question_id":77478493,"body_markdown":"I am currently retrieving some of the MongoDB metrics and display on a dashboard. there is a metrics called opLatencies, which I find it hard to understand. \r\n\r\nAttached the link -&gt; https://www.mongodb.com/docs/v4.4/reference/command/serverStatus/#mongodb-serverstatus-serverstatus.opLatencies\r\n\r\nCan someone please enlighten me, what value is opLatencies is capturing? It says &quot;A 64-bit integer giving the total combined latency in microseconds&quot; in the documentation, but what is 64-bit integer?\r\n","title":"opLatencies mongodb metric","body":"<p>I am currently retrieving some of the MongoDB metrics and display on a dashboard. there is a metrics called opLatencies, which I find it hard to understand.</p>\n<p>Attached the link -&gt; <a href=\"https://www.mongodb.com/docs/v4.4/reference/command/serverStatus/#mongodb-serverstatus-serverstatus.opLatencies\" rel=\"nofollow noreferrer\">https://www.mongodb.com/docs/v4.4/reference/command/serverStatus/#mongodb-serverstatus-serverstatus.opLatencies</a></p>\n<p>Can someone please enlighten me, what value is opLatencies is capturing? It says &quot;A 64-bit integer giving the total combined latency in microseconds&quot; in the documentation, but what is 64-bit integer?</p>\n"},{"tags":["java","spring-boot","maven","maven-shade-plugin"],"owner":{"account_id":8316980,"reputation":1,"user_id":14721295,"display_name":"govind"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":45,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1699942373,"creation_date":1699942373,"question_id":77478482,"body_markdown":"I have one spring application(**dependency**) as a lib and other is simple java application(**dependenct**). I am trying to run java class from which i am calling spring main method. after running java -cp dependent-0.0.1-SNAPSHOT.jar com.example.dependent.DependentApplication it is giving me below:\r\n\r\n&gt;ERROR StatusLogger Log4j2 could not find a logging implementation. Please add log4j-core to the classpath. Using SimpleLogger to log to the console...\r\nException in thread &quot;main&quot; java.lang.IllegalArgumentException: Cannot instantiate interface org.springframework.context.ApplicationContextInitializer : org.springframework.boot.context.ConfigurationWarningsApplicationContextInitializer\r\n        at org.springframework.boot.SpringApplication.createSpringFactoriesInstances(SpringApplication.java:456)\r\n        at org.springframework.boot.SpringApplication.getSpringFactoriesInstances(SpringApplication.java:438)\r\n        at org.springframework.boot.SpringApplication.getSpringFactoriesInstances(SpringApplication.java:431)\r\n        at org.springframework.boot.SpringApplication.&lt;init&gt;(SpringApplication.java:262)\r\n        at org.springframework.boot.SpringApplication.&lt;init&gt;(SpringApplication.java:241)\r\n        at org.springframework.boot.SpringApplication.run(SpringApplication.java:1312)\r\n        at org.springframework.boot.SpringApplication.run(SpringApplication.java:1301)\r\n        at com.example.dependency.DependencyApplication.main(DependencyApplication.java:11)\r\n        at com.example.dependent.DependentApplication.main(DependentApplication.java:11)\r\nCaused by: java.lang.ClassNotFoundException: org.springframework.boot.context.ConfigurationWarningsApplicationContextInitializer\r\n        at java.base/jdk.internal.loader.BuiltinClassLoader.loadClass(BuiltinClassLoader.java:641)\r\n        at java.base/jdk.internal.loader.ClassLoaders$AppClassLoader.loadClass(ClassLoaders.java:188)\r\n        at java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:520)\r\n        at java.base/java.lang.Class.forName0(Native Method)\r\n        at java.base/java.lang.Class.forName(Class.java:467)\r\n        at org.springframework.util.ClassUtils.forName(ClassUtils.java:284)\r\n        at org.springframework.boot.SpringApplication.createSpringFactoriesInstances(SpringApplication.java:449)\r\n        ... 8 more\r\n\r\n\r\n**Pom.xml for spring application (dependency)below.**\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n    \txsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n    \t&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n    \t&lt;parent&gt;\r\n    \t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t&lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n    \t\t&lt;version&gt;2.6.6&lt;/version&gt;\r\n    \t\t&lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\r\n    \t&lt;/parent&gt;\r\n    \t&lt;groupId&gt;com.example&lt;/groupId&gt;\r\n    \t&lt;artifactId&gt;dependency&lt;/artifactId&gt;\r\n    \t&lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\r\n    \t&lt;name&gt;dependency&lt;/name&gt;\r\n    \t&lt;description&gt;dependency project for Spring Boot&lt;/description&gt;\r\n    \t&lt;properties&gt;\r\n    \t\t&lt;java.version&gt;1.8&lt;/java.version&gt;\r\n    \t&lt;/properties&gt;\r\n    \t&lt;dependencies&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;spring-boot-starter&lt;/artifactId&gt;\r\n    \t\t\t&lt;exclusions&gt;\r\n    \t\t\t\t&lt;exclusion&gt;\r\n    \t\t\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t\t\t\t&lt;artifactId&gt;spring-boot-starter-logging&lt;/artifactId&gt;\r\n    \t\t\t\t&lt;/exclusion&gt;\r\n    \t\t\t&lt;/exclusions&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;spring-boot-starter-log4j2&lt;/artifactId&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;lombok&lt;/artifactId&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t&lt;/dependencies&gt;\r\n    \r\n    \t&lt;build&gt;\r\n    \t\t&lt;plugins&gt;\r\n    \t\t\t&lt;plugin&gt;\r\n    \t\t\t\t&lt;artifactId&gt;maven-assembly-plugin&lt;/artifactId&gt;\r\n    \t\t\t\t&lt;executions&gt;\r\n    \t\t\t\t\t&lt;execution&gt;\r\n    \t\t\t\t\t\t&lt;phase&gt;package&lt;/phase&gt;\r\n    \t\t\t\t\t\t&lt;goals&gt;\r\n    \t\t\t\t\t\t\t&lt;goal&gt;single&lt;/goal&gt;\r\n    \t\t\t\t\t\t&lt;/goals&gt;\r\n    \t\t\t\t\t&lt;/execution&gt;\r\n    \t\t\t\t&lt;/executions&gt;\r\n    \t\t\t\t&lt;configuration&gt;\r\n    \t\t\t\t\t&lt;archive&gt;\r\n    \t\t\t\t\t\t&lt;manifest&gt;\r\n    \t\t\t\t\t\t\t&lt;mainClass&gt;com.example.dependency.DependencyApplication&lt;/mainClass&gt;\r\n    \t\t\t\t\t\t&lt;/manifest&gt;\r\n    \t\t\t\t\t&lt;/archive&gt;\r\n    \t\t\t\t\t&lt;descriptorRefs&gt;\r\n    \t\t\t\t\t\t&lt;descriptorRef&gt;jar-with-dependencies&lt;/descriptorRef&gt;\r\n    \t\t\t\t\t&lt;/descriptorRefs&gt;\r\n    \r\n    \t\t\t\t&lt;/configuration&gt;\r\n    \t\t\t&lt;/plugin&gt;\r\n    \t\t&lt;/plugins&gt;\r\n    \t&lt;/build&gt;\r\n    &lt;/project&gt;\r\n\r\n\r\nDependent pom.xml\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd&quot;&gt;\r\n    \t&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n    \t&lt;groupId&gt;com.example&lt;/groupId&gt;\r\n    \t&lt;artifactId&gt;dependent&lt;/artifactId&gt;\r\n    \t&lt;name&gt;dependent&lt;/name&gt;\r\n    \t&lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\r\n    \t&lt;dependencies&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;com.example&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;dependency&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t&lt;/dependencies&gt;\r\n    \t&lt;build&gt;\r\n    \t\t&lt;plugins&gt;\r\n    \t\t\t&lt;plugin&gt;\r\n    \t\t\t\t&lt;artifactId&gt;maven-shade-plugin&lt;/artifactId&gt;\r\n    \t\t\t\t&lt;version&gt;3.2.1&lt;/version&gt;\r\n    \t\t\t\t&lt;executions&gt;\r\n    \t\t\t\t\t&lt;execution&gt;\r\n    \t\t\t\t\t\t&lt;phase&gt;package&lt;/phase&gt;\r\n    \t\t\t\t\t\t&lt;goals&gt;\r\n    \t\t\t\t\t\t\t&lt;goal&gt;shade&lt;/goal&gt;\r\n    \t\t\t\t\t\t&lt;/goals&gt;\r\n    \t\t\t\t\t\t&lt;configuration&gt;\r\n    \t\t\t\t\t\t\t&lt;minimizeJar&gt;true&lt;/minimizeJar&gt;\r\n    \t\t\t\t\t\t&lt;/configuration&gt;\r\n    \t\t\t\t\t&lt;/execution&gt;\r\n    \t\t\t\t&lt;/executions&gt;\r\n    \t\t\t&lt;/plugin&gt;\r\n    \t\t&lt;/plugins&gt;\r\n    \t&lt;/build&gt;\r\n    \t&lt;properties&gt;\r\n    \t\t&lt;maven.compiler.target&gt;1.8&lt;/maven.compiler.target&gt;\r\n    \t\t&lt;java.version&gt;1.8&lt;/java.version&gt;\r\n    \t\t&lt;maven.compiler.source&gt;1.8&lt;/maven.compiler.source&gt;\r\n    \t\t&lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\r\n    \t\t&lt;project.reporting.outputEncoding&gt;UTF-8&lt;/project.reporting.outputEncoding&gt;\r\n    \t&lt;/properties&gt;\r\n    &lt;/project&gt;\r\n\r\n","title":"ERROR StatusLogger Log4j2 could not find a logging implementation. while running executable jar","body":"<p>I have one spring application(<strong>dependency</strong>) as a lib and other is simple java application(<strong>dependenct</strong>). I am trying to run java class from which i am calling spring main method. after running java -cp dependent-0.0.1-SNAPSHOT.jar com.example.dependent.DependentApplication it is giving me below:</p>\n<blockquote>\n<p>ERROR StatusLogger Log4j2 could not find a logging implementation. Please add log4j-core to the classpath. Using SimpleLogger to log to the console...\nException in thread &quot;main&quot; java.lang.IllegalArgumentException: Cannot instantiate interface org.springframework.context.ApplicationContextInitializer : org.springframework.boot.context.ConfigurationWarningsApplicationContextInitializer\nat org.springframework.boot.SpringApplication.createSpringFactoriesInstances(SpringApplication.java:456)\nat org.springframework.boot.SpringApplication.getSpringFactoriesInstances(SpringApplication.java:438)\nat org.springframework.boot.SpringApplication.getSpringFactoriesInstances(SpringApplication.java:431)\nat org.springframework.boot.SpringApplication.(SpringApplication.java:262)\nat org.springframework.boot.SpringApplication.(SpringApplication.java:241)\nat org.springframework.boot.SpringApplication.run(SpringApplication.java:1312)\nat org.springframework.boot.SpringApplication.run(SpringApplication.java:1301)\nat com.example.dependency.DependencyApplication.main(DependencyApplication.java:11)\nat com.example.dependent.DependentApplication.main(DependentApplication.java:11)\nCaused by: java.lang.ClassNotFoundException: org.springframework.boot.context.ConfigurationWarningsApplicationContextInitializer\nat java.base/jdk.internal.loader.BuiltinClassLoader.loadClass(BuiltinClassLoader.java:641)\nat java.base/jdk.internal.loader.ClassLoaders$AppClassLoader.loadClass(ClassLoaders.java:188)\nat java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:520)\nat java.base/java.lang.Class.forName0(Native Method)\nat java.base/java.lang.Class.forName(Class.java:467)\nat org.springframework.util.ClassUtils.forName(ClassUtils.java:284)\nat org.springframework.boot.SpringApplication.createSpringFactoriesInstances(SpringApplication.java:449)\n... 8 more</p>\n</blockquote>\n<p><strong>Pom.xml for spring application (dependency)below.</strong></p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n    xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n    &lt;parent&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n        &lt;version&gt;2.6.6&lt;/version&gt;\n        &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\n    &lt;/parent&gt;\n    &lt;groupId&gt;com.example&lt;/groupId&gt;\n    &lt;artifactId&gt;dependency&lt;/artifactId&gt;\n    &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n    &lt;name&gt;dependency&lt;/name&gt;\n    &lt;description&gt;dependency project for Spring Boot&lt;/description&gt;\n    &lt;properties&gt;\n        &lt;java.version&gt;1.8&lt;/java.version&gt;\n    &lt;/properties&gt;\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter&lt;/artifactId&gt;\n            &lt;exclusions&gt;\n                &lt;exclusion&gt;\n                    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                    &lt;artifactId&gt;spring-boot-starter-logging&lt;/artifactId&gt;\n                &lt;/exclusion&gt;\n            &lt;/exclusions&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-log4j2&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\n            &lt;artifactId&gt;lombok&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n\n    &lt;build&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;artifactId&gt;maven-assembly-plugin&lt;/artifactId&gt;\n                &lt;executions&gt;\n                    &lt;execution&gt;\n                        &lt;phase&gt;package&lt;/phase&gt;\n                        &lt;goals&gt;\n                            &lt;goal&gt;single&lt;/goal&gt;\n                        &lt;/goals&gt;\n                    &lt;/execution&gt;\n                &lt;/executions&gt;\n                &lt;configuration&gt;\n                    &lt;archive&gt;\n                        &lt;manifest&gt;\n                            &lt;mainClass&gt;com.example.dependency.DependencyApplication&lt;/mainClass&gt;\n                        &lt;/manifest&gt;\n                    &lt;/archive&gt;\n                    &lt;descriptorRefs&gt;\n                        &lt;descriptorRef&gt;jar-with-dependencies&lt;/descriptorRef&gt;\n                    &lt;/descriptorRefs&gt;\n\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n&lt;/project&gt;\n</code></pre>\n<p>Dependent pom.xml</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd&quot;&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n    &lt;groupId&gt;com.example&lt;/groupId&gt;\n    &lt;artifactId&gt;dependent&lt;/artifactId&gt;\n    &lt;name&gt;dependent&lt;/name&gt;\n    &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.example&lt;/groupId&gt;\n            &lt;artifactId&gt;dependency&lt;/artifactId&gt;\n            &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n    &lt;build&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;artifactId&gt;maven-shade-plugin&lt;/artifactId&gt;\n                &lt;version&gt;3.2.1&lt;/version&gt;\n                &lt;executions&gt;\n                    &lt;execution&gt;\n                        &lt;phase&gt;package&lt;/phase&gt;\n                        &lt;goals&gt;\n                            &lt;goal&gt;shade&lt;/goal&gt;\n                        &lt;/goals&gt;\n                        &lt;configuration&gt;\n                            &lt;minimizeJar&gt;true&lt;/minimizeJar&gt;\n                        &lt;/configuration&gt;\n                    &lt;/execution&gt;\n                &lt;/executions&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n    &lt;properties&gt;\n        &lt;maven.compiler.target&gt;1.8&lt;/maven.compiler.target&gt;\n        &lt;java.version&gt;1.8&lt;/java.version&gt;\n        &lt;maven.compiler.source&gt;1.8&lt;/maven.compiler.source&gt;\n        &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\n        &lt;project.reporting.outputEncoding&gt;UTF-8&lt;/project.reporting.outputEncoding&gt;\n    &lt;/properties&gt;\n&lt;/project&gt;\n</code></pre>\n"},{"tags":["java","arrays","pass-by-reference"],"comments":[{"owner":{"account_id":13244695,"reputation":416,"user_id":9564191,"display_name":"Lutzi"},"score":0,"creation_date":1525764748,"post_id":50228199,"comment_id":87473659,"body_markdown":"I don&#39;t think `Array` have a `toString()` method. So it tries to display something it doesn&#39;t know how to display ...","body":"I don&#39;t think <code>Array</code> have a <code>toString()</code> method. So it tries to display something it doesn&#39;t know how to display ..."},{"owner":{"account_id":3675707,"reputation":5532,"user_id":3061857,"accept_rate":65,"display_name":"nbokmans"},"score":0,"creation_date":1525764767,"post_id":50228199,"comment_id":87473674,"body_markdown":"Your question does not make sense. Pass by value and printing an object are not related at all. If you had googled &quot;java pass by value&quot;, you would have found this answer: https://stackoverflow.com/questions/40480/is-java-pass-by-reference-or-pass-by-value which specifically says: &quot;Java is always pass-by-value. Unfortunately, they decided to call the location of an object a &quot;reference&quot;. When we pass the value of an object, we are passing the reference to it. &quot;","body":"Your question does not make sense. Pass by value and printing an object are not related at all. If you had googled &quot;java pass by value&quot;, you would have found this answer: <a href=\"https://stackoverflow.com/questions/40480/is-java-pass-by-reference-or-pass-by-value\" title=\"is java pass by reference or pass by value\">stackoverflow.com/questions/40480/&hellip;</a> which specifically says: &quot;Java is always pass-by-value. Unfortunately, they decided to call the location of an object a &quot;reference&quot;. When we pass the value of an object, we are passing the reference to it. &quot;"},{"owner":{"account_id":11147483,"reputation":1772,"user_id":8181750,"display_name":"L.Spillner"},"score":1,"creation_date":1525764895,"post_id":50228199,"comment_id":87473740,"body_markdown":"@Lutzi An array (even for primitive types) is an Object as any other objects as well and therefore at least inherits `toString()` from `java.lang.Object`.","body":"@Lutzi An array (even for primitive types) is an Object as any other objects as well and therefore at least inherits <code>toString()</code> from <code>java.lang.Object</code>."},{"owner":{"account_id":13244695,"reputation":416,"user_id":9564191,"display_name":"Lutzi"},"score":0,"creation_date":1525764981,"post_id":50228199,"comment_id":87473794,"body_markdown":"It herits it yes, but don&#39;t know how to display value. It&#39;s not because you specialize Object that Java knows how to print it (e.g. a specialization of Object with two fields).","body":"It herits it yes, but don&#39;t know how to display value. It&#39;s not because you specialize Object that Java knows how to print it (e.g. a specialization of Object with two fields)."},{"owner":{"account_id":11147483,"reputation":1772,"user_id":8181750,"display_name":"L.Spillner"},"score":1,"creation_date":1525765113,"post_id":50228199,"comment_id":87473857,"body_markdown":"@Lutzi the direct implementation of how the String is evaluated: [Object.toString()](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/8u40-b25/java/lang/Object.java#Object.toString%28%29)","body":"@Lutzi the direct implementation of how the String is evaluated: <a href=\"http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/8u40-b25/java/lang/Object.java#Object.toString%28%29\" rel=\"nofollow noreferrer\">Object.toString()</a>"}],"answers":[{"tags":[],"owner":{"account_id":159531,"reputation":16392,"user_id":378979,"accept_rate":96,"display_name":"Vincent Cantin"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1525764823,"creation_date":1525764823,"answer_id":50228261,"question_id":50228199,"body_markdown":"Java passed the value of the reference `intarray`, which means it passes the address of the array.\r\n\r\nWhat it prints is not related to passing parameters by value or not, it depends on what the print method does.","title":"If java is pass-by-value, then why does displaying an array name return gibberish?","body":"<p>Java passed the value of the reference <code>intarray</code>, which means it passes the address of the array.</p>\n\n<p>What it prints is not related to passing parameters by value or not, it depends on what the print method does.</p>\n"},{"tags":[],"owner":{"account_id":1263831,"reputation":388998,"user_id":1221571,"accept_rate":67,"display_name":"Eran"},"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1525764948,"creation_date":1525764948,"answer_id":50228309,"question_id":50228199,"body_markdown":"This has nothing to do with Java being pass by value.\r\n\r\n`System.out.println(intarray)` uses the `toString()` method to obtain a `String` representation of the passed object. \r\n\r\nThe default implementation of `Object`&#39;s `toString` prints what you call &quot;gibberish&quot; (which is generated by the expression `getClass().getName() + &quot;@&quot; + Integer.toHexString(hashCode())`). The array class does not override that implementation. Therefore, `System.out.println(intarray)` prints &quot;gibberish&quot;.\r\n\r\nOn the other hand, `Arrays.toString(intarray)` returns a `String` that lists the elements of the passed array.","title":"If java is pass-by-value, then why does displaying an array name return gibberish?","body":"<p>This has nothing to do with Java being pass by value.</p>\n\n<p><code>System.out.println(intarray)</code> uses the <code>toString()</code> method to obtain a <code>String</code> representation of the passed object. </p>\n\n<p>The default implementation of <code>Object</code>'s <code>toString</code> prints what you call \"gibberish\" (which is generated by the expression <code>getClass().getName() + \"@\" + Integer.toHexString(hashCode())</code>). The array class does not override that implementation. Therefore, <code>System.out.println(intarray)</code> prints \"gibberish\".</p>\n\n<p>On the other hand, <code>Arrays.toString(intarray)</code> returns a <code>String</code> that lists the elements of the passed array.</p>\n"},{"tags":[],"owner":{"account_id":4196075,"reputation":17303,"user_id":3437460,"accept_rate":49,"display_name":"user3437460"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1525764967,"creation_date":1525764967,"answer_id":50228315,"question_id":50228199,"body_markdown":"It does not matter whether Java is pass by value here. The reason it is printing the hashcode is because Array is an Object in Java. \r\n\r\nWhen you try to print an Object in Java using `System.out.println()`, the String representation of the Object will be displayed. That is, the `toString()` method of Array (inherited from Object class) will be implicitly invoked, thus giving you the so called &quot;gibberish&quot;.","title":"If java is pass-by-value, then why does displaying an array name return gibberish?","body":"<p>It does not matter whether Java is pass by value here. The reason it is printing the hashcode is because Array is an Object in Java. </p>\n\n<p>When you try to print an Object in Java using <code>System.out.println()</code>, the String representation of the Object will be displayed. That is, the <code>toString()</code> method of Array (inherited from Object class) will be implicitly invoked, thus giving you the so called \"gibberish\".</p>\n"},{"tags":[],"owner":{"account_id":13282467,"reputation":6102,"user_id":9589593,"display_name":"k_ssb"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1525765074,"creation_date":1525765074,"answer_id":50228348,"question_id":50228199,"body_markdown":"When you do\r\n\r\n    System.out.println(myObj);\r\n\r\nthe object `myObj` is converted to a printable format (i.e., a `String`) by calling `myObj.toString()`.\r\n\r\nIf an object doesn&#39;t provide its own `toString()` implementation, it inherits the `toString()` from `Object`, which returns object&#39;s class name concatenated with the object&#39;s hashcode, as follows ([javadoc][1]):\r\n\r\n    getClass().getName() + &#39;@&#39; + Integer.toHexString(hashCode())\r\n\r\nArrays inherit `toString()` from `Object` and this is why you get the output `[I@7852e922`. Note that the class name is in fact `[I`, which represents &quot;an array containing the primitive type int&quot; -- you can read more about class names [here][2].\r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html#toString()\r\n  [2]: https://docs.oracle.com/javase/7/docs/api/java/lang/Class.html#getName()","title":"If java is pass-by-value, then why does displaying an array name return gibberish?","body":"<p>When you do</p>\n\n<pre><code>System.out.println(myObj);\n</code></pre>\n\n<p>the object <code>myObj</code> is converted to a printable format (i.e., a <code>String</code>) by calling <code>myObj.toString()</code>.</p>\n\n<p>If an object doesn't provide its own <code>toString()</code> implementation, it inherits the <code>toString()</code> from <code>Object</code>, which returns object's class name concatenated with the object's hashcode, as follows (<a href=\"https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html#toString()\" rel=\"nofollow noreferrer\">javadoc</a>):</p>\n\n<pre><code>getClass().getName() + '@' + Integer.toHexString(hashCode())\n</code></pre>\n\n<p>Arrays inherit <code>toString()</code> from <code>Object</code> and this is why you get the output <code>[I@7852e922</code>. Note that the class name is in fact <code>[I</code>, which represents \"an array containing the primitive type int\" -- you can read more about class names <a href=\"https://docs.oracle.com/javase/7/docs/api/java/lang/Class.html#getName()\" rel=\"nofollow noreferrer\">here</a>.</p>\n"}],"owner":{"account_id":8794123,"reputation":43,"user_id":9712859,"display_name":"saulsebrook"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":577,"favorite_count":0,"down_vote_count":3,"up_vote_count":3,"closed_date":1525766524,"answer_count":4,"score":0,"last_activity_date":1699942344,"creation_date":1525764651,"question_id":50228199,"body_markdown":"I am getting confused why I can&#39;t use the statement to display the values in an array?\r\n\r\n`System.out.println(intarray);`\r\n\r\nThis is the output &#39;[I@7852e922&#39;\r\n\r\nIf java is pass-by-value shouldnt that statement return the values of the array not the object reference. This is the fix im using.\r\n\r\n    System.out.println(Arrays.toString(intarray));","title":"If java is pass-by-value, then why does displaying an array name return gibberish?","body":"<p>I am getting confused why I can't use the statement to display the values in an array?</p>\n<p><code>System.out.println(intarray);</code></p>\n<p>This is the output '[I@7852e922'</p>\n<p>If java is pass-by-value shouldnt that statement return the values of the array not the object reference. This is the fix im using.</p>\n<pre><code>System.out.println(Arrays.toString(intarray));\n</code></pre>\n"},{"tags":["java","testing","quarkus","multipartfile"],"comments":[{"owner":{"account_id":2922228,"reputation":61024,"user_id":2504224,"display_name":"geoand"},"score":0,"creation_date":1699424108,"post_id":77439430,"comment_id":136528116,"body_markdown":"Any chance you can upload a sample to GitHub?","body":"Any chance you can upload a sample to GitHub?"},{"owner":{"account_id":12204971,"reputation":1227,"user_id":8908318,"accept_rate":100,"display_name":"monamona"},"score":0,"creation_date":1699432400,"post_id":77439430,"comment_id":136529257,"body_markdown":"A good chance. I added a repo with the MRE to the question. https://github.com/LocutusV0nB0rg/QuarkusFileUpload/tree/master","body":"A good chance. I added a repo with the MRE to the question. <a href=\"https://github.com/LocutusV0nB0rg/QuarkusFileUpload/tree/master\" rel=\"nofollow noreferrer\">github.com/LocutusV0nB0rg/QuarkusFileUpload/tree/master</a>"}],"answers":[{"tags":[],"owner":{"account_id":2922228,"reputation":61024,"user_id":2504224,"display_name":"geoand"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1699942319,"creation_date":1699942319,"answer_id":77478478,"question_id":77439430,"body_markdown":"The file upload works correctly - if you do `tagFile.uploadedFile().toFile().exists()` you will see the value is true.\r\n\r\nThe problem is that you are copying the file to a directory that does not exist","title":"Test Quarkus endpoint with multipart file upload with RestAssured","body":"<p>The file upload works correctly - if you do <code>tagFile.uploadedFile().toFile().exists()</code> you will see the value is true.</p>\n<p>The problem is that you are copying the file to a directory that does not exist</p>\n"}],"owner":{"account_id":12204971,"reputation":1227,"user_id":8908318,"accept_rate":100,"display_name":"monamona"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":63,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77478478,"answer_count":1,"score":0,"last_activity_date":1699942319,"creation_date":1699370391,"question_id":77439430,"body_markdown":"I want to send files to an endpoint. These files should then be stored on a given path.\r\n\r\nTo implement this, I wrote the following endpoint:\r\n\r\n```java\r\n    @Path(&quot;upload&quot;)\r\n    @PUT\r\n    public void uploadTagFile(@RestForm(&quot;tagFile&quot;) FileUpload tagFile, @HeaderParam(&quot;sessionId&quot;) UUID sessionId) {\r\n        Session session = sessionService.obtainActiveSession(sessionId);\r\n\r\n        File copied;\r\n        try {\r\n            copied = Files.copy(tagFile.uploadedFile(), java.nio.file.Path.of(storageDirectory + &quot;/sessions/&quot; + tagFile.fileName())).toFile();\r\n        } catch (IOException e) {\r\n            throw new RuntimeException(e);\r\n        }\r\n\r\n        tagFilesService.addTagFile(session, copied);\r\n    }\r\n```\r\n\r\nI thought this should be fine and went ahead and wrote a test for this endpoint that uploads a file which is located in the resources of the test module:\r\n\r\n\r\n\r\n```java\r\n    @Test\r\n    public void uploadTagFile_ValidSessionWithFile_UploadSuccessful() {\r\n        //Setup\r\n        File file = ResourceUtils.getResourceAsFile(&quot;sampledata/tag/unitdata.tag&quot;);\r\n        Assertions.assertNotNull(file);\r\n\r\n        //Action + Assert\r\n        given().header(&quot;sessionId&quot;, sessionId)\r\n                .header(new Header(&quot;content-type&quot;, &quot;multipart/form-data&quot;))\r\n                .multiPart(&quot;tagFile&quot;, file)\r\n                .contentType(&quot;multipart/form-data&quot;)\r\n                .when()\r\n                .put(&quot;/api/tag/upload&quot;)\r\n                .then()\r\n                .statusCode(204);\r\n    }\r\n```\r\n\r\nThis gave me the following error message;\r\n\r\n```\r\n2023-11-07 16:15:27,918 ERROR [io.qua.ver.htt.run.QuarkusErrorHandler] (executor-thread-1) HTTP Request to /api/tag/upload failed, error id: 2dc30e07-b49c-4155-817a-3599e53af9b5-1: java.lang.RuntimeException: java.nio.file.NoSuchFileException: C:\\Users\\XXX\\AppData\\Local\\Temp\\uploads\\resteasy-reactive5082349700154976184upload -&gt; tmpstorage\\sessions\\7577918012706382072813560817.tmp\r\n\tat com.xxx.tpu.quarkus.tag.TagFilesController.uploadTagFile(TagFilesController.java:40)\r\n\tat com.xxx.tpu.quarkus.tag.TagFilesController$quarkusrestinvoker$uploadTagFile_f34cf665f31482fa40b85501ce781413d7f28f10.invoke(Unknown Source)\r\n\tat org.jboss.resteasy.reactive.server.handlers.InvocationHandler.handle(InvocationHandler.java:29)\r\n\tat io.quarkus.resteasy.reactive.server.runtime.QuarkusResteasyReactiveRequestContext.invokeHandler(QuarkusResteasyReactiveRequestContext.java:141)\r\n\tat org.jboss.resteasy.reactive.common.core.AbstractResteasyReactiveContext.run(AbstractResteasyReactiveContext.java:147)\r\n\tat io.quarkus.vertx.core.runtime.VertxCoreRecorder$14.runWith(VertxCoreRecorder.java:582)\r\n\tat org.jboss.threads.EnhancedQueueExecutor$Task.run(EnhancedQueueExecutor.java:2513)\r\n\tat org.jboss.threads.EnhancedQueueExecutor$ThreadBody.run(EnhancedQueueExecutor.java:1538)\r\n\tat org.jboss.threads.DelegatingRunnable.run(DelegatingRunnable.java:29)\r\n\tat org.jboss.threads.ThreadLocalResettingRunnable.run(ThreadLocalResettingRunnable.java:29)\r\n\tat io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)\r\n\tat java.base/java.lang.Thread.run(Thread.java:829)\r\nCaused by: java.nio.file.NoSuchFileException: C:\\Users\\XXX\\AppData\\Local\\Temp\\uploads\\resteasy-reactive5082349700154976184upload -&gt; tmpstorage\\sessions\\7577918012706382072813560817.tmp\r\n\tat java.base/sun.nio.fs.WindowsException.translateToIOException(WindowsException.java:85)\r\n\tat java.base/sun.nio.fs.WindowsException.rethrowAsIOException(WindowsException.java:103)\r\n\tat java.base/sun.nio.fs.WindowsFileCopy.copy(WindowsFileCopy.java:202)\r\n\tat java.base/sun.nio.fs.WindowsFileSystemProvider.copy(WindowsFileSystemProvider.java:283)\r\n\tat java.base/java.nio.file.Files.copy(Files.java:1295)\r\n\tat com.xxx.tpu.quarkus.tag.TagFilesController.uploadTagFile(TagFilesController.java:38)\r\n\t... 11 more\r\n```\r\n\r\nTherefore I set a breakpoint in my controller method and got this from my debugger:\r\n\r\n[![enter image description here][1]][1]\r\n\r\nI don&#39;t understand what is wrong and why my fileUpload is not containing my file. What am I doing wrong here?\r\n\r\nYou can find a minimal reproducible example here: https://github.com/LocutusV0nB0rg/QuarkusFileUpload/tree/master\r\n\r\nEDIT:\r\n\r\nI dug a bit more and it seems the file is being transmitted correctly. However, I cannot access it. \r\n\r\n[![enter image description here][2]][2]\r\n\r\nThis file does contain the data of the file I transmitted in the test, I just cannot access it. So I guess the test is written correctly, but the endpoint has to access the file in some different way\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/3MIhy.png\r\n  [2]: https://i.stack.imgur.com/TvRsA.png","title":"Test Quarkus endpoint with multipart file upload with RestAssured","body":"<p>I want to send files to an endpoint. These files should then be stored on a given path.</p>\n<p>To implement this, I wrote the following endpoint:</p>\n<pre class=\"lang-java prettyprint-override\"><code>    @Path(&quot;upload&quot;)\n    @PUT\n    public void uploadTagFile(@RestForm(&quot;tagFile&quot;) FileUpload tagFile, @HeaderParam(&quot;sessionId&quot;) UUID sessionId) {\n        Session session = sessionService.obtainActiveSession(sessionId);\n\n        File copied;\n        try {\n            copied = Files.copy(tagFile.uploadedFile(), java.nio.file.Path.of(storageDirectory + &quot;/sessions/&quot; + tagFile.fileName())).toFile();\n        } catch (IOException e) {\n            throw new RuntimeException(e);\n        }\n\n        tagFilesService.addTagFile(session, copied);\n    }\n</code></pre>\n<p>I thought this should be fine and went ahead and wrote a test for this endpoint that uploads a file which is located in the resources of the test module:</p>\n<pre class=\"lang-java prettyprint-override\"><code>    @Test\n    public void uploadTagFile_ValidSessionWithFile_UploadSuccessful() {\n        //Setup\n        File file = ResourceUtils.getResourceAsFile(&quot;sampledata/tag/unitdata.tag&quot;);\n        Assertions.assertNotNull(file);\n\n        //Action + Assert\n        given().header(&quot;sessionId&quot;, sessionId)\n                .header(new Header(&quot;content-type&quot;, &quot;multipart/form-data&quot;))\n                .multiPart(&quot;tagFile&quot;, file)\n                .contentType(&quot;multipart/form-data&quot;)\n                .when()\n                .put(&quot;/api/tag/upload&quot;)\n                .then()\n                .statusCode(204);\n    }\n</code></pre>\n<p>This gave me the following error message;</p>\n<pre><code>2023-11-07 16:15:27,918 ERROR [io.qua.ver.htt.run.QuarkusErrorHandler] (executor-thread-1) HTTP Request to /api/tag/upload failed, error id: 2dc30e07-b49c-4155-817a-3599e53af9b5-1: java.lang.RuntimeException: java.nio.file.NoSuchFileException: C:\\Users\\XXX\\AppData\\Local\\Temp\\uploads\\resteasy-reactive5082349700154976184upload -&gt; tmpstorage\\sessions\\7577918012706382072813560817.tmp\n    at com.xxx.tpu.quarkus.tag.TagFilesController.uploadTagFile(TagFilesController.java:40)\n    at com.xxx.tpu.quarkus.tag.TagFilesController$quarkusrestinvoker$uploadTagFile_f34cf665f31482fa40b85501ce781413d7f28f10.invoke(Unknown Source)\n    at org.jboss.resteasy.reactive.server.handlers.InvocationHandler.handle(InvocationHandler.java:29)\n    at io.quarkus.resteasy.reactive.server.runtime.QuarkusResteasyReactiveRequestContext.invokeHandler(QuarkusResteasyReactiveRequestContext.java:141)\n    at org.jboss.resteasy.reactive.common.core.AbstractResteasyReactiveContext.run(AbstractResteasyReactiveContext.java:147)\n    at io.quarkus.vertx.core.runtime.VertxCoreRecorder$14.runWith(VertxCoreRecorder.java:582)\n    at org.jboss.threads.EnhancedQueueExecutor$Task.run(EnhancedQueueExecutor.java:2513)\n    at org.jboss.threads.EnhancedQueueExecutor$ThreadBody.run(EnhancedQueueExecutor.java:1538)\n    at org.jboss.threads.DelegatingRunnable.run(DelegatingRunnable.java:29)\n    at org.jboss.threads.ThreadLocalResettingRunnable.run(ThreadLocalResettingRunnable.java:29)\n    at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)\n    at java.base/java.lang.Thread.run(Thread.java:829)\nCaused by: java.nio.file.NoSuchFileException: C:\\Users\\XXX\\AppData\\Local\\Temp\\uploads\\resteasy-reactive5082349700154976184upload -&gt; tmpstorage\\sessions\\7577918012706382072813560817.tmp\n    at java.base/sun.nio.fs.WindowsException.translateToIOException(WindowsException.java:85)\n    at java.base/sun.nio.fs.WindowsException.rethrowAsIOException(WindowsException.java:103)\n    at java.base/sun.nio.fs.WindowsFileCopy.copy(WindowsFileCopy.java:202)\n    at java.base/sun.nio.fs.WindowsFileSystemProvider.copy(WindowsFileSystemProvider.java:283)\n    at java.base/java.nio.file.Files.copy(Files.java:1295)\n    at com.xxx.tpu.quarkus.tag.TagFilesController.uploadTagFile(TagFilesController.java:38)\n    ... 11 more\n</code></pre>\n<p>Therefore I set a breakpoint in my controller method and got this from my debugger:</p>\n<p><a href=\"https://i.stack.imgur.com/3MIhy.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/3MIhy.png\" alt=\"enter image description here\" /></a></p>\n<p>I don't understand what is wrong and why my fileUpload is not containing my file. What am I doing wrong here?</p>\n<p>You can find a minimal reproducible example here: <a href=\"https://github.com/LocutusV0nB0rg/QuarkusFileUpload/tree/master\" rel=\"nofollow noreferrer\">https://github.com/LocutusV0nB0rg/QuarkusFileUpload/tree/master</a></p>\n<p>EDIT:</p>\n<p>I dug a bit more and it seems the file is being transmitted correctly. However, I cannot access it.</p>\n<p><a href=\"https://i.stack.imgur.com/TvRsA.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/TvRsA.png\" alt=\"enter image description here\" /></a></p>\n<p>This file does contain the data of the file I transmitted in the test, I just cannot access it. So I guess the test is written correctly, but the endpoint has to access the file in some different way</p>\n"},{"tags":["java","tomcat","ssl-certificate","tomcat8","keytool"],"answers":[{"tags":[],"owner":{"account_id":71739,"reputation":307143,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1491352628,"creation_date":1491350469,"answer_id":43219703,"question_id":43219473,"body_markdown":"    &lt;Certificate certificateKeystoreFile=&quot;D:\\cert.jks&quot; type=&quot;RSA&quot; keystorePass=&quot;123456&quot; /&gt;\r\n\r\nThe probem is here. The keystore type is JKS, not RSA&lt;sup&gt;1&lt;/sup&gt;. The *keypair* type is RSA.\r\n\r\nYou may also have to rename your keypair/certificate entry to &quot;tomcat&quot; or whatever the default is in Tomcat 8, or else tell Tomcat to use the alias &quot;cert&quot; (poor choice).\r\n\r\n1. Because you didn&#39;t specify any other type to the `keytool`.","title":"Certificate configuration on Tomcat","body":"<pre><code>&lt;Certificate certificateKeystoreFile=\"D:\\cert.jks\" type=\"RSA\" keystorePass=\"123456\" /&gt;\n</code></pre>\n\n<p>The probem is here. The keystore type is JKS, not RSA<sup>1</sup>. The <em>keypair</em> type is RSA.</p>\n\n<p>You may also have to rename your keypair/certificate entry to \"tomcat\" or whatever the default is in Tomcat 8, or else tell Tomcat to use the alias \"cert\" (poor choice).</p>\n\n<ol>\n<li>Because you didn't specify any other type to the <code>keytool</code>.</li>\n</ol>\n"},{"tags":[],"owner":{"account_id":7590694,"reputation":1,"user_id":5758460,"display_name":"nh39"},"down_vote_count":2,"up_vote_count":0,"is_accepted":false,"score":-2,"last_activity_date":1491367083,"creation_date":1491367083,"answer_id":43221936,"question_id":43219473,"body_markdown":"FWIW, I can get it to work with the HTTP/1.1 protocol - simpler.\r\n\r\nBasically, replaced\r\n\r\n    &lt;Connector port=&quot;443&quot; protocol=&quot;org.apache.coyote.http11.Http11NioProtocol&quot; maxThreads=&quot;150&quot; SSLEnabled=&quot;true&quot;&gt;\r\n      &lt;SSLHostConfig&gt;\r\n        &lt;Certificate certificateKeystoreFile=&quot;D:\\cert.jks&quot; type=&quot;RSA&quot; keystorePass=&quot;123456&quot; /&gt;\r\n      &lt;/SSLHostConfig&gt;\r\n    &lt;/Connector&gt;\r\n\r\nWith this\r\n\r\n    &lt;Connector port=&quot;443&quot; protocol=&quot;HTTP/1.1&quot;\r\n                   maxThreads=&quot;150&quot; SSLEnabled=&quot;true&quot; scheme=&quot;https&quot; secure=&quot;true&quot; \r\n                   clienAuth=&quot;false&quot; sslProtocol=&quot;TLS&quot; keystoreFile=&quot;/conf/.keystore&quot; keystorePass=&quot;123456&quot; /&gt;\r\n\r\nMoving on and reading more about Tomcat and store type. There&#39;s an interesting thread here: [How to create a BKS (BouncyCastle) format Java Keystore that contains a client certificate chain][1]\r\n\r\n  [1]: https://stackoverflow.com/questions/4065379/how-to-create-a-bks-bouncycastle-format-java-keystore-that-contains-a-client-c","title":"Certificate configuration on Tomcat","body":"<p>FWIW, I can get it to work with the HTTP/1.1 protocol - simpler.</p>\n\n<p>Basically, replaced</p>\n\n<pre><code>&lt;Connector port=\"443\" protocol=\"org.apache.coyote.http11.Http11NioProtocol\" maxThreads=\"150\" SSLEnabled=\"true\"&gt;\n  &lt;SSLHostConfig&gt;\n    &lt;Certificate certificateKeystoreFile=\"D:\\cert.jks\" type=\"RSA\" keystorePass=\"123456\" /&gt;\n  &lt;/SSLHostConfig&gt;\n&lt;/Connector&gt;\n</code></pre>\n\n<p>With this</p>\n\n<pre><code>&lt;Connector port=\"443\" protocol=\"HTTP/1.1\"\n               maxThreads=\"150\" SSLEnabled=\"true\" scheme=\"https\" secure=\"true\" \n               clienAuth=\"false\" sslProtocol=\"TLS\" keystoreFile=\"/conf/.keystore\" keystorePass=\"123456\" /&gt;\n</code></pre>\n\n<p>Moving on and reading more about Tomcat and store type. There's an interesting thread here: <a href=\"https://stackoverflow.com/questions/4065379/how-to-create-a-bks-bouncycastle-format-java-keystore-that-contains-a-client-c\">How to create a BKS (BouncyCastle) format Java Keystore that contains a client certificate chain</a></p>\n"}],"owner":{"account_id":7590694,"reputation":1,"user_id":5758460,"display_name":"nh39"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":8859,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1699941955,"creation_date":1491348985,"question_id":43219473,"body_markdown":"First of all, I know that there similar questions already asked and I tried to follow the suggestions to troubleshoot but haven&#39;t got any luck. So, I&#39;m at the point that I think I&#39;d better off just post for help. Thank you, in advance, for your help.\r\n\r\nQuestion: What am I doing wrong? What/where should I check?\r\n\r\nObjective: I&#39;m trying to set up a certificate on Tomcat. I have Tomcat 8.5, %JAVA_HOME%=&quot;C:\\Program Files\\Java\\jdk1.8.0_121&quot; and a certificate I generated with the following command:\r\n\r\n    keytool -genkeypair -alias cert -keyalg RSA -keysize 2048 -sigalg SHA256withRSA -keypass 123456 -storepass 123456 -keystore d:\\cert.jks\r\n\r\nAnd filled out my name and other information, etc. to generate the key pair.\r\n\r\nI saw many YouTube videos and other instructions mention &quot;genkey&quot; instead &quot;genkeypair&quot; but this option isn&#39;t available on this computer. Anyway, I modified the server.xml file by adding the following:\r\n\r\n    &lt;Connector port=&quot;443&quot; protocol=&quot;org.apache.coyote.http11.Http11NioProtocol&quot; maxThreads=&quot;150&quot; SSLEnabled=&quot;true&quot;&gt;\r\n      &lt;SSLHostConfig&gt;\r\n        &lt;Certificate certificateKeystoreFile=&quot;D:\\cert.jks&quot; type=&quot;RSA&quot; keystorePass=&quot;123456&quot; /&gt;\r\n      &lt;/SSLHostConfig&gt;\r\n    &lt;/Connector&gt;\r\n\r\nExecuting catalina configtest gave me this:\r\n\r\n    04-Apr-2017 19:28:16.271 SEVERE [main] org.apache.coyote.AbstractProtocol.init Failed to initialize end point associated with ProtocolHandler [&quot;https-jsse-nio-443&quot;]\r\n     java.lang.IllegalArgumentException: java.io.IOException: Keystore was tampered with, or password was incorrect\r\n\r\n","title":"Certificate configuration on Tomcat","body":"<p>First of all, I know that there similar questions already asked and I tried to follow the suggestions to troubleshoot but haven't got any luck. So, I'm at the point that I think I'd better off just post for help. Thank you, in advance, for your help.</p>\n\n<p>Question: What am I doing wrong? What/where should I check?</p>\n\n<p>Objective: I'm trying to set up a certificate on Tomcat. I have Tomcat 8.5, %JAVA_HOME%=\"C:\\Program Files\\Java\\jdk1.8.0_121\" and a certificate I generated with the following command:</p>\n\n<pre><code>keytool -genkeypair -alias cert -keyalg RSA -keysize 2048 -sigalg SHA256withRSA -keypass 123456 -storepass 123456 -keystore d:\\cert.jks\n</code></pre>\n\n<p>And filled out my name and other information, etc. to generate the key pair.</p>\n\n<p>I saw many YouTube videos and other instructions mention \"genkey\" instead \"genkeypair\" but this option isn't available on this computer. Anyway, I modified the server.xml file by adding the following:</p>\n\n<pre><code>&lt;Connector port=\"443\" protocol=\"org.apache.coyote.http11.Http11NioProtocol\" maxThreads=\"150\" SSLEnabled=\"true\"&gt;\n  &lt;SSLHostConfig&gt;\n    &lt;Certificate certificateKeystoreFile=\"D:\\cert.jks\" type=\"RSA\" keystorePass=\"123456\" /&gt;\n  &lt;/SSLHostConfig&gt;\n&lt;/Connector&gt;\n</code></pre>\n\n<p>Executing catalina configtest gave me this:</p>\n\n<pre><code>04-Apr-2017 19:28:16.271 SEVERE [main] org.apache.coyote.AbstractProtocol.init Failed to initialize end point associated with ProtocolHandler [\"https-jsse-nio-443\"]\n java.lang.IllegalArgumentException: java.io.IOException: Keystore was tampered with, or password was incorrect\n</code></pre>\n"},{"tags":["python","java","tensorflow","keras","deeplearning4j"],"answers":[{"tags":[],"owner":{"account_id":22630771,"reputation":1022,"user_id":16808166,"display_name":"Andrew-Harelson"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1633210355,"creation_date":1633210355,"answer_id":69420421,"question_id":69420171,"body_markdown":"`deeplearning4j` looks like it does not support defining your loss function as an object. You have to specify it with a string. https://github.com/eclipse/deeplearning4j/issues/8990\r\n\r\nTry changing \r\n```python \r\nmodel.compile(\r\n  optimizer=&#39;adam&#39;,\r\n  loss=tf.losses.SparseCategoricalCrossentropy(from_logits=True),\r\n  metrics=[&#39;accuracy&#39;])\r\n```\r\nto \r\n```python\r\nmodel.compile(\r\n  optimizer=&#39;adam&#39;,\r\n  loss=&#39;sparse_categorical_crossentropy&#39;,\r\n  metrics=[&#39;accuracy&#39;])\r\n```\r\nNote that using this method you cannot set the kwarg `from_logits`. I think this will probably break your model. If that&#39;s the case, you&#39;ll need to file an issue with them because it&#39;s a bug in their library. ","title":"Use in Python trained tensorflow keras model in Java for image recognition","body":"<p><code>deeplearning4j</code> looks like it does not support defining your loss function as an object. You have to specify it with a string. <a href=\"https://github.com/eclipse/deeplearning4j/issues/8990\" rel=\"nofollow noreferrer\">https://github.com/eclipse/deeplearning4j/issues/8990</a></p>\n<p>Try changing</p>\n<pre class=\"lang-py prettyprint-override\"><code>model.compile(\n  optimizer='adam',\n  loss=tf.losses.SparseCategoricalCrossentropy(from_logits=True),\n  metrics=['accuracy'])\n</code></pre>\n<p>to</p>\n<pre class=\"lang-py prettyprint-override\"><code>model.compile(\n  optimizer='adam',\n  loss='sparse_categorical_crossentropy',\n  metrics=['accuracy'])\n</code></pre>\n<p>Note that using this method you cannot set the kwarg <code>from_logits</code>. I think this will probably break your model. If that's the case, you'll need to file an issue with them because it's a bug in their library.</p>\n"},{"tags":[],"owner":{"account_id":6647858,"reputation":3100,"user_id":5131255,"display_name":"Adam Gibson"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1699941449,"creation_date":1633214039,"answer_id":69420755,"question_id":69420171,"body_markdown":"I&#39;m from the deeplearning4j project. From the looks of it,  @Andreas Radauer is correct. This one slipped through the cracks when we were implementing missing import functions. \r\n\r\nFor users willing to do it, it is also possible to register custom layers with model import to work around this. You can use our tensorflow like api (samediff) and define the function that implements this yourself and register it as a layer. If you think that is suitable for your use case then you can see an example here:\r\nhttps://github.com/eclipse/deeplearning4j/blob/master/deeplearning4j/deeplearning4j-modelimport/src/test/java/org/deeplearning4j/nn/modelimport/keras/e2e/KerasCustomLossTest.java\r\n\r\nOtherwise, we&#39;ll look in to adding the missing functions. Most of the keras work has focused on the convolution layers and ensuring we get those right.","title":"Use in Python trained tensorflow keras model in Java for image recognition","body":"<p>I'm from the deeplearning4j project. From the looks of it,  @Andreas Radauer is correct. This one slipped through the cracks when we were implementing missing import functions.</p>\n<p>For users willing to do it, it is also possible to register custom layers with model import to work around this. You can use our tensorflow like api (samediff) and define the function that implements this yourself and register it as a layer. If you think that is suitable for your use case then you can see an example here:\n<a href=\"https://github.com/eclipse/deeplearning4j/blob/master/deeplearning4j/deeplearning4j-modelimport/src/test/java/org/deeplearning4j/nn/modelimport/keras/e2e/KerasCustomLossTest.java\" rel=\"nofollow noreferrer\">https://github.com/eclipse/deeplearning4j/blob/master/deeplearning4j/deeplearning4j-modelimport/src/test/java/org/deeplearning4j/nn/modelimport/keras/e2e/KerasCustomLossTest.java</a></p>\n<p>Otherwise, we'll look in to adding the missing functions. Most of the keras work has focused on the convolution layers and ensuring we get those right.</p>\n"}],"owner":{"account_id":4645073,"reputation":1083,"user_id":3763679,"display_name":"Andreas Radauer"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":460,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":2,"score":3,"last_activity_date":1699941524,"creation_date":1633207791,"question_id":69420171,"body_markdown":"I use keras in Python to do my first steps in neuronal networks.\r\nI trained a model to recognize small 30px x 30px images.\r\n\r\n    import tensorflow as tf\r\n    import matplotlib.pyplot as plt\r\n    from tensorflow import keras\r\n    from tensorflow.keras import layers\r\n    from tensorflow.python.keras import Sequential\r\n    \r\n    train_ds = keras.preprocessing.image_dataset_from_directory(&#39;images&#39;, validation_split=0.2,\r\n      subset=&quot;training&quot;, seed=123, batch_size=32, image_size=(30, 30))\r\n    val_ds  = keras.preprocessing.image_dataset_from_directory(&#39;images&#39;, validation_split=0.2,\r\n      subset=&quot;validation&quot;, seed=123, batch_size=32, image_size=(30, 30))\r\n    \r\n    class_names = train_ds.class_names\r\n    print(class_names)\r\n    \r\n    AUTOTUNE = tf.data.experimental.AUTOTUNE\r\n    \r\n    train_ds = train_ds.cache().prefetch(buffer_size=AUTOTUNE)\r\n    val_ds = val_ds.cache().prefetch(buffer_size=AUTOTUNE)\r\n    num_classes = 13\r\n    \r\n    model = Sequential([\r\n      layers.experimental.preprocessing.Rescaling(1./255, input_shape=(30, 30, 3)),\r\n      layers.Conv2D(10, 3, padding=&#39;same&#39;, activation=&#39;relu&#39;),\r\n      layers.MaxPooling2D(),\r\n      layers.Conv2D(15, 3, padding=&#39;same&#39;, activation=&#39;relu&#39;),\r\n      layers.MaxPooling2D(),\r\n      layers.Conv2D(20, 3, padding=&#39;same&#39;, activation=&#39;relu&#39;),\r\n      layers.MaxPooling2D(),\r\n      layers.Dropout(0.2),\r\n      layers.Flatten(),\r\n      layers.Dense(64, activation=&#39;relu&#39;),\r\n      layers.Dense(num_classes)\r\n    ])\r\n    \r\n    model.compile(\r\n      optimizer=&#39;adam&#39;,\r\n      loss=tf.losses.SparseCategoricalCrossentropy(from_logits=True),\r\n      metrics=[&#39;accuracy&#39;])\r\n    \r\n    model.summary()\r\n    \r\n    epochs = 50\r\n    \r\n    history = model.fit(\r\n      train_ds,\r\n      validation_data=val_ds,\r\n      epochs=epochs\r\n    )\r\n    \r\n    model.save(&quot;model.h5&quot;)\r\n\r\nI&#39;m pretty happy with that because I have a val_accuracy of 0.9912.\r\n\r\nBut now I want to use the model in Java to categorize buffered images:\r\n\r\n    public class Test\r\n    {\r\n        public static void main(String[] args) throws Exception\r\n        {\r\n            MultiLayerNetwork model = KerasModelImport.importKerasSequentialModelAndWeights(&quot;ki.h5&quot;);\r\n            BufferedImage img = ImageIO.read(new File(&quot;testImage.png&quot;));\r\n            ImageLoader loader = new ImageLoader(30, 30, 3);\r\n            INDArray input = loader.asMatrix(img);\r\n            INDArray output = model.output(input);\r\n            System.out.println(&quot;Test &quot; + output);\r\n        }\r\n    }\r\n\r\nHere I receive this error:\r\n\r\n&gt; Exception in thread &quot;main&quot;\r\n&gt; org.deeplearning4j.nn.modelimport.keras.exceptions.UnsupportedKerasConfigurationException:\r\n&gt; Unsupported keras layer type Rescaling. Please file an issue at\r\n&gt; https://github.com/eclipse/deeplearning4j/issues.\r\n\r\nI got it working in Python by removing the Rescaling Layer. But then I got the exception\r\n\r\nUnknown Keras loss function sparsecategoricalcrossentropy. Please file an issue at https://github.com/eclipse/deeplearning4j/issues.\r\n\r\n\r\nI&#39;m open to any suggestions. Is there a better way to usethe model from Java?\r\n\r\nOr should I change something in my Python file or how I save the model?","title":"Use in Python trained tensorflow keras model in Java for image recognition","body":"<p>I use keras in Python to do my first steps in neuronal networks.\nI trained a model to recognize small 30px x 30px images.</p>\n<pre><code>import tensorflow as tf\nimport matplotlib.pyplot as plt\nfrom tensorflow import keras\nfrom tensorflow.keras import layers\nfrom tensorflow.python.keras import Sequential\n\ntrain_ds = keras.preprocessing.image_dataset_from_directory('images', validation_split=0.2,\n  subset=&quot;training&quot;, seed=123, batch_size=32, image_size=(30, 30))\nval_ds  = keras.preprocessing.image_dataset_from_directory('images', validation_split=0.2,\n  subset=&quot;validation&quot;, seed=123, batch_size=32, image_size=(30, 30))\n\nclass_names = train_ds.class_names\nprint(class_names)\n\nAUTOTUNE = tf.data.experimental.AUTOTUNE\n\ntrain_ds = train_ds.cache().prefetch(buffer_size=AUTOTUNE)\nval_ds = val_ds.cache().prefetch(buffer_size=AUTOTUNE)\nnum_classes = 13\n\nmodel = Sequential([\n  layers.experimental.preprocessing.Rescaling(1./255, input_shape=(30, 30, 3)),\n  layers.Conv2D(10, 3, padding='same', activation='relu'),\n  layers.MaxPooling2D(),\n  layers.Conv2D(15, 3, padding='same', activation='relu'),\n  layers.MaxPooling2D(),\n  layers.Conv2D(20, 3, padding='same', activation='relu'),\n  layers.MaxPooling2D(),\n  layers.Dropout(0.2),\n  layers.Flatten(),\n  layers.Dense(64, activation='relu'),\n  layers.Dense(num_classes)\n])\n\nmodel.compile(\n  optimizer='adam',\n  loss=tf.losses.SparseCategoricalCrossentropy(from_logits=True),\n  metrics=['accuracy'])\n\nmodel.summary()\n\nepochs = 50\n\nhistory = model.fit(\n  train_ds,\n  validation_data=val_ds,\n  epochs=epochs\n)\n\nmodel.save(&quot;model.h5&quot;)\n</code></pre>\n<p>I'm pretty happy with that because I have a val_accuracy of 0.9912.</p>\n<p>But now I want to use the model in Java to categorize buffered images:</p>\n<pre><code>public class Test\n{\n    public static void main(String[] args) throws Exception\n    {\n        MultiLayerNetwork model = KerasModelImport.importKerasSequentialModelAndWeights(&quot;ki.h5&quot;);\n        BufferedImage img = ImageIO.read(new File(&quot;testImage.png&quot;));\n        ImageLoader loader = new ImageLoader(30, 30, 3);\n        INDArray input = loader.asMatrix(img);\n        INDArray output = model.output(input);\n        System.out.println(&quot;Test &quot; + output);\n    }\n}\n</code></pre>\n<p>Here I receive this error:</p>\n<blockquote>\n<p>Exception in thread &quot;main&quot;\norg.deeplearning4j.nn.modelimport.keras.exceptions.UnsupportedKerasConfigurationException:\nUnsupported keras layer type Rescaling. Please file an issue at\n<a href=\"https://github.com/eclipse/deeplearning4j/issues\" rel=\"nofollow noreferrer\">https://github.com/eclipse/deeplearning4j/issues</a>.</p>\n</blockquote>\n<p>I got it working in Python by removing the Rescaling Layer. But then I got the exception</p>\n<p>Unknown Keras loss function sparsecategoricalcrossentropy. Please file an issue at <a href=\"https://github.com/eclipse/deeplearning4j/issues\" rel=\"nofollow noreferrer\">https://github.com/eclipse/deeplearning4j/issues</a>.</p>\n<p>I'm open to any suggestions. Is there a better way to usethe model from Java?</p>\n<p>Or should I change something in my Python file or how I save the model?</p>\n"},{"tags":["java","json","jsonpath"],"answers":[{"tags":[],"owner":{"account_id":29897314,"reputation":36,"user_id":22911863,"display_name":"softwareguy"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1699940443,"creation_date":1699940443,"answer_id":77478377,"question_id":77478197,"body_markdown":"Try using some external library like jackson for this,\r\n\r\nYou can use ObjectMapper class, something like this below to convert it to map:\r\n\r\n    public static Map&lt;String, Object&gt; convert(JsonPath jsonPath) {\r\n        ObjectMapper mapper = new ObjectMapper();\r\n        return mapper.convertValue(jsonPath.read(), Map.class);\r\n    }","title":"How to convert response getting from an api in JsonPath object to a map or to get the response status code from the response?","body":"<p>Try using some external library like jackson for this,</p>\n<p>You can use ObjectMapper class, something like this below to convert it to map:</p>\n<pre><code>public static Map&lt;String, Object&gt; convert(JsonPath jsonPath) {\n    ObjectMapper mapper = new ObjectMapper();\n    return mapper.convertValue(jsonPath.read(), Map.class);\n}\n</code></pre>\n"}],"owner":{"account_id":27675583,"reputation":23,"user_id":21125478,"display_name":"piya"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":45,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77478377,"answer_count":1,"score":0,"last_activity_date":1699940443,"creation_date":1699936138,"question_id":77478197,"body_markdown":"I am getting a response from an api using this code\r\n  \r\n    JsonPath jsonPath = new JsonPath(resp.asString());\r\n\r\ni want to convert this jsonPath object to a map, or get the response status code before this step and add that code to the map after conversion. With this step i am only getting the response body from the api. \r\nPlease help\r\nThanks.","title":"How to convert response getting from an api in JsonPath object to a map or to get the response status code from the response?","body":"<p>I am getting a response from an api using this code</p>\n<pre><code>JsonPath jsonPath = new JsonPath(resp.asString());\n</code></pre>\n<p>i want to convert this jsonPath object to a map, or get the response status code before this step and add that code to the map after conversion. With this step i am only getting the response body from the api.\nPlease help\nThanks.</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":251706,"reputation":5300,"user_id":529282,"display_name":"Martheen"},"score":0,"creation_date":1699938238,"post_id":77478254,"comment_id":136590466,"body_markdown":"In your current code, getWordFrequency is called *immediately* after each word, you should only call it after all words has been entered.","body":"In your current code, getWordFrequency is called <i>immediately</i> after each word, you should only call it after all words has been entered."},{"owner":{"account_id":788777,"reputation":28977,"user_id":857132,"accept_rate":69,"display_name":"John3136"},"score":1,"creation_date":1699938935,"post_id":77478254,"comment_id":136590521,"body_markdown":"Your whole approach is &quot;odd&quot; you read every word into an array and then get the frequency for every word. Since you expect the number of unique words to be less than the total you need to take that into account. An obvious approach would be a map of word-&gt;frequency","body":"Your whole approach is &quot;odd&quot; you read every word into an array and then get the frequency for every word. Since you expect the number of unique words to be less than the total you need to take that into account. An obvious approach would be a map of word-&gt;frequency"}],"answers":[{"tags":[],"owner":{"account_id":23740623,"reputation":1,"user_id":17758716,"display_name":"Reilas"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1699940337,"creation_date":1699939877,"answer_id":77478348,"question_id":77478254,"body_markdown":"&gt; _&quot;... I am doing an assignment and need to build a word frequency calculator. The first integer is the total amount of words for the input. ...&quot;_\r\n\r\nHere is an example.\r\n\r\n```java\r\nScanner in = new Scanner(System.in);\r\nMap&lt;String, Integer&gt; m = new TreeMap&lt;&gt;();\r\nfor (int i = 0, n = in.nextInt(); i &lt; n; i++)\r\n    m.merge(in.next().toLowerCase(), 1, (a, b) -&gt; ++a);\r\n```\r\n\r\nOutput\r\n\r\n```none\r\n5 hey Hi Mark hi mark\r\n{hey=1, hi=2, mark=2}\r\n```\r\n\r\n&gt; _&quot;... My Output is: hey 1 Hi 1 Mark 1 hi 2 mark 2 ...&quot;_\r\n\r\nThe reason this is happening is because you&#39;re checking _f_ upon each iteration.\r\n\r\nPopulate _f_ fully, and then traverse, and invoke _getWordFrequency_, for each.\r\n\r\n```java\r\nfor (i = 0; i &lt; size; i++) {\r\n    f[i] = scnr.next();\r\n}\r\nfor(i = 0; i &lt; size; i++){\r\n    System.out.println(f[i]+ &quot; &quot; + getWordFrequency(f, size, f[i]));\r\n}\r\n```\r\n\r\nOutput\r\n\r\n```none\r\n5 hey Hi Mark hi mark\r\nhey 1\r\nHi 2\r\nMark 2\r\nhi 2\r\nmark 2\r\n```\r\n\r\nAlternately, you can utilize a _[List](https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/List.html)_, and the _[Collections#frequency](https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/Collections.html#frequency(java.util.Collection,java.lang.Object))_ method.\r\n\r\n```java\r\nScanner in = new Scanner(System.in);\r\nList&lt;String&gt; l = new ArrayList&lt;&gt;();\r\nfor (int i = 0, n = in.nextInt(); i &lt; n; i++)\r\n    l.add(in.next().toLowerCase());\r\nfor (String s : l)\r\n    System.out.printf(&quot;%s %s%n&quot;, Collections.frequency(l, s), s);\r\n```\r\n\r\nOutput\r\n\r\n```none\r\n5 hey Hi Mark hi mark\r\n1 hey\r\n2 hi\r\n2 mark\r\n2 hi\r\n2 mark\r\n```","title":"Do not know how to make count consistent across numbers","body":"<blockquote>\n<p><em>&quot;... I am doing an assignment and need to build a word frequency calculator. The first integer is the total amount of words for the input. ...&quot;</em></p>\n</blockquote>\n<p>Here is an example.</p>\n<pre class=\"lang-java prettyprint-override\"><code>Scanner in = new Scanner(System.in);\nMap&lt;String, Integer&gt; m = new TreeMap&lt;&gt;();\nfor (int i = 0, n = in.nextInt(); i &lt; n; i++)\n    m.merge(in.next().toLowerCase(), 1, (a, b) -&gt; ++a);\n</code></pre>\n<p>Output</p>\n<pre class=\"lang-none prettyprint-override\"><code>5 hey Hi Mark hi mark\n{hey=1, hi=2, mark=2}\n</code></pre>\n<blockquote>\n<p><em>&quot;... My Output is: hey 1 Hi 1 Mark 1 hi 2 mark 2 ...&quot;</em></p>\n</blockquote>\n<p>The reason this is happening is because you're checking <em>f</em> upon each iteration.</p>\n<p>Populate <em>f</em> fully, and then traverse, and invoke <em>getWordFrequency</em>, for each.</p>\n<pre class=\"lang-java prettyprint-override\"><code>for (i = 0; i &lt; size; i++) {\n    f[i] = scnr.next();\n}\nfor(i = 0; i &lt; size; i++){\n    System.out.println(f[i]+ &quot; &quot; + getWordFrequency(f, size, f[i]));\n}\n</code></pre>\n<p>Output</p>\n<pre class=\"lang-none prettyprint-override\"><code>5 hey Hi Mark hi mark\nhey 1\nHi 2\nMark 2\nhi 2\nmark 2\n</code></pre>\n<p>Alternately, you can utilize a <em><a href=\"https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/List.html\" rel=\"nofollow noreferrer\">List</a></em>, and the <em><a href=\"https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/Collections.html#frequency(java.util.Collection,java.lang.Object)\" rel=\"nofollow noreferrer\">Collections#frequency</a></em> method.</p>\n<pre class=\"lang-java prettyprint-override\"><code>Scanner in = new Scanner(System.in);\nList&lt;String&gt; l = new ArrayList&lt;&gt;();\nfor (int i = 0, n = in.nextInt(); i &lt; n; i++)\n    l.add(in.next().toLowerCase());\nfor (String s : l)\n    System.out.printf(&quot;%s %s%n&quot;, Collections.frequency(l, s), s);\n</code></pre>\n<p>Output</p>\n<pre class=\"lang-none prettyprint-override\"><code>5 hey Hi Mark hi mark\n1 hey\n2 hi\n2 mark\n2 hi\n2 mark\n</code></pre>\n"}],"owner":{"account_id":29704556,"reputation":7,"user_id":22765726,"display_name":"PimpShrimp"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":62,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1699940337,"creation_date":1699937715,"question_id":77478254,"body_markdown":"I am doing an assignment and need to build a word frequency calculator. The first integer is the total amount of words for the input.\r\n\r\n\r\nEx: If the input is:\r\n\r\n5 hey Hi Mark hi mark\r\nExpected output is:\r\n\r\nhey 1\r\nHi 2\r\nMark 2\r\nhi 2\r\nmark 2\r\n\r\nMy Output is: \r\nhey 1\r\nHi 1\r\nMark 1\r\nhi 2\r\nmark 2\r\n\r\n    import java.util.Scanner;\r\n\r\n    public class LabProgram {\r\n\r\n       public static int getWordFrequency(String[] f, int size, String c){\r\n          int count = 0;\r\n          for (int j = 0; j &lt; f.length; j++) {\r\n              if (f[j] != null &amp;&amp; f[j].equalsIgnoreCase(c)) {\r\n                  count++;\r\n              }\r\n          }\r\n          return count;\r\n       }\r\n\r\n       public static void main(String[] args) {\r\n          Scanner scnr = new Scanner(System.in);\r\n          int size = scnr.nextInt();\r\n          String c;\r\n          int i;\r\n          String [] f = new String[size];\r\n          int [] v = new int[size];\r\n          for (i = 0; i &lt; size; i++) {\r\n              f[i] = scnr.next();\r\n              c = f[i];\r\n              v[i] = getWordFrequency(f, size, c);\r\n          }\r\n          for(i = 0; i &lt; size; i++){\r\n             System.out.println(f[i]+ &quot; &quot; + v[i]);\r\n              }\r\n           }\r\n        }","title":"Do not know how to make count consistent across numbers","body":"<p>I am doing an assignment and need to build a word frequency calculator. The first integer is the total amount of words for the input.</p>\n<p>Ex: If the input is:</p>\n<p>5 hey Hi Mark hi mark\nExpected output is:</p>\n<p>hey 1\nHi 2\nMark 2\nhi 2\nmark 2</p>\n<p>My Output is:\nhey 1\nHi 1\nMark 1\nhi 2\nmark 2</p>\n<pre><code>import java.util.Scanner;\n\npublic class LabProgram {\n\n   public static int getWordFrequency(String[] f, int size, String c){\n      int count = 0;\n      for (int j = 0; j &lt; f.length; j++) {\n          if (f[j] != null &amp;&amp; f[j].equalsIgnoreCase(c)) {\n              count++;\n          }\n      }\n      return count;\n   }\n\n   public static void main(String[] args) {\n      Scanner scnr = new Scanner(System.in);\n      int size = scnr.nextInt();\n      String c;\n      int i;\n      String [] f = new String[size];\n      int [] v = new int[size];\n      for (i = 0; i &lt; size; i++) {\n          f[i] = scnr.next();\n          c = f[i];\n          v[i] = getWordFrequency(f, size, c);\n      }\n      for(i = 0; i &lt; size; i++){\n         System.out.println(f[i]+ &quot; &quot; + v[i]);\n          }\n       }\n    }\n</code></pre>\n"},{"tags":["security","java-8","saxparser","xalan","javax"],"answers":[{"tags":[],"owner":{"account_id":2824002,"reputation":21,"user_id":2427007,"display_name":"Dan"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1560941143,"creation_date":1560941143,"answer_id":56665850,"question_id":50234862,"body_markdown":"I have also failed to call method &quot;setFeature&quot; of TransformerFactoryImpl. And I found other way to set feature by using XMLReader as below:\r\n\r\n    XMLReader reader = XMLReaderFactory.createXMLReader();\r\n    reader.setFeature(&quot;http://apache.org/xml/features/disallow-doctype-decl&quot;, true);\r\n    \r\n    Source xmlSource = new SAXSource(reader, new InputSource(new FileInputStream(xmlFile)));\r\n    Transformer transformer = TransformerFactory.newInstance().newTransformer();\r\n    StreamResult result = new StreamResult(new StringWriter());\r\n    transformer.transform(xmlSource, result);\r\n\r\nAfter that setting, if the input has DOCTYPE tag inside, we will have following exception:\r\n\r\n    javax.xml.transform.TransformerException: org.xml.sax.SAXParseException; lineNumber: 2; columnNumber: 10; DOCTYPE is disallowed when the feature &quot;http://apache.org/xml/features/disallow-doctype-decl&quot; set to true.\r\n    \tat com.sun.org.apache.xalan.internal.xsltc.trax.TransformerImpl.transform(TransformerImpl.java:749)\r\n    \tat com.sun.org.apache.xalan.internal.xsltc.trax.TransformerImpl.transform(TransformerImpl.java:351)\r\n    \tat ch.ofwi.pa.webservice.provideraccounting.impl.handler.SchemaValidationHandler.main(SchemaValidationHandler.java:227)\r\n    Caused by: org.xml.sax.SAXParseException; lineNumber: 2; columnNumber: 10; DOCTYPE is disallowed when the feature &quot;http://apache.org/xml/features/disallow-doctype-decl&quot; set to true.\r\n    \tat com.sun.org.apache.xerces.internal.parsers.AbstractSAXParser.parse(AbstractSAXParser.java:1239)\r\n    \tat com.sun.org.apache.xalan.internal.xsltc.trax.TransformerImpl.transformIdentity(TransformerImpl.java:668)\r\n    \tat com.sun.org.apache.xalan.internal.xsltc.trax.TransformerImpl.transform(TransformerImpl.java:737)\r\n\t\r\nHope that it&#39;s helpful for you.","title":"TransformerConfigurationException: Cannot set the feature for Transformer","body":"<p>I have also failed to call method \"setFeature\" of TransformerFactoryImpl. And I found other way to set feature by using XMLReader as below:</p>\n\n<pre><code>XMLReader reader = XMLReaderFactory.createXMLReader();\nreader.setFeature(\"http://apache.org/xml/features/disallow-doctype-decl\", true);\n\nSource xmlSource = new SAXSource(reader, new InputSource(new FileInputStream(xmlFile)));\nTransformer transformer = TransformerFactory.newInstance().newTransformer();\nStreamResult result = new StreamResult(new StringWriter());\ntransformer.transform(xmlSource, result);\n</code></pre>\n\n<p>After that setting, if the input has DOCTYPE tag inside, we will have following exception:</p>\n\n<pre><code>javax.xml.transform.TransformerException: org.xml.sax.SAXParseException; lineNumber: 2; columnNumber: 10; DOCTYPE is disallowed when the feature \"http://apache.org/xml/features/disallow-doctype-decl\" set to true.\n    at com.sun.org.apache.xalan.internal.xsltc.trax.TransformerImpl.transform(TransformerImpl.java:749)\n    at com.sun.org.apache.xalan.internal.xsltc.trax.TransformerImpl.transform(TransformerImpl.java:351)\n    at ch.ofwi.pa.webservice.provideraccounting.impl.handler.SchemaValidationHandler.main(SchemaValidationHandler.java:227)\nCaused by: org.xml.sax.SAXParseException; lineNumber: 2; columnNumber: 10; DOCTYPE is disallowed when the feature \"http://apache.org/xml/features/disallow-doctype-decl\" set to true.\n    at com.sun.org.apache.xerces.internal.parsers.AbstractSAXParser.parse(AbstractSAXParser.java:1239)\n    at com.sun.org.apache.xalan.internal.xsltc.trax.TransformerImpl.transformIdentity(TransformerImpl.java:668)\n    at com.sun.org.apache.xalan.internal.xsltc.trax.TransformerImpl.transform(TransformerImpl.java:737)\n</code></pre>\n\n<p>Hope that it's helpful for you.</p>\n"}],"owner":{"account_id":11037988,"reputation":848,"user_id":8107013,"display_name":"Manjunath H M"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2497,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":1,"score":3,"last_activity_date":1699939791,"creation_date":1525786240,"question_id":50234862,"body_markdown":"i&#39;m getting below error while setting the feature for TransformerFactory.\r\n\r\n\r\n    javax.xml.transform.TransformerConfigurationException: Cannot set the feature &#39;http://apache.org/xml/features/disallow-doctype-decl&#39; on this TransformerFactory.\r\n            at org.apache.xalan.processor.TransformerFactoryImpl.setFeature(TransformerFactoryImpl.java:416)\r\n    \r\n\r\n\r\nCode snippet is::\r\n\r\n    public static TransformerFactory mytFactory;\r\n    \r\n    mytFactory = TransformerFactory.newInstance();\r\n    mytFactory.setFeature(“http://apache.org/xml/features/disallow-doctype-decl“, true);\r\n\r\nplease help me to solve this issue.\r\n","title":"TransformerConfigurationException: Cannot set the feature for Transformer","body":"<p>i'm getting below error while setting the feature for TransformerFactory.</p>\n\n<pre><code>javax.xml.transform.TransformerConfigurationException: Cannot set the feature 'http://apache.org/xml/features/disallow-doctype-decl' on this TransformerFactory.\n        at org.apache.xalan.processor.TransformerFactoryImpl.setFeature(TransformerFactoryImpl.java:416)\n</code></pre>\n\n<p>Code snippet is::</p>\n\n<pre><code>public static TransformerFactory mytFactory;\n\nmytFactory = TransformerFactory.newInstance();\nmytFactory.setFeature(“http://apache.org/xml/features/disallow-doctype-decl“, true);\n</code></pre>\n\n<p>please help me to solve this issue.</p>\n"},{"tags":["java","null","target","mapstruct"],"comments":[{"owner":{"account_id":1128956,"reputation":19765,"user_id":1115491,"display_name":"Filip"},"score":0,"creation_date":1508526641,"post_id":46669594,"comment_id":80659021,"body_markdown":"Did the answer in the linked issue solved your problem?","body":"Did the answer in the linked issue solved your problem?"},{"owner":{"account_id":6422313,"reputation":921,"user_id":4978689,"accept_rate":71,"display_name":"mindOf_L"},"score":0,"creation_date":1608747937,"post_id":46669594,"comment_id":115675732,"body_markdown":"For me it works as explained in the link provided in the issue/question.","body":"For me it works as explained in the link provided in the issue/question."}],"answers":[{"tags":[],"owner":{"account_id":12046249,"reputation":479,"user_id":8811143,"display_name":"Alex"},"down_vote_count":0,"up_vote_count":34,"is_accepted":false,"score":34,"last_activity_date":1599297582,"creation_date":1599296116,"answer_id":63752137,"question_id":46669594,"body_markdown":"    @Mapper( nullValuePropertyMappingStrategy = NullValuePropertyMappingStrategy.IGNORE )","title":"Map struct : When source is null, target should NOT be set to null","body":"<pre><code>@Mapper( nullValuePropertyMappingStrategy = NullValuePropertyMappingStrategy.IGNORE )\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2557291,"reputation":945,"user_id":2218992,"accept_rate":100,"display_name":"andreyro"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1633514221,"creation_date":1633514221,"answer_id":69463526,"question_id":46669594,"body_markdown":"For me it worked like this:\r\n\r\n    @Mapper(nullValueMappingStrategy =  NullValueMappingStrategy.RETURN_DEFAULT)\r\n    public interface MyMapper {\r\n    ...\r\n    }","title":"Map struct : When source is null, target should NOT be set to null","body":"<p>For me it worked like this:</p>\n<pre><code>@Mapper(nullValueMappingStrategy =  NullValueMappingStrategy.RETURN_DEFAULT)\npublic interface MyMapper {\n...\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1426585,"reputation":2315,"user_id":1349927,"accept_rate":62,"display_name":"tak3shi"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1668074558,"creation_date":1668074558,"answer_id":74387202,"question_id":46669594,"body_markdown":"For me only this one works, as explained here: https://github.com/mapstruct/mapstruct/issues/649\r\n\r\n    @Mapper( nullValueCheckStrategy = NullValueCheckStrategy.ALWAYS )","title":"Map struct : When source is null, target should NOT be set to null","body":"<p>For me only this one works, as explained here: <a href=\"https://github.com/mapstruct/mapstruct/issues/649\" rel=\"nofollow noreferrer\">https://github.com/mapstruct/mapstruct/issues/649</a></p>\n<pre><code>@Mapper( nullValueCheckStrategy = NullValueCheckStrategy.ALWAYS )\n</code></pre>\n"},{"tags":[],"owner":{"account_id":25091291,"reputation":11,"user_id":19701697,"display_name":"PureTruth"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1687613009,"creation_date":1687613009,"answer_id":76546265,"question_id":46669594,"body_markdown":"This worked for me:\r\n\r\n    @BeanMapping(nullValuePropertyMappingStrategy =  NullValuePropertyMappingStrategy.IGNORE)\r\n    void updateProduct(@MappingTarget Product entity, ProductRequestDto dto);\r\n@Mapping annotation requires &quot;target&quot; option in current (1.5.5.Final) MapStruct release.\r\n\r\nThanks for @tak3shi link on github discussion!","title":"Map struct : When source is null, target should NOT be set to null","body":"<p>This worked for me:</p>\n<pre><code>@BeanMapping(nullValuePropertyMappingStrategy =  NullValuePropertyMappingStrategy.IGNORE)\nvoid updateProduct(@MappingTarget Product entity, ProductRequestDto dto);\n</code></pre>\n<p>@Mapping annotation requires &quot;target&quot; option in current (1.5.5.Final) MapStruct release.</p>\n<p>Thanks for @tak3shi link on github discussion!</p>\n"},{"tags":[],"owner":{"account_id":13133235,"reputation":26,"user_id":9487135,"display_name":"apercova"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1699938446,"creation_date":1699938446,"answer_id":77478288,"question_id":46669594,"body_markdown":"I&#39;m using Mapstruct `1.5.5.Final`\r\n\r\nYou can use `NullValuePropertyMappingStrategy.IGNORE` at mapper level to affect all your mapping methods:\r\n```\r\n    @Mapper(\r\n        nullValuePropertyMappingStrategy = NullValuePropertyMappingStrategy.IGNORE\r\n    )\r\n    public interface MyMapper {..}\r\n```\r\n\r\nIf you want just to override the mapping for a single value, you can use `NullValuePropertyMappingStrategy.IGNORE` at mapping level and define a custom mapping method:\r\n```\r\n    @Mappings({\r\n        @Mapping(target = &quot;json&quot;, source = &quot;json&quot;, \r\n                 qualifiedByName = &quot;jsonCustomMapper&quot;, \r\n                 nullValueCheckStrategy = NullValueCheckStrategy.ON_IMPLICIT_CONVERSION)\r\n    })\r\n    Target target(Source source);\r\n    \r\n    ...\r\n\r\n    @Named(&quot;jsonCustomMapper&quot;)\r\n    default String jsonCustomMapper(String json) {\r\n        // Define empty json for null or empty json string\r\n        return (json == null || json.trim().isEmpty()) ? &quot;{}&quot; :json;\r\n    }\r\n\r\n```\r\nNote that `ON_IMPLICIT_CONVERSION` does not affect custom mapping methods.\r\nhttps://mapstruct.org/documentation/stable/api/org/mapstruct/NullValueCheckStrategy.html#ON_IMPLICIT_CONVERSION\r\n\r\n\r\nHope this is useful for you.","title":"Map struct : When source is null, target should NOT be set to null","body":"<p>I'm using Mapstruct <code>1.5.5.Final</code></p>\n<p>You can use <code>NullValuePropertyMappingStrategy.IGNORE</code> at mapper level to affect all your mapping methods:</p>\n<pre><code>    @Mapper(\n        nullValuePropertyMappingStrategy = NullValuePropertyMappingStrategy.IGNORE\n    )\n    public interface MyMapper {..}\n</code></pre>\n<p>If you want just to override the mapping for a single value, you can use <code>NullValuePropertyMappingStrategy.IGNORE</code> at mapping level and define a custom mapping method:</p>\n<pre><code>    @Mappings({\n        @Mapping(target = &quot;json&quot;, source = &quot;json&quot;, \n                 qualifiedByName = &quot;jsonCustomMapper&quot;, \n                 nullValueCheckStrategy = NullValueCheckStrategy.ON_IMPLICIT_CONVERSION)\n    })\n    Target target(Source source);\n    \n    ...\n\n    @Named(&quot;jsonCustomMapper&quot;)\n    default String jsonCustomMapper(String json) {\n        // Define empty json for null or empty json string\n        return (json == null || json.trim().isEmpty()) ? &quot;{}&quot; :json;\n    }\n\n</code></pre>\n<p>Note that <code>ON_IMPLICIT_CONVERSION</code> does not affect custom mapping methods.\n<a href=\"https://mapstruct.org/documentation/stable/api/org/mapstruct/NullValueCheckStrategy.html#ON_IMPLICIT_CONVERSION\" rel=\"nofollow noreferrer\">https://mapstruct.org/documentation/stable/api/org/mapstruct/NullValueCheckStrategy.html#ON_IMPLICIT_CONVERSION</a></p>\n<p>Hope this is useful for you.</p>\n"}],"owner":{"account_id":11870292,"reputation":249,"user_id":8686695,"display_name":"Malathi Damodaran"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":47935,"favorite_count":0,"down_vote_count":0,"up_vote_count":17,"answer_count":5,"score":17,"last_activity_date":1699938446,"creation_date":1507646584,"question_id":46669594,"body_markdown":"I am trying to map nested properties using mapstruct 1.2.0.CR2. \r\n(Example map _customer.address.houseNumber_ to  _userDTO.homeDTO.addressDTO.houseNo_ ).\r\n\r\n**Expectation :** I do not want to set the  addressDTO to null when  customer.address is null.    Since addressDTO contains  &quot;countyname&quot; and other properties which  are already set from other different sources.\r\n\r\n\r\nPlease advice if there is property/setting that I could set so that the target it not set to null when source is null.\r\n\r\n\r\n    @Mapper( nullValueCheckStrategy = NullValueCheckStrategy.ALWAYS )\r\n    public interface CustomerUserMapperNullCheck {\r\n    \r\n        @Mapping(source=&quot;address&quot;, target=&quot;homeDTO.addressDTO&quot; )\r\n        void mapCustomer(Customer customer, @MappingTarget  UserDTO userDTO)  ;\r\n        \r\n        @Mapping(source=&quot;houseNumber&quot;, target=&quot;houseNo&quot; )\r\n        void mapCustomerHouse(Address address, @MappingTarget  AddressDTO addrDTO)  ;\r\n        \r\n    }\r\n\r\n I initially tried in single mapping like below\r\n\r\n    @Mapping(target=&quot;homeDTO.addressDTO.houseNo&quot;, source=&quot;address.houseNumber&quot;)\r\n     abstract void mapCustomerHouse(Customer customer, @MappingTarget  UserDTO userDTO)  ; \r\n\r\nThen tried splitting up the mapping,  based on https://github.com/mapstruct/mapstruct/issues/649. \r\n\r\n\r\nBoth  approaches does not produce the expected result/\r\nGenerated method code\r\n\r\n     protected void customerToHomeDTO(Customer customer, HomeDTO mappingTarget) {\r\n            if ( customer == null ) {\r\n                return;\r\n            }\r\n    \r\n            if ( customer.getAddress() != null ) {\r\n                if ( mappingTarget.getAddressDTO() == null ) {\r\n                    mappingTarget.setAddressDTO( new AddressDTO() );\r\n                }\r\n                mapCustomerHouse( customer.getAddress(), mappingTarget.getAddressDTO() );\r\n            }\r\n            **else {\r\n                mappingTarget.setAddressDTO( null );   // I dont want to else where addressDTO is set to null.\r\n            }**\r\n        }\r\n\r\nThe complete generated code is here  \r\n  https://github.com/mapstruct/mapstruct/issues/1306\r\n\r\nThanks\r\n\r\n\r\n","title":"Map struct : When source is null, target should NOT be set to null","body":"<p>I am trying to map nested properties using mapstruct 1.2.0.CR2. \n(Example map <em>customer.address.houseNumber</em> to  <em>userDTO.homeDTO.addressDTO.houseNo</em> ).</p>\n\n<p><strong>Expectation :</strong> I do not want to set the  addressDTO to null when  customer.address is null.    Since addressDTO contains  \"countyname\" and other properties which  are already set from other different sources.</p>\n\n<p>Please advice if there is property/setting that I could set so that the target it not set to null when source is null.</p>\n\n<pre><code>@Mapper( nullValueCheckStrategy = NullValueCheckStrategy.ALWAYS )\npublic interface CustomerUserMapperNullCheck {\n\n    @Mapping(source=\"address\", target=\"homeDTO.addressDTO\" )\n    void mapCustomer(Customer customer, @MappingTarget  UserDTO userDTO)  ;\n\n    @Mapping(source=\"houseNumber\", target=\"houseNo\" )\n    void mapCustomerHouse(Address address, @MappingTarget  AddressDTO addrDTO)  ;\n\n}\n</code></pre>\n\n<p>I initially tried in single mapping like below</p>\n\n<pre><code>@Mapping(target=\"homeDTO.addressDTO.houseNo\", source=\"address.houseNumber\")\n abstract void mapCustomerHouse(Customer customer, @MappingTarget  UserDTO userDTO)  ; \n</code></pre>\n\n<p>Then tried splitting up the mapping,  based on <a href=\"https://github.com/mapstruct/mapstruct/issues/649\" rel=\"noreferrer\">https://github.com/mapstruct/mapstruct/issues/649</a>. </p>\n\n<p>Both  approaches does not produce the expected result/\nGenerated method code</p>\n\n<pre><code> protected void customerToHomeDTO(Customer customer, HomeDTO mappingTarget) {\n        if ( customer == null ) {\n            return;\n        }\n\n        if ( customer.getAddress() != null ) {\n            if ( mappingTarget.getAddressDTO() == null ) {\n                mappingTarget.setAddressDTO( new AddressDTO() );\n            }\n            mapCustomerHouse( customer.getAddress(), mappingTarget.getAddressDTO() );\n        }\n        **else {\n            mappingTarget.setAddressDTO( null );   // I dont want to else where addressDTO is set to null.\n        }**\n    }\n</code></pre>\n\n<p>The complete generated code is here<br>\n  <a href=\"https://github.com/mapstruct/mapstruct/issues/1306\" rel=\"noreferrer\">https://github.com/mapstruct/mapstruct/issues/1306</a></p>\n\n<p>Thanks</p>\n"},{"tags":["java","socketchannel"],"comments":[{"owner":{"account_id":957028,"reputation":15123,"user_id":982149,"accept_rate":100,"display_name":"Fildor"},"score":0,"creation_date":1349967267,"post_id":12842333,"comment_id":17376680,"body_markdown":"Do you have some stacktrace? Usually it should be no problem to have a &quot;newer&quot; JRE than Development-JDK.","body":"Do you have some stacktrace? Usually it should be no problem to have a &quot;newer&quot; JRE than Development-JDK."},{"owner":{"account_id":415484,"reputation":231,"user_id":790316,"accept_rate":38,"display_name":"Code.Blodded"},"score":0,"creation_date":1349967731,"post_id":12842333,"comment_id":17376970,"body_markdown":"If I compile JAR in JRE 1.6 and then run it in JRE 1.7 without implementing new methods I get the following error\n\nException in thread &quot;Thread-27&quot; java.lang.RuntimeException: Delegated task threw Exception/Error\n\tat sun.security.ssl.Handshaker.checkThrown(Unknown Source)\n\tat sun.security.ssl.SSLEngineImpl.checkTaskThrown(Unknown Source)\n\tat sun.security.ssl.SSLEngineImpl.readNetRecord(Unknown Source)\n\tat sun.security.ssl.SSLEngineImpl.unwrap(Unknown Source)\n\tat javax.net.ssl.SSLEngine.unwrap(Unknown Source)","body":"If I compile JAR in JRE 1.6 and then run it in JRE 1.7 without implementing new methods I get the following error  Exception in thread &quot;Thread-27&quot; java.lang.RuntimeException: Delegated task threw Exception/Error \tat sun.security.ssl.Handshaker.checkThrown(Unknown Source) \tat sun.security.ssl.SSLEngineImpl.checkTaskThrown(Unknown Source) \tat sun.security.ssl.SSLEngineImpl.readNetRecord(Unknown Source) \tat sun.security.ssl.SSLEngineImpl.unwrap(Unknown Source) \tat javax.net.ssl.SSLEngine.unwrap(Unknown Source)"},{"owner":{"account_id":957028,"reputation":15123,"user_id":982149,"accept_rate":100,"display_name":"Fildor"},"score":0,"creation_date":1349967826,"post_id":12842333,"comment_id":17377010,"body_markdown":"Can you add some code? This doesn&#39;t make any sense to me, really.","body":"Can you add some code? This doesn&#39;t make any sense to me, really."},{"owner":{"account_id":265649,"reputation":53086,"user_id":552759,"display_name":"jtahlborn"},"score":0,"creation_date":1349967875,"post_id":12842333,"comment_id":17377031,"body_markdown":"@Code.Blodded - is that the entire stack trace?","body":"@Code.Blodded - is that the entire stack trace?"},{"owner":{"account_id":415484,"reputation":231,"user_id":790316,"accept_rate":38,"display_name":"Code.Blodded"},"score":0,"creation_date":1349967902,"post_id":12842333,"comment_id":17377046,"body_markdown":"I don&#39;t reference any NetworkChannel at all here is a sample implementation of the method marked as an @Override\n\n   \n\t    public SocketChannel shutdownOutput() throws IOException {\n            return socketChannel.shutdownOutput();\n\t    }","body":"I don&#39;t reference any NetworkChannel at all here is a sample implementation of the method marked as an @Override      \t    public SocketChannel shutdownOutput() throws IOException {             return socketChannel.shutdownOutput(); \t    }"},{"owner":{"account_id":265649,"reputation":53086,"user_id":552759,"display_name":"jtahlborn"},"score":0,"creation_date":1349968023,"post_id":12842333,"comment_id":17377117,"body_markdown":"Can you implement the new methods for 1,7 and compile the class using 1.6?","body":"Can you implement the new methods for 1,7 and compile the class using 1.6?"},{"owner":{"account_id":415484,"reputation":231,"user_id":790316,"accept_rate":38,"display_name":"Code.Blodded"},"score":0,"creation_date":1349968132,"post_id":12842333,"comment_id":17377182,"body_markdown":"@jtahlborn I can compile on 1.6 even with the 1.7 methods added although I still get same runtime error, actually this only seems to work when I&#39;m using JRE 1.7.0 to 1.7.3, if I&#39;m using 1.7.4 above then I have the runtime error problem","body":"@jtahlborn I can compile on 1.6 even with the 1.7 methods added although I still get same runtime error, actually this only seems to work when I&#39;m using JRE 1.7.0 to 1.7.3, if I&#39;m using 1.7.4 above then I have the runtime error problem"},{"owner":{"account_id":265649,"reputation":53086,"user_id":552759,"display_name":"jtahlborn"},"score":0,"creation_date":1349968242,"post_id":12842333,"comment_id":17377237,"body_markdown":"please add the full details to your question as it&#39;s getting a little confusing trying to follow it all in comments.","body":"please add the full details to your question as it&#39;s getting a little confusing trying to follow it all in comments."},{"owner":{"account_id":415484,"reputation":231,"user_id":790316,"accept_rate":38,"display_name":"Code.Blodded"},"score":0,"creation_date":1349969114,"post_id":12842333,"comment_id":17377741,"body_markdown":"@jtahlborn added details in question","body":"@jtahlborn added details in question"},{"owner":{"account_id":1119690,"reputation":15788,"user_id":1108305,"accept_rate":47,"display_name":"M. Justin"},"score":0,"creation_date":1699938557,"post_id":12842333,"comment_id":136590491,"body_markdown":"From the answer, it looks like the issue was in the implementation of `getAcceptedIssuers`, which wasn&#39;t even mentioned in the actual question.  Voting to close as missing the required details to answer this.","body":"From the answer, it looks like the issue was in the implementation of <code>getAcceptedIssuers</code>, which wasn&#39;t even mentioned in the actual question.  Voting to close as missing the required details to answer this."}],"answers":[{"tags":[],"owner":{"account_id":415484,"reputation":231,"user_id":790316,"accept_rate":38,"display_name":"Code.Blodded"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1699938085,"creation_date":1349972506,"answer_id":12844161,"question_id":12842333,"body_markdown":"OK, it seems like I have pinpointed the issue about the runtime error on JRE 1.7.4+.  It appears that it is not really the unwrapping error but rather the certificate error.  Again I&#39;m also getting the following error whenever I&#39;m getting that runtime error when I call `SSLEngine.unwrap`:\r\n\r\n```lang-none\r\nException in thread &quot;Thread-24&quot; java.lang.RuntimeException: Delegated task threw Exception/Error\r\n    at sun.security.ssl.Handshaker.checkThrown(Unknown Source)\r\n    at sun.security.ssl.SSLEngineImpl.checkTaskThrown(Unknown Source)\r\n    at sun.security.ssl.SSLEngineImpl.readNetRecord(Unknown Source)\r\n    at sun.security.ssl.SSLEngineImpl.unwrap(Unknown Source)\r\n    at javax.net.ssl.SSLEngine.unwrap(Unknown Source)\r\n    .....\r\nCaused by: java.lang.UnsupportedOperationException\r\n    at ....RTMPSTrustManager.getAcceptedIssuers(....)\r\n```\r\n\r\nSilly me I should have noticed that &quot;Caused by&quot; phrase, since I have this code below, so it seems that starting from JRE 1.7.4.  If I throw an exception inside `getAcceptedIssuers()` then I&#39;ll have that problem, so I just ended up not throwing an exception but returning `null` instead.\r\n\r\nI&#39;m not sure if that 1.7.4+ problem is related to this fix ([JDK-7142172](https://bugs.java.com/bugdatabase/view_bug?bug_id=7142172)), but it really seems to be.\r\n\r\n```lang-java\r\npublic java.security.cert.X509Certificate[] getAcceptedIssuers()\r\n{\r\n    return null;\r\n    //throw new UnsupportedOperationException();\r\n}\r\n```\r\n","title":"Extending SocketChannel in JRE 1.7.4+","body":"<p>OK, it seems like I have pinpointed the issue about the runtime error on JRE 1.7.4+.  It appears that it is not really the unwrapping error but rather the certificate error.  Again I'm also getting the following error whenever I'm getting that runtime error when I call <code>SSLEngine.unwrap</code>:</p>\n<pre class=\"lang-none prettyprint-override\"><code>Exception in thread &quot;Thread-24&quot; java.lang.RuntimeException: Delegated task threw Exception/Error\n    at sun.security.ssl.Handshaker.checkThrown(Unknown Source)\n    at sun.security.ssl.SSLEngineImpl.checkTaskThrown(Unknown Source)\n    at sun.security.ssl.SSLEngineImpl.readNetRecord(Unknown Source)\n    at sun.security.ssl.SSLEngineImpl.unwrap(Unknown Source)\n    at javax.net.ssl.SSLEngine.unwrap(Unknown Source)\n    .....\nCaused by: java.lang.UnsupportedOperationException\n    at ....RTMPSTrustManager.getAcceptedIssuers(....)\n</code></pre>\n<p>Silly me I should have noticed that &quot;Caused by&quot; phrase, since I have this code below, so it seems that starting from JRE 1.7.4.  If I throw an exception inside <code>getAcceptedIssuers()</code> then I'll have that problem, so I just ended up not throwing an exception but returning <code>null</code> instead.</p>\n<p>I'm not sure if that 1.7.4+ problem is related to this fix (<a href=\"https://bugs.java.com/bugdatabase/view_bug?bug_id=7142172\" rel=\"nofollow noreferrer\">JDK-7142172</a>), but it really seems to be.</p>\n<pre class=\"lang-java prettyprint-override\"><code>public java.security.cert.X509Certificate[] getAcceptedIssuers()\n{\n    return null;\n    //throw new UnsupportedOperationException();\n}\n</code></pre>\n"}],"owner":{"account_id":415484,"reputation":231,"user_id":790316,"accept_rate":38,"display_name":"Code.Blodded"},"comment_count":10,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1202,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1699938362,"creation_date":1349966881,"question_id":12842333,"body_markdown":"I just tried extending `SocketChannel` but it seems that `SocketChannel` has some new API methods available starting from JRE 1.7.4 ([`SocketChannel`](https://docs.oracle.com/javase/7/docs/api/java/nio/channels/SocketChannel.html)).  The problem is if I implement those methods, my JAR would throw the following error whenever I&#39;m using Java 1.6\r\n\r\n```lang-none\r\nException in thread &quot;Thread-24&quot; java.lang.NoClassDefFoundError: java/nio/channels/NetworkChannel\r\n```\r\n\r\nNow I figured out why there is an error related to `java/nio/channels/NetworkChannel`, it appears that `SocketChannel` implements interface `NetworkChannel` starting on JRE 1.7\r\n\r\nNow, when I&#39;m using JRE 1.7.4+, some runtime error occurs.  Actually the weird thing is even if I have those new API methods implemented then I&#39;m getting runtime error when I call the `unwrap` method:\r\n\r\n```lang-none\r\nException in thread &quot;Thread-27&quot; java.lang.RuntimeException: Delegated task threw Exception/Error\r\n\tat sun.security.ssl.Handshaker.checkThrown(Unknown Source)\r\n\tat sun.security.ssl.SSLEngineImpl.checkTaskThrown(Unknown Source)\r\n\tat sun.security.ssl.SSLEngineImpl.readNetRecord(Unknown Source)\r\n\tat sun.security.ssl.SSLEngineImpl.unwrap(Unknown Source)\r\n\tat javax.net.ssl.SSLEngine.unwrap(Unknown Source)\r\n\tat CustomSocketChannel.unwrap(CustomSocketChannel.java:565)\r\n```\r\n \r\nOn that line I just call the `sslEngine.unwrap` method.  So in short when I have the new API methods implemented, it only works with JRE 1.7.0 to 1.7.3\r\n\r\nHow can I make my JAR compatible with JRE 1.6 and 1.7 while also extending the `SocketChannel` class?","title":"Extending SocketChannel in JRE 1.7.4+","body":"<p>I just tried extending <code>SocketChannel</code> but it seems that <code>SocketChannel</code> has some new API methods available starting from JRE 1.7.4 (<a href=\"https://docs.oracle.com/javase/7/docs/api/java/nio/channels/SocketChannel.html\" rel=\"nofollow noreferrer\"><code>SocketChannel</code></a>).  The problem is if I implement those methods, my JAR would throw the following error whenever I'm using Java 1.6</p>\n<pre class=\"lang-none prettyprint-override\"><code>Exception in thread &quot;Thread-24&quot; java.lang.NoClassDefFoundError: java/nio/channels/NetworkChannel\n</code></pre>\n<p>Now I figured out why there is an error related to <code>java/nio/channels/NetworkChannel</code>, it appears that <code>SocketChannel</code> implements interface <code>NetworkChannel</code> starting on JRE 1.7</p>\n<p>Now, when I'm using JRE 1.7.4+, some runtime error occurs.  Actually the weird thing is even if I have those new API methods implemented then I'm getting runtime error when I call the <code>unwrap</code> method:</p>\n<pre class=\"lang-none prettyprint-override\"><code>Exception in thread &quot;Thread-27&quot; java.lang.RuntimeException: Delegated task threw Exception/Error\n    at sun.security.ssl.Handshaker.checkThrown(Unknown Source)\n    at sun.security.ssl.SSLEngineImpl.checkTaskThrown(Unknown Source)\n    at sun.security.ssl.SSLEngineImpl.readNetRecord(Unknown Source)\n    at sun.security.ssl.SSLEngineImpl.unwrap(Unknown Source)\n    at javax.net.ssl.SSLEngine.unwrap(Unknown Source)\n    at CustomSocketChannel.unwrap(CustomSocketChannel.java:565)\n</code></pre>\n<p>On that line I just call the <code>sslEngine.unwrap</code> method.  So in short when I have the new API methods implemented, it only works with JRE 1.7.0 to 1.7.3</p>\n<p>How can I make my JAR compatible with JRE 1.6 and 1.7 while also extending the <code>SocketChannel</code> class?</p>\n"},{"tags":["java","intellij-idea"],"answers":[{"tags":[],"owner":{"account_id":401843,"reputation":89758,"user_id":768644,"display_name":"rzwitserloot"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1699935104,"creation_date":1699935104,"answer_id":77478156,"question_id":77478085,"body_markdown":"`SequenceLayout` is a preview feature introduced in a very recent update of java. You cannot use preview features unless you explicitly elect to enable them. But before you do that: You&#39;re clearly following some course or tutorial and there is __zero chance__ that&#39;s what they meant. 99% odds this is what happened instead: You, or the stuff you received to do this exercise, includes a type that is _also_ named `SequenceLayout`, you typed it and allowed intellij to automatically sort out imports for you, and you picked the wrong type to import. Find `import java.lang.foreign.SequenceLayout;` in your code, and delete that line.\r\n","title":"I keep trying to enable preview but whenever i upload my java file it says apis are disabled","body":"<p><code>SequenceLayout</code> is a preview feature introduced in a very recent update of java. You cannot use preview features unless you explicitly elect to enable them. But before you do that: You're clearly following some course or tutorial and there is <strong>zero chance</strong> that's what they meant. 99% odds this is what happened instead: You, or the stuff you received to do this exercise, includes a type that is <em>also</em> named <code>SequenceLayout</code>, you typed it and allowed intellij to automatically sort out imports for you, and you picked the wrong type to import. Find <code>import java.lang.foreign.SequenceLayout;</code> in your code, and delete that line.</p>\n"}],"owner":{"account_id":29207582,"reputation":25,"user_id":22604159,"display_name":"Blue Apricot"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":39,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1699936302,"creation_date":1699933554,"question_id":77478085,"body_markdown":"I never had this issue before but now whenever i try to upload my class on ed discussions i keep getting this error : \r\n&quot;./assignment2/Caterpillar.java:4: error: SequenceLayout is a preview API and is disabled by default.\r\nimport java.lang.foreign.SequenceLayout;\r\n                        ^\r\n  (use --enable-preview to enable preview APIs)1&quot;\r\n\r\nI&#39;ve tried the terminal, i&#39;ve tried project structure,(intellij idea). It is in previewed i have check 10 times already. can someone please advise me on what i should do","title":"I keep trying to enable preview but whenever i upload my java file it says apis are disabled","body":"<p>I never had this issue before but now whenever i try to upload my class on ed discussions i keep getting this error :\n&quot;./assignment2/Caterpillar.java:4: error: SequenceLayout is a preview API and is disabled by default.\nimport java.lang.foreign.SequenceLayout;\n^\n(use --enable-preview to enable preview APIs)1&quot;</p>\n<p>I've tried the terminal, i've tried project structure,(intellij idea). It is in previewed i have check 10 times already. can someone please advise me on what i should do</p>\n"},{"tags":["java","android"],"comments":[{"owner":{"account_id":1223835,"reputation":75848,"user_id":1189885,"accept_rate":43,"display_name":"chrylis -cautiouslyoptimistic-"},"score":0,"creation_date":1430816093,"post_id":30048090,"comment_id":48211691,"body_markdown":"You could always adopt Groovy, which is fully supported on Android as of the 2.4 series.","body":"You could always adopt Groovy, which is fully supported on Android as of the 2.4 series."},{"owner":{"account_id":71739,"reputation":307143,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":0,"creation_date":1430819131,"post_id":30048090,"comment_id":48213783,"body_markdown":"Make up your mind. Either you know that Google doesn&#39;t support JDK 8 or you don&#39;t.","body":"Make up your mind. Either you know that Google doesn&#39;t support JDK 8 or you don&#39;t."},{"owner":{"display_name":"user180100"},"score":0,"creation_date":1430820077,"post_id":30048090,"comment_id":48214486,"body_markdown":"I don&#39;t see how &quot;opinion&quot; matters in this question","body":"I don&#39;t see how &quot;opinion&quot; matters in this question"},{"owner":{"account_id":459094,"reputation":8224,"user_id":859359,"accept_rate":70,"display_name":"Nestor"},"score":0,"creation_date":1430820282,"post_id":30048090,"comment_id":48214619,"body_markdown":"@RC. Please vote reopen then.","body":"@RC. Please vote reopen then."},{"owner":{"account_id":1441892,"reputation":13687,"user_id":1361787,"accept_rate":68,"display_name":"ChiefTwoPencils"},"score":0,"creation_date":1430967159,"post_id":30048090,"comment_id":48294900,"body_markdown":"@RC., you&#39;d have to look at the edit history to understand why it was closed. It used to be entirely opinion based. Now it&#39;s good and I too will vote to reopen it.","body":"@RC., you&#39;d have to look at the edit history to understand why it was closed. It used to be entirely opinion based. Now it&#39;s good and I too will vote to reopen it."},{"owner":{"account_id":71739,"reputation":307143,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":1,"creation_date":1430969253,"post_id":30048090,"comment_id":48295415,"body_markdown":"But it still doesn&#39;t make sense. Google supports what Google supports, and Oracle supports what Oracle supports, and Oracle certainly does not support Google in any way.","body":"But it still doesn&#39;t make sense. Google supports what Google supports, and Oracle supports what Oracle supports, and Oracle certainly does not support Google in any way."},{"owner":{"account_id":459094,"reputation":8224,"user_id":859359,"accept_rate":70,"display_name":"Nestor"},"score":0,"creation_date":1430979662,"post_id":30048090,"comment_id":48299000,"body_markdown":"@EJP It doesn&#39;t matter if Oracle supports Google. Google should support JDK 8 as soon as possible... The question is regarding Google and it is a fair question (I can&#39;t rely on a non-supported Development Kit - and I reckon noone can)","body":"@EJP It doesn&#39;t matter if Oracle supports Google. Google should support JDK 8 as soon as possible... The question is regarding Google and it is a fair question (I can&#39;t rely on a non-supported Development Kit - and I reckon noone can)"}],"answers":[{"tags":[],"owner":{"account_id":8291,"reputation":860417,"user_id":14860,"accept_rate":100,"display_name":"paxdiablo"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1439954293,"creation_date":1439954293,"answer_id":32085960,"question_id":30048090,"body_markdown":"The Google Android development [page][1] and, from there, the [pre-requisites page][2] list JDK7 as a requirement.\r\n\r\nThis has nothing to do with Oracle&#39;s JRE since the code made during Android development is never meant to run on that JRE - it&#39;s supposed to be turned into Dalvik bytecode and run under Android.\r\n\r\nSo the security concerns of Oracle&#39;s JRE are not really at issue here. Google supports JDK7 (insomuch as it pertains to Android development) so *that&#39;s* what you should be using, pending a clear statement of intent from Google.\r\n\r\n  [1]: https://developer.android.com/sdk/index.html\r\n  [2]: https://developer.android.com/sdk/index.html#Requirements","title":"How does JDK 7&#39;s support termination affect Android development","body":"<p>The Google Android development <a href=\"https://developer.android.com/sdk/index.html\" rel=\"nofollow\">page</a> and, from there, the <a href=\"https://developer.android.com/sdk/index.html#Requirements\" rel=\"nofollow\">pre-requisites page</a> list JDK7 as a requirement.</p>\n\n<p>This has nothing to do with Oracle's JRE since the code made during Android development is never meant to run on that JRE - it's supposed to be turned into Dalvik bytecode and run under Android.</p>\n\n<p>So the security concerns of Oracle's JRE are not really at issue here. Google supports JDK7 (insomuch as it pertains to Android development) so <em>that's</em> what you should be using, pending a clear statement of intent from Google.</p>\n"},{"tags":[],"owner":{"account_id":1166848,"reputation":257,"user_id":1952114,"display_name":"unforgettableidSupportsMonica"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1699936301,"creation_date":1441949091,"answer_id":32516046,"question_id":30048090,"body_markdown":"It looks like Google doesn&#39;t officially support the JDK 8 for Android development.  See paxdiablo&#39;s answer.\r\n\r\nBut let me add some thoughts.\r\n\r\nI wanted to try using the JDK 8 anyway.  So I downloaded and installed it, and used it (and Apache Ant) to build a simple Android app.\r\n\r\nThe app doesn&#39;t use any features which are new to Java 8, such as lambdas.  In addition, Ant passed a parameter to `javac` asking it to emit bytecode compatible with older JREs.\r\n\r\nThe app compiled fine.\r\n\r\nThe app requires that I root my phone before running it. I haven&#39;t done so yet, and haven&#39;t tested the app yet either.","title":"How does JDK 7&#39;s support termination affect Android development","body":"<p>It looks like Google doesn't officially support the JDK 8 for Android development.  See paxdiablo's answer.</p>\n<p>But let me add some thoughts.</p>\n<p>I wanted to try using the JDK 8 anyway.  So I downloaded and installed it, and used it (and Apache Ant) to build a simple Android app.</p>\n<p>The app doesn't use any features which are new to Java 8, such as lambdas.  In addition, Ant passed a parameter to <code>javac</code> asking it to emit bytecode compatible with older JREs.</p>\n<p>The app compiled fine.</p>\n<p>The app requires that I root my phone before running it. I haven't done so yet, and haven't tested the app yet either.</p>\n"}],"owner":{"account_id":459094,"reputation":8224,"user_id":859359,"accept_rate":70,"display_name":"Nestor"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":197,"favorite_count":0,"down_vote_count":2,"up_vote_count":3,"accepted_answer_id":32085960,"answer_count":2,"score":1,"last_activity_date":1699936301,"creation_date":1430815369,"question_id":30048090,"body_markdown":"Oracle [has announced][1] that they stop the official updates for JRE 7 and [JDK 7][2].\r\n\r\n_As much as I know_, Google doesn&#39;t say anything about JDK 8, I guess the recommended version is JDK 7 for Android development.\r\n\r\n\r\n\r\n**Is JDK 8 officially supported for Android development?**\r\n\r\n\r\n  [1]: http://www.oracle.com/technetwork/java/eol-135779.html\r\n  [2]: https://www.stsoftware.com.au/site/ST/blog/article/jdk7-end-of-life/","title":"How does JDK 7&#39;s support termination affect Android development","body":"<p>Oracle <a href=\"http://www.oracle.com/technetwork/java/eol-135779.html\" rel=\"nofollow\">has announced</a> that they stop the official updates for JRE 7 and <a href=\"https://www.stsoftware.com.au/site/ST/blog/article/jdk7-end-of-life/\" rel=\"nofollow\">JDK 7</a>.</p>\n\n<p><em>As much as I know</em>, Google doesn't say anything about JDK 8, I guess the recommended version is JDK 7 for Android development.</p>\n\n<p><strong>Is JDK 8 officially supported for Android development?</strong></p>\n"},{"tags":["java","amazon-web-services","spring-boot","amazon-s3","aws-sdk-java"],"comments":[{"owner":{"account_id":15047867,"reputation":2292,"user_id":10860403,"display_name":"ewokx"},"score":1,"creation_date":1699920009,"post_id":77477487,"comment_id":136589001,"body_markdown":"Did you consider S3 -&gt; fileobj (or even local disk) -&gt; Sharepoint?  (Just an idea.. I know nothing about SP.)","body":"Did you consider S3 -&gt; fileobj (or even local disk) -&gt; Sharepoint?  (Just an idea.. I know nothing about SP.)"}],"answers":[{"tags":[],"owner":{"account_id":2073393,"reputation":2457,"user_id":1847378,"display_name":"AndrewL"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1699921172,"creation_date":1699921172,"answer_id":77477538,"question_id":77477487,"body_markdown":"The general solution is to use `S3Client.getObject(objectRequest)` which is a [`ResponseInputStream&lt;GetObjectResponse&gt;`][1].  This AWS specific object is subclass of the standard `java.io.InputStream`.\r\n\r\nSo all you need to do is read that stream...\r\n 1. indirectly into a File, and then pass the file handle to your Sharepoint client\r\n 2. indirectly into an in-memory byte store (if there&#39;s enough RAM), and then pass the `byte[]` to your Sharepoint client\r\n 3. or open up an output stream on your Sharepoint client and stream from S3 to Sharepoint directly.\r\n\r\n\r\nThe actual byte moving could be assisted with a tool such as [Apache Commons IO: `IOUtils`][2]\r\n\r\n\r\n  [1]: https://sdk.amazonaws.com/java/api/latest/software/amazon/awssdk/core/ResponseInputStream.html\r\n  [2]: https://commons.apache.org/proper/commons-io/apidocs/org/apache/commons/io/IOUtils.html","title":"Copy files from S3 bucket to any destination (like sharepoint) other than S3 bucket","body":"<p>The general solution is to use <code>S3Client.getObject(objectRequest)</code> which is a <a href=\"https://sdk.amazonaws.com/java/api/latest/software/amazon/awssdk/core/ResponseInputStream.html\" rel=\"nofollow noreferrer\"><code>ResponseInputStream&lt;GetObjectResponse&gt;</code></a>.  This AWS specific object is subclass of the standard <code>java.io.InputStream</code>.</p>\n<p>So all you need to do is read that stream...</p>\n<ol>\n<li>indirectly into a File, and then pass the file handle to your Sharepoint client</li>\n<li>indirectly into an in-memory byte store (if there's enough RAM), and then pass the <code>byte[]</code> to your Sharepoint client</li>\n<li>or open up an output stream on your Sharepoint client and stream from S3 to Sharepoint directly.</li>\n</ol>\n<p>The actual byte moving could be assisted with a tool such as <a href=\"https://commons.apache.org/proper/commons-io/apidocs/org/apache/commons/io/IOUtils.html\" rel=\"nofollow noreferrer\">Apache Commons IO: <code>IOUtils</code></a></p>\n"}],"owner":{"account_id":4051239,"reputation":906,"user_id":3330733,"accept_rate":38,"display_name":"Megan"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":33,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77477538,"answer_count":1,"score":0,"last_activity_date":1699936198,"creation_date":1699919712,"question_id":77477487,"body_markdown":"Under AWS JAVA SDK, I can see AmazonS3.java, TransferManager.java for copying/transferring files between two S3 buckets.  I want to know what can be used when the destination is NOT a S3 bucket. \r\nI have a requirement where I need to transfer from S3 bucket to SharePoint but under AWS Java SDK I can&#39;t find any utility to copy/move files from S3 bucket  to any destination other than another bucket. Please help.","title":"Copy files from S3 bucket to any destination (like sharepoint) other than S3 bucket","body":"<p>Under AWS JAVA SDK, I can see AmazonS3.java, TransferManager.java for copying/transferring files between two S3 buckets.  I want to know what can be used when the destination is NOT a S3 bucket.\nI have a requirement where I need to transfer from S3 bucket to SharePoint but under AWS Java SDK I can't find any utility to copy/move files from S3 bucket  to any destination other than another bucket. Please help.</p>\n"},{"tags":["java","arrays"],"comments":[{"owner":{"account_id":6606677,"reputation":1024,"user_id":5103317,"display_name":"Old Dog Programmer"},"score":3,"creation_date":1699931217,"post_id":77477919,"comment_id":136589913,"body_markdown":"May I suggest editing the question to show a [complete but minimal reproducible example](https://stackoverflow.com/help/minimal-reproducible-example) ?","body":"May I suggest editing the question to show a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">complete but minimal reproducible example</a> ?"},{"owner":{"account_id":6606677,"reputation":1024,"user_id":5103317,"display_name":"Old Dog Programmer"},"score":1,"creation_date":1699931325,"post_id":77477919,"comment_id":136589926,"body_markdown":"Off-topic: You can print an entire array using the [`Arrays.toString` methods](https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/Arrays.html#toString(int%5B%5D)). That links to the API method taking an `int`, but it is overloaded for other types.","body":"Off-topic: You can print an entire array using the <a href=\"https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/Arrays.html#toString(int%5B%5D)\" rel=\"nofollow noreferrer\"><code>Arrays.toString</code> methods</a>. That links to the API method taking an <code>int</code>, but it is overloaded for other types."},{"owner":{"account_id":6606677,"reputation":1024,"user_id":5103317,"display_name":"Old Dog Programmer"},"score":0,"creation_date":1699932142,"post_id":77477919,"comment_id":136590007,"body_markdown":"This question might or might not have answers here https://stackoverflow.com/questions/12757841/are-arrays-passed-by-value-or-passed-by-reference-in-java or here https://stackoverflow.com/questions/40480/is-java-pass-by-reference-or-pass-by-value","body":"This question might or might not have answers here <a href=\"https://stackoverflow.com/questions/12757841/are-arrays-passed-by-value-or-passed-by-reference-in-java\" title=\"are arrays passed by value or passed by reference in java\">stackoverflow.com/questions/12757841/&hellip;</a> or here <a href=\"https://stackoverflow.com/questions/40480/is-java-pass-by-reference-or-pass-by-value\" title=\"is java pass by reference or pass by value\">stackoverflow.com/questions/40480/&hellip;</a>"},{"owner":{"account_id":6606677,"reputation":1024,"user_id":5103317,"display_name":"Old Dog Programmer"},"score":0,"creation_date":1699932369,"post_id":77477919,"comment_id":136590016,"body_markdown":"By chance, does the `MySort#sortIt (int [] array, int sortType)` method manipulate the contents of the `array` parameter, whatever the actual name is in your source code?  Even though `array` is the name of a local variable within the method, it is a reference type. If this method changes the values in the elements, the change will be made to the  actual array in the calling program.","body":"By chance, does the <code>MySort#sortIt (int [] array, int sortType)</code> method manipulate the contents of the <code>array</code> parameter, whatever the actual name is in your source code?  Even though <code>array</code> is the name of a local variable within the method, it is a reference type. If this method changes the values in the elements, the change will be made to the  actual array in the calling program."},{"owner":{"account_id":21724606,"reputation":722,"user_id":16034206,"display_name":"experiment unit 1998X"},"score":2,"creation_date":1699934349,"post_id":77477919,"comment_id":136590158,"body_markdown":"I sure hope your Sorting class creates a copy of the input array instead of operating on it directly","body":"I sure hope your Sorting class creates a copy of the input array instead of operating on it directly"},{"owner":{"account_id":21724606,"reputation":722,"user_id":16034206,"display_name":"experiment unit 1998X"},"score":0,"creation_date":1699934408,"post_id":77477919,"comment_id":136590161,"body_markdown":"see also Java pass-by-value or pass-by-reference https://stackoverflow.com/q/40480/16034206","body":"see also Java pass-by-value or pass-by-reference <a href=\"https://stackoverflow.com/q/40480/16034206\">stackoverflow.com/q/40480/16034206</a>"},{"owner":{"account_id":2485939,"reputation":19426,"user_id":2164365,"accept_rate":40,"display_name":"Abra"},"score":1,"creation_date":1699935824,"post_id":77477919,"comment_id":136590255,"body_markdown":"I think you need to post the code of class `Sorting`.","body":"I think you need to post the code of class <code>Sorting</code>."},{"owner":{"account_id":14792330,"reputation":3,"user_id":22911272,"display_name":"hipposaver"},"score":0,"creation_date":1699967344,"post_id":77477919,"comment_id":136594741,"body_markdown":"Thanks for the answers. Dno how to quote here but the link to pass by Val vs by reference with complex data structures really nailed it home.  Good to know this is a java thing not something I&#39;m fundamentally doing wrong. Edit: I&#39;d post more complete code but the question was pretty well answered now, thanks!","body":"Thanks for the answers. Dno how to quote here but the link to pass by Val vs by reference with complex data structures really nailed it home.  Good to know this is a java thing not something I&#39;m fundamentally doing wrong. Edit: I&#39;d post more complete code but the question was pretty well answered now, thanks!"}],"answers":[{"tags":[],"owner":{"account_id":401843,"reputation":89758,"user_id":768644,"display_name":"rzwitserloot"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1699935404,"creation_date":1699935404,"answer_id":77478170,"question_id":77477919,"body_markdown":"Your sorting code modifies (i.e. ruins) the input.\r\n\r\nJava is pass-by-value (i.e., a copy is passed whenever you pass a value to a method), but, everything is a reference. When you write:\r\n\r\n```\r\nint[] arr = new int[10];\r\n```\r\n\r\nThe `new int[10]` is akin to &#39;build a house&#39;, but `int[] arr` isn&#39;t a house - no, that&#39;s just a page in an address book. `=` doesn&#39;t mean &#39;arr is now a house&#39;, no, `=` means: write the address of the thing on the right onto the address book page on the left.\r\n\r\nSo, when you call `SortIt(arr)`, java duly makes a __copy__, but it&#39;s copying the address book page. Not the entire house.\r\n\r\nYour sort method then follows the copy it got, tosses a brick through the window and speeds off, the little delinquent. Your main method then later goes and follows its address book page to.. the same house, and notices it has been vandalized.\r\n\r\nYou have 4 options to fix this:\r\n\r\n1. Have your main code make a copy, and hand the copy to your sort method. A copy can be made with `Arrays.copyOf(arr)`.\r\n2. Have your sorting method make a copy of whatever error it receives.\r\n3. Having your sorting method do its job without modifying the input. That&#39;s.. pretty much going to boil down to option 2, unless the input is already sorted.\r\n4. Write your main code so that it no longer matters that the method you pass the array to modifies it.\r\n","title":"array staying sorted after first pass not sure why","body":"<p>Your sorting code modifies (i.e. ruins) the input.</p>\n<p>Java is pass-by-value (i.e., a copy is passed whenever you pass a value to a method), but, everything is a reference. When you write:</p>\n<pre><code>int[] arr = new int[10];\n</code></pre>\n<p>The <code>new int[10]</code> is akin to 'build a house', but <code>int[] arr</code> isn't a house - no, that's just a page in an address book. <code>=</code> doesn't mean 'arr is now a house', no, <code>=</code> means: write the address of the thing on the right onto the address book page on the left.</p>\n<p>So, when you call <code>SortIt(arr)</code>, java duly makes a <strong>copy</strong>, but it's copying the address book page. Not the entire house.</p>\n<p>Your sort method then follows the copy it got, tosses a brick through the window and speeds off, the little delinquent. Your main method then later goes and follows its address book page to.. the same house, and notices it has been vandalized.</p>\n<p>You have 4 options to fix this:</p>\n<ol>\n<li>Have your main code make a copy, and hand the copy to your sort method. A copy can be made with <code>Arrays.copyOf(arr)</code>.</li>\n<li>Have your sorting method make a copy of whatever error it receives.</li>\n<li>Having your sorting method do its job without modifying the input. That's.. pretty much going to boil down to option 2, unless the input is already sorted.</li>\n<li>Write your main code so that it no longer matters that the method you pass the array to modifies it.</li>\n</ol>\n"}],"owner":{"account_id":14792330,"reputation":3,"user_id":22911272,"display_name":"hipposaver"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":62,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1699935835,"accepted_answer_id":77478170,"answer_count":1,"score":0,"last_activity_date":1699935801,"creation_date":1699930025,"question_id":77477919,"body_markdown":"As you can tell by my title I wasn&#39;t quite sure how to word this. I&#39;m just getting back into some coding and doing basic practice. I thought starting back with sorting algorithms would be great. I&#39;m trying to load a file, then sort it. I have 3 algorithms coded so far. Hopefully I post enough to give you guys an idea of the problem.\r\n\r\nMy sorting class is changing my array even though I&#39;m trying to update a different array.\r\n\r\nI start by loading my array from a file with a function I made called `ReadFileToArray` &amp;ndash; which works fine.\r\n\r\n```java\r\nint[] arr;\r\nint[] sortedArray;\r\nString fp = &quot;C:/Users/test.txt&quot;;\r\narr = ReadFileToArray(fp);\r\n```\r\nI then using my sorting class to sort the array:\r\n```java\r\nSorting mySorting = new Sorting();\r\nint SelectionSort = 1\r\nSystem.out.println(&quot;\\r\\nSorting using selection sort:&quot;);\r\nsortedArray = mySorting.SortIt(arr, SelectionSort);\r\nfor (int i = 0; i &lt; arr.length; i++) {\r\nSystem.out.println(sortedArray[i]);\r\n}\r\n```\r\nThis works and sorts fine for the 3 sorting types if have.\r\n\r\nThe problem though, is if I do another pass for sorting now `arr` is sorted even though it should still maintain the unsorted list (or at least I thought that because I&#39;m updating `sortedArray` with the function, not `arr` itself).\r\n\r\nFor testing purposes, if I do:\r\n```java\r\nSorting mySorting = new Sorting();\r\nint SelectionSort = 1\r\nSystem.out.println(&quot;\\r\\nSorting using selection sort:&quot;);\r\nsortedArray = mySorting.SortIt(arr, SelectionSort);\r\nfor (int i = 0; i &lt; arr.length; i++) {\r\nSystem.out.println(sortedArray[i]);\r\n}\r\n\r\nfor (int i = 0; i &lt; arr.length; i++) {\r\nSystem.out.println(arr[i]);\r\n}\r\n```\r\n`arr` now prints sorted as well.\r\n\r\nI don&#39;t purposely use any pointers or memory stuff so I can&#39;t remember why this happens and I can&#39;t remember what to Google. I&#39;ve found I can copy the array to an unsorted array first then just copy it back each time I want to test a sorting algorithm but I was hoping someone could just point me in the right direction for what causes this again.\r\n\r\nThanks!\r\n\r\n[Edited to remove file path info.]\r\n","title":"array staying sorted after first pass not sure why","body":"<p>As you can tell by my title I wasn't quite sure how to word this. I'm just getting back into some coding and doing basic practice. I thought starting back with sorting algorithms would be great. I'm trying to load a file, then sort it. I have 3 algorithms coded so far. Hopefully I post enough to give you guys an idea of the problem.</p>\n<p>My sorting class is changing my array even though I'm trying to update a different array.</p>\n<p>I start by loading my array from a file with a function I made called <code>ReadFileToArray</code> – which works fine.</p>\n<pre class=\"lang-java prettyprint-override\"><code>int[] arr;\nint[] sortedArray;\nString fp = &quot;C:/Users/test.txt&quot;;\narr = ReadFileToArray(fp);\n</code></pre>\n<p>I then using my sorting class to sort the array:</p>\n<pre class=\"lang-java prettyprint-override\"><code>Sorting mySorting = new Sorting();\nint SelectionSort = 1\nSystem.out.println(&quot;\\r\\nSorting using selection sort:&quot;);\nsortedArray = mySorting.SortIt(arr, SelectionSort);\nfor (int i = 0; i &lt; arr.length; i++) {\nSystem.out.println(sortedArray[i]);\n}\n</code></pre>\n<p>This works and sorts fine for the 3 sorting types if have.</p>\n<p>The problem though, is if I do another pass for sorting now <code>arr</code> is sorted even though it should still maintain the unsorted list (or at least I thought that because I'm updating <code>sortedArray</code> with the function, not <code>arr</code> itself).</p>\n<p>For testing purposes, if I do:</p>\n<pre class=\"lang-java prettyprint-override\"><code>Sorting mySorting = new Sorting();\nint SelectionSort = 1\nSystem.out.println(&quot;\\r\\nSorting using selection sort:&quot;);\nsortedArray = mySorting.SortIt(arr, SelectionSort);\nfor (int i = 0; i &lt; arr.length; i++) {\nSystem.out.println(sortedArray[i]);\n}\n\nfor (int i = 0; i &lt; arr.length; i++) {\nSystem.out.println(arr[i]);\n}\n</code></pre>\n<p><code>arr</code> now prints sorted as well.</p>\n<p>I don't purposely use any pointers or memory stuff so I can't remember why this happens and I can't remember what to Google. I've found I can copy the array to an unsorted array first then just copy it back each time I want to test a sorting algorithm but I was hoping someone could just point me in the right direction for what causes this again.</p>\n<p>Thanks!</p>\n<p>[Edited to remove file path info.]</p>\n"},{"tags":["java","android","google-drive-api","pydrive","chaquopy"],"comments":[{"owner":{"account_id":16768304,"reputation":8503,"user_id":12121419,"display_name":"blackapps"},"score":0,"creation_date":1699859209,"post_id":77471472,"comment_id":136579118,"body_markdown":"So your Android app runs on your Android device and you want to upload a file to Google Drive. This drive is on the internet. In this context i donr understand why you talk about `http://localhost:8080/`. Or why you mention your pc.","body":"So your Android app runs on your Android device and you want to upload a file to Google Drive. This drive is on the internet. In this context i donr understand why you talk about <code>http:&#47;&#47;localhost:8080&#47;</code>. Or why you mention your pc."},{"owner":{"account_id":4459509,"reputation":21,"user_id":3628821,"display_name":"pips"},"score":0,"creation_date":1699883034,"post_id":77471472,"comment_id":136583005,"body_markdown":"I mentioned the pc just to say that I already tested the python script and it works. The `http://localhost:8080/` is the address PyDrive documentation recommends to put when creating the credentials.","body":"I mentioned the pc just to say that I already tested the python script and it works. The <code>http:&#47;&#47;localhost:8080&#47;</code> is the address PyDrive documentation recommends to put when creating the credentials."},{"owner":{"account_id":16768304,"reputation":8503,"user_id":12121419,"display_name":"blackapps"},"score":0,"creation_date":1699887317,"post_id":77471472,"comment_id":136583832,"body_markdown":"It still is unclear to me.  Is your Android app using `http://localhost:8080/` somewhere? As localhost would be the Android device itself. Not your pc.","body":"It still is unclear to me.  Is your Android app using <code>http:&#47;&#47;localhost:8080&#47;</code> somewhere? As localhost would be the Android device itself. Not your pc."},{"owner":{"account_id":16768304,"reputation":8503,"user_id":12121419,"display_name":"blackapps"},"score":0,"creation_date":1699887417,"post_id":77471472,"comment_id":136583851,"body_markdown":"`&quot;Failed to start a local web server&quot;` Unclear too. What kind of webserver? And where would it run locally? On your Android device or on your PC?","body":"<code>&quot;Failed to start a local web server&quot;</code> Unclear too. What kind of webserver? And where would it run locally? On your Android device or on your PC?"},{"owner":{"account_id":4459509,"reputation":21,"user_id":3628821,"display_name":"pips"},"score":0,"creation_date":1699891179,"post_id":77471472,"comment_id":136584671,"body_markdown":"I think the pc part made it more confusing, we can forget about it, the app runs by itself without the need to connect to a pc. The address `http://localhost:8080/` comes from the configuration of google cloud project, I put it in [google cloud](https://console.cloud.google.com/) &gt; APIs &amp; Services &gt; Credentials &gt; OAuth 2.0 Client IDs &gt; Web Client &gt; Authorized redirect URIs. This is what PyDrive documentation tells to do.","body":"I think the pc part made it more confusing, we can forget about it, the app runs by itself without the need to connect to a pc. The address <code>http:&#47;&#47;localhost:8080&#47;</code> comes from the configuration of google cloud project, I put it in <a href=\"https://console.cloud.google.com/\" rel=\"nofollow noreferrer\">google cloud</a> &gt; APIs &amp; Services &gt; Credentials &gt; OAuth 2.0 Client IDs &gt; Web Client &gt; Authorized redirect URIs. This is what PyDrive documentation tells to do."},{"owner":{"account_id":16768304,"reputation":8503,"user_id":12121419,"display_name":"blackapps"},"score":0,"creation_date":1699892368,"post_id":77471472,"comment_id":136584931,"body_markdown":"I asked if your Android app uses that url. You did not answer that with yes or no. And is there a web server running on your Android device?","body":"I asked if your Android app uses that url. You did not answer that with yes or no. And is there a web server running on your Android device?"},{"owner":{"account_id":4459509,"reputation":21,"user_id":3628821,"display_name":"pips"},"score":0,"creation_date":1699895483,"post_id":77471472,"comment_id":136585544,"body_markdown":"YES and YES. As far as I know it does use the url when calling `gauth.LocalWebserverAuth()` and it runs a web server.","body":"YES and YES. As far as I know it does use the url when calling <code>gauth.LocalWebserverAuth()</code> and it runs a web server."}],"answers":[{"tags":[],"owner":{"account_id":77317,"reputation":7311,"user_id":220765,"display_name":"mhsmith"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1699909237,"creation_date":1699909237,"answer_id":77476851,"question_id":77471472,"body_markdown":"Make sure your app has the [INTERNET permission](https://stackoverflow.com/q/2378607).\r\n\r\nIf that isn&#39;t it, the port 8080 may already be used by something else, so try some different values.","title":"&quot;Failed to start a local web server&quot; while trying to stablish connection with Google Drive using PyDrive with Chaquopy plugin in an android app","body":"<p>Make sure your app has the <a href=\"https://stackoverflow.com/q/2378607\">INTERNET permission</a>.</p>\n<p>If that isn't it, the port 8080 may already be used by something else, so try some different values.</p>\n"},{"tags":[],"owner":{"account_id":4459509,"reputation":21,"user_id":3628821,"display_name":"pips"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1699935538,"creation_date":1699935538,"answer_id":77478175,"question_id":77471472,"body_markdown":"I&#39;m using another solution. I upload the file through a service account plus a shared folder in google drive. This [video](https://www.youtube.com/watch?v=tamT_iGoZDQ) helped. I still run the python script with Chaquopy.","title":"&quot;Failed to start a local web server&quot; while trying to stablish connection with Google Drive using PyDrive with Chaquopy plugin in an android app","body":"<p>I'm using another solution. I upload the file through a service account plus a shared folder in google drive. This <a href=\"https://www.youtube.com/watch?v=tamT_iGoZDQ\" rel=\"nofollow noreferrer\">video</a> helped. I still run the python script with Chaquopy.</p>\n"}],"owner":{"account_id":4459509,"reputation":21,"user_id":3628821,"display_name":"pips"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":48,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":77478175,"answer_count":2,"score":1,"last_activity_date":1699935538,"creation_date":1699842517,"question_id":77471472,"body_markdown":"I am trying to upload a file from a moblie phone to Google Drive, inside my android app. Basically Chaquopy is a plugin that enables me to run python scripts inside an android application and I use it to take advantage from PyDrive library and upload the file I want. But before that, I am just trying to stablish a connection with Google Drive but it refuses to retrieve the code from authorized redirect URI http://localhost:8080/ (that is how I configured my web application`s credential on google cloud project). I&#39;ve already tried to transfer a file from pc to google drive with this project (and method) and it worked fine.\r\n\r\nI&#39;ve also tried to break `gauth.LocalWebserverAuth()` in steps as suggested in [PyDrive documentation](https://pythonhosted.org/PyDrive/oauth.html#building-your-own-authentication-flow) but get no code at the end of authentication (can&#39;t connect to localhost).\r\n\r\nI would like to use this method to upload the file, but other methods may be considered too.\r\n\r\nmy build.gradle (app level)\r\n\r\n```\r\ndefaultConfig {\r\n        applicationId &quot;com.example.epshape&quot;\r\n        minSdk 24\r\n        targetSdk 33\r\n        versionCode 1\r\n        versionName &quot;1.0&quot;\r\n\r\n        testInstrumentationRunner &quot;androidx.test.runner.AndroidJUnitRunner&quot;\r\n\r\n        ndk {\r\n            abiFilters &quot;armeabi-v7a&quot;, &quot;arm64-v8a&quot;, &quot;x86&quot;, &quot;x86_64&quot;\r\n        }\r\n        python {\r\n            buildPython &quot;C:/Users/Administrator/AppData/Local/Programs/Python/Python38/python.exe&quot;\r\n            version &quot;3.8&quot;\r\n            pip {\r\n                install &quot;pydrive&quot;\r\n            }\r\n        }\r\n    }\r\n```\r\n\r\nmy python script:\r\n\r\n```\r\nfrom pydrive.auth import GoogleAuth\r\nimport os\r\n\r\n\r\ndef upload_dataset():\r\n    GoogleAuth.DEFAULT_SETTINGS[&#39;client_config_file&#39;] = os.environ[&#39;HOME&#39;]+&#39;/client_secrets.json&#39;\r\n    gauth = GoogleAuth()\r\n    gauth.LocalWebserverAuth()\r\n```\r\n\r\npython script call from java activity class:\r\n\r\n```\r\npublic void onClickUploadDataset(View view) {\r\n        Python py = Python.getInstance();\r\n        PyObject module = py.getModule(&quot;upload_dataset&quot;);\r\n        module.callAttr(&quot;upload_dataset&quot;);\r\n    }\r\n```\r\n\r\nerror:\r\n\r\n```\r\n2023-11-12 23:05:37.636 32523-32523 python.stdout           com.example.epshape                  I  Failed to start a local web server. Please check your firewall\r\n2023-11-12 23:05:37.636 32523-32523 python.stdout           com.example.epshape                  I  settings and locally running programs that may be blocking or\r\n2023-11-12 23:05:37.636 32523-32523 python.stdout           com.example.epshape                  I  using configured ports. Default ports are 8080 and 8090.\r\n2023-11-12 23:05:37.648 32523-32523 AndroidRuntime          com.example.epshape                  D  Shutting down VM\r\n2023-11-12 23:05:37.650 32523-32523 AndroidRuntime          com.example.epshape                  E  FATAL EXCEPTION: main\r\n                                                                                                    Process: com.example.epshape, PID: 32523\r\n                                                                                                    java.lang.IllegalStateException: Could not execute method for android:onClick\r\n                                                                                                    \tat androidx.appcompat.app.AppCompatViewInflater$DeclaredOnClickListener.onClick(AppCompatViewInflater.java:473)\r\n                                                                                                    \tat android.view.View.performClick(View.java:8160)\r\n                                                                                                    \tat android.widget.TextView.performClick(TextView.java:16222)\r\n                                                                                                    \tat com.google.android.material.button.MaterialButton.performClick(MaterialButton.java:1213)\r\n                                                                                                    \tat android.view.View.performClickInternal(View.java:8137)\r\n                                                                                                    \tat android.view.View.access$3700(View.java:888)\r\n                                                                                                    \tat android.view.View$PerformClick.run(View.java:30236)\r\n                                                                                                    \tat android.os.Handler.handleCallback(Handler.java:938)\r\n                                                                                                    \tat android.os.Handler.dispatchMessage(Handler.java:99)\r\n                                                                                                    \tat android.os.Looper.loop(Looper.java:246)\r\n                                                                                                    \tat android.app.ActivityThread.main(ActivityThread.java:8506)\r\n                                                                                                    \tat java.lang.reflect.Method.invoke(Native Method)\r\n                                                                                                    \tat com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:602)\r\n                                                                                                    \tat com.android.internal.os.ZygoteInit.main(ZygoteInit.java:1130)\r\n                                                                                                    Caused by: java.lang.reflect.InvocationTargetException\r\n                                                                                                    \tat java.lang.reflect.Method.invoke(Native Method)\r\n                                                                                                    \tat androidx.appcompat.app.AppCompatViewInflater$DeclaredOnClickListener.onClick(AppCompatViewInflater.java:468)\r\n                                                                                                    \tat android.view.View.performClick(View.java:8160)&#160;\r\n                                                                                                    \tat android.widget.TextView.performClick(TextView.java:16222)&#160;\r\n                                                                                                    \tat com.google.android.material.button.MaterialButton.performClick(MaterialButton.java:1213)&#160;\r\n                                                                                                    \tat android.view.View.performClickInternal(View.java:8137)&#160;\r\n                                                                                                    \tat android.view.View.access$3700(View.java:888)&#160;\r\n                                                                                                    \tat android.view.View$PerformClick.run(View.java:30236)&#160;\r\n                                                                                                    \tat android.os.Handler.handleCallback(Handler.java:938)&#160;\r\n                                                                                                    \tat android.os.Handler.dispatchMessage(Handler.java:99)&#160;\r\n                                                                                                    \tat android.os.Looper.loop(Looper.java:246)&#160;\r\n                                                                                                    \tat android.app.ActivityThread.main(ActivityThread.java:8506)&#160;\r\n                                                                                                    \tat java.lang.reflect.Method.invoke(Native Method)&#160;\r\n                                                                                                    \tat com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:602)&#160;\r\n                                                                                                    \tat com.android.internal.os.ZygoteInit.main(ZygoteInit.java:1130)&#160;\r\n                                                                                                    Caused by: com.chaquo.python.PyException: AuthenticationError: \r\n                                                                                                    \tat &lt;python&gt;.pydrive.auth.LocalWebserverAuth(auth.py:224)\r\n                                                                                                    \tat &lt;python&gt;.pydrive.auth._decorated(auth.py:115)\r\n                                                                                                    \tat &lt;python&gt;.upload_dataset.upload_dataset(upload_dataset.py:8)\r\n                                                                                                    \tat &lt;python&gt;.chaquopy_java.call(chaquopy_java.pyx:354)\r\n                                                                                                    \tat &lt;python&gt;.chaquopy_java.Java_com_chaquo_python_PyObject_callAttrThrowsNative(chaquopy_java.pyx:326)\r\n                                                                                                    \tat com.chaquo.python.PyObject.callAttrThrowsNative(Native Method)\r\n                                                                                                    \tat com.chaquo.python.PyObject.callAttrThrows(PyObject.java:232)\r\n                                                                                                    \tat com.chaquo.python.PyObject.callAttr(PyObject.java:221)\r\n                                                                                                    \tat com.example.epshape.MainActivity.onClickUploadDataset(MainActivity.java:70)\r\n                                                                                                    \tat java.lang.reflect.Method.invoke(Native Method)&#160;\r\n                                                                                                    \tat androidx.appcompat.app.AppCompatViewInflater$DeclaredOnClickListener.onClick(AppCompatViewInflater.java:468)&#160;\r\n                                                                                                    \tat android.view.View.performClick(View.java:8160)&#160;\r\n                                                                                                    \tat android.widget.TextView.performClick(TextView.java:16222)&#160;\r\n                                                                                                    \tat com.google.android.material.button.MaterialButton.performClick(MaterialButton.java:1213)&#160;\r\n                                                                                                    \tat android.view.View.performClickInternal(View.java:8137)&#160;\r\n                                                                                                    \tat android.view.View.access$3700(View.java:888)&#160;\r\n                                                                                                    \tat android.view.View$PerformClick.run(View.java:30236)&#160;\r\n                                                                                                    \tat android.os.Handler.handleCallback(Handler.java:938)&#160;\r\n                                                                                                    \tat android.os.Handler.dispatchMessage(Handler.java:99)&#160;\r\n                                                                                                    \tat android.os.Looper.loop(Looper.java:246)&#160;\r\n                                                                                                    \tat android.app.ActivityThread.main(ActivityThread.java:8506)&#160;\r\n                                                                                                    \tat java.lang.reflect.Method.invoke(Native Method)&#160;\r\n                                                                                                    \tat com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:602)&#160;\r\n                                                                                                    \tat com.android.internal.os.ZygoteInit.main(ZygoteInit.java:1130)&#160;\r\n```\r\n\r\nThanks in advance!","title":"&quot;Failed to start a local web server&quot; while trying to stablish connection with Google Drive using PyDrive with Chaquopy plugin in an android app","body":"<p>I am trying to upload a file from a moblie phone to Google Drive, inside my android app. Basically Chaquopy is a plugin that enables me to run python scripts inside an android application and I use it to take advantage from PyDrive library and upload the file I want. But before that, I am just trying to stablish a connection with Google Drive but it refuses to retrieve the code from authorized redirect URI http://localhost:8080/ (that is how I configured my web application`s credential on google cloud project). I've already tried to transfer a file from pc to google drive with this project (and method) and it worked fine.</p>\n<p>I've also tried to break <code>gauth.LocalWebserverAuth()</code> in steps as suggested in <a href=\"https://pythonhosted.org/PyDrive/oauth.html#building-your-own-authentication-flow\" rel=\"nofollow noreferrer\">PyDrive documentation</a> but get no code at the end of authentication (can't connect to localhost).</p>\n<p>I would like to use this method to upload the file, but other methods may be considered too.</p>\n<p>my build.gradle (app level)</p>\n<pre><code>defaultConfig {\n        applicationId &quot;com.example.epshape&quot;\n        minSdk 24\n        targetSdk 33\n        versionCode 1\n        versionName &quot;1.0&quot;\n\n        testInstrumentationRunner &quot;androidx.test.runner.AndroidJUnitRunner&quot;\n\n        ndk {\n            abiFilters &quot;armeabi-v7a&quot;, &quot;arm64-v8a&quot;, &quot;x86&quot;, &quot;x86_64&quot;\n        }\n        python {\n            buildPython &quot;C:/Users/Administrator/AppData/Local/Programs/Python/Python38/python.exe&quot;\n            version &quot;3.8&quot;\n            pip {\n                install &quot;pydrive&quot;\n            }\n        }\n    }\n</code></pre>\n<p>my python script:</p>\n<pre><code>from pydrive.auth import GoogleAuth\nimport os\n\n\ndef upload_dataset():\n    GoogleAuth.DEFAULT_SETTINGS['client_config_file'] = os.environ['HOME']+'/client_secrets.json'\n    gauth = GoogleAuth()\n    gauth.LocalWebserverAuth()\n</code></pre>\n<p>python script call from java activity class:</p>\n<pre><code>public void onClickUploadDataset(View view) {\n        Python py = Python.getInstance();\n        PyObject module = py.getModule(&quot;upload_dataset&quot;);\n        module.callAttr(&quot;upload_dataset&quot;);\n    }\n</code></pre>\n<p>error:</p>\n<pre><code>2023-11-12 23:05:37.636 32523-32523 python.stdout           com.example.epshape                  I  Failed to start a local web server. Please check your firewall\n2023-11-12 23:05:37.636 32523-32523 python.stdout           com.example.epshape                  I  settings and locally running programs that may be blocking or\n2023-11-12 23:05:37.636 32523-32523 python.stdout           com.example.epshape                  I  using configured ports. Default ports are 8080 and 8090.\n2023-11-12 23:05:37.648 32523-32523 AndroidRuntime          com.example.epshape                  D  Shutting down VM\n2023-11-12 23:05:37.650 32523-32523 AndroidRuntime          com.example.epshape                  E  FATAL EXCEPTION: main\n                                                                                                    Process: com.example.epshape, PID: 32523\n                                                                                                    java.lang.IllegalStateException: Could not execute method for android:onClick\n                                                                                                        at androidx.appcompat.app.AppCompatViewInflater$DeclaredOnClickListener.onClick(AppCompatViewInflater.java:473)\n                                                                                                        at android.view.View.performClick(View.java:8160)\n                                                                                                        at android.widget.TextView.performClick(TextView.java:16222)\n                                                                                                        at com.google.android.material.button.MaterialButton.performClick(MaterialButton.java:1213)\n                                                                                                        at android.view.View.performClickInternal(View.java:8137)\n                                                                                                        at android.view.View.access$3700(View.java:888)\n                                                                                                        at android.view.View$PerformClick.run(View.java:30236)\n                                                                                                        at android.os.Handler.handleCallback(Handler.java:938)\n                                                                                                        at android.os.Handler.dispatchMessage(Handler.java:99)\n                                                                                                        at android.os.Looper.loop(Looper.java:246)\n                                                                                                        at android.app.ActivityThread.main(ActivityThread.java:8506)\n                                                                                                        at java.lang.reflect.Method.invoke(Native Method)\n                                                                                                        at com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:602)\n                                                                                                        at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:1130)\n                                                                                                    Caused by: java.lang.reflect.InvocationTargetException\n                                                                                                        at java.lang.reflect.Method.invoke(Native Method)\n                                                                                                        at androidx.appcompat.app.AppCompatViewInflater$DeclaredOnClickListener.onClick(AppCompatViewInflater.java:468)\n                                                                                                        at android.view.View.performClick(View.java:8160) \n                                                                                                        at android.widget.TextView.performClick(TextView.java:16222) \n                                                                                                        at com.google.android.material.button.MaterialButton.performClick(MaterialButton.java:1213) \n                                                                                                        at android.view.View.performClickInternal(View.java:8137) \n                                                                                                        at android.view.View.access$3700(View.java:888) \n                                                                                                        at android.view.View$PerformClick.run(View.java:30236) \n                                                                                                        at android.os.Handler.handleCallback(Handler.java:938) \n                                                                                                        at android.os.Handler.dispatchMessage(Handler.java:99) \n                                                                                                        at android.os.Looper.loop(Looper.java:246) \n                                                                                                        at android.app.ActivityThread.main(ActivityThread.java:8506) \n                                                                                                        at java.lang.reflect.Method.invoke(Native Method) \n                                                                                                        at com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:602) \n                                                                                                        at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:1130) \n                                                                                                    Caused by: com.chaquo.python.PyException: AuthenticationError: \n                                                                                                        at &lt;python&gt;.pydrive.auth.LocalWebserverAuth(auth.py:224)\n                                                                                                        at &lt;python&gt;.pydrive.auth._decorated(auth.py:115)\n                                                                                                        at &lt;python&gt;.upload_dataset.upload_dataset(upload_dataset.py:8)\n                                                                                                        at &lt;python&gt;.chaquopy_java.call(chaquopy_java.pyx:354)\n                                                                                                        at &lt;python&gt;.chaquopy_java.Java_com_chaquo_python_PyObject_callAttrThrowsNative(chaquopy_java.pyx:326)\n                                                                                                        at com.chaquo.python.PyObject.callAttrThrowsNative(Native Method)\n                                                                                                        at com.chaquo.python.PyObject.callAttrThrows(PyObject.java:232)\n                                                                                                        at com.chaquo.python.PyObject.callAttr(PyObject.java:221)\n                                                                                                        at com.example.epshape.MainActivity.onClickUploadDataset(MainActivity.java:70)\n                                                                                                        at java.lang.reflect.Method.invoke(Native Method) \n                                                                                                        at androidx.appcompat.app.AppCompatViewInflater$DeclaredOnClickListener.onClick(AppCompatViewInflater.java:468) \n                                                                                                        at android.view.View.performClick(View.java:8160) \n                                                                                                        at android.widget.TextView.performClick(TextView.java:16222) \n                                                                                                        at com.google.android.material.button.MaterialButton.performClick(MaterialButton.java:1213) \n                                                                                                        at android.view.View.performClickInternal(View.java:8137) \n                                                                                                        at android.view.View.access$3700(View.java:888) \n                                                                                                        at android.view.View$PerformClick.run(View.java:30236) \n                                                                                                        at android.os.Handler.handleCallback(Handler.java:938) \n                                                                                                        at android.os.Handler.dispatchMessage(Handler.java:99) \n                                                                                                        at android.os.Looper.loop(Looper.java:246) \n                                                                                                        at android.app.ActivityThread.main(ActivityThread.java:8506) \n                                                                                                        at java.lang.reflect.Method.invoke(Native Method) \n                                                                                                        at com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:602) \n                                                                                                        at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:1130) \n</code></pre>\n<p>Thanks in advance!</p>\n"},{"tags":["java","jackson"],"comments":[{"owner":{"account_id":112197,"reputation":2812,"user_id":296055,"display_name":"Rob Heiser"},"score":0,"creation_date":1269626042,"post_id":2525042,"comment_id":2523461,"body_markdown":"Where is the class JacksonUtils coming from? I don&#39;t see it in any of the Jackson releases.","body":"Where is the class JacksonUtils coming from? I don&#39;t see it in any of the Jackson releases."},{"owner":{"account_id":13131,"reputation":13791,"user_id":26192,"accept_rate":88,"display_name":"adamJLev"},"score":0,"creation_date":1269626364,"post_id":2525042,"comment_id":2523508,"body_markdown":"It&#39;s our wrapper for Jackson, handles some of the JsonFactory and ObjectMapper stuff that you have to do.","body":"It&#39;s our wrapper for Jackson, handles some of the JsonFactory and ObjectMapper stuff that you have to do."},{"owner":{"account_id":112197,"reputation":2812,"user_id":296055,"display_name":"Rob Heiser"},"score":1,"creation_date":1269626666,"post_id":2525042,"comment_id":2523563,"body_markdown":"So, the problem is that JacksonUtils.fromJSON() isn&#39;t declared to return Map&lt;String, String&gt;, but just Map.","body":"So, the problem is that JacksonUtils.fromJSON() isn&#39;t declared to return Map&lt;String, String&gt;, but just Map."},{"owner":{"account_id":23674,"reputation":114066,"user_id":59501,"accept_rate":75,"display_name":"StaxMan"},"score":8,"creation_date":1269627607,"post_id":2525042,"comment_id":2523708,"body_markdown":"Btw, don&#39;t assign new HashMap there on first line: that gets ignored. Just assing the call.","body":"Btw, don&#39;t assign new HashMap there on first line: that gets ignored. Just assing the call."},{"owner":{"account_id":29963,"reputation":1740,"user_id":81360,"accept_rate":43,"display_name":"Jukka Dahlbom"},"score":0,"creation_date":1355747170,"post_id":2525042,"comment_id":19177428,"body_markdown":"The title has nothing to do with your described problem, which has to do with untyped collection. The answer below is the correct answer to what you really tried to ask.","body":"The title has nothing to do with your described problem, which has to do with untyped collection. The answer below is the correct answer to what you really tried to ask."}],"answers":[{"tags":[],"owner":{"account_id":30285,"reputation":55210,"user_id":82511,"accept_rate":71,"display_name":"djna"},"down_vote_count":1,"up_vote_count":420,"is_accepted":true,"score":419,"last_activity_date":1699934628,"creation_date":1269623081,"answer_id":2525152,"question_id":2525042,"body_markdown":"*[Update Sept 2020] Although my original answer here, from many years ago, seems to be helpful and is still getting upvotes, I now use the GSON library from Google, which I find to be more intuitive.*\r\n\r\nI&#39;ve got the following code:\r\n\r\n    public void testJackson() throws IOException {  \r\n        ObjectMapper mapper = new ObjectMapper(); \r\n        File from = new File(&quot;albumnList.txt&quot;); \r\n        TypeReference&lt;HashMap&lt;String,Object&gt;&gt; typeRef \r\n                = new TypeReference&lt;HashMap&lt;String,Object&gt;&gt;() {};\r\n\r\n        HashMap&lt;String,Object&gt; o = mapper.readValue(from, typeRef); \r\n        System.out.println(&quot;Got &quot; + o); \r\n    }   \r\n\r\nIt&#39;s reading from a file, but `mapper.readValue()` will also accept an `InputStream` and you can obtain an `InputStream` from a string by using the following:\r\n\r\n    new ByteArrayInputStream(astring.getBytes(&quot;UTF-8&quot;)); \r\n\r\nThere&#39;s a bit more explanation about the mapper on [my blog][1].\r\n\r\n\r\n  [1]: https://djna.wordpress.com/2010/03/12/json-strings-no-rest-using-the-jackson-parser/","title":"How to convert a JSON string to a Map&lt;String, String&gt; with Jackson JSON","body":"<p><em>[Update Sept 2020] Although my original answer here, from many years ago, seems to be helpful and is still getting upvotes, I now use the GSON library from Google, which I find to be more intuitive.</em></p>\n<p>I've got the following code:</p>\n<pre><code>public void testJackson() throws IOException {  \n    ObjectMapper mapper = new ObjectMapper(); \n    File from = new File(&quot;albumnList.txt&quot;); \n    TypeReference&lt;HashMap&lt;String,Object&gt;&gt; typeRef \n            = new TypeReference&lt;HashMap&lt;String,Object&gt;&gt;() {};\n\n    HashMap&lt;String,Object&gt; o = mapper.readValue(from, typeRef); \n    System.out.println(&quot;Got &quot; + o); \n}   \n</code></pre>\n<p>It's reading from a file, but <code>mapper.readValue()</code> will also accept an <code>InputStream</code> and you can obtain an <code>InputStream</code> from a string by using the following:</p>\n<pre><code>new ByteArrayInputStream(astring.getBytes(&quot;UTF-8&quot;)); \n</code></pre>\n<p>There's a bit more explanation about the mapper on <a href=\"https://djna.wordpress.com/2010/03/12/json-strings-no-rest-using-the-jackson-parser/\" rel=\"nofollow noreferrer\">my blog</a>.</p>\n"},{"tags":[],"owner":{"account_id":23674,"reputation":114066,"user_id":59501,"accept_rate":75,"display_name":"StaxMan"},"down_vote_count":2,"up_vote_count":40,"is_accepted":false,"score":38,"last_activity_date":1269670629,"creation_date":1269627888,"answer_id":2525729,"question_id":2525042,"body_markdown":"Warning you get is done by compiler, not by library (or utility method).\r\n\r\nSimplest way using Jackson directly would be:\r\n\r\n    HashMap&lt;String,Object&gt; props;\r\n    \r\n    // src is a File, InputStream, String or such\r\n    props = new ObjectMapper().readValue(src, new TypeReference&lt;HashMap&lt;String,Object&gt;&gt;() {});\r\n    // or:\r\n    props = (HashMap&lt;String,Object&gt;) new ObjectMapper().readValue(src, HashMap.class);\r\n    // or even just:\r\n    @SuppressWarnings(&quot;unchecked&quot;) // suppresses typed/untype mismatch warnings, which is harmless\r\n    props = new ObjectMapper().readValue(src, HashMap.class);\r\n\r\nUtility method you call probably just does something similar to this.\r\n\r\n","title":"How to convert a JSON string to a Map&lt;String, String&gt; with Jackson JSON","body":"<p>Warning you get is done by compiler, not by library (or utility method).</p>\n\n<p>Simplest way using Jackson directly would be:</p>\n\n<pre><code>HashMap&lt;String,Object&gt; props;\n\n// src is a File, InputStream, String or such\nprops = new ObjectMapper().readValue(src, new TypeReference&lt;HashMap&lt;String,Object&gt;&gt;() {});\n// or:\nprops = (HashMap&lt;String,Object&gt;) new ObjectMapper().readValue(src, HashMap.class);\n// or even just:\n@SuppressWarnings(\"unchecked\") // suppresses typed/untype mismatch warnings, which is harmless\nprops = new ObjectMapper().readValue(src, HashMap.class);\n</code></pre>\n\n<p>Utility method you call probably just does something similar to this.</p>\n"},{"tags":[],"owner":{"account_id":154883,"reputation":2165,"user_id":371141,"accept_rate":75,"display_name":"Ning Sun"},"down_vote_count":1,"up_vote_count":71,"is_accepted":false,"score":70,"last_activity_date":1488500997,"creation_date":1276969343,"answer_id":3076569,"question_id":2525042,"body_markdown":"Try `TypeFactory`.  Here&#39;s the code for Jackson JSON (2.8.4).\r\n\r\n    Map&lt;String, String&gt; result;\r\n    ObjectMapper mapper;\r\n    TypeFactory factory;\r\n    MapType type;\r\n\r\n    factory = TypeFactory.defaultInstance();\r\n    type    = factory.constructMapType(HashMap.class, String.class, String.class);\r\n    mapper  = new ObjectMapper();\r\n    result  = mapper.readValue(data, type);\r\n\r\nHere&#39;s the code for an older version of Jackson JSON.\r\n\r\n    Map&lt;String, String&gt; result = new ObjectMapper().readValue(\r\n        data, TypeFactory.mapType(HashMap.class, String.class, String.class));\r\n\r\n","title":"How to convert a JSON string to a Map&lt;String, String&gt; with Jackson JSON","body":"<p>Try <code>TypeFactory</code>.  Here's the code for Jackson JSON (2.8.4).</p>\n\n<pre><code>Map&lt;String, String&gt; result;\nObjectMapper mapper;\nTypeFactory factory;\nMapType type;\n\nfactory = TypeFactory.defaultInstance();\ntype    = factory.constructMapType(HashMap.class, String.class, String.class);\nmapper  = new ObjectMapper();\nresult  = mapper.readValue(data, type);\n</code></pre>\n\n<p>Here's the code for an older version of Jackson JSON.</p>\n\n<pre><code>Map&lt;String, String&gt; result = new ObjectMapper().readValue(\n    data, TypeFactory.mapType(HashMap.class, String.class, String.class));\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1608283,"reputation":133,"user_id":1487889,"display_name":"Raja"},"down_vote_count":4,"up_vote_count":14,"is_accepted":false,"score":10,"last_activity_date":1340904385,"creation_date":1340871418,"answer_id":11240607,"question_id":2525042,"body_markdown":"Converting from String to JSON Map:\r\n\r\n\r\n    Map&lt;String,String&gt; map = new HashMap&lt;String,String&gt;();\r\n    \r\n    ObjectMapper mapper = new ObjectMapper();\r\n    \r\n    map = mapper.readValue(string, HashMap.class);","title":"How to convert a JSON string to a Map&lt;String, String&gt; with Jackson JSON","body":"<p>Converting from String to JSON Map:</p>\n\n<pre><code>Map&lt;String,String&gt; map = new HashMap&lt;String,String&gt;();\n\nObjectMapper mapper = new ObjectMapper();\n\nmap = mapper.readValue(string, HashMap.class);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1044261,"reputation":1244,"user_id":1049587,"display_name":"dpetruha"},"down_vote_count":2,"up_vote_count":27,"is_accepted":false,"score":25,"last_activity_date":1499835628,"creation_date":1413367113,"answer_id":26379642,"question_id":2525042,"body_markdown":"    ObjectReader reader = new ObjectMapper().readerFor(Map.class);\r\n\r\n    Map&lt;String, String&gt; map = reader.readValue(&quot;{\\&quot;foo\\&quot;:\\&quot;val\\&quot;}&quot;);\r\n\r\nNote that `reader` instance is Thread Safe.","title":"How to convert a JSON string to a Map&lt;String, String&gt; with Jackson JSON","body":"<pre><code>ObjectReader reader = new ObjectMapper().readerFor(Map.class);\n\nMap&lt;String, String&gt; map = reader.readValue(\"{\\\"foo\\\":\\\"val\\\"}\");\n</code></pre>\n\n<p>Note that <code>reader</code> instance is Thread Safe.</p>\n"},{"tags":[],"owner":{"account_id":7321083,"reputation":61,"user_id":5577104,"display_name":"JackieZhi"},"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1449727859,"creation_date":1449727474,"answer_id":34194815,"question_id":2525042,"body_markdown":"    JavaType javaType = objectMapper.getTypeFactory().constructParameterizedType(Map.class, Key.class, Value.class);\r\n    Map&lt;Key, Value&gt; map=objectMapper.readValue(jsonStr, javaType);\r\n\r\ni think this will solve your problem.","title":"How to convert a JSON string to a Map&lt;String, String&gt; with Jackson JSON","body":"<pre><code>JavaType javaType = objectMapper.getTypeFactory().constructParameterizedType(Map.class, Key.class, Value.class);\nMap&lt;Key, Value&gt; map=objectMapper.readValue(jsonStr, javaType);\n</code></pre>\n\n<p>i think this will solve your problem.</p>\n"},{"tags":[],"owner":{"account_id":13259,"reputation":67754,"user_id":26510,"accept_rate":99,"display_name":"Brad Parks"},"down_vote_count":1,"up_vote_count":6,"is_accepted":false,"score":5,"last_activity_date":1450792661,"creation_date":1450728571,"answer_id":34403557,"question_id":2525042,"body_markdown":"The following works for me:\r\n\r\n    Map&lt;String, String&gt; propertyMap = getJsonAsMap(json);\r\n\r\nwhere `getJsonAsMap` is defined like so:\r\n\r\n\r\n\tpublic HashMap&lt;String, String&gt; getJsonAsMap(String json)\r\n\t{\r\n\t\ttry\r\n\t\t{\r\n\t\t\tObjectMapper mapper = new ObjectMapper();\r\n\t\t\tTypeReference&lt;Map&lt;String,String&gt;&gt; typeRef = new TypeReference&lt;Map&lt;String,String&gt;&gt;() {};\r\n\t\t    HashMap&lt;String, String&gt; result = mapper.readValue(json, typeRef);\r\n\r\n\t\t    return result;\r\n\t\t}\r\n\t\tcatch (Exception e)\r\n\t\t{\r\n\t\t\tthrow new RuntimeException(&quot;Couldnt parse json:&quot; + json, e);\r\n\t\t}\r\n\t}\r\n\r\nNote that this *will* fail if you have child objects in your json (because they&#39;re not a `String`, they&#39;re another `HashMap`), but will work if your json is a key value list of properties like so:\r\n\r\n    {\r\n        &quot;client_id&quot;: &quot;my super id&quot;,\r\n        &quot;exp&quot;: 1481918304,\r\n        &quot;iat&quot;: &quot;1450382274&quot;,\r\n        &quot;url&quot;: &quot;http://www.example.com&quot;\r\n    }\r\n\r\n\r\n","title":"How to convert a JSON string to a Map&lt;String, String&gt; with Jackson JSON","body":"<p>The following works for me:</p>\n\n<pre><code>Map&lt;String, String&gt; propertyMap = getJsonAsMap(json);\n</code></pre>\n\n<p>where <code>getJsonAsMap</code> is defined like so:</p>\n\n<pre><code>public HashMap&lt;String, String&gt; getJsonAsMap(String json)\n{\n    try\n    {\n        ObjectMapper mapper = new ObjectMapper();\n        TypeReference&lt;Map&lt;String,String&gt;&gt; typeRef = new TypeReference&lt;Map&lt;String,String&gt;&gt;() {};\n        HashMap&lt;String, String&gt; result = mapper.readValue(json, typeRef);\n\n        return result;\n    }\n    catch (Exception e)\n    {\n        throw new RuntimeException(\"Couldnt parse json:\" + json, e);\n    }\n}\n</code></pre>\n\n<p>Note that this <em>will</em> fail if you have child objects in your json (because they're not a <code>String</code>, they're another <code>HashMap</code>), but will work if your json is a key value list of properties like so:</p>\n\n<pre><code>{\n    \"client_id\": \"my super id\",\n    \"exp\": 1481918304,\n    \"iat\": \"1450382274\",\n    \"url\": \"http://www.example.com\"\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5577830,"reputation":2697,"user_id":5320562,"display_name":"Loukan ElKadi"},"down_vote_count":3,"up_vote_count":5,"is_accepted":false,"score":2,"last_activity_date":1513755053,"creation_date":1477649907,"answer_id":40302986,"question_id":2525042,"body_markdown":"Using Google&#39;s Gson\r\n-------------------\r\n\r\nWhy not use Google&#39;s Gson as mentioned in [here][1]?\r\n\r\nVery straight forward and did the job for me:\r\n\r\n    HashMap&lt;String,String&gt; map = new Gson().fromJson( yourJsonString, new TypeToken&lt;HashMap&lt;String, String&gt;&gt;(){}.getType());\r\n\r\n\r\n  [1]: https://stackoverflow.com/a/22033974/5320562","title":"How to convert a JSON string to a Map&lt;String, String&gt; with Jackson JSON","body":"<h2>Using Google's Gson</h2>\n\n<p>Why not use Google's Gson as mentioned in <a href=\"https://stackoverflow.com/a/22033974/5320562\">here</a>?</p>\n\n<p>Very straight forward and did the job for me:</p>\n\n<pre><code>HashMap&lt;String,String&gt; map = new Gson().fromJson( yourJsonString, new TypeToken&lt;HashMap&lt;String, String&gt;&gt;(){}.getType());\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2418810,"reputation":876,"user_id":2112296,"accept_rate":13,"display_name":"NameNotFoundException"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1525432157,"creation_date":1525432157,"answer_id":50173530,"question_id":2525042,"body_markdown":"Here is the generic solution to this problem.\r\n\r\n\r\n    public static &lt;K extends Object, V extends Object&gt; Map&lt;K, V&gt; getJsonAsMap(String json, K key, V value) {\r\n        try {\r\n          ObjectMapper mapper = new ObjectMapper();\r\n          TypeReference&lt;Map&lt;K, V&gt;&gt; typeRef = new TypeReference&lt;Map&lt;K, V&gt;&gt;() {\r\n          };\r\n          return mapper.readValue(json, typeRef);\r\n        } catch (Exception e) {\r\n          throw new RuntimeException(&quot;Couldnt parse json:&quot; + json, e);\r\n        }\r\n      }\r\n\r\n\r\nHope someday somebody would think to create a util method to convert to any Key/value type of Map hence this answer :)","title":"How to convert a JSON string to a Map&lt;String, String&gt; with Jackson JSON","body":"<p>Here is the generic solution to this problem.</p>\n\n<pre><code>public static &lt;K extends Object, V extends Object&gt; Map&lt;K, V&gt; getJsonAsMap(String json, K key, V value) {\n    try {\n      ObjectMapper mapper = new ObjectMapper();\n      TypeReference&lt;Map&lt;K, V&gt;&gt; typeRef = new TypeReference&lt;Map&lt;K, V&gt;&gt;() {\n      };\n      return mapper.readValue(json, typeRef);\n    } catch (Exception e) {\n      throw new RuntimeException(\"Couldnt parse json:\" + json, e);\n    }\n  }\n</code></pre>\n\n<p>Hope someday somebody would think to create a util method to convert to any Key/value type of Map hence this answer :)</p>\n"},{"tags":[],"owner":{"account_id":4136952,"reputation":322,"user_id":3393404,"display_name":"Dustin"},"down_vote_count":1,"up_vote_count":10,"is_accepted":false,"score":9,"last_activity_date":1572460060,"creation_date":1572460060,"answer_id":58631668,"question_id":2525042,"body_markdown":"just wanted to give a Kotlin answer\r\n\r\n    val propertyMap = objectMapper.readValue&lt;Map&lt;String,String&gt;&gt;(properties, object : TypeReference&lt;Map&lt;String, String&gt;&gt;() {})\r\n\r\n","title":"How to convert a JSON string to a Map&lt;String, String&gt; with Jackson JSON","body":"<p>just wanted to give a Kotlin answer</p>\n\n<pre><code>val propertyMap = objectMapper.readValue&lt;Map&lt;String,String&gt;&gt;(properties, object : TypeReference&lt;Map&lt;String, String&gt;&gt;() {})\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6283683,"reputation":3277,"user_id":4883754,"display_name":"Jess Chen"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1647189263,"creation_date":1647189263,"answer_id":71458757,"question_id":2525042,"body_markdown":"Sample code for Kotlin.\r\n\r\n```Kotlin\r\nclass HeathCheckController {\r\n    fun get(): Any {\r\n        val config = this::class.java.getResource(&quot;/git-info.yml&quot;)?.readText()\r\n        return ObjectMapper()\r\n            .readValue(config, Map::class.java)\r\n    }\r\n}\r\n```\r\n\r\nGradle\r\n```\r\nval jackson = &quot;2.13.2&quot;\r\n```","title":"How to convert a JSON string to a Map&lt;String, String&gt; with Jackson JSON","body":"<p>Sample code for Kotlin.</p>\n<pre><code>class HeathCheckController {\n    fun get(): Any {\n        val config = this::class.java.getResource(&quot;/git-info.yml&quot;)?.readText()\n        return ObjectMapper()\n            .readValue(config, Map::class.java)\n    }\n}\n</code></pre>\n<p>Gradle</p>\n<pre><code>val jackson = &quot;2.13.2&quot;\n</code></pre>\n"}],"owner":{"account_id":13131,"reputation":13791,"user_id":26192,"accept_rate":88,"display_name":"adamJLev"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":450082,"favorite_count":0,"down_vote_count":1,"up_vote_count":254,"accepted_answer_id":2525152,"answer_count":11,"score":253,"last_activity_date":1699934628,"creation_date":1269622002,"question_id":2525042,"body_markdown":"I&#39;m trying to do something like this but it doesn&#39;t work:\r\n\r\n    Map&lt;String, String&gt; propertyMap = new HashMap&lt;String, String&gt;();\r\n\r\n    propertyMap = JacksonUtils.fromJSON(properties, Map.class);\r\n\r\nBut the IDE says: \r\n\r\n&gt; Unchecked assignment `Map to Map&lt;String,String&gt;`\r\n\r\nWhat&#39;s the right way to do this?\r\nI&#39;m only using Jackson because that&#39;s what is already available in the project, is there a native Java way of converting to/from JSON?\r\n\r\nIn PHP I would simply `json_decode($str)` and I&#39;d get back an array. I need basically the same thing here.","title":"How to convert a JSON string to a Map&lt;String, String&gt; with Jackson JSON","body":"<p>I'm trying to do something like this but it doesn't work:</p>\n\n<pre><code>Map&lt;String, String&gt; propertyMap = new HashMap&lt;String, String&gt;();\n\npropertyMap = JacksonUtils.fromJSON(properties, Map.class);\n</code></pre>\n\n<p>But the IDE says: </p>\n\n<blockquote>\n  <p>Unchecked assignment <code>Map to Map&lt;String,String&gt;</code></p>\n</blockquote>\n\n<p>What's the right way to do this?\nI'm only using Jackson because that's what is already available in the project, is there a native Java way of converting to/from JSON?</p>\n\n<p>In PHP I would simply <code>json_decode($str)</code> and I'd get back an array. I need basically the same thing here.</p>\n"},{"tags":["java","intellij-idea","project","src"],"comments":[{"owner":{"account_id":36734,"reputation":392117,"user_id":104891,"display_name":"CrazyCoder"},"score":0,"creation_date":1634236542,"post_id":69575621,"comment_id":122977804,"body_markdown":"Make sure you have the valid module with the content roots defined, see https://www.jetbrains.com/help/idea/configuring-content-roots.html and this answer: https://stackoverflow.com/a/69348378/104891.","body":"Make sure you have the valid module with the content roots defined, see <a href=\"https://www.jetbrains.com/help/idea/configuring-content-roots.html\" rel=\"nofollow noreferrer\">jetbrains.com/help/idea/configuring-content-roots.html</a> and this answer: <a href=\"https://stackoverflow.com/a/69348378/104891\">stackoverflow.com/a/69348378/104891</a>."}],"answers":[{"tags":[],"owner":{"account_id":2640358,"reputation":331,"user_id":2284150,"display_name":"Mihail"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1634236611,"creation_date":1634236611,"answer_id":69575754,"question_id":69575621,"body_markdown":"Since reinstalling IntelliJ Idea may leave settings in your user folder, you can try File -&gt; Manage IDE Settings -&gt; Restore Default Settings. Then File -&gt; New -&gt; Project  and select Java on the left pane.","title":"Can&#39;t see the .idea and src folder when creating Java Project","body":"<p>Since reinstalling IntelliJ Idea may leave settings in your user folder, you can try File -&gt; Manage IDE Settings -&gt; Restore Default Settings. Then File -&gt; New -&gt; Project  and select Java on the left pane.</p>\n"}],"owner":{"account_id":14488741,"reputation":11,"user_id":10465740,"display_name":"G.Todorov"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":934,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":1,"score":0,"last_activity_date":1699934394,"creation_date":1634235951,"question_id":69575621,"body_markdown":"I know how to create a new Java Project in IntelliJ IDEA and I did it many times before. But one day when I start my application and try to make a new Java Project, I don&#39;t have the ability to see the .idea and src folder, I have only the .iml file. And don&#39;t have the ability to make a Java Class. I try everything, I either reinstall the application but without a change. Please help me. I have an exam in three days and I am panicking so much. Help","title":"Can&#39;t see the .idea and src folder when creating Java Project","body":"<p>I know how to create a new Java Project in IntelliJ IDEA and I did it many times before. But one day when I start my application and try to make a new Java Project, I don't have the ability to see the .idea and src folder, I have only the .iml file. And don't have the ability to make a Java Class. I try everything, I either reinstall the application but without a change. Please help me. I have an exam in three days and I am panicking so much. Help</p>\n"},{"tags":["java","android","xml","android-studio","radio-button"],"comments":[{"owner":{"account_id":18768215,"reputation":323,"user_id":13685592,"display_name":"KalanaChinthaka"},"score":0,"creation_date":1596530996,"post_id":63243077,"comment_id":111833204,"body_markdown":"I think you already have an answer here. https://stackoverflow.com/a/38267841/13685592","body":"I think you already have an answer here. <a href=\"https://stackoverflow.com/a/38267841/13685592\">stackoverflow.com/a/38267841/13685592</a>"}],"answers":[{"tags":[],"owner":{"account_id":17482535,"reputation":674,"user_id":12676247,"display_name":"Jyotish Biswas"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1596531175,"creation_date":1596531175,"answer_id":63243327,"question_id":63243077,"body_markdown":"You Can use Custom Background \r\n\r\n    &lt;RadioButton\r\n       android:id=&quot;@+id/radioButtom&quot;\r\n       android:layout_width=&quot;wrap_content&quot;\r\n       android:layout_height=&quot;wrap_content&quot;\r\n       android:background=&quot;@null&quot;\r\n       android:button=&quot;@drawable/custom_background&quot;\r\n       android:checked=&quot;true&quot;\r\n       android:text=&quot;Your Text&quot; /&gt;\r\n\r\nHere is `Custom_background.xml`\r\n\r\n    &lt;selector xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot; &gt;\r\n    &lt;item\r\n        android:drawable=&quot;@drawable/your_regular_state_drawable&quot;\r\n        android:state_checked=&quot;true&quot;\r\n        android:state_pressed=&quot;true&quot; /&gt;\r\n    &lt;item\r\n        android:drawable=&quot;@drawable/your_selected_state_drawable&quot;\r\n        android:state_pressed=&quot;true&quot; /&gt;\r\n    &lt;item\r\n        android:drawable=&quot;@drawable/your_selected_state_drawable&quot;\r\n        android:state_checked=&quot;true&quot; /&gt;\r\n    &lt;item\r\n        android:drawable=&quot;@drawable/your_regular_state_drawable&quot; /&gt;\r\n&lt;/selector&gt;\r\n\r\nReferance:  You can get e better description from here https://stackoverflow.com/a/19163987/12676247","title":"How to customize radio button in android","body":"<p>You Can use Custom Background</p>\n<pre><code>&lt;RadioButton\n   android:id=&quot;@+id/radioButtom&quot;\n   android:layout_width=&quot;wrap_content&quot;\n   android:layout_height=&quot;wrap_content&quot;\n   android:background=&quot;@null&quot;\n   android:button=&quot;@drawable/custom_background&quot;\n   android:checked=&quot;true&quot;\n   android:text=&quot;Your Text&quot; /&gt;\n</code></pre>\n<p>Here is <code>Custom_background.xml</code></p>\n<pre><code>&lt;selector xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot; &gt;\n&lt;item\n    android:drawable=&quot;@drawable/your_regular_state_drawable&quot;\n    android:state_checked=&quot;true&quot;\n    android:state_pressed=&quot;true&quot; /&gt;\n&lt;item\n    android:drawable=&quot;@drawable/your_selected_state_drawable&quot;\n    android:state_pressed=&quot;true&quot; /&gt;\n&lt;item\n    android:drawable=&quot;@drawable/your_selected_state_drawable&quot;\n    android:state_checked=&quot;true&quot; /&gt;\n&lt;item\n    android:drawable=&quot;@drawable/your_regular_state_drawable&quot; /&gt;\n</code></pre>\n\n<p>Referance:  You can get e better description from here <a href=\"https://stackoverflow.com/a/19163987/12676247\">https://stackoverflow.com/a/19163987/12676247</a></p>\n"},{"tags":[],"owner":{"account_id":15162358,"reputation":1,"user_id":14681122,"display_name":"Suganthan K"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1699933950,"creation_date":1699933687,"answer_id":77478095,"question_id":63243077,"body_markdown":"      &lt;RadioGroup\r\n                                android:id=&quot;@+id/radio_group_do_you_smoke&quot;\r\n                                android:layout_width=&quot;wrap_content&quot;\r\n                                android:layout_height=&quot;wrap_content&quot;\r\n                                android:layout_gravity=&quot;center&quot;\r\n                                android:layout_marginTop=&quot;16dp&quot;\r\n                                android:background=&quot;@drawable/transparent_drawable&quot;\r\n                                android:orientation=&quot;horizontal&quot;\r\n                                app:layout_constraintEnd_toEndOf=&quot;parent&quot;\r\n                                app:layout_constraintStart_toStartOf=&quot;parent&quot;\r\n                                app:layout_constraintTop_toBottomOf=&quot;@+id/textView119&quot;&gt;\r\n    \r\n                                &lt;RadioButton\r\n                                    android:id=&quot;@+id/radio_button_yes_1&quot;\r\n                                    style=&quot;@style/BoldTextView&quot;\r\n                                    android:layout_width=&quot;100dp&quot;\r\n                                    android:layout_height=&quot;100dp&quot;\r\n                                    android:background=&quot;@drawable/rbtn_selector&quot;\r\n                                    android:button=&quot;@null&quot;\r\n                                    android:checked=&quot;false&quot;\r\n                                    android:foreground=&quot;@drawable/smoke_ic&quot;\r\n                                    android:foregroundGravity=&quot;center&quot;\r\n                                    android:gravity=&quot;center&quot;\r\n                                    android:textAlignment=&quot;center&quot;\r\n                                    android:textColor=&quot;@drawable/rbtn_textcolor_selector&quot;\r\n                                    android:textSize=&quot;14dp&quot;\r\n                                    tools:ignore=&quot;TextSizeCheck&quot;&gt;\r\n    \r\n                                &lt;/RadioButton&gt;\r\n      &lt;/RadioGroup&gt;\r\n\r\nyou can use android:foreground and android:foregroundGravity=&quot;center&quot;\r\n\r\n[image][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/fQgs9.png","title":"How to customize radio button in android","body":"<pre><code>  &lt;RadioGroup\n                            android:id=&quot;@+id/radio_group_do_you_smoke&quot;\n                            android:layout_width=&quot;wrap_content&quot;\n                            android:layout_height=&quot;wrap_content&quot;\n                            android:layout_gravity=&quot;center&quot;\n                            android:layout_marginTop=&quot;16dp&quot;\n                            android:background=&quot;@drawable/transparent_drawable&quot;\n                            android:orientation=&quot;horizontal&quot;\n                            app:layout_constraintEnd_toEndOf=&quot;parent&quot;\n                            app:layout_constraintStart_toStartOf=&quot;parent&quot;\n                            app:layout_constraintTop_toBottomOf=&quot;@+id/textView119&quot;&gt;\n\n                            &lt;RadioButton\n                                android:id=&quot;@+id/radio_button_yes_1&quot;\n                                style=&quot;@style/BoldTextView&quot;\n                                android:layout_width=&quot;100dp&quot;\n                                android:layout_height=&quot;100dp&quot;\n                                android:background=&quot;@drawable/rbtn_selector&quot;\n                                android:button=&quot;@null&quot;\n                                android:checked=&quot;false&quot;\n                                android:foreground=&quot;@drawable/smoke_ic&quot;\n                                android:foregroundGravity=&quot;center&quot;\n                                android:gravity=&quot;center&quot;\n                                android:textAlignment=&quot;center&quot;\n                                android:textColor=&quot;@drawable/rbtn_textcolor_selector&quot;\n                                android:textSize=&quot;14dp&quot;\n                                tools:ignore=&quot;TextSizeCheck&quot;&gt;\n\n                            &lt;/RadioButton&gt;\n  &lt;/RadioGroup&gt;\n</code></pre>\n<p>you can use android:foreground and android:foregroundGravity=&quot;center&quot;</p>\n<p><a href=\"https://i.stack.imgur.com/fQgs9.png\" rel=\"nofollow noreferrer\">image</a></p>\n"}],"owner":{"account_id":17966277,"reputation":103,"user_id":13056090,"display_name":"Geetika Sachdeva"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":3199,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1699933950,"creation_date":1596530237,"question_id":63243077,"body_markdown":"I am creating radio button in android application but i want to make it customized. But i don&#39;t know how to do it. I want image as icon and text under the icon as in this image shown.Also i want to change the color whenever any radiobutton is selected.\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/FBeKh.jpg\r\n\r\nThis type of radio button i want. Please tell me how can i make it ?","title":"How to customize radio button in android","body":"<p>I am creating radio button in android application but i want to make it customized. But i don't know how to do it. I want image as icon and text under the icon as in this image shown.Also i want to change the color whenever any radiobutton is selected.</p>\n<p><a href=\"https://i.stack.imgur.com/FBeKh.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/FBeKh.jpg\" alt=\"enter image description here\" /></a></p>\n<p>This type of radio button i want. Please tell me how can i make it ?</p>\n"},{"tags":["java","cytoscape","adoptopenjdk"],"answers":[{"tags":[],"owner":{"account_id":2348432,"reputation":97,"user_id":3778001,"display_name":"abhivij"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1699933541,"creation_date":1699933541,"answer_id":77478083,"question_id":77478034,"body_markdown":"The error message actually clearly mentioned the issue.\r\n\r\nI downloaded jdk version 17 from https://adoptium.net/temurin/releases/?version=17&amp;os=linux and followed the same procedure as above.\r\nThe Cytoscape installation was successful :) \r\n\r\n```sudo update-alternatives --config java``` still doesn&#39;t show this java version. Not sure why though.\r\n","title":"Correct method to use prebuilt OpenJDK binary","body":"<p>The error message actually clearly mentioned the issue.</p>\n<p>I downloaded jdk version 17 from <a href=\"https://adoptium.net/temurin/releases/?version=17&amp;os=linux\" rel=\"nofollow noreferrer\">https://adoptium.net/temurin/releases/?version=17&amp;os=linux</a> and followed the same procedure as above.\nThe Cytoscape installation was successful :)</p>\n<p><code>sudo update-alternatives --config java</code> still doesn't show this java version. Not sure why though.</p>\n"}],"owner":{"account_id":2348432,"reputation":97,"user_id":3778001,"display_name":"abhivij"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":43,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77478083,"answer_count":1,"score":0,"last_activity_date":1699933541,"creation_date":1699932651,"question_id":77478034,"body_markdown":"In the process of trying to install Cytoscape - https://cytoscape.org/download.html, I downloaded prebuilt OpenJDK binary from https://adoptium.net/\r\n\r\nCopied OpenJDK21U-jdk_x64_linux_hotspot_21.0.1_12.tar.gz to /usr/lib/jvm\r\nand \r\n\r\n    sudo tar xvf OpenJDK21U-jdk_x64_linux_hotspot_21.0.1_12.tar.gz\r\n\r\nNow there&#39;s jdk-21.0.1+12 in /usr/lib/jvm\r\n\r\n\r\nBut ```sudo update-alternatives --config java``` shows\r\n\r\n        There are 2 choices for the alternative java (providing /usr/bin/java).\r\n    \r\n      Selection    Path                                            Priority   Status\r\n    ------------------------------------------------------------\r\n      0            /usr/lib/jvm/java-11-openjdk-amd64/bin/java      1111      auto mode\r\n    * 1            /usr/lib/jvm/java-11-openjdk-amd64/bin/java      1111      manual mode\r\n      2            /usr/lib/jvm/java-8-openjdk-amd64/jre/bin/java   1081      manual mode\r\n    \r\n    Press &lt;enter&gt; to keep the current choice[*], or type selection number: \r\n\r\nNot really sure why ```jdk-21.0.1+12``` does not show up.\r\n\r\nNeverthless, I added these in /etc/environment \r\n\r\n    JAVA_HOME=&quot;/usr/lib/jvm/jdk-21.0.1+12/bin/java&quot;\r\n    INSTALL4J_JAVA_HOME=&quot;/usr/lib/jvm/jdk-21.0.1+12/bin/java&quot;\r\n\r\n```echo $JAVA_HOME``` and ```echo $INSTALL4J_JAVA_HOME``` shows these as expected\r\n\r\n\r\nBut ```sudo sh Cytoscape_3_10_1_unix.sh``` gives\r\n\r\n    No suitable Java Virtual Machine could be found on your system.\r\n    The version of the JVM must be at least 17.0.2 and at most 17.\r\n    Please define INSTALL4J_JAVA_HOME to point to a suitable JVM.\r\n\r\nI suppose I&#39;m not following the correct method to use the prebuilt OpenJDK binary.\r\nCould someone please guide me ?\r\n\r\n ","title":"Correct method to use prebuilt OpenJDK binary","body":"<p>In the process of trying to install Cytoscape - <a href=\"https://cytoscape.org/download.html\" rel=\"nofollow noreferrer\">https://cytoscape.org/download.html</a>, I downloaded prebuilt OpenJDK binary from <a href=\"https://adoptium.net/\" rel=\"nofollow noreferrer\">https://adoptium.net/</a></p>\n<p>Copied OpenJDK21U-jdk_x64_linux_hotspot_21.0.1_12.tar.gz to /usr/lib/jvm\nand</p>\n<pre><code>sudo tar xvf OpenJDK21U-jdk_x64_linux_hotspot_21.0.1_12.tar.gz\n</code></pre>\n<p>Now there's jdk-21.0.1+12 in /usr/lib/jvm</p>\n<p>But <code>sudo update-alternatives --config java</code> shows</p>\n<pre><code>    There are 2 choices for the alternative java (providing /usr/bin/java).\n\n  Selection    Path                                            Priority   Status\n------------------------------------------------------------\n  0            /usr/lib/jvm/java-11-openjdk-amd64/bin/java      1111      auto mode\n* 1            /usr/lib/jvm/java-11-openjdk-amd64/bin/java      1111      manual mode\n  2            /usr/lib/jvm/java-8-openjdk-amd64/jre/bin/java   1081      manual mode\n\nPress &lt;enter&gt; to keep the current choice[*], or type selection number: \n</code></pre>\n<p>Not really sure why <code>jdk-21.0.1+12</code> does not show up.</p>\n<p>Neverthless, I added these in /etc/environment</p>\n<pre><code>JAVA_HOME=&quot;/usr/lib/jvm/jdk-21.0.1+12/bin/java&quot;\nINSTALL4J_JAVA_HOME=&quot;/usr/lib/jvm/jdk-21.0.1+12/bin/java&quot;\n</code></pre>\n<p><code>echo $JAVA_HOME</code> and <code>echo $INSTALL4J_JAVA_HOME</code> shows these as expected</p>\n<p>But <code>sudo sh Cytoscape_3_10_1_unix.sh</code> gives</p>\n<pre><code>No suitable Java Virtual Machine could be found on your system.\nThe version of the JVM must be at least 17.0.2 and at most 17.\nPlease define INSTALL4J_JAVA_HOME to point to a suitable JVM.\n</code></pre>\n<p>I suppose I'm not following the correct method to use the prebuilt OpenJDK binary.\nCould someone please guide me ?</p>\n"},{"tags":["java","spring-boot","load-balancing","netflix-eureka","spring-cloud-gateway"],"comments":[{"owner":{"account_id":2981539,"reputation":3702,"user_id":2531402,"accept_rate":25,"display_name":"OlgaMaciaszek"},"score":0,"creation_date":1699964336,"post_id":77475740,"comment_id":136594164,"body_markdown":"Have you tried setting `spring.cloud.loadbalancer.configurations` to `weighted` (please see the docs: https://docs.spring.io/spring-cloud-commons/docs/current/reference/html/#weighted-load-balancing)? Is `MRRANDOM` your service id? SC LoadBalancer is a client-side solution, what do you mean by &quot;server-side loadbalancing&quot; in your use-case.","body":"Have you tried setting <code>spring.cloud.loadbalancer.configurations</code> to <code>weighted</code> (please see the docs: <a href=\"https://docs.spring.io/spring-cloud-commons/docs/current/reference/html/#weighted-load-balancing\" rel=\"nofollow noreferrer\">docs.spring.io/spring-cloud-commons/docs/current/reference/h&zwnj;&#8203;tml/&hellip;</a>)? Is <code>MRRANDOM</code> your service id? SC LoadBalancer is a client-side solution, what do you mean by &quot;server-side loadbalancing&quot; in your use-case."},{"owner":{"account_id":16037428,"reputation":1,"user_id":13891807,"display_name":"sertineitor"},"score":0,"creation_date":1699968322,"post_id":77475740,"comment_id":136594935,"body_markdown":"@OlgaMaciaszek Thank you very much. Yes, I have tried ```spring.cloud.loadbalancer.configurations=weighted``` in application.properties of Gateway but it didn&#39;t work. Yes, MRRANDOM is the service id. I have no problem deploying 2 instances of MRRANDOM, however, I cannot modify the round robin algorithm. I know that SC LoadBalancer is a client-side solution, but I want ribbon alternative because I need to integrate load balancing in Eureka or Gateway and not in MRRANDOM","body":"@OlgaMaciaszek Thank you very much. Yes, I have tried <code>spring.cloud.loadbalancer.configurations=weighted</code> in application.properties of Gateway but it didn&#39;t work. Yes, MRRANDOM is the service id. I have no problem deploying 2 instances of MRRANDOM, however, I cannot modify the round robin algorithm. I know that SC LoadBalancer is a client-side solution, but I want ribbon alternative because I need to integrate load balancing in Eureka or Gateway and not in MRRANDOM"},{"owner":{"account_id":2981539,"reputation":3702,"user_id":2531402,"accept_rate":25,"display_name":"OlgaMaciaszek"},"score":0,"creation_date":1700067420,"post_id":77475740,"comment_id":136610026,"body_markdown":"I&#39;m not sure I understand exactly. Can you provide a sample?","body":"I&#39;m not sure I understand exactly. Can you provide a sample?"}],"owner":{"account_id":16037428,"reputation":1,"user_id":13891807,"display_name":"sertineitor"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":52,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1699932566,"creation_date":1699896566,"question_id":77475740,"body_markdown":"I am developing an microservices based app in Spring Boot 3.1.2. I need to change the default algorithm built into the gateway load balancer (load balancing on the server side is mandatory), specifically I need to integrate Weighted Response Time algorithm, I know that this algorithm already exists in Spring Cloud.\r\n\r\nThe app has three microservices:\r\n- Eureka\r\n- Gateway\r\n- Microservice random\r\n\r\nEureka and Gateway class are by default, microservice random has only one route that returns the port. The configuration is:\r\n\r\n**Eureka (application.properties)**\r\n```\r\nserver.port=8761\r\neureka.client.register-with-eureka=false\r\neureka.client.fetch-registry=false\r\nspring.application.name=eureka-server\r\n```\r\n\r\n**Gateway (application.properties)**\r\n```\r\nserver.port=8080\r\nspring.main.web-application-type=reactive\r\n\r\neureka.instance.hostname=localhost\r\neureka.client.serviceUrl.defaultZone=http://${eureka.instance.hostname}:8761/eureka/\r\n\r\nspring.cloud.loadbalancer.ribbon.enabled=false\r\nspring.cloud.loadbalancer.enabled=true\r\nspring.cloud.gateway.discovery.locator.enabled=true\r\n\r\nspring.cloud.gateway.httpclient.wiretap=true\r\n\r\nspring.cloud.gateway.routes[0].id=mrrandom\r\nspring.cloud.gateway.routes[0].uri=lb://MRRANDOM\r\nspring.cloud.gateway.routes[0].predicates[0]=Path=/**\r\n```\r\nShould I change the configuration (application.properties) or create a configuration class?\r\n\r\nI have searched for official documentation but I have not found it, everything there is for ribbon, but ribbon is deprecated, all the internet examples use client side load balancing, but I need server side load balancing.","title":"How to change load-balancing algorithm in Gateway","body":"<p>I am developing an microservices based app in Spring Boot 3.1.2. I need to change the default algorithm built into the gateway load balancer (load balancing on the server side is mandatory), specifically I need to integrate Weighted Response Time algorithm, I know that this algorithm already exists in Spring Cloud.</p>\n<p>The app has three microservices:</p>\n<ul>\n<li>Eureka</li>\n<li>Gateway</li>\n<li>Microservice random</li>\n</ul>\n<p>Eureka and Gateway class are by default, microservice random has only one route that returns the port. The configuration is:</p>\n<p><strong>Eureka (application.properties)</strong></p>\n<pre><code>server.port=8761\neureka.client.register-with-eureka=false\neureka.client.fetch-registry=false\nspring.application.name=eureka-server\n</code></pre>\n<p><strong>Gateway (application.properties)</strong></p>\n<pre><code>server.port=8080\nspring.main.web-application-type=reactive\n\neureka.instance.hostname=localhost\neureka.client.serviceUrl.defaultZone=http://${eureka.instance.hostname}:8761/eureka/\n\nspring.cloud.loadbalancer.ribbon.enabled=false\nspring.cloud.loadbalancer.enabled=true\nspring.cloud.gateway.discovery.locator.enabled=true\n\nspring.cloud.gateway.httpclient.wiretap=true\n\nspring.cloud.gateway.routes[0].id=mrrandom\nspring.cloud.gateway.routes[0].uri=lb://MRRANDOM\nspring.cloud.gateway.routes[0].predicates[0]=Path=/**\n</code></pre>\n<p>Should I change the configuration (application.properties) or create a configuration class?</p>\n<p>I have searched for official documentation but I have not found it, everything there is for ribbon, but ribbon is deprecated, all the internet examples use client side load balancing, but I need server side load balancing.</p>\n"},{"tags":["java","amazon-web-services","spring-boot","httpclient"],"answers":[{"tags":[],"owner":{"account_id":9735515,"reputation":1045,"user_id":7218881,"display_name":"Sankalpa Wijewickrama"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1699931471,"creation_date":1699931471,"answer_id":77477986,"question_id":77469468,"body_markdown":"I was able to find a meaningful response by the following post!\r\nhttps://github.com/aws/aws-sdk-java-v2/issues/3761","title":"Spring-boot AwsCrtAsyncHttpClient and NettyNioAsyncHttpClient both in class path","body":"<p>I was able to find a meaningful response by the following post!\n<a href=\"https://github.com/aws/aws-sdk-java-v2/issues/3761\" rel=\"nofollow noreferrer\">https://github.com/aws/aws-sdk-java-v2/issues/3761</a></p>\n"}],"owner":{"account_id":9735515,"reputation":1045,"user_id":7218881,"display_name":"Sankalpa Wijewickrama"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":21,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77477986,"answer_count":1,"score":0,"last_activity_date":1699931471,"creation_date":1699801786,"question_id":77469468,"body_markdown":"In my application, I am using a custom implemented AWS SNS module. Within that module, I do create a bean of `AwsCrtAsyncHttpClient` for the `SnsAsyncClient` usage. However, I am getting the following error...\r\n\r\n    nested exception is software.amazon.awssdk.core.exception.SdkClientException: Multiple HTTP implementations were found on the classpath\r\n\r\nThe reason is that, other dependencies such as `AWS CloudWatch`, `S3`, `DynamoDB` and `SQS` has a default implementation of `netty-nio-client` which is `NettyNioAsyncHttpClient`. I had to exclude that dependency in-order to run the application. Is there any other suggestion for me to use `AwsCrtAsyncHttpClient` within the SNS implementation and let `NettyNioAsyncHttpClient` as it is without excluding? Thank you in advance. ","title":"Spring-boot AwsCrtAsyncHttpClient and NettyNioAsyncHttpClient both in class path","body":"<p>In my application, I am using a custom implemented AWS SNS module. Within that module, I do create a bean of <code>AwsCrtAsyncHttpClient</code> for the <code>SnsAsyncClient</code> usage. However, I am getting the following error...</p>\n<pre><code>nested exception is software.amazon.awssdk.core.exception.SdkClientException: Multiple HTTP implementations were found on the classpath\n</code></pre>\n<p>The reason is that, other dependencies such as <code>AWS CloudWatch</code>, <code>S3</code>, <code>DynamoDB</code> and <code>SQS</code> has a default implementation of <code>netty-nio-client</code> which is <code>NettyNioAsyncHttpClient</code>. I had to exclude that dependency in-order to run the application. Is there any other suggestion for me to use <code>AwsCrtAsyncHttpClient</code> within the SNS implementation and let <code>NettyNioAsyncHttpClient</code> as it is without excluding? Thank you in advance.</p>\n"},{"tags":["java","mysql","jdatechooser"],"comments":[{"owner":{"account_id":8096613,"reputation":996,"user_id":6100981,"display_name":"mam10eks"},"score":0,"creation_date":1461776917,"post_id":36895567,"comment_id":61357025,"body_markdown":"could you please provide the excepton?","body":"could you please provide the excepton?"},{"owner":{"account_id":7868012,"reputation":31,"user_id":5946259,"display_name":"Ahamed Zahid"},"score":0,"creation_date":1461779438,"post_id":36895567,"comment_id":61358703,"body_markdown":"yes here it is : { Exception in thread &quot;AWT-EventQueue-0&quot; java.lang.RuntimeException: Uncompilable source code - incompatible types: javax.swing.JTextField cannot be converted to java.lang.String }","body":"yes here it is : { Exception in thread &quot;AWT-EventQueue-0&quot; java.lang.RuntimeException: Uncompilable source code - incompatible types: javax.swing.JTextField cannot be converted to java.lang.String }"},{"owner":{"account_id":8096613,"reputation":996,"user_id":6100981,"display_name":"mam10eks"},"score":0,"creation_date":1461780207,"post_id":36895567,"comment_id":61359228,"body_markdown":"could you please provide the full Stacktrace?\nWhat is the type of `issDte` ?\nAlso it seems that there should be an syntax error in line 15 of your code-listing, since `JTextField` has no static method `getDateEditor()`","body":"could you please provide the full Stacktrace? What is the type of <code>issDte</code> ? Also it seems that there should be an syntax error in line 15 of your code-listing, since <code>JTextField</code> has no static method <code>getDateEditor()</code>"}],"answers":[{"tags":[],"owner":{"account_id":6880346,"reputation":1,"user_id":5287259,"display_name":"khaled sahoury"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1463438087,"creation_date":1463438087,"answer_id":37264324,"question_id":36895567,"body_markdown":"1 - here to set the date from jDateChooser to string \r\n\r\nString dob=&quot;&quot;+jDateChooser1.getDate();\r\n\r\n2 - to insert the date to database you should set the format first \r\n\r\n SimpleDateFormat Date_Format = new SimpleDateFormat(&quot;yyyy-MM-dd&quot;);\r\n Date_Format.format(jDateChooser1.getDate())\r\n","title":"How to insert date value from jdatechooser to database table","body":"<p>1 - here to set the date from jDateChooser to string </p>\n\n<p>String dob=\"\"+jDateChooser1.getDate();</p>\n\n<p>2 - to insert the date to database you should set the format first </p>\n\n<p>SimpleDateFormat Date_Format = new SimpleDateFormat(\"yyyy-MM-dd\");\n Date_Format.format(jDateChooser1.getDate())</p>\n"}],"owner":{"account_id":7868012,"reputation":31,"user_id":5946259,"display_name":"Ahamed Zahid"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":8655,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1699931371,"creation_date":1461774214,"question_id":36895567,"body_markdown":"     private void jButton5ActionPerformed(java.awt.event.ActionEvent evt) {                                         \r\n            String G_ID=gIDText.getText();\r\n            String G_Title=(String) titleCombo.getSelectedItem();\r\n            String FName=fNameText.getText();\r\n            String SName=sureNameText.getText();\r\n            String Sex=(String) genderCombo.getSelectedItem();\r\n            String dob=(JTextField)dobDte.getDateEditor().getUiComponent().getText();//error\r\n            int age=Integer.parseInt(ageText.getText());\r\n            String country=contactText.getText();\r\n            String nationality=nationText.getText();\r\n            String ZipCode=zipCodeText.getText();\r\n            String email=mailText.getText();\r\n            String PassportNo=passportText.getText();\r\n            String IssuedDate=(JTextField)issDte.getDateEditor().getUiComponent().getText();//Error\r\n            String ExpiryDate=(JTextField).getDateEditor().getUiComponent().getText();//error\r\n            String PIDNo=pidText.getText();\r\n            int ContactNo=Integer.parseInt(contactText.getText());\r\n        \r\n            Guest guest=new Guest(G_ID,G_Title,FName,SName,Sex,dob,age,country,nationality,ZipCode,email,PassportNo,IssuedDate,ExpiryDate,PIDNo,ContactNo);\r\n            try {\r\n                    boolean isAdded=GuestController.addGuest(guest);\r\n                    if (isAdded) {\r\n                        JOptionPane.showMessageDialog(NewGuest.this,&quot;Registered Success !&quot;);\r\n                    }else{\r\n                        JOptionPane.showMessageDialog(NewGuest.this,&quot;Unable to Register ! !&quot;);\r\n                }\r\n        }catch(SQLException | ClassNotFoundException ex){\r\n\t\tJOptionPane.showMessageDialog(NewGuest.this,ex.getMessage());\r\n\t}\r\n    }                                     \r\n\r\n&gt; (mvc)I have tried to insert date from jdatechooser to mysql database,but its shows error,please help me to fix this and if can please retype the correct code for me","title":"How to insert date value from jdatechooser to database table","body":"<pre><code> private void jButton5ActionPerformed(java.awt.event.ActionEvent evt) {                                         \n        String G_ID=gIDText.getText();\n        String G_Title=(String) titleCombo.getSelectedItem();\n        String FName=fNameText.getText();\n        String SName=sureNameText.getText();\n        String Sex=(String) genderCombo.getSelectedItem();\n        String dob=(JTextField)dobDte.getDateEditor().getUiComponent().getText();//error\n        int age=Integer.parseInt(ageText.getText());\n        String country=contactText.getText();\n        String nationality=nationText.getText();\n        String ZipCode=zipCodeText.getText();\n        String email=mailText.getText();\n        String PassportNo=passportText.getText();\n        String IssuedDate=(JTextField)issDte.getDateEditor().getUiComponent().getText();//Error\n        String ExpiryDate=(JTextField).getDateEditor().getUiComponent().getText();//error\n        String PIDNo=pidText.getText();\n        int ContactNo=Integer.parseInt(contactText.getText());\n\n        Guest guest=new Guest(G_ID,G_Title,FName,SName,Sex,dob,age,country,nationality,ZipCode,email,PassportNo,IssuedDate,ExpiryDate,PIDNo,ContactNo);\n        try {\n                boolean isAdded=GuestController.addGuest(guest);\n                if (isAdded) {\n                    JOptionPane.showMessageDialog(NewGuest.this,\"Registered Success !\");\n                }else{\n                    JOptionPane.showMessageDialog(NewGuest.this,\"Unable to Register ! !\");\n            }\n    }catch(SQLException | ClassNotFoundException ex){\n    JOptionPane.showMessageDialog(NewGuest.this,ex.getMessage());\n}\n}                                     \n</code></pre>\n\n<blockquote>\n  <p>(mvc)I have tried to insert date from jdatechooser to mysql database,but its shows error,please help me to fix this and if can please retype the correct code for me</p>\n</blockquote>\n"},{"tags":["java","message"],"answers":[{"tags":[],"owner":{"account_id":319873,"reputation":87612,"user_id":637853,"accept_rate":50,"display_name":"Thomas"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1699931305,"creation_date":1415786285,"answer_id":26884040,"question_id":26883993,"body_markdown":"You either need to pass `p.message` to the dialog or override Problem&#39;s `toString()` method and return `message` there. What you&#39;re seeing is the output of standard `toString()`, i.e. class name + instance id.","title":"Error message doesn&#39;t display correctly","body":"<p>You either need to pass <code>p.message</code> to the dialog or override Problem's <code>toString()</code> method and return <code>message</code> there. What you're seeing is the output of standard <code>toString()</code>, i.e. class name + instance id.</p>\n"}],"owner":{"account_id":4642869,"reputation":13,"user_id":3762162,"display_name":"user3762162"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":128,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":26884040,"answer_count":1,"score":1,"last_activity_date":1699931305,"creation_date":1415786150,"question_id":26883993,"body_markdown":"I&#39;m trying to make dialog that will display an error message whenever I make wrong move in my scrabble game. So in Problem.java, I make it like this\r\n\r\n\tclass Problem\r\n    {\r\n       Problem(String s)\r\n\t  {\r\n            message = s;\r\n\t  }\r\n    }\r\n\r\nSo I write code to display the warning like this :\r\n       \r\n        void displayProblem(Problem p)\r\n        {\r\n            \r\n            JOptionPane.showMessageDialog(this,p, &quot;WARNING!&quot;,JOptionPane.WARNING_MESSAGE);\r\n        }\r\n\r\n\r\nI expect error message when I don&#39;t put tile something like this :\r\n&quot;no tiles placed&quot;\r\njust like what&#39;s in the code but it ended up like this :\r\n\r\n![enter image description here][1]\r\n\r\nWhat&#39;s wrong with my code anyway?\r\n\r\n\r\n  [1]: http://i.stack.imgur.com/eKl7H.png","title":"Error message doesn&#39;t display correctly","body":"<p>I'm trying to make dialog that will display an error message whenever I make wrong move in my scrabble game. So in Problem.java, I make it like this</p>\n\n<pre><code>class Problem\n{\n   Problem(String s)\n  {\n        message = s;\n  }\n}\n</code></pre>\n\n<p>So I write code to display the warning like this :</p>\n\n<pre><code>    void displayProblem(Problem p)\n    {\n\n        JOptionPane.showMessageDialog(this,p, \"WARNING!\",JOptionPane.WARNING_MESSAGE);\n    }\n</code></pre>\n\n<p>I expect error message when I don't put tile something like this :\n\"no tiles placed\"\njust like what's in the code but it ended up like this :</p>\n\n<p><img src=\"https://i.stack.imgur.com/eKl7H.png\" alt=\"enter image description here\"></p>\n\n<p>What's wrong with my code anyway?</p>\n"},{"tags":["java","urlencode","iso-8859-1","urldecode"],"comments":[{"owner":{"account_id":27097454,"reputation":797,"user_id":20644506,"display_name":"Peng"},"score":2,"creation_date":1699931096,"post_id":77477958,"comment_id":136589898,"body_markdown":"post your code snippet , we could not help with you that through guess the issue","body":"post your code snippet , we could not help with you that through guess the issue"},{"owner":{"account_id":29896615,"reputation":1,"user_id":22911342,"display_name":"shlim"},"score":0,"creation_date":1699937834,"post_id":77477958,"comment_id":136590428,"body_markdown":"String param = {some EUC-KR UrlEncoding value};\n    byte[] paramByte = param.getBytes(&quot;ISO-8859-1&quot;);\n    String paramStr = new String(paramByte, &quot;EUC-KR&quot;);","body":"String param = {some EUC-KR UrlEncoding value};     byte[] paramByte = param.getBytes(&quot;ISO-8859-1&quot;);     String paramStr = new String(paramByte, &quot;EUC-KR&quot;);"},{"owner":{"account_id":1535561,"reputation":7664,"user_id":1431720,"accept_rate":89,"display_name":"Robert"},"score":0,"creation_date":1700003797,"post_id":77477958,"comment_id":136601147,"body_markdown":"Please don&#39;t add comments to clarify; [edit] your question instead. Code is hard to read in comments. Make sure it&#39;s a [mcve] and include the relevant server settings (locale).","body":"Please don&#39;t add comments to clarify; <a href=\"https://stackoverflow.com/posts/77477958/edit\">edit</a> your question instead. Code is hard to read in comments. Make sure it&#39;s a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> and include the relevant server settings (locale)."}],"owner":{"account_id":29896615,"reputation":1,"user_id":22911342,"display_name":"shlim"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":30,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":0,"score":-1,"last_activity_date":1699930863,"creation_date":1699930863,"question_id":77477958,"body_markdown":"when tomcat server have some UrlEncoding parameter, (EUC-KR UrlEncoding value)\r\nthis works well in my service\r\n1. String.getBytes(ISO-8859-1)\r\n2. new String(EUC-KR)\r\n\r\nwhy is this work?\r\n\r\nwhen i run this logic in my local env, it doesn&#39;t work and urldecoder.decode is working.","title":"Doing String UrlDecode without Using UrlDecoder.decode function","body":"<p>when tomcat server have some UrlEncoding parameter, (EUC-KR UrlEncoding value)\nthis works well in my service</p>\n<ol>\n<li>String.getBytes(ISO-8859-1)</li>\n<li>new String(EUC-KR)</li>\n</ol>\n<p>why is this work?</p>\n<p>when i run this logic in my local env, it doesn't work and urldecoder.decode is working.</p>\n"},{"tags":["java","operating-system","settings","configuration-files"],"answers":[{"tags":[],"owner":{"account_id":15903,"reputation":323403,"user_id":34088,"accept_rate":77,"display_name":"Aaron Digulla"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1228207693,"creation_date":1228207693,"answer_id":333381,"question_id":333317,"body_markdown":"It&#39;s unusual for a window app to save data in user.home but not &quot;wrong&quot;. Windows applications love to spread their data all over the place (a bit in the registry, a bit in the application&#39;s install directory, a bit in the Windows directory, a bit in System32, a bit here and a bit there). In the end, this makes it impossible to cleanly backup or remove something which results in the famous &quot;Windows rot&quot; (i.e. you have to reinstall every few months).\r\n\r\nAnyway. If you really don&#39;t want to use user.home (and I see no reason not to), use code like [this from Apache commons-lang](http://commons.apache.org/lang/xref/org/apache/commons/lang/SystemUtils.html#1007) to figure out if you&#39;re running on Windows. If this yields true, pop up a directory selection dialog where the user can specify where they want to save their data.\r\n\r\nSave this information in Preferences and use this path the next time when your app is started. This way, users can specify where they want their data and you only have to leave one bit of information in the prefs.\r\n\r\n","title":"Saving user settings/database/cache... in Java (On every OS)","body":"<p>It's unusual for a window app to save data in user.home but not \"wrong\". Windows applications love to spread their data all over the place (a bit in the registry, a bit in the application's install directory, a bit in the Windows directory, a bit in System32, a bit here and a bit there). In the end, this makes it impossible to cleanly backup or remove something which results in the famous \"Windows rot\" (i.e. you have to reinstall every few months).</p>\n\n<p>Anyway. If you really don't want to use user.home (and I see no reason not to), use code like <a href=\"http://commons.apache.org/lang/xref/org/apache/commons/lang/SystemUtils.html#1007\" rel=\"nofollow noreferrer\">this from Apache commons-lang</a> to figure out if you're running on Windows. If this yields true, pop up a directory selection dialog where the user can specify where they want to save their data.</p>\n\n<p>Save this information in Preferences and use this path the next time when your app is started. This way, users can specify where they want their data and you only have to leave one bit of information in the prefs.</p>\n"},{"tags":[],"owner":{"account_id":17835,"reputation":303885,"user_id":40342,"accept_rate":62,"display_name":"Joachim Sauer"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1228208451,"creation_date":1228208451,"answer_id":333397,"question_id":333317,"body_markdown":"For an application &quot;foo&quot; I&#39;d create a directory named &quot;.foo&quot; inside user.home. For Windows it will look slightly strange, but almost noone ever looks in that directory (and it&#39;s filled with obscure directories anyway) and on Linux/Solaris/... it will result in a hidden directory that doesn&#39;t clutter the users home directory visually.","title":"Saving user settings/database/cache... in Java (On every OS)","body":"<p>For an application \"foo\" I'd create a directory named \".foo\" inside user.home. For Windows it will look slightly strange, but almost noone ever looks in that directory (and it's filled with obscure directories anyway) and on Linux/Solaris/... it will result in a hidden directory that doesn't clutter the users home directory visually.</p>\n"},{"tags":[],"owner":{"account_id":17180,"reputation":27171,"user_id":38207,"accept_rate":83,"display_name":"James Anderson"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1699930573,"creation_date":1228209346,"answer_id":333425,"question_id":333317,"body_markdown":"The problem is not Windows but the standard Java setup.\r\n\r\nLong discussion: \r\n[JDK-4787931](https://bugs.java.com/bugdatabase/view_bug?bug_id=4787931).\r\n\r\nI would advise picking this up on a `-D MYLOC=%USERPROFILE%` property on the command line.\r\n\r\nNote that you will only get a &quot;USERPROFILE&quot; if the user did a desktop login, this does not get set if the user logged in remotely with Citrix or similar or via SSH, also, corporate desktops mess around with this setting and may set it to something unusable. ","title":"Saving user settings/database/cache... in Java (On every OS)","body":"<p>The problem is not Windows but the standard Java setup.</p>\n<p>Long discussion:\n<a href=\"https://bugs.java.com/bugdatabase/view_bug?bug_id=4787931\" rel=\"nofollow noreferrer\">JDK-4787931</a>.</p>\n<p>I would advise picking this up on a <code>-D MYLOC=%USERPROFILE%</code> property on the command line.</p>\n<p>Note that you will only get a &quot;USERPROFILE&quot; if the user did a desktop login, this does not get set if the user logged in remotely with Citrix or similar or via SSH, also, corporate desktops mess around with this setting and may set it to something unusable.</p>\n"},{"tags":[],"owner":{"account_id":8537,"reputation":40691,"user_id":15459,"accept_rate":70,"display_name":"PhiLho"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1228211657,"creation_date":1228211657,"answer_id":333500,"question_id":333317,"body_markdown":"On my WinXP Pro SP3 system, user.home points to `C:\\Documents and settings\\&lt;username&gt;`\r\nLot of applications just store their data there (instead of this path + Application data, but some others go down to there), creating a directory in Unix style, ie. dot + application name (examples: .antexplorer, .sqlworkbench, .squirrel-sql, .SunDownloadManager, .p4qt, .gimp-2.4, etc.).\r\n\r\nLooks like a decent, common practice...","title":"Saving user settings/database/cache... in Java (On every OS)","body":"<p>On my WinXP Pro SP3 system, user.home points to <code>C:\\Documents and settings\\&lt;username&gt;</code>\nLot of applications just store their data there (instead of this path + Application data, but some others go down to there), creating a directory in Unix style, ie. dot + application name (examples: .antexplorer, .sqlworkbench, .squirrel-sql, .SunDownloadManager, .p4qt, .gimp-2.4, etc.).</p>\n\n<p>Looks like a decent, common practice...</p>\n"},{"tags":[],"owner":{"account_id":663298,"reputation":11,"user_id":487945,"display_name":"orcus"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1313414504,"creation_date":1288116459,"answer_id":4026581,"question_id":333317,"body_markdown":"dynamically read (from your code) the value of `APPDATA` environment variable, and store your config files in `%APPDATA%\\\\.myapp\\config`\r\n\r\n==&gt; value is platform dependent, do not use any hard-coded paths, always read the env. var.","title":"Saving user settings/database/cache... in Java (On every OS)","body":"<p>dynamically read (from your code) the value of <code>APPDATA</code> environment variable, and store your config files in <code>%APPDATA%\\\\.myapp\\config</code></p>\n\n<p>==> value is platform dependent, do not use any hard-coded paths, always read the env. var.</p>\n"}],"owner":{"account_id":18428,"reputation":4733,"user_id":42198,"accept_rate":53,"display_name":"Somatik"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2497,"favorite_count":0,"down_vote_count":1,"up_vote_count":8,"accepted_answer_id":333500,"answer_count":5,"score":7,"last_activity_date":1699930573,"creation_date":1228205574,"question_id":333317,"body_markdown":"My Java application is saving stuff in &#39;user.home&#39; but on windows this does not seem to be the correct path to save application information (as a friend told me). An other option is using the preferences api but it&#39;s not possible to set up the hsqldb location using the preferences api. Also, I want all files to be available in the same folder (local database, config, cache, ...).\r\n\r\nI&#39;m looking for some example code or a framework that takes care of os-specific stuff.","title":"Saving user settings/database/cache... in Java (On every OS)","body":"<p>My Java application is saving stuff in 'user.home' but on windows this does not seem to be the correct path to save application information (as a friend told me). An other option is using the preferences api but it's not possible to set up the hsqldb location using the preferences api. Also, I want all files to be available in the same folder (local database, config, cache, ...).</p>\n\n<p>I'm looking for some example code or a framework that takes care of os-specific stuff.</p>\n"},{"tags":["java","tokenize"],"comments":[{"owner":{"account_id":64324,"reputation":76480,"user_id":189950,"accept_rate":79,"display_name":"Kirk Woll"},"score":2,"creation_date":1299194253,"post_id":5187820,"comment_id":5829772,"body_markdown":"Out of curiosity, in what ways do you find the default tokenizers poor?  (will help to answer your question)","body":"Out of curiosity, in what ways do you find the default tokenizers poor?  (will help to answer your question)"},{"owner":{"account_id":7178634,"reputation":55168,"user_id":5483526,"display_name":"Matt Timmermans"},"score":0,"creation_date":1699930565,"post_id":5187820,"comment_id":136589848,"body_markdown":"I have a library you might find useful https://github.com/mtimmerm/dfalex","body":"I have a library you might find useful <a href=\"https://github.com/mtimmerm/dfalex\" rel=\"nofollow noreferrer\">github.com/mtimmerm/dfalex</a>"}],"answers":[{"tags":[],"owner":{"display_name":"user206428"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1299194362,"creation_date":1299194362,"answer_id":5187861,"question_id":5187820,"body_markdown":"I really like [ANTLR][1], although it may be quite heavyweight if you only need to perform tokenisation - but it&#39;s great if you need a lexer/parser, particularly in Java.  \r\n\r\n  [1]: http://www.antlr.org/","title":"Good java tokenizers?","body":"<p>I really like <a href=\"http://www.antlr.org/\" rel=\"nofollow\">ANTLR</a>, although it may be quite heavyweight if you only need to perform tokenisation - but it's great if you need a lexer/parser, particularly in Java.  </p>\n"},{"tags":[],"owner":{"account_id":47176,"reputation":33749,"user_id":139595,"accept_rate":88,"display_name":"J&#246;rn Horstmann"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1299194812,"creation_date":1299194812,"answer_id":5187926,"question_id":5187820,"body_markdown":"Although it is included in the jdk, have you looked at [java.util.Scanner][1]? I have also used [JFlex][2] some time ago and found it quite good.\r\n\r\n [1]: http://download.oracle.com/javase/6/docs/api/java/util/Scanner.html\r\n [2]: http://jflex.de/\r\n\r\n","title":"Good java tokenizers?","body":"<p>Although it is included in the jdk, have you looked at <a href=\"http://download.oracle.com/javase/6/docs/api/java/util/Scanner.html\" rel=\"nofollow\">java.util.Scanner</a>? I have also used <a href=\"http://jflex.de/\" rel=\"nofollow\">JFlex</a> some time ago and found it quite good.</p>\n"}],"owner":{"account_id":39274,"reputation":6968,"user_id":113173,"accept_rate":75,"display_name":"jdc0589"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":925,"favorite_count":0,"down_vote_count":2,"up_vote_count":3,"closed_date":1699948849,"answer_count":2,"score":1,"last_activity_date":1699929472,"creation_date":1299194113,"question_id":5187820,"body_markdown":"I am curious about any good tokenizers out there for java OTHER THAN those included in the standard libs such as StreamTokenizer and StringTokenizer, which in my opinion are not very good.\r\n\r\nThe only one I know of is [jTopas][1], which is excellent. So, what else is out there?\r\n\r\n***Lets exclude ANTLR from suggestions. Also, I know writing one from scratch is fairly easy, but having done so a few times I found that I prefer to use something generic.\r\n\r\n\r\n  [1]: http://jtopas.sourceforge.net/jtopas/index.html","title":"Good java tokenizers?","body":"<p>I am curious about any good tokenizers out there for java OTHER THAN those included in the standard libs such as StreamTokenizer and StringTokenizer, which in my opinion are not very good.</p>\n\n<p>The only one I know of is <a href=\"http://jtopas.sourceforge.net/jtopas/index.html\" rel=\"nofollow\">jTopas</a>, which is excellent. So, what else is out there?</p>\n\n<p>***Lets exclude ANTLR from suggestions. Also, I know writing one from scratch is fairly easy, but having done so a few times I found that I prefer to use something generic.</p>\n"},{"tags":["java","c++","java-native-interface"],"comments":[{"owner":{"account_id":18256279,"reputation":661,"user_id":13290159,"display_name":"0x150"},"score":1,"creation_date":1699826067,"post_id":77470717,"comment_id":136576784,"body_markdown":"calling from c++ via jni, the constructed class loader is deleted after the scope exits (or at least that is what i think is the issue here). call NewGlobalRef on the constructed class loader, and return the return value of that function","body":"calling from c++ via jni, the constructed class loader is deleted after the scope exits (or at least that is what i think is the issue here). call NewGlobalRef on the constructed class loader, and return the return value of that function"},{"owner":{"account_id":18256279,"reputation":661,"user_id":13290159,"display_name":"0x150"},"score":2,"creation_date":1699826170,"post_id":77470717,"comment_id":136576794,"body_markdown":"additionally: i am assuming you&#39;re calling loadClass on your custom class loader when using client.getClass. does that class loader know about the other class loaders, so it can delegate in case of not finding a class? (mainly application and boot class loader)","body":"additionally: i am assuming you&#39;re calling loadClass on your custom class loader when using client.getClass. does that class loader know about the other class loaders, so it can delegate in case of not finding a class? (mainly application and boot class loader)"},{"owner":{"account_id":19121633,"reputation":125,"user_id":13965488,"display_name":"Derek Li"},"score":0,"creation_date":1699827730,"post_id":77470717,"comment_id":136576919,"body_markdown":"@0x150 I think that&#39;s it. Does the class loader need to know about other class loaders and how do you make it do that? Also, I&#39;m not calling loadClass. I&#39;m using env-&gt;DefineClass.","body":"@0x150 I think that&#39;s it. Does the class loader need to know about other class loaders and how do you make it do that? Also, I&#39;m not calling loadClass. I&#39;m using env-&gt;DefineClass."},{"owner":{"account_id":71739,"reputation":307143,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":0,"creation_date":1699829107,"post_id":77470717,"comment_id":136577032,"body_markdown":"Only that classloader knows about the injected class. You need to set that class loader as the thread context class loader. NB if `FindClass()` and friends return null there is a pending Java exception ...","body":"Only that classloader knows about the injected class. You need to set that class loader as the thread context class loader. NB if <code>FindClass()</code> and friends return null there is a pending Java exception ..."},{"owner":{"account_id":19121633,"reputation":125,"user_id":13965488,"display_name":"Derek Li"},"score":0,"creation_date":1699830871,"post_id":77470717,"comment_id":136577190,"body_markdown":"@0x150 How do you get the thread context class loader in JNI? Or is there a way for it to work to use my current class loader?","body":"@0x150 How do you get the thread context class loader in JNI? Or is there a way for it to work to use my current class loader?"},{"owner":{"account_id":71739,"reputation":307143,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":0,"creation_date":1699835838,"post_id":77470717,"comment_id":136577520,"body_markdown":"I think you would have to do it in Java. It would be easier to define the classloader from there anyway.","body":"I think you would have to do it in Java. It would be easier to define the classloader from there anyway."},{"owner":{"account_id":19121633,"reputation":125,"user_id":13965488,"display_name":"Derek Li"},"score":0,"creation_date":1699838745,"post_id":77470717,"comment_id":136577690,"body_markdown":"@user207421 But all of this has to be done in the JNI, because I don&#39;t have access to the process code.","body":"@user207421 But all of this has to be done in the JNI, because I don&#39;t have access to the process code."},{"owner":{"account_id":1684984,"reputation":27030,"user_id":1548468,"display_name":"Botje"},"score":0,"creation_date":1699873010,"post_id":77470717,"comment_id":136581207,"body_markdown":"`java.lang.ClassLoader#getSystemClassLoader`? Alternatively enumerate all threads and check their context class loader.","body":"<code>java.lang.ClassLoader#getSystemClassLoader</code>? Alternatively enumerate all threads and check their context class loader."},{"owner":{"account_id":71739,"reputation":307143,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":0,"creation_date":1699909075,"post_id":77470717,"comment_id":136587655,"body_markdown":"Well you would have to call `Thread.setContextClassLoader()` or whatever it is from JNI.","body":"Well you would have to call <code>Thread.setContextClassLoader()</code> or whatever it is from JNI."}],"answers":[{"tags":[],"owner":{"account_id":19121633,"reputation":125,"user_id":13965488,"display_name":"Derek Li"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1699928110,"creation_date":1699928110,"answer_id":77477838,"question_id":77470717,"body_markdown":"Thanks to 0x150 I found a solution for anyone who has the same problem.\r\nJust get the classloader from a random class.\r\n```cpp\r\njobject JavaUtils::getClassLoader() {\r\n    std::cout &lt;&lt; &quot;Getting class loader&quot; &lt;&lt; std::endl;\r\n    jclass classClass = client-&gt;getClass(&quot;java.lang.Class&quot;);\r\n    jclass mcClass = client-&gt;getClass(&quot;net.minecraft.client.Minecraft&quot;);\r\n    jmethodID getClassLoader = client-&gt;env-&gt;GetMethodID(classClass, &quot;getClassLoader&quot;, &quot;()Ljava/lang/ClassLoader;&quot;);\r\n    jobject classLoader = client-&gt;env-&gt;CallObjectMethod(mcClass, getClassLoader);\r\n\r\n    return classLoader;\r\n}\r\n```","title":"JNI NoClassDefFoundError while executing method in injected jar","body":"<p>Thanks to 0x150 I found a solution for anyone who has the same problem.\nJust get the classloader from a random class.</p>\n<pre class=\"lang-cpp prettyprint-override\"><code>jobject JavaUtils::getClassLoader() {\n    std::cout &lt;&lt; &quot;Getting class loader&quot; &lt;&lt; std::endl;\n    jclass classClass = client-&gt;getClass(&quot;java.lang.Class&quot;);\n    jclass mcClass = client-&gt;getClass(&quot;net.minecraft.client.Minecraft&quot;);\n    jmethodID getClassLoader = client-&gt;env-&gt;GetMethodID(classClass, &quot;getClassLoader&quot;, &quot;()Ljava/lang/ClassLoader;&quot;);\n    jobject classLoader = client-&gt;env-&gt;CallObjectMethod(mcClass, getClassLoader);\n\n    return classLoader;\n}\n</code></pre>\n"}],"owner":{"account_id":19121633,"reputation":125,"user_id":13965488,"display_name":"Derek Li"},"comment_count":9,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":45,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":77477838,"answer_count":1,"score":0,"last_activity_date":1699928110,"creation_date":1699824011,"question_id":77470717,"body_markdown":"I am getting `NoClassDefFoundError` when trying to inject a jar file into a running java process.\r\n\r\nJar file bytes:\r\n```cpp\r\nstatic const unsigned char lib_bytes[] = {\r\n        0x50, 0x4b, 0x03, 0x04, 0x14, 0x00, 0x08, 0x08, 0x08, 0x00, 0x03, 0x9a, 0x57, 0x57, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x14, 0x00, 0x04, 0x00, 0x4d, 0x45, 0x54, 0x41, 0x2d, 0x49, 0x4e, 0x46, 0x2f, 0x4d, 0x41, 0x4e, 0x49, 0x46, 0x45, 0x53, 0x54, 0x2e, 0x4d, 0x46, 0xfe, 0xca, 0x00, 0x00, 0x7d, 0x52, 0xcb, 0x6e, 0xe3, 0x30, 0x0c, 0xbc, 0x07, 0xc8, 0x3f, 0xf8, 0x07, 0x28, 0xf8, 0x15, 0xa7, 0xee, 0x75, 0x81, 0xbd, 0x15, 0xe8, 0xa9, 0xd7, 0x85, 0xe2, 0x28, 0x36, 0x0d, 0x59, 0x32, 0x24, 0x3a, 0xde, 0xfc, 0xfd, 0x52, 0xb2, 0xf3, 0x30, 0x5a, 0x2c, 0x72, 0xb1, 0xc8, 0x99, 0xe1, 0x70, 0xc2, 0x0f, 0x69, 0xf0, 0xa2, 0x3c, 0xc1, 0x97, 0x72, 0x1e, 0xad, 0x79, 0x4f, 0x32, 0x91, 0xee, 0x77, 0xbf, 0xb4, 0xf4, 0x1e, 0x3e, 0x25, 0x75, 0xef, 0x89, 0xf4, 0x03, 0xd4, 0xa2, 0x14, 0xbd, 0x74, 0x49, 0x6f, 0x24, 0x14, 0xfc, 0x9d, 0xc6, 0xd7, 0x07, 0x1a, 0xd5, 0x38, 0x79, 0xa1, 0xf8, 0x32, 0x8a, 0xe8, 0x06, 0x99, 0xa8, 0xe2, 0xab, 0xf5, 0xd6, 0x40, 0xbe, 0xdf, 0x25, 0x22, 0x5f, 0xb9, 0xed, 0x24, 0xaf, 0x12, 0xb2, 0xe3, 0x4a, 0xa6, 0x19, 0xa9, 0xe9, 0xa0, 0x12, 0x87, 0x45, 0x19, 0xcd, 0x38, 0x11, 0xe4, 0xdc, 0x5d, 0x0b, 0x13, 0xa1, 0xf6, 0xac, 0x97, 0x46, 0x02, 0x2b, 0xb9, 0xc4, 0xfa, 0x0e, 0xa1, 0xb1, 0x4e, 0x71, 0x39, 0x8b, 0x28, 0xa7, 0xa4, 0x1e, 0x02, 0xea, 0x28, 0x8a, 0x3a, 0x56, 0xe4, 0x44, 0x9d, 0xc6, 0x13, 0x97, 0x0e, 0x22, 0x5f, 0x40, 0x8d, 0x1d, 0x06, 0x6b, 0x3c, 0xa0, 0x65, 0xfd, 0x32, 0x78, 0x0a, 0xd5, 0x8e, 0x68, 0x8c, 0x5a, 0xa5, 0x28, 0xd8, 0x64, 0x28, 0x8d, 0x5a, 0xd2, 0xc5, 0xba, 0xe1, 0x65, 0xc7, 0xde, 0x8e, 0x04, 0x1e, 0x87, 0x51, 0x07, 0x60, 0xf5, 0x64, 0x6a, 0x54, 0xac, 0x64, 0x28, 0xd2, 0x8b, 0x75, 0xce, 0x59, 0x35, 0xb3, 0xbc, 0x42, 0x9e, 0x66, 0xfc, 0xcb, 0x8b, 0xcd, 0xf4, 0xd8, 0x65, 0x5b, 0xf5, 0xa6, 0xaa, 0xa5, 0x69, 0x0b, 0x60, 0xa5, 0xe2, 0xe1, 0x42, 0xdb, 0xb6, 0xec, 0x41, 0x8e, 0x18, 0xd2, 0x80, 0x93, 0x22, 0x59, 0x3f, 0xe5, 0x7b, 0xeb, 0x4e, 0xe8, 0xb7, 0x13, 0x16, 0x42, 0xdc, 0x25, 0x26, 0xfe, 0x4a, 0xf2, 0x76, 0x32, 0x67, 0x7f, 0xf3, 0xa4, 0x86, 0x40, 0x0a, 0xbc, 0xe3, 0xd6, 0x80, 0x6d, 0x5b, 0x34, 0x6d, 0x4c, 0x74, 0x63, 0x98, 0x95, 0x58, 0x73, 0x18, 0x9d, 0xf2, 0x21, 0xe0, 0xb7, 0x35, 0x71, 0x6c, 0xa6, 0xfb, 0xb0, 0xc1, 0xf6, 0xec, 0x1e, 0x0e, 0xd9, 0x6a, 0x7c, 0xb9, 0x00, 0xa9, 0x35, 0x84, 0xf4, 0xd8, 0xdc, 0x6f, 0x34, 0x52, 0x8b, 0x9e, 0x95, 0x82, 0x4b, 0x3c, 0x39, 0xe9, 0x6e, 0x3d, 0x5f, 0x41, 0x34, 0xb5, 0xec, 0x90, 0xdd, 0x77, 0x58, 0xba, 0x7a, 0xee, 0x5b, 0x6d, 0x47, 0xc5, 0xbc, 0xd8, 0x4f, 0xdf, 0xf2, 0xe5, 0x7a, 0x62, 0x23, 0xe4, 0x94, 0x73, 0x80, 0x25, 0x18, 0x6c, 0x3b, 0xd2, 0xb7, 0x80, 0x39, 0xa4, 0x79, 0x5a, 0x3f, 0x31, 0x7f, 0xc2, 0xdd, 0xc0, 0x7f, 0x50, 0xcb, 0xa5, 0x85, 0xed, 0x1e, 0x7f, 0x77, 0xbc, 0x3a, 0x30, 0x92, 0xf0, 0xaa, 0x3c, 0xcc, 0x68, 0xce, 0x76, 0xf6, 0xaf, 0x57, 0xfa, 0x40, 0x56, 0xdf, 0x71, 0x41, 0xa9, 0x2a, 0x5f, 0xd1, 0xea, 0x2f, 0x29, 0x17, 0x36, 0x78, 0xd0, 0xca, 0xef, 0xb4, 0x3b, 0x67, 0x59, 0x2c, 0x22, 0x59, 0x69, 0x71, 0xf3, 0x93, 0xf7, 0x9f, 0xec, 0xed, 0x77, 0xfb, 0xdd, 0x3f, 0x50, 0x4b, 0x07, 0x08, 0x61, 0xd5, 0x4a, 0x60, 0xc0, 0x01, 0x00, 0x00, 0xc2, 0x03, 0x00, 0x00, 0x50, 0x4b, 0x03, 0x04, 0x0a, 0x00, 0x00, 0x08, 0x00, 0x00, 0x03, 0x9a, 0x57, 0x57, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x09, 0x00, 0x00, 0x00, 0x4d, 0x45, 0x54, 0x41, 0x2d, 0x49, 0x4e, 0x46, 0x2f, 0x50, 0x4b, 0x03, 0x04, 0x0a, 0x00, 0x00, 0x08, 0x00, 0x00, 0x03, 0x9a, 0x57, 0x57, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x03, 0x00, 0x00, 0x00, 0x6d, 0x65, 0x2f, 0x50, 0x4b, 0x03, 0x04, 0x0a, 0x00, 0x00, 0x08, 0x00, 0x00, 0x03, 0x9a, 0x57, 0x57, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x09, 0x00, 0x00, 0x00, 0x6d, 0x65, 0x2f, 0x7a, 0x65, 0x64, 0x69, 0x6b, 0x2f, 0x50, 0x4b, 0x03, 0x04, 0x14, 0x00, 0x08, 0x08, 0x08, 0x00, 0xe4, 0x99, 0x57, 0x57, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x21, 0x00, 0x00, 0x00, 0x6d, 0x65, 0x2f, 0x7a, 0x65, 0x64, 0x69, 0x6b, 0x2f, 0x48, 0x61, 0x63, 0x6b, 0x43, 0x6c, 0x61, 0x73, 0x73, 0x50, 0x61, 0x74, 0x63, 0x68, 0x65, 0x72, 0x24, 0x31, 0x2e, 0x63, 0x6c, 0x61, 0x73, 0x73, 0x8d, 0x53, 0x6d, 0x4f, 0x13, 0x41, 0x10, 0x7e, 0x96, 0x1e, 0x3d, 0x28, 0x07, 0xc5, 0x62, 0x95, 0x5a, 0xd0, 0x8a, 0x55, 0xdb, 0x5a, 0x38, 0x4e, 0xf1, 0xb5, 0x84, 0x0f, 0x10, 0x0c, 0x24, 0x05, 0x4c, 0x30, 0x4d, 0x94, 0x4f, 0xdb, 0x63, 0x53, 0x0e, 0xda, 0xbb, 0x7a, 0xb7, 0xad, 0xc6, 0x7f, 0xe2, 0x17, 0x7f, 0x03, 0x26, 0x06, 0x12, 0x4d, 0xfc, 0x01, 0xfe, 0x28, 0xe3, 0xdc, 0x5e, 0x23, 0x01, 0x6a, 0xf5, 0x2e, 0xd9, 0x9d, 0x9d, 0x9d, 0x79, 0x66, 0x9e, 0x99, 0xd9, 0x9f, 0xbf, 0xbe, 0xfd, 0x00, 0xb0, 0x8c, 0x4a, 0x02, 0x43, 0x88, 0xe9, 0xd0, 0x0c, 0x0c, 0x23, 0xce, 0x70, 0xd3, 0xf3, 0x1b, 0xa6, 0x57, 0x3f, 0x14, 0xb6, 0x7c, 0x2f, 0xea, 0x26, 0x0f, 0x5a, 0xe6, 0x5a, 0x93, 0x07, 0x41, 0xcd, 0x09, 0x1c, 0xe9, 0xf9, 0x0c, 0xf1, 0x65, 0xc7, 0x75, 0xe4, 0x0a, 0x43, 0xbe, 0xb0, 0x59, 0x1d, 0x6c, 0x5c, 0x29, 0xd6, 0x46, 0x30, 0xc2, 0x60, 0x34, 0x84, 0xdc, 0xf2, 0x3a, 0x81, 0xd8, 0xe9, 0x0a, 0x3f, 0x81, 0x04, 0xc6, 0x74, 0x18, 0x06, 0xc6, 0x31, 0xc1, 0x30, 0x79, 0xc8, 0xbb, 0xdc, 0x6c, 0x72, 0xb7, 0x61, 0xee, 0x4a, 0xdf, 0x71, 0x1b, 0x14, 0x41, 0xbc, 0xeb, 0xf0, 0x66, 0xc0, 0x90, 0x2e, 0x54, 0xcf, 0x6e, 0x77, 0x54, 0x98, 0x4a, 0xf1, 0xad, 0x8e, 0x49, 0x86, 0xd9, 0x96, 0x30, 0x3f, 0x8a, 0x7d, 0xe7, 0xc8, 0xdc, 0xe0, 0xf6, 0x91, 0x0a, 0xfa, 0x8a, 0x4b, 0xfb, 0x40, 0xf8, 0x79, 0x2b, 0x6f, 0xe9, 0x48, 0x31, 0x64, 0x2e, 0x27, 0xb7, 0xd3, 0xb6, 0xbd, 0x7d, 0x11, 0xc4, 0x88, 0x2a, 0x46, 0x91, 0xc6, 0x35, 0x1d, 0xd7, 0x0d, 0x4c, 0x23, 0xc3, 0x90, 0x1d, 0x00, 0xc8, 0x30, 0x64, 0x77, 0x19, 0x72, 0xff, 0xa2, 0x1b, 0x96, 0x32, 0x6b, 0x60, 0x06, 0xb3, 0x0c, 0x63, 0xdd, 0x50, 0xb9, 0x25, 0xe4, 0x81, 0xb7, 0xcf, 0xd0, 0xa2, 0x5a, 0x5d, 0x24, 0x5a, 0xf9, 0x1f, 0xcd, 0xde, 0x65, 0x55, 0xb1, 0x4f, 0x1a, 0x51, 0x9c, 0xb3, 0x3c, 0x92, 0xb8, 0x15, 0xf6, 0x33, 0xc7, 0xb0, 0x5a, 0xa8, 0x0e, 0x60, 0x56, 0xe9, 0xd7, 0xc2, 0xf3, 0x60, 0xc5, 0x1a, 0x83, 0xb6, 0x46, 0x65, 0x63, 0x48, 0x56, 0x1d, 0x57, 0x6c, 0x77, 0x5a, 0x75, 0xe1, 0xbf, 0xe6, 0xf5, 0x26, 0x69, 0x52, 0x55, 0xcf, 0xe6, 0xcd, 0x1a, 0xf7, 0x9d, 0xf0, 0xdc, 0x53, 0x6a, 0xf2, 0xc0, 0xa1, 0xee, 0xcd, 0x0e, 0x0c, 0x4c, 0x66, 0xdc, 0x6f, 0x2c, 0x32, 0xb0, 0xcd, 0x48, 0xa4, 0x2a, 0xc7, 0xb9, 0x6d, 0x8b, 0x80, 0x5c, 0x35, 0x97, 0xb7, 0x14, 0xfa, 0x25, 0xf2, 0x0c, 0x09, 0x6a, 0xa0, 0xed, 0x3b, 0x6d, 0x35, 0x8c, 0xa3, 0x81, 0xd3, 0x70, 0xb9, 0xec, 0xf8, 0x64, 0x9d, 0x10, 0x1f, 0x6c, 0xd1, 0x96, 0x8e, 0xe7, 0x12, 0xc2, 0x54, 0x9f, 0xc2, 0x31, 0x8c, 0xef, 0x4a, 0xca, 0x64, 0x8b, 0xb7, 0x7b, 0x99, 0x26, 0x76, 0xbd, 0x8e, 0x6f, 0x8b, 0x97, 0x4e, 0x78, 0x48, 0x5f, 0xcc, 0x72, 0x21, 0x44, 0x20, 0xd6, 0xeb, 0xae, 0xdd, 0xf4, 0x02, 0x42, 0x88, 0x0a, 0xa3, 0xe3, 0x31, 0x0d, 0xd7, 0x5f, 0xb9, 0x19, 0x78, 0x8a, 0x67, 0x34, 0xf3, 0xed, 0xf0, 0xa8, 0x2e, 0x04, 0xe5, 0x33, 0x5d, 0xd8, 0x5b, 0xed, 0xd3, 0xca, 0xbd, 0x55, 0x86, 0x91, 0x6d, 0x11, 0xc8, 0x0d, 0x2f, 0x90, 0xe4, 0xb4, 0xe9, 0xba, 0xc2, 0xef, 0x39, 0x21, 0x47, 0x13, 0x3a, 0x84, 0xf0, 0x0b, 0x57, 0x7a, 0x9d, 0x60, 0xb8, 0x4d, 0xd2, 0x3a, 0x62, 0xf4, 0x03, 0x7a, 0x29, 0x5b, 0x3e, 0x05, 0xfb, 0xa2, 0x0c, 0xe6, 0x68, 0x0d, 0x0d, 0x40, 0xcf, 0xea, 0x0e, 0xad, 0xb9, 0xc8, 0x04, 0x79, 0xdc, 0x55, 0x10, 0x3a, 0xee, 0xe1, 0xbe, 0xba, 0xd7, 0x51, 0x40, 0x86, 0x3c, 0x58, 0x38, 0xa8, 0x3d, 0xc8, 0xcf, 0xf4, 0x28, 0xe3, 0xb4, 0x5b, 0xe5, 0x94, 0x7e, 0x82, 0xd1, 0x4f, 0x98, 0xf9, 0x8e, 0xe4, 0x9b, 0x52, 0x6a, 0xaa, 0xf4, 0x15, 0x57, 0xb3, 0xe5, 0xf9, 0x8c, 0x96, 0x19, 0x3e, 0xc1, 0x8d, 0x53, 0xdc, 0x3c, 0x3e, 0xaf, 0x39, 0x26, 0xa7, 0x98, 0x0a, 0x3e, 0xa1, 0x02, 0x4e, 0xd2, 0xbb, 0xba, 0x42, 0xe7, 0x19, 0x95, 0xc4, 0x4a, 0x04, 0xfa, 0x27, 0x09, 0x0b, 0xc5, 0x5e, 0x12, 0x16, 0x4a, 0x78, 0xa0, 0x78, 0x59, 0x28, 0x93, 0x14, 0x53, 0xd2, 0x3c, 0x49, 0x9a, 0x92, 0x16, 0x60, 0x12, 0xe3, 0x45, 0x85, 0xce, 0xe6, 0x48, 0x69, 0x29, 0x96, 0x0f, 0xf1, 0x88, 0x76, 0x0d, 0x4b, 0x78, 0x82, 0xe7, 0x4a, 0xb3, 0x84, 0x17, 0xb4, 0xa7, 0x48, 0x4a, 0x23, 0xfa, 0x92, 0xd1, 0xf6, 0x1b, 0x50, 0x4b, 0x07, 0x08, 0xaf, 0xf7, 0x86, 0xbd, 0x86, 0x02, 0x00, 0x00, 0xe2, 0x04, 0x00, 0x00, 0x50, 0x4b, 0x03, 0x04, 0x14, 0x00, 0x08, 0x08, 0x08, 0x00, 0xe4, 0x99, 0x57, 0x57, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x23, 0x00, 0x00, 0x00, 0x6d, 0x65, 0x2f, 0x7a, 0x65, 0x64, 0x69, 0x6b, 0x2f, 0x48, 0x61, 0x63, 0x6b, 0x43, 0x6c, 0x61, 0x73, 0x73, 0x50, 0x61, 0x74, 0x63, 0x68, 0x65, 0x72, 0x24, 0x31, 0x24, 0x31, 0x2e, 0x63, 0x6c, 0x61, 0x73, 0x73, 0x8d, 0x53, 0x5d, 0x4f, 0x13, 0x41, 0x14, 0x3d, 0xb7, 0x2d, 0x2d, 0x94, 0x2d, 0xd4, 0x42, 0x95, 0x0a, 0x08, 0xd4, 0xa2, 0xfd, 0xa0, 0x2c, 0xf5, 0xf3, 0x01, 0x62, 0x8c, 0x80, 0xa1, 0x49, 0x41, 0x13, 0x48, 0x5f, 0x7c, 0x9a, 0x6e, 0x27, 0xed, 0x42, 0xbb, 0x6b, 0x76, 0xb7, 0x35, 0xf1, 0x8f, 0x18, 0xfd, 0x17, 0x26, 0x8a, 0x89, 0x0f, 0x46, 0x5f, 0xfd, 0x51, 0xc6, 0x3b, 0xb3, 0x44, 0x12, 0x88, 0x85, 0x49, 0x76, 0x66, 0xf6, 0xce, 0x9d, 0x73, 0xce, 0xfd, 0x98, 0xdf, 0x7f, 0xbe, 0xff, 0x00, 0xb0, 0x85, 0xa7, 0x13, 0x88, 0x20, 0x9a, 0x40, 0xcc, 0xc0, 0x18, 0xe2, 0x84, 0xc5, 0xbe, 0x34, 0xdf, 0xcb, 0xb6, 0x7d, 0x62, 0xee, 0x09, 0xeb, 0x64, 0xbb, 0x27, 0x7c, 0xff, 0xb5, 0x08, 0xac, 0xae, 0xf4, 0x0a, 0xb5, 0x42, 0x8d, 0x10, 0x0f, 0xba, 0xb6, 0x5f, 0xd8, 0x60, 0xc7, 0xc6, 0x08, 0xcf, 0xcd, 0x24, 0xc6, 0x31, 0x91, 0x40, 0xd2, 0xc0, 0x24, 0x0c, 0xc2, 0x92, 0xeb, 0x75, 0x4c, 0xb7, 0x75, 0x2c, 0xad, 0xe0, 0x9d, 0x6c, 0x99, 0xc2, 0xef, 0x9b, 0xfb, 0x32, 0xe8, 0xba, 0xed, 0xa6, 0xed, 0xdb, 0x81, 0xeb, 0x31, 0xee, 0x96, 0xed, 0xd8, 0xc1, 0x33, 0xc2, 0x6a, 0xb1, 0xde, 0xb8, 0xc2, 0x7b, 0xb3, 0xd4, 0x4c, 0x60, 0x8a, 0x90, 0x3e, 0x16, 0x43, 0x61, 0xf6, 0x84, 0xd3, 0x31, 0x77, 0xdc, 0x41, 0xab, 0x27, 0x93, 0x48, 0x21, 0x6d, 0xe0, 0x06, 0x32, 0x84, 0xc9, 0xb6, 0x36, 0x35, 0x45, 0x6f, 0x20, 0x09, 0xd1, 0x62, 0x69, 0x27, 0xfe, 0x7c, 0x1c, 0x7a, 0xa8, 0x90, 0x6f, 0x1a, 0xb8, 0x85, 0x39, 0x42, 0xa4, 0x3f, 0x24, 0xac, 0x5c, 0xc9, 0xa8, 0xe2, 0xb9, 0x6d, 0x60, 0x1e, 0x0b, 0x04, 0x63, 0xa8, 0x8c, 0x8d, 0xb6, 0x55, 0x77, 0x7c, 0x87, 0x90, 0x2d, 0x36, 0xce, 0x75, 0xbc, 0xd2, 0x18, 0x2c, 0x90, 0xf0, 0xa2, 0x38, 0x32, 0x43, 0xd7, 0x89, 0x92, 0x10, 0xdb, 0x76, 0xdb, 0x2c, 0x7f, 0xba, 0x61, 0x3b, 0xf2, 0x60, 0xd0, 0x6f, 0x49, 0xef, 0x48, 0x70, 0x54, 0x84, 0x4c, 0xc3, 0xb5, 0x44, 0xaf, 0x29, 0x3c, 0x5b, 0xfd, 0x9f, 0x19, 0x63, 0xaa, 0x38, 0x9c, 0xed, 0x51, 0xc4, 0x4c, 0xcd, 0x8e, 0xc2, 0xeb, 0x70, 0x0d, 0xa9, 0x1e, 0x6e, 0xb9, 0xae, 0xd1, 0xa1, 0xf0, 0x14, 0xea, 0xc5, 0x94, 0xb2, 0xf3, 0xd8, 0x30, 0xcc, 0x61, 0xe6, 0x72, 0x9c, 0x84, 0xd4, 0x61, 0xc0, 0x14, 0xfb, 0xe2, 0xed, 0x99, 0x84, 0xe4, 0xa1, 0x3b, 0xf0, 0x2c, 0xf9, 0xd2, 0x56, 0x3f, 0xd9, 0x8b, 0xf4, 0xeb, 0x0a, 0x81, 0xc3, 0xd9, 0x75, 0xac, 0x9e, 0xeb, 0xdb, 0x4e, 0x27, 0x8c, 0x38, 0x01, 0x93, 0x30, 0x3f, 0x42, 0xb4, 0x81, 0x1a, 0x1e, 0x70, 0x4d, 0x75, 0xe6, 0xc3, 0x3b, 0x84, 0x3e, 0x77, 0xca, 0xb9, 0xa2, 0xc3, 0xc0, 0x63, 0xbc, 0xcd, 0xeb, 0x58, 0xde, 0x5c, 0x36, 0x95, 0xae, 0xac, 0x06, 0x61, 0xfc, 0x40, 0xfa, 0xc1, 0x9e, 0xeb, 0x07, 0x09, 0x3c, 0x26, 0xe4, 0xfe, 0x2b, 0x97, 0x3b, 0xa4, 0xee, 0x38, 0xd2, 0xd3, 0x36, 0xe9, 0x63, 0x99, 0xdb, 0x4d, 0x75, 0x1e, 0xa5, 0xd3, 0xea, 0x8d, 0xf1, 0x2e, 0xc2, 0xdf, 0x24, 0x16, 0x41, 0xb8, 0xc3, 0xbb, 0x23, 0x44, 0x11, 0xe3, 0xd5, 0x28, 0x57, 0xbe, 0x82, 0xca, 0x0b, 0xd5, 0x6f, 0x48, 0x7c, 0xd6, 0x5e, 0x4b, 0x3c, 0xc7, 0xd9, 0x0b, 0xdc, 0xd2, 0xcb, 0x3c, 0x97, 0x43, 0x3f, 0xac, 0x20, 0xaf, 0x1b, 0x59, 0xbf, 0x59, 0x7d, 0x6e, 0xe0, 0x2e, 0x0a, 0x1a, 0xd7, 0xc0, 0x2a, 0xe6, 0x18, 0x91, 0x54, 0xb3, 0x9e, 0x31, 0x0c, 0xf8, 0x9e, 0xba, 0x99, 0xaf, 0x1c, 0x54, 0x7f, 0x21, 0xf5, 0x11, 0x33, 0xd5, 0x9f, 0x48, 0xed, 0xaf, 0x9d, 0x62, 0x7a, 0x16, 0x33, 0x1f, 0x3e, 0x21, 0x5a, 0xfe, 0x82, 0x6c, 0xe5, 0x14, 0x39, 0xc5, 0x1b, 0xd5, 0xbc, 0x19, 0x7d, 0x63, 0x16, 0x53, 0xc8, 0x22, 0xc7, 0x88, 0x2b, 0x3c, 0x2b, 0x0d, 0xcb, 0x7c, 0x3e, 0xc5, 0xea, 0xef, 0xe1, 0xbe, 0xe6, 0xcb, 0xff, 0x53, 0x93, 0x47, 0x11, 0x25, 0x66, 0x2c, 0x6b, 0x0c, 0xca, 0x31, 0x40, 0x45, 0x87, 0xb1, 0x86, 0x2a, 0xaf, 0x31, 0xac, 0x63, 0x03, 0x0f, 0xb5, 0xe5, 0x11, 0x9e, 0x68, 0x8a, 0x08, 0xdb, 0xc2, 0x11, 0x09, 0x97, 0xbf, 0x50, 0x4b, 0x07, 0x08, 0xcd, 0x1d, 0x0f, 0xa0, 0x58, 0x02, 0x00, 0x00, 0x98, 0x04, 0x00, 0x00, 0x50, 0x4b, 0x03, 0x04, 0x14, 0x00, 0x08, 0x08, 0x08, 0x00, 0xe4, 0x99, 0x57, 0x57, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x1f, 0x00, 0x00, 0x00, 0x6d, 0x65, 0x2f, 0x7a, 0x65, 0x64, 0x69, 0x6b, 0x2f, 0x48, 0x61, 0x63, 0x6b, 0x43, 0x6c, 0x61, 0x73, 0x73, 0x50, 0x61, 0x74, 0x63, 0x68, 0x65, 0x72, 0x2e, 0x63, 0x6c, 0x61, 0x73, 0x73, 0x95, 0x54, 0xeb, 0x52, 0xd3, 0x40, 0x18, 0x3d, 0x4b, 0x0b, 0xa1, 0x25, 0x08, 0x22, 0x20, 0x88, 0x5c, 0x05, 0x6d, 0x2b, 0x10, 0x50, 0xbc, 0x51, 0x44, 0xa1, 0x82, 0x54, 0x4b, 0x41, 0x61, 0x70, 0x90, 0x5f, 0xdb, 0x74, 0x81, 0x40, 0x48, 0x3a, 0xe9, 0x22, 0xd6, 0x67, 0xf0, 0x61, 0x74, 0x06, 0xc1, 0x91, 0x19, 0x1f, 0xc0, 0x87, 0x72, 0xfc, 0x36, 0xe1, 0x36, 0x60, 0x41, 0x33, 0x93, 0xec, 0x25, 0xdf, 0x39, 0xdf, 0xf9, 0x2e, 0xbb, 0xbf, 0x7e, 0xff, 0xf8, 0x09, 0x60, 0x0c, 0x6f, 0xa2, 0xa8, 0x40, 0x48, 0x43, 0x58, 0x47, 0x25, 0xaa, 0x18, 0xea, 0x37, 0xf8, 0x07, 0x6e, 0xd8, 0xdc, 0x59, 0x33, 0xe6, 0x72, 0x1b, 0xc2, 0x94, 0x0c, 0x55, 0x63, 0x96, 0x63, 0xc9, 0x71, 0x86, 0x50, 0x2c, 0xbe, 0x14, 0x45, 0x35, 0x22, 0x1a, 0xa2, 0x3a, 0x6a, 0xa0, 0x33, 0x74, 0x38, 0x42, 0x1a, 0x5b, 0x96, 0x23, 0x4c, 0x8f, 0xaf, 0x4a, 0xc3, 0xb4, 0x2d, 0xe1, 0x48, 0x63, 0xf6, 0x68, 0x83, 0x41, 0x5f, 0x13, 0xf2, 0xd4, 0xb2, 0x27, 0x16, 0xcf, 0x5c, 0x0c, 0x49, 0x46, 0xc8, 0xc3, 0x15, 0x1d, 0x75, 0xa8, 0x67, 0x88, 0xc8, 0x75, 0x31, 0x6f, 0xf3, 0x92, 0xf0, 0x18, 0xfa, 0xff, 0x0e, 0xa4, 0xd7, 0x92, 0x25, 0x63, 0xca, 0x1f, 0x02, 0xdb, 0x85, 0x79, 0x22, 0x69, 0xc0, 0x35, 0x0d, 0x8d, 0x3a, 0x9a, 0xd0, 0xcc, 0x90, 0xf8, 0x77, 0x28, 0x49, 0x36, 0x79, 0x81, 0xe7, 0x2c, 0xdb, 0x92, 0x96, 0x28, 0x32, 0x0c, 0x9d, 0xf1, 0x7b, 0x88, 0x2a, 0xf8, 0xf6, 0x46, 0x00, 0x4b, 0x9d, 0x42, 0x90, 0xef, 0x16, 0xb4, 0x6a, 0xb8, 0xa1, 0xa3, 0x0d, 0x37, 0x19, 0x06, 0xff, 0x0f, 0xce, 0x50, 0xc3, 0x6d, 0xdb, 0xdd, 0x99, 0xb6, 0x4b, 0x96, 0xb3, 0xc6, 0xc0, 0xde, 0x6b, 0xe8, 0x60, 0x68, 0x77, 0xbd, 0x35, 0xc3, 0xf5, 0x2b, 0xb2, 0x23, 0x72, 0x06, 0x2f, 0x6e, 0x19, 0x29, 0x9b, 0x17, 0x8b, 0xef, 0x3c, 0x4b, 0x0a, 0x2f, 0x8a, 0x76, 0x74, 0xa9, 0x0a, 0x76, 0x33, 0x84, 0x63, 0xe9, 0xf8, 0x92, 0x86, 0x5b, 0x0c, 0x6d, 0x5b, 0xc2, 0xf8, 0x24, 0xf2, 0xd6, 0xa6, 0x31, 0xc3, 0xcd, 0x4d, 0xdf, 0x7c, 0x9e, 0x4b, 0x73, 0x5d, 0x78, 0xbd, 0xc3, 0x1a, 0xfa, 0x18, 0x5a, 0xcf, 0x93, 0xce, 0x15, 0x4c, 0x37, 0x2f, 0x8a, 0x21, 0xe2, 0x42, 0x14, 0x3d, 0x88, 0x29, 0xd6, 0x38, 0x43, 0x6f, 0x2c, 0x9d, 0x29, 0x23, 0x61, 0xc9, 0x2a, 0x5a, 0xd2, 0xf5, 0x92, 0xca, 0xeb, 0xdd, 0xf2, 0x4a, 0xdf, 0x0a, 0x9e, 0x57, 0x4a, 0x13, 0x18, 0x50, 0x9c, 0x83, 0x0c, 0x95, 0xb1, 0x95, 0x49, 0xd5, 0x51, 0x09, 0x0c, 0xe9, 0x18, 0xc6, 0x3d, 0x6a, 0x35, 0x6e, 0x9a, 0xa2, 0x20, 0x95, 0xbb, 0xcb, 0xbc, 0xa5, 0x15, 0xb2, 0x1d, 0x23, 0x3a, 0x1e, 0xe0, 0x21, 0x25, 0x4d, 0xba, 0x93, 0x25, 0x29, 0x26, 0x3c, 0x8f, 0x97, 0x54, 0x0e, 0xe2, 0x2b, 0x93, 0x1a, 0x1e, 0x53, 0x88, 0x65, 0x73, 0x40, 0x56, 0x29, 0x0a, 0x95, 0xa1, 0x2e, 0x43, 0xc5, 0xc9, 0x6e, 0x6f, 0xe5, 0x84, 0xb7, 0xc8, 0x73, 0x36, 0xed, 0x34, 0x64, 0x5c, 0x93, 0xdb, 0x4b, 0xdc, 0xb3, 0xd4, 0xfa, 0x70, 0x33, 0x2c, 0xd7, 0x2d, 0xaa, 0x4e, 0x5b, 0xa6, 0x2c, 0x63, 0x92, 0x21, 0x9a, 0x77, 0x17, 0xe4, 0xf6, 0xea, 0x6a, 0x3a, 0xbf, 0x49, 0x8d, 0x54, 0x50, 0xfb, 0xbe, 0x85, 0xaa, 0x6b, 0x0b, 0x85, 0x9b, 0x39, 0x39, 0x5e, 0x0b, 0xd2, 0xa3, 0x02, 0x27, 0x49, 0x28, 0xc1, 0x4c, 0x65, 0xa4, 0x02, 0x20, 0xbb, 0x0a, 0xb5, 0x53, 0xbb, 0xb8, 0xee, 0x51, 0xc2, 0x52, 0xae, 0x23, 0xc5, 0x47, 0xa9, 0x24, 0x9d, 0x43, 0x52, 0xd0, 0xe6, 0x49, 0x0b, 0x30, 0x74, 0x96, 0x4b, 0x59, 0x60, 0x90, 0x54, 0x9d, 0x7d, 0x2a, 0x83, 0x0c, 0x5d, 0x97, 0xe5, 0xf8, 0xc8, 0x43, 0x50, 0xba, 0x0b, 0x3c, 0x04, 0x06, 0x2a, 0xfe, 0x05, 0x77, 0xdb, 0x33, 0xc5, 0xb4, 0xa5, 0x32, 0xd6, 0x74, 0x36, 0x41, 0x83, 0x2a, 0x06, 0x22, 0xcd, 0x8a, 0xa2, 0x9c, 0x15, 0x2a, 0xe1, 0x45, 0x0d, 0x73, 0xd4, 0x32, 0x17, 0x34, 0x6a, 0xef, 0x30, 0xe9, 0x4e, 0x3b, 0x0e, 0x9d, 0x92, 0x20, 0x91, 0xe8, 0xc6, 0x23, 0xba, 0xb3, 0xd4, 0x13, 0x02, 0x53, 0xb7, 0x16, 0x7d, 0x9f, 0xd0, 0xca, 0xa0, 0x91, 0xd1, 0x58, 0x99, 0xd8, 0x07, 0xfb, 0x4a, 0x93, 0x0a, 0x8c, 0xd2, 0xb7, 0xca, 0xdf, 0xac, 0x42, 0x92, 0xbe, 0x7a, 0x60, 0x40, 0xf7, 0xde, 0x53, 0x1a, 0x23, 0x18, 0x3f, 0x06, 0x27, 0x0e, 0x29, 0xaf, 0x7c, 0x87, 0xb6, 0x8b, 0xda, 0x5d, 0x5c, 0x0d, 0x7f, 0xc3, 0x75, 0xc5, 0xc2, 0x7c, 0x96, 0xa8, 0xff, 0xbf, 0x1a, 0xb5, 0x84, 0x8a, 0xe0, 0x19, 0x9e, 0x1f, 0xe2, 0x3e, 0x23, 0xac, 0x8e, 0x0a, 0x12, 0x07, 0x68, 0x5f, 0x0e, 0xef, 0xa3, 0x73, 0xf6, 0x00, 0x3d, 0xcb, 0x0d, 0xb7, 0xfb, 0xf7, 0x71, 0x27, 0x7b, 0x80, 0xc4, 0x32, 0x89, 0xe9, 0x1f, 0x0d, 0xb7, 0x86, 0x07, 0x42, 0x7b, 0x30, 0xfa, 0xf7, 0x70, 0xff, 0xcb, 0xb1, 0xb2, 0x66, 0x1f, 0xa9, 0x13, 0x5f, 0x2d, 0x1a, 0xd1, 0x89, 0x0e, 0x74, 0xa1, 0x8f, 0xc2, 0x53, 0x4a, 0x47, 0x02, 0x56, 0x4c, 0x60, 0xd2, 0xd7, 0x95, 0x40, 0x0a, 0x2f, 0xc8, 0x67, 0x84, 0xfe, 0x4f, 0x61, 0x9a, 0x18, 0x1a, 0x09, 0xff, 0x12, 0x33, 0x94, 0x84, 0x0e, 0xe2, 0x48, 0xe3, 0x15, 0x29, 0x09, 0xe1, 0xb5, 0xcf, 0x9e, 0xc1, 0xac, 0x1f, 0x73, 0x05, 0x9d, 0xe0, 0x2c, 0xe6, 0x69, 0xde, 0xe0, 0xcf, 0x83, 0x27, 0x1b, 0x0c, 0x7f, 0x00, 0x50, 0x4b, 0x07, 0x08, 0x9e, 0x09, 0x67, 0x19, 0x0c, 0x03, 0x00, 0x00, 0x04, 0x06, 0x00, 0x00, 0x50, 0x4b, 0x01, 0x02, 0x14, 0x00, 0x14, 0x00, 0x08, 0x08, 0x08, 0x00, 0x03, 0x9a, 0x57, 0x57, 0x61, 0xd5, 0x4a, 0x60, 0xc0, 0x01, 0x00, 0x00, 0xc2, 0x03, 0x00, 0x00, 0x14, 0x00, 0x04, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x4d, 0x45, 0x54, 0x41, 0x2d, 0x49, 0x4e, 0x46, 0x2f, 0x4d, 0x41, 0x4e, 0x49, 0x46, 0x45, 0x53, 0x54, 0x2e, 0x4d, 0x46, 0xfe, 0xca, 0x00, 0x00, 0x50, 0x4b, 0x01, 0x02, 0x0a, 0x00, 0x0a, 0x00, 0x00, 0x08, 0x00, 0x00, 0x03, 0x9a, 0x57, 0x57, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x09, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x06, 0x02, 0x00, 0x00, 0x4d, 0x45, 0x54, 0x41, 0x2d, 0x49, 0x4e, 0x46, 0x2f, 0x50, 0x4b, 0x01, 0x02, 0x0a, 0x00, 0x0a, 0x00, 0x00, 0x08, 0x00, 0x00, 0x03, 0x9a, 0x57, 0x57, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x03, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x2d, 0x02, 0x00, 0x00, 0x6d, 0x65, 0x2f, 0x50, 0x4b, 0x01, 0x02, 0x0a, 0x00, 0x0a, 0x00, 0x00, 0x08, 0x00, 0x00, 0x03, 0x9a, 0x57, 0x57, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x09, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x4e, 0x02, 0x00, 0x00, 0x6d, 0x65, 0x2f, 0x7a, 0x65, 0x64, 0x69, 0x6b, 0x2f, 0x50, 0x4b, 0x01, 0x02, 0x14, 0x00, 0x14, 0x00, 0x08, 0x08, 0x08, 0x00, 0xe4, 0x99, 0x57, 0x57, 0xaf, 0xf7, 0x86, 0xbd, 0x86, 0x02, 0x00, 0x00, 0xe2, 0x04, 0x00, 0x00, 0x21, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x75, 0x02, 0x00, 0x00, 0x6d, 0x65, 0x2f, 0x7a, 0x65, 0x64, 0x69, 0x6b, 0x2f, 0x48, 0x61, 0x63, 0x6b, 0x43, 0x6c, 0x61, 0x73, 0x73, 0x50, 0x61, 0x74, 0x63, 0x68, 0x65, 0x72, 0x24, 0x31, 0x2e, 0x63, 0x6c, 0x61, 0x73, 0x73, 0x50, 0x4b, 0x01, 0x02, 0x14, 0x00, 0x14, 0x00, 0x08, 0x08, 0x08, 0x00, 0xe4, 0x99, 0x57, 0x57, 0xcd, 0x1d, 0x0f, 0xa0, 0x58, 0x02, 0x00, 0x00, 0x98, 0x04, 0x00, 0x00, 0x23, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x4a, 0x05, 0x00, 0x00, 0x6d, 0x65, 0x2f, 0x7a, 0x65, 0x64, 0x69, 0x6b, 0x2f, 0x48, 0x61, 0x63, 0x6b, 0x43, 0x6c, 0x61, 0x73, 0x73, 0x50, 0x61, 0x74, 0x63, 0x68, 0x65, 0x72, 0x24, 0x31, 0x24, 0x31, 0x2e, 0x63, 0x6c, 0x61, 0x73, 0x73, 0x50, 0x4b, 0x01, 0x02, 0x14, 0x00, 0x14, 0x00, 0x08, 0x08, 0x08, 0x00, 0xe4, 0x99, 0x57, 0x57, 0x9e, 0x09, 0x67, 0x19, 0x0c, 0x03, 0x00, 0x00, 0x04, 0x06, 0x00, 0x00, 0x1f, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xf3, 0x07, 0x00, 0x00, 0x6d, 0x65, 0x2f, 0x7a, 0x65, 0x64, 0x69, 0x6b, 0x2f, 0x48, 0x61, 0x63, 0x6b, 0x43, 0x6c, 0x61, 0x73, 0x73, 0x50, 0x61, 0x74, 0x63, 0x68, 0x65, 0x72, 0x2e, 0x63, 0x6c, 0x61, 0x73, 0x73, 0x50, 0x4b, 0x05, 0x06, 0x00, 0x00, 0x00, 0x00, 0x07, 0x00, 0x07, 0x00, 0xd2, 0x01, 0x00, 0x00, 0x4c, 0x0b, 0x00, 0x00, 0x00, 0x00, 0x00}; \r\nstatic const int lib_size = sizeof(lib_bytes);\r\n```\r\n\r\nWhat&#39;s in the jar file:\r\n```java\r\npackage me.zedik;\r\n\r\nimport net.minecraft.client.Minecraft;\r\n\r\npublic class HackClassPatcher {\r\n    public static void doStuffIdk() {\r\n        Minecraft.getMinecraft().thePlayer.capabilities.allowFlying = true;\r\n        System.out.println(&quot;hi lol&quot;);\r\n    }\r\n\r\n    // some other random stuff\r\n}\r\n```\r\n\r\nThe injection code:\r\n```cpp\r\n// use miniz to extract class files from jar file\r\nvoid JavaUtils::loadJar(jobject classLoader, const unsigned char *jarBytes, size_t size) {\r\n    mz_zip_archive archive{};\r\n    if (!mz_zip_reader_init_mem(&amp;archive, jarBytes, size, 0)) return;\r\n    mz_uint file_number = mz_zip_reader_get_num_files(&amp;archive);\r\n    for (mz_uint i = 0; i &lt; file_number; i++) {\r\n        if (!mz_zip_reader_is_file_supported(&amp;archive, i)) continue;\r\n        \r\n        char str[256] = {0};\r\n        mz_zip_reader_get_filename(&amp;archive, i, str, 256);\r\n        std::string fileName(str);\r\n\r\n        if (fileName.size() &lt;= 6) continue;\r\n        if (fileName.substr(fileName.size() - 6) != &quot;.class&quot;) continue;\r\n        \r\n        size_t classBytes_size = 0;\r\n        unsigned char *classBytes = (unsigned char*) mz_zip_reader_extract_to_heap(&amp;archive, i, &amp;classBytes_size, 0);\r\n        if (!classBytes) {\r\n            mz_zip_reader_end(&amp;archive);\r\n            return;\r\n        }\r\n        \r\n        jclass jaclass = client-&gt;env-&gt;DefineClass(nullptr, classLoader, (const jbyte*) classBytes, (jsize) classBytes_size);\r\n        if (jaclass) client-&gt;env-&gt;DeleteLocalRef(jaclass);\r\n        mz_free(classBytes);\r\n    }\r\n    mz_zip_reader_end(&amp;archive);\r\n}\r\n\r\n// creates a new class loader to load the injected classes\r\njobject JavaUtils::newClassLoader() {\r\n    jclass urlClass = client-&gt;env-&gt;FindClass(&quot;java/net/URL&quot;);\r\n    jobjectArray urls = client-&gt;env-&gt;NewObjectArray(0, urlClass, nullptr);\r\n    jclass URLClassLoaderClass = client-&gt;env-&gt;FindClass(&quot;java/net/URLClassLoader&quot;);\r\n    jmethodID URLClassLoaderContructor = client-&gt;env-&gt;GetMethodID(URLClassLoaderClass, &quot;&lt;init&gt;&quot;, &quot;([Ljava/net/URL;)V&quot;);\r\n    jobject URLClassLoader = client-&gt;env-&gt;NewObject(URLClassLoaderClass, URLClassLoaderContructor, urls);\r\n\r\n    client-&gt;env-&gt;DeleteLocalRef(urlClass);\r\n    client-&gt;env-&gt;DeleteLocalRef(urls);\r\n    client-&gt;env-&gt;DeleteLocalRef(URLClassLoaderClass);\r\n\r\n    return URLClassLoader;\r\n}\r\n```\r\n\r\nWhere I inject the jar:\r\n```cpp\r\njobject classLoader = JavaUtils::newClassLoader();\r\nJavaUtils::loadJar(classLoader, lib_bytes, lib_size);\r\n```\r\n\r\nCalling the method:\r\n```cpp\r\njclass libClass = client-&gt;getClass(&quot;me.zedik.HackClassPatcher&quot;);\r\n        if (libClass == nullptr) {\r\n            std::cout &lt;&lt; &quot;hack patcher class not found&quot; &lt;&lt; std::endl;\r\n            return;\r\n        }\r\n        jmethodID libMethod = client-&gt;env-&gt;GetStaticMethodID(libClass, &quot;doStuffIdk&quot;, &quot;()V&quot;);\r\n        if (libMethod == nullptr) {\r\n            std::cout &lt;&lt; &quot;hack method not found&quot; &lt;&lt; std::endl;\r\n            return;\r\n        }\r\n        client-&gt;env-&gt;CallStaticVoidMethod(libClass, libMethod);\r\n        std::cout &lt;&lt; &quot;success&quot; &lt;&lt; std::endl;\r\n\r\n        if (client-&gt;env-&gt;ExceptionCheck() == JNI_TRUE) {\r\n            std::cout &lt;&lt; &quot;EXCEPTION&quot; &lt;&lt; std::endl;\r\n            jthrowable exception = client-&gt;env-&gt;ExceptionOccurred();\r\n            client-&gt;env-&gt;ExceptionClear();\r\n\r\n            JavaUtils::getInformation(exception); // prints stack trace\r\n            return;\r\n        }\r\n```\r\n\r\nOutput:\r\n```\r\nEXCEPTION:\r\njava.lang.NoClassDefFoundError: net/minecraft/client/Minecraft\r\n    me.zedik.HackClassPatcher.doStuffIdk(HackClassPatcher.java:8)\r\nCaused by: java.lang.ClassNotFoundException: net.minecraft.client.Minecraft\r\n    java.base/java.net.URLClassLoader.findClass(Unknown Source)\r\n    java.base/java.lang.ClassLoader.loadClass(Unknown Source)\r\n    java.base/java.lang.ClassLoader.loadClass(Unknown Source)\r\n    me.zedik.HackClassPatcher.doStuffIdk(HackClassPatcher.java:8)\r\n```\r\n`net/minecraft/client/Minecraft` is not included in the jar file but is included in the parent process.\r\n","title":"JNI NoClassDefFoundError while executing method in injected jar","body":"<p>I am getting <code>NoClassDefFoundError</code> when trying to inject a jar file into a running java process.</p>\n<p>Jar file bytes:</p>\n<pre class=\"lang-cpp prettyprint-override\"><code>static const unsigned char lib_bytes[] = {\n        0x50, 0x4b, 0x03, 0x04, 0x14, 0x00, 0x08, 0x08, 0x08, 0x00, 0x03, 0x9a, 0x57, 0x57, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x14, 0x00, 0x04, 0x00, 0x4d, 0x45, 0x54, 0x41, 0x2d, 0x49, 0x4e, 0x46, 0x2f, 0x4d, 0x41, 0x4e, 0x49, 0x46, 0x45, 0x53, 0x54, 0x2e, 0x4d, 0x46, 0xfe, 0xca, 0x00, 0x00, 0x7d, 0x52, 0xcb, 0x6e, 0xe3, 0x30, 0x0c, 0xbc, 0x07, 0xc8, 0x3f, 0xf8, 0x07, 0x28, 0xf8, 0x15, 0xa7, 0xee, 0x75, 0x81, 0xbd, 0x15, 0xe8, 0xa9, 0xd7, 0x85, 0xe2, 0x28, 0x36, 0x0d, 0x59, 0x32, 0x24, 0x3a, 0xde, 0xfc, 0xfd, 0x52, 0xb2, 0xf3, 0x30, 0x5a, 0x2c, 0x72, 0xb1, 0xc8, 0x99, 0xe1, 0x70, 0xc2, 0x0f, 0x69, 0xf0, 0xa2, 0x3c, 0xc1, 0x97, 0x72, 0x1e, 0xad, 0x79, 0x4f, 0x32, 0x91, 0xee, 0x77, 0xbf, 0xb4, 0xf4, 0x1e, 0x3e, 0x25, 0x75, 0xef, 0x89, 0xf4, 0x03, 0xd4, 0xa2, 0x14, 0xbd, 0x74, 0x49, 0x6f, 0x24, 0x14, 0xfc, 0x9d, 0xc6, 0xd7, 0x07, 0x1a, 0xd5, 0x38, 0x79, 0xa1, 0xf8, 0x32, 0x8a, 0xe8, 0x06, 0x99, 0xa8, 0xe2, 0xab, 0xf5, 0xd6, 0x40, 0xbe, 0xdf, 0x25, 0x22, 0x5f, 0xb9, 0xed, 0x24, 0xaf, 0x12, 0xb2, 0xe3, 0x4a, 0xa6, 0x19, 0xa9, 0xe9, 0xa0, 0x12, 0x87, 0x45, 0x19, 0xcd, 0x38, 0x11, 0xe4, 0xdc, 0x5d, 0x0b, 0x13, 0xa1, 0xf6, 0xac, 0x97, 0x46, 0x02, 0x2b, 0xb9, 0xc4, 0xfa, 0x0e, 0xa1, 0xb1, 0x4e, 0x71, 0x39, 0x8b, 0x28, 0xa7, 0xa4, 0x1e, 0x02, 0xea, 0x28, 0x8a, 0x3a, 0x56, 0xe4, 0x44, 0x9d, 0xc6, 0x13, 0x97, 0x0e, 0x22, 0x5f, 0x40, 0x8d, 0x1d, 0x06, 0x6b, 0x3c, 0xa0, 0x65, 0xfd, 0x32, 0x78, 0x0a, 0xd5, 0x8e, 0x68, 0x8c, 0x5a, 0xa5, 0x28, 0xd8, 0x64, 0x28, 0x8d, 0x5a, 0xd2, 0xc5, 0xba, 0xe1, 0x65, 0xc7, 0xde, 0x8e, 0x04, 0x1e, 0x87, 0x51, 0x07, 0x60, 0xf5, 0x64, 0x6a, 0x54, 0xac, 0x64, 0x28, 0xd2, 0x8b, 0x75, 0xce, 0x59, 0x35, 0xb3, 0xbc, 0x42, 0x9e, 0x66, 0xfc, 0xcb, 0x8b, 0xcd, 0xf4, 0xd8, 0x65, 0x5b, 0xf5, 0xa6, 0xaa, 0xa5, 0x69, 0x0b, 0x60, 0xa5, 0xe2, 0xe1, 0x42, 0xdb, 0xb6, 0xec, 0x41, 0x8e, 0x18, 0xd2, 0x80, 0x93, 0x22, 0x59, 0x3f, 0xe5, 0x7b, 0xeb, 0x4e, 0xe8, 0xb7, 0x13, 0x16, 0x42, 0xdc, 0x25, 0x26, 0xfe, 0x4a, 0xf2, 0x76, 0x32, 0x67, 0x7f, 0xf3, 0xa4, 0x86, 0x40, 0x0a, 0xbc, 0xe3, 0xd6, 0x80, 0x6d, 0x5b, 0x34, 0x6d, 0x4c, 0x74, 0x63, 0x98, 0x95, 0x58, 0x73, 0x18, 0x9d, 0xf2, 0x21, 0xe0, 0xb7, 0x35, 0x71, 0x6c, 0xa6, 0xfb, 0xb0, 0xc1, 0xf6, 0xec, 0x1e, 0x0e, 0xd9, 0x6a, 0x7c, 0xb9, 0x00, 0xa9, 0x35, 0x84, 0xf4, 0xd8, 0xdc, 0x6f, 0x34, 0x52, 0x8b, 0x9e, 0x95, 0x82, 0x4b, 0x3c, 0x39, 0xe9, 0x6e, 0x3d, 0x5f, 0x41, 0x34, 0xb5, 0xec, 0x90, 0xdd, 0x77, 0x58, 0xba, 0x7a, 0xee, 0x5b, 0x6d, 0x47, 0xc5, 0xbc, 0xd8, 0x4f, 0xdf, 0xf2, 0xe5, 0x7a, 0x62, 0x23, 0xe4, 0x94, 0x73, 0x80, 0x25, 0x18, 0x6c, 0x3b, 0xd2, 0xb7, 0x80, 0x39, 0xa4, 0x79, 0x5a, 0x3f, 0x31, 0x7f, 0xc2, 0xdd, 0xc0, 0x7f, 0x50, 0xcb, 0xa5, 0x85, 0xed, 0x1e, 0x7f, 0x77, 0xbc, 0x3a, 0x30, 0x92, 0xf0, 0xaa, 0x3c, 0xcc, 0x68, 0xce, 0x76, 0xf6, 0xaf, 0x57, 0xfa, 0x40, 0x56, 0xdf, 0x71, 0x41, 0xa9, 0x2a, 0x5f, 0xd1, 0xea, 0x2f, 0x29, 0x17, 0x36, 0x78, 0xd0, 0xca, 0xef, 0xb4, 0x3b, 0x67, 0x59, 0x2c, 0x22, 0x59, 0x69, 0x71, 0xf3, 0x93, 0xf7, 0x9f, 0xec, 0xed, 0x77, 0xfb, 0xdd, 0x3f, 0x50, 0x4b, 0x07, 0x08, 0x61, 0xd5, 0x4a, 0x60, 0xc0, 0x01, 0x00, 0x00, 0xc2, 0x03, 0x00, 0x00, 0x50, 0x4b, 0x03, 0x04, 0x0a, 0x00, 0x00, 0x08, 0x00, 0x00, 0x03, 0x9a, 0x57, 0x57, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x09, 0x00, 0x00, 0x00, 0x4d, 0x45, 0x54, 0x41, 0x2d, 0x49, 0x4e, 0x46, 0x2f, 0x50, 0x4b, 0x03, 0x04, 0x0a, 0x00, 0x00, 0x08, 0x00, 0x00, 0x03, 0x9a, 0x57, 0x57, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x03, 0x00, 0x00, 0x00, 0x6d, 0x65, 0x2f, 0x50, 0x4b, 0x03, 0x04, 0x0a, 0x00, 0x00, 0x08, 0x00, 0x00, 0x03, 0x9a, 0x57, 0x57, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x09, 0x00, 0x00, 0x00, 0x6d, 0x65, 0x2f, 0x7a, 0x65, 0x64, 0x69, 0x6b, 0x2f, 0x50, 0x4b, 0x03, 0x04, 0x14, 0x00, 0x08, 0x08, 0x08, 0x00, 0xe4, 0x99, 0x57, 0x57, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x21, 0x00, 0x00, 0x00, 0x6d, 0x65, 0x2f, 0x7a, 0x65, 0x64, 0x69, 0x6b, 0x2f, 0x48, 0x61, 0x63, 0x6b, 0x43, 0x6c, 0x61, 0x73, 0x73, 0x50, 0x61, 0x74, 0x63, 0x68, 0x65, 0x72, 0x24, 0x31, 0x2e, 0x63, 0x6c, 0x61, 0x73, 0x73, 0x8d, 0x53, 0x6d, 0x4f, 0x13, 0x41, 0x10, 0x7e, 0x96, 0x1e, 0x3d, 0x28, 0x07, 0xc5, 0x62, 0x95, 0x5a, 0xd0, 0x8a, 0x55, 0xdb, 0x5a, 0x38, 0x4e, 0xf1, 0xb5, 0x84, 0x0f, 0x10, 0x0c, 0x24, 0x05, 0x4c, 0x30, 0x4d, 0x94, 0x4f, 0xdb, 0x63, 0x53, 0x0e, 0xda, 0xbb, 0x7a, 0xb7, 0xad, 0xc6, 0x7f, 0xe2, 0x17, 0x7f, 0x03, 0x26, 0x06, 0x12, 0x4d, 0xfc, 0x01, 0xfe, 0x28, 0xe3, 0xdc, 0x5e, 0x23, 0x01, 0x6a, 0xf5, 0x2e, 0xd9, 0x9d, 0x9d, 0x9d, 0x79, 0x66, 0x9e, 0x99, 0xd9, 0x9f, 0xbf, 0xbe, 0xfd, 0x00, 0xb0, 0x8c, 0x4a, 0x02, 0x43, 0x88, 0xe9, 0xd0, 0x0c, 0x0c, 0x23, 0xce, 0x70, 0xd3, 0xf3, 0x1b, 0xa6, 0x57, 0x3f, 0x14, 0xb6, 0x7c, 0x2f, 0xea, 0x26, 0x0f, 0x5a, 0xe6, 0x5a, 0x93, 0x07, 0x41, 0xcd, 0x09, 0x1c, 0xe9, 0xf9, 0x0c, 0xf1, 0x65, 0xc7, 0x75, 0xe4, 0x0a, 0x43, 0xbe, 0xb0, 0x59, 0x1d, 0x6c, 0x5c, 0x29, 0xd6, 0x46, 0x30, 0xc2, 0x60, 0x34, 0x84, 0xdc, 0xf2, 0x3a, 0x81, 0xd8, 0xe9, 0x0a, 0x3f, 0x81, 0x04, 0xc6, 0x74, 0x18, 0x06, 0xc6, 0x31, 0xc1, 0x30, 0x79, 0xc8, 0xbb, 0xdc, 0x6c, 0x72, 0xb7, 0x61, 0xee, 0x4a, 0xdf, 0x71, 0x1b, 0x14, 0x41, 0xbc, 0xeb, 0xf0, 0x66, 0xc0, 0x90, 0x2e, 0x54, 0xcf, 0x6e, 0x77, 0x54, 0x98, 0x4a, 0xf1, 0xad, 0x8e, 0x49, 0x86, 0xd9, 0x96, 0x30, 0x3f, 0x8a, 0x7d, 0xe7, 0xc8, 0xdc, 0xe0, 0xf6, 0x91, 0x0a, 0xfa, 0x8a, 0x4b, 0xfb, 0x40, 0xf8, 0x79, 0x2b, 0x6f, 0xe9, 0x48, 0x31, 0x64, 0x2e, 0x27, 0xb7, 0xd3, 0xb6, 0xbd, 0x7d, 0x11, 0xc4, 0x88, 0x2a, 0x46, 0x91, 0xc6, 0x35, 0x1d, 0xd7, 0x0d, 0x4c, 0x23, 0xc3, 0x90, 0x1d, 0x00, 0xc8, 0x30, 0x64, 0x77, 0x19, 0x72, 0xff, 0xa2, 0x1b, 0x96, 0x32, 0x6b, 0x60, 0x06, 0xb3, 0x0c, 0x63, 0xdd, 0x50, 0xb9, 0x25, 0xe4, 0x81, 0xb7, 0xcf, 0xd0, 0xa2, 0x5a, 0x5d, 0x24, 0x5a, 0xf9, 0x1f, 0xcd, 0xde, 0x65, 0x55, 0xb1, 0x4f, 0x1a, 0x51, 0x9c, 0xb3, 0x3c, 0x92, 0xb8, 0x15, 0xf6, 0x33, 0xc7, 0xb0, 0x5a, 0xa8, 0x0e, 0x60, 0x56, 0xe9, 0xd7, 0xc2, 0xf3, 0x60, 0xc5, 0x1a, 0x83, 0xb6, 0x46, 0x65, 0x63, 0x48, 0x56, 0x1d, 0x57, 0x6c, 0x77, 0x5a, 0x75, 0xe1, 0xbf, 0xe6, 0xf5, 0x26, 0x69, 0x52, 0x55, 0xcf, 0xe6, 0xcd, 0x1a, 0xf7, 0x9d, 0xf0, 0xdc, 0x53, 0x6a, 0xf2, 0xc0, 0xa1, 0xee, 0xcd, 0x0e, 0x0c, 0x4c, 0x66, 0xdc, 0x6f, 0x2c, 0x32, 0xb0, 0xcd, 0x48, 0xa4, 0x2a, 0xc7, 0xb9, 0x6d, 0x8b, 0x80, 0x5c, 0x35, 0x97, 0xb7, 0x14, 0xfa, 0x25, 0xf2, 0x0c, 0x09, 0x6a, 0xa0, 0xed, 0x3b, 0x6d, 0x35, 0x8c, 0xa3, 0x81, 0xd3, 0x70, 0xb9, 0xec, 0xf8, 0x64, 0x9d, 0x10, 0x1f, 0x6c, 0xd1, 0x96, 0x8e, 0xe7, 0x12, 0xc2, 0x54, 0x9f, 0xc2, 0x31, 0x8c, 0xef, 0x4a, 0xca, 0x64, 0x8b, 0xb7, 0x7b, 0x99, 0x26, 0x76, 0xbd, 0x8e, 0x6f, 0x8b, 0x97, 0x4e, 0x78, 0x48, 0x5f, 0xcc, 0x72, 0x21, 0x44, 0x20, 0xd6, 0xeb, 0xae, 0xdd, 0xf4, 0x02, 0x42, 0x88, 0x0a, 0xa3, 0xe3, 0x31, 0x0d, 0xd7, 0x5f, 0xb9, 0x19, 0x78, 0x8a, 0x67, 0x34, 0xf3, 0xed, 0xf0, 0xa8, 0x2e, 0x04, 0xe5, 0x33, 0x5d, 0xd8, 0x5b, 0xed, 0xd3, 0xca, 0xbd, 0x55, 0x86, 0x91, 0x6d, 0x11, 0xc8, 0x0d, 0x2f, 0x90, 0xe4, 0xb4, 0xe9, 0xba, 0xc2, 0xef, 0x39, 0x21, 0x47, 0x13, 0x3a, 0x84, 0xf0, 0x0b, 0x57, 0x7a, 0x9d, 0x60, 0xb8, 0x4d, 0xd2, 0x3a, 0x62, 0xf4, 0x03, 0x7a, 0x29, 0x5b, 0x3e, 0x05, 0xfb, 0xa2, 0x0c, 0xe6, 0x68, 0x0d, 0x0d, 0x40, 0xcf, 0xea, 0x0e, 0xad, 0xb9, 0xc8, 0x04, 0x79, 0xdc, 0x55, 0x10, 0x3a, 0xee, 0xe1, 0xbe, 0xba, 0xd7, 0x51, 0x40, 0x86, 0x3c, 0x58, 0x38, 0xa8, 0x3d, 0xc8, 0xcf, 0xf4, 0x28, 0xe3, 0xb4, 0x5b, 0xe5, 0x94, 0x7e, 0x82, 0xd1, 0x4f, 0x98, 0xf9, 0x8e, 0xe4, 0x9b, 0x52, 0x6a, 0xaa, 0xf4, 0x15, 0x57, 0xb3, 0xe5, 0xf9, 0x8c, 0x96, 0x19, 0x3e, 0xc1, 0x8d, 0x53, 0xdc, 0x3c, 0x3e, 0xaf, 0x39, 0x26, 0xa7, 0x98, 0x0a, 0x3e, 0xa1, 0x02, 0x4e, 0xd2, 0xbb, 0xba, 0x42, 0xe7, 0x19, 0x95, 0xc4, 0x4a, 0x04, 0xfa, 0x27, 0x09, 0x0b, 0xc5, 0x5e, 0x12, 0x16, 0x4a, 0x78, 0xa0, 0x78, 0x59, 0x28, 0x93, 0x14, 0x53, 0xd2, 0x3c, 0x49, 0x9a, 0x92, 0x16, 0x60, 0x12, 0xe3, 0x45, 0x85, 0xce, 0xe6, 0x48, 0x69, 0x29, 0x96, 0x0f, 0xf1, 0x88, 0x76, 0x0d, 0x4b, 0x78, 0x82, 0xe7, 0x4a, 0xb3, 0x84, 0x17, 0xb4, 0xa7, 0x48, 0x4a, 0x23, 0xfa, 0x92, 0xd1, 0xf6, 0x1b, 0x50, 0x4b, 0x07, 0x08, 0xaf, 0xf7, 0x86, 0xbd, 0x86, 0x02, 0x00, 0x00, 0xe2, 0x04, 0x00, 0x00, 0x50, 0x4b, 0x03, 0x04, 0x14, 0x00, 0x08, 0x08, 0x08, 0x00, 0xe4, 0x99, 0x57, 0x57, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x23, 0x00, 0x00, 0x00, 0x6d, 0x65, 0x2f, 0x7a, 0x65, 0x64, 0x69, 0x6b, 0x2f, 0x48, 0x61, 0x63, 0x6b, 0x43, 0x6c, 0x61, 0x73, 0x73, 0x50, 0x61, 0x74, 0x63, 0x68, 0x65, 0x72, 0x24, 0x31, 0x24, 0x31, 0x2e, 0x63, 0x6c, 0x61, 0x73, 0x73, 0x8d, 0x53, 0x5d, 0x4f, 0x13, 0x41, 0x14, 0x3d, 0xb7, 0x2d, 0x2d, 0x94, 0x2d, 0xd4, 0x42, 0x95, 0x0a, 0x08, 0xd4, 0xa2, 0xfd, 0xa0, 0x2c, 0xf5, 0xf3, 0x01, 0x62, 0x8c, 0x80, 0xa1, 0x49, 0x41, 0x13, 0x48, 0x5f, 0x7c, 0x9a, 0x6e, 0x27, 0xed, 0x42, 0xbb, 0x6b, 0x76, 0xb7, 0x35, 0xf1, 0x8f, 0x18, 0xfd, 0x17, 0x26, 0x8a, 0x89, 0x0f, 0x46, 0x5f, 0xfd, 0x51, 0xc6, 0x3b, 0xb3, 0x44, 0x12, 0x88, 0x85, 0x49, 0x76, 0x66, 0xf6, 0xce, 0x9d, 0x73, 0xce, 0xfd, 0x98, 0xdf, 0x7f, 0xbe, 0xff, 0x00, 0xb0, 0x85, 0xa7, 0x13, 0x88, 0x20, 0x9a, 0x40, 0xcc, 0xc0, 0x18, 0xe2, 0x84, 0xc5, 0xbe, 0x34, 0xdf, 0xcb, 0xb6, 0x7d, 0x62, 0xee, 0x09, 0xeb, 0x64, 0xbb, 0x27, 0x7c, 0xff, 0xb5, 0x08, 0xac, 0xae, 0xf4, 0x0a, 0xb5, 0x42, 0x8d, 0x10, 0x0f, 0xba, 0xb6, 0x5f, 0xd8, 0x60, 0xc7, 0xc6, 0x08, 0xcf, 0xcd, 0x24, 0xc6, 0x31, 0x91, 0x40, 0xd2, 0xc0, 0x24, 0x0c, 0xc2, 0x92, 0xeb, 0x75, 0x4c, 0xb7, 0x75, 0x2c, 0xad, 0xe0, 0x9d, 0x6c, 0x99, 0xc2, 0xef, 0x9b, 0xfb, 0x32, 0xe8, 0xba, 0xed, 0xa6, 0xed, 0xdb, 0x81, 0xeb, 0x31, 0xee, 0x96, 0xed, 0xd8, 0xc1, 0x33, 0xc2, 0x6a, 0xb1, 0xde, 0xb8, 0xc2, 0x7b, 0xb3, 0xd4, 0x4c, 0x60, 0x8a, 0x90, 0x3e, 0x16, 0x43, 0x61, 0xf6, 0x84, 0xd3, 0x31, 0x77, 0xdc, 0x41, 0xab, 0x27, 0x93, 0x48, 0x21, 0x6d, 0xe0, 0x06, 0x32, 0x84, 0xc9, 0xb6, 0x36, 0x35, 0x45, 0x6f, 0x20, 0x09, 0xd1, 0x62, 0x69, 0x27, 0xfe, 0x7c, 0x1c, 0x7a, 0xa8, 0x90, 0x6f, 0x1a, 0xb8, 0x85, 0x39, 0x42, 0xa4, 0x3f, 0x24, 0xac, 0x5c, 0xc9, 0xa8, 0xe2, 0xb9, 0x6d, 0x60, 0x1e, 0x0b, 0x04, 0x63, 0xa8, 0x8c, 0x8d, 0xb6, 0x55, 0x77, 0x7c, 0x87, 0x90, 0x2d, 0x36, 0xce, 0x75, 0xbc, 0xd2, 0x18, 0x2c, 0x90, 0xf0, 0xa2, 0x38, 0x32, 0x43, 0xd7, 0x89, 0x92, 0x10, 0xdb, 0x76, 0xdb, 0x2c, 0x7f, 0xba, 0x61, 0x3b, 0xf2, 0x60, 0xd0, 0x6f, 0x49, 0xef, 0x48, 0x70, 0x54, 0x84, 0x4c, 0xc3, 0xb5, 0x44, 0xaf, 0x29, 0x3c, 0x5b, 0xfd, 0x9f, 0x19, 0x63, 0xaa, 0x38, 0x9c, 0xed, 0x51, 0xc4, 0x4c, 0xcd, 0x8e, 0xc2, 0xeb, 0x70, 0x0d, 0xa9, 0x1e, 0x6e, 0xb9, 0xae, 0xd1, 0xa1, 0xf0, 0x14, 0xea, 0xc5, 0x94, 0xb2, 0xf3, 0xd8, 0x30, 0xcc, 0x61, 0xe6, 0x72, 0x9c, 0x84, 0xd4, 0x61, 0xc0, 0x14, 0xfb, 0xe2, 0xed, 0x99, 0x84, 0xe4, 0xa1, 0x3b, 0xf0, 0x2c, 0xf9, 0xd2, 0x56, 0x3f, 0xd9, 0x8b, 0xf4, 0xeb, 0x0a, 0x81, 0xc3, 0xd9, 0x75, 0xac, 0x9e, 0xeb, 0xdb, 0x4e, 0x27, 0x8c, 0x38, 0x01, 0x93, 0x30, 0x3f, 0x42, 0xb4, 0x81, 0x1a, 0x1e, 0x70, 0x4d, 0x75, 0xe6, 0xc3, 0x3b, 0x84, 0x3e, 0x77, 0xca, 0xb9, 0xa2, 0xc3, 0xc0, 0x63, 0xbc, 0xcd, 0xeb, 0x58, 0xde, 0x5c, 0x36, 0x95, 0xae, 0xac, 0x06, 0x61, 0xfc, 0x40, 0xfa, 0xc1, 0x9e, 0xeb, 0x07, 0x09, 0x3c, 0x26, 0xe4, 0xfe, 0x2b, 0x97, 0x3b, 0xa4, 0xee, 0x38, 0xd2, 0xd3, 0x36, 0xe9, 0x63, 0x99, 0xdb, 0x4d, 0x75, 0x1e, 0xa5, 0xd3, 0xea, 0x8d, 0xf1, 0x2e, 0xc2, 0xdf, 0x24, 0x16, 0x41, 0xb8, 0xc3, 0xbb, 0x23, 0x44, 0x11, 0xe3, 0xd5, 0x28, 0x57, 0xbe, 0x82, 0xca, 0x0b, 0xd5, 0x6f, 0x48, 0x7c, 0xd6, 0x5e, 0x4b, 0x3c, 0xc7, 0xd9, 0x0b, 0xdc, 0xd2, 0xcb, 0x3c, 0x97, 0x43, 0x3f, 0xac, 0x20, 0xaf, 0x1b, 0x59, 0xbf, 0x59, 0x7d, 0x6e, 0xe0, 0x2e, 0x0a, 0x1a, 0xd7, 0xc0, 0x2a, 0xe6, 0x18, 0x91, 0x54, 0xb3, 0x9e, 0x31, 0x0c, 0xf8, 0x9e, 0xba, 0x99, 0xaf, 0x1c, 0x54, 0x7f, 0x21, 0xf5, 0x11, 0x33, 0xd5, 0x9f, 0x48, 0xed, 0xaf, 0x9d, 0x62, 0x7a, 0x16, 0x33, 0x1f, 0x3e, 0x21, 0x5a, 0xfe, 0x82, 0x6c, 0xe5, 0x14, 0x39, 0xc5, 0x1b, 0xd5, 0xbc, 0x19, 0x7d, 0x63, 0x16, 0x53, 0xc8, 0x22, 0xc7, 0x88, 0x2b, 0x3c, 0x2b, 0x0d, 0xcb, 0x7c, 0x3e, 0xc5, 0xea, 0xef, 0xe1, 0xbe, 0xe6, 0xcb, 0xff, 0x53, 0x93, 0x47, 0x11, 0x25, 0x66, 0x2c, 0x6b, 0x0c, 0xca, 0x31, 0x40, 0x45, 0x87, 0xb1, 0x86, 0x2a, 0xaf, 0x31, 0xac, 0x63, 0x03, 0x0f, 0xb5, 0xe5, 0x11, 0x9e, 0x68, 0x8a, 0x08, 0xdb, 0xc2, 0x11, 0x09, 0x97, 0xbf, 0x50, 0x4b, 0x07, 0x08, 0xcd, 0x1d, 0x0f, 0xa0, 0x58, 0x02, 0x00, 0x00, 0x98, 0x04, 0x00, 0x00, 0x50, 0x4b, 0x03, 0x04, 0x14, 0x00, 0x08, 0x08, 0x08, 0x00, 0xe4, 0x99, 0x57, 0x57, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x1f, 0x00, 0x00, 0x00, 0x6d, 0x65, 0x2f, 0x7a, 0x65, 0x64, 0x69, 0x6b, 0x2f, 0x48, 0x61, 0x63, 0x6b, 0x43, 0x6c, 0x61, 0x73, 0x73, 0x50, 0x61, 0x74, 0x63, 0x68, 0x65, 0x72, 0x2e, 0x63, 0x6c, 0x61, 0x73, 0x73, 0x95, 0x54, 0xeb, 0x52, 0xd3, 0x40, 0x18, 0x3d, 0x4b, 0x0b, 0xa1, 0x25, 0x08, 0x22, 0x20, 0x88, 0x5c, 0x05, 0x6d, 0x2b, 0x10, 0x50, 0xbc, 0x51, 0x44, 0xa1, 0x82, 0x54, 0x4b, 0x41, 0x61, 0x70, 0x90, 0x5f, 0xdb, 0x74, 0x81, 0x40, 0x48, 0x3a, 0xe9, 0x22, 0xd6, 0x67, 0xf0, 0x61, 0x74, 0x06, 0xc1, 0x91, 0x19, 0x1f, 0xc0, 0x87, 0x72, 0xfc, 0x36, 0xe1, 0x36, 0x60, 0x41, 0x33, 0x93, 0xec, 0x25, 0xdf, 0x39, 0xdf, 0xf9, 0x2e, 0xbb, 0xbf, 0x7e, 0xff, 0xf8, 0x09, 0x60, 0x0c, 0x6f, 0xa2, 0xa8, 0x40, 0x48, 0x43, 0x58, 0x47, 0x25, 0xaa, 0x18, 0xea, 0x37, 0xf8, 0x07, 0x6e, 0xd8, 0xdc, 0x59, 0x33, 0xe6, 0x72, 0x1b, 0xc2, 0x94, 0x0c, 0x55, 0x63, 0x96, 0x63, 0xc9, 0x71, 0x86, 0x50, 0x2c, 0xbe, 0x14, 0x45, 0x35, 0x22, 0x1a, 0xa2, 0x3a, 0x6a, 0xa0, 0x33, 0x74, 0x38, 0x42, 0x1a, 0x5b, 0x96, 0x23, 0x4c, 0x8f, 0xaf, 0x4a, 0xc3, 0xb4, 0x2d, 0xe1, 0x48, 0x63, 0xf6, 0x68, 0x83, 0x41, 0x5f, 0x13, 0xf2, 0xd4, 0xb2, 0x27, 0x16, 0xcf, 0x5c, 0x0c, 0x49, 0x46, 0xc8, 0xc3, 0x15, 0x1d, 0x75, 0xa8, 0x67, 0x88, 0xc8, 0x75, 0x31, 0x6f, 0xf3, 0x92, 0xf0, 0x18, 0xfa, 0xff, 0x0e, 0xa4, 0xd7, 0x92, 0x25, 0x63, 0xca, 0x1f, 0x02, 0xdb, 0x85, 0x79, 0x22, 0x69, 0xc0, 0x35, 0x0d, 0x8d, 0x3a, 0x9a, 0xd0, 0xcc, 0x90, 0xf8, 0x77, 0x28, 0x49, 0x36, 0x79, 0x81, 0xe7, 0x2c, 0xdb, 0x92, 0x96, 0x28, 0x32, 0x0c, 0x9d, 0xf1, 0x7b, 0x88, 0x2a, 0xf8, 0xf6, 0x46, 0x00, 0x4b, 0x9d, 0x42, 0x90, 0xef, 0x16, 0xb4, 0x6a, 0xb8, 0xa1, 0xa3, 0x0d, 0x37, 0x19, 0x06, 0xff, 0x0f, 0xce, 0x50, 0xc3, 0x6d, 0xdb, 0xdd, 0x99, 0xb6, 0x4b, 0x96, 0xb3, 0xc6, 0xc0, 0xde, 0x6b, 0xe8, 0x60, 0x68, 0x77, 0xbd, 0x35, 0xc3, 0xf5, 0x2b, 0xb2, 0x23, 0x72, 0x06, 0x2f, 0x6e, 0x19, 0x29, 0x9b, 0x17, 0x8b, 0xef, 0x3c, 0x4b, 0x0a, 0x2f, 0x8a, 0x76, 0x74, 0xa9, 0x0a, 0x76, 0x33, 0x84, 0x63, 0xe9, 0xf8, 0x92, 0x86, 0x5b, 0x0c, 0x6d, 0x5b, 0xc2, 0xf8, 0x24, 0xf2, 0xd6, 0xa6, 0x31, 0xc3, 0xcd, 0x4d, 0xdf, 0x7c, 0x9e, 0x4b, 0x73, 0x5d, 0x78, 0xbd, 0xc3, 0x1a, 0xfa, 0x18, 0x5a, 0xcf, 0x93, 0xce, 0x15, 0x4c, 0x37, 0x2f, 0x8a, 0x21, 0xe2, 0x42, 0x14, 0x3d, 0x88, 0x29, 0xd6, 0x38, 0x43, 0x6f, 0x2c, 0x9d, 0x29, 0x23, 0x61, 0xc9, 0x2a, 0x5a, 0xd2, 0xf5, 0x92, 0xca, 0xeb, 0xdd, 0xf2, 0x4a, 0xdf, 0x0a, 0x9e, 0x57, 0x4a, 0x13, 0x18, 0x50, 0x9c, 0x83, 0x0c, 0x95, 0xb1, 0x95, 0x49, 0xd5, 0x51, 0x09, 0x0c, 0xe9, 0x18, 0xc6, 0x3d, 0x6a, 0x35, 0x6e, 0x9a, 0xa2, 0x20, 0x95, 0xbb, 0xcb, 0xbc, 0xa5, 0x15, 0xb2, 0x1d, 0x23, 0x3a, 0x1e, 0xe0, 0x21, 0x25, 0x4d, 0xba, 0x93, 0x25, 0x29, 0x26, 0x3c, 0x8f, 0x97, 0x54, 0x0e, 0xe2, 0x2b, 0x93, 0x1a, 0x1e, 0x53, 0x88, 0x65, 0x73, 0x40, 0x56, 0x29, 0x0a, 0x95, 0xa1, 0x2e, 0x43, 0xc5, 0xc9, 0x6e, 0x6f, 0xe5, 0x84, 0xb7, 0xc8, 0x73, 0x36, 0xed, 0x34, 0x64, 0x5c, 0x93, 0xdb, 0x4b, 0xdc, 0xb3, 0xd4, 0xfa, 0x70, 0x33, 0x2c, 0xd7, 0x2d, 0xaa, 0x4e, 0x5b, 0xa6, 0x2c, 0x63, 0x92, 0x21, 0x9a, 0x77, 0x17, 0xe4, 0xf6, 0xea, 0x6a, 0x3a, 0xbf, 0x49, 0x8d, 0x54, 0x50, 0xfb, 0xbe, 0x85, 0xaa, 0x6b, 0x0b, 0x85, 0x9b, 0x39, 0x39, 0x5e, 0x0b, 0xd2, 0xa3, 0x02, 0x27, 0x49, 0x28, 0xc1, 0x4c, 0x65, 0xa4, 0x02, 0x20, 0xbb, 0x0a, 0xb5, 0x53, 0xbb, 0xb8, 0xee, 0x51, 0xc2, 0x52, 0xae, 0x23, 0xc5, 0x47, 0xa9, 0x24, 0x9d, 0x43, 0x52, 0xd0, 0xe6, 0x49, 0x0b, 0x30, 0x74, 0x96, 0x4b, 0x59, 0x60, 0x90, 0x54, 0x9d, 0x7d, 0x2a, 0x83, 0x0c, 0x5d, 0x97, 0xe5, 0xf8, 0xc8, 0x43, 0x50, 0xba, 0x0b, 0x3c, 0x04, 0x06, 0x2a, 0xfe, 0x05, 0x77, 0xdb, 0x33, 0xc5, 0xb4, 0xa5, 0x32, 0xd6, 0x74, 0x36, 0x41, 0x83, 0x2a, 0x06, 0x22, 0xcd, 0x8a, 0xa2, 0x9c, 0x15, 0x2a, 0xe1, 0x45, 0x0d, 0x73, 0xd4, 0x32, 0x17, 0x34, 0x6a, 0xef, 0x30, 0xe9, 0x4e, 0x3b, 0x0e, 0x9d, 0x92, 0x20, 0x91, 0xe8, 0xc6, 0x23, 0xba, 0xb3, 0xd4, 0x13, 0x02, 0x53, 0xb7, 0x16, 0x7d, 0x9f, 0xd0, 0xca, 0xa0, 0x91, 0xd1, 0x58, 0x99, 0xd8, 0x07, 0xfb, 0x4a, 0x93, 0x0a, 0x8c, 0xd2, 0xb7, 0xca, 0xdf, 0xac, 0x42, 0x92, 0xbe, 0x7a, 0x60, 0x40, 0xf7, 0xde, 0x53, 0x1a, 0x23, 0x18, 0x3f, 0x06, 0x27, 0x0e, 0x29, 0xaf, 0x7c, 0x87, 0xb6, 0x8b, 0xda, 0x5d, 0x5c, 0x0d, 0x7f, 0xc3, 0x75, 0xc5, 0xc2, 0x7c, 0x96, 0xa8, 0xff, 0xbf, 0x1a, 0xb5, 0x84, 0x8a, 0xe0, 0x19, 0x9e, 0x1f, 0xe2, 0x3e, 0x23, 0xac, 0x8e, 0x0a, 0x12, 0x07, 0x68, 0x5f, 0x0e, 0xef, 0xa3, 0x73, 0xf6, 0x00, 0x3d, 0xcb, 0x0d, 0xb7, 0xfb, 0xf7, 0x71, 0x27, 0x7b, 0x80, 0xc4, 0x32, 0x89, 0xe9, 0x1f, 0x0d, 0xb7, 0x86, 0x07, 0x42, 0x7b, 0x30, 0xfa, 0xf7, 0x70, 0xff, 0xcb, 0xb1, 0xb2, 0x66, 0x1f, 0xa9, 0x13, 0x5f, 0x2d, 0x1a, 0xd1, 0x89, 0x0e, 0x74, 0xa1, 0x8f, 0xc2, 0x53, 0x4a, 0x47, 0x02, 0x56, 0x4c, 0x60, 0xd2, 0xd7, 0x95, 0x40, 0x0a, 0x2f, 0xc8, 0x67, 0x84, 0xfe, 0x4f, 0x61, 0x9a, 0x18, 0x1a, 0x09, 0xff, 0x12, 0x33, 0x94, 0x84, 0x0e, 0xe2, 0x48, 0xe3, 0x15, 0x29, 0x09, 0xe1, 0xb5, 0xcf, 0x9e, 0xc1, 0xac, 0x1f, 0x73, 0x05, 0x9d, 0xe0, 0x2c, 0xe6, 0x69, 0xde, 0xe0, 0xcf, 0x83, 0x27, 0x1b, 0x0c, 0x7f, 0x00, 0x50, 0x4b, 0x07, 0x08, 0x9e, 0x09, 0x67, 0x19, 0x0c, 0x03, 0x00, 0x00, 0x04, 0x06, 0x00, 0x00, 0x50, 0x4b, 0x01, 0x02, 0x14, 0x00, 0x14, 0x00, 0x08, 0x08, 0x08, 0x00, 0x03, 0x9a, 0x57, 0x57, 0x61, 0xd5, 0x4a, 0x60, 0xc0, 0x01, 0x00, 0x00, 0xc2, 0x03, 0x00, 0x00, 0x14, 0x00, 0x04, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x4d, 0x45, 0x54, 0x41, 0x2d, 0x49, 0x4e, 0x46, 0x2f, 0x4d, 0x41, 0x4e, 0x49, 0x46, 0x45, 0x53, 0x54, 0x2e, 0x4d, 0x46, 0xfe, 0xca, 0x00, 0x00, 0x50, 0x4b, 0x01, 0x02, 0x0a, 0x00, 0x0a, 0x00, 0x00, 0x08, 0x00, 0x00, 0x03, 0x9a, 0x57, 0x57, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x09, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x06, 0x02, 0x00, 0x00, 0x4d, 0x45, 0x54, 0x41, 0x2d, 0x49, 0x4e, 0x46, 0x2f, 0x50, 0x4b, 0x01, 0x02, 0x0a, 0x00, 0x0a, 0x00, 0x00, 0x08, 0x00, 0x00, 0x03, 0x9a, 0x57, 0x57, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x03, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x2d, 0x02, 0x00, 0x00, 0x6d, 0x65, 0x2f, 0x50, 0x4b, 0x01, 0x02, 0x0a, 0x00, 0x0a, 0x00, 0x00, 0x08, 0x00, 0x00, 0x03, 0x9a, 0x57, 0x57, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x09, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x4e, 0x02, 0x00, 0x00, 0x6d, 0x65, 0x2f, 0x7a, 0x65, 0x64, 0x69, 0x6b, 0x2f, 0x50, 0x4b, 0x01, 0x02, 0x14, 0x00, 0x14, 0x00, 0x08, 0x08, 0x08, 0x00, 0xe4, 0x99, 0x57, 0x57, 0xaf, 0xf7, 0x86, 0xbd, 0x86, 0x02, 0x00, 0x00, 0xe2, 0x04, 0x00, 0x00, 0x21, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x75, 0x02, 0x00, 0x00, 0x6d, 0x65, 0x2f, 0x7a, 0x65, 0x64, 0x69, 0x6b, 0x2f, 0x48, 0x61, 0x63, 0x6b, 0x43, 0x6c, 0x61, 0x73, 0x73, 0x50, 0x61, 0x74, 0x63, 0x68, 0x65, 0x72, 0x24, 0x31, 0x2e, 0x63, 0x6c, 0x61, 0x73, 0x73, 0x50, 0x4b, 0x01, 0x02, 0x14, 0x00, 0x14, 0x00, 0x08, 0x08, 0x08, 0x00, 0xe4, 0x99, 0x57, 0x57, 0xcd, 0x1d, 0x0f, 0xa0, 0x58, 0x02, 0x00, 0x00, 0x98, 0x04, 0x00, 0x00, 0x23, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x4a, 0x05, 0x00, 0x00, 0x6d, 0x65, 0x2f, 0x7a, 0x65, 0x64, 0x69, 0x6b, 0x2f, 0x48, 0x61, 0x63, 0x6b, 0x43, 0x6c, 0x61, 0x73, 0x73, 0x50, 0x61, 0x74, 0x63, 0x68, 0x65, 0x72, 0x24, 0x31, 0x24, 0x31, 0x2e, 0x63, 0x6c, 0x61, 0x73, 0x73, 0x50, 0x4b, 0x01, 0x02, 0x14, 0x00, 0x14, 0x00, 0x08, 0x08, 0x08, 0x00, 0xe4, 0x99, 0x57, 0x57, 0x9e, 0x09, 0x67, 0x19, 0x0c, 0x03, 0x00, 0x00, 0x04, 0x06, 0x00, 0x00, 0x1f, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xf3, 0x07, 0x00, 0x00, 0x6d, 0x65, 0x2f, 0x7a, 0x65, 0x64, 0x69, 0x6b, 0x2f, 0x48, 0x61, 0x63, 0x6b, 0x43, 0x6c, 0x61, 0x73, 0x73, 0x50, 0x61, 0x74, 0x63, 0x68, 0x65, 0x72, 0x2e, 0x63, 0x6c, 0x61, 0x73, 0x73, 0x50, 0x4b, 0x05, 0x06, 0x00, 0x00, 0x00, 0x00, 0x07, 0x00, 0x07, 0x00, 0xd2, 0x01, 0x00, 0x00, 0x4c, 0x0b, 0x00, 0x00, 0x00, 0x00, 0x00}; \nstatic const int lib_size = sizeof(lib_bytes);\n</code></pre>\n<p>What's in the jar file:</p>\n<pre class=\"lang-java prettyprint-override\"><code>package me.zedik;\n\nimport net.minecraft.client.Minecraft;\n\npublic class HackClassPatcher {\n    public static void doStuffIdk() {\n        Minecraft.getMinecraft().thePlayer.capabilities.allowFlying = true;\n        System.out.println(&quot;hi lol&quot;);\n    }\n\n    // some other random stuff\n}\n</code></pre>\n<p>The injection code:</p>\n<pre class=\"lang-cpp prettyprint-override\"><code>// use miniz to extract class files from jar file\nvoid JavaUtils::loadJar(jobject classLoader, const unsigned char *jarBytes, size_t size) {\n    mz_zip_archive archive{};\n    if (!mz_zip_reader_init_mem(&amp;archive, jarBytes, size, 0)) return;\n    mz_uint file_number = mz_zip_reader_get_num_files(&amp;archive);\n    for (mz_uint i = 0; i &lt; file_number; i++) {\n        if (!mz_zip_reader_is_file_supported(&amp;archive, i)) continue;\n        \n        char str[256] = {0};\n        mz_zip_reader_get_filename(&amp;archive, i, str, 256);\n        std::string fileName(str);\n\n        if (fileName.size() &lt;= 6) continue;\n        if (fileName.substr(fileName.size() - 6) != &quot;.class&quot;) continue;\n        \n        size_t classBytes_size = 0;\n        unsigned char *classBytes = (unsigned char*) mz_zip_reader_extract_to_heap(&amp;archive, i, &amp;classBytes_size, 0);\n        if (!classBytes) {\n            mz_zip_reader_end(&amp;archive);\n            return;\n        }\n        \n        jclass jaclass = client-&gt;env-&gt;DefineClass(nullptr, classLoader, (const jbyte*) classBytes, (jsize) classBytes_size);\n        if (jaclass) client-&gt;env-&gt;DeleteLocalRef(jaclass);\n        mz_free(classBytes);\n    }\n    mz_zip_reader_end(&amp;archive);\n}\n\n// creates a new class loader to load the injected classes\njobject JavaUtils::newClassLoader() {\n    jclass urlClass = client-&gt;env-&gt;FindClass(&quot;java/net/URL&quot;);\n    jobjectArray urls = client-&gt;env-&gt;NewObjectArray(0, urlClass, nullptr);\n    jclass URLClassLoaderClass = client-&gt;env-&gt;FindClass(&quot;java/net/URLClassLoader&quot;);\n    jmethodID URLClassLoaderContructor = client-&gt;env-&gt;GetMethodID(URLClassLoaderClass, &quot;&lt;init&gt;&quot;, &quot;([Ljava/net/URL;)V&quot;);\n    jobject URLClassLoader = client-&gt;env-&gt;NewObject(URLClassLoaderClass, URLClassLoaderContructor, urls);\n\n    client-&gt;env-&gt;DeleteLocalRef(urlClass);\n    client-&gt;env-&gt;DeleteLocalRef(urls);\n    client-&gt;env-&gt;DeleteLocalRef(URLClassLoaderClass);\n\n    return URLClassLoader;\n}\n</code></pre>\n<p>Where I inject the jar:</p>\n<pre class=\"lang-cpp prettyprint-override\"><code>jobject classLoader = JavaUtils::newClassLoader();\nJavaUtils::loadJar(classLoader, lib_bytes, lib_size);\n</code></pre>\n<p>Calling the method:</p>\n<pre class=\"lang-cpp prettyprint-override\"><code>jclass libClass = client-&gt;getClass(&quot;me.zedik.HackClassPatcher&quot;);\n        if (libClass == nullptr) {\n            std::cout &lt;&lt; &quot;hack patcher class not found&quot; &lt;&lt; std::endl;\n            return;\n        }\n        jmethodID libMethod = client-&gt;env-&gt;GetStaticMethodID(libClass, &quot;doStuffIdk&quot;, &quot;()V&quot;);\n        if (libMethod == nullptr) {\n            std::cout &lt;&lt; &quot;hack method not found&quot; &lt;&lt; std::endl;\n            return;\n        }\n        client-&gt;env-&gt;CallStaticVoidMethod(libClass, libMethod);\n        std::cout &lt;&lt; &quot;success&quot; &lt;&lt; std::endl;\n\n        if (client-&gt;env-&gt;ExceptionCheck() == JNI_TRUE) {\n            std::cout &lt;&lt; &quot;EXCEPTION&quot; &lt;&lt; std::endl;\n            jthrowable exception = client-&gt;env-&gt;ExceptionOccurred();\n            client-&gt;env-&gt;ExceptionClear();\n\n            JavaUtils::getInformation(exception); // prints stack trace\n            return;\n        }\n</code></pre>\n<p>Output:</p>\n<pre><code>EXCEPTION:\njava.lang.NoClassDefFoundError: net/minecraft/client/Minecraft\n    me.zedik.HackClassPatcher.doStuffIdk(HackClassPatcher.java:8)\nCaused by: java.lang.ClassNotFoundException: net.minecraft.client.Minecraft\n    java.base/java.net.URLClassLoader.findClass(Unknown Source)\n    java.base/java.lang.ClassLoader.loadClass(Unknown Source)\n    java.base/java.lang.ClassLoader.loadClass(Unknown Source)\n    me.zedik.HackClassPatcher.doStuffIdk(HackClassPatcher.java:8)\n</code></pre>\n<p><code>net/minecraft/client/Minecraft</code> is not included in the jar file but is included in the parent process.</p>\n"},{"tags":["java","eclipse","osgi","dependency-management","osgi-bundle"],"answers":[{"tags":[],"owner":{"account_id":892776,"reputation":19519,"user_id":930728,"accept_rate":60,"display_name":"Christian Schneider"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1434633280,"creation_date":1434633280,"answer_id":30916377,"question_id":30916055,"body_markdown":"The enocean library seems to be an OSGi bundle. So you should add it to your target platform and use Import-Package in your own bundle to access the packages you need.","title":"Using an external java library in OSGI bundle","body":"<p>The enocean library seems to be an OSGi bundle. So you should add it to your target platform and use Import-Package in your own bundle to access the packages you need.</p>\n"},{"tags":[],"owner":{"account_id":6600139,"reputation":41,"user_id":5098706,"display_name":"Dave"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1699927943,"creation_date":1699927943,"answer_id":77477831,"question_id":30916055,"body_markdown":"There is also the handy-dandy &#39;org.osgi.framework.system.packages.extra&#39; property in the configuration, this comma separated list will allow the named packages from the system class loader to be present in the system bundle and thereby accessible to the plugins.\r\n\r\nif you use apache felix, look at https://felix.apache.org/documentation/subprojects/apache-felix-framework/apache-felix-framework-configuration-properties.html\r\n\r\nanother great page is: https://moi.vonos.net/java/osgi-classloaders/\r\nreally technical but gives a very good understanding of the OSGi class loading process","title":"Using an external java library in OSGI bundle","body":"<p>There is also the handy-dandy 'org.osgi.framework.system.packages.extra' property in the configuration, this comma separated list will allow the named packages from the system class loader to be present in the system bundle and thereby accessible to the plugins.</p>\n<p>if you use apache felix, look at <a href=\"https://felix.apache.org/documentation/subprojects/apache-felix-framework/apache-felix-framework-configuration-properties.html\" rel=\"nofollow noreferrer\">https://felix.apache.org/documentation/subprojects/apache-felix-framework/apache-felix-framework-configuration-properties.html</a></p>\n<p>another great page is: <a href=\"https://moi.vonos.net/java/osgi-classloaders/\" rel=\"nofollow noreferrer\">https://moi.vonos.net/java/osgi-classloaders/</a>\nreally technical but gives a very good understanding of the OSGi class loading process</p>\n"}],"owner":{"account_id":5391135,"reputation":2152,"user_id":4293609,"accept_rate":61,"display_name":"sabrina2020"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":963,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":30916377,"answer_count":2,"score":0,"last_activity_date":1699927943,"creation_date":1434632393,"question_id":30916055,"body_markdown":"I want to use this java library [1]enj-library in my OSGI bundle that will be executed under KURA eclipse platform.\r\n\r\nI compiled the library as jar and then I created a new plugin project under eclipse &quot;Plug-in from existing JAR archive&quot;\r\n\r\nthen I tried to add it to my bundle, but it did not work:\r\n1.I tried to import the bundle and I verified that the version is correct in both manifest files in the import and the export, but I gopt this error:\r\n\r\n    \r\n    org.osgi.framework.BundleException: The bundle &quot;org.eclipse.kura.binding.enocean_1.0.0.201506181418 [70]&quot; could not be resolved. Reason: Missing Constraint: Import-Package: it.polito.elite.enocean.enj.communication; version=&quot;1.0.0&quot;\r\n        at org.eclipse.osgi.framework.internal.core.AbstractBundle.getResolverError(AbstractBundle.java:1332)\r\n        at org.eclipse.osgi.framework.internal.core.AbstractBundle.getResolutionFailureException(AbstractBundle.java:1316)\r\n        at org.eclipse.osgi.framework.internal.core.BundleHost.startWorker(BundleHost.java:323)\r\n        at org.eclipse.osgi.framework.internal.core.AbstractBundle.start(AbstractBundle.java:300)\r\n        at org.tigris.mtoolkit.iagent.internal.rpc.RemoteBundleAdminImpl.startBundle(RemoteBundleAdminImpl.java:230)\r\n        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)\r\n        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n        at java.lang.reflect.Method.invoke(Method.java:606)\r\n        at org.tigris.mtoolkit.iagent.internal.pmp.InvocationThread.run(InvocationThread.java:54)\r\n        at org.tigris.mtoolkit.iagent.internal.utils.ThreadPool$Worker.run(ThreadPool.java:179)\r\n        at java.lang.Thread.run(Thread.java:724)\r\n\r\n\r\n\r\n2.I added it as a required bundle but the I got the same error:\r\n\r\n    org.osgi.framework.BundleException: The bundle &quot;org.eclipse.kura.binding.enocean_1.0.0.201506181349 [70]&quot; could not be resolved. Reason: Missing Constraint: Require-Bundle: EnOceanJavaLibraryplugIn; bundle-version=&quot;1.0.0&quot;\r\n        at org.eclipse.osgi.framework.internal.core.AbstractBundle.getResolverError(AbstractBundle.java:1332)\r\n        at org.eclipse.osgi.framework.internal.core.AbstractBundle.getResolutionFailureException(AbstractBundle.java:1316)\r\n        at org.eclipse.osgi.framework.internal.core.BundleHost.startWorker(BundleHost.java:323)\r\n        at org.eclipse.osgi.framework.internal.core.AbstractBundle.start(AbstractBundle.java:300)\r\n        at org.tigris.mtoolkit.iagent.internal.rpc.RemoteBundleAdminImpl.startBundle(RemoteBundleAdminImpl.java:230)\r\n        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)\r\n        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n        at java.lang.reflect.Method.invoke(Method.java:606)\r\n        at org.tigris.mtoolkit.iagent.internal.pmp.InvocationThread.run(InvocationThread.java:54)\r\n        at org.tigris.mtoolkit.iagent.internal.utils.ThreadPool$Worker.run(ThreadPool.java:179)\r\n        at java.lang.Thread.run(Thread.java:724)\r\n\r\n3.I added in the class path and my bundle started but I got the class not found exception\r\n\r\n    java.lang.ClassNotFoundException: org.eclipse.kura.binding.enocean.EnOcean\r\n        at org.eclipse.osgi.internal.loader.BundleLoader.findClassInternal(BundleLoader.java:501)\r\n        at org.eclipse.osgi.internal.loader.BundleLoader.findClass(BundleLoader.java:421)\r\n        at org.eclipse.osgi.internal.loader.BundleLoader.findClass(BundleLoader.java:412)\r\n        at org.eclipse.osgi.internal.baseadaptor.DefaultClassLoader.loadClass(DefaultClassLoader.java:107)\r\n        at java.lang.ClassLoader.loadClass(ClassLoader.java:357)\r\n        at org.eclipse.osgi.internal.loader.BundleLoader.loadClass(BundleLoader.java:340)\r\n        at org.eclipse.osgi.framework.internal.core.BundleHost.loadClass(BundleHost.java:229)\r\n        at org.eclipse.osgi.framework.internal.core.AbstractBundle.loadClass(AbstractBundle.java:1212)\r\n        at org.eclipse.equinox.internal.ds.model.ServiceComponent.createInstance(ServiceComponent.java:493)\r\n        at org.eclipse.equinox.internal.ds.model.ServiceComponentProp.createInstance(ServiceComponentProp.java:272)\r\n        at org.eclipse.equinox.internal.ds.model.ServiceComponentProp.build(ServiceComponentProp.java:333)\r\n        at org.eclipse.equinox.internal.ds.InstanceProcess.buildComponent(InstanceProcess.java:620)\r\n        at org.eclipse.equinox.internal.ds.InstanceProcess.buildComponents(InstanceProcess.java:197)\r\n        at org.eclipse.equinox.internal.ds.Resolver.buildNewlySatisfied(Resolver.java:473)\r\n        at org.eclipse.equinox.internal.ds.Resolver.enableComponents(Resolver.java:217)\r\n        at org.eclipse.equinox.internal.ds.SCRManager.performWork(SCRManager.java:816)\r\n        at org.eclipse.equinox.internal.ds.SCRManager$QueuedJob.dispatch(SCRManager.java:783)\r\n        at org.eclipse.equinox.internal.ds.WorkThread.run(WorkThread.java:89)\r\n        at org.eclipse.equinox.internal.util.impl.tpt.threadpool.Executor.run(Executor.java:70)\r\n\r\n\r\n\r\n[1]https://github.com/dog-gateway/enj-library\r\n\r\nhow can I include this library on my OSGI bundle?\r\n\r\nThanks a lot for your help!\r\n","title":"Using an external java library in OSGI bundle","body":"<p>I want to use this java library [1]enj-library in my OSGI bundle that will be executed under KURA eclipse platform.</p>\n\n<p>I compiled the library as jar and then I created a new plugin project under eclipse \"Plug-in from existing JAR archive\"</p>\n\n<p>then I tried to add it to my bundle, but it did not work:\n1.I tried to import the bundle and I verified that the version is correct in both manifest files in the import and the export, but I gopt this error:</p>\n\n<pre><code>org.osgi.framework.BundleException: The bundle \"org.eclipse.kura.binding.enocean_1.0.0.201506181418 [70]\" could not be resolved. Reason: Missing Constraint: Import-Package: it.polito.elite.enocean.enj.communication; version=\"1.0.0\"\n    at org.eclipse.osgi.framework.internal.core.AbstractBundle.getResolverError(AbstractBundle.java:1332)\n    at org.eclipse.osgi.framework.internal.core.AbstractBundle.getResolutionFailureException(AbstractBundle.java:1316)\n    at org.eclipse.osgi.framework.internal.core.BundleHost.startWorker(BundleHost.java:323)\n    at org.eclipse.osgi.framework.internal.core.AbstractBundle.start(AbstractBundle.java:300)\n    at org.tigris.mtoolkit.iagent.internal.rpc.RemoteBundleAdminImpl.startBundle(RemoteBundleAdminImpl.java:230)\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.lang.reflect.Method.invoke(Method.java:606)\n    at org.tigris.mtoolkit.iagent.internal.pmp.InvocationThread.run(InvocationThread.java:54)\n    at org.tigris.mtoolkit.iagent.internal.utils.ThreadPool$Worker.run(ThreadPool.java:179)\n    at java.lang.Thread.run(Thread.java:724)\n</code></pre>\n\n<p>2.I added it as a required bundle but the I got the same error:</p>\n\n<pre><code>org.osgi.framework.BundleException: The bundle \"org.eclipse.kura.binding.enocean_1.0.0.201506181349 [70]\" could not be resolved. Reason: Missing Constraint: Require-Bundle: EnOceanJavaLibraryplugIn; bundle-version=\"1.0.0\"\n    at org.eclipse.osgi.framework.internal.core.AbstractBundle.getResolverError(AbstractBundle.java:1332)\n    at org.eclipse.osgi.framework.internal.core.AbstractBundle.getResolutionFailureException(AbstractBundle.java:1316)\n    at org.eclipse.osgi.framework.internal.core.BundleHost.startWorker(BundleHost.java:323)\n    at org.eclipse.osgi.framework.internal.core.AbstractBundle.start(AbstractBundle.java:300)\n    at org.tigris.mtoolkit.iagent.internal.rpc.RemoteBundleAdminImpl.startBundle(RemoteBundleAdminImpl.java:230)\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.lang.reflect.Method.invoke(Method.java:606)\n    at org.tigris.mtoolkit.iagent.internal.pmp.InvocationThread.run(InvocationThread.java:54)\n    at org.tigris.mtoolkit.iagent.internal.utils.ThreadPool$Worker.run(ThreadPool.java:179)\n    at java.lang.Thread.run(Thread.java:724)\n</code></pre>\n\n<p>3.I added in the class path and my bundle started but I got the class not found exception</p>\n\n<pre><code>java.lang.ClassNotFoundException: org.eclipse.kura.binding.enocean.EnOcean\n    at org.eclipse.osgi.internal.loader.BundleLoader.findClassInternal(BundleLoader.java:501)\n    at org.eclipse.osgi.internal.loader.BundleLoader.findClass(BundleLoader.java:421)\n    at org.eclipse.osgi.internal.loader.BundleLoader.findClass(BundleLoader.java:412)\n    at org.eclipse.osgi.internal.baseadaptor.DefaultClassLoader.loadClass(DefaultClassLoader.java:107)\n    at java.lang.ClassLoader.loadClass(ClassLoader.java:357)\n    at org.eclipse.osgi.internal.loader.BundleLoader.loadClass(BundleLoader.java:340)\n    at org.eclipse.osgi.framework.internal.core.BundleHost.loadClass(BundleHost.java:229)\n    at org.eclipse.osgi.framework.internal.core.AbstractBundle.loadClass(AbstractBundle.java:1212)\n    at org.eclipse.equinox.internal.ds.model.ServiceComponent.createInstance(ServiceComponent.java:493)\n    at org.eclipse.equinox.internal.ds.model.ServiceComponentProp.createInstance(ServiceComponentProp.java:272)\n    at org.eclipse.equinox.internal.ds.model.ServiceComponentProp.build(ServiceComponentProp.java:333)\n    at org.eclipse.equinox.internal.ds.InstanceProcess.buildComponent(InstanceProcess.java:620)\n    at org.eclipse.equinox.internal.ds.InstanceProcess.buildComponents(InstanceProcess.java:197)\n    at org.eclipse.equinox.internal.ds.Resolver.buildNewlySatisfied(Resolver.java:473)\n    at org.eclipse.equinox.internal.ds.Resolver.enableComponents(Resolver.java:217)\n    at org.eclipse.equinox.internal.ds.SCRManager.performWork(SCRManager.java:816)\n    at org.eclipse.equinox.internal.ds.SCRManager$QueuedJob.dispatch(SCRManager.java:783)\n    at org.eclipse.equinox.internal.ds.WorkThread.run(WorkThread.java:89)\n    at org.eclipse.equinox.internal.util.impl.tpt.threadpool.Executor.run(Executor.java:70)\n</code></pre>\n\n<p>[1]<a href=\"https://github.com/dog-gateway/enj-library\" rel=\"nofollow\">https://github.com/dog-gateway/enj-library</a></p>\n\n<p>how can I include this library on my OSGI bundle?</p>\n\n<p>Thanks a lot for your help!</p>\n"},{"tags":["java","list","dictionary","collections"],"comments":[{"owner":{"account_id":1890047,"reputation":2191,"user_id":1708390,"accept_rate":79,"display_name":"Bugs Happen"},"score":1,"creation_date":1512493981,"post_id":1026723,"comment_id":82276823,"body_markdown":"I think it&#39;s not a good model if one has to convert map into list. One should write the code in such manner that this situation doesn&#39;t arrise.","body":"I think it&#39;s not a good model if one has to convert map into list. One should write the code in such manner that this situation doesn&#39;t arrise."}],"answers":[{"tags":[],"owner":{"account_id":9867,"reputation":618181,"user_id":18393,"accept_rate":82,"display_name":"cletus"},"down_vote_count":3,"up_vote_count":1519,"is_accepted":true,"score":1516,"last_activity_date":1245671322,"creation_date":1245671322,"answer_id":1026736,"question_id":1026723,"body_markdown":"    List&lt;Value&gt; list = new ArrayList&lt;Value&gt;(map.values());\r\n\r\nassuming:\r\n\r\n    Map&lt;Key,Value&gt; map;\r\n\r\n","title":"How do I convert a Map to List in Java?","body":"<pre><code>List&lt;Value&gt; list = new ArrayList&lt;Value&gt;(map.values());\n</code></pre>\n\n<p>assuming:</p>\n\n<pre><code>Map&lt;Key,Value&gt; map;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":43401,"reputation":579,"user_id":126875,"display_name":"Diego Amicabile"},"down_vote_count":1,"up_vote_count":27,"is_accepted":false,"score":26,"last_activity_date":1354786434,"creation_date":1245671397,"answer_id":1026745,"question_id":1026723,"body_markdown":"a list of what ?\r\n\r\nAssuming `map` is your instance of `Map`\r\n\r\n- `map.values()` will return a `Collection` containing all of the map&#39;s values.\r\n- `map.keySet()` will return a `Set` containing all of the map&#39;s keys.","title":"How do I convert a Map to List in Java?","body":"<p>a list of what ?</p>\n\n<p>Assuming <code>map</code> is your instance of <code>Map</code></p>\n\n<ul>\n<li><code>map.values()</code> will return a <code>Collection</code> containing all of the map's values.</li>\n<li><code>map.keySet()</code> will return a <code>Set</code> containing all of the map's keys.</li>\n</ul>\n"},{"tags":[],"owner":{"account_id":9320,"reputation":159784,"user_id":17172,"display_name":"coobird"},"down_vote_count":1,"up_vote_count":145,"is_accepted":false,"score":144,"last_activity_date":1320081196,"creation_date":1245671512,"answer_id":1026754,"question_id":1026723,"body_markdown":"The issue here is that [`Map`][1] has two values (a key and value), while a [`List`][2] only has one value (an element).\r\n\r\nTherefore, the best that can be done is to either get a `List` of the keys or the values. (Unless we make a wrapper to hold on to the key/value pair).\r\n\r\nSay we have a `Map`:\r\n\r\n    Map&lt;String, String&gt; m = new HashMap&lt;String, String&gt;();\r\n    m.put(&quot;Hello&quot;, &quot;World&quot;);\r\n    m.put(&quot;Apple&quot;, &quot;3.14&quot;);\r\n    m.put(&quot;Another&quot;, &quot;Element&quot;);\r\n\r\nThe keys as a `List` can be obtained by creating a new [`ArrayList`][3] from a [`Set`][4] returned by the [`Map.keySet`][5] method:\r\n\r\n    List&lt;String&gt; list = new ArrayList&lt;String&gt;(m.keySet());\r\n\t\t\r\nWhile the values as a `List` can be obtained creating a new `ArrayList` from a [`Collection`][6] returned by the [`Map.values`][7] method:\r\n\r\n    List&lt;String&gt; list = new ArrayList&lt;String&gt;(m.values());\r\n\r\nThe result of getting the `List` of keys:\r\n\r\n&lt;pre&gt;\r\nApple\r\nAnother\r\nHello\r\n&lt;/pre&gt;\r\n\r\nThe result of getting the `List` of values:\r\n\r\n&lt;pre&gt;\r\n3.14\r\nElement\r\nWorld\r\n&lt;/pre&gt;\r\n\r\n  [1]: http://java.sun.com/javase/6/docs/api/java/util/Map.html\r\n  [2]: http://java.sun.com/javase/6/docs/api/java/util/List.html\r\n  [3]: http://java.sun.com/javase/6/docs/api/java/util/ArrayList.html\r\n  [4]: http://java.sun.com/javase/6/docs/api/java/util/Set.html\r\n  [5]: http://java.sun.com/javase/6/docs/api/java/util/Map.html#keySet()\r\n  [6]: http://java.sun.com/javase/6/docs/api/java/util/Collection.html\r\n  [7]: http://java.sun.com/javase/6/docs/api/java/util/Map.html#values()","title":"How do I convert a Map to List in Java?","body":"<p>The issue here is that <a href=\"http://java.sun.com/javase/6/docs/api/java/util/Map.html\" rel=\"noreferrer\"><code>Map</code></a> has two values (a key and value), while a <a href=\"http://java.sun.com/javase/6/docs/api/java/util/List.html\" rel=\"noreferrer\"><code>List</code></a> only has one value (an element).</p>\n\n<p>Therefore, the best that can be done is to either get a <code>List</code> of the keys or the values. (Unless we make a wrapper to hold on to the key/value pair).</p>\n\n<p>Say we have a <code>Map</code>:</p>\n\n<pre><code>Map&lt;String, String&gt; m = new HashMap&lt;String, String&gt;();\nm.put(\"Hello\", \"World\");\nm.put(\"Apple\", \"3.14\");\nm.put(\"Another\", \"Element\");\n</code></pre>\n\n<p>The keys as a <code>List</code> can be obtained by creating a new <a href=\"http://java.sun.com/javase/6/docs/api/java/util/ArrayList.html\" rel=\"noreferrer\"><code>ArrayList</code></a> from a <a href=\"http://java.sun.com/javase/6/docs/api/java/util/Set.html\" rel=\"noreferrer\"><code>Set</code></a> returned by the <a href=\"http://java.sun.com/javase/6/docs/api/java/util/Map.html#keySet()\" rel=\"noreferrer\"><code>Map.keySet</code></a> method:</p>\n\n<pre><code>List&lt;String&gt; list = new ArrayList&lt;String&gt;(m.keySet());\n</code></pre>\n\n<p>While the values as a <code>List</code> can be obtained creating a new <code>ArrayList</code> from a <a href=\"http://java.sun.com/javase/6/docs/api/java/util/Collection.html\" rel=\"noreferrer\"><code>Collection</code></a> returned by the <a href=\"http://java.sun.com/javase/6/docs/api/java/util/Map.html#values()\" rel=\"noreferrer\"><code>Map.values</code></a> method:</p>\n\n<pre><code>List&lt;String&gt; list = new ArrayList&lt;String&gt;(m.values());\n</code></pre>\n\n<p>The result of getting the <code>List</code> of keys:</p>\n\n<pre>\nApple\nAnother\nHello\n</pre>\n\n<p>The result of getting the <code>List</code> of values:</p>\n\n<pre>\n3.14\nElement\nWorld\n</pre>\n"},{"tags":[],"owner":{"account_id":43399,"reputation":1102,"user_id":126859,"display_name":"maneesh"},"down_vote_count":0,"up_vote_count":15,"is_accepted":false,"score":15,"last_activity_date":1320081243,"creation_date":1245671628,"answer_id":1026770,"question_id":1026723,"body_markdown":"I guess you want to convert the values contained in the `Map` to a `list`? Easiest is to call the `values()` method of the `Map` interface. This will return the `Collection` of value objects contained in the `Map`.\r\n\r\nNote that this `Collection` is backed by the `Map` object and any changes to the `Map` object will reflect here. So if you want a separate copy not bound to your `Map` object, simply create a new `List` object like an `ArrayList` passing the value `Collection` as below.\r\n\r\n    ArrayList&lt;String&gt; list = new ArrayList&lt;String&gt;(map.values());","title":"How do I convert a Map to List in Java?","body":"<p>I guess you want to convert the values contained in the <code>Map</code> to a <code>list</code>? Easiest is to call the <code>values()</code> method of the <code>Map</code> interface. This will return the <code>Collection</code> of value objects contained in the <code>Map</code>.</p>\n\n<p>Note that this <code>Collection</code> is backed by the <code>Map</code> object and any changes to the <code>Map</code> object will reflect here. So if you want a separate copy not bound to your <code>Map</code> object, simply create a new <code>List</code> object like an <code>ArrayList</code> passing the value <code>Collection</code> as below.</p>\n\n<pre><code>ArrayList&lt;String&gt; list = new ArrayList&lt;String&gt;(map.values());\n</code></pre>\n"},{"tags":[],"owner":{"account_id":670280,"reputation":301,"user_id":509937,"display_name":"java dude"},"down_vote_count":0,"up_vote_count":30,"is_accepted":false,"score":30,"last_activity_date":1320081308,"creation_date":1289934018,"answer_id":4197913,"question_id":1026723,"body_markdown":"`map.entrySet()` gives you a collection of `Map.Entry` objects containing both key and value. you can then transform this into any collection object you like, such as `new ArrayList(map.entrySet())`;","title":"How do I convert a Map to List in Java?","body":"<p><code>map.entrySet()</code> gives you a collection of <code>Map.Entry</code> objects containing both key and value. you can then transform this into any collection object you like, such as <code>new ArrayList(map.entrySet())</code>;</p>\n"},{"tags":[],"owner":{"account_id":490570,"reputation":111,"user_id":2060068,"display_name":"M0les"},"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1395109640,"creation_date":1395109640,"answer_id":22469278,"question_id":1026723,"body_markdown":"If you want to ensure the values in the resultant `List&lt;Value&gt;` are in the key-ordering of the input `Map&lt;Key, Value&gt;`, you need to &quot;go via&quot; `SortedMap` somehow.\r\n\r\nEither _start_ with a concrete `SortedMap` implementation (Such as `TreeMap`) or insert your input `Map` into a `SortedMap` before converting that to `List`. e.g.:\r\n\r\n    Map&lt;Key,Value&gt; map;\r\n    List&lt;Value&gt; list = new ArrayList&lt;Value&gt;( new TreeMap&lt;Key Value&gt;( map ));\r\n\r\nOtherwise you&#39;ll get whatever native ordering the `Map` implementation provides, which can often be something other than the natural key ordering (Try `Hashtable` or `ConcurrentHashMap`, for variety).\r\n","title":"How do I convert a Map to List in Java?","body":"<p>If you want to ensure the values in the resultant <code>List&lt;Value&gt;</code> are in the key-ordering of the input <code>Map&lt;Key, Value&gt;</code>, you need to \"go via\" <code>SortedMap</code> somehow.</p>\n\n<p>Either <em>start</em> with a concrete <code>SortedMap</code> implementation (Such as <code>TreeMap</code>) or insert your input <code>Map</code> into a <code>SortedMap</code> before converting that to <code>List</code>. e.g.:</p>\n\n<pre><code>Map&lt;Key,Value&gt; map;\nList&lt;Value&gt; list = new ArrayList&lt;Value&gt;( new TreeMap&lt;Key Value&gt;( map ));\n</code></pre>\n\n<p>Otherwise you'll get whatever native ordering the <code>Map</code> implementation provides, which can often be something other than the natural key ordering (Try <code>Hashtable</code> or <code>ConcurrentHashMap</code>, for variety).</p>\n"},{"tags":[],"owner":{"account_id":3195278,"reputation":197,"user_id":2698573,"accept_rate":75,"display_name":"user11"},"down_vote_count":1,"up_vote_count":9,"is_accepted":false,"score":8,"last_activity_date":1405578935,"creation_date":1405578935,"answer_id":24796440,"question_id":1026723,"body_markdown":"        Map&lt;String, Integer&gt; map = new HashMap&lt;String, Integer&gt;();\r\n        map.put(&quot;java&quot;, 20);\r\n        map.put(&quot;C++&quot;, 45);\r\n\r\n        Set &lt;Entry&lt;String, Integer&gt;&gt; set = map.entrySet();\r\n        \r\n        List&lt;Entry&lt;String, Integer&gt;&gt; list = new ArrayList&lt;Entry&lt;String, Integer&gt;&gt;(set);\r\n\r\nwe can have both key and value pair in list.Also can get key and value using Map.Entry&lt;k,v&gt; by iterating over list.","title":"How do I convert a Map to List in Java?","body":"<pre><code>    Map&lt;String, Integer&gt; map = new HashMap&lt;String, Integer&gt;();\n    map.put(\"java\", 20);\n    map.put(\"C++\", 45);\n\n    Set &lt;Entry&lt;String, Integer&gt;&gt; set = map.entrySet();\n\n    List&lt;Entry&lt;String, Integer&gt;&gt; list = new ArrayList&lt;Entry&lt;String, Integer&gt;&gt;(set);\n</code></pre>\n\n<p>we can have both key and value pair in list.Also can get key and value using Map.Entry by iterating over list.</p>\n"},{"tags":[],"owner":{"account_id":372647,"reputation":2149,"user_id":721809,"accept_rate":100,"display_name":"Matej Kormuth"},"down_vote_count":2,"up_vote_count":67,"is_accepted":false,"score":65,"last_activity_date":1468945329,"creation_date":1442651686,"answer_id":32666076,"question_id":1026723,"body_markdown":"Using the Java 8 Streams API.\r\n\r\n    List&lt;Value&gt; values = map.values().stream().collect(Collectors.toList());","title":"How do I convert a Map to List in Java?","body":"<p>Using the Java 8 Streams API.</p>\n\n<pre><code>List&lt;Value&gt; values = map.values().stream().collect(Collectors.toList());\n</code></pre>\n"},{"tags":[],"owner":{"account_id":7449501,"reputation":49,"user_id":5664758,"display_name":"siva prasad"},"down_vote_count":1,"up_vote_count":5,"is_accepted":false,"score":4,"last_activity_date":1639661471,"creation_date":1457947268,"answer_id":35983575,"question_id":1026723,"body_markdown":"     Map&lt;String, String &gt; map = new HapshMap&lt;String, String&gt;;\r\n     map.add(&quot;one&quot;,&quot;java&quot;);\r\n     map.add(&quot;two&quot;, &quot;spring&quot;);\r\n     Set&lt;Entry&lt;String, String&gt;&gt; set = map.entrySet();\r\n     List&lt;Entry&lt;String, String&gt;&gt; list = new ArrayList&lt;Entry&lt;String, String&gt;&gt;    (set);\r\n     for(Entry&lt;String, String&gt; entry : list) {\r\n       System.out.println(entry.getKey());\r\n       System.out.println(entry.getValue());\r\n     }","title":"How do I convert a Map to List in Java?","body":"<pre><code> Map&lt;String, String &gt; map = new HapshMap&lt;String, String&gt;;\n map.add(&quot;one&quot;,&quot;java&quot;);\n map.add(&quot;two&quot;, &quot;spring&quot;);\n Set&lt;Entry&lt;String, String&gt;&gt; set = map.entrySet();\n List&lt;Entry&lt;String, String&gt;&gt; list = new ArrayList&lt;Entry&lt;String, String&gt;&gt;    (set);\n for(Entry&lt;String, String&gt; entry : list) {\n   System.out.println(entry.getKey());\n   System.out.println(entry.getValue());\n }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":8590107,"reputation":61,"user_id":6434959,"display_name":"Hakan Anlamaz"},"down_vote_count":2,"up_vote_count":4,"is_accepted":false,"score":2,"last_activity_date":1699927183,"creation_date":1466677813,"answer_id":37989053,"question_id":1026723,"body_markdown":"    public List&lt;Object&gt; convertMapToList(Map&lt;Object, Object&gt; map){\r\n        return new ArrayList&lt;&gt;(map.values());\r\n    }\r\n\r\n","title":"How do I convert a Map to List in Java?","body":"<pre><code>public List&lt;Object&gt; convertMapToList(Map&lt;Object, Object&gt; map){\n    return new ArrayList&lt;&gt;(map.values());\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":12882885,"reputation":62,"user_id":9317373,"display_name":"Hiral Pancholi"},"down_vote_count":2,"up_vote_count":3,"is_accepted":false,"score":1,"last_activity_date":1518598250,"creation_date":1517844598,"answer_id":48625943,"question_id":1026723,"body_markdown":"Here&#39;s the generic method to get values from map.\r\n\r\n\r\n    public static &lt;T&gt; List&lt;T&gt; ValueListFromMap(HashMap&lt;String, T&gt; map) {\r\n        List&lt;T&gt; thingList = new ArrayList&lt;&gt;();\r\n\r\n        for (Map.Entry&lt;String, T&gt; entry : map.entrySet()) {\r\n            thingList.add(entry.getValue());\r\n        }\r\n\r\n        return thingList;\r\n    }","title":"How do I convert a Map to List in Java?","body":"<p>Here's the generic method to get values from map.</p>\n\n<pre><code>public static &lt;T&gt; List&lt;T&gt; ValueListFromMap(HashMap&lt;String, T&gt; map) {\n    List&lt;T&gt; thingList = new ArrayList&lt;&gt;();\n\n    for (Map.Entry&lt;String, T&gt; entry : map.entrySet()) {\n        thingList.add(entry.getValue());\n    }\n\n    return thingList;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":10213339,"reputation":1287,"user_id":7539786,"display_name":"saurabhgoyal795"},"down_vote_count":1,"up_vote_count":6,"is_accepted":false,"score":5,"last_activity_date":1522319868,"creation_date":1522319868,"answer_id":49553934,"question_id":1026723,"body_markdown":"    // you can use this\r\n    List&lt;Value&gt; list = new ArrayList&lt;Value&gt;(map.values());\r\n    \r\n    // or you may use \r\n    List&lt;Value&gt; list = new ArrayList&lt;Value&gt;();\r\n    for (Map.Entry&lt;String, String&gt; entry : map.entrySet())\r\n    {\r\n    list.add(entry.getValue());    \r\n    }\r\n\r\n","title":"How do I convert a Map to List in Java?","body":"<pre><code>// you can use this\nList&lt;Value&gt; list = new ArrayList&lt;Value&gt;(map.values());\n\n// or you may use \nList&lt;Value&gt; list = new ArrayList&lt;Value&gt;();\nfor (Map.Entry&lt;String, String&gt; entry : map.entrySet())\n{\nlist.add(entry.getValue());    \n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":108117,"reputation":9982,"user_id":287138,"accept_rate":82,"display_name":"Stefan Haberl"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1626276993,"creation_date":1626276993,"answer_id":68381091,"question_id":1026723,"body_markdown":"If you want an *immutable* copy of the values:\r\n\r\n```\r\nList&lt;Value&gt; list = List.copyOf(map.values())\r\n```","title":"How do I convert a Map to List in Java?","body":"<p>If you want an <em>immutable</em> copy of the values:</p>\n<pre><code>List&lt;Value&gt; list = List.copyOf(map.values())\n</code></pre>\n"}],"owner":{"account_id":876449,"reputation":8089,"user_id":60173,"display_name":"Javaa"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1034046,"favorite_count":0,"down_vote_count":3,"up_vote_count":808,"accepted_answer_id":1026736,"answer_count":13,"score":805,"last_activity_date":1699927183,"creation_date":1245671128,"question_id":1026723,"body_markdown":"How do I convert a `Map&lt;key,value&gt;` to a `List&lt;value&gt;`? Should I iterate over all map values and insert them into a list?","title":"How do I convert a Map to List in Java?","body":"<p>How do I convert a <code>Map&lt;key,value&gt;</code> to a <code>List&lt;value&gt;</code>? Should I iterate over all map values and insert them into a list?</p>\n"},{"tags":["java","android","xml","kotlin"],"comments":[{"owner":{"account_id":3695702,"reputation":12519,"user_id":5156075,"accept_rate":100,"display_name":"John Joe"},"score":0,"creation_date":1558411896,"post_id":56230707,"comment_id":99081423,"body_markdown":"can you provide the library link ?","body":"can you provide the library link ?"},{"owner":{"account_id":14018917,"reputation":63,"user_id":10125613,"display_name":"dmelton_"},"score":0,"creation_date":1558412006,"post_id":56230707,"comment_id":99081450,"body_markdown":"https://github.com/lisawray/groupie @JohnJoe","body":"<a href=\"https://github.com/lisawray/groupie\" rel=\"nofollow noreferrer\">github.com/lisawray/groupie</a> @JohnJoe"}],"answers":[{"tags":[],"owner":{"account_id":14018917,"reputation":63,"user_id":10125613,"display_name":"dmelton_"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1558412794,"creation_date":1558412794,"answer_id":56231064,"question_id":56230707,"body_markdown":"I figured it out. I forgot to add the Layout Manager in my RecyclerView xml block:\r\n```app:layoutManager=&quot;android.support.v7.widget.LinearLayoutManager&quot;```","title":"RecyclerView not Visible with Groupie (Kotlin)","body":"<p>I figured it out. I forgot to add the Layout Manager in my RecyclerView xml block:\n<code>app:layoutManager=\"android.support.v7.widget.LinearLayoutManager\"</code></p>\n"},{"tags":[],"owner":{"account_id":14560846,"reputation":9,"user_id":10516944,"display_name":"kabir saini"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1593986370,"creation_date":1593973421,"answer_id":62744708,"question_id":56230707,"body_markdown":"You need to add this in your layout file where you ha:\r\n`app:layoutManager=&quot;android.support.v7.widget.LinearLayoutManager`\r\nplus you also need to add ","title":"RecyclerView not Visible with Groupie (Kotlin)","body":"<p>You need to add this in your layout file where you ha:\n<code>app:layoutManager=&quot;android.support.v7.widget.LinearLayoutManager</code>\nplus you also need to add</p>\n"}],"owner":{"account_id":14018917,"reputation":63,"user_id":10125613,"display_name":"dmelton_"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1149,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1699927090,"creation_date":1558409587,"question_id":56230707,"body_markdown":"I&#39;m trying to use the Groupie library (version 2.1.0) for my RecylerView. In my original app, the view would not be visible at all. I decided to make a dummy app to resolve my issue, and I just cannot get the view to be visible. I feel the solution may be simple since this library is simple to use.\r\n\r\n**MainActivity.kt:**\r\n```kotlin\r\npackage com.dmelton.test\r\n\r\nimport android.support.v7.app.AppCompatActivity\r\nimport android.os.Bundle\r\nimport com.xwray.groupie.GroupAdapter\r\nimport com.xwray.groupie.Item\r\nimport com.xwray.groupie.ViewHolder\r\nimport kotlinx.android.synthetic.main.activity_main.*\r\n\r\nclass MainActivity : AppCompatActivity() {\r\n\r\n    override fun onCreate(savedInstanceState: Bundle?) {\r\n        super.onCreate(savedInstanceState)\r\n        setContentView(R.layout.activity_main)\r\n\r\n        val adapter = GroupAdapter&lt;ViewHolder&gt;()\r\n\r\n        adapter.add(Test())\r\n        adapter.add(Test())\r\n        adapter.add(Test())\r\n\r\n        new_recyclerView.adapter = adapter\r\n    }\r\n}\r\n\r\nclass Test: Item&lt;ViewHolder&gt;() {\r\n\r\n    override fun bind(viewHolder: ViewHolder, position: Int) {\r\n        TODO(&quot;not implemented&quot;) //To change body of created functions use File | Settings | File Templates.\r\n    }\r\n\r\n    override fun getLayout(): Int {\r\n        return R.layout.individual_service\r\n    }\r\n\r\n}\r\n```\r\n\r\n**activity_main.xml:**\r\n```xml\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n&lt;android.support.constraint.ConstraintLayout\r\n        xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n        xmlns:tools=&quot;http://schemas.android.com/tools&quot;\r\n        xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\r\n        android:layout_width=&quot;match_parent&quot;\r\n        android:layout_height=&quot;match_parent&quot;\r\n        tools:context=&quot;.MainActivity&quot;&gt;\r\n\r\n\r\n    &lt;android.support.v7.widget.RecyclerView\r\n            android:layout_width=&quot;395dp&quot;\r\n            android:layout_height=&quot;715dp&quot;\r\n            app:layout_constraintBottom_toBottomOf=&quot;parent&quot;\r\n            app:layout_constraintTop_toTopOf=&quot;parent&quot;\r\n            app:layout_constraintStart_toStartOf=&quot;parent&quot;\r\n            app:layout_constraintEnd_toEndOf=&quot;parent&quot; android:id=&quot;@+id/new_recyclerView&quot;/&gt;\r\n&lt;/android.support.constraint.ConstraintLayout&gt;\r\n```\r\n\r\n**individual_service.xml:**\r\n```xml\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n&lt;android.support.constraint.ConstraintLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n                                             android:layout_width=&quot;match_parent&quot;\r\n                                             android:layout_height=&quot;wrap_content&quot;\r\n                                             xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;&gt;\r\n\r\n    &lt;ImageView\r\n            android:id=&quot;@+id/imageView_service&quot;\r\n            android:layout_width=&quot;60dp&quot;\r\n            android:layout_height=&quot;60dp&quot;\r\n            android:layout_marginStart=&quot;16dp&quot;\r\n            android:layout_marginTop=&quot;8dp&quot;\r\n            android:layout_marginBottom=&quot;8dp&quot;\r\n            android:background=&quot;@android:color/holo_blue_dark&quot;\r\n            app:layout_constraintBottom_toBottomOf=&quot;parent&quot;\r\n            app:layout_constraintStart_toStartOf=&quot;parent&quot;\r\n            app:layout_constraintTop_toTopOf=&quot;parent&quot;\r\n            app:srcCompat=&quot;@android:drawable/ic_menu_preferences&quot; /&gt;\r\n\r\n    &lt;TextView\r\n            android:id=&quot;@+id/textView_service_name&quot;\r\n            android:layout_width=&quot;0dp&quot;\r\n            android:layout_height=&quot;wrap_content&quot;\r\n            android:layout_marginStart=&quot;16dp&quot;\r\n            android:layout_marginBottom=&quot;8dp&quot;\r\n            android:text=&quot;Service Name&quot;\r\n            android:textColor=&quot;@android:color/black&quot;\r\n            android:textSize=&quot;16sp&quot;\r\n            android:textStyle=&quot;bold&quot;\r\n            app:layout_constraintBottom_toBottomOf=&quot;@+id/imageView_service&quot;\r\n            app:layout_constraintStart_toEndOf=&quot;@+id/imageView_service&quot;\r\n            app:layout_constraintTop_toTopOf=&quot;@+id/imageView_service&quot; /&gt;\r\n\r\n\r\n    &lt;TextView\r\n            android:id=&quot;@+id/textView_service_status&quot;\r\n            android:layout_width=&quot;wrap_content&quot;\r\n            android:layout_height=&quot;wrap_content&quot;\r\n            android:layout_marginStart=&quot;8dp&quot;\r\n            android:layout_marginEnd=&quot;8dp&quot;\r\n            android:layout_marginBottom=&quot;8dp&quot;\r\n            android:text=&quot;Status&quot;\r\n            android:textColor=&quot;@android:color/black&quot;\r\n            android:textSize=&quot;16sp&quot;\r\n            android:textStyle=&quot;bold&quot;\r\n            app:layout_constraintBottom_toBottomOf=&quot;@+id/imageView_service&quot;\r\n            app:layout_constraintEnd_toEndOf=&quot;parent&quot;\r\n            app:layout_constraintStart_toEndOf=&quot;@+id/textView_service_name&quot;\r\n            app:layout_constraintTop_toTopOf=&quot;@+id/imageView_service&quot; /&gt;\r\n\r\n&lt;/android.support.constraint.ConstraintLayout&gt;\r\n```\r\n\r\n**build.gradle (app)**\r\n```\r\napply plugin: &#39;com.android.application&#39;\r\n\r\napply plugin: &#39;kotlin-android&#39;\r\n\r\napply plugin: &#39;kotlin-android-extensions&#39;\r\n\r\nandroid {\r\n    compileSdkVersion 28\r\n    defaultConfig {\r\n        applicationId &quot;com.dmelton.test&quot;\r\n        minSdkVersion 19\r\n        targetSdkVersion 28\r\n        versionCode 1\r\n        versionName &quot;1.0&quot;\r\n        testInstrumentationRunner &quot;android.support.test.runner.AndroidJUnitRunner&quot;\r\n    }\r\n    buildTypes {\r\n        release {\r\n            minifyEnabled false\r\n            proguardFiles getDefaultProguardFile(&#39;proguard-android-optimize.txt&#39;), &#39;proguard-rules.pro&#39;\r\n        }\r\n    }\r\n}\r\n\r\ndependencies {\r\n    implementation fileTree(dir: &#39;libs&#39;, include: [&#39;*.jar&#39;])\r\n    implementation&quot;org.jetbrains.kotlin:kotlin-stdlib-jdk7:$kotlin_version&quot;\r\n    implementation &#39;com.android.support:appcompat-v7:28.0.0&#39;\r\n    implementation &#39;com.android.support.constraint:constraint-layout:1.1.3&#39;\r\n    implementation &#39;com.xwray:groupie:2.1.0&#39;\r\n    testImplementation &#39;junit:junit:4.12&#39;\r\n    androidTestImplementation &#39;com.android.support.test:runner:1.0.2&#39;\r\n    androidTestImplementation &#39;com.android.support.test.espresso:espresso-core:3.0.2&#39;\r\n    implementation &#39;com.android.support:recyclerview-v7:28.0.0&#39;\r\n}\r\n```","title":"RecyclerView not Visible with Groupie (Kotlin)","body":"<p>I'm trying to use the Groupie library (version 2.1.0) for my RecylerView. In my original app, the view would not be visible at all. I decided to make a dummy app to resolve my issue, and I just cannot get the view to be visible. I feel the solution may be simple since this library is simple to use.</p>\n\n<p><strong>MainActivity.kt:</strong></p>\n\n<pre><code>package com.dmelton.test\n\nimport android.support.v7.app.AppCompatActivity\nimport android.os.Bundle\nimport com.xwray.groupie.GroupAdapter\nimport com.xwray.groupie.Item\nimport com.xwray.groupie.ViewHolder\nimport kotlinx.android.synthetic.main.activity_main.*\n\nclass MainActivity : AppCompatActivity() {\n\n    override fun onCreate(savedInstanceState: Bundle?) {\n        super.onCreate(savedInstanceState)\n        setContentView(R.layout.activity_main)\n\n        val adapter = GroupAdapter&lt;ViewHolder&gt;()\n\n        adapter.add(Test())\n        adapter.add(Test())\n        adapter.add(Test())\n\n        new_recyclerView.adapter = adapter\n    }\n}\n\nclass Test: Item&lt;ViewHolder&gt;() {\n\n    override fun bind(viewHolder: ViewHolder, position: Int) {\n        TODO(\"not implemented\") //To change body of created functions use File | Settings | File Templates.\n    }\n\n    override fun getLayout(): Int {\n        return R.layout.individual_service\n    }\n\n}\n</code></pre>\n\n<p><strong>activity_main.xml:</strong></p>\n\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;android.support.constraint.ConstraintLayout\n        xmlns:android=\"http://schemas.android.com/apk/res/android\"\n        xmlns:tools=\"http://schemas.android.com/tools\"\n        xmlns:app=\"http://schemas.android.com/apk/res-auto\"\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"match_parent\"\n        tools:context=\".MainActivity\"&gt;\n\n\n    &lt;android.support.v7.widget.RecyclerView\n            android:layout_width=\"395dp\"\n            android:layout_height=\"715dp\"\n            app:layout_constraintBottom_toBottomOf=\"parent\"\n            app:layout_constraintTop_toTopOf=\"parent\"\n            app:layout_constraintStart_toStartOf=\"parent\"\n            app:layout_constraintEnd_toEndOf=\"parent\" android:id=\"@+id/new_recyclerView\"/&gt;\n&lt;/android.support.constraint.ConstraintLayout&gt;\n</code></pre>\n\n<p><strong>individual_service.xml:</strong></p>\n\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;android.support.constraint.ConstraintLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\n                                             android:layout_width=\"match_parent\"\n                                             android:layout_height=\"wrap_content\"\n                                             xmlns:app=\"http://schemas.android.com/apk/res-auto\"&gt;\n\n    &lt;ImageView\n            android:id=\"@+id/imageView_service\"\n            android:layout_width=\"60dp\"\n            android:layout_height=\"60dp\"\n            android:layout_marginStart=\"16dp\"\n            android:layout_marginTop=\"8dp\"\n            android:layout_marginBottom=\"8dp\"\n            android:background=\"@android:color/holo_blue_dark\"\n            app:layout_constraintBottom_toBottomOf=\"parent\"\n            app:layout_constraintStart_toStartOf=\"parent\"\n            app:layout_constraintTop_toTopOf=\"parent\"\n            app:srcCompat=\"@android:drawable/ic_menu_preferences\" /&gt;\n\n    &lt;TextView\n            android:id=\"@+id/textView_service_name\"\n            android:layout_width=\"0dp\"\n            android:layout_height=\"wrap_content\"\n            android:layout_marginStart=\"16dp\"\n            android:layout_marginBottom=\"8dp\"\n            android:text=\"Service Name\"\n            android:textColor=\"@android:color/black\"\n            android:textSize=\"16sp\"\n            android:textStyle=\"bold\"\n            app:layout_constraintBottom_toBottomOf=\"@+id/imageView_service\"\n            app:layout_constraintStart_toEndOf=\"@+id/imageView_service\"\n            app:layout_constraintTop_toTopOf=\"@+id/imageView_service\" /&gt;\n\n\n    &lt;TextView\n            android:id=\"@+id/textView_service_status\"\n            android:layout_width=\"wrap_content\"\n            android:layout_height=\"wrap_content\"\n            android:layout_marginStart=\"8dp\"\n            android:layout_marginEnd=\"8dp\"\n            android:layout_marginBottom=\"8dp\"\n            android:text=\"Status\"\n            android:textColor=\"@android:color/black\"\n            android:textSize=\"16sp\"\n            android:textStyle=\"bold\"\n            app:layout_constraintBottom_toBottomOf=\"@+id/imageView_service\"\n            app:layout_constraintEnd_toEndOf=\"parent\"\n            app:layout_constraintStart_toEndOf=\"@+id/textView_service_name\"\n            app:layout_constraintTop_toTopOf=\"@+id/imageView_service\" /&gt;\n\n&lt;/android.support.constraint.ConstraintLayout&gt;\n</code></pre>\n\n<p><strong>build.gradle (app)</strong></p>\n\n<pre><code>apply plugin: 'com.android.application'\n\napply plugin: 'kotlin-android'\n\napply plugin: 'kotlin-android-extensions'\n\nandroid {\n    compileSdkVersion 28\n    defaultConfig {\n        applicationId \"com.dmelton.test\"\n        minSdkVersion 19\n        targetSdkVersion 28\n        versionCode 1\n        versionName \"1.0\"\n        testInstrumentationRunner \"android.support.test.runner.AndroidJUnitRunner\"\n    }\n    buildTypes {\n        release {\n            minifyEnabled false\n            proguardFiles getDefaultProguardFile('proguard-android-optimize.txt'), 'proguard-rules.pro'\n        }\n    }\n}\n\ndependencies {\n    implementation fileTree(dir: 'libs', include: ['*.jar'])\n    implementation\"org.jetbrains.kotlin:kotlin-stdlib-jdk7:$kotlin_version\"\n    implementation 'com.android.support:appcompat-v7:28.0.0'\n    implementation 'com.android.support.constraint:constraint-layout:1.1.3'\n    implementation 'com.xwray:groupie:2.1.0'\n    testImplementation 'junit:junit:4.12'\n    androidTestImplementation 'com.android.support.test:runner:1.0.2'\n    androidTestImplementation 'com.android.support.test.espresso:espresso-core:3.0.2'\n    implementation 'com.android.support:recyclerview-v7:28.0.0'\n}\n</code></pre>\n"},{"tags":["java","generics","lambda","anonymous-function","anonymous-methods"],"comments":[{"owner":{"account_id":2709823,"reputation":10716,"user_id":2338547,"display_name":"markspace"},"score":1,"creation_date":1699918893,"post_id":77477388,"comment_id":136588926,"body_markdown":"What exactly is the error here?  What error message do you get, on what line?  Or what undesired behavior do you see?","body":"What exactly is the error here?  What error message do you get, on what line?  Or what undesired behavior do you see?"},{"owner":{"account_id":8532578,"reputation":39898,"user_id":6395627,"display_name":"Slaw"},"score":5,"creation_date":1699919208,"post_id":77477388,"comment_id":136588950,"body_markdown":"`T` has to be defined in context; it can&#39;t just come from nowhere. Something like this is typically implemented via a static _method_. E.g., `public static &lt;T&gt; BiPredicate&lt;T, T&gt; equality() { return Objects::equals; }`.","body":"<code>T</code> has to be defined in context; it can&#39;t just come from nowhere. Something like this is typically implemented via a static <i>method</i>. E.g., <code>public static &lt;T&gt; BiPredicate&lt;T, T&gt; equality() { return Objects::equals; }</code>."},{"owner":{"account_id":465573,"reputation":192684,"user_id":869736,"accept_rate":82,"display_name":"Louis Wasserman"},"score":0,"creation_date":1699921314,"post_id":77477388,"comment_id":136589090,"body_markdown":"Your problem is that you need to use functions, not constants.  (There&#39;s not even any benefit to be gained from using constants.)","body":"Your problem is that you need to use functions, not constants.  (There&#39;s not even any benefit to be gained from using constants.)"},{"owner":{"account_id":2073393,"reputation":2457,"user_id":1847378,"display_name":"AndrewL"},"score":0,"creation_date":1699921609,"post_id":77477388,"comment_id":136589118,"body_markdown":"Consider using Kotlin just for this part of your development?  Kotlin compiles to Java byte code and treats functions (like the predicates you want) as first class citizens making your use case very easy.  A reference: https://typealias.com/concepts/first-class-function/","body":"Consider using Kotlin just for this part of your development?  Kotlin compiles to Java byte code and treats functions (like the predicates you want) as first class citizens making your use case very easy.  A reference: <a href=\"https://typealias.com/concepts/first-class-function/\" rel=\"nofollow noreferrer\">typealias.com/concepts/first-class-function</a>"},{"owner":{"account_id":2182934,"reputation":2525,"user_id":1932011,"accept_rate":71,"display_name":"JayC667"},"score":0,"creation_date":1699923690,"post_id":77477388,"comment_id":136589299,"body_markdown":"@Slaw Hell yeah, that&#39;s it! Is a lot more beautiful than my attempts. And now I realize that the method returns a static reference to a static method, so it does not have to allocate/instantiate anything more. Really beautiful. Thanx. If you formulate that as an answer, I&#39;ll accept it.","body":"@Slaw Hell yeah, that&#39;s it! Is a lot more beautiful than my attempts. And now I realize that the method returns a static reference to a static method, so it does not have to allocate/instantiate anything more. Really beautiful. Thanx. If you formulate that as an answer, I&#39;ll accept it."},{"owner":{"account_id":2182934,"reputation":2525,"user_id":1932011,"accept_rate":71,"display_name":"JayC667"},"score":0,"creation_date":1699924001,"post_id":77477388,"comment_id":136589327,"body_markdown":"@Slaw Oh btw: is there any &#39;method reference&#39; for `==` (smilar to `Objects::equals`)? Or do I have to write that out as labmda function: `static public final &lt;T&gt; BiPredicate&lt;T, T&gt; IDENTITY() { return (p, q) -&gt; p == q;\t}`?","body":"@Slaw Oh btw: is there any &#39;method reference&#39; for <code>==</code> (smilar to <code>Objects::equals</code>)? Or do I have to write that out as labmda function: <code>static public final &lt;T&gt; BiPredicate&lt;T, T&gt; IDENTITY() { return (p, q) -&gt; p == q;\t}</code>?"},{"owner":{"account_id":8532578,"reputation":39898,"user_id":6395627,"display_name":"Slaw"},"score":1,"creation_date":1699925429,"post_id":77477388,"comment_id":136589446,"body_markdown":"I&#39;m not aware of a method like `Object::equals` but for `==`. However, that lambda is stateless, so I wouldn&#39;t be surprised if the JVM ends up caching a single instance.","body":"I&#39;m not aware of a method like <code>Object::equals</code> but for <code>==</code>. However, that lambda is stateless, so I wouldn&#39;t be surprised if the JVM ends up caching a single instance."}],"answers":[{"tags":[],"owner":{"account_id":8532578,"reputation":39898,"user_id":6395627,"display_name":"Slaw"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1699925757,"creation_date":1699924967,"answer_id":77477700,"question_id":77477388,"body_markdown":"If you need to parameterize the `BiPredicate`s with a type variable, then you won&#39;t be able to do this via static _fields_, because the type variable has to be defined in scope. Something like this is typically implemented via static _methods_. \r\n\r\n```java\r\npackage stackoverflow.genericlambdas;\r\n\r\nimport java.util.Objects;\r\nimport java.util.function.BiPredicate;\r\n\r\npublic class Library {\r\n\r\n    public static &lt;T&gt; BiPredicate&lt;T, T&gt; identity() {\r\n        return (a, b) -&gt; a == b;\r\n    }\r\n\r\n    public static &lt;T&gt; BiPredicate&lt;T, T&gt; equals()\r\n        return Objects::equals;\r\n    }\r\n}\r\n```\r\n\r\nIf you don&#39;t need the type variable then see [Sweeper&#39;s answer][1].\r\n\r\n\r\n\r\n  [1]: https://stackoverflow.com/a/77477712/6395627","title":"Elegant solution to the &quot;Lambdas&quot; vs &quot;Generics&quot; problem?","body":"<p>If you need to parameterize the <code>BiPredicate</code>s with a type variable, then you won't be able to do this via static <em>fields</em>, because the type variable has to be defined in scope. Something like this is typically implemented via static <em>methods</em>.</p>\n<pre class=\"lang-java prettyprint-override\"><code>package stackoverflow.genericlambdas;\n\nimport java.util.Objects;\nimport java.util.function.BiPredicate;\n\npublic class Library {\n\n    public static &lt;T&gt; BiPredicate&lt;T, T&gt; identity() {\n        return (a, b) -&gt; a == b;\n    }\n\n    public static &lt;T&gt; BiPredicate&lt;T, T&gt; equals()\n        return Objects::equals;\n    }\n}\n</code></pre>\n<p>If you don't need the type variable then see <a href=\"https://stackoverflow.com/a/77477712/6395627\">Sweeper's answer</a>.</p>\n"},{"tags":[],"owner":{"account_id":6651855,"reputation":224820,"user_id":5133585,"accept_rate":96,"display_name":"Sweeper"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1699925376,"creation_date":1699925376,"answer_id":77477712,"question_id":77477388,"body_markdown":"`IDENTITY` and `EQUALITY` don&#39;t actually need to have generic type parameters if you apply [PECS][1].\r\n\r\nIf you declare them like this:\r\n\r\n    public static final BiPredicate&lt;? super Object, ? super Object&gt; IDENTITY = (p, q) -&gt; p == q;\r\n    public static final BiPredicate&lt;? super Object, ? super Object&gt; EQUALITY = Objects::equals;\r\n\r\nNote that you should use `super` here because the two type parameters of `BiPredicate` represent the types that it &quot;consumes&quot;.\r\n\r\nThen do the same thing to `getFirstIndexOf`:\r\n\r\n    public int getFirstIndexOf(final BiPredicate&lt;? super T, ? super T&gt; pIdentifier, final T pItem) {\r\n\r\nNow you can simply pass `IDENTITY` and `EQUALITY` to `getFirstIndexOf` without any error:\r\n\r\n    list.getFirstIndexOf(IDENTITY, &quot;foo&quot;);\r\n\r\nOf course, if you don&#39;t have control over `getFirstIndex`, then you cannot do this, and would need to declare a method that returns a `BiPredicate` like in Slaw&#39;s answer. \r\n\r\n    public static &lt;T&gt; BiPredicate&lt;T, T&gt; identity() {\r\n        return (p, q) -&gt; p == q;\r\n    }\r\n\r\nNote that the JLS doesn&#39;t guarantee that no new objects are created when you call a method like that, but in reality it&#39;s often optimised to not create new objects.\r\n\r\n\r\n  [1]: https://stackoverflow.com/q/2723397/5133585","title":"Elegant solution to the &quot;Lambdas&quot; vs &quot;Generics&quot; problem?","body":"<p><code>IDENTITY</code> and <code>EQUALITY</code> don't actually need to have generic type parameters if you apply <a href=\"https://stackoverflow.com/q/2723397/5133585\">PECS</a>.</p>\n<p>If you declare them like this:</p>\n<pre><code>public static final BiPredicate&lt;? super Object, ? super Object&gt; IDENTITY = (p, q) -&gt; p == q;\npublic static final BiPredicate&lt;? super Object, ? super Object&gt; EQUALITY = Objects::equals;\n</code></pre>\n<p>Note that you should use <code>super</code> here because the two type parameters of <code>BiPredicate</code> represent the types that it &quot;consumes&quot;.</p>\n<p>Then do the same thing to <code>getFirstIndexOf</code>:</p>\n<pre><code>public int getFirstIndexOf(final BiPredicate&lt;? super T, ? super T&gt; pIdentifier, final T pItem) {\n</code></pre>\n<p>Now you can simply pass <code>IDENTITY</code> and <code>EQUALITY</code> to <code>getFirstIndexOf</code> without any error:</p>\n<pre><code>list.getFirstIndexOf(IDENTITY, &quot;foo&quot;);\n</code></pre>\n<p>Of course, if you don't have control over <code>getFirstIndex</code>, then you cannot do this, and would need to declare a method that returns a <code>BiPredicate</code> like in Slaw's answer.</p>\n<pre><code>public static &lt;T&gt; BiPredicate&lt;T, T&gt; identity() {\n    return (p, q) -&gt; p == q;\n}\n</code></pre>\n<p>Note that the JLS doesn't guarantee that no new objects are created when you call a method like that, but in reality it's often optimised to not create new objects.</p>\n"}],"owner":{"account_id":2182934,"reputation":2525,"user_id":1932011,"accept_rate":71,"display_name":"JayC667"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":82,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":77477700,"answer_count":2,"score":1,"last_activity_date":1699925757,"creation_date":1699917767,"question_id":77477388,"body_markdown":"I am looking for a prettier solution here. The problem is to combine Generics and Lambda Expressions.\r\n\r\nAccording to the [Java Language Specification][1] this it not possible the way I want.\r\n\r\nSo my question to you: Do you know a more elegant way to handle that problem? Any suggestions or common practice out there?\r\n\r\nMy &quot;List&quot; class, where I need the `BiPredicate&lt;T, T&gt;` in a lot of functions:\r\n\r\n    package stackoverflow.genericlambdas;\r\n    \r\n    import java.util.ArrayList;\r\n    import java.util.function.BiPredicate;\r\n    \r\n    public class MyListImpl&lt;T&gt; {\r\n    \r\n    \tprivate final ArrayList&lt;T&gt; mItems = new ArrayList&lt;&gt;();\r\n    \r\n    \r\n    \tpublic void addItem(final T pItem) {\r\n    \t\tmItems.add(pItem);\r\n    \t}\r\n    \r\n    \t// assume my library is full of such methods\r\n    \tpublic int getFirstIndexOf(final BiPredicate&lt;T, T&gt; pIdentifier, final T pItem) {\r\n    \t\tfor (int i = 0; i &lt; mItems.size(); i++) {\r\n    \t\t\tfinal T t = mItems.get(i);\r\n    \t\t\tif (pIdentifier.test(t, pItem)) return i;\r\n    \t\t}\r\n    \t\treturn -1; // not found\r\n    \t}\r\n    \r\n    }\r\n\r\nMy &quot;Library&quot; class, where I want to store template `BiPredicate&lt;T, T&gt;`s:\r\n\r\n    package stackoverflow.genericlambdas;\r\n    \r\n    import java.util.Objects;\r\n    import java.util.function.BiPredicate;\r\n    \r\n    public class Library {\r\n    \r\n    \r\n    \tstatic public class CLUMSY_IDENTITY_CLASS&lt;T&gt; implements BiPredicate&lt;T, T&gt; {\r\n    \t\t@Override public boolean test(final T p, final T q) {\r\n    \t\t\treturn p == q;\r\n    \t\t}\r\n    \t}\r\n    \tstatic public class CLUMSY_EQUALITY_CLASS&lt;T&gt; implements BiPredicate&lt;T, T&gt; {\r\n    \t\t@Override public boolean test(final T p, final T q) {\r\n    \t\t\treturn Objects.equals(p, q);\r\n    \t\t}\r\n    \t}\r\n    \r\n    \r\n    \tstatic public final BiPredicate&lt;T, T&gt;\tIDENTITY\t= (p, q) -&gt; p == q;\t\t\t\t\t// compilation error\r\n    \tstatic public final BiPredicate&lt;T, T&gt;\tEQUALITY\t= (p, q) -&gt; Objects.equals(p, q);\t// compilation error\r\n    \r\n    \r\n    }\r\n\r\nMy &quot;usage&quot; class, where I want to use those templates:\r\n\r\n    package stackoverflow.genericlambdas;\r\n    \r\n    import java.util.Objects;\r\n    \r\n    public class GenericLamdasUse {\r\n    \r\n    \tpublic static void main(final String[] args) {\r\n    \t\tfinal MyListImpl&lt;String&gt; list = new MyListImpl&lt;&gt;();\r\n    \t\tlist.addItem(&quot;aa&quot;);\r\n    \t\tlist.addItem(&quot;bb&quot;);\r\n    \t\tlist.addItem(&quot;cc&quot;);\r\n    \r\n    \t\tfinal String testItem = &quot;cc&quot;;\r\n    \t\tfinal String testItem2 = &quot;c&quot; + (Math.random() &lt; 2 /* always true */ ? &quot;c&quot; : &quot;&quot;); // this builds a new string that is not == the compile constant String &quot;cc&quot;\r\n    \r\n    \t\tfinal int whatIKnowWorks1 = list.getFirstIndexOf((p, q) -&gt; Objects.equals(p, q), testItem);\r\n    \t\tfinal int whatIKnowWorks2 = list.getFirstIndexOf((p, q) -&gt; p == q, testItem);\r\n    \r\n    \t\tfinal int whatIKnowWorks3 = list.getFirstIndexOf(new Library.CLUMSY_IDENTITY_CLASS&lt;&gt;(), testItem); // dont&#39;t want the re-instantiation\r\n    \t\tfinal int whatIKnowWorks4 = list.getFirstIndexOf(new Library.CLUMSY_EQUALITY_CLASS&lt;&gt;(), testItem); // for ever time i would need that\r\n    \r\n    \t\tfinal Library.CLUMSY_IDENTITY_CLASS&lt;String&gt; clumsy5 = new Library.CLUMSY_IDENTITY_CLASS&lt;&gt;(); // dont&#39;t want the re-instantiation\r\n    \t\tfinal Library.CLUMSY_EQUALITY_CLASS&lt;String&gt; clumsy6 = new Library.CLUMSY_EQUALITY_CLASS&lt;&gt;();\r\n    \t\tfinal int whatIKnowWorks5 = list.getFirstIndexOf(clumsy5, testItem); // for ever time i would need that\r\n    \t\tfinal int whatIKnowWorks6 = list.getFirstIndexOf(clumsy6, testItem); // also, the types &lt;String&gt; have to match each time\r\n    \r\n    \t\tfinal int whatIWant1 = list.getFirstIndexOf(Library.EQUALITY, testItem); // I want this, but: compilation error\r\n    \t\tfinal int whatIWant2 = list.getFirstIndexOf(Library.IDENTITY, testItem); // I want this, but: compilation error\r\n    \t}\r\n    \r\n    }\r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/specs/jls/se8/html/jls-15.html","title":"Elegant solution to the &quot;Lambdas&quot; vs &quot;Generics&quot; problem?","body":"<p>I am looking for a prettier solution here. The problem is to combine Generics and Lambda Expressions.</p>\n<p>According to the <a href=\"https://docs.oracle.com/javase/specs/jls/se8/html/jls-15.html\" rel=\"nofollow noreferrer\">Java Language Specification</a> this it not possible the way I want.</p>\n<p>So my question to you: Do you know a more elegant way to handle that problem? Any suggestions or common practice out there?</p>\n<p>My &quot;List&quot; class, where I need the <code>BiPredicate&lt;T, T&gt;</code> in a lot of functions:</p>\n<pre><code>package stackoverflow.genericlambdas;\n\nimport java.util.ArrayList;\nimport java.util.function.BiPredicate;\n\npublic class MyListImpl&lt;T&gt; {\n\n    private final ArrayList&lt;T&gt; mItems = new ArrayList&lt;&gt;();\n\n\n    public void addItem(final T pItem) {\n        mItems.add(pItem);\n    }\n\n    // assume my library is full of such methods\n    public int getFirstIndexOf(final BiPredicate&lt;T, T&gt; pIdentifier, final T pItem) {\n        for (int i = 0; i &lt; mItems.size(); i++) {\n            final T t = mItems.get(i);\n            if (pIdentifier.test(t, pItem)) return i;\n        }\n        return -1; // not found\n    }\n\n}\n</code></pre>\n<p>My &quot;Library&quot; class, where I want to store template <code>BiPredicate&lt;T, T&gt;</code>s:</p>\n<pre><code>package stackoverflow.genericlambdas;\n\nimport java.util.Objects;\nimport java.util.function.BiPredicate;\n\npublic class Library {\n\n\n    static public class CLUMSY_IDENTITY_CLASS&lt;T&gt; implements BiPredicate&lt;T, T&gt; {\n        @Override public boolean test(final T p, final T q) {\n            return p == q;\n        }\n    }\n    static public class CLUMSY_EQUALITY_CLASS&lt;T&gt; implements BiPredicate&lt;T, T&gt; {\n        @Override public boolean test(final T p, final T q) {\n            return Objects.equals(p, q);\n        }\n    }\n\n\n    static public final BiPredicate&lt;T, T&gt;   IDENTITY    = (p, q) -&gt; p == q;                 // compilation error\n    static public final BiPredicate&lt;T, T&gt;   EQUALITY    = (p, q) -&gt; Objects.equals(p, q);   // compilation error\n\n\n}\n</code></pre>\n<p>My &quot;usage&quot; class, where I want to use those templates:</p>\n<pre><code>package stackoverflow.genericlambdas;\n\nimport java.util.Objects;\n\npublic class GenericLamdasUse {\n\n    public static void main(final String[] args) {\n        final MyListImpl&lt;String&gt; list = new MyListImpl&lt;&gt;();\n        list.addItem(&quot;aa&quot;);\n        list.addItem(&quot;bb&quot;);\n        list.addItem(&quot;cc&quot;);\n\n        final String testItem = &quot;cc&quot;;\n        final String testItem2 = &quot;c&quot; + (Math.random() &lt; 2 /* always true */ ? &quot;c&quot; : &quot;&quot;); // this builds a new string that is not == the compile constant String &quot;cc&quot;\n\n        final int whatIKnowWorks1 = list.getFirstIndexOf((p, q) -&gt; Objects.equals(p, q), testItem);\n        final int whatIKnowWorks2 = list.getFirstIndexOf((p, q) -&gt; p == q, testItem);\n\n        final int whatIKnowWorks3 = list.getFirstIndexOf(new Library.CLUMSY_IDENTITY_CLASS&lt;&gt;(), testItem); // dont't want the re-instantiation\n        final int whatIKnowWorks4 = list.getFirstIndexOf(new Library.CLUMSY_EQUALITY_CLASS&lt;&gt;(), testItem); // for ever time i would need that\n\n        final Library.CLUMSY_IDENTITY_CLASS&lt;String&gt; clumsy5 = new Library.CLUMSY_IDENTITY_CLASS&lt;&gt;(); // dont't want the re-instantiation\n        final Library.CLUMSY_EQUALITY_CLASS&lt;String&gt; clumsy6 = new Library.CLUMSY_EQUALITY_CLASS&lt;&gt;();\n        final int whatIKnowWorks5 = list.getFirstIndexOf(clumsy5, testItem); // for ever time i would need that\n        final int whatIKnowWorks6 = list.getFirstIndexOf(clumsy6, testItem); // also, the types &lt;String&gt; have to match each time\n\n        final int whatIWant1 = list.getFirstIndexOf(Library.EQUALITY, testItem); // I want this, but: compilation error\n        final int whatIWant2 = list.getFirstIndexOf(Library.IDENTITY, testItem); // I want this, but: compilation error\n    }\n\n}\n</code></pre>\n"},{"tags":["java","android","android-progressbar"],"comments":[{"owner":{"account_id":12292022,"reputation":849,"user_id":8968956,"display_name":"trinadh thatakula"},"score":0,"creation_date":1656136520,"post_id":72751534,"comment_id":128502483,"body_markdown":"you can change interpolator to ease-in or slow-in slow out or something else\nit won&#39;t change speed but will make it look better in many ways","body":"you can change interpolator to ease-in or slow-in slow out or something else it won&#39;t change speed but will make it look better in many ways"},{"owner":{"account_id":11416432,"reputation":578,"user_id":8369150,"display_name":"Halil Sahin"},"score":0,"creation_date":1656141053,"post_id":72751534,"comment_id":128503099,"body_markdown":"Can you share your .xml file please?","body":"Can you share your .xml file please?"},{"owner":{"account_id":25560718,"reputation":830,"user_id":19343390,"display_name":"Anonymous"},"score":0,"creation_date":1656144997,"post_id":72751534,"comment_id":128503682,"body_markdown":"@HalilSahin I have edited the question to include the xml code now","body":"@HalilSahin I have edited the question to include the xml code now"},{"owner":{"account_id":19628996,"reputation":61,"user_id":14367737,"display_name":"Sajid Ali"},"score":0,"creation_date":1656146137,"post_id":72751534,"comment_id":128503875,"body_markdown":"Please visit this docs https://developer.android.com/reference/android/widget/ProgressBar#indeterminateDuration","body":"Please visit this docs <a href=\"https://developer.android.com/reference/android/widget/ProgressBar#indeterminateDuration\" rel=\"nofollow noreferrer\">developer.android.com/reference/android/widget/&hellip;</a>"}],"answers":[{"tags":[],"owner":{"account_id":11416432,"reputation":578,"user_id":8369150,"display_name":"Halil Sahin"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1699924696,"creation_date":1656146282,"answer_id":72752429,"question_id":72751534,"body_markdown":"Add a .xml file under /drawable path, like: `drawable/circular_spinner.xml`\r\ncircular_spinner:\r\n\r\n```xml\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n&lt;rotate xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n    android:drawable=&quot;@drawable/spinner&quot;\r\n    android:interpolator=&quot;@android:anim/linear_interpolator&quot;\r\n    android:fromDegrees=&quot;0&quot;\r\n    android:pivotX=&quot;50%&quot;\r\n    android:pivotY=&quot;50%&quot;\r\n    android:repeatCount=&quot;infinite&quot;\r\n    android:toDegrees=&quot;3600&quot;\r\n    android:duration=&quot;1000&quot;/&gt;\r\n```\r\n\r\nChange the `toDegrees` and `duration` to control the speed of the spinning. Then call it in your `progressbar` layout.\r\n\r\n```xml\r\n&lt;ProgressBar\r\n        android:id=&quot;@+id/progressBar&quot;\r\n        style=&quot;@style/Widget.AppCompat.ProgressBar&quot;\r\n        android:layout_width=&quot;409dp&quot;\r\n        android:layout_height=&quot;710dp&quot;\r\n        android:indeterminate=&quot;false&quot;\r\n        android:padding=&quot;36dp&quot;\r\n        app:layout_constraintBottom_toBottomOf=&quot;parent&quot;\r\n        app:layout_constraintEnd_toEndOf=&quot;parent&quot;\r\n        app:layout_constraintStart_toStartOf=&quot;parent&quot;\r\n        android:indeterminateDrawable=&quot;@drawable/circular_spinner&quot;\r\n        app:layout_constraintTop_toTopOf=&quot;parent&quot;/&gt;\r\n```\r\n\r\n","title":"How to change the speed of ProgressBar in Android using Java?","body":"<p>Add a .xml file under /drawable path, like: <code>drawable/circular_spinner.xml</code>\ncircular_spinner:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n&lt;rotate xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n    android:drawable=&quot;@drawable/spinner&quot;\n    android:interpolator=&quot;@android:anim/linear_interpolator&quot;\n    android:fromDegrees=&quot;0&quot;\n    android:pivotX=&quot;50%&quot;\n    android:pivotY=&quot;50%&quot;\n    android:repeatCount=&quot;infinite&quot;\n    android:toDegrees=&quot;3600&quot;\n    android:duration=&quot;1000&quot;/&gt;\n</code></pre>\n<p>Change the <code>toDegrees</code> and <code>duration</code> to control the speed of the spinning. Then call it in your <code>progressbar</code> layout.</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;ProgressBar\n        android:id=&quot;@+id/progressBar&quot;\n        style=&quot;@style/Widget.AppCompat.ProgressBar&quot;\n        android:layout_width=&quot;409dp&quot;\n        android:layout_height=&quot;710dp&quot;\n        android:indeterminate=&quot;false&quot;\n        android:padding=&quot;36dp&quot;\n        app:layout_constraintBottom_toBottomOf=&quot;parent&quot;\n        app:layout_constraintEnd_toEndOf=&quot;parent&quot;\n        app:layout_constraintStart_toStartOf=&quot;parent&quot;\n        android:indeterminateDrawable=&quot;@drawable/circular_spinner&quot;\n        app:layout_constraintTop_toTopOf=&quot;parent&quot;/&gt;\n</code></pre>\n"}],"owner":{"account_id":25560718,"reputation":830,"user_id":19343390,"display_name":"Anonymous"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":579,"favorite_count":0,"down_vote_count":1,"up_vote_count":2,"answer_count":1,"score":1,"last_activity_date":1699924696,"creation_date":1656135740,"question_id":72751534,"body_markdown":"I have a **ProgressBar** (the round shape one) and it spins very fast, how do I change it to spin at a slower speed?\r\n\r\n(It is running indefinitely)\r\n\r\n---\r\nHere is my XML of ProgressBar:\r\n\r\n```xml\r\n&lt;ProgressBar\r\n        android:id=&quot;@+id/progressBar&quot;\r\n        style=&quot;@style/Widget.AppCompat.ProgressBar&quot;\r\n        android:layout_width=&quot;409dp&quot;\r\n        android:layout_height=&quot;710dp&quot;\r\n        android:indeterminate=&quot;false&quot;\r\n        android:padding=&quot;36dp&quot;\r\n        app:layout_constraintBottom_toBottomOf=&quot;parent&quot;\r\n        app:layout_constraintEnd_toEndOf=&quot;parent&quot;\r\n        app:layout_constraintStart_toStartOf=&quot;parent&quot;\r\n        app:layout_constraintTop_toTopOf=&quot;parent&quot; /&gt;\r\n```","title":"How to change the speed of ProgressBar in Android using Java?","body":"<p>I have a <strong>ProgressBar</strong> (the round shape one) and it spins very fast, how do I change it to spin at a slower speed?</p>\n<p>(It is running indefinitely)</p>\n<hr />\n<p>Here is my XML of ProgressBar:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;ProgressBar\n        android:id=&quot;@+id/progressBar&quot;\n        style=&quot;@style/Widget.AppCompat.ProgressBar&quot;\n        android:layout_width=&quot;409dp&quot;\n        android:layout_height=&quot;710dp&quot;\n        android:indeterminate=&quot;false&quot;\n        android:padding=&quot;36dp&quot;\n        app:layout_constraintBottom_toBottomOf=&quot;parent&quot;\n        app:layout_constraintEnd_toEndOf=&quot;parent&quot;\n        app:layout_constraintStart_toStartOf=&quot;parent&quot;\n        app:layout_constraintTop_toTopOf=&quot;parent&quot; /&gt;\n</code></pre>\n"},{"tags":["java","opencv","mat"],"comments":[{"owner":{"account_id":2780567,"reputation":19695,"user_id":2393191,"accept_rate":83,"display_name":"Micka"},"score":2,"creation_date":1491211296,"post_id":43180053,"comment_id":73434493,"body_markdown":"which programming language?","body":"which programming language?"}],"answers":[{"tags":[],"owner":{"account_id":2960941,"reputation":147573,"user_id":4238408,"display_name":"Quang Hoang"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1491210228,"creation_date":1491210228,"answer_id":43180532,"question_id":43180053,"body_markdown":"Next, you can do:\r\n\r\n    cv::Mat newMat(i,j,CV_32F,data);","title":"Initialize the values into Mat object in OpenCV","body":"<p>Next, you can do:</p>\n\n<pre><code>cv::Mat newMat(i,j,CV_32F,data);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":10001154,"reputation":1386,"user_id":7397065,"display_name":"Jurjen"},"down_vote_count":0,"up_vote_count":28,"is_accepted":true,"score":28,"last_activity_date":1604297893,"creation_date":1491210274,"answer_id":43180550,"question_id":43180053,"body_markdown":"Your question is not entirely clear to me, but I&#39;m going to assume you are trying to load a `float array` into a OpenCV `Mat` object in a single row. First of all, be sure to check the documentation on constructing a `Mat` in `C++`. Since you have a 1D array and (I assume) you know the `rows` and `columns` you want to give your `Mat`, you should use [this constructor][1]:\r\n\r\n    cv::Mat::Mat (int rows, int cols, int type,\tvoid * data, size_t step = AUTO_STEP) \t\r\n\r\nHere&#39;s a code example:\r\n\r\n    float data[10] = { 1, 2, 3, 4, 5, 6, 7, 8, 9, 10 };\r\n    cv::Mat your_matrix = cv::Mat(1, 10, CV_32F, data);\r\n    \r\n    cout &lt;&lt; your_matrix.at&lt;float&gt;(0,2) &lt;&lt; endl;\r\n    cout &lt;&lt; your_matrix &lt;&lt; endl;\r\n\r\nIt will output:\r\n\r\n    3\r\n    [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]\r\n\r\nOf course you can change the datatype according to your needs (e.g. use `int` instead of `float`). You can ignore the `AUTO_STEP` parameter, but be sure to check the documentation on the usage if you want to use it. Also, if you want to change the structure of your `Mat` (e.g. split the array into multiple rows) you can achieve this by changing the `rows` and `cols` arguments in the constructor:\r\n\r\n\r\n    float data[10] = { 1, 2, 3, 4, 5, 6, 7, 8, 9, 10 };\r\n    cv::Mat your_matrix = cv::Mat(2, 5, CV_32F, data);\r\n    \r\n    cout &lt;&lt; your_matrix.at&lt;float&gt;(1,2) &lt;&lt; endl;\r\n    cout &lt;&lt; your_matrix &lt;&lt; endl;\r\n\r\nIt will output:\r\n\r\n    8\r\n    [1, 2, 3, 4, 5; \r\n    6, 7, 8, 9, 10]\r\n\r\nYou have now split your `Mat` object into two rows of 5 columns, instead of 1 row of 10 columns.\r\n\r\n**In case of Java:**\r\nIf you want to do this in Java, you were already on the right track. However, you probably forgot to specify the rows, columns and channels/depth. Change the rows, cols and CvType according to whatever suits your data as before. You can do the following:\r\n\r\n    float data[] = new float[]{ 1, 2, 3, 4, 5, 6, 7, 8, 9, 10};\r\n    Mat mat = new Mat(1, 10, CvType.CV_32F);\r\n    mat.put(0, 0, data);\r\n\r\nBe sure to check the [Java documentation on Mat][2] as well!\r\n\r\n\r\n  [1]: http://docs.opencv.org/3.1.0/d3/d63/classcv_1_1Mat.html#a51615ebf17a64c968df0bf49b4de6a3a\r\n  [2]: http://docs.opencv.org/java/3.1.0/org/opencv/core/Mat.html","title":"Initialize the values into Mat object in OpenCV","body":"<p>Your question is not entirely clear to me, but I'm going to assume you are trying to load a <code>float array</code> into a OpenCV <code>Mat</code> object in a single row. First of all, be sure to check the documentation on constructing a <code>Mat</code> in <code>C++</code>. Since you have a 1D array and (I assume) you know the <code>rows</code> and <code>columns</code> you want to give your <code>Mat</code>, you should use <a href=\"http://docs.opencv.org/3.1.0/d3/d63/classcv_1_1Mat.html#a51615ebf17a64c968df0bf49b4de6a3a\" rel=\"noreferrer\">this constructor</a>:</p>\n<pre><code>cv::Mat::Mat (int rows, int cols, int type, void * data, size_t step = AUTO_STEP)   \n</code></pre>\n<p>Here's a code example:</p>\n<pre><code>float data[10] = { 1, 2, 3, 4, 5, 6, 7, 8, 9, 10 };\ncv::Mat your_matrix = cv::Mat(1, 10, CV_32F, data);\n\ncout &lt;&lt; your_matrix.at&lt;float&gt;(0,2) &lt;&lt; endl;\ncout &lt;&lt; your_matrix &lt;&lt; endl;\n</code></pre>\n<p>It will output:</p>\n<pre><code>3\n[1, 2, 3, 4, 5, 6, 7, 8, 9, 10]\n</code></pre>\n<p>Of course you can change the datatype according to your needs (e.g. use <code>int</code> instead of <code>float</code>). You can ignore the <code>AUTO_STEP</code> parameter, but be sure to check the documentation on the usage if you want to use it. Also, if you want to change the structure of your <code>Mat</code> (e.g. split the array into multiple rows) you can achieve this by changing the <code>rows</code> and <code>cols</code> arguments in the constructor:</p>\n<pre><code>float data[10] = { 1, 2, 3, 4, 5, 6, 7, 8, 9, 10 };\ncv::Mat your_matrix = cv::Mat(2, 5, CV_32F, data);\n\ncout &lt;&lt; your_matrix.at&lt;float&gt;(1,2) &lt;&lt; endl;\ncout &lt;&lt; your_matrix &lt;&lt; endl;\n</code></pre>\n<p>It will output:</p>\n<pre><code>8\n[1, 2, 3, 4, 5; \n6, 7, 8, 9, 10]\n</code></pre>\n<p>You have now split your <code>Mat</code> object into two rows of 5 columns, instead of 1 row of 10 columns.</p>\n<p><strong>In case of Java:</strong>\nIf you want to do this in Java, you were already on the right track. However, you probably forgot to specify the rows, columns and channels/depth. Change the rows, cols and CvType according to whatever suits your data as before. You can do the following:</p>\n<pre><code>float data[] = new float[]{ 1, 2, 3, 4, 5, 6, 7, 8, 9, 10};\nMat mat = new Mat(1, 10, CvType.CV_32F);\nmat.put(0, 0, data);\n</code></pre>\n<p>Be sure to check the <a href=\"http://docs.opencv.org/java/3.1.0/org/opencv/core/Mat.html\" rel=\"noreferrer\">Java documentation on Mat</a> as well!</p>\n"},{"tags":[],"owner":{"account_id":2780567,"reputation":19695,"user_id":2393191,"accept_rate":83,"display_name":"Micka"},"down_vote_count":0,"up_vote_count":30,"is_accepted":false,"score":30,"last_activity_date":1699924492,"creation_date":1491211445,"answer_id":43180944,"question_id":43180053,"body_markdown":"Try inline initialization if you want to hardcode those values.:\r\n\r\n```\r\n// For small matrices you may use comma separated initializers:\r\n\r\nMat C = (Mat_&lt;double&gt;(3,3) &lt;&lt; 0, -1, 0, -1, 5, -1, 0, -1, 0);\r\ncout &lt;&lt; &quot;C = &quot; &lt;&lt; endl &lt;&lt; &quot; &quot; &lt;&lt; C &lt;&lt; endl &lt;&lt; endl;\r\n```\r\n\r\nstolen from\r\n\r\nhttp://opencvexamples.blogspot.de/2013/09/creating-matrix-in-different-ways.html?m=1\r\n\r\nuse data array as source as shown in some else&#39;s answer if you want to use a (maybe dynamic) array as input.","title":"Initialize the values into Mat object in OpenCV","body":"<p>Try inline initialization if you want to hardcode those values.:</p>\n<pre><code>// For small matrices you may use comma separated initializers:\n\nMat C = (Mat_&lt;double&gt;(3,3) &lt;&lt; 0, -1, 0, -1, 5, -1, 0, -1, 0);\ncout &lt;&lt; &quot;C = &quot; &lt;&lt; endl &lt;&lt; &quot; &quot; &lt;&lt; C &lt;&lt; endl &lt;&lt; endl;\n</code></pre>\n<p>stolen from</p>\n<p><a href=\"http://opencvexamples.blogspot.de/2013/09/creating-matrix-in-different-ways.html?m=1\" rel=\"nofollow noreferrer\">http://opencvexamples.blogspot.de/2013/09/creating-matrix-in-different-ways.html?m=1</a></p>\n<p>use data array as source as shown in some else's answer if you want to use a (maybe dynamic) array as input.</p>\n"}],"owner":{"account_id":5878842,"reputation":159,"user_id":4628906,"display_name":"AciD IoN"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":65133,"favorite_count":0,"down_vote_count":1,"up_vote_count":15,"accepted_answer_id":43180550,"answer_count":3,"score":14,"last_activity_date":1699924492,"creation_date":1491208748,"question_id":43180053,"body_markdown":"I need to initialize these array values directly into a `Mat` object. I tried using `obj.put(i,j,data)` but this does not work and the `Mat` object is still empty. i need this in java\r\n\r\n    data [] = {103547.0, 2.0959531E7, 5.152769223E9, 1.415924406121E12, 2.0842905E7, \r\n               4.195143491E9, 1.025510364741E12, 5.000561607E9, 9.99289545049E11, \r\n               1.332451366923E12}\r\n\r\n \r\nCan explain to me me how to initialize a `new Mat` object where I directly insert the array data?\r\n ","title":"Initialize the values into Mat object in OpenCV","body":"<p>I need to initialize these array values directly into a <code>Mat</code> object. I tried using <code>obj.put(i,j,data)</code> but this does not work and the <code>Mat</code> object is still empty. i need this in java</p>\n\n<pre><code>data [] = {103547.0, 2.0959531E7, 5.152769223E9, 1.415924406121E12, 2.0842905E7, \n           4.195143491E9, 1.025510364741E12, 5.000561607E9, 9.99289545049E11, \n           1.332451366923E12}\n</code></pre>\n\n<p>Can explain to me me how to initialize a <code>new Mat</code> object where I directly insert the array data?</p>\n"},{"tags":["java","spring","type-safety","unchecked"],"comments":[{"owner":{"account_id":9733,"reputation":98806,"user_id":18103,"accept_rate":68,"display_name":"skiphoppy"},"score":1,"creation_date":1233768442,"post_id":262367,"comment_id":51963476,"body_markdown":"I came up with a routine to actually check the cast to parameterized HashMap, which eliminates the unchecked cast warning: [link](http://stackoverflow.com/questions/509076/how-do-i-address-unchecked-cast-warnings/509230#509230) I&#39;d say this is the &quot;correct&quot; solution, but whether or not its worth it might be debatable. :)","body":"I came up with a routine to actually check the cast to parameterized HashMap, which eliminates the unchecked cast warning: <a href=\"http://stackoverflow.com/questions/509076/how-do-i-address-unchecked-cast-warnings/509230#509230\">link</a> I&#39;d say this is the &quot;correct&quot; solution, but whether or not its worth it might be debatable. :)"},{"owner":{"account_id":31330,"reputation":33286,"user_id":85950,"accept_rate":64,"display_name":"blahdiblah"},"score":0,"creation_date":1363029318,"post_id":262367,"comment_id":21677431,"body_markdown":"Related/dupe: [How do I address unchecked cast warnings?](http://stackoverflow.com/q/509076)","body":"Related/dupe: <a href=\"http://stackoverflow.com/q/509076\">How do I address unchecked cast warnings?</a>"},{"owner":{"account_id":472669,"reputation":9843,"user_id":881272,"accept_rate":67,"display_name":"Angelo Fuchs"},"score":0,"creation_date":1408446984,"post_id":262367,"comment_id":39582895,"body_markdown":"possible duplicate of [How do I address unchecked cast warnings?](http://stackoverflow.com/questions/509076/how-do-i-address-unchecked-cast-warnings)","body":"possible duplicate of <a href=\"http://stackoverflow.com/questions/509076/how-do-i-address-unchecked-cast-warnings\">How do I address unchecked cast warnings?</a>"}],"answers":[{"tags":[],"owner":{"account_id":5100,"reputation":29377,"user_id":8026,"accept_rate":63,"display_name":"MetroidFan2002"},"down_vote_count":2,"up_vote_count":291,"is_accepted":false,"score":289,"last_activity_date":1518008144,"creation_date":1225817047,"answer_id":262416,"question_id":262367,"body_markdown":"Well, first of all, you&#39;re wasting memory with the new `HashMap` creation call. Your second line completely disregards the reference to this created hashmap, making it then available to the garbage collector. So, don&#39;t do that, use:\r\n\r\n    private Map&lt;String, String&gt; someMap = (HashMap&lt;String, String&gt;)getApplicationContext().getBean(&quot;someMap&quot;);\r\n\r\nSecondly, the compiler is complaining that you cast the object to a `HashMap` without checking if it is a `HashMap`. But, even if you were to do:\r\n\r\n    if(getApplicationContext().getBean(&quot;someMap&quot;) instanceof HashMap) {\r\n        private Map&lt;String, String&gt; someMap = (HashMap&lt;String, String&gt;)getApplicationContext().getBean(&quot;someMap&quot;);\r\n    }\r\n\r\nYou would probably still get this warning. The problem is, `getBean` returns `Object`, so it is unknown what the type is. Converting it to `HashMap` directly would not cause the problem with the second case (and perhaps there would not be a warning in the first case, I&#39;m not sure how pedantic the Java compiler is with warnings for Java 5). However, you are converting it to a `HashMap&lt;String, String&gt;`.\r\n\r\nHashMaps are really maps that take an object as a key and have an object as a value, `HashMap&lt;Object, Object&gt;` if you will. Thus, there is no guarantee that when you get your bean that it can be represented as a `HashMap&lt;String, String&gt;` because you could have `HashMap&lt;Date, Calendar&gt;` because the non-generic representation that is returned can have any objects.\r\n\r\nIf the code compiles, and you can execute `String value = map.get(&quot;thisString&quot;);` without any errors, don&#39;t worry about this warning. But if the map isn&#39;t completely of string keys to string values, you will get a `ClassCastException` at runtime, because the generics cannot block this from happening in this case.","title":"Type safety: Unchecked cast","body":"<p>Well, first of all, you're wasting memory with the new <code>HashMap</code> creation call. Your second line completely disregards the reference to this created hashmap, making it then available to the garbage collector. So, don't do that, use:</p>\n\n<pre><code>private Map&lt;String, String&gt; someMap = (HashMap&lt;String, String&gt;)getApplicationContext().getBean(\"someMap\");\n</code></pre>\n\n<p>Secondly, the compiler is complaining that you cast the object to a <code>HashMap</code> without checking if it is a <code>HashMap</code>. But, even if you were to do:</p>\n\n<pre><code>if(getApplicationContext().getBean(\"someMap\") instanceof HashMap) {\n    private Map&lt;String, String&gt; someMap = (HashMap&lt;String, String&gt;)getApplicationContext().getBean(\"someMap\");\n}\n</code></pre>\n\n<p>You would probably still get this warning. The problem is, <code>getBean</code> returns <code>Object</code>, so it is unknown what the type is. Converting it to <code>HashMap</code> directly would not cause the problem with the second case (and perhaps there would not be a warning in the first case, I'm not sure how pedantic the Java compiler is with warnings for Java 5). However, you are converting it to a <code>HashMap&lt;String, String&gt;</code>.</p>\n\n<p>HashMaps are really maps that take an object as a key and have an object as a value, <code>HashMap&lt;Object, Object&gt;</code> if you will. Thus, there is no guarantee that when you get your bean that it can be represented as a <code>HashMap&lt;String, String&gt;</code> because you could have <code>HashMap&lt;Date, Calendar&gt;</code> because the non-generic representation that is returned can have any objects.</p>\n\n<p>If the code compiles, and you can execute <code>String value = map.get(\"thisString\");</code> without any errors, don't worry about this warning. But if the map isn't completely of string keys to string values, you will get a <code>ClassCastException</code> at runtime, because the generics cannot block this from happening in this case.</p>\n"},{"tags":[],"owner":{"account_id":6284,"reputation":14589,"user_id":10508,"accept_rate":53,"display_name":"David M. Karr"},"down_vote_count":4,"up_vote_count":43,"is_accepted":false,"score":39,"last_activity_date":1225817064,"creation_date":1225817064,"answer_id":262417,"question_id":262367,"body_markdown":"A warning is just that.  A warning.  Sometimes warnings are irrelevant, sometimes they&#39;re not.  They&#39;re used to call your attention to something that the compiler thinks could be a problem, but may not be.\r\n\r\nIn the case of casts, it&#39;s always going to give a warning in this case.  If you are absolutely certain that a particular cast will be safe, then you should consider adding an annotation like this (I&#39;m not sure of the syntax) just before the line:\r\n\r\n    @SuppressWarnings (value=&quot;unchecked&quot;)\r\n\r\n","title":"Type safety: Unchecked cast","body":"<p>A warning is just that.  A warning.  Sometimes warnings are irrelevant, sometimes they're not.  They're used to call your attention to something that the compiler thinks could be a problem, but may not be.</p>\n\n<p>In the case of casts, it's always going to give a warning in this case.  If you are absolutely certain that a particular cast will be safe, then you should consider adding an annotation like this (I'm not sure of the syntax) just before the line:</p>\n\n<pre><code>@SuppressWarnings (value=\"unchecked\")\n</code></pre>\n"},{"tags":[],"owner":{"account_id":8022,"reputation":21441,"user_id":14167,"accept_rate":83,"display_name":"David Nehme"},"down_vote_count":0,"up_vote_count":9,"is_accepted":false,"score":9,"last_activity_date":1225817099,"creation_date":1225817099,"answer_id":262418,"question_id":262367,"body_markdown":"You are getting this message because getBean returns an Object reference and you are casting it to the correct type.  Java 1.5 gives you a warning.  That&#39;s the nature of using Java 1.5 or better with code that works like this.  Spring has the typesafe version\r\n\r\n    someMap=getApplicationContext().getBean&lt;HashMap&lt;String, String&gt;&gt;(&quot;someMap&quot;);\r\n\r\non its todo list.","title":"Type safety: Unchecked cast","body":"<p>You are getting this message because getBean returns an Object reference and you are casting it to the correct type.  Java 1.5 gives you a warning.  That's the nature of using Java 1.5 or better with code that works like this.  Spring has the typesafe version</p>\n\n<pre><code>someMap=getApplicationContext().getBean&lt;HashMap&lt;String, String&gt;&gt;(\"someMap\");\n</code></pre>\n\n<p>on its todo list.</p>\n"},{"tags":[],"owner":{"account_id":11683,"reputation":1438111,"user_id":22656,"accept_rate":86,"display_name":"Jon Skeet"},"down_vote_count":3,"up_vote_count":392,"is_accepted":true,"score":389,"last_activity_date":1225818559,"creation_date":1225818559,"answer_id":262539,"question_id":262367,"body_markdown":"The problem is that a cast is a runtime check - but due to type erasure, at runtime there&#39;s actually no difference between a `HashMap&lt;String,String&gt;` and `HashMap&lt;Foo,Bar&gt;` for any other `Foo` and `Bar`.\r\n\r\nUse `@SuppressWarnings(&quot;unchecked&quot;)` and hold your nose. Oh, and campaign for reified generics in Java :)","title":"Type safety: Unchecked cast","body":"<p>The problem is that a cast is a runtime check - but due to type erasure, at runtime there's actually no difference between a <code>HashMap&lt;String,String&gt;</code> and <code>HashMap&lt;Foo,Bar&gt;</code> for any other <code>Foo</code> and <code>Bar</code>.</p>\n\n<p>Use <code>@SuppressWarnings(\"unchecked\")</code> and hold your nose. Oh, and campaign for reified generics in Java :)</p>\n"},{"tags":[],"owner":{"account_id":1584941,"reputation":1251,"user_id":1469526,"display_name":"Larry Landry"},"down_vote_count":0,"up_vote_count":122,"is_accepted":false,"score":122,"last_activity_date":1501668302,"creation_date":1352929580,"answer_id":13387897,"question_id":262367,"body_markdown":"As the messages above indicate, the List cannot be differentiated between a `List&lt;Object&gt;` and a `List&lt;String&gt;` or `List&lt;Integer&gt;`.\r\n\r\nI&#39;ve solved this error message for a similar problem:\r\n\r\n    List&lt;String&gt; strList = (List&lt;String&gt;) someFunction();\r\n    String s = strList.get(0);\r\n\r\nwith the following:\r\n\r\n    List&lt;?&gt; strList = (List&lt;?&gt;) someFunction();\r\n    String s = (String) strList.get(0);\r\n\r\nExplanation: The first type conversion verifies that the object is a List without caring about the types held within (since we cannot verify the internal types at the List level).  The second conversion is now required because the compiler only knows the List contains some sort of objects.  This verifies the type of each object in the List as it is accessed.\r\n","title":"Type safety: Unchecked cast","body":"<p>As the messages above indicate, the List cannot be differentiated between a <code>List&lt;Object&gt;</code> and a <code>List&lt;String&gt;</code> or <code>List&lt;Integer&gt;</code>.</p>\n\n<p>I've solved this error message for a similar problem:</p>\n\n<pre><code>List&lt;String&gt; strList = (List&lt;String&gt;) someFunction();\nString s = strList.get(0);\n</code></pre>\n\n<p>with the following:</p>\n\n<pre><code>List&lt;?&gt; strList = (List&lt;?&gt;) someFunction();\nString s = (String) strList.get(0);\n</code></pre>\n\n<p>Explanation: The first type conversion verifies that the object is a List without caring about the types held within (since we cannot verify the internal types at the List level).  The second conversion is now required because the compiler only knows the List contains some sort of objects.  This verifies the type of each object in the List as it is accessed.</p>\n"},{"tags":[],"owner":{"account_id":1510562,"reputation":115,"user_id":1412805,"accept_rate":50,"display_name":"Rabbit"},"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1460562931,"creation_date":1460562931,"answer_id":36603684,"question_id":262367,"body_markdown":"If you really want to get rid of the warnings, one thing you can do is create a class that extends from the generic class.\r\n\r\nFor example, if you&#39;re trying to use\r\n\r\n    private Map&lt;String, String&gt; someMap = new HashMap&lt;String, String&gt;();\r\n\r\nYou can create a new class like such\r\n\r\n    public class StringMap extends HashMap&lt;String, String&gt;()\r\n    {\r\n        // Override constructors\r\n    }\r\n\r\nThen when you use\r\n\r\n    someMap = (StringMap) getApplicationContext().getBean(&quot;someMap&quot;);\r\n\r\nThe compiler DOES know what the (no longer generic) types are, and there will be no warning. This may not always be the perfect solution, some might argue this kind of defeats the purpose of generic classes, but you&#39;re still re-using all of the same code from the generic class, you&#39;re just declaring at compile time what type you want to use.","title":"Type safety: Unchecked cast","body":"<p>If you really want to get rid of the warnings, one thing you can do is create a class that extends from the generic class.</p>\n\n<p>For example, if you're trying to use</p>\n\n<pre><code>private Map&lt;String, String&gt; someMap = new HashMap&lt;String, String&gt;();\n</code></pre>\n\n<p>You can create a new class like such</p>\n\n<pre><code>public class StringMap extends HashMap&lt;String, String&gt;()\n{\n    // Override constructors\n}\n</code></pre>\n\n<p>Then when you use</p>\n\n<pre><code>someMap = (StringMap) getApplicationContext().getBean(\"someMap\");\n</code></pre>\n\n<p>The compiler DOES know what the (no longer generic) types are, and there will be no warning. This may not always be the perfect solution, some might argue this kind of defeats the purpose of generic classes, but you're still re-using all of the same code from the generic class, you're just declaring at compile time what type you want to use.</p>\n"},{"tags":[],"owner":{"account_id":53772,"reputation":22307,"user_id":160811,"accept_rate":100,"display_name":"Jeremy"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1476991517,"creation_date":1476991517,"answer_id":40162894,"question_id":262367,"body_markdown":"Another solution, if you find yourself casting the same object a lot and you don&#39;t want to litter your code with `@SupressWarnings(&quot;unchecked&quot;)`, would be to create a method with the annotation. This way you&#39;re centralizing the cast, and hopefully reducing the possibility for error.\r\n\r\n    @SuppressWarnings(&quot;unchecked&quot;)\r\n    public static List&lt;String&gt; getFooStrings(Map&lt;String, List&lt;String&gt;&gt; ctx) {\r\n        return (List&lt;String&gt;) ctx.get(&quot;foos&quot;);\r\n    }\r\n","title":"Type safety: Unchecked cast","body":"<p>Another solution, if you find yourself casting the same object a lot and you don't want to litter your code with <code>@SupressWarnings(\"unchecked\")</code>, would be to create a method with the annotation. This way you're centralizing the cast, and hopefully reducing the possibility for error.</p>\n\n<pre><code>@SuppressWarnings(\"unchecked\")\npublic static List&lt;String&gt; getFooStrings(Map&lt;String, List&lt;String&gt;&gt; ctx) {\n    return (List&lt;String&gt;) ctx.get(\"foos\");\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2729652,"reputation":5593,"user_id":2353713,"accept_rate":69,"display_name":"Andy"},"down_vote_count":1,"up_vote_count":5,"is_accepted":false,"score":4,"last_activity_date":1481898205,"creation_date":1481898205,"answer_id":41186419,"question_id":262367,"body_markdown":" **Below code causes Type safety Warning**\r\n\r\n`Map&lt;String, Object&gt; myInput = (Map&lt;String, Object&gt;) myRequest.get();` \r\n\r\n&gt; **Workaround**\r\n\r\n \r\n\r\nCreate a new Map Object without mentioning the parameters because the type of object held within the list is not verified.\r\n\r\n ***Step 1:*** Create a new temporary Map\r\n\r\n`Map&lt;?, ?&gt; tempMap = (Map&lt;?, ?&gt;) myRequest.get();`\r\n\r\n ***Step 2:*** Instantiate the main Map\r\n\r\n    Map&lt;String, Object&gt; myInput=new HashMap&lt;&gt;(myInputObj.size());\r\n ***Step 3:*** Iterate the temporary Map and set the values into the main Map\r\n   \r\n\r\n     for(Map.Entry&lt;?, ?&gt; entry :myInputObj.entrySet()){\r\n        \tmyInput.put((String)entry.getKey(),entry.getValue()); \r\n        }","title":"Type safety: Unchecked cast","body":"<p><strong>Below code causes Type safety Warning</strong></p>\n\n<p><code>Map&lt;String, Object&gt; myInput = (Map&lt;String, Object&gt;) myRequest.get();</code> </p>\n\n<blockquote>\n  <p><strong>Workaround</strong></p>\n</blockquote>\n\n<p>Create a new Map Object without mentioning the parameters because the type of object held within the list is not verified.</p>\n\n<p><strong><em>Step 1:</em></strong> Create a new temporary Map</p>\n\n<p><code>Map&lt;?, ?&gt; tempMap = (Map&lt;?, ?&gt;) myRequest.get();</code></p>\n\n<p><strong><em>Step 2:</em></strong> Instantiate the main Map</p>\n\n<pre><code>Map&lt;String, Object&gt; myInput=new HashMap&lt;&gt;(myInputObj.size());\n</code></pre>\n\n<p><strong><em>Step 3:</em></strong> Iterate the temporary Map and set the values into the main Map</p>\n\n<pre><code> for(Map.Entry&lt;?, ?&gt; entry :myInputObj.entrySet()){\n        myInput.put((String)entry.getKey(),entry.getValue()); \n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2545570,"reputation":358,"user_id":2210454,"display_name":"ochakov"},"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1535471410,"creation_date":1535469214,"answer_id":52061219,"question_id":262367,"body_markdown":"The solution to avoid the unchecked warning:\r\n\r\n    class MyMap extends HashMap&lt;String, String&gt; {};\r\n    someMap = (MyMap)getApplicationContext().getBean(&quot;someMap&quot;);\r\n\r\n","title":"Type safety: Unchecked cast","body":"<p>The solution to avoid the unchecked warning:</p>\n\n<pre><code>class MyMap extends HashMap&lt;String, String&gt; {};\nsomeMap = (MyMap)getApplicationContext().getBean(\"someMap\");\n</code></pre>\n"},{"tags":[],"owner":{"account_id":100270,"reputation":127154,"user_id":270371,"accept_rate":33,"display_name":"davidxxx"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1688571079,"creation_date":1565618542,"answer_id":57462703,"question_id":262367,"body_markdown":"&gt; What did I do wrong? How do I resolve the issue?\r\n&gt; \r\n\r\n Here :\r\n\r\n `Map&lt;String,String&gt; someMap = (Map&lt;String,String&gt;)getApplicationContext().getBean(&quot;someMap&quot;);`\r\n\r\n\r\nYou use a legacy method that we generally don&#39;t want to use since that returns `Object`: \r\n\r\n    Object getBean(String name) throws BeansException;\r\n\r\nThe method to favor to get (for singleton) / create (for prototype) a bean from a bean factory is :\r\n\r\n    &lt;T&gt; T getBean(String name, Class&lt;T&gt; requiredType) throws BeansException;\r\n\r\nUsing it such as  : \r\n\r\n    Map&lt;String,String&gt; someMap = app.getBean(&quot;someMap&quot;, Map.class);\r\n\r\nwill compile but still with a unchecked conversion warning since all `Map` objects are not necessarily `Map&lt;String, String&gt;` objects.   \r\n\r\nBut `&lt;T&gt; T getBean(String name, Class&lt;T&gt; requiredType) throws BeansException;` is not enough in bean generic classes such as generic collections since that requires to specify more than one class as parameter : the collection type and its generic type(s).     \r\n\r\nIn this kind of scenario and in general, a better approach is not to use directly `BeanFactory` methods but let the framework to inject the bean.   \r\n\r\nThe bean declaration : \r\n\r\n    @Configuration\r\n    public class MyConfiguration{\r\n    \r\n        @Bean\r\n        public Map&lt;String, String&gt; someMap() {\r\n            Map&lt;String, String&gt; someMap = new HashMap();\r\n            someMap.put(&quot;some_key&quot;, &quot;some value&quot;);\r\n            someMap.put(&quot;some_key_2&quot;, &quot;some value&quot;);\r\n            return someMap;\r\n        }\r\n    }\r\n\r\nThe bean injection : \r\n\r\n    @Autowired\r\n    @Qualifier(&quot;someMap&quot;)\r\n    Map&lt;String, String&gt; someMap;\r\n\r\n","title":"Type safety: Unchecked cast","body":"<blockquote>\n<p>What did I do wrong? How do I resolve the issue?</p>\n</blockquote>\n<p>Here :</p>\n<p><code>Map&lt;String,String&gt; someMap = (Map&lt;String,String&gt;)getApplicationContext().getBean(&quot;someMap&quot;);</code></p>\n<p>You use a legacy method that we generally don't want to use since that returns <code>Object</code>:</p>\n<pre><code>Object getBean(String name) throws BeansException;\n</code></pre>\n<p>The method to favor to get (for singleton) / create (for prototype) a bean from a bean factory is :</p>\n<pre><code>&lt;T&gt; T getBean(String name, Class&lt;T&gt; requiredType) throws BeansException;\n</code></pre>\n<p>Using it such as  :</p>\n<pre><code>Map&lt;String,String&gt; someMap = app.getBean(&quot;someMap&quot;, Map.class);\n</code></pre>\n<p>will compile but still with a unchecked conversion warning since all <code>Map</code> objects are not necessarily <code>Map&lt;String, String&gt;</code> objects.</p>\n<p>But <code>&lt;T&gt; T getBean(String name, Class&lt;T&gt; requiredType) throws BeansException;</code> is not enough in bean generic classes such as generic collections since that requires to specify more than one class as parameter : the collection type and its generic type(s).</p>\n<p>In this kind of scenario and in general, a better approach is not to use directly <code>BeanFactory</code> methods but let the framework to inject the bean.</p>\n<p>The bean declaration :</p>\n<pre><code>@Configuration\npublic class MyConfiguration{\n\n    @Bean\n    public Map&lt;String, String&gt; someMap() {\n        Map&lt;String, String&gt; someMap = new HashMap();\n        someMap.put(&quot;some_key&quot;, &quot;some value&quot;);\n        someMap.put(&quot;some_key_2&quot;, &quot;some value&quot;);\n        return someMap;\n    }\n}\n</code></pre>\n<p>The bean injection :</p>\n<pre><code>@Autowired\n@Qualifier(&quot;someMap&quot;)\nMap&lt;String, String&gt; someMap;\n</code></pre>\n"}],"owner":{"account_id":963,"reputation":18382,"user_id":37740,"accept_rate":71,"display_name":"Sajal Dutta"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":508205,"favorite_count":0,"down_vote_count":1,"up_vote_count":330,"accepted_answer_id":262539,"answer_count":10,"score":329,"last_activity_date":1699922077,"creation_date":1225816143,"question_id":262367,"body_markdown":"In my spring application context file, I have something like:\r\n\r\n&lt;!-- language: xml --&gt;\r\n    &lt;util:map id=&quot;someMap&quot; map-class=&quot;java.util.HashMap&quot; key-type=&quot;java.lang.String&quot; value-type=&quot;java.lang.String&quot;&gt;\r\n    \t&lt;entry key=&quot;some_key&quot; value=&quot;some value&quot; /&gt;\r\n    \t&lt;entry key=&quot;some_key_2&quot; value=&quot;some value&quot; /&gt;\t\r\n    &lt;/util:map&gt;\r\n\r\nIn java class, the implementation looks like:\r\n\r\n    private Map&lt;String, String&gt; someMap = new HashMap&lt;String, String&gt;();\r\n    someMap = (HashMap&lt;String, String&gt;)getApplicationContext().getBean(&quot;someMap&quot;);\r\n\r\nIn Eclipse, I see a warning that says:\r\n\r\n**Type safety: Unchecked cast from Object to HashMap&lt;String,String&gt;**\r\n\r\nWhat went wrong?","title":"Type safety: Unchecked cast","body":"<p>In my spring application context file, I have something like:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;util:map id=&quot;someMap&quot; map-class=&quot;java.util.HashMap&quot; key-type=&quot;java.lang.String&quot; value-type=&quot;java.lang.String&quot;&gt;\n    &lt;entry key=&quot;some_key&quot; value=&quot;some value&quot; /&gt;\n    &lt;entry key=&quot;some_key_2&quot; value=&quot;some value&quot; /&gt;   \n&lt;/util:map&gt;\n</code></pre>\n<p>In java class, the implementation looks like:</p>\n<pre><code>private Map&lt;String, String&gt; someMap = new HashMap&lt;String, String&gt;();\nsomeMap = (HashMap&lt;String, String&gt;)getApplicationContext().getBean(&quot;someMap&quot;);\n</code></pre>\n<p>In Eclipse, I see a warning that says:</p>\n<p><strong>Type safety: Unchecked cast from Object to HashMap&lt;String,String&gt;</strong></p>\n<p>What went wrong?</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":15047867,"reputation":2292,"user_id":10860403,"display_name":"ewokx"},"score":1,"creation_date":1699922377,"post_id":77477583,"comment_id":136589185,"body_markdown":"Does this answer your question? [Could not resolve all files for configuration &#39;:app:androidApis&#39;](https://stackoverflow.com/questions/53648319/could-not-resolve-all-files-for-configuration-appandroidapis)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/53648319/could-not-resolve-all-files-for-configuration-appandroidapis\">Could not resolve all files for configuration &#39;:app:androidApis&#39;</a>"},{"owner":{"account_id":1888781,"reputation":2007,"user_id":1707427,"display_name":"S&#246;ren"},"score":1,"creation_date":1700076216,"post_id":77477583,"comment_id":136611587,"body_markdown":"[Please do not upload images of code/data/errors.](//meta.stackoverflow.com/q/285551)","body":"<a href=\"//meta.stackoverflow.com/q/285551\">Please do not upload images of code/data/errors.</a>"}],"owner":{"account_id":29556514,"reputation":1,"user_id":22652080,"display_name":"Suyog Adhikari "},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":20,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":0,"score":-1,"last_activity_date":1699922056,"creation_date":1699922056,"question_id":77477583,"body_markdown":"I joined android studio which is showing built function error every time when I try to run. How could I fix it? I am unable to fix this issue as I am using android studio for the first-time. Could someone help me to fix this problem.\r\n\r\n\r\n\r\n(https://i.stack.imgur.com/JHRN8.png)\r\n\r\nIdeas to solve the problem.","title":"How can I fix the issue with android studio?","body":"<p>I joined android studio which is showing built function error every time when I try to run. How could I fix it? I am unable to fix this issue as I am using android studio for the first-time. Could someone help me to fix this problem.</p>\n<p>(<a href=\"https://i.stack.imgur.com/JHRN8.png\" rel=\"nofollow noreferrer\">https://i.stack.imgur.com/JHRN8.png</a>)</p>\n<p>Ideas to solve the problem.</p>\n"},{"tags":["java","collections","functional-programming"],"comments":[{"owner":{"account_id":8517137,"reputation":835,"user_id":6385232,"display_name":"geanakuch"},"score":0,"creation_date":1699878356,"post_id":77473765,"comment_id":136582102,"body_markdown":"Writing your own ```Set``` implementation sounds like a big thing, but you could simply wrap the standard HashSet in a class which also utilises the Observer pattern. That way you could always update your subset &quot;automatically&quot; when the main set changes. But obviously you&#39;d also have to use some means of synchronisation to make it threadsafe (if needed).","body":"Writing your own <code>Set</code> implementation sounds like a big thing, but you could simply wrap the standard HashSet in a class which also utilises the Observer pattern. That way you could always update your subset &quot;automatically&quot; when the main set changes. But obviously you&#39;d also have to use some means of synchronisation to make it threadsafe (if needed)."},{"owner":{"account_id":3716256,"reputation":100,"user_id":3092396,"display_name":"Scroobius"},"score":0,"creation_date":1699878780,"post_id":77473765,"comment_id":136582179,"body_markdown":"@geanakuch I realise that the implementation would start off small, but it&#39;s mostly just that I suspect this is a common problem so was wondering if there was an out-of-the-box solution.\nIt would be annoying if I had to keep re-writing the same thing on future projects. Especially since there is room for a lot of complexity E.G. eager caching (as you suggested) or lazy caching","body":"@geanakuch I realise that the implementation would start off small, but it&#39;s mostly just that I suspect this is a common problem so was wondering if there was an out-of-the-box solution. It would be annoying if I had to keep re-writing the same thing on future projects. Especially since there is room for a lot of complexity E.G. eager caching (as you suggested) or lazy caching"},{"owner":{"account_id":8517137,"reputation":835,"user_id":6385232,"display_name":"geanakuch"},"score":0,"creation_date":1699879580,"post_id":77473765,"comment_id":136582324,"body_markdown":"Yup, I hear you ;-) These things get out of hand pretty fast. But then it might be better to switch to immutable classes, then you wouldn&#39;t have to handle data that changes while you&#39;re working on it at all. But that&#39;s just me, I fear I&#39;ve strayed far enough from the original question...","body":"Yup, I hear you ;-) These things get out of hand pretty fast. But then it might be better to switch to immutable classes, then you wouldn&#39;t have to handle data that changes while you&#39;re working on it at all. But that&#39;s just me, I fear I&#39;ve strayed far enough from the original question..."}],"answers":[{"tags":[],"owner":{"account_id":1263831,"reputation":388998,"user_id":1221571,"accept_rate":67,"display_name":"Eran"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1699877323,"creation_date":1699877323,"answer_id":77473784,"question_id":77473765,"body_markdown":"Instead of a method that returns a `Set&lt;Thing&gt;`. You can write a method that returns a `Supplier&lt;Set&lt;Thing&gt;&gt;`. And each time you want to get the current `Set`, you call that `Supplier`&#39;s `get()` method.\r\n\r\n    public Supplier&lt;Set&lt;Thing&gt;&gt; getAllThingsWithProperty(final String property) {\r\n        return () -&gt; this.things.stream().filter((thing) -&gt; thing.hasProperty(property)).collect(Collectors.toSet());\r\n    }","title":"How can I create a live sub-collection based on a predicate?","body":"<p>Instead of a method that returns a <code>Set&lt;Thing&gt;</code>. You can write a method that returns a <code>Supplier&lt;Set&lt;Thing&gt;&gt;</code>. And each time you want to get the current <code>Set</code>, you call that <code>Supplier</code>'s <code>get()</code> method.</p>\n<pre><code>public Supplier&lt;Set&lt;Thing&gt;&gt; getAllThingsWithProperty(final String property) {\n    return () -&gt; this.things.stream().filter((thing) -&gt; thing.hasProperty(property)).collect(Collectors.toSet());\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1548079,"reputation":128727,"user_id":1441122,"display_name":"Stuart Marks"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1699921910,"creation_date":1699921910,"answer_id":77477574,"question_id":77473765,"body_markdown":"It&#39;s fairly straightforward to use `AbstractSet` to bring up a `Set` implementation. All you need to do is to implement the `size` and `iterator` methods. You&#39;re using streams already, so you can just use streams to implement these methods:\r\n\r\n    public static &lt;E&gt; Set&lt;E&gt; filteredSet(Set&lt;E&gt; set, Predicate&lt;? super E&gt; pred) {\r\n        return new AbstractSet&lt;&gt;() {\r\n            public int size() {\r\n                return (int) set.stream().filter(pred).count();\r\n            }\r\n\r\n            public Iterator&lt;E&gt; iterator() {\r\n                return set.stream().filter(pred).iterator();\r\n            }\r\n        };\r\n    }\r\n\r\nThis is a fully functional, read-only `Set`. It provides a &quot;live view&quot; of the backing set, since its elements are streamed and filtered on every operation.\r\n\r\nThis is workable for sets with small numbers of elements, but it can slow down noticeably as the number of elements grows. For example, the `contains` method potentially iterates the entire set and is thus O(N). You could override the `contains` method to delegate directly to the backing set. This will reduce the time complexity to whatever the underlying set provides -- for `HashSet`, this is O(1) -- but there are some subtleties involved.\r\n\r\nTo make the set read-write, you&#39;d need to implement the `add` method and reimplement the iterator so that it supports the `remove` method. But you were returning unmodifiable sets in the first place, so maybe you don&#39;t need that.\r\n\r\nIf you need to do something similar with `List`, take a look at `AbstractList`. It&#39;s fairly straightforward. Or use `AbstractCollection` to wrap any collection the same way as shown here with `AbstractSet`.","title":"How can I create a live sub-collection based on a predicate?","body":"<p>It's fairly straightforward to use <code>AbstractSet</code> to bring up a <code>Set</code> implementation. All you need to do is to implement the <code>size</code> and <code>iterator</code> methods. You're using streams already, so you can just use streams to implement these methods:</p>\n<pre><code>public static &lt;E&gt; Set&lt;E&gt; filteredSet(Set&lt;E&gt; set, Predicate&lt;? super E&gt; pred) {\n    return new AbstractSet&lt;&gt;() {\n        public int size() {\n            return (int) set.stream().filter(pred).count();\n        }\n\n        public Iterator&lt;E&gt; iterator() {\n            return set.stream().filter(pred).iterator();\n        }\n    };\n}\n</code></pre>\n<p>This is a fully functional, read-only <code>Set</code>. It provides a &quot;live view&quot; of the backing set, since its elements are streamed and filtered on every operation.</p>\n<p>This is workable for sets with small numbers of elements, but it can slow down noticeably as the number of elements grows. For example, the <code>contains</code> method potentially iterates the entire set and is thus O(N). You could override the <code>contains</code> method to delegate directly to the backing set. This will reduce the time complexity to whatever the underlying set provides -- for <code>HashSet</code>, this is O(1) -- but there are some subtleties involved.</p>\n<p>To make the set read-write, you'd need to implement the <code>add</code> method and reimplement the iterator so that it supports the <code>remove</code> method. But you were returning unmodifiable sets in the first place, so maybe you don't need that.</p>\n<p>If you need to do something similar with <code>List</code>, take a look at <code>AbstractList</code>. It's fairly straightforward. Or use <code>AbstractCollection</code> to wrap any collection the same way as shown here with <code>AbstractSet</code>.</p>\n"}],"owner":{"account_id":3716256,"reputation":100,"user_id":3092396,"display_name":"Scroobius"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":72,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":2,"score":3,"last_activity_date":1699921910,"creation_date":1699877060,"question_id":77473765,"body_markdown":"**Background**\r\n\r\nI have an interface\r\n\r\n```\r\npublic interface ThingRegistry {\r\n\r\n    public Set&lt;Thing&gt; getAllThings();\r\n    public Set&lt;Thing&gt; getAllThingsWithProperty(String property);\r\n}\r\n```\r\n\r\nAnd an implementation\r\n\r\n```\r\npublic class MemoryThingRegistry {\r\n    private final Set&lt;Thing&gt; things = new HashSet&lt;&gt;();\r\n\r\n    public Set&lt;Thing&gt; getAllThings() {\r\n        return Collections.unmodifiableSet(this.things);\r\n    }\r\n\r\n    public Set&lt;Thing&gt; getAllThingsWithProperty(final String property) {\r\n        return this.things.stream().filter((thing) -&gt; thing.hasProperty(property)).collect(Collectors.toUnmodifiableSet());\r\n    }\r\n}\r\n```\r\n\r\n**The Problem**\r\n* The Set returned by `getAllThings()` will reflect any changes made within my registry\r\n* However, the Set returned by `getAllThingsWithProperty()` will not reflect these changes\r\n\r\n**The Question**\r\n\r\nIs there any way using standard java libraries, or some incredibly common third party library, to make the return value of `getAllThingsWithProperty()` to be a &quot;live&quot; sub `Set`? I.E. it &quot;backed by&quot; the original `Set` but reapplies the `Predicate` each time its accessed? Preferably something that could apply to any `Collection` as I have another Registry interface which uses a `List`.\r\n\r\nI know I could write my own `Set` implementation but would prefer to avoid that.","title":"How can I create a live sub-collection based on a predicate?","body":"<p><strong>Background</strong></p>\n<p>I have an interface</p>\n<pre><code>public interface ThingRegistry {\n\n    public Set&lt;Thing&gt; getAllThings();\n    public Set&lt;Thing&gt; getAllThingsWithProperty(String property);\n}\n</code></pre>\n<p>And an implementation</p>\n<pre><code>public class MemoryThingRegistry {\n    private final Set&lt;Thing&gt; things = new HashSet&lt;&gt;();\n\n    public Set&lt;Thing&gt; getAllThings() {\n        return Collections.unmodifiableSet(this.things);\n    }\n\n    public Set&lt;Thing&gt; getAllThingsWithProperty(final String property) {\n        return this.things.stream().filter((thing) -&gt; thing.hasProperty(property)).collect(Collectors.toUnmodifiableSet());\n    }\n}\n</code></pre>\n<p><strong>The Problem</strong></p>\n<ul>\n<li>The Set returned by <code>getAllThings()</code> will reflect any changes made within my registry</li>\n<li>However, the Set returned by <code>getAllThingsWithProperty()</code> will not reflect these changes</li>\n</ul>\n<p><strong>The Question</strong></p>\n<p>Is there any way using standard java libraries, or some incredibly common third party library, to make the return value of <code>getAllThingsWithProperty()</code> to be a &quot;live&quot; sub <code>Set</code>? I.E. it &quot;backed by&quot; the original <code>Set</code> but reapplies the <code>Predicate</code> each time its accessed? Preferably something that could apply to any <code>Collection</code> as I have another Registry interface which uses a <code>List</code>.</p>\n<p>I know I could write my own <code>Set</code> implementation but would prefer to avoid that.</p>\n"},{"tags":["java","xml","parsing","xpath"],"comments":[{"owner":{"account_id":1583666,"reputation":3389,"user_id":1468481,"accept_rate":96,"display_name":"Mr.Chowdary"},"score":2,"creation_date":1422246545,"post_id":2811001,"comment_id":44661419,"body_markdown":"This [link](http://viralpatel.net/blogs/java-xml-xpath-tutorial-parse-xml/)  will give clear demonstration of read xml using xpath","body":"This <a href=\"http://viralpatel.net/blogs/java-xml-xpath-tutorial-parse-xml/\" rel=\"nofollow noreferrer\">link</a>  will give clear demonstration of read xml using xpath"}],"answers":[{"tags":[],"owner":{"account_id":28947,"reputation":90759,"user_id":77779,"accept_rate":89,"display_name":"Yishai"},"down_vote_count":0,"up_vote_count":413,"is_accepted":true,"score":413,"last_activity_date":1321536513,"creation_date":1273584854,"answer_id":2811101,"question_id":2811001,"body_markdown":"You need something along the lines of this:\r\n\r\n    DocumentBuilderFactory factory = DocumentBuilderFactory.newInstance();\r\n    DocumentBuilder builder = factory.newDocumentBuilder();\r\n    Document doc = builder.parse(&lt;uri_as_string&gt;);\r\n    XPathFactory xPathfactory = XPathFactory.newInstance();\r\n    XPath xpath = xPathfactory.newXPath();\r\n    XPathExpression expr = xpath.compile(&lt;xpath_expression&gt;);\r\n\r\n\r\nThen you call `expr.evaluate()` passing in the document defined in that code and the return type you are expecting, and cast the result to the object type of the result.\r\n\r\nIf you need help with a specific XPath expressions, you should probably ask it as separate questions (unless that was your question in the first place here - I understood your question to be how to use the API in Java).\r\n\r\nEdit: (Response to comment): This XPath expression will get you the text of the first URL element under PowerBuilder:\r\n\r\n    /howto/topic[@name=&#39;PowerBuilder&#39;]/url/text()\r\n\r\nThis will get you the second:\r\n\r\n    /howto/topic[@name=&#39;PowerBuilder&#39;]/url[2]/text()\r\n\r\nYou get that with this code:\r\n      \r\n    expr.evaluate(doc, XPathConstants.STRING);\r\n\r\nIf you don&#39;t know how many URLs are in a given node, then you should rather do something like this:\r\n\r\n    XPathExpression expr = xpath.compile(&quot;/howto/topic[@name=&#39;PowerBuilder&#39;]/url&quot;);\r\n    NodeList nl = (NodeList) expr.evaluate(doc, XPathConstants.NODESET);\r\n\r\nAnd then loop over the NodeList.","title":"How to read XML using XPath in Java","body":"<p>You need something along the lines of this:</p>\n\n<pre><code>DocumentBuilderFactory factory = DocumentBuilderFactory.newInstance();\nDocumentBuilder builder = factory.newDocumentBuilder();\nDocument doc = builder.parse(&lt;uri_as_string&gt;);\nXPathFactory xPathfactory = XPathFactory.newInstance();\nXPath xpath = xPathfactory.newXPath();\nXPathExpression expr = xpath.compile(&lt;xpath_expression&gt;);\n</code></pre>\n\n<p>Then you call <code>expr.evaluate()</code> passing in the document defined in that code and the return type you are expecting, and cast the result to the object type of the result.</p>\n\n<p>If you need help with a specific XPath expressions, you should probably ask it as separate questions (unless that was your question in the first place here - I understood your question to be how to use the API in Java).</p>\n\n<p>Edit: (Response to comment): This XPath expression will get you the text of the first URL element under PowerBuilder:</p>\n\n<pre><code>/howto/topic[@name='PowerBuilder']/url/text()\n</code></pre>\n\n<p>This will get you the second:</p>\n\n<pre><code>/howto/topic[@name='PowerBuilder']/url[2]/text()\n</code></pre>\n\n<p>You get that with this code:</p>\n\n<pre><code>expr.evaluate(doc, XPathConstants.STRING);\n</code></pre>\n\n<p>If you don't know how many URLs are in a given node, then you should rather do something like this:</p>\n\n<pre><code>XPathExpression expr = xpath.compile(\"/howto/topic[@name='PowerBuilder']/url\");\nNodeList nl = (NodeList) expr.evaluate(doc, XPathConstants.NODESET);\n</code></pre>\n\n<p>And then loop over the NodeList.</p>\n"},{"tags":[],"owner":{"account_id":2850233,"reputation":3615,"user_id":2447599,"display_name":"Ran Adler"},"down_vote_count":11,"up_vote_count":30,"is_accepted":false,"score":19,"last_activity_date":1392633846,"creation_date":1371987027,"answer_id":17260305,"question_id":2811001,"body_markdown":"Getting started  example:\r\n        \r\nxml file:\r\n        \r\n    &lt;inventory&gt;\r\n        &lt;book year=&quot;2000&quot;&gt;\r\n            &lt;title&gt;Snow Crash&lt;/title&gt;\r\n            &lt;author&gt;Neal Stephenson&lt;/author&gt;\r\n            &lt;publisher&gt;Spectra&lt;/publisher&gt;\r\n            &lt;isbn&gt;0553380958&lt;/isbn&gt;\r\n            &lt;price&gt;14.95&lt;/price&gt;\r\n        &lt;/book&gt;\r\n         \r\n        &lt;book year=&quot;2005&quot;&gt;\r\n            &lt;title&gt;Burning Tower&lt;/title&gt;\r\n            &lt;author&gt;Larry Niven&lt;/author&gt;\r\n            &lt;author&gt;Jerry Pournelle&lt;/author&gt;\r\n            &lt;publisher&gt;Pocket&lt;/publisher&gt;\r\n            &lt;isbn&gt;0743416910&lt;/isbn&gt;\r\n            &lt;price&gt;5.99&lt;/price&gt;\r\n        &lt;/book&gt;\r\n         \r\n        &lt;book year=&quot;1995&quot;&gt;\r\n            &lt;title&gt;Zodiac&lt;/title&gt;\r\n            &lt;author&gt;Neal Stephenson&lt;/author&gt;\r\n            &lt;publisher&gt;Spectra&lt;/publisher&gt;\r\n            &lt;isbn&gt;0553573862&lt;/isbn&gt;\r\n            &lt;price&gt;7.50&lt;/price&gt;\r\n        &lt;/book&gt;\r\n        \r\n        &lt;!-- more books... --&gt;\r\n         \r\n    &lt;/inventory&gt;\r\n        \r\nJava code:\r\n    \r\n    import javax.xml.parsers.DocumentBuilder;\r\n    import javax.xml.parsers.DocumentBuilderFactory;\r\n    \r\n    import org.testng.annotations.DataProvider;\r\n    import org.testng.annotations.Test;\r\n    import org.w3c.dom.Document;\r\n    import org.w3c.dom.Element;\r\n    import org.w3c.dom.Node;\r\n    import org.w3c.dom.NodeList;\r\n    import org.xml.sax.SAXException;\r\n    import org.xml.sax.SAXParseException;\r\n    \r\n        \r\n    try {\r\n      \r\n        DocumentBuilderFactory docBuilderFactory = DocumentBuilderFactory.newInstance();\r\n        DocumentBuilder docBuilder = docBuilderFactory.newDocumentBuilder();\r\n        Document doc = docBuilder.parse (new File(&quot;c:\\\\tmp\\\\my.xml&quot;));\r\n        \r\n        // normalize text representation\r\n        doc.getDocumentElement().normalize();\r\n        System.out.println (&quot;Root element of the doc is &quot; + doc.getDocumentElement().getNodeName());\r\n                \r\n        NodeList listOfBooks = doc.getElementsByTagName(&quot;book&quot;);\r\n        int totalBooks = listOfBooks.getLength();\r\n        System.out.println(&quot;Total no of books : &quot; + totalBooks);\r\n        \r\n        for(int i=0; i&lt;listOfBooks.getLength() ; i++) {\r\n                \r\n            Node firstBookNode = listOfBooks.item(i);\r\n            if(firstBookNode.getNodeType() == Node.ELEMENT_NODE) {\r\n        \r\n                Element firstElement = (Element)firstBookNode;        \t                    \r\n                System.out.println(&quot;Year :&quot;+firstElement.getAttribute(&quot;year&quot;));\r\n        \r\n                //-------\r\n                NodeList firstNameList = firstElement.getElementsByTagName(&quot;title&quot;);\r\n                Element firstNameElement = (Element)firstNameList.item(0);\r\n       \r\n                NodeList textFNList = firstNameElement.getChildNodes();\r\n     \t        System.out.println(&quot;title : &quot; + ((Node)textFNList.item(0)).getNodeValue().trim());\r\n            }\r\n        }//end of for loop with s var\r\n    } catch (SAXParseException err) {\r\n        System.out.println (&quot;** Parsing error&quot; + &quot;, line &quot; + err.getLineNumber () + &quot;, uri &quot; + err.getSystemId ());\r\n        System.out.println(&quot; &quot; + err.getMessage ());\r\n    } catch (SAXException e) {\r\n        Exception x = e.getException ();\r\n        ((x == null) ? e : x).printStackTrace ();\r\n    } catch (Throwable t) {\r\n        t.printStackTrace ();\r\n    }       \t     \r\n","title":"How to read XML using XPath in Java","body":"<p>Getting started  example:</p>\n\n<p>xml file:</p>\n\n<pre><code>&lt;inventory&gt;\n    &lt;book year=\"2000\"&gt;\n        &lt;title&gt;Snow Crash&lt;/title&gt;\n        &lt;author&gt;Neal Stephenson&lt;/author&gt;\n        &lt;publisher&gt;Spectra&lt;/publisher&gt;\n        &lt;isbn&gt;0553380958&lt;/isbn&gt;\n        &lt;price&gt;14.95&lt;/price&gt;\n    &lt;/book&gt;\n\n    &lt;book year=\"2005\"&gt;\n        &lt;title&gt;Burning Tower&lt;/title&gt;\n        &lt;author&gt;Larry Niven&lt;/author&gt;\n        &lt;author&gt;Jerry Pournelle&lt;/author&gt;\n        &lt;publisher&gt;Pocket&lt;/publisher&gt;\n        &lt;isbn&gt;0743416910&lt;/isbn&gt;\n        &lt;price&gt;5.99&lt;/price&gt;\n    &lt;/book&gt;\n\n    &lt;book year=\"1995\"&gt;\n        &lt;title&gt;Zodiac&lt;/title&gt;\n        &lt;author&gt;Neal Stephenson&lt;/author&gt;\n        &lt;publisher&gt;Spectra&lt;/publisher&gt;\n        &lt;isbn&gt;0553573862&lt;/isbn&gt;\n        &lt;price&gt;7.50&lt;/price&gt;\n    &lt;/book&gt;\n\n    &lt;!-- more books... --&gt;\n\n&lt;/inventory&gt;\n</code></pre>\n\n<p>Java code:</p>\n\n<pre><code>import javax.xml.parsers.DocumentBuilder;\nimport javax.xml.parsers.DocumentBuilderFactory;\n\nimport org.testng.annotations.DataProvider;\nimport org.testng.annotations.Test;\nimport org.w3c.dom.Document;\nimport org.w3c.dom.Element;\nimport org.w3c.dom.Node;\nimport org.w3c.dom.NodeList;\nimport org.xml.sax.SAXException;\nimport org.xml.sax.SAXParseException;\n\n\ntry {\n\n    DocumentBuilderFactory docBuilderFactory = DocumentBuilderFactory.newInstance();\n    DocumentBuilder docBuilder = docBuilderFactory.newDocumentBuilder();\n    Document doc = docBuilder.parse (new File(\"c:\\\\tmp\\\\my.xml\"));\n\n    // normalize text representation\n    doc.getDocumentElement().normalize();\n    System.out.println (\"Root element of the doc is \" + doc.getDocumentElement().getNodeName());\n\n    NodeList listOfBooks = doc.getElementsByTagName(\"book\");\n    int totalBooks = listOfBooks.getLength();\n    System.out.println(\"Total no of books : \" + totalBooks);\n\n    for(int i=0; i&lt;listOfBooks.getLength() ; i++) {\n\n        Node firstBookNode = listOfBooks.item(i);\n        if(firstBookNode.getNodeType() == Node.ELEMENT_NODE) {\n\n            Element firstElement = (Element)firstBookNode;                              \n            System.out.println(\"Year :\"+firstElement.getAttribute(\"year\"));\n\n            //-------\n            NodeList firstNameList = firstElement.getElementsByTagName(\"title\");\n            Element firstNameElement = (Element)firstNameList.item(0);\n\n            NodeList textFNList = firstNameElement.getChildNodes();\n            System.out.println(\"title : \" + ((Node)textFNList.item(0)).getNodeValue().trim());\n        }\n    }//end of for loop with s var\n} catch (SAXParseException err) {\n    System.out.println (\"** Parsing error\" + \", line \" + err.getLineNumber () + \", uri \" + err.getSystemId ());\n    System.out.println(\" \" + err.getMessage ());\n} catch (SAXException e) {\n    Exception x = e.getException ();\n    ((x == null) ? e : x).printStackTrace ();\n} catch (Throwable t) {\n    t.printStackTrace ();\n}                \n</code></pre>\n"},{"tags":[],"owner":{"account_id":1090698,"reputation":1009,"user_id":1085396,"accept_rate":65,"display_name":"RizN81"},"down_vote_count":0,"up_vote_count":35,"is_accepted":false,"score":35,"last_activity_date":1409264827,"creation_date":1406119744,"answer_id":24910935,"question_id":2811001,"body_markdown":"You can try this.\r\n\r\n## XML Document\r\n\r\nSave as `employees.xml`.\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;Employees&gt;\r\n        &lt;Employee id=&quot;1&quot;&gt;\r\n            &lt;age&gt;29&lt;/age&gt;\r\n            &lt;name&gt;Pankaj&lt;/name&gt;\r\n            &lt;gender&gt;Male&lt;/gender&gt;\r\n            &lt;role&gt;Java Developer&lt;/role&gt;\r\n        &lt;/Employee&gt;\r\n        &lt;Employee id=&quot;2&quot;&gt;\r\n            &lt;age&gt;35&lt;/age&gt;\r\n            &lt;name&gt;Lisa&lt;/name&gt;\r\n            &lt;gender&gt;Female&lt;/gender&gt;\r\n            &lt;role&gt;CEO&lt;/role&gt;\r\n        &lt;/Employee&gt;\r\n        &lt;Employee id=&quot;3&quot;&gt;\r\n            &lt;age&gt;40&lt;/age&gt;\r\n            &lt;name&gt;Tom&lt;/name&gt;\r\n            &lt;gender&gt;Male&lt;/gender&gt;\r\n            &lt;role&gt;Manager&lt;/role&gt;\r\n        &lt;/Employee&gt;\r\n        &lt;Employee id=&quot;4&quot;&gt;\r\n            &lt;age&gt;25&lt;/age&gt;\r\n            &lt;name&gt;Meghan&lt;/name&gt;\r\n            &lt;gender&gt;Female&lt;/gender&gt;\r\n            &lt;role&gt;Manager&lt;/role&gt;\r\n        &lt;/Employee&gt;\r\n    &lt;/Employees&gt;\r\n\r\n## Parser class\r\n\r\nThe class have following methods  \r\n\r\n - List item\r\n - A Method that will return the Employee Name for input ID.\r\n - A Method that will return list of Employees Name with age greater than the input age.\r\n - A Method that will return list of Female Employees Name.\r\n\r\n## Source Code\r\n\r\n    import java.io.IOException;\r\n    import java.util.ArrayList;\r\n    import java.util.Arrays;\r\n    import java.util.List;\r\n     \r\n    import javax.xml.parsers.DocumentBuilder;\r\n    import javax.xml.parsers.DocumentBuilderFactory;\r\n    import javax.xml.parsers.ParserConfigurationException;\r\n    import javax.xml.xpath.XPath;\r\n    import javax.xml.xpath.XPathConstants;\r\n    import javax.xml.xpath.XPathExpression;\r\n    import javax.xml.xpath.XPathExpressionException;\r\n    import javax.xml.xpath.XPathFactory;\r\n     \r\n    import org.w3c.dom.Document;\r\n    import org.w3c.dom.NodeList;\r\n    import org.xml.sax.SAXException;\r\n     \r\n     \r\n    public class Parser {\r\n     \r\n        public static void main(String[] args) {\r\n            DocumentBuilderFactory factory = DocumentBuilderFactory.newInstance();\r\n            factory.setNamespaceAware(true);\r\n            DocumentBuilder builder;\r\n            Document doc = null;\r\n            try {\r\n                builder = factory.newDocumentBuilder();\r\n                doc = builder.parse(&quot;employees.xml&quot;);\r\n     \r\n                // Create XPathFactory object\r\n                XPathFactory xpathFactory = XPathFactory.newInstance();\r\n     \r\n                // Create XPath object\r\n                XPath xpath = xpathFactory.newXPath();\r\n     \r\n                String name = getEmployeeNameById(doc, xpath, 4);\r\n                System.out.println(&quot;Employee Name with ID 4: &quot; + name);\r\n     \r\n                List&lt;String&gt; names = getEmployeeNameWithAge(doc, xpath, 30);\r\n                System.out.println(&quot;Employees with &#39;age&gt;30&#39; are:&quot; + Arrays.toString(names.toArray()));\r\n     \r\n                List&lt;String&gt; femaleEmps = getFemaleEmployeesName(doc, xpath);\r\n                System.out.println(&quot;Female Employees names are:&quot; +\r\n                        Arrays.toString(femaleEmps.toArray()));\r\n     \r\n            } catch (ParserConfigurationException | SAXException | IOException e) {\r\n                e.printStackTrace();\r\n            }\r\n     \r\n        }\r\n     \r\n     \r\n        private static List&lt;String&gt; getFemaleEmployeesName(Document doc, XPath xpath) {\r\n            List&lt;String&gt; list = new ArrayList&lt;&gt;();\r\n            try {\r\n                //create XPathExpression object\r\n                XPathExpression expr =\r\n                    xpath.compile(&quot;/Employees/Employee[gender=&#39;Female&#39;]/name/text()&quot;);\r\n                //evaluate expression result on XML document\r\n                NodeList nodes = (NodeList) expr.evaluate(doc, XPathConstants.NODESET);\r\n                for (int i = 0; i &lt; nodes.getLength(); i++)\r\n                    list.add(nodes.item(i).getNodeValue());\r\n            } catch (XPathExpressionException e) {\r\n                e.printStackTrace();\r\n            }\r\n            return list;\r\n        }\r\n     \r\n     \r\n        private static List&lt;String&gt; getEmployeeNameWithAge(Document doc, XPath xpath, int age) {\r\n            List&lt;String&gt; list = new ArrayList&lt;&gt;();\r\n            try {\r\n                XPathExpression expr =\r\n                    xpath.compile(&quot;/Employees/Employee[age&gt;&quot; + age + &quot;]/name/text()&quot;);\r\n                NodeList nodes = (NodeList) expr.evaluate(doc, XPathConstants.NODESET);\r\n                for (int i = 0; i &lt; nodes.getLength(); i++)\r\n                    list.add(nodes.item(i).getNodeValue());\r\n            } catch (XPathExpressionException e) {\r\n                e.printStackTrace();\r\n            }\r\n            return list;\r\n        }\r\n     \r\n     \r\n        private static String getEmployeeNameById(Document doc, XPath xpath, int id) {\r\n            String name = null;\r\n            try {\r\n                XPathExpression expr =\r\n                    xpath.compile(&quot;/Employees/Employee[@id=&#39;&quot; + id + &quot;&#39;]/name/text()&quot;);\r\n                name = (String) expr.evaluate(doc, XPathConstants.STRING);\r\n            } catch (XPathExpressionException e) {\r\n                e.printStackTrace();\r\n            }\r\n     \r\n            return name;\r\n        }\r\n     \r\n    }","title":"How to read XML using XPath in Java","body":"<p>You can try this.</p>\n\n<h2>XML Document</h2>\n\n<p>Save as <code>employees.xml</code>.</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;Employees&gt;\n    &lt;Employee id=\"1\"&gt;\n        &lt;age&gt;29&lt;/age&gt;\n        &lt;name&gt;Pankaj&lt;/name&gt;\n        &lt;gender&gt;Male&lt;/gender&gt;\n        &lt;role&gt;Java Developer&lt;/role&gt;\n    &lt;/Employee&gt;\n    &lt;Employee id=\"2\"&gt;\n        &lt;age&gt;35&lt;/age&gt;\n        &lt;name&gt;Lisa&lt;/name&gt;\n        &lt;gender&gt;Female&lt;/gender&gt;\n        &lt;role&gt;CEO&lt;/role&gt;\n    &lt;/Employee&gt;\n    &lt;Employee id=\"3\"&gt;\n        &lt;age&gt;40&lt;/age&gt;\n        &lt;name&gt;Tom&lt;/name&gt;\n        &lt;gender&gt;Male&lt;/gender&gt;\n        &lt;role&gt;Manager&lt;/role&gt;\n    &lt;/Employee&gt;\n    &lt;Employee id=\"4\"&gt;\n        &lt;age&gt;25&lt;/age&gt;\n        &lt;name&gt;Meghan&lt;/name&gt;\n        &lt;gender&gt;Female&lt;/gender&gt;\n        &lt;role&gt;Manager&lt;/role&gt;\n    &lt;/Employee&gt;\n&lt;/Employees&gt;\n</code></pre>\n\n<h2>Parser class</h2>\n\n<p>The class have following methods  </p>\n\n<ul>\n<li>List item</li>\n<li>A Method that will return the Employee Name for input ID.</li>\n<li>A Method that will return list of Employees Name with age greater than the input age.</li>\n<li>A Method that will return list of Female Employees Name.</li>\n</ul>\n\n<h2>Source Code</h2>\n\n<pre><code>import java.io.IOException;\nimport java.util.ArrayList;\nimport java.util.Arrays;\nimport java.util.List;\n\nimport javax.xml.parsers.DocumentBuilder;\nimport javax.xml.parsers.DocumentBuilderFactory;\nimport javax.xml.parsers.ParserConfigurationException;\nimport javax.xml.xpath.XPath;\nimport javax.xml.xpath.XPathConstants;\nimport javax.xml.xpath.XPathExpression;\nimport javax.xml.xpath.XPathExpressionException;\nimport javax.xml.xpath.XPathFactory;\n\nimport org.w3c.dom.Document;\nimport org.w3c.dom.NodeList;\nimport org.xml.sax.SAXException;\n\n\npublic class Parser {\n\n    public static void main(String[] args) {\n        DocumentBuilderFactory factory = DocumentBuilderFactory.newInstance();\n        factory.setNamespaceAware(true);\n        DocumentBuilder builder;\n        Document doc = null;\n        try {\n            builder = factory.newDocumentBuilder();\n            doc = builder.parse(\"employees.xml\");\n\n            // Create XPathFactory object\n            XPathFactory xpathFactory = XPathFactory.newInstance();\n\n            // Create XPath object\n            XPath xpath = xpathFactory.newXPath();\n\n            String name = getEmployeeNameById(doc, xpath, 4);\n            System.out.println(\"Employee Name with ID 4: \" + name);\n\n            List&lt;String&gt; names = getEmployeeNameWithAge(doc, xpath, 30);\n            System.out.println(\"Employees with 'age&gt;30' are:\" + Arrays.toString(names.toArray()));\n\n            List&lt;String&gt; femaleEmps = getFemaleEmployeesName(doc, xpath);\n            System.out.println(\"Female Employees names are:\" +\n                    Arrays.toString(femaleEmps.toArray()));\n\n        } catch (ParserConfigurationException | SAXException | IOException e) {\n            e.printStackTrace();\n        }\n\n    }\n\n\n    private static List&lt;String&gt; getFemaleEmployeesName(Document doc, XPath xpath) {\n        List&lt;String&gt; list = new ArrayList&lt;&gt;();\n        try {\n            //create XPathExpression object\n            XPathExpression expr =\n                xpath.compile(\"/Employees/Employee[gender='Female']/name/text()\");\n            //evaluate expression result on XML document\n            NodeList nodes = (NodeList) expr.evaluate(doc, XPathConstants.NODESET);\n            for (int i = 0; i &lt; nodes.getLength(); i++)\n                list.add(nodes.item(i).getNodeValue());\n        } catch (XPathExpressionException e) {\n            e.printStackTrace();\n        }\n        return list;\n    }\n\n\n    private static List&lt;String&gt; getEmployeeNameWithAge(Document doc, XPath xpath, int age) {\n        List&lt;String&gt; list = new ArrayList&lt;&gt;();\n        try {\n            XPathExpression expr =\n                xpath.compile(\"/Employees/Employee[age&gt;\" + age + \"]/name/text()\");\n            NodeList nodes = (NodeList) expr.evaluate(doc, XPathConstants.NODESET);\n            for (int i = 0; i &lt; nodes.getLength(); i++)\n                list.add(nodes.item(i).getNodeValue());\n        } catch (XPathExpressionException e) {\n            e.printStackTrace();\n        }\n        return list;\n    }\n\n\n    private static String getEmployeeNameById(Document doc, XPath xpath, int id) {\n        String name = null;\n        try {\n            XPathExpression expr =\n                xpath.compile(\"/Employees/Employee[@id='\" + id + \"']/name/text()\");\n            name = (String) expr.evaluate(doc, XPathConstants.STRING);\n        } catch (XPathExpressionException e) {\n            e.printStackTrace();\n        }\n\n        return name;\n    }\n\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":44242,"reputation":3329,"user_id":129732,"accept_rate":100,"display_name":"vtd-xml-author"},"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1487016464,"creation_date":1459374418,"answer_id":36320331,"question_id":2811001,"body_markdown":"Here is an example of processing xpath with [vtd-xml][1]... for heavy duty XML processing it is second to none. here is the a recent paper on this subject [Processing XML with Java – A Performance Benchmark][2] \r\n\r\n\r\n    import com.ximpleware.*;\r\n    \r\n    public class changeAttrVal {\r\n    \tpublic  static  void main(String s[]) throws VTDException,java.io.UnsupportedEncodingException,java.io.IOException{\r\n    \t\tVTDGen vg = new VTDGen();\r\n    \t\tif (!vg.parseFile(&quot;input.xml&quot;, false))\r\n    \t\t\treturn;\r\n    \t\tVTDNav vn = vg.getNav();\r\n    \t\tAutoPilot ap = new AutoPilot(vn);\r\n    \t\tXMLModifier xm = new XMLModifier(vn);\r\n    \t\tap.selectXPath(&quot;/*/place[@id=\\&quot;p14\\&quot; and   @initialMarking=\\&quot;2\\&quot;]/@initialMarking&quot;);\r\n    \t\tint i=0;\r\n    \t\twhile((i=ap.evalXPath())!=-1){\r\n    \t\t\txm.updateToken(i+1, &quot;499&quot;);// change initial marking from 2 to 499\r\n    \t\t}\r\n    \t\txm.output(&quot;new.xml&quot;);\r\n    \t}\r\n    \r\n    }\r\n\r\n\r\n  [1]: http://vtd-xml.sf.net\r\n  [2]: https://recipp.ipp.pt/bitstream/10400.22/1847/1/ART_BrunoOliveira_2013.pdf\r\n","title":"How to read XML using XPath in Java","body":"<p>Here is an example of processing xpath with <a href=\"http://vtd-xml.sf.net\" rel=\"nofollow noreferrer\">vtd-xml</a>... for heavy duty XML processing it is second to none. here is the a recent paper on this subject <a href=\"https://recipp.ipp.pt/bitstream/10400.22/1847/1/ART_BrunoOliveira_2013.pdf\" rel=\"nofollow noreferrer\">Processing XML with Java – A Performance Benchmark</a> </p>\n\n<pre><code>import com.ximpleware.*;\n\npublic class changeAttrVal {\n    public  static  void main(String s[]) throws VTDException,java.io.UnsupportedEncodingException,java.io.IOException{\n        VTDGen vg = new VTDGen();\n        if (!vg.parseFile(\"input.xml\", false))\n            return;\n        VTDNav vn = vg.getNav();\n        AutoPilot ap = new AutoPilot(vn);\n        XMLModifier xm = new XMLModifier(vn);\n        ap.selectXPath(\"/*/place[@id=\\\"p14\\\" and   @initialMarking=\\\"2\\\"]/@initialMarking\");\n        int i=0;\n        while((i=ap.evalXPath())!=-1){\n            xm.updateToken(i+1, \"499\");// change initial marking from 2 to 499\n        }\n        xm.output(\"new.xml\");\n    }\n\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":408701,"reputation":2491,"user_id":779521,"display_name":"Sverrir Sigmundarson"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1507103033,"creation_date":1507103033,"answer_id":46559553,"question_id":2811001,"body_markdown":"Expanding on the excellent answer by @bluish and @Yishai, here is how you make the NodeLists and node attributes support iterators, i.e. the `for(Node n: nodelist)` interface.\r\n\r\nUse it like:\r\n\r\n    NodeList nl = ...\r\n    for(Node n : XmlUtil.asList(nl))\r\n    {...}\r\nand\r\n\r\n    Node n = ...\r\n    for(Node attr : XmlUtil.asList(n.getAttributes())\r\n    {...}\r\n\r\nThe code:\r\n\r\n    /**\r\n     * Converts NodeList to an iterable construct.\r\n     * From: https://stackoverflow.com/a/19591302/779521\r\n     */\r\n    public final class XmlUtil {\r\n        private XmlUtil() {}\r\n    \r\n        public static List&lt;Node&gt; asList(NodeList n) {\r\n            return n.getLength() == 0 ? Collections.&lt;Node&gt;emptyList() : new NodeListWrapper(n);\r\n        }\r\n    \r\n        static final class NodeListWrapper extends AbstractList&lt;Node&gt; implements RandomAccess {\r\n            private final NodeList list;\r\n    \r\n            NodeListWrapper(NodeList l) {\r\n                this.list = l;\r\n            }\r\n    \r\n            public Node get(int index) {\r\n                return this.list.item(index);\r\n            }\r\n    \r\n            public int size() {\r\n                return this.list.getLength();\r\n            }\r\n        }\r\n    \r\n        public static List&lt;Node&gt; asList(NamedNodeMap n) {\r\n            return n.getLength() == 0 ? Collections.&lt;Node&gt;emptyList() : new NodeMapWrapper(n);\r\n        }\r\n    \r\n        static final class NodeMapWrapper extends AbstractList&lt;Node&gt; implements RandomAccess {\r\n            private final NamedNodeMap list;\r\n    \r\n            NodeMapWrapper(NamedNodeMap l) {\r\n                this.list = l;\r\n            }\r\n    \r\n            public Node get(int index) {\r\n                return this.list.item(index);\r\n            }\r\n    \r\n            public int size() {\r\n                return this.list.getLength();\r\n            }\r\n        }\r\n    }","title":"How to read XML using XPath in Java","body":"<p>Expanding on the excellent answer by @bluish and @Yishai, here is how you make the NodeLists and node attributes support iterators, i.e. the <code>for(Node n: nodelist)</code> interface.</p>\n\n<p>Use it like:</p>\n\n<pre><code>NodeList nl = ...\nfor(Node n : XmlUtil.asList(nl))\n{...}\n</code></pre>\n\n<p>and</p>\n\n<pre><code>Node n = ...\nfor(Node attr : XmlUtil.asList(n.getAttributes())\n{...}\n</code></pre>\n\n<p>The code:</p>\n\n<pre><code>/**\n * Converts NodeList to an iterable construct.\n * From: https://stackoverflow.com/a/19591302/779521\n */\npublic final class XmlUtil {\n    private XmlUtil() {}\n\n    public static List&lt;Node&gt; asList(NodeList n) {\n        return n.getLength() == 0 ? Collections.&lt;Node&gt;emptyList() : new NodeListWrapper(n);\n    }\n\n    static final class NodeListWrapper extends AbstractList&lt;Node&gt; implements RandomAccess {\n        private final NodeList list;\n\n        NodeListWrapper(NodeList l) {\n            this.list = l;\n        }\n\n        public Node get(int index) {\n            return this.list.item(index);\n        }\n\n        public int size() {\n            return this.list.getLength();\n        }\n    }\n\n    public static List&lt;Node&gt; asList(NamedNodeMap n) {\n        return n.getLength() == 0 ? Collections.&lt;Node&gt;emptyList() : new NodeMapWrapper(n);\n    }\n\n    static final class NodeMapWrapper extends AbstractList&lt;Node&gt; implements RandomAccess {\n        private final NamedNodeMap list;\n\n        NodeMapWrapper(NamedNodeMap l) {\n            this.list = l;\n        }\n\n        public Node get(int index) {\n            return this.list.item(index);\n        }\n\n        public int size() {\n            return this.list.getLength();\n        }\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6575754,"reputation":9298,"user_id":5081877,"accept_rate":92,"display_name":"Yash"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1510666866,"creation_date":1510646194,"answer_id":47280397,"question_id":2811001,"body_markdown":"Read XML file using XPathFactory, [`SAXParserFactory`](https://stackoverflow.com/a/12271247/5081877)  and [`StAX (JSR-173)`](https://stackoverflow.com/a/12273296/5081877).\r\n\r\nUsing XPath get node and its child data.\r\n\r\n    public static void main(String[] args) {\r\n\t\tString xml = &quot;&lt;soapenv:Body xmlns:soapenv=&#39;http://schemas.xmlsoap.org/soap/envelope/&#39;&gt;&quot;\r\n\t\t\t\t+ &quot;&lt;Yash:Data xmlns:Yash=&#39;http://Yash.stackoverflow.com/Services/Yash&#39;&gt;&quot;\r\n\t\t\t\t+ &quot;&lt;Yash:Tags&gt;Java&lt;/Yash:Tags&gt;&lt;Yash:Tags&gt;Javascript&lt;/Yash:Tags&gt;&lt;Yash:Tags&gt;Selenium&lt;/Yash:Tags&gt;&quot;\r\n\t\t\t\t+ &quot;&lt;Yash:Top&gt;javascript&lt;/Yash:Top&gt;&lt;Yash:User&gt;Yash-777&lt;/Yash:User&gt;&quot;\r\n\t\t\t\t+ &quot;&lt;/Yash:Data&gt;&lt;/soapenv:Body&gt;&quot;;\r\n\t\tString jsonNameSpaces = &quot;{&#39;soapenv&#39;:&#39;http://schemas.xmlsoap.org/soap/envelope/&#39;,&quot;\r\n\t\t\t\t+ &quot;&#39;Yash&#39;:&#39;http://Yash.stackoverflow.com/Services/Yash&#39;}&quot;;\r\n\t\tString xpathExpression = &quot;//Yash:Data&quot;;\r\n\t\t\r\n\t\tDocument doc1 = getDocument(false, &quot;fileName&quot;, xml);\r\n\t\tgetNodesFromXpath(doc1, xpathExpression, jsonNameSpaces);\r\n\t\tSystem.out.println(&quot;\\n===== ***** =====&quot;);\r\n\t\tDocument doc2 = getDocument(true, &quot;./books.xml&quot;, xml);\r\n\t\tgetNodesFromXpath(doc2, &quot;//person&quot;, &quot;{}&quot;);\r\n\t}\r\n\tstatic Document getDocument( boolean isFileName, String fileName, String xml ) {\r\n\t\tDocument doc = null;\r\n\t\ttry {\r\n\t\t\t\r\n\t\t\tDocumentBuilderFactory factory = DocumentBuilderFactory.newInstance();\r\n\t\t\tfactory.setValidating(false);\r\n\t\t\tfactory.setNamespaceAware(true);\r\n\t\t\tfactory.setIgnoringComments(true);\r\n\t\t\tfactory.setIgnoringElementContentWhitespace(true);\r\n\t\t\t\r\n\t\t\tDocumentBuilder builder = factory.newDocumentBuilder();\r\n\t\t\tif( isFileName ) {\r\n\t\t\t\tFile file = new File( fileName );\r\n\t\t\t\tFileInputStream stream = new FileInputStream( file );\r\n\t\t\t\tdoc = builder.parse( stream );\r\n\t\t\t} else {\r\n\t\t\t\tdoc = builder.parse( string2Source( xml ) );\r\n\t\t\t}\r\n\t\t} catch (SAXException | IOException e) {\r\n\t\t\te.printStackTrace();\r\n\t\t} catch (ParserConfigurationException e) {\r\n\t\t\te.printStackTrace();\r\n\t\t}\r\n\t\treturn doc;\r\n\t}\r\n\t\r\n\t/**\r\n\t * ELEMENT_NODE[1],ATTRIBUTE_NODE[2],TEXT_NODE[3],CDATA_SECTION_NODE[4],\r\n\t * ENTITY_REFERENCE_NODE[5],ENTITY_NODE[6],PROCESSING_INSTRUCTION_NODE[7],\r\n\t * COMMENT_NODE[8],DOCUMENT_NODE[9],DOCUMENT_TYPE_NODE[10],DOCUMENT_FRAGMENT_NODE[11],NOTATION_NODE[12]\r\n\t */\r\n\tpublic static void getNodesFromXpath( Document doc, String xpathExpression, String jsonNameSpaces ) {\r\n\t\ttry {\r\n\t\t\tXPathFactory xpf = XPathFactory.newInstance();\r\n\t\t\tXPath xpath = xpf.newXPath();\r\n\t\t\t\r\n\t\t\tJSONObject namespaces = getJSONObjectNameSpaces(jsonNameSpaces);\r\n\t\t\tif ( namespaces.size() &gt; 0 ) {\r\n\t\t\t\tNamespaceContextImpl nsContext = new NamespaceContextImpl();\r\n\t\t\t\r\n\t\t\t\tIterator&lt;?&gt; key = namespaces.keySet().iterator();\r\n\t\t\t\twhile (key.hasNext()) { // Apache WebServices Common Utilities\r\n\t\t\t\t\tString pPrefix = key.next().toString();\r\n\t\t\t\t\tString pURI = namespaces.get(pPrefix).toString();\r\n\t\t\t\t\tnsContext.startPrefixMapping(pPrefix, pURI);\r\n\t\t\t\t}\r\n\t\t\t\txpath.setNamespaceContext(nsContext );\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tXPathExpression compile = xpath.compile(xpathExpression);\r\n\t\t\tNodeList nodeList =\t(NodeList) compile.evaluate(doc, XPathConstants.NODESET);\r\n\t\t\tdisplayNodeList(nodeList);\r\n\t\t} catch (XPathExpressionException e) {\r\n\t\t\te.printStackTrace();\r\n\t\t}\r\n\t}\r\n\t\t\r\n\tstatic void displayNodeList( NodeList nodeList ) {\r\n\t\tfor (int i = 0; i &lt; nodeList.getLength(); i++) {\r\n\t\t\tNode node = nodeList.item(i);\r\n\t\t\tString NodeName = node.getNodeName();\r\n\t\t\t\r\n\t\t\tNodeList childNodes = node.getChildNodes();\r\n\t\t\tif ( childNodes.getLength() &gt; 1 ) {\r\n\t\t\t\tfor (int j = 0; j &lt; childNodes.getLength(); j++) {\r\n\t\t\t\t\t\r\n\t\t\t\t\tNode child = childNodes.item(j);\r\n\t\t\t\t\tshort nodeType = child.getNodeType();\r\n\t\t\t\t\tif ( nodeType == 1 ) {\r\n\t\t\t\t\t\tSystem.out.format( &quot;\\n\\t Node Name:[%s], Text[%s] &quot;, child.getNodeName(), child.getTextContent() );\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tSystem.out.format( &quot;\\n Node Name:[%s], Text[%s] &quot;, NodeName, node.getTextContent() );\r\n\t\t\t}\r\n\t\t\t\r\n\t\t}\r\n\t}\r\n\tstatic InputSource string2Source( String str ) {\r\n\t\tInputSource inputSource = new InputSource( new StringReader( str ) );\r\n\t\treturn inputSource;\r\n\t}\r\n\tstatic JSONObject getJSONObjectNameSpaces( String jsonNameSpaces ) {\r\n\t\tif(jsonNameSpaces.indexOf(&quot;&#39;&quot;) &gt; -1)    jsonNameSpaces = jsonNameSpaces.replace(&quot;&#39;&quot;, &quot;\\&quot;&quot;);\r\n\t\tJSONParser parser = new JSONParser();\r\n\t\tJSONObject namespaces = null;\r\n\t\ttry {\r\n\t\t\tnamespaces = (JSONObject) parser.parse(jsonNameSpaces);\r\n\t\t} catch (ParseException e) {\r\n\t\t\te.printStackTrace();\r\n\t\t}\r\n\t\treturn namespaces;\r\n\t}\r\n\r\nXML Document\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;book&gt;\r\n    &lt;person&gt;\r\n      &lt;first&gt;Yash&lt;/first&gt;\r\n      &lt;last&gt;M&lt;/last&gt;\r\n      &lt;age&gt;22&lt;/age&gt;\r\n    &lt;/person&gt;\r\n    &lt;person&gt;\r\n      &lt;first&gt;Bill&lt;/first&gt;\r\n      &lt;last&gt;Gates&lt;/last&gt;\r\n      &lt;age&gt;46&lt;/age&gt;\r\n    &lt;/person&gt;\r\n    &lt;person&gt;\r\n      &lt;first&gt;Steve&lt;/first&gt;\r\n      &lt;last&gt;Jobs&lt;/last&gt;\r\n      &lt;age&gt;40&lt;/age&gt;\r\n    &lt;/person&gt;\r\n    &lt;/book&gt;\r\n\r\nOut put for the given XPathExpression:\r\n\r\n    String xpathExpression = &quot;//person/first&quot;;\r\n    /*OutPut:\r\n     Node Name:[first], Text[Yash] \r\n     Node Name:[first], Text[Bill] \r\n     Node Name:[first], Text[Steve] */\r\n    \r\n    String xpathExpression = &quot;//person&quot;;\r\n    /*OutPut:\r\n    \t Node Name:[first], Text[Yash] \r\n    \t Node Name:[last], Text[M] \r\n    \t Node Name:[age], Text[22] \r\n    \t Node Name:[first], Text[Bill] \r\n    \t Node Name:[last], Text[Gates] \r\n    \t Node Name:[age], Text[46] \r\n    \t Node Name:[first], Text[Steve] \r\n    \t Node Name:[last], Text[Jobs] \r\n    \t Node Name:[age], Text[40] */\r\n    \r\n    String xpathExpression = &quot;//Yash:Data&quot;;\r\n\t/*OutPut:\r\n\t\t Node Name:[Yash:Tags], Text[Java] \r\n\t\t Node Name:[Yash:Tags], Text[Javascript] \r\n\t\t Node Name:[Yash:Tags], Text[Selenium] \r\n\t\t Node Name:[Yash:Top], Text[javascript] \r\n\t\t Node Name:[Yash:User], Text[Yash-777] */\r\n\r\n[See this link](https://stackoverflow.com/a/33516157/5081877)  for our own Implementation of `NamespaceContext`","title":"How to read XML using XPath in Java","body":"<p>Read XML file using XPathFactory, <a href=\"https://stackoverflow.com/a/12271247/5081877\"><code>SAXParserFactory</code></a>  and <a href=\"https://stackoverflow.com/a/12273296/5081877\"><code>StAX (JSR-173)</code></a>.</p>\n\n<p>Using XPath get node and its child data.</p>\n\n<pre><code>public static void main(String[] args) {\n    String xml = \"&lt;soapenv:Body xmlns:soapenv='http://schemas.xmlsoap.org/soap/envelope/'&gt;\"\n            + \"&lt;Yash:Data xmlns:Yash='http://Yash.stackoverflow.com/Services/Yash'&gt;\"\n            + \"&lt;Yash:Tags&gt;Java&lt;/Yash:Tags&gt;&lt;Yash:Tags&gt;Javascript&lt;/Yash:Tags&gt;&lt;Yash:Tags&gt;Selenium&lt;/Yash:Tags&gt;\"\n            + \"&lt;Yash:Top&gt;javascript&lt;/Yash:Top&gt;&lt;Yash:User&gt;Yash-777&lt;/Yash:User&gt;\"\n            + \"&lt;/Yash:Data&gt;&lt;/soapenv:Body&gt;\";\n    String jsonNameSpaces = \"{'soapenv':'http://schemas.xmlsoap.org/soap/envelope/',\"\n            + \"'Yash':'http://Yash.stackoverflow.com/Services/Yash'}\";\n    String xpathExpression = \"//Yash:Data\";\n\n    Document doc1 = getDocument(false, \"fileName\", xml);\n    getNodesFromXpath(doc1, xpathExpression, jsonNameSpaces);\n    System.out.println(\"\\n===== ***** =====\");\n    Document doc2 = getDocument(true, \"./books.xml\", xml);\n    getNodesFromXpath(doc2, \"//person\", \"{}\");\n}\nstatic Document getDocument( boolean isFileName, String fileName, String xml ) {\n    Document doc = null;\n    try {\n\n        DocumentBuilderFactory factory = DocumentBuilderFactory.newInstance();\n        factory.setValidating(false);\n        factory.setNamespaceAware(true);\n        factory.setIgnoringComments(true);\n        factory.setIgnoringElementContentWhitespace(true);\n\n        DocumentBuilder builder = factory.newDocumentBuilder();\n        if( isFileName ) {\n            File file = new File( fileName );\n            FileInputStream stream = new FileInputStream( file );\n            doc = builder.parse( stream );\n        } else {\n            doc = builder.parse( string2Source( xml ) );\n        }\n    } catch (SAXException | IOException e) {\n        e.printStackTrace();\n    } catch (ParserConfigurationException e) {\n        e.printStackTrace();\n    }\n    return doc;\n}\n\n/**\n * ELEMENT_NODE[1],ATTRIBUTE_NODE[2],TEXT_NODE[3],CDATA_SECTION_NODE[4],\n * ENTITY_REFERENCE_NODE[5],ENTITY_NODE[6],PROCESSING_INSTRUCTION_NODE[7],\n * COMMENT_NODE[8],DOCUMENT_NODE[9],DOCUMENT_TYPE_NODE[10],DOCUMENT_FRAGMENT_NODE[11],NOTATION_NODE[12]\n */\npublic static void getNodesFromXpath( Document doc, String xpathExpression, String jsonNameSpaces ) {\n    try {\n        XPathFactory xpf = XPathFactory.newInstance();\n        XPath xpath = xpf.newXPath();\n\n        JSONObject namespaces = getJSONObjectNameSpaces(jsonNameSpaces);\n        if ( namespaces.size() &gt; 0 ) {\n            NamespaceContextImpl nsContext = new NamespaceContextImpl();\n\n            Iterator&lt;?&gt; key = namespaces.keySet().iterator();\n            while (key.hasNext()) { // Apache WebServices Common Utilities\n                String pPrefix = key.next().toString();\n                String pURI = namespaces.get(pPrefix).toString();\n                nsContext.startPrefixMapping(pPrefix, pURI);\n            }\n            xpath.setNamespaceContext(nsContext );\n        }\n\n        XPathExpression compile = xpath.compile(xpathExpression);\n        NodeList nodeList = (NodeList) compile.evaluate(doc, XPathConstants.NODESET);\n        displayNodeList(nodeList);\n    } catch (XPathExpressionException e) {\n        e.printStackTrace();\n    }\n}\n\nstatic void displayNodeList( NodeList nodeList ) {\n    for (int i = 0; i &lt; nodeList.getLength(); i++) {\n        Node node = nodeList.item(i);\n        String NodeName = node.getNodeName();\n\n        NodeList childNodes = node.getChildNodes();\n        if ( childNodes.getLength() &gt; 1 ) {\n            for (int j = 0; j &lt; childNodes.getLength(); j++) {\n\n                Node child = childNodes.item(j);\n                short nodeType = child.getNodeType();\n                if ( nodeType == 1 ) {\n                    System.out.format( \"\\n\\t Node Name:[%s], Text[%s] \", child.getNodeName(), child.getTextContent() );\n                }\n            }\n        } else {\n            System.out.format( \"\\n Node Name:[%s], Text[%s] \", NodeName, node.getTextContent() );\n        }\n\n    }\n}\nstatic InputSource string2Source( String str ) {\n    InputSource inputSource = new InputSource( new StringReader( str ) );\n    return inputSource;\n}\nstatic JSONObject getJSONObjectNameSpaces( String jsonNameSpaces ) {\n    if(jsonNameSpaces.indexOf(\"'\") &gt; -1)    jsonNameSpaces = jsonNameSpaces.replace(\"'\", \"\\\"\");\n    JSONParser parser = new JSONParser();\n    JSONObject namespaces = null;\n    try {\n        namespaces = (JSONObject) parser.parse(jsonNameSpaces);\n    } catch (ParseException e) {\n        e.printStackTrace();\n    }\n    return namespaces;\n}\n</code></pre>\n\n<p>XML Document</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;book&gt;\n&lt;person&gt;\n  &lt;first&gt;Yash&lt;/first&gt;\n  &lt;last&gt;M&lt;/last&gt;\n  &lt;age&gt;22&lt;/age&gt;\n&lt;/person&gt;\n&lt;person&gt;\n  &lt;first&gt;Bill&lt;/first&gt;\n  &lt;last&gt;Gates&lt;/last&gt;\n  &lt;age&gt;46&lt;/age&gt;\n&lt;/person&gt;\n&lt;person&gt;\n  &lt;first&gt;Steve&lt;/first&gt;\n  &lt;last&gt;Jobs&lt;/last&gt;\n  &lt;age&gt;40&lt;/age&gt;\n&lt;/person&gt;\n&lt;/book&gt;\n</code></pre>\n\n<p>Out put for the given XPathExpression:</p>\n\n<pre><code>String xpathExpression = \"//person/first\";\n/*OutPut:\n Node Name:[first], Text[Yash] \n Node Name:[first], Text[Bill] \n Node Name:[first], Text[Steve] */\n\nString xpathExpression = \"//person\";\n/*OutPut:\n     Node Name:[first], Text[Yash] \n     Node Name:[last], Text[M] \n     Node Name:[age], Text[22] \n     Node Name:[first], Text[Bill] \n     Node Name:[last], Text[Gates] \n     Node Name:[age], Text[46] \n     Node Name:[first], Text[Steve] \n     Node Name:[last], Text[Jobs] \n     Node Name:[age], Text[40] */\n\nString xpathExpression = \"//Yash:Data\";\n/*OutPut:\n     Node Name:[Yash:Tags], Text[Java] \n     Node Name:[Yash:Tags], Text[Javascript] \n     Node Name:[Yash:Tags], Text[Selenium] \n     Node Name:[Yash:Top], Text[javascript] \n     Node Name:[Yash:User], Text[Yash-777] */\n</code></pre>\n\n<p><a href=\"https://stackoverflow.com/a/33516157/5081877\">See this link</a>  for our own Implementation of <code>NamespaceContext</code></p>\n"},{"tags":[],"owner":{"account_id":1605316,"reputation":8784,"user_id":1485527,"accept_rate":100,"display_name":"jschnasse"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1539162373,"creation_date":1539162373,"answer_id":52736526,"question_id":2811001,"body_markdown":"This shows you how to\r\n\r\n1. Read in an XML file to a `DOM`\r\n2. Filter out a set of `Nodes` with `XPath`\r\n3. Perform a certain action on each of the extracted  `Nodes`. \r\n\r\nWe will call the code with the following statement\r\n\r\n    processFilteredXml(xmlIn, xpathExpr,(node) -&gt; {/*Do something...*/;});\r\n\r\nIn our case we want to print some `creatorNames` from a `book.xml` using `&quot;//book/creators/creator/creatorName&quot;` as xpath to perform a `printNode` action on each Node that matches the `XPath`.\r\n\r\n**Full code**\r\n\r\n    @Test\r\n\tpublic void printXml() {\r\n\t\ttry (InputStream in = readFile(&quot;book.xml&quot;)) {\r\n\t\t\tprocessFilteredXml(in, &quot;//book/creators/creator/creatorName&quot;, (node) -&gt; {\r\n\t\t\t\tprintNode(node, System.out);\r\n\t\t\t});\r\n\t\t} catch (Exception e) {\r\n\t\t\tthrow new RuntimeException(e);\r\n\t\t}\r\n\t}\r\n\r\n\tprivate InputStream readFile(String yourSampleFile) {\r\n\t\treturn Thread.currentThread().getContextClassLoader().getResourceAsStream(yourSampleFile);\r\n\t}\r\n\r\n\tprivate void processFilteredXml(InputStream in, String xpath, Consumer&lt;Node&gt; process) {\r\n\t\tDocument doc = readXml(in);\r\n\t\tNodeList list = filterNodesByXPath(doc, xpath);\r\n\t\tfor (int i = 0; i &lt; list.getLength(); i++) {\r\n\t\t\tNode node = list.item(i);\r\n\t\t\tprocess.accept(node);\r\n\t\t}\r\n\t}\r\n\r\n\tpublic Document readXml(InputStream xmlin) {\r\n\t\ttry {\r\n\t\t\tDocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();\r\n\t\t\tDocumentBuilder db = dbf.newDocumentBuilder();\r\n\t\t\treturn db.parse(xmlin);\r\n\t\t} catch (Exception e) {\r\n\t\t\tthrow new RuntimeException(e);\r\n\t\t}\r\n\t}\r\n\r\n\tprivate NodeList filterNodesByXPath(Document doc, String xpathExpr) {\r\n\t\ttry {\r\n\t\t\tXPathFactory xPathFactory = XPathFactory.newInstance();\r\n\t\t\tXPath xpath = xPathFactory.newXPath();\r\n\t\t\tXPathExpression expr = xpath.compile(xpathExpr);\r\n\t\t\tObject eval = expr.evaluate(doc, XPathConstants.NODESET);\r\n\t\t\treturn (NodeList) eval;\r\n\t\t} catch (Exception e) {\r\n\t\t\tthrow new RuntimeException(e);\r\n\t\t}\r\n\t}\r\n\r\n\tprivate void printNode(Node node, PrintStream out) {\r\n\t\ttry {\r\n\t\t\tTransformer transformer = TransformerFactory.newInstance().newTransformer();\r\n\t\t\ttransformer.setOutputProperty(OutputKeys.INDENT, &quot;yes&quot;);\r\n\t\t\ttransformer.setOutputProperty(OutputKeys.OMIT_XML_DECLARATION, &quot;yes&quot;);\r\n\t\t\ttransformer.setOutputProperty(&quot;{http://xml.apache.org/xslt}indent-amount&quot;, &quot;2&quot;);\r\n\t\t\tStreamResult result = new StreamResult(new StringWriter());\r\n\t\t\tDOMSource source = new DOMSource(node);\r\n\t\t\ttransformer.transform(source, result);\r\n\t\t\tString xmlString = result.getWriter().toString();\r\n\t\t\tout.println(xmlString);\r\n\t\t} catch (Exception e) {\r\n\t\t\tthrow new RuntimeException(e);\r\n\t\t}\r\n\t}\r\n\r\n**Prints**\r\n\r\n    &lt;creatorName&gt;Fosmire, Michael&lt;/creatorName&gt;\r\n\r\n    &lt;creatorName&gt;Wertz, Ruth&lt;/creatorName&gt;\r\n\r\n    &lt;creatorName&gt;Purzer, Senay&lt;/creatorName&gt;\r\n\r\nFor `book.xml`\r\n\r\n    &lt;book&gt;\r\n      &lt;creators&gt;\r\n        &lt;creator&gt;\r\n          &lt;creatorName&gt;Fosmire, Michael&lt;/creatorName&gt;\r\n          &lt;givenName&gt;Michael&lt;/givenName&gt;\r\n          &lt;familyName&gt;Fosmire&lt;/familyName&gt;\r\n        &lt;/creator&gt;\r\n        &lt;creator&gt;\r\n          &lt;creatorName&gt;Wertz, Ruth&lt;/creatorName&gt;\r\n          &lt;givenName&gt;Ruth&lt;/givenName&gt;\r\n          &lt;familyName&gt;Wertz&lt;/familyName&gt;\r\n        &lt;/creator&gt;\r\n        &lt;creator&gt;\r\n          &lt;creatorName&gt;Purzer, Senay&lt;/creatorName&gt;\r\n           &lt;givenName&gt;Senay&lt;/givenName&gt;\r\n           &lt;familyName&gt;Purzer&lt;/familyName&gt;\r\n        &lt;/creator&gt;\r\n      &lt;/creators&gt;\r\n      &lt;titles&gt;\r\n        &lt;title&gt;Critical Engineering Literacy Test (CELT)&lt;/title&gt;\r\n      &lt;/titles&gt;\r\n    &lt;/book&gt;","title":"How to read XML using XPath in Java","body":"<p>This shows you how to</p>\n\n<ol>\n<li>Read in an XML file to a <code>DOM</code></li>\n<li>Filter out a set of <code>Nodes</code> with <code>XPath</code></li>\n<li>Perform a certain action on each of the extracted  <code>Nodes</code>. </li>\n</ol>\n\n<p>We will call the code with the following statement</p>\n\n<pre><code>processFilteredXml(xmlIn, xpathExpr,(node) -&gt; {/*Do something...*/;});\n</code></pre>\n\n<p>In our case we want to print some <code>creatorNames</code> from a <code>book.xml</code> using <code>\"//book/creators/creator/creatorName\"</code> as xpath to perform a <code>printNode</code> action on each Node that matches the <code>XPath</code>.</p>\n\n<p><strong>Full code</strong></p>\n\n<pre><code>@Test\npublic void printXml() {\n    try (InputStream in = readFile(\"book.xml\")) {\n        processFilteredXml(in, \"//book/creators/creator/creatorName\", (node) -&gt; {\n            printNode(node, System.out);\n        });\n    } catch (Exception e) {\n        throw new RuntimeException(e);\n    }\n}\n\nprivate InputStream readFile(String yourSampleFile) {\n    return Thread.currentThread().getContextClassLoader().getResourceAsStream(yourSampleFile);\n}\n\nprivate void processFilteredXml(InputStream in, String xpath, Consumer&lt;Node&gt; process) {\n    Document doc = readXml(in);\n    NodeList list = filterNodesByXPath(doc, xpath);\n    for (int i = 0; i &lt; list.getLength(); i++) {\n        Node node = list.item(i);\n        process.accept(node);\n    }\n}\n\npublic Document readXml(InputStream xmlin) {\n    try {\n        DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();\n        DocumentBuilder db = dbf.newDocumentBuilder();\n        return db.parse(xmlin);\n    } catch (Exception e) {\n        throw new RuntimeException(e);\n    }\n}\n\nprivate NodeList filterNodesByXPath(Document doc, String xpathExpr) {\n    try {\n        XPathFactory xPathFactory = XPathFactory.newInstance();\n        XPath xpath = xPathFactory.newXPath();\n        XPathExpression expr = xpath.compile(xpathExpr);\n        Object eval = expr.evaluate(doc, XPathConstants.NODESET);\n        return (NodeList) eval;\n    } catch (Exception e) {\n        throw new RuntimeException(e);\n    }\n}\n\nprivate void printNode(Node node, PrintStream out) {\n    try {\n        Transformer transformer = TransformerFactory.newInstance().newTransformer();\n        transformer.setOutputProperty(OutputKeys.INDENT, \"yes\");\n        transformer.setOutputProperty(OutputKeys.OMIT_XML_DECLARATION, \"yes\");\n        transformer.setOutputProperty(\"{http://xml.apache.org/xslt}indent-amount\", \"2\");\n        StreamResult result = new StreamResult(new StringWriter());\n        DOMSource source = new DOMSource(node);\n        transformer.transform(source, result);\n        String xmlString = result.getWriter().toString();\n        out.println(xmlString);\n    } catch (Exception e) {\n        throw new RuntimeException(e);\n    }\n}\n</code></pre>\n\n<p><strong>Prints</strong></p>\n\n<pre><code>&lt;creatorName&gt;Fosmire, Michael&lt;/creatorName&gt;\n\n&lt;creatorName&gt;Wertz, Ruth&lt;/creatorName&gt;\n\n&lt;creatorName&gt;Purzer, Senay&lt;/creatorName&gt;\n</code></pre>\n\n<p>For <code>book.xml</code></p>\n\n<pre><code>&lt;book&gt;\n  &lt;creators&gt;\n    &lt;creator&gt;\n      &lt;creatorName&gt;Fosmire, Michael&lt;/creatorName&gt;\n      &lt;givenName&gt;Michael&lt;/givenName&gt;\n      &lt;familyName&gt;Fosmire&lt;/familyName&gt;\n    &lt;/creator&gt;\n    &lt;creator&gt;\n      &lt;creatorName&gt;Wertz, Ruth&lt;/creatorName&gt;\n      &lt;givenName&gt;Ruth&lt;/givenName&gt;\n      &lt;familyName&gt;Wertz&lt;/familyName&gt;\n    &lt;/creator&gt;\n    &lt;creator&gt;\n      &lt;creatorName&gt;Purzer, Senay&lt;/creatorName&gt;\n       &lt;givenName&gt;Senay&lt;/givenName&gt;\n       &lt;familyName&gt;Purzer&lt;/familyName&gt;\n    &lt;/creator&gt;\n  &lt;/creators&gt;\n  &lt;titles&gt;\n    &lt;title&gt;Critical Engineering Literacy Test (CELT)&lt;/title&gt;\n  &lt;/titles&gt;\n&lt;/book&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4469374,"reputation":8528,"user_id":3636071,"accept_rate":100,"display_name":"Abhijit Bashetti"},"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1559199828,"creation_date":1559197438,"answer_id":56372764,"question_id":2811001,"body_markdown":"If you have a xml like below \r\n\r\n    &lt;e:Envelope\r\n        xmlns:d = &quot;http://www.w3.org/2001/XMLSchema&quot;\r\n        xmlns:e = &quot;http://schemas.xmlsoap.org/soap/envelope/&quot;\r\n        xmlns:wn0 = &quot;http://systinet.com/xsd/SchemaTypes/&quot;\r\n        xmlns:i = &quot;http://www.w3.org/2001/XMLSchema-instance&quot;&gt;\r\n        &lt;e:Header&gt;\r\n            &lt;Friends&gt;\r\n                &lt;friend&gt;\r\n                    &lt;Name&gt;Testabc&lt;/Name&gt;\r\n                    &lt;Age&gt;12121&lt;/Age&gt;\r\n                    &lt;Phone&gt;Testpqr&lt;/Phone&gt;\r\n                &lt;/friend&gt;\r\n            &lt;/Friends&gt;\r\n        &lt;/e:Header&gt;\r\n        &lt;e:Body&gt;\r\n            &lt;n0:ForAnsiHeaderOperResponse xmlns:n0 = &quot;http://systinet.com/wsdl/com/magicsoftware/ibolt/localhost/ForAnsiHeader/ForAnsiHeaderImpl#ForAnsiHeaderOper?KExqYXZhL2xhbmcvU3RyaW5nOylMamF2YS9sYW5nL1N0cmluZzs=&quot;&gt;\r\n                &lt;response i:type = &quot;d:string&quot;&gt;12--abc--pqr&lt;/response&gt;\r\n            &lt;/n0:ForAnsiHeaderOperResponse&gt;\r\n        &lt;/e:Body&gt;\r\n    &lt;/e:Envelope&gt;\r\n\r\nand wanted to extract the below xml \r\n\r\n    &lt;e:Header&gt;\r\n       &lt;Friends&gt;\r\n          &lt;friend&gt;\r\n             &lt;Name&gt;Testabc&lt;/Name&gt;\r\n             &lt;Age&gt;12121&lt;/Age&gt;\r\n             &lt;Phone&gt;Testpqr&lt;/Phone&gt;\r\n          &lt;/friend&gt;\r\n       &lt;/Friends&gt;\r\n    &lt;/e:Header&gt;\r\n\r\nThe below code helps to achieve the same \r\n\r\n    public static void main(String[] args) {\r\n\r\n\t\tFile fXmlFile = new File(&quot;C://Users//abhijitb//Desktop//Test.xml&quot;);\r\n\t\tDocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();\r\n\t\tDocument document;\r\n\t\tNode result = null;\r\n\t\ttry {\r\n\t\t\tdocument = dbf.newDocumentBuilder().parse(fXmlFile);\r\n\t\t\tXPath xPath = XPathFactory.newInstance().newXPath();\r\n\t\t\tString xpathStr = &quot;//Envelope//Header&quot;;\r\n\t\t\tresult = (Node) xPath.evaluate(xpathStr, document, XPathConstants.NODE);\r\n\t\t\tSystem.out.println(nodeToString(result));\r\n\t\t} catch (SAXException | IOException | ParserConfigurationException | XPathExpressionException\r\n\t\t\t\t| TransformerException e) {\r\n\t\t\te.printStackTrace();\r\n\t\t}\r\n\t}\r\n\r\n\tprivate static String nodeToString(Node node) throws TransformerException {\r\n\t\tStringWriter buf = new StringWriter();\r\n\t\tTransformer xform = TransformerFactory.newInstance().newTransformer();\r\n\t\txform.setOutputProperty(OutputKeys.OMIT_XML_DECLARATION, &quot;yes&quot;);\r\n\t\txform.transform(new DOMSource(node), new StreamResult(buf));\r\n\t\treturn (buf.toString());\r\n\t}\r\n\r\nNow if you want only the xml like below \r\n\r\n    &lt;Friends&gt;\r\n       &lt;friend&gt;\r\n          &lt;Name&gt;Testabc&lt;/Name&gt;\r\n          &lt;Age&gt;12121&lt;/Age&gt;\r\n          &lt;Phone&gt;Testpqr&lt;/Phone&gt;\r\n       &lt;/friend&gt;\r\n    &lt;/Friends&gt;\r\n\r\nYou need to change the \r\n\r\n`String xpathStr = &quot;//Envelope//Header&quot;;` to `String xpathStr = &quot;//Envelope//Header/*&quot;;`","title":"How to read XML using XPath in Java","body":"<p>If you have a xml like below </p>\n\n<pre><code>&lt;e:Envelope\n    xmlns:d = \"http://www.w3.org/2001/XMLSchema\"\n    xmlns:e = \"http://schemas.xmlsoap.org/soap/envelope/\"\n    xmlns:wn0 = \"http://systinet.com/xsd/SchemaTypes/\"\n    xmlns:i = \"http://www.w3.org/2001/XMLSchema-instance\"&gt;\n    &lt;e:Header&gt;\n        &lt;Friends&gt;\n            &lt;friend&gt;\n                &lt;Name&gt;Testabc&lt;/Name&gt;\n                &lt;Age&gt;12121&lt;/Age&gt;\n                &lt;Phone&gt;Testpqr&lt;/Phone&gt;\n            &lt;/friend&gt;\n        &lt;/Friends&gt;\n    &lt;/e:Header&gt;\n    &lt;e:Body&gt;\n        &lt;n0:ForAnsiHeaderOperResponse xmlns:n0 = \"http://systinet.com/wsdl/com/magicsoftware/ibolt/localhost/ForAnsiHeader/ForAnsiHeaderImpl#ForAnsiHeaderOper?KExqYXZhL2xhbmcvU3RyaW5nOylMamF2YS9sYW5nL1N0cmluZzs=\"&gt;\n            &lt;response i:type = \"d:string\"&gt;12--abc--pqr&lt;/response&gt;\n        &lt;/n0:ForAnsiHeaderOperResponse&gt;\n    &lt;/e:Body&gt;\n&lt;/e:Envelope&gt;\n</code></pre>\n\n<p>and wanted to extract the below xml </p>\n\n<pre><code>&lt;e:Header&gt;\n   &lt;Friends&gt;\n      &lt;friend&gt;\n         &lt;Name&gt;Testabc&lt;/Name&gt;\n         &lt;Age&gt;12121&lt;/Age&gt;\n         &lt;Phone&gt;Testpqr&lt;/Phone&gt;\n      &lt;/friend&gt;\n   &lt;/Friends&gt;\n&lt;/e:Header&gt;\n</code></pre>\n\n<p>The below code helps to achieve the same </p>\n\n<pre><code>public static void main(String[] args) {\n\n    File fXmlFile = new File(\"C://Users//abhijitb//Desktop//Test.xml\");\n    DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();\n    Document document;\n    Node result = null;\n    try {\n        document = dbf.newDocumentBuilder().parse(fXmlFile);\n        XPath xPath = XPathFactory.newInstance().newXPath();\n        String xpathStr = \"//Envelope//Header\";\n        result = (Node) xPath.evaluate(xpathStr, document, XPathConstants.NODE);\n        System.out.println(nodeToString(result));\n    } catch (SAXException | IOException | ParserConfigurationException | XPathExpressionException\n            | TransformerException e) {\n        e.printStackTrace();\n    }\n}\n\nprivate static String nodeToString(Node node) throws TransformerException {\n    StringWriter buf = new StringWriter();\n    Transformer xform = TransformerFactory.newInstance().newTransformer();\n    xform.setOutputProperty(OutputKeys.OMIT_XML_DECLARATION, \"yes\");\n    xform.transform(new DOMSource(node), new StreamResult(buf));\n    return (buf.toString());\n}\n</code></pre>\n\n<p>Now if you want only the xml like below </p>\n\n<pre><code>&lt;Friends&gt;\n   &lt;friend&gt;\n      &lt;Name&gt;Testabc&lt;/Name&gt;\n      &lt;Age&gt;12121&lt;/Age&gt;\n      &lt;Phone&gt;Testpqr&lt;/Phone&gt;\n   &lt;/friend&gt;\n&lt;/Friends&gt;\n</code></pre>\n\n<p>You need to change the </p>\n\n<p><code>String xpathStr = \"//Envelope//Header\";</code> to <code>String xpathStr = \"//Envelope//Header/*\";</code></p>\n"}],"owner":{"account_id":129745,"reputation":17240,"user_id":328518,"accept_rate":72,"display_name":"Adil Bhatty"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":486880,"favorite_count":0,"down_vote_count":1,"up_vote_count":296,"accepted_answer_id":2811101,"answer_count":8,"score":295,"last_activity_date":1699921835,"creation_date":1273584078,"question_id":2811001,"body_markdown":"I want to read XML data using XPath in Java, so for the information I have gathered I am not able to parse XML according to my requirement.\r\n\r\nhere is what I want to do:\r\n\r\n**Get XML file from online via its URL, then use XPath to parse it, I want to create two methods in it. One is in which I enter a specific node attribute id, and I get all the child nodes as result, and second is suppose I just want to get a specific child node value only**\r\n\r\n    &lt;?xml version=&quot;1.0&quot;?&gt;\r\n    &lt;howto&gt;\r\n      &lt;topic name=&quot;Java&quot;&gt;\r\n          &lt;url&gt;http://www.rgagnonjavahowto.htm&lt;/url&gt;\r\n      &lt;car&gt;taxi&lt;/car&gt;\r\n      &lt;/topic&gt;\r\n      &lt;topic name=&quot;PowerBuilder&quot;&gt;\r\n           &lt;url&gt;http://www.rgagnon/pbhowto.htm&lt;/url&gt;\r\n           &lt;url&gt;http://www.rgagnon/pbhowtonew.htm&lt;/url&gt;\r\n      &lt;/topic&gt;\r\n      &lt;topic name=&quot;Javascript&quot;&gt;\r\n            &lt;url&gt;http://www.rgagnon/jshowto.htm&lt;/url&gt;\r\n      &lt;/topic&gt;\r\n     &lt;topic name=&quot;VBScript&quot;&gt;\r\n           &lt;url&gt;http://www.rgagnon/vbshowto.htm&lt;/url&gt;\r\n     &lt;/topic&gt;\r\n     &lt;/howto&gt;\r\n\r\n\r\nIn above example I want to read all the elements if I search via @name and also one function in which I just want the url from @name &#39;Javascript&#39; only return one node element.","title":"How to read XML using XPath in Java","body":"<p>I want to read XML data using XPath in Java, so for the information I have gathered I am not able to parse XML according to my requirement.</p>\n\n<p>here is what I want to do:</p>\n\n<p><strong>Get XML file from online via its URL, then use XPath to parse it, I want to create two methods in it. One is in which I enter a specific node attribute id, and I get all the child nodes as result, and second is suppose I just want to get a specific child node value only</strong></p>\n\n<pre><code>&lt;?xml version=\"1.0\"?&gt;\n&lt;howto&gt;\n  &lt;topic name=\"Java\"&gt;\n      &lt;url&gt;http://www.rgagnonjavahowto.htm&lt;/url&gt;\n  &lt;car&gt;taxi&lt;/car&gt;\n  &lt;/topic&gt;\n  &lt;topic name=\"PowerBuilder\"&gt;\n       &lt;url&gt;http://www.rgagnon/pbhowto.htm&lt;/url&gt;\n       &lt;url&gt;http://www.rgagnon/pbhowtonew.htm&lt;/url&gt;\n  &lt;/topic&gt;\n  &lt;topic name=\"Javascript\"&gt;\n        &lt;url&gt;http://www.rgagnon/jshowto.htm&lt;/url&gt;\n  &lt;/topic&gt;\n &lt;topic name=\"VBScript\"&gt;\n       &lt;url&gt;http://www.rgagnon/vbshowto.htm&lt;/url&gt;\n &lt;/topic&gt;\n &lt;/howto&gt;\n</code></pre>\n\n<p>In above example I want to read all the elements if I search via @name and also one function in which I just want the url from @name 'Javascript' only return one node element.</p>\n"},{"tags":["java","eclipse","buildpath"],"comments":[{"owner":{"account_id":1547313,"reputation":82154,"user_id":1440565,"accept_rate":59,"display_name":"Code-Apprentice"},"score":0,"creation_date":1362265172,"post_id":15180411,"comment_id":21384226,"body_markdown":"@Kata Please explain how the link you give will answer the question.","body":"@Kata Please explain how the link you give will answer the question."},{"owner":{"account_id":434144,"reputation":19198,"user_id":819916,"accept_rate":81,"display_name":"AKIWEB"},"score":0,"creation_date":1362265282,"post_id":15180411,"comment_id":21384258,"body_markdown":"@Kata, I am confused on this line ` Fill in the Location path field depending on the location, choose between the workspace, an external file or external folder.\nClick OK. ` What location path I need to choose. Should I unzip the `Student.jar` folder then point to `Student folder`? Or something else. As I tried the above option, and I am still seeing the same behavior.","body":"@Kata, I am confused on this line ` Fill in the Location path field depending on the location, choose between the workspace, an external file or external folder. Click OK. ` What location path I need to choose. Should I unzip the <code>Student.jar</code> folder then point to <code>Student folder</code>? Or something else. As I tried the above option, and I am still seeing the same behavior."},{"owner":{"display_name":"user626607"},"score":0,"creation_date":1362265438,"post_id":15180411,"comment_id":21384294,"body_markdown":"@Nevzz03 I am sorry, I pasted the wrong link. Here is the right one: http://help.eclipse.org/indigo/index.jsp?topic=%2Forg.eclipse.jdt.doc.user%2Freference%2Fref-properties-source-attachment.htm","body":"@Nevzz03 I am sorry, I pasted the wrong link. Here is the right one: <a href=\"http://help.eclipse.org/indigo/index.jsp?topic=%2Forg.eclipse.jdt.doc.user%2Freference%2Fref-properties-source-attachment.htm\" rel=\"nofollow noreferrer\">help.eclipse.org/indigo/&hellip;</a>"},{"owner":{"account_id":434144,"reputation":19198,"user_id":819916,"accept_rate":81,"display_name":"AKIWEB"},"score":0,"creation_date":1362265732,"post_id":15180411,"comment_id":21384357,"body_markdown":"@Kata, see my previous comment.","body":"@Kata, see my previous comment."},{"owner":{"account_id":1547313,"reputation":82154,"user_id":1440565,"accept_rate":59,"display_name":"Code-Apprentice"},"score":0,"creation_date":1362266359,"post_id":15180411,"comment_id":21384503,"body_markdown":"@Nevzz03 You need to point to the location of the *source* files, not the compiled *class* files. If your JAR file contains .java files, then you should be able to point to it directly. Unless you explicitly added these yourself, I doubt this is the case, so unzipping the JAR file won&#39;t be helpful anyway.","body":"@Nevzz03 You need to point to the location of the <i>source</i> files, not the compiled <i>class</i> files. If your JAR file contains .java files, then you should be able to point to it directly. Unless you explicitly added these yourself, I doubt this is the case, so unzipping the JAR file won&#39;t be helpful anyway."},{"owner":{"account_id":396097,"reputation":19603,"user_id":759452,"accept_rate":56,"display_name":"Adriano"},"score":0,"creation_date":1381740099,"post_id":15180411,"comment_id":28679595,"body_markdown":"related http://stackoverflow.com/questions/8454590/jar-file-has-no-source-attachment-jar-file-includes-source-code","body":"related <a href=\"http://stackoverflow.com/questions/8454590/jar-file-has-no-source-attachment-jar-file-includes-source-code\" title=\"jar file has no source attachment jar file includes source code\">stackoverflow.com/questions/8454590/&hellip;</a>"},{"owner":{"account_id":396097,"reputation":19603,"user_id":759452,"accept_rate":56,"display_name":"Adriano"},"score":0,"creation_date":1381740572,"post_id":15180411,"comment_id":28679817,"body_markdown":"related http://stackoverflow.com/questions/370814/how-to-set-a-breakpoint-in-eclipse-in-a-third-party-library","body":"related <a href=\"http://stackoverflow.com/questions/370814/how-to-set-a-breakpoint-in-eclipse-in-a-third-party-library\" title=\"how to set a breakpoint in eclipse in a third party library\">stackoverflow.com/questions/370814/&hellip;</a>"},{"owner":{"account_id":3078593,"reputation":3398,"user_id":2607372,"accept_rate":87,"display_name":"vikramvi"},"score":0,"creation_date":1468492765,"post_id":15180411,"comment_id":64154503,"body_markdown":"@AdrienBe I followed instruction per your 1st link and Open declaration takes me to .class file instead of .java. Can you please clarify this scenario ?","body":"@AdrienBe I followed instruction per your 1st link and Open declaration takes me to .class file instead of .java. Can you please clarify this scenario ?"}],"answers":[{"tags":[],"owner":{"account_id":61566,"reputation":68924,"user_id":183406,"accept_rate":74,"display_name":"meriton"},"down_vote_count":3,"up_vote_count":19,"is_accepted":true,"score":16,"last_activity_date":1362265561,"creation_date":1362265561,"answer_id":15180476,"question_id":15180411,"body_markdown":"A .jar file usually only contains the .class files, not the .java files they were compiled from. That&#39;s why eclipse is telling you it doesn&#39;t know the source code of that class.\r\n\r\n&quot;Attaching&quot; the source to a JAR means telling eclipse where the source code can be found. Of course, if you don&#39;t know yourself, that feature is of little help. Of course, you could try googling for the source code (or check wherever you got the JAR file from).\r\n\r\nThat said, you don&#39;t necessarily need the source to debug.","title":"Attach the Source in Eclipse of a jar","body":"<p>A .jar file usually only contains the .class files, not the .java files they were compiled from. That's why eclipse is telling you it doesn't know the source code of that class.</p>\n\n<p>\"Attaching\" the source to a JAR means telling eclipse where the source code can be found. Of course, if you don't know yourself, that feature is of little help. Of course, you could try googling for the source code (or check wherever you got the JAR file from).</p>\n\n<p>That said, you don't necessarily need the source to debug.</p>\n"},{"tags":[],"owner":{"account_id":2198254,"reputation":3511,"user_id":1943380,"display_name":"Avinash Singh"},"down_vote_count":0,"up_vote_count":18,"is_accepted":false,"score":18,"last_activity_date":1362265721,"creation_date":1362265721,"answer_id":15180492,"question_id":15180411,"body_markdown":"Eclipse is showing no source found because there is no source available . Your jar only has the compiled classes.\r\n\r\nYou need to import the project from jar and add the Project as dependency .\r\n\r\nOther option is to go to the \r\n\r\nGo to Properties (for the Project) -&gt; Java Build Path -&gt; Libraries , select your jar file and click on the source , there will be option to attach the source and Javadocs.","title":"Attach the Source in Eclipse of a jar","body":"<p>Eclipse is showing no source found because there is no source available . Your jar only has the compiled classes.</p>\n\n<p>You need to import the project from jar and add the Project as dependency .</p>\n\n<p>Other option is to go to the </p>\n\n<p>Go to Properties (for the Project) -> Java Build Path -> Libraries , select your jar file and click on the source , there will be option to attach the source and Javadocs.</p>\n"},{"tags":[],"owner":{"account_id":1805025,"reputation":256,"user_id":1642332,"accept_rate":44,"display_name":"Kevin Bigler"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1362266439,"creation_date":1362265742,"answer_id":15180497,"question_id":15180411,"body_markdown":"Go back in to where you added the jar. I believe its the libraries tab, I don&#39;t have Eclipse open but that sounds right. to the left of the jar file you added there should be an arrow pointing right, click that and 3 or 4 options expand, one of them being the source file of the library. Click on that and click edit(I think you can also double click it) then locate the file or folder on your hard disk, you probably have to click apply or okay and you&#39;re good to go, same with javadoc and i think the last one is native libraries. I don&#39;t pay much attention when I&#39;m in there anymore if you couldn&#39;t tell. That&#39;s what you were asking, right?","title":"Attach the Source in Eclipse of a jar","body":"<p>Go back in to where you added the jar. I believe its the libraries tab, I don't have Eclipse open but that sounds right. to the left of the jar file you added there should be an arrow pointing right, click that and 3 or 4 options expand, one of them being the source file of the library. Click on that and click edit(I think you can also double click it) then locate the file or folder on your hard disk, you probably have to click apply or okay and you're good to go, same with javadoc and i think the last one is native libraries. I don't pay much attention when I'm in there anymore if you couldn't tell. That's what you were asking, right?</p>\n"},{"tags":[],"owner":{"account_id":1520684,"reputation":4045,"user_id":1420433,"accept_rate":98,"display_name":"oikonomopo"},"down_vote_count":0,"up_vote_count":39,"is_accepted":false,"score":39,"last_activity_date":1497517561,"creation_date":1414750450,"answer_id":26672169,"question_id":15180411,"body_markdown":"Use [Java Source Attacher](http://marketplace.eclipse.org/content/java-source-attacher) !\r\n\r\nIt does what eclipse should do - a right click context menu that says &quot;Attach Java Source.\r\n\r\n![enter image description here][1]\r\n\r\nIt automatically downloads the source for you and attaches it. I&#39;ve only hit a couple libraries it doesn&#39;t know about and when that happens it lets you contribute the url back to the community so no one else will have a problem with that library.\r\n\r\n\r\n  [1]: http://i.stack.imgur.com/uA7P8.png","title":"Attach the Source in Eclipse of a jar","body":"<p>Use <a href=\"http://marketplace.eclipse.org/content/java-source-attacher\" rel=\"noreferrer\">Java Source Attacher</a> !</p>\n\n<p>It does what eclipse should do - a right click context menu that says \"Attach Java Source.</p>\n\n<p><img src=\"https://i.stack.imgur.com/uA7P8.png\" alt=\"enter image description here\"></p>\n\n<p>It automatically downloads the source for you and attaches it. I've only hit a couple libraries it doesn't know about and when that happens it lets you contribute the url back to the community so no one else will have a problem with that library.</p>\n"},{"tags":[],"owner":{"account_id":2220682,"reputation":441,"user_id":1960111,"accept_rate":50,"display_name":"Everlight"},"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1432753345,"creation_date":1432753345,"answer_id":30491008,"question_id":15180411,"body_markdown":"This worked for me for Eclipse-Luna:\r\n\r\n1. Right Click on the *.jar in the Referenced Libraries folder under your project, then click on Properties\r\n2. Use the Java Source Attachment page to point to the Workspace location or the External location to the source code of that jar.","title":"Attach the Source in Eclipse of a jar","body":"<p>This worked for me for Eclipse-Luna:</p>\n\n<ol>\n<li>Right Click on the *.jar in the Referenced Libraries folder under your project, then click on Properties</li>\n<li>Use the Java Source Attachment page to point to the Workspace location or the External location to the source code of that jar.</li>\n</ol>\n"},{"tags":[],"owner":{"account_id":3563546,"reputation":796,"user_id":2975751,"accept_rate":10,"display_name":"ramesh027"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1443259443,"creation_date":1443259443,"answer_id":32795591,"question_id":15180411,"body_markdown":"I Know it is pretty late but it will be helpful for the other user, as we can do Job using three ways... as below&lt;br /&gt; 1)1. Atttach your source code using &lt;br/&gt; i.e, Right click on the project then properties --&gt; Java build path--&gt; attach your source in the source tab or you can remove jar file and attach the source in the libraries tab&lt;br/&gt;\r\n2. Using eclipse source Analyzer &lt;br/&gt;In the eclipse market you can download the plugin java source analyzer which is used to attach the open source jar file&#39;s source code. we can achieve it after installing the plugin, by right click on the open source jar and select the attach source option.&lt;br/&gt;\r\n3. Using Jadclipse in eclipse you can do it &lt;br/&gt;last not the least, you can achieve the decompile your code using this plugin. it is similar way you can download the plugin from the eclipse market place and install in your eclipse.\r\nin jadclipse view you can see your .class file to decomplile source format note here you cannot see the comment and hidden things&lt;br/&gt; &lt;br/&gt; I think in your scenario you can use the option one and option three, I prefer option three only if i want to the source code not for the debug the code. else i ll code the option 1, as i have the source already available with.","title":"Attach the Source in Eclipse of a jar","body":"<p>I Know it is pretty late but it will be helpful for the other user, as we can do Job using three ways... as below<br /> 1)1. Atttach your source code using <br/> i.e, Right click on the project then properties --> Java build path--> attach your source in the source tab or you can remove jar file and attach the source in the libraries tab<br/>\n2. Using eclipse source Analyzer <br/>In the eclipse market you can download the plugin java source analyzer which is used to attach the open source jar file's source code. we can achieve it after installing the plugin, by right click on the open source jar and select the attach source option.<br/>\n3. Using Jadclipse in eclipse you can do it <br/>last not the least, you can achieve the decompile your code using this plugin. it is similar way you can download the plugin from the eclipse market place and install in your eclipse.\nin jadclipse view you can see your .class file to decomplile source format note here you cannot see the comment and hidden things<br/> <br/> I think in your scenario you can use the option one and option three, I prefer option three only if i want to the source code not for the debug the code. else i ll code the option 1, as i have the source already available with.</p>\n"},{"tags":[],"owner":{"account_id":8583806,"reputation":11,"user_id":6430615,"display_name":"Adnan "},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1699921167,"creation_date":1465219122,"answer_id":37658575,"question_id":15180411,"body_markdown":"**Simply import the package of the required source class in your code from jar.**\r\n\r\nYou can find jar&#39;s sub packages in\r\n\r\n&gt; Eclipse -- YourProject --&gt; Referenced libraries --&gt; yourJars --&gt; Packages --&gt; Clases\r\n\r\nLike-- I was troubling with the `mysql connector jar` issue \r\n&quot;the source attachment does not contain the source&quot; \r\nby giving the path of source folder it display this statement\r\n\r\n&lt;!-- language: none --&gt;\r\n    The source attachment does not contain the source for the file StatementImpl.class\r\n\r\nThen I just import the package of `mysql connector jar` which contain the required class:\r\n\r\n    import com.mysql.jdbc.*;\r\n\r\nThen program is working fine.\r\n","title":"Attach the Source in Eclipse of a jar","body":"<p><strong>Simply import the package of the required source class in your code from jar.</strong></p>\n<p>You can find jar's sub packages in</p>\n<blockquote>\n<p>Eclipse -- YourProject --&gt; Referenced libraries --&gt; yourJars --&gt; Packages --&gt; Clases</p>\n</blockquote>\n<p>Like-- I was troubling with the <code>mysql connector jar</code> issue\n&quot;the source attachment does not contain the source&quot;\nby giving the path of source folder it display this statement</p>\n<pre class=\"lang-none prettyprint-override\"><code>The source attachment does not contain the source for the file StatementImpl.class\n</code></pre>\n<p>Then I just import the package of <code>mysql connector jar</code> which contain the required class:</p>\n<pre><code>import com.mysql.jdbc.*;\n</code></pre>\n<p>Then program is working fine.</p>\n"},{"tags":[],"owner":{"account_id":10059705,"reputation":11,"user_id":7436819,"display_name":"Anitha HR"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1489666823,"creation_date":1489666823,"answer_id":42833935,"question_id":15180411,"body_markdown":"I faced the same issue and solved using the below steps. Go to Windows-&gt;preferences-&gt;Editors-&gt;File Associations\r\n\r\nHere click on Add\r\nthen type .class\r\nclick on OK\r\n\r\nagain click on Add\r\nthen type .classwithoughtsource\r\nclick on OK\r\n\r\nNow you will be able to see JadClipse option under Java section in Windows-&gt;Preferences\r\n\r\nPlease provide the path of jad.exe file as shown below.\r\n\r\nPath for Decompiler-C:\\Users\\ahr\\Documents\\eclipse-jee-galileo-SR2-win32\\jad.exe\r\nDirectory for temporary Files-C:\\Users\\ahr\\.net.sf.jadclipse\r\n\r\nclick on Apply\r\n\r\nNow you should be able to see the classfiles in proper format.\r\n","title":"Attach the Source in Eclipse of a jar","body":"<p>I faced the same issue and solved using the below steps. Go to Windows->preferences->Editors->File Associations</p>\n\n<p>Here click on Add\nthen type .class\nclick on OK</p>\n\n<p>again click on Add\nthen type .classwithoughtsource\nclick on OK</p>\n\n<p>Now you will be able to see JadClipse option under Java section in Windows->Preferences</p>\n\n<p>Please provide the path of jad.exe file as shown below.</p>\n\n<p>Path for Decompiler-C:\\Users\\ahr\\Documents\\eclipse-jee-galileo-SR2-win32\\jad.exe\nDirectory for temporary Files-C:\\Users\\ahr.net.sf.jadclipse</p>\n\n<p>click on Apply</p>\n\n<p>Now you should be able to see the classfiles in proper format.</p>\n"},{"tags":[],"owner":{"account_id":2872367,"reputation":11,"user_id":2465399,"display_name":"Sahitya M"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1568974795,"creation_date":1568969747,"answer_id":58025062,"question_id":15180411,"body_markdown":"\r\n 1. Download JDEclipse from http://java-decompiler.github.io/\r\n 2. Follow the installation steps\r\n 3. If you still didn&#39;t find the source, right click on the jar file and select &quot;*Attach Library Source*&quot; option from the project folder, as you can see below.\r\n\r\n![Drop down option location][1]\r\n\r\n  [1]: https://i.stack.imgur.com/kMIJ8.png","title":"Attach the Source in Eclipse of a jar","body":"<ol>\n<li>Download JDEclipse from <a href=\"http://java-decompiler.github.io/\" rel=\"nofollow noreferrer\">http://java-decompiler.github.io/</a></li>\n<li>Follow the installation steps</li>\n<li>If you still didn't find the source, right click on the jar file and select \"<em>Attach Library Source</em>\" option from the project folder, as you can see below.</li>\n</ol>\n\n<p><img src=\"https://i.stack.imgur.com/kMIJ8.png\" alt=\"Drop down option location\"></p>\n"},{"tags":[],"owner":{"account_id":2726742,"reputation":21,"user_id":2351576,"display_name":"Raju Kapadne"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1617954165,"creation_date":1579169194,"answer_id":59767179,"question_id":15180411,"body_markdown":"I have faced same problem and resolved it by using following scenario.\r\n\r\n1. First we have to determine which jar file&#39;s source code we want along with version number. For Example &quot;Spring Core&quot; &#187; &quot;4.0.6.RELEASE&quot;\r\n2. open https://mvnrepository.com/ and search file with name &quot;Spring Core&quot; &#187; &quot;4.0.6.RELEASE&quot;.\r\n3. Now Maven repository will show the the details of that jar file.\r\n4. In that details there is one option &quot;View All&quot; just click on that.\r\n5. Then we will navigate to URL &quot;https://repo1.maven.org/maven2/org/springframework/spring-core/4.0.6.RELEASE/&quot;.\r\n\r\n6. there so many options so select and download &quot;spring-core-4.0.6.RELEASE-sources.jar&quot; in our our system and attach same jar file as a source attachment in eclipse.\r\n\r\n","title":"Attach the Source in Eclipse of a jar","body":"<p>I have faced same problem and resolved it by using following scenario.</p>\n<ol>\n<li><p>First we have to determine which jar file's source code we want along with version number. For Example &quot;Spring Core&quot; » &quot;4.0.6.RELEASE&quot;</p>\n</li>\n<li><p>open <a href=\"https://mvnrepository.com/\" rel=\"nofollow noreferrer\">https://mvnrepository.com/</a> and search file with name &quot;Spring Core&quot; » &quot;4.0.6.RELEASE&quot;.</p>\n</li>\n<li><p>Now Maven repository will show the the details of that jar file.</p>\n</li>\n<li><p>In that details there is one option &quot;View All&quot; just click on that.</p>\n</li>\n<li><p>Then we will navigate to URL &quot;https://repo1.maven.org/maven2/org/springframework/spring-core/4.0.6.RELEASE/&quot;.</p>\n</li>\n<li><p>there so many options so select and download &quot;spring-core-4.0.6.RELEASE-sources.jar&quot; in our our system and attach same jar file as a source attachment in eclipse.</p>\n</li>\n</ol>\n"},{"tags":[],"owner":{"account_id":14415125,"reputation":307,"user_id":10412775,"display_name":"Nagesh"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1584525499,"creation_date":1584525499,"answer_id":60737113,"question_id":15180411,"body_markdown":"I am using project is not Spring or spring boot based application.\r\nI have multiple subprojects and they are nested one within another.\r\nThe answers shown here supports on first level of subproject.\r\nIf I added another sub project for source code attachement, it is not allowing me saying folder already exists error.\r\n\r\nLooks like eclipse is out dated IDE. I am using the latest version of Eclipse version 2015-2019.\r\nIt is killing all my time.\r\n\r\nMy intension is run the application in debug mode navigate through the sub projects which are added as external dependencies (non modifiable).\r\n","title":"Attach the Source in Eclipse of a jar","body":"<p>I am using project is not Spring or spring boot based application.\nI have multiple subprojects and they are nested one within another.\nThe answers shown here supports on first level of subproject.\nIf I added another sub project for source code attachement, it is not allowing me saying folder already exists error.</p>\n\n<p>Looks like eclipse is out dated IDE. I am using the latest version of Eclipse version 2015-2019.\nIt is killing all my time.</p>\n\n<p>My intension is run the application in debug mode navigate through the sub projects which are added as external dependencies (non modifiable).</p>\n"},{"tags":[],"owner":{"account_id":7635211,"reputation":81,"user_id":5788964,"display_name":"Pekmezli D&#252;r&#252;m"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1639663744,"creation_date":1639663744,"answer_id":70380417,"question_id":15180411,"body_markdown":"Try removing the breakpoints. :)","title":"Attach the Source in Eclipse of a jar","body":"<p>Try removing the breakpoints. :)</p>\n"},{"tags":[],"owner":{"account_id":209589,"reputation":97,"user_id":460705,"display_name":"Saber Chebka"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1650287962,"creation_date":1650287962,"answer_id":71912336,"question_id":15180411,"body_markdown":"It is quite possible, just go to the jar in the Build Path and choose to attach a source just like follow.\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/Rvyj4.png","title":"Attach the Source in Eclipse of a jar","body":"<p>It is quite possible, just go to the jar in the Build Path and choose to attach a source just like follow.</p>\n<p><a href=\"https://i.stack.imgur.com/Rvyj4.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Rvyj4.png\" alt=\"enter image description here\" /></a></p>\n"}],"owner":{"account_id":434144,"reputation":19198,"user_id":819916,"accept_rate":81,"display_name":"AKIWEB"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":266954,"favorite_count":0,"down_vote_count":0,"up_vote_count":46,"accepted_answer_id":15180476,"answer_count":13,"score":46,"last_activity_date":1699921167,"creation_date":1362264966,"question_id":15180411,"body_markdown":"I added a `Student.jar` into my `Build Path` in my eclipse like this-\r\n\r\n&gt; Right click on the project-&gt;BuildPath-&gt;Configure Build\r\n&gt; Path-&gt;Libraries-&gt;Add External Jars\r\n\r\nThere is one class named `StudentTest` in `Student.jar` file. When I was debugging my code in eclipse, I stepped into that `StudentTest` class in the `Student.jar`.\r\n\r\nAnd after that eclipse shows me like this-\r\n\r\n&gt; The JAR file `S:\\some_location\\Student.jar` has no source attachment.\r\n&gt; You can attach the source by clicking Attach Source below\r\n\r\nNow I am not sure how should I attach the source in my eclipse. And from where? Can anyone provide me step by step what I need to do.\r\n\r\n**Update:-**\r\nI tried unzipping the `Student.jar` and I got `Student folder`. And after that I tried pointing the source to `Student folder` But still I am not able to see the class properly so that I can debug it properly, it shows the same above behavior.","title":"Attach the Source in Eclipse of a jar","body":"<p>I added a <code>Student.jar</code> into my <code>Build Path</code> in my eclipse like this-</p>\n\n<blockquote>\n  <p>Right click on the project->BuildPath->Configure Build\n  Path->Libraries->Add External Jars</p>\n</blockquote>\n\n<p>There is one class named <code>StudentTest</code> in <code>Student.jar</code> file. When I was debugging my code in eclipse, I stepped into that <code>StudentTest</code> class in the <code>Student.jar</code>.</p>\n\n<p>And after that eclipse shows me like this-</p>\n\n<blockquote>\n  <p>The JAR file <code>S:\\some_location\\Student.jar</code> has no source attachment.\n  You can attach the source by clicking Attach Source below</p>\n</blockquote>\n\n<p>Now I am not sure how should I attach the source in my eclipse. And from where? Can anyone provide me step by step what I need to do.</p>\n\n<p><strong>Update:-</strong>\nI tried unzipping the <code>Student.jar</code> and I got <code>Student folder</code>. And after that I tried pointing the source to <code>Student folder</code> But still I am not able to see the class properly so that I can debug it properly, it shows the same above behavior.</p>\n"},{"tags":["java","selenium","selenium-webdriver"],"comments":[{"owner":{"account_id":3412916,"reputation":6868,"user_id":2862485,"accept_rate":89,"display_name":"Amith"},"score":0,"creation_date":1397018593,"post_id":22952787,"comment_id":35043465,"body_markdown":"Refer [this to understand how to images](http://meta.stackexchange.com/questions/83096/how-to-place-an-image-in-a-stack-overflow-question)...","body":"Refer <a href=\"http://meta.stackexchange.com/questions/83096/how-to-place-an-image-in-a-stack-overflow-question\">this to understand how to images</a>..."},{"owner":{"account_id":4297443,"reputation":1,"user_id":3512119,"display_name":"user3512119"},"score":0,"creation_date":1397021799,"post_id":22952787,"comment_id":35044597,"body_markdown":"i tried to attached the screenshot Amith, since am newly entered, i dont have 10 reputations. so i cant add the images. i share the code. if you run the code then you can see my showstopper point","body":"i tried to attached the screenshot Amith, since am newly entered, i dont have 10 reputations. so i cant add the images. i share the code. if you run the code then you can see my showstopper point"}],"answers":[{"tags":[],"owner":{"account_id":362538,"reputation":22412,"user_id":705773,"accept_rate":98,"display_name":"Ajinkya"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1397018927,"creation_date":1397018927,"answer_id":22953007,"question_id":22952787,"body_markdown":"First you should switch to the popup and then try to find the element.  \r\nYou can use following code snippet\r\n\r\n    String parentWindow = driver.getWindowHandle();\r\n    Set&lt;String&gt; windowHandles = driver.getWindowHandles();\r\n    Iterator&lt;String&gt; iterator = windowHandles.iterator();\r\n    while (iterator.hasNext()) {\r\n       String handle = iterator.next();\r\n       if (!handle.contains(parentWindow)) {\r\n                        // Switch to popup \r\n                        driver.switchTo().window(handle);\r\n                        // Add code to find element \r\n           }\r\n    }\r\n    // Switch back to original window\r\n    driver.switchTo().window(parentWindow);\r\n\r\nThis code will work with any number of popups","title":"how to get the xpath from popup which is occur in the same window?","body":"<p>First you should switch to the popup and then try to find the element.<br>\nYou can use following code snippet</p>\n\n<pre><code>String parentWindow = driver.getWindowHandle();\nSet&lt;String&gt; windowHandles = driver.getWindowHandles();\nIterator&lt;String&gt; iterator = windowHandles.iterator();\nwhile (iterator.hasNext()) {\n   String handle = iterator.next();\n   if (!handle.contains(parentWindow)) {\n                    // Switch to popup \n                    driver.switchTo().window(handle);\n                    // Add code to find element \n       }\n}\n// Switch back to original window\ndriver.switchTo().window(parentWindow);\n</code></pre>\n\n<p>This code will work with any number of popups</p>\n"}],"owner":{"account_id":4297443,"reputation":1,"user_id":3512119,"display_name":"user3512119"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":12634,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1699920390,"creation_date":1397017572,"question_id":22952787,"body_markdown":"I need to send the values to this pop up. this is open with in the same window. when am trying with the normal driver.findelement, its getting error message saying xpath cannot found\r\nThis is my code\r\n\r\n    import java.util.concurrent.TimeUnit;\r\n    \r\n    import org.openqa.selenium.By;\r\n    import org.openqa.selenium.WebElement;\r\n    import org.openqa.selenium.firefox.FirefoxDriver;\r\n    \r\n    \r\n    public class Homepage_login {\r\n    \r\n    \tpublic static void main(String[] args) {\r\n    \t\t// TODO Auto-generated method stub\r\n    \r\n    \t\tFirefoxDriver driver = new FirefoxDriver();\r\n    \t\tdriver.manage().timeouts().implicitlyWait(30, TimeUnit.SECONDS);\r\n    \t\t\r\n    \t\t\r\n    \t\t//driver.get(&quot;http://se.rdmsonline.net/login.aspx&quot;);\r\n    \t\t\r\n    \t\tdriver.get(&quot;http://se.rdmsonline.net/&quot;);\r\n    \t\tdriver.findElement(By.xpath(&quot;//*[@id=&#39;rcmLang_Arrow&#39;]&quot;)).click();\r\n    \t\t\r\n    \t\tdriver.findElement(By.xpath(&quot;//*[@id=&#39;rcmLang_DropDown&#39;]/div/ul/li[2]&quot;)).click();\r\n    \t\t\r\n    \t\tdriver.findElement(By.xpath(&quot;//*[@id=&#39;txtUserName&#39;]&quot;)).sendKeys(&quot; &quot;);\r\n    \t\t\r\n    \t\tdriver.findElement(By.xpath(&quot;//*[@id=&#39;txtPassword&#39;]&quot;)).sendKeys(&quot; &quot;);\r\n    \t\t\r\n    \t\tdriver.findElement(By.xpath(&quot;//*[@id=&#39;btnLogin&#39;]&quot;)).click();\r\n    \t\t\r\n    \t\tdriver.findElement(By.xpath(&quot;//*[@id=&#39;Div1&#39;]/div/a&quot;)).click();\r\n    \t\t\r\n    \t    driver.findElement(By.xpath(&quot;//*[@id=&#39;txtUserName&#39;]&quot;)).sendKeys(&quot; &quot;);\r\n    \t\t\r\n    \t\tdriver.findElement(By.xpath(&quot;//*[@id=&#39;txtPassword&#39;]&quot;)).sendKeys(&quot; &quot;);\r\n    \t\t\r\n    \t\tdriver.findElement(By.xpath(&quot;//*[@id=&#39;btnLogin&#39;]&quot;)).click();\r\n    \t\t\r\n    \t\tdriver.findElement(By.xpath(&quot;//*[@id=&#39;rptSec_ctl00_imb&#39;]&quot;)).click();\r\n    \t\t\r\n    \t\tdriver.findElement(By.xpath(&quot;//*[@id=&#39;ctl00_Menu5&#39;]&quot;)).click();\r\n    \t\t\r\n    \t\tdriver.findElement(By.xpath(&quot;//*[@id=&#39;ctl00_cpl1_lnkNewNotification&#39;]&quot;)).click();\r\n    \t\t\r\n    \t    driver.findElement(By.xpath(&quot;//*[@id=&#39;ctl00_cplm_dtpDate_dateInput_text&#39;]&quot;)).sendKeys(&quot; &quot;);\r\n    \t   \r\n    \t\t \r\n    \t\t\r\n    \t}\r\n    \r\n    }\r\n\r\n\r\n this to be send the control inside the pop up.. can any one help me ?","title":"how to get the xpath from popup which is occur in the same window?","body":"<p>I need to send the values to this pop up. this is open with in the same window. when am trying with the normal driver.findelement, its getting error message saying xpath cannot found\nThis is my code</p>\n\n<pre><code>import java.util.concurrent.TimeUnit;\n\nimport org.openqa.selenium.By;\nimport org.openqa.selenium.WebElement;\nimport org.openqa.selenium.firefox.FirefoxDriver;\n\n\npublic class Homepage_login {\n\n    public static void main(String[] args) {\n        // TODO Auto-generated method stub\n\n        FirefoxDriver driver = new FirefoxDriver();\n        driver.manage().timeouts().implicitlyWait(30, TimeUnit.SECONDS);\n\n\n        //driver.get(\"http://se.rdmsonline.net/login.aspx\");\n\n        driver.get(\"http://se.rdmsonline.net/\");\n        driver.findElement(By.xpath(\"//*[@id='rcmLang_Arrow']\")).click();\n\n        driver.findElement(By.xpath(\"//*[@id='rcmLang_DropDown']/div/ul/li[2]\")).click();\n\n        driver.findElement(By.xpath(\"//*[@id='txtUserName']\")).sendKeys(\" \");\n\n        driver.findElement(By.xpath(\"//*[@id='txtPassword']\")).sendKeys(\" \");\n\n        driver.findElement(By.xpath(\"//*[@id='btnLogin']\")).click();\n\n        driver.findElement(By.xpath(\"//*[@id='Div1']/div/a\")).click();\n\n        driver.findElement(By.xpath(\"//*[@id='txtUserName']\")).sendKeys(\" \");\n\n        driver.findElement(By.xpath(\"//*[@id='txtPassword']\")).sendKeys(\" \");\n\n        driver.findElement(By.xpath(\"//*[@id='btnLogin']\")).click();\n\n        driver.findElement(By.xpath(\"//*[@id='rptSec_ctl00_imb']\")).click();\n\n        driver.findElement(By.xpath(\"//*[@id='ctl00_Menu5']\")).click();\n\n        driver.findElement(By.xpath(\"//*[@id='ctl00_cpl1_lnkNewNotification']\")).click();\n\n        driver.findElement(By.xpath(\"//*[@id='ctl00_cplm_dtpDate_dateInput_text']\")).sendKeys(\" \");\n\n\n\n    }\n\n}\n</code></pre>\n\n<p>this to be send the control inside the pop up.. can any one help me ?</p>\n"},{"tags":["java","sql-server","intellij-idea","openxava"],"comments":[{"owner":{"account_id":166167,"reputation":8075,"user_id":390122,"accept_rate":75,"display_name":"AlwaysLearning"},"score":1,"creation_date":1699174633,"post_id":77424428,"comment_id":136496221,"body_markdown":"_SQL Server Management Studio_ is not a database server, it&#39;s a tool for managing database servers. What version and edition of Microsoft SQL Server do you have installed? What&#39;s the output of `SELECT @@VERSION` when executed against it?","body":"<i>SQL Server Management Studio</i> is not a database server, it&#39;s a tool for managing database servers. What version and edition of Microsoft SQL Server do you have installed? What&#39;s the output of <code>SELECT @@VERSION</code> when executed against it?"},{"owner":{"account_id":17972905,"reputation":5290,"user_id":13061224,"display_name":"siggemannen"},"score":2,"creation_date":1699208905,"post_id":77424428,"comment_id":136499864,"body_markdown":"You need to add a bit more info, for example the whole error.","body":"You need to add a bit more info, for example the whole error."},{"owner":{"account_id":27494768,"reputation":218,"user_id":20979453,"display_name":"Jacky Liu - JetBrains"},"score":0,"creation_date":1699272641,"post_id":77424428,"comment_id":136506557,"body_markdown":"If possible, might you share your minimum sample project without any sensitive code for that problem? I agree with siggemannen that the whole log is helpful.","body":"If possible, might you share your minimum sample project without any sensitive code for that problem? I agree with siggemannen that the whole log is helpful."},{"owner":{"account_id":1461508,"reputation":692,"user_id":1866119,"display_name":"javierpaniza"},"score":0,"creation_date":1699279193,"post_id":77424428,"comment_id":136507843,"body_markdown":"You don&#39;t need to put the connection details in persistence.xml given that they are already in context.xml. persistence.xml should have the datasource jndi name. Look at the doc for an example. Morever, we need the stacktrace to see the cause of the error.","body":"You don&#39;t need to put the connection details in persistence.xml given that they are already in context.xml. persistence.xml should have the datasource jndi name. Look at the doc for an example. Morever, we need the stacktrace to see the cause of the error."},{"owner":{"account_id":29828346,"reputation":1,"user_id":22859655,"display_name":"solee"},"score":0,"creation_date":1699901336,"post_id":77424428,"comment_id":136586467,"body_markdown":"https://github.com/solee2222/CLINIC.git                    @JackyLiu-JetBrains","body":"<a href=\"https://github.com/solee2222/CLINIC.git\" rel=\"nofollow noreferrer\">github.com/solee2222/CLINIC.git</a>                    @JackyLiu-JetBrains"}],"owner":{"account_id":29828346,"reputation":1,"user_id":22859655,"display_name":"solee"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":49,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1699919823,"creation_date":1699148062,"question_id":77424428,"body_markdown":"I want to connect OpenXava with SQL Server 2019 (15.0.2104), however, enabling that option in context and persistence gives me an error. When I run the program it does give me the address to the page and I can write information, however, when I click on the &quot;record&quot; button I get the error:\r\n\r\n&gt; It has been impossible to execute the Record action: [PersistenceUnit: default ] Unable to build Hibernate SessionFactory\r\n\r\nDo you know how to fix it? \r\n\r\nI enable the TCP IP option from the SQL Server configuration And I create the database and the user with its login.\r\n\r\nHere is the project: https://github.com/solee2222/CLINIC.git\r\n(Clone it with git) \r\n\r\nI have this in my persistence.xml file:\r\n```\r\n        &lt;properties&gt;\r\n\t\t\t&lt;property name=&quot;hibernate.connection.driver_class&quot; value=&quot;com.microsoft.sqlserver.jdbc.SQLServerDriver&quot;/&gt;\r\n\t\t\t&lt;property name=&quot;hibernate.connection.username&quot; value=&quot;user&quot;/&gt;\r\n\t\t\t&lt;property name=&quot;hibernate.connection.password&quot; value=&quot;123&quot;/&gt;\r\n\t\t\t&lt;property name=&quot;hibernate.connection.url&quot; value=&quot;jdbc:sqlserver://localhost:1433;databaseName=facturaciondb;encrypt=true;trustServerCertificate=true;&quot;/&gt;\r\n\t\t\t&lt;property name=&quot;hibernate.dialect&quot; value=&quot;org.hibernate.dialect.SQLServerDialect&quot;/&gt;\r\n\t\t\t&lt;property name=&quot;hibernate.hbm2ddl.auto&quot; value=&quot;update&quot;/&gt;\r\n\t\t\t&lt;property name=&quot;hibernate.show_sql&quot; value=&quot;true&quot;/&gt;\r\n\t\t&lt;/properties&gt;\r\n```\r\n\r\nThis in my context.xml file\r\n```\r\n    &lt;!-- Microsoft SQL Server --&gt;\r\n\t&lt;Resource name=&quot;jdbc/facturacionDS&quot; auth=&quot;Container&quot; type=&quot;javax.sql.DataSource&quot;\r\n\t      maxTotal=&quot;20&quot; maxIdle=&quot;5&quot; maxWaitMillis=&quot;10000&quot;\r\n\t      username=&quot;user&quot; password=&quot;123&quot; \r\n\t      driverClassName=&quot;com.microsoft.sqlserver.jdbc.SQLServerDriver&quot; \r\n```\r\n\t     \r\n\t\r\n\r\nAnd finally this in my pom.xml file\r\n\r\n```\r\n\t\t&lt;!-- Microsoft SQL Server --&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;com.microsoft.sqlserver&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;mssql-jdbc&lt;/artifactId&gt;\r\n    \t\t&lt;version&gt;12.4.1.jre11&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n```\r\n","title":"Error connecting OpenXava to SQL Server - It was impossible to execute the Record action: [Persist","body":"<p>I want to connect OpenXava with SQL Server 2019 (15.0.2104), however, enabling that option in context and persistence gives me an error. When I run the program it does give me the address to the page and I can write information, however, when I click on the &quot;record&quot; button I get the error:</p>\n<blockquote>\n<p>It has been impossible to execute the Record action: [PersistenceUnit: default ] Unable to build Hibernate SessionFactory</p>\n</blockquote>\n<p>Do you know how to fix it?</p>\n<p>I enable the TCP IP option from the SQL Server configuration And I create the database and the user with its login.</p>\n<p>Here is the project: <a href=\"https://github.com/solee2222/CLINIC.git\" rel=\"nofollow noreferrer\">https://github.com/solee2222/CLINIC.git</a>\n(Clone it with git)</p>\n<p>I have this in my persistence.xml file:</p>\n<pre><code>        &lt;properties&gt;\n            &lt;property name=&quot;hibernate.connection.driver_class&quot; value=&quot;com.microsoft.sqlserver.jdbc.SQLServerDriver&quot;/&gt;\n            &lt;property name=&quot;hibernate.connection.username&quot; value=&quot;user&quot;/&gt;\n            &lt;property name=&quot;hibernate.connection.password&quot; value=&quot;123&quot;/&gt;\n            &lt;property name=&quot;hibernate.connection.url&quot; value=&quot;jdbc:sqlserver://localhost:1433;databaseName=facturaciondb;encrypt=true;trustServerCertificate=true;&quot;/&gt;\n            &lt;property name=&quot;hibernate.dialect&quot; value=&quot;org.hibernate.dialect.SQLServerDialect&quot;/&gt;\n            &lt;property name=&quot;hibernate.hbm2ddl.auto&quot; value=&quot;update&quot;/&gt;\n            &lt;property name=&quot;hibernate.show_sql&quot; value=&quot;true&quot;/&gt;\n        &lt;/properties&gt;\n</code></pre>\n<p>This in my context.xml file</p>\n<pre><code>    &lt;!-- Microsoft SQL Server --&gt;\n    &lt;Resource name=&quot;jdbc/facturacionDS&quot; auth=&quot;Container&quot; type=&quot;javax.sql.DataSource&quot;\n          maxTotal=&quot;20&quot; maxIdle=&quot;5&quot; maxWaitMillis=&quot;10000&quot;\n          username=&quot;user&quot; password=&quot;123&quot; \n          driverClassName=&quot;com.microsoft.sqlserver.jdbc.SQLServerDriver&quot; \n</code></pre>\n<p>And finally this in my pom.xml file</p>\n<pre><code>        &lt;!-- Microsoft SQL Server --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.microsoft.sqlserver&lt;/groupId&gt;\n            &lt;artifactId&gt;mssql-jdbc&lt;/artifactId&gt;\n            &lt;version&gt;12.4.1.jre11&lt;/version&gt;\n        &lt;/dependency&gt;\n</code></pre>\n"},{"tags":["java","spring","spring-boot"],"comments":[{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1699858808,"post_id":77471221,"comment_id":136579065,"body_markdown":"Spring already provides request/response logging. Instead of reinventing your own, use that filter instead. Include the `CommonsRequestLoggingFilter` enable debug and see them being logged. No need to write your own. If you really want to write your own at least re-use the `ContentCachingRequestWrapper` and `ContentCachingResponseWrapper` which already implement (properly) the re-use of the `InputStream` and friends.","body":"Spring already provides request/response logging. Instead of reinventing your own, use that filter instead. Include the <code>CommonsRequestLoggingFilter</code> enable debug and see them being logged. No need to write your own. If you really want to write your own at least re-use the <code>ContentCachingRequestWrapper</code> and <code>ContentCachingResponseWrapper</code> which already implement (properly) the re-use of the <code>InputStream</code> and friends."},{"owner":{"account_id":20933387,"reputation":84,"user_id":15379171,"display_name":"HittingMyCode"},"score":0,"creation_date":1699868678,"post_id":77471221,"comment_id":136580471,"body_markdown":"I want write my own interceptor for different reason, i try to use ContentCachingRequestWrapper, but the problem persist","body":"I want write my own interceptor for different reason, i try to use ContentCachingRequestWrapper, but the problem persist"},{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1699868940,"post_id":77471221,"comment_id":136580507,"body_markdown":"You used it how? As classes as is or as base classes to extend from? Also why write your own? What are your different reasons to not use an out-of-the-box solution?","body":"You used it how? As classes as is or as base classes to extend from? Also why write your own? What are your different reasons to not use an out-of-the-box solution?"},{"owner":{"account_id":20933387,"reputation":84,"user_id":15379171,"display_name":"HittingMyCode"},"score":0,"creation_date":1699869915,"post_id":77471221,"comment_id":136580662,"body_markdown":"I try to use instead CachedHttpServletRequest ContentCachingRequestWrapper, but never change, should I do anything else? Could you give an example in this case? I need to make my own custom interceptor, because I have some requirements that I have to meet, so I need my own custom solution.","body":"I try to use instead CachedHttpServletRequest ContentCachingRequestWrapper, but never change, should I do anything else? Could you give an example in this case? I need to make my own custom interceptor, because I have some requirements that I have to meet, so I need my own custom solution."},{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1699871260,"post_id":77471221,"comment_id":136580888,"body_markdown":"It is not an interceptor I hope but rather a filter. If this is an interceptor it simply won&#39;t work as you cannot replace the request and resonse.","body":"It is not an interceptor I hope but rather a filter. If this is an interceptor it simply won&#39;t work as you cannot replace the request and resonse."},{"owner":{"account_id":20933387,"reputation":84,"user_id":15379171,"display_name":"HittingMyCode"},"score":0,"creation_date":1699872156,"post_id":77471221,"comment_id":136581038,"body_markdown":"sorry, it&#39;s a filter I linked the guide I used to implement it, you can consult it here  https://www.baeldung.com/spring-http-logging","body":"sorry, it&#39;s a filter I linked the guide I used to implement it, you can consult it here  <a href=\"https://www.baeldung.com/spring-http-logging\" rel=\"nofollow noreferrer\">baeldung.com/spring-http-logging</a>"},{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1699872456,"post_id":77471221,"comment_id":136581112,"body_markdown":"Still I wonder why you need your own implementation instead something out-of-the-box. If this breaks stuff down the line there must be something else that is interfering as well.","body":"Still I wonder why you need your own implementation instead something out-of-the-box. If this breaks stuff down the line there must be something else that is interfering as well."},{"owner":{"account_id":20933387,"reputation":84,"user_id":15379171,"display_name":"HittingMyCode"},"score":0,"creation_date":1699872867,"post_id":77471221,"comment_id":136581176,"body_markdown":"I have several requirements to make my custom implementation, let&#39;s say that this is my service on which I have to do some analysis on requests and responses, so I need to read the requests and responses on my filters and manipulate them in different ways, via product logs on file for example or by saving to an in-memory database, so I need to be able to access all my requests and responses on my filter","body":"I have several requirements to make my custom implementation, let&#39;s say that this is my service on which I have to do some analysis on requests and responses, so I need to read the requests and responses on my filters and manipulate them in different ways, via product logs on file for example or by saving to an in-memory database, so I need to be able to access all my requests and responses on my filter"},{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1699872993,"post_id":77471221,"comment_id":136581203,"body_markdown":"Which is why you can plugin various appenders into your logging frameworks to do just that, so you don&#39;t need to burden your application with that logic. But nonetheless I would expect the spring provided wrappers to work if you use them correctly (I see you use the response one so wondering why you aren&#39;t using the request one).","body":"Which is why you can plugin various appenders into your logging frameworks to do just that, so you don&#39;t need to burden your application with that logic. But nonetheless I would expect the spring provided wrappers to work if you use them correctly (I see you use the response one so wondering why you aren&#39;t using the request one)."}],"answers":[{"tags":[],"owner":{"account_id":20933387,"reputation":84,"user_id":15379171,"display_name":"HittingMyCode"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1699919492,"creation_date":1699919492,"answer_id":77477475,"question_id":77471221,"body_markdown":"Finally i found a solution this is the final code:\r\n\r\n```\r\n@Component\r\npublic class LogFilter extends GenericFilterBean {\r\n\r\n    private static final Logger log = LogManager.getLogger(LogInterceptor1.class);\r\n\r\n    @Override\r\n    public void doFilter(ServletRequest request, ServletResponse response, FilterChain chain) throws IOException, ServletException {\r\n        ContentCachingRequestWrapper requestWrapper = requestWrapper(request);\r\n        ContentCachingResponseWrapper responseWrapper = responseWrapper(response);\r\n\r\n        chain.doFilter(requestWrapper, responseWrapper);\r\n\r\n        logRequest(requestWrapper);\r\n        logResponse(responseWrapper);\r\n    }\r\n\r\n    private void logRequest(ContentCachingRequestWrapper request) {\r\n        log.info(&quot;Body: &quot; +  new String(request.getContentAsByteArray()));\r\n    }\r\n\r\n    private void logResponse(ContentCachingResponseWrapper response) throws IOException {\r\n        log.info(&quot;Response: &quot; + new String(response.getContentAsByteArray()));\r\n      response.copyBodyToResponse();\r\n    }\r\n\r\n    private ContentCachingRequestWrapper requestWrapper(ServletRequest request) {\r\n        if (request instanceof ContentCachingRequestWrapper requestWrapper) {\r\n            return requestWrapper;\r\n        }\r\n        return new ContentCachingRequestWrapper((HttpServletRequest) request);\r\n    }\r\n\r\n    private ContentCachingResponseWrapper responseWrapper(ServletResponse response) {\r\n        if (response instanceof ContentCachingResponseWrapper responseWrapper) {\r\n            return responseWrapper;\r\n        }\r\n        return new ContentCachingResponseWrapper((HttpServletResponse) response);\r\n    }\r\n}\r\n\r\n```\r\n\r\nFollowing https://vkuzel.com/log-requests-and-responses-including-body-in-spring-boot\r\n\r\nThank you all.","title":"Spring boot logger interceptor remove form-data from request","body":"<p>Finally i found a solution this is the final code:</p>\n<pre><code>@Component\npublic class LogFilter extends GenericFilterBean {\n\n    private static final Logger log = LogManager.getLogger(LogInterceptor1.class);\n\n    @Override\n    public void doFilter(ServletRequest request, ServletResponse response, FilterChain chain) throws IOException, ServletException {\n        ContentCachingRequestWrapper requestWrapper = requestWrapper(request);\n        ContentCachingResponseWrapper responseWrapper = responseWrapper(response);\n\n        chain.doFilter(requestWrapper, responseWrapper);\n\n        logRequest(requestWrapper);\n        logResponse(responseWrapper);\n    }\n\n    private void logRequest(ContentCachingRequestWrapper request) {\n        log.info(&quot;Body: &quot; +  new String(request.getContentAsByteArray()));\n    }\n\n    private void logResponse(ContentCachingResponseWrapper response) throws IOException {\n        log.info(&quot;Response: &quot; + new String(response.getContentAsByteArray()));\n      response.copyBodyToResponse();\n    }\n\n    private ContentCachingRequestWrapper requestWrapper(ServletRequest request) {\n        if (request instanceof ContentCachingRequestWrapper requestWrapper) {\n            return requestWrapper;\n        }\n        return new ContentCachingRequestWrapper((HttpServletRequest) request);\n    }\n\n    private ContentCachingResponseWrapper responseWrapper(ServletResponse response) {\n        if (response instanceof ContentCachingResponseWrapper responseWrapper) {\n            return responseWrapper;\n        }\n        return new ContentCachingResponseWrapper((HttpServletResponse) response);\n    }\n}\n\n</code></pre>\n<p>Following <a href=\"https://vkuzel.com/log-requests-and-responses-including-body-in-spring-boot\" rel=\"nofollow noreferrer\">https://vkuzel.com/log-requests-and-responses-including-body-in-spring-boot</a></p>\n<p>Thank you all.</p>\n"}],"owner":{"account_id":20933387,"reputation":84,"user_id":15379171,"display_name":"HittingMyCode"},"comment_count":9,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":72,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1699919492,"creation_date":1699835407,"question_id":77471221,"body_markdown":"Have a problem with my spring boot application, i want to log all request and reponse, for do that i implement this logic:\r\n```\r\n    @Override\r\n    protected void doFilterInternal(HttpServletRequest request, HttpServletResponse response,\r\n                                    FilterChain filterChain) throws ServletException, IOException {\r\n        ContentCachingResponseWrapper responseWrapper = new ContentCachingResponseWrapper(response);\r\n\r\n        CachedHttpServletRequest cachedHttpServletRequest = new CachedHttpServletRequest(request);\r\n        String body = IOUtils.toString(cachedHttpServletRequest.getInputStream(), StandardCharsets.UTF_8);\r\n        LOGGER.info(&quot; Body: &quot; + body);\r\n        filterChain.doFilter(cachedHttpServletRequest, responseWrapper);\r\n        LOGGER.info(&quot;Response :&quot; + new String(responseWrapper.getContentAsByteArray()));\r\n\r\n        responseWrapper.copyBodyToResponse();\r\n    }\r\n```\r\n\r\n```\r\npublic class CachedHttpServletRequest extends HttpServletRequestWrapper {\r\n    private final byte[] cachedPayload;\r\n    \r\n    public CachedHttpServletRequest(HttpServletRequest request) throws IOException {\r\n        super(request);\r\n        InputStream requestInputStream = request.getInputStream();\r\n        this.cachedPayload = StreamUtils.copyToByteArray(requestInputStream);\r\n    }\r\n\r\n    @Override\r\n    public ServletInputStream getInputStream() {\r\n        return new CachedServletInputStream(this.cachedPayload);\r\n    }\r\n\r\n    @Override\r\n    public BufferedReader getReader() {\r\n        ByteArrayInputStream byteArrayInputStream = new ByteArrayInputStream(this.cachedPayload);\r\n        return new BufferedReader(new InputStreamReader(byteArrayInputStream));\r\n    }\r\n}\r\n```\r\n\r\n```\r\npublic class CachedServletInputStream extends ServletInputStream {\r\n\r\n    private static final Logger LOGGER = LogManager.getLogger(CachedServletInputStream.class);\r\n\r\n    private final InputStream cachedInputStream;\r\n\r\n    public CachedServletInputStream(byte[] cachedBody) {\r\n        this.cachedInputStream = new ByteArrayInputStream(cachedBody);\r\n    }\r\n\r\n    @Override\r\n    public boolean isFinished() {\r\n        try {\r\n            return cachedInputStream.available() == 0;\r\n        } catch (IOException exception) {\r\n            LOGGER.error(exception.getMessage());\r\n        }\r\n        return false;\r\n    }\r\n\r\n    @Override\r\n    public boolean isReady() {\r\n        return true;\r\n    }\r\n\r\n    @Override\r\n    public void setReadListener(ReadListener readListener) {\r\n        throw new UnsupportedOperationException();\r\n    }\r\n\r\n    @Override\r\n    public int read() throws IOException {\r\n        return cachedInputStream.read();\r\n    }\r\n}\r\n```\r\n\r\nThis code work fine for nomal request, but i have problem with endpoint like this:\r\n```\r\n  @PostMapping(consumes = {MediaType.APPLICATION_JSON_VALUE,\r\n            MediaType.MULTIPART_FORM_DATA_VALUE}, value = &quot;/upload&quot;)\r\n    public ResponseEntity&lt;Map&lt;String,String&gt;&gt; uploadFile(\r\n            @RequestPart(&quot;file&quot;) MultipartFile multipartFile,\r\n            @RequestPart(&quot;body&quot;) BodyDTO bodyDTO\r\n    ) {\r\n        return ResponseEntity.status(HttpStatus.OK).body(myService.uploadFile(multipartFile, bodyDTO));\r\n    }\r\n```\r\nBecuase i receive this error `2023-11-13T01:26:36.434+01:00  INFO 58866 --- [nio-8091-exec-2] c.s.o.exception.ErrorHandler             : Required part &#39;file&#39; is not present.`\r\n\r\nIf i remove the log interceptor, the response it&#39;s ok, no error about bad request missing file, i think my `CachedHttpServletRequest` remove the `@RequestPart`, can you help me? How can bypass this problem?\r\n\r\nI take the code from follwing guide:\r\n\r\nhttps://www.baeldung.com/spring-http-logging\r\n\r\n\r\nThank you\r\n","title":"Spring boot logger interceptor remove form-data from request","body":"<p>Have a problem with my spring boot application, i want to log all request and reponse, for do that i implement this logic:</p>\n<pre><code>    @Override\n    protected void doFilterInternal(HttpServletRequest request, HttpServletResponse response,\n                                    FilterChain filterChain) throws ServletException, IOException {\n        ContentCachingResponseWrapper responseWrapper = new ContentCachingResponseWrapper(response);\n\n        CachedHttpServletRequest cachedHttpServletRequest = new CachedHttpServletRequest(request);\n        String body = IOUtils.toString(cachedHttpServletRequest.getInputStream(), StandardCharsets.UTF_8);\n        LOGGER.info(&quot; Body: &quot; + body);\n        filterChain.doFilter(cachedHttpServletRequest, responseWrapper);\n        LOGGER.info(&quot;Response :&quot; + new String(responseWrapper.getContentAsByteArray()));\n\n        responseWrapper.copyBodyToResponse();\n    }\n</code></pre>\n<pre><code>public class CachedHttpServletRequest extends HttpServletRequestWrapper {\n    private final byte[] cachedPayload;\n    \n    public CachedHttpServletRequest(HttpServletRequest request) throws IOException {\n        super(request);\n        InputStream requestInputStream = request.getInputStream();\n        this.cachedPayload = StreamUtils.copyToByteArray(requestInputStream);\n    }\n\n    @Override\n    public ServletInputStream getInputStream() {\n        return new CachedServletInputStream(this.cachedPayload);\n    }\n\n    @Override\n    public BufferedReader getReader() {\n        ByteArrayInputStream byteArrayInputStream = new ByteArrayInputStream(this.cachedPayload);\n        return new BufferedReader(new InputStreamReader(byteArrayInputStream));\n    }\n}\n</code></pre>\n<pre><code>public class CachedServletInputStream extends ServletInputStream {\n\n    private static final Logger LOGGER = LogManager.getLogger(CachedServletInputStream.class);\n\n    private final InputStream cachedInputStream;\n\n    public CachedServletInputStream(byte[] cachedBody) {\n        this.cachedInputStream = new ByteArrayInputStream(cachedBody);\n    }\n\n    @Override\n    public boolean isFinished() {\n        try {\n            return cachedInputStream.available() == 0;\n        } catch (IOException exception) {\n            LOGGER.error(exception.getMessage());\n        }\n        return false;\n    }\n\n    @Override\n    public boolean isReady() {\n        return true;\n    }\n\n    @Override\n    public void setReadListener(ReadListener readListener) {\n        throw new UnsupportedOperationException();\n    }\n\n    @Override\n    public int read() throws IOException {\n        return cachedInputStream.read();\n    }\n}\n</code></pre>\n<p>This code work fine for nomal request, but i have problem with endpoint like this:</p>\n<pre><code>  @PostMapping(consumes = {MediaType.APPLICATION_JSON_VALUE,\n            MediaType.MULTIPART_FORM_DATA_VALUE}, value = &quot;/upload&quot;)\n    public ResponseEntity&lt;Map&lt;String,String&gt;&gt; uploadFile(\n            @RequestPart(&quot;file&quot;) MultipartFile multipartFile,\n            @RequestPart(&quot;body&quot;) BodyDTO bodyDTO\n    ) {\n        return ResponseEntity.status(HttpStatus.OK).body(myService.uploadFile(multipartFile, bodyDTO));\n    }\n</code></pre>\n<p>Becuase i receive this error <code>2023-11-13T01:26:36.434+01:00  INFO 58866 --- [nio-8091-exec-2] c.s.o.exception.ErrorHandler             : Required part 'file' is not present.</code></p>\n<p>If i remove the log interceptor, the response it's ok, no error about bad request missing file, i think my <code>CachedHttpServletRequest</code> remove the <code>@RequestPart</code>, can you help me? How can bypass this problem?</p>\n<p>I take the code from follwing guide:</p>\n<p><a href=\"https://www.baeldung.com/spring-http-logging\" rel=\"nofollow noreferrer\">https://www.baeldung.com/spring-http-logging</a></p>\n<p>Thank you</p>\n"},{"tags":["java","angular","spring-boot","spring-security","cors"],"comments":[{"owner":{"account_id":16341513,"reputation":209,"user_id":11802330,"display_name":"Eric"},"score":0,"creation_date":1693460276,"post_id":77011585,"comment_id":135764348,"body_markdown":"Seems you haven&#39;t added `http://testserverip:8080` in `allowedOrigins` you can also try to change `http://testserverip:8080` to   `http://yourdomain.com:8080` and also add it to `allowedOrigins`","body":"Seems you haven&#39;t added <code>http:&#47;&#47;testserverip:8080</code> in <code>allowedOrigins</code> you can also try to change <code>http:&#47;&#47;testserverip:8080</code> to   <code>http:&#47;&#47;yourdomain.com:8080</code> and also add it to <code>allowedOrigins</code>"},{"owner":{"account_id":7275588,"reputation":81,"user_id":5547163,"display_name":"Tush"},"score":3,"creation_date":1693463144,"post_id":77011585,"comment_id":135764748,"body_markdown":"By default, you don&#39;t need to configure CORS for same origin request (i.e is both the client and server are on the same origin), until or unless there are restrictions on your server end.\n\nLooking at `GET http://localhost:8080/api 400`, it seems to be returning bad request (400). So, there might be some validations issue (invalid format, syntax, etc) from your end.","body":"By default, you don&#39;t need to configure CORS for same origin request (i.e is both the client and server are on the same origin), until or unless there are restrictions on your server end.  Looking at <code>GET http:&#47;&#47;localhost:8080&#47;api 400</code>, it seems to be returning bad request (400). So, there might be some validations issue (invalid format, syntax, etc) from your end."},{"owner":{"account_id":19950129,"reputation":601,"user_id":14619971,"display_name":"jkfe"},"score":0,"creation_date":1693488930,"post_id":77011585,"comment_id":135770059,"body_markdown":"@Eric I have tried adding http://testserverip:8080. In my case it should be the same as adding http://localhost:8080 because both the frontend and backend are in http://localhost:8080. Think Tush is right. Since both are in the same origin looks like the problem is something else, not CORS.","body":"@Eric I have tried adding <a href=\"http://testserverip:8080\" rel=\"nofollow noreferrer\">testserverip:8080</a>. In my case it should be the same as adding <a href=\"http://localhost:8080\" rel=\"nofollow noreferrer\">localhost:8080</a> because both the frontend and backend are in <a href=\"http://localhost:8080\" rel=\"nofollow noreferrer\">localhost:8080</a>. Think Tush is right. Since both are in the same origin looks like the problem is something else, not CORS."},{"owner":{"account_id":19950129,"reputation":601,"user_id":14619971,"display_name":"jkfe"},"score":0,"creation_date":1693489014,"post_id":77011585,"comment_id":135770080,"body_markdown":"@Tush That&#39;s right. Both are in the same origin. So the problem seems to be something else, not CORS.","body":"@Tush That&#39;s right. Both are in the same origin. So the problem seems to be something else, not CORS."},{"owner":{"account_id":19950129,"reputation":601,"user_id":14619971,"display_name":"jkfe"},"score":0,"creation_date":1693492717,"post_id":77011585,"comment_id":135771000,"body_markdown":"I updated the question removing CORS and providing more context (see section UPDATE)","body":"I updated the question removing CORS and providing more context (see section UPDATE)"},{"owner":{"account_id":7275588,"reputation":81,"user_id":5547163,"display_name":"Tush"},"score":0,"creation_date":1693502320,"post_id":77011585,"comment_id":135773099,"body_markdown":"@jkfe, have you checked the dev tools? Whether the request gets any response? What is the status code it is returning?\nIf its 400 bad request, then you need to check the middlewares.","body":"@jkfe, have you checked the dev tools? Whether the request gets any response? What is the status code it is returning? If its 400 bad request, then you need to check the middlewares."},{"owner":{"account_id":19950129,"reputation":601,"user_id":14619971,"display_name":"jkfe"},"score":0,"creation_date":1693503268,"post_id":77011585,"comment_id":135773289,"body_markdown":"@Tush Yes, in Chrome Dev Tools sometimes I get the ```net::ERR_CONNECTION_REFUSED``` and sometimes a ```GET 401``` error is returned for the same call. Both of them have just headers and no response at all ```&quot;Failed to load response data: No data found for resource with given identifier)\n``` for first case and ```&quot;This request has no response data available&quot;``` for the second.","body":"@Tush Yes, in Chrome Dev Tools sometimes I get the <code>net::ERR_CONNECTION_REFUSED</code> and sometimes a <code>GET 401</code> error is returned for the same call. Both of them have just headers and no response at all <code>&quot;Failed to load response data: No data found for resource with given identifier) </code> for first case and <code>&quot;This request has no response data available&quot;</code> for the second."},{"owner":{"account_id":19950129,"reputation":601,"user_id":14619971,"display_name":"jkfe"},"score":0,"creation_date":1693503418,"post_id":77011585,"comment_id":135773311,"body_markdown":"Looks it&#39;s something related to Angular credentials to connect to the backend. Angular ```withCredentials``` is set to true.","body":"Looks it&#39;s something related to Angular credentials to connect to the backend. Angular <code>withCredentials</code> is set to true."},{"owner":{"account_id":7275588,"reputation":81,"user_id":5547163,"display_name":"Tush"},"score":0,"creation_date":1693503756,"post_id":77011585,"comment_id":135773358,"body_markdown":"Can you check if the response header contains `Access-Control-Allow-Credentials`? And if cookies are being sent in the request?","body":"Can you check if the response header contains <code>Access-Control-Allow-Credentials</code>? And if cookies are being sent in the request?"},{"owner":{"account_id":19950129,"reputation":601,"user_id":14619971,"display_name":"jkfe"},"score":0,"creation_date":1693504268,"post_id":77011585,"comment_id":135773449,"body_markdown":"@Tush. ```Access-Control-Allow-Credentials``` is present in the Request Header and is set to true. But cookie is in fact not there. Good catch. That happens only when calling the test server version from the dev machine browser. If I call the local dev machine installed version of the app, cookie is in there correctly and everything works well. Why would that be?","body":"@Tush. <code>Access-Control-Allow-Credentials</code> is present in the Request Header and is set to true. But cookie is in fact not there. Good catch. That happens only when calling the test server version from the dev machine browser. If I call the local dev machine installed version of the app, cookie is in there correctly and everything works well. Why would that be?"},{"owner":{"account_id":7275588,"reputation":81,"user_id":5547163,"display_name":"Tush"},"score":0,"creation_date":1693504626,"post_id":77011585,"comment_id":135773508,"body_markdown":"@jkfe, on your local dev machine, the request is same origin or cross origin?","body":"@jkfe, on your local dev machine, the request is same origin or cross origin?"},{"owner":{"account_id":19950129,"reputation":601,"user_id":14619971,"display_name":"jkfe"},"score":0,"creation_date":1693504890,"post_id":77011585,"comment_id":135773570,"body_markdown":"In local dev it is cross origin. Frontend is on ```http://localhost:4200/``` while backend is on ```http://localhost:8080/```. In test server they are both on the same origin ```http://localhost:8080/```","body":"In local dev it is cross origin. Frontend is on <code>http:&#47;&#47;localhost:4200&#47;</code> while backend is on <code>http:&#47;&#47;localhost:8080&#47;</code>. In test server they are both on the same origin <code>http:&#47;&#47;localhost:8080&#47;</code>"},{"owner":{"account_id":7275588,"reputation":81,"user_id":5547163,"display_name":"Tush"},"score":0,"creation_date":1693506692,"post_id":77011585,"comment_id":135773889,"body_markdown":"@jkfe, That might be the case, I think what&#39;s happening is that:\n\nOn local dev -&gt; cross origin -&gt; `withCredentials` = true and `Access-Control-Allow-Credentials` = true.\nHence, cookies were sent successfully.\n\nOn test server -&gt; same origin -&gt; `withCredentials` = true and `Access-Control-Allow-Credentials` = true. Since, its same origin, cookies were not sent, but server expected it. Hence, a bad request.\n\nFor the test server (same origin requests) only, try to set `withCredentials` to false.","body":"@jkfe, That might be the case, I think what&#39;s happening is that:  On local dev -&gt; cross origin -&gt; <code>withCredentials</code> = true and <code>Access-Control-Allow-Credentials</code> = true. Hence, cookies were sent successfully.  On test server -&gt; same origin -&gt; <code>withCredentials</code> = true and <code>Access-Control-Allow-Credentials</code> = true. Since, its same origin, cookies were not sent, but server expected it. Hence, a bad request.  For the test server (same origin requests) only, try to set <code>withCredentials</code> to false."},{"owner":{"account_id":19950129,"reputation":601,"user_id":14619971,"display_name":"jkfe"},"score":0,"creation_date":1693508240,"post_id":77011585,"comment_id":135774184,"body_markdown":"I set it to false but getting the same 401 error. ```Access-Control-Allow-Credentials``` continues showing as true in the response header and cookie continues not being displayed.","body":"I set it to false but getting the same 401 error. <code>Access-Control-Allow-Credentials</code> continues showing as true in the response header and cookie continues not being displayed."},{"owner":{"account_id":7275588,"reputation":81,"user_id":5547163,"display_name":"Tush"},"score":0,"creation_date":1693509974,"post_id":77011585,"comment_id":135774445,"body_markdown":"Maybe you can also try disabling `Access-Control-Allow-Credentials` header in the response. That seems to be the last option.","body":"Maybe you can also try disabling <code>Access-Control-Allow-Credentials</code> header in the response. That seems to be the last option."},{"owner":{"account_id":19950129,"reputation":601,"user_id":14619971,"display_name":"jkfe"},"score":0,"creation_date":1693510125,"post_id":77011585,"comment_id":135774471,"body_markdown":"I can&#39;t. I&#39;m using waffle authentication which requires that to be true. I think the last option would be to have two instances of tomcat in the test server and do a cross origin request in the server. But that&#39;s one more instance to manage. I would prefer finding a way to produce the cookie even in same origin requests. From what I&#39;ve been reading ```withCredentials``` generates cookie just for cross origin requests.","body":"I can&#39;t. I&#39;m using waffle authentication which requires that to be true. I think the last option would be to have two instances of tomcat in the test server and do a cross origin request in the server. But that&#39;s one more instance to manage. I would prefer finding a way to produce the cookie even in same origin requests. From what I&#39;ve been reading <code>withCredentials</code> generates cookie just for cross origin requests."},{"owner":{"account_id":19950129,"reputation":601,"user_id":14619971,"display_name":"jkfe"},"score":0,"creation_date":1693518809,"post_id":77011585,"comment_id":135775831,"body_markdown":"I installed a second instance of Tomcat in a different port in the test server to make a cross origin request. Still getting the same error. ```withCredentials``` set to true. ```Access-Control-Allow-Credentials``` set to true. Cookie still not generated.","body":"I installed a second instance of Tomcat in a different port in the test server to make a cross origin request. Still getting the same error. <code>withCredentials</code> set to true. <code>Access-Control-Allow-Credentials</code> set to true. Cookie still not generated."},{"owner":{"account_id":7275588,"reputation":81,"user_id":5547163,"display_name":"Tush"},"score":0,"creation_date":1693550729,"post_id":77011585,"comment_id":135778513,"body_markdown":"Is it still returning 400/401? Do you have `Access-Control-Allow-Origin` set in the response header?","body":"Is it still returning 400/401? Do you have <code>Access-Control-Allow-Origin</code> set in the response header?"},{"owner":{"account_id":19950129,"reputation":601,"user_id":14619971,"display_name":"jkfe"},"score":0,"creation_date":1693576235,"post_id":77011585,"comment_id":135783328,"body_markdown":"I know the reason. The new port is blocked for remote access. I&#39;ll check if I can find a way to open it. But better solution would be to have both backend and frontend in the same port.","body":"I know the reason. The new port is blocked for remote access. I&#39;ll check if I can find a way to open it. But better solution would be to have both backend and frontend in the same port."},{"owner":{"account_id":19950129,"reputation":601,"user_id":14619971,"display_name":"jkfe"},"score":0,"creation_date":1693592111,"post_id":77011585,"comment_id":135786264,"body_markdown":"@Tush I found the issue! In the angular code I was calling the api this way: ```http://localhost:8080/api```. But that was making a reference to the localhost in the client machine, not the localhost in the server (as I originally imagined it would). When I changed to the actual server ip address ```http://xx.xx.xxx.xx:8080/api``` it worked like a charm! Thanks a lot for your support anyways. Very much appreciated. All the best for you.","body":"@Tush I found the issue! In the angular code I was calling the api this way: <code>http:&#47;&#47;localhost:8080&#47;api</code>. But that was making a reference to the localhost in the client machine, not the localhost in the server (as I originally imagined it would). When I changed to the actual server ip address <code>http:&#47;&#47;xx.xx.xxx.xx:8080&#47;api</code> it worked like a charm! Thanks a lot for your support anyways. Very much appreciated. All the best for you."}],"answers":[{"tags":[],"owner":{"account_id":19950129,"reputation":601,"user_id":14619971,"display_name":"jkfe"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1693592632,"creation_date":1693592632,"answer_id":77025319,"question_id":77011585,"body_markdown":"Like mentioned in the above comments, after a lot of time on this I found the issue.\r\n\r\nThe angular code was calling the rest api this way:\r\n```http://localhost:8080/api```\r\n\r\nWhen I changed it to the actual server ip address it worked perfectly.\r\n```http://xx.xx.xxx.xx:8080/api```","title":"GET http://localhost:8080/api net::ERR_CONNECTION_REFUSED","body":"<p>Like mentioned in the above comments, after a lot of time on this I found the issue.</p>\n<p>The angular code was calling the rest api this way:\n<code>http://localhost:8080/api</code></p>\n<p>When I changed it to the actual server ip address it worked perfectly.\n<code>http://xx.xx.xxx.xx:8080/api</code></p>\n"},{"tags":[],"owner":{"account_id":29895965,"reputation":1,"user_id":22910849,"display_name":"Guillermo Vasquez"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1699919455,"creation_date":1699919455,"answer_id":77477471,"question_id":77011585,"body_markdown":"in what path is the file located to change that parameter? \r\n\r\nAbout this:\r\n\r\nLike mentioned in the above comments, after a lot of time on this I found the issue.\r\n\r\nThe angular code was calling the rest api this way: http://localhost:8080/api\r\n\r\nWhen I changed it to the actual server ip address it worked perfectly. http://xx.xx.xxx.xx:8080/api","title":"GET http://localhost:8080/api net::ERR_CONNECTION_REFUSED","body":"<p>in what path is the file located to change that parameter?</p>\n<p>About this:</p>\n<p>Like mentioned in the above comments, after a lot of time on this I found the issue.</p>\n<p>The angular code was calling the rest api this way: http://localhost:8080/api</p>\n<p>When I changed it to the actual server ip address it worked perfectly. <a href=\"http://xx.xx.xxx.xx:8080/api\" rel=\"nofollow noreferrer\">http://xx.xx.xxx.xx:8080/api</a></p>\n"}],"owner":{"account_id":19950129,"reputation":601,"user_id":14619971,"display_name":"jkfe"},"comment_count":20,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":539,"favorite_count":0,"down_vote_count":3,"up_vote_count":1,"accepted_answer_id":77025319,"answer_count":2,"score":-2,"last_activity_date":1699919455,"creation_date":1693430484,"question_id":77011585,"body_markdown":"I have a frontend in Angular that access a backend in Java Spring.\r\n\r\nBoth in my dev computer work well and I can access and run the application in the browser correctly.\r\n\r\nNow I need to deploy it to a test server.\r\n\r\nI&#39;m deploying both frontend and backend to the same test server in Tomcat \\webapps.\r\n\r\nIn the test server both backend and frontend run on port 8080.\r\n\r\nThe problem is that when I access the deployed application from my dev machine like this:\r\n\r\n```http://testserverip:8080/myapp```\r\n\r\nI&#39;m getting this error in Chrome Dev Tools:\r\n\r\n```GET http://localhost:8080/api net::ERR_CONNECTION_REFUSED```\r\n\r\n\r\n\r\nUPDATE:\r\n\r\nI originally thought this was a CORS issue.\r\n\r\nBut realized it is not because both frontend and backend are running in the same Origin (http://localhost:8080) as both were deployed to the same Test Server, in the same Tomcat installation \\webapps and in the same port.\r\n\r\nSo I&#39;m removing the CORS code from the question.\r\n\r\nNow I placed logs in the frontend caller method and in the backend controller method.\r\n\r\nIt does execute correctly the frontend (the frontend log gets written).\r\n\r\nThen it calls the backend controller method.\r\n\r\nBut backend controller log never gets written.\r\n\r\nSo it is not getting to the backend.\r\n\r\nThe issue only happens when accessing the application frontend from the dev machine web browser.\r\n\r\nIf I log into the test server, open a browser there and access the frontend that way, it executes both frontend and backend correctly.\r\n\r\nSo what else could be blocking backend to be executed when accessing the front end outside the test server?","title":"GET http://localhost:8080/api net::ERR_CONNECTION_REFUSED","body":"<p>I have a frontend in Angular that access a backend in Java Spring.</p>\n<p>Both in my dev computer work well and I can access and run the application in the browser correctly.</p>\n<p>Now I need to deploy it to a test server.</p>\n<p>I'm deploying both frontend and backend to the same test server in Tomcat \\webapps.</p>\n<p>In the test server both backend and frontend run on port 8080.</p>\n<p>The problem is that when I access the deployed application from my dev machine like this:</p>\n<p><code>http://testserverip:8080/myapp</code></p>\n<p>I'm getting this error in Chrome Dev Tools:</p>\n<p><code>GET http://localhost:8080/api net::ERR_CONNECTION_REFUSED</code></p>\n<p>UPDATE:</p>\n<p>I originally thought this was a CORS issue.</p>\n<p>But realized it is not because both frontend and backend are running in the same Origin (http://localhost:8080) as both were deployed to the same Test Server, in the same Tomcat installation \\webapps and in the same port.</p>\n<p>So I'm removing the CORS code from the question.</p>\n<p>Now I placed logs in the frontend caller method and in the backend controller method.</p>\n<p>It does execute correctly the frontend (the frontend log gets written).</p>\n<p>Then it calls the backend controller method.</p>\n<p>But backend controller log never gets written.</p>\n<p>So it is not getting to the backend.</p>\n<p>The issue only happens when accessing the application frontend from the dev machine web browser.</p>\n<p>If I log into the test server, open a browser there and access the frontend that way, it executes both frontend and backend correctly.</p>\n<p>So what else could be blocking backend to be executed when accessing the front end outside the test server?</p>\n"},{"tags":["java","spring-boot","gradle","webpack"],"comments":[{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1699944418,"post_id":77477409,"comment_id":136590986,"body_markdown":"Remove the jar task, that destroys the spring boot jar runnability. Also remove the `$springBootVersion` from the dependencies, spring boot manages those already.","body":"Remove the jar task, that destroys the spring boot jar runnability. Also remove the <code>$springBootVersion</code> from the dependencies, spring boot manages those already."},{"owner":{"account_id":24725,"reputation":54586,"user_id":63074,"accept_rate":55,"display_name":"Mike Dinescu"},"score":0,"creation_date":1699949782,"post_id":77477409,"comment_id":136591649,"body_markdown":"Thanks -- I&#39;ve done some more reading about how spring boot implements executable Jars; I&#39;m starting to form the opinion that the trouble is caused by an incompatibility between the spring boot gradle plugin I am using (1.5.22) and the new-style dependency declarations in Gradle 7. If this is the case then a migration to spring boot 2.x would be required before I can do anything about the Gradle script and an eventual Gradle 7 migration","body":"Thanks -- I&#39;ve done some more reading about how spring boot implements executable Jars; I&#39;m starting to form the opinion that the trouble is caused by an incompatibility between the spring boot gradle plugin I am using (1.5.22) and the new-style dependency declarations in Gradle 7. If this is the case then a migration to spring boot 2.x would be required before I can do anything about the Gradle script and an eventual Gradle 7 migration"},{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1699950323,"post_id":77477409,"comment_id":136591741,"body_markdown":"I doubt it supports Gradle 7, the documentation mentions Gradle 2.9. So I would suspect an upgrade would be needed if you really wanted to do Gradle7 with Spring Boot 1.5. Which wouldn&#39;t be bad as Spring Boot 1.5 has had no support for quite a while already.","body":"I doubt it supports Gradle 7, the documentation mentions Gradle 2.9. So I would suspect an upgrade would be needed if you really wanted to do Gradle7 with Spring Boot 1.5. Which wouldn&#39;t be bad as Spring Boot 1.5 has had no support for quite a while already."}],"owner":{"account_id":24725,"reputation":54586,"user_id":63074,"accept_rate":55,"display_name":"Mike Dinescu"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":32,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1699918251,"creation_date":1699918251,"question_id":77477409,"body_markdown":"I&#39;m working on upgrading a Gradle build script from Gradle 6.9.4 to 7.x (or newer), for a SpringBoot based Java 11 web application. The original script is included below and it works correctly. The upgraded script doesn&#39;t work: the application fails to start (more details below). I could use a second pair of eyes from somebody who has more experience with Gradle and/or SpringBoot. I have very limited experience with both.\r\n\r\n----\r\n\r\nThe &quot;compile&quot; and &quot;testCompile&quot; dependency configuration keywords have been deprecated. So in order to make the script compatible with Gradle 7.x or newer, I&#39;ve had to replace both of them with alternative keywords. [According to the docs](https://docs.gradle.org/6.9.4/userguide/java_plugin.html#sec:java_plugin_and_dependency_management), the new-style of declaring dependencies involves replacing `compile` with `implementation` and `testCompile` with `testImplementation`. \r\n\r\nHowever, simply replacing &quot;compile&quot; with &quot;implementation&quot; doesn&#39;t work. It turns out, including dependencies as &quot;compile&quot; results in a fat jar, but specifying them as &quot;implementation&quot; does not.\r\n\r\nSo I&#39;ve also updated the `jar` task, based on [this guide](https://stackoverflow.com/questions/49278063/how-do-i-create-an-executable-fat-jar-with-gradle-with-implementation-dependenci), to make it generate a fat jar or all the dependencies. In the `jar` task, I&#39;ve added the following:\r\n\r\n```\r\nmanifest {\r\n   attributes &quot;Main-Class&quot;: &quot;com.namespace.ApplicationKt&quot;\r\n}\r\nfrom {\r\n   configurations.runtimeClasspath.collect { it.isDirectory() ? it : zipTree(it) }\r\n}\r\n```\r\n\r\nAfter making that change, running `./gradlew publish` does generate a fat jar, similar in size to the previous jar that was generated by &quot;compile&quot; and &quot;testCompile&quot;.\r\n\r\nBut attempting to run it using `java -jar build/libs/output.jar` still doesn&#39;t work. It throws this exception:\r\n\r\n```\r\nERROR org.springframework.boot.SpringApplication - Application startup failed\r\norg.springframework.context.ApplicationContextException: Unable to start embedded container; nested exception is org.springframework.context.ApplicationContextException: Unable to start EmbeddedWebApplicationContext due to missing EmbeddedServletContainerFactory bean.\r\n\tat org.springframework.boot.context.embedded.EmbeddedWebApplicationContext.onRefresh(EmbeddedWebApplicationContext.java:138)\r\n\tat org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:536)\r\n\tat org.springframework.boot.context.embedded.EmbeddedWebApplicationContext.refresh(EmbeddedWebApplicationContext.java:123)\r\n\tat org.springframework.boot.SpringApplication.refresh(SpringApplication.java:666)\r\n\tat org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:353)\r\n\tat org.springframework.boot.SpringApplication.run(SpringApplication.java:300)\r\n\tat org.springframework.boot.SpringApplication.run(SpringApplication.java:1082)\r\n\tat org.springframework.boot.SpringApplication.run(SpringApplication.java:1071)\r\n\tat com.amazon.duels.developer.portal.ApplicationKt.main(Application.kt:18)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:566)\r\n\tat org.springframework.boot.loader.MainMethodRunner.run(MainMethodRunner.java:48)\r\n\tat org.springframework.boot.loader.Launcher.launch(Launcher.java:87)\r\n\tat org.springframework.boot.loader.Launcher.launch(Launcher.java:51)\r\n\tat org.springframework.boot.loader.JarLauncher.main(JarLauncher.java:52)\r\n```\r\n\r\n\r\n\r\n## Original Gradle Build Script\r\n\r\n```\r\nbuildscript {\r\n    ext {\r\n        kotlinVersion = &#39;1.3.72&#39;\r\n        springBootVersion = &#39;1.5.22.RELEASE&#39;\r\n    }\r\n    repositories {\r\n        mavenCentral()\r\n        maven {\r\n            url &quot;https://plugins.gradle.org/m2/&quot;\r\n        }\r\n    }\r\n    dependencies {\r\n        classpath(&quot;org.springframework.boot:spring-boot-gradle-plugin:${springBootVersion}&quot;)\r\n        classpath(&quot;org.jetbrains.kotlin:kotlin-gradle-plugin:${kotlinVersion}&quot;)\r\n        classpath(&quot;org.jetbrains.kotlin:kotlin-allopen:${kotlinVersion}&quot;)\r\n        classpath(&quot;net.researchgate:gradle-release:2.8.1&quot;)\r\n        classpath(&quot;com.github.node-gradle:gradle-node-plugin:6.0.0&quot;)\r\n    }\r\n}\r\n\r\napply plugin: &#39;idea&#39;\r\napply plugin: &#39;kotlin&#39;\r\napply plugin: &#39;kotlin-spring&#39;\r\napply plugin: &#39;org.springframework.boot&#39;\r\napply plugin: &#39;maven-publish&#39;\r\napply plugin: &#39;net.researchgate.release&#39;\r\napply plugin: &#39;com.github.node-gradle.node&#39;\r\n\r\nsourceCompatibility = 11\r\ncompileKotlin.kotlinOptions.jvmTarget = &quot;11&quot;\r\ncompileTestKotlin.kotlinOptions.jvmTarget = &quot;11&quot;\r\n\r\nrepositories {\r\n    mavenCentral()\r\n    maven {\r\n            // [.. private maven repo details here ..]\r\n    }\r\n}\r\n\r\nnode {    \r\n    version = &#39;16.20.0&#39;\r\n    download = true\r\n}\r\n\r\ntask webpack(type: NodeTask) {\r\n    inputs.file(&quot;package-lock.json&quot;)\r\n    inputs.file(&quot;webpack.js&quot;)    \r\n    inputs.dir(&quot;${buildDir}/resources/main&quot;)\r\n    outputs.dir(&quot;build/resources&quot;)\r\n\r\n    script = project.file(&#39;node_modules/.bin/webpack&#39;)\r\n    args = [&#39;--config&#39;, &#39;webpack.js&#39;]\r\n}\r\nwebpack.dependsOn &#39;npmInstall&#39;\r\nbootRun.dependsOn webpack\r\nbuild.dependsOn webpack\r\n\r\nwebpack.mustRunAfter processResources\r\njar.mustRunAfter webpack\r\n\r\nbootRun {    \r\n    apply plugin: &#39;application&#39;\r\n    mainClassName = &quot;com.namespace.ApplicationKt&quot;    \r\n    args &#39;--debug&#39;\r\n}\r\n\r\ndependencies {\r\n    //Spring\r\n    compile(&quot;org.springframework.boot:spring-boot-starter-thymeleaf:$springBootVersion&quot;)\r\n    compile(&quot;org.springframework.boot:spring-boot-starter-web:$springBootVersion&quot;)\r\n    compile(&quot;org.springframework.boot:spring-boot-starter-actuator:$springBootVersion&quot;)\r\n    compile(&quot;org.springframework.boot:spring-boot-starter-cache:$springBootVersion&quot;)\r\n    testCompile(&quot;org.springframework.boot:spring-boot-starter-test:$springBootVersion&quot;)\r\n\r\n    // Kotlin\r\n    compile(&quot;org.jetbrains.kotlin:kotlin-stdlib-jdk8:$kotlinVersion&quot;)\r\n    compile(&quot;org.jetbrains.kotlin:kotlin-reflect:$kotlinVersion&quot;)    \r\n\r\n    // Klaxon\r\n    compile(&#39;com.beust:klaxon:5.4&#39;)\r\n}\r\n\r\n// Exclude sass and js resources from the deployable jar\r\nprocessResources {\r\n    exclude &#39;**/sass/*&#39;\r\n    exclude &#39;**/js/*&#39;\r\n}\r\n\r\njar {\r\n    exclude &#39;**/css/*.css&#39;\r\n    exclude &#39;**/js/*&#39;\r\n}\r\n\r\nrelease {\r\n    tagTemplate = &#39;v${version}&#39;\r\n    git.requireBranch = &#39;mainline&#39;\r\n}\r\n\r\npublish.dependsOn build\r\npublishing {\r\n    repositories {\r\n        maven {\r\n            // [.. private maven repo details here ..]\r\n        }\r\n    }\r\n\r\n    publications {\r\n        mavenJava(MavenPublication) {\r\n            groupId &#39;com.namespace.my-application&#39;\r\n            artifactId &#39;my-application&#39;\r\n            version project.version\r\n            from components.java\r\n        }\r\n    }\r\n}\r\n\r\n/** \r\n * This enables the use of ElasticBeanstalk extensions\r\n * .ebextension folder must be in the root of the zip/jar that is deployed to ElasticBeanstalk.\r\n */\r\nbootRepackage.doLast {\r\n    // put .ebextension and .platform in the jar for manual deployment\r\n    exec {\r\n        executable &#39;sh&#39;\r\n        args &#39;-c&#39;, &#39;jar uf build/libs/*.jar .ebextensions .platform&#39;\r\n    }\r\n}\r\n```\r\n\r\n----\r\n\r\n## Updated Gradle Build Script\r\n\r\n```\r\nbuildscript {\r\n    ext {\r\n        kotlinVersion = &#39;1.3.72&#39;\r\n        springBootVersion = &#39;1.5.22.RELEASE&#39;\r\n    }\r\n    repositories {\r\n        mavenCentral()\r\n        maven {\r\n            url &quot;https://plugins.gradle.org/m2/&quot;\r\n        }\r\n    }\r\n    dependencies {\r\n        classpath(&quot;org.springframework.boot:spring-boot-gradle-plugin:${springBootVersion}&quot;)\r\n        classpath(&quot;org.jetbrains.kotlin:kotlin-gradle-plugin:${kotlinVersion}&quot;)\r\n        classpath(&quot;org.jetbrains.kotlin:kotlin-allopen:${kotlinVersion}&quot;)\r\n        classpath(&quot;net.researchgate:gradle-release:2.8.1&quot;)\r\n        classpath(&quot;com.github.node-gradle:gradle-node-plugin:6.0.0&quot;)\r\n    }\r\n}\r\n\r\napply plugin: &#39;idea&#39;\r\napply plugin: &#39;kotlin&#39;\r\napply plugin: &#39;kotlin-spring&#39;\r\napply plugin: &#39;org.springframework.boot&#39;\r\napply plugin: &#39;maven-publish&#39;\r\napply plugin: &#39;net.researchgate.release&#39;\r\napply plugin: &#39;com.github.node-gradle.node&#39;\r\n\r\nsourceCompatibility = 11\r\ncompileKotlin.kotlinOptions.jvmTarget = &quot;11&quot;\r\ncompileTestKotlin.kotlinOptions.jvmTarget = &quot;11&quot;\r\n\r\nrepositories {\r\n    mavenCentral()\r\n    maven {\r\n            // [.. private maven repo details here ..]\r\n    }\r\n}\r\n\r\nnode {    \r\n    version = &#39;16.20.0&#39;\r\n    download = true\r\n}\r\n\r\ntask webpack(type: NodeTask) {\r\n    inputs.file(&quot;package-lock.json&quot;)\r\n    inputs.file(&quot;webpack.js&quot;)    \r\n    inputs.dir(&quot;${buildDir}/resources/main&quot;)\r\n    outputs.dir(&quot;build/resources&quot;)\r\n\r\n    script = project.file(&#39;node_modules/.bin/webpack&#39;)\r\n    args = [&#39;--config&#39;, &#39;webpack.js&#39;]\r\n}\r\nwebpack.dependsOn &#39;npmInstall&#39;\r\nbootRun.dependsOn webpack\r\nbuild.dependsOn webpack\r\n\r\nwebpack.mustRunAfter processResources\r\njar.mustRunAfter webpack\r\n\r\nbootRun {    \r\n    apply plugin: &#39;application&#39;\r\n    mainClassName = &quot;com.namespace.ApplicationKt&quot;    \r\n    args &#39;--debug&#39;\r\n}\r\n\r\ndependencies {\r\n    //Spring\r\n    implementation(&quot;org.springframework.boot:spring-boot-starter-thymeleaf:$springBootVersion&quot;)\r\n    implementation(&quot;org.springframework.boot:spring-boot-starter-web:$springBootVersion&quot;)\r\n    implementation(&quot;org.springframework.boot:spring-boot-starter-actuator:$springBootVersion&quot;)\r\n    implementation(&quot;org.springframework.boot:spring-boot-starter-cache:$springBootVersion&quot;)\r\n    testImplementation(&quot;org.springframework.boot:spring-boot-starter-test:$springBootVersion&quot;)\r\n\r\n    // Kotlin\r\n    implementation(&quot;org.jetbrains.kotlin:kotlin-stdlib-jdk8:$kotlinVersion&quot;)\r\n    implementation(&quot;org.jetbrains.kotlin:kotlin-reflect:$kotlinVersion&quot;)    \r\n\r\n    // Klaxon\r\n    implementation(&#39;com.beust:klaxon:5.4&#39;)\r\n}\r\n\r\n// Exclude sass and js resources from the deployable jar\r\nprocessResources {\r\n    exclude &#39;**/sass/*&#39;\r\n    exclude &#39;**/js/*&#39;\r\n}\r\n\r\njar {\r\n    exclude &#39;**/css/*.css&#39;\r\n    exclude &#39;**/js/*&#39;\r\n    manifest {\r\n        attributes &quot;Main-Class&quot;: &quot;com.namespace.ApplicationKt&quot;\r\n    }\r\n    from {\r\n        configurations.runtimeClasspath.collect { it.isDirectory() ? it : zipTree(it) }\r\n    }\r\n}\r\n\r\nrelease {\r\n    tagTemplate = &#39;v${version}&#39;\r\n    git.requireBranch = &#39;mainline&#39;\r\n}\r\n\r\npublish.dependsOn build\r\npublishing {\r\n    repositories {\r\n        maven {\r\n            // [.. private maven repo details here ..]\r\n        }\r\n    }\r\n\r\n    publications {\r\n        mavenJava(MavenPublication) {\r\n            groupId &#39;com.namespace.my-application&#39;\r\n            artifactId &#39;my-application&#39;\r\n            version project.version\r\n            from components.java\r\n        }\r\n    }\r\n}\r\n\r\n/** \r\n * This enables the use of ElasticBeanstalk extensions\r\n * .ebextension folder must be in the root of the zip/jar that is deployed to ElasticBeanstalk.\r\n */\r\nbootRepackage.doLast {\r\n    // put .ebextension and .platform in the jar for manual deployment\r\n    exec {\r\n        executable &#39;sh&#39;\r\n        args &#39;-c&#39;, &#39;jar uf build/libs/*.jar .ebextensions .platform&#39;\r\n    }\r\n}\r\n```","title":"Gradle Build Script Upgrade from 6.x to 7.x","body":"<p>I'm working on upgrading a Gradle build script from Gradle 6.9.4 to 7.x (or newer), for a SpringBoot based Java 11 web application. The original script is included below and it works correctly. The upgraded script doesn't work: the application fails to start (more details below). I could use a second pair of eyes from somebody who has more experience with Gradle and/or SpringBoot. I have very limited experience with both.</p>\n<hr />\n<p>The &quot;compile&quot; and &quot;testCompile&quot; dependency configuration keywords have been deprecated. So in order to make the script compatible with Gradle 7.x or newer, I've had to replace both of them with alternative keywords. <a href=\"https://docs.gradle.org/6.9.4/userguide/java_plugin.html#sec:java_plugin_and_dependency_management\" rel=\"nofollow noreferrer\">According to the docs</a>, the new-style of declaring dependencies involves replacing <code>compile</code> with <code>implementation</code> and <code>testCompile</code> with <code>testImplementation</code>.</p>\n<p>However, simply replacing &quot;compile&quot; with &quot;implementation&quot; doesn't work. It turns out, including dependencies as &quot;compile&quot; results in a fat jar, but specifying them as &quot;implementation&quot; does not.</p>\n<p>So I've also updated the <code>jar</code> task, based on <a href=\"https://stackoverflow.com/questions/49278063/how-do-i-create-an-executable-fat-jar-with-gradle-with-implementation-dependenci\">this guide</a>, to make it generate a fat jar or all the dependencies. In the <code>jar</code> task, I've added the following:</p>\n<pre><code>manifest {\n   attributes &quot;Main-Class&quot;: &quot;com.namespace.ApplicationKt&quot;\n}\nfrom {\n   configurations.runtimeClasspath.collect { it.isDirectory() ? it : zipTree(it) }\n}\n</code></pre>\n<p>After making that change, running <code>./gradlew publish</code> does generate a fat jar, similar in size to the previous jar that was generated by &quot;compile&quot; and &quot;testCompile&quot;.</p>\n<p>But attempting to run it using <code>java -jar build/libs/output.jar</code> still doesn't work. It throws this exception:</p>\n<pre><code>ERROR org.springframework.boot.SpringApplication - Application startup failed\norg.springframework.context.ApplicationContextException: Unable to start embedded container; nested exception is org.springframework.context.ApplicationContextException: Unable to start EmbeddedWebApplicationContext due to missing EmbeddedServletContainerFactory bean.\n    at org.springframework.boot.context.embedded.EmbeddedWebApplicationContext.onRefresh(EmbeddedWebApplicationContext.java:138)\n    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:536)\n    at org.springframework.boot.context.embedded.EmbeddedWebApplicationContext.refresh(EmbeddedWebApplicationContext.java:123)\n    at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:666)\n    at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:353)\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:300)\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:1082)\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:1071)\n    at com.amazon.duels.developer.portal.ApplicationKt.main(Application.kt:18)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n    at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.base/java.lang.reflect.Method.invoke(Method.java:566)\n    at org.springframework.boot.loader.MainMethodRunner.run(MainMethodRunner.java:48)\n    at org.springframework.boot.loader.Launcher.launch(Launcher.java:87)\n    at org.springframework.boot.loader.Launcher.launch(Launcher.java:51)\n    at org.springframework.boot.loader.JarLauncher.main(JarLauncher.java:52)\n</code></pre>\n<h2>Original Gradle Build Script</h2>\n<pre><code>buildscript {\n    ext {\n        kotlinVersion = '1.3.72'\n        springBootVersion = '1.5.22.RELEASE'\n    }\n    repositories {\n        mavenCentral()\n        maven {\n            url &quot;https://plugins.gradle.org/m2/&quot;\n        }\n    }\n    dependencies {\n        classpath(&quot;org.springframework.boot:spring-boot-gradle-plugin:${springBootVersion}&quot;)\n        classpath(&quot;org.jetbrains.kotlin:kotlin-gradle-plugin:${kotlinVersion}&quot;)\n        classpath(&quot;org.jetbrains.kotlin:kotlin-allopen:${kotlinVersion}&quot;)\n        classpath(&quot;net.researchgate:gradle-release:2.8.1&quot;)\n        classpath(&quot;com.github.node-gradle:gradle-node-plugin:6.0.0&quot;)\n    }\n}\n\napply plugin: 'idea'\napply plugin: 'kotlin'\napply plugin: 'kotlin-spring'\napply plugin: 'org.springframework.boot'\napply plugin: 'maven-publish'\napply plugin: 'net.researchgate.release'\napply plugin: 'com.github.node-gradle.node'\n\nsourceCompatibility = 11\ncompileKotlin.kotlinOptions.jvmTarget = &quot;11&quot;\ncompileTestKotlin.kotlinOptions.jvmTarget = &quot;11&quot;\n\nrepositories {\n    mavenCentral()\n    maven {\n            // [.. private maven repo details here ..]\n    }\n}\n\nnode {    \n    version = '16.20.0'\n    download = true\n}\n\ntask webpack(type: NodeTask) {\n    inputs.file(&quot;package-lock.json&quot;)\n    inputs.file(&quot;webpack.js&quot;)    \n    inputs.dir(&quot;${buildDir}/resources/main&quot;)\n    outputs.dir(&quot;build/resources&quot;)\n\n    script = project.file('node_modules/.bin/webpack')\n    args = ['--config', 'webpack.js']\n}\nwebpack.dependsOn 'npmInstall'\nbootRun.dependsOn webpack\nbuild.dependsOn webpack\n\nwebpack.mustRunAfter processResources\njar.mustRunAfter webpack\n\nbootRun {    \n    apply plugin: 'application'\n    mainClassName = &quot;com.namespace.ApplicationKt&quot;    \n    args '--debug'\n}\n\ndependencies {\n    //Spring\n    compile(&quot;org.springframework.boot:spring-boot-starter-thymeleaf:$springBootVersion&quot;)\n    compile(&quot;org.springframework.boot:spring-boot-starter-web:$springBootVersion&quot;)\n    compile(&quot;org.springframework.boot:spring-boot-starter-actuator:$springBootVersion&quot;)\n    compile(&quot;org.springframework.boot:spring-boot-starter-cache:$springBootVersion&quot;)\n    testCompile(&quot;org.springframework.boot:spring-boot-starter-test:$springBootVersion&quot;)\n\n    // Kotlin\n    compile(&quot;org.jetbrains.kotlin:kotlin-stdlib-jdk8:$kotlinVersion&quot;)\n    compile(&quot;org.jetbrains.kotlin:kotlin-reflect:$kotlinVersion&quot;)    \n\n    // Klaxon\n    compile('com.beust:klaxon:5.4')\n}\n\n// Exclude sass and js resources from the deployable jar\nprocessResources {\n    exclude '**/sass/*'\n    exclude '**/js/*'\n}\n\njar {\n    exclude '**/css/*.css'\n    exclude '**/js/*'\n}\n\nrelease {\n    tagTemplate = 'v${version}'\n    git.requireBranch = 'mainline'\n}\n\npublish.dependsOn build\npublishing {\n    repositories {\n        maven {\n            // [.. private maven repo details here ..]\n        }\n    }\n\n    publications {\n        mavenJava(MavenPublication) {\n            groupId 'com.namespace.my-application'\n            artifactId 'my-application'\n            version project.version\n            from components.java\n        }\n    }\n}\n\n/** \n * This enables the use of ElasticBeanstalk extensions\n * .ebextension folder must be in the root of the zip/jar that is deployed to ElasticBeanstalk.\n */\nbootRepackage.doLast {\n    // put .ebextension and .platform in the jar for manual deployment\n    exec {\n        executable 'sh'\n        args '-c', 'jar uf build/libs/*.jar .ebextensions .platform'\n    }\n}\n</code></pre>\n<hr />\n<h2>Updated Gradle Build Script</h2>\n<pre><code>buildscript {\n    ext {\n        kotlinVersion = '1.3.72'\n        springBootVersion = '1.5.22.RELEASE'\n    }\n    repositories {\n        mavenCentral()\n        maven {\n            url &quot;https://plugins.gradle.org/m2/&quot;\n        }\n    }\n    dependencies {\n        classpath(&quot;org.springframework.boot:spring-boot-gradle-plugin:${springBootVersion}&quot;)\n        classpath(&quot;org.jetbrains.kotlin:kotlin-gradle-plugin:${kotlinVersion}&quot;)\n        classpath(&quot;org.jetbrains.kotlin:kotlin-allopen:${kotlinVersion}&quot;)\n        classpath(&quot;net.researchgate:gradle-release:2.8.1&quot;)\n        classpath(&quot;com.github.node-gradle:gradle-node-plugin:6.0.0&quot;)\n    }\n}\n\napply plugin: 'idea'\napply plugin: 'kotlin'\napply plugin: 'kotlin-spring'\napply plugin: 'org.springframework.boot'\napply plugin: 'maven-publish'\napply plugin: 'net.researchgate.release'\napply plugin: 'com.github.node-gradle.node'\n\nsourceCompatibility = 11\ncompileKotlin.kotlinOptions.jvmTarget = &quot;11&quot;\ncompileTestKotlin.kotlinOptions.jvmTarget = &quot;11&quot;\n\nrepositories {\n    mavenCentral()\n    maven {\n            // [.. private maven repo details here ..]\n    }\n}\n\nnode {    \n    version = '16.20.0'\n    download = true\n}\n\ntask webpack(type: NodeTask) {\n    inputs.file(&quot;package-lock.json&quot;)\n    inputs.file(&quot;webpack.js&quot;)    \n    inputs.dir(&quot;${buildDir}/resources/main&quot;)\n    outputs.dir(&quot;build/resources&quot;)\n\n    script = project.file('node_modules/.bin/webpack')\n    args = ['--config', 'webpack.js']\n}\nwebpack.dependsOn 'npmInstall'\nbootRun.dependsOn webpack\nbuild.dependsOn webpack\n\nwebpack.mustRunAfter processResources\njar.mustRunAfter webpack\n\nbootRun {    \n    apply plugin: 'application'\n    mainClassName = &quot;com.namespace.ApplicationKt&quot;    \n    args '--debug'\n}\n\ndependencies {\n    //Spring\n    implementation(&quot;org.springframework.boot:spring-boot-starter-thymeleaf:$springBootVersion&quot;)\n    implementation(&quot;org.springframework.boot:spring-boot-starter-web:$springBootVersion&quot;)\n    implementation(&quot;org.springframework.boot:spring-boot-starter-actuator:$springBootVersion&quot;)\n    implementation(&quot;org.springframework.boot:spring-boot-starter-cache:$springBootVersion&quot;)\n    testImplementation(&quot;org.springframework.boot:spring-boot-starter-test:$springBootVersion&quot;)\n\n    // Kotlin\n    implementation(&quot;org.jetbrains.kotlin:kotlin-stdlib-jdk8:$kotlinVersion&quot;)\n    implementation(&quot;org.jetbrains.kotlin:kotlin-reflect:$kotlinVersion&quot;)    \n\n    // Klaxon\n    implementation('com.beust:klaxon:5.4')\n}\n\n// Exclude sass and js resources from the deployable jar\nprocessResources {\n    exclude '**/sass/*'\n    exclude '**/js/*'\n}\n\njar {\n    exclude '**/css/*.css'\n    exclude '**/js/*'\n    manifest {\n        attributes &quot;Main-Class&quot;: &quot;com.namespace.ApplicationKt&quot;\n    }\n    from {\n        configurations.runtimeClasspath.collect { it.isDirectory() ? it : zipTree(it) }\n    }\n}\n\nrelease {\n    tagTemplate = 'v${version}'\n    git.requireBranch = 'mainline'\n}\n\npublish.dependsOn build\npublishing {\n    repositories {\n        maven {\n            // [.. private maven repo details here ..]\n        }\n    }\n\n    publications {\n        mavenJava(MavenPublication) {\n            groupId 'com.namespace.my-application'\n            artifactId 'my-application'\n            version project.version\n            from components.java\n        }\n    }\n}\n\n/** \n * This enables the use of ElasticBeanstalk extensions\n * .ebextension folder must be in the root of the zip/jar that is deployed to ElasticBeanstalk.\n */\nbootRepackage.doLast {\n    // put .ebextension and .platform in the jar for manual deployment\n    exec {\n        executable 'sh'\n        args '-c', 'jar uf build/libs/*.jar .ebextensions .platform'\n    }\n}\n</code></pre>\n"},{"tags":["java","sorting","recursion","quicksort"],"answers":[{"tags":[],"owner":{"account_id":2792262,"reputation":163837,"user_id":2402272,"accept_rate":85,"display_name":"John Bollinger"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1699915280,"creation_date":1699915280,"answer_id":77477263,"question_id":77476992,"body_markdown":"Your conditions in these loops are wrong:\r\n\r\n&gt;                 while(j&gt;= 0 &amp;&amp;a[j]&gt;a[ipivot]){\r\n&gt;                    j--;\r\n&gt;                 }\r\n&gt;                 \r\n&gt;                 \r\n&gt;                 // Look for an element &gt;p left-hand side \r\n&gt;                 while(i&lt; a.length &amp;&amp; a[i]&lt;a[ipivot]){\r\n&gt;                    i++;\r\n&gt;                 }\r\n\r\n`j` should not be allowed to go below `from`, and `i` should not be allowed to go above `to`.  Alternatively, you could just break the loops as soon as `i` and `j` cross:\r\n```\r\n            while (j &gt;= i &amp;&amp; a[j] &gt; a[ipivot]) {\r\n               j--;\r\n            }\r\n            \r\n            \r\n            // Look for an element &gt;p left-hand side \r\n            while (i &lt;= j &amp;&amp; a[i] &lt; a[ipivot]) {\r\n               i++;\r\n            }\r\n```\r\nThis comment is incorrect:\r\n\r\n&gt;              // The pivot can now be moved to its final position at i.\r\n\r\nThe final position for the pivot is not `i`, but rather `i-1`.  Which can also be spelled `j` because the loop will terminate as soon as `i` and `j` cross.\r\n\r\nOne way to see that is to consider the extreme case that the pivot element happens to be the least in the subarray.  Then `i` will never be incremented from its initial value of `ipivot + 1`, but the correct index for the pivot element is its initial one, `ipivot`.\r\n\r\nNote also that if you allow `i` to increase all the way to `a.length` then at that point evaluating `a[i]` will yield that `IndexOutOfBoundsException`.  This too is related to the fact that at the end of the partitioning loop, the top index of the left partition is `i - 1`, not `i`.","title":"Quicksort out of bounds or loop","body":"<p>Your conditions in these loops are wrong:</p>\n<blockquote>\n<pre><code>            while(j&gt;= 0 &amp;&amp;a[j]&gt;a[ipivot]){\n               j--;\n            }\n            \n            \n            // Look for an element &gt;p left-hand side \n            while(i&lt; a.length &amp;&amp; a[i]&lt;a[ipivot]){\n               i++;\n            }\n</code></pre>\n</blockquote>\n<p><code>j</code> should not be allowed to go below <code>from</code>, and <code>i</code> should not be allowed to go above <code>to</code>.  Alternatively, you could just break the loops as soon as <code>i</code> and <code>j</code> cross:</p>\n<pre><code>            while (j &gt;= i &amp;&amp; a[j] &gt; a[ipivot]) {\n               j--;\n            }\n            \n            \n            // Look for an element &gt;p left-hand side \n            while (i &lt;= j &amp;&amp; a[i] &lt; a[ipivot]) {\n               i++;\n            }\n</code></pre>\n<p>This comment is incorrect:</p>\n<blockquote>\n<pre><code>         // The pivot can now be moved to its final position at i.\n</code></pre>\n</blockquote>\n<p>The final position for the pivot is not <code>i</code>, but rather <code>i-1</code>.  Which can also be spelled <code>j</code> because the loop will terminate as soon as <code>i</code> and <code>j</code> cross.</p>\n<p>One way to see that is to consider the extreme case that the pivot element happens to be the least in the subarray.  Then <code>i</code> will never be incremented from its initial value of <code>ipivot + 1</code>, but the correct index for the pivot element is its initial one, <code>ipivot</code>.</p>\n<p>Note also that if you allow <code>i</code> to increase all the way to <code>a.length</code> then at that point evaluating <code>a[i]</code> will yield that <code>IndexOutOfBoundsException</code>.  This too is related to the fact that at the end of the partitioning loop, the top index of the left partition is <code>i - 1</code>, not <code>i</code>.</p>\n"},{"tags":[],"owner":{"account_id":23740623,"reputation":1,"user_id":17758716,"display_name":"Reilas"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1699918108,"creation_date":1699918108,"answer_id":77477405,"question_id":77476992,"body_markdown":"Here is an implementation, using an algorithm from the _Wikipedia_ article.\\\r\n_[Wikipedia &amp;ndash; Quicksort &amp;ndash; Lomuto partition scheme](https://en.wikipedia.org/wiki/Quicksort#Lomuto_partition_scheme)_.\r\n\r\nThe comments are from the original.\r\n\r\n```java\r\n// Sorts a (portion of an) array, divides it into partitions, then sorts those\r\nvoid quicksort(int[] A, int lo, int hi) {\r\n    // Ensure indices are in correct order\r\n    if (lo &gt;= hi || lo &lt; 0) return;\r\n\r\n    // Partition array and get the pivot index\r\n    int p = partition(A, lo, hi);\r\n\r\n    // Sort the two partitions\r\n    quicksort(A, lo, p - 1); // Left side of pivot\r\n    quicksort(A, p + 1, hi); // Right side of pivot\r\n}\r\n\r\n// Divides array into two partitions\r\nint partition(int[] A, int lo, int hi) {\r\n    int pivot = A[hi]; // Choose the last element as the pivot\r\n\r\n    // Temporary pivot index\r\n    int i = lo - 1, t;\r\n\r\n    for (int j = lo; j &lt;= hi - 1; j++) {\r\n        // If the current element is less than or equal to the pivot\r\n        if (A[j] &lt;= pivot) {\r\n            // Move the temporary pivot index forward\r\n            i = i + 1;\r\n            // Swap the current element with the element at the temporary pivot index\r\n            t = A[i];\r\n            A[i] = A[j];\r\n            A[j] = t;\r\n        }\r\n    }\r\n\r\n    // Move the pivot element to the correct pivot position (between the smaller and larger elements)\r\n    i = i + 1;\r\n    t = A[i];\r\n    A[i] = A[hi];\r\n    A[hi] = t;\r\n    return i; // the pivot index\r\n}\r\n```","title":"Quicksort out of bounds or loop","body":"<p>Here is an implementation, using an algorithm from the <em>Wikipedia</em> article.<br />\n<em><a href=\"https://en.wikipedia.org/wiki/Quicksort#Lomuto_partition_scheme\" rel=\"nofollow noreferrer\">Wikipedia – Quicksort – Lomuto partition scheme</a></em>.</p>\n<p>The comments are from the original.</p>\n<pre class=\"lang-java prettyprint-override\"><code>// Sorts a (portion of an) array, divides it into partitions, then sorts those\nvoid quicksort(int[] A, int lo, int hi) {\n    // Ensure indices are in correct order\n    if (lo &gt;= hi || lo &lt; 0) return;\n\n    // Partition array and get the pivot index\n    int p = partition(A, lo, hi);\n\n    // Sort the two partitions\n    quicksort(A, lo, p - 1); // Left side of pivot\n    quicksort(A, p + 1, hi); // Right side of pivot\n}\n\n// Divides array into two partitions\nint partition(int[] A, int lo, int hi) {\n    int pivot = A[hi]; // Choose the last element as the pivot\n\n    // Temporary pivot index\n    int i = lo - 1, t;\n\n    for (int j = lo; j &lt;= hi - 1; j++) {\n        // If the current element is less than or equal to the pivot\n        if (A[j] &lt;= pivot) {\n            // Move the temporary pivot index forward\n            i = i + 1;\n            // Swap the current element with the element at the temporary pivot index\n            t = A[i];\n            A[i] = A[j];\n            A[j] = t;\n        }\n    }\n\n    // Move the pivot element to the correct pivot position (between the smaller and larger elements)\n    i = i + 1;\n    t = A[i];\n    A[i] = A[hi];\n    A[hi] = t;\n    return i; // the pivot index\n}\n</code></pre>\n"}],"owner":{"account_id":29895339,"reputation":11,"user_id":22910417,"display_name":"Veee"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":36,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":2,"score":0,"last_activity_date":1699918108,"creation_date":1699910975,"question_id":77476992,"body_markdown":"I&#39;m currently trying to implement quicksort in java, when i run the programm i either get an index out of bounds for the array length or an infinite loop, dont ask me how. Furthermore the swapping itself, when it works, is not correct so yea. \r\n\r\n```\r\npublic class Quicksort {\r\n\r\n   /*\r\n    * Entry method for Quicksort\r\n    */\r\n   public static void quicksort(int[] a) {\r\n      quicksort(a, 0, a.length-1);\r\n   }\r\n\r\n   /*\r\n    * Quicksort! \r\n    * Operates in-place, i.e. it doesn&#39;t create a copy.\r\n    */  \r\n   public static void quicksort(int[] a, int from, int to) {\r\n      // Base case: Sorting range is 1 element or empty.\r\n      if(from &gt;= to){\r\n         return;\r\n      }\r\n      // TODO\r\n      else{\r\n         \r\n         \r\n         \r\n         int ipivot = from; // Pivot p\r\n         System.out.println(&quot;Pivot p = &quot; + a[ipivot]);\r\n         printArray(a);\r\n         \r\n         // Split the array in two ranges: Left are the elements &lt;=p and right &gt;p.\r\n         // Do this by swapping the elements that don&#39;t belong in the given range. \r\n         // If i and j cross, swapping is finished.\r\n         int i = ipivot+1;\r\n         int j = to;\r\n         while (i&lt;j) {\r\n            // Look for an element &lt;=p right-hand side \r\n            while(j&gt;= 0 &amp;&amp;a[j]&gt;a[ipivot]){\r\n               j--;\r\n            }\r\n            \r\n            \r\n            // Look for an element &gt;p left-hand side \r\n            while(i&lt; a.length &amp;&amp; a[i]&lt;a[ipivot]){\r\n               i++;\r\n            }\r\n            \r\n            \r\n            // Swap the elements, but only if pointers aren&#39;t crossed.\r\n            if (i&lt;j) {\r\n               swap(a, i, j);\r\n            } \r\n            else {\r\n               break;\r\n            }\r\n \r\n               \r\n         }\r\n         // The pivot can now be moved to its final position at i.\r\n         // NOTE: Check if pivot needs to be moved BEFORE i.\r\n         int ipivot_final =i;\r\n         System.out.println(&quot;swapping &quot; + a[ipivot] +&quot; @&quot;+ipivot+&quot; and &quot; + a[ipivot_final]+&quot; @&quot;+ipivot_final + &quot; (pivot)&quot;);\r\n         swap(a, ipivot, ipivot_final);\r\n         \r\n         printArray(a);\r\n         System.out.println();\r\n         \r\n         // Recursion case: Sort left and right range of pivot recursively.\r\n         quicksort(a, from, ipivot_final-1);\r\n         quicksort(a, ipivot_final+1, to);\r\n      }\r\n   }\r\n   /*\r\n    * HELPER METHODS\r\n    */\r\n   public static void printArray(int[] a) {\r\n      for (int i=0; i&lt;a.length; i++) {\r\n         System.out.print(a[i] + &quot;, &quot;);\r\n      }\r\n      System.out.println();\r\n   }\r\n\r\n   public static boolean isSorted( int[] array ) {\r\n      for ( int j=0; j&lt;array.length-1; j++ ) {\r\n         if (array[j] &gt; array[j+1])\r\n            return false;      \r\n      }\r\n      return true;\r\n   }\r\n\r\n   private static int[] createRandomArray(int size, int minVal, int maxVal) {\r\n      int[] a = new int[size];\r\n      for (int i=0; i&lt;a.length; i++) {\r\n         a[i] = (int) (Math.random()*(maxVal-minVal) + minVal);\r\n      }\r\n      return a;\r\n   }\r\n\r\n   private static void swap(int[] a, int i, int j) {\r\n      int tmp = a[i];\r\n      a[i] = a[j];\r\n      a[j] = tmp;\r\n   }\r\n   \r\n   \r\n   /*\r\n    * MAIN\r\n    */\r\n\r\n   public static void main(String[] args) {\r\n      final int MINSIZE = 10;\r\n      final int MAXSIZE = 10;\r\n      for (int size = MINSIZE; size &lt;= MAXSIZE; size++) {\r\n         int[] a = createRandomArray(size, 0, size);\r\n         System.out.println(&quot;Unsorted array of size &quot;+a.length);\r\n         printArray(a);\r\n         System.out.println(&quot;\\nRunning Quicksort ...&quot;);\r\n         quicksort(a);\r\n         System.out.println(&quot;\\nSorted array:&quot;);\r\n         printArray(a);\r\n         assert isSorted(a) : &quot;Array is not sorted!&quot;;\r\n         if (isSorted(a))\r\n            System.out.println(&quot;\\n\\nSuccess!!\\n\\n&quot;);\r\n         else\r\n            System.out.println(&quot;\\n\\nERROR !! Something went wrong.\\n\\n&quot;);\r\n      }\r\n   }\r\n\r\n}\r\n```\r\n\r\n\r\nI&#39;ve tried changing the order of the conditions aswell as the conditions themself","title":"Quicksort out of bounds or loop","body":"<p>I'm currently trying to implement quicksort in java, when i run the programm i either get an index out of bounds for the array length or an infinite loop, dont ask me how. Furthermore the swapping itself, when it works, is not correct so yea.</p>\n<pre><code>public class Quicksort {\n\n   /*\n    * Entry method for Quicksort\n    */\n   public static void quicksort(int[] a) {\n      quicksort(a, 0, a.length-1);\n   }\n\n   /*\n    * Quicksort! \n    * Operates in-place, i.e. it doesn't create a copy.\n    */  \n   public static void quicksort(int[] a, int from, int to) {\n      // Base case: Sorting range is 1 element or empty.\n      if(from &gt;= to){\n         return;\n      }\n      // TODO\n      else{\n         \n         \n         \n         int ipivot = from; // Pivot p\n         System.out.println(&quot;Pivot p = &quot; + a[ipivot]);\n         printArray(a);\n         \n         // Split the array in two ranges: Left are the elements &lt;=p and right &gt;p.\n         // Do this by swapping the elements that don't belong in the given range. \n         // If i and j cross, swapping is finished.\n         int i = ipivot+1;\n         int j = to;\n         while (i&lt;j) {\n            // Look for an element &lt;=p right-hand side \n            while(j&gt;= 0 &amp;&amp;a[j]&gt;a[ipivot]){\n               j--;\n            }\n            \n            \n            // Look for an element &gt;p left-hand side \n            while(i&lt; a.length &amp;&amp; a[i]&lt;a[ipivot]){\n               i++;\n            }\n            \n            \n            // Swap the elements, but only if pointers aren't crossed.\n            if (i&lt;j) {\n               swap(a, i, j);\n            } \n            else {\n               break;\n            }\n \n               \n         }\n         // The pivot can now be moved to its final position at i.\n         // NOTE: Check if pivot needs to be moved BEFORE i.\n         int ipivot_final =i;\n         System.out.println(&quot;swapping &quot; + a[ipivot] +&quot; @&quot;+ipivot+&quot; and &quot; + a[ipivot_final]+&quot; @&quot;+ipivot_final + &quot; (pivot)&quot;);\n         swap(a, ipivot, ipivot_final);\n         \n         printArray(a);\n         System.out.println();\n         \n         // Recursion case: Sort left and right range of pivot recursively.\n         quicksort(a, from, ipivot_final-1);\n         quicksort(a, ipivot_final+1, to);\n      }\n   }\n   /*\n    * HELPER METHODS\n    */\n   public static void printArray(int[] a) {\n      for (int i=0; i&lt;a.length; i++) {\n         System.out.print(a[i] + &quot;, &quot;);\n      }\n      System.out.println();\n   }\n\n   public static boolean isSorted( int[] array ) {\n      for ( int j=0; j&lt;array.length-1; j++ ) {\n         if (array[j] &gt; array[j+1])\n            return false;      \n      }\n      return true;\n   }\n\n   private static int[] createRandomArray(int size, int minVal, int maxVal) {\n      int[] a = new int[size];\n      for (int i=0; i&lt;a.length; i++) {\n         a[i] = (int) (Math.random()*(maxVal-minVal) + minVal);\n      }\n      return a;\n   }\n\n   private static void swap(int[] a, int i, int j) {\n      int tmp = a[i];\n      a[i] = a[j];\n      a[j] = tmp;\n   }\n   \n   \n   /*\n    * MAIN\n    */\n\n   public static void main(String[] args) {\n      final int MINSIZE = 10;\n      final int MAXSIZE = 10;\n      for (int size = MINSIZE; size &lt;= MAXSIZE; size++) {\n         int[] a = createRandomArray(size, 0, size);\n         System.out.println(&quot;Unsorted array of size &quot;+a.length);\n         printArray(a);\n         System.out.println(&quot;\\nRunning Quicksort ...&quot;);\n         quicksort(a);\n         System.out.println(&quot;\\nSorted array:&quot;);\n         printArray(a);\n         assert isSorted(a) : &quot;Array is not sorted!&quot;;\n         if (isSorted(a))\n            System.out.println(&quot;\\n\\nSuccess!!\\n\\n&quot;);\n         else\n            System.out.println(&quot;\\n\\nERROR !! Something went wrong.\\n\\n&quot;);\n      }\n   }\n\n}\n</code></pre>\n<p>I've tried changing the order of the conditions aswell as the conditions themself</p>\n"},{"tags":["java","android","kotlin","soundtouch"],"owner":{"account_id":13547561,"reputation":3338,"user_id":9773423,"display_name":"Taki"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":12,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1699917917,"creation_date":1699917917,"question_id":77477396,"body_markdown":"I&#39;m trying to integrate the soundTouch lib to use it for my audio files pitch shifting ( added link in bottom for lib reference) , i have integrated most of code but it is not working as the file saved has 0KB and is not working properly because in the lib , they do not really specify how to get the output , if anyone worked with this lib before , i need some help and it is appreciated in advance . Thank you \r\n\r\n\r\n * Lib \r\n\r\n ``` \r\n https://github.com/qingmei2/soundtouch-android\r\n ``` \r\n\r\n * My code \r\n\r\n ``` \r\n\r\n // Basically i pick wav file device , convert it to bytes\r\n  private void showWav() {\r\n        progressDialog.setMessage(&quot;Please wait .. Processing files&quot;);\r\n        progressDialog.show();\r\n\r\n        new Thread(new Runnable() {\r\n            @Override\r\n            public void run() {\r\n                try{\r\n\r\n                    // CONVERT FILE INTO BYTES\r\n                    ByteArrayOutputStream out = new ByteArrayOutputStream();\r\n                    BufferedInputStream in = new BufferedInputStream(new FileInputStream(file));\r\n\r\n                    int read;\r\n                    byte[] buff = new byte[1024];\r\n                    while ((read = in.read(buff)) &gt; 0) {\r\n                        out.write(buff, 0, read);\r\n                    }\r\n                    out.flush();\r\n                    byte[] audioBytes = out.toByteArray();\r\n\r\n                    SoundTouch soundTouch = new SoundTouch(0, 2, 44100, 2, 1.0f, 2.0f);\r\n                    soundTouch.putBytes(audioBytes);\r\n\r\n                    // PROCESS AUDIO WITH SOUNDTOUCH\r\n                    byte[] processedAudio = new byte[8192]; // Adjust the buffer size as needed\r\n                    int bytesReceived;\r\n                    String path;\r\n                    byte[] mFile;\r\n\r\n                    do {\r\n                        bytesReceived = soundTouch.getBytes(processedAudio);\r\n                        File f  = new File(Environment.getExternalStorageDirectory(),&quot;CVS&quot;);\r\n                        if(!f.exists()){\r\n                            f.mkdir();\r\n                        }\r\n\r\n                        path = f.getPath() + File.separator + String.valueOf(System.currentTimeMillis())  + &quot;.wav&quot;;\r\n                        mFile = new byte[bytesReceived];\r\n\r\n                    } while (bytesReceived != 0);\r\n\r\n                    FileOutputStream fos = new FileOutputStream(path);\r\n                    fos.write(mFile);\r\n                    fos.close();\r\n                    // RELEASE RESOURCES\r\n                    soundTouch.clearBuffer();\r\n\r\n                    hideProgressDialog();\r\n\r\n                } catch (Exception e){\r\n                    hideProgressDialog();\r\n                    Log.d(&quot;TAG&quot;,&quot;Exception &quot; + e.getMessage());\r\n                }\r\n            }\r\n        }).start();\r\n\r\n    }\r\n\r\n ``` \r\n ","title":"Integrating soundtouch lib in android for pitch shifting","body":"<p>I'm trying to integrate the soundTouch lib to use it for my audio files pitch shifting ( added link in bottom for lib reference) , i have integrated most of code but it is not working as the file saved has 0KB and is not working properly because in the lib , they do not really specify how to get the output , if anyone worked with this lib before , i need some help and it is appreciated in advance . Thank you</p>\n<ul>\n<li>Lib</li>\n</ul>\n<pre><code>https://github.com/qingmei2/soundtouch-android\n</code></pre>\n<ul>\n<li>My code</li>\n</ul>\n<pre><code>\n// Basically i pick wav file device , convert it to bytes\n private void showWav() {\n       progressDialog.setMessage(&quot;Please wait .. Processing files&quot;);\n       progressDialog.show();\n\n       new Thread(new Runnable() {\n           @Override\n           public void run() {\n               try{\n\n                   // CONVERT FILE INTO BYTES\n                   ByteArrayOutputStream out = new ByteArrayOutputStream();\n                   BufferedInputStream in = new BufferedInputStream(new FileInputStream(file));\n\n                   int read;\n                   byte[] buff = new byte[1024];\n                   while ((read = in.read(buff)) &gt; 0) {\n                       out.write(buff, 0, read);\n                   }\n                   out.flush();\n                   byte[] audioBytes = out.toByteArray();\n\n                   SoundTouch soundTouch = new SoundTouch(0, 2, 44100, 2, 1.0f, 2.0f);\n                   soundTouch.putBytes(audioBytes);\n\n                   // PROCESS AUDIO WITH SOUNDTOUCH\n                   byte[] processedAudio = new byte[8192]; // Adjust the buffer size as needed\n                   int bytesReceived;\n                   String path;\n                   byte[] mFile;\n\n                   do {\n                       bytesReceived = soundTouch.getBytes(processedAudio);\n                       File f  = new File(Environment.getExternalStorageDirectory(),&quot;CVS&quot;);\n                       if(!f.exists()){\n                           f.mkdir();\n                       }\n\n                       path = f.getPath() + File.separator + String.valueOf(System.currentTimeMillis())  + &quot;.wav&quot;;\n                       mFile = new byte[bytesReceived];\n\n                   } while (bytesReceived != 0);\n\n                   FileOutputStream fos = new FileOutputStream(path);\n                   fos.write(mFile);\n                   fos.close();\n                   // RELEASE RESOURCES\n                   soundTouch.clearBuffer();\n\n                   hideProgressDialog();\n\n               } catch (Exception e){\n                   hideProgressDialog();\n                   Log.d(&quot;TAG&quot;,&quot;Exception &quot; + e.getMessage());\n               }\n           }\n       }).start();\n\n   }\n\n</code></pre>\n"},{"tags":["java","javafx"],"comments":[{"owner":{"account_id":6517130,"reputation":13016,"user_id":5044950,"accept_rate":83,"display_name":"Sam Estep"},"score":0,"creation_date":1435842271,"post_id":31185441,"comment_id":50376132,"body_markdown":"You could maybe add dummy items with no actual content under empty items. Then, when the user clicks the arrow, remove the dummy item and replace it with loaded content from the database.","body":"You could maybe add dummy items with no actual content under empty items. Then, when the user clicks the arrow, remove the dummy item and replace it with loaded content from the database."},{"owner":{"account_id":6539656,"reputation":11090,"user_id":5057736,"accept_rate":84,"display_name":"Pavel_K"},"score":0,"creation_date":1435842355,"post_id":31185441,"comment_id":50376205,"body_markdown":"@RedRoboHood I also thought about it. But maybe there is a better solution.","body":"@RedRoboHood I also thought about it. But maybe there is a better solution."},{"owner":{"account_id":2518243,"reputation":203472,"user_id":2189127,"display_name":"James_D"},"score":0,"creation_date":1435843466,"post_id":31185441,"comment_id":50377021,"body_markdown":"Doesn&#39;t the example in the [Javadocs for `TreeItem`](http://docs.oracle.com/javase/8/javafx/api/javafx/scene/control/TreeItem.html) have this functionality?","body":"Doesn&#39;t the example in the <a href=\"http://docs.oracle.com/javase/8/javafx/api/javafx/scene/control/TreeItem.html\" rel=\"nofollow noreferrer\">Javadocs for <code>TreeItem</code></a> have this functionality?"},{"owner":{"account_id":6539656,"reputation":11090,"user_id":5057736,"accept_rate":84,"display_name":"Pavel_K"},"score":0,"creation_date":1435843809,"post_id":31185441,"comment_id":50377273,"body_markdown":"@James_D It seems to be what I am looking for. I need time to test it.","body":"@James_D It seems to be what I am looking for. I need time to test it."}],"answers":[{"tags":[],"owner":{"account_id":2518243,"reputation":203472,"user_id":2189127,"display_name":"James_D"},"down_vote_count":0,"up_vote_count":7,"is_accepted":true,"score":7,"last_activity_date":1435849347,"creation_date":1435845226,"answer_id":31186549,"question_id":31185441,"body_markdown":"The [Javadocs for `TreeItem`](http://docs.oracle.com/javase/8/javafx/api/javafx/scene/control/TreeItem.html) show an example that basically does this. You can override the `isLeaf` and `getChildren` methods to lazily instantiate the children. Here&#39;s the same idea adapted for a `TreeTableView`:\r\n\r\n\r\n\r\n    import java.util.ArrayList;\r\n    import java.util.Arrays;\r\n    import java.util.List;\r\n    \r\n    import javafx.application.Application;\r\n    import javafx.beans.property.IntegerProperty;\r\n    import javafx.beans.property.SimpleIntegerProperty;\r\n    import javafx.beans.property.SimpleStringProperty;\r\n    import javafx.beans.property.StringProperty;\r\n    import javafx.collections.ObservableList;\r\n    import javafx.event.Event;\r\n    import javafx.scene.Scene;\r\n    import javafx.scene.control.TreeItem;\r\n    import javafx.scene.control.TreeTableColumn;\r\n    import javafx.scene.control.TreeTableView;\r\n    import javafx.scene.layout.BorderPane;\r\n    import javafx.stage.Stage;\r\n    \r\n    public class LazyTreeTable extends Application {\r\n    \r\n    \t@Override\r\n    \tpublic void start(Stage primaryStage) {\r\n    \t\tTreeTableView&lt;Item&gt; treeTable = new TreeTableView&lt;&gt;();\r\n    \t\tTreeTableColumn&lt;Item, String&gt; nameCol = new TreeTableColumn&lt;&gt;(&quot;Name&quot;);\r\n    \t\tnameCol.setCellValueFactory(cellData -&gt; cellData.getValue().getValue().nameProperty());\r\n    \t\tnameCol.setPrefWidth(250);\r\n    \t\tTreeTableColumn&lt;Item, Number&gt; valueCol = new TreeTableColumn&lt;&gt;(&quot;Value&quot;);\r\n    \t\tvalueCol.setCellValueFactory(cellData -&gt; cellData.getValue().getValue().valueProperty());\r\n    \t\tvalueCol.setPrefWidth(150);\r\n    \t\ttreeTable.getColumns().addAll(Arrays.asList(nameCol, valueCol));\r\n    \t\t\r\n    \t\ttreeTable.setRoot(new ItemTreeNode(new Item(1)));\r\n    \t\t\r\n    \t\tprimaryStage.setScene(new Scene(new BorderPane(treeTable), 400, 600));\r\n    \t\tprimaryStage.show();\r\n    \t}\r\n    \t\r\n    \tpublic static class ItemTreeNode extends TreeItem&lt;Item&gt; {\r\n    \t    private boolean childrenLoaded = false ;\r\n    \t    \t    \r\n    \t    public ItemTreeNode(Item value) {\r\n    \t        super(value);\r\n    \t    }\r\n    \t    \r\n    \t    @Override\r\n    \t    public boolean isLeaf() {\r\n    \t        if (childrenLoaded) {\r\n    \t            return getChildren().isEmpty() ;\r\n    \t        }\r\n    \t        return false ;\r\n    //\t        return getChildren().isEmpty();\r\n    \t    }\r\n    \t    \r\n    \t    @Override\r\n    \t    public ObservableList&lt;TreeItem&lt;Item&gt;&gt; getChildren() {\r\n    \t        if (childrenLoaded) {\r\n    \t            return super.getChildren();\r\n    \t        }\r\n    \t        \t        \r\n                childrenLoaded = true ;\r\n        \t    if (getValue().getValue() &lt; 100_000) {\r\n        \t        List&lt;TreeItem&lt;Item&gt;&gt; children = new ArrayList&lt;&gt;();\r\n        \t        for (int i = 0 ; i &lt; 10; i++) {\r\n        \t            children.add(new ItemTreeNode(new Item(getValue().getValue() * 10 + i)));\r\n        \t        }\r\n        \t        super.getChildren().addAll(children);\r\n    \t        } else {\r\n    \t            // great big hack:\r\n    \t            super.getChildren().add(null);\r\n    \t            super.getChildren().clear();\r\n    \t        }\r\n    \t        return super.getChildren() ;\r\n    \t    }\r\n    \t}\r\n    \t\r\n    \tpublic static class Item {\r\n    \t    private IntegerProperty value = new SimpleIntegerProperty();\r\n    \t    private StringProperty name = new SimpleStringProperty();\r\n    \t    \r\n    \t    public Item(String name, int value) {\r\n    \t        setName(name);\r\n    \t        setValue(value);\r\n    \t    }\r\n    \t    \r\n    \t    public Item(int value) {\r\n    \t        this(String.format(&quot;Item %,d&quot;, value), value);\r\n    \t    }\r\n    \r\n            public final IntegerProperty valueProperty() {\r\n                return this.value;\r\n            }\r\n    \r\n            public final int getValue() {\r\n                return this.valueProperty().get();\r\n            }\r\n    \r\n            public final void setValue(final int value) {\r\n                this.valueProperty().set(value);\r\n            }\r\n    \r\n            public final StringProperty nameProperty() {\r\n                return this.name;\r\n            }\r\n    \r\n            public final java.lang.String getName() {\r\n                return this.nameProperty().get();\r\n            }\r\n    \r\n            public final void setName(final java.lang.String name) {\r\n                this.nameProperty().set(name);\r\n            }\r\n    \t    \r\n    \t    \r\n    \t}\r\n    \r\n    \tpublic static void main(String[] args) {\r\n    \t\tlaunch(args);\r\n    \t}\r\n    }\r\n\r\n","title":"JavaFX: TreeTableView and expanding items without children","body":"<p>The <a href=\"http://docs.oracle.com/javase/8/javafx/api/javafx/scene/control/TreeItem.html\" rel=\"noreferrer\">Javadocs for <code>TreeItem</code></a> show an example that basically does this. You can override the <code>isLeaf</code> and <code>getChildren</code> methods to lazily instantiate the children. Here's the same idea adapted for a <code>TreeTableView</code>:</p>\n\n<pre><code>import java.util.ArrayList;\nimport java.util.Arrays;\nimport java.util.List;\n\nimport javafx.application.Application;\nimport javafx.beans.property.IntegerProperty;\nimport javafx.beans.property.SimpleIntegerProperty;\nimport javafx.beans.property.SimpleStringProperty;\nimport javafx.beans.property.StringProperty;\nimport javafx.collections.ObservableList;\nimport javafx.event.Event;\nimport javafx.scene.Scene;\nimport javafx.scene.control.TreeItem;\nimport javafx.scene.control.TreeTableColumn;\nimport javafx.scene.control.TreeTableView;\nimport javafx.scene.layout.BorderPane;\nimport javafx.stage.Stage;\n\npublic class LazyTreeTable extends Application {\n\n    @Override\n    public void start(Stage primaryStage) {\n        TreeTableView&lt;Item&gt; treeTable = new TreeTableView&lt;&gt;();\n        TreeTableColumn&lt;Item, String&gt; nameCol = new TreeTableColumn&lt;&gt;(\"Name\");\n        nameCol.setCellValueFactory(cellData -&gt; cellData.getValue().getValue().nameProperty());\n        nameCol.setPrefWidth(250);\n        TreeTableColumn&lt;Item, Number&gt; valueCol = new TreeTableColumn&lt;&gt;(\"Value\");\n        valueCol.setCellValueFactory(cellData -&gt; cellData.getValue().getValue().valueProperty());\n        valueCol.setPrefWidth(150);\n        treeTable.getColumns().addAll(Arrays.asList(nameCol, valueCol));\n\n        treeTable.setRoot(new ItemTreeNode(new Item(1)));\n\n        primaryStage.setScene(new Scene(new BorderPane(treeTable), 400, 600));\n        primaryStage.show();\n    }\n\n    public static class ItemTreeNode extends TreeItem&lt;Item&gt; {\n        private boolean childrenLoaded = false ;\n\n        public ItemTreeNode(Item value) {\n            super(value);\n        }\n\n        @Override\n        public boolean isLeaf() {\n            if (childrenLoaded) {\n                return getChildren().isEmpty() ;\n            }\n            return false ;\n//          return getChildren().isEmpty();\n        }\n\n        @Override\n        public ObservableList&lt;TreeItem&lt;Item&gt;&gt; getChildren() {\n            if (childrenLoaded) {\n                return super.getChildren();\n            }\n\n            childrenLoaded = true ;\n            if (getValue().getValue() &lt; 100_000) {\n                List&lt;TreeItem&lt;Item&gt;&gt; children = new ArrayList&lt;&gt;();\n                for (int i = 0 ; i &lt; 10; i++) {\n                    children.add(new ItemTreeNode(new Item(getValue().getValue() * 10 + i)));\n                }\n                super.getChildren().addAll(children);\n            } else {\n                // great big hack:\n                super.getChildren().add(null);\n                super.getChildren().clear();\n            }\n            return super.getChildren() ;\n        }\n    }\n\n    public static class Item {\n        private IntegerProperty value = new SimpleIntegerProperty();\n        private StringProperty name = new SimpleStringProperty();\n\n        public Item(String name, int value) {\n            setName(name);\n            setValue(value);\n        }\n\n        public Item(int value) {\n            this(String.format(\"Item %,d\", value), value);\n        }\n\n        public final IntegerProperty valueProperty() {\n            return this.value;\n        }\n\n        public final int getValue() {\n            return this.valueProperty().get();\n        }\n\n        public final void setValue(final int value) {\n            this.valueProperty().set(value);\n        }\n\n        public final StringProperty nameProperty() {\n            return this.name;\n        }\n\n        public final java.lang.String getName() {\n            return this.nameProperty().get();\n        }\n\n        public final void setName(final java.lang.String name) {\n            this.nameProperty().set(name);\n        }\n\n\n    }\n\n    public static void main(String[] args) {\n        launch(args);\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5068712,"reputation":2406,"user_id":4068123,"display_name":"Michael Sims"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1699915519,"creation_date":1699915519,"answer_id":77477282,"question_id":31185441,"body_markdown":"For anyone who found this during a google search for how to get the arrow to show up on a TreeItem that has no children, this is what I learned.\r\n\r\nAll you have to do is Override the isLeaf() method of TreeItem and have it return false then the arrow will show up.\r\n\r\nIf you wanted a method that only returns empty TreeItems with the arrow enabled, you could do it like this (and I chose String for simplicity but using a custom class would be fine as well):\r\n\r\n    private TreeItem&lt;String&gt; emptyArrowItem(String itemsString) {\r\n        return new TreeItem&lt;&gt;(itemsString) {\r\n            @Override public boolean isLeaf() {\r\n                return false;\r\n            }\r\n        }\r\n    }\r\n\r\n\r\nHowever, if you wanted to use a custom class for TreeItem and then base whether or not it&#39;s an empty Item with the expand arrow showing using that class, you could do it like this:\r\n\r\n    private TreeItem&lt;CustomTreeItem&gt; createItem(final CustomTreeItem customTreeItem) {\r\n    \r\n        return new TreeItem&lt;&gt;(customTreeItem) {\r\n            \r\n            private boolean isLeaf;\r\n            private boolean isFirstTimeLeaf = true;\r\n    \r\n         @Override public boolean isLeaf() {\r\n                if (isFirstTimeLeaf) {\r\n                    isFirstTimeLeaf = false;\r\n                    CustomTreeItem cti = getValue();\r\n                    isLeaf = cti.isEmptyItem();\r\n                }\r\n                 return isLeaf;\r\n            }\r\n        };\r\n    }\r\n\r\n\r\nThis example comes straight out of the example given in [the JavaDocs][1] for the TreeItem class, only I simplified it quite a bit which makes it a bit easier to understand.\r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/8/javafx/api/javafx/scene/control/TreeItem.html","title":"JavaFX: TreeTableView and expanding items without children","body":"<p>For anyone who found this during a google search for how to get the arrow to show up on a TreeItem that has no children, this is what I learned.</p>\n<p>All you have to do is Override the isLeaf() method of TreeItem and have it return false then the arrow will show up.</p>\n<p>If you wanted a method that only returns empty TreeItems with the arrow enabled, you could do it like this (and I chose String for simplicity but using a custom class would be fine as well):</p>\n<pre><code>private TreeItem&lt;String&gt; emptyArrowItem(String itemsString) {\n    return new TreeItem&lt;&gt;(itemsString) {\n        @Override public boolean isLeaf() {\n            return false;\n        }\n    }\n}\n</code></pre>\n<p>However, if you wanted to use a custom class for TreeItem and then base whether or not it's an empty Item with the expand arrow showing using that class, you could do it like this:</p>\n<pre><code>private TreeItem&lt;CustomTreeItem&gt; createItem(final CustomTreeItem customTreeItem) {\n\n    return new TreeItem&lt;&gt;(customTreeItem) {\n        \n        private boolean isLeaf;\n        private boolean isFirstTimeLeaf = true;\n\n     @Override public boolean isLeaf() {\n            if (isFirstTimeLeaf) {\n                isFirstTimeLeaf = false;\n                CustomTreeItem cti = getValue();\n                isLeaf = cti.isEmptyItem();\n            }\n             return isLeaf;\n        }\n    };\n}\n</code></pre>\n<p>This example comes straight out of the example given in <a href=\"https://docs.oracle.com/javase/8/javafx/api/javafx/scene/control/TreeItem.html\" rel=\"nofollow noreferrer\">the JavaDocs</a> for the TreeItem class, only I simplified it quite a bit which makes it a bit easier to understand.</p>\n"}],"owner":{"account_id":6539656,"reputation":11090,"user_id":5057736,"accept_rate":84,"display_name":"Pavel_K"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3329,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":31186549,"answer_count":2,"score":2,"last_activity_date":1699915519,"creation_date":1435842183,"question_id":31185441,"body_markdown":"I have TreeTableView with items. I want that user see the &quot;arrow&quot; to expand even if item has no children. The reason is very simple - lazy load. When user clicks at arrow program checks if there are possible items (for example in DB). If children for this item exist then they are added to item. If they don&#39;t exist the &quot;arrow&quot; must disappear. How to do it?","title":"JavaFX: TreeTableView and expanding items without children","body":"<p>I have TreeTableView with items. I want that user see the \"arrow\" to expand even if item has no children. The reason is very simple - lazy load. When user clicks at arrow program checks if there are possible items (for example in DB). If children for this item exist then they are added to item. If they don't exist the \"arrow\" must disappear. How to do it?</p>\n"},{"tags":["java","spring","http-status-code-404"],"answers":[{"tags":[],"owner":{"account_id":29847217,"reputation":1,"user_id":22874022,"display_name":"alex kulinsky"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1699915444,"creation_date":1699915444,"answer_id":77477273,"question_id":77439275,"body_markdown":"add\r\nspring.web.resources.static-locations[0]=file:src/main/resources/static/\r\nspring.web.resources.static-locations[1]=classpath:/static/\r\n\r\nin application.properties","title":"Why my newly uploaded file cannot be displayed or opened","body":"<p>add\nspring.web.resources.static-locations[0]=file:src/main/resources/static/\nspring.web.resources.static-locations[1]=classpath:/static/</p>\n<p>in application.properties</p>\n"}],"owner":{"account_id":29847217,"reputation":1,"user_id":22874022,"display_name":"alex kulinsky"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":43,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77477273,"answer_count":1,"score":0,"last_activity_date":1699915444,"creation_date":1699369192,"question_id":77439275,"body_markdown":"I wrote some code to upload files to the server. After I upload the file, I am redirected to the home page. I can’t open the file in the browser or preview it through JS, it displays a 404 error. All information in the database is initially displayed correctly(size, filename,etc). However, if I restart the project or relogin, the image will be displayed correctly and I can open it through the browser’s address bar (or with preview script).\r\n\r\n\r\nUploader controller\r\n```\r\nimport com.example.restapifilemanager.model.UserModel;\r\nimport com.example.restapifilemanager.model.fileModel;\r\nimport com.example.restapifilemanager.repo.fileModelRepo;\r\nimport org.apache.commons.lang3.RandomStringUtils;\r\nimport org.springframework.beans.factory.annotation.Autowired;\r\nimport org.springframework.stereotype.Controller;\r\nimport org.springframework.ui.Model;\r\nimport org.springframework.web.bind.annotation.*;\r\nimport org.springframework.web.multipart.MultipartFile;\r\nimport java.text.DecimalFormat;\r\nimport java.io.File;\r\nimport java.io.IOException;\r\n\r\n@Controller\r\n@SessionAttributes(&quot;user&quot;)\r\npublic class fileController {\r\n    @Autowired\r\n    private fileModelRepo fileModelRepo;\r\n\r\n    @PostMapping(&quot;/upload&quot;)\r\n    public String handleFileUpload(@RequestParam(&quot;file&quot;) MultipartFile file, Model model) throws IOException{\r\n        UserModel user = (UserModel) model.getAttribute(&quot;user&quot;);\r\n        if (!file.isEmpty())  {\r\n            try {\r\n                String fileCode = RandomStringUtils.randomAlphanumeric(10);\r\n                String uploadDir = &quot;D:\\\\restApiFileManager\\\\src\\\\main\\\\resources\\\\static\\\\files-upload&quot;;\r\n                File uploadDirFile = new File(uploadDir);\r\n\r\n                if (!uploadDirFile.exists()) {\r\n                    uploadDirFile.mkdirs();\r\n                }\r\n\r\n                String fileName = file.getOriginalFilename();\r\n                String filePath = uploadDir + File.separator +fileCode +fileName;\r\n\r\n                file.transferTo(new File(filePath));\r\n                \r\n\r\n                Double sizeD = (double)file.getSize()/1024/1024;\r\n                final DecimalFormat decfor = new DecimalFormat(&quot;0.00&quot;);\r\n                String size = String.valueOf(decfor.format(sizeD)) + &quot;MB&quot;;\r\n\r\n                fileModel fileModel = new fileModel(size,fileName);\r\n                fileModel.setUri(fileCode);\r\n                if(user!=null)\r\n                {\r\n                    fileModel.setUser(user);\r\n                }\r\n                fileModelRepo.save(fileModel);\r\n\r\n            } catch (IOException e) {\r\n                e.printStackTrace();\r\n            }\r\n        }\r\n        return &quot;redirect:/home&quot;;\r\n    }\r\n}\r\n\r\n\r\npublic interface fileModelRepo extends JpaRepository&lt;fileModel, Long&gt; {}\r\n\r\n\r\npackage com.example.restapifilemanager.model;\r\n\r\n\r\nimport jakarta.persistence.Entity;\r\nimport jakarta.persistence.GeneratedValue;\r\nimport jakarta.persistence.GenerationType;\r\nimport jakarta.persistence.Id;\r\nimport jakarta.persistence.JoinColumn;\r\nimport jakarta.persistence.ManyToOne;\r\nimport jakarta.persistence.Table;\r\n\r\n@Entity\r\n@Table(name = &quot;Files&quot;)\r\npublic class fileModel\r\n{\r\n    @Id\r\n    @GeneratedValue(strategy = GenerationType.AUTO)\r\n    private long id;\r\n\r\n    private String size, fileName,uri;\r\n\r\n    @ManyToOne\r\n    @JoinColumn(name = &quot;user&quot;)\r\n    private UserModel user;\r\n\r\n    public long getId() {\r\n        return id;\r\n    }\r\n\r\n    public void setId(long id) {\r\n        this.id = id;\r\n    }\r\n\r\n    public String getSize() {\r\n        return size;\r\n    }\r\n\r\n    public void setSize(String size) {\r\n        this.size = size;\r\n    }\r\n\r\n    public String getFileName() {\r\n        return fileName;\r\n    }\r\n\r\n    public void setFileName(String fileName) {\r\n        this.fileName = fileName;\r\n    }\r\n\r\n    public String getUri() {\r\n        return uri;\r\n    }\r\n\r\n    public void setUri(String uri) {\r\n        this.uri = uri;\r\n    }\r\n\r\n    public UserModel getUser() {\r\n        return user;\r\n    }\r\n\r\n    public void setUser(UserModel user) {\r\n        this.user = user;\r\n    }\r\n\r\n    public fileModel(){}\r\n    \r\n    public fileModel(String size, String fileName) {\r\n        this.size = size;\r\n        this.fileName = fileName;\r\n    }\r\n}\r\n\r\n```\r\n\r\nthe fileModelRepo just extends JpaRepository\r\n\r\nPlease help me to display my image correctly.","title":"Why my newly uploaded file cannot be displayed or opened","body":"<p>I wrote some code to upload files to the server. After I upload the file, I am redirected to the home page. I can’t open the file in the browser or preview it through JS, it displays a 404 error. All information in the database is initially displayed correctly(size, filename,etc). However, if I restart the project or relogin, the image will be displayed correctly and I can open it through the browser’s address bar (or with preview script).</p>\n<p>Uploader controller</p>\n<pre><code>import com.example.restapifilemanager.model.UserModel;\nimport com.example.restapifilemanager.model.fileModel;\nimport com.example.restapifilemanager.repo.fileModelRepo;\nimport org.apache.commons.lang3.RandomStringUtils;\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.stereotype.Controller;\nimport org.springframework.ui.Model;\nimport org.springframework.web.bind.annotation.*;\nimport org.springframework.web.multipart.MultipartFile;\nimport java.text.DecimalFormat;\nimport java.io.File;\nimport java.io.IOException;\n\n@Controller\n@SessionAttributes(&quot;user&quot;)\npublic class fileController {\n    @Autowired\n    private fileModelRepo fileModelRepo;\n\n    @PostMapping(&quot;/upload&quot;)\n    public String handleFileUpload(@RequestParam(&quot;file&quot;) MultipartFile file, Model model) throws IOException{\n        UserModel user = (UserModel) model.getAttribute(&quot;user&quot;);\n        if (!file.isEmpty())  {\n            try {\n                String fileCode = RandomStringUtils.randomAlphanumeric(10);\n                String uploadDir = &quot;D:\\\\restApiFileManager\\\\src\\\\main\\\\resources\\\\static\\\\files-upload&quot;;\n                File uploadDirFile = new File(uploadDir);\n\n                if (!uploadDirFile.exists()) {\n                    uploadDirFile.mkdirs();\n                }\n\n                String fileName = file.getOriginalFilename();\n                String filePath = uploadDir + File.separator +fileCode +fileName;\n\n                file.transferTo(new File(filePath));\n                \n\n                Double sizeD = (double)file.getSize()/1024/1024;\n                final DecimalFormat decfor = new DecimalFormat(&quot;0.00&quot;);\n                String size = String.valueOf(decfor.format(sizeD)) + &quot;MB&quot;;\n\n                fileModel fileModel = new fileModel(size,fileName);\n                fileModel.setUri(fileCode);\n                if(user!=null)\n                {\n                    fileModel.setUser(user);\n                }\n                fileModelRepo.save(fileModel);\n\n            } catch (IOException e) {\n                e.printStackTrace();\n            }\n        }\n        return &quot;redirect:/home&quot;;\n    }\n}\n\n\npublic interface fileModelRepo extends JpaRepository&lt;fileModel, Long&gt; {}\n\n\npackage com.example.restapifilemanager.model;\n\n\nimport jakarta.persistence.Entity;\nimport jakarta.persistence.GeneratedValue;\nimport jakarta.persistence.GenerationType;\nimport jakarta.persistence.Id;\nimport jakarta.persistence.JoinColumn;\nimport jakarta.persistence.ManyToOne;\nimport jakarta.persistence.Table;\n\n@Entity\n@Table(name = &quot;Files&quot;)\npublic class fileModel\n{\n    @Id\n    @GeneratedValue(strategy = GenerationType.AUTO)\n    private long id;\n\n    private String size, fileName,uri;\n\n    @ManyToOne\n    @JoinColumn(name = &quot;user&quot;)\n    private UserModel user;\n\n    public long getId() {\n        return id;\n    }\n\n    public void setId(long id) {\n        this.id = id;\n    }\n\n    public String getSize() {\n        return size;\n    }\n\n    public void setSize(String size) {\n        this.size = size;\n    }\n\n    public String getFileName() {\n        return fileName;\n    }\n\n    public void setFileName(String fileName) {\n        this.fileName = fileName;\n    }\n\n    public String getUri() {\n        return uri;\n    }\n\n    public void setUri(String uri) {\n        this.uri = uri;\n    }\n\n    public UserModel getUser() {\n        return user;\n    }\n\n    public void setUser(UserModel user) {\n        this.user = user;\n    }\n\n    public fileModel(){}\n    \n    public fileModel(String size, String fileName) {\n        this.size = size;\n        this.fileName = fileName;\n    }\n}\n\n</code></pre>\n<p>the fileModelRepo just extends JpaRepository</p>\n<p>Please help me to display my image correctly.</p>\n"},{"tags":["java","math"],"comments":[{"owner":{"account_id":6100029,"reputation":3810,"user_id":4759361,"accept_rate":80,"display_name":"xrisk"},"score":1,"creation_date":1439814838,"post_id":32050496,"comment_id":52000344,"body_markdown":"How do you calculate percentages in _math_? Do you divide by 100, or multiply? O.o","body":"How do you calculate percentages in <i>math</i>? Do you divide by 100, or multiply? O.o"},{"owner":{"account_id":2707424,"reputation":4360,"user_id":2336725,"display_name":"Teepeemm"},"score":6,"creation_date":1439814965,"post_id":32050496,"comment_id":52000425,"body_markdown":"Is `target.getHealth()` an integer?  `/100` would be integer division, and round down (most likely to zero).","body":"Is <code>target.getHealth()</code> an integer?  <code>&#47;100</code> would be integer division, and round down (most likely to zero)."},{"owner":{"account_id":2667845,"reputation":10491,"user_id":2305826,"accept_rate":89,"display_name":"MarsAtomic"},"score":1,"creation_date":1439843402,"post_id":32050496,"comment_id":52017122,"body_markdown":"possible duplicate of [Why does dividing a float by an integer return 0.0?](http://stackoverflow.com/questions/3779604/why-does-dividing-a-float-by-an-integer-return-0-0)","body":"possible duplicate of <a href=\"http://stackoverflow.com/questions/3779604/why-does-dividing-a-float-by-an-integer-return-0-0\">Why does dividing a float by an integer return 0.0?</a>"}],"answers":[{"tags":[],"owner":{"account_id":3368141,"reputation":2835,"user_id":2828147,"accept_rate":78,"display_name":"Kevin"},"down_vote_count":0,"up_vote_count":9,"is_accepted":false,"score":9,"last_activity_date":1457193073,"creation_date":1439814842,"answer_id":32050547,"question_id":32050496,"body_markdown":"Shouldn&#39;t it be this? :\r\n\r\n    public void update() {\r\n        percent_normal = target.getHealth() / target.getMaxHealth();\r\n        percent_normal *= 100;\r\n    }\r\n\r\nE.g. : Player has 120 health and maximum health is 180. This is, `120 / 180 = 0.66666666666` which gives in percentage `0.66666666666 * 100 = 66,66...%` instead of `120 / 100 = 1.2` and multiplying this by `target.getMaxHealth()` which is 180, results in `(1.2 * 180) &gt; 100`.","title":"How do you calculate percentages in Java?","body":"<p>Shouldn't it be this? :</p>\n\n<pre><code>public void update() {\n    percent_normal = target.getHealth() / target.getMaxHealth();\n    percent_normal *= 100;\n}\n</code></pre>\n\n<p>E.g. : Player has 120 health and maximum health is 180. This is, <code>120 / 180 = 0.66666666666</code> which gives in percentage <code>0.66666666666 * 100 = 66,66...%</code> instead of <code>120 / 100 = 1.2</code> and multiplying this by <code>target.getMaxHealth()</code> which is 180, results in <code>(1.2 * 180) &gt; 100</code>.</p>\n"},{"tags":[],"owner":{"account_id":4046895,"reputation":705,"user_id":3327862,"accept_rate":73,"display_name":"ThomasS"},"down_vote_count":0,"up_vote_count":8,"is_accepted":true,"score":8,"last_activity_date":1439815328,"creation_date":1439815328,"answer_id":32050724,"question_id":32050496,"body_markdown":"Your way of calculating the percentage seems to be off.\r\nTo calculate the percentage of X compared to Y you have to do:\r\n\r\n    double result = X/Y;\r\n    result = result * 100;\r\n\r\nSo in this case your code should look like\r\n\r\n    public void update() {\r\n        percent_normal = target.getHealth() / target.getMaxHealth();\r\n        percent_normal *= 100;\r\n    }\r\n\r\nThe reason you are always getting 0.0 although is because of the int 100. I believe the `target.getHealth()/100` will return a value that is in the form of 0.x and will be turned into int 0 before being cast to double.","title":"How do you calculate percentages in Java?","body":"<p>Your way of calculating the percentage seems to be off.\nTo calculate the percentage of X compared to Y you have to do:</p>\n\n<pre><code>double result = X/Y;\nresult = result * 100;\n</code></pre>\n\n<p>So in this case your code should look like</p>\n\n<pre><code>public void update() {\n    percent_normal = target.getHealth() / target.getMaxHealth();\n    percent_normal *= 100;\n}\n</code></pre>\n\n<p>The reason you are always getting 0.0 although is because of the int 100. I believe the <code>target.getHealth()/100</code> will return a value that is in the form of 0.x and will be turned into int 0 before being cast to double.</p>\n"},{"tags":[],"owner":{"account_id":1773418,"reputation":18513,"user_id":1617737,"accept_rate":53,"display_name":"ban-geoengineering"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1699915319,"creation_date":1699900494,"answer_id":77476102,"question_id":32050496,"body_markdown":"    private int calculatePercentage(int inValue, int percent) {\r\n    \r\n    \tfloat percentFloat = (float)percent / 100;\r\n    \tfloat outValueFloat = (inValue * percentFloat);\r\n    \treturn Math.round(outValueFloat);\r\n    }\r\n\r\nTest:\r\n\r\n    int answer = calculatePercentage(50, 66);\r\n    System.out.println(&quot;66% of 50 is &quot; + answer); // 33","title":"How do you calculate percentages in Java?","body":"<pre><code>private int calculatePercentage(int inValue, int percent) {\n\n    float percentFloat = (float)percent / 100;\n    float outValueFloat = (inValue * percentFloat);\n    return Math.round(outValueFloat);\n}\n</code></pre>\n<p>Test:</p>\n<pre><code>int answer = calculatePercentage(50, 66);\nSystem.out.println(&quot;66% of 50 is &quot; + answer); // 33\n</code></pre>\n"}],"owner":{"account_id":4890745,"reputation":53,"user_id":3941961,"display_name":"draco miner"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":65772,"favorite_count":0,"down_vote_count":0,"up_vote_count":5,"accepted_answer_id":32050724,"answer_count":3,"score":5,"last_activity_date":1699915319,"creation_date":1439814703,"question_id":32050496,"body_markdown":"So I am trying to make a game with a health bar for the player but whenever I use cross products or any other method of math that should work the percentage result is `0.0`...\r\nHere is the .java file that handles this:\r\n\r\n    package com.game.graphics;\r\n    \r\n    import com.game.entity.mob.Mob;\r\n        \r\n    public class HUD {\r\n    \tMob target;\r\n    \tSprite healthbar;\r\n    \tSprite bgBar;\r\n    \r\n    \tdouble percent_normal;\r\n    \r\n    \tpublic HUD(Mob target) {\r\n    \t\tthis.target = target;\r\n    \t\tbgBar = new Sprite(0xff777777, 104, 8);\r\n    \t\thealthbar = new Sprite(0xffFF0000, 100, 6);\r\n    \t}\r\n    \r\n    \tpublic void update() {\r\n    \t\tpercent_normal = target.getHealth() / 100;\r\n    \t\tpercent_normal *= target.getMaxHealth();\r\n    \t}\r\n    \r\n    \tpublic void printData() {\r\n    \t\tSystem.out.println(&quot;Normal(&quot; + percent_normal + &quot;)&quot;);\r\n        // if the targets&#39;s health is any lower than the max health then this seems to always return 0\r\n    \t}\r\n    \r\n    \tpublic void render(Screen s) {\r\n    \t\ts.renderSprite(5, 5, bgBar, false);\r\n    \t\ts.renderSprite(7, 6, new Sprite(0xffFF0000, (int) percent_normal, 6), false);\r\n    \t}\r\n    }\r\n\r\nI&#39;m not sure if my Math is completely off or if I&#39;m going about this horibly wrong. I&#39;ve tried looking up how to calculate it to no avail so that&#39;s why I&#39;m putting this question here.\r\n","title":"How do you calculate percentages in Java?","body":"<p>So I am trying to make a game with a health bar for the player but whenever I use cross products or any other method of math that should work the percentage result is <code>0.0</code>...\nHere is the .java file that handles this:</p>\n\n<pre><code>package com.game.graphics;\n\nimport com.game.entity.mob.Mob;\n\npublic class HUD {\n    Mob target;\n    Sprite healthbar;\n    Sprite bgBar;\n\n    double percent_normal;\n\n    public HUD(Mob target) {\n        this.target = target;\n        bgBar = new Sprite(0xff777777, 104, 8);\n        healthbar = new Sprite(0xffFF0000, 100, 6);\n    }\n\n    public void update() {\n        percent_normal = target.getHealth() / 100;\n        percent_normal *= target.getMaxHealth();\n    }\n\n    public void printData() {\n        System.out.println(\"Normal(\" + percent_normal + \")\");\n    // if the targets's health is any lower than the max health then this seems to always return 0\n    }\n\n    public void render(Screen s) {\n        s.renderSprite(5, 5, bgBar, false);\n        s.renderSprite(7, 6, new Sprite(0xffFF0000, (int) percent_normal, 6), false);\n    }\n}\n</code></pre>\n\n<p>I'm not sure if my Math is completely off or if I'm going about this horibly wrong. I've tried looking up how to calculate it to no avail so that's why I'm putting this question here.</p>\n"},{"tags":["java","spring","gradle","build.gradle","multi-module"],"comments":[{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1699948153,"post_id":77477239,"comment_id":136591416,"body_markdown":"No, not if you don&#39;t configure the submodules in the parent module.","body":"No, not if you don&#39;t configure the submodules in the parent module."},{"owner":{"account_id":29895691,"reputation":1,"user_id":22910680,"display_name":"EnisZe"},"score":0,"creation_date":1699961587,"post_id":77477239,"comment_id":136593659,"body_markdown":"What exactly do you mean by configure the submodules in the parent module\nI have added the submodules in the settings.gradle","body":"What exactly do you mean by configure the submodules in the parent module I have added the submodules in the settings.gradle"},{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1699970368,"post_id":77477239,"comment_id":136595305,"body_markdown":"Using the `allprojects` and `subprojects` in the main project to specify shared resources/dependencies. What you hvae now are the dependencies that apply to the project itself only.","body":"Using the <code>allprojects</code> and <code>subprojects</code> in the main project to specify shared resources/dependencies. What you hvae now are the dependencies that apply to the project itself only."}],"owner":{"account_id":29895691,"reputation":1,"user_id":22910680,"display_name":"EnisZe"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":26,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1699914899,"creation_date":1699914899,"question_id":77477239,"body_markdown":"So I am currently working on a multimodular spring boot application and I am using gradle as the built tool.\r\nSo I have a main module which consists of the following: \r\n\r\n```\r\nplugins {\r\n    id &#39;java&#39;\r\n    id &#39;org.springframework.boot&#39; version &#39;3.1.5&#39;\r\n    id &#39;io.spring.dependency-management&#39; version &#39;1.0.11.RELEASE&#39;\r\n}\r\n\r\ngroup = &#39;ez.ndvz&#39;\r\nversion = &#39;0.0.1-SNAPSHOT&#39;\r\n\r\njava {\r\n    sourceCompatibility = &#39;17&#39;\r\n}\r\n\r\nrepositories {\r\n    mavenCentral()\r\n}\r\n\r\ndependencies {\r\n    implementation &#39;org.springframework.boot:spring-boot-starter&#39;\r\n    implementation &#39;org.springframework.boot:spring-boot-starter-test&#39;\r\n\r\n    implementation &#39;org.projectlombok:lombok&#39;\r\n}\r\n\r\ntasks.named(&#39;test&#39;) {\r\n    useJUnitPlatform()\r\n}\r\n\r\n```\r\nAnd in the settings.gradle I have included my submodules.\r\nAnd now this is how my submodule build.gradle looks like:\r\n\r\n```\r\nplugins {\r\n    id &#39;java&#39;\r\n    id &#39;org.springframework.boot&#39; version &#39;3.1.5&#39;\r\n    id &#39;io.spring.dependency-management&#39; version &#39;1.0.11.RELEASE&#39;\r\n}\r\n\r\njava {\r\n    sourceCompatibility = &#39;17&#39;\r\n}\r\n\r\nrepositories {\r\n    mavenCentral()\r\n}\r\n\r\ndependencies {\r\n    implementation &#39;org.springframework.boot:spring-boot-starter&#39;\r\n    implementation &#39;jakarta.validation:jakarta.validation-api:3.0.2&#39;\r\n    implementation &#39;org.projectlombok:lombok:1.18.26&#39;\r\n}\r\n\r\ntasks.named(&#39;test&#39;) {\r\n    useJUnitPlatform()\r\n}\r\n\r\n```\r\n\r\n\r\n\r\nRight now as it is it works all fine but my question is since domain is the submodule shouldn&#39;t it inherit the parents dependencies and plugins?\r\nEverytime I try and remove the plugins the domain module won&#39;t work\r\nShouldn&#39;t they be inherited from the parents module","title":"How do I structure the dependencies in a Gradle MultiModule Project?","body":"<p>So I am currently working on a multimodular spring boot application and I am using gradle as the built tool.\nSo I have a main module which consists of the following:</p>\n<pre><code>plugins {\n    id 'java'\n    id 'org.springframework.boot' version '3.1.5'\n    id 'io.spring.dependency-management' version '1.0.11.RELEASE'\n}\n\ngroup = 'ez.ndvz'\nversion = '0.0.1-SNAPSHOT'\n\njava {\n    sourceCompatibility = '17'\n}\n\nrepositories {\n    mavenCentral()\n}\n\ndependencies {\n    implementation 'org.springframework.boot:spring-boot-starter'\n    implementation 'org.springframework.boot:spring-boot-starter-test'\n\n    implementation 'org.projectlombok:lombok'\n}\n\ntasks.named('test') {\n    useJUnitPlatform()\n}\n\n</code></pre>\n<p>And in the settings.gradle I have included my submodules.\nAnd now this is how my submodule build.gradle looks like:</p>\n<pre><code>plugins {\n    id 'java'\n    id 'org.springframework.boot' version '3.1.5'\n    id 'io.spring.dependency-management' version '1.0.11.RELEASE'\n}\n\njava {\n    sourceCompatibility = '17'\n}\n\nrepositories {\n    mavenCentral()\n}\n\ndependencies {\n    implementation 'org.springframework.boot:spring-boot-starter'\n    implementation 'jakarta.validation:jakarta.validation-api:3.0.2'\n    implementation 'org.projectlombok:lombok:1.18.26'\n}\n\ntasks.named('test') {\n    useJUnitPlatform()\n}\n\n</code></pre>\n<p>Right now as it is it works all fine but my question is since domain is the submodule shouldn't it inherit the parents dependencies and plugins?\nEverytime I try and remove the plugins the domain module won't work\nShouldn't they be inherited from the parents module</p>\n"},{"tags":["java","multithreading","concurrency"],"comments":[{"owner":{"account_id":422870,"reputation":25925,"user_id":801894,"display_name":"Solomon Slow"},"score":3,"creation_date":1686570782,"post_id":76455444,"comment_id":134812007,"body_markdown":"&quot;One after the other&quot; means _not_ in parallel. &quot;Parallel&quot; means _not_ one after the other.","body":"&quot;One after the other&quot; means <i>not</i> in parallel. &quot;Parallel&quot; means <i>not</i> one after the other."},{"owner":{"account_id":11400015,"reputation":1904,"user_id":8357251,"display_name":"gdomo"},"score":0,"creation_date":1686571914,"post_id":76455444,"comment_id":134812243,"body_markdown":"Just call directly `System.out.println(&quot;A&quot;);` instead of calling `printA` which actually doesn&#39;t print, but schedules a task to an executor. Similar for printing B","body":"Just call directly <code>System.out.println(&quot;A&quot;);</code> instead of calling <code>printA</code> which actually doesn&#39;t print, but schedules a task to an executor. Similar for printing B"},{"owner":{"account_id":422870,"reputation":25925,"user_id":801894,"display_name":"Solomon Slow"},"score":0,"creation_date":1686572211,"post_id":76455444,"comment_id":134812316,"body_markdown":"Your main thread shuts the executor down without first waiting for all of the `println` calls to be performed. I&#39;m _guessing_ that might not be what you wanted to do. @gdomo&#39;s comment is just a guess too. You haven&#39;t told us what you want the program to do. What did you expect the program to do? (I.E., what did you expect it to print out?) What did it do instead? (What did it actually print out?)","body":"Your main thread shuts the executor down without first waiting for all of the <code>println</code> calls to be performed. I&#39;m <i>guessing</i> that might not be what you wanted to do. @gdomo&#39;s comment is just a guess too. You haven&#39;t told us what you want the program to do. What did you expect the program to do? (I.E., what did you expect it to print out?) What did it do instead? (What did it actually print out?)"},{"owner":{"account_id":3211603,"reputation":289287,"user_id":2711488,"display_name":"Holger"},"score":2,"creation_date":1686577679,"post_id":76455444,"comment_id":134813656,"body_markdown":"“*but it is not working as expected*” is not a problem description. We do not know what you expected.","body":"“<i>but it is not working as expected</i>” is not a problem description. We do not know what you expected."},{"owner":{"account_id":15549353,"reputation":147,"user_id":15204797,"display_name":"Pushpak"},"score":0,"creation_date":1686651886,"post_id":76455444,"comment_id":134825155,"body_markdown":"@SolomonSlow What I mean to say is that I want to invoke printA() and printB() together in parallel the condition being, that printA() should execute first and then printB(). So in the loop, 5 threads should start in parallel and invoke printA() and printB()","body":"@SolomonSlow What I mean to say is that I want to invoke printA() and printB() together in parallel the condition being, that printA() should execute first and then printB(). So in the loop, 5 threads should start in parallel and invoke printA() and printB()"},{"owner":{"account_id":71739,"reputation":307143,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":0,"creation_date":1699915238,"post_id":76455444,"comment_id":136588560,"body_markdown":"Once again, &#39;in parallel&#39; and &#39;execute first&#39; are mutually exclusive. If you just want to execute two print methods sequentially, you don&#39;t need threads and executors at all. Unclear what you&#39;re asking.","body":"Once again, &#39;in parallel&#39; and &#39;execute first&#39; are mutually exclusive. If you just want to execute two print methods sequentially, you don&#39;t need threads and executors at all. Unclear what you&#39;re asking."}],"answers":[{"tags":[],"owner":{"account_id":422870,"reputation":25925,"user_id":801894,"display_name":"Solomon Slow"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1686660932,"creation_date":1686660932,"answer_id":76465189,"question_id":76455444,"body_markdown":"&gt; I want to invoke printA() and printB() together in parallel the condition being, that printA() should execute first and then printB(). So in the loop, 5 threads should start in parallel and invoke printA() and printB()\r\n\r\nNot 100% certain, but I _think_ you are saying that you want five threads all to `printA()`, and then after they&#39;ve all finished that, _only_ after they&#39;ve all finished, you want them to `printB()`. Is that right? If so, then you probably want a [`CyclicBarrier`](https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/concurrent/CyclicBarrier.html).\r\n\r\nIf you create `CyclicBarrier barrier = new CyclicBarrier(5)` somewhere in your main thread, then you can create five &quot;worker&quot; threads that each do this:\r\n\r\n``` lang-java\r\nprintA();\r\nbarrier.await();\r\nprintB();\r\n```\r\n\r\nThe `await()` call will not return in any of the first four threads to reach it until the fifth thread enters it. Only then will it return in all five threads. That guarantees that none of the threads will `printB()` until all of them have done `printA()`.","title":"How to execute two operations one after the other in parallel using ExecutorService in Java","body":"<blockquote>\n<p>I want to invoke printA() and printB() together in parallel the condition being, that printA() should execute first and then printB(). So in the loop, 5 threads should start in parallel and invoke printA() and printB()</p>\n</blockquote>\n<p>Not 100% certain, but I <em>think</em> you are saying that you want five threads all to <code>printA()</code>, and then after they've all finished that, <em>only</em> after they've all finished, you want them to <code>printB()</code>. Is that right? If so, then you probably want a <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/concurrent/CyclicBarrier.html\" rel=\"nofollow noreferrer\"><code>CyclicBarrier</code></a>.</p>\n<p>If you create <code>CyclicBarrier barrier = new CyclicBarrier(5)</code> somewhere in your main thread, then you can create five &quot;worker&quot; threads that each do this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>printA();\nbarrier.await();\nprintB();\n</code></pre>\n<p>The <code>await()</code> call will not return in any of the first four threads to reach it until the fifth thread enters it. Only then will it return in all five threads. That guarantees that none of the threads will <code>printB()</code> until all of them have done <code>printA()</code>.</p>\n"}],"owner":{"account_id":15549353,"reputation":147,"user_id":15204797,"display_name":"Pushpak"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":49,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1699914490,"creation_date":1686563360,"question_id":76455444,"body_markdown":"I am trying to execute two operations &quot;printA()&quot; and &quot;printB()&quot; in parallel. The condition being that printB() should execute only after printA() is executed for a Thread.\r\nBelow is my code, but it is not working as expected.\r\n\r\n```Java\r\npublic static void main(String[] args) throws InterruptedException {\r\n        ExecutorService executorService = Executors.newFixedThreadPool(10);\r\n        CountDownLatch countDownLatch = new CountDownLatch(5);\r\n        for (int i = 1; i &lt;= 5; i++) {\r\n            executorService.execute(\r\n                    () -&gt; {\r\n                        printA(executorService);\r\n                        printB(executorService);\r\n                        countDownLatch.countDown();\r\n                    }\r\n            );\r\n        }\r\n        countDownLatch.await();\r\n        executorService.shutdown();\r\n        try {\r\n            if (!executorService.awaitTermination(60000, TimeUnit.SECONDS)) {\r\n                executorService.shutdownNow();\r\n            }\r\n        } catch (InterruptedException e) {\r\n            e.printStackTrace();\r\n        }\r\n}\r\n```\r\n```Java\r\nprivate static void printB(ExecutorService executorService) {\r\n        for (int i = 0; i &lt; 5; i++) {\r\n            executorService.execute(\r\n                    () -&gt; {\r\n                        System.out.println(&quot;B&quot;);\r\n                    }\r\n            );\r\n        }\r\n    }\r\n\r\n    private static void printA(ExecutorService executorService) {\r\n        for (int i = 0; i &lt; 5; i++) {\r\n            executorService.execute(\r\n                    () -&gt; {\r\n                        System.out.println(&quot;A&quot;);\r\n                    }\r\n            );\r\n        }\r\n    }\r\n```","title":"How to execute two operations one after the other in parallel using ExecutorService in Java","body":"<p>I am trying to execute two operations &quot;printA()&quot; and &quot;printB()&quot; in parallel. The condition being that printB() should execute only after printA() is executed for a Thread.\nBelow is my code, but it is not working as expected.</p>\n<pre><code>public static void main(String[] args) throws InterruptedException {\n        ExecutorService executorService = Executors.newFixedThreadPool(10);\n        CountDownLatch countDownLatch = new CountDownLatch(5);\n        for (int i = 1; i &lt;= 5; i++) {\n            executorService.execute(\n                    () -&gt; {\n                        printA(executorService);\n                        printB(executorService);\n                        countDownLatch.countDown();\n                    }\n            );\n        }\n        countDownLatch.await();\n        executorService.shutdown();\n        try {\n            if (!executorService.awaitTermination(60000, TimeUnit.SECONDS)) {\n                executorService.shutdownNow();\n            }\n        } catch (InterruptedException e) {\n            e.printStackTrace();\n        }\n}\n</code></pre>\n<pre><code>private static void printB(ExecutorService executorService) {\n        for (int i = 0; i &lt; 5; i++) {\n            executorService.execute(\n                    () -&gt; {\n                        System.out.println(&quot;B&quot;);\n                    }\n            );\n        }\n    }\n\n    private static void printA(ExecutorService executorService) {\n        for (int i = 0; i &lt; 5; i++) {\n            executorService.execute(\n                    () -&gt; {\n                        System.out.println(&quot;A&quot;);\n                    }\n            );\n        }\n    }\n</code></pre>\n"},{"tags":["java","rest","jersey","postman"],"comments":[{"owner":{"account_id":6913968,"reputation":138,"user_id":5308908,"display_name":"Mahesh Kumar"},"score":0,"creation_date":1527230048,"post_id":50522830,"comment_id":88057704,"body_markdown":"Please add error codes and exceptions you are getting","body":"Please add error codes and exceptions you are getting"}],"answers":[{"tags":[],"owner":{"account_id":12612223,"reputation":299,"user_id":9170916,"display_name":"Nithin D J"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1527230282,"creation_date":1527230282,"answer_id":50522926,"question_id":50522830,"body_markdown":"Try the JSON by passing in the below format.\r\n\r\n    {\r\n      &quot;data&quot; : [\r\n        {&quot;firstName&quot;:&quot;riya&quot;,&quot;lastName&quot;:&quot;soni&quot;}, \r\n        {&quot;firstName&quot;:&quot;shreya&quot;,&quot;lastName&quot;:&quot;patel&quot;}\r\n     ]\r\n    }\r\n\r\nParse the JSON and get the data variable first and use it to get each object in the array.","title":"Pass multiple JSON data in Request Body of Postman and Get into Java Rest API using Jersy(JXRS)","body":"<p>Try the JSON by passing in the below format.</p>\n\n<pre><code>{\n  \"data\" : [\n    {\"firstName\":\"riya\",\"lastName\":\"soni\"}, \n    {\"firstName\":\"shreya\",\"lastName\":\"patel\"}\n ]\n}\n</code></pre>\n\n<p>Parse the JSON and get the data variable first and use it to get each object in the array.</p>\n"},{"tags":[],"owner":{"account_id":13534176,"reputation":364,"user_id":9763818,"display_name":"Sree"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1527236159,"creation_date":1527230904,"answer_id":50523077,"question_id":50522830,"body_markdown":"Check this small working example which are looking for..\r\n\r\n**Track.java**\r\n\r\n    public class Track {\r\n    \tString title;\r\n    \tString singer;\r\n    \t//getters and setters\r\n    \t@Override\r\n    \tpublic String toString() {\r\n    \t\treturn &quot;Track [title=&quot; + title + &quot;, singer=&quot; + singer + &quot;]&quot;;\r\n    \t}\r\n    }\r\n\r\n**JSONService.java**\r\n\r\n    @Path(&quot;/json/check&quot;)\r\n    public class JSONService {\r\n \t\t@POST\r\n\t\t@Path(&quot;/postManyAsString&quot;)\r\n\t\t@Consumes(MediaType.APPLICATION_JSON)\r\n\t\tpublic String createManyTrackInJSON(String jsonStr) throws Exception {\r\n\t\t\tJSONObject inputObject = new JSONObject(jsonStr);\r\n\t\t\tif(inputObject.get(&quot;tracks&quot;) instanceof JSONObject)\r\n\t\t\t{\r\n\t\t\t\tJSONObject jsonObject = (JSONObject) inputObject.get(&quot;tracks&quot;);\r\n\t\t\t\tSystem.out.println(jsonObject.get(&quot;title&quot;));\r\n\t\t\t\tSystem.out.println(jsonObject.get(&quot;singer&quot;));\r\n\t\t\t}\r\n\t\t\telse if(inputObject.get(&quot;tracks&quot;) instanceof JSONArray)\r\n\t\t\t{\r\n\t\t\t\tJSONArray jsonArray = (JSONArray) inputObject.get(&quot;tracks&quot;);\r\n\t\t\t\tfor(int i=0; i&lt;jsonArray.length(); i++)\r\n\t\t\t\t{\r\n\t\t\t\t\tJSONObject jsonObject = jsonArray.getJSONObject(i);\r\n\t\t\t\t\tSystem.out.println(jsonObject.get(&quot;title&quot;));\r\n\t\t\t\t\tSystem.out.println(jsonObject.get(&quot;singer&quot;));\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\t\tSystem.out.println(inputObject.get(&quot;tracks&quot;));\r\n\t\t\t}\r\n\t\t\treturn &quot;Okay&quot;;\r\n\t\t}\r\n    }\r\n\r\n**URL: http://localhost:8080/RESTfulExample/rest/json/check/postMany\r\ninput data:**\r\n\r\n    [{\r\n    \t&quot;title&quot; : &quot;hai1&quot;,\r\n    \t&quot;singer&quot; : &quot;sree1&quot;\r\n    },\r\n    {\r\n    \t&quot;title&quot; : &quot;hai2&quot;,\r\n    \t&quot;singer&quot; : &quot;sree2&quot;\r\n    },\r\n    {\r\n    \t&quot;title&quot; : &quot;hai3&quot;,\r\n    \t&quot;singer&quot; : &quot;sree3&quot;\r\n    }]\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/auDy7.png","title":"Pass multiple JSON data in Request Body of Postman and Get into Java Rest API using Jersy(JXRS)","body":"<p>Check this small working example which are looking for..</p>\n\n<p><strong>Track.java</strong></p>\n\n<pre><code>public class Track {\n    String title;\n    String singer;\n    //getters and setters\n    @Override\n    public String toString() {\n        return \"Track [title=\" + title + \", singer=\" + singer + \"]\";\n    }\n}\n</code></pre>\n\n<p><strong>JSONService.java</strong></p>\n\n<pre><code>@Path(\"/json/check\")\npublic class JSONService {\n    @POST\n    @Path(\"/postManyAsString\")\n    @Consumes(MediaType.APPLICATION_JSON)\n    public String createManyTrackInJSON(String jsonStr) throws Exception {\n        JSONObject inputObject = new JSONObject(jsonStr);\n        if(inputObject.get(\"tracks\") instanceof JSONObject)\n        {\n            JSONObject jsonObject = (JSONObject) inputObject.get(\"tracks\");\n            System.out.println(jsonObject.get(\"title\"));\n            System.out.println(jsonObject.get(\"singer\"));\n        }\n        else if(inputObject.get(\"tracks\") instanceof JSONArray)\n        {\n            JSONArray jsonArray = (JSONArray) inputObject.get(\"tracks\");\n            for(int i=0; i&lt;jsonArray.length(); i++)\n            {\n                JSONObject jsonObject = jsonArray.getJSONObject(i);\n                System.out.println(jsonObject.get(\"title\"));\n                System.out.println(jsonObject.get(\"singer\"));\n            }\n        }\n        else\n        {\n            System.out.println(inputObject.get(\"tracks\"));\n        }\n        return \"Okay\";\n    }\n}\n</code></pre>\n\n<p><strong>URL: <a href=\"http://localhost:8080/RESTfulExample/rest/json/check/postMany\" rel=\"nofollow noreferrer\">http://localhost:8080/RESTfulExample/rest/json/check/postMany</a>\ninput data:</strong></p>\n\n<pre><code>[{\n    \"title\" : \"hai1\",\n    \"singer\" : \"sree1\"\n},\n{\n    \"title\" : \"hai2\",\n    \"singer\" : \"sree2\"\n},\n{\n    \"title\" : \"hai3\",\n    \"singer\" : \"sree3\"\n}]\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/auDy7.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/auDy7.png\" alt=\"enter image description here\"></a></p>\n"}],"owner":{"account_id":11752581,"reputation":187,"user_id":8601230,"display_name":"Riya Soni"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":24413,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1699913235,"creation_date":1527229802,"question_id":50522830,"body_markdown":"I want to get multiple JSON data which I am passing into Postman in Body as Json format.\r\n\r\nIf I am passing single json data like : &quot;{&quot;firstName&quot;:&quot;riya&quot;,&quot;lastName&quot;:&quot;soni&quot;}&quot; so I can get it in my Java API mentioned as below :\r\n\r\n    @Path(&quot;patient&quot;)\r\n    @POST\r\n    @Consumes(MediaType.APPLICATION_JSON)\r\n    public String getPatient(Patient patient) {\r\n    System.out.println(patient.getFirstName());\r\n    System.out.println(patient.getLastName());\r\n    return &quot;ok&quot;;\r\n    }\r\n\r\nIt is working properly. But if I want to pass data like [{&quot;firstName&quot;:&quot;riya&quot;,&quot;lastName&quot;:&quot;soni&quot;},{&quot;firstName&quot;:&quot;shreya&quot;,&quot;lastName&quot;:&quot;patel&quot;}]\r\n\r\nand getting in API like below :\r\n\r\n    @Path(&quot;patientDetail&quot;)\r\n    @POST\r\n    @Consumes(MediaType.APPLICATION_JSON)\r\n    public String getPatientDetails(@RequestBody List&lt;Patient&gt; patient) {\r\n    for (Patient p : patient) {\r\n    System.out.println(p.getFirstName());\r\n    System.out.println(p.getLastName());\r\n    }\r\n    return &quot;ok&quot;;\r\n    }\r\n\r\n\r\nWhen I am hitting request from postman by passing multiple JSON data as I have mentioned, even getPateintDetails method is not calling, how to pass and get multiple json data in Rest API. Please give me the solution or reference link for the same.\r\n\r\n","title":"Pass multiple JSON data in Request Body of Postman and Get into Java Rest API using Jersy(JXRS)","body":"<p>I want to get multiple JSON data which I am passing into Postman in Body as Json format.</p>\n\n<p>If I am passing single json data like : \"{\"firstName\":\"riya\",\"lastName\":\"soni\"}\" so I can get it in my Java API mentioned as below :</p>\n\n<pre><code>@Path(\"patient\")\n@POST\n@Consumes(MediaType.APPLICATION_JSON)\npublic String getPatient(Patient patient) {\nSystem.out.println(patient.getFirstName());\nSystem.out.println(patient.getLastName());\nreturn \"ok\";\n}\n</code></pre>\n\n<p>It is working properly. But if I want to pass data like [{\"firstName\":\"riya\",\"lastName\":\"soni\"},{\"firstName\":\"shreya\",\"lastName\":\"patel\"}]</p>\n\n<p>and getting in API like below :</p>\n\n<pre><code>@Path(\"patientDetail\")\n@POST\n@Consumes(MediaType.APPLICATION_JSON)\npublic String getPatientDetails(@RequestBody List&lt;Patient&gt; patient) {\nfor (Patient p : patient) {\nSystem.out.println(p.getFirstName());\nSystem.out.println(p.getLastName());\n}\nreturn \"ok\";\n}\n</code></pre>\n\n<p>When I am hitting request from postman by passing multiple JSON data as I have mentioned, even getPateintDetails method is not calling, how to pass and get multiple json data in Rest API. Please give me the solution or reference link for the same.</p>\n"},{"tags":["java","spring","spring-security"],"answers":[{"tags":[],"owner":{"account_id":219684,"reputation":37257,"user_id":476716,"accept_rate":77,"display_name":"OrangeDog"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1497964123,"creation_date":1497964123,"answer_id":44653978,"question_id":44651573,"body_markdown":"&gt; How to add filter before my another filter in spring-security?\r\n\r\nwith `addFilterBefore`\r\n\r\n&gt; Cannot register after unregistered Filter\r\n\r\nbut only if the one you&#39;re trying to add it before is actually there\r\n\r\nThe problem is you have two separate configurations. You need to make sure they&#39;re applied in the correct order (with `Ordered` or `@Order`), or just merge them into a single configuration.\r\n\r\nNote also that your configurations are trying to configure `logout()` and `exceptionHandling()` differently. You can&#39;t have it both ways like that.","title":"How to add filter before my another filter in spring-security?","body":"<blockquote>\n  <p>How to add filter before my another filter in spring-security?</p>\n</blockquote>\n\n<p>with <code>addFilterBefore</code></p>\n\n<blockquote>\n  <p>Cannot register after unregistered Filter</p>\n</blockquote>\n\n<p>but only if the one you're trying to add it before is actually there</p>\n\n<p>The problem is you have two separate configurations. You need to make sure they're applied in the correct order (with <code>Ordered</code> or <code>@Order</code>), or just merge them into a single configuration.</p>\n\n<p>Note also that your configurations are trying to configure <code>logout()</code> and <code>exceptionHandling()</code> differently. You can't have it both ways like that.</p>\n"},{"tags":[],"owner":{"account_id":1122128,"reputation":269,"user_id":1110253,"accept_rate":75,"display_name":"SparX"},"down_vote_count":2,"up_vote_count":0,"is_accepted":false,"score":-2,"last_activity_date":1509968105,"creation_date":1509968105,"answer_id":47136076,"question_id":44651573,"body_markdown":"The answer helped me : https://stackoverflow.com/a/32227901/1110253. I &quot;wrap&quot; OAuth2AuthenticationProcessingFilter with custom filter.","title":"How to add filter before my another filter in spring-security?","body":"<p>The answer helped me : <a href=\"https://stackoverflow.com/a/32227901/1110253\">https://stackoverflow.com/a/32227901/1110253</a>. I \"wrap\" OAuth2AuthenticationProcessingFilter with custom filter.</p>\n"}],"owner":{"account_id":10983501,"reputation":131,"user_id":8069946,"display_name":"Vladislav Chernogorov"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":15951,"favorite_count":0,"down_vote_count":0,"up_vote_count":5,"answer_count":2,"score":5,"last_activity_date":1699913235,"creation_date":1497957388,"question_id":44651573,"body_markdown":"I have two different security configurations for my application. One `OAuth2SecurityConfiguration` and the other is `LdapSecurityConfiguration`. In `OAuth2SecurityConfiguration` I have following security configuration with 2 filteres:\r\n\r\n    @Override\r\n    protected void configure(HttpSecurity http) throws Exception {\r\n        http\r\n                .csrf().disable()\r\n                .exceptionHandling()\r\n                .authenticationEntryPoint(authenticationEntryPoint)\r\n                .and()\r\n                    .authorizeRequests()\r\n                    .antMatchers(OAUTH_ENDPOINT).permitAll()\r\n                    .anyRequest().authenticated()\r\n                .and()\r\n                    .logout()\r\n                    .logoutUrl(LOGOUT_ENDPOINT)\r\n                    .logoutSuccessUrl(&quot;/&quot;)\r\n                    .addLogoutHandler(oAuthLogoutHandler)\r\n                .and()\r\n                    .addFilterAfter(oAuth2ClientContextFilter, ExceptionTranslationFilter.class)\r\n                    .addFilterBefore(oAuth2AuthenticationProcessingFilter, FilterSecurityInterceptor.class)\r\n                    // anonymous login must be disabled,\r\n                    // otherwise an anonymous authentication will be created,\r\n                    // and the UserRedirectRequiredException will not be thrown,\r\n                    // and the user will not be redirected to the authorization server\r\n                    .anonymous().disable();\r\n    }\r\n\r\n`LdapSecurityConfiguration` security configuration:\r\n\r\n    @Override\r\n    protected void configure(HttpSecurity http) throws Exception {\r\n        http\r\n                .csrf().disable()\r\n                .exceptionHandling()\r\n                .authenticationEntryPoint(restAuthenticationEntryPoint)\r\n                .and()\r\n                    .authorizeRequests()\r\n                    .antMatchers(AUTH_ENDPOINT).permitAll()\r\n                    .anyRequest().authenticated()\r\n                .and()\r\n                    .logout()\r\n                .and()\r\n                    .addFilterBefore(authenticationFilter, OAuth2ClientContextFilter.class);\r\n    }\r\n\r\nBut when filter chain is initialised I get this error:\r\n\r\n    Caused by: org.springframework.beans.BeanInstantiationException: Failed to instantiate [javax.servlet.Filter]: Factory method &#39;springSecurityFilterChain&#39; threw exception; nested exception is java.lang.IllegalArgumentException: Cannot register after unregistered Filter class org.springframework.security.oauth2.client.filter.OAuth2ClientContextFilter\r\n    \tat org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:189)\r\n    \tat org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:588)\r\n    \t... 36 more\r\n    Caused by: java.lang.IllegalArgumentException: Cannot register after unregistered Filter class org.springframework.security.oauth2.client.filter.OAuth2ClientContextFilter\r\n    \tat org.springframework.security.config.annotation.web.builders.FilterComparator.registerBefore(FilterComparator.java:183)\r\n    \tat org.springframework.security.config.annotation.web.builders.HttpSecurity.addFilterBefore(HttpSecurity.java:1039)\r\n    \tat com.company.configuration.LdapSecurityConfiguration.configure(LdapSecurityConfiguration.java:63)\r\n    \tat org.springframework.security.config.annotation.web.configuration.WebSecurityConfigurerAdapter.getHttp(WebSecurityConfigurerAdapter.java:224)\r\n    \tat org.springframework.security.config.annotation.web.configuration.WebSecurityConfigurerAdapter.init(WebSecurityConfigurerAdapter.java:315)\r\n    \tat org.springframework.security.config.annotation.web.configuration.WebSecurityConfigurerAdapter.init(WebSecurityConfigurerAdapter.java:86)\r\n    \tat com.company.configuration.LdapSecurityConfiguration$$EnhancerBySpringCGLIB$$b4922dd5.init(&lt;generated&gt;)\r\n    \tat org.springframework.security.config.annotation.AbstractConfiguredSecurityBuilder.init(AbstractConfiguredSecurityBuilder.java:371)\r\n    \tat org.springframework.security.config.annotation.AbstractConfiguredSecurityBuilder.doBuild(AbstractConfiguredSecurityBuilder.java:325)\r\n    \tat org.springframework.security.config.annotation.AbstractSecurityBuilder.build(AbstractSecurityBuilder.java:41)\r\n    \tat org.springframework.security.config.annotation.web.configuration.WebSecurityConfiguration.springSecurityFilterChain(WebSecurityConfiguration.java:104)\r\n    \tat org.springframework.security.config.annotation.web.configuration.WebSecurityConfiguration$$EnhancerBySpringCGLIB$$33ca6b4e.CGLIB$springSecurityFilterChain$3(&lt;generated&gt;)\r\n    \tat org.springframework.security.config.annotation.web.configuration.WebSecurityConfiguration$$EnhancerBySpringCGLIB$$33ca6b4e$$FastClassBySpringCGLIB$$b8c23686.invoke(&lt;generated&gt;)\r\n    \tat org.springframework.cglib.proxy.MethodProxy.invokeSuper(MethodProxy.java:228)\r\n    \tat org.springframework.context.annotation.ConfigurationClassEnhancer$BeanMethodInterceptor.intercept(ConfigurationClassEnhancer.java:358)\r\n    \tat org.springframework.security.config.annotation.web.configuration.WebSecurityConfiguration$$EnhancerBySpringCGLIB$$33ca6b4e.springSecurityFilterChain(&lt;generated&gt;)\r\n    \tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n    \tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n    \tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n    \tat java.lang.reflect.Method.invoke(Method.java:498)\r\n    \tat org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:162)\r\n    \t... 37 more","title":"How to add filter before my another filter in spring-security?","body":"<p>I have two different security configurations for my application. One <code>OAuth2SecurityConfiguration</code> and the other is <code>LdapSecurityConfiguration</code>. In <code>OAuth2SecurityConfiguration</code> I have following security configuration with 2 filteres:</p>\n\n<pre><code>@Override\nprotected void configure(HttpSecurity http) throws Exception {\n    http\n            .csrf().disable()\n            .exceptionHandling()\n            .authenticationEntryPoint(authenticationEntryPoint)\n            .and()\n                .authorizeRequests()\n                .antMatchers(OAUTH_ENDPOINT).permitAll()\n                .anyRequest().authenticated()\n            .and()\n                .logout()\n                .logoutUrl(LOGOUT_ENDPOINT)\n                .logoutSuccessUrl(\"/\")\n                .addLogoutHandler(oAuthLogoutHandler)\n            .and()\n                .addFilterAfter(oAuth2ClientContextFilter, ExceptionTranslationFilter.class)\n                .addFilterBefore(oAuth2AuthenticationProcessingFilter, FilterSecurityInterceptor.class)\n                // anonymous login must be disabled,\n                // otherwise an anonymous authentication will be created,\n                // and the UserRedirectRequiredException will not be thrown,\n                // and the user will not be redirected to the authorization server\n                .anonymous().disable();\n}\n</code></pre>\n\n<p><code>LdapSecurityConfiguration</code> security configuration:</p>\n\n<pre><code>@Override\nprotected void configure(HttpSecurity http) throws Exception {\n    http\n            .csrf().disable()\n            .exceptionHandling()\n            .authenticationEntryPoint(restAuthenticationEntryPoint)\n            .and()\n                .authorizeRequests()\n                .antMatchers(AUTH_ENDPOINT).permitAll()\n                .anyRequest().authenticated()\n            .and()\n                .logout()\n            .and()\n                .addFilterBefore(authenticationFilter, OAuth2ClientContextFilter.class);\n}\n</code></pre>\n\n<p>But when filter chain is initialised I get this error:</p>\n\n<pre><code>Caused by: org.springframework.beans.BeanInstantiationException: Failed to instantiate [javax.servlet.Filter]: Factory method 'springSecurityFilterChain' threw exception; nested exception is java.lang.IllegalArgumentException: Cannot register after unregistered Filter class org.springframework.security.oauth2.client.filter.OAuth2ClientContextFilter\n    at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:189)\n    at org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:588)\n    ... 36 more\nCaused by: java.lang.IllegalArgumentException: Cannot register after unregistered Filter class org.springframework.security.oauth2.client.filter.OAuth2ClientContextFilter\n    at org.springframework.security.config.annotation.web.builders.FilterComparator.registerBefore(FilterComparator.java:183)\n    at org.springframework.security.config.annotation.web.builders.HttpSecurity.addFilterBefore(HttpSecurity.java:1039)\n    at com.company.configuration.LdapSecurityConfiguration.configure(LdapSecurityConfiguration.java:63)\n    at org.springframework.security.config.annotation.web.configuration.WebSecurityConfigurerAdapter.getHttp(WebSecurityConfigurerAdapter.java:224)\n    at org.springframework.security.config.annotation.web.configuration.WebSecurityConfigurerAdapter.init(WebSecurityConfigurerAdapter.java:315)\n    at org.springframework.security.config.annotation.web.configuration.WebSecurityConfigurerAdapter.init(WebSecurityConfigurerAdapter.java:86)\n    at com.company.configuration.LdapSecurityConfiguration$$EnhancerBySpringCGLIB$$b4922dd5.init(&lt;generated&gt;)\n    at org.springframework.security.config.annotation.AbstractConfiguredSecurityBuilder.init(AbstractConfiguredSecurityBuilder.java:371)\n    at org.springframework.security.config.annotation.AbstractConfiguredSecurityBuilder.doBuild(AbstractConfiguredSecurityBuilder.java:325)\n    at org.springframework.security.config.annotation.AbstractSecurityBuilder.build(AbstractSecurityBuilder.java:41)\n    at org.springframework.security.config.annotation.web.configuration.WebSecurityConfiguration.springSecurityFilterChain(WebSecurityConfiguration.java:104)\n    at org.springframework.security.config.annotation.web.configuration.WebSecurityConfiguration$$EnhancerBySpringCGLIB$$33ca6b4e.CGLIB$springSecurityFilterChain$3(&lt;generated&gt;)\n    at org.springframework.security.config.annotation.web.configuration.WebSecurityConfiguration$$EnhancerBySpringCGLIB$$33ca6b4e$$FastClassBySpringCGLIB$$b8c23686.invoke(&lt;generated&gt;)\n    at org.springframework.cglib.proxy.MethodProxy.invokeSuper(MethodProxy.java:228)\n    at org.springframework.context.annotation.ConfigurationClassEnhancer$BeanMethodInterceptor.intercept(ConfigurationClassEnhancer.java:358)\n    at org.springframework.security.config.annotation.web.configuration.WebSecurityConfiguration$$EnhancerBySpringCGLIB$$33ca6b4e.springSecurityFilterChain(&lt;generated&gt;)\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.lang.reflect.Method.invoke(Method.java:498)\n    at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:162)\n    ... 37 more\n</code></pre>\n"},{"tags":["java","spring","spring-boot","caching","ehcache"],"answers":[{"tags":[],"owner":{"account_id":27097454,"reputation":797,"user_id":20644506,"display_name":"Peng"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1690164919,"creation_date":1690164919,"answer_id":76751045,"question_id":76750906,"body_markdown":"you miss some dependency about Validation  add below dependency in  your  project\r\n\r\n```\r\n\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;jakarta.xml.bind&lt;/groupId&gt;\r\n      &lt;artifactId&gt;jakarta.xml.bind-api&lt;/artifactId&gt;\r\n      &lt;version&gt;4.0.0&lt;/version&gt;\r\n      &lt;scope&gt;compile&lt;/scope&gt;\r\n    &lt;/dependency&gt;\r\n```\r\n\r\n","title":"Spring boot 3 ehcache config setup issue","body":"<p>you miss some dependency about Validation  add below dependency in  your  project</p>\n<pre><code>\n    &lt;dependency&gt;\n      &lt;groupId&gt;jakarta.xml.bind&lt;/groupId&gt;\n      &lt;artifactId&gt;jakarta.xml.bind-api&lt;/artifactId&gt;\n      &lt;version&gt;4.0.0&lt;/version&gt;\n      &lt;scope&gt;compile&lt;/scope&gt;\n    &lt;/dependency&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3956850,"reputation":315,"user_id":3265041,"display_name":"M.Sinan Şahin"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1699912294,"creation_date":1699912294,"answer_id":77477072,"question_id":76750906,"body_markdown":"  https://groups.google.com/g/ehcache-users/c/sKfxWuTpY-U\r\n \r\n\r\n       implementation(&#39;org.ehcache:ehcache:3.10.8&#39;) {\r\n          capabilities {\r\n            requireCapability(&#39;org.ehcache:ehcache-jakarta&#39;)\r\n          }\r\n        }\r\n\r\n","title":"Spring boot 3 ehcache config setup issue","body":"<p><a href=\"https://groups.google.com/g/ehcache-users/c/sKfxWuTpY-U\" rel=\"nofollow noreferrer\">https://groups.google.com/g/ehcache-users/c/sKfxWuTpY-U</a></p>\n<pre><code>   implementation('org.ehcache:ehcache:3.10.8') {\n      capabilities {\n        requireCapability('org.ehcache:ehcache-jakarta')\n      }\n    }\n</code></pre>\n"}],"owner":{"account_id":8533490,"reputation":717,"user_id":6396199,"accept_rate":70,"display_name":"syy"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":735,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1699912294,"creation_date":1690161151,"question_id":76750906,"body_markdown":"I&#39;m trying to setup ehcache in my Spring boot application. I have the following ehcache.xml and configuration file:\r\n\r\n```xml\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;config xmlns:xsi=&#39;http://www.w3.org/2001/XMLSchema-instance&#39; xmlns=&#39;http://www.ehcache.org/v3&#39;&gt;\r\n    &lt;cache alias=&quot;myCache&quot;&gt;\r\n        &lt;expiry&gt;\r\n            &lt;ttl unit=&quot;minutes&quot;&gt;60&lt;/ttl&gt;\r\n        &lt;/expiry&gt;\r\n        &lt;heap&gt;20&lt;/heap&gt;\r\n    &lt;/cache&gt;\r\n&lt;/config&gt;\r\n```\r\n\r\n```java\r\nimport org.ehcache.jsr107.EhcacheCachingProvider;\r\nimport org.springframework.cache.annotation.EnableCaching;\r\nimport org.springframework.cache.jcache.JCacheCacheManager;\r\nimport org.springframework.context.annotation.Bean;\r\nimport org.springframework.context.annotation.Configuration;\r\n\r\nimport javax.cache.CacheManager;\r\nimport javax.cache.Caching;\r\nimport java.net.URI;\r\nimport java.net.URISyntaxException;\r\n\r\n@Configuration\r\n@EnableCaching\r\npublic class CacheConfig {\r\n  @Bean\r\n  public JCacheCacheManager cacheManager() throws URISyntaxException {\r\n    ClassLoader classLoader = getClass().getClassLoader();\r\n    URI ehcacheURI = classLoader.getResource(&quot;ehcache.xml&quot;).toURI();\r\n    CacheManager cacheManager = Caching.getCachingProvider(EhcacheCachingProvider.class.getName()).getCacheManager(ehcacheURI, classLoader);\r\n\r\n    return new JCacheCacheManager(cacheManager);\r\n  }\r\n}\r\n```\r\n\r\nHowever, when I start up my application, I get the following error message:\r\n\r\n```\r\norg.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;cacheManager&#39; defined in class path resource [com/webservice/config/CacheConfig.class]: Failed to instantiate [org.springframework.cache.jcache.JCacheCacheManager]: Factory method &#39;cacheManager&#39; threw exception with message: javax/xml/bind/ValidationEventHandler\r\n    at org.springframework.beans.factory.support.ConstructorResolver.instantiate(ConstructorResolver.java:652)\r\n    at org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:488)\r\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1324)\r\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1161)\r\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:561)\r\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:521)\r\n    at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326)\r\n    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)\r\n    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324)\r\n    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)\r\n    at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:961)\r\n    at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:915)\r\n    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:584)\r\n    at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)\r\n    at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:730)\r\n    at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:432)\r\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:308)\r\n    at com.webservice.Application.main(Application.java:15)\r\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)\r\n    at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n    at java.base/java.lang.reflect.Method.invoke(Method.java:568)\r\n    at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:49)\r\nCaused by: org.springframework.beans.BeanInstantiationException: Failed to instantiate [org.springframework.cache.jcache.JCacheCacheManager]: Factory method &#39;cacheManager&#39; threw exception with message: javax/xml/bind/ValidationEventHandler\r\n    at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:171)\r\n    at org.springframework.beans.factory.support.ConstructorResolver.instantiate(ConstructorResolver.java:648)\r\n    ... 22 common frames omitted\r\nCaused by: java.lang.NoClassDefFoundError: javax/xml/bind/ValidationEventHandler\r\n    at org.ehcache.xml.XmlConfiguration.&lt;init&gt;(XmlConfiguration.java:114)\r\n    at org.ehcache.xml.XmlConfiguration.&lt;init&gt;(XmlConfiguration.java:90)\r\n    at org.ehcache.jsr107.EhcacheCachingProvider$ConfigSupplier.getConfiguration(EhcacheCachingProvider.java:328)\r\n    at org.ehcache.jsr107.EhcacheCachingProvider.getCacheManager(EhcacheCachingProvider.java:134)\r\n    at org.ehcache.jsr107.EhcacheCachingProvider.getCacheManager(EhcacheCachingProvider.java:85)\r\n    at org.ehcache.jsr107.EhcacheCachingProvider.getCacheManager(EhcacheCachingProvider.java:194)\r\n    at com.webservice.config.CacheConfig.cacheManager(CacheConfig.java:29)\r\n    at com.webservice.config.CacheConfig$$SpringCGLIB$$0.CGLIB$cacheManager$0(&lt;generated&gt;)\r\n    at com.webservice.config.CacheConfig$$SpringCGLIB$$2.invoke(&lt;generated&gt;)\r\n    at org.springframework.cglib.proxy.MethodProxy.invokeSuper(MethodProxy.java:257)\r\n    at org.springframework.context.annotation.ConfigurationClassEnhancer$BeanMethodInterceptor.intercept(ConfigurationClassEnhancer.java:331)\r\n    at com.webservice.config.CacheConfig$$SpringCGLIB$$0.cacheManager(&lt;generated&gt;)\r\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)\r\n    at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n    at java.base/java.lang.reflect.Method.invoke(Method.java:568)\r\n    at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:139)\r\n    ... 23 common frames omitted\r\nCaused by: java.lang.ClassNotFoundException: javax.xml.bind.ValidationEventHandler\r\n    at java.base/jdk.internal.loader.BuiltinClassLoader.loadClass(BuiltinClassLoader.java:641)\r\n    at java.base/jdk.internal.loader.ClassLoaders$AppClassLoader.loadClass(ClassLoaders.java:188)\r\n    at java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:520)\r\n    ... 40 common frames omitted\r\n```\r\n\r\nDoes anyone know what I&#39;m doing wrong? It looks like it has something to do with validation. So I&#39;m assuming my ehcache.xml file might be incorrect. I&#39;m using org.ehcache.ehcache version 3.10.2. Any help would be appreciated.","title":"Spring boot 3 ehcache config setup issue","body":"<p>I'm trying to setup ehcache in my Spring boot application. I have the following ehcache.xml and configuration file:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;config xmlns:xsi='http://www.w3.org/2001/XMLSchema-instance' xmlns='http://www.ehcache.org/v3'&gt;\n    &lt;cache alias=&quot;myCache&quot;&gt;\n        &lt;expiry&gt;\n            &lt;ttl unit=&quot;minutes&quot;&gt;60&lt;/ttl&gt;\n        &lt;/expiry&gt;\n        &lt;heap&gt;20&lt;/heap&gt;\n    &lt;/cache&gt;\n&lt;/config&gt;\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>import org.ehcache.jsr107.EhcacheCachingProvider;\nimport org.springframework.cache.annotation.EnableCaching;\nimport org.springframework.cache.jcache.JCacheCacheManager;\nimport org.springframework.context.annotation.Bean;\nimport org.springframework.context.annotation.Configuration;\n\nimport javax.cache.CacheManager;\nimport javax.cache.Caching;\nimport java.net.URI;\nimport java.net.URISyntaxException;\n\n@Configuration\n@EnableCaching\npublic class CacheConfig {\n  @Bean\n  public JCacheCacheManager cacheManager() throws URISyntaxException {\n    ClassLoader classLoader = getClass().getClassLoader();\n    URI ehcacheURI = classLoader.getResource(&quot;ehcache.xml&quot;).toURI();\n    CacheManager cacheManager = Caching.getCachingProvider(EhcacheCachingProvider.class.getName()).getCacheManager(ehcacheURI, classLoader);\n\n    return new JCacheCacheManager(cacheManager);\n  }\n}\n</code></pre>\n<p>However, when I start up my application, I get the following error message:</p>\n<pre><code>org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'cacheManager' defined in class path resource [com/webservice/config/CacheConfig.class]: Failed to instantiate [org.springframework.cache.jcache.JCacheCacheManager]: Factory method 'cacheManager' threw exception with message: javax/xml/bind/ValidationEventHandler\n    at org.springframework.beans.factory.support.ConstructorResolver.instantiate(ConstructorResolver.java:652)\n    at org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:488)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1324)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1161)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:561)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:521)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326)\n    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)\n    at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:961)\n    at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:915)\n    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:584)\n    at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)\n    at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:730)\n    at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:432)\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:308)\n    at com.webservice.Application.main(Application.java:15)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)\n    at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.base/java.lang.reflect.Method.invoke(Method.java:568)\n    at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:49)\nCaused by: org.springframework.beans.BeanInstantiationException: Failed to instantiate [org.springframework.cache.jcache.JCacheCacheManager]: Factory method 'cacheManager' threw exception with message: javax/xml/bind/ValidationEventHandler\n    at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:171)\n    at org.springframework.beans.factory.support.ConstructorResolver.instantiate(ConstructorResolver.java:648)\n    ... 22 common frames omitted\nCaused by: java.lang.NoClassDefFoundError: javax/xml/bind/ValidationEventHandler\n    at org.ehcache.xml.XmlConfiguration.&lt;init&gt;(XmlConfiguration.java:114)\n    at org.ehcache.xml.XmlConfiguration.&lt;init&gt;(XmlConfiguration.java:90)\n    at org.ehcache.jsr107.EhcacheCachingProvider$ConfigSupplier.getConfiguration(EhcacheCachingProvider.java:328)\n    at org.ehcache.jsr107.EhcacheCachingProvider.getCacheManager(EhcacheCachingProvider.java:134)\n    at org.ehcache.jsr107.EhcacheCachingProvider.getCacheManager(EhcacheCachingProvider.java:85)\n    at org.ehcache.jsr107.EhcacheCachingProvider.getCacheManager(EhcacheCachingProvider.java:194)\n    at com.webservice.config.CacheConfig.cacheManager(CacheConfig.java:29)\n    at com.webservice.config.CacheConfig$$SpringCGLIB$$0.CGLIB$cacheManager$0(&lt;generated&gt;)\n    at com.webservice.config.CacheConfig$$SpringCGLIB$$2.invoke(&lt;generated&gt;)\n    at org.springframework.cglib.proxy.MethodProxy.invokeSuper(MethodProxy.java:257)\n    at org.springframework.context.annotation.ConfigurationClassEnhancer$BeanMethodInterceptor.intercept(ConfigurationClassEnhancer.java:331)\n    at com.webservice.config.CacheConfig$$SpringCGLIB$$0.cacheManager(&lt;generated&gt;)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)\n    at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.base/java.lang.reflect.Method.invoke(Method.java:568)\n    at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:139)\n    ... 23 common frames omitted\nCaused by: java.lang.ClassNotFoundException: javax.xml.bind.ValidationEventHandler\n    at java.base/jdk.internal.loader.BuiltinClassLoader.loadClass(BuiltinClassLoader.java:641)\n    at java.base/jdk.internal.loader.ClassLoaders$AppClassLoader.loadClass(ClassLoaders.java:188)\n    at java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:520)\n    ... 40 common frames omitted\n</code></pre>\n<p>Does anyone know what I'm doing wrong? It looks like it has something to do with validation. So I'm assuming my ehcache.xml file might be incorrect. I'm using org.ehcache.ehcache version 3.10.2. Any help would be appreciated.</p>\n"},{"tags":["java","string","stringbuffer"],"comments":[{"owner":{"account_id":2413237,"reputation":31164,"user_id":2107876,"accept_rate":88,"display_name":"laune"},"score":0,"creation_date":1425129174,"post_id":28782081,"comment_id":45840808,"body_markdown":"A StringBuilder (why Buffer?) doesn&#39;t make sense if you pass in a single String (and don&#39;t plan changes or additions.)","body":"A StringBuilder (why Buffer?) doesn&#39;t make sense if you pass in a single String (and don&#39;t plan changes or additions.)"},{"owner":{"account_id":2413237,"reputation":31164,"user_id":2107876,"accept_rate":88,"display_name":"laune"},"score":2,"creation_date":1425129264,"post_id":28782081,"comment_id":45840830,"body_markdown":"If there is all String literals around the `+`, the compiler should do the concatenation at compile time.","body":"If there is all String literals around the <code>+</code>, the compiler should do the concatenation at compile time."}],"answers":[{"tags":[],"owner":{"account_id":2228780,"reputation":542,"user_id":1966940,"accept_rate":80,"display_name":"Jamie Reid"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1425129354,"creation_date":1425129354,"answer_id":28782124,"question_id":28782081,"body_markdown":"StringBuffer would be used as follows:\r\n\r\n     StringBuffer str = new StringBuffer (&quot;Stanford &quot;);\r\n     str.append(&quot;Lost!!&quot;);\r\n\r\nfor a &quot;private static final String&quot; you can&#39;t really use a StringBuffer or at least there isn&#39;t any performance gain, or possibly even performance loss!\r\n\r\nStringBuffer is for use inside methods. \r\n\r\nAlso, as your variable is a private static final, all the &#39;+&#39; modifiers will happen at compile time and will be optimised anyway so you will be highly optimised. No need to change anything here.","title":"Differences between these two sets of code (String x Stringbuffer)","body":"<p>StringBuffer would be used as follows:</p>\n\n<pre><code> StringBuffer str = new StringBuffer (\"Stanford \");\n str.append(\"Lost!!\");\n</code></pre>\n\n<p>for a \"private static final String\" you can't really use a StringBuffer or at least there isn't any performance gain, or possibly even performance loss!</p>\n\n<p>StringBuffer is for use inside methods. </p>\n\n<p>Also, as your variable is a private static final, all the '+' modifiers will happen at compile time and will be optimised anyway so you will be highly optimised. No need to change anything here.</p>\n"},{"tags":[],"owner":{"account_id":5397976,"reputation":60,"user_id":4298571,"display_name":"Vinayak Jallapelli"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1425129393,"creation_date":1425129393,"answer_id":28782136,"question_id":28782081,"body_markdown":"Well, the concatenations in StringBuffer are faster than concatenating individual Strings. Since you&#39;re talking about production environment, you might need to consider whether to use StringBuffer or StringBuilder. StringBuffer is thread-safe, and hence slow as compared to StringBuilder. \r\n\r\nYou can check the differences between String and StringBuffer here: https://stackoverflow.com/questions/2439243/what-is-the-difference-between-string-and-stringbuffer-in-java","title":"Differences between these two sets of code (String x Stringbuffer)","body":"<p>Well, the concatenations in StringBuffer are faster than concatenating individual Strings. Since you're talking about production environment, you might need to consider whether to use StringBuffer or StringBuilder. StringBuffer is thread-safe, and hence slow as compared to StringBuilder. </p>\n\n<p>You can check the differences between String and StringBuffer here: <a href=\"https://stackoverflow.com/questions/2439243/what-is-the-difference-between-string-and-stringbuffer-in-java\">What is the difference between String and StringBuffer in Java?</a></p>\n"},{"tags":[],"owner":{"account_id":15923240,"reputation":92,"user_id":11489601,"display_name":"ashutosh pandey"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1699911880,"creation_date":1564842550,"answer_id":57339236,"question_id":28782081,"body_markdown":"String and StringBuffer and StringBuilder are inbuild classes of Java.\r\nThe basic difference here is that StringBuffer and StringBuilder are mutable and while String class is immutable. For ex:\r\n\r\n    String s=&quot;abc&quot;;\r\n    StringBuffer sb=new StringBuffer(&quot;test&quot;);\r\n   \r\n\r\n(both here s and sb creates a refernce to a string object of &quot;abc&quot; and &quot;test&quot; in heap and s and sb are just reference to that value which is stored in heap while these refernce variable are stored in stack). So now any changes made in s will never change the original value which string s is refering( since string classes are immutable) while sb can be.\r\nfor ex:\r\n\r\n    -&gt;sb.append(&quot; 123&quot;);\r\n\r\n    -&gt;&quot;test 123&quot;\r\n\r\nnow the value to which sb will be referring becomes &quot;test 123&quot;.\r\n\r\n    -&gt;s2=s.append(&quot; 123&quot;);\r\n    -&gt;s2=&quot;abc 123&quot;\r\n\r\n where s will still refer to same &quot;abc&quot;. \r\n\r\n","title":"Differences between these two sets of code (String x Stringbuffer)","body":"<p>String and StringBuffer and StringBuilder are inbuild classes of Java.\nThe basic difference here is that StringBuffer and StringBuilder are mutable and while String class is immutable. For ex:</p>\n<pre><code>String s=&quot;abc&quot;;\nStringBuffer sb=new StringBuffer(&quot;test&quot;);\n</code></pre>\n<p>(both here s and sb creates a refernce to a string object of &quot;abc&quot; and &quot;test&quot; in heap and s and sb are just reference to that value which is stored in heap while these refernce variable are stored in stack). So now any changes made in s will never change the original value which string s is refering( since string classes are immutable) while sb can be.\nfor ex:</p>\n<pre><code>-&gt;sb.append(&quot; 123&quot;);\n\n-&gt;&quot;test 123&quot;\n</code></pre>\n<p>now the value to which sb will be referring becomes &quot;test 123&quot;.</p>\n<pre><code>-&gt;s2=s.append(&quot; 123&quot;);\n-&gt;s2=&quot;abc 123&quot;\n</code></pre>\n<p>where s will still refer to same &quot;abc&quot;.</p>\n"}],"owner":{"account_id":1736460,"reputation":1131,"user_id":1588919,"accept_rate":29,"display_name":"Joao Victor"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":78,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":28782124,"answer_count":3,"score":0,"last_activity_date":1699911880,"creation_date":1425129082,"question_id":28782081,"body_markdown":"Our project is near deployment and some points were passed to us. One of them is to exchange string concatenation to stringbuffers.\r\n\r\nBut some of our strings are SQL queries and they are quite large. When i pass those strings as the parameters of the Stringbuffer, the concatenation still happens. So, theres any difference between these two sets of code?\r\n\r\nWithout stringbuffer\r\n\r\n    private static final String QUERY_CONSULTA_CIDADE_FUVIAL = &quot;SELECT SR.ID_SUB_REGIAO FROM REGIAO_TAB_NEGC RT &quot;\r\n    \t\t\t+ &quot;INNER JOIN SUB_REGIAO_TAB_NEGC ST ON ST.ID_REGIAO_TAB_NEGC = RT.ID_REGIAO_TAB_NEGC &quot;\r\n    \t\t\t+ &quot;INNER JOIN SUB_REGIAO SR ON SR.ID_SUB_REGIAO = ST.ID_SUB_REGIAO INNER JOIN CIDADE C1 ON C1.ID_ESTADO = SR.ID_UF &quot;\r\n    \t\t\t+ &quot;WHERE RT.ID_TAB_NEGC = :idTabelaNegociacao AND C1.ID_CIDD = :idCidade AND SR.FL_FLUVIAL = &#39;S&#39; AND C1.TP_REDSP_FLUV = &#39;S&#39;&quot;;\r\n\r\nWith stringbuffer\r\n\r\n    private static final StringBuffer QUERY_CONSULTA_CIDADE_PERTENCE_SUB_REGIAO = new StringBuffer(\r\n    \t\t\t&quot;SELECT SR.ID_SUB_REGIAO FROM REGIAO_TAB_NEGC RT &quot;\r\n    \t\t\t\t\t+ &quot;INNER JOIN SUB_REGIAO_TAB_NEGC ST ON ST.ID_REGIAO_TAB_NEGC = RT.ID_REGIAO_TAB_NEGC &quot;\r\n    \t\t\t\t\t+ &quot;INNER JOIN SUB_REGIAO SR ON SR.ID_SUB_REGIAO = ST.ID_SUB_REGIAO &quot;\r\n    \t\t\t\t\t+ &quot;INNER JOIN CIDADE C1 ON C1.ID_ESTADO = SR.ID_UF AND C1.TP_CLASS_COMRC_RODO = SR.TP_CLASF &quot;\r\n    \t\t\t\t\t+ &quot;WHERE RT.ID_TAB_NEGC = :idTabelaNegociacao AND C1.ID_CIDD = :idCidade&quot;);\r\n\r\n\r\n","title":"Differences between these two sets of code (String x Stringbuffer)","body":"<p>Our project is near deployment and some points were passed to us. One of them is to exchange string concatenation to stringbuffers.</p>\n\n<p>But some of our strings are SQL queries and they are quite large. When i pass those strings as the parameters of the Stringbuffer, the concatenation still happens. So, theres any difference between these two sets of code?</p>\n\n<p>Without stringbuffer</p>\n\n<pre><code>private static final String QUERY_CONSULTA_CIDADE_FUVIAL = \"SELECT SR.ID_SUB_REGIAO FROM REGIAO_TAB_NEGC RT \"\n            + \"INNER JOIN SUB_REGIAO_TAB_NEGC ST ON ST.ID_REGIAO_TAB_NEGC = RT.ID_REGIAO_TAB_NEGC \"\n            + \"INNER JOIN SUB_REGIAO SR ON SR.ID_SUB_REGIAO = ST.ID_SUB_REGIAO INNER JOIN CIDADE C1 ON C1.ID_ESTADO = SR.ID_UF \"\n            + \"WHERE RT.ID_TAB_NEGC = :idTabelaNegociacao AND C1.ID_CIDD = :idCidade AND SR.FL_FLUVIAL = 'S' AND C1.TP_REDSP_FLUV = 'S'\";\n</code></pre>\n\n<p>With stringbuffer</p>\n\n<pre><code>private static final StringBuffer QUERY_CONSULTA_CIDADE_PERTENCE_SUB_REGIAO = new StringBuffer(\n            \"SELECT SR.ID_SUB_REGIAO FROM REGIAO_TAB_NEGC RT \"\n                    + \"INNER JOIN SUB_REGIAO_TAB_NEGC ST ON ST.ID_REGIAO_TAB_NEGC = RT.ID_REGIAO_TAB_NEGC \"\n                    + \"INNER JOIN SUB_REGIAO SR ON SR.ID_SUB_REGIAO = ST.ID_SUB_REGIAO \"\n                    + \"INNER JOIN CIDADE C1 ON C1.ID_ESTADO = SR.ID_UF AND C1.TP_CLASS_COMRC_RODO = SR.TP_CLASF \"\n                    + \"WHERE RT.ID_TAB_NEGC = :idTabelaNegociacao AND C1.ID_CIDD = :idCidade\");\n</code></pre>\n"},{"tags":["java","collections","sorting","time-complexity","mergesort"],"comments":[{"owner":{"account_id":3282,"reputation":146276,"user_id":4725,"accept_rate":100,"display_name":"Tom Hawtin - tackline"},"score":0,"creation_date":1239823002,"post_id":753237,"comment_id":564655,"body_markdown":"(Collections.sort in JDK7 should do few comparisons for partially sorted data. Josh Bloch has ported Python&#39;s Tim sort (a version of merge sort).)","body":"(Collections.sort in JDK7 should do few comparisons for partially sorted data. Josh Bloch has ported Python&#39;s Tim sort (a version of merge sort).)"},{"owner":{"account_id":3282,"reputation":146276,"user_id":4725,"accept_rate":100,"display_name":"Tom Hawtin - tackline"},"score":1,"creation_date":1239823326,"post_id":753237,"comment_id":564672,"body_markdown":"If it were log base 2 (notation??), 4 log[2] 4 = 4 log[2](2^2) = 4.2 log[2] 2 = 4.2.1 = 8. (If I remember by sixth form maths correctly.) But, yes, there&#39;s a constant there.","body":"If it were log base 2 (notation??), 4 log[2] 4 = 4 log[2](2^2) = 4.2 log[2] 2 = 4.2.1 = 8. (If I remember by sixth form maths correctly.) But, yes, there&#39;s a constant there."},{"owner":{"account_id":15387,"reputation":63710,"user_id":32453,"accept_rate":92,"display_name":"rogerdpack"},"score":0,"creation_date":1333728769,"post_id":753237,"comment_id":12852945,"body_markdown":"so I guess JDK7 uses timsort by default?","body":"so I guess JDK7 uses timsort by default?"}],"answers":[{"tags":[],"owner":{"account_id":23245,"reputation":16786,"user_id":58114,"display_name":"Andy Mikula"},"down_vote_count":0,"up_vote_count":29,"is_accepted":true,"score":29,"last_activity_date":1239822497,"creation_date":1239822497,"answer_id":753245,"question_id":753237,"body_markdown":"O(n log n) doesn&#39;t mean that the number of comparisons will be equal to or less than n log n, just that the time taken will **scale** proportionally to n log n. Try doing tests with 8 nodes, or 16 nodes, or 32 nodes, and checking out the timing.","title":"What sort does Java Collections.sort(nodes) use?","body":"<p>O(n log n) doesn't mean that the number of comparisons will be equal to or less than n log n, just that the time taken will <strong>scale</strong> proportionally to n log n. Try doing tests with 8 nodes, or 16 nodes, or 32 nodes, and checking out the timing.</p>\n"},{"tags":[],"owner":{"account_id":31324,"reputation":34658,"user_id":85931,"accept_rate":57,"display_name":"tpdi"},"down_vote_count":0,"up_vote_count":24,"is_accepted":false,"score":24,"last_activity_date":1699911219,"creation_date":1239823148,"answer_id":753287,"question_id":753237,"body_markdown":"You sorted four nodes, so you didn&#39;t get merge sort; sort switched to insertion sort.\r\n\r\nPer the Wikipedia article on [merge sort][1] (emphasis added):\r\n\r\n&gt;In [Java](https://en.wikipedia.org/wiki/Java_platform), the [Arrays.sort()](https://docs.oracle.com/javase/9/docs/api/java/util/Arrays.html#sort-java.lang.Object:A-) methods use merge sort or a tuned quicksort depending on the datatypes and for implementation efficiency **switch to [insertion sort](https://en.wikipedia.org/wiki/Insertion_sort) when fewer than seven array elements are being sorted**.\r\n\r\n`Arrays.sort` is used indirectly by the collections classes.\r\n\r\nStarting with Java 7, the Oracle implementation of Java switched to use the [timsort][2] algorithm used by Python: [JDK-6804124][3].\r\n\r\n(The timsort monograph, linked above, is well worth reading.)\r\n\r\n  [1]: https://en.wikipedia.org/wiki/Merge_sort#Comparison_with_other_sort_algorithms\r\n  [2]: http://svn.python.org/projects/python/trunk/Objects/listsort.txt\r\n  [3]: https://bugs.java.com/bugdatabase/view_bug?bug_id=6804124","title":"What sort does Java Collections.sort(nodes) use?","body":"<p>You sorted four nodes, so you didn't get merge sort; sort switched to insertion sort.</p>\n<p>Per the Wikipedia article on <a href=\"https://en.wikipedia.org/wiki/Merge_sort#Comparison_with_other_sort_algorithms\" rel=\"nofollow noreferrer\">merge sort</a> (emphasis added):</p>\n<blockquote>\n<p>In <a href=\"https://en.wikipedia.org/wiki/Java_platform\" rel=\"nofollow noreferrer\">Java</a>, the <a href=\"https://docs.oracle.com/javase/9/docs/api/java/util/Arrays.html#sort-java.lang.Object:A-\" rel=\"nofollow noreferrer\">Arrays.sort()</a> methods use merge sort or a tuned quicksort depending on the datatypes and for implementation efficiency <strong>switch to <a href=\"https://en.wikipedia.org/wiki/Insertion_sort\" rel=\"nofollow noreferrer\">insertion sort</a> when fewer than seven array elements are being sorted</strong>.</p>\n</blockquote>\n<p><code>Arrays.sort</code> is used indirectly by the collections classes.</p>\n<p>Starting with Java 7, the Oracle implementation of Java switched to use the <a href=\"http://svn.python.org/projects/python/trunk/Objects/listsort.txt\" rel=\"nofollow noreferrer\">timsort</a> algorithm used by Python: <a href=\"https://bugs.java.com/bugdatabase/view_bug?bug_id=6804124\" rel=\"nofollow noreferrer\">JDK-6804124</a>.</p>\n<p>(The timsort monograph, linked above, is well worth reading.)</p>\n"},{"tags":[],"owner":{"account_id":25119,"reputation":16621,"user_id":64331,"display_name":"Varkhan"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1239823248,"creation_date":1239823248,"answer_id":753290,"question_id":753237,"body_markdown":"An algorithm A(n) that processes an amount of data n is in O(f(n)), for some function f, if there exist two strictly positive constants C\\_inf and C\\_sup such that:\r\n\r\n  C\\_inf . f(n) &lt; ExpectedValue(OperationCount(A(n))) &lt; C\\_sup . f(n)\r\n\r\nTwo things to note:\r\n\r\n * The actual constants C could be anything, and *do* depend on the relative costs of operations (depending on the language, the VM, the architecture, or your actual definition of an operation). On some platforms, for instance, + and * have the same cost, on some other the later is an order of magnitude slower.\r\n\r\n * The quantity ascribed as &quot;in O(f(n))&quot; is an *expected* operation count, based on some probably arbitrary model of the data you are dealing with. For instance, if your data is almost completely sorted, a merge-sort algorithm is going to be mostly O(n), not O(n . Log(n)).","title":"What sort does Java Collections.sort(nodes) use?","body":"<p>An algorithm A(n) that processes an amount of data n is in O(f(n)), for some function f, if there exist two strictly positive constants C_inf and C_sup such that:</p>\n\n<p>C_inf . f(n) &lt; ExpectedValue(OperationCount(A(n))) &lt; C_sup . f(n)</p>\n\n<p>Two things to note:</p>\n\n<ul>\n<li><p>The actual constants C could be anything, and <em>do</em> depend on the relative costs of operations (depending on the language, the VM, the architecture, or your actual definition of an operation). On some platforms, for instance, + and * have the same cost, on some other the later is an order of magnitude slower.</p></li>\n<li><p>The quantity ascribed as \"in O(f(n))\" is an <em>expected</em> operation count, based on some probably arbitrary model of the data you are dealing with. For instance, if your data is almost completely sorted, a merge-sort algorithm is going to be mostly O(n), not O(n . Log(n)).</p></li>\n</ul>\n"},{"tags":[],"owner":{"account_id":20470,"reputation":21695,"user_id":48933,"accept_rate":90,"display_name":"Neil Coffey"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1239825089,"creation_date":1239825089,"answer_id":753409,"question_id":753237,"body_markdown":"I&#39;ve written some stuff you may be interested in about the Java sort algorithm and taken [some performance measurements of Collections.sort()][1]. The algorithm at present is a **mergesort with an insertion sort** once you get down to a certain size of sublists (**N.B. this algorithm is very probably going to change in Java 7**).\r\n\r\nYou should really take the Big O notation as an indication of how the algorithm will scale overall; for a particular sort, the precise time will deviate from the time predicted by this calculation (as you&#39;ll see on my graph, the two sort algorithms that are combined each have different performance characteristics, and so the overall time for a sort is a bit more complex).\r\n\r\nThat said, as a rough guide, for every time you double the number of elements, if you multiply the expected time by 2.2, you won&#39;t be far out. (It doesn&#39;t make much sense really to do this for very small lists of a few elements, though.)\r\n\r\n  [1]: http://www.javamex.com/tutorials/collections/sorting_java_algorithm_performance_2.shtml","title":"What sort does Java Collections.sort(nodes) use?","body":"<p>I've written some stuff you may be interested in about the Java sort algorithm and taken <a href=\"http://www.javamex.com/tutorials/collections/sorting_java_algorithm_performance_2.shtml\" rel=\"nofollow noreferrer\">some performance measurements of Collections.sort()</a>. The algorithm at present is a <strong>mergesort with an insertion sort</strong> once you get down to a certain size of sublists (<strong>N.B. this algorithm is very probably going to change in Java 7</strong>).</p>\n\n<p>You should really take the Big O notation as an indication of how the algorithm will scale overall; for a particular sort, the precise time will deviate from the time predicted by this calculation (as you'll see on my graph, the two sort algorithms that are combined each have different performance characteristics, and so the overall time for a sort is a bit more complex).</p>\n\n<p>That said, as a rough guide, for every time you double the number of elements, if you multiply the expected time by 2.2, you won't be far out. (It doesn't make much sense really to do this for very small lists of a few elements, though.)</p>\n"}],"owner":{"account_id":30693,"reputation":621,"user_id":83804,"accept_rate":100,"display_name":"Kyle Jones"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":23803,"favorite_count":0,"down_vote_count":0,"up_vote_count":12,"accepted_answer_id":753245,"answer_count":4,"score":12,"last_activity_date":1699911219,"creation_date":1239822328,"question_id":753237,"body_markdown":"I think it is MergeSort, which is O(n log n).\r\n\r\nHowever, the following output disagrees:\r\n\r\n    -1,0000000099000391,0000000099000427\r\n    1,0000000099000427,0000000099000346\r\n    5,0000000099000391,0000000099000346\r\n    1,0000000099000427,0000000099000345\r\n    5,0000000099000391,0000000099000345\r\n    1,0000000099000346,0000000099000345\r\n\r\nI am sorting a nodelist of 4 nodes by sequence number, and the sort is doing 6 comparisons.\r\nI am puzzled because 6 &gt; (4 log(4)). Can someone explain this to me?\r\n\r\n\r\n[P.S. It is mergesort, but I still don&#39;t understand my results.][1]\r\n\r\n\r\n  [1]: http://www.uni-ulm.de/admin/doku/jdk1.5/docs/api/java/util/Collections.html#sort(java.util.List,%20java.util.Comparator)\r\n\r\nThanks for the answers everyone.  Thank you Tom for correcting my math.","title":"What sort does Java Collections.sort(nodes) use?","body":"<p>I think it is MergeSort, which is O(n log n).</p>\n\n<p>However, the following output disagrees:</p>\n\n<pre><code>-1,0000000099000391,0000000099000427\n1,0000000099000427,0000000099000346\n5,0000000099000391,0000000099000346\n1,0000000099000427,0000000099000345\n5,0000000099000391,0000000099000345\n1,0000000099000346,0000000099000345\n</code></pre>\n\n<p>I am sorting a nodelist of 4 nodes by sequence number, and the sort is doing 6 comparisons.\nI am puzzled because 6 > (4 log(4)). Can someone explain this to me?</p>\n\n<p><a href=\"http://www.uni-ulm.de/admin/doku/jdk1.5/docs/api/java/util/Collections.html#sort(java.util.List,%20java.util.Comparator)\" rel=\"noreferrer\">P.S. It is mergesort, but I still don't understand my results.</a></p>\n\n<p>Thanks for the answers everyone.  Thank you Tom for correcting my math.</p>\n"},{"tags":["java","tomcat","jboss","weblogic"],"comments":[{"owner":{"account_id":318397,"reputation":203588,"user_id":635608,"display_name":"Mat"},"score":1,"creation_date":1385919109,"post_id":20315022,"comment_id":30315321,"body_markdown":"`/dev/./urandom` and `/dev/urandom` are the same path, there&#39;s no difference.","body":"<code>&#47;dev&#47;.&#47;urandom</code> and <code>&#47;dev&#47;urandom</code> are the same path, there&#39;s no difference."},{"owner":{"account_id":143796,"reputation":5916,"user_id":352403,"accept_rate":71,"display_name":"souser"},"score":2,"creation_date":1385919805,"post_id":20315022,"comment_id":30315497,"body_markdown":"There should not be, but apparently there is","body":"There should not be, but apparently there is"},{"owner":{"account_id":318397,"reputation":203588,"user_id":635608,"display_name":"Mat"},"score":1,"creation_date":1385919983,"post_id":20315022,"comment_id":30315548,"body_markdown":"hum. weird. http://stackoverflow.com/a/2325109/635608","body":"hum. weird. <a href=\"http://stackoverflow.com/a/2325109/635608\">stackoverflow.com/a/2325109/635608</a>"},{"owner":{"account_id":143796,"reputation":5916,"user_id":352403,"accept_rate":71,"display_name":"souser"},"score":0,"creation_date":1385920046,"post_id":20315022,"comment_id":30315564,"body_markdown":"Yup, just arrived at the same conclusion ! Bug 6202721 explains it.","body":"Yup, just arrived at the same conclusion ! Bug 6202721 explains it."}],"answers":[{"tags":[],"owner":{"account_id":9760,"reputation":85859,"user_id":18157,"accept_rate":100,"display_name":"Jim Garrison"},"down_vote_count":0,"up_vote_count":11,"is_accepted":true,"score":11,"last_activity_date":1699910220,"creation_date":1385920039,"answer_id":20315239,"question_id":20315022,"body_markdown":"This is actually a hack introduced into the JVM back in 1.3 or 1.4 days.\r\n\r\n- [JDK-4705093 : Use /dev/urandom rather than /dev/random if it exists.][1]\r\n- [JDK-6202721 : SHA1PRNG reads from /dev/random even if /dev/urandom selected][2] \r\n\r\nThe basic issue is that in the native JVM code they hardcoded `/dev/urandom` to actually use `/dev/random` to attempt to ensure sufficient entropy.  Since `/dev/urandom` is supposed to be guaranteed not to block, this has the unintended consequence of blocking if not enough entropy is available.\r\n\r\nThe hardcoding looks specifically for the string `/dev/urandom`, so providing something that resolves to the same thing but doesn&#39;t match that causes the desired behavior.  If you code `/dev/./urandom` you bypass the hardcoded aliasing and get to the intended `urandom` entropy source.\r\n\r\n[1]: https://bugs.java.com/bugdatabase/view_bug?bug_id=4705093\r\n[2]: https://bugs.java.com/bugdatabase/view_bug?bug_id=6202721","title":"java slow : entropy related issue","body":"<p>This is actually a hack introduced into the JVM back in 1.3 or 1.4 days.</p>\n<ul>\n<li><a href=\"https://bugs.java.com/bugdatabase/view_bug?bug_id=4705093\" rel=\"nofollow noreferrer\">JDK-4705093 : Use /dev/urandom rather than /dev/random if it exists.</a></li>\n<li><a href=\"https://bugs.java.com/bugdatabase/view_bug?bug_id=6202721\" rel=\"nofollow noreferrer\">JDK-6202721 : SHA1PRNG reads from /dev/random even if /dev/urandom selected</a></li>\n</ul>\n<p>The basic issue is that in the native JVM code they hardcoded <code>/dev/urandom</code> to actually use <code>/dev/random</code> to attempt to ensure sufficient entropy.  Since <code>/dev/urandom</code> is supposed to be guaranteed not to block, this has the unintended consequence of blocking if not enough entropy is available.</p>\n<p>The hardcoding looks specifically for the string <code>/dev/urandom</code>, so providing something that resolves to the same thing but doesn't match that causes the desired behavior.  If you code <code>/dev/./urandom</code> you bypass the hardcoded aliasing and get to the intended <code>urandom</code> entropy source.</p>\n"},{"tags":[],"owner":{"account_id":3048069,"reputation":2704,"user_id":2583229,"accept_rate":29,"display_name":"revau.lt"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1623237589,"creation_date":1426627332,"answer_id":29109963,"question_id":20315022,"body_markdown":"Using /dev/urandom (non blocking) is fine for most cases. Personally I would make sure to have some HW random number generator configured to be positive to have enough entropy (see below). \r\n\r\nIf you have to use /dev/random (blocking) and you cannot block then you should make sure to always have enough entropy. A solution to this is to configure a HW random number generator.\r\n\r\nAssuming your on Linux you can check the available entropy with:\r\n\r\n`cat /proc/sys/kernel/random/entropy_avail`\r\n\r\nIf you are on a machine that has a hw random number generator you most probably want to install rngd. You can check if your cpu has one by issuing the command:\r\n\r\n`cat /proc/cpuinfo`\r\n\r\nLook for flags called *rand*. You can also check if the file /dev/hwrng is present. You might have/want to load the corresponding module: \r\n\r\n` ls /lib/modules/*/kernel/drivers/char/hw_random `\r\n\r\nFor me this is:\r\n\r\n`sudo modprobe tpm-rng`\r\n\r\nTo make it permanent:\r\n\r\n`echo tpm-rng | sudo tee -a /etc/modules`\r\n\r\nIf you happen to be on Ubuntu/Debian just install the package rng-tools.\r\n\r\n`sudo aptitude install rng-tools`\r\n\r\nIf you check your entropy before and after installing rng-tools you should see a significant increase.\r\n\r\nThe following command should show you available entropy sources:\r\n\r\n`sudo rngd -f -r /dev/hwrng -v`\r\n\r\nNote that if you need better security you want to mix multiple entropy sources. Not sure rng-tools supports this.","title":"java slow : entropy related issue","body":"<p>Using /dev/urandom (non blocking) is fine for most cases. Personally I would make sure to have some HW random number generator configured to be positive to have enough entropy (see below).</p>\n<p>If you have to use /dev/random (blocking) and you cannot block then you should make sure to always have enough entropy. A solution to this is to configure a HW random number generator.</p>\n<p>Assuming your on Linux you can check the available entropy with:</p>\n<p><code>cat /proc/sys/kernel/random/entropy_avail</code></p>\n<p>If you are on a machine that has a hw random number generator you most probably want to install rngd. You can check if your cpu has one by issuing the command:</p>\n<p><code>cat /proc/cpuinfo</code></p>\n<p>Look for flags called <em>rand</em>. You can also check if the file /dev/hwrng is present. You might have/want to load the corresponding module:</p>\n<p><code>ls /lib/modules/*/kernel/drivers/char/hw_random</code></p>\n<p>For me this is:</p>\n<p><code>sudo modprobe tpm-rng</code></p>\n<p>To make it permanent:</p>\n<p><code>echo tpm-rng | sudo tee -a /etc/modules</code></p>\n<p>If you happen to be on Ubuntu/Debian just install the package rng-tools.</p>\n<p><code>sudo aptitude install rng-tools</code></p>\n<p>If you check your entropy before and after installing rng-tools you should see a significant increase.</p>\n<p>The following command should show you available entropy sources:</p>\n<p><code>sudo rngd -f -r /dev/hwrng -v</code></p>\n<p>Note that if you need better security you want to mix multiple entropy sources. Not sure rng-tools supports this.</p>\n"}],"owner":{"account_id":143796,"reputation":5916,"user_id":352403,"accept_rate":71,"display_name":"souser"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2703,"favorite_count":0,"down_vote_count":0,"up_vote_count":6,"accepted_answer_id":20315239,"answer_count":2,"score":6,"last_activity_date":1699910220,"creation_date":1385918860,"question_id":20315022,"body_markdown":"I am running into an issue where java is slow when used over SSL. The solution is to add &lt;pre&gt;-Djava.security.egd=file:/dev/./urandom&lt;/pre&gt; to java at the command line. Since I have multiple JVM&#39;s, I dont want to modify every single JVM to contain this string and hence would like to add it to the file &lt;pre&gt;$JAVA_HOME/jre/lib/security/java.security&lt;/pre&gt;\r\n\r\nNow, the java.security file already contains &lt;pre&gt;securerandom.source=file:/dev/urandom&lt;/pre&gt;\r\n\r\nTwo questions on this :\r\n\r\n1. Why and how is &quot;/dev/urandom&quot; different from &quot;/dev/./urandom&quot;. Why doesnt java accept &quot;/dev/urandom&quot;\r\n2. For the JVM&#39;s that I have running, how can I tell whether they are using the correct urandmon device (vs random)","title":"java slow : entropy related issue","body":"<p>I am running into an issue where java is slow when used over SSL. The solution is to add <pre>-Djava.security.egd=file:/dev/./urandom</pre> to java at the command line. Since I have multiple JVM's, I dont want to modify every single JVM to contain this string and hence would like to add it to the file <pre>$JAVA_HOME/jre/lib/security/java.security</pre></p>\n\n<p>Now, the java.security file already contains <pre>securerandom.source=file:/dev/urandom</pre></p>\n\n<p>Two questions on this :</p>\n\n<ol>\n<li>Why and how is \"/dev/urandom\" different from \"/dev/./urandom\". Why doesnt java accept \"/dev/urandom\"</li>\n<li>For the JVM's that I have running, how can I tell whether they are using the correct urandmon device (vs random)</li>\n</ol>\n"},{"tags":["javascript","java","amazon-web-services","amazon-ec2","amazon-elastic-beanstalk"],"comments":[{"owner":{"account_id":100740,"reputation":73207,"user_id":271415,"accept_rate":91,"display_name":"jarmod"},"score":1,"creation_date":1699911481,"post_id":77476931,"comment_id":136588024,"body_markdown":"It seems very unlikely that a `Request method &#39;POST&#39; not supported` response is caused by firewalls, security groups, or network routes. I would imagine that your client&#39;s HTTP POST request made it to the endpoint and was rejected, because the application at that endpoint doesn&#39;t support POST.","body":"It seems very unlikely that a <code>Request method &#39;POST&#39; not supported</code> response is caused by firewalls, security groups, or network routes. I would imagine that your client&#39;s HTTP POST request made it to the endpoint and was rejected, because the application at that endpoint doesn&#39;t support POST."},{"owner":{"account_id":29494496,"reputation":1,"user_id":22602863,"display_name":"Fahd Mirza"},"score":0,"creation_date":1699915329,"post_id":77476931,"comment_id":136588567,"body_markdown":"Hi Jaromd,  thanks for insight by any chance can you give me some instructions on how to fix it? or how to see ?","body":"Hi Jaromd,  thanks for insight by any chance can you give me some instructions on how to fix it? or how to see ?"},{"owner":{"account_id":100740,"reputation":73207,"user_id":271415,"accept_rate":91,"display_name":"jarmod"},"score":0,"creation_date":1699915788,"post_id":77476931,"comment_id":136588637,"body_markdown":"First ensure that the URL you&#39;re posting to is actually correct. Then use logging (e.g. at your load balancer or on your web servers) or network capture to determine which EC2 instance the POST request is actually hitting. Then diagnose it locally on that instance (check any proxy config that might block/deny POST requests, check the code deployed, test GET and POST requests to it locally).","body":"First ensure that the URL you&#39;re posting to is actually correct. Then use logging (e.g. at your load balancer or on your web servers) or network capture to determine which EC2 instance the POST request is actually hitting. Then diagnose it locally on that instance (check any proxy config that might block/deny POST requests, check the code deployed, test GET and POST requests to it locally)."}],"owner":{"account_id":29494496,"reputation":1,"user_id":22602863,"display_name":"Fahd Mirza"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":35,"favorite_count":0,"down_vote_count":2,"up_vote_count":0,"answer_count":0,"score":-2,"last_activity_date":1699910124,"creation_date":1699910124,"question_id":77476931,"body_markdown":"Hello guys i am having a issue while sending data the error is &quot;request method &#39;post&#39; not supported. I have uploaded a image of the error \r\n\r\nThis is only happnening in one of our testing envr, i have done a couple of troubleshooting steps but any insight into this will be helpful \r\n1-Copied the sg group from A -&gt; B\r\n2-Went to Elastic Beanstalk found A elastci beanstak and copied the listeners to B elastic beanstalk \r\n3-Checked Nginx on A instance and it was the same for B instance\r\n  -&quot;cat /etc/nginx/conf.d/elasticbeanstalk/00_application.conf&quot; \r\n4-Checked Tomcat it is the same for A instance -&gt;B instance \r\n- went into the conf file and looked for web.xml/ \r\n- checked the servlet maping they both looked the same from A instance -&gt; B instance      \r\n5- made sure that port 80, 22 and 443 were allowed on the inbound and the source 0.0.0.0/0\r\n\r\ni can rebuild the elastic beanstalk but i want to see if there is any ideas before i do that \r\n\r\n[enter image description here](https://i.stack.imgur.com/UhDP4.png) \r\n\r\nIf i wanted to check the connection why its timing out would i ssh into the ec2 and then run the command ping (the other ip address of the ec2?)\r\n\r\nThank you \r\n\r\n1-Copied the sg group from A -&gt; B\r\n2-Went to Elastic Beanstalk found A elastci beanstak and copied the listeners to B elastic beanstalk \r\n3-Checked Nginx on A instance and it was the same for B instance\r\n  -&quot;cat /etc/nginx/conf.d/elasticbeanstalk/00_application.conf&quot; \r\n4-Checked Tomcat it is the same for A instance -&gt;B instance \r\n- went into the conf file and looked for web.xml/ \r\n- checked the servlet maping they both looked the same from A instance -&gt; B instance      \r\n5- made sure that port 80, 22 and 443 were allowed on the inbound and the source 0.0.0.0/0\r\n\r\ni can rebuild the elastic beanstalk but i want to see if there is any ideas before i do that \r\n\r\n[enter image description here](https://i.stack.imgur.com/UhDP4.png) \r\n\r\nIf i wanted to check the connection why its timing out would i ssh into the ec2 and then run the command ping (the other ip address of the ec2?)\r\n\r\nThank you ","title":"Request method &#39;POST&#39; not supported in ec2","body":"<p>Hello guys i am having a issue while sending data the error is &quot;request method 'post' not supported. I have uploaded a image of the error</p>\n<p>This is only happnening in one of our testing envr, i have done a couple of troubleshooting steps but any insight into this will be helpful\n1-Copied the sg group from A -&gt; B\n2-Went to Elastic Beanstalk found A elastci beanstak and copied the listeners to B elastic beanstalk\n3-Checked Nginx on A instance and it was the same for B instance\n-&quot;cat /etc/nginx/conf.d/elasticbeanstalk/00_application.conf&quot;\n4-Checked Tomcat it is the same for A instance -&gt;B instance</p>\n<ul>\n<li>went into the conf file and looked for web.xml/</li>\n<li>checked the servlet maping they both looked the same from A instance -&gt; B instance<br />\n5- made sure that port 80, 22 and 443 were allowed on the inbound and the source 0.0.0.0/0</li>\n</ul>\n<p>i can rebuild the elastic beanstalk but i want to see if there is any ideas before i do that</p>\n<p><a href=\"https://i.stack.imgur.com/UhDP4.png\" rel=\"nofollow noreferrer\">enter image description here</a></p>\n<p>If i wanted to check the connection why its timing out would i ssh into the ec2 and then run the command ping (the other ip address of the ec2?)</p>\n<p>Thank you</p>\n<p>1-Copied the sg group from A -&gt; B\n2-Went to Elastic Beanstalk found A elastci beanstak and copied the listeners to B elastic beanstalk\n3-Checked Nginx on A instance and it was the same for B instance\n-&quot;cat /etc/nginx/conf.d/elasticbeanstalk/00_application.conf&quot;\n4-Checked Tomcat it is the same for A instance -&gt;B instance</p>\n<ul>\n<li>went into the conf file and looked for web.xml/</li>\n<li>checked the servlet maping they both looked the same from A instance -&gt; B instance<br />\n5- made sure that port 80, 22 and 443 were allowed on the inbound and the source 0.0.0.0/0</li>\n</ul>\n<p>i can rebuild the elastic beanstalk but i want to see if there is any ideas before i do that</p>\n<p><a href=\"https://i.stack.imgur.com/UhDP4.png\" rel=\"nofollow noreferrer\">enter image description here</a></p>\n<p>If i wanted to check the connection why its timing out would i ssh into the ec2 and then run the command ping (the other ip address of the ec2?)</p>\n<p>Thank you</p>\n"},{"tags":["java","intellij-idea","regex-group","assertion"],"comments":[{"owner":{"account_id":794766,"reputation":158675,"user_id":871026,"accept_rate":76,"display_name":"Reimeus"},"score":0,"creation_date":1699911104,"post_id":77476820,"comment_id":136587972,"body_markdown":"`assertTrue(yt.getUrl().contains(&quot;t=&quot;));` seems simpler...","body":"<code>assertTrue(yt.getUrl().contains(&quot;t=&quot;));</code> seems simpler..."}],"answers":[{"tags":[],"owner":{"account_id":7098080,"reputation":930,"user_id":5430811,"accept_rate":83,"display_name":"Semaphor"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1699909790,"creation_date":1699909790,"answer_id":77476897,"question_id":77476820,"body_markdown":" You need to accept any characters multiple times before and after `t=`, the following should work:\r\n\r\n    @Test\r\n    void hasCurrentProgress()\r\n    {\r\n        YTVideo yt = new YTVideo();\r\n        yt.setUrl(&quot;https://www.youtube.com/watch?v=U6Z8FkjGEb4&amp;t=2s&quot;);\r\n        assertTrue(yt.getUrl().matches(&quot;.*(t=).*&quot;));\r\n    }","title":"Why am I receiving an AssertionFailedError when using matches() in assertTrue()?","body":"<p>You need to accept any characters multiple times before and after <code>t=</code>, the following should work:</p>\n<pre><code>@Test\nvoid hasCurrentProgress()\n{\n    YTVideo yt = new YTVideo();\n    yt.setUrl(&quot;https://www.youtube.com/watch?v=U6Z8FkjGEb4&amp;t=2s&quot;);\n    assertTrue(yt.getUrl().matches(&quot;.*(t=).*&quot;));\n}\n</code></pre>\n"}],"owner":{"account_id":29895201,"reputation":1,"user_id":22910317,"display_name":"floppalover"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":47,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1699909790,"creation_date":1699908956,"question_id":77476820,"body_markdown":"    @Test\r\n    void hasCurrentProgress()\r\n    {\r\n        YTVideo yt = new YTVideo();\r\n        yt.setUrl(&quot;https://www.youtube.com/watch?v=U6Z8FkjGEb4&amp;t=2s&quot;);\r\n        assertTrue(yt.getUrl().matches(&quot;(t=)&quot;));\r\n    }\r\n\r\nI am trying to detect if there is a &quot;t=&quot; anywhere in the url but the test case returns false even if the given url does contain a &quot;t=&quot; and works in the &quot;Check RegExp&quot; feature on IntelliJ. Does anybody have a fix for this but still using RegEx?","title":"Why am I receiving an AssertionFailedError when using matches() in assertTrue()?","body":"<pre><code>@Test\nvoid hasCurrentProgress()\n{\n    YTVideo yt = new YTVideo();\n    yt.setUrl(&quot;https://www.youtube.com/watch?v=U6Z8FkjGEb4&amp;t=2s&quot;);\n    assertTrue(yt.getUrl().matches(&quot;(t=)&quot;));\n}\n</code></pre>\n<p>I am trying to detect if there is a &quot;t=&quot; anywhere in the url but the test case returns false even if the given url does contain a &quot;t=&quot; and works in the &quot;Check RegExp&quot; feature on IntelliJ. Does anybody have a fix for this but still using RegEx?</p>\n"},{"tags":["java","android","c++","android-ndk","java-native-interface"],"comments":[{"owner":{"account_id":27742476,"reputation":1,"user_id":21178662,"display_name":"Daniil Solodkov"},"score":0,"creation_date":1698501959,"post_id":77379401,"comment_id":136415351,"body_markdown":"I displayed /proc/%d/maps and saw that there are a lot of different processes there, but I don’t need it, then where should I look for it?(","body":"I displayed /proc/%d/maps and saw that there are a lot of different processes there, but I don’t need it, then where should I look for it?("},{"owner":{"account_id":27742476,"reputation":1,"user_id":21178662,"display_name":"Daniil Solodkov"},"score":0,"creation_date":1698725820,"post_id":77379401,"comment_id":136438600,"body_markdown":"This bug makes me cry","body":"This bug makes me cry"},{"owner":{"account_id":71739,"reputation":307143,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":0,"creation_date":1699907993,"post_id":77379401,"comment_id":136587488,"body_markdown":"The required JNI version is latter than your JVM’s.","body":"The required JNI version is latter than your JVM’s."}],"owner":{"account_id":27742476,"reputation":1,"user_id":21178662,"display_name":"Daniil Solodkov"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":63,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1699908859,"creation_date":1698495391,"question_id":77379401,"body_markdown":"I&#39;m trying to create a launcher for SAMP Android. Everything was going well until the integration of SAMP itself ([build69](https://github.com/Hobr/SA-MP-Android/tree/master)). libsamp.so cannot find the address of the neighboring libGTASA.so library.\r\n\r\nInitializing all libraries (Java)\r\n\r\n```\r\nstatic {\r\n        vmVersion = null;\r\n        System.out.println(&quot;**** Loading SO&#39;s&quot;);\r\n        try\r\n        {\r\n            vmVersion = System.getProperty(&quot;java.vm.version&quot;);\r\n            System.out.println(&quot;vmVersion &quot; + vmVersion);\r\n            System.out.println(&quot;**** Loading libImmEmulatorJ.so&quot;);\r\n            System.loadLibrary(&quot;ImmEmulatorJ&quot;);\r\n        } catch (ExceptionInInitializerError | UnsatisfiedLinkError e) {\r\n        }\r\n        System.out.println(&quot;**** Loading libGTASA.so&quot;);\r\n        System.loadLibrary(&quot;GTASA&quot;);\r\n        System.out.println(&quot;**** Loading libsamp.so&quot;);\r\n        System.loadLibrary(&quot;samp&quot;);\r\n    }\r\n```\r\n\r\n\r\nFinding a library in libsamp.so (C++ JNI)\r\n\r\n\r\n```\r\njint JNI_OnLoad(JavaVM *vm, void *reserved)\r\n{\r\n  Log(&quot;SAMP library loaded! Build time: &quot; __DATE__ &quot; &quot; __TIME__);\r\n\r\n  g_libGTASA = FindLibrary(&quot;libGTASA.so&quot;);\r\n  if(g_libGTASA == 0)\r\n  {\r\n    Log(&quot;ERROR: libGTASA.so address not found!&quot;);\r\n    return 0;\r\n  }\r\n\r\n  Log(&quot;libGTASA.so image base address: 0x%X&quot;, g_libGTASA);\r\n\r\n  srand(time(0));\r\n\r\n  InitHookStuff();\r\n  InitRenderWareFunctions();\r\n  InstallSpecialHooks();\r\n\r\n  pthread_t thread;\r\n  pthread_create(&amp;thread, 0, Init, 0);\r\n\r\n  struct sigaction act;\r\n  act.sa_sigaction = handler;\r\n  sigemptyset(&amp;act.sa_mask);\r\n  act.sa_flags = SA_SIGINFO;\r\n  sigaction(SIGSEGV, &amp;act, 0);\r\n\r\n  return JNI_VERSION_1_4;\r\n}\r\n```\r\n\r\nFindLibrary:\r\n\r\n```\r\nuintptr_t FindLibrary(const char* library)\r\n{\r\n    char filename[0xFF] = {0},\r\n    buffer[2048] = {0};\r\n    FILE *fp = 0;\r\n    uintptr_t address = 0;\r\n\r\n    sprintf( filename, &quot;/proc/%d/maps&quot;, getpid() );\r\n\r\n    fp = fopen( filename, &quot;rt&quot; );\r\n    if(fp == 0)\r\n    {\r\n        Log(&quot;ERROR: can&#39;t open file %s&quot;, filename);\r\n        goto done;\r\n    }\r\n\r\n    while(fgets(buffer, sizeof(buffer), fp))\r\n    {\r\n        if( strstr( buffer, library ) )\r\n        {\r\n            address = (uintptr_t)strtoul( buffer, 0, 16 );\r\n            break;\r\n        }\r\n    }\r\n\r\n    done:\r\n\r\n    if(fp)\r\n      fclose(fp);\r\n\r\n    return address;\r\n}\r\n```\r\n\r\n\r\nApplication log:\r\n\r\n\r\n```\r\n2023-10-28 14:57:32.800 29054-29054 System.out              com.kalinovka.game                   I  **** Loading SO&#39;s\r\n2023-10-28 14:57:32.800 29054-29054 System.out              com.kalinovka.game                   I  vmVersion 2.1.0\r\n2023-10-28 14:57:32.800 29054-29054 System.out              com.kalinovka.game                   I  **** Loading libImmEmulatorJ.so\r\n2023-10-28 14:57:32.804 29054-29054 System.out              com.kalinovka.game                   I  **** Loading libGTASA.so\r\n2023-10-28 14:57:32.813 29054-29054 NVEvent                 com.kalinovka.game                   D  JNI_OnLoad called\r\n2023-10-28 14:57:32.813 29054-29054 NVEvent                 com.kalinovka.game                   D  RegisterNatives 12\r\n2023-10-28 14:57:32.813 29054-29054 System.out              com.kalinovka.game                   I  **** Loading libsamp.so\r\n2023-10-28 14:57:32.815 29054-29054 AXL                     com.kalinovka.game                   I  SAMP library loaded! Build time: Oct 28 2023 14:47:20\r\n2023-10-28 14:57:32.819 29054-29054 AXL                     com.kalinovka.game                   I  ERROR: libGTASA.so address not found!\r\n2023-10-28 14:57:32.820 29054-29054 AndroidRuntime          com.kalinovka.game                   D  Shutting down VM\r\n2023-10-28 14:57:32.823 29054-29054 AndroidRuntime          com.kalinovka.game                   E  FATAL EXCEPTION: main\r\n                                                                                                    Process: com.kalinovka.game, PID: 29054\r\n                                                                                                    java.lang.UnsatisfiedLinkError: Bad JNI version returned from JNI_OnLoad in &quot;/data/app/~~AIt22YvJlsdkRyH_N_WAEw==/com.kalinovka.game-G93aBwDihlPGnVBadiHFkQ==/base.apk!/lib/armeabi-v7a/libsamp.so&quot;: 0\r\n                                                                                                    \tat java.lang.Runtime.loadLibrary0(Runtime.java:1082)\r\n                                                                                                    \tat java.lang.Runtime.loadLibrary0(Runtime.java:1003)\r\n                                                                                                    \tat java.lang.System.loadLibrary(System.java:1661)\r\n                                                                                                    \tat com.kalinovka.game.core.GTASA.&lt;clinit&gt;(GTASA.java:28)\r\n                                                                                                    \tat java.lang.Class.newInstance(Native Method)\r\n                                                                                                    \tat android.app.AppComponentFactory.instantiateActivity(AppComponentFactory.java:95)\r\n                                                                                                    \tat androidx.core.app.CoreComponentFactory.instantiateActivity(CoreComponentFactory.java:45)\r\n                                                                                                    \tat android.app.Instrumentation.newActivity(Instrumentation.java:1287)\r\n                                                                                                    \tat android.app.ActivityThread.performLaunchActivity(ActivityThread.java:3701)\r\n                                                                                                    \tat android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:3977)\r\n                                                                                                    \tat android.app.servertransaction.LaunchActivityItem.execute(LaunchActivityItem.java:109)\r\n                                                                                                    \tat android.app.servertransaction.TransactionExecutor.executeCallbacks(TransactionExecutor.java:135)\r\n                                                                                                    \tat android.app.servertransaction.TransactionExecutor.execute(TransactionExecutor.java:95)\r\n                                                                                                    \tat android.app.ActivityThread$H.handleMessage(ActivityThread.java:2374)\r\n                                                                                                    \tat android.os.Handler.dispatchMessage(Handler.java:106)\r\n                                                                                                    \tat android.os.Looper.loopOnce(Looper.java:233)\r\n                                                                                                    \tat android.os.Looper.loop(Looper.java:344)\r\n                                                                                                    \tat android.app.ActivityThread.main(ActivityThread.java:8249)\r\n                                                                                                    \tat java.lang.reflect.Method.invoke(Native Method)\r\n                                                                                                    \tat com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:589)\r\n                                                                                                    \tat com.android.internal.os.ZygoteInit.main(ZygoteInit.java:1071)\r\n2023-10-28 14:57:32.894 29054-29054 Process                 com.kalinovka.game                   I  Sending signal. PID: 29054 SIG: 9\r\n```\r\nError: Invalid JNI version returned from JNI_OnLoad - since libsamp.so sent 0, you can ignore this\r\n\r\n\r\nI removed all references to libsamp.so and the application works, GTASA itself is initialized by the id, this means that libGTASA.so is loaded and working.\r\n\r\nI changed the library name in FindLibrary, it also returned zero. Indicates that there is a problem with access due to the Android API level.\r\n\r\nI found the same problem on a Russian-language site, but there was no solution, but the question indicated that this error only occurs on Android API 30+","title":"Why does FindLibrary return 0?","body":"<p>I'm trying to create a launcher for SAMP Android. Everything was going well until the integration of SAMP itself (<a href=\"https://github.com/Hobr/SA-MP-Android/tree/master\" rel=\"nofollow noreferrer\">build69</a>). libsamp.so cannot find the address of the neighboring libGTASA.so library.</p>\n<p>Initializing all libraries (Java)</p>\n<pre><code>static {\n        vmVersion = null;\n        System.out.println(&quot;**** Loading SO's&quot;);\n        try\n        {\n            vmVersion = System.getProperty(&quot;java.vm.version&quot;);\n            System.out.println(&quot;vmVersion &quot; + vmVersion);\n            System.out.println(&quot;**** Loading libImmEmulatorJ.so&quot;);\n            System.loadLibrary(&quot;ImmEmulatorJ&quot;);\n        } catch (ExceptionInInitializerError | UnsatisfiedLinkError e) {\n        }\n        System.out.println(&quot;**** Loading libGTASA.so&quot;);\n        System.loadLibrary(&quot;GTASA&quot;);\n        System.out.println(&quot;**** Loading libsamp.so&quot;);\n        System.loadLibrary(&quot;samp&quot;);\n    }\n</code></pre>\n<p>Finding a library in libsamp.so (C++ JNI)</p>\n<pre><code>jint JNI_OnLoad(JavaVM *vm, void *reserved)\n{\n  Log(&quot;SAMP library loaded! Build time: &quot; __DATE__ &quot; &quot; __TIME__);\n\n  g_libGTASA = FindLibrary(&quot;libGTASA.so&quot;);\n  if(g_libGTASA == 0)\n  {\n    Log(&quot;ERROR: libGTASA.so address not found!&quot;);\n    return 0;\n  }\n\n  Log(&quot;libGTASA.so image base address: 0x%X&quot;, g_libGTASA);\n\n  srand(time(0));\n\n  InitHookStuff();\n  InitRenderWareFunctions();\n  InstallSpecialHooks();\n\n  pthread_t thread;\n  pthread_create(&amp;thread, 0, Init, 0);\n\n  struct sigaction act;\n  act.sa_sigaction = handler;\n  sigemptyset(&amp;act.sa_mask);\n  act.sa_flags = SA_SIGINFO;\n  sigaction(SIGSEGV, &amp;act, 0);\n\n  return JNI_VERSION_1_4;\n}\n</code></pre>\n<p>FindLibrary:</p>\n<pre><code>uintptr_t FindLibrary(const char* library)\n{\n    char filename[0xFF] = {0},\n    buffer[2048] = {0};\n    FILE *fp = 0;\n    uintptr_t address = 0;\n\n    sprintf( filename, &quot;/proc/%d/maps&quot;, getpid() );\n\n    fp = fopen( filename, &quot;rt&quot; );\n    if(fp == 0)\n    {\n        Log(&quot;ERROR: can't open file %s&quot;, filename);\n        goto done;\n    }\n\n    while(fgets(buffer, sizeof(buffer), fp))\n    {\n        if( strstr( buffer, library ) )\n        {\n            address = (uintptr_t)strtoul( buffer, 0, 16 );\n            break;\n        }\n    }\n\n    done:\n\n    if(fp)\n      fclose(fp);\n\n    return address;\n}\n</code></pre>\n<p>Application log:</p>\n<pre><code>2023-10-28 14:57:32.800 29054-29054 System.out              com.kalinovka.game                   I  **** Loading SO's\n2023-10-28 14:57:32.800 29054-29054 System.out              com.kalinovka.game                   I  vmVersion 2.1.0\n2023-10-28 14:57:32.800 29054-29054 System.out              com.kalinovka.game                   I  **** Loading libImmEmulatorJ.so\n2023-10-28 14:57:32.804 29054-29054 System.out              com.kalinovka.game                   I  **** Loading libGTASA.so\n2023-10-28 14:57:32.813 29054-29054 NVEvent                 com.kalinovka.game                   D  JNI_OnLoad called\n2023-10-28 14:57:32.813 29054-29054 NVEvent                 com.kalinovka.game                   D  RegisterNatives 12\n2023-10-28 14:57:32.813 29054-29054 System.out              com.kalinovka.game                   I  **** Loading libsamp.so\n2023-10-28 14:57:32.815 29054-29054 AXL                     com.kalinovka.game                   I  SAMP library loaded! Build time: Oct 28 2023 14:47:20\n2023-10-28 14:57:32.819 29054-29054 AXL                     com.kalinovka.game                   I  ERROR: libGTASA.so address not found!\n2023-10-28 14:57:32.820 29054-29054 AndroidRuntime          com.kalinovka.game                   D  Shutting down VM\n2023-10-28 14:57:32.823 29054-29054 AndroidRuntime          com.kalinovka.game                   E  FATAL EXCEPTION: main\n                                                                                                    Process: com.kalinovka.game, PID: 29054\n                                                                                                    java.lang.UnsatisfiedLinkError: Bad JNI version returned from JNI_OnLoad in &quot;/data/app/~~AIt22YvJlsdkRyH_N_WAEw==/com.kalinovka.game-G93aBwDihlPGnVBadiHFkQ==/base.apk!/lib/armeabi-v7a/libsamp.so&quot;: 0\n                                                                                                        at java.lang.Runtime.loadLibrary0(Runtime.java:1082)\n                                                                                                        at java.lang.Runtime.loadLibrary0(Runtime.java:1003)\n                                                                                                        at java.lang.System.loadLibrary(System.java:1661)\n                                                                                                        at com.kalinovka.game.core.GTASA.&lt;clinit&gt;(GTASA.java:28)\n                                                                                                        at java.lang.Class.newInstance(Native Method)\n                                                                                                        at android.app.AppComponentFactory.instantiateActivity(AppComponentFactory.java:95)\n                                                                                                        at androidx.core.app.CoreComponentFactory.instantiateActivity(CoreComponentFactory.java:45)\n                                                                                                        at android.app.Instrumentation.newActivity(Instrumentation.java:1287)\n                                                                                                        at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:3701)\n                                                                                                        at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:3977)\n                                                                                                        at android.app.servertransaction.LaunchActivityItem.execute(LaunchActivityItem.java:109)\n                                                                                                        at android.app.servertransaction.TransactionExecutor.executeCallbacks(TransactionExecutor.java:135)\n                                                                                                        at android.app.servertransaction.TransactionExecutor.execute(TransactionExecutor.java:95)\n                                                                                                        at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2374)\n                                                                                                        at android.os.Handler.dispatchMessage(Handler.java:106)\n                                                                                                        at android.os.Looper.loopOnce(Looper.java:233)\n                                                                                                        at android.os.Looper.loop(Looper.java:344)\n                                                                                                        at android.app.ActivityThread.main(ActivityThread.java:8249)\n                                                                                                        at java.lang.reflect.Method.invoke(Native Method)\n                                                                                                        at com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:589)\n                                                                                                        at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:1071)\n2023-10-28 14:57:32.894 29054-29054 Process                 com.kalinovka.game                   I  Sending signal. PID: 29054 SIG: 9\n</code></pre>\n<p>Error: Invalid JNI version returned from JNI_OnLoad - since libsamp.so sent 0, you can ignore this</p>\n<p>I removed all references to libsamp.so and the application works, GTASA itself is initialized by the id, this means that libGTASA.so is loaded and working.</p>\n<p>I changed the library name in FindLibrary, it also returned zero. Indicates that there is a problem with access due to the Android API level.</p>\n<p>I found the same problem on a Russian-language site, but there was no solution, but the question indicated that this error only occurs on Android API 30+</p>\n"}],"has_more":true,"quota_max":10000,"quota_remaining":9796,"page":61,"page_size":100}
