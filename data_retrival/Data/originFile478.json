{"items":[{"tags":["java","google-bigquery"],"answers":[{"tags":[],"owner":{"account_id":13185554,"reputation":534,"user_id":12022900,"display_name":"Joevanie"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1682365836,"creation_date":1682365836,"answer_id":76095584,"question_id":76035559,"body_markdown":"You can work on this code snippet to delete records from BigQuery using Java client API:\r\n\r\n    import com.google.cloud.bigquery.BigQuery;\r\n    import com.google.cloud.bigquery.BigQueryOptions;\r\n    import com.google.cloud.bigquery.QueryJobConfiguration;\r\n    import com.google.cloud.bigquery.TableId;\r\n    \r\n    public class DeleteRecords {\r\n      public static void main(String[] args) throws InterruptedException {\r\n        // TODO(developer): Replace these variables before running the sample.\r\n        String projectId = &quot;your-project-id&quot;;\r\n        String datasetName = &quot;my_dataset&quot;;\r\n        String tableName = &quot;my_table&quot;;\r\n        String filterCondition = &quot;somecondition&quot;;\r\n    \r\n        BigQuery bigquery = BigQueryOptions.getDefaultInstance().getService();\r\n        QueryJobConfiguration queryConfig =\r\n            QueryJobConfiguration.newBuilder(\r\n                    String.format(\r\n                        &quot;DELETE FROM `%s.%s.%s` WHERE %s&quot;,\r\n                        projectId, datasetName, tableName, filterCondition))\r\n                .build();\r\n    \r\n        bigquery.query(queryConfig);\r\n      }\r\n    }\r\n\r\nFor documentation on Big Query and Java, you may refer [here][1].\r\n\r\n\r\n  [1]: https://developers.google.com/resources/api-libraries/documentation/bigquery/v2/java/latest/com/google/api/services/bigquery/Bigquery.Tables.Delete.html?ssp=1&amp;darkschemeovr=1&amp;setlang=en-PH&amp;safesearch=moderate","title":"bigquery java client delete statements, sql queries","body":"<p>You can work on this code snippet to delete records from BigQuery using Java client API:</p>\n<pre><code>import com.google.cloud.bigquery.BigQuery;\nimport com.google.cloud.bigquery.BigQueryOptions;\nimport com.google.cloud.bigquery.QueryJobConfiguration;\nimport com.google.cloud.bigquery.TableId;\n\npublic class DeleteRecords {\n  public static void main(String[] args) throws InterruptedException {\n    // TODO(developer): Replace these variables before running the sample.\n    String projectId = &quot;your-project-id&quot;;\n    String datasetName = &quot;my_dataset&quot;;\n    String tableName = &quot;my_table&quot;;\n    String filterCondition = &quot;somecondition&quot;;\n\n    BigQuery bigquery = BigQueryOptions.getDefaultInstance().getService();\n    QueryJobConfiguration queryConfig =\n        QueryJobConfiguration.newBuilder(\n                String.format(\n                    &quot;DELETE FROM `%s.%s.%s` WHERE %s&quot;,\n                    projectId, datasetName, tableName, filterCondition))\n            .build();\n\n    bigquery.query(queryConfig);\n  }\n}\n</code></pre>\n<p>For documentation on Big Query and Java, you may refer <a href=\"https://developers.google.com/resources/api-libraries/documentation/bigquery/v2/java/latest/com/google/api/services/bigquery/Bigquery.Tables.Delete.html?ssp=1&amp;darkschemeovr=1&amp;setlang=en-PH&amp;safesearch=moderate\" rel=\"nofollow noreferrer\">here</a>.</p>\n"}],"owner":{"account_id":1691604,"reputation":656,"user_id":1553828,"accept_rate":64,"display_name":"cjava"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":200,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1682365836,"creation_date":1681737189,"question_id":76035559,"body_markdown":"I am using java client for bigquery. I am trying to delete few records from a table. I haven&#39;t come across any straightforward API to achieve the same. Insert/InserAll, deleting complete dataset API I am aware of. \r\n\r\nBasically, how do we delete records from bigquery using java client API. Also, if someone can point to a better docs of Java client, it will be life saver. \r\n\r\nhow to execute this statement\r\n\r\n    delete from dataset.tablename where somecondtion;","title":"bigquery java client delete statements, sql queries","body":"<p>I am using java client for bigquery. I am trying to delete few records from a table. I haven't come across any straightforward API to achieve the same. Insert/InserAll, deleting complete dataset API I am aware of.</p>\n<p>Basically, how do we delete records from bigquery using java client API. Also, if someone can point to a better docs of Java client, it will be life saver.</p>\n<p>how to execute this statement</p>\n<pre><code>delete from dataset.tablename where somecondtion;\n</code></pre>\n"},{"tags":["java","awt","overlay","vlcj"],"comments":[{"owner":{"account_id":70123,"reputation":51175,"user_id":203657,"accept_rate":53,"display_name":"kleopatra"},"score":2,"creation_date":1682332709,"post_id":76090926,"comment_id":134193047,"body_markdown":"[mcve] please ..","body":"<a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> please .."},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1682332789,"post_id":76090926,"comment_id":134193060,"body_markdown":"I don&#39;t know this API, so can&#39;t comment closely. What I will say is that the `Thread` you create will be independent of the gui so if it&#39;s meant to synchronize with it, you might have a problem. Looks like you&#39;re using some sort of timer, which probably ought to be a Swing `Timer` if it&#39;s gui-oriented. Closer inspection reveals you&#39;re needing an embedded VLC. You should probably be using a `JPanel`, not `Window`. What&#39;s the timing about? More broadly, what&#39;s your [goal](http://technojeeves.com/joomla/index.php/free/117-smart-questions)?","body":"I don&#39;t know this API, so can&#39;t comment closely. What I will say is that the <code>Thread</code> you create will be independent of the gui so if it&#39;s meant to synchronize with it, you might have a problem. Looks like you&#39;re using some sort of timer, which probably ought to be a Swing <code>Timer</code> if it&#39;s gui-oriented. Closer inspection reveals you&#39;re needing an embedded VLC. You should probably be using a <code>JPanel</code>, not <code>Window</code>. What&#39;s the timing about? More broadly, what&#39;s your <a href=\"http://technojeeves.com/joomla/index.php/free/117-smart-questions\" rel=\"nofollow noreferrer\">goal</a>?"},{"owner":{"account_id":6982783,"reputation":326,"user_id":5354987,"display_name":"Samuel Marchant"},"score":0,"creation_date":1682333852,"post_id":76090926,"comment_id":134193268,"body_markdown":"Why are you using java.awt , javax.swing is the standard step up now. Two points, call repaint after changing the setting text, also on the main window, on initialisation, call setIgnoreRepaint(false) , java.awt level is very difficult to kick along with repaint!","body":"Why are you using java.awt , javax.swing is the standard step up now. Two points, call repaint after changing the setting text, also on the main window, on initialisation, call setIgnoreRepaint(false) , java.awt level is very difficult to kick along with repaint!"},{"owner":{"account_id":8242641,"reputation":11,"user_id":6199842,"display_name":"bobthebob55"},"score":0,"creation_date":1682337038,"post_id":76090926,"comment_id":134194016,"body_markdown":"I originally tried using a Swing Timer but kept running into an issue...say you press the up arrow to increase volume by 1, wait 2 seconds and then press it again. Now what I want is to have the overlay stay on the screen for 3 seconds after the second up arrow. But with Swing Timer, I would then have 2 Timers, one ending in 1 second and the other ending in 3 seconds and when the first Timer ends, it gets rid of the overlay display even thou the second Timer still has 2 more seconds on its Timer.","body":"I originally tried using a Swing Timer but kept running into an issue...say you press the up arrow to increase volume by 1, wait 2 seconds and then press it again. Now what I want is to have the overlay stay on the screen for 3 seconds after the second up arrow. But with Swing Timer, I would then have 2 Timers, one ending in 1 second and the other ending in 3 seconds and when the first Timer ends, it gets rid of the overlay display even thou the second Timer still has 2 more seconds on its Timer."},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1682337322,"post_id":76090926,"comment_id":134194074,"body_markdown":"Again, it&#39;s difficult to know exactly what you&#39;re doing, but can&#39;t you get the player&#39;s *own* volume controls to show?","body":"Again, it&#39;s difficult to know exactly what you&#39;re doing, but can&#39;t you get the player&#39;s <i>own</i> volume controls to show?"},{"owner":{"account_id":8242641,"reputation":11,"user_id":6199842,"display_name":"bobthebob55"},"score":0,"creation_date":1682337365,"post_id":76090926,"comment_id":134194081,"body_markdown":"If you wait the 3 seconds between the commands you input, the display overlay displays everything correctly, and every command is processed correctly no matter what is displayed, it just doesn&#39;t update the overlay in real time which is what I would like.","body":"If you wait the 3 seconds between the commands you input, the display overlay displays everything correctly, and every command is processed correctly no matter what is displayed, it just doesn&#39;t update the overlay in real time which is what I would like."},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1682337802,"post_id":76090926,"comment_id":134194171,"body_markdown":"Not sure what you really need or why timers are involved. This is caused by your not describing your [goal](http://technojeeves.com/joomla/index.php/free/117-smart-questions)","body":"Not sure what you really need or why timers are involved. This is caused by your not describing your <a href=\"http://technojeeves.com/joomla/index.php/free/117-smart-questions\" rel=\"nofollow noreferrer\">goal</a>"},{"owner":{"account_id":8242641,"reputation":11,"user_id":6199842,"display_name":"bobthebob55"},"score":0,"creation_date":1682343960,"post_id":76090926,"comment_id":134195628,"body_markdown":"@SamuelMarchant: unfortunately VLCJ requires that you use the java.awt.Window for the OverlayApi and I tried both of your suggestions and neither one worked sadly","body":"@SamuelMarchant: unfortunately VLCJ requires that you use the java.awt.Window for the OverlayApi and I tried both of your suggestions and neither one worked sadly"},{"owner":{"account_id":8242641,"reputation":11,"user_id":6199842,"display_name":"bobthebob55"},"score":0,"creation_date":1682344453,"post_id":76090926,"comment_id":134195785,"body_markdown":"@g00se: I don&#39;t need a timer but I can&#39;t do what I want to do without a timer of some kind. I&#39;m unaware of how to do a timed task without a timer of some kind. Everything works just like its supposed to, including the timer, except for the fact that if the program is already displaying some data, that display isn&#39;t updating when I call the repaint() method","body":"@g00se: I don&#39;t need a timer but I can&#39;t do what I want to do without a timer of some kind. I&#39;m unaware of how to do a timed task without a timer of some kind. Everything works just like its supposed to, including the timer, except for the fact that if the program is already displaying some data, that display isn&#39;t updating when I call the repaint() method"},{"owner":{"account_id":8242641,"reputation":11,"user_id":6199842,"display_name":"bobthebob55"},"score":0,"creation_date":1682344841,"post_id":76090926,"comment_id":134195908,"body_markdown":"For example, if volume is at 50% and I hit the UP arrow 10 times in quick succession to raise the volume to 60%, the display only shows 51% and doesn&#39;t increment like i would like it to. The volume does in fact go up to 60%, and if i wait the 3 seconds for the display to go away and then hit the UP arrow for the 11th time, it shows 61%. So its working in the background, its just that the display isn&#39;t updating in real time","body":"For example, if volume is at 50% and I hit the UP arrow 10 times in quick succession to raise the volume to 60%, the display only shows 51% and doesn&#39;t increment like i would like it to. The volume does in fact go up to 60%, and if i wait the 3 seconds for the display to go away and then hit the UP arrow for the 11th time, it shows 61%. So its working in the background, its just that the display isn&#39;t updating in real time"},{"owner":{"account_id":6982783,"reputation":326,"user_id":5354987,"display_name":"Samuel Marchant"},"score":0,"creation_date":1682353216,"post_id":76090926,"comment_id":134198148,"body_markdown":"I agree  the first comment, thread will complete it&#39;s &quot;task&quot; then die, but there is no definite task neither control of the state of the thread (see thread.yield() in the API docs) it&#39;s an overexpensive way of doing something that appears to be either existent or not existent. Either it&#39;s running as part of the GUI or it is not! (Aside:  Should put on the main Window setIgnoreRepaint(false); anyhow.).  Although thread is there for three seconds, the thread could simply decide to idle or yield for an indefinite period, but also setting top priority may take over the GUI and stop the player.","body":"I agree  the first comment, thread will complete it&#39;s &quot;task&quot; then die, but there is no definite task neither control of the state of the thread (see thread.yield() in the API docs) it&#39;s an overexpensive way of doing something that appears to be either existent or not existent. Either it&#39;s running as part of the GUI or it is not! (Aside:  Should put on the main Window setIgnoreRepaint(false); anyhow.).  Although thread is there for three seconds, the thread could simply decide to idle or yield for an indefinite period, but also setting top priority may take over the GUI and stop the player."},{"owner":{"account_id":8242641,"reputation":11,"user_id":6199842,"display_name":"bobthebob55"},"score":0,"creation_date":1682354537,"post_id":76090926,"comment_id":134198426,"body_markdown":"@SamuelMarchant: I put the `setIgnoreRepaint(false)` in both the Overlay Window and the main frame as well, and i put in a display in the paint method to see if it was running it and sure enough, its running it and the value of text in the paint class is correct (as in what I want it to display) as well.","body":"@SamuelMarchant: I put the <code>setIgnoreRepaint(false)</code> in both the Overlay Window and the main frame as well, and i put in a display in the paint method to see if it was running it and sure enough, its running it and the value of text in the paint class is correct (as in what I want it to display) as well."},{"owner":{"account_id":8242641,"reputation":11,"user_id":6199842,"display_name":"bobthebob55"},"score":0,"creation_date":1682365030,"post_id":76090926,"comment_id":134200693,"body_markdown":"@SamuelMarchant: I even found a way to get rid of `AWT` and instead use `JLabel` and even removed the `Thread` and still the problem persists...","body":"@SamuelMarchant: I even found a way to get rid of <code>AWT</code> and instead use <code>JLabel</code> and even removed the <code>Thread</code> and still the problem persists..."},{"owner":{"account_id":6982783,"reputation":326,"user_id":5354987,"display_name":"Samuel Marchant"},"score":0,"creation_date":1682377040,"post_id":76090926,"comment_id":134202712,"body_markdown":"&quot;Overlay&quot; is a bit strange, you imply it overlays something else, so should not be the &quot;top level&quot; window. Top level window is either a Window or Frame swing or awt.","body":"&quot;Overlay&quot; is a bit strange, you imply it overlays something else, so should not be the &quot;top level&quot; window. Top level window is either a Window or Frame swing or awt."},{"owner":{"account_id":6982783,"reputation":326,"user_id":5354987,"display_name":"Samuel Marchant"},"score":0,"creation_date":1682377780,"post_id":76090926,"comment_id":134202814,"body_markdown":"Hazard a guess, you would have your main (pardon the pun) top level window or frame and insert to it as the first added element a layered pane. The first and always bottom layer would be the viewing window, and second layer would be a lone Component class as the &quot;overlay&quot; painting layer for messages etc.","body":"Hazard a guess, you would have your main (pardon the pun) top level window or frame and insert to it as the first added element a layered pane. The first and always bottom layer would be the viewing window, and second layer would be a lone Component class as the &quot;overlay&quot; painting layer for messages etc."},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1682379863,"post_id":76090926,"comment_id":134203023,"body_markdown":"&#39;Overlay&#39; is a term used in the API in question, and yes, their class seems to be based on lower level AWT classes, not Swing","body":"&#39;Overlay&#39; is a term used in the API in question, and yes, their class seems to be based on lower level AWT classes, not Swing"},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1682415198,"post_id":76090926,"comment_id":134207742,"body_markdown":"[Here](https://github.com/caprica/vlcj-examples/blob/master/src/main/java/uk/co/caprica/vlcj/test/overlay/OverlayTest.java) is one of the overlay examples. Unfortunately the examples do not build for me, so I have no idea what this is all about","body":"<a href=\"https://github.com/caprica/vlcj-examples/blob/master/src/main/java/uk/co/caprica/vlcj/test/overlay/OverlayTest.java\" rel=\"nofollow noreferrer\">Here</a> is one of the overlay examples. Unfortunately the examples do not build for me, so I have no idea what this is all about"},{"owner":{"account_id":8242641,"reputation":11,"user_id":6199842,"display_name":"bobthebob55"},"score":0,"creation_date":1682441896,"post_id":76090926,"comment_id":134215218,"body_markdown":"@g00se: yeah, it works for me but it has the same problem that my current one has","body":"@g00se: yeah, it works for me but it has the same problem that my current one has"},{"owner":{"account_id":8242641,"reputation":11,"user_id":6199842,"display_name":"bobthebob55"},"score":0,"creation_date":1682441907,"post_id":76090926,"comment_id":134215223,"body_markdown":"@SamuelMarchant: yeah, the top layer needs to be transparent or kept to the size of the text that it is displaying.","body":"@SamuelMarchant: yeah, the top layer needs to be transparent or kept to the size of the text that it is displaying."},{"owner":{"account_id":8242641,"reputation":11,"user_id":6199842,"display_name":"bobthebob55"},"score":0,"creation_date":1682441914,"post_id":76090926,"comment_id":134215224,"body_markdown":"And I have found out that my program works awesomely, if i minimize it and bring it back everytime the text in the overlay is changed","body":"And I have found out that my program works awesomely, if i minimize it and bring it back everytime the text in the overlay is changed"},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1682444566,"post_id":76090926,"comment_id":134215776,"body_markdown":"That suggests that the gui thread is being blocked","body":"That suggests that the gui thread is being blocked"},{"owner":{"account_id":6982783,"reputation":326,"user_id":5354987,"display_name":"Samuel Marchant"},"score":0,"creation_date":1682477094,"post_id":76090926,"comment_id":134220744,"body_markdown":"Are you using the exact same component graphics reference for repaint paint() itself is overridden for construction but you must call repaint the overlay.repaint() when and after you make a change.","body":"Are you using the exact same component graphics reference for repaint paint() itself is overridden for construction but you must call repaint the overlay.repaint() when and after you make a change."}],"owner":{"account_id":8242641,"reputation":11,"user_id":6199842,"display_name":"bobthebob55"},"comment_count":22,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":71,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1682365112,"creation_date":1682332084,"question_id":76090926,"body_markdown":"I&#39;ve been working on this for some time now and I can&#39;t seem to figure out where I have gone wrong. I&#39;m working on a VLCJ project and trying to use an overlay to display changes to the video, like volume for example, and only display it for 3 seconds from the last input. Everything seems to work great except for the fact that the repaint() doesn&#39;t change the text in the overlay at all while it is displaying.\r\n\r\nHere is my code...\r\n\r\n```\r\nimport java.awt.Color;\r\nimport java.awt.Font;\r\nimport java.awt.FontMetrics;\r\nimport java.awt.Graphics;\r\nimport java.awt.Graphics2D;\r\nimport java.awt.Window;\r\nimport java.awt.geom.Rectangle2D;\r\n\r\nimport uk.co.caprica.vlcj.player.embedded.OverlayApi;\r\n\r\nclass Overlay extends Window implements Runnable\r\n{\r\n\tprivate static final long serialVersionUID = 1L;\r\n\tprivate String text;\r\n\tprivate int x, y;\r\n\tprivate Thread thread;\r\n\tprivate boolean running;\r\n\tprivate FontMetrics metric;\t\t\t\t\t\t\t\t\t\t// the metrics from the graphics\r\n\tprivate int stringWidth;\t\t\t\t\t\t\t\t\t\t// the width of the string that is currently being displayed\r\n\tprivate OverlayApi overlay;\r\n\tprivate long startTimer;\r\n\r\n\tpublic Overlay(Window owner)\r\n\t{\r\n\t\tsuper(owner);\r\n\t\tsetBackground(new Color(0, 0, 0, 0));\r\n\t\ttext = &quot;&quot;;\r\n\t\tx = (int) getOwner().getLocation().getX();\r\n\t\ty = (int) getOwner().getLocation().getY();\r\n\t\trunning = false;\r\n\t}\r\n\tpublic void paint(Graphics g)\r\n\t{\r\n\t\tsuper.paint(g);\r\n\t\tGraphics2D g2D = (Graphics2D)g;\r\n\t\tg2D.setPaint(Color.black);\r\n\t\tFont fnt = new Font(&quot;Serif&quot;, Font.PLAIN,32);\r\n\t\tg2D.setFont(fnt);\r\n\t\tmetric = g2D.getFontMetrics(fnt);\t\t\t\t\t\t// get the font size so it can figure out how wide the text is\r\n\t\tstringWidth = metric.stringWidth(text);\t\t\t\t\t// get the width of the current text field\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t// make a rectangle the size of the text and fill it in with black\r\n\t\tg2D.fill(new Rectangle2D.Double(x, y, stringWidth, g2D.getFont().getSize() + 3));\r\n\r\n\t\tg2D.setPaint(Color.white);\r\n\t\tg2D.drawString(text, x, y + g2D.getFont().getSize());\r\n\t}\r\n\r\n\t@Override\r\n\tpublic void run()\r\n\t{\r\n\t\tlong lastTime = System.currentTimeMillis();\r\n\t\tdouble amountOfTicks = 60.0;\r\n\t\tdouble ns = 1000 / amountOfTicks;\r\n\t\tdouble delta = 0;\r\n\t\twhile (running)\r\n\t\t{\r\n\t\t\tlong now = System.currentTimeMillis();\r\n\t\t\tdelta += (now - lastTime) / ns;\r\n\t\t\tlastTime = now;\r\n\t\t\twhile (delta &gt;= 1)\r\n\t\t\t{\r\n\t\t\t\tif (timesUp())\r\n\t\t\t\t{\r\n\t\t\t\t\toverlay.enable(false);\r\n\t\t\t\t\trunning = false;\r\nSystem.out.println(&quot;STOPPING&quot;);\r\n\t\t\t\t}\r\n\t\t\t\tdelta--;\r\n\t\t\t}\r\n\t\t\tif (running)\trender();\r\n\t\t}\r\n\t}\r\n\r\n\tprivate void render()\r\n\t{\r\n\t\tthis.repaint();\r\n\t}\r\n\r\n\tpublic synchronized void start()\r\n\t{\r\n\t\tstartTimer = System.currentTimeMillis();\r\n\t\toverlay.enable(true);\r\n\t\tif (!running)\r\n\t\t{\r\n\t\t\tthread = new Thread(this);\r\n\t\t\tthread.start();\r\n\t\t\trunning = true;\r\n\t\t}\r\n\t}\r\n\r\n\tprivate boolean timesUp()\r\n\t{\r\n\t\tlong et = System.currentTimeMillis();\r\n\t\t\tlong time = et - startTimer;\r\n\t\t\tlong sec = 0;\r\n\t\tif (time &gt; 1000)\r\n\t\t{\r\n\t\t\tsec = (time / 1000) % 60;\r\n\t\t\tif (sec == 3)\treturn true;\r\n\t\t}\r\n\t\treturn false;\r\n\t}\r\n\r\n\tpublic void setText(String s)\r\n\t{\r\n\t\tthis.text = s;\r\n\t}\r\n\tpublic String getText()\r\n\t{\treturn this.text;\t}\r\n\r\n\tpublic void setOverlay(OverlayApi overlayRef)\r\n\t{\tthis.overlay = overlayRef;\t}\r\n}\r\n```\r\nAny help I can get would be greatly appreciated as I&#39;m stuck, thank you\r\n\r\n**--UPDATED--**\r\n\r\nSo, I completely removed the `Thread` from the equation and still no dice. I also removed the use of `AWT` and tried a `JLabel` but even that isn&#39;t updating. Its all the same problem...","title":"My repaint() isn&#39;t doing anything and I&#39;m at a complete loss","body":"<p>I've been working on this for some time now and I can't seem to figure out where I have gone wrong. I'm working on a VLCJ project and trying to use an overlay to display changes to the video, like volume for example, and only display it for 3 seconds from the last input. Everything seems to work great except for the fact that the repaint() doesn't change the text in the overlay at all while it is displaying.</p>\n<p>Here is my code...</p>\n<pre><code>import java.awt.Color;\nimport java.awt.Font;\nimport java.awt.FontMetrics;\nimport java.awt.Graphics;\nimport java.awt.Graphics2D;\nimport java.awt.Window;\nimport java.awt.geom.Rectangle2D;\n\nimport uk.co.caprica.vlcj.player.embedded.OverlayApi;\n\nclass Overlay extends Window implements Runnable\n{\n    private static final long serialVersionUID = 1L;\n    private String text;\n    private int x, y;\n    private Thread thread;\n    private boolean running;\n    private FontMetrics metric;                                     // the metrics from the graphics\n    private int stringWidth;                                        // the width of the string that is currently being displayed\n    private OverlayApi overlay;\n    private long startTimer;\n\n    public Overlay(Window owner)\n    {\n        super(owner);\n        setBackground(new Color(0, 0, 0, 0));\n        text = &quot;&quot;;\n        x = (int) getOwner().getLocation().getX();\n        y = (int) getOwner().getLocation().getY();\n        running = false;\n    }\n    public void paint(Graphics g)\n    {\n        super.paint(g);\n        Graphics2D g2D = (Graphics2D)g;\n        g2D.setPaint(Color.black);\n        Font fnt = new Font(&quot;Serif&quot;, Font.PLAIN,32);\n        g2D.setFont(fnt);\n        metric = g2D.getFontMetrics(fnt);                       // get the font size so it can figure out how wide the text is\n        stringWidth = metric.stringWidth(text);                 // get the width of the current text field\n                                                                // make a rectangle the size of the text and fill it in with black\n        g2D.fill(new Rectangle2D.Double(x, y, stringWidth, g2D.getFont().getSize() + 3));\n\n        g2D.setPaint(Color.white);\n        g2D.drawString(text, x, y + g2D.getFont().getSize());\n    }\n\n    @Override\n    public void run()\n    {\n        long lastTime = System.currentTimeMillis();\n        double amountOfTicks = 60.0;\n        double ns = 1000 / amountOfTicks;\n        double delta = 0;\n        while (running)\n        {\n            long now = System.currentTimeMillis();\n            delta += (now - lastTime) / ns;\n            lastTime = now;\n            while (delta &gt;= 1)\n            {\n                if (timesUp())\n                {\n                    overlay.enable(false);\n                    running = false;\nSystem.out.println(&quot;STOPPING&quot;);\n                }\n                delta--;\n            }\n            if (running)    render();\n        }\n    }\n\n    private void render()\n    {\n        this.repaint();\n    }\n\n    public synchronized void start()\n    {\n        startTimer = System.currentTimeMillis();\n        overlay.enable(true);\n        if (!running)\n        {\n            thread = new Thread(this);\n            thread.start();\n            running = true;\n        }\n    }\n\n    private boolean timesUp()\n    {\n        long et = System.currentTimeMillis();\n            long time = et - startTimer;\n            long sec = 0;\n        if (time &gt; 1000)\n        {\n            sec = (time / 1000) % 60;\n            if (sec == 3)   return true;\n        }\n        return false;\n    }\n\n    public void setText(String s)\n    {\n        this.text = s;\n    }\n    public String getText()\n    {   return this.text;   }\n\n    public void setOverlay(OverlayApi overlayRef)\n    {   this.overlay = overlayRef;  }\n}\n</code></pre>\n<p>Any help I can get would be greatly appreciated as I'm stuck, thank you</p>\n<p><strong>--UPDATED--</strong></p>\n<p>So, I completely removed the <code>Thread</code> from the equation and still no dice. I also removed the use of <code>AWT</code> and tried a <code>JLabel</code> but even that isn't updating. Its all the same problem...</p>\n"},{"tags":["java","cdi"],"comments":[{"owner":{"account_id":290683,"reputation":12512,"user_id":592355,"display_name":"xerx593"},"score":2,"creation_date":1682366157,"post_id":76095449,"comment_id":134200914,"body_markdown":"maybe `Extra ex = new Extra(null);` to blame?","body":"maybe <code>Extra ex = new Extra(null);</code> to blame?"},{"owner":{"account_id":6963528,"reputation":6523,"user_id":5342297,"display_name":"Siliarus"},"score":1,"creation_date":1682411374,"post_id":76095449,"comment_id":134206825,"body_markdown":"Exactly the case, you need to let CDI create the instance; avoid initializing the instance yourself. So just `@Inject` it into the class where you intend to use it or use dynamic resolution via `CDI.current().select(Extra.class).get()`","body":"Exactly the case, you need to let CDI create the instance; avoid initializing the instance yourself. So just <code>@Inject</code> it into the class where you intend to use it or use dynamic resolution via <code>CDI.current().select(Extra.class).get()</code>"},{"owner":{"account_id":28404101,"reputation":111,"user_id":21728438,"display_name":"Eduardo Roque"},"score":0,"creation_date":1682511266,"post_id":76095449,"comment_id":134226987,"body_markdown":"CDI.current().select(Extra.class).get() works for me. Thank you both for your help.","body":"CDI.current().select(Extra.class).get() works for me. Thank you both for your help."}],"owner":{"account_id":28404101,"reputation":111,"user_id":21728438,"display_name":"Eduardo Roque"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":147,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1682364759,"creation_date":1682364759,"question_id":76095449,"body_markdown":"I am trying to inject an Application Scope class to another. It work fine at Servlets, Listeners, Filters and Rest API, but not in POJO, because in the last one I get a reference equal to null, I mean the POJO (class Extra) doesn&#39;t use the same instance that other. The idea is that the classes MyServlet.java and Extra.java use the same instance of the class Person.\r\n\r\n```\r\n\r\n\r\n\r\n@ApplicationScoped\r\npublic class Person implements Serializable{\r\n\tString name;\r\n\tint edad;\r\n\t\r\n\tpublic Person() {\r\n\t\t// TODO Auto-generated constructor stub\r\n\t}\r\n\t\r\n\tPerson(String name, int edad){\r\n\t\tthis.name = name;\r\n\t\tthis.edad = edad;\r\n\t}\r\n\t\r\n\tpublic String getName() {\r\n\t\treturn name;\r\n\t}\r\n\t\r\n\tpublic void setName(String name) {\r\n\t\tthis.name = name;\r\n\t}\r\n\t\r\n\tpublic int getEdad() {\r\n\t\treturn edad;\r\n\t}\r\n\t\r\n\tpublic void setEdad(int edad) {\r\n\t\tthis.edad = edad;\r\n\t}\r\n}\r\n\r\n@WebServlet(&quot;/hola&quot;)\r\npublic class MyServlet extends HttpServlet{\r\n\r\n\t@Override\r\n\tprotected void doGet(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {\r\n\t\tExtra ex = new Extra(null);\r\n\t\tPrintWriter wr = resp.getWriter();\r\n\t\twr.print(&quot;Hola:&quot;+ex.saludar());\r\n\t}\r\n}\r\n\r\n@WebServlet(&quot;/mundo&quot;)\r\npublic class MySecond extends HttpServlet{\r\n\t\r\n\t@Inject\r\n\tPerson p;\r\n\t\r\n\t@Override\r\n\tprotected void doGet(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {\r\n\t\tPrintWriter wr = resp.getWriter();\r\n\t\tif (p == null) {\r\n\t\t\tp = new Person();\r\n\t\t\tp.setName(&quot;Second&quot;);\r\n\t\t}\r\n\t\twr.print(&quot;Mundo: &quot;+ p.getName());\r\n\t}\r\n}\r\n\r\n@ManagedBean\r\n@RequestScoped\r\npublic class Extra implements Serializable{\r\n\r\n\tprivate static final long serialVersionUID = 1L;\r\n\t\r\n\tPerson p;\r\n\t\r\n\t@Inject\r\n\tpublic Extra(Person p) {\r\n\t\tthis.p = p;\r\n\t}\r\n\t\r\n\tpublic String saludar() {\r\n\t\tif (p == null) {\r\n\t\t\tp = new Person();\r\n\t\t\tp.setName(&quot;Extra&quot;);\r\n\t\t}else\r\n\t\t\tp.setName(&quot;No nulo&quot;);\r\n\t\treturn p.getName();\r\n\t}\r\n}\r\n\r\n\r\n\r\n```","title":"Inject Application Scoped class to others","body":"<p>I am trying to inject an Application Scope class to another. It work fine at Servlets, Listeners, Filters and Rest API, but not in POJO, because in the last one I get a reference equal to null, I mean the POJO (class Extra) doesn't use the same instance that other. The idea is that the classes MyServlet.java and Extra.java use the same instance of the class Person.</p>\n<pre><code>\n\n\n@ApplicationScoped\npublic class Person implements Serializable{\n    String name;\n    int edad;\n    \n    public Person() {\n        // TODO Auto-generated constructor stub\n    }\n    \n    Person(String name, int edad){\n        this.name = name;\n        this.edad = edad;\n    }\n    \n    public String getName() {\n        return name;\n    }\n    \n    public void setName(String name) {\n        this.name = name;\n    }\n    \n    public int getEdad() {\n        return edad;\n    }\n    \n    public void setEdad(int edad) {\n        this.edad = edad;\n    }\n}\n\n@WebServlet(&quot;/hola&quot;)\npublic class MyServlet extends HttpServlet{\n\n    @Override\n    protected void doGet(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {\n        Extra ex = new Extra(null);\n        PrintWriter wr = resp.getWriter();\n        wr.print(&quot;Hola:&quot;+ex.saludar());\n    }\n}\n\n@WebServlet(&quot;/mundo&quot;)\npublic class MySecond extends HttpServlet{\n    \n    @Inject\n    Person p;\n    \n    @Override\n    protected void doGet(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {\n        PrintWriter wr = resp.getWriter();\n        if (p == null) {\n            p = new Person();\n            p.setName(&quot;Second&quot;);\n        }\n        wr.print(&quot;Mundo: &quot;+ p.getName());\n    }\n}\n\n@ManagedBean\n@RequestScoped\npublic class Extra implements Serializable{\n\n    private static final long serialVersionUID = 1L;\n    \n    Person p;\n    \n    @Inject\n    public Extra(Person p) {\n        this.p = p;\n    }\n    \n    public String saludar() {\n        if (p == null) {\n            p = new Person();\n            p.setName(&quot;Extra&quot;);\n        }else\n            p.setName(&quot;No nulo&quot;);\n        return p.getName();\n    }\n}\n\n\n\n</code></pre>\n"},{"tags":["java","android","api","gradle","google-maps-api-3"],"comments":[{"owner":{"account_id":24508188,"reputation":1915,"user_id":18422887,"display_name":"Yrll"},"score":0,"creation_date":1682307215,"post_id":76085501,"comment_id":134189024,"body_markdown":"Can you please provide a [minimal reproducible example](https://stackoverflow.com/help/minimal-reproducible-example) by also providing the java activity file? I can&#39;t run your code with only these.","body":"Can you please provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> by also providing the java activity file? I can&#39;t run your code with only these."},{"owner":{"account_id":23071224,"reputation":19,"user_id":17184898,"display_name":"Majern&#237;k Tom&#225;š"},"score":0,"creation_date":1682364625,"post_id":76085501,"comment_id":134200606,"body_markdown":"@Yrll hi i have added the activity in which i am running the fragment. Sorry for late response","body":"@Yrll hi i have added the activity in which i am running the fragment. Sorry for late response"},{"owner":{"account_id":24508188,"reputation":1915,"user_id":18422887,"display_name":"Yrll"},"score":0,"creation_date":1682395886,"post_id":76085501,"comment_id":134204436,"body_markdown":"I can&#39;t seem to run your code in my environment. Can you provide a github repo that I can clone?","body":"I can&#39;t seem to run your code in my environment. Can you provide a github repo that I can clone?"},{"owner":{"account_id":24508188,"reputation":1915,"user_id":18422887,"display_name":"Yrll"},"score":0,"creation_date":1682404244,"post_id":76085501,"comment_id":134205338,"body_markdown":"[Update] I was able to run your app, and things seems to be working fine. Can you double check how you were implementing your API key? And I think it would be good for you to File a Tech Support case so that they can take a look how you were restricting or how you set up your API key.","body":"[Update] I was able to run your app, and things seems to be working fine. Can you double check how you were implementing your API key? And I think it would be good for you to File a Tech Support case so that they can take a look how you were restricting or how you set up your API key."},{"owner":{"account_id":23071224,"reputation":19,"user_id":17184898,"display_name":"Majern&#237;k Tom&#225;š"},"score":0,"creation_date":1682453255,"post_id":76085501,"comment_id":134217606,"body_markdown":"@Yrll thank you very much I will check everything again","body":"@Yrll thank you very much I will check everything again"},{"owner":{"account_id":24508188,"reputation":1915,"user_id":18422887,"display_name":"Yrll"},"score":0,"creation_date":1682473242,"post_id":76085501,"comment_id":134220338,"body_markdown":"No problem! With regards to `unable to update local snapshot` error, please see this [question](https://stackoverflow.com/questions/71737816/googlecertificatesrslt-not-allowed-in-kotlin-android-application/75915360#75915360) because I think this is relevant and the answer mentioned there that the aforementioned error is actually harmless. That&#39;s why I suggested that you check how you were implementing your API keys.","body":"No problem! With regards to <code>unable to update local snapshot</code> error, please see this <a href=\"https://stackoverflow.com/questions/71737816/googlecertificatesrslt-not-allowed-in-kotlin-android-application/75915360#75915360\">question</a> because I think this is relevant and the answer mentioned there that the aforementioned error is actually harmless. That&#39;s why I suggested that you check how you were implementing your API keys."}],"owner":{"account_id":23071224,"reputation":19,"user_id":17184898,"display_name":"Majern&#237;k Tom&#225;š"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":139,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1682364570,"creation_date":1682261171,"question_id":76085501,"body_markdown":"I am trying to connect Maps SDK to my application. I have generated api key and restricted it for android, added package name, SHA-1 fingerprint and restricted it to Maps SDK. Bellow are my dependecies and plugins. When I look at logs i can see that application has been connected to the API, permissions have been granted and map has been initialized. At the end I am getting warning \r\n\r\n&gt; &quot;Unable to update local snapshot for com.google.android.libraries.consentverifier#com.example.travelnotes&quot;\r\n\r\nWhen I go to google cloud and look at Maps SDK API, requests have been made. I have my api key, permissions, package name, google play services version in AndroidManifest.xml. The fragment for maps is defined in activity_google_maps.xml. When I click on button which is supposed to open the maps I get blank screen with color of my backround and when i move two fingers across the screen a compass is shows up in the upper left corner.\r\n\r\n**Module level build.gradle**\r\n\r\n\r\n    plugins {\r\n        id &#39;com.android.application&#39;\r\n        id &#39;com.google.android.libraries.mapsplatform.secrets-gradle-plugin&#39;\r\n        id &#39;com.google.gms.google-services&#39;\r\n\r\n    }\r\n    android {\r\n        namespace &#39;com.example.travelnotes&#39;\r\n        compileSdk 33\r\n\r\n    defaultConfig {\r\n        applicationId &quot;com.example.travelnotes&quot;\r\n        minSdk 19\r\n        targetSdk 33\r\n        versionCode 1\r\n        versionName &quot;1.1&quot;\r\n\r\n        testInstrumentationRunner &quot;androidx.test.runner.AndroidJUnitRunner&quot;\r\n    }\r\n\r\n    buildTypes {\r\n        release {\r\n            minifyEnabled false\r\n            proguardFiles getDefaultProguardFile(&#39;proguard-android-optimize.txt&#39;), \r\n            &#39;proguard-rules.pro&#39;\r\n        }\r\n    }\r\n    compileOptions {\r\n        sourceCompatibility JavaVersion.VERSION_17\r\n        targetCompatibility JavaVersion.VERSION_17\r\n    }\r\n\r\n    buildToolsVersion &#39;33.0.2&#39;\r\n    ndkVersion &#39;25.2.9519653&#39;\r\n    buildFeatures {\r\n        viewBinding true\r\n        }\r\n    }\r\n\r\n    dependencies {\r\n\r\n        implementation &#39;androidx.appcompat:appcompat:1.6.1&#39;\r\n        implementation &#39;com.google.android.material:material:1.8.0&#39;\r\n        implementation &#39;androidx.constraintlayout:constraintlayout:2.1.4&#39;\r\n        implementation &#39;com.google.android.material:material:1.8.0&#39;\r\n        implementation &#39;com.google.android.gms:play-services-maps:18.1.0&#39;\r\n        implementation &#39;com.google.android.gms:play-services-basement:18.2.0&#39;\r\n        implementation platform(&#39;com.google.firebase:firebase-bom:31.5.0&#39;)\r\n        testImplementation &#39;junit:junit:4.13.2&#39;\r\n        androidTestImplementation &#39;androidx.test.ext:junit:1.1.5&#39;\r\n        androidTestImplementation &#39;androidx.test.espresso:espresso-core:3.5.1&#39;\r\n\r\n    }\r\n\r\n**Project level build.gradle**\r\n\r\n    buildscript {\r\n        repositories {\r\n            google()\r\n            mavenCentral()\r\n\r\n        }\r\n        dependencies {\r\n            classpath &#39;com.google.gms:google-services:4.3.15&#39;\r\n\r\n        }\r\n    }\r\n\r\n    plugins {\r\n        id &#39;com.android.application&#39; version &#39;7.4.2&#39; apply false\r\n        id &#39;com.android.library&#39; version &#39;7.4.2&#39; apply false\r\n        id &#39;com.google.android.libraries.mapsplatform.secrets-gradle-plugin&#39; version &#39;2.0.1&#39; \r\n        apply false}\r\n\r\n\r\n    task clean(type: Delete) {\r\n        delete rootProject.buildDir\r\n    }\r\n\r\n**settings.gradle**\r\n\r\n    pluginManagement {\r\n        repositories {\r\n            gradlePluginPortal()\r\n            google()\r\n            mavenCentral()\r\n        }\r\n    }\r\n\r\n    dependencyResolutionManagement {\r\n        repositoriesMode.set(RepositoriesMode.FAIL_ON_PROJECT_REPOS)\r\n        repositories {\r\n            google()\r\n            mavenCentral()\r\n        }\r\n    }\r\n\r\n    rootProject.name = &quot;TravelNotes&quot;\r\n    include &#39;:app&#39;\r\n\r\n**activity_google_maps.xml**\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n    &lt;RelativeLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n    android:layout_width=&quot;match_parent&quot;\r\n    android:layout_height=&quot;match_parent&quot;&gt;\r\n\r\n    &lt;androidx.fragment.app.FragmentContainerView\r\n        xmlns:tools=&quot;http://schemas.android.com/tools&quot;\r\n        android:layout_width=&quot;match_parent&quot;\r\n        android:layout_height=&quot;match_parent&quot;\r\n        android:id=&quot;@+id/map&quot;\r\n        tools:context=&quot;.GoogleMapActivity&quot;\r\n        android:name=&quot;com.google.android.gms.maps.SupportMapFragment&quot; /&gt;\r\n\r\n&lt;/RelativeLayout&gt;\r\n\r\n**GoogleMapsActivity.java**\r\n\r\n```\r\npackage com.example.travelnotes;\r\n\r\nimport android.Manifest;\r\nimport android.content.pm.PackageManager;\r\nimport android.os.Bundle;\r\nimport android.util.Log;\r\nimport android.widget.Toast;\r\n\r\nimport androidx.annotation.NonNull;\r\nimport androidx.annotation.Nullable;\r\nimport androidx.appcompat.app.AppCompatActivity;\r\nimport androidx.core.app.ActivityCompat;\r\nimport androidx.core.content.ContextCompat;\r\n\r\nimport com.google.android.gms.maps.CameraUpdateFactory;\r\nimport com.google.android.gms.maps.GoogleMap;\r\nimport com.google.android.gms.maps.MapsInitializer;\r\nimport com.google.android.gms.maps.OnMapReadyCallback;\r\nimport com.google.android.gms.maps.SupportMapFragment;\r\nimport com.google.android.gms.maps.model.CameraPosition;\r\nimport com.google.android.gms.maps.model.LatLng;\r\n\r\npublic class GoogleMapActivity extends AppCompatActivity implements OnMapReadyCallback {\r\n    @Override\r\n    public void onMapReady(@NonNull GoogleMap googleMap) {\r\n        Toast.makeText(this, &quot;Map is Ready&quot;, Toast.LENGTH_SHORT).show();\r\n\r\n        mMap = googleMap;\r\n        if (mMap == null){\r\n            Log.d(TAG, &quot;map is null&quot;);\r\n        }\r\n        else {\r\n            Log.d(TAG, &quot;map is not null&quot;);\r\n        }\r\n        LatLng location = new LatLng(37.7749, -122.4194); // San Francisco\r\n        CameraPosition cameraPosition = new CameraPosition.Builder()\r\n                .target(location)\r\n                .zoom(10) // Zoom level\r\n                .build();\r\n        googleMap.moveCamera(CameraUpdateFactory.newCameraPosition(cameraPosition));\r\n    }\r\n    private static final String TAG = &quot;GoogleMapActivity&quot;;\r\n    private Boolean locationPermissionStatus = false;\r\n    private static final int locationPermissionRequestCode = 1234;\r\n    private GoogleMap mMap;\r\n\r\n    @Override\r\n    protected void onCreate(@Nullable Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_google_map);\r\n        Log.d(TAG, &quot;Map activity created&quot;);\r\n        getLocationPermission();\r\n    }\r\n\r\n\r\n\r\n    private void initializeMap(){\r\n        SupportMapFragment supportMapFragment = (SupportMapFragment) getSupportFragmentManager().findFragmentById(R.id.map);\r\n        assert supportMapFragment != null;\r\n        Log.d(TAG, &quot;Map has been initialized&quot;);\r\n        supportMapFragment.getMapAsync(GoogleMapActivity.this);\r\n\r\n    }\r\n\r\n    private void getLocationPermission(){\r\n        Log.d(TAG, &quot;location permission will be given&quot;);\r\n\r\n        String[] permissions = {Manifest.permission.ACCESS_FINE_LOCATION,\r\n                Manifest.permission.ACCESS_COARSE_LOCATION};\r\n        if (ContextCompat.checkSelfPermission(this.getApplicationContext(),\r\n                Manifest.permission.ACCESS_FINE_LOCATION) == PackageManager.PERMISSION_GRANTED){\r\n            Log.d(TAG, &quot;location permission will be given&quot;);\r\n\r\n            if (ContextCompat.checkSelfPermission(this.getApplicationContext(),\r\n                    Manifest.permission.ACCESS_COARSE_LOCATION) == PackageManager.PERMISSION_GRANTED){\r\n                Log.d(TAG, &quot;location permission granted&quot;);\r\n                locationPermissionStatus = true;\r\n                //initializeMap();\r\n            }\r\n            else {\r\n                ActivityCompat.requestPermissions(this, permissions, locationPermissionRequestCode);\r\n            }\r\n        }\r\n        else {\r\n            ActivityCompat.requestPermissions(this, permissions, locationPermissionRequestCode);\r\n        }\r\n    }\r\n\r\n    @Override\r\n    public void onRequestPermissionsResult(int requestCode, @NonNull String[] permissions, @NonNull int[] grantResults) {\r\n        //super.onRequestPermissionsResult(requestCode, permissions, grantResults);\r\n        super.onRequestPermissionsResult(requestCode, permissions, grantResults);\r\n        locationPermissionStatus = false;\r\n        Log.d(TAG, &quot;onRequestPermissionsResult&quot;);\r\n\r\n        switch (requestCode) {\r\n            case locationPermissionRequestCode: {\r\n\r\n                if (grantResults.length &gt; 0) {\r\n\r\n                    for (int grantResult : grantResults) {\r\n                        if (grantResult != PackageManager.PERMISSION_GRANTED) {\r\n                            Log.d(TAG, &quot;location not granted&quot;);\r\n                            locationPermissionStatus = false;\r\n                            return;\r\n                        }\r\n                    }\r\n                    Log.d(TAG, &quot;location permission granted true&quot;);\r\n                    locationPermissionStatus = true;\r\n                    initializeMap();\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n\r\n}\r\n\r\n```","title":"How to connect Maps SKD API for android to my application","body":"<p>I am trying to connect Maps SDK to my application. I have generated api key and restricted it for android, added package name, SHA-1 fingerprint and restricted it to Maps SDK. Bellow are my dependecies and plugins. When I look at logs i can see that application has been connected to the API, permissions have been granted and map has been initialized. At the end I am getting warning</p>\n<blockquote>\n<p>&quot;Unable to update local snapshot for com.google.android.libraries.consentverifier#com.example.travelnotes&quot;</p>\n</blockquote>\n<p>When I go to google cloud and look at Maps SDK API, requests have been made. I have my api key, permissions, package name, google play services version in AndroidManifest.xml. The fragment for maps is defined in activity_google_maps.xml. When I click on button which is supposed to open the maps I get blank screen with color of my backround and when i move two fingers across the screen a compass is shows up in the upper left corner.</p>\n<p><strong>Module level build.gradle</strong></p>\n<pre><code>plugins {\n    id 'com.android.application'\n    id 'com.google.android.libraries.mapsplatform.secrets-gradle-plugin'\n    id 'com.google.gms.google-services'\n\n}\nandroid {\n    namespace 'com.example.travelnotes'\n    compileSdk 33\n\ndefaultConfig {\n    applicationId &quot;com.example.travelnotes&quot;\n    minSdk 19\n    targetSdk 33\n    versionCode 1\n    versionName &quot;1.1&quot;\n\n    testInstrumentationRunner &quot;androidx.test.runner.AndroidJUnitRunner&quot;\n}\n\nbuildTypes {\n    release {\n        minifyEnabled false\n        proguardFiles getDefaultProguardFile('proguard-android-optimize.txt'), \n        'proguard-rules.pro'\n    }\n}\ncompileOptions {\n    sourceCompatibility JavaVersion.VERSION_17\n    targetCompatibility JavaVersion.VERSION_17\n}\n\nbuildToolsVersion '33.0.2'\nndkVersion '25.2.9519653'\nbuildFeatures {\n    viewBinding true\n    }\n}\n\ndependencies {\n\n    implementation 'androidx.appcompat:appcompat:1.6.1'\n    implementation 'com.google.android.material:material:1.8.0'\n    implementation 'androidx.constraintlayout:constraintlayout:2.1.4'\n    implementation 'com.google.android.material:material:1.8.0'\n    implementation 'com.google.android.gms:play-services-maps:18.1.0'\n    implementation 'com.google.android.gms:play-services-basement:18.2.0'\n    implementation platform('com.google.firebase:firebase-bom:31.5.0')\n    testImplementation 'junit:junit:4.13.2'\n    androidTestImplementation 'androidx.test.ext:junit:1.1.5'\n    androidTestImplementation 'androidx.test.espresso:espresso-core:3.5.1'\n\n}\n</code></pre>\n<p><strong>Project level build.gradle</strong></p>\n<pre><code>buildscript {\n    repositories {\n        google()\n        mavenCentral()\n\n    }\n    dependencies {\n        classpath 'com.google.gms:google-services:4.3.15'\n\n    }\n}\n\nplugins {\n    id 'com.android.application' version '7.4.2' apply false\n    id 'com.android.library' version '7.4.2' apply false\n    id 'com.google.android.libraries.mapsplatform.secrets-gradle-plugin' version '2.0.1' \n    apply false}\n\n\ntask clean(type: Delete) {\n    delete rootProject.buildDir\n}\n</code></pre>\n<p><strong>settings.gradle</strong></p>\n<pre><code>pluginManagement {\n    repositories {\n        gradlePluginPortal()\n        google()\n        mavenCentral()\n    }\n}\n\ndependencyResolutionManagement {\n    repositoriesMode.set(RepositoriesMode.FAIL_ON_PROJECT_REPOS)\n    repositories {\n        google()\n        mavenCentral()\n    }\n}\n\nrootProject.name = &quot;TravelNotes&quot;\ninclude ':app'\n</code></pre>\n<p><strong>activity_google_maps.xml</strong></p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n&lt;RelativeLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\nandroid:layout_width=&quot;match_parent&quot;\nandroid:layout_height=&quot;match_parent&quot;&gt;\n\n&lt;androidx.fragment.app.FragmentContainerView\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;\n    android:layout_width=&quot;match_parent&quot;\n    android:layout_height=&quot;match_parent&quot;\n    android:id=&quot;@+id/map&quot;\n    tools:context=&quot;.GoogleMapActivity&quot;\n    android:name=&quot;com.google.android.gms.maps.SupportMapFragment&quot; /&gt;\n</code></pre>\n\n<p><strong>GoogleMapsActivity.java</strong></p>\n<pre><code>package com.example.travelnotes;\n\nimport android.Manifest;\nimport android.content.pm.PackageManager;\nimport android.os.Bundle;\nimport android.util.Log;\nimport android.widget.Toast;\n\nimport androidx.annotation.NonNull;\nimport androidx.annotation.Nullable;\nimport androidx.appcompat.app.AppCompatActivity;\nimport androidx.core.app.ActivityCompat;\nimport androidx.core.content.ContextCompat;\n\nimport com.google.android.gms.maps.CameraUpdateFactory;\nimport com.google.android.gms.maps.GoogleMap;\nimport com.google.android.gms.maps.MapsInitializer;\nimport com.google.android.gms.maps.OnMapReadyCallback;\nimport com.google.android.gms.maps.SupportMapFragment;\nimport com.google.android.gms.maps.model.CameraPosition;\nimport com.google.android.gms.maps.model.LatLng;\n\npublic class GoogleMapActivity extends AppCompatActivity implements OnMapReadyCallback {\n    @Override\n    public void onMapReady(@NonNull GoogleMap googleMap) {\n        Toast.makeText(this, &quot;Map is Ready&quot;, Toast.LENGTH_SHORT).show();\n\n        mMap = googleMap;\n        if (mMap == null){\n            Log.d(TAG, &quot;map is null&quot;);\n        }\n        else {\n            Log.d(TAG, &quot;map is not null&quot;);\n        }\n        LatLng location = new LatLng(37.7749, -122.4194); // San Francisco\n        CameraPosition cameraPosition = new CameraPosition.Builder()\n                .target(location)\n                .zoom(10) // Zoom level\n                .build();\n        googleMap.moveCamera(CameraUpdateFactory.newCameraPosition(cameraPosition));\n    }\n    private static final String TAG = &quot;GoogleMapActivity&quot;;\n    private Boolean locationPermissionStatus = false;\n    private static final int locationPermissionRequestCode = 1234;\n    private GoogleMap mMap;\n\n    @Override\n    protected void onCreate(@Nullable Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_google_map);\n        Log.d(TAG, &quot;Map activity created&quot;);\n        getLocationPermission();\n    }\n\n\n\n    private void initializeMap(){\n        SupportMapFragment supportMapFragment = (SupportMapFragment) getSupportFragmentManager().findFragmentById(R.id.map);\n        assert supportMapFragment != null;\n        Log.d(TAG, &quot;Map has been initialized&quot;);\n        supportMapFragment.getMapAsync(GoogleMapActivity.this);\n\n    }\n\n    private void getLocationPermission(){\n        Log.d(TAG, &quot;location permission will be given&quot;);\n\n        String[] permissions = {Manifest.permission.ACCESS_FINE_LOCATION,\n                Manifest.permission.ACCESS_COARSE_LOCATION};\n        if (ContextCompat.checkSelfPermission(this.getApplicationContext(),\n                Manifest.permission.ACCESS_FINE_LOCATION) == PackageManager.PERMISSION_GRANTED){\n            Log.d(TAG, &quot;location permission will be given&quot;);\n\n            if (ContextCompat.checkSelfPermission(this.getApplicationContext(),\n                    Manifest.permission.ACCESS_COARSE_LOCATION) == PackageManager.PERMISSION_GRANTED){\n                Log.d(TAG, &quot;location permission granted&quot;);\n                locationPermissionStatus = true;\n                //initializeMap();\n            }\n            else {\n                ActivityCompat.requestPermissions(this, permissions, locationPermissionRequestCode);\n            }\n        }\n        else {\n            ActivityCompat.requestPermissions(this, permissions, locationPermissionRequestCode);\n        }\n    }\n\n    @Override\n    public void onRequestPermissionsResult(int requestCode, @NonNull String[] permissions, @NonNull int[] grantResults) {\n        //super.onRequestPermissionsResult(requestCode, permissions, grantResults);\n        super.onRequestPermissionsResult(requestCode, permissions, grantResults);\n        locationPermissionStatus = false;\n        Log.d(TAG, &quot;onRequestPermissionsResult&quot;);\n\n        switch (requestCode) {\n            case locationPermissionRequestCode: {\n\n                if (grantResults.length &gt; 0) {\n\n                    for (int grantResult : grantResults) {\n                        if (grantResult != PackageManager.PERMISSION_GRANTED) {\n                            Log.d(TAG, &quot;location not granted&quot;);\n                            locationPermissionStatus = false;\n                            return;\n                        }\n                    }\n                    Log.d(TAG, &quot;location permission granted true&quot;);\n                    locationPermissionStatus = true;\n                    initializeMap();\n                }\n            }\n        }\n    }\n\n\n}\n\n</code></pre>\n"},{"tags":["java","android","function","canvas"],"answers":[{"tags":[],"owner":{"account_id":1790714,"reputation":91128,"user_id":1631193,"accept_rate":71,"display_name":"Gabe Sechan"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1682352892,"creation_date":1682352892,"answer_id":76093954,"question_id":76093857,"body_markdown":"That becomes much more complicated.  YOu&#39;re currently adding all your data to a Path.  That path gets drawn once, with whatever pen is currently set.  The simplest way to do this would be not to use a data structure like this:\r\n\r\n    class DrawingData {\r\n       public Path path;\r\n       public int strokeWidth;\r\n    }\r\n\r\nInstead of storing a single Path, store a List&lt;DrawingData&gt;.  Whenever the size changes, add a new DrawingData to the list.  Then in onDraw, walk the list and draw all of them, setting the strokeWidth each time.","title":"Increase and Decrease functions also change the size of what was previously drawn. How do I fix this?","body":"<p>That becomes much more complicated.  YOu're currently adding all your data to a Path.  That path gets drawn once, with whatever pen is currently set.  The simplest way to do this would be not to use a data structure like this:</p>\n<pre><code>class DrawingData {\n   public Path path;\n   public int strokeWidth;\n}\n</code></pre>\n<p>Instead of storing a single Path, store a List.  Whenever the size changes, add a new DrawingData to the list.  Then in onDraw, walk the list and draw all of them, setting the strokeWidth each time.</p>\n"},{"tags":[],"owner":{"account_id":18463410,"reputation":18363,"user_id":13598222,"display_name":"cactustictacs"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1682364544,"creation_date":1682364544,"answer_id":76095428,"question_id":76093857,"body_markdown":"You&#39;re storing every `Path` in a list, and then in `onDraw` you draw each of them to the `Canvas` **using the same `Paint`**. There&#39;s no concept of *already drawn*, every call to `onDraw` starts with a blank canvas, and I assume that&#39;s why you&#39;re storing the paths and redrawing them in order?\r\n\r\nSince you basically have to recreate the image step-by-step this way, that needs to include steps like *set size*, *set colour* etc. You could make it part of each drawing operation if you want, like in Gabe&#39;s answer (`strokeWidth` is always a parameter, even if it hasn&#39;t changed), or you could make them separate commands, like this:\r\n\r\n````\r\nsealed class DrawCommand {\r\n    abstract fun perform(canvas: Canvas, paint: Paint)\r\n\r\n    data class Draw(val path: Path) : DrawCommand() {\r\n        override fun perform(canvas: Canvas, paint: Paint) {\r\n            canvas.drawPath(path, paint)\r\n        }\r\n    }\r\n\r\n    data class SetStrokeWidth(val width: Float) : DrawCommand() {\r\n        override fun perform(canvas: Canvas, paint: Paint) {\r\n            paint.strokeWidth = width\r\n        }\r\n    } \r\n}\r\n````\r\n\r\nThen instead of a `List&lt;Path&gt;`, you hold a `List&lt;DrawCommand&gt;`. To add a path to it, you add a `DrawCommand.Draw(path)` instead. To set the brush width, add a `SetStrokeWidth`. To redraw the image, just iterate over all the commands, calling the common `perform` method passing the current `Canvas` and `Paint`, and they&#39;ll do what they need to do.\r\n\r\n----\r\n\r\nThis is more complicated than just making the stroke width an attribute of each path-drawing operation, but it gives you a bit of flexibility by separating things. You can get undo functionality by popping `DrawCommand`s off the list, and you can expand it by adding new subclasses for different kinds of commands - colour changes, stroke styles, drawing circles etc etc. Depends what you need!\r\n\r\nBut either way, you need to store that stroke width change somehow, and apply it at the right stage in your redrawing.\r\n\r\n----\r\n\r\nThe other alternative is to create your own internal `Bitmap` (and `Canvas` to wrap it), and instead of storing all your paths, just draw them to the internal bitmap. Then in `onDraw` you just use the `drawBitmap` call to render that whole bitmap in one go, instead of redrawing everything one step at a time.\r\n\r\nOn the plus side, that&#39;s a lot faster when you have a lot of paths, and it will store things like &quot;this path is this width&quot; because that&#39;s just how you drew it onto the bitmap, those pixels won&#39;t change if you update the `Paint` later. On the other hand, once something&#39;s drawn it&#39;s drawn (destructive editing) and you won&#39;t be able to selectively change a certain path later. You could mix the two approaches to get some flexibility, but that&#39;s getting a lot more complex!","title":"Increase and Decrease functions also change the size of what was previously drawn. How do I fix this?","body":"<p>You're storing every <code>Path</code> in a list, and then in <code>onDraw</code> you draw each of them to the <code>Canvas</code> <strong>using the same <code>Paint</code></strong>. There's no concept of <em>already drawn</em>, every call to <code>onDraw</code> starts with a blank canvas, and I assume that's why you're storing the paths and redrawing them in order?</p>\n<p>Since you basically have to recreate the image step-by-step this way, that needs to include steps like <em>set size</em>, <em>set colour</em> etc. You could make it part of each drawing operation if you want, like in Gabe's answer (<code>strokeWidth</code> is always a parameter, even if it hasn't changed), or you could make them separate commands, like this:</p>\n<pre><code>sealed class DrawCommand {\n    abstract fun perform(canvas: Canvas, paint: Paint)\n\n    data class Draw(val path: Path) : DrawCommand() {\n        override fun perform(canvas: Canvas, paint: Paint) {\n            canvas.drawPath(path, paint)\n        }\n    }\n\n    data class SetStrokeWidth(val width: Float) : DrawCommand() {\n        override fun perform(canvas: Canvas, paint: Paint) {\n            paint.strokeWidth = width\n        }\n    } \n}\n</code></pre>\n<p>Then instead of a <code>List&lt;Path&gt;</code>, you hold a <code>List&lt;DrawCommand&gt;</code>. To add a path to it, you add a <code>DrawCommand.Draw(path)</code> instead. To set the brush width, add a <code>SetStrokeWidth</code>. To redraw the image, just iterate over all the commands, calling the common <code>perform</code> method passing the current <code>Canvas</code> and <code>Paint</code>, and they'll do what they need to do.</p>\n<hr />\n<p>This is more complicated than just making the stroke width an attribute of each path-drawing operation, but it gives you a bit of flexibility by separating things. You can get undo functionality by popping <code>DrawCommand</code>s off the list, and you can expand it by adding new subclasses for different kinds of commands - colour changes, stroke styles, drawing circles etc etc. Depends what you need!</p>\n<p>But either way, you need to store that stroke width change somehow, and apply it at the right stage in your redrawing.</p>\n<hr />\n<p>The other alternative is to create your own internal <code>Bitmap</code> (and <code>Canvas</code> to wrap it), and instead of storing all your paths, just draw them to the internal bitmap. Then in <code>onDraw</code> you just use the <code>drawBitmap</code> call to render that whole bitmap in one go, instead of redrawing everything one step at a time.</p>\n<p>On the plus side, that's a lot faster when you have a lot of paths, and it will store things like &quot;this path is this width&quot; because that's just how you drew it onto the bitmap, those pixels won't change if you update the <code>Paint</code> later. On the other hand, once something's drawn it's drawn (destructive editing) and you won't be able to selectively change a certain path later. You could mix the two approaches to get some flexibility, but that's getting a lot more complex!</p>\n"}],"owner":{"account_id":23744126,"reputation":1,"user_id":17761809,"display_name":"Darell"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":28,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1682364544,"creation_date":1682352156,"question_id":76093857,"body_markdown":"I&#39;m designing a drawing app in Android Studio using Java. I have a &#39;+&#39; button and a &#39;-&#39; button in my activity_main.xml. Whenever I click on these buttons the size of the pen increases or decreases, but it also increases and decreases whatever I had already drawn on the canvas. This should not be happening, why is this happening?\r\n\r\nCode snippet of increase/decrease functions:\r\n\r\n```\r\npublic void increasePenSize() {\r\n        float currentStrokeWidth = paint.getStrokeWidth();\r\n        float newStrokeWidth = currentStrokeWidth + 2f;\r\n        paint.setStrokeWidth(newStrokeWidth);\r\n    }\r\n\r\n    public void decreasePenSize() {\r\n        float currentStrokeWidth = paint.getStrokeWidth();\r\n        float newStrokeWidth = currentStrokeWidth - 2f;\r\n        paint.setStrokeWidth(newStrokeWidth);\r\n    }\r\n```\r\n\r\n\r\nFull code:\r\n```\r\npackage com.example.sketch_1;\r\n\r\nimport android.content.Context;\r\nimport android.graphics.Bitmap;\r\nimport android.graphics.Canvas;\r\nimport android.graphics.Color;\r\nimport android.graphics.Paint;\r\nimport android.graphics.Path;\r\nimport android.util.AttributeSet;\r\nimport android.view.MotionEvent;\r\nimport android.view.View;\r\nimport android.widget.EditText;\r\nimport android.widget.LinearLayout;\r\n\r\nimport androidx.annotation.Nullable;\r\n\r\nimport java.util.ArrayList;\r\nimport java.util.List;\r\n\r\npublic class CanvasView extends View\r\n{\r\n    Context context;\r\n    private int width, height;\r\n    private Bitmap bitmap;\r\n    private Paint paint;\r\n    private Path path;\r\n    private Canvas canvas;\r\n    private float mX, mY;\r\n    private static final float TOUCH_TOLERANCE = 4;\r\n\r\n\r\n    // Add variables to keep track of previous paths and their colors\r\n    private List&lt;Path&gt; paths = new ArrayList&lt;&gt;();\r\n    private List&lt;Integer&gt; colors = new ArrayList&lt;&gt;();\r\n    private int currentColor = Color.BLACK;\r\n    public CanvasView(Context context, @Nullable AttributeSet attrs) {\r\n        super(context, attrs);\r\n        this.context = context;\r\n        path = new Path();\r\n        paint = new Paint();\r\n        paint.setAntiAlias(true);\r\n        paint.setColor(Color.BLACK);\r\n        paint.setStyle(Paint.Style.STROKE);\r\n        paint.setStrokeJoin(Paint.Join.ROUND);\r\n        paint.setStrokeWidth(4f);\r\n    }\r\n\r\n    public void changePenColor(String color) {\r\n        switch (color) {\r\n            case &quot;Black&quot;:\r\n                currentColor = Color.BLACK;\r\n                break;\r\n            case &quot;Brown&quot;:\r\n                currentColor = Color.rgb(79, 30, 14);\r\n                break;\r\n            case &quot;Blue&quot;:\r\n                currentColor = Color.BLUE;\r\n                break;\r\n            case &quot;Cyan&quot;:\r\n                currentColor = Color.CYAN;\r\n                break;\r\n            case &quot;Red&quot;:\r\n                currentColor = Color.RED;\r\n                break;\r\n            case &quot;Orange&quot;:\r\n                currentColor = Color.rgb(255, 165, 0);\r\n                break;\r\n            case &quot;Yellow&quot;:\r\n                currentColor = Color.YELLOW;\r\n                break;\r\n            case &quot;Dark Green&quot;:\r\n                currentColor = Color.rgb(0, 100, 0);\r\n                break;\r\n            case &quot;Light Green&quot;:\r\n                currentColor = Color.rgb(57, 252, 3);\r\n                break;\r\n            case &quot;Pink&quot;:\r\n                currentColor = Color.rgb(250, 10, 174);\r\n                break;\r\n            case &quot;Magenta&quot;:\r\n                currentColor = Color.rgb(212, 0, 255);\r\n                break;\r\n            case &quot;Purple&quot;:\r\n                currentColor = Color.rgb(128, 0, 128);\r\n                break;\r\n            case &quot;Eraser&quot;:\r\n                currentColor = Color.WHITE;\r\n                break;\r\n        }\r\n    }\r\n\r\n    @Override\r\n    protected void onSizeChanged(int w, int h, int oldw, int oldh) {\r\n        super.onSizeChanged(w, h, oldw, oldh);\r\n        bitmap = Bitmap.createBitmap(w, h, Bitmap.Config.ARGB_8888);\r\n        canvas = new Canvas(bitmap);\r\n    }\r\n\r\n    public void startTouch(float x, float y)\r\n    {\r\n//        path.reset();\r\n        path = new Path();\r\n        path.moveTo(x, y);\r\n        mX = x;\r\n        mY = y;\r\n\r\n        // Add new path to list of paths and their colors\r\n        paths.add(path);\r\n        colors.add(currentColor);\r\n    }\r\n\r\n    public void moveTouch(float x, float y)\r\n    {\r\n        float dx = Math.abs(x-mX);\r\n        float dy = Math.abs(y-mY);\r\n\r\n        if(dx &gt;= TOUCH_TOLERANCE || dy &gt;= TOUCH_TOLERANCE)\r\n        {\r\n            path.quadTo(mX, mY, (x+mX)/2, (y+mY)/2);\r\n            mX = x;\r\n            mY = y;\r\n\r\n        }\r\n    }\r\n\r\n\r\n\r\n\r\n    // Function to clear the canvas\r\n\r\n    public void clearCanvas()\r\n    {\r\n        paths.clear();\r\n        colors.clear(); // Clears all the colors from the array\r\n        bitmap.eraseColor(Color.TRANSPARENT);\r\n        invalidate();\r\n    }\r\n\r\n\r\n    // Functions for increasing and decreasing pen size\r\n    public void increasePenSize() {\r\n        float currentStrokeWidth = paint.getStrokeWidth();\r\n        float newStrokeWidth = currentStrokeWidth + 2f;\r\n        paint.setStrokeWidth(newStrokeWidth);\r\n    }\r\n\r\n    public void decreasePenSize() {\r\n        float currentStrokeWidth = paint.getStrokeWidth();\r\n        float newStrokeWidth = currentStrokeWidth - 2f;\r\n        paint.setStrokeWidth(newStrokeWidth);\r\n    }\r\n\r\n\r\n    // Text box function\r\n//    public void showTextBox() {\r\n//        // Create a new EditText object\r\n//        EditText textBox = new EditText(getContext());\r\n//\r\n//        // Set its layout parameters\r\n//        LinearLayout.LayoutParams params = new LinearLayout.LayoutParams(\r\n//                LinearLayout.LayoutParams.MATCH_PARENT,\r\n//                LinearLayout.LayoutParams.WRAP_CONTENT\r\n//        );\r\n//        textBox.setLayoutParams(params);\r\n//\r\n//        // Add the text box to the layout\r\n//        LinearLayout layout = findViewById(R.id.btn_text_layout); // Replace with the ID of your layout\r\n//        layout.addView(textBox);\r\n//    }\r\n\r\n    // Handles all color changes from this single method function\r\n    // Not being used right now\r\n//    public void setPenColor(int color) {\r\n//        paint.setColor(color);\r\n//    }\r\n\r\n\r\n    public void upTouch()\r\n    {\r\n        path.lineTo(mX, mY);\r\n    }\r\n\r\n    @Override\r\n    protected void onDraw(Canvas canvas) {\r\n        super.onDraw(canvas);\r\n        // Draw all paths with their respective colors\r\n        for (int i = 0; i &lt; paths.size(); i++) {\r\n            paint.setColor(colors.get(i));\r\n            canvas.drawPath(paths.get(i), paint);\r\n        }\r\n    }\r\n\r\n    @Override\r\n    public boolean onTouchEvent(MotionEvent event) {\r\n        // Get the x and y coordinates of the touch event\r\n        float x = event.getX();\r\n        float y = event.getY();\r\n        // Check the action of the touch event\r\n        switch(event.getAction())\r\n        {\r\n            // If the touch event is a down action\r\n            case MotionEvent.ACTION_DOWN:\r\n                // Call the startTouch method and pass in the x and y coordinates\r\n                startTouch(x, y);\r\n                // Invalidate the view to trigger a redraw\r\n                invalidate();\r\n                break;\r\n            // If the touch event is a move action\r\n            case MotionEvent.ACTION_MOVE:\r\n                // Call the moveTouch method and pass in the x and y coordinates\r\n                moveTouch(x, y);\r\n                // Invalidate the view to trigger a redraw\r\n                invalidate();\r\n                break;\r\n            // If the touch event is an up action\r\n            case MotionEvent.ACTION_UP:\r\n                // Call the upTouch method\r\n                upTouch();\r\n                // Invalidate the view to trigger a redraw\r\n                invalidate();\r\n                break;\r\n        }\r\n        // Return true to indicate that the event was handled\r\n        return true;\r\n    }\r\n\r\n\r\n}\r\n```\r\n\r\n\r\nI&#39;m expecting the increase and decrease functions to only affect what will be drawn, not what has already been drawn on the canvas. I&#39;m not sure why it is affecting everything on the canvas.","title":"Increase and Decrease functions also change the size of what was previously drawn. How do I fix this?","body":"<p>I'm designing a drawing app in Android Studio using Java. I have a '+' button and a '-' button in my activity_main.xml. Whenever I click on these buttons the size of the pen increases or decreases, but it also increases and decreases whatever I had already drawn on the canvas. This should not be happening, why is this happening?</p>\n<p>Code snippet of increase/decrease functions:</p>\n<pre><code>public void increasePenSize() {\n        float currentStrokeWidth = paint.getStrokeWidth();\n        float newStrokeWidth = currentStrokeWidth + 2f;\n        paint.setStrokeWidth(newStrokeWidth);\n    }\n\n    public void decreasePenSize() {\n        float currentStrokeWidth = paint.getStrokeWidth();\n        float newStrokeWidth = currentStrokeWidth - 2f;\n        paint.setStrokeWidth(newStrokeWidth);\n    }\n</code></pre>\n<p>Full code:</p>\n<pre><code>package com.example.sketch_1;\n\nimport android.content.Context;\nimport android.graphics.Bitmap;\nimport android.graphics.Canvas;\nimport android.graphics.Color;\nimport android.graphics.Paint;\nimport android.graphics.Path;\nimport android.util.AttributeSet;\nimport android.view.MotionEvent;\nimport android.view.View;\nimport android.widget.EditText;\nimport android.widget.LinearLayout;\n\nimport androidx.annotation.Nullable;\n\nimport java.util.ArrayList;\nimport java.util.List;\n\npublic class CanvasView extends View\n{\n    Context context;\n    private int width, height;\n    private Bitmap bitmap;\n    private Paint paint;\n    private Path path;\n    private Canvas canvas;\n    private float mX, mY;\n    private static final float TOUCH_TOLERANCE = 4;\n\n\n    // Add variables to keep track of previous paths and their colors\n    private List&lt;Path&gt; paths = new ArrayList&lt;&gt;();\n    private List&lt;Integer&gt; colors = new ArrayList&lt;&gt;();\n    private int currentColor = Color.BLACK;\n    public CanvasView(Context context, @Nullable AttributeSet attrs) {\n        super(context, attrs);\n        this.context = context;\n        path = new Path();\n        paint = new Paint();\n        paint.setAntiAlias(true);\n        paint.setColor(Color.BLACK);\n        paint.setStyle(Paint.Style.STROKE);\n        paint.setStrokeJoin(Paint.Join.ROUND);\n        paint.setStrokeWidth(4f);\n    }\n\n    public void changePenColor(String color) {\n        switch (color) {\n            case &quot;Black&quot;:\n                currentColor = Color.BLACK;\n                break;\n            case &quot;Brown&quot;:\n                currentColor = Color.rgb(79, 30, 14);\n                break;\n            case &quot;Blue&quot;:\n                currentColor = Color.BLUE;\n                break;\n            case &quot;Cyan&quot;:\n                currentColor = Color.CYAN;\n                break;\n            case &quot;Red&quot;:\n                currentColor = Color.RED;\n                break;\n            case &quot;Orange&quot;:\n                currentColor = Color.rgb(255, 165, 0);\n                break;\n            case &quot;Yellow&quot;:\n                currentColor = Color.YELLOW;\n                break;\n            case &quot;Dark Green&quot;:\n                currentColor = Color.rgb(0, 100, 0);\n                break;\n            case &quot;Light Green&quot;:\n                currentColor = Color.rgb(57, 252, 3);\n                break;\n            case &quot;Pink&quot;:\n                currentColor = Color.rgb(250, 10, 174);\n                break;\n            case &quot;Magenta&quot;:\n                currentColor = Color.rgb(212, 0, 255);\n                break;\n            case &quot;Purple&quot;:\n                currentColor = Color.rgb(128, 0, 128);\n                break;\n            case &quot;Eraser&quot;:\n                currentColor = Color.WHITE;\n                break;\n        }\n    }\n\n    @Override\n    protected void onSizeChanged(int w, int h, int oldw, int oldh) {\n        super.onSizeChanged(w, h, oldw, oldh);\n        bitmap = Bitmap.createBitmap(w, h, Bitmap.Config.ARGB_8888);\n        canvas = new Canvas(bitmap);\n    }\n\n    public void startTouch(float x, float y)\n    {\n//        path.reset();\n        path = new Path();\n        path.moveTo(x, y);\n        mX = x;\n        mY = y;\n\n        // Add new path to list of paths and their colors\n        paths.add(path);\n        colors.add(currentColor);\n    }\n\n    public void moveTouch(float x, float y)\n    {\n        float dx = Math.abs(x-mX);\n        float dy = Math.abs(y-mY);\n\n        if(dx &gt;= TOUCH_TOLERANCE || dy &gt;= TOUCH_TOLERANCE)\n        {\n            path.quadTo(mX, mY, (x+mX)/2, (y+mY)/2);\n            mX = x;\n            mY = y;\n\n        }\n    }\n\n\n\n\n    // Function to clear the canvas\n\n    public void clearCanvas()\n    {\n        paths.clear();\n        colors.clear(); // Clears all the colors from the array\n        bitmap.eraseColor(Color.TRANSPARENT);\n        invalidate();\n    }\n\n\n    // Functions for increasing and decreasing pen size\n    public void increasePenSize() {\n        float currentStrokeWidth = paint.getStrokeWidth();\n        float newStrokeWidth = currentStrokeWidth + 2f;\n        paint.setStrokeWidth(newStrokeWidth);\n    }\n\n    public void decreasePenSize() {\n        float currentStrokeWidth = paint.getStrokeWidth();\n        float newStrokeWidth = currentStrokeWidth - 2f;\n        paint.setStrokeWidth(newStrokeWidth);\n    }\n\n\n    // Text box function\n//    public void showTextBox() {\n//        // Create a new EditText object\n//        EditText textBox = new EditText(getContext());\n//\n//        // Set its layout parameters\n//        LinearLayout.LayoutParams params = new LinearLayout.LayoutParams(\n//                LinearLayout.LayoutParams.MATCH_PARENT,\n//                LinearLayout.LayoutParams.WRAP_CONTENT\n//        );\n//        textBox.setLayoutParams(params);\n//\n//        // Add the text box to the layout\n//        LinearLayout layout = findViewById(R.id.btn_text_layout); // Replace with the ID of your layout\n//        layout.addView(textBox);\n//    }\n\n    // Handles all color changes from this single method function\n    // Not being used right now\n//    public void setPenColor(int color) {\n//        paint.setColor(color);\n//    }\n\n\n    public void upTouch()\n    {\n        path.lineTo(mX, mY);\n    }\n\n    @Override\n    protected void onDraw(Canvas canvas) {\n        super.onDraw(canvas);\n        // Draw all paths with their respective colors\n        for (int i = 0; i &lt; paths.size(); i++) {\n            paint.setColor(colors.get(i));\n            canvas.drawPath(paths.get(i), paint);\n        }\n    }\n\n    @Override\n    public boolean onTouchEvent(MotionEvent event) {\n        // Get the x and y coordinates of the touch event\n        float x = event.getX();\n        float y = event.getY();\n        // Check the action of the touch event\n        switch(event.getAction())\n        {\n            // If the touch event is a down action\n            case MotionEvent.ACTION_DOWN:\n                // Call the startTouch method and pass in the x and y coordinates\n                startTouch(x, y);\n                // Invalidate the view to trigger a redraw\n                invalidate();\n                break;\n            // If the touch event is a move action\n            case MotionEvent.ACTION_MOVE:\n                // Call the moveTouch method and pass in the x and y coordinates\n                moveTouch(x, y);\n                // Invalidate the view to trigger a redraw\n                invalidate();\n                break;\n            // If the touch event is an up action\n            case MotionEvent.ACTION_UP:\n                // Call the upTouch method\n                upTouch();\n                // Invalidate the view to trigger a redraw\n                invalidate();\n                break;\n        }\n        // Return true to indicate that the event was handled\n        return true;\n    }\n\n\n}\n</code></pre>\n<p>I'm expecting the increase and decrease functions to only affect what will be drawn, not what has already been drawn on the canvas. I'm not sure why it is affecting everything on the canvas.</p>\n"},{"tags":["java","spring","spring-boot","spring-oauth2"],"comments":[{"owner":{"account_id":346385,"reputation":5794,"user_id":679879,"accept_rate":90,"display_name":"Mustafa"},"score":0,"creation_date":1682364777,"post_id":76072048,"comment_id":134200643,"body_markdown":"What do you mean by &quot;manage this token&quot;? Do you mean refresh the token when it expires or cache it in memory so that you don&#39;t request a new one for every request?","body":"What do you mean by &quot;manage this token&quot;? Do you mean refresh the token when it expires or cache it in memory so that you don&#39;t request a new one for every request?"}],"owner":{"account_id":13970001,"reputation":1974,"user_id":10088866,"display_name":"Clyde Barrow"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":309,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1682363858,"creation_date":1682071013,"question_id":76072048,"body_markdown":"I have a spring boot app where I need to query an external api which is protected by the bearer token.\r\n\r\nFirst i need to query the auth api for the jwt token like \r\n```\r\nPOST https://some-external-api.com/api/auth/signin\r\n{\r\n\t&quot;username&quot;: &quot;MyApp&quot;,\r\n\t&quot;password&quot;: &quot;PASSWORD&quot;\r\n}\r\n```\r\nI receive a response like:\r\n```\r\n{\r\n\t&quot;access_token&quot;: &quot;eyJ....&quot;,\r\n\t&quot;token&quot;: &quot;eyJ....&quot;,\r\n\t&quot;validFrom&quot;: &quot;2023-04-21T09:16:50.000Z&quot;,\r\n\t&quot;validTo&quot;: &quot;2023-04-28T09:16:50.000Z&quot;,\r\n\t&quot;tokenType&quot;: &quot;bearer&quot;,\r\n\t&quot;expires&quot;: &quot;2023-04-28T09:16:50.000Z&quot;,\r\n\t&quot;token_type&quot;: &quot;bearer&quot;\r\n}\r\n```\r\nwhere `token` and `access_token` fields contain the same jwt token with a payload that looks like \r\n```\r\n{\r\n  &quot;unique_name&quot;: &quot;MyApp&quot;,\r\n  &quot;role&quot;: [\r\n    &quot;Reader&quot;,\r\n    &quot;MyApp&quot;\r\n  ],\r\n  &quot;nbf&quot;: 1682068610,\r\n  &quot;exp&quot;: 1682673410,\r\n  &quot;iat&quot;: 1682068610\r\n}\r\n```\r\nThen I am adding this jwt token to every request using a rest template interceptor. I&#39;d like to ask what&#39;s the best way to manage this token in spring - I don&#39;t want to implement my own token storage etc. I&#39;d like to use some ready solution.\r\n\r\nIn my app I have a similar code where the api is protected by the oauth2 and I use something like \r\n```\r\npublic class Oauth2AuthInterceptor implements ClientHttpRequestInterceptor {\r\n\r\n    private final ClientRegistration clientRegistration;\r\n    private final OAuth2AuthorizedClientManager manager;\r\n\r\n    @Override\r\n    public ClientHttpResponse intercept(HttpRequest request, byte[] body, ClientHttpRequestExecution execution) throws IOException {\r\n        final OAuth2AuthorizeRequest oAuth2AuthorizeRequest = OAuth2AuthorizeRequest\r\n            .withClientRegistrationId(clientRegistration.getRegistrationId())\r\n            .principal(&quot;myAppAuth&quot;)\r\n            .build();\r\n        final OAuth2AuthorizedClient client = manager.authorize(oAuth2AuthorizeRequest);\r\n        if (isNull(client)) {\r\n            throw new IllegalStateException(&quot;client credentials flow on &quot; + clientRegistration.getRegistrationId() + &quot; failed, client is null&quot;);\r\n        }\r\n        request.getHeaders().add(HttpHeaders.AUTHORIZATION, &quot;bearer &quot; + client.getAccessToken().getTokenValue());\r\n        return execution.execute(request, body);\r\n    }\r\n\r\n```\r\nIs it possible to customize this default oauth2 mechanism to be able to reuse it with my custom jwt auth endpoint ? ","title":"Spring - rest template authenticate each request with a custom jwt","body":"<p>I have a spring boot app where I need to query an external api which is protected by the bearer token.</p>\n<p>First i need to query the auth api for the jwt token like</p>\n<pre><code>POST https://some-external-api.com/api/auth/signin\n{\n    &quot;username&quot;: &quot;MyApp&quot;,\n    &quot;password&quot;: &quot;PASSWORD&quot;\n}\n</code></pre>\n<p>I receive a response like:</p>\n<pre><code>{\n    &quot;access_token&quot;: &quot;eyJ....&quot;,\n    &quot;token&quot;: &quot;eyJ....&quot;,\n    &quot;validFrom&quot;: &quot;2023-04-21T09:16:50.000Z&quot;,\n    &quot;validTo&quot;: &quot;2023-04-28T09:16:50.000Z&quot;,\n    &quot;tokenType&quot;: &quot;bearer&quot;,\n    &quot;expires&quot;: &quot;2023-04-28T09:16:50.000Z&quot;,\n    &quot;token_type&quot;: &quot;bearer&quot;\n}\n</code></pre>\n<p>where <code>token</code> and <code>access_token</code> fields contain the same jwt token with a payload that looks like</p>\n<pre><code>{\n  &quot;unique_name&quot;: &quot;MyApp&quot;,\n  &quot;role&quot;: [\n    &quot;Reader&quot;,\n    &quot;MyApp&quot;\n  ],\n  &quot;nbf&quot;: 1682068610,\n  &quot;exp&quot;: 1682673410,\n  &quot;iat&quot;: 1682068610\n}\n</code></pre>\n<p>Then I am adding this jwt token to every request using a rest template interceptor. I'd like to ask what's the best way to manage this token in spring - I don't want to implement my own token storage etc. I'd like to use some ready solution.</p>\n<p>In my app I have a similar code where the api is protected by the oauth2 and I use something like</p>\n<pre><code>public class Oauth2AuthInterceptor implements ClientHttpRequestInterceptor {\n\n    private final ClientRegistration clientRegistration;\n    private final OAuth2AuthorizedClientManager manager;\n\n    @Override\n    public ClientHttpResponse intercept(HttpRequest request, byte[] body, ClientHttpRequestExecution execution) throws IOException {\n        final OAuth2AuthorizeRequest oAuth2AuthorizeRequest = OAuth2AuthorizeRequest\n            .withClientRegistrationId(clientRegistration.getRegistrationId())\n            .principal(&quot;myAppAuth&quot;)\n            .build();\n        final OAuth2AuthorizedClient client = manager.authorize(oAuth2AuthorizeRequest);\n        if (isNull(client)) {\n            throw new IllegalStateException(&quot;client credentials flow on &quot; + clientRegistration.getRegistrationId() + &quot; failed, client is null&quot;);\n        }\n        request.getHeaders().add(HttpHeaders.AUTHORIZATION, &quot;bearer &quot; + client.getAccessToken().getTokenValue());\n        return execution.execute(request, body);\n    }\n\n</code></pre>\n<p>Is it possible to customize this default oauth2 mechanism to be able to reuse it with my custom jwt auth endpoint ?</p>\n"},{"tags":["java","classloader","obfuscation","decompiling","copy-protection"],"comments":[{"owner":{"account_id":76259,"reputation":17345,"user_id":218454,"accept_rate":75,"display_name":"nfechner"},"score":5,"creation_date":1315335439,"post_id":7324708,"comment_id":8830775,"body_markdown":"Write Open Source Software, and you wont have that problem. :-D","body":"Write Open Source Software, and you wont have that problem. :-D"},{"owner":{"display_name":"user177800"},"score":0,"creation_date":1315335595,"post_id":7324708,"comment_id":8830814,"body_markdown":"possible duplicate of [(Why) should I use obfuscation?](http://stackoverflow.com/questions/31882/why-should-i-use-obfuscation)","body":"possible duplicate of <a href=\"http://stackoverflow.com/questions/31882/why-should-i-use-obfuscation\">(Why) should I use obfuscation?</a>"},{"owner":{"display_name":"user177800"},"score":3,"creation_date":1315335635,"post_id":7324708,"comment_id":8830821,"body_markdown":"Write code worth paying for and those that will pay for it will pay, those that wouldn&#39;t pay anyway are not a concern.","body":"Write code worth paying for and those that will pay for it will pay, those that wouldn&#39;t pay anyway are not a concern."}],"answers":[{"tags":[],"owner":{"account_id":64344,"reputation":8352,"user_id":189992,"accept_rate":95,"display_name":"ssedano"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1315336001,"creation_date":1315336001,"answer_id":7324837,"question_id":7324708,"body_markdown":"You can write all your code with in `native`. The reverse engineering can be done anyway. But is harder.\r\n\r\nOk, this is not a strictly java solution.\r\n\r\nAs nfechner said in a comment write open source application.","title":"What can be done to secure JAR files besides obfuscation?","body":"<p>You can write all your code with in <code>native</code>. The reverse engineering can be done anyway. But is harder.</p>\n\n<p>Ok, this is not a strictly java solution.</p>\n\n<p>As nfechner said in a comment write open source application.</p>\n"},{"tags":[],"owner":{"account_id":8620,"reputation":22142,"user_id":15619,"accept_rate":91,"display_name":"Riduidel"},"down_vote_count":0,"up_vote_count":10,"is_accepted":false,"score":10,"last_activity_date":1437428057,"creation_date":1315336185,"answer_id":7324869,"question_id":7324708,"body_markdown":"In a previous company we had such questions, mainly driven by management paranoia.\r\n\r\nFirst of all, you have to understand that absolute security is only a myth: As long as your program is run on untrusted hardware, it *can* be decompiled, no matter what language you use. The only thing you can change is the cost of an attacker to understand your software/algorithm/data.\r\n\r\nConcerning obfuscation: it can be considered a first level of protection, as it makes the Java code totally unreadable.  Good obfuscators like [ProGuard][1] use forbidden characters in variables/methods names, preventing execution of decompiled code. Now, one can consider it a good enough security measure, as decompiling code is *not* as simple as running Jad or other decompilers and having perfectly working Java code. However, it is possible to understand most of the algorithms exposed in such code (as _readable_ code is very different from _compilable_ code).\r\n\r\nAdditional security measures include:\r\n\r\n * Running sensitive code on a server by using some kind of web-service to send results and grab results (using REST/SOAP/YouNameIt)\r\n * Loading sensitive code from a remote server using HTTPS and (maybe) additional security layers.\r\n\r\nFrom those two security measures, I would honestly choose the first. Indeed, the second can be subverted by typical HTTPS attacks (man in the middle, logging proxies, and so on, ...), and has the *major* inconvenience of putting the code on untrusted hardware, which makes it possibly borrowable from there.\r\n\r\n\r\n  [1]: http://proguard.sourceforge.net/","title":"What can be done to secure JAR files besides obfuscation?","body":"<p>In a previous company we had such questions, mainly driven by management paranoia.</p>\n\n<p>First of all, you have to understand that absolute security is only a myth: As long as your program is run on untrusted hardware, it <em>can</em> be decompiled, no matter what language you use. The only thing you can change is the cost of an attacker to understand your software/algorithm/data.</p>\n\n<p>Concerning obfuscation: it can be considered a first level of protection, as it makes the Java code totally unreadable.  Good obfuscators like <a href=\"http://proguard.sourceforge.net/\" rel=\"nofollow noreferrer\">ProGuard</a> use forbidden characters in variables/methods names, preventing execution of decompiled code. Now, one can consider it a good enough security measure, as decompiling code is <em>not</em> as simple as running Jad or other decompilers and having perfectly working Java code. However, it is possible to understand most of the algorithms exposed in such code (as <em>readable</em> code is very different from <em>compilable</em> code).</p>\n\n<p>Additional security measures include:</p>\n\n<ul>\n<li>Running sensitive code on a server by using some kind of web-service to send results and grab results (using REST/SOAP/YouNameIt)</li>\n<li>Loading sensitive code from a remote server using HTTPS and (maybe) additional security layers.</li>\n</ul>\n\n<p>From those two security measures, I would honestly choose the first. Indeed, the second can be subverted by typical HTTPS attacks (man in the middle, logging proxies, and so on, ...), and has the <em>major</em> inconvenience of putting the code on untrusted hardware, which makes it possibly borrowable from there.</p>\n"},{"tags":[],"owner":{"account_id":43564,"reputation":3133,"user_id":127430,"display_name":"Dmitry Leskov"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1316438372,"creation_date":1316438372,"answer_id":7471594,"question_id":7324708,"body_markdown":"Basically, there are four things you can do with your bytecode to protect it against Java decompilers:\r\n\r\n - obfuscation \r\n - software encryption\r\n - hardware encryption \r\n - native compilation\r\n\r\nall covered in my article &lt;a href=&quot;http://www.excelsior-usa.com/articles/java-obfuscators.html&quot;&gt;Protect Your Java Code - Through Obfuscators And Beyond&lt;/a&gt;","title":"What can be done to secure JAR files besides obfuscation?","body":"<p>Basically, there are four things you can do with your bytecode to protect it against Java decompilers:</p>\n\n<ul>\n<li>obfuscation </li>\n<li>software encryption</li>\n<li>hardware encryption </li>\n<li>native compilation</li>\n</ul>\n\n<p>all covered in my article <a href=\"http://www.excelsior-usa.com/articles/java-obfuscators.html\" rel=\"nofollow\">Protect Your Java Code - Through Obfuscators And Beyond</a></p>\n"}],"owner":{"account_id":893207,"reputation":141,"user_id":931088,"accept_rate":38,"display_name":"rainbower"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2801,"favorite_count":0,"down_vote_count":1,"up_vote_count":6,"answer_count":3,"score":5,"last_activity_date":1682363579,"creation_date":1315335316,"question_id":7324708,"body_markdown":"I&#39;m concerned about the security of Java executables. They offer little protection against decompilation. With tools like Java Decompiler even a kid can decompile the class files to get the original code.\r\n\r\nApart from code obfuscation what can be done to protect a class file?  Is the Encrypted Class Loader still a myth?","title":"What can be done to secure JAR files besides obfuscation?","body":"<p>I'm concerned about the security of Java executables. They offer little protection against decompilation. With tools like Java Decompiler even a kid can decompile the class files to get the original code.</p>\n\n<p>Apart from code obfuscation what can be done to protect a class file?  Is the Encrypted Class Loader still a myth?</p>\n"},{"tags":["java","intellij-idea","javafx"],"answers":[{"tags":[],"owner":{"account_id":20832881,"reputation":63,"user_id":15301757,"display_name":"Jaster_Master"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1668961170,"creation_date":1668961170,"answer_id":74509833,"question_id":74508102,"body_markdown":"Did you add the &quot;dependency&quot; tag of validatorfx to your &quot;pom.xml&quot;?\r\n\r\n    &lt;dependency&gt;\r\n     &lt;groupId&gt;net.synedra&lt;/groupId&gt;\r\n     &lt;artifactId&gt;validatorfx&lt;/artifactId&gt;\r\n     &lt;version&gt;0.4.0&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n\r\nI got the dependency from here: https://github.com/effad/ValidatorFX\r\n\r\nAfter that you have to reload your dependencies with the reload button that appears at the right top corner in your &quot;pom.xml&quot;.","title":"java: module not found: validatorfx IntellijIDEA","body":"<p>Did you add the &quot;dependency&quot; tag of validatorfx to your &quot;pom.xml&quot;?</p>\n<pre><code>&lt;dependency&gt;\n &lt;groupId&gt;net.synedra&lt;/groupId&gt;\n &lt;artifactId&gt;validatorfx&lt;/artifactId&gt;\n &lt;version&gt;0.4.0&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>I got the dependency from here: <a href=\"https://github.com/effad/ValidatorFX\" rel=\"nofollow noreferrer\">https://github.com/effad/ValidatorFX</a></p>\n<p>After that you have to reload your dependencies with the reload button that appears at the right top corner in your &quot;pom.xml&quot;.</p>\n"},{"tags":[],"owner":{"account_id":26926168,"reputation":1,"user_id":20499424,"display_name":"Oleg"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1682363151,"creation_date":1682363151,"answer_id":76095275,"question_id":74508102,"body_markdown":"In the file `module-info.java` you can change `requires validatorfx;` on\r\n\r\n    requires net.synedra.validatorfx;\r\n\r\nIt helped me.\r\nIt&#39;s an answer from Keith Pyle \r\nhttps://intellij-support.jetbrains.com/hc/en-us/community/posts/4404712032146-Gradle-and-Modules-not-working-","title":"java: module not found: validatorfx IntellijIDEA","body":"<p>In the file <code>module-info.java</code> you can change <code>requires validatorfx;</code> on</p>\n<pre><code>requires net.synedra.validatorfx;\n</code></pre>\n<p>It helped me.\nIt's an answer from Keith Pyle\n<a href=\"https://intellij-support.jetbrains.com/hc/en-us/community/posts/4404712032146-Gradle-and-Modules-not-working-\" rel=\"nofollow noreferrer\">https://intellij-support.jetbrains.com/hc/en-us/community/posts/4404712032146-Gradle-and-Modules-not-working-</a></p>\n"}],"owner":{"account_id":26864284,"reputation":1,"user_id":20447289,"display_name":"Mahmoud Hafez"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1723,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1682363151,"creation_date":1668947447,"question_id":74508102,"body_markdown":"it&#39;s my First Time working on JavaFX project with IntelliJ IDEA, so I&#39;m facing this problem when Running Project\r\n\r\nit Shows Error Message (java: module not found: validatorfx) \r\n\r\nNote: My Java Version [java version &quot;19.0.1&quot; 2022-10-18]\r\n\r\n[enter image description here](https://i.stack.imgur.com/mRqSV.jpg)\r\n\r\ni already searched for Solution and can&#39;t Fixed the problem .. \r\n\r\nPlease note iam just beginner :) !","title":"java: module not found: validatorfx IntellijIDEA","body":"<p>it's my First Time working on JavaFX project with IntelliJ IDEA, so I'm facing this problem when Running Project</p>\n<p>it Shows Error Message (java: module not found: validatorfx)</p>\n<p>Note: My Java Version [java version &quot;19.0.1&quot; 2022-10-18]</p>\n<p><a href=\"https://i.stack.imgur.com/mRqSV.jpg\" rel=\"nofollow noreferrer\">enter image description here</a></p>\n<p>i already searched for Solution and can't Fixed the problem ..</p>\n<p>Please note iam just beginner :) !</p>\n"},{"tags":["java","button","jframe","mouselistener"],"comments":[{"owner":{"account_id":12446642,"reputation":81,"user_id":9062663,"accept_rate":100,"display_name":"CameronCoob"},"score":0,"creation_date":1512575358,"post_id":47678248,"comment_id":82315611,"body_markdown":"Noticed that i forgot to delete \nMyMouseListener myMouseListener=new MyMouseListener();","body":"Noticed that i forgot to delete  MyMouseListener myMouseListener=new MyMouseListener();"},{"owner":{"account_id":12446642,"reputation":81,"user_id":9062663,"accept_rate":100,"display_name":"CameronCoob"},"score":0,"creation_date":1512575383,"post_id":47678248,"comment_id":82315629,"body_markdown":"so nevermind it","body":"so nevermind it"}],"answers":[{"tags":[],"owner":{"account_id":7373320,"reputation":17364,"user_id":5612858,"display_name":"Arnaud"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1512576569,"creation_date":1512576569,"answer_id":47678710,"question_id":47678248,"body_markdown":"This is one of the rare cases where you don&#39;t want your panel to have a layout manager, since you need absolute positioning.\r\n\r\n`JPanel` has a default layout manager which is a `FlowLayout`, and your call to `setLocation` will only have a temporary effect until the panel revalidates its content and places things where they were supposed to be initially.\r\n\r\nSee the following example with comments, it should give you the general idea :\r\n\r\n\r\n    public class Window extends JFrame {\r\n        private final JLabel statusBar;\r\n        private final JPanel mainPanel, statusBarPanel;\r\n        JButton button;\r\n    \r\n        public Window() {\r\n            super(&quot;Window&quot;);\r\n            setSize(400, 600);\r\n            setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\r\n            mainPanel = new JPanel();\r\n            mainPanel.setLayout(null);// no layout for absolute positioning\r\n            statusBarPanel = new JPanel();\r\n            statusBar = new JLabel(&quot;Coords: &quot;);\r\n            add(statusBarPanel, BorderLayout.SOUTH);\r\n            add(mainPanel, BorderLayout.CENTER);\r\n            mainPanel.setBorder(new BevelBorder(BevelBorder.LOWERED));\r\n            statusBarPanel.add(statusBar, BorderLayout.CENTER);\r\n            button = new JButton(&quot;Default text&quot;);\r\n    \r\n            // place the button &quot;manually&quot;\r\n            button.setBounds((int) (400 - button.getPreferredSize().getWidth()) / 2, 0,\r\n                    (int) button.getPreferredSize().getWidth(),\r\n                    (int) button.getPreferredSize().getHeight());\r\n            mainPanel.add(button);\r\n    \r\n            mainPanel.addMouseMotionListener(new MouseMotionAdapter() {\r\n                @Override\r\n                public void mouseMoved(final MouseEvent e) {\r\n                    super.mouseMoved(e);\r\n                    statusBar.setText(&quot;Coords: (&quot; + e.getX() + &quot;:&quot; + e.getY() + &quot;)&quot;);\r\n                }\r\n            });\r\n            mainPanel.addMouseListener(new MouseAdapter() {\r\n                @Override\r\n                public void mouseClicked(final MouseEvent e) {\r\n                    super.mouseClicked(e);\r\n                    button.setLocation((int) (e.getX() - button.getPreferredSize().getWidth() / 2),\r\n                            (int) (e.getY() - button.getPreferredSize().getHeight() / 2));\r\n    \r\n    \r\n                }\r\n            });\r\n            mainPanel.setFocusable(true);\r\n            setVisible(true);\r\n        }\r\n    \r\n    }\r\n\r\n\r\n","title":"Move button on JFrame Java","body":"<p>This is one of the rare cases where you don't want your panel to have a layout manager, since you need absolute positioning.</p>\n\n<p><code>JPanel</code> has a default layout manager which is a <code>FlowLayout</code>, and your call to <code>setLocation</code> will only have a temporary effect until the panel revalidates its content and places things where they were supposed to be initially.</p>\n\n<p>See the following example with comments, it should give you the general idea :</p>\n\n<pre><code>public class Window extends JFrame {\n    private final JLabel statusBar;\n    private final JPanel mainPanel, statusBarPanel;\n    JButton button;\n\n    public Window() {\n        super(\"Window\");\n        setSize(400, 600);\n        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\n        mainPanel = new JPanel();\n        mainPanel.setLayout(null);// no layout for absolute positioning\n        statusBarPanel = new JPanel();\n        statusBar = new JLabel(\"Coords: \");\n        add(statusBarPanel, BorderLayout.SOUTH);\n        add(mainPanel, BorderLayout.CENTER);\n        mainPanel.setBorder(new BevelBorder(BevelBorder.LOWERED));\n        statusBarPanel.add(statusBar, BorderLayout.CENTER);\n        button = new JButton(\"Default text\");\n\n        // place the button \"manually\"\n        button.setBounds((int) (400 - button.getPreferredSize().getWidth()) / 2, 0,\n                (int) button.getPreferredSize().getWidth(),\n                (int) button.getPreferredSize().getHeight());\n        mainPanel.add(button);\n\n        mainPanel.addMouseMotionListener(new MouseMotionAdapter() {\n            @Override\n            public void mouseMoved(final MouseEvent e) {\n                super.mouseMoved(e);\n                statusBar.setText(\"Coords: (\" + e.getX() + \":\" + e.getY() + \")\");\n            }\n        });\n        mainPanel.addMouseListener(new MouseAdapter() {\n            @Override\n            public void mouseClicked(final MouseEvent e) {\n                super.mouseClicked(e);\n                button.setLocation((int) (e.getX() - button.getPreferredSize().getWidth() / 2),\n                        (int) (e.getY() - button.getPreferredSize().getHeight() / 2));\n\n\n            }\n        });\n        mainPanel.setFocusable(true);\n        setVisible(true);\n    }\n\n}\n</code></pre>\n"}],"owner":{"account_id":12446642,"reputation":81,"user_id":9062663,"accept_rate":100,"display_name":"CameronCoob"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1538,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":47678710,"answer_count":1,"score":2,"last_activity_date":1682362817,"creation_date":1512575220,"question_id":47678248,"body_markdown":"I have a task to make an application which will do the following:\r\n\r\n- If I move a mouse the coordinates should be shown on the status bar\r\n- If mouse is clicked then the only one button which is on a JPanel should move to coordinates of click\r\n\r\nSo the problem is that when I do mouse click - it&#39;s fine, button moves to coordinates of click, but when I start moving mouse the button comes back to the original position.\r\n\r\n```\r\n    public class Window extends JFrame {\r\n        private JLabel statusBar;\r\n        private JPanel mainPanel, statusBarPanel;\r\n        JButton button;\r\n        public Window()\r\n        {\r\n            super(&quot;Window&quot;);\r\n            setSize(400,600);\r\n            setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\r\n            mainPanel=new JPanel();\r\n            statusBarPanel = new JPanel();\r\n            statusBar=new JLabel(&quot;Coords: &quot;);\r\n            add(statusBarPanel, BorderLayout.SOUTH);\r\n            add(mainPanel,BorderLayout.CENTER);\r\n            mainPanel.setBorder(new BevelBorder(BevelBorder.LOWERED));\r\n            statusBarPanel.add(statusBar,BorderLayout.CENTER);\r\n            button = new JButton(&quot;Default text&quot;);\r\n            mainPanel.add(button);\r\n            MyMouseListener myMouseListener=new MyMouseListener();\r\n            mainPanel.addMouseMotionListener(new MouseMotionAdapter() {\r\n                @Override\r\n                public void mouseMoved(MouseEvent e) {\r\n                    super.mouseMoved(e);\r\n                    statusBar.setText(&quot;Coords: (&quot;+e.getX()+&quot;:&quot;+e.getY()+&quot;)&quot;);\r\n                }\r\n            });\r\n            mainPanel.addMouseListener(new MouseAdapter() {\r\n                @Override\r\n                public void mouseClicked(MouseEvent e) {\r\n                    super.mouseClicked(e);\r\n                    button.setLocation(e.getX()-button.getWidth()/2,e.getY()-button.getHeight()/2);\r\n                }\r\n            });\r\n            mainPanel.setFocusable(true);\r\n            setVisible(true);\r\n        }\r\n    }\r\n```","title":"Move button on JFrame Java","body":"<p>I have a task to make an application which will do the following:</p>\n<ul>\n<li>If I move a mouse the coordinates should be shown on the status bar</li>\n<li>If mouse is clicked then the only one button which is on a JPanel should move to coordinates of click</li>\n</ul>\n<p>So the problem is that when I do mouse click - it's fine, button moves to coordinates of click, but when I start moving mouse the button comes back to the original position.</p>\n<pre><code>    public class Window extends JFrame {\n        private JLabel statusBar;\n        private JPanel mainPanel, statusBarPanel;\n        JButton button;\n        public Window()\n        {\n            super(&quot;Window&quot;);\n            setSize(400,600);\n            setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\n            mainPanel=new JPanel();\n            statusBarPanel = new JPanel();\n            statusBar=new JLabel(&quot;Coords: &quot;);\n            add(statusBarPanel, BorderLayout.SOUTH);\n            add(mainPanel,BorderLayout.CENTER);\n            mainPanel.setBorder(new BevelBorder(BevelBorder.LOWERED));\n            statusBarPanel.add(statusBar,BorderLayout.CENTER);\n            button = new JButton(&quot;Default text&quot;);\n            mainPanel.add(button);\n            MyMouseListener myMouseListener=new MyMouseListener();\n            mainPanel.addMouseMotionListener(new MouseMotionAdapter() {\n                @Override\n                public void mouseMoved(MouseEvent e) {\n                    super.mouseMoved(e);\n                    statusBar.setText(&quot;Coords: (&quot;+e.getX()+&quot;:&quot;+e.getY()+&quot;)&quot;);\n                }\n            });\n            mainPanel.addMouseListener(new MouseAdapter() {\n                @Override\n                public void mouseClicked(MouseEvent e) {\n                    super.mouseClicked(e);\n                    button.setLocation(e.getX()-button.getWidth()/2,e.getY()-button.getHeight()/2);\n                }\n            });\n            mainPanel.setFocusable(true);\n            setVisible(true);\n        }\n    }\n</code></pre>\n"},{"tags":["java","spring","sqlite","jpa","dialect"],"answers":[{"tags":[],"owner":{"account_id":22392775,"reputation":29,"user_id":16604539,"display_name":"Vishal "},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1682362665,"creation_date":1682362665,"answer_id":76095203,"question_id":75361292,"body_markdown":"Use the hibernate community dialects [Hibernate ORM Hibernate Community Dialects for sql dialect git][1]. \r\nYou don&#39;t need to create any dialect for that. just add this dependency\r\n\r\n&lt;!-- begin snippet: js hide: false console: true babel: false --&gt;\r\n\r\n&lt;!-- language: lang-html --&gt;\r\n\r\n    &lt;!-- https://mvnrepository.com/artifact/org.hibernate.orm/hibernate-community-dialects --&gt;\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;org.hibernate.orm&lt;/groupId&gt;\r\n        &lt;artifactId&gt;hibernate-community-dialects&lt;/artifactId&gt;\r\n        &lt;version&gt;6.2.1.Final&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n\r\n&lt;!-- end snippet --&gt;\r\n\r\n\r\n  [1]: https://github.com/hibernate/hibernate-orm/blob/main/hibernate-community-dialects/src/main/java/org/hibernate/community/dialect/SQLiteDialect.java","title":"i cant connect springboot and sqlite","body":"<p>Use the hibernate community dialects <a href=\"https://github.com/hibernate/hibernate-orm/blob/main/hibernate-community-dialects/src/main/java/org/hibernate/community/dialect/SQLiteDialect.java\" rel=\"nofollow noreferrer\">Hibernate ORM Hibernate Community Dialects for sql dialect git</a>.\nYou don't need to create any dialect for that. just add this dependency</p>\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>&lt;!-- https://mvnrepository.com/artifact/org.hibernate.orm/hibernate-community-dialects --&gt;\n&lt;dependency&gt;\n    &lt;groupId&gt;org.hibernate.orm&lt;/groupId&gt;\n    &lt;artifactId&gt;hibernate-community-dialects&lt;/artifactId&gt;\n    &lt;version&gt;6.2.1.Final&lt;/version&gt;\n&lt;/dependency&gt;</code></pre>\r\n</div>\r\n</div>\r\n</p>\n"}],"owner":{"account_id":24696653,"reputation":71,"user_id":18588529,"display_name":"Mehti Sadixov"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":247,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1682362665,"creation_date":1675686330,"question_id":75361292,"body_markdown":"I can&#39;t connect SQLite database with spring boot. I read a lot about it and learned that a dialect should be written for SQLite. I write the dialect, but when I write registerColumnType, it gives me an error: Cannot resolve method &#39;registerColumnType&#39; in &#39;SQLiteDialect&#39;. please help me\r\nmy pom.xml: \r\n\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n\txsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n\t&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n\t&lt;parent&gt;\r\n\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t&lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n\t\t&lt;version&gt;3.0.2&lt;/version&gt;\r\n\t\t&lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\r\n\t&lt;/parent&gt;\r\n\t&lt;groupId&gt;com.examDemo&lt;/groupId&gt;\r\n\t&lt;artifactId&gt;exam&lt;/artifactId&gt;\r\n\t&lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\r\n\r\n\t&lt;name&gt;exam&lt;/name&gt;\r\n\t&lt;description&gt;exam Demo project for Spring Boot&lt;/description&gt;\r\n\t&lt;properties&gt;\r\n\t\t&lt;java.version&gt;19&lt;/java.version&gt;\r\n\t&lt;/properties&gt;\r\n\t&lt;dependencies&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-data-jdbc&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt;\r\n\t\t\t&lt;scope&gt;runtime&lt;/scope&gt;\r\n\t\t\t&lt;optional&gt;true&lt;/optional&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;lombok&lt;/artifactId&gt;\r\n\t\t\t&lt;optional&gt;true&lt;/optional&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\r\n\t\t\t&lt;scope&gt;test&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n&lt;!--\t\t&lt;dependency&gt;--&gt;\r\n&lt;!--\t\t\t&lt;groupId&gt;com.github.gwenn&lt;/groupId&gt;--&gt;\r\n&lt;!--\t\t\t&lt;artifactId&gt;sqlite-dialect&lt;/artifactId&gt;--&gt;\r\n&lt;!--\t\t\t&lt;version&gt;0.1.0&lt;/version&gt;--&gt;\r\n&lt;!--\t\t&lt;/dependency&gt;--&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.xerial&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;sqlite-jdbc&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;3.16.1&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.hibernate&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;hibernate-community-dialects&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;6.1.6.Final&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t&lt;/dependencies&gt;\r\n\r\n\t&lt;build&gt;\r\n\t\t&lt;plugins&gt;\r\n\t\t\t&lt;plugin&gt;\r\n\t\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\r\n\t\t\t\t&lt;configuration&gt;\r\n\t\t\t\t\t&lt;excludes&gt;\r\n\t\t\t\t\t\t&lt;exclude&gt;\r\n\t\t\t\t\t\t\t&lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\r\n\t\t\t\t\t\t\t&lt;artifactId&gt;lombok&lt;/artifactId&gt;\r\n\t\t\t\t\t\t&lt;/exclude&gt;\r\n\t\t\t\t\t&lt;/excludes&gt;\r\n\t\t\t\t&lt;/configuration&gt;\r\n\t\t\t&lt;/plugin&gt;\r\n\t\t&lt;/plugins&gt;\r\n\t&lt;/build&gt;\r\n\r\n&lt;/project&gt;\r\n```\r\nmy SQLiteDialect : \r\n\r\n```\r\npackage com.examDemo.exam.dialect;\r\nimport org.hibernate.dialect.Dialect;\r\nimport org.hibernate.dialect.function.StandardSQLFunction;\r\n\r\nimport java.sql.*;\r\n\r\npublic class SQLiteDialect extends Dialect {\r\n\tpublic SQLiteDialect() {\r\n\t\tregisterColumnType(Types.BIT, &quot;integer&quot;);\r\n\t\tregisterColumnType(Types.TINYINT, &quot;tinyint&quot;);\r\n\t\tregisterColumnType(Types.SMALLINT, &quot;smallint&quot;);\r\n\t\tregisterColumnType(Types.INTEGER, &quot;integer&quot;);\r\n\t\tregisterColumnType(Types.BIGINT, &quot;bigint&quot;);\r\n\t\tregisterColumnType(Types.FLOAT, &quot;float&quot;);\r\n\t\tregisterColumnType(Types.REAL, &quot;real&quot;);\r\n\t\tregisterColumnType(Types.DOUBLE, &quot;double&quot;);\r\n\t\tregisterColumnType(Types.NUMERIC, &quot;numeric&quot;);\r\n\t\tregisterColumnType(Types.DECIMAL, &quot;decimal&quot;);\r\n\t\tregisterColumnType(Types.CHAR, &quot;char&quot;);\r\n\t\tregisterColumnType(Types.VARCHAR, &quot;varchar&quot;);\r\n\t\tregisterColumnType(Types.LONGVARCHAR, &quot;longvarchar&quot;);\r\n\t\tregisterColumnType(Types.DATE, &quot;date&quot;);\r\n\t\tregisterColumnType(Types.TIME, &quot;time&quot;);\r\n\t\tregisterColumnType(Types.TIMESTAMP, &quot;timestamp&quot;);\r\n\t\tregisterColumnType(Types.BINARY, &quot;blob&quot;);\r\n\t\tregisterColumnType(Types.VARBINARY, &quot;blob&quot;);\r\n\t\tregisterColumnType(Types.LONGVARBINARY, &quot;blob&quot;);\r\n\t\t// registerColumnType(Types.NULL, &quot;null&quot;);\r\n\t\tregisterColumnType(Types.BLOB, &quot;blob&quot;);\r\n\t\tregisterColumnType(Types.CLOB, &quot;clob&quot;);\r\n\t\tregisterColumnType(Types.BOOLEAN, &quot;integer&quot;);\r\n\r\n\t\tregisterKeyword(&quot;concat&quot;, new VarArgsSQLFunction(StringType.INSTANCE, &quot;&quot;, &quot;||&quot;, &quot;&quot;));\r\n\t\tregisterKeyword(&quot;mod&quot;, new SQLFunctionTemplate(StringType.INSTANCE, &quot;?1 % ?2&quot;));\r\n\t\tregisterKeyword(&quot;substr&quot;, new StandardSQLFunction(&quot;substr&quot;, StringType.INSTANCE));\r\n\t\tregisterKeyword(&quot;substring&quot;, new StandardSQLFunction(&quot;substr&quot;, StringType.INSTANCE));\r\n\t}\r\n\r\n\tpublic boolean supportsIdentityColumns() {\r\n\t\treturn true;\r\n\t}\r\n\r\n\tpublic boolean hasDataTypeInIdentityColumn() {\r\n\t\treturn false; // As specify in NHibernate dialect\r\n\t}\r\n\r\n\tpublic String getIdentityColumnString() {\r\n\t\t// return &quot;integer primary key autoincrement&quot;;\r\n\t\treturn &quot;integer&quot;;\r\n\t}\r\n\r\n\tpublic String getIdentitySelectString() {\r\n\t\treturn &quot;select last_insert_rowid()&quot;;\r\n\t}\r\n\r\n\tpublic boolean supportsLimit() {\r\n\t\treturn true;\r\n\t}\r\n\r\n\tprotected String getLimitString(String query, boolean hasOffset) {\r\n\t\treturn new StringBuffer(query.length() + 20).append(query).append(hasOffset ? &quot; limit ? offset ?&quot; : &quot; limit ?&quot;)\r\n\t\t\t\t.toString();\r\n\t}\r\n\r\n\tpublic boolean supportsTemporaryTables() {\r\n\t\treturn true;\r\n\t}\r\n\r\n\tpublic String getCreateTemporaryTableString() {\r\n\t\treturn &quot;create temporary table if not exists&quot;;\r\n\t}\r\n\r\n\tpublic boolean dropTemporaryTableAfterUse() {\r\n\t\treturn false;\r\n\t}\r\n\r\n\tpublic boolean supportsCurrentTimestampSelection() {\r\n\t\treturn true;\r\n\t}\r\n\r\n\tpublic boolean isCurrentTimestampSelectStringCallable() {\r\n\t\treturn false;\r\n\t}\r\n\r\n\tpublic String getCurrentTimestampSelectString() {\r\n\t\treturn &quot;select current_timestamp&quot;;\r\n\t}\r\n\r\n\tpublic boolean supportsUnionAll() {\r\n\t\treturn true;\r\n\t}\r\n\r\n\tpublic boolean hasAlterTable() {\r\n\t\treturn false; // As specify in NHibernate dialect\r\n\t}\r\n\r\n\tpublic boolean dropConstraints() {\r\n\t\treturn false;\r\n\t}\r\n\r\n\tpublic String getAddColumnString() {\r\n\t\treturn &quot;add column&quot;;\r\n\t}\r\n\r\n\tpublic String getForUpdateString() {\r\n\t\treturn &quot;&quot;;\r\n\t}\r\n\r\n\tpublic boolean supportsOuterJoinForUpdate() {\r\n\t\treturn false;\r\n\t}\r\n\r\n\tpublic String getDropForeignKeyString() {\r\n\t\tthrow new UnsupportedOperationException(&quot;No drop foreign key syntax supported by SQLiteDialect&quot;);\r\n\t}\r\n\r\n\tpublic String getAddForeignKeyConstraintString(String constraintName, String[] foreignKey, String referencedTable,\r\n\t                                               String[] primaryKey, boolean referencesPrimaryKey) {\r\n\t\tthrow new UnsupportedOperationException(&quot;No add foreign key syntax supported by SQLiteDialect&quot;);\r\n\t}\r\n\r\n\tpublic String getAddPrimaryKeyConstraintString(String constraintName) {\r\n\t\tthrow new UnsupportedOperationException(&quot;No add primary key syntax supported by SQLiteDialect&quot;);\r\n\t}\r\n\r\n\tpublic boolean supportsIfExistsBeforeTableName() {\r\n\t\treturn true;\r\n\t}\r\n\r\n\tpublic boolean supportsCascadeDelete() {\r\n\t\treturn false;\r\n\t}\r\n}\r\n\r\n```\r\n\r\n\r\n\r\n\r\nI checked many things. and I have watched many videos but no one has encountered this problem unfortunately","title":"i cant connect springboot and sqlite","body":"<p>I can't connect SQLite database with spring boot. I read a lot about it and learned that a dialect should be written for SQLite. I write the dialect, but when I write registerColumnType, it gives me an error: Cannot resolve method 'registerColumnType' in 'SQLiteDialect'. please help me\nmy pom.xml:</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n    xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n    &lt;parent&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n        &lt;version&gt;3.0.2&lt;/version&gt;\n        &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\n    &lt;/parent&gt;\n    &lt;groupId&gt;com.examDemo&lt;/groupId&gt;\n    &lt;artifactId&gt;exam&lt;/artifactId&gt;\n    &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n\n    &lt;name&gt;exam&lt;/name&gt;\n    &lt;description&gt;exam Demo project for Spring Boot&lt;/description&gt;\n    &lt;properties&gt;\n        &lt;java.version&gt;19&lt;/java.version&gt;\n    &lt;/properties&gt;\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-data-jdbc&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt;\n            &lt;scope&gt;runtime&lt;/scope&gt;\n            &lt;optional&gt;true&lt;/optional&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\n            &lt;artifactId&gt;lombok&lt;/artifactId&gt;\n            &lt;optional&gt;true&lt;/optional&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n&lt;!--        &lt;dependency&gt;--&gt;\n&lt;!--            &lt;groupId&gt;com.github.gwenn&lt;/groupId&gt;--&gt;\n&lt;!--            &lt;artifactId&gt;sqlite-dialect&lt;/artifactId&gt;--&gt;\n&lt;!--            &lt;version&gt;0.1.0&lt;/version&gt;--&gt;\n&lt;!--        &lt;/dependency&gt;--&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.xerial&lt;/groupId&gt;\n            &lt;artifactId&gt;sqlite-jdbc&lt;/artifactId&gt;\n            &lt;version&gt;3.16.1&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.hibernate&lt;/groupId&gt;\n            &lt;artifactId&gt;hibernate-community-dialects&lt;/artifactId&gt;\n            &lt;version&gt;6.1.6.Final&lt;/version&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n\n    &lt;build&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n                &lt;configuration&gt;\n                    &lt;excludes&gt;\n                        &lt;exclude&gt;\n                            &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\n                            &lt;artifactId&gt;lombok&lt;/artifactId&gt;\n                        &lt;/exclude&gt;\n                    &lt;/excludes&gt;\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n\n&lt;/project&gt;\n</code></pre>\n<p>my SQLiteDialect :</p>\n<pre><code>package com.examDemo.exam.dialect;\nimport org.hibernate.dialect.Dialect;\nimport org.hibernate.dialect.function.StandardSQLFunction;\n\nimport java.sql.*;\n\npublic class SQLiteDialect extends Dialect {\n    public SQLiteDialect() {\n        registerColumnType(Types.BIT, &quot;integer&quot;);\n        registerColumnType(Types.TINYINT, &quot;tinyint&quot;);\n        registerColumnType(Types.SMALLINT, &quot;smallint&quot;);\n        registerColumnType(Types.INTEGER, &quot;integer&quot;);\n        registerColumnType(Types.BIGINT, &quot;bigint&quot;);\n        registerColumnType(Types.FLOAT, &quot;float&quot;);\n        registerColumnType(Types.REAL, &quot;real&quot;);\n        registerColumnType(Types.DOUBLE, &quot;double&quot;);\n        registerColumnType(Types.NUMERIC, &quot;numeric&quot;);\n        registerColumnType(Types.DECIMAL, &quot;decimal&quot;);\n        registerColumnType(Types.CHAR, &quot;char&quot;);\n        registerColumnType(Types.VARCHAR, &quot;varchar&quot;);\n        registerColumnType(Types.LONGVARCHAR, &quot;longvarchar&quot;);\n        registerColumnType(Types.DATE, &quot;date&quot;);\n        registerColumnType(Types.TIME, &quot;time&quot;);\n        registerColumnType(Types.TIMESTAMP, &quot;timestamp&quot;);\n        registerColumnType(Types.BINARY, &quot;blob&quot;);\n        registerColumnType(Types.VARBINARY, &quot;blob&quot;);\n        registerColumnType(Types.LONGVARBINARY, &quot;blob&quot;);\n        // registerColumnType(Types.NULL, &quot;null&quot;);\n        registerColumnType(Types.BLOB, &quot;blob&quot;);\n        registerColumnType(Types.CLOB, &quot;clob&quot;);\n        registerColumnType(Types.BOOLEAN, &quot;integer&quot;);\n\n        registerKeyword(&quot;concat&quot;, new VarArgsSQLFunction(StringType.INSTANCE, &quot;&quot;, &quot;||&quot;, &quot;&quot;));\n        registerKeyword(&quot;mod&quot;, new SQLFunctionTemplate(StringType.INSTANCE, &quot;?1 % ?2&quot;));\n        registerKeyword(&quot;substr&quot;, new StandardSQLFunction(&quot;substr&quot;, StringType.INSTANCE));\n        registerKeyword(&quot;substring&quot;, new StandardSQLFunction(&quot;substr&quot;, StringType.INSTANCE));\n    }\n\n    public boolean supportsIdentityColumns() {\n        return true;\n    }\n\n    public boolean hasDataTypeInIdentityColumn() {\n        return false; // As specify in NHibernate dialect\n    }\n\n    public String getIdentityColumnString() {\n        // return &quot;integer primary key autoincrement&quot;;\n        return &quot;integer&quot;;\n    }\n\n    public String getIdentitySelectString() {\n        return &quot;select last_insert_rowid()&quot;;\n    }\n\n    public boolean supportsLimit() {\n        return true;\n    }\n\n    protected String getLimitString(String query, boolean hasOffset) {\n        return new StringBuffer(query.length() + 20).append(query).append(hasOffset ? &quot; limit ? offset ?&quot; : &quot; limit ?&quot;)\n                .toString();\n    }\n\n    public boolean supportsTemporaryTables() {\n        return true;\n    }\n\n    public String getCreateTemporaryTableString() {\n        return &quot;create temporary table if not exists&quot;;\n    }\n\n    public boolean dropTemporaryTableAfterUse() {\n        return false;\n    }\n\n    public boolean supportsCurrentTimestampSelection() {\n        return true;\n    }\n\n    public boolean isCurrentTimestampSelectStringCallable() {\n        return false;\n    }\n\n    public String getCurrentTimestampSelectString() {\n        return &quot;select current_timestamp&quot;;\n    }\n\n    public boolean supportsUnionAll() {\n        return true;\n    }\n\n    public boolean hasAlterTable() {\n        return false; // As specify in NHibernate dialect\n    }\n\n    public boolean dropConstraints() {\n        return false;\n    }\n\n    public String getAddColumnString() {\n        return &quot;add column&quot;;\n    }\n\n    public String getForUpdateString() {\n        return &quot;&quot;;\n    }\n\n    public boolean supportsOuterJoinForUpdate() {\n        return false;\n    }\n\n    public String getDropForeignKeyString() {\n        throw new UnsupportedOperationException(&quot;No drop foreign key syntax supported by SQLiteDialect&quot;);\n    }\n\n    public String getAddForeignKeyConstraintString(String constraintName, String[] foreignKey, String referencedTable,\n                                                   String[] primaryKey, boolean referencesPrimaryKey) {\n        throw new UnsupportedOperationException(&quot;No add foreign key syntax supported by SQLiteDialect&quot;);\n    }\n\n    public String getAddPrimaryKeyConstraintString(String constraintName) {\n        throw new UnsupportedOperationException(&quot;No add primary key syntax supported by SQLiteDialect&quot;);\n    }\n\n    public boolean supportsIfExistsBeforeTableName() {\n        return true;\n    }\n\n    public boolean supportsCascadeDelete() {\n        return false;\n    }\n}\n\n</code></pre>\n<p>I checked many things. and I have watched many videos but no one has encountered this problem unfortunately</p>\n"},{"tags":["java","mysql","json","spring","spring-data-jpa"],"owner":{"account_id":3051726,"reputation":1,"user_id":2586129,"display_name":"Professor"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":86,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1682362548,"creation_date":1682360218,"question_id":76094914,"body_markdown":"I have a field, metadata in a given entity. I need to keep the type of this field as json in mysql. I am facing trouble mapping this column to entity attribute. I&#39;ve kept the data type to String in java DTO. But the problem is while creating a resource using POST - I need to pass the escape characters before double quotes(&quot;). Please help me in getting rid of those escape characters. In response - I am able to remove them via @JsonRawProperty.\r\n\r\n\r\nSo far I&#39;ve tried this:\r\n\r\n```\r\n@Entity\r\n@Table(name=&quot;Sample&quot;)\r\npublic class Sample\r\n{  \r\n    @Column(name = &quot;properties&quot;,columnDefinition = &quot;json&quot;)\r\n    @JsonRawProperty\r\n    private String properties;\r\n    @Column(name = &quot;name&quot;)\r\n    private String name;\r\n}\r\n\r\nWith this - this works but I need to pass the json as string with escape characters in post request like this :\r\n\r\n{\r\n    &quot;name&quot;: &quot;test&quot;,\r\n    &quot;properties&quot;: &quot;{\\&quot;key\\&quot;:\\&quot;value\\&quot;},\r\n}\r\n\r\n```","title":"Map mysql Json field to Entity column in spring data jpa","body":"<p>I have a field, metadata in a given entity. I need to keep the type of this field as json in mysql. I am facing trouble mapping this column to entity attribute. I've kept the data type to String in java DTO. But the problem is while creating a resource using POST - I need to pass the escape characters before double quotes(&quot;). Please help me in getting rid of those escape characters. In response - I am able to remove them via @JsonRawProperty.</p>\n<p>So far I've tried this:</p>\n<pre><code>@Entity\n@Table(name=&quot;Sample&quot;)\npublic class Sample\n{  \n    @Column(name = &quot;properties&quot;,columnDefinition = &quot;json&quot;)\n    @JsonRawProperty\n    private String properties;\n    @Column(name = &quot;name&quot;)\n    private String name;\n}\n\nWith this - this works but I need to pass the json as string with escape characters in post request like this :\n\n{\n    &quot;name&quot;: &quot;test&quot;,\n    &quot;properties&quot;: &quot;{\\&quot;key\\&quot;:\\&quot;value\\&quot;},\n}\n\n</code></pre>\n"},{"tags":["java","apache-httpclient-4.x","java-17"],"comments":[{"owner":{"account_id":4165403,"reputation":878,"user_id":3414468,"accept_rate":50,"display_name":"Man&#231;aux Pierre-Alexandre"},"score":0,"creation_date":1682462302,"post_id":76094751,"comment_id":134219154,"body_markdown":"Do you have a finally block in call method that close the response and close the httpclient connection? \nIf yes can you post the entire method?","body":"Do you have a finally block in call method that close the response and close the httpclient connection?  If yes can you post the entire method?"}],"owner":{"account_id":1541447,"reputation":291,"user_id":1435998,"accept_rate":70,"display_name":"Belos"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":45,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1682362166,"creation_date":1682358810,"question_id":76094751,"body_markdown":"Code:\r\n\r\n    public static String stringFromHttpResponse(HttpResponse response) throws IOException {\r\n    \tif (isStatusOk(response.getStatusLine().getStatusCode())) {\r\n    \t\tHttpEntity entity = response.getEntity();\r\n    \t\tif (entity != null) {\r\n    \t\t\treturn EntityUtils.toString(entity);\r\n    \t\t} else {\r\n    \t\t\tthrow new IOException(&quot;HttpResponse has a null entity&quot;);\r\n    \t\t}\r\n    \t} else {\r\n    \t\tString err = String.format(&quot;HttpResponse status code is not Ok(code=%s, reason=%s)&quot;,\r\n    \t\t\t\tresponse.getStatusLine().getStatusCode(), response.getStatusLine().getReasonPhrase());\r\n    \t\tthrow new IOException(err);\r\n    \t}\r\n    }\r\n\r\nOutput from jstack:\r\n\r\n     &quot;main&quot; #1 prio=5 os_prio=0 cpu=8114.46ms elapsed=1102.01s tid=0x00007f897c0256e0 nid=0x66a6 runnable  [0x00007f89830a1000]\r\n       java.lang.Thread.State: RUNNABLE\r\n            at sun.nio.ch.SocketDispatcher.read0(java.base@17.0.2/Native Method)\r\n            at sun.nio.ch.SocketDispatcher.read(java.base@17.0.2/SocketDispatcher.java:47)\r\n            at sun.nio.ch.NioSocketImpl.tryRead(java.base@17.0.2/NioSocketImpl.java:261)\r\n            at sun.nio.ch.NioSocketImpl.implRead(java.base@17.0.2/NioSocketImpl.java:312)\r\n            at sun.nio.ch.NioSocketImpl.read(java.base@17.0.2/NioSocketImpl.java:350)\r\n            at sun.nio.ch.NioSocketImpl$1.read(java.base@17.0.2/NioSocketImpl.java:803)\r\n            at java.net.Socket$SocketInputStream.read(java.base@17.0.2/Socket.java:966)\r\n            at org.apache.http.impl.io.SessionInputBufferImpl.streamRead(SessionInputBufferImpl.java:137)\r\n            at org.apache.http.impl.io.SessionInputBufferImpl.read(SessionInputBufferImpl.java:197)\r\n            at org.apache.http.impl.io.ContentLengthInputStream.read(ContentLengthInputStream.java:176)\r\n            at org.apache.http.conn.EofSensorInputStream.read(EofSensorInputStream.java:135)\r\n            at sun.nio.cs.StreamDecoder.readBytes(java.base@17.0.2/StreamDecoder.java:270)\r\n            at sun.nio.cs.StreamDecoder.implRead(java.base@17.0.2/StreamDecoder.java:313)\r\n            at sun.nio.cs.StreamDecoder.read(java.base@17.0.2/StreamDecoder.java:188)\r\n            - locked &lt;0x0000000476808f38&gt; (a java.io.InputStreamReader)\r\n            at java.io.InputStreamReader.read(java.base@17.0.2/InputStreamReader.java:177)\r\n            at java.io.Reader.read(java.base@17.0.2/Reader.java:250)\r\n            at org.apache.http.util.EntityUtils.toString(EntityUtils.java:227)\r\n            at org.apache.http.util.EntityUtils.toString(EntityUtils.java:308)\r\n\r\n\r\nThis happens sporadically and I am not sure what&#39;s triggering this state. I have tried adding timeouts at the HttpRequest level but it&#39;s not helping. This is apache httpclient 4.5.13","title":"Apache EntityUtils toString from HttpResponse blocks thread indefinitely","body":"<p>Code:</p>\n<pre><code>public static String stringFromHttpResponse(HttpResponse response) throws IOException {\n    if (isStatusOk(response.getStatusLine().getStatusCode())) {\n        HttpEntity entity = response.getEntity();\n        if (entity != null) {\n            return EntityUtils.toString(entity);\n        } else {\n            throw new IOException(&quot;HttpResponse has a null entity&quot;);\n        }\n    } else {\n        String err = String.format(&quot;HttpResponse status code is not Ok(code=%s, reason=%s)&quot;,\n                response.getStatusLine().getStatusCode(), response.getStatusLine().getReasonPhrase());\n        throw new IOException(err);\n    }\n}\n</code></pre>\n<p>Output from jstack:</p>\n<pre><code> &quot;main&quot; #1 prio=5 os_prio=0 cpu=8114.46ms elapsed=1102.01s tid=0x00007f897c0256e0 nid=0x66a6 runnable  [0x00007f89830a1000]\n   java.lang.Thread.State: RUNNABLE\n        at sun.nio.ch.SocketDispatcher.read0(java.base@17.0.2/Native Method)\n        at sun.nio.ch.SocketDispatcher.read(java.base@17.0.2/SocketDispatcher.java:47)\n        at sun.nio.ch.NioSocketImpl.tryRead(java.base@17.0.2/NioSocketImpl.java:261)\n        at sun.nio.ch.NioSocketImpl.implRead(java.base@17.0.2/NioSocketImpl.java:312)\n        at sun.nio.ch.NioSocketImpl.read(java.base@17.0.2/NioSocketImpl.java:350)\n        at sun.nio.ch.NioSocketImpl$1.read(java.base@17.0.2/NioSocketImpl.java:803)\n        at java.net.Socket$SocketInputStream.read(java.base@17.0.2/Socket.java:966)\n        at org.apache.http.impl.io.SessionInputBufferImpl.streamRead(SessionInputBufferImpl.java:137)\n        at org.apache.http.impl.io.SessionInputBufferImpl.read(SessionInputBufferImpl.java:197)\n        at org.apache.http.impl.io.ContentLengthInputStream.read(ContentLengthInputStream.java:176)\n        at org.apache.http.conn.EofSensorInputStream.read(EofSensorInputStream.java:135)\n        at sun.nio.cs.StreamDecoder.readBytes(java.base@17.0.2/StreamDecoder.java:270)\n        at sun.nio.cs.StreamDecoder.implRead(java.base@17.0.2/StreamDecoder.java:313)\n        at sun.nio.cs.StreamDecoder.read(java.base@17.0.2/StreamDecoder.java:188)\n        - locked &lt;0x0000000476808f38&gt; (a java.io.InputStreamReader)\n        at java.io.InputStreamReader.read(java.base@17.0.2/InputStreamReader.java:177)\n        at java.io.Reader.read(java.base@17.0.2/Reader.java:250)\n        at org.apache.http.util.EntityUtils.toString(EntityUtils.java:227)\n        at org.apache.http.util.EntityUtils.toString(EntityUtils.java:308)\n</code></pre>\n<p>This happens sporadically and I am not sure what's triggering this state. I have tried adding timeouts at the HttpRequest level but it's not helping. This is apache httpclient 4.5.13</p>\n"},{"tags":["java","sentence","lorem-ipsum"],"comments":[{"owner":{"account_id":1888781,"reputation":2007,"user_id":1707427,"display_name":"S&#246;ren"},"score":2,"creation_date":1678607717,"post_id":75711741,"comment_id":133563753,"body_markdown":"Where is the Faker class from? Please provide a [mre].","body":"Where is the Faker class from? Please provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."},{"owner":{"account_id":480617,"reputation":2495,"user_id":893952,"accept_rate":57,"display_name":"Harry Coder"},"score":0,"creation_date":1678607738,"post_id":75711741,"comment_id":133563757,"body_markdown":"https://en.m.wikipedia.org/wiki/Lorem_ipsum also Java Faker is not a translator.","body":"<a href=\"https://en.m.wikipedia.org/wiki/Lorem_ipsum\" rel=\"nofollow noreferrer\">en.m.wikipedia.org/wiki/Lorem_ipsum</a> also Java Faker is not a translator."},{"owner":{"account_id":1888781,"reputation":2007,"user_id":1707427,"display_name":"S&#246;ren"},"score":0,"creation_date":1678607754,"post_id":75711741,"comment_id":133563761,"body_markdown":"Please read the tag description of the tags you&#39;re using. Neither the faker nor the lorem-ipsum tags are related to your question.","body":"Please read the tag description of the tags you&#39;re using. Neither the faker nor the lorem-ipsum tags are related to your question."},{"owner":{"account_id":10471985,"reputation":344,"user_id":8898840,"display_name":"Guy Incognito"},"score":6,"creation_date":1678607824,"post_id":75711741,"comment_id":133563766,"body_markdown":"The Faker class provides dozens of methods that generate all kinds of things. If you don&#39;t want the lorem ipsum text then don&#39;t use the lorem method. Pick something else.","body":"The Faker class provides dozens of methods that generate all kinds of things. If you don&#39;t want the lorem ipsum text then don&#39;t use the lorem method. Pick something else."},{"owner":{"account_id":13676551,"reputation":71,"user_id":11647767,"display_name":"Gulammustufa Momin"},"score":0,"creation_date":1678607923,"post_id":75711741,"comment_id":133563779,"body_markdown":"Faker class is in maven dependency, https://mvnrepository.com/artifact/com.github.javafaker/javafaker","body":"Faker class is in maven dependency, <a href=\"https://mvnrepository.com/artifact/com.github.javafaker/javafaker\" rel=\"nofollow noreferrer\">mvnrepository.com/artifact/com.github.javafaker/javafaker</a>"},{"owner":{"account_id":108033,"reputation":17201,"user_id":286934,"display_name":"Progman"},"score":0,"creation_date":1678609438,"post_id":75711741,"comment_id":133563963,"body_markdown":"@GulammustufaMomin What kind of text do you want to generate? There are [other faker categories](https://github.com/DiUS/java-faker#fakers) than &quot;Lorem&quot; in the library you can use.","body":"@GulammustufaMomin What kind of text do you want to generate? There are <a href=\"https://github.com/DiUS/java-faker#fakers\" rel=\"nofollow noreferrer\">other faker categories</a> than &quot;Lorem&quot; in the library you can use."},{"owner":{"account_id":47283,"reputation":703817,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":4,"creation_date":1678609776,"post_id":75711741,"comment_id":133564004,"body_markdown":"But frankly .... why do your even care what language the text is in?  It is ... by design ... nonsensical text.  Nonsense in one language is as good as nonsense in another.","body":"But frankly .... why do your even care what language the text is in?  It is ... by design ... nonsensical text.  Nonsense in one language is as good as nonsense in another."},{"owner":{"account_id":22057425,"reputation":135,"user_id":16320675,"display_name":"user16320675"},"score":2,"creation_date":1678610638,"post_id":75711741,"comment_id":133564125,"body_markdown":"`Locale` is not used for `Lorem`, but for postcodes, counties, phone numbers, some number formats and similar. (see the [en-GB.yml](https://github.com/DiUS/java-faker/blob/master/src/main/resources/en-GB.yml) file). Reason: see previous comment - it is not expected for it to return any real word","body":"<code>Locale</code> is not used for <code>Lorem</code>, but for postcodes, counties, phone numbers, some number formats and similar. (see the <a href=\"https://github.com/DiUS/java-faker/blob/master/src/main/resources/en-GB.yml\" rel=\"nofollow noreferrer\">en-GB.yml</a> file). Reason: see previous comment - it is not expected for it to return any real word"},{"owner":{"account_id":13676551,"reputation":71,"user_id":11647767,"display_name":"Gulammustufa Momin"},"score":0,"creation_date":1678618671,"post_id":75711741,"comment_id":133565197,"body_markdown":"Yes, I got it. Locale is not used for Lorem.","body":"Yes, I got it. Locale is not used for Lorem."}],"answers":[{"tags":[],"owner":{"account_id":6017640,"reputation":8919,"user_id":4725875,"display_name":"DevilsHnd - 退した"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1678622189,"creation_date":1678622189,"answer_id":75712936,"question_id":75711741,"body_markdown":"To translate Latin (or any other language) to English you would obviously need a translator as **[Java-Faker](https://javadoc.io/doc/com.github.javafaker/javafaker/latest/com/github/javafaker/Faker.html)** doesn&#39;t do this. The easiest (I should think) would be to snag the translation from the internet. \r\n\r\nI had the following method in my archives but I have no idea who wrote it. It does work but utilizes the *WhatsApp*&#39;s **WhatsMate WA Gateway** so, internet access is a requirement. I&#39;m not really sure this is necessarily a good thing or not but here is a runnable demo in any case:\r\n\r\n```\r\nimport com.github.javafaker.Faker;\r\nimport java.io.BufferedReader;\r\nimport java.io.IOException;\r\nimport java.io.InputStreamReader;\r\nimport java.io.OutputStream;\r\nimport java.net.HttpURLConnection;\r\nimport java.net.InetSocketAddress;\r\nimport java.net.Socket;\r\nimport java.net.URL;\r\nimport java.util.HashMap;\r\nimport java.util.Map;\r\n\r\n\r\npublic class FakerDemo {\r\n\r\n    public static void main(String[] args) {\r\n        new FakerDemo().startApp(args);\r\n    }\r\n    \r\n    private void startApp(String[] args) {\r\n        Faker faker = new Faker(); \r\n        String title = faker.lorem().sentence(3);\r\n        try {\r\n            System.out.println(&quot;Title: -&gt; &quot; + translate(title, &quot;Latin&quot;, &quot;English&quot;));\r\n        }\r\n        catch (Exception ex) {\r\n            System.err.println(ex);\r\n        }\r\n    }\r\n    \r\n    /**\r\n     * Sends out a WhatsApp message via WhatsMate WA Gateway. Can translate any\r\n     * language to any other language. Below is a list of 91 Languages and their\r\n     * respective abbreviation that this method can Translate to and from:\r\n     * &lt;pre&gt;\r\n     *\r\n     * Abbreviation, Language Name\r\n     *  &lt;table align=&quot;center&quot; cellpadding=&quot;1&quot; cellspacing=&quot;1&quot; border=&quot;1&quot;&gt;\r\n     *      &lt;tr&gt;&lt;td&gt;af, Afrikaans&lt;/td&gt;&lt;td&gt;gl, Galician&lt;/td&gt;&lt;td&gt;lt, Lithuanian&lt;/td&gt;&lt;td&gt;so, Somali&lt;/td&gt;&lt;/tr&gt;\r\n     *      &lt;tr&gt;&lt;td&gt;ar, Arabic&lt;/td&gt;&lt;td&gt;gu, Gujarati&lt;/td&gt;&lt;td&gt;lv, Latvian&lt;/td&gt;&lt;td&gt;sq, Albanian&lt;/td&gt;&lt;/tr&gt;\r\n     *      &lt;tr&gt;&lt;td&gt;az, Azerbaijani&lt;/td&gt;&lt;td&gt;ha, Hausa&lt;/td&gt;&lt;td&gt;ma, Punjabi&lt;/td&gt;&lt;td&gt;sr, Serbian&lt;/td&gt;&lt;/tr&gt;\r\n     *      &lt;tr&gt;&lt;td&gt;be,\tBelarusian&lt;/td&gt;&lt;td&gt;hi, Hindi&lt;/td&gt;&lt;td&gt;mg, Malagasy&lt;/td&gt;&lt;td&gt;st, Sesotho&lt;/td&gt;&lt;/tr&gt;\r\n     *      &lt;tr&gt;&lt;td&gt;bg,\tBulgarian&lt;/td&gt;&lt;td&gt;hmn, Hmong&lt;/td&gt;&lt;td&gt;mi, Maori&lt;/td&gt;&lt;td&gt;su, Sudanese&lt;/td&gt;&lt;/tr&gt;\r\n     *      &lt;tr&gt;&lt;td&gt;bn,\tBengali&lt;/td&gt;&lt;td&gt;hr, Croatian&lt;/td&gt;&lt;td&gt;mk, Macedonian&lt;/td&gt;&lt;td&gt;sv, Swedish&lt;/td&gt;&lt;/tr&gt;\r\n     *      &lt;tr&gt;&lt;td&gt;bs,\tBosnian&lt;/td&gt;&lt;td&gt;ht, Haitian Creole&lt;/td&gt;&lt;td&gt;ml, Malayalam&lt;/td&gt;&lt;td&gt;sw, Swahili&lt;/td&gt;&lt;/tr&gt;\r\n     *      &lt;tr&gt;&lt;td&gt;ca,\tCatalan&lt;/td&gt;&lt;td&gt;hu, Hungarian&lt;/td&gt;&lt;td&gt;mn, Mongolian&lt;/td&gt;&lt;td&gt;ta, Tamil&lt;/td&gt;&lt;/tr&gt;\r\n     *      &lt;tr&gt;&lt;td&gt;ceb, Cebuano&lt;/td&gt;&lt;td&gt;hy, Armenian&lt;/td&gt;&lt;td&gt;mr, Marathi&lt;/td&gt;&lt;td&gt;te, Telugu&lt;/td&gt;&lt;/tr&gt;\r\n     *      &lt;tr&gt;&lt;td&gt;cs,\tCzech&lt;/td&gt;&lt;td&gt;id, Indonesian&lt;/td&gt;&lt;td&gt;ms, Malay&lt;/td&gt;&lt;td&gt;tg, Tajik&lt;/td&gt;&lt;/tr&gt;\r\n     *      &lt;tr&gt;&lt;td&gt;cy,\tWelsh&lt;/td&gt;&lt;td&gt;ig, Igbo&lt;/td&gt;&lt;td&gt;mt, Maltese&lt;/td&gt;&lt;td&gt;th, Thai&lt;/td&gt;&lt;/tr&gt;\r\n     *      &lt;tr&gt;&lt;td&gt;da,\tDanish&lt;/td&gt;&lt;td&gt;is, Icelandic&lt;/td&gt;&lt;td&gt;my, Myanmar (Burmese)&lt;/td&gt;&lt;td&gt;tl, Filipino&lt;/td&gt;&lt;/tr&gt;\r\n     *      &lt;tr&gt;&lt;td&gt;de,\tGerman&lt;/td&gt;&lt;td&gt;it, Italian&lt;/td&gt;&lt;td&gt;ne, Nepali&lt;/td&gt;&lt;td&gt;tr, Turkish&lt;/td&gt;&lt;/tr&gt;\r\n     *      &lt;tr&gt;&lt;td&gt;el,\tGreek&lt;/td&gt;&lt;td&gt;iw, Hebrew&lt;/td&gt;&lt;td&gt;nl, Dutch&lt;/td&gt;&lt;td&gt;uk, Ukrainian&lt;/td&gt;&lt;/tr&gt;\r\n     *      &lt;tr&gt;&lt;td&gt;en,\tEnglish&lt;/td&gt;&lt;td&gt;ja, Japanese&lt;/td&gt;&lt;td&gt;no, Norwegian&lt;/td&gt;&lt;td&gt;ur, Urdu&lt;/td&gt;&lt;/tr&gt;\r\n     *      &lt;tr&gt;&lt;td&gt;eo,\tEsperanto&lt;/td&gt;&lt;td&gt;jw, Javanese&lt;/td&gt;&lt;td&gt;ny, Chichewa&lt;/td&gt;&lt;td&gt;uz, Uzbek&lt;/td&gt;&lt;/tr&gt;\r\n     *      &lt;tr&gt;&lt;td&gt;es,\tSpanish&lt;/td&gt;&lt;td&gt;ka, Georgian&lt;/td&gt;&lt;td&gt;pl, Polish&lt;/td&gt;&lt;td&gt;vi, Vietnamese&lt;/td&gt;&lt;/tr&gt;\r\n     *      &lt;tr&gt;&lt;td&gt;et,\tEstonian&lt;/td&gt;&lt;td&gt;kk, Kazakh&lt;/td&gt;&lt;td&gt;pt, Portuguese&lt;/td&gt;&lt;td&gt;yi, Yiddish&lt;/td&gt;&lt;/tr&gt;\r\n     *      &lt;tr&gt;&lt;td&gt;eu,\tBasque&lt;/td&gt;&lt;td&gt;km, Khmer&lt;/td&gt;&lt;td&gt;ro, Romanian&lt;/td&gt;&lt;td&gt;yo, Yoruba&lt;/td&gt;&lt;/tr&gt;\r\n     *      &lt;tr&gt;&lt;td&gt;fa,\tPersian&lt;/td&gt;&lt;td&gt;kn, Kannada&lt;/td&gt;&lt;td&gt;ru, Russian&lt;/td&gt;&lt;td&gt;zcn, Chinese Simplified&lt;/td&gt;&lt;/tr&gt;\r\n     *      &lt;tr&gt;&lt;td&gt;fi,\tFinnish&lt;/td&gt;&lt;td&gt;ko, Korean&lt;/td&gt;&lt;td&gt;si, Sinhala&lt;/td&gt;&lt;td&gt;ztw, Chinese Traditional&lt;/td&gt;&lt;/tr&gt;\r\n     *      &lt;tr&gt;&lt;td&gt;fr,\tFrench&lt;/td&gt;&lt;td&gt;la, Latin&lt;/td&gt;&lt;td&gt;sk, Slovak&lt;/td&gt;&lt;td&gt;zu, Zulu&lt;/td&gt;&lt;/tr&gt;\r\n     *      &lt;tr&gt;&lt;td&gt;ga, Irish&lt;/td&gt;&lt;td&gt;lo, Lao&lt;/td&gt;&lt;td&gt;sl, Slovenian&lt;/td&gt;&lt;td&gt;&lt;/td&gt;&lt;/tr&gt;\r\n     *  &lt;/table&gt;\r\n     * &lt;/pre&gt;&lt;br&gt;\r\n     * &lt;p&gt;\r\n     * This method also ensures that an Internet connection exists. General\r\n     * (simple) errors are returned as text string from this method.\r\n     *\r\n     * @param textToTranslate (String) The text to translate.&lt;br&gt;\r\n     * \r\n     * @param fromLang (String) The language Name or Abbreviation (as describe\r\n     *                 within the information above) to convert FROM.&lt;br&gt;\r\n     *\r\n     * @param toLang   (String) The language Name or Abbreviation (as describe\r\n     *                 within the information above) to convert TO.&lt;br&gt;\r\n     *\r\n     * @return (String) The language translation.&lt;br&gt;\r\n     *\r\n     * @throws java.lang.Exception Should any issue arise.\r\n     */\r\n    public static String translate(String textToTranslate, String fromLang, String toLang) throws Exception {\r\n        // Is there internet...\r\n        // ---------------------------------------\r\n        boolean hasInternet;\r\n        /* Connect to Google DNS via port 53. Sometimes Anti-Virus\r\n           applications will block standard internet access from \r\n           applications that do not contain a digital signature. This\r\n           is one way to get around that problem...at least for checking\r\n           to see if there is indeed internet access for the system.  */\r\n        String host = &quot;8.8.8.8&quot;;\r\n        int port = 53;\r\n        try (Socket socket = new Socket()) {\r\n            socket.connect(new InetSocketAddress(host, port), 5000);\r\n            hasInternet = true;\r\n        }\r\n        catch (IOException ex) {\r\n            hasInternet = false;\r\n        }\r\n        if (!hasInternet) {\r\n            return &quot;No Internet availalble to acquire translation!&quot;;\r\n        }\r\n        // ---------------------------------------\r\n\r\n        // Language Map...\r\n        HashMap&lt;String, String&gt; langMap = new HashMap&lt;&gt;();\r\n        //&lt;editor-fold defaultstate=&quot;collapsed&quot; desc=&quot; Language Map Data &quot;&gt;\r\n        langMap.put(&quot;af&quot;, &quot;Afrikaans&quot;);\r\n        langMap.put(&quot;ar&quot;, &quot;Arabic&quot;);\r\n        langMap.put(&quot;az&quot;, &quot;Azerbaijani&quot;);\r\n        langMap.put(&quot;be&quot;, &quot;Belarusian&quot;);\r\n        langMap.put(&quot;bg&quot;, &quot;Bulgarian&quot;);\r\n        langMap.put(&quot;bn&quot;, &quot;Bengali&quot;);\r\n        langMap.put(&quot;bs&quot;, &quot;Bosnian&quot;);\r\n        langMap.put(&quot;ca&quot;, &quot;Catalan&quot;);\r\n        langMap.put(&quot;ceb&quot;, &quot;Cebuano&quot;);\r\n        langMap.put(&quot;cs&quot;, &quot;Czech&quot;);\r\n        langMap.put(&quot;cy&quot;, &quot;Welsh&quot;);\r\n        langMap.put(&quot;da&quot;, &quot;Danish&quot;);\r\n        langMap.put(&quot;de&quot;, &quot;German&quot;);\r\n        langMap.put(&quot;el&quot;, &quot;Greek&quot;);\r\n        langMap.put(&quot;en&quot;, &quot;English&quot;);\r\n        langMap.put(&quot;eo&quot;, &quot;Esperanto&quot;);\r\n        langMap.put(&quot;es&quot;, &quot;Spanish&quot;);\r\n        langMap.put(&quot;et&quot;, &quot;Estonian&quot;);\r\n        langMap.put(&quot;eu&quot;, &quot;Basque&quot;);\r\n        langMap.put(&quot;fa&quot;, &quot;Persian&quot;);\r\n        langMap.put(&quot;fi&quot;, &quot;Finnish&quot;);\r\n        langMap.put(&quot;fr&quot;, &quot;French&quot;);\r\n        langMap.put(&quot;ga&quot;, &quot;Irish&quot;);\r\n        langMap.put(&quot;gl&quot;, &quot;Galician&quot;);\r\n        langMap.put(&quot;gu&quot;, &quot;Gujarati&quot;);\r\n        langMap.put(&quot;ha&quot;, &quot;Hausa&quot;);\r\n        langMap.put(&quot;hi&quot;, &quot;Hindi&quot;);\r\n        langMap.put(&quot;hmn&quot;, &quot;Hmong&quot;);\r\n        langMap.put(&quot;hr&quot;, &quot;Croatian&quot;);\r\n        langMap.put(&quot;ht&quot;, &quot;Haitian Creole&quot;);\r\n        langMap.put(&quot;hu&quot;, &quot;Hungarian&quot;);\r\n        langMap.put(&quot;hy&quot;, &quot;Armenian&quot;);\r\n        langMap.put(&quot;id&quot;, &quot;Indonesian&quot;);\r\n        langMap.put(&quot;ig&quot;, &quot;Igbo&quot;);\r\n        langMap.put(&quot;is&quot;, &quot;Icelandic&quot;);\r\n        langMap.put(&quot;it&quot;, &quot;Italian&quot;);\r\n        langMap.put(&quot;iw&quot;, &quot;Hebrew&quot;);\r\n        langMap.put(&quot;ja&quot;, &quot;Japanese&quot;);\r\n        langMap.put(&quot;jw&quot;, &quot;Javanese&quot;);\r\n        langMap.put(&quot;ka&quot;, &quot;Georgian&quot;);\r\n        langMap.put(&quot;kk&quot;, &quot;Kazakh&quot;);\r\n        langMap.put(&quot;km&quot;, &quot;Khmer&quot;);\r\n        langMap.put(&quot;kn&quot;, &quot;Kannada&quot;);\r\n        langMap.put(&quot;ko&quot;, &quot;Korean&quot;);\r\n        langMap.put(&quot;la&quot;, &quot;Latin&quot;);\r\n        langMap.put(&quot;lo&quot;, &quot;Lao&quot;);\r\n        langMap.put(&quot;lt&quot;, &quot;Lithuanian&quot;);\r\n        langMap.put(&quot;lv&quot;, &quot;Latvian&quot;);\r\n        langMap.put(&quot;ma&quot;, &quot;Punjabi&quot;);\r\n        langMap.put(&quot;mg&quot;, &quot;Malagasy&quot;);\r\n        langMap.put(&quot;mi&quot;, &quot;Maori&quot;);\r\n        langMap.put(&quot;mk&quot;, &quot;Macedonian&quot;);\r\n        langMap.put(&quot;ml&quot;, &quot;Malayalam&quot;);\r\n        langMap.put(&quot;mn&quot;, &quot;Mongolian&quot;);\r\n        langMap.put(&quot;mr&quot;, &quot;Marathi&quot;);\r\n        langMap.put(&quot;ms&quot;, &quot;Malay&quot;);\r\n        langMap.put(&quot;mt&quot;, &quot;Maltese&quot;);\r\n        langMap.put(&quot;my&quot;, &quot;Myanmar (Burmese)&quot;);\r\n        langMap.put(&quot;ne&quot;, &quot;Nepali&quot;);\r\n        langMap.put(&quot;nl&quot;, &quot;Dutch&quot;);\r\n        langMap.put(&quot;no&quot;, &quot;Norwegian&quot;);\r\n        langMap.put(&quot;ny&quot;, &quot;Chichewa&quot;);\r\n        langMap.put(&quot;pl&quot;, &quot;Polish&quot;);\r\n        langMap.put(&quot;pt&quot;, &quot;Portuguese&quot;);\r\n        langMap.put(&quot;ro&quot;, &quot;Romanian&quot;);\r\n        langMap.put(&quot;ru&quot;, &quot;Russian&quot;);\r\n        langMap.put(&quot;si&quot;, &quot;Sinhala&quot;);\r\n        langMap.put(&quot;sk&quot;, &quot;Slovak&quot;);\r\n        langMap.put(&quot;sl&quot;, &quot;Slovenian&quot;);\r\n        langMap.put(&quot;so&quot;, &quot;Somali&quot;);\r\n        langMap.put(&quot;sq&quot;, &quot;Albanian&quot;);\r\n        langMap.put(&quot;sr&quot;, &quot;Serbian&quot;);\r\n        langMap.put(&quot;st&quot;, &quot;Sesotho&quot;);\r\n        langMap.put(&quot;su&quot;, &quot;Sudanese&quot;);\r\n        langMap.put(&quot;sv&quot;, &quot;Swedish&quot;);\r\n        langMap.put(&quot;sw&quot;, &quot;Swahili&quot;);\r\n        langMap.put(&quot;ta&quot;, &quot;Tamil&quot;);\r\n        langMap.put(&quot;te&quot;, &quot;Telugu&quot;);\r\n        langMap.put(&quot;tg&quot;, &quot;Tajik&quot;);\r\n        langMap.put(&quot;th&quot;, &quot;Thai&quot;);\r\n        langMap.put(&quot;tl&quot;, &quot;Filipino&quot;);\r\n        langMap.put(&quot;tr&quot;, &quot;Turkish&quot;);\r\n        langMap.put(&quot;uk&quot;, &quot;Ukrainian&quot;);\r\n        langMap.put(&quot;ur&quot;, &quot;Urdu&quot;);\r\n        langMap.put(&quot;uz&quot;, &quot;Uzbek&quot;);\r\n        langMap.put(&quot;vi&quot;, &quot;Vietnamese&quot;);\r\n        langMap.put(&quot;yi&quot;, &quot;Yiddish&quot;);\r\n        langMap.put(&quot;yo&quot;, &quot;Yoruba&quot;);\r\n        langMap.put(&quot;zcn&quot;, &quot;Chinese Simplified&quot;);\r\n        langMap.put(&quot;zct&quot;, &quot;Chinese Traditional&quot;);\r\n        langMap.put(&quot;zu&quot;, &quot;Zulu&quot;);\r\n        //&lt;/editor-fold&gt;\r\n\r\n        // Ensure supplied FROM/TO Language spec&#39;s are in lowercase.\r\n        fromLang = fromLang.toLowerCase();\r\n        toLang = toLang.toLowerCase();\r\n\r\n        boolean foundLang = false;\r\n        // If only the FROM language abrieviation (map key) is provided...\r\n        // fromLang parameter...\r\n        if (fromLang.length() &lt; 4) {\r\n            if (!langMap.containsKey(fromLang.toLowerCase())) {\r\n                return &quot;ERROR! Can not locate specified &#39;FROM&#39; Language! --&gt; (&quot; + fromLang + &quot;)&quot;;\r\n            }\r\n        }\r\n        // If full FROM language Name (map value) is provided...\r\n        else {\r\n            String value = fromLang;\r\n            for (Map.Entry&lt;String, String&gt; entry : langMap.entrySet()) {\r\n                if (value.equalsIgnoreCase(entry.getValue())) {\r\n                    fromLang = entry.getKey();\r\n                    foundLang = true;\r\n                    break; //breaking because its one to one map\r\n                }\r\n            }\r\n            if (!foundLang) {\r\n                return &quot;ERROR! Can not locate specified &#39;FROM&#39; Language! --&gt; (&quot; + fromLang + &quot;)&quot;;\r\n            }\r\n        }\r\n        // If only the TO language abrieviation (map key) is provided... \r\n        // toLang parameter...\r\n        foundLang = false;\r\n        if (toLang.length() &lt; 4) {\r\n            if (!langMap.containsKey(toLang)) {\r\n                return &quot;ERROR! Can not locate specified &#39;TO&#39; Language! --&gt; (&quot; + toLang + &quot;)&quot;;\r\n            }\r\n        }\r\n        // If full TO language Name (map value) is provided...\r\n        else {\r\n            String value = toLang;\r\n            for (Map.Entry&lt;String, String&gt; entry : langMap.entrySet()) {\r\n                if (value.equalsIgnoreCase(entry.getValue())) {\r\n                    toLang = entry.getKey();\r\n                    foundLang = true;\r\n                    break; //breaking because its one to one map\r\n                }\r\n            }\r\n            if (!foundLang) {\r\n                return &quot;ERROR! Can not locate specified &#39;TO&#39; Language! --&gt; (&quot; + toLang + &quot;)&quot;;\r\n            }\r\n        }\r\n        if (fromLang.equalsIgnoreCase(&quot;zcn&quot;)) {\r\n            fromLang = &quot;zh-CN&quot;;\r\n        }\r\n        else if (fromLang.equalsIgnoreCase(&quot;zct&quot;)) {\r\n            fromLang = &quot;zh-CT&quot;;\r\n        }\r\n        if (toLang.equalsIgnoreCase(&quot;zcn&quot;)) {\r\n            toLang = &quot;zh-CN&quot;;\r\n        }\r\n        else if (toLang.equalsIgnoreCase(&quot;zct&quot;)) {\r\n            toLang = &quot;zh-CT&quot;;\r\n        }\r\n\r\n        String jsonPayload = new StringBuilder()\r\n                .append(&quot;{&quot;)\r\n                .append(&quot;\\&quot;fromLang\\&quot;:\\&quot;&quot;)\r\n                .append(fromLang)\r\n                .append(&quot;\\&quot;,&quot;)\r\n                .append(&quot;\\&quot;toLang\\&quot;:\\&quot;&quot;)\r\n                .append(toLang)\r\n                .append(&quot;\\&quot;,&quot;)\r\n                .append(&quot;\\&quot;text\\&quot;:\\&quot;&quot;)\r\n                .append(textToTranslate)\r\n                .append(&quot;\\&quot;&quot;)\r\n                .append(&quot;}&quot;)\r\n                .toString();\r\n\r\n        URL url = new URL(&quot;http://api.whatsmate.net/v1/translation/translate&quot;);\r\n        HttpURLConnection conn = (HttpURLConnection) url.openConnection();\r\n        conn.setDoOutput(true);\r\n        conn.setRequestMethod(&quot;POST&quot;);\r\n        conn.setRequestProperty(&quot;X-WM-CLIENT-ID&quot;, &quot;FREE_TRIAL_ACCOUNT&quot;);\r\n        conn.setRequestProperty(&quot;X-WM-CLIENT-SECRET&quot;, &quot;PUBLIC_SECRET&quot;);\r\n        conn.setRequestProperty(&quot;Content-Type&quot;, &quot;application/json&quot;);\r\n\r\n        // &#39;Try With Resources&#39; used here to auto-close stream.\r\n        try (OutputStream os = conn.getOutputStream()) {\r\n            os.write(jsonPayload.getBytes());\r\n            os.flush();\r\n        }\r\n\r\n        int statusCode = conn.getResponseCode();\r\n        // System.out.println(&quot;Status Code: &quot; + statusCode);\r\n        BufferedReader br = new BufferedReader(new InputStreamReader(\r\n                (statusCode == 200) ? conn.getInputStream() : conn.getErrorStream()\r\n        ));\r\n\r\n        String output;\r\n        StringBuilder sb = new StringBuilder();\r\n        while ((output = br.readLine()) != null) {\r\n            sb.append(output).append(System.lineSeparator());\r\n        }\r\n        return sb.toString();\r\n    }\r\n    \r\n}\r\n```\r\n","title":"Why java faker generating sentence in Latin language. I need in English language","body":"<p>To translate Latin (or any other language) to English you would obviously need a translator as <strong><a href=\"https://javadoc.io/doc/com.github.javafaker/javafaker/latest/com/github/javafaker/Faker.html\" rel=\"nofollow noreferrer\">Java-Faker</a></strong> doesn't do this. The easiest (I should think) would be to snag the translation from the internet.</p>\n<p>I had the following method in my archives but I have no idea who wrote it. It does work but utilizes the <em>WhatsApp</em>'s <strong>WhatsMate WA Gateway</strong> so, internet access is a requirement. I'm not really sure this is necessarily a good thing or not but here is a runnable demo in any case:</p>\n<pre><code>import com.github.javafaker.Faker;\nimport java.io.BufferedReader;\nimport java.io.IOException;\nimport java.io.InputStreamReader;\nimport java.io.OutputStream;\nimport java.net.HttpURLConnection;\nimport java.net.InetSocketAddress;\nimport java.net.Socket;\nimport java.net.URL;\nimport java.util.HashMap;\nimport java.util.Map;\n\n\npublic class FakerDemo {\n\n    public static void main(String[] args) {\n        new FakerDemo().startApp(args);\n    }\n    \n    private void startApp(String[] args) {\n        Faker faker = new Faker(); \n        String title = faker.lorem().sentence(3);\n        try {\n            System.out.println(&quot;Title: -&gt; &quot; + translate(title, &quot;Latin&quot;, &quot;English&quot;));\n        }\n        catch (Exception ex) {\n            System.err.println(ex);\n        }\n    }\n    \n    /**\n     * Sends out a WhatsApp message via WhatsMate WA Gateway. Can translate any\n     * language to any other language. Below is a list of 91 Languages and their\n     * respective abbreviation that this method can Translate to and from:\n     * &lt;pre&gt;\n     *\n     * Abbreviation, Language Name\n     *  &lt;table align=&quot;center&quot; cellpadding=&quot;1&quot; cellspacing=&quot;1&quot; border=&quot;1&quot;&gt;\n     *      &lt;tr&gt;&lt;td&gt;af, Afrikaans&lt;/td&gt;&lt;td&gt;gl, Galician&lt;/td&gt;&lt;td&gt;lt, Lithuanian&lt;/td&gt;&lt;td&gt;so, Somali&lt;/td&gt;&lt;/tr&gt;\n     *      &lt;tr&gt;&lt;td&gt;ar, Arabic&lt;/td&gt;&lt;td&gt;gu, Gujarati&lt;/td&gt;&lt;td&gt;lv, Latvian&lt;/td&gt;&lt;td&gt;sq, Albanian&lt;/td&gt;&lt;/tr&gt;\n     *      &lt;tr&gt;&lt;td&gt;az, Azerbaijani&lt;/td&gt;&lt;td&gt;ha, Hausa&lt;/td&gt;&lt;td&gt;ma, Punjabi&lt;/td&gt;&lt;td&gt;sr, Serbian&lt;/td&gt;&lt;/tr&gt;\n     *      &lt;tr&gt;&lt;td&gt;be, Belarusian&lt;/td&gt;&lt;td&gt;hi, Hindi&lt;/td&gt;&lt;td&gt;mg, Malagasy&lt;/td&gt;&lt;td&gt;st, Sesotho&lt;/td&gt;&lt;/tr&gt;\n     *      &lt;tr&gt;&lt;td&gt;bg, Bulgarian&lt;/td&gt;&lt;td&gt;hmn, Hmong&lt;/td&gt;&lt;td&gt;mi, Maori&lt;/td&gt;&lt;td&gt;su, Sudanese&lt;/td&gt;&lt;/tr&gt;\n     *      &lt;tr&gt;&lt;td&gt;bn, Bengali&lt;/td&gt;&lt;td&gt;hr, Croatian&lt;/td&gt;&lt;td&gt;mk, Macedonian&lt;/td&gt;&lt;td&gt;sv, Swedish&lt;/td&gt;&lt;/tr&gt;\n     *      &lt;tr&gt;&lt;td&gt;bs, Bosnian&lt;/td&gt;&lt;td&gt;ht, Haitian Creole&lt;/td&gt;&lt;td&gt;ml, Malayalam&lt;/td&gt;&lt;td&gt;sw, Swahili&lt;/td&gt;&lt;/tr&gt;\n     *      &lt;tr&gt;&lt;td&gt;ca, Catalan&lt;/td&gt;&lt;td&gt;hu, Hungarian&lt;/td&gt;&lt;td&gt;mn, Mongolian&lt;/td&gt;&lt;td&gt;ta, Tamil&lt;/td&gt;&lt;/tr&gt;\n     *      &lt;tr&gt;&lt;td&gt;ceb, Cebuano&lt;/td&gt;&lt;td&gt;hy, Armenian&lt;/td&gt;&lt;td&gt;mr, Marathi&lt;/td&gt;&lt;td&gt;te, Telugu&lt;/td&gt;&lt;/tr&gt;\n     *      &lt;tr&gt;&lt;td&gt;cs, Czech&lt;/td&gt;&lt;td&gt;id, Indonesian&lt;/td&gt;&lt;td&gt;ms, Malay&lt;/td&gt;&lt;td&gt;tg, Tajik&lt;/td&gt;&lt;/tr&gt;\n     *      &lt;tr&gt;&lt;td&gt;cy, Welsh&lt;/td&gt;&lt;td&gt;ig, Igbo&lt;/td&gt;&lt;td&gt;mt, Maltese&lt;/td&gt;&lt;td&gt;th, Thai&lt;/td&gt;&lt;/tr&gt;\n     *      &lt;tr&gt;&lt;td&gt;da, Danish&lt;/td&gt;&lt;td&gt;is, Icelandic&lt;/td&gt;&lt;td&gt;my, Myanmar (Burmese)&lt;/td&gt;&lt;td&gt;tl, Filipino&lt;/td&gt;&lt;/tr&gt;\n     *      &lt;tr&gt;&lt;td&gt;de, German&lt;/td&gt;&lt;td&gt;it, Italian&lt;/td&gt;&lt;td&gt;ne, Nepali&lt;/td&gt;&lt;td&gt;tr, Turkish&lt;/td&gt;&lt;/tr&gt;\n     *      &lt;tr&gt;&lt;td&gt;el, Greek&lt;/td&gt;&lt;td&gt;iw, Hebrew&lt;/td&gt;&lt;td&gt;nl, Dutch&lt;/td&gt;&lt;td&gt;uk, Ukrainian&lt;/td&gt;&lt;/tr&gt;\n     *      &lt;tr&gt;&lt;td&gt;en, English&lt;/td&gt;&lt;td&gt;ja, Japanese&lt;/td&gt;&lt;td&gt;no, Norwegian&lt;/td&gt;&lt;td&gt;ur, Urdu&lt;/td&gt;&lt;/tr&gt;\n     *      &lt;tr&gt;&lt;td&gt;eo, Esperanto&lt;/td&gt;&lt;td&gt;jw, Javanese&lt;/td&gt;&lt;td&gt;ny, Chichewa&lt;/td&gt;&lt;td&gt;uz, Uzbek&lt;/td&gt;&lt;/tr&gt;\n     *      &lt;tr&gt;&lt;td&gt;es, Spanish&lt;/td&gt;&lt;td&gt;ka, Georgian&lt;/td&gt;&lt;td&gt;pl, Polish&lt;/td&gt;&lt;td&gt;vi, Vietnamese&lt;/td&gt;&lt;/tr&gt;\n     *      &lt;tr&gt;&lt;td&gt;et, Estonian&lt;/td&gt;&lt;td&gt;kk, Kazakh&lt;/td&gt;&lt;td&gt;pt, Portuguese&lt;/td&gt;&lt;td&gt;yi, Yiddish&lt;/td&gt;&lt;/tr&gt;\n     *      &lt;tr&gt;&lt;td&gt;eu, Basque&lt;/td&gt;&lt;td&gt;km, Khmer&lt;/td&gt;&lt;td&gt;ro, Romanian&lt;/td&gt;&lt;td&gt;yo, Yoruba&lt;/td&gt;&lt;/tr&gt;\n     *      &lt;tr&gt;&lt;td&gt;fa, Persian&lt;/td&gt;&lt;td&gt;kn, Kannada&lt;/td&gt;&lt;td&gt;ru, Russian&lt;/td&gt;&lt;td&gt;zcn, Chinese Simplified&lt;/td&gt;&lt;/tr&gt;\n     *      &lt;tr&gt;&lt;td&gt;fi, Finnish&lt;/td&gt;&lt;td&gt;ko, Korean&lt;/td&gt;&lt;td&gt;si, Sinhala&lt;/td&gt;&lt;td&gt;ztw, Chinese Traditional&lt;/td&gt;&lt;/tr&gt;\n     *      &lt;tr&gt;&lt;td&gt;fr, French&lt;/td&gt;&lt;td&gt;la, Latin&lt;/td&gt;&lt;td&gt;sk, Slovak&lt;/td&gt;&lt;td&gt;zu, Zulu&lt;/td&gt;&lt;/tr&gt;\n     *      &lt;tr&gt;&lt;td&gt;ga, Irish&lt;/td&gt;&lt;td&gt;lo, Lao&lt;/td&gt;&lt;td&gt;sl, Slovenian&lt;/td&gt;&lt;td&gt;&lt;/td&gt;&lt;/tr&gt;\n     *  &lt;/table&gt;\n     * &lt;/pre&gt;&lt;br&gt;\n     * &lt;p&gt;\n     * This method also ensures that an Internet connection exists. General\n     * (simple) errors are returned as text string from this method.\n     *\n     * @param textToTranslate (String) The text to translate.&lt;br&gt;\n     * \n     * @param fromLang (String) The language Name or Abbreviation (as describe\n     *                 within the information above) to convert FROM.&lt;br&gt;\n     *\n     * @param toLang   (String) The language Name or Abbreviation (as describe\n     *                 within the information above) to convert TO.&lt;br&gt;\n     *\n     * @return (String) The language translation.&lt;br&gt;\n     *\n     * @throws java.lang.Exception Should any issue arise.\n     */\n    public static String translate(String textToTranslate, String fromLang, String toLang) throws Exception {\n        // Is there internet...\n        // ---------------------------------------\n        boolean hasInternet;\n        /* Connect to Google DNS via port 53. Sometimes Anti-Virus\n           applications will block standard internet access from \n           applications that do not contain a digital signature. This\n           is one way to get around that problem...at least for checking\n           to see if there is indeed internet access for the system.  */\n        String host = &quot;8.8.8.8&quot;;\n        int port = 53;\n        try (Socket socket = new Socket()) {\n            socket.connect(new InetSocketAddress(host, port), 5000);\n            hasInternet = true;\n        }\n        catch (IOException ex) {\n            hasInternet = false;\n        }\n        if (!hasInternet) {\n            return &quot;No Internet availalble to acquire translation!&quot;;\n        }\n        // ---------------------------------------\n\n        // Language Map...\n        HashMap&lt;String, String&gt; langMap = new HashMap&lt;&gt;();\n        //&lt;editor-fold defaultstate=&quot;collapsed&quot; desc=&quot; Language Map Data &quot;&gt;\n        langMap.put(&quot;af&quot;, &quot;Afrikaans&quot;);\n        langMap.put(&quot;ar&quot;, &quot;Arabic&quot;);\n        langMap.put(&quot;az&quot;, &quot;Azerbaijani&quot;);\n        langMap.put(&quot;be&quot;, &quot;Belarusian&quot;);\n        langMap.put(&quot;bg&quot;, &quot;Bulgarian&quot;);\n        langMap.put(&quot;bn&quot;, &quot;Bengali&quot;);\n        langMap.put(&quot;bs&quot;, &quot;Bosnian&quot;);\n        langMap.put(&quot;ca&quot;, &quot;Catalan&quot;);\n        langMap.put(&quot;ceb&quot;, &quot;Cebuano&quot;);\n        langMap.put(&quot;cs&quot;, &quot;Czech&quot;);\n        langMap.put(&quot;cy&quot;, &quot;Welsh&quot;);\n        langMap.put(&quot;da&quot;, &quot;Danish&quot;);\n        langMap.put(&quot;de&quot;, &quot;German&quot;);\n        langMap.put(&quot;el&quot;, &quot;Greek&quot;);\n        langMap.put(&quot;en&quot;, &quot;English&quot;);\n        langMap.put(&quot;eo&quot;, &quot;Esperanto&quot;);\n        langMap.put(&quot;es&quot;, &quot;Spanish&quot;);\n        langMap.put(&quot;et&quot;, &quot;Estonian&quot;);\n        langMap.put(&quot;eu&quot;, &quot;Basque&quot;);\n        langMap.put(&quot;fa&quot;, &quot;Persian&quot;);\n        langMap.put(&quot;fi&quot;, &quot;Finnish&quot;);\n        langMap.put(&quot;fr&quot;, &quot;French&quot;);\n        langMap.put(&quot;ga&quot;, &quot;Irish&quot;);\n        langMap.put(&quot;gl&quot;, &quot;Galician&quot;);\n        langMap.put(&quot;gu&quot;, &quot;Gujarati&quot;);\n        langMap.put(&quot;ha&quot;, &quot;Hausa&quot;);\n        langMap.put(&quot;hi&quot;, &quot;Hindi&quot;);\n        langMap.put(&quot;hmn&quot;, &quot;Hmong&quot;);\n        langMap.put(&quot;hr&quot;, &quot;Croatian&quot;);\n        langMap.put(&quot;ht&quot;, &quot;Haitian Creole&quot;);\n        langMap.put(&quot;hu&quot;, &quot;Hungarian&quot;);\n        langMap.put(&quot;hy&quot;, &quot;Armenian&quot;);\n        langMap.put(&quot;id&quot;, &quot;Indonesian&quot;);\n        langMap.put(&quot;ig&quot;, &quot;Igbo&quot;);\n        langMap.put(&quot;is&quot;, &quot;Icelandic&quot;);\n        langMap.put(&quot;it&quot;, &quot;Italian&quot;);\n        langMap.put(&quot;iw&quot;, &quot;Hebrew&quot;);\n        langMap.put(&quot;ja&quot;, &quot;Japanese&quot;);\n        langMap.put(&quot;jw&quot;, &quot;Javanese&quot;);\n        langMap.put(&quot;ka&quot;, &quot;Georgian&quot;);\n        langMap.put(&quot;kk&quot;, &quot;Kazakh&quot;);\n        langMap.put(&quot;km&quot;, &quot;Khmer&quot;);\n        langMap.put(&quot;kn&quot;, &quot;Kannada&quot;);\n        langMap.put(&quot;ko&quot;, &quot;Korean&quot;);\n        langMap.put(&quot;la&quot;, &quot;Latin&quot;);\n        langMap.put(&quot;lo&quot;, &quot;Lao&quot;);\n        langMap.put(&quot;lt&quot;, &quot;Lithuanian&quot;);\n        langMap.put(&quot;lv&quot;, &quot;Latvian&quot;);\n        langMap.put(&quot;ma&quot;, &quot;Punjabi&quot;);\n        langMap.put(&quot;mg&quot;, &quot;Malagasy&quot;);\n        langMap.put(&quot;mi&quot;, &quot;Maori&quot;);\n        langMap.put(&quot;mk&quot;, &quot;Macedonian&quot;);\n        langMap.put(&quot;ml&quot;, &quot;Malayalam&quot;);\n        langMap.put(&quot;mn&quot;, &quot;Mongolian&quot;);\n        langMap.put(&quot;mr&quot;, &quot;Marathi&quot;);\n        langMap.put(&quot;ms&quot;, &quot;Malay&quot;);\n        langMap.put(&quot;mt&quot;, &quot;Maltese&quot;);\n        langMap.put(&quot;my&quot;, &quot;Myanmar (Burmese)&quot;);\n        langMap.put(&quot;ne&quot;, &quot;Nepali&quot;);\n        langMap.put(&quot;nl&quot;, &quot;Dutch&quot;);\n        langMap.put(&quot;no&quot;, &quot;Norwegian&quot;);\n        langMap.put(&quot;ny&quot;, &quot;Chichewa&quot;);\n        langMap.put(&quot;pl&quot;, &quot;Polish&quot;);\n        langMap.put(&quot;pt&quot;, &quot;Portuguese&quot;);\n        langMap.put(&quot;ro&quot;, &quot;Romanian&quot;);\n        langMap.put(&quot;ru&quot;, &quot;Russian&quot;);\n        langMap.put(&quot;si&quot;, &quot;Sinhala&quot;);\n        langMap.put(&quot;sk&quot;, &quot;Slovak&quot;);\n        langMap.put(&quot;sl&quot;, &quot;Slovenian&quot;);\n        langMap.put(&quot;so&quot;, &quot;Somali&quot;);\n        langMap.put(&quot;sq&quot;, &quot;Albanian&quot;);\n        langMap.put(&quot;sr&quot;, &quot;Serbian&quot;);\n        langMap.put(&quot;st&quot;, &quot;Sesotho&quot;);\n        langMap.put(&quot;su&quot;, &quot;Sudanese&quot;);\n        langMap.put(&quot;sv&quot;, &quot;Swedish&quot;);\n        langMap.put(&quot;sw&quot;, &quot;Swahili&quot;);\n        langMap.put(&quot;ta&quot;, &quot;Tamil&quot;);\n        langMap.put(&quot;te&quot;, &quot;Telugu&quot;);\n        langMap.put(&quot;tg&quot;, &quot;Tajik&quot;);\n        langMap.put(&quot;th&quot;, &quot;Thai&quot;);\n        langMap.put(&quot;tl&quot;, &quot;Filipino&quot;);\n        langMap.put(&quot;tr&quot;, &quot;Turkish&quot;);\n        langMap.put(&quot;uk&quot;, &quot;Ukrainian&quot;);\n        langMap.put(&quot;ur&quot;, &quot;Urdu&quot;);\n        langMap.put(&quot;uz&quot;, &quot;Uzbek&quot;);\n        langMap.put(&quot;vi&quot;, &quot;Vietnamese&quot;);\n        langMap.put(&quot;yi&quot;, &quot;Yiddish&quot;);\n        langMap.put(&quot;yo&quot;, &quot;Yoruba&quot;);\n        langMap.put(&quot;zcn&quot;, &quot;Chinese Simplified&quot;);\n        langMap.put(&quot;zct&quot;, &quot;Chinese Traditional&quot;);\n        langMap.put(&quot;zu&quot;, &quot;Zulu&quot;);\n        //&lt;/editor-fold&gt;\n\n        // Ensure supplied FROM/TO Language spec's are in lowercase.\n        fromLang = fromLang.toLowerCase();\n        toLang = toLang.toLowerCase();\n\n        boolean foundLang = false;\n        // If only the FROM language abrieviation (map key) is provided...\n        // fromLang parameter...\n        if (fromLang.length() &lt; 4) {\n            if (!langMap.containsKey(fromLang.toLowerCase())) {\n                return &quot;ERROR! Can not locate specified 'FROM' Language! --&gt; (&quot; + fromLang + &quot;)&quot;;\n            }\n        }\n        // If full FROM language Name (map value) is provided...\n        else {\n            String value = fromLang;\n            for (Map.Entry&lt;String, String&gt; entry : langMap.entrySet()) {\n                if (value.equalsIgnoreCase(entry.getValue())) {\n                    fromLang = entry.getKey();\n                    foundLang = true;\n                    break; //breaking because its one to one map\n                }\n            }\n            if (!foundLang) {\n                return &quot;ERROR! Can not locate specified 'FROM' Language! --&gt; (&quot; + fromLang + &quot;)&quot;;\n            }\n        }\n        // If only the TO language abrieviation (map key) is provided... \n        // toLang parameter...\n        foundLang = false;\n        if (toLang.length() &lt; 4) {\n            if (!langMap.containsKey(toLang)) {\n                return &quot;ERROR! Can not locate specified 'TO' Language! --&gt; (&quot; + toLang + &quot;)&quot;;\n            }\n        }\n        // If full TO language Name (map value) is provided...\n        else {\n            String value = toLang;\n            for (Map.Entry&lt;String, String&gt; entry : langMap.entrySet()) {\n                if (value.equalsIgnoreCase(entry.getValue())) {\n                    toLang = entry.getKey();\n                    foundLang = true;\n                    break; //breaking because its one to one map\n                }\n            }\n            if (!foundLang) {\n                return &quot;ERROR! Can not locate specified 'TO' Language! --&gt; (&quot; + toLang + &quot;)&quot;;\n            }\n        }\n        if (fromLang.equalsIgnoreCase(&quot;zcn&quot;)) {\n            fromLang = &quot;zh-CN&quot;;\n        }\n        else if (fromLang.equalsIgnoreCase(&quot;zct&quot;)) {\n            fromLang = &quot;zh-CT&quot;;\n        }\n        if (toLang.equalsIgnoreCase(&quot;zcn&quot;)) {\n            toLang = &quot;zh-CN&quot;;\n        }\n        else if (toLang.equalsIgnoreCase(&quot;zct&quot;)) {\n            toLang = &quot;zh-CT&quot;;\n        }\n\n        String jsonPayload = new StringBuilder()\n                .append(&quot;{&quot;)\n                .append(&quot;\\&quot;fromLang\\&quot;:\\&quot;&quot;)\n                .append(fromLang)\n                .append(&quot;\\&quot;,&quot;)\n                .append(&quot;\\&quot;toLang\\&quot;:\\&quot;&quot;)\n                .append(toLang)\n                .append(&quot;\\&quot;,&quot;)\n                .append(&quot;\\&quot;text\\&quot;:\\&quot;&quot;)\n                .append(textToTranslate)\n                .append(&quot;\\&quot;&quot;)\n                .append(&quot;}&quot;)\n                .toString();\n\n        URL url = new URL(&quot;http://api.whatsmate.net/v1/translation/translate&quot;);\n        HttpURLConnection conn = (HttpURLConnection) url.openConnection();\n        conn.setDoOutput(true);\n        conn.setRequestMethod(&quot;POST&quot;);\n        conn.setRequestProperty(&quot;X-WM-CLIENT-ID&quot;, &quot;FREE_TRIAL_ACCOUNT&quot;);\n        conn.setRequestProperty(&quot;X-WM-CLIENT-SECRET&quot;, &quot;PUBLIC_SECRET&quot;);\n        conn.setRequestProperty(&quot;Content-Type&quot;, &quot;application/json&quot;);\n\n        // 'Try With Resources' used here to auto-close stream.\n        try (OutputStream os = conn.getOutputStream()) {\n            os.write(jsonPayload.getBytes());\n            os.flush();\n        }\n\n        int statusCode = conn.getResponseCode();\n        // System.out.println(&quot;Status Code: &quot; + statusCode);\n        BufferedReader br = new BufferedReader(new InputStreamReader(\n                (statusCode == 200) ? conn.getInputStream() : conn.getErrorStream()\n        ));\n\n        String output;\n        StringBuilder sb = new StringBuilder();\n        while ((output = br.readLine()) != null) {\n            sb.append(output).append(System.lineSeparator());\n        }\n        return sb.toString();\n    }\n    \n}\n</code></pre>\n"}],"owner":{"account_id":13676551,"reputation":71,"user_id":11647767,"display_name":"Gulammustufa Momin"},"comment_count":9,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":330,"favorite_count":0,"down_vote_count":3,"up_vote_count":1,"answer_count":1,"score":-2,"last_activity_date":1682362078,"creation_date":1678607530,"question_id":75711741,"body_markdown":"Here is my code.\r\n\r\n    Faker faker = new Faker(new Locale(&quot;en-GB&quot;));\r\n    String title = faker.lorem().sentence(3);\r\n    System.out.println(&quot;title = &quot; + title);\r\n\r\nThe output is as below.\r\n\r\n    title = Ut at quis corrupti explicabo.\r\nI checked in google translate. It is in the Latin language. How can I get the sentence in the English language?","title":"Why java faker generating sentence in Latin language. I need in English language","body":"<p>Here is my code.</p>\n<pre><code>Faker faker = new Faker(new Locale(&quot;en-GB&quot;));\nString title = faker.lorem().sentence(3);\nSystem.out.println(&quot;title = &quot; + title);\n</code></pre>\n<p>The output is as below.</p>\n<pre><code>title = Ut at quis corrupti explicabo.\n</code></pre>\n<p>I checked in google translate. It is in the Latin language. How can I get the sentence in the English language?</p>\n"},{"tags":["java","arrays","arraylist","dynamic-programming"],"comments":[{"owner":{"account_id":16001561,"reputation":3061,"user_id":11548057,"display_name":"joshmeranda"},"score":1,"creation_date":1598107922,"post_id":63537467,"comment_id":112353076,"body_markdown":"please add  the runtime exception you are receiving to your question","body":"please add  the runtime exception you are receiving to your question"},{"owner":{"account_id":19254723,"reputation":2061,"user_id":14071914,"display_name":"JustAnotherDeveloper"},"score":0,"creation_date":1598107937,"post_id":63537467,"comment_id":112353080,"body_markdown":"What runtime error are you getting and what line triggers it? Please post the entire stack trace.","body":"What runtime error are you getting and what line triggers it? Please post the entire stack trace."}],"answers":[{"tags":[],"owner":{"account_id":12819454,"reputation":2082,"user_id":9274948,"display_name":"Hawk"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1598109054,"creation_date":1598108138,"answer_id":63537573,"question_id":63537467,"body_markdown":"You are declaring `int prefix_sum=0;` and `int suffix_sum=0;` as fields, not as local variables of the respective methods.\r\n\r\nYou are calling `suffix(A.size()-(B-i))` so with your example that is `10 - (4 -i)` which is `6 + i`. You iterate through `i` being in the range {0, ..., 10} so the value `6 + i` will be all the numbers 6 through 16. You cannot index in the array above 9, so you get an exception.\r\n\r\nYou need to change\r\n```\r\nfor(int i=0;i&lt;A.size();i++){\r\n```\r\nto\r\n```\r\nfor(int i=0; i &lt;= B; i++){\r\n```\r\nbecause you are trying to ask each iteration &quot;how many numbers are taken from the beginning&quot;? 0, 1, 2, 3 or 4 if B is 4\r\n\r\n\r\n---\r\nOther upgrades:\r\n1. You are calling `suffix(A.size()-(B-i))+prefix(i-1))` twice in a row. Call it only once, store it in a variable and reuse.\r\n\r\n2. You are calling `prefix(i-1)` but inside prefix() you are using the parameter `a` as `a + 1`. You don&#39;t need to subtract one and add one to the same thing","title":"Pick from both sides?","body":"<p>You are declaring <code>int prefix_sum=0;</code> and <code>int suffix_sum=0;</code> as fields, not as local variables of the respective methods.</p>\n<p>You are calling <code>suffix(A.size()-(B-i))</code> so with your example that is <code>10 - (4 -i)</code> which is <code>6 + i</code>. You iterate through <code>i</code> being in the range {0, ..., 10} so the value <code>6 + i</code> will be all the numbers 6 through 16. You cannot index in the array above 9, so you get an exception.</p>\n<p>You need to change</p>\n<pre><code>for(int i=0;i&lt;A.size();i++){\n</code></pre>\n<p>to</p>\n<pre><code>for(int i=0; i &lt;= B; i++){\n</code></pre>\n<p>because you are trying to ask each iteration &quot;how many numbers are taken from the beginning&quot;? 0, 1, 2, 3 or 4 if B is 4</p>\n<hr />\n<p>Other upgrades:</p>\n<ol>\n<li><p>You are calling <code>suffix(A.size()-(B-i))+prefix(i-1))</code> twice in a row. Call it only once, store it in a variable and reuse.</p>\n</li>\n<li><p>You are calling <code>prefix(i-1)</code> but inside prefix() you are using the parameter <code>a</code> as <code>a + 1</code>. You don't need to subtract one and add one to the same thing</p>\n</li>\n</ol>\n"},{"tags":[],"owner":{"account_id":6174988,"reputation":11040,"user_id":4812170,"accept_rate":73,"display_name":"vaquar khan"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1604214263,"creation_date":1604212986,"answer_id":64629329,"question_id":63537467,"body_markdown":"\t\tpackage com.array;\r\n\r\n\t\timport java.util.Arrays;\r\n\t\timport java.util.List;\r\n\r\n\t\tpublic class PickFromBothSides {\r\n\r\n\t\t\tpublic static void main(String[] args) {\r\n\t\t\t\tInteger[] arr = { 5, -2, 3, 1, 2 };\r\n\t\t\t\tSystem.out.println(solve(Arrays.asList(arr), 3));\r\n\r\n\t\t\t}\r\n\r\n\t\t\tpublic static int solve(List&lt;Integer&gt; A, int B) {\r\n\r\n\t\t\t\tint n = A.size();\r\n\r\n\t\t\t\tint result = 0;\r\n\r\n\t\t\t\tfor (int i = 0; i &lt; B; i++) {\r\n\t\t\t\t\tresult += A.get(i);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tint sum = result;\r\n\r\n\t\t\t\tfor (int i = 0; i &lt; B; i++) {\r\n\t\t\t\t\tsum -= A.get(B - 1 - i);\r\n\t\t\t\t\tsum += A.get(n - 1 - i);\r\n\r\n\t\t\t\t\tresult = Math.max(result, sum);\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn result;\r\n\r\n\t\t\t}\r\n\t\t}\r\n\r\nRuntime O(n) \r\nSpace complexity O(1)","title":"Pick from both sides?","body":"<pre><code>    package com.array;\n\n    import java.util.Arrays;\n    import java.util.List;\n\n    public class PickFromBothSides {\n\n        public static void main(String[] args) {\n            Integer[] arr = { 5, -2, 3, 1, 2 };\n            System.out.println(solve(Arrays.asList(arr), 3));\n\n        }\n\n        public static int solve(List&lt;Integer&gt; A, int B) {\n\n            int n = A.size();\n\n            int result = 0;\n\n            for (int i = 0; i &lt; B; i++) {\n                result += A.get(i);\n            }\n\n            int sum = result;\n\n            for (int i = 0; i &lt; B; i++) {\n                sum -= A.get(B - 1 - i);\n                sum += A.get(n - 1 - i);\n\n                result = Math.max(result, sum);\n            }\n\n            return result;\n\n        }\n    }\n</code></pre>\n<p>Runtime O(n)\nSpace complexity O(1)</p>\n"},{"tags":[],"owner":{"account_id":15390263,"reputation":1,"user_id":11103218,"display_name":"Anshraj Shrivastava"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1682361738,"creation_date":1682361689,"answer_id":76095096,"question_id":63537467,"body_markdown":"PFB another approach to solve this problem(in Python3):\r\n\r\n     def solve(A, B):\r\n            left = [0]\r\n            for i in range(B):\r\n                left.append(left[-1]+A[i])\r\n            right = [0]\r\n            for i in range(B):\r\n                right.append(right[-1]+A[len(A)-i-1])\r\n            for i in range(B+1):\r\n                left[i] += right[B-i]\r\n            return max(left)\r\n\r\nHere I created a cumulative sum (or prefix and suffix sum) of B number of elements from the left and right sides of array A, Then added the sum of the first element of the left with the last element of the right. Thus finally returned the max of them.\r\n        \r\n            ","title":"Pick from both sides?","body":"<p>PFB another approach to solve this problem(in Python3):</p>\n<pre><code> def solve(A, B):\n        left = [0]\n        for i in range(B):\n            left.append(left[-1]+A[i])\n        right = [0]\n        for i in range(B):\n            right.append(right[-1]+A[len(A)-i-1])\n        for i in range(B+1):\n            left[i] += right[B-i]\n        return max(left)\n</code></pre>\n<p>Here I created a cumulative sum (or prefix and suffix sum) of B number of elements from the left and right sides of array A, Then added the sum of the first element of the left with the last element of the right. Thus finally returned the max of them.</p>\n"}],"owner":{"account_id":15415633,"reputation":31,"user_id":14148366,"display_name":" helloworld"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":9308,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":3,"score":1,"last_activity_date":1682361738,"creation_date":1598107656,"question_id":63537467,"body_markdown":"The problem statement is :\r\nGiven an integer array A of size N.\r\n\r\nYou can pick B elements from either left or right end of the array A to get maximum sum.\r\nFind and return this maximum possible sum.\r\n\r\nNOTE: Suppose B = 4 and array A contains 10 elements then:\r\n\r\nYou can pick first four elements or can pick last four elements or can pick 1 from front and 3 from back etc . you need to return the maximum possible sum of elements you can pick.\r\n\r\n    public class Solution {\r\n    ArrayList&lt;Integer&gt; c = new ArrayList&lt;&gt;();\r\n    ArrayList&lt;Integer&gt; A= new ArrayList&lt;&gt;();\r\n    public int solve(ArrayList&lt;Integer&gt; A, int B) {\r\n       \r\n        if (B&gt;A.size()){\r\n            int sum=0;\r\n            for(int i=0;i&lt;A.size();i++)\r\n             sum= sum+A.get(i);\r\n            return sum;\r\n        }\r\n    \r\n       int max_sum=0;\r\n     for(int i=0;i&lt;A.size();i++){\r\n      if((max_sum&lt;suffix(A.size()-(B-i))+prefix(i-1)) ){\r\n           max_sum=suffix(A.size()-(B-i))+prefix(i-1);\r\n         }\r\n        }\r\n        return max_sum;\r\n    }\r\n        \r\n        int prefix_sum=0;\r\n      int prefix(int a)   {\r\n          \r\n           for(int p=0;p&lt;a+1;p++){\r\n               c=A;\r\n                prefix_sum=prefix_sum + c.get(p);\r\n                }\r\n              return prefix_sum;\r\n                         }\r\n    \r\n               int suffix_sum=0;\r\n               int suffix(int b){\r\n                   c=A;\r\n            for(int q=b;q&lt;c.size();q++){\r\n               suffix_sum=suffix_sum+c.get(q);\r\n              }\r\n                return suffix_sum;\r\n             }\r\n}\r\n\r\n\r\n\r\n\r\n\r\n\r\nI am getting runtime error, I have tried to implement the suffix and prefix methods which return the sum from the index[ 0, i] and sum from [i, N-i] respectively, then in the solve function I am trying to find the sum of prefix [a-1] +suffix[N-(b-a)] and find out the maximum sum, the syntax is completely correct, there is something wrong with the logic I assume, please help me find the correct solution by correcting this code instead of providing an alternative method","title":"Pick from both sides?","body":"<p>The problem statement is :\nGiven an integer array A of size N.</p>\n<p>You can pick B elements from either left or right end of the array A to get maximum sum.\nFind and return this maximum possible sum.</p>\n<p>NOTE: Suppose B = 4 and array A contains 10 elements then:</p>\n<p>You can pick first four elements or can pick last four elements or can pick 1 from front and 3 from back etc . you need to return the maximum possible sum of elements you can pick.</p>\n<pre><code>public class Solution {\nArrayList&lt;Integer&gt; c = new ArrayList&lt;&gt;();\nArrayList&lt;Integer&gt; A= new ArrayList&lt;&gt;();\npublic int solve(ArrayList&lt;Integer&gt; A, int B) {\n   \n    if (B&gt;A.size()){\n        int sum=0;\n        for(int i=0;i&lt;A.size();i++)\n         sum= sum+A.get(i);\n        return sum;\n    }\n\n   int max_sum=0;\n for(int i=0;i&lt;A.size();i++){\n  if((max_sum&lt;suffix(A.size()-(B-i))+prefix(i-1)) ){\n       max_sum=suffix(A.size()-(B-i))+prefix(i-1);\n     }\n    }\n    return max_sum;\n}\n    \n    int prefix_sum=0;\n  int prefix(int a)   {\n      \n       for(int p=0;p&lt;a+1;p++){\n           c=A;\n            prefix_sum=prefix_sum + c.get(p);\n            }\n          return prefix_sum;\n                     }\n\n           int suffix_sum=0;\n           int suffix(int b){\n               c=A;\n        for(int q=b;q&lt;c.size();q++){\n           suffix_sum=suffix_sum+c.get(q);\n          }\n            return suffix_sum;\n         }\n</code></pre>\n<p>}</p>\n<p>I am getting runtime error, I have tried to implement the suffix and prefix methods which return the sum from the index[ 0, i] and sum from [i, N-i] respectively, then in the solve function I am trying to find the sum of prefix [a-1] +suffix[N-(b-a)] and find out the maximum sum, the syntax is completely correct, there is something wrong with the logic I assume, please help me find the correct solution by correcting this code instead of providing an alternative method</p>\n"},{"tags":["python","java","pandas","log4j","data-processing"],"owner":{"account_id":27260181,"reputation":15,"user_id":20783127,"display_name":"shrikant02"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":37,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1682361305,"creation_date":1682340260,"question_id":76092027,"body_markdown":"I am building a application, in which I will read multiple logs and analyse the process and calls which are taking more time.\r\nIt is a multithreaded application, so the logs are not in order as shown below\r\n\r\n    2023.03.24 04:47:14,334 [INFO   ]  pool-499263-thread-13 GetRequestHandler: Sending GET request to SomeService http://{ request - url }/20114\r\n    2023.03.24 04:47:14,338 [INFO   ]  pool-499263-thread-10 GetRequestHandler: Response received from SomeService.\r\n    2023.03.24 04:47:14,338 [ERROR  ]  pool-499263-thread-10 SomeServiceAdapter: Error no result obtained 20897\r\n    2023.03.24 04:47:14,357 [INFO   ]  pool-499263-thread-12 GetRequestHandler: Sending GET request to SomeService http://{ request - url }/20806\r\n    2023.03.24 04:47:14,359 [INFO   ]  pool-499263-thread-11 GetRequestHandler: Response received from SomeService.\r\n    2023.03.24 04:47:14,377 [INFO   ]  pool-499263-thread-14 GetRequestHandler: Sending GET request to SomeService http://{ request - url }/20115\r\n    2023.03.24 04:47:14,382 [INFO   ]  pool-499263-thread-13 GetRequestHandler: Response received from SomeService.\r\n    2023.03.24 04:47:14,398 [INFO   ]  pool-499263-thread-15 GetRequestHandler: Sending GET request to SomeService http://{ request - url }/20116\r\n    2023.03.24 04:47:14,406 [INFO   ]  pool-499263-thread-12 GetRequestHandler: Response received from SomeService.\r\n    2023.03.24 04:47:14,419 [INFO   ]  pool-499263-thread-16 GetRequestHandler: Sending GET request to SomeService http://{ request - url }/12064\r\n    2023.03.24 04:47:14,426 [INFO   ]  pool-499263-thread-14 GetRequestHandler: Response received from SomeService.\r\n    2023.03.24 04:47:14,426 [ERROR  ]  pool-499263-thread-14 SomeServiceAdapter: Error no result obtained 20115\r\n    2023.03.24 04:47:14,442 [INFO   ]  pool-499263-thread-17 GetRequestHandler: Sending GET request to SomeService http://{ request - url }/20110\r\n    2023.03.24 04:47:14,447 [INFO   ]  pool-499263-thread-15 GetRequestHandler: Response received from SomeService.\r\n    2023.03.24 04:47:14,463 [INFO   ]  pool-499263-thread-18 GetRequestHandler: Sending GET request to SomeService http://{ request - url }/20111\r\n    2023.03.24 04:47:14,468 [INFO   ]  pool-499263-thread-16 GetRequestHandler: Response received from SomeService.\r\n    2023.03.24 04:47:14,468 [ERROR  ]  pool-499263-thread-16 SomeServiceAdapter: Error no result obtained for 12064\r\n\r\n\r\n\r\nAs you can see the GET request to the service was executed by thread 13 and response for same request was received after 4-5 lines. I exported all the logs in pandas dataframe, and will use time of the logs to calculate the time taken by particular call. For that I need to group the logs of same call together and then subtract the times to calculate the difference.\r\n\r\n\r\nI can&#39;t think of any way to group the logs of same call together.\r\n\r\nThe snippet given below is how I want my logs to be shown. I want the threads in ascending order grouped by their own ID. The number following http:{...}/ is the ID of that process.\r\n\r\n    thread-1 Sending GET request to SomeService http:{.....}/12424 \r\n    thread-1 Response received from SomeService.\r\n    thread-2 Sending GET request to SomeService http:{....}/12344\r\n    thread-2 Error no result found 12344\r\n\r\nThere is no ID provided whenever a response is received successfully whereas an ID is provided for errors.  ","title":"Group log data based on threads","body":"<p>I am building a application, in which I will read multiple logs and analyse the process and calls which are taking more time.\nIt is a multithreaded application, so the logs are not in order as shown below</p>\n<pre><code>2023.03.24 04:47:14,334 [INFO   ]  pool-499263-thread-13 GetRequestHandler: Sending GET request to SomeService http://{ request - url }/20114\n2023.03.24 04:47:14,338 [INFO   ]  pool-499263-thread-10 GetRequestHandler: Response received from SomeService.\n2023.03.24 04:47:14,338 [ERROR  ]  pool-499263-thread-10 SomeServiceAdapter: Error no result obtained 20897\n2023.03.24 04:47:14,357 [INFO   ]  pool-499263-thread-12 GetRequestHandler: Sending GET request to SomeService http://{ request - url }/20806\n2023.03.24 04:47:14,359 [INFO   ]  pool-499263-thread-11 GetRequestHandler: Response received from SomeService.\n2023.03.24 04:47:14,377 [INFO   ]  pool-499263-thread-14 GetRequestHandler: Sending GET request to SomeService http://{ request - url }/20115\n2023.03.24 04:47:14,382 [INFO   ]  pool-499263-thread-13 GetRequestHandler: Response received from SomeService.\n2023.03.24 04:47:14,398 [INFO   ]  pool-499263-thread-15 GetRequestHandler: Sending GET request to SomeService http://{ request - url }/20116\n2023.03.24 04:47:14,406 [INFO   ]  pool-499263-thread-12 GetRequestHandler: Response received from SomeService.\n2023.03.24 04:47:14,419 [INFO   ]  pool-499263-thread-16 GetRequestHandler: Sending GET request to SomeService http://{ request - url }/12064\n2023.03.24 04:47:14,426 [INFO   ]  pool-499263-thread-14 GetRequestHandler: Response received from SomeService.\n2023.03.24 04:47:14,426 [ERROR  ]  pool-499263-thread-14 SomeServiceAdapter: Error no result obtained 20115\n2023.03.24 04:47:14,442 [INFO   ]  pool-499263-thread-17 GetRequestHandler: Sending GET request to SomeService http://{ request - url }/20110\n2023.03.24 04:47:14,447 [INFO   ]  pool-499263-thread-15 GetRequestHandler: Response received from SomeService.\n2023.03.24 04:47:14,463 [INFO   ]  pool-499263-thread-18 GetRequestHandler: Sending GET request to SomeService http://{ request - url }/20111\n2023.03.24 04:47:14,468 [INFO   ]  pool-499263-thread-16 GetRequestHandler: Response received from SomeService.\n2023.03.24 04:47:14,468 [ERROR  ]  pool-499263-thread-16 SomeServiceAdapter: Error no result obtained for 12064\n</code></pre>\n<p>As you can see the GET request to the service was executed by thread 13 and response for same request was received after 4-5 lines. I exported all the logs in pandas dataframe, and will use time of the logs to calculate the time taken by particular call. For that I need to group the logs of same call together and then subtract the times to calculate the difference.</p>\n<p>I can't think of any way to group the logs of same call together.</p>\n<p>The snippet given below is how I want my logs to be shown. I want the threads in ascending order grouped by their own ID. The number following http:{...}/ is the ID of that process.</p>\n<pre><code>thread-1 Sending GET request to SomeService http:{.....}/12424 \nthread-1 Response received from SomeService.\nthread-2 Sending GET request to SomeService http:{....}/12344\nthread-2 Error no result found 12344\n</code></pre>\n<p>There is no ID provided whenever a response is received successfully whereas an ID is provided for errors.</p>\n"},{"tags":["java","double"],"comments":[{"owner":{"account_id":11683,"reputation":1438179,"user_id":22656,"accept_rate":86,"display_name":"Jon Skeet"},"score":4,"creation_date":1682354304,"post_id":76094121,"comment_id":134198373,"body_markdown":"See https://stackoverflow.com/questions/588004 for why this happens. Please show what you&#39;ve *tried* with BigDecimal.","body":"See <a href=\"https://stackoverflow.com/questions/588004\">stackoverflow.com/questions/588004</a> for why this happens. Please show what you&#39;ve <i>tried</i> with BigDecimal."},{"owner":{"account_id":16878,"reputation":306143,"user_id":37213,"accept_rate":81,"display_name":"duffymo"},"score":1,"creation_date":1682354586,"post_id":76094121,"comment_id":134198439,"body_markdown":"Why not just use doubles and rounding?  Why is it necessary to improve on IEEE floating point arithmetic to add 12.69 to 15.99?  Seems silly.  The underlying problem is that you cannot represent 0.1 exactly in binary any more than you can 1/3 in decimal.","body":"Why not just use doubles and rounding?  Why is it necessary to improve on IEEE floating point arithmetic to add 12.69 to 15.99?  Seems silly.  The underlying problem is that you cannot represent 0.1 exactly in binary any more than you can 1/3 in decimal."},{"owner":{"account_id":6606677,"reputation":1024,"user_id":5103317,"display_name":"Old Dog Programmer"},"score":1,"creation_date":1682355530,"post_id":76094121,"comment_id":134198664,"body_markdown":"Depending on  your application, you might be able to use rounding with [number formatting](https://docs.oracle.com/javase/tutorial/java/data/numberformat.html). If you need precision, as you would with monetary units, for example, you would use BigDecimal. Since you are not familiar with it, you should reference the [`BigDecimal` API](https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/math/BigDecimal.html) .","body":"Depending on  your application, you might be able to use rounding with <a href=\"https://docs.oracle.com/javase/tutorial/java/data/numberformat.html\" rel=\"nofollow noreferrer\">number formatting</a>. If you need precision, as you would with monetary units, for example, you would use BigDecimal. Since you are not familiar with it, you should reference the <a href=\"https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/math/BigDecimal.html\" rel=\"nofollow noreferrer\"><code>BigDecimal</code> API</a> ."},{"owner":{"account_id":6606677,"reputation":1024,"user_id":5103317,"display_name":"Old Dog Programmer"},"score":0,"creation_date":1682356916,"post_id":76094121,"comment_id":134198990,"body_markdown":"It might help to look for other questions tagged `java` and `bigdecimal`:  https://stackoverflow.com/questions/tagged/java+bigdecimal","body":"It might help to look for other questions tagged <code>java</code> and <code>bigdecimal</code>:  <a href=\"https://stackoverflow.com/questions/tagged/java+bigdecimal\">stackoverflow.com/questions/tagged/java+bigdecimal</a>"},{"owner":{"account_id":9359310,"reputation":3767,"user_id":7245145,"accept_rate":100,"display_name":"Steffi Keran Rani J"},"score":0,"creation_date":1682358464,"post_id":76094121,"comment_id":134199349,"body_markdown":"Could you take a look at the answer and let know if that&#39;s what you expected?","body":"Could you take a look at the answer and let know if that&#39;s what you expected?"},{"owner":{"account_id":1689973,"reputation":37280,"user_id":1552534,"display_name":"WJS"},"score":0,"creation_date":1682359330,"post_id":76094121,"comment_id":134199550,"body_markdown":"I get the expected answer  `(28.68)` for both `Double.parseDouble()` and `Double.valueOf()`.  Please post the code that is giving you the answer as you described it.","body":"I get the expected answer  <code>(28.68)</code> for both <code>Double.parseDouble()</code> and <code>Double.valueOf()</code>.  Please post the code that is giving you the answer as you described it."}],"answers":[{"tags":[],"owner":{"account_id":9359310,"reputation":3767,"user_id":7245145,"accept_rate":100,"display_name":"Steffi Keran Rani J"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1682358412,"creation_date":1682358412,"answer_id":76094695,"question_id":76094121,"body_markdown":"I tried with `parseDouble`, `DecimalFormat` and it was able to provide me expected answer.\r\n\r\n### src\r\n\r\n\r\n    package org.example;\r\n    \r\n    import java.math.RoundingMode;\r\n    import java.text.DecimalFormat;\r\n    \r\n    import static java.lang.Double.parseDouble;\r\n    \r\n    public class JavaExercise {\r\n    \r\n        public JavaExercise() {\r\n            System.out.println(&quot;Hi&quot;);\r\n        }\r\n   \r\n    \r\n        Double addDouble(String a, String b){\r\n            DecimalFormat df = new DecimalFormat(&quot;#.##&quot;);\r\n            df.setRoundingMode(RoundingMode.FLOOR);\r\n            Double sum = parseDouble(a)+parseDouble(b);\r\n            return  parseDouble(df.format(sum));\r\n        }\r\n    }\r\n\r\n\r\n### test (Passed)\r\n\r\n    package org.example;\r\n    \r\n    import org.junit.jupiter.api.BeforeEach;\r\n    import org.junit.jupiter.api.Test;\r\n    \r\n    import static org.junit.jupiter.api.Assertions.*;\r\n    \r\n    class JavaExerciseTest {\r\n    \r\n        JavaExercise javaExercise;\r\n    \r\n        @BeforeEach\r\n        void init(){\r\n            javaExercise = new JavaExercise();\r\n        }\r\n    \r\n    \r\n        @Test\r\n        public void testDouble(){\r\n            Double actual = javaExercise.addDouble(&quot;12.69&quot;, &quot;15.99&quot;);\r\n            Double expected = 28.68;\r\n            assertEquals(expected, actual);\r\n        }\r\n    \r\n        @Test\r\n        public void testLongDouble(){\r\n            Double actual = javaExercise.addDouble(&quot;12.690990&quot;, &quot;15.909990&quot;);\r\n            Double expected = 28.60;\r\n            assertEquals(expected, actual);\r\n        }\r\n    }","title":"Java: can&#39;t get exact sum of doubles","body":"<p>I tried with <code>parseDouble</code>, <code>DecimalFormat</code> and it was able to provide me expected answer.</p>\n<h3>src</h3>\n<pre><code>package org.example;\n\nimport java.math.RoundingMode;\nimport java.text.DecimalFormat;\n\nimport static java.lang.Double.parseDouble;\n\npublic class JavaExercise {\n\n    public JavaExercise() {\n        System.out.println(&quot;Hi&quot;);\n    }\n\n\n    Double addDouble(String a, String b){\n        DecimalFormat df = new DecimalFormat(&quot;#.##&quot;);\n        df.setRoundingMode(RoundingMode.FLOOR);\n        Double sum = parseDouble(a)+parseDouble(b);\n        return  parseDouble(df.format(sum));\n    }\n}\n</code></pre>\n<h3>test (Passed)</h3>\n<pre><code>package org.example;\n\nimport org.junit.jupiter.api.BeforeEach;\nimport org.junit.jupiter.api.Test;\n\nimport static org.junit.jupiter.api.Assertions.*;\n\nclass JavaExerciseTest {\n\n    JavaExercise javaExercise;\n\n    @BeforeEach\n    void init(){\n        javaExercise = new JavaExercise();\n    }\n\n\n    @Test\n    public void testDouble(){\n        Double actual = javaExercise.addDouble(&quot;12.69&quot;, &quot;15.99&quot;);\n        Double expected = 28.68;\n        assertEquals(expected, actual);\n    }\n\n    @Test\n    public void testLongDouble(){\n        Double actual = javaExercise.addDouble(&quot;12.690990&quot;, &quot;15.909990&quot;);\n        Double expected = 28.60;\n        assertEquals(expected, actual);\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":401843,"reputation":89768,"user_id":768644,"display_name":"rzwitserloot"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1682360743,"creation_date":1682360743,"answer_id":76094986,"question_id":76094121,"body_markdown":"This answer comes in three parts:\r\n\r\n* Explanation of why doubles are inaccurate and why that isn&#39;t easily fixable.\r\n* The strategy that _usually_ results in the &#39;right&#39; answer with double math, and would in your case, but which has no particular guarantees\r\n* An explanation of how to use BigDecimal which does get you that guarantee, at the cost of other issues\r\n\r\n# Doubles are inaccurate\r\n\r\nTake a piece of paper.\r\n\r\nWrite down the result of 1 divided by 5. Write it down in decimal form. You&#39;ll write &quot;0.2&quot; and hand it back to me.\r\n\r\nSo far, so good.\r\n\r\nNow do the same thing, but this time, write down 1 divided by 3.\r\n\r\nYou&#39;ll find that this is not possible. You write 0.333333... and eventually you run out of space on the paper to write more threes. You hand it back to me and the number is very slightly inaccurate.\r\n\r\n`double` is __the same thing__. Except, computers are decimal. The reason 1/5 fits and 1/3 does not fit, is because we are writing in decimal (base 10), and 5 &#39;fits nicely&#39; in 10, but 3 does not. For the same reason, you can write down 1/2 (0.5 - because 2 fits in 10). Explaining why 1/4 fits is slightly more problematic (4 does not fit nicely into 10, but once you write down the part that does fit, which is 1/5, 1/20th is left, and 20 does fit nicely into 10) - but the same principle applies.\r\n\r\nComputers count in base 2. That&#39;s quite annoying - whereas the things that divide nicely into 10 is 1, 2, 5, 10, and anything that can be broken down into factors of those numbers, with base 2 it&#39;s _just_ 1 and 2. So 1/2, 1/4, 1/8, 5/16 - those all fit &#39;perfectly&#39;, but even something as simple as 0.1 (1/10th) does not fit.\r\n\r\nWitness:\r\n\r\n```\r\ndouble v = 0.0;\r\nfor (int i = 0; i &lt; 10; i++) v += 0.1;\r\nSystem.out.println(v);\r\nSystem.out.println(1.0 == v);\r\n```\r\n\r\nThe above prints surprising results if you aren&#39;t aware of this rounding business. It does not print 1.0 (instead, 0.9999999), and it also does not print &#39;true&#39; - instead, it prints false. Which is weird.. 10 * 0.1 is obviously 1.0.\r\n\r\nThe rounding killed you here. It&#39;s identical to me asking you to write &#39;1/3&#39; on a note, do it two more times, and then asking you to add up the numbers on the 3 notes - which is no longer 1.0, but instead 0.9999999999 (not infinitely, just a lot, but a finite amount, of nines), and not equal to 1.0.\r\n\r\nA completely different way to think about it: `double` is represented by 64 bits.\r\n\r\nImagine I gave you 3 switches and the only way you can store information is by leaving the switching in an up or down state. You can &#39;remember&#39; 8 unique events: 000, 001, 010, 011, 100, 101, 110, and 111. That&#39;s it. Same with doubles, but instead of 8 (which is 2 to the 3rd power), it&#39;s a humongous number: 2 to the 64th power.\r\n\r\nBut that&#39;s still a finite amount of unique things you can remember, and there are an _infinite_ amount of numbers between 0 and 1, let alone between - and + infinity which is what double more or less oversimplified says it can represent.\r\n\r\nDoubles can actually only represent slightly fewer than 2^64 unique numbers. Let&#39;s call those the &#39;blessed&#39; numbers. For any number that isn&#39;t blessed, double math silently rounds to the nearest blessed number. The blessed numbers aren&#39;t uniformly divided: Near 1.0 there are very many, as you move away from 1.0 there are fewer and fewer.\r\n\r\n# So how do we use doubles?\r\n\r\nBy keeping in mind they have slight errors. This shows up in three ways:\r\n\r\n* When printing, always use `String.format` or similar.\r\n\r\nIf I slightly change our code above to:\r\n\r\n```\r\ndouble v = 0.0;\r\nfor (int i = 0; i &lt; 10; i++) v += 0.1;\r\nSystem.out.println(String.format(&quot;%.3f&quot;, v));\r\n```\r\n\r\nIt prints 1.000, because the double we Have (0.99999999999999764 or so) indeed rounds to 1.000 if we explicitly say: Please print with at most 3 decimal places.\r\n\r\nIt is __always__ incorrect to just print a double, anywhere, unless you explicitly want the errors rendered. Instead, always, always use some rounding as you render.\r\n\r\nWhen comparing, keep in mind the error to, and use &#39;delta comparison&#39;. Instead of asking &#39;are `a` and `b` equal&#39;, ask &#39;is the absolute difference between `a` and `b` tiny?&#39;. This is how:\r\n\r\n```\r\ndouble EPSILON = 0.0000001;\r\ndouble v = 0.0;\r\nfor (int i = 0; i &lt; 10; i++) v += 0.1;\r\nSystem.out.println(Math.abs(v - 1.0) &lt; EPSILON);\r\n```\r\n\r\nThat would print the desired `true`.\r\n\r\nBut, you&#39;re still playing with the fact that there are inaccuracies.\r\n\r\n# perfection and `BigDecimal`\r\n\r\nBigDecimal represents numbers perfectly and in decimal. The downside is, they are incredibly slow. Fortunately, computers are incredibly fast, so, that usually does not matter.\r\n\r\nThey also have all the downsides of the math itself: If you try to divide 1 by 3 in BigDecimal math, it throws an exception unless you tell it to round, which.. just gets you that rounding again. At least its controlled, but still.\r\n\r\n```\r\nBigDecimal a = new BigDecimal(&quot;12.69&quot;);\r\nBigDecimal b = new BigDecimal(&quot;15.99&quot;);\r\nBigDecimal c = a.add(b);\r\nSystem.out.println(c);\r\n```\r\n\r\nOften if you&#39;re trying to model something that has a distinct atomic unit, it&#39;s better to just store those atoms, in a `long`. For example, for most circumstances, the best way to store money is in cents. To store the bill total for 2 articles, one of which costs €15.99, the other  costs €12.69:\r\n\r\n```\r\nlong priceA = 1599;\r\nlong priceB = 1269;\r\nSystem.out.println(&quot;Bill total: €&quot; + formatCents(priceA + priceB));\r\n```\r\n\r\nworks great, where formatCents is from a library or if need be handwritten:\r\n\r\n\r\n```\r\npublic String formatCents(long v) {\r\n  boolean sign = v &gt;= 0;\r\n  if (!sign) v = -v;\r\n  int wholes = v / 100;\r\n  int parts = v % 100;\r\n  return String.format(&quot;%s%d.%02d&quot;, sign ? &quot; &quot; : &quot;-&quot;, wholes, parts);\r\n}\r\n```\r\n\r\n\r\nEvery currency has atomic units. Yen is just yen, dollars and euros have cents, even bitcoin has satoshis.\r\n","title":"Java: can&#39;t get exact sum of doubles","body":"<p>This answer comes in three parts:</p>\n<ul>\n<li>Explanation of why doubles are inaccurate and why that isn't easily fixable.</li>\n<li>The strategy that <em>usually</em> results in the 'right' answer with double math, and would in your case, but which has no particular guarantees</li>\n<li>An explanation of how to use BigDecimal which does get you that guarantee, at the cost of other issues</li>\n</ul>\n<h1>Doubles are inaccurate</h1>\n<p>Take a piece of paper.</p>\n<p>Write down the result of 1 divided by 5. Write it down in decimal form. You'll write &quot;0.2&quot; and hand it back to me.</p>\n<p>So far, so good.</p>\n<p>Now do the same thing, but this time, write down 1 divided by 3.</p>\n<p>You'll find that this is not possible. You write 0.333333... and eventually you run out of space on the paper to write more threes. You hand it back to me and the number is very slightly inaccurate.</p>\n<p><code>double</code> is <strong>the same thing</strong>. Except, computers are decimal. The reason 1/5 fits and 1/3 does not fit, is because we are writing in decimal (base 10), and 5 'fits nicely' in 10, but 3 does not. For the same reason, you can write down 1/2 (0.5 - because 2 fits in 10). Explaining why 1/4 fits is slightly more problematic (4 does not fit nicely into 10, but once you write down the part that does fit, which is 1/5, 1/20th is left, and 20 does fit nicely into 10) - but the same principle applies.</p>\n<p>Computers count in base 2. That's quite annoying - whereas the things that divide nicely into 10 is 1, 2, 5, 10, and anything that can be broken down into factors of those numbers, with base 2 it's <em>just</em> 1 and 2. So 1/2, 1/4, 1/8, 5/16 - those all fit 'perfectly', but even something as simple as 0.1 (1/10th) does not fit.</p>\n<p>Witness:</p>\n<pre><code>double v = 0.0;\nfor (int i = 0; i &lt; 10; i++) v += 0.1;\nSystem.out.println(v);\nSystem.out.println(1.0 == v);\n</code></pre>\n<p>The above prints surprising results if you aren't aware of this rounding business. It does not print 1.0 (instead, 0.9999999), and it also does not print 'true' - instead, it prints false. Which is weird.. 10 * 0.1 is obviously 1.0.</p>\n<p>The rounding killed you here. It's identical to me asking you to write '1/3' on a note, do it two more times, and then asking you to add up the numbers on the 3 notes - which is no longer 1.0, but instead 0.9999999999 (not infinitely, just a lot, but a finite amount, of nines), and not equal to 1.0.</p>\n<p>A completely different way to think about it: <code>double</code> is represented by 64 bits.</p>\n<p>Imagine I gave you 3 switches and the only way you can store information is by leaving the switching in an up or down state. You can 'remember' 8 unique events: 000, 001, 010, 011, 100, 101, 110, and 111. That's it. Same with doubles, but instead of 8 (which is 2 to the 3rd power), it's a humongous number: 2 to the 64th power.</p>\n<p>But that's still a finite amount of unique things you can remember, and there are an <em>infinite</em> amount of numbers between 0 and 1, let alone between - and + infinity which is what double more or less oversimplified says it can represent.</p>\n<p>Doubles can actually only represent slightly fewer than 2^64 unique numbers. Let's call those the 'blessed' numbers. For any number that isn't blessed, double math silently rounds to the nearest blessed number. The blessed numbers aren't uniformly divided: Near 1.0 there are very many, as you move away from 1.0 there are fewer and fewer.</p>\n<h1>So how do we use doubles?</h1>\n<p>By keeping in mind they have slight errors. This shows up in three ways:</p>\n<ul>\n<li>When printing, always use <code>String.format</code> or similar.</li>\n</ul>\n<p>If I slightly change our code above to:</p>\n<pre><code>double v = 0.0;\nfor (int i = 0; i &lt; 10; i++) v += 0.1;\nSystem.out.println(String.format(&quot;%.3f&quot;, v));\n</code></pre>\n<p>It prints 1.000, because the double we Have (0.99999999999999764 or so) indeed rounds to 1.000 if we explicitly say: Please print with at most 3 decimal places.</p>\n<p>It is <strong>always</strong> incorrect to just print a double, anywhere, unless you explicitly want the errors rendered. Instead, always, always use some rounding as you render.</p>\n<p>When comparing, keep in mind the error to, and use 'delta comparison'. Instead of asking 'are <code>a</code> and <code>b</code> equal', ask 'is the absolute difference between <code>a</code> and <code>b</code> tiny?'. This is how:</p>\n<pre><code>double EPSILON = 0.0000001;\ndouble v = 0.0;\nfor (int i = 0; i &lt; 10; i++) v += 0.1;\nSystem.out.println(Math.abs(v - 1.0) &lt; EPSILON);\n</code></pre>\n<p>That would print the desired <code>true</code>.</p>\n<p>But, you're still playing with the fact that there are inaccuracies.</p>\n<h1>perfection and <code>BigDecimal</code></h1>\n<p>BigDecimal represents numbers perfectly and in decimal. The downside is, they are incredibly slow. Fortunately, computers are incredibly fast, so, that usually does not matter.</p>\n<p>They also have all the downsides of the math itself: If you try to divide 1 by 3 in BigDecimal math, it throws an exception unless you tell it to round, which.. just gets you that rounding again. At least its controlled, but still.</p>\n<pre><code>BigDecimal a = new BigDecimal(&quot;12.69&quot;);\nBigDecimal b = new BigDecimal(&quot;15.99&quot;);\nBigDecimal c = a.add(b);\nSystem.out.println(c);\n</code></pre>\n<p>Often if you're trying to model something that has a distinct atomic unit, it's better to just store those atoms, in a <code>long</code>. For example, for most circumstances, the best way to store money is in cents. To store the bill total for 2 articles, one of which costs €15.99, the other  costs €12.69:</p>\n<pre><code>long priceA = 1599;\nlong priceB = 1269;\nSystem.out.println(&quot;Bill total: €&quot; + formatCents(priceA + priceB));\n</code></pre>\n<p>works great, where formatCents is from a library or if need be handwritten:</p>\n<pre><code>public String formatCents(long v) {\n  boolean sign = v &gt;= 0;\n  if (!sign) v = -v;\n  int wholes = v / 100;\n  int parts = v % 100;\n  return String.format(&quot;%s%d.%02d&quot;, sign ? &quot; &quot; : &quot;-&quot;, wholes, parts);\n}\n</code></pre>\n<p>Every currency has atomic units. Yen is just yen, dollars and euros have cents, even bitcoin has satoshis.</p>\n"}],"owner":{"account_id":7361469,"reputation":175,"user_id":5604617,"display_name":"Bia"},"comment_count":6,"delete_vote_count":1,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":75,"favorite_count":0,"down_vote_count":2,"up_vote_count":0,"closed_date":1682718785,"answer_count":2,"score":-2,"last_activity_date":1682360743,"creation_date":1682354147,"question_id":76094121,"body_markdown":"I need to sum two or more doubles obtained from the parsing of strings.\r\nI verified that doubles are correctly interpreted. Suppose I have two doubles D1 = 12.69 and D2 = 15.99, I&#39;d expect sum to be D1+D2 = 28.68, but sum is actually composed by a huge number of decimal digits (ten or more). How can I get the sum with two decimal digits only?\r\n\r\nSomebody suggests to use BigDecimals in some other posts, but it&#39;s not clear to me how to use such kind of objects to obtain desired result.\r\n\r\n","title":"Java: can&#39;t get exact sum of doubles","body":"<p>I need to sum two or more doubles obtained from the parsing of strings.\nI verified that doubles are correctly interpreted. Suppose I have two doubles D1 = 12.69 and D2 = 15.99, I'd expect sum to be D1+D2 = 28.68, but sum is actually composed by a huge number of decimal digits (ten or more). How can I get the sum with two decimal digits only?</p>\n<p>Somebody suggests to use BigDecimals in some other posts, but it's not clear to me how to use such kind of objects to obtain desired result.</p>\n"},{"tags":["java","java-stream","flatmap","stream-operators"],"comments":[{"owner":{"account_id":3023214,"reputation":20362,"user_id":2563754,"display_name":"Seelenvirtuose"},"score":3,"creation_date":1682349009,"post_id":76093196,"comment_id":134197075,"body_markdown":"It seems, you are looking for a &quot;one-liner&quot;? Something like `return repository.findById(id,number).map(Revision::getCommitId).flatMap(commitRepository::findById)`?","body":"It seems, you are looking for a &quot;one-liner&quot;? Something like <code>return repository.findById(id,number).map(Revision::getCommitId).fl&zwnj;&#8203;atMap(commitReposito&zwnj;&#8203;ry::findById)</code>?"}],"answers":[{"tags":[],"owner":{"account_id":17520379,"reputation":1536,"user_id":12706564,"display_name":"Emanuel Trandafir"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1682360326,"creation_date":1682360326,"answer_id":76094933,"question_id":76093196,"body_markdown":"As you mentioned, you should yous e the *flatMap* method. One way to do it would be like this:\r\n\r\n    repository.findById(id,number)\r\n    \t.map(revision -&gt; revision.getCommitId())\r\n    \t.flatMap(commitId -&gt; commitRepository.findById(commitId));\r\n    \t\r\nAdditionally, you can use method references for the *map* and *flatMap* parameters, resulting in a more concise code:\r\n\r\n    repository.findById(id,number)\r\n    \t.map(Revision::getCommitId)\r\n    \t.flatMap(commitRepository::findById);\r\n\r\n","title":"Java Stream Optional: How can I convert the multiple inner Optional present condition to Optional.flatMap()","body":"<p>As you mentioned, you should yous e the <em>flatMap</em> method. One way to do it would be like this:</p>\n<pre><code>repository.findById(id,number)\n    .map(revision -&gt; revision.getCommitId())\n    .flatMap(commitId -&gt; commitRepository.findById(commitId));\n    \n</code></pre>\n<p>Additionally, you can use method references for the <em>map</em> and <em>flatMap</em> parameters, resulting in a more concise code:</p>\n<pre><code>repository.findById(id,number)\n    .map(Revision::getCommitId)\n    .flatMap(commitRepository::findById);\n</code></pre>\n"}],"owner":{"account_id":20457178,"reputation":41,"user_id":15010561,"display_name":"Puneri Pagadi"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":34,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1682360326,"creation_date":1682347822,"question_id":76093196,"body_markdown":"I am trying to convert the multiple Optional isPresent to Optional.flatMap but not getting on how to do that.\r\n\r\n    private Optional&lt;Commit&gt; getCommit1 (String id, Integer number) {\r\n        **Optional&lt;Revision&gt; revision = repository.findById(id,number);\r\n        if (revision.isPresent()) {\r\n            Optional&lt;Commit&gt; commit = commitRepository.findById(revision.get().getCommitId());\r\n            if (commit.isPresent()) {\r\n                return commit;\r\n            }\r\n        }\r\n        return Optional.empty();**\r\n    }\r\n\r\n\r\nI want convert the bold part into single Optional.flatMap \r\nCan someone help here","title":"Java Stream Optional: How can I convert the multiple inner Optional present condition to Optional.flatMap()","body":"<p>I am trying to convert the multiple Optional isPresent to Optional.flatMap but not getting on how to do that.</p>\n<pre><code>private Optional&lt;Commit&gt; getCommit1 (String id, Integer number) {\n    **Optional&lt;Revision&gt; revision = repository.findById(id,number);\n    if (revision.isPresent()) {\n        Optional&lt;Commit&gt; commit = commitRepository.findById(revision.get().getCommitId());\n        if (commit.isPresent()) {\n            return commit;\n        }\n    }\n    return Optional.empty();**\n}\n</code></pre>\n<p>I want convert the bold part into single Optional.flatMap\nCan someone help here</p>\n"},{"tags":["java","spring-boot","maven","spring-boot-test"],"comments":[{"owner":{"account_id":112317,"reputation":93939,"user_id":296328,"accept_rate":60,"display_name":"khmarbaise"},"score":0,"creation_date":1682360903,"post_id":76094853,"comment_id":134199890,"body_markdown":"Is there a good reason to have a separate module which contains those kind of test? What is special about those acceptance tests? Can you make a real example ?","body":"Is there a good reason to have a separate module which contains those kind of test? What is special about those acceptance tests? Can you make a real example ?"}],"answers":[{"tags":[],"owner":{"account_id":298886,"reputation":40480,"user_id":605153,"accept_rate":67,"display_name":"Mark Bramnik"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1682360289,"creation_date":1682360289,"answer_id":76094927,"question_id":76094853,"body_markdown":"You haven&#39;t specified that explicitly, but according to the question&#39;s tags, I can assume that `main-app` is a spring boot application.\r\nIn this case, it is impossible to make a dependency on that jar (in this case on the `main-app` module) because Spring Boot application is not a jar. You can open it with WinRar/WinZip or any Linux utility and see that it doesn&#39;t follow the regular &quot;jar&quot; conventions, namely it includes a `BOOT-INF/lib` folder with all the dependencies on its own.\r\n\r\nSo, in terms of a solution, I suggest slightly refactor the application to use the following structure:\r\n\r\n```java\r\nparent\r\n\r\n|-- main-app-boot // this is a spring boot wrapper, no actual code is here\r\n\r\n|-- app-services  // all the business logic (services, other beans) are here, but no maven spring boot plugin in pom, so its a regular module\r\n\r\n|-- app-dao\r\n\r\n|-- acceptance-test // make a dependency on app-services here\r\n```\r\n\r\n\r\n","title":"Query regarding acceptance test maven module","body":"<p>You haven't specified that explicitly, but according to the question's tags, I can assume that <code>main-app</code> is a spring boot application.\nIn this case, it is impossible to make a dependency on that jar (in this case on the <code>main-app</code> module) because Spring Boot application is not a jar. You can open it with WinRar/WinZip or any Linux utility and see that it doesn't follow the regular &quot;jar&quot; conventions, namely it includes a <code>BOOT-INF/lib</code> folder with all the dependencies on its own.</p>\n<p>So, in terms of a solution, I suggest slightly refactor the application to use the following structure:</p>\n<pre class=\"lang-java prettyprint-override\"><code>parent\n\n|-- main-app-boot // this is a spring boot wrapper, no actual code is here\n\n|-- app-services  // all the business logic (services, other beans) are here, but no maven spring boot plugin in pom, so its a regular module\n\n|-- app-dao\n\n|-- acceptance-test // make a dependency on app-services here\n</code></pre>\n"}],"owner":{"account_id":5888853,"reputation":467,"user_id":4636076,"accept_rate":32,"display_name":"Sandy"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":38,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76094927,"answer_count":1,"score":0,"last_activity_date":1682360289,"creation_date":1682359737,"question_id":76094853,"body_markdown":"I&#39;ve the following structure for my maven multi-module project:\r\n\r\n    parent\r\n    \r\n    |-- main-app\r\n    \r\n    |-- app-dao\r\n    \r\n    |-- acceptance-test\r\n\r\n\r\nThe pom.xml of acceptance-test module contains a maven dependency on main-app module.\r\n\r\nThe structure of the acceptance-test module looks like this:\r\n\r\n    acceptance-test\r\n    \r\n    |--src/test/java\r\n    |--src/test/resources\r\n\r\n\r\nThe `src/test/java` contains some test files which are dependent on some of the classes belonging to main-app module.\r\n\r\nWhen I run the acceptance test directly from my Intellij IDE, there is no compilation error and the Acceptance test works fine.\r\n\r\nBut as soon as I try to execute the acceptance-test module using `mvn clean install` command, it fails with Compilation Error.\r\n&quot;`Package abc.xyz doesn&#39;t exist`&quot;\r\n\r\n\r\nPlease help.\r\n","title":"Query regarding acceptance test maven module","body":"<p>I've the following structure for my maven multi-module project:</p>\n<pre><code>parent\n\n|-- main-app\n\n|-- app-dao\n\n|-- acceptance-test\n</code></pre>\n<p>The pom.xml of acceptance-test module contains a maven dependency on main-app module.</p>\n<p>The structure of the acceptance-test module looks like this:</p>\n<pre><code>acceptance-test\n\n|--src/test/java\n|--src/test/resources\n</code></pre>\n<p>The <code>src/test/java</code> contains some test files which are dependent on some of the classes belonging to main-app module.</p>\n<p>When I run the acceptance test directly from my Intellij IDE, there is no compilation error and the Acceptance test works fine.</p>\n<p>But as soon as I try to execute the acceptance-test module using <code>mvn clean install</code> command, it fails with Compilation Error.\n&quot;<code>Package abc.xyz doesn't exist</code>&quot;</p>\n<p>Please help.</p>\n"},{"tags":["java","android","nfc"],"owner":{"account_id":25030829,"reputation":15,"user_id":18888626,"display_name":"pol2020"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":27,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1682360133,"creation_date":1682358965,"question_id":76094764,"body_markdown":"I use `NdefRecord.createApplicationRecord()` to write a NFC tag.\r\n\r\nI try to get a text when I read a NFC tag, it work when the app is launched\r\n\r\n```\r\nif (NfcAdapter.ACTION_TECH_DISCOVERED.equals(intent.getAction())) {\r\nParcelable[] ndefMessageArray = intent.getParcelableArrayExtra(NfcAdapter.EXTRA_NDEF_MESSAGES);\r\n```\r\n\r\nbut when the tag launch the app, `intent.getAction()` is equals to `android.intent.action.MAIN` and not `android.nfc.action.TECH_DISCOVERED`\r\n\r\nI think `NfcAdapter.enableForegroundDispatch()` in the `onResume()` is not yet available to read the NFC tag in this case, how to solve this behavior ?\r\n\r\nThanks","title":"enableForegroundDispatch for Activity launched from an NFC tag","body":"<p>I use <code>NdefRecord.createApplicationRecord()</code> to write a NFC tag.</p>\n<p>I try to get a text when I read a NFC tag, it work when the app is launched</p>\n<pre><code>if (NfcAdapter.ACTION_TECH_DISCOVERED.equals(intent.getAction())) {\nParcelable[] ndefMessageArray = intent.getParcelableArrayExtra(NfcAdapter.EXTRA_NDEF_MESSAGES);\n</code></pre>\n<p>but when the tag launch the app, <code>intent.getAction()</code> is equals to <code>android.intent.action.MAIN</code> and not <code>android.nfc.action.TECH_DISCOVERED</code></p>\n<p>I think <code>NfcAdapter.enableForegroundDispatch()</code> in the <code>onResume()</code> is not yet available to read the NFC tag in this case, how to solve this behavior ?</p>\n<p>Thanks</p>\n"},{"tags":["java","google-oauth","jakarta-mail","smtp-auth"],"comments":[{"owner":{"account_id":2066403,"reputation":109410,"user_id":1841839,"accept_rate":71,"display_name":"Linda Lawton - DaImTo"},"score":0,"creation_date":1682106522,"post_id":76076023,"comment_id":134169123,"body_markdown":"interesting idea,  not sure why you would want to.    It should work but you need to be sure to configure domain wide deligation to the service account and delicate to a user on your google workspace domain","body":"interesting idea,  not sure why you would want to.    It should work but you need to be sure to configure domain wide deligation to the service account and delicate to a user on your google workspace domain"},{"owner":{"account_id":2066403,"reputation":109410,"user_id":1841839,"accept_rate":71,"display_name":"Linda Lawton - DaImTo"},"score":0,"creation_date":1682106657,"post_id":76076023,"comment_id":134169140,"body_markdown":"just curious how did you make and apps password for a service account.   service account authorization is different than oauth2 I&#39;m ready surprised you got an access token at all","body":"just curious how did you make and apps password for a service account.   service account authorization is different than oauth2 I&#39;m ready surprised you got an access token at all"},{"owner":{"account_id":15362393,"reputation":11,"user_id":11082852,"display_name":"Emmanuel Shedu"},"score":0,"creation_date":1682351478,"post_id":76076023,"comment_id":134197750,"body_markdown":"Hi @LindaLawton-DaImTo\nI have configured domain wide delegation, there was a lot of push against it, given that according to google&#39;s documentation on OAuth2, DWD is optional and not needed; and a user need to setup an actual company, get a domain name and pay to access DWD.\n\nI did not make an App Password for the service account, my apologies if my question misinformed that. I meant to communicate that I had success with authenticating and sending mail when using a regular user and App-Password (given that Basic Auth is not supported i.e username and password).","body":"Hi @LindaLawton-DaImTo I have configured domain wide delegation, there was a lot of push against it, given that according to google&#39;s documentation on OAuth2, DWD is optional and not needed; and a user need to setup an actual company, get a domain name and pay to access DWD.  I did not make an App Password for the service account, my apologies if my question misinformed that. I meant to communicate that I had success with authenticating and sending mail when using a regular user and App-Password (given that Basic Auth is not supported i.e username and password)."},{"owner":{"account_id":15362393,"reputation":11,"user_id":11082852,"display_name":"Emmanuel Shedu"},"score":0,"creation_date":1682352097,"post_id":76076023,"comment_id":134197888,"body_markdown":"please see https://developers.google.com/identity/protocols/oauth2/service-account\nThere are two Libraries available that a user can use to get an access token for Oauth2. One would create the service account and setup so that it is live, then generate a key in JSON which contains the credentials of the service account, including private key. These are the step of (client-credential flow) what google refers to as service account.\nUsing GoogleCredential or ServiceAccountCredentials lib, you can acquire an access token to then use as documented here: https://javaee.github.io/javamail/OAuth2","body":"please see <a href=\"https://developers.google.com/identity/protocols/oauth2/service-account\" rel=\"nofollow noreferrer\">developers.google.com/identity/protocols/oauth2/service-acco&zwnj;&#8203;unt</a> There are two Libraries available that a user can use to get an access token for Oauth2. One would create the service account and setup so that it is live, then generate a key in JSON which contains the credentials of the service account, including private key. These are the step of (client-credential flow) what google refers to as service account. Using GoogleCredential or ServiceAccountCredentials lib, you can acquire an access token to then use as documented here: <a href=\"https://javaee.github.io/javamail/OAuth2\" rel=\"nofollow noreferrer\">javaee.github.io/javamail/OAuth2</a>"}],"answers":[{"tags":[],"owner":{"account_id":2066403,"reputation":109410,"user_id":1841839,"accept_rate":71,"display_name":"Linda Lawton - DaImTo"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1682360064,"creation_date":1682360064,"answer_id":76094898,"question_id":76076023,"body_markdown":"I&#39;m just not sure why you want to use a service account with the smtp server.   A service account is used by gmail both api and smtp server to access the mail accounts of users on a google workspace domain.   If you are doing that then you should use the gmail api instead of the smtp server as its much easer to use.\r\n\r\n\r\nIf you are only accessing a single users gmail account then you could do this much easer with using an apps password for that user and then you can login when ever you need.   Or you could use Oauth2 and then store the refresh token and use that when ever you need to run the script.\r\n\r\n\r\nBut to answer your question to use a service account your going to have to denote which user on your google workspace domain you want to impersonate that is done by setting `setServiceAccountUser`\r\n\r\n    GoogleCredential credential = new GoogleCredential.Builder()\r\n      .setTransport(httpTransport)\r\n      .setJsonFactory(jsonFactory)\r\n      .setServiceAccountId(SERVICE_ACCOUNT_EMAIL)\r\n      .setServiceAccountScopes(DirectoryScopes.ADMIN_DIRECTORY_USERS)\r\n      .setServiceAccountUser(userEmail)\r\n      .setServiceAccountPrivateKeyFromP12File(\r\n          new java.io.File(SERVICE_ACCOUNT_PKCS12_FILE_PATH))\r\n      .build();","title":"Does SMTP XOAUTH2 work when sending email using Google Services Account. It always returns: 555 5.5.2 Syntax error, goodbye. iy1-8plb.26 - gsmtp","body":"<p>I'm just not sure why you want to use a service account with the smtp server.   A service account is used by gmail both api and smtp server to access the mail accounts of users on a google workspace domain.   If you are doing that then you should use the gmail api instead of the smtp server as its much easer to use.</p>\n<p>If you are only accessing a single users gmail account then you could do this much easer with using an apps password for that user and then you can login when ever you need.   Or you could use Oauth2 and then store the refresh token and use that when ever you need to run the script.</p>\n<p>But to answer your question to use a service account your going to have to denote which user on your google workspace domain you want to impersonate that is done by setting <code>setServiceAccountUser</code></p>\n<pre><code>GoogleCredential credential = new GoogleCredential.Builder()\n  .setTransport(httpTransport)\n  .setJsonFactory(jsonFactory)\n  .setServiceAccountId(SERVICE_ACCOUNT_EMAIL)\n  .setServiceAccountScopes(DirectoryScopes.ADMIN_DIRECTORY_USERS)\n  .setServiceAccountUser(userEmail)\n  .setServiceAccountPrivateKeyFromP12File(\n      new java.io.File(SERVICE_ACCOUNT_PKCS12_FILE_PATH))\n  .build();\n</code></pre>\n"}],"owner":{"account_id":15362393,"reputation":11,"user_id":11082852,"display_name":"Emmanuel Shedu"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":348,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1682360064,"creation_date":1682103408,"question_id":76076023,"body_markdown":"I have the following configuration to acquire an access token using Google&#39;s Service Account, use the access token to OAUTH2 authenticate and connect via SMTPTransport.\r\n\r\nThese are the mail session property:\r\n\r\n```\r\n&lt;mailSession description=&quot;SMTP javax.mail.session&quot; from=&quot;someone.iam.gserviceaccount.com&quot;&gt;\r\n    &lt;property name=&quot;mail.smtp.host&quot; value=&quot;smtp.gmail.com&quot;/&gt;\r\n    &lt;property name=&quot;mail.smtp.auth&quot; value=&quot;true&quot;/&gt;\r\n    &lt;property name=&quot;mail.smtp.port&quot; value=&quot;587&quot;/&gt;\r\n    &lt;property name=&quot;mail.smtp.ssl.enable&quot; value=&quot;false&quot;/&gt;\r\n    &lt;property name=&quot;mail.smtp.sasl.enable&quot; value=&quot;true&quot;/&gt;\r\n    &lt;property name=&quot;mail.smtp.ehlo&quot; value=&quot;false&quot;/&gt;\r\n    &lt;property name=&quot;mail.smtp.sasl.mechanisms&quot; value=&quot;XOAUTH2&quot;/&gt;\r\n    &lt;property name=&quot;mail.smtp.auth.plain.disable&quot; value=&quot;true&quot;/&gt;\r\n    &lt;property name=&quot;mail.smtp.auth.login.disable&quot; value=&quot;true&quot;/&gt;\r\n    &lt;property name=&quot;mail.smtp.starttls.required&quot; value=&quot;true&quot;/&gt;\r\n    &lt;property name=&quot;mail.smtp.ssl.protocols&quot; value=&quot;TLSv1.2&quot;/&gt;\r\n    &lt;property name=&quot;mail.smtp.connectiontimeout&quot; value=&quot;10000&quot;/&gt;\r\n&lt;/mailSession&gt;\r\n```\r\n\r\nAcquire access token using Google Service Account Credentials:\r\n\r\n```\r\ntry (FileInputStream serviceAccountStream = new FileInputStream(credentialsPath)) { \r\n    credentials = ServiceAccountCredentials.fromStream(serviceAccountStream).createScoped(Collections.singleton(&quot;https://mail.google.com/&quot;));\r\n    credentials.refresh();\r\n    accessToken = credentials.getAccessToken();\r\n    System.out.println(&quot;Access token2: &quot; + accessToken.getTokenValue());\r\n}\r\n```\r\n\r\naccessToken holds the Access token Object. I have observed the token and confirmed the structure seems valid. i.e yaxx.c.dxVaekmxICgknK  \r\n  \r\nThis is where the error occurs, according to documentation on JavaMail 1.5.5+, authentication is done as follows:\r\n\r\n```\r\nSMTPTransport transport = new SMTPTransport(session, null);\r\ntransport.connect(&quot;smtp.gmail.com&quot;, 587, &quot;sender@example.com&quot;, accessToken);\r\n```\r\n\r\nThe above fails with the following error (private values have been edited):\r\n\r\n```\r\n250-ENHANCEDSTATUSCODES\r\n250-PIPELINING\r\n250-CHUNKING\r\n250 SMTPUTF8\r\nDEBUG SMTP: Found extension &quot;SIZE&quot;, arg &quot;35882577&quot;\r\nDEBUG SMTP: Found extension &quot;8BITMIME&quot;, arg &quot;&quot;\r\nDEBUG SMTP: Found extension &quot;AUTH&quot;, arg &quot;LOGIN PLAIN XOAUTH2 PLAIN-CLIENTTOKEN OAUTHBEARER XOAUTH&quot;\r\nDEBUG SMTP: Found extension &quot;ENHANCEDSTATUSCODES&quot;, arg &quot;&quot;\r\nDEBUG SMTP: Found extension &quot;PIPELINING&quot;, arg &quot;&quot;\r\nDEBUG SMTP: Found extension &quot;CHUNKING&quot;, arg &quot;&quot;\r\nDEBUG SMTP: Found extension &quot;SMTPUTF8&quot;, arg &quot;&quot;\r\nDEBUG SMTP: protocolConnect login, host=smtp.gmail.com, user=sample-service@gmail.iam.gserviceaccount.com, password=&lt;non-null&gt;\r\nDEBUG SMTP: Authenticate with SASL\r\nDEBUG SMTP: SASL mechanisms allowed: XOAUTH2\r\nDEBUG SMTP: SASL Mechanisms:\r\nDEBUG SMTP:  XOAUTH2\r\nDEBUG SMTP: \r\nDEBUG SMTP: SASL client XOAUTH2\r\nDEBUG SMTP: SASL callback length: 2\r\nDEBUG SMTP: SASL callback 0: javax.security.auth.callback.NameCallback@66fdec9\r\nDEBUG SMTP: SASL callback 1: javax.security.auth.callback.PasswordCallback@57abad67\r\nAUTH XOAUTH2 dXNlcj1zYW1wbGUtc2VydmljZUBnbWFpbC5pYW0uZ3NlcnZpY2VhY2NvdW50LmNvbWF1dGg9QmVhcmVyIHlhMjkuYy5iMFZoZHNTVUhBanNvSldTT0lXU3VkbHNqc25zaXVoc2xpdW5hdVNVSDEzOHJsczgzbGFqYXFhaGhzOHVzaWRmamhza3VkYWRESAo=\r\n555 5.5.2 Syntax error, goodbye. f17-40040a170904ab9100b001922d98cb4esm19571022plr.288 - gsmtp\r\nDEBUG SMTP: SASL authentication failed\r\njavax.mail.AuthenticationFailedException: failed to connect\r\n\tat javax.mail.Service.connect(Service.java:403)\r\n```\r\n\r\nthe format of the sender and recipient are: &quot;someone@gmail.example.com&quot;  \r\nI am able to authenticate and thereby connect when using Google App Password (with the proper properties) but not this. I have also tried delegating users but that is not the issue. why do we get this\r\n\r\nI have tried different formats of the mail (e.g using &lt;&gt;)\r\nI have tried acquiring a G-suite in order to delegate users\r\n\r\n\r\nI expect to be able to Transport.connect and Transport.sendMessage using OAuth2.0, i.e my service account and token passed as the password","title":"Does SMTP XOAUTH2 work when sending email using Google Services Account. It always returns: 555 5.5.2 Syntax error, goodbye. iy1-8plb.26 - gsmtp","body":"<p>I have the following configuration to acquire an access token using Google's Service Account, use the access token to OAUTH2 authenticate and connect via SMTPTransport.</p>\n<p>These are the mail session property:</p>\n<pre><code>&lt;mailSession description=&quot;SMTP javax.mail.session&quot; from=&quot;someone.iam.gserviceaccount.com&quot;&gt;\n    &lt;property name=&quot;mail.smtp.host&quot; value=&quot;smtp.gmail.com&quot;/&gt;\n    &lt;property name=&quot;mail.smtp.auth&quot; value=&quot;true&quot;/&gt;\n    &lt;property name=&quot;mail.smtp.port&quot; value=&quot;587&quot;/&gt;\n    &lt;property name=&quot;mail.smtp.ssl.enable&quot; value=&quot;false&quot;/&gt;\n    &lt;property name=&quot;mail.smtp.sasl.enable&quot; value=&quot;true&quot;/&gt;\n    &lt;property name=&quot;mail.smtp.ehlo&quot; value=&quot;false&quot;/&gt;\n    &lt;property name=&quot;mail.smtp.sasl.mechanisms&quot; value=&quot;XOAUTH2&quot;/&gt;\n    &lt;property name=&quot;mail.smtp.auth.plain.disable&quot; value=&quot;true&quot;/&gt;\n    &lt;property name=&quot;mail.smtp.auth.login.disable&quot; value=&quot;true&quot;/&gt;\n    &lt;property name=&quot;mail.smtp.starttls.required&quot; value=&quot;true&quot;/&gt;\n    &lt;property name=&quot;mail.smtp.ssl.protocols&quot; value=&quot;TLSv1.2&quot;/&gt;\n    &lt;property name=&quot;mail.smtp.connectiontimeout&quot; value=&quot;10000&quot;/&gt;\n&lt;/mailSession&gt;\n</code></pre>\n<p>Acquire access token using Google Service Account Credentials:</p>\n<pre><code>try (FileInputStream serviceAccountStream = new FileInputStream(credentialsPath)) { \n    credentials = ServiceAccountCredentials.fromStream(serviceAccountStream).createScoped(Collections.singleton(&quot;https://mail.google.com/&quot;));\n    credentials.refresh();\n    accessToken = credentials.getAccessToken();\n    System.out.println(&quot;Access token2: &quot; + accessToken.getTokenValue());\n}\n</code></pre>\n<p>accessToken holds the Access token Object. I have observed the token and confirmed the structure seems valid. i.e yaxx.c.dxVaekmxICgknK</p>\n<p>This is where the error occurs, according to documentation on JavaMail 1.5.5+, authentication is done as follows:</p>\n<pre><code>SMTPTransport transport = new SMTPTransport(session, null);\ntransport.connect(&quot;smtp.gmail.com&quot;, 587, &quot;sender@example.com&quot;, accessToken);\n</code></pre>\n<p>The above fails with the following error (private values have been edited):</p>\n<pre><code>250-ENHANCEDSTATUSCODES\n250-PIPELINING\n250-CHUNKING\n250 SMTPUTF8\nDEBUG SMTP: Found extension &quot;SIZE&quot;, arg &quot;35882577&quot;\nDEBUG SMTP: Found extension &quot;8BITMIME&quot;, arg &quot;&quot;\nDEBUG SMTP: Found extension &quot;AUTH&quot;, arg &quot;LOGIN PLAIN XOAUTH2 PLAIN-CLIENTTOKEN OAUTHBEARER XOAUTH&quot;\nDEBUG SMTP: Found extension &quot;ENHANCEDSTATUSCODES&quot;, arg &quot;&quot;\nDEBUG SMTP: Found extension &quot;PIPELINING&quot;, arg &quot;&quot;\nDEBUG SMTP: Found extension &quot;CHUNKING&quot;, arg &quot;&quot;\nDEBUG SMTP: Found extension &quot;SMTPUTF8&quot;, arg &quot;&quot;\nDEBUG SMTP: protocolConnect login, host=smtp.gmail.com, user=sample-service@gmail.iam.gserviceaccount.com, password=&lt;non-null&gt;\nDEBUG SMTP: Authenticate with SASL\nDEBUG SMTP: SASL mechanisms allowed: XOAUTH2\nDEBUG SMTP: SASL Mechanisms:\nDEBUG SMTP:  XOAUTH2\nDEBUG SMTP: \nDEBUG SMTP: SASL client XOAUTH2\nDEBUG SMTP: SASL callback length: 2\nDEBUG SMTP: SASL callback 0: javax.security.auth.callback.NameCallback@66fdec9\nDEBUG SMTP: SASL callback 1: javax.security.auth.callback.PasswordCallback@57abad67\nAUTH XOAUTH2 dXNlcj1zYW1wbGUtc2VydmljZUBnbWFpbC5pYW0uZ3NlcnZpY2VhY2NvdW50LmNvbWF1dGg9QmVhcmVyIHlhMjkuYy5iMFZoZHNTVUhBanNvSldTT0lXU3VkbHNqc25zaXVoc2xpdW5hdVNVSDEzOHJsczgzbGFqYXFhaGhzOHVzaWRmamhza3VkYWRESAo=\n555 5.5.2 Syntax error, goodbye. f17-40040a170904ab9100b001922d98cb4esm19571022plr.288 - gsmtp\nDEBUG SMTP: SASL authentication failed\njavax.mail.AuthenticationFailedException: failed to connect\n    at javax.mail.Service.connect(Service.java:403)\n</code></pre>\n<p>the format of the sender and recipient are: &quot;someone@gmail.example.com&quot;<br />\nI am able to authenticate and thereby connect when using Google App Password (with the proper properties) but not this. I have also tried delegating users but that is not the issue. why do we get this</p>\n<p>I have tried different formats of the mail (e.g using &lt;&gt;)\nI have tried acquiring a G-suite in order to delegate users</p>\n<p>I expect to be able to Transport.connect and Transport.sendMessage using OAuth2.0, i.e my service account and token passed as the password</p>\n"},{"tags":["java","spring","spring-security","access-token"],"comments":[{"owner":{"account_id":308139,"reputation":8199,"user_id":619830,"accept_rate":75,"display_name":"ch4mp"},"score":0,"creation_date":1670956178,"post_id":74781904,"comment_id":131991481,"body_markdown":"maybe this tutorial will help: https://github.com/ch4mpy/spring-addons/tree/master/samples/tutorials/resource-server_with_ui In there, I send OAuth2 authorized requests from a client (Tymeleaf @Controller) to a resource-server (@RestController) using `WebClient` configured to use identified user&#39;s access-token","body":"maybe this tutorial will help: <a href=\"https://github.com/ch4mpy/spring-addons/tree/master/samples/tutorials/resource-server_with_ui\" rel=\"nofollow noreferrer\">github.com/ch4mpy/spring-addons/tree/master/samples/tutorial&zwnj;&#8203;s/&hellip;</a> In there, I send OAuth2 authorized requests from a client (Tymeleaf @Controller) to a resource-server (@RestController) using <code>WebClient</code> configured to use identified user&#39;s access-token"},{"owner":{"account_id":24339691,"reputation":19,"user_id":18277288,"display_name":"thies"},"score":0,"creation_date":1671093950,"post_id":74781904,"comment_id":132024743,"body_markdown":"&quot;The aim here is to demo OAuth2 configuration when a Spring backend is both a client and a resource-server.&quot; - sound extremely promising. I&#39;ll try to follow this now and tell you how it went.","body":"&quot;The aim here is to demo OAuth2 configuration when a Spring backend is both a client and a resource-server.&quot; - sound extremely promising. I&#39;ll try to follow this now and tell you how it went."},{"owner":{"account_id":24339691,"reputation":19,"user_id":18277288,"display_name":"thies"},"score":0,"creation_date":1671784160,"post_id":74781904,"comment_id":132175124,"body_markdown":"Unfortunately, the prerequisites didn&#39;t fit my needs. Thanks for sharing, though!","body":"Unfortunately, the prerequisites didn&#39;t fit my needs. Thanks for sharing, though!"},{"owner":{"account_id":308139,"reputation":8199,"user_id":619830,"accept_rate":75,"display_name":"ch4mp"},"score":0,"creation_date":1671787122,"post_id":74781904,"comment_id":132175768,"body_markdown":"What prerequisite exactly?","body":"What prerequisite exactly?"},{"owner":{"account_id":24339691,"reputation":19,"user_id":18277288,"display_name":"thies"},"score":0,"creation_date":1672401883,"post_id":74781904,"comment_id":132282999,"body_markdown":"The one that disallows my to redirect unauthorized users to a login-page.","body":"The one that disallows my to redirect unauthorized users to a login-page."},{"owner":{"account_id":308139,"reputation":8199,"user_id":619830,"accept_rate":75,"display_name":"ch4mp"},"score":0,"creation_date":1672422187,"post_id":74781904,"comment_id":132288312,"body_markdown":"Then you&#39;ll have important security issues","body":"Then you&#39;ll have important security issues"},{"owner":{"account_id":24339691,"reputation":19,"user_id":18277288,"display_name":"thies"},"score":0,"creation_date":1672645390,"post_id":74781904,"comment_id":132317507,"body_markdown":"Could be more specific? What important issues? I&#39;d be interested to understand what you know.","body":"Could be more specific? What important issues? I&#39;d be interested to understand what you know."},{"owner":{"account_id":308139,"reputation":8199,"user_id":619830,"accept_rate":75,"display_name":"ch4mp"},"score":0,"creation_date":1672673086,"post_id":74781904,"comment_id":132324591,"body_markdown":"To start with, users credentials are authorization-server business and should be exposed to neither client nor resource server.  The more actors see it, the larger is the attack surface. Second, unless you do not use any client side scripting language, you take the responsibility that the versions of those languages (and the platforms it runs into) are not exposed to any breach. All that not mentioning that if you spread login a cross clients, security improvements will have to be applied to all clients (MFA, security patches,...).","body":"To start with, users credentials are authorization-server business and should be exposed to neither client nor resource server.  The more actors see it, the larger is the attack surface. Second, unless you do not use any client side scripting language, you take the responsibility that the versions of those languages (and the platforms it runs into) are not exposed to any breach. All that not mentioning that if you spread login a cross clients, security improvements will have to be applied to all clients (MFA, security patches,...)."},{"owner":{"account_id":308139,"reputation":8199,"user_id":619830,"accept_rate":75,"display_name":"ch4mp"},"score":0,"creation_date":1672673855,"post_id":74781904,"comment_id":132324801,"body_markdown":"To take a simple sample, I would not trust a third party client asking my Google password to query Google API because this is precisely what OAuth2 solves. It would mean that the authors intentionally want to access my password or have not understood OAuth2 (which isn&#39;t a good news for security and is enough to prevent me from giving them any secret)","body":"To take a simple sample, I would not trust a third party client asking my Google password to query Google API because this is precisely what OAuth2 solves. It would mean that the authors intentionally want to access my password or have not understood OAuth2 (which isn&#39;t a good news for security and is enough to prevent me from giving them any secret)"}],"answers":[{"tags":[],"owner":{"account_id":24339691,"reputation":19,"user_id":18277288,"display_name":"thies"},"down_vote_count":1,"up_vote_count":0,"is_accepted":true,"score":-1,"last_activity_date":1671784003,"creation_date":1671784003,"answer_id":74897600,"question_id":74781904,"body_markdown":"Thanks to those who tried to help me, but eventually I figured it out myself.\r\n\r\nI extended my Controllers by two attributes: `OAuth2AuthenticationToken authentication` and `HttpServletRequest request`.\r\n\r\n[![Controller-methods signature][1]][1]\r\n\r\nAlso, I `@Autowired` in the `OAuth2AuthorizedClientRepository oAuth2AuthorizedClientRepository`.\r\n\r\n[![Autowired client-repository][2]][2]\r\n\r\nThis then allows the following call returning the value of the accessToken:\r\n`(oAuth2AuthorizedClientRepository.loadAuthorizedClient(myClientRegistrationId, authentication, request)).client.getAccessToken().getTokenValue();`.\r\n\r\nAfter that, it&#39;s just parsing the token and retrieving the values using `JWTParser.parse()` and provided methods from the `JWT`-result.\r\n\r\nPersonal note: Don&#39;t do the parsing and retrieving value parts in your controller to keep any more complex logic out of it.\r\n\r\nI hope this helps somebody!\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/beJz0.png\r\n  [2]: https://i.stack.imgur.com/pUpHY.png","title":"Get the OAuth2/OIDC access token with every request in Spring","body":"<p>Thanks to those who tried to help me, but eventually I figured it out myself.</p>\n<p>I extended my Controllers by two attributes: <code>OAuth2AuthenticationToken authentication</code> and <code>HttpServletRequest request</code>.</p>\n<p><a href=\"https://i.stack.imgur.com/beJz0.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/beJz0.png\" alt=\"Controller-methods signature\" /></a></p>\n<p>Also, I <code>@Autowired</code> in the <code>OAuth2AuthorizedClientRepository oAuth2AuthorizedClientRepository</code>.</p>\n<p><a href=\"https://i.stack.imgur.com/pUpHY.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/pUpHY.png\" alt=\"Autowired client-repository\" /></a></p>\n<p>This then allows the following call returning the value of the accessToken:\n<code>(oAuth2AuthorizedClientRepository.loadAuthorizedClient(myClientRegistrationId, authentication, request)).client.getAccessToken().getTokenValue();</code>.</p>\n<p>After that, it's just parsing the token and retrieving the values using <code>JWTParser.parse()</code> and provided methods from the <code>JWT</code>-result.</p>\n<p>Personal note: Don't do the parsing and retrieving value parts in your controller to keep any more complex logic out of it.</p>\n<p>I hope this helps somebody!</p>\n"},{"tags":[],"owner":{"account_id":308139,"reputation":8199,"user_id":619830,"accept_rate":75,"display_name":"ch4mp"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1671808773,"creation_date":1671796290,"answer_id":74899318,"question_id":74781904,"body_markdown":"Split your security in two with `http.securityMatcher` in the first picked `SecurityFilterChain` bean to restrict the endpoints it applies to (use `@Order` to control that), and configure WebClient to add access-token as Authorization header to its requests to resource-server (REST endpoints). This is demoed in [the tutorial][4] I already linked in my comment to your question. This tutorial matches exactly what you are asking, the fact that it uses Keycloak instead of PingOne as authorization server is a detail (solved by editing a property or two). \r\n\r\n# Resource-server security filter-chain\r\nAs reminder, a resource-server is a REST API secured with OAuth2. All end-points of `@RestController` and `@Controller` with `@ResponseBody` should be secured with a `SecurityFilterChain` containing `http.oauth2ResourceServer()`. The easiest way to configure a resource-server with Spring is using `spring-boot-starter-oauth2-resource-server` (or one of the very [thin wrappers I wrote][1] around it which enable to configure it from properties with 0 java conf)\r\n\r\nBy default with such filter-chains, Spring populates the security-context with a sub-class of `AbstractOAuth2TokenAuthenticationToken&lt;?&gt;`. You can retrieve the access-token from it. At least 2 options to access this Authentication instance:\r\n- `SecurityContextHolder.getContext().getAuthentication()`\r\n- have Spring auto-magically inject `AbstractOAuth2TokenAuthenticationToken&lt;?&gt; auth` as controller method parameter\r\n\r\nYou can also have the original authorization header injected as controller method parameter with `@RequestHeader(value = HttpHeaders.AUTHORIZATION) String authorizationHeader`.\r\n\r\nI expose various ways to configure resource-servers security filter-chain in [this tutorials][2].\r\n\r\n# Client security filter-chain\r\nEnd-points of `@Controller` returning a template name and secured with OAuth2 are clients. The easiest way to configure a Spring client is with `spring-boot-starter-oauth2-client` and `http.oauth2Login()`.\r\n\r\nNote that in this configuration, the request between the browser and the Spring client is not OAuth2 (it is most frequently secured with a session cookie, not a `Bearer` access-token in `Authorization` header). Only requests sent by the Spring client (on the server) to resource-servers are secured with OAuth2.\r\n\r\nWith client security filter-chain, security-context is populated with `OAuth2AuthenticationToken` which, on purpose, exposes ID-token  and not access-token. As reminder, ID tokens are holding user identity data and are intended to be used by clients when access-tokens audience is resource-servers and is designed for access-control. Clients should consider access-tokens as black box and use it only to authorize their requests to resource-servers (set `Bearer` `Authorization` header).\r\n\r\nYou can get the access-token string from `OAuth2AuthorizedClient`: `authorizedClient.getAccessToken().getTokenValue()`, which is itself retrieved from the `OAuth2AuthorizedClientService` you can auto-wire in your controllers: `authorizedClientService.loadAuthorizedClient(&quot;your-client-id&quot;, auth.getName())` (`auth` being the `OAuth2AuthenticationToken` instance retrieved from security-context via `SecurityContextHolder` or controller method parameter injection)\r\n\r\nIf you need to authorize a `WebClient` request from client to resource-server, you can do simpler than retrieve access token and position authorization header: do as in the [UiController][3] of [the tutorial][4] already linked in my comment to your question:\r\n```java\r\nfinal var authorizedClient = authorizedClientService.loadAuthorizedClient(&quot;spring-addons-public&quot;, auth.getName());\r\nfinal var response = webClient.get().uri(&quot;http://localhost:8080/api/greet&quot;)\r\n\t\t\t\t\t.attributes(ServerOAuth2AuthorizedClientExchangeFilterFunction.oauth2AuthorizedClient(authorizedClient))\r\n\t\t\t\t\t...\r\n```\r\nWith WebClient configured as follow:\r\n```java\r\n\t@Bean\r\n\tWebClient webClient(ClientRegistrationRepository clientRegistrationRepository,\r\n\t\t\tOAuth2AuthorizedClientService authorizedClientService) {\r\n\t\tvar oauth = new ServletOAuth2AuthorizedClientExchangeFilterFunction(\r\n\t\t\t\tnew AuthorizedClientServiceOAuth2AuthorizedClientManager(clientRegistrationRepository,\r\n\t\t\t\t\t\tauthorizedClientService));\r\n\t\toauth.setDefaultClientRegistrationId(&quot;spring-addons-public&quot;);\r\n\t\treturn WebClient.builder().apply(oauth.oauth2Configuration()).build();\r\n\t}\r\n```\r\n\r\n\r\n  [1]: https://github.com/ch4mpy/spring-addons\r\n  [2]: https://github.com/ch4mpy/spring-addons/tree/master/samples/tutorials\r\n  [3]: https://github.com/ch4mpy/spring-addons/blob/master/samples/tutorials/resource-server_with_ui/src/main/java/com/c4soft/springaddons/tutorials/UiController.java\r\n  [4]: https://github.com/ch4mpy/spring-addons/tree/master/samples/tutorials/resource-server_with_ui","title":"Get the OAuth2/OIDC access token with every request in Spring","body":"<p>Split your security in two with <code>http.securityMatcher</code> in the first picked <code>SecurityFilterChain</code> bean to restrict the endpoints it applies to (use <code>@Order</code> to control that), and configure WebClient to add access-token as Authorization header to its requests to resource-server (REST endpoints). This is demoed in <a href=\"https://github.com/ch4mpy/spring-addons/tree/master/samples/tutorials/resource-server_with_ui\" rel=\"nofollow noreferrer\">the tutorial</a> I already linked in my comment to your question. This tutorial matches exactly what you are asking, the fact that it uses Keycloak instead of PingOne as authorization server is a detail (solved by editing a property or two).</p>\n<h1>Resource-server security filter-chain</h1>\n<p>As reminder, a resource-server is a REST API secured with OAuth2. All end-points of <code>@RestController</code> and <code>@Controller</code> with <code>@ResponseBody</code> should be secured with a <code>SecurityFilterChain</code> containing <code>http.oauth2ResourceServer()</code>. The easiest way to configure a resource-server with Spring is using <code>spring-boot-starter-oauth2-resource-server</code> (or one of the very <a href=\"https://github.com/ch4mpy/spring-addons\" rel=\"nofollow noreferrer\">thin wrappers I wrote</a> around it which enable to configure it from properties with 0 java conf)</p>\n<p>By default with such filter-chains, Spring populates the security-context with a sub-class of <code>AbstractOAuth2TokenAuthenticationToken&lt;?&gt;</code>. You can retrieve the access-token from it. At least 2 options to access this Authentication instance:</p>\n<ul>\n<li><code>SecurityContextHolder.getContext().getAuthentication()</code></li>\n<li>have Spring auto-magically inject <code>AbstractOAuth2TokenAuthenticationToken&lt;?&gt; auth</code> as controller method parameter</li>\n</ul>\n<p>You can also have the original authorization header injected as controller method parameter with <code>@RequestHeader(value = HttpHeaders.AUTHORIZATION) String authorizationHeader</code>.</p>\n<p>I expose various ways to configure resource-servers security filter-chain in <a href=\"https://github.com/ch4mpy/spring-addons/tree/master/samples/tutorials\" rel=\"nofollow noreferrer\">this tutorials</a>.</p>\n<h1>Client security filter-chain</h1>\n<p>End-points of <code>@Controller</code> returning a template name and secured with OAuth2 are clients. The easiest way to configure a Spring client is with <code>spring-boot-starter-oauth2-client</code> and <code>http.oauth2Login()</code>.</p>\n<p>Note that in this configuration, the request between the browser and the Spring client is not OAuth2 (it is most frequently secured with a session cookie, not a <code>Bearer</code> access-token in <code>Authorization</code> header). Only requests sent by the Spring client (on the server) to resource-servers are secured with OAuth2.</p>\n<p>With client security filter-chain, security-context is populated with <code>OAuth2AuthenticationToken</code> which, on purpose, exposes ID-token  and not access-token. As reminder, ID tokens are holding user identity data and are intended to be used by clients when access-tokens audience is resource-servers and is designed for access-control. Clients should consider access-tokens as black box and use it only to authorize their requests to resource-servers (set <code>Bearer</code> <code>Authorization</code> header).</p>\n<p>You can get the access-token string from <code>OAuth2AuthorizedClient</code>: <code>authorizedClient.getAccessToken().getTokenValue()</code>, which is itself retrieved from the <code>OAuth2AuthorizedClientService</code> you can auto-wire in your controllers: <code>authorizedClientService.loadAuthorizedClient(&quot;your-client-id&quot;, auth.getName())</code> (<code>auth</code> being the <code>OAuth2AuthenticationToken</code> instance retrieved from security-context via <code>SecurityContextHolder</code> or controller method parameter injection)</p>\n<p>If you need to authorize a <code>WebClient</code> request from client to resource-server, you can do simpler than retrieve access token and position authorization header: do as in the <a href=\"https://github.com/ch4mpy/spring-addons/blob/master/samples/tutorials/resource-server_with_ui/src/main/java/com/c4soft/springaddons/tutorials/UiController.java\" rel=\"nofollow noreferrer\">UiController</a> of <a href=\"https://github.com/ch4mpy/spring-addons/tree/master/samples/tutorials/resource-server_with_ui\" rel=\"nofollow noreferrer\">the tutorial</a> already linked in my comment to your question:</p>\n<pre class=\"lang-java prettyprint-override\"><code>final var authorizedClient = authorizedClientService.loadAuthorizedClient(&quot;spring-addons-public&quot;, auth.getName());\nfinal var response = webClient.get().uri(&quot;http://localhost:8080/api/greet&quot;)\n                    .attributes(ServerOAuth2AuthorizedClientExchangeFilterFunction.oauth2AuthorizedClient(authorizedClient))\n                    ...\n</code></pre>\n<p>With WebClient configured as follow:</p>\n<pre class=\"lang-java prettyprint-override\"><code>    @Bean\n    WebClient webClient(ClientRegistrationRepository clientRegistrationRepository,\n            OAuth2AuthorizedClientService authorizedClientService) {\n        var oauth = new ServletOAuth2AuthorizedClientExchangeFilterFunction(\n                new AuthorizedClientServiceOAuth2AuthorizedClientManager(clientRegistrationRepository,\n                        authorizedClientService));\n        oauth.setDefaultClientRegistrationId(&quot;spring-addons-public&quot;);\n        return WebClient.builder().apply(oauth.oauth2Configuration()).build();\n    }\n</code></pre>\n"}],"owner":{"account_id":24339691,"reputation":19,"user_id":18277288,"display_name":"thies"},"comment_count":9,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3054,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":74897600,"answer_count":2,"score":2,"last_activity_date":1682359878,"creation_date":1670920090,"question_id":74781904,"body_markdown":"I&#39;m trying to enable multi-tenancy for a previously single-user system. The application used to run on a local server and had a relatively simple frontend baked in.\r\n\r\nNow I want to allow multiple users to simultaneously use it in a cloud environment. I went ahead and implemented Auth2 with OIDC and PKCE to redirect users to an external Auth Provider. What I want now is that for every request, the user sends his Access token with the request in order for me to decide what data to provide with the answer.\r\n\r\nI could not figure out how to obtain that data, as it seems that the spring framework (by default) only sends the ID token with the request. I suspect the fact that my software would simultaneously be the client and the resource server has something to do with it.\r\n\r\nThis is my first question, so I&#39;m very happy to modify or extend my question if I&#39;ve forgotten anything.\r\n\r\nWhat I&#39;ve tried to far:\r\n\r\nI&#39;ve used Postman to verify that the three tokens, ID token, refresh token and access token are issued correctly and can be retrieved with my credentials.\r\n\r\nI tried getting the access token from the request itself. Any parameters (like `@AuthenticationPrincipal OidcUser oidcUser`) in the controller that include the token, however, are only showing the ID token and not the access token.\r\n\r\nGetting the token via the `OAuth2AuthorizedClientService` does not work either, same problem, as I can only get the ID token, but not the access token.\r\n\r\n----------\r\n\r\nUpdate #1, 13.12.2022/11:40: I am using PingOne by PingIdentity as the authentication provider and the following dependencies are or might be related or helpful to this matter:\r\n\r\n - spring-boot-starter-web\r\n - spring-boot-starter-security\r\n - spring-boot-starter-thymeleaf\r\n - spring-boot-starter-web-services\r\n - spring-boot-starter-oauth2-resource-server","title":"Get the OAuth2/OIDC access token with every request in Spring","body":"<p>I'm trying to enable multi-tenancy for a previously single-user system. The application used to run on a local server and had a relatively simple frontend baked in.</p>\n<p>Now I want to allow multiple users to simultaneously use it in a cloud environment. I went ahead and implemented Auth2 with OIDC and PKCE to redirect users to an external Auth Provider. What I want now is that for every request, the user sends his Access token with the request in order for me to decide what data to provide with the answer.</p>\n<p>I could not figure out how to obtain that data, as it seems that the spring framework (by default) only sends the ID token with the request. I suspect the fact that my software would simultaneously be the client and the resource server has something to do with it.</p>\n<p>This is my first question, so I'm very happy to modify or extend my question if I've forgotten anything.</p>\n<p>What I've tried to far:</p>\n<p>I've used Postman to verify that the three tokens, ID token, refresh token and access token are issued correctly and can be retrieved with my credentials.</p>\n<p>I tried getting the access token from the request itself. Any parameters (like <code>@AuthenticationPrincipal OidcUser oidcUser</code>) in the controller that include the token, however, are only showing the ID token and not the access token.</p>\n<p>Getting the token via the <code>OAuth2AuthorizedClientService</code> does not work either, same problem, as I can only get the ID token, but not the access token.</p>\n<hr />\n<p>Update #1, 13.12.2022/11:40: I am using PingOne by PingIdentity as the authentication provider and the following dependencies are or might be related or helpful to this matter:</p>\n<ul>\n<li>spring-boot-starter-web</li>\n<li>spring-boot-starter-security</li>\n<li>spring-boot-starter-thymeleaf</li>\n<li>spring-boot-starter-web-services</li>\n<li>spring-boot-starter-oauth2-resource-server</li>\n</ul>\n"},{"tags":["java","intellij-idea","command-line","console","development-environment"],"comments":[{"owner":{"account_id":2264130,"reputation":38897,"user_id":1993366,"accept_rate":86,"display_name":"vikingsteve"},"score":3,"creation_date":1363007666,"post_id":15339148,"comment_id":21663798,"body_markdown":"IntelliJ: check if System property `java.library.path` contains `C:\\Program Files (x86)\\JetBrains\\IntelliJ IDEA 12.0.1\\bin`, or something like it","body":"IntelliJ: check if System property <code>java.library.path</code> contains <code>C:\\Program Files (x86)\\JetBrains\\IntelliJ IDEA 12.0.1\\bin</code>, or something like it"},{"owner":{"account_id":4646767,"reputation":17781,"user_id":3764804,"accept_rate":59,"display_name":"BullyWiiPlaza"},"score":1,"creation_date":1492814788,"post_id":15339148,"comment_id":74158430,"body_markdown":"@vikingsteve: Caution, this only works on `Windows`. See my answer below for a platform-independent solution","body":"@vikingsteve: Caution, this only works on <code>Windows</code>. See my answer below for a platform-independent solution"}],"answers":[{"tags":[],"owner":{"account_id":441056,"reputation":11115,"user_id":830964,"accept_rate":50,"display_name":"Deepak Bala"},"down_vote_count":1,"up_vote_count":6,"is_accepted":true,"score":5,"last_activity_date":1363007982,"creation_date":1363007982,"answer_id":15339663,"question_id":15339148,"body_markdown":"There is no reliable way to do that. The IDE itself would use a JRE / JDK that is installed on your system or one that comes packaged with the IDE. There is nothing in the SDK / JVM that specifically identifies itself as running from within an IDE. \r\n\r\nIf you need to identify this in your program, pass a system property through the -D flag when you run the code from the IDE. The presence (or absence) of this property can be used to determine where the code is being run from.","title":"Check if Java code is running from IntelliJ, Eclipse, etc or command line","body":"<p>There is no reliable way to do that. The IDE itself would use a JRE / JDK that is installed on your system or one that comes packaged with the IDE. There is nothing in the SDK / JVM that specifically identifies itself as running from within an IDE. </p>\n\n<p>If you need to identify this in your program, pass a system property through the -D flag when you run the code from the IDE. The presence (or absence) of this property can be used to determine where the code is being run from.</p>\n"},{"tags":[],"owner":{"account_id":4646767,"reputation":17781,"user_id":3764804,"accept_rate":59,"display_name":"BullyWiiPlaza"},"down_vote_count":1,"up_vote_count":28,"is_accepted":false,"score":27,"last_activity_date":1552039495,"creation_date":1462447667,"answer_id":37049420,"question_id":15339148,"body_markdown":"The following code can detect whether your code is ran from [`IntelliJ IDEA`][1] or not.\r\n\r\n\tpublic static boolean runningFromIntelliJ()\r\n\t{\r\n\t\tString classPath = System.getProperty(&quot;java.class.path&quot;);\r\n\t\treturn classPath.contains(&quot;idea_rt.jar&quot;);\r\n\t}\r\n\r\nIt&#39;s tested working on `Linux`, `Mac OS X` and `Windows` so it should be platform independent.\r\n\r\n  [1]: https://www.jetbrains.com/idea/","title":"Check if Java code is running from IntelliJ, Eclipse, etc or command line","body":"<p>The following code can detect whether your code is ran from <a href=\"https://www.jetbrains.com/idea/\" rel=\"noreferrer\"><code>IntelliJ IDEA</code></a> or not.</p>\n\n<pre><code>public static boolean runningFromIntelliJ()\n{\n    String classPath = System.getProperty(\"java.class.path\");\n    return classPath.contains(\"idea_rt.jar\");\n}\n</code></pre>\n\n<p>It's tested working on <code>Linux</code>, <code>Mac OS X</code> and <code>Windows</code> so it should be platform independent.</p>\n"},{"tags":[],"owner":{"account_id":147942,"reputation":1844,"user_id":359394,"accept_rate":75,"display_name":"gdt"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1562766466,"creation_date":1562766466,"answer_id":56972144,"question_id":15339148,"body_markdown":"This only works if you&#39;re not using one of the &quot;Shorten command line&quot; options from the Run/Debug configuration. As we need to shorten the command line (the classpath was geting too long) I&#39;m now using\r\n\r\n```\r\npublic static boolean runningFromIntelliJ()\r\n{\r\n    return System.getProperty(&quot;idea.test.cyclic.buffer.size&quot;) != null;\r\n}\r\n```\r\n\r\nIntelliJ sets that property when it&#39;s running tests.","title":"Check if Java code is running from IntelliJ, Eclipse, etc or command line","body":"<p>This only works if you're not using one of the \"Shorten command line\" options from the Run/Debug configuration. As we need to shorten the command line (the classpath was geting too long) I'm now using</p>\n\n<pre><code>public static boolean runningFromIntelliJ()\n{\n    return System.getProperty(\"idea.test.cyclic.buffer.size\") != null;\n}\n</code></pre>\n\n<p>IntelliJ sets that property when it's running tests.</p>\n"},{"tags":[],"owner":{"account_id":16917,"reputation":37,"user_id":37358,"display_name":"piero B"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1668262496,"creation_date":1668262496,"answer_id":74413669,"question_id":15339148,"body_markdown":"Tested on a Mac with Eclipse and IntelliJ:\r\n\r\n```String xpcsce = System.getenv(&quot;XPC_SERVICE_NAME&quot;) );```\r\n\r\nwill return &quot;0&quot; with Terminal, &quot;application.org.eclipse.platform.ide....&quot; with Eclipse and &quot;application.com.jetbrains.intellij.ie-EAP....&quot; with IntelliJ... \r\n\r\nBut XPC Service is a MacOS specific feature so this won&#39;t work on any other platform.","title":"Check if Java code is running from IntelliJ, Eclipse, etc or command line","body":"<p>Tested on a Mac with Eclipse and IntelliJ:</p>\n<p><code>String xpcsce = System.getenv(&quot;XPC_SERVICE_NAME&quot;) );</code></p>\n<p>will return &quot;0&quot; with Terminal, &quot;application.org.eclipse.platform.ide....&quot; with Eclipse and &quot;application.com.jetbrains.intellij.ie-EAP....&quot; with IntelliJ...</p>\n<p>But XPC Service is a MacOS specific feature so this won't work on any other platform.</p>\n"},{"tags":[],"owner":{"account_id":1062115,"reputation":2086,"user_id":1063501,"display_name":"Mark Woon"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1674616044,"creation_date":1674616044,"answer_id":75229355,"question_id":15339148,"body_markdown":"There is no reliable way of doing this without a custom run argument, BUT!\r\n\r\nThis works more reliably than checking for `idea_rt.jar`:\r\n\r\n```\r\npublic static void main(String[] args)  {\r\n   boolean intellij = false;\r\n   try {\r\n      intellij = Main.class.getClassLoader().loadClass(&quot;com.intellij.rt.execution.application.AppMainV2&quot;) != null;\r\n   } catch (ClassNotFoundException e) {\r\n   }\r\n   System.out.println(intellij);\r\n}\r\n```\r\n\r\nSource: https://intellij-support.jetbrains.com/hc/en-us/community/posts/360000015340/comments/360000017399","title":"Check if Java code is running from IntelliJ, Eclipse, etc or command line","body":"<p>There is no reliable way of doing this without a custom run argument, BUT!</p>\n<p>This works more reliably than checking for <code>idea_rt.jar</code>:</p>\n<pre><code>public static void main(String[] args)  {\n   boolean intellij = false;\n   try {\n      intellij = Main.class.getClassLoader().loadClass(&quot;com.intellij.rt.execution.application.AppMainV2&quot;) != null;\n   } catch (ClassNotFoundException e) {\n   }\n   System.out.println(intellij);\n}\n</code></pre>\n<p>Source: <a href=\"https://intellij-support.jetbrains.com/hc/en-us/community/posts/360000015340/comments/360000017399\" rel=\"nofollow noreferrer\">https://intellij-support.jetbrains.com/hc/en-us/community/posts/360000015340/comments/360000017399</a></p>\n"},{"tags":[],"owner":{"account_id":27042767,"reputation":33,"user_id":20597388,"display_name":"pvpb0t"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1682359780,"creation_date":1682359369,"answer_id":76094811,"question_id":15339148,"body_markdown":"Here is some ways:\r\n\r\n```java\r\n    private static boolean checkIntelliJIDEA() {\r\n        try {\r\n            URL ideDetectorClassLocation = IdeDetector.class.getProtectionDomain().getCodeSource().getLocation();\r\n            File ideDetectorClassFile = new File(ideDetectorClassLocation.toURI());\r\n            return ideDetectorClassFile.isDirectory();\r\n        } catch (URISyntaxException e) {\r\n            System.err.println(&quot;Error determining if the application is running in an IDE: &quot; + e.getMessage());\r\n        }\r\n\r\n        String ideaLaunchProperty = System.getProperty(&quot;idea.launcher.port&quot;);\r\n        String ideaRunConfigProperty = System.getProperty(&quot;idea.run.configuration&quot;);\r\n        String classpath = System.getProperty(&quot;java.class.path&quot;);\r\n         if(classpath.contains(&quot;idea_rt.jar&quot;)) return true;\r\n         if(ideaLaunchProperty != null) return true;\r\n         if(ideaRunConfigProperty != null) return true;\r\n        if(ideaRunConfigProperty != null) return true;\r\n        try {\r\n            Class.forName(&quot;com.intellij.rt.execution.application.AppMainV2&quot;);\r\n            Class.forName(&quot;com.intellij.rt.execution.application.AppMain&quot;);\r\n            return true;\r\n        } catch (ClassNotFoundException e) {\r\n            return false;\r\n        }\r\n\r\n    }\r\n```","title":"Check if Java code is running from IntelliJ, Eclipse, etc or command line","body":"<p>Here is some ways:</p>\n<pre class=\"lang-java prettyprint-override\"><code>    private static boolean checkIntelliJIDEA() {\n        try {\n            URL ideDetectorClassLocation = IdeDetector.class.getProtectionDomain().getCodeSource().getLocation();\n            File ideDetectorClassFile = new File(ideDetectorClassLocation.toURI());\n            return ideDetectorClassFile.isDirectory();\n        } catch (URISyntaxException e) {\n            System.err.println(&quot;Error determining if the application is running in an IDE: &quot; + e.getMessage());\n        }\n\n        String ideaLaunchProperty = System.getProperty(&quot;idea.launcher.port&quot;);\n        String ideaRunConfigProperty = System.getProperty(&quot;idea.run.configuration&quot;);\n        String classpath = System.getProperty(&quot;java.class.path&quot;);\n         if(classpath.contains(&quot;idea_rt.jar&quot;)) return true;\n         if(ideaLaunchProperty != null) return true;\n         if(ideaRunConfigProperty != null) return true;\n        if(ideaRunConfigProperty != null) return true;\n        try {\n            Class.forName(&quot;com.intellij.rt.execution.application.AppMainV2&quot;);\n            Class.forName(&quot;com.intellij.rt.execution.application.AppMain&quot;);\n            return true;\n        } catch (ClassNotFoundException e) {\n            return false;\n        }\n\n    }\n</code></pre>\n"}],"owner":{"account_id":1691660,"reputation":1564,"user_id":1553874,"accept_rate":88,"display_name":"Nir"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":4245,"favorite_count":0,"down_vote_count":0,"up_vote_count":10,"accepted_answer_id":15339663,"answer_count":6,"score":10,"last_activity_date":1682359780,"creation_date":1363006554,"question_id":15339148,"body_markdown":"I would like to know if there is a way (programmatically) to check if a code is running within Eclipse, IntelliJ, any other editor or running from the command line (console).\r\n\r\nI was thinking to use System.getProperty() but is there any property that indicate this?","title":"Check if Java code is running from IntelliJ, Eclipse, etc or command line","body":"<p>I would like to know if there is a way (programmatically) to check if a code is running within Eclipse, IntelliJ, any other editor or running from the command line (console).</p>\n<p>I was thinking to use System.getProperty() but is there any property that indicate this?</p>\n"},{"tags":["java","spring","spring-boot","spring-security"],"comments":[{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1671107227,"post_id":74810287,"comment_id":132029251,"body_markdown":"Why does `spring-boot-starter-validation` have a version? This either means you are mixing modules from different version of Spring and Spring Boot or that you have another issue in your setup.","body":"Why does <code>spring-boot-starter-validation</code> have a version? This either means you are mixing modules from different version of Spring and Spring Boot or that you have another issue in your setup."},{"owner":{"account_id":3766723,"reputation":246,"user_id":3130060,"accept_rate":67,"display_name":"unknowncodder"},"score":0,"creation_date":1672211846,"post_id":74810287,"comment_id":132241976,"body_markdown":"Did you solve this problem ? @Captain Adil","body":"Did you solve this problem ? @Captain Adil"},{"owner":{"account_id":9727108,"reputation":33,"user_id":15305756,"display_name":"Captain Adil"},"score":0,"creation_date":1673873541,"post_id":74810287,"comment_id":132587551,"body_markdown":"Yes i solved. I was sending scope instead of scopes in postman . It is now working","body":"Yes i solved. I was sending scope instead of scopes in postman . It is now working"}],"answers":[{"tags":[],"owner":{"account_id":2042407,"reputation":713,"user_id":1823251,"accept_rate":57,"display_name":"Mihai Ocneanu"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1673535520,"creation_date":1673535520,"answer_id":75098281,"question_id":74810287,"body_markdown":"I had a similar problem - I don&#39;t know what changed under the hood from 0.3 to 1.0, but there is a sample app available for the authorization server [here][1].\r\n\r\nBasically, the SecurityFilterChain bean configuration is different, and it will also require a JwtDecoder [bean][2].\r\n\r\n\r\n  [1]: https://github.com/spring-projects/spring-authorization-server/blob/f06ed40bbf3e6765626f6850909507203fde59c5/samples/default-authorizationserver/src/main/java/sample/config/AuthorizationServerConfig.java#L64\r\n  [2]: https://github.com/spring-projects/spring-authorization-server/blob/f06ed40bbf3e6765626f6850909507203fde59c5/samples/default-authorizationserver/src/main/java/sample/config/AuthorizationServerConfig.java#L124","title":"I was trying to update new spring security oauth2 authorization server from 0.3.1 to 1.0.0 and got an invalide scope error.How to fix it","body":"<p>I had a similar problem - I don't know what changed under the hood from 0.3 to 1.0, but there is a sample app available for the authorization server <a href=\"https://github.com/spring-projects/spring-authorization-server/blob/f06ed40bbf3e6765626f6850909507203fde59c5/samples/default-authorizationserver/src/main/java/sample/config/AuthorizationServerConfig.java#L64\" rel=\"nofollow noreferrer\">here</a>.</p>\n<p>Basically, the SecurityFilterChain bean configuration is different, and it will also require a JwtDecoder <a href=\"https://github.com/spring-projects/spring-authorization-server/blob/f06ed40bbf3e6765626f6850909507203fde59c5/samples/default-authorizationserver/src/main/java/sample/config/AuthorizationServerConfig.java#L124\" rel=\"nofollow noreferrer\">bean</a>.</p>\n"}],"owner":{"account_id":9727108,"reputation":33,"user_id":15305756,"display_name":"Captain Adil"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1965,"favorite_count":0,"down_vote_count":1,"up_vote_count":3,"accepted_answer_id":75098281,"answer_count":1,"score":2,"last_activity_date":1682359712,"creation_date":1671101104,"question_id":74810287,"body_markdown":"This is the error i get\r\n\r\n    https://spring.io/?error=invalid_scope&amp;error_description=OAuth%202.0%20Parameter:%20scope&amp;error_uri=https://datatracker.ietf.org/doc/html/rfc6749%23section-4.1.2.1\r\n\r\nI get clients from database here is my oauth2 configuration:\r\n\r\n    @Bean\r\n    @Order(Ordered.HIGHEST_PRECEDENCE)\r\n    public SecurityFilterChain securityAuthFilterChain(HttpSecurity http) throws Exception {\r\n        OAuth2AuthorizationServerConfiguration.applyDefaultSecurity(http);\r\n        return http.formLogin().and().build();\r\n    }\r\n\r\n\r\n\r\n    @Bean\r\n    public AuthorizationServerSettings authorizationServerSettings(){return AuthorizationServerSettings.builder().build();}\r\n\r\n    @Bean\r\n    public JWKSource&lt;SecurityContext&gt; jwkSource(){\r\n\r\n        RSAKey rsaKey = JwksKeys.generateRSAKey();\r\n        JWKSet set = new JWKSet(rsaKey);\r\n        return (j, sc) -&gt; j.select(set);\r\n    }\r\n\r\n\r\n\r\n    @Bean\r\n    public OAuth2TokenCustomizer&lt;JwtEncodingContext&gt; jwtCustomizer() {\r\n        return context -&gt; {\r\n            if (context.getTokenType() == OAuth2TokenType.ACCESS_TOKEN) {\r\n                Authentication principal = context.getPrincipal();\r\n                Set&lt;String&gt; authorities = principal.getAuthorities().stream()\r\n                        .map(GrantedAuthority::getAuthority)\r\n                        .collect(Collectors.toSet());\r\n                for (String s:authorities)\r\n                    System.out.println(s);\r\n                context.getClaims().claim(&quot;roles&quot;, authorities);\r\n            }\r\n        };\r\n    }\r\nThis is my WebSecurity Class :\r\n\r\n     private final CorsCustomizer corsCustomizer;\r\n    private final UserService userService;\r\n    private final ClientService clientService;\r\n\r\n    @Bean\r\n    public SecurityFilterChain securityFilterChain(HttpSecurity http) throws Exception {\r\n        OAuth2AuthorizationServerConfigurer configurer = new OAuth2AuthorizationServerConfigurer();\r\n        http.apply(configurer);\r\n\r\n        configurer.registeredClientRepository(clientService);\r\n        corsCustomizer.customize(http);\r\n\r\n        return http.formLogin()\r\n                .and()\r\n                .authorizeHttpRequests()\r\n                .requestMatchers(&quot;/users/**&quot;).permitAll()\r\n                .requestMatchers(&quot;/clients/**&quot;).permitAll()\r\n                .requestMatchers(&quot;/swagger-ui/**&quot;, &quot;/v3/api-docs/**&quot;, &quot;/**&quot;).permitAll()\r\n                .anyRequest().authenticated()\r\n                .and()\r\n                .csrf().ignoringRequestMatchers(&quot;/users/**&quot;, &quot;/clients/**&quot;)\r\n                .and().build();\r\n    }\r\n\r\n    @Bean\r\n    public AuthenticationManager authenticationManagerBean() throws Exception {\r\n        var provider = new DaoAuthenticationProvider();\r\n        provider.setUserDetailsService(userService);\r\n        provider.setPasswordEncoder(passwordEncoder());\r\n        return new ProviderManager(provider);\r\n    }\r\n\r\n\r\n\r\n    @Bean\r\n    public PasswordEncoder passwordEncoder(){\r\n        return NoOpPasswordEncoder.getInstance();\r\n    }\r\n\r\n\r\nAnd it is how i send request :\r\n\r\n    http://localhost:8080/oauth2/authorize?response_type=code&amp;client_id=client&amp;scope=openid&amp;redirect_uri=https://spring.io/auth\r\n\r\n\r\nThis is my pom :\r\n\r\n    &lt;dependencies&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-starter-security&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-starter-validation&lt;/artifactId&gt;\r\n            &lt;version&gt;3.0.0&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n\r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\r\n            &lt;artifactId&gt;lombok&lt;/artifactId&gt;\r\n            &lt;optional&gt;true&lt;/optional&gt;\r\n            &lt;version&gt;1.18.22&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\r\n            &lt;scope&gt;test&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.security&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-security-test&lt;/artifactId&gt;\r\n            &lt;scope&gt;test&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.security&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-security-oauth2-authorization-server&lt;/artifactId&gt;\r\n            &lt;version&gt;1.0.0&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springdoc&lt;/groupId&gt;\r\n            &lt;artifactId&gt;springdoc-openapi-ui&lt;/artifactId&gt;\r\n            &lt;version&gt;1.6.4&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.postgresql&lt;/groupId&gt;\r\n            &lt;artifactId&gt;postgresql&lt;/artifactId&gt;\r\n            &lt;version&gt;42.2.25&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n\r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.mapstruct&lt;/groupId&gt;\r\n            &lt;artifactId&gt;mapstruct&lt;/artifactId&gt;\r\n            &lt;version&gt;1.4.2.Final&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n    &lt;/dependencies&gt;\r\n\r\nMy client service :\r\n\r\n    private final ClientRepository clientRepository;\r\n\r\n    @Override\r\n    public void save(RegisteredClient registeredClient) {\r\n\r\n    }\r\n\r\n    @Override\r\n    public RegisteredClient findById(String id) {\r\n        Client client = clientRepository.findById(id).orElseThrow();\r\n        return toRegisteredClient(client);\r\n    }\r\n\r\n    @Override\r\n    public RegisteredClient findByClientId(String clientId) {\r\n        return findById(clientId);\r\n    }\r\n\r\n    public ClientDto createClient(CreateClientRequest request) {\r\n        var client = new Client(request);\r\n        var scopes = request.getScopes().stream().map(ClientScope::new).collect(Collectors.toSet());\r\n        client.setScopes(scopes);\r\n        client.setClientRedirectUrls(request.getRedirectUris().stream()\r\n                .map(url -&gt; new ClientRedirectUrl(url, client))\r\n                .collect(Collectors.toSet()));\r\n        clientRepository.save(client);\r\n        return new ClientDto(client);\r\n    }\r\n\r\n    public RegisteredClient toRegisteredClient(Client client) {\r\n        RegisteredClient.Builder builder = RegisteredClient.withId(client.getId())\r\n                .clientId(client.getId())\r\n                .clientSecret(client.getSecret())\r\n                .clientAuthenticationMethod(client.getAuthenticationMethod())\r\n                .authorizationGrantTypes(\r\n                        authorizationGrantTypes -&gt; authorizationGrantTypes.addAll(client.getGrantTypes()))\r\n                .redirectUris(\r\n                        redirectUris -&gt; redirectUris.addAll(client.getClientRedirectUrls()\r\n                                .stream()\r\n                                .map(ClientRedirectUrl::getUrl)\r\n                                .collect(Collectors.toSet())))\r\n                .scopes(scopes -&gt; scopes.addAll(client.getScopes()\r\n                        .stream()\r\n                        .map(ClientScope::getScope)\r\n                        .collect(Collectors.toSet())));\r\n        return builder.build();\r\n    }\r\nAfter i updated to oauth2 1.0.0 it began to give me invalid scope error and it doesn&#39;t redirect to login page like it did before. How can i fix it?","title":"I was trying to update new spring security oauth2 authorization server from 0.3.1 to 1.0.0 and got an invalide scope error.How to fix it","body":"<p>This is the error i get</p>\n<pre><code>https://spring.io/?error=invalid_scope&amp;error_description=OAuth%202.0%20Parameter:%20scope&amp;error_uri=https://datatracker.ietf.org/doc/html/rfc6749%23section-4.1.2.1\n</code></pre>\n<p>I get clients from database here is my oauth2 configuration:</p>\n<pre><code>@Bean\n@Order(Ordered.HIGHEST_PRECEDENCE)\npublic SecurityFilterChain securityAuthFilterChain(HttpSecurity http) throws Exception {\n    OAuth2AuthorizationServerConfiguration.applyDefaultSecurity(http);\n    return http.formLogin().and().build();\n}\n\n\n\n@Bean\npublic AuthorizationServerSettings authorizationServerSettings(){return AuthorizationServerSettings.builder().build();}\n\n@Bean\npublic JWKSource&lt;SecurityContext&gt; jwkSource(){\n\n    RSAKey rsaKey = JwksKeys.generateRSAKey();\n    JWKSet set = new JWKSet(rsaKey);\n    return (j, sc) -&gt; j.select(set);\n}\n\n\n\n@Bean\npublic OAuth2TokenCustomizer&lt;JwtEncodingContext&gt; jwtCustomizer() {\n    return context -&gt; {\n        if (context.getTokenType() == OAuth2TokenType.ACCESS_TOKEN) {\n            Authentication principal = context.getPrincipal();\n            Set&lt;String&gt; authorities = principal.getAuthorities().stream()\n                    .map(GrantedAuthority::getAuthority)\n                    .collect(Collectors.toSet());\n            for (String s:authorities)\n                System.out.println(s);\n            context.getClaims().claim(&quot;roles&quot;, authorities);\n        }\n    };\n}\n</code></pre>\n<p>This is my WebSecurity Class :</p>\n<pre><code> private final CorsCustomizer corsCustomizer;\nprivate final UserService userService;\nprivate final ClientService clientService;\n\n@Bean\npublic SecurityFilterChain securityFilterChain(HttpSecurity http) throws Exception {\n    OAuth2AuthorizationServerConfigurer configurer = new OAuth2AuthorizationServerConfigurer();\n    http.apply(configurer);\n\n    configurer.registeredClientRepository(clientService);\n    corsCustomizer.customize(http);\n\n    return http.formLogin()\n            .and()\n            .authorizeHttpRequests()\n            .requestMatchers(&quot;/users/**&quot;).permitAll()\n            .requestMatchers(&quot;/clients/**&quot;).permitAll()\n            .requestMatchers(&quot;/swagger-ui/**&quot;, &quot;/v3/api-docs/**&quot;, &quot;/**&quot;).permitAll()\n            .anyRequest().authenticated()\n            .and()\n            .csrf().ignoringRequestMatchers(&quot;/users/**&quot;, &quot;/clients/**&quot;)\n            .and().build();\n}\n\n@Bean\npublic AuthenticationManager authenticationManagerBean() throws Exception {\n    var provider = new DaoAuthenticationProvider();\n    provider.setUserDetailsService(userService);\n    provider.setPasswordEncoder(passwordEncoder());\n    return new ProviderManager(provider);\n}\n\n\n\n@Bean\npublic PasswordEncoder passwordEncoder(){\n    return NoOpPasswordEncoder.getInstance();\n}\n</code></pre>\n<p>And it is how i send request :</p>\n<pre><code>http://localhost:8080/oauth2/authorize?response_type=code&amp;client_id=client&amp;scope=openid&amp;redirect_uri=https://spring.io/auth\n</code></pre>\n<p>This is my pom :</p>\n<pre><code>&lt;dependencies&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-security&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-validation&lt;/artifactId&gt;\n        &lt;version&gt;3.0.0&lt;/version&gt;\n    &lt;/dependency&gt;\n\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\n        &lt;artifactId&gt;lombok&lt;/artifactId&gt;\n        &lt;optional&gt;true&lt;/optional&gt;\n        &lt;version&gt;1.18.22&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n        &lt;scope&gt;test&lt;/scope&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.security&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-security-test&lt;/artifactId&gt;\n        &lt;scope&gt;test&lt;/scope&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.security&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-security-oauth2-authorization-server&lt;/artifactId&gt;\n        &lt;version&gt;1.0.0&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springdoc&lt;/groupId&gt;\n        &lt;artifactId&gt;springdoc-openapi-ui&lt;/artifactId&gt;\n        &lt;version&gt;1.6.4&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.postgresql&lt;/groupId&gt;\n        &lt;artifactId&gt;postgresql&lt;/artifactId&gt;\n        &lt;version&gt;42.2.25&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.mapstruct&lt;/groupId&gt;\n        &lt;artifactId&gt;mapstruct&lt;/artifactId&gt;\n        &lt;version&gt;1.4.2.Final&lt;/version&gt;\n    &lt;/dependency&gt;\n&lt;/dependencies&gt;\n</code></pre>\n<p>My client service :</p>\n<pre><code>private final ClientRepository clientRepository;\n\n@Override\npublic void save(RegisteredClient registeredClient) {\n\n}\n\n@Override\npublic RegisteredClient findById(String id) {\n    Client client = clientRepository.findById(id).orElseThrow();\n    return toRegisteredClient(client);\n}\n\n@Override\npublic RegisteredClient findByClientId(String clientId) {\n    return findById(clientId);\n}\n\npublic ClientDto createClient(CreateClientRequest request) {\n    var client = new Client(request);\n    var scopes = request.getScopes().stream().map(ClientScope::new).collect(Collectors.toSet());\n    client.setScopes(scopes);\n    client.setClientRedirectUrls(request.getRedirectUris().stream()\n            .map(url -&gt; new ClientRedirectUrl(url, client))\n            .collect(Collectors.toSet()));\n    clientRepository.save(client);\n    return new ClientDto(client);\n}\n\npublic RegisteredClient toRegisteredClient(Client client) {\n    RegisteredClient.Builder builder = RegisteredClient.withId(client.getId())\n            .clientId(client.getId())\n            .clientSecret(client.getSecret())\n            .clientAuthenticationMethod(client.getAuthenticationMethod())\n            .authorizationGrantTypes(\n                    authorizationGrantTypes -&gt; authorizationGrantTypes.addAll(client.getGrantTypes()))\n            .redirectUris(\n                    redirectUris -&gt; redirectUris.addAll(client.getClientRedirectUrls()\n                            .stream()\n                            .map(ClientRedirectUrl::getUrl)\n                            .collect(Collectors.toSet())))\n            .scopes(scopes -&gt; scopes.addAll(client.getScopes()\n                    .stream()\n                    .map(ClientScope::getScope)\n                    .collect(Collectors.toSet())));\n    return builder.build();\n}\n</code></pre>\n<p>After i updated to oauth2 1.0.0 it began to give me invalid scope error and it doesn't redirect to login page like it did before. How can i fix it?</p>\n"},{"tags":["java","spring-boot","spring-security","google-oauth"],"answers":[{"tags":[],"owner":{"account_id":308139,"reputation":8199,"user_id":619830,"accept_rate":75,"display_name":"ch4mp"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1672043313,"creation_date":1672043313,"answer_id":74918506,"question_id":74917751,"body_markdown":"Requests between a web-browser and a Spring OAuth2 **client** are not OAuth2. By default, it is secured with sessions, not `Bearer` `Authorization` header.\r\n\r\nPostman is primarily a REST client, not a web browser. It is intended to test REST APIs (`@RestController` or `@Controller` with `@ResponseBody`) which are **resource-servers**, not clients.\r\n\r\nIt is possible for an app to be both a resource-server (REST API) and a client (`@Controller` with methods returning the name of Thymeleaf templates or using WebClient to query other OAuth2 web-services), but you&#39;ll have to configure two separate SecurityFilterChains segregated with `securityMatcher`:\r\n- a &quot;client&quot; one with sessions, CSRF protection and oauth2Login for your Thymeleaf pages (or JSF or any other server-side rendering framework)\r\n- a &quot;resource-server&quot; one with JWT decoder or introspection and likely disabled sessions and CSRF.\r\n\r\nYou can refer to [those tutorials][1] I wrote for instructions to configure a resource-server (there is even a tutorial with a Spring app being both resource-server and client)\r\n\r\n\r\n  [1]: https://github.com/ch4mpy/spring-addons/tree/master/samples/tutorials","title":"Cannot access protected URL using postman","body":"<p>Requests between a web-browser and a Spring OAuth2 <strong>client</strong> are not OAuth2. By default, it is secured with sessions, not <code>Bearer</code> <code>Authorization</code> header.</p>\n<p>Postman is primarily a REST client, not a web browser. It is intended to test REST APIs (<code>@RestController</code> or <code>@Controller</code> with <code>@ResponseBody</code>) which are <strong>resource-servers</strong>, not clients.</p>\n<p>It is possible for an app to be both a resource-server (REST API) and a client (<code>@Controller</code> with methods returning the name of Thymeleaf templates or using WebClient to query other OAuth2 web-services), but you'll have to configure two separate SecurityFilterChains segregated with <code>securityMatcher</code>:</p>\n<ul>\n<li>a &quot;client&quot; one with sessions, CSRF protection and oauth2Login for your Thymeleaf pages (or JSF or any other server-side rendering framework)</li>\n<li>a &quot;resource-server&quot; one with JWT decoder or introspection and likely disabled sessions and CSRF.</li>\n</ul>\n<p>You can refer to <a href=\"https://github.com/ch4mpy/spring-addons/tree/master/samples/tutorials\" rel=\"nofollow noreferrer\">those tutorials</a> I wrote for instructions to configure a resource-server (there is even a tutorial with a Spring app being both resource-server and client)</p>\n"}],"owner":{"account_id":27353774,"reputation":1,"user_id":20862515,"display_name":"Ezio"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":228,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1682359264,"creation_date":1672036029,"question_id":74917751,"body_markdown":"I am having trouble with a Spring Boot OAuth2 project. I created my application as a client and started the server. I am able to access the protected URLs using my browser but cannot do the same using Postman (even after creating an OAuth2.0 Token and sending it as an Authorization header). While trying it with Postman it always returns an HTML document of the google sign in page.\r\nI&#39;m using the \r\n```\r\noauth2-client \r\n```\r\ndependency for my application.\r\n\r\nI tried adding a custom filter but it&#39;s not working. I even tried using the JWT token instead of the access_token (opaque token) issued but that didn&#39;t work either. \r\nWhen I&#39;m trying to access the protected URLs using the browser it is able to get information of the signed in user and is returning the expected value.\r\n\r\nEdit: I am using Google as the authentication provider.","title":"Cannot access protected URL using postman","body":"<p>I am having trouble with a Spring Boot OAuth2 project. I created my application as a client and started the server. I am able to access the protected URLs using my browser but cannot do the same using Postman (even after creating an OAuth2.0 Token and sending it as an Authorization header). While trying it with Postman it always returns an HTML document of the google sign in page.\nI'm using the</p>\n<pre><code>oauth2-client \n</code></pre>\n<p>dependency for my application.</p>\n<p>I tried adding a custom filter but it's not working. I even tried using the JWT token instead of the access_token (opaque token) issued but that didn't work either.\nWhen I'm trying to access the protected URLs using the browser it is able to get information of the signed in user and is returning the expected value.</p>\n<p>Edit: I am using Google as the authentication provider.</p>\n"},{"tags":["java","spring","spring-boot","h2"],"comments":[{"owner":{"account_id":19535095,"reputation":2864,"user_id":14294053,"display_name":"Mar-Z"},"score":1,"creation_date":1682237623,"post_id":76083694,"comment_id":134181204,"body_markdown":"Hello, the error is not about price in product table but in inoices_details. You have it defined in DB but not in Java code. Add it to entity and set a value. Or remove from the table if not needed.","body":"Hello, the error is not about price in product table but in inoices_details. You have it defined in DB but not in Java code. Add it to entity and set a value. Or remove from the table if not needed."},{"owner":{"account_id":25091091,"reputation":3,"user_id":18942722,"display_name":"ramalandajo"},"score":0,"creation_date":1682265111,"post_id":76083694,"comment_id":134184433,"body_markdown":"@Mar-Z you are absolutely right, I deleted the price in the schema and the error went away, I got a stackoverflow instead but already solved it. Thanks a bunch!","body":"@Mar-Z you are absolutely right, I deleted the price in the schema and the error went away, I got a stackoverflow instead but already solved it. Thanks a bunch!"}],"owner":{"account_id":25091091,"reputation":3,"user_id":18942722,"display_name":"ramalandajo"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":160,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1682358899,"creation_date":1682236251,"question_id":76083694,"body_markdown":"I am doing a SpringBoot Java project simulating a VERY basic ecommerce. I need to do a Post using postman to create a new Invoice to simulate a client buying something. The Post would be like this:\r\n\r\n```\r\n{\r\n    &quot;client&quot;: {\r\n        &quot;id&quot;: 1, \r\n        &quot;name&quot;: &quot;Ramiro&quot;,\r\n        &quot;lastname&quot;: &quot;Landajo&quot;,\r\n        &quot;docnumber&quot;: &quot;11111111&quot; \r\n        },\r\n    &quot;items&quot;: [\r\n        {\r\n            &quot;amount&quot;: 20,\r\n            &quot;product&quot;: {\r\n                &quot;id&quot;: 1,\r\n                &quot;description&quot;: &quot;Control Remoto&quot;,\r\n                &quot;code&quot;: &quot;123&quot;,\r\n                &quot;stock&quot;: 50,\r\n                &quot;price&quot;: 100.00\r\n            }\r\n        },\r\n        {\r\n            &quot;amount&quot;: 2,\r\n            &quot;product&quot;: {\r\n                &quot;id&quot;: 2,\r\n                &quot;description&quot;: &quot;PlayStation 5&quot;,\r\n                &quot;code&quot;: &quot;567&quot;,\r\n                &quot;stock&quot;: 2,\r\n                &quot;price&quot;: 2000.00\r\n            }\r\n        }\r\n    ]\r\n}\r\n```\r\n\r\nSo I have a ClientModel class, a ProductModel class, an InvoiceModel class and inside the invoice model one of the attributes is a list containing InvoiceDetailsModel class which would be the items in the postman request, one for each product. The first problem I am having is that when send the post, the id on the InvoicesDetailsModel doesnt autogenerate and is always null, although I have GenerationType.IDENTITY set up, as you can see here:\r\n\r\n```\r\n2023-04-22 20:13:49.832  INFO 14448 --- [nio-8080-exec-2] c.L.D.services.InvoiceService            : Saved Invoice: InvoiceModel(id=3, client=ClientModel(id=1, name=Ramiro, lastname=Landajo, docnumber=11111111), created_at=2023-04-22T20:13:49.788108800, items=[InvoiceDetailsModel(id=null, amount=20, product=ProductModel(id=1, description=Control Remoto, code=123, stock=50, price=100.0)), **InvoiceDetailsModel(id=null**, amount=2, product=ProductModel(id=2, description=PlayStation 5, code=567, stock=2, price=2000.0))], total=6000.0)\r\n2023-04-22 20:13:49.832  INFO 14448 --- [nio-8080-exec-2] c.L.D.services.InvoiceService            : Test: InvoiceDetailsModel(id=null, amount=20, product=ProductModel(id=1, description=Control Remoto, code=123, stock=50, price=100.0))\r\n```\r\n\r\nBut it still works so maybe thats because of the other error im getting. The other error says the following:\r\n\r\n```\r\n2023-04-22 20:13:49.837 ERROR 14448 --- [nio-8080-exec-2] o.h.engine.jdbc.spi.SqlExceptionHelper   : NULL not allowed for column &quot;PRICE&quot;; SQL statement:\r\ninsert into invoices_details (invoice_detail_id, amount, invoice_id, product_id) values (default, ?, ?, ?) [23502-214]\r\n2023-04-22 20:13:49.849 ERROR 14448 --- [nio-8080-exec-2] o.a.c.c.C.[.[.[/].[dispatcherServlet]    : Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed; nested exception is org.springframework.dao.DataIntegrityViolationException: could not execute statement; SQL [n/a]; constraint [null]; nested exception is org.hibernate.exception.ConstraintViolationException: could not execute statement] with root cause\r\norg.h2.jdbc.JdbcSQLIntegrityConstraintViolationException: NULL not allowed for column &quot;PRICE&quot;; SQL statement:\r\ninsert into invoices_details (invoice_detail_id, amount, invoice_id, product_id) values (default, ?, ?, ?) [23502-214]\r\n\r\n```\r\nIt says i have an error on line 63 where its where im saving the InvoicesDetailsModel on the DB (which is h2 btw). This is the part of the Invoice service class (that saves the Invoices and the InvoicesDetails, there is no InvoicesDetailsService class).\r\n\r\n```\r\nList&lt;InvoiceDetailsModel&gt; listDetails = new ArrayList&lt;&gt;();\r\nfor (InvoiceDetailsModel item : newInvoice.getItems()){\r\n    log.info(&quot;Prueba: &quot; + item.toString());\r\n    item.setInvoice(newInvoice);\r\n    listDetails.add(item);\r\n    this.invoiceDetailsRepository.save(item);\r\n}\r\n```\r\n\r\n\r\nI dont understand why it says that price is null when i clearly am sending the price in postman AND it appears in the logs on the IDE. Can anyone PLEASE help me?\r\nHere are the models, schema and invoice service:\r\nInvoiceModel.java\r\n```\r\nimport com.fasterxml.jackson.annotation.JsonIgnore;\r\nimport lombok.Data;\r\nimport lombok.NoArgsConstructor;\r\n\r\nimport javax.persistence.*;\r\nimport javax.validation.constraints.Min;\r\nimport javax.validation.constraints.NotNull;\r\nimport java.time.LocalDateTime;\r\nimport java.util.List;\r\n\r\n@Entity\r\n@Table(name = &quot;invoices&quot;)\r\n@Data\r\n@NoArgsConstructor\r\npublic class InvoiceModel {\r\n    @Id\r\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n    private Long id;\r\n    @NotNull\r\n    @ManyToOne\r\n    @JoinColumn(name = &quot;client_id&quot;)\r\n    private ClientModel client;\r\n    @NotNull\r\n    @JsonIgnore\r\n    private LocalDateTime created_at; // YYYY-MM-DD ...\r\n    @NotNull\r\n    @OneToMany(mappedBy = &quot;invoice&quot;)\r\n    private List&lt;InvoiceDetailsModel&gt; items;\r\n    @Min(0)\r\n    @NotNull\r\n    @JsonIgnore\r\n    private double total;\r\n\r\n}\r\n```\r\nInvoicesDetailsModel.java\r\n\r\n```\r\n@Entity\r\n@Table(name = &quot;invoices_details&quot;)\r\n@Data\r\n@NoArgsConstructor\r\npublic class InvoiceDetailsModel {\r\n    @Id\r\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n    @Column(name = &quot;invoice_detail_id&quot;)\r\n    private Long id;\r\n    @NotNull\r\n    @ManyToOne\r\n    @JoinColumn(name = &quot;invoice_id&quot;)\r\n    @ToString.Exclude\r\n    private InvoiceModel invoice;   //comprobante al que pertenece\r\n    @Min(0)\r\n    private int amount;  //cantidad del producto comprado\r\n    @NotNull\r\n    @ManyToOne\r\n    @JoinColumn(name = &quot;product_id&quot;)\r\n    private ProductModel product;\r\n\r\n}\r\n```\r\nProductModel.java\r\n\r\n```\r\n@Entity\r\n@Table(name = &quot;products&quot;)\r\n@Data\r\n@NoArgsConstructor\r\npublic class ProductModel {\r\n    @Id\r\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n    private Long id;\r\n    private String description;\r\n    @NotNull\r\n    private String code;\r\n    @Min(0)\r\n    private int stock;\r\n    private double price;\r\n\r\n}\r\n```\r\nschema\r\n\r\n```\r\nCREATE TABLE clients(\r\n    id integer PRIMARY KEY AUTO_INCREMENT,\r\n    name varchar(75) not null ,\r\n    lastname varchar(75) not null ,\r\n    docnumber varchar(11) unique not null\r\n);\r\n\r\nCREATE TABLE products(\r\n    id integer PRIMARY KEY AUTO_INCREMENT,\r\n    description varchar(150),\r\n    code varchar(50) unique not null ,\r\n    stock int,\r\n    price double not null\r\n);\r\n\r\nCREATE TABLE invoices(\r\n    id integer PRIMARY KEY AUTO_INCREMENT,\r\n    client_id int,\r\n    created_at date not null ,\r\n    total double not null,\r\n    constraint fk_client_id foreign key(client_id) references clients(id)\r\n);\r\n\r\nCREATE TABLE invoices_details(\r\n    invoice_detail_id integer PRIMARY KEY AUTO_INCREMENT,\r\n    invoice_id int,\r\n    amount int not null ,\r\n    product_id int,\r\n    price double not null,\r\n    constraint fk_invoice_id foreign key(invoice_id) references invoices(id),\r\n    constraint fk_product_id foreign key(product_id) references products(id)\r\n);\r\n\r\ninsert into clients(name, lastname, docnumber) values (&#39;Ramiro&#39;, &#39;Landajo&#39;, &#39;11111111&#39;), (&#39;Dibu&#39;,&#39;Martinez&#39;, &#39;22222222&#39;);\r\n\r\ninsert into products(description, code, stock, price) values (&#39;Control Remoto&#39;, &#39;123&#39;, 50, 100), (&#39;PlayStation 5&#39;, &#39;567&#39;, 2, 2000);\r\n\r\ninsert into invoices(client_id, created_at, total) values (2, &#39;2023-04-08&#39;, 2500), (1, &#39;2023-04-09&#39;, 150);\r\n\r\ninsert into invoices_details(invoice_id, amount, product_id, price) values (1, 1, 2, 2000+500), (2, 1, 1, 100+50);\r\n```\r\nInvoice Service createInvoice method\r\n\r\n```\r\n@Slf4j\r\n@Service\r\npublic class InvoiceService {\r\n\r\n    @Autowired\r\n    InvoiceRepository invoiceRepository;\r\n    @Autowired\r\n    ClientService clientService;\r\n    @Autowired\r\n    InvoiceDetailsRepository invoiceDetailsRepository;\r\n    @Autowired\r\n    ProductService productService;\r\n\r\n    public InvoiceModel createInvoice(InvoiceModel newInvoice) throws Exception {\r\n        if (newInvoice == null){        // para chequear que el comprobante no este vacio\r\n            log.info(&quot;No se puede crear un comprobante vacio&quot;);\r\n            throw new InvoiceEmptyException(&quot;No se puede crear un comprobante vacio&quot;);\r\n        }\r\n\r\n        this.clientService.findClientById(newInvoice.getClient().getId()); //chequear que el cliente existe en la BD\r\n\r\n        // chequeamos que haya stock de cada producto a comprar\r\n        for (InvoiceDetailsModel item : newInvoice.getItems()){\r\n            if (item.getProduct().getStock() - item.getAmount() &lt; 0){\r\n                log.info(&quot;Stock insuficiente del producto: &quot; + item.getProduct());\r\n                throw new Exception(&quot;Stock insuficiente del producto: &quot; + item.getProduct());\r\n            }\r\n        }\r\n\r\n        double total = calculateTotal(newInvoice.getItems()); //calculamos el total a abonar\r\n\r\n        // seteamos los valores de fecha y total a abonar\r\n        newInvoice.setCreated_at(LocalDateTime.now());\r\n        newInvoice.setTotal(total);\r\n\r\n        //guardamos el comprobante y obtenemos el id\r\n        this.invoiceRepository.save(newInvoice);\r\n        log.info(&quot;El comprobante guardado: &quot; + newInvoice);\r\n\r\n        //creamos una lista para guardar los detalles de cada producto del comprobante en el invoiceDetailsRepository\r\n        List&lt;InvoiceDetailsModel&gt; listDetails = new ArrayList&lt;&gt;();\r\n        for (InvoiceDetailsModel item : newInvoice.getItems()){\r\n            log.info(&quot;Prueba: &quot; + item.toString());\r\n            item.setInvoice(newInvoice);            // se le asigna el invoice para que el detalle sepa a que factura pertenece\r\n            listDetails.add(item);\r\n            this.invoiceDetailsRepository.save(item);\r\n        }\r\n        newInvoice.setItems(listDetails);\r\n        log.info(&quot;INVOICE COMPLETE : &quot; + newInvoice);\r\n\r\n        //actualizamos el stock\r\n        this.productService.updateStock(newInvoice);\r\n\r\n        return newInvoice;\r\n    }\r\n```\r\n\r\nI tried manually setting the ids in postman and it works but it should be autogenerated, and the price error still shows up. Tried setting Double instead of double and saying @nullable to see if maybe it shows up as null but still saves it on the DB but no good. I know that using a DTO should be the best option and much easier for handling this, but I havent learned how to use them yet.\r\n\r\nEDIT: Issues Solved.\r\nI had a column named price in the schema for invoices_details table, and it should not have been there, so deleting it worked perfectly, and the id=null for the invoice_details was happenning because it was not yet saved in the repository, so the id wasn&#39;t autogenerated yet, when I fixed the issue the id showed up without a problem. After fixing it I got a Stack Overflow error instead, but i just had to add a @JsonIgnore on the invoice column in the InvoiceDetailsModel so it wouldn&#39;t create a cicle.","title":"Why is GenerationType.IDENTITY not working? Also, column price saying its null when I post in postman","body":"<p>I am doing a SpringBoot Java project simulating a VERY basic ecommerce. I need to do a Post using postman to create a new Invoice to simulate a client buying something. The Post would be like this:</p>\n<pre><code>{\n    &quot;client&quot;: {\n        &quot;id&quot;: 1, \n        &quot;name&quot;: &quot;Ramiro&quot;,\n        &quot;lastname&quot;: &quot;Landajo&quot;,\n        &quot;docnumber&quot;: &quot;11111111&quot; \n        },\n    &quot;items&quot;: [\n        {\n            &quot;amount&quot;: 20,\n            &quot;product&quot;: {\n                &quot;id&quot;: 1,\n                &quot;description&quot;: &quot;Control Remoto&quot;,\n                &quot;code&quot;: &quot;123&quot;,\n                &quot;stock&quot;: 50,\n                &quot;price&quot;: 100.00\n            }\n        },\n        {\n            &quot;amount&quot;: 2,\n            &quot;product&quot;: {\n                &quot;id&quot;: 2,\n                &quot;description&quot;: &quot;PlayStation 5&quot;,\n                &quot;code&quot;: &quot;567&quot;,\n                &quot;stock&quot;: 2,\n                &quot;price&quot;: 2000.00\n            }\n        }\n    ]\n}\n</code></pre>\n<p>So I have a ClientModel class, a ProductModel class, an InvoiceModel class and inside the invoice model one of the attributes is a list containing InvoiceDetailsModel class which would be the items in the postman request, one for each product. The first problem I am having is that when send the post, the id on the InvoicesDetailsModel doesnt autogenerate and is always null, although I have GenerationType.IDENTITY set up, as you can see here:</p>\n<pre><code>2023-04-22 20:13:49.832  INFO 14448 --- [nio-8080-exec-2] c.L.D.services.InvoiceService            : Saved Invoice: InvoiceModel(id=3, client=ClientModel(id=1, name=Ramiro, lastname=Landajo, docnumber=11111111), created_at=2023-04-22T20:13:49.788108800, items=[InvoiceDetailsModel(id=null, amount=20, product=ProductModel(id=1, description=Control Remoto, code=123, stock=50, price=100.0)), **InvoiceDetailsModel(id=null**, amount=2, product=ProductModel(id=2, description=PlayStation 5, code=567, stock=2, price=2000.0))], total=6000.0)\n2023-04-22 20:13:49.832  INFO 14448 --- [nio-8080-exec-2] c.L.D.services.InvoiceService            : Test: InvoiceDetailsModel(id=null, amount=20, product=ProductModel(id=1, description=Control Remoto, code=123, stock=50, price=100.0))\n</code></pre>\n<p>But it still works so maybe thats because of the other error im getting. The other error says the following:</p>\n<pre><code>2023-04-22 20:13:49.837 ERROR 14448 --- [nio-8080-exec-2] o.h.engine.jdbc.spi.SqlExceptionHelper   : NULL not allowed for column &quot;PRICE&quot;; SQL statement:\ninsert into invoices_details (invoice_detail_id, amount, invoice_id, product_id) values (default, ?, ?, ?) [23502-214]\n2023-04-22 20:13:49.849 ERROR 14448 --- [nio-8080-exec-2] o.a.c.c.C.[.[.[/].[dispatcherServlet]    : Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed; nested exception is org.springframework.dao.DataIntegrityViolationException: could not execute statement; SQL [n/a]; constraint [null]; nested exception is org.hibernate.exception.ConstraintViolationException: could not execute statement] with root cause\norg.h2.jdbc.JdbcSQLIntegrityConstraintViolationException: NULL not allowed for column &quot;PRICE&quot;; SQL statement:\ninsert into invoices_details (invoice_detail_id, amount, invoice_id, product_id) values (default, ?, ?, ?) [23502-214]\n\n</code></pre>\n<p>It says i have an error on line 63 where its where im saving the InvoicesDetailsModel on the DB (which is h2 btw). This is the part of the Invoice service class (that saves the Invoices and the InvoicesDetails, there is no InvoicesDetailsService class).</p>\n<pre><code>List&lt;InvoiceDetailsModel&gt; listDetails = new ArrayList&lt;&gt;();\nfor (InvoiceDetailsModel item : newInvoice.getItems()){\n    log.info(&quot;Prueba: &quot; + item.toString());\n    item.setInvoice(newInvoice);\n    listDetails.add(item);\n    this.invoiceDetailsRepository.save(item);\n}\n</code></pre>\n<p>I dont understand why it says that price is null when i clearly am sending the price in postman AND it appears in the logs on the IDE. Can anyone PLEASE help me?\nHere are the models, schema and invoice service:\nInvoiceModel.java</p>\n<pre><code>import com.fasterxml.jackson.annotation.JsonIgnore;\nimport lombok.Data;\nimport lombok.NoArgsConstructor;\n\nimport javax.persistence.*;\nimport javax.validation.constraints.Min;\nimport javax.validation.constraints.NotNull;\nimport java.time.LocalDateTime;\nimport java.util.List;\n\n@Entity\n@Table(name = &quot;invoices&quot;)\n@Data\n@NoArgsConstructor\npublic class InvoiceModel {\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    private Long id;\n    @NotNull\n    @ManyToOne\n    @JoinColumn(name = &quot;client_id&quot;)\n    private ClientModel client;\n    @NotNull\n    @JsonIgnore\n    private LocalDateTime created_at; // YYYY-MM-DD ...\n    @NotNull\n    @OneToMany(mappedBy = &quot;invoice&quot;)\n    private List&lt;InvoiceDetailsModel&gt; items;\n    @Min(0)\n    @NotNull\n    @JsonIgnore\n    private double total;\n\n}\n</code></pre>\n<p>InvoicesDetailsModel.java</p>\n<pre><code>@Entity\n@Table(name = &quot;invoices_details&quot;)\n@Data\n@NoArgsConstructor\npublic class InvoiceDetailsModel {\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    @Column(name = &quot;invoice_detail_id&quot;)\n    private Long id;\n    @NotNull\n    @ManyToOne\n    @JoinColumn(name = &quot;invoice_id&quot;)\n    @ToString.Exclude\n    private InvoiceModel invoice;   //comprobante al que pertenece\n    @Min(0)\n    private int amount;  //cantidad del producto comprado\n    @NotNull\n    @ManyToOne\n    @JoinColumn(name = &quot;product_id&quot;)\n    private ProductModel product;\n\n}\n</code></pre>\n<p>ProductModel.java</p>\n<pre><code>@Entity\n@Table(name = &quot;products&quot;)\n@Data\n@NoArgsConstructor\npublic class ProductModel {\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    private Long id;\n    private String description;\n    @NotNull\n    private String code;\n    @Min(0)\n    private int stock;\n    private double price;\n\n}\n</code></pre>\n<p>schema</p>\n<pre><code>CREATE TABLE clients(\n    id integer PRIMARY KEY AUTO_INCREMENT,\n    name varchar(75) not null ,\n    lastname varchar(75) not null ,\n    docnumber varchar(11) unique not null\n);\n\nCREATE TABLE products(\n    id integer PRIMARY KEY AUTO_INCREMENT,\n    description varchar(150),\n    code varchar(50) unique not null ,\n    stock int,\n    price double not null\n);\n\nCREATE TABLE invoices(\n    id integer PRIMARY KEY AUTO_INCREMENT,\n    client_id int,\n    created_at date not null ,\n    total double not null,\n    constraint fk_client_id foreign key(client_id) references clients(id)\n);\n\nCREATE TABLE invoices_details(\n    invoice_detail_id integer PRIMARY KEY AUTO_INCREMENT,\n    invoice_id int,\n    amount int not null ,\n    product_id int,\n    price double not null,\n    constraint fk_invoice_id foreign key(invoice_id) references invoices(id),\n    constraint fk_product_id foreign key(product_id) references products(id)\n);\n\ninsert into clients(name, lastname, docnumber) values ('Ramiro', 'Landajo', '11111111'), ('Dibu','Martinez', '22222222');\n\ninsert into products(description, code, stock, price) values ('Control Remoto', '123', 50, 100), ('PlayStation 5', '567', 2, 2000);\n\ninsert into invoices(client_id, created_at, total) values (2, '2023-04-08', 2500), (1, '2023-04-09', 150);\n\ninsert into invoices_details(invoice_id, amount, product_id, price) values (1, 1, 2, 2000+500), (2, 1, 1, 100+50);\n</code></pre>\n<p>Invoice Service createInvoice method</p>\n<pre><code>@Slf4j\n@Service\npublic class InvoiceService {\n\n    @Autowired\n    InvoiceRepository invoiceRepository;\n    @Autowired\n    ClientService clientService;\n    @Autowired\n    InvoiceDetailsRepository invoiceDetailsRepository;\n    @Autowired\n    ProductService productService;\n\n    public InvoiceModel createInvoice(InvoiceModel newInvoice) throws Exception {\n        if (newInvoice == null){        // para chequear que el comprobante no este vacio\n            log.info(&quot;No se puede crear un comprobante vacio&quot;);\n            throw new InvoiceEmptyException(&quot;No se puede crear un comprobante vacio&quot;);\n        }\n\n        this.clientService.findClientById(newInvoice.getClient().getId()); //chequear que el cliente existe en la BD\n\n        // chequeamos que haya stock de cada producto a comprar\n        for (InvoiceDetailsModel item : newInvoice.getItems()){\n            if (item.getProduct().getStock() - item.getAmount() &lt; 0){\n                log.info(&quot;Stock insuficiente del producto: &quot; + item.getProduct());\n                throw new Exception(&quot;Stock insuficiente del producto: &quot; + item.getProduct());\n            }\n        }\n\n        double total = calculateTotal(newInvoice.getItems()); //calculamos el total a abonar\n\n        // seteamos los valores de fecha y total a abonar\n        newInvoice.setCreated_at(LocalDateTime.now());\n        newInvoice.setTotal(total);\n\n        //guardamos el comprobante y obtenemos el id\n        this.invoiceRepository.save(newInvoice);\n        log.info(&quot;El comprobante guardado: &quot; + newInvoice);\n\n        //creamos una lista para guardar los detalles de cada producto del comprobante en el invoiceDetailsRepository\n        List&lt;InvoiceDetailsModel&gt; listDetails = new ArrayList&lt;&gt;();\n        for (InvoiceDetailsModel item : newInvoice.getItems()){\n            log.info(&quot;Prueba: &quot; + item.toString());\n            item.setInvoice(newInvoice);            // se le asigna el invoice para que el detalle sepa a que factura pertenece\n            listDetails.add(item);\n            this.invoiceDetailsRepository.save(item);\n        }\n        newInvoice.setItems(listDetails);\n        log.info(&quot;INVOICE COMPLETE : &quot; + newInvoice);\n\n        //actualizamos el stock\n        this.productService.updateStock(newInvoice);\n\n        return newInvoice;\n    }\n</code></pre>\n<p>I tried manually setting the ids in postman and it works but it should be autogenerated, and the price error still shows up. Tried setting Double instead of double and saying @nullable to see if maybe it shows up as null but still saves it on the DB but no good. I know that using a DTO should be the best option and much easier for handling this, but I havent learned how to use them yet.</p>\n<p>EDIT: Issues Solved.\nI had a column named price in the schema for invoices_details table, and it should not have been there, so deleting it worked perfectly, and the id=null for the invoice_details was happenning because it was not yet saved in the repository, so the id wasn't autogenerated yet, when I fixed the issue the id showed up without a problem. After fixing it I got a Stack Overflow error instead, but i just had to add a @JsonIgnore on the invoice column in the InvoiceDetailsModel so it wouldn't create a cicle.</p>\n"},{"tags":["java","spring","spring-boot","auth0"],"comments":[{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1673535650,"post_id":75089387,"comment_id":132525282,"body_markdown":"The `/person` should already match. I suspect it is due to you are adding params directly in the URL instead of passing them as parameters for the request. You should do `curl http://localhost:8080/person -d &quot;email=me@me.co&quot;`. That will add it as a parameter, else it will be treated as a URL by cUrl and encoded and thus you will fallthrough to the `anyRequest().authenticated()`. So the problem is not the Spring Secuirty config but your cUrl usage.","body":"The <code>&#47;person</code> should already match. I suspect it is due to you are adding params directly in the URL instead of passing them as parameters for the request. You should do <code>curl http:&#47;&#47;localhost:8080&#47;person -d &quot;email=me@me.co&quot;</code>. That will add it as a parameter, else it will be treated as a URL by cUrl and encoded and thus you will fallthrough to the <code>anyRequest().authenticated()</code>. So the problem is not the Spring Secuirty config but your cUrl usage."},{"owner":{"account_id":22143607,"reputation":193,"user_id":16393274,"display_name":"Jose Gleeson"},"score":0,"creation_date":1673540015,"post_id":75089387,"comment_id":132527040,"body_markdown":"So this is saying I cannot use Query parameters with Spring Security?","body":"So this is saying I cannot use Query parameters with Spring Security?"},{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":1,"creation_date":1673548892,"post_id":75089387,"comment_id":132530014,"body_markdown":"You don&#39;t need to, and the curl request was wrong as it was using what you had as the full URL (curl will encode it as a full url and not as a URL with query parameters).","body":"You don&#39;t need to, and the curl request was wrong as it was using what you had as the full URL (curl will encode it as a full url and not as a URL with query parameters)."},{"owner":{"account_id":22143607,"reputation":193,"user_id":16393274,"display_name":"Jose Gleeson"},"score":0,"creation_date":1673637147,"post_id":75089387,"comment_id":132551832,"body_markdown":"Not sure I am sure I follow both curl and commands work on bash. you have to wrap in a quote on ZShell but I confirmed both commands work","body":"Not sure I am sure I follow both curl and commands work on bash. you have to wrap in a quote on ZShell but I confirmed both commands work"}],"owner":{"account_id":22143607,"reputation":193,"user_id":16393274,"display_name":"Jose Gleeson"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":601,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1682358505,"creation_date":1673474018,"question_id":75089387,"body_markdown":"I have the following code...\r\n\r\n```java\r\n\r\nimport com.purepm.admin.services.authentication.AudienceValidator;\r\nimport org.springframework.beans.factory.annotation.Value;\r\nimport org.springframework.context.annotation.Bean;\r\nimport org.springframework.context.annotation.Configuration;\r\nimport org.springframework.security.config.Customizer;\r\nimport org.springframework.security.config.annotation.web.builders.HttpSecurity;\r\nimport org.springframework.security.config.annotation.web.configuration.EnableWebSecurity;\r\nimport org.springframework.security.oauth2.core.DelegatingOAuth2TokenValidator;\r\nimport org.springframework.security.oauth2.core.OAuth2TokenValidator;\r\nimport org.springframework.security.oauth2.jwt.*;\r\nimport org.springframework.security.web.SecurityFilterChain;\r\n\r\n@EnableWebSecurity\r\n@Configuration\r\npublic class SecurityConfig{\r\n\r\n    @Value(&quot;${auth0.audience}&quot;)\r\n    private String audience;\r\n\r\n    @Value(&quot;${spring.security.oauth2.resourceserver.jwt.issuer-uri}&quot;)\r\n    private String issuer;\r\n    @Bean\r\n    JwtDecoder jwtDecoder() {\r\n        NimbusJwtDecoder jwtDecoder = (NimbusJwtDecoder)\r\n                JwtDecoders.fromOidcIssuerLocation(issuer);\r\n\r\n        OAuth2TokenValidator&lt;Jwt&gt; audienceValidator = new AudienceValidator(audience);\r\n        OAuth2TokenValidator&lt;Jwt&gt; withIssuer = JwtValidators.createDefaultWithIssuer(issuer);\r\n        OAuth2TokenValidator&lt;Jwt&gt; withAudience = new DelegatingOAuth2TokenValidator&lt;&gt;(withIssuer, audienceValidator);\r\n\r\n        jwtDecoder.setJwtValidator(withAudience);\r\n\r\n        return jwtDecoder;\r\n    }\r\n    @Bean\r\n    public SecurityFilterChain filterChain(HttpSecurity http) throws Exception {\r\n        http.authorizeHttpRequests()\r\n                .requestMatchers(&quot;/&quot;).permitAll()\r\n                .requestMatchers(&quot;/person&quot;).hasAuthority(&quot;SCOPE_blahablah&quot;)\r\n                .anyRequest().authenticated();\r\n\r\n        return http.build();\r\n    }\r\n}\r\n```\r\n\r\nBut when I use the following command to run the request `curl http://localhost:8080/person -v` I see the expected 403...\r\n\r\n```\r\n*   Trying 127.0.0.1:8080...\r\n* Connected to localhost (127.0.0.1) port 8080 (#0)\r\n&gt; GET /person HTTP/1.1\r\n&gt; Host: localhost:8080\r\n&gt; User-Agent: curl/7.85.0\r\n&gt; Accept: */*\r\n&gt; \r\n* Mark bundle as not supporting multiuse\r\n&lt; HTTP/1.1 403 \r\n&lt; Set-Cookie: JSESSIONID=EFD9C400D91760FE8FA2119AC2EB382B; Path=/; HttpOnly\r\n&lt; X-Content-Type-Options: nosniff\r\n&lt; X-XSS-Protection: 0\r\n&lt; Cache-Control: no-cache, no-store, max-age=0, must-revalidate\r\n&lt; Pragma: no-cache\r\n&lt; Expires: 0\r\n&lt; X-Frame-Options: DENY\r\n&lt; Content-Length: 0\r\n&lt; Date: Wed, 11 Jan 2023 21:45:16 GMT\r\n&lt; \r\n* Connection #0 to host localhost left intact\r\n```\r\n\r\nThis is as expected since I am not providing an Authorization header (Although I would expect a 401). \r\n\r\nBut when I add the query param like `curl http://localhost:8080/person?email=me@me.co` it just lets it right through and I get a 200. Is there a way to use the query string to enforce the 403 when there is a query param as well?","title":"How do I include endpoints with query params when configuring requestMatchers in Spring security 6?","body":"<p>I have the following code...</p>\n<pre class=\"lang-java prettyprint-override\"><code>\nimport com.purepm.admin.services.authentication.AudienceValidator;\nimport org.springframework.beans.factory.annotation.Value;\nimport org.springframework.context.annotation.Bean;\nimport org.springframework.context.annotation.Configuration;\nimport org.springframework.security.config.Customizer;\nimport org.springframework.security.config.annotation.web.builders.HttpSecurity;\nimport org.springframework.security.config.annotation.web.configuration.EnableWebSecurity;\nimport org.springframework.security.oauth2.core.DelegatingOAuth2TokenValidator;\nimport org.springframework.security.oauth2.core.OAuth2TokenValidator;\nimport org.springframework.security.oauth2.jwt.*;\nimport org.springframework.security.web.SecurityFilterChain;\n\n@EnableWebSecurity\n@Configuration\npublic class SecurityConfig{\n\n    @Value(&quot;${auth0.audience}&quot;)\n    private String audience;\n\n    @Value(&quot;${spring.security.oauth2.resourceserver.jwt.issuer-uri}&quot;)\n    private String issuer;\n    @Bean\n    JwtDecoder jwtDecoder() {\n        NimbusJwtDecoder jwtDecoder = (NimbusJwtDecoder)\n                JwtDecoders.fromOidcIssuerLocation(issuer);\n\n        OAuth2TokenValidator&lt;Jwt&gt; audienceValidator = new AudienceValidator(audience);\n        OAuth2TokenValidator&lt;Jwt&gt; withIssuer = JwtValidators.createDefaultWithIssuer(issuer);\n        OAuth2TokenValidator&lt;Jwt&gt; withAudience = new DelegatingOAuth2TokenValidator&lt;&gt;(withIssuer, audienceValidator);\n\n        jwtDecoder.setJwtValidator(withAudience);\n\n        return jwtDecoder;\n    }\n    @Bean\n    public SecurityFilterChain filterChain(HttpSecurity http) throws Exception {\n        http.authorizeHttpRequests()\n                .requestMatchers(&quot;/&quot;).permitAll()\n                .requestMatchers(&quot;/person&quot;).hasAuthority(&quot;SCOPE_blahablah&quot;)\n                .anyRequest().authenticated();\n\n        return http.build();\n    }\n}\n</code></pre>\n<p>But when I use the following command to run the request <code>curl http://localhost:8080/person -v</code> I see the expected 403...</p>\n<pre><code>*   Trying 127.0.0.1:8080...\n* Connected to localhost (127.0.0.1) port 8080 (#0)\n&gt; GET /person HTTP/1.1\n&gt; Host: localhost:8080\n&gt; User-Agent: curl/7.85.0\n&gt; Accept: */*\n&gt; \n* Mark bundle as not supporting multiuse\n&lt; HTTP/1.1 403 \n&lt; Set-Cookie: JSESSIONID=EFD9C400D91760FE8FA2119AC2EB382B; Path=/; HttpOnly\n&lt; X-Content-Type-Options: nosniff\n&lt; X-XSS-Protection: 0\n&lt; Cache-Control: no-cache, no-store, max-age=0, must-revalidate\n&lt; Pragma: no-cache\n&lt; Expires: 0\n&lt; X-Frame-Options: DENY\n&lt; Content-Length: 0\n&lt; Date: Wed, 11 Jan 2023 21:45:16 GMT\n&lt; \n* Connection #0 to host localhost left intact\n</code></pre>\n<p>This is as expected since I am not providing an Authorization header (Although I would expect a 401).</p>\n<p>But when I add the query param like <code>curl http://localhost:8080/person?email=me@me.co</code> it just lets it right through and I get a 200. Is there a way to use the query string to enforce the 403 when there is a query param as well?</p>\n"},{"tags":["java","spring","logging","aspectj"],"comments":[{"owner":{"account_id":1087271,"reputation":64101,"user_id":1082681,"accept_rate":90,"display_name":"kriegaex"},"score":0,"creation_date":1682146761,"post_id":76074561,"comment_id":134172579,"body_markdown":"If you do not like the `@Autowired` workaround, native AspectJ is the way to go. But then you need to decide if you want compile-time weaving (using the Freefair plugin in Gradle, like in your example above) or load-time weaving (using a java agant, as described in the Spring manual). Either way, you should then remove the `@Component` annotation from your aspect, because you do not want a native AspectJ aspect to be re-applied by Spring AOP. If you would share a minimal reproducer on GitHub, I could take a closer look. But there should be plenty examples here already.","body":"If you do not like the <code>@Autowired</code> workaround, native AspectJ is the way to go. But then you need to decide if you want compile-time weaving (using the Freefair plugin in Gradle, like in your example above) or load-time weaving (using a java agant, as described in the Spring manual). Either way, you should then remove the <code>@Component</code> annotation from your aspect, because you do not want a native AspectJ aspect to be re-applied by Spring AOP. If you would share a minimal reproducer on GitHub, I could take a closer look. But there should be plenty examples here already."},{"owner":{"account_id":1087271,"reputation":64101,"user_id":1082681,"accept_rate":90,"display_name":"kriegaex"},"score":0,"creation_date":1682146822,"post_id":76074561,"comment_id":134172582,"body_markdown":"One more thought: It looks quite inefficient to create a new logger instance for every method call. If I were you, I would not do that.","body":"One more thought: It looks quite inefficient to create a new logger instance for every method call. If I were you, I would not do that."},{"owner":{"account_id":22923323,"reputation":11,"user_id":17058834,"display_name":"Norbert Maszlag"},"score":0,"creation_date":1682339459,"post_id":76074561,"comment_id":134194496,"body_markdown":"@kriegaex Thank you, your comment definitely help a lot. Since then I&#39;ve managed to get the post comple weaving get to work and now the nested logging works. The only thing is that the logs at the start of a fuctions are printed twice. The end of the function log is only once. Have you ever come accross anything like this? \nI&#39;ve removed the Component annotation, but there only one instance of the LoggingAspect class, I&#39;ve tried making it a slingleton and the error persisted so thats not the problem.","body":"@kriegaex Thank you, your comment definitely help a lot. Since then I&#39;ve managed to get the post comple weaving get to work and now the nested logging works. The only thing is that the logs at the start of a fuctions are printed twice. The end of the function log is only once. Have you ever come accross anything like this?  I&#39;ve removed the Component annotation, but there only one instance of the LoggingAspect class, I&#39;ve tried making it a slingleton and the error persisted so thats not the problem."},{"owner":{"account_id":22923323,"reputation":11,"user_id":17058834,"display_name":"Norbert Maszlag"},"score":0,"creation_date":1682339938,"post_id":76074561,"comment_id":134194612,"body_markdown":"@kriegaex\n\nid(&quot;io.freefair.aspectj.post-compile-weaving&quot;) version &quot;6.5.1&quot;\n\noptions.compilerArgs.add(&quot;-Xlint:unchecked&quot;)\noptions.compilerArgs.add(&quot;-Xlint:deprecation&quot;)\n\ntasks.withType&lt;JavaCompile&gt; {\n    doFirst {\n options.compilerArgs.add(&quot;-Xlint:unchecked&quot;)\noptions.compilerArgs.add(&quot;-Xlint:deprecation&quot;)\n}\n}\n\ntasks.withType&lt;Test&gt; {\n    doFirst {\n        val aspectjweaverPath = configurations[&quot;testRuntimeClasspath&quot;].find { it.name.contains(&quot;aspectjweaver&quot;) }\njvmArgs(&quot;-javaagent:${aspectjweaverPath}&quot;)\n}}\n\nThese are the changes I made to the gradle file.","body":"@kriegaex  id(&quot;io.freefair.aspectj.post-compile-weaving&quot;) version &quot;6.5.1&quot;  options.compilerArgs.add(&quot;-Xlint:unchecked&quot;) options.compilerArgs.add(&quot;-Xlint:deprecation&quot;)  tasks.withType&lt;JavaCompile&gt; {     doFirst {  options.compilerArgs.add(&quot;-Xlint:unchecked&quot;) options.compilerArgs.add(&quot;-Xlint:deprecation&quot;) } }  tasks.withType&lt;Test&gt; {     doFirst {         val aspectjweaverPath = configurations[&quot;testRuntimeClasspath&quot;].find { it.name.contains(&quot;aspectjweaver&quot;) } jvmArgs(&quot;-javaagent:${aspectjweaverPath}&quot;) }}  These are the changes I made to the gradle file."}],"answers":[{"tags":[],"owner":{"account_id":5636066,"reputation":6620,"user_id":4461537,"accept_rate":89,"display_name":"Ren&#233; Winkler"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1682098126,"creation_date":1682098126,"answer_id":76075479,"question_id":76074561,"body_markdown":"It is like Spring AOP works. Aspects are not called when you call a method inside the same class, but only from outside of the class. However, if you want to enforce to have the Aspect called inside the same class, you can do something like this:\r\n\r\n    @Resource\r\n    private ExampleService self = this;\r\n\r\n    public void someMethod() {\r\n        self.method2();\r\n    }\r\n\r\n    public void anOtherMethod() {\r\n\r\n    }\r\n\r\nCheck this out for more info: https://docs.spring.io/spring/docs/current/spring-framework-reference/core.html#aop-understanding-aop-proxies\r\n","title":"How can I implement nested logging within a Spring component with AspectJ?","body":"<p>It is like Spring AOP works. Aspects are not called when you call a method inside the same class, but only from outside of the class. However, if you want to enforce to have the Aspect called inside the same class, you can do something like this:</p>\n<pre><code>@Resource\nprivate ExampleService self = this;\n\npublic void someMethod() {\n    self.method2();\n}\n\npublic void anOtherMethod() {\n\n}\n</code></pre>\n<p>Check this out for more info: <a href=\"https://docs.spring.io/spring/docs/current/spring-framework-reference/core.html#aop-understanding-aop-proxies\" rel=\"nofollow noreferrer\">https://docs.spring.io/spring/docs/current/spring-framework-reference/core.html#aop-understanding-aop-proxies</a></p>\n"},{"tags":[],"owner":{"account_id":1087271,"reputation":64101,"user_id":1082681,"accept_rate":90,"display_name":"kriegaex"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1682358375,"creation_date":1682347164,"answer_id":76093080,"question_id":76074561,"body_markdown":"&gt; @kriegaex Thank you, your comment definitely help a lot. Since then I&#39;ve managed to get the post comple weaving get to work and now the nested logging works. The only thing is that the logs at the start of a fuctions are printed twice.\r\n\r\nAs a previous Spring AOP user, you might be used to the fact that Spring AOP only knows `execution` joinpoints, but native AspectJ knows several more, most prominently `call` ones. I.e., for the same method, it can intercept the method call (in the calling method) and the method execution (in the called method).\r\n\r\n&gt; The end of the function log is only once. \r\n\r\nThat would surprise me. For the same method call/execution, the result should be consistent. Probably you overlooked or misinterpreted something in your log.\r\n\r\nIn order to see the difference, simply add something like\r\n\r\n```java\r\nSystem.out.println(&quot;[ENTER] &quot; + joinPoint);\r\n```\r\n\r\nand\r\n\r\n```java\r\nSystem.out.println(&quot;[EXIT] &quot; + joinPoint);\r\n```\r\n\r\nto your advice methods.\r\n\r\nYou can fix the problem in several ways, e.g. like this:\r\n\r\n```java\r\n@Before(&quot;@annotation(Loggable) &amp;&amp; execution(* *(..))&quot;)\r\n```\r\n\r\nIf you do not wish to repeat the same pointcut expression in 3 separate advice methods, simply factor them out into one `@Pointcut` expression, referring to the same pointcut in all advice methods.","title":"How can I implement nested logging within a Spring component with AspectJ?","body":"<blockquote>\n<p>@kriegaex Thank you, your comment definitely help a lot. Since then I've managed to get the post comple weaving get to work and now the nested logging works. The only thing is that the logs at the start of a fuctions are printed twice.</p>\n</blockquote>\n<p>As a previous Spring AOP user, you might be used to the fact that Spring AOP only knows <code>execution</code> joinpoints, but native AspectJ knows several more, most prominently <code>call</code> ones. I.e., for the same method, it can intercept the method call (in the calling method) and the method execution (in the called method).</p>\n<blockquote>\n<p>The end of the function log is only once.</p>\n</blockquote>\n<p>That would surprise me. For the same method call/execution, the result should be consistent. Probably you overlooked or misinterpreted something in your log.</p>\n<p>In order to see the difference, simply add something like</p>\n<pre class=\"lang-java prettyprint-override\"><code>System.out.println(&quot;[ENTER] &quot; + joinPoint);\n</code></pre>\n<p>and</p>\n<pre class=\"lang-java prettyprint-override\"><code>System.out.println(&quot;[EXIT] &quot; + joinPoint);\n</code></pre>\n<p>to your advice methods.</p>\n<p>You can fix the problem in several ways, e.g. like this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Before(&quot;@annotation(Loggable) &amp;&amp; execution(* *(..))&quot;)\n</code></pre>\n<p>If you do not wish to repeat the same pointcut expression in 3 separate advice methods, simply factor them out into one <code>@Pointcut</code> expression, referring to the same pointcut in all advice methods.</p>\n"}],"owner":{"account_id":22923323,"reputation":11,"user_id":17058834,"display_name":"Norbert Maszlag"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":288,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1682358375,"creation_date":1682090476,"question_id":76074561,"body_markdown":"I&#39;m working on a Spring Boot Gradle project with Java, where logging is done manually in every function that needs to be logged. In each function that requires logging, a new instance of a custom logger is initialized with the help of Lombok&#39;s @Cleanup annotation. The custom logger implements the AutoCloseable interface, so the @Cleanup annotation automatically closes the resource when the function ends. It works like this:\r\n\r\n```\r\npublic void someFuction(String str) {\r\n    @Cleanup var logging = new CustomLogger(log, &quot;someFuction&quot;, str); //NOSONAR\r\n    logging.startLogging();\r\n    ....\r\n    Some logic\r\n    .....\r\n}\r\n```\r\n\r\nThe @Cleanup annotation essentially puts the code in a *try/finally* block, so it works something like this under the hood:\r\n\r\n```\r\npublic void someFuction(String str) {\r\n    try{\r\n        CustomLogger logging = new CustomLogger(log, &quot;someFuction&quot;, str); //NOSONAR\r\n        logging.startLogging();\r\n        ....\r\n        Some logic\r\n        .....\r\n    } finally(){\r\n        logging.close();\r\n    }\r\n}\r\n```\r\n\r\nThis approach works fine, but having to copy two lines into every function that needs to be logged and manually passing the function name, logger, and parameters of the function every time does not seem like a &quot;clean&quot; solution, and it introduces critical Sonar problems as well.\r\n\r\nSo, I thought I could achieve the same effect easily with a custom annotation and with the help of Spring AOP, more specifically, the AspectJ library.\r\n\r\n    import lombok.extern.slf4j.Slf4j; \r\n    import org.aspectj.lang.JoinPoint; \r\n    import org.aspectj.lang.annotation.AfterReturning; \r\n    import org.aspectj.lang.annotation.AfterThrowing; \r\n    import org.aspectj.lang.annotation.Aspect; \r\n    import org.aspectj.lang.annotation.Before; \r\n    import org.springframework.stereotype.Component;\r\n    \r\n    @Aspect \r\n    @Component \r\n    @Slf4j \r\n    public class LoggingAspect {\r\n        private ThreadLocal&lt;CustomLogger&gt; businessLoggingThreadLocal = new ThreadLocal&lt;&gt;();\r\n    \r\n        @Before(&quot;@annotation(Loggable)&quot;)\r\n        public void logMethodStart(JoinPoint joinPoint) {\r\n            String methodName = joinPoint.getSignature().getName();\r\n            Object[] args = joinPoint.getArgs();\r\n    \r\n            CustomLogger businessLogging = new CustomLogger(log, methodName, args);\r\n            businessLoggingThreadLocal.set(businessLogging);\r\n            businessLogging.logMethodStart();\r\n        }\r\n    \r\n        @AfterReturning(pointcut = &quot;@annotation(Loggable)&quot;, returning = &quot;result&quot;)\r\n        public void logMethodEnd(JoinPoint joinPoint, Object result) {\r\n            CustomLogger businessLogging = businessLoggingThreadLocal.get();\r\n            if (businessLogging != null) {\r\n                businessLogging.close();\r\n                businessLoggingThreadLocal.remove();\r\n            }\r\n        }\r\n    \r\n        @AfterThrowing(pointcut = &quot;@annotation(Loggable)&quot;, throwing = &quot;exception&quot;)\r\n        public void logMethodException(JoinPoint joinPoint, Throwable exception) {\r\n            CustomLogger businessLogging = businessLoggingThreadLocal.get();\r\n            if (businessLogging != null) {\r\n                businessLogging.close();\r\n                businessLoggingThreadLocal.remove();\r\n            }\r\n        }\r\n    }\r\n\r\nThis is my custom annotation:\r\n\r\n```\r\nimport java.lang.annotation.ElementType;\r\nimport java.lang.annotation.Retention;\r\nimport java.lang.annotation.RetentionPolicy;\r\nimport java.lang.annotation.Target;\r\n\r\n@Retention(RetentionPolicy.RUNTIME)\r\n@Target(ElementType.METHOD)\r\npublic @interface Loggable {}\r\n```\r\n\r\nThis &quot;wrapper&quot; around the existing logging mechanism seems fine at first glance, but it cannot perform nested logging within the same Spring component. If a method calls a method in another component, the logging works fine, but if it were to call a method in the same component, it simply does not log the other method.\r\n\r\nFor example:\r\n\r\n    @Service \r\n    public class ExampleService { \r\n        .... \r\n    \r\n        @Loggable \r\n        public void someMethod(){ \r\n            .... \r\n            some logic \r\n            .... \r\n            anOtherMethod(); \r\n        }\r\n    \r\n        @Loggable\r\n        public void anOtherMethod(){\r\n            ....\r\n            some logic\r\n            ....\r\n        }\r\n    }\r\n\r\nThe expected logging would be:\r\n\r\n```\r\nMethod started: someMethod()\r\nMethod started: anOtherMethod()\r\nMethod ended: anOtherMethod()\r\nMethod ended: someMethod()\r\n```\r\n\r\nBut the actual logging, when both of the fuctions are in the same component, is:  \r\n(It works fine, the above mentioned way, if the anOtherMethod() in an a different component)\r\n\r\n```\r\nMethod started: someMethod()\r\nMethod ended: someMethod()\r\n```\r\n\r\nI&#39;m using this gradle plugin:  \r\n`id(&quot;io.freefair.aspectj&quot;) version &quot;8.0.1&quot;`\r\n\r\nand this dependency:  \r\n`implementation(&quot;org.aspectj:aspectjrt:1.9.7&quot;)`\r\n\r\nIt is possible to do nested logging in the same component with AspectJ?If not or if it is not recommended are there better ways to approach this problem?","title":"How can I implement nested logging within a Spring component with AspectJ?","body":"<p>I'm working on a Spring Boot Gradle project with Java, where logging is done manually in every function that needs to be logged. In each function that requires logging, a new instance of a custom logger is initialized with the help of Lombok's @Cleanup annotation. The custom logger implements the AutoCloseable interface, so the @Cleanup annotation automatically closes the resource when the function ends. It works like this:</p>\n<pre><code>public void someFuction(String str) {\n    @Cleanup var logging = new CustomLogger(log, &quot;someFuction&quot;, str); //NOSONAR\n    logging.startLogging();\n    ....\n    Some logic\n    .....\n}\n</code></pre>\n<p>The @Cleanup annotation essentially puts the code in a <em>try/finally</em> block, so it works something like this under the hood:</p>\n<pre><code>public void someFuction(String str) {\n    try{\n        CustomLogger logging = new CustomLogger(log, &quot;someFuction&quot;, str); //NOSONAR\n        logging.startLogging();\n        ....\n        Some logic\n        .....\n    } finally(){\n        logging.close();\n    }\n}\n</code></pre>\n<p>This approach works fine, but having to copy two lines into every function that needs to be logged and manually passing the function name, logger, and parameters of the function every time does not seem like a &quot;clean&quot; solution, and it introduces critical Sonar problems as well.</p>\n<p>So, I thought I could achieve the same effect easily with a custom annotation and with the help of Spring AOP, more specifically, the AspectJ library.</p>\n<pre><code>import lombok.extern.slf4j.Slf4j; \nimport org.aspectj.lang.JoinPoint; \nimport org.aspectj.lang.annotation.AfterReturning; \nimport org.aspectj.lang.annotation.AfterThrowing; \nimport org.aspectj.lang.annotation.Aspect; \nimport org.aspectj.lang.annotation.Before; \nimport org.springframework.stereotype.Component;\n\n@Aspect \n@Component \n@Slf4j \npublic class LoggingAspect {\n    private ThreadLocal&lt;CustomLogger&gt; businessLoggingThreadLocal = new ThreadLocal&lt;&gt;();\n\n    @Before(&quot;@annotation(Loggable)&quot;)\n    public void logMethodStart(JoinPoint joinPoint) {\n        String methodName = joinPoint.getSignature().getName();\n        Object[] args = joinPoint.getArgs();\n\n        CustomLogger businessLogging = new CustomLogger(log, methodName, args);\n        businessLoggingThreadLocal.set(businessLogging);\n        businessLogging.logMethodStart();\n    }\n\n    @AfterReturning(pointcut = &quot;@annotation(Loggable)&quot;, returning = &quot;result&quot;)\n    public void logMethodEnd(JoinPoint joinPoint, Object result) {\n        CustomLogger businessLogging = businessLoggingThreadLocal.get();\n        if (businessLogging != null) {\n            businessLogging.close();\n            businessLoggingThreadLocal.remove();\n        }\n    }\n\n    @AfterThrowing(pointcut = &quot;@annotation(Loggable)&quot;, throwing = &quot;exception&quot;)\n    public void logMethodException(JoinPoint joinPoint, Throwable exception) {\n        CustomLogger businessLogging = businessLoggingThreadLocal.get();\n        if (businessLogging != null) {\n            businessLogging.close();\n            businessLoggingThreadLocal.remove();\n        }\n    }\n}\n</code></pre>\n<p>This is my custom annotation:</p>\n<pre><code>import java.lang.annotation.ElementType;\nimport java.lang.annotation.Retention;\nimport java.lang.annotation.RetentionPolicy;\nimport java.lang.annotation.Target;\n\n@Retention(RetentionPolicy.RUNTIME)\n@Target(ElementType.METHOD)\npublic @interface Loggable {}\n</code></pre>\n<p>This &quot;wrapper&quot; around the existing logging mechanism seems fine at first glance, but it cannot perform nested logging within the same Spring component. If a method calls a method in another component, the logging works fine, but if it were to call a method in the same component, it simply does not log the other method.</p>\n<p>For example:</p>\n<pre><code>@Service \npublic class ExampleService { \n    .... \n\n    @Loggable \n    public void someMethod(){ \n        .... \n        some logic \n        .... \n        anOtherMethod(); \n    }\n\n    @Loggable\n    public void anOtherMethod(){\n        ....\n        some logic\n        ....\n    }\n}\n</code></pre>\n<p>The expected logging would be:</p>\n<pre><code>Method started: someMethod()\nMethod started: anOtherMethod()\nMethod ended: anOtherMethod()\nMethod ended: someMethod()\n</code></pre>\n<p>But the actual logging, when both of the fuctions are in the same component, is:<br />\n(It works fine, the above mentioned way, if the anOtherMethod() in an a different component)</p>\n<pre><code>Method started: someMethod()\nMethod ended: someMethod()\n</code></pre>\n<p>I'm using this gradle plugin:<br />\n<code>id(&quot;io.freefair.aspectj&quot;) version &quot;8.0.1&quot;</code></p>\n<p>and this dependency:<br />\n<code>implementation(&quot;org.aspectj:aspectjrt:1.9.7&quot;)</code></p>\n<p>It is possible to do nested logging in the same component with AspectJ?If not or if it is not recommended are there better ways to approach this problem?</p>\n"},{"tags":["java","windows","environment-variables"],"comments":[{"owner":{"account_id":28372160,"reputation":27,"user_id":21700578,"display_name":"PleasePleasePleaseHelp"},"score":0,"creation_date":1682359100,"post_id":76094443,"comment_id":134199483,"body_markdown":"Sorry, your solution didn&#39;t work. Also, are you referring to the Path System variable? Not sure what you mean by User Path System variable","body":"Sorry, your solution didn&#39;t work. Also, are you referring to the Path System variable? Not sure what you mean by User Path System variable"},{"owner":{"account_id":18549439,"reputation":1201,"user_id":13515974,"display_name":"Zufar Sunagatov"},"score":0,"creation_date":1682499718,"post_id":76094443,"comment_id":134224301,"body_markdown":"let me check, I will fix it","body":"let me check, I will fix it"}],"answers":[{"tags":[],"owner":{"account_id":26200443,"reputation":1,"user_id":19880937,"display_name":"Tony Zhu"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1682357104,"creation_date":1682357104,"answer_id":76094519,"question_id":76094443,"body_markdown":"in Windows, user variables will override system variables.\r\nto solve your problem, just remove the path of Java in user variables simply.\r\nor, you can set the same value of path for Java 11 in user variables.","title":"JAVA_HOME not updating in Environment Variables? (Windows 10)","body":"<p>in Windows, user variables will override system variables.\nto solve your problem, just remove the path of Java in user variables simply.\nor, you can set the same value of path for Java 11 in user variables.</p>\n"},{"tags":[],"owner":{"account_id":91942,"reputation":8072,"user_id":252218,"accept_rate":91,"display_name":"BoppreH"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1682357389,"creation_date":1682357254,"answer_id":76094549,"question_id":76094443,"body_markdown":"The system variables are re-applied to the user&#39;s Path when you  press `OK` on the System Properties dialog (the one immediately before your Environment Variables dialog). It should reflect the updated value when you re-open it.\r\n\r\n[![enter image description here][1]][1]\r\n\r\n  [1]: https://i.stack.imgur.com/PCUXs.png","title":"JAVA_HOME not updating in Environment Variables? (Windows 10)","body":"<p>The system variables are re-applied to the user's Path when you  press <code>OK</code> on the System Properties dialog (the one immediately before your Environment Variables dialog). It should reflect the updated value when you re-open it.</p>\n<p><a href=\"https://i.stack.imgur.com/PCUXs.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/PCUXs.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":[],"owner":{"account_id":18549439,"reputation":1201,"user_id":13515974,"display_name":"Zufar Sunagatov"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1682357385,"creation_date":1682357385,"answer_id":76094562,"question_id":76094443,"body_markdown":"Follow these steps:\r\n\r\n1) Open Environment Variables.\r\n2) Edit the User Path Variable in the System Variables section.\r\n3) Find the path corresponding to the v8 JDK.\r\n4) Edit that path to the v11 JDK path.\r\n5) Save changes and close the Environment Variables window.\r\n6) User Path Variable should now use the v11 JDK.","title":"JAVA_HOME not updating in Environment Variables? (Windows 10)","body":"<p>Follow these steps:</p>\n<ol>\n<li>Open Environment Variables.</li>\n<li>Edit the User Path Variable in the System Variables section.</li>\n<li>Find the path corresponding to the v8 JDK.</li>\n<li>Edit that path to the v11 JDK path.</li>\n<li>Save changes and close the Environment Variables window.</li>\n<li>User Path Variable should now use the v11 JDK.</li>\n</ol>\n"}],"owner":{"account_id":28372160,"reputation":27,"user_id":21700578,"display_name":"PleasePleasePleaseHelp"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1167,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":3,"score":2,"last_activity_date":1682357389,"creation_date":1682356521,"question_id":76094443,"body_markdown":"When I update my JAVA_HOME System variable to the v11 jdk, the %JAVA_HOME% in the User Path Variable doesn&#39;t update. \r\n\r\n[Environment Variables][1]\r\n\r\nAs you can see in the image, the JAVA_HOME is set to v11 while the Path User variable is still set to v8. Any ideas?\r\n\r\nI should mention that I have v8 and v11 JDKs successfully installed on my computer. I&#39;ve tried saving and reopening the Environment variables window and restarting the computer. \r\n\r\n\r\n  [1]: https://i.stack.imgur.com/cy8t2.png","title":"JAVA_HOME not updating in Environment Variables? (Windows 10)","body":"<p>When I update my JAVA_HOME System variable to the v11 jdk, the %JAVA_HOME% in the User Path Variable doesn't update.</p>\n<p><a href=\"https://i.stack.imgur.com/cy8t2.png\" rel=\"nofollow noreferrer\">Environment Variables</a></p>\n<p>As you can see in the image, the JAVA_HOME is set to v11 while the Path User variable is still set to v8. Any ideas?</p>\n<p>I should mention that I have v8 and v11 JDKs successfully installed on my computer. I've tried saving and reopening the Environment variables window and restarting the computer.</p>\n"},{"tags":["javascript","java","angular","angularjs"],"owner":{"account_id":10701786,"reputation":53,"user_id":7876869,"display_name":"Dallas2017"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":89,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1682357340,"creation_date":1680791643,"question_id":75950751,"body_markdown":"I want to able to play video on demand. I have Spring Boot Java app as a server and Angular/JavaScript app as a client. What I want to accomplish is that whenever a user want to play video on a browser, sends Rest API request to server side. The server side sends chunks as byte array. Then the client side converts that byte array and starts playing the video using HTML5 `&lt;video&gt;` tag.\r\n\r\nThe issue: I have the server side sending the video file as chunks of byte array, reading it from FileInputStream\r\n\r\n```\r\npublic byte[] streamMovie(String filepath) throws IOException {\r\n    int SIZE = 1024 * 1024;\r\n    File file = new File(filepath);\r\n    FileInputStream fis = new FileInputStream(filepath);\r\n    byte[] v = IOUtils.readBytesAndClose(fis, SIZE);\r\n    return v;\r\n}\r\n```\r\n\r\nBut on the client side, I can&#39;t find any solution that can convert this byte array in to suitable format, that I can use to create a blob in JavaScript;\r\n\r\nOn Client side\r\n\r\n```\r\nconst player = document.getElementById(&quot;video-player&quot;);\r\n\r\n// response is the response came from the server side i.e. byte array\r\nconst uint8array = toUint8Array(response.data);\r\n\r\nconst blob = new Blob(uint8array, { type: &#39;video/mp4&#39; });\r\nplayer.src = URL.createObjectURL(blob);\r\nplayer.play();\r\n\r\nfunction toUint8Array(data) {\r\n    let byteNumbers = new Array(data.length);\r\n    for (let i = 0; i &lt; data.length; i++) {\r\n        byteNumbers[i] = data.charCodeAt(i) &amp; 0xFF;\r\n    }\r\n    const byteArray = new Uint8Array(byteNumbers);\r\n    return byteArray;\r\n}\r\n```\r\n\r\nThen I keep getting:\r\n\r\n```\r\nUncaught (in promise) DOMException: Failed to load because no supported source was found.\r\n```\r\n","title":"How to stream video on demand?","body":"<p>I want to able to play video on demand. I have Spring Boot Java app as a server and Angular/JavaScript app as a client. What I want to accomplish is that whenever a user want to play video on a browser, sends Rest API request to server side. The server side sends chunks as byte array. Then the client side converts that byte array and starts playing the video using HTML5 <code>&lt;video&gt;</code> tag.</p>\n<p>The issue: I have the server side sending the video file as chunks of byte array, reading it from FileInputStream</p>\n<pre><code>public byte[] streamMovie(String filepath) throws IOException {\n    int SIZE = 1024 * 1024;\n    File file = new File(filepath);\n    FileInputStream fis = new FileInputStream(filepath);\n    byte[] v = IOUtils.readBytesAndClose(fis, SIZE);\n    return v;\n}\n</code></pre>\n<p>But on the client side, I can't find any solution that can convert this byte array in to suitable format, that I can use to create a blob in JavaScript;</p>\n<p>On Client side</p>\n<pre><code>const player = document.getElementById(&quot;video-player&quot;);\n\n// response is the response came from the server side i.e. byte array\nconst uint8array = toUint8Array(response.data);\n\nconst blob = new Blob(uint8array, { type: 'video/mp4' });\nplayer.src = URL.createObjectURL(blob);\nplayer.play();\n\nfunction toUint8Array(data) {\n    let byteNumbers = new Array(data.length);\n    for (let i = 0; i &lt; data.length; i++) {\n        byteNumbers[i] = data.charCodeAt(i) &amp; 0xFF;\n    }\n    const byteArray = new Uint8Array(byteNumbers);\n    return byteArray;\n}\n</code></pre>\n<p>Then I keep getting:</p>\n<pre><code>Uncaught (in promise) DOMException: Failed to load because no supported source was found.\n</code></pre>\n"},{"tags":["java","arrays","io"],"answers":[{"tags":[],"owner":{"account_id":10941198,"reputation":4394,"user_id":8041003,"display_name":"John Williams"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1682357100,"creation_date":1682357100,"answer_id":76094517,"question_id":76094462,"body_markdown":"Have a counter variable that increments for each card. Use something like the following to alternate between lists:\r\n\r\n    if(counter % 2 == 1) {\r\n        oddList.add(card);\r\n    } else {\r\n        evenList.add(card);\r\n    }\r\n    ","title":"reading in file and storing elements in alternate arrays","body":"<p>Have a counter variable that increments for each card. Use something like the following to alternate between lists:</p>\n<pre><code>if(counter % 2 == 1) {\n    oddList.add(card);\n} else {\n    evenList.add(card);\n}\n</code></pre>\n"}],"owner":{"account_id":23035625,"reputation":13,"user_id":17154427,"display_name":"jeremslol"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":18,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"accepted_answer_id":76094517,"answer_count":1,"score":-1,"last_activity_date":1682357100,"creation_date":1682356652,"question_id":76094462,"body_markdown":"Say i have a file formatted like this, the first line being the number of elements to be read\r\n```\r\n4\r\n2\r\nHearts\r\n10\r\nSpades\r\n\r\n```\r\n\r\nHow would I go about reading the first 2 lines, storing it in a &quot;Card&quot; object (card value and suit), and putting into one list, and doing the same for the next to lines, but storing it in a separate list, continuing to alternate in this pattern if there are more elements in the file.","title":"reading in file and storing elements in alternate arrays","body":"<p>Say i have a file formatted like this, the first line being the number of elements to be read</p>\n<pre><code>4\n2\nHearts\n10\nSpades\n\n</code></pre>\n<p>How would I go about reading the first 2 lines, storing it in a &quot;Card&quot; object (card value and suit), and putting into one list, and doing the same for the next to lines, but storing it in a separate list, continuing to alternate in this pattern if there are more elements in the file.</p>\n"},{"tags":["java","spring-mvc","servlets","apache-commons-fileupload"],"comments":[{"owner":{"account_id":1455702,"reputation":15662,"user_id":1371329,"accept_rate":64,"display_name":"jaco0646"},"score":2,"creation_date":1682357171,"post_id":76094493,"comment_id":134199040,"body_markdown":"&quot;_Users of affected versions should apply the following mitigation: 5.3.x users should upgrade to 5.3.20; 5.2.x users should upgrade to 5.2.22. No other steps are necessary._&quot;","body":"&quot;<i>Users of affected versions should apply the following mitigation: 5.3.x users should upgrade to 5.3.20; 5.2.x users should upgrade to 5.2.22. No other steps are necessary.</i>&quot;"},{"owner":{"account_id":2007211,"reputation":581,"user_id":1796748,"accept_rate":40,"display_name":"yonikawa"},"score":0,"creation_date":1682358381,"post_id":76094493,"comment_id":134199321,"body_markdown":"@jaco0646 - Its a legacy app and hence upgrading to latest Spring is a huge effort and we have time constraints to deliver a temporary fix to the clients during the interim. Hence looking for alternative options. We are on Spring 4.x (un supported version)","body":"@jaco0646 - Its a legacy app and hence upgrading to latest Spring is a huge effort and we have time constraints to deliver a temporary fix to the clients during the interim. Hence looking for alternative options. We are on Spring 4.x (un supported version)"}],"owner":{"account_id":2007211,"reputation":581,"user_id":1796748,"accept_rate":40,"display_name":"yonikawa"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":36,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1682356869,"creation_date":1682356869,"question_id":76094493,"body_markdown":"Can you have `Spring Controller/MVC` and the traditional `Java Servlet code (doPost)` executed through  the same servlet? We have a legacy webapp that implements a mix of Spring MVC on certain areas and Java Servlet code to support other areas. Now due to the below vulnerability identified, we are trying to replace `Spring multipart file` feature with `Apache Commons FileUpload`. \r\n\r\n[Spring Multipart/form-data vulnerability][1]\r\n\r\nIs there a way to add the doPost() handler to exclusively handle the fileUpload feature in a Spring Controller class? (implemented using @Controller).\r\n\r\nIn other words, use `Spring Controller` for rest of the functionalities and `doPost()` just for the file upload feature in the same servlet?\r\n\r\n**Spring Controller Code:**\r\n\r\n    \t@RequestMapping(value = &quot;/uploadFile&quot;, method = RequestMethod.POST)\r\n\tpublic ModelAndView uploadFile(@RequestParam(&quot;file&quot;) MultipartFile file,\r\n\t\t\tHttpServletRequest request, HttpServletResponse response) {\r\n\r\n\t\ttry {\r\n\t\t\tboolean updated = false;\r\n\t\t\tString uploadDir = &quot;/WEB-INF/&quot;;\r\n\t\t\tString realPath = request.getServletContext()\r\n\t\t\t\t\t.getRealPath(uploadDir);\r\n\r\n\t\t\tFile transferFile = new File(\r\n\t\t\t\t\trealPath + &quot;/&quot; + file.getOriginalFilename());\r\n\t\t\tfile.transferTo(transferFile);\r\n\t\t\tString contents = new String(Files.readAllBytes(\r\n\t\t\t\t\tPaths.get(realPath + file.getOriginalFilename())));\r\n\t\t\tlogger.debug(contents);\r\n\r\n\t\t\t..........\r\n\t\t\t\tmore code\r\n\t\t\t\t\r\n\t\t\t\t\tupdated = true;\r\n\t\t\t\t\t((ModelMap) model).addAttribute(&quot;errors&quot;, &quot;&quot;); //reset any previous errors\r\n\t\t\t\r\n\t\t\t} else {//if invalid file, show error msg\r\n\t\t\t\tString error = MessageBoxUtil.getErrorMessageBox(\r\n\t\t\t\t\t\t&quot;Invalid Key Found. Please try again.&quot;);\r\n\t\t\t\t((ModelMap) model).addAttribute(&quot;errors&quot;, error);\r\n\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tmodel.put(&quot;updated&quot;, updated);\r\n\r\n\t\t\treturn mv;\r\n\r\n\t\t} catch (Exception e) {\r\n\t\t\tlogger.debug(&quot;Exception ocurred: &quot; +e);\r\n\t\t\t//e.printStackTrace();\r\n\t\t\tnew TemplateManager(request).doError(e, request, response);\r\n\t\t}\r\n\t\treturn null;\r\n\t}\r\n\r\n**Replace the above with the code below:**\r\n\r\n    \t/* Apache Commons File Upload */\r\n\tprotected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {\r\n\t\t \r\n\t\t  try {\r\n\r\n\t    DiskFileItemFactory factory = new DiskFileItemFactory();\r\n\t\t    factory.setRepository(new File(&quot;C:\\\\temp\\\\&quot;));\r\n\t\t\tServletFileUpload fileUpload = new ServletFileUpload(factory);\r\n\t\t\tList&lt;FileItem&gt; fileItems = fileUpload.parseRequest(request);\r\n\t\tfor(FileItem fileItem : fileItems) {\r\n\t\t\t  if(!fileItem.isFormField()) {\t  \r\n\t\t\t    File file = new File(fileItem.getName());  \r\n\t\t\t\tFile fNew= new File(&quot;C:\\\\upload\\\\&quot;  + file.getName());\r\n\t\t\t\tfileItem.write(fNew);\r\n\t\t\t  }\r\n\t\t\t}\r\n\t\t  } catch (Exception e) {\r\n\t\t    String fileUploadError = &quot;Problem with Apache Commons File Upload.&quot;;\r\n\t\t    System.out.println(fileUploadError);\r\n\t\t  } \r\n\t\t}\r\n\r\n\r\nJSp Code:\r\n\r\n    \t &lt;form name=&quot;uploadFile&quot; method=&quot;POST&quot; action=&quot;uploadFile&quot; enctype=&quot;multipart/form-data&quot;&gt;\r\n \t\t\t&lt;input type=&quot;file&quot; name=&quot;file&quot; id=&quot;file&quot;&gt;&lt;br /&gt;\t\t\r\n\t\t\t&lt;input type=&quot;submit&quot; name=&quot;submit&quot; id=&quot;importkey&quot; value=&quot;Import Key&quot;/&gt;\r\n \t&lt;/form&gt;\r\n\r\n\r\n  [1]: https://spring.io/security/cve-2022-22970","title":"SpringMVC and Java Servlet code in the same class","body":"<p>Can you have <code>Spring Controller/MVC</code> and the traditional <code>Java Servlet code (doPost)</code> executed through  the same servlet? We have a legacy webapp that implements a mix of Spring MVC on certain areas and Java Servlet code to support other areas. Now due to the below vulnerability identified, we are trying to replace <code>Spring multipart file</code> feature with <code>Apache Commons FileUpload</code>.</p>\n<p><a href=\"https://spring.io/security/cve-2022-22970\" rel=\"nofollow noreferrer\">Spring Multipart/form-data vulnerability</a></p>\n<p>Is there a way to add the doPost() handler to exclusively handle the fileUpload feature in a Spring Controller class? (implemented using @Controller).</p>\n<p>In other words, use <code>Spring Controller</code> for rest of the functionalities and <code>doPost()</code> just for the file upload feature in the same servlet?</p>\n<p><strong>Spring Controller Code:</strong></p>\n<pre><code>    @RequestMapping(value = &quot;/uploadFile&quot;, method = RequestMethod.POST)\npublic ModelAndView uploadFile(@RequestParam(&quot;file&quot;) MultipartFile file,\n        HttpServletRequest request, HttpServletResponse response) {\n\n    try {\n        boolean updated = false;\n        String uploadDir = &quot;/WEB-INF/&quot;;\n        String realPath = request.getServletContext()\n                .getRealPath(uploadDir);\n\n        File transferFile = new File(\n                realPath + &quot;/&quot; + file.getOriginalFilename());\n        file.transferTo(transferFile);\n        String contents = new String(Files.readAllBytes(\n                Paths.get(realPath + file.getOriginalFilename())));\n        logger.debug(contents);\n\n        ..........\n            more code\n            \n                updated = true;\n                ((ModelMap) model).addAttribute(&quot;errors&quot;, &quot;&quot;); //reset any previous errors\n        \n        } else {//if invalid file, show error msg\n            String error = MessageBoxUtil.getErrorMessageBox(\n                    &quot;Invalid Key Found. Please try again.&quot;);\n            ((ModelMap) model).addAttribute(&quot;errors&quot;, error);\n\n        }\n        \n        model.put(&quot;updated&quot;, updated);\n\n        return mv;\n\n    } catch (Exception e) {\n        logger.debug(&quot;Exception ocurred: &quot; +e);\n        //e.printStackTrace();\n        new TemplateManager(request).doError(e, request, response);\n    }\n    return null;\n}\n</code></pre>\n<p><strong>Replace the above with the code below:</strong></p>\n<pre><code>    /* Apache Commons File Upload */\nprotected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {\n     \n      try {\n\n    DiskFileItemFactory factory = new DiskFileItemFactory();\n        factory.setRepository(new File(&quot;C:\\\\temp\\\\&quot;));\n        ServletFileUpload fileUpload = new ServletFileUpload(factory);\n        List&lt;FileItem&gt; fileItems = fileUpload.parseRequest(request);\n    for(FileItem fileItem : fileItems) {\n          if(!fileItem.isFormField()) {   \n            File file = new File(fileItem.getName());  \n            File fNew= new File(&quot;C:\\\\upload\\\\&quot;  + file.getName());\n            fileItem.write(fNew);\n          }\n        }\n      } catch (Exception e) {\n        String fileUploadError = &quot;Problem with Apache Commons File Upload.&quot;;\n        System.out.println(fileUploadError);\n      } \n    }\n</code></pre>\n<p>JSp Code:</p>\n<pre><code>     &lt;form name=&quot;uploadFile&quot; method=&quot;POST&quot; action=&quot;uploadFile&quot; enctype=&quot;multipart/form-data&quot;&gt;\n        &lt;input type=&quot;file&quot; name=&quot;file&quot; id=&quot;file&quot;&gt;&lt;br /&gt;     \n        &lt;input type=&quot;submit&quot; name=&quot;submit&quot; id=&quot;importkey&quot; value=&quot;Import Key&quot;/&gt;\n&lt;/form&gt;\n</code></pre>\n"},{"tags":["java","spring","junit","dependency-injection","spring-test"],"comments":[{"owner":{"account_id":17520379,"reputation":1536,"user_id":12706564,"display_name":"Emanuel Trandafir"},"score":0,"creation_date":1682346338,"post_id":76092878,"comment_id":134196299,"body_markdown":"have you tried to direclty `@Autowired` the field? and remove the test constructor?","body":"have you tried to direclty <code>@Autowired</code> the field? and remove the test constructor?"},{"owner":{"account_id":6627426,"reputation":229,"user_id":5117196,"accept_rate":50,"display_name":"Andrew Kachalin"},"score":0,"creation_date":1682346396,"post_id":76092878,"comment_id":134196323,"body_markdown":"@EmanuelTrandafir We have command agreement, that we will inject via constructor.","body":"@EmanuelTrandafir We have command agreement, that we will inject via constructor."},{"owner":{"account_id":6627426,"reputation":229,"user_id":5117196,"accept_rate":50,"display_name":"Andrew Kachalin"},"score":0,"creation_date":1682350516,"post_id":76092878,"comment_id":134197484,"body_markdown":"@ZufarSunagatov yes, but I am not full satisfy","body":"@ZufarSunagatov yes, but I am not full satisfy"}],"answers":[{"tags":[],"owner":{"account_id":18549439,"reputation":1201,"user_id":13515974,"display_name":"Zufar Sunagatov"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1682356588,"creation_date":1682347899,"answer_id":76093211,"question_id":76092878,"body_markdown":"&gt; Question: how to change (what to add) to SimpleClassImplTest so that\r\n&gt; the bean is normally injected through the constructor?\r\n\r\n1) Annotate constructor with `@Autowired`.\r\n\r\n2) As you use Unit 5, use the `@ExtendWith` instead of the deprecated `@RunWith` annotation.\r\n\r\nHere is the code:\r\n\r\n```\r\n@SpringBootTest\r\n@ExtendWith(SpringExtension.class)\r\n@ComponentScan(&quot;there is path to my directory&quot;)\r\npublic class SimpleClassImplTest {\r\n\r\n    private final SimpleClass simpleClass;\r\n\r\n    @Autowired\r\n    public SimpleClassImplTest(SimpleClass simpleClass){\r\n        this.simpleClass = simpleClass;\r\n    }\r\n\r\n    @Test\r\n    public void testGetString(){\r\n        assertNotNull(simpleClass.getString());\r\n    }\r\n}\r\n```\r\nIf you want to test the `SimpleClass interface` without any concrete implementation, you can use a mock object framework like `Mockito` to create a mock object of the `interface`. \r\nHere is the code:\r\n\r\n```\r\n@ExtendWith(MockitoExtension.class)\r\npublic class SimpleClassImplTest {\r\n\r\n    @Mock\r\n    private SimpleClass simpleClass;\r\n\r\n    @Test\r\n    public void testGetString(){\r\n        when(simpleClass.getString()).thenReturn(&quot;Hello World&quot;);\r\n        assertNotNull(simpleClass.getString());\r\n    }\r\n}\r\n```","title":"How to inject @Service bean into test junit 5 via constructor, so application doesn&#39;t crash?","body":"<blockquote>\n<p>Question: how to change (what to add) to SimpleClassImplTest so that\nthe bean is normally injected through the constructor?</p>\n</blockquote>\n<ol>\n<li><p>Annotate constructor with <code>@Autowired</code>.</p>\n</li>\n<li><p>As you use Unit 5, use the <code>@ExtendWith</code> instead of the deprecated <code>@RunWith</code> annotation.</p>\n</li>\n</ol>\n<p>Here is the code:</p>\n<pre><code>@SpringBootTest\n@ExtendWith(SpringExtension.class)\n@ComponentScan(&quot;there is path to my directory&quot;)\npublic class SimpleClassImplTest {\n\n    private final SimpleClass simpleClass;\n\n    @Autowired\n    public SimpleClassImplTest(SimpleClass simpleClass){\n        this.simpleClass = simpleClass;\n    }\n\n    @Test\n    public void testGetString(){\n        assertNotNull(simpleClass.getString());\n    }\n}\n</code></pre>\n<p>If you want to test the <code>SimpleClass interface</code> without any concrete implementation, you can use a mock object framework like <code>Mockito</code> to create a mock object of the <code>interface</code>.\nHere is the code:</p>\n<pre><code>@ExtendWith(MockitoExtension.class)\npublic class SimpleClassImplTest {\n\n    @Mock\n    private SimpleClass simpleClass;\n\n    @Test\n    public void testGetString(){\n        when(simpleClass.getString()).thenReturn(&quot;Hello World&quot;);\n        assertNotNull(simpleClass.getString());\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":6627426,"reputation":229,"user_id":5117196,"accept_rate":50,"display_name":"Andrew Kachalin"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":909,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1682356588,"creation_date":1682345927,"question_id":76092878,"body_markdown":"Suppose I have a business logic layer in my spring boot application. To simplify:\r\n\r\n    public interface SimpleClass {\r\n        public String getString();\r\n    }\r\n    \r\n    @Service\r\n    public class SimpleClassImpl implements SimpleClass {\r\n    \r\n        public String getString(){\r\n            return &quot;Hello World&quot;;\r\n        }\r\n    }\r\n\r\nI need to test a single method. I wrote something like this:\r\n\r\n    @SpringBootTest\r\n    @ExtendWith(SpringExtension.class)\r\n    @ComponentScan(&quot;there is path to my directory&quot;)\r\n    class SimpleClassImplTest {\r\n    \r\n        private SimpleClass simpleClass;\r\n    \r\n        @Autowired\r\n        SimpleClassImplTest(SimpleClass simpleClass){\r\n            this.simpleClass = simpleClass;\r\n        }\r\n    \r\n        @Test\r\n        public void testGetString(){\r\n         assertNotNull( simpleClass.getString());\r\n        }    \r\n    }\r\n\r\nThat is, in the test, I want to inject an instance of the business logic class through the constructor (this is necessary for my tasks). The application however crashes with error:  `org.junit.jupiter.api.extension.ParameterResolutionException: Failed to resolve parameter in constructor.`\r\n\r\n**Question:** how to change (what to add) to SimpleClassImplTest so that the bean is normally injected through the constructor?","title":"How to inject @Service bean into test junit 5 via constructor, so application doesn&#39;t crash?","body":"<p>Suppose I have a business logic layer in my spring boot application. To simplify:</p>\n<pre><code>public interface SimpleClass {\n    public String getString();\n}\n\n@Service\npublic class SimpleClassImpl implements SimpleClass {\n\n    public String getString(){\n        return &quot;Hello World&quot;;\n    }\n}\n</code></pre>\n<p>I need to test a single method. I wrote something like this:</p>\n<pre><code>@SpringBootTest\n@ExtendWith(SpringExtension.class)\n@ComponentScan(&quot;there is path to my directory&quot;)\nclass SimpleClassImplTest {\n\n    private SimpleClass simpleClass;\n\n    @Autowired\n    SimpleClassImplTest(SimpleClass simpleClass){\n        this.simpleClass = simpleClass;\n    }\n\n    @Test\n    public void testGetString(){\n     assertNotNull( simpleClass.getString());\n    }    \n}\n</code></pre>\n<p>That is, in the test, I want to inject an instance of the business logic class through the constructor (this is necessary for my tasks). The application however crashes with error:  <code>org.junit.jupiter.api.extension.ParameterResolutionException: Failed to resolve parameter in constructor.</code></p>\n<p><strong>Question:</strong> how to change (what to add) to SimpleClassImplTest so that the bean is normally injected through the constructor?</p>\n"},{"tags":["java","encryption","bouncycastle","pgp","openpgp"],"comments":[{"owner":{"account_id":3421244,"reputation":35863,"user_id":2868801,"display_name":"dave_thompson_085"},"score":0,"creation_date":1682353824,"post_id":76093779,"comment_id":134198263,"body_markdown":"**[That exception should have a caused-by block in its stacktrace.](https://github.com/bcgit/bc-java/blob/master/pg/src/main/java/org/bouncycastle/openpgp/PGPPublicKeyEncryptedData.java#L218)** Please include it if available; it&#39;s highly relevant.","body":"<b><a href=\"https://github.com/bcgit/bc-java/blob/master/pg/src/main/java/org/bouncycastle/openpgp/PGPPublicKeyEncryptedData.java#L218\" rel=\"nofollow noreferrer\">That exception should have a caused-by block in its stacktrace.</a></b> Please include it if available; it&#39;s highly relevant."},{"owner":{"account_id":28376596,"reputation":1,"user_id":21704561,"display_name":"javaConsumtion"},"score":0,"creation_date":1682356514,"post_id":76093779,"comment_id":134198870,"body_markdown":"@dave_thompson_085 thank you. I have updated my post to include the stacktrace.","body":"@dave_thompson_085 thank you. I have updated my post to include the stacktrace."},{"owner":{"account_id":3421244,"reputation":35863,"user_id":2868801,"display_name":"dave_thompson_085"},"score":1,"creation_date":1682381864,"post_id":76093779,"comment_id":134203173,"body_markdown":"Okay, premature EOF pretty strongly suggests the message is wrongly formatted/encoded, or damaged. How are you doing the encryption? Do you have or can you get GnuPG? If so, look at `gpg --list-packets $file`.","body":"Okay, premature EOF pretty strongly suggests the message is wrongly formatted/encoded, or damaged. How are you doing the encryption? Do you have or can you get GnuPG? If so, look at <code>gpg --list-packets $file</code>."},{"owner":{"account_id":15457133,"reputation":185,"user_id":11150851,"display_name":"vanitasvitae"},"score":0,"creation_date":1687189998,"post_id":76093779,"comment_id":134898833,"body_markdown":"If your implementation produced the encrypted message, then it is very likely that you forgot to close the OutputStream obtained from the PGPEncryptedDataGenerator.","body":"If your implementation produced the encrypted message, then it is very likely that you forgot to close the OutputStream obtained from the PGPEncryptedDataGenerator."}],"owner":{"account_id":28376596,"reputation":1,"user_id":21704561,"display_name":"javaConsumtion"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":162,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1682356469,"creation_date":1682351533,"question_id":76093779,"body_markdown":"I am facing an issue that is causing the PGPException: Exception starting decryption.\r\n\r\n\r\n```\r\n[main] INFO com.rxbenefits.service.impl.PGPEncryptionService - Got encrypted stream from input stream\r\n[main] INFO com.rxbenefits.service.impl.PGPEncryptionService - Creating decryptor with provider: BC\r\n[main] INFO com.rxbenefits.service.impl.PGPEncryptionService - Using private key with ID: 3d1dc62715cb3e82\r\norg.bouncycastle.openpgp.PGPException: Exception starting decryption\r\n\tat org.bouncycastle.openpgp.PGPPublicKeyEncryptedData.getDataStream(Unknown Source)\r\n\tat com.rxbenefits.service.impl.PGPEncryptionService.decryptFile(PGPEncryptionService.java:142)\r\n\tat com.rxbenefits.service.impl.PGPEncryptionServiceTest.testDecryptFile(PGPEncryptionServiceTest.java:86)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:566)\r\n\tat org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)\r\n\tat org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)\r\n\tat org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)\r\n\tat org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)\r\n\tat org.junit.runners.ParentRunner$3.evaluate(ParentRunner.java:306)\r\n\tat org.junit.runners.BlockJUnit4ClassRunner$1.evaluate(BlockJUnit4ClassRunner.java:100)\r\n\tat org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:366)\r\n\tat org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:103)\r\n\tat org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:63)\r\n\tat org.junit.runners.ParentRunner$4.run(ParentRunner.java:331)\r\n\tat org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:79)\r\n\tat org.junit.runners.ParentRunner.runChildren(ParentRunner.java:329)\r\n\tat org.junit.runners.ParentRunner.access$100(ParentRunner.java:66)\r\n\tat org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:293)\r\n\tat org.junit.runners.ParentRunner$3.evaluate(ParentRunner.java:306)\r\n\tat org.junit.runners.ParentRunner.run(ParentRunner.java:413)\r\n\tat org.junit.runner.JUnitCore.run(JUnitCore.java:137)\r\n\tat com.intellij.junit4.JUnit4IdeaTestRunner.startRunnerWithArgs(JUnit4IdeaTestRunner.java:69)\r\n\tat com.intellij.rt.junit.IdeaTestRunner$Repeater$1.execute(IdeaTestRunner.java:38)\r\n\tat com.intellij.rt.execution.junit.TestsRepeater.repeat(TestsRepeater.java:11)\r\n\tat com.intellij.rt.junit.IdeaTestRunner$Repeater.startRunnerWithArgs(IdeaTestRunner.java:35)\r\n\tat com.intellij.rt.junit.JUnitStarter.prepareStreamsAndStart(JUnitStarter.java:235)\r\n\tat com.intellij.rt.junit.JUnitStarter.main(JUnitStarter.java:54)\r\nCaused by: java.io.EOFException: premature end of stream in PartialInputStream\r\n\tat org.bouncycastle.bcpg.BCPGInputStream$PartialInputStream.read(Unknown Source)\r\n\tat org.bouncycastle.bcpg.BCPGInputStream.read(Unknown Source)\r\n\tat java.base/java.io.InputStream.read(InputStream.java:205)\r\n\tat java.base/javax.crypto.CipherInputStream.getMoreData(CipherInputStream.java:121)\r\n\tat java.base/javax.crypto.CipherInputStream.read(CipherInputStream.java:197)\r\n\tat org.bouncycastle.bcpg.BCPGInputStream.read(Unknown Source)\r\n\tat org.bouncycastle.openpgp.PGPEncryptedData$TruncatedStream.&lt;init&gt;(Unknown Source)\r\n\t... 30 more\r\n```\r\n\r\nThe code is saying I am throwing the error at the `InputStream clearStream = publicKeyEncryptedData.getDataStream(new JcePublicKeyDataDecryptorFactoryBuilder()\r\n                    .setProvider(new BouncyCastleProvider())\r\n                    .build(privateKey));` line within the decryption method below. I have a feeling that it might have something to do with the `Security.addProvider(new BouncyCastleProvider());` line at the top of my decryption method....but I am not sure. \r\n\r\nThis is my first time working with encryption, so would like any guidance if possible.\r\n\r\n\r\n```\r\npublic static void decryptFile(InputStream in, OutputStream out, InputStream keyIn, char[] passwd) throws IOException, PGPException {\r\n        Security.addProvider(new BouncyCastleProvider());\r\n        try (InputStream encryptedStream = PGPUtil.getDecoderStream(in)) {\r\n            log.info(&quot;Got encrypted stream from input stream&quot;);\r\n\r\n            PGPObjectFactory pgpFactory = new PGPObjectFactory(encryptedStream, new JcaKeyFingerprintCalculator());\r\n            PGPEncryptedDataList encryptedDataList = (PGPEncryptedDataList) pgpFactory.nextObject();\r\n\r\n            if (encryptedDataList == null) {\r\n                log.info(&quot;No encrypted data found in input stream&quot;);\r\n                throw new PGPException(&quot;No encrypted data found in input stream&quot;);\r\n            }\r\n\r\n            // find the secret key needed to decrypt the message\r\n            PGPSecretKeyRingCollection secretKeyRingCollection = new PGPSecretKeyRingCollection(PGPUtil.getDecoderStream(keyIn), new JcaKeyFingerprintCalculator());\r\n            PGPPrivateKey privateKey = null;\r\n            PGPPublicKeyEncryptedData publicKeyEncryptedData = null;\r\n            for (Object encryptedData : encryptedDataList) {\r\n                if (encryptedData instanceof PGPPublicKeyEncryptedData) {\r\n                    publicKeyEncryptedData = (PGPPublicKeyEncryptedData) encryptedData;\r\n                    PGPSecretKey secretKey = secretKeyRingCollection.getSecretKey(publicKeyEncryptedData.getKeyID());\r\n                    if (secretKey != null) {\r\n                        privateKey = secretKey.extractPrivateKey(new JcePBESecretKeyDecryptorBuilder().setProvider(&quot;BC&quot;).build(passwd));\r\n                        break;\r\n                    } else {\r\n                        log.info(&quot;No secret key found for message&quot;);\r\n                        throw new IllegalArgumentException(&quot;No secret key found for message&quot;);\r\n                    }\r\n                }\r\n            }\r\n\r\n            if (privateKey == null) {\r\n                log.info(&quot;No private key found for message&quot;);\r\n                throw new IllegalArgumentException(&quot;No private key found for message&quot;);\r\n            }\r\n            log.info(&quot;Creating decryptor with provider: &quot; + Security.getProvider(&quot;BC&quot;).getName());\r\n            log.info(&quot;Using private key with ID: &quot; + Long.toHexString(publicKeyEncryptedData.getKeyID()));\r\n            // create the decryptor and decrypt the message\r\n            InputStream clearStream = publicKeyEncryptedData.getDataStream(new JcePublicKeyDataDecryptorFactoryBuilder()\r\n                    .setProvider(new BouncyCastleProvider())\r\n                    .build(privateKey));\r\n            log.info(&quot;Created decryptor and decrypted message&quot;);\r\n\r\n            PGPObjectFactory plainFactory = new PGPObjectFactory(clearStream, new JcaKeyFingerprintCalculator());\r\n            Object message = plainFactory.nextObject();\r\n\r\n            // handle the decrypted message\r\n            if (message instanceof PGPCompressedData) {\r\n                PGPCompressedData compressedData = (PGPCompressedData) message;\r\n                InputStream compressedStream = new BufferedInputStream(compressedData.getDataStream());\r\n                message = new PGPObjectFactory(compressedStream, new JcaKeyFingerprintCalculator()).nextObject();\r\n            }\r\n\r\n            if (message instanceof PGPLiteralData) {\r\n                PGPLiteralData literalData = (PGPLiteralData) message;\r\n                try (InputStream literalStream = literalData.getInputStream()) {\r\n                    byte[] buffer = new byte[4096];\r\n                    int bytesRead;\r\n                    while ((bytesRead = literalStream.read(buffer)) != -1) {\r\n                        out.write(buffer, 0, bytesRead);\r\n                    }\r\n                }\r\n                log.info(&quot;Decrypted message of type PGPLiteralData&quot;);\r\n            } else {\r\n                log.info(&quot;Unknown message type: &quot; + message.getClass().getName());\r\n                throw new PGPException(&quot;Unknown message type: &quot; + message.getClass().getName());\r\n            }\r\n        }\r\n    }\r\n```\r\n\r\n\r\nI am trying to decrypt an encrypted file. I encrypted the file using a pub key provided to me by work and am decrypting by using the sec key and password provided by them as well.\r\n\r\nIt seems to be failing when trying to actually decrypt.\r\nKnowing the pub and sec key are correct, along with the password, I am wondering if I might not be encrypting the file correctly? Could this be a possibility? When I open the encrypted file it looks very encrypted.\r\n\r\n\r\nPho","title":"Java - PGP Decryption Throwing &#39;Exception Starting Decryption&#39;","body":"<p>I am facing an issue that is causing the PGPException: Exception starting decryption.</p>\n<pre><code>[main] INFO com.rxbenefits.service.impl.PGPEncryptionService - Got encrypted stream from input stream\n[main] INFO com.rxbenefits.service.impl.PGPEncryptionService - Creating decryptor with provider: BC\n[main] INFO com.rxbenefits.service.impl.PGPEncryptionService - Using private key with ID: 3d1dc62715cb3e82\norg.bouncycastle.openpgp.PGPException: Exception starting decryption\n    at org.bouncycastle.openpgp.PGPPublicKeyEncryptedData.getDataStream(Unknown Source)\n    at com.rxbenefits.service.impl.PGPEncryptionService.decryptFile(PGPEncryptionService.java:142)\n    at com.rxbenefits.service.impl.PGPEncryptionServiceTest.testDecryptFile(PGPEncryptionServiceTest.java:86)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n    at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.base/java.lang.reflect.Method.invoke(Method.java:566)\n    at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)\n    at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)\n    at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)\n    at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)\n    at org.junit.runners.ParentRunner$3.evaluate(ParentRunner.java:306)\n    at org.junit.runners.BlockJUnit4ClassRunner$1.evaluate(BlockJUnit4ClassRunner.java:100)\n    at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:366)\n    at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:103)\n    at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:63)\n    at org.junit.runners.ParentRunner$4.run(ParentRunner.java:331)\n    at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:79)\n    at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:329)\n    at org.junit.runners.ParentRunner.access$100(ParentRunner.java:66)\n    at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:293)\n    at org.junit.runners.ParentRunner$3.evaluate(ParentRunner.java:306)\n    at org.junit.runners.ParentRunner.run(ParentRunner.java:413)\n    at org.junit.runner.JUnitCore.run(JUnitCore.java:137)\n    at com.intellij.junit4.JUnit4IdeaTestRunner.startRunnerWithArgs(JUnit4IdeaTestRunner.java:69)\n    at com.intellij.rt.junit.IdeaTestRunner$Repeater$1.execute(IdeaTestRunner.java:38)\n    at com.intellij.rt.execution.junit.TestsRepeater.repeat(TestsRepeater.java:11)\n    at com.intellij.rt.junit.IdeaTestRunner$Repeater.startRunnerWithArgs(IdeaTestRunner.java:35)\n    at com.intellij.rt.junit.JUnitStarter.prepareStreamsAndStart(JUnitStarter.java:235)\n    at com.intellij.rt.junit.JUnitStarter.main(JUnitStarter.java:54)\nCaused by: java.io.EOFException: premature end of stream in PartialInputStream\n    at org.bouncycastle.bcpg.BCPGInputStream$PartialInputStream.read(Unknown Source)\n    at org.bouncycastle.bcpg.BCPGInputStream.read(Unknown Source)\n    at java.base/java.io.InputStream.read(InputStream.java:205)\n    at java.base/javax.crypto.CipherInputStream.getMoreData(CipherInputStream.java:121)\n    at java.base/javax.crypto.CipherInputStream.read(CipherInputStream.java:197)\n    at org.bouncycastle.bcpg.BCPGInputStream.read(Unknown Source)\n    at org.bouncycastle.openpgp.PGPEncryptedData$TruncatedStream.&lt;init&gt;(Unknown Source)\n    ... 30 more\n</code></pre>\n<p>The code is saying I am throwing the error at the <code>InputStream clearStream = publicKeyEncryptedData.getDataStream(new JcePublicKeyDataDecryptorFactoryBuilder() .setProvider(new BouncyCastleProvider()) .build(privateKey));</code> line within the decryption method below. I have a feeling that it might have something to do with the <code>Security.addProvider(new BouncyCastleProvider());</code> line at the top of my decryption method....but I am not sure.</p>\n<p>This is my first time working with encryption, so would like any guidance if possible.</p>\n<pre><code>public static void decryptFile(InputStream in, OutputStream out, InputStream keyIn, char[] passwd) throws IOException, PGPException {\n        Security.addProvider(new BouncyCastleProvider());\n        try (InputStream encryptedStream = PGPUtil.getDecoderStream(in)) {\n            log.info(&quot;Got encrypted stream from input stream&quot;);\n\n            PGPObjectFactory pgpFactory = new PGPObjectFactory(encryptedStream, new JcaKeyFingerprintCalculator());\n            PGPEncryptedDataList encryptedDataList = (PGPEncryptedDataList) pgpFactory.nextObject();\n\n            if (encryptedDataList == null) {\n                log.info(&quot;No encrypted data found in input stream&quot;);\n                throw new PGPException(&quot;No encrypted data found in input stream&quot;);\n            }\n\n            // find the secret key needed to decrypt the message\n            PGPSecretKeyRingCollection secretKeyRingCollection = new PGPSecretKeyRingCollection(PGPUtil.getDecoderStream(keyIn), new JcaKeyFingerprintCalculator());\n            PGPPrivateKey privateKey = null;\n            PGPPublicKeyEncryptedData publicKeyEncryptedData = null;\n            for (Object encryptedData : encryptedDataList) {\n                if (encryptedData instanceof PGPPublicKeyEncryptedData) {\n                    publicKeyEncryptedData = (PGPPublicKeyEncryptedData) encryptedData;\n                    PGPSecretKey secretKey = secretKeyRingCollection.getSecretKey(publicKeyEncryptedData.getKeyID());\n                    if (secretKey != null) {\n                        privateKey = secretKey.extractPrivateKey(new JcePBESecretKeyDecryptorBuilder().setProvider(&quot;BC&quot;).build(passwd));\n                        break;\n                    } else {\n                        log.info(&quot;No secret key found for message&quot;);\n                        throw new IllegalArgumentException(&quot;No secret key found for message&quot;);\n                    }\n                }\n            }\n\n            if (privateKey == null) {\n                log.info(&quot;No private key found for message&quot;);\n                throw new IllegalArgumentException(&quot;No private key found for message&quot;);\n            }\n            log.info(&quot;Creating decryptor with provider: &quot; + Security.getProvider(&quot;BC&quot;).getName());\n            log.info(&quot;Using private key with ID: &quot; + Long.toHexString(publicKeyEncryptedData.getKeyID()));\n            // create the decryptor and decrypt the message\n            InputStream clearStream = publicKeyEncryptedData.getDataStream(new JcePublicKeyDataDecryptorFactoryBuilder()\n                    .setProvider(new BouncyCastleProvider())\n                    .build(privateKey));\n            log.info(&quot;Created decryptor and decrypted message&quot;);\n\n            PGPObjectFactory plainFactory = new PGPObjectFactory(clearStream, new JcaKeyFingerprintCalculator());\n            Object message = plainFactory.nextObject();\n\n            // handle the decrypted message\n            if (message instanceof PGPCompressedData) {\n                PGPCompressedData compressedData = (PGPCompressedData) message;\n                InputStream compressedStream = new BufferedInputStream(compressedData.getDataStream());\n                message = new PGPObjectFactory(compressedStream, new JcaKeyFingerprintCalculator()).nextObject();\n            }\n\n            if (message instanceof PGPLiteralData) {\n                PGPLiteralData literalData = (PGPLiteralData) message;\n                try (InputStream literalStream = literalData.getInputStream()) {\n                    byte[] buffer = new byte[4096];\n                    int bytesRead;\n                    while ((bytesRead = literalStream.read(buffer)) != -1) {\n                        out.write(buffer, 0, bytesRead);\n                    }\n                }\n                log.info(&quot;Decrypted message of type PGPLiteralData&quot;);\n            } else {\n                log.info(&quot;Unknown message type: &quot; + message.getClass().getName());\n                throw new PGPException(&quot;Unknown message type: &quot; + message.getClass().getName());\n            }\n        }\n    }\n</code></pre>\n<p>I am trying to decrypt an encrypted file. I encrypted the file using a pub key provided to me by work and am decrypting by using the sec key and password provided by them as well.</p>\n<p>It seems to be failing when trying to actually decrypt.\nKnowing the pub and sec key are correct, along with the password, I am wondering if I might not be encrypting the file correctly? Could this be a possibility? When I open the encrypted file it looks very encrypted.</p>\n<p>Pho</p>\n"},{"tags":["java","dom-events","vaadin-flow"],"answers":[{"tags":[],"owner":{"account_id":2759852,"reputation":7920,"user_id":2376954,"display_name":"Leif &#197;strand"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1682356361,"creation_date":1682336990,"answer_id":76091548,"question_id":76090749,"body_markdown":"First a word of warning: The `timeupdate` event is fired up to 60 times per second. It is not advisable to send updates to the server with that kind of frequency. You would probably have to implement some client-side logic to process the events and then occasionally send an aggregated update to the server.\r\n\r\nFor similar reasons, Flow is not eagerly synchronizing all changes to all DOM properties to the server. Instead, you need to instruct it to use some specific DOM event as a trigger to synchronize some specific property. The most convenient way of doing that is with the `Element::addPropertyChangeListener` overload that also accepts a DOM event name. Furthermore, you can use the return value from `addPropertyChangeListener` to further configure the listener to only send an update to the server if it&#39;s e.g. more than 1000ms since the last time an update was sent.\r\n\r\nIn your case, that could be like this:\r\n```java\r\ngetElement().addPropertyChangeListener(&quot;currentTime&quot;, &quot;timeupdate&quot;,\r\n    event -&gt; System.out.println(event.getValue()))\r\n  .throttle(1000);\r\n```","title":"How to get currentTime with an Event Listener in vaadin app","body":"<p>First a word of warning: The <code>timeupdate</code> event is fired up to 60 times per second. It is not advisable to send updates to the server with that kind of frequency. You would probably have to implement some client-side logic to process the events and then occasionally send an aggregated update to the server.</p>\n<p>For similar reasons, Flow is not eagerly synchronizing all changes to all DOM properties to the server. Instead, you need to instruct it to use some specific DOM event as a trigger to synchronize some specific property. The most convenient way of doing that is with the <code>Element::addPropertyChangeListener</code> overload that also accepts a DOM event name. Furthermore, you can use the return value from <code>addPropertyChangeListener</code> to further configure the listener to only send an update to the server if it's e.g. more than 1000ms since the last time an update was sent.</p>\n<p>In your case, that could be like this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>getElement().addPropertyChangeListener(&quot;currentTime&quot;, &quot;timeupdate&quot;,\n    event -&gt; System.out.println(event.getValue()))\n  .throttle(1000);\n</code></pre>\n"}],"owner":{"account_id":3658297,"reputation":39,"user_id":3048737,"display_name":"Vincent"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":68,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1682356361,"creation_date":1682330807,"question_id":76090749,"body_markdown":"Vaadin doesn&#39;t have any out-of-the-box video component. So I created a custom class to serve as video component. Everything works well except that timeupdate event returns null as currentTime as the video plays.\r\n\r\n    @tag(&#39;video&#39;)\r\n    public class Video extends component implements clickNotifier{\r\n    public Video(){\r\n    getElement().addEventListener(&#39;timeupdate&#39;, event -&gt; {     System.out.println(this.getProperty(&#39;currentTime&#39;));\r\n    });\r\n\r\n    }\r\n    }","title":"How to get currentTime with an Event Listener in vaadin app","body":"<p>Vaadin doesn't have any out-of-the-box video component. So I created a custom class to serve as video component. Everything works well except that timeupdate event returns null as currentTime as the video plays.</p>\n<pre><code>@tag('video')\npublic class Video extends component implements clickNotifier{\npublic Video(){\ngetElement().addEventListener('timeupdate', event -&gt; {     System.out.println(this.getProperty('currentTime'));\n});\n\n}\n}\n</code></pre>\n"},{"tags":["java","algorithm","data-structures"],"answers":[{"tags":[],"owner":{"account_id":19316522,"reputation":608,"user_id":14121186,"display_name":"Caleb Keller"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1682356359,"creation_date":1682356359,"answer_id":76094420,"question_id":76094246,"body_markdown":"You were really close! You accidentally mixed up `x` and `y` in your `Manhattan()` function. No matter what board state you passed into it, it would return a non-zero distance, so your code would keep searching forever until it used up all the memory and crashed.\r\n\r\nAfter switching those around, I ran it and got your expected result:\r\n\r\n```\r\n0 1 3 \r\n4 2 5 \r\n7 8 6 \r\n\r\n1 0 3 \r\n4 2 5 \r\n7 8 6 \r\n\r\n1 2 3 \r\n4 0 5 \r\n7 8 6 \r\n\r\n1 2 3 \r\n4 5 0 \r\n7 8 6 \r\n\r\n1 2 3 \r\n4 5 6 \r\n7 8 0 \r\n\r\n```\r\n\r\nHere&#39;s the change:\r\n\r\n```java\r\n    static int Manhattan(int[][] arr) {\r\n        int ans = 0;\r\n        for (int i = 0; i &lt; 3; i++) {\r\n            for (int j = 0; j &lt; 3; j++) {\r\n                if (arr[i][j] == 0) continue;\r\n                int y = (arr[i][j] - 1) % 3; // Was x\r\n                int x = (arr[i][j] - 1) / 3; // Was y\r\n                ans += Math.abs(x - i) + Math.abs(y - j);\r\n            }\r\n        }\r\n        return ans;\r\n    }\r\n```\r\n\r\nAs a rule of thumb for the future, if your algorithm is causing an OutOfMemory error, the exit condition has probably been set up incorrectly. Computers have a lot of memory, so you have to search through a *considerable* number of states for that to be an issue. It&#39;s definitely possible, especially for really difficult problems, but that&#39;s always the first place I look.","title":"solve 8-puzzle problem using A* algorithm in java","body":"<p>You were really close! You accidentally mixed up <code>x</code> and <code>y</code> in your <code>Manhattan()</code> function. No matter what board state you passed into it, it would return a non-zero distance, so your code would keep searching forever until it used up all the memory and crashed.</p>\n<p>After switching those around, I ran it and got your expected result:</p>\n<pre><code>0 1 3 \n4 2 5 \n7 8 6 \n\n1 0 3 \n4 2 5 \n7 8 6 \n\n1 2 3 \n4 0 5 \n7 8 6 \n\n1 2 3 \n4 5 0 \n7 8 6 \n\n1 2 3 \n4 5 6 \n7 8 0 \n\n</code></pre>\n<p>Here's the change:</p>\n<pre class=\"lang-java prettyprint-override\"><code>    static int Manhattan(int[][] arr) {\n        int ans = 0;\n        for (int i = 0; i &lt; 3; i++) {\n            for (int j = 0; j &lt; 3; j++) {\n                if (arr[i][j] == 0) continue;\n                int y = (arr[i][j] - 1) % 3; // Was x\n                int x = (arr[i][j] - 1) / 3; // Was y\n                ans += Math.abs(x - i) + Math.abs(y - j);\n            }\n        }\n        return ans;\n    }\n</code></pre>\n<p>As a rule of thumb for the future, if your algorithm is causing an OutOfMemory error, the exit condition has probably been set up incorrectly. Computers have a lot of memory, so you have to search through a <em>considerable</em> number of states for that to be an issue. It's definitely possible, especially for really difficult problems, but that's always the first place I look.</p>\n"}],"owner":{"account_id":26494474,"reputation":23,"user_id":20132436,"display_name":"Joshrem"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":514,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":76094420,"answer_count":1,"score":2,"last_activity_date":1682356359,"creation_date":1682354993,"question_id":76094246,"body_markdown":"I&#39;m working on problem using the A* algorithm to solve a 8-puzzle problem in Java. The problem asks for the optimal solution for the following transmission:\r\n\r\n```\r\n0 1 3\r\n4 2 5\r\n7 8 6\r\n---------&gt;\r\n1 2 3\r\n4 5 6\r\n7 8 0\r\n```\r\n\r\nby virtue of moving one number to the place of &#39;0&#39; in one time.\r\n\r\nI basically want to imitate the solution in this tutorial: https://www.javatpoint.com/8-puzzle-problems-in-java\r\n\r\nBut my code do not work properly:\r\n\r\n```java\r\nimport java.util.*;\r\n\r\npublic class Puzzle8 {\r\n    static class State {\r\n        int[][] board;\r\n        int x;\r\n        int y;\r\n        int cost;\r\n        int depth;\r\n        State parent;\r\n\r\n        State(int[][] board, int x, int y, int cost, int depth, State parent) {\r\n            this.board = new int[3][3];\r\n            for (int i = 0; i &lt; 3; i++) {\r\n                for (int j = 0; j &lt; 3; j++) {\r\n                    this.board[i][j] = board[i][j];\r\n                }\r\n            }\r\n            this.x = x;\r\n            this.y = y;\r\n            this.cost = cost;\r\n            this.depth = depth;\r\n            this.parent = parent;\r\n        }\r\n\r\n        @Override\r\n        public boolean equals(Object o) {\r\n            if (this == o) return true;\r\n            if (o == null || getClass() != o.getClass()) return false;\r\n            State state = (State) o;\r\n            return Arrays.deepEquals(board, state.board);\r\n        }\r\n\r\n        @Override\r\n        public int hashCode() {\r\n            return Arrays.deepHashCode(board);\r\n        }\r\n    }\r\n\r\n    static int[] dx = {-1, 1, 0, 0};\r\n    static int[] dy = {0, 0, -1, 1};\r\n\r\n    public static void main(String[] args) {\r\n        int[][] board = new int[3][3];\r\n        Scanner sc = new Scanner(System.in);\r\n        for (int i = 0; i &lt; 3; i++) {\r\n            for (int j = 0; j &lt; 3; j++) {\r\n                board[i][j] = sc.nextInt();\r\n            }\r\n        }\r\n        PriorityQueue&lt;State&gt; pq = new PriorityQueue&lt;&gt;(new Comparator&lt;State&gt;() {\r\n            @Override\r\n            public int compare(State o1, State o2) {\r\n                return o1.cost - o2.cost;\r\n            }\r\n        });\r\n        int[] pos = new int[2];\r\n        find_zero(board, pos);\r\n        State initialState = new State(board, pos[0], pos[1], Manhattan(board), 0, null);\r\n        pq.add(initialState);\r\n\r\n        State goalState = null;\r\n\r\n        while (!pq.isEmpty()) {\r\n            State cur = pq.poll();\r\n            board = cur.board;\r\n\r\n            if (Manhattan(board) == 0) {\r\n                goalState = cur;\r\n                break;\r\n            }\r\n\r\n            find_zero(board, pos);\r\n            int x = pos[0];\r\n            int y = pos[1];\r\n            for (int k = 0; k &lt; 4; k++) {\r\n                int nx = x + dx[k];\r\n                int ny = y + dy[k];\r\n                if (nx &gt;= 0 &amp;&amp; nx &lt; 3 &amp;&amp; ny &gt;= 0 &amp;&amp; ny &lt; 3) {\r\n                    int[][] new_board = new int[3][3];\r\n                    for (int i = 0; i &lt; 3; i++) {\r\n                        for (int j = 0; j &lt; 3; j++) {\r\n                            new_board[i][j] = board[i][j];\r\n                        }\r\n                    }\r\n                    new_board[x][y] = new_board[nx][ny];\r\n                    new_board[nx][ny] = 0;\r\n                    var newState = new State(new_board, nx, ny, Manhattan(new_board) + cur.depth + 1, cur.depth + 1, cur);\r\n                    pq.add(newState);\r\n                }\r\n            }\r\n        }\r\n\r\n        if (goalState != null) {\r\n            Stack&lt;State&gt; path = new Stack&lt;&gt;();\r\n            State currentState = goalState;\r\n            while (currentState != null) {\r\n                path.push(currentState);\r\n                currentState = currentState.parent;\r\n            }\r\n\r\n            while (!path.isEmpty()) {\r\n                State state = path.pop();\r\n                printArr(state.board);\r\n            }\r\n        } else {\r\n            System.out.println(&quot;No solution found.&quot;);\r\n        }\r\n    }\r\n\r\n    static void printArr(int[][] arr) {\r\n        for (int i = 0; i &lt; 3; i++) {\r\n            for (int j = 0; j &lt; 3; j++) {\r\n                System.out.print(arr[i][j] + &quot; &quot;);\r\n            }\r\n            System.out.println();\r\n        }\r\n        System.out.println();\r\n    }\r\n\r\n    static void find_zero(int[][] arr, int[] pos) {\r\n        for (int i = 0; i &lt; 3; i++) {\r\n            for (int j = 0; j &lt; 3; j++) {\r\n                if (arr[i][j] == 0) {\r\n                    pos[0] = i;\r\n                    pos[1] = j;\r\n                    return;\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    static int Manhattan(int[][] arr) {\r\n        int ans = 0;\r\n        for (int i = 0; i &lt; 3; i++) {\r\n            for (int j = 0; j &lt; 3; j++) {\r\n                if (arr[i][j] == 0) continue;\r\n                int x = (arr[i][j] - 1) % 3;\r\n                int y = (arr[i][j] - 1) / 3;\r\n                ans += Math.abs(x - i) + Math.abs(y - j);\r\n            }\r\n        }\r\n        return ans;\r\n    }\r\n}\r\n```\r\n\r\nIn my code, the class &#39;state&#39; should store the current board, current position of &#39;0&#39; element (I think this is not necessary now, maybe I&#39;ll impove it later), the cost (in my implementation I deem the cost = Manhattan distance of all blocks to the right position + steps have been taken, the number of steps taken is stored in depth) and the parent in order to trace back the solution to print.\r\n\r\n\r\n\r\n\r\n```\r\ninput:\r\n0 1 3\r\n4 2 5\r\n7 8 6\r\nexpected output:\r\n4\r\n\r\n0 1 3\r\n4 2 5 \r\n7 8 6\r\n\r\n1 0 3 \r\n4 2 5 \r\n7 8 6\r\n\r\n1 2 3 \r\n4 0 5 \r\n7 8 6\r\n\r\n1 2 3 \r\n4 5 0 \r\n7 8 6\r\n\r\n1 2 3 \r\n4 5 6\r\n7 8 0\r\n```\r\n\r\nMy code encounter the exception of &quot;Exception in thread &quot;main&quot; java.lang.OutOfMemoryError: Java heap space at Puzzle8.main(Puzzle8.java:80)&quot;.\r\n\r\nI&#39;m new to data structures and algorithms. Could you please provide some suggestions for debugging or tell me where did I do wrong?","title":"solve 8-puzzle problem using A* algorithm in java","body":"<p>I'm working on problem using the A* algorithm to solve a 8-puzzle problem in Java. The problem asks for the optimal solution for the following transmission:</p>\n<pre><code>0 1 3\n4 2 5\n7 8 6\n---------&gt;\n1 2 3\n4 5 6\n7 8 0\n</code></pre>\n<p>by virtue of moving one number to the place of '0' in one time.</p>\n<p>I basically want to imitate the solution in this tutorial: <a href=\"https://www.javatpoint.com/8-puzzle-problems-in-java\" rel=\"nofollow noreferrer\">https://www.javatpoint.com/8-puzzle-problems-in-java</a></p>\n<p>But my code do not work properly:</p>\n<pre class=\"lang-java prettyprint-override\"><code>import java.util.*;\n\npublic class Puzzle8 {\n    static class State {\n        int[][] board;\n        int x;\n        int y;\n        int cost;\n        int depth;\n        State parent;\n\n        State(int[][] board, int x, int y, int cost, int depth, State parent) {\n            this.board = new int[3][3];\n            for (int i = 0; i &lt; 3; i++) {\n                for (int j = 0; j &lt; 3; j++) {\n                    this.board[i][j] = board[i][j];\n                }\n            }\n            this.x = x;\n            this.y = y;\n            this.cost = cost;\n            this.depth = depth;\n            this.parent = parent;\n        }\n\n        @Override\n        public boolean equals(Object o) {\n            if (this == o) return true;\n            if (o == null || getClass() != o.getClass()) return false;\n            State state = (State) o;\n            return Arrays.deepEquals(board, state.board);\n        }\n\n        @Override\n        public int hashCode() {\n            return Arrays.deepHashCode(board);\n        }\n    }\n\n    static int[] dx = {-1, 1, 0, 0};\n    static int[] dy = {0, 0, -1, 1};\n\n    public static void main(String[] args) {\n        int[][] board = new int[3][3];\n        Scanner sc = new Scanner(System.in);\n        for (int i = 0; i &lt; 3; i++) {\n            for (int j = 0; j &lt; 3; j++) {\n                board[i][j] = sc.nextInt();\n            }\n        }\n        PriorityQueue&lt;State&gt; pq = new PriorityQueue&lt;&gt;(new Comparator&lt;State&gt;() {\n            @Override\n            public int compare(State o1, State o2) {\n                return o1.cost - o2.cost;\n            }\n        });\n        int[] pos = new int[2];\n        find_zero(board, pos);\n        State initialState = new State(board, pos[0], pos[1], Manhattan(board), 0, null);\n        pq.add(initialState);\n\n        State goalState = null;\n\n        while (!pq.isEmpty()) {\n            State cur = pq.poll();\n            board = cur.board;\n\n            if (Manhattan(board) == 0) {\n                goalState = cur;\n                break;\n            }\n\n            find_zero(board, pos);\n            int x = pos[0];\n            int y = pos[1];\n            for (int k = 0; k &lt; 4; k++) {\n                int nx = x + dx[k];\n                int ny = y + dy[k];\n                if (nx &gt;= 0 &amp;&amp; nx &lt; 3 &amp;&amp; ny &gt;= 0 &amp;&amp; ny &lt; 3) {\n                    int[][] new_board = new int[3][3];\n                    for (int i = 0; i &lt; 3; i++) {\n                        for (int j = 0; j &lt; 3; j++) {\n                            new_board[i][j] = board[i][j];\n                        }\n                    }\n                    new_board[x][y] = new_board[nx][ny];\n                    new_board[nx][ny] = 0;\n                    var newState = new State(new_board, nx, ny, Manhattan(new_board) + cur.depth + 1, cur.depth + 1, cur);\n                    pq.add(newState);\n                }\n            }\n        }\n\n        if (goalState != null) {\n            Stack&lt;State&gt; path = new Stack&lt;&gt;();\n            State currentState = goalState;\n            while (currentState != null) {\n                path.push(currentState);\n                currentState = currentState.parent;\n            }\n\n            while (!path.isEmpty()) {\n                State state = path.pop();\n                printArr(state.board);\n            }\n        } else {\n            System.out.println(&quot;No solution found.&quot;);\n        }\n    }\n\n    static void printArr(int[][] arr) {\n        for (int i = 0; i &lt; 3; i++) {\n            for (int j = 0; j &lt; 3; j++) {\n                System.out.print(arr[i][j] + &quot; &quot;);\n            }\n            System.out.println();\n        }\n        System.out.println();\n    }\n\n    static void find_zero(int[][] arr, int[] pos) {\n        for (int i = 0; i &lt; 3; i++) {\n            for (int j = 0; j &lt; 3; j++) {\n                if (arr[i][j] == 0) {\n                    pos[0] = i;\n                    pos[1] = j;\n                    return;\n                }\n            }\n        }\n    }\n\n    static int Manhattan(int[][] arr) {\n        int ans = 0;\n        for (int i = 0; i &lt; 3; i++) {\n            for (int j = 0; j &lt; 3; j++) {\n                if (arr[i][j] == 0) continue;\n                int x = (arr[i][j] - 1) % 3;\n                int y = (arr[i][j] - 1) / 3;\n                ans += Math.abs(x - i) + Math.abs(y - j);\n            }\n        }\n        return ans;\n    }\n}\n</code></pre>\n<p>In my code, the class 'state' should store the current board, current position of '0' element (I think this is not necessary now, maybe I'll impove it later), the cost (in my implementation I deem the cost = Manhattan distance of all blocks to the right position + steps have been taken, the number of steps taken is stored in depth) and the parent in order to trace back the solution to print.</p>\n<pre><code>input:\n0 1 3\n4 2 5\n7 8 6\nexpected output:\n4\n\n0 1 3\n4 2 5 \n7 8 6\n\n1 0 3 \n4 2 5 \n7 8 6\n\n1 2 3 \n4 0 5 \n7 8 6\n\n1 2 3 \n4 5 0 \n7 8 6\n\n1 2 3 \n4 5 6\n7 8 0\n</code></pre>\n<p>My code encounter the exception of &quot;Exception in thread &quot;main&quot; java.lang.OutOfMemoryError: Java heap space at Puzzle8.main(Puzzle8.java:80)&quot;.</p>\n<p>I'm new to data structures and algorithms. Could you please provide some suggestions for debugging or tell me where did I do wrong?</p>\n"},{"tags":["java","javafx"],"answers":[{"tags":[],"owner":{"account_id":4882335,"reputation":659,"user_id":10489834,"display_name":"Stefan Pfeifer"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1682356293,"creation_date":1682356293,"answer_id":76094412,"question_id":76046918,"body_markdown":"My best solution so far is to extend the `TreeItem` class and keep a separate, sorted list of children that is then mirrored to the actual list of children.\r\nIt is based on this Stackoverflow answer for filterable tree items: https://stackoverflow.com/a/34426897.\r\n\r\n\r\n\r\n\r\n```\r\npublic class SortedTreeItem&lt;T&gt; extends TreeItem&lt;T&gt; {\r\n    private final ObservableList&lt;TreeItem&lt;T&gt;&gt; sourceChildren;\r\n    private final SortedList&lt;TreeItem&lt;T&gt;&gt; sortedChildren;\r\n\r\n    public SortedTreeItem(T value, Callback&lt;T, Observable[]&gt; extractor) {\r\n        super(value, null);\r\n\r\n        // Initialize source list with given extractor\r\n        sourceChildren = FXCollections.observableArrayList(item -&gt; extractor.call(item.getValue()));\r\n\r\n        // Create sorted list of children backed by the source list\r\n        sortedChildren = new SortedList&lt;&gt;(sourceChildren);\r\n\r\n        // Keep actual children list in sync with the sorted children\r\n        // We can&#39;t just override getChildren() because of https://bugs.openjdk.org/browse/JDK-8089158\r\n        Bindings.bindContent(getChildren(), sortedChildren);\r\n    }\r\n\r\n    // Comparator by which the child items are sorted\r\n    public ObjectProperty&lt;Comparator&lt;? super TreeItem&lt;T&gt;&gt;&gt; comparatorProperty() {\r\n        return sortedChildren.comparatorProperty();\r\n    }\r\n\r\n    // For accessing and modifying the source list\r\n    public ObservableList&lt;TreeItem&lt;T&gt;&gt; getSourceChildren() {\r\n        return sourceChildren;\r\n    }\r\n}\r\n```\r\n\r\nOne drawback is that the items must only be modified by using `getSourceChildren()`.\r\nTo enable sorting, the item&#39;s comparators are bound to that of the TreeTableView like this\r\n\r\n```\r\nSortedTreeItem&lt;Entry&gt; item = new SortedTreeItem&lt;&gt;(entry, Entry::extractor);\r\nitem.comparatorProperty().bind(treeTableView.comparatorProperty());\r\n```\r\n\r\nAlso, the default sorting (which would interfere with this solution) is disabled by giving the table an empty sort policy\r\n\r\n```\r\ntreeTableView.setSortPolicy(table -&gt; true);\r\n```","title":"Keep JavaFX TreeTableView sorted when Items change","body":"<p>My best solution so far is to extend the <code>TreeItem</code> class and keep a separate, sorted list of children that is then mirrored to the actual list of children.\nIt is based on this Stackoverflow answer for filterable tree items: <a href=\"https://stackoverflow.com/a/34426897\">https://stackoverflow.com/a/34426897</a>.</p>\n<pre><code>public class SortedTreeItem&lt;T&gt; extends TreeItem&lt;T&gt; {\n    private final ObservableList&lt;TreeItem&lt;T&gt;&gt; sourceChildren;\n    private final SortedList&lt;TreeItem&lt;T&gt;&gt; sortedChildren;\n\n    public SortedTreeItem(T value, Callback&lt;T, Observable[]&gt; extractor) {\n        super(value, null);\n\n        // Initialize source list with given extractor\n        sourceChildren = FXCollections.observableArrayList(item -&gt; extractor.call(item.getValue()));\n\n        // Create sorted list of children backed by the source list\n        sortedChildren = new SortedList&lt;&gt;(sourceChildren);\n\n        // Keep actual children list in sync with the sorted children\n        // We can't just override getChildren() because of https://bugs.openjdk.org/browse/JDK-8089158\n        Bindings.bindContent(getChildren(), sortedChildren);\n    }\n\n    // Comparator by which the child items are sorted\n    public ObjectProperty&lt;Comparator&lt;? super TreeItem&lt;T&gt;&gt;&gt; comparatorProperty() {\n        return sortedChildren.comparatorProperty();\n    }\n\n    // For accessing and modifying the source list\n    public ObservableList&lt;TreeItem&lt;T&gt;&gt; getSourceChildren() {\n        return sourceChildren;\n    }\n}\n</code></pre>\n<p>One drawback is that the items must only be modified by using <code>getSourceChildren()</code>.\nTo enable sorting, the item's comparators are bound to that of the TreeTableView like this</p>\n<pre><code>SortedTreeItem&lt;Entry&gt; item = new SortedTreeItem&lt;&gt;(entry, Entry::extractor);\nitem.comparatorProperty().bind(treeTableView.comparatorProperty());\n</code></pre>\n<p>Also, the default sorting (which would interfere with this solution) is disabled by giving the table an empty sort policy</p>\n<pre><code>treeTableView.setSortPolicy(table -&gt; true);\n</code></pre>\n"}],"owner":{"account_id":4882335,"reputation":659,"user_id":10489834,"display_name":"Stefan Pfeifer"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":115,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1682356293,"creation_date":1681834839,"question_id":76046918,"body_markdown":"I have a JavaFX application with a `TreeTableView` that shows a tree of items that can change in two ways:\r\n\r\n1. Items may be added or removed in the background\r\n2. The data of the items (shown in the table columns) may change\r\n\r\nThe TreeTableView, like the TableView, can be sorted either by users clickinig on the column headers or by setting the sort order in the code. This sorting however does not seem to persist when new items are added or when the data changes.\r\n\r\nHere is a simple example (tested with OpenJFX 20) that shows my problem. A table is created and also a button for adding random tree elements. Even though the table is supposed to be sorted by the first column, new items always show up on the last row instead of being inserted at their correct location. Only manually re-sorting restores the correct order.\r\n\r\n```\r\nimport javafx.application.Application;\r\nimport javafx.beans.property.ReadOnlyStringProperty;\r\nimport javafx.beans.property.ReadOnlyStringWrapper;\r\nimport javafx.scene.Scene;\r\nimport javafx.scene.control.*;\r\nimport javafx.scene.layout.VBox;\r\nimport javafx.stage.Stage;\r\n\r\nimport java.util.Random;\r\n\r\npublic class TestApplication extends Application {\r\n    public static void main(String[] args) {\r\n        launch(args);\r\n    }\r\n\r\n    @Override\r\n    public void start(Stage primaryStage) {\r\n        TreeTableColumn&lt;Entry, String&gt; columnFirst = new TreeTableColumn&lt;&gt;(&quot;First&quot;);\r\n        columnFirst.setCellValueFactory(p -&gt; p.getValue().getValue().firstProperty());\r\n\r\n        TreeTableColumn&lt;Entry, String&gt; columnSecond = new TreeTableColumn&lt;&gt;(&quot;Second&quot;);\r\n        columnSecond.setCellValueFactory(p -&gt; p.getValue().getValue().secondProperty());\r\n\r\n        TreeTableView&lt;Entry&gt; treeTableView = new TreeTableView&lt;&gt;();\r\n        treeTableView.getColumns().add(columnFirst);\r\n        treeTableView.getColumns().add(columnSecond);\r\n\r\n        Button button = new Button(&quot;Add Entry&quot;);\r\n        button.setOnAction(event -&gt; {\r\n            Random random = new Random();\r\n            String first = String.valueOf((char)(random.nextInt(&#39;Z&#39; - &#39;A&#39;) + &#39;A&#39;));\r\n            String second = String.valueOf((char)(random.nextInt(&#39;Z&#39; - &#39;A&#39;) + &#39;A&#39;));\r\n            Entry entry = new Entry(first, second);\r\n\r\n            if(treeTableView.getRoot() == null) {\r\n                treeTableView.setRoot(new TreeItem&lt;&gt;(entry));\r\n                treeTableView.getRoot().setExpanded(true);\r\n                treeTableView.getSortOrder().add(columnFirst);\r\n            }\r\n            else {\r\n                treeTableView.getRoot().getChildren().add(new TreeItem&lt;&gt;(entry));\r\n            }\r\n        });\r\n\r\n        VBox vbox = new VBox();\r\n        vbox.getChildren().add(treeTableView);\r\n        vbox.getChildren().add(button);\r\n\r\n        Scene scene = new Scene(vbox);\r\n        primaryStage.setScene(scene);\r\n        primaryStage.setTitle(&quot;TreeTableView Sorting&quot;);\r\n        primaryStage.show();\r\n    }\r\n\r\n    public static class Entry {\r\n        private final String first;\r\n        private final String second;\r\n\r\n        public Entry(String first, String second) {\r\n            this.first = first;\r\n            this.second = second;\r\n        }\r\n\r\n        public ReadOnlyStringProperty firstProperty() {\r\n            return new ReadOnlyStringWrapper(first);\r\n        }\r\n\r\n        public ReadOnlyStringProperty secondProperty() {\r\n            return new ReadOnlyStringWrapper(second);\r\n        }\r\n    }\r\n}\r\n```\r\n\r\nFor JavaFX&#39;s TableView I could achieve a persistent sorting by using a `SortedList&lt;T&gt;` and binding its comparator to that of the TableView (as suggested in the [documentation](https://openjfx.io/javadoc/20/javafx.controls/javafx/scene/control/TableView.html)).\r\nTogether with setting an [extractor](https://openjfx.io/javadoc/18/javafx.base/javafx/collections/FXCollections.html#observableArrayList(javafx.util.Callback)) to observe changes to the list items themselves this basically solves the problem for the TableView. It just stays sorted in the user-specified way no matter how the data changes.\r\n\r\nBut I failed to find anything similar for the TreeTableView. The items have an internal observable list that can be accessed with `getChildren()` but there don&#39;t seem to be any customization points here.\r\n\r\nIs there an obvious solution to this that I overlooked? Ideally I would like to avoid calling `sort()` after each change to the backing data.","title":"Keep JavaFX TreeTableView sorted when Items change","body":"<p>I have a JavaFX application with a <code>TreeTableView</code> that shows a tree of items that can change in two ways:</p>\n<ol>\n<li>Items may be added or removed in the background</li>\n<li>The data of the items (shown in the table columns) may change</li>\n</ol>\n<p>The TreeTableView, like the TableView, can be sorted either by users clickinig on the column headers or by setting the sort order in the code. This sorting however does not seem to persist when new items are added or when the data changes.</p>\n<p>Here is a simple example (tested with OpenJFX 20) that shows my problem. A table is created and also a button for adding random tree elements. Even though the table is supposed to be sorted by the first column, new items always show up on the last row instead of being inserted at their correct location. Only manually re-sorting restores the correct order.</p>\n<pre><code>import javafx.application.Application;\nimport javafx.beans.property.ReadOnlyStringProperty;\nimport javafx.beans.property.ReadOnlyStringWrapper;\nimport javafx.scene.Scene;\nimport javafx.scene.control.*;\nimport javafx.scene.layout.VBox;\nimport javafx.stage.Stage;\n\nimport java.util.Random;\n\npublic class TestApplication extends Application {\n    public static void main(String[] args) {\n        launch(args);\n    }\n\n    @Override\n    public void start(Stage primaryStage) {\n        TreeTableColumn&lt;Entry, String&gt; columnFirst = new TreeTableColumn&lt;&gt;(&quot;First&quot;);\n        columnFirst.setCellValueFactory(p -&gt; p.getValue().getValue().firstProperty());\n\n        TreeTableColumn&lt;Entry, String&gt; columnSecond = new TreeTableColumn&lt;&gt;(&quot;Second&quot;);\n        columnSecond.setCellValueFactory(p -&gt; p.getValue().getValue().secondProperty());\n\n        TreeTableView&lt;Entry&gt; treeTableView = new TreeTableView&lt;&gt;();\n        treeTableView.getColumns().add(columnFirst);\n        treeTableView.getColumns().add(columnSecond);\n\n        Button button = new Button(&quot;Add Entry&quot;);\n        button.setOnAction(event -&gt; {\n            Random random = new Random();\n            String first = String.valueOf((char)(random.nextInt('Z' - 'A') + 'A'));\n            String second = String.valueOf((char)(random.nextInt('Z' - 'A') + 'A'));\n            Entry entry = new Entry(first, second);\n\n            if(treeTableView.getRoot() == null) {\n                treeTableView.setRoot(new TreeItem&lt;&gt;(entry));\n                treeTableView.getRoot().setExpanded(true);\n                treeTableView.getSortOrder().add(columnFirst);\n            }\n            else {\n                treeTableView.getRoot().getChildren().add(new TreeItem&lt;&gt;(entry));\n            }\n        });\n\n        VBox vbox = new VBox();\n        vbox.getChildren().add(treeTableView);\n        vbox.getChildren().add(button);\n\n        Scene scene = new Scene(vbox);\n        primaryStage.setScene(scene);\n        primaryStage.setTitle(&quot;TreeTableView Sorting&quot;);\n        primaryStage.show();\n    }\n\n    public static class Entry {\n        private final String first;\n        private final String second;\n\n        public Entry(String first, String second) {\n            this.first = first;\n            this.second = second;\n        }\n\n        public ReadOnlyStringProperty firstProperty() {\n            return new ReadOnlyStringWrapper(first);\n        }\n\n        public ReadOnlyStringProperty secondProperty() {\n            return new ReadOnlyStringWrapper(second);\n        }\n    }\n}\n</code></pre>\n<p>For JavaFX's TableView I could achieve a persistent sorting by using a <code>SortedList&lt;T&gt;</code> and binding its comparator to that of the TableView (as suggested in the <a href=\"https://openjfx.io/javadoc/20/javafx.controls/javafx/scene/control/TableView.html\" rel=\"nofollow noreferrer\">documentation</a>).\nTogether with setting an <a href=\"https://openjfx.io/javadoc/18/javafx.base/javafx/collections/FXCollections.html#observableArrayList(javafx.util.Callback)\" rel=\"nofollow noreferrer\">extractor</a> to observe changes to the list items themselves this basically solves the problem for the TableView. It just stays sorted in the user-specified way no matter how the data changes.</p>\n<p>But I failed to find anything similar for the TreeTableView. The items have an internal observable list that can be accessed with <code>getChildren()</code> but there don't seem to be any customization points here.</p>\n<p>Is there an obvious solution to this that I overlooked? Ideally I would like to avoid calling <code>sort()</code> after each change to the backing data.</p>\n"},{"tags":["java","ibm-mq","tls1.2"],"comments":[{"owner":{"account_id":9804285,"reputation":10345,"user_id":7264620,"display_name":"JoshMc"},"score":0,"creation_date":1562334134,"post_id":55233923,"comment_id":100353127,"body_markdown":"Did one id the answers help you solve your problem?   If it did please accept it.","body":"Did one id the answers help you solve your problem?   If it did please accept it."}],"answers":[{"tags":[],"owner":{"account_id":7206986,"reputation":4285,"user_id":5502306,"display_name":"chughts"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1553091874,"creation_date":1553091874,"answer_id":55263101,"question_id":55233923,"body_markdown":"I don&#39;t think you can, but you can use `key tool` to create a `.jks` keystone and import the server certificate or truststore certificate. \r\n\r\n````\r\nkeytool -keystore clientkey.jks -storetype jks -importcert -file servercert.pem -alias server-cert\r\n````\r\n\r\nLook in the TLS section in https://github.com/ibm-messaging/mq-dev-patterns","title":"KDB to JKS keystore conversion","body":"<p>I don't think you can, but you can use <code>key tool</code> to create a <code>.jks</code> keystone and import the server certificate or truststore certificate. </p>\n\n<pre><code>keytool -keystore clientkey.jks -storetype jks -importcert -file servercert.pem -alias server-cert\n</code></pre>\n\n<p>Look in the TLS section in <a href=\"https://github.com/ibm-messaging/mq-dev-patterns\" rel=\"nofollow noreferrer\">https://github.com/ibm-messaging/mq-dev-patterns</a></p>\n"},{"tags":[],"owner":{"account_id":9804285,"reputation":10345,"user_id":7264620,"display_name":"JoshMc"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1553325810,"creation_date":1553324674,"answer_id":55311445,"question_id":55233923,"body_markdown":"You do not mention which version of the MQ client you are using, for the purpose of this answer I will assume you are using a MQ client 7.1 or later.\r\n\r\n---\r\n\r\nYou can build a Java Key Store (jks) from a source kdb file.\r\n\r\nThis will take two steps to complete:\r\n\r\n1. Create an empty Java Key Store (jks):\r\n\r\n    `runmqckm -keydb -create -db target.jks -type jks`  \r\nThis will prompt for a password that will be used to protect the jks file.\r\n\r\n\r\n2. Import all certs from the source kdb file to the target jks file created above:\r\n\r\n    `runmqckm -cert -import -db source.kdb -type cms -target target.jks -target_type jks`  \r\nThis will prompt for two passwords, the first is the password of the kdb file, the second is the password of the jks file.  If you add the flag &#39;-stashed&#39; it will eliminate the first password prompt.\r\n\r\n3. You can then list the certs contained in both the kdb and the jks to compare and validate that all certs were copied over:\r\n\r\n   `runmqckm -cert -list -db source.kdb -type cms -stashed`  \r\nThe command above will NOT prompt for a password because of the `-stashed` flag.  \r\n\r\n   `runmqckm -cert -list -db target.jks -type jks`  \r\nThe command above WILL prompt for the jks password.\r\n\r\n---\r\n\r\nNotes\r\n--\r\n\r\n1. The kdb/rdb/sth files together represent an IBM Certificate Management Services (CMS) keystore.\r\n2. There is a `-keydb -convert` option that indicates it should have the same outcome as the two steps I provided above, however I have noted that it does not always copy all of the certs.","title":"KDB to JKS keystore conversion","body":"<p>You do not mention which version of the MQ client you are using, for the purpose of this answer I will assume you are using a MQ client 7.1 or later.</p>\n\n<hr>\n\n<p>You can build a Java Key Store (jks) from a source kdb file.</p>\n\n<p>This will take two steps to complete:</p>\n\n<ol>\n<li><p>Create an empty Java Key Store (jks):</p>\n\n<p><code>runmqckm -keydb -create -db target.jks -type jks</code><br>\nThis will prompt for a password that will be used to protect the jks file.</p></li>\n<li><p>Import all certs from the source kdb file to the target jks file created above:</p>\n\n<p><code>runmqckm -cert -import -db source.kdb -type cms -target target.jks -target_type jks</code><br>\nThis will prompt for two passwords, the first is the password of the kdb file, the second is the password of the jks file.  If you add the flag '-stashed' it will eliminate the first password prompt.</p></li>\n<li><p>You can then list the certs contained in both the kdb and the jks to compare and validate that all certs were copied over:</p>\n\n<p><code>runmqckm -cert -list -db source.kdb -type cms -stashed</code><br>\nThe command above will NOT prompt for a password because of the <code>-stashed</code> flag.  </p>\n\n<p><code>runmqckm -cert -list -db target.jks -type jks</code><br>\nThe command above WILL prompt for the jks password.</p></li>\n</ol>\n\n<hr>\n\n<h2>Notes</h2>\n\n<ol>\n<li>The kdb/rdb/sth files together represent an IBM Certificate Management Services (CMS) keystore.</li>\n<li>There is a <code>-keydb -convert</code> option that indicates it should have the same outcome as the two steps I provided above, however I have noted that it does not always copy all of the certs.</li>\n</ol>\n"},{"tags":[],"owner":{"account_id":3816501,"reputation":129,"user_id":3165751,"display_name":"aver"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1682355885,"creation_date":1682355885,"answer_id":76094363,"question_id":55233923,"body_markdown":"Java supports JKS and PKCS12 key store types. It also distinguishes between keyStore (which contains client certificates) and trustStore (which contains trusted certificates). Both keyStore and trustStore are needed.\r\n\r\nClient certificates (keyStore) can be exported from .kdb directly by gsk8capicmd_64 command:\r\n\r\n    gsk8capicmd_64 -cert -export -db file.kdb -pw your_password -target file.p12 -target_pw your_password\r\n\r\nTrustStore .jks can be created by exporting trusted certificates from .kdb and inserting them to new .jks:\r\n\r\n    for CERT_LABEL in $(gsk8capicmd_64 -cert -list -db file.kdb -pw your_password | grep ^! | cut -f2);\r\n    do\r\n        gsk8capicmd_64 -cert -extract -db file.kdb -pw your_password -label ${CERT_LABEL} -target temp.cert;\r\n        yes | keytool -importcert -alias ${CERT_LABEL} -file temp.cert -keystore file.jks -storepass your_password;\r\n    done;\r\n\r\nKeyStore and trustStore can be then configured on command line or directly in the code this way:\r\n\r\n    System.setProperty(&quot;javax.net.ssl.keyStore&quot;, &quot;file.p12&quot;);\r\n    System.setProperty(&quot;javax.net.ssl.keyStorePassword&quot;, &quot;your_password&quot;);\r\n    System.setProperty(&quot;javax.net.ssl.keyStoreType&quot;, &quot;pkcs12&quot;);\r\n    System.setProperty(&quot;javax.net.ssl.trustStore&quot;, &quot;file.jks&quot;);\r\n    System.setProperty(&quot;javax.net.ssl.trustStorePassword&quot;, &quot;your_password&quot;);\r\n    System.setProperty(&quot;javax.net.ssl.trustStoreType&quot;, &quot;jks&quot;);","title":"KDB to JKS keystore conversion","body":"<p>Java supports JKS and PKCS12 key store types. It also distinguishes between keyStore (which contains client certificates) and trustStore (which contains trusted certificates). Both keyStore and trustStore are needed.</p>\n<p>Client certificates (keyStore) can be exported from .kdb directly by gsk8capicmd_64 command:</p>\n<pre><code>gsk8capicmd_64 -cert -export -db file.kdb -pw your_password -target file.p12 -target_pw your_password\n</code></pre>\n<p>TrustStore .jks can be created by exporting trusted certificates from .kdb and inserting them to new .jks:</p>\n<pre><code>for CERT_LABEL in $(gsk8capicmd_64 -cert -list -db file.kdb -pw your_password | grep ^! | cut -f2);\ndo\n    gsk8capicmd_64 -cert -extract -db file.kdb -pw your_password -label ${CERT_LABEL} -target temp.cert;\n    yes | keytool -importcert -alias ${CERT_LABEL} -file temp.cert -keystore file.jks -storepass your_password;\ndone;\n</code></pre>\n<p>KeyStore and trustStore can be then configured on command line or directly in the code this way:</p>\n<pre><code>System.setProperty(&quot;javax.net.ssl.keyStore&quot;, &quot;file.p12&quot;);\nSystem.setProperty(&quot;javax.net.ssl.keyStorePassword&quot;, &quot;your_password&quot;);\nSystem.setProperty(&quot;javax.net.ssl.keyStoreType&quot;, &quot;pkcs12&quot;);\nSystem.setProperty(&quot;javax.net.ssl.trustStore&quot;, &quot;file.jks&quot;);\nSystem.setProperty(&quot;javax.net.ssl.trustStorePassword&quot;, &quot;your_password&quot;);\nSystem.setProperty(&quot;javax.net.ssl.trustStoreType&quot;, &quot;jks&quot;);\n</code></pre>\n"}],"owner":{"account_id":15558504,"reputation":11,"user_id":11224197,"display_name":"able"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":11819,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":3,"score":1,"last_activity_date":1682355885,"creation_date":1552971569,"question_id":55233923,"body_markdown":"I am new to TLS in java. I have files with KDB, RDB, and STN extensions.\r\nHow can I setup a JKS keystore and use that in a java application to implement TLS, which uses IBM WebSphere MQ client?\r\n\r\nMy doubts are:\r\n\r\n1. Can I use ikeyman for the conversion?\r\n2. Can I convert the KDB files directly to JKS keystore?\r\n3. Do I need any other certificates to imlpement TLS in the IBM native MQ test application?\r\n4. How can I add the TLS parameters to IBM Native MQ API?\r\n\r\nI have tried to launch ikeyman. But I can&#39;t.","title":"KDB to JKS keystore conversion","body":"<p>I am new to TLS in java. I have files with KDB, RDB, and STN extensions.\nHow can I setup a JKS keystore and use that in a java application to implement TLS, which uses IBM WebSphere MQ client?</p>\n\n<p>My doubts are:</p>\n\n<ol>\n<li>Can I use ikeyman for the conversion?</li>\n<li>Can I convert the KDB files directly to JKS keystore?</li>\n<li>Do I need any other certificates to imlpement TLS in the IBM native MQ test application?</li>\n<li>How can I add the TLS parameters to IBM Native MQ API?</li>\n</ol>\n\n<p>I have tried to launch ikeyman. But I can't.</p>\n"},{"tags":["java","kubernetes","apache-flink","k3s","k3d"],"answers":[{"tags":[],"owner":{"account_id":2273748,"reputation":46601,"user_id":2000548,"accept_rate":92,"display_name":"Hongbo Miao"},"down_vote_count":0,"up_vote_count":5,"is_accepted":true,"score":5,"last_activity_date":1682355763,"creation_date":1628898778,"answer_id":68779353,"question_id":68761409,"body_markdown":"# TL;DR\r\n\r\nDownload latest version of `bcprov-jdk15on` and `bcpkix-jdk15on` jar files from\r\n\r\n- https://mvnrepository.com/artifact/org.bouncycastle/bcprov-jdk15on\r\n- https://mvnrepository.com/artifact/org.bouncycastle/bcpkix-jdk15on\r\n\r\nThen move to your apache-flink folder. In my case, it is\r\n\r\n```\r\n/usr/local/Cellar/apache-flink/{version}/libexec/lib\r\n```\r\n\r\nThen you are good to go!\r\n\r\n---\r\n\r\n# How I Found Out\r\n\r\nAfter checking the code of\r\n\r\n- /usr/local/Cellar/apache-flink/1.13.1/libexec/bin/kubernetes-session.sh\r\n- /usr/local/Cellar/apache-flink/1.13.1/libexec/libexec/kubernetes-session.sh\r\n\r\nThe first script is pointing to the second script, and the second script has\r\n\r\n```\r\n# ...\r\nCC_CLASSPATH=`manglePathList $(constructFlinkClassPath):$INTERNAL_HADOOP_CLASSPATHS`\r\n\r\n# ...\r\n&quot;$JAVA_RUN&quot; $JVM_ARGS -classpath &quot;$CC_CLASSPATH&quot; $log_setting org.apache.flink.kubernetes.cli.KubernetesSessionCli &quot;$@&quot;\r\n```\r\n\r\nI added `echo $CC_CLASSPATH`, and printed out the classpath.\r\n\r\nIn my case, it is at `/usr/local/Cellar/apache-flink/1.13.1/libexec/lib`.\r\n\r\nAfter I put `bcprov-jdk15on-1.69.jar` and `bcpkix-jdk15on-1.69.jar` in the folder above, Flink can be deployed to k3s (k3d) now in both session and application modes.\r\n","title":"JcaPEMKeyConverter is provided by BouncyCastle, an optional dependency. To use support for EC Keys you must explicitly add dependency to classpath","body":"<h1>TL;DR</h1>\n<p>Download latest version of <code>bcprov-jdk15on</code> and <code>bcpkix-jdk15on</code> jar files from</p>\n<ul>\n<li><a href=\"https://mvnrepository.com/artifact/org.bouncycastle/bcprov-jdk15on\" rel=\"nofollow noreferrer\">https://mvnrepository.com/artifact/org.bouncycastle/bcprov-jdk15on</a></li>\n<li><a href=\"https://mvnrepository.com/artifact/org.bouncycastle/bcpkix-jdk15on\" rel=\"nofollow noreferrer\">https://mvnrepository.com/artifact/org.bouncycastle/bcpkix-jdk15on</a></li>\n</ul>\n<p>Then move to your apache-flink folder. In my case, it is</p>\n<pre><code>/usr/local/Cellar/apache-flink/{version}/libexec/lib\n</code></pre>\n<p>Then you are good to go!</p>\n<hr />\n<h1>How I Found Out</h1>\n<p>After checking the code of</p>\n<ul>\n<li>/usr/local/Cellar/apache-flink/1.13.1/libexec/bin/kubernetes-session.sh</li>\n<li>/usr/local/Cellar/apache-flink/1.13.1/libexec/libexec/kubernetes-session.sh</li>\n</ul>\n<p>The first script is pointing to the second script, and the second script has</p>\n<pre><code># ...\nCC_CLASSPATH=`manglePathList $(constructFlinkClassPath):$INTERNAL_HADOOP_CLASSPATHS`\n\n# ...\n&quot;$JAVA_RUN&quot; $JVM_ARGS -classpath &quot;$CC_CLASSPATH&quot; $log_setting org.apache.flink.kubernetes.cli.KubernetesSessionCli &quot;$@&quot;\n</code></pre>\n<p>I added <code>echo $CC_CLASSPATH</code>, and printed out the classpath.</p>\n<p>In my case, it is at <code>/usr/local/Cellar/apache-flink/1.13.1/libexec/lib</code>.</p>\n<p>After I put <code>bcprov-jdk15on-1.69.jar</code> and <code>bcpkix-jdk15on-1.69.jar</code> in the folder above, Flink can be deployed to k3s (k3d) now in both session and application modes.</p>\n"},{"tags":[],"owner":{"account_id":125489,"reputation":2023,"user_id":321307,"accept_rate":73,"display_name":"sschober"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1657035012,"creation_date":1657035012,"answer_id":72872000,"question_id":68761409,"body_markdown":"I stumbled upon this problem today on my m1 mac using docker and k3d to create a k3s cluster.\r\n\r\nI solved it by actually doing what the error message says: adding bouncy castle to the class path. \r\n\r\n_But_ you need to add bc to the **plugin&#39;s class path** in the `pom.xml`, like so:\r\n\r\n```xml\r\n...\r\n      &lt;plugin&gt;\r\n        &lt;groupId&gt;${quarkus.platform.group-id}&lt;/groupId&gt;\r\n        &lt;artifactId&gt;quarkus-maven-plugin&lt;/artifactId&gt;\r\n        &lt;version&gt;${quarkus.platform.version}&lt;/version&gt;\r\n        &lt;extensions&gt;true&lt;/extensions&gt;\r\n        &lt;executions&gt;\r\n          &lt;execution&gt;\r\n            &lt;goals&gt;\r\n              &lt;goal&gt;build&lt;/goal&gt;\r\n              &lt;goal&gt;generate-code&lt;/goal&gt;\r\n              &lt;goal&gt;generate-code-tests&lt;/goal&gt;\r\n            &lt;/goals&gt;\r\n          &lt;/execution&gt;\r\n        &lt;/executions&gt;\r\n\r\n        &lt;!-- add bouncy castle to class path, so that elliptic curve keys work --&gt;\r\n        &lt;dependencies&gt;\r\n          &lt;dependency&gt;\r\n              &lt;groupId&gt;org.bouncycastle&lt;/groupId&gt;\r\n              &lt;artifactId&gt;bcpkix-jdk15on&lt;/artifactId&gt;\r\n              &lt;version&gt;1.69&lt;/version&gt;\r\n          &lt;/dependency&gt;\r\n          &lt;dependency&gt;\r\n              &lt;groupId&gt;org.bouncycastle&lt;/groupId&gt;\r\n              &lt;artifactId&gt;bcprov-jdk15on&lt;/artifactId&gt;\r\n              &lt;version&gt;1.69&lt;/version&gt;\r\n          &lt;/dependency&gt;\r\n          &lt;dependency&gt;\r\n              &lt;groupId&gt;org.bouncycastle&lt;/groupId&gt;\r\n              &lt;artifactId&gt;bcprov-ext-jdk15on&lt;/artifactId&gt;\r\n              &lt;version&gt;1.69&lt;/version&gt;\r\n          &lt;/dependency&gt;\r\n        &lt;/dependencies&gt;\r\n      &lt;/plugin&gt;\r\n...\r\n```\r\n\r\nI don&#39;t know, it seems to me, that k3d always generates EC keys, as I had this exact problem on a totally different machine (win10/wsl2 + k3d) also.","title":"JcaPEMKeyConverter is provided by BouncyCastle, an optional dependency. To use support for EC Keys you must explicitly add dependency to classpath","body":"<p>I stumbled upon this problem today on my m1 mac using docker and k3d to create a k3s cluster.</p>\n<p>I solved it by actually doing what the error message says: adding bouncy castle to the class path.</p>\n<p><em>But</em> you need to add bc to the <strong>plugin's class path</strong> in the <code>pom.xml</code>, like so:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>...\n      &lt;plugin&gt;\n        &lt;groupId&gt;${quarkus.platform.group-id}&lt;/groupId&gt;\n        &lt;artifactId&gt;quarkus-maven-plugin&lt;/artifactId&gt;\n        &lt;version&gt;${quarkus.platform.version}&lt;/version&gt;\n        &lt;extensions&gt;true&lt;/extensions&gt;\n        &lt;executions&gt;\n          &lt;execution&gt;\n            &lt;goals&gt;\n              &lt;goal&gt;build&lt;/goal&gt;\n              &lt;goal&gt;generate-code&lt;/goal&gt;\n              &lt;goal&gt;generate-code-tests&lt;/goal&gt;\n            &lt;/goals&gt;\n          &lt;/execution&gt;\n        &lt;/executions&gt;\n\n        &lt;!-- add bouncy castle to class path, so that elliptic curve keys work --&gt;\n        &lt;dependencies&gt;\n          &lt;dependency&gt;\n              &lt;groupId&gt;org.bouncycastle&lt;/groupId&gt;\n              &lt;artifactId&gt;bcpkix-jdk15on&lt;/artifactId&gt;\n              &lt;version&gt;1.69&lt;/version&gt;\n          &lt;/dependency&gt;\n          &lt;dependency&gt;\n              &lt;groupId&gt;org.bouncycastle&lt;/groupId&gt;\n              &lt;artifactId&gt;bcprov-jdk15on&lt;/artifactId&gt;\n              &lt;version&gt;1.69&lt;/version&gt;\n          &lt;/dependency&gt;\n          &lt;dependency&gt;\n              &lt;groupId&gt;org.bouncycastle&lt;/groupId&gt;\n              &lt;artifactId&gt;bcprov-ext-jdk15on&lt;/artifactId&gt;\n              &lt;version&gt;1.69&lt;/version&gt;\n          &lt;/dependency&gt;\n        &lt;/dependencies&gt;\n      &lt;/plugin&gt;\n...\n</code></pre>\n<p>I don't know, it seems to me, that k3d always generates EC keys, as I had this exact problem on a totally different machine (win10/wsl2 + k3d) also.</p>\n"}],"owner":{"account_id":2273748,"reputation":46601,"user_id":2000548,"accept_rate":92,"display_name":"Hongbo Miao"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3711,"favorite_count":0,"down_vote_count":0,"up_vote_count":5,"accepted_answer_id":68779353,"answer_count":2,"score":5,"last_activity_date":1682355763,"creation_date":1628787002,"question_id":68761409,"body_markdown":"I have a simple Flink streaming app. It runs well in a cluster created by `start-cluster.sh` command.\r\n\r\nNow based on the [Flink tutorial](https://ci.apache.org/projects/flink/flink-docs-release-1.13/docs/deployment/resource-providers/native_kubernetes/#application-mode), I hope to deploy it in application mode natively in a Kubernetes cluster created by [k3d](https://k3d.io/) on macOS.\r\n\r\nFirst, I created a cluster by `k3d cluster create dev`.\r\n\r\nHere is my **Dockerfile**:\r\n\r\n```\r\nFROM flink\r\nRUN mkdir -p $FLINK_HOME/usrlib\r\nCOPY target/streaming-0.1.jar $FLINK_HOME/usrlib/streaming-0.1.jar\r\n```\r\n\r\nI built and pushed it to Docker Hub.\r\n\r\nMy cluster name is `k3d-dev`, so I ran\r\n\r\n```\r\nflink run-application \\\r\n    --target kubernetes-application \\\r\n    -Dkubernetes.cluster-id=k3d-dev \\\r\n    -Dkubernetes.container.image=hongbomiao/my-flink-xxx:latest \\\r\n    local:///opt/flink/usrlib/streaming-0.1.jar\r\n\r\n```\r\n\r\nHowever, I got error:\r\n\r\n```\r\n The program finished with the following exception:\r\n\r\nio.fabric8.kubernetes.client.KubernetesClientException: JcaPEMKeyConverter is provided by BouncyCastle, an optional dependency. To use support for EC Keys you must explicitly add this dependency to classpath.\r\n\tat io.fabric8.kubernetes.client.internal.CertUtils.handleECKey(CertUtils.java:161)\r\n\tat io.fabric8.kubernetes.client.internal.CertUtils.loadKey(CertUtils.java:131)\r\n\tat io.fabric8.kubernetes.client.internal.CertUtils.createKeyStore(CertUtils.java:111)\r\n\tat io.fabric8.kubernetes.client.internal.CertUtils.createKeyStore(CertUtils.java:243)\r\n\tat io.fabric8.kubernetes.client.internal.SSLUtils.keyManagers(SSLUtils.java:128)\r\n\tat io.fabric8.kubernetes.client.internal.SSLUtils.keyManagers(SSLUtils.java:122)\r\n\tat io.fabric8.kubernetes.client.utils.HttpClientUtils.createHttpClient(HttpClientUtils.java:82)\r\n\tat io.fabric8.kubernetes.client.utils.HttpClientUtils.createHttpClient(HttpClientUtils.java:62)\r\n\tat io.fabric8.kubernetes.client.BaseClient.&lt;init&gt;(BaseClient.java:51)\r\n\tat io.fabric8.kubernetes.client.DefaultKubernetesClient.&lt;init&gt;(DefaultKubernetesClient.java:105)\r\n\tat org.apache.flink.kubernetes.kubeclient.FlinkKubeClientFactory.fromConfiguration(FlinkKubeClientFactory.java:102)\r\n\tat org.apache.flink.kubernetes.KubernetesClusterClientFactory.createClusterDescriptor(KubernetesClusterClientFactory.java:61)\r\n\tat org.apache.flink.kubernetes.KubernetesClusterClientFactory.createClusterDescriptor(KubernetesClusterClientFactory.java:39)\r\n\tat org.apache.flink.client.deployment.application.cli.ApplicationClusterDeployer.run(ApplicationClusterDeployer.java:63)\r\n\tat org.apache.flink.client.cli.CliFrontend.runApplication(CliFrontend.java:213)\r\n\tat org.apache.flink.client.cli.CliFrontend.parseAndRun(CliFrontend.java:1057)\r\n\tat org.apache.flink.client.cli.CliFrontend.lambda$main$10(CliFrontend.java:1132)\r\n\tat org.apache.flink.runtime.security.contexts.NoOpSecurityContext.runSecured(NoOpSecurityContext.java:28)\r\n\tat org.apache.flink.client.cli.CliFrontend.main(CliFrontend.java:1132)\r\n```\r\n\r\n\r\nAfter reading\r\n\r\n- https://www.mail-archive.com/search?l=dev@spark.apache.org&amp;q=subject:&quot;Should+we+add+built+in+support+for+bouncy+castle+EC+w\\%2FKube&quot;&amp;o=newest&amp;f=1\r\n- https://github.com/de-jcup/ekube/issues/63#issuecomment-753508790\r\n\r\nI added\r\n\r\n```\r\n&lt;dependency&gt;\r\n    &lt;groupId&gt;org.bouncycastle&lt;/groupId&gt;\r\n    &lt;artifactId&gt;bcpkix-jdk15on&lt;/artifactId&gt;\r\n    &lt;version&gt;1.69&lt;/version&gt;\r\n&lt;/dependency&gt;\r\n&lt;dependency&gt;\r\n    &lt;groupId&gt;org.bouncycastle&lt;/groupId&gt;\r\n    &lt;artifactId&gt;bcprov-jdk15on&lt;/artifactId&gt;\r\n    &lt;version&gt;1.69&lt;/version&gt;\r\n&lt;/dependency&gt;\r\n&lt;dependency&gt;\r\n    &lt;groupId&gt;org.bouncycastle&lt;/groupId&gt;\r\n    &lt;artifactId&gt;bcprov-ext-jdk15on&lt;/artifactId&gt;\r\n    &lt;version&gt;1.69&lt;/version&gt;\r\n&lt;/dependency&gt;\r\n```\r\n\r\nto my **pom.xml** file. I built and pushed to Docker Hub again.\r\n\r\nWhen I ran the Flink command above, I still got same error. Any idea? Thanks!\r\n\r\n---\r\n\r\n**UPDATE 1:**\r\n\r\nBesides above **pom.xml** change, I manually downloaded those 3 jars and changed my Dockerfile to\r\n\r\n\r\n```\r\nFROM flink\r\nCOPY lib/* $FLINK_HOME/lib\r\nRUN mkdir -p $FLINK_HOME/usrlib\r\nCOPY target/streaming-0.1.jar $FLINK_HOME/usrlib/streaming-0.1.jar\r\n```\r\n\r\nand tried again, but still same error.\r\n\r\nI can confirm the 3 jar files `bcpkix-jdk15on-1.69.jar`, `bcprov-ext-jdk15on-1.69.jar`, `bcprov-jdk15on-1.69.jar` are in the docker image:\r\n\r\n```\r\n➜ docker run -it 6c48af48db55c334003a307d1ef7a5fc5181f389613284b66b5cb97588b9708d sh\r\n\r\n$ cd lib &amp;&amp; ls\r\nbcpkix-jdk15on-1.69.jar      flink-dist_2.12-1.13.2.jar\t\tflink-table_2.12-1.13.2.jar  log4j-slf4j-impl-2.12.1.jar\r\nbcprov-ext-jdk15on-1.69.jar  flink-json-1.13.2.jar\t\tlog4j-1.2-api-2.12.1.jar\r\nbcprov-jdk15on-1.69.jar      flink-shaded-zookeeper-3.4.14.jar\tlog4j-api-2.12.1.jar\r\nflink-csv-1.13.2.jar\t     flink-table-blink_2.12-1.13.2.jar\tlog4j-core-2.12.1.jar\r\n$ cd ../usrlib &amp;&amp; ls\r\nstreaming-0.1.jar\r\n```\r\n\r\n---\r\n\r\n**UPDATE 2:**\r\n\r\nI tried to start the session mode by\r\n\r\n```\r\n/usr/local/Cellar/apache-flink/1.13.1/libexec/bin/kubernetes-session.sh\r\n```\r\n\r\nbut still got same error. So now I can confirm when I was using application mode before, the issue is not related my Docker image.\r\n\r\nI have those jars are located at `~/.m2` on my machine:\r\n\r\n[![enter image description here][1]][1]\r\n\r\nDid I miss any other jars?\r\n\r\nAlso, I found the error only happens to the cluster created by k3d/k3s, but not minikube.\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/hQNf8.png","title":"JcaPEMKeyConverter is provided by BouncyCastle, an optional dependency. To use support for EC Keys you must explicitly add dependency to classpath","body":"<p>I have a simple Flink streaming app. It runs well in a cluster created by <code>start-cluster.sh</code> command.</p>\n<p>Now based on the <a href=\"https://ci.apache.org/projects/flink/flink-docs-release-1.13/docs/deployment/resource-providers/native_kubernetes/#application-mode\" rel=\"noreferrer\">Flink tutorial</a>, I hope to deploy it in application mode natively in a Kubernetes cluster created by <a href=\"https://k3d.io/\" rel=\"noreferrer\">k3d</a> on macOS.</p>\n<p>First, I created a cluster by <code>k3d cluster create dev</code>.</p>\n<p>Here is my <strong>Dockerfile</strong>:</p>\n<pre><code>FROM flink\nRUN mkdir -p $FLINK_HOME/usrlib\nCOPY target/streaming-0.1.jar $FLINK_HOME/usrlib/streaming-0.1.jar\n</code></pre>\n<p>I built and pushed it to Docker Hub.</p>\n<p>My cluster name is <code>k3d-dev</code>, so I ran</p>\n<pre><code>flink run-application \\\n    --target kubernetes-application \\\n    -Dkubernetes.cluster-id=k3d-dev \\\n    -Dkubernetes.container.image=hongbomiao/my-flink-xxx:latest \\\n    local:///opt/flink/usrlib/streaming-0.1.jar\n\n</code></pre>\n<p>However, I got error:</p>\n<pre><code> The program finished with the following exception:\n\nio.fabric8.kubernetes.client.KubernetesClientException: JcaPEMKeyConverter is provided by BouncyCastle, an optional dependency. To use support for EC Keys you must explicitly add this dependency to classpath.\n    at io.fabric8.kubernetes.client.internal.CertUtils.handleECKey(CertUtils.java:161)\n    at io.fabric8.kubernetes.client.internal.CertUtils.loadKey(CertUtils.java:131)\n    at io.fabric8.kubernetes.client.internal.CertUtils.createKeyStore(CertUtils.java:111)\n    at io.fabric8.kubernetes.client.internal.CertUtils.createKeyStore(CertUtils.java:243)\n    at io.fabric8.kubernetes.client.internal.SSLUtils.keyManagers(SSLUtils.java:128)\n    at io.fabric8.kubernetes.client.internal.SSLUtils.keyManagers(SSLUtils.java:122)\n    at io.fabric8.kubernetes.client.utils.HttpClientUtils.createHttpClient(HttpClientUtils.java:82)\n    at io.fabric8.kubernetes.client.utils.HttpClientUtils.createHttpClient(HttpClientUtils.java:62)\n    at io.fabric8.kubernetes.client.BaseClient.&lt;init&gt;(BaseClient.java:51)\n    at io.fabric8.kubernetes.client.DefaultKubernetesClient.&lt;init&gt;(DefaultKubernetesClient.java:105)\n    at org.apache.flink.kubernetes.kubeclient.FlinkKubeClientFactory.fromConfiguration(FlinkKubeClientFactory.java:102)\n    at org.apache.flink.kubernetes.KubernetesClusterClientFactory.createClusterDescriptor(KubernetesClusterClientFactory.java:61)\n    at org.apache.flink.kubernetes.KubernetesClusterClientFactory.createClusterDescriptor(KubernetesClusterClientFactory.java:39)\n    at org.apache.flink.client.deployment.application.cli.ApplicationClusterDeployer.run(ApplicationClusterDeployer.java:63)\n    at org.apache.flink.client.cli.CliFrontend.runApplication(CliFrontend.java:213)\n    at org.apache.flink.client.cli.CliFrontend.parseAndRun(CliFrontend.java:1057)\n    at org.apache.flink.client.cli.CliFrontend.lambda$main$10(CliFrontend.java:1132)\n    at org.apache.flink.runtime.security.contexts.NoOpSecurityContext.runSecured(NoOpSecurityContext.java:28)\n    at org.apache.flink.client.cli.CliFrontend.main(CliFrontend.java:1132)\n</code></pre>\n<p>After reading</p>\n<ul>\n<li><a href=\"https://www.mail-archive.com/search?l=dev@spark.apache.org&amp;q=subject:%22Should+we+add+built+in+support+for+bouncy+castle+EC+w%5C%2FKube%22&amp;o=newest&amp;f=1\" rel=\"noreferrer\">https://www.mail-archive.com/search?l=dev@spark.apache.org&amp;q=subject:&quot;Should+we+add+built+in+support+for+bouncy+castle+EC+w\\%2FKube&quot;&amp;o=newest&amp;f=1</a></li>\n<li><a href=\"https://github.com/de-jcup/ekube/issues/63#issuecomment-753508790\" rel=\"noreferrer\">https://github.com/de-jcup/ekube/issues/63#issuecomment-753508790</a></li>\n</ul>\n<p>I added</p>\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.bouncycastle&lt;/groupId&gt;\n    &lt;artifactId&gt;bcpkix-jdk15on&lt;/artifactId&gt;\n    &lt;version&gt;1.69&lt;/version&gt;\n&lt;/dependency&gt;\n&lt;dependency&gt;\n    &lt;groupId&gt;org.bouncycastle&lt;/groupId&gt;\n    &lt;artifactId&gt;bcprov-jdk15on&lt;/artifactId&gt;\n    &lt;version&gt;1.69&lt;/version&gt;\n&lt;/dependency&gt;\n&lt;dependency&gt;\n    &lt;groupId&gt;org.bouncycastle&lt;/groupId&gt;\n    &lt;artifactId&gt;bcprov-ext-jdk15on&lt;/artifactId&gt;\n    &lt;version&gt;1.69&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>to my <strong>pom.xml</strong> file. I built and pushed to Docker Hub again.</p>\n<p>When I ran the Flink command above, I still got same error. Any idea? Thanks!</p>\n<hr />\n<p><strong>UPDATE 1:</strong></p>\n<p>Besides above <strong>pom.xml</strong> change, I manually downloaded those 3 jars and changed my Dockerfile to</p>\n<pre><code>FROM flink\nCOPY lib/* $FLINK_HOME/lib\nRUN mkdir -p $FLINK_HOME/usrlib\nCOPY target/streaming-0.1.jar $FLINK_HOME/usrlib/streaming-0.1.jar\n</code></pre>\n<p>and tried again, but still same error.</p>\n<p>I can confirm the 3 jar files <code>bcpkix-jdk15on-1.69.jar</code>, <code>bcprov-ext-jdk15on-1.69.jar</code>, <code>bcprov-jdk15on-1.69.jar</code> are in the docker image:</p>\n<pre><code>➜ docker run -it 6c48af48db55c334003a307d1ef7a5fc5181f389613284b66b5cb97588b9708d sh\n\n$ cd lib &amp;&amp; ls\nbcpkix-jdk15on-1.69.jar      flink-dist_2.12-1.13.2.jar     flink-table_2.12-1.13.2.jar  log4j-slf4j-impl-2.12.1.jar\nbcprov-ext-jdk15on-1.69.jar  flink-json-1.13.2.jar      log4j-1.2-api-2.12.1.jar\nbcprov-jdk15on-1.69.jar      flink-shaded-zookeeper-3.4.14.jar  log4j-api-2.12.1.jar\nflink-csv-1.13.2.jar         flink-table-blink_2.12-1.13.2.jar  log4j-core-2.12.1.jar\n$ cd ../usrlib &amp;&amp; ls\nstreaming-0.1.jar\n</code></pre>\n<hr />\n<p><strong>UPDATE 2:</strong></p>\n<p>I tried to start the session mode by</p>\n<pre><code>/usr/local/Cellar/apache-flink/1.13.1/libexec/bin/kubernetes-session.sh\n</code></pre>\n<p>but still got same error. So now I can confirm when I was using application mode before, the issue is not related my Docker image.</p>\n<p>I have those jars are located at <code>~/.m2</code> on my machine:</p>\n<p><a href=\"https://i.stack.imgur.com/hQNf8.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/hQNf8.png\" alt=\"enter image description here\" /></a></p>\n<p>Did I miss any other jars?</p>\n<p>Also, I found the error only happens to the cluster created by k3d/k3s, but not minikube.</p>\n"},{"tags":["java","mysql","google-app-engine","google-cloud-datastore"],"answers":[{"tags":[],"owner":{"account_id":2661088,"reputation":2927,"user_id":2300755,"display_name":"Ed Davisson"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1485451810,"creation_date":1485451810,"answer_id":41879429,"question_id":41878706,"body_markdown":"The Cloud Datastore API does not expose a method for reserving a user-specified ID. The `AllocateIds` method picks IDs for you.\r\n\r\nOne possible approach would be to assign the MySQL-generated IDs to the `name` (string) field in your keys. Cloud Datastore never auto-assigns the `name` field. The downside is that your application code would be responsible for generating future values.","title":"Where is allocateIds in the Google Cloud Datastore java library?","body":"<p>The Cloud Datastore API does not expose a method for reserving a user-specified ID. The <code>AllocateIds</code> method picks IDs for you.</p>\n\n<p>One possible approach would be to assign the MySQL-generated IDs to the <code>name</code> (string) field in your keys. Cloud Datastore never auto-assigns the <code>name</code> field. The downside is that your application code would be responsible for generating future values.</p>\n"},{"tags":[],"owner":{"account_id":7117346,"reputation":371,"user_id":5443134,"display_name":"Craig D"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1682355575,"creation_date":1682355575,"answer_id":76094325,"question_id":41878706,"body_markdown":"The google example code provides code like below to auto-generate an id or key using com.google.cloud.datastore (gen2 java):\r\n\r\n    public static Key getAutoGenKey(String projectId, String kindName) {\r\n    \t\r\n    \tDatastore datastore = DatastoreOptions.getDefaultInstance().getService().getDatastore();\r\n    \r\n    \t// Code below taken from Google, here:\r\n    \t//    https://github.com/googleapis/google-cloud-java/blob/main/google-cloud-examples/src/main/java/com/google/cloud/examples/datastore/snippets/DatastoreSnippets.java\r\n\r\n        KeyFactory keyFactory = datastore.newKeyFactory().setKind(kindName).setProjectId(projectId);\r\n        IncompleteKey incompleteKey = keyFactory.newKey();\r\n    \r\n        // let cloud datastore automatically assign an id:\r\n        Key key = datastore.allocateId(incompleteKey);\r\n    \t\r\n    \treturn key;\r\n    }\r\n\r\n","title":"Where is allocateIds in the Google Cloud Datastore java library?","body":"<p>The google example code provides code like below to auto-generate an id or key using com.google.cloud.datastore (gen2 java):</p>\n<pre><code>public static Key getAutoGenKey(String projectId, String kindName) {\n    \n    Datastore datastore = DatastoreOptions.getDefaultInstance().getService().getDatastore();\n\n    // Code below taken from Google, here:\n    //    https://github.com/googleapis/google-cloud-java/blob/main/google-cloud-examples/src/main/java/com/google/cloud/examples/datastore/snippets/DatastoreSnippets.java\n\n    KeyFactory keyFactory = datastore.newKeyFactory().setKind(kindName).setProjectId(projectId);\n    IncompleteKey incompleteKey = keyFactory.newKey();\n\n    // let cloud datastore automatically assign an id:\n    Key key = datastore.allocateId(incompleteKey);\n    \n    return key;\n}\n</code></pre>\n"}],"owner":{"account_id":1372184,"reputation":1767,"user_id":1306976,"accept_rate":53,"display_name":"danielz"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":358,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":41879429,"answer_count":2,"score":1,"last_activity_date":1682355575,"creation_date":1485449424,"question_id":41878706,"body_markdown":"I moving some data from Mysql to the Datastore and for this data migaration I want to keep the old Ids from Mysql.\r\n\r\nI found this note [here][1]\r\n\r\n\r\n  [1]: https://cloud.google.com/datastore/docs/concepts/entities#assigning_identifiers:\r\n\r\n    Instead of using key name strings or generating numeric IDs automatically, advanced applications may sometimes wish to assign their own numeric IDs manually to the entities they create. Be aware, however, that there is nothing to prevent Datastore from assigning one of your manual numeric IDs to another entity. The only way to avoid such conflicts is to have your application obtain a block of IDs with the allocateIds() method. Cloud Datastore&#39;s automatic ID generator will keep track of IDs that have been allocated with these methods and will avoid reusing them for another entity, so you can safely use such IDs without conflict.\r\n\r\nSo allocateIds seems perfect for what I am trying to do. I want to use the method to allocate all the auto incremented ids from Mysql so that I can then use the datastore Id generator without worrying about collision.\r\n\r\nHowever I can&#39;t find this method anywhere. I am using the cloud datastore java library as a standalone library, without using the app engine. ","title":"Where is allocateIds in the Google Cloud Datastore java library?","body":"<p>I moving some data from Mysql to the Datastore and for this data migaration I want to keep the old Ids from Mysql.</p>\n\n<p>I found this note <a href=\"https://cloud.google.com/datastore/docs/concepts/entities#assigning_identifiers:\" rel=\"nofollow noreferrer\">here</a></p>\n\n<pre><code>Instead of using key name strings or generating numeric IDs automatically, advanced applications may sometimes wish to assign their own numeric IDs manually to the entities they create. Be aware, however, that there is nothing to prevent Datastore from assigning one of your manual numeric IDs to another entity. The only way to avoid such conflicts is to have your application obtain a block of IDs with the allocateIds() method. Cloud Datastore's automatic ID generator will keep track of IDs that have been allocated with these methods and will avoid reusing them for another entity, so you can safely use such IDs without conflict.\n</code></pre>\n\n<p>So allocateIds seems perfect for what I am trying to do. I want to use the method to allocate all the auto incremented ids from Mysql so that I can then use the datastore Id generator without worrying about collision.</p>\n\n<p>However I can't find this method anywhere. I am using the cloud datastore java library as a standalone library, without using the app engine. </p>\n"},{"tags":["java","anylogic"],"answers":[{"tags":[],"owner":{"account_id":2486375,"reputation":11083,"user_id":2164728,"accept_rate":62,"display_name":"Benjamin"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1682355441,"creation_date":1682355441,"answer_id":76094315,"question_id":76093470,"body_markdown":"You only have access to `Main` in the &quot;after simulation run&quot; code field in your Param-Var experiment. You need to use the keyword `root` to access `Main` from there.\r\n\r\nIf you had an xls sheet &quot;outputs&quot; with columns &quot;iterationNo, ReplicationNo, value&quot;, you could use code like this to store unique run results:\r\n\r\n    int rowIndex = 0; // increase this after every round\r\n    excelFile.setCellValue(getCurrentIteration(), &quot;outputs&quot;, rowIndex, 0); // first column\r\n    excelFile.setCellValue(getCurrentReplication(), &quot;outputs&quot;, rowIndex, 1); // 2nd column\r\n    excelFile.setCellValue(root.someValueToStore, &quot;outputs&quot;, rowIndex, 2); // 3rd column\r\n    rowIndex++; // for next run\r\n\r\nLikely needs some adjustments, but this is the zest","title":"Is it possible to do a ParametersVariation, access values from main and store them in an excel after iteration?","body":"<p>You only have access to <code>Main</code> in the &quot;after simulation run&quot; code field in your Param-Var experiment. You need to use the keyword <code>root</code> to access <code>Main</code> from there.</p>\n<p>If you had an xls sheet &quot;outputs&quot; with columns &quot;iterationNo, ReplicationNo, value&quot;, you could use code like this to store unique run results:</p>\n<pre><code>int rowIndex = 0; // increase this after every round\nexcelFile.setCellValue(getCurrentIteration(), &quot;outputs&quot;, rowIndex, 0); // first column\nexcelFile.setCellValue(getCurrentReplication(), &quot;outputs&quot;, rowIndex, 1); // 2nd column\nexcelFile.setCellValue(root.someValueToStore, &quot;outputs&quot;, rowIndex, 2); // 3rd column\nrowIndex++; // for next run\n</code></pre>\n<p>Likely needs some adjustments, but this is the zest</p>\n"}],"owner":{"account_id":27527886,"reputation":55,"user_id":21006896,"display_name":"FroggyJoggy"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":33,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":76094315,"answer_count":1,"score":1,"last_activity_date":1682355441,"creation_date":1682349558,"question_id":76093470,"body_markdown":"I am running a number of experiments and after the simulation is over the results are stored in an excel called excelFile.\r\nAt the moment I am doing one experiment after another, because if I use Parameter Variation I do not know how to get access to the measured values in the main from the Experiment `ParametersVariation: Main`\r\nThis is what I use in the single experiment runs with an excel in the Main :\r\n\r\n`excelFile.createCell(1, t, 2);`\r\n\r\n`excelFile.setCellValue(shopfloor_throughput_time.mean() ,1 , t , 2);`\r\n\r\nBut I want to run 30 experiments at the same time and have the excel in the ParameterVariations environment.\r\nI don&#39;t know how to access the measured values in the Main from the ParametersVariation to write them into the excel in the ParametersVariation.\r\n\r\nI tried this:\r\n\r\n`excelFile.createCell(1, getCurrentIteration(), 1);`\r\n\r\n`excelFile.setCellValue(main.shopfloor_throughput_time.mean() ,1 ,getCurrentIteration() , 1);`\r\n\r\nin the ParametersVariation environment on *After iteration*.\r\n","title":"Is it possible to do a ParametersVariation, access values from main and store them in an excel after iteration?","body":"<p>I am running a number of experiments and after the simulation is over the results are stored in an excel called excelFile.\nAt the moment I am doing one experiment after another, because if I use Parameter Variation I do not know how to get access to the measured values in the main from the Experiment <code>ParametersVariation: Main</code>\nThis is what I use in the single experiment runs with an excel in the Main :</p>\n<p><code>excelFile.createCell(1, t, 2);</code></p>\n<p><code>excelFile.setCellValue(shopfloor_throughput_time.mean() ,1 , t , 2);</code></p>\n<p>But I want to run 30 experiments at the same time and have the excel in the ParameterVariations environment.\nI don't know how to access the measured values in the Main from the ParametersVariation to write them into the excel in the ParametersVariation.</p>\n<p>I tried this:</p>\n<p><code>excelFile.createCell(1, getCurrentIteration(), 1);</code></p>\n<p><code>excelFile.setCellValue(main.shopfloor_throughput_time.mean() ,1 ,getCurrentIteration() , 1);</code></p>\n<p>in the ParametersVariation environment on <em>After iteration</em>.</p>\n"},{"tags":["java","list","collections","set","hashset"],"comments":[{"owner":{"account_id":2673407,"reputation":44640,"user_id":2310289,"display_name":"Scary Wombat"},"score":0,"creation_date":1476855249,"post_id":40122910,"comment_id":67516162,"body_markdown":"Use a `HashMap&lt;Intger, Customer&gt;`","body":"Use a <code>HashMap&lt;Intger, Customer&gt;</code>"},{"owner":{"account_id":3808934,"reputation":175,"user_id":3160502,"display_name":"Sachin  Mesare"},"score":0,"creation_date":1476857374,"post_id":40122910,"comment_id":67517050,"body_markdown":"This post will be useful  to  you [Remove Duplicate](http://stackoverflow.com/questions/20433692/java-remove-duplicate-objects-in-arraylist)","body":"This post will be useful  to  you <a href=\"http://stackoverflow.com/questions/20433692/java-remove-duplicate-objects-in-arraylist\">Remove Duplicate</a>"}],"answers":[{"tags":[],"owner":{"account_id":4964700,"reputation":155,"user_id":3994481,"display_name":"PSabuwala"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1476856067,"creation_date":1476855664,"answer_id":40123041,"question_id":40122910,"body_markdown":"You can use HapMap for this,\r\n\r\n\r\n    List&lt;Customer&gt; lstCustomer = new ArrayList&lt;Customer&gt;(); // list of customer\r\n\tMap&lt;Integer,Customer&gt; map = new HashMap&lt;Integer, Customer&gt;(); //here integer is your id type\r\n\t\r\n    for(int i=0;i&lt;lstCustomer .size();i++){\r\n\t\tif(map.get(lstCustomer .get(i).getId())==null){\r\n\t\t\tmap.put(lstCustomer .get(i).getId(),lst.get(i));\r\n\t\t}else{\r\n\t\t\tSystem.out.println(lstCustomer .get(i).getId()); // duplicate customer id\r\n\t\t}\r\n\t}\r\n\r\nHope it helps you.","title":"Identify duplicate customer id&#39;s in a list of customers","body":"<p>You can use HapMap for this,</p>\n\n<pre><code>List&lt;Customer&gt; lstCustomer = new ArrayList&lt;Customer&gt;(); // list of customer\nMap&lt;Integer,Customer&gt; map = new HashMap&lt;Integer, Customer&gt;(); //here integer is your id type\n\nfor(int i=0;i&lt;lstCustomer .size();i++){\n    if(map.get(lstCustomer .get(i).getId())==null){\n        map.put(lstCustomer .get(i).getId(),lst.get(i));\n    }else{\n        System.out.println(lstCustomer .get(i).getId()); // duplicate customer id\n    }\n}\n</code></pre>\n\n<p>Hope it helps you.</p>\n"},{"tags":[],"owner":{"account_id":7815129,"reputation":3299,"user_id":5910091,"display_name":"ujulu"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1476858261,"creation_date":1476858261,"answer_id":40123712,"question_id":40122910,"body_markdown":"&gt; I tried adding the customers to a set (because set would not add duplicates), but how do I state that it is the customerId, not the customer, that cannot be duplicated in this list?\r\n\r\nThis is possible if you override the `equals()` method based on the ID field, thereby telling the set that two customers are logically equal if they have the same ID. Here is an example implementation generated by my IDE (assuming id is of type `String`; if the type is some primitive type use its wrapper):\r\n\r\n    @Override\r\n\tpublic boolean equals(final Object obj) {\r\n\t\tif (this == obj) {\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\tif (obj == null) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\tif (getClass() != obj.getClass()) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\tfinal Student other = (Student) obj;\r\n\t\tif (id == null) {\r\n\t\t\tif (other.id!= null) {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t} else if (!id.equals(other.id)) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\treturn true;\r\n\t}\r\n\r\n    @Override\r\n\tpublic int hashCode() {\r\n\t\tfinal int prime = 31;\r\n\t\tint result = 1;\r\n\t\tresult = (prime * result) + ((id == null) ? 0 : id.hashCode());\r\n\t\treturn result;\r\n\t}\r\n\r\n    final Set&lt;Customer&gt; myCustomerSet = new HashSet&lt;Customer&gt;();\r\n    myCustomerSet.add(customer1);\r\n    ...\r\n\r\nThen when you add customers to the set you should have only one entry with the same ID in the set.\r\nThe `hashCode()` is not necessary for your case, but normally if you override `equals()`, you  should also override the `hashCode()`.","title":"Identify duplicate customer id&#39;s in a list of customers","body":"<blockquote>\n  <p>I tried adding the customers to a set (because set would not add duplicates), but how do I state that it is the customerId, not the customer, that cannot be duplicated in this list?</p>\n</blockquote>\n\n<p>This is possible if you override the <code>equals()</code> method based on the ID field, thereby telling the set that two customers are logically equal if they have the same ID. Here is an example implementation generated by my IDE (assuming id is of type <code>String</code>; if the type is some primitive type use its wrapper):</p>\n\n<pre><code>@Override\npublic boolean equals(final Object obj) {\n    if (this == obj) {\n        return true;\n    }\n    if (obj == null) {\n        return false;\n    }\n    if (getClass() != obj.getClass()) {\n        return false;\n    }\n    final Student other = (Student) obj;\n    if (id == null) {\n        if (other.id!= null) {\n            return false;\n        }\n    } else if (!id.equals(other.id)) {\n        return false;\n    }\n    return true;\n}\n\n@Override\npublic int hashCode() {\n    final int prime = 31;\n    int result = 1;\n    result = (prime * result) + ((id == null) ? 0 : id.hashCode());\n    return result;\n}\n\nfinal Set&lt;Customer&gt; myCustomerSet = new HashSet&lt;Customer&gt;();\nmyCustomerSet.add(customer1);\n...\n</code></pre>\n\n<p>Then when you add customers to the set you should have only one entry with the same ID in the set.\nThe <code>hashCode()</code> is not necessary for your case, but normally if you override <code>equals()</code>, you  should also override the <code>hashCode()</code>.</p>\n"},{"tags":[],"owner":{"account_id":6649487,"reputation":61,"user_id":5210168,"display_name":"Naveen Patil"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1476867031,"creation_date":1476867031,"answer_id":40126471,"question_id":40122910,"body_markdown":"Create a TreeSet with a custom comparator as an input paramater.\r\ninside comparator write your equals logic.\r\nNow add each customer to treeset. The final treeset will not have duplicates.","title":"Identify duplicate customer id&#39;s in a list of customers","body":"<p>Create a TreeSet with a custom comparator as an input paramater.\ninside comparator write your equals logic.\nNow add each customer to treeset. The final treeset will not have duplicates.</p>\n"},{"tags":[],"owner":{"account_id":16300382,"reputation":1,"user_id":11771657,"display_name":"Karthik Gunasekaran"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1682355288,"creation_date":1565246256,"answer_id":57406515,"question_id":40122910,"body_markdown":"You can write a custom method using inbuild function: frequency()\r\n\r\nSample Code:\r\n        // Let us create a list with 4 items \r\n        ArrayList&lt;String&gt; list = \r\n                        new ArrayList&lt;String&gt;(); \r\n        list.add(&quot;Id100&quot;); \r\n        list.add(&quot;Id101&quot;); \r\n        list.add(&quot;Id100&quot;); \r\n        list.add(&quot;Id100&quot;); \r\n      \r\n        // count the frequency of the duplicate Id &quot;Id100&quot; \r\n        System.out.println(Collections.frequency(list, &quot;Id100&quot;));  \r\n","title":"Identify duplicate customer id&#39;s in a list of customers","body":"<p>You can write a custom method using inbuild function: frequency()</p>\n<p>Sample Code:\n// Let us create a list with 4 items\nArrayList list =\nnew ArrayList();\nlist.add(&quot;Id100&quot;);\nlist.add(&quot;Id101&quot;);\nlist.add(&quot;Id100&quot;);\nlist.add(&quot;Id100&quot;);</p>\n<pre><code>    // count the frequency of the duplicate Id &quot;Id100&quot; \n    System.out.println(Collections.frequency(list, &quot;Id100&quot;));  \n</code></pre>\n"},{"tags":[],"owner":{"account_id":16300382,"reputation":1,"user_id":11771657,"display_name":"Karthik Gunasekaran"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1566364705,"creation_date":1566364705,"answer_id":57584861,"question_id":40122910,"body_markdown":"     \r\n    import java.util.ArrayList;\r\n    import java.util.HashSet;\r\n    import java.util.LinkedHashSet;\r\n    import java.util.*;\r\n     \r\n    public class RemoveDuplicatesArrayListMain {\r\n\r\n    \tpublic static void main(String[] args) {\r\n    \t\tArrayList employeeNameList = new ArrayList();\r\n    \t\temployeeNameList.add(&quot;John&quot;);\r\n    \t\temployeeNameList.add(&quot;Ankit&quot;);\r\n    \t\temployeeNameList.add(&quot;Rohan&quot;);\r\n    \t\temployeeNameList.add(&quot;John&quot;);\r\n    \t\temployeeNameList.add(&quot;Amit&quot;);\r\n    \t\temployeeNameList.add(&quot;Ankit&quot;);\r\n     \r\n    \t\tSystem.out.println(&quot;Removing duplicates from list:&quot;);\r\n    \t\t// Using iterative approach\r\n    \t\tArrayList uniqueElements = new ArrayList();\r\n    \t\tfor (String empName : employeeNameList) {\r\n     \r\n    \t\t\tif (!uniqueElements.contains(empName)) {\r\n    \t\t\t\tuniqueElements.add(empName);\r\n    \t\t\t}\r\n    \t\t}\r\n     \r\n    \t\tSystem.out.println(&quot;Using iterative approach:&quot;);\r\n    \t\tfor (String uniqElem : uniqueElements) {\r\n    \t\t\tSystem.out.println(uniqElem);\r\n    \t\t}\r\n    \t\tSystem.out.println(&quot;*******************************&quot;);\r\n    \t\tSystem.out.println(&quot;Using HashSet :&quot;);\r\n    \t\t// using HashSet but does not maintain order\r\n    \t\tuniqueElements = new ArrayList(new HashSet(\r\n    \t\t\t\temployeeNameList));\r\n    \t\tfor (String uniqElem : uniqueElements) {\r\n    \t\t\tSystem.out.println(uniqElem);\r\n    \t\t}\r\n    \t\tSystem.out.println(&quot;*******************************&quot;);\r\n    \t\tSystem.out.println(&quot;Using LinkedHashSet :&quot;);\r\n    \t\t// using LinkedHashSet maintaining order\r\n    \t\tuniqueElements = new ArrayList(new LinkedHashSet(\r\n    \t\t\t\temployeeNameList));\r\n    \t\tfor (String uniqElem : uniqueElements) {\r\n    \t\t\tSystem.out.println(uniqElem);\r\n    \t\t}\r\n     \r\n    \t}\r\n    }","title":"Identify duplicate customer id&#39;s in a list of customers","body":"<pre><code>import java.util.ArrayList;\nimport java.util.HashSet;\nimport java.util.LinkedHashSet;\nimport java.util.*;\n\npublic class RemoveDuplicatesArrayListMain {\n\n    public static void main(String[] args) {\n        ArrayList employeeNameList = new ArrayList();\n        employeeNameList.add(\"John\");\n        employeeNameList.add(\"Ankit\");\n        employeeNameList.add(\"Rohan\");\n        employeeNameList.add(\"John\");\n        employeeNameList.add(\"Amit\");\n        employeeNameList.add(\"Ankit\");\n\n        System.out.println(\"Removing duplicates from list:\");\n        // Using iterative approach\n        ArrayList uniqueElements = new ArrayList();\n        for (String empName : employeeNameList) {\n\n            if (!uniqueElements.contains(empName)) {\n                uniqueElements.add(empName);\n            }\n        }\n\n        System.out.println(\"Using iterative approach:\");\n        for (String uniqElem : uniqueElements) {\n            System.out.println(uniqElem);\n        }\n        System.out.println(\"*******************************\");\n        System.out.println(\"Using HashSet :\");\n        // using HashSet but does not maintain order\n        uniqueElements = new ArrayList(new HashSet(\n                employeeNameList));\n        for (String uniqElem : uniqueElements) {\n            System.out.println(uniqElem);\n        }\n        System.out.println(\"*******************************\");\n        System.out.println(\"Using LinkedHashSet :\");\n        // using LinkedHashSet maintaining order\n        uniqueElements = new ArrayList(new LinkedHashSet(\n                employeeNameList));\n        for (String uniqElem : uniqueElements) {\n            System.out.println(uniqElem);\n        }\n\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":4171061,"reputation":31,"user_id":3418813,"display_name":"Amie Chu"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":792,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":5,"score":1,"last_activity_date":1682355288,"creation_date":1476855107,"question_id":40122910,"body_markdown":"A complete newbie here so I apologize if my question is stupid. I honestly tried before posting.\r\nI have a list of some customers, with their customer Id&#39;s as one column and customer name as the other, and age as the third column. \r\n\r\nI want to go through this list and identify whether the same customerId is in the list more than once. In that case, I need to delete that whole customer (even if his name or age is different). \r\n\r\nCan you please advise what to use to do this logic? \r\n\r\nI tried adding the customers to a set (because set would not add duplicates), but how do I state that it is the customerId, not the customer, that cannot be duplicated in this list?\r\n\r\nSo far I got this below, but in my logic nothing says that customer is considered a duplicate when his customerId is a duplicate. (I don&#39;t necessarily need to use a list. Customer is an object).\r\n\r\n       //Customer is a class that contains a private variable customerId, so I   can do customer.getCustomerId();\r\n     \r\n        List&lt;Customer&gt; notDuplicatedCustomers = new ArrayList&lt;Customer&gt;(); //list  of customers\r\n        final Set&lt;Customer&gt; setToReturn = new HashSet&lt;Customer&gt;();\r\n        final Set&lt;Customer&gt; initialSet = new HashSet&lt;Customer&gt;();\r\n     \r\n        for (Customer customer: notDuplicatedCustomers ) {\r\n        if (!initialSet.add(customer)) {\r\n        setToReturn.add(customer);\r\n           } \r\n        }","title":"Identify duplicate customer id&#39;s in a list of customers","body":"<p>A complete newbie here so I apologize if my question is stupid. I honestly tried before posting.\nI have a list of some customers, with their customer Id's as one column and customer name as the other, and age as the third column. </p>\n\n<p>I want to go through this list and identify whether the same customerId is in the list more than once. In that case, I need to delete that whole customer (even if his name or age is different). </p>\n\n<p>Can you please advise what to use to do this logic? </p>\n\n<p>I tried adding the customers to a set (because set would not add duplicates), but how do I state that it is the customerId, not the customer, that cannot be duplicated in this list?</p>\n\n<p>So far I got this below, but in my logic nothing says that customer is considered a duplicate when his customerId is a duplicate. (I don't necessarily need to use a list. Customer is an object).</p>\n\n<pre><code>   //Customer is a class that contains a private variable customerId, so I   can do customer.getCustomerId();\n\n    List&lt;Customer&gt; notDuplicatedCustomers = new ArrayList&lt;Customer&gt;(); //list  of customers\n    final Set&lt;Customer&gt; setToReturn = new HashSet&lt;Customer&gt;();\n    final Set&lt;Customer&gt; initialSet = new HashSet&lt;Customer&gt;();\n\n    for (Customer customer: notDuplicatedCustomers ) {\n    if (!initialSet.add(customer)) {\n    setToReturn.add(customer);\n       } \n    }\n</code></pre>\n"},{"tags":["java","javafx","gson"],"comments":[{"owner":{"account_id":2518243,"reputation":203472,"user_id":2189127,"display_name":"James_D"},"score":1,"creation_date":1682353874,"post_id":76091092,"comment_id":134198272,"body_markdown":"The easiest solution is probably to serialize some other representation of the color, e.g. rgba values or a web string.","body":"The easiest solution is probably to serialize some other representation of the color, e.g. rgba values or a web string."},{"owner":{"account_id":8532578,"reputation":39898,"user_id":6395627,"display_name":"Slaw"},"score":1,"creation_date":1682357311,"post_id":76091092,"comment_id":134199076,"body_markdown":"You can&#39;t `opens` a package that is not in your own module via the `module-info` descriptor. You&#39;d have to use an `--add-opens` JVM argument. But the better solution is to customize the (de)serialization, as [demonstrated by James](https://stackoverflow.com/a/76094273/6395627).","body":"You can&#39;t <code>opens</code> a package that is not in your own module via the <code>module-info</code> descriptor. You&#39;d have to use an <code>--add-opens</code> JVM argument. But the better solution is to customize the (de)serialization, as <a href=\"https://stackoverflow.com/a/76094273/6395627\">demonstrated by James</a>."}],"answers":[{"tags":[],"owner":{"account_id":2518243,"reputation":203472,"user_id":2189127,"display_name":"James_D"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1682355189,"creation_date":1682355189,"answer_id":76094273,"question_id":76091092,"body_markdown":"Not tested, but try creating custom [de]serializers for `Color`:\r\n\r\n    public class ColorSerializer implements JsonSerializer&lt;Color&gt; {\r\n    \r\n        @Override\r\n        public JsonElement serialize(Color color, Type colorType, JsonSerializationContext context) {\r\n            JsonObject json = new JsonObject();\r\n            json.addProperty(&quot;red&quot;, color.getRed());\r\n            json.addProperty(&quot;green&quot;, color.getGreen());\r\n            json.addProperty(&quot;blue&quot;, color.getBlue());\r\n            json.addProperty(&quot;opacity&quot;, color.getOpacity());\r\n            return json;\r\n        }\r\n    }\r\n\r\nand\r\n\r\n    public class ColorDeserializer implements JsonDeserializer&lt;Color&gt; {\r\n    \r\n        @Override\r\n        public Color deserialize(JsonElement jsonElement, Type type, JsonDeserializationContext context) {\r\n            JsonObject json = jsonElement.getAsJsonObject();\r\n            double red = json.get(&quot;red&quot;).getAsDouble();\r\n            double green = json.get(&quot;green&quot;).getAsDouble();\r\n            double blue = json.get(&quot;blue&quot;).getAsDouble();\r\n            double opacity = json.get(&quot;opacity&quot;).getAsDouble();\r\n            return Color.color(red, green, blue, opacity);\r\n        }\r\n    }\r\n\r\nThen of course just do\r\n\r\n    Gson gson = new GsonBuilder()\r\n        .registerTypeAdapter(Color.class, new ColorSerializer())\r\n        .setPrettyPrinting()\r\n        .create();\r\n    FileWriter fWriter = new FileWriter(&quot;pixel.json&quot;);\r\n    fWriter.write(gson.toJson(list));\r\n\r\n\r\nAnd to read it back in, register a `ColorDeserializer`.","title":"Error serializing javafx.Color with Gson lib","body":"<p>Not tested, but try creating custom [de]serializers for <code>Color</code>:</p>\n<pre><code>public class ColorSerializer implements JsonSerializer&lt;Color&gt; {\n\n    @Override\n    public JsonElement serialize(Color color, Type colorType, JsonSerializationContext context) {\n        JsonObject json = new JsonObject();\n        json.addProperty(&quot;red&quot;, color.getRed());\n        json.addProperty(&quot;green&quot;, color.getGreen());\n        json.addProperty(&quot;blue&quot;, color.getBlue());\n        json.addProperty(&quot;opacity&quot;, color.getOpacity());\n        return json;\n    }\n}\n</code></pre>\n<p>and</p>\n<pre><code>public class ColorDeserializer implements JsonDeserializer&lt;Color&gt; {\n\n    @Override\n    public Color deserialize(JsonElement jsonElement, Type type, JsonDeserializationContext context) {\n        JsonObject json = jsonElement.getAsJsonObject();\n        double red = json.get(&quot;red&quot;).getAsDouble();\n        double green = json.get(&quot;green&quot;).getAsDouble();\n        double blue = json.get(&quot;blue&quot;).getAsDouble();\n        double opacity = json.get(&quot;opacity&quot;).getAsDouble();\n        return Color.color(red, green, blue, opacity);\n    }\n}\n</code></pre>\n<p>Then of course just do</p>\n<pre><code>Gson gson = new GsonBuilder()\n    .registerTypeAdapter(Color.class, new ColorSerializer())\n    .setPrettyPrinting()\n    .create();\nFileWriter fWriter = new FileWriter(&quot;pixel.json&quot;);\nfWriter.write(gson.toJson(list));\n</code></pre>\n<p>And to read it back in, register a <code>ColorDeserializer</code>.</p>\n"}],"owner":{"account_id":27486622,"reputation":31,"user_id":20972763,"display_name":"roccia"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":117,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1682355189,"creation_date":1682333195,"question_id":76091092,"body_markdown":"i&#39;m creating a program where i need to write an array of Pixel(x, y, Color)(Where x and y are int) in a Json file with the Gson library; (Im using Intellij on Arch)\r\n\r\nThis is what i did to add &quot;Pixel&quot; in the list:\r\n\r\n```\r\nList &lt;Pixel&gt; list = new ArrayList&lt;&gt;();\r\n        list.add(new Pixel(1,1,Color.TRANSPARENT));\r\n        list.add(new Pixel(1, 2, Color.BEIGE));\r\n        list.add(new Pixel(2, 1, Color.RED));\r\n```\r\n\r\nThen i wrote them in the json file with:\r\n\r\n```\r\nGson gson = new GsonBuilder().setPrettyPrinting().create();\r\n        FileWriter fWriter = new FileWriter(&quot;pixel.json&quot;);\r\nfWriter.write(gson.toJson(list));\r\n```\r\n\r\nWhen i start the program i had these errors:\r\n\r\nCaused by: com.google.gson.JsonIOException: Failed making field &#39;javafx.scene.paint.Color#red&#39; accessible; either increase its visibility or write a custom TypeAdapter for its declaring type.\r\n\r\nCaused by: java.lang.reflect.InaccessibleObjectException: Unable to make field private final float javafx.scene.paint.Color.red accessible: module javafx.graphics does not &quot;opens javafx.scene.paint&quot; to module com.google.gson\r\n\r\nSo i add in module-info.java:\r\n\r\n`opens javafx.scene.paint to com.google.gson;`\r\n\r\nBut then i had this problem:\r\n\r\n```\r\nwarning: package is empty or does not exist: javafx.scene.paint\r\n    opens javafx.scene.paint to com.google.gson;\r\n```","title":"Error serializing javafx.Color with Gson lib","body":"<p>i'm creating a program where i need to write an array of Pixel(x, y, Color)(Where x and y are int) in a Json file with the Gson library; (Im using Intellij on Arch)</p>\n<p>This is what i did to add &quot;Pixel&quot; in the list:</p>\n<pre><code>List &lt;Pixel&gt; list = new ArrayList&lt;&gt;();\n        list.add(new Pixel(1,1,Color.TRANSPARENT));\n        list.add(new Pixel(1, 2, Color.BEIGE));\n        list.add(new Pixel(2, 1, Color.RED));\n</code></pre>\n<p>Then i wrote them in the json file with:</p>\n<pre><code>Gson gson = new GsonBuilder().setPrettyPrinting().create();\n        FileWriter fWriter = new FileWriter(&quot;pixel.json&quot;);\nfWriter.write(gson.toJson(list));\n</code></pre>\n<p>When i start the program i had these errors:</p>\n<p>Caused by: com.google.gson.JsonIOException: Failed making field 'javafx.scene.paint.Color#red' accessible; either increase its visibility or write a custom TypeAdapter for its declaring type.</p>\n<p>Caused by: java.lang.reflect.InaccessibleObjectException: Unable to make field private final float javafx.scene.paint.Color.red accessible: module javafx.graphics does not &quot;opens javafx.scene.paint&quot; to module com.google.gson</p>\n<p>So i add in module-info.java:</p>\n<p><code>opens javafx.scene.paint to com.google.gson;</code></p>\n<p>But then i had this problem:</p>\n<pre><code>warning: package is empty or does not exist: javafx.scene.paint\n    opens javafx.scene.paint to com.google.gson;\n</code></pre>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":372682,"reputation":22426,"user_id":721855,"display_name":"aled"},"score":0,"creation_date":1682350860,"post_id":76093619,"comment_id":134197581,"body_markdown":"Please share the complete and literal error message.","body":"Please share the complete and literal error message."},{"owner":{"account_id":11683,"reputation":1438179,"user_id":22656,"accept_rate":86,"display_name":"Jon Skeet"},"score":1,"creation_date":1682351036,"post_id":76093619,"comment_id":134197635,"body_markdown":"Hint: what would you expect `p.get(&quot;FFF&quot;).add(&quot;This is a string&quot;)` to do? That should work, right, because `p.get(&quot;FFF&quot;)` returns a `List&lt;Object&gt;`. But then what do you expect `x.get(2)` to return, given that it finds a string instead of a `BigDecimal`? (Basically a `List&lt;Object&gt;` is &quot;a list that can contain anything&quot; - whereas a `List&lt;BigDecimal&gt;` is &quot;a list that can contain BigDecimal references&quot; - that&#39;s not the same thing.)","body":"Hint: what would you expect <code>p.get(&quot;FFF&quot;).add(&quot;This is a string&quot;)</code> to do? That should work, right, because <code>p.get(&quot;FFF&quot;)</code> returns a <code>List&lt;Object&gt;</code>. But then what do you expect <code>x.get(2)</code> to return, given that it finds a string instead of a <code>BigDecimal</code>? (Basically a <code>List&lt;Object&gt;</code> is &quot;a list that can contain anything&quot; - whereas a <code>List&lt;BigDecimal&gt;</code> is &quot;a list that can contain BigDecimal references&quot; - that&#39;s not the same thing.)"},{"owner":{"account_id":2645973,"reputation":65777,"user_id":2288659,"accept_rate":90,"display_name":"Silvio Mayolo"},"score":0,"creation_date":1682351198,"post_id":76093619,"comment_id":134197677,"body_markdown":"Does this answer your question? [What is PECS (Producer Extends Consumer Super)?](https://stackoverflow.com/questions/2723397/what-is-pecs-producer-extends-consumer-super)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/2723397/what-is-pecs-producer-extends-consumer-super\">What is PECS (Producer Extends Consumer Super)?</a>"},{"owner":{"account_id":3023214,"reputation":20362,"user_id":2563754,"display_name":"Seelenvirtuose"},"score":1,"creation_date":1682351493,"post_id":76093619,"comment_id":134197754,"body_markdown":"In short: Even if `BigDecimal` is a subtype of `Object`, the type `List&lt;BigDecimal&gt;` is _not_ a subtype of `List&lt;Object&gt;`.","body":"In short: Even if <code>BigDecimal</code> is a subtype of <code>Object</code>, the type <code>List&lt;BigDecimal&gt;</code> is <i>not</i> a subtype of <code>List&lt;Object&gt;</code>."}],"answers":[{"tags":[],"owner":{"account_id":91942,"reputation":8072,"user_id":252218,"accept_rate":91,"display_name":"BoppreH"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1682355140,"creation_date":1682351585,"answer_id":76093788,"question_id":76093619,"body_markdown":"This is an example of [Contravariance](https://en.wikipedia.org/wiki/Covariance_and_contravariance_(computer_science)), and is by design. Here&#39;s an example that shows why this is forbidden:\r\n\r\n    public ArrayList&lt;Object&gt; transmutate(ArrayList&lt;BigDecimal&gt; input) {\r\n        // Just return the input, but as ArrayList&lt;Object&gt;.\r\n        // This is a forbidden function that will give the error you saw.\r\n        return input;\r\n    }\r\n    \r\n    // Create a BigDecimal array list.\r\n    ArrayList&lt;BigDecimal&gt; x = new ArrayList&lt;&gt;();\r\n    x.add(0.43443434344);\r\n    x.add(0.43443434343);\r\n    \r\n    // Use the forbidden function to transform it into ArrayList&lt;Object&gt;.\r\n    ArrayList&lt;Object&gt; y = transmutate(x);\r\n    // Should be allowed, because y is a list of objects.\r\n    y.add(&quot;string&quot;);\r\n    \r\n    // However, because x=y...\r\n    x.get(2)\r\n    // Would print &quot;string&quot;, but it&#39;s supposed to be a list of BigDecimal!\r\n\r\nThe method signature you&#39;re looking for is probably using [Generic Wildcards](https://docs.oracle.com/javase/tutorial/extra/generics/wildcards.html).\r\n\r\n    public &lt;T&gt; ArrayList&lt;T&gt; transmutate(ArrayList&lt;? super T&gt;) input) {\r\n\r\n\r\n","title":"List&lt;Object&gt; not accepting lists with mutiple other generic data types","body":"<p>This is an example of <a href=\"https://en.wikipedia.org/wiki/Covariance_and_contravariance_(computer_science)\" rel=\"nofollow noreferrer\">Contravariance</a>, and is by design. Here's an example that shows why this is forbidden:</p>\n<pre><code>public ArrayList&lt;Object&gt; transmutate(ArrayList&lt;BigDecimal&gt; input) {\n    // Just return the input, but as ArrayList&lt;Object&gt;.\n    // This is a forbidden function that will give the error you saw.\n    return input;\n}\n\n// Create a BigDecimal array list.\nArrayList&lt;BigDecimal&gt; x = new ArrayList&lt;&gt;();\nx.add(0.43443434344);\nx.add(0.43443434343);\n\n// Use the forbidden function to transform it into ArrayList&lt;Object&gt;.\nArrayList&lt;Object&gt; y = transmutate(x);\n// Should be allowed, because y is a list of objects.\ny.add(&quot;string&quot;);\n\n// However, because x=y...\nx.get(2)\n// Would print &quot;string&quot;, but it's supposed to be a list of BigDecimal!\n</code></pre>\n<p>The method signature you're looking for is probably using <a href=\"https://docs.oracle.com/javase/tutorial/extra/generics/wildcards.html\" rel=\"nofollow noreferrer\">Generic Wildcards</a>.</p>\n<pre><code>public &lt;T&gt; ArrayList&lt;T&gt; transmutate(ArrayList&lt;? super T&gt;) input) {\n</code></pre>\n"}],"owner":{"account_id":27528457,"reputation":39,"user_id":21007380,"display_name":"Pratik"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":48,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1682355140,"creation_date":1682350495,"question_id":76093619,"body_markdown":"I am trying to write a method as follows.\r\n\r\n   \r\n\r\n     public Map&lt;String,List&lt;Object&gt;&gt; getFFF(){\r\n        Map&lt;String,List&lt;Object&gt;&gt; p= new HashMap&lt;&gt;();\r\n        List&lt;BigDecimal&gt; x= new ArrayList&lt;&gt;();\r\n        x.add(0.43443434344);\r\n        x.add(0.43443434343);\r\n        \r\n        p.put(&quot;FFF&quot;,x);//getting compile error at this line\r\n        \r\n        return p\r\n        \r\n        }\r\nI am getting compile error at the line 6 on 2nd parameter x. It says \r\n\r\n    Required type:\r\n    List\r\n    &lt;Object&gt;\r\n    Provided:\r\n    List\r\n    &lt;BigDecimal&gt;\r\n\r\nI was expecting `List&lt;Object&gt;` to accept all List types. I want to add `List&lt;String&gt;`, and `List&lt;long&gt;` as well to the `List&lt;Object&gt;`. Basically, I want the Method return type as a List to accept all argument types. Any other way I can use to do so? I am new to Java hence I wanted some clarity on this. Can&#39;t I have a generic List that will accept all List types, whether String, Float, Long, or any data type?","title":"List&lt;Object&gt; not accepting lists with mutiple other generic data types","body":"<p>I am trying to write a method as follows.</p>\n<pre><code> public Map&lt;String,List&lt;Object&gt;&gt; getFFF(){\n    Map&lt;String,List&lt;Object&gt;&gt; p= new HashMap&lt;&gt;();\n    List&lt;BigDecimal&gt; x= new ArrayList&lt;&gt;();\n    x.add(0.43443434344);\n    x.add(0.43443434343);\n    \n    p.put(&quot;FFF&quot;,x);//getting compile error at this line\n    \n    return p\n    \n    }\n</code></pre>\n<p>I am getting compile error at the line 6 on 2nd parameter x. It says</p>\n<pre><code>Required type:\nList\n&lt;Object&gt;\nProvided:\nList\n&lt;BigDecimal&gt;\n</code></pre>\n<p>I was expecting <code>List&lt;Object&gt;</code> to accept all List types. I want to add <code>List&lt;String&gt;</code>, and <code>List&lt;long&gt;</code> as well to the <code>List&lt;Object&gt;</code>. Basically, I want the Method return type as a List to accept all argument types. Any other way I can use to do so? I am new to Java hence I wanted some clarity on this. Can't I have a generic List that will accept all List types, whether String, Float, Long, or any data type?</p>\n"},{"tags":["java","if-statement"],"comments":[{"owner":{"account_id":4819600,"reputation":56500,"user_id":3890632,"display_name":"khelwood"},"score":2,"creation_date":1682348947,"post_id":76093353,"comment_id":134197059,"body_markdown":"You can simplify your conditions, knowing that the `else` is only run if the preceding `if` conditions were false.","body":"You can simplify your conditions, knowing that the <code>else</code> is only run if the preceding <code>if</code> conditions were false."},{"owner":{"account_id":162699,"reputation":138060,"user_id":3788176,"accept_rate":54,"display_name":"Andy Turner"},"score":0,"creation_date":1682354716,"post_id":76093353,"comment_id":134198474,"body_markdown":"There&#39;s no reason to compare to `0.` (but no harm in doing so). You can just use `0`, and it will automatically be widened to double `0`. (But, at the very least, be consistent: sometimes you compare to `0.`, sometimes to `0`)","body":"There&#39;s no reason to compare to <code>0.</code> (but no harm in doing so). You can just use <code>0</code>, and it will automatically be widened to double <code>0</code>. (But, at the very least, be consistent: sometimes you compare to <code>0.</code>, sometimes to <code>0</code>)"}],"answers":[{"tags":[],"owner":{"account_id":2552656,"reputation":2755,"user_id":2216129,"accept_rate":58,"display_name":"Topological Sort"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1682350109,"creation_date":1682349262,"answer_id":76093420,"question_id":76093353,"body_markdown":"This looks more like human reasoning and is thus clearer (while being no more costly for the computer):\r\n\r\n    if a and b are 0\r\n      if last price is also 0 price = previous close\r\n      else price = last price\r\n    else if b is zero /* and therefore at this point a isn&#39;t */ price = a\r\n    else if a is zero /* and therefore b isn&#39;t */ price = b\r\n    else /*a and b are nonzero, so */ price = (b+a)/2\r\n","title":"Is there a better way to do if else statement in this context","body":"<p>This looks more like human reasoning and is thus clearer (while being no more costly for the computer):</p>\n<pre><code>if a and b are 0\n  if last price is also 0 price = previous close\n  else price = last price\nelse if b is zero /* and therefore at this point a isn't */ price = a\nelse if a is zero /* and therefore b isn't */ price = b\nelse /*a and b are nonzero, so */ price = (b+a)/2\n</code></pre>\n"},{"tags":[],"owner":{"account_id":18172019,"reputation":11,"user_id":13221494,"display_name":"bramvanpevenage"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1682350700,"creation_date":1682350020,"answer_id":76093538,"question_id":76093353,"body_markdown":"Here&#39;s an improved if-else statement by removing some duplication checkings.\r\n\r\n    if (b != 0. &amp;&amp; a != 0.) {\r\n      price = (b + a) / 2;\r\n    } else if (b == 0.) { //don&#39;t need to check a not equal to zero, because if so we would have been in the previous condition.\r\n       price = a;\r\n    } else if (a == 0) { // same here\r\n       price = b;\r\n    } else if (LastPrice != 0.) { // same here don&#39;t need to check that a and b are not null already checked that case on the first line\r\n        price = LastPrice;\r\n    } else {\r\n       price = previous close;\r\n    }\r\n\r\nor you could do some nesting of if statements\r\n   \r\n\r\n     if (b == 0. &amp;&amp; a == 0. &amp;&amp; LastPrice == 0.) {\r\n        price = previous close;\r\n      } else {\r\n       if (b == 0.) { \r\n         price = a;\r\n       } else if (a == 0) { \r\n         price = b;\r\n       } else if { \r\n         price = LastPrice;\r\n       }\r\n    }","title":"Is there a better way to do if else statement in this context","body":"<p>Here's an improved if-else statement by removing some duplication checkings.</p>\n<pre><code>if (b != 0. &amp;&amp; a != 0.) {\n  price = (b + a) / 2;\n} else if (b == 0.) { //don't need to check a not equal to zero, because if so we would have been in the previous condition.\n   price = a;\n} else if (a == 0) { // same here\n   price = b;\n} else if (LastPrice != 0.) { // same here don't need to check that a and b are not null already checked that case on the first line\n    price = LastPrice;\n} else {\n   price = previous close;\n}\n</code></pre>\n<p>or you could do some nesting of if statements</p>\n<pre><code> if (b == 0. &amp;&amp; a == 0. &amp;&amp; LastPrice == 0.) {\n    price = previous close;\n  } else {\n   if (b == 0.) { \n     price = a;\n   } else if (a == 0) { \n     price = b;\n   } else if { \n     price = LastPrice;\n   }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":162699,"reputation":138060,"user_id":3788176,"accept_rate":54,"display_name":"Andy Turner"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1682354614,"creation_date":1682354614,"answer_id":76094188,"question_id":76093353,"body_markdown":"You can write this using streams:\r\n\r\n```\r\nprice = DoubleStream.of(a, b)\r\n    .filter(x -&gt; x != 0)\r\n    .average()\r\n    .orElse(LastPrice != 0 ? LastPrice : previousClose)\r\n```","title":"Is there a better way to do if else statement in this context","body":"<p>You can write this using streams:</p>\n<pre><code>price = DoubleStream.of(a, b)\n    .filter(x -&gt; x != 0)\n    .average()\n    .orElse(LastPrice != 0 ? LastPrice : previousClose)\n</code></pre>\n"}],"owner":{"account_id":17197306,"reputation":119,"user_id":12449753,"display_name":"w97802"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":65,"favorite_count":0,"down_vote_count":2,"up_vote_count":1,"closed_date":1682623634,"answer_count":3,"score":-1,"last_activity_date":1682354614,"creation_date":1682348892,"question_id":76093353,"body_markdown":"I have if-else statements like below:\r\n```\r\nif (b != 0. &amp;&amp; a != 0.) {\r\n    price = (b + a) / 2;\r\n} else if (b == 0. &amp;&amp; a! = 0.) {\r\n    price = a;\r\n} else if (a == 0 &amp;&amp; b != 0.) {\r\n    price = b;\r\n} else if (b == 0 &amp;&amp; a == 0. &amp;&amp; LastPrice != 0.) {\r\n    price = LastPrice;\r\n} else {\r\n    price = previous close;\r\n}\r\n```\r\n\r\nThe idea is that,\r\n1. if `b` &amp; `a` not equal 0 , price = (b + a) / 2;\r\n2. if `b` is 0 but `a` isn&#39;t, then take `a`, vice versa\r\n3. if `b` &amp; `a` are both 0 but lastPrice is not, then take lastPrice\r\n4. else we take previous close\r\n\r\nHowever, the way I wrote it is very clumsy, is there a cleaner way to do it with better coding style?\r\n\r\nThanks in advance.\r\n","title":"Is there a better way to do if else statement in this context","body":"<p>I have if-else statements like below:</p>\n<pre><code>if (b != 0. &amp;&amp; a != 0.) {\n    price = (b + a) / 2;\n} else if (b == 0. &amp;&amp; a! = 0.) {\n    price = a;\n} else if (a == 0 &amp;&amp; b != 0.) {\n    price = b;\n} else if (b == 0 &amp;&amp; a == 0. &amp;&amp; LastPrice != 0.) {\n    price = LastPrice;\n} else {\n    price = previous close;\n}\n</code></pre>\n<p>The idea is that,</p>\n<ol>\n<li>if <code>b</code> &amp; <code>a</code> not equal 0 , price = (b + a) / 2;</li>\n<li>if <code>b</code> is 0 but <code>a</code> isn't, then take <code>a</code>, vice versa</li>\n<li>if <code>b</code> &amp; <code>a</code> are both 0 but lastPrice is not, then take lastPrice</li>\n<li>else we take previous close</li>\n</ol>\n<p>However, the way I wrote it is very clumsy, is there a cleaner way to do it with better coding style?</p>\n<p>Thanks in advance.</p>\n"},{"tags":["java","spring","email","spring-mvc","spring-boot"],"comments":[{"owner":{"account_id":146411,"reputation":9094,"user_id":356857,"accept_rate":80,"display_name":"WeMakeSoftware"},"score":0,"creation_date":1471606004,"post_id":39037796,"comment_id":65425135,"body_markdown":"did you configure the gmail account to accept IMAP / POP3 requests?","body":"did you configure the gmail account to accept IMAP / POP3 requests?"}],"answers":[{"tags":[],"owner":{"account_id":40862,"reputation":23767,"user_id":118587,"accept_rate":75,"display_name":"Grzegorz Oledzki"},"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1471606075,"creation_date":1471606075,"answer_id":39037931,"question_id":39037796,"body_markdown":"Any chance that might be a typo in your configuration?\r\n\r\nLook at \r\n\r\n     sprint.mail.username \r\n\r\nShouldn&#39;t it be `spring...`?","title":"Unable to send emails in Spring Boot using Gmail SMTP","body":"<p>Any chance that might be a typo in your configuration?</p>\n\n<p>Look at </p>\n\n<pre><code> sprint.mail.username \n</code></pre>\n\n<p>Shouldn't it be <code>spring...</code>?</p>\n"},{"tags":[],"owner":{"account_id":4597208,"reputation":48209,"user_id":3728901,"accept_rate":58,"display_name":"Vy Do"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1471606561,"creation_date":1471606561,"answer_id":39038089,"question_id":39037796,"body_markdown":"Turn on **Less secure apps**\r\n\r\nhttps://www.google.com/settings/security/lesssecureapps\r\n\r\nFYI: https://support.google.com/accounts/answer/6010255?hl=en\r\n\r\nThen re-test sending email.","title":"Unable to send emails in Spring Boot using Gmail SMTP","body":"<p>Turn on <strong>Less secure apps</strong></p>\n\n<p><a href=\"https://www.google.com/settings/security/lesssecureapps\" rel=\"noreferrer\">https://www.google.com/settings/security/lesssecureapps</a></p>\n\n<p>FYI: <a href=\"https://support.google.com/accounts/answer/6010255?hl=en\" rel=\"noreferrer\">https://support.google.com/accounts/answer/6010255?hl=en</a></p>\n\n<p>Then re-test sending email.</p>\n"}],"owner":{"account_id":7620986,"reputation":779,"user_id":5779015,"accept_rate":67,"display_name":"I.shL"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":5687,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":39037931,"answer_count":2,"score":2,"last_activity_date":1682354378,"creation_date":1471605674,"question_id":39037796,"body_markdown":"I want to send emails in Spring Boot using `JavaMailSender`. Whenever I run my project I get this error:\r\n\r\n&gt; org.springframework.mail.MailSendException: Failed messages: com.sun.mail.smtp.SMTPSendFailedException: 530-5.5.1 Authentication Required. Learn more at\r\n530 5.5.1  https://support.google.com/mail/answer/14257 ps2sm10628859pab.10 - gsmtp\r\n\r\nI&#39;m not using 2-step verification for my account and the password is right too, I checked it.\r\n\r\nThis is my application.properties file:\r\n\r\n    spring.mail.host = smtp.gmail.com\r\n    sprint.mail.username = apptestacc1234@gmail.com\r\n    sprint.mail.password = *******\r\n    send.from.email= apptestacc1234@gmail.com\r\n    spring.mail.properties.mail.smtp.auth = true;\r\n    spring.mail.properties.mail.smtp.starttls.enable = true\r\n    spring.mail.properties.mail.smtp.ssl.enable = true\r\n    spring.mail.properties.mail.socketFactory.port=587\r\n    spring.mail.properties.mail.socketFactory.class=javax.net.ssl.SSLSocketFactory\r\n    spring.mail.properties.mail.socketFactory.fallback=false\r\n    spring.mail.smtp.port= 587\r\n\r\n\r\nMy MailService class:\r\n\r\n    import org.springframework.beans.factory.annotation.Autowired;\r\n    import org.springframework.mail.MailException;\r\n    import org.springframework.mail.SimpleMailMessage;\r\n    import org.springframework.mail.javamail.JavaMailSender;\r\n    import org.springframework.stereotype.Component;\r\n    \r\n    @Component\r\n    public class MailService {\r\n\r\n\t@Autowired\r\n\tprivate JavaMailSender javaMailSender;\r\n\t\r\n\t\r\n\t//public MailService(JavaMailSender javaMailSender){\r\n\t//\tthis.javaMailSender = javaMailSender;\r\n\t//}\r\n\t\r\n\t\r\n\tpublic void sendMail() throws MailException{\r\n\t\t\r\n\t\tSimpleMailMessage mail = new SimpleMailMessage();\r\n\t\tmail.setTo(&quot;loonaishmita@gmail.com&quot;);\r\n\t\tmail.setFrom(&quot;apptestacc1234@gmail.com&quot;);\r\n\t\tmail.setSubject(&quot;Test&quot;);\r\n\t\tmail.setText(&quot;test mail&quot;);\r\n\t\tjavaMailSender.send(mail);\r\n\t}\r\n}\r\n\r\nThis is my controller:\r\n\r\n    @Controller\r\n    @EnableAutoConfiguration\r\n    public class MailController {\r\n    \t@Autowired\r\n    \tprivate MailService mailService;\r\n    \t\r\n\t@RequestMapping(&quot;/api/sendmail&quot;)\r\n    @ResponseBody\r\n    private String sendMail() {\r\n\t\ttry{\r\n\t\t\tmailService.sendMail();\r\n\t\t\treturn &quot;mail sent&quot;;\r\n\t\t}catch(MailException e){\r\n\t\t\te.printStackTrace();\r\n\t\t}\r\n\t\treturn &quot;thanks&quot;;\r\n    }\r\n\r\n\t\r\n}\r\n\r\n\r\nI followed almost all the threads related to this problem on stackoverflow but still not able to figure it out. Please help!\r\n\r\n\r\n","title":"Unable to send emails in Spring Boot using Gmail SMTP","body":"<p>I want to send emails in Spring Boot using <code>JavaMailSender</code>. Whenever I run my project I get this error:</p>\n\n<blockquote>\n  <p>org.springframework.mail.MailSendException: Failed messages: com.sun.mail.smtp.SMTPSendFailedException: 530-5.5.1 Authentication Required. Learn more at\n  530 5.5.1  <a href=\"https://support.google.com/mail/answer/14257\" rel=\"nofollow\">https://support.google.com/mail/answer/14257</a> ps2sm10628859pab.10 - gsmtp</p>\n</blockquote>\n\n<p>I'm not using 2-step verification for my account and the password is right too, I checked it.</p>\n\n<p>This is my application.properties file:</p>\n\n<pre><code>spring.mail.host = smtp.gmail.com\nsprint.mail.username = apptestacc1234@gmail.com\nsprint.mail.password = *******\nsend.from.email= apptestacc1234@gmail.com\nspring.mail.properties.mail.smtp.auth = true;\nspring.mail.properties.mail.smtp.starttls.enable = true\nspring.mail.properties.mail.smtp.ssl.enable = true\nspring.mail.properties.mail.socketFactory.port=587\nspring.mail.properties.mail.socketFactory.class=javax.net.ssl.SSLSocketFactory\nspring.mail.properties.mail.socketFactory.fallback=false\nspring.mail.smtp.port= 587\n</code></pre>\n\n<p>My MailService class:</p>\n\n<pre><code>import org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.mail.MailException;\nimport org.springframework.mail.SimpleMailMessage;\nimport org.springframework.mail.javamail.JavaMailSender;\nimport org.springframework.stereotype.Component;\n\n@Component\npublic class MailService {\n\n@Autowired\nprivate JavaMailSender javaMailSender;\n\n\n//public MailService(JavaMailSender javaMailSender){\n//  this.javaMailSender = javaMailSender;\n//}\n\n\npublic void sendMail() throws MailException{\n\n    SimpleMailMessage mail = new SimpleMailMessage();\n    mail.setTo(\"loonaishmita@gmail.com\");\n    mail.setFrom(\"apptestacc1234@gmail.com\");\n    mail.setSubject(\"Test\");\n    mail.setText(\"test mail\");\n    javaMailSender.send(mail);\n}\n</code></pre>\n\n<p>}</p>\n\n<p>This is my controller:</p>\n\n<pre><code>@Controller\n@EnableAutoConfiguration\npublic class MailController {\n    @Autowired\n    private MailService mailService;\n\n@RequestMapping(\"/api/sendmail\")\n@ResponseBody\nprivate String sendMail() {\n    try{\n        mailService.sendMail();\n        return \"mail sent\";\n    }catch(MailException e){\n        e.printStackTrace();\n    }\n    return \"thanks\";\n}\n</code></pre>\n\n<p>}</p>\n\n<p>I followed almost all the threads related to this problem on stackoverflow but still not able to figure it out. Please help!</p>\n"},{"tags":["java","regex","cucumber","gherkin","cucumber-java"],"comments":[{"owner":{"account_id":27900922,"reputation":5928,"user_id":21305238,"display_name":"InSync"},"score":1,"creation_date":1682339172,"post_id":76091301,"comment_id":134194427,"body_markdown":"Could you format the question properly, please?","body":"Could you format the question properly, please?"}],"owner":{"account_id":7292198,"reputation":169,"user_id":5558240,"display_name":"Shreyas Holla P"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":136,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1682354111,"creation_date":1682334857,"question_id":76091301,"body_markdown":"Here is my feature file,\r\n```\r\n Given user raises a referral to supervisor\r\n    When user raises a referral by passing &quot;&lt;entityName&gt;&quot;,&quot;&lt;entityHeaderDetails&gt;&quot;,&lt;newEntityDetails&gt;&quot;\r\n    Then user recieves a referral created status\r\nExamples:\r\n    | entityName       | entityHeaderDetails | newEntityDetails|                \r\n\t| Approval Process | {&quot;url&quot;: &quot;http://localhost:9909/essence/feus/v1/b2e/user&quot;,&quot;httpMethod&quot;: &quot;POST&quot;,&quot;headers&quot;: {&quot;x-tenant-id&quot;:&quot;ESSENCE&quot;,&quot;Content-Type&quot;: &quot;application/json&quot;}} | {&quot;activeFlag&quot;: &quot;Y&quot;,&quot;activeFrom&quot;: &quot;2022-10-19&quot;,&quot;activeTill&quot;: &quot;2022-10-31&quot;,&quot;alternatePhone&quot;: &quot;9111111113&quot;,&quot;bankCode&quot;: &quot;MODELBANK&quot;,&quot;emailId&quot;: &quot;MCTestUser@mail.com&quot;,&quot;mobileNumber&quot;: &quot;9111111114&quot;,&quot;readOnlyFlag&quot;: &quot;N&quot;,&quot;userBankDetail&quot;: [{&quot;activeFlag&quot;: &quot;Y&quot;,&quot;activeFrom&quot;: &quot;2022-10-19&quot;,&quot;activeTill&quot;: &quot;2022-10-31&quot;,&quot;bankCode&quot;: &quot;MODELBANK&quot;,&quot;bankRoleDetail&quot;: [{&quot;activeFlag&quot;: &quot;Y&quot;,&quot;activeFrom&quot;: &quot;2022-10-19&quot;,&quot;activeTill&quot;: &quot;2022-10-25&quot;,&quot;branchCode&quot;: &quot;BRANCH_002&quot;,&quot;defaultRoleFlag&quot;: &quot;Y&quot;,&quot;roleCode&quot;: &quot;B2E_SYSTEM_ROLE&quot;,&quot;roleName&quot;: &quot;Bank Employee system Role&quot;}],&quot;branchCode&quot;: &quot;BRANCH_002&quot;}],&quot;userCategoryCode&quot;: &quot;BANK_EMPLOYEE&quot;,&quot;userLanguageCode&quot;: &quot;en_GB&quot;,&quot;userLoginId&quot;: &quot;MCTestUser&quot;,&quot;userTypeCode&quot;: &quot;NORMAL&quot;} | \r\n```\r\n\t\r\nSo trying to get the same in test file and tried this,\r\n\r\n```java\r\n @When(&quot;^user raises a referral by passing \\&quot;([^\\&quot;]*)\\&quot;, \\&quot;(.*?)\\&quot;,\\&quot;(.*?)\\&quot;$&quot;)\r\n    public void userRaisesAReferralByPassing(String entityName,String entityHeaderDetails, String newEntityDetails) throws Throwable \r\n    {\t\r\n```\r\n\t\r\nCucumber is able to identify the test method and it calls the same. But mapping of values is failing.\r\n\r\nFor example the above value of `{&quot;url&quot;: &quot;http://localhost:9909/essence/feus/v1/b2e/user&quot;,&quot;httpMethod&quot;: &quot;POST&quot;,&quot;headers&quot;: {&quot;x-tenant-id&quot;:&quot;ESSENCE&quot;,&quot;Content-Type&quot;: &quot;application/json&quot;}}`  is mapped as `{&quot;url&quot;: &quot;http://localhost:9909/essence/feus/v1/b2e/user`.\r\n\t","title":"How to pass dynamic json structure to cucumber test","body":"<p>Here is my feature file,</p>\n<pre><code> Given user raises a referral to supervisor\n    When user raises a referral by passing &quot;&lt;entityName&gt;&quot;,&quot;&lt;entityHeaderDetails&gt;&quot;,&lt;newEntityDetails&gt;&quot;\n    Then user recieves a referral created status\nExamples:\n    | entityName       | entityHeaderDetails | newEntityDetails|                \n    | Approval Process | {&quot;url&quot;: &quot;http://localhost:9909/essence/feus/v1/b2e/user&quot;,&quot;httpMethod&quot;: &quot;POST&quot;,&quot;headers&quot;: {&quot;x-tenant-id&quot;:&quot;ESSENCE&quot;,&quot;Content-Type&quot;: &quot;application/json&quot;}} | {&quot;activeFlag&quot;: &quot;Y&quot;,&quot;activeFrom&quot;: &quot;2022-10-19&quot;,&quot;activeTill&quot;: &quot;2022-10-31&quot;,&quot;alternatePhone&quot;: &quot;9111111113&quot;,&quot;bankCode&quot;: &quot;MODELBANK&quot;,&quot;emailId&quot;: &quot;MCTestUser@mail.com&quot;,&quot;mobileNumber&quot;: &quot;9111111114&quot;,&quot;readOnlyFlag&quot;: &quot;N&quot;,&quot;userBankDetail&quot;: [{&quot;activeFlag&quot;: &quot;Y&quot;,&quot;activeFrom&quot;: &quot;2022-10-19&quot;,&quot;activeTill&quot;: &quot;2022-10-31&quot;,&quot;bankCode&quot;: &quot;MODELBANK&quot;,&quot;bankRoleDetail&quot;: [{&quot;activeFlag&quot;: &quot;Y&quot;,&quot;activeFrom&quot;: &quot;2022-10-19&quot;,&quot;activeTill&quot;: &quot;2022-10-25&quot;,&quot;branchCode&quot;: &quot;BRANCH_002&quot;,&quot;defaultRoleFlag&quot;: &quot;Y&quot;,&quot;roleCode&quot;: &quot;B2E_SYSTEM_ROLE&quot;,&quot;roleName&quot;: &quot;Bank Employee system Role&quot;}],&quot;branchCode&quot;: &quot;BRANCH_002&quot;}],&quot;userCategoryCode&quot;: &quot;BANK_EMPLOYEE&quot;,&quot;userLanguageCode&quot;: &quot;en_GB&quot;,&quot;userLoginId&quot;: &quot;MCTestUser&quot;,&quot;userTypeCode&quot;: &quot;NORMAL&quot;} | \n</code></pre>\n<p>So trying to get the same in test file and tried this,</p>\n<pre class=\"lang-java prettyprint-override\"><code> @When(&quot;^user raises a referral by passing \\&quot;([^\\&quot;]*)\\&quot;, \\&quot;(.*?)\\&quot;,\\&quot;(.*?)\\&quot;$&quot;)\n    public void userRaisesAReferralByPassing(String entityName,String entityHeaderDetails, String newEntityDetails) throws Throwable \n    {   \n</code></pre>\n<p>Cucumber is able to identify the test method and it calls the same. But mapping of values is failing.</p>\n<p>For example the above value of <code>{&quot;url&quot;: &quot;http://localhost:9909/essence/feus/v1/b2e/user&quot;,&quot;httpMethod&quot;: &quot;POST&quot;,&quot;headers&quot;: {&quot;x-tenant-id&quot;:&quot;ESSENCE&quot;,&quot;Content-Type&quot;: &quot;application/json&quot;}}</code>  is mapped as <code>{&quot;url&quot;: &quot;http://localhost:9909/essence/feus/v1/b2e/user</code>.</p>\n"},{"tags":["java","java-8","option-type"],"comments":[{"owner":{"account_id":279365,"reputation":49126,"user_id":574479,"accept_rate":87,"display_name":"biziclop"},"score":28,"creation_date":1439218793,"post_id":31922866,"comment_id":51758330,"body_markdown":"If you used optionals, wouldn&#39;t you have to check that the optional passed as a parameter isn&#39;t `null`?","body":"If you used optionals, wouldn&#39;t you have to check that the optional passed as a parameter isn&#39;t <code>null</code>?"},{"owner":{"account_id":4858495,"reputation":6835,"user_id":3918862,"display_name":"Neil Stevens"},"score":43,"creation_date":1439219108,"post_id":31922866,"comment_id":51758560,"body_markdown":"Yes, but it would make it obvious to some one else maintaining the code in the future that the parameter can be empty/null, therefore potentially avoiding a null pointer exception in the future","body":"Yes, but it would make it obvious to some one else maintaining the code in the future that the parameter can be empty/null, therefore potentially avoiding a null pointer exception in the future"},{"owner":{"account_id":3027632,"reputation":1789,"user_id":2567273,"accept_rate":70,"display_name":"Luminous"},"score":1,"creation_date":1439219530,"post_id":31922866,"comment_id":51758850,"body_markdown":"Wow. Null arguments being passed into a method? That&#39;s so Visual Basic. What principle is it violating? SRP (maybe). It also violates another principle whose name leaves me bereft goes along the lines of passing in ONLY the necessary information for a method or function to do its job.","body":"Wow. Null arguments being passed into a method? That&#39;s so Visual Basic. What principle is it violating? SRP (maybe). It also violates another principle whose name leaves me bereft goes along the lines of passing in ONLY the necessary information for a method or function to do its job."},{"owner":{"account_id":249169,"reputation":19388,"user_id":525036,"accept_rate":25,"display_name":"Didier L"},"score":0,"creation_date":1439222743,"post_id":31922866,"comment_id":51760998,"body_markdown":"possible duplicate of [Uses for Java8 Optional](http://stackoverflow.com/questions/23454952/uses-for-java8-optional)","body":"possible duplicate of <a href=\"http://stackoverflow.com/questions/23454952/uses-for-java8-optional\">Uses for Java8 Optional</a>"},{"owner":{"account_id":2021661,"reputation":61998,"user_id":2541573,"accept_rate":100,"display_name":"jub0bs"},"score":1,"creation_date":1467387224,"post_id":31922866,"comment_id":63727936,"body_markdown":"@NeilStevens You forget that a reference of type `Optional&lt;Whatever&gt;` can itself be `null`.","body":"@NeilStevens You forget that a reference of type <code>Optional&lt;Whatever&gt;</code> can itself be <code>null</code>."},{"owner":{"account_id":1063177,"reputation":1671,"user_id":1064375,"display_name":"yeoman"},"score":38,"creation_date":1503154655,"post_id":31922866,"comment_id":78503967,"body_markdown":"Everything theoretically possibly being null is like every method in a library possibly calling System.exit(0). You cannot check against tis and you shouldn&#39;t check against this. Everything you would have to do all the time you in fact should (almost) never do. Like making all parameters final. Let your tools help you prevent changing parameter values or forgetting to initialize fields instead of making your code unreadable by thousand finals and as many null checks.","body":"Everything theoretically possibly being null is like every method in a library possibly calling System.exit(0). You cannot check against tis and you shouldn&#39;t check against this. Everything you would have to do all the time you in fact should (almost) never do. Like making all parameters final. Let your tools help you prevent changing parameter values or forgetting to initialize fields instead of making your code unreadable by thousand finals and as many null checks."},{"owner":{"account_id":7445,"reputation":62274,"user_id":12943,"accept_rate":84,"display_name":"Bill K"},"score":13,"creation_date":1517354895,"post_id":31922866,"comment_id":84059888,"body_markdown":"Actually just use the NonNull/Nullable annotations, that&#39;s what you&#39;re looking for in this situation, not optional.","body":"Actually just use the NonNull/Nullable annotations, that&#39;s what you&#39;re looking for in this situation, not optional."},{"owner":{"account_id":5481141,"reputation":7665,"user_id":4398050,"accept_rate":94,"display_name":"pedrorijo91"},"score":5,"creation_date":1582614172,"post_id":31922866,"comment_id":106827966,"body_markdown":"don&#39;t really understand the argument that Optional&lt;&gt; can be null itself. If you stablish that in your codebase there are no nulls (in every boundary with external libs you ensure that), then you can rest assured there are no nulls. I worked in a codebase like that for 2 years and we never got a NPE. Now in a codebase that wants to use solution 2 we get NPE every couple of weeks, so it can&#39;t be better, sorry. I vouch for solution 1 every single time. Scala does the same as well and no one thinks about nulls. And I think kotlin too","body":"don&#39;t really understand the argument that Optional&lt;&gt; can be null itself. If you stablish that in your codebase there are no nulls (in every boundary with external libs you ensure that), then you can rest assured there are no nulls. I worked in a codebase like that for 2 years and we never got a NPE. Now in a codebase that wants to use solution 2 we get NPE every couple of weeks, so it can&#39;t be better, sorry. I vouch for solution 1 every single time. Scala does the same as well and no one thinks about nulls. And I think kotlin too"},{"owner":{"account_id":2450311,"reputation":3009,"user_id":2136767,"accept_rate":74,"display_name":"Paul"},"score":0,"creation_date":1652272648,"post_id":31922866,"comment_id":127565787,"body_markdown":"An argument can be made that Optional is a hack to work around the lack of type unions in Java (and similar classes, in other languages).   This might be of interest: https://www.youtube.com/watch?v=YR5WdGrpoug   If you did, the Optional passed to a method could still be null, so you&#39;d have to check that too - making the code even more complicated.  And if you started non-optional T and widened the method to allow Optional&lt;T&gt;, you&#39;ve broken all your callers by changing the type.","body":"An argument can be made that Optional is a hack to work around the lack of type unions in Java (and similar classes, in other languages).   This might be of interest: <a href=\"https://www.youtube.com/watch?v=YR5WdGrpoug\" rel=\"nofollow noreferrer\">youtube.com/watch?v=YR5WdGrpoug</a>   If you did, the Optional passed to a method could still be null, so you&#39;d have to check that too - making the code even more complicated.  And if you started non-optional T and widened the method to allow Optional&lt;T&gt;, you&#39;ve broken all your callers by changing the type."}],"answers":[{"tags":[],"owner":{"account_id":1810883,"reputation":1413,"user_id":1646982,"display_name":"Danil Gaponov"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1439219028,"creation_date":1439219028,"answer_id":31922994,"question_id":31922866,"body_markdown":"I think that is because you usually write your functions to manipulate data, and then lift it to `Optional` using `map` and similar functions. This adds the default `Optional` behavior to it.\r\nOf course, there might be cases, when it is necessary to write your own auxilary function that works on `Optional`.","title":"Why should Java 8&#39;s Optional not be used in arguments","body":"<p>I think that is because you usually write your functions to manipulate data, and then lift it to <code>Optional</code> using <code>map</code> and similar functions. This adds the default <code>Optional</code> behavior to it.\nOf course, there might be cases, when it is necessary to write your own auxilary function that works on <code>Optional</code>.</p>\n"},{"tags":[],"owner":{"account_id":1187920,"reputation":607,"user_id":1161494,"accept_rate":44,"display_name":"Macchiatow"},"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1439219084,"creation_date":1439219084,"answer_id":31923015,"question_id":31922866,"body_markdown":"I believe the reson of being is you have to first check whether or not Optional is null itself and then try to evaluate value it wraps. Too many unnecessary validations.","title":"Why should Java 8&#39;s Optional not be used in arguments","body":"<p>I believe the reson of being is you have to first check whether or not Optional is null itself and then try to evaluate value it wraps. Too many unnecessary validations.</p>\n"},{"tags":[],"owner":{"account_id":1082858,"reputation":104688,"user_id":1079354,"accept_rate":93,"display_name":"Makoto"},"down_vote_count":0,"up_vote_count":12,"is_accepted":false,"score":12,"last_activity_date":1439219176,"creation_date":1439219176,"answer_id":31923042,"question_id":31922866,"body_markdown":"The pattern with `Optional` is for one to avoid *returning* `null`.  It&#39;s still perfectly possible to pass in `null` to a method.\r\n\r\nWhile these aren&#39;t really official yet, you can use [JSR-308 style](https://stackoverflow.com/questions/4963300/which-notnull-java-annotation-should-i-use) annotations to indicate whether or not you accept `null` values into the function.  Note that you&#39;d have to have the right tooling to actually identify it, and it&#39;d provide more of a static check than an enforceable runtime policy, but it would help.\r\n\r\n    public int calculateSomething(@NotNull final String p1, @NotNull final String p2) {}\r\n\r\n  ","title":"Why should Java 8&#39;s Optional not be used in arguments","body":"<p>The pattern with <code>Optional</code> is for one to avoid <em>returning</em> <code>null</code>.  It's still perfectly possible to pass in <code>null</code> to a method.</p>\n\n<p>While these aren't really official yet, you can use <a href=\"https://stackoverflow.com/questions/4963300/which-notnull-java-annotation-should-i-use\">JSR-308 style</a> annotations to indicate whether or not you accept <code>null</code> values into the function.  Note that you'd have to have the right tooling to actually identify it, and it'd provide more of a static check than an enforceable runtime policy, but it would help.</p>\n\n<pre><code>public int calculateSomething(@NotNull final String p1, @NotNull final String p2) {}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":960307,"reputation":107861,"user_id":984823,"display_name":"Joop Eggen"},"down_vote_count":21,"up_vote_count":362,"is_accepted":true,"score":341,"last_activity_date":1606118652,"creation_date":1439219320,"answer_id":31923105,"question_id":31922866,"body_markdown":"Oh, those coding styles are to be taken with a bit of salt.\r\n\r\n1. (+) Passing an Optional result to another method, without any semantic analysis; leaving that to the method, is quite alright.\r\n2. (-) Using Optional parameters causing conditional logic inside the methods is literally contra-productive.\r\n3. (-) Needing to pack an argument in an Optional, is suboptimal for the compiler, and does an unnecessary wrapping.\r\n4. (-) In comparison to nullable parameters Optional is more costly.\r\n5. (-) The risk of someone passing the Optional as null in actual parameters.\r\n\r\nIn general: Optional unifies two states, which have to be unraveled. Hence better suited for result than input, for the complexity of the data flow.","title":"Why should Java 8&#39;s Optional not be used in arguments","body":"<p>Oh, those coding styles are to be taken with a bit of salt.</p>\n<ol>\n<li>(+) Passing an Optional result to another method, without any semantic analysis; leaving that to the method, is quite alright.</li>\n<li>(-) Using Optional parameters causing conditional logic inside the methods is literally contra-productive.</li>\n<li>(-) Needing to pack an argument in an Optional, is suboptimal for the compiler, and does an unnecessary wrapping.</li>\n<li>(-) In comparison to nullable parameters Optional is more costly.</li>\n<li>(-) The risk of someone passing the Optional as null in actual parameters.</li>\n</ol>\n<p>In general: Optional unifies two states, which have to be unraveled. Hence better suited for result than input, for the complexity of the data flow.</p>\n"},{"tags":[],"owner":{"account_id":3286109,"reputation":14045,"user_id":2765603,"accept_rate":90,"display_name":"llogiq"},"down_vote_count":1,"up_vote_count":13,"is_accepted":false,"score":12,"last_activity_date":1439219604,"creation_date":1439219604,"answer_id":31923211,"question_id":31922866,"body_markdown":"This advice is a variant of the &quot;be as unspecific as possible regarding inputs and as specific as possible regarding outputs&quot; rule of thumb.\r\n\r\nUsually if you have a method that takes a plain non-null value, you can map it over the `Optional`, so the plain version is strictly more unspecific regarding inputs. *However* there are a bunch of possible reasons why you would want to require an `Optional` argument nonetheless:\r\n\r\n * you want your function to be used in conjunction with another API that returns an `Optional`\r\n * Your function should return something other than an empty `Optional` if the given value is empty\r\n * &lt;s&gt;You think `Optional` is so awesome that whoever uses your API should be required to learn about it ;-)&lt;/s&gt;","title":"Why should Java 8&#39;s Optional not be used in arguments","body":"<p>This advice is a variant of the \"be as unspecific as possible regarding inputs and as specific as possible regarding outputs\" rule of thumb.</p>\n\n<p>Usually if you have a method that takes a plain non-null value, you can map it over the <code>Optional</code>, so the plain version is strictly more unspecific regarding inputs. <em>However</em> there are a bunch of possible reasons why you would want to require an <code>Optional</code> argument nonetheless:</p>\n\n<ul>\n<li>you want your function to be used in conjunction with another API that returns an <code>Optional</code></li>\n<li>Your function should return something other than an empty <code>Optional</code> if the given value is empty</li>\n<li><s>You think <code>Optional</code> is so awesome that whoever uses your API should be required to learn about it ;-)</s></li>\n</ul>\n"},{"tags":[],"owner":{"account_id":10340,"reputation":55904,"user_id":19479,"accept_rate":69,"display_name":"Steve B."},"down_vote_count":0,"up_vote_count":9,"is_accepted":false,"score":9,"last_activity_date":1439219612,"creation_date":1439219612,"answer_id":31923214,"question_id":31922866,"body_markdown":"This seems a bit silly to me, but the only reason I can think of is that object arguments in method parameters already are optional in a way - they can be null. Therefore forcing someone to take an existing object and wrap it in an optional is sort of pointless. \r\n\r\nThat being said, chaining methods together that take/return optionals is a reasonable thing to do, e.g. Maybe monad.\r\n","title":"Why should Java 8&#39;s Optional not be used in arguments","body":"<p>This seems a bit silly to me, but the only reason I can think of is that object arguments in method parameters already are optional in a way - they can be null. Therefore forcing someone to take an existing object and wrap it in an optional is sort of pointless. </p>\n\n<p>That being said, chaining methods together that take/return optionals is a reasonable thing to do, e.g. Maybe monad.</p>\n"},{"tags":[],"owner":{"account_id":449395,"reputation":343,"user_id":5164569,"display_name":"Kieran"},"down_vote_count":8,"up_vote_count":8,"is_accepted":false,"score":0,"last_activity_date":1439219643,"creation_date":1439219643,"answer_id":31923227,"question_id":31922866,"body_markdown":"Optionals aren&#39;t designed for this purpose, as explained nicely by [Brian Goetz][1].\r\n\r\nYou can always use [@Nullable][2] to denote that a method argument can be null. Using an optional does not really enable you to write your method logic more neatly.\r\n\r\n  [1]: https://stackoverflow.com/questions/26327957/should-java-8-getters-return-optional-type/26328555#26328555\r\n  [2]: https://stackoverflow.com/questions/14076296/nullable-annotation-usage","title":"Why should Java 8&#39;s Optional not be used in arguments","body":"<p>Optionals aren't designed for this purpose, as explained nicely by <a href=\"https://stackoverflow.com/questions/26327957/should-java-8-getters-return-optional-type/26328555#26328555\">Brian Goetz</a>.</p>\n\n<p>You can always use <a href=\"https://stackoverflow.com/questions/14076296/nullable-annotation-usage\">@Nullable</a> to denote that a method argument can be null. Using an optional does not really enable you to write your method logic more neatly.</p>\n"},{"tags":[],"owner":{"account_id":4793258,"reputation":1654,"user_id":3871834,"display_name":"Mark Perry"},"down_vote_count":21,"up_vote_count":156,"is_accepted":false,"score":135,"last_activity_date":1528963387,"creation_date":1439224790,"answer_id":31924845,"question_id":31922866,"body_markdown":"There are almost no good reasons for not using `Optional` as parameters.  The arguments against this rely on arguments from authority (see Brian Goetz - his argument is we can&#39;t enforce non null optionals) or that the `Optional` arguments may be null (essentially the same argument).  Of course, any reference in Java can be null, we need to encourage rules being enforced by the compiler, not programmers memory (which is problematic and does not scale).  \r\n\r\nFunctional programming languages encourage `Optional` parameters.  One of the best ways of using this is to have multiple optional parameters and using `liftM2` to use a function assuming the parameters are not empty and returning an optional (see http://www.functionaljava.org/javadoc/4.4/functionaljava/fj/data/Option.html#liftM2-fj.F-).  Java 8 has unfortunately implemented a very limited library supporting optional.\r\n\r\nAs Java programmers we should only be using null to interact with legacy libraries.\r\n\r\n","title":"Why should Java 8&#39;s Optional not be used in arguments","body":"<p>There are almost no good reasons for not using <code>Optional</code> as parameters.  The arguments against this rely on arguments from authority (see Brian Goetz - his argument is we can't enforce non null optionals) or that the <code>Optional</code> arguments may be null (essentially the same argument).  Of course, any reference in Java can be null, we need to encourage rules being enforced by the compiler, not programmers memory (which is problematic and does not scale).  </p>\n\n<p>Functional programming languages encourage <code>Optional</code> parameters.  One of the best ways of using this is to have multiple optional parameters and using <code>liftM2</code> to use a function assuming the parameters are not empty and returning an optional (see <a href=\"http://www.functionaljava.org/javadoc/4.4/functionaljava/fj/data/Option.html#liftM2-fj.F-\" rel=\"noreferrer\">http://www.functionaljava.org/javadoc/4.4/functionaljava/fj/data/Option.html#liftM2-fj.F-</a>).  Java 8 has unfortunately implemented a very limited library supporting optional.</p>\n\n<p>As Java programmers we should only be using null to interact with legacy libraries.</p>\n"},{"tags":[],"owner":{"account_id":8235,"reputation":87010,"user_id":14731,"accept_rate":89,"display_name":"Gili"},"down_vote_count":9,"up_vote_count":231,"is_accepted":false,"score":222,"last_activity_date":1526944746,"creation_date":1471464714,"answer_id":39005452,"question_id":31922866,"body_markdown":"The [best post][1] I&#39;ve seen on the topic was written by [Daniel Olszewski](https://stackoverflow.com/users/1487809/daniel-olszewski):\r\n\r\n&gt; Although it might be tempting to consider Optional for not mandatory method parameters, such a solution pale in comparison with other possible alternatives. To illustrate the problem, examine the following constructor declaration:\r\n&gt; \r\n&gt;     public SystemMessage(String title, String content, Optional&lt;Attachment&gt; attachment) {\r\n&gt;         // assigning field values\r\n&gt;     }\r\n&gt; \r\n&gt; At first glance it may look as a right design decision. After all, we\r\n&gt; explicitly marked the attachment parameter as optional. However, as\r\n&gt; for calling the constructor, client code can become a little bit\r\n&gt; clumsy.\r\n&gt; \r\n&gt;     SystemMessage withoutAttachment = new SystemMessage(&quot;title&quot;, &quot;content&quot;, Optional.empty());\r\n&gt;     Attachment attachment = new Attachment();\r\n&gt;     SystemMessage withAttachment = new SystemMessage(&quot;title&quot;, &quot;content&quot;, Optional.ofNullable(attachment));\r\n&gt; \r\n&gt; Instead of providing clarity, the factory methods of the Optional\r\n&gt; class only distract the reader. Note there’s only one optional\r\n&gt; parameter, but imagine having two or three. Uncle Bob definitely\r\n&gt; wouldn’t be proud of such code &#128521;\r\n&gt; \r\n&gt; **When a method can accept optional parameters, it’s preferable to adopt the well-proven approach and design such case using method\r\n&gt; overloading.** In the example of the SystemMessage class, declaring\r\n&gt; two separate constructors are superior to using Optional.\r\n&gt; \r\n&gt;     public SystemMessage(String title, String content) {\r\n&gt;         this(title, content, null);\r\n&gt;     }\r\n&gt;     \r\n&gt;     public SystemMessage(String title, String content, Attachment attachment) {\r\n&gt;         // assigning field values\r\n&gt;     }\r\n&gt; \r\n&gt; That change makes client code much simpler and easier to read.\r\n&gt; \r\n&gt;     SystemMessage withoutAttachment = new SystemMessage(&quot;title&quot;, &quot;content&quot;);\r\n&gt;     Attachment attachment = new Attachment();\r\n&gt;     SystemMessage withAttachment = new SystemMessage(&quot;title&quot;, &quot;content&quot;, attachment);\r\n\r\n\r\n  [1]: http://dolszewski.com/java/java-8-optional-use-cases/","title":"Why should Java 8&#39;s Optional not be used in arguments","body":"<p>The <a href=\"http://dolszewski.com/java/java-8-optional-use-cases/\" rel=\"noreferrer\">best post</a> I've seen on the topic was written by <a href=\"https://stackoverflow.com/users/1487809/daniel-olszewski\">Daniel Olszewski</a>:</p>\n\n<blockquote>\n  <p>Although it might be tempting to consider Optional for not mandatory method parameters, such a solution pale in comparison with other possible alternatives. To illustrate the problem, examine the following constructor declaration:</p>\n\n<pre><code>public SystemMessage(String title, String content, Optional&lt;Attachment&gt; attachment) {\n    // assigning field values\n}\n</code></pre>\n  \n  <p>At first glance it may look as a right design decision. After all, we\n  explicitly marked the attachment parameter as optional. However, as\n  for calling the constructor, client code can become a little bit\n  clumsy.</p>\n\n<pre><code>SystemMessage withoutAttachment = new SystemMessage(\"title\", \"content\", Optional.empty());\nAttachment attachment = new Attachment();\nSystemMessage withAttachment = new SystemMessage(\"title\", \"content\", Optional.ofNullable(attachment));\n</code></pre>\n  \n  <p>Instead of providing clarity, the factory methods of the Optional\n  class only distract the reader. Note there’s only one optional\n  parameter, but imagine having two or three. Uncle Bob definitely\n  wouldn’t be proud of such code 😉</p>\n  \n  <p><strong>When a method can accept optional parameters, it’s preferable to adopt the well-proven approach and design such case using method\n  overloading.</strong> In the example of the SystemMessage class, declaring\n  two separate constructors are superior to using Optional.</p>\n\n<pre><code>public SystemMessage(String title, String content) {\n    this(title, content, null);\n}\n\npublic SystemMessage(String title, String content, Attachment attachment) {\n    // assigning field values\n}\n</code></pre>\n  \n  <p>That change makes client code much simpler and easier to read.</p>\n\n<pre><code>SystemMessage withoutAttachment = new SystemMessage(\"title\", \"content\");\nAttachment attachment = new Attachment();\nSystemMessage withAttachment = new SystemMessage(\"title\", \"content\", attachment);\n</code></pre>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":220750,"reputation":83,"user_id":2038419,"display_name":"Swaraj Yadav"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1476433980,"creation_date":1476433980,"answer_id":40038584,"question_id":31922866,"body_markdown":"One more approach, what you can do is \r\n\r\n    // get your optionals first\r\n    Optional&lt;String&gt; p1 = otherObject.getP1();\r\n    Optional&lt;BigInteger&gt; p2 = otherObject.getP2();\r\n\r\n    // bind values to a function\r\n    Supplier&lt;Integer&gt; calculatedValueSupplier = () -&gt; { // your logic here using both optional as state}\r\n\r\nOnce you have built a function(supplier in this case) you will be able to pass this around as any other variable and would be able to call it using\r\n\r\n    calculatedValueSupplier.apply();\r\n\r\nThe idea here being whether you have got optional value or not will be internal detail of your function and will not be in parameter. Thinking functions when thinking about optional as parameter is actually very useful technique that I have found.\r\n\r\nAs to your question whether you should actually do it or not is based on your preference, but as others said it makes your API ugly to say the least.","title":"Why should Java 8&#39;s Optional not be used in arguments","body":"<p>One more approach, what you can do is </p>\n\n<pre><code>// get your optionals first\nOptional&lt;String&gt; p1 = otherObject.getP1();\nOptional&lt;BigInteger&gt; p2 = otherObject.getP2();\n\n// bind values to a function\nSupplier&lt;Integer&gt; calculatedValueSupplier = () -&gt; { // your logic here using both optional as state}\n</code></pre>\n\n<p>Once you have built a function(supplier in this case) you will be able to pass this around as any other variable and would be able to call it using</p>\n\n<pre><code>calculatedValueSupplier.apply();\n</code></pre>\n\n<p>The idea here being whether you have got optional value or not will be internal detail of your function and will not be in parameter. Thinking functions when thinking about optional as parameter is actually very useful technique that I have found.</p>\n\n<p>As to your question whether you should actually do it or not is based on your preference, but as others said it makes your API ugly to say the least.</p>\n"},{"tags":[],"owner":{"account_id":96378,"reputation":1682,"user_id":261984,"accept_rate":62,"display_name":"Eddy"},"down_vote_count":1,"up_vote_count":7,"is_accepted":false,"score":6,"last_activity_date":1481292826,"creation_date":1481292826,"answer_id":41062364,"question_id":31922866,"body_markdown":"My take is that Optional should be a Monad and these are not conceivable in Java.\r\n\r\nIn functional programming you deal with pure and higher order functions that take and compose their arguments only based on their &quot;business domain type&quot;. Composing functions that feed on, or whose computation should be reported to, the real-world (so called side effects) requires the application of functions that take care of automatically unpacking the values out of the monads representing the outside world (State, Configuration, Futures, Maybe, Either, Writer, etc...); this is called lifting. You can think of it as a kind of separation of concerns.\r\n\r\nMixing these two levels of abstraction doesn&#39;t facilitate legibility so you&#39;re better off just avoiding it.","title":"Why should Java 8&#39;s Optional not be used in arguments","body":"<p>My take is that Optional should be a Monad and these are not conceivable in Java.</p>\n\n<p>In functional programming you deal with pure and higher order functions that take and compose their arguments only based on their \"business domain type\". Composing functions that feed on, or whose computation should be reported to, the real-world (so called side effects) requires the application of functions that take care of automatically unpacking the values out of the monads representing the outside world (State, Configuration, Futures, Maybe, Either, Writer, etc...); this is called lifting. You can think of it as a kind of separation of concerns.</p>\n\n<p>Mixing these two levels of abstraction doesn't facilitate legibility so you're better off just avoiding it.</p>\n"},{"tags":[],"owner":{"account_id":6087813,"reputation":15135,"user_id":4751165,"accept_rate":96,"display_name":"Pau"},"down_vote_count":3,"up_vote_count":5,"is_accepted":false,"score":2,"last_activity_date":1489488468,"creation_date":1489488468,"answer_id":42783884,"question_id":31922866,"body_markdown":"Another reason to be carefully when pass an `Optional` as parameter is that a method should do one thing... If you pass an `Optional` param you could favor do more than one thing, it could be similar to pass a boolean param.\r\n\r\n    public void method(Optional&lt;MyClass&gt; param) {\r\n         if(param.isPresent()) {\r\n             //do something\r\n         } else {\r\n             //do some other\r\n         }\r\n     }\r\n\r\n","title":"Why should Java 8&#39;s Optional not be used in arguments","body":"<p>Another reason to be carefully when pass an <code>Optional</code> as parameter is that a method should do one thing... If you pass an <code>Optional</code> param you could favor do more than one thing, it could be similar to pass a boolean param.</p>\n\n<pre><code>public void method(Optional&lt;MyClass&gt; param) {\n     if(param.isPresent()) {\n         //do something\n     } else {\n         //do some other\n     }\n }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1868561,"reputation":96,"user_id":1691457,"display_name":"Torsten"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1494592538,"creation_date":1494592538,"answer_id":43937935,"question_id":31922866,"body_markdown":"At first, I also preferred to pass Optionals as parameter, but if you switch from an API-Designer perspective to a API-User perspective, you see the disadvantages. \r\n\r\nFor your example, where each parameter is optional, I would suggest to change the calculation method into an own class like follows: \r\n\r\n    Optional&lt;String&gt; p1 = otherObject.getP1();\r\n    Optional&lt;BigInteger&gt; p2 = otherObject.getP2();\r\n    \r\n    MyCalculator mc = new MyCalculator();\r\n    p1.map(mc::setP1);\r\n    p2.map(mc::setP2);\r\n    int result = mc.calculate();\r\n","title":"Why should Java 8&#39;s Optional not be used in arguments","body":"<p>At first, I also preferred to pass Optionals as parameter, but if you switch from an API-Designer perspective to a API-User perspective, you see the disadvantages. </p>\n\n<p>For your example, where each parameter is optional, I would suggest to change the calculation method into an own class like follows: </p>\n\n<pre><code>Optional&lt;String&gt; p1 = otherObject.getP1();\nOptional&lt;BigInteger&gt; p2 = otherObject.getP2();\n\nMyCalculator mc = new MyCalculator();\np1.map(mc::setP1);\np2.map(mc::setP2);\nint result = mc.calculate();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5023471,"reputation":61,"user_id":4052827,"display_name":"Blair"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1509112457,"creation_date":1509112457,"answer_id":46976742,"question_id":31922866,"body_markdown":"I know that this question is more about opinion rather than hard facts. But I recently moved from being a .net developer to a java one, so I have only recently joined the Optional party. *Also, I&#39;d prefer to state this as a comment, but since my point level does not allow me to comment, I am forced to put this as an answer instead.*\r\n\r\nWhat I have been doing, which has served me well as a rule of thumb. Is to use Optionals for return types, and only use Optionals as parameters, if I require both the value of the Optional, and weather or not the Optional had a value within the method.\r\n\r\nIf I only care about the value, I check isPresent before calling the method, if I have some kind of logging or different logic within the method that depends on if the value exists, then I will happily pass in the Optional.","title":"Why should Java 8&#39;s Optional not be used in arguments","body":"<p>I know that this question is more about opinion rather than hard facts. But I recently moved from being a .net developer to a java one, so I have only recently joined the Optional party. <em>Also, I'd prefer to state this as a comment, but since my point level does not allow me to comment, I am forced to put this as an answer instead.</em></p>\n\n<p>What I have been doing, which has served me well as a rule of thumb. Is to use Optionals for return types, and only use Optionals as parameters, if I require both the value of the Optional, and weather or not the Optional had a value within the method.</p>\n\n<p>If I only care about the value, I check isPresent before calling the method, if I have some kind of logging or different logic within the method that depends on if the value exists, then I will happily pass in the Optional.</p>\n"},{"tags":[],"owner":{"account_id":11182,"reputation":13135,"user_id":21424,"accept_rate":70,"display_name":"gpilotino"},"down_vote_count":0,"up_vote_count":9,"is_accepted":false,"score":9,"last_activity_date":1519814819,"creation_date":1519814819,"answer_id":49027694,"question_id":31922866,"body_markdown":"Accepting Optional as parameters causes unnecessary wrapping at caller level.\r\n\r\nFor example in the case of:\r\n\r\n    public int calculateSomething(Optional&lt;String&gt; p1, Optional&lt;BigDecimal&gt; p2 {}\r\n\r\nSuppose you have two not-null strings (ie. returned from some other method):\r\n\r\n    String p1 = &quot;p1&quot;; \r\n    String p2 = &quot;p2&quot;;\r\n\r\nYou&#39;re forced to wrap them in Optional even if you know they are not Empty.\r\n\r\nThis get even worse when you have to compose with other &quot;mappable&quot; structures, ie. [Eithers](http://www.vavr.io/vavr-docs/#_either):\r\n\r\n    Either&lt;Error, String&gt; value = compute().right().map((s) -&gt; calculateSomething(\r\n    &lt; here you have to wrap the parameter in a Optional even if you know it&#39;s a \r\n      string &gt;));\r\n\r\nref:\r\n\r\n&gt; methods shouldn&#39;t expect Option as parameters, this is almost always a\r\n&gt; code smell that indicated a leakage of control flow from the caller to\r\n&gt; the callee, it should be responsibility of the caller to check the\r\n&gt; content of an Option\r\n\r\nref. https://github.com/teamdigitale/digital-citizenship-functions/pull/148#discussion_r170862749\r\n\r\n\r\n\r\n","title":"Why should Java 8&#39;s Optional not be used in arguments","body":"<p>Accepting Optional as parameters causes unnecessary wrapping at caller level.</p>\n\n<p>For example in the case of:</p>\n\n<pre><code>public int calculateSomething(Optional&lt;String&gt; p1, Optional&lt;BigDecimal&gt; p2 {}\n</code></pre>\n\n<p>Suppose you have two not-null strings (ie. returned from some other method):</p>\n\n<pre><code>String p1 = \"p1\"; \nString p2 = \"p2\";\n</code></pre>\n\n<p>You're forced to wrap them in Optional even if you know they are not Empty.</p>\n\n<p>This get even worse when you have to compose with other \"mappable\" structures, ie. <a href=\"http://www.vavr.io/vavr-docs/#_either\" rel=\"noreferrer\">Eithers</a>:</p>\n\n<pre><code>Either&lt;Error, String&gt; value = compute().right().map((s) -&gt; calculateSomething(\n&lt; here you have to wrap the parameter in a Optional even if you know it's a \n  string &gt;));\n</code></pre>\n\n<p>ref:</p>\n\n<blockquote>\n  <p>methods shouldn't expect Option as parameters, this is almost always a\n  code smell that indicated a leakage of control flow from the caller to\n  the callee, it should be responsibility of the caller to check the\n  content of an Option</p>\n</blockquote>\n\n<p>ref. <a href=\"https://github.com/teamdigitale/digital-citizenship-functions/pull/148#discussion_r170862749\" rel=\"noreferrer\">https://github.com/teamdigitale/digital-citizenship-functions/pull/148#discussion_r170862749</a></p>\n"},{"tags":[],"owner":{"account_id":555014,"reputation":2838,"user_id":1061575,"accept_rate":17,"display_name":"speedogoo"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1537322981,"creation_date":1537322981,"answer_id":52397027,"question_id":31922866,"body_markdown":"This is because we have different requirements to an API user and an API developer. \r\n\r\nA developer is responsible for providing a precise specification and a correct implementation. Therefore if the developer is already aware that an argument is optional the implementation must deal with it correctly, whether it being a null or an Optional. The API should be as simple as possible to the user, and null is the simplest.\r\n\r\nOn the other hand, the result is passed from the API developer to the user. However the specification is complete and verbose, there is still a chance that the user is either unaware of it or just lazy to deal with it. In this case, the Optional result forces the user to write some extra code to deal with a possible empty result.","title":"Why should Java 8&#39;s Optional not be used in arguments","body":"<p>This is because we have different requirements to an API user and an API developer. </p>\n\n<p>A developer is responsible for providing a precise specification and a correct implementation. Therefore if the developer is already aware that an argument is optional the implementation must deal with it correctly, whether it being a null or an Optional. The API should be as simple as possible to the user, and null is the simplest.</p>\n\n<p>On the other hand, the result is passed from the API developer to the user. However the specification is complete and verbose, there is still a chance that the user is either unaware of it or just lazy to deal with it. In this case, the Optional result forces the user to write some extra code to deal with a possible empty result.</p>\n"},{"tags":[],"owner":{"account_id":2309641,"reputation":4648,"user_id":2028066,"accept_rate":52,"display_name":"MiguelMunoz"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1538749864,"creation_date":1538749864,"answer_id":52667906,"question_id":31922866,"body_markdown":"First of all, if you&#39;re using method 3, you can replace those last 14 lines of code with this:\r\n\r\n`int result = myObject.calculateSomething(p1.orElse(null), p2.orElse(null));`\r\n\r\nThe four variations you wrote are *convenience* methods. You should only use them when they&#39;re more convenient. That&#39;s also the best approach. That way, the API is very clear which members are necessary and which aren&#39;t. If you don&#39;t want to write four methods, you can clarify things by how you name your parameters: \r\n\r\n`public int calculateSomething(String p1OrNull, BigDecimal p2OrNull)`\r\n\r\nThis way, it&#39;s clear that null values are allowed.\r\n\r\nYour use of `p1.orElse(null)` illustrates how verbose our code gets when using Optional, which is part of why I avoid it. Optional was written for functional programming. Streams need it. Your methods should probably never return Optional unless it&#39;s necessary to use them in functional programming. There are methods, like `Optional.flatMap()` method, that requires a reference to a function that returns Optional. Here&#39;s its signature:\r\n\r\n`public &lt;U&gt; Optional&lt;U&gt; flatMap(Function&lt;? super T, ? extends Optional&lt;? extends U&gt;&gt; mapper)`\r\n\r\nSo that&#39;s usually the only good reason for writing a method that returns Optional. But even there, it can be avoided. You can pass a getter that doesn&#39;t return Optional to a method like flatMap(), by wrapping it in a another method that converts the function to the right type. The wrapper method looks like this:\r\n\r\n\tpublic static &lt;T, U&gt; Function&lt;? super T, Optional&lt;U&gt;&gt; optFun(Function&lt;T, U&gt; function) {\r\n\t\treturn t -&gt; Optional.ofNullable(function.apply(t));\r\n\t}\r\n\r\nSo suppose you have a getter like this: `String getName()`\r\n\r\nYou can&#39;t pass it to flatMap like this: \r\n\r\n`opt.flatMap(Widget::getName) // Won&#39;t work!`\r\n\r\nBut you can pass it like this:\r\n\r\n`opt.flatMap(optFun(Widget::getName)) // Works great!`\r\n\r\nOutside of functional programming, Optionals should be avoided. \r\n\r\nBrian Goetz said it best when he said this:\r\n\r\nThe reason Optional was added to Java is because this:\r\n\r\n    return Arrays.asList(enclosingInfo.getEnclosingClass().getDeclaredMethods())\r\n        .stream()\r\n        .filter(m -&gt; Objects.equals(m.getName(), enclosingInfo.getName())\r\n        .filter(m -&gt;  Arrays.equals(m.getParameterTypes(), parameterClasses))\r\n        .filter(m -&gt; Objects.equals(m.getReturnType(), returnType))\r\n        .findFirst()\r\n        .getOrThrow(() -&gt; new InternalError(...));\r\n\r\nis cleaner than this:\r\n\r\n    Method matching =\r\n        Arrays.asList(enclosingInfo.getEnclosingClass().getDeclaredMethods())\r\n        .stream()\r\n        .filter(m -&gt; Objects.equals(m.getName(), enclosingInfo.getName())\r\n        .filter(m -&gt;  Arrays.equals(m.getParameterTypes(), parameterClasses))\r\n        .filter(m -&gt; Objects.equals(m.getReturnType(), returnType))\r\n        .getFirst();\r\n    if (matching == null)\r\n      throw new InternalError(&quot;Enclosing method not found&quot;);\r\n    return matching;\r\n\r\n","title":"Why should Java 8&#39;s Optional not be used in arguments","body":"<p>First of all, if you're using method 3, you can replace those last 14 lines of code with this:</p>\n\n<p><code>int result = myObject.calculateSomething(p1.orElse(null), p2.orElse(null));</code></p>\n\n<p>The four variations you wrote are <em>convenience</em> methods. You should only use them when they're more convenient. That's also the best approach. That way, the API is very clear which members are necessary and which aren't. If you don't want to write four methods, you can clarify things by how you name your parameters: </p>\n\n<p><code>public int calculateSomething(String p1OrNull, BigDecimal p2OrNull)</code></p>\n\n<p>This way, it's clear that null values are allowed.</p>\n\n<p>Your use of <code>p1.orElse(null)</code> illustrates how verbose our code gets when using Optional, which is part of why I avoid it. Optional was written for functional programming. Streams need it. Your methods should probably never return Optional unless it's necessary to use them in functional programming. There are methods, like <code>Optional.flatMap()</code> method, that requires a reference to a function that returns Optional. Here's its signature:</p>\n\n<p><code>public &lt;U&gt; Optional&lt;U&gt; flatMap(Function&lt;? super T, ? extends Optional&lt;? extends U&gt;&gt; mapper)</code></p>\n\n<p>So that's usually the only good reason for writing a method that returns Optional. But even there, it can be avoided. You can pass a getter that doesn't return Optional to a method like flatMap(), by wrapping it in a another method that converts the function to the right type. The wrapper method looks like this:</p>\n\n<pre><code>public static &lt;T, U&gt; Function&lt;? super T, Optional&lt;U&gt;&gt; optFun(Function&lt;T, U&gt; function) {\n    return t -&gt; Optional.ofNullable(function.apply(t));\n}\n</code></pre>\n\n<p>So suppose you have a getter like this: <code>String getName()</code></p>\n\n<p>You can't pass it to flatMap like this: </p>\n\n<p><code>opt.flatMap(Widget::getName) // Won't work!</code></p>\n\n<p>But you can pass it like this:</p>\n\n<p><code>opt.flatMap(optFun(Widget::getName)) // Works great!</code></p>\n\n<p>Outside of functional programming, Optionals should be avoided. </p>\n\n<p>Brian Goetz said it best when he said this:</p>\n\n<p>The reason Optional was added to Java is because this:</p>\n\n<pre><code>return Arrays.asList(enclosingInfo.getEnclosingClass().getDeclaredMethods())\n    .stream()\n    .filter(m -&gt; Objects.equals(m.getName(), enclosingInfo.getName())\n    .filter(m -&gt;  Arrays.equals(m.getParameterTypes(), parameterClasses))\n    .filter(m -&gt; Objects.equals(m.getReturnType(), returnType))\n    .findFirst()\n    .getOrThrow(() -&gt; new InternalError(...));\n</code></pre>\n\n<p>is cleaner than this:</p>\n\n<pre><code>Method matching =\n    Arrays.asList(enclosingInfo.getEnclosingClass().getDeclaredMethods())\n    .stream()\n    .filter(m -&gt; Objects.equals(m.getName(), enclosingInfo.getName())\n    .filter(m -&gt;  Arrays.equals(m.getParameterTypes(), parameterClasses))\n    .filter(m -&gt; Objects.equals(m.getReturnType(), returnType))\n    .getFirst();\nif (matching == null)\n  throw new InternalError(\"Enclosing method not found\");\nreturn matching;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":9938679,"reputation":121,"user_id":7356068,"display_name":"Xiaolong"},"down_vote_count":0,"up_vote_count":12,"is_accepted":false,"score":12,"last_activity_date":1550680392,"creation_date":1548895618,"answer_id":54451798,"question_id":31922866,"body_markdown":"Check out the JavaDoc in JDK10, https://docs.oracle.com/javase/10/docs/api/java/util/Optional.html, an API note is added:\r\n&gt;API Note:\r\n&gt;Optional is primarily intended for use as a method return type where there is a clear need to represent &quot;no result,&quot; and where using null is likely to cause errors.\r\n","title":"Why should Java 8&#39;s Optional not be used in arguments","body":"<p>Check out the JavaDoc in JDK10, <a href=\"https://docs.oracle.com/javase/10/docs/api/java/util/Optional.html\" rel=\"noreferrer\">https://docs.oracle.com/javase/10/docs/api/java/util/Optional.html</a>, an API note is added:</p>\n\n<blockquote>\n  <p>API Note:\n  Optional is primarily intended for use as a method return type where there is a clear need to represent \"no result,\" and where using null is likely to cause errors.</p>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":309636,"reputation":2999,"user_id":622192,"accept_rate":100,"display_name":"drew"},"down_vote_count":0,"up_vote_count":53,"is_accepted":false,"score":53,"last_activity_date":1595306798,"creation_date":1595306798,"answer_id":63007569,"question_id":31922866,"body_markdown":"Let&#39;s make something perfectly clear: in other languages, there is no general recommendation against the use of a Maybe type as a field type, a constructor parameter type, a method parameter type, or a function parameter type. \r\n\r\nSo if you &quot;shouldn&#39;t&quot; use Optional as a parameter type in Java, the reason is **specific** to Optional, to Java, or to both. \r\n\r\nReasoning that might apply to other Maybe types, or other languages, is probably not valid here.\r\n\r\nPer [Brian Goetz][1], \r\n\r\n&gt; [W]e did have a clear\r\n&gt; intention when adding [Optional], and it was not to be a general\r\n&gt; purpose Maybe type, as much as many people would have liked us to do\r\n&gt; so. Our intention was to provide a limited mechanism for library\r\n&gt; method return types where there needed to be a clear way to represent\r\n&gt; &quot;no result&quot;, and using null for such was overwhelmingly likely to\r\n&gt; cause errors.\r\n&gt; \r\n&gt; For example, you probably should never use it for something that\r\n&gt; returns an array of results, or a list of results; instead return an\r\n&gt; empty array or list. You should almost never use it as a field of\r\n&gt; something or a method parameter.\r\n\r\nSo the answer is specific to Optional: it isn&#39;t &quot;a general purpose Maybe type&quot;; as such, it is limited, and it may be limited in ways that limit its usefulness as a field type or a parameter type.\r\n\r\nThat said, in practice, I&#39;ve rarely found using Optional as a field type or a parameter type to be an issue. If Optional, despite its limitations, works as a parameter type or a field type for your use case, use it.\r\n\r\n  [1]: https://stackoverflow.com/a/26328555","title":"Why should Java 8&#39;s Optional not be used in arguments","body":"<p>Let's make something perfectly clear: in other languages, there is no general recommendation against the use of a Maybe type as a field type, a constructor parameter type, a method parameter type, or a function parameter type.</p>\n<p>So if you &quot;shouldn't&quot; use Optional as a parameter type in Java, the reason is <strong>specific</strong> to Optional, to Java, or to both.</p>\n<p>Reasoning that might apply to other Maybe types, or other languages, is probably not valid here.</p>\n<p>Per <a href=\"https://stackoverflow.com/a/26328555\">Brian Goetz</a>,</p>\n<blockquote>\n<p>[W]e did have a clear\nintention when adding [Optional], and it was not to be a general\npurpose Maybe type, as much as many people would have liked us to do\nso. Our intention was to provide a limited mechanism for library\nmethod return types where there needed to be a clear way to represent\n&quot;no result&quot;, and using null for such was overwhelmingly likely to\ncause errors.</p>\n<p>For example, you probably should never use it for something that\nreturns an array of results, or a list of results; instead return an\nempty array or list. You should almost never use it as a field of\nsomething or a method parameter.</p>\n</blockquote>\n<p>So the answer is specific to Optional: it isn't &quot;a general purpose Maybe type&quot;; as such, it is limited, and it may be limited in ways that limit its usefulness as a field type or a parameter type.</p>\n<p>That said, in practice, I've rarely found using Optional as a field type or a parameter type to be an issue. If Optional, despite its limitations, works as a parameter type or a field type for your use case, use it.</p>\n"},{"tags":[],"owner":{"account_id":999257,"reputation":2244,"user_id":1014479,"accept_rate":0,"display_name":"Dmitrii Semikin"},"down_vote_count":1,"up_vote_count":14,"is_accepted":false,"score":13,"last_activity_date":1610369020,"creation_date":1605028633,"answer_id":64773593,"question_id":31922866,"body_markdown":"Maybe I will provoke a bunch of down-votes and negative comments, but... I cannot stand.\r\n\r\nDisclaimer: what I write below is not really an answer to the original question, but rather my thoughts on the topic. And the only source for it is my thoughts and my experience (with Java and other languages).\r\n\r\nFirst let&#39;s check, why would anyone like to use Optional at all?\r\n\r\nFor me the reason is simple: unlike other languages java does not have built-in capability to define variable (or type) as nullable or not. All &quot;object&quot;-variables are nullable and all primitive-types are not. For the sake of simplicity let&#39;t not consider primitive types in further discussion, so I will claim simply that all variables are nullable.\r\n\r\nWhy would one need to declare variables as nullable/non-nullable? Well, the reason for me is: explicit is always better, than implicit. Besides having explicit decoration (e.g. annotation or type) could help static analyzer (or compiler) to catch some null-pointer related issues.\r\n\r\nMany people argue in the comments above, that functions do not need to have nullable arguments. Instead overloads should be used. But such statement is only good in a school-book. In real life there are different situations. Consider class, which represents settings of some system, or personal data of some user, or in fact any composite data-structure, which contains lots of fields - many of those with repeated types, and some of the fields are mandatory while others are optional. In such cases inheritance/constructor overloads do not really help.\r\n\r\nRandom example: Let&#39;s say, we need to collect data about people. But some people don&#39;t want to provide all the data. And of course this is POD, so basically type with value-semantics, so I want it to be more or less immutable (no setters).\r\n\r\n```\r\nclass PersonalData {\r\n    private final String name; // mandatory\r\n    private final int age; // mandatory\r\n    private final Address homeAddress; // optional\r\n    private final PhoneNumber phoneNumber; // optional. Dedicated class to handle constraints\r\n    private final BigDecimal income; // optional.\r\n    // ... further fields\r\n\r\n    // How many constructor- (or factory-) overloads do we need to handle all cases\r\n    // without nullable arguments? If I am not mistaken, 8. And what if we have more optional\r\n    // fields?\r\n\r\n    // ...\r\n}\r\n``` \r\n\r\nSo, IMO discussion above shows, that even though mostly we can survive without nullable arguments, but sometimes it is not really feasible.\r\n\r\nNow we come to the problem: if some of the arguments are nullable and others are not, how do we know, which one?\r\n\r\nApproach 1: All arguments are nullable (according to java standrd, except primitive types). So we check all of them.\r\n\r\nResult: code explodes with checks, which are mostly unneeded, because as we discussed above almost all of the time we can go ahead with nullable variables, and only in some rare cases &quot;nullables&quot; are needed.\r\n\r\nApproach 2: Use documentation and/or comments to describe, which arguments/fields are nullable and which not.\r\n\r\nResult: It does not really work. People are lazy to write and read the docs. Besides lately the trend is, that we should avoid writing documentation in favor of making the code itself self-describing. Besides all the reasoning about modifying the code and forgeting to modify the documentation is still valid.\r\n\r\nApproach 3: @Nullable @NonNull etc... I personally find them to be nice. But there are certain disadvantages : (e.g. they are only respected by external tools, not the compiler), the worst of which is that they are not standard, which means, that 1. I would need to add external dependency to my project to benefit from them, and 2. The way they are treated by different systems are not uniform. As far as I know, they were voted out of official Java standard (and I don&#39;t know if there are any plans to try again).\r\n\r\nApproach 4: Optional&lt;&gt;. The disadvantages are already mentioned in other comments, the worst of which is (IMO) performance penalty. Also it adds a bit of boilerplate, even thoough I personally find, use of Optional.empty() and Optional.of() to be not so bad. The advantages are obvious: \r\n\r\n1. It is part of the Java standard. \r\n2. It makes obvious to the reader of the code (or to the user of API), that these arguments may be null. Moreover, it forces both: user of the API and developer of the method to aknolage this fact by explicitly wrapping/unwrapping the values (which is not the case, when annotations like @Nullable etc. are used).\r\n\r\nSo in my point, there is no black-and-white in regard of any methodology including this one. I personally ended up with the following guidelines and conventions (which are still not strict rules):\r\n\r\n1. Inside my own code all the variables must be not-null (but probably Optional&lt;&gt;).\r\n2. If I have a method with one or two optional arguments I try to redesign it using overloads, inheritance etc.\r\n3. If I cannot find the solution in reasonable time, I start thinking, if the performance is critical (i.e. if there are millions of the objects to be processed). Usually it is not the case.\r\n4. If not, I use Optional as argument types and/or field types.\r\n\r\nThere are still grey areas, where these conventions do not work:\r\n - We need high performance (e.g. processing of huge amounts of data, so that total execution time is very large, or situations when throughput is critical). In this cases performance penalty introduced by Optional may be really unwanted.\r\n - We are on the boundary of the code, which we write ourselves, e.g.: we read from the DB, Rest Endpoint, parse file etc.\r\n - Or we just use some external libraries, which do not follow our conventions, so again, we should be careful...\r\n\r\nBy the way, the last two cases can also be the source of need in the optional fields/arguments. I.e. when the structure of the data is not developed by ourselves, but is imposed by some external interfaces, db-schemas etc...\r\n\r\nAt the end, I think, that one should think about the problem, which is being solved, and try to find the appropriate tools. If Optional&lt;&gt; is appropriate, then I see no reason not to use it.\r\n\r\n**Edit**: Approach 5: I used this one recently, when I could not use `Optional`. The idea is simply to use naming convention for method arguments and class variables. I used &quot;maybe&quot;-prefix, so that if e.g. &quot;url&quot; argument is nullable, then it becomes `maybeUrl`. The advantage is that it slightly improves understandability of the intent (and does not have disadvantages of other approaches, like external dependencies or performance penalty). But there are also drawbacks, like: there is no tooling to support this convention (your IDE will not show you any warning, if you access &quot;maybe&quot;-variable without first checking it). Another problem is that it only helps, when applied consistently by all people working on the project.\r\n\r\n","title":"Why should Java 8&#39;s Optional not be used in arguments","body":"<p>Maybe I will provoke a bunch of down-votes and negative comments, but... I cannot stand.</p>\n<p>Disclaimer: what I write below is not really an answer to the original question, but rather my thoughts on the topic. And the only source for it is my thoughts and my experience (with Java and other languages).</p>\n<p>First let's check, why would anyone like to use Optional at all?</p>\n<p>For me the reason is simple: unlike other languages java does not have built-in capability to define variable (or type) as nullable or not. All &quot;object&quot;-variables are nullable and all primitive-types are not. For the sake of simplicity let't not consider primitive types in further discussion, so I will claim simply that all variables are nullable.</p>\n<p>Why would one need to declare variables as nullable/non-nullable? Well, the reason for me is: explicit is always better, than implicit. Besides having explicit decoration (e.g. annotation or type) could help static analyzer (or compiler) to catch some null-pointer related issues.</p>\n<p>Many people argue in the comments above, that functions do not need to have nullable arguments. Instead overloads should be used. But such statement is only good in a school-book. In real life there are different situations. Consider class, which represents settings of some system, or personal data of some user, or in fact any composite data-structure, which contains lots of fields - many of those with repeated types, and some of the fields are mandatory while others are optional. In such cases inheritance/constructor overloads do not really help.</p>\n<p>Random example: Let's say, we need to collect data about people. But some people don't want to provide all the data. And of course this is POD, so basically type with value-semantics, so I want it to be more or less immutable (no setters).</p>\n<pre><code>class PersonalData {\n    private final String name; // mandatory\n    private final int age; // mandatory\n    private final Address homeAddress; // optional\n    private final PhoneNumber phoneNumber; // optional. Dedicated class to handle constraints\n    private final BigDecimal income; // optional.\n    // ... further fields\n\n    // How many constructor- (or factory-) overloads do we need to handle all cases\n    // without nullable arguments? If I am not mistaken, 8. And what if we have more optional\n    // fields?\n\n    // ...\n}\n</code></pre>\n<p>So, IMO discussion above shows, that even though mostly we can survive without nullable arguments, but sometimes it is not really feasible.</p>\n<p>Now we come to the problem: if some of the arguments are nullable and others are not, how do we know, which one?</p>\n<p>Approach 1: All arguments are nullable (according to java standrd, except primitive types). So we check all of them.</p>\n<p>Result: code explodes with checks, which are mostly unneeded, because as we discussed above almost all of the time we can go ahead with nullable variables, and only in some rare cases &quot;nullables&quot; are needed.</p>\n<p>Approach 2: Use documentation and/or comments to describe, which arguments/fields are nullable and which not.</p>\n<p>Result: It does not really work. People are lazy to write and read the docs. Besides lately the trend is, that we should avoid writing documentation in favor of making the code itself self-describing. Besides all the reasoning about modifying the code and forgeting to modify the documentation is still valid.</p>\n<p>Approach 3: @Nullable @NonNull etc... I personally find them to be nice. But there are certain disadvantages : (e.g. they are only respected by external tools, not the compiler), the worst of which is that they are not standard, which means, that 1. I would need to add external dependency to my project to benefit from them, and 2. The way they are treated by different systems are not uniform. As far as I know, they were voted out of official Java standard (and I don't know if there are any plans to try again).</p>\n<p>Approach 4: Optional&lt;&gt;. The disadvantages are already mentioned in other comments, the worst of which is (IMO) performance penalty. Also it adds a bit of boilerplate, even thoough I personally find, use of Optional.empty() and Optional.of() to be not so bad. The advantages are obvious:</p>\n<ol>\n<li>It is part of the Java standard.</li>\n<li>It makes obvious to the reader of the code (or to the user of API), that these arguments may be null. Moreover, it forces both: user of the API and developer of the method to aknolage this fact by explicitly wrapping/unwrapping the values (which is not the case, when annotations like @Nullable etc. are used).</li>\n</ol>\n<p>So in my point, there is no black-and-white in regard of any methodology including this one. I personally ended up with the following guidelines and conventions (which are still not strict rules):</p>\n<ol>\n<li>Inside my own code all the variables must be not-null (but probably Optional&lt;&gt;).</li>\n<li>If I have a method with one or two optional arguments I try to redesign it using overloads, inheritance etc.</li>\n<li>If I cannot find the solution in reasonable time, I start thinking, if the performance is critical (i.e. if there are millions of the objects to be processed). Usually it is not the case.</li>\n<li>If not, I use Optional as argument types and/or field types.</li>\n</ol>\n<p>There are still grey areas, where these conventions do not work:</p>\n<ul>\n<li>We need high performance (e.g. processing of huge amounts of data, so that total execution time is very large, or situations when throughput is critical). In this cases performance penalty introduced by Optional may be really unwanted.</li>\n<li>We are on the boundary of the code, which we write ourselves, e.g.: we read from the DB, Rest Endpoint, parse file etc.</li>\n<li>Or we just use some external libraries, which do not follow our conventions, so again, we should be careful...</li>\n</ul>\n<p>By the way, the last two cases can also be the source of need in the optional fields/arguments. I.e. when the structure of the data is not developed by ourselves, but is imposed by some external interfaces, db-schemas etc...</p>\n<p>At the end, I think, that one should think about the problem, which is being solved, and try to find the appropriate tools. If Optional&lt;&gt; is appropriate, then I see no reason not to use it.</p>\n<p><strong>Edit</strong>: Approach 5: I used this one recently, when I could not use <code>Optional</code>. The idea is simply to use naming convention for method arguments and class variables. I used &quot;maybe&quot;-prefix, so that if e.g. &quot;url&quot; argument is nullable, then it becomes <code>maybeUrl</code>. The advantage is that it slightly improves understandability of the intent (and does not have disadvantages of other approaches, like external dependencies or performance penalty). But there are also drawbacks, like: there is no tooling to support this convention (your IDE will not show you any warning, if you access &quot;maybe&quot;-variable without first checking it). Another problem is that it only helps, when applied consistently by all people working on the project.</p>\n"},{"tags":[],"owner":{"account_id":21861740,"reputation":21,"user_id":16152472,"display_name":"low_key"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1623059711,"creation_date":1623059711,"answer_id":67869531,"question_id":31922866,"body_markdown":"Using Optional as parameters might be useful in some use cases which involves protobufs or setting fields in a configuration object.\r\n\r\n```\r\npublic void setParameters(Optional&lt;A&gt; op1, Optional&lt;B&gt; op2) {\r\n    ProtoRequest.Builder builder = ProtoRequest.newBuilder();\r\n    op1.ifPresent(builder::setOp1);\r\n    op2.ifPresent(builder::setOp2);\r\n...\r\n}\r\n```\r\n\r\nI think in such cases it might be useful to have optional as parameters. API receiving the proto request would handle the different fields. \r\nIf a function is not doing additional computations on these parameters then using Optional might be simpler.\r\n\r\n```\r\npublic void setParameters(A op1, B op2) {\r\n    ProtoRequest.Builder builder = ProtoRequest.newBuilder();\r\n    if (op1 != null) {\r\n        builder.setOp1(op1);\r\n    }\r\n    if (op2 != null) {\r\n        builder.setOp2(op2);\r\n    }\r\n...\r\n}\r\n```\r\n","title":"Why should Java 8&#39;s Optional not be used in arguments","body":"<p>Using Optional as parameters might be useful in some use cases which involves protobufs or setting fields in a configuration object.</p>\n<pre><code>public void setParameters(Optional&lt;A&gt; op1, Optional&lt;B&gt; op2) {\n    ProtoRequest.Builder builder = ProtoRequest.newBuilder();\n    op1.ifPresent(builder::setOp1);\n    op2.ifPresent(builder::setOp2);\n...\n}\n</code></pre>\n<p>I think in such cases it might be useful to have optional as parameters. API receiving the proto request would handle the different fields.\nIf a function is not doing additional computations on these parameters then using Optional might be simpler.</p>\n<pre><code>public void setParameters(A op1, B op2) {\n    ProtoRequest.Builder builder = ProtoRequest.newBuilder();\n    if (op1 != null) {\n        builder.setOp1(op1);\n    }\n    if (op2 != null) {\n        builder.setOp2(op2);\n    }\n...\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3142408,"reputation":1,"user_id":2657616,"accept_rate":78,"display_name":"Ali"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1642659943,"creation_date":1642659599,"answer_id":70781610,"question_id":31922866,"body_markdown":"Irrespective of Java 8, Use old school method overloading technique to bring clarity and flexibility, suppose you have following method with two args\r\n\r\n    public void doSomething(arg1,arg2);\r\n\r\nin case you want to add additional optional parameter then overload the method\r\n\r\n    public void doSomething(arg1,arg2,arg3) {\r\n    Result result = doSomething(arg1,arg2);\r\n    // do additional working\r\n    }\r\n\r\n\r\n\r\n","title":"Why should Java 8&#39;s Optional not be used in arguments","body":"<p>Irrespective of Java 8, Use old school method overloading technique to bring clarity and flexibility, suppose you have following method with two args</p>\n<pre><code>public void doSomething(arg1,arg2);\n</code></pre>\n<p>in case you want to add additional optional parameter then overload the method</p>\n<pre><code>public void doSomething(arg1,arg2,arg3) {\nResult result = doSomething(arg1,arg2);\n// do additional working\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1429890,"reputation":6439,"user_id":1352530,"accept_rate":75,"display_name":"Whimusical"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1644084011,"creation_date":1644084011,"answer_id":71000694,"question_id":31922866,"body_markdown":"A good example were Optional as arguments would be nice is JPA Repositories. Id love to do something like findByNameAndSurname(Optional&lt;String&gt;,Optional&lt;String&gt;). That way, if the Optional is empty, no WHERE param=y is performed","title":"Why should Java 8&#39;s Optional not be used in arguments","body":"<p>A good example were Optional as arguments would be nice is JPA Repositories. Id love to do something like findByNameAndSurname(Optional,Optional). That way, if the Optional is empty, no WHERE param=y is performed</p>\n"},{"tags":[],"owner":{"account_id":404649,"reputation":57172,"user_id":773113,"accept_rate":72,"display_name":"Mike Nakis"},"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1679386443,"creation_date":1675500203,"answer_id":75343920,"question_id":31922866,"body_markdown":"So, if you would permit the pun, Oracle issued an oracle: \r\n\r\n&gt; Thou shalt not use `Optional` but for function return values.\r\n\r\nI love it how most of the answers so far are going along with the narrative of Oracle&#39;s oracle, which is re-iterated unquestioned all over the interwebz, in the &quot;many Web sites&quot; mentioned in the question. This is very typical of stack overflow: if something is allegedly supposed to be a certain way, and you ask why it is supposed to be that way, almost everyone will offer reasons why; almost nobody will question whether it should in fact be that way. \r\n\r\nSo, here is a dissenting opinion:\r\n\r\n&gt; You can completely eliminate `null` from your code base by using `Optional` ***everywhere***: not only in function return values, but also in function parameters, in class members, in array members, even in local variables.\r\n\r\nI have done it in a 100k-lines-of-code project. It worked.\r\n\r\nIf you decide to go along this path, then you will need to be thorough, so you will have a lot of work to do. The example mentioned in the accepted answer with `Optional.ofNulable()` should never occur, because if you are thorough, then you should not have `null` anywhere, and therefore no need for `Optional.ofNullable()`. In that 100k-lines-of-code project that I mentioned above, I have only used `Optional.ofNullable()` a couple of times when receiving results from external methods that I have no control over.\r\n\r\nNow, if you decide to go along this path, your solution will not be the most performant solution possible, because you will be allocating lots of instances of `Optional`. However:\r\n\r\n1. It is nothing but a runtime performance disadvantage.\r\n1. Although the disadvantage is non-negligible, it is also not severe.\r\n1. It is Java&#39;s problem, not your problem. \r\n\r\nLet me explain that last bit.\r\n\r\nJava does not offer explicit nullability of reference types as C# does (since version 8.0) so it is inferior in this regard. (I said &quot;in this regard&quot;; in other regards, Java is better; but that&#39;s off-topic right now.)\r\n\r\nThe only proper alternative to explicit nullability of reference types is the `Optional` type. (And it is arguably even slightly better, because with `Optional` you can indicate optional-of-optional if you must, whereas with explicit nullability you cannot have `ReferenceType??`, or at least you cannot in C# as it is currently implemented.)\r\n\r\n`Optional` does not *have to* add overhead, it only does so in Java. That&#39;s because Java also does not support true value types, as C# and Scala do. In this regard, Java is severely inferior to those languages. (Again, I said &quot;in this regard&quot;; in other regards, Java is better; but that&#39;s off-topic right now.) If Java did support true value types, then `Optional` would have been implemented as a single machine word, which would mean that the runtime overhead of using it would be zero. \r\n\r\nSo, the question that it ultimately boils down to is: \r\n\r\nDo you want perfect clarity and type safety in your code, or do you prefer maximum performance? \r\n\r\nI believe that for high-level languages, (of which Java certainly aims to be one,) this question was settled a long time ago.","title":"Why should Java 8&#39;s Optional not be used in arguments","body":"<p>So, if you would permit the pun, Oracle issued an oracle:</p>\n<blockquote>\n<p>Thou shalt not use <code>Optional</code> but for function return values.</p>\n</blockquote>\n<p>I love it how most of the answers so far are going along with the narrative of Oracle's oracle, which is re-iterated unquestioned all over the interwebz, in the &quot;many Web sites&quot; mentioned in the question. This is very typical of stack overflow: if something is allegedly supposed to be a certain way, and you ask why it is supposed to be that way, almost everyone will offer reasons why; almost nobody will question whether it should in fact be that way.</p>\n<p>So, here is a dissenting opinion:</p>\n<blockquote>\n<p>You can completely eliminate <code>null</code> from your code base by using <code>Optional</code> <em><strong>everywhere</strong></em>: not only in function return values, but also in function parameters, in class members, in array members, even in local variables.</p>\n</blockquote>\n<p>I have done it in a 100k-lines-of-code project. It worked.</p>\n<p>If you decide to go along this path, then you will need to be thorough, so you will have a lot of work to do. The example mentioned in the accepted answer with <code>Optional.ofNulable()</code> should never occur, because if you are thorough, then you should not have <code>null</code> anywhere, and therefore no need for <code>Optional.ofNullable()</code>. In that 100k-lines-of-code project that I mentioned above, I have only used <code>Optional.ofNullable()</code> a couple of times when receiving results from external methods that I have no control over.</p>\n<p>Now, if you decide to go along this path, your solution will not be the most performant solution possible, because you will be allocating lots of instances of <code>Optional</code>. However:</p>\n<ol>\n<li>It is nothing but a runtime performance disadvantage.</li>\n<li>Although the disadvantage is non-negligible, it is also not severe.</li>\n<li>It is Java's problem, not your problem.</li>\n</ol>\n<p>Let me explain that last bit.</p>\n<p>Java does not offer explicit nullability of reference types as C# does (since version 8.0) so it is inferior in this regard. (I said &quot;in this regard&quot;; in other regards, Java is better; but that's off-topic right now.)</p>\n<p>The only proper alternative to explicit nullability of reference types is the <code>Optional</code> type. (And it is arguably even slightly better, because with <code>Optional</code> you can indicate optional-of-optional if you must, whereas with explicit nullability you cannot have <code>ReferenceType??</code>, or at least you cannot in C# as it is currently implemented.)</p>\n<p><code>Optional</code> does not <em>have to</em> add overhead, it only does so in Java. That's because Java also does not support true value types, as C# and Scala do. In this regard, Java is severely inferior to those languages. (Again, I said &quot;in this regard&quot;; in other regards, Java is better; but that's off-topic right now.) If Java did support true value types, then <code>Optional</code> would have been implemented as a single machine word, which would mean that the runtime overhead of using it would be zero.</p>\n<p>So, the question that it ultimately boils down to is:</p>\n<p>Do you want perfect clarity and type safety in your code, or do you prefer maximum performance?</p>\n<p>I believe that for high-level languages, (of which Java certainly aims to be one,) this question was settled a long time ago.</p>\n"},{"tags":[],"owner":{"account_id":5533119,"reputation":7118,"user_id":5771750,"accept_rate":85,"display_name":"Chris Happy"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1682117138,"creation_date":1682117138,"answer_id":76077167,"question_id":31922866,"body_markdown":"## If wanting an optional primitive type, just use the primitive&#39;s class.\r\n\r\nFor those coming from a C++ background and got confused.\r\n\r\nE.g. for an optional `boolean`, use `Boolean`.\r\n\r\nThe biggest problem is that `Optional&lt;Boolean&gt;` itself could be set to null, so now you have three states instead of two.\r\n\r\nE.g. `Optional&lt;Boolean&gt;` can be (null, empty, or not-empty) but `Boolean` can only be (null or non-empty).","title":"Why should Java 8&#39;s Optional not be used in arguments","body":"<h2>If wanting an optional primitive type, just use the primitive's class.</h2>\n<p>For those coming from a C++ background and got confused.</p>\n<p>E.g. for an optional <code>boolean</code>, use <code>Boolean</code>.</p>\n<p>The biggest problem is that <code>Optional&lt;Boolean&gt;</code> itself could be set to null, so now you have three states instead of two.</p>\n<p>E.g. <code>Optional&lt;Boolean&gt;</code> can be (null, empty, or not-empty) but <code>Boolean</code> can only be (null or non-empty).</p>\n"},{"tags":[],"owner":{"account_id":3161504,"reputation":936,"user_id":2672500,"display_name":"Jean Spector"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1682353876,"creation_date":1682353876,"answer_id":76094093,"question_id":31922866,"body_markdown":"I noticed that you mentioned a a number of approaches, and during the years since the question was asked, one alternative wasn&#39;t really explored - the `Builder` design pattern.\r\n\r\nThe idea is that with a builder you only set those parameters that you need, and it scales very well as the number of arguments grows (as opposed to overloading).\r\n\r\nHere&#39;s an example of a class you could use:\r\n\r\n```\r\npublic class Something {\r\n    private String p1;\r\n    private Integer p2;\r\n\r\n    private Something(String p1, Integer p2) {\r\n        this.p1 = p1;\r\n        this.p2 = p2;\r\n    }\r\n\r\n    public static class Builder {\r\n\r\n        private String p1;\r\n        private Integer p2;\r\n\r\n        public Builder setP1(String value) {\r\n            this.p1 = value;\r\n            return this;\r\n        }\r\n\r\n        public Builder setP2(Integer value) {\r\n            this.p2 = value;\r\n            return this;\r\n        }\r\n\r\n        public Something build() {\r\n            // Validate input and set defaults here\r\n\r\n            return new Something(p1, p2);\r\n        }\r\n    }\r\n}\r\n```\r\n\r\nHere&#39;s how you&#39;d use it:\r\n```\r\nvar something = Something.Builder().setP1(&quot;blah&quot;).setP2(12345).build();\r\ncalculate(something); // or something.calculate()\r\n```\r\n\r\nNow you may notice that the above implementation contains a fair amount of boilerplate code, which is its main downside. Having said that, there are libraries that eliminate it for you, e.g. [FreeBuilder](https://www.baeldung.com/java-builder-pattern-freebuilder), making the code short and tidy (relatively speaking - Java isn&#39;t known for its code compactness).","title":"Why should Java 8&#39;s Optional not be used in arguments","body":"<p>I noticed that you mentioned a a number of approaches, and during the years since the question was asked, one alternative wasn't really explored - the <code>Builder</code> design pattern.</p>\n<p>The idea is that with a builder you only set those parameters that you need, and it scales very well as the number of arguments grows (as opposed to overloading).</p>\n<p>Here's an example of a class you could use:</p>\n<pre><code>public class Something {\n    private String p1;\n    private Integer p2;\n\n    private Something(String p1, Integer p2) {\n        this.p1 = p1;\n        this.p2 = p2;\n    }\n\n    public static class Builder {\n\n        private String p1;\n        private Integer p2;\n\n        public Builder setP1(String value) {\n            this.p1 = value;\n            return this;\n        }\n\n        public Builder setP2(Integer value) {\n            this.p2 = value;\n            return this;\n        }\n\n        public Something build() {\n            // Validate input and set defaults here\n\n            return new Something(p1, p2);\n        }\n    }\n}\n</code></pre>\n<p>Here's how you'd use it:</p>\n<pre><code>var something = Something.Builder().setP1(&quot;blah&quot;).setP2(12345).build();\ncalculate(something); // or something.calculate()\n</code></pre>\n<p>Now you may notice that the above implementation contains a fair amount of boilerplate code, which is its main downside. Having said that, there are libraries that eliminate it for you, e.g. <a href=\"https://www.baeldung.com/java-builder-pattern-freebuilder\" rel=\"nofollow noreferrer\">FreeBuilder</a>, making the code short and tidy (relatively speaking - Java isn't known for its code compactness).</p>\n"}],"owner":{"account_id":4858495,"reputation":6835,"user_id":3918862,"display_name":"Neil Stevens"},"comment_count":9,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":303825,"favorite_count":0,"down_vote_count":0,"up_vote_count":641,"accepted_answer_id":31923105,"answer_count":26,"score":641,"last_activity_date":1682353876,"creation_date":1439218680,"question_id":31922866,"body_markdown":"I&#39;ve read on many Web sites Optional should be used as a return type only, and not used in method arguments.  I&#39;m struggling to find a logical reason why.  For example I have a piece of logic which has 2 optional parameters.  Therefore I think it would make sense to write my method signature like this (solution 1):\r\n\r\n    public int calculateSomething(Optional&lt;String&gt; p1, Optional&lt;BigDecimal&gt; p2) {\r\n        // my logic\r\n    }\r\n\t\r\nMany web pages specify Optional should not be used as method arguments. With this in mind, I could use the following method signature and add a clear Javadoc comment to specify that the arguments may be null, hoping future maintainers will read the Javadoc and therefore always carry out null checks prior to using the arguments (solution 2):\r\n\r\n    public int calculateSomething(String p1, BigDecimal p2) {\r\n        // my logic\r\n    }\r\n\t\r\nAlternatively I could replace my method with four public methods to provide a nicer interface and make it more obvious p1 and p2 are optional (solution 3):\r\n\r\n    public int calculateSomething() {\r\n        calculateSomething(null, null);\r\n    }\r\n    \r\n    public int calculateSomething(String p1) {\r\n        calculateSomething(p1, null);\r\n    }\r\n\t\r\n    public int calculateSomething(BigDecimal p2) {\r\n        calculateSomething(null, p2);\r\n    }\r\n\t\r\n    public int calculateSomething(String p1, BigDecimal p2) {\r\n        // my logic\r\n    }\r\n\r\nNow I try writing the code of the class which invokes this piece of logic for each approach.  I first retrieve the two input parameters from another object which returns ``Optional``s and then, I invoke ``calculateSomething``.  Therefore, if solution 1 is used the calling code would look like this:\r\n\r\n    Optional&lt;String&gt; p1 = otherObject.getP1();\r\n    Optional&lt;BigInteger&gt; p2 = otherObject.getP2();\r\n    int result = myObject.calculateSomething(p1, p2);\r\n\t\r\nif solution 2 is used, the calling code would look like this:\r\n\r\n    Optional&lt;String&gt; p1 = otherObject.getP1();\r\n    Optional&lt;BigInteger&gt; p2 = otherObject.getP2();\r\n    int result = myObject.calculateSomething(p1.orElse(null), p2.orElse(null));\r\n\t\r\nif solution 3 is applied, I could use the code above or I could use the following (but it&#39;s significantly more code):\r\n\r\n    Optional&lt;String&gt; p1 = otherObject.getP1();\r\n    Optional&lt;BigInteger&gt; p2 = otherObject.getP2();\r\n    int result;\r\n    if (p1.isPresent()) {\r\n        if (p2.isPresent()) {\r\n            result = myObject.calculateSomething(p1, p2);\r\n        } else {\r\n            result = myObject.calculateSomething(p1);\r\n        }\r\n    } else {\r\n        if (p2.isPresent()) {\r\n            result = myObject.calculateSomething(p2);\r\n        } else {\r\n            result = myObject.calculateSomething();\r\n        }\r\n    }\r\n\t\r\n**So my question is: Why is it considered bad practice to use ``Optional``s as method arguments (see solution 1)?**  It looks like the most readable solution to me and makes it most obvious that the parameters could be empty/null to future maintainers.  (I&#39;m aware the designers of ``Optional`` intended it to only be used as a return type, but I can&#39;t find any logical reasons not to use it in this scenario).","title":"Why should Java 8&#39;s Optional not be used in arguments","body":"<p>I've read on many Web sites Optional should be used as a return type only, and not used in method arguments.  I'm struggling to find a logical reason why.  For example I have a piece of logic which has 2 optional parameters.  Therefore I think it would make sense to write my method signature like this (solution 1):</p>\n<pre><code>public int calculateSomething(Optional&lt;String&gt; p1, Optional&lt;BigDecimal&gt; p2) {\n    // my logic\n}\n</code></pre>\n<p>Many web pages specify Optional should not be used as method arguments. With this in mind, I could use the following method signature and add a clear Javadoc comment to specify that the arguments may be null, hoping future maintainers will read the Javadoc and therefore always carry out null checks prior to using the arguments (solution 2):</p>\n<pre><code>public int calculateSomething(String p1, BigDecimal p2) {\n    // my logic\n}\n</code></pre>\n<p>Alternatively I could replace my method with four public methods to provide a nicer interface and make it more obvious p1 and p2 are optional (solution 3):</p>\n<pre><code>public int calculateSomething() {\n    calculateSomething(null, null);\n}\n\npublic int calculateSomething(String p1) {\n    calculateSomething(p1, null);\n}\n\npublic int calculateSomething(BigDecimal p2) {\n    calculateSomething(null, p2);\n}\n\npublic int calculateSomething(String p1, BigDecimal p2) {\n    // my logic\n}\n</code></pre>\n<p>Now I try writing the code of the class which invokes this piece of logic for each approach.  I first retrieve the two input parameters from another object which returns <code>Optional</code>s and then, I invoke <code>calculateSomething</code>.  Therefore, if solution 1 is used the calling code would look like this:</p>\n<pre><code>Optional&lt;String&gt; p1 = otherObject.getP1();\nOptional&lt;BigInteger&gt; p2 = otherObject.getP2();\nint result = myObject.calculateSomething(p1, p2);\n</code></pre>\n<p>if solution 2 is used, the calling code would look like this:</p>\n<pre><code>Optional&lt;String&gt; p1 = otherObject.getP1();\nOptional&lt;BigInteger&gt; p2 = otherObject.getP2();\nint result = myObject.calculateSomething(p1.orElse(null), p2.orElse(null));\n</code></pre>\n<p>if solution 3 is applied, I could use the code above or I could use the following (but it's significantly more code):</p>\n<pre><code>Optional&lt;String&gt; p1 = otherObject.getP1();\nOptional&lt;BigInteger&gt; p2 = otherObject.getP2();\nint result;\nif (p1.isPresent()) {\n    if (p2.isPresent()) {\n        result = myObject.calculateSomething(p1, p2);\n    } else {\n        result = myObject.calculateSomething(p1);\n    }\n} else {\n    if (p2.isPresent()) {\n        result = myObject.calculateSomething(p2);\n    } else {\n        result = myObject.calculateSomething();\n    }\n}\n</code></pre>\n<p><strong>So my question is: Why is it considered bad practice to use <code>Optional</code>s as method arguments (see solution 1)?</strong>  It looks like the most readable solution to me and makes it most obvious that the parameters could be empty/null to future maintainers.  (I'm aware the designers of <code>Optional</code> intended it to only be used as a return type, but I can't find any logical reasons not to use it in this scenario).</p>\n"},{"tags":["java","docker","docker-compose","rabbitmq"],"comments":[{"owner":{"account_id":1912742,"reputation":15070,"user_id":1726083,"display_name":"erik258"},"score":0,"creation_date":1682353955,"post_id":76094022,"comment_id":134198292,"body_markdown":"&quot;factory.setPort(5673);&quot; you sure that&#39;s the correct port?  [Normally](https://www.rabbitmq.com/networking.html) it would be 5672 but you can configure rabbit to listen on something else.  make sure they both match. Connection refused means you could reach the server but it&#39;s not listening on that port","body":"&quot;factory.setPort(5673);&quot; you sure that&#39;s the correct port?  <a href=\"https://www.rabbitmq.com/networking.html\" rel=\"nofollow noreferrer\">Normally</a> it would be 5672 but you can configure rabbit to listen on something else.  make sure they both match. Connection refused means you could reach the server but it&#39;s not listening on that port"},{"owner":{"account_id":213468,"reputation":103486,"user_id":466862,"display_name":"Mark Rotteveel"},"score":1,"creation_date":1682354400,"post_id":76094022,"comment_id":134198395,"body_markdown":"To communicate between docker containers, you use the original port of the image, not the rebound port, that is you need to use port 5672, not 5673.","body":"To communicate between docker containers, you use the original port of the image, not the rebound port, that is you need to use port 5672, not 5673."}],"owner":{"account_id":11475744,"reputation":205,"user_id":8411319,"display_name":"Radu Aramă"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":226,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1682353440,"creation_date":1682353440,"question_id":76094022,"body_markdown":"I have a Java container which has to fetch messages from a RabbitMQ container. This is the code I am using in order to connect to it (I have:\r\n\r\n    ConnectionFactory factory = new ConnectionFactory();\r\n        factory.setHost(&quot;rabbit2&quot;);\r\n        factory.setPort(5673);\r\n        factory.setUsername(&quot;guest&quot;);\r\n        factory.setPassword(&quot;guest&quot;);\r\n    \r\n        log.info(&quot;Got here!&quot;);\r\n    \r\n        Connection connection = null;\r\n    \r\n        try {\r\n          connection = factory.newConnection(&quot;Connection1&quot;);\r\n        } catch (Exception e) {\r\n          log.error(e.getMessage(), e);\r\n          throw e;\r\n        }\r\n\r\nThis is the library I am using:\r\n\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;com.rabbitmq&lt;/groupId&gt;\r\n                &lt;artifactId&gt;amqp-client&lt;/artifactId&gt;\r\n                &lt;version&gt;4.0.0&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n\r\n\r\nThe hostname of the rabbitmq container was configured to be rabbit2. I am using docker compose.\r\nThis is the config for the rabbit mq instance:\r\n\r\n    output_mb:\r\n        image: rabbitmq:3-management\r\n        hostname: rabbit2\r\n        container_name: output_mb\r\n        ports:\r\n            - 5673:5672\r\n            - 15673:15672\r\n        volumes:\r\n            - &quot;./output_mb/rabbitmq.config:/etc/rabbitmq/rabbitmq.config&quot;\r\n            - &quot;./output_mb/definitions.json:/etc/rabbitmq/definitions.json&quot;\r\n        networks:\r\n            - common_network\r\n\r\nAnd this is the config for the java instance:\r\n\r\n    pollution_dashboard:\r\n        container_name: pollution_dashboard\r\n        image: pollution_dashboard:latest\r\n        restart: on-failure\r\n        hostname: pollution_dashboard\r\n        depends_on:\r\n            - input_mb\r\n            - output_mb\r\n        ports:\r\n            - 8080:8080\r\n        build:\r\n            context: ./pollution_dashboard/pollution_dashboard\r\n            dockerfile: ./Dockerfile\r\n        networks:\r\n            - common_network\r\n\r\nHowever, I keep getting **Connection refused** in my java service when I run my docker compose. There are other services in the stack as well that do not have issues communicating with the rabbitmq instance. (They are using other languages)\r\n\r\nWhat could be the problem?","title":"Connection refused when trying to connect to RabbitMQ docker container from Java docker container","body":"<p>I have a Java container which has to fetch messages from a RabbitMQ container. This is the code I am using in order to connect to it (I have:</p>\n<pre><code>ConnectionFactory factory = new ConnectionFactory();\n    factory.setHost(&quot;rabbit2&quot;);\n    factory.setPort(5673);\n    factory.setUsername(&quot;guest&quot;);\n    factory.setPassword(&quot;guest&quot;);\n\n    log.info(&quot;Got here!&quot;);\n\n    Connection connection = null;\n\n    try {\n      connection = factory.newConnection(&quot;Connection1&quot;);\n    } catch (Exception e) {\n      log.error(e.getMessage(), e);\n      throw e;\n    }\n</code></pre>\n<p>This is the library I am using:</p>\n<pre><code>        &lt;dependency&gt;\n            &lt;groupId&gt;com.rabbitmq&lt;/groupId&gt;\n            &lt;artifactId&gt;amqp-client&lt;/artifactId&gt;\n            &lt;version&gt;4.0.0&lt;/version&gt;\n        &lt;/dependency&gt;\n</code></pre>\n<p>The hostname of the rabbitmq container was configured to be rabbit2. I am using docker compose.\nThis is the config for the rabbit mq instance:</p>\n<pre><code>output_mb:\n    image: rabbitmq:3-management\n    hostname: rabbit2\n    container_name: output_mb\n    ports:\n        - 5673:5672\n        - 15673:15672\n    volumes:\n        - &quot;./output_mb/rabbitmq.config:/etc/rabbitmq/rabbitmq.config&quot;\n        - &quot;./output_mb/definitions.json:/etc/rabbitmq/definitions.json&quot;\n    networks:\n        - common_network\n</code></pre>\n<p>And this is the config for the java instance:</p>\n<pre><code>pollution_dashboard:\n    container_name: pollution_dashboard\n    image: pollution_dashboard:latest\n    restart: on-failure\n    hostname: pollution_dashboard\n    depends_on:\n        - input_mb\n        - output_mb\n    ports:\n        - 8080:8080\n    build:\n        context: ./pollution_dashboard/pollution_dashboard\n        dockerfile: ./Dockerfile\n    networks:\n        - common_network\n</code></pre>\n<p>However, I keep getting <strong>Connection refused</strong> in my java service when I run my docker compose. There are other services in the stack as well that do not have issues communicating with the rabbitmq instance. (They are using other languages)</p>\n<p>What could be the problem?</p>\n"},{"tags":["java","activemq"],"comments":[{"owner":{"account_id":12201936,"reputation":414,"user_id":8906016,"display_name":"canillas"},"score":0,"creation_date":1517220428,"post_id":48498559,"comment_id":83990511,"body_markdown":"What about use `.values()`to get an array of all the enum constants? then you can do `myArray.get(myArray.size())`","body":"What about use <code>.values()</code>to get an array of all the enum constants? then you can do <code>myArray.get(myArray.size())</code>"},{"owner":{"account_id":6408735,"reputation":1656,"user_id":4969121,"accept_rate":58,"display_name":"Abhijeet Kale"},"score":0,"creation_date":1517220681,"post_id":48498559,"comment_id":83990705,"body_markdown":"@canillas Enumeration interface is different that Enum, Enumeration is similar to iterator. Enumeration does not have constants/values it iterates on a datastructure.","body":"@canillas Enumeration interface is different that Enum, Enumeration is similar to iterator. Enumeration does not have constants/values it iterates on a datastructure."}],"answers":[{"tags":[],"owner":{"account_id":8694271,"reputation":3895,"user_id":6506229,"display_name":"Hassen Bennour"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1517221514,"creation_date":1517221514,"answer_id":48499018,"question_id":48498559,"body_markdown":"is JMX possible ??\r\nsee below example, you can order the messages as you want after loading them into a list.\r\n\r\n\r\n\r\n    import java.util.HashMap;\r\n    import java.util.List;\r\n    import java.util.Map;\r\n    \r\n    import javax.management.MBeanServerConnection;\r\n    import javax.management.MBeanServerInvocationHandler;\r\n    import javax.management.ObjectName;\r\n    import javax.management.remote.JMXConnector;\r\n    import javax.management.remote.JMXConnectorFactory;\r\n    import javax.management.remote.JMXServiceURL;\r\n    \r\n    import org.apache.activemq.broker.jmx.BrokerViewMBean;\r\n    import org.apache.activemq.broker.jmx.QueueViewMBean;\r\n    \r\n    public class JMXGetDestinationInfos {\r\n    \r\n    \tpublic static void main(String[] args) throws Exception {\r\n    \t\tJMXServiceURL url = new JMXServiceURL(&quot;service:jmx:rmi:///jndi/rmi://host:1099/jmxrmi&quot;);\r\n    \t\tMap&lt;String, String[]&gt; env = new HashMap&lt;&gt;();\r\n    \t\tString[] creds = { &quot;admin&quot;, &quot;admin&quot; };\r\n    \t\tenv.put(JMXConnector.CREDENTIALS, creds);\r\n    \t\tJMXConnector jmxc = JMXConnectorFactory.connect(url, env);\r\n    \t\tMBeanServerConnection conn = jmxc.getMBeanServerConnection();\r\n    \r\n    \t\tObjectName activeMq = new ObjectName(&quot;org.apache.activemq:type=Broker,brokerName=localhost&quot;);\r\n    \r\n    \t\tBrokerViewMBean mbean = MBeanServerInvocationHandler.newProxyInstance(conn, activeMq, BrokerViewMBean.class,\r\n    \t\t\t\ttrue);\r\n    \t\tfor (ObjectName name : mbean.getQueues()) {\r\n    \t\t\tif ((&quot;TEST&quot;.equals(name.getKeyProperty(&quot;destinationName&quot;)))) {\r\n    \t\t\t\tQueueViewMBean queueMbean = MBeanServerInvocationHandler.newProxyInstance(conn, name,\r\n    \t\t\t\t\t\tQueueViewMBean.class, true);\r\n    \t\t\t\tList&lt;?&gt; messages = queueMbean.browseMessages();\r\n    \t\t\t\tSystem.out.println(messages.get(messages.size() -1));\r\n    \t\t\t\t\r\n    \t\t\t\tSystem.out.println(queueMbean.browseAsTable());\r\n    \t\t\t\tSystem.out.println(queueMbean.browseMessages());\r\n    \t\t\t}\r\n    \t\t}\r\n    \t}\r\n    }\r\n\r\nanother option if your counter is always available and connected is to use http://activemq.apache.org/advisory-message.html\r\n\r\n\r\n&gt; ActiveMQ.Advisory.MessageDelivered.Queue Message delivered to the\r\n&gt; broker.\r\n&gt; \r\n&gt; ActiveMQ.Advisory.MessageDelivered.Topic Message delivered to the\r\n&gt; broker.","title":"Get Last Inserted Message in ActiveMQ - Java","body":"<p>is JMX possible ??\nsee below example, you can order the messages as you want after loading them into a list.</p>\n\n<pre><code>import java.util.HashMap;\nimport java.util.List;\nimport java.util.Map;\n\nimport javax.management.MBeanServerConnection;\nimport javax.management.MBeanServerInvocationHandler;\nimport javax.management.ObjectName;\nimport javax.management.remote.JMXConnector;\nimport javax.management.remote.JMXConnectorFactory;\nimport javax.management.remote.JMXServiceURL;\n\nimport org.apache.activemq.broker.jmx.BrokerViewMBean;\nimport org.apache.activemq.broker.jmx.QueueViewMBean;\n\npublic class JMXGetDestinationInfos {\n\n    public static void main(String[] args) throws Exception {\n        JMXServiceURL url = new JMXServiceURL(\"service:jmx:rmi:///jndi/rmi://host:1099/jmxrmi\");\n        Map&lt;String, String[]&gt; env = new HashMap&lt;&gt;();\n        String[] creds = { \"admin\", \"admin\" };\n        env.put(JMXConnector.CREDENTIALS, creds);\n        JMXConnector jmxc = JMXConnectorFactory.connect(url, env);\n        MBeanServerConnection conn = jmxc.getMBeanServerConnection();\n\n        ObjectName activeMq = new ObjectName(\"org.apache.activemq:type=Broker,brokerName=localhost\");\n\n        BrokerViewMBean mbean = MBeanServerInvocationHandler.newProxyInstance(conn, activeMq, BrokerViewMBean.class,\n                true);\n        for (ObjectName name : mbean.getQueues()) {\n            if ((\"TEST\".equals(name.getKeyProperty(\"destinationName\")))) {\n                QueueViewMBean queueMbean = MBeanServerInvocationHandler.newProxyInstance(conn, name,\n                        QueueViewMBean.class, true);\n                List&lt;?&gt; messages = queueMbean.browseMessages();\n                System.out.println(messages.get(messages.size() -1));\n\n                System.out.println(queueMbean.browseAsTable());\n                System.out.println(queueMbean.browseMessages());\n            }\n        }\n    }\n}\n</code></pre>\n\n<p>another option if your counter is always available and connected is to use <a href=\"http://activemq.apache.org/advisory-message.html\" rel=\"nofollow noreferrer\">http://activemq.apache.org/advisory-message.html</a></p>\n\n<blockquote>\n  <p>ActiveMQ.Advisory.MessageDelivered.Queue Message delivered to the\n  broker.</p>\n  \n  <p>ActiveMQ.Advisory.MessageDelivered.Topic Message delivered to the\n  broker.</p>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":11434008,"reputation":30690,"user_id":8381946,"display_name":"Justin Bertram"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1682353262,"creation_date":1682353262,"answer_id":76094005,"question_id":48498559,"body_markdown":"There&#39;s no way to fetch the last message in the queue without traversing all the other messages with a browser (or something like a browser).\r\n\r\nKeep in mind that a queue is not like a database table. You can&#39;t just pick out only the messages you want.","title":"Get Last Inserted Message in ActiveMQ - Java","body":"<p>There's no way to fetch the last message in the queue without traversing all the other messages with a browser (or something like a browser).</p>\n<p>Keep in mind that a queue is not like a database table. You can't just pick out only the messages you want.</p>\n"}],"owner":{"account_id":6408735,"reputation":1656,"user_id":4969121,"accept_rate":58,"display_name":"Abhijeet Kale"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":929,"favorite_count":0,"down_vote_count":1,"up_vote_count":2,"answer_count":2,"score":1,"last_activity_date":1682353262,"creation_date":1517219963,"question_id":48498559,"body_markdown":"I am looking for an optimal way to browse/check the last message inserted in a particular queue.\r\nSo far I am thinking of `ActiveMQQueueBrowser`. See the code below:\r\n\r\n    ActiveMQQueueBrowser browser = (ActiveMQQueueBrowser) session.createBrowser(queue);\r\n    Enumeration e = browser.getEnumeration();\r\n\tTextMessage message = null;\r\n\twhile (e.hasMoreElements()) {\r\n\t    message = (TextMessage) e.nextElement();\r\n\t}\r\n\r\nBut this code will need to traverse all the messages in queue, untill it gives last message.\r\n\r\nplz suggest if there is any other way to do so.","title":"Get Last Inserted Message in ActiveMQ - Java","body":"<p>I am looking for an optimal way to browse/check the last message inserted in a particular queue.\nSo far I am thinking of <code>ActiveMQQueueBrowser</code>. See the code below:</p>\n\n<pre><code>ActiveMQQueueBrowser browser = (ActiveMQQueueBrowser) session.createBrowser(queue);\nEnumeration e = browser.getEnumeration();\nTextMessage message = null;\nwhile (e.hasMoreElements()) {\n    message = (TextMessage) e.nextElement();\n}\n</code></pre>\n\n<p>But this code will need to traverse all the messages in queue, untill it gives last message.</p>\n\n<p>plz suggest if there is any other way to do so.</p>\n"},{"tags":["java","spring-boot","oauth-2.0","keycloak"],"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1682264222,"post_id":76085513,"comment_id":134184296,"body_markdown":"Please edit the question to limit it to a specific problem with enough detail to identify an adequate answer.","body":"Please edit the question to limit it to a specific problem with enough detail to identify an adequate answer."},{"owner":{"account_id":356896,"reputation":1317,"user_id":696714,"accept_rate":56,"display_name":"TOUDIdel"},"score":0,"creation_date":1689928523,"post_id":76085513,"comment_id":135285434,"body_markdown":"I have the same problem during tests using REST-assured + Testcontainers + Keycloak.\nI receive `WWW-Authenticate: Bearer error=&quot;insufficient_scope&quot;, error_description=&quot;The request requires higher privileges than provided by the access token.&quot;, error_uri=&quot;https://tools.ietf.org/html/rfc6750#section-3.1&quot;`\nOnly one difference I can see between real JWT token and token generated by testcontainers-keycloak is order in field `scope`.\nThe real valid token has value `&quot;email profile&quot;` during in test this has `&quot;profile email&quot;`","body":"I have the same problem during tests using REST-assured + Testcontainers + Keycloak. I receive <code>WWW-Authenticate: Bearer error=&quot;insufficient_scope&quot;, error_description=&quot;The request requires higher privileges than provided by the access token.&quot;, error_uri=&quot;https:&#47;&#47;tools.ietf.org&#47;html&#47;rfc6750#section-3.1&quot;</code> Only one difference I can see between real JWT token and token generated by testcontainers-keycloak is order in field <code>scope</code>. The real valid token has value <code>&quot;email profile&quot;</code> during in test this has <code>&quot;profile email&quot;</code>"}],"answers":[{"tags":[],"owner":{"account_id":308139,"reputation":8199,"user_id":619830,"accept_rate":75,"display_name":"ch4mp"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1682284280,"creation_date":1682282367,"answer_id":76087165,"question_id":76085513,"body_markdown":"Apparently, you have not configured an authentication converter, which means the spring authorities are mapped from the scope claim with `SCOPE_` prefix (and not Keycloak private claims with `ROLE_` prefix which is required by `hasRole`).\r\n\r\nWhat you need is change your resource-server configuration to `http.oauth2ResourceServer(oauth2 -&gt; oauth2.jwt(jwt -&gt; jwt.jwtAuthenticationConverter(...))` and provide an authentication converter mapping authorities from `realm_access.roles` (adding `ROLE_` prefix), and then build a `JwtAuthenticationToken` from it. Samples in [this answer][1] and [those tutorials][2] I wrote (and my bet is you should read the introduction README).\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/74571191/use-keycloak-spring-adapter-with-spring-boot-3/74572732#74572732\r\n  [2]: https://github.com/ch4mpy/spring-addons/tree/master/samples/tutorials","title":"insufficient_scope error while using Keycloak with Spring Boot","body":"<p>Apparently, you have not configured an authentication converter, which means the spring authorities are mapped from the scope claim with <code>SCOPE_</code> prefix (and not Keycloak private claims with <code>ROLE_</code> prefix which is required by <code>hasRole</code>).</p>\n<p>What you need is change your resource-server configuration to <code>http.oauth2ResourceServer(oauth2 -&gt; oauth2.jwt(jwt -&gt; jwt.jwtAuthenticationConverter(...))</code> and provide an authentication converter mapping authorities from <code>realm_access.roles</code> (adding <code>ROLE_</code> prefix), and then build a <code>JwtAuthenticationToken</code> from it. Samples in <a href=\"https://stackoverflow.com/questions/74571191/use-keycloak-spring-adapter-with-spring-boot-3/74572732#74572732\">this answer</a> and <a href=\"https://github.com/ch4mpy/spring-addons/tree/master/samples/tutorials\" rel=\"nofollow noreferrer\">those tutorials</a> I wrote (and my bet is you should read the introduction README).</p>\n"}],"owner":{"account_id":4158070,"reputation":11,"user_id":3408773,"display_name":"juancarlosparr"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2995,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":1,"score":0,"last_activity_date":1682353202,"creation_date":1682261339,"question_id":76085513,"body_markdown":"I use keycloak with Spring Boot api rest, but I get this error:\r\n\r\n&gt; Bearer error=&quot;insufficient_scope&quot;, error_description=&quot;The request requires higher privileges than provided by the access token.&quot;, error_uri=&quot;https://tools.ietf.org/html/rfc6750#section-3.1&quot;\r\n\r\nI believe this token is valid.\r\n\r\nCode:\r\n\r\n\t    public SecurityFilterChain filterChain(HttpSecurity http) throws Exception {\r\n\t    \t\r\n\t    \tSystem.out.println(&quot;Entro a seguridad&quot;);\r\n\t        http.authorizeHttpRequests()\r\n\t            .requestMatchers(&quot;/all/**&quot;)\r\n\t            .hasAnyRole(&quot;user_roles&quot;)\r\n\t            .anyRequest()\r\n\t            .permitAll();\r\n\t        http.oauth2Login()\r\n\t            .and()\r\n\t            .logout()\r\n\t            .addLogoutHandler((LogoutHandler) keycloakLogoutHandler)\r\n\t            .logoutSuccessUrl(&quot;/&quot;);\r\n\t        http.oauth2ResourceServer(OAuth2ResourceServerConfigurer::jwt);\r\n\t        return http.build();\r\n\r\n[jwt](https://i.stack.imgur.com/ExaSI.png)\r\n\r\nI expect the token works. How do I fix this error?\r\n","title":"insufficient_scope error while using Keycloak with Spring Boot","body":"<p>I use keycloak with Spring Boot api rest, but I get this error:</p>\n<blockquote>\n<p>Bearer error=&quot;insufficient_scope&quot;, error_description=&quot;The request requires higher privileges than provided by the access token.&quot;, error_uri=&quot;https://tools.ietf.org/html/rfc6750#section-3.1&quot;</p>\n</blockquote>\n<p>I believe this token is valid.</p>\n<p>Code:</p>\n<pre><code>    public SecurityFilterChain filterChain(HttpSecurity http) throws Exception {\n        \n        System.out.println(&quot;Entro a seguridad&quot;);\n        http.authorizeHttpRequests()\n            .requestMatchers(&quot;/all/**&quot;)\n            .hasAnyRole(&quot;user_roles&quot;)\n            .anyRequest()\n            .permitAll();\n        http.oauth2Login()\n            .and()\n            .logout()\n            .addLogoutHandler((LogoutHandler) keycloakLogoutHandler)\n            .logoutSuccessUrl(&quot;/&quot;);\n        http.oauth2ResourceServer(OAuth2ResourceServerConfigurer::jwt);\n        return http.build();\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/ExaSI.png\" rel=\"nofollow noreferrer\">jwt</a></p>\n<p>I expect the token works. How do I fix this error?</p>\n"},{"tags":["java","string-matching"],"comments":[{"owner":{"account_id":682692,"reputation":49061,"user_id":535275,"accept_rate":91,"display_name":"Scott Hunter"},"score":0,"creation_date":1682346393,"post_id":76092943,"comment_id":134196321,"body_markdown":"Please post the regex you used to try and solve this problem.","body":"Please post the regex you used to try and solve this problem."},{"owner":{"account_id":3925658,"reputation":5569,"user_id":3246362,"display_name":"Sam"},"score":0,"creation_date":1682346659,"post_id":76092943,"comment_id":134196405,"body_markdown":"I think you will have better results with JsonMapper and JsonNode","body":"I think you will have better results with JsonMapper and JsonNode"},{"owner":{"account_id":372682,"reputation":22426,"user_id":721855,"display_name":"aled"},"score":3,"creation_date":1682346700,"post_id":76092943,"comment_id":134196415,"body_markdown":"Using regex to process JSON is a bad match (no pun intended). Use JSON libraries to parse JSON.","body":"Using regex to process JSON is a bad match (no pun intended). Use JSON libraries to parse JSON."}],"answers":[{"tags":[],"owner":{"account_id":91942,"reputation":8072,"user_id":252218,"accept_rate":91,"display_name":"BoppreH"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1682348304,"creation_date":1682347761,"answer_id":76093181,"question_id":76092943,"body_markdown":"[Technically possible](https://stackoverflow.com/questions/47162098/is-it-possible-to-match-nested-brackets-with-a-regex-without-using-recursion-or/47162099#47162099) with a single regex, but probably not worth it. Note that the linked answer is for one type of parenthesis only; your program is harder because you have {} *and* [].\r\n\r\nThe problem is that nested expressions are not a [regular language](https://en.wikipedia.org/wiki/Regular_language); regex libraries can sometimes parse non-regular languages with the help of extensions (like forward and backward references), but the results are generally fragile and unreadable. This issue is [quite famous on StackOverflow](https://stackoverflow.com/a/1732454/252218).\r\n\r\nSince your input is already a JSON string, you&#39;re much better off using a real JSON parser. I promise you it&#39;ll be much less painful than what you&#39;ve already done.\r\n\r\n---\r\n\r\nIf you really must use regex, I suggest doing it in iteratively:\r\n\r\n1. Create a regex that finds all {} or [] that don&#39;t have any {} or [] inside.\r\n2. Search for matches in your input string.\r\n3. Replace each match with a unique token, like &quot;TOKEN_N&quot;. Remember what was the match string for each of these tokens.\r\n4. Repeat 2-3 until there are no more matches.\r\n\r\nIn the end you&#39;ll have transformed the input into something like \r\n\r\n    [TOKEN1, &quot;&amp;&amp;&quot;, TOKEN2, &quot;||&quot;, TOKEN3]\r\n\r\nAnd a recursive dictionary of everything you replaced:\r\n\r\n    TOKEN1={&quot;field&quot;:&quot;type&quot;,&quot;operand&quot;:&quot;=&quot;,&quot;value&quot;:&quot;column&quot;}\r\n    TOKEN2=[TOKEN4, &quot;||&quot;, TOKEN5]\r\n    TOKEN3={&quot;field&quot;:&quot;type&quot;,&quot;operand&quot;:&quot;=&quot;,&quot;value&quot;:&quot;column&quot;}\r\n    TOKEN4={&quot;field&quot;:&quot;type&quot;,&quot;operand&quot;:&quot;=&quot;,&quot;value&quot;:&quot;column&quot;}\r\n    TOKEN5={&quot;field&quot;:&quot;type&quot;,&quot;operand&quot;:&quot;=&quot;,&quot;value&quot;:&quot;column&quot;}\r\n\r\nThis is a stringified [Abstract Syntax Tree](https://en.wikipedia.org/wiki/Abstract_syntax_tree) of your expression, and from here you can process it however you like.","title":"Regex - Matching the contents between two characters only if the latter character is not followed by the latter character before the former character","body":"<p><a href=\"https://stackoverflow.com/questions/47162098/is-it-possible-to-match-nested-brackets-with-a-regex-without-using-recursion-or/47162099#47162099\">Technically possible</a> with a single regex, but probably not worth it. Note that the linked answer is for one type of parenthesis only; your program is harder because you have {} <em>and</em> [].</p>\n<p>The problem is that nested expressions are not a <a href=\"https://en.wikipedia.org/wiki/Regular_language\" rel=\"nofollow noreferrer\">regular language</a>; regex libraries can sometimes parse non-regular languages with the help of extensions (like forward and backward references), but the results are generally fragile and unreadable. This issue is <a href=\"https://stackoverflow.com/a/1732454/252218\">quite famous on StackOverflow</a>.</p>\n<p>Since your input is already a JSON string, you're much better off using a real JSON parser. I promise you it'll be much less painful than what you've already done.</p>\n<hr />\n<p>If you really must use regex, I suggest doing it in iteratively:</p>\n<ol>\n<li>Create a regex that finds all {} or [] that don't have any {} or [] inside.</li>\n<li>Search for matches in your input string.</li>\n<li>Replace each match with a unique token, like &quot;TOKEN_N&quot;. Remember what was the match string for each of these tokens.</li>\n<li>Repeat 2-3 until there are no more matches.</li>\n</ol>\n<p>In the end you'll have transformed the input into something like</p>\n<pre><code>[TOKEN1, &quot;&amp;&amp;&quot;, TOKEN2, &quot;||&quot;, TOKEN3]\n</code></pre>\n<p>And a recursive dictionary of everything you replaced:</p>\n<pre><code>TOKEN1={&quot;field&quot;:&quot;type&quot;,&quot;operand&quot;:&quot;=&quot;,&quot;value&quot;:&quot;column&quot;}\nTOKEN2=[TOKEN4, &quot;||&quot;, TOKEN5]\nTOKEN3={&quot;field&quot;:&quot;type&quot;,&quot;operand&quot;:&quot;=&quot;,&quot;value&quot;:&quot;column&quot;}\nTOKEN4={&quot;field&quot;:&quot;type&quot;,&quot;operand&quot;:&quot;=&quot;,&quot;value&quot;:&quot;column&quot;}\nTOKEN5={&quot;field&quot;:&quot;type&quot;,&quot;operand&quot;:&quot;=&quot;,&quot;value&quot;:&quot;column&quot;}\n</code></pre>\n<p>This is a stringified <a href=\"https://en.wikipedia.org/wiki/Abstract_syntax_tree\" rel=\"nofollow noreferrer\">Abstract Syntax Tree</a> of your expression, and from here you can process it however you like.</p>\n"}],"owner":{"account_id":4683705,"reputation":3,"user_id":3791720,"display_name":"J055Y"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":42,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76093181,"answer_count":1,"score":0,"last_activity_date":1682353139,"creation_date":1682346323,"question_id":76092943,"body_markdown":"I&#39;m trying to match JSON condition strings in Java and have been hitting my head against a wall trying to find a solution. \r\nIn these condition strings, conditions are JSON objects &quot;{}&quot;, which may be evaluated on their own, or in a group. These groups are represented as arrays of condition objects &quot;[]&quot;. I had a solution that worked fine to match the contents between characters for groups and objects respectively, however, this went out the window when I attempted to store groups inside other groups.\r\n\r\nExample string:\r\n\r\n    [{&quot;field&quot;:&quot;type&quot;,&quot;operand&quot;:&quot;=&quot;,&quot;value&quot;:&quot;column&quot;}, &quot;&amp;&amp;&quot;,\r\n      [{&quot;field&quot;:&quot;type&quot;,&quot;operand&quot;:&quot;=&quot;,&quot;value&quot;:&quot;column&quot;}, &quot;||&quot;, \r\n       {&quot;field&quot;:&quot;type&quot;,&quot;operand&quot;:&quot;=&quot;,&quot;value&quot;:&quot;column&quot;}], &quot;||&quot;, \r\n       {&quot;field&quot;:&quot;type&quot;,&quot;operand&quot;:&quot;=&quot;,&quot;value&quot;:&quot;column&quot;}]\r\n\r\n\r\n\r\nThe intended outcome was to match the contents of the string between (and including) the characters \\[ and \\].\r\n\r\nI&#39;ve worked out that what I need is to match the contents of \\[ ... \\] until there is a \\] that is not followed (somewhere ahead, i.e., .+?) by another \\] before a \\[.\r\nDoing a lazy search for \\] will stop the match at the first occurence, but doing a greedy match will match the entire string up to the last occurence, which may contain many other groups/objects. I&#39;ve experimented with lookbehinds/lookaheads, but these require statically defined character positions, and cannot stretch to find (or not find) an occurence of a character.\r\n\r\nAt this point, I&#39;m stumped and would greatly appreciate any advice you have to offer.","title":"Regex - Matching the contents between two characters only if the latter character is not followed by the latter character before the former character","body":"<p>I'm trying to match JSON condition strings in Java and have been hitting my head against a wall trying to find a solution.\nIn these condition strings, conditions are JSON objects &quot;{}&quot;, which may be evaluated on their own, or in a group. These groups are represented as arrays of condition objects &quot;[]&quot;. I had a solution that worked fine to match the contents between characters for groups and objects respectively, however, this went out the window when I attempted to store groups inside other groups.</p>\n<p>Example string:</p>\n<pre><code>[{&quot;field&quot;:&quot;type&quot;,&quot;operand&quot;:&quot;=&quot;,&quot;value&quot;:&quot;column&quot;}, &quot;&amp;&amp;&quot;,\n  [{&quot;field&quot;:&quot;type&quot;,&quot;operand&quot;:&quot;=&quot;,&quot;value&quot;:&quot;column&quot;}, &quot;||&quot;, \n   {&quot;field&quot;:&quot;type&quot;,&quot;operand&quot;:&quot;=&quot;,&quot;value&quot;:&quot;column&quot;}], &quot;||&quot;, \n   {&quot;field&quot;:&quot;type&quot;,&quot;operand&quot;:&quot;=&quot;,&quot;value&quot;:&quot;column&quot;}]\n</code></pre>\n<p>The intended outcome was to match the contents of the string between (and including) the characters [ and ].</p>\n<p>I've worked out that what I need is to match the contents of [ ... ] until there is a ] that is not followed (somewhere ahead, i.e., .+?) by another ] before a [.\nDoing a lazy search for ] will stop the match at the first occurence, but doing a greedy match will match the entire string up to the last occurence, which may contain many other groups/objects. I've experimented with lookbehinds/lookaheads, but these require statically defined character positions, and cannot stretch to find (or not find) an occurence of a character.</p>\n<p>At this point, I'm stumped and would greatly appreciate any advice you have to offer.</p>\n"},{"tags":["java","twilio","keycloak"],"comments":[{"owner":{"account_id":51393,"reputation":2475,"user_id":153562,"accept_rate":89,"display_name":"Nimrod Shory"},"score":0,"creation_date":1578583047,"post_id":58431085,"comment_id":105492948,"body_markdown":"I haven&#39;t tried it yet but did you look at this plugin: https://github.com/sangyoon-lee/keycloak-sms-authenticator  \n\nLooks like a good starting point.","body":"I haven&#39;t tried it yet but did you look at this plugin: <a href=\"https://github.com/sangyoon-lee/keycloak-sms-authenticator\" rel=\"nofollow noreferrer\">github.com/sangyoon-lee/keycloak-sms-authenticator</a>    Looks like a good starting point."}],"answers":[{"tags":[],"owner":{"account_id":1877660,"reputation":1745,"user_id":1698509,"accept_rate":75,"display_name":"Guilherme"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1682353067,"creation_date":1682353067,"answer_id":76093978,"question_id":58431085,"body_markdown":"[Dasniko][1] has a good implementation of 2FA with SMS, made using Keycloak&#39;s Service Provider Interfaces (SPI)\r\n\r\nAs I see, you would just need to re-write the `AwsSmsService` into a service using Twilio\r\n\r\nhttps://github.com/dasniko/keycloak-2fa-sms-authenticator\r\n\r\nAnd he also have a youtube video explaining the usage https://www.youtube.com/watch?v=GQi19817fFk\r\n\r\n  [1]: https://github.com/dasniko","title":"Keycloak phone number verification using Twilio","body":"<p><a href=\"https://github.com/dasniko\" rel=\"nofollow noreferrer\">Dasniko</a> has a good implementation of 2FA with SMS, made using Keycloak's Service Provider Interfaces (SPI)</p>\n<p>As I see, you would just need to re-write the <code>AwsSmsService</code> into a service using Twilio</p>\n<p><a href=\"https://github.com/dasniko/keycloak-2fa-sms-authenticator\" rel=\"nofollow noreferrer\">https://github.com/dasniko/keycloak-2fa-sms-authenticator</a></p>\n<p>And he also have a youtube video explaining the usage <a href=\"https://www.youtube.com/watch?v=GQi19817fFk\" rel=\"nofollow noreferrer\">https://www.youtube.com/watch?v=GQi19817fFk</a></p>\n"}],"owner":{"account_id":16898363,"reputation":21,"user_id":12220398,"display_name":"Senior developer"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1218,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1682353067,"creation_date":1571310087,"question_id":58431085,"body_markdown":"I would like to customize key cloak resister page with phone number. I would like to use Twilio to send sms. But there is no example anywhere similar to this project.&quot;\r\n\r\nI have already setup keycloak server and keycloak does not support Twilio.\r\n\r\nPlease provide me similar project. Thank you.\r\n\r\n    03:59:41,668 ERROR [org.keycloak.services.error.KeycloakErrorHandler] (default task-1) Uncaught server error: java.lang.NoClassDefFoundError: org/apache/commons/codec/binary/Base64InputStream\r\n    \tat six.six.gateway.govuk.notify.NotifySMSService.&lt;init&gt;(NotifySMSService.java:24)\r\n    \tat six.six.keycloak.authenticator.KeycloakSmsAuthenticatorUtil.sendSmsCode(KeycloakSmsAuthenticatorUtil.java:197)\r\n    \tat six.six.keycloak.authenticator.KeycloakSmsAuthenticator.authenticate(KeycloakSmsAuthenticator.java:82)\r\n    \tat org.keycloak.keycloak-services@7.0.0//org.keycloak.authentication.DefaultAuthenticationFlow.processFlow(DefaultAuthenticationFlow.java:232)\r\n    \tat org.keycloak.keycloak-services@7.0.0//org.keycloak.authentication.DefaultAuthenticationFlow.processAction(DefaultAuthenticationFlow.java:128)\r\n    \tat org.keycloak.keycloak-services@7.0.0//org.keycloak.authentication.DefaultAuthenticationFlow.processAction(DefaultAuthenticationFlow.java:99)\r\n    \tat org.keycloak.keycloak-services@7.0.0//org.keycloak.authentication.AuthenticationProcessor.authenticationAction(AuthenticationProcessor.java:873)\r\n    \tat org.keycloak.keycloak-services@7.0.0//org.keycloak.services.resources.LoginActionsService.processFlow(LoginActionsService.java:296)\r\n    \tat org.keycloak.keycloak-services@7.0.0//org.keycloak.services.resources.LoginActionsService.processAuthentication(LoginActionsService.java:267)\r\n    \tat org.keycloak.keycloak-services@7.0.0//org.keycloak.services.resources.LoginActionsService.authenticate(LoginActionsService.java:263)\r\n    \tat org.keycloak.keycloak-services@7.0.0//org.keycloak.services.resources.LoginActionsService.authenticateForm(LoginActionsService.java:324)\r\n    \tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n    \tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n    \tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n    \tat java.base/java.lang.reflect.Method.invoke(Method.java:566)","title":"Keycloak phone number verification using Twilio","body":"<p>I would like to customize key cloak resister page with phone number. I would like to use Twilio to send sms. But there is no example anywhere similar to this project.\"</p>\n\n<p>I have already setup keycloak server and keycloak does not support Twilio.</p>\n\n<p>Please provide me similar project. Thank you.</p>\n\n<pre><code>03:59:41,668 ERROR [org.keycloak.services.error.KeycloakErrorHandler] (default task-1) Uncaught server error: java.lang.NoClassDefFoundError: org/apache/commons/codec/binary/Base64InputStream\n    at six.six.gateway.govuk.notify.NotifySMSService.&lt;init&gt;(NotifySMSService.java:24)\n    at six.six.keycloak.authenticator.KeycloakSmsAuthenticatorUtil.sendSmsCode(KeycloakSmsAuthenticatorUtil.java:197)\n    at six.six.keycloak.authenticator.KeycloakSmsAuthenticator.authenticate(KeycloakSmsAuthenticator.java:82)\n    at org.keycloak.keycloak-services@7.0.0//org.keycloak.authentication.DefaultAuthenticationFlow.processFlow(DefaultAuthenticationFlow.java:232)\n    at org.keycloak.keycloak-services@7.0.0//org.keycloak.authentication.DefaultAuthenticationFlow.processAction(DefaultAuthenticationFlow.java:128)\n    at org.keycloak.keycloak-services@7.0.0//org.keycloak.authentication.DefaultAuthenticationFlow.processAction(DefaultAuthenticationFlow.java:99)\n    at org.keycloak.keycloak-services@7.0.0//org.keycloak.authentication.AuthenticationProcessor.authenticationAction(AuthenticationProcessor.java:873)\n    at org.keycloak.keycloak-services@7.0.0//org.keycloak.services.resources.LoginActionsService.processFlow(LoginActionsService.java:296)\n    at org.keycloak.keycloak-services@7.0.0//org.keycloak.services.resources.LoginActionsService.processAuthentication(LoginActionsService.java:267)\n    at org.keycloak.keycloak-services@7.0.0//org.keycloak.services.resources.LoginActionsService.authenticate(LoginActionsService.java:263)\n    at org.keycloak.keycloak-services@7.0.0//org.keycloak.services.resources.LoginActionsService.authenticateForm(LoginActionsService.java:324)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n    at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.base/java.lang.reflect.Method.invoke(Method.java:566)\n</code></pre>\n"},{"tags":["java","arrays"],"comments":[{"owner":{"account_id":9235242,"reputation":1488,"user_id":6860078,"display_name":"tbatch"},"score":0,"creation_date":1682539138,"post_id":76093886,"comment_id":134233919,"body_markdown":"What is the purpose of keeping track of the sides?  Is this important to the game?  If I start in the top left corner of a square, and continue following it&#39;s sides all the way back to my start point, I have basically walked a straight line.  Think now of an array, let&#39;s call it `squares[10]`.  If I start at the first index, `squares[0]` and walk all the way to the end, `squares[9]`, what happens if I walk one space forward?  In this case, I&#39;ll end up back at `squares[0]`.","body":"What is the purpose of keeping track of the sides?  Is this important to the game?  If I start in the top left corner of a square, and continue following it&#39;s sides all the way back to my start point, I have basically walked a straight line.  Think now of an array, let&#39;s call it <code>squares[10]</code>.  If I start at the first index, <code>squares[0]</code> and walk all the way to the end, <code>squares[9]</code>, what happens if I walk one space forward?  In this case, I&#39;ll end up back at <code>squares[0]</code>."}],"owner":{"account_id":28402287,"reputation":1,"user_id":21726916,"display_name":"Gabriel "},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":33,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1682352385,"creation_date":1682352385,"question_id":76093886,"body_markdown":"So for our final project in school we got to pick our own thing to do. I decided to make the game Ludo, in Java. For starters I&#39;m making a simplified version that goes around a square, not a plus-shape as it usually is. Im having trouble in drawing the piece going around the board. For starters Im just making the board be outlined, black circles, with a full circle moving around the board when you roll the dice. Check picture:\r\n[The simplified Ludo Board](https://i.stack.imgur.com/Ra7aL.png)\r\n\r\n```\r\n    @Override\r\n    protected void paintComponent(Graphics g) {\r\n        super.paintComponent(g);\r\n        g.setColor(Color.BLACK);\r\n        for (int i = 0; i &lt; boardSide; i++) {\r\n            g.drawOval(i*squareSize,0,squareSize,squareSize);\r\n        }\r\n        for (int i = 0; i &lt; boardSide; i++) {\r\n            g.drawOval(0,i*squareSize,squareSize,squareSize);\r\n        }\r\n        for (int i = boardSide; i &gt; 0; i--) {\r\n            g.drawOval(i*squareSize,boardSide-squareSize,squareSize,squareSize);\r\n        }\r\n        for (int i = boardSide; i &gt; 0; i--) {\r\n            g.drawOval(boardSide-squareSize,i*squareSize,squareSize,squareSize);\r\n        }\r\n        g.setColor(Color.GREEN);\r\n        switch (squares[squarePlace]%8){\r\n            case 1 -&gt; g.fillOval(0,0,squareSize,squareSize);\r\n        }\r\n    }\r\n```\r\nboardSide is the amount of squares on one side, squareSize is how big each square is and squares[] is an int array of all the squares on the board, all empty squares have a value of -1. squarePlace is an int keeping track off where the green square is and has the value 1.\r\n\r\n\r\nIm thinking that I should use a switch-case to check where the green square is in the array. Then use %-operator to check if it should be on the top, right, bottom or left of the board. I just can&#39;t think off how I should do that. I need to check how far into the array the square is, or check the position in the array, and then use % but I dont know how. ","title":"How to make a Ludo piece go around the board?","body":"<p>So for our final project in school we got to pick our own thing to do. I decided to make the game Ludo, in Java. For starters I'm making a simplified version that goes around a square, not a plus-shape as it usually is. Im having trouble in drawing the piece going around the board. For starters Im just making the board be outlined, black circles, with a full circle moving around the board when you roll the dice. Check picture:\n<a href=\"https://i.stack.imgur.com/Ra7aL.png\" rel=\"nofollow noreferrer\">The simplified Ludo Board</a></p>\n<pre><code>    @Override\n    protected void paintComponent(Graphics g) {\n        super.paintComponent(g);\n        g.setColor(Color.BLACK);\n        for (int i = 0; i &lt; boardSide; i++) {\n            g.drawOval(i*squareSize,0,squareSize,squareSize);\n        }\n        for (int i = 0; i &lt; boardSide; i++) {\n            g.drawOval(0,i*squareSize,squareSize,squareSize);\n        }\n        for (int i = boardSide; i &gt; 0; i--) {\n            g.drawOval(i*squareSize,boardSide-squareSize,squareSize,squareSize);\n        }\n        for (int i = boardSide; i &gt; 0; i--) {\n            g.drawOval(boardSide-squareSize,i*squareSize,squareSize,squareSize);\n        }\n        g.setColor(Color.GREEN);\n        switch (squares[squarePlace]%8){\n            case 1 -&gt; g.fillOval(0,0,squareSize,squareSize);\n        }\n    }\n</code></pre>\n<p>boardSide is the amount of squares on one side, squareSize is how big each square is and squares[] is an int array of all the squares on the board, all empty squares have a value of -1. squarePlace is an int keeping track off where the green square is and has the value 1.</p>\n<p>Im thinking that I should use a switch-case to check where the green square is in the array. Then use %-operator to check if it should be on the top, right, bottom or left of the board. I just can't think off how I should do that. I need to check how far into the array the square is, or check the position in the array, and then use % but I dont know how.</p>\n"},{"tags":["java","android","kotlin","android-developer-api"],"comments":[{"owner":{"account_id":1233070,"reputation":9484,"user_id":1197251,"display_name":"dominicoder"},"score":0,"creation_date":1682091177,"post_id":76074528,"comment_id":134166105,"body_markdown":"You may want to expand your explanation and code examples. I, for one, am not clear on what you&#39;re asking or trying to achieve.","body":"You may want to expand your explanation and code examples. I, for one, am not clear on what you&#39;re asking or trying to achieve."},{"owner":{"account_id":21373830,"reputation":595,"user_id":15740938,"display_name":"ladytoky0"},"score":0,"creation_date":1682341814,"post_id":76074528,"comment_id":134195067,"body_markdown":"@dominicoder I added an example! thank you","body":"@dominicoder I added an example! thank you"},{"owner":{"account_id":1233070,"reputation":9484,"user_id":1197251,"display_name":"dominicoder"},"score":0,"creation_date":1682350910,"post_id":76074528,"comment_id":134197602,"body_markdown":"What or where is `userOption` though? Are you looking for [SharedPreferences](https://developer.android.com/reference/android/content/SharedPreferences)?","body":"What or where is <code>userOption</code> though? Are you looking for <a href=\"https://developer.android.com/reference/android/content/SharedPreferences\" rel=\"nofollow noreferrer\">SharedPreferences</a>?"},{"owner":{"account_id":21373830,"reputation":595,"user_id":15740938,"display_name":"ladytoky0"},"score":0,"creation_date":1682350971,"post_id":76074528,"comment_id":134197617,"body_markdown":"userOption is the selected item of a spinner","body":"userOption is the selected item of a spinner"},{"owner":{"account_id":1233070,"reputation":9484,"user_id":1197251,"display_name":"dominicoder"},"score":0,"creation_date":1682351033,"post_id":76074528,"comment_id":134197632,"body_markdown":"No, that&#39;s the value. What is the _variable_? `val userOption` - what is that? Where does that live? Where is it defined?","body":"No, that&#39;s the value. What is the <i>variable</i>? <code>val userOption</code> - what is that? Where does that live? Where is it defined?"}],"answers":[{"tags":[],"owner":{"account_id":14331430,"reputation":783,"user_id":10352079,"display_name":"Razvan S."},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1682093141,"creation_date":1682093141,"answer_id":76074907,"question_id":76074528,"body_markdown":"Not sure I understand your question but I would use enums like in the playground example below:\r\n\r\n    enum class Props {\r\n        A1,\r\n        A2,\r\n        A3\r\n    }\r\n    \r\n    fun main() {\r\n        var userChoice: Props = Props.A2\r\n        val index = userChoice.ordinal\r\n        val literal = Props.values()[index]\r\n        print(index)\r\n        print(literal)\r\n    }\r\n\r\nThe only difference is that the values start at 0. So A1 is 0, A2 is 1 and A3 is 2.\r\nPrinting the index will show 1. And printing the literal will show A2. \r\n\r\nYou can do more fancy stuff using enums but I think it&#39;s a better start than other approaches.","title":"Access to a constant value with a variable name in Kotlin","body":"<p>Not sure I understand your question but I would use enums like in the playground example below:</p>\n<pre><code>enum class Props {\n    A1,\n    A2,\n    A3\n}\n\nfun main() {\n    var userChoice: Props = Props.A2\n    val index = userChoice.ordinal\n    val literal = Props.values()[index]\n    print(index)\n    print(literal)\n}\n</code></pre>\n<p>The only difference is that the values start at 0. So A1 is 0, A2 is 1 and A3 is 2.\nPrinting the index will show 1. And printing the literal will show A2.</p>\n<p>You can do more fancy stuff using enums but I think it's a better start than other approaches.</p>\n"}],"owner":{"account_id":21373830,"reputation":595,"user_id":15740938,"display_name":"ladytoky0"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":120,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1682351624,"creation_date":1682090187,"question_id":76074528,"body_markdown":"First of all, I don&#39;t know if there is a way to achieve what I want to, but I don&#39;t lose nothing asking for.\r\n\r\nSO, I have an object with some constant values, let&#39;s say:\r\n\r\n    object Properties {\r\n        const val A1 = 1\r\n        const val A2 = 2\r\n        const val A3 = 3\r\n        ....\r\n    }\r\n\r\nThe user in the app, will choose one of these options: A1, A2,A3,..., An, and I&#39;m saving the user&#39;s option in the variable\r\n\r\n    val userOption\r\n\r\nNow, I want to access which value is userOption (1,2,3,...,n) referring to the object Properties, something like this:\r\n\r\n    val index = Properties.$userOption\r\n\r\nObviously, this is wrong, but I wanted to know if it exists something similar to access a constant value with another variable name.what So basically, I have the value in another variable name that is not in the class and is called &quot;userOption&quot;.\r\n\r\nFor example,the user has many options in a spinner: A1, A2, ..., An\r\n\r\n    var userOption: String = null\r\n    override fun onItemSelected(parent: AdapterView&lt;*&gt;, view: View?, pos: Int, id: Long) {\r\n            // retrieve the selected item\r\n            userOption = parent.getItemAtPosition(pos).toString()\r\n        }\r\n\r\n    private fun getIndexUserOption(){\r\n        val indexUser = Properties.$userOption // this is wrong!\r\n    }\r\n\r\n \r\nThank you all!\r\n\r\nPS. I do not want to use a dictionary in this class because it has to work in differents classes.","title":"Access to a constant value with a variable name in Kotlin","body":"<p>First of all, I don't know if there is a way to achieve what I want to, but I don't lose nothing asking for.</p>\n<p>SO, I have an object with some constant values, let's say:</p>\n<pre><code>object Properties {\n    const val A1 = 1\n    const val A2 = 2\n    const val A3 = 3\n    ....\n}\n</code></pre>\n<p>The user in the app, will choose one of these options: A1, A2,A3,..., An, and I'm saving the user's option in the variable</p>\n<pre><code>val userOption\n</code></pre>\n<p>Now, I want to access which value is userOption (1,2,3,...,n) referring to the object Properties, something like this:</p>\n<pre><code>val index = Properties.$userOption\n</code></pre>\n<p>Obviously, this is wrong, but I wanted to know if it exists something similar to access a constant value with another variable name.what So basically, I have the value in another variable name that is not in the class and is called &quot;userOption&quot;.</p>\n<p>For example,the user has many options in a spinner: A1, A2, ..., An</p>\n<pre><code>var userOption: String = null\noverride fun onItemSelected(parent: AdapterView&lt;*&gt;, view: View?, pos: Int, id: Long) {\n        // retrieve the selected item\n        userOption = parent.getItemAtPosition(pos).toString()\n    }\n\nprivate fun getIndexUserOption(){\n    val indexUser = Properties.$userOption // this is wrong!\n}\n</code></pre>\n<p>Thank you all!</p>\n<p>PS. I do not want to use a dictionary in this class because it has to work in differents classes.</p>\n"},{"tags":["java","tomcat","servlets"],"comments":[{"owner":{"account_id":6338626,"reputation":2513,"user_id":4921317,"accept_rate":91,"display_name":"Gatusko"},"score":1,"creation_date":1682349583,"post_id":76093287,"comment_id":134197238,"body_markdown":"Can you add all the stacktrace please","body":"Can you add all the stacktrace please"},{"owner":{"account_id":7701,"reputation":47163,"user_id":13447,"accept_rate":100,"display_name":"Olaf Kock"},"score":0,"creation_date":1682350703,"post_id":76093287,"comment_id":134197525,"body_markdown":"&quot;upgraded servlet jar&quot;: Does that include _all of your code_ that now uses the jakarta variant? And _all of the other external libraries_ that you might have in your project, that might depend on the javax-classes as well? Please check [ask] and provide a [mcve].","body":"&quot;upgraded servlet jar&quot;: Does that include <i>all of your code</i> that now uses the jakarta variant? And <i>all of the other external libraries</i> that you might have in your project, that might depend on the javax-classes as well? Please check <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a> and provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."},{"owner":{"account_id":9979607,"reputation":21,"user_id":7382973,"display_name":"Abhinav"},"score":0,"creation_date":1682351482,"post_id":76093287,"comment_id":134197751,"body_markdown":"@Gatusko pasted the server logs above.","body":"@Gatusko pasted the server logs above."},{"owner":{"account_id":6338626,"reputation":2513,"user_id":4921317,"accept_rate":91,"display_name":"Gatusko"},"score":0,"creation_date":1682351622,"post_id":76093287,"comment_id":134197788,"body_markdown":"I think you are having this issue it is well know https://stackoverflow.com/questions/66711660/tomcat-10-x-throws-java-lang-noclassdeffounderror-on-javax-servlet","body":"I think you are having this issue it is well know <a href=\"https://stackoverflow.com/questions/66711660/tomcat-10-x-throws-java-lang-noclassdeffounderror-on-javax-servlet\" title=\"tomcat 10 x throws java lang noclassdeffounderror on javax servlet\">stackoverflow.com/questions/66711660/&hellip;</a>"},{"owner":{"account_id":9979607,"reputation":21,"user_id":7382973,"display_name":"Abhinav"},"score":0,"creation_date":1682351861,"post_id":76093287,"comment_id":134197838,"body_markdown":"@OlafKock yes, my application is using Jakarta variant now, and rest of the external libs are upgraded too if need in most of the case I tried to do the minimal change in external libs as I am trying to figure out what is causing me this issue, will provide you more info about how to reproduce this issue as I tried something similar with new project containing no external libs and it get deployed fine and I am able to consume the demo webservice as well.","body":"@OlafKock yes, my application is using Jakarta variant now, and rest of the external libs are upgraded too if need in most of the case I tried to do the minimal change in external libs as I am trying to figure out what is causing me this issue, will provide you more info about how to reproduce this issue as I tried something similar with new project containing no external libs and it get deployed fine and I am able to consume the demo webservice as well."},{"owner":{"account_id":52822,"reputation":1088970,"user_id":157882,"accept_rate":93,"display_name":"BalusC"},"score":0,"creation_date":1682352216,"post_id":76093287,"comment_id":134197928,"body_markdown":"*&quot;upgraded servlet jar from 2.5 to 6.0.0&quot;* this phrase is scary because **normally** you upgrade merely the servletcontainer (Tomcat) from the one to the other version and not the individual `servlet.jar` file. Do you really have a `servlet.jar` bundled in `/WEB-INF/lib`? This is absolutely not correct. That&#39;s supposed to be already provided by the servletcontainer itself (Tomcat in your case).","body":"<i>&quot;upgraded servlet jar from 2.5 to 6.0.0&quot;</i> this phrase is scary because <b>normally</b> you upgrade merely the servletcontainer (Tomcat) from the one to the other version and not the individual <code>servlet.jar</code> file. Do you really have a <code>servlet.jar</code> bundled in <code>&#47;WEB-INF&#47;lib</code>? This is absolutely not correct. That&#39;s supposed to be already provided by the servletcontainer itself (Tomcat in your case)."},{"owner":{"account_id":9979607,"reputation":21,"user_id":7382973,"display_name":"Abhinav"},"score":0,"creation_date":1682412125,"post_id":76093287,"comment_id":134206999,"body_markdown":"@BalusC, that true by upgrading servlet jar from 2.5 to 6.0.0 I mean upgrading the servlet container. Thanks for bring this up as I need to edit the scope of my dependency so that it should not be present in /WEB-INF/lib when I am building the project.","body":"@BalusC, that true by upgrading servlet jar from 2.5 to 6.0.0 I mean upgrading the servlet container. Thanks for bring this up as I need to edit the scope of my dependency so that it should not be present in /WEB-INF/lib when I am building the project."}],"owner":{"account_id":9979607,"reputation":21,"user_id":7382973,"display_name":"Abhinav"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":35,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1682352222,"answer_count":0,"score":0,"last_activity_date":1682351356,"creation_date":1682348466,"question_id":76093287,"body_markdown":"I am currently upgrading my application java version from jdk 1.7 to 17 and tomcat from 9.0.20 version to 10.1.7, made all the changes related to servelte libs update and removed all the compilation error but when I am deploying my war I am getting below error.\r\n\r\n```\r\n24-Apr-2023 21:01:50.458 INFO [Catalina-utility-1] org.apache.catalina.startup.HostConfig.deployWAR Deploying web application archive [C:\\Users\\absharma\\Desktop\\TASK\\tomcat\\webapps\\WebApp_demo_version3.war]\r\n24-Apr-2023 21:02:01.488 INFO [Catalina-utility-1] org.apache.jasper.servlet.TldScanner.scanJars At least one JAR was scanned for TLDs yet contained no TLDs. Enable debug logging for this logger for a complete list of JARs that were scanned but no TLDs were found in them. Skipping unneeded JARs during scanning can improve startup time and JSP compilation time.\r\n24-Apr-2023 21:02:01.488 SEVERE [Catalina-utility-1] org.apache.catalina.startup.HostConfig.deployWAR Error deploying web application archive [C:\\Users\\absharma\\Desktop\\TASK\\tomcat\\webapps\\WebApp_demo_version3.war]\r\n\tjava.lang.IllegalStateException: Error starting child\r\n\t\tat org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:686)\r\n\t\tat org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:658)\r\n\t\tat org.apache.catalina.core.StandardHost.addChild(StandardHost.java:713)\r\n\t\tat org.apache.catalina.startup.HostConfig.deployWAR(HostConfig.java:975)\r\n\t\tat org.apache.catalina.startup.HostConfig$DeployWar.run(HostConfig.java:1949)\r\n\t\tat java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:539)\r\n\t\tat java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)\r\n\t\tat org.apache.tomcat.util.threads.InlineExecutorService.execute(InlineExecutorService.java:75)\r\n\t\tat java.base/java.util.concurrent.AbstractExecutorService.submit(AbstractExecutorService.java:123)\r\n\t\tat org.apache.catalina.startup.HostConfig.deployWARs(HostConfig.java:776)\r\n\t\tat org.apache.catalina.startup.HostConfig.deployApps(HostConfig.java:426)\r\n\t\tat org.apache.catalina.startup.HostConfig.check(HostConfig.java:1705)\r\n\t\tat org.apache.catalina.startup.HostConfig.lifecycleEvent(HostConfig.java:305)\r\n\t\tat org.apache.catalina.util.LifecycleBase.fireLifecycleEvent(LifecycleBase.java:123)\r\n\t\tat org.apache.catalina.core.ContainerBase.backgroundProcess(ContainerBase.java:1102)\r\n\t\tat org.apache.catalina.core.ContainerBase$ContainerBackgroundProcessor.processChildren(ContainerBase.java:1301)\r\n\t\tat org.apache.catalina.core.ContainerBase$ContainerBackgroundProcessor.processChildren(ContainerBase.java:1305)\r\n\t\tat org.apache.catalina.core.ContainerBase$ContainerBackgroundProcessor.run(ContainerBase.java:1283)\r\n\t\tat java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:539)\r\n\t\tat java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:305)\r\n\t\tat java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)\r\n\t\tat java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)\r\n\t\tat java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)\r\n\t\tat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\r\n\t\tat java.base/java.lang.Thread.run(Thread.java:833)\r\n\tCaused by: org.apache.catalina.LifecycleException: Failed to start component [StandardEngine[Catalina].StandardHost[localhost].StandardContext[/WebApp_demo_version3]]\r\n\t\tat org.apache.catalina.util.LifecycleBase.handleSubClassException(LifecycleBase.java:440)\r\n\t\tat org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:198)\r\n\t\tat org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:683)\r\n\t\t... 24 more\r\n\tCaused by: java.lang.NoClassDefFoundError: javax/servlet/ServletRequestListener\r\n\t\tat java.base/java.lang.ClassLoader.defineClass1(Native Method)\r\n\t\tat java.base/java.lang.ClassLoader.defineClass(ClassLoader.java:1012)\r\n\t\tat java.base/java.security.SecureClassLoader.defineClass(SecureClassLoader.java:150)\r\n\t\tat org.apache.catalina.loader.WebappClassLoaderBase.findClassInternal(WebappClassLoaderBase.java:2487)\r\n\t\tat org.apache.catalina.loader.WebappClassLoaderBase.findClass(WebappClassLoaderBase.java:865)\r\n\t\tat org.apache.catalina.loader.WebappClassLoaderBase.loadClass(WebappClassLoaderBase.java:1401)\r\n\t\tat org.apache.catalina.loader.WebappClassLoaderBase.loadClass(WebappClassLoaderBase.java:1245)\r\n\t\tat org.apache.catalina.core.DefaultInstanceManager.loadClass(DefaultInstanceManager.java:490)\r\n\t\tat org.apache.catalina.core.DefaultInstanceManager.loadClassMaybePrivileged(DefaultInstanceManager.java:472)\r\n\t\tat org.apache.catalina.core.DefaultInstanceManager.newInstance(DefaultInstanceManager.java:142)\r\n\t\tat org.apache.catalina.core.ApplicationContext.addListener(ApplicationContext.java:1010)\r\n\t\tat org.apache.catalina.core.ApplicationContextFacade.addListener(ApplicationContextFacade.java:549)\r\n\t\tat org.apache.jasper.servlet.JasperInitializer.onStartup(JasperInitializer.java:90)\r\n\t\tat org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:4875)\r\n\t\tat org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\r\n\t\t... 25 more\r\n\tCaused by: java.lang.ClassNotFoundException: javax.servlet.ServletRequestListener\r\n\t\tat org.apache.catalina.loader.WebappClassLoaderBase.loadClass(WebappClassLoaderBase.java:1437)\r\n\t\tat org.apache.catalina.loader.WebappClassLoaderBase.loadClass(WebappClassLoaderBase.java:1245)\r\n\t\t... 40 more\r\n24-Apr-2023 21:02:01.496 INFO [Catalina-utility-1] org.apache.catalina.startup.HostConfig.deployWAR Deployment of web application archive [C:\\Users\\absharma\\Desktop\\TASK\\tomcat\\webapps\\WebApp_demo_version3.war] has finished in [11,038] ms\r\n```\r\n\r\nwhereas I am not even using this servlet package anymore i upgraded to version 6.0.0 which use jakarta.servlet package, any suggestion on same is appreciated.\r\n\r\ntried below points.\r\n\r\n- upgraded servlet jar from 2.5 to 6.0.0\r\n- updated my xml file from web-app_2_5.xsd to web-app_4_0.xsd\r\n\r\nI am expecting to upgrade my application to jdk 17 and tomcat 10.1.7.","title":"JAVA and tomcat upgrade","body":"<p>I am currently upgrading my application java version from jdk 1.7 to 17 and tomcat from 9.0.20 version to 10.1.7, made all the changes related to servelte libs update and removed all the compilation error but when I am deploying my war I am getting below error.</p>\n<pre><code>24-Apr-2023 21:01:50.458 INFO [Catalina-utility-1] org.apache.catalina.startup.HostConfig.deployWAR Deploying web application archive [C:\\Users\\absharma\\Desktop\\TASK\\tomcat\\webapps\\WebApp_demo_version3.war]\n24-Apr-2023 21:02:01.488 INFO [Catalina-utility-1] org.apache.jasper.servlet.TldScanner.scanJars At least one JAR was scanned for TLDs yet contained no TLDs. Enable debug logging for this logger for a complete list of JARs that were scanned but no TLDs were found in them. Skipping unneeded JARs during scanning can improve startup time and JSP compilation time.\n24-Apr-2023 21:02:01.488 SEVERE [Catalina-utility-1] org.apache.catalina.startup.HostConfig.deployWAR Error deploying web application archive [C:\\Users\\absharma\\Desktop\\TASK\\tomcat\\webapps\\WebApp_demo_version3.war]\n    java.lang.IllegalStateException: Error starting child\n        at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:686)\n        at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:658)\n        at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:713)\n        at org.apache.catalina.startup.HostConfig.deployWAR(HostConfig.java:975)\n        at org.apache.catalina.startup.HostConfig$DeployWar.run(HostConfig.java:1949)\n        at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:539)\n        at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)\n        at org.apache.tomcat.util.threads.InlineExecutorService.execute(InlineExecutorService.java:75)\n        at java.base/java.util.concurrent.AbstractExecutorService.submit(AbstractExecutorService.java:123)\n        at org.apache.catalina.startup.HostConfig.deployWARs(HostConfig.java:776)\n        at org.apache.catalina.startup.HostConfig.deployApps(HostConfig.java:426)\n        at org.apache.catalina.startup.HostConfig.check(HostConfig.java:1705)\n        at org.apache.catalina.startup.HostConfig.lifecycleEvent(HostConfig.java:305)\n        at org.apache.catalina.util.LifecycleBase.fireLifecycleEvent(LifecycleBase.java:123)\n        at org.apache.catalina.core.ContainerBase.backgroundProcess(ContainerBase.java:1102)\n        at org.apache.catalina.core.ContainerBase$ContainerBackgroundProcessor.processChildren(ContainerBase.java:1301)\n        at org.apache.catalina.core.ContainerBase$ContainerBackgroundProcessor.processChildren(ContainerBase.java:1305)\n        at org.apache.catalina.core.ContainerBase$ContainerBackgroundProcessor.run(ContainerBase.java:1283)\n        at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:539)\n        at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:305)\n        at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)\n        at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)\n        at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)\n        at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\n        at java.base/java.lang.Thread.run(Thread.java:833)\n    Caused by: org.apache.catalina.LifecycleException: Failed to start component [StandardEngine[Catalina].StandardHost[localhost].StandardContext[/WebApp_demo_version3]]\n        at org.apache.catalina.util.LifecycleBase.handleSubClassException(LifecycleBase.java:440)\n        at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:198)\n        at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:683)\n        ... 24 more\n    Caused by: java.lang.NoClassDefFoundError: javax/servlet/ServletRequestListener\n        at java.base/java.lang.ClassLoader.defineClass1(Native Method)\n        at java.base/java.lang.ClassLoader.defineClass(ClassLoader.java:1012)\n        at java.base/java.security.SecureClassLoader.defineClass(SecureClassLoader.java:150)\n        at org.apache.catalina.loader.WebappClassLoaderBase.findClassInternal(WebappClassLoaderBase.java:2487)\n        at org.apache.catalina.loader.WebappClassLoaderBase.findClass(WebappClassLoaderBase.java:865)\n        at org.apache.catalina.loader.WebappClassLoaderBase.loadClass(WebappClassLoaderBase.java:1401)\n        at org.apache.catalina.loader.WebappClassLoaderBase.loadClass(WebappClassLoaderBase.java:1245)\n        at org.apache.catalina.core.DefaultInstanceManager.loadClass(DefaultInstanceManager.java:490)\n        at org.apache.catalina.core.DefaultInstanceManager.loadClassMaybePrivileged(DefaultInstanceManager.java:472)\n        at org.apache.catalina.core.DefaultInstanceManager.newInstance(DefaultInstanceManager.java:142)\n        at org.apache.catalina.core.ApplicationContext.addListener(ApplicationContext.java:1010)\n        at org.apache.catalina.core.ApplicationContextFacade.addListener(ApplicationContextFacade.java:549)\n        at org.apache.jasper.servlet.JasperInitializer.onStartup(JasperInitializer.java:90)\n        at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:4875)\n        at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\n        ... 25 more\n    Caused by: java.lang.ClassNotFoundException: javax.servlet.ServletRequestListener\n        at org.apache.catalina.loader.WebappClassLoaderBase.loadClass(WebappClassLoaderBase.java:1437)\n        at org.apache.catalina.loader.WebappClassLoaderBase.loadClass(WebappClassLoaderBase.java:1245)\n        ... 40 more\n24-Apr-2023 21:02:01.496 INFO [Catalina-utility-1] org.apache.catalina.startup.HostConfig.deployWAR Deployment of web application archive [C:\\Users\\absharma\\Desktop\\TASK\\tomcat\\webapps\\WebApp_demo_version3.war] has finished in [11,038] ms\n</code></pre>\n<p>whereas I am not even using this servlet package anymore i upgraded to version 6.0.0 which use jakarta.servlet package, any suggestion on same is appreciated.</p>\n<p>tried below points.</p>\n<ul>\n<li>upgraded servlet jar from 2.5 to 6.0.0</li>\n<li>updated my xml file from web-app_2_5.xsd to web-app_4_0.xsd</li>\n</ul>\n<p>I am expecting to upgrade my application to jdk 17 and tomcat 10.1.7.</p>\n"},{"tags":["java","javafx"],"comments":[{"owner":{"account_id":1180113,"reputation":152325,"user_id":1155209,"display_name":"jewelsea"},"score":0,"creation_date":1682312292,"post_id":76088432,"comment_id":134189462,"body_markdown":"Vbox of HBoxes with alignment on the vbox set to center, but there are other options if you prefer.  For instance, you can set halignment on individual cells in a GridPane.  SceneBuilder is good for prototyping layouts, even if you decide not to use FXML.","body":"Vbox of HBoxes with alignment on the vbox set to center, but there are other options if you prefer.  For instance, you can set halignment on individual cells in a GridPane.  SceneBuilder is good for prototyping layouts, even if you decide not to use FXML."},{"owner":{"account_id":8532578,"reputation":39898,"user_id":6395627,"display_name":"Slaw"},"score":1,"creation_date":1682319466,"post_id":76088432,"comment_id":134190347,"body_markdown":"&quot;_with the clear and start buttons sticking out on both sides_&quot; -- If I understand this correctly, then you simply need to configure the nodes in the first column to align to the right when there&#39;s empty space. You can do this for the entire column via a [`ColumnConstraints`](https://openjfx.io/javadoc/20/javafx.graphics/javafx/scene/layout/ColumnConstraints.html) or for individual nodes via [`GridPane#setHalignment(Node, HPos)`](https://openjfx.io/javadoc/20/javafx.graphics/javafx/scene/layout/GridPane.html#setHalignment(javafx.scene.Node,javafx.geometry.HPos)).","body":"&quot;<i>with the clear and start buttons sticking out on both sides</i>&quot; -- If I understand this correctly, then you simply need to configure the nodes in the first column to align to the right when there&#39;s empty space. You can do this for the entire column via a <a href=\"https://openjfx.io/javadoc/20/javafx.graphics/javafx/scene/layout/ColumnConstraints.html\" rel=\"nofollow noreferrer\"><code>ColumnConstraints</code></a> or for individual nodes via <a href=\"https://openjfx.io/javadoc/20/javafx.graphics/javafx/scene/layout/GridPane.html#setHalignment(javafx.scene.Node,javafx.geometry.HPos)\" rel=\"nofollow noreferrer\"><code>GridPane#setHalignment(Node, HPos)</code></a>."},{"owner":{"account_id":70123,"reputation":51175,"user_id":203657,"accept_rate":53,"display_name":"kleopatra"},"score":0,"creation_date":1682327169,"post_id":76088432,"comment_id":134191843,"body_markdown":"_It&#39;s kinda hard to explain to a search engine_ a good first step in research is the api doc https://openjfx.io/javadoc/18/javafx.graphics/javafx/scene/layout/GridPane.html :) That&#39;s for learning which configuration options are available specifically the class you want to use. Another good stepping stone is are - here: layout - tutorials (the javafx tag wiki has references).","body":"<i>It&#39;s kinda hard to explain to a search engine</i> a good first step in research is the api doc <a href=\"https://openjfx.io/javadoc/18/javafx.graphics/javafx/scene/layout/GridPane.html\" rel=\"nofollow noreferrer\">openjfx.io/javadoc/18/javafx.graphics/javafx/scene/layout/&hellip;</a> :) That&#39;s for learning which configuration options are available specifically the class you want to use. Another good stepping stone is are - here: layout - tutorials (the javafx tag wiki has references)."},{"owner":{"account_id":70123,"reputation":51175,"user_id":203657,"accept_rate":53,"display_name":"kleopatra"},"score":0,"creation_date":1682327251,"post_id":76088432,"comment_id":134191855,"body_markdown":"btw: layout classes are meant for using, not for extending - actually, it&#39;s a general rule: never-ever extend if you can achieve the same by configuration","body":"btw: layout classes are meant for using, not for extending - actually, it&#39;s a general rule: never-ever extend if you can achieve the same by configuration"},{"owner":{"account_id":2518243,"reputation":203472,"user_id":2189127,"display_name":"James_D"},"score":0,"creation_date":1682336871,"post_id":76088432,"comment_id":134193982,"body_markdown":"Can you be more specific about the layout you actually want? If you just want the numeric buttons to expand so there is no gap, that is essentially covered in the [standard Oracle tutorial](https://docs.oracle.com/javafx/2/layout/size_align.htm): use `numpad[i].setMaxWidth(Double.MAX_VALUE);` and `GridPane.setFillWidth(numpad[i], true);`. If you want the columns to be the same width, use [`ColumnConstraints`](https://openjfx.io/javadoc/20/javafx.graphics/javafx/scene/layout/ColumnConstraints.html) with `percentWidth` set. If you want something else, explain...","body":"Can you be more specific about the layout you actually want? If you just want the numeric buttons to expand so there is no gap, that is essentially covered in the <a href=\"https://docs.oracle.com/javafx/2/layout/size_align.htm\" rel=\"nofollow noreferrer\">standard Oracle tutorial</a>: use <code>numpad[i].setMaxWidth(Double.MAX_VALUE);</code> and <code>GridPane.setFillWidth(numpad[i], true);</code>. If you want the columns to be the same width, use <a href=\"https://openjfx.io/javadoc/20/javafx.graphics/javafx/scene/layout/ColumnConstraints.html\" rel=\"nofollow noreferrer\"><code>ColumnConstraints</code></a> with <code>percentWidth</code> set. If you want something else, explain..."},{"owner":{"account_id":28382762,"reputation":73,"user_id":21709774,"display_name":"Choosechee"},"score":0,"creation_date":1682351463,"post_id":76088432,"comment_id":134197743,"body_markdown":"@kleopatra Well, shoot, the textbook I was reading extended panes, so I thought that was what you were supposed to do.","body":"@kleopatra Well, shoot, the textbook I was reading extended panes, so I thought that was what you were supposed to do."}],"answers":[{"tags":[],"owner":{"account_id":28382762,"reputation":73,"user_id":21709774,"display_name":"Choosechee"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1682351188,"creation_date":1682351188,"answer_id":76093722,"question_id":76088432,"body_markdown":"&gt; &quot;with the clear and start buttons sticking out on both sides&quot; -- If I understand this correctly, then you simply need to configure the nodes in the first column to align to the right when there&#39;s empty space. You can do this for the entire column via a ColumnConstraints or for individual nodes via GridPane#setHalignment(Node, HPos) -Slaw\r\n\r\nThank you so much! I added:\r\n\r\n```java\r\nColumnConstraints column0 = new ColumnConstraints();\r\ncolumn0.setHalignment(HPos.RIGHT);\r\ngetColumnConstraints().add(column0);\r\n```\r\n\r\nand now it looks like this:\r\n\r\n[![The first column is now aligned to the right, removing the gap][1]][1]\r\n\r\nwhich is how I wanted!\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/9k1kx.png","title":"How to remove a gap between nodes in a GridPane caused by different-sized nodes?","body":"<blockquote>\n<p>&quot;with the clear and start buttons sticking out on both sides&quot; -- If I understand this correctly, then you simply need to configure the nodes in the first column to align to the right when there's empty space. You can do this for the entire column via a ColumnConstraints or for individual nodes via GridPane#setHalignment(Node, HPos) -Slaw</p>\n</blockquote>\n<p>Thank you so much! I added:</p>\n<pre class=\"lang-java prettyprint-override\"><code>ColumnConstraints column0 = new ColumnConstraints();\ncolumn0.setHalignment(HPos.RIGHT);\ngetColumnConstraints().add(column0);\n</code></pre>\n<p>and now it looks like this:</p>\n<p><a href=\"https://i.stack.imgur.com/9k1kx.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/9k1kx.png\" alt=\"The first column is now aligned to the right, removing the gap\" /></a></p>\n<p>which is how I wanted!</p>\n"}],"owner":{"account_id":28382762,"reputation":73,"user_id":21709774,"display_name":"Choosechee"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":66,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":1,"score":0,"last_activity_date":1682351188,"creation_date":1682307699,"question_id":76088432,"body_markdown":"I&#39;m trying to make a number pad with a clear and start button, but because the clear and start button are wider than the number buttons, there&#39;s a gap between the first two columns. Here&#39;s a picture:\r\n\r\nNumberpad with a gap between the first two columns:\r\n\r\n[![numberpad][1]][1]\r\n\r\nI&#39;ve tried looking up answers, but I haven&#39;t found anything like this. It&#39;s kinda hard to explain to a search engine.\r\n\r\nI expected the 0 button to align with the middle of the numpad (which it does), with the clear and start buttons sticking out on both sides. But it aligned the clear button with the 7 button, causing the gap. Here&#39;s a reproducible example:\r\n\r\n```java\r\nimport javafx.application.Application;\r\nimport static javafx.application.Application.launch;\r\nimport javafx.geometry.Insets;\r\nimport javafx.geometry.Pos;\r\nimport javafx.scene.Scene;\r\nimport javafx.scene.control.Button;\r\nimport javafx.scene.layout.GridPane;\r\nimport javafx.scene.text.Font;\r\nimport javafx.stage.Stage;\r\n\r\npublic class ReproducibleGap extends Application {\r\n    @Override\r\n    public void start(Stage primaryStage) {\r\n        Scene scene = new Scene(new ButtonGrid());\r\n        \r\n        primaryStage.setTitle(&quot;Numpad&quot;);\r\n        primaryStage.setScene(scene);\r\n        primaryStage.show();\r\n    }\r\n\r\n\r\n    public static void main(String[] args) {\r\n        launch(args);\r\n    }\r\n}\r\n\r\nclass ButtonGrid extends GridPane {\r\n\r\n    protected Button[] numpad = new Button[10];\r\n    protected Button clear;\r\n    protected Button start;\r\n\r\n    ButtonGrid() {\r\n        Font buttonFont = new Font(18);\r\n        for (int i = 0; i &lt; numpad.length; i++) {\r\n            numpad[i] = new Button(String.valueOf(i));\r\n            numpad[i].setFont(buttonFont);\r\n        }\r\n\r\n        setAlignment(Pos.CENTER);\r\n        setPadding(new Insets(50, 0, 0, 0));\r\n\r\n        for (int i = 0; i &lt; 3; i++) {\r\n            addRow(i, numpad[i * 3 + 1], numpad[i * 3 + 2], numpad[i * 3 + 3]);\r\n        }\r\n\r\n        clear = new Button(&quot;Clear&quot;);\r\n        clear.setFont(buttonFont);\r\n\r\n        start = new Button(&quot;Start&quot;);\r\n        start.setFont(buttonFont);\r\n\r\n        addRow(3, clear, numpad[0], start);\r\n    }\r\n}\r\n```\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/qTEzX.png","title":"How to remove a gap between nodes in a GridPane caused by different-sized nodes?","body":"<p>I'm trying to make a number pad with a clear and start button, but because the clear and start button are wider than the number buttons, there's a gap between the first two columns. Here's a picture:</p>\n<p>Numberpad with a gap between the first two columns:</p>\n<p><a href=\"https://i.stack.imgur.com/qTEzX.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/qTEzX.png\" alt=\"numberpad\" /></a></p>\n<p>I've tried looking up answers, but I haven't found anything like this. It's kinda hard to explain to a search engine.</p>\n<p>I expected the 0 button to align with the middle of the numpad (which it does), with the clear and start buttons sticking out on both sides. But it aligned the clear button with the 7 button, causing the gap. Here's a reproducible example:</p>\n<pre class=\"lang-java prettyprint-override\"><code>import javafx.application.Application;\nimport static javafx.application.Application.launch;\nimport javafx.geometry.Insets;\nimport javafx.geometry.Pos;\nimport javafx.scene.Scene;\nimport javafx.scene.control.Button;\nimport javafx.scene.layout.GridPane;\nimport javafx.scene.text.Font;\nimport javafx.stage.Stage;\n\npublic class ReproducibleGap extends Application {\n    @Override\n    public void start(Stage primaryStage) {\n        Scene scene = new Scene(new ButtonGrid());\n        \n        primaryStage.setTitle(&quot;Numpad&quot;);\n        primaryStage.setScene(scene);\n        primaryStage.show();\n    }\n\n\n    public static void main(String[] args) {\n        launch(args);\n    }\n}\n\nclass ButtonGrid extends GridPane {\n\n    protected Button[] numpad = new Button[10];\n    protected Button clear;\n    protected Button start;\n\n    ButtonGrid() {\n        Font buttonFont = new Font(18);\n        for (int i = 0; i &lt; numpad.length; i++) {\n            numpad[i] = new Button(String.valueOf(i));\n            numpad[i].setFont(buttonFont);\n        }\n\n        setAlignment(Pos.CENTER);\n        setPadding(new Insets(50, 0, 0, 0));\n\n        for (int i = 0; i &lt; 3; i++) {\n            addRow(i, numpad[i * 3 + 1], numpad[i * 3 + 2], numpad[i * 3 + 3]);\n        }\n\n        clear = new Button(&quot;Clear&quot;);\n        clear.setFont(buttonFont);\n\n        start = new Button(&quot;Start&quot;);\n        start.setFont(buttonFont);\n\n        addRow(3, clear, numpad[0], start);\n    }\n}\n</code></pre>\n"},{"tags":["java","android"],"comments":[{"owner":{"account_id":10587710,"reputation":2772,"user_id":7799462,"display_name":"Halil Ozel"},"score":0,"creation_date":1682320897,"post_id":76088373,"comment_id":134190561,"body_markdown":"You should add Logs or more details.","body":"You should add Logs or more details."},{"owner":{"account_id":15431364,"reputation":770,"user_id":11132702,"display_name":"private static"},"score":0,"creation_date":1682375166,"post_id":76088373,"comment_id":134202488,"body_markdown":"Try completely uninstalling and reinstalling the app. Or rewrite the whole MainActivity.class from scratch","body":"Try completely uninstalling and reinstalling the app. Or rewrite the whole MainActivity.class from scratch"}],"answers":[{"tags":[],"owner":{"account_id":5849714,"reputation":86,"user_id":5362509,"display_name":"Lakshmi"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1682351107,"creation_date":1682331974,"answer_id":76090913,"question_id":76088373,"body_markdown":"  \r\nChange getApplicationContext() to **MainActivity.this** in your Toast statement of your MainActivity-&gt;listView.setOnItemClickListener method. Then the Toast message will show up. I tried it and it worked fine. Here is my tested code.\r\n\r\n        ListView lv = findViewById(R.id.lstv);\r\n        List&lt;String&gt; arr = new ArrayList&lt;&gt;();\r\n        arr.add(&quot;aa&quot;);\r\n        arr.add(&quot;bb&quot;);\r\n        arr.add(&quot;cc&quot;);\r\n        arr.add(&quot;dd&quot;);\r\n        arr.add(&quot;ee&quot;);\r\n        ListAdapter adapter = new ArrayAdapter&lt;String&gt;(this, androidx.appcompat.R.layout.support_simple_spinner_dropdown_item, arr);\r\n        lv.setAdapter(adapter);\r\n\r\n        lv.setOnItemClickListener(new AdapterView.OnItemClickListener() {\r\n            @Override\r\n            public void onItemClick(AdapterView&lt;?&gt; parent, View view, int position, long id) {\r\n                Toast.makeText(MainActivity.this, &quot;Hello&quot;, Toast.LENGTH_LONG).show();\r\n\r\n            }\r\n        });","title":"Can&#39;s show toast when click - Android app","body":"<p>Change getApplicationContext() to <strong>MainActivity.this</strong> in your Toast statement of your MainActivity-&gt;listView.setOnItemClickListener method. Then the Toast message will show up. I tried it and it worked fine. Here is my tested code.</p>\n<pre><code>    ListView lv = findViewById(R.id.lstv);\n    List&lt;String&gt; arr = new ArrayList&lt;&gt;();\n    arr.add(&quot;aa&quot;);\n    arr.add(&quot;bb&quot;);\n    arr.add(&quot;cc&quot;);\n    arr.add(&quot;dd&quot;);\n    arr.add(&quot;ee&quot;);\n    ListAdapter adapter = new ArrayAdapter&lt;String&gt;(this, androidx.appcompat.R.layout.support_simple_spinner_dropdown_item, arr);\n    lv.setAdapter(adapter);\n\n    lv.setOnItemClickListener(new AdapterView.OnItemClickListener() {\n        @Override\n        public void onItemClick(AdapterView&lt;?&gt; parent, View view, int position, long id) {\n            Toast.makeText(MainActivity.this, &quot;Hello&quot;, Toast.LENGTH_LONG).show();\n\n        }\n    });\n</code></pre>\n"}],"owner":{"account_id":25814844,"reputation":1,"user_id":19554966,"display_name":"Theodore Myker"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":78,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1682351107,"creation_date":1682306575,"question_id":76088373,"body_markdown":"I have a problem with listview, I can&#39;t click on item listview, I find problem in `Checkbox` it understand checkbox.setoncheckedchangeLisnter when Click, how can fix it?\r\n\r\nfullcode: https://github.com/QuDaMyker/listView\r\n\r\n`Adapter.java`\r\n[Adapter](https://i.stack.imgur.com/i3HYR.png)\r\n```java\r\npackage com.example.testlistview;\r\n\r\nimport android.content.Context;\r\nimport android.view.LayoutInflater;\r\nimport android.view.View;\r\nimport android.view.ViewGroup;\r\nimport android.widget.ArrayAdapter;\r\nimport android.widget.CheckBox;\r\nimport android.widget.TextView;\r\n\r\nimport androidx.annotation.NonNull;\r\nimport androidx.annotation.Nullable;\r\n\r\nimport java.util.List;\r\n\r\npublic class Adapter extends ArrayAdapter&lt;TodoClass&gt; {\r\n    private Context context;\r\n    private List&lt;TodoClass&gt; list;\r\n\r\n    public Adapter(@NonNull Context context, int resource, @NonNull List&lt;TodoClass&gt; objects) {\r\n        super(context, resource, objects);\r\n        this.context = context;\r\n        this.list = objects;\r\n    }\r\n\r\n    @NonNull\r\n    @Override\r\n    public View getView(int position, @Nullable View convertView, @NonNull ViewGroup parent) {\r\n        convertView = LayoutInflater.from(context.getApplicationContext()).inflate(R.layout.item_listview, parent, false);\r\n\r\n        TextView stt = convertView.findViewById(R.id.stt);\r\n        stt.setText(String.valueOf(position));\r\n\r\n        TextView title = convertView.findViewById(R.id.title);\r\n        title.setText(list.get(position).getTitle());\r\n\r\n        TextView date = convertView.findViewById(R.id.date);\r\n        date.setText(list.get(position).getDate());\r\n\r\n        CheckBox checkBox = convertView.findViewById(R.id.checkBox);\r\n        checkBox.setChecked(list.get(position).getChecked());\r\n\r\n        return convertView;\r\n    }\r\n}\r\n\r\n```\r\n\r\n`MainActivity`\r\n[MainActivity](https://i.stack.imgur.com/SoSQC.png)\r\n```java\r\npackage com.example.testlistview;\r\n\r\nimport android.os.Bundle;\r\nimport android.view.View;\r\nimport android.widget.AdapterView;\r\nimport android.widget.CheckBox;\r\nimport android.widget.ListView;\r\nimport android.widget.Toast;\r\n\r\nimport androidx.appcompat.app.AppCompatActivity;\r\n\r\nimport java.util.ArrayList;\r\nimport java.util.List;\r\n\r\npublic class MainActivity extends AppCompatActivity {\r\n    private ListView listView;\r\n    private List&lt;TodoClass&gt; list;\r\n    private Adapter adapter;\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_main);\r\n\r\n        listView = findViewById(R.id.listView);\r\n        list = new ArrayList&lt;&gt;();\r\n        list.add(new TodoClass(&quot;1&quot;, &quot;1&quot;, &quot;04/24/2003&quot;, false));\r\n        list.add(new TodoClass(&quot;2&quot;, &quot;1&quot;, &quot;04/24/2003&quot;, false));\r\n        list.add(new TodoClass(&quot;3&quot;, &quot;1&quot;, &quot;04/24/2003&quot;, false));\r\n        list.add(new TodoClass(&quot;4&quot;, &quot;1&quot;, &quot;04/24/2003&quot;, false));\r\n        list.add(new TodoClass(&quot;5&quot;, &quot;1&quot;, &quot;04/24/2003&quot;, false));\r\n        list.add(new TodoClass(&quot;6&quot;, &quot;1&quot;, &quot;04/24/2003&quot;, false));\r\n        list.add(new TodoClass(&quot;7&quot;, &quot;1&quot;, &quot;04/24/2003&quot;, false));\r\n        list.add(new TodoClass(&quot;8&quot;, &quot;1&quot;, &quot;04/24/2003&quot;, false));\r\n        list.add(new TodoClass(&quot;8&quot;, &quot;1&quot;, &quot;04/24/2003&quot;, false));\r\n\r\n\r\n\r\n        adapter = new Adapter(MainActivity.this, R.layout.item_listview, list);\r\n        listView.setAdapter(adapter);\r\n\r\n        listView.setOnItemClickListener(new AdapterView.OnItemClickListener() {\r\n            @Override\r\n            public void onItemClick(AdapterView&lt;?&gt; parent, View view, int position, long id) {\r\n                Toast.makeText(getApplicationContext(), &quot;Click&quot;, Toast.LENGTH_SHORT).show();\r\n                CheckBox checkBox = view.findViewById(R.id.checkBox);\r\n\r\n                list.get(position).setChecked(!list.get(position).getChecked());\r\n                checkBox.setChecked(list.get(position).getChecked());\r\n            }\r\n        });\r\n\r\n\r\n\r\n    }\r\n}\r\n\r\n```\r\n\r\n\r\n`TodoClass`\r\n[TodoClass](https://i.stack.imgur.com/5OqIm.png)\r\n```java\r\npackage com.example.testlistview;\r\n\r\npublic class TodoClass {\r\n    private String Title;\r\n    private String Desc;\r\n    private String Date;\r\n    private Boolean Checked;\r\n\r\n    public TodoClass(String title, String desc, String date, Boolean checked) {\r\n        Title = title;\r\n        Desc = desc;\r\n        Date = date;\r\n        Checked = checked;\r\n    }\r\n\r\n    public String getTitle() {\r\n        return Title;\r\n    }\r\n\r\n    public void setTitle(String title) {\r\n        Title = title;\r\n    }\r\n\r\n    public String getDesc() {\r\n        return Desc;\r\n    }\r\n\r\n    public void setDesc(String desc) {\r\n        Desc = desc;\r\n    }\r\n\r\n    public String getDate() {\r\n        return Date;\r\n    }\r\n\r\n    public void setDate(String date) {\r\n        Date = date;\r\n    }\r\n\r\n    public Boolean getChecked() {\r\n        return Checked;\r\n    }\r\n\r\n    public void setChecked(Boolean checked) {\r\n        Checked = checked;\r\n    }\r\n}\r\n\r\n```\r\n\r\n\r\nThanks for your help, i stuck in this bug so long time :((((\r\n\r\nnot working Toast  \r\nAndroid don&#39;t show error ","title":"Can&#39;s show toast when click - Android app","body":"<p>I have a problem with listview, I can't click on item listview, I find problem in <code>Checkbox</code> it understand checkbox.setoncheckedchangeLisnter when Click, how can fix it?</p>\n<p>fullcode: <a href=\"https://github.com/QuDaMyker/listView\" rel=\"nofollow noreferrer\">https://github.com/QuDaMyker/listView</a></p>\n<p><code>Adapter.java</code>\n<a href=\"https://i.stack.imgur.com/i3HYR.png\" rel=\"nofollow noreferrer\">Adapter</a></p>\n<pre class=\"lang-java prettyprint-override\"><code>package com.example.testlistview;\n\nimport android.content.Context;\nimport android.view.LayoutInflater;\nimport android.view.View;\nimport android.view.ViewGroup;\nimport android.widget.ArrayAdapter;\nimport android.widget.CheckBox;\nimport android.widget.TextView;\n\nimport androidx.annotation.NonNull;\nimport androidx.annotation.Nullable;\n\nimport java.util.List;\n\npublic class Adapter extends ArrayAdapter&lt;TodoClass&gt; {\n    private Context context;\n    private List&lt;TodoClass&gt; list;\n\n    public Adapter(@NonNull Context context, int resource, @NonNull List&lt;TodoClass&gt; objects) {\n        super(context, resource, objects);\n        this.context = context;\n        this.list = objects;\n    }\n\n    @NonNull\n    @Override\n    public View getView(int position, @Nullable View convertView, @NonNull ViewGroup parent) {\n        convertView = LayoutInflater.from(context.getApplicationContext()).inflate(R.layout.item_listview, parent, false);\n\n        TextView stt = convertView.findViewById(R.id.stt);\n        stt.setText(String.valueOf(position));\n\n        TextView title = convertView.findViewById(R.id.title);\n        title.setText(list.get(position).getTitle());\n\n        TextView date = convertView.findViewById(R.id.date);\n        date.setText(list.get(position).getDate());\n\n        CheckBox checkBox = convertView.findViewById(R.id.checkBox);\n        checkBox.setChecked(list.get(position).getChecked());\n\n        return convertView;\n    }\n}\n\n</code></pre>\n<p><code>MainActivity</code>\n<a href=\"https://i.stack.imgur.com/SoSQC.png\" rel=\"nofollow noreferrer\">MainActivity</a></p>\n<pre class=\"lang-java prettyprint-override\"><code>package com.example.testlistview;\n\nimport android.os.Bundle;\nimport android.view.View;\nimport android.widget.AdapterView;\nimport android.widget.CheckBox;\nimport android.widget.ListView;\nimport android.widget.Toast;\n\nimport androidx.appcompat.app.AppCompatActivity;\n\nimport java.util.ArrayList;\nimport java.util.List;\n\npublic class MainActivity extends AppCompatActivity {\n    private ListView listView;\n    private List&lt;TodoClass&gt; list;\n    private Adapter adapter;\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_main);\n\n        listView = findViewById(R.id.listView);\n        list = new ArrayList&lt;&gt;();\n        list.add(new TodoClass(&quot;1&quot;, &quot;1&quot;, &quot;04/24/2003&quot;, false));\n        list.add(new TodoClass(&quot;2&quot;, &quot;1&quot;, &quot;04/24/2003&quot;, false));\n        list.add(new TodoClass(&quot;3&quot;, &quot;1&quot;, &quot;04/24/2003&quot;, false));\n        list.add(new TodoClass(&quot;4&quot;, &quot;1&quot;, &quot;04/24/2003&quot;, false));\n        list.add(new TodoClass(&quot;5&quot;, &quot;1&quot;, &quot;04/24/2003&quot;, false));\n        list.add(new TodoClass(&quot;6&quot;, &quot;1&quot;, &quot;04/24/2003&quot;, false));\n        list.add(new TodoClass(&quot;7&quot;, &quot;1&quot;, &quot;04/24/2003&quot;, false));\n        list.add(new TodoClass(&quot;8&quot;, &quot;1&quot;, &quot;04/24/2003&quot;, false));\n        list.add(new TodoClass(&quot;8&quot;, &quot;1&quot;, &quot;04/24/2003&quot;, false));\n\n\n\n        adapter = new Adapter(MainActivity.this, R.layout.item_listview, list);\n        listView.setAdapter(adapter);\n\n        listView.setOnItemClickListener(new AdapterView.OnItemClickListener() {\n            @Override\n            public void onItemClick(AdapterView&lt;?&gt; parent, View view, int position, long id) {\n                Toast.makeText(getApplicationContext(), &quot;Click&quot;, Toast.LENGTH_SHORT).show();\n                CheckBox checkBox = view.findViewById(R.id.checkBox);\n\n                list.get(position).setChecked(!list.get(position).getChecked());\n                checkBox.setChecked(list.get(position).getChecked());\n            }\n        });\n\n\n\n    }\n}\n\n</code></pre>\n<p><code>TodoClass</code>\n<a href=\"https://i.stack.imgur.com/5OqIm.png\" rel=\"nofollow noreferrer\">TodoClass</a></p>\n<pre class=\"lang-java prettyprint-override\"><code>package com.example.testlistview;\n\npublic class TodoClass {\n    private String Title;\n    private String Desc;\n    private String Date;\n    private Boolean Checked;\n\n    public TodoClass(String title, String desc, String date, Boolean checked) {\n        Title = title;\n        Desc = desc;\n        Date = date;\n        Checked = checked;\n    }\n\n    public String getTitle() {\n        return Title;\n    }\n\n    public void setTitle(String title) {\n        Title = title;\n    }\n\n    public String getDesc() {\n        return Desc;\n    }\n\n    public void setDesc(String desc) {\n        Desc = desc;\n    }\n\n    public String getDate() {\n        return Date;\n    }\n\n    public void setDate(String date) {\n        Date = date;\n    }\n\n    public Boolean getChecked() {\n        return Checked;\n    }\n\n    public void setChecked(Boolean checked) {\n        Checked = checked;\n    }\n}\n\n</code></pre>\n<p>Thanks for your help, i stuck in this bug so long time :((((</p>\n<p>not working Toast<br />\nAndroid don't show error</p>\n"},{"tags":["java","android","google-translate"],"answers":[{"tags":[],"owner":{"account_id":2293110,"reputation":6721,"user_id":2015318,"accept_rate":82,"display_name":"StarsSky"},"down_vote_count":0,"up_vote_count":6,"is_accepted":true,"score":6,"last_activity_date":1360426332,"creation_date":1360426332,"answer_id":14789986,"question_id":14789937,"body_markdown":"Google translate provide API for retrieving translations. You should use json object and GET request to the google translate server.\r\nIn [this link][1] you can find the official Developer&#39;s Guide with code examples.\r\n\r\n\r\n  [1]: https://developers.google.com/translate/v2/using_rest?hl=it","title":"How to use Google translate API from code","body":"<p>Google translate provide API for retrieving translations. You should use json object and GET request to the google translate server.\nIn <a href=\"https://developers.google.com/translate/v2/using_rest?hl=it\" rel=\"noreferrer\">this link</a> you can find the official Developer's Guide with code examples.</p>\n"},{"tags":[],"owner":{"account_id":23126893,"reputation":21,"user_id":17232557,"display_name":"nopenope"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1647502683,"creation_date":1647502683,"answer_id":71508569,"question_id":14789937,"body_markdown":"You will get json response from this\r\n\r\nhttps://translate.googleapis.com/translate_a/single?client=gtx&amp;sl=en&amp;tl=ru&amp;dt=t&amp;dt=bd&amp;dj=1&amp;q=hello\r\n\r\nHere &#39;hello&#39; is translated to russian\r\n\r\nNO API KEY REQUIRED","title":"How to use Google translate API from code","body":"<p>You will get json response from this</p>\n<p><a href=\"https://translate.googleapis.com/translate_a/single?client=gtx&amp;sl=en&amp;tl=ru&amp;dt=t&amp;dt=bd&amp;dj=1&amp;q=hello\" rel=\"nofollow noreferrer\">https://translate.googleapis.com/translate_a/single?client=gtx&amp;sl=en&amp;tl=ru&amp;dt=t&amp;dt=bd&amp;dj=1&amp;q=hello</a></p>\n<p>Here 'hello' is translated to russian</p>\n<p>NO API KEY REQUIRED</p>\n"}],"owner":{"account_id":2347509,"reputation":45,"user_id":2057343,"display_name":"user2057343"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":12243,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"accepted_answer_id":14789986,"answer_count":2,"score":4,"last_activity_date":1682350917,"creation_date":1360425996,"question_id":14789937,"body_markdown":"I am trying to create an app that send a word to *translate.google.com*, take the result of the translation and display it to the user. I composed the URL but I do not know how to extract the word/phrase from the webpage. \r\n\r\nExample pseudo:\r\nen is code for english and es is code for spanish\r\n\r\n    String from = &quot;en&quot;;\r\n    String to = &quot;es&quot;;\r\n    String word = &quot;hello&quot;; //this will be user input text really\r\n    String URL = &quot;http://www.translate.google.com/#&quot; + from + &quot;/&quot; + to + &quot;/&quot; + word;\r\n\r\nTherefore the request URL will look like http://www.translate.google.com/#en/es/hello\r\n\r\nI now need to be able to retrieve the information from the result box and place it in a String so I can display it to the user. \r\n","title":"How to use Google translate API from code","body":"<p>I am trying to create an app that send a word to <em>translate.google.com</em>, take the result of the translation and display it to the user. I composed the URL but I do not know how to extract the word/phrase from the webpage. </p>\n\n<p>Example pseudo:\nen is code for english and es is code for spanish</p>\n\n<pre><code>String from = \"en\";\nString to = \"es\";\nString word = \"hello\"; //this will be user input text really\nString URL = \"http://www.translate.google.com/#\" + from + \"/\" + to + \"/\" + word;\n</code></pre>\n\n<p>Therefore the request URL will look like <a href=\"http://www.translate.google.com/#en/es/hello\" rel=\"nofollow\">http://www.translate.google.com/#en/es/hello</a></p>\n\n<p>I now need to be able to retrieve the information from the result box and place it in a String so I can display it to the user. </p>\n"},{"tags":["java","serialization","apache-kafka","apache-kafka-streams","avro"],"owner":{"account_id":14197413,"reputation":169,"user_id":10256308,"display_name":"David Breton"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":257,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1682350551,"creation_date":1682327930,"question_id":76090400,"body_markdown":"I wrote a Serde for Kafka streams. My Serde class has generic type. It works fine when I explicitly pass it in an API method (overriding the default) but it doesn&#39;t work when I specify it via the ```Properties``` to set it as default.\r\n\r\nSo I look up the [docs][1] and it indeed tells me I cannot do this:\r\n\r\n&gt; If a ```Serde``` is specified via ```Properties```, the ```Serde``` class cannot have generic types, i.e., a class ```MySerde&lt;T extends Number&gt; implements Serde&lt;T&gt;``` cannot be used. This implies that you cannot use any ```Serde``` that is created via ```Serdes.serdeFrom(Serializer&lt;T&gt;, Deserializer&lt;T&gt;)```. Only fully typed ```Serde``` classes like ```MySerde implements Serde&lt;MyCustomType&gt;``` are supported due to Java type erasure.\r\n\r\nOk, fine. However there is [SpecificAvroSerde][2] which works just fine when specified in the ```Properties``` like so:\r\n```\r\nstreamsConfiguration.put(StreamsConfig.VALUE_SERDE_CLASS_CONFIG, SpecificAvroSerde.class);\r\n```\r\nHere&#39;s the first few lines of the class definition from GitHub\r\n\r\n```\r\npublic class SpecificAvroSerde&lt;T extends org.apache.avro.specific.SpecificRecord&gt; implements Serde&lt;T&gt; {\r\n  private final Serde&lt;T&gt; inner;\r\n\r\n  public SpecificAvroSerde() {\r\n    inner = Serdes.serdeFrom(new SpecificAvroSerializer&lt;T&gt;(), new SpecificAvroDeserializer&lt;T&gt;());\r\n  }\r\n```\r\nIsn&#39;t that a direct contradiction of the documentation? Why is it that ```SpecificAvroSerde``` works just fine when specified as default in the ```Properties```?\r\n\r\n  [1]: https://docs.confluent.io/platform/current/streams/developer-guide/datatypes.html#kstreams-data-types-and-serialization\r\n  [2]: https://github.com/confluentinc/schema-registry/blob/master/avro-serde/src/main/java/io/confluent/kafka/streams/serdes/avro/SpecificAvroSerde.java","title":"Kafka Streams Serdes for Generic type","body":"<p>I wrote a Serde for Kafka streams. My Serde class has generic type. It works fine when I explicitly pass it in an API method (overriding the default) but it doesn't work when I specify it via the <code>Properties</code> to set it as default.</p>\n<p>So I look up the <a href=\"https://docs.confluent.io/platform/current/streams/developer-guide/datatypes.html#kstreams-data-types-and-serialization\" rel=\"nofollow noreferrer\">docs</a> and it indeed tells me I cannot do this:</p>\n<blockquote>\n<p>If a <code>Serde</code> is specified via <code>Properties</code>, the <code>Serde</code> class cannot have generic types, i.e., a class <code>MySerde&lt;T extends Number&gt; implements Serde&lt;T&gt;</code> cannot be used. This implies that you cannot use any <code>Serde</code> that is created via <code>Serdes.serdeFrom(Serializer&lt;T&gt;, Deserializer&lt;T&gt;)</code>. Only fully typed <code>Serde</code> classes like <code>MySerde implements Serde&lt;MyCustomType&gt;</code> are supported due to Java type erasure.</p>\n</blockquote>\n<p>Ok, fine. However there is <a href=\"https://github.com/confluentinc/schema-registry/blob/master/avro-serde/src/main/java/io/confluent/kafka/streams/serdes/avro/SpecificAvroSerde.java\" rel=\"nofollow noreferrer\">SpecificAvroSerde</a> which works just fine when specified in the <code>Properties</code> like so:</p>\n<pre><code>streamsConfiguration.put(StreamsConfig.VALUE_SERDE_CLASS_CONFIG, SpecificAvroSerde.class);\n</code></pre>\n<p>Here's the first few lines of the class definition from GitHub</p>\n<pre><code>public class SpecificAvroSerde&lt;T extends org.apache.avro.specific.SpecificRecord&gt; implements Serde&lt;T&gt; {\n  private final Serde&lt;T&gt; inner;\n\n  public SpecificAvroSerde() {\n    inner = Serdes.serdeFrom(new SpecificAvroSerializer&lt;T&gt;(), new SpecificAvroDeserializer&lt;T&gt;());\n  }\n</code></pre>\n<p>Isn't that a direct contradiction of the documentation? Why is it that <code>SpecificAvroSerde</code> works just fine when specified as default in the <code>Properties</code>?</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":3064268,"reputation":3881,"user_id":2596334,"accept_rate":97,"display_name":"Scott Solmer"},"score":3,"creation_date":1427283535,"post_id":29254573,"comment_id":46712147,"body_markdown":"Sharing your research helps everyone. Tell us what you&#39;ve tried and why it didn’t meet your needs. This demonstrates that you’ve taken the time to try to help yourself, it saves us from reiterating obvious answers, and most of all it helps you get a more specific and relevant answer! Also see [how to ask](http://stackoverflow.com/help/how-to-ask)","body":"Sharing your research helps everyone. Tell us what you&#39;ve tried and why it didn’t meet your needs. This demonstrates that you’ve taken the time to try to help yourself, it saves us from reiterating obvious answers, and most of all it helps you get a more specific and relevant answer! Also see <a href=\"http://stackoverflow.com/help/how-to-ask\">how to ask</a>"},{"owner":{"account_id":5352280,"reputation":491,"user_id":4266091,"accept_rate":80,"display_name":"McShep"},"score":0,"creation_date":1427283615,"post_id":29254573,"comment_id":46712199,"body_markdown":"in some exceptional languages (such as Scala) yes as you are able to define functions within the interface, though in genereally no (such as c#), as you would never be able to access the parametes","body":"in some exceptional languages (such as Scala) yes as you are able to define functions within the interface, though in genereally no (such as c#), as you would never be able to access the parametes"},{"owner":{"account_id":1485367,"reputation":122993,"user_id":1393766,"display_name":"Pshemo"},"score":1,"creation_date":1427283765,"post_id":29254573,"comment_id":46712293,"body_markdown":"`interface` purpose is to define interface, not state. State is *class* domain. Also `private` means that it will not be accessible directly by subclass so how would you want to access it?","body":"<code>interface</code> purpose is to define interface, not state. State is <i>class</i> domain. Also <code>private</code> means that it will not be accessible directly by subclass so how would you want to access it?"},{"owner":{"account_id":740820,"reputation":47963,"user_id":2353911,"accept_rate":100,"display_name":"Mena"},"score":1,"creation_date":1427283877,"post_id":29254573,"comment_id":46712370,"body_markdown":"I&#39;m voting to close this question as off-topic because this is addressed eloquently by the [official Java documentation](http://docs.oracle.com/javase/tutorial/java/IandI/interfaceDef.html), which the user could have consulted prior to asking.","body":"I&#39;m voting to close this question as off-topic because this is addressed eloquently by the <a href=\"http://docs.oracle.com/javase/tutorial/java/IandI/interfaceDef.html\" rel=\"nofollow noreferrer\">official Java documentation</a>, which the user could have consulted prior to asking."},{"owner":{"account_id":5352280,"reputation":491,"user_id":4266091,"accept_rate":80,"display_name":"McShep"},"score":0,"creation_date":1427283941,"post_id":29254573,"comment_id":46712415,"body_markdown":"I agree, though a language was not specified by the original question","body":"I agree, though a language was not specified by the original question"},{"owner":{"account_id":740820,"reputation":47963,"user_id":2353911,"accept_rate":100,"display_name":"Mena"},"score":0,"creation_date":1427283987,"post_id":29254573,"comment_id":46712444,"body_markdown":"@McShep that would have made it even a worse question in my opinion.","body":"@McShep that would have made it even a worse question in my opinion."}],"answers":[{"tags":[],"owner":{"account_id":312681,"reputation":7087,"user_id":626894,"accept_rate":75,"display_name":"Bill Gregg"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1427283681,"creation_date":1427283681,"answer_id":29254659,"question_id":29254573,"body_markdown":"Having private or protected members in an interface doesn&#39;t make sense conceptually. By definition something that is &quot;private&quot; isn&#39;t exposed and therefore, anyone consuming the interface would not care if the implementing class had a private email field or not.\r\n\r\nOnly public members matter to the code consuming the interface.","title":"Can we use private or protected member variables in an interface?","body":"<p>Having private or protected members in an interface doesn't make sense conceptually. By definition something that is \"private\" isn't exposed and therefore, anyone consuming the interface would not care if the implementing class had a private email field or not.</p>\n\n<p>Only public members matter to the code consuming the interface.</p>\n"},{"tags":[],"owner":{"account_id":5986627,"reputation":161,"user_id":4704031,"display_name":"Dani"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1427283685,"creation_date":1427283685,"answer_id":29254663,"question_id":29254573,"body_markdown":"being java\r\n\r\n&gt; only public, static &amp; final are permitted\r\n\r\nYou should use an `abstract` class instead of an `interface` if you want to declare its fields.","title":"Can we use private or protected member variables in an interface?","body":"<p>being java</p>\n\n<blockquote>\n  <p>only public, static &amp; final are permitted</p>\n</blockquote>\n\n<p>You should use an <code>abstract</code> class instead of an <code>interface</code> if you want to declare its fields.</p>\n"}],"owner":{"account_id":2651905,"reputation":191,"user_id":2293345,"accept_rate":0,"display_name":"Tamanna Iruu"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":15773,"favorite_count":0,"down_vote_count":1,"up_vote_count":9,"answer_count":2,"score":8,"last_activity_date":1682350146,"creation_date":1427283442,"question_id":29254573,"body_markdown":"Is it possible to define an interface like this:\r\n   \r\n    public interface Test{\r\n       public string name1;\r\n       private String email;\r\n       protected pass;\r\n    }\r\n","title":"Can we use private or protected member variables in an interface?","body":"<p>Is it possible to define an interface like this:</p>\n\n<pre><code>public interface Test{\n   public string name1;\n   private String email;\n   protected pass;\n}\n</code></pre>\n"},{"tags":["java","selenium-webdriver","testng","pageobjects","webdriver-manager"],"comments":[{"owner":{"account_id":70917,"reputation":17743,"user_id":205233,"accept_rate":90,"display_name":"Filburt"},"score":1,"creation_date":1682319899,"post_id":76089262,"comment_id":134190405,"body_markdown":"Does this answer your question? [What is a NullPointerException, and how do I fix it?](https://stackoverflow.com/questions/218384/what-is-a-nullpointerexception-and-how-do-i-fix-it)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/218384/what-is-a-nullpointerexception-and-how-do-i-fix-it\">What is a NullPointerException, and how do I fix it?</a>"},{"owner":{"account_id":28394370,"reputation":11,"user_id":21719642,"display_name":"Hoxzy"},"score":0,"creation_date":1682324154,"post_id":76089262,"comment_id":134191227,"body_markdown":"Fixed it, i forgot to add public access modifiers for methods in TestBase class, this solved the problem","body":"Fixed it, i forgot to add public access modifiers for methods in TestBase class, this solved the problem"},{"owner":{"account_id":2772450,"reputation":22416,"user_id":2386774,"display_name":"JeffC"},"score":1,"creation_date":1682344298,"post_id":76089262,"comment_id":134195745,"body_markdown":"Since this question is already answered, you should either delete the question or add your own answer and accept it so it doesn&#39;t appear to be unanswered.","body":"Since this question is already answered, you should either delete the question or add your own answer and accept it so it doesn&#39;t appear to be unanswered."}],"answers":[{"tags":[],"owner":{"account_id":28394370,"reputation":11,"user_id":21719642,"display_name":"Hoxzy"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1682350083,"creation_date":1682350083,"answer_id":76093553,"question_id":76089262,"body_markdown":"Fixed it, i forgot to add public access modifiers for methods in TestBase class, this solved the problem","title":"NullPointerException Cannot invoke &quot;org.openqa.selenium.SearchContext.findElement(org.openqa.selenium.By)&quot; because &quot;this.searchContext&quot; is null","body":"<p>Fixed it, i forgot to add public access modifiers for methods in TestBase class, this solved the problem</p>\n"}],"owner":{"account_id":28394370,"reputation":11,"user_id":21719642,"display_name":"Hoxzy"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":487,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":1,"score":0,"last_activity_date":1682350083,"creation_date":1682319321,"question_id":76089262,"body_markdown":"I am encountering a java.lang.NullPointerException error when trying to run my Selenium test with TestNG. The error message states: Cannot invoke **&quot;org.openqa.selenium.SearchContext.findElement(org.openqa.selenium.By)&quot; because &quot;this.searchContext&quot; is null.**\r\n\r\nI have provided the relevant code snippets below:\r\n\r\nLandingPage (Page Object class):\r\n\r\n```java\r\nimport org.openqa.selenium.WebDriver;\r\nimport org.openqa.selenium.WebElement;\r\nimport org.openqa.selenium.support.FindBy;\r\nimport org.openqa.selenium.support.PageFactory;\r\n\r\npublic class LandingPage {\r\n\r\n    @FindBy(linkText = &quot;Enter the Store&quot;)\r\n    private WebElement linkToStore;\r\n\r\n    public LandingPage(WebDriver driver) {\r\n      \r\n        PageFactory.initElements(driver, this);\r\n    }\r\n\r\n    public void enterTheStore() {\r\n        linkToStore.click();\r\n    }\r\n}\r\n\r\n```\r\n\r\nTestBase (Test base class):\r\n\r\n```java\r\n\r\nimport io.github.bonigarcia.wdm.WebDriverManager;\r\nimport org.openqa.selenium.WebDriver;\r\nimport org.openqa.selenium.chrome.ChromeDriver;\r\nimport org.testng.annotations.AfterMethod;\r\nimport org.testng.annotations.BeforeMethod;\r\nimport org.testng.annotations.BeforeTest;\r\n\r\nimport java.time.Duration;\r\n\r\npublic class TestBase {\r\n    public WebDriver driver;\r\n\r\n    @BeforeTest\r\n    void setUpAll() {\r\n        WebDriverManager.chromedriver().setup();\r\n    }\r\n\r\n    @BeforeMethod\r\n    void setupEach() {\r\n        driver = new ChromeDriver();\r\n        driver.manage().timeouts().implicitlyWait(Duration.ofSeconds(10));\r\n        driver.get(&quot;http://przyklady.javastart.pl/jpetstore/&quot;);\r\n    }\r\n\r\n    @AfterMethod\r\n    void quit() {\r\n        driver.close();\r\n        driver.quit();\r\n    }\r\n}\r\n\r\n\r\n```\r\n\r\nFailedLoginTest (Test class):\r\n\r\n```java\r\n\r\nimport com.javastart.buildingFramework.page.objects.LandingPage;\r\nimport com.javastart.tests.base.TestBase;\r\nimport org.testng.annotations.Test;\r\n\r\npublic class FailedLoginTest extends TestBase {\r\n\r\n    @Test\r\n    void failedLoginTest() throws InterruptedException {\r\n        LandingPage landingPage = new LandingPage(driver);\r\n        landingPage.enterTheStore();\r\n    }\r\n}\r\n\r\n```\r\n\r\n\r\n\r\nWhen I try to run FailedLoginTest, I got this error: **java.lang.NullPointerException: Cannot invoke &quot;org.openqa.selenium.SearchContext.findElement(org.openqa.selenium.By)&quot; because &quot;this.searchContext&quot; is null** and Im not sure why is it being thrown. Any help will be appreciated :)","title":"NullPointerException Cannot invoke &quot;org.openqa.selenium.SearchContext.findElement(org.openqa.selenium.By)&quot; because &quot;this.searchContext&quot; is null","body":"<p>I am encountering a java.lang.NullPointerException error when trying to run my Selenium test with TestNG. The error message states: Cannot invoke <strong>&quot;org.openqa.selenium.SearchContext.findElement(org.openqa.selenium.By)&quot; because &quot;this.searchContext&quot; is null.</strong></p>\n<p>I have provided the relevant code snippets below:</p>\n<p>LandingPage (Page Object class):</p>\n<pre class=\"lang-java prettyprint-override\"><code>import org.openqa.selenium.WebDriver;\nimport org.openqa.selenium.WebElement;\nimport org.openqa.selenium.support.FindBy;\nimport org.openqa.selenium.support.PageFactory;\n\npublic class LandingPage {\n\n    @FindBy(linkText = &quot;Enter the Store&quot;)\n    private WebElement linkToStore;\n\n    public LandingPage(WebDriver driver) {\n      \n        PageFactory.initElements(driver, this);\n    }\n\n    public void enterTheStore() {\n        linkToStore.click();\n    }\n}\n\n</code></pre>\n<p>TestBase (Test base class):</p>\n<pre class=\"lang-java prettyprint-override\"><code>\nimport io.github.bonigarcia.wdm.WebDriverManager;\nimport org.openqa.selenium.WebDriver;\nimport org.openqa.selenium.chrome.ChromeDriver;\nimport org.testng.annotations.AfterMethod;\nimport org.testng.annotations.BeforeMethod;\nimport org.testng.annotations.BeforeTest;\n\nimport java.time.Duration;\n\npublic class TestBase {\n    public WebDriver driver;\n\n    @BeforeTest\n    void setUpAll() {\n        WebDriverManager.chromedriver().setup();\n    }\n\n    @BeforeMethod\n    void setupEach() {\n        driver = new ChromeDriver();\n        driver.manage().timeouts().implicitlyWait(Duration.ofSeconds(10));\n        driver.get(&quot;http://przyklady.javastart.pl/jpetstore/&quot;);\n    }\n\n    @AfterMethod\n    void quit() {\n        driver.close();\n        driver.quit();\n    }\n}\n\n\n</code></pre>\n<p>FailedLoginTest (Test class):</p>\n<pre class=\"lang-java prettyprint-override\"><code>\nimport com.javastart.buildingFramework.page.objects.LandingPage;\nimport com.javastart.tests.base.TestBase;\nimport org.testng.annotations.Test;\n\npublic class FailedLoginTest extends TestBase {\n\n    @Test\n    void failedLoginTest() throws InterruptedException {\n        LandingPage landingPage = new LandingPage(driver);\n        landingPage.enterTheStore();\n    }\n}\n\n</code></pre>\n<p>When I try to run FailedLoginTest, I got this error: <strong>java.lang.NullPointerException: Cannot invoke &quot;org.openqa.selenium.SearchContext.findElement(org.openqa.selenium.By)&quot; because &quot;this.searchContext&quot; is null</strong> and Im not sure why is it being thrown. Any help will be appreciated :)</p>\n"},{"tags":["java","android","android-camera"],"comments":[{"owner":{"account_id":6312781,"reputation":1240,"user_id":4903809,"accept_rate":75,"display_name":"NGR"},"score":0,"creation_date":1509201054,"post_id":36715739,"comment_id":80928125,"body_markdown":"Did you find answer of this?","body":"Did you find answer of this?"},{"owner":{"account_id":1977945,"reputation":1333,"user_id":1775292,"accept_rate":80,"display_name":"Dmitrijs"},"score":0,"creation_date":1553249623,"post_id":36715739,"comment_id":97322979,"body_markdown":"Can you debug it? What exactly not working? Also, test mlKit on a real device, I was unable to get bytes from cameraSource on emulator.","body":"Can you debug it? What exactly not working? Also, test mlKit on a real device, I was unable to get bytes from cameraSource on emulator."}],"answers":[{"tags":[],"owner":{"account_id":28341280,"reputation":1,"user_id":21674230,"display_name":"somedude"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1682349926,"creation_date":1681834575,"answer_id":76046871,"question_id":36715739,"body_markdown":"For anyone who finds this, there its a problem in the variable path. \r\n\r\nJust change: \r\n```\r\nString path = getExternalFilesDir(Environment.DIRECTORY_DCIM).getPath();\r\n```\r\nto:\r\n```\r\nString path = Environment.getExternalStoragePublicDirectory(Environment.DIRECTORY_DCIM).getAbsolutePath();\r\n```\r\n\r\nand add line `file.createNewFile();` after `new File()` like so:\r\n\r\n\r\n    File file = new File(path, &quot;FitnessGirl&quot;+&quot;.jpg&quot;);\r\n\r\n    try {\r\n        file.createNewFile();\r\n    }catch(Exception e){\r\n        e.printStackTrace();\r\n    }","title":"camerasource takepicture is not working","body":"<p>For anyone who finds this, there its a problem in the variable path.</p>\n<p>Just change:</p>\n<pre><code>String path = getExternalFilesDir(Environment.DIRECTORY_DCIM).getPath();\n</code></pre>\n<p>to:</p>\n<pre><code>String path = Environment.getExternalStoragePublicDirectory(Environment.DIRECTORY_DCIM).getAbsolutePath();\n</code></pre>\n<p>and add line <code>file.createNewFile();</code> after <code>new File()</code> like so:</p>\n<pre><code>File file = new File(path, &quot;FitnessGirl&quot;+&quot;.jpg&quot;);\n\ntry {\n    file.createNewFile();\n}catch(Exception e){\n    e.printStackTrace();\n}\n</code></pre>\n"}],"owner":{"account_id":7240772,"reputation":595,"user_id":5524420,"accept_rate":50,"display_name":"Mithun Kumar"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":2564,"favorite_count":0,"down_vote_count":1,"up_vote_count":3,"answer_count":1,"score":2,"last_activity_date":1682349926,"creation_date":1461061783,"question_id":36715739,"body_markdown":"I am trying to capture and save the image from camera using this project https://github.com/googlesamples/android-vision/tree/master/visionSamples/FaceTracker\r\n\r\nThe code to capture image is in face track activity java file\r\n\r\n\tfinal CameraSource.ShutterCallback shutterCallback = new CameraSource.ShutterCallback() {\r\n\t\t\t\t@Override\r\n\t\t\t\tpublic void onShutter() {\r\n\t\t\t\t\tLog.d(TAG, &quot;onShutter&quot;);\r\n\t\t\t\t\tToast.makeText(view.getContext(),&quot;sd&quot;,Toast.LENGTH_SHORT).show();\r\n\t\t\t\t}\r\n\t\t\t};\r\n\t\t\tCameraSource.PictureCallback myPictureCallback_JPG = new CameraSource.PictureCallback(){\r\n\t\t\t\t@Override\r\n\t\t\t\tpublic void onPictureTaken(byte[] arg0) {\r\n\t\t\t\tBitmap bitmapPicture = BitmapFactory.decodeByteArray(arg0, 0, arg0.length);\r\n\r\n\t\t\t\t//save file\r\n\t\t\t\tString path = Environment.DIRECTORY_DCIM.toString();\r\n\t\t\t\t//Toast.makeText(getApplicationContext(),path,Toast.LENGTH_SHORT).show();\r\n\t\t\t\tOutputStream fOut = null;\r\n\t\t\t\tFile file = new File(path, &quot;FitnessGirl&quot;+&quot;.jpg&quot;); // the File to save to\r\n\t\t\t\ttry{\r\n\t\t\t\t\tfOut = new FileOutputStream(file);\r\n\t\t\t\t\tbitmapPicture.compress(Bitmap.CompressFormat.JPEG, 85, fOut); // saving the Bitmap to a file compressed as a JPEG with 85% compression rate\r\n\t\t\t\t\tMediaStore.Images.Media.insertImage(getContentResolver(),file.getAbsolutePath(),file.getName(),file.getName());\r\n\t\t\t\t\tfOut.flush();\r\n\t\t\t\t\tfOut.close(); // do not forget to close the stream\r\n\r\n\t\t\t\t}catch (FileNotFoundException exception){\r\n\r\n\t\t\t\t}catch (IOException e){\r\n\r\n\t\t\t\t}\r\n\t\t\t\t//save file\r\n\t\t\t\t}};\r\n\r\n\t\t\tmCameraSource.takePicture(shutterCallback, myPictureCallback_JPG);\r\n\r\n\r\nabove code is not working, can anyone help?","title":"camerasource takepicture is not working","body":"<p>I am trying to capture and save the image from camera using this project <a href=\"https://github.com/googlesamples/android-vision/tree/master/visionSamples/FaceTracker\" rel=\"nofollow\">https://github.com/googlesamples/android-vision/tree/master/visionSamples/FaceTracker</a></p>\n\n<p>The code to capture image is in face track activity java file</p>\n\n<pre><code>final CameraSource.ShutterCallback shutterCallback = new CameraSource.ShutterCallback() {\n            @Override\n            public void onShutter() {\n                Log.d(TAG, \"onShutter\");\n                Toast.makeText(view.getContext(),\"sd\",Toast.LENGTH_SHORT).show();\n            }\n        };\n        CameraSource.PictureCallback myPictureCallback_JPG = new CameraSource.PictureCallback(){\n            @Override\n            public void onPictureTaken(byte[] arg0) {\n            Bitmap bitmapPicture = BitmapFactory.decodeByteArray(arg0, 0, arg0.length);\n\n            //save file\n            String path = Environment.DIRECTORY_DCIM.toString();\n            //Toast.makeText(getApplicationContext(),path,Toast.LENGTH_SHORT).show();\n            OutputStream fOut = null;\n            File file = new File(path, \"FitnessGirl\"+\".jpg\"); // the File to save to\n            try{\n                fOut = new FileOutputStream(file);\n                bitmapPicture.compress(Bitmap.CompressFormat.JPEG, 85, fOut); // saving the Bitmap to a file compressed as a JPEG with 85% compression rate\n                MediaStore.Images.Media.insertImage(getContentResolver(),file.getAbsolutePath(),file.getName(),file.getName());\n                fOut.flush();\n                fOut.close(); // do not forget to close the stream\n\n            }catch (FileNotFoundException exception){\n\n            }catch (IOException e){\n\n            }\n            //save file\n            }};\n\n        mCameraSource.takePicture(shutterCallback, myPictureCallback_JPG);\n</code></pre>\n\n<p>above code is not working, can anyone help?</p>\n"},{"tags":["java","spring-boot","design-patterns","spring-data-jpa","callback"],"comments":[{"owner":{"account_id":2842013,"reputation":1289,"user_id":2441441,"accept_rate":65,"display_name":"user2441441"},"score":0,"creation_date":1682298416,"post_id":76082820,"comment_id":134188346,"body_markdown":"@xerx593 user:592355 https://stackoverflow.com/users/592355/xerx593 what happened? :/","body":"@xerx593 user:592355 <a href=\"https://stackoverflow.com/users/592355/xerx593\">stackoverflow.com/users/592355/xerx593</a> what happened? :/"},{"owner":{"account_id":290683,"reputation":12512,"user_id":592355,"display_name":"xerx593"},"score":1,"creation_date":1682347360,"post_id":76082820,"comment_id":134196606,"body_markdown":"Sorry, I deleted, but hope you still have the &quot;useful links&quot;...going deeper, I started to doubt my answer/approach","body":"Sorry, I deleted, but hope you still have the &quot;useful links&quot;...going deeper, I started to doubt my answer/approach"},{"owner":{"account_id":2842013,"reputation":1289,"user_id":2441441,"accept_rate":65,"display_name":"user2441441"},"score":0,"creation_date":1682350071,"post_id":76082820,"comment_id":134197365,"body_markdown":"Yes, I think so. Basically I am getting different Entities from the third party class, depending on what request(Entity) is passed to the third party class from the controller. And I want to save all this list of Entities in the database. Each Entity can have its own table. So when /employee is called, the third party class wil return a list of Employees, and I want to save it to the Employee database table. When Contractor is called, I get back a list of contractors and I want to save them to the database tabe Contractor.","body":"Yes, I think so. Basically I am getting different Entities from the third party class, depending on what request(Entity) is passed to the third party class from the controller. And I want to save all this list of Entities in the database. Each Entity can have its own table. So when /employee is called, the third party class wil return a list of Employees, and I want to save it to the Employee database table. When Contractor is called, I get back a list of contractors and I want to save them to the database tabe Contractor."},{"owner":{"account_id":290683,"reputation":12512,"user_id":592355,"display_name":"xerx593"},"score":1,"creation_date":1682364390,"post_id":76082820,"comment_id":134200577,"body_markdown":"[here](https://github.com/xerx593/demo-generic-mj) we can play :)","body":"<a href=\"https://github.com/xerx593/demo-generic-mj\" rel=\"nofollow noreferrer\">here</a> we can play :)"},{"owner":{"account_id":290683,"reputation":12512,"user_id":592355,"display_name":"xerx593"},"score":1,"creation_date":1682365610,"post_id":76082820,"comment_id":134200809,"body_markdown":"so first of all, we should clarify/identify: do we need &quot;prototype&quot; scope? (since that complicates some) ... for &quot;generic bean&quot; (definitions), [this](https://stackoverflow.com/q/51624481/592355) is sweat!","body":"so first of all, we should clarify/identify: do we need &quot;prototype&quot; scope? (since that complicates some) ... for &quot;generic bean&quot; (definitions), <a href=\"https://stackoverflow.com/q/51624481/592355\">this</a> is sweat!"},{"owner":{"account_id":2842013,"reputation":1289,"user_id":2441441,"accept_rate":65,"display_name":"user2441441"},"score":0,"creation_date":1682366611,"post_id":76082820,"comment_id":134201008,"body_markdown":"Going through your example and tyring to understand it..I was thinking to simplify things we don&#39;t need the CallbackImpl to be a Spring managed bean? It can be a simple java class with type T. The common service will call this class and pass in the type T. The Employee service will call in the common service and pass in type T. I only want to save the entities, so I have EmployeeRepository in EmployeeService, and pass it to the common service, which passes it to the CallBackImpl, which does a saveAll(employees). If that makes sense. Will read up on ObjectProvider to understand your code","body":"Going through your example and tyring to understand it..I was thinking to simplify things we don&#39;t need the CallbackImpl to be a Spring managed bean? It can be a simple java class with type T. The common service will call this class and pass in the type T. The Employee service will call in the common service and pass in type T. I only want to save the entities, so I have EmployeeRepository in EmployeeService, and pass it to the common service, which passes it to the CallBackImpl, which does a saveAll(employees). If that makes sense. Will read up on ObjectProvider to understand your code"},{"owner":{"account_id":290683,"reputation":12512,"user_id":592355,"display_name":"xerx593"},"score":1,"creation_date":1682366717,"post_id":76082820,"comment_id":134201043,"body_markdown":"in test i use it (ObjectProvider with according generic parameter) only as a &quot;collection&quot; of all services, elsewhere i use it to obtain &quot;fresh prototypes&quot;","body":"in test i use it (ObjectProvider with according generic parameter) only as a &quot;collection&quot; of all services, elsewhere i use it to obtain &quot;fresh prototypes&quot;"}],"owner":{"account_id":2842013,"reputation":1289,"user_id":2441441,"accept_rate":65,"display_name":"user2441441"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":123,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1682349845,"creation_date":1682216170,"question_id":76082820,"body_markdown":"I&#39;m confused about the design using Spring boot and JPA when callbacks are involved.\r\n\r\nExample:\r\n\r\nController will call the Service class and pass in the value of T, i.e Employee in our example:\r\n\r\n    @Controller\r\n    public class Controller1{\r\n     \r\n     @Autowired\r\n     Service1 service1;\r\n\r\n     @RequestMapping(&quot;/employee&quot;)\r\n      public ResponseEntity&lt;Object&gt; employees(Request request){\r\n        //Since employee is called I know that T should be of type Employee\r\n        service1.runService(new Employee()); //I want to pass the type T as \r\n                                           //Employee, so that in the \r\n                                           //database all Employees can be saved\r\n      }\r\n\r\n\r\n    }\r\n\r\nI have a service:\r\n\r\n     \r\n    //Controller will call this service and pass in T type\r\n    @Service\r\n    public class Service1{\r\n      @Autowired\r\n      Dependency1 dependency1;\r\n    \r\n     //@Autowire CallbackImpl -&gt; this won&#39;t work because I need to create a new \r\n     //                          instance of type T for each different request from \r\n     //                            controller\r\n    \r\n\r\n    public void runService(T t){\r\n    //CallbackImpl&lt;Employee&gt; callbackImpl= new CallbackImpl&lt;&gt;();-&gt; this won&#39;t work because \r\n                                           //           it is not managed by Spring\r\n                                           //           and the Repository bean \r\n                                           //           throws null pointer exception\r\n      \r\n       //Here I want to invoke the callbackImpl&lt;T&gt; class and specify the type T.. \r\n       // ..(which will be  an Entity type)\r\n      \r\n      ThirdPartyClass.get(callbackImpl) // callbackImpl is of type T (i.e Employee \r\n                                        // in this example)\r\n     }\r\n    }\r\n\r\nThis ThirdPartyClass.get() method provides an interface IThirdPartyCallback.\r\n\r\nMy class CallbackImpl implements this interface, gets the values and saves it to database like this:\r\n\r\n    CallbackImpl&lt;T&gt; implements IThirdPartyCallback{\r\n     \r\n    @Autowired\r\n    BaseRepository&lt;T, Long&gt; baseRepository // The sub-class EmployeeRepository \r\n                                           //..that \r\n                                          //..implements BaseRepository is called \r\n                                          //..based on type T\r\n    \r\n    @Override\r\n    public void callback(String result){\r\n    // convert result to List&lt;T&gt; type, in this example T is Employee\r\n\r\n    baseRepository.saveAll(listOfResultsOfTypeT);  //in this result will be converted to List&lt;T&gt; \r\n                                     //and saved. In this example result will be \r\n                                     // List&lt;Employee&gt;\r\n    }\r\n      }\r\n\r\n\r\nI need multiple instances/beans of CallbackImpl. What would be a recommended wat to achieve that?\r\n\r\n1. I could create a Factory with a @Configuration, and have a method return a new CallbackImpl&lt;T&gt; bean for every request\r\n\r\n2. Perhaps I could remove Autowired from the BaseRepository, and pass in the BaseRepository through the Service -&gt; Is this a good design? i.e Repository should be only defined in Service and the Service passes around the Repository  bean with helper classes when needed?\r\n\r\n3. Declare the CallbackImpl as prototype scope. It&#39;s not clear to me how I will call create new instances each time with a different type T using this approach.\r\n\r\n4. Perhaps I can create N repositories with N services for N entities that I want to save in the database tables. And have N controllers as well, so this entire problem is eliminated, but this looks like a lot of similar code repeated, if all I&#39;m doing is saving different types of entities like Employee, Contractor, Chair etc. i.e unrelated entities.\r\n\r\n5. Use EntityManger somehow to persist different entities\r\n\r\nOr is this completely bonkers and there is a much better way to get what I want using a much better or simpler design?","title":"Design classes using Spring boot, JPA using callbacks of generic type","body":"<p>I'm confused about the design using Spring boot and JPA when callbacks are involved.</p>\n<p>Example:</p>\n<p>Controller will call the Service class and pass in the value of T, i.e Employee in our example:</p>\n<pre><code>@Controller\npublic class Controller1{\n \n @Autowired\n Service1 service1;\n\n @RequestMapping(&quot;/employee&quot;)\n  public ResponseEntity&lt;Object&gt; employees(Request request){\n    //Since employee is called I know that T should be of type Employee\n    service1.runService(new Employee()); //I want to pass the type T as \n                                       //Employee, so that in the \n                                       //database all Employees can be saved\n  }\n\n\n}\n</code></pre>\n<p>I have a service:</p>\n<pre><code>//Controller will call this service and pass in T type\n@Service\npublic class Service1{\n  @Autowired\n  Dependency1 dependency1;\n\n //@Autowire CallbackImpl -&gt; this won't work because I need to create a new \n //                          instance of type T for each different request from \n //                            controller\n\n\npublic void runService(T t){\n//CallbackImpl&lt;Employee&gt; callbackImpl= new CallbackImpl&lt;&gt;();-&gt; this won't work because \n                                       //           it is not managed by Spring\n                                       //           and the Repository bean \n                                       //           throws null pointer exception\n  \n   //Here I want to invoke the callbackImpl&lt;T&gt; class and specify the type T.. \n   // ..(which will be  an Entity type)\n  \n  ThirdPartyClass.get(callbackImpl) // callbackImpl is of type T (i.e Employee \n                                    // in this example)\n }\n}\n</code></pre>\n<p>This ThirdPartyClass.get() method provides an interface IThirdPartyCallback.</p>\n<p>My class CallbackImpl implements this interface, gets the values and saves it to database like this:</p>\n<pre><code>CallbackImpl&lt;T&gt; implements IThirdPartyCallback{\n \n@Autowired\nBaseRepository&lt;T, Long&gt; baseRepository // The sub-class EmployeeRepository \n                                       //..that \n                                      //..implements BaseRepository is called \n                                      //..based on type T\n\n@Override\npublic void callback(String result){\n// convert result to List&lt;T&gt; type, in this example T is Employee\n\nbaseRepository.saveAll(listOfResultsOfTypeT);  //in this result will be converted to List&lt;T&gt; \n                                 //and saved. In this example result will be \n                                 // List&lt;Employee&gt;\n}\n  }\n</code></pre>\n<p>I need multiple instances/beans of CallbackImpl. What would be a recommended wat to achieve that?</p>\n<ol>\n<li><p>I could create a Factory with a @Configuration, and have a method return a new CallbackImpl bean for every request</p>\n</li>\n<li><p>Perhaps I could remove Autowired from the BaseRepository, and pass in the BaseRepository through the Service -&gt; Is this a good design? i.e Repository should be only defined in Service and the Service passes around the Repository  bean with helper classes when needed?</p>\n</li>\n<li><p>Declare the CallbackImpl as prototype scope. It's not clear to me how I will call create new instances each time with a different type T using this approach.</p>\n</li>\n<li><p>Perhaps I can create N repositories with N services for N entities that I want to save in the database tables. And have N controllers as well, so this entire problem is eliminated, but this looks like a lot of similar code repeated, if all I'm doing is saving different types of entities like Employee, Contractor, Chair etc. i.e unrelated entities.</p>\n</li>\n<li><p>Use EntityManger somehow to persist different entities</p>\n</li>\n</ol>\n<p>Or is this completely bonkers and there is a much better way to get what I want using a much better or simpler design?</p>\n"},{"tags":["java","jax-rs"],"comments":[{"owner":{"account_id":3013228,"reputation":205797,"user_id":2587435,"accept_rate":88,"display_name":"Paul Samsotha"},"score":0,"creation_date":1621681699,"post_id":67645961,"comment_id":119572003,"body_markdown":".request(MediaType.APPLICATION_FORM_URLENCODED) this sets the Accept header. 406 means Not Acceptable.","body":".request(MediaType.APPLICATION_FORM_URLENCODED) this sets the Accept header. 406 means Not Acceptable."},{"owner":{"account_id":3013228,"reputation":205797,"user_id":2587435,"accept_rate":88,"display_name":"Paul Samsotha"},"score":0,"creation_date":1621681760,"post_id":67645961,"comment_id":119572017,"body_markdown":"Also are you sure the server sends back text/plain?","body":"Also are you sure the server sends back text/plain?"},{"owner":{"account_id":2103408,"reputation":6138,"user_id":1870400,"accept_rate":42,"display_name":"user1870400"},"score":0,"creation_date":1621697223,"post_id":67645961,"comment_id":119576213,"body_markdown":"So what should be the right way given the curl command that is working?","body":"So what should be the right way given the curl command that is working?"},{"owner":{"account_id":3013228,"reputation":205797,"user_id":2587435,"accept_rate":88,"display_name":"Paul Samsotha"},"score":1,"creation_date":1621727208,"post_id":67645961,"comment_id":119583266,"body_markdown":"Remove the request() and accept(), and it will be equivalent to your curl request.","body":"Remove the request() and accept(), and it will be equivalent to your curl request."}],"answers":[{"tags":[],"owner":{"account_id":3532513,"reputation":686,"user_id":2951619,"display_name":"Alan Ho"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1682349605,"creation_date":1682095215,"answer_id":76075158,"question_id":67645961,"body_markdown":"It seems like jax-rs client is configured to send gzip data compression. If the client does not know how to deal with gzip compressed data, it returns 400.\r\n\r\nSolution would be disabling the gzip by calling `setGzipEnabled(false)` in `JerseyClientConfiguration.java`\r\n","title":"How to send a x-www-form-url-encoded request using jax-rs?","body":"<p>It seems like jax-rs client is configured to send gzip data compression. If the client does not know how to deal with gzip compressed data, it returns 400.</p>\n<p>Solution would be disabling the gzip by calling <code>setGzipEnabled(false)</code> in <code>JerseyClientConfiguration.java</code></p>\n"}],"owner":{"account_id":2103408,"reputation":6138,"user_id":1870400,"accept_rate":42,"display_name":"user1870400"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1876,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1682349605,"creation_date":1621655602,"question_id":67645961,"body_markdown":"```\r\ncurl --location --request POST &#39;http://localhost:8080/api/7/run&#39; \\\r\n--header &#39;Content-Type: application/x-www-form-urlencoded&#39; \\\r\n--data-urlencode &#39;start=1510630400000&#39; \\\r\n--data-urlencode &#39;end=1526092400000&#39;\r\n```\r\n\r\nThe above curl command works however I am trying to do the same using `javax.ws.rs` but I get 406 error. Below is my code\r\n\r\n```\r\n        Form form = new Form()\r\n            .param(&quot;start&quot;, &quot;1510630400000&quot;)\r\n            .param(&quot;end&quot;, &quot;1526092400000&quot;);\r\n\r\n        Response response = client.target(&quot;http://localhost:8080/api/7/run&quot;)\r\n                .request(MediaType.APPLICATION_FORM_URLENCODED)\r\n                .accept(MediaType.TEXT_PLAIN)\r\n                .post(Entity.form(form));\r\n        assertThat(response.getStatus()).isEqualTo(200);","title":"How to send a x-www-form-url-encoded request using jax-rs?","body":"<pre><code>curl --location --request POST 'http://localhost:8080/api/7/run' \\\n--header 'Content-Type: application/x-www-form-urlencoded' \\\n--data-urlencode 'start=1510630400000' \\\n--data-urlencode 'end=1526092400000'\n</code></pre>\n<p>The above curl command works however I am trying to do the same using <code>javax.ws.rs</code> but I get 406 error. Below is my code</p>\n<pre><code>        Form form = new Form()\n            .param(&quot;start&quot;, &quot;1510630400000&quot;)\n            .param(&quot;end&quot;, &quot;1526092400000&quot;);\n\n        Response response = client.target(&quot;http://localhost:8080/api/7/run&quot;)\n                .request(MediaType.APPLICATION_FORM_URLENCODED)\n                .accept(MediaType.TEXT_PLAIN)\n                .post(Entity.form(form));\n        assertThat(response.getStatus()).isEqualTo(200);\n</code></pre>\n"},{"tags":["java","google-maps","javafx"],"comments":[{"owner":{"account_id":1180113,"reputation":152325,"user_id":1155209,"display_name":"jewelsea"},"score":1,"creation_date":1682035931,"post_id":76068191,"comment_id":134156588,"body_markdown":"It is probably not going to work, as commented on [your last question](https://stackoverflow.com/questions/76022664/how-to-route-between-several-markers-in-gmapsfx-javafx) and as answered in this [related question](https://stackoverflow.com/questions/75633283/gmapsfx-not-displaying-but-running/75668448#75668448)","body":"It is probably not going to work, as commented on <a href=\"https://stackoverflow.com/questions/76022664/how-to-route-between-several-markers-in-gmapsfx-javafx\">your last question</a> and as answered in this <a href=\"https://stackoverflow.com/questions/75633283/gmapsfx-not-displaying-but-running/75668448#75668448\">related question</a>"},{"owner":{"account_id":21686239,"reputation":19,"user_id":16001648,"display_name":"Kacper Bielak"},"score":0,"creation_date":1682060661,"post_id":76068191,"comment_id":134159257,"body_markdown":"oh, i understand. If so, can you recommend any other library that I can use in JavaFX to display the map? Where will I be able to display markers and define a route between points?","body":"oh, i understand. If so, can you recommend any other library that I can use in JavaFX to display the map? Where will I be able to display markers and define a route between points?"},{"owner":{"account_id":1180113,"reputation":152325,"user_id":1155209,"display_name":"jewelsea"},"score":0,"creation_date":1682073340,"post_id":76068191,"comment_id":134161933,"body_markdown":"I commented on [your last question](https://stackoverflow.com/questions/76022664/how-to-route-between-several-markers-in-gmapsfx-javafx).","body":"I commented on <a href=\"https://stackoverflow.com/questions/76022664/how-to-route-between-several-markers-in-gmapsfx-javafx\">your last question</a>."}],"owner":{"account_id":21686239,"reputation":19,"user_id":16001648,"display_name":"Kacper Bielak"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":37,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1682349002,"creation_date":1682023859,"question_id":76068191,"body_markdown":"I tried to implement routing between two markers in GMapsFX in my student application writed in Java/JavaFX. I don&#39;t get any error, I just get the message on the map: \r\n\r\n    This page can&#39;t load Google Maps correctly \r\n\r\nand in the console: \r\n\r\n    INFO com.dlsc.gmapsfx.GoogleMapView - Alert: Hide directions called.\r\n\r\n \r\nWhen instantiating a GoogleMapView I don&#39;t specify a key, I don&#39;t think it&#39;s required. Attach the code and the effect of the program below. Is anyone able to help?\r\n\r\n    public class Map implements MapComponentInitializedListener, DirectionsServiceCallback {\r\n    \r\n        protected GoogleMapView mapView;\r\n        protected GoogleMap map;\r\n        protected Marker marker;\r\n        protected MarkerOptions markerOptions;\r\n        protected DirectionsService directionsService;\r\n        protected DirectionsRenderer directionsRenderer = null;\r\n        protected DirectionsPane directionsPane;\r\n    \r\n        public Map() {\r\n            mapView = new GoogleMapView();\r\n            mapView.addMapInitializedListener(this);\r\n            markerOptions = new MarkerOptions();\r\n        }\r\n    \r\n        @Override\r\n        public void mapInitialized() {\r\n            MapOptions mapOptions = new MapOptions();\r\n          mapOptions.mapType(MapTypeIdEnum.ROADMAP).overviewMapControl(false).zoom(18).keyboardShortcuts(false);\r\n            map = mapView.createMap(mapOptions);\r\n            LatLong latLong = new LatLong(50.0650887, 19.9245536);\r\n            map.setCenter(latLong);\r\n    \r\n            directionsService = new DirectionsService();\r\n            directionsPane = mapView.getDirec();\r\n    \r\n            Marker marker1 = new Marker(markerOptions);\r\n            Marker marker2 = new Marker(markerOptions);\r\n            marker1.setPosition(new LatLong(50.0750887, 19.9345536));\r\n            marker2.setPosition(new LatLong(50.0850887, 19.9445536));\r\n            map.addMarker(marker1);\r\n    \r\n            DirectionsRequest directionsRequest = new DirectionsRequest(new LatLong(50.0750887, 19.9345536), new LatLong(50.0850887, 19.9445536), TravelModes.DRIVING, false);\r\n            directionsRenderer = new DirectionsRenderer(true, mapView.getMap(), directionsPane);\r\n            directionsService.getRoute(directionsRequest, this, directionsRenderer);\r\n        }\r\n    \r\n        @Override\r\n        public void directionsReceived(DirectionsResult results, DirectionStatus status) {\r\n            System.out.println(results);\r\n            System.out.println(status);\r\n        }\r\n    }\r\n\r\n[![enter image description here][1]][1]\r\n\r\n[![enter image description here][2]][2]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/wOyZE.png\r\n  [2]: https://i.stack.imgur.com/glddX.png","title":"The route between two points is not displayed GmapsFX","body":"<p>I tried to implement routing between two markers in GMapsFX in my student application writed in Java/JavaFX. I don't get any error, I just get the message on the map:</p>\n<pre><code>This page can't load Google Maps correctly \n</code></pre>\n<p>and in the console:</p>\n<pre><code>INFO com.dlsc.gmapsfx.GoogleMapView - Alert: Hide directions called.\n</code></pre>\n<p>When instantiating a GoogleMapView I don't specify a key, I don't think it's required. Attach the code and the effect of the program below. Is anyone able to help?</p>\n<pre><code>public class Map implements MapComponentInitializedListener, DirectionsServiceCallback {\n\n    protected GoogleMapView mapView;\n    protected GoogleMap map;\n    protected Marker marker;\n    protected MarkerOptions markerOptions;\n    protected DirectionsService directionsService;\n    protected DirectionsRenderer directionsRenderer = null;\n    protected DirectionsPane directionsPane;\n\n    public Map() {\n        mapView = new GoogleMapView();\n        mapView.addMapInitializedListener(this);\n        markerOptions = new MarkerOptions();\n    }\n\n    @Override\n    public void mapInitialized() {\n        MapOptions mapOptions = new MapOptions();\n      mapOptions.mapType(MapTypeIdEnum.ROADMAP).overviewMapControl(false).zoom(18).keyboardShortcuts(false);\n        map = mapView.createMap(mapOptions);\n        LatLong latLong = new LatLong(50.0650887, 19.9245536);\n        map.setCenter(latLong);\n\n        directionsService = new DirectionsService();\n        directionsPane = mapView.getDirec();\n\n        Marker marker1 = new Marker(markerOptions);\n        Marker marker2 = new Marker(markerOptions);\n        marker1.setPosition(new LatLong(50.0750887, 19.9345536));\n        marker2.setPosition(new LatLong(50.0850887, 19.9445536));\n        map.addMarker(marker1);\n\n        DirectionsRequest directionsRequest = new DirectionsRequest(new LatLong(50.0750887, 19.9345536), new LatLong(50.0850887, 19.9445536), TravelModes.DRIVING, false);\n        directionsRenderer = new DirectionsRenderer(true, mapView.getMap(), directionsPane);\n        directionsService.getRoute(directionsRequest, this, directionsRenderer);\n    }\n\n    @Override\n    public void directionsReceived(DirectionsResult results, DirectionStatus status) {\n        System.out.println(results);\n        System.out.println(status);\n    }\n}\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/wOyZE.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/wOyZE.png\" alt=\"enter image description here\" /></a></p>\n<p><a href=\"https://i.stack.imgur.com/glddX.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/glddX.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":["java","templates","jar","classpath","velocity"],"comments":[{"owner":{"account_id":73747,"reputation":5497,"user_id":212215,"accept_rate":87,"display_name":"vicatcu"},"score":3,"creation_date":1275071315,"post_id":2931516,"comment_id":2985236,"body_markdown":"for the love of god, highlight the code in your post and click the code button so that its formatted properly! :)","body":"for the love of god, highlight the code in your post and click the code button so that its formatted properly! :)"},{"owner":{"account_id":73747,"reputation":5497,"user_id":212215,"accept_rate":87,"display_name":"vicatcu"},"score":1,"creation_date":1275071360,"post_id":2931516,"comment_id":2985240,"body_markdown":"Are you quite certain that the /templates/ directory is getting exported into your jar? You have to mark it as part of your build settings and stuff.","body":"Are you quite certain that the /templates/ directory is getting exported into your jar? You have to mark it as part of your build settings and stuff."},{"owner":{"account_id":39604,"reputation":2393,"user_id":114311,"accept_rate":75,"display_name":"Rafael"},"score":0,"creation_date":1275071741,"post_id":2931516,"comment_id":2985282,"body_markdown":"didn&#39;t known about the code button, thanks. Yes, the templates dir is getting into the jar file.","body":"didn&#39;t known about the code button, thanks. Yes, the templates dir is getting into the jar file."}],"answers":[{"tags":[],"owner":{"account_id":36208,"reputation":240316,"user_id":103154,"display_name":"axtavt"},"down_vote_count":0,"up_vote_count":77,"is_accepted":true,"score":77,"last_activity_date":1682348427,"creation_date":1275077883,"answer_id":2932187,"question_id":2931516,"body_markdown":"If you want to use resources from classpath, you should use resource loader for classpath:\r\n\r\n    ve.setProperty(RuntimeConstants.RESOURCE_LOADER, &quot;classpath&quot;); \r\n    ve.setProperty(&quot;classpath.resource.loader.class&quot;, ClasspathResourceLoader.class.getName());\r\n    ve.init();","title":"Loading velocity template inside a jar file","body":"<p>If you want to use resources from classpath, you should use resource loader for classpath:</p>\n<pre><code>ve.setProperty(RuntimeConstants.RESOURCE_LOADER, &quot;classpath&quot;); \nve.setProperty(&quot;classpath.resource.loader.class&quot;, ClasspathResourceLoader.class.getName());\nve.init();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":50238,"reputation":74702,"user_id":149808,"accept_rate":81,"display_name":"ZZ Coder"},"down_vote_count":0,"up_vote_count":10,"is_accepted":false,"score":10,"last_activity_date":1275080150,"creation_date":1275080150,"answer_id":2932464,"question_id":2931516,"body_markdown":"Unless JAR is exploded, you can&#39;t read the resource in JAR as file. Use an input stream.\r\n\r\nSee following code snippets,\r\n\r\n\t\tInputStream input = classLoader.getResourceAsStream(fileName);\r\n\t\tif (input == null) {\r\n\t\t\tthrow new ConfigurationException(&quot;Template file &quot; +\r\n\t\t\t\t\tfileName + &quot; doesn&#39;t exist&quot;);\t\t\t\r\n\t\t}\r\n\t\r\n\t\tInputStreamReader reader = new InputStreamReader(input);\t        \r\n\t        Writer writer = null;\r\n\t    \r\n\t        try {\r\n\t    \t    writer = new OutputStreamWriter(output);\t\t\r\n\t\r\n\t    \t    // Merge template\r\n\t            if (!engine.evaluate(context, writer, fileName, reader)) \r\n                    ......\r\n\r\n","title":"Loading velocity template inside a jar file","body":"<p>Unless JAR is exploded, you can't read the resource in JAR as file. Use an input stream.</p>\n\n<p>See following code snippets,</p>\n\n<pre><code>    InputStream input = classLoader.getResourceAsStream(fileName);\n    if (input == null) {\n        throw new ConfigurationException(\"Template file \" +\n                fileName + \" doesn't exist\");           \n    }\n\n    InputStreamReader reader = new InputStreamReader(input);            \n        Writer writer = null;\n\n        try {\n            writer = new OutputStreamWriter(output);        \n\n            // Merge template\n            if (!engine.evaluate(context, writer, fileName, reader)) \n                ......\n</code></pre>\n"},{"tags":[],"owner":{"account_id":39604,"reputation":2393,"user_id":114311,"accept_rate":75,"display_name":"Rafael"},"down_vote_count":0,"up_vote_count":24,"is_accepted":false,"score":24,"last_activity_date":1528913549,"creation_date":1275313418,"answer_id":2943909,"question_id":2931516,"body_markdown":"Final code, developed using the ideas presented in both answers above:\r\n\r\n\r\n    VelocityEngine ve = new VelocityEngine();\r\n\tve.setProperty(RuntimeConstants.RESOURCE_LOADER, &quot;classpath&quot;);\r\n\tve.setProperty(&quot;classpath.resource.loader.class&quot;, ClasspathResourceLoader.class.getName());\r\n\r\n\tve.init();\r\n\r\n\tfinal String templatePath = &quot;templates/&quot; + templateName + &quot;.vm&quot;;\r\n\tInputStream input = this.getClass().getClassLoader().getResourceAsStream(templatePath);\r\n\tif (input == null) {\r\n\t\tthrow new IOException(&quot;Template file doesn&#39;t exist&quot;);\r\n\t}\r\n\r\n\tInputStreamReader reader = new InputStreamReader(input);\r\n\r\n\tVelocityContext context = new VelocityContext();\r\n\r\n\tif (properties != null) {\r\n\t\tstringfyNulls(properties);\r\n\t\tfor (Map.Entry&lt;String, Object&gt; property : properties.entrySet()) {\r\n\t\t\tcontext.put(property.getKey(), property.getValue());\r\n\t\t}\r\n\t}\r\n\r\n\tTemplate template = ve.getTemplate(templatePath, &quot;UTF-8&quot;);\r\n\tString outFileName = File.createTempFile(&quot;report&quot;, &quot;.html&quot;).getAbsolutePath();\r\n\tBufferedWriter writer = new BufferedWriter(new FileWriter(new File(outFileName)));\r\n\r\n\tif (!ve.evaluate(context, writer, templatePath, reader)) {\r\n\t\tthrow new Exception(&quot;Failed to convert the template into html.&quot;);\r\n\t}\r\n\r\n\ttemplate.merge(context, writer);\r\n\r\n\twriter.flush();\r\n\twriter.close();","title":"Loading velocity template inside a jar file","body":"<p>Final code, developed using the ideas presented in both answers above:</p>\n\n<pre><code>VelocityEngine ve = new VelocityEngine();\nve.setProperty(RuntimeConstants.RESOURCE_LOADER, \"classpath\");\nve.setProperty(\"classpath.resource.loader.class\", ClasspathResourceLoader.class.getName());\n\nve.init();\n\nfinal String templatePath = \"templates/\" + templateName + \".vm\";\nInputStream input = this.getClass().getClassLoader().getResourceAsStream(templatePath);\nif (input == null) {\n    throw new IOException(\"Template file doesn't exist\");\n}\n\nInputStreamReader reader = new InputStreamReader(input);\n\nVelocityContext context = new VelocityContext();\n\nif (properties != null) {\n    stringfyNulls(properties);\n    for (Map.Entry&lt;String, Object&gt; property : properties.entrySet()) {\n        context.put(property.getKey(), property.getValue());\n    }\n}\n\nTemplate template = ve.getTemplate(templatePath, \"UTF-8\");\nString outFileName = File.createTempFile(\"report\", \".html\").getAbsolutePath();\nBufferedWriter writer = new BufferedWriter(new FileWriter(new File(outFileName)));\n\nif (!ve.evaluate(context, writer, templatePath, reader)) {\n    throw new Exception(\"Failed to convert the template into html.\");\n}\n\ntemplate.merge(context, writer);\n\nwriter.flush();\nwriter.close();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1881019,"reputation":55,"user_id":1701222,"display_name":"Mahesh Lavannis"},"down_vote_count":4,"up_vote_count":6,"is_accepted":false,"score":2,"last_activity_date":1348685413,"creation_date":1348685413,"answer_id":12608444,"question_id":2931516,"body_markdown":"To make Velocity look for the templates in classpath:\r\n\r\n    VelocityEngine ve = new VelocityEngine();\r\n    ve.setProperty(RuntimeConstants.RESOURCE_LOADER, &quot;classpath&quot;);\r\n    ve.setProperty(&quot;classpath.resource.loader.class&quot;,ClasspathResourceLoader.class.getName());\r\n    ve.init();\r\n","title":"Loading velocity template inside a jar file","body":"<p>To make Velocity look for the templates in classpath:</p>\n\n<pre><code>VelocityEngine ve = new VelocityEngine();\nve.setProperty(RuntimeConstants.RESOURCE_LOADER, \"classpath\");\nve.setProperty(\"classpath.resource.loader.class\",ClasspathResourceLoader.class.getName());\nve.init();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2839394,"reputation":3441,"user_id":2439283,"display_name":"Ignacio Tomas Crespo"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1555459880,"creation_date":1555459880,"answer_id":55718180,"question_id":2931516,"body_markdown":"Maybe I have an old version, this is the only thing that worked for me\r\n\r\n    ve.setProperty(RuntimeConstants.RESOURCE_LOADER, &quot;class&quot;); \r\n    ve.setProperty(&quot;classpath.resource.loader.class&quot;, \r\n    ClasspathResourceLoader.class.getName());","title":"Loading velocity template inside a jar file","body":"<p>Maybe I have an old version, this is the only thing that worked for me</p>\n\n<pre><code>ve.setProperty(RuntimeConstants.RESOURCE_LOADER, \"class\"); \nve.setProperty(\"classpath.resource.loader.class\", \nClasspathResourceLoader.class.getName());\n</code></pre>\n"}],"owner":{"account_id":39604,"reputation":2393,"user_id":114311,"accept_rate":75,"display_name":"Rafael"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":41851,"favorite_count":0,"down_vote_count":0,"up_vote_count":52,"accepted_answer_id":2932187,"answer_count":5,"score":52,"last_activity_date":1682348427,"creation_date":1275070933,"question_id":2931516,"body_markdown":"I have a project where I want to load a velocity template to complete it with parameters. The whole application is packaged as a jar file. What I initially thought of doing was this:\r\n\r\n    VelocityEngine ve = new VelocityEngine();\r\n    \r\n       URL url = this.getClass().getResource(&quot;/templates/&quot;);\r\n    \r\n       File file = new File(url.getFile());\r\n    \r\n       ve = new VelocityEngine();\r\n       ve.setProperty(RuntimeConstants.RESOURCE_LOADER, &quot;file&quot;);\r\n       ve.setProperty(RuntimeConstants.FILE_RESOURCE_LOADER_PATH, file.getAbsolutePath());\r\n       ve.setProperty(RuntimeConstants.FILE_RESOURCE_LOADER_CACHE, &quot;true&quot;);\r\n    \r\n       ve.init();\r\n    \r\n       VelocityContext context = new VelocityContext();\r\n    \r\n       if (properties != null) {\r\n        stringfyNulls(properties);\r\n        for (Map.Entry&lt;String, Object&gt; property : properties.entrySet()) {\r\n         context.put(property.getKey(), property.getValue());\r\n        }\r\n       }\r\n    \r\n       final String templatePath = templateName + &quot;.vm&quot;;\r\n       Template template = ve.getTemplate(templatePath, &quot;UTF-8&quot;);\r\n       String outFileName = File.createTempFile(&quot;report&quot;, &quot;.html&quot;).getAbsolutePath();\r\n       BufferedWriter writer = new BufferedWriter(new FileWriter(new File(outFileName)));\r\n    \r\n       template.merge(context, writer);\r\n    \r\n       writer.flush();\r\n       writer.close();\r\n\r\nAnd this works fine when I run it in eclipse. However, once I package the program and try to run it using the command line I get an error because the file could not be found.\r\n\r\nI imagine the problem is in this line:\r\n\r\n    ve.setProperty(RuntimeConstants.FILE_RESOURCE_LOADER_PATH, file.getAbsolutePath());\r\n\r\nBecause in a jar the absolute file does not exist, since it&#39;s inside a zip, but I couldn&#39;t yet find a better way to do it.\r\n\r\nAnyone has any ideas?\r\n\r\n","title":"Loading velocity template inside a jar file","body":"<p>I have a project where I want to load a velocity template to complete it with parameters. The whole application is packaged as a jar file. What I initially thought of doing was this:</p>\n\n<pre><code>VelocityEngine ve = new VelocityEngine();\n\n   URL url = this.getClass().getResource(\"/templates/\");\n\n   File file = new File(url.getFile());\n\n   ve = new VelocityEngine();\n   ve.setProperty(RuntimeConstants.RESOURCE_LOADER, \"file\");\n   ve.setProperty(RuntimeConstants.FILE_RESOURCE_LOADER_PATH, file.getAbsolutePath());\n   ve.setProperty(RuntimeConstants.FILE_RESOURCE_LOADER_CACHE, \"true\");\n\n   ve.init();\n\n   VelocityContext context = new VelocityContext();\n\n   if (properties != null) {\n    stringfyNulls(properties);\n    for (Map.Entry&lt;String, Object&gt; property : properties.entrySet()) {\n     context.put(property.getKey(), property.getValue());\n    }\n   }\n\n   final String templatePath = templateName + \".vm\";\n   Template template = ve.getTemplate(templatePath, \"UTF-8\");\n   String outFileName = File.createTempFile(\"report\", \".html\").getAbsolutePath();\n   BufferedWriter writer = new BufferedWriter(new FileWriter(new File(outFileName)));\n\n   template.merge(context, writer);\n\n   writer.flush();\n   writer.close();\n</code></pre>\n\n<p>And this works fine when I run it in eclipse. However, once I package the program and try to run it using the command line I get an error because the file could not be found.</p>\n\n<p>I imagine the problem is in this line:</p>\n\n<pre><code>ve.setProperty(RuntimeConstants.FILE_RESOURCE_LOADER_PATH, file.getAbsolutePath());\n</code></pre>\n\n<p>Because in a jar the absolute file does not exist, since it's inside a zip, but I couldn't yet find a better way to do it.</p>\n\n<p>Anyone has any ideas?</p>\n"},{"tags":["java","spring","spring-mvc","tomcat","tomcat9"],"answers":[{"tags":[],"owner":{"account_id":4820668,"reputation":1,"user_id":3891437,"display_name":"user3891437"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1682263063,"creation_date":1682263063,"answer_id":76085675,"question_id":76085184,"body_markdown":"Acceptor.java:\r\n    /**\r\n     * Signals the Acceptor to stop, waiting at most 10 seconds for the stop to\r\n     * complete before returning. If the stop does not complete in that time a\r\n     * warning will be logged.\r\n     *\r\n     * @deprecated This method will be removed in Tomcat 10.1.x onwards.\r\n     *             Use {@link #stop(int)} instead.\r\n     */\r\n    @Deprecated\r\n    public void stop() {\r\n        stop(10);\r\n    }\r\n\r\n\r\n    /**\r\n     * Signals the Acceptor to stop, optionally waiting for that stop process\r\n     * to complete before returning. If a wait is requested and the stop does\r\n     * not complete in that time a warning will be logged.\r\n     *\r\n     * @param waitSeconds The time to wait in seconds. Use a value less than\r\n     *                    zero for no wait.\r\n     */\r\n    public void stop(int waitSeconds) {\r\n        stopCalled = true;\r\n        if (waitSeconds &gt; 0) {\r\n            try {\r\n                if (!stopLatch.await(waitSeconds, TimeUnit.SECONDS)) {\r\n                   log.warn(sm.getString(&quot;acceptor.stop.fail&quot;, getThreadName()));\r\n                }\r\n            } catch (InterruptedException e) {\r\n                log.warn(sm.getString(&quot;acceptor.stop.interrupted&quot;, getThreadName()), e);\r\n            }\r\n        }\r\n    }\r\n\r\nwhen you shutdown the tomcat,then the Acceptor exeucte stop()-&gt;stop(10).\r\nIn the stop(10), if tomcat not stoped after 10s,it will print the warn log.\r\n","title":"Tomcat gives a warning “The acceptor thread [http-nio-8080-Acceptor] did not stop cleanly” when I shut it down","body":"<p>Acceptor.java:\n/**\n* Signals the Acceptor to stop, waiting at most 10 seconds for the stop to\n* complete before returning. If the stop does not complete in that time a\n* warning will be logged.\n*\n* @deprecated This method will be removed in Tomcat 10.1.x onwards.\n*             Use {@link #stop(int)} instead.\n*/\n@Deprecated\npublic void stop() {\nstop(10);\n}</p>\n<pre><code>/**\n * Signals the Acceptor to stop, optionally waiting for that stop process\n * to complete before returning. If a wait is requested and the stop does\n * not complete in that time a warning will be logged.\n *\n * @param waitSeconds The time to wait in seconds. Use a value less than\n *                    zero for no wait.\n */\npublic void stop(int waitSeconds) {\n    stopCalled = true;\n    if (waitSeconds &gt; 0) {\n        try {\n            if (!stopLatch.await(waitSeconds, TimeUnit.SECONDS)) {\n               log.warn(sm.getString(&quot;acceptor.stop.fail&quot;, getThreadName()));\n            }\n        } catch (InterruptedException e) {\n            log.warn(sm.getString(&quot;acceptor.stop.interrupted&quot;, getThreadName()), e);\n        }\n    }\n}\n</code></pre>\n<p>when you shutdown the tomcat,then the Acceptor exeucte stop()-&gt;stop(10).\nIn the stop(10), if tomcat not stoped after 10s,it will print the warn log.</p>\n"},{"tags":[],"owner":{"account_id":16075172,"reputation":1,"user_id":11602536,"display_name":"CDTN2015"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1682347872,"creation_date":1682347872,"answer_id":76093204,"question_id":76085184,"body_markdown":"OMG, I finally find the reason, ClashX system proxy...no wonder I couldn&#39;t find any same problem on Google.","title":"Tomcat gives a warning “The acceptor thread [http-nio-8080-Acceptor] did not stop cleanly” when I shut it down","body":"<p>OMG, I finally find the reason, ClashX system proxy...no wonder I couldn't find any same problem on Google.</p>\n"}],"owner":{"account_id":16075172,"reputation":1,"user_id":11602536,"display_name":"CDTN2015"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":669,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1682347872,"creation_date":1682257110,"question_id":76085184,"body_markdown":"I started tomcat in the terminal and then shut it down by using &quot;catalina.sh stop&quot;. The console showed these contents. This problem makes me spend 10 more seconds every time restart Tomcat.\r\n\r\n```\r\n/Users/matrix/Tomact/apache-tomcat-9.0.74/bin/catalina.sh run\r\n[2023-04-23 08:52:16,965] Artifact demo:war exploded: Waiting for server connection to start artifact deployment...\r\n23-Apr-2023 20:52:17.539 INFO [main] org.apache.catalina.startup.VersionLoggerListener.log Server version name:   Apache Tomcat/9.0.74\r\n23-Apr-2023 20:52:17.540 INFO [main] org.apache.catalina.startup.VersionLoggerListener.log Server built:          Apr 13 2023 08:10:39 UTC\r\n23-Apr-2023 20:52:17.540 INFO [main] org.apache.catalina.startup.VersionLoggerListener.log Server version number: 9.0.74.0\r\n23-Apr-2023 20:52:17.540 INFO [main] org.apache.catalina.startup.VersionLoggerListener.log OS Name:               Mac OS X\r\n23-Apr-2023 20:52:17.540 INFO [main] org.apache.catalina.startup.VersionLoggerListener.log OS Version:            13.2.1\r\n23-Apr-2023 20:52:17.540 INFO [main] org.apache.catalina.startup.VersionLoggerListener.log Architecture:          x86_64\r\n23-Apr-2023 20:52:17.540 INFO [main] org.apache.catalina.startup.VersionLoggerListener.log Java Home:             /Library/Java/JavaVirtualMachines/jdk1.8.0_361.jdk/Contents/Home/jre\r\n23-Apr-2023 20:52:17.540 INFO [main] org.apache.catalina.startup.VersionLoggerListener.log JVM Version:           1.8.0_361-b09\r\n23-Apr-2023 20:52:17.540 INFO [main] org.apache.catalina.startup.VersionLoggerListener.log JVM Vendor:            Oracle Corporation\r\n23-Apr-2023 20:52:17.540 INFO [main] org.apache.catalina.startup.VersionLoggerListener.log CATALINA_BASE:         /Users/matrix/Library/Caches/JetBrains/IntelliJIdea2023.1/tomcat/afa48016-c355-45c8-95a5-690d57a1db28\r\n23-Apr-2023 20:52:17.540 INFO [main] org.apache.catalina.startup.VersionLoggerListener.log CATALINA_HOME:         /Users/matrix/Tomact/apache-tomcat-9.0.74\r\n23-Apr-2023 20:52:17.541 INFO [main] org.apache.catalina.startup.VersionLoggerListener.log Command line argument: -Djava.util.logging.config.file=/Users/matrix/Library/Caches/JetBrains/IntelliJIdea2023.1/tomcat/afa48016-c355-45c8-95a5-690d57a1db28/conf/logging.properties\r\n23-Apr-2023 20:52:17.541 INFO [main] org.apache.catalina.startup.VersionLoggerListener.log Command line argument: -Djava.util.logging.manager=org.apache.juli.ClassLoaderLogManager\r\n23-Apr-2023 20:52:17.541 INFO [main] org.apache.catalina.startup.VersionLoggerListener.log Command line argument: -Duser.language=en\r\n23-Apr-2023 20:52:17.541 INFO [main] org.apache.catalina.startup.VersionLoggerListener.log Command line argument: -Duser.region=CA\r\n23-Apr-2023 20:52:17.541 INFO [main] org.apache.catalina.startup.VersionLoggerListener.log Command line argument: -Dfile.encoding=UTF-8\r\n23-Apr-2023 20:52:17.541 INFO [main] org.apache.catalina.startup.VersionLoggerListener.log Command line argument: -Dsun.jnu.encoding=UTF-8\r\n23-Apr-2023 20:52:17.541 INFO [main] org.apache.catalina.startup.VersionLoggerListener.log Command line argument: -Dcom.sun.management.jmxremote=\r\n23-Apr-2023 20:52:17.541 INFO [main] org.apache.catalina.startup.VersionLoggerListener.log Command line argument: -Dcom.sun.management.jmxremote.port=1099\r\n23-Apr-2023 20:52:17.541 INFO [main] org.apache.catalina.startup.VersionLoggerListener.log Command line argument: -Dcom.sun.management.jmxremote.ssl=false\r\n23-Apr-2023 20:52:17.541 INFO [main] org.apache.catalina.startup.VersionLoggerListener.log Command line argument: -Dcom.sun.management.jmxremote.password.file=/Users/matrix/Library/Caches/JetBrains/IntelliJIdea2023.1/tomcat/afa48016-c355-45c8-95a5-690d57a1db28/jmxremote.password\r\n23-Apr-2023 20:52:17.541 INFO [main] org.apache.catalina.startup.VersionLoggerListener.log Command line argument: -Dcom.sun.management.jmxremote.access.file=/Users/matrix/Library/Caches/JetBrains/IntelliJIdea2023.1/tomcat/afa48016-c355-45c8-95a5-690d57a1db28/jmxremote.access\r\n23-Apr-2023 20:52:17.541 INFO [main] org.apache.catalina.startup.VersionLoggerListener.log Command line argument: -Djava.rmi.server.hostname=127.0.0.1\r\n23-Apr-2023 20:52:17.541 INFO [main] org.apache.catalina.startup.VersionLoggerListener.log Command line argument: -Djdk.tls.ephemeralDHKeySize=2048\r\n23-Apr-2023 20:52:17.541 INFO [main] org.apache.catalina.startup.VersionLoggerListener.log Command line argument: -Djava.protocol.handler.pkgs=org.apache.catalina.webresources\r\n23-Apr-2023 20:52:17.541 INFO [main] org.apache.catalina.startup.VersionLoggerListener.log Command line argument: -Dorg.apache.catalina.security.SecurityListener.UMASK=0027\r\n23-Apr-2023 20:52:17.541 INFO [main] org.apache.catalina.startup.VersionLoggerListener.log Command line argument: -Dignore.endorsed.dirs=\r\n23-Apr-2023 20:52:17.541 INFO [main] org.apache.catalina.startup.VersionLoggerListener.log Command line argument: -Dcatalina.base=/Users/matrix/Library/Caches/JetBrains/IntelliJIdea2023.1/tomcat/afa48016-c355-45c8-95a5-690d57a1db28\r\n23-Apr-2023 20:52:17.542 INFO [main] org.apache.catalina.startup.VersionLoggerListener.log Command line argument: -Dcatalina.home=/Users/matrix/Tomact/apache-tomcat-9.0.74\r\n23-Apr-2023 20:52:17.542 INFO [main] org.apache.catalina.startup.VersionLoggerListener.log Command line argument: -Djava.io.tmpdir=/Users/matrix/Tomact/apache-tomcat-9.0.74/temp\r\n23-Apr-2023 20:52:17.549 INFO [main] org.apache.catalina.core.AprLifecycleListener.lifecycleEvent The Apache Tomcat Native library which allows using OpenSSL was not found on the java.library.path: [/Users/matrix/Library/Java/Extensions:/Library/Java/Extensions:/Network/Library/Java/Extensions:/System/Library/Java/Extensions:/usr/lib/java:.]\r\n23-Apr-2023 20:52:18.002 INFO [main] org.apache.coyote.AbstractProtocol.init Initializing ProtocolHandler [&quot;http-nio-8080&quot;]\r\n23-Apr-2023 20:52:18.038 INFO [main] org.apache.catalina.startup.Catalina.load Server initialization in [660] milliseconds\r\n23-Apr-2023 20:52:18.071 INFO [main] org.apache.catalina.core.StandardService.startInternal Starting service [Catalina]\r\n23-Apr-2023 20:52:18.071 INFO [main] org.apache.catalina.core.StandardEngine.startInternal Starting Servlet engine: [Apache Tomcat/9.0.74]\r\n23-Apr-2023 20:52:18.082 INFO [main] org.apache.coyote.AbstractProtocol.start Starting ProtocolHandler [&quot;http-nio-8080&quot;]\r\n23-Apr-2023 20:52:18.090 INFO [main] org.apache.catalina.startup.Catalina.start Server startup in [51] milliseconds\r\nConnected to server\r\n[2023-04-23 08:52:18,565] Artifact demo:war exploded: Artifact is being deployed, please wait...\r\n23-Apr-2023 20:52:19.634 INFO [RMI TCP Connection(2)-127.0.0.1] org.apache.jasper.servlet.TldScanner.scanJars At least one JAR was scanned for TLDs yet contained no TLDs. Enable debug logging for this logger for a complete list of JARs that were scanned but no TLDs were found in them. Skipping unneeded JARs during scanning can improve startup time and JSP compilation time.\r\nSLF4J: Failed to load class &quot;org.slf4j.impl.StaticLoggerBinder&quot;.\r\nSLF4J: Defaulting to no-operation (NOP) logger implementation\r\nSLF4J: See http://www.slf4j.org/codes.html#StaticLoggerBinder for further details.\r\n[2023-04-23 08:52:20,677] Artifact demo:war exploded: Artifact is deployed successfully\r\n[2023-04-23 08:52:20,677] Artifact demo:war exploded: Deploy took 2,112 milliseconds\r\n/Users/matrix/Tomact/apache-tomcat-9.0.74/bin/catalina.sh stop\r\n23-Apr-2023 20:52:25.735 INFO [main] org.apache.catalina.core.StandardServer.await A valid shutdown command was received via the shutdown port. Stopping the Server instance.\r\n23-Apr-2023 20:52:25.736 INFO [main] org.apache.coyote.AbstractProtocol.pause Pausing ProtocolHandler [&quot;http-nio-8080&quot;]\r\n23-Apr-2023 20:52:26.745 INFO [main] org.apache.catalina.core.StandardService.stopInternal Stopping service [Catalina]\r\n23-Apr-2023 20:52:26.762 INFO [main] org.apache.coyote.AbstractProtocol.stop Stopping ProtocolHandler [&quot;http-nio-8080&quot;]\r\n23-Apr-2023 20:52:36.763 WARNING [main] org.apache.tomcat.util.net.Acceptor.stop The acceptor thread [http-nio-8080-Acceptor] did not stop cleanly\r\n23-Apr-2023 20:52:36.768 INFO [main] org.apache.coyote.AbstractProtocol.destroy Destroying ProtocolHandler [&quot;http-nio-8080&quot;]\r\nDisconnected from server\r\n```\r\n\r\nI tried Google but there were no similar results. I restarted the device, reinstalled, used homebrew and the official compressed package. But both version 9 and 10 had similar problems.\r\nHas anyone encountered the similar problem? Is there any way to solve this problem, let me know the specific location where the Acceptor thread runs, give me some guidance on how to troubleshoot related thread issues.\r\nI look forward to and appreciate your guidance.","title":"Tomcat gives a warning “The acceptor thread [http-nio-8080-Acceptor] did not stop cleanly” when I shut it down","body":"<p>I started tomcat in the terminal and then shut it down by using &quot;catalina.sh stop&quot;. The console showed these contents. This problem makes me spend 10 more seconds every time restart Tomcat.</p>\n<pre><code>/Users/matrix/Tomact/apache-tomcat-9.0.74/bin/catalina.sh run\n[2023-04-23 08:52:16,965] Artifact demo:war exploded: Waiting for server connection to start artifact deployment...\n23-Apr-2023 20:52:17.539 INFO [main] org.apache.catalina.startup.VersionLoggerListener.log Server version name:   Apache Tomcat/9.0.74\n23-Apr-2023 20:52:17.540 INFO [main] org.apache.catalina.startup.VersionLoggerListener.log Server built:          Apr 13 2023 08:10:39 UTC\n23-Apr-2023 20:52:17.540 INFO [main] org.apache.catalina.startup.VersionLoggerListener.log Server version number: 9.0.74.0\n23-Apr-2023 20:52:17.540 INFO [main] org.apache.catalina.startup.VersionLoggerListener.log OS Name:               Mac OS X\n23-Apr-2023 20:52:17.540 INFO [main] org.apache.catalina.startup.VersionLoggerListener.log OS Version:            13.2.1\n23-Apr-2023 20:52:17.540 INFO [main] org.apache.catalina.startup.VersionLoggerListener.log Architecture:          x86_64\n23-Apr-2023 20:52:17.540 INFO [main] org.apache.catalina.startup.VersionLoggerListener.log Java Home:             /Library/Java/JavaVirtualMachines/jdk1.8.0_361.jdk/Contents/Home/jre\n23-Apr-2023 20:52:17.540 INFO [main] org.apache.catalina.startup.VersionLoggerListener.log JVM Version:           1.8.0_361-b09\n23-Apr-2023 20:52:17.540 INFO [main] org.apache.catalina.startup.VersionLoggerListener.log JVM Vendor:            Oracle Corporation\n23-Apr-2023 20:52:17.540 INFO [main] org.apache.catalina.startup.VersionLoggerListener.log CATALINA_BASE:         /Users/matrix/Library/Caches/JetBrains/IntelliJIdea2023.1/tomcat/afa48016-c355-45c8-95a5-690d57a1db28\n23-Apr-2023 20:52:17.540 INFO [main] org.apache.catalina.startup.VersionLoggerListener.log CATALINA_HOME:         /Users/matrix/Tomact/apache-tomcat-9.0.74\n23-Apr-2023 20:52:17.541 INFO [main] org.apache.catalina.startup.VersionLoggerListener.log Command line argument: -Djava.util.logging.config.file=/Users/matrix/Library/Caches/JetBrains/IntelliJIdea2023.1/tomcat/afa48016-c355-45c8-95a5-690d57a1db28/conf/logging.properties\n23-Apr-2023 20:52:17.541 INFO [main] org.apache.catalina.startup.VersionLoggerListener.log Command line argument: -Djava.util.logging.manager=org.apache.juli.ClassLoaderLogManager\n23-Apr-2023 20:52:17.541 INFO [main] org.apache.catalina.startup.VersionLoggerListener.log Command line argument: -Duser.language=en\n23-Apr-2023 20:52:17.541 INFO [main] org.apache.catalina.startup.VersionLoggerListener.log Command line argument: -Duser.region=CA\n23-Apr-2023 20:52:17.541 INFO [main] org.apache.catalina.startup.VersionLoggerListener.log Command line argument: -Dfile.encoding=UTF-8\n23-Apr-2023 20:52:17.541 INFO [main] org.apache.catalina.startup.VersionLoggerListener.log Command line argument: -Dsun.jnu.encoding=UTF-8\n23-Apr-2023 20:52:17.541 INFO [main] org.apache.catalina.startup.VersionLoggerListener.log Command line argument: -Dcom.sun.management.jmxremote=\n23-Apr-2023 20:52:17.541 INFO [main] org.apache.catalina.startup.VersionLoggerListener.log Command line argument: -Dcom.sun.management.jmxremote.port=1099\n23-Apr-2023 20:52:17.541 INFO [main] org.apache.catalina.startup.VersionLoggerListener.log Command line argument: -Dcom.sun.management.jmxremote.ssl=false\n23-Apr-2023 20:52:17.541 INFO [main] org.apache.catalina.startup.VersionLoggerListener.log Command line argument: -Dcom.sun.management.jmxremote.password.file=/Users/matrix/Library/Caches/JetBrains/IntelliJIdea2023.1/tomcat/afa48016-c355-45c8-95a5-690d57a1db28/jmxremote.password\n23-Apr-2023 20:52:17.541 INFO [main] org.apache.catalina.startup.VersionLoggerListener.log Command line argument: -Dcom.sun.management.jmxremote.access.file=/Users/matrix/Library/Caches/JetBrains/IntelliJIdea2023.1/tomcat/afa48016-c355-45c8-95a5-690d57a1db28/jmxremote.access\n23-Apr-2023 20:52:17.541 INFO [main] org.apache.catalina.startup.VersionLoggerListener.log Command line argument: -Djava.rmi.server.hostname=127.0.0.1\n23-Apr-2023 20:52:17.541 INFO [main] org.apache.catalina.startup.VersionLoggerListener.log Command line argument: -Djdk.tls.ephemeralDHKeySize=2048\n23-Apr-2023 20:52:17.541 INFO [main] org.apache.catalina.startup.VersionLoggerListener.log Command line argument: -Djava.protocol.handler.pkgs=org.apache.catalina.webresources\n23-Apr-2023 20:52:17.541 INFO [main] org.apache.catalina.startup.VersionLoggerListener.log Command line argument: -Dorg.apache.catalina.security.SecurityListener.UMASK=0027\n23-Apr-2023 20:52:17.541 INFO [main] org.apache.catalina.startup.VersionLoggerListener.log Command line argument: -Dignore.endorsed.dirs=\n23-Apr-2023 20:52:17.541 INFO [main] org.apache.catalina.startup.VersionLoggerListener.log Command line argument: -Dcatalina.base=/Users/matrix/Library/Caches/JetBrains/IntelliJIdea2023.1/tomcat/afa48016-c355-45c8-95a5-690d57a1db28\n23-Apr-2023 20:52:17.542 INFO [main] org.apache.catalina.startup.VersionLoggerListener.log Command line argument: -Dcatalina.home=/Users/matrix/Tomact/apache-tomcat-9.0.74\n23-Apr-2023 20:52:17.542 INFO [main] org.apache.catalina.startup.VersionLoggerListener.log Command line argument: -Djava.io.tmpdir=/Users/matrix/Tomact/apache-tomcat-9.0.74/temp\n23-Apr-2023 20:52:17.549 INFO [main] org.apache.catalina.core.AprLifecycleListener.lifecycleEvent The Apache Tomcat Native library which allows using OpenSSL was not found on the java.library.path: [/Users/matrix/Library/Java/Extensions:/Library/Java/Extensions:/Network/Library/Java/Extensions:/System/Library/Java/Extensions:/usr/lib/java:.]\n23-Apr-2023 20:52:18.002 INFO [main] org.apache.coyote.AbstractProtocol.init Initializing ProtocolHandler [&quot;http-nio-8080&quot;]\n23-Apr-2023 20:52:18.038 INFO [main] org.apache.catalina.startup.Catalina.load Server initialization in [660] milliseconds\n23-Apr-2023 20:52:18.071 INFO [main] org.apache.catalina.core.StandardService.startInternal Starting service [Catalina]\n23-Apr-2023 20:52:18.071 INFO [main] org.apache.catalina.core.StandardEngine.startInternal Starting Servlet engine: [Apache Tomcat/9.0.74]\n23-Apr-2023 20:52:18.082 INFO [main] org.apache.coyote.AbstractProtocol.start Starting ProtocolHandler [&quot;http-nio-8080&quot;]\n23-Apr-2023 20:52:18.090 INFO [main] org.apache.catalina.startup.Catalina.start Server startup in [51] milliseconds\nConnected to server\n[2023-04-23 08:52:18,565] Artifact demo:war exploded: Artifact is being deployed, please wait...\n23-Apr-2023 20:52:19.634 INFO [RMI TCP Connection(2)-127.0.0.1] org.apache.jasper.servlet.TldScanner.scanJars At least one JAR was scanned for TLDs yet contained no TLDs. Enable debug logging for this logger for a complete list of JARs that were scanned but no TLDs were found in them. Skipping unneeded JARs during scanning can improve startup time and JSP compilation time.\nSLF4J: Failed to load class &quot;org.slf4j.impl.StaticLoggerBinder&quot;.\nSLF4J: Defaulting to no-operation (NOP) logger implementation\nSLF4J: See http://www.slf4j.org/codes.html#StaticLoggerBinder for further details.\n[2023-04-23 08:52:20,677] Artifact demo:war exploded: Artifact is deployed successfully\n[2023-04-23 08:52:20,677] Artifact demo:war exploded: Deploy took 2,112 milliseconds\n/Users/matrix/Tomact/apache-tomcat-9.0.74/bin/catalina.sh stop\n23-Apr-2023 20:52:25.735 INFO [main] org.apache.catalina.core.StandardServer.await A valid shutdown command was received via the shutdown port. Stopping the Server instance.\n23-Apr-2023 20:52:25.736 INFO [main] org.apache.coyote.AbstractProtocol.pause Pausing ProtocolHandler [&quot;http-nio-8080&quot;]\n23-Apr-2023 20:52:26.745 INFO [main] org.apache.catalina.core.StandardService.stopInternal Stopping service [Catalina]\n23-Apr-2023 20:52:26.762 INFO [main] org.apache.coyote.AbstractProtocol.stop Stopping ProtocolHandler [&quot;http-nio-8080&quot;]\n23-Apr-2023 20:52:36.763 WARNING [main] org.apache.tomcat.util.net.Acceptor.stop The acceptor thread [http-nio-8080-Acceptor] did not stop cleanly\n23-Apr-2023 20:52:36.768 INFO [main] org.apache.coyote.AbstractProtocol.destroy Destroying ProtocolHandler [&quot;http-nio-8080&quot;]\nDisconnected from server\n</code></pre>\n<p>I tried Google but there were no similar results. I restarted the device, reinstalled, used homebrew and the official compressed package. But both version 9 and 10 had similar problems.\nHas anyone encountered the similar problem? Is there any way to solve this problem, let me know the specific location where the Acceptor thread runs, give me some guidance on how to troubleshoot related thread issues.\nI look forward to and appreciate your guidance.</p>\n"},{"tags":["java","spring-boot"],"comments":[{"owner":{"account_id":372682,"reputation":22426,"user_id":721855,"display_name":"aled"},"score":0,"creation_date":1682348096,"post_id":76093095,"comment_id":134196826,"body_markdown":"What is the condition to have a different view? The position in the array?","body":"What is the condition to have a different view? The position in the array?"},{"owner":{"account_id":7844745,"reputation":33,"user_id":5930176,"display_name":"Kundan Kumar"},"score":0,"creation_date":1682348697,"post_id":76093095,"comment_id":134196979,"body_markdown":"here, we can say, for example. age is lesser than 23. we don&#39;t want to include them in our response.","body":"here, we can say, for example. age is lesser than 23. we don&#39;t want to include them in our response."}],"owner":{"account_id":7844745,"reputation":33,"user_id":5930176,"display_name":"Kundan Kumar"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":23,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1682347251,"creation_date":1682347251,"question_id":76093095,"body_markdown":"I am trying to get a list of object in response using rest-controller. But I want to apply different-different json view on each element of response list based on some condition in my java code. \r\n\r\nFor example:\r\n```\r\nclass Emp{\r\n   int id;\r\n   String name;\r\n   int age;\r\n}\r\n```\r\nRequired response \r\n```\r\n[{\r\n  1, &quot;KK&quot;,23\r\n},\r\n{2,&quot;PK&quot;\r\n},\r\n{ 3, &quot;CK&quot;\r\n},]\r\n```\r\nYou can see above that, in second and third object, there is not age, but in first, we have. I need response as above.\r\n\r\nPlease help me to solve it.","title":"How to apply different jsonview on each element of arraylist java","body":"<p>I am trying to get a list of object in response using rest-controller. But I want to apply different-different json view on each element of response list based on some condition in my java code.</p>\n<p>For example:</p>\n<pre><code>class Emp{\n   int id;\n   String name;\n   int age;\n}\n</code></pre>\n<p>Required response</p>\n<pre><code>[{\n  1, &quot;KK&quot;,23\n},\n{2,&quot;PK&quot;\n},\n{ 3, &quot;CK&quot;\n},]\n</code></pre>\n<p>You can see above that, in second and third object, there is not age, but in first, we have. I need response as above.</p>\n<p>Please help me to solve it.</p>\n"},{"tags":["java","gradle","jetbrains-ide","jetbrains-fleet"],"comments":[{"owner":{"account_id":12214748,"reputation":346,"user_id":8915530,"display_name":"COleson"},"score":0,"creation_date":1666492656,"post_id":74070582,"comment_id":130949179,"body_markdown":"To me, it looks like there may be an issue with the JDK version that is set in your JAVA_HOME setting/environment variables. You may wish to check there and/or configure the Fleet JDK settings for your project.","body":"To me, it looks like there may be an issue with the JDK version that is set in your JAVA_HOME setting/environment variables. You may wish to check there and/or configure the Fleet JDK settings for your project."}],"answers":[{"tags":[],"owner":{"account_id":2273465,"reputation":15439,"user_id":2000323,"display_name":"Andrey"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1682346702,"creation_date":1682346702,"answer_id":76093009,"question_id":74070582,"body_markdown":"By default, Fleet uses the JDK from your `JAVA_HOME` environment variable. Before proceeding, make sure it is configured in your environment. Otherwise, you can [configure a custom JDK for your project](https://www.jetbrains.com/help/fleet/getting-started-with-java-in-fleet.html#configure-jdk) as shown in the documentation.\r\n\r\nAlso, the &quot;java.home&quot; property in `.fleet/settings.json` [user settings file](https://www.jetbrains.com/help/fleet/settings.html#user-settings) should help.\r\n\r\nPlease see a [documentation](https://www.jetbrains.com/help/fleet/getting-started-with-java-in-fleet.html#7115876c) for more details.","title":"Fleet: Invalid Gradle JDK configuration found","body":"<p>By default, Fleet uses the JDK from your <code>JAVA_HOME</code> environment variable. Before proceeding, make sure it is configured in your environment. Otherwise, you can <a href=\"https://www.jetbrains.com/help/fleet/getting-started-with-java-in-fleet.html#configure-jdk\" rel=\"nofollow noreferrer\">configure a custom JDK for your project</a> as shown in the documentation.</p>\n<p>Also, the &quot;java.home&quot; property in <code>.fleet/settings.json</code> <a href=\"https://www.jetbrains.com/help/fleet/settings.html#user-settings\" rel=\"nofollow noreferrer\">user settings file</a> should help.</p>\n<p>Please see a <a href=\"https://www.jetbrains.com/help/fleet/getting-started-with-java-in-fleet.html#7115876c\" rel=\"nofollow noreferrer\">documentation</a> for more details.</p>\n"}],"owner":{"account_id":3106126,"reputation":31241,"user_id":2628868,"accept_rate":84,"display_name":"Dolphin"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":551,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":1,"score":3,"last_activity_date":1682346702,"creation_date":1665756802,"question_id":74070582,"body_markdown":"When I&#39;m using JetBrains Fleet and open the Java project Gradle configuration file `build.gradle` it shows an error:\r\n\r\n&gt;Invalid Gradle JDK configuration found. `&lt;a href=&#39;#open_external_system_settings&#39;&gt;Open Gradle Settings&lt;/a&gt;`\r\n\r\n```\r\ncom.intellij.openapi.externalSystem.service.execution.ExternalSystemJdkException: Invalid Gradle JDK configuration found. &lt;a href=&#39;#open_external_system_settings&#39;&gt;Open Gradle Settings&lt;/a&gt; \r\n    \r\n    \tat org.jetbrains.plugins.gradle.service.execution.LocalGradleExecutionAware.jdkConfigurationException(LocalGradleExecutionAware.kt:184)\r\n    \tat org.jetbrains.plugins.gradle.service.execution.LocalGradleExecutionAware.prepareJvmForExecution(LocalGradleExecutionAware.kt:122)\r\n    \tat org.jetbrains.plugins.gradle.service.execution.LocalGradleExecutionAware.prepareExecution(LocalGradleExecutionAware.kt:62)\r\n    \tat com.intellij.openapi.externalSystem.service.internal.ExternalSystemResolveProjectTask.doExecute(ExternalSystemResolveProjectTask.java:90)\r\n    \tat com.intellij.openapi.externalSystem.service.internal.AbstractExternalSystemTask.execute(AbstractExternalSystemTask.java:151)\r\n    \tat com.intellij.openapi.externalSystem.service.internal.AbstractExternalSystemTask.execute(AbstractExternalSystemTask.java:135)\r\n    \tat com.intellij.openapi.externalSystem.util.ExternalSystemUtil$2.executeImpl(ExternalSystemUtil.java:496)\r\n    \tat com.intellij.openapi.externalSystem.util.ExternalSystemUtil$2.lambda$execute$0(ExternalSystemUtil.java:327)\r\n    \tat com.intellij.openapi.project.DumbServiceHeavyActivities.suspendIndexingAndRun(DumbServiceHeavyActivities.java:21)\r\n    \tat com.intellij.openapi.project.DumbServiceImpl.suspendIndexingAndRun(DumbServiceImpl.java:186)\r\n    \tat com.intellij.openapi.externalSystem.util.ExternalSystemUtil$2.execute(ExternalSystemUtil.java:327)\r\n    \tat com.intellij.openapi.externalSystem.util.ExternalSystemUtil$4.run(ExternalSystemUtil.java:619)\r\n    \tat com.intellij.openapi.progress.impl.CoreProgressManager.startTask(CoreProgressManager.java:424)\r\n    \tat com.intellij.openapi.progress.impl.ProgressManagerImpl.startTask(ProgressManagerImpl.java:114)\r\n    \tat com.intellij.openapi.progress.impl.CoreProgressManager.lambda$runProcessWithProgressAsynchronously$6(CoreProgressManager.java:475)\r\n    \tat com.intellij.openapi.progress.impl.ProgressRunner.lambda$submit$3(ProgressRunner.java:252)\r\n    \tat com.intellij.openapi.progress.impl.CoreProgressManager.lambda$runProcess$2(CoreProgressManager.java:188)\r\n    \tat com.intellij.openapi.progress.impl.CoreProgressManager.lambda$executeProcessUnderProgress$13(CoreProgressManager.java:590)\r\n    \tat com.intellij.openapi.progress.impl.CoreProgressManager.registerIndicatorAndRun(CoreProgressManager.java:665)\r\n    \tat com.intellij.openapi.progress.impl.CoreProgressManager.computeUnderProgress(CoreProgressManager.java:621)\r\n    \tat com.intellij.openapi.progress.impl.CoreProgressManager.executeProcessUnderProgress(CoreProgressManager.java:589)\r\n    \tat com.intellij.openapi.progress.impl.ProgressManagerImpl.executeProcessUnderProgress(ProgressManagerImpl.java:60)\r\n    \tat com.intellij.openapi.progress.impl.CoreProgressManager.runProcess(CoreProgressManager.java:175)\r\n    \tat com.intellij.openapi.progress.impl.ProgressRunner.lambda$submit$4(ProgressRunner.java:252)\r\n    \tat java.base/java.util.concurrent.CompletableFuture$AsyncSupply.run(CompletableFuture.java:1768)\r\n    \tat java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)\r\n    \tat java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)\r\n    \tat java.base/java.util.concurrent.Executors$PrivilegedThreadFactory$1$1.run(Executors.java:702)\r\n    \tat java.base/java.util.concurrent.Executors$PrivilegedThreadFactory$1$1.run(Executors.java:699)\r\n    \tat java.base/java.security.AccessController.doPrivileged(AccessController.java:399)\r\n    \tat java.base/java.util.concurrent.Executors$PrivilegedThreadFactory$1.run(Executors.java:699)\r\n    \tat java.base/java.lang.Thread.run(Thread.java:833)\r\n```\r\n\r\nHow to configure Gradle JDK in JetBrains Fleet?\r\n","title":"Fleet: Invalid Gradle JDK configuration found","body":"<p>When I'm using JetBrains Fleet and open the Java project Gradle configuration file <code>build.gradle</code> it shows an error:</p>\n<blockquote>\n<p>Invalid Gradle JDK configuration found. <code>&lt;a href='#open_external_system_settings'&gt;Open Gradle Settings&lt;/a&gt;</code></p>\n</blockquote>\n<pre><code>com.intellij.openapi.externalSystem.service.execution.ExternalSystemJdkException: Invalid Gradle JDK configuration found. &lt;a href='#open_external_system_settings'&gt;Open Gradle Settings&lt;/a&gt; \n    \n        at org.jetbrains.plugins.gradle.service.execution.LocalGradleExecutionAware.jdkConfigurationException(LocalGradleExecutionAware.kt:184)\n        at org.jetbrains.plugins.gradle.service.execution.LocalGradleExecutionAware.prepareJvmForExecution(LocalGradleExecutionAware.kt:122)\n        at org.jetbrains.plugins.gradle.service.execution.LocalGradleExecutionAware.prepareExecution(LocalGradleExecutionAware.kt:62)\n        at com.intellij.openapi.externalSystem.service.internal.ExternalSystemResolveProjectTask.doExecute(ExternalSystemResolveProjectTask.java:90)\n        at com.intellij.openapi.externalSystem.service.internal.AbstractExternalSystemTask.execute(AbstractExternalSystemTask.java:151)\n        at com.intellij.openapi.externalSystem.service.internal.AbstractExternalSystemTask.execute(AbstractExternalSystemTask.java:135)\n        at com.intellij.openapi.externalSystem.util.ExternalSystemUtil$2.executeImpl(ExternalSystemUtil.java:496)\n        at com.intellij.openapi.externalSystem.util.ExternalSystemUtil$2.lambda$execute$0(ExternalSystemUtil.java:327)\n        at com.intellij.openapi.project.DumbServiceHeavyActivities.suspendIndexingAndRun(DumbServiceHeavyActivities.java:21)\n        at com.intellij.openapi.project.DumbServiceImpl.suspendIndexingAndRun(DumbServiceImpl.java:186)\n        at com.intellij.openapi.externalSystem.util.ExternalSystemUtil$2.execute(ExternalSystemUtil.java:327)\n        at com.intellij.openapi.externalSystem.util.ExternalSystemUtil$4.run(ExternalSystemUtil.java:619)\n        at com.intellij.openapi.progress.impl.CoreProgressManager.startTask(CoreProgressManager.java:424)\n        at com.intellij.openapi.progress.impl.ProgressManagerImpl.startTask(ProgressManagerImpl.java:114)\n        at com.intellij.openapi.progress.impl.CoreProgressManager.lambda$runProcessWithProgressAsynchronously$6(CoreProgressManager.java:475)\n        at com.intellij.openapi.progress.impl.ProgressRunner.lambda$submit$3(ProgressRunner.java:252)\n        at com.intellij.openapi.progress.impl.CoreProgressManager.lambda$runProcess$2(CoreProgressManager.java:188)\n        at com.intellij.openapi.progress.impl.CoreProgressManager.lambda$executeProcessUnderProgress$13(CoreProgressManager.java:590)\n        at com.intellij.openapi.progress.impl.CoreProgressManager.registerIndicatorAndRun(CoreProgressManager.java:665)\n        at com.intellij.openapi.progress.impl.CoreProgressManager.computeUnderProgress(CoreProgressManager.java:621)\n        at com.intellij.openapi.progress.impl.CoreProgressManager.executeProcessUnderProgress(CoreProgressManager.java:589)\n        at com.intellij.openapi.progress.impl.ProgressManagerImpl.executeProcessUnderProgress(ProgressManagerImpl.java:60)\n        at com.intellij.openapi.progress.impl.CoreProgressManager.runProcess(CoreProgressManager.java:175)\n        at com.intellij.openapi.progress.impl.ProgressRunner.lambda$submit$4(ProgressRunner.java:252)\n        at java.base/java.util.concurrent.CompletableFuture$AsyncSupply.run(CompletableFuture.java:1768)\n        at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)\n        at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)\n        at java.base/java.util.concurrent.Executors$PrivilegedThreadFactory$1$1.run(Executors.java:702)\n        at java.base/java.util.concurrent.Executors$PrivilegedThreadFactory$1$1.run(Executors.java:699)\n        at java.base/java.security.AccessController.doPrivileged(AccessController.java:399)\n        at java.base/java.util.concurrent.Executors$PrivilegedThreadFactory$1.run(Executors.java:699)\n        at java.base/java.lang.Thread.run(Thread.java:833)\n</code></pre>\n<p>How to configure Gradle JDK in JetBrains Fleet?</p>\n"},{"tags":["java","string","indexof","lastindexof"],"comments":[{"owner":{"account_id":147727,"reputation":12641,"user_id":359035,"accept_rate":92,"display_name":"BillRobertson42"},"score":1,"creation_date":1509159474,"post_id":46985701,"comment_id":80918781,"body_markdown":"If you look at the implementation of indexOf, I&#39;d be willing to bet you&#39;d find a loop. The advantage of using it would be that you don&#39;t have to write the loop, and that&#39;s a good thing because best code is code that you don&#39;t write.","body":"If you look at the implementation of indexOf, I&#39;d be willing to bet you&#39;d find a loop. The advantage of using it would be that you don&#39;t have to write the loop, and that&#39;s a good thing because best code is code that you don&#39;t write."},{"owner":{"account_id":11002977,"reputation":200,"user_id":8082965,"accept_rate":0,"display_name":"Jsbbvk"},"score":0,"creation_date":1509159841,"post_id":46985701,"comment_id":80918842,"body_markdown":"@Bill  I think I didn&#39;t clarify.  Find a way to find an index of a non-alphabetic character.  Since there is a huge range of non-alphabetical characters, it&#39;s not possible to use indexOf() because you don&#39;t specifically know the character you are looking for.  Hope this helps!","body":"@Bill  I think I didn&#39;t clarify.  Find a way to find an index of a non-alphabetic character.  Since there is a huge range of non-alphabetical characters, it&#39;s not possible to use indexOf() because you don&#39;t specifically know the character you are looking for.  Hope this helps!"},{"owner":{"account_id":147727,"reputation":12641,"user_id":359035,"accept_rate":92,"display_name":"BillRobertson42"},"score":0,"creation_date":1509160303,"post_id":46985701,"comment_id":80918894,"body_markdown":"Sure I get that, which is part of the reason that I left a comment instead of suggesting an answer.","body":"Sure I get that, which is part of the reason that I left a comment instead of suggesting an answer."}],"answers":[{"tags":[],"owner":{"account_id":3187377,"reputation":17941,"user_id":2780943,"accept_rate":55,"display_name":"user184994"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1509159398,"creation_date":1509159398,"answer_id":46985783,"question_id":46985701,"body_markdown":"You should probably use a regular expression:\r\n\r\n      Pattern patt = Pattern.compile(&quot;[^A-Za-z]&quot;);\r\n      Matcher mat = patt.matcher(&quot;avc@dgh&quot;);\r\n      boolean found = mat.find();\r\n      System.out.println(found ? mat.start() : -1);\r\n","title":"Java- How to find non-alphabetical letters in a string? (Quick way)","body":"<p>You should probably use a regular expression:</p>\n\n<pre><code>  Pattern patt = Pattern.compile(\"[^A-Za-z]\");\n  Matcher mat = patt.matcher(\"avc@dgh\");\n  boolean found = mat.find();\n  System.out.println(found ? mat.start() : -1);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":37236,"reputation":2594,"user_id":106418,"accept_rate":81,"display_name":"Nicholas Hirras"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1509160167,"creation_date":1509160167,"answer_id":46985860,"question_id":46985701,"body_markdown":"A for loop, you can use the Character class to determine if each character is a Letter (or other type). See: https://docs.oracle.com/javase/7/docs/api/java/lang/Character.html#isAlphabetic(int)\r\n","title":"Java- How to find non-alphabetical letters in a string? (Quick way)","body":"<p>A for loop, you can use the Character class to determine if each character is a Letter (or other type). See: <a href=\"https://docs.oracle.com/javase/7/docs/api/java/lang/Character.html#isAlphabetic(int)\" rel=\"nofollow noreferrer\">https://docs.oracle.com/javase/7/docs/api/java/lang/Character.html#isAlphabetic(int)</a></p>\n"},{"tags":[],"owner":{"account_id":23396178,"reputation":11,"user_id":17460171,"display_name":"awskme"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1662651919,"creation_date":1662651919,"answer_id":73651832,"question_id":46985701,"body_markdown":"You could use regex to split the string on anything that is not alphabetic:\r\n```\r\nString str = &quot;abc@df&quot;; \r\nString[] split = str.split(&quot;[^A-za-z]&quot;);\r\n```\r\nThen you can use the length of the strings in that array to find the index of the non - alphabetic chars:\r\n\r\n```\r\nint firstIndex = split[0].length();\r\n```\r\nAnd so on:\r\n```\r\nint secondIndex = firstIndex + split[1].length();\r\n```","title":"Java- How to find non-alphabetical letters in a string? (Quick way)","body":"<p>You could use regex to split the string on anything that is not alphabetic:</p>\n<pre><code>String str = &quot;abc@df&quot;; \nString[] split = str.split(&quot;[^A-za-z]&quot;);\n</code></pre>\n<p>Then you can use the length of the strings in that array to find the index of the non - alphabetic chars:</p>\n<pre><code>int firstIndex = split[0].length();\n</code></pre>\n<p>And so on:</p>\n<pre><code>int secondIndex = firstIndex + split[1].length();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2375930,"reputation":31,"user_id":2079284,"display_name":"Bill"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1682346651,"creation_date":1682346651,"answer_id":76093002,"question_id":46985701,"body_markdown":"I realize that this is old, however a couple of the regex answers above specified [^A-za-z], however I expect they intended to say [^A-Za-z], otherwise it would include a handful of non-alpha characters in the range including [, \\, ], ^, etc...","title":"Java- How to find non-alphabetical letters in a string? (Quick way)","body":"<p>I realize that this is old, however a couple of the regex answers above specified [^A-za-z], however I expect they intended to say [^A-Za-z], otherwise it would include a handful of non-alpha characters in the range including [, , ], ^, etc...</p>\n"}],"owner":{"account_id":11002977,"reputation":200,"user_id":8082965,"accept_rate":0,"display_name":"Jsbbvk"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1811,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":4,"score":1,"last_activity_date":1682346651,"creation_date":1509158140,"question_id":46985701,"body_markdown":"In Java, given a string, like &quot;abc@df&quot; where the character &#39;@&#39; could be ANY other non-letter, like &#39;%&#39;, &#39;^&#39;, &#39;&amp;&#39;, etc.  What would be the most efficient way to find that index? I know that a for loop would be kind of quick (depending on the string length), but what about any other quicker methods? A method that finds all index(es) of non-alphabetical letters or the closest one to a given index (like indexOf(string, startingIdx))\r\n  Thanks!","title":"Java- How to find non-alphabetical letters in a string? (Quick way)","body":"<p>In Java, given a string, like \"abc@df\" where the character '@' could be ANY other non-letter, like '%', '^', '&amp;', etc.  What would be the most efficient way to find that index? I know that a for loop would be kind of quick (depending on the string length), but what about any other quicker methods? A method that finds all index(es) of non-alphabetical letters or the closest one to a given index (like indexOf(string, startingIdx))\n  Thanks!</p>\n"},{"tags":["java","apache-spark","pyspark"],"answers":[{"tags":[],"owner":{"account_id":10348597,"reputation":30603,"user_id":7632695,"display_name":"notNull"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1682346176,"creation_date":1682346176,"answer_id":76092926,"question_id":76092684,"body_markdown":"Try with [`monotonically_increasing_id()`][1] inbuilt function for this case.\r\n\r\n    df.withColumn(&quot;mid&quot;,monotonically_increasing_id()))\r\n\r\n----\r\nIf this mid doesn&#39;t give the expected results then use this `mid` column as **orderby** column to generate `row_number()` on the dataframe.\r\n\r\n    from pyspark.sql import *\r\n    from pyspark.sql.functions import *\r\n    df1 = df1.withColumn(&quot;mid&quot;, monotonically_increasing_id())\r\n    windowSpec = W.orderBy(&quot;mid&quot;)\r\n    df1 = df1.withColumn(&quot;line_num&quot;, row_number().over(windowSpec)).show()\r\n\r\n  [1]: https://spark.apache.org/docs/3.1.3/api/python/reference/api/pyspark.sql.functions.monotonically_increasing_id.html\r\n","title":"How to get the line number of each line across multiple files in Spark?","body":"<p>Try with <a href=\"https://spark.apache.org/docs/3.1.3/api/python/reference/api/pyspark.sql.functions.monotonically_increasing_id.html\" rel=\"nofollow noreferrer\"><code>monotonically_increasing_id()</code></a> inbuilt function for this case.</p>\n<pre><code>df.withColumn(&quot;mid&quot;,monotonically_increasing_id()))\n</code></pre>\n<hr />\n<p>If this mid doesn't give the expected results then use this <code>mid</code> column as <strong>orderby</strong> column to generate <code>row_number()</code> on the dataframe.</p>\n<pre><code>from pyspark.sql import *\nfrom pyspark.sql.functions import *\ndf1 = df1.withColumn(&quot;mid&quot;, monotonically_increasing_id())\nwindowSpec = W.orderBy(&quot;mid&quot;)\ndf1 = df1.withColumn(&quot;line_num&quot;, row_number().over(windowSpec)).show()\n</code></pre>\n"}],"owner":{"account_id":2542566,"reputation":141,"user_id":2208071,"display_name":"shashank93rao"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":70,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1682346176,"creation_date":1682344587,"question_id":76092684,"body_markdown":"I have an S3 bucket with multiple JSONL files. Every line within each file is a JSON string.\r\n\r\nCurrently, I read the files as follows:\r\n```\r\nDataset&lt;Row&gt; dataset = spark.read().option(&quot;recursiveFileLookup&quot;, &quot;true&quot;).json(path);\r\n```\r\n\r\nThis gives me a dataset with all the fields of the JSON objects. \r\n\r\nFor every row, I need its corresponding line number within the source file.\r\n\r\nEg:\r\n```\r\nFile1.jsonl:\r\n-------------\r\n{&quot;key1&quot;: &quot;a&quot;}\r\n{&quot;key1&quot;: &quot;b&quot;}\r\n{&quot;key1&quot;: &quot;c&quot;}\r\n\r\nFile2.jsonl:\r\n-------------\r\n{&quot;key1&quot;: &quot;x&quot;}\r\n{&quot;key1&quot;: &quot;y&quot;}\r\n{&quot;key1&quot;: &quot;z&quot;}\r\n```\r\n\r\nI need the dataset to be like:\r\n\r\nDataset\r\n\r\nkey1 | file_name | line_num |\r\n:--- | :-------: | :------: |\r\na    | file1     |     1    |\r\nb    | file1     |     2    |\r\nc    | file1     |     3    |\r\nx    | file2     |     1    |\r\ny    | file2     |     2    |\r\nz    | file2     |     3    |\r\n\r\nIs this possible?\r\n\r\n","title":"How to get the line number of each line across multiple files in Spark?","body":"<p>I have an S3 bucket with multiple JSONL files. Every line within each file is a JSON string.</p>\n<p>Currently, I read the files as follows:</p>\n<pre><code>Dataset&lt;Row&gt; dataset = spark.read().option(&quot;recursiveFileLookup&quot;, &quot;true&quot;).json(path);\n</code></pre>\n<p>This gives me a dataset with all the fields of the JSON objects.</p>\n<p>For every row, I need its corresponding line number within the source file.</p>\n<p>Eg:</p>\n<pre><code>File1.jsonl:\n-------------\n{&quot;key1&quot;: &quot;a&quot;}\n{&quot;key1&quot;: &quot;b&quot;}\n{&quot;key1&quot;: &quot;c&quot;}\n\nFile2.jsonl:\n-------------\n{&quot;key1&quot;: &quot;x&quot;}\n{&quot;key1&quot;: &quot;y&quot;}\n{&quot;key1&quot;: &quot;z&quot;}\n</code></pre>\n<p>I need the dataset to be like:</p>\n<p>Dataset</p>\n<div class=\"s-table-container\">\n<table class=\"s-table\">\n<thead>\n<tr>\n<th style=\"text-align: left;\">key1</th>\n<th style=\"text-align: center;\">file_name</th>\n<th style=\"text-align: center;\">line_num</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align: left;\">a</td>\n<td style=\"text-align: center;\">file1</td>\n<td style=\"text-align: center;\">1</td>\n</tr>\n<tr>\n<td style=\"text-align: left;\">b</td>\n<td style=\"text-align: center;\">file1</td>\n<td style=\"text-align: center;\">2</td>\n</tr>\n<tr>\n<td style=\"text-align: left;\">c</td>\n<td style=\"text-align: center;\">file1</td>\n<td style=\"text-align: center;\">3</td>\n</tr>\n<tr>\n<td style=\"text-align: left;\">x</td>\n<td style=\"text-align: center;\">file2</td>\n<td style=\"text-align: center;\">1</td>\n</tr>\n<tr>\n<td style=\"text-align: left;\">y</td>\n<td style=\"text-align: center;\">file2</td>\n<td style=\"text-align: center;\">2</td>\n</tr>\n<tr>\n<td style=\"text-align: left;\">z</td>\n<td style=\"text-align: center;\">file2</td>\n<td style=\"text-align: center;\">3</td>\n</tr>\n</tbody>\n</table>\n</div>\n<p>Is this possible?</p>\n"},{"tags":["java","bufferedimage"],"comments":[{"owner":{"account_id":3391382,"reputation":3687,"user_id":2846138,"display_name":"cyberbrain"},"score":0,"creation_date":1682369523,"post_id":76092879,"comment_id":134201591,"body_markdown":"You can try to use `BufferedImage.getRaster()` and / or `BufferedImage.getWritableRaster()` to get and set pixels on your images. For the writing to a file you should try to output the result of `ImageIO.getWriterFormatNames()` to find out if the desired format is supported for writing.","body":"You can try to use <code>BufferedImage.getRaster()</code> and / or <code>BufferedImage.getWritableRaster()</code> to get and set pixels on your images. For the writing to a file you should try to output the result of <code>ImageIO.getWriterFormatNames()</code> to find out if the desired format is supported for writing."}],"owner":{"account_id":25866436,"reputation":1,"user_id":19598027,"display_name":"Emilee2248"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":33,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1682345937,"creation_date":1682345937,"question_id":76092879,"body_markdown":"I am trying to encrypt/decrypt a b/w image based on the SP network algorithm. The problem is the following: after getting the values of each pixel and &quot;encrypting&quot; them, I can&#39;t create a new b/w image already. I tried using .setRGB(), but later realized that it was a bit more complicated than I imagined. I think we need to use the WritebleRaster class to do this more correctly, but firstly I don&#39;t understand how, and secondly, I&#39;m not sure if this is the right approach.\r\n\r\n```\r\n    public BufferedImage[] mainFunction(){\r\n        WritableRaster wr = originalImage.getRaster();\r\n        BufferedImage encodeDecodeImages[] = new BufferedImage[2];\r\n        encodeDecodeImages[0] = new BufferedImage(originalImage.getWidth(), originalImage.getHeight(), originalImage.getType());\r\n        encodeDecodeImages[1] = new BufferedImage(originalImage.getWidth(), originalImage.getHeight(), originalImage.getType());\r\n        initSequences();\r\n        // test();\r\n        int size;\r\n        int ch;\r\n        int first = 0;\r\n        int second = 0;\r\n        //test();\r\n\r\n        if (originalImage != null)\r\n        {\r\n            size = originalImage.getWidth();\r\n            for(int i = 0; i &lt; size; i++){\r\n                for (int j = 0; j &lt; size; j += 2)\r\n                {\r\n                    first = this.pixelMatrix[i][j];\r\n                    second = this.pixelMatrix[i][j + 1];\r\n                    ch = (first &lt;&lt; 8) + second;\r\n                    for (int r = 0; r &lt; rounds * 4; r += 4)\r\n                    {\r\n                        first = (ch &amp; 0x0000FF00) &gt;&gt; 8;\r\n                        first = split(first, r);\r\n                        second = ch &amp; 0x000000FF;\r\n                        second = split(second, r + 2);\r\n                        ch = (first &lt;&lt; 8) + second;\r\n                        ch = permute(ch, r / 4);\r\n                    }\r\n                    first = (ch &amp; 0x0000FF00) &gt;&gt; 8;\r\n                    second = ch &amp; 0x000000FF;\r\n                    this.pixelMatrixEncode[i][j] = first;\r\n                    this.pixelMatrixEncode[i][j + 1] = second;\r\n                    wr.setSample(i, j, 0, first);   \r\n                    encodeDecodeImages[0].setRGB(i, j, first);\r\n                    wr.setSample(i, j + 1, 0, second);\r\n                    encodeDecodeImages[0].setRGB(i, j + 1, second);\r\n                    int w = 0;\r\n                }\r\n                ColorModel cm = ColorModel.getRGBdefault();\r\n                BufferedImage image = new BufferedImage(cm, wr, cm.isAlphaPremultiplied(), null);\r\n                //encodeDecodeImages[0] = image;\r\n            }\r\n            for (int i = 0; i &lt; size; i++)\r\n            {\r\n                for(int j = 0; j &lt; size; j += 2){\r\n                    first = this.pixelMatrixEncode[i][j];\r\n                    second = this.pixelMatrixEncode[i][j + 1];\r\n\r\n                for (int r = (rounds * 4) - 1; r &gt;= 0; r -= 4)\r\n                {\r\n                    ch = (int)((first &lt;&lt; 8) + second);\r\n                    ch = permuteDecode(ch, r / 4);\r\n                    first = (int)((ch &amp; 0xff00) &gt;&gt; 8);\r\n                    first = splitDecode(first, r - 3);\r\n                    second = (int)(ch &amp; 0x00ff);\r\n                    second = splitDecode(second, r - 1);\r\n                }\r\n                this.pixelMatrixDecode[i][j] = first;\r\n                this.pixelMatrixDecode[i][j + 1] = second;\r\n                wr.setSample(i, j, 0, (int)first);\r\n                encodeDecodeImages[1].setRGB(i, j, first);\r\n                wr.setSample(i, j + 1, 0, (int)second);\r\n                encodeDecodeImages[1].setRGB(i, j + 1, second);\r\n                int w = 0;\r\n                }\r\n            }\r\n        }\r\n        return encodeDecodeImages;\r\n    }\r\n\r\n```\r\n\r\n\r\nActually, when I tried to build an image via setRGB(), the image was not built at all and I don&#39;t understand why\r\n```\r\ntry {\r\n            BufferedImage[] encodeDecodeImgs = model.mainFunction();\r\n            ImageIO.write(encodeDecodeImgs[0], &quot;bmp&quot;, new File(&quot;C:\\\\Users\\\\pbiar\\\\Desktop\\\\uchVsyakoe\\\\PASZI_JrOkata\\\\L3\\\\Source\\\\Encode.bmp&quot;));\r\n            ImageIO.write(encodeDecodeImgs[1], &quot;bmp&quot;, new File(&quot;C:\\\\Users\\\\pbiar\\\\Desktop\\\\uchVsyakoe\\\\PASZI_JrOkata\\\\L3\\\\Source\\\\Decode.bmp&quot;));\r\n            }\r\n            catch (IOException e) {\r\n            }\r\n```\r\n","title":"Pixel-by-pixel creation of a black-and-white image based on an existing data array storing a value from 0 to 255","body":"<p>I am trying to encrypt/decrypt a b/w image based on the SP network algorithm. The problem is the following: after getting the values of each pixel and &quot;encrypting&quot; them, I can't create a new b/w image already. I tried using .setRGB(), but later realized that it was a bit more complicated than I imagined. I think we need to use the WritebleRaster class to do this more correctly, but firstly I don't understand how, and secondly, I'm not sure if this is the right approach.</p>\n<pre><code>    public BufferedImage[] mainFunction(){\n        WritableRaster wr = originalImage.getRaster();\n        BufferedImage encodeDecodeImages[] = new BufferedImage[2];\n        encodeDecodeImages[0] = new BufferedImage(originalImage.getWidth(), originalImage.getHeight(), originalImage.getType());\n        encodeDecodeImages[1] = new BufferedImage(originalImage.getWidth(), originalImage.getHeight(), originalImage.getType());\n        initSequences();\n        // test();\n        int size;\n        int ch;\n        int first = 0;\n        int second = 0;\n        //test();\n\n        if (originalImage != null)\n        {\n            size = originalImage.getWidth();\n            for(int i = 0; i &lt; size; i++){\n                for (int j = 0; j &lt; size; j += 2)\n                {\n                    first = this.pixelMatrix[i][j];\n                    second = this.pixelMatrix[i][j + 1];\n                    ch = (first &lt;&lt; 8) + second;\n                    for (int r = 0; r &lt; rounds * 4; r += 4)\n                    {\n                        first = (ch &amp; 0x0000FF00) &gt;&gt; 8;\n                        first = split(first, r);\n                        second = ch &amp; 0x000000FF;\n                        second = split(second, r + 2);\n                        ch = (first &lt;&lt; 8) + second;\n                        ch = permute(ch, r / 4);\n                    }\n                    first = (ch &amp; 0x0000FF00) &gt;&gt; 8;\n                    second = ch &amp; 0x000000FF;\n                    this.pixelMatrixEncode[i][j] = first;\n                    this.pixelMatrixEncode[i][j + 1] = second;\n                    wr.setSample(i, j, 0, first);   \n                    encodeDecodeImages[0].setRGB(i, j, first);\n                    wr.setSample(i, j + 1, 0, second);\n                    encodeDecodeImages[0].setRGB(i, j + 1, second);\n                    int w = 0;\n                }\n                ColorModel cm = ColorModel.getRGBdefault();\n                BufferedImage image = new BufferedImage(cm, wr, cm.isAlphaPremultiplied(), null);\n                //encodeDecodeImages[0] = image;\n            }\n            for (int i = 0; i &lt; size; i++)\n            {\n                for(int j = 0; j &lt; size; j += 2){\n                    first = this.pixelMatrixEncode[i][j];\n                    second = this.pixelMatrixEncode[i][j + 1];\n\n                for (int r = (rounds * 4) - 1; r &gt;= 0; r -= 4)\n                {\n                    ch = (int)((first &lt;&lt; 8) + second);\n                    ch = permuteDecode(ch, r / 4);\n                    first = (int)((ch &amp; 0xff00) &gt;&gt; 8);\n                    first = splitDecode(first, r - 3);\n                    second = (int)(ch &amp; 0x00ff);\n                    second = splitDecode(second, r - 1);\n                }\n                this.pixelMatrixDecode[i][j] = first;\n                this.pixelMatrixDecode[i][j + 1] = second;\n                wr.setSample(i, j, 0, (int)first);\n                encodeDecodeImages[1].setRGB(i, j, first);\n                wr.setSample(i, j + 1, 0, (int)second);\n                encodeDecodeImages[1].setRGB(i, j + 1, second);\n                int w = 0;\n                }\n            }\n        }\n        return encodeDecodeImages;\n    }\n\n</code></pre>\n<p>Actually, when I tried to build an image via setRGB(), the image was not built at all and I don't understand why</p>\n<pre><code>try {\n            BufferedImage[] encodeDecodeImgs = model.mainFunction();\n            ImageIO.write(encodeDecodeImgs[0], &quot;bmp&quot;, new File(&quot;C:\\\\Users\\\\pbiar\\\\Desktop\\\\uchVsyakoe\\\\PASZI_JrOkata\\\\L3\\\\Source\\\\Encode.bmp&quot;));\n            ImageIO.write(encodeDecodeImgs[1], &quot;bmp&quot;, new File(&quot;C:\\\\Users\\\\pbiar\\\\Desktop\\\\uchVsyakoe\\\\PASZI_JrOkata\\\\L3\\\\Source\\\\Decode.bmp&quot;));\n            }\n            catch (IOException e) {\n            }\n</code></pre>\n"},{"tags":["java","ios","selenium-webdriver","appium"],"owner":{"account_id":28400579,"reputation":1,"user_id":21725453,"display_name":"bonjoves"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":66,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1682345900,"creation_date":1682340847,"question_id":76092127,"body_markdown":"I am running test automation on an application on an iOS device, but when the user is logged in to the application, no elements can be found - but only on the home screen. I have tried finding elements in Appium inspector as well with no success.\r\n\r\nWhen I do a getPageSource() on the aforementioned page I get this weird page source:\r\n```java\r\nvar DeviceUserAgentBridge = { \r\n      getDeviceUserAgent: function getDeviceUserAgent() { \r\n      var deviceUserAgent = navigator.userAgent; \r\n      if (!deviceUserAgent || deviceUserAgent.length == 0) { \r\n          return null; \r\n      } \r\n      var userAgentInfo = { \r\n          &quot;nol_useragent&quot;: deviceUserAgent \r\n      }; \r\n      return JSON.stringify(userAgentInfo) \r\n  } \r\n};\r\n```\r\n \r\n\r\n\r\nI only use the most basic capabilities:\r\n\r\n```json\r\n{ \r\n  &quot;platformName&quot;: &quot;iOS&quot;,\r\n  &quot;appium:platformVersion&quot;: &quot;15.0&quot;,\r\n  &quot;appium:automationName&quot;: &quot;XCUITest&quot;,\r\n  &quot;appium:app&quot;: &quot;theapp.app&quot;,\r\n  &quot;appium:deviceName&quot;: &quot;iPhone SE (2nd generation)&quot;,\r\n  &quot;appium:udid&quot;: &quot;theudid&quot;\r\n}\r\n```\r\n\r\nOn every other page there can be elements found, it seems that only this page is having this &quot;block&quot;.\r\n\r\nI&#39;ve tried many different capabilities and versions but always the same result.","title":"Cannot find elements on home screen of iOS application","body":"<p>I am running test automation on an application on an iOS device, but when the user is logged in to the application, no elements can be found - but only on the home screen. I have tried finding elements in Appium inspector as well with no success.</p>\n<p>When I do a getPageSource() on the aforementioned page I get this weird page source:</p>\n<pre class=\"lang-java prettyprint-override\"><code>var DeviceUserAgentBridge = { \n      getDeviceUserAgent: function getDeviceUserAgent() { \n      var deviceUserAgent = navigator.userAgent; \n      if (!deviceUserAgent || deviceUserAgent.length == 0) { \n          return null; \n      } \n      var userAgentInfo = { \n          &quot;nol_useragent&quot;: deviceUserAgent \n      }; \n      return JSON.stringify(userAgentInfo) \n  } \n};\n</code></pre>\n<p>I only use the most basic capabilities:</p>\n<pre class=\"lang-json prettyprint-override\"><code>{ \n  &quot;platformName&quot;: &quot;iOS&quot;,\n  &quot;appium:platformVersion&quot;: &quot;15.0&quot;,\n  &quot;appium:automationName&quot;: &quot;XCUITest&quot;,\n  &quot;appium:app&quot;: &quot;theapp.app&quot;,\n  &quot;appium:deviceName&quot;: &quot;iPhone SE (2nd generation)&quot;,\n  &quot;appium:udid&quot;: &quot;theudid&quot;\n}\n</code></pre>\n<p>On every other page there can be elements found, it seems that only this page is having this &quot;block&quot;.</p>\n<p>I've tried many different capabilities and versions but always the same result.</p>\n"},{"tags":["java","mocking","spring-webflux","clock","spring-test"],"owner":{"account_id":8796190,"reputation":457,"user_id":6574013,"accept_rate":83,"display_name":"marie"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":436,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1682345766,"creation_date":1682340787,"question_id":76092117,"body_markdown":"I am writing tests for a java spring boot rest application. I need to mock the clock.\r\nThis is the test :\r\n\r\n```\r\n@ExtendWith(SpringExtension.class)\r\n@WebFluxTest(controllers = MyController.class)\r\n@Import({MyController.class})\r\npublic class Test implements WebTestClientConfigurable {\r\n\r\n  \r\n    @Autowired\r\n    private MyController myController;\r\n    @Autowired\r\n    private WebTestClient webTestClient;\r\n\r\n    public static long NOW = System.currentTimeMillis();\r\n\r\n\r\n    public MockedStatic&lt;Clock&gt; clockMock;\r\n\r\n    @BeforeEach\r\n    public void setup() {\r\n        mockInstant(NOW);\r\n    }\r\n\r\n\r\n    @AfterEach\r\n    public void close() {\r\n        clockMock.close();\r\n    }\r\n\r\n    private void mockInstant(long expected) {\r\n        Clock spyClock = spy(Clock.class);\r\n        clockMock = mockStatic(Clock.class);\r\n        clockMock.when(Clock::systemUTC).thenReturn(spyClock);\r\n        when(spyClock.instant()).thenReturn(Instant.ofEpochSecond(expected));\r\n    }\r\n\r\n    @org.junit.jupiter.api.Test\r\n    void test() {\r\n        configure(webTestClient)\r\n                .post()\r\n                .uri(&quot;/test&quot; )\r\n                .exchange()\r\n                .expectStatus()\r\n                .is2xxSuccessful();\r\n\r\n    }\r\n}\r\n```\r\n\r\nThe test is failing because of clock mocking. \r\nI have other tests with the mocking clock that do not use webtestclient and don&#39;t fail.\r\nThe WebTestClient is : \r\n\r\n```\r\npublic interface WebTestClientConfigurable {\r\n    default WebTestClient configure(WebTestClient webTestClient) {\r\n        return webTestClient\r\n                .mutate().responseTimeout(Duration.ofSeconds(120))\r\n                .build()  // this is where the test is failing\r\n                .mutateWith(mockJwt()\r\n                        .authorities(new SecurityConfiguration.GrantedAuthoritiesExtractor())\r\n                        .jwt(builder -&gt; builder.claim(&quot;myvalue&quot;, 1)))\r\n                .mutateWith(csrf());\r\n    }\r\n}\r\n```\r\n\r\nThe test is failing with this error:\r\n\r\n```\r\njava.lang.NullPointerException: Cannot invoke &quot;java.time.Clock.instant()&quot; because &quot;this.this$0.clock&quot; is null\r\n\r\n\tat org.springframework.web.server.session.InMemoryWebSessionStore$ExpiredSessionChecker.&lt;init&gt;(InMemoryWebSessionStore.java:316)\r\n\tat org.springframework.web.server.session.InMemoryWebSessionStore.&lt;init&gt;(InMemoryWebSessionStore.java:57)\r\n\tat org.springframework.web.server.session.DefaultWebSessionManager.&lt;init&gt;(DefaultWebSessionManager.java:46)\r\n\tat org.springframework.web.server.adapter.HttpWebHandlerAdapter.&lt;init&gt;(HttpWebHandlerAdapter.java:84)\r\n\tat org.springframework.web.server.adapter.WebHttpHandlerBuilder.build(WebHttpHandlerBuilder.java:394)\r\n\tat org.springframework.test.web.reactive.server.DefaultWebTestClientBuilder.build(DefaultWebTestClientBuilder.java:285)\r\n\tat test.WebTestClientConfigurable.configure(WebTestClientConfigurable.java:15)\r\n```\r\n\r\nI have no idea how to fix this. If I don&#39;t mock the clock, I don&#39;t have the issue.","title":"Cannot invoke &quot;java.time.Clock.instant()&quot; because &quot;this.this$0.clock&quot; is null","body":"<p>I am writing tests for a java spring boot rest application. I need to mock the clock.\nThis is the test :</p>\n<pre><code>@ExtendWith(SpringExtension.class)\n@WebFluxTest(controllers = MyController.class)\n@Import({MyController.class})\npublic class Test implements WebTestClientConfigurable {\n\n  \n    @Autowired\n    private MyController myController;\n    @Autowired\n    private WebTestClient webTestClient;\n\n    public static long NOW = System.currentTimeMillis();\n\n\n    public MockedStatic&lt;Clock&gt; clockMock;\n\n    @BeforeEach\n    public void setup() {\n        mockInstant(NOW);\n    }\n\n\n    @AfterEach\n    public void close() {\n        clockMock.close();\n    }\n\n    private void mockInstant(long expected) {\n        Clock spyClock = spy(Clock.class);\n        clockMock = mockStatic(Clock.class);\n        clockMock.when(Clock::systemUTC).thenReturn(spyClock);\n        when(spyClock.instant()).thenReturn(Instant.ofEpochSecond(expected));\n    }\n\n    @org.junit.jupiter.api.Test\n    void test() {\n        configure(webTestClient)\n                .post()\n                .uri(&quot;/test&quot; )\n                .exchange()\n                .expectStatus()\n                .is2xxSuccessful();\n\n    }\n}\n</code></pre>\n<p>The test is failing because of clock mocking.\nI have other tests with the mocking clock that do not use webtestclient and don't fail.\nThe WebTestClient is :</p>\n<pre><code>public interface WebTestClientConfigurable {\n    default WebTestClient configure(WebTestClient webTestClient) {\n        return webTestClient\n                .mutate().responseTimeout(Duration.ofSeconds(120))\n                .build()  // this is where the test is failing\n                .mutateWith(mockJwt()\n                        .authorities(new SecurityConfiguration.GrantedAuthoritiesExtractor())\n                        .jwt(builder -&gt; builder.claim(&quot;myvalue&quot;, 1)))\n                .mutateWith(csrf());\n    }\n}\n</code></pre>\n<p>The test is failing with this error:</p>\n<pre><code>java.lang.NullPointerException: Cannot invoke &quot;java.time.Clock.instant()&quot; because &quot;this.this$0.clock&quot; is null\n\n    at org.springframework.web.server.session.InMemoryWebSessionStore$ExpiredSessionChecker.&lt;init&gt;(InMemoryWebSessionStore.java:316)\n    at org.springframework.web.server.session.InMemoryWebSessionStore.&lt;init&gt;(InMemoryWebSessionStore.java:57)\n    at org.springframework.web.server.session.DefaultWebSessionManager.&lt;init&gt;(DefaultWebSessionManager.java:46)\n    at org.springframework.web.server.adapter.HttpWebHandlerAdapter.&lt;init&gt;(HttpWebHandlerAdapter.java:84)\n    at org.springframework.web.server.adapter.WebHttpHandlerBuilder.build(WebHttpHandlerBuilder.java:394)\n    at org.springframework.test.web.reactive.server.DefaultWebTestClientBuilder.build(DefaultWebTestClientBuilder.java:285)\n    at test.WebTestClientConfigurable.configure(WebTestClientConfigurable.java:15)\n</code></pre>\n<p>I have no idea how to fix this. If I don't mock the clock, I don't have the issue.</p>\n"},{"tags":["java","windows-7","taskbar","shortcut","createprocess"],"comments":[{"owner":{"account_id":51633,"reputation":37763,"user_id":154306,"accept_rate":98,"display_name":"Paul Lammertsma"},"score":0,"creation_date":1259758925,"post_id":1254430,"comment_id":1724710,"body_markdown":"Have you gotten any further in resolving this issue? I am facing precisely the same problem.","body":"Have you gotten any further in resolving this issue? I am facing precisely the same problem."},{"owner":{"display_name":"user153677"},"score":0,"creation_date":1260360895,"post_id":1254430,"comment_id":1771710,"body_markdown":"Unfortunately: No - I wish I had\nIf I find a solution I will post it here.","body":"Unfortunately: No - I wish I had If I find a solution I will post it here."}],"answers":[{"tags":[],"owner":{"account_id":31498,"reputation":12813,"user_id":86515,"accept_rate":100,"display_name":"KitsuneYMG"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1249906398,"creation_date":1249906398,"answer_id":1254532,"question_id":1254430,"body_markdown":"Use something like winrun4j or create a .bat instead of using a shortcut.","title":"&quot;Wrong&quot; app gets pinned to taskbar (Windows 7)","body":"<p>Use something like winrun4j or create a .bat instead of using a shortcut.</p>\n"},{"tags":[],"owner":{"account_id":4484573,"reputation":1,"user_id":3647668,"display_name":"Kid"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1400334439,"creation_date":1400332423,"answer_id":23711759,"question_id":1254430,"body_markdown":"You could clean your `IconCache` like this:\r\n\r\nFirst go to Task Manager and kill `explorer.exe`\r\n\r\n`Windows Task Management -&gt; Processes -&gt; End &quot;explorer.exe&quot;`\r\n\r\nThen, in the Task Management\r\n\r\n`Windows Task Management -&gt; File -&gt; New -&gt; CMD.EXE`\r\n\r\nIn the opened console type:\r\n\r\n`CD /d %userprofile%\\AppData\\Local DEL IconCache.db /a EXIT` \r\n\r\nThen reopen the `explorer.exe`\r\n\r\n`Windows Task Management -&gt; File -&gt; New -&gt; explorer.exe`","title":"&quot;Wrong&quot; app gets pinned to taskbar (Windows 7)","body":"<p>You could clean your <code>IconCache</code> like this:</p>\n\n<p>First go to Task Manager and kill <code>explorer.exe</code></p>\n\n<p><code>Windows Task Management -&gt; Processes -&gt; End \"explorer.exe\"</code></p>\n\n<p>Then, in the Task Management</p>\n\n<p><code>Windows Task Management -&gt; File -&gt; New -&gt; CMD.EXE</code></p>\n\n<p>In the opened console type:</p>\n\n<p><code>CD /d %userprofile%\\AppData\\Local DEL IconCache.db /a EXIT</code> </p>\n\n<p>Then reopen the <code>explorer.exe</code></p>\n\n<p><code>Windows Task Management -&gt; File -&gt; New -&gt; explorer.exe</code></p>\n"},{"tags":[],"owner":{"account_id":4995370,"reputation":98,"user_id":4016483,"display_name":"lion"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1682345482,"creation_date":1682333537,"answer_id":76091149,"question_id":1254430,"body_markdown":"You can pin a shortcut directly, not necessarily a window that is open on taskbar: right click on the shortcut, Pin to taskbar. The java window that will open won&#39;t use the button you pinned on the taskbar, since it&#39;s a different application, but that was not the issue, I understand.","title":"&quot;Wrong&quot; app gets pinned to taskbar (Windows 7)","body":"<p>You can pin a shortcut directly, not necessarily a window that is open on taskbar: right click on the shortcut, Pin to taskbar. The java window that will open won't use the button you pinned on the taskbar, since it's a different application, but that was not the issue, I understand.</p>\n"}],"owner":{"display_name":"user153677"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1045,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":3,"score":3,"last_activity_date":1682345482,"creation_date":1249904587,"question_id":1254430,"body_markdown":"I have an application that gets started via a shortcut. This application than starts a Java GUI application with CreateProcess().\r\n\r\nWhen the Java application gets pinned to the taskbar the javaw.exe gets pinned to the taskbar instead of the &quot;expected&quot; shortcut. Only the native executable which launches Java can be modified - the shortcut has to stay.\r\n\r\nWhat has to be done so that the shortcut gets pinned?\r\n\r\n\r\n","title":"&quot;Wrong&quot; app gets pinned to taskbar (Windows 7)","body":"<p>I have an application that gets started via a shortcut. This application than starts a Java GUI application with CreateProcess().</p>\n<p>When the Java application gets pinned to the taskbar the javaw.exe gets pinned to the taskbar instead of the &quot;expected&quot; shortcut. Only the native executable which launches Java can be modified - the shortcut has to stay.</p>\n<p>What has to be done so that the shortcut gets pinned?</p>\n"},{"tags":["java","http","httpurlconnection"],"comments":[{"owner":{"account_id":23497728,"reputation":322,"user_id":17547957,"display_name":"SupaMaggie70 b"},"score":0,"creation_date":1682342663,"post_id":76092033,"comment_id":134195274,"body_markdown":"From https://docs.oracle.com/javase/7/docs/api/java/net/URL.html#openConnection(), it looks like you have to call the .connect() function before sending any data. You may also want to call .disconnect() at the end.","body":"From <a href=\"https://docs.oracle.com/javase/7/docs/api/java/net/URL.html#openConnection()\" rel=\"nofollow noreferrer\">docs.oracle.com/javase/7/docs/api/java/net/&hellip;</a>, it looks like you have to call the .connect() function before sending any data. You may also want to call .disconnect() at the end."},{"owner":{"account_id":23497728,"reputation":322,"user_id":17547957,"display_name":"SupaMaggie70 b"},"score":1,"creation_date":1682342823,"post_id":76092033,"comment_id":134195322,"body_markdown":"You should also log the error instead of just catching it. I believe that would be e.printStackTrace().","body":"You should also log the error instead of just catching it. I believe that would be e.printStackTrace()."},{"owner":{"account_id":81495,"reputation":3962,"user_id":229743,"display_name":"Taylor"},"score":2,"creation_date":1682345097,"post_id":76092033,"comment_id":134195962,"body_markdown":"The code you&#39;ve posted is missing `flush` and `close`, but you mention you tried those.  I assume you tried them BEFORE calling `getResponseCode` as this is important.  The only other thing that could be happening is an exception, as @SupaMaggie70b advised, so logging any exception in this code would be helpful.","body":"The code you&#39;ve posted is missing <code>flush</code> and <code>close</code>, but you mention you tried those.  I assume you tried them BEFORE calling <code>getResponseCode</code> as this is important.  The only other thing that could be happening is an exception, as @SupaMaggie70b advised, so logging any exception in this code would be helpful."}],"owner":{"account_id":4148682,"reputation":487,"user_id":3401736,"display_name":"Captain&#39;Flam"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":32,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":0,"score":2,"last_activity_date":1682345433,"creation_date":1682340296,"question_id":76092033,"body_markdown":"I wrote a minimal method to post some binary data over HTTP but the data is not actually sent every time.  \r\nI saw many other questions that looks like this one, but none solved my problem.\r\nHere is my java method\r\n```java\r\n    public static int http_post ( String server , byte [] data )\r\n        {\r\n        HttpURLConnection urlConnection = null ;\r\n        try {\r\n            URL url = new URL( server ) ;\r\n            urlConnection = (HttpURLConnection)url.openConnection() ;\r\n            urlConnection.setRequestMethod(&quot;POST&quot;) ;\r\n            urlConnection.setDoOutput( true ) ;\r\n            urlConnection.getOutputStream().write( data ) ;\r\n            return urlConnection.getResponseCode() ;\r\n            }\r\n        catch ( Exception e )\r\n            {\r\n            return -1 ;            \r\n            }\r\n        finally \r\n            {\r\n            urlConnection.disconnect() ;\r\n            }\r\n        }        \r\n```\r\nOn the client side, it works well: the returned code is always 200. (that&#39;s why I don&#39;t treat the exception in this simple code).  \r\n\r\nBut when I look at the server side, I see that the data is some time well received, and some time not.   \r\nIt&#39;s completely random : when I re-run, what is received or not is different.  \r\nWhen the data is not received, the received request contains a correct &quot;Content-Length&quot; but the body is simply not there (nor the double *EOL*).\r\nI got the same behavior on several servers : my own one (that hosts my web pages), a very small and local one I wrote in python and *https://httpbin.org/anything*.\r\n\r\nI tried many variant (with *flush*+*close* on the output stream, playing with timeouts, *useCache* or not, calling *connect()* before to send, with a *sleep* before *getResponseCode*...)  \r\nI can&#39;t figure out what is wrong in my code, especially since it&#39;s random.\r\n","title":"My data is randomly sent, using java http connection","body":"<p>I wrote a minimal method to post some binary data over HTTP but the data is not actually sent every time.<br />\nI saw many other questions that looks like this one, but none solved my problem.\nHere is my java method</p>\n<pre class=\"lang-java prettyprint-override\"><code>    public static int http_post ( String server , byte [] data )\n        {\n        HttpURLConnection urlConnection = null ;\n        try {\n            URL url = new URL( server ) ;\n            urlConnection = (HttpURLConnection)url.openConnection() ;\n            urlConnection.setRequestMethod(&quot;POST&quot;) ;\n            urlConnection.setDoOutput( true ) ;\n            urlConnection.getOutputStream().write( data ) ;\n            return urlConnection.getResponseCode() ;\n            }\n        catch ( Exception e )\n            {\n            return -1 ;            \n            }\n        finally \n            {\n            urlConnection.disconnect() ;\n            }\n        }        \n</code></pre>\n<p>On the client side, it works well: the returned code is always 200. (that's why I don't treat the exception in this simple code).</p>\n<p>But when I look at the server side, I see that the data is some time well received, and some time not.<br />\nIt's completely random : when I re-run, what is received or not is different.<br />\nWhen the data is not received, the received request contains a correct &quot;Content-Length&quot; but the body is simply not there (nor the double <em>EOL</em>).\nI got the same behavior on several servers : my own one (that hosts my web pages), a very small and local one I wrote in python and <em><a href=\"https://httpbin.org/anything\" rel=\"nofollow noreferrer\">https://httpbin.org/anything</a></em>.</p>\n<p>I tried many variant (with <em>flush</em>+<em>close</em> on the output stream, playing with timeouts, <em>useCache</em> or not, calling <em>connect()</em> before to send, with a <em>sleep</em> before <em>getResponseCode</em>...)<br />\nI can't figure out what is wrong in my code, especially since it's random.</p>\n"},{"tags":["java","css","javafx","dark-theme"],"comments":[{"owner":{"account_id":70123,"reputation":51175,"user_id":203657,"accept_rate":53,"display_name":"kleopatra"},"score":1,"creation_date":1682340937,"post_id":76092063,"comment_id":134194838,"body_markdown":"[mcve] please ..","body":"<a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> please .."},{"owner":{"account_id":2518243,"reputation":203472,"user_id":2189127,"display_name":"James_D"},"score":1,"creation_date":1682341036,"post_id":76092063,"comment_id":134194860,"body_markdown":"*&quot;the lines in code ... Should have reverted the Scene and Stage to the original JavaFx theme&quot;*. Why? You added the `darktheme.css` stylesheet to the `VBox`, not to the `Scene`.","body":"<i>&quot;the lines in code ... Should have reverted the Scene and Stage to the original JavaFx theme&quot;</i>. Why? You added the <code>darktheme.css</code> stylesheet to the <code>VBox</code>, not to the <code>Scene</code>."},{"owner":{"account_id":4431471,"reputation":149,"user_id":3608549,"display_name":"Jack"},"score":0,"creation_date":1682341960,"post_id":76092063,"comment_id":134195095,"body_markdown":"@James_D How do I set the stylesheet to the Scene? I have set the Stylesheet to Root node. I thought that was the highest thing I could set the style to. A good suggestion though. I will try to tinker with it a bit. Thank you.","body":"@James_D How do I set the stylesheet to the Scene? I have set the Stylesheet to Root node. I thought that was the highest thing I could set the style to. A good suggestion though. I will try to tinker with it a bit. Thank you."},{"owner":{"account_id":4431471,"reputation":149,"user_id":3608549,"display_name":"Jack"},"score":0,"creation_date":1682342024,"post_id":76092063,"comment_id":134195111,"body_markdown":"@kleopatra Ok. Thanks. I have just created a new project and added a few of those lines. I will try to rewrite the question. Now I have already messed everything up again but I can start anew and focus just on my things.","body":"@kleopatra Ok. Thanks. I have just created a new project and added a few of those lines. I will try to rewrite the question. Now I have already messed everything up again but I can start anew and focus just on my things."},{"owner":{"account_id":4431471,"reputation":149,"user_id":3608549,"display_name":"Jack"},"score":0,"creation_date":1682342121,"post_id":76092063,"comment_id":134195140,"body_markdown":"@James_D Thank you!! :) adding: \n\nscene.getRoot().getStylesheets().clear();\n\ndid the trick :)","body":"@James_D Thank you!! :) adding:   scene.getRoot().getStylesheets().clear();  did the trick :)"}],"answers":[{"tags":[],"owner":{"account_id":4431471,"reputation":149,"user_id":3608549,"display_name":"Jack"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1682345365,"creation_date":1682343493,"answer_id":76092511,"question_id":76092063,"body_markdown":"The answer was the commented code in the question. Which I added alter after @James_D pointed to me that changing sth. to the scene does not trickle down to root and lower. \r\n\r\nAfter adding: \r\n\r\n\tscene.getRoot().getStylesheets().clear();\r\n\r\nMy code worked in the way as I have hoped it would work. I thought that by removing stylesheets from the (Scene) scene everything would get deleted but it did not. Thank you all for your help. \r\n","title":"Reverting .CSS style in JavaFX that was set in .FXML file","body":"<p>The answer was the commented code in the question. Which I added alter after @James_D pointed to me that changing sth. to the scene does not trickle down to root and lower.</p>\n<p>After adding:</p>\n<pre><code>scene.getRoot().getStylesheets().clear();\n</code></pre>\n<p>My code worked in the way as I have hoped it would work. I thought that by removing stylesheets from the (Scene) scene everything would get deleted but it did not. Thank you all for your help.</p>\n"}],"owner":{"account_id":4431471,"reputation":149,"user_id":3608549,"display_name":"Jack"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":69,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1682345365,"creation_date":1682340437,"question_id":76092063,"body_markdown":"I have created a new JavaFx project in IntelliJ and the main JavaFx Application is:\r\n\r\nHelloApplication.java\r\n\r\n    package com.example.demo1;\r\n    \r\n    import javafx.application.Application;\r\n    import javafx.fxml.FXMLLoader;\r\n    import javafx.scene.Scene;\r\n    import javafx.stage.Stage;\r\n    \r\n    import java.io.IOException;\r\n    \r\n    public class HelloApplication extends Application {\r\n    \t@Override public void start(Stage stage) throws IOException {\r\n    \t\tFXMLLoader fxmlLoader = new FXMLLoader(HelloApplication.class.getResource(&quot;hello-view.fxml&quot;));\r\n    \t\tScene scene = new Scene(fxmlLoader.load(), 320, 240);\r\n    \t\t\r\n    \t\tscene.getStylesheets().clear();\r\n    \t\tscene.getStylesheets().addAll();\r\n    \t\t\r\n    \t\t// SOLVED: this was the solution. This came here after I have posted the question\r\n    \t\t//\t\tscene.getRoot().getStylesheets().clear();\r\n  \t\t    \t\t\r\n    \t\tstage.setTitle(&quot;Hello!&quot;);\r\n    \t\tstage.setScene(scene);\r\n    \t\tstage.show();\r\n    \t}\r\n    \t\r\n    \tpublic static void main(String[] args) {\r\n    \t\tlaunch();\r\n    \t}\r\n    }\r\n\r\n\r\nHelloController.java\r\n\r\n    package com.example.demo1;\r\n    \r\n    import javafx.fxml.FXML;\r\n    import javafx.scene.control.Label;\r\n    \r\n    public class HelloController {\r\n    \t@FXML private Label welcomeText;\r\n    \t\r\n    \t@FXML protected void onHelloButtonClick() {\r\n    \t\twelcomeText.setText(&quot;Welcome to JavaFX Application!&quot;);\r\n    \t}\r\n    }\r\n\r\nhello-view.fxml\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    \r\n    &lt;?import javafx.geometry.Insets?&gt;\r\n    &lt;?import javafx.scene.control.Label?&gt;\r\n    &lt;?import javafx.scene.layout.VBox?&gt;\r\n    \r\n    &lt;?import javafx.scene.control.Button?&gt;\r\n    &lt;VBox alignment=&quot;CENTER&quot; spacing=&quot;20.0&quot; xmlns:fx=&quot;http://javafx.com/fxml&quot; stylesheets=&quot;@darktheme.css&quot;\r\n          fx:controller=&quot;com.example.demo1.HelloController&quot;&gt;\r\n        &lt;padding&gt;\r\n            &lt;Insets bottom=&quot;20.0&quot; left=&quot;20.0&quot; right=&quot;20.0&quot; top=&quot;20.0&quot;/&gt;\r\n        &lt;/padding&gt;\r\n    \r\n        &lt;Label fx:id=&quot;welcomeText&quot;/&gt;\r\n        &lt;Button text=&quot;Hello!&quot; onAction=&quot;#onHelloButtonClick&quot;/&gt;\r\n    &lt;/VBox&gt;\r\n\r\ndarktheme.css\r\n\r\n    .root {\r\n        -fx-accent: #1e74c6;\r\n        -fx-focus-color: -fx-accent;\r\n        -fx-base: #373e43;\r\n        -fx-control-inner-background: derive(-fx-base, 35%);\r\n        -fx-control-inner-background-alt: -fx-control-inner-background ;\r\n    }\r\n\r\nWhere I have set the style with: \r\n\r\n    stylesheets=&quot;@darktheme.css&quot;\r\n\r\nAnd I am trying to create a toggle with the CheckBox. The .CSS works. I have everything dark. However if I understood everything correctly, the lines in code: \r\n\r\n    scene.getStylesheets().clear(); // Clear any stylesheets that were added to the scene\r\n    scene.getStylesheets().addAll(); // Add an empty list of stylesheets to reset to the default style\r\n\r\nShould have reverted the Scene and Stage to the original JavaFx theme. However when I run the code, everything is dark. Could anyone explain this to me? ","title":"Reverting .CSS style in JavaFX that was set in .FXML file","body":"<p>I have created a new JavaFx project in IntelliJ and the main JavaFx Application is:</p>\n<p>HelloApplication.java</p>\n<pre><code>package com.example.demo1;\n\nimport javafx.application.Application;\nimport javafx.fxml.FXMLLoader;\nimport javafx.scene.Scene;\nimport javafx.stage.Stage;\n\nimport java.io.IOException;\n\npublic class HelloApplication extends Application {\n    @Override public void start(Stage stage) throws IOException {\n        FXMLLoader fxmlLoader = new FXMLLoader(HelloApplication.class.getResource(&quot;hello-view.fxml&quot;));\n        Scene scene = new Scene(fxmlLoader.load(), 320, 240);\n        \n        scene.getStylesheets().clear();\n        scene.getStylesheets().addAll();\n        \n        // SOLVED: this was the solution. This came here after I have posted the question\n        //      scene.getRoot().getStylesheets().clear();\n                \n        stage.setTitle(&quot;Hello!&quot;);\n        stage.setScene(scene);\n        stage.show();\n    }\n    \n    public static void main(String[] args) {\n        launch();\n    }\n}\n</code></pre>\n<p>HelloController.java</p>\n<pre><code>package com.example.demo1;\n\nimport javafx.fxml.FXML;\nimport javafx.scene.control.Label;\n\npublic class HelloController {\n    @FXML private Label welcomeText;\n    \n    @FXML protected void onHelloButtonClick() {\n        welcomeText.setText(&quot;Welcome to JavaFX Application!&quot;);\n    }\n}\n</code></pre>\n<p>hello-view.fxml</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n\n&lt;?import javafx.geometry.Insets?&gt;\n&lt;?import javafx.scene.control.Label?&gt;\n&lt;?import javafx.scene.layout.VBox?&gt;\n\n&lt;?import javafx.scene.control.Button?&gt;\n&lt;VBox alignment=&quot;CENTER&quot; spacing=&quot;20.0&quot; xmlns:fx=&quot;http://javafx.com/fxml&quot; stylesheets=&quot;@darktheme.css&quot;\n      fx:controller=&quot;com.example.demo1.HelloController&quot;&gt;\n    &lt;padding&gt;\n        &lt;Insets bottom=&quot;20.0&quot; left=&quot;20.0&quot; right=&quot;20.0&quot; top=&quot;20.0&quot;/&gt;\n    &lt;/padding&gt;\n\n    &lt;Label fx:id=&quot;welcomeText&quot;/&gt;\n    &lt;Button text=&quot;Hello!&quot; onAction=&quot;#onHelloButtonClick&quot;/&gt;\n&lt;/VBox&gt;\n</code></pre>\n<p>darktheme.css</p>\n<pre><code>.root {\n    -fx-accent: #1e74c6;\n    -fx-focus-color: -fx-accent;\n    -fx-base: #373e43;\n    -fx-control-inner-background: derive(-fx-base, 35%);\n    -fx-control-inner-background-alt: -fx-control-inner-background ;\n}\n</code></pre>\n<p>Where I have set the style with:</p>\n<pre><code>stylesheets=&quot;@darktheme.css&quot;\n</code></pre>\n<p>And I am trying to create a toggle with the CheckBox. The .CSS works. I have everything dark. However if I understood everything correctly, the lines in code:</p>\n<pre><code>scene.getStylesheets().clear(); // Clear any stylesheets that were added to the scene\nscene.getStylesheets().addAll(); // Add an empty list of stylesheets to reset to the default style\n</code></pre>\n<p>Should have reverted the Scene and Stage to the original JavaFx theme. However when I run the code, everything is dark. Could anyone explain this to me?</p>\n"},{"tags":["java","hadoop"],"answers":[{"tags":[],"owner":{"account_id":2671330,"reputation":183376,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1682081586,"creation_date":1682081258,"answer_id":76073321,"question_id":76069967,"body_markdown":"1. Hadoop documentation doesn&#39;t suggest running it with anything higher than Java 11, so install that, and reset JAVA_HOME \r\n2. Hadoop on Windows does not want spaces in any file paths. Meaning your `JAVA_HOME`  including `Program Files` is a problem. Refer https://stackoverflow.com/questions/892555/how-do-i-specify-c-program-files-without-a-space-in-it-for-programs-that-cant\r\n3. You&#39;ll additionally need `hadoop.dll` placed in `C:\\System32` and `winutils.exe` placed in `%HADOOP_HOME%\\bin` that have been compiled for Hadoop 3.3.5 after fixing the Java issue. Both of these are separate downloads and not included with Hadoop. Otherwise, you should use WSL2 terminal to run any of these commands since Hadoop prefers to run in a Linux environment ","title":"Hadoop commands say JAVA_HOME is incorrectly set","body":"<ol>\n<li>Hadoop documentation doesn't suggest running it with anything higher than Java 11, so install that, and reset JAVA_HOME</li>\n<li>Hadoop on Windows does not want spaces in any file paths. Meaning your <code>JAVA_HOME</code>  including <code>Program Files</code> is a problem. Refer <a href=\"https://stackoverflow.com/questions/892555/how-do-i-specify-c-program-files-without-a-space-in-it-for-programs-that-cant\">How do I specify C:\\Program Files without a space in it for programs that can&#39;t handle spaces in file paths?</a></li>\n<li>You'll additionally need <code>hadoop.dll</code> placed in <code>C:\\System32</code> and <code>winutils.exe</code> placed in <code>%HADOOP_HOME%\\bin</code> that have been compiled for Hadoop 3.3.5 after fixing the Java issue. Both of these are separate downloads and not included with Hadoop. Otherwise, you should use WSL2 terminal to run any of these commands since Hadoop prefers to run in a Linux environment</li>\n</ol>\n"}],"owner":{"account_id":7398788,"reputation":33,"user_id":5629877,"display_name":"geeksam"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":58,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1682345223,"creation_date":1682052409,"question_id":76069967,"body_markdown":"I&#39;m getting the following error while I give Hadoop commands (pls refer pic) [![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/QzStK.png\r\n\r\nSomeone tell me how to fix it.\r\n\r\n**Note**: \r\n**Java Home local location:** &quot;C:\\Program Files\\Java\\jdk-20\\&quot;\r\n**Hadoop Home location:** &quot;D:\\Hadoop\\hadoop-3.3.5&quot;","title":"Hadoop commands say JAVA_HOME is incorrectly set","body":"<p>I'm getting the following error while I give Hadoop commands (pls refer pic) <a href=\"https://i.stack.imgur.com/QzStK.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/QzStK.png\" alt=\"enter image description here\" /></a></p>\n<p>Someone tell me how to fix it.</p>\n<p><strong>Note</strong>:\n<strong>Java Home local location:</strong> &quot;C:\\Program Files\\Java\\jdk-20&quot;\n<strong>Hadoop Home location:</strong> &quot;D:\\Hadoop\\hadoop-3.3.5&quot;</p>\n"},{"tags":["java","epoch"],"comments":[{"owner":{"account_id":17835,"reputation":303895,"user_id":40342,"accept_rate":62,"display_name":"Joachim Sauer"},"score":0,"creation_date":1682342963,"post_id":76092206,"comment_id":134195361,"body_markdown":"Just in case you want to depend on the fact that two calls return different values: Don&#39;t. Even if a system can provide higher-than-millisecond resolution, there&#39;s absolutely no guarantee that two calls to whichever method provides this return different values. For example it&#39;s quite possible that a OS can return values with 1/10th millisecond resolution but not true nanosecond resolution.","body":"Just in case you want to depend on the fact that two calls return different values: Don&#39;t. Even if a system can provide higher-than-millisecond resolution, there&#39;s absolutely no guarantee that two calls to whichever method provides this return different values. For example it&#39;s quite possible that a OS can return values with 1/10th millisecond resolution but not true nanosecond resolution."},{"owner":{"display_name":"user21725567"},"score":0,"creation_date":1682343786,"post_id":76092206,"comment_id":134195581,"body_markdown":"@JoachimSauer Thanks for the warning.  My problem is actually precision, i need the nanosecond information. Returning the same time is not a problem. I should have been more clear about that.","body":"@JoachimSauer Thanks for the warning.  My problem is actually precision, i need the nanosecond information. Returning the same time is not a problem. I should have been more clear about that."},{"owner":{"display_name":"user21725567"},"score":0,"creation_date":1682344999,"post_id":76092206,"comment_id":134195943,"body_markdown":"I&#39;m shocked that this question hasn&#39;t been closed and/or downgraded. Has anything changed in SO recently? Was it liberated from the [tyrannical mods](https://www.youtube.com/watch?v=IbDAmvUwo5c)? What happened to: _It has already been answered!_ _We don&#39;t do your homework!_ _Don&#39;t you know how to Google?_","body":"I&#39;m shocked that this question hasn&#39;t been closed and/or downgraded. Has anything changed in SO recently? Was it liberated from the <a href=\"https://www.youtube.com/watch?v=IbDAmvUwo5c\" rel=\"nofollow noreferrer\">tyrannical mods</a>? What happened to: <i>It has already been answered!</i> <i>We don&#39;t do your homework!</i> <i>Don&#39;t you know how to Google?</i>"},{"owner":{"account_id":17835,"reputation":303895,"user_id":40342,"accept_rate":62,"display_name":"Joachim Sauer"},"score":3,"creation_date":1682346808,"post_id":76092206,"comment_id":134196454,"body_markdown":"I&#39;m not sure what you&#39;re trying to achieve with this comment. Are you complaining that you&#39;re not being treated unfairly enough?","body":"I&#39;m not sure what you&#39;re trying to achieve with this comment. Are you complaining that you&#39;re not being treated unfairly enough?"},{"owner":{"account_id":17835,"reputation":303895,"user_id":40342,"accept_rate":62,"display_name":"Joachim Sauer"},"score":0,"creation_date":1682347066,"post_id":76092206,"comment_id":134196536,"body_markdown":"To satiate your desire for perceived unfair interactions, I&#39;ve closed this question as a duplicate with some very good answers that tell you both ways to achieve that and caveats to keep in mind (note: I didn&#39;t really do that for the lolz, I did it because the dupe actually fully answers what this is asking).","body":"To satiate your desire for perceived unfair interactions, I&#39;ve closed this question as a duplicate with some very good answers that tell you both ways to achieve that and caveats to keep in mind (note: I didn&#39;t really do that for the lolz, I did it because the dupe actually fully answers what this is asking)."},{"owner":{"account_id":1689973,"reputation":37280,"user_id":1552534,"display_name":"WJS"},"score":0,"creation_date":1682435343,"post_id":76092206,"comment_id":134213337,"body_markdown":"@JavaCoderUkraine Why the poor attitude?  Your question was up voted.  You were provided an answer.  Then you complain for not having your question closed.  Then you complain when it *is* closed.","body":"@JavaCoderUkraine Why the poor attitude?  Your question was up voted.  You were provided an answer.  Then you complain for not having your question closed.  Then you complain when it <i>is</i> closed."},{"owner":{"display_name":"user21725567"},"score":0,"creation_date":1682642136,"post_id":76092206,"comment_id":134251839,"body_markdown":"Sorry but SO is irrelevant. It is only good as a read-only reference. For anything new we go to Reddit.","body":"Sorry but SO is irrelevant. It is only good as a read-only reference. For anything new we go to Reddit."}],"answers":[{"tags":[],"owner":{"account_id":1689973,"reputation":37280,"user_id":1552534,"display_name":"WJS"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1682342969,"creation_date":1682342159,"answer_id":76092307,"question_id":76092206,"body_markdown":"This should work. Instant and other recent time improvements are from the [java.time](https://docs.oracle.com/en/java/javase/19/docs/api/java.base/java/time/package-summary.html) package.\r\n```\r\nInstant t = Instant.now();\r\nSystem.out.println(t.getEpochSecond()*1_000_000_000 + t.getNano());\r\n```\r\nprints something like\r\n```\r\n1682327653903147800\r\n```\r\nOf course, by the time `instant.now()` has returned, the time has certainly changed significantly from a `nanosecond` perspective.","title":"Is it possible to get EPOCH in Java in nanoseconds without using JNI/Native code or System.currentTimeMillis() * 1000000L?","body":"<p>This should work. Instant and other recent time improvements are from the <a href=\"https://docs.oracle.com/en/java/javase/19/docs/api/java.base/java/time/package-summary.html\" rel=\"nofollow noreferrer\">java.time</a> package.</p>\n<pre><code>Instant t = Instant.now();\nSystem.out.println(t.getEpochSecond()*1_000_000_000 + t.getNano());\n</code></pre>\n<p>prints something like</p>\n<pre><code>1682327653903147800\n</code></pre>\n<p>Of course, by the time <code>instant.now()</code> has returned, the time has certainly changed significantly from a <code>nanosecond</code> perspective.</p>\n"}],"owner":{"display_name":"user21725567"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":114,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"closed_date":1682347002,"answer_count":1,"score":1,"last_activity_date":1682344799,"creation_date":1682341367,"question_id":76092206,"body_markdown":"I know this can be done in Linux, through a native call to `clock_gettime` from `sys/time.h`.\r\n\r\nI know this can be done with `System.currentTimeMillis() * 1000000L`, which is not good because you can have two equal epoch times if you call that in succession.\r\n\r\nWondering if **in the more recent versions of Java** there is already a Java way of getting Epoch in nanoseconds.\r\n\r\nNOTE: I want the epoch with nanosecond precision. I just **don&#39;t want** to convert it to milliseconds with something like:\r\n\r\n    long nanos = TimeUnit.MILLISECONDS.toNanos(System.currentTimeMillis());\r\n\r\nThanks for any help!\r\n\r\n\r\n----------\r\n\r\n**EDIT1:** I&#39;m not worried about getting the same epoch time twice. My goal is to have a real epoch time in nanoseconds.\r\n\r\n\r\n","title":"Is it possible to get EPOCH in Java in nanoseconds without using JNI/Native code or System.currentTimeMillis() * 1000000L?","body":"<p>I know this can be done in Linux, through a native call to <code>clock_gettime</code> from <code>sys/time.h</code>.</p>\n<p>I know this can be done with <code>System.currentTimeMillis() * 1000000L</code>, which is not good because you can have two equal epoch times if you call that in succession.</p>\n<p>Wondering if <strong>in the more recent versions of Java</strong> there is already a Java way of getting Epoch in nanoseconds.</p>\n<p>NOTE: I want the epoch with nanosecond precision. I just <strong>don't want</strong> to convert it to milliseconds with something like:</p>\n<pre><code>long nanos = TimeUnit.MILLISECONDS.toNanos(System.currentTimeMillis());\n</code></pre>\n<p>Thanks for any help!</p>\n<hr />\n<p><strong>EDIT1:</strong> I'm not worried about getting the same epoch time twice. My goal is to have a real epoch time in nanoseconds.</p>\n"},{"tags":["java","spring-boot","locale","hibernate-validator"],"answers":[{"tags":[],"owner":{"account_id":6366204,"reputation":2197,"user_id":4940126,"display_name":"mark_o"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1682344513,"creation_date":1682344513,"answer_id":76092668,"question_id":76090860,"body_markdown":"You might want to take a look at the [`LocaleResolver`][1] provided by Hibernate Validator.\r\n\r\nYou could create a resolver that would work based on the `LocaleContextHolder` which has its locale set by the `RequestContextFilter` :\r\n\r\n    @Bean\r\n    public LocalValidatorFactoryBean validator() {\r\n        LocalValidatorFactoryBean factoryBean = new LocalValidatorFactoryBean();\r\n    \r\n        factoryBean.setValidationMessageSource(messageSource());\r\n        factoryBean.setConfigurationInitializer( configuration -&gt; {\r\n            // cast to Hibernate Validator specific configuration to be able to access\r\n            // the locale resolver:\r\n            ( (HibernateValidatorConfiguration) configuration ).localeResolver(\r\n                    new LocaleResolver() {\r\n                        @Override\r\n                        public Locale resolve(LocaleResolverContext context) {\r\n                            // use the locale from the context holder.\r\n                            // this works with RequestContextFilter. \r\n                            return LocaleContextHolder.getLocale();\r\n                        }\r\n                    }\r\n            );\r\n        });\r\n        return factoryBean;\r\n    }\r\n\r\nIf the locale resolution by that filter doesn&#39;t meet your needs, you can create your own filter and add it to the chain. The general idea remains the same - get the locale in the filter and set it to some thread local variable, and retrieve the locale in the `LocaleResolver`.\r\n\r\n  [1]: https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#section-locale-resolver","title":"How to make HibernateValidator pick up Locale from HTTP request Header for measage templates in spring Boot?","body":"<p>You might want to take a look at the <a href=\"https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#section-locale-resolver\" rel=\"nofollow noreferrer\"><code>LocaleResolver</code></a> provided by Hibernate Validator.</p>\n<p>You could create a resolver that would work based on the <code>LocaleContextHolder</code> which has its locale set by the <code>RequestContextFilter</code> :</p>\n<pre><code>@Bean\npublic LocalValidatorFactoryBean validator() {\n    LocalValidatorFactoryBean factoryBean = new LocalValidatorFactoryBean();\n\n    factoryBean.setValidationMessageSource(messageSource());\n    factoryBean.setConfigurationInitializer( configuration -&gt; {\n        // cast to Hibernate Validator specific configuration to be able to access\n        // the locale resolver:\n        ( (HibernateValidatorConfiguration) configuration ).localeResolver(\n                new LocaleResolver() {\n                    @Override\n                    public Locale resolve(LocaleResolverContext context) {\n                        // use the locale from the context holder.\n                        // this works with RequestContextFilter. \n                        return LocaleContextHolder.getLocale();\n                    }\n                }\n        );\n    });\n    return factoryBean;\n}\n</code></pre>\n<p>If the locale resolution by that filter doesn't meet your needs, you can create your own filter and add it to the chain. The general idea remains the same - get the locale in the filter and set it to some thread local variable, and retrieve the locale in the <code>LocaleResolver</code>.</p>\n"}],"owner":{"account_id":25495144,"reputation":53,"user_id":19289307,"display_name":"Roman Y"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":180,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1682344513,"creation_date":1682331605,"question_id":76090860,"body_markdown":"I&#39;ve been cracking my head on this problem for a week. After deep research and debugging session I&#39;m just desperate.\r\n\r\nAll want to do is for the ```HibernateValidator``` to pick up messages from the provided ```MessageSource``` and use locale to interpolate messages from the ```MessageSource``` according to the template provided in the annotation for the object field.\r\n\r\nSo far the only thing ```HibernateValidator``` does is falling back to the ```Locale.getDefault()``` every time no matter what I do.\r\n\r\nThis thing where Spring developers say that there is to easy way to do that.\r\n\r\n[https://github.com/spring-projects/spring-boot/issues/20673][1]\r\n\r\nThis is the topic that describes the setup I should use to get the result that still does not work.\r\n\r\n[https://stackoverflow.com/questions/66951275/spring-boot-hibernate-validator-language-based-on-localecontextholder][2]\r\n\r\n\r\nThis is my starting setup that just work with one default locale in my case.\r\n\r\nWhat do I need to add or change in order for the ```HibernateValidator``` to pick up ```Locale``` from the Header and interpolate messages from the ```MessageSource``` in the correct ```Locale``` picked up from the request header?\r\n\r\nHere is the primitive setup I&#39;ve got.\r\n\r\nController.\r\n\r\n```java\r\npackage com.example.gatewayservice.controller;\r\n\r\n@RestController\r\n@RequiredArgsConstructor\r\n@Slf4j\r\n@RequestMapping(&quot;/api/v1&quot;)\r\n//@Validated\r\npublic class UserDataController {\r\n\r\n    @Autowired\r\n    UserDataService userDataService;\r\n\r\n    @Async(&quot;threadPoolTaskExecutor&quot;)\r\n    @PostMapping(&quot;/getSimData&quot;)\r\n//    @Validated(OnRequestValidation.class)\r\n    public CompletableFuture&lt;ResponseEntity&lt;SimDataResponse&gt;&gt; getSimData(@Valid @RequestBody SimDataRequest request) {\r\n\r\n        log.info(&quot;Entered getSimData controller with the request ::\\n {}&quot;, request);\r\n\r\n        ResponseEntity&lt;SimDataResponse&gt; result = ResponseEntity.ok(userDataService.getSimData(request));\r\n\r\n        return CompletableFuture.completedFuture(result);\r\n    }\r\n}\r\n```\r\n\r\nRequest object that is validated with Hibernate validator.\r\n\r\n```java\r\npackage com.example.gatewayservice.dto.controller;\r\n\r\n@Data\r\npublic class SimDataRequest {\r\n\r\n    @NotEmpty(message = &quot;{msisdn.error.empty}&quot;)\r\n    private String msisdn;\r\n\r\n}\r\n```\r\n\r\nmessages.properties file content \r\n\r\n```\r\nmsisdn.error.empty=&quot;MSISDN is empty&quot;\r\n```\r\n\r\nmessages_fr.properties file content\r\n\r\n```\r\nmsisdn.error.empty=Le MSISDN est vide\r\n```\r\n\r\nAnd the root of all problems, the configuration that for the love of me I can&#39;t figure out.\r\n\r\n```java\r\npackage com.example.gatewayservice.config;\r\n\r\n@Configuration\r\npublic class ServiceConfig implements WebMvcConfigurer {\r\n\r\n    @Bean\r\n    public RestTemplate restTemplate(RestTemplateBuilder restTemplateBuilder) {\r\n\r\n        OkHttpClient okHttpClient = new OkHttpClient.Builder()\r\n                .connectTimeout(Duration.ofSeconds(60))\r\n                .writeTimeout(Duration.ofSeconds(60))\r\n                .readTimeout(Duration.ofSeconds(60))\r\n                .build();\r\n\r\n        return restTemplateBuilder\r\n                .requestFactory(() -&gt; new OkHttp3ClientHttpRequestFactory(okHttpClient))\r\n                .build();\r\n\r\n    }\r\n\r\n    @Bean(&quot;threadPoolTaskExecutor&quot;)\r\n    public TaskExecutor asyncExecutor() {\r\n        ThreadPoolTaskExecutor executor = new ThreadPoolTaskExecutor();\r\n        executor.setCorePoolSize(50);\r\n        executor.setMaxPoolSize(1000);\r\n        executor.setQueueCapacity(50);\r\n        executor.setWaitForTasksToCompleteOnShutdown(true);\r\n        executor.setThreadNamePrefix(&quot;Async-&quot;);\r\n        return executor;\r\n    }\r\n\r\n\r\n\r\n    /*locale resolution strategy*/\r\n    @Bean\r\n    public AcceptHeaderLocaleResolver localeResolver() {\r\n        final CustomLocaleResolver resolver = new CustomLocaleResolver();\r\n        resolver.setSupportedLocales(Arrays.asList(Locale.FRANCE, Locale.US, Locale.UK));\r\n        resolver.setDefaultLocale(Locale.US);\r\n        return resolver;\r\n    }\r\n\r\n    public static class CustomLocaleResolver extends AcceptHeaderLocaleResolver {\r\n        List&lt;Locale&gt; LOCALES = Arrays.asList(\r\n                new Locale(&quot;en&quot;),\r\n                new Locale(&quot;fr&quot;));\r\n        @Override\r\n        public Locale resolveLocale(HttpServletRequest request) {\r\n            String headerLang = request.getHeader(&quot;Accept-Language&quot;);\r\n            return headerLang == null || headerLang.isEmpty()\r\n                    ? Locale.getDefault()\r\n                    : Locale.lookup(Locale.LanguageRange.parse(headerLang), LOCALES);\r\n        }\r\n    }\r\n\r\n    /*default message source*/\r\n    @Bean\r\n    public MessageSource messageSource() {\r\n        ReloadableResourceBundleMessageSource messageSource = new ReloadableResourceBundleMessageSource();\r\n//        ResourceBundleMessageSource messageSource = new ResourceBundleMessageSource();\r\n        messageSource.setBasename(&quot;messages&quot;);\r\n        messageSource.setDefaultEncoding(&quot;UTF-8&quot;);\r\n        return messageSource;\r\n    }\r\n\r\n    /*Validator setup*/\r\n    @Bean\r\n    public LocalValidatorFactoryBean validator() {\r\n        LocalValidatorFactoryBean factoryBean = new LocalValidatorFactoryBean();\r\n\r\n        factoryBean.setValidationMessageSource(messageSource());\r\n\r\n//        MessageInterpolatorFactory interpolatorFactory = new MessageInterpolatorFactory(validationMessageSource());\r\n//        factoryBean.setMessageInterpolator(interpolatorFactory.getObject());\r\n\r\n        return factoryBean;\r\n    }\r\n\r\n}\r\n```\r\n\r\n  [1]: https://github.com/spring-projects/spring-boot/issues/20673\r\n  [2]: https://stackoverflow.com/questions/66951275/spring-boot-hibernate-validator-language-based-on-localecontextholder","title":"How to make HibernateValidator pick up Locale from HTTP request Header for measage templates in spring Boot?","body":"<p>I've been cracking my head on this problem for a week. After deep research and debugging session I'm just desperate.</p>\n<p>All want to do is for the <code>HibernateValidator</code> to pick up messages from the provided <code>MessageSource</code> and use locale to interpolate messages from the <code>MessageSource</code> according to the template provided in the annotation for the object field.</p>\n<p>So far the only thing <code>HibernateValidator</code> does is falling back to the <code>Locale.getDefault()</code> every time no matter what I do.</p>\n<p>This thing where Spring developers say that there is to easy way to do that.</p>\n<p><a href=\"https://github.com/spring-projects/spring-boot/issues/20673\" rel=\"nofollow noreferrer\">https://github.com/spring-projects/spring-boot/issues/20673</a></p>\n<p>This is the topic that describes the setup I should use to get the result that still does not work.</p>\n<p><a href=\"https://stackoverflow.com/questions/66951275/spring-boot-hibernate-validator-language-based-on-localecontextholder\">Spring Boot, Hibernate validator language based on LocaleContextHolder</a></p>\n<p>This is my starting setup that just work with one default locale in my case.</p>\n<p>What do I need to add or change in order for the <code>HibernateValidator</code> to pick up <code>Locale</code> from the Header and interpolate messages from the <code>MessageSource</code> in the correct <code>Locale</code> picked up from the request header?</p>\n<p>Here is the primitive setup I've got.</p>\n<p>Controller.</p>\n<pre class=\"lang-java prettyprint-override\"><code>package com.example.gatewayservice.controller;\n\n@RestController\n@RequiredArgsConstructor\n@Slf4j\n@RequestMapping(&quot;/api/v1&quot;)\n//@Validated\npublic class UserDataController {\n\n    @Autowired\n    UserDataService userDataService;\n\n    @Async(&quot;threadPoolTaskExecutor&quot;)\n    @PostMapping(&quot;/getSimData&quot;)\n//    @Validated(OnRequestValidation.class)\n    public CompletableFuture&lt;ResponseEntity&lt;SimDataResponse&gt;&gt; getSimData(@Valid @RequestBody SimDataRequest request) {\n\n        log.info(&quot;Entered getSimData controller with the request ::\\n {}&quot;, request);\n\n        ResponseEntity&lt;SimDataResponse&gt; result = ResponseEntity.ok(userDataService.getSimData(request));\n\n        return CompletableFuture.completedFuture(result);\n    }\n}\n</code></pre>\n<p>Request object that is validated with Hibernate validator.</p>\n<pre class=\"lang-java prettyprint-override\"><code>package com.example.gatewayservice.dto.controller;\n\n@Data\npublic class SimDataRequest {\n\n    @NotEmpty(message = &quot;{msisdn.error.empty}&quot;)\n    private String msisdn;\n\n}\n</code></pre>\n<p>messages.properties file content</p>\n<pre><code>msisdn.error.empty=&quot;MSISDN is empty&quot;\n</code></pre>\n<p>messages_fr.properties file content</p>\n<pre><code>msisdn.error.empty=Le MSISDN est vide\n</code></pre>\n<p>And the root of all problems, the configuration that for the love of me I can't figure out.</p>\n<pre class=\"lang-java prettyprint-override\"><code>package com.example.gatewayservice.config;\n\n@Configuration\npublic class ServiceConfig implements WebMvcConfigurer {\n\n    @Bean\n    public RestTemplate restTemplate(RestTemplateBuilder restTemplateBuilder) {\n\n        OkHttpClient okHttpClient = new OkHttpClient.Builder()\n                .connectTimeout(Duration.ofSeconds(60))\n                .writeTimeout(Duration.ofSeconds(60))\n                .readTimeout(Duration.ofSeconds(60))\n                .build();\n\n        return restTemplateBuilder\n                .requestFactory(() -&gt; new OkHttp3ClientHttpRequestFactory(okHttpClient))\n                .build();\n\n    }\n\n    @Bean(&quot;threadPoolTaskExecutor&quot;)\n    public TaskExecutor asyncExecutor() {\n        ThreadPoolTaskExecutor executor = new ThreadPoolTaskExecutor();\n        executor.setCorePoolSize(50);\n        executor.setMaxPoolSize(1000);\n        executor.setQueueCapacity(50);\n        executor.setWaitForTasksToCompleteOnShutdown(true);\n        executor.setThreadNamePrefix(&quot;Async-&quot;);\n        return executor;\n    }\n\n\n\n    /*locale resolution strategy*/\n    @Bean\n    public AcceptHeaderLocaleResolver localeResolver() {\n        final CustomLocaleResolver resolver = new CustomLocaleResolver();\n        resolver.setSupportedLocales(Arrays.asList(Locale.FRANCE, Locale.US, Locale.UK));\n        resolver.setDefaultLocale(Locale.US);\n        return resolver;\n    }\n\n    public static class CustomLocaleResolver extends AcceptHeaderLocaleResolver {\n        List&lt;Locale&gt; LOCALES = Arrays.asList(\n                new Locale(&quot;en&quot;),\n                new Locale(&quot;fr&quot;));\n        @Override\n        public Locale resolveLocale(HttpServletRequest request) {\n            String headerLang = request.getHeader(&quot;Accept-Language&quot;);\n            return headerLang == null || headerLang.isEmpty()\n                    ? Locale.getDefault()\n                    : Locale.lookup(Locale.LanguageRange.parse(headerLang), LOCALES);\n        }\n    }\n\n    /*default message source*/\n    @Bean\n    public MessageSource messageSource() {\n        ReloadableResourceBundleMessageSource messageSource = new ReloadableResourceBundleMessageSource();\n//        ResourceBundleMessageSource messageSource = new ResourceBundleMessageSource();\n        messageSource.setBasename(&quot;messages&quot;);\n        messageSource.setDefaultEncoding(&quot;UTF-8&quot;);\n        return messageSource;\n    }\n\n    /*Validator setup*/\n    @Bean\n    public LocalValidatorFactoryBean validator() {\n        LocalValidatorFactoryBean factoryBean = new LocalValidatorFactoryBean();\n\n        factoryBean.setValidationMessageSource(messageSource());\n\n//        MessageInterpolatorFactory interpolatorFactory = new MessageInterpolatorFactory(validationMessageSource());\n//        factoryBean.setMessageInterpolator(interpolatorFactory.getObject());\n\n        return factoryBean;\n    }\n\n}\n</code></pre>\n"},{"tags":["java","spring-boot","spring-security"],"comments":[{"owner":{"account_id":290683,"reputation":12512,"user_id":592355,"display_name":"xerx593"},"score":1,"creation_date":1682343989,"post_id":76092497,"comment_id":134195636,"body_markdown":"Hi&amp; Welcome! &quot;Is it secure to set .requestMatchers(&quot;/error&quot;).permitAll()?&quot; for debugging/understanding/&quot;fixing&quot;: definitely! For production: rather not!;)","body":"Hi&amp; Welcome! &quot;Is it secure to set .requestMatchers(&quot;/error&quot;).permitAll()?&quot; for debugging/understanding/&quot;fixing&quot;: definitely! For production: rather not!;)"},{"owner":{"account_id":13733333,"reputation":21,"user_id":9910322,"display_name":"Yevhenii Terentiev"},"score":0,"creation_date":1682346907,"post_id":76092497,"comment_id":134196484,"body_markdown":"@xerx593 Thanks for the answer! If disabling security for &quot;/error&quot; isn&#39;t a good idea, I wonder what is wrong with my code? My first guess was that it needed AuthenticationManager, so i implemented my own AuthenticationManager bean and it still doesn&#39;t work.","body":"@xerx593 Thanks for the answer! If disabling security for &quot;/error&quot; isn&#39;t a good idea, I wonder what is wrong with my code? My first guess was that it needed AuthenticationManager, so i implemented my own AuthenticationManager bean and it still doesn&#39;t work."}],"owner":{"account_id":13733333,"reputation":21,"user_id":9910322,"display_name":"Yevhenii Terentiev"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":42,"favorite_count":0,"down_vote_count":1,"up_vote_count":2,"answer_count":0,"score":1,"last_activity_date":1682344193,"creation_date":1682343407,"question_id":76092497,"body_markdown":"I am trying to implement JWT authentication. This is going to be the only form of authentication in the app. Using Spring security I&#39;ve implemented JWT validation filter and added it to the chain before AnonymousAuthenticationFilter.\r\n\r\n```java\r\npublic class JwtTokenFilter extends BasicAuthenticationFilter {\r\n    private final JwtTokenService jwtTokenService;\r\n\r\n    public JwtTokenFilter(JwtTokenService jwtTokenService,\r\n                          AuthenticationManager authenticationManager) {\r\n        super(authenticationManager);\r\n        this.jwtTokenService = jwtTokenService;\r\n    }\r\n\r\n    @Override\r\n    protected void doFilterInternal(\r\n            @NonNull HttpServletRequest request,\r\n            @NonNull HttpServletResponse response,\r\n            @NonNull FilterChain filterChain) throws ServletException, IOException {\r\n        String initialToken = request.getHeader(&quot;Authorization&quot;);\r\n        String token;\r\n\r\n        if(initialToken == null || initialToken.isEmpty()){\r\n            filterChain.doFilter(request, response);\r\n            return;\r\n        }\r\n\r\n        if (initialToken.startsWith(&quot;Bearer &quot;)) {\r\n            token = initialToken.substring(7);\r\n        }\r\n        else {\r\n            filterChain.doFilter(request, response);\r\n            return;\r\n        }\r\n\r\n        if(token.isEmpty()){\r\n            filterChain.doFilter(request, response);\r\n            return;\r\n        }\r\n\r\n        try {\r\n            String userId = jwtTokenService.getUserIdFromToken(token);\r\n            String userLogin = jwtTokenService.getUserLoginFromToken(token);\r\n            String role = jwtTokenService.getRoleFromToken(token);\r\n            Date expiration = jwtTokenService.getExpirationDateFromToken(token);\r\n\r\n            if(!userLogin.isEmpty() &amp;&amp; !userId.isEmpty() &amp;&amp; !role.isEmpty() &amp;&amp; expiration != null){\r\n                JwtUser user = new JwtUser(userId, userLogin, role, expiration);\r\n                UsernamePasswordAuthenticationToken auth = new UsernamePasswordAuthenticationToken(user, null, user.getAuthorities());\r\n                auth.setDetails(new WebAuthenticationDetailsSource().buildDetails(request));\r\n\r\n                SecurityContextHolder.getContext().setAuthentication(auth);\r\n            }\r\n        }\r\n        catch (Exception e){\r\n            logger.error(&quot;Error while parsing jwt: &quot; + e.getMessage());\r\n        }\r\n        finally {\r\n            filterChain.doFilter(request, response);\r\n        }\r\n    }\r\n}\r\n```\r\n\r\nThe filter works, with valid token it successfully creates UsernamePasswordAuthenticationToken and allows access. But after this i receive log saying &quot;Securing POST /error&quot; and another filter chain starts which doesn&#39;t have the same JWT token, so my filter does nothing in the new chain and i get AnonymousAuthenticationToken, which obviously leads to 401 Unathorized error.\r\n\r\nSo even valid token results in 401 Unauthorized.\r\n\r\n\r\nSetting `http.authorizeHttpRequests().requestMatchers(&quot;/error&quot;).permitAll()`\r\nin `securityFilterChain(HttpSecurity http)` method solves the issue.\r\n\r\nIs it secure to set `.requestMatchers(&quot;/error&quot;).permitAll()`?\r\n\r\nIf not, what could be the issue? Is there something wrong with my JWT validation logic implementation?","title":"Is it a good idea to add &quot;/error&quot; route to permitAll()?","body":"<p>I am trying to implement JWT authentication. This is going to be the only form of authentication in the app. Using Spring security I've implemented JWT validation filter and added it to the chain before AnonymousAuthenticationFilter.</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class JwtTokenFilter extends BasicAuthenticationFilter {\n    private final JwtTokenService jwtTokenService;\n\n    public JwtTokenFilter(JwtTokenService jwtTokenService,\n                          AuthenticationManager authenticationManager) {\n        super(authenticationManager);\n        this.jwtTokenService = jwtTokenService;\n    }\n\n    @Override\n    protected void doFilterInternal(\n            @NonNull HttpServletRequest request,\n            @NonNull HttpServletResponse response,\n            @NonNull FilterChain filterChain) throws ServletException, IOException {\n        String initialToken = request.getHeader(&quot;Authorization&quot;);\n        String token;\n\n        if(initialToken == null || initialToken.isEmpty()){\n            filterChain.doFilter(request, response);\n            return;\n        }\n\n        if (initialToken.startsWith(&quot;Bearer &quot;)) {\n            token = initialToken.substring(7);\n        }\n        else {\n            filterChain.doFilter(request, response);\n            return;\n        }\n\n        if(token.isEmpty()){\n            filterChain.doFilter(request, response);\n            return;\n        }\n\n        try {\n            String userId = jwtTokenService.getUserIdFromToken(token);\n            String userLogin = jwtTokenService.getUserLoginFromToken(token);\n            String role = jwtTokenService.getRoleFromToken(token);\n            Date expiration = jwtTokenService.getExpirationDateFromToken(token);\n\n            if(!userLogin.isEmpty() &amp;&amp; !userId.isEmpty() &amp;&amp; !role.isEmpty() &amp;&amp; expiration != null){\n                JwtUser user = new JwtUser(userId, userLogin, role, expiration);\n                UsernamePasswordAuthenticationToken auth = new UsernamePasswordAuthenticationToken(user, null, user.getAuthorities());\n                auth.setDetails(new WebAuthenticationDetailsSource().buildDetails(request));\n\n                SecurityContextHolder.getContext().setAuthentication(auth);\n            }\n        }\n        catch (Exception e){\n            logger.error(&quot;Error while parsing jwt: &quot; + e.getMessage());\n        }\n        finally {\n            filterChain.doFilter(request, response);\n        }\n    }\n}\n</code></pre>\n<p>The filter works, with valid token it successfully creates UsernamePasswordAuthenticationToken and allows access. But after this i receive log saying &quot;Securing POST /error&quot; and another filter chain starts which doesn't have the same JWT token, so my filter does nothing in the new chain and i get AnonymousAuthenticationToken, which obviously leads to 401 Unathorized error.</p>\n<p>So even valid token results in 401 Unauthorized.</p>\n<p>Setting <code>http.authorizeHttpRequests().requestMatchers(&quot;/error&quot;).permitAll()</code>\nin <code>securityFilterChain(HttpSecurity http)</code> method solves the issue.</p>\n<p>Is it secure to set <code>.requestMatchers(&quot;/error&quot;).permitAll()</code>?</p>\n<p>If not, what could be the issue? Is there something wrong with my JWT validation logic implementation?</p>\n"},{"tags":["java","spring-boot","concurrency","parallel-processing","openshift"],"comments":[{"owner":{"account_id":2984481,"reputation":598,"user_id":2533691,"display_name":"Yano"},"score":0,"creation_date":1682365223,"post_id":76092035,"comment_id":134200735,"body_markdown":"This link might be useful to understand millicores: https://stackoverflow.com/questions/61851751/multi-threading-with-millicores-in-kubernetes","body":"This link might be useful to understand millicores: <a href=\"https://stackoverflow.com/questions/61851751/multi-threading-with-millicores-in-kubernetes\" title=\"multi threading with millicores in kubernetes\">stackoverflow.com/questions/61851751/&hellip;</a>"}],"answers":[{"tags":[],"owner":{"account_id":47283,"reputation":703817,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1682344165,"creation_date":1682343766,"answer_id":76092550,"question_id":76092035,"body_markdown":"In short, there is no way to guarantee that you will get true parallelism.\r\n\r\nOn the Java side, no.  Java has zero control over this.  It is up to the operating system scheduler.\r\n\r\nAt the container level, with 500 millicores you should&lt;sup&gt;1&lt;/sup&gt; get at least 1/2 a core on average.  However, at some times no cores will be allocated, and other times two or more cores *could* be allocated.  \r\n\r\nAlso, if the node is not busy you *may* get more than 1/2 core on average.  The OpenShift [documentation][1] says this:\r\n\r\n&gt; *&quot;The CPU request represents a minimum amount of CPU that your container may consume, **but if there is no contention for CPU, it can use all available CPU on the node**. If there is CPU contention on the node, CPU requests provide a relative weight across all containers on the system for how much CPU time the container may use.&quot;*\r\n\r\nSo, in practice, with 500 millicores there are no guarantees of true parallelism either.\r\n\r\nHowever, even if you did get true parallelism with two threads, with 500 millicores you can only expect it 1/4 of the time.  If your goal is to get reliably fast performance, you need multiples of cores.  (You get what you pay for.)\r\n\r\n----------------------\r\n\r\n&lt;sup&gt;1 - Note: you *should* get this.  However, if the node&#39;s resources are over-committed, it is possible that you can get less CPU than you should.&lt;/sup&gt;\r\n\r\n\r\n  [1]: https://docs.openshift.com/container-platform/3.11/dev_guide/compute_resources.html#dev-cpu-requests","title":"Achieving true parallelism with 500m CPU allocation in OpenShift 4 for a multi-threaded application","body":"<p>In short, there is no way to guarantee that you will get true parallelism.</p>\n<p>On the Java side, no.  Java has zero control over this.  It is up to the operating system scheduler.</p>\n<p>At the container level, with 500 millicores you should<sup>1</sup> get at least 1/2 a core on average.  However, at some times no cores will be allocated, and other times two or more cores <em>could</em> be allocated.</p>\n<p>Also, if the node is not busy you <em>may</em> get more than 1/2 core on average.  The OpenShift <a href=\"https://docs.openshift.com/container-platform/3.11/dev_guide/compute_resources.html#dev-cpu-requests\" rel=\"nofollow noreferrer\">documentation</a> says this:</p>\n<blockquote>\n<p><em>&quot;The CPU request represents a minimum amount of CPU that your container may consume, <strong>but if there is no contention for CPU, it can use all available CPU on the node</strong>. If there is CPU contention on the node, CPU requests provide a relative weight across all containers on the system for how much CPU time the container may use.&quot;</em></p>\n</blockquote>\n<p>So, in practice, with 500 millicores there are no guarantees of true parallelism either.</p>\n<p>However, even if you did get true parallelism with two threads, with 500 millicores you can only expect it 1/4 of the time.  If your goal is to get reliably fast performance, you need multiples of cores.  (You get what you pay for.)</p>\n<hr />\n<p><sup>1 - Note: you <em>should</em> get this.  However, if the node's resources are over-committed, it is possible that you can get less CPU than you should.</sup></p>\n"}],"owner":{"account_id":27478689,"reputation":1,"user_id":20966191,"display_name":"Gabriel Zirondi"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":225,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1682344165,"creation_date":1682340303,"question_id":76092035,"body_markdown":"Hello Stack Overflow community,\r\n\r\nI have been working with OpenShift 4 to deploy a multi-threaded application that relies on parallelism for better performance. In OpenShift, fractional CPU amounts can be allocated using millicores. In my case, I have a scenario where I can only allocate 500m (500 millicores) CPU for my microservice.\r\n\r\nThe microservice has a main thread and a method that uses the `@Async` annotation to run asynchronously. Is there any way to guarantee true parallelism for these two threads, rather than just concurrency, when allocating 500m CPU?\r\n\r\nAny guidance or suggestions on this topic would be much appreciated. Thank you!\r\n\r\nI checked Dynatrace to understand the number of worker processes my application is using. I expected to see multiple worker processes running concurrently, but I only found one worker process in the graph when selecting &quot;count&quot;.","title":"Achieving true parallelism with 500m CPU allocation in OpenShift 4 for a multi-threaded application","body":"<p>Hello Stack Overflow community,</p>\n<p>I have been working with OpenShift 4 to deploy a multi-threaded application that relies on parallelism for better performance. In OpenShift, fractional CPU amounts can be allocated using millicores. In my case, I have a scenario where I can only allocate 500m (500 millicores) CPU for my microservice.</p>\n<p>The microservice has a main thread and a method that uses the <code>@Async</code> annotation to run asynchronously. Is there any way to guarantee true parallelism for these two threads, rather than just concurrency, when allocating 500m CPU?</p>\n<p>Any guidance or suggestions on this topic would be much appreciated. Thank you!</p>\n<p>I checked Dynatrace to understand the number of worker processes my application is using. I expected to see multiple worker processes running concurrently, but I only found one worker process in the graph when selecting &quot;count&quot;.</p>\n"},{"tags":["java","spring-boot","graphql","graphql-java"],"answers":[{"tags":[],"owner":{"account_id":338971,"reputation":1160,"user_id":668148,"accept_rate":100,"display_name":"Bogdan Kobylynskyi"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1682344021,"creation_date":1577394661,"answer_id":59493499,"question_id":56856688,"body_markdown":"If you want to completely separate user-related queries from organization-related queries, then:\r\n\r\n 1. Split single .graphqls file into separate files:\r\n\r\n\r\n*user.graphqls*:\r\n```\r\n    extend type Query {\r\n        fetchUser(email: String): User\r\n    }\r\n    ...\r\n```\r\n*organization.graphqls*:\r\n```\r\n    extend type Query {\r\n        listOrganizations(max: Int): [GenericListing]\r\n    }\r\n    ...\r\n```\r\n\r\n 2. Split resolvers:\r\n\r\n```java\r\n    @Component\r\n    public class UserQuery implements GraphQLQueryResolver {\r\n        public User fetchUser(String email) {\r\n            ...\r\n        }\r\n    }\r\n```\r\n\r\n```java\r\n    @Component\r\n    public class OrganizationQuery implements GraphQLQueryResolver {\r\n        public List&lt;GenericListing&gt; listOrganisations(Integer max) {\r\n            ...\r\n        }\r\n    }\r\n```\r\n\r\n---\r\n\r\nAlso, you can use graphql-java-codegen plugin for auto-generating interfaces and data classes based on your schemas. By the way, it supports multiple schema files:\r\n\r\n* Gradle plugin: [graphql-java-codegen-gradle-plugin][1]\r\n* Maven plugin: [grapqhl-java-codegen-maven-plugin][2]\r\n\r\n\r\n  [1]: https://github.com/kobylynskyi/graphql-java-codegen-gradle-plugin\r\n  [2]: https://github.com/kobylynskyi/graphql-java-codegen-maven-plugin","title":"How do I logically split up my GraphQL schema and Resolvers with Kickstart Spring Boot GraphQL","body":"<p>If you want to completely separate user-related queries from organization-related queries, then:</p>\n<ol>\n<li>Split single .graphqls file into separate files:</li>\n</ol>\n<p><em>user.graphqls</em>:</p>\n<pre><code>    extend type Query {\n        fetchUser(email: String): User\n    }\n    ...\n</code></pre>\n<p><em>organization.graphqls</em>:</p>\n<pre><code>    extend type Query {\n        listOrganizations(max: Int): [GenericListing]\n    }\n    ...\n</code></pre>\n<ol start=\"2\">\n<li>Split resolvers:</li>\n</ol>\n<pre class=\"lang-java prettyprint-override\"><code>    @Component\n    public class UserQuery implements GraphQLQueryResolver {\n        public User fetchUser(String email) {\n            ...\n        }\n    }\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>    @Component\n    public class OrganizationQuery implements GraphQLQueryResolver {\n        public List&lt;GenericListing&gt; listOrganisations(Integer max) {\n            ...\n        }\n    }\n</code></pre>\n<hr />\n<p>Also, you can use graphql-java-codegen plugin for auto-generating interfaces and data classes based on your schemas. By the way, it supports multiple schema files:</p>\n<ul>\n<li>Gradle plugin: <a href=\"https://github.com/kobylynskyi/graphql-java-codegen-gradle-plugin\" rel=\"nofollow noreferrer\">graphql-java-codegen-gradle-plugin</a></li>\n<li>Maven plugin: <a href=\"https://github.com/kobylynskyi/graphql-java-codegen-maven-plugin\" rel=\"nofollow noreferrer\">grapqhl-java-codegen-maven-plugin</a></li>\n</ul>\n"}],"owner":{"account_id":281803,"reputation":13299,"user_id":578318,"accept_rate":59,"display_name":"sparkyspider"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1841,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1682344021,"creation_date":1562084838,"question_id":56856688,"body_markdown":"At the moment, all my query resolvers are under a single Query class and a single Query schema / type as such:\r\n```graphql\r\nschema {\r\n    query: Query #I&#39;d prefer UserQueries and OrganisationQueries\r\n    mutation: UserMutations\r\n    mutation: OrganisationMutations\r\n}\r\n\r\ntype Query {\r\n    fetchUser(email: String): User\r\n    listOrganisations(max: Int): [GenericListing]\r\n}\r\n\r\n...\r\n```\r\nAnd all my queries in one class:\r\n```java\r\n@Component\r\npublic class Query implements GraphQLQueryResolver {\r\n\r\n    public List&lt;GenericListing&gt; listOrganisations (Integer max) {\r\n        ...\r\n    }\r\n\r\n    public User fetchUser (String email) {\r\n        ...\r\n    }\r\n}\r\n```\r\nI&#39;ve managed to split up and logically separate my mutations by User and Organisation! \r\n```java\r\n@Component\r\npublic class UserMutations implements GraphQLMutationResolver {\r\n\r\n    public User createUser(String firstname, String lastname, String email, String msisdn, String password) {\r\n        ...\r\n    }\r\n}\r\n```\r\nHow do I logically separate my queries - or at least not have all my queries in the Query class.","title":"How do I logically split up my GraphQL schema and Resolvers with Kickstart Spring Boot GraphQL","body":"<p>At the moment, all my query resolvers are under a single Query class and a single Query schema / type as such:</p>\n\n<pre><code>schema {\n    query: Query #I'd prefer UserQueries and OrganisationQueries\n    mutation: UserMutations\n    mutation: OrganisationMutations\n}\n\ntype Query {\n    fetchUser(email: String): User\n    listOrganisations(max: Int): [GenericListing]\n}\n\n...\n</code></pre>\n\n<p>And all my queries in one class:</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>@Component\npublic class Query implements GraphQLQueryResolver {\n\n    public List&lt;GenericListing&gt; listOrganisations (Integer max) {\n        ...\n    }\n\n    public User fetchUser (String email) {\n        ...\n    }\n}\n</code></pre>\n\n<p>I've managed to split up and logically separate my mutations by User and Organisation! </p>\n\n<pre class=\"lang-java prettyprint-override\"><code>@Component\npublic class UserMutations implements GraphQLMutationResolver {\n\n    public User createUser(String firstname, String lastname, String email, String msisdn, String password) {\n        ...\n    }\n}\n</code></pre>\n\n<p>How do I logically separate my queries - or at least not have all my queries in the Query class.</p>\n"},{"tags":["java","literals"],"comments":[{"owner":{"account_id":1960454,"reputation":44539,"user_id":1762224,"accept_rate":61,"display_name":"Mr. Polywhirl"},"score":4,"creation_date":1682342430,"post_id":76092334,"comment_id":134195210,"body_markdown":"They get stored in the system&#39;s memory when the JVM executes the compiled code.","body":"They get stored in the system&#39;s memory when the JVM executes the compiled code."},{"owner":{"account_id":204659,"reputation":37539,"user_id":453005,"accept_rate":100,"display_name":"DwB"},"score":0,"creation_date":1682343872,"post_id":76092334,"comment_id":134195605,"body_markdown":"After compilation, there are no no-string literals in java.  All non-string literals are the initial value of a variable.","body":"After compilation, there are no no-string literals in java.  All non-string literals are the initial value of a variable."},{"owner":{"account_id":7547772,"reputation":8583,"user_id":5730279,"display_name":"hc_dev"},"score":0,"creation_date":1682344077,"post_id":76092334,"comment_id":134195665,"body_markdown":"Can you elaborate more on the context of your question. Or give an example, what you need this information for.","body":"Can you elaborate more on the context of your question. Or give an example, what you need this information for."},{"owner":{"account_id":28218936,"reputation":21,"user_id":21569991,"display_name":"xyz xyz"},"score":0,"creation_date":1682344223,"post_id":76092334,"comment_id":134195711,"body_markdown":"@hc_dev int x = 10; double d = 10.2 where does 10 and 10.2 stored in stack or in heap?","body":"@hc_dev int x = 10; double d = 10.2 where does 10 and 10.2 stored in stack or in heap?"},{"owner":{"account_id":47283,"reputation":703817,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":1,"creation_date":1682344253,"post_id":76092334,"comment_id":134195722,"body_markdown":"Probably neither.  They are probably inlined into the native code.","body":"Probably neither.  They are probably inlined into the native code."},{"owner":{"account_id":14587108,"reputation":155,"user_id":10535520,"display_name":"Stone"},"score":0,"creation_date":1682344565,"post_id":76092334,"comment_id":134195819,"body_markdown":"JVM runs these statements as byte codes. The literal values such as 10 or 10.2 are stored in operand stack which are used by byte code instructions.","body":"JVM runs these statements as byte codes. The literal values such as 10 or 10.2 are stored in operand stack which are used by byte code instructions."},{"owner":{"account_id":47283,"reputation":703817,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":0,"creation_date":1682344632,"post_id":76092334,"comment_id":134195847,"body_markdown":"You asked a similar question a couple of weeks ago; see https://stackoverflow.com/questions/75981795/.  It is not a good idea to ask the same question repeatedly.  People remember.","body":"You asked a similar question a couple of weeks ago; see <a href=\"https://stackoverflow.com/questions/75981795/\">stackoverflow.com/questions/75981795</a>.  It is not a good idea to ask the same question repeatedly.  People remember."},{"owner":{"account_id":47283,"reputation":703817,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":0,"creation_date":1682344930,"post_id":76092334,"comment_id":134195924,"body_markdown":"And to be honest, you don&#39;t need to know this kind of thing unless you are actually implementing as JVM.  It is not relevant to regular Java programming.","body":"And to be honest, you don&#39;t need to know this kind of thing unless you are actually implementing as JVM.  It is not relevant to regular Java programming."},{"owner":{"account_id":28218936,"reputation":21,"user_id":21569991,"display_name":"xyz xyz"},"score":0,"creation_date":1682345186,"post_id":76092334,"comment_id":134195990,"body_markdown":"@StephenC R they stored in constant pool ? Where is this constant pool located?","body":"@StephenC R they stored in constant pool ? Where is this constant pool located?"},{"owner":{"account_id":28218936,"reputation":21,"user_id":21569991,"display_name":"xyz xyz"},"score":0,"creation_date":1682345636,"post_id":76092334,"comment_id":134196079,"body_markdown":"@user16320675 Yes where is constant pool located ?","body":"@user16320675 Yes where is constant pool located ?"},{"owner":{"account_id":47283,"reputation":703817,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":0,"creation_date":1682345756,"post_id":76092334,"comment_id":134196116,"body_markdown":"@xyzxyz - That has been asked and answered already.  Please reread my previous comment and think about what &quot;neither&quot; means.   For the record, the constant pool is not in memory at all ... and it is not accessed when the application code is actually executing.   And also, read the duplink question, and people&#39;s comments on your previous (deleted) questions on this topic.","body":"@xyzxyz - That has been asked and answered already.  Please reread my previous comment and think about what &quot;neither&quot; means.   For the record, the constant pool is not in memory at all ... and it is not accessed when the application code is actually executing.   And also, read the duplink question, and people&#39;s comments on your previous (deleted) questions on this topic."},{"owner":{"account_id":28218936,"reputation":21,"user_id":21569991,"display_name":"xyz xyz"},"score":0,"creation_date":1682346086,"post_id":76092334,"comment_id":134196218,"body_markdown":"@StephenC Sure. From Java-8 permgen has been removed and method area was inside permgen earlier. So method area also has been removed or it is there somewhere?","body":"@StephenC Sure. From Java-8 permgen has been removed and method area was inside permgen earlier. So method area also has been removed or it is there somewhere?"},{"owner":{"account_id":47283,"reputation":703817,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":0,"creation_date":1682352248,"post_id":76092334,"comment_id":134197935,"body_markdown":"The bytecode and native code segments will be held in metaspace.  But ... please, please, please listen to us when we tell you that you don&#39;t need to know.  It absolutely won&#39;t make you a better programmer.  I am not going to answer any more of your questions.","body":"The bytecode and native code segments will be held in metaspace.  But ... please, please, please listen to us when we tell you that you don&#39;t need to know.  It absolutely won&#39;t make you a better programmer.  I am not going to answer any more of your questions."},{"owner":{"account_id":7423601,"reputation":18712,"user_id":5646962,"display_name":"Thomas Kl&#228;ger"},"score":0,"creation_date":1682527783,"post_id":76092334,"comment_id":134231761,"body_markdown":"The phrase _Are they stored in the .class file or in permanent generation space_ sounds as if you are expecting that they are stored either in the class file or in the permanent generation / metaspace. The truth is that both are involved: they have to be stored somewhere in the class file so that the classloader can load them. And during code execution they are stored in memory (most probably in metaspace because that is where presumable all loaded class data is stored).","body":"The phrase <i>Are they stored in the .class file or in permanent generation space</i> sounds as if you are expecting that they are stored either in the class file or in the permanent generation / metaspace. The truth is that both are involved: they have to be stored somewhere in the class file so that the classloader can load them. And during code execution they are stored in memory (most probably in metaspace because that is where presumable all loaded class data is stored)."},{"owner":{"account_id":7423601,"reputation":18712,"user_id":5646962,"display_name":"Thomas Kl&#228;ger"},"score":0,"creation_date":1682527993,"post_id":76092334,"comment_id":134231829,"body_markdown":"But note that not all literal values are equal: for some literal values there are special instructions (integer values -1 to 5, double values 0.0, 1.0 and 2.0), other can be inlined into the byte code (all byte and short values), the remaining are stored separate and referenced by the byte code.","body":"But note that not all literal values are equal: for some literal values there are special instructions (integer values -1 to 5, double values 0.0, 1.0 and 2.0), other can be inlined into the byte code (all byte and short values), the remaining are stored separate and referenced by the byte code."}],"owner":{"account_id":28218936,"reputation":21,"user_id":21569991,"display_name":"xyz xyz"},"comment_count":15,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":51,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1682344311,"answer_count":0,"score":0,"last_activity_date":1682343820,"creation_date":1682342322,"question_id":76092334,"body_markdown":"Where are integer or double literals stored in Java?\r\nAre they stored in the .class file or in permanent generation space\r\n(now in metaspace)?\r\n","title":"Storage of literals in Java","body":"<p>Where are integer or double literals stored in Java?\nAre they stored in the .class file or in permanent generation space\n(now in metaspace)?</p>\n"},{"tags":["java","hibernate","jpa","many-to-many","entity-relationship"],"comments":[{"owner":{"account_id":9571720,"reputation":6305,"user_id":7109162,"accept_rate":84,"display_name":"XtremeBaumer"},"score":0,"creation_date":1675926005,"post_id":75394989,"comment_id":133033472,"body_markdown":"`user_category` has an actual FK on the `category_id` in the database it seems. Is the same the case for the `user_id`?","body":"<code>user_category</code> has an actual FK on the <code>category_id</code> in the database it seems. Is the same the case for the <code>user_id</code>?"},{"owner":{"account_id":25845637,"reputation":534,"user_id":19580540,"display_name":"ayush"},"score":0,"creation_date":1675926647,"post_id":75394989,"comment_id":133033611,"body_markdown":"I have added a screenshot for better understanding. user_category table holds the P.K. of user and category for Many to Many relationship.","body":"I have added a screenshot for better understanding. user_category table holds the P.K. of user and category for Many to Many relationship."},{"owner":{"account_id":9571720,"reputation":6305,"user_id":7109162,"accept_rate":84,"display_name":"XtremeBaumer"},"score":0,"creation_date":1675928548,"post_id":75394989,"comment_id":133034031,"body_markdown":"The screenshot does not show any constraints? Or at least not that I can tell","body":"The screenshot does not show any constraints? Or at least not that I can tell"}],"answers":[{"tags":[],"owner":{"account_id":179640,"reputation":15442,"user_id":412446,"accept_rate":41,"display_name":"Christian Beikov"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1676020616,"creation_date":1676020616,"answer_id":75409026,"question_id":75394989,"body_markdown":"Changing the `Category#users` collections has no effect on the relationship, because that is not the owning side of it. The owning side is the one which has no use of `mappedBy`.\r\n\r\nSo if you want to remove a category, you will first have to remove the category from every `User#categories` collection.\r\n\r\nMaybe it&#39;s easier if you don&#39;t map that relationship as a `@ManyToMany` association and instead introduce an entity for the join table. Then you can use `@OneToMany` on both sides with `DELETE` cascading.","title":"Deleting referencing side entity in @ManyToMany relationship: JPA","body":"<p>Changing the <code>Category#users</code> collections has no effect on the relationship, because that is not the owning side of it. The owning side is the one which has no use of <code>mappedBy</code>.</p>\n<p>So if you want to remove a category, you will first have to remove the category from every <code>User#categories</code> collection.</p>\n<p>Maybe it's easier if you don't map that relationship as a <code>@ManyToMany</code> association and instead introduce an entity for the join table. Then you can use <code>@OneToMany</code> on both sides with <code>DELETE</code> cascading.</p>\n"},{"tags":[],"owner":{"account_id":8384565,"reputation":51,"user_id":6295381,"display_name":"AlbertOu"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1682343807,"creation_date":1682338793,"answer_id":76091806,"question_id":75394989,"body_markdown":"your entity Category should :\r\n\r\n1. remove all association from its Users;\r\n2. override hashCode() and equals() functions properly;\r\n\r\n```java\r\nclass Category{\r\n    \r\n    @ManyToMany(mappedBy = &quot;categories&quot;, ...)\r\n    Set&lt;User&gt; users = new HashSet&lt;&gt;();\r\n\r\n    @PreRemove\r\n    public void removeUsers() {\r\n        users.forEach(user-&gt;{\r\n            user.getCategories().removeIf(e-&gt;e.equals(this));\r\n        });\r\n        \r\n    }\r\n    \r\n    @Override\r\n    public boolean equals(Object o) {\r\n        if (this == o) return true;\r\n        if (!(o instanceof Category)) return false;\r\n        Category category = (Category) o;\r\n        return getId() != null &amp;&amp; getId().equals(category.getId());\r\n    }\r\n\r\n    @Override\r\n    public int hashCode() {\r\n        return Objects.hash(Category.class);\r\n    }\r\n}\r\n```\r\n\r\nit is suggested to put the deletion inside transaction, or otherwise you may end up with Exception like &quot;Multiple representations of the same entity&quot;\r\n\r\n```java\r\n@Transactional(propagation = Propagation.REQUIRED)\r\nvoid deleteCategory(Long id) {\r\n    Category category = categoryRepository.findById(id);\r\n    categoryRepository.delete(category);\r\n    log.info(&quot;deleted --&gt; {}&quot;, category);\r\n}\r\n``` ","title":"Deleting referencing side entity in @ManyToMany relationship: JPA","body":"<p>your entity Category should :</p>\n<ol>\n<li>remove all association from its Users;</li>\n<li>override hashCode() and equals() functions properly;</li>\n</ol>\n<pre class=\"lang-java prettyprint-override\"><code>class Category{\n    \n    @ManyToMany(mappedBy = &quot;categories&quot;, ...)\n    Set&lt;User&gt; users = new HashSet&lt;&gt;();\n\n    @PreRemove\n    public void removeUsers() {\n        users.forEach(user-&gt;{\n            user.getCategories().removeIf(e-&gt;e.equals(this));\n        });\n        \n    }\n    \n    @Override\n    public boolean equals(Object o) {\n        if (this == o) return true;\n        if (!(o instanceof Category)) return false;\n        Category category = (Category) o;\n        return getId() != null &amp;&amp; getId().equals(category.getId());\n    }\n\n    @Override\n    public int hashCode() {\n        return Objects.hash(Category.class);\n    }\n}\n</code></pre>\n<p>it is suggested to put the deletion inside transaction, or otherwise you may end up with Exception like &quot;Multiple representations of the same entity&quot;</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Transactional(propagation = Propagation.REQUIRED)\nvoid deleteCategory(Long id) {\n    Category category = categoryRepository.findById(id);\n    categoryRepository.delete(category);\n    log.info(&quot;deleted --&gt; {}&quot;, category);\n}\n</code></pre>\n"}],"owner":{"account_id":25845637,"reputation":534,"user_id":19580540,"display_name":"ayush"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":246,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":2,"score":2,"last_activity_date":1682343807,"creation_date":1675924231,"question_id":75394989,"body_markdown":"I am working on a Spring Boot Project in which I have used a **Many TO Many** relationship between two entities- **User** and **Category**.  \r\n**For User-**\r\n```\r\n//Set of categories a user is following\r\n    @ManyToMany(cascade = {CascadeType.DETACH,CascadeType.MERGE,CascadeType.PERSIST, CascadeType.REFRESH}, fetch = FetchType.EAGER) \r\n    @JoinTable(name = &quot;user_category&quot;, \r\n            joinColumns = @JoinColumn(\r\n                    name = &quot;user_id&quot;,              \r\n                    referencedColumnName = &quot;id&quot;),          \r\n            inverseJoinColumns = @JoinColumn(                \r\n                    name = &quot;category_id&quot;,\r\n                    referencedColumnName = &quot;categoryId&quot;))\r\n    private Set&lt;Category&gt; categories=new HashSet&lt;&gt;();\r\n```\r\n\r\n**For Category-**\r\n```\r\n// set of users who follow the category\r\n    @ManyToMany(mappedBy = &quot;categories&quot;,cascade={CascadeType.DETACH, CascadeType.MERGE, CascadeType.PERSIST, CascadeType.REFRESH})\r\n    Set&lt;User&gt; users = new HashSet&lt;&gt;();\r\n```\r\n**What I want-**  \r\nWhen I delete a **User** only user should be deleted and not the **Category**.  \r\nWhen I delete a **Category** only category should be deleted and not the **User**.  \r\n**Problem-**\r\nWhen I delete a **User**, it gets deleted successfully without affecting category. But, when I delete a **Category**, I get an error-\r\n```\r\njava.sql.SQLIntegrityConstraintViolationException: Cannot delete or update a parent row: a foreign key constraint fails (`blog_application_database`.`user_category`, CONSTRAINT `FK4x6ipr43cfvhqc3aqda6j8c2l` FOREIGN KEY (`category_id`) REFERENCES `categories` (`category_id`))\r\n```\r\nNow, to remove the associated users, in the category I use-\r\n```\r\n @PreRemove\r\n    public void removeUsers() {\r\n        System.out.println(&quot;Removing users for &quot; + this.categoryName + &quot; before deleting&quot;);\r\n        this.users=null;\r\n        this.users=new HashSet&lt;&gt;();\r\n    }\r\n```\r\nBut, the problem is not resolved.\r\n\r\n - One approach I came across from several other posts was to manually remove each and every mapping from each user (from user side) but it would be highly inefficient.  \r\nI am adding a screenshot of the db tables-\r\n[![enter image description here][1]][1]  \r\nPlease help me understand what is going wrong here and how to resolve it.\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/2wGdg.png","title":"Deleting referencing side entity in @ManyToMany relationship: JPA","body":"<p>I am working on a Spring Boot Project in which I have used a <strong>Many TO Many</strong> relationship between two entities- <strong>User</strong> and <strong>Category</strong>.<br />\n<strong>For User-</strong></p>\n<pre><code>//Set of categories a user is following\n    @ManyToMany(cascade = {CascadeType.DETACH,CascadeType.MERGE,CascadeType.PERSIST, CascadeType.REFRESH}, fetch = FetchType.EAGER) \n    @JoinTable(name = &quot;user_category&quot;, \n            joinColumns = @JoinColumn(\n                    name = &quot;user_id&quot;,              \n                    referencedColumnName = &quot;id&quot;),          \n            inverseJoinColumns = @JoinColumn(                \n                    name = &quot;category_id&quot;,\n                    referencedColumnName = &quot;categoryId&quot;))\n    private Set&lt;Category&gt; categories=new HashSet&lt;&gt;();\n</code></pre>\n<p><strong>For Category-</strong></p>\n<pre><code>// set of users who follow the category\n    @ManyToMany(mappedBy = &quot;categories&quot;,cascade={CascadeType.DETACH, CascadeType.MERGE, CascadeType.PERSIST, CascadeType.REFRESH})\n    Set&lt;User&gt; users = new HashSet&lt;&gt;();\n</code></pre>\n<p><strong>What I want-</strong><br />\nWhen I delete a <strong>User</strong> only user should be deleted and not the <strong>Category</strong>.<br />\nWhen I delete a <strong>Category</strong> only category should be deleted and not the <strong>User</strong>.<br />\n<strong>Problem-</strong>\nWhen I delete a <strong>User</strong>, it gets deleted successfully without affecting category. But, when I delete a <strong>Category</strong>, I get an error-</p>\n<pre><code>java.sql.SQLIntegrityConstraintViolationException: Cannot delete or update a parent row: a foreign key constraint fails (`blog_application_database`.`user_category`, CONSTRAINT `FK4x6ipr43cfvhqc3aqda6j8c2l` FOREIGN KEY (`category_id`) REFERENCES `categories` (`category_id`))\n</code></pre>\n<p>Now, to remove the associated users, in the category I use-</p>\n<pre><code> @PreRemove\n    public void removeUsers() {\n        System.out.println(&quot;Removing users for &quot; + this.categoryName + &quot; before deleting&quot;);\n        this.users=null;\n        this.users=new HashSet&lt;&gt;();\n    }\n</code></pre>\n<p>But, the problem is not resolved.</p>\n<ul>\n<li>One approach I came across from several other posts was to manually remove each and every mapping from each user (from user side) but it would be highly inefficient.<br />\nI am adding a screenshot of the db tables-\n<a href=\"https://i.stack.imgur.com/2wGdg.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/2wGdg.png\" alt=\"enter image description here\" /></a><br />\nPlease help me understand what is going wrong here and how to resolve it.</li>\n</ul>\n"},{"tags":["java","spring-boot","jackson"],"comments":[{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1682346054,"post_id":76092542,"comment_id":134196206,"body_markdown":"Parameters are bound as is, so unless you replace that part of the data binding framework that is what it is. Rename the field and property to `custom_file` is the easiest and mimics your actual form as well.","body":"Parameters are bound as is, so unless you replace that part of the data binding framework that is what it is. Rename the field and property to <code>custom_file</code> is the easiest and mimics your actual form as well."},{"owner":{"account_id":6872186,"reputation":402,"user_id":5282089,"display_name":"Jedupont"},"score":0,"creation_date":1682347326,"post_id":76092542,"comment_id":134196597,"body_markdown":"Ok thanks it&#39;s clearer then, but in this case the solution may be to send a json next to the multipart, is it a good practice ?","body":"Ok thanks it&#39;s clearer then, but in this case the solution may be to send a json next to the multipart, is it a good practice ?"},{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1682403560,"post_id":76092542,"comment_id":134205245,"body_markdown":"What to send is a opinionated question/answer so I&#39;m going to refrain from answering that.","body":"What to send is a opinionated question/answer so I&#39;m going to refrain from answering that."}],"owner":{"account_id":6872186,"reputation":402,"user_id":5282089,"display_name":"Jedupont"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":90,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1682343683,"creation_date":1682343683,"question_id":76092542,"body_markdown":"I have a Restful API and I want to upload a file and send other data at the same time. I use multipart-data because it seems more optimized than sending a base64.\r\n\r\nBut just like json I would like the parameters sent in my request to be in snake case. For now, I am obliged to send them in camel case as their definition in the class `MyCustomRequest`.\r\n\r\n```\r\n@PutMapping(consumes = MediaType.MULTIPART_FORM_DATA_VALUE)\r\npublic ResponseEntity&lt;Object&gt; send(\r\n    @PathVariable Integer id,\r\n    @Valid MyCustomRequest request\r\n) {\r\n    //\r\n}\r\n```\r\n\r\nFor example if I send `custom_file`, it will not be deserialized correctly to `customFile`. And @JsonProperty does not work with multipart.\r\n\r\n```\r\n@Data\r\npublic class MyCustomRequest   {\r\n    @JsonProperty(&#39;custom_file&#39;)\r\n    @NotNull\r\n    private MultipartFile customFile;\r\n\r\n    @JsonProperty(&#39;time_saved&#39;)\r\n    @Size(max = 1000)\r\n    private String timeSaved;\r\n\r\n    @Size(max = 1000)\r\n    private String comment;\r\n}\r\n```\r\n\r\nAny idea please? I want to respect the snake case everywhere to keep some consistency on the front-end and especially with Typescript typings.","title":"Spring boot - multipart field serialization from snake case not working","body":"<p>I have a Restful API and I want to upload a file and send other data at the same time. I use multipart-data because it seems more optimized than sending a base64.</p>\n<p>But just like json I would like the parameters sent in my request to be in snake case. For now, I am obliged to send them in camel case as their definition in the class <code>MyCustomRequest</code>.</p>\n<pre><code>@PutMapping(consumes = MediaType.MULTIPART_FORM_DATA_VALUE)\npublic ResponseEntity&lt;Object&gt; send(\n    @PathVariable Integer id,\n    @Valid MyCustomRequest request\n) {\n    //\n}\n</code></pre>\n<p>For example if I send <code>custom_file</code>, it will not be deserialized correctly to <code>customFile</code>. And @JsonProperty does not work with multipart.</p>\n<pre><code>@Data\npublic class MyCustomRequest   {\n    @JsonProperty('custom_file')\n    @NotNull\n    private MultipartFile customFile;\n\n    @JsonProperty('time_saved')\n    @Size(max = 1000)\n    private String timeSaved;\n\n    @Size(max = 1000)\n    private String comment;\n}\n</code></pre>\n<p>Any idea please? I want to respect the snake case everywhere to keep some consistency on the front-end and especially with Typescript typings.</p>\n"},{"tags":["java","elasticsearch","opensearch"],"comments":[{"owner":{"account_id":5843921,"reputation":210855,"user_id":4604579,"display_name":"Val"},"score":0,"creation_date":1682345297,"post_id":76092523,"comment_id":134196011,"body_markdown":"It looks like your `document` variable is a string while [it should](https://github.com/opensearch-project/opensearch-java/blob/main/java-client/src/main/java/org/opensearch/client/opensearch/core/UpdateRequest.java#L507) be a `TPartialDocument` instead","body":"It looks like your <code>document</code> variable is a string while <a href=\"https://github.com/opensearch-project/opensearch-java/blob/main/java-client/src/main/java/org/opensearch/client/opensearch/core/UpdateRequest.java#L507\" rel=\"nofollow noreferrer\">it should</a> be a <code>TPartialDocument</code> instead"},{"owner":{"account_id":70864,"reputation":1205,"user_id":205110,"accept_rate":80,"display_name":"Reza M."},"score":0,"creation_date":1682355059,"post_id":76092523,"comment_id":134198549,"body_markdown":"It&#39;s generic type ?","body":"It&#39;s generic type ?"},{"owner":{"account_id":5843921,"reputation":210855,"user_id":4604579,"display_name":"Val"},"score":0,"creation_date":1682355342,"post_id":76092523,"comment_id":134198626,"body_markdown":"Does this help? https://stackoverflow.com/a/72026251/4604579","body":"Does this help? <a href=\"https://stackoverflow.com/a/72026251/4604579\">stackoverflow.com/a/72026251/4604579</a>"},{"owner":{"account_id":70864,"reputation":1205,"user_id":205110,"accept_rate":80,"display_name":"Reza M."},"score":0,"creation_date":1682359104,"post_id":76092523,"comment_id":134199485,"body_markdown":"No, unfortunately, all of them required an Object class. The best I can do is a Map&lt;String, Object&gt; .... I will have to probably go and change a lot of code to comply","body":"No, unfortunately, all of them required an Object class. The best I can do is a Map&lt;String, Object&gt; .... I will have to probably go and change a lot of code to comply"}],"owner":{"account_id":70864,"reputation":1205,"user_id":205110,"accept_rate":80,"display_name":"Reza M."},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":594,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1682343557,"creation_date":1682343557,"question_id":76092523,"body_markdown":"I am upgrading some legacy code to utilize OpenSearch Java Api Client v1.0.0.\r\nI am limited on version because of jdk 11 required.\r\n\r\nI would like to do something similar: \r\n\r\n```\r\nPOST xx/_update/123\r\n{\r\n  &quot;doc&quot;: {\r\n  \t&quot;dateLastModified&quot;:1682281110874,\r\n  \t&quot;FR&quot;:&quot;sss&quot;,\r\n  \t&quot;someOtherId&quot;:12,\r\n  \t&quot;EN&quot;:&quot;sss&quot;\r\n  }\r\n}\r\n```\r\n\r\nHere is the code I believed should of worked but I believe I am not allowed to use String\r\n\r\n```\r\n    public void updateAsync(@NotNull PK id, @NotNull String document) throws IOException {\r\n        \r\n        openSearchAsyncClient.update(new UpdateRequest.Builder&lt;T, String&gt;()\r\n                                         .index(index)\r\n                                         .id(convertId(id))\r\n                                         .doc(document)\r\n                                         .build(), targetType);\r\n}\r\n```\r\n\r\nI cannot seem to pass to it any other types of document than the Data Class.\r\nTo make it work with old code, I need to be able to provide it a string.\r\n\r\nI cannot find any documentations on Update.\r\n\r\nI get a OpenSearchException with this detailed message:\r\n\r\n```\r\nRequest failed: [x_content_parse_exception] [1:8] [UpdateRequest] doc doesn’t support values of type: VALUE_STRING\r\n```\r\n\r\n\r\n","title":"OpenSearch how to update with Partial Document","body":"<p>I am upgrading some legacy code to utilize OpenSearch Java Api Client v1.0.0.\nI am limited on version because of jdk 11 required.</p>\n<p>I would like to do something similar:</p>\n<pre><code>POST xx/_update/123\n{\n  &quot;doc&quot;: {\n    &quot;dateLastModified&quot;:1682281110874,\n    &quot;FR&quot;:&quot;sss&quot;,\n    &quot;someOtherId&quot;:12,\n    &quot;EN&quot;:&quot;sss&quot;\n  }\n}\n</code></pre>\n<p>Here is the code I believed should of worked but I believe I am not allowed to use String</p>\n<pre><code>    public void updateAsync(@NotNull PK id, @NotNull String document) throws IOException {\n        \n        openSearchAsyncClient.update(new UpdateRequest.Builder&lt;T, String&gt;()\n                                         .index(index)\n                                         .id(convertId(id))\n                                         .doc(document)\n                                         .build(), targetType);\n}\n</code></pre>\n<p>I cannot seem to pass to it any other types of document than the Data Class.\nTo make it work with old code, I need to be able to provide it a string.</p>\n<p>I cannot find any documentations on Update.</p>\n<p>I get a OpenSearchException with this detailed message:</p>\n<pre><code>Request failed: [x_content_parse_exception] [1:8] [UpdateRequest] doc doesn’t support values of type: VALUE_STRING\n</code></pre>\n"},{"tags":["java","spring","spring-boot","spring-security"],"owner":{"account_id":13492843,"reputation":151,"user_id":9734514,"display_name":"Nkalian"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":32,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1682371531,"answer_count":0,"score":0,"last_activity_date":1682343240,"creation_date":1682343240,"question_id":76092470,"body_markdown":"I&#39;m trying to migrate an old project from Spring 5.3.X to Spring Boot 3.0.6 and running into an issue with our deprecated OAuth server ( self-built). It&#39;s implemented so far that you can&#39;t get roles / scopes of the user with the JWT or you can load the roles / scopes from a database - No, you have to call a protected REST endpoint of the OAuth server to get the information. I can still do that with Spring 5.3.x using `org.springframework.security.oauth2.client.OAuth2RestTemplate`. But this class does not exist anymore with Spring Boot 3.0.6. What options do I have now to call the protected REST endpoint of the OAuth server?","title":"Migration to Spring 6 - How can I replace OAuth2RestTemplate.java to get user roles from OAuth?","body":"<p>I'm trying to migrate an old project from Spring 5.3.X to Spring Boot 3.0.6 and running into an issue with our deprecated OAuth server ( self-built). It's implemented so far that you can't get roles / scopes of the user with the JWT or you can load the roles / scopes from a database - No, you have to call a protected REST endpoint of the OAuth server to get the information. I can still do that with Spring 5.3.x using <code>org.springframework.security.oauth2.client.OAuth2RestTemplate</code>. But this class does not exist anymore with Spring Boot 3.0.6. What options do I have now to call the protected REST endpoint of the OAuth server?</p>\n"},{"tags":["java","spring","spring-security"],"owner":{"account_id":28150049,"reputation":1,"user_id":21511784,"display_name":"Varsha Bhade"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":36,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1682343216,"creation_date":1680020987,"question_id":75868790,"body_markdown":"I am trying to cache the authorisation filter evaluation result. I am using `GlobalMethodSecurityConfiguration` for security configuration and found this `PermissionCacheOptimizer` of `MethodSecurityExpressionHandler` in the documentation, but I was unable to find a proper resource on how to use it or figure it out on my own.\r\n\r\nI am able to create the `PermissionCacheOptimizer` object by implementing it but not sure how and where to use it. \r\n\r\nHow can I use it to cache this result?","title":"How do I use PermissionCacheOptimizer to cache a result in Spring Boot?","body":"<p>I am trying to cache the authorisation filter evaluation result. I am using <code>GlobalMethodSecurityConfiguration</code> for security configuration and found this <code>PermissionCacheOptimizer</code> of <code>MethodSecurityExpressionHandler</code> in the documentation, but I was unable to find a proper resource on how to use it or figure it out on my own.</p>\n<p>I am able to create the <code>PermissionCacheOptimizer</code> object by implementing it but not sure how and where to use it.</p>\n<p>How can I use it to cache this result?</p>\n"},{"tags":["java","jpa","ejb-3.0"],"comments":[{"owner":{"account_id":26957,"reputation":564361,"user_id":70604,"display_name":"Pascal Thivent"},"score":0,"creation_date":1268625721,"post_id":2444962,"comment_id":2431640,"body_markdown":"*&quot;my code needs to access the table where I specify it to read.&quot;* could you please clarify what you&#39;re trying to do.","body":"<i>&quot;my code needs to access the table where I specify it to read.&quot;</i> could you please clarify what you&#39;re trying to do."},{"owner":{"account_id":82500,"reputation":38454,"user_id":231917,"accept_rate":98,"display_name":"zengr"},"score":0,"creation_date":1268626127,"post_id":2444962,"comment_id":2431654,"body_markdown":"Please see my comment to answer 1. Thanks.","body":"Please see my comment to answer 1. Thanks."},{"owner":{"account_id":82500,"reputation":38454,"user_id":231917,"accept_rate":98,"display_name":"zengr"},"score":1,"creation_date":1268626474,"post_id":2444962,"comment_id":2431676,"body_markdown":"To rephrase: I need dynamic schema. Where the Table is created on the fly.","body":"To rephrase: I need dynamic schema. Where the Table is created on the fly."},{"owner":{"account_id":43546,"reputation":33497,"user_id":127359,"accept_rate":85,"display_name":"Arthur Ronald"},"score":0,"creation_date":1268701361,"post_id":2444962,"comment_id":2439189,"body_markdown":"Do you want to create a new Table at runtime ???","body":"Do you want to create a new Table at runtime ???"},{"owner":{"account_id":404649,"reputation":57172,"user_id":773113,"accept_rate":72,"display_name":"Mike Nakis"},"score":2,"creation_date":1375571276,"post_id":2444962,"comment_id":26387974,"body_markdown":"Whenever I hear of a db schema containing a variable number of tables I know someone is missing fundamental relational database principles.","body":"Whenever I hear of a db schema containing a variable number of tables I know someone is missing fundamental relational database principles."},{"owner":{"account_id":8060137,"reputation":397,"user_id":6075912,"accept_rate":100,"display_name":"Sadashiv"},"score":0,"creation_date":1580732322,"post_id":2444962,"comment_id":106181815,"body_markdown":"@zengr how did u solve this problem.\nI am having the same requirements for my project.","body":"@zengr how did u solve this problem. I am having the same requirements for my project."}],"answers":[{"tags":[],"owner":{"account_id":18600,"reputation":39591,"user_id":42769,"accept_rate":95,"display_name":"Adeel Ansari"},"down_vote_count":1,"up_vote_count":10,"is_accepted":true,"score":9,"last_activity_date":1430102491,"creation_date":1268625455,"answer_id":2445004,"question_id":2444962,"body_markdown":"You can do something like this, if thats your concern, I guess. **Never tried it, its just a wild guess**. But thats the usual practice -- I follow for Named Queries; yes, that&#39;s a different thing altogether.\r\n\r\n    @Entity\r\n    @Table(name = Database.tableName)\r\n    public class Database implements Serializable {\r\n        public static final String tableName = &quot;TABLE_1&quot;;\r\n        ...............\r\n    }\r\n\r\nBut I don&#39;t see why anyone would do that. Could you tell us what are you up to? Why you have few tables exactly same definition?\r\n\r\n**[Edited]**\r\n\r\n&gt; I tried your solution. It did not\r\n&gt; work, it says: The value for\r\n&gt; annotation attribute Table.name must\r\n&gt; be a constant expression.\r\n\r\nSo, isn&#39;t that clear enough? I mean you can&#39;t do that. And I believe its quite logical. If you want Hibernate to generate your schema then you can define all the entities you want, in the schema, and with the appropriate relationships.","title":"In @Table(name = &quot;tableName&quot;) - make &quot;tableName&quot; a variable in JPA","body":"<p>You can do something like this, if thats your concern, I guess. <strong>Never tried it, its just a wild guess</strong>. But thats the usual practice -- I follow for Named Queries; yes, that's a different thing altogether.</p>\n\n<pre><code>@Entity\n@Table(name = Database.tableName)\npublic class Database implements Serializable {\n    public static final String tableName = \"TABLE_1\";\n    ...............\n}\n</code></pre>\n\n<p>But I don't see why anyone would do that. Could you tell us what are you up to? Why you have few tables exactly same definition?</p>\n\n<p><strong>[Edited]</strong></p>\n\n<blockquote>\n  <p>I tried your solution. It did not\n  work, it says: The value for\n  annotation attribute Table.name must\n  be a constant expression.</p>\n</blockquote>\n\n<p>So, isn't that clear enough? I mean you can't do that. And I believe its quite logical. If you want Hibernate to generate your schema then you can define all the entities you want, in the schema, and with the appropriate relationships.</p>\n"},{"tags":[],"owner":{"account_id":26957,"reputation":564361,"user_id":70604,"display_name":"Pascal Thivent"},"down_vote_count":1,"up_vote_count":4,"is_accepted":false,"score":3,"last_activity_date":1268627881,"creation_date":1268627881,"answer_id":2445109,"question_id":2444962,"body_markdown":"Specifying the table name at runtime is not possible, this is simply not how JPA works (and I&#39;m still not sure to get your requirement). Either map different entities on your set of tables and run various queries or build them dynamically (maybe using the Criteria API) depending on the input from the client side **or** use something else than JPA (like iBATIS).\r\n\r\n\r\n  [1]: http://stackoverflow.com/questions/906671/jpa-how-do-i-specify-the-table-name-corresponding-to-a-class-at-runtime","title":"In @Table(name = &quot;tableName&quot;) - make &quot;tableName&quot; a variable in JPA","body":"<p>Specifying the table name at runtime is not possible, this is simply not how JPA works (and I'm still not sure to get your requirement). Either map different entities on your set of tables and run various queries or build them dynamically (maybe using the Criteria API) depending on the input from the client side <strong>or</strong> use something else than JPA (like iBATIS).</p>\n"},{"tags":[],"owner":{"account_id":668476,"reputation":18892,"user_id":504956,"accept_rate":69,"display_name":"V G"},"down_vote_count":1,"up_vote_count":4,"is_accepted":false,"score":3,"last_activity_date":1360604842,"creation_date":1360604842,"answer_id":14817815,"question_id":2444962,"body_markdown":"If you want only to reference/read the table name, it is possible as in the code below. If you want to change, it is not possible as Pascal said.\r\n\r\n\r\n\r\n    @Entity\r\n    @Table(name = Database.tableName)\r\n    public class Database implements Serializable {\r\n        public static final String tableName = &quot;TABLE_1&quot;;//this variable you can reference in other portions of your code. Of course you cannot change it.\r\n        ...............\r\n    }\r\n","title":"In @Table(name = &quot;tableName&quot;) - make &quot;tableName&quot; a variable in JPA","body":"<p>If you want only to reference/read the table name, it is possible as in the code below. If you want to change, it is not possible as Pascal said.</p>\n\n<pre><code>@Entity\n@Table(name = Database.tableName)\npublic class Database implements Serializable {\n    public static final String tableName = \"TABLE_1\";//this variable you can reference in other portions of your code. Of course you cannot change it.\n    ...............\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3233411,"reputation":135,"user_id":2728125,"accept_rate":100,"display_name":"Alex85"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1404721945,"creation_date":1404720618,"answer_id":24605804,"question_id":2444962,"body_markdown":"If you want to select data from different tables, \r\n\r\nthen you can use :\r\n\r\n`@Subselect(&quot;&quot;)` \r\n\r\ninstead of :\r\n\r\n`@Table(name = &quot;tableName&quot;)`.","title":"In @Table(name = &quot;tableName&quot;) - make &quot;tableName&quot; a variable in JPA","body":"<p>If you want to select data from different tables, </p>\n\n<p>then you can use :</p>\n\n<p><code>@Subselect(\"\")</code> </p>\n\n<p>instead of :</p>\n\n<p><code>@Table(name = \"tableName\")</code>.</p>\n"},{"tags":[],"owner":{"account_id":10183722,"reputation":496,"user_id":7519543,"display_name":"h10g"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1578281029,"creation_date":1578281029,"answer_id":59606316,"question_id":2444962,"body_markdown":"I have a workaround.\r\n&lt;br&gt;\r\nIt uses javax.persistence.EntityManager and String.format to do that.\r\n\r\n\r\n```Java\r\npackage com.example.test.dao;\r\n\r\nimport org.springframework.beans.factory.annotation.Autowired;\r\nimport org.springframework.stereotype.Component;\r\n\r\nimport java.util.List;\r\nimport javax.persistence.EntityManager;\r\n\r\n@Component\r\npublic class SomeDao {\r\n    @Autowired\r\n    EntityManager em;\r\n\r\n    public List&lt;?&gt; listFoodMoneyDateOfPayment(int departmentId, String sumKey, String tableName) {\r\n        String s = &quot;SELECT SUM(%s) AS money, CONCAT(YEAR(apply_time), &#39;-&#39;, MONTH(apply_time)) AS yearmonth &quot; +\r\n                &quot;FROM (%s) WHERE department_id = %d GROUP BY yearmonth&quot;;\r\n        String sql = String.format(s, sumKey, tableName, departmentId);\r\n        System.out.println(sql);\r\n\r\n        List&lt;?&gt; test = em.createNativeQuery(sql).getResultList();\r\n\r\n        return test;\r\n    }\r\n}\r\n\r\n```\r\n\r\n\r\nThe invoke code is that:\r\n```\r\n@RestController\r\n@RequestMapping(&quot;/api&quot;)\r\npublic class TestController {\r\n\r\n    @Autowired\r\n    private SomeDao dao;\r\n\r\n    @RequestMapping(&quot;/test2&quot;)\r\n    public HttpEntity test2() {\r\n        var l = dao.listFoodMoneyDateOfPayment(12, &quot;food_payment&quot;, &quot;payment_application&quot;);\r\n        System.out.println(l.getClass());\r\n        System.out.println(JSON.toJSONString(l));\r\n        return ResultBean.success();\r\n    }\r\n}\r\n\r\n```\r\n\r\nAnd it works well. &lt;br&gt;\r\nBut you should check the arguments passed in.","title":"In @Table(name = &quot;tableName&quot;) - make &quot;tableName&quot; a variable in JPA","body":"<p>I have a workaround.\n<br>\nIt uses javax.persistence.EntityManager and String.format to do that.</p>\n\n<pre><code>package com.example.test.dao;\n\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.stereotype.Component;\n\nimport java.util.List;\nimport javax.persistence.EntityManager;\n\n@Component\npublic class SomeDao {\n    @Autowired\n    EntityManager em;\n\n    public List&lt;?&gt; listFoodMoneyDateOfPayment(int departmentId, String sumKey, String tableName) {\n        String s = \"SELECT SUM(%s) AS money, CONCAT(YEAR(apply_time), '-', MONTH(apply_time)) AS yearmonth \" +\n                \"FROM (%s) WHERE department_id = %d GROUP BY yearmonth\";\n        String sql = String.format(s, sumKey, tableName, departmentId);\n        System.out.println(sql);\n\n        List&lt;?&gt; test = em.createNativeQuery(sql).getResultList();\n\n        return test;\n    }\n}\n\n</code></pre>\n\n<p>The invoke code is that:</p>\n\n<pre><code>@RestController\n@RequestMapping(\"/api\")\npublic class TestController {\n\n    @Autowired\n    private SomeDao dao;\n\n    @RequestMapping(\"/test2\")\n    public HttpEntity test2() {\n        var l = dao.listFoodMoneyDateOfPayment(12, \"food_payment\", \"payment_application\");\n        System.out.println(l.getClass());\n        System.out.println(JSON.toJSONString(l));\n        return ResultBean.success();\n    }\n}\n\n</code></pre>\n\n<p>And it works well. <br>\nBut you should check the arguments passed in.</p>\n"},{"tags":[],"owner":{"account_id":18984215,"reputation":1,"user_id":13854940,"display_name":"Pavan Kumar"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1682342866,"creation_date":1682342866,"answer_id":76092432,"question_id":2444962,"body_markdown":"**We can leverage interface constants and initialize at annotation**\r\n\r\nThis is possible because all interface variable are by default constants.\r\n\r\n```Java\r\ninterface DomainPropertiesHelper {\r\n String TABLE_NAME = &quot;DB_TABLE&quot;;\r\n} \r\n\r\n\r\n@Entity\r\n@Table(name = DomainPropertiesHelper.TABLE_NAME)\r\nclass Database implements Serializable {\r\n @Id\r\n private Long id;\r\n}\r\n```","title":"In @Table(name = &quot;tableName&quot;) - make &quot;tableName&quot; a variable in JPA","body":"<p><strong>We can leverage interface constants and initialize at annotation</strong></p>\n<p>This is possible because all interface variable are by default constants.</p>\n<pre><code>interface DomainPropertiesHelper {\n String TABLE_NAME = &quot;DB_TABLE&quot;;\n} \n\n\n@Entity\n@Table(name = DomainPropertiesHelper.TABLE_NAME)\nclass Database implements Serializable {\n @Id\n private Long id;\n}\n</code></pre>\n"}],"owner":{"account_id":82500,"reputation":38454,"user_id":231917,"accept_rate":98,"display_name":"zengr"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":70438,"favorite_count":0,"down_vote_count":1,"up_vote_count":18,"accepted_answer_id":2445004,"answer_count":6,"score":17,"last_activity_date":1682342866,"creation_date":1268624548,"question_id":2444962,"body_markdown":"I am using JPA and I need to make the &quot;tableName&quot; a variable. \r\n\r\nIn a database, I have many tables, and my code needs to access the table where I specify it to read.\r\n\r\n    @Entity\r\n    @Table(name = &quot;tableName&quot;)\r\n    public class Database implements Serializable {...............}\r\n\r\nAny ideas?","title":"In @Table(name = &quot;tableName&quot;) - make &quot;tableName&quot; a variable in JPA","body":"<p>I am using JPA and I need to make the \"tableName\" a variable. </p>\n\n<p>In a database, I have many tables, and my code needs to access the table where I specify it to read.</p>\n\n<pre><code>@Entity\n@Table(name = \"tableName\")\npublic class Database implements Serializable {...............}\n</code></pre>\n\n<p>Any ideas?</p>\n"},{"tags":["java","azure","web-services","cxf","jax-ws"],"owner":{"account_id":1041234,"reputation":1441,"user_id":1047226,"accept_rate":70,"display_name":"hell_storm2004"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":62,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1682342859,"creation_date":1682342859,"question_id":76092429,"body_markdown":"First of all a little bit of context. We have application in Azure and running on Java/Tomcat. We use SOAP webservices using Apache CXF. We have an interfacing application, who are in the process of migrating to Azure. So for integration tests, they provided us with their Azure URL that we need to connect to. The code uses MSAL4J too. \r\n\r\nBut every time we try to connect to their URL we are getting the error:\r\n\r\n    Unable to tunnel through proxy. Proxy returns &quot;HTTP/1.1 503 Service Unavailable&quot;\r\n\r\nThe code is written currently like:\r\n\r\n    public void init() throws Exception {\r\n    \t\r\n    \t// Set the security handler\r\n    \tgetService().setHandlerResolver(new HandlerResolverImpl());\r\n    \r\n    \t// Setting endpoint URL and timeout...\r\n    \tgetBindingProvider().getRequestContext().put(&quot;javax.xml.ws.client.receiveTimeout&quot;, connectTimeout);\r\n    \tgetBindingProvider().getRequestContext().put(&quot;javax.xml.ws.client.connectionTimeout&quot;, connectTimeout);\r\n    \tgetBindingProvider().getRequestContext().put(BindingProvider.ENDPOINT_ADDRESS_PROPERTY, endPointUrl);\r\n    \r\n    \tMap&lt;String, List&lt;String&gt;&gt; headers = new HashMap&lt;String, List&lt;String&gt;&gt;();\r\n    \r\n    \theaders.put(&quot;Content-Type&quot;, Collections.singletonList(&quot;application/soap+xml&quot;));\r\n    \theaders.put(Message.ENCODING, Collections.singletonList(&quot;UTF-8&quot;));\r\n    \r\n    \t// Get the Azure Access Token\r\n    \tString token = null;\r\n    \r\n    \ttry {\r\n    \r\n    \t\tgetLogger().debug(&quot;Acquiring Token for Azure Auth.&quot;);\r\n    \r\n    \t\tIClientCredential iClientCredential = ClientCredentialFactory.createFromSecret(AppInit.getProperty(&quot;m3.clientSecret&quot;));\r\n    \r\n    \t\tConfidentialClientApplication confidentialClientApplication = ConfidentialClientApplication.builder(AppInit.getProperty(&quot;m3.appID&quot;), iClientCredential).authority(AppInit.getProperty(&quot;m3.authority&quot;)).build();\r\n    \r\n    \t\tClientCredentialParameters clientCredentialParameters = ClientCredentialParameters.builder(Collections.singleton(AppInit.getProperty(&quot;m3.scope&quot;))).build();\r\n    \r\n    \t\tCompletableFuture&lt;IAuthenticationResult&gt; completableFuture = confidentialClientApplication.acquireToken(clientCredentialParameters);\r\n    \r\n    \t\tIAuthenticationResult iAuthenticationResult = completableFuture.get();\r\n    \r\n    \t\tgetLogger().debug(&quot;Calling Azure Auth URL to get the token.&quot;);\r\n    \r\n    \t\tString token = iAuthenticationResult.accessToken();\r\n    \r\n    \t\tif (token == null || token.isEmpty()) {\r\n    \r\n    \t\t\tgetLogger().info(&quot;Empty Token received.&quot;);\r\n    \r\n    \t\t\tthrow new Exception(&quot;Unable to aquire token for Azure!&quot;);\r\n    \t\t}\r\n    \r\n    \t\tgetLogger().debug(&quot;Token Acquired.&quot;);\r\n    \r\n    \t} catch (Exception e) {\r\n    \r\n    \t\te.printStackTrace();\r\n    \t\t\r\n    \t\tthrow e;\r\n    \t}\r\n    \r\n    \t// Set the token in the header.\r\n    \theaders.put(&quot;Authorization&quot;, Collections.singletonList(&quot;Bearer &quot; + token));\r\n    \r\n    \tgetLogger().debug(&quot;Token Set in the request header.&quot;);\r\n    \r\n    \tgetBindingProvider().getRequestContext().put(MessageContext.HTTP_REQUEST_HEADERS, headers);\r\n    }\r\n\r\n\r\nThe suggestion was to bypass the proxy that is used in the environment. \r\n\r\nCan you please tell me how do I bypass the proxy in the Java Code? Any pointers would be helpful.","title":"Bypass Proxy WebServices Call (Apache CXF/Azure)","body":"<p>First of all a little bit of context. We have application in Azure and running on Java/Tomcat. We use SOAP webservices using Apache CXF. We have an interfacing application, who are in the process of migrating to Azure. So for integration tests, they provided us with their Azure URL that we need to connect to. The code uses MSAL4J too.</p>\n<p>But every time we try to connect to their URL we are getting the error:</p>\n<pre><code>Unable to tunnel through proxy. Proxy returns &quot;HTTP/1.1 503 Service Unavailable&quot;\n</code></pre>\n<p>The code is written currently like:</p>\n<pre><code>public void init() throws Exception {\n    \n    // Set the security handler\n    getService().setHandlerResolver(new HandlerResolverImpl());\n\n    // Setting endpoint URL and timeout...\n    getBindingProvider().getRequestContext().put(&quot;javax.xml.ws.client.receiveTimeout&quot;, connectTimeout);\n    getBindingProvider().getRequestContext().put(&quot;javax.xml.ws.client.connectionTimeout&quot;, connectTimeout);\n    getBindingProvider().getRequestContext().put(BindingProvider.ENDPOINT_ADDRESS_PROPERTY, endPointUrl);\n\n    Map&lt;String, List&lt;String&gt;&gt; headers = new HashMap&lt;String, List&lt;String&gt;&gt;();\n\n    headers.put(&quot;Content-Type&quot;, Collections.singletonList(&quot;application/soap+xml&quot;));\n    headers.put(Message.ENCODING, Collections.singletonList(&quot;UTF-8&quot;));\n\n    // Get the Azure Access Token\n    String token = null;\n\n    try {\n\n        getLogger().debug(&quot;Acquiring Token for Azure Auth.&quot;);\n\n        IClientCredential iClientCredential = ClientCredentialFactory.createFromSecret(AppInit.getProperty(&quot;m3.clientSecret&quot;));\n\n        ConfidentialClientApplication confidentialClientApplication = ConfidentialClientApplication.builder(AppInit.getProperty(&quot;m3.appID&quot;), iClientCredential).authority(AppInit.getProperty(&quot;m3.authority&quot;)).build();\n\n        ClientCredentialParameters clientCredentialParameters = ClientCredentialParameters.builder(Collections.singleton(AppInit.getProperty(&quot;m3.scope&quot;))).build();\n\n        CompletableFuture&lt;IAuthenticationResult&gt; completableFuture = confidentialClientApplication.acquireToken(clientCredentialParameters);\n\n        IAuthenticationResult iAuthenticationResult = completableFuture.get();\n\n        getLogger().debug(&quot;Calling Azure Auth URL to get the token.&quot;);\n\n        String token = iAuthenticationResult.accessToken();\n\n        if (token == null || token.isEmpty()) {\n\n            getLogger().info(&quot;Empty Token received.&quot;);\n\n            throw new Exception(&quot;Unable to aquire token for Azure!&quot;);\n        }\n\n        getLogger().debug(&quot;Token Acquired.&quot;);\n\n    } catch (Exception e) {\n\n        e.printStackTrace();\n        \n        throw e;\n    }\n\n    // Set the token in the header.\n    headers.put(&quot;Authorization&quot;, Collections.singletonList(&quot;Bearer &quot; + token));\n\n    getLogger().debug(&quot;Token Set in the request header.&quot;);\n\n    getBindingProvider().getRequestContext().put(MessageContext.HTTP_REQUEST_HEADERS, headers);\n}\n</code></pre>\n<p>The suggestion was to bypass the proxy that is used in the environment.</p>\n<p>Can you please tell me how do I bypass the proxy in the Java Code? Any pointers would be helpful.</p>\n"},{"tags":["java","android","kotlin","https"],"comments":[{"owner":{"account_id":16768304,"reputation":8503,"user_id":12121419,"display_name":"blackapps"},"score":1,"creation_date":1682343587,"post_id":76092411,"comment_id":134195530,"body_markdown":"http traffic is default impossible, blocked. Only when you mess around with clear text traffic or network config you can allow it.","body":"http traffic is default impossible, blocked. Only when you mess around with clear text traffic or network config you can allow it."},{"owner":{"account_id":169667,"reputation":14696,"user_id":395869,"accept_rate":51,"display_name":"toto_tata"},"score":0,"creation_date":1682344070,"post_id":76092411,"comment_id":134195660,"body_markdown":"Thanks. It is the feeling I had, but was not sure. Thanks.","body":"Thanks. It is the feeling I had, but was not sure. Thanks."},{"owner":{"account_id":2755641,"reputation":8688,"user_id":2373819,"display_name":"Andrew"},"score":0,"creation_date":1682348366,"post_id":76092411,"comment_id":134196892,"body_markdown":"clear text traffic is blocked by default only on Android 9 or higher, so you still might want to configure old Android version to block it. https://developer.android.com/training/articles/security-config#CleartextTrafficPermitted","body":"clear text traffic is blocked by default only on Android 9 or higher, so you still might want to configure old Android version to block it. <a href=\"https://developer.android.com/training/articles/security-config#CleartextTrafficPermitted\" rel=\"nofollow noreferrer\">developer.android.com/training/articles/&hellip;</a>"}],"owner":{"account_id":169667,"reputation":14696,"user_id":395869,"accept_rate":51,"display_name":"toto_tata"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":68,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1682342723,"creation_date":1682342723,"question_id":76092411,"body_markdown":"How should I setup my manifest and network_security_config.xml file (and other files?) to forbid http traffic ? I want to allow only https traffic (I use many https APIs from third party providers, but no http APIs ; for security reasons, I want to make http connections impossible).\r\n\r\nThanks","title":"How to forbid non https traffic in my android app?","body":"<p>How should I setup my manifest and network_security_config.xml file (and other files?) to forbid http traffic ? I want to allow only https traffic (I use many https APIs from third party providers, but no http APIs ; for security reasons, I want to make http connections impossible).</p>\n<p>Thanks</p>\n"},{"tags":["java","regex","regex-lookarounds"],"comments":[{"owner":{"account_id":212394,"reputation":176424,"user_id":465183,"accept_rate":77,"display_name":"Gilles Qu&#233;not"},"score":0,"creation_date":1682264635,"post_id":76079819,"comment_id":134184349,"body_markdown":"If you have specific requirements:`Java`, **it should have been added from the beginning in your original post**. You waste my time I spent to make you a complete solution. Very low post quality. Please take a look at [how to format my code block](https://meta.stackexchange.com/questions/22186/how-do-i-format-my-code-blocks)\n\nI edited for you this time.","body":"If you have specific requirements:<code>Java</code>, <b>it should have been added from the beginning in your original post</b>. You waste my time I spent to make you a complete solution. Very low post quality. Please take a look at <a href=\"https://meta.stackexchange.com/questions/22186/how-do-i-format-my-code-blocks\">how to format my code block</a>  I edited for you this time."},{"owner":{"account_id":13710980,"reputation":13,"user_id":9893356,"display_name":"user9893356"},"score":0,"creation_date":1682273109,"post_id":76079819,"comment_id":134185527,"body_markdown":"Sorry for your time wasting, but I haven`t got much experience in regex (otherwise I would know how to solve this case), and this is the reason why I have not point my platform in my post. But now I think someone with much experience SHOULD KNOW that platform matters before waste his time for giving an answer that is not acceptable for &quot;all possible cases&quot; (\\K).\nBut thank you very much in any case, I have learned a new feature that some day can be on place.\nBy the way, I have edited my post adding java-platform, and dont see it.","body":"Sorry for your time wasting, but I haven`t got much experience in regex (otherwise I would know how to solve this case), and this is the reason why I have not point my platform in my post. But now I think someone with much experience SHOULD KNOW that platform matters before waste his time for giving an answer that is not acceptable for &quot;all possible cases&quot; (\\K). But thank you very much in any case, I have learned a new feature that some day can be on place. By the way, I have edited my post adding java-platform, and dont see it."},{"owner":{"account_id":212394,"reputation":176424,"user_id":465183,"accept_rate":77,"display_name":"Gilles Qu&#233;not"},"score":1,"creation_date":1682273245,"post_id":76079819,"comment_id":134185545,"body_markdown":"It&#39;s not about regex experience, but about giving the right informations in your post from the beginning","body":"It&#39;s not about regex experience, but about giving the right informations in your post from the beginning"},{"owner":{"account_id":13710980,"reputation":13,"user_id":9893356,"display_name":"user9893356"},"score":0,"creation_date":1682274866,"post_id":76079819,"comment_id":134185791,"body_markdown":"I am sorry once again.","body":"I am sorry once again."}],"answers":[{"tags":[],"owner":{"account_id":212394,"reputation":176424,"user_id":465183,"accept_rate":77,"display_name":"Gilles Qu&#233;not"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1682275230,"creation_date":1682169919,"answer_id":76079876,"question_id":76079819,"body_markdown":"#### This regex:\r\n\r\n    [^\\s&#39;:]+(?=:)\r\n\r\n#### [Online Demo](https://regex101.com/r/r9iOWz/1)\r\n\r\n\r\n#### The regular expression matches as follows:\r\n\r\n|Node | Explanation |\r\n| ---- | ----------- |\r\n| `[^\\s&#39;:]+` |any character except: whitespace (\\n, \\r, \\t, \\f, and &quot; &quot;), &#39;&#39;&#39;, &#39;:&#39; (1 or more times (matching the most amount possible))|\r\n| `(?=` |[look ahead](https://www.perlmonks.org/?node_id=518444) to see if there is:|\r\n| `:` |:|\r\n| `)` |end of look-ahead|\r\n","title":"Can not create regex. Suppose it should be simple","body":"<h4>This regex:</h4>\n<pre><code>[^\\s':]+(?=:)\n</code></pre>\n<h4><a href=\"https://regex101.com/r/r9iOWz/1\" rel=\"nofollow noreferrer\">Online Demo</a></h4>\n<h4>The regular expression matches as follows:</h4>\n<div class=\"s-table-container\">\n<table class=\"s-table\">\n<thead>\n<tr>\n<th>Node</th>\n<th>Explanation</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><code>[^\\s':]+</code></td>\n<td>any character except: whitespace (\\n, \\r, \\t, \\f, and &quot; &quot;), ''', ':' (1 or more times (matching the most amount possible))</td>\n</tr>\n<tr>\n<td><code>(?=</code></td>\n<td><a href=\"https://www.perlmonks.org/?node_id=518444\" rel=\"nofollow noreferrer\">look ahead</a> to see if there is:</td>\n</tr>\n<tr>\n<td><code>:</code></td>\n<td>:</td>\n</tr>\n<tr>\n<td><code>)</code></td>\n<td>end of look-ahead</td>\n</tr>\n</tbody>\n</table>\n</div>"},{"tags":[],"owner":{"account_id":13710980,"reputation":13,"user_id":9893356,"display_name":"user9893356"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1682342546,"creation_date":1682342485,"answer_id":76092371,"question_id":76079819,"body_markdown":"thaThis pattern:\r\n\r\n    (?:^.{1})(?: )?(.+?(?=::))\r\nlooks more complex than in the answer above, but in this text:\r\n\r\n    &#39; match::some::text::\r\n\r\ngives only one match.","title":"Can not create regex. Suppose it should be simple","body":"<p>thaThis pattern:</p>\n<pre><code>(?:^.{1})(?: )?(.+?(?=::))\n</code></pre>\n<p>looks more complex than in the answer above, but in this text:</p>\n<pre><code>' match::some::text::\n</code></pre>\n<p>gives only one match.</p>\n"}],"owner":{"account_id":13710980,"reputation":13,"user_id":9893356,"display_name":"user9893356"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":53,"favorite_count":0,"down_vote_count":2,"up_vote_count":0,"accepted_answer_id":76079876,"answer_count":2,"score":-2,"last_activity_date":1682342546,"creation_date":1682169248,"question_id":76079819,"body_markdown":"I will try to explain it with the following example:&lt;br&gt;\r\n\r\n    &#39; text::&#39;\r\n    &#39;text::&#39;\r\n\r\nThis pattern:\r\n\r\n    (?&lt;=^).+(?=::)\r\n\r\nmatches &#39; text&#39; in the first line, and &#39;text&#39; in the second. I need a pattern, that matches &#39;text&#39; (without leading space) in both lines.\r\n\r\n\r\n\r\n\r\n","title":"Can not create regex. Suppose it should be simple","body":"<p>I will try to explain it with the following example:<br></p>\n<pre><code>' text::'\n'text::'\n</code></pre>\n<p>This pattern:</p>\n<pre><code>(?&lt;=^).+(?=::)\n</code></pre>\n<p>matches ' text' in the first line, and 'text' in the second. I need a pattern, that matches 'text' (without leading space) in both lines.</p>\n"},{"tags":["java","android-studio","logcat"],"comments":[{"owner":{"account_id":4405649,"reputation":1782,"user_id":3590155,"accept_rate":60,"display_name":"Leonardo Sibela"},"score":0,"creation_date":1682452364,"post_id":76092268,"comment_id":134217430,"body_markdown":"I&#39;m also getting the same error (the first one), but my app is compiling and not crashing.","body":"I&#39;m also getting the same error (the first one), but my app is compiling and not crashing."},{"owner":{"account_id":23767229,"reputation":631,"user_id":17781834,"display_name":"Yohannes Masterous"},"score":0,"creation_date":1682502702,"post_id":76092268,"comment_id":134225005,"body_markdown":"You can terminate the java.exe process from your Task Manager of your operating system and then Rebuild Project in Android Studio","body":"You can terminate the java.exe process from your Task Manager of your operating system and then Rebuild Project in Android Studio"}],"owner":{"account_id":19380291,"reputation":27,"user_id":14171709,"display_name":"Dhyan Prasad"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1120,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":0,"score":0,"last_activity_date":1682342483,"creation_date":1682341770,"question_id":76092268,"body_markdown":"When I try to run my application in android studio emulator, I get an error as follows:\r\n\r\n```\r\nstudio.deploy           install_server-09f4021c              E  Could not remove dir &#39;/data/data/com.example.myapplication/code_cache/.ll/&#39;: No such file or directory\r\n```\r\n\r\nSo I tried making the directory, but I still get the same issue when i try to run the app.\r\n\r\nThe app itself loads however the core the functionalities are redundant \r\n\r\nIm using Android Studio Electric Eel | 2022.1.1 Patch 2\r\n\r\nPlease some one tell me a fix.\r\n\r\n\r\n**EDIT:**\r\nSo i tried uninstalling and installing the app again in my avd emulator and i get new set of errors:\r\n\r\n```\r\n E  failed to find package com.example.myapplication\r\n2023-04-24 18:49:21.865   557-582   OverlayManager          system_process                       E  Failed to change enabled overlays for com.example.myapplication user 0\r\n2023-04-24 18:49:28.486 14358-14358 studio.deploy           installer                            E  InstallClient: Could not copy &#39;/data/local/tmp/.studio/tmp/09f4021c/install_server&#39; to &#39;/data/data/com.example.myapplication/code_cache/install_server-09f4021c: out=&#39;&#39;, err=&#39;run-as: unknown package: com.example.myapplication\r\n                                                                                                    run-as: unknown package: com.example.myapplication\r\n                                                                                                    &#39;\r\n2023-04-24 18:49:28.540 14358-14358 studio.deploy           installer                            E  run-as: unknown package: com.example.myapplication\r\n2023-04-24 18:49:28.706 16338-16338 studio.deploy           sh                                   E  Could not get package user id: run-as: unknown package: com.example.myapplication\r\n2023-04-24 18:49:28.751 16338-16338 studio.deploy           sh                                   E  Could not find apks for this package: com.example.myapplication\r\n```","title":"Android Studio could not remove dir","body":"<p>When I try to run my application in android studio emulator, I get an error as follows:</p>\n<pre><code>studio.deploy           install_server-09f4021c              E  Could not remove dir '/data/data/com.example.myapplication/code_cache/.ll/': No such file or directory\n</code></pre>\n<p>So I tried making the directory, but I still get the same issue when i try to run the app.</p>\n<p>The app itself loads however the core the functionalities are redundant</p>\n<p>Im using Android Studio Electric Eel | 2022.1.1 Patch 2</p>\n<p>Please some one tell me a fix.</p>\n<p><strong>EDIT:</strong>\nSo i tried uninstalling and installing the app again in my avd emulator and i get new set of errors:</p>\n<pre><code> E  failed to find package com.example.myapplication\n2023-04-24 18:49:21.865   557-582   OverlayManager          system_process                       E  Failed to change enabled overlays for com.example.myapplication user 0\n2023-04-24 18:49:28.486 14358-14358 studio.deploy           installer                            E  InstallClient: Could not copy '/data/local/tmp/.studio/tmp/09f4021c/install_server' to '/data/data/com.example.myapplication/code_cache/install_server-09f4021c: out='', err='run-as: unknown package: com.example.myapplication\n                                                                                                    run-as: unknown package: com.example.myapplication\n                                                                                                    '\n2023-04-24 18:49:28.540 14358-14358 studio.deploy           installer                            E  run-as: unknown package: com.example.myapplication\n2023-04-24 18:49:28.706 16338-16338 studio.deploy           sh                                   E  Could not get package user id: run-as: unknown package: com.example.myapplication\n2023-04-24 18:49:28.751 16338-16338 studio.deploy           sh                                   E  Could not find apks for this package: com.example.myapplication\n</code></pre>\n"},{"tags":["python","java","django"],"comments":[{"owner":{"account_id":26078,"reputation":452381,"user_id":67579,"accept_rate":81,"display_name":"willeM_ Van Onsem"},"score":1,"creation_date":1682342716,"post_id":76092345,"comment_id":134195289,"body_markdown":"Why not use a binary field?","body":"Why not use a binary field?"}],"owner":{"account_id":14134862,"reputation":11,"user_id":10211672,"display_name":"Noob"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":24,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1682342374,"creation_date":1682342374,"question_id":76092345,"body_markdown":"    \r\ni have a java api which store byets stream as encoded data but i don&#39;t find anything in django to do that here is Java code :`\r\n\r\n    \tFile f1=new File(publicKeyFile);\r\n\t\t\tFile f2=new File(privateKeyFile);\r\n\t\t\tif(f1!=null || f2!=null)\r\n\t\t\t{\r\n\t\t\t\tkeys=new Keys();\r\n\t\t\t\tkeys.setPublicKeyFile(f1);\r\n\t\t\t\tkeys.setPrivateKeyFile(f2);\r\n\t\t\t}\t\r\nand here is how it store like that in db\r\n\r\n    &#194;&#202;L&#241;&#162;&#234;l&#185; j&#243;E\u0006y&#186;_&#255;&#228;\u0001F&#254;2&#223;[o\u0016‡V?&#243;I&#169;&#232;4&#212;\u0007&#229;g&#244;J&#254;&#168;{A\u001B\tAe`\u0011&#167;GŽj&#255;&amp;&#248;m\b\u0006n&#207;&#39;\r\n\u001EŠž‘&#220;&#232;&#247;g&#165;&#229;&#255; \u001B |&#223;-\u001C&#235;&#169;ƒ&#168;&#198;%&#176;m\u000E”(&#229;&#232;}&#254;Y[S\u0007\r\n\r\nbut i can&#39;t save this as in django. basically i want something like that which java code is doing  please help ","title":"How to store encode file data into database with django ORM which has TextField","body":"<p>i have a java api which store byets stream as encoded data but i don't find anything in django to do that here is Java code :`</p>\n<pre><code>    File f1=new File(publicKeyFile);\n        File f2=new File(privateKeyFile);\n        if(f1!=null || f2!=null)\n        {\n            keys=new Keys();\n            keys.setPublicKeyFile(f1);\n            keys.setPrivateKeyFile(f2);\n        }   \n</code></pre>\n<p>and here is how it store like that in db</p>\n<pre><code>ÂÊLñ¢êl¹ jóEyº_ÿäFþ2ß[o‡V?óI©è4ÔågôJþ¨{A   Ae`§GŽjÿ&amp;ømnÏ'\n</code></pre>\n<p>Šž‘Üè÷g¥åÿ  |ß-ë©ƒ¨Æ%°m\u000E”(åè}þY[S</p>\n<p>but i can't save this as in django. basically i want something like that which java code is doing  please help</p>\n"},{"tags":["java","spring","spring-boot","http","tomcat"],"comments":[{"owner":{"account_id":6982783,"reputation":326,"user_id":5354987,"display_name":"Samuel Marchant"},"score":0,"creation_date":1682336227,"post_id":76091429,"comment_id":134193827,"body_markdown":"Tomcat has settings you can put in the server.xml for post and get sizes, but with the client itself, it depends what API the client uses e.g. JavaScript, or intranet proprietary JavaScript or an app E.t.c. seems like you may need to custom process and measure for accepting.","body":"Tomcat has settings you can put in the server.xml for post and get sizes, but with the client itself, it depends what API the client uses e.g. JavaScript, or intranet proprietary JavaScript or an app E.t.c. seems like you may need to custom process and measure for accepting."},{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1682412174,"post_id":76091429,"comment_id":134207008,"body_markdown":"Please provide enough code so others can better understand or reproduce the problem.","body":"Please provide enough code so others can better understand or reproduce the problem."}],"answers":[{"tags":[],"owner":{"account_id":12259853,"reputation":53,"user_id":8947900,"display_name":"Shubham Anand"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1682342303,"creation_date":1682341978,"answer_id":76092287,"question_id":76091429,"body_markdown":"You can create a filter that checks for content length. Please refer to this answer [here][1]\r\n\r\n  [1]: https://stackoverflow.com/a/38611154/8947900","title":"How to limit size of application/json body in post request in Spring, tomcat for certain controller","body":"<p>You can create a filter that checks for content length. Please refer to this answer <a href=\"https://stackoverflow.com/a/38611154/8947900\">here</a></p>\n"}],"owner":{"account_id":28399885,"reputation":1,"user_id":21724850,"display_name":"Ezaz09"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":248,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1682342303,"creation_date":1682335989,"question_id":76091429,"body_markdown":"I want to limit the size of accepted application/json http request bodys in post method for certain controller/method. So that it is not possible to send multiple megabytes of json to my application, which are then processed and make my app run for a long time.\r\n\r\n\r\nI know about properties like maxSwallowSize and maxPostSize but as far as I understood this methods sets size for methods in whole project.","title":"How to limit size of application/json body in post request in Spring, tomcat for certain controller","body":"<p>I want to limit the size of accepted application/json http request bodys in post method for certain controller/method. So that it is not possible to send multiple megabytes of json to my application, which are then processed and make my app run for a long time.</p>\n<p>I know about properties like maxSwallowSize and maxPostSize but as far as I understood this methods sets size for methods in whole project.</p>\n"},{"tags":["java","apache-poi"],"answers":[{"tags":[],"owner":{"account_id":2036306,"reputation":553,"user_id":1818593,"accept_rate":82,"display_name":"Srii"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1682341567,"creation_date":1682341567,"answer_id":76092233,"question_id":76091534,"body_markdown":"Changing the following block:\r\n\r\n```java\r\nint _tableSize = MT940Text.split(&quot;\\r\\n&quot;).length;\r\n        for (int j = 0; j &lt; _tableSize; j++) {\r\n            int _rowNum = baseRowForTransactions + j;\r\n            Row _rowInCxt = clonedSheet.createRow(_rowNum);\r\n            String _transactionInCtx = MT940Text.split(&quot;\\r\\n&quot;)[j];\r\n            String[] _transactionInCtxSize = _transactionInCtx.split(&quot;\\t&quot;);\r\n            for (int k = 0; k &lt; _transactionInCtxSize.length; k++) { //borders missing if empty appear as last columns, yet to fix\r\n                Cell _cellInCxt = _rowInCxt.createCell(k);\r\n                String _valueInCtx = _transactionInCtxSize[k];\r\n                _cellInCxt.setCellStyle(borderStyle);               \r\n                _cellInCxt.setCellValue(nvl(_valueInCtx, &quot; &quot;));\r\n//              _cellInCxt.getCell(k, Row.MissingCellPolicy.CREATE_NULL_AS_BLANK).setCellValue(nvl(_valueInCtx));               //using alternate approach                      \r\n            }\r\n        }\r\n```\r\n\r\nto this:\r\n\r\n```java\r\nint[] j = { 0 };\r\n\t\tStream&lt;String&gt; MT940Texts = MT940Text.lines();\r\n\t\tMT940Texts.forEach(l -&gt; {\r\n\t\t\tint _rowNum = baseRowForTransactions + j[0];\r\n\t\t\tRow _rowInCxt = clonedSheet.createRow(_rowNum);\r\n\t\t\tString[] _transactionInCtxSize = l.split(&quot;\\t&quot;);\r\n\t\t\tfor (int k = 0; k &lt; _transactionInCtxSize.length; k++) {\r\n\t\t\t\tCell _cellInCxt = _rowInCxt.createCell(k);\r\n\t\t\t\tString _valueInCtx = _transactionInCtxSize[k];\r\n\t\t\t\t_cellInCxt.setCellStyle(borderStyle);\r\n\t\t\t\t_cellInCxt.setCellValue(nvl(_valueInCtx, &quot; &quot;));\r\n//\t\t\t\t\t_rowInCxt.getCell(k, Row.MissingCellPolicy.CREATE_NULL_AS_BLANK).setCellValue(nvl(_valueInCtx, &quot; &quot;));\t\t\t\t//using alternate approach\t\t\t\t\t\t\r\n\t\t\t}\r\n\t\t\tj[0]++;\r\n\t\t});\r\n```\r\n\r\nmade a tremendous difference. It now takes only 6 seconds to generate the output. ","title":"Performance Factor in Generating Excel via Apache POI","body":"<p>Changing the following block:</p>\n<pre class=\"lang-java prettyprint-override\"><code>int _tableSize = MT940Text.split(&quot;\\r\\n&quot;).length;\n        for (int j = 0; j &lt; _tableSize; j++) {\n            int _rowNum = baseRowForTransactions + j;\n            Row _rowInCxt = clonedSheet.createRow(_rowNum);\n            String _transactionInCtx = MT940Text.split(&quot;\\r\\n&quot;)[j];\n            String[] _transactionInCtxSize = _transactionInCtx.split(&quot;\\t&quot;);\n            for (int k = 0; k &lt; _transactionInCtxSize.length; k++) { //borders missing if empty appear as last columns, yet to fix\n                Cell _cellInCxt = _rowInCxt.createCell(k);\n                String _valueInCtx = _transactionInCtxSize[k];\n                _cellInCxt.setCellStyle(borderStyle);               \n                _cellInCxt.setCellValue(nvl(_valueInCtx, &quot; &quot;));\n//              _cellInCxt.getCell(k, Row.MissingCellPolicy.CREATE_NULL_AS_BLANK).setCellValue(nvl(_valueInCtx));               //using alternate approach                      \n            }\n        }\n</code></pre>\n<p>to this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>int[] j = { 0 };\n        Stream&lt;String&gt; MT940Texts = MT940Text.lines();\n        MT940Texts.forEach(l -&gt; {\n            int _rowNum = baseRowForTransactions + j[0];\n            Row _rowInCxt = clonedSheet.createRow(_rowNum);\n            String[] _transactionInCtxSize = l.split(&quot;\\t&quot;);\n            for (int k = 0; k &lt; _transactionInCtxSize.length; k++) {\n                Cell _cellInCxt = _rowInCxt.createCell(k);\n                String _valueInCtx = _transactionInCtxSize[k];\n                _cellInCxt.setCellStyle(borderStyle);\n                _cellInCxt.setCellValue(nvl(_valueInCtx, &quot; &quot;));\n//                  _rowInCxt.getCell(k, Row.MissingCellPolicy.CREATE_NULL_AS_BLANK).setCellValue(nvl(_valueInCtx, &quot; &quot;));               //using alternate approach                      \n            }\n            j[0]++;\n        });\n</code></pre>\n<p>made a tremendous difference. It now takes only 6 seconds to generate the output.</p>\n"}],"owner":{"account_id":2036306,"reputation":553,"user_id":1818593,"accept_rate":82,"display_name":"Srii"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":53,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76092233,"answer_count":1,"score":0,"last_activity_date":1682341567,"creation_date":1682336858,"question_id":76091534,"body_markdown":"We are generating the an excel workbook based on a template that looks like:\r\n\r\n[![enter image description here][1]][1]\r\n\r\n...from a source file that looks like:\r\n\r\n```csv\r\nfilename1\t1:1Of1:39\taccountNum1\t\t\t\t\t\t\t\t\tC\t12345,00\tEUR\t230424\t\t\t\t\tC\t12345,00\tEUR\t230424\tC\t12345,00\tEUR\t230424\t\t\t\t\t\r\nfilename1\t1:2Of2:39\taccountNum2\t0000\t230424\tABC\t20230424000000000\t12345,00\tD\tAB-23-00000000\tRef/\tC\t12345,00\tEUR\t230424\t\t\t\t\tD\t12345,00\tEUR\t230424\tD\t12345,00\tEUR\t230424\t\t\t\t\t\r\nfilename1\t2:2Of2:39\taccountNum2\t0000\t230424\tABC\t20230424000000000\t12345,00\tD\tAB-23-00000000\tRef/\tC\t12345,00\tEUR\t230424\t\t\t\t\tD\t12345,00\tEUR\t230424\tD\t12345,00\tEUR\t230424\t\t\t\t\t\r\nfilename1\t1:11Of3:39\taccountNum3\t0000\t230424\tABC\t20230424000000000\t12345,00\tD\tAB-23-00000000\tRef/\tC\t12345,00\tEUR\t230424\t\t\t\t\tD\t12345,00\tEUR\t230424\tD\t12345,00\tEUR\t230424\t\t\t\t\t\r\nfilename1\t2:11Of3:39\taccountNum4\t0000\t230424\tABC\t20230424000000000\t12345,00\tD\tAB-23-00000000\tRef/\tC\t12345,00\tEUR\t230424\t\t\t\t\tD\t12345,00\tEUR\t230424\tD\t12345,00\tEUR\t230424\t\t\t\t\t\r\nfilename1\t3:11Of3:39\taccountNum4\t0000\t230424\tABC\t20230424000000000\t12345,00\tD\tAB-23-00000000\tRef/\tC\t12345,00\tEUR\t230424\t\t\t\t\tD\t12345,00\tEUR\t230424\tD\t12345,00\tEUR\t230424\t\t\t\t\t\r\nfilename1\t4:11Of3:39\taccountNum4\t0000\t230424\tABC\t20230424000000000\t12345,00\tD\tAB-23-00000000\tRef/\tC\t12345,00\tEUR\t230424\t\t\t\t\tD\t12345,00\tEUR\t230424\tD\t12345,00\tEUR\t230424\t\t\t\t\t\r\nfilename1\t5:11Of3:39\taccountNum4\t0000\t230424\tABC\t20230424000000000\t12345,00\tD\tAB-23-00000000\tRef/\tC\t12345,00\tEUR\t230424\t\t\t\t\tD\t12345,00\tEUR\t230424\tD\t12345,00\tEUR\t230424\t\r\n``` \r\n\r\nusing this:\r\n\r\n```java\r\nimport java.io.File;\r\nimport java.io.FileInputStream;\r\nimport java.io.FileOutputStream;\r\nimport java.io.IOException;\r\nimport java.io.PrintWriter;\r\nimport java.io.StringWriter;\r\nimport java.nio.charset.StandardCharsets;\r\nimport java.time.ZoneId;\r\nimport java.time.ZonedDateTime;\r\nimport java.time.format.DateTimeFormatter;\r\n\r\nimport org.apache.poi.xssf.usermodel.XSSFSheet;\r\nimport org.apache.poi.xssf.usermodel.XSSFWorkbook;\r\nimport org.apache.logging.log4j.LogManager;\r\nimport org.apache.logging.log4j.Logger;\r\nimport org.apache.poi.ss.usermodel.BorderStyle;\r\nimport org.apache.poi.ss.usermodel.Cell;\r\nimport org.apache.poi.ss.usermodel.CellStyle;\r\nimport org.apache.poi.ss.usermodel.Row;\r\n\r\npublic class ZDMT940FlatToExcel {\r\n\r\n\tprivate static final Logger log = LogManager.getLogger(ZDMT940FlatToExcel.class);\r\n\tprivate static final String authorName = &quot;Self&quot;;\r\n\r\n\tpublic static void main(String[] args) {\r\n\r\n\t\tlog.info(&quot;Direct Invocation!&quot;);\r\n\t\tZDMT940FlatToExcel ma_1 = new ZDMT940FlatToExcel();\r\n\t\tString bankName = &quot;ABC&quot;;\r\n\t\tString inFileName = &quot;C:\\\\target\\\\output.txt&quot;;\r\n\t\tString outFileName = &quot;C:\\\\target\\\\EBS_&quot; + bankName + &quot;.xlsx&quot;;\r\n\t\tSystem.out.println(ma_1.generateMT940Excel(bankName, inFileName, outFileName));\r\n\r\n\t}\r\n\r\n\tpublic String generateMT940Excel(String bankName, String inFileName, String outFileName) {\r\n\r\n\t\tXSSFWorkbook wb = null;\r\n\t\tString _timeNow = ZonedDateTime.now(ZoneId.systemDefault())\r\n\t\t\t\t.format(DateTimeFormatter.ofPattern(&quot;uuuu.MM.dd HH:mm:ss&quot;));\r\n\t\tString MT940Text = readFileIntoSting(inFileName);\r\n\t\tFileOutputStream fileOut = null;\r\n\r\n\t\ttry {\r\n\t\t\twb = new XSSFWorkbook(\r\n\t\t\t\t\tZDMT940FlatToExcel.class.getClassLoader().getResourceAsStream(&quot;EBS_Result_Template.xlsx&quot;));\r\n\t\t\twb.getProperties().getCoreProperties().setCreator(authorName);\r\n\t\t\tfileOut = new FileOutputStream(outFileName);\r\n\t\t} catch (Exception e) {\r\n\t\t\tlog.error(printStackTraceToString(&quot;generateMT940Excel&quot;, &quot;&quot;, e));\r\n\t\t\treturn &quot;NOK&quot;;\r\n\t\t}\r\n\r\n\t\tXSSFSheet templateSheet = wb.getSheet(&quot;##BankName##&quot;);\r\n\r\n\t\tCellStyle borderStyle = wb.createCellStyle();\r\n//\t\tborderStyle.setWrapText(true); //disabled owing to its mess-up with predefined column width\r\n\t\tsetCellStyleAllBorders(borderStyle);\r\n\r\n\t\tint baseRowForTransactions = 6;\r\n\t\tXSSFSheet clonedSheet = wb.cloneSheet(wb.getSheetIndex(templateSheet), bankName);\r\n\t\tclonedSheet.getRow(0).getCell(0).setCellValue(templateSheet.getRow(0).getCell(0).toString()\r\n\t\t\t\t.replace(&quot;##BankName##&quot;, bankName).replace(&quot;##EBSType##&quot;, &quot;MT940&quot;));\r\n\t\tclonedSheet.getRow(2).getCell(3)\r\n\t\t\t\t.setCellValue(templateSheet.getRow(2).getCell(3).toString().replace(&quot;##TimeStamp##&quot;, _timeNow));\r\n\t\tint _tableSize = MT940Text.split(&quot;\\r\\n&quot;).length;\r\n\r\n\t\tfor (int j = 0; j &lt; _tableSize; j++) {\r\n\t\t\tint _rowNum = baseRowForTransactions + j;\r\n\t\t\tRow _rowInCxt = clonedSheet.createRow(_rowNum);\r\n\t\t\tString _transactionInCtx = MT940Text.split(&quot;\\r\\n&quot;)[j];\r\n\t\t\tString[] _transactionInCtxSize = _transactionInCtx.split(&quot;\\t&quot;);\r\n\t\t\tfor (int k = 0; k &lt; _transactionInCtxSize.length; k++) { //borders missing if empty appear as last columns, yet to fix\r\n\t\t\t\tCell _cellInCxt = _rowInCxt.createCell(k);\r\n\t\t\t\tString _valueInCtx = _transactionInCtxSize[k];\r\n\t\t\t\t_cellInCxt.setCellStyle(borderStyle);\t\t\t\t\r\n\t\t\t\t_cellInCxt.setCellValue(nvl(_valueInCtx, &quot; &quot;));\r\n//\t\t\t\t_cellInCxt.getCell(k, Row.MissingCellPolicy.CREATE_NULL_AS_BLANK).setCellValue(nvl(_valueInCtx));\t\t\t\t//using alternate approach\t\t\t\t\t\t\r\n\t\t\t}\r\n\t\t}\r\n\t\tclonedSheet.setColumnHidden(0, true);\r\n\t\tclonedSheet.setColumnHidden(1, true);\r\n\r\n\t\twb.removeSheetAt(wb.getSheetIndex(templateSheet));\r\n\r\n\t\ttry {\r\n\t\t\twb.write(fileOut);\r\n\t\t\tfileOut.close();\r\n\t\t} catch (IOException e) {\r\n\t\t\tlog.error(printStackTraceToString(&quot;generateMT940Excel&quot;, &quot;&quot;, e));\r\n\t\t\treturn &quot;NOK&quot;;\r\n\t\t}\r\n\t\tlog.info(&quot;Written xlsx file&quot;);\r\n\t\treturn &quot;OK&quot;;\r\n\t}\r\n\r\n\tprivate static void setCellStyleAllBorders(CellStyle cellStyle) {\r\n\t\tcellStyle.setBorderBottom(BorderStyle.THIN);\r\n\t\tcellStyle.setBorderLeft(BorderStyle.THIN);\r\n\t\tcellStyle.setBorderRight(BorderStyle.THIN);\r\n\t\tcellStyle.setBorderTop(BorderStyle.THIN);\r\n\t}\r\n\r\n\tprivate static String readFileIntoSting(final String fileName) {\r\n\t\tbyte[] data = null;\r\n\t\tFileInputStream fin = null;\r\n\t\ttry {\r\n\t\t\tfin = new FileInputStream(new File(fileName));\r\n\t\t\tdata = fin.readAllBytes();\r\n\t\t\tfin.close();\r\n\t\t} catch (IOException e) {\r\n\t\t\tlog.error(printStackTraceToString(&quot;readFileIntoSting&quot;, &quot;&quot;, e));\r\n\t\t\treturn null;\r\n\t\t}\r\n\t\treturn new String(data, StandardCharsets.UTF_8);\r\n\t}\r\n\r\n\tprivate static String nvl(String text, String defaultValue) {\r\n\t\tif (text == null || text == &quot;&quot;) {\r\n\t\t\treturn (defaultValue == null) ? &quot; &quot; : defaultValue;\r\n\t\t}\r\n\t\treturn text;\r\n\t}\r\n\r\n\tprivate static String printStackTraceToString(String callerId, String addRem, Exception e) {\r\n\t\tStringWriter errors = new StringWriter();\r\n\t\te.printStackTrace(new PrintWriter(errors));\r\n\t\treturn callerId + &quot;:\\t&quot; + addRem + &quot;:\\t&quot;\r\n\t\t\t\t+ errors.toString().trim().replaceAll(&quot;\\r\\n&quot;, &quot; &quot;).replaceAll(&quot;\\t&quot;, &quot; &quot;);\r\n\t}\r\n\r\n}\r\n```\r\n\r\nWhile the code does its job, the performance factor is unsatisfying. The source tab delimited text file contains about 10k lines and it already takes about 5 minutes. Could the code be made more efficient to improve performance? Any thoughts are appreciated.\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/3zbsj.png","title":"Performance Factor in Generating Excel via Apache POI","body":"<p>We are generating the an excel workbook based on a template that looks like:</p>\n<p><a href=\"https://i.stack.imgur.com/3zbsj.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/3zbsj.png\" alt=\"enter image description here\" /></a></p>\n<p>...from a source file that looks like:</p>\n<pre><code>filename1   1:1Of1:39   accountNum1                                 C   12345,00    EUR 230424                  C   12345,00    EUR 230424  C   12345,00    EUR 230424                  \nfilename1   1:2Of2:39   accountNum2 0000    230424  ABC 20230424000000000   12345,00    D   AB-23-00000000  Ref/    C   12345,00    EUR 230424                  D   12345,00    EUR 230424  D   12345,00    EUR 230424                  \nfilename1   2:2Of2:39   accountNum2 0000    230424  ABC 20230424000000000   12345,00    D   AB-23-00000000  Ref/    C   12345,00    EUR 230424                  D   12345,00    EUR 230424  D   12345,00    EUR 230424                  \nfilename1   1:11Of3:39  accountNum3 0000    230424  ABC 20230424000000000   12345,00    D   AB-23-00000000  Ref/    C   12345,00    EUR 230424                  D   12345,00    EUR 230424  D   12345,00    EUR 230424                  \nfilename1   2:11Of3:39  accountNum4 0000    230424  ABC 20230424000000000   12345,00    D   AB-23-00000000  Ref/    C   12345,00    EUR 230424                  D   12345,00    EUR 230424  D   12345,00    EUR 230424                  \nfilename1   3:11Of3:39  accountNum4 0000    230424  ABC 20230424000000000   12345,00    D   AB-23-00000000  Ref/    C   12345,00    EUR 230424                  D   12345,00    EUR 230424  D   12345,00    EUR 230424                  \nfilename1   4:11Of3:39  accountNum4 0000    230424  ABC 20230424000000000   12345,00    D   AB-23-00000000  Ref/    C   12345,00    EUR 230424                  D   12345,00    EUR 230424  D   12345,00    EUR 230424                  \nfilename1   5:11Of3:39  accountNum4 0000    230424  ABC 20230424000000000   12345,00    D   AB-23-00000000  Ref/    C   12345,00    EUR 230424                  D   12345,00    EUR 230424  D   12345,00    EUR 230424  \n</code></pre>\n<p>using this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>import java.io.File;\nimport java.io.FileInputStream;\nimport java.io.FileOutputStream;\nimport java.io.IOException;\nimport java.io.PrintWriter;\nimport java.io.StringWriter;\nimport java.nio.charset.StandardCharsets;\nimport java.time.ZoneId;\nimport java.time.ZonedDateTime;\nimport java.time.format.DateTimeFormatter;\n\nimport org.apache.poi.xssf.usermodel.XSSFSheet;\nimport org.apache.poi.xssf.usermodel.XSSFWorkbook;\nimport org.apache.logging.log4j.LogManager;\nimport org.apache.logging.log4j.Logger;\nimport org.apache.poi.ss.usermodel.BorderStyle;\nimport org.apache.poi.ss.usermodel.Cell;\nimport org.apache.poi.ss.usermodel.CellStyle;\nimport org.apache.poi.ss.usermodel.Row;\n\npublic class ZDMT940FlatToExcel {\n\n    private static final Logger log = LogManager.getLogger(ZDMT940FlatToExcel.class);\n    private static final String authorName = &quot;Self&quot;;\n\n    public static void main(String[] args) {\n\n        log.info(&quot;Direct Invocation!&quot;);\n        ZDMT940FlatToExcel ma_1 = new ZDMT940FlatToExcel();\n        String bankName = &quot;ABC&quot;;\n        String inFileName = &quot;C:\\\\target\\\\output.txt&quot;;\n        String outFileName = &quot;C:\\\\target\\\\EBS_&quot; + bankName + &quot;.xlsx&quot;;\n        System.out.println(ma_1.generateMT940Excel(bankName, inFileName, outFileName));\n\n    }\n\n    public String generateMT940Excel(String bankName, String inFileName, String outFileName) {\n\n        XSSFWorkbook wb = null;\n        String _timeNow = ZonedDateTime.now(ZoneId.systemDefault())\n                .format(DateTimeFormatter.ofPattern(&quot;uuuu.MM.dd HH:mm:ss&quot;));\n        String MT940Text = readFileIntoSting(inFileName);\n        FileOutputStream fileOut = null;\n\n        try {\n            wb = new XSSFWorkbook(\n                    ZDMT940FlatToExcel.class.getClassLoader().getResourceAsStream(&quot;EBS_Result_Template.xlsx&quot;));\n            wb.getProperties().getCoreProperties().setCreator(authorName);\n            fileOut = new FileOutputStream(outFileName);\n        } catch (Exception e) {\n            log.error(printStackTraceToString(&quot;generateMT940Excel&quot;, &quot;&quot;, e));\n            return &quot;NOK&quot;;\n        }\n\n        XSSFSheet templateSheet = wb.getSheet(&quot;##BankName##&quot;);\n\n        CellStyle borderStyle = wb.createCellStyle();\n//      borderStyle.setWrapText(true); //disabled owing to its mess-up with predefined column width\n        setCellStyleAllBorders(borderStyle);\n\n        int baseRowForTransactions = 6;\n        XSSFSheet clonedSheet = wb.cloneSheet(wb.getSheetIndex(templateSheet), bankName);\n        clonedSheet.getRow(0).getCell(0).setCellValue(templateSheet.getRow(0).getCell(0).toString()\n                .replace(&quot;##BankName##&quot;, bankName).replace(&quot;##EBSType##&quot;, &quot;MT940&quot;));\n        clonedSheet.getRow(2).getCell(3)\n                .setCellValue(templateSheet.getRow(2).getCell(3).toString().replace(&quot;##TimeStamp##&quot;, _timeNow));\n        int _tableSize = MT940Text.split(&quot;\\r\\n&quot;).length;\n\n        for (int j = 0; j &lt; _tableSize; j++) {\n            int _rowNum = baseRowForTransactions + j;\n            Row _rowInCxt = clonedSheet.createRow(_rowNum);\n            String _transactionInCtx = MT940Text.split(&quot;\\r\\n&quot;)[j];\n            String[] _transactionInCtxSize = _transactionInCtx.split(&quot;\\t&quot;);\n            for (int k = 0; k &lt; _transactionInCtxSize.length; k++) { //borders missing if empty appear as last columns, yet to fix\n                Cell _cellInCxt = _rowInCxt.createCell(k);\n                String _valueInCtx = _transactionInCtxSize[k];\n                _cellInCxt.setCellStyle(borderStyle);               \n                _cellInCxt.setCellValue(nvl(_valueInCtx, &quot; &quot;));\n//              _cellInCxt.getCell(k, Row.MissingCellPolicy.CREATE_NULL_AS_BLANK).setCellValue(nvl(_valueInCtx));               //using alternate approach                      \n            }\n        }\n        clonedSheet.setColumnHidden(0, true);\n        clonedSheet.setColumnHidden(1, true);\n\n        wb.removeSheetAt(wb.getSheetIndex(templateSheet));\n\n        try {\n            wb.write(fileOut);\n            fileOut.close();\n        } catch (IOException e) {\n            log.error(printStackTraceToString(&quot;generateMT940Excel&quot;, &quot;&quot;, e));\n            return &quot;NOK&quot;;\n        }\n        log.info(&quot;Written xlsx file&quot;);\n        return &quot;OK&quot;;\n    }\n\n    private static void setCellStyleAllBorders(CellStyle cellStyle) {\n        cellStyle.setBorderBottom(BorderStyle.THIN);\n        cellStyle.setBorderLeft(BorderStyle.THIN);\n        cellStyle.setBorderRight(BorderStyle.THIN);\n        cellStyle.setBorderTop(BorderStyle.THIN);\n    }\n\n    private static String readFileIntoSting(final String fileName) {\n        byte[] data = null;\n        FileInputStream fin = null;\n        try {\n            fin = new FileInputStream(new File(fileName));\n            data = fin.readAllBytes();\n            fin.close();\n        } catch (IOException e) {\n            log.error(printStackTraceToString(&quot;readFileIntoSting&quot;, &quot;&quot;, e));\n            return null;\n        }\n        return new String(data, StandardCharsets.UTF_8);\n    }\n\n    private static String nvl(String text, String defaultValue) {\n        if (text == null || text == &quot;&quot;) {\n            return (defaultValue == null) ? &quot; &quot; : defaultValue;\n        }\n        return text;\n    }\n\n    private static String printStackTraceToString(String callerId, String addRem, Exception e) {\n        StringWriter errors = new StringWriter();\n        e.printStackTrace(new PrintWriter(errors));\n        return callerId + &quot;:\\t&quot; + addRem + &quot;:\\t&quot;\n                + errors.toString().trim().replaceAll(&quot;\\r\\n&quot;, &quot; &quot;).replaceAll(&quot;\\t&quot;, &quot; &quot;);\n    }\n\n}\n</code></pre>\n<p>While the code does its job, the performance factor is unsatisfying. The source tab delimited text file contains about 10k lines and it already takes about 5 minutes. Could the code be made more efficient to improve performance? Any thoughts are appreciated.</p>\n"},{"tags":["java","multithreading"],"comments":[{"owner":{"account_id":71739,"reputation":307142,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":0,"creation_date":1682330412,"post_id":76089719,"comment_id":134192573,"body_markdown":"No, it isn&#39;t a good idea: in fact it lacks all motivation. However your underlying premiss is also false: you are overlooking the backlog queue, which means that multiple clients can connect even though you haven&#39;t done that number of accepts.","body":"No, it isn&#39;t a good idea: in fact it lacks all motivation. However your underlying premiss is also false: you are overlooking the backlog queue, which means that multiple clients can connect even though you haven&#39;t done that number of accepts."}],"answers":[{"tags":[],"owner":{"account_id":17717155,"reputation":527,"user_id":12863192,"display_name":"Ishan"},"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1682331287,"creation_date":1682329833,"answer_id":76090635,"question_id":76089719,"body_markdown":"No, it is not a good idea to do `thread.join()` in a loop like this.\r\n\r\n`thread.join()` will result in the current thread going into a wait state till the time the thread referenced by the variable `thread` ends.  So as such, the loop will hang there.  No new sockets will be accepted.\r\n\r\nAfter accepting a socket, a new thread should be created, and the socket should be handed over to that new thread for further processing.\r\nAs soon as a socket is accepted and a ClientSocket is created, the connection is request is removed from the backlog queue. If that loop goes into a wait state, the backlog queue will also be filled up and connection requests might also be denied.\r\n\r\nThe current thread which is accepting the new connections should continue, so it should not use `join`.  It should create a new thread and continue to accept new connection requests as soon as possible so that the backlog queue is also kept relatively empty most of the time.\r\n\r\nOnly if the server is shutting down, the loop should break (not accept new connections), and then outside the loop, it can wait for the running threads to complete (complete the communication with the already connected clients), and then exit.","title":"Thread join in a loop where multiple clients can connect to a server","body":"<p>No, it is not a good idea to do <code>thread.join()</code> in a loop like this.</p>\n<p><code>thread.join()</code> will result in the current thread going into a wait state till the time the thread referenced by the variable <code>thread</code> ends.  So as such, the loop will hang there.  No new sockets will be accepted.</p>\n<p>After accepting a socket, a new thread should be created, and the socket should be handed over to that new thread for further processing.\nAs soon as a socket is accepted and a ClientSocket is created, the connection is request is removed from the backlog queue. If that loop goes into a wait state, the backlog queue will also be filled up and connection requests might also be denied.</p>\n<p>The current thread which is accepting the new connections should continue, so it should not use <code>join</code>.  It should create a new thread and continue to accept new connection requests as soon as possible so that the backlog queue is also kept relatively empty most of the time.</p>\n<p>Only if the server is shutting down, the loop should break (not accept new connections), and then outside the loop, it can wait for the running threads to complete (complete the communication with the already connected clients), and then exit.</p>\n"},{"tags":[],"owner":{"account_id":422870,"reputation":25925,"user_id":801894,"display_name":"Solomon Slow"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1682341482,"creation_date":1682341482,"answer_id":76092224,"question_id":76089719,"body_markdown":"It never makes any sense to start a new thread and then immediately `join` it. The whole point of creating a new thread is so that the new thread can do its thing while the caller _concurrently_ does some other thing:\r\n\r\n``` lang-java\r\nRunnable r = ...;\r\nThread t = new Thread(r);\r\nt.start();\r\ndoSomeOtherThingConcurrentlyWithTheNewThread();\r\nt.join();\r\n```\r\n\r\nIf there isn&#39;t some other thing that the caller wants to do, then there is no reason to create the new thread. You can save some CPU cycles by just doing this instead, and it will have exactly the same effect:\r\n\r\n``` lang-java\r\nRunnable r = ...;\r\nr.run();\r\n```\r\n","title":"Thread join in a loop where multiple clients can connect to a server","body":"<p>It never makes any sense to start a new thread and then immediately <code>join</code> it. The whole point of creating a new thread is so that the new thread can do its thing while the caller <em>concurrently</em> does some other thing:</p>\n<pre class=\"lang-java prettyprint-override\"><code>Runnable r = ...;\nThread t = new Thread(r);\nt.start();\ndoSomeOtherThingConcurrentlyWithTheNewThread();\nt.join();\n</code></pre>\n<p>If there isn't some other thing that the caller wants to do, then there is no reason to create the new thread. You can save some CPU cycles by just doing this instead, and it will have exactly the same effect:</p>\n<pre class=\"lang-java prettyprint-override\"><code>Runnable r = ...;\nr.run();\n</code></pre>\n"}],"owner":{"account_id":12303918,"reputation":1053,"user_id":8977557,"accept_rate":80,"display_name":"Agrudge Amicus"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":38,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":2,"score":-1,"last_activity_date":1682341482,"creation_date":1682322881,"question_id":76089719,"body_markdown":"In a program where multiple clients can connect to a server, is it a good idea to use `join`?\r\nFor example:\r\n\r\n\r\n\r\n    while(true)\r\n    {\r\n        Socket clientSocket = serverSocket.accept();\r\n\r\n        //thread creation for new clients, followed by executing their (generally overwritten) `run()` method.\r\n        thread.join();\r\n    }\r\n\r\nNow, my understanding is, if the thread is `join`ed, then a new client will have to wait till the client before it completes the intended operation - which shouldn&#39;t be happening as multiple clients should be able to connect and operate simultaneously.\r\n\r\nSo, is it a good idea to use `join` in such a fashion?","title":"Thread join in a loop where multiple clients can connect to a server","body":"<p>In a program where multiple clients can connect to a server, is it a good idea to use <code>join</code>?\nFor example:</p>\n<pre><code>while(true)\n{\n    Socket clientSocket = serverSocket.accept();\n\n    //thread creation for new clients, followed by executing their (generally overwritten) `run()` method.\n    thread.join();\n}\n</code></pre>\n<p>Now, my understanding is, if the thread is <code>join</code>ed, then a new client will have to wait till the client before it completes the intended operation - which shouldn't be happening as multiple clients should be able to connect and operate simultaneously.</p>\n<p>So, is it a good idea to use <code>join</code> in such a fashion?</p>\n"},{"tags":["java","jar"],"answers":[{"tags":[],"owner":{"account_id":1273420,"reputation":4594,"user_id":1229192,"accept_rate":50,"display_name":"Michal Borek"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1367617083,"creation_date":1367617083,"answer_id":16367915,"question_id":16367856,"body_markdown":"When you use &quot;Export&quot; functionality, you need to select all resources that need to be exported (it is visible at the top of the Eclipse export wizard window).\r\n\r\nYou can find the answer here as well: https://stackoverflow.com/questions/423938/java-export-to-an-jar-file-in-eclipse","title":"Exporting resource folder with jar","body":"<p>When you use \"Export\" functionality, you need to select all resources that need to be exported (it is visible at the top of the Eclipse export wizard window).</p>\n\n<p>You can find the answer here as well: <a href=\"https://stackoverflow.com/questions/423938/java-export-to-an-jar-file-in-eclipse\">Java: export to an .jar file in eclipse</a></p>\n"},{"tags":[],"owner":{"account_id":960307,"reputation":107861,"user_id":984823,"display_name":"Joop Eggen"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1367617499,"creation_date":1367617499,"answer_id":16368007,"question_id":16367856,"body_markdown":"You can open the jar with 7zip or Winzip, and check the path.\r\n\r\nTry\r\n\r\n    getClass().getResourceAsStream(&quot;/resources/hotkeys.ini&quot;);\r\n\r\n(Or try removing the first `/` when with `getClassLoader()`.)\r\n\r\nEspecially check the case-sensitivity of the paths. As opposed to Windows, inside a Jar it is case-sensitive.\r\n\r\n\r\n\r\n","title":"Exporting resource folder with jar","body":"<p>You can open the jar with 7zip or Winzip, and check the path.</p>\n\n<p>Try</p>\n\n<pre><code>getClass().getResourceAsStream(\"/resources/hotkeys.ini\");\n</code></pre>\n\n<p>(Or try removing the first <code>/</code> when with <code>getClassLoader()</code>.)</p>\n\n<p>Especially check the case-sensitivity of the paths. As opposed to Windows, inside a Jar it is case-sensitive.</p>\n"}],"owner":{"account_id":1635231,"reputation":309,"user_id":1508920,"accept_rate":83,"display_name":"ahoj pepiczki"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":9919,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":2,"score":3,"last_activity_date":1682341335,"creation_date":1367616841,"question_id":16367856,"body_markdown":"I have a folder called &quot;resources&quot; in my Eclipse project. It&#39;s used as source folder. Everything works well compiled from Eclipse. I wanted to try it on Ubuntu so I exported it to runnable jar and tried to run but it gave me FileNotFound Exception. I checked the file structure inside the JAR and there&#39;s no &quot;resources&quot; folder, only files that should be inside. I&#39;m accessing files with \r\n\r\n    File file = new File(&quot;resources/hotkeys.ini&quot;);\r\n\r\nI also tried \r\n\r\n    InputStream in = getClass().getClassLoader().getResourceAsStream(&quot;/resources/hotkeys.ini&quot;);\r\n\r\nbut it gave me null.\r\n\r\nHow to force Eclipse to export the folder along with jar?","title":"Exporting resource folder with jar","body":"<p>I have a folder called \"resources\" in my Eclipse project. It's used as source folder. Everything works well compiled from Eclipse. I wanted to try it on Ubuntu so I exported it to runnable jar and tried to run but it gave me FileNotFound Exception. I checked the file structure inside the JAR and there's no \"resources\" folder, only files that should be inside. I'm accessing files with </p>\n\n<pre><code>File file = new File(\"resources/hotkeys.ini\");\n</code></pre>\n\n<p>I also tried </p>\n\n<pre><code>InputStream in = getClass().getClassLoader().getResourceAsStream(\"/resources/hotkeys.ini\");\n</code></pre>\n\n<p>but it gave me null.</p>\n\n<p>How to force Eclipse to export the folder along with jar?</p>\n"},{"tags":["java","spring","spring-security"],"comments":[{"owner":{"account_id":5278004,"reputation":6696,"user_id":4214241,"display_name":"R.G"},"score":2,"creation_date":1581137571,"post_id":60123616,"comment_id":106339132,"body_markdown":"Not that , `http.httpBasic()\n                    .and()\n                    .authorizeRequests()\n                    .antMatchers(&quot;/rest/**&quot;)\n                    .permitAll()\n                    .and()\n                    .antMatchers(&quot;/secure/**&quot;)\n                    .hasAnyRole(&quot;ADMIN&quot;)\n                    .anyRequest()\n                    .authenticated()\n                    .and()\n                    .formLogin().permitAll();` this way.","body":"Not that , <code>http.httpBasic()                     .and()                     .authorizeRequests()                     .antMatchers(&quot;&#47;rest&#47;**&quot;)                     .permitAll()                     .and()                     .antMatchers(&quot;&#47;secure&#47;**&quot;)                     .hasAnyRole(&quot;ADMIN&quot;)                     .anyRequest()                     .authenticated()                     .and()                     .formLogin().permitAll();</code> this way."},{"owner":{"account_id":13918784,"reputation":205,"user_id":10049821,"display_name":"Aussergewohnliche Travailler"},"score":0,"creation_date":1581336015,"post_id":60123616,"comment_id":106385591,"body_markdown":"thx you....now its work","body":"thx you....now its work"},{"owner":{"account_id":51513,"reputation":1175,"user_id":153940,"accept_rate":58,"display_name":"Kumar Manish"},"score":0,"creation_date":1595776975,"post_id":60123616,"comment_id":111585193,"body_markdown":"May I ask what exactly does &quot;http.csrf().disable()&quot; do? I have seen it in many places. I know the basics of CSRF but why do we need to disable it here? What happens if that line is not there?","body":"May I ask what exactly does &quot;http.csrf().disable()&quot; do? I have seen it in many places. I know the basics of CSRF but why do we need to disable it here? What happens if that line is not there?"}],"answers":[{"tags":[],"owner":{"account_id":5278004,"reputation":6696,"user_id":4214241,"display_name":"R.G"},"down_vote_count":1,"up_vote_count":21,"is_accepted":false,"score":20,"last_activity_date":1581336204,"creation_date":1581336204,"answer_id":60150046,"question_id":60123616,"body_markdown":"Modify the rule as follows . `.anyRequest().authenticated()` to be used only once .\r\n\r\n        http\r\n            .httpBasic()\r\n                .and()\r\n            .authorizeRequests()\r\n                .antMatchers(&quot;/rest/**&quot;).permitAll()\r\n                .and()\r\n            .authorizeRequests()\r\n                .antMatchers(&quot;/secure/**&quot;).hasAnyRole(&quot;ADMIN&quot;)\r\n                .anyRequest().authenticated()\r\n                .and()\r\n            .formLogin()\r\n                .permitAll();\r\n\r\n","title":"Can&#39;t configure antMatchers after anyRequest (Multiple antMatcher)","body":"<p>Modify the rule as follows . <code>.anyRequest().authenticated()</code> to be used only once .</p>\n\n<pre><code>    http\n        .httpBasic()\n            .and()\n        .authorizeRequests()\n            .antMatchers(\"/rest/**\").permitAll()\n            .and()\n        .authorizeRequests()\n            .antMatchers(\"/secure/**\").hasAnyRole(\"ADMIN\")\n            .anyRequest().authenticated()\n            .and()\n        .formLogin()\n            .permitAll();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":18505187,"reputation":71,"user_id":13481644,"display_name":"yosef girma"},"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1627662729,"creation_date":1627662729,"answer_id":68594310,"question_id":60123616,"body_markdown":"It might help someone for same kind of Exception\r\nHere is my code:-\r\n\r\n        @Override\r\n          protected void configure(HttpSecurity http) throws Exception {\r\n            super.configure(http);\r\n            \r\n             http.authorizeRequests()\r\n                 .antMatchers(&quot;/**&quot;)\r\n                 .hasAnyRole()\r\n                 .and()\r\n                 .formLogin();\r\n        }\r\n\r\nI just removed the call to super class :- super.configure(http); It worked for me. Just remove that line.","title":"Can&#39;t configure antMatchers after anyRequest (Multiple antMatcher)","body":"<p>It might help someone for same kind of Exception\nHere is my code:-</p>\n<pre><code>    @Override\n      protected void configure(HttpSecurity http) throws Exception {\n        super.configure(http);\n        \n         http.authorizeRequests()\n             .antMatchers(&quot;/**&quot;)\n             .hasAnyRole()\n             .and()\n             .formLogin();\n    }\n</code></pre>\n<p>I just removed the call to super class :- super.configure(http); It worked for me. Just remove that line.</p>\n"},{"tags":[],"owner":{"account_id":15878073,"reputation":37,"user_id":11456666,"display_name":"java code point"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1638689157,"creation_date":1638599434,"answer_id":70223512,"question_id":60123616,"body_markdown":"      protected void configure(HttpSecurity http) throws Exception {\r\n\t\t\r\n\t\t    http.csrf()\r\n\t\t\t\t.disable()\r\n\t\t\t\t.cors()\r\n\t\t\t\t.disable()\r\n\t\t\t\t.authorizeRequests()\r\n\t\t\t\t.antMatchers(&quot;/login&quot;, &quot;/user/createUser&quot;)\r\n\t\t\t\t.permitAll()\r\n\t\t\t\t.antMatchers(HttpMethod.OPTIONS)\r\n\t\t\t\t.permitAll()\r\n\t\t\t\t.anyRequest()\r\n\t\t\t\t.authenticated()\r\n\t\t\t\t.and().exceptionHandling()\r\n\t\t\t\t.authenticationEntryPoint(unautorizeHandler)\r\n\t\t\t\t.and().sessionManagement()\r\n\t\t\t\t.sessionCreationPolicy(SessionCreationPolicy.STATELESS);\r\n\r\n\t\t   http.addFilterBefore(jwtAuthenticationFilter, UsernamePasswordAuthenticationFilter.class);\r\n\t}","title":"Can&#39;t configure antMatchers after anyRequest (Multiple antMatcher)","body":"<pre><code>  protected void configure(HttpSecurity http) throws Exception {\n    \n        http.csrf()\n            .disable()\n            .cors()\n            .disable()\n            .authorizeRequests()\n            .antMatchers(&quot;/login&quot;, &quot;/user/createUser&quot;)\n            .permitAll()\n            .antMatchers(HttpMethod.OPTIONS)\n            .permitAll()\n            .anyRequest()\n            .authenticated()\n            .and().exceptionHandling()\n            .authenticationEntryPoint(unautorizeHandler)\n            .and().sessionManagement()\n            .sessionCreationPolicy(SessionCreationPolicy.STATELESS);\n\n       http.addFilterBefore(jwtAuthenticationFilter, UsernamePasswordAuthenticationFilter.class);\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":17701438,"reputation":36,"user_id":12850984,"display_name":"Ragunath14"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1652873684,"creation_date":1652873684,"answer_id":72288440,"question_id":60123616,"body_markdown":"    Authenticated should come last \r\n    httpSecurity.csrf().disable()\r\n                     .cors()\r\n                    .and().authorizeRequests()\r\n                    .antMatchers(&quot;xyz&quot;).permitAll()\r\n                    .antMatchers(&quot;abc&quot;)\r\n                    .authenticated()\r\n                    .and()\r\n                    .sessionManagement()\r\n                    .sessionCreationPolicy(SessionCreationPolicy.IF_REQUIRED);","title":"Can&#39;t configure antMatchers after anyRequest (Multiple antMatcher)","body":"<pre><code>Authenticated should come last \nhttpSecurity.csrf().disable()\n                 .cors()\n                .and().authorizeRequests()\n                .antMatchers(&quot;xyz&quot;).permitAll()\n                .antMatchers(&quot;abc&quot;)\n                .authenticated()\n                .and()\n                .sessionManagement()\n                .sessionCreationPolicy(SessionCreationPolicy.IF_REQUIRED);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":28400654,"reputation":1,"user_id":21725521,"display_name":"pambalanaveen"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1682340584,"creation_date":1682340584,"answer_id":76092085,"question_id":60123616,"body_markdown":"  \r\n\t http\r\n     .httpBasic()\r\n         .and()\r\n     .authorizeRequests()\r\n         .antMatchers(&quot;/rest/**&quot;).permitAll()\r\n         .and()\r\n     .authorizeRequests()\r\n         .antMatchers(&quot;/secure/**&quot;).hasAnyRole(&quot;ADMIN&quot;)\r\n         .anyRequest().authenticated()\r\n         .and()\r\n     .formLogin()\r\n         .permitAll();\r\n\t}\r\n\t","title":"Can&#39;t configure antMatchers after anyRequest (Multiple antMatcher)","body":"<pre><code> http\n .httpBasic()\n     .and()\n .authorizeRequests()\n     .antMatchers(&quot;/rest/**&quot;).permitAll()\n     .and()\n .authorizeRequests()\n     .antMatchers(&quot;/secure/**&quot;).hasAnyRole(&quot;ADMIN&quot;)\n     .anyRequest().authenticated()\n     .and()\n .formLogin()\n     .permitAll();\n}\n</code></pre>\n"}],"owner":{"account_id":13918784,"reputation":205,"user_id":10049821,"display_name":"Aussergewohnliche Travailler"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":30727,"favorite_count":0,"down_vote_count":1,"up_vote_count":17,"accepted_answer_id":72288440,"answer_count":5,"score":16,"last_activity_date":1682340584,"creation_date":1581131643,"question_id":60123616,"body_markdown":"I am trying to configure Spring Security and get this following error:\r\n\r\n&gt;    Caused by: java.lang.IllegalStateException: Can&#39;t configure antMatchers after anyRequest\r\n\r\nThis is my `SecurityConfig` class:\r\n  \r\n\r\n    import org.springframework.beans.factory.annotation.Autowired;\r\n    import org.springframework.context.annotation.Bean;\r\n    import org.springframework.context.annotation.Configuration;\r\n    import org.springframework.security.config.annotation.authentication.builders.AuthenticationManagerBuilder;\r\n    import org.springframework.security.config.annotation.method.configuration.EnableGlobalMethodSecurity;\r\n    import org.springframework.security.config.annotation.web.builders.HttpSecurity;\r\n    import org.springframework.security.config.annotation.web.configuration.EnableWebSecurity;\r\n    import org.springframework.security.config.annotation.web.configuration.WebSecurityConfigurerAdapter;\r\n    import org.springframework.security.core.userdetails.UserDetailsService;\r\n    import org.springframework.security.crypto.bcrypt.BCryptPasswordEncoder;\r\n        \r\n    @Configuration\r\n    @EnableWebSecurity\r\n    @EnableGlobalMethodSecurity(prePostEnabled = true)\r\n    public class SecurityConfig extends WebSecurityConfigurerAdapter{\r\n        \r\n        @Autowired\r\n        private UserDetailsService userDetailsService;\r\n        \r\n        @Override\r\n        protected void configure(AuthenticationManagerBuilder auth) throws Exception {\r\n        \r\n                auth.userDetailsService(userDetailsService).passwordEncoder(encodePWD());\r\n        }\r\n        \r\n        @Override\r\n        protected void configure(HttpSecurity http) throws Exception{\r\n        \r\n            http\r\n                .csrf().disable();\r\n            http\r\n                .httpBasic()\r\n                    .and()\r\n                .authorizeRequests()\r\n                    .antMatchers(&quot;/rest/**&quot;).permitAll()\r\n                    .anyRequest().authenticated()\r\n                    .and()\r\n                .authorizeRequests()\r\n                    .antMatchers(&quot;/secure/**&quot;).hasAnyRole(&quot;ADMIN&quot;)\r\n                    .anyRequest().authenticated()\r\n                    .and()\r\n                .formLogin()\r\n                    .permitAll();\r\n        \r\n            http\r\n                .authorizeRequests()\r\n                    .antMatchers(&quot;/login&quot;).permitAll();\r\n        }\r\n    \r\n        @Bean\r\n        public BCryptPasswordEncoder encodePWD(){\r\n            return new BCryptPasswordEncoder();\r\n        }\r\n    }\r\n\r\nI already tried call `httpSecurityauthorizeRequests().anyRequest().authenticated()` as mentioned [here][1], \r\nstill didn&#39;t work\r\n...any suggestion would be helpfull.\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/58420224/how-to-add-matchers-to-httpsecurity-spring-web-secure","title":"Can&#39;t configure antMatchers after anyRequest (Multiple antMatcher)","body":"<p>I am trying to configure Spring Security and get this following error:</p>\n\n<blockquote>\n  <p>Caused by: java.lang.IllegalStateException: Can't configure antMatchers after anyRequest</p>\n</blockquote>\n\n<p>This is my <code>SecurityConfig</code> class:</p>\n\n<pre><code>import org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.context.annotation.Bean;\nimport org.springframework.context.annotation.Configuration;\nimport org.springframework.security.config.annotation.authentication.builders.AuthenticationManagerBuilder;\nimport org.springframework.security.config.annotation.method.configuration.EnableGlobalMethodSecurity;\nimport org.springframework.security.config.annotation.web.builders.HttpSecurity;\nimport org.springframework.security.config.annotation.web.configuration.EnableWebSecurity;\nimport org.springframework.security.config.annotation.web.configuration.WebSecurityConfigurerAdapter;\nimport org.springframework.security.core.userdetails.UserDetailsService;\nimport org.springframework.security.crypto.bcrypt.BCryptPasswordEncoder;\n\n@Configuration\n@EnableWebSecurity\n@EnableGlobalMethodSecurity(prePostEnabled = true)\npublic class SecurityConfig extends WebSecurityConfigurerAdapter{\n\n    @Autowired\n    private UserDetailsService userDetailsService;\n\n    @Override\n    protected void configure(AuthenticationManagerBuilder auth) throws Exception {\n\n            auth.userDetailsService(userDetailsService).passwordEncoder(encodePWD());\n    }\n\n    @Override\n    protected void configure(HttpSecurity http) throws Exception{\n\n        http\n            .csrf().disable();\n        http\n            .httpBasic()\n                .and()\n            .authorizeRequests()\n                .antMatchers(\"/rest/**\").permitAll()\n                .anyRequest().authenticated()\n                .and()\n            .authorizeRequests()\n                .antMatchers(\"/secure/**\").hasAnyRole(\"ADMIN\")\n                .anyRequest().authenticated()\n                .and()\n            .formLogin()\n                .permitAll();\n\n        http\n            .authorizeRequests()\n                .antMatchers(\"/login\").permitAll();\n    }\n\n    @Bean\n    public BCryptPasswordEncoder encodePWD(){\n        return new BCryptPasswordEncoder();\n    }\n}\n</code></pre>\n\n<p>I already tried call <code>httpSecurityauthorizeRequests().anyRequest().authenticated()</code> as mentioned <a href=\"https://stackoverflow.com/questions/58420224/how-to-add-matchers-to-httpsecurity-spring-web-secure\">here</a>, \nstill didn't work\n...any suggestion would be helpfull.</p>\n"}],"has_more":true,"quota_max":10000,"quota_remaining":9514,"page":478,"page_size":100}
