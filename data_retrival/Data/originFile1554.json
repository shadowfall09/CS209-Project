{"items":[{"tags":["java","android","serialization","serializable"],"comments":[{"owner":{"account_id":71739,"reputation":307142,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":1,"creation_date":1646019228,"post_id":71290268,"comment_id":126013418,"body_markdown":"&quot;I&#39;m getting an error&quot; is not a problem description.","body":"&quot;I&#39;m getting an error&quot; is not a problem description."},{"owner":{"account_id":1790714,"reputation":91128,"user_id":1631193,"accept_rate":71,"display_name":"Gabe Sechan"},"score":0,"creation_date":1646019273,"post_id":71290268,"comment_id":126013423,"body_markdown":"Post the entire stack trace","body":"Post the entire stack trace"},{"owner":{"account_id":16445373,"reputation":613,"user_id":11880323,"display_name":"cmak"},"score":0,"creation_date":1646022511,"post_id":71290268,"comment_id":126013796,"body_markdown":"Use parcelable instead of serializable, it&#39;s optimized for android https://stackoverflow.com/questions/3323074/android-difference-between-parcelable-and-serializable","body":"Use parcelable instead of serializable, it&#39;s optimized for android <a href=\"https://stackoverflow.com/questions/3323074/android-difference-between-parcelable-and-serializable\" title=\"android difference between parcelable and serializable\">stackoverflow.com/questions/3323074/&hellip;</a>"},{"owner":{"account_id":1790714,"reputation":91128,"user_id":1631193,"accept_rate":71,"display_name":"Gabe Sechan"},"score":0,"creation_date":1646023696,"post_id":71290268,"comment_id":126013948,"body_markdown":"@cmak Meh, the difference is minor, and Serializable is a lot easier.  It&#39;s rare for the difference to matter","body":"@cmak Meh, the difference is minor, and Serializable is a lot easier.  It&#39;s rare for the difference to matter"}],"answers":[{"tags":[],"owner":{"account_id":1790714,"reputation":91128,"user_id":1631193,"accept_rate":71,"display_name":"Gabe Sechan"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1646094282,"creation_date":1646023801,"answer_id":71290715,"question_id":71290268,"body_markdown":"You&#39;re trying to serialize an `Activity`, either directly or indirectly (something you&#39;re trying to Serialize has a reference to an `Activity`).  That&#39;s not possible, because `Activity` does not implement Serializable.  To properly implement Serializable, all of your member variables must either be primitives or implement Serializable themselves.\r\n\r\nEdit:  If `Item` is a subclass of `Activity`, it may be picking up the implicit parent reference.  In that case, make it a static class.","title":"Exception serializing abstract class","body":"<p>You're trying to serialize an <code>Activity</code>, either directly or indirectly (something you're trying to Serialize has a reference to an <code>Activity</code>).  That's not possible, because <code>Activity</code> does not implement Serializable.  To properly implement Serializable, all of your member variables must either be primitives or implement Serializable themselves.</p>\n<p>Edit:  If <code>Item</code> is a subclass of <code>Activity</code>, it may be picking up the implicit parent reference.  In that case, make it a static class.</p>\n"}],"owner":{"account_id":12276918,"reputation":7,"user_id":8960162,"display_name":"Joao Barata"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":132,"favorite_count":0,"down_vote_count":2,"up_vote_count":0,"answer_count":1,"score":-2,"last_activity_date":1646094282,"creation_date":1646018242,"question_id":71290268,"body_markdown":"Im trying to develop a little android game and i&#39;m having a hard time understanding how can i surpass this problem.\r\n\r\nWhat i&#39;m trying to do is send data between activities.To achieve that i&#39;m using the intent extras.\r\nThe data that im trying to send is an ArrayList&lt;Item\r\n\r\nItem.java\r\n```\r\npublic abstract class Item implements Serializable {\r\n\r\n    private String fieldA;\r\n    private int fieldB;\r\n      \r\n     *getters and setters*\r\n    \r\n    abstract void use();\r\n}\r\n```\r\nthe use method will be different on each item so thats why im using abstract\r\n\r\ne.g creation item\r\n```\r\nItem hpPotion = new Item() {\r\n            @Override\r\n            public void use() {\r\n                player.setHealth(player.getHealth() + 10)\r\n            }\r\n        };\r\n```\r\n\r\nand then im getting an error when starting the new Activity\r\n```\r\nIntent intent = new Intent(HistoryActivity.this,BagActivity.class);\r\n                    intent.putExtra(&quot;items&quot;,player.getItems());\r\n                    someActivityResultLauncher.launch(intent,options);\r\n```\r\nStackTrace:\r\n```\r\nE/AndroidRuntime: FATAL EXCEPTION: main\r\n    Process: com.example.decisions, PID: 22018\r\n    java.lang.RuntimeException: Parcelable encountered IOException writing serializable object (name = com.example.decisions.HistoryActivity$7)\r\n        at android.os.Parcel.writeSerializable(Parcel.java:2116)\r\n        at android.os.Parcel.writeValue(Parcel.java:1886)\r\n        at android.os.Parcel.writeList(Parcel.java:1095)\r\n        at android.os.Parcel.writeValue(Parcel.java:1835)\r\n        at android.os.Parcel.writeArrayMapInternal(Parcel.java:978)\r\n        at android.os.BaseBundle.writeToParcelInner(BaseBundle.java:1629)\r\n        at android.os.Bundle.writeToParcel(Bundle.java:1303)\r\n        at android.os.Parcel.writeBundle(Parcel.java:1047)\r\n        at android.content.Intent.writeToParcel(Intent.java:10871)\r\n        at android.app.IActivityTaskManager$Stub$Proxy.startActivity(IActivityTaskManager.java:3887)\r\n        at android.app.Instrumentation.execStartActivity(Instrumentation.java:1727)\r\n        at android.app.Activity.startActivityForResult(Activity.java:5405)\r\n        at androidx.activity.ComponentActivity.startActivityForResult(ComponentActivity.java:574)\r\n        at androidx.core.app.ActivityCompat.startActivityForResult(ActivityCompat.java:237)\r\n        at androidx.activity.ComponentActivity$2.onLaunch(ComponentActivity.java:208)\r\n        at androidx.activity.result.ActivityResultRegistry$2.launch(ActivityResultRegistry.java:166)\r\n        at com.example.decisions.HistoryActivity$2.onClick(HistoryActivity.java:96)\r\n        at android.view.View.performClick(View.java:7559)\r\n        at android.view.View.performClickInternal(View.java:7536)\r\n        at android.view.View.access$3600(View.java:828)\r\n        at android.view.View$PerformClick.run(View.java:28700)\r\n        at android.os.Handler.handleCallback(Handler.java:938)\r\n        at android.os.Handler.dispatchMessage(Handler.java:99)\r\n        at android.os.Looper.loop(Looper.java:236)\r\n        at android.app.ActivityThread.main(ActivityThread.java:7861)\r\n        at java.lang.reflect.Method.invoke(Native Method)\r\n        at com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:600)\r\n        at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:967)\r\n     Caused by: java.io.NotSerializableException: com.example.decisions.HistoryActivity\r\n        at java.io.ObjectOutputStream.writeObject0(ObjectOutputStream.java:1240)\r\n        at java.io.ObjectOutputStream.defaultWriteFields(ObjectOutputStream.java:1604)\r\n        at java.io.ObjectOutputStream.writeSerialData(ObjectOutputStream.java:1565)\r\n        at java.io.ObjectOutputStream.writeOrdinaryObject(ObjectOutputStream.java:1488)\r\n        at java.io.ObjectOutputStream.writeObject0(ObjectOutputStream.java:1234)\r\n        at java.io.ObjectOutputStream.writeObject(ObjectOutputStream.java:354)\r\n        at android.os.Parcel.writeSerializable(Parcel.java:2111)\r\n        at android.os.Parcel.writeValue(Parcel.java:1886)&#160;\r\n        at android.os.Parcel.writeList(Parcel.java:1095)&#160;\r\n        at android.os.Parcel.writeValue(Parcel.java:1835)&#160;\r\n        at android.os.Parcel.writeArrayMapInternal(Parcel.java:978)&#160;\r\n        at android.os.BaseBundle.writeToParcelInner(BaseBundle.java:1629)&#160;\r\n        at android.os.Bundle.writeToParcel(Bundle.java:1303)&#160;\r\n        at android.os.Parcel.writeBundle(Parcel.java:1047)&#160;\r\n        at android.content.Intent.writeToParcel(Intent.java:10871)&#160;\r\n        at android.app.IActivityTaskManager$Stub$Proxy.startActivity(IActivityTaskManager.java:3887)&#160;\r\n        at android.app.Instrumentation.execStartActivity(Instrumentation.java:1727)&#160;\r\n        at android.app.Activity.startActivityForResult(Activity.java:5405)&#160;\r\n        at androidx.activity.ComponentActivity.startActivityForResult(ComponentActivity.java:574)&#160;\r\n        at androidx.core.app.ActivityCompat.startActivityForResult(ActivityCompat.java:237)&#160;\r\n        at androidx.activity.ComponentActivity$2.onLaunch(ComponentActivity.java:208)&#160;\r\n        at androidx.activity.result.ActivityResultRegistry$2.launch(ActivityResultRegistry.java:166)&#160;\r\n        at com.example.decisions.HistoryActivity$2.onClick(HistoryActivity.java:96)&#160;\r\n        at android.view.View.performClick(View.java:7559)&#160;\r\n        at android.view.View.performClickInternal(View.java:7536)&#160;\r\n        at android.view.View.access$3600(View.java:828)&#160;\r\n        at android.view.View$PerformClick.run(View.java:28700)&#160;\r\n        at android.os.Handler.handleCallback(Handler.java:938)&#160;\r\n        at android.os.Handler.dispatchMessage(Handler.java:99)&#160;\r\n        at android.os.Looper.loop(Looper.java:236)&#160;\r\n    ```\r\n\r\nWhat would be the best approach to solve my problem?\r\n\r\nThank you all","title":"Exception serializing abstract class","body":"<p>Im trying to develop a little android game and i'm having a hard time understanding how can i surpass this problem.</p>\n<p>What i'm trying to do is send data between activities.To achieve that i'm using the intent extras.\nThe data that im trying to send is an ArrayList&lt;Item</p>\n<p>Item.java</p>\n<pre><code>public abstract class Item implements Serializable {\n\n    private String fieldA;\n    private int fieldB;\n      \n     *getters and setters*\n    \n    abstract void use();\n}\n</code></pre>\n<p>the use method will be different on each item so thats why im using abstract</p>\n<p>e.g creation item</p>\n<pre><code>Item hpPotion = new Item() {\n            @Override\n            public void use() {\n                player.setHealth(player.getHealth() + 10)\n            }\n        };\n</code></pre>\n<p>and then im getting an error when starting the new Activity</p>\n<pre><code>Intent intent = new Intent(HistoryActivity.this,BagActivity.class);\n                    intent.putExtra(&quot;items&quot;,player.getItems());\n                    someActivityResultLauncher.launch(intent,options);\n</code></pre>\n<p>StackTrace:</p>\n<pre><code>E/AndroidRuntime: FATAL EXCEPTION: main\n    Process: com.example.decisions, PID: 22018\n    java.lang.RuntimeException: Parcelable encountered IOException writing serializable object (name = com.example.decisions.HistoryActivity$7)\n        at android.os.Parcel.writeSerializable(Parcel.java:2116)\n        at android.os.Parcel.writeValue(Parcel.java:1886)\n        at android.os.Parcel.writeList(Parcel.java:1095)\n        at android.os.Parcel.writeValue(Parcel.java:1835)\n        at android.os.Parcel.writeArrayMapInternal(Parcel.java:978)\n        at android.os.BaseBundle.writeToParcelInner(BaseBundle.java:1629)\n        at android.os.Bundle.writeToParcel(Bundle.java:1303)\n        at android.os.Parcel.writeBundle(Parcel.java:1047)\n        at android.content.Intent.writeToParcel(Intent.java:10871)\n        at android.app.IActivityTaskManager$Stub$Proxy.startActivity(IActivityTaskManager.java:3887)\n        at android.app.Instrumentation.execStartActivity(Instrumentation.java:1727)\n        at android.app.Activity.startActivityForResult(Activity.java:5405)\n        at androidx.activity.ComponentActivity.startActivityForResult(ComponentActivity.java:574)\n        at androidx.core.app.ActivityCompat.startActivityForResult(ActivityCompat.java:237)\n        at androidx.activity.ComponentActivity$2.onLaunch(ComponentActivity.java:208)\n        at androidx.activity.result.ActivityResultRegistry$2.launch(ActivityResultRegistry.java:166)\n        at com.example.decisions.HistoryActivity$2.onClick(HistoryActivity.java:96)\n        at android.view.View.performClick(View.java:7559)\n        at android.view.View.performClickInternal(View.java:7536)\n        at android.view.View.access$3600(View.java:828)\n        at android.view.View$PerformClick.run(View.java:28700)\n        at android.os.Handler.handleCallback(Handler.java:938)\n        at android.os.Handler.dispatchMessage(Handler.java:99)\n        at android.os.Looper.loop(Looper.java:236)\n        at android.app.ActivityThread.main(ActivityThread.java:7861)\n        at java.lang.reflect.Method.invoke(Native Method)\n        at com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:600)\n        at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:967)\n     Caused by: java.io.NotSerializableException: com.example.decisions.HistoryActivity\n        at java.io.ObjectOutputStream.writeObject0(ObjectOutputStream.java:1240)\n        at java.io.ObjectOutputStream.defaultWriteFields(ObjectOutputStream.java:1604)\n        at java.io.ObjectOutputStream.writeSerialData(ObjectOutputStream.java:1565)\n        at java.io.ObjectOutputStream.writeOrdinaryObject(ObjectOutputStream.java:1488)\n        at java.io.ObjectOutputStream.writeObject0(ObjectOutputStream.java:1234)\n        at java.io.ObjectOutputStream.writeObject(ObjectOutputStream.java:354)\n        at android.os.Parcel.writeSerializable(Parcel.java:2111)\n        at android.os.Parcel.writeValue(Parcel.java:1886) \n        at android.os.Parcel.writeList(Parcel.java:1095) \n        at android.os.Parcel.writeValue(Parcel.java:1835) \n        at android.os.Parcel.writeArrayMapInternal(Parcel.java:978) \n        at android.os.BaseBundle.writeToParcelInner(BaseBundle.java:1629) \n        at android.os.Bundle.writeToParcel(Bundle.java:1303) \n        at android.os.Parcel.writeBundle(Parcel.java:1047) \n        at android.content.Intent.writeToParcel(Intent.java:10871) \n        at android.app.IActivityTaskManager$Stub$Proxy.startActivity(IActivityTaskManager.java:3887) \n        at android.app.Instrumentation.execStartActivity(Instrumentation.java:1727) \n        at android.app.Activity.startActivityForResult(Activity.java:5405) \n        at androidx.activity.ComponentActivity.startActivityForResult(ComponentActivity.java:574) \n        at androidx.core.app.ActivityCompat.startActivityForResult(ActivityCompat.java:237) \n        at androidx.activity.ComponentActivity$2.onLaunch(ComponentActivity.java:208) \n        at androidx.activity.result.ActivityResultRegistry$2.launch(ActivityResultRegistry.java:166) \n        at com.example.decisions.HistoryActivity$2.onClick(HistoryActivity.java:96) \n        at android.view.View.performClick(View.java:7559) \n        at android.view.View.performClickInternal(View.java:7536) \n        at android.view.View.access$3600(View.java:828) \n        at android.view.View$PerformClick.run(View.java:28700) \n        at android.os.Handler.handleCallback(Handler.java:938) \n        at android.os.Handler.dispatchMessage(Handler.java:99) \n        at android.os.Looper.loop(Looper.java:236) \n    ```\n\nWhat would be the best approach to solve my problem?\n\nThank you all\n</code></pre>\n"},{"tags":["java","hibernate","null","h2"],"comments":[{"owner":{"account_id":4741976,"reputation":5385,"user_id":3834413,"display_name":"Eugene"},"score":0,"creation_date":1645992062,"post_id":71288014,"comment_id":126008920,"body_markdown":"What database do you use?","body":"What database do you use?"},{"owner":{"display_name":"user17441315"},"score":0,"creation_date":1645992675,"post_id":71288014,"comment_id":126009070,"body_markdown":"@Eugene H2 database","body":"@Eugene H2 database"},{"owner":{"display_name":"user17441315"},"score":0,"creation_date":1645993110,"post_id":71288014,"comment_id":126009165,"body_markdown":"@Eugene check out my Update","body":"@Eugene check out my Update"}],"answers":[{"tags":[],"owner":{"account_id":17181790,"reputation":26,"user_id":12437103,"display_name":"ashleynguci"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1646093115,"creation_date":1645994832,"answer_id":71288351,"question_id":71288014,"body_markdown":"\r\nMaybe your table hasn&#39;t been defined as an auto incremental PK.\r\n\r\nTry to add this one to application.properties:\r\n\r\n```\r\nhibernate.hbm2ddl.auto=validate\r\n```","title":"Hibernate inserts null for ID when using strategy = GenerationType.IDENTITY","body":"<p>Maybe your table hasn't been defined as an auto incremental PK.</p>\n<p>Try to add this one to application.properties:</p>\n<pre><code>hibernate.hbm2ddl.auto=validate\n</code></pre>\n"},{"tags":[],"owner":{"account_id":16247179,"reputation":7205,"user_id":11731987,"display_name":"Evgenij Ryazanov"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1646025800,"creation_date":1646025800,"answer_id":71290887,"question_id":71288014,"body_markdown":"Both these commands were fixed in Hibernate ORM 5.6.5.Final, older versions produce invalid SQL for a some historic reason, it was accepted by old versions of H2, but new versions throw an expected exception.\r\n\r\nThis version also has various other changes needed for recent versions of H2.\r\n\r\nYou need to upgrade `hibernate-core` to this or newer version.","title":"Hibernate inserts null for ID when using strategy = GenerationType.IDENTITY","body":"<p>Both these commands were fixed in Hibernate ORM 5.6.5.Final, older versions produce invalid SQL for a some historic reason, it was accepted by old versions of H2, but new versions throw an expected exception.</p>\n<p>This version also has various other changes needed for recent versions of H2.</p>\n<p>You need to upgrade <code>hibernate-core</code> to this or newer version.</p>\n"}],"owner":{"display_name":"user17441315"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2375,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":71288351,"answer_count":2,"score":1,"last_activity_date":1646093115,"creation_date":1645991637,"question_id":71288014,"body_markdown":"Why is Hibernate inserts null value for the ID in the table.\r\n\r\n```\r\n@Id\r\n@Getter\r\n@GeneratedValue(strategy = GenerationType.IDENTITY)\r\nprivate Long id;\r\n```\r\n\r\nThis is the Message I am getting when inserting somthing in table blabla ↓↓↓\r\n\r\n&gt; Hibernate: insert into blabla (id, bla1, bla2) values (null, ?, ?)\r\n\r\nHowever when instad of using `strategy = GenerationType.IDENTITY` → `strategy = GenerationType.AUTO/SEQUANSE` I am getting this message ↓↓↓\r\n\r\n&gt; Hibernate: call next value for hibernate_sequence\r\n&gt;\r\n&gt; Hibernate: insert into blabla (bla1, bla2, id) values (?, ?, ?)\r\n\r\nDoes anyone know why it&#39;s like that because this null in ID place is causing an Exception when connecting to a database.\r\n\r\n**Update:**\r\n\r\nI&#39;ve run my Application with `strategy = SEQUENCE and AUTO` but I am getting also an Exception\r\n\r\nDatabase is `H2`\r\n\r\n\r\n\r\n**Solution:**\r\n\r\nyou go to your `application.properties` file and add this line of code:\r\n\r\n`hibernate.hbm2ddl.auto=validate`","title":"Hibernate inserts null for ID when using strategy = GenerationType.IDENTITY","body":"<p>Why is Hibernate inserts null value for the ID in the table.</p>\n<pre><code>@Id\n@Getter\n@GeneratedValue(strategy = GenerationType.IDENTITY)\nprivate Long id;\n</code></pre>\n<p>This is the Message I am getting when inserting somthing in table blabla ↓↓↓</p>\n<blockquote>\n<p>Hibernate: insert into blabla (id, bla1, bla2) values (null, ?, ?)</p>\n</blockquote>\n<p>However when instad of using <code>strategy = GenerationType.IDENTITY</code> → <code>strategy = GenerationType.AUTO/SEQUANSE</code> I am getting this message ↓↓↓</p>\n<blockquote>\n<p>Hibernate: call next value for hibernate_sequence</p>\n<p>Hibernate: insert into blabla (bla1, bla2, id) values (?, ?, ?)</p>\n</blockquote>\n<p>Does anyone know why it's like that because this null in ID place is causing an Exception when connecting to a database.</p>\n<p><strong>Update:</strong></p>\n<p>I've run my Application with <code>strategy = SEQUENCE and AUTO</code> but I am getting also an Exception</p>\n<p>Database is <code>H2</code></p>\n<p><strong>Solution:</strong></p>\n<p>you go to your <code>application.properties</code> file and add this line of code:</p>\n<p><code>hibernate.hbm2ddl.auto=validate</code></p>\n"},{"tags":["java","pdf","itext"],"comments":[{"owner":{"account_id":1548636,"reputation":658,"user_id":1441544,"display_name":"esmoreno"},"score":0,"creation_date":1343211514,"post_id":11644852,"comment_id":15431466,"body_markdown":"You need the line pdf.close() before the line pdfDocument.close(). Regards","body":"You need the line pdf.close() before the line pdfDocument.close(). Regards"},{"owner":{"account_id":1687927,"reputation":11,"user_id":1550832,"display_name":"user1550832"},"score":0,"creation_date":1343215359,"post_id":11644852,"comment_id":15432998,"body_markdown":"Thank you for your answer, but NetBeans says &quot;cannot find symbol&quot; for the line &quot;pdf.close()&quot;","body":"Thank you for your answer, but NetBeans says &quot;cannot find symbol&quot; for the line &quot;pdf.close()&quot;"}],"answers":[{"tags":[],"owner":{"account_id":1548636,"reputation":658,"user_id":1441544,"display_name":"esmoreno"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1343376919,"creation_date":1343219386,"answer_id":11649740,"question_id":11644852,"body_markdown":"First, I see this error in your question: \r\n\r\n    Errorjava.security.AccessControlException: access denied (&quot;java.lang.RuntimePermission&quot; &quot;getenv.windir&quot;)\r\n\r\nYou need signed your applet for access to your filesystem. See this [link][1] and [this][2] too.\r\n\r\nSecond, I have tried following code:\r\n\r\n\r\n    import java.io.File;\r\n    import java.io.FileInputStream;\r\n    import java.io.FileOutputStream;\r\n    \r\n    import com.itextpdf.text.Document;\r\n    import com.itextpdf.text.pdf.PdfWriter;\r\n    import com.itextpdf.tool.xml.XMLWorkerHelper;\r\n    \r\n    public class main {\r\n    \r\n    \tpublic static void main(String[] args) {\r\n    \t\tFile f = new File(&quot;C:/tmp/data.htm&quot;);\r\n    \r\n    \t\tFile pdf = new File(&quot;C:/tmp/data.pdf&quot;);\r\n    \t\tDocument pdfDocument = null;\r\n    \t\tPdfWriter pdfWriter = null;\r\n    \t\ttry {\r\n    \r\n    \t\t\tpdfDocument = new Document();\r\n    \t\t\tpdfWriter = PdfWriter.getInstance(pdfDocument, new FileOutputStream(pdf));\r\n    \t\t\tpdfDocument.open();\r\n    \r\n    \t\t\tXMLWorkerHelper.getInstance().parseXHtml(pdfWriter, pdfDocument,\r\n    \t\t\t\t\tnew FileInputStream(f));\r\n    \t\t\tpdfDocument.close();\r\n    \r\n    \t\t} catch (Exception ex) {\r\n    \t\t\tex.printStackTrace();\r\n    \t\t}\r\n    \r\n    \t}\r\n    }\r\n\r\n\r\nIf file data.htm (original data) is an htmlx, work fine. But if data.htm not is an xml, i get this error:\r\n\r\n\r\n    com.itextpdf.tool.xml.exceptions.RuntimeWorkerException: Invalid nested tag head found, expected closing tag meta.\r\n    \tat com.itextpdf.tool.xml.XMLWorker.endElement(XMLWorker.java:134)\r\n    \tat com.itextpdf.tool.xml.parser.XMLParser.endElement(XMLParser.java:395)\r\n    \tat com.itextpdf.tool.xml.parser.state.ClosingTagState.process(ClosingTagState.java:70)\r\n    \tat com.itextpdf.tool.xml.parser.XMLParser.parseWithReader(XMLParser.java:235)\r\n    \tat com.itextpdf.tool.xml.parser.XMLParser.parse(XMLParser.java:213)\r\n    \tat com.itextpdf.tool.xml.parser.XMLParser.parse(XMLParser.java:174)\r\n    \tat com.itextpdf.tool.xml.XMLWorkerHelper.parseXHtml(XMLWorkerHelper.java:220)\r\n    \tat com.itextpdf.tool.xml.XMLWorkerHelper.parseXHtml(XMLWorkerHelper.java:185)\r\n    \tat main.main(main.java:44)\r\n\r\nCan you try with your data and with this example? The difference is that my example isn&#39;t an applet, is an java standalone.\r\n\r\nRegards\r\n\r\n\r\n  [1]: http://java.sun.com/developer/onlineTraining/Programming/JDCBook/signed.html\r\n  [2]: http://docs.oracle.com/javase/1.5.0/docs/guide/security/spec/security-spec.doc1.html","title":"Converting html file to pdf using iText in JApplet","body":"<p>First, I see this error in your question: </p>\n\n<pre><code>Errorjava.security.AccessControlException: access denied (\"java.lang.RuntimePermission\" \"getenv.windir\")\n</code></pre>\n\n<p>You need signed your applet for access to your filesystem. See this <a href=\"http://java.sun.com/developer/onlineTraining/Programming/JDCBook/signed.html\" rel=\"nofollow\">link</a> and <a href=\"http://docs.oracle.com/javase/1.5.0/docs/guide/security/spec/security-spec.doc1.html\" rel=\"nofollow\">this</a> too.</p>\n\n<p>Second, I have tried following code:</p>\n\n<pre><code>import java.io.File;\nimport java.io.FileInputStream;\nimport java.io.FileOutputStream;\n\nimport com.itextpdf.text.Document;\nimport com.itextpdf.text.pdf.PdfWriter;\nimport com.itextpdf.tool.xml.XMLWorkerHelper;\n\npublic class main {\n\n    public static void main(String[] args) {\n        File f = new File(\"C:/tmp/data.htm\");\n\n        File pdf = new File(\"C:/tmp/data.pdf\");\n        Document pdfDocument = null;\n        PdfWriter pdfWriter = null;\n        try {\n\n            pdfDocument = new Document();\n            pdfWriter = PdfWriter.getInstance(pdfDocument, new FileOutputStream(pdf));\n            pdfDocument.open();\n\n            XMLWorkerHelper.getInstance().parseXHtml(pdfWriter, pdfDocument,\n                    new FileInputStream(f));\n            pdfDocument.close();\n\n        } catch (Exception ex) {\n            ex.printStackTrace();\n        }\n\n    }\n}\n</code></pre>\n\n<p>If file data.htm (original data) is an htmlx, work fine. But if data.htm not is an xml, i get this error:</p>\n\n<pre><code>com.itextpdf.tool.xml.exceptions.RuntimeWorkerException: Invalid nested tag head found, expected closing tag meta.\n    at com.itextpdf.tool.xml.XMLWorker.endElement(XMLWorker.java:134)\n    at com.itextpdf.tool.xml.parser.XMLParser.endElement(XMLParser.java:395)\n    at com.itextpdf.tool.xml.parser.state.ClosingTagState.process(ClosingTagState.java:70)\n    at com.itextpdf.tool.xml.parser.XMLParser.parseWithReader(XMLParser.java:235)\n    at com.itextpdf.tool.xml.parser.XMLParser.parse(XMLParser.java:213)\n    at com.itextpdf.tool.xml.parser.XMLParser.parse(XMLParser.java:174)\n    at com.itextpdf.tool.xml.XMLWorkerHelper.parseXHtml(XMLWorkerHelper.java:220)\n    at com.itextpdf.tool.xml.XMLWorkerHelper.parseXHtml(XMLWorkerHelper.java:185)\n    at main.main(main.java:44)\n</code></pre>\n\n<p>Can you try with your data and with this example? The difference is that my example isn't an applet, is an java standalone.</p>\n\n<p>Regards</p>\n"}],"owner":{"account_id":1687927,"reputation":11,"user_id":1550832,"display_name":"user1550832"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":7008,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1646092845,"creation_date":1343201896,"question_id":11644852,"body_markdown":"I am using iText for a project. My program is supposed to run from inside a browser and I need it to convert an html file to a pdf file. When I run the program from NetBeans everything works fine. I sign my jar and run the Applet in a browser and then I get this error:\r\n\r\n`Errorjava.security.AccessControlException: access denied (&quot;java.lang.RuntimePermission&quot; &quot;getenv.windir&quot;)`\r\n\r\nFor the purpose of this post I have made a simple JApplet code which has the same problem:\r\n\r\n    public class RunApplet extends JApplet {\r\n\r\n        @Override\r\n        public void init() {\r\n            this.add(new JLabel(&quot;This is a labe&quot;));\r\n            File f = new File(&quot;C:/ReportGen/data.html&quot;);\r\n            File pdf = new File(&quot;C:/ReportGen/data.pdf&quot;);\r\n\r\n            try {\r\n                pdf.createNewFile();\r\n                Document pdfDocument = new Document();\r\n                PdfWriter writer = PdfWriter.getInstance(pdfDocument, new FileOutputStream(pdf));\r\n                pdfDocument.open();\r\n            \r\n                XMLWorkerHelper worker = XMLWorkerHelper.getInstance();\r\n            \r\n                FontFactoryImp imp = new FontFactoryImp();\r\n                imp.getFont(&quot;Arial&quot;);\r\n                FontFactory.setFontImp(imp);\r\n    \r\n                worker.parseXHtml(writer, pdfDocument, new FileInputStream(f));\r\n            \r\n                pdfDocument.close();\r\n                writer.close();\r\n                this.add(new JLabel(f.getAbsolutePath()));\r\n    \r\n            } catch (Exception ex) {\r\n                this.add(new JTextField(&quot;Error&quot;+ex));\r\n            }                       \r\n        }\r\n    }\r\n\r\n \r\nThe html file is created and is fine, but when I create the pdf file I get the exception and the pdf file is actually created, but is corrupt and I am unable to open it. Thanks in advance for your time.","title":"Converting html file to pdf using iText in JApplet","body":"<p>I am using iText for a project. My program is supposed to run from inside a browser and I need it to convert an html file to a pdf file. When I run the program from NetBeans everything works fine. I sign my jar and run the Applet in a browser and then I get this error:</p>\n\n<p><code>Errorjava.security.AccessControlException: access denied (\"java.lang.RuntimePermission\" \"getenv.windir\")</code></p>\n\n<p>For the purpose of this post I have made a simple JApplet code which has the same problem:</p>\n\n<pre><code>public class RunApplet extends JApplet {\n\n    @Override\n    public void init() {\n        this.add(new JLabel(\"This is a labe\"));\n        File f = new File(\"C:/ReportGen/data.html\");\n        File pdf = new File(\"C:/ReportGen/data.pdf\");\n\n        try {\n            pdf.createNewFile();\n            Document pdfDocument = new Document();\n            PdfWriter writer = PdfWriter.getInstance(pdfDocument, new FileOutputStream(pdf));\n            pdfDocument.open();\n\n            XMLWorkerHelper worker = XMLWorkerHelper.getInstance();\n\n            FontFactoryImp imp = new FontFactoryImp();\n            imp.getFont(\"Arial\");\n            FontFactory.setFontImp(imp);\n\n            worker.parseXHtml(writer, pdfDocument, new FileInputStream(f));\n\n            pdfDocument.close();\n            writer.close();\n            this.add(new JLabel(f.getAbsolutePath()));\n\n        } catch (Exception ex) {\n            this.add(new JTextField(\"Error\"+ex));\n        }                       \n    }\n}\n</code></pre>\n\n<p>The html file is created and is fine, but when I create the pdf file I get the exception and the pdf file is actually created, but is corrupt and I am unable to open it. Thanks in advance for your time.</p>\n"},{"tags":["java","android","eclipse","sharing","remote-access"],"comments":[{"owner":{"account_id":4717983,"reputation":521,"user_id":3816668,"accept_rate":14,"display_name":"Rajesh"},"score":0,"creation_date":1532502887,"post_id":9161889,"comment_id":89994147,"body_markdown":"is there any solution for this?now i have same requirement.","body":"is there any solution for this?now i have same requirement."}],"answers":[{"tags":[],"owner":{"account_id":1226315,"reputation":6728,"user_id":1191779,"display_name":"ramdroid"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1328542400,"creation_date":1328542400,"answer_id":9162552,"question_id":9161889,"body_markdown":"Smartphones can&#39;t directly connect to each others since they are running in different networks. The common way to solve this is an additional server component. All phones need to connect to the server and send their data. The server is pushing this data to other connected clients, probably by using push notifications. In Android Push Notifications are known as C2DM.\r\n\r\nAndroid developers blog:\r\n\r\nhttp://android-developers.blogspot.com/2010/05/android-cloud-to-device-messaging.html\r\n\r\nHere&#39;s another tutorial on the topic:\r\n\r\nhttp://www.zylinc.com/blog-reader/items/c2dm-a-simple-introduction-using-a-java-server.html\r\n","title":"Mobile to Mobile Remote Access using Android","body":"<p>Smartphones can't directly connect to each others since they are running in different networks. The common way to solve this is an additional server component. All phones need to connect to the server and send their data. The server is pushing this data to other connected clients, probably by using push notifications. In Android Push Notifications are known as C2DM.</p>\n\n<p>Android developers blog:</p>\n\n<p><a href=\"http://android-developers.blogspot.com/2010/05/android-cloud-to-device-messaging.html\" rel=\"nofollow\">http://android-developers.blogspot.com/2010/05/android-cloud-to-device-messaging.html</a></p>\n\n<p>Here's another tutorial on the topic:</p>\n\n<p><a href=\"http://www.zylinc.com/blog-reader/items/c2dm-a-simple-introduction-using-a-java-server.html\" rel=\"nofollow\">http://www.zylinc.com/blog-reader/items/c2dm-a-simple-introduction-using-a-java-server.html</a></p>\n"},{"tags":[],"owner":{"account_id":1272711,"reputation":1,"user_id":1228646,"display_name":"jenny"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1330008662,"creation_date":1330008662,"answer_id":9415343,"question_id":9161889,"body_markdown":"I like [2X RDP][1] a lot. It works very well on phone and tablet and connects to the regular Windows RDP server, so don’t have to install anything else on the server machine.\r\n\r\n\r\n  [1]: http://www.motoask.com/motorola-xoom-updates-f65/2x-client-rdp-remote-desktop-t4069.html","title":"Mobile to Mobile Remote Access using Android","body":"<p>I like <a href=\"http://www.motoask.com/motorola-xoom-updates-f65/2x-client-rdp-remote-desktop-t4069.html\" rel=\"nofollow\">2X RDP</a> a lot. It works very well on phone and tablet and connects to the regular Windows RDP server, so don’t have to install anything else on the server machine.</p>\n"}],"owner":{"account_id":1227179,"reputation":11,"user_id":1192524,"display_name":"CellXS"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":7375,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1646092845,"creation_date":1328539567,"question_id":9161889,"body_markdown":"i am developing an APP in Android which share screen to all android mobile phone connected in a session.\r\n\r\ni want to know that android provides any sdk which provides same service like desktop to dektop access as in team View  ?\r\n\r\nor any Idea, which SDK i have to used?\r\n\r\nThank you.","title":"Mobile to Mobile Remote Access using Android","body":"<p>i am developing an APP in Android which share screen to all android mobile phone connected in a session.</p>\n\n<p>i want to know that android provides any sdk which provides same service like desktop to dektop access as in team View  ?</p>\n\n<p>or any Idea, which SDK i have to used?</p>\n\n<p>Thank you.</p>\n"},{"tags":["java","lambda","java-11"],"comments":[{"owner":{"account_id":1485367,"reputation":122993,"user_id":1393766,"display_name":"Pshemo"},"score":1,"creation_date":1646078086,"post_id":71300361,"comment_id":126031165,"body_markdown":"Possibly related: [Does a lambda expression create an object on the heap every time it&#39;s executed?](https://stackoverflow.com/q/27524445)","body":"Possibly related: <a href=\"https://stackoverflow.com/q/27524445\">Does a lambda expression create an object on the heap every time it&#39;s executed?</a>"},{"owner":{"account_id":785560,"reputation":14879,"user_id":845414,"display_name":"Johannes Kuhn"},"score":3,"creation_date":1646078493,"post_id":71300361,"comment_id":126031282,"body_markdown":"The identity of a lambda is not specified. You may get different instances or the same instance. It&#39;s not specified. See also [JDK-8202922](https://bugs.openjdk.java.net/browse/JDK-8202922)","body":"The identity of a lambda is not specified. You may get different instances or the same instance. It&#39;s not specified. See also <a href=\"https://bugs.openjdk.java.net/browse/JDK-8202922\" rel=\"nofollow noreferrer\">JDK-8202922</a>"},{"owner":{"account_id":318670,"reputation":15681,"user_id":636009,"display_name":"David Conrad"},"score":1,"creation_date":1646079014,"post_id":71300361,"comment_id":126031439,"body_markdown":"You should not rely on the identity of lambdas, or to put it another way: lambada, the forbidden identity.","body":"You should not rely on the identity of lambdas, or to put it another way: lambada, the forbidden identity."},{"owner":{"account_id":785560,"reputation":14879,"user_id":845414,"display_name":"Johannes Kuhn"},"score":2,"creation_date":1646079109,"post_id":71300361,"comment_id":126031463,"body_markdown":"The comments of the linked bug go in much detail about the identity of lambdas. As Brian Goetz puts it: &quot; The explicit disclaimer about lambda identity is intended to make it clear that code that does `i1 == i2` on lambdas or methods references is intrinsically misguided&quot;.","body":"The comments of the linked bug go in much detail about the identity of lambdas. As Brian Goetz puts it: &quot; The explicit disclaimer about lambda identity is intended to make it clear that code that does <code>i1 == i2</code> on lambdas or methods references is intrinsically misguided&quot;."},{"owner":{"account_id":11623510,"reputation":1028,"user_id":8514043,"display_name":"maroodb"},"score":0,"creation_date":1646079497,"post_id":71300361,"comment_id":126031565,"body_markdown":"Thank you all for your comments, So I think it will be better to wrap it inside another object which will have an identity by adding an id attribute. or find a way to use a list instead","body":"Thank you all for your comments, So I think it will be better to wrap it inside another object which will have an identity by adding an id attribute. or find a way to use a list instead"}],"answers":[{"tags":[],"owner":{"account_id":6651855,"reputation":224830,"user_id":5133585,"accept_rate":96,"display_name":"Sweeper"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1646079209,"creation_date":1646079209,"answer_id":71300590,"question_id":71300361,"body_markdown":"According to [JLS 15.27.4][1] (emphasis mine):\r\n\r\n&gt; The value of a lambda expression is a reference to an instance of a class with the following properties:\r\n&gt;\r\n&gt; - [...]\r\n&gt; - The class overrides no other methods of the targeted functional interface type or other interface types mentioned above, although it ***may*** override methods of the `Object` class.\r\n\r\nSince it says &quot;may&quot;, the class of the lambda might have a custom implementation of `equals` &amp; `hashCode`, or it might not, depending on the implementation.\r\n\r\nAlso note:\r\n\r\n&gt; These rules are meant to offer flexibility to implementations of the\r\n&gt; Java programming language, in that:\r\n&gt; \r\n&gt; - A new object need not be allocated on every evaluation.\r\n&gt; \r\n&gt; - Objects produced by different lambda expressions need not belong to\r\n&gt; different classes (if the bodies are identical, for example).\r\n&gt; \r\n&gt; - Every object produced by evaluation need not belong to the same class\r\n&gt; (captured local variables might be inlined, for example).\r\n&gt; \r\n&gt; - If an &quot;existing instance&quot; is available, it need not have been created\r\n&gt; at a previous lambda evaluation (it might have been allocated during\r\n&gt; the enclosing class&#39;s initialization, for example).\r\n\r\nAn implementation could potentially see that both of your lambdas have identical bodies, and produce just one class for your lambda. That class&#39;s `equals` method could be overridden to return `true` for any object that is also an instance of that same class. It could even use the same object for both of your lambdas! In either case, if you add both lambdas to your set, your set would only have one element.\r\n\r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/specs/jls/se17/html/jls-15.html#jls-15.27.4","title":"Are java lambda functions unique (different hashCode and not equals)?","body":"<p>According to <a href=\"https://docs.oracle.com/javase/specs/jls/se17/html/jls-15.html#jls-15.27.4\" rel=\"nofollow noreferrer\">JLS 15.27.4</a> (emphasis mine):</p>\n<blockquote>\n<p>The value of a lambda expression is a reference to an instance of a class with the following properties:</p>\n<ul>\n<li>[...]</li>\n<li>The class overrides no other methods of the targeted functional interface type or other interface types mentioned above, although it <em><strong>may</strong></em> override methods of the <code>Object</code> class.</li>\n</ul>\n</blockquote>\n<p>Since it says &quot;may&quot;, the class of the lambda might have a custom implementation of <code>equals</code> &amp; <code>hashCode</code>, or it might not, depending on the implementation.</p>\n<p>Also note:</p>\n<blockquote>\n<p>These rules are meant to offer flexibility to implementations of the\nJava programming language, in that:</p>\n<ul>\n<li><p>A new object need not be allocated on every evaluation.</p>\n</li>\n<li><p>Objects produced by different lambda expressions need not belong to\ndifferent classes (if the bodies are identical, for example).</p>\n</li>\n<li><p>Every object produced by evaluation need not belong to the same class\n(captured local variables might be inlined, for example).</p>\n</li>\n<li><p>If an &quot;existing instance&quot; is available, it need not have been created\nat a previous lambda evaluation (it might have been allocated during\nthe enclosing class's initialization, for example).</p>\n</li>\n</ul>\n</blockquote>\n<p>An implementation could potentially see that both of your lambdas have identical bodies, and produce just one class for your lambda. That class's <code>equals</code> method could be overridden to return <code>true</code> for any object that is also an instance of that same class. It could even use the same object for both of your lambdas! In either case, if you add both lambdas to your set, your set would only have one element.</p>\n"}],"owner":{"account_id":11623510,"reputation":1028,"user_id":8514043,"display_name":"maroodb"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":409,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":71300590,"answer_count":1,"score":2,"last_activity_date":1646090798,"creation_date":1646077824,"question_id":71300361,"body_markdown":"I am wondering if a java lambda function is always unique?\r\nIf it is, what makes it unique?\r\n\r\nIn this pseudo code I have two Consumer with the some code but are not equals and hashCodes are differents too.\r\n   \r\n\r\n        Consumer&lt;String&gt; c1 = s -&gt; {\r\n            System.out.println(s);\r\n        };\r\n        Consumer&lt;String&gt; c2 = s -&gt; {\r\n            System.out.println(s);\r\n        };\r\n\r\n        System.out.println(c1.hashCode());  \r\n        System.out.println(c2.hashCode());\r\n        System.out.println(c1.equals(c2)); // false:  is it always false?\r\n\r\nI want to store a list of lambda in a Set, and I am not sure if I will not lose some elements if by accident I got two lambda functions with equal hashCodes.\r\n","title":"Are java lambda functions unique (different hashCode and not equals)?","body":"<p>I am wondering if a java lambda function is always unique?\nIf it is, what makes it unique?</p>\n<p>In this pseudo code I have two Consumer with the some code but are not equals and hashCodes are differents too.</p>\n<pre><code>    Consumer&lt;String&gt; c1 = s -&gt; {\n        System.out.println(s);\n    };\n    Consumer&lt;String&gt; c2 = s -&gt; {\n        System.out.println(s);\n    };\n\n    System.out.println(c1.hashCode());  \n    System.out.println(c2.hashCode());\n    System.out.println(c1.equals(c2)); // false:  is it always false?\n</code></pre>\n<p>I want to store a list of lambda in a Set, and I am not sure if I will not lose some elements if by accident I got two lambda functions with equal hashCodes.</p>\n"},{"tags":["python","java","jython"],"comments":[{"owner":{"account_id":3557625,"reputation":198996,"user_id":2970947,"display_name":"Elliott Frisch"},"score":0,"creation_date":1646092268,"post_id":71302026,"comment_id":126034679,"body_markdown":"I think you&#39;re looking for `testClass.invoke(&quot;TestFunc&quot;)`","body":"I think you&#39;re looking for <code>testClass.invoke(&quot;TestFunc&quot;)</code>"},{"owner":{"account_id":979252,"reputation":291,"user_id":999430,"accept_rate":57,"display_name":"Ari Black"},"score":0,"creation_date":1646096906,"post_id":71302026,"comment_id":126035390,"body_markdown":"@ElliottFrisch You are absolutely correct! Any chance you know of an invoke that will take Java objects like _jcall does? I will need to pass complex Java objects as arguments. Please add your reply as an answer so I can accept it.","body":"@ElliottFrisch You are absolutely correct! Any chance you know of an invoke that will take Java objects like _jcall does? I will need to pass complex Java objects as arguments. Please add your reply as an answer so I can accept it."}],"owner":{"account_id":979252,"reputation":291,"user_id":999430,"accept_rate":57,"display_name":"Ari Black"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":86,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1646089661,"creation_date":1646089661,"question_id":71302026,"body_markdown":"Python code\r\n```\r\nclass TestClass(object):\r\n    def TestFunc(self):\r\n        print(&quot;TestFunc!&quot;)\r\n\r\n_test_class = TestClass()\r\n\r\ndef TestFunc():\r\n    _test_class.TestFunc()\r\n```\r\n\r\nJava code\r\n```\r\npublic static void Main(String[] args){\r\n    PythonInterpreter pi = new PythonInterpreter();\r\n\r\n    // Execute python code here using pi.execfile() or pi.exec()\r\n\r\n    PyObject testClass = pi.get(&quot;_test_class&quot;);\r\n    // testClass is successfully obtained\r\n   \r\n    // &lt;- Answer goes here    \r\n}\r\n```\r\n\r\nSo, here&#39;s my question. Can and, if so, how do I call TestFunc() on the TestClass instance I retrieved from the Python interpreter?\r\n\r\nI can easily get the non-class TestFunc function from the interpreter\r\n`PyObject func = pi.get(&quot;TestFunc&quot;)` and then call it &#39;func.__ call __()&#39; so that&#39;s one solution but I&#39;d prefer to call a function directly on the instance.\r\n\r\nSo, questions are:\r\n1. How can I directly call a class instance function once I&#39;ve retrieved the instance?\r\n2. If 1 isn&#39;t possible, can I retrieve a PyObject representing the function from the instance and call that? If yes, how? Will it be called on the instance it was retrieved from?\r\n3. If neither 1 nor 2, what&#39;s the way to do this? Is a module-level &quot;wrapper&quot; function like TestFunc() the only way?","title":"Call Python class instance function from Java","body":"<p>Python code</p>\n<pre><code>class TestClass(object):\n    def TestFunc(self):\n        print(&quot;TestFunc!&quot;)\n\n_test_class = TestClass()\n\ndef TestFunc():\n    _test_class.TestFunc()\n</code></pre>\n<p>Java code</p>\n<pre><code>public static void Main(String[] args){\n    PythonInterpreter pi = new PythonInterpreter();\n\n    // Execute python code here using pi.execfile() or pi.exec()\n\n    PyObject testClass = pi.get(&quot;_test_class&quot;);\n    // testClass is successfully obtained\n   \n    // &lt;- Answer goes here    \n}\n</code></pre>\n<p>So, here's my question. Can and, if so, how do I call TestFunc() on the TestClass instance I retrieved from the Python interpreter?</p>\n<p>I can easily get the non-class TestFunc function from the interpreter\n<code>PyObject func = pi.get(&quot;TestFunc&quot;)</code> and then call it 'func.__ call __()' so that's one solution but I'd prefer to call a function directly on the instance.</p>\n<p>So, questions are:</p>\n<ol>\n<li>How can I directly call a class instance function once I've retrieved the instance?</li>\n<li>If 1 isn't possible, can I retrieve a PyObject representing the function from the instance and call that? If yes, how? Will it be called on the instance it was retrieved from?</li>\n<li>If neither 1 nor 2, what's the way to do this? Is a module-level &quot;wrapper&quot; function like TestFunc() the only way?</li>\n</ol>\n"},{"tags":["java","sftp","jsch"],"answers":[{"tags":[],"owner":{"account_id":453710,"reputation":192093,"user_id":850848,"accept_rate":80,"display_name":"Martin Prikryl"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1516172604,"creation_date":1516172604,"answer_id":48295356,"question_id":48288677,"body_markdown":"While you can use one SFTP connection/JSch session for multiple downloads, the JSch session is definitely not thread safe. \r\n\r\nSo if you need to run the downloads is separate threads, you have to open new connection for (in) each thread. Your download performance will be much better this way too.","title":"Multiple file downloads from SFTP using JSch failing with &quot;Request queue: Unknown request issue&quot;","body":"<p>While you can use one SFTP connection/JSch session for multiple downloads, the JSch session is definitely not thread safe. </p>\n\n<p>So if you need to run the downloads is separate threads, you have to open new connection for (in) each thread. Your download performance will be much better this way too.</p>\n"}],"owner":{"account_id":11955906,"reputation":881,"user_id":8748279,"display_name":"Ravi"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2393,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":48295356,"answer_count":1,"score":0,"last_activity_date":1646089177,"creation_date":1516131696,"question_id":48288677,"body_markdown":"I  am trying to download multiple files from FTP server. It works fine when i simply put it through a for loop . I don&#39;t know the file size which may vary , might be too small or too big. So, i am downloading them using executor service. When i put the download function through executor, i get Request queue: Unknown request issue . Please let me know where i&#39;m going wrong.\r\n\r\n    System.out.println(&quot;Connecting to FTP Server&quot;);\r\n    Session session = null;\r\n    ChannelSftp channelSftp = null;\r\n\r\n\tJSch jsch = new JSch();\r\n\tsession = jsch.getSession(sftpUser,sftpHost,22);    \t\r\n\tsession.setPassword(sftpPassword);\r\n\tjava.util.Properties config = new java.util.Properties();\r\n\tconfig.put(&quot;StrictHostKeyChecking&quot;, &quot;no&quot;);\r\n\tsession.setConfig(config);\r\n\tsession.connect();\r\n\tSystem.out.println(&quot;Session Connected Status: &quot;+session.isConnected());\r\n\tChannel channel = session.openChannel(&quot;sftp&quot;);\r\n\tchannel.connect();\r\n\tchannelSftp = (ChannelSftp)channel;\t\r\n\tSystem.out.println(&quot;Channel Connected Status: &quot;+channelSftp.isConnected());\r\n\tSystem.out.println(&quot;File: &quot;+sourceFilePath);\r\n\r\n\tif(channelSftp.isConnected())\r\n\t{\r\n\t\tString path = this.propertyManager.getValue(&quot;targetDirectoryPath&quot;);\r\n\t\tchannelSftp.cd(path);\r\n\t\tVector filelist = channelSftp.ls(path);\r\n\r\n\t\tfor(int i=0; i&lt;filelist.size();i++)\r\n\t\t{\r\n\t\t\tLsEntry entry = (LsEntry) filelist.get(i);\r\n\t\t\tString fileName \t= sourceFilePath + entry.getFilename();\r\n\t\t\tdestinationFilePath =  ShipmentUtils.getDownloadPath(entry.getFilename());\r\n\r\n\t\t\tSystem.err.println(entry.getFilename());\r\n\t\t\texec.execute(new FileDownloader(destinationFilePath, channelSftp.get(fileName)));\r\n\t\t}\r\n\t}\r\n\tchannelSftp.disconnect();\r\n\tsession.disconnect();\r\n\r\nHere is the downloader class \r\n\r\n    private class FileDownloader implements Runnable\r\n\t{\r\n\t\tString destinationFilePath;\r\n\t\tInputStream stream;\r\n\t\t\r\n\t\tpublic  FileDownloader(String destinationFilePath , InputStream stream) {\r\n\t\t\tthis.destinationFilePath = destinationFilePath;\r\n\t\t\tthis.stream = stream;\r\n\t\t}\r\n\t\t\r\n\t\t@Override\r\n\t\tpublic void run() {\r\n\t\t\tbyte[] buffer = new byte[1024];\r\n\t\t\tBufferedOutputStream bos = null;\r\n\t\t\tBufferedInputStream   bis = null ;\r\n\r\n\t\t\ttry\r\n\t\t\t{\r\n\t\t\t\tbis = new BufferedInputStream(stream);\r\n\t\t\t\tFile newFile = new File(destinationFilePath);\r\n\t\t\t\tOutputStream os = new FileOutputStream(newFile);\r\n\r\n\t\t\t\tbos = new BufferedOutputStream(os);\r\n\t\t\t\tint readCount=0;\r\n\t\t\t\twhile( (readCount = bis.read(buffer)) &gt; 0) {\r\n\t\t\t\t\tbos.write(buffer, 0, readCount);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tcatch (Exception e) {\r\n\t\t\t\te.printStackTrace();\r\n\t\t\t}\r\n\t\t\tfinally {\r\n\t\t\t\ttry {\r\n\t\t\t\t\tif(bis != null) bis.close();\r\n\t\t\t\t\tif(bos != null) bos.close();\t\r\n\t\t\t\t} catch (IOException e) {\r\n\t\t\t\t\te.printStackTrace();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\r\n\t\t}\r\n\t\t\r\n\t}\r\n\r\nThis is the error\r\n\r\n&lt;!-- language: lang-none --&gt;\r\n\r\n    java.io.IOException: error: 4: RequestQueue: unknown request id 1399811183\r\n        at com.jcraft.jsch.ChannelSftp$2.read(ChannelSftp.java:1406)\r\n        at java.io.BufferedInputStream.fill(Unknown Source)\r\n        at java.io.BufferedInputStream.read1(Unknown Source)\r\n        at java.io.BufferedInputStream.read(Unknown Source)\r\n        at java.io.FilterInputStream.read(Unknown Source)\r\n        at com.shipmentprocessing.network.FTPConnector$FileDownloader.run(FTPConnector.java:141)\r\n        at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)\r\n        at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)\r\n        at java.lang.Thread.run(Unknown Source)\r\n    java.io.IOException: error\r\n        at com.jcraft.jsch.ChannelSftp$2.close(ChannelSftp.java:1505)\r\n        at java.io.BufferedInputStream.close(Unknown Source)\r\n        at com.shipmentprocessing.network.FTPConnector$FileDownloader.run(FTPConnector.java:150)\r\n        at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)\r\n        at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)\r\n        at java.lang.Thread.run(Unknown Source)\r\n\r\n\r\n\r\n","title":"Multiple file downloads from SFTP using JSch failing with &quot;Request queue: Unknown request issue&quot;","body":"<p>I  am trying to download multiple files from FTP server. It works fine when i simply put it through a for loop . I don't know the file size which may vary , might be too small or too big. So, i am downloading them using executor service. When i put the download function through executor, i get Request queue: Unknown request issue . Please let me know where i'm going wrong.</p>\n\n<pre><code>System.out.println(\"Connecting to FTP Server\");\nSession session = null;\nChannelSftp channelSftp = null;\n\nJSch jsch = new JSch();\nsession = jsch.getSession(sftpUser,sftpHost,22);        \nsession.setPassword(sftpPassword);\njava.util.Properties config = new java.util.Properties();\nconfig.put(\"StrictHostKeyChecking\", \"no\");\nsession.setConfig(config);\nsession.connect();\nSystem.out.println(\"Session Connected Status: \"+session.isConnected());\nChannel channel = session.openChannel(\"sftp\");\nchannel.connect();\nchannelSftp = (ChannelSftp)channel; \nSystem.out.println(\"Channel Connected Status: \"+channelSftp.isConnected());\nSystem.out.println(\"File: \"+sourceFilePath);\n\nif(channelSftp.isConnected())\n{\n    String path = this.propertyManager.getValue(\"targetDirectoryPath\");\n    channelSftp.cd(path);\n    Vector filelist = channelSftp.ls(path);\n\n    for(int i=0; i&lt;filelist.size();i++)\n    {\n        LsEntry entry = (LsEntry) filelist.get(i);\n        String fileName     = sourceFilePath + entry.getFilename();\n        destinationFilePath =  ShipmentUtils.getDownloadPath(entry.getFilename());\n\n        System.err.println(entry.getFilename());\n        exec.execute(new FileDownloader(destinationFilePath, channelSftp.get(fileName)));\n    }\n}\nchannelSftp.disconnect();\nsession.disconnect();\n</code></pre>\n\n<p>Here is the downloader class </p>\n\n<pre><code>private class FileDownloader implements Runnable\n{\n    String destinationFilePath;\n    InputStream stream;\n\n    public  FileDownloader(String destinationFilePath , InputStream stream) {\n        this.destinationFilePath = destinationFilePath;\n        this.stream = stream;\n    }\n\n    @Override\n    public void run() {\n        byte[] buffer = new byte[1024];\n        BufferedOutputStream bos = null;\n        BufferedInputStream   bis = null ;\n\n        try\n        {\n            bis = new BufferedInputStream(stream);\n            File newFile = new File(destinationFilePath);\n            OutputStream os = new FileOutputStream(newFile);\n\n            bos = new BufferedOutputStream(os);\n            int readCount=0;\n            while( (readCount = bis.read(buffer)) &gt; 0) {\n                bos.write(buffer, 0, readCount);\n            }\n        }\n        catch (Exception e) {\n            e.printStackTrace();\n        }\n        finally {\n            try {\n                if(bis != null) bis.close();\n                if(bos != null) bos.close();    \n            } catch (IOException e) {\n                e.printStackTrace();\n            }\n        }\n\n    }\n\n}\n</code></pre>\n\n<p>This is the error</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>java.io.IOException: error: 4: RequestQueue: unknown request id 1399811183\n    at com.jcraft.jsch.ChannelSftp$2.read(ChannelSftp.java:1406)\n    at java.io.BufferedInputStream.fill(Unknown Source)\n    at java.io.BufferedInputStream.read1(Unknown Source)\n    at java.io.BufferedInputStream.read(Unknown Source)\n    at java.io.FilterInputStream.read(Unknown Source)\n    at com.shipmentprocessing.network.FTPConnector$FileDownloader.run(FTPConnector.java:141)\n    at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)\n    at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)\n    at java.lang.Thread.run(Unknown Source)\njava.io.IOException: error\n    at com.jcraft.jsch.ChannelSftp$2.close(ChannelSftp.java:1505)\n    at java.io.BufferedInputStream.close(Unknown Source)\n    at com.shipmentprocessing.network.FTPConnector$FileDownloader.run(FTPConnector.java:150)\n    at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)\n    at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)\n    at java.lang.Thread.run(Unknown Source)\n</code></pre>\n"},{"tags":["java","spring","http"],"answers":[{"tags":[],"owner":{"account_id":433655,"reputation":939,"user_id":7053505,"display_name":"Peter Gyschuk"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1579279434,"creation_date":1579279434,"answer_id":59791567,"question_id":59791349,"body_markdown":"You are using invalid content type. To send binary data which browser have to consider as file(binary) you have to use `application/octet-stream`\r\n \r\nCheck [list of media-types][1] for complete list of valid content types for HTTP protocol\r\n\r\n\r\n  [1]: https://www.iana.org/assignments/media-types/media-types.xhtml","title":"Controller opens file in the browser instead of downloading it","body":"<p>You are using invalid content type. To send binary data which browser have to consider as file(binary) you have to use <code>application/octet-stream</code></p>\n\n<p>Check <a href=\"https://www.iana.org/assignments/media-types/media-types.xhtml\" rel=\"nofollow noreferrer\">list of media-types</a> for complete list of valid content types for HTTP protocol</p>\n"},{"tags":[],"owner":{"account_id":15099233,"reputation":190,"user_id":10896770,"display_name":"wisnix"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1579514284,"creation_date":1579514284,"answer_id":59820791,"question_id":59791349,"body_markdown":"Removing `response.flushBuffer();` has fixed my issue.","title":"Controller opens file in the browser instead of downloading it","body":"<p>Removing <code>response.flushBuffer();</code> has fixed my issue.</p>\n"}],"owner":{"account_id":15099233,"reputation":190,"user_id":10896770,"display_name":"wisnix"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":259,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":59820791,"answer_count":2,"score":0,"last_activity_date":1646089134,"creation_date":1579278598,"question_id":59791349,"body_markdown":"I have created a controller to download a file, it works fine for small files but for bigger ones instead of downloading, it just opens the file in the browser(2kB file was downloaded but 12kB opened). I am aware of different options for downloading a file from controller but I would like to know what is the root cause of problem in my code.\r\n\r\nMy Controller:\r\n\r\n        @GetMapping(&quot;/logs/getfile&quot;)\r\n    \tpublic void getFile(@RequestParam String logFile,HttpServletResponse response) {\r\n    \t\ttry {\t\t\t\r\n    \t\t\tString directory = &quot;C:\\\\Users\\\\user\\\\Documents\\\\&quot;;\t\t\t\r\n    \t\t\tInputStream is=new FileInputStream(new File(directory+logFile));\r\n    \t\t\tIOUtils.copy(is, response.getOutputStream());\r\n    \t\t\tresponse.setContentType(&quot;application/force-download&quot;);\r\n    \t\t\tresponse.addHeader(&quot;Content-Disposition&quot;, &quot;attachment; filename=&quot;+logFile);\r\n    \t\t\tresponse.flushBuffer();\r\n    \t\t}catch(IOException ex) {\r\n    \t\t\tex.printStackTrace();\r\n    \t\t}\r\n    \t}","title":"Controller opens file in the browser instead of downloading it","body":"<p>I have created a controller to download a file, it works fine for small files but for bigger ones instead of downloading, it just opens the file in the browser(2kB file was downloaded but 12kB opened). I am aware of different options for downloading a file from controller but I would like to know what is the root cause of problem in my code.</p>\n\n<p>My Controller:</p>\n\n<pre><code>    @GetMapping(\"/logs/getfile\")\n    public void getFile(@RequestParam String logFile,HttpServletResponse response) {\n        try {           \n            String directory = \"C:\\\\Users\\\\user\\\\Documents\\\\\";          \n            InputStream is=new FileInputStream(new File(directory+logFile));\n            IOUtils.copy(is, response.getOutputStream());\n            response.setContentType(\"application/force-download\");\n            response.addHeader(\"Content-Disposition\", \"attachment; filename=\"+logFile);\n            response.flushBuffer();\n        }catch(IOException ex) {\n            ex.printStackTrace();\n        }\n    }\n</code></pre>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":1938802,"reputation":12091,"user_id":1745544,"accept_rate":23,"display_name":"OldProgrammer"},"score":1,"creation_date":1646083691,"post_id":71300890,"comment_id":126032767,"body_markdown":"and what does, &quot; I can&#39;t do that&quot; mean?","body":"and what does, &quot; I can&#39;t do that&quot; mean?"},{"owner":{"account_id":2562742,"reputation":5917,"user_id":2851311,"display_name":"hfontanez"},"score":0,"creation_date":1646088631,"post_id":71300890,"comment_id":126033965,"body_markdown":"You should create getter method for each of the attributes of your class.","body":"You should create getter method for each of the attributes of your class."}],"answers":[{"tags":[],"owner":{"account_id":2562742,"reputation":5917,"user_id":2851311,"display_name":"hfontanez"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1646088994,"creation_date":1646088994,"answer_id":71301948,"question_id":71300890,"body_markdown":"Your `output` method is wrong. Since the variable `processor` is global, you can change it like this:\r\n```\r\nvoid output(){\r\n    System.out.println(processor);\r\n}\r\n```\r\nOr, pass an instance of `Laptop` and keep the method body the way it was before.\r\n```\r\nvoid output(Laptop l1){\r\n    System.out.println(l1.processor);\r\n}\r\n```\r\nOf course, `l1` is not a good variable name.","title":"Print l1.processor in a method","body":"<p>Your <code>output</code> method is wrong. Since the variable <code>processor</code> is global, you can change it like this:</p>\n<pre><code>void output(){\n    System.out.println(processor);\n}\n</code></pre>\n<p>Or, pass an instance of <code>Laptop</code> and keep the method body the way it was before.</p>\n<pre><code>void output(Laptop l1){\n    System.out.println(l1.processor);\n}\n</code></pre>\n<p>Of course, <code>l1</code> is not a good variable name.</p>\n"}],"owner":{"account_id":23989140,"reputation":13,"user_id":17975549,"display_name":"Abdul Hannan"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":32,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1646088994,"creation_date":1646081292,"question_id":71300890,"body_markdown":"I want to print the `l1.processor` (an attribute of object l1) in a method but I can&#39;t do that. Here&#39;s my code:\r\n\r\n```\r\npackage com.company;\r\nimport java.util.Scanner;\r\n\r\npublic class Laptop {\r\n\r\n    String processor;\r\n    int gen;\r\n    int ram;\r\n    int hdd;\r\n    int ssd;\r\n\r\n    void output(){\r\n        System.out.println(l1.processor);\r\n    }\r\n\r\n    public static void main(String[] args) {\r\n        Scanner sc = new Scanner(System.in);\r\n\r\n        Laptop l1 = new Laptop();\r\n        Laptop l2 = new Laptop();\r\n        Laptop l3 = new Laptop();\r\n\r\n        l1.processor = sc.nextLine();\r\n        System.out.println(&quot;Processor: &quot; + l1.processor);\r\n\r\n    }\r\n}\r\n```","title":"Print l1.processor in a method","body":"<p>I want to print the <code>l1.processor</code> (an attribute of object l1) in a method but I can't do that. Here's my code:</p>\n<pre><code>package com.company;\nimport java.util.Scanner;\n\npublic class Laptop {\n\n    String processor;\n    int gen;\n    int ram;\n    int hdd;\n    int ssd;\n\n    void output(){\n        System.out.println(l1.processor);\n    }\n\n    public static void main(String[] args) {\n        Scanner sc = new Scanner(System.in);\n\n        Laptop l1 = new Laptop();\n        Laptop l2 = new Laptop();\n        Laptop l3 = new Laptop();\n\n        l1.processor = sc.nextLine();\n        System.out.println(&quot;Processor: &quot; + l1.processor);\n\n    }\n}\n</code></pre>\n"},{"tags":["java","hibernate","jpa","localdate","java.util.date"],"comments":[{"owner":{"account_id":322981,"reputation":310745,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":3,"creation_date":1645944074,"post_id":71281891,"comment_id":125999666,"body_markdown":"FYI, both of the terrible `Date` classes were years ago supplanted by the modern *java.time* classes. Sun, Oracle, and the JCP all gave up on those legacy classes when they adopted JSR 310 unanimously. I suggest you too move on to the *java.time* classes. JDBC, Spring, JPA, and Hibernate have all been updated to support *java.time*.","body":"FYI, both of the terrible <code>Date</code> classes were years ago supplanted by the modern <i>java.time</i> classes. Sun, Oracle, and the JCP all gave up on those legacy classes when they adopted JSR 310 unanimously. I suggest you too move on to the <i>java.time</i> classes. JDBC, Spring, JPA, and Hibernate have all been updated to support <i>java.time</i>."},{"owner":{"account_id":24313730,"reputation":31,"user_id":18255305,"display_name":"Renba Urq"},"score":0,"creation_date":1645945138,"post_id":71281891,"comment_id":125999805,"body_markdown":"wow, thanks a lot  for that info, i didnt knew that","body":"wow, thanks a lot  for that info, i didnt knew that"}],"owner":{"account_id":24313730,"reputation":31,"user_id":18255305,"display_name":"Renba Urq"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":59,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1646088502,"creation_date":1645932444,"question_id":71281891,"body_markdown":"I know there are many solutions out there for this using collections with LocalDate,\r\nbut what if my entity uses Date? Is there a way to group fields by day and create a sum of them? This is an example of my entity:\r\n```java\r\npublic class Gas extends BaseEntity implements Serializable {\r\n\r\n\tprivate static final long serialVersionUID = 1L;\r\n\r\n\t@Id\r\n\t@Column(name = &quot;ID&quot;)\r\n\tprivate long id;\r\n\t\r\n    // stores like: 12/10/21 14:10:00.000000000\r\n\t@Temporal(javax.persistence.TemporalType.TIMESTAMP)\r\n\tprivate Date dateProd;\r\n\r\n\tprivate double mw;\r\n\r\n}\r\n```","title":"How to group and sum a field by day if I use Date on my entity?","body":"<p>I know there are many solutions out there for this using collections with LocalDate,\nbut what if my entity uses Date? Is there a way to group fields by day and create a sum of them? This is an example of my entity:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class Gas extends BaseEntity implements Serializable {\n\n    private static final long serialVersionUID = 1L;\n\n    @Id\n    @Column(name = &quot;ID&quot;)\n    private long id;\n    \n    // stores like: 12/10/21 14:10:00.000000000\n    @Temporal(javax.persistence.TemporalType.TIMESTAMP)\n    private Date dateProd;\n\n    private double mw;\n\n}\n</code></pre>\n"},{"tags":["java","server","bufferedreader","bufferedwriter"],"comments":[{"owner":{"account_id":3042393,"reputation":643,"user_id":2579066,"accept_rate":50,"display_name":"Marvin"},"score":1,"creation_date":1645993693,"post_id":71287823,"comment_id":126009303,"body_markdown":"This is not how HTTP works.  Either have multipart content or separate code for each object.","body":"This is not how HTTP works.  Either have multipart content or separate code for each object."},{"owner":{"account_id":322981,"reputation":310745,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":1,"creation_date":1645996274,"post_id":71287823,"comment_id":126009858,"body_markdown":"You must send only a single set of headers. Study up on HTTP, starting with the [Wikipedia page](https://en.wikipedia.org/wiki/Hypertext_Transfer_Protocol#Response_header_fields).","body":"You must send only a single set of headers. Study up on HTTP, starting with the <a href=\"https://en.wikipedia.org/wiki/Hypertext_Transfer_Protocol#Response_header_fields\" rel=\"nofollow noreferrer\">Wikipedia page</a>."}],"answers":[{"tags":[],"owner":{"account_id":5289146,"reputation":8128,"user_id":4222206,"display_name":"queeg"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1646003450,"creation_date":1646003450,"answer_id":71289203,"question_id":71287823,"body_markdown":"You succeeded in transferring a simple HTML page to the client. That is a good base. Add\r\n\r\n    &lt;img src=&quot;...&quot;/&gt;\r\n\r\ninto the HTML and you will see that after downloading that HTML from your server the client comes back with a new connection, asking for the image to be delivered. The response on that second request must be the image only, not the HTML page.\r\n\r\nSo you need to distinguish what the client is requesting and serve the correct content.","title":"Creating a Simple Java Webserver. Image is not showing up","body":"<p>You succeeded in transferring a simple HTML page to the client. That is a good base. Add</p>\n<pre><code>&lt;img src=&quot;...&quot;/&gt;\n</code></pre>\n<p>into the HTML and you will see that after downloading that HTML from your server the client comes back with a new connection, asking for the image to be delivered. The response on that second request must be the image only, not the HTML page.</p>\n<p>So you need to distinguish what the client is requesting and serve the correct content.</p>\n"},{"tags":[],"owner":{"account_id":2053598,"reputation":41316,"user_id":1831987,"display_name":"VGR"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1646088193,"creation_date":1646088193,"answer_id":71301855,"question_id":71287823,"body_markdown":"A socket serving HTTP waits for a single HTTP request, then provides a single response for that request.\r\n\r\nYou cannot just dump all of your responses into a single socket.  You have to examine the request you have received, then provide a response which is appropriate for that request.\r\n\r\nThe first thing you must do is examine the first line in the InputStream.  This is the greeting line, which must be in the format *method* *path* HTTP/*version*.\r\n\r\n*method* is a standard HTTP request method (always `GET` in the case of your program).  *path* is based on the URL entered into the browser, probably `www/index.html` or `www/1st.png`.  *version* is one of `1.0`, `1.1`, or `2.0`.\r\n\r\nSo you need to parse that line before you do anything else:\r\n\r\n    String greeting = in.readLine();\r\n    if (greeting == null) {\r\n        throw new IOException(&quot;Missing greeting.&quot;);\r\n    }\r\n\r\n    String[] parts = greeting.split(&quot; &quot;);\r\n    String requestPath = parts[1];\r\n\r\nThen you can decide what to return based on that path:\r\n\r\n    byte[] contentToReturn;\r\n    String contentType;\r\n    if (requestPath.endsWith(&quot;1st.png&quot;)) {\r\n        contentToReturn = imageToBytes;\r\n        contentType = &quot;image/png&quot;;\r\n    } else \r\n        contentToReturn = html;\r\n        contentType = &quot;text/html; charset=UTF-8&quot;;\r\n    }\r\n\r\nThen you must write *only that one file* to the response:\r\n\r\n    DataOutputStream out = new DataOutputStream(s.getOutputStream());\r\n\r\n    out.writeBytes(&quot;HTTP/1.0 200 Document Follows\\r\\n&quot; +\r\n            &quot;Content-Type: &quot; + contentType + &quot;\\r\\n&quot; +\r\n            &quot;Content-Length: &quot; + contentToReturn.length + &quot;\\r\\n&quot; +\r\n            &quot;\\r\\n&quot;);\r\n\r\n    out.write(contentToReturn);\r\n    out.close();\r\n\r\nThe browser will open a new socket (that is, an HTTP connection) for the HTML file and for each resource (such as an image) referenced in the HTML file.  You only have to be prepared to serve each one.\r\n\r\nSome other points:\r\n\r\n* Spaces matter.  Do not put a space at the end of any header line before the `\\r\\n`.\r\n* Spaces matter in header names.  It&#39;s `Content-Type`, not `Content - Type`.  The first form is valid, the other is not.\r\n* There is no need to flush an OutputStream before closing it.  `close()` is guaranteed to flush any remaining data.\r\n","title":"Creating a Simple Java Webserver. Image is not showing up","body":"<p>A socket serving HTTP waits for a single HTTP request, then provides a single response for that request.</p>\n<p>You cannot just dump all of your responses into a single socket.  You have to examine the request you have received, then provide a response which is appropriate for that request.</p>\n<p>The first thing you must do is examine the first line in the InputStream.  This is the greeting line, which must be in the format <em>method</em> <em>path</em> HTTP/<em>version</em>.</p>\n<p><em>method</em> is a standard HTTP request method (always <code>GET</code> in the case of your program).  <em>path</em> is based on the URL entered into the browser, probably <code>www/index.html</code> or <code>www/1st.png</code>.  <em>version</em> is one of <code>1.0</code>, <code>1.1</code>, or <code>2.0</code>.</p>\n<p>So you need to parse that line before you do anything else:</p>\n<pre><code>String greeting = in.readLine();\nif (greeting == null) {\n    throw new IOException(&quot;Missing greeting.&quot;);\n}\n\nString[] parts = greeting.split(&quot; &quot;);\nString requestPath = parts[1];\n</code></pre>\n<p>Then you can decide what to return based on that path:</p>\n<pre><code>byte[] contentToReturn;\nString contentType;\nif (requestPath.endsWith(&quot;1st.png&quot;)) {\n    contentToReturn = imageToBytes;\n    contentType = &quot;image/png&quot;;\n} else \n    contentToReturn = html;\n    contentType = &quot;text/html; charset=UTF-8&quot;;\n}\n</code></pre>\n<p>Then you must write <em>only that one file</em> to the response:</p>\n<pre><code>DataOutputStream out = new DataOutputStream(s.getOutputStream());\n\nout.writeBytes(&quot;HTTP/1.0 200 Document Follows\\r\\n&quot; +\n        &quot;Content-Type: &quot; + contentType + &quot;\\r\\n&quot; +\n        &quot;Content-Length: &quot; + contentToReturn.length + &quot;\\r\\n&quot; +\n        &quot;\\r\\n&quot;);\n\nout.write(contentToReturn);\nout.close();\n</code></pre>\n<p>The browser will open a new socket (that is, an HTTP connection) for the HTML file and for each resource (such as an image) referenced in the HTML file.  You only have to be prepared to serve each one.</p>\n<p>Some other points:</p>\n<ul>\n<li>Spaces matter.  Do not put a space at the end of any header line before the <code>\\r\\n</code>.</li>\n<li>Spaces matter in header names.  It's <code>Content-Type</code>, not <code>Content - Type</code>.  The first form is valid, the other is not.</li>\n<li>There is no need to flush an OutputStream before closing it.  <code>close()</code> is guaranteed to flush any remaining data.</li>\n</ul>\n"}],"owner":{"account_id":24059523,"reputation":1,"user_id":18082589,"display_name":"Lu&#237;s Soares"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":368,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1646088193,"creation_date":1645989895,"question_id":71287823,"body_markdown":"I&#39;m currently in (1st year) college and was assigned to do Java Server. Currently, I have created a really simple HTML page (Hello world style) and text shows up in the Localhost. However, when I insert an image into it, it doesn&#39;t show up... I get that the header should &quot;tell&quot; that there&#39;s an image coming to the server so it can read an image as such, but how do I do it? As you can see by my code, as last resort, I tried to pass a second header for that image, but I also get an error &quot;SocketException&quot;. How do I, through an HTML page, pass image and text to my webserver so it shows up on my localhost?\r\n\r\n```\r\nimport java.io.*;\r\nimport java.net.ServerSocket;\r\nimport java.net.Socket;\r\nimport java.nio.charset.StandardCharsets;\r\nimport java.nio.file.Files;\r\nimport java.nio.file.Paths;\r\n\r\npublic class Server {\r\n    public static void main(String[] args) {\r\n        String pathImage = &quot;www/1st.png&quot;;\r\n        String pathHTML = &quot;www/index.html&quot;;\r\n\r\n        try {\r\n            ServerSocket ss = new ServerSocket(9000);\r\n\r\n            byte[] html = Files.readAllBytes(Paths.get(pathHTML));\r\n            byte[] imageToBytes = Files.readAllBytes(Paths.get(pathImage));\r\n\r\n            while (true) {\r\n                Socket s = ss.accept();\r\n                System.out.println(&quot;Connection: OK&quot;);\r\n                BufferedReader in = new BufferedReader(new InputStreamReader(s.getInputStream()));\r\n                System.out.println(in.readLine());\r\n\r\n                DataOutputStream out = new DataOutputStream(s.getOutputStream());\r\n\r\n                out.writeBytes(&quot;HTTP/1.0 200 Document Follows \\r\\n&quot; +\r\n                        &quot;Content-Type: text/html; charset=UTF-8 \\r\\n&quot; +\r\n                        &quot;Content-Length: &quot; + html.length + &quot;\\r\\n&quot; +\r\n                        &quot;\\r\\n&quot;);\r\n\r\n                out.write(html);\r\n                out.flush();\r\n\r\n                out.writeBytes(&quot;HTTP/1.0 200 Document Follows \\r\\n&quot; +\r\n                        &quot;Content - Type: image/png &gt; \\r\\n&quot; +\r\n                        &quot;Content - Length: &quot; + imageToBytes.length + &quot;\\r\\n&quot; +\r\n                        &quot;\\r\\n&quot;); */\r\n\r\n                out.write(imageToBytes);\r\n\r\n\r\n                System.out.println(&quot;file has passed&quot;);\r\n                out.flush();\r\n                out.close();\r\n\r\n\r\n            }\r\n\r\n        } catch (IOException e) {\r\n            e.printStackTrace();\r\n        }\r\n    }\r\n}\r\n```\r\n","title":"Creating a Simple Java Webserver. Image is not showing up","body":"<p>I'm currently in (1st year) college and was assigned to do Java Server. Currently, I have created a really simple HTML page (Hello world style) and text shows up in the Localhost. However, when I insert an image into it, it doesn't show up... I get that the header should &quot;tell&quot; that there's an image coming to the server so it can read an image as such, but how do I do it? As you can see by my code, as last resort, I tried to pass a second header for that image, but I also get an error &quot;SocketException&quot;. How do I, through an HTML page, pass image and text to my webserver so it shows up on my localhost?</p>\n<pre><code>import java.io.*;\nimport java.net.ServerSocket;\nimport java.net.Socket;\nimport java.nio.charset.StandardCharsets;\nimport java.nio.file.Files;\nimport java.nio.file.Paths;\n\npublic class Server {\n    public static void main(String[] args) {\n        String pathImage = &quot;www/1st.png&quot;;\n        String pathHTML = &quot;www/index.html&quot;;\n\n        try {\n            ServerSocket ss = new ServerSocket(9000);\n\n            byte[] html = Files.readAllBytes(Paths.get(pathHTML));\n            byte[] imageToBytes = Files.readAllBytes(Paths.get(pathImage));\n\n            while (true) {\n                Socket s = ss.accept();\n                System.out.println(&quot;Connection: OK&quot;);\n                BufferedReader in = new BufferedReader(new InputStreamReader(s.getInputStream()));\n                System.out.println(in.readLine());\n\n                DataOutputStream out = new DataOutputStream(s.getOutputStream());\n\n                out.writeBytes(&quot;HTTP/1.0 200 Document Follows \\r\\n&quot; +\n                        &quot;Content-Type: text/html; charset=UTF-8 \\r\\n&quot; +\n                        &quot;Content-Length: &quot; + html.length + &quot;\\r\\n&quot; +\n                        &quot;\\r\\n&quot;);\n\n                out.write(html);\n                out.flush();\n\n                out.writeBytes(&quot;HTTP/1.0 200 Document Follows \\r\\n&quot; +\n                        &quot;Content - Type: image/png &gt; \\r\\n&quot; +\n                        &quot;Content - Length: &quot; + imageToBytes.length + &quot;\\r\\n&quot; +\n                        &quot;\\r\\n&quot;); */\n\n                out.write(imageToBytes);\n\n\n                System.out.println(&quot;file has passed&quot;);\n                out.flush();\n                out.close();\n\n\n            }\n\n        } catch (IOException e) {\n            e.printStackTrace();\n        }\n    }\n}\n</code></pre>\n"},{"tags":["java","methods","hashmap"],"comments":[{"owner":{"account_id":5592234,"reputation":4576,"user_id":4431053,"display_name":"Mohsen"},"score":1,"creation_date":1545259636,"post_id":53860216,"comment_id":94568417,"body_markdown":"`static Map&lt;String, String&gt; myMap` ?","body":"<code>static Map&lt;String, String&gt; myMap</code> ?"},{"owner":{"account_id":11317635,"reputation":53199,"user_id":8298909,"display_name":"Ben P."},"score":0,"creation_date":1545259775,"post_id":53860216,"comment_id":94568455,"body_markdown":"Looks like you&#39;re running into a problem that a lot of beginner java programmers hit: what the `static` keyword really means. Off-site tutorials are probably a better resource for this concept.","body":"Looks like you&#39;re running into a problem that a lot of beginner java programmers hit: what the <code>static</code> keyword really means. Off-site tutorials are probably a better resource for this concept."},{"owner":{"account_id":7144120,"reputation":55,"user_id":5460543,"display_name":"Code Newb"},"score":0,"creation_date":1545259903,"post_id":53860216,"comment_id":94568500,"body_markdown":"My research has told me that static makes the item accessible to the class instead of just the instance of the class.","body":"My research has told me that static makes the item accessible to the class instead of just the instance of the class."},{"owner":{"account_id":1658807,"reputation":31819,"user_id":1527544,"accept_rate":54,"display_name":"Antoniossss"},"score":0,"creation_date":1545260007,"post_id":53860216,"comment_id":94568521,"body_markdown":"@CodeNewb and you try to access nonstatic `myMap` from static context of `add`","body":"@CodeNewb and you try to access nonstatic <code>myMap</code> from static context of <code>add</code>"}],"answers":[{"tags":[],"owner":{"account_id":5592234,"reputation":4576,"user_id":4431053,"display_name":"Mohsen"},"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1545260691,"creation_date":1545259956,"answer_id":53860268,"question_id":53860216,"body_markdown":"You have two mistakes:\r\n\r\nFirst you should make `myMap` static like this:\r\n\r\n    static Map&lt;String, String&gt; myMap = newMap();\r\n\r\nSecond you should change  `myMap.Add(&quot;apple&quot;);`   to `Add(&quot;apple&quot;);`  because you write a method for main class not for `HashMap` that you expect to call it like that and also `Add` method is static and has access to `myMap` .\r\n\r\nTotal class would be like this:\r\n\r\n\r\n    import java.util.HashMap;\r\n    import java.util.Map;\r\n    \r\n    public class Test {\r\n    \r\n        public static String item;\r\n        public static String brand;\r\n    \r\n        static Map&lt;String, String&gt; myMap = newMap();\r\n    \r\n        public static void main(String[] args) {\r\n    \r\n            Add(&quot;apple&quot;);\r\n    \r\n        }\r\n    \r\n        public static HashMap&lt;String, String&gt; newMap() {\r\n            return new HashMap&lt;&gt;();\r\n        }\r\n    \r\n        public static void Add(String item) {\r\n            String brand = &quot;nobrand&quot;;\r\n            myMap.put(item, brand);\r\n        }\r\n    \r\n    }\r\n\r\n","title":"Having access issues with factory method objects in HashMap","body":"<p>You have two mistakes:</p>\n\n<p>First you should make <code>myMap</code> static like this:</p>\n\n<pre><code>static Map&lt;String, String&gt; myMap = newMap();\n</code></pre>\n\n<p>Second you should change  <code>myMap.Add(\"apple\");</code>   to <code>Add(\"apple\");</code>  because you write a method for main class not for <code>HashMap</code> that you expect to call it like that and also <code>Add</code> method is static and has access to <code>myMap</code> .</p>\n\n<p>Total class would be like this:</p>\n\n<pre><code>import java.util.HashMap;\nimport java.util.Map;\n\npublic class Test {\n\n    public static String item;\n    public static String brand;\n\n    static Map&lt;String, String&gt; myMap = newMap();\n\n    public static void main(String[] args) {\n\n        Add(\"apple\");\n\n    }\n\n    public static HashMap&lt;String, String&gt; newMap() {\n        return new HashMap&lt;&gt;();\n    }\n\n    public static void Add(String item) {\n        String brand = \"nobrand\";\n        myMap.put(item, brand);\n    }\n\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":311725,"reputation":809,"user_id":4894473,"display_name":"Lam Le"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1646087433,"creation_date":1545261173,"answer_id":53860456,"question_id":53860216,"body_markdown":"I agree with all @Spara answer\r\n\r\nI would like to give a little more help\r\n\r\n    \r\n\r\n    package com.goriant.stackoverflow.answers;\r\n\r\n    import java.util.HashMap;\r\n    import java.util.Map;\r\n\r\n    public class MyMap {\r\n\r\n        private static final String DEFAULT_BRAND = &quot;no_brand&quot;;\r\n        /**\r\n        * item - brand Map\r\n        */\r\n        private Map&lt;String, String&gt; brandMap;\r\n\r\n        /**\r\n        * constructor\r\n        */\r\n        public MyMap() {\r\n            this.brandMap = new HashMap&lt;&gt;();\r\n        }\r\n\r\n        /**\r\n        * add item with default brand\r\n        * @param item\r\n        */\r\n        public void addItem(final String item) {\r\n            this.brandMap.put(item, DEFAULT_BRAND);\r\n        }\r\n\r\n        /**\r\n        * get brand by item\r\n        * @param item\r\n        * @return brand or null if there is no item in brandMap\r\n        */\r\n        public String getBrandByItem(final String item) {\r\n            return this.brandMap.get(item);\r\n        }\r\n\r\n        /**\r\n        * This is using for testing MyMap class\r\n        * @param args\r\n        */\r\n        public static void main(String[] args) {\r\n\r\n            // init MyMap - final is my habit :)\r\n            final MyMap myMap = new MyMap();\r\n\r\n            // add apple with default no_brand\r\n            myMap.addItem(&quot;apple&quot;);\r\n\r\n            // assert that your brand item is nobrand\r\n            assert myMap.getBrandByItem(&quot;apple&quot;) == DEFAULT_BRAND;\r\n        }\r\n    }\r\n\r\n\r\n**Revise at 2022-03-01**\r\n\r\nIf you run this class with Java version &lt;14, please pass flag to enable assertion feature\r\n\r\n`java -ea com.goriant.stackoverflow.answers.MyMap`\r\n\r\nYou can refer github source code here: https://github.com/goriant-com/stackoverflow/blob/master/src/main/java/com/goriant/stackoverflow/answers/MyMap.java","title":"Having access issues with factory method objects in HashMap","body":"<p>I agree with all @Spara answer</p>\n<p>I would like to give a little more help</p>\n<pre><code>package com.goriant.stackoverflow.answers;\n\nimport java.util.HashMap;\nimport java.util.Map;\n\npublic class MyMap {\n\n    private static final String DEFAULT_BRAND = &quot;no_brand&quot;;\n    /**\n    * item - brand Map\n    */\n    private Map&lt;String, String&gt; brandMap;\n\n    /**\n    * constructor\n    */\n    public MyMap() {\n        this.brandMap = new HashMap&lt;&gt;();\n    }\n\n    /**\n    * add item with default brand\n    * @param item\n    */\n    public void addItem(final String item) {\n        this.brandMap.put(item, DEFAULT_BRAND);\n    }\n\n    /**\n    * get brand by item\n    * @param item\n    * @return brand or null if there is no item in brandMap\n    */\n    public String getBrandByItem(final String item) {\n        return this.brandMap.get(item);\n    }\n\n    /**\n    * This is using for testing MyMap class\n    * @param args\n    */\n    public static void main(String[] args) {\n\n        // init MyMap - final is my habit :)\n        final MyMap myMap = new MyMap();\n\n        // add apple with default no_brand\n        myMap.addItem(&quot;apple&quot;);\n\n        // assert that your brand item is nobrand\n        assert myMap.getBrandByItem(&quot;apple&quot;) == DEFAULT_BRAND;\n    }\n}\n</code></pre>\n<p><strong>Revise at 2022-03-01</strong></p>\n<p>If you run this class with Java version &lt;14, please pass flag to enable assertion feature</p>\n<p><code>java -ea com.goriant.stackoverflow.answers.MyMap</code></p>\n<p>You can refer github source code here: <a href=\"https://github.com/goriant-com/stackoverflow/blob/master/src/main/java/com/goriant/stackoverflow/answers/MyMap.java\" rel=\"nofollow noreferrer\">https://github.com/goriant-com/stackoverflow/blob/master/src/main/java/com/goriant/stackoverflow/answers/MyMap.java</a></p>\n"}],"owner":{"account_id":7144120,"reputation":55,"user_id":5460543,"display_name":"Code Newb"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":117,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":53860268,"answer_count":2,"score":3,"last_activity_date":1646087433,"creation_date":1545259533,"question_id":53860216,"body_markdown":"I am having compiler issues with the syntax and want this method to work on the `Hashmap` object `myMap`.  I need the `Add` method to take a `String` value and use the `Hashmap` `put` function to add a (key, value) pair.\r\n\r\nI tried to put the factory method initiation of `newMap` inside `main` and had access issues.  \r\n\r\n \r\n     import java.util.*;\r\n\r\n      public class MyMap {\r\n\r\n      public static String item;\r\n      public static String brand;\r\n        \r\n      Map&lt;String, String&gt; myMap = newMap();\r\n\r\n       public static void main(String[] args) {\r\n      \r\n        myMap.Add(&quot;apple&quot;);   \r\n\r\n       }\r\n\r\n       public static HashMap&lt;String, String&gt; newMap() {\r\n       return new HashMap&lt;&gt;(); \r\n        } \r\n\r\n       public static void Add(String item)  {\r\n        String brand = &quot;nobrand&quot;;\r\n        myMap.put(item, brand);\r\n      }   \r\n\r\n\r\n    }\r\n\r\ncompilation error due to static/non static items.  I made them all static to make everything accessible throughout the class.\r\n\r\n","title":"Having access issues with factory method objects in HashMap","body":"<p>I am having compiler issues with the syntax and want this method to work on the <code>Hashmap</code> object <code>myMap</code>.  I need the <code>Add</code> method to take a <code>String</code> value and use the <code>Hashmap</code> <code>put</code> function to add a (key, value) pair.</p>\n\n<p>I tried to put the factory method initiation of <code>newMap</code> inside <code>main</code> and had access issues.  </p>\n\n<pre><code> import java.util.*;\n\n  public class MyMap {\n\n  public static String item;\n  public static String brand;\n\n  Map&lt;String, String&gt; myMap = newMap();\n\n   public static void main(String[] args) {\n\n    myMap.Add(\"apple\");   \n\n   }\n\n   public static HashMap&lt;String, String&gt; newMap() {\n   return new HashMap&lt;&gt;(); \n    } \n\n   public static void Add(String item)  {\n    String brand = \"nobrand\";\n    myMap.put(item, brand);\n  }   \n\n\n}\n</code></pre>\n\n<p>compilation error due to static/non static items.  I made them all static to make everything accessible throughout the class.</p>\n"},{"tags":["java","collections","java-8","java-stream"],"comments":[{"owner":{"account_id":23959668,"reputation":26587,"user_id":17949945,"display_name":"Alexander Ivanchenko"},"score":0,"creation_date":1645720976,"post_id":71248010,"comment_id":125952147,"body_markdown":"I think that from the class design perspective the second class isn&#39;t required. You can achieve the same thing with **two boolean flags** (like is *isWinningCoupon* in addition to the existing one).","body":"I think that from the class design perspective the second class isn&#39;t required. You can achieve the same thing with <b>two boolean flags</b> (like is <i>isWinningCoupon</i> in addition to the existing one)."}],"answers":[{"tags":[],"owner":{"account_id":24273987,"reputation":21,"user_id":18221553,"display_name":"Ash Anand"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1645686463,"creation_date":1645686463,"answer_id":71248277,"question_id":71248010,"body_markdown":"We loop around on **winnerCouponList** and at the same time for each **winnerCoupon** we check in **scannedCoupon** list have `scannedCode == winnerCode`.\r\nIf yes, then we update the `winnerCoupon.won = true`. If no, we will continue in our loop until we found `scannedCode == winnerCode` or we reach the end of **scannedCouponList**\r\n\r\n```\r\nwinnerCouponList.stream()\r\n   .forEach(winnerCoupon -&gt; {\r\n       scannedCouponList.stream()\r\n       .filter(scannedCoupon -&gt; {\r\n           return scannedCoupon.scannedcode.equals(winnerCoupon.winnercode);\r\n       })\r\n       .limit(1)\r\n       .forEach(scannedCoupon -&gt; winnerCoupon.won = true);\r\n   });\r\n```\r\n","title":"how to join two List of different signature type with a common property using Java stream()?","body":"<p>We loop around on <strong>winnerCouponList</strong> and at the same time for each <strong>winnerCoupon</strong> we check in <strong>scannedCoupon</strong> list have <code>scannedCode == winnerCode</code>.\nIf yes, then we update the <code>winnerCoupon.won = true</code>. If no, we will continue in our loop until we found <code>scannedCode == winnerCode</code> or we reach the end of <strong>scannedCouponList</strong></p>\n<pre><code>winnerCouponList.stream()\n   .forEach(winnerCoupon -&gt; {\n       scannedCouponList.stream()\n       .filter(scannedCoupon -&gt; {\n           return scannedCoupon.scannedcode.equals(winnerCoupon.winnercode);\n       })\n       .limit(1)\n       .forEach(scannedCoupon -&gt; winnerCoupon.won = true);\n   });\n</code></pre>\n"},{"tags":[],"owner":{"account_id":10595663,"reputation":4835,"user_id":7804477,"display_name":"Gautham M"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1645691136,"creation_date":1645688123,"answer_id":71248530,"question_id":71248010,"body_markdown":"First you can collect the scanned codes to a `Set`.\r\n```java\r\nSet&lt;String&gt; scannedCodes = scannedCouponList.stream()\r\n                                            .map(ScannedCoupon::getScannedCode)\r\n                                            .collect(Collectors.toSet());\r\n```\r\n\r\nThe above set helps to avoid looping the scanned list for each winner coupon as `Set.contains` has `O(1)` time complexity.\r\nNow, stream the winner coupon list and check if the code is available in `scannedCodes`:\r\n```java\r\nwinnerCouponList.stream()\r\n                .filter(coupon -&gt; scannedCodes.contains(coupon.getWinnerCode()))\r\n                .forEach(coupon -&gt; coupon.setWon(true));\r\n```\r\nSince the winner list size is much more than your scanned list, this would have approximately `O(n)` time complexity (considering the size of scanned list is very small compared to winner list) where `n` is size of winner list.\r\n","title":"how to join two List of different signature type with a common property using Java stream()?","body":"<p>First you can collect the scanned codes to a <code>Set</code>.</p>\n<pre class=\"lang-java prettyprint-override\"><code>Set&lt;String&gt; scannedCodes = scannedCouponList.stream()\n                                            .map(ScannedCoupon::getScannedCode)\n                                            .collect(Collectors.toSet());\n</code></pre>\n<p>The above set helps to avoid looping the scanned list for each winner coupon as <code>Set.contains</code> has <code>O(1)</code> time complexity.\nNow, stream the winner coupon list and check if the code is available in <code>scannedCodes</code>:</p>\n<pre class=\"lang-java prettyprint-override\"><code>winnerCouponList.stream()\n                .filter(coupon -&gt; scannedCodes.contains(coupon.getWinnerCode()))\n                .forEach(coupon -&gt; coupon.setWon(true));\n</code></pre>\n<p>Since the winner list size is much more than your scanned list, this would have approximately <code>O(n)</code> time complexity (considering the size of scanned list is very small compared to winner list) where <code>n</code> is size of winner list.</p>\n"},{"tags":[],"owner":{"account_id":18102286,"reputation":11,"user_id":13159988,"display_name":"yulinxp"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1646087278,"creation_date":1646087278,"answer_id":71301728,"question_id":71248010,"body_markdown":"    winnerCouponList.stream()\r\n        .filter(w -&gt; scannedCouponList.stream()\r\n        .anyMatch(s -&gt; s.scannedcode.equals(w.winnercode)))\r\n        .forEach(w -&gt; w.setWon(true));","title":"how to join two List of different signature type with a common property using Java stream()?","body":"<pre><code>winnerCouponList.stream()\n    .filter(w -&gt; scannedCouponList.stream()\n    .anyMatch(s -&gt; s.scannedcode.equals(w.winnercode)))\n    .forEach(w -&gt; w.setWon(true));\n</code></pre>\n"}],"owner":{"account_id":11642567,"reputation":57,"user_id":8526502,"display_name":"smnadim21"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":86,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":71248530,"answer_count":3,"score":0,"last_activity_date":1646087278,"creation_date":1645684428,"question_id":71248010,"body_markdown":"```java\r\nclass ScannedCoupon{\r\n    Long id;\r\n    String scannedcode;\r\n}\r\n        \r\nclass WinnerCoupon{\r\n    Long id;\r\n    String winnercode;\r\n    boolean won;\r\n}\r\n    \r\nList&lt;ScannedCoupon&gt; scannedCouponList;\r\nList&lt;WinnerCoupon&gt; winnerCouponList;\r\n```\r\n\r\nHere are my cases: \r\n\r\nI do have two lists `scannedCouponList` with 30 items and `winnerCouponList` with 200. one them is code scanned by users and other is the list of winner. I want to update `winnerCouponList` if any of the  `ScannedCoupon`&#39;s `scannedcode` is inside `winnerCouponList`.\r\n\r\nis there any way to update the `won` property to `true` from `winnerCouponList` if any of the `winnercode == scannedcode` from `scannedCouponList` using java `stream()` ? \r\n\r\nI do not want to use loops over and over again for 200 `WinnerCoupon` if any one of them is in `scannedCouponList` or not.  \r\n","title":"how to join two List of different signature type with a common property using Java stream()?","body":"<pre class=\"lang-java prettyprint-override\"><code>class ScannedCoupon{\n    Long id;\n    String scannedcode;\n}\n        \nclass WinnerCoupon{\n    Long id;\n    String winnercode;\n    boolean won;\n}\n    \nList&lt;ScannedCoupon&gt; scannedCouponList;\nList&lt;WinnerCoupon&gt; winnerCouponList;\n</code></pre>\n<p>Here are my cases:</p>\n<p>I do have two lists <code>scannedCouponList</code> with 30 items and <code>winnerCouponList</code> with 200. one them is code scanned by users and other is the list of winner. I want to update <code>winnerCouponList</code> if any of the  <code>ScannedCoupon</code>'s <code>scannedcode</code> is inside <code>winnerCouponList</code>.</p>\n<p>is there any way to update the <code>won</code> property to <code>true</code> from <code>winnerCouponList</code> if any of the <code>winnercode == scannedcode</code> from <code>scannedCouponList</code> using java <code>stream()</code> ?</p>\n<p>I do not want to use loops over and over again for 200 <code>WinnerCoupon</code> if any one of them is in <code>scannedCouponList</code> or not.</p>\n"},{"tags":["java","spring","spring-boot","apache-kafka","spring-kafka"],"comments":[{"owner":{"account_id":2671330,"reputation":183376,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"score":0,"creation_date":1618689836,"post_id":67122416,"comment_id":118680315,"body_markdown":"All of the CLI tools refer to internal Java/Scala classes that can be called directly in code, yes","body":"All of the CLI tools refer to internal Java/Scala classes that can be called directly in code, yes"}],"answers":[{"tags":[],"owner":{"account_id":17133483,"reputation":41,"user_id":13921404,"display_name":"Michael Papapetros"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1618567099,"creation_date":1618567099,"answer_id":67123106,"question_id":67122416,"body_markdown":"*This is a solution via **CLI**:*\r\n\r\n**List the topics to which the group is subscribed:**\r\n\r\n    kafka-consumer-groups --bootstrap-server &lt;kafkahost:port&gt; --group &lt;group_id&gt; --describe\r\n\r\nNote the values under &quot;CURRENT-OFFSET&quot; and &quot;LOG-END-OFFSET&quot;. &quot;CURRENT-OFFSET&quot; is the offset where this consumer group is currently at in each of the partitions.\r\n\r\n**Reset the consumer offset for a topic (preview):**\r\n\r\n    kafka-consumer-groups --bootstrap-server &lt;kafkahost:port&gt; --group &lt;group_id&gt; --topic &lt;topic_name&gt; --reset-offsets --to-earliest\r\nThis will print the expected result of the reset, but not actually run it.\r\n\r\n**Reset the consumer offset for a topic (execute):**\r\n\r\n    kafka-consumer-groups --bootstrap-server &lt;kafkahost:port&gt; --group &lt;group_id&gt; --topic &lt;topic_name&gt; --reset-offsets --to-earliest --execute\r\n\r\nThis will execute the reset and reset the consumer group offset for the specified topic back to 0.\r\n\r\n**Repeat 1 to check if the reset is successful**\r\n","title":"Is there a way to reset offsets of a Kafka consumer group through an API?","body":"<p><em>This is a solution via <strong>CLI</strong>:</em></p>\n<p><strong>List the topics to which the group is subscribed:</strong></p>\n<pre><code>kafka-consumer-groups --bootstrap-server &lt;kafkahost:port&gt; --group &lt;group_id&gt; --describe\n</code></pre>\n<p>Note the values under &quot;CURRENT-OFFSET&quot; and &quot;LOG-END-OFFSET&quot;. &quot;CURRENT-OFFSET&quot; is the offset where this consumer group is currently at in each of the partitions.</p>\n<p><strong>Reset the consumer offset for a topic (preview):</strong></p>\n<pre><code>kafka-consumer-groups --bootstrap-server &lt;kafkahost:port&gt; --group &lt;group_id&gt; --topic &lt;topic_name&gt; --reset-offsets --to-earliest\n</code></pre>\n<p>This will print the expected result of the reset, but not actually run it.</p>\n<p><strong>Reset the consumer offset for a topic (execute):</strong></p>\n<pre><code>kafka-consumer-groups --bootstrap-server &lt;kafkahost:port&gt; --group &lt;group_id&gt; --topic &lt;topic_name&gt; --reset-offsets --to-earliest --execute\n</code></pre>\n<p>This will execute the reset and reset the consumer group offset for the specified topic back to 0.</p>\n<p><strong>Repeat 1 to check if the reset is successful</strong></p>\n"},{"tags":[],"owner":{"account_id":1288095,"reputation":169326,"user_id":1240763,"display_name":"Gary Russell"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1618582121,"creation_date":1618582121,"answer_id":67126755,"question_id":67122416,"body_markdown":"[Spring for Apache Kafka](https://docs.spring.io/spring-kafka/docs/current/reference/html/#seek) provides some convenience mechanisms for performing seeks, either during application initialization, or at any time thereafter.\r\n\r\nThe simplest is to have your listener extend `AbstractConsumerSeekAware` or implement `ConsumerSeekAware`.\r\n\r\n","title":"Is there a way to reset offsets of a Kafka consumer group through an API?","body":"<p><a href=\"https://docs.spring.io/spring-kafka/docs/current/reference/html/#seek\" rel=\"nofollow noreferrer\">Spring for Apache Kafka</a> provides some convenience mechanisms for performing seeks, either during application initialization, or at any time thereafter.</p>\n<p>The simplest is to have your listener extend <code>AbstractConsumerSeekAware</code> or implement <code>ConsumerSeekAware</code>.</p>\n"},{"tags":[],"owner":{"account_id":2608531,"reputation":405,"user_id":2259158,"display_name":"DDT"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1646086701,"creation_date":1646086701,"answer_id":71301661,"question_id":67122416,"body_markdown":"To reset an offset, the code has to get the consumer by group id, get started, and stopped. A client has to be created (while consumer is stopped). Once the client has been created, the code has to connect, reset the offset, and then disconnect (as posted below). Once it has reset the consumer group has to be restarted again.\r\n\r\nThe code below below resets the offset. The key is to get the consumer instance to be able to stop and start the consumers because it cannot reset if a consumer is running. We have this running from the command line which is nice. Hopefully this helps.\r\n\r\n    return kafka.getConsumer( args.groupId )\r\n        .then(consumerInstance =&gt; {\r\n            consumer = consumerInstance;\r\n            return consumer.run();\r\n        }).then(()=&gt; {\r\n            return consumer.stop();\r\n        }).then(() =&gt; {\r\n             // reset kafka client offset\r\n        })).then(()=&gt; {\r\n            return consumer.run();\r\n        }).\r\n\r\n    // reset kafka client offset\r\n    const { groupId, topic } = args;\r\n\r\n    const admin = createKafkaClient().admin();\r\n   \r\n    return admin.connect()\r\n        .then(() =&gt;\r\n            admin.resetOffsets({\r\n                groupId,\r\n                topic,\r\n                earliest: true,\r\n        })\r\n        .then(() =&gt; admin.disconnect();\r\n","title":"Is there a way to reset offsets of a Kafka consumer group through an API?","body":"<p>To reset an offset, the code has to get the consumer by group id, get started, and stopped. A client has to be created (while consumer is stopped). Once the client has been created, the code has to connect, reset the offset, and then disconnect (as posted below). Once it has reset the consumer group has to be restarted again.</p>\n<p>The code below below resets the offset. The key is to get the consumer instance to be able to stop and start the consumers because it cannot reset if a consumer is running. We have this running from the command line which is nice. Hopefully this helps.</p>\n<pre><code>return kafka.getConsumer( args.groupId )\n    .then(consumerInstance =&gt; {\n        consumer = consumerInstance;\n        return consumer.run();\n    }).then(()=&gt; {\n        return consumer.stop();\n    }).then(() =&gt; {\n         // reset kafka client offset\n    })).then(()=&gt; {\n        return consumer.run();\n    }).\n\n// reset kafka client offset\nconst { groupId, topic } = args;\n\nconst admin = createKafkaClient().admin();\n\nreturn admin.connect()\n    .then(() =&gt;\n        admin.resetOffsets({\n            groupId,\n            topic,\n            earliest: true,\n    })\n    .then(() =&gt; admin.disconnect();\n</code></pre>\n"}],"owner":{"account_id":20897870,"reputation":113,"user_id":15351612,"display_name":"Trayambak Kumar"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":7827,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":67126755,"answer_count":3,"score":2,"last_activity_date":1646086701,"creation_date":1618564420,"question_id":67122416,"body_markdown":"I have a use case where there is a consumer group that is consuming messages. I want to build an API to modify its offset. So, when the endpoint is called with the offset I have to change the offset of the consumer group. I am using SpringBoot and the consumer is built using Spring Kafka.\r\nThanks in advance.","title":"Is there a way to reset offsets of a Kafka consumer group through an API?","body":"<p>I have a use case where there is a consumer group that is consuming messages. I want to build an API to modify its offset. So, when the endpoint is called with the offset I have to change the offset of the consumer group. I am using SpringBoot and the consumer is built using Spring Kafka.\nThanks in advance.</p>\n"},{"tags":["java","sftp","apache-sshd"],"answers":[{"tags":[],"owner":{"account_id":9193573,"reputation":403,"user_id":6833143,"accept_rate":73,"display_name":"Chognificent"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1646086401,"creation_date":1646086401,"answer_id":71301625,"question_id":71253613,"body_markdown":"Ended up using a separate thread that connects and gets interupted.\r\n\r\n    @Test\r\n    public void testSftpInterupt() throws InterruptedException, JSchException, SftpException {\r\n        Connect thread = new Connect();\r\n        thread.start();\r\n\r\n        while (thread.isAlive()) {\r\n            waitForConnectionClose();\r\n        }\r\n\r\n        waitForConnectionClose();\r\n        assertEquals(&quot;0&quot;, jedis.get(SESSION_KEY));\r\n    }\r\n\r\nConnect looks as follows:\r\n\r\n    private class Connect extends Thread {\r\n        @Override\r\n        public void run() {\r\n            ChannelSftp sftp = null;\r\n            Thread thread = this;\r\n\r\n            SftpProgressMonitor monitor = new SftpProgressMonitor() {\r\n                @Override\r\n                public void init(int op, String src, String dest, long max) {\r\n                }\r\n\r\n                @Override\r\n                public boolean count(long count) {\r\n                    currentThread().interrupt();\r\n                    return false;\r\n                }\r\n\r\n                @Override\r\n                public void end() {\r\n                }\r\n            };\r\n\r\n            try {\r\n                sftp.connect();\r\n                sftp.put(LOCAL_FILE_LARGE, remoteFile, monitor);\r\n            } catch (JSchException | SftpException e) {\r\n                assertEquals(&quot;java.io.InterruptedIOException&quot;, e.getMessage());\r\n            }\r\n        }\r\n    }\r\n","title":"Mimic sftp connection disruption","body":"<p>Ended up using a separate thread that connects and gets interupted.</p>\n<pre><code>@Test\npublic void testSftpInterupt() throws InterruptedException, JSchException, SftpException {\n    Connect thread = new Connect();\n    thread.start();\n\n    while (thread.isAlive()) {\n        waitForConnectionClose();\n    }\n\n    waitForConnectionClose();\n    assertEquals(&quot;0&quot;, jedis.get(SESSION_KEY));\n}\n</code></pre>\n<p>Connect looks as follows:</p>\n<pre><code>private class Connect extends Thread {\n    @Override\n    public void run() {\n        ChannelSftp sftp = null;\n        Thread thread = this;\n\n        SftpProgressMonitor monitor = new SftpProgressMonitor() {\n            @Override\n            public void init(int op, String src, String dest, long max) {\n            }\n\n            @Override\n            public boolean count(long count) {\n                currentThread().interrupt();\n                return false;\n            }\n\n            @Override\n            public void end() {\n            }\n        };\n\n        try {\n            sftp.connect();\n            sftp.put(LOCAL_FILE_LARGE, remoteFile, monitor);\n        } catch (JSchException | SftpException e) {\n            assertEquals(&quot;java.io.InterruptedIOException&quot;, e.getMessage());\n        }\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":9193573,"reputation":403,"user_id":6833143,"accept_rate":73,"display_name":"Chognificent"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":40,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1646086401,"creation_date":1645713353,"question_id":71253613,"body_markdown":"I am attempting to abruptly disconnect from an SFTP connection in Java without using the sftp.disconnect() method. Using this to build an integration test that checks that clean up happens everytime. See the test below:\r\n\r\n    public void checkDisruptedConnections() throws JSchException, InterruptedException {\r\n        ChannelSftp sftp = setupSftp(null);\r\n        sftp.connect();\r\n\r\n        try {\r\n            //disrupt connection OVER HERE\r\n        } catch (Exception e) {\r\n            assertEquals(&quot;1&quot;, jedis.get(SESSION_KEY));\r\n        }\r\n\r\n        waitForConnectionClose();\r\n        assertEquals(&quot;0&quot;, jedis.get(SESSION_KEY));\r\n    }","title":"Mimic sftp connection disruption","body":"<p>I am attempting to abruptly disconnect from an SFTP connection in Java without using the sftp.disconnect() method. Using this to build an integration test that checks that clean up happens everytime. See the test below:</p>\n<pre><code>public void checkDisruptedConnections() throws JSchException, InterruptedException {\n    ChannelSftp sftp = setupSftp(null);\n    sftp.connect();\n\n    try {\n        //disrupt connection OVER HERE\n    } catch (Exception e) {\n        assertEquals(&quot;1&quot;, jedis.get(SESSION_KEY));\n    }\n\n    waitForConnectionClose();\n    assertEquals(&quot;0&quot;, jedis.get(SESSION_KEY));\n}\n</code></pre>\n"},{"tags":["java","http","http-headers","httpurlconnection","request-headers"],"comments":[{"owner":{"account_id":9061711,"reputation":1055,"user_id":6748042,"display_name":"Victor Polo De Gyves Montero"},"score":1,"creation_date":1617598672,"post_id":66948388,"comment_id":118340054,"body_markdown":"Welcome to StackOverflow! It seems that is not a Java issue. Have you tried the same request with `curl`or `postman`? It seems that the problem is the request itself, or the in the server, it if is not returning what it is expected.","body":"Welcome to StackOverflow! It seems that is not a Java issue. Have you tried the same request with <code>curl</code>or <code>postman</code>? It seems that the problem is the request itself, or the in the server, it if is not returning what it is expected."},{"owner":{"account_id":9061711,"reputation":1055,"user_id":6748042,"display_name":"Victor Polo De Gyves Montero"},"score":0,"creation_date":1617599548,"post_id":66948388,"comment_id":118340194,"body_markdown":"Please do not post external links or images, add the additional information to your original question. If the request it is failing also with Postman/curl, then the problem is not your java code, but the problem is on the side of the server.","body":"Please do not post external links or images, add the additional information to your original question. If the request it is failing also with Postman/curl, then the problem is not your java code, but the problem is on the side of the server."},{"owner":{"account_id":8606921,"reputation":1580,"user_id":6446770,"accept_rate":100,"display_name":"miiiii"},"score":0,"creation_date":1617599624,"post_id":66948388,"comment_id":118340215,"body_markdown":"Try `https://1lib.in/dl/4649171/57a87a` this URL with your same code. I believe it should download something. (Not sure if it is really the same epub file you want). But ff it works it means, you have used the wrong URL `https://1lib.in/book/4649171/371aea` or the URL is changed on the server/db/backend.","body":"Try <code>https:&#47;&#47;1lib.in&#47;dl&#47;4649171&#47;57a87a</code> this URL with your same code. I believe it should download something. (Not sure if it is really the same epub file you want). But ff it works it means, you have used the wrong URL <code>https:&#47;&#47;1lib.in&#47;book&#47;4649171&#47;371aea</code> or the URL is changed on the server/db/backend."},{"owner":{"account_id":9061711,"reputation":1055,"user_id":6748042,"display_name":"Victor Polo De Gyves Montero"},"score":0,"creation_date":1617599999,"post_id":66948388,"comment_id":118340263,"body_markdown":"Please do not post external links or images.","body":"Please do not post external links or images."},{"owner":{"account_id":18139501,"reputation":1,"user_id":13193526,"display_name":"Pranjal Chaudhari"},"score":0,"creation_date":1617600445,"post_id":66948388,"comment_id":118340333,"body_markdown":"@VictorPoloDeGyvesMontero Sorry I added additional links in the comment section. I am new to writing questions in StackOverflow. I added them to the original question.","body":"@VictorPoloDeGyvesMontero Sorry I added additional links in the comment section. I am new to writing questions in StackOverflow. I added them to the original question."},{"owner":{"account_id":18139501,"reputation":1,"user_id":13193526,"display_name":"Pranjal Chaudhari"},"score":0,"creation_date":1617600516,"post_id":66948388,"comment_id":118340345,"body_markdown":"@miiiii I tried the link that you gave me but I still got the same results.","body":"@miiiii I tried the link that you gave me but I still got the same results."},{"owner":{"account_id":9061711,"reputation":1055,"user_id":6748042,"display_name":"Victor Polo De Gyves Montero"},"score":0,"creation_date":1617600757,"post_id":66948388,"comment_id":118340387,"body_markdown":"You are adding external links, you must avoid doing that, please include any additional information directly into the question","body":"You are adding external links, you must avoid doing that, please include any additional information directly into the question"},{"owner":{"account_id":8606921,"reputation":1580,"user_id":6446770,"accept_rate":100,"display_name":"miiiii"},"score":0,"creation_date":1617601293,"post_id":66948388,"comment_id":118340471,"body_markdown":"@VictorPoloDeGyvesMontero The links are of the same domain as mentioned in the OP&#39;s question and is posted in form of a code sample( for `HttpURLConnection`)","body":"@VictorPoloDeGyvesMontero The links are of the same domain as mentioned in the OP&#39;s question and is posted in form of a code sample( for <code>HttpURLConnection</code>)"},{"owner":{"account_id":9061711,"reputation":1055,"user_id":6748042,"display_name":"Victor Polo De Gyves Montero"},"score":0,"creation_date":1617601368,"post_id":66948388,"comment_id":118340481,"body_markdown":"@miiiii, you are talking about other links (the links of the HTTP request), but the OP has already fixed the links we are talking about (links to external images to explain the question).","body":"@miiiii, you are talking about other links (the links of the HTTP request), but the OP has already fixed the links we are talking about (links to external images to explain the question)."},{"owner":{"account_id":8606921,"reputation":1580,"user_id":6446770,"accept_rate":100,"display_name":"miiiii"},"score":0,"creation_date":1617601463,"post_id":66948388,"comment_id":118340500,"body_markdown":"@VictorPoloDeGyvesMontero Cool.","body":"@VictorPoloDeGyvesMontero Cool."},{"owner":{"account_id":18139501,"reputation":1,"user_id":13193526,"display_name":"Pranjal Chaudhari"},"score":0,"creation_date":1617601943,"post_id":66948388,"comment_id":118340613,"body_markdown":"What could be the issue with the request for not giving the expected location header string? I even tried with OkHttp but still no luck","body":"What could be the issue with the request for not giving the expected location header string? I even tried with OkHttp but still no luck"},{"owner":{"account_id":8606921,"reputation":1580,"user_id":6446770,"accept_rate":100,"display_name":"miiiii"},"score":0,"creation_date":1617602334,"post_id":66948388,"comment_id":118340695,"body_markdown":"@PranjalChaudhari Do you own/work with `1lib`? If yes, you must talk to the internal team about the server&#39;s behavior as it is not programming problem. \n\nThe site I observed is providing hash based on the user&#39;s IP (maybe to track or Limit some feature). I tried from Indian IP (for `.in`) the URL was different &amp; when tried from Poland the URL for the same epub was different. I also get the error &quot;You have used all 5 free downloads for guest User on your IP&quot;. \n\nIt doesn&#39;t look like truly a programming issue but understanding of a particular application &amp; it&#39;s internal behavior is required.","body":"@PranjalChaudhari Do you own/work with <code>1lib</code>? If yes, you must talk to the internal team about the server&#39;s behavior as it is not programming problem.   The site I observed is providing hash based on the user&#39;s IP (maybe to track or Limit some feature). I tried from Indian IP (for <code>.in</code>) the URL was different &amp; when tried from Poland the URL for the same epub was different. I also get the error &quot;You have used all 5 free downloads for guest User on your IP&quot;.   It doesn&#39;t look like truly a programming issue but understanding of a particular application &amp; it&#39;s internal behavior is required."},{"owner":{"account_id":18139501,"reputation":1,"user_id":13193526,"display_name":"Pranjal Chaudhari"},"score":0,"creation_date":1617602957,"post_id":66948388,"comment_id":118340829,"body_markdown":"@miiiii Thank you for looking into the matter. I also believe that the server is generating a hash token based on IP and hence I am getting the wrong hash each time a send a request. I don&#39;t work/own the `1Lib`. If that&#39;s the case, will I not be able to fetch the header correctly if I do not know the server&#39;s behavior.","body":"@miiiii Thank you for looking into the matter. I also believe that the server is generating a hash token based on IP and hence I am getting the wrong hash each time a send a request. I don&#39;t work/own the <code>1Lib</code>. If that&#39;s the case, will I not be able to fetch the header correctly if I do not know the server&#39;s behavior."},{"owner":{"account_id":8606921,"reputation":1580,"user_id":6446770,"accept_rate":100,"display_name":"miiiii"},"score":0,"creation_date":1617603345,"post_id":66948388,"comment_id":118340930,"body_markdown":"Yes, that&#39;s correct. It looks like the owner/development team has done it in order to restrict such downloads and hence it&#39;s part of their system design. Even if any workaround/loophole is possible, I cannot talk about it and you should also not try downloading their content without their consent (if any). \n\nWhenever you think this question is not solvable/relevant, please delete your post so that others can avoid getting caught here. However, it is not mandatory. :)","body":"Yes, that&#39;s correct. It looks like the owner/development team has done it in order to restrict such downloads and hence it&#39;s part of their system design. Even if any workaround/loophole is possible, I cannot talk about it and you should also not try downloading their content without their consent (if any).   Whenever you think this question is not solvable/relevant, please delete your post so that others can avoid getting caught here. However, it is not mandatory. :)"}],"owner":{"account_id":18139501,"reputation":1,"user_id":13193526,"display_name":"Pranjal Chaudhari"},"comment_count":14,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":283,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1646086332,"creation_date":1617598381,"question_id":66948388,"body_markdown":"I am trying to make a Bookstore application. To download any book there is a redirect link that contains the actual link with the filename to download the epub file. But when I load the first link and try to get the redirect link from the location header I get the wrong link.\r\n\r\nCode:\r\n```\r\nString url = &quot;https://1lib.in/dl/4649171/4e15a5&quot;;\r\nURL url2 = new URL(url);\r\n            HttpURLConnection httpConn = (HttpURLConnection) url2.openConnection();\r\n            httpConn.addRequestProperty(&quot;Accept-Language&quot;, &quot;en-US,en;q=0.8&quot;);\r\n            httpConn.addRequestProperty(&quot;User-Agent&quot;, &quot;Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/89.0.4389.114 Safari/537.36&quot;);\r\n            httpConn.addRequestProperty(&quot;Referer&quot;, &quot;https://www.google.com&quot;);\r\n            httpConn.setInstanceFollowRedirects(false);\r\n            httpConn.setRequestMethod(&quot;GET&quot;);\r\n            httpConn.connect();\r\nint responseCode = httpConn.getResponseCode();\r\n            Log.d(&quot;LocationHeader&quot;,responseCode+&quot; &lt;-code&quot;);\r\n            String locate = httpConn.getHeaderField(&quot;Location&quot;);\r\n            Log.d(&quot;LocationHeader&quot;,locate+&quot; &lt;-location&quot;);\r\n```\r\nThis is the response that I get.\r\n```\r\nLocationHeader: 302 &lt;-code\r\nLocationHeader: https://1lib.in/book/4649171/371aea/?wrongHash &lt;-location\r\n```\r\n\r\nExpected Result:\r\n```\r\nLocationHeader: https://p302.zlibcdn.com/dtoken/aaa62058cd53e7318e2f511f4d1fbd3f &lt;-location\r\n```\r\nAlso tried the request in Postman but got the same results there.\r\n","title":"Getting wrong hash in location header on Http request","body":"<p>I am trying to make a Bookstore application. To download any book there is a redirect link that contains the actual link with the filename to download the epub file. But when I load the first link and try to get the redirect link from the location header I get the wrong link.</p>\n<p>Code:</p>\n<pre><code>String url = &quot;https://1lib.in/dl/4649171/4e15a5&quot;;\nURL url2 = new URL(url);\n            HttpURLConnection httpConn = (HttpURLConnection) url2.openConnection();\n            httpConn.addRequestProperty(&quot;Accept-Language&quot;, &quot;en-US,en;q=0.8&quot;);\n            httpConn.addRequestProperty(&quot;User-Agent&quot;, &quot;Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/89.0.4389.114 Safari/537.36&quot;);\n            httpConn.addRequestProperty(&quot;Referer&quot;, &quot;https://www.google.com&quot;);\n            httpConn.setInstanceFollowRedirects(false);\n            httpConn.setRequestMethod(&quot;GET&quot;);\n            httpConn.connect();\nint responseCode = httpConn.getResponseCode();\n            Log.d(&quot;LocationHeader&quot;,responseCode+&quot; &lt;-code&quot;);\n            String locate = httpConn.getHeaderField(&quot;Location&quot;);\n            Log.d(&quot;LocationHeader&quot;,locate+&quot; &lt;-location&quot;);\n</code></pre>\n<p>This is the response that I get.</p>\n<pre><code>LocationHeader: 302 &lt;-code\nLocationHeader: https://1lib.in/book/4649171/371aea/?wrongHash &lt;-location\n</code></pre>\n<p>Expected Result:</p>\n<pre><code>LocationHeader: https://p302.zlibcdn.com/dtoken/aaa62058cd53e7318e2f511f4d1fbd3f &lt;-location\n</code></pre>\n<p>Also tried the request in Postman but got the same results there.</p>\n"},{"tags":["java","android","spring","retrofit2"],"answers":[{"tags":[],"owner":{"account_id":5140086,"reputation":2459,"user_id":4117756,"accept_rate":70,"display_name":"Alberto Crespo"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1646085890,"creation_date":1476708453,"answer_id":40086794,"question_id":40049827,"body_markdown":"After trying several configurations for the response on the server, this has worked for me:\r\n\r\n1. Get the File as `new File`\r\n\r\n2. Use the `org.springframework.core.io.FileSystemResource.FileSystemResource`\r\nlibrary to pass the File as a ResponseBody.\r\n\r\n       @RequestMapping(value = GET_MAP , method = RequestMethod.GET)\r\n\t   public @ResponseBody Resource getMap(@PathVariable(&quot;filename&quot;)String filename ,HttpServletResponse response) throws IOException {\r\n\t       File file = new File(filename + &quot;.zip&quot;);\r\n\t       return new FileSystemResource(file);\r\n\t   }","title":"Download File using Retrofit 2.0 and Spring Server","body":"<p>After trying several configurations for the response on the server, this has worked for me:</p>\n<ol>\n<li><p>Get the File as <code>new File</code></p>\n</li>\n<li><p>Use the <code>org.springframework.core.io.FileSystemResource.FileSystemResource</code>\nlibrary to pass the File as a ResponseBody.</p>\n<pre><code>@RequestMapping(value = GET_MAP , method = RequestMethod.GET)\npublic @ResponseBody Resource getMap(@PathVariable(&quot;filename&quot;)String filename ,HttpServletResponse response) throws IOException {\n    File file = new File(filename + &quot;.zip&quot;);\n    return new FileSystemResource(file);\n}\n</code></pre>\n</li>\n</ol>\n"}],"owner":{"account_id":5140086,"reputation":2459,"user_id":4117756,"accept_rate":70,"display_name":"Alberto Crespo"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":872,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":40086794,"answer_count":1,"score":0,"last_activity_date":1646085890,"creation_date":1476469669,"question_id":40049827,"body_markdown":"I had an Android application working with Retrofit 1.9 and a Spring Server. Android application could download files perfectly. I am trying to migrate to Retrofit 2.0.\r\n\r\nRetrofit 1.9 Code\r\n\r\n**Controller Server:**\r\n\r\n    @RequestMapping(value = GET_MAP , method = RequestMethod.GET)\r\n\tpublic void getMap(@PathVariable(&quot;filename&quot;)String filename\r\n\t\t\t\t,HttpServletResponse response) throws IOException {\r\n\t\t\tFiles.copy(filename + &quot;.zip&quot;, response.getOutputStream());\r\n\t}\r\n\r\n**Android Interface API**\r\n\r\n    @Streaming\r\n    @GET(GET_MAP)\r\n    public Response getMap(@Path(&quot;filename&quot;) long id);\r\n\r\n------\r\n\r\nSo, after Googling for migrating in order to download files in `Retrofit 2.0` I have to use `Call&lt;ResponseBody&gt;` in my Android Interface API. I tried something like this:\r\n\r\n**OPTION 1 Controller Server Code**  \r\n\r\n    @RequestMapping(value = GET_MAP , method = RequestMethod.GET)\r\n\tpublic void getMap(@PathVariable(&quot;filename&quot;)String filename\r\n\t\t\t\t,HttpServletResponse response) throws IOException {\r\n\t\t\tFiles.copy(filename + &quot;.zip&quot;, response.getOutputStream());\r\n\t}\r\n\r\n**OPTION 2 Controller Server Code**\r\n\r\n    @RequestMapping(value = GET_MAP , method = RequestMethod.GET)\r\n\tpublic @ResponseBody HttpServletResponse getMap(@PathVariable(&quot;filename&quot;)String filename\r\n\t\t\t\t,HttpServletResponse response) throws IOException {\r\n\t\t\tFiles.copy(filename + &quot;.zip&quot;, response.getOutputStream());\r\n    return response;\r\n\t}\r\n\r\n**Android Interface API**\r\n\r\n    @Streaming\r\n    @GET(GET_MAP)\r\n    public Call&lt;ResponseBody&gt; getMap(@Path(&quot;filename&quot;) long id);\r\n\r\n\r\nBut using these two options the response length gives me -1:\r\n\r\n`response.body().contentLength() = -1`\r\n\r\nHow do I have to migrate the Controller method? ","title":"Download File using Retrofit 2.0 and Spring Server","body":"<p>I had an Android application working with Retrofit 1.9 and a Spring Server. Android application could download files perfectly. I am trying to migrate to Retrofit 2.0.</p>\n<p>Retrofit 1.9 Code</p>\n<p><strong>Controller Server:</strong></p>\n<pre><code>@RequestMapping(value = GET_MAP , method = RequestMethod.GET)\npublic void getMap(@PathVariable(&quot;filename&quot;)String filename\n            ,HttpServletResponse response) throws IOException {\n        Files.copy(filename + &quot;.zip&quot;, response.getOutputStream());\n}\n</code></pre>\n<p><strong>Android Interface API</strong></p>\n<pre><code>@Streaming\n@GET(GET_MAP)\npublic Response getMap(@Path(&quot;filename&quot;) long id);\n</code></pre>\n<hr />\n<p>So, after Googling for migrating in order to download files in <code>Retrofit 2.0</code> I have to use <code>Call&lt;ResponseBody&gt;</code> in my Android Interface API. I tried something like this:</p>\n<p><strong>OPTION 1 Controller Server Code</strong></p>\n<pre><code>@RequestMapping(value = GET_MAP , method = RequestMethod.GET)\npublic void getMap(@PathVariable(&quot;filename&quot;)String filename\n            ,HttpServletResponse response) throws IOException {\n        Files.copy(filename + &quot;.zip&quot;, response.getOutputStream());\n}\n</code></pre>\n<p><strong>OPTION 2 Controller Server Code</strong></p>\n<pre><code>@RequestMapping(value = GET_MAP , method = RequestMethod.GET)\npublic @ResponseBody HttpServletResponse getMap(@PathVariable(&quot;filename&quot;)String filename\n            ,HttpServletResponse response) throws IOException {\n        Files.copy(filename + &quot;.zip&quot;, response.getOutputStream());\nreturn response;\n}\n</code></pre>\n<p><strong>Android Interface API</strong></p>\n<pre><code>@Streaming\n@GET(GET_MAP)\npublic Call&lt;ResponseBody&gt; getMap(@Path(&quot;filename&quot;) long id);\n</code></pre>\n<p>But using these two options the response length gives me -1:</p>\n<p><code>response.body().contentLength() = -1</code></p>\n<p>How do I have to migrate the Controller method?</p>\n"},{"tags":["java","asynchronous","rx-java","rx-java2"],"comments":[{"owner":{"account_id":1353955,"reputation":2623,"user_id":1292745,"display_name":"gpunto"},"score":1,"creation_date":1646252859,"post_id":71301449,"comment_id":126080250,"body_markdown":"Maybe you&#39;re looking for `doOnSuccess`?","body":"Maybe you&#39;re looking for <code>doOnSuccess</code>?"},{"owner":{"account_id":23723804,"reputation":31,"user_id":17744001,"display_name":"AlmightyArashi"},"score":0,"creation_date":1646846358,"post_id":71301449,"comment_id":126226782,"body_markdown":"#doOnSuccess is fire and forget and could run concurrent to any other subscriber. I need to logic contained in the critical path.","body":"#doOnSuccess is fire and forget and could run concurrent to any other subscriber. I need to logic contained in the critical path."},{"owner":{"account_id":1353955,"reputation":2623,"user_id":1292745,"display_name":"gpunto"},"score":0,"creation_date":1646852332,"post_id":71301449,"comment_id":126228864,"body_markdown":"What do you mean by &quot;is fire and forget&quot;? As far as I know `doOnSuccess` is equivalent to your example with `map`.","body":"What do you mean by &quot;is fire and forget&quot;? As far as I know <code>doOnSuccess</code> is equivalent to your example with <code>map</code>."}],"owner":{"account_id":23723804,"reputation":31,"user_id":17744001,"display_name":"AlmightyArashi"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":36,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1646085015,"creation_date":1646085015,"question_id":71301449,"body_markdown":"I am using the Single RxJava object and I want to run a void method in the critical path of the async workflow but return the previous result. \r\n\r\nFor example, I have something like:\r\n```\r\nSingle&lt;Integer&gt; method() {\r\n  Single&lt;Integer&gt; value = Single.just(10);\r\n  return value.&lt;RxJava Method&gt;(Consumer&lt;Integer&gt; or Runnable&lt;Integer&gt;);\r\n}\r\n\r\nmethod().blockingGet();\r\n```\r\nreturns \r\n```\r\n&gt; 10\r\n```\r\nThe stuff I do in `Consumer&lt;Integer&gt; or Runnable&lt;Integer&gt;`, I want to make sure happens before I return the value `10`. Is there a built in method in Single for this?\r\n\r\nie: I am just wondering if there is a cleaner way to portray:\r\n```\r\nSingle&lt;Integer&gt; method() {\r\n  Single&lt;Integer&gt; value = Single.just(10);\r\n  return value.map(result -&gt; {\r\n    // call void method\r\n    return result;\r\n  });\r\n}\r\n\r\nmethod().blockingGet();\r\n```","title":"RxJava - Helper method to return previous result after executing Callable","body":"<p>I am using the Single RxJava object and I want to run a void method in the critical path of the async workflow but return the previous result.</p>\n<p>For example, I have something like:</p>\n<pre><code>Single&lt;Integer&gt; method() {\n  Single&lt;Integer&gt; value = Single.just(10);\n  return value.&lt;RxJava Method&gt;(Consumer&lt;Integer&gt; or Runnable&lt;Integer&gt;);\n}\n\nmethod().blockingGet();\n</code></pre>\n<p>returns</p>\n<pre><code>&gt; 10\n</code></pre>\n<p>The stuff I do in <code>Consumer&lt;Integer&gt; or Runnable&lt;Integer&gt;</code>, I want to make sure happens before I return the value <code>10</code>. Is there a built in method in Single for this?</p>\n<p>ie: I am just wondering if there is a cleaner way to portray:</p>\n<pre><code>Single&lt;Integer&gt; method() {\n  Single&lt;Integer&gt; value = Single.just(10);\n  return value.map(result -&gt; {\n    // call void method\n    return result;\n  });\n}\n\nmethod().blockingGet();\n</code></pre>\n"},{"tags":["java","mysql","spring-boot","hibernate"],"comments":[{"owner":{"account_id":23783500,"reputation":5175,"user_id":17795888,"display_name":"Chaosfire"},"score":1,"creation_date":1645811512,"post_id":71269527,"comment_id":125977540,"body_markdown":"Is there a specific reason why you don&#39;t delete the previous exam and its section and questions, instead of overwriting stuff? At the moment it sounds to me as if you are complicating it more than needed.","body":"Is there a specific reason why you don&#39;t delete the previous exam and its section and questions, instead of overwriting stuff? At the moment it sounds to me as if you are complicating it more than needed."},{"owner":{"account_id":6802882,"reputation":195,"user_id":5235665,"display_name":"hotmeatballsoup"},"score":0,"creation_date":1645813174,"post_id":71269527,"comment_id":125978079,"body_markdown":"Thanks @Chaosfire (+1) I tried your suggestion (please see my update above) and it fails with a similar (but not same) **constraint** violation exception.","body":"Thanks @Chaosfire (+1) I tried your suggestion (please see my update above) and it fails with a similar (but not same) <b>constraint</b> violation exception."},{"owner":{"account_id":6802882,"reputation":195,"user_id":5235665,"display_name":"hotmeatballsoup"},"score":0,"creation_date":1645813570,"post_id":71269527,"comment_id":125978216,"body_markdown":"Do I need to create a `QuestionRepository` and `SectionRepository`, and then orchestrate exam, section and question `save(...)` calls between them, in some correct order, maybe? I was hoping this was what all `Cascade`-related annotations where doing for me though...","body":"Do I need to create a <code>QuestionRepository</code> and <code>SectionRepository</code>, and then orchestrate exam, section and question <code>save(...)</code> calls between them, in some correct order, maybe? I was hoping this was what all <code>Cascade</code>-related annotations where doing for me though..."}],"answers":[{"tags":[],"owner":{"account_id":23783500,"reputation":5175,"user_id":17795888,"display_name":"Chaosfire"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1645868544,"creation_date":1645868544,"answer_id":71275587,"question_id":71269527,"body_markdown":"I wasn&#39;t able to replicate your exact exceptions, but after tinkering a bit, i made it work, locally at least...\r\n```\r\n@Service\r\npublic class ExamService {\r\n\r\n    @Autowired\r\n    private ExamRepository examRepository;\r\n\r\n    public void upsertExamFromImport(Exam importedExam) {\r\n        Optional&lt;Exam&gt; maybeExistingExam = examRepository.findByName(importedExam.getName());\r\n        if (maybeExistingExam.isPresent()) {\r\n            Exam existingExam = maybeExistingExam.get();\r\n            this.examRepository.delete(existingExam);\r\n        }\r\n        this.examRepository.save(importedExam);\r\n    }\r\n}\r\n```\r\nThat&#39;s how i changed the service - i delete the existing exam, and **then** save the new one. To be honest that should not make difference, considering that your unique keys are composite and there will be new ids, but this the correct logical order, so it&#39;s better to stick to it.\r\n\r\nYou are already cascading persist and merge operations, so save should be ok. For delete to work you would need to add cascading for removal operations both for sections and questions.\r\n```\r\n@OneToMany(mappedBy = &quot;exam&quot;, fetch = FetchType.EAGER, cascade = {CascadeType.PERSIST, CascadeType.MERGE, CascadeType.REMOVE})\r\n@OrderBy(&quot;order asc&quot;)\r\nprivate SortedSet&lt;Section&gt; sections = new TreeSet&lt;&gt;();\r\n```\r\nIn exams cascade sections removal.\r\n```\r\n@OneToMany(mappedBy = &quot;section&quot;, fetch = FetchType.EAGER, cascade = {CascadeType.PERSIST, CascadeType.MERGE, CascadeType.REMOVE})\r\n@OrderBy(&quot;order asc&quot;)\r\nprivate SortedSet&lt;Question&gt; questions = new TreeSet&lt;&gt;();\r\n```\r\nAnd cascade questions removal in sections.","title":"Recursive upserts with Hibernate/JPA","body":"<p>I wasn't able to replicate your exact exceptions, but after tinkering a bit, i made it work, locally at least...</p>\n<pre><code>@Service\npublic class ExamService {\n\n    @Autowired\n    private ExamRepository examRepository;\n\n    public void upsertExamFromImport(Exam importedExam) {\n        Optional&lt;Exam&gt; maybeExistingExam = examRepository.findByName(importedExam.getName());\n        if (maybeExistingExam.isPresent()) {\n            Exam existingExam = maybeExistingExam.get();\n            this.examRepository.delete(existingExam);\n        }\n        this.examRepository.save(importedExam);\n    }\n}\n</code></pre>\n<p>That's how i changed the service - i delete the existing exam, and <strong>then</strong> save the new one. To be honest that should not make difference, considering that your unique keys are composite and there will be new ids, but this the correct logical order, so it's better to stick to it.</p>\n<p>You are already cascading persist and merge operations, so save should be ok. For delete to work you would need to add cascading for removal operations both for sections and questions.</p>\n<pre><code>@OneToMany(mappedBy = &quot;exam&quot;, fetch = FetchType.EAGER, cascade = {CascadeType.PERSIST, CascadeType.MERGE, CascadeType.REMOVE})\n@OrderBy(&quot;order asc&quot;)\nprivate SortedSet&lt;Section&gt; sections = new TreeSet&lt;&gt;();\n</code></pre>\n<p>In exams cascade sections removal.</p>\n<pre><code>@OneToMany(mappedBy = &quot;section&quot;, fetch = FetchType.EAGER, cascade = {CascadeType.PERSIST, CascadeType.MERGE, CascadeType.REMOVE})\n@OrderBy(&quot;order asc&quot;)\nprivate SortedSet&lt;Question&gt; questions = new TreeSet&lt;&gt;();\n</code></pre>\n<p>And cascade questions removal in sections.</p>\n"},{"tags":[],"owner":{"account_id":6802882,"reputation":195,"user_id":5235665,"display_name":"hotmeatballsoup"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1646084955,"creation_date":1646084955,"answer_id":71301439,"question_id":71269527,"body_markdown":"I ended up having to manually link the exam, its sections, and each section&#39;s questions together, bi-directionally. Prior to the save, and that fixed everything.\r\n\r\nExample:\r\n```\r\nexam.getSections().forEach(section -&gt; {\r\n    section.setExam(exam);\r\n    section.getQuestions().forEach(question -&gt; {\r\n        question.setSection(section);\r\n    });\r\n});\r\n\r\nexamRepository.save(exam);\r\n```","title":"Recursive upserts with Hibernate/JPA","body":"<p>I ended up having to manually link the exam, its sections, and each section's questions together, bi-directionally. Prior to the save, and that fixed everything.</p>\n<p>Example:</p>\n<pre><code>exam.getSections().forEach(section -&gt; {\n    section.setExam(exam);\n    section.getQuestions().forEach(question -&gt; {\n        question.setSection(section);\n    });\n});\n\nexamRepository.save(exam);\n</code></pre>\n"}],"owner":{"account_id":6802882,"reputation":195,"user_id":5235665,"display_name":"hotmeatballsoup"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":123,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":71301439,"answer_count":2,"score":1,"last_activity_date":1646084955,"creation_date":1645809925,"question_id":71269527,"body_markdown":"Java 11, Spring, Hibernate &amp; MySQL here. I have some tables:\r\n```\r\ncreate table if not exists exam\r\n(\r\n    id           int(11)      not null auto_increment,\r\n    name         varchar(100) not null,\r\n    display_name varchar(250),\r\n    constraint exam_pkey primary key (id),\r\n);\r\n\r\ncreate table if not exists section\r\n(\r\n    id           int(11)      not null auto_increment,\r\n    exam_id      int(11)      not null,\r\n    name         varchar(100) not null,\r\n    display_name varchar(250),\r\n    `order`      int(11)      not null,\r\n    constraint section_pkey primary key (id),\r\n    constraint section_exam_fkey foreign key (exam_id) references exam (id),\r\n    constraint section_name_key unique (exam_id, name),\r\n);\r\n\r\ncreate table if not exists question\r\n(\r\n    id         int(11)      not null auto_increment,\r\n    section_id int(11)      not null,\r\n    name       varchar(100) not null,\r\n    type       varchar(25)  not null,\r\n    `order`    int(11)      not null,\r\n    constraint question_pkey primary key (id),\r\n    constraint question_exam_fkey foreign key (section_id) references section (id),\r\n    constraint question_name_key unique (section_id, name),\r\n);\r\n```\r\n\r\nAnd the JPA entity classes modeling them:\r\n```\r\n@Getter\r\n@Setter\r\n@Entity\r\n@Table(name = &quot;exam&quot;)\r\npublic class Exam {\r\n\r\n    @Id\r\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n    private Long id;\r\n\r\n    @Pattern(regexp = &quot;\\\\w+&quot;)\r\n    private String name;\r\n\r\n    private String displayName;\r\n\r\n    @OneToMany(mappedBy = &quot;exam&quot;, fetch = FetchType.EAGER, cascade = {CascadeType.PERSIST, CascadeType.MERGE})\r\n    @OrderBy(&quot;order asc&quot;)\r\n    private SortedSet&lt;Section&gt; sections = new TreeSet&lt;&gt;();\r\n\r\n}\r\n\r\n@Getter\r\n@Setter\r\n@Entity\r\n@Table(name = &quot;section&quot;)\r\npublic class Section implements Comparable&lt;Section&gt; {\r\n\r\n    @Id\r\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n    private Long id;\r\n\r\n    @ManyToOne\r\n    @JoinColumn(name = &quot;exam_id&quot;)\r\n    @JsonIgnore\r\n    private Exam exam;\r\n\r\n    @Pattern(regexp = &quot;\\\\w+&quot;)\r\n    private String name;\r\n\r\n    private String displayName;\r\n\r\n    @Column(name=&quot;`order`&quot;)\r\n    private Long order;\r\n\r\n    @OneToMany(mappedBy = &quot;section&quot;, fetch = FetchType.EAGER, cascade = {CascadeType.PERSIST, CascadeType.MERGE})\r\n    @OrderBy(&quot;order asc&quot;)\r\n    private SortedSet&lt;Question&gt; questions = new TreeSet&lt;&gt;();\r\n\r\n    @Override\r\n    public int compareTo(Section other) {\r\n        return ObjectUtils.compare(order, other.getOrder());\r\n    }\r\n}\r\n\r\n// Question is a huge, complicated entity and I don&#39;t think I need to show it for\r\n// someone to answer this question so I am omitting it for now, but I can add it\r\n// in here if anyone thinks it makes a difference in providing the answer\r\n```\r\n\r\nAnd the repositories used for persisting them:\r\n```\r\n@Repository\r\npublic interface ExamRepository extends JpaRepository&lt;Exam, Long&gt; {\r\n    Optional&lt;Exam&gt; findByName(String name);\r\n}\r\n```\r\n\r\nHere is my situation:\r\n\r\n- at any given point in time, the database will have 0+ `exam` records in it\r\n  - obviously if it has 0 `exam` entities in it, it will also not have any `section` or `question` entities in it either, and thus, all 3 tables would be completely empty (in this case)\r\n  - or, there could be hundreds of `exam` records, each with their own multiple `section`s, and each section with a multitude of its own `question` records (e.g. the tables are full of data)\r\n- my server will be receiving a new `Exam` instance (with its own &quot;subtree&quot; of `Section` and `Question` instances) from another source (not this MySQL DB), let us refer to these a &quot;**Imported Exams**&quot;\r\n  - it really shouldn&#39;t matter but basically files will be FTP&#39;d into a folder and an asynchronous job deserializes these files into `Exam` instances\r\n- if one of these Imported `Exam`s has a `name` value that matches any of the `Exam` entities in the MySQL DB, I want the imported `Exam` and its entire subtree object graph (all its sections, and each section&#39;s questions) to completely overwrite the matching DB `Exam` and its subtree/object graph\r\n  - so for example, if the DB has an Exam named &quot;sally&quot; and it has 1 section and that section has 4 questions, and then an imported `Exam` also has a name of &quot;sally&quot;, I want it to completely overwrite the &quot;DB sally&quot; exam, and all of that exam&#39;s sections and questions, completely and recursively\r\n  - when this overwrite happens, all the sections and questions belonging to the &quot;old&quot; (existing) `Exam` are deleted and overwritten/replaced by the sections and questions of the new imported exam\r\n- but if the import Exam&#39;s name _doesn&#39;t_ match any exam names in the DB, I want it inserted as a brand new `Exam` instance, with its whole entire subtree/object graph persisted to their respective tables\r\n\r\nI have an `ExamService` for doing this:\r\n```\r\n@Service\r\npublic class ExamService {\r\n\r\n  @Autowired\r\n  private ExamRepository examRepository;\r\n\r\n  public void upsertExamFromImport(Exam importedExam) {\r\n\r\n    // for this demonstration, pretend importedExam.getName() is &quot;sally&quot; at runtime\r\n\r\n    Optional&lt;Exam&gt; maybeExistingExam = examRepository.findByName(importedExam.getName());\r\n    if (maybeExistingExam.isPresent()) {\r\n      Exam existingExam = maybeExistingExam.get();\r\n\r\n      // tell JPA/DB that the import IS the new matching exam\r\n      importedExam.setId(existingExam.getId());\r\n    }\r\n\r\n    examRepository.save(importedExam);\r\n \r\n  }\r\n\r\n}\r\n```\r\n\r\nCurrently my database _does_ have an exam named &quot;sally&quot;. So there will be a match.\r\n\r\nWhen this code runs I get the following exception:\r\n```\r\norg.springframework.dao.DataIntegrityViolationException: could not execute statement; SQL [n/a]; constraint [null]; nested exception is org.hibernate.exception.ConstraintViolationException: could not execute statement\r\n\r\njava.sql.SQLIntegrityConstraintViolationException: Column &#39;exam_id&#39; cannot be null\r\n\r\n```\r\n\r\nSo what I think is happening here is:\r\n\r\n1. The code sees that there is an existing exam that matches the imported exam&#39;s name (hence `maybeExistingExam` is present and non-null); then\r\n2. `importedExam.setId(existingExam.getId())` executes and now the imported exam has the existing exam&#39;s ID, however its nested `Section` instances still have a `null` `Exam` reference (`exam_id`). Hence the `Exam` is considered &quot;attached&quot; yet its subtree is still considered (in JPA parlance) to be &quot;detached&quot;.\r\n3. When Hibernate goes to persist the imported exam&#39;s `Section`s, they are detached but since the parent `Exam` is attached, the `exam_id` is expected to be non-null\r\n\r\nEven if that theory isn&#39;t completely accurate, I think I&#39;m close enough. Regardless, **what&#39;s the fix here?** How do I tell Hibernate/JPA &quot;_hey pal, this imported exam matches an existing, so it needs to completely (recursively) overwrite the match in the DB_&quot;?\r\n\r\n---\r\n\r\n### Update\r\nIf I try changing the service code to:\r\n```\r\n@Service\r\npublic class ExamService {\r\n\r\n  @Autowired\r\n  private ExamRepository examRepository;\r\n\r\n  public void upsertExamFromImport(Exam importedExam) {\r\n\r\n    // for this demonstration, pretend importedExam.getName() is &quot;sally&quot; at runtime\r\n\r\n    Optional&lt;Exam&gt; maybeExistingExam = examRepository.findByName(importedExam.getName());\r\n    examRepository.save(importedExam);\r\n    if (maybeExistingExam.isPresent()) {\r\n      Exam existingExam = maybeExistingExam.get();\r\n      examRepository.delete(existingExam);\r\n    }\r\n\r\n  }\r\n\r\n}\r\n```\r\n\r\nI get a `ConstraintViolationException: Column &#39;exam_id&#39; cannot be null` exception when it executes `examRepository.save(importedExam)`.","title":"Recursive upserts with Hibernate/JPA","body":"<p>Java 11, Spring, Hibernate &amp; MySQL here. I have some tables:</p>\n<pre><code>create table if not exists exam\n(\n    id           int(11)      not null auto_increment,\n    name         varchar(100) not null,\n    display_name varchar(250),\n    constraint exam_pkey primary key (id),\n);\n\ncreate table if not exists section\n(\n    id           int(11)      not null auto_increment,\n    exam_id      int(11)      not null,\n    name         varchar(100) not null,\n    display_name varchar(250),\n    `order`      int(11)      not null,\n    constraint section_pkey primary key (id),\n    constraint section_exam_fkey foreign key (exam_id) references exam (id),\n    constraint section_name_key unique (exam_id, name),\n);\n\ncreate table if not exists question\n(\n    id         int(11)      not null auto_increment,\n    section_id int(11)      not null,\n    name       varchar(100) not null,\n    type       varchar(25)  not null,\n    `order`    int(11)      not null,\n    constraint question_pkey primary key (id),\n    constraint question_exam_fkey foreign key (section_id) references section (id),\n    constraint question_name_key unique (section_id, name),\n);\n</code></pre>\n<p>And the JPA entity classes modeling them:</p>\n<pre><code>@Getter\n@Setter\n@Entity\n@Table(name = &quot;exam&quot;)\npublic class Exam {\n\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    private Long id;\n\n    @Pattern(regexp = &quot;\\\\w+&quot;)\n    private String name;\n\n    private String displayName;\n\n    @OneToMany(mappedBy = &quot;exam&quot;, fetch = FetchType.EAGER, cascade = {CascadeType.PERSIST, CascadeType.MERGE})\n    @OrderBy(&quot;order asc&quot;)\n    private SortedSet&lt;Section&gt; sections = new TreeSet&lt;&gt;();\n\n}\n\n@Getter\n@Setter\n@Entity\n@Table(name = &quot;section&quot;)\npublic class Section implements Comparable&lt;Section&gt; {\n\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    private Long id;\n\n    @ManyToOne\n    @JoinColumn(name = &quot;exam_id&quot;)\n    @JsonIgnore\n    private Exam exam;\n\n    @Pattern(regexp = &quot;\\\\w+&quot;)\n    private String name;\n\n    private String displayName;\n\n    @Column(name=&quot;`order`&quot;)\n    private Long order;\n\n    @OneToMany(mappedBy = &quot;section&quot;, fetch = FetchType.EAGER, cascade = {CascadeType.PERSIST, CascadeType.MERGE})\n    @OrderBy(&quot;order asc&quot;)\n    private SortedSet&lt;Question&gt; questions = new TreeSet&lt;&gt;();\n\n    @Override\n    public int compareTo(Section other) {\n        return ObjectUtils.compare(order, other.getOrder());\n    }\n}\n\n// Question is a huge, complicated entity and I don't think I need to show it for\n// someone to answer this question so I am omitting it for now, but I can add it\n// in here if anyone thinks it makes a difference in providing the answer\n</code></pre>\n<p>And the repositories used for persisting them:</p>\n<pre><code>@Repository\npublic interface ExamRepository extends JpaRepository&lt;Exam, Long&gt; {\n    Optional&lt;Exam&gt; findByName(String name);\n}\n</code></pre>\n<p>Here is my situation:</p>\n<ul>\n<li>at any given point in time, the database will have 0+ <code>exam</code> records in it\n<ul>\n<li>obviously if it has 0 <code>exam</code> entities in it, it will also not have any <code>section</code> or <code>question</code> entities in it either, and thus, all 3 tables would be completely empty (in this case)</li>\n<li>or, there could be hundreds of <code>exam</code> records, each with their own multiple <code>section</code>s, and each section with a multitude of its own <code>question</code> records (e.g. the tables are full of data)</li>\n</ul>\n</li>\n<li>my server will be receiving a new <code>Exam</code> instance (with its own &quot;subtree&quot; of <code>Section</code> and <code>Question</code> instances) from another source (not this MySQL DB), let us refer to these a &quot;<strong>Imported Exams</strong>&quot;\n<ul>\n<li>it really shouldn't matter but basically files will be FTP'd into a folder and an asynchronous job deserializes these files into <code>Exam</code> instances</li>\n</ul>\n</li>\n<li>if one of these Imported <code>Exam</code>s has a <code>name</code> value that matches any of the <code>Exam</code> entities in the MySQL DB, I want the imported <code>Exam</code> and its entire subtree object graph (all its sections, and each section's questions) to completely overwrite the matching DB <code>Exam</code> and its subtree/object graph\n<ul>\n<li>so for example, if the DB has an Exam named &quot;sally&quot; and it has 1 section and that section has 4 questions, and then an imported <code>Exam</code> also has a name of &quot;sally&quot;, I want it to completely overwrite the &quot;DB sally&quot; exam, and all of that exam's sections and questions, completely and recursively</li>\n<li>when this overwrite happens, all the sections and questions belonging to the &quot;old&quot; (existing) <code>Exam</code> are deleted and overwritten/replaced by the sections and questions of the new imported exam</li>\n</ul>\n</li>\n<li>but if the import Exam's name <em>doesn't</em> match any exam names in the DB, I want it inserted as a brand new <code>Exam</code> instance, with its whole entire subtree/object graph persisted to their respective tables</li>\n</ul>\n<p>I have an <code>ExamService</code> for doing this:</p>\n<pre><code>@Service\npublic class ExamService {\n\n  @Autowired\n  private ExamRepository examRepository;\n\n  public void upsertExamFromImport(Exam importedExam) {\n\n    // for this demonstration, pretend importedExam.getName() is &quot;sally&quot; at runtime\n\n    Optional&lt;Exam&gt; maybeExistingExam = examRepository.findByName(importedExam.getName());\n    if (maybeExistingExam.isPresent()) {\n      Exam existingExam = maybeExistingExam.get();\n\n      // tell JPA/DB that the import IS the new matching exam\n      importedExam.setId(existingExam.getId());\n    }\n\n    examRepository.save(importedExam);\n \n  }\n\n}\n</code></pre>\n<p>Currently my database <em>does</em> have an exam named &quot;sally&quot;. So there will be a match.</p>\n<p>When this code runs I get the following exception:</p>\n<pre><code>org.springframework.dao.DataIntegrityViolationException: could not execute statement; SQL [n/a]; constraint [null]; nested exception is org.hibernate.exception.ConstraintViolationException: could not execute statement\n\njava.sql.SQLIntegrityConstraintViolationException: Column 'exam_id' cannot be null\n\n</code></pre>\n<p>So what I think is happening here is:</p>\n<ol>\n<li>The code sees that there is an existing exam that matches the imported exam's name (hence <code>maybeExistingExam</code> is present and non-null); then</li>\n<li><code>importedExam.setId(existingExam.getId())</code> executes and now the imported exam has the existing exam's ID, however its nested <code>Section</code> instances still have a <code>null</code> <code>Exam</code> reference (<code>exam_id</code>). Hence the <code>Exam</code> is considered &quot;attached&quot; yet its subtree is still considered (in JPA parlance) to be &quot;detached&quot;.</li>\n<li>When Hibernate goes to persist the imported exam's <code>Section</code>s, they are detached but since the parent <code>Exam</code> is attached, the <code>exam_id</code> is expected to be non-null</li>\n</ol>\n<p>Even if that theory isn't completely accurate, I think I'm close enough. Regardless, <strong>what's the fix here?</strong> How do I tell Hibernate/JPA &quot;<em>hey pal, this imported exam matches an existing, so it needs to completely (recursively) overwrite the match in the DB</em>&quot;?</p>\n<hr />\n<h3>Update</h3>\n<p>If I try changing the service code to:</p>\n<pre><code>@Service\npublic class ExamService {\n\n  @Autowired\n  private ExamRepository examRepository;\n\n  public void upsertExamFromImport(Exam importedExam) {\n\n    // for this demonstration, pretend importedExam.getName() is &quot;sally&quot; at runtime\n\n    Optional&lt;Exam&gt; maybeExistingExam = examRepository.findByName(importedExam.getName());\n    examRepository.save(importedExam);\n    if (maybeExistingExam.isPresent()) {\n      Exam existingExam = maybeExistingExam.get();\n      examRepository.delete(existingExam);\n    }\n\n  }\n\n}\n</code></pre>\n<p>I get a <code>ConstraintViolationException: Column 'exam_id' cannot be null</code> exception when it executes <code>examRepository.save(importedExam)</code>.</p>\n"},{"tags":["java","nft","xrp"],"answers":[{"tags":[],"owner":{"account_id":174280,"reputation":225,"user_id":403536,"display_name":"sappenin"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1646084503,"creation_date":1646084503,"answer_id":71301369,"question_id":71149010,"body_markdown":"In response to this question, this issue was fixed in the xrpl4j codebase. See https://github.com/XRPLF/xrpl4j/issues/223 for more details.","title":"XRPL4J - Error in signing NFTokenMint transaction","body":"<p>In response to this question, this issue was fixed in the xrpl4j codebase. See <a href=\"https://github.com/XRPLF/xrpl4j/issues/223\" rel=\"nofollow noreferrer\">https://github.com/XRPLF/xrpl4j/issues/223</a> for more details.</p>\n"}],"owner":{"account_id":4261646,"reputation":2652,"user_id":3485877,"accept_rate":43,"display_name":"Aless55"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":195,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":71301369,"answer_count":1,"score":1,"last_activity_date":1646084503,"creation_date":1645044164,"question_id":71149010,"body_markdown":"I am trying out the XLS-20 nft-support branch of the XRPL4J library. I created a nft-devnet faucet address and am trying out a basic `NFTokenMint` transaction. \r\nI reused some of the available tutorial code to get certain values like the sequences or the ledger fee.\r\n\r\nIf I understand it correctly there is a problem in my `tk` Object. But I can&#39;t figure out the exact cause.\r\n\r\n```\r\nWalletFactory walletFactory = DefaultWalletFactory.getInstance();\r\nWallet testWallet = walletFactory.fromSeed(&quot;shhf1NSyjZw1JLj9Y67XdiAeaqDou&quot;, true);\r\n\r\n// Get the Classic address from testWallet\r\nAddress classicAddress = testWallet.classicAddress();\r\n\r\n// Connect --------------------------------------------------------------------\r\nHttpUrl rippledUrl = HttpUrl.get(&quot;http://xls20-sandbox.rippletest.net:51234&quot;);\r\nXrplClient xrplClient = new XrplClient(rippledUrl);\r\n\r\n// Prepare transaction --------------------------------------------------------\r\n// Look up your Account Info\r\nAccountInfoRequestParams requestParams = AccountInfoRequestParams.builder()\r\n                .ledgerIndex(LedgerIndex.VALIDATED)\r\n                .account(classicAddress)\r\n                .build();\r\nAccountInfoResult accountInfoResult = xrplClient.accountInfo(requestParams);\r\n        UnsignedInteger sequence = accountInfoResult.accountData().sequence();\r\n\r\n// Request current fee information from rippled\r\nFeeResult feeResult = xrplClient.fee();\r\nXrpCurrencyAmount openLedgerFee = feeResult.drops().openLedgerFee();\r\n\r\n// Get the latest validated ledger index\r\nLedgerIndex validatedLedger = xrplClient.ledger(\r\n                        LedgerRequestParams.builder()\r\n                                .ledgerIndex(LedgerIndex.VALIDATED)\r\n                                .build()\r\n                )\r\n                .ledgerIndex()\r\n                .orElseThrow(() -&gt; new RuntimeException(&quot;LedgerIndex not available.&quot;));\r\n\r\n// Workaround for https://github.com/XRPLF/xrpl4j/issues/84\r\nUnsignedInteger lastLedgerSequence = UnsignedInteger.valueOf(\r\n                validatedLedger.plus(UnsignedLong.valueOf(4)).unsignedLongValue().intValue()\r\n        );\r\n\r\nNfTokenMint tk = NfTokenMint.builder()\r\n                .account(classicAddress)\r\n                .signingPublicKey(publicKey)\r\n                .lastLedgerSequence(lastLedgerSequence)\r\n                .fee(openLedgerFee)\r\n                .flags(Flags.NfTokenMintFlags.builder().tfOnlyXRP(true).tfTransferable(true).build())\r\n                .tokenTaxon(UnsignedLong.ZERO)\r\n                .sequence(sequence)\r\n                .uri(&quot;ipfs://bafybeigdyrzt5sfp7udm7hu76uh7y26nf4dfuylqabf3oclgtqy55fbzdi&quot;)\r\n                .build();\r\n\r\n\r\n        // Sign the Minting\r\nSignedTransaction&lt;NfTokenMint&gt; signedMinting = signatureService.sign(KeyMetadata.EMPTY, tk);\r\n```\r\nIn the signing line I got following error:\r\n```\r\n    java.lang.NumberFormatException: NfTokenMint\r\n    \tat com.google.common.primitives.UnsignedLongs.parseUnsignedLong(UnsignedLongs.java:351) ~[guava-29.0-jre.jar:na]\r\n    \tat com.google.common.primitives.UnsignedLong.valueOf(UnsignedLong.java:123) ~[guava-29.0-jre.jar:na]\r\n    \tat com.google.common.primitives.UnsignedLong.valueOf(UnsignedLong.java:110) ~[guava-29.0-jre.jar:na]\r\n    \tat org.xrpl.xrpl4j.codec.binary.types.UInt16Type.fromJson(UInt16Type.java:28) ~[xrpl4j-binary-codec-nft-support-SNAPSHOT.jar:na]\r\n    \tat org.xrpl.xrpl4j.codec.binary.types.UInt16Type.fromJson(UInt16Type.java:11) ~[xrpl4j-binary-codec-nft-support-SNAPSHOT.jar:na]\r\n    \tat org.xrpl.xrpl4j.codec.binary.serdes.BinarySerializer.writeFieldAndValue(BinarySerializer.java:90) ~[xrpl4j-binary-codec-nft-support-SNAPSHOT.jar:na]\r\n    \tat org.xrpl.xrpl4j.codec.binary.types.STObjectType.lambda$fromJson$2(STObjectType.java:78) ~[xrpl4j-binary-codec-nft-support-SNAPSHOT.jar:na]\r\n    \tat java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.accept(ForEachOps.java:183) ~[na:na]\r\n    \tat java.base/java.util.stream.SortedOps$SizedRefSortingSink.end(SortedOps.java:357) ~[na:na]\r\n    \tat java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:510) ~[na:na]\r\n    \tat java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499) ~[na:na]\r\n    \tat java.base/java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:150) ~[na:na]\r\n    \tat java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:173) ~[na:na]\r\n    \tat java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234) ~[na:na]\r\n    \tat java.base/java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:596) ~[na:na]\r\n    \tat org.xrpl.xrpl4j.codec.binary.types.STObjectType.fromJson(STObjectType.java:76) ~[xrpl4j-binary-codec-nft-support-SNAPSHOT.jar:na]\r\n    \tat org.xrpl.xrpl4j.codec.binary.XrplBinaryCodec.encode(XrplBinaryCodec.java:61) ~[xrpl4j-binary-codec-nft-support-SNAPSHOT.jar:na]\r\n    \tat org.xrpl.xrpl4j.codec.binary.XrplBinaryCodec.encodeForSigning(XrplBinaryCodec.java:75) ~[xrpl4j-binary-codec-nft-support-SNAPSHOT.jar:na]\r\n    \tat org.xrpl.xrpl4j.crypto.signing.SignatureUtils.toSignableBytes(SignatureUtils.java:67) ~[xrpl4j-crypto-core-nft-support-SNAPSHOT.jar:na]\r\n    \tat org.xrpl.xrpl4j.crypto.signing.AbstractSignatureService.signWithBehavior(AbstractSignatureService.java:69) ~[xrpl4j-crypto-core-nft-support-SNAPSHOT.jar:na]\r\n    \tat org.xrpl.xrpl4j.crypto.signing.AbstractSignatureService.sign(AbstractSignatureService.java:54) ~[xrpl4j-crypto-core-nft-support-SNAPSHOT.jar:na]\r\n    \tat com.example.demo.controller.nft.NFTController.mintNFT(NFTController.java:105) ~[main/:na]\r\n    \tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]\r\n    \tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]\r\n    \tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]\r\n    \tat java.base/java.lang.reflect.Method.invoke(Method.java:568) ~[na:na]\r\n    \tat org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205) ~[spring-web-5.3.15.jar:5.3.15]\r\n    \tat org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150) ~[spring-web-5.3.15.jar:5.3.15]\r\n    \tat org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117) ~[spring-webmvc-5.3.15.jar:5.3.15]\r\n    \tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895) ~[spring-webmvc-5.3.15.jar:5.3.15]\r\n    \tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808) ~[spring-webmvc-5.3.15.jar:5.3.15]\r\n    \tat org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-5.3.15.jar:5.3.15]\r\n    \tat org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1067) ~[spring-webmvc-5.3.15.jar:5.3.15]\r\n    \tat org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:963) ~[spring-webmvc-5.3.15.jar:5.3.15]\r\n    \tat org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006) ~[spring-webmvc-5.3.15.jar:5.3.15]\r\n    \tat org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909) ~[spring-webmvc-5.3.15.jar:5.3.15]\r\n```\r\nMy NFTokenMint Object looks like this:\r\n\r\n```\r\n\r\nNfTokenMint\r\n{\r\naccount=rfdbh2jffFip1HerCZijvuj6qcu627uRxT, \r\nfee=10, \r\nsequence=571503, \r\nlastLedgerSequence=1028823, \r\nmemos=[], \r\nsigners=[],\r\nsigningPublicKey=aBRfkx8B2f8CZurgtcCphkmBhQC2CbeBSx4YqQdcMEb6QNnLxbbL, \r\ntokenTaxon=0,\r\nuri=ipfs://bafybeigdyrzt5sfp7udm7hu76uh7y26nf4dfuylqabf3oclgtqy55fbzdi, \r\nflags=2147483658\r\n}\r\n```","title":"XRPL4J - Error in signing NFTokenMint transaction","body":"<p>I am trying out the XLS-20 nft-support branch of the XRPL4J library. I created a nft-devnet faucet address and am trying out a basic <code>NFTokenMint</code> transaction.\nI reused some of the available tutorial code to get certain values like the sequences or the ledger fee.</p>\n<p>If I understand it correctly there is a problem in my <code>tk</code> Object. But I can't figure out the exact cause.</p>\n<pre><code>WalletFactory walletFactory = DefaultWalletFactory.getInstance();\nWallet testWallet = walletFactory.fromSeed(&quot;shhf1NSyjZw1JLj9Y67XdiAeaqDou&quot;, true);\n\n// Get the Classic address from testWallet\nAddress classicAddress = testWallet.classicAddress();\n\n// Connect --------------------------------------------------------------------\nHttpUrl rippledUrl = HttpUrl.get(&quot;http://xls20-sandbox.rippletest.net:51234&quot;);\nXrplClient xrplClient = new XrplClient(rippledUrl);\n\n// Prepare transaction --------------------------------------------------------\n// Look up your Account Info\nAccountInfoRequestParams requestParams = AccountInfoRequestParams.builder()\n                .ledgerIndex(LedgerIndex.VALIDATED)\n                .account(classicAddress)\n                .build();\nAccountInfoResult accountInfoResult = xrplClient.accountInfo(requestParams);\n        UnsignedInteger sequence = accountInfoResult.accountData().sequence();\n\n// Request current fee information from rippled\nFeeResult feeResult = xrplClient.fee();\nXrpCurrencyAmount openLedgerFee = feeResult.drops().openLedgerFee();\n\n// Get the latest validated ledger index\nLedgerIndex validatedLedger = xrplClient.ledger(\n                        LedgerRequestParams.builder()\n                                .ledgerIndex(LedgerIndex.VALIDATED)\n                                .build()\n                )\n                .ledgerIndex()\n                .orElseThrow(() -&gt; new RuntimeException(&quot;LedgerIndex not available.&quot;));\n\n// Workaround for https://github.com/XRPLF/xrpl4j/issues/84\nUnsignedInteger lastLedgerSequence = UnsignedInteger.valueOf(\n                validatedLedger.plus(UnsignedLong.valueOf(4)).unsignedLongValue().intValue()\n        );\n\nNfTokenMint tk = NfTokenMint.builder()\n                .account(classicAddress)\n                .signingPublicKey(publicKey)\n                .lastLedgerSequence(lastLedgerSequence)\n                .fee(openLedgerFee)\n                .flags(Flags.NfTokenMintFlags.builder().tfOnlyXRP(true).tfTransferable(true).build())\n                .tokenTaxon(UnsignedLong.ZERO)\n                .sequence(sequence)\n                .uri(&quot;ipfs://bafybeigdyrzt5sfp7udm7hu76uh7y26nf4dfuylqabf3oclgtqy55fbzdi&quot;)\n                .build();\n\n\n        // Sign the Minting\nSignedTransaction&lt;NfTokenMint&gt; signedMinting = signatureService.sign(KeyMetadata.EMPTY, tk);\n</code></pre>\n<p>In the signing line I got following error:</p>\n<pre><code>    java.lang.NumberFormatException: NfTokenMint\n        at com.google.common.primitives.UnsignedLongs.parseUnsignedLong(UnsignedLongs.java:351) ~[guava-29.0-jre.jar:na]\n        at com.google.common.primitives.UnsignedLong.valueOf(UnsignedLong.java:123) ~[guava-29.0-jre.jar:na]\n        at com.google.common.primitives.UnsignedLong.valueOf(UnsignedLong.java:110) ~[guava-29.0-jre.jar:na]\n        at org.xrpl.xrpl4j.codec.binary.types.UInt16Type.fromJson(UInt16Type.java:28) ~[xrpl4j-binary-codec-nft-support-SNAPSHOT.jar:na]\n        at org.xrpl.xrpl4j.codec.binary.types.UInt16Type.fromJson(UInt16Type.java:11) ~[xrpl4j-binary-codec-nft-support-SNAPSHOT.jar:na]\n        at org.xrpl.xrpl4j.codec.binary.serdes.BinarySerializer.writeFieldAndValue(BinarySerializer.java:90) ~[xrpl4j-binary-codec-nft-support-SNAPSHOT.jar:na]\n        at org.xrpl.xrpl4j.codec.binary.types.STObjectType.lambda$fromJson$2(STObjectType.java:78) ~[xrpl4j-binary-codec-nft-support-SNAPSHOT.jar:na]\n        at java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.accept(ForEachOps.java:183) ~[na:na]\n        at java.base/java.util.stream.SortedOps$SizedRefSortingSink.end(SortedOps.java:357) ~[na:na]\n        at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:510) ~[na:na]\n        at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499) ~[na:na]\n        at java.base/java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:150) ~[na:na]\n        at java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:173) ~[na:na]\n        at java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234) ~[na:na]\n        at java.base/java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:596) ~[na:na]\n        at org.xrpl.xrpl4j.codec.binary.types.STObjectType.fromJson(STObjectType.java:76) ~[xrpl4j-binary-codec-nft-support-SNAPSHOT.jar:na]\n        at org.xrpl.xrpl4j.codec.binary.XrplBinaryCodec.encode(XrplBinaryCodec.java:61) ~[xrpl4j-binary-codec-nft-support-SNAPSHOT.jar:na]\n        at org.xrpl.xrpl4j.codec.binary.XrplBinaryCodec.encodeForSigning(XrplBinaryCodec.java:75) ~[xrpl4j-binary-codec-nft-support-SNAPSHOT.jar:na]\n        at org.xrpl.xrpl4j.crypto.signing.SignatureUtils.toSignableBytes(SignatureUtils.java:67) ~[xrpl4j-crypto-core-nft-support-SNAPSHOT.jar:na]\n        at org.xrpl.xrpl4j.crypto.signing.AbstractSignatureService.signWithBehavior(AbstractSignatureService.java:69) ~[xrpl4j-crypto-core-nft-support-SNAPSHOT.jar:na]\n        at org.xrpl.xrpl4j.crypto.signing.AbstractSignatureService.sign(AbstractSignatureService.java:54) ~[xrpl4j-crypto-core-nft-support-SNAPSHOT.jar:na]\n        at com.example.demo.controller.nft.NFTController.mintNFT(NFTController.java:105) ~[main/:na]\n        at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]\n        at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]\n        at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]\n        at java.base/java.lang.reflect.Method.invoke(Method.java:568) ~[na:na]\n        at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205) ~[spring-web-5.3.15.jar:5.3.15]\n        at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150) ~[spring-web-5.3.15.jar:5.3.15]\n        at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117) ~[spring-webmvc-5.3.15.jar:5.3.15]\n        at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895) ~[spring-webmvc-5.3.15.jar:5.3.15]\n        at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808) ~[spring-webmvc-5.3.15.jar:5.3.15]\n        at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-5.3.15.jar:5.3.15]\n        at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1067) ~[spring-webmvc-5.3.15.jar:5.3.15]\n        at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:963) ~[spring-webmvc-5.3.15.jar:5.3.15]\n        at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006) ~[spring-webmvc-5.3.15.jar:5.3.15]\n        at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909) ~[spring-webmvc-5.3.15.jar:5.3.15]\n</code></pre>\n<p>My NFTokenMint Object looks like this:</p>\n<pre><code>\nNfTokenMint\n{\naccount=rfdbh2jffFip1HerCZijvuj6qcu627uRxT, \nfee=10, \nsequence=571503, \nlastLedgerSequence=1028823, \nmemos=[], \nsigners=[],\nsigningPublicKey=aBRfkx8B2f8CZurgtcCphkmBhQC2CbeBSx4YqQdcMEb6QNnLxbbL, \ntokenTaxon=0,\nuri=ipfs://bafybeigdyrzt5sfp7udm7hu76uh7y26nf4dfuylqabf3oclgtqy55fbzdi, \nflags=2147483658\n}\n</code></pre>\n"},{"tags":["java","arrays"],"comments":[{"owner":{"account_id":1021725,"reputation":10018,"user_id":1031887,"accept_rate":77,"display_name":"phatfingers"},"score":0,"creation_date":1646083791,"post_id":71301215,"comment_id":126032796,"body_markdown":"Your min and max values are being incorrectly used as though each was an index in your array.  You&#39;ll need to also store the value `i` for each.","body":"Your min and max values are being incorrectly used as though each was an index in your array.  You&#39;ll need to also store the value <code>i</code> for each."},{"owner":{"account_id":479759,"reputation":24867,"user_id":892629,"accept_rate":81,"display_name":"Liftoff"},"score":0,"creation_date":1646083803,"post_id":71301215,"comment_id":126032802,"body_markdown":"You&#39;re saving just the value of the largest and smallest values. You also have to save the index of each so you can swap them. In `arr[i]`, `i` is the index of the element, not the value of the element.","body":"You&#39;re saving just the value of the largest and smallest values. You also have to save the index of each so you can swap them. In <code>arr[i]</code>, <code>i</code> is the index of the element, not the value of the element."},{"owner":{"account_id":1774015,"reputation":1028,"user_id":1725664,"accept_rate":62,"display_name":"LoolKovsky"},"score":0,"creation_date":1646084819,"post_id":71301215,"comment_id":126033069,"body_markdown":"If you don&#39;t have any (unknown to us) restrictions, there is another solution. You could sort all items and just replace the first and last elements. You could use ```Arrays.sort(size)``` to sort","body":"If you don&#39;t have any (unknown to us) restrictions, there is another solution. You could sort all items and just replace the first and last elements. You could use <code>Arrays.sort(size)</code> to sort"}],"answers":[{"tags":[],"owner":{"account_id":18381624,"reputation":126,"user_id":13389594,"display_name":"Tetereou Mouhammad Abdourazak"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1646084245,"creation_date":1646084245,"answer_id":71301325,"question_id":71301215,"body_markdown":"   You&#39;re using max and min as array index to swap your values.That is not correct.Instead you&#39;ve to keep min and max indexes,and use them to swap in the array.  I suggest you to complete your code like that:\r\n\r\n\r\n     import java.util.Arrays;\r\n     public class Swap\r\n     {\r\n      public static void main(String args[])\r\n     {        \r\n     Scanner console = new Scanner(System.in);        \r\n     \r\n     System.out.print(&quot;What is the size of your array? &quot;);        \r\n     int myArray = console.nextInt();                \r\n     int[] size = new int[myArray];         \r\n     int sum = 0;\r\n     int max = 0;\r\n     int min = 100; \r\n     int maxIndex=0;\r\n     int minIndex=0;  \r\n     int temp = 0;\r\n        for (int i = 0; i &lt; size.length; i++) \r\n        {              \r\n        System.out.print(&quot;Array index &quot; + (i) + &quot;: &quot;);            \r\n        size[i] = console.nextInt();            \r\n        sum += size[i];\r\n        \r\n        \r\n        if (size[i] &gt; max){\r\n           max = size [i];\r\n           maxIndex=i;\r\n         }\r\n        if (size[i] &lt; min) {\r\n             min = size [i];\r\n             minIndex=i;\r\n           }  \r\n        \r\n        \r\n        }\r\n\r\n        System.out.println (&quot;\\nmaximum value is: &quot; + max);\r\n        System.out.println (&quot;\\nminimum value is: &quot; + min);\r\n        System.out.println (Arrays.toString(size));\r\n        \r\n        temp = size[maxIndex];\r\n        size[maxIndex] = size[minIndex];\r\n        size[minIndex] = temp;\r\n\r\n        \r\n        System.out.println (Arrays.toString(size));\r\n\r\n      }\r\n\r\n    }","title":"Trying to swap min and max values in an array java","body":"<p>You're using max and min as array index to swap your values.That is not correct.Instead you've to keep min and max indexes,and use them to swap in the array.  I suggest you to complete your code like that:</p>\n<pre><code> import java.util.Arrays;\n public class Swap\n {\n  public static void main(String args[])\n {        \n Scanner console = new Scanner(System.in);        \n \n System.out.print(&quot;What is the size of your array? &quot;);        \n int myArray = console.nextInt();                \n int[] size = new int[myArray];         \n int sum = 0;\n int max = 0;\n int min = 100; \n int maxIndex=0;\n int minIndex=0;  \n int temp = 0;\n    for (int i = 0; i &lt; size.length; i++) \n    {              \n    System.out.print(&quot;Array index &quot; + (i) + &quot;: &quot;);            \n    size[i] = console.nextInt();            \n    sum += size[i];\n    \n    \n    if (size[i] &gt; max){\n       max = size [i];\n       maxIndex=i;\n     }\n    if (size[i] &lt; min) {\n         min = size [i];\n         minIndex=i;\n       }  \n    \n    \n    }\n\n    System.out.println (&quot;\\nmaximum value is: &quot; + max);\n    System.out.println (&quot;\\nminimum value is: &quot; + min);\n    System.out.println (Arrays.toString(size));\n    \n    temp = size[maxIndex];\n    size[maxIndex] = size[minIndex];\n    size[minIndex] = temp;\n\n    \n    System.out.println (Arrays.toString(size));\n\n  }\n\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":960307,"reputation":107861,"user_id":984823,"display_name":"Joop Eggen"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1646084415,"creation_date":1646084415,"answer_id":71301352,"question_id":71301215,"body_markdown":"Only the part for max and min.\r\n\r\n     int max = Integer.MIN_VALUE;\r\n     int min = Integer.MAX_VALUE;\r\n     int iAtMax = -1;\r\n     int iAtMin = -1;   \r\n     for (int i = 0; i &lt; size.length; i++) {              \r\n         if (iAtMax == -1 || max &lt; size[i]) {\r\n             iAtMax = i;\r\n             max = size[i];\r\n         }\r\n         if (min &lt;= size[i]) {\r\n             iAtMin = i;\r\n             min = size[i];  \r\n         }\r\n     }\r\n     if (iAtMax != -1) {\r\n         int temp = size[iAtMax];\r\n         size[iAtMax] = size[iAtMin];\r\n         size[iAtMin] = temp;\r\n     }\r\n\r\nYou could initialize `max` and `min` so that an update in the loop always updates. Then you have to use `&lt;= max` resp. `&gt;= min` to update the indices. (See `min` above) or you can check whether there already is a max and min.\r\n\r\nIf the array is empty (or size 1) you cannot (resp. need not) swap.","title":"Trying to swap min and max values in an array java","body":"<p>Only the part for max and min.</p>\n<pre><code> int max = Integer.MIN_VALUE;\n int min = Integer.MAX_VALUE;\n int iAtMax = -1;\n int iAtMin = -1;   \n for (int i = 0; i &lt; size.length; i++) {              \n     if (iAtMax == -1 || max &lt; size[i]) {\n         iAtMax = i;\n         max = size[i];\n     }\n     if (min &lt;= size[i]) {\n         iAtMin = i;\n         min = size[i];  \n     }\n }\n if (iAtMax != -1) {\n     int temp = size[iAtMax];\n     size[iAtMax] = size[iAtMin];\n     size[iAtMin] = temp;\n }\n</code></pre>\n<p>You could initialize <code>max</code> and <code>min</code> so that an update in the loop always updates. Then you have to use <code>&lt;= max</code> resp. <code>&gt;= min</code> to update the indices. (See <code>min</code> above) or you can check whether there already is a max and min.</p>\n<p>If the array is empty (or size 1) you cannot (resp. need not) swap.</p>\n"}],"owner":{"account_id":23126068,"reputation":3,"user_id":17231851,"display_name":"Gabriel Thompson"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":74,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"accepted_answer_id":71301325,"answer_count":2,"score":-1,"last_activity_date":1646084415,"creation_date":1646083526,"question_id":71301215,"body_markdown":"```import java.util.*;\r\nimport java.util.Arrays;\r\npublic class Swap\r\n{\r\npublic static void main(String args[])\r\n     {        \r\n     Scanner console = new Scanner(System.in);        \r\n     \r\n     System.out.print(&quot;What is the size of your array? &quot;);        \r\n     int myArray = console.nextInt();                \r\n     int[] size = new int[myArray];         \r\n     int sum = 0;\r\n     int max = 0;\r\n     int min = 100;   \r\n     int temp = 0;\r\n        for (int i = 0; i &lt; size.length; i++) \r\n        {              \r\n        System.out.print(&quot;Array index &quot; + (i) + &quot;: &quot;);            \r\n        size[i] = console.nextInt();            \r\n        sum += size[i];\r\n        \r\n        \r\n        if (size[i] &gt; max) max = size [i];\r\n        if (size[i] &lt; min) min = size [i];  \r\n        \r\n        \r\n        }\r\n\r\n        System.out.println (&quot;\\nmaximum value is: &quot; + max);\r\n        System.out.println (&quot;\\nminimum value is: &quot; + min);\r\n        System.out.println (Arrays.toString(size));\r\n        \r\n        temp = size[max];\r\n        size[max] = size[min];\r\n        size[min] = temp;\r\n\r\n        \r\n        System.out.println (Arrays.toString(size));\r\n\r\n    }\r\n\r\n}\r\n```\r\nI am having trouble swapping the min and max value in the array, I am able to find those values fine, and I even found a way to swap in with the temp variable, but I can&#39;t translate that into the array.","title":"Trying to swap min and max values in an array java","body":"<pre><code>import java.util.Arrays;\npublic class Swap\n{\npublic static void main(String args[])\n     {        \n     Scanner console = new Scanner(System.in);        \n     \n     System.out.print(&quot;What is the size of your array? &quot;);        \n     int myArray = console.nextInt();                \n     int[] size = new int[myArray];         \n     int sum = 0;\n     int max = 0;\n     int min = 100;   \n     int temp = 0;\n        for (int i = 0; i &lt; size.length; i++) \n        {              \n        System.out.print(&quot;Array index &quot; + (i) + &quot;: &quot;);            \n        size[i] = console.nextInt();            \n        sum += size[i];\n        \n        \n        if (size[i] &gt; max) max = size [i];\n        if (size[i] &lt; min) min = size [i];  \n        \n        \n        }\n\n        System.out.println (&quot;\\nmaximum value is: &quot; + max);\n        System.out.println (&quot;\\nminimum value is: &quot; + min);\n        System.out.println (Arrays.toString(size));\n        \n        temp = size[max];\n        size[max] = size[min];\n        size[min] = temp;\n\n        \n        System.out.println (Arrays.toString(size));\n\n    }\n\n}\n</code></pre>\n<p>I am having trouble swapping the min and max value in the array, I am able to find those values fine, and I even found a way to swap in with the temp variable, but I can't translate that into the array.</p>\n"},{"tags":["java","antlr","antlr4","lexer"],"answers":[{"tags":[],"owner":{"account_id":27816,"reputation":6650,"user_id":73764,"accept_rate":91,"display_name":"Mike Cargal"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1646082740,"creation_date":1646075591,"answer_id":71299955,"question_id":71299284,"body_markdown":"Based upon your comments, it appears that you want to keep the two letters of your root level and sub level as separate tokens, but have a &quot;conflict&quot; (in you `rootLevel` parser rule) that your &#39;A&#39; token literal and your `ONE_LETTER` rule both match the &quot;A&quot; character.  If I have this right, you&#39;re not really &quot;appending Lexer expressions&quot;.\r\n\r\nIt&#39;s important to recognize that the &#39;A&#39; in your grammar is just a syntactic shortcut for defining a Lexer rule (ANTLR will create it with a name something like `T__0`), so it&#39;s just another Lexer rule.\r\n\r\nIt&#39;s also important to understand that you stream of input characters are used to create a stream of Tokens to be used by the parser.  There is nothing that a parser rule can do to control whether &quot;A&quot; matches the `T__0` (&#39;A&#39;) rule or the `ONE_LETTER` rule.  That decision was made by the Tokenizer, and it has to pick one just looking at the stream of input characters.\r\n\r\nWith that in mind, you should probably not try to fight the Lexer, but allow both characters to be recognized as `ONE_LETTER` tokens, and add a semantic predicate to your `rootPath` rule:\r\n\r\n```\r\nrootPath\r\n    : rootLevel = &#39;A&#39; {$rootLevel.text == &quot;A&quot; }? subLevel = ONE_LETTER SEP childPath\r\n    ; //my output should be AB:2 or AC:4\r\n```\r\n\r\nnow the `rootPath` rule will only match if the `rootLevel` `ONE_LETTER` token is an &quot;A&quot;, and you will have `rootLevel` and `subLevel` fields in your `RootPathContext` class.","title":"How to append two lexer expressions- ANTLR4","body":"<p>Based upon your comments, it appears that you want to keep the two letters of your root level and sub level as separate tokens, but have a &quot;conflict&quot; (in you <code>rootLevel</code> parser rule) that your 'A' token literal and your <code>ONE_LETTER</code> rule both match the &quot;A&quot; character.  If I have this right, you're not really &quot;appending Lexer expressions&quot;.</p>\n<p>It's important to recognize that the 'A' in your grammar is just a syntactic shortcut for defining a Lexer rule (ANTLR will create it with a name something like <code>T__0</code>), so it's just another Lexer rule.</p>\n<p>It's also important to understand that you stream of input characters are used to create a stream of Tokens to be used by the parser.  There is nothing that a parser rule can do to control whether &quot;A&quot; matches the <code>T__0</code> ('A') rule or the <code>ONE_LETTER</code> rule.  That decision was made by the Tokenizer, and it has to pick one just looking at the stream of input characters.</p>\n<p>With that in mind, you should probably not try to fight the Lexer, but allow both characters to be recognized as <code>ONE_LETTER</code> tokens, and add a semantic predicate to your <code>rootPath</code> rule:</p>\n<pre><code>rootPath\n    : rootLevel = 'A' {$rootLevel.text == &quot;A&quot; }? subLevel = ONE_LETTER SEP childPath\n    ; //my output should be AB:2 or AC:4\n</code></pre>\n<p>now the <code>rootPath</code> rule will only match if the <code>rootLevel</code> <code>ONE_LETTER</code> token is an &quot;A&quot;, and you will have <code>rootLevel</code> and <code>subLevel</code> fields in your <code>RootPathContext</code> class.</p>\n"}],"owner":{"account_id":24279556,"reputation":77,"user_id":18226318,"display_name":"harshini reddy"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":119,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":71299955,"answer_count":1,"score":1,"last_activity_date":1646084202,"creation_date":1646071813,"question_id":71299284,"body_markdown":"I need lexer to parse two different character expressions as one expression.\r\n\r\nSo I&#39;ve something like this, \r\n\r\nrootPath : &#39;A&#39; rootType SEP childPath; //my output should be AB:2 or AC:4\r\n\r\n\r\n---\r\nchildPath : RESERVED_NUMBERS;\r\n\r\nrootType : ONE_LETTER;\r\n\r\n-----\r\n\r\nSEP: &#39;:&#39;\r\nRESERVED_NUMBERS :[1-9]\r\nONE_LETTER : [A-Z]\r\n\r\n\r\nI&#39;m getting error when I&#39;m parsing this, How can I combine &#39;A&#39; and ONE_LETTER into single string","title":"How to append two lexer expressions- ANTLR4","body":"<p>I need lexer to parse two different character expressions as one expression.</p>\n<p>So I've something like this,</p>\n<p>rootPath : 'A' rootType SEP childPath; //my output should be AB:2 or AC:4</p>\n<hr />\n<p>childPath : RESERVED_NUMBERS;</p>\n<p>rootType : ONE_LETTER;</p>\n<hr />\n<p>SEP: ':'\nRESERVED_NUMBERS :[1-9]\nONE_LETTER : [A-Z]</p>\n<p>I'm getting error when I'm parsing this, How can I combine 'A' and ONE_LETTER into single string</p>\n"},{"tags":["java","hibernate","spring-data-jpa","joined-subclass"],"comments":[{"owner":{"account_id":7226774,"reputation":19717,"user_id":5515060,"accept_rate":100,"display_name":"Lino"},"score":0,"creation_date":1646084992,"post_id":71301294,"comment_id":126033108,"body_markdown":"Couldn&#39;t you only use one table? Or are the fields between classes that different?","body":"Couldn&#39;t you only use one table? Or are the fields between classes that different?"},{"owner":{"account_id":19013263,"reputation":11,"user_id":13878777,"display_name":"FatherIceman"},"score":0,"creation_date":1646085650,"post_id":71301294,"comment_id":126033291,"body_markdown":"@Lino Yes, I believe the &quot;best&quot; solution is to use a single_table inheritance strategy, but unfortunately I am not able to change how the tables are structured at this point. Also, for this case, yes the fields between classes are that different","body":"@Lino Yes, I believe the &quot;best&quot; solution is to use a single_table inheritance strategy, but unfortunately I am not able to change how the tables are structured at this point. Also, for this case, yes the fields between classes are that different"}],"owner":{"account_id":19013263,"reputation":11,"user_id":13878777,"display_name":"FatherIceman"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":100,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1646084040,"creation_date":1646084040,"question_id":71301294,"body_markdown":"I am using spring data jpa. I am using InheritanceType.JOINED for my inheritance strategy. Say I have the following entity relationships:\r\n\r\n```\r\nAnimal (abstract class)\r\nCow extends Animal\r\nPig extends Animal\r\nCat extends Animal\r\netc..\r\n```\r\nEach animal has a &quot;TYPE&quot; column populated with the name of the class.\r\n\r\nHow would I query for some subset of animal types without joining every subclass table? For example, if I wanted to retrieve all cows and pigs but not any cats. \r\n\r\nI have tried `@Query(&quot;select a from Animal where a.type in (Cow, Pig)&quot;)`, but this will still perform a LEFT JOIN on the Cat table which is undesirable.\r\n\r\nIs there some workaround for this?","title":"Can I search subclasses by type without joining every subclass table using Hibernate?","body":"<p>I am using spring data jpa. I am using InheritanceType.JOINED for my inheritance strategy. Say I have the following entity relationships:</p>\n<pre><code>Animal (abstract class)\nCow extends Animal\nPig extends Animal\nCat extends Animal\netc..\n</code></pre>\n<p>Each animal has a &quot;TYPE&quot; column populated with the name of the class.</p>\n<p>How would I query for some subset of animal types without joining every subclass table? For example, if I wanted to retrieve all cows and pigs but not any cats.</p>\n<p>I have tried <code>@Query(&quot;select a from Animal where a.type in (Cow, Pig)&quot;)</code>, but this will still perform a LEFT JOIN on the Cat table which is undesirable.</p>\n<p>Is there some workaround for this?</p>\n"},{"tags":["java","spring-boot","spring-security","jwk"],"comments":[{"owner":{"account_id":21488921,"reputation":4715,"user_id":15835039,"display_name":"Steve Riesenberg"},"score":1,"creation_date":1643752642,"post_id":70944103,"comment_id":125422547,"body_markdown":"You can try the tip in [this comment](https://github.com/spring-projects/spring-authorization-server/issues/487#issuecomment-982559407).","body":"You can try the tip in <a href=\"https://github.com/spring-projects/spring-authorization-server/issues/487#issuecomment-982559407\" rel=\"nofollow noreferrer\">this comment</a>."}],"answers":[{"tags":[],"owner":{"account_id":23582700,"reputation":49,"user_id":17621527,"display_name":"gxrj"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1643805059,"creation_date":1643805059,"answer_id":70955686,"question_id":70944103,"body_markdown":"Thanks to &lt;a href=&quot;https://stackoverflow.com/users/15835039/steve-riesenberg&quot;&gt;@Steve Riesenberg&lt;/a&gt;&#39;s comment pointing me to this &lt;a href=&quot;https://github.com/spring-projects/spring-authorization-server/issues/487#issuecomment-982559407&quot;&gt;link in github&lt;/a&gt;, i could get i done and the resulting solution in my &lt;code&gt;AuthzServerConfig.class&lt;/code&gt; looks as it follows:\r\n\r\n```java\r\n@Import( OAuth2AuthorizationServerConfiguration.class )\r\n@Configuration( proxyBeanMethods = false )\r\npublic class AuthzServerConfig { \r\n\r\n    ...\r\n\r\n        @Bean\r\n        public JWKSource&lt;SecurityContext&gt; jwkSource() throws \r\n          NoSuchAlgorithmException, InvalidAlgorithmParameterException, JOSEException {\r\n\r\n            JWKSet keySet = new JWKSet( KeyGenerator.getEcJwk() ); // &lt;- KeyGenerator is an external code\r\n\r\n            return ( jwkSelector, context ) -&gt; jwkSelector.select( keySet ); \r\n        }\r\n\r\n        // start of the solution\r\n        @Bean\r\n        public OAuth2TokenCustomizer&lt;JwtEncodingContext&gt; jwtCustomizer() {\r\n            return context -&gt; context.getHeaders().algorithm( SignatureAlgorithm.ES256 );\r\n        }\r\n        // end of the solution\r\n\r\n   ...\r\n}\r\n```\r\n\r\nPutting into words i just needed to expose an &lt;code&gt;OAuth2TokenCustomizer&lt;/code&gt; implementation which sets &lt;code&gt;JwtEncodingContext&#39;s&lt;/code&gt; header with &lt;strong&gt;ES256&lt;/strong&gt; signature algorithm.","title":"Failed to select a JWK signing key - Trying to implement Elliptic Curve keys to sign OAuth2AuthorizationServer&#39;s JWKS","body":"<p>Thanks to <a href=\"https://stackoverflow.com/users/15835039/steve-riesenberg\">@Steve Riesenberg</a>'s comment pointing me to this <a href=\"https://github.com/spring-projects/spring-authorization-server/issues/487#issuecomment-982559407\" rel=\"nofollow noreferrer\">link in github</a>, i could get i done and the resulting solution in my <code>AuthzServerConfig.class</code> looks as it follows:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Import( OAuth2AuthorizationServerConfiguration.class )\n@Configuration( proxyBeanMethods = false )\npublic class AuthzServerConfig { \n\n    ...\n\n        @Bean\n        public JWKSource&lt;SecurityContext&gt; jwkSource() throws \n          NoSuchAlgorithmException, InvalidAlgorithmParameterException, JOSEException {\n\n            JWKSet keySet = new JWKSet( KeyGenerator.getEcJwk() ); // &lt;- KeyGenerator is an external code\n\n            return ( jwkSelector, context ) -&gt; jwkSelector.select( keySet ); \n        }\n\n        // start of the solution\n        @Bean\n        public OAuth2TokenCustomizer&lt;JwtEncodingContext&gt; jwtCustomizer() {\n            return context -&gt; context.getHeaders().algorithm( SignatureAlgorithm.ES256 );\n        }\n        // end of the solution\n\n   ...\n}\n</code></pre>\n<p>Putting into words i just needed to expose an <code>OAuth2TokenCustomizer</code> implementation which sets <code>JwtEncodingContext's</code> header with <strong>ES256</strong> signature algorithm.</p>\n"}],"owner":{"account_id":23582700,"reputation":49,"user_id":17621527,"display_name":"gxrj"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2213,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1646082749,"creation_date":1643733069,"question_id":70944103,"body_markdown":"I&#39;m trying to use the new spring security&#39;s oauth2-authorization-server using &lt;strong&gt;authorization code grant flow&lt;/strong&gt; in my\r\nproject while following the samples provided in it&#39;s github repo but decided to set &lt;strong&gt;ES256&lt;/strong&gt; instead of &lt;strong&gt;RS256&lt;/strong&gt;.\r\n\r\n In the following its presented my &lt;code&gt;AuthzServerConfig.class&lt;/code&gt; exposing the &lt;strong&gt;JWKSource&lt;/strong&gt; :\r\n\r\n    @Import( OAuth2AuthorizationServerConfiguration.class )\r\n    @Configuration( proxyBeanMethods = false )\r\n    public class AuthzServerConfig { \r\n\r\n        // ommited code above\r\n\r\n\r\n            @Bean\r\n            public JWKSource&lt;SecurityContext&gt; jwkSource() throws \r\n              NoSuchAlgorithmException, InvalidAlgorithmParameterException, JOSEException {\r\n\r\n                JWKSet keySet = new JWKSet( KeyGenerator.getEcJwk() ); // &lt;- here i call the desired keypair\r\n\r\n                return ( jwkSelector, context ) -&gt; jwkSelector.select( keySet ); \r\n            }\r\n\r\n\r\n       // ommited code bellow\r\n    }\r\n\r\n\r\n Next my &lt;code&gt;KeyGenerator.class&lt;/code&gt; responsible for generate the keys:\r\n\r\n    public class KeyGenerator {\r\n\r\n\r\n        public static ECKey getECKeys(){\r\n\r\n            var ops = setKeyOperations( KeyOperation.SIGN, KeyOperation.VERIFY );\r\n        \r\n            try{\r\n                return new ECKeyGenerator( Curve.P_256 )\r\n                            .keyID( UUID.randomUUID().toString() )\r\n                            .keyUse( KeyUse.SIGNATURE )\r\n                            .algorithm( \r\n                                new Algorithm( \r\n                                    SignatureAlgorithm.ES256.toString(), \r\n                                    Requirement.RECOMMENDED ) \r\n                            )\r\n                            .keyOperations( ops )\r\n                            .generate();\r\n            }\r\n            catch( Exception ex ){\r\n                throw new IllegalStateException();\r\n            }\r\n        }\r\n\r\n        public static RSAKey getRsaKeys() throws JOSEException {\r\n\r\n            var operations = setKeyOperations( KeyOperation.SIGN, KeyOperation.VERIFY );\r\n\r\n            return new RSAKeyGenerator( 2048 )\r\n                            .keyID( UUID.randomUUID().toString() )\r\n                            .keyUse( KeyUse.SIGNATURE )\r\n                            .algorithm( \r\n                                new Algorithm( \r\n                                    SignatureAlgorithm.RS256.toString(), \r\n                                    Requirement.RECOMMENDED ) \r\n                            )\r\n                            .keyOperations( operations )\r\n                            .generate();\r\n        }\r\n\r\n        public static Set&lt;KeyOperation&gt; setKeyOperations( KeyOperation... operations ) {\r\n\r\n            var operationsSet = new HashSet&lt;KeyOperation&gt;();\r\n            var proceed = Collections.addAll( operationsSet, operations);\r\n\r\n            var message = &quot;Sign-keys generation could not set its operations.&quot;;\r\n            message.concat( &quot;Check KeyGenerator::setKeyOperations&quot; );\r\n\r\n            Assert.isTrue( proceed, message );\r\n\r\n            return operationsSet;\r\n        }\r\n\r\n        public static JWK getEcJwk() throws \r\n          NoSuchAlgorithmException, InvalidAlgorithmParameterException {\r\n\r\n            KeyPairGenerator gen = KeyPairGenerator.getInstance( &quot;EC&quot; );\r\n            gen.initialize( Curve.P_256.toECParameterSpec() );\r\n            KeyPair pair = gen.generateKeyPair();\r\n        \r\n            return new ECKey.Builder( Curve.P_256 , ( ECPublicKey ) pair.getPublic() )\r\n                        .privateKey( ( ECPrivateKey ) pair.getPrivate() )\r\n                        .build();\r\n        }\r\n\r\n        public static JWK getRsaJwk() throws \r\n          NoSuchAlgorithmException, InvalidAlgorithmParameterException {\r\n\r\n            KeyPairGenerator gen = KeyPairGenerator.getInstance( &quot;RSA&quot; );\r\n            gen.initialize( 2048 );\r\n            KeyPair pair = gen.generateKeyPair();\r\n        \r\n            return new RSAKey.Builder( ( RSAPublicKey ) pair.getPublic() )\r\n                        .privateKey( ( RSAPrivateKey ) pair.getPrivate() )\r\n                        .keyID( UUID.randomUUID().toString() )\r\n                        .keyUse( KeyUse.SIGNATURE )\r\n                        .build();\r\n        }\r\n    }\r\n\r\nAs can be seen above i provided 4 different methods two for each Signature algorithm and only those that implement &lt;strong&gt;RS256&lt;/strong&gt; worked perfectly fine while those with &lt;strong&gt;ES256&lt;/strong&gt; threw me the following stack trace:\r\n\r\n\r\n    org.springframework.security.oauth2.jwt.JwtEncodingException: An error occurred while attempting to encode the Jwt: Failed to select a JWK signing key\r\n    \tat org.springframework.security.oauth2.jwt.NimbusJwsEncoder.selectJwk(NimbusJwsEncoder.java:120) ~[spring-security-oauth2-authorization-server-0.2.2.jar:5.6.1]\r\n    \tat org.springframework.security.oauth2.jwt.NimbusJwsEncoder.encode(NimbusJwsEncoder.java:96) ~[spring-security-oauth2-authorization-server-0.2.2.jar:5.6.1]\r\n    \tat org.springframework.security.oauth2.server.authorization.authentication.OAuth2AuthorizationCodeAuthenticationProvider.authenticate(OAuth2AuthorizationCodeAuthenticationProvider.java:193) ~[spring-security-oauth2-authorization-server-0.2.2.jar:0.2.2]\r\n    \tat org.springframework.security.authentication.ProviderManager.authenticate(ProviderManager.java:182) ~[spring-security-core-5.6.1.jar:5.6.1]\r\n    \tat org.springframework.security.oauth2.server.authorization.web.OAuth2TokenEndpointFilter.doFilterInternal(OAuth2TokenEndpointFilter.java:165) ~[spring-security-oauth2-authorization-server-0.2.2.jar:0.2.2]\r\n    \tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.15.jar:5.3.15]\r\n    \tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.6.1.jar:5.6.1]\r\n    \tat org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:115) ~[spring-security-web-5.6.1.jar:5.6.1]\r\n    \tat org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:81) ~[spring-security-web-5.6.1.jar:5.6.1]\r\n    \tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.6.1.jar:5.6.1]\r\n    \tat org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:122) ~[spring-security-web-5.6.1.jar:5.6.1]\r\n    \tat org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:116) ~[spring-security-web-5.6.1.jar:5.6.1]\r\n    \tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.6.1.jar:5.6.1]\r\n    \tat org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:126) ~[spring-security-web-5.6.1.jar:5.6.1]\r\n    \tat org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:81) ~[spring-security-web-5.6.1.jar:5.6.1]\r\n    \tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.6.1.jar:5.6.1]\r\n    \tat org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:109) ~[spring-security-web-5.6.1.jar:5.6.1]\r\n    \tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.6.1.jar:5.6.1]\r\n    \tat org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:149) ~[spring-security-web-5.6.1.jar:5.6.1]\r\n    \tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.6.1.jar:5.6.1]\r\n    \tat org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63) ~[spring-security-web-5.6.1.jar:5.6.1]\r\n    \tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.6.1.jar:5.6.1]\r\n    \tat org.springframework.security.oauth2.server.authorization.web.OAuth2ClientAuthenticationFilter.doFilterInternal(OAuth2ClientAuthenticationFilter.java:115) ~[spring-security-oauth2-authorization-server-0.2.2.jar:0.2.2]\r\n    \tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.15.jar:5.3.15]\r\n    \tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.6.1.jar:5.6.1]\r\n    \tat org.springframework.security.oauth2.server.authorization.web.OAuth2AuthorizationServerMetadataEndpointFilter.doFilterInternal(OAuth2AuthorizationServerMetadataEndpointFilter.java:77) ~[spring-security-oauth2-authorization-server-0.2.2.jar:0.2.2]\r\n    \tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.15.jar:5.3.15]\r\n    \tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.6.1.jar:5.6.1]\r\n    \tat org.springframework.security.oauth2.server.authorization.web.NimbusJwkSetEndpointFilter.doFilterInternal(NimbusJwkSetEndpointFilter.java:85) ~[spring-security-oauth2-authorization-server-0.2.2.jar:0.2.2]\r\n    \tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.15.jar:5.3.15]\r\n    \tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.6.1.jar:5.6.1]\r\n    \tat org.springframework.security.oauth2.server.authorization.oidc.web.OidcProviderConfigurationEndpointFilter.doFilterInternal(OidcProviderConfigurationEndpointFilter.java:79) ~[spring-security-oauth2-authorization-server-0.2.2.jar:0.2.2]\r\n    \tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.15.jar:5.3.15]\r\n    \tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.6.1.jar:5.6.1]\r\n    \tat org.springframework.security.oauth2.server.authorization.web.OAuth2AuthorizationEndpointFilter.doFilterInternal(OAuth2AuthorizationEndpointFilter.java:140) ~[spring-security-oauth2-authorization-server-0.2.2.jar:0.2.2]\r\n    \tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.15.jar:5.3.15]\r\n    \tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.6.1.jar:5.6.1]\r\n    \tat org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:103) ~[spring-security-web-5.6.1.jar:5.6.1]\r\n    \tat org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:89) ~[spring-security-web-5.6.1.jar:5.6.1]\r\n    \tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.6.1.jar:5.6.1]\r\n    \tat org.springframework.security.web.csrf.CsrfFilter.doFilterInternal(CsrfFilter.java:117) ~[spring-security-web-5.6.1.jar:5.6.1]\r\n    \tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.15.jar:5.3.15]\r\n    \tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.6.1.jar:5.6.1]\r\n    \tat org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90) ~[spring-security-web-5.6.1.jar:5.6.1]\r\n    \tat org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75) ~[spring-security-web-5.6.1.jar:5.6.1]\r\n    \tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.15.jar:5.3.15]\r\n    \tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.6.1.jar:5.6.1]\r\n    \tat org.springframework.security.oauth2.server.authorization.web.ProviderContextFilter.doFilterInternal(ProviderContextFilter.java:63) ~[spring-security-oauth2-authorization-server-0.2.2.jar:0.2.2]\r\n    \tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.15.jar:5.3.15]\r\n    \tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.6.1.jar:5.6.1]\r\n    \tat org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:110) ~[spring-security-web-5.6.1.jar:5.6.1]\r\n    \tat org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:80) ~[spring-security-web-5.6.1.jar:5.6.1]\r\n    \tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.6.1.jar:5.6.1]\r\n    \tat org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:55) ~[spring-security-web-5.6.1.jar:5.6.1]\r\n    \tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.15.jar:5.3.15]\r\n    \tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.6.1.jar:5.6.1]\r\n    \tat org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:211) ~[spring-security-web-5.6.1.jar:5.6.1]\r\n    \tat org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:183) ~[spring-security-web-5.6.1.jar:5.6.1]\r\n    \tat org.springframework.security.web.debug.DebugFilter.invokeWithWrappedRequest(DebugFilter.java:90) ~[spring-security-web-5.6.1.jar:5.6.1]\r\n    \tat org.springframework.security.web.debug.DebugFilter.doFilter(DebugFilter.java:78) ~[spring-security-web-5.6.1.jar:5.6.1]\r\n    \tat org.springframework.security.web.debug.DebugFilter.doFilter(DebugFilter.java:67) ~[spring-security-web-5.6.1.jar:5.6.1]\r\n    \tat org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:354) ~[spring-web-5.3.15.jar:5.3.15]\r\n    \tat org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:267) ~[spring-web-5.3.15.jar:5.3.15]\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.56.jar:9.0.56]\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.56.jar:9.0.56]\r\n    \tat org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-5.3.15.jar:5.3.15]\r\n    \tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.15.jar:5.3.15]\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.56.jar:9.0.56]\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.56.jar:9.0.56]\r\n    \tat org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-5.3.15.jar:5.3.15]\r\n    \tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.15.jar:5.3.15]\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.56.jar:9.0.56]\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.56.jar:9.0.56]\r\n    \tat org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-5.3.15.jar:5.3.15]\r\n    \tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.15.jar:5.3.15]\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.56.jar:9.0.56]\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.56.jar:9.0.56]\r\n    \tat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197) ~[tomcat-embed-core-9.0.56.jar:9.0.56]\r\n    \tat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97) ~[tomcat-embed-core-9.0.56.jar:9.0.56]\r\n    \tat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:540) ~[tomcat-embed-core-9.0.56.jar:9.0.56]\r\n    \tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:135) ~[tomcat-embed-core-9.0.56.jar:9.0.56]\r\n    \tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92) ~[tomcat-embed-core-9.0.56.jar:9.0.56]\r\n    \tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78) ~[tomcat-embed-core-9.0.56.jar:9.0.56]\r\n    \tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357) ~[tomcat-embed-core-9.0.56.jar:9.0.56]\r\n    \tat org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:382) ~[tomcat-embed-core-9.0.56.jar:9.0.56]\r\n    \tat org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65) ~[tomcat-embed-core-9.0.56.jar:9.0.56]\r\n    \tat org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:895) ~[tomcat-embed-core-9.0.56.jar:9.0.56]\r\n    \tat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1732) ~[tomcat-embed-core-9.0.56.jar:9.0.56]\r\n    \tat org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49) ~[tomcat-embed-core-9.0.56.jar:9.0.56]\r\n    \tat org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191) ~[tomcat-embed-core-9.0.56.jar:9.0.56]\r\n    \tat org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) ~[tomcat-embed-core-9.0.56.jar:9.0.56]\r\n    \tat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) ~[tomcat-embed-core-9.0.56.jar:9.0.56]\r\n    \tat java.base/java.lang.Thread.run(Thread.java:833) ~[na:na]\r\n\r\n\r\nInspecting this i ended up at &lt;strong&gt;line 172&lt;/strong&gt; of &lt;code&gt;OAuth2AuthorizationCodeAuthenticationProvider&lt;/code&gt; spring security class:\r\n\r\n    JoseHeader.Builder headersBuilder = JwtUtils.headers();\r\n\r\nWhich builds a &lt;code&gt;JwtEncodingContext&#39;s&lt;/code&gt; header with &lt;code&gt;RS256&lt;/code&gt; set as signature algorithm which is suspicious for not let me use &lt;code&gt;ES256&lt;/code&gt;, in my point of view.\r\n\r\nI&#39;m a newbie at this and can be totally wrong and away from the real problem. \r\nCan you guys figure out what i might be doing wrong??\r\n\r\nThanks in advance","title":"Failed to select a JWK signing key - Trying to implement Elliptic Curve keys to sign OAuth2AuthorizationServer&#39;s JWKS","body":"<p>I'm trying to use the new spring security's oauth2-authorization-server using <strong>authorization code grant flow</strong> in my\nproject while following the samples provided in it's github repo but decided to set <strong>ES256</strong> instead of <strong>RS256</strong>.</p>\n<p>In the following its presented my <code>AuthzServerConfig.class</code> exposing the <strong>JWKSource</strong> :</p>\n<pre><code>@Import( OAuth2AuthorizationServerConfiguration.class )\n@Configuration( proxyBeanMethods = false )\npublic class AuthzServerConfig { \n\n    // ommited code above\n\n\n        @Bean\n        public JWKSource&lt;SecurityContext&gt; jwkSource() throws \n          NoSuchAlgorithmException, InvalidAlgorithmParameterException, JOSEException {\n\n            JWKSet keySet = new JWKSet( KeyGenerator.getEcJwk() ); // &lt;- here i call the desired keypair\n\n            return ( jwkSelector, context ) -&gt; jwkSelector.select( keySet ); \n        }\n\n\n   // ommited code bellow\n}\n</code></pre>\n<p>Next my <code>KeyGenerator.class</code> responsible for generate the keys:</p>\n<pre><code>public class KeyGenerator {\n\n\n    public static ECKey getECKeys(){\n\n        var ops = setKeyOperations( KeyOperation.SIGN, KeyOperation.VERIFY );\n    \n        try{\n            return new ECKeyGenerator( Curve.P_256 )\n                        .keyID( UUID.randomUUID().toString() )\n                        .keyUse( KeyUse.SIGNATURE )\n                        .algorithm( \n                            new Algorithm( \n                                SignatureAlgorithm.ES256.toString(), \n                                Requirement.RECOMMENDED ) \n                        )\n                        .keyOperations( ops )\n                        .generate();\n        }\n        catch( Exception ex ){\n            throw new IllegalStateException();\n        }\n    }\n\n    public static RSAKey getRsaKeys() throws JOSEException {\n\n        var operations = setKeyOperations( KeyOperation.SIGN, KeyOperation.VERIFY );\n\n        return new RSAKeyGenerator( 2048 )\n                        .keyID( UUID.randomUUID().toString() )\n                        .keyUse( KeyUse.SIGNATURE )\n                        .algorithm( \n                            new Algorithm( \n                                SignatureAlgorithm.RS256.toString(), \n                                Requirement.RECOMMENDED ) \n                        )\n                        .keyOperations( operations )\n                        .generate();\n    }\n\n    public static Set&lt;KeyOperation&gt; setKeyOperations( KeyOperation... operations ) {\n\n        var operationsSet = new HashSet&lt;KeyOperation&gt;();\n        var proceed = Collections.addAll( operationsSet, operations);\n\n        var message = &quot;Sign-keys generation could not set its operations.&quot;;\n        message.concat( &quot;Check KeyGenerator::setKeyOperations&quot; );\n\n        Assert.isTrue( proceed, message );\n\n        return operationsSet;\n    }\n\n    public static JWK getEcJwk() throws \n      NoSuchAlgorithmException, InvalidAlgorithmParameterException {\n\n        KeyPairGenerator gen = KeyPairGenerator.getInstance( &quot;EC&quot; );\n        gen.initialize( Curve.P_256.toECParameterSpec() );\n        KeyPair pair = gen.generateKeyPair();\n    \n        return new ECKey.Builder( Curve.P_256 , ( ECPublicKey ) pair.getPublic() )\n                    .privateKey( ( ECPrivateKey ) pair.getPrivate() )\n                    .build();\n    }\n\n    public static JWK getRsaJwk() throws \n      NoSuchAlgorithmException, InvalidAlgorithmParameterException {\n\n        KeyPairGenerator gen = KeyPairGenerator.getInstance( &quot;RSA&quot; );\n        gen.initialize( 2048 );\n        KeyPair pair = gen.generateKeyPair();\n    \n        return new RSAKey.Builder( ( RSAPublicKey ) pair.getPublic() )\n                    .privateKey( ( RSAPrivateKey ) pair.getPrivate() )\n                    .keyID( UUID.randomUUID().toString() )\n                    .keyUse( KeyUse.SIGNATURE )\n                    .build();\n    }\n}\n</code></pre>\n<p>As can be seen above i provided 4 different methods two for each Signature algorithm and only those that implement <strong>RS256</strong> worked perfectly fine while those with <strong>ES256</strong> threw me the following stack trace:</p>\n<pre><code>org.springframework.security.oauth2.jwt.JwtEncodingException: An error occurred while attempting to encode the Jwt: Failed to select a JWK signing key\n    at org.springframework.security.oauth2.jwt.NimbusJwsEncoder.selectJwk(NimbusJwsEncoder.java:120) ~[spring-security-oauth2-authorization-server-0.2.2.jar:5.6.1]\n    at org.springframework.security.oauth2.jwt.NimbusJwsEncoder.encode(NimbusJwsEncoder.java:96) ~[spring-security-oauth2-authorization-server-0.2.2.jar:5.6.1]\n    at org.springframework.security.oauth2.server.authorization.authentication.OAuth2AuthorizationCodeAuthenticationProvider.authenticate(OAuth2AuthorizationCodeAuthenticationProvider.java:193) ~[spring-security-oauth2-authorization-server-0.2.2.jar:0.2.2]\n    at org.springframework.security.authentication.ProviderManager.authenticate(ProviderManager.java:182) ~[spring-security-core-5.6.1.jar:5.6.1]\n    at org.springframework.security.oauth2.server.authorization.web.OAuth2TokenEndpointFilter.doFilterInternal(OAuth2TokenEndpointFilter.java:165) ~[spring-security-oauth2-authorization-server-0.2.2.jar:0.2.2]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.15.jar:5.3.15]\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.6.1.jar:5.6.1]\n    at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:115) ~[spring-security-web-5.6.1.jar:5.6.1]\n    at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:81) ~[spring-security-web-5.6.1.jar:5.6.1]\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.6.1.jar:5.6.1]\n    at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:122) ~[spring-security-web-5.6.1.jar:5.6.1]\n    at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:116) ~[spring-security-web-5.6.1.jar:5.6.1]\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.6.1.jar:5.6.1]\n    at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:126) ~[spring-security-web-5.6.1.jar:5.6.1]\n    at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:81) ~[spring-security-web-5.6.1.jar:5.6.1]\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.6.1.jar:5.6.1]\n    at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:109) ~[spring-security-web-5.6.1.jar:5.6.1]\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.6.1.jar:5.6.1]\n    at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:149) ~[spring-security-web-5.6.1.jar:5.6.1]\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.6.1.jar:5.6.1]\n    at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63) ~[spring-security-web-5.6.1.jar:5.6.1]\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.6.1.jar:5.6.1]\n    at org.springframework.security.oauth2.server.authorization.web.OAuth2ClientAuthenticationFilter.doFilterInternal(OAuth2ClientAuthenticationFilter.java:115) ~[spring-security-oauth2-authorization-server-0.2.2.jar:0.2.2]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.15.jar:5.3.15]\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.6.1.jar:5.6.1]\n    at org.springframework.security.oauth2.server.authorization.web.OAuth2AuthorizationServerMetadataEndpointFilter.doFilterInternal(OAuth2AuthorizationServerMetadataEndpointFilter.java:77) ~[spring-security-oauth2-authorization-server-0.2.2.jar:0.2.2]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.15.jar:5.3.15]\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.6.1.jar:5.6.1]\n    at org.springframework.security.oauth2.server.authorization.web.NimbusJwkSetEndpointFilter.doFilterInternal(NimbusJwkSetEndpointFilter.java:85) ~[spring-security-oauth2-authorization-server-0.2.2.jar:0.2.2]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.15.jar:5.3.15]\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.6.1.jar:5.6.1]\n    at org.springframework.security.oauth2.server.authorization.oidc.web.OidcProviderConfigurationEndpointFilter.doFilterInternal(OidcProviderConfigurationEndpointFilter.java:79) ~[spring-security-oauth2-authorization-server-0.2.2.jar:0.2.2]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.15.jar:5.3.15]\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.6.1.jar:5.6.1]\n    at org.springframework.security.oauth2.server.authorization.web.OAuth2AuthorizationEndpointFilter.doFilterInternal(OAuth2AuthorizationEndpointFilter.java:140) ~[spring-security-oauth2-authorization-server-0.2.2.jar:0.2.2]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.15.jar:5.3.15]\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.6.1.jar:5.6.1]\n    at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:103) ~[spring-security-web-5.6.1.jar:5.6.1]\n    at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:89) ~[spring-security-web-5.6.1.jar:5.6.1]\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.6.1.jar:5.6.1]\n    at org.springframework.security.web.csrf.CsrfFilter.doFilterInternal(CsrfFilter.java:117) ~[spring-security-web-5.6.1.jar:5.6.1]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.15.jar:5.3.15]\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.6.1.jar:5.6.1]\n    at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90) ~[spring-security-web-5.6.1.jar:5.6.1]\n    at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75) ~[spring-security-web-5.6.1.jar:5.6.1]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.15.jar:5.3.15]\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.6.1.jar:5.6.1]\n    at org.springframework.security.oauth2.server.authorization.web.ProviderContextFilter.doFilterInternal(ProviderContextFilter.java:63) ~[spring-security-oauth2-authorization-server-0.2.2.jar:0.2.2]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.15.jar:5.3.15]\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.6.1.jar:5.6.1]\n    at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:110) ~[spring-security-web-5.6.1.jar:5.6.1]\n    at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:80) ~[spring-security-web-5.6.1.jar:5.6.1]\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.6.1.jar:5.6.1]\n    at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:55) ~[spring-security-web-5.6.1.jar:5.6.1]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.15.jar:5.3.15]\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.6.1.jar:5.6.1]\n    at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:211) ~[spring-security-web-5.6.1.jar:5.6.1]\n    at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:183) ~[spring-security-web-5.6.1.jar:5.6.1]\n    at org.springframework.security.web.debug.DebugFilter.invokeWithWrappedRequest(DebugFilter.java:90) ~[spring-security-web-5.6.1.jar:5.6.1]\n    at org.springframework.security.web.debug.DebugFilter.doFilter(DebugFilter.java:78) ~[spring-security-web-5.6.1.jar:5.6.1]\n    at org.springframework.security.web.debug.DebugFilter.doFilter(DebugFilter.java:67) ~[spring-security-web-5.6.1.jar:5.6.1]\n    at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:354) ~[spring-web-5.3.15.jar:5.3.15]\n    at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:267) ~[spring-web-5.3.15.jar:5.3.15]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.56.jar:9.0.56]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.56.jar:9.0.56]\n    at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-5.3.15.jar:5.3.15]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.15.jar:5.3.15]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.56.jar:9.0.56]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.56.jar:9.0.56]\n    at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-5.3.15.jar:5.3.15]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.15.jar:5.3.15]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.56.jar:9.0.56]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.56.jar:9.0.56]\n    at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-5.3.15.jar:5.3.15]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.15.jar:5.3.15]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.56.jar:9.0.56]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.56.jar:9.0.56]\n    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197) ~[tomcat-embed-core-9.0.56.jar:9.0.56]\n    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97) ~[tomcat-embed-core-9.0.56.jar:9.0.56]\n    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:540) ~[tomcat-embed-core-9.0.56.jar:9.0.56]\n    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:135) ~[tomcat-embed-core-9.0.56.jar:9.0.56]\n    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92) ~[tomcat-embed-core-9.0.56.jar:9.0.56]\n    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78) ~[tomcat-embed-core-9.0.56.jar:9.0.56]\n    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357) ~[tomcat-embed-core-9.0.56.jar:9.0.56]\n    at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:382) ~[tomcat-embed-core-9.0.56.jar:9.0.56]\n    at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65) ~[tomcat-embed-core-9.0.56.jar:9.0.56]\n    at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:895) ~[tomcat-embed-core-9.0.56.jar:9.0.56]\n    at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1732) ~[tomcat-embed-core-9.0.56.jar:9.0.56]\n    at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49) ~[tomcat-embed-core-9.0.56.jar:9.0.56]\n    at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191) ~[tomcat-embed-core-9.0.56.jar:9.0.56]\n    at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) ~[tomcat-embed-core-9.0.56.jar:9.0.56]\n    at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) ~[tomcat-embed-core-9.0.56.jar:9.0.56]\n    at java.base/java.lang.Thread.run(Thread.java:833) ~[na:na]\n</code></pre>\n<p>Inspecting this i ended up at <strong>line 172</strong> of <code>OAuth2AuthorizationCodeAuthenticationProvider</code> spring security class:</p>\n<pre><code>JoseHeader.Builder headersBuilder = JwtUtils.headers();\n</code></pre>\n<p>Which builds a <code>JwtEncodingContext's</code> header with <code>RS256</code> set as signature algorithm which is suspicious for not let me use <code>ES256</code>, in my point of view.</p>\n<p>I'm a newbie at this and can be totally wrong and away from the real problem.\nCan you guys figure out what i might be doing wrong??</p>\n<p>Thanks in advance</p>\n"},{"tags":["java","arrays","matrix","methods","integer"],"answers":[{"tags":[],"owner":{"account_id":23959668,"reputation":26587,"user_id":17949945,"display_name":"Alexander Ivanchenko"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1646082739,"creation_date":1646073253,"answer_id":71299554,"question_id":71298130,"body_markdown":"The most efficient way to solve this problem is by creating a **histogram of frequencies** for each *nested array* in the *matrix* (i.e. determine the number of occurrences for every element in the *nested array*).\r\n\r\nEvery *histogram* will be represented by a `Map&lt;Integer, Integer&gt;` (array element as a *key*, its occurrences as a *value*). To generate a histogram only a single pass through the array is needed. In the solution below this logic resides inside the `getFrequencies()` method.\r\n\r\nAfter creating all *histograms* we have to merge them. In terms of **set theory** we are looking for an **intersection** of *keys* in all *histograms*. I.e. we need only those *keys* that appear at **least once** in every *histogram* and a value for each *key* will be the smallest in all *histograms* for that *key*. This logic is placed in the `getCommonElements()`.\r\n\r\nIn order to create a *merged histogram*, we can pick **any** of the histograms (in the code below the first histogram is used `frequencies.get(0).keySet()`) and iterate over its *keys*. Then in the nested loop, for *every key*, we need to find the *minimum value* associated with that in every *histogram* in a list (*reminder: that will be the smallest number of occurrences for the key*). \r\n\r\nAt the same time, while merging histograms we can also find the **length** of the *resulting array* by adding all the minimal frequencies together. That small optimization will allow to avoid doing the second iteration over the merged map.\r\n\r\nThe last step required is to populate the resulting array `commonElements` with *keys* from the *merged histogram*. *Value* of every key denotes how many times it has to be placed in the resulting array.\r\n```\r\n    public static void main(String[] args) {\r\n        System.out.println(Arrays.toString(commonElements(new int[][]{{2,2,1,4},{4,1,2,2},{7,1,2,2},{2,10,2,1}})));\r\n        System.out.println(Arrays.toString(commonElements(new int[][]{{2,2,1,4},{4,1,3,2},{7,1,9,2},{2,10,2,1}})));\r\n    }\r\n```\r\n```\r\n    public static int[] commonElements(int[][] matrix){\r\n        List&lt;Map&lt;Integer, Integer&gt;&gt; frequencies = getFrequencies(matrix);\r\n\r\n        return getCommonElements(frequencies);\r\n    }\r\n\r\n    private static List&lt;Map&lt;Integer, Integer&gt;&gt; getFrequencies(int[][] matrix) {\r\n        List&lt;Map&lt;Integer, Integer&gt;&gt; frequencies = new ArrayList&lt;&gt;();\r\n\r\n        for (int[] arr: matrix) {\r\n            Map&lt;Integer, Integer&gt; hist = new HashMap&lt;&gt;(); // a histogram of frequencies for a particular array\r\n            for (int next: arr) {\r\n//                hist.merge(next, 1, Integer::sum); Java 8 alternative to if-else below\r\n                if (hist.containsKey(next)) {\r\n                    hist.put(next, hist.get(next) + 1);\r\n                } else {\r\n                    hist.put(next, 1);\r\n                }\r\n            }\r\n            frequencies.add(hist);\r\n        }\r\n        return frequencies;\r\n    }\r\n```\r\n```\r\n    private static int[] getCommonElements(List&lt;Map&lt;Integer, Integer&gt;&gt; frequencies) {\r\n        if (frequencies.isEmpty()) { // return an empty array in case if no common elements were found\r\n            return new int[0];\r\n        }\r\n\r\n        Map&lt;Integer, Integer&gt; intersection = new HashMap&lt;&gt;();\r\n        int length = 0;\r\n        for (Integer key: frequencies.get(0).keySet()) { //\r\n            int minCount = frequencies.get(0).get(key); // min number of occurrences of the key in all maps\r\n            for (Map&lt;Integer, Integer&gt; map: frequencies) {\r\n                int nextCount = map.getOrDefault(key, 0);\r\n                minCount = Math.min(nextCount, minCount); // getOrDefault is used because key might not be present\r\n                if (nextCount == 0) { // this key isn&#39;t present in one of the maps, no need to check others\r\n                    break;\r\n                }\r\n            }\r\n            if (minCount &gt; 0) {\r\n                intersection.put(key, minCount);\r\n                length += minCount;\r\n            }\r\n        }\r\n\r\n        int[] commonElements = new int[length];\r\n        int ind = 0;\r\n        for (int key: intersection.keySet()) {\r\n            int occurrences = intersection.get(key);\r\n            for (int i = 0; i &lt; occurrences; i++) {\r\n                commonElements[ind] = key;\r\n                ind++;\r\n            }\r\n        }\r\n        return commonElements;\r\n    }\r\n```\r\n**output**\r\n```\r\n[1, 2, 2]\r\n[1, 2]\r\n```\r\n**Side note:** don&#39;t violate the [naming conventions](https://www.oracle.com/java/technologies/javase/codeconventions-namingconventions.html), use camel-case for method and variable names.\r\n_________________________________________________________\r\n**Update**\r\n\r\nI&#39;ve managed to implement a brute-force solution based on *arrays* and *lists* only as required.\r\n\r\nThe most important thing is that for this task you need **two lists**: one to store **elements**, another to store **frequencies**. *Lists* are bound together via indices. And these two *lists* are basically mimic a **map**, frankly saying a very inefficient one (but that&#39;s a requirement). Another possibility is to implement a *class* with two `int` fields that will represent the data for a common element, and then store the instances of this class in a **single** *list*. But in this case, the process of checking whether a particular *element* already exists in the *list* will be much more verbose.\r\n\r\nThe overall logic has some similarities with the solution above. \r\n\r\nFirst, we need to pick a single *array* in the *matrix* (`matrix[0]`) and compare all its *unique elements* against the *contents* of all other *arrays*. Every *element* with non-zero *frequency* will be reflected in the list of *elements* and in the list of *frequencies* at the same index in both. And when the resulting array is being created the code relies on the corresponding indices in these lists.\r\n```\r\n    public static int[] commonElements(int[][] matrix){\r\n        if (matrix.length == 0) { // case when matrix is empty - this condition is required because farther steps will lead to IndexOutOfBoundsException\r\n            return new int[0];\r\n        }\r\n        if (matrix.length == 1) { // a small optimization\r\n            return matrix[0];\r\n        }\r\n\r\n//        Map&lt;Integer, Integer&gt; frequencyByElement = new HashMap&lt;&gt;(); // to lists will be used instead of Map, because of specific requirement for this task\r\n        List&lt;Integer&gt; frequencies = new ArrayList&lt;&gt;(); // lists will be bind together by index\r\n        List&lt;Integer&gt; elements = new ArrayList&lt;&gt;();\r\n\r\n        int length = 0; // length of the resulting array\r\n\r\n        for (int i = 0; i &lt; matrix[0].length; i++) {\r\n            if (elements.contains(matrix[0][i])) { // that means this element is a duplicate, no need to double-count it\r\n                continue;\r\n            }\r\n\r\n            int currentElement = matrix[0][i];\r\n            int minElementCount = matrix[0].length; // min number of occurrences - initialized to the max possible number of occurrences for the current array\r\n            // iterating over the all nested arrays in matrix\r\n            for (int row = 0; row &lt; matrix.length; row++) {\r\n                int localCount = 0; // frequency\r\n                for (int col = 0; col &lt; matrix[row].length; col++) {\r\n                    if(matrix[row][col] == currentElement){\r\n                        localCount++;\r\n                    }\r\n                }\r\n                if (localCount == 0) { // element is absent in this array and therefore has to be discarded\r\n                    minElementCount = 0;\r\n                    break; // no need to iterate any farther, breaking the nested loop\r\n                }\r\n                minElementCount = Math.min(localCount, minElementCount); // adjusting the value the min count\r\n            }\r\n//            frequencyByElement.put(currentElement, minElementCount); // now we are sure that element is present in all nested arrays\r\n            frequencies.add(minElementCount);\r\n            elements.add(currentElement);\r\n            length += minElementCount; // incrementing length\r\n        }\r\n        return getFinalArray(frequencies, elements, length);\r\n    }\r\n```\r\n```\r\n    private static int[] getFinalArray(List&lt;Integer&gt; frequencies,\r\n                                       List&lt;Integer&gt; elements,\r\n                                       int length) {\r\n\r\n        int[] finalArray = new int[length];\r\n        int idx = 0; // array index\r\n        for (int i = 0; i &lt; elements.size(); i++) {\r\n            int element = elements.get(i);\r\n            int elementCount = frequencies.get(i);\r\n            for (int j = 0; j &lt; elementCount; j++) {\r\n                finalArray[idx] = element;\r\n                idx++;\r\n            }\r\n        }\r\n        return finalArray;\r\n    }\r\n```","title":"Return array with common elements in all matrix row-s with repetition","body":"<p>The most efficient way to solve this problem is by creating a <strong>histogram of frequencies</strong> for each <em>nested array</em> in the <em>matrix</em> (i.e. determine the number of occurrences for every element in the <em>nested array</em>).</p>\n<p>Every <em>histogram</em> will be represented by a <code>Map&lt;Integer, Integer&gt;</code> (array element as a <em>key</em>, its occurrences as a <em>value</em>). To generate a histogram only a single pass through the array is needed. In the solution below this logic resides inside the <code>getFrequencies()</code> method.</p>\n<p>After creating all <em>histograms</em> we have to merge them. In terms of <strong>set theory</strong> we are looking for an <strong>intersection</strong> of <em>keys</em> in all <em>histograms</em>. I.e. we need only those <em>keys</em> that appear at <strong>least once</strong> in every <em>histogram</em> and a value for each <em>key</em> will be the smallest in all <em>histograms</em> for that <em>key</em>. This logic is placed in the <code>getCommonElements()</code>.</p>\n<p>In order to create a <em>merged histogram</em>, we can pick <strong>any</strong> of the histograms (in the code below the first histogram is used <code>frequencies.get(0).keySet()</code>) and iterate over its <em>keys</em>. Then in the nested loop, for <em>every key</em>, we need to find the <em>minimum value</em> associated with that in every <em>histogram</em> in a list (<em>reminder: that will be the smallest number of occurrences for the key</em>).</p>\n<p>At the same time, while merging histograms we can also find the <strong>length</strong> of the <em>resulting array</em> by adding all the minimal frequencies together. That small optimization will allow to avoid doing the second iteration over the merged map.</p>\n<p>The last step required is to populate the resulting array <code>commonElements</code> with <em>keys</em> from the <em>merged histogram</em>. <em>Value</em> of every key denotes how many times it has to be placed in the resulting array.</p>\n<pre><code>    public static void main(String[] args) {\n        System.out.println(Arrays.toString(commonElements(new int[][]{{2,2,1,4},{4,1,2,2},{7,1,2,2},{2,10,2,1}})));\n        System.out.println(Arrays.toString(commonElements(new int[][]{{2,2,1,4},{4,1,3,2},{7,1,9,2},{2,10,2,1}})));\n    }\n</code></pre>\n<pre><code>    public static int[] commonElements(int[][] matrix){\n        List&lt;Map&lt;Integer, Integer&gt;&gt; frequencies = getFrequencies(matrix);\n\n        return getCommonElements(frequencies);\n    }\n\n    private static List&lt;Map&lt;Integer, Integer&gt;&gt; getFrequencies(int[][] matrix) {\n        List&lt;Map&lt;Integer, Integer&gt;&gt; frequencies = new ArrayList&lt;&gt;();\n\n        for (int[] arr: matrix) {\n            Map&lt;Integer, Integer&gt; hist = new HashMap&lt;&gt;(); // a histogram of frequencies for a particular array\n            for (int next: arr) {\n//                hist.merge(next, 1, Integer::sum); Java 8 alternative to if-else below\n                if (hist.containsKey(next)) {\n                    hist.put(next, hist.get(next) + 1);\n                } else {\n                    hist.put(next, 1);\n                }\n            }\n            frequencies.add(hist);\n        }\n        return frequencies;\n    }\n</code></pre>\n<pre><code>    private static int[] getCommonElements(List&lt;Map&lt;Integer, Integer&gt;&gt; frequencies) {\n        if (frequencies.isEmpty()) { // return an empty array in case if no common elements were found\n            return new int[0];\n        }\n\n        Map&lt;Integer, Integer&gt; intersection = new HashMap&lt;&gt;();\n        int length = 0;\n        for (Integer key: frequencies.get(0).keySet()) { //\n            int minCount = frequencies.get(0).get(key); // min number of occurrences of the key in all maps\n            for (Map&lt;Integer, Integer&gt; map: frequencies) {\n                int nextCount = map.getOrDefault(key, 0);\n                minCount = Math.min(nextCount, minCount); // getOrDefault is used because key might not be present\n                if (nextCount == 0) { // this key isn't present in one of the maps, no need to check others\n                    break;\n                }\n            }\n            if (minCount &gt; 0) {\n                intersection.put(key, minCount);\n                length += minCount;\n            }\n        }\n\n        int[] commonElements = new int[length];\n        int ind = 0;\n        for (int key: intersection.keySet()) {\n            int occurrences = intersection.get(key);\n            for (int i = 0; i &lt; occurrences; i++) {\n                commonElements[ind] = key;\n                ind++;\n            }\n        }\n        return commonElements;\n    }\n</code></pre>\n<p><strong>output</strong></p>\n<pre><code>[1, 2, 2]\n[1, 2]\n</code></pre>\n<p><strong>Side note:</strong> don't violate the <a href=\"https://www.oracle.com/java/technologies/javase/codeconventions-namingconventions.html\" rel=\"nofollow noreferrer\">naming conventions</a>, use camel-case for method and variable names.</p>\n<hr />\n<p><strong>Update</strong></p>\n<p>I've managed to implement a brute-force solution based on <em>arrays</em> and <em>lists</em> only as required.</p>\n<p>The most important thing is that for this task you need <strong>two lists</strong>: one to store <strong>elements</strong>, another to store <strong>frequencies</strong>. <em>Lists</em> are bound together via indices. And these two <em>lists</em> are basically mimic a <strong>map</strong>, frankly saying a very inefficient one (but that's a requirement). Another possibility is to implement a <em>class</em> with two <code>int</code> fields that will represent the data for a common element, and then store the instances of this class in a <strong>single</strong> <em>list</em>. But in this case, the process of checking whether a particular <em>element</em> already exists in the <em>list</em> will be much more verbose.</p>\n<p>The overall logic has some similarities with the solution above.</p>\n<p>First, we need to pick a single <em>array</em> in the <em>matrix</em> (<code>matrix[0]</code>) and compare all its <em>unique elements</em> against the <em>contents</em> of all other <em>arrays</em>. Every <em>element</em> with non-zero <em>frequency</em> will be reflected in the list of <em>elements</em> and in the list of <em>frequencies</em> at the same index in both. And when the resulting array is being created the code relies on the corresponding indices in these lists.</p>\n<pre><code>    public static int[] commonElements(int[][] matrix){\n        if (matrix.length == 0) { // case when matrix is empty - this condition is required because farther steps will lead to IndexOutOfBoundsException\n            return new int[0];\n        }\n        if (matrix.length == 1) { // a small optimization\n            return matrix[0];\n        }\n\n//        Map&lt;Integer, Integer&gt; frequencyByElement = new HashMap&lt;&gt;(); // to lists will be used instead of Map, because of specific requirement for this task\n        List&lt;Integer&gt; frequencies = new ArrayList&lt;&gt;(); // lists will be bind together by index\n        List&lt;Integer&gt; elements = new ArrayList&lt;&gt;();\n\n        int length = 0; // length of the resulting array\n\n        for (int i = 0; i &lt; matrix[0].length; i++) {\n            if (elements.contains(matrix[0][i])) { // that means this element is a duplicate, no need to double-count it\n                continue;\n            }\n\n            int currentElement = matrix[0][i];\n            int minElementCount = matrix[0].length; // min number of occurrences - initialized to the max possible number of occurrences for the current array\n            // iterating over the all nested arrays in matrix\n            for (int row = 0; row &lt; matrix.length; row++) {\n                int localCount = 0; // frequency\n                for (int col = 0; col &lt; matrix[row].length; col++) {\n                    if(matrix[row][col] == currentElement){\n                        localCount++;\n                    }\n                }\n                if (localCount == 0) { // element is absent in this array and therefore has to be discarded\n                    minElementCount = 0;\n                    break; // no need to iterate any farther, breaking the nested loop\n                }\n                minElementCount = Math.min(localCount, minElementCount); // adjusting the value the min count\n            }\n//            frequencyByElement.put(currentElement, minElementCount); // now we are sure that element is present in all nested arrays\n            frequencies.add(minElementCount);\n            elements.add(currentElement);\n            length += minElementCount; // incrementing length\n        }\n        return getFinalArray(frequencies, elements, length);\n    }\n</code></pre>\n<pre><code>    private static int[] getFinalArray(List&lt;Integer&gt; frequencies,\n                                       List&lt;Integer&gt; elements,\n                                       int length) {\n\n        int[] finalArray = new int[length];\n        int idx = 0; // array index\n        for (int i = 0; i &lt; elements.size(); i++) {\n            int element = elements.get(i);\n            int elementCount = frequencies.get(i);\n            for (int j = 0; j &lt; elementCount; j++) {\n                finalArray[idx] = element;\n                idx++;\n            }\n        }\n        return finalArray;\n    }\n</code></pre>\n"}],"owner":{"account_id":18095281,"reputation":37,"user_id":13153706,"display_name":"RCWZX"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":462,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":71299554,"answer_count":1,"score":1,"last_activity_date":1646082739,"creation_date":1646065850,"question_id":71298130,"body_markdown":"Currently working on a method that takes a n*n matrix as input and returns an array consisting of all elements that are found in each sub-array. However, since I need it to also include duplicates etc, it&#39;s harder than I thought.\r\n\r\nGoogled the hell out of it, however, yet to find a solution which matches my criteria of repetition.\r\n\r\nCurrently I have this, which compares the element&#39;s of the first row with every other row and all their elements. If the counter gets to the length where it confirms that the element indeed is present in all rows, it adds it to the array. However, this has faults in it. First of all, since I create a set array in the beginning with the maximum possible length, it might return an array with non-needed 0&#39;s in it. And second, the duplicate part is not working correctly, struggling to implement a check there.\r\n\r\nExamples of input/output that I need:\r\n```\r\nInput matrix: {{2,2,1,4},{4,1,2,2},{7,1,2,2},{2,10,2,1}}\r\nDesired output: {1, 2, 2}\r\nMy output: {2, 2, 1, 0}\r\n\r\nInput matrix:  {{2,2,1,4},{4,1,3,2},{7,1,9,2},{2,10,2,1}}\r\nDesired output: {1, 2}\r\nMy output: {2, 2, 1, 0}\r\n```\r\n\r\n```\r\npublic static int[] common_elements(int[][] matrix){\r\n        int[] final_array = new int[matrix.length];\r\n        for (int i = 0; i &lt; matrix.length; i++) {\r\n            int counter = 0;\r\n            for (int j = 1; j &lt; matrix.length; j++) {\r\n                for (int k = 0; k &lt; matrix.length; k++) {\r\n                    if(matrix.[0][i] == matrix.[j][k]){\r\n                        counter += 1;\r\n                        break;\r\n                    }\r\n                }\r\n            }\r\n            if(counter == a.length-1){\r\n                final_array[i] = a[0][i];\r\n            }\r\n        }\r\n\r\n        return final_array;\r\n    }\r\n```\r\nEDIT: This is what I finally got together that fits my requirements and works flawlessly, with comments\r\n```\r\npublic static int[] repetitiveInts(int[][] a){\r\n        //This is a method declared outside for sorting every row of the matrix ascending-ly before I do the element search.\r\n        for (int i = 0; i &lt; a.length; i++) { \r\n            sorting(a[i]);\r\n        }\r\n        //Declaring a LinkedList in order to add elements on the go\r\n        LinkedList&lt;Integer&gt; final_list= new LinkedList&lt;Integer&gt;();\r\n        //Iterating through the matrix with every element of the first row, counting if it appears in every row besides the first one.\r\n        for (int i = 0; i &lt; a.length; i++) {\r\n            int counter = 0;\r\n            for (int j = 1; j &lt; a.length; j++) {\r\n                for (int k = 0; k &lt; a.length; k++) {\r\n                 //Checking if an element from the other rows match\r\n                    if(a[0][i] == a[j][k]){\r\n                        a[j][k] = a[0][i]-1; //If a match is found, the element is changed so finding duplicates is possible.\r\n                        counter += 1;\r\n                        break; //Breaking and checking the next row after one row checks out successfully.\r\n                    }\r\n                }\r\n            }\r\n            //If the element is indeed in every row, adds it to the lit.\r\n            if(counter == a.length-1){\r\n                final_list.add(a[0][i]);\r\n            }\r\n        }\r\n        //Since I had to return a regular int[] array, converting the LinkedList into an array.\r\n        int[] final_realarray= new int[final_list.size()];\r\n        for (int i = 0; i &lt; final_list.size(); i++) {\r\n            final_realarray[i] = final_list.get(i);\r\n        }\r\n        return final_realarray;\r\n```\r\nGrateful for help :)","title":"Return array with common elements in all matrix row-s with repetition","body":"<p>Currently working on a method that takes a n*n matrix as input and returns an array consisting of all elements that are found in each sub-array. However, since I need it to also include duplicates etc, it's harder than I thought.</p>\n<p>Googled the hell out of it, however, yet to find a solution which matches my criteria of repetition.</p>\n<p>Currently I have this, which compares the element's of the first row with every other row and all their elements. If the counter gets to the length where it confirms that the element indeed is present in all rows, it adds it to the array. However, this has faults in it. First of all, since I create a set array in the beginning with the maximum possible length, it might return an array with non-needed 0's in it. And second, the duplicate part is not working correctly, struggling to implement a check there.</p>\n<p>Examples of input/output that I need:</p>\n<pre><code>Input matrix: {{2,2,1,4},{4,1,2,2},{7,1,2,2},{2,10,2,1}}\nDesired output: {1, 2, 2}\nMy output: {2, 2, 1, 0}\n\nInput matrix:  {{2,2,1,4},{4,1,3,2},{7,1,9,2},{2,10,2,1}}\nDesired output: {1, 2}\nMy output: {2, 2, 1, 0}\n</code></pre>\n<pre><code>public static int[] common_elements(int[][] matrix){\n        int[] final_array = new int[matrix.length];\n        for (int i = 0; i &lt; matrix.length; i++) {\n            int counter = 0;\n            for (int j = 1; j &lt; matrix.length; j++) {\n                for (int k = 0; k &lt; matrix.length; k++) {\n                    if(matrix.[0][i] == matrix.[j][k]){\n                        counter += 1;\n                        break;\n                    }\n                }\n            }\n            if(counter == a.length-1){\n                final_array[i] = a[0][i];\n            }\n        }\n\n        return final_array;\n    }\n</code></pre>\n<p>EDIT: This is what I finally got together that fits my requirements and works flawlessly, with comments</p>\n<pre><code>public static int[] repetitiveInts(int[][] a){\n        //This is a method declared outside for sorting every row of the matrix ascending-ly before I do the element search.\n        for (int i = 0; i &lt; a.length; i++) { \n            sorting(a[i]);\n        }\n        //Declaring a LinkedList in order to add elements on the go\n        LinkedList&lt;Integer&gt; final_list= new LinkedList&lt;Integer&gt;();\n        //Iterating through the matrix with every element of the first row, counting if it appears in every row besides the first one.\n        for (int i = 0; i &lt; a.length; i++) {\n            int counter = 0;\n            for (int j = 1; j &lt; a.length; j++) {\n                for (int k = 0; k &lt; a.length; k++) {\n                 //Checking if an element from the other rows match\n                    if(a[0][i] == a[j][k]){\n                        a[j][k] = a[0][i]-1; //If a match is found, the element is changed so finding duplicates is possible.\n                        counter += 1;\n                        break; //Breaking and checking the next row after one row checks out successfully.\n                    }\n                }\n            }\n            //If the element is indeed in every row, adds it to the lit.\n            if(counter == a.length-1){\n                final_list.add(a[0][i]);\n            }\n        }\n        //Since I had to return a regular int[] array, converting the LinkedList into an array.\n        int[] final_realarray= new int[final_list.size()];\n        for (int i = 0; i &lt; final_list.size(); i++) {\n            final_realarray[i] = final_list.get(i);\n        }\n        return final_realarray;\n</code></pre>\n<p>Grateful for help :)</p>\n"},{"tags":["java","byte-buddy"],"answers":[{"tags":[],"owner":{"account_id":1284143,"reputation":43090,"user_id":1237575,"accept_rate":96,"display_name":"Rafael Winterhalter"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1646082650,"creation_date":1646082650,"answer_id":71301085,"question_id":71261059,"body_markdown":"Ideally, your agent does not contain such classes. Rather, match classes by their name: `takesArgument(0, named(&quot;javax.servlet.ServletRequest&quot;))`, for instance.","title":"Byte Buddy - java.lang.NoClassDefFoundError: javax/servlet/ServletRequest","body":"<p>Ideally, your agent does not contain such classes. Rather, match classes by their name: <code>takesArgument(0, named(&quot;javax.servlet.ServletRequest&quot;))</code>, for instance.</p>\n"}],"owner":{"account_id":2108062,"reputation":162,"user_id":1873926,"display_name":"Deepak Chaudhary"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":522,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":71301085,"answer_count":1,"score":1,"last_activity_date":1646082650,"creation_date":1645763240,"question_id":71261059,"body_markdown":"I am trying to instrument `service` method of `javax.servlet.Servlet` interface implementations as following:\r\n\r\n```\r\n.transform(\r\n                        new AgentBuilder.Transformer.ForAdvice()\r\n                                .include(MyAgent.class.getClassLoader())\r\n                                .advice(\r\n                                        named(&quot;service&quot;)\r\n                                                .and(takesArgument(0, ServletRequest.class))\r\n                                                .and(takesArgument(1, ServletResponse.class))\r\n                                        , &quot;com.MyAdvice&quot;\r\n                                )\r\n                )\r\n```\r\n\r\nNow, if I attach this agent to an already running Spring boot application via `agentmain` - I see below exception on trying to access any web page\r\n\r\n```\r\njava.lang.LinkageError: loader constraint violation: when resolving method &#39;void javax.servlet.http.HttpServletRequestWrapper.&lt;init&gt;(javax.servlet.http.HttpServletRequest)&#39; \r\nthe class loader org.springframework.boot.loader.LaunchedURLClassLoader @18be83e4 of the current class,\r\norg/springframework/web/servlet/resource/ResourceUrlEncodingFilter$ResourceUrlEncodingRequestWrapper, and the class loader &#39;app&#39; for the method&#39;s defining class, javax/servlet/http/HttpServletRequestWrapper, \r\nhave different Class objects for the type javax/servlet/http/HttpServletRequest used in the signature (org.springframework.web.servlet.resource.ResourceUrlEncodingFilter$ResourceUrlEncodingRequestWrapper is in unnamed module of loader org.springframework.boot.loader.LaunchedURLClassLoader @18be83e4, parent loader &#39;app&#39;; javax.servlet.http.HttpServletRequestWrapper is in unnamed module of loader &#39;app&#39;)\r\n```\r\n\r\nI understand its because `javax/servlet/http/HttpServletRequest` instance is loaded from 2 different jars - one that came through agent and another through spring boot embedded tomcat. If I try to set scope as `provided` in agent&#39;s `pom.xml` [ since I do not want to include servlet-api in agent bundled jar and try use already provided servlet-api implementation from Spring boot ], I get `Caused by: java.lang.NoClassDefFoundError: javax/servlet/ServletRequest` - possibly because the classloader loading the agent can&#39;t see spring boot provided servlet api.\r\n\r\nIs there any possible workaround or fix to resolve this situation? Thank you for your time and feedback.","title":"Byte Buddy - java.lang.NoClassDefFoundError: javax/servlet/ServletRequest","body":"<p>I am trying to instrument <code>service</code> method of <code>javax.servlet.Servlet</code> interface implementations as following:</p>\n<pre><code>.transform(\n                        new AgentBuilder.Transformer.ForAdvice()\n                                .include(MyAgent.class.getClassLoader())\n                                .advice(\n                                        named(&quot;service&quot;)\n                                                .and(takesArgument(0, ServletRequest.class))\n                                                .and(takesArgument(1, ServletResponse.class))\n                                        , &quot;com.MyAdvice&quot;\n                                )\n                )\n</code></pre>\n<p>Now, if I attach this agent to an already running Spring boot application via <code>agentmain</code> - I see below exception on trying to access any web page</p>\n<pre><code>java.lang.LinkageError: loader constraint violation: when resolving method 'void javax.servlet.http.HttpServletRequestWrapper.&lt;init&gt;(javax.servlet.http.HttpServletRequest)' \nthe class loader org.springframework.boot.loader.LaunchedURLClassLoader @18be83e4 of the current class,\norg/springframework/web/servlet/resource/ResourceUrlEncodingFilter$ResourceUrlEncodingRequestWrapper, and the class loader 'app' for the method's defining class, javax/servlet/http/HttpServletRequestWrapper, \nhave different Class objects for the type javax/servlet/http/HttpServletRequest used in the signature (org.springframework.web.servlet.resource.ResourceUrlEncodingFilter$ResourceUrlEncodingRequestWrapper is in unnamed module of loader org.springframework.boot.loader.LaunchedURLClassLoader @18be83e4, parent loader 'app'; javax.servlet.http.HttpServletRequestWrapper is in unnamed module of loader 'app')\n</code></pre>\n<p>I understand its because <code>javax/servlet/http/HttpServletRequest</code> instance is loaded from 2 different jars - one that came through agent and another through spring boot embedded tomcat. If I try to set scope as <code>provided</code> in agent's <code>pom.xml</code> [ since I do not want to include servlet-api in agent bundled jar and try use already provided servlet-api implementation from Spring boot ], I get <code>Caused by: java.lang.NoClassDefFoundError: javax/servlet/ServletRequest</code> - possibly because the classloader loading the agent can't see spring boot provided servlet api.</p>\n<p>Is there any possible workaround or fix to resolve this situation? Thank you for your time and feedback.</p>\n"},{"tags":["java","windows","rdf","executable-jar","blazegraph"],"comments":[{"owner":{"account_id":6077505,"reputation":8407,"user_id":4744359,"display_name":"UninformedUser"},"score":0,"creation_date":1511855464,"post_id":47514940,"comment_id":82008747,"body_markdown":"Shouldn&#39;t you ask for support on the Blazegraph mailing list? I mean, this is pretty tool specific and I&#39;m sure the developers might give you better answers.","body":"Shouldn&#39;t you ask for support on the Blazegraph mailing list? I mean, this is pretty tool specific and I&#39;m sure the developers might give you better answers."},{"owner":{"account_id":6077505,"reputation":8407,"user_id":4744359,"display_name":"UninformedUser"},"score":0,"creation_date":1511855522,"post_id":47514940,"comment_id":82008771,"body_markdown":"By the way, an NPE looks like a bug somewhere, especially if you did everything is suggested.","body":"By the way, an NPE looks like a bug somewhere, especially if you did everything is suggested."}],"answers":[{"tags":[],"owner":{"account_id":886666,"reputation":534,"user_id":925955,"display_name":"Cristiano"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1511948835,"creation_date":1511948835,"answer_id":47549642,"question_id":47514940,"body_markdown":"It is probably a jre compatibility issue. I had the same problem with jre 9, switching back to jre 7 solved the NPE.","title":"Blazegraph error when running on Windows 10","body":"<p>It is probably a jre compatibility issue. I had the same problem with jre 9, switching back to jre 7 solved the NPE.</p>\n"},{"tags":[],"owner":{"account_id":19227510,"reputation":151,"user_id":14050069,"display_name":"arash"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1646082447,"creation_date":1646082447,"answer_id":71301055,"question_id":47514940,"body_markdown":"Based on my experience, it could be that you don&#39;t have the latest Javan running or are not in the right directory when running the code. Additionally, it is advised to be in the user account to have all necessary permission.","title":"Blazegraph error when running on Windows 10","body":"<p>Based on my experience, it could be that you don't have the latest Javan running or are not in the right directory when running the code. Additionally, it is advised to be in the user account to have all necessary permission.</p>\n"}],"owner":{"account_id":7124158,"reputation":49,"user_id":5447662,"display_name":"aidesigner"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":982,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"accepted_answer_id":47549642,"answer_count":2,"score":4,"last_activity_date":1646082447,"creation_date":1511798071,"question_id":47514940,"body_markdown":"Failed to run [Blazegraph][1] (Java RDF triple store) on Windows 10 using the [simple steps][2] from the download page.\r\n\r\nI have a windows 10 machine with Java JDK 9 installed (See version check below). I [downloaded][2] the latest Blazegraph executable jar and then ran &quot;java -server -Xmx4g -jar blazegraph.jar&quot;. It reports a NullPointerException as shown below. If it is helpful the error below references [StandaloneNanoSparqlServer.java:142][3], which github shows to be `&quot;System.setProperty(&quot;jetty.home&quot;, jettyXml.getClass().getResource(&quot;/war&quot;).toExternalForm());&quot;.`\r\n\r\n**Commands/Response at Windows admin CMD prompt:**\r\n\r\n    C:\\Users\\aidesigner\\Downloads\\Blazegraph&gt;dir\r\n    11/26/2017 09:48 PM 56,702,395 blazegraph.jar\r\n    11/26/2017 09:06 PM 0 rules.log\r\n\r\n    C:\\Users\\aidesigner\\Downloads\\Blazegraph&gt;java -version\r\n    java version &quot;9&quot;\r\n    Java(TM) SE Runtime Environment (build 9+181)\r\n    Java HotSpot(TM) 64-Bit Server VM (build 9+181, mixed mode)\r\n\r\n    C:\\Users\\aidesigner\\Downloads\\Blazegraph&gt;java -server -Xmx4g -jar blazegraph.jar\r\n    INFO: com.bigdata.util.config.LogUtil: Configure: jar:file:/C:/Users/aidesigner/Downloads/Blazegraph/blazegraph.jar!/log4j.properties\r\n    WARN : SystemUtil.java:71: No CPUParser for this platform - looking for class: [org.apache.system.Windows10]\r\n    \r\n    BlazeGraph(TM) Graph Engine\r\n        \r\n    Flexible\r\n    Reliable\r\n    Affordable\r\n    Web-Scale Computing for the Enterprise\r\n    Copyright SYSTAP, LLC DBA Blazegraph 2006-2016. All rights reserved.\r\n    developer-pc.home\r\n    Sun Nov 26 21:08:03 CST 2017\r\n    Windows 10/10.0 amd64\r\n    amd64 Family n, Model n, Stepping n, Undeterminable #CPU=1\r\n    Oracle Corporation 9\r\n    freeMemory=521142272\r\n    buildVersion=2.1.1\r\n    gitCommit=90d9e8232969a8afdc830e856643e5416bb50d0a\r\n    \r\n    // &lt;Displays about 20 license links&gt;\r\n    \r\n    ERROR: Banner.java:160: Uncaught exception in thread\r\n    java.lang.NullPointerException\r\n    at com.bigdata.rdf.sail.webapp.StandaloneNanoSparqlServer.main(StandaloneNanoSparqlServer.java:142)\r\n\r\n\r\n  [1]: https://www.blazegraph.com/\r\n  [2]: https://www.blazegraph.com/download/\r\n  [3]: https://github.com/blazegraph/database/blob/64bb8ca92eb063d45d68ec920a34b5321b80e2fe/bigdata-jar/src/main/java/com/bigdata/rdf/sail/webapp/StandaloneNanoSparqlServer.java#L142\r\n","title":"Blazegraph error when running on Windows 10","body":"<p>Failed to run <a href=\"https://www.blazegraph.com/\" rel=\"nofollow noreferrer\">Blazegraph</a> (Java RDF triple store) on Windows 10 using the <a href=\"https://www.blazegraph.com/download/\" rel=\"nofollow noreferrer\">simple steps</a> from the download page.</p>\n\n<p>I have a windows 10 machine with Java JDK 9 installed (See version check below). I <a href=\"https://www.blazegraph.com/download/\" rel=\"nofollow noreferrer\">downloaded</a> the latest Blazegraph executable jar and then ran \"java -server -Xmx4g -jar blazegraph.jar\". It reports a NullPointerException as shown below. If it is helpful the error below references <a href=\"https://github.com/blazegraph/database/blob/64bb8ca92eb063d45d68ec920a34b5321b80e2fe/bigdata-jar/src/main/java/com/bigdata/rdf/sail/webapp/StandaloneNanoSparqlServer.java#L142\" rel=\"nofollow noreferrer\">StandaloneNanoSparqlServer.java:142</a>, which github shows to be <code>\"System.setProperty(\"jetty.home\", jettyXml.getClass().getResource(\"/war\").toExternalForm());\".</code></p>\n\n<p><strong>Commands/Response at Windows admin CMD prompt:</strong></p>\n\n<pre><code>C:\\Users\\aidesigner\\Downloads\\Blazegraph&gt;dir\n11/26/2017 09:48 PM 56,702,395 blazegraph.jar\n11/26/2017 09:06 PM 0 rules.log\n\nC:\\Users\\aidesigner\\Downloads\\Blazegraph&gt;java -version\njava version \"9\"\nJava(TM) SE Runtime Environment (build 9+181)\nJava HotSpot(TM) 64-Bit Server VM (build 9+181, mixed mode)\n\nC:\\Users\\aidesigner\\Downloads\\Blazegraph&gt;java -server -Xmx4g -jar blazegraph.jar\nINFO: com.bigdata.util.config.LogUtil: Configure: jar:file:/C:/Users/aidesigner/Downloads/Blazegraph/blazegraph.jar!/log4j.properties\nWARN : SystemUtil.java:71: No CPUParser for this platform - looking for class: [org.apache.system.Windows10]\n\nBlazeGraph(TM) Graph Engine\n\nFlexible\nReliable\nAffordable\nWeb-Scale Computing for the Enterprise\nCopyright SYSTAP, LLC DBA Blazegraph 2006-2016. All rights reserved.\ndeveloper-pc.home\nSun Nov 26 21:08:03 CST 2017\nWindows 10/10.0 amd64\namd64 Family n, Model n, Stepping n, Undeterminable #CPU=1\nOracle Corporation 9\nfreeMemory=521142272\nbuildVersion=2.1.1\ngitCommit=90d9e8232969a8afdc830e856643e5416bb50d0a\n\n// &lt;Displays about 20 license links&gt;\n\nERROR: Banner.java:160: Uncaught exception in thread\njava.lang.NullPointerException\nat com.bigdata.rdf.sail.webapp.StandaloneNanoSparqlServer.main(StandaloneNanoSparqlServer.java:142)\n</code></pre>\n"},{"tags":["java","jmeter","performance-testing","throughput"],"comments":[{"owner":{"account_id":301489,"reputation":54254,"user_id":609251,"accept_rate":82,"display_name":"aroth"},"score":0,"creation_date":1334020740,"post_id":10081778,"comment_id":12909290,"body_markdown":"How are you measuring the 550/second request rate?","body":"How are you measuring the 550/second request rate?"},{"owner":{"account_id":315998,"reputation":3731,"user_id":631937,"accept_rate":45,"display_name":"Prasanna"},"score":0,"creation_date":1334022471,"post_id":10081778,"comment_id":12909596,"body_markdown":"It is what jmeter reports under throughput column under summary report.","body":"It is what jmeter reports under throughput column under summary report."},{"owner":{"account_id":301489,"reputation":54254,"user_id":609251,"accept_rate":82,"display_name":"aroth"},"score":2,"creation_date":1334023209,"post_id":10081778,"comment_id":12909737,"body_markdown":"All the references that I can find seem to indicate that jmeter reports throughput in requests per minute, not requests per second.  And 550 requests per minute is roughly in the ballpark of what can be expected given your other numbers there (well actually, it takes about an average of ~300 KB/sec to reach 550 uploads per minute, but maybe that 148 KB/sec is an instantaneous reading, or perhaps there is some compression being applied to the 32 KB image, or perhaps the 32 KB image is actually slightly smaller than 32 KB, etc.).","body":"All the references that I can find seem to indicate that jmeter reports throughput in requests per minute, not requests per second.  And 550 requests per minute is roughly in the ballpark of what can be expected given your other numbers there (well actually, it takes about an average of ~300 KB/sec to reach 550 uploads per minute, but maybe that 148 KB/sec is an instantaneous reading, or perhaps there is some compression being applied to the 32 KB image, or perhaps the 32 KB image is actually slightly smaller than 32 KB, etc.)."},{"owner":{"account_id":315998,"reputation":3731,"user_id":631937,"accept_rate":45,"display_name":"Prasanna"},"score":0,"creation_date":1334078828,"post_id":10081778,"comment_id":12927399,"body_markdown":"No, the throughput being reported is 550 req/second, not minute. I am not sure about any huge compression is taking place as I am sending a JPEG image with Transfer encoding header as binary.","body":"No, the throughput being reported is 550 req/second, not minute. I am not sure about any huge compression is taking place as I am sending a JPEG image with Transfer encoding header as binary."},{"owner":{"account_id":426541,"reputation":1120,"user_id":807802,"accept_rate":0,"display_name":"MarcFasel"},"score":0,"creation_date":1340785519,"post_id":10081778,"comment_id":14738147,"body_markdown":"How do you request an image via a POST request? In general you would send the POST to a controller, who will respond with an HTML file. may send an HTML file that contains a reference to a single 32KB file","body":"How do you request an image via a POST request? In general you would send the POST to a controller, who will respond with an HTML file. may send an HTML file that contains a reference to a single 32KB file"}],"answers":[{"tags":[],"owner":{"account_id":94899,"reputation":10006,"user_id":258813,"accept_rate":88,"display_name":"rhinds"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1334087064,"creation_date":1334087064,"answer_id":10095356,"question_id":10081778,"body_markdown":"The maths in the example for 1 request looks correct to me.\r\n\r\n    Samples: 1\r\n    Average: 25\r\n    Min: 25\r\n    Max: 25\r\n    Std.Dev: 0\r\n    Error: 0%\r\n    Throughput: 40/sec\r\n    KB/Sec: 10.62\r\n    Avg. Bytes: 272.\r\n\r\n\r\nAs per your data above, 40 requests a second, at an average of 272 bytes = (40*272) 10880 bytes a second throughput (which when divided by 1024 is 10.625).\r\n\r\nThe question is surely just why JMeter thinks the average request size 272bytes and you think it is 32k - are you sure the image is being attached? if so I would assume there is some fairly hefty compression going on.","title":"Jmeter: Understanding correlation between throughput and KB/sec","body":"<p>The maths in the example for 1 request looks correct to me.</p>\n\n<pre><code>Samples: 1\nAverage: 25\nMin: 25\nMax: 25\nStd.Dev: 0\nError: 0%\nThroughput: 40/sec\nKB/Sec: 10.62\nAvg. Bytes: 272.\n</code></pre>\n\n<p>As per your data above, 40 requests a second, at an average of 272 bytes = (40*272) 10880 bytes a second throughput (which when divided by 1024 is 10.625).</p>\n\n<p>The question is surely just why JMeter thinks the average request size 272bytes and you think it is 32k - are you sure the image is being attached? if so I would assume there is some fairly hefty compression going on.</p>\n"}],"owner":{"account_id":315998,"reputation":3731,"user_id":631937,"accept_rate":45,"display_name":"Prasanna"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":7198,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":1,"score":3,"last_activity_date":1646082410,"creation_date":1334019832,"question_id":10081778,"body_markdown":"I have thread group of 15 threads, each sending a 32KB image (HTTP POST). Under summary report, I have the throughput at 550/sec, average response time: 25ms and the KB/sec is shown as 148KB/sec. I am finding it difficult to correlate these numbers. if I can manage 550 req/sec and each req is 32KB, shouldn&#39;t the KB/sec be 550 * 32 KB/sec? \r\n\r\n**EDIT:**\r\nEven when I send only one request, the number under KB/Sec just does not make sense. I am able to correlate all other numbers. The summary report for 1 request:\r\n\r\n    Samples: 1\r\n    Average: 25\r\n    Min: 25\r\n    Max: 25\r\n    Std.Dev: 0\r\n    Error: 0%\r\n    Throughput: 40/sec\r\n    KB/Sec: 10.62\r\n    Avg. Bytes: 272.\r\n\r\nIt is pretty easy to correlate average time and throughput from the above result. The size of the image that I am transmitting is 32281 bytes (as reported by linux OS). As pointed out by aroth in comments, I doubt whether this has to do anything with compression. I tried sending a 1MB image, the KB/Sec reported was 12.3.","title":"Jmeter: Understanding correlation between throughput and KB/sec","body":"<p>I have thread group of 15 threads, each sending a 32KB image (HTTP POST). Under summary report, I have the throughput at 550/sec, average response time: 25ms and the KB/sec is shown as 148KB/sec. I am finding it difficult to correlate these numbers. if I can manage 550 req/sec and each req is 32KB, shouldn't the KB/sec be 550 * 32 KB/sec? </p>\n\n<p><strong>EDIT:</strong>\nEven when I send only one request, the number under KB/Sec just does not make sense. I am able to correlate all other numbers. The summary report for 1 request:</p>\n\n<pre><code>Samples: 1\nAverage: 25\nMin: 25\nMax: 25\nStd.Dev: 0\nError: 0%\nThroughput: 40/sec\nKB/Sec: 10.62\nAvg. Bytes: 272.\n</code></pre>\n\n<p>It is pretty easy to correlate average time and throughput from the above result. The size of the image that I am transmitting is 32281 bytes (as reported by linux OS). As pointed out by aroth in comments, I doubt whether this has to do anything with compression. I tried sending a 1MB image, the KB/Sec reported was 12.3.</p>\n"},{"tags":["java","android"],"comments":[{"owner":{"account_id":18716710,"reputation":1336,"user_id":14291243,"display_name":"Abhishek Dutt"},"score":0,"creation_date":1645867017,"post_id":71273148,"comment_id":125987365,"body_markdown":"[This](https://developer.android.com/topic/libraries/architecture/viewmodel-savedstate) might help you","body":"<a href=\"https://developer.android.com/topic/libraries/architecture/viewmodel-savedstate\" rel=\"nofollow noreferrer\">This</a> might help you"}],"answers":[{"tags":[],"owner":{"account_id":11091407,"reputation":152,"user_id":8143136,"display_name":"Sidnio"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1645843029,"creation_date":1645843029,"answer_id":71273668,"question_id":71273148,"body_markdown":"  ViewModel\r\nUse ViewModel[enter link description here][1]\r\n\r\nIt&#39;s no problem to rotate\r\n\r\nYou can learn about the login module of Android studio\r\n[enter image description here][2]\r\n\r\n\r\n  [1]: https://developer.android.google.cn/topic/libraries/architecture/viewmodel?hl=zh_cn\r\n  [2]: https://i.stack.imgur.com/Y602T.png","title":"Android Saved Instance State Not Saving (Dual Activity)","body":"<p>ViewModel\nUse ViewModel<a href=\"https://developer.android.google.cn/topic/libraries/architecture/viewmodel?hl=zh_cn\" rel=\"nofollow noreferrer\">enter link description here</a></p>\n<p>It's no problem to rotate</p>\n<p>You can learn about the login module of Android studio\n<a href=\"https://i.stack.imgur.com/Y602T.png\" rel=\"nofollow noreferrer\">enter image description here</a></p>\n"},{"tags":[],"owner":{"account_id":16445786,"reputation":340,"user_id":11880634,"display_name":"GvHarish"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1645870739,"creation_date":1645870739,"answer_id":71275813,"question_id":71273148,"body_markdown":"Use  [ViewModel][1] to solve this problem \r\n\r\nif you need a practical implementation of how to use this [here][2]\r\n\r\n\r\n\r\n  [1]: https://developer.android.com/topic/libraries/architecture/viewmodel\r\n  [2]: https://developer.android.com/codelabs/kotlin-android-training-view-model#0","title":"Android Saved Instance State Not Saving (Dual Activity)","body":"<p>Use  <a href=\"https://developer.android.com/topic/libraries/architecture/viewmodel\" rel=\"nofollow noreferrer\">ViewModel</a> to solve this problem</p>\n<p>if you need a practical implementation of how to use this <a href=\"https://developer.android.com/codelabs/kotlin-android-training-view-model#0\" rel=\"nofollow noreferrer\">here</a></p>\n"}],"owner":{"account_id":22013592,"reputation":23,"user_id":16283460,"display_name":"harleyquin"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":46,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1646082344,"creation_date":1645836337,"question_id":71273148,"body_markdown":"Hi my MainActivity and MainActivity2 are supposed to be saving the instance state, but when I rotate the device into landscape it does not save the time, the timer restarts. My app is a log in verication that displays time stamps when you click the verify button, right now I am trying to save the timer when I rotate the device, but it is not saving I will include the code below thanks. Update when I comment out onRestoreInstanceState and run the program it says that I am getting a NumberFormatException in onSaveInstanceState not sure.\r\n\r\n     E/AndroidRuntime: FATAL EXCEPTION: main\r\n        Process: com.example.security_token_app, PID: 15284\r\n        java.lang.NumberFormatException: For input string: &quot;seconds remaining: 50&quot;\r\n            at java.lang.Long.parseLong(Long.java:594)\r\n            at java.lang.Long.parseLong(Long.java:636)\r\n            at com.example.security_token_app.MainActivity.onSaveInstanceState(MainActivity.java:117)\r\n            at android.app.Activity.performSaveInstanceState(Activity.java:1609)\r\n            at android.app.Instrumentation.callActivityOnSaveInstanceState(Instrumentation.java:1447)\r\n            at android.app.ActivityThread.callActivityOnSaveInstanceState(ActivityThread.java:5071)\r\n            at android.app.ActivityThread.callActivityOnStop(ActivityThread.java:4400)\r\n            at android.app.ActivityThread.performStopActivityInner(ActivityThread.java:4364)\r\n            at android.app.ActivityThread.handleStopActivity(ActivityThread.java:4439)\r\n            at android.app.servertransaction.StopActivityItem.execute(StopActivityItem.java:41)\r\n            at android.app.servertransaction.TransactionExecutor.executeLifecycleState(TransactionExecutor.java:145)\r\n            at android.app.servertransaction.TransactionExecutor.execute(TransactionExecutor.java:70)\r\n            at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1955)\r\n            at android.os.Handler.dispatchMessage(Handler.java:106)\r\n            at android.os.Looper.loop(Looper.java:214)\r\n            at android.app.ActivityThread.main(ActivityThread.java:7078)\r\n            at java.lang.reflect.Method.invoke(Native Method)\r\n            at com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:494)\r\n            at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:964)\r\n\r\n    package com.example.security_token_app;\r\n    import androidx.annotation.NonNull;\r\n    import androidx.annotation.Nullable;\r\n    import androidx.appcompat.app.AppCompatActivity;\r\n    import android.content.Intent;\r\n    import android.content.SharedPreferences;\r\n    import android.os.Bundle;\r\n    import android.os.CountDownTimer;\r\n    import android.os.PersistableBundle;\r\n    import android.util.Log;\r\n    import android.view.View;\r\n    import android.widget.ArrayAdapter;\r\n    import android.widget.Button;\r\n    import android.widget.TextView;\r\n    import android.widget.Toast;\r\n    \r\n    import java.text.SimpleDateFormat;\r\n    import java.util.ArrayList;\r\n    import java.util.Date;\r\n    import java.util.Locale;\r\n    import java.util.Calendar;\r\n    \r\n    public class MainActivity extends AppCompatActivity\r\n    {\r\n        private static String SHARED_PREF_NAME = &quot;SharedPrefFile&quot;;\r\n        SharedPreferences sharedPreferences;\r\n        SharedPreferences.Editor editor;\r\n        private static String TIMESTAMP_KEY = &quot;TIMESTAMP_KEY&quot;;\r\n        private TextView countDownTextView;\r\n        TextView passCodeTextView;\r\n        static int passCode;\r\n        static String currentDateTime;\r\n        static ArrayList&lt;String&gt; arrayIntegerList = new ArrayList&lt;String&gt;();\r\n        Button verifyButton;\r\n    \r\n        private static String LOG_TAG = &quot;log state 1&quot;;\r\n        @Override\r\n        protected void onCreate(Bundle savedInstanceState)\r\n        {\r\n            super.onCreate(savedInstanceState);\r\n            setContentView(R.layout.activity_main);\r\n            countDownTextView = (TextView)findViewById(R.id.textView4_time_remaining);\r\n            passCodeTextView= (TextView)findViewById(R.id.textView3_passCode_int);\r\n            verifyButton = (Button)findViewById(R.id.button1);\r\n            sharedPreferences = getSharedPreferences(SHARED_PREF_NAME,MODE_PRIVATE);\r\n    \r\n            createPassCode();\r\n                new CountDownTimer(60000, 1000)\r\n                {\r\n                    @Override\r\n                    public void onTick(long timeUntillFinished)\r\n                    {\r\n                        countDownTextView.setText(&quot;seconds remaining: &quot; + timeUntillFinished / 1000 % 60);\r\n                    }\r\n    \r\n                    @Override\r\n                    public void onFinish()\r\n                    {\r\n                        createPassCode();\r\n                        start();\r\n                    }\r\n                }.start();\r\n                verifyButton.setOnClickListener(new View.OnClickListener()\r\n                {\r\n                    @Override\r\n                    public void onClick(View view)\r\n                    {\r\n                        String check = sharedPreferences.getString(TIMESTAMP_KEY, null);\r\n                        Log.i(&quot;k1&quot;,&quot;timestamp: &quot;+check);\r\n                        if(check != null)\r\n                        {\r\n                            arrayIntegerList.add(check);\r\n                            Toast.makeText(getBaseContext(), &quot;restored&quot;, Toast.LENGTH_SHORT).show();\r\n                        }\r\n                        openSecondaryActivity();\r\n                    }\r\n                });\r\n        }\r\n        public void createPassCode()\r\n        {\r\n            int minute = Calendar.getInstance().get(Calendar.MINUTE);\r\n            passCode=minute*1245 + 10000;\r\n            String timeStamp = getTimeStamp();\r\n            arrayIntegerList.add(timeStamp);\r\n            String passCodeStr = Integer.toString(passCode);\r\n            passCodeTextView.setText(passCodeStr);\r\n        }\r\n    \r\n        public void openSecondaryActivity()\r\n        {\r\n            Intent intent = new Intent(this, MainActivity2.class);\r\n            intent.putExtra(&quot;timestamp_list&quot;, arrayIntegerList);\r\n            startActivity(intent);\r\n        }\r\n    \r\n        public static int getPassCode()\r\n        {\r\n            return passCode;\r\n        }\r\n    \r\n        public static String getTimeStamp()\r\n        {\r\n            SimpleDateFormat dateFormat = new SimpleDateFormat(&quot;yyyy-MM-dd HH:mm:ss&quot;);\r\n            currentDateTime = dateFormat.format(new Date());\r\n            return currentDateTime;\r\n        }\r\n    \r\n    @Override\r\n    public void onSaveInstanceState(@NonNull Bundle outState)\r\n    {\r\n        super.onSaveInstanceState(outState);\r\n        TextView textView = (TextView) findViewById(R.id.textView4_time_remaining);\r\n        long savedData = Long.parseLong(textView.getText().toString());\r\n        outState.putLong(&quot;outStateKey&quot;, savedData);\r\n\r\n    }\r\n    @Override\r\n    protected void onRestoreInstanceState(@NonNull Bundle savedInstanceState)\r\n    {\r\n        super.onRestoreInstanceState(savedInstanceState);\r\n        long storedData = savedInstanceState.getLong(&quot;outStateKey&quot;);\r\n        TextView textView = (TextView)findViewById(R.id.textView4_time_remaining);\r\n        textView.setText(Long.toString(storedData));\r\n    }\r\n    \r\n    }\r\n    \r\n    package com.example.security_token_app;\r\n    import androidx.appcompat.app.AppCompatActivity;\r\n    import android.content.SharedPreferences;\r\n    import android.os.Bundle;\r\n    import android.preference.PreferenceManager;\r\n    import android.util.Log;\r\n    import android.view.View;\r\n    import android.widget.ArrayAdapter;\r\n    import android.widget.Button;\r\n    import android.widget.ListView;\r\n    import android.widget.Toast;\r\n    import java.util.ArrayList;\r\n    \r\n    public class MainActivity2 extends AppCompatActivity\r\n    {\r\n        SharedPreferences sharedPreferences;\r\n        private static String SHARED_PREF_NAME = &quot;SharedPrefFile&quot;;\r\n        private static String TIMESTAMP_KEY = &quot;TIMESTAMP_KEY&quot;;\r\n        ArrayList&lt;String&gt; arrayList = new ArrayList&lt;String&gt;();\r\n        ListView listView;\r\n        Button clearButton;\r\n        int count;\r\n        String item;\r\n        static ArrayAdapter&lt;String&gt; adapter;\r\n        static boolean isSaved = false;\r\n    \r\n        @Override\r\n        protected void onCreate(Bundle savedInstanceState)\r\n        {\r\n            super.onCreate(savedInstanceState);\r\n            setContentView(R.layout.activity_main2);\r\n            listView = (ListView) findViewById(R.id.listView1);\r\n            clearButton = (Button) findViewById(R.id.passButton);\r\n            sharedPreferences = getSharedPreferences(SHARED_PREF_NAME,MODE_PRIVATE);\r\n    \r\n            ArrayList&lt;String&gt; timestampList = (ArrayList&lt;String&gt;)getIntent().getSerializableExtra(&quot;timestamp_list&quot;);\r\n            adapter = new ArrayAdapter&lt;String&gt;(this, android.R.layout.simple_list_item_1, timestampList);\r\n            listView.setAdapter(adapter);\r\n    \r\n            clearButton.setOnClickListener(new View.OnClickListener()\r\n            {\r\n                @Override\r\n                public void onClick(View view)\r\n                {\r\n                    count = adapter.getCount();\r\n                    String checkFirstPass = sharedPreferences.getString(TIMESTAMP_KEY,null);\r\n                    Log.i(&quot;k2&quot;,&quot;timestamp: &quot;+checkFirstPass);\r\n                    if(checkFirstPass==null)\r\n                    {\r\n                        item = adapter.getItem(count - 1);\r\n                    }\r\n                    else if(checkFirstPass!=null)\r\n                    {\r\n                        item = adapter.getItem(count-2);\r\n                    }\r\n                    adapter.clear();\r\n                    adapter.add(item);\r\n                    saveTimeStamp(item);\r\n                }\r\n            });\r\n        }\r\n    \r\n        public void saveTimeStamp(String lastItem)\r\n        {\r\n            if(!lastItem.isEmpty())\r\n            {\r\n                sharedPreferences = getSharedPreferences(SHARED_PREF_NAME,MODE_PRIVATE);\r\n                SharedPreferences.Editor editor = sharedPreferences.edit();\r\n                editor.putString(TIMESTAMP_KEY, lastItem);\r\n                editor.apply();\r\n                Toast.makeText(getBaseContext(), &quot;time stamp saved&quot;, Toast.LENGTH_SHORT).show();\r\n            }\r\n            else\r\n            {\r\n                Toast.makeText(getBaseContext(), &quot;nothing saved&quot;, Toast.LENGTH_SHORT).show();\r\n            }\r\n        }\r\n    }\r\n    \r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n    &lt;androidx.constraintlayout.widget.ConstraintLayout\r\n        xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n        xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\r\n        xmlns:tools=&quot;http://schemas.android.com/tools&quot;\r\n        android:id=&quot;@+id/root_constraint_layout&quot;\r\n        android:layout_width=&quot;match_parent&quot;\r\n        android:layout_height=&quot;match_parent&quot;\r\n        tools:context=&quot;.MainActivity&quot;&gt;\r\n    \r\n        &lt;LinearLayout\r\n            android:id=&quot;@+id/linear_layout1&quot;\r\n            android:layout_width=&quot;match_parent&quot;\r\n            android:layout_height=&quot;match_parent&quot;\r\n            android:orientation=&quot;vertical&quot;\r\n            tools:layout=&quot;@layout/activity_main&quot;&gt;\r\n    \r\n            &lt;TextView\r\n                android:id=&quot;@+id/textView1_blueBox&quot;\r\n                android:layout_width=&quot;match_parent&quot;\r\n                android:layout_height=&quot;0dp&quot;\r\n                android:layout_gravity=&quot;center&quot;\r\n                android:layout_weight=&quot;0.25&quot;\r\n                android:background=&quot;@color/sky_blue&quot;\r\n                android:text=&quot;test&quot; /&gt;\r\n    \r\n            &lt;TextView\r\n                android:id=&quot;@+id/textView2_passCode_string&quot;\r\n                android:layout_width=&quot;match_parent&quot;\r\n                android:layout_height=&quot;0dp&quot;\r\n                android:layout_weight=&quot;0.5&quot;\r\n                android:textAlignment=&quot;center&quot;\r\n                android:text=&quot;PASS CODE&quot;\r\n                android:textStyle=&quot;bold&quot;\r\n                android:textSize=&quot;38sp&quot;/&gt;\r\n    \r\n            &lt;TextView\r\n                android:id=&quot;@+id/textView3_passCode_int&quot;\r\n                android:layout_width=&quot;match_parent&quot;\r\n                android:layout_height=&quot;0dp&quot;\r\n                android:layout_weight=&quot;0.5&quot;\r\n                android:textAlignment=&quot;center&quot;\r\n                android:textSize=&quot;38sp&quot;\r\n                android:textStyle=&quot;bold&quot;\r\n                android:text=&quot;test&quot; /&gt;\r\n    \r\n            &lt;TextView\r\n                android:id=&quot;@+id/textView4_time_remaining&quot;\r\n                android:layout_width=&quot;match_parent&quot;\r\n                android:layout_height=&quot;0dp&quot;\r\n                android:layout_weight=&quot;0.5&quot;\r\n                android:textAlignment=&quot;center&quot;\r\n                android:textSize=&quot;24sp&quot;\r\n                tools:text=&quot;1:00 seconds remaining&quot;/&gt;\r\n    \r\n            &lt;Button\r\n                android:id=&quot;@+id/button1&quot;\r\n                android:layout_height=&quot;wrap_content&quot;\r\n                android:layout_width=&quot;wrap_content&quot;\r\n                android:layout_gravity=&quot;center&quot;\r\n                android:text=&quot;Verify&quot;\r\n                android:textStyle=&quot;bold&quot;\r\n                /&gt;\r\n    \r\n    \r\n    \r\n    \r\n        &lt;/LinearLayout&gt;\r\n    &lt;/androidx.constraintlayout.widget.ConstraintLayout&gt;\r\n    \r\n    \r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n    &lt;androidx.constraintlayout.widget.ConstraintLayout\r\n        xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n        xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\r\n        xmlns:tools=&quot;http://schemas.android.com/tools&quot;\r\n        android:layout_width=&quot;match_parent&quot;\r\n        android:layout_height=&quot;match_parent&quot;\r\n        tools:context=&quot;.MainActivity2&quot;&gt;\r\n    \r\n        &lt;LinearLayout\r\n            android:id=&quot;@+id/linear_layout1&quot;\r\n            android:layout_width =&quot;match_parent&quot;\r\n            android:layout_height =&quot;match_parent&quot;\r\n            android:orientation=&quot;vertical&quot;\r\n            tools:layout=&quot;@layout/activity_main&quot;&gt;\r\n    \r\n            &lt;TextView\r\n                android:id=&quot;@+id/textView1_blueBox&quot;\r\n                android:layout_width=&quot;match_parent&quot;\r\n                android:layout_height=&quot;0dp&quot;\r\n                android:layout_gravity=&quot;center&quot;\r\n                android:layout_weight=&quot;0.25&quot;\r\n                android:background=&quot;@color/sky_blue&quot; /&gt;\r\n    \r\n            &lt;ListView\r\n                android:id=&quot;@+id/listView1&quot;\r\n                android:layout_width=&quot;match_parent&quot;\r\n                android:layout_height=&quot;0dp&quot;\r\n                android:layout_weight=&quot;1&quot;\r\n                android:textStyle=&quot;bold&quot;\r\n                android:dividerHeight=&quot;32dp&quot;\r\n                /&gt;\r\n    \r\n            &lt;Button\r\n                android:id=&quot;@+id/passButton&quot;\r\n                android:layout_height=&quot;wrap_content&quot;\r\n                android:layout_width=&quot;wrap_content&quot;\r\n                android:layout_gravity=&quot;center&quot;\r\n                android:text=&quot;PASS&quot;\r\n                android:textStyle=&quot;bold&quot;\r\n                /&gt;\r\n    \r\n    \r\n    \r\n    \r\n    \r\n    \r\n    \r\n    \r\n    \r\n        &lt;/LinearLayout&gt;\r\n    \r\n    \r\n    &lt;/androidx.constraintlayout.widget.ConstraintLayout&gt;\r\n\r\n\r\n\r\n","title":"Android Saved Instance State Not Saving (Dual Activity)","body":"<p>Hi my MainActivity and MainActivity2 are supposed to be saving the instance state, but when I rotate the device into landscape it does not save the time, the timer restarts. My app is a log in verication that displays time stamps when you click the verify button, right now I am trying to save the timer when I rotate the device, but it is not saving I will include the code below thanks. Update when I comment out onRestoreInstanceState and run the program it says that I am getting a NumberFormatException in onSaveInstanceState not sure.</p>\n<pre><code> E/AndroidRuntime: FATAL EXCEPTION: main\n    Process: com.example.security_token_app, PID: 15284\n    java.lang.NumberFormatException: For input string: &quot;seconds remaining: 50&quot;\n        at java.lang.Long.parseLong(Long.java:594)\n        at java.lang.Long.parseLong(Long.java:636)\n        at com.example.security_token_app.MainActivity.onSaveInstanceState(MainActivity.java:117)\n        at android.app.Activity.performSaveInstanceState(Activity.java:1609)\n        at android.app.Instrumentation.callActivityOnSaveInstanceState(Instrumentation.java:1447)\n        at android.app.ActivityThread.callActivityOnSaveInstanceState(ActivityThread.java:5071)\n        at android.app.ActivityThread.callActivityOnStop(ActivityThread.java:4400)\n        at android.app.ActivityThread.performStopActivityInner(ActivityThread.java:4364)\n        at android.app.ActivityThread.handleStopActivity(ActivityThread.java:4439)\n        at android.app.servertransaction.StopActivityItem.execute(StopActivityItem.java:41)\n        at android.app.servertransaction.TransactionExecutor.executeLifecycleState(TransactionExecutor.java:145)\n        at android.app.servertransaction.TransactionExecutor.execute(TransactionExecutor.java:70)\n        at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1955)\n        at android.os.Handler.dispatchMessage(Handler.java:106)\n        at android.os.Looper.loop(Looper.java:214)\n        at android.app.ActivityThread.main(ActivityThread.java:7078)\n        at java.lang.reflect.Method.invoke(Native Method)\n        at com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:494)\n        at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:964)\n\npackage com.example.security_token_app;\nimport androidx.annotation.NonNull;\nimport androidx.annotation.Nullable;\nimport androidx.appcompat.app.AppCompatActivity;\nimport android.content.Intent;\nimport android.content.SharedPreferences;\nimport android.os.Bundle;\nimport android.os.CountDownTimer;\nimport android.os.PersistableBundle;\nimport android.util.Log;\nimport android.view.View;\nimport android.widget.ArrayAdapter;\nimport android.widget.Button;\nimport android.widget.TextView;\nimport android.widget.Toast;\n\nimport java.text.SimpleDateFormat;\nimport java.util.ArrayList;\nimport java.util.Date;\nimport java.util.Locale;\nimport java.util.Calendar;\n\npublic class MainActivity extends AppCompatActivity\n{\n    private static String SHARED_PREF_NAME = &quot;SharedPrefFile&quot;;\n    SharedPreferences sharedPreferences;\n    SharedPreferences.Editor editor;\n    private static String TIMESTAMP_KEY = &quot;TIMESTAMP_KEY&quot;;\n    private TextView countDownTextView;\n    TextView passCodeTextView;\n    static int passCode;\n    static String currentDateTime;\n    static ArrayList&lt;String&gt; arrayIntegerList = new ArrayList&lt;String&gt;();\n    Button verifyButton;\n\n    private static String LOG_TAG = &quot;log state 1&quot;;\n    @Override\n    protected void onCreate(Bundle savedInstanceState)\n    {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_main);\n        countDownTextView = (TextView)findViewById(R.id.textView4_time_remaining);\n        passCodeTextView= (TextView)findViewById(R.id.textView3_passCode_int);\n        verifyButton = (Button)findViewById(R.id.button1);\n        sharedPreferences = getSharedPreferences(SHARED_PREF_NAME,MODE_PRIVATE);\n\n        createPassCode();\n            new CountDownTimer(60000, 1000)\n            {\n                @Override\n                public void onTick(long timeUntillFinished)\n                {\n                    countDownTextView.setText(&quot;seconds remaining: &quot; + timeUntillFinished / 1000 % 60);\n                }\n\n                @Override\n                public void onFinish()\n                {\n                    createPassCode();\n                    start();\n                }\n            }.start();\n            verifyButton.setOnClickListener(new View.OnClickListener()\n            {\n                @Override\n                public void onClick(View view)\n                {\n                    String check = sharedPreferences.getString(TIMESTAMP_KEY, null);\n                    Log.i(&quot;k1&quot;,&quot;timestamp: &quot;+check);\n                    if(check != null)\n                    {\n                        arrayIntegerList.add(check);\n                        Toast.makeText(getBaseContext(), &quot;restored&quot;, Toast.LENGTH_SHORT).show();\n                    }\n                    openSecondaryActivity();\n                }\n            });\n    }\n    public void createPassCode()\n    {\n        int minute = Calendar.getInstance().get(Calendar.MINUTE);\n        passCode=minute*1245 + 10000;\n        String timeStamp = getTimeStamp();\n        arrayIntegerList.add(timeStamp);\n        String passCodeStr = Integer.toString(passCode);\n        passCodeTextView.setText(passCodeStr);\n    }\n\n    public void openSecondaryActivity()\n    {\n        Intent intent = new Intent(this, MainActivity2.class);\n        intent.putExtra(&quot;timestamp_list&quot;, arrayIntegerList);\n        startActivity(intent);\n    }\n\n    public static int getPassCode()\n    {\n        return passCode;\n    }\n\n    public static String getTimeStamp()\n    {\n        SimpleDateFormat dateFormat = new SimpleDateFormat(&quot;yyyy-MM-dd HH:mm:ss&quot;);\n        currentDateTime = dateFormat.format(new Date());\n        return currentDateTime;\n    }\n\n@Override\npublic void onSaveInstanceState(@NonNull Bundle outState)\n{\n    super.onSaveInstanceState(outState);\n    TextView textView = (TextView) findViewById(R.id.textView4_time_remaining);\n    long savedData = Long.parseLong(textView.getText().toString());\n    outState.putLong(&quot;outStateKey&quot;, savedData);\n\n}\n@Override\nprotected void onRestoreInstanceState(@NonNull Bundle savedInstanceState)\n{\n    super.onRestoreInstanceState(savedInstanceState);\n    long storedData = savedInstanceState.getLong(&quot;outStateKey&quot;);\n    TextView textView = (TextView)findViewById(R.id.textView4_time_remaining);\n    textView.setText(Long.toString(storedData));\n}\n\n}\n\npackage com.example.security_token_app;\nimport androidx.appcompat.app.AppCompatActivity;\nimport android.content.SharedPreferences;\nimport android.os.Bundle;\nimport android.preference.PreferenceManager;\nimport android.util.Log;\nimport android.view.View;\nimport android.widget.ArrayAdapter;\nimport android.widget.Button;\nimport android.widget.ListView;\nimport android.widget.Toast;\nimport java.util.ArrayList;\n\npublic class MainActivity2 extends AppCompatActivity\n{\n    SharedPreferences sharedPreferences;\n    private static String SHARED_PREF_NAME = &quot;SharedPrefFile&quot;;\n    private static String TIMESTAMP_KEY = &quot;TIMESTAMP_KEY&quot;;\n    ArrayList&lt;String&gt; arrayList = new ArrayList&lt;String&gt;();\n    ListView listView;\n    Button clearButton;\n    int count;\n    String item;\n    static ArrayAdapter&lt;String&gt; adapter;\n    static boolean isSaved = false;\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState)\n    {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_main2);\n        listView = (ListView) findViewById(R.id.listView1);\n        clearButton = (Button) findViewById(R.id.passButton);\n        sharedPreferences = getSharedPreferences(SHARED_PREF_NAME,MODE_PRIVATE);\n\n        ArrayList&lt;String&gt; timestampList = (ArrayList&lt;String&gt;)getIntent().getSerializableExtra(&quot;timestamp_list&quot;);\n        adapter = new ArrayAdapter&lt;String&gt;(this, android.R.layout.simple_list_item_1, timestampList);\n        listView.setAdapter(adapter);\n\n        clearButton.setOnClickListener(new View.OnClickListener()\n        {\n            @Override\n            public void onClick(View view)\n            {\n                count = adapter.getCount();\n                String checkFirstPass = sharedPreferences.getString(TIMESTAMP_KEY,null);\n                Log.i(&quot;k2&quot;,&quot;timestamp: &quot;+checkFirstPass);\n                if(checkFirstPass==null)\n                {\n                    item = adapter.getItem(count - 1);\n                }\n                else if(checkFirstPass!=null)\n                {\n                    item = adapter.getItem(count-2);\n                }\n                adapter.clear();\n                adapter.add(item);\n                saveTimeStamp(item);\n            }\n        });\n    }\n\n    public void saveTimeStamp(String lastItem)\n    {\n        if(!lastItem.isEmpty())\n        {\n            sharedPreferences = getSharedPreferences(SHARED_PREF_NAME,MODE_PRIVATE);\n            SharedPreferences.Editor editor = sharedPreferences.edit();\n            editor.putString(TIMESTAMP_KEY, lastItem);\n            editor.apply();\n            Toast.makeText(getBaseContext(), &quot;time stamp saved&quot;, Toast.LENGTH_SHORT).show();\n        }\n        else\n        {\n            Toast.makeText(getBaseContext(), &quot;nothing saved&quot;, Toast.LENGTH_SHORT).show();\n        }\n    }\n}\n\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n&lt;androidx.constraintlayout.widget.ConstraintLayout\n    xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n    xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;\n    android:id=&quot;@+id/root_constraint_layout&quot;\n    android:layout_width=&quot;match_parent&quot;\n    android:layout_height=&quot;match_parent&quot;\n    tools:context=&quot;.MainActivity&quot;&gt;\n\n    &lt;LinearLayout\n        android:id=&quot;@+id/linear_layout1&quot;\n        android:layout_width=&quot;match_parent&quot;\n        android:layout_height=&quot;match_parent&quot;\n        android:orientation=&quot;vertical&quot;\n        tools:layout=&quot;@layout/activity_main&quot;&gt;\n\n        &lt;TextView\n            android:id=&quot;@+id/textView1_blueBox&quot;\n            android:layout_width=&quot;match_parent&quot;\n            android:layout_height=&quot;0dp&quot;\n            android:layout_gravity=&quot;center&quot;\n            android:layout_weight=&quot;0.25&quot;\n            android:background=&quot;@color/sky_blue&quot;\n            android:text=&quot;test&quot; /&gt;\n\n        &lt;TextView\n            android:id=&quot;@+id/textView2_passCode_string&quot;\n            android:layout_width=&quot;match_parent&quot;\n            android:layout_height=&quot;0dp&quot;\n            android:layout_weight=&quot;0.5&quot;\n            android:textAlignment=&quot;center&quot;\n            android:text=&quot;PASS CODE&quot;\n            android:textStyle=&quot;bold&quot;\n            android:textSize=&quot;38sp&quot;/&gt;\n\n        &lt;TextView\n            android:id=&quot;@+id/textView3_passCode_int&quot;\n            android:layout_width=&quot;match_parent&quot;\n            android:layout_height=&quot;0dp&quot;\n            android:layout_weight=&quot;0.5&quot;\n            android:textAlignment=&quot;center&quot;\n            android:textSize=&quot;38sp&quot;\n            android:textStyle=&quot;bold&quot;\n            android:text=&quot;test&quot; /&gt;\n\n        &lt;TextView\n            android:id=&quot;@+id/textView4_time_remaining&quot;\n            android:layout_width=&quot;match_parent&quot;\n            android:layout_height=&quot;0dp&quot;\n            android:layout_weight=&quot;0.5&quot;\n            android:textAlignment=&quot;center&quot;\n            android:textSize=&quot;24sp&quot;\n            tools:text=&quot;1:00 seconds remaining&quot;/&gt;\n\n        &lt;Button\n            android:id=&quot;@+id/button1&quot;\n            android:layout_height=&quot;wrap_content&quot;\n            android:layout_width=&quot;wrap_content&quot;\n            android:layout_gravity=&quot;center&quot;\n            android:text=&quot;Verify&quot;\n            android:textStyle=&quot;bold&quot;\n            /&gt;\n\n\n\n\n    &lt;/LinearLayout&gt;\n&lt;/androidx.constraintlayout.widget.ConstraintLayout&gt;\n\n\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n&lt;androidx.constraintlayout.widget.ConstraintLayout\n    xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n    xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;\n    android:layout_width=&quot;match_parent&quot;\n    android:layout_height=&quot;match_parent&quot;\n    tools:context=&quot;.MainActivity2&quot;&gt;\n\n    &lt;LinearLayout\n        android:id=&quot;@+id/linear_layout1&quot;\n        android:layout_width =&quot;match_parent&quot;\n        android:layout_height =&quot;match_parent&quot;\n        android:orientation=&quot;vertical&quot;\n        tools:layout=&quot;@layout/activity_main&quot;&gt;\n\n        &lt;TextView\n            android:id=&quot;@+id/textView1_blueBox&quot;\n            android:layout_width=&quot;match_parent&quot;\n            android:layout_height=&quot;0dp&quot;\n            android:layout_gravity=&quot;center&quot;\n            android:layout_weight=&quot;0.25&quot;\n            android:background=&quot;@color/sky_blue&quot; /&gt;\n\n        &lt;ListView\n            android:id=&quot;@+id/listView1&quot;\n            android:layout_width=&quot;match_parent&quot;\n            android:layout_height=&quot;0dp&quot;\n            android:layout_weight=&quot;1&quot;\n            android:textStyle=&quot;bold&quot;\n            android:dividerHeight=&quot;32dp&quot;\n            /&gt;\n\n        &lt;Button\n            android:id=&quot;@+id/passButton&quot;\n            android:layout_height=&quot;wrap_content&quot;\n            android:layout_width=&quot;wrap_content&quot;\n            android:layout_gravity=&quot;center&quot;\n            android:text=&quot;PASS&quot;\n            android:textStyle=&quot;bold&quot;\n            /&gt;\n\n\n\n\n\n\n\n\n\n    &lt;/LinearLayout&gt;\n\n\n&lt;/androidx.constraintlayout.widget.ConstraintLayout&gt;\n</code></pre>\n"},{"tags":["java","email","smtp","jakarta-mail"],"comments":[{"owner":{"account_id":9760,"reputation":85859,"user_id":18157,"accept_rate":100,"display_name":"Jim Garrison"},"score":0,"creation_date":1645840013,"post_id":71272796,"comment_id":125984139,"body_markdown":"_&quot;The code is equivalent to:&quot;_ -- what exactly does that mean?  This is the code you that fails, or something else?  Please [edit] the question and post the actual code that failed.","body":"<i>&quot;The code is equivalent to:&quot;</i> -- what exactly does that mean?  This is the code you that fails, or something else?  Please <a href=\"https://stackoverflow.com/posts/71272796/edit\">edit</a> the question and post the actual code that failed."},{"owner":{"account_id":10218007,"reputation":676,"user_id":7543069,"display_name":"Exalted Toast"},"score":0,"creation_date":1645848341,"post_id":71272796,"comment_id":125985008,"body_markdown":"Edited to remove the qualifier; the original code pulls values from a config file and I just injected them directly for the question.","body":"Edited to remove the qualifier; the original code pulls values from a config file and I just injected them directly for the question."}],"answers":[{"tags":[],"owner":{"account_id":10218007,"reputation":676,"user_id":7543069,"display_name":"Exalted Toast"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1646081691,"creation_date":1646081691,"answer_id":71300949,"question_id":71272796,"body_markdown":"Answering my own question:\r\n\r\nJavaMail (Maven package `javax.mail/javax.mail-api`) was moved to Jakarta Mail (`com.sun.mail/jakarta.mail`). I&#39;m not really sure what&#39;s wrong with the old package, but once I updated the appropriate maven dependency from\r\n\r\n```xml\r\n&lt;dependency&gt;\r\n    &lt;groupId&gt;javax.mail&lt;/groupId&gt;\r\n    &lt;artifactId&gt;javax.mail-api&lt;/artifactId&gt;\r\n    &lt;version&gt;1.6.2&lt;/version&gt;\r\n&lt;/dependency&gt;\r\n```\r\n\r\nto\r\n\r\n```xml\r\n&lt;dependency&gt;\r\n    &lt;groupId&gt;com.sun.mail&lt;/groupId&gt;\r\n    &lt;artifactId&gt;jakarta.mail&lt;/artifactId&gt;\r\n    &lt;version&gt;1.6.4&lt;/version&gt;\r\n&lt;/dependency&gt;\r\n```\r\n\r\nThe issue resolved itself with no further code changes needed.","title":"JavaMail sends no content with SMTP, sends &quot;QUIT&quot; and hangs","body":"<p>Answering my own question:</p>\n<p>JavaMail (Maven package <code>javax.mail/javax.mail-api</code>) was moved to Jakarta Mail (<code>com.sun.mail/jakarta.mail</code>). I'm not really sure what's wrong with the old package, but once I updated the appropriate maven dependency from</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;dependency&gt;\n    &lt;groupId&gt;javax.mail&lt;/groupId&gt;\n    &lt;artifactId&gt;javax.mail-api&lt;/artifactId&gt;\n    &lt;version&gt;1.6.2&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>to</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;dependency&gt;\n    &lt;groupId&gt;com.sun.mail&lt;/groupId&gt;\n    &lt;artifactId&gt;jakarta.mail&lt;/artifactId&gt;\n    &lt;version&gt;1.6.4&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>The issue resolved itself with no further code changes needed.</p>\n"}],"owner":{"account_id":10218007,"reputation":676,"user_id":7543069,"display_name":"Exalted Toast"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":784,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":71300949,"answer_count":1,"score":0,"last_activity_date":1646081691,"creation_date":1645832051,"question_id":71272796,"body_markdown":"I&#39;m trying to use [JavaMail 1.6](https://javaee.github.io/javamail/) to send an email to a local [MailHog](https://github.com/mailhog/MailHog) SMTP server in Java 8. The code is:\r\n\r\n```java\r\n// import javax.mail.*;\r\n// import javax.mail.internet.*;\r\n// import javax.mail.internet.MimeMessage.RecipientType;\r\n\r\nString from = &quot;test_sender@gmail.com&quot;;\r\nString to = &quot;test_receiver@gmail.com&quot;;\r\nString subject = &quot;Sample subject&quot;;\r\nString body = &quot;Test message, please ignore&quot;;\r\n\r\nProperties props = System.getProperties();\r\nprops.setProperty(&quot;mail.smtp.host&quot;, &quot;localhost&quot;);\r\nprops.setProperty(&quot;mail.smtp.port&quot;, &quot;1025&quot;);\r\n\r\nSession session = Session.getInstance(props);\r\nsession.setDebug(true);\r\nMimeMessage message = new MimeMessage(session);\r\n\r\nmessage.setFrom(new InternetAddress(from));\r\nmessage.addRecipient(RecipientType.TO, new InternetAddress(to));\r\nmessage.setSubject(subject);\r\nmessage.setText(body);\r\n\r\nTransport.send(message);\r\n```\r\n\r\nWhen the code is ran, it will start and establish a session with the server, and step through SMTP until it&#39;s supposed to send data. After this, it sends `QUIT\\r\\n` and hangs, not sending any content.\r\n\r\nMailHog logs:\r\n\r\n```\r\n2022/02/25 16:18:18 [SMTP 127.0.0.1:58831] Starting session\r\n2022/02/25 16:18:18 [SMTP 127.0.0.1:58831] [PROTO: INVALID] Started session, switching to ESTABLISH state\r\n2022/02/25 16:18:18 [SMTP 127.0.0.1:58831] Sent 35 bytes: &#39;220 mailhog.example ESMTP MailHog\\r\\n&#39;\r\n2022/02/25 16:18:18 [SMTP 127.0.0.1:58831] Received 26 bytes: &#39;EHLO DEVICE.local\\r\\n&#39;\r\n2022/02/25 16:18:18 [SMTP 127.0.0.1:58831] [PROTO: ESTABLISH] Processing line: EHLO DEVICE.local\r\n2022/02/25 16:18:18 [SMTP 127.0.0.1:58831] [PROTO: ESTABLISH] In state 1, got command &#39;EHLO&#39;, args &#39;DEVICE.local&#39;\r\n2022/02/25 16:18:18 [SMTP 127.0.0.1:58831] [PROTO: ESTABLISH] In ESTABLISH state\r\n2022/02/25 16:18:18 [SMTP 127.0.0.1:58831] [PROTO: ESTABLISH] Got EHLO command, switching to MAIL state\r\n2022/02/25 16:18:18 [SMTP 127.0.0.1:58831] Sent 31 bytes: &#39;250-Hello DEVICE.local\\r\\n&#39;\r\n2022/02/25 16:18:18 [SMTP 127.0.0.1:58831] Sent 16 bytes: &#39;250-PIPELINING\\r\\n&#39;\r\n2022/02/25 16:18:18 [SMTP 127.0.0.1:58831] Sent 16 bytes: &#39;250 AUTH PLAIN\\r\\n&#39;\r\n2022/02/25 16:18:18 [SMTP 127.0.0.1:58831] Received 37 bytes: &#39;MAIL FROM:&lt;sample_sender@gmail.com&gt;\\r\\n&#39;\r\n2022/02/25 16:18:18 [SMTP 127.0.0.1:58831] [PROTO: MAIL] Processing line: MAIL FROM:&lt;sample_sender@gmail.com&gt;\r\n2022/02/25 16:18:18 [SMTP 127.0.0.1:58831] [PROTO: MAIL] In state 6, got command &#39;MAIL&#39;, args &#39;FROM:&lt;sample_sender@gmail.com&gt;&#39;\r\n2022/02/25 16:18:18 [SMTP 127.0.0.1:58831] [PROTO: MAIL] In MAIL state\r\n2022/02/25 16:18:18 [SMTP 127.0.0.1:58831] [PROTO: MAIL] Got MAIL command, switching to RCPT state\r\n2022/02/25 16:18:18 [SMTP 127.0.0.1:58831] Sent 39 bytes: &#39;250 Sender sample_sender@gmail.com ok\\r\\n&#39;\r\n2022/02/25 16:18:18 [SMTP 127.0.0.1:58831] Received 37 bytes: &#39;RCPT TO:&lt;sample_receiver@gmail.com&gt;\\r\\n&#39;\r\n2022/02/25 16:18:18 [SMTP 127.0.0.1:58831] [PROTO: RCPT] Processing line: RCPT TO:&lt;sample_receiver@gmail.com&gt;\r\n2022/02/25 16:18:18 [SMTP 127.0.0.1:58831] [PROTO: RCPT] In state 7, got command &#39;RCPT&#39;, args &#39;TO:&lt;sample_receiver@gmail.com&gt;&#39;\r\n2022/02/25 16:18:18 [SMTP 127.0.0.1:58831] [PROTO: RCPT] In RCPT state\r\n2022/02/25 16:18:18 [SMTP 127.0.0.1:58831] [PROTO: RCPT] Got RCPT command\r\n2022/02/25 16:18:18 [SMTP 127.0.0.1:58831] Sent 44 bytes: &#39;250 Recipient sample_receiver@gmail.com ok\\r\\n&#39;\r\n2022/02/25 16:18:18 [SMTP 127.0.0.1:58831] Received 6 bytes: &#39;DATA\\r\\n&#39;\r\n2022/02/25 16:18:18 [SMTP 127.0.0.1:58831] [PROTO: RCPT] Processing line: DATA\r\n2022/02/25 16:18:18 [SMTP 127.0.0.1:58831] [PROTO: RCPT] In state 7, got command &#39;DATA&#39;, args &#39;&#39;\r\n2022/02/25 16:18:18 [SMTP 127.0.0.1:58831] [PROTO: RCPT] In RCPT state\r\n2022/02/25 16:18:18 [SMTP 127.0.0.1:58831] [PROTO: RCPT] Got DATA command, switching to DATA state\r\n2022/02/25 16:18:18 [SMTP 127.0.0.1:58831] Sent 37 bytes: &#39;354 End data with &lt;CR&gt;&lt;LF&gt;.&lt;CR&gt;&lt;LF&gt;\\r\\n&#39;\r\n2022/02/25 16:18:18 [SMTP 127.0.0.1:58831] Received 6 bytes: &#39;QUIT\\r\\n&#39;\r\n```\r\n\r\nJava output:\r\n\r\n```\r\nDEBUG: setDebug: JavaMail version 1.6.2\r\nDEBUG: successfully loaded resource: /META-INF/javamail.default.providers\r\nDEBUG: Tables of loaded providers from javamail.providers\r\nDEBUG: Providers Listed By Class Name: {com.sun.mail.smtp.SMTPTransport=javax.mail.Provider[TRANSPORT,smtp,com.sun.mail.smtp.SMTPTransport,Oracle], com.sun.mail.imap.IMAPSSLStore=javax.mail.Provider[STORE,imaps,com.sun.mail.imap.IMAPSSLStore,Oracle], com.sun.mail.pop3.POP3Store=javax.mail.Provider[STORE,pop3,com.sun.mail.pop3.POP3Store,Oracle], com.sun.mail.smtp.SMTPSSLTransport=javax.mail.Provider[TRANSPORT,smtps,com.sun.mail.smtp.SMTPSSLTransport,Oracle], com.sun.mail.imap.IMAPStore=javax.mail.Provider[STORE,imap,com.sun.mail.imap.IMAPStore,Oracle], com.sun.mail.pop3.POP3SSLStore=javax.mail.Provider[STORE,pop3s,com.sun.mail.pop3.POP3SSLStore,Oracle]}\r\nDEBUG: Providers Listed By Protocol: {imap=javax.mail.Provider[STORE,imap,com.sun.mail.imap.IMAPStore,Oracle], smtp=javax.mail.Provider[TRANSPORT,smtp,com.sun.mail.smtp.SMTPTransport,Oracle], pop3=javax.mail.Provider[STORE,pop3,com.sun.mail.pop3.POP3Store,Oracle], imaps=javax.mail.Provider[STORE,imaps,com.sun.mail.imap.IMAPSSLStore,Oracle], smtps=javax.mail.Provider[TRANSPORT,smtps,com.sun.mail.smtp.SMTPSSLTransport,Oracle], pop3s=javax.mail.Provider[STORE,pop3s,com.sun.mail.pop3.POP3SSLStore,Oracle]}\r\nDEBUG: getProvider() returning javax.mail.Provider[TRANSPORT,smtp,com.sun.mail.smtp.SMTPTransport,Oracle]\r\nDEBUG SMTP: useEhlo true, useAuth false\r\nDEBUG SMTP: trying to connect to host &quot;localhost&quot;, port 1025, isSSL false\r\n220 mailhog.example ESMTP MailHog\r\nDEBUG SMTP: connected to host &quot;localhost&quot;, port: 1025\r\n\r\nEHLO DEVICE.local\r\n250-Hello DEVICE.local\r\n250-PIPELINING\r\n250 AUTH PLAIN\r\nDEBUG SMTP: Found extension &quot;PIPELINING&quot;, arg &quot;&quot;\r\nDEBUG SMTP: Found extension &quot;AUTH&quot;, arg &quot;PLAIN&quot;\r\nDEBUG SMTP: use8bit false\r\nMAIL FROM:&lt;sample_sender@gmail.com&gt;\r\n250 Sender sample_sender@gmail.com ok\r\nRCPT TO:&lt;sample_receiver@gmail.com&gt;\r\n250 Recipient sample_receiver@gmail.com ok\r\nDEBUG SMTP: Verified Addresses\r\nDEBUG SMTP:   sample_receiver@gmail.com\r\nDATA\r\n354 End data with &lt;CR&gt;&lt;LF&gt;.&lt;CR&gt;&lt;LF&gt;\r\nQUIT\r\n```\r\n\r\nLooking around, I can find a few references of JavaMail hanging while sending mail, but none of them seem to hang at this part of the session. It seems like it should be a misconfiguration related to `message.setText`. However, I get the same behavior when using `message.setContent(body, &quot;text/plain&quot;)`, using `MimeMultipart` and adding a `MimeBodyPart` with the content, and also when using a `DataHandler`. Furthermore, if it is a misconfiguration of the content, I find it weird that it&#39;s sending a `QUIT` immediately without first terminating the `DATA`. As far as I know, a normal exchange would look something like:\r\n\r\n```\r\nDATA\r\n354 End data with &lt;CR&gt;&lt;LF&gt;.&lt;CR&gt;&lt;LF&gt;\r\nTest message, please ignore\r\n.\r\nQUIT\r\n```\r\n","title":"JavaMail sends no content with SMTP, sends &quot;QUIT&quot; and hangs","body":"<p>I'm trying to use <a href=\"https://javaee.github.io/javamail/\" rel=\"nofollow noreferrer\">JavaMail 1.6</a> to send an email to a local <a href=\"https://github.com/mailhog/MailHog\" rel=\"nofollow noreferrer\">MailHog</a> SMTP server in Java 8. The code is:</p>\n<pre class=\"lang-java prettyprint-override\"><code>// import javax.mail.*;\n// import javax.mail.internet.*;\n// import javax.mail.internet.MimeMessage.RecipientType;\n\nString from = &quot;test_sender@gmail.com&quot;;\nString to = &quot;test_receiver@gmail.com&quot;;\nString subject = &quot;Sample subject&quot;;\nString body = &quot;Test message, please ignore&quot;;\n\nProperties props = System.getProperties();\nprops.setProperty(&quot;mail.smtp.host&quot;, &quot;localhost&quot;);\nprops.setProperty(&quot;mail.smtp.port&quot;, &quot;1025&quot;);\n\nSession session = Session.getInstance(props);\nsession.setDebug(true);\nMimeMessage message = new MimeMessage(session);\n\nmessage.setFrom(new InternetAddress(from));\nmessage.addRecipient(RecipientType.TO, new InternetAddress(to));\nmessage.setSubject(subject);\nmessage.setText(body);\n\nTransport.send(message);\n</code></pre>\n<p>When the code is ran, it will start and establish a session with the server, and step through SMTP until it's supposed to send data. After this, it sends <code>QUIT\\r\\n</code> and hangs, not sending any content.</p>\n<p>MailHog logs:</p>\n<pre><code>2022/02/25 16:18:18 [SMTP 127.0.0.1:58831] Starting session\n2022/02/25 16:18:18 [SMTP 127.0.0.1:58831] [PROTO: INVALID] Started session, switching to ESTABLISH state\n2022/02/25 16:18:18 [SMTP 127.0.0.1:58831] Sent 35 bytes: '220 mailhog.example ESMTP MailHog\\r\\n'\n2022/02/25 16:18:18 [SMTP 127.0.0.1:58831] Received 26 bytes: 'EHLO DEVICE.local\\r\\n'\n2022/02/25 16:18:18 [SMTP 127.0.0.1:58831] [PROTO: ESTABLISH] Processing line: EHLO DEVICE.local\n2022/02/25 16:18:18 [SMTP 127.0.0.1:58831] [PROTO: ESTABLISH] In state 1, got command 'EHLO', args 'DEVICE.local'\n2022/02/25 16:18:18 [SMTP 127.0.0.1:58831] [PROTO: ESTABLISH] In ESTABLISH state\n2022/02/25 16:18:18 [SMTP 127.0.0.1:58831] [PROTO: ESTABLISH] Got EHLO command, switching to MAIL state\n2022/02/25 16:18:18 [SMTP 127.0.0.1:58831] Sent 31 bytes: '250-Hello DEVICE.local\\r\\n'\n2022/02/25 16:18:18 [SMTP 127.0.0.1:58831] Sent 16 bytes: '250-PIPELINING\\r\\n'\n2022/02/25 16:18:18 [SMTP 127.0.0.1:58831] Sent 16 bytes: '250 AUTH PLAIN\\r\\n'\n2022/02/25 16:18:18 [SMTP 127.0.0.1:58831] Received 37 bytes: 'MAIL FROM:&lt;sample_sender@gmail.com&gt;\\r\\n'\n2022/02/25 16:18:18 [SMTP 127.0.0.1:58831] [PROTO: MAIL] Processing line: MAIL FROM:&lt;sample_sender@gmail.com&gt;\n2022/02/25 16:18:18 [SMTP 127.0.0.1:58831] [PROTO: MAIL] In state 6, got command 'MAIL', args 'FROM:&lt;sample_sender@gmail.com&gt;'\n2022/02/25 16:18:18 [SMTP 127.0.0.1:58831] [PROTO: MAIL] In MAIL state\n2022/02/25 16:18:18 [SMTP 127.0.0.1:58831] [PROTO: MAIL] Got MAIL command, switching to RCPT state\n2022/02/25 16:18:18 [SMTP 127.0.0.1:58831] Sent 39 bytes: '250 Sender sample_sender@gmail.com ok\\r\\n'\n2022/02/25 16:18:18 [SMTP 127.0.0.1:58831] Received 37 bytes: 'RCPT TO:&lt;sample_receiver@gmail.com&gt;\\r\\n'\n2022/02/25 16:18:18 [SMTP 127.0.0.1:58831] [PROTO: RCPT] Processing line: RCPT TO:&lt;sample_receiver@gmail.com&gt;\n2022/02/25 16:18:18 [SMTP 127.0.0.1:58831] [PROTO: RCPT] In state 7, got command 'RCPT', args 'TO:&lt;sample_receiver@gmail.com&gt;'\n2022/02/25 16:18:18 [SMTP 127.0.0.1:58831] [PROTO: RCPT] In RCPT state\n2022/02/25 16:18:18 [SMTP 127.0.0.1:58831] [PROTO: RCPT] Got RCPT command\n2022/02/25 16:18:18 [SMTP 127.0.0.1:58831] Sent 44 bytes: '250 Recipient sample_receiver@gmail.com ok\\r\\n'\n2022/02/25 16:18:18 [SMTP 127.0.0.1:58831] Received 6 bytes: 'DATA\\r\\n'\n2022/02/25 16:18:18 [SMTP 127.0.0.1:58831] [PROTO: RCPT] Processing line: DATA\n2022/02/25 16:18:18 [SMTP 127.0.0.1:58831] [PROTO: RCPT] In state 7, got command 'DATA', args ''\n2022/02/25 16:18:18 [SMTP 127.0.0.1:58831] [PROTO: RCPT] In RCPT state\n2022/02/25 16:18:18 [SMTP 127.0.0.1:58831] [PROTO: RCPT] Got DATA command, switching to DATA state\n2022/02/25 16:18:18 [SMTP 127.0.0.1:58831] Sent 37 bytes: '354 End data with &lt;CR&gt;&lt;LF&gt;.&lt;CR&gt;&lt;LF&gt;\\r\\n'\n2022/02/25 16:18:18 [SMTP 127.0.0.1:58831] Received 6 bytes: 'QUIT\\r\\n'\n</code></pre>\n<p>Java output:</p>\n<pre><code>DEBUG: setDebug: JavaMail version 1.6.2\nDEBUG: successfully loaded resource: /META-INF/javamail.default.providers\nDEBUG: Tables of loaded providers from javamail.providers\nDEBUG: Providers Listed By Class Name: {com.sun.mail.smtp.SMTPTransport=javax.mail.Provider[TRANSPORT,smtp,com.sun.mail.smtp.SMTPTransport,Oracle], com.sun.mail.imap.IMAPSSLStore=javax.mail.Provider[STORE,imaps,com.sun.mail.imap.IMAPSSLStore,Oracle], com.sun.mail.pop3.POP3Store=javax.mail.Provider[STORE,pop3,com.sun.mail.pop3.POP3Store,Oracle], com.sun.mail.smtp.SMTPSSLTransport=javax.mail.Provider[TRANSPORT,smtps,com.sun.mail.smtp.SMTPSSLTransport,Oracle], com.sun.mail.imap.IMAPStore=javax.mail.Provider[STORE,imap,com.sun.mail.imap.IMAPStore,Oracle], com.sun.mail.pop3.POP3SSLStore=javax.mail.Provider[STORE,pop3s,com.sun.mail.pop3.POP3SSLStore,Oracle]}\nDEBUG: Providers Listed By Protocol: {imap=javax.mail.Provider[STORE,imap,com.sun.mail.imap.IMAPStore,Oracle], smtp=javax.mail.Provider[TRANSPORT,smtp,com.sun.mail.smtp.SMTPTransport,Oracle], pop3=javax.mail.Provider[STORE,pop3,com.sun.mail.pop3.POP3Store,Oracle], imaps=javax.mail.Provider[STORE,imaps,com.sun.mail.imap.IMAPSSLStore,Oracle], smtps=javax.mail.Provider[TRANSPORT,smtps,com.sun.mail.smtp.SMTPSSLTransport,Oracle], pop3s=javax.mail.Provider[STORE,pop3s,com.sun.mail.pop3.POP3SSLStore,Oracle]}\nDEBUG: getProvider() returning javax.mail.Provider[TRANSPORT,smtp,com.sun.mail.smtp.SMTPTransport,Oracle]\nDEBUG SMTP: useEhlo true, useAuth false\nDEBUG SMTP: trying to connect to host &quot;localhost&quot;, port 1025, isSSL false\n220 mailhog.example ESMTP MailHog\nDEBUG SMTP: connected to host &quot;localhost&quot;, port: 1025\n\nEHLO DEVICE.local\n250-Hello DEVICE.local\n250-PIPELINING\n250 AUTH PLAIN\nDEBUG SMTP: Found extension &quot;PIPELINING&quot;, arg &quot;&quot;\nDEBUG SMTP: Found extension &quot;AUTH&quot;, arg &quot;PLAIN&quot;\nDEBUG SMTP: use8bit false\nMAIL FROM:&lt;sample_sender@gmail.com&gt;\n250 Sender sample_sender@gmail.com ok\nRCPT TO:&lt;sample_receiver@gmail.com&gt;\n250 Recipient sample_receiver@gmail.com ok\nDEBUG SMTP: Verified Addresses\nDEBUG SMTP:   sample_receiver@gmail.com\nDATA\n354 End data with &lt;CR&gt;&lt;LF&gt;.&lt;CR&gt;&lt;LF&gt;\nQUIT\n</code></pre>\n<p>Looking around, I can find a few references of JavaMail hanging while sending mail, but none of them seem to hang at this part of the session. It seems like it should be a misconfiguration related to <code>message.setText</code>. However, I get the same behavior when using <code>message.setContent(body, &quot;text/plain&quot;)</code>, using <code>MimeMultipart</code> and adding a <code>MimeBodyPart</code> with the content, and also when using a <code>DataHandler</code>. Furthermore, if it is a misconfiguration of the content, I find it weird that it's sending a <code>QUIT</code> immediately without first terminating the <code>DATA</code>. As far as I know, a normal exchange would look something like:</p>\n<pre><code>DATA\n354 End data with &lt;CR&gt;&lt;LF&gt;.&lt;CR&gt;&lt;LF&gt;\nTest message, please ignore\n.\nQUIT\n</code></pre>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":1960454,"reputation":44539,"user_id":1762224,"accept_rate":61,"display_name":"Mr. Polywhirl"},"score":0,"creation_date":1646067283,"post_id":71298377,"comment_id":126027731,"body_markdown":"Split on multiple new lines? `scan.useDelimiter(&quot;\\\\n(\\\\s*\\\\n)?&quot;)`","body":"Split on multiple new lines? <code>scan.useDelimiter(&quot;\\\\n(\\\\s*\\\\n)?&quot;)</code>"},{"owner":{"account_id":23921256,"reputation":42,"user_id":17917069,"display_name":"Wesley"},"score":0,"creation_date":1646067637,"post_id":71298377,"comment_id":126027874,"body_markdown":"@Mr.Polywhirl I want to create a new object from each individual line of text. Would this work in that case?","body":"@Mr.Polywhirl I want to create a new object from each individual line of text. Would this work in that case?"}],"answers":[{"tags":[],"owner":{"account_id":24403657,"reputation":11,"user_id":18332068,"display_name":"Mamo5900"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1646081615,"creation_date":1646069596,"answer_id":71298866,"question_id":71298377,"body_markdown":"Try to install the library `StringUtils` from apache and use the method `StringUtils.isBlank(line)` it gives back a boolean: true if the string is empty or has only a blank space or false if the string is not empty.\r\n\r\nOtherwise you can do a manual check:\r\n\r\n    if (line != null || line.equals(&quot;&quot;) || line.equals(&quot; &quot;))    \r\n      continue;\r\n\r\nThis will skip to next line if the actual line is empty.\r\n","title":"How to deal with whitespaces when reading a file with a scanner","body":"<p>Try to install the library <code>StringUtils</code> from apache and use the method <code>StringUtils.isBlank(line)</code> it gives back a boolean: true if the string is empty or has only a blank space or false if the string is not empty.</p>\n<p>Otherwise you can do a manual check:</p>\n<pre><code>if (line != null || line.equals(&quot;&quot;) || line.equals(&quot; &quot;))    \n  continue;\n</code></pre>\n<p>This will skip to next line if the actual line is empty.</p>\n"},{"tags":[],"owner":{"account_id":1960454,"reputation":44539,"user_id":1762224,"accept_rate":61,"display_name":"Mr. Polywhirl"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1646070252,"creation_date":1646070252,"answer_id":71298970,"question_id":71298377,"body_markdown":"You can use a custom delimiter and call `hasNext()` and `next()`.\r\n\r\nI added a static parse method that takes the current line, splits it, and then calls the POJO constructor.\r\n\r\n### `App.java`\r\n\r\n```java\r\nimport java.io.*;\r\nimport java.util.*;\r\n\r\npublic class App {\r\n\tprivate static class Pojo {\r\n\t\tprivate String text;\r\n\t\tprivate int number;\r\n\t\t\r\n\t\tprotected Pojo(String text, int number) {\r\n\t\t\tthis.text = text;\r\n\t\t\tthis.number = number;\r\n\t\t}\r\n\t\t\r\n\t\tpublic String toString() {\r\n\t\t\treturn String.format(&quot;{ \\&quot;text\\&quot;: \\&quot;%s\\&quot;, \\&quot;number\\&quot;: %d }&quot;, text, number);\r\n\t\t}\r\n\t}\r\n\t\r\n\tprivate static Pojo parseLine(String line) {\r\n\t\tString[] parts = line.trim().split(&quot; &quot;);\r\n\t\treturn new Pojo(parts[0], Integer.parseInt(parts[1]));\r\n\t}\r\n\t\r\n\tpublic static void main(String[] args) {\r\n\t\tClassLoader classLoader = App.class.getClassLoader();\r\n\t\tInputStream inputStream = classLoader.getResourceAsStream(&quot;resources/data.txt&quot;);\r\n\t\tScanner scan = new Scanner(inputStream).useDelimiter(&quot;\\\\n(\\\\s*\\\\n)?&quot;);\r\n\r\n\t\twhile (scan.hasNext()) {\r\n\t\t\tPojo pojo = parseLine(scan.next());\r\n\t\t\tSystem.out.println(pojo);\r\n\t\t}\r\n\t\t\r\n\t\tscan.close();\r\n\t}\r\n}\r\n```\r\n\r\n### `resources/data.txt`\r\n\r\n```\r\nline 1\r\n\r\n\r\nline 2\r\n\r\n\r\nline 3\r\n```\r\n\r\n## Output\r\n\r\n```\r\n{ &quot;text&quot;: &quot;line&quot;, &quot;number&quot;: 1 }\r\n{ &quot;text&quot;: &quot;line&quot;, &quot;number&quot;: 2 }\r\n{ &quot;text&quot;: &quot;line&quot;, &quot;number&quot;: 3 }\r\n```","title":"How to deal with whitespaces when reading a file with a scanner","body":"<p>You can use a custom delimiter and call <code>hasNext()</code> and <code>next()</code>.</p>\n<p>I added a static parse method that takes the current line, splits it, and then calls the POJO constructor.</p>\n<h3><code>App.java</code></h3>\n<pre class=\"lang-java prettyprint-override\"><code>import java.io.*;\nimport java.util.*;\n\npublic class App {\n    private static class Pojo {\n        private String text;\n        private int number;\n        \n        protected Pojo(String text, int number) {\n            this.text = text;\n            this.number = number;\n        }\n        \n        public String toString() {\n            return String.format(&quot;{ \\&quot;text\\&quot;: \\&quot;%s\\&quot;, \\&quot;number\\&quot;: %d }&quot;, text, number);\n        }\n    }\n    \n    private static Pojo parseLine(String line) {\n        String[] parts = line.trim().split(&quot; &quot;);\n        return new Pojo(parts[0], Integer.parseInt(parts[1]));\n    }\n    \n    public static void main(String[] args) {\n        ClassLoader classLoader = App.class.getClassLoader();\n        InputStream inputStream = classLoader.getResourceAsStream(&quot;resources/data.txt&quot;);\n        Scanner scan = new Scanner(inputStream).useDelimiter(&quot;\\\\n(\\\\s*\\\\n)?&quot;);\n\n        while (scan.hasNext()) {\n            Pojo pojo = parseLine(scan.next());\n            System.out.println(pojo);\n        }\n        \n        scan.close();\n    }\n}\n</code></pre>\n<h3><code>resources/data.txt</code></h3>\n<pre><code>line 1\n\n\nline 2\n\n\nline 3\n</code></pre>\n<h2>Output</h2>\n<pre><code>{ &quot;text&quot;: &quot;line&quot;, &quot;number&quot;: 1 }\n{ &quot;text&quot;: &quot;line&quot;, &quot;number&quot;: 2 }\n{ &quot;text&quot;: &quot;line&quot;, &quot;number&quot;: 3 }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1021725,"reputation":10018,"user_id":1031887,"accept_rate":77,"display_name":"phatfingers"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1646070391,"creation_date":1646070391,"answer_id":71298990,"question_id":71298377,"body_markdown":"You can test the first value in your parts array, which will always exist.\r\n\r\n    while (scan.hasNextLine()) {\r\n        String line = scan.nextLine();\r\n        String[] parts = line.split(&quot; &quot;);\r\n        if (!parts[0].isEmpty()) {\r\n            //create new object from parts here \r\n        }\r\n    }","title":"How to deal with whitespaces when reading a file with a scanner","body":"<p>You can test the first value in your parts array, which will always exist.</p>\n<pre><code>while (scan.hasNextLine()) {\n    String line = scan.nextLine();\n    String[] parts = line.split(&quot; &quot;);\n    if (!parts[0].isEmpty()) {\n        //create new object from parts here \n    }\n}\n</code></pre>\n"}],"owner":{"account_id":23921256,"reputation":42,"user_id":17917069,"display_name":"Wesley"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":52,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":71298990,"answer_count":3,"score":0,"last_activity_date":1646081615,"creation_date":1646067060,"question_id":71298377,"body_markdown":"I am writing a program where I read data from a file name that the user inputs using a scanner. I am making a new object from each line of the file using the following code:\r\n\r\n     while (scan.hasNextLine()) {\r\n            String line = scan.nextLine();\r\n            String[] parts = line.split(&quot; &quot;);\r\n            //create new object from parts here \r\n    }\r\n\r\nThis works correctly until my file for .txt files where there is no whitespace in between the lines but when there is a blank line in between words it stops working entirely.\r\n\r\nRight now it only works on a .txt file set up like this:\r\n\r\n    line 1\r\n    line 2\r\n    line 3\r\n\r\nI want to set it up to read a file like this:\r\n\r\n    line 1\r\n\r\n    line 2\r\n\r\n    line 3\r\n\r\n \r\nHow can I modify my program to read over a blank line and check if there is text after it?\r\n    \r\n\r\n","title":"How to deal with whitespaces when reading a file with a scanner","body":"<p>I am writing a program where I read data from a file name that the user inputs using a scanner. I am making a new object from each line of the file using the following code:</p>\n<pre><code> while (scan.hasNextLine()) {\n        String line = scan.nextLine();\n        String[] parts = line.split(&quot; &quot;);\n        //create new object from parts here \n}\n</code></pre>\n<p>This works correctly until my file for .txt files where there is no whitespace in between the lines but when there is a blank line in between words it stops working entirely.</p>\n<p>Right now it only works on a .txt file set up like this:</p>\n<pre><code>line 1\nline 2\nline 3\n</code></pre>\n<p>I want to set it up to read a file like this:</p>\n<pre><code>line 1\n\nline 2\n\nline 3\n</code></pre>\n<p>How can I modify my program to read over a blank line and check if there is text after it?</p>\n"},{"tags":["java","async-profiler"],"comments":[{"owner":{"account_id":4210603,"reputation":94356,"user_id":3448419,"display_name":"apangin"},"score":0,"creation_date":1645623866,"post_id":71204329,"comment_id":125921109,"body_markdown":"Do you have an example? It will be easier to asnwer, if you post the code for a particular problem. Otherwise the question is too abstract.","body":"Do you have an example? It will be easier to asnwer, if you post the code for a particular problem. Otherwise the question is too abstract."},{"owner":{"account_id":179202,"reputation":7876,"user_id":411709,"accept_rate":75,"display_name":"Abidi"},"score":0,"creation_date":1645637364,"post_id":71204329,"comment_id":125927553,"body_markdown":"@apangin Please have a look now.","body":"@apangin Please have a look now."},{"owner":{"account_id":4210603,"reputation":94356,"user_id":3448419,"display_name":"apangin"},"score":0,"creation_date":1645828118,"post_id":71204329,"comment_id":125982322,"body_markdown":"My results differ from yours. Can you post the complete compilable code, including WaitUtil.busySleep, and also tell what version of JDK you are running on?","body":"My results differ from yours. Can you post the complete compilable code, including WaitUtil.busySleep, and also tell what version of JDK you are running on?"},{"owner":{"account_id":4210603,"reputation":94356,"user_id":3448419,"display_name":"apangin"},"score":0,"creation_date":1645828282,"post_id":71204329,"comment_id":125982357,"body_markdown":"Also, take a look at the number of samples on each graph. Even if the shape looks similar,  the graphs may differ in absolute numbers. Besides that, since your benchmark is not only CPU-bound, but also involves synchronization/waiting - it makes sense to profile in wall clock mode (add `wall` option in profiler arguments).","body":"Also, take a look at the number of samples on each graph. Even if the shape looks similar,  the graphs may differ in absolute numbers. Besides that, since your benchmark is not only CPU-bound, but also involves synchronization/waiting - it makes sense to profile in wall clock mode (add <code>wall</code> option in profiler arguments)."},{"owner":{"account_id":179202,"reputation":7876,"user_id":411709,"accept_rate":75,"display_name":"Abidi"},"score":0,"creation_date":1646081193,"post_id":71204329,"comment_id":126032078,"body_markdown":"@apangin, I&#39;ve updated accordingly, I&#39;m running on jdk1.8.0_211.jdk on macbook. I understand, LBQ version has more samples (2K more than ABQ), but wouldn&#39;t it show what was happening differently that caused it?","body":"@apangin, I&#39;ve updated accordingly, I&#39;m running on jdk1.8.0_211.jdk on macbook. I understand, LBQ version has more samples (2K more than ABQ), but wouldn&#39;t it show what was happening differently that caused it?"}],"owner":{"account_id":179202,"reputation":7876,"user_id":411709,"accept_rate":75,"display_name":"Abidi"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":284,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1646081202,"creation_date":1645437725,"question_id":71204329,"body_markdown":"In the scenario below, is Java async-profiler the right tool to see where&#39;s time spent when comparing performance of ArrayBlockingQueue and LinkedBlockingQueue?\r\n\r\nOn my machine, total execution time of ABQ is always 25% faster than LBQ when sharing 50M entries between a consumer and a producer. Flame graphs of both are &quot;pretty much&quot; same except LBQ one shows only a handful of samples from JVM object allocation code but this wouldn&#39;t jusify 25% increase. As expected, TLAB allocation in LBQ is much higher. \r\n\r\nI was wondering, how can I see which activity (be it code or hardware) is taking the time?\r\n\r\nRunner:\r\n\r\n    import java.util.*;\r\n    import java.util.concurrent.ArrayBlockingQueue;\r\n    import java.util.concurrent.BlockingQueue;\r\n    import java.util.concurrent.LinkedBlockingQueue;\r\n    \r\n    public class Runner {\r\n    \r\n        public static void main(String[] args) throws InterruptedException {\r\n    \r\n    \r\n            int size = 50_000_000;\r\n            BlockingQueue&lt;Long&gt; queue = new LinkedBlockingQueue&lt;&gt;(size);\r\n    \r\n            Producer producer = new Producer(queue, size);\r\n            Thread t = new Thread(producer);\r\n            t.setName(&quot;ProducerItIs&quot;);\r\n    \r\n            Consumer consumer = new Consumer(queue, size);\r\n            Thread t2 = new Thread(consumer);\r\n            t2.setName(&quot;ConsumerItIs&quot;);\r\n    \r\n    \r\n            t.start();\r\n            t2.start();\r\n    \r\n            Thread.sleep(8000);\r\n            System.out.println(&quot;done&quot;);\r\n            queue.forEach(System.out::println);\r\n            System.out.println(queue.size());\r\n        }\r\n    }\r\n\r\n\r\nProducer:\r\n\r\n    import java.util.Queue;\r\n    import java.util.Random;\r\n    import java.util.concurrent.BlockingQueue;\r\n    \r\n    public class Producer implements Runnable {\r\n    \r\n        public Producer(BlockingQueue&lt;Long&gt; blockingQueue, int size) {\r\n            this.queue = blockingQueue;\r\n            this.size = size;\r\n    \r\n        }\r\n    \r\n        private final BlockingQueue&lt;Long&gt; queue;\r\n        private final int size;\r\n    \r\n        public void run() {\r\n    \r\n            System.out.println(&quot;Started to produce...&quot;);\r\n            long nanos = System.nanoTime();\r\n            Long ii = (long) new Random().nextInt();\r\n    \r\n            for (int j = 0; j &lt; size; j++) {\r\n                    queue.add(ii);\r\n            }\r\n            System.out.println(&quot;producer Time taken :&quot; + ((System.nanoTime() - nanos) / 1e6));\r\n        }\r\n    }\r\n\r\n\r\nConsumer:\r\n\r\n    import java.util.concurrent.BlockingQueue;\r\n    \r\n    public class Consumer implements Runnable {\r\n    \r\n        private final BlockingQueue&lt;Long&gt; blockingQueue;\r\n        private final int size;\r\n    \r\n    \r\n        private Long value;\r\n    \r\n        public Consumer(BlockingQueue&lt;Long&gt; blockingQueue, int size) {\r\n            this.blockingQueue = blockingQueue;\r\n            this.size = size;\r\n        }\r\n    \r\n        public void run() {\r\n            long nanos = System.nanoTime();\r\n    \r\n            System.out.println(&quot;Starting to consume...&quot;);\r\n            int i = 1;\r\n            try {\r\n                while (true) {\r\n                    value = blockingQueue.take();\r\n                    i++;\r\n    \r\n                    if (i &gt;= size) {\r\n                        break;\r\n                    }\r\n    \r\n                }\r\n                System.out.println(&quot;Consumer Time taken :&quot; + ((System.nanoTime() - nanos)/1e6));\r\n            } catch (Exception exp) {\r\n                System.out.println(exp);\r\n            }\r\n        }\r\n        public long getValue() {\r\n            return value;\r\n        }\r\n    }\r\n\r\nWith ArrayBlockingQueue:\r\n[![enter image description here][1]][1]\r\n\r\nWith LinkedListBlockedQueue: Black arrow showing samples captured for allocations\r\n[![enter image description here][2]][2]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/jpb1s.png\r\n  [2]: https://i.stack.imgur.com/Ws761.png","title":"Java Async Profiler Flame Graph","body":"<p>In the scenario below, is Java async-profiler the right tool to see where's time spent when comparing performance of ArrayBlockingQueue and LinkedBlockingQueue?</p>\n<p>On my machine, total execution time of ABQ is always 25% faster than LBQ when sharing 50M entries between a consumer and a producer. Flame graphs of both are &quot;pretty much&quot; same except LBQ one shows only a handful of samples from JVM object allocation code but this wouldn't jusify 25% increase. As expected, TLAB allocation in LBQ is much higher.</p>\n<p>I was wondering, how can I see which activity (be it code or hardware) is taking the time?</p>\n<p>Runner:</p>\n<pre><code>import java.util.*;\nimport java.util.concurrent.ArrayBlockingQueue;\nimport java.util.concurrent.BlockingQueue;\nimport java.util.concurrent.LinkedBlockingQueue;\n\npublic class Runner {\n\n    public static void main(String[] args) throws InterruptedException {\n\n\n        int size = 50_000_000;\n        BlockingQueue&lt;Long&gt; queue = new LinkedBlockingQueue&lt;&gt;(size);\n\n        Producer producer = new Producer(queue, size);\n        Thread t = new Thread(producer);\n        t.setName(&quot;ProducerItIs&quot;);\n\n        Consumer consumer = new Consumer(queue, size);\n        Thread t2 = new Thread(consumer);\n        t2.setName(&quot;ConsumerItIs&quot;);\n\n\n        t.start();\n        t2.start();\n\n        Thread.sleep(8000);\n        System.out.println(&quot;done&quot;);\n        queue.forEach(System.out::println);\n        System.out.println(queue.size());\n    }\n}\n</code></pre>\n<p>Producer:</p>\n<pre><code>import java.util.Queue;\nimport java.util.Random;\nimport java.util.concurrent.BlockingQueue;\n\npublic class Producer implements Runnable {\n\n    public Producer(BlockingQueue&lt;Long&gt; blockingQueue, int size) {\n        this.queue = blockingQueue;\n        this.size = size;\n\n    }\n\n    private final BlockingQueue&lt;Long&gt; queue;\n    private final int size;\n\n    public void run() {\n\n        System.out.println(&quot;Started to produce...&quot;);\n        long nanos = System.nanoTime();\n        Long ii = (long) new Random().nextInt();\n\n        for (int j = 0; j &lt; size; j++) {\n                queue.add(ii);\n        }\n        System.out.println(&quot;producer Time taken :&quot; + ((System.nanoTime() - nanos) / 1e6));\n    }\n}\n</code></pre>\n<p>Consumer:</p>\n<pre><code>import java.util.concurrent.BlockingQueue;\n\npublic class Consumer implements Runnable {\n\n    private final BlockingQueue&lt;Long&gt; blockingQueue;\n    private final int size;\n\n\n    private Long value;\n\n    public Consumer(BlockingQueue&lt;Long&gt; blockingQueue, int size) {\n        this.blockingQueue = blockingQueue;\n        this.size = size;\n    }\n\n    public void run() {\n        long nanos = System.nanoTime();\n\n        System.out.println(&quot;Starting to consume...&quot;);\n        int i = 1;\n        try {\n            while (true) {\n                value = blockingQueue.take();\n                i++;\n\n                if (i &gt;= size) {\n                    break;\n                }\n\n            }\n            System.out.println(&quot;Consumer Time taken :&quot; + ((System.nanoTime() - nanos)/1e6));\n        } catch (Exception exp) {\n            System.out.println(exp);\n        }\n    }\n    public long getValue() {\n        return value;\n    }\n}\n</code></pre>\n<p>With ArrayBlockingQueue:\n<a href=\"https://i.stack.imgur.com/jpb1s.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/jpb1s.png\" alt=\"enter image description here\" /></a></p>\n<p>With LinkedListBlockedQueue: Black arrow showing samples captured for allocations\n<a href=\"https://i.stack.imgur.com/Ws761.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Ws761.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":["java","jms","spring-jms"],"answers":[{"tags":[],"owner":{"account_id":11434008,"reputation":30690,"user_id":8381946,"display_name":"Justin Bertram"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1646080165,"creation_date":1646080165,"answer_id":71300729,"question_id":71295383,"body_markdown":"Typically you&#39;d let your framework (e.g. Spring) deal with concurrent message processing. This is, in fact, one of the benefits of such frameworks. I don&#39;t see any explicit benefit to dumping all the messages into a `List` and then manually spawning a thread to process it. Spring is _already_ doing this for you via the `@JmsListener` by invoking `receiveMessage` in a thread and providing configurable concurrency.\r\n\r\nFurthermore, if you want to trigger redelivery then you&#39;ll need to use a transacted JMS session and invoke `rollback()` but JMS sessions are *not* threadsafe so you&#39;ll have to control access to it somehow. This will almost certainly make your code needlessly complex.","title":"How can I acknowledge a JMS message on another thread and request for redelivery of unacknowledged messages?","body":"<p>Typically you'd let your framework (e.g. Spring) deal with concurrent message processing. This is, in fact, one of the benefits of such frameworks. I don't see any explicit benefit to dumping all the messages into a <code>List</code> and then manually spawning a thread to process it. Spring is <em>already</em> doing this for you via the <code>@JmsListener</code> by invoking <code>receiveMessage</code> in a thread and providing configurable concurrency.</p>\n<p>Furthermore, if you want to trigger redelivery then you'll need to use a transacted JMS session and invoke <code>rollback()</code> but JMS sessions are <em>not</em> threadsafe so you'll have to control access to it somehow. This will almost certainly make your code needlessly complex.</p>\n"}],"owner":{"account_id":9585051,"reputation":3,"user_id":7118155,"display_name":"aashish gossel"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":465,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":71300729,"answer_count":1,"score":0,"last_activity_date":1646080165,"creation_date":1646053102,"question_id":71295383,"body_markdown":"Step 1:  I need to receive message by one thread.\r\n\r\nStep 2:  Process and sending ack and redelivery request (throwing exception) by another thread.\r\n\r\nSample code: \r\n```java\r\nList&lt;Message&gt; list=new ArrayList();\r\n\r\n@JmsListener(destination = &quot;${jms.queue-name}&quot;, concurrency = &quot;${jms.max-thread-count}&quot;)\r\npublic void receiveMessage(Message message) throws JMSException,UnsupportedEncodingException {\r\n   list.add(message)\r\n}\r\n  \r\nvoid run() {\r\n   foreach(Message message:list) {\r\n      //need to send ack or throw exception for redeliver if error\r\n   }\r\n}\r\n```  \r\nNow another thread will start and process the list which contains data then how can I send an acknowledgement or throw an exception for redelivery?","title":"How can I acknowledge a JMS message on another thread and request for redelivery of unacknowledged messages?","body":"<p>Step 1:  I need to receive message by one thread.</p>\n<p>Step 2:  Process and sending ack and redelivery request (throwing exception) by another thread.</p>\n<p>Sample code:</p>\n<pre class=\"lang-java prettyprint-override\"><code>List&lt;Message&gt; list=new ArrayList();\n\n@JmsListener(destination = &quot;${jms.queue-name}&quot;, concurrency = &quot;${jms.max-thread-count}&quot;)\npublic void receiveMessage(Message message) throws JMSException,UnsupportedEncodingException {\n   list.add(message)\n}\n  \nvoid run() {\n   foreach(Message message:list) {\n      //need to send ack or throw exception for redeliver if error\n   }\n}\n</code></pre>\n<p>Now another thread will start and process the list which contains data then how can I send an acknowledgement or throw an exception for redelivery?</p>\n"},{"tags":["java","git","jgit"],"comments":[{"owner":{"account_id":549364,"reputation":20582,"user_id":2986905,"accept_rate":78,"display_name":"R&#252;diger Herrmann"},"score":0,"creation_date":1489611246,"post_id":42820282,"comment_id":72752703,"body_markdown":"Can you clarify what _latest_ means exactly? Do you mean the youngest by date? From all branches?","body":"Can you clarify what <i>latest</i> means exactly? Do you mean the youngest by date? From all branches?"},{"owner":{"account_id":377630,"reputation":75679,"user_id":729881,"display_name":"Edward Thomson"},"score":0,"creation_date":1489611473,"post_id":42820282,"comment_id":72752830,"body_markdown":"Do you mean the commit that `HEAD` ultimately points to?","body":"Do you mean the commit that <code>HEAD</code> ultimately points to?"},{"owner":{"account_id":6018528,"reputation":3054,"user_id":4726477,"accept_rate":83,"display_name":"Master Mind"},"score":0,"creation_date":1489611579,"post_id":42820282,"comment_id":72752881,"body_markdown":"Yes Exactly, the yougest by date from all the branches. is it Important to look up for him for all the branches, because I thought that I can look up for him relatively to a repo regardless of the branches?","body":"Yes Exactly, the yougest by date from all the branches. is it Important to look up for him for all the branches, because I thought that I can look up for him relatively to a repo regardless of the branches?"}],"answers":[{"tags":[],"owner":{"account_id":5372162,"reputation":4506,"user_id":4280359,"accept_rate":100,"display_name":"Grzegorz G&#243;rkiewicz"},"down_vote_count":0,"up_vote_count":5,"is_accepted":true,"score":5,"last_activity_date":1578472666,"creation_date":1489611931,"answer_id":42820656,"question_id":42820282,"body_markdown":"Compare by dates of last commits in all branches.\r\n`ListMode.ALL` can be changed to `ListMode.REMOTE` to compare only remote branches.\r\nOr... the fluent setter `.setListMode(whatever)` can be omitted to read from the local repository. \r\n\r\n    RevCommit youngestCommit = null;\r\n    Git git = new Git(repository);\r\n    List&lt;Ref&gt; branches = git.branchList().setListMode(ListMode.ALL).call();\r\n    try {\r\n        RevWalk walk = new RevWalk(git.getRepository());\r\n        for(Ref branch : branches) {\r\n            RevCommit commit = walk.parseCommit(branch.getObjectId());\r\n            if(youngestCommit == null || commit.getAuthorIdent().getWhen().compareTo(\r\n               youngestCommit.getAuthorIdent().getWhen()) &gt; 0)\r\n               youngestCommit = commit;\r\n        }\r\n    } catch (...)\r\n\r\n","title":"Get the latest commit in a repository with JGit","body":"<p>Compare by dates of last commits in all branches.\n<code>ListMode.ALL</code> can be changed to <code>ListMode.REMOTE</code> to compare only remote branches.\nOr... the fluent setter <code>.setListMode(whatever)</code> can be omitted to read from the local repository. </p>\n\n<pre><code>RevCommit youngestCommit = null;\nGit git = new Git(repository);\nList&lt;Ref&gt; branches = git.branchList().setListMode(ListMode.ALL).call();\ntry {\n    RevWalk walk = new RevWalk(git.getRepository());\n    for(Ref branch : branches) {\n        RevCommit commit = walk.parseCommit(branch.getObjectId());\n        if(youngestCommit == null || commit.getAuthorIdent().getWhen().compareTo(\n           youngestCommit.getAuthorIdent().getWhen()) &gt; 0)\n           youngestCommit = commit;\n    }\n} catch (...)\n</code></pre>\n"},{"tags":[],"owner":{"account_id":549364,"reputation":20582,"user_id":2986905,"accept_rate":78,"display_name":"R&#252;diger Herrmann"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1489613192,"creation_date":1489613192,"answer_id":42820987,"question_id":42820282,"body_markdown":"To find the newest commit within a repository, configure a `RevWalk` to start from all known refs and sort it descending by commit date. For example:\r\n\r\n    Repository repo = ...\r\n    try( RevWalk revWalk = new RevWalk( repo ) ) {\r\n      revWalk.sort( RevSort.COMMIT_TIME_DESC );\r\n      Map&lt;String, Ref&gt; allRefs = repo.getRefDatabase().getRefs( RefDatabase.ALL );\r\n      for( Ref ref : allRefs.values() ) {\r\n        RevCommit commit = revWalk.parseCommit( ref.getLeaf().getObjectId() );\r\n        revWalk.markStart( commit );\r\n      }\r\n      RevCommit newestCommit = revWalk.next();\r\n    }\r\n\r\nDepending on your use case, you may also want to mark start points from refs from `repo.getRefDatabase().getAdditionalRefs()` which includes refs like `FETCH_RESULT`, `ORIG_HEAD`, etc. If you find that there are still untracked refs, use `repo.getRefDatabase().getRef()`.","title":"Get the latest commit in a repository with JGit","body":"<p>To find the newest commit within a repository, configure a <code>RevWalk</code> to start from all known refs and sort it descending by commit date. For example:</p>\n\n<pre><code>Repository repo = ...\ntry( RevWalk revWalk = new RevWalk( repo ) ) {\n  revWalk.sort( RevSort.COMMIT_TIME_DESC );\n  Map&lt;String, Ref&gt; allRefs = repo.getRefDatabase().getRefs( RefDatabase.ALL );\n  for( Ref ref : allRefs.values() ) {\n    RevCommit commit = revWalk.parseCommit( ref.getLeaf().getObjectId() );\n    revWalk.markStart( commit );\n  }\n  RevCommit newestCommit = revWalk.next();\n}\n</code></pre>\n\n<p>Depending on your use case, you may also want to mark start points from refs from <code>repo.getRefDatabase().getAdditionalRefs()</code> which includes refs like <code>FETCH_RESULT</code>, <code>ORIG_HEAD</code>, etc. If you find that there are still untracked refs, use <code>repo.getRefDatabase().getRef()</code>.</p>\n"},{"tags":[],"owner":{"account_id":2524916,"reputation":40766,"user_id":2194470,"accept_rate":100,"display_name":"Szymon Stepniak"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1504080811,"creation_date":1504080811,"answer_id":45955258,"question_id":42820282,"body_markdown":"Below you can find a **Java 8 Stream API** solution:\r\n\r\n    final List&lt;Ref&gt; branches = git.branchList().setListMode(ListBranchCommand.ListMode.ALL).call();\r\n    final RevWalk revWalk = new RevWalk(git.getRepository());\r\n\r\n    branches.stream()\r\n            .map(branch -&gt; {\r\n                try {\r\n                    return revWalk.parseCommit(branch.getObjectId());\r\n                } catch (IOException e) {\r\n                    throw new RuntimeException(e);\r\n                }\r\n            })\r\n            .sorted(Comparator.comparing((RevCommit commit) -&gt; commit.getAuthorIdent().getWhen()).reversed())\r\n            .findFirst()\r\n            .ifPresent(commit -&gt; {\r\n                System.out.printf(&quot;%s: %s (%s)%n&quot;, commit.getAuthorIdent().getWhen(), commit.getShortMessage(), commit.getAuthorIdent().getName());\r\n            });\r\n\r\nIt iterates over all branches and picks recent commits in those branches, then it sorts list of commits by date in descendant order and picks the first one. If it exists it prints to console output something like this:\r\n\r\n    Wed Aug 30 09:49:42 CEST 2017: test file added (Szymon Stepniak)\r\n\r\nOf course the behavior on last commit existence is exemplary and it can be easily replaced with any additional business logic. I hope it helps.","title":"Get the latest commit in a repository with JGit","body":"<p>Below you can find a <strong>Java 8 Stream API</strong> solution:</p>\n\n<pre><code>final List&lt;Ref&gt; branches = git.branchList().setListMode(ListBranchCommand.ListMode.ALL).call();\nfinal RevWalk revWalk = new RevWalk(git.getRepository());\n\nbranches.stream()\n        .map(branch -&gt; {\n            try {\n                return revWalk.parseCommit(branch.getObjectId());\n            } catch (IOException e) {\n                throw new RuntimeException(e);\n            }\n        })\n        .sorted(Comparator.comparing((RevCommit commit) -&gt; commit.getAuthorIdent().getWhen()).reversed())\n        .findFirst()\n        .ifPresent(commit -&gt; {\n            System.out.printf(\"%s: %s (%s)%n\", commit.getAuthorIdent().getWhen(), commit.getShortMessage(), commit.getAuthorIdent().getName());\n        });\n</code></pre>\n\n<p>It iterates over all branches and picks recent commits in those branches, then it sorts list of commits by date in descendant order and picks the first one. If it exists it prints to console output something like this:</p>\n\n<pre><code>Wed Aug 30 09:49:42 CEST 2017: test file added (Szymon Stepniak)\n</code></pre>\n\n<p>Of course the behavior on last commit existence is exemplary and it can be easily replaced with any additional business logic. I hope it helps.</p>\n"},{"tags":[],"owner":{"account_id":7261896,"reputation":231,"user_id":5538273,"display_name":"jet457"},"down_vote_count":0,"up_vote_count":12,"is_accepted":false,"score":12,"last_activity_date":1646078634,"creation_date":1576007189,"answer_id":59274329,"question_id":42820282,"body_markdown":"You could make use of `git log` and set it to only return the top most commit:\r\n\r\n```java\r\nRevCommit latestCommit = new Git(repository).\r\n   log().\r\n   setMaxCount(1).\r\n   call().\r\n   iterator().\r\n   next();\r\n\r\nString latestCommitHash = latestCommit.getName();\r\n```","title":"Get the latest commit in a repository with JGit","body":"<p>You could make use of <code>git log</code> and set it to only return the top most commit:</p>\n<pre class=\"lang-java prettyprint-override\"><code>RevCommit latestCommit = new Git(repository).\n   log().\n   setMaxCount(1).\n   call().\n   iterator().\n   next();\n\nString latestCommitHash = latestCommit.getName();\n</code></pre>\n"}],"owner":{"account_id":6018528,"reputation":3054,"user_id":4726477,"accept_rate":83,"display_name":"Master Mind"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":10986,"favorite_count":0,"down_vote_count":0,"up_vote_count":14,"accepted_answer_id":42820656,"answer_count":4,"score":14,"last_activity_date":1646079687,"creation_date":1489610476,"question_id":42820282,"body_markdown":"I want to get the last commit metadata (the youngest one by date) in a repository using JGit.\r\n\r\nI know that I can get the commit metadata using:\r\n\r\n&lt;!-- language: java --&gt;\r\n\r\n    try (RevWalk walk = new RevWalk(repository))\r\n    {\r\n        RevCommit commit = walk.parseCommit(repository.resolve(commitHash));\r\n    }\r\n\r\nBut how to get the latest commit hash? \r\n\r\nIs there any other way to get the youngest by date `RevCommit` in a repository directly?","title":"Get the latest commit in a repository with JGit","body":"<p>I want to get the last commit metadata (the youngest one by date) in a repository using JGit.</p>\n<p>I know that I can get the commit metadata using:</p>\n<pre class=\"lang-java prettyprint-override\"><code>try (RevWalk walk = new RevWalk(repository))\n{\n    RevCommit commit = walk.parseCommit(repository.resolve(commitHash));\n}\n</code></pre>\n<p>But how to get the latest commit hash?</p>\n<p>Is there any other way to get the youngest by date <code>RevCommit</code> in a repository directly?</p>\n"},{"tags":["java","bash","shell","classpath","sh"],"answers":[{"tags":[],"owner":{"account_id":262968,"reputation":767120,"user_id":548225,"accept_rate":90,"display_name":"anubhava"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1646079419,"creation_date":1464447752,"answer_id":37500530,"question_id":37500434,"body_markdown":"I suggest using heredoc for easy maintenance of this long list of class paths:\r\n\r\n    #!/bin/bash\r\n\r\n    # populate array cpath with all the the classpaths each one on different lines\r\n    read -d &#39;&#39; -ra cpath&lt;&lt;&#39;EOF&#39;\r\n    /Users/afarber/src/jetty-newbie/EmbeddedWebsocket/target/classes\r\n    /Users/afarber/.m2/repository/org/eclipse/jetty/jetty-server/9.3.9.v20160517/jetty-server-9.3.9.v20160517.jar\r\n    /Users/afarber/.m2/repository/javax/servlet/javax.servlet-api/3.1.0/javax.servlet-api-3.1.0.jar\r\n    /Users/afarber/.m2/repository/org/eclipse/jetty/jetty-http/9.3.9.v20160517/jetty-http-9.3.9.v20160517.jar\r\n    /Users/afarber/.m2/repository/org/eclipse/jetty/jetty-util/9.3.9.v20160517/jetty-util-9.3.9.v20160517.jar\r\n    /Users/afarber/.m2/repository/org/eclipse/jetty/jetty-io/9.3.9.v20160517/jetty-io-9.3.9.v20160517.jar\r\n    /Users/afarber/.m2/repository/org/eclipse/jetty/jetty-servlet/9.3.9.v20160517/jetty-servlet-9.3.9.v20160517.jar\r\n    /Users/afarber/.m2/repository/org/eclipse/jetty/jetty-security/9.3.9.v20160517/jetty-security-9.3.9.v20160517.jar\r\n    /Users/afarber/.m2/repository/org/eclipse/jetty/websocket/websocket-api/9.3.9.v20160517/websocket-api-9.3.9.v20160517.jar\r\n    /Users/afarber/.m2/repository/org/eclipse/jetty/websocket/websocket-server/9.3.9.v20160517/websocket-server-9.3.9.v20160517.jar\r\n    /Users/afarber/.m2/repository/org/eclipse/jetty/websocket/websocket-common/9.3.9.v20160517/websocket-common-9.3.9.v20160517.jar\r\n    /Users/afarber/.m2/repository/org/eclipse/jetty/websocket/websocket-client/9.3.9.v20160517/websocket-client-9.3.9.v20160517.jar\r\n    /Users/afarber/.m2/repository/org/eclipse/jetty/websocket/websocket-servlet/9.3.9.v20160517/websocket-servlet-9.3.9.v20160517.jar\r\n    EOF\r\n\r\n    # merge them with : as separator in classpath    \r\n    printf -v classpath &quot;%s:&quot; &quot;${cpath[@]}&quot;\r\n\r\n    # execute the java command line\r\n    /Library/Java/JavaVirtualMachines/jdk1.8.0_45.jdk/Contents/Home/bin/java \\\r\n    -classpath &quot;${classpath%:}&quot; de.afarber.MyServlet\r\n","title":"Concatenate list of paths in bash-script, with colon as separator","body":"<p>I suggest using heredoc for easy maintenance of this long list of class paths:</p>\n<pre><code>#!/bin/bash\n\n# populate array cpath with all the the classpaths each one on different lines\nread -d '' -ra cpath&lt;&lt;'EOF'\n/Users/afarber/src/jetty-newbie/EmbeddedWebsocket/target/classes\n/Users/afarber/.m2/repository/org/eclipse/jetty/jetty-server/9.3.9.v20160517/jetty-server-9.3.9.v20160517.jar\n/Users/afarber/.m2/repository/javax/servlet/javax.servlet-api/3.1.0/javax.servlet-api-3.1.0.jar\n/Users/afarber/.m2/repository/org/eclipse/jetty/jetty-http/9.3.9.v20160517/jetty-http-9.3.9.v20160517.jar\n/Users/afarber/.m2/repository/org/eclipse/jetty/jetty-util/9.3.9.v20160517/jetty-util-9.3.9.v20160517.jar\n/Users/afarber/.m2/repository/org/eclipse/jetty/jetty-io/9.3.9.v20160517/jetty-io-9.3.9.v20160517.jar\n/Users/afarber/.m2/repository/org/eclipse/jetty/jetty-servlet/9.3.9.v20160517/jetty-servlet-9.3.9.v20160517.jar\n/Users/afarber/.m2/repository/org/eclipse/jetty/jetty-security/9.3.9.v20160517/jetty-security-9.3.9.v20160517.jar\n/Users/afarber/.m2/repository/org/eclipse/jetty/websocket/websocket-api/9.3.9.v20160517/websocket-api-9.3.9.v20160517.jar\n/Users/afarber/.m2/repository/org/eclipse/jetty/websocket/websocket-server/9.3.9.v20160517/websocket-server-9.3.9.v20160517.jar\n/Users/afarber/.m2/repository/org/eclipse/jetty/websocket/websocket-common/9.3.9.v20160517/websocket-common-9.3.9.v20160517.jar\n/Users/afarber/.m2/repository/org/eclipse/jetty/websocket/websocket-client/9.3.9.v20160517/websocket-client-9.3.9.v20160517.jar\n/Users/afarber/.m2/repository/org/eclipse/jetty/websocket/websocket-servlet/9.3.9.v20160517/websocket-servlet-9.3.9.v20160517.jar\nEOF\n\n# merge them with : as separator in classpath    \nprintf -v classpath &quot;%s:&quot; &quot;${cpath[@]}&quot;\n\n# execute the java command line\n/Library/Java/JavaVirtualMachines/jdk1.8.0_45.jdk/Contents/Home/bin/java \\\n-classpath &quot;${classpath%:}&quot; de.afarber.MyServlet\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1143565,"reputation":503892,"user_id":1126841,"display_name":"chepner"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1464449446,"creation_date":1464447946,"answer_id":37500576,"question_id":37500434,"body_markdown":"Since you are using `bash`, you can store the directory names in an array (with some refactoring just to make this example more readable):\r\n\r\n    repo=/Users/afarber/.m2/repository\r\n    jetty=&quot;$repo/org/eclipse/jetty&quot;\r\n    websocket=&quot;$jetty/websocket&quot;\r\n    paths=(\r\n        /Users/afarber/src/jetty-newbie/EmbeddedWebsocket/target/classes\r\n        &quot;$jetty&quot;/jetty-server/9.3.9.v20160517/jetty-server-9.3.9.v20160517.jar\r\n        $repo/javax/servlet/javax.servlet-api/3.1.0/javax.servlet-api-3.1.0.jar\r\n        &quot;$jetty&quot;/jetty-http/9.3.9.v20160517/jetty-http-9.3.9.v20160517.jar\r\n        &quot;$jetty&quot;/jetty-util/9.3.9.v20160517/jetty-util-9.3.9.v20160517.jar\r\n        &quot;$jetty&quot;/jetty-io/9.3.9.v20160517/jetty-io-9.3.9.v20160517.jar\r\n        &quot;$jetty&quot;/jetty-servlet/9.3.9.v20160517/jetty-servlet-9.3.9.v20160517.jar\r\n        &quot;$jetty&quot;/jetty-security/9.3.9.v20160517/jetty-security-9.3.9.v20160517.jar\r\n        &quot;$websocket&quot;/websocket-api/9.3.9.v20160517/websocket-api-9.3.9.v20160517.jar\r\n        &quot;$websocket&quot;/websocket-server/9.3.9.v20160517/websocket-server-9.3.9.v20160517.jar\r\n        &quot;$websocket&quot;/websocket-common/9.3.9.v20160517/websocket-common-9.3.9.v20160517.jar\r\n        &quot;$websocket&quot;/websocket-client/9.3.9.v20160517/websocket-client-9.3.9.v20160517.jar\r\n        &quot;$websocket&quot;/websocket-servlet/9.3.9.v20160517/websocket-servlet-9.3.9.v20160517.jar \r\n    )\r\n\r\nNote you don&#39;t need to end each line with a backslash; whitespace (including newlines) separate elements of the array. Once you have the array, you can join the elements with a colon using parameter expansion with a modified value of the `IFS` parameter.\r\n\r\n    /Library/Java/JavaVirtualMachines/jdk1.8.0_45.jdk/Contents/Home/bin/java \\\r\n      -classpath &quot;$(IFS=:; echo &quot;${paths[*]}&quot;)&quot; de.afarber.MyServlet\r\n    ","title":"Concatenate list of paths in bash-script, with colon as separator","body":"<p>Since you are using <code>bash</code>, you can store the directory names in an array (with some refactoring just to make this example more readable):</p>\n\n<pre><code>repo=/Users/afarber/.m2/repository\njetty=\"$repo/org/eclipse/jetty\"\nwebsocket=\"$jetty/websocket\"\npaths=(\n    /Users/afarber/src/jetty-newbie/EmbeddedWebsocket/target/classes\n    \"$jetty\"/jetty-server/9.3.9.v20160517/jetty-server-9.3.9.v20160517.jar\n    $repo/javax/servlet/javax.servlet-api/3.1.0/javax.servlet-api-3.1.0.jar\n    \"$jetty\"/jetty-http/9.3.9.v20160517/jetty-http-9.3.9.v20160517.jar\n    \"$jetty\"/jetty-util/9.3.9.v20160517/jetty-util-9.3.9.v20160517.jar\n    \"$jetty\"/jetty-io/9.3.9.v20160517/jetty-io-9.3.9.v20160517.jar\n    \"$jetty\"/jetty-servlet/9.3.9.v20160517/jetty-servlet-9.3.9.v20160517.jar\n    \"$jetty\"/jetty-security/9.3.9.v20160517/jetty-security-9.3.9.v20160517.jar\n    \"$websocket\"/websocket-api/9.3.9.v20160517/websocket-api-9.3.9.v20160517.jar\n    \"$websocket\"/websocket-server/9.3.9.v20160517/websocket-server-9.3.9.v20160517.jar\n    \"$websocket\"/websocket-common/9.3.9.v20160517/websocket-common-9.3.9.v20160517.jar\n    \"$websocket\"/websocket-client/9.3.9.v20160517/websocket-client-9.3.9.v20160517.jar\n    \"$websocket\"/websocket-servlet/9.3.9.v20160517/websocket-servlet-9.3.9.v20160517.jar \n)\n</code></pre>\n\n<p>Note you don't need to end each line with a backslash; whitespace (including newlines) separate elements of the array. Once you have the array, you can join the elements with a colon using parameter expansion with a modified value of the <code>IFS</code> parameter.</p>\n\n<pre><code>/Library/Java/JavaVirtualMachines/jdk1.8.0_45.jdk/Contents/Home/bin/java \\\n  -classpath \"$(IFS=:; echo \"${paths[*]}\")\" de.afarber.MyServlet\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5095160,"reputation":9265,"user_id":4086774,"display_name":"Lars Fischer"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1464447988,"creation_date":1464447988,"answer_id":37500591,"question_id":37500434,"body_markdown":"A `sed` should do the trick:\r\n\r\n    colonPATHS=$(echo &quot;$PATHS&quot; | sed -r &#39;s/\\s+/:/g&#39;) \r\n    echo &quot;$colonPATHS&quot;\r\n\r\nThe sed turns sequences of whitespace into a &quot;:&quot;.","title":"Concatenate list of paths in bash-script, with colon as separator","body":"<p>A <code>sed</code> should do the trick:</p>\n\n<pre><code>colonPATHS=$(echo \"$PATHS\" | sed -r 's/\\s+/:/g') \necho \"$colonPATHS\"\n</code></pre>\n\n<p>The sed turns sequences of whitespace into a \":\".</p>\n"},{"tags":[],"owner":{"account_id":4473692,"reputation":2651,"user_id":3639306,"accept_rate":50,"display_name":"sumitya"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1464448665,"creation_date":1464448665,"answer_id":37500706,"question_id":37500434,"body_markdown":"Simple `sed` can do this\r\n\r\n    pathwithcolons=`echo $PATHS|sed &#39;s/ \\+\\\\ \\+/:/g&#39;`","title":"Concatenate list of paths in bash-script, with colon as separator","body":"<p>Simple <code>sed</code> can do this</p>\n\n<pre><code>pathwithcolons=`echo $PATHS|sed 's/ \\+\\\\ \\+/:/g'`\n</code></pre>\n"},{"tags":[],"owner":{"account_id":55135,"reputation":21845,"user_id":165071,"accept_rate":96,"display_name":"Alexander Farber"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1465889836,"creation_date":1465845996,"answer_id":37797655,"question_id":37500434,"body_markdown":"I&#39;ve ended up using [the following script][1]:\r\n\r\n    #!/bin/sh\r\n    \r\n    REPO=/Users/afarber/.m2/repository\r\n    VERSION=9.3.9.v20160517\r\n    \r\n    CPATHS=/Users/afarber/src/jetty-newbie/WebsocketServlet/target/classes \r\n    CPATHS=$CPATHS:$REPO/javax/servlet/javax.servlet-api/3.1.0/javax.servlet-api-3.1.0.jar \r\n    CPATHS=$CPATHS:$REPO/org/eclipse/jetty/jetty-http/$VERSION/jetty-http-$VERSION.jar \r\n    CPATHS=$CPATHS:$REPO/org/eclipse/jetty/jetty-io/$VERSION/jetty-io-$VERSION.jar \r\n    CPATHS=$CPATHS:$REPO/org/eclipse/jetty/jetty-security/$VERSION/jetty-security-$VERSION.jar \r\n    CPATHS=$CPATHS:$REPO/org/eclipse/jetty/jetty-server/$VERSION/jetty-server-$VERSION.jar \r\n    CPATHS=$CPATHS:$REPO/org/eclipse/jetty/jetty-servlet/$VERSION/jetty-servlet-$VERSION.jar \r\n    CPATHS=$CPATHS:$REPO/org/eclipse/jetty/jetty-util/$VERSION/jetty-util-$VERSION.jar \r\n    CPATHS=$CPATHS:$REPO/org/eclipse/jetty/websocket/websocket-api/$VERSION/websocket-api-$VERSION.jar\r\n    CPATHS=$CPATHS:$REPO/org/eclipse/jetty/websocket/websocket-client/$VERSION/websocket-client-$VERSION.jar \r\n    CPATHS=$CPATHS:$REPO/org/eclipse/jetty/websocket/websocket-common/$VERSION/websocket-common-$VERSION.jar \r\n    CPATHS=$CPATHS:$REPO/org/eclipse/jetty/websocket/websocket-server/$VERSION/websocket-server-$VERSION.jar \r\n    CPATHS=$CPATHS:$REPO/org/eclipse/jetty/websocket/websocket-servlet/$VERSION/websocket-servlet-$VERSION.jar \r\n    \r\n    /Library/Java/JavaVirtualMachines/jdk1.8.0_45.jdk/Contents/Home/bin/java \\\r\n            -classpath $CPATHS de.afarber.MyServlet\r\n\r\nI like it better than other solutions, because it does not spawn additional processes (like `sed`), is easier to read and can be translated to Windows CMD batch file:\r\n\r\n    @echo off\r\n    \r\n    set REPO=&quot;C:\\Users\\user1\\.m2\\repository&quot;\r\n    set VERSION=9.3.9.v20160517\r\n    \r\n    set CPATHS=C:\\Users\\user1\\jetty-newbie\\WebsocketServlet\\target\\classes\r\n    set CPATHS=%CPATHS%;%REPO%\\javax\\servlet\\javax.servlet-api\\3.1.0\\javax.servlet-api-3.1.0.jar\r\n    set CPATHS=%CPATHS%;%REPO%\\org\\eclipse\\jetty\\jetty-http\\%VERSION%\\jetty-http-%VERSION%.jar\r\n    set CPATHS=%CPATHS%;%REPO%\\org\\eclipse\\jetty\\jetty-io\\%VERSION%\\jetty-io-%VERSION%.jar\r\n    set CPATHS=%CPATHS%;%REPO%\\org\\eclipse\\jetty\\jetty-security\\%VERSION%\\jetty-security-%VERSION%.jar\r\n    set CPATHS=%CPATHS%;%REPO%\\org\\eclipse\\jetty\\jetty-server\\%VERSION%\\jetty-server-%VERSION%.jar\r\n    set CPATHS=%CPATHS%;%REPO%\\org\\eclipse\\jetty\\jetty-servlet\\%VERSION%\\jetty-servlet-%VERSION%.jar\r\n    set CPATHS=%CPATHS%;%REPO%\\org\\eclipse\\jetty\\jetty-util-ajax\\%VERSION%\\jetty-util-ajax-%VERSION%.jar\r\n    set CPATHS=%CPATHS%;%REPO%\\org\\eclipse\\jetty\\jetty-util\\%VERSION%\\jetty-util-%VERSION%.jar\r\n    set CPATHS=%CPATHS%;%REPO%\\org\\eclipse\\jetty\\websocket\\websocket-api\\%VERSION%\\websocket-api-%VERSION%.jar\r\n    set CPATHS=%CPATHS%;%REPO%\\org\\eclipse\\jetty\\websocket\\websocket-client\\%VERSION%\\websocket-client-%VERSION%.jar\r\n    set CPATHS=%CPATHS%;%REPO%\\org\\eclipse\\jetty\\websocket\\websocket-common\\%VERSION%\\websocket-common-%VERSION%.jar\r\n    set CPATHS=%CPATHS%;%REPO%\\org\\eclipse\\jetty\\websocket\\websocket-server\\%VERSION%\\websocket-server-%VERSION%.jar\r\n    set CPATHS=%CPATHS%;%REPO%\\org\\eclipse\\jetty\\websocket\\websocket-servlet\\%VERSION%\\websocket-servlet-%VERSION%.jar\r\n    set CPATHS=%CPATHS%;%REPO%\\org\\postgresql\\postgresql\\9.4.1208.jre7\\postgresql-9.4.1208.jre7.jar\r\n    \r\n    &quot;C:\\Program Files\\Java\\jdk1.8.0_66\\bin\\java.exe&quot; -cp %CPATHS% de.afarber.MyServlet\r\n\r\n\r\n\r\n  [1]: https://github.com/afarber/jetty-newbie/blob/master/WebsocketServlet/start_emb_jetty_mac.sh\r\n\r\n","title":"Concatenate list of paths in bash-script, with colon as separator","body":"<p>I've ended up using <a href=\"https://github.com/afarber/jetty-newbie/blob/master/WebsocketServlet/start_emb_jetty_mac.sh\" rel=\"nofollow\">the following script</a>:</p>\n\n<pre><code>#!/bin/sh\n\nREPO=/Users/afarber/.m2/repository\nVERSION=9.3.9.v20160517\n\nCPATHS=/Users/afarber/src/jetty-newbie/WebsocketServlet/target/classes \nCPATHS=$CPATHS:$REPO/javax/servlet/javax.servlet-api/3.1.0/javax.servlet-api-3.1.0.jar \nCPATHS=$CPATHS:$REPO/org/eclipse/jetty/jetty-http/$VERSION/jetty-http-$VERSION.jar \nCPATHS=$CPATHS:$REPO/org/eclipse/jetty/jetty-io/$VERSION/jetty-io-$VERSION.jar \nCPATHS=$CPATHS:$REPO/org/eclipse/jetty/jetty-security/$VERSION/jetty-security-$VERSION.jar \nCPATHS=$CPATHS:$REPO/org/eclipse/jetty/jetty-server/$VERSION/jetty-server-$VERSION.jar \nCPATHS=$CPATHS:$REPO/org/eclipse/jetty/jetty-servlet/$VERSION/jetty-servlet-$VERSION.jar \nCPATHS=$CPATHS:$REPO/org/eclipse/jetty/jetty-util/$VERSION/jetty-util-$VERSION.jar \nCPATHS=$CPATHS:$REPO/org/eclipse/jetty/websocket/websocket-api/$VERSION/websocket-api-$VERSION.jar\nCPATHS=$CPATHS:$REPO/org/eclipse/jetty/websocket/websocket-client/$VERSION/websocket-client-$VERSION.jar \nCPATHS=$CPATHS:$REPO/org/eclipse/jetty/websocket/websocket-common/$VERSION/websocket-common-$VERSION.jar \nCPATHS=$CPATHS:$REPO/org/eclipse/jetty/websocket/websocket-server/$VERSION/websocket-server-$VERSION.jar \nCPATHS=$CPATHS:$REPO/org/eclipse/jetty/websocket/websocket-servlet/$VERSION/websocket-servlet-$VERSION.jar \n\n/Library/Java/JavaVirtualMachines/jdk1.8.0_45.jdk/Contents/Home/bin/java \\\n        -classpath $CPATHS de.afarber.MyServlet\n</code></pre>\n\n<p>I like it better than other solutions, because it does not spawn additional processes (like <code>sed</code>), is easier to read and can be translated to Windows CMD batch file:</p>\n\n<pre><code>@echo off\n\nset REPO=\"C:\\Users\\user1\\.m2\\repository\"\nset VERSION=9.3.9.v20160517\n\nset CPATHS=C:\\Users\\user1\\jetty-newbie\\WebsocketServlet\\target\\classes\nset CPATHS=%CPATHS%;%REPO%\\javax\\servlet\\javax.servlet-api\\3.1.0\\javax.servlet-api-3.1.0.jar\nset CPATHS=%CPATHS%;%REPO%\\org\\eclipse\\jetty\\jetty-http\\%VERSION%\\jetty-http-%VERSION%.jar\nset CPATHS=%CPATHS%;%REPO%\\org\\eclipse\\jetty\\jetty-io\\%VERSION%\\jetty-io-%VERSION%.jar\nset CPATHS=%CPATHS%;%REPO%\\org\\eclipse\\jetty\\jetty-security\\%VERSION%\\jetty-security-%VERSION%.jar\nset CPATHS=%CPATHS%;%REPO%\\org\\eclipse\\jetty\\jetty-server\\%VERSION%\\jetty-server-%VERSION%.jar\nset CPATHS=%CPATHS%;%REPO%\\org\\eclipse\\jetty\\jetty-servlet\\%VERSION%\\jetty-servlet-%VERSION%.jar\nset CPATHS=%CPATHS%;%REPO%\\org\\eclipse\\jetty\\jetty-util-ajax\\%VERSION%\\jetty-util-ajax-%VERSION%.jar\nset CPATHS=%CPATHS%;%REPO%\\org\\eclipse\\jetty\\jetty-util\\%VERSION%\\jetty-util-%VERSION%.jar\nset CPATHS=%CPATHS%;%REPO%\\org\\eclipse\\jetty\\websocket\\websocket-api\\%VERSION%\\websocket-api-%VERSION%.jar\nset CPATHS=%CPATHS%;%REPO%\\org\\eclipse\\jetty\\websocket\\websocket-client\\%VERSION%\\websocket-client-%VERSION%.jar\nset CPATHS=%CPATHS%;%REPO%\\org\\eclipse\\jetty\\websocket\\websocket-common\\%VERSION%\\websocket-common-%VERSION%.jar\nset CPATHS=%CPATHS%;%REPO%\\org\\eclipse\\jetty\\websocket\\websocket-server\\%VERSION%\\websocket-server-%VERSION%.jar\nset CPATHS=%CPATHS%;%REPO%\\org\\eclipse\\jetty\\websocket\\websocket-servlet\\%VERSION%\\websocket-servlet-%VERSION%.jar\nset CPATHS=%CPATHS%;%REPO%\\org\\postgresql\\postgresql\\9.4.1208.jre7\\postgresql-9.4.1208.jre7.jar\n\n\"C:\\Program Files\\Java\\jdk1.8.0_66\\bin\\java.exe\" -cp %CPATHS% de.afarber.MyServlet\n</code></pre>\n"}],"owner":{"account_id":55135,"reputation":21845,"user_id":165071,"accept_rate":96,"display_name":"Alexander Farber"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1131,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":37500576,"answer_count":5,"score":2,"last_activity_date":1646079419,"creation_date":1464447205,"question_id":37500434,"body_markdown":"I have the following difficult to read script consisting of a single command:\r\n\r\n    #!/bin/sh\r\n    \r\n    /Library/Java/JavaVirtualMachines/jdk1.8.0_45.jdk/Contents/Home/bin/java \\\r\n    -classpath /Users/afarber/src/jetty-newbie/EmbeddedWebsocket/target/classes:/Users/afarber/.m2/repository/org/eclipse/jetty/jetty-server/9.3.9.v20160517/jetty-server-9.3.9.v20160517.jar:/Users/afarber/.m2/repository/javax/servlet/javax.servlet-api/3.1.0/javax.servlet-api-3.1.0.jar:/Users/afarber/.m2/repository/org/eclipse/jetty/jetty-http/9.3.9.v20160517/jetty-http-9.3.9.v20160517.jar:/Users/afarber/.m2/repository/org/eclipse/jetty/jetty-util/9.3.9.v20160517/jetty-util-9.3.9.v20160517.jar:/Users/afarber/.m2/repository/org/eclipse/jetty/jetty-io/9.3.9.v20160517/jetty-io-9.3.9.v20160517.jar:/Users/afarber/.m2/repository/org/eclipse/jetty/jetty-servlet/9.3.9.v20160517/jetty-servlet-9.3.9.v20160517.jar:/Users/afarber/.m2/repository/org/eclipse/jetty/jetty-security/9.3.9.v20160517/jetty-security-9.3.9.v20160517.jar:/Users/afarber/.m2/repository/org/eclipse/jetty/websocket/websocket-api/9.3.9.v20160517/websocket-api-9.3.9.v20160517.jar:/Users/afarber/.m2/repository/org/eclipse/jetty/websocket/websocket-server/9.3.9.v20160517/websocket-server-9.3.9.v20160517.jar:/Users/afarber/.m2/repository/org/eclipse/jetty/websocket/websocket-common/9.3.9.v20160517/websocket-common-9.3.9.v20160517.jar:/Users/afarber/.m2/repository/org/eclipse/jetty/websocket/websocket-client/9.3.9.v20160517/websocket-client-9.3.9.v20160517.jar:/Users/afarber/.m2/repository/org/eclipse/jetty/websocket/websocket-servlet/9.3.9.v20160517/websocket-servlet-9.3.9.v20160517.jar \\\r\n    de.afarber.MyServlet\r\n\r\nAs slight readability improvement I would like to list all the paths after the `-classpath` in a separate variable, each aligned after the other:\r\n\r\n    PATHS=  /Users/afarber/src/jetty-newbie/EmbeddedWebsocket/target/classes \\\r\n            /Users/afarber/.m2/repository/org/eclipse/jetty/jetty-server/9.3.9.v20160517/jetty-server-9.3.9.v20160517.jar \\\r\n            /Users/afarber/.m2/repository/javax/servlet/javax.servlet-api/3.1.0/javax.servlet-api-3.1.0.jar \\\r\n            /Users/afarber/.m2/repository/org/eclipse/jetty/jetty-http/9.3.9.v20160517/jetty-http-9.3.9.v20160517.jar \\\r\n            /Users/afarber/.m2/repository/org/eclipse/jetty/jetty-util/9.3.9.v20160517/jetty-util-9.3.9.v20160517.jar \\\r\n            /Users/afarber/.m2/repository/org/eclipse/jetty/jetty-io/9.3.9.v20160517/jetty-io-9.3.9.v20160517.jar \\\r\n            /Users/afarber/.m2/repository/org/eclipse/jetty/jetty-servlet/9.3.9.v20160517/jetty-servlet-9.3.9.v20160517.jar \\\r\n            /Users/afarber/.m2/repository/org/eclipse/jetty/jetty-security/9.3.9.v20160517/jetty-security-9.3.9.v20160517.jar \\\r\n            /Users/afarber/.m2/repository/org/eclipse/jetty/websocket/websocket-api/9.3.9.v20160517/websocket-api-9.3.9.v20160517.jar \\\r\n            /Users/afarber/.m2/repository/org/eclipse/jetty/websocket/websocket-server/9.3.9.v20160517/websocket-server-9.3.9.v20160517.jar \\\r\n            /Users/afarber/.m2/repository/org/eclipse/jetty/websocket/websocket-common/9.3.9.v20160517/websocket-common-9.3.9.v20160517.jar \\\r\n            /Users/afarber/.m2/repository/org/eclipse/jetty/websocket/websocket-client/9.3.9.v20160517/websocket-client-9.3.9.v20160517.jar \\\r\n            /Users/afarber/.m2/repository/org/eclipse/jetty/websocket/websocket-servlet/9.3.9.v20160517/websocket-servlet-9.3.9.v20160517.jar \r\n\r\nThis way I can easier add and remove the paths, and sort them in Vim.\r\n\r\nMy question is: how to join them back for my command?\r\n\r\n**UPDATE:**\r\n\r\nIf all JAR-files would be located in the same dir, I could have used [the new Java 8 wildcard syntax][2] `java -classpath &quot;/that/dir/*&quot; de.afarber.MyServlet` - but that wasn&#39;t the case here.\r\n\r\n  [1]: https://github.com/afarber/jetty-newbie/blob/master/WebsocketServlet/start_emb_jetty_mac.sh\r\n  [2]: https://docs.oracle.com/javase/8/docs/technotes/tools/windows/classpath.html\r\n","title":"Concatenate list of paths in bash-script, with colon as separator","body":"<p>I have the following difficult to read script consisting of a single command:</p>\n\n<pre><code>#!/bin/sh\n\n/Library/Java/JavaVirtualMachines/jdk1.8.0_45.jdk/Contents/Home/bin/java \\\n-classpath /Users/afarber/src/jetty-newbie/EmbeddedWebsocket/target/classes:/Users/afarber/.m2/repository/org/eclipse/jetty/jetty-server/9.3.9.v20160517/jetty-server-9.3.9.v20160517.jar:/Users/afarber/.m2/repository/javax/servlet/javax.servlet-api/3.1.0/javax.servlet-api-3.1.0.jar:/Users/afarber/.m2/repository/org/eclipse/jetty/jetty-http/9.3.9.v20160517/jetty-http-9.3.9.v20160517.jar:/Users/afarber/.m2/repository/org/eclipse/jetty/jetty-util/9.3.9.v20160517/jetty-util-9.3.9.v20160517.jar:/Users/afarber/.m2/repository/org/eclipse/jetty/jetty-io/9.3.9.v20160517/jetty-io-9.3.9.v20160517.jar:/Users/afarber/.m2/repository/org/eclipse/jetty/jetty-servlet/9.3.9.v20160517/jetty-servlet-9.3.9.v20160517.jar:/Users/afarber/.m2/repository/org/eclipse/jetty/jetty-security/9.3.9.v20160517/jetty-security-9.3.9.v20160517.jar:/Users/afarber/.m2/repository/org/eclipse/jetty/websocket/websocket-api/9.3.9.v20160517/websocket-api-9.3.9.v20160517.jar:/Users/afarber/.m2/repository/org/eclipse/jetty/websocket/websocket-server/9.3.9.v20160517/websocket-server-9.3.9.v20160517.jar:/Users/afarber/.m2/repository/org/eclipse/jetty/websocket/websocket-common/9.3.9.v20160517/websocket-common-9.3.9.v20160517.jar:/Users/afarber/.m2/repository/org/eclipse/jetty/websocket/websocket-client/9.3.9.v20160517/websocket-client-9.3.9.v20160517.jar:/Users/afarber/.m2/repository/org/eclipse/jetty/websocket/websocket-servlet/9.3.9.v20160517/websocket-servlet-9.3.9.v20160517.jar \\\nde.afarber.MyServlet\n</code></pre>\n\n<p>As slight readability improvement I would like to list all the paths after the <code>-classpath</code> in a separate variable, each aligned after the other:</p>\n\n<pre><code>PATHS=  /Users/afarber/src/jetty-newbie/EmbeddedWebsocket/target/classes \\\n        /Users/afarber/.m2/repository/org/eclipse/jetty/jetty-server/9.3.9.v20160517/jetty-server-9.3.9.v20160517.jar \\\n        /Users/afarber/.m2/repository/javax/servlet/javax.servlet-api/3.1.0/javax.servlet-api-3.1.0.jar \\\n        /Users/afarber/.m2/repository/org/eclipse/jetty/jetty-http/9.3.9.v20160517/jetty-http-9.3.9.v20160517.jar \\\n        /Users/afarber/.m2/repository/org/eclipse/jetty/jetty-util/9.3.9.v20160517/jetty-util-9.3.9.v20160517.jar \\\n        /Users/afarber/.m2/repository/org/eclipse/jetty/jetty-io/9.3.9.v20160517/jetty-io-9.3.9.v20160517.jar \\\n        /Users/afarber/.m2/repository/org/eclipse/jetty/jetty-servlet/9.3.9.v20160517/jetty-servlet-9.3.9.v20160517.jar \\\n        /Users/afarber/.m2/repository/org/eclipse/jetty/jetty-security/9.3.9.v20160517/jetty-security-9.3.9.v20160517.jar \\\n        /Users/afarber/.m2/repository/org/eclipse/jetty/websocket/websocket-api/9.3.9.v20160517/websocket-api-9.3.9.v20160517.jar \\\n        /Users/afarber/.m2/repository/org/eclipse/jetty/websocket/websocket-server/9.3.9.v20160517/websocket-server-9.3.9.v20160517.jar \\\n        /Users/afarber/.m2/repository/org/eclipse/jetty/websocket/websocket-common/9.3.9.v20160517/websocket-common-9.3.9.v20160517.jar \\\n        /Users/afarber/.m2/repository/org/eclipse/jetty/websocket/websocket-client/9.3.9.v20160517/websocket-client-9.3.9.v20160517.jar \\\n        /Users/afarber/.m2/repository/org/eclipse/jetty/websocket/websocket-servlet/9.3.9.v20160517/websocket-servlet-9.3.9.v20160517.jar \n</code></pre>\n\n<p>This way I can easier add and remove the paths, and sort them in Vim.</p>\n\n<p>My question is: how to join them back for my command?</p>\n\n<p><strong>UPDATE:</strong></p>\n\n<p>If all JAR-files would be located in the same dir, I could have used <a href=\"https://docs.oracle.com/javase/8/docs/technotes/tools/windows/classpath.html\" rel=\"nofollow\">the new Java 8 wildcard syntax</a> <code>java -classpath \"/that/dir/*\" de.afarber.MyServlet</code> - but that wasn't the case here.</p>\n"},{"tags":["java","spring","spring-mvc"],"answers":[{"tags":[],"owner":{"account_id":11253290,"reputation":1289,"user_id":9167731,"display_name":"Semyon Kirekov"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1646076940,"creation_date":1646076940,"answer_id":71300202,"question_id":71298885,"body_markdown":"You can implement a custom serializer. Take a look at the example.\r\n\r\n```java\r\npublic class UserDto {\r\n    protected Integer userId;\r\n    protected String userName;\r\n    protected String password;\r\n    @JsonSerialize(using = BooleanToStringSerializer.class)\r\n    protected boolean enabled;\r\n    @JsonSerialize(using = BooleanToStringSerializer.class)\r\n    protected boolean active;\r\n}\r\n\r\npublic class BooleanToStringSerializer extends JsonSerializer&lt;Boolean&gt; {\r\n\r\n    @Override\r\n    public void serialize(Boolean tmpBool, \r\n                          JsonGenerator jsonGenerator, \r\n                          SerializerProvider serializerProvider) \r\n                          throws IOException, JsonProcessingException {\r\n        jsonGenerator.writeObject(tmpBool ? &quot;Y&quot; : &quot;N&quot;);\r\n    }\r\n}\r\n```","title":"Convert fields before sending to the page","body":"<p>You can implement a custom serializer. Take a look at the example.</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class UserDto {\n    protected Integer userId;\n    protected String userName;\n    protected String password;\n    @JsonSerialize(using = BooleanToStringSerializer.class)\n    protected boolean enabled;\n    @JsonSerialize(using = BooleanToStringSerializer.class)\n    protected boolean active;\n}\n\npublic class BooleanToStringSerializer extends JsonSerializer&lt;Boolean&gt; {\n\n    @Override\n    public void serialize(Boolean tmpBool, \n                          JsonGenerator jsonGenerator, \n                          SerializerProvider serializerProvider) \n                          throws IOException, JsonProcessingException {\n        jsonGenerator.writeObject(tmpBool ? &quot;Y&quot; : &quot;N&quot;);\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":20683172,"reputation":81,"user_id":15186258,"display_name":"Natsuo"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":37,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":71300202,"answer_count":1,"score":0,"last_activity_date":1646078970,"creation_date":1646069691,"question_id":71298885,"body_markdown":"I have a user dto class and i need to convert some of its properties before send it to frontend.\r\n\r\nUsedDto class\r\n```\r\npublic class UserDto {\r\n    protected Integer userId;\r\n    protected String userName;\r\n    protected String password;\r\n    protected boolean enabled;\r\n    protected boolean active;\r\n}\r\n```\r\n\r\nNow, from my controller\r\n```\r\n@Override\r\npublic ResponseEntity&lt;UserDto&gt; getUser(Integer userId) {\r\n    return new ResponseEntity&lt;&gt;(userService.findById(userId), HttpStatus.OK);\r\n}\r\n```\r\ni get data like this\r\n```\r\n{\r\n&quot;userId&quot;: 141,\r\n&quot;userName&quot;: &quot;admin&quot;,\r\n&quot;password&quot;: &quot;password&quot;,\r\n&quot;enabled&quot;: true,\r\n&quot;active&quot;: false\r\n}\r\n```\r\nIn my case, before send data, i should convert boolean values (enabled, active) to string &quot;Y&quot; or &quot;N&quot;.\r\n```\r\n{\r\n&quot;userId&quot;: 141,\r\n&quot;userName&quot;: &quot;admin&quot;,\r\n&quot;password&quot;: &quot;password&quot;,\r\n&quot;enabled&quot;: &quot;Y&quot;,\r\n&quot;active&quot;: &quot;N&quot;\r\n}\r\n```\r\nHow can i do this?","title":"Convert fields before sending to the page","body":"<p>I have a user dto class and i need to convert some of its properties before send it to frontend.</p>\n<p>UsedDto class</p>\n<pre><code>public class UserDto {\n    protected Integer userId;\n    protected String userName;\n    protected String password;\n    protected boolean enabled;\n    protected boolean active;\n}\n</code></pre>\n<p>Now, from my controller</p>\n<pre><code>@Override\npublic ResponseEntity&lt;UserDto&gt; getUser(Integer userId) {\n    return new ResponseEntity&lt;&gt;(userService.findById(userId), HttpStatus.OK);\n}\n</code></pre>\n<p>i get data like this</p>\n<pre><code>{\n&quot;userId&quot;: 141,\n&quot;userName&quot;: &quot;admin&quot;,\n&quot;password&quot;: &quot;password&quot;,\n&quot;enabled&quot;: true,\n&quot;active&quot;: false\n}\n</code></pre>\n<p>In my case, before send data, i should convert boolean values (enabled, active) to string &quot;Y&quot; or &quot;N&quot;.</p>\n<pre><code>{\n&quot;userId&quot;: 141,\n&quot;userName&quot;: &quot;admin&quot;,\n&quot;password&quot;: &quot;password&quot;,\n&quot;enabled&quot;: &quot;Y&quot;,\n&quot;active&quot;: &quot;N&quot;\n}\n</code></pre>\n<p>How can i do this?</p>\n"},{"tags":["java","eclipse"],"answers":[{"tags":[],"owner":{"account_id":26295,"reputation":15672,"user_id":68283,"accept_rate":82,"display_name":"Rich"},"down_vote_count":1,"up_vote_count":9,"is_accepted":false,"score":8,"last_activity_date":1297268715,"creation_date":1297268715,"answer_id":4947602,"question_id":4947484,"body_markdown":"Have you tried setting the following -D parameters in the launch configuration?\r\n\r\n    -Duser.language=en -Duser.country=US -Duser.variant=EN","title":"How to set eclipse console locale/language","body":"<p>Have you tried setting the following -D parameters in the launch configuration?</p>\n\n<pre><code>-Duser.language=en -Duser.country=US -Duser.variant=EN\n</code></pre>\n"},{"tags":[],"owner":{"account_id":62516,"reputation":20965,"user_id":185723,"accept_rate":89,"display_name":"dimitrisli"},"down_vote_count":0,"up_vote_count":10,"is_accepted":false,"score":10,"last_activity_date":1297268770,"creation_date":1297268770,"answer_id":4947613,"question_id":4947484,"body_markdown":"Try adding `-Duser.language=en` in the bottom of your *eclipse.ini* which is found in your eclipse installation directory (keep a backup copy of the eclipse.ini before any changes).","title":"How to set eclipse console locale/language","body":"<p>Try adding <code>-Duser.language=en</code> in the bottom of your <em>eclipse.ini</em> which is found in your eclipse installation directory (keep a backup copy of the eclipse.ini before any changes).</p>\n"},{"tags":[],"owner":{"account_id":52822,"reputation":1088970,"user_id":157882,"accept_rate":93,"display_name":"BalusC"},"down_vote_count":1,"up_vote_count":58,"is_accepted":true,"score":57,"last_activity_date":1297268825,"creation_date":1297268825,"answer_id":4947628,"question_id":4947484,"body_markdown":"Go to *Window &gt; Preferences &gt; Java &gt; Installed JREs &gt; select preferred JRE &gt; Edit* and then add the following to *Default VM arguments*:\r\n\r\n&lt;pre&gt;-Duser.language=en -Duser.country=US&lt;/pre&gt;\r\n\r\n![enter image description here][1]\r\n\r\n\r\n  [1]: http://i.stack.imgur.com/rtpM0.png","title":"How to set eclipse console locale/language","body":"<p>Go to <em>Window > Preferences > Java > Installed JREs > select preferred JRE > Edit</em> and then add the following to <em>Default VM arguments</em>:</p>\n\n<pre>-Duser.language=en -Duser.country=US</pre>\n\n<p><img src=\"https://i.stack.imgur.com/rtpM0.png\" alt=\"enter image description here\"></p>\n"},{"tags":[],"owner":{"account_id":13222953,"reputation":731,"user_id":9549068,"display_name":"Nor.Z"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1646078316,"creation_date":1646077980,"answer_id":71300397,"question_id":4947484,"body_markdown":"&gt; As @Rich and other answers said above::\r\n\r\nYou can add `-Duser.language=en -Duser.country=US` to the `Run Configuration &gt; VM arg` for a specific java file.\r\n\r\n[![Add to the Run Configuration][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/1GxpJ.png","title":"How to set eclipse console locale/language","body":"<blockquote>\n<p>As @Rich and other answers said above::</p>\n</blockquote>\n<p>You can add <code>-Duser.language=en -Duser.country=US</code> to the <code>Run Configuration &gt; VM arg</code> for a specific java file.</p>\n<p><a href=\"https://i.stack.imgur.com/1GxpJ.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/1GxpJ.png\" alt=\"Add to the Run Configuration\" /></a></p>\n"}],"owner":{"account_id":21332,"reputation":5311,"user_id":51754,"accept_rate":76,"display_name":"Bob Rivers"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":55829,"favorite_count":0,"down_vote_count":0,"up_vote_count":35,"accepted_answer_id":4947628,"answer_count":4,"score":35,"last_activity_date":1646078316,"creation_date":1297268091,"question_id":4947484,"body_markdown":"When developing web application with Eclipse (Helios) the tomcat output is being sent to the console. Ok, but the messages are being translated to my OS language.\r\n\r\nIn fact, my Eclipse is in English, but the Tomcat output (logging) is being translated to Portuguese. Probably it&#39;s a Tomcat configuration issue, but I can&#39;t find where...\r\n\r\nHow do I change this behaviour? I want my entire Eclipse in English, including Tomcat.","title":"How to set eclipse console locale/language","body":"<p>When developing web application with Eclipse (Helios) the tomcat output is being sent to the console. Ok, but the messages are being translated to my OS language.</p>\n\n<p>In fact, my Eclipse is in English, but the Tomcat output (logging) is being translated to Portuguese. Probably it's a Tomcat configuration issue, but I can't find where...</p>\n\n<p>How do I change this behaviour? I want my entire Eclipse in English, including Tomcat.</p>\n"},{"tags":["java","memory","jvm"],"comments":[{"owner":{"account_id":7226774,"reputation":19717,"user_id":5515060,"accept_rate":100,"display_name":"Lino"},"score":0,"creation_date":1502049511,"post_id":45536049,"comment_id":78032158,"body_markdown":"How did *you* get the error in the first place?","body":"How did <i>you</i> get the error in the first place?"},{"owner":{"account_id":2871026,"reputation":31449,"user_id":2464386,"accept_rate":84,"display_name":"ajb"},"score":0,"creation_date":1502050362,"post_id":45536049,"comment_id":78032428,"body_markdown":"Have you tried Googling the error message?  There are some interesting results that might explain it, like https://gist.github.com/rednaxelafx/1372200/58a95fbf57be0930ceb448280f84e22217cfa37f in which someone looked at the C code of the JVM and found something about a SIGBUS error.","body":"Have you tried Googling the error message?  There are some interesting results that might explain it, like <a href=\"https://gist.github.com/rednaxelafx/1372200/58a95fbf57be0930ceb448280f84e22217cfa37f\" rel=\"nofollow noreferrer\">gist.github.com/rednaxelafx/1372200/&hellip;</a> in which someone looked at the C code of the JVM and found something about a SIGBUS error."},{"owner":{"account_id":5289685,"reputation":346,"user_id":4222618,"accept_rate":75,"display_name":"wFateem"},"score":1,"creation_date":1502061094,"post_id":45536049,"comment_id":78034921,"body_markdown":"I didn&#39;t personally run into this error, but I have been looking through some bugs reported in other software projects, like Kafka for instance and saw this particular error pop-up during different scenarios with different stacks. I was just curious about the error.","body":"I didn&#39;t personally run into this error, but I have been looking through some bugs reported in other software projects, like Kafka for instance and saw this particular error pop-up during different scenarios with different stacks. I was just curious about the error."},{"owner":{"account_id":431701,"reputation":637,"user_id":815944,"accept_rate":67,"display_name":"mac"},"score":2,"creation_date":1534599644,"post_id":45536049,"comment_id":90768585,"body_markdown":"Check out for disk errors (sudo dmesg -T)","body":"Check out for disk errors (sudo dmesg -T)"}],"answers":[{"tags":[],"owner":{"account_id":4210603,"reputation":94356,"user_id":3448419,"display_name":"apangin"},"down_vote_count":0,"up_vote_count":17,"is_accepted":true,"score":17,"last_activity_date":1502062141,"creation_date":1502053886,"answer_id":45536678,"question_id":45536049,"body_markdown":"This error means that `sun.misc.Unsafe.getX()` or `putX()` memory access resulted in [`SIGBUS`](https://en.wikipedia.org/wiki/Bus_error) error, which was then caught by JVM and translated to asynchronous `InternalError`.\r\n\r\nA bit more details:\r\n\r\n - `sun.misc.Unsafe` is JDK private API that allows to access native memory directly from Java. This API is a foundation for Direct ByteBuffers and particularly [MappedByteBuffers](http://docs.oracle.com/javase/8/docs/api/java/nio/MappedByteBuffer.html).\r\n - In certain cases an access to memory-mapped region of a file may lead to OS-level exception, namely `SIGBUS`. Typical examples are:\r\n\r\n   1. A memory-mapped buffer is accessed after the underlying file has been truncated.\r\n   2. A file on a network drive has been mapped to memory, and the mapped buffer is accessed after the network connection has been lost.\r\n   3. An attempt to write to a page mapped to a file on `tmpfs` filesystem results in out-of-memory (by default `tmpfs` space is limited by 50% of total RAM).\r\n\r\n - HotSpot JVM cannot efficiently detect these problems beforehand. It compiles `Unsafe.getX / putX` calls to a simple memory access instruction. Additional checks to see if a memory region is valid would be too expensive.\r\n - Instead JVM handles `SIGBUG` signal. If it sees the error has happened in `Unsafe` call, it posts `InternalError` to current thread and continues execution.\r\n - `IOException` would be more appropriate, but JVM cannot throw it or any other exception, since `ByteBuffer` public contract does not allow its `get/put` methods to throw any exception.\r\n - If `Unsafe` memory access has failed in JIT-compiled method, JVM does not throw an exception immediately (again, it would be too expensive for such hot ByteBuffer API). Instead it posts *asynchronous* `InternalError` to the current thread. It means the error would be actually thrown at the nearest native method or at the nearest call to VM runtime. Hence the word *&quot;recent&quot;* in the error message.\r\n\r\nSee [JDK-4454115 comments](https://bugs.openjdk.java.net/browse/JDK-4454115?focusedCommentId=12548406&amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12548406) describing the solution for the related JDK bug.","title":"java.lang.InternalError: a fault occurred in a recent unsafe memory access operation in compiled Java code","body":"<p>This error means that <code>sun.misc.Unsafe.getX()</code> or <code>putX()</code> memory access resulted in <a href=\"https://en.wikipedia.org/wiki/Bus_error\" rel=\"noreferrer\"><code>SIGBUS</code></a> error, which was then caught by JVM and translated to asynchronous <code>InternalError</code>.</p>\n\n<p>A bit more details:</p>\n\n<ul>\n<li><code>sun.misc.Unsafe</code> is JDK private API that allows to access native memory directly from Java. This API is a foundation for Direct ByteBuffers and particularly <a href=\"http://docs.oracle.com/javase/8/docs/api/java/nio/MappedByteBuffer.html\" rel=\"noreferrer\">MappedByteBuffers</a>.</li>\n<li><p>In certain cases an access to memory-mapped region of a file may lead to OS-level exception, namely <code>SIGBUS</code>. Typical examples are:</p>\n\n<ol>\n<li>A memory-mapped buffer is accessed after the underlying file has been truncated.</li>\n<li>A file on a network drive has been mapped to memory, and the mapped buffer is accessed after the network connection has been lost.</li>\n<li>An attempt to write to a page mapped to a file on <code>tmpfs</code> filesystem results in out-of-memory (by default <code>tmpfs</code> space is limited by 50% of total RAM).</li>\n</ol></li>\n<li><p>HotSpot JVM cannot efficiently detect these problems beforehand. It compiles <code>Unsafe.getX / putX</code> calls to a simple memory access instruction. Additional checks to see if a memory region is valid would be too expensive.</p></li>\n<li>Instead JVM handles <code>SIGBUG</code> signal. If it sees the error has happened in <code>Unsafe</code> call, it posts <code>InternalError</code> to current thread and continues execution.</li>\n<li><code>IOException</code> would be more appropriate, but JVM cannot throw it or any other exception, since <code>ByteBuffer</code> public contract does not allow its <code>get/put</code> methods to throw any exception.</li>\n<li>If <code>Unsafe</code> memory access has failed in JIT-compiled method, JVM does not throw an exception immediately (again, it would be too expensive for such hot ByteBuffer API). Instead it posts <em>asynchronous</em> <code>InternalError</code> to the current thread. It means the error would be actually thrown at the nearest native method or at the nearest call to VM runtime. Hence the word <em>\"recent\"</em> in the error message.</li>\n</ul>\n\n<p>See <a href=\"https://bugs.openjdk.java.net/browse/JDK-4454115?focusedCommentId=12548406&amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12548406\" rel=\"noreferrer\">JDK-4454115 comments</a> describing the solution for the related JDK bug.</p>\n"},{"tags":[],"owner":{"account_id":15741633,"reputation":21,"user_id":11358871,"display_name":"Сергей Кондурушкин"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1574436221,"creation_date":1574435858,"answer_id":58997118,"question_id":45536049,"body_markdown":"This error may be induced by corrupted index which in turn becomes corrupted due to `java.io.IOException: No space left on device`\r\n\r\nLook into your_kafka_home/logs/server.log\r\n \r\nIt all starts like this:\r\n\r\n    [2019-11-22 17:27:25,204] FATAL [Replica Manager on Broker 1]: Halting due to unrecoverable I/O error while handling produce request:  (kafka.server.ReplicaManager)\r\n    kafka.common.KafkaStorageException: I/O exception in append to log &#39;xxx-response-1-0&#39;\r\n    \tat kafka.log.Log.append(Log.scala:443)\r\n    \tat kafka.cluster.Partition.$anonfun$appendRecordsToLeader$1(Partition.scala:451)\r\n    Caused by: java.io.IOException: No space left on device\r\n    \tat sun.nio.ch.FileDispatcherImpl.write0(Native Method)\r\n    \tat sun.nio.ch.FileDispatcherImpl.write(FileDispatcherImpl.java:60)\r\n    \tat sun.nio.ch.IOUtil.writeFromNativeBuffer(IOUtil.java:93)\r\n    \tat sun.nio.ch.IOUtil.write(IOUtil.java:65)\r\n    \tat sun.nio.ch.FileChannelImpl.write(FileChannelImpl.java:211)\r\n    \tat org.apache.kafka.common.record.MemoryRecords.writeFullyTo(MemoryRecords.java:82)\r\n    \tat org.apache.kafka.common.record.FileRecords.append(FileRecords.java:159)\r\n    \tat kafka.log.LogSegment.append(LogSegment.scala:110)\r\n    \tat kafka.log.Log.append(Log.scala:429)\r\n    \t... 21 more\r\n\r\nis followed by (possibly mutilple times):\r\n\r\n    [2019-11-22 17:28:00,395] WARN Found a corrupted index file due to requirement\r\n    failed: Corrupt index found, index file (/opt/kafka/kafka-logs/__consumer_offsets- \r\n    9/00000000000000000000.index) has non-zero size but the last offset is 0 which is no\r\n    larger than the base offset 0.}. deleting /opt/kafka/kafka-logs/__consumer_offsets-9\r\n    /00000000000000000000.timeindex, /opt/kafka/kafka-logs/__consumer_offsets-9\r\n    /00000000000000000000.index and rebuilding index... (kafka.log.Log)\r\n\r\nand finally comes to :\r\n\r\n    [2019-11-22 17:28:02,025] FATAL [Kafka Server 1], Fatal error during KafkaServer startup. Prepare to shutdown (kafka.server.KafkaServer)\r\n    java.lang.InternalError: **a fault occurred in a recent unsafe memory access operation in compiled Java code**\r\n    \tat scala.runtime.java8.JFunction0$mcV$sp.apply(JFunction0$mcV$sp.java:12)\r\n    \tat kafka.utils.CoreUtils$.inLock(CoreUtils.scala:213)\r\n    \tat kafka.log.TimeIndex.maybeAppend(TimeIndex.scala:107)\r\n    \tat kafka.log.LogSegment.$anonfun$recover$1(LogSegment.scala:238\r\n\r\n","title":"java.lang.InternalError: a fault occurred in a recent unsafe memory access operation in compiled Java code","body":"<p>This error may be induced by corrupted index which in turn becomes corrupted due to <code>java.io.IOException: No space left on device</code></p>\n\n<p>Look into your_kafka_home/logs/server.log</p>\n\n<p>It all starts like this:</p>\n\n<pre><code>[2019-11-22 17:27:25,204] FATAL [Replica Manager on Broker 1]: Halting due to unrecoverable I/O error while handling produce request:  (kafka.server.ReplicaManager)\nkafka.common.KafkaStorageException: I/O exception in append to log 'xxx-response-1-0'\n    at kafka.log.Log.append(Log.scala:443)\n    at kafka.cluster.Partition.$anonfun$appendRecordsToLeader$1(Partition.scala:451)\nCaused by: java.io.IOException: No space left on device\n    at sun.nio.ch.FileDispatcherImpl.write0(Native Method)\n    at sun.nio.ch.FileDispatcherImpl.write(FileDispatcherImpl.java:60)\n    at sun.nio.ch.IOUtil.writeFromNativeBuffer(IOUtil.java:93)\n    at sun.nio.ch.IOUtil.write(IOUtil.java:65)\n    at sun.nio.ch.FileChannelImpl.write(FileChannelImpl.java:211)\n    at org.apache.kafka.common.record.MemoryRecords.writeFullyTo(MemoryRecords.java:82)\n    at org.apache.kafka.common.record.FileRecords.append(FileRecords.java:159)\n    at kafka.log.LogSegment.append(LogSegment.scala:110)\n    at kafka.log.Log.append(Log.scala:429)\n    ... 21 more\n</code></pre>\n\n<p>is followed by (possibly mutilple times):</p>\n\n<pre><code>[2019-11-22 17:28:00,395] WARN Found a corrupted index file due to requirement\nfailed: Corrupt index found, index file (/opt/kafka/kafka-logs/__consumer_offsets- \n9/00000000000000000000.index) has non-zero size but the last offset is 0 which is no\nlarger than the base offset 0.}. deleting /opt/kafka/kafka-logs/__consumer_offsets-9\n/00000000000000000000.timeindex, /opt/kafka/kafka-logs/__consumer_offsets-9\n/00000000000000000000.index and rebuilding index... (kafka.log.Log)\n</code></pre>\n\n<p>and finally comes to :</p>\n\n<pre><code>[2019-11-22 17:28:02,025] FATAL [Kafka Server 1], Fatal error during KafkaServer startup. Prepare to shutdown (kafka.server.KafkaServer)\njava.lang.InternalError: **a fault occurred in a recent unsafe memory access operation in compiled Java code**\n    at scala.runtime.java8.JFunction0$mcV$sp.apply(JFunction0$mcV$sp.java:12)\n    at kafka.utils.CoreUtils$.inLock(CoreUtils.scala:213)\n    at kafka.log.TimeIndex.maybeAppend(TimeIndex.scala:107)\n    at kafka.log.LogSegment.$anonfun$recover$1(LogSegment.scala:238\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2340745,"reputation":7243,"user_id":2052097,"accept_rate":85,"display_name":"z atef"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1646078118,"creation_date":1646078118,"answer_id":71300424,"question_id":45536049,"body_markdown":"This can also happen due to disk space issues.\r\n\r\n","title":"java.lang.InternalError: a fault occurred in a recent unsafe memory access operation in compiled Java code","body":"<p>This can also happen due to disk space issues.</p>\n"}],"owner":{"account_id":5289685,"reputation":346,"user_id":4222618,"accept_rate":75,"display_name":"wFateem"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":13117,"favorite_count":0,"down_vote_count":0,"up_vote_count":7,"accepted_answer_id":45536678,"answer_count":3,"score":7,"last_activity_date":1646078118,"creation_date":1502049370,"question_id":45536049,"body_markdown":"I was wondering if some of the JVM gurus out there can briefly explain the following error. What does it actually mean in technical terms and what are the sequences of events that can lead to this error?\r\n\r\n    java.lang.InternalError: a fault occurred in a recent unsafe memory access operation in compiled Java code\r\n\r\n","title":"java.lang.InternalError: a fault occurred in a recent unsafe memory access operation in compiled Java code","body":"<p>I was wondering if some of the JVM gurus out there can briefly explain the following error. What does it actually mean in technical terms and what are the sequences of events that can lead to this error?</p>\n\n<pre><code>java.lang.InternalError: a fault occurred in a recent unsafe memory access operation in compiled Java code\n</code></pre>\n"},{"tags":["java","android","arraylist","collections"],"comments":[{"owner":{"account_id":2562742,"reputation":5917,"user_id":2851311,"display_name":"hfontanez"},"score":0,"creation_date":1646077791,"post_id":71299796,"comment_id":126031072,"body_markdown":"What is `serviceItem`? Please include the entire `ServiceItem` class as well.","body":"What is <code>serviceItem</code>? Please include the entire <code>ServiceItem</code> class as well."},{"owner":{"account_id":2562742,"reputation":5917,"user_id":2851311,"display_name":"hfontanez"},"score":0,"creation_date":1646078579,"post_id":71299796,"comment_id":126031304,"body_markdown":"That is not the whole class. Please edit your question again.","body":"That is not the whole class. Please edit your question again."},{"owner":{"account_id":2562742,"reputation":5917,"user_id":2851311,"display_name":"hfontanez"},"score":0,"creation_date":1646151531,"post_id":71299796,"comment_id":126050240,"body_markdown":"I don&#39;t see an update yet. You need to provide the class with all their methods. It is important to see what these methods do for us to figure out the issue.","body":"I don&#39;t see an update yet. You need to provide the class with all their methods. It is important to see what these methods do for us to figure out the issue."}],"answers":[{"tags":[],"owner":{"account_id":2562742,"reputation":5917,"user_id":2851311,"display_name":"hfontanez"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1646077527,"creation_date":1646076873,"answer_id":71300195,"question_id":71299796,"body_markdown":"This is caused by the same instance of the service class being added to all elements of the list. When this happens, any element modified will result in all references to change (since they are the same). This example illustrates what&#39;s happening.\r\n\r\n```\r\npublic class BooleanListDemo {\r\n\tpublic static void main(String[] args) {\r\n\t\tList&lt;ServiceClass&gt; bools = new ArrayList&lt;&gt;(5);\r\n\t\tServiceClass svc = new ServiceClass();\r\n\t\t\r\n\t\tfor(int i = 0; i &lt; 5; i++) {\r\n\t\t\tbools.add(i, svc);\r\n\t\t}\r\n\t\tbools.forEach(System.out::println);\r\n\r\n\t\tbools.get(0).isSelected(true);\r\n\t\tbools.forEach(System.out::println);\r\n\r\n\t}\r\n\t\r\n\tprivate static class ServiceClass {\r\n\t\tprivate boolean isSelected;\r\n\t\t\r\n\t\tpublic void isSelected(boolean selected) {\r\n\t\t\tthis.isSelected = selected;\r\n\t\t}\r\n\t\t\r\n\t\t@Override\r\n\t\tpublic String toString() {\r\n\t\t\treturn String.valueOf(isSelected);\r\n\t\t}\r\n\t}\r\n}\r\n```\r\nThis outputs:\r\n```\r\nfalse\r\nfalse\r\nfalse\r\nfalse\r\nfalse\r\ntrue\r\ntrue\r\ntrue\r\ntrue\r\ntrue\r\n```\r\nIn your case, the list was instantiated and populated upstream. You need to check the code that generated the list and confirm this is happening as I described. Then, to avoid this, new (different) instances must be added to the list.\r\n```\r\nfor(int i = 0; i &lt; 5; i++) {\r\n\tbools.add(i, new ServiceClass());\r\n}\r\n```\r\nNow, you can safely change any index without worrying about all instances changing.\r\n\r\n----------\r\n**NOTE**: In Java, objects are basically pointers. The main error developers make is thinking that because each index location in an array or a list is unique, they assume that adding the same object to each location (magically) makes each object unique. What is indeed happening is that each distinct index location contains the same value, which happens to be a pointer to a location in memory. And, since each index contains the same address in memory, changing the value of one index changes the value of all indexes. By adding a new instance of `ServiceClass` to each location prevents this problem; even though internally every new instance is the same. Invoking the `new` operator sets distinct pointers to each location. So, changing one index isolates the change to that one location and no more.\r\n","title":"Updating a setter of an ArrayList using index results in modifying values of all elements?","body":"<p>This is caused by the same instance of the service class being added to all elements of the list. When this happens, any element modified will result in all references to change (since they are the same). This example illustrates what's happening.</p>\n<pre><code>public class BooleanListDemo {\n    public static void main(String[] args) {\n        List&lt;ServiceClass&gt; bools = new ArrayList&lt;&gt;(5);\n        ServiceClass svc = new ServiceClass();\n        \n        for(int i = 0; i &lt; 5; i++) {\n            bools.add(i, svc);\n        }\n        bools.forEach(System.out::println);\n\n        bools.get(0).isSelected(true);\n        bools.forEach(System.out::println);\n\n    }\n    \n    private static class ServiceClass {\n        private boolean isSelected;\n        \n        public void isSelected(boolean selected) {\n            this.isSelected = selected;\n        }\n        \n        @Override\n        public String toString() {\n            return String.valueOf(isSelected);\n        }\n    }\n}\n</code></pre>\n<p>This outputs:</p>\n<pre><code>false\nfalse\nfalse\nfalse\nfalse\ntrue\ntrue\ntrue\ntrue\ntrue\n</code></pre>\n<p>In your case, the list was instantiated and populated upstream. You need to check the code that generated the list and confirm this is happening as I described. Then, to avoid this, new (different) instances must be added to the list.</p>\n<pre><code>for(int i = 0; i &lt; 5; i++) {\n    bools.add(i, new ServiceClass());\n}\n</code></pre>\n<p>Now, you can safely change any index without worrying about all instances changing.</p>\n<hr />\n<p><strong>NOTE</strong>: In Java, objects are basically pointers. The main error developers make is thinking that because each index location in an array or a list is unique, they assume that adding the same object to each location (magically) makes each object unique. What is indeed happening is that each distinct index location contains the same value, which happens to be a pointer to a location in memory. And, since each index contains the same address in memory, changing the value of one index changes the value of all indexes. By adding a new instance of <code>ServiceClass</code> to each location prevents this problem; even though internally every new instance is the same. Invoking the <code>new</code> operator sets distinct pointers to each location. So, changing one index isolates the change to that one location and no more.</p>\n"}],"owner":{"account_id":6976446,"reputation":9597,"user_id":5351055,"display_name":"Manoj Perumarath"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":152,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1646078094,"creation_date":1646074712,"question_id":71299796,"body_markdown":"Whenever an item in a RecyclerView is clicked I just return the item. sets the value of it as true using `setSelected(true)`. But it changes the `isSelected` boolean of the entire `ArrayList` as true.\r\n  \r\n    @Override\r\n    public void onParentItemReturn(ServiceItem serviceItem, int parentPosition, int position, boolean isMajor, boolean isSelected) {\r\n        showToast(Services.this, &quot;callback&quot;);\r\n        serviceItem.getServices().get(0).setSelected(true);\r\n        finalServiceItems.set(parentPosition, serviceItem);\r\n        servicesAdapter.notifyItemChanged(parentPosition);\r\n    }\r\n\r\nService Class\r\n\r\n    private boolean isSelected;\r\n\r\n    public void setSelected(boolean selected) {\r\n        isSelected = selected;\r\n    }\r\n\r\nI tried debugging the code, once the setSelected line is executed the entire ArrayList gets modified to true.\r\n\r\nAlso tried something like this,\r\n   \r\n    ServiceItem item = new ServiceItem();\r\n        item.setServices(serviceItem.getServices());\r\n        item.setAddon(serviceItem.getAddon());\r\n        item.getServices().get(0).setServiceName(&quot;hgutrue&quot;);\r\n        finalServiceItems.set(2, item);\r\n\r\nthis resulted in changing name of all items.\r\n\r\n     public class ServiceItem implements Serializable {\r\n\r\n\r\n    @SerializedName(&quot;services&quot;)\r\n    private ArrayList&lt;GService&gt; services;\r\n\r\n    @SerializedName(&quot;addon&quot;)\r\n    private ArrayList&lt;GService&gt; addon;\r\n\r\n\r\n    public class GService implements Serializable {\r\n\r\n    @SerializedName(&quot;id&quot;)\r\n    public int id;\r\n\r\n    @SerializedName(&quot;serviceName&quot;)\r\n    public String serviceName;\r\n\r\n    @SerializedName(&quot;isSelected&quot;)\r\n    private boolean isSelected;\r\n","title":"Updating a setter of an ArrayList using index results in modifying values of all elements?","body":"<p>Whenever an item in a RecyclerView is clicked I just return the item. sets the value of it as true using <code>setSelected(true)</code>. But it changes the <code>isSelected</code> boolean of the entire <code>ArrayList</code> as true.</p>\n<pre><code>@Override\npublic void onParentItemReturn(ServiceItem serviceItem, int parentPosition, int position, boolean isMajor, boolean isSelected) {\n    showToast(Services.this, &quot;callback&quot;);\n    serviceItem.getServices().get(0).setSelected(true);\n    finalServiceItems.set(parentPosition, serviceItem);\n    servicesAdapter.notifyItemChanged(parentPosition);\n}\n</code></pre>\n<p>Service Class</p>\n<pre><code>private boolean isSelected;\n\npublic void setSelected(boolean selected) {\n    isSelected = selected;\n}\n</code></pre>\n<p>I tried debugging the code, once the setSelected line is executed the entire ArrayList gets modified to true.</p>\n<p>Also tried something like this,</p>\n<pre><code>ServiceItem item = new ServiceItem();\n    item.setServices(serviceItem.getServices());\n    item.setAddon(serviceItem.getAddon());\n    item.getServices().get(0).setServiceName(&quot;hgutrue&quot;);\n    finalServiceItems.set(2, item);\n</code></pre>\n<p>this resulted in changing name of all items.</p>\n<pre><code> public class ServiceItem implements Serializable {\n\n\n@SerializedName(&quot;services&quot;)\nprivate ArrayList&lt;GService&gt; services;\n\n@SerializedName(&quot;addon&quot;)\nprivate ArrayList&lt;GService&gt; addon;\n\n\npublic class GService implements Serializable {\n\n@SerializedName(&quot;id&quot;)\npublic int id;\n\n@SerializedName(&quot;serviceName&quot;)\npublic String serviceName;\n\n@SerializedName(&quot;isSelected&quot;)\nprivate boolean isSelected;\n</code></pre>\n"},{"tags":["java","json","jackson","fasterxml","json-simple"],"comments":[{"owner":{"account_id":1107169,"reputation":6727,"user_id":1098361,"accept_rate":86,"display_name":"Zack Macomber"},"score":0,"creation_date":1646076527,"post_id":71300006,"comment_id":126030673,"body_markdown":"Not sure what the question is here...you can use whatever you like to read in a json file and then update those values...a web page, command line program, rest api, etc...take your pick...","body":"Not sure what the question is here...you can use whatever you like to read in a json file and then update those values...a web page, command line program, rest api, etc...take your pick..."},{"owner":{"account_id":9642226,"reputation":1060,"user_id":7156098,"display_name":"alegria"},"score":2,"creation_date":1646077870,"post_id":71300006,"comment_id":126031102,"body_markdown":"I see that you are a fresh member. First of all, Welcome aboard ! \nSecondly, this is not a forum where you can just post a specific task and expect answers. Instead, you must generalize your question so others can benefit from it, also it would be easier to find an answer if you ask for directions to the solution rather than a tailored answer just for you.\nWhat seems to be helpful to you is a tool called &quot;templating engine&quot;. There are frameworks in Java that does what you are expecting with a very easy to use API. Have you ever looked around for such thing ?","body":"I see that you are a fresh member. First of all, Welcome aboard !  Secondly, this is not a forum where you can just post a specific task and expect answers. Instead, you must generalize your question so others can benefit from it, also it would be easier to find an answer if you ask for directions to the solution rather than a tailored answer just for you. What seems to be helpful to you is a tool called &quot;templating engine&quot;. There are frameworks in Java that does what you are expecting with a very easy to use API. Have you ever looked around for such thing ?"},{"owner":{"account_id":5806852,"reputation":57,"user_id":4579234,"accept_rate":0,"display_name":"Nikhil Vernekar"},"score":0,"creation_date":1646078648,"post_id":71300006,"comment_id":126031320,"body_markdown":"@alegria Hi, thanks for the reply. I will look into templating engine. Also, this json is just an example to explain what is the requirement in general!","body":"@alegria Hi, thanks for the reply. I will look into templating engine. Also, this json is just an example to explain what is the requirement in general!"}],"owner":{"account_id":5806852,"reputation":57,"user_id":4579234,"accept_rate":0,"display_name":"Nikhil Vernekar"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":388,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1646077393,"creation_date":1646075903,"question_id":71300006,"body_markdown":"I have a json template file. Using java program, I need to read the template and create a new json file with updated values.\r\n\r\nExample Template json example:\r\n\r\n    {\r\n        &quot;page&quot;: 2,\r\n        &quot;per_page&quot;: 6,\r\n        &quot;total&quot;: 12,\r\n        &quot;total_pages&quot;: 2,\r\n        &quot;data&quot;: [\r\n            {\r\n                &quot;id&quot;: 7,\r\n                &quot;email&quot;: &quot;michael.lawson@reqres.in&quot;,\r\n                &quot;first_name&quot;: &quot;Michael&quot;,\r\n                &quot;last_name&quot;: &quot;Lawson&quot;,\r\n                &quot;avatar&quot;: &quot;https://reqres.in/img/faces/7-image.jpg&quot;\r\n            }\r\n        ],\r\n        &quot;support&quot;: {\r\n            &quot;url&quot;: &quot;https://reqres.in/#support-heading&quot;,\r\n            &quot;text&quot;: &quot;To keep ReqRes free, contributions towards server costs are appreciated!&quot;\r\n        }\r\n    }\r\n\r\nExpected output json file: (updated page,first name, last name, email, text)\r\n\r\n    {\r\n        &quot;page&quot;: 3,\r\n        &quot;per_page&quot;: 6,\r\n        &quot;total&quot;: 12,\r\n        &quot;total_pages&quot;: 2,\r\n        &quot;data&quot;: [\r\n            {\r\n                &quot;id&quot;: 7,\r\n                &quot;email&quot;: &quot;updated@email.com&quot;,\r\n                &quot;first_name&quot;: &quot;MichaelPatric&quot;,\r\n                &quot;last_name&quot;: &quot;lastName&quot;,\r\n                &quot;avatar&quot;: &quot;https://reqres.in/img/faces/7-image.jpg&quot;\r\n            }\r\n        ],\r\n        &quot;support&quot;: {\r\n            &quot;url&quot;: &quot;https://reqres.in/#support-heading&quot;,\r\n            &quot;text&quot;: &quot;text udpated&quot;\r\n        }\r\n    }\r\n\r\nNeed a generic java code/logic using which we can modify any values from template json and create new output json file.\r\nThanks in advance!","title":"Create new json file using json template file","body":"<p>I have a json template file. Using java program, I need to read the template and create a new json file with updated values.</p>\n<p>Example Template json example:</p>\n<pre><code>{\n    &quot;page&quot;: 2,\n    &quot;per_page&quot;: 6,\n    &quot;total&quot;: 12,\n    &quot;total_pages&quot;: 2,\n    &quot;data&quot;: [\n        {\n            &quot;id&quot;: 7,\n            &quot;email&quot;: &quot;michael.lawson@reqres.in&quot;,\n            &quot;first_name&quot;: &quot;Michael&quot;,\n            &quot;last_name&quot;: &quot;Lawson&quot;,\n            &quot;avatar&quot;: &quot;https://reqres.in/img/faces/7-image.jpg&quot;\n        }\n    ],\n    &quot;support&quot;: {\n        &quot;url&quot;: &quot;https://reqres.in/#support-heading&quot;,\n        &quot;text&quot;: &quot;To keep ReqRes free, contributions towards server costs are appreciated!&quot;\n    }\n}\n</code></pre>\n<p>Expected output json file: (updated page,first name, last name, email, text)</p>\n<pre><code>{\n    &quot;page&quot;: 3,\n    &quot;per_page&quot;: 6,\n    &quot;total&quot;: 12,\n    &quot;total_pages&quot;: 2,\n    &quot;data&quot;: [\n        {\n            &quot;id&quot;: 7,\n            &quot;email&quot;: &quot;updated@email.com&quot;,\n            &quot;first_name&quot;: &quot;MichaelPatric&quot;,\n            &quot;last_name&quot;: &quot;lastName&quot;,\n            &quot;avatar&quot;: &quot;https://reqres.in/img/faces/7-image.jpg&quot;\n        }\n    ],\n    &quot;support&quot;: {\n        &quot;url&quot;: &quot;https://reqres.in/#support-heading&quot;,\n        &quot;text&quot;: &quot;text udpated&quot;\n    }\n}\n</code></pre>\n<p>Need a generic java code/logic using which we can modify any values from template json and create new output json file.\nThanks in advance!</p>\n"},{"tags":["java","unit-testing","mockito","jbpm","powermockito"],"answers":[{"tags":[],"owner":{"account_id":13009853,"reputation":395,"user_id":9403279,"display_name":"cidra"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1646076958,"creation_date":1646065345,"answer_id":71297999,"question_id":71297814,"body_markdown":"The problem is not related to the fact that you&#39;re mocking a void method. The problem lies in your usage of the ``any()`` method.  \r\n\r\n    when(mockUtils).insertAmsErrors(any(), any(), any(), any(), any());  \r\n\r\nThe 5th required parameter is of type ``long`` and for this reason you should use the dedicated ``anyLong()`` method for it instead. This applies to all primitive types: ``anyInt()`` for ``int`` parameters, ``anyBoolean()`` for ``boolean`` parameters and so on...  \r\n\r\nThe reason behind this is that Mockito&#39;s ``any()`` method returns ``null`` *by design*, inducing a NPE when there is an attempt to unbox it. See this [related answer][1] for more details about it.  \r\n\r\n(On a side note) Another potential problem could rise by the fact that your ``utils`` field is ``static``, ``private`` and with an hardcoded dependency. This is not a good target for stubbing and you should probably rethink this by making, for example, the field non-static and then injecting the dependency.  \r\n\r\n    public class EmailNotificationWorkItemHandler() extends AbstractLogOrThrowWorkItemHandler {\r\n        private Utils utils;\r\n        \r\n        public EmailNotificationWorkItemHandler(Utils utils){\r\n            this.utils = utils;\r\n        }\r\n        ...\r\n    }  \r\n\r\n\r\nThis way you can pass the mocked object during your unit tests.  \r\n\r\n   \r\n\r\n  [1]: https://stackoverflow.com/a/49618861/9403279","title":"Mocking void unit tests with Mockito","body":"<p>The problem is not related to the fact that you're mocking a void method. The problem lies in your usage of the <code>any()</code> method.</p>\n<pre><code>when(mockUtils).insertAmsErrors(any(), any(), any(), any(), any());  \n</code></pre>\n<p>The 5th required parameter is of type <code>long</code> and for this reason you should use the dedicated <code>anyLong()</code> method for it instead. This applies to all primitive types: <code>anyInt()</code> for <code>int</code> parameters, <code>anyBoolean()</code> for <code>boolean</code> parameters and so on...</p>\n<p>The reason behind this is that Mockito's <code>any()</code> method returns <code>null</code> <em>by design</em>, inducing a NPE when there is an attempt to unbox it. See this <a href=\"https://stackoverflow.com/a/49618861/9403279\">related answer</a> for more details about it.</p>\n<p>(On a side note) Another potential problem could rise by the fact that your <code>utils</code> field is <code>static</code>, <code>private</code> and with an hardcoded dependency. This is not a good target for stubbing and you should probably rethink this by making, for example, the field non-static and then injecting the dependency.</p>\n<pre><code>public class EmailNotificationWorkItemHandler() extends AbstractLogOrThrowWorkItemHandler {\n    private Utils utils;\n    \n    public EmailNotificationWorkItemHandler(Utils utils){\n        this.utils = utils;\n    }\n    ...\n}  \n</code></pre>\n<p>This way you can pass the mocked object during your unit tests.</p>\n"}],"owner":{"account_id":7897306,"reputation":570,"user_id":5965533,"display_name":"Dr Dave"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":419,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1646076958,"creation_date":1646064455,"question_id":71297814,"body_markdown":"Having had many issues in unit testing my application please help address my simplest issue - mocking void methods, per [a few stack overflow articles][1] and [common references in articles][2]. My Java code in a JBPM application WorkItemHandler follows the pattern of\r\n```\r\npublic class EmailNotificationWorkItemHandler() extends AbstractLogOrThrowWorkItemHandler {\r\n  private static Utils utils = new Utils() ; \r\n\r\n  public void executeWorkItem(WorkItem workItem, WorkItemManager manager) { \r\n    if (&lt;condition&gt;) {\r\n\t        utils.insertAmsErrors(&lt;param&gt;, &lt;param&gt;, &lt;param&gt;, &lt;param&gt;, &lt;param&gt;);    \t\t\r\n\t        return;\r\n        }\r\n ....\r\n     try { \r\n         RequiredParameterValidator.validate(this.getClass(), workItem);\r\n...\r\n   }\r\n```  \r\nI have been trying to stub Utils and its insertAmsErrors method to test RequiredParameterValidator.validate used later in executeWorkItem.  The references imply that the void call to utils and its insertAmsErrors method could be a very basic stub of\r\n```\r\n\t  Utils mockUtils = mock(Utils.class);\r\n\r\n\t  doAnswer(new Answer&lt;Void&gt;() {\r\n\t\t  public Void answer(InvocationOnMock invocation) {\r\n\t\t         Object[] args = invocation.getArguments();\r\n\t\t         //Mock mock = (Mock) invocation.getMock();  Doesn&#39;t solve NPE\r\n\t\t         return null;\r\n\t\t    }\t\t  \r\n\t  }).when(mockUtils).insertAmsErrors(any(), any(), any(), any(), any()); // NPE here\r\n```\r\nbut the stub throws a null pointer exception at &quot;NPE here&quot;.   Utils.insertAmsErrors signature is\r\n```\r\npublic void insertAmsErrors(String id, ErrorCode error, String errorMsg, \r\n\t\t  StackTraceElement [] stackTrace, long processId) \r\n```\r\nI also considered using a spy, per another answer in the same posting, but my unit test is not calling insertAmsErrors on an instance of Utils, but rather executeWorkItem in EmailNotificationWorkItemHandler is making such a call.\r\n\r\nHow should I correctly mock the Utils class and its insertAmsErrors method so that I can test RequiredParameterValidator.validate in executeWorkItem?\r\n\r\n  [1]: https://stackoverflow.com/questions/2276271/how-to-mock-void-methods-with-mockito\r\n  [2]: https://javadoc.io/static/org.mockito/mockito-core/4.3.1/org/mockito/Mockito.html#doAnswer-org.mockito.stubbing.Answer-","title":"Mocking void unit tests with Mockito","body":"<p>Having had many issues in unit testing my application please help address my simplest issue - mocking void methods, per <a href=\"https://stackoverflow.com/questions/2276271/how-to-mock-void-methods-with-mockito\">a few stack overflow articles</a> and <a href=\"https://javadoc.io/static/org.mockito/mockito-core/4.3.1/org/mockito/Mockito.html#doAnswer-org.mockito.stubbing.Answer-\" rel=\"nofollow noreferrer\">common references in articles</a>. My Java code in a JBPM application WorkItemHandler follows the pattern of</p>\n<pre><code>public class EmailNotificationWorkItemHandler() extends AbstractLogOrThrowWorkItemHandler {\n  private static Utils utils = new Utils() ; \n\n  public void executeWorkItem(WorkItem workItem, WorkItemManager manager) { \n    if (&lt;condition&gt;) {\n            utils.insertAmsErrors(&lt;param&gt;, &lt;param&gt;, &lt;param&gt;, &lt;param&gt;, &lt;param&gt;);         \n            return;\n        }\n ....\n     try { \n         RequiredParameterValidator.validate(this.getClass(), workItem);\n...\n   }\n</code></pre>\n<p>I have been trying to stub Utils and its insertAmsErrors method to test RequiredParameterValidator.validate used later in executeWorkItem.  The references imply that the void call to utils and its insertAmsErrors method could be a very basic stub of</p>\n<pre><code>      Utils mockUtils = mock(Utils.class);\n\n      doAnswer(new Answer&lt;Void&gt;() {\n          public Void answer(InvocationOnMock invocation) {\n                 Object[] args = invocation.getArguments();\n                 //Mock mock = (Mock) invocation.getMock();  Doesn't solve NPE\n                 return null;\n            }         \n      }).when(mockUtils).insertAmsErrors(any(), any(), any(), any(), any()); // NPE here\n</code></pre>\n<p>but the stub throws a null pointer exception at &quot;NPE here&quot;.   Utils.insertAmsErrors signature is</p>\n<pre><code>public void insertAmsErrors(String id, ErrorCode error, String errorMsg, \n          StackTraceElement [] stackTrace, long processId) \n</code></pre>\n<p>I also considered using a spy, per another answer in the same posting, but my unit test is not calling insertAmsErrors on an instance of Utils, but rather executeWorkItem in EmailNotificationWorkItemHandler is making such a call.</p>\n<p>How should I correctly mock the Utils class and its insertAmsErrors method so that I can test RequiredParameterValidator.validate in executeWorkItem?</p>\n"},{"tags":["java","spring-boot","testing","mockito","junit5"],"answers":[{"tags":[],"owner":{"account_id":11253290,"reputation":1289,"user_id":9167731,"display_name":"Semyon Kirekov"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1646075912,"creation_date":1646075912,"answer_id":71300009,"question_id":71299665,"body_markdown":"Mockito `@Mock` does not perform Spring Dependency Injection mechanism. It just creates a mock and assigns it to the `resourceFile` field inside your test suite. \r\n\r\nThere are two options:\r\n\r\n1. Replace field injection with constructor injection and put the value manually.\r\n\r\n```java\r\npublic class MyClass{\r\n  private Resource resourceFile;\r\n\r\n  public MyClass(@Value(&quot;classpath:file.json&quot;) Resource resourceFile) {\r\n    this.resourceFile = resourceFile;\r\n  }\r\n}\r\n\r\nclass MyClassTest{\r\n\r\n    private MyClass subject;\r\n\r\n    @Mock\r\n    private Resource resourceFile;\r\n\r\n    @BeforeEach\r\n    void setUp() {\r\n        MockitoAnnotations.initMocks(this);\r\n        this.subject = new MyClass(resourceFile);\r\n     }\r\n}\r\n```\r\n\r\n2. Apply `@SpringBootTest` to run the Spring Context and proceed the bean lifecycle.\r\n\r\n```java\r\n@SpringBootTest\r\nclass MyClassTest{\r\n    @Autowired\r\n    private MyClass subject;\r\n    ...\r\n}\r\n```\r\n\r\nThough in this case, you won&#39;t be able to mock `Resource`. Instead, you should put the file with required content to `test/resources`.","title":"How to mock field type Resource of Spring with JUNIT5 and Mockito?","body":"<p>Mockito <code>@Mock</code> does not perform Spring Dependency Injection mechanism. It just creates a mock and assigns it to the <code>resourceFile</code> field inside your test suite.</p>\n<p>There are two options:</p>\n<ol>\n<li>Replace field injection with constructor injection and put the value manually.</li>\n</ol>\n<pre class=\"lang-java prettyprint-override\"><code>public class MyClass{\n  private Resource resourceFile;\n\n  public MyClass(@Value(&quot;classpath:file.json&quot;) Resource resourceFile) {\n    this.resourceFile = resourceFile;\n  }\n}\n\nclass MyClassTest{\n\n    private MyClass subject;\n\n    @Mock\n    private Resource resourceFile;\n\n    @BeforeEach\n    void setUp() {\n        MockitoAnnotations.initMocks(this);\n        this.subject = new MyClass(resourceFile);\n     }\n}\n</code></pre>\n<ol start=\"2\">\n<li>Apply <code>@SpringBootTest</code> to run the Spring Context and proceed the bean lifecycle.</li>\n</ol>\n<pre class=\"lang-java prettyprint-override\"><code>@SpringBootTest\nclass MyClassTest{\n    @Autowired\n    private MyClass subject;\n    ...\n}\n</code></pre>\n<p>Though in this case, you won't be able to mock <code>Resource</code>. Instead, you should put the file with required content to <code>test/resources</code>.</p>\n"}],"owner":{"account_id":5900987,"reputation":371,"user_id":4644514,"display_name":"EdwinCab"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1906,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1646075912,"creation_date":1646073957,"question_id":71299665,"body_markdown":"I have a class that reads JSON File from my directory, but I Could&#39;t mock the Resource field:\r\n\r\n    import org.springframework.core.io.Resource;\r\n\r\n    public class MyClass{\r\n    \r\n       \r\n      @Value(&quot;classpath:file.json&quot;)\r\n      private Resource resourceFile;\r\n    \r\n      public MyDTO getInfoFromJSONFile() {\r\n        try {\r\n            \r\n         //Read file\r\n        } catch (IOException e) {\r\n          throw new MyException(&quot;General Error&quot;);\r\n        }\r\n      }\r\n\r\nThis my test: \r\n\r\n    import org.springframework.core.io.Resource;\r\n\r\n    @ContextConfiguration({ &quot;classpath:file.json&quot; })\r\n    class MyClassTest{\r\n    \r\n        private MyClass subject;\r\n    \r\n        @Mock\r\n        private Resource resourceFile;\r\n    \r\n        @BeforeEach\r\n        void setUp() {\r\n            this.subject = new MyClass();\r\n            MockitoAnnotations.initMocks(this);\r\n         }\r\n    \r\n        @Test\r\n        @ParameterizedTest\r\n        @ValueSource(strings = {&quot;myParam&quot;})\r\n        void testReadInfoFromJsonFileSuccessfully(String param){\r\n            MyDTO myDTO= subject.getInfoFromJSONFile(providerConfigId);\r\n            Assertions.assertEquals(myDTO.getMyField(), &quot;VALUE&quot;);\r\n        }\r\n    }\r\n\r\nThe field resourceFile never is initialized with a mock value, How can I mock this type of field ? ","title":"How to mock field type Resource of Spring with JUNIT5 and Mockito?","body":"<p>I have a class that reads JSON File from my directory, but I Could't mock the Resource field:</p>\n<pre><code>import org.springframework.core.io.Resource;\n\npublic class MyClass{\n\n   \n  @Value(&quot;classpath:file.json&quot;)\n  private Resource resourceFile;\n\n  public MyDTO getInfoFromJSONFile() {\n    try {\n        \n     //Read file\n    } catch (IOException e) {\n      throw new MyException(&quot;General Error&quot;);\n    }\n  }\n</code></pre>\n<p>This my test:</p>\n<pre><code>import org.springframework.core.io.Resource;\n\n@ContextConfiguration({ &quot;classpath:file.json&quot; })\nclass MyClassTest{\n\n    private MyClass subject;\n\n    @Mock\n    private Resource resourceFile;\n\n    @BeforeEach\n    void setUp() {\n        this.subject = new MyClass();\n        MockitoAnnotations.initMocks(this);\n     }\n\n    @Test\n    @ParameterizedTest\n    @ValueSource(strings = {&quot;myParam&quot;})\n    void testReadInfoFromJsonFileSuccessfully(String param){\n        MyDTO myDTO= subject.getInfoFromJSONFile(providerConfigId);\n        Assertions.assertEquals(myDTO.getMyField(), &quot;VALUE&quot;);\n    }\n}\n</code></pre>\n<p>The field resourceFile never is initialized with a mock value, How can I mock this type of field ?</p>\n"},{"tags":["java","spring-boot","maven","java-17"],"comments":[{"owner":{"account_id":23128,"reputation":13127,"user_id":57719,"display_name":"Chin Huang"},"score":8,"creation_date":1645739505,"post_id":71258240,"comment_id":125958274,"body_markdown":"The console output shows you are running Spring Boot 1.2.7, but support for [Java 17 was introduced in Spring Boot 2.5.5](https://docs.spring.io/spring-boot/docs/2.5.5/reference/html/getting-started.html#getting-started.system-requirements).","body":"The console output shows you are running Spring Boot 1.2.7, but support for <a href=\"https://docs.spring.io/spring-boot/docs/2.5.5/reference/html/getting-started.html#getting-started.system-requirements\" rel=\"nofollow noreferrer\">Java 17 was introduced in Spring Boot 2.5.5</a>."},{"owner":{"account_id":112317,"reputation":93939,"user_id":296328,"accept_rate":60,"display_name":"khmarbaise"},"score":2,"creation_date":1645773066,"post_id":71258240,"comment_id":125964324,"body_markdown":"Yes...use most recent version of Spring Boot 2.6.X minimum at the moment...","body":"Yes...use most recent version of Spring Boot 2.6.X minimum at the moment..."}],"answers":[{"tags":[],"owner":{"account_id":7298037,"reputation":500,"user_id":10660307,"display_name":" RichardFeynman"},"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1646075901,"creation_date":1646075901,"answer_id":71300005,"question_id":71258240,"body_markdown":"Chin Huang was correct above, changing to project to use version 2.6.3 of spring-boot fixed the issue.  ","title":"Unable to run Spring Boot Application of Java 17","body":"<p>Chin Huang was correct above, changing to project to use version 2.6.3 of spring-boot fixed the issue.</p>\n"}],"owner":{"account_id":7298037,"reputation":500,"user_id":10660307,"display_name":" RichardFeynman"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":14308,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"accepted_answer_id":71300005,"answer_count":1,"score":4,"last_activity_date":1646075901,"creation_date":1645736711,"question_id":71258240,"body_markdown":"Just as a sanity test I tried to compile and then run the default Spring-Boot start application.  \r\n\r\nI compiled the project into a Jar file with Maven but when I tired to run the application I received the following output: \r\n\r\n\r\n```\r\n[@YCApp61 ~/WorkDir]$ java -jar ./MyService-0.0.1-SNAPSHOT.jar com.myCompany.myApp.MyServiceApplication\r\n2022-02-24 20:52:29.627  INFO 81808 --- [           main] com.myCompany.myApp.MyService.App  : Starting App v0.0.1-SNAPSHOT with PID 81808 (/usr/home/usr/WorkDir/MyService-0.0.1-SNAPSHOT.jar started by usr in /usr/home/usr/WorkDir)\r\n2022-02-24 20:52:29.704  INFO 81808 --- [           main] ationConfigEmbeddedWebApplicationContext : Refreshing org.springframework.boot.context.embedded.AnnotationConfigEmbeddedWebApplicationContext@707302d6: startup date [Thu Feb 24 20:52:29 UTC 2022]; root of context hierarchy\r\n2022-02-24 20:52:30.598  INFO 81808 --- [           main] o.s.b.f.s.DefaultListableBeanFactory     : Overriding bean definition for bean &#39;beanNameViewResolver&#39;: replacing [Root bean: class [null]; scope=; abstract=false; lazyInit=false; autowireMode=3; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=org.springframework.boot.autoconfigure.web.ErrorMvcAutoConfiguration$WhitelabelErrorViewConfiguration; factoryMethodName=beanNameViewResolver; initMethodName=null; destroyMethodName=(inferred); defined in class path resource [org/springframework/boot/autoconfigure/web/ErrorMvcAutoConfiguration$WhitelabelErrorViewConfiguration.class]] with [Root bean: class [null]; scope=; abstract=false; lazyInit=false; autowireMode=3; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=org.springframework.boot.autoconfigure.web.WebMvcAutoConfiguration$WebMvcAutoConfigurationAdapter; factoryMethodName=beanNameViewResolver; initMethodName=null; destroyMethodName=(inferred); defined in class path resource [org/springframework/boot/autoconfigure/web/WebMvcAutoConfiguration$WebMvcAutoConfigurationAdapter.class]]\r\n2022-02-24 20:52:30.712  INFO 81808 --- [           main] .b.l.ClasspathLoggingApplicationListener : Application failed to start with classpath: [jar:file:/usr/home/usr/WorkDir/MyService-0.0.1-SNAPSHOT.jar!/, jar:file:/usr/home/usr/WorkDir/MyService-0.0.1-SNAPSHOT.jar!/lib/spring-boot-starter-web-1.2.7.RELEASE.jar!/, jar:file:/usr/home/usr/WorkDir/MyService-0.0.1-SNAPSHOT.jar!/lib/spring-boot-starter-1.2.7.RELEASE.jar!/, jar:file:/usr/home/usr/WorkDir/MyService-0.0.1-SNAPSHOT.jar!/lib/spring-boot-1.2.7.RELEASE.jar!/, jar:file:/usr/home/usr/WorkDir/MyService-0.0.1-SNAPSHOT.jar!/lib/spring-boot-autoconfigure-1.2.7.RELEASE.jar!/, jar:file:/usr/home/usr/WorkDir/MyService-0.0.1-SNAPSHOT.jar!/lib/spring-boot-starter-logging-1.2.7.RELEASE.jar!/, jar:file:/usr/home/usr/WorkDir/MyService-0.0.1-SNAPSHOT.jar!/lib/jcl-over-slf4j-1.7.12.jar!/, jar:file:/usr/home/usr/WorkDir/MyService-0.0.1-SNAPSHOT.jar!/lib/slf4j-api-1.7.12.jar!/, jar:file:/usr/home/usr/WorkDir/MyService-0.0.1-SNAPSHOT.jar!/lib/jul-to-slf4j-1.7.12.jar!/, jar:file:/usr/home/usr/WorkDir/MyService-0.0.1-SNAPSHOT.jar!/lib/log4j-over-slf4j-1.7.12.jar!/, jar:file:/usr/home/usr/WorkDir/MyService-0.0.1-SNAPSHOT.jar!/lib/logback-classic-1.1.3.jar!/, jar:file:/usr/home/usr/WorkDir/MyService-0.0.1-SNAPSHOT.jar!/lib/logback-core-1.1.3.jar!/, jar:file:/usr/home/usr/WorkDir/MyService-0.0.1-SNAPSHOT.jar!/lib/snakeyaml-1.14.jar!/, jar:file:/usr/home/usr/WorkDir/MyService-0.0.1-SNAPSHOT.jar!/lib/spring-boot-starter-tomcat-1.2.7.RELEASE.jar!/, jar:file:/usr/home/usr/WorkDir/MyService-0.0.1-SNAPSHOT.jar!/lib/tomcat-embed-core-8.0.28.jar!/, jar:file:/usr/home/usr/WorkDir/MyService-0.0.1-SNAPSHOT.jar!/lib/tomcat-embed-el-8.0.28.jar!/, jar:file:/usr/home/usr/WorkDir/MyService-0.0.1-SNAPSHOT.jar!/lib/tomcat-embed-logging-juli-8.0.28.jar!/, jar:file:/usr/home/usr/WorkDir/MyService-0.0.1-SNAPSHOT.jar!/lib/tomcat-embed-websocket-8.0.28.jar!/, jar:file:/usr/home/usr/WorkDir/MyService-0.0.1-SNAPSHOT.jar!/lib/jackson-databind-2.4.6.jar!/, jar:file:/usr/home/usr/WorkDir/MyService-0.0.1-SNAPSHOT.jar!/lib/jackson-annotations-2.4.6.jar!/, jar:file:/usr/home/usr/WorkDir/MyService-0.0.1-SNAPSHOT.jar!/lib/jackson-core-2.4.6.jar!/, jar:file:/usr/home/usr/WorkDir/MyService-0.0.1-SNAPSHOT.jar!/lib/hibernate-validator-5.1.3.Final.jar!/, jar:file:/usr/home/usr/WorkDir/MyService-0.0.1-SNAPSHOT.jar!/lib/validation-api-1.1.0.Final.jar!/, jar:file:/usr/home/usr/WorkDir/MyService-0.0.1-SNAPSHOT.jar!/lib/jboss-logging-3.1.3.GA.jar!/, jar:file:/usr/home/usr/WorkDir/MyService-0.0.1-SNAPSHOT.jar!/lib/classmate-1.0.0.jar!/, jar:file:/usr/home/usr/WorkDir/MyService-0.0.1-SNAPSHOT.jar!/lib/spring-core-4.1.8.RELEASE.jar!/, jar:file:/usr/home/usr/WorkDir/MyService-0.0.1-SNAPSHOT.jar!/lib/spring-web-4.1.8.RELEASE.jar!/, jar:file:/usr/home/usr/WorkDir/MyService-0.0.1-SNAPSHOT.jar!/lib/spring-aop-4.1.8.RELEASE.jar!/, jar:file:/usr/home/usr/WorkDir/MyService-0.0.1-SNAPSHOT.jar!/lib/aopalliance-1.0.jar!/, jar:file:/usr/home/usr/WorkDir/MyService-0.0.1-SNAPSHOT.jar!/lib/spring-beans-4.1.8.RELEASE.jar!/, jar:file:/usr/home/usr/WorkDir/MyService-0.0.1-SNAPSHOT.jar!/lib/spring-context-4.1.8.RELEASE.jar!/, jar:file:/usr/home/usr/WorkDir/MyService-0.0.1-SNAPSHOT.jar!/lib/spring-webmvc-4.1.8.RELEASE.jar!/, jar:file:/usr/home/usr/WorkDir/MyService-0.0.1-SNAPSHOT.jar!/lib/spring-expression-4.1.8.RELEASE.jar!/, jar:file:/usr/home/usr/WorkDir/MyService-0.0.1-SNAPSHOT.jar!/lib/spring-boot-starter-jdbc-1.2.7.RELEASE.jar!/, jar:file:/usr/home/usr/WorkDir/MyService-0.0.1-SNAPSHOT.jar!/lib/spring-jdbc-4.1.8.RELEASE.jar!/, jar:file:/usr/home/usr/WorkDir/MyService-0.0.1-SNAPSHOT.jar!/lib/tomcat-jdbc-8.0.28.jar!/, jar:file:/usr/home/usr/WorkDir/MyService-0.0.1-SNAPSHOT.jar!/lib/tomcat-juli-8.0.28.jar!/, jar:file:/usr/home/usr/WorkDir/MyService-0.0.1-SNAPSHOT.jar!/lib/spring-tx-4.1.8.RELEASE.jar!/, jar:file:/usr/home/usr/WorkDir/MyService-0.0.1-SNAPSHOT.jar!/lib/h2-1.4.190.jar!/, jar:file:/usr/home/usr/WorkDir/MyService-0.0.1-SNAPSHOT.jar!/lib/lombok-1.14.8.jar!/, jar:file:/usr/home/usr/WorkDir/MyService-0.0.1-SNAPSHOT.jar!/lib/log4jdbc-log4j2-jdbc4.1-1.16.jar!/]\r\n2022-02-24 20:52:30.717 ERROR 81808 --- [           main] o.s.boot.SpringApplication               : Application startup failed\r\n\r\njava.lang.IllegalStateException: Cannot load configuration class: com.myCompany.myApp.MyService.App\r\n        at org.springframework.context.annotation.ConfigurationClassPostProcessor.enhanceConfigurationClasses(ConfigurationClassPostProcessor.java:395)\r\n        at org.springframework.context.annotation.ConfigurationClassPostProcessor.postProcessBeanFactory(ConfigurationClassPostProcessor.java:259)\r\n        at org.springframework.context.support.PostProcessorRegistrationDelegate.invokeBeanFactoryPostProcessors(PostProcessorRegistrationDelegate.java:265)\r\n        at org.springframework.context.support.PostProcessorRegistrationDelegate.invokeBeanFactoryPostProcessors(PostProcessorRegistrationDelegate.java:126)\r\n        at org.springframework.context.support.AbstractApplicationContext.invokeBeanFactoryPostProcessors(AbstractApplicationContext.java:607)\r\n        at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:462)\r\n        at org.springframework.boot.context.embedded.EmbeddedWebApplicationContext.refresh(EmbeddedWebApplicationContext.java:117)\r\n        at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:689)\r\n        at org.springframework.boot.SpringApplication.run(SpringApplication.java:321)\r\n        at org.springframework.boot.SpringApplication.run(SpringApplication.java:969)\r\n        at org.springframework.boot.SpringApplication.run(SpringApplication.java:958)\r\n        at com.myCompany.myApp.MyService.App.main(App.java:9)\r\n        at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n        at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)\r\n        at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)\r\n        at java.base/java.lang.reflect.Method.invoke(Unknown Source)\r\n        at org.springframework.boot.loader.MainMethodRunner.run(MainMethodRunner.java:53)\r\n        at java.base/java.lang.Thread.run(Unknown Source)\r\nCaused by: java.lang.ExceptionInInitializerError: null\r\n        at org.springframework.cglib.core.KeyFactory$Generator.generateClass(KeyFactory.java:166)\r\n        at org.springframework.cglib.core.DefaultGeneratorStrategy.generate(DefaultGeneratorStrategy.java:25)\r\n        at org.springframework.cglib.core.AbstractClassGenerator.create(AbstractClassGenerator.java:216)\r\n        at org.springframework.cglib.core.KeyFactory$Generator.create(KeyFactory.java:144)\r\n        at org.springframework.cglib.core.KeyFactory.create(KeyFactory.java:116)\r\n        at org.springframework.cglib.core.KeyFactory.create(KeyFactory.java:108)\r\n        at org.springframework.cglib.core.KeyFactory.create(KeyFactory.java:104)\r\n        at org.springframework.cglib.proxy.Enhancer.&lt;clinit&gt;(Enhancer.java:69)\r\n        at org.springframework.context.annotation.ConfigurationClassEnhancer.newEnhancer(ConfigurationClassEnhancer.java:112)\r\n        at org.springframework.context.annotation.ConfigurationClassEnhancer.enhance(ConfigurationClassEnhancer.java:100)\r\n        at org.springframework.context.annotation.ConfigurationClassPostProcessor.enhanceConfigurationClasses(ConfigurationClassPostProcessor.java:385)\r\n        ... 17 common frames omitted\r\nCaused by: java.lang.reflect.InaccessibleObjectException: Unable to make protected final java.lang.Class java.lang.ClassLoader.defineClass(java.lang.String,byte[],int,int,java.security.ProtectionDomain) throws java.lang.ClassFormatError accessible: module java.base does not &quot;opens java.lang&quot; to unnamed module @2c60a1a7\r\n        at java.base/java.lang.reflect.AccessibleObject.checkCanSetAccessible(Unknown Source)\r\n        at java.base/java.lang.reflect.AccessibleObject.checkCanSetAccessible(Unknown Source)\r\n        at java.base/java.lang.reflect.Method.checkCanSetAccessible(Unknown Source)\r\n        at java.base/java.lang.reflect.Method.setAccessible(Unknown Source)\r\n        at org.springframework.cglib.core.ReflectUtils$2.run(ReflectUtils.java:56)\r\n        at java.base/java.security.AccessController.doPrivileged(Unknown Source)\r\n        at org.springframework.cglib.core.ReflectUtils.&lt;clinit&gt;(ReflectUtils.java:46)\r\n        ... 28 common frames omitted\r\n\r\n2022-02-24 20:52:30.718  INFO 81808 --- [           main] ationConfigEmbeddedWebApplicationContext : Closing org.springframework.boot.context.embedded.AnnotationConfigEmbeddedWebApplicationContext@707302d6: startup date [Thu Feb 24 20:52:29 UTC 2022]; root of context hierarchy\r\n2022-02-24 20:52:30.720  WARN 81808 --- [           main] ationConfigEmbeddedWebApplicationContext : Exception thrown from ApplicationListener handling ContextClosedEvent\r\n\r\njava.lang.IllegalStateException: ApplicationEventMulticaster not initialized - call &#39;refresh&#39; before multicasting events via the context: org.springframework.boot.context.embedded.AnnotationConfigEmbeddedWebApplicationContext@707302d6: startup date [Thu Feb 24 20:52:29 UTC 2022]; root of context hierarchy\r\n        at org.springframework.context.support.AbstractApplicationContext.getApplicationEventMulticaster(AbstractApplicationContext.java:344)\r\n        at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:331)\r\n        at org.springframework.context.support.AbstractApplicationContext.doClose(AbstractApplicationContext.java:873)\r\n        at org.springframework.boot.context.embedded.EmbeddedWebApplicationContext.doClose(EmbeddedWebApplicationContext.java:150)\r\n        at org.springframework.context.support.AbstractApplicationContext.close(AbstractApplicationContext.java:840)\r\n        at org.springframework.boot.SpringApplication.run(SpringApplication.java:343)\r\n        at org.springframework.boot.SpringApplication.run(SpringApplication.java:969)\r\n        at org.springframework.boot.SpringApplication.run(SpringApplication.java:958)\r\n        at com.myCompany.myApp.MyService.App.main(App.java:9)\r\n        at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n        at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)\r\n        at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)\r\n        at java.base/java.lang.reflect.Method.invoke(Unknown Source)\r\n        at org.springframework.boot.loader.MainMethodRunner.run(MainMethodRunner.java:53)\r\n        at java.base/java.lang.Thread.run(Unknown Source)\r\n\r\n2022-02-24 20:52:30.720  WARN 81808 --- [           main] ationConfigEmbeddedWebApplicationContext : Exception thrown from LifecycleProcessor on context close\r\n\r\njava.lang.IllegalStateException: LifecycleProcessor not initialized - call &#39;refresh&#39; before invoking lifecycle methods via the context: org.springframework.boot.context.embedded.AnnotationConfigEmbeddedWebApplicationContext@707302d6: startup date [Thu Feb 24 20:52:29 UTC 2022]; root of context hierarchy\r\n        at org.springframework.context.support.AbstractApplicationContext.getLifecycleProcessor(AbstractApplicationContext.java:357)\r\n        at org.springframework.context.support.AbstractApplicationContext.doClose(AbstractApplicationContext.java:881)\r\n        at org.springframework.boot.context.embedded.EmbeddedWebApplicationContext.doClose(EmbeddedWebApplicationContext.java:150)\r\n        at org.springframework.context.support.AbstractApplicationContext.close(AbstractApplicationContext.java:840)\r\n        at org.springframework.boot.SpringApplication.run(SpringApplication.java:343)\r\n        at org.springframework.boot.SpringApplication.run(SpringApplication.java:969)\r\n        at org.springframework.boot.SpringApplication.run(SpringApplication.java:958)\r\n        at com.myCompany.myApp.MyService.App.main(App.java:9)\r\n        at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n        at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)\r\n        at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)\r\n        at java.base/java.lang.reflect.Method.invoke(Unknown Source)\r\n        at org.springframework.boot.loader.MainMethodRunner.run(MainMethodRunner.java:53)\r\n        at java.base/java.lang.Thread.run(Unknown Source)\r\n\r\njava.lang.reflect.InvocationTargetException\r\n        at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n        at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)\r\n        at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)\r\n        at java.base/java.lang.reflect.Method.invoke(Unknown Source)\r\n        at org.springframework.boot.loader.MainMethodRunner.run(MainMethodRunner.java:53)\r\n        at java.base/java.lang.Thread.run(Unknown Source)\r\nCaused by: java.lang.IllegalStateException: Cannot load configuration class: com.myCompany.myApp.MyService.App\r\n        at org.springframework.context.annotation.ConfigurationClassPostProcessor.enhanceConfigurationClasses(ConfigurationClassPostProcessor.java:395)\r\n        at org.springframework.context.annotation.ConfigurationClassPostProcessor.postProcessBeanFactory(ConfigurationClassPostProcessor.java:259)\r\n        at org.springframework.context.support.PostProcessorRegistrationDelegate.invokeBeanFactoryPostProcessors(PostProcessorRegistrationDelegate.java:265)\r\n        at org.springframework.context.support.PostProcessorRegistrationDelegate.invokeBeanFactoryPostProcessors(PostProcessorRegistrationDelegate.java:126)\r\n        at org.springframework.context.support.AbstractApplicationContext.invokeBeanFactoryPostProcessors(AbstractApplicationContext.java:607)\r\n        at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:462)\r\n        at org.springframework.boot.context.embedded.EmbeddedWebApplicationContext.refresh(EmbeddedWebApplicationContext.java:117)\r\n        at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:689)\r\n        at org.springframework.boot.SpringApplication.run(SpringApplication.java:321)\r\n        at org.springframework.boot.SpringApplication.run(SpringApplication.java:969)\r\n        at org.springframework.boot.SpringApplication.run(SpringApplication.java:958)\r\n        at com.myCompany.myApp.MyService.App.main(App.java:9)\r\n        ... 6 more\r\nCaused by: java.lang.ExceptionInInitializerError\r\n        at org.springframework.cglib.core.KeyFactory$Generator.generateClass(KeyFactory.java:166)\r\n        at org.springframework.cglib.core.DefaultGeneratorStrategy.generate(DefaultGeneratorStrategy.java:25)\r\n        at org.springframework.cglib.core.AbstractClassGenerator.create(AbstractClassGenerator.java:216)\r\n        at org.springframework.cglib.core.KeyFactory$Generator.create(KeyFactory.java:144)\r\n        at org.springframework.cglib.core.KeyFactory.create(KeyFactory.java:116)\r\n        at org.springframework.cglib.core.KeyFactory.create(KeyFactory.java:108)\r\n        at org.springframework.cglib.core.KeyFactory.create(KeyFactory.java:104)\r\n        at org.springframework.cglib.proxy.Enhancer.&lt;clinit&gt;(Enhancer.java:69)\r\n        at org.springframework.context.annotation.ConfigurationClassEnhancer.newEnhancer(ConfigurationClassEnhancer.java:112)\r\n        at org.springframework.context.annotation.ConfigurationClassEnhancer.enhance(ConfigurationClassEnhancer.java:100)\r\n        at org.springframework.context.annotation.ConfigurationClassPostProcessor.enhanceConfigurationClasses(ConfigurationClassPostProcessor.java:385)\r\n        ... 17 more\r\nCaused by: java.lang.reflect.InaccessibleObjectException: Unable to make protected final java.lang.Class java.lang.ClassLoader.defineClass(java.lang.String,byte[],int,int,java.security.ProtectionDomain) throws java.lang.ClassFormatError accessible: module java.base does not &quot;opens java.lang&quot; to unnamed module @2c60a1a7\r\n        at java.base/java.lang.reflect.AccessibleObject.checkCanSetAccessible(Unknown Source)\r\n        at java.base/java.lang.reflect.AccessibleObject.checkCanSetAccessible(Unknown Source)\r\n        at java.base/java.lang.reflect.Method.checkCanSetAccessible(Unknown Source)\r\n        at java.base/java.lang.reflect.Method.setAccessible(Unknown Source)\r\n        at org.springframework.cglib.core.ReflectUtils$2.run(ReflectUtils.java:56)\r\n        at java.base/java.security.AccessController.doPrivileged(Unknown Source)\r\n        at org.springframework.cglib.core.ReflectUtils.&lt;clinit&gt;(ReflectUtils.java:46)\r\n        ... 28 more\r\n[usr@YCApp61 ~/WorkDir]$\r\n\r\n```\r\n\r\nI tried running the application again with the following arguments but got the same error message: \r\n\r\n```\r\njava -jar ./MyService-0.0.1-SNAPSHOT.jar com.myCompany.myApp.MyServiceApplication --add-exports=java.base/jdk.internal.misc=ALL-UNNAMED --add-exports=java.base/sun.nio.ch=ALL-UNNAMED --add-exports=java.management/com.sun.jmx.mbeanserver=ALL-UNNAMED --add-exports=jdk.internal.jvmstat/sun.jvmstat.monitor=ALL-UNNAMED --add-exports=java.base/sun.reflect.generics.reflectiveObjects=ALL-UNNAMED --add-opens jdk.management/com.sun.management.internal=ALL-UNNAMED --add-opens java.base/java.nio=ALL-UNNAMED --add-opens java.base/java.util=ALL-UNNAMED --add-opens java.base/java.lang=ALL-UNNAMED \r\n\r\n```\r\n\r\nThe machine I am trying to run on is Java 17.  Am I missing some jvm arguments or am I passing them incorrectly? ","title":"Unable to run Spring Boot Application of Java 17","body":"<p>Just as a sanity test I tried to compile and then run the default Spring-Boot start application.</p>\n<p>I compiled the project into a Jar file with Maven but when I tired to run the application I received the following output:</p>\n<pre><code>[@YCApp61 ~/WorkDir]$ java -jar ./MyService-0.0.1-SNAPSHOT.jar com.myCompany.myApp.MyServiceApplication\n2022-02-24 20:52:29.627  INFO 81808 --- [           main] com.myCompany.myApp.MyService.App  : Starting App v0.0.1-SNAPSHOT with PID 81808 (/usr/home/usr/WorkDir/MyService-0.0.1-SNAPSHOT.jar started by usr in /usr/home/usr/WorkDir)\n2022-02-24 20:52:29.704  INFO 81808 --- [           main] ationConfigEmbeddedWebApplicationContext : Refreshing org.springframework.boot.context.embedded.AnnotationConfigEmbeddedWebApplicationContext@707302d6: startup date [Thu Feb 24 20:52:29 UTC 2022]; root of context hierarchy\n2022-02-24 20:52:30.598  INFO 81808 --- [           main] o.s.b.f.s.DefaultListableBeanFactory     : Overriding bean definition for bean 'beanNameViewResolver': replacing [Root bean: class [null]; scope=; abstract=false; lazyInit=false; autowireMode=3; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=org.springframework.boot.autoconfigure.web.ErrorMvcAutoConfiguration$WhitelabelErrorViewConfiguration; factoryMethodName=beanNameViewResolver; initMethodName=null; destroyMethodName=(inferred); defined in class path resource [org/springframework/boot/autoconfigure/web/ErrorMvcAutoConfiguration$WhitelabelErrorViewConfiguration.class]] with [Root bean: class [null]; scope=; abstract=false; lazyInit=false; autowireMode=3; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=org.springframework.boot.autoconfigure.web.WebMvcAutoConfiguration$WebMvcAutoConfigurationAdapter; factoryMethodName=beanNameViewResolver; initMethodName=null; destroyMethodName=(inferred); defined in class path resource [org/springframework/boot/autoconfigure/web/WebMvcAutoConfiguration$WebMvcAutoConfigurationAdapter.class]]\n2022-02-24 20:52:30.712  INFO 81808 --- [           main] .b.l.ClasspathLoggingApplicationListener : Application failed to start with classpath: [jar:file:/usr/home/usr/WorkDir/MyService-0.0.1-SNAPSHOT.jar!/, jar:file:/usr/home/usr/WorkDir/MyService-0.0.1-SNAPSHOT.jar!/lib/spring-boot-starter-web-1.2.7.RELEASE.jar!/, jar:file:/usr/home/usr/WorkDir/MyService-0.0.1-SNAPSHOT.jar!/lib/spring-boot-starter-1.2.7.RELEASE.jar!/, jar:file:/usr/home/usr/WorkDir/MyService-0.0.1-SNAPSHOT.jar!/lib/spring-boot-1.2.7.RELEASE.jar!/, jar:file:/usr/home/usr/WorkDir/MyService-0.0.1-SNAPSHOT.jar!/lib/spring-boot-autoconfigure-1.2.7.RELEASE.jar!/, jar:file:/usr/home/usr/WorkDir/MyService-0.0.1-SNAPSHOT.jar!/lib/spring-boot-starter-logging-1.2.7.RELEASE.jar!/, jar:file:/usr/home/usr/WorkDir/MyService-0.0.1-SNAPSHOT.jar!/lib/jcl-over-slf4j-1.7.12.jar!/, jar:file:/usr/home/usr/WorkDir/MyService-0.0.1-SNAPSHOT.jar!/lib/slf4j-api-1.7.12.jar!/, jar:file:/usr/home/usr/WorkDir/MyService-0.0.1-SNAPSHOT.jar!/lib/jul-to-slf4j-1.7.12.jar!/, jar:file:/usr/home/usr/WorkDir/MyService-0.0.1-SNAPSHOT.jar!/lib/log4j-over-slf4j-1.7.12.jar!/, jar:file:/usr/home/usr/WorkDir/MyService-0.0.1-SNAPSHOT.jar!/lib/logback-classic-1.1.3.jar!/, jar:file:/usr/home/usr/WorkDir/MyService-0.0.1-SNAPSHOT.jar!/lib/logback-core-1.1.3.jar!/, jar:file:/usr/home/usr/WorkDir/MyService-0.0.1-SNAPSHOT.jar!/lib/snakeyaml-1.14.jar!/, jar:file:/usr/home/usr/WorkDir/MyService-0.0.1-SNAPSHOT.jar!/lib/spring-boot-starter-tomcat-1.2.7.RELEASE.jar!/, jar:file:/usr/home/usr/WorkDir/MyService-0.0.1-SNAPSHOT.jar!/lib/tomcat-embed-core-8.0.28.jar!/, jar:file:/usr/home/usr/WorkDir/MyService-0.0.1-SNAPSHOT.jar!/lib/tomcat-embed-el-8.0.28.jar!/, jar:file:/usr/home/usr/WorkDir/MyService-0.0.1-SNAPSHOT.jar!/lib/tomcat-embed-logging-juli-8.0.28.jar!/, jar:file:/usr/home/usr/WorkDir/MyService-0.0.1-SNAPSHOT.jar!/lib/tomcat-embed-websocket-8.0.28.jar!/, jar:file:/usr/home/usr/WorkDir/MyService-0.0.1-SNAPSHOT.jar!/lib/jackson-databind-2.4.6.jar!/, jar:file:/usr/home/usr/WorkDir/MyService-0.0.1-SNAPSHOT.jar!/lib/jackson-annotations-2.4.6.jar!/, jar:file:/usr/home/usr/WorkDir/MyService-0.0.1-SNAPSHOT.jar!/lib/jackson-core-2.4.6.jar!/, jar:file:/usr/home/usr/WorkDir/MyService-0.0.1-SNAPSHOT.jar!/lib/hibernate-validator-5.1.3.Final.jar!/, jar:file:/usr/home/usr/WorkDir/MyService-0.0.1-SNAPSHOT.jar!/lib/validation-api-1.1.0.Final.jar!/, jar:file:/usr/home/usr/WorkDir/MyService-0.0.1-SNAPSHOT.jar!/lib/jboss-logging-3.1.3.GA.jar!/, jar:file:/usr/home/usr/WorkDir/MyService-0.0.1-SNAPSHOT.jar!/lib/classmate-1.0.0.jar!/, jar:file:/usr/home/usr/WorkDir/MyService-0.0.1-SNAPSHOT.jar!/lib/spring-core-4.1.8.RELEASE.jar!/, jar:file:/usr/home/usr/WorkDir/MyService-0.0.1-SNAPSHOT.jar!/lib/spring-web-4.1.8.RELEASE.jar!/, jar:file:/usr/home/usr/WorkDir/MyService-0.0.1-SNAPSHOT.jar!/lib/spring-aop-4.1.8.RELEASE.jar!/, jar:file:/usr/home/usr/WorkDir/MyService-0.0.1-SNAPSHOT.jar!/lib/aopalliance-1.0.jar!/, jar:file:/usr/home/usr/WorkDir/MyService-0.0.1-SNAPSHOT.jar!/lib/spring-beans-4.1.8.RELEASE.jar!/, jar:file:/usr/home/usr/WorkDir/MyService-0.0.1-SNAPSHOT.jar!/lib/spring-context-4.1.8.RELEASE.jar!/, jar:file:/usr/home/usr/WorkDir/MyService-0.0.1-SNAPSHOT.jar!/lib/spring-webmvc-4.1.8.RELEASE.jar!/, jar:file:/usr/home/usr/WorkDir/MyService-0.0.1-SNAPSHOT.jar!/lib/spring-expression-4.1.8.RELEASE.jar!/, jar:file:/usr/home/usr/WorkDir/MyService-0.0.1-SNAPSHOT.jar!/lib/spring-boot-starter-jdbc-1.2.7.RELEASE.jar!/, jar:file:/usr/home/usr/WorkDir/MyService-0.0.1-SNAPSHOT.jar!/lib/spring-jdbc-4.1.8.RELEASE.jar!/, jar:file:/usr/home/usr/WorkDir/MyService-0.0.1-SNAPSHOT.jar!/lib/tomcat-jdbc-8.0.28.jar!/, jar:file:/usr/home/usr/WorkDir/MyService-0.0.1-SNAPSHOT.jar!/lib/tomcat-juli-8.0.28.jar!/, jar:file:/usr/home/usr/WorkDir/MyService-0.0.1-SNAPSHOT.jar!/lib/spring-tx-4.1.8.RELEASE.jar!/, jar:file:/usr/home/usr/WorkDir/MyService-0.0.1-SNAPSHOT.jar!/lib/h2-1.4.190.jar!/, jar:file:/usr/home/usr/WorkDir/MyService-0.0.1-SNAPSHOT.jar!/lib/lombok-1.14.8.jar!/, jar:file:/usr/home/usr/WorkDir/MyService-0.0.1-SNAPSHOT.jar!/lib/log4jdbc-log4j2-jdbc4.1-1.16.jar!/]\n2022-02-24 20:52:30.717 ERROR 81808 --- [           main] o.s.boot.SpringApplication               : Application startup failed\n\njava.lang.IllegalStateException: Cannot load configuration class: com.myCompany.myApp.MyService.App\n        at org.springframework.context.annotation.ConfigurationClassPostProcessor.enhanceConfigurationClasses(ConfigurationClassPostProcessor.java:395)\n        at org.springframework.context.annotation.ConfigurationClassPostProcessor.postProcessBeanFactory(ConfigurationClassPostProcessor.java:259)\n        at org.springframework.context.support.PostProcessorRegistrationDelegate.invokeBeanFactoryPostProcessors(PostProcessorRegistrationDelegate.java:265)\n        at org.springframework.context.support.PostProcessorRegistrationDelegate.invokeBeanFactoryPostProcessors(PostProcessorRegistrationDelegate.java:126)\n        at org.springframework.context.support.AbstractApplicationContext.invokeBeanFactoryPostProcessors(AbstractApplicationContext.java:607)\n        at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:462)\n        at org.springframework.boot.context.embedded.EmbeddedWebApplicationContext.refresh(EmbeddedWebApplicationContext.java:117)\n        at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:689)\n        at org.springframework.boot.SpringApplication.run(SpringApplication.java:321)\n        at org.springframework.boot.SpringApplication.run(SpringApplication.java:969)\n        at org.springframework.boot.SpringApplication.run(SpringApplication.java:958)\n        at com.myCompany.myApp.MyService.App.main(App.java:9)\n        at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n        at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)\n        at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)\n        at java.base/java.lang.reflect.Method.invoke(Unknown Source)\n        at org.springframework.boot.loader.MainMethodRunner.run(MainMethodRunner.java:53)\n        at java.base/java.lang.Thread.run(Unknown Source)\nCaused by: java.lang.ExceptionInInitializerError: null\n        at org.springframework.cglib.core.KeyFactory$Generator.generateClass(KeyFactory.java:166)\n        at org.springframework.cglib.core.DefaultGeneratorStrategy.generate(DefaultGeneratorStrategy.java:25)\n        at org.springframework.cglib.core.AbstractClassGenerator.create(AbstractClassGenerator.java:216)\n        at org.springframework.cglib.core.KeyFactory$Generator.create(KeyFactory.java:144)\n        at org.springframework.cglib.core.KeyFactory.create(KeyFactory.java:116)\n        at org.springframework.cglib.core.KeyFactory.create(KeyFactory.java:108)\n        at org.springframework.cglib.core.KeyFactory.create(KeyFactory.java:104)\n        at org.springframework.cglib.proxy.Enhancer.&lt;clinit&gt;(Enhancer.java:69)\n        at org.springframework.context.annotation.ConfigurationClassEnhancer.newEnhancer(ConfigurationClassEnhancer.java:112)\n        at org.springframework.context.annotation.ConfigurationClassEnhancer.enhance(ConfigurationClassEnhancer.java:100)\n        at org.springframework.context.annotation.ConfigurationClassPostProcessor.enhanceConfigurationClasses(ConfigurationClassPostProcessor.java:385)\n        ... 17 common frames omitted\nCaused by: java.lang.reflect.InaccessibleObjectException: Unable to make protected final java.lang.Class java.lang.ClassLoader.defineClass(java.lang.String,byte[],int,int,java.security.ProtectionDomain) throws java.lang.ClassFormatError accessible: module java.base does not &quot;opens java.lang&quot; to unnamed module @2c60a1a7\n        at java.base/java.lang.reflect.AccessibleObject.checkCanSetAccessible(Unknown Source)\n        at java.base/java.lang.reflect.AccessibleObject.checkCanSetAccessible(Unknown Source)\n        at java.base/java.lang.reflect.Method.checkCanSetAccessible(Unknown Source)\n        at java.base/java.lang.reflect.Method.setAccessible(Unknown Source)\n        at org.springframework.cglib.core.ReflectUtils$2.run(ReflectUtils.java:56)\n        at java.base/java.security.AccessController.doPrivileged(Unknown Source)\n        at org.springframework.cglib.core.ReflectUtils.&lt;clinit&gt;(ReflectUtils.java:46)\n        ... 28 common frames omitted\n\n2022-02-24 20:52:30.718  INFO 81808 --- [           main] ationConfigEmbeddedWebApplicationContext : Closing org.springframework.boot.context.embedded.AnnotationConfigEmbeddedWebApplicationContext@707302d6: startup date [Thu Feb 24 20:52:29 UTC 2022]; root of context hierarchy\n2022-02-24 20:52:30.720  WARN 81808 --- [           main] ationConfigEmbeddedWebApplicationContext : Exception thrown from ApplicationListener handling ContextClosedEvent\n\njava.lang.IllegalStateException: ApplicationEventMulticaster not initialized - call 'refresh' before multicasting events via the context: org.springframework.boot.context.embedded.AnnotationConfigEmbeddedWebApplicationContext@707302d6: startup date [Thu Feb 24 20:52:29 UTC 2022]; root of context hierarchy\n        at org.springframework.context.support.AbstractApplicationContext.getApplicationEventMulticaster(AbstractApplicationContext.java:344)\n        at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:331)\n        at org.springframework.context.support.AbstractApplicationContext.doClose(AbstractApplicationContext.java:873)\n        at org.springframework.boot.context.embedded.EmbeddedWebApplicationContext.doClose(EmbeddedWebApplicationContext.java:150)\n        at org.springframework.context.support.AbstractApplicationContext.close(AbstractApplicationContext.java:840)\n        at org.springframework.boot.SpringApplication.run(SpringApplication.java:343)\n        at org.springframework.boot.SpringApplication.run(SpringApplication.java:969)\n        at org.springframework.boot.SpringApplication.run(SpringApplication.java:958)\n        at com.myCompany.myApp.MyService.App.main(App.java:9)\n        at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n        at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)\n        at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)\n        at java.base/java.lang.reflect.Method.invoke(Unknown Source)\n        at org.springframework.boot.loader.MainMethodRunner.run(MainMethodRunner.java:53)\n        at java.base/java.lang.Thread.run(Unknown Source)\n\n2022-02-24 20:52:30.720  WARN 81808 --- [           main] ationConfigEmbeddedWebApplicationContext : Exception thrown from LifecycleProcessor on context close\n\njava.lang.IllegalStateException: LifecycleProcessor not initialized - call 'refresh' before invoking lifecycle methods via the context: org.springframework.boot.context.embedded.AnnotationConfigEmbeddedWebApplicationContext@707302d6: startup date [Thu Feb 24 20:52:29 UTC 2022]; root of context hierarchy\n        at org.springframework.context.support.AbstractApplicationContext.getLifecycleProcessor(AbstractApplicationContext.java:357)\n        at org.springframework.context.support.AbstractApplicationContext.doClose(AbstractApplicationContext.java:881)\n        at org.springframework.boot.context.embedded.EmbeddedWebApplicationContext.doClose(EmbeddedWebApplicationContext.java:150)\n        at org.springframework.context.support.AbstractApplicationContext.close(AbstractApplicationContext.java:840)\n        at org.springframework.boot.SpringApplication.run(SpringApplication.java:343)\n        at org.springframework.boot.SpringApplication.run(SpringApplication.java:969)\n        at org.springframework.boot.SpringApplication.run(SpringApplication.java:958)\n        at com.myCompany.myApp.MyService.App.main(App.java:9)\n        at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n        at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)\n        at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)\n        at java.base/java.lang.reflect.Method.invoke(Unknown Source)\n        at org.springframework.boot.loader.MainMethodRunner.run(MainMethodRunner.java:53)\n        at java.base/java.lang.Thread.run(Unknown Source)\n\njava.lang.reflect.InvocationTargetException\n        at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n        at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)\n        at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)\n        at java.base/java.lang.reflect.Method.invoke(Unknown Source)\n        at org.springframework.boot.loader.MainMethodRunner.run(MainMethodRunner.java:53)\n        at java.base/java.lang.Thread.run(Unknown Source)\nCaused by: java.lang.IllegalStateException: Cannot load configuration class: com.myCompany.myApp.MyService.App\n        at org.springframework.context.annotation.ConfigurationClassPostProcessor.enhanceConfigurationClasses(ConfigurationClassPostProcessor.java:395)\n        at org.springframework.context.annotation.ConfigurationClassPostProcessor.postProcessBeanFactory(ConfigurationClassPostProcessor.java:259)\n        at org.springframework.context.support.PostProcessorRegistrationDelegate.invokeBeanFactoryPostProcessors(PostProcessorRegistrationDelegate.java:265)\n        at org.springframework.context.support.PostProcessorRegistrationDelegate.invokeBeanFactoryPostProcessors(PostProcessorRegistrationDelegate.java:126)\n        at org.springframework.context.support.AbstractApplicationContext.invokeBeanFactoryPostProcessors(AbstractApplicationContext.java:607)\n        at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:462)\n        at org.springframework.boot.context.embedded.EmbeddedWebApplicationContext.refresh(EmbeddedWebApplicationContext.java:117)\n        at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:689)\n        at org.springframework.boot.SpringApplication.run(SpringApplication.java:321)\n        at org.springframework.boot.SpringApplication.run(SpringApplication.java:969)\n        at org.springframework.boot.SpringApplication.run(SpringApplication.java:958)\n        at com.myCompany.myApp.MyService.App.main(App.java:9)\n        ... 6 more\nCaused by: java.lang.ExceptionInInitializerError\n        at org.springframework.cglib.core.KeyFactory$Generator.generateClass(KeyFactory.java:166)\n        at org.springframework.cglib.core.DefaultGeneratorStrategy.generate(DefaultGeneratorStrategy.java:25)\n        at org.springframework.cglib.core.AbstractClassGenerator.create(AbstractClassGenerator.java:216)\n        at org.springframework.cglib.core.KeyFactory$Generator.create(KeyFactory.java:144)\n        at org.springframework.cglib.core.KeyFactory.create(KeyFactory.java:116)\n        at org.springframework.cglib.core.KeyFactory.create(KeyFactory.java:108)\n        at org.springframework.cglib.core.KeyFactory.create(KeyFactory.java:104)\n        at org.springframework.cglib.proxy.Enhancer.&lt;clinit&gt;(Enhancer.java:69)\n        at org.springframework.context.annotation.ConfigurationClassEnhancer.newEnhancer(ConfigurationClassEnhancer.java:112)\n        at org.springframework.context.annotation.ConfigurationClassEnhancer.enhance(ConfigurationClassEnhancer.java:100)\n        at org.springframework.context.annotation.ConfigurationClassPostProcessor.enhanceConfigurationClasses(ConfigurationClassPostProcessor.java:385)\n        ... 17 more\nCaused by: java.lang.reflect.InaccessibleObjectException: Unable to make protected final java.lang.Class java.lang.ClassLoader.defineClass(java.lang.String,byte[],int,int,java.security.ProtectionDomain) throws java.lang.ClassFormatError accessible: module java.base does not &quot;opens java.lang&quot; to unnamed module @2c60a1a7\n        at java.base/java.lang.reflect.AccessibleObject.checkCanSetAccessible(Unknown Source)\n        at java.base/java.lang.reflect.AccessibleObject.checkCanSetAccessible(Unknown Source)\n        at java.base/java.lang.reflect.Method.checkCanSetAccessible(Unknown Source)\n        at java.base/java.lang.reflect.Method.setAccessible(Unknown Source)\n        at org.springframework.cglib.core.ReflectUtils$2.run(ReflectUtils.java:56)\n        at java.base/java.security.AccessController.doPrivileged(Unknown Source)\n        at org.springframework.cglib.core.ReflectUtils.&lt;clinit&gt;(ReflectUtils.java:46)\n        ... 28 more\n[usr@YCApp61 ~/WorkDir]$\n\n</code></pre>\n<p>I tried running the application again with the following arguments but got the same error message:</p>\n<pre><code>java -jar ./MyService-0.0.1-SNAPSHOT.jar com.myCompany.myApp.MyServiceApplication --add-exports=java.base/jdk.internal.misc=ALL-UNNAMED --add-exports=java.base/sun.nio.ch=ALL-UNNAMED --add-exports=java.management/com.sun.jmx.mbeanserver=ALL-UNNAMED --add-exports=jdk.internal.jvmstat/sun.jvmstat.monitor=ALL-UNNAMED --add-exports=java.base/sun.reflect.generics.reflectiveObjects=ALL-UNNAMED --add-opens jdk.management/com.sun.management.internal=ALL-UNNAMED --add-opens java.base/java.nio=ALL-UNNAMED --add-opens java.base/java.util=ALL-UNNAMED --add-opens java.base/java.lang=ALL-UNNAMED \n\n</code></pre>\n<p>The machine I am trying to run on is Java 17.  Am I missing some jvm arguments or am I passing them incorrectly?</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":129540,"reputation":210847,"user_id":328193,"accept_rate":91,"display_name":"David"},"score":2,"creation_date":1645805256,"post_id":71268521,"comment_id":125975175,"body_markdown":"Take a step back.  Clearly each class shouldn&#39;t *create* an instance of the other class, as that is an endless cycle.  Instead, which class should *require* that an instance of the other class be *provided* to it?  For example, suppose you have a `Window` object and a `Menu` object which goes in the Window.  The Window object would *create* (and effectively own) an instance of the Menu.  If the Menu needs to interact with its &quot;parent&quot; Window then it would require a Window reference in its constructor, which the Window object would provide when creating the Menu.","body":"Take a step back.  Clearly each class shouldn&#39;t <i>create</i> an instance of the other class, as that is an endless cycle.  Instead, which class should <i>require</i> that an instance of the other class be <i>provided</i> to it?  For example, suppose you have a <code>Window</code> object and a <code>Menu</code> object which goes in the Window.  The Window object would <i>create</i> (and effectively own) an instance of the Menu.  If the Menu needs to interact with its &quot;parent&quot; Window then it would require a Window reference in its constructor, which the Window object would provide when creating the Menu."}],"answers":[{"tags":[],"owner":{"account_id":18243171,"reputation":19300,"user_id":13279831,"display_name":"Nowhere Man"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1645805424,"creation_date":1645805424,"answer_id":71268616,"question_id":71268521,"body_markdown":"You should NOT be creating a new instance of `Calculator` inside `MenubarListener`, just pass the reference to the `Calculator` via constructor/setter:\r\n```java\r\npublic class Calculator{\r\n\r\n    MenuBarListener menubarListener = new MenuBarListener(this, 10, 20, 30);\r\n//...\r\n}\r\n```\r\n```java\r\npublic class MenuBarListener {\r\n\r\n    final Calculator calculator;\r\n\r\n    int a, b, c;\r\n\r\n    MenuBarListener (Calculator calc, int a, int b, int c) {\r\n        this.calculator = calc;\r\n        this.a = a;\r\n        this.b = b;\r\n        this.c = c;\r\n    }\r\n// ...\r\n}\r\n```","title":"Two classes which have instances of each other ,give a stack over flow error","body":"<p>You should NOT be creating a new instance of <code>Calculator</code> inside <code>MenubarListener</code>, just pass the reference to the <code>Calculator</code> via constructor/setter:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class Calculator{\n\n    MenuBarListener menubarListener = new MenuBarListener(this, 10, 20, 30);\n//...\n}\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>public class MenuBarListener {\n\n    final Calculator calculator;\n\n    int a, b, c;\n\n    MenuBarListener (Calculator calc, int a, int b, int c) {\n        this.calculator = calc;\n        this.a = a;\n        this.b = b;\n        this.c = c;\n    }\n// ...\n}\n</code></pre>\n"}],"owner":{"account_id":17990726,"reputation":38,"user_id":13074882,"display_name":"siavosh noor"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":40,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1645805104,"accepted_answer_id":71268616,"answer_count":1,"score":0,"last_activity_date":1646075728,"creation_date":1645804949,"question_id":71268521,"body_markdown":"There are two classes : Calculator  and MenubarListener .\r\n The Calculator class has an instance of MenubarListener , and now in MenubarListener class I need to access two methods of the Calculator class and invoke them .but when I make an instance of Calculator inside MenubarListener the compiler shows stack over flow error. obviously  it falls in a loop I know why it happens but I can&#39;t find a proper solution .on the other hand  I don&#39;t want to make these methods static,otherwise that will create other problems.  \r\n How  can I access these two methods through the second class ?\r\n \r\nCalculator class:\r\n\r\n    public class Calculator{\r\n   \r\n        MenuBarListener menubarListener = new menubarListener(a,b,c);\r\n                .\r\n                .\r\n                .\r\n        public void method1{\r\n         //do something     \r\n        }\r\n        public void method2{\r\n         //do something \r\n        }\r\n     }\r\n\r\n MenubarListener class :\r\n     \r\n\r\n\r\n    public class MenubarListener {\r\n\r\n    //when I make an instance of calculator class compiler shows stackoverflow error.\r\n    Calculator calculator = new Calculator;\r\n\r\n    int a, b,c;\r\n    MenubarListener (int a ,int b,int c ){\r\n    this.a = a ;\r\n    ...   }\r\n   \r\n        @Override\r\n        public void actionPerformed(ActionEvent e) {\r\n\r\n        if (e.getSource() == helpItem) {\r\n        //I want to access these methods from Calculator class but it generates\r\n           calculator.method1();\r\n         }\r\n       }\r\n     }\r\n\r\n\r\n","title":"Two classes which have instances of each other ,give a stack over flow error","body":"<p>There are two classes : Calculator  and MenubarListener .\nThe Calculator class has an instance of MenubarListener , and now in MenubarListener class I need to access two methods of the Calculator class and invoke them .but when I make an instance of Calculator inside MenubarListener the compiler shows stack over flow error. obviously  it falls in a loop I know why it happens but I can't find a proper solution .on the other hand  I don't want to make these methods static,otherwise that will create other problems.<br />\nHow  can I access these two methods through the second class ?</p>\n<p>Calculator class:</p>\n<pre><code>public class Calculator{\n\n    MenuBarListener menubarListener = new menubarListener(a,b,c);\n            .\n            .\n            .\n    public void method1{\n     //do something     \n    }\n    public void method2{\n     //do something \n    }\n }\n</code></pre>\n<p>MenubarListener class :</p>\n<pre><code>public class MenubarListener {\n\n//when I make an instance of calculator class compiler shows stackoverflow error.\nCalculator calculator = new Calculator;\n\nint a, b,c;\nMenubarListener (int a ,int b,int c ){\nthis.a = a ;\n...   }\n\n    @Override\n    public void actionPerformed(ActionEvent e) {\n\n    if (e.getSource() == helpItem) {\n    //I want to access these methods from Calculator class but it generates\n       calculator.method1();\n     }\n   }\n }\n</code></pre>\n"},{"tags":["java","android","android-studio","android-11","scoped-storage"],"comments":[{"owner":{"account_id":16134940,"reputation":88,"user_id":11647620,"display_name":"Usama Altaf"},"score":0,"creation_date":1631797364,"post_id":69206250,"comment_id":122323481,"body_markdown":"https://stackoverflow.com/questions/67768384/whatsapp-status-save-in-android-11-or-above","body":"<a href=\"https://stackoverflow.com/questions/67768384/whatsapp-status-save-in-android-11-or-above\" title=\"whatsapp status save in android 11 or above\">stackoverflow.com/questions/67768384/&hellip;</a>"},{"owner":{"account_id":18284330,"reputation":39,"user_id":13312583,"display_name":"Garvit"},"score":0,"creation_date":1631798648,"post_id":69206250,"comment_id":122324128,"body_markdown":"I am able to read whatsapp&#39;s files, I want to store those files now (video ones)","body":"I am able to read whatsapp&#39;s files, I want to store those files now (video ones)"}],"answers":[{"tags":[],"owner":{"account_id":19267933,"reputation":316,"user_id":14082516,"display_name":"Marvin Stelter"},"down_vote_count":0,"up_vote_count":6,"is_accepted":true,"score":6,"last_activity_date":1646075411,"creation_date":1644070501,"answer_id":70998823,"question_id":69206250,"body_markdown":"Try this, I use it for my WhatsApp Status Saver App:\r\n\r\n\r\n     @RequiresApi(api = Build.VERSION_CODES.Q)\r\n    private void saveVideoQ(Uri uri3){\r\n\r\n        Context context = MainActivity.this;\r\n        String videoFileName = &quot;video_&quot; + System.currentTimeMillis() + &quot;.mp4&quot;;\r\n\r\n        ContentValues valuesvideos;\r\n        valuesvideos = new ContentValues();\r\n        valuesvideos.put(MediaStore.Video.Media.RELATIVE_PATH, &quot;Movies/&quot;);\r\n        valuesvideos.put(MediaStore.Video.Media.TITLE, videoFileName);\r\n        valuesvideos.put(MediaStore.Video.Media.DISPLAY_NAME, videoFileName);\r\n        valuesvideos.put(MediaStore.Video.Media.MIME_TYPE, &quot;video/mp4&quot;);\r\n        valuesvideos.put(MediaStore.Video.Media.DATE_ADDED, System.currentTimeMillis() / 1000);\r\n        valuesvideos.put(MediaStore.Video.Media.DATE_TAKEN, System.currentTimeMillis());\r\n        valuesvideos.put(MediaStore.Video.Media.IS_PENDING, 1);\r\n        ContentResolver resolver = context.getContentResolver();\r\n        Uri collection = MediaStore.Video.Media.getContentUri(MediaStore.VOLUME_EXTERNAL_PRIMARY); //all video files on primary external storage\r\n        Uri uriSavedVideo = resolver.insert(collection, valuesvideos);\r\n\r\n        ParcelFileDescriptor pfd;\r\n\r\n        try {\r\n            pfd = context.getContentResolver().openFileDescriptor(uriSavedVideo,&quot;w&quot;);\r\n\r\n            assert pfd != null;\r\n            FileOutputStream out = new FileOutputStream(pfd.getFileDescriptor());\r\n\r\n            // Get the already saved video as fileinputstream from here\r\n            InputStream in = getContentResolver().openInputStream(uri3);\r\n\r\n\r\n            byte[] buf = new byte[8192];\r\n\r\n            int len;\r\n            int progress = 0;\r\n            while ((len = in.read(buf)) &gt; 0) {\r\n                progress = progress + len;\r\n\r\n                out.write(buf, 0, len);\r\n            }\r\n            out.close();\r\n            in.close();\r\n            pfd.close();\r\n            valuesvideos.clear();\r\n            valuesvideos.put(MediaStore.Video.Media.IS_PENDING, 0);\r\n            valuesvideos.put(MediaStore.Video.Media.IS_PENDING, 0); //only your app can see the files until pending is turned into 0\r\n\r\n            context.getContentResolver().update(uriSavedVideo, valuesvideos, null, null);\r\n            File file = new File(Environment.getExternalStorageDirectory() + File.separator + &quot;/Movies/&quot; + videoFileName);\r\n         \r\n        } catch (Exception e) {\r\n            Toast.makeText(context, &quot;error: &quot; + e.getMessage(), Toast.LENGTH_SHORT).show();\r\n            e.printStackTrace();\r\n        }\r\n    }","title":"How to save video file in Android 11 or Android Q","body":"<p>Try this, I use it for my WhatsApp Status Saver App:</p>\n<pre><code> @RequiresApi(api = Build.VERSION_CODES.Q)\nprivate void saveVideoQ(Uri uri3){\n\n    Context context = MainActivity.this;\n    String videoFileName = &quot;video_&quot; + System.currentTimeMillis() + &quot;.mp4&quot;;\n\n    ContentValues valuesvideos;\n    valuesvideos = new ContentValues();\n    valuesvideos.put(MediaStore.Video.Media.RELATIVE_PATH, &quot;Movies/&quot;);\n    valuesvideos.put(MediaStore.Video.Media.TITLE, videoFileName);\n    valuesvideos.put(MediaStore.Video.Media.DISPLAY_NAME, videoFileName);\n    valuesvideos.put(MediaStore.Video.Media.MIME_TYPE, &quot;video/mp4&quot;);\n    valuesvideos.put(MediaStore.Video.Media.DATE_ADDED, System.currentTimeMillis() / 1000);\n    valuesvideos.put(MediaStore.Video.Media.DATE_TAKEN, System.currentTimeMillis());\n    valuesvideos.put(MediaStore.Video.Media.IS_PENDING, 1);\n    ContentResolver resolver = context.getContentResolver();\n    Uri collection = MediaStore.Video.Media.getContentUri(MediaStore.VOLUME_EXTERNAL_PRIMARY); //all video files on primary external storage\n    Uri uriSavedVideo = resolver.insert(collection, valuesvideos);\n\n    ParcelFileDescriptor pfd;\n\n    try {\n        pfd = context.getContentResolver().openFileDescriptor(uriSavedVideo,&quot;w&quot;);\n\n        assert pfd != null;\n        FileOutputStream out = new FileOutputStream(pfd.getFileDescriptor());\n\n        // Get the already saved video as fileinputstream from here\n        InputStream in = getContentResolver().openInputStream(uri3);\n\n\n        byte[] buf = new byte[8192];\n\n        int len;\n        int progress = 0;\n        while ((len = in.read(buf)) &gt; 0) {\n            progress = progress + len;\n\n            out.write(buf, 0, len);\n        }\n        out.close();\n        in.close();\n        pfd.close();\n        valuesvideos.clear();\n        valuesvideos.put(MediaStore.Video.Media.IS_PENDING, 0);\n        valuesvideos.put(MediaStore.Video.Media.IS_PENDING, 0); //only your app can see the files until pending is turned into 0\n\n        context.getContentResolver().update(uriSavedVideo, valuesvideos, null, null);\n        File file = new File(Environment.getExternalStorageDirectory() + File.separator + &quot;/Movies/&quot; + videoFileName);\n     \n    } catch (Exception e) {\n        Toast.makeText(context, &quot;error: &quot; + e.getMessage(), Toast.LENGTH_SHORT).show();\n        e.printStackTrace();\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":18284330,"reputation":39,"user_id":13312583,"display_name":"Garvit"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1591,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":70998823,"answer_count":1,"score":2,"last_activity_date":1646075411,"creation_date":1631786064,"question_id":69206250,"body_markdown":"   \r\nI want to save whatsapp&#39;s statuses. \r\nBy using this code I am able to save images \r\n\r\n    public void saveImage(Bitmap bitmap, String name) {\r\n        OutputStream fileOutputStream;\r\n        Uri imageUri;\r\n        try {\r\n            if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.Q) {\r\n                ContentResolver contentResolver = context.getApplicationContext().getContentResolver();\r\n                ContentValues contentValues = new ContentValues();\r\n    \r\n                contentValues.put(MediaStore.MediaColumns.DISPLAY_NAME, &quot;&quot; + name);\r\n                contentValues.put(MediaStore.MediaColumns.MIME_TYPE, &quot;image/jpg&quot;);\r\n                contentValues.put(MediaStore.MediaColumns.RELATIVE_PATH, Environment.DIRECTORY_DCIM + &quot;/V Troid/WhatsApp&quot;);\r\n                imageUri = contentResolver.insert(MediaStore.Images.Media.EXTERNAL_CONTENT_URI, contentValues);\r\n                fileOutputStream = (FileOutputStream) contentResolver.openOutputStream(Objects.requireNonNull(imageUri));\r\n                bitmap.compress(Bitmap.CompressFormat.JPEG, 100, fileOutputStream);\r\n                Objects.requireNonNull(fileOutputStream);\r\n                Toast.makeText(context.getApplicationContext(), &quot;Image Saved&quot;, Toast.LENGTH_SHORT).show();\r\n    \r\n            }\r\n        } catch (Exception e) {\r\n            Toast.makeText(context.getApplicationContext(), &quot;Error \\n&quot; + e, Toast.LENGTH_SHORT).show();\r\n        }\r\n    }\r\n\r\n\r\nBut now I want to save video file too and for this I am using this code but its not working for me the file I am getting after this code is corrupted\r\n\r\n\r\n    public void saveVideo(String name, Uri vidUri) {\r\n            OutputStream fileOutputStream;\r\n            Uri VideoUri;\r\n            try {\r\n                if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.Q) {\r\n    \r\n                    ContentResolver contentResolver = context.getApplicationContext().getContentResolver();\r\n                    ContentValues contentValues = new ContentValues();\r\n                    contentValues.put(MediaStore.MediaColumns.DISPLAY_NAME, &quot;&quot; + name);\r\n                    contentValues.put(MediaStore.MediaColumns.MIME_TYPE, &quot;video/mp4&quot;);\r\n                    contentValues.put(MediaStore.MediaColumns.RELATIVE_PATH, Environment.DIRECTORY_MOVIES + &quot;/V Troid/WhatsApp&quot;);\r\n                    VideoUri = contentResolver.insert(MediaStore.Video.Media.EXTERNAL_CONTENT_URI, contentValues);\r\n                    fileOutputStream = (FileOutputStream) contentResolver.openOutputStream(Objects.requireNonNull(vidUri));\r\n                    Uri videoFileUri = contentResolver.insert(vidUri, contentValues);\r\n                    Objects.requireNonNull(fileOutputStream);\r\n                    Toast.makeText(context.getApplicationContext(), &quot;Should Work&quot;, Toast.LENGTH_SHORT).show();\r\n    \r\n                }\r\n            } catch (Exception e) {\r\n                Toast.makeText(context.getApplicationContext(), &quot;Error in saving\\n&quot; + e, Toast.LENGTH_SHORT).show();\r\n            }\r\n        }\r\n\r\n\r\n\r\nI am targeting Android 11","title":"How to save video file in Android 11 or Android Q","body":"<p>I want to save whatsapp's statuses.\nBy using this code I am able to save images</p>\n<pre><code>public void saveImage(Bitmap bitmap, String name) {\n    OutputStream fileOutputStream;\n    Uri imageUri;\n    try {\n        if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.Q) {\n            ContentResolver contentResolver = context.getApplicationContext().getContentResolver();\n            ContentValues contentValues = new ContentValues();\n\n            contentValues.put(MediaStore.MediaColumns.DISPLAY_NAME, &quot;&quot; + name);\n            contentValues.put(MediaStore.MediaColumns.MIME_TYPE, &quot;image/jpg&quot;);\n            contentValues.put(MediaStore.MediaColumns.RELATIVE_PATH, Environment.DIRECTORY_DCIM + &quot;/V Troid/WhatsApp&quot;);\n            imageUri = contentResolver.insert(MediaStore.Images.Media.EXTERNAL_CONTENT_URI, contentValues);\n            fileOutputStream = (FileOutputStream) contentResolver.openOutputStream(Objects.requireNonNull(imageUri));\n            bitmap.compress(Bitmap.CompressFormat.JPEG, 100, fileOutputStream);\n            Objects.requireNonNull(fileOutputStream);\n            Toast.makeText(context.getApplicationContext(), &quot;Image Saved&quot;, Toast.LENGTH_SHORT).show();\n\n        }\n    } catch (Exception e) {\n        Toast.makeText(context.getApplicationContext(), &quot;Error \\n&quot; + e, Toast.LENGTH_SHORT).show();\n    }\n}\n</code></pre>\n<p>But now I want to save video file too and for this I am using this code but its not working for me the file I am getting after this code is corrupted</p>\n<pre><code>public void saveVideo(String name, Uri vidUri) {\n        OutputStream fileOutputStream;\n        Uri VideoUri;\n        try {\n            if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.Q) {\n\n                ContentResolver contentResolver = context.getApplicationContext().getContentResolver();\n                ContentValues contentValues = new ContentValues();\n                contentValues.put(MediaStore.MediaColumns.DISPLAY_NAME, &quot;&quot; + name);\n                contentValues.put(MediaStore.MediaColumns.MIME_TYPE, &quot;video/mp4&quot;);\n                contentValues.put(MediaStore.MediaColumns.RELATIVE_PATH, Environment.DIRECTORY_MOVIES + &quot;/V Troid/WhatsApp&quot;);\n                VideoUri = contentResolver.insert(MediaStore.Video.Media.EXTERNAL_CONTENT_URI, contentValues);\n                fileOutputStream = (FileOutputStream) contentResolver.openOutputStream(Objects.requireNonNull(vidUri));\n                Uri videoFileUri = contentResolver.insert(vidUri, contentValues);\n                Objects.requireNonNull(fileOutputStream);\n                Toast.makeText(context.getApplicationContext(), &quot;Should Work&quot;, Toast.LENGTH_SHORT).show();\n\n            }\n        } catch (Exception e) {\n            Toast.makeText(context.getApplicationContext(), &quot;Error in saving\\n&quot; + e, Toast.LENGTH_SHORT).show();\n        }\n    }\n</code></pre>\n<p>I am targeting Android 11</p>\n"},{"tags":["java","swing","awt","numberformatexception"],"comments":[{"owner":{"account_id":3212023,"reputation":1016,"user_id":17856705,"display_name":"Computable"},"score":2,"creation_date":1646062774,"post_id":71297393,"comment_id":126025906,"body_markdown":"You&#39;re trying to parse &#39;asdf&#39; as an integer and thus the exception.  What is the question ?","body":"You&#39;re trying to parse &#39;asdf&#39; as an integer and thus the exception.  What is the question ?"},{"owner":{"account_id":7840591,"reputation":198,"user_id":5927289,"display_name":"Mario Petrovic"},"score":0,"creation_date":1646062931,"post_id":71297393,"comment_id":126025959,"body_markdown":"int playerGuess = Integer.parseInt(playerGuessField.getText().trim()); this part is not under try/catch and it is executed before your validation.","body":"int playerGuess = Integer.parseInt(playerGuessField.getText().trim()); this part is not under try/catch and it is executed before your validation."},{"owner":{"account_id":22511930,"reputation":3,"user_id":16706779,"display_name":"Recursion"},"score":0,"creation_date":1646063179,"post_id":71297393,"comment_id":126026052,"body_markdown":"And that&#39;s the problem I&#39;m having - I wasn&#39;t throwing an error at line 137 prior to a couple days ago. I was constantly checking to make sure that an empty field and string input was caught by the validator.","body":"And that&#39;s the problem I&#39;m having - I wasn&#39;t throwing an error at line 137 prior to a couple days ago. I was constantly checking to make sure that an empty field and string input was caught by the validator."},{"owner":{"account_id":183279,"reputation":168313,"user_id":418556,"accept_rate":98,"display_name":"Andrew Thompson"},"score":0,"creation_date":1646063660,"post_id":71297393,"comment_id":126026257,"body_markdown":"[Edit] to add a [mre].","body":"<a href=\"https://stackoverflow.com/posts/71297393/edit\">Edit</a> to add a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."},{"owner":{"account_id":2562742,"reputation":5917,"user_id":2851311,"display_name":"hfontanez"},"score":0,"creation_date":1646068909,"post_id":71297393,"comment_id":126028329,"body_markdown":"@Recursion thanks for selecting my answer! For your case, I suggest either option #3 or #4. As you saw in my answer, I prefer #4.","body":"@Recursion thanks for selecting my answer! For your case, I suggest either option #3 or #4. As you saw in my answer, I prefer #4."}],"answers":[{"tags":[],"owner":{"account_id":2562742,"reputation":5917,"user_id":2851311,"display_name":"hfontanez"},"down_vote_count":1,"up_vote_count":0,"is_accepted":true,"score":-1,"last_activity_date":1646075016,"creation_date":1646068697,"answer_id":71298706,"question_id":71297393,"body_markdown":"Bottom line: You need to validate your input.\r\n\r\nTo do this, I can think of a few options:\r\n\r\nOption 1: Use `Scanner` to check if the input is numeric\r\n--------------------------------------------------------\r\n\r\n```\r\nScanner scanner = new Scanner(playerGuessField.getText().trim());\r\nif (scanner.hasNextInt()) {\r\n    int playerGuess =  scanner.nextInt();\r\n} else {\r\n    // handle the error\r\n}\r\n```\r\n\r\n----------\r\n\r\nOption 2: Wrap line 137 in a `try/catch`\r\n--------------------------------------------\r\n```\r\nint playerGuess = 0;\r\ntry {\r\n    playerGuess = Integer.parseInt(playerGuessField.getText().trim());\r\n} catch (NumberFormatException nfe) {\r\n    // handle the exception\r\n}\r\n```\r\n----------\r\n\r\nOption 3: Add an input verifier to the text field.\r\n------------------------------------------------------------------------\r\nFor this, you need to create an input verifier\r\n```\r\npublic class MyInputVerifier extends InputVerifier {\r\n\t@Override\r\n\tpublic boolean verify(JComponent input) {\r\n\t\tString text = ((JTextField) input).getText();\r\n\t\ttry {\r\n\t\t\tBigDecimal value = new BigDecimal(text);\r\n\t\t\treturn true; // or some other evaluation (i.e. value &gt; 0 for positive value)\r\n\t\t} catch (NumberFormatException e) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t}\r\n}\r\n```\r\nThen, you need to add it to the field\r\n```\r\nfield.setInputVerifier(new MyInputVerifier());\r\n```\r\nAnd lastly, you need to trigger the verification. This is typically done when the form is rendered. My example is using an `ActionListener`.\r\n```\r\nbtn.addActionListener(e -&gt; {\r\n\tif (!field.getInputVerifier().verify(field)) {\r\n\t\tSystem.out.println(&quot;Not valid. Clear!&quot;);\r\n\t\tfield.setText(&quot;&quot;);\r\n\t}\r\n});\r\n```\r\n\r\n----------\r\n\r\nOption 4: Use `DocumentListener`\r\n---------\r\n```\r\npublic class InputVerifierDemo {\r\n\tprivate static JLabel errorMsg = new JLabel(&quot;Invalid input&quot;);\r\n\tprivate static JFrame frame = new JFrame();\r\n\tpublic static void main(String[] args) {\r\n\t\tJTextField field = new JTextField(10);\r\n//\t\tfield.setInputVerifier(new MyInputVerifier());\r\n\t\tJButton btn = new JButton(&quot;Click Me!&quot;);\r\n//\t\tbtn.addActionListener(e -&gt; {\r\n//\t\t\tif (!field.getInputVerifier().verify(field)) {\r\n//\t\t\t\tSystem.out.println(&quot;Not valid. Clear!&quot;);\r\n//\t\t\t\tfield.setText(&quot;&quot;);\r\n//\t\t\t}\r\n//\t\t});\r\n\t\tJPanel panel = new JPanel();\r\n\r\n\t\terrorMsg.setForeground(Color.RED);\r\n\t\terrorMsg.setVisible(false);\r\n\t\tpanel.setLayout(new GridBagLayout());\r\n\t\tGridBagConstraints c = new GridBagConstraints();\r\n\t\tc.insets = new Insets(5, 0, 0, 5);\r\n\t\tc.gridx = 1;\r\n\t\tc.gridy = 0;\r\n\t\tc.anchor = GridBagConstraints.SOUTH;\r\n\t\tpanel.add(errorMsg, c);\r\n\r\n\t\tc.gridx = 1;\r\n\t\tc.gridy = 1;\r\n\t\tc.anchor = GridBagConstraints.CENTER;\r\n\t\tpanel.add(field, c);\r\n\r\n\t\tfield.getDocument().addDocumentListener(new DocumentListener() {\r\n\t\t\t@Override\r\n\t\t\tpublic void removeUpdate(DocumentEvent e) {\r\n\t\t\t\tvalidateInput(field);\r\n\t\t\t}\r\n\r\n\t\t\t@Override\r\n\t\t\tpublic void insertUpdate(DocumentEvent e) {\r\n\t\t\t\tvalidateInput(field);\r\n\t\t\t}\r\n\r\n\t\t\t@Override\r\n\t\t\tpublic void changedUpdate(DocumentEvent e) {\r\n\t\t\t} // Not needed for plain-text fields\r\n\t\t});\r\n\r\n\t\tframe.getContentPane().add(panel);\r\n\t\tframe.setSize(400, 400);\r\n\t\tframe.setLocationRelativeTo(null);\r\n\r\n\t\tframe.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\r\n\t\tframe.setVisible(true);\r\n\t}\r\n\r\n\tprivate static void validateInput(JTextField field) {\r\n\t\tString text = field.getText();\r\n\t\tString pattern = &quot;\\\\d+&quot;;\r\n\t\tPattern r = Pattern.compile(pattern);\r\n\t\tMatcher m = r.matcher(text);\r\n\t\tif (m.matches()) {\r\n\t\t\terrorMsg.setVisible(false);\r\n\t\t} else {\r\n\t\t\terrorMsg.setVisible(true);\r\n\t\t}\r\n\t}\r\n\r\n\tprivate static class MyInputVerifier extends InputVerifier {\r\n\t\t@Override\r\n\t\tpublic boolean verify(JComponent input) {\r\n\t\t\tString text = ((JTextField) input).getText();\r\n\t\t\ttry {\r\n\t\t\t\tBigDecimal value = new BigDecimal(text);\r\n\t\t\t\treturn true; // or some other evaluation (i.e. value &gt; 0 for positive value)\r\n\t\t\t} catch (NumberFormatException e) {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\n```\r\nThe code above contain the input verifier AND the document listener solutions so that you could play with both. I personally prefer the document listener because it is more interactive. I rather validate fields as I am typing on them, rather than after the fact when all the fields are filled and an action to submit the form takes place. But, this is all a matter of personal preference.\r\n\r\nI credit *MadProgrammer* for option #1.","title":"Java exception in thread &quot;AWT-EventQueue-0&quot; java.lang.NumberFormatException: For input string: &quot;&quot;","body":"<p>Bottom line: You need to validate your input.</p>\n<p>To do this, I can think of a few options:</p>\n<h2>Option 1: Use <code>Scanner</code> to check if the input is numeric</h2>\n<pre><code>Scanner scanner = new Scanner(playerGuessField.getText().trim());\nif (scanner.hasNextInt()) {\n    int playerGuess =  scanner.nextInt();\n} else {\n    // handle the error\n}\n</code></pre>\n<hr />\n<h2>Option 2: Wrap line 137 in a <code>try/catch</code></h2>\n<pre><code>int playerGuess = 0;\ntry {\n    playerGuess = Integer.parseInt(playerGuessField.getText().trim());\n} catch (NumberFormatException nfe) {\n    // handle the exception\n}\n</code></pre>\n<hr />\n<h2>Option 3: Add an input verifier to the text field.</h2>\n<p>For this, you need to create an input verifier</p>\n<pre><code>public class MyInputVerifier extends InputVerifier {\n    @Override\n    public boolean verify(JComponent input) {\n        String text = ((JTextField) input).getText();\n        try {\n            BigDecimal value = new BigDecimal(text);\n            return true; // or some other evaluation (i.e. value &gt; 0 for positive value)\n        } catch (NumberFormatException e) {\n            return false;\n        }\n    }\n}\n</code></pre>\n<p>Then, you need to add it to the field</p>\n<pre><code>field.setInputVerifier(new MyInputVerifier());\n</code></pre>\n<p>And lastly, you need to trigger the verification. This is typically done when the form is rendered. My example is using an <code>ActionListener</code>.</p>\n<pre><code>btn.addActionListener(e -&gt; {\n    if (!field.getInputVerifier().verify(field)) {\n        System.out.println(&quot;Not valid. Clear!&quot;);\n        field.setText(&quot;&quot;);\n    }\n});\n</code></pre>\n<hr />\n<h2>Option 4: Use <code>DocumentListener</code></h2>\n<pre><code>public class InputVerifierDemo {\n    private static JLabel errorMsg = new JLabel(&quot;Invalid input&quot;);\n    private static JFrame frame = new JFrame();\n    public static void main(String[] args) {\n        JTextField field = new JTextField(10);\n//      field.setInputVerifier(new MyInputVerifier());\n        JButton btn = new JButton(&quot;Click Me!&quot;);\n//      btn.addActionListener(e -&gt; {\n//          if (!field.getInputVerifier().verify(field)) {\n//              System.out.println(&quot;Not valid. Clear!&quot;);\n//              field.setText(&quot;&quot;);\n//          }\n//      });\n        JPanel panel = new JPanel();\n\n        errorMsg.setForeground(Color.RED);\n        errorMsg.setVisible(false);\n        panel.setLayout(new GridBagLayout());\n        GridBagConstraints c = new GridBagConstraints();\n        c.insets = new Insets(5, 0, 0, 5);\n        c.gridx = 1;\n        c.gridy = 0;\n        c.anchor = GridBagConstraints.SOUTH;\n        panel.add(errorMsg, c);\n\n        c.gridx = 1;\n        c.gridy = 1;\n        c.anchor = GridBagConstraints.CENTER;\n        panel.add(field, c);\n\n        field.getDocument().addDocumentListener(new DocumentListener() {\n            @Override\n            public void removeUpdate(DocumentEvent e) {\n                validateInput(field);\n            }\n\n            @Override\n            public void insertUpdate(DocumentEvent e) {\n                validateInput(field);\n            }\n\n            @Override\n            public void changedUpdate(DocumentEvent e) {\n            } // Not needed for plain-text fields\n        });\n\n        frame.getContentPane().add(panel);\n        frame.setSize(400, 400);\n        frame.setLocationRelativeTo(null);\n\n        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\n        frame.setVisible(true);\n    }\n\n    private static void validateInput(JTextField field) {\n        String text = field.getText();\n        String pattern = &quot;\\\\d+&quot;;\n        Pattern r = Pattern.compile(pattern);\n        Matcher m = r.matcher(text);\n        if (m.matches()) {\n            errorMsg.setVisible(false);\n        } else {\n            errorMsg.setVisible(true);\n        }\n    }\n\n    private static class MyInputVerifier extends InputVerifier {\n        @Override\n        public boolean verify(JComponent input) {\n            String text = ((JTextField) input).getText();\n            try {\n                BigDecimal value = new BigDecimal(text);\n                return true; // or some other evaluation (i.e. value &gt; 0 for positive value)\n            } catch (NumberFormatException e) {\n                return false;\n            }\n        }\n    }\n}\n</code></pre>\n<p>The code above contain the input verifier AND the document listener solutions so that you could play with both. I personally prefer the document listener because it is more interactive. I rather validate fields as I am typing on them, rather than after the fact when all the fields are filled and an action to submit the form takes place. But, this is all a matter of personal preference.</p>\n<p>I credit <em>MadProgrammer</em> for option #1.</p>\n"}],"owner":{"account_id":22511930,"reputation":3,"user_id":16706779,"display_name":"Recursion"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1388,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":71298706,"answer_count":1,"score":0,"last_activity_date":1646075016,"creation_date":1646062528,"question_id":71297393,"body_markdown":"My code is throwing an expected error too early. I was trying to test input validation, but I&#39;m throwing an error before validation occurs. When I tried restoring my code to a previous version that worked perfectly fine it throws the same error I&#39;m dealing with now before it was a problem. \r\n\r\n[example of the input][1]\r\n\r\n***The code below is line 137*** - the apparent offender\r\n```\r\nint playerGuess = Integer.parseInt(playerGuessField.getText().trim());\r\n```\r\n\r\n\r\n```\r\n    private void guessButtonClicked(){\r\n        Validators validGuess = new Validators(this);\r\n        int guessesRemaining = Integer.parseInt(guessesRemainingField.getText());\r\n        int playerGuess = Integer.parseInt(playerGuessField.getText().trim());//error is thrown here\r\n        \r\n        if(validGuess.isValidGuess(playerGuessField, &quot;guess&quot;)){\r\n            //more code here but not necessarily relevant\r\n        }\r\n    }\r\n```\r\n```\r\n    //basic structure of my validators\r\n    public boolean isValidGuess(JTextComponent c, String fieldName){\r\n        try {\r\n            int validGuess = Integer.parseInt(c.getText());\r\n            if(validGuess &gt;= 1 &amp;&amp; validGuess &lt;= 10){\r\n                return true;\r\n            } else {\r\n                showErrorDialog(&quot;Your &quot; + fieldName + &quot; must be between 1 &amp; 10&quot;);\r\n                c.requestFocusInWindow();\r\n                return false;\r\n            }\r\n        } catch (NumberFormatException e) {\r\n            showErrorDialog(&quot;Your &quot; + fieldName + &quot; must be between 1 &amp; 10&quot;);\r\n            c.requestFocusInWindow();\r\n            return false;\r\n        }\r\n    }\r\n\r\n\r\n```\r\n\r\n\r\nHere&#39;s the exception in all it&#39;s glory.\r\n```\r\nException in thread &quot;AWT-EventQueue-0&quot; java.lang.NumberFormatException: For input string: &quot;asdf&quot;\r\n        at java.base/java.lang.NumberFormatException.forInputString(NumberFormatException.java:67)\r\n        at java.base/java.lang.Integer.parseInt(Integer.java:660)\r\n        at java.base/java.lang.Integer.parseInt(Integer.java:778)\r\n        at GameGUI.guessButtonClicked(GameGUI.java:137)\r\n        at GameGUI.lambda$0(GameGUI.java:94)\r\n        at java.desktop/javax.swing.AbstractButton.fireActionPerformed(AbstractButton.java:1972)\r\n        at java.desktop/javax.swing.AbstractButton$Handler.actionPerformed(AbstractButton.java:2313)\r\n        at java.desktop/javax.swing.DefaultButtonModel.fireActionPerformed(DefaultButtonModel.java:405)\r\n        at java.desktop/javax.swing.DefaultButtonModel.setPressed(DefaultButtonModel.java:262)\r\n        at java.desktop/javax.swing.plaf.basic.BasicButtonListener.mouseReleased(BasicButtonListener.java:279)\r\n        at java.desktop/java.awt.Component.processMouseEvent(Component.java:6617)\r\n        at java.desktop/javax.swing.JComponent.processMouseEvent(JComponent.java:3342)\r\n        at java.desktop/java.awt.Component.processEvent(Component.java:6382)\r\n        at java.desktop/java.awt.Container.processEvent(Container.java:2264)\r\n        at java.desktop/java.awt.Component.dispatchEventImpl(Component.java:4993)\r\n        at java.desktop/java.awt.Container.dispatchEventImpl(Container.java:2322)\r\n        at java.desktop/java.awt.Component.dispatchEvent(Component.java:4825)\r\n        at java.desktop/java.awt.LightweightDispatcher.retargetMouseEvent(Container.java:4934)\r\n        at java.desktop/java.awt.LightweightDispatcher.processMouseEvent(Container.java:4563)\r\n        at java.desktop/java.awt.LightweightDispatcher.dispatchEvent(Container.java:4504)\r\n        at java.desktop/java.awt.Container.dispatchEventImpl(Container.java:2308)\r\n        at java.desktop/java.awt.Window.dispatchEventImpl(Window.java:2773)\r\n        at java.desktop/java.awt.Component.dispatchEvent(Component.java:4825)\r\n        at java.desktop/java.awt.EventQueue.dispatchEventImpl(EventQueue.java:772)\r\n        at java.desktop/java.awt.EventQueue$4.run(EventQueue.java:721)\r\n        at java.desktop/java.awt.EventQueue$4.run(EventQueue.java:715)\r\n        at java.base/java.security.AccessController.doPrivileged(AccessController.java:391)\r\n        at java.base/java.security.ProtectionDomain$JavaSecurityAccessImpl.doIntersectionPrivilege(ProtectionDomain.java:85)\r\n        at java.base/java.security.ProtectionDomain$JavaSecurityAccessImpl.doIntersectionPrivilege(ProtectionDomain.java:95)\r\n        at java.desktop/java.awt.EventQueue$5.run(EventQueue.java:745)\r\n        at java.desktop/java.awt.EventQueue$5.run(EventQueue.java:743)\r\n        at java.base/java.security.AccessController.doPrivileged(AccessController.java:391)\r\n        at java.base/java.security.ProtectionDomain$JavaSecurityAccessImpl.doIntersectionPrivilege(ProtectionDomain.java:85)\r\n        at java.desktop/java.awt.EventQueue.dispatchEvent(EventQueue.java:742)\r\n        at java.desktop/java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:203)\r\n        at java.desktop/java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:124)\r\n        at java.desktop/java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:113)\r\n        at java.desktop/java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:109)\r\n        at java.desktop/java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:101)\r\n        at java.desktop/java.awt.EventDispatchThread.run(EventDispatchThread.java:90)\r\n```\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/dE0Nj.png","title":"Java exception in thread &quot;AWT-EventQueue-0&quot; java.lang.NumberFormatException: For input string: &quot;&quot;","body":"<p>My code is throwing an expected error too early. I was trying to test input validation, but I'm throwing an error before validation occurs. When I tried restoring my code to a previous version that worked perfectly fine it throws the same error I'm dealing with now before it was a problem.</p>\n<p><a href=\"https://i.stack.imgur.com/dE0Nj.png\" rel=\"nofollow noreferrer\">example of the input</a></p>\n<p><em><strong>The code below is line 137</strong></em> - the apparent offender</p>\n<pre><code>int playerGuess = Integer.parseInt(playerGuessField.getText().trim());\n</code></pre>\n<pre><code>    private void guessButtonClicked(){\n        Validators validGuess = new Validators(this);\n        int guessesRemaining = Integer.parseInt(guessesRemainingField.getText());\n        int playerGuess = Integer.parseInt(playerGuessField.getText().trim());//error is thrown here\n        \n        if(validGuess.isValidGuess(playerGuessField, &quot;guess&quot;)){\n            //more code here but not necessarily relevant\n        }\n    }\n</code></pre>\n<pre><code>    //basic structure of my validators\n    public boolean isValidGuess(JTextComponent c, String fieldName){\n        try {\n            int validGuess = Integer.parseInt(c.getText());\n            if(validGuess &gt;= 1 &amp;&amp; validGuess &lt;= 10){\n                return true;\n            } else {\n                showErrorDialog(&quot;Your &quot; + fieldName + &quot; must be between 1 &amp; 10&quot;);\n                c.requestFocusInWindow();\n                return false;\n            }\n        } catch (NumberFormatException e) {\n            showErrorDialog(&quot;Your &quot; + fieldName + &quot; must be between 1 &amp; 10&quot;);\n            c.requestFocusInWindow();\n            return false;\n        }\n    }\n\n\n</code></pre>\n<p>Here's the exception in all it's glory.</p>\n<pre><code>Exception in thread &quot;AWT-EventQueue-0&quot; java.lang.NumberFormatException: For input string: &quot;asdf&quot;\n        at java.base/java.lang.NumberFormatException.forInputString(NumberFormatException.java:67)\n        at java.base/java.lang.Integer.parseInt(Integer.java:660)\n        at java.base/java.lang.Integer.parseInt(Integer.java:778)\n        at GameGUI.guessButtonClicked(GameGUI.java:137)\n        at GameGUI.lambda$0(GameGUI.java:94)\n        at java.desktop/javax.swing.AbstractButton.fireActionPerformed(AbstractButton.java:1972)\n        at java.desktop/javax.swing.AbstractButton$Handler.actionPerformed(AbstractButton.java:2313)\n        at java.desktop/javax.swing.DefaultButtonModel.fireActionPerformed(DefaultButtonModel.java:405)\n        at java.desktop/javax.swing.DefaultButtonModel.setPressed(DefaultButtonModel.java:262)\n        at java.desktop/javax.swing.plaf.basic.BasicButtonListener.mouseReleased(BasicButtonListener.java:279)\n        at java.desktop/java.awt.Component.processMouseEvent(Component.java:6617)\n        at java.desktop/javax.swing.JComponent.processMouseEvent(JComponent.java:3342)\n        at java.desktop/java.awt.Component.processEvent(Component.java:6382)\n        at java.desktop/java.awt.Container.processEvent(Container.java:2264)\n        at java.desktop/java.awt.Component.dispatchEventImpl(Component.java:4993)\n        at java.desktop/java.awt.Container.dispatchEventImpl(Container.java:2322)\n        at java.desktop/java.awt.Component.dispatchEvent(Component.java:4825)\n        at java.desktop/java.awt.LightweightDispatcher.retargetMouseEvent(Container.java:4934)\n        at java.desktop/java.awt.LightweightDispatcher.processMouseEvent(Container.java:4563)\n        at java.desktop/java.awt.LightweightDispatcher.dispatchEvent(Container.java:4504)\n        at java.desktop/java.awt.Container.dispatchEventImpl(Container.java:2308)\n        at java.desktop/java.awt.Window.dispatchEventImpl(Window.java:2773)\n        at java.desktop/java.awt.Component.dispatchEvent(Component.java:4825)\n        at java.desktop/java.awt.EventQueue.dispatchEventImpl(EventQueue.java:772)\n        at java.desktop/java.awt.EventQueue$4.run(EventQueue.java:721)\n        at java.desktop/java.awt.EventQueue$4.run(EventQueue.java:715)\n        at java.base/java.security.AccessController.doPrivileged(AccessController.java:391)\n        at java.base/java.security.ProtectionDomain$JavaSecurityAccessImpl.doIntersectionPrivilege(ProtectionDomain.java:85)\n        at java.base/java.security.ProtectionDomain$JavaSecurityAccessImpl.doIntersectionPrivilege(ProtectionDomain.java:95)\n        at java.desktop/java.awt.EventQueue$5.run(EventQueue.java:745)\n        at java.desktop/java.awt.EventQueue$5.run(EventQueue.java:743)\n        at java.base/java.security.AccessController.doPrivileged(AccessController.java:391)\n        at java.base/java.security.ProtectionDomain$JavaSecurityAccessImpl.doIntersectionPrivilege(ProtectionDomain.java:85)\n        at java.desktop/java.awt.EventQueue.dispatchEvent(EventQueue.java:742)\n        at java.desktop/java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:203)\n        at java.desktop/java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:124)\n        at java.desktop/java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:113)\n        at java.desktop/java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:109)\n        at java.desktop/java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:101)\n        at java.desktop/java.awt.EventDispatchThread.run(EventDispatchThread.java:90)\n</code></pre>\n"},{"tags":["java","spring","spring-boot","spring-data","spring-thymeleaf"],"comments":[{"owner":{"account_id":4470050,"reputation":68258,"user_id":3636601,"accept_rate":75,"display_name":"Jens"},"score":0,"creation_date":1646073807,"post_id":71299600,"comment_id":126029883,"body_markdown":"BTW: Take care of Jjava namingf conventions. Classnames should start with upper case character","body":"BTW: Take care of Jjava namingf conventions. Classnames should start with upper case character"},{"owner":{"account_id":4470050,"reputation":68258,"user_id":3636601,"accept_rate":75,"display_name":"Jens"},"score":0,"creation_date":1646073974,"post_id":71299600,"comment_id":126029936,"body_markdown":"You never initialize `List&lt;beer&gt; beers`","body":"You never initialize <code>List&lt;beer&gt; beers</code>"},{"owner":{"account_id":20392125,"reputation":11,"user_id":14959825,"display_name":"SerpentSeraphim666"},"score":0,"creation_date":1646074448,"post_id":71299600,"comment_id":126030068,"body_markdown":"Hi Jens, this is line 61: beers = (List&lt;Beer&gt;) beerRepo.findAll() ;","body":"Hi Jens, this is line 61: beers = (List&lt;Beer&gt;) beerRepo.findAll() ;"},{"owner":{"account_id":20392125,"reputation":11,"user_id":14959825,"display_name":"SerpentSeraphim666"},"score":0,"creation_date":1646074461,"post_id":71299600,"comment_id":126030072,"body_markdown":"even if i move that up to below autowired i get the same error","body":"even if i move that up to below autowired i get the same error"}],"answers":[{"tags":[],"owner":{"account_id":4470050,"reputation":68258,"user_id":3636601,"accept_rate":75,"display_name":"Jens"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1646074880,"creation_date":1646074880,"answer_id":71299828,"question_id":71299600,"body_markdown":"When calling the constructor the `Autowired` fields are not initialized.\r\n\r\nInitialize the repo at a method which is annotated with `@PostConstruct`\r\n\r\n    @PostConstruct\r\n    public void init() {\r\n        beers = (List&lt;Beer&gt;) beerRepo.findAll() ;\r\n    }\r\n\r\nThis method wil be called after the bean is fully initialized","title":"Spring Boot Application: Failing to instantiate service class, NullPointerException","body":"<p>When calling the constructor the <code>Autowired</code> fields are not initialized.</p>\n<p>Initialize the repo at a method which is annotated with <code>@PostConstruct</code></p>\n<pre><code>@PostConstruct\npublic void init() {\n    beers = (List&lt;Beer&gt;) beerRepo.findAll() ;\n}\n</code></pre>\n<p>This method wil be called after the bean is fully initialized</p>\n"}],"owner":{"account_id":20392125,"reputation":11,"user_id":14959825,"display_name":"SerpentSeraphim666"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1592,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":1,"score":0,"last_activity_date":1646074880,"creation_date":1646073605,"question_id":71299600,"body_markdown":"I&#39;m having an issue where I&#39;m unable to run a fairly simple spring boot application running off a H2 database.\r\n\r\nThe application is for allowing users to search for beers from a database using their name or ID, and be returned a paginated list based on their search.\r\nI am unable to run or build the application and it has me completely perplexed as I am new to Spring. Any help at all would be highly appreciated.\r\n\r\nI will post the error and the code below\r\n[Screen cap of error here][1]\r\n\r\n    Caused by: org.springframework.beans.BeanInstantiationException: Failed to instantiate [com.sd4.service.beerService]: Constructor threw exception; nested exception is java.lang.NullPointerException\r\n    \tat org.springframework.beans.BeanUtils.instantiateClass(BeanUtils.java:224) ~[spring-beans-5.3.15.jar:5.3.15]\r\n    \tat org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:87) ~[spring-beans-5.3.15.jar:5.3.15]\r\n    \tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateBean(AbstractAutowireCapableBeanFactory.java:1326) ~[spring-beans-5.3.15.jar:5.3.15]\r\n    \t... 83 common frames omitted\r\n    Caused by: java.lang.NullPointerException: null\r\n\r\n\r\n**Beer entity class**\r\n\r\n  \r\n\r\n      @Getter\r\n    @Setter\r\n    @NoArgsConstructor\r\n    @AllArgsConstructor\r\n    @ToString\r\n    @Entity\r\n    public class Beer implements Serializable {\r\n    \r\n        @Id\r\n        @GeneratedValue(strategy = GenerationType.AUTO)\r\n        private long id;\r\n        private long breweryId;\r\n        private String name;\r\n        private Integer catId;\r\n        private Integer styleId;\r\n        private Double abv;\r\n        private Double ibu;\r\n        private Double srm;\r\n        private Clob description;\r\n        private Integer addUser;\r\n    \r\n        @Temporal(TemporalType.TIMESTAMP)\r\n        private Date lastMod;\r\n    \r\n        private String image;\r\n        private Double buyPrice;\r\n        private Double sellPrice;\r\n    \r\n    }\r\n\r\n**Beer Controller**\r\n\r\n        @Controller\r\n    @RequestMapping(&quot;/beer&quot;)\r\n    public class BeerController {\r\n        @Autowired\r\n        private beerService beerService;\r\n            \r\n        \r\n    //method to load the add book form. This method also creates a Book object that will back the add book form\r\n     @GetMapping(&quot;/add&quot;)\r\n    public ModelAndView displayAddForm() {\r\n            return new ModelAndView(&quot;/all&quot;, &quot;aBeer&quot;, new Beer());\r\n    }\r\n    \r\n    @PostMapping(&quot;/searchByName&quot;)\r\n    public String searchByNameSubmit(@ModelAttribute String name, Model model, @RequestParam(&quot;page&quot;) Optional&lt;Integer&gt; page, \r\n          @RequestParam(&quot;size&quot;) Optional&lt;Integer&gt; size){\r\n        \r\n        int currentPage = page.orElse(1);\r\n            int pageSize = size.orElse(5);\r\n    \r\n            Page&lt;Beer&gt; beerPage = beerService.findPaginated(PageRequest.of(currentPage - 1, pageSize));\r\n    \r\n            model.addAttribute(&quot;beerPage&quot;, beerPage);\r\n                System.out.println(&quot;PRINTING PEER PAGE ELEMENTS HERE &quot; + beerPage.getTotalElements());\r\n            int totalPages = beerPage.getTotalPages();\r\n            if (totalPages &gt; 0) {\r\n                List&lt;Integer&gt; pageNumbers = IntStream.rangeClosed(1, totalPages)\r\n                    .boxed()\r\n                    .collect(Collectors.toList());\r\n                model.addAttribute(&quot;pageNumbers&quot;, pageNumbers);\r\n            }\r\n        \r\n       //Pageable firstPageWithTwoElements = PageRequest.of(0, 2);\r\n       //Page&lt;Beer&gt; beersByName = beerService.findByName(name, firstPageWithTwoElements);\r\n       //model.addAttribute(&quot;name&quot;, name, &quot;aBeerList&quot;, beerService.findByName(name, pageable));\r\n     //  model.addAttribute(beersByName);     \r\n       return &quot;nameResults&quot;;\r\n    }\r\n    \r\n    @GetMapping(&quot;/displayAll&quot;)\r\n    public String displayAllPage(Model model){\r\n        model.addAttribute(&quot;aBeerList&quot;, beerService.findAll());\r\n        return &quot;/viewAllBeers&quot;;\r\n    }\r\n    //method to save the book entity to the DB    \r\n    //decide on mapping etc..\r\n    @PostMapping(&quot;/addBeer&quot;)\r\n     public ModelAndView addABeer(@ModelAttribute(&quot;aBeer&quot;) Beer b, BindingResult result) {\r\n                    \r\n            if (result.hasErrors()) {\r\n                return new ModelAndView (&quot;/error&quot;);\r\n            }\r\n            Beer newBeer = new Beer();\r\n            newBeer.setName(&quot;Test&quot;);\r\n            beerService.saveBeer(newBeer);\r\n            beerService.saveBeer(b);\r\n            return new ModelAndView(&quot;/viewAll&quot;, &quot;beers&quot;, beerService.findAll());\r\n            //save the book object to the DB\r\n            //display success page\r\n        }\r\n     \r\n    @GetMapping(&quot;/&quot;)\r\n     public String index(Model model) {\r\n         NameSearch nameSearch = new NameSearch();\r\n         model.addAttribute(&quot;NameSearch&quot;, nameSearch);\r\n          //response.setHeader(&quot;Content-Type&quot;,&quot;text/html&quot;);\r\n          return &quot;index&quot;;    \r\n     }\r\n    }\r\n\r\n**Beer Service**\r\n\r\n        @Service\r\n    \r\n    public class beerService {\r\n         @Autowired\r\n         \r\n           private beerRepository beerRepo;\r\n         \r\n        private List&lt;Beer&gt; beers;\r\n         \r\n        public Page&lt;Beer&gt; findPaginated(Pageable pageable) {\r\n            int pageSize = pageable.getPageSize();\r\n            int currentPage = pageable.getPageNumber();\r\n            int startItem = currentPage * pageSize;\r\n            List&lt;Beer&gt; list;\r\n    \r\n            if (beers.size() &lt; startItem) {\r\n                list = Collections.emptyList();\r\n            } else {\r\n                int toIndex = Math.min(startItem + pageSize, beers.size());\r\n                list = beers.subList(startItem, toIndex);\r\n            }\r\n                System.out.println(&quot;PRINTING LIST BEER ELEMENTS HERE &quot; + list.size());\r\n                System.out.println(&quot;PRINTING BEERS SIZE HERE &quot; + beers.size());\r\n    \r\n            Page&lt;Beer&gt; beerPage\r\n                              = new PageImpl&lt;Beer&gt;(list, PageRequest.of(currentPage, pageSize), beers.size());\r\n    \r\n    \r\n            return beerPage;\r\n        }\r\n    \r\n            // Add this method\r\n       \r\n        public beerService() {\r\n    beers = (List&lt;Beer&gt;) beerRepo.findAll() ;\r\n        }\r\n    \r\n        public Optional&lt;Beer&gt; findOne(Long id) {\r\n            return beerRepo.findById(id);\r\n        }\r\n    \r\n        public List&lt;Beer&gt; findAll() {\r\n            return (List&lt;Beer&gt;) beerRepo.findAll();\r\n        }\r\n        \r\n        public Page&lt;Beer&gt; findByName(String name, Pageable pageable) {\r\n            String name1 = name;    \r\n            Pageable pageable1 = pageable;\r\n            Page&lt;Beer&gt; beerList;\r\n            beerList = beerRepo.findByName(name1, pageable1);\r\n            return beerList;\r\n        }\r\n    \r\n        public long count() {\r\n            return beerRepo.count();\r\n        }\r\n    \r\n        public void deleteByID(long beerID) {\r\n            beerRepo.deleteById(beerID);\r\n        }\r\n    \r\n        public void saveBeer(Beer a) {\r\n            beerRepo.save(a);\r\n            \r\n        }  \r\n        \r\n        \r\n    }\r\n\r\n**Beer repository**\r\n\r\n  \r\n\r\n      @Repository\r\n    public interface beerRepository extends PagingAndSortingRepository&lt;Beer, Long&gt;   {\r\n    List&lt;Beer&gt; findAllBySellPrice(Double sell_price, Pageable pageable);\r\n    Page&lt;Beer&gt; findByName(String name, Pageable pageable);\r\n    \r\n    }\r\n\r\nKind regards.\r\n\r\n  [1]: https://i.stack.imgur.com/EYqN1.png\r\n","title":"Spring Boot Application: Failing to instantiate service class, NullPointerException","body":"<p>I'm having an issue where I'm unable to run a fairly simple spring boot application running off a H2 database.</p>\n<p>The application is for allowing users to search for beers from a database using their name or ID, and be returned a paginated list based on their search.\nI am unable to run or build the application and it has me completely perplexed as I am new to Spring. Any help at all would be highly appreciated.</p>\n<p>I will post the error and the code below\n<a href=\"https://i.stack.imgur.com/EYqN1.png\" rel=\"nofollow noreferrer\">Screen cap of error here</a></p>\n<pre><code>Caused by: org.springframework.beans.BeanInstantiationException: Failed to instantiate [com.sd4.service.beerService]: Constructor threw exception; nested exception is java.lang.NullPointerException\n    at org.springframework.beans.BeanUtils.instantiateClass(BeanUtils.java:224) ~[spring-beans-5.3.15.jar:5.3.15]\n    at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:87) ~[spring-beans-5.3.15.jar:5.3.15]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateBean(AbstractAutowireCapableBeanFactory.java:1326) ~[spring-beans-5.3.15.jar:5.3.15]\n    ... 83 common frames omitted\nCaused by: java.lang.NullPointerException: null\n</code></pre>\n<p><strong>Beer entity class</strong></p>\n<pre><code>  @Getter\n@Setter\n@NoArgsConstructor\n@AllArgsConstructor\n@ToString\n@Entity\npublic class Beer implements Serializable {\n\n    @Id\n    @GeneratedValue(strategy = GenerationType.AUTO)\n    private long id;\n    private long breweryId;\n    private String name;\n    private Integer catId;\n    private Integer styleId;\n    private Double abv;\n    private Double ibu;\n    private Double srm;\n    private Clob description;\n    private Integer addUser;\n\n    @Temporal(TemporalType.TIMESTAMP)\n    private Date lastMod;\n\n    private String image;\n    private Double buyPrice;\n    private Double sellPrice;\n\n}\n</code></pre>\n<p><strong>Beer Controller</strong></p>\n<pre><code>    @Controller\n@RequestMapping(&quot;/beer&quot;)\npublic class BeerController {\n    @Autowired\n    private beerService beerService;\n        \n    \n//method to load the add book form. This method also creates a Book object that will back the add book form\n @GetMapping(&quot;/add&quot;)\npublic ModelAndView displayAddForm() {\n        return new ModelAndView(&quot;/all&quot;, &quot;aBeer&quot;, new Beer());\n}\n\n@PostMapping(&quot;/searchByName&quot;)\npublic String searchByNameSubmit(@ModelAttribute String name, Model model, @RequestParam(&quot;page&quot;) Optional&lt;Integer&gt; page, \n      @RequestParam(&quot;size&quot;) Optional&lt;Integer&gt; size){\n    \n    int currentPage = page.orElse(1);\n        int pageSize = size.orElse(5);\n\n        Page&lt;Beer&gt; beerPage = beerService.findPaginated(PageRequest.of(currentPage - 1, pageSize));\n\n        model.addAttribute(&quot;beerPage&quot;, beerPage);\n            System.out.println(&quot;PRINTING PEER PAGE ELEMENTS HERE &quot; + beerPage.getTotalElements());\n        int totalPages = beerPage.getTotalPages();\n        if (totalPages &gt; 0) {\n            List&lt;Integer&gt; pageNumbers = IntStream.rangeClosed(1, totalPages)\n                .boxed()\n                .collect(Collectors.toList());\n            model.addAttribute(&quot;pageNumbers&quot;, pageNumbers);\n        }\n    \n   //Pageable firstPageWithTwoElements = PageRequest.of(0, 2);\n   //Page&lt;Beer&gt; beersByName = beerService.findByName(name, firstPageWithTwoElements);\n   //model.addAttribute(&quot;name&quot;, name, &quot;aBeerList&quot;, beerService.findByName(name, pageable));\n //  model.addAttribute(beersByName);     \n   return &quot;nameResults&quot;;\n}\n\n@GetMapping(&quot;/displayAll&quot;)\npublic String displayAllPage(Model model){\n    model.addAttribute(&quot;aBeerList&quot;, beerService.findAll());\n    return &quot;/viewAllBeers&quot;;\n}\n//method to save the book entity to the DB    \n//decide on mapping etc..\n@PostMapping(&quot;/addBeer&quot;)\n public ModelAndView addABeer(@ModelAttribute(&quot;aBeer&quot;) Beer b, BindingResult result) {\n                \n        if (result.hasErrors()) {\n            return new ModelAndView (&quot;/error&quot;);\n        }\n        Beer newBeer = new Beer();\n        newBeer.setName(&quot;Test&quot;);\n        beerService.saveBeer(newBeer);\n        beerService.saveBeer(b);\n        return new ModelAndView(&quot;/viewAll&quot;, &quot;beers&quot;, beerService.findAll());\n        //save the book object to the DB\n        //display success page\n    }\n \n@GetMapping(&quot;/&quot;)\n public String index(Model model) {\n     NameSearch nameSearch = new NameSearch();\n     model.addAttribute(&quot;NameSearch&quot;, nameSearch);\n      //response.setHeader(&quot;Content-Type&quot;,&quot;text/html&quot;);\n      return &quot;index&quot;;    \n }\n}\n</code></pre>\n<p><strong>Beer Service</strong></p>\n<pre><code>    @Service\n\npublic class beerService {\n     @Autowired\n     \n       private beerRepository beerRepo;\n     \n    private List&lt;Beer&gt; beers;\n     \n    public Page&lt;Beer&gt; findPaginated(Pageable pageable) {\n        int pageSize = pageable.getPageSize();\n        int currentPage = pageable.getPageNumber();\n        int startItem = currentPage * pageSize;\n        List&lt;Beer&gt; list;\n\n        if (beers.size() &lt; startItem) {\n            list = Collections.emptyList();\n        } else {\n            int toIndex = Math.min(startItem + pageSize, beers.size());\n            list = beers.subList(startItem, toIndex);\n        }\n            System.out.println(&quot;PRINTING LIST BEER ELEMENTS HERE &quot; + list.size());\n            System.out.println(&quot;PRINTING BEERS SIZE HERE &quot; + beers.size());\n\n        Page&lt;Beer&gt; beerPage\n                          = new PageImpl&lt;Beer&gt;(list, PageRequest.of(currentPage, pageSize), beers.size());\n\n\n        return beerPage;\n    }\n\n        // Add this method\n   \n    public beerService() {\nbeers = (List&lt;Beer&gt;) beerRepo.findAll() ;\n    }\n\n    public Optional&lt;Beer&gt; findOne(Long id) {\n        return beerRepo.findById(id);\n    }\n\n    public List&lt;Beer&gt; findAll() {\n        return (List&lt;Beer&gt;) beerRepo.findAll();\n    }\n    \n    public Page&lt;Beer&gt; findByName(String name, Pageable pageable) {\n        String name1 = name;    \n        Pageable pageable1 = pageable;\n        Page&lt;Beer&gt; beerList;\n        beerList = beerRepo.findByName(name1, pageable1);\n        return beerList;\n    }\n\n    public long count() {\n        return beerRepo.count();\n    }\n\n    public void deleteByID(long beerID) {\n        beerRepo.deleteById(beerID);\n    }\n\n    public void saveBeer(Beer a) {\n        beerRepo.save(a);\n        \n    }  \n    \n    \n}\n</code></pre>\n<p><strong>Beer repository</strong></p>\n<pre><code>  @Repository\npublic interface beerRepository extends PagingAndSortingRepository&lt;Beer, Long&gt;   {\nList&lt;Beer&gt; findAllBySellPrice(Double sell_price, Pageable pageable);\nPage&lt;Beer&gt; findByName(String name, Pageable pageable);\n\n}\n</code></pre>\n<p>Kind regards.</p>\n"},{"tags":["java","encryption","aes","rsa","serversocket"],"comments":[{"owner":{"account_id":11125108,"reputation":5965,"user_id":8166854,"display_name":"Michael Fehr"},"score":0,"creation_date":1646033149,"post_id":71290798,"comment_id":126015764,"body_markdown":"I&#39;m missing the &quot;textSignature&quot; part in your server-part, that could cause some problems. **Security warning**: the encryption/decryption code is UNSECURE because it uses a static IV, do not use this code in production.","body":"I&#39;m missing the &quot;textSignature&quot; part in your server-part, that could cause some problems. <b>Security warning</b>: the encryption/decryption code is UNSECURE because it uses a static IV, do not use this code in production."},{"owner":{"account_id":19113030,"reputation":3,"user_id":13958647,"display_name":"Swechha Ghimire"},"score":0,"creation_date":1646068360,"post_id":71290798,"comment_id":126028106,"body_markdown":"I updated the code to show the textSignature. It would be the second variable retrieved from the client output.","body":"I updated the code to show the textSignature. It would be the second variable retrieved from the client output."}],"answers":[{"tags":[],"owner":{"account_id":19113030,"reputation":3,"user_id":13958647,"display_name":"Swechha Ghimire"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1646074762,"creation_date":1646074762,"answer_id":71299804,"question_id":71290798,"body_markdown":"I have absolutely no idea why this worked but I this is what my Server.java looks like now. I just added &quot;&quot; at the end of in.readline() because I noticed when I added comments it got the full cipher. Additionally, it is receiving the text signature before the cipher with no issues. \r\n\r\nServer.java\r\n\r\n``` Server.java\r\n\r\n\r\n byte[] textSignatureFromClient = new byte[256];\r\n            in.readFully(textSignatureFromClient);\r\n\r\n\r\n            String cipherText = in.readLine() + &quot;&quot;;\r\n             try {\r\n                    byte[] IV = {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0};\r\n                    String decryptedVal = decrypt(AESSecretKey, IV, cipherText.trim());\r\n                    System.out.println(&quot;Decrypted Text: &quot; + decryptedVal);\r\n                }\r\n                catch(Exception e){\r\n                    System.out.println(&quot;Decryption error&quot; + e);\r\n                } \r\n\r\n```\r\n\r\nClient.java\r\n\r\n```   Client.java\r\n\r\n String encodedTextString =  new String(Base64.getEncoder().encode(\r\n                textString.getBytes(StandardCharsets.UTF_8)));\r\n        byte[] textByte =  encodedTextString.getBytes();\r\n        byte[] textSignature = signDigitalSignature(textByte, clientPrivateKey, &quot;SHA512withRSA&quot;);\r\n        output.write(textSignature);\r\n        output.flush();\r\n        \r\n        String cipherText = encrypt(key256AES, IV, textString);\r\n        System.out.println(&quot;Cipher&quot; + cipherText);\r\n        output.write(cipherText.getBytes(StandardCharsets.UTF_8));\r\n        output.flush(); ```\r\n\r\n","title":"AES Encryption and Decryption not getting decrypted word in print statements but shows up in debugger","body":"<p>I have absolutely no idea why this worked but I this is what my Server.java looks like now. I just added &quot;&quot; at the end of in.readline() because I noticed when I added comments it got the full cipher. Additionally, it is receiving the text signature before the cipher with no issues.</p>\n<p>Server.java</p>\n<pre><code>\n\n byte[] textSignatureFromClient = new byte[256];\n            in.readFully(textSignatureFromClient);\n\n\n            String cipherText = in.readLine() + &quot;&quot;;\n             try {\n                    byte[] IV = {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0};\n                    String decryptedVal = decrypt(AESSecretKey, IV, cipherText.trim());\n                    System.out.println(&quot;Decrypted Text: &quot; + decryptedVal);\n                }\n                catch(Exception e){\n                    System.out.println(&quot;Decryption error&quot; + e);\n                } \n\n</code></pre>\n<p>Client.java</p>\n<pre><code>\n String encodedTextString =  new String(Base64.getEncoder().encode(\n                textString.getBytes(StandardCharsets.UTF_8)));\n        byte[] textByte =  encodedTextString.getBytes();\n        byte[] textSignature = signDigitalSignature(textByte, clientPrivateKey, &quot;SHA512withRSA&quot;);\n        output.write(textSignature);\n        output.flush();\n        \n        String cipherText = encrypt(key256AES, IV, textString);\n        System.out.println(&quot;Cipher&quot; + cipherText);\n        output.write(cipherText.getBytes(StandardCharsets.UTF_8));\n        output.flush(); ```\n\n</code></pre>\n"}],"owner":{"account_id":19113030,"reputation":3,"user_id":13958647,"display_name":"Swechha Ghimire"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":542,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1646074762,"creation_date":1646024787,"question_id":71290798,"body_markdown":"Hi I&#39;m working on a socket programming project where it is a encrypted client and server. I have all the code working to create public keys, private keys, aes secret encryption and decryption. The issue is when I sent my encrypted values over to the server, it is missing the first few values of the encrypted values. But when I run it through the debugger and add breakpoints it prints the right decrypted value. \r\n\r\nFor this say my text is &quot;jesus&quot; this is my client class for example. \r\n\r\nClient.java \r\n```  public static String encrypt(SecretKey key, byte[]  initVector, String value) {\r\n        try {\r\n            IvParameterSpec iv = new IvParameterSpec(initVector);\r\n\r\n            Cipher cipher = Cipher.getInstance(&quot;AES/CBC/PKCS5PADDING&quot;);\r\n            cipher.init(Cipher.ENCRYPT_MODE,  key, iv);\r\n\r\n            byte[] encrypted = cipher.doFinal(value.getBytes(StandardCharsets.UTF_8));\r\n            System.out.println(&quot;encrypted string: &quot;\r\n                    + Base64.getEncoder().encodeToString(encrypted));\r\n\r\n            return Base64.getEncoder().encodeToString(encrypted);\r\n\r\n        } catch (Exception ex) {\r\n            ex.printStackTrace();\r\n        }\r\n\r\n        return null;\r\n    }\r\n\r\n\r\npublic static void main(Strings[] args) {\r\n// I have all the code for making keys and creating the Socket connection ( all of this stuff works) \r\n\r\n System.out.println(&quot;What is your port number&quot;);\r\n        port = scanner.nextInt();\r\n        System.out.println(&quot;What is your ip address&quot;);\r\n        ipAddress = scanner.next();\r\n        System.out.println(&quot;What is your client&#39;s private key file&quot;);\r\n        privateKeyFile = scanner.next();\r\n        System.out.println(&quot;What is your server&#39;s public key file&quot;);\r\n        publicKeyFile = scanner.next();\r\n\r\n        System.out.println(&quot;What is your text string&quot;);\r\n        textString = scanner.next();\r\n\r\n        Socket socket = new Socket(ipAddress, port);\r\n        DataInputStream  input = new DataInputStream(socket.getInputStream());\r\n        // sends output to the socket\r\n        DataOutputStream  output = new DataOutputStream(socket.getOutputStream());\r\n PrivateKey clientPrivateKey = loadPrivateKey(privateKeyFile, &quot;RSA&quot;);\r\n        PublicKey  serverPublicKey = loadPublicKey(publicKeyFile, &quot;RSA&quot;);\r\n\r\n   // I have more but essentially that is part of it \r\n\r\n\r\n// stuff that isn&#39;t working \r\n    SecureRandom sr = new SecureRandom();\r\n        KeyGenerator kg= KeyGenerator.getInstance(&quot;AES&quot;);\r\n        kg.init(256, sr);\r\n        SecretKey key256AES = kg.generateKey();\r\n\r\n String encodedTextString =  new String(Base64.getEncoder().encode(\r\n                textString.getBytes(StandardCharsets.UTF_8)));\r\n Integer textStringLengthFromBytes = textByte.length;\r\n\r\n     byte[] textSignature = signDigitalSignature(textByte, clientPrivateKey, &quot;SHA512withRSA&quot;);\r\n\r\n  byte[] IV = { 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0 };\r\n String cipherText = encrypt(key256AES, IV, textString);\r\n        System.out.println(&quot;Cipher&quot; + cipherText);\r\n\r\n    output.write(textStringLengthFromBytes);\r\n\r\n        output.write(textSignature);\r\n\r\n        output.write(cipherText.getBytes(StandardCharsets.UTF_8));\r\n\r\n} \r\n\r\n\r\n\r\n\r\n```\r\n\r\n\r\n\r\nServer.java \r\n\r\n\r\n```\r\n public static String decrypt(SecretKey key, byte[]  initVector, String encrypted) {\r\n        try {\r\n            IvParameterSpec iv = new IvParameterSpec(initVector);\r\n\r\n            Cipher cipher = Cipher.getInstance(&quot;AES/CBC/PKCS5PADDING&quot;);\r\n            cipher.init(Cipher.DECRYPT_MODE, key, iv);\r\n\r\n            byte[] plainText = cipher.doFinal(Base64.getDecoder()\r\n                    .decode(encrypted));\r\n\r\n            return new String(plainText);\r\n        } catch (Exception ex) {\r\n            ex.printStackTrace();\r\n        }\r\n\r\n        return null;\r\n    }\r\n  public static void main(String args[]){\r\n\r\n          // round 2 for this project I have to get the size of the plaintext string and //the aesEncryptedString and the actual cipher text\r\n                Integer size = in.readInt();\r\n                System.out.println(&quot;size&quot; + size);\r\n\r\n\r\n               byte[] textSignatureFromClient = new byte[256];\r\n               in.readFully(textSignatureFromClient);\r\n\r\n               System.out.println(&quot;textSignatureFromClient&quot; + \r\n               Arrays.toString(textSignatureFromClient));\r\n\r\n// having issues with this part below\r\n                String cipherText = in.readLine();\r\n\r\n                System.out.println(&quot;Cipher &quot; + cipherText);\r\n\r\n\r\n            byte[] IV = { 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0 };\r\n                String decryptedVal = decrypt(AESSecretKey, IV, cipherText);\r\n                System.out.println(&quot;Text&quot; + decryptedVal);\r\n\r\n}\r\n\r\n\r\n ```\r\n\r\nHere is an output of what values are stored in the ciphers:\r\nClient ciphertext says: V5VoP7K/Bzzj5291kd3WYg==\r\nServer ciphertext says: oP7K/Bzzj5291kd3WYg==\r\n\r\nHere is the error I get as well: \r\njava.lang.IllegalArgumentException: Input byte array has incorrect ending byte at 20\r\n\r\nBut when I debug, I pass over the decrypt line in the the server and it gets me the word jesus in plaintext both in the debugger variables and in the console. Also I apologize for how messy my code is. I&#39;m going to clean it and modularize it more once all my requirements are met. ","title":"AES Encryption and Decryption not getting decrypted word in print statements but shows up in debugger","body":"<p>Hi I'm working on a socket programming project where it is a encrypted client and server. I have all the code working to create public keys, private keys, aes secret encryption and decryption. The issue is when I sent my encrypted values over to the server, it is missing the first few values of the encrypted values. But when I run it through the debugger and add breakpoints it prints the right decrypted value.</p>\n<p>For this say my text is &quot;jesus&quot; this is my client class for example.</p>\n<p>Client.java</p>\n<pre><code>        try {\n            IvParameterSpec iv = new IvParameterSpec(initVector);\n\n            Cipher cipher = Cipher.getInstance(&quot;AES/CBC/PKCS5PADDING&quot;);\n            cipher.init(Cipher.ENCRYPT_MODE,  key, iv);\n\n            byte[] encrypted = cipher.doFinal(value.getBytes(StandardCharsets.UTF_8));\n            System.out.println(&quot;encrypted string: &quot;\n                    + Base64.getEncoder().encodeToString(encrypted));\n\n            return Base64.getEncoder().encodeToString(encrypted);\n\n        } catch (Exception ex) {\n            ex.printStackTrace();\n        }\n\n        return null;\n    }\n\n\npublic static void main(Strings[] args) {\n// I have all the code for making keys and creating the Socket connection ( all of this stuff works) \n\n System.out.println(&quot;What is your port number&quot;);\n        port = scanner.nextInt();\n        System.out.println(&quot;What is your ip address&quot;);\n        ipAddress = scanner.next();\n        System.out.println(&quot;What is your client's private key file&quot;);\n        privateKeyFile = scanner.next();\n        System.out.println(&quot;What is your server's public key file&quot;);\n        publicKeyFile = scanner.next();\n\n        System.out.println(&quot;What is your text string&quot;);\n        textString = scanner.next();\n\n        Socket socket = new Socket(ipAddress, port);\n        DataInputStream  input = new DataInputStream(socket.getInputStream());\n        // sends output to the socket\n        DataOutputStream  output = new DataOutputStream(socket.getOutputStream());\n PrivateKey clientPrivateKey = loadPrivateKey(privateKeyFile, &quot;RSA&quot;);\n        PublicKey  serverPublicKey = loadPublicKey(publicKeyFile, &quot;RSA&quot;);\n\n   // I have more but essentially that is part of it \n\n\n// stuff that isn't working \n    SecureRandom sr = new SecureRandom();\n        KeyGenerator kg= KeyGenerator.getInstance(&quot;AES&quot;);\n        kg.init(256, sr);\n        SecretKey key256AES = kg.generateKey();\n\n String encodedTextString =  new String(Base64.getEncoder().encode(\n                textString.getBytes(StandardCharsets.UTF_8)));\n Integer textStringLengthFromBytes = textByte.length;\n\n     byte[] textSignature = signDigitalSignature(textByte, clientPrivateKey, &quot;SHA512withRSA&quot;);\n\n  byte[] IV = { 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0 };\n String cipherText = encrypt(key256AES, IV, textString);\n        System.out.println(&quot;Cipher&quot; + cipherText);\n\n    output.write(textStringLengthFromBytes);\n\n        output.write(textSignature);\n\n        output.write(cipherText.getBytes(StandardCharsets.UTF_8));\n\n} \n\n\n\n\n</code></pre>\n<p>Server.java</p>\n<pre><code> public static String decrypt(SecretKey key, byte[]  initVector, String encrypted) {\n        try {\n            IvParameterSpec iv = new IvParameterSpec(initVector);\n\n            Cipher cipher = Cipher.getInstance(&quot;AES/CBC/PKCS5PADDING&quot;);\n            cipher.init(Cipher.DECRYPT_MODE, key, iv);\n\n            byte[] plainText = cipher.doFinal(Base64.getDecoder()\n                    .decode(encrypted));\n\n            return new String(plainText);\n        } catch (Exception ex) {\n            ex.printStackTrace();\n        }\n\n        return null;\n    }\n  public static void main(String args[]){\n\n          // round 2 for this project I have to get the size of the plaintext string and //the aesEncryptedString and the actual cipher text\n                Integer size = in.readInt();\n                System.out.println(&quot;size&quot; + size);\n\n\n               byte[] textSignatureFromClient = new byte[256];\n               in.readFully(textSignatureFromClient);\n\n               System.out.println(&quot;textSignatureFromClient&quot; + \n               Arrays.toString(textSignatureFromClient));\n\n// having issues with this part below\n                String cipherText = in.readLine();\n\n                System.out.println(&quot;Cipher &quot; + cipherText);\n\n\n            byte[] IV = { 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0 };\n                String decryptedVal = decrypt(AESSecretKey, IV, cipherText);\n                System.out.println(&quot;Text&quot; + decryptedVal);\n\n}\n\n\n</code></pre>\n<p>Here is an output of what values are stored in the ciphers:\nClient ciphertext says: V5VoP7K/Bzzj5291kd3WYg==\nServer ciphertext says: oP7K/Bzzj5291kd3WYg==</p>\n<p>Here is the error I get as well:\njava.lang.IllegalArgumentException: Input byte array has incorrect ending byte at 20</p>\n<p>But when I debug, I pass over the decrypt line in the the server and it gets me the word jesus in plaintext both in the debugger variables and in the console. Also I apologize for how messy my code is. I'm going to clean it and modularize it more once all my requirements are met.</p>\n"},{"tags":["java","java-stream"],"comments":[{"owner":{"account_id":195331,"reputation":275408,"user_id":438154,"accept_rate":98,"display_name":"Sotirios Delimanolis"},"score":5,"creation_date":1640381858,"post_id":70476606,"comment_id":124581526,"body_markdown":"Don&#39;t use raw types.","body":"Don&#39;t use raw types."},{"owner":{"account_id":11147483,"reputation":1772,"user_id":8181750,"display_name":"L.Spillner"},"score":1,"creation_date":1640382202,"post_id":70476606,"comment_id":124581568,"body_markdown":"@SotiriosDelimanolis Oh... This is embarrassing. I absolutely forgot to declare the type of the stream which ultimately causes the error. Thank your for pointing this out to me. The code now works but still I can&#39;t quite figure out why the it didn&#39;t  work before. Shouldn&#39;t raw types be equal to `Type&lt;Object&gt;`? In that case Function#identity would return a Function&lt;Stream&lt;Object&gt;,Stream&lt;Object&gt;&gt; which in the end should work since it&#39;s operating on a Stream containing `Stream&lt;Object&gt; which should fulfill the requirements of Stream#flatMap","body":"@SotiriosDelimanolis Oh... This is embarrassing. I absolutely forgot to declare the type of the stream which ultimately causes the error. Thank your for pointing this out to me. The code now works but still I can&#39;t quite figure out why the it didn&#39;t  work before. Shouldn&#39;t raw types be equal to <code>Type&lt;Object&gt;</code>? In that case Function#identity would return a Function&lt;Stream&lt;Object&gt;,Stream&lt;Object&gt;&gt; which in the end should work since it&#39;s operating on a Stream containing `Stream&lt;Object&gt; which should fulfill the requirements of Stream#flatMap"},{"owner":{"account_id":1691630,"reputation":49583,"user_id":1553851,"accept_rate":73,"display_name":"shmosel"},"score":3,"creation_date":1640386455,"post_id":70476606,"comment_id":124582221,"body_markdown":"*Shouldn&#39;t raw types be equal to `Type&lt;Object&gt;`?* [No.](https://stackoverflow.com/questions/2770321/what-is-a-raw-type-and-why-shouldnt-we-use-it#:~:text=how&#39;s%20a%20raw%20type%20different%20from%20using%20%3Cobject%3E%20as%20type%20parameters%3F) And raw types have cascading effects on the code that uses them.","body":"<i>Shouldn&#39;t raw types be equal to <code>Type&lt;Object&gt;</code>?</i> <a href=\"https://stackoverflow.com/questions/2770321/what-is-a-raw-type-and-why-shouldnt-we-use-it#:~:text=how&#39;s%20a%20raw%20type%20different%20from%20using%20%3Cobject%3E%20as%20type%20parameters%3F\">No.</a> And raw types have cascading effects on the code that uses them."},{"owner":{"account_id":18243171,"reputation":19300,"user_id":13279831,"display_name":"Nowhere Man"},"score":0,"creation_date":1640388838,"post_id":70476606,"comment_id":124582500,"body_markdown":"You may want to look at: [Java 8 lambdas, Function.identity() or t -&gt;t](https://stackoverflow.com/questions/28032827/java-8-lambdas-function-identity-or-t-t)","body":"You may want to look at: <a href=\"https://stackoverflow.com/questions/28032827/java-8-lambdas-function-identity-or-t-t\">Java 8 lambdas, Function.identity() or t -&gt;t</a>"},{"owner":{"account_id":2053598,"reputation":41316,"user_id":1831987,"display_name":"VGR"},"score":0,"creation_date":1640404410,"post_id":70476606,"comment_id":124583827,"body_markdown":"The compiler can warn you when you use raw types.  It’s a good idea to enable all compiler warnings, and pay attention to them.  Some of us even like using [-Werror](https://docs.oracle.com/en/java/javase/17/docs/specs/man/javac.html#option-Werror) when we build…","body":"The compiler can warn you when you use raw types.  It’s a good idea to enable all compiler warnings, and pay attention to them.  Some of us even like using <a href=\"https://docs.oracle.com/en/java/javase/17/docs/specs/man/javac.html#option-Werror\" rel=\"nofollow noreferrer\">-Werror</a> when we build…"}],"answers":[{"tags":[],"owner":{"account_id":1689973,"reputation":37280,"user_id":1552534,"display_name":"WJS"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1646074539,"creation_date":1646074539,"answer_id":71299763,"question_id":70476606,"body_markdown":"Perhaps this is what you were going for.  The type should be `Stream&lt;Integer&gt;`\r\n```\r\nList&lt;Stream&lt;Integer&gt;&gt; list = new ArrayList&lt;&gt;();\r\nlist.add(Stream.of( 1,2 ));\r\nlist.add(Stream.of( 3,4 ));\r\n\r\nlist.stream().flatMap( s -&gt; s ).forEach( System.out::println );\r\n```\r\nprints\r\n```\r\n1\r\n2\r\n3\r\n4\r\n\t\t","title":"Compiletime error while using java.util.Function#identity in Stream#flatMap(Function&lt;T,Stream&lt;R&gt;&gt;)","body":"<p>Perhaps this is what you were going for.  The type should be <code>Stream&lt;Integer&gt;</code></p>\n<pre><code>List&lt;Stream&lt;Integer&gt;&gt; list = new ArrayList&lt;&gt;();\nlist.add(Stream.of( 1,2 ));\nlist.add(Stream.of( 3,4 ));\n\nlist.stream().flatMap( s -&gt; s ).forEach( System.out::println );\n</code></pre>\n<p>prints</p>\n<pre><code>1\n2\n3\n4\n        \n</code></pre>\n"}],"owner":{"account_id":11147483,"reputation":1772,"user_id":8181750,"display_name":"L.Spillner"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":74,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":71299763,"answer_count":1,"score":2,"last_activity_date":1646074539,"creation_date":1640381283,"question_id":70476606,"body_markdown":"Merry Christmas,\r\n\r\nI was tinkering with some java.util.Streams when some irregular behavior caught my eye.\r\nI was simply trying to flatten a list containing several streams of integer values likes this example:\r\n```java\r\nList&lt;Stream&gt; list = new ArrayList&lt;&gt;();\r\nlist.add(Stream.of( 1,2 ));\r\nlist.add(Stream.of( 3,4 ));\r\n\r\nlist.stream().flatMap( s -&gt; s ).forEach( System.out::println );\r\n```\r\nThis minimal code snippet works without any issue.\r\nAnd usually when I see a lambda expression like `s -&gt; s` I think I&#39;d be able to simply replace it with `java.util.Function#identity()` since it&#39;s pretty much the same however in doing so I came upon this compile-time issue:\r\n```\r\nD:\\Development\\Java\\Playground\\src\\Main.java:15:30\r\njava: incompatible types: cannot infer type-variable(s) R,T\r\n    (argument mismatch; java.util.function.Function&lt;java.util.stream.Stream,java.util.stream.Stream&gt; cannot be converted to java.util.function.Function&lt;? super java.util.stream.Stream,? extends java.util.stream.Stream&lt;? extends java.lang.Object&gt;&gt;)\r\n```\r\n\r\nI myself cant quite explain the difference between using `java.util.Function#identity()` and `s -&gt; s`. So why does this compile time issue occur? My guess is that it has something to do with type erasure but I am not certain and can&#39;t explain this for myself.\r\n\r\nI am using OpenJDK v16.0.1.","title":"Compiletime error while using java.util.Function#identity in Stream#flatMap(Function&lt;T,Stream&lt;R&gt;&gt;)","body":"<p>Merry Christmas,</p>\n<p>I was tinkering with some java.util.Streams when some irregular behavior caught my eye.\nI was simply trying to flatten a list containing several streams of integer values likes this example:</p>\n<pre class=\"lang-java prettyprint-override\"><code>List&lt;Stream&gt; list = new ArrayList&lt;&gt;();\nlist.add(Stream.of( 1,2 ));\nlist.add(Stream.of( 3,4 ));\n\nlist.stream().flatMap( s -&gt; s ).forEach( System.out::println );\n</code></pre>\n<p>This minimal code snippet works without any issue.\nAnd usually when I see a lambda expression like <code>s -&gt; s</code> I think I'd be able to simply replace it with <code>java.util.Function#identity()</code> since it's pretty much the same however in doing so I came upon this compile-time issue:</p>\n<pre><code>D:\\Development\\Java\\Playground\\src\\Main.java:15:30\njava: incompatible types: cannot infer type-variable(s) R,T\n    (argument mismatch; java.util.function.Function&lt;java.util.stream.Stream,java.util.stream.Stream&gt; cannot be converted to java.util.function.Function&lt;? super java.util.stream.Stream,? extends java.util.stream.Stream&lt;? extends java.lang.Object&gt;&gt;)\n</code></pre>\n<p>I myself cant quite explain the difference between using <code>java.util.Function#identity()</code> and <code>s -&gt; s</code>. So why does this compile time issue occur? My guess is that it has something to do with type erasure but I am not certain and can't explain this for myself.</p>\n<p>I am using OpenJDK v16.0.1.</p>\n"},{"tags":["java","netbeans","glassfish"],"comments":[{"owner":{"account_id":11097510,"reputation":1759,"user_id":10515734,"display_name":"Butiri Dan"},"score":0,"creation_date":1566585813,"post_id":57630643,"comment_id":101716659,"body_markdown":"What glassfish and netbeans version do you have?","body":"What glassfish and netbeans version do you have?"},{"owner":{"account_id":16328846,"reputation":35,"user_id":11792755,"display_name":"jova"},"score":0,"creation_date":1566586336,"post_id":57630643,"comment_id":101716823,"body_markdown":"NetBeans 8.2 and glassfish 4.1.1","body":"NetBeans 8.2 and glassfish 4.1.1"},{"owner":{"account_id":11097510,"reputation":1759,"user_id":10515734,"display_name":"Butiri Dan"},"score":0,"creation_date":1566593730,"post_id":57630643,"comment_id":101719173,"body_markdown":"Try to manually undeploying it using the Glassfish admin console. This is for an older version but maybe will help http://netbeans-org.1045718.n5.nabble.com/Deployment-error-Project-is-currently-archive-deployed-td2965466.html","body":"Try to manually undeploying it using the Glassfish admin console. This is for an older version but maybe will help <a href=\"http://netbeans-org.1045718.n5.nabble.com/Deployment-error-Project-is-currently-archive-deployed-td2965466.html\" rel=\"nofollow noreferrer\">netbeans-org.1045718.n5.nabble.com/&hellip;</a>"},{"owner":{"account_id":16328846,"reputation":35,"user_id":11792755,"display_name":"jova"},"score":0,"creation_date":1566746664,"post_id":57630643,"comment_id":101745499,"body_markdown":"I tried but still same error Deployment error: Project is currently archive deployed. Undeploy this project and redeploy it to take advantage of directory deployment.\nSee the server log for details.","body":"I tried but still same error Deployment error: Project is currently archive deployed. Undeploy this project and redeploy it to take advantage of directory deployment. See the server log for details."}],"owner":{"account_id":16328846,"reputation":35,"user_id":11792755,"display_name":"jova"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":256,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1646074423,"creation_date":1566580835,"question_id":57630643,"body_markdown":"When I run my web application NetBeans gives me this error:\r\n ```\r\nC:\\Users\\Gamer\\Documents\\NetBeansProjects\\MyWebApp\\nbproject\\build-impl.xml:1045: Deployment error: Project is currently archive deployed. Undeploy this project and redeploy it to take advantage of directory deployment.\r\nSee the server log for details.\r\n```\r\nI did redeploy and still same\r\n\r\nThe code on the 1045th row is: \r\n\r\n    &lt;nbdeploy clientUrlPart=&quot;${client.urlPart}&quot; debugmode=&quot;false&quot; forceRedeploy=&quot;${forceRedeploy}&quot;/&gt;\r\n\r\nThe app is deployed on the GlassFish server but I don&#39;t know what&#39;s archive deployed.","title":"Java and GlassFish Deployment error: Project is currently archive deployed","body":"<p>When I run my web application NetBeans gives me this error:</p>\n\n<pre><code>C:\\Users\\Gamer\\Documents\\NetBeansProjects\\MyWebApp\\nbproject\\build-impl.xml:1045: Deployment error: Project is currently archive deployed. Undeploy this project and redeploy it to take advantage of directory deployment.\nSee the server log for details.\n</code></pre>\n\n<p>I did redeploy and still same</p>\n\n<p>The code on the 1045th row is: </p>\n\n<pre><code>&lt;nbdeploy clientUrlPart=\"${client.urlPart}\" debugmode=\"false\" forceRedeploy=\"${forceRedeploy}\"/&gt;\n</code></pre>\n\n<p>The app is deployed on the GlassFish server but I don't know what's archive deployed.</p>\n"},{"tags":["java","spring","hibernate","spring-data-jpa"],"answers":[{"tags":[],"owner":{"account_id":8751701,"reputation":3543,"user_id":6544712,"accept_rate":50,"display_name":"UserF40"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1476021342,"creation_date":1476021342,"answer_id":39944399,"question_id":39944223,"body_markdown":"Replace the url in the beans tag\r\n\r\nhttp://www.springframework.org/schema/data/jpa/spring-jpa.xsd\r\n\r\nwith \r\n\r\nhttp://www.springframework.org/schema/data/jpa/spring-jpa-1.0.xsd","title":"JPA - Unable to locate Spring NamespaceHandler for XML schema namespace [http://www.springframework.org/schema/data/jpa]","body":"<p>Replace the url in the beans tag</p>\n\n<p><a href=\"http://www.springframework.org/schema/data/jpa/spring-jpa.xsd\" rel=\"nofollow\">http://www.springframework.org/schema/data/jpa/spring-jpa.xsd</a></p>\n\n<p>with </p>\n\n<p><a href=\"http://www.springframework.org/schema/data/jpa/spring-jpa-1.0.xsd\" rel=\"nofollow\">http://www.springframework.org/schema/data/jpa/spring-jpa-1.0.xsd</a></p>\n"},{"tags":[],"owner":{"account_id":6471462,"reputation":41,"user_id":5011466,"display_name":"dwangel"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1476022192,"creation_date":1476022192,"answer_id":39944512,"question_id":39944223,"body_markdown":"It seems that the spring-data-jpa-{version}.jar is not included in you project.\r\n\r\nCheck the library or dependency.","title":"JPA - Unable to locate Spring NamespaceHandler for XML schema namespace [http://www.springframework.org/schema/data/jpa]","body":"<p>It seems that the spring-data-jpa-{version}.jar is not included in you project.</p>\n\n<p>Check the library or dependency.</p>\n"}],"owner":{"account_id":1072602,"reputation":3808,"user_id":1071515,"accept_rate":93,"display_name":"tomaytotomato"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1118,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":39944399,"answer_count":2,"score":0,"last_activity_date":1646074196,"creation_date":1476020075,"question_id":39944223,"body_markdown":"New to Hibernate and Spring. So I copied and pasted some configurations online and did the rest myself. \r\n\r\nHowever when I try to start my Jetty server I am getting a Spring error.\r\n\r\n&gt; Unable to locate Spring NamespaceHandler for XML schema namespace [http://www.springframework.org/schema/data/jpa]\r\n\r\nWhat does this mean?\r\n\r\n        &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;\r\n           xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n           xmlns:jpa=&quot;http://www.springframework.org/schema/data/jpa&quot;\r\n           xmlns:repository=&quot;http://www.springframework.org/schema/data/repository&quot;\r\n           xmlns:tx=&quot;http://www.springframework.org/schema/tx&quot;\r\n           xmlns:aop=&quot;http://www.springframework.org/schema/aop&quot;\r\n           xsi:schemaLocation=&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-4.0.xsd\r\n               http://www.springframework.org/schema/data/jpa http://www.springframework.org/schema/data/jpa/spring-jpa.xsd\r\n               http://www.springframework.org/schema/data/repository http://www.springframework.org/schema/data/repository/spring-repository.xsd\r\n               http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-4.0.xsd http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop.xsd&quot;&gt;\r\n    \r\n    \r\n        &lt;jpa:repositories base-package=&quot;com.testproject.testpackage.example1.repository&quot;\r\n                          transaction-manager-ref=&quot;example1TransactionManager&quot;\r\n                          entity-manager-factory-ref=&quot;example1EntityManagerFactory&quot;&gt;\r\n            &lt;repository:include-filter type=&quot;regex&quot; expression=&quot;.*Repository&quot;/&gt;\r\n        &lt;/jpa:repositories&gt;\r\n    \r\n        &lt;bean id=&quot;example1hikariConfig&quot; class=&quot;com.zaxxer.hikari.HikariConfig&quot;&gt;\r\n            &lt;property name=&quot;poolName&quot; value=&quot;example1Datasource&quot;/&gt;\r\n            &lt;property name=&quot;connectiontestprojectQuery&quot; value=&quot;SELECT 1&quot;/&gt;\r\n            &lt;property name=&quot;dataSourceClassName&quot; value=&quot;com.mysql.jdbc.jdbc2.optional.MysqlDataSource&quot;/&gt;\r\n            &lt;property name=&quot;minimumIdle&quot; value=&quot;5&quot;/&gt;\r\n            &lt;property name=&quot;maximumPoolSize&quot; value=&quot;40&quot;/&gt;\r\n            &lt;property name=&quot;idleTimeout&quot; value=&quot;2000&quot;/&gt;\r\n    \r\n            &lt;property name=&quot;dataSourceProperties&quot;&gt;\r\n                &lt;props&gt;\r\n                    &lt;prop key=&quot;url&quot;&gt;${db.url}&lt;/prop&gt;\r\n                    &lt;prop key=&quot;user&quot;&gt;${db.username}&lt;/prop&gt;\r\n                    &lt;prop key=&quot;password&quot;&gt;${db.password}&lt;/prop&gt;\r\n                &lt;/props&gt;\r\n            &lt;/property&gt;\r\n        &lt;/bean&gt;\r\n        &lt;bean id=&quot;example1Datasource&quot; class=&quot;com.zaxxer.hikari.HikariDataSource&quot; destroy-method=&quot;close&quot;&gt;\r\n            &lt;constructor-arg ref=&quot;example1hikariConfig&quot;/&gt;\r\n        &lt;/bean&gt;\r\n    \r\n        &lt;bean id=&quot;hibernate.properties&quot; class=&quot;org.springframework.beans.factory.config.PropertiesFactoryBean&quot;&gt;\r\n            &lt;property name=&quot;properties&quot;&gt;\r\n                &lt;props&gt;\r\n                    &lt;prop key=&quot;hibernate.hbm2ddl.auto&quot;&gt;validate&lt;/prop&gt;\r\n                    &lt;prop key=&quot;hibernate.show_sql&quot;&gt;${hibernate.showSql}&lt;/prop&gt;\r\n                    &lt;prop key=&quot;hibernate.format_sql&quot;&gt;true&lt;/prop&gt;\r\n                    &lt;prop key=&quot;hibernate.cache.use_query_cache&quot;&gt;false&lt;/prop&gt;\r\n                    &lt;prop key=&quot;hibernate.cache.use_second_level_cache&quot;&gt;false&lt;/prop&gt;\r\n                &lt;/props&gt;\r\n            &lt;/property&gt;\r\n        &lt;/bean&gt;\r\n    \r\n        &lt;bean id=&quot;example1EntityManagerFactory&quot; class=&quot;org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean&quot;&gt;\r\n            &lt;property name=&quot;persistenceUnitName&quot; value=&quot;example1&quot;/&gt;\r\n            &lt;property name=&quot;dataSource&quot; ref=&quot;example1Datasource&quot;/&gt;\r\n            &lt;property name=&quot;persistenceProviderClass&quot; value=&quot;org.hibernate.jpa.HibernatePersistenceProvider&quot;/&gt;\r\n            &lt;property name=&quot;jpaVendorAdapter&quot;&gt;\r\n                &lt;bean class=&quot;org.springframework.orm.jpa.vendor.HibernateJpaVendorAdapter&quot;/&gt;\r\n            &lt;/property&gt;\r\n            &lt;property name=&quot;packagesToScan&quot;&gt;\r\n                &lt;list&gt;\r\n                    &lt;value&gt;com.testproject.testpackage.example1.repository&lt;/value&gt;\r\n                &lt;/list&gt;\r\n            &lt;/property&gt;\r\n            &lt;property name=&quot;loadTimeWeaver&quot;&gt;\r\n                &lt;bean class=&quot;org.springframework.instrument.classloading.InstrumentationLoadTimeWeaver&quot;/&gt;\r\n            &lt;/property&gt;\r\n            &lt;property name=&quot;jpaPropertyMap&quot; ref=&quot;hibernate.properties&quot;/&gt;\r\n        &lt;/bean&gt;\r\n    \r\n    \r\n        &lt;bean id=&quot;example1TransactionManager&quot; class=&quot;org.springframework.orm.jpa.JpaTransactionManager&quot;&gt;\r\n            &lt;property name=&quot;entityManagerFactory&quot; ref=&quot;example1EntityManagerFactory&quot;/&gt;\r\n            &lt;qualifier value=&quot;example1&quot;/&gt;\r\n        &lt;/bean&gt;\r\n    \r\n        &lt;!-- enable the configuration of transactional behavior based on annotations --&gt;\r\n        &lt;tx:annotation-driven/&gt;\r\n    \r\n      \r\n    \r\n    &lt;/beans&gt;\r\n\r\n\r\n","title":"JPA - Unable to locate Spring NamespaceHandler for XML schema namespace [http://www.springframework.org/schema/data/jpa]","body":"<p>New to Hibernate and Spring. So I copied and pasted some configurations online and did the rest myself. </p>\n\n<p>However when I try to start my Jetty server I am getting a Spring error.</p>\n\n<blockquote>\n  <p>Unable to locate Spring NamespaceHandler for XML schema namespace [<a href=\"http://www.springframework.org/schema/data/jpa]\" rel=\"nofollow\">http://www.springframework.org/schema/data/jpa]</a></p>\n</blockquote>\n\n<p>What does this mean?</p>\n\n<pre><code>    &lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;beans xmlns=\"http://www.springframework.org/schema/beans\"\n       xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n       xmlns:jpa=\"http://www.springframework.org/schema/data/jpa\"\n       xmlns:repository=\"http://www.springframework.org/schema/data/repository\"\n       xmlns:tx=\"http://www.springframework.org/schema/tx\"\n       xmlns:aop=\"http://www.springframework.org/schema/aop\"\n       xsi:schemaLocation=\"http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-4.0.xsd\n           http://www.springframework.org/schema/data/jpa http://www.springframework.org/schema/data/jpa/spring-jpa.xsd\n           http://www.springframework.org/schema/data/repository http://www.springframework.org/schema/data/repository/spring-repository.xsd\n           http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-4.0.xsd http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop.xsd\"&gt;\n\n\n    &lt;jpa:repositories base-package=\"com.testproject.testpackage.example1.repository\"\n                      transaction-manager-ref=\"example1TransactionManager\"\n                      entity-manager-factory-ref=\"example1EntityManagerFactory\"&gt;\n        &lt;repository:include-filter type=\"regex\" expression=\".*Repository\"/&gt;\n    &lt;/jpa:repositories&gt;\n\n    &lt;bean id=\"example1hikariConfig\" class=\"com.zaxxer.hikari.HikariConfig\"&gt;\n        &lt;property name=\"poolName\" value=\"example1Datasource\"/&gt;\n        &lt;property name=\"connectiontestprojectQuery\" value=\"SELECT 1\"/&gt;\n        &lt;property name=\"dataSourceClassName\" value=\"com.mysql.jdbc.jdbc2.optional.MysqlDataSource\"/&gt;\n        &lt;property name=\"minimumIdle\" value=\"5\"/&gt;\n        &lt;property name=\"maximumPoolSize\" value=\"40\"/&gt;\n        &lt;property name=\"idleTimeout\" value=\"2000\"/&gt;\n\n        &lt;property name=\"dataSourceProperties\"&gt;\n            &lt;props&gt;\n                &lt;prop key=\"url\"&gt;${db.url}&lt;/prop&gt;\n                &lt;prop key=\"user\"&gt;${db.username}&lt;/prop&gt;\n                &lt;prop key=\"password\"&gt;${db.password}&lt;/prop&gt;\n            &lt;/props&gt;\n        &lt;/property&gt;\n    &lt;/bean&gt;\n    &lt;bean id=\"example1Datasource\" class=\"com.zaxxer.hikari.HikariDataSource\" destroy-method=\"close\"&gt;\n        &lt;constructor-arg ref=\"example1hikariConfig\"/&gt;\n    &lt;/bean&gt;\n\n    &lt;bean id=\"hibernate.properties\" class=\"org.springframework.beans.factory.config.PropertiesFactoryBean\"&gt;\n        &lt;property name=\"properties\"&gt;\n            &lt;props&gt;\n                &lt;prop key=\"hibernate.hbm2ddl.auto\"&gt;validate&lt;/prop&gt;\n                &lt;prop key=\"hibernate.show_sql\"&gt;${hibernate.showSql}&lt;/prop&gt;\n                &lt;prop key=\"hibernate.format_sql\"&gt;true&lt;/prop&gt;\n                &lt;prop key=\"hibernate.cache.use_query_cache\"&gt;false&lt;/prop&gt;\n                &lt;prop key=\"hibernate.cache.use_second_level_cache\"&gt;false&lt;/prop&gt;\n            &lt;/props&gt;\n        &lt;/property&gt;\n    &lt;/bean&gt;\n\n    &lt;bean id=\"example1EntityManagerFactory\" class=\"org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean\"&gt;\n        &lt;property name=\"persistenceUnitName\" value=\"example1\"/&gt;\n        &lt;property name=\"dataSource\" ref=\"example1Datasource\"/&gt;\n        &lt;property name=\"persistenceProviderClass\" value=\"org.hibernate.jpa.HibernatePersistenceProvider\"/&gt;\n        &lt;property name=\"jpaVendorAdapter\"&gt;\n            &lt;bean class=\"org.springframework.orm.jpa.vendor.HibernateJpaVendorAdapter\"/&gt;\n        &lt;/property&gt;\n        &lt;property name=\"packagesToScan\"&gt;\n            &lt;list&gt;\n                &lt;value&gt;com.testproject.testpackage.example1.repository&lt;/value&gt;\n            &lt;/list&gt;\n        &lt;/property&gt;\n        &lt;property name=\"loadTimeWeaver\"&gt;\n            &lt;bean class=\"org.springframework.instrument.classloading.InstrumentationLoadTimeWeaver\"/&gt;\n        &lt;/property&gt;\n        &lt;property name=\"jpaPropertyMap\" ref=\"hibernate.properties\"/&gt;\n    &lt;/bean&gt;\n\n\n    &lt;bean id=\"example1TransactionManager\" class=\"org.springframework.orm.jpa.JpaTransactionManager\"&gt;\n        &lt;property name=\"entityManagerFactory\" ref=\"example1EntityManagerFactory\"/&gt;\n        &lt;qualifier value=\"example1\"/&gt;\n    &lt;/bean&gt;\n\n    &lt;!-- enable the configuration of transactional behavior based on annotations --&gt;\n    &lt;tx:annotation-driven/&gt;\n\n\n\n&lt;/beans&gt;\n</code></pre>\n"},{"tags":["java","android","sqlite","android-sqlite"],"comments":[{"owner":{"account_id":2755641,"reputation":8688,"user_id":2373819,"display_name":"Andrew"},"score":0,"creation_date":1574259555,"post_id":58956032,"comment_id":104168545,"body_markdown":"Can you add the actually error from the Debug Console / Logcat, this would help identify the problem","body":"Can you add the actually error from the Debug Console / Logcat, this would help identify the problem"},{"owner":{"account_id":8953648,"reputation":102,"user_id":10581510,"display_name":"Pakito Gama"},"score":0,"creation_date":1574260547,"post_id":58956032,"comment_id":104169159,"body_markdown":"@Andrew edited the post with the error from logcat","body":"@Andrew edited the post with the error from logcat"}],"answers":[{"tags":[],"owner":{"account_id":6077735,"reputation":52951,"user_id":4744514,"accept_rate":96,"display_name":"MikeT"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1574314636,"creation_date":1574280960,"answer_id":58962650,"question_id":58956032,"body_markdown":"&gt; Delete method with error I want to make a method to delete a choosen\r\n&gt; row and update the view of the database table. The method I have, is\r\n&gt; only deleting it, but with erros. By errors I mean: whenever I click\r\n&gt; the row I want to delete and then click on the delete button, the app\r\n&gt; is restarts. And it actually deletes the row from the db.\r\n\r\n\r\nThe reason why the delete works but then crashes is that you are getting a null pointer exception (NPE) when trying to get the parent view of the calculated/rderived LinearLayout when using `((LinearLayout) oLL1.getParent()).removeView(oLL1);` So the row has been deleted.\r\n\r\nIf you put a breakpoint on the line `((LinearLayout) oLL1.getParent()).removeView(oLL1);` and run in debug mode and attempt a deletion then the debug window will appear and if you use that to inspect the variables you will probably see that oLL1 is null or if not if the you split `((LinearLayout) oLL1.getParent()).removeView(oLL1);` into 2 statements that the result of ((LinearLayout) oLL1.getParent()) is null.\r\n\r\nIf (my interpretation/assumption is that the onClicked view is a button in the list presented to the user, rather than a single button), as such to remove the row&#39;s view (assuming the Linear Layout is the parent of the clicked button) then you should be getting and removing the parent of the clicked button.\r\n\r\n###i.e. utilising **`v`** that is passed to the **`deletePedido`** method.\r\n\r\n**However**, I believe that you are basically trying to re-invent the proverbial wheel and that matters would be greatly simplified if instead of trying to manage your own List of Views that you used a **ListView** or a **RecyclerView** as these manage the handling of the rows in the list of data. \r\n\r\n#ListView example\r\n\r\nThe following is an example that allows you to insert, edit and delete rows from  a table. Noting that insert is mimiced rather than calling another activity edit does nothing but includes comments\r\n - in short if you use the **id** (assuming that it an alias of the [**rowid**](https://sqlite.org/lang_createtable.html#rowid))) all that you need to do is pass the **id** to the activity and it can then retrieve the entire row.\r\n\r\nAn attempt has been made to make the example similar to what has been assumed as the goal in you question.\r\n\r\nFirst the main activities layout :-\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n    &lt;LinearLayout\r\n        xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n        xmlns:tools=&quot;http://schemas.android.com/tools&quot;\r\n        android:orientation=&quot;vertical&quot;\r\n        android:layout_width=&quot;match_parent&quot;\r\n        android:layout_height=&quot;match_parent&quot;\r\n        tools:context=&quot;.MainActivity&quot;&gt;\r\n    \r\n        &lt;TextView\r\n            android:id=&quot;@+id/current&quot;\r\n            android:layout_width=&quot;wrap_content&quot;\r\n            android:layout_height=&quot;wrap_content&quot;\r\n            android:text=&quot;Hello World!&quot;&gt;\r\n        &lt;/TextView&gt;\r\n    \r\n        &lt;ListView\r\n            android:id=&quot;@+id/olv1&quot;\r\n            android:layout_width=&quot;wrap_content&quot;\r\n            android:layout_weight=&quot;1&quot;\r\n            android:layout_height=&quot;0dp&quot;&gt;\r\n        &lt;/ListView&gt;\r\n    \r\n        &lt;LinearLayout\r\n            android:orientation=&quot;horizontal&quot;\r\n            android:layout_width=&quot;match_parent&quot;\r\n            android:layout_height=&quot;wrap_content&quot;&gt;\r\n            &lt;Button\r\n                android:id=&quot;@+id/insert&quot;\r\n                android:layout_width=&quot;wrap_content&quot;\r\n                android:layout_height=&quot;match_parent&quot;\r\n                android:text=&quot;ADD NEW&quot;&gt;\r\n            &lt;/Button&gt;\r\n            &lt;Button\r\n                android:id=&quot;@+id/delete&quot;\r\n                android:layout_width=&quot;wrap_content&quot;\r\n                android:layout_height=&quot;match_parent&quot;\r\n                android:text=&quot;DELETE SELECTED&quot;&gt;\r\n            &lt;/Button&gt;\r\n            &lt;Button\r\n                android:id=&quot;@+id/edit&quot;\r\n                android:layout_width=&quot;wrap_content&quot;\r\n                android:layout_height=&quot;match_parent&quot;\r\n                android:text=&quot;EDIT SELECTED&quot;&gt;\r\n            &lt;/Button&gt;\r\n        &lt;/LinearLayout&gt;\r\n    &lt;/LinearLayout&gt;\r\n\r\nThe TextView current is used to display the currently selected row (clicking a row will selected that row).\r\n\r\nThe ListView takes a layout (see MainActivity where the stock SimpleListItem_2 layout has been used for each row). There are three buttons ADD NEW, EDIT SELECTED and DELETE SELECTED.\r\n\r\n\r\nAll of the Database Access mehods (queries, inserts, deletes and updates) are in the DatabaseHelper class **AjudanteParaAbrirBB.java** :-\r\n\r\n    public class AjudanteParaAbrirBD extends SQLiteOpenHelper {\r\n    \r\n        public static final String DBNAME = &quot;ajudante_para_abrir_BD&quot;;\r\n        public static final int DBVERSION = 1;\r\n        public static final String TABLE_NAME = &quot;mytable&quot;;\r\n        public static final String COL_ID = BaseColumns._ID;\r\n        public static final String COL_ACAO = &quot;acao&quot;;\r\n        public static final String COL_COUNT = &quot;count&quot;;\r\n        public static final String COl_CURRENTTIME = &quot;currentTime&quot;;\r\n        public AjudanteParaAbrirBD(Context context) {\r\n            super(context, DBNAME, null, DBVERSION);\r\n        }\r\n    \r\n        @Override\r\n        public void onCreate(SQLiteDatabase db) {\r\n            String crt_table_sql = &quot;CREATE TABLE IF NOT EXISTS &quot; + TABLE_NAME +\r\n                    &quot;(&quot; +\r\n                    COL_ID + &quot; INTEGER PRIMARY KEY, &quot; +\r\n                    COL_ACAO + &quot; TEXT,&quot; +\r\n                    COL_COUNT + &quot; INTEGER, &quot; +\r\n                    COl_CURRENTTIME + &quot; TEXT &quot; +\r\n                    &quot;)&quot;;\r\n            db.execSQL(crt_table_sql);\r\n        }\r\n    \r\n        @Override\r\n        public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {\r\n    \r\n        }\r\n    \r\n        public long insert(String acao, long count, String currentTime) {\r\n            SQLiteDatabase db = this.getWritableDatabase();\r\n            ContentValues cv = new ContentValues();\r\n            cv.put(COL_ACAO,acao);\r\n            cv.put(COL_COUNT,count);\r\n            cv.put(COl_CURRENTTIME,currentTime);\r\n            return db.insert(TABLE_NAME,null,cv);\r\n        }\r\n    \r\n        public int update(long id, String acao, long count, String currentTime) {\r\n            int rv = -1;\r\n            SQLiteDatabase db = this.getWritableDatabase();\r\n            ContentValues cv = new ContentValues();\r\n            if (acao != null &amp;&amp; acao.length() &gt; 0) {\r\n                cv.put(COL_ACAO,acao);\r\n            }\r\n            if (count &gt; -1) {\r\n                cv.put(COL_COUNT,count);\r\n            }\r\n            if (currentTime != null &amp;&amp; currentTime.length() &gt; 0) {\r\n                cv.put(COl_CURRENTTIME,currentTime);\r\n            }\r\n            if (cv.size() &gt; 0) {\r\n                rv = db.update(\r\n                        TABLE_NAME,cv,\r\n                        COL_ID + &quot;=?&quot;,\r\n                        new String[]{String.valueOf(id)}\r\n                        );\r\n            }\r\n            return rv;\r\n        }\r\n    \r\n        public int delete(long id) {\r\n            SQLiteDatabase db = this.getWritableDatabase();\r\n            return db.delete(\r\n                    TABLE_NAME,\r\n                    COL_ID + &quot;=?&quot;,\r\n                    new String[]{String.valueOf(id)}\r\n                    );\r\n        }\r\n    \r\n        public Cursor getAll() {\r\n            SQLiteDatabase db = this.getWritableDatabase();\r\n            return db.query(\r\n                    TABLE_NAME,\r\n                    null,\r\n                    null,\r\n                    null,\r\n                    null,\r\n                    null,\r\n                    null\r\n            );\r\n        }\r\n    \r\n        public String getCurrentSelection(long id) {\r\n            String rv = &quot;Nothing to Select&quot;;\r\n            String derivedColumn = &quot;dr&quot;;\r\n            SQLiteDatabase db = this.getWritableDatabase();\r\n            Cursor csr = db.query(TABLE_NAME,new String[]{\r\n                    &quot;&#39;ACAO is &#39;||&quot; + COL_ACAO +\r\n                            &quot;||&#39; Count=&#39;||&quot; + COL_COUNT +\r\n                            &quot;||&#39; CurrentTime=&#39;||&quot; + COl_CURRENTTIME +\r\n                            &quot;||&#39; ID=&#39;||&quot; + COL_ID +\r\n                            &quot; AS &quot; + derivedColumn},\r\n                    COL_ID + &quot;=?&quot;,new String[]{String.valueOf(id)},\r\n                    null,null,null\r\n            );\r\n            if (csr.moveToFirst()) {\r\n                rv = csr.getString(csr.getColumnIndex(derivedColumn));\r\n            }\r\n            csr.close();\r\n            return rv;\r\n        }\r\n    }\r\n\r\n\r\n - You should see that some of the code resembles some of you code used in activities. However, the methods can be called from anywhere where you have an instance of **AjudanteParaAbrirBB**.\r\n\r\nPutting it all together is **MainActicity.java** :-\r\n\r\n    public class MainActivity extends AppCompatActivity {\r\n    \r\n        ListView dblist;\r\n        TextView currentSelection;\r\n        Button add,edit,delete;\r\n        SimpleCursorAdapter adapter;\r\n        AjudanteParaAbrirBD DBHelper;\r\n        Cursor csr;\r\n        long current_id = -1;\r\n    \r\n        @Override\r\n        protected void onCreate(Bundle savedInstanceState) {\r\n            super.onCreate(savedInstanceState);\r\n            setContentView(R.layout.activity_main);\r\n            currentSelection = this.findViewById(R.id.current);\r\n            dblist = this.findViewById(R.id.olv1);\r\n            add = this.findViewById(R.id.insert);\r\n            edit = this.findViewById(R.id.edit);\r\n            delete = this.findViewById(R.id.delete);\r\n            DBHelper = new AjudanteParaAbrirBD(this);\r\n            setupButtons();\r\n            manageListView();\r\n        }\r\n    \r\n        @Override\r\n        protected void onResume() {\r\n            super.onResume();\r\n            manageListView(); //&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt; refreshes the ListView\r\n        }\r\n    \r\n        private void manageListView() {\r\n            edit.setVisibility(View.INVISIBLE);\r\n            delete.setVisibility(View.INVISIBLE);\r\n            csr = DBHelper.getAll();\r\n            if (csr.getCount() &gt; 0) {\r\n                if (csr.moveToFirst()) {\r\n                    current_id = csr.getLong(csr.getColumnIndex(AjudanteParaAbrirBD.COL_ID));\r\n                    currentSelection.setText(\r\n                            DBHelper.getCurrentSelection(current_id)\r\n                    );\r\n                    csr.moveToPosition(-1);\r\n                }\r\n                edit.setVisibility(View.VISIBLE);\r\n                delete.setVisibility(View.VISIBLE);\r\n            }\r\n            if (adapter == null) {\r\n                adapter = new SimpleCursorAdapter(\r\n                        this,\r\n                        android.R.layout.simple_expandable_list_item_2,\r\n                        csr,\r\n                        new String[]{AjudanteParaAbrirBD.COL_ACAO, AjudanteParaAbrirBD.COl_CURRENTTIME},\r\n                        new int[]{android.R.id.text1, android.R.id.text2},\r\n                        0\r\n                );\r\n                dblist.setAdapter(adapter);\r\n                dblist.setOnItemClickListener(new AdapterView.OnItemClickListener() {\r\n                    @Override\r\n                    public void onItemClick(AdapterView&lt;?&gt; parent, View view, int position, long id) {\r\n                        current_id = id;\r\n                        currentSelection.setText(DBHelper.getCurrentSelection(id));\r\n                    }\r\n                });\r\n            } else {\r\n                adapter.swapCursor(csr);\r\n            }\r\n        }\r\n    \r\n        private void setupButtons() {\r\n            add.setOnClickListener(new View.OnClickListener() {\r\n                @Override\r\n                public void onClick(View v) {\r\n                    handleInsertButtonClicked();\r\n                }\r\n            });\r\n            delete.setOnClickListener(new View.OnClickListener() {\r\n                @Override\r\n                public void onClick(View v) {\r\n                    handleDeleteButtonClicked(current_id);\r\n                }\r\n            });\r\n            edit.setOnClickListener(new View.OnClickListener() {\r\n                @Override\r\n                public void onClick(View v) {\r\n                    handleEditButtonClicked(current_id);\r\n                }\r\n            });\r\n        }\r\n    \r\n        private void handleInsertButtonClicked() {\r\n            //...... instantiate intent and startactivity to insert row\r\n            // HOWEVER for demo\r\n            DBHelper.insert(&quot;XX&quot;,99,&quot;2019-01-01&quot;);\r\n            manageListView(); //&lt;&lt;&lt;&lt;&lt;&lt; note only needed because onResume is not called\r\n    \r\n            // onResume would be called when the started activity is finished\r\n        }\r\n    \r\n        private void handleEditButtonClicked(long id) {\r\n            //...... instantiate intent, add intent extra for id, and then startactivity to edit\r\n        }\r\n    \r\n        private void handleDeleteButtonClicked(long id) {\r\n            // No need to start and activity just delete and refresh list\r\n            DBHelper.delete(id);\r\n            manageListView();\r\n        }\r\n    }\r\n\r\n\r\n#Result/Demo\r\n\r\nWhen first run there is no data and thus only the **ADD NEW** button is available, as per :-\r\n\r\n[![enter image description here][1]][1]\r\n\r\nRather than write an insert activity clicking the **ADD NEW** button inserts a row (allbeit that the data is the same EXCEPT for the **id**). The first time the **ADD NEW** button is clicked the **DELETE SELECTED** and **EDIT SELECTED** buttons are visible. Additionally the TextView at the top displays the information for that row.\r\n\r\nAfter clicking **ADD NEW** another three times then 4 rows are displayed :-\r\n\r\n[![enter image description here][2]][2]\r\n\r\nIf a row is clicked (e.g. the second) then the data for that row is displayed at the top. Noting that the id changes.\r\n\r\nIf say the 2nd row is clicked and then the **DELETE SELECTED** buttons is clicked then the row is deleted from the database and the ListView shows just the 3 remaining rows.\r\n\r\ne.g.\r\n\r\n[![enter image description here][3]][3]\r\n\r\nClicking Edit does nothing. However, the comments in the code indicate how to manage editing and inserting via activities.\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/b2ENs.png\r\n  [2]: https://i.stack.imgur.com/JulIP.png\r\n  [3]: https://i.stack.imgur.com/t8Hka.png","title":"How can I delete and edit a specific (sqlite db) row from an attached Linear Layout (Android)","body":"<blockquote>\n  <p>Delete method with error I want to make a method to delete a choosen\n  row and update the view of the database table. The method I have, is\n  only deleting it, but with erros. By errors I mean: whenever I click\n  the row I want to delete and then click on the delete button, the app\n  is restarts. And it actually deletes the row from the db.</p>\n</blockquote>\n\n<p>The reason why the delete works but then crashes is that you are getting a null pointer exception (NPE) when trying to get the parent view of the calculated/rderived LinearLayout when using <code>((LinearLayout) oLL1.getParent()).removeView(oLL1);</code> So the row has been deleted.</p>\n\n<p>If you put a breakpoint on the line <code>((LinearLayout) oLL1.getParent()).removeView(oLL1);</code> and run in debug mode and attempt a deletion then the debug window will appear and if you use that to inspect the variables you will probably see that oLL1 is null or if not if the you split <code>((LinearLayout) oLL1.getParent()).removeView(oLL1);</code> into 2 statements that the result of ((LinearLayout) oLL1.getParent()) is null.</p>\n\n<p>If (my interpretation/assumption is that the onClicked view is a button in the list presented to the user, rather than a single button), as such to remove the row's view (assuming the Linear Layout is the parent of the clicked button) then you should be getting and removing the parent of the clicked button.</p>\n\n<h3>i.e. utilising <strong><code>v</code></strong> that is passed to the <strong><code>deletePedido</code></strong> method.</h3>\n\n<p><strong>However</strong>, I believe that you are basically trying to re-invent the proverbial wheel and that matters would be greatly simplified if instead of trying to manage your own List of Views that you used a <strong>ListView</strong> or a <strong>RecyclerView</strong> as these manage the handling of the rows in the list of data. </p>\n\n<h1>ListView example</h1>\n\n<p>The following is an example that allows you to insert, edit and delete rows from  a table. Noting that insert is mimiced rather than calling another activity edit does nothing but includes comments\n - in short if you use the <strong>id</strong> (assuming that it an alias of the <a href=\"https://sqlite.org/lang_createtable.html#rowid\" rel=\"nofollow noreferrer\"><strong>rowid</strong></a>)) all that you need to do is pass the <strong>id</strong> to the activity and it can then retrieve the entire row.</p>\n\n<p>An attempt has been made to make the example similar to what has been assumed as the goal in you question.</p>\n\n<p>First the main activities layout :-</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;LinearLayout\n    xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    xmlns:tools=\"http://schemas.android.com/tools\"\n    android:orientation=\"vertical\"\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"match_parent\"\n    tools:context=\".MainActivity\"&gt;\n\n    &lt;TextView\n        android:id=\"@+id/current\"\n        android:layout_width=\"wrap_content\"\n        android:layout_height=\"wrap_content\"\n        android:text=\"Hello World!\"&gt;\n    &lt;/TextView&gt;\n\n    &lt;ListView\n        android:id=\"@+id/olv1\"\n        android:layout_width=\"wrap_content\"\n        android:layout_weight=\"1\"\n        android:layout_height=\"0dp\"&gt;\n    &lt;/ListView&gt;\n\n    &lt;LinearLayout\n        android:orientation=\"horizontal\"\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"wrap_content\"&gt;\n        &lt;Button\n            android:id=\"@+id/insert\"\n            android:layout_width=\"wrap_content\"\n            android:layout_height=\"match_parent\"\n            android:text=\"ADD NEW\"&gt;\n        &lt;/Button&gt;\n        &lt;Button\n            android:id=\"@+id/delete\"\n            android:layout_width=\"wrap_content\"\n            android:layout_height=\"match_parent\"\n            android:text=\"DELETE SELECTED\"&gt;\n        &lt;/Button&gt;\n        &lt;Button\n            android:id=\"@+id/edit\"\n            android:layout_width=\"wrap_content\"\n            android:layout_height=\"match_parent\"\n            android:text=\"EDIT SELECTED\"&gt;\n        &lt;/Button&gt;\n    &lt;/LinearLayout&gt;\n&lt;/LinearLayout&gt;\n</code></pre>\n\n<p>The TextView current is used to display the currently selected row (clicking a row will selected that row).</p>\n\n<p>The ListView takes a layout (see MainActivity where the stock SimpleListItem_2 layout has been used for each row). There are three buttons ADD NEW, EDIT SELECTED and DELETE SELECTED.</p>\n\n<p>All of the Database Access mehods (queries, inserts, deletes and updates) are in the DatabaseHelper class <strong>AjudanteParaAbrirBB.java</strong> :-</p>\n\n<pre><code>public class AjudanteParaAbrirBD extends SQLiteOpenHelper {\n\n    public static final String DBNAME = \"ajudante_para_abrir_BD\";\n    public static final int DBVERSION = 1;\n    public static final String TABLE_NAME = \"mytable\";\n    public static final String COL_ID = BaseColumns._ID;\n    public static final String COL_ACAO = \"acao\";\n    public static final String COL_COUNT = \"count\";\n    public static final String COl_CURRENTTIME = \"currentTime\";\n    public AjudanteParaAbrirBD(Context context) {\n        super(context, DBNAME, null, DBVERSION);\n    }\n\n    @Override\n    public void onCreate(SQLiteDatabase db) {\n        String crt_table_sql = \"CREATE TABLE IF NOT EXISTS \" + TABLE_NAME +\n                \"(\" +\n                COL_ID + \" INTEGER PRIMARY KEY, \" +\n                COL_ACAO + \" TEXT,\" +\n                COL_COUNT + \" INTEGER, \" +\n                COl_CURRENTTIME + \" TEXT \" +\n                \")\";\n        db.execSQL(crt_table_sql);\n    }\n\n    @Override\n    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {\n\n    }\n\n    public long insert(String acao, long count, String currentTime) {\n        SQLiteDatabase db = this.getWritableDatabase();\n        ContentValues cv = new ContentValues();\n        cv.put(COL_ACAO,acao);\n        cv.put(COL_COUNT,count);\n        cv.put(COl_CURRENTTIME,currentTime);\n        return db.insert(TABLE_NAME,null,cv);\n    }\n\n    public int update(long id, String acao, long count, String currentTime) {\n        int rv = -1;\n        SQLiteDatabase db = this.getWritableDatabase();\n        ContentValues cv = new ContentValues();\n        if (acao != null &amp;&amp; acao.length() &gt; 0) {\n            cv.put(COL_ACAO,acao);\n        }\n        if (count &gt; -1) {\n            cv.put(COL_COUNT,count);\n        }\n        if (currentTime != null &amp;&amp; currentTime.length() &gt; 0) {\n            cv.put(COl_CURRENTTIME,currentTime);\n        }\n        if (cv.size() &gt; 0) {\n            rv = db.update(\n                    TABLE_NAME,cv,\n                    COL_ID + \"=?\",\n                    new String[]{String.valueOf(id)}\n                    );\n        }\n        return rv;\n    }\n\n    public int delete(long id) {\n        SQLiteDatabase db = this.getWritableDatabase();\n        return db.delete(\n                TABLE_NAME,\n                COL_ID + \"=?\",\n                new String[]{String.valueOf(id)}\n                );\n    }\n\n    public Cursor getAll() {\n        SQLiteDatabase db = this.getWritableDatabase();\n        return db.query(\n                TABLE_NAME,\n                null,\n                null,\n                null,\n                null,\n                null,\n                null\n        );\n    }\n\n    public String getCurrentSelection(long id) {\n        String rv = \"Nothing to Select\";\n        String derivedColumn = \"dr\";\n        SQLiteDatabase db = this.getWritableDatabase();\n        Cursor csr = db.query(TABLE_NAME,new String[]{\n                \"'ACAO is '||\" + COL_ACAO +\n                        \"||' Count='||\" + COL_COUNT +\n                        \"||' CurrentTime='||\" + COl_CURRENTTIME +\n                        \"||' ID='||\" + COL_ID +\n                        \" AS \" + derivedColumn},\n                COL_ID + \"=?\",new String[]{String.valueOf(id)},\n                null,null,null\n        );\n        if (csr.moveToFirst()) {\n            rv = csr.getString(csr.getColumnIndex(derivedColumn));\n        }\n        csr.close();\n        return rv;\n    }\n}\n</code></pre>\n\n<ul>\n<li>You should see that some of the code resembles some of you code used in activities. However, the methods can be called from anywhere where you have an instance of <strong>AjudanteParaAbrirBB</strong>.</li>\n</ul>\n\n<p>Putting it all together is <strong>MainActicity.java</strong> :-</p>\n\n<pre><code>public class MainActivity extends AppCompatActivity {\n\n    ListView dblist;\n    TextView currentSelection;\n    Button add,edit,delete;\n    SimpleCursorAdapter adapter;\n    AjudanteParaAbrirBD DBHelper;\n    Cursor csr;\n    long current_id = -1;\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_main);\n        currentSelection = this.findViewById(R.id.current);\n        dblist = this.findViewById(R.id.olv1);\n        add = this.findViewById(R.id.insert);\n        edit = this.findViewById(R.id.edit);\n        delete = this.findViewById(R.id.delete);\n        DBHelper = new AjudanteParaAbrirBD(this);\n        setupButtons();\n        manageListView();\n    }\n\n    @Override\n    protected void onResume() {\n        super.onResume();\n        manageListView(); //&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt; refreshes the ListView\n    }\n\n    private void manageListView() {\n        edit.setVisibility(View.INVISIBLE);\n        delete.setVisibility(View.INVISIBLE);\n        csr = DBHelper.getAll();\n        if (csr.getCount() &gt; 0) {\n            if (csr.moveToFirst()) {\n                current_id = csr.getLong(csr.getColumnIndex(AjudanteParaAbrirBD.COL_ID));\n                currentSelection.setText(\n                        DBHelper.getCurrentSelection(current_id)\n                );\n                csr.moveToPosition(-1);\n            }\n            edit.setVisibility(View.VISIBLE);\n            delete.setVisibility(View.VISIBLE);\n        }\n        if (adapter == null) {\n            adapter = new SimpleCursorAdapter(\n                    this,\n                    android.R.layout.simple_expandable_list_item_2,\n                    csr,\n                    new String[]{AjudanteParaAbrirBD.COL_ACAO, AjudanteParaAbrirBD.COl_CURRENTTIME},\n                    new int[]{android.R.id.text1, android.R.id.text2},\n                    0\n            );\n            dblist.setAdapter(adapter);\n            dblist.setOnItemClickListener(new AdapterView.OnItemClickListener() {\n                @Override\n                public void onItemClick(AdapterView&lt;?&gt; parent, View view, int position, long id) {\n                    current_id = id;\n                    currentSelection.setText(DBHelper.getCurrentSelection(id));\n                }\n            });\n        } else {\n            adapter.swapCursor(csr);\n        }\n    }\n\n    private void setupButtons() {\n        add.setOnClickListener(new View.OnClickListener() {\n            @Override\n            public void onClick(View v) {\n                handleInsertButtonClicked();\n            }\n        });\n        delete.setOnClickListener(new View.OnClickListener() {\n            @Override\n            public void onClick(View v) {\n                handleDeleteButtonClicked(current_id);\n            }\n        });\n        edit.setOnClickListener(new View.OnClickListener() {\n            @Override\n            public void onClick(View v) {\n                handleEditButtonClicked(current_id);\n            }\n        });\n    }\n\n    private void handleInsertButtonClicked() {\n        //...... instantiate intent and startactivity to insert row\n        // HOWEVER for demo\n        DBHelper.insert(\"XX\",99,\"2019-01-01\");\n        manageListView(); //&lt;&lt;&lt;&lt;&lt;&lt; note only needed because onResume is not called\n\n        // onResume would be called when the started activity is finished\n    }\n\n    private void handleEditButtonClicked(long id) {\n        //...... instantiate intent, add intent extra for id, and then startactivity to edit\n    }\n\n    private void handleDeleteButtonClicked(long id) {\n        // No need to start and activity just delete and refresh list\n        DBHelper.delete(id);\n        manageListView();\n    }\n}\n</code></pre>\n\n<h1>Result/Demo</h1>\n\n<p>When first run there is no data and thus only the <strong>ADD NEW</strong> button is available, as per :-</p>\n\n<p><a href=\"https://i.stack.imgur.com/b2ENs.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/b2ENs.png\" alt=\"enter image description here\"></a></p>\n\n<p>Rather than write an insert activity clicking the <strong>ADD NEW</strong> button inserts a row (allbeit that the data is the same EXCEPT for the <strong>id</strong>). The first time the <strong>ADD NEW</strong> button is clicked the <strong>DELETE SELECTED</strong> and <strong>EDIT SELECTED</strong> buttons are visible. Additionally the TextView at the top displays the information for that row.</p>\n\n<p>After clicking <strong>ADD NEW</strong> another three times then 4 rows are displayed :-</p>\n\n<p><a href=\"https://i.stack.imgur.com/JulIP.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/JulIP.png\" alt=\"enter image description here\"></a></p>\n\n<p>If a row is clicked (e.g. the second) then the data for that row is displayed at the top. Noting that the id changes.</p>\n\n<p>If say the 2nd row is clicked and then the <strong>DELETE SELECTED</strong> buttons is clicked then the row is deleted from the database and the ListView shows just the 3 remaining rows.</p>\n\n<p>e.g.</p>\n\n<p><a href=\"https://i.stack.imgur.com/t8Hka.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/t8Hka.png\" alt=\"enter image description here\"></a></p>\n\n<p>Clicking Edit does nothing. However, the comments in the code indicate how to manage editing and inserting via activities.</p>\n"}],"owner":{"account_id":8953648,"reputation":102,"user_id":10581510,"display_name":"Pakito Gama"},"comment_count":2,"delete_vote_count":1,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":261,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"closed_date":1646075092,"accepted_answer_id":58962650,"answer_count":1,"score":-1,"last_activity_date":1646074130,"creation_date":1574258140,"question_id":58956032,"body_markdown":"I am making an app in Android Studio and I am having some troubles with some methods, sorry if the code is bad, I am a CS student and making something like this for the first time.\r\n\r\n1. Delete method with error  \r\nI want to make a method to delete a chosen row and update the view of the database table. The method I have, is only deleting it, but with errors. By errors I mean: whenever I click the row I want to delete and then click on the delete button, the app is restarts. And it actually deletes the row from the db. \r\n2. Edit (can&#39;t find a way to do it)  \r\nThis edit method should be, something like the INSERT method I already have, fully working I think, but it get&#39;s the data from one specific chosen row, and open the activity so I can edit whatever I want;\r\n\r\nHere is some code for the methods I already have\r\n\r\n``` \r\n//this is my onCreate method, if you need it\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_main2);\r\n\r\n        oAPABD = new AjudanteParaAbrirBD(this);\r\n        oSQLiteDB = oAPABD.getWritableDatabase();\r\n        LinearLayout oLL = (LinearLayout)findViewById(R.id.llsv);\r\n\r\n        Cursor oCursor = oSQLiteDB.query(\r\n                oAPABD.TABLE_NAME,\r\n                new String[]{&quot;*&quot;},\r\n                null,\r\n                null,\r\n                null,\r\n                null,\r\n                null,\r\n                null);\r\n\r\n        boolean bCarryOn = oCursor.moveToFirst();\r\n\r\n        while (bCarryOn){\r\n            LinearLayout oLL1 = (LinearLayout)getLayoutInflater().inflate(R.layout.lines1,null);\r\n            oLL1.setId(oCursor.getInt(0)*10+8);\r\n\r\n            TextView oED1 = (TextView) oLL1.findViewById(R.id.ED1);\r\n            TextView oED2 = (TextView) oLL1.findViewById(R.id.ED2);\r\n            TextView oED3 = (TextView) oLL1.findViewById(R.id.ED3);\r\n\r\n            oED1.setId(oCursor.getInt(0)*10+2);\r\n            oED1.setText(oCursor.getInt(0)+&quot;&quot;);\r\n\r\n            //COL 2 = ITENS\r\n            //DESCRIPTION OF COL2 ITEM LIST MISSING\r\n\r\n            oED2.setId(oCursor.getInt(0)*10+3);\r\n            oED2.setText(oCursor.getInt(2)+&quot;&quot;);\r\n            oED3.setId(oCursor.getInt(0)*10+4); //repetido 10+4;\r\n            oED3.setText(oCursor.getString(3));\r\n\r\n            oLL.addView(oLL1);\r\n            bCarryOn = oCursor.moveToNext();\r\n        }\r\n\r\n\r\n    }\r\n//INSERT NEW method\r\n    public void novoPedido(View v){\r\n        Intent intento1 = new Intent(Main2Activity.this, activityPedido.class );\r\n        intento1.putExtra(&quot;acao&quot;,&quot;novoPedido&quot;);\r\n        intento1.putExtra(&quot;count&quot;,(getLastID()+1)+&quot;&quot;);\r\n        intento1.putExtra(&quot;currentTime&quot;,currentTime);\r\n\r\n        startActivityForResult(intento1, iRequest_Code1);\r\n    }\r\n\r\n//EDIT method\r\n    public void editPedido(View v){\r\n        Intent intento2 = new Intent(Main2Activity.this, activityPedido.class );\r\n        intento2.putExtra(&quot;acao&quot;,&quot;editarPedido&quot;);\r\n        \r\n//not implemented\r\n\r\n        startActivityForResult(intento2,iRequest_Code2);\r\n    }\r\n\r\n//DELETE method\r\n    public void deletePedido(View v){\r\n\r\n        //oSQLiteDB.delete(oAPABD.TABLE_NAME, &quot;id = ?&quot; + choosenRowID/10,null);\r\n        oSQLiteDB.execSQL(&quot;DELETE FROM &quot; + oAPABD.TABLE_NAME + &quot; WHERE &quot; + oAPABD.COL1 + &quot;=\\&quot;&quot; + choosenRowID/10 + &quot;\\&quot;&quot;);\r\n        oSQLiteDB.close();\r\n\r\n        LinearLayout oLL1 = (LinearLayout)findViewById(choosenRowID+8);\r\n        ((LinearLayout) oLL1.getParent()).removeView(oLL1);\r\n    }\r\n\r\n//decided to go with activityResult like this (only inser method included)\r\n    protected void onActivityResult(int iReqCode, int iResultCode, Intent iResult){\r\n        oAPABD = new AjudanteParaAbrirBD(this);\r\n        oSQLiteDB = oAPABD.getWritableDatabase();\r\n\r\n        if( (iReqCode == iRequest_Code1) &amp;&amp; (iResultCode == RESULT_OK)){    //ADICIONAR\r\n            String id = iResult.getStringExtra(&quot;id&quot;);\r\n            String listaItens = iResult.getStringExtra(&quot;itens&quot;);\r\n            String mesa = iResult.getStringExtra(&quot;mesa&quot;);\r\n            String cliente = iResult.getStringExtra(&quot;cliente&quot;);\r\n\r\n            LastID = Integer.parseInt(id);\r\n\r\n            ContentValues oCV = new ContentValues();\r\n            oCV.put(oAPABD.COL1, id );\r\n            //oCV.put(oAPABD.COL2, listaItens);\r\n            oCV.put(oAPABD.COL3, mesa);\r\n            oCV.put(oAPABD.COL4, cliente);\r\n\r\n            oSQLiteDB.insert(oAPABD.TABLE_NAME,null,oCV);\r\n\r\n            //Toast.makeText(this, &quot;Pedido adicionado com sucesso!&quot;, Toast.LENGTH_SHORT).show();\r\n        }else if((iReqCode == iRequest_Code2) &amp;&amp; (iResultCode == RESULT_OK)){ //EDITAR\r\n\r\n        }else if((iReqCode == iRequest_Code3) &amp;&amp; (iResultCode == RESULT_OK)){ //REMOVER\r\n            //Toast.makeText(this, &quot;Pedido removido com sucesso!&quot;, Toast.LENGTH_SHORT).show();\r\n        }else{\r\n            //Toast.makeText(this, &quot;Ups! Algo correu mal...&quot;, Toast.LENGTH_SHORT).show();\r\n        }\r\n    }\r\n```\r\n\r\non my other activity, the one which I&#39;m using for inserting and then it gives me the result back is defined like this:\r\n\r\n```\r\npublic class activityPedido extends Activity {\r\n    AjudanteParaAbrirBD oAPABD;\r\n    SQLiteDatabase oSQLiteDB;\r\n    TextView tvAction;\r\n    EditText etInfo1,etInfo2,etInfo3,etCliente,etEmpregado,etPedido;\r\n    ImageButton bSaveNew,bSaveEdit;\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_pedido);\r\n\r\n        Intent iCameFromAct2 = getIntent();\r\n        String action = iCameFromAct2.getStringExtra(&quot;acao&quot;);\r\n        String currentTime = iCameFromAct2.getStringExtra(&quot;currentTime&quot;);\r\n        tvAction = (TextView)findViewById(R.id.tAction);\r\n        etInfo1 = (EditText)findViewById(R.id.etInfo1);\r\n        bSaveNew = (ImageButton)findViewById(R.id.bSaveNew);\r\n        bSaveEdit = (ImageButton)findViewById(R.id.bSaveEdit);\r\n        etInfo3 = (EditText)findViewById(R.id.etInfo3);\r\n        etPedido = (EditText)findViewById(R.id.etPedido);\r\n\r\n        if (action.equals(&quot;novoPedido&quot;)){\r\n            tvAction.setText(&quot;Novo Pedido&quot;);\r\n            etInfo3.setText(currentTime);\r\n            bSaveEdit.setVisibility(View.GONE);\r\n\r\n            etInfo1.setText(iCameFromAct2.getStringExtra(&quot;count&quot;));\r\n            etInfo1.setInputType(InputType.TYPE_NULL);\r\n        }\r\n        if (action.equals(&quot;editarPedido&quot;)){\r\n            tvAction.setText(&quot;Editar Pedido&quot;);\r\n            bSaveNew.setVisibility(View.GONE);\r\n\r\n        }\r\n        if (action.equals(&quot;removerPedido&quot;)){\r\n            tvAction.setText(&quot;Remover Pedido&quot;);\r\n        }\r\n\r\n    }//onCreate\r\n\r\n/*Using this to make the &quot;same button&quot; with 2 different onClick methods:\r\nsaveNew(save data when clicked ADD NEW in the previous activity)\r\nand saveEdit(bellow)\r\nwhich I haven&#39;t yet done anything to it and is the one I really needed help,\r\nbecause I can&#39;t figure out out to make it)*/\r\n    public void saveNew(View v){\r\n        etInfo1 = (EditText)findViewById(R.id.etInfo1);\r\n        etInfo2 = (EditText)findViewById(R.id.etInfo2);\r\n        etCliente = (EditText)findViewById(R.id.etCliente);\r\n        etPedido = (EditText)findViewById(R.id.etPedido);\r\n\r\n        Intent iResult = new Intent();\r\n        iResult.putExtra(&quot;id&quot;,etInfo1.getText().toString());\r\n        iResult.putExtra(&quot;mesa&quot;,etInfo2.getText().toString());\r\n        iResult.putExtra(&quot;cliente&quot;,etCliente.getText().toString());\r\n        iResult.putExtra(&quot;itens&quot;,etPedido.getText().toString());\r\n\r\n        setResult(RESULT_OK, iResult);\r\n        super.finish();\r\n    }\r\n\r\n    public void saveEdit(View v){\r\n        etInfo1 = (EditText)findViewById(R.id.etInfo1);\r\n        etInfo2 = (EditText)findViewById(R.id.etInfo2);\r\n        etCliente = (EditText)findViewById(R.id.etCliente);\r\n        etPedido = (EditText)findViewById(R.id.etPedido);\r\n\r\n\r\n        super.finish();\r\n    }\r\n    public void goBack(View v){\r\n        finish();\r\n    }\r\n}\r\n\r\n ```\r\n\r\nAdding the error in LogCat as asked in the comments:\r\n\r\n    2019-11-20 14:31:10.355 14923-14923/pmd.di.ubi.pedidunchos_2 E/AndroidRuntime: FATAL EXCEPTION: main\r\n        Process: pmd.di.ubi.pedidunchos_2, PID: 14923\r\n        java.lang.IllegalStateException: Could not execute method for android:onClick\r\n            at android.view.View$DeclaredOnClickListener.onClick(View.java:5652)\r\n            at android.view.View.performClick(View.java:6615)\r\n            at android.view.View.performClickInternal(View.java:6592)\r\n            at android.view.View.access$3100(View.java:786)\r\n            at android.view.View$PerformClick.run(View.java:25951)\r\n            at android.os.Handler.handleCallback(Handler.java:873)\r\n            at android.os.Handler.dispatchMessage(Handler.java:99)\r\n            at android.os.Looper.loop(Looper.java:201)\r\n            at android.app.ActivityThread.main(ActivityThread.java:6815)\r\n            at java.lang.reflect.Method.invoke(Native Method)\r\n            at com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:547)\r\n            at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:873)\r\n         Caused by: java.lang.reflect.InvocationTargetException\r\n            at java.lang.reflect.Method.invoke(Native Method)\r\n            at android.view.View$DeclaredOnClickListener.onClick(View.java:5647)\r\n            at android.view.View.performClick(View.java:6615)&#160;\r\n            at android.view.View.performClickInternal(View.java:6592)&#160;\r\n            at android.view.View.access$3100(View.java:786)&#160;\r\n            at android.view.View$PerformClick.run(View.java:25951)&#160;\r\n            at android.os.Handler.handleCallback(Handler.java:873)&#160;\r\n            at android.os.Handler.dispatchMessage(Handler.java:99)&#160;\r\n            at android.os.Looper.loop(Looper.java:201)&#160;\r\n            at android.app.ActivityThread.main(ActivityThread.java:6815)&#160;\r\n            at java.lang.reflect.Method.invoke(Native Method)&#160;\r\n            at com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:547)&#160;\r\n            at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:873)&#160;\r\n         Caused by: java.lang.NullPointerException: Attempt to invoke virtual method &#39;android.view.ViewParent android.widget.LinearLayout.getParent()&#39; on a null object reference\r\n            at pmd.di.ubi.pedidunchos_2.Main2Activity.deletePedido(Main2Activity.java:134)\r\n            at java.lang.reflect.Method.invoke(Native Method)&#160;\r\n            at android.view.View$DeclaredOnClickListener.onClick(View.java:5647)&#160;\r\n            at android.view.View.performClick(View.java:6615)&#160;\r\n            at android.view.View.performClickInternal(View.java:6592)&#160;\r\n            at android.view.View.access$3100(View.java:786)&#160;\r\n            at android.view.View$PerformClick.run(View.java:25951)&#160;\r\n            at android.os.Handler.handleCallback(Handler.java:873)&#160;\r\n            at android.os.Handler.dispatchMessage(Handler.java:99)&#160;\r\n            at android.os.Looper.loop(Looper.java:201)&#160;\r\n            at android.app.ActivityThread.main(ActivityThread.java:6815)&#160;\r\n            at java.lang.reflect.Method.invoke(Native Method)&#160;\r\n            at com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:547)&#160;\r\n            at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:873)&#160;\r\n    2019-11-20 14:31:10.437 1371-1830/? E/InputDispatcher: channel &#39;55262fd pmd.di.ubi.pedidunchos_2/pmd.di.ubi.pedidunchos_2.Main2Activity (server)&#39; ~ Channel is unrecoverably broken and will be disposed!\r\n    2019-11-20 14:31:10.450 1371-1830/? E/InputDispatcher: channel &#39;c67c606 pmd.di.ubi.pedidunchos_2/pmd.di.ubi.pedidunchos_2.MainActivity (server)&#39; ~ \r\n    Channel is unrecoverably broken and will be disposed!","title":"How can I delete and edit a specific (sqlite db) row from an attached Linear Layout (Android)","body":"<p>I am making an app in Android Studio and I am having some troubles with some methods, sorry if the code is bad, I am a CS student and making something like this for the first time.</p>\n<ol>\n<li>Delete method with error<br />\nI want to make a method to delete a chosen row and update the view of the database table. The method I have, is only deleting it, but with errors. By errors I mean: whenever I click the row I want to delete and then click on the delete button, the app is restarts. And it actually deletes the row from the db.</li>\n<li>Edit (can't find a way to do it)<br />\nThis edit method should be, something like the INSERT method I already have, fully working I think, but it get's the data from one specific chosen row, and open the activity so I can edit whatever I want;</li>\n</ol>\n<p>Here is some code for the methods I already have</p>\n<pre><code>//this is my onCreate method, if you need it\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_main2);\n\n        oAPABD = new AjudanteParaAbrirBD(this);\n        oSQLiteDB = oAPABD.getWritableDatabase();\n        LinearLayout oLL = (LinearLayout)findViewById(R.id.llsv);\n\n        Cursor oCursor = oSQLiteDB.query(\n                oAPABD.TABLE_NAME,\n                new String[]{&quot;*&quot;},\n                null,\n                null,\n                null,\n                null,\n                null,\n                null);\n\n        boolean bCarryOn = oCursor.moveToFirst();\n\n        while (bCarryOn){\n            LinearLayout oLL1 = (LinearLayout)getLayoutInflater().inflate(R.layout.lines1,null);\n            oLL1.setId(oCursor.getInt(0)*10+8);\n\n            TextView oED1 = (TextView) oLL1.findViewById(R.id.ED1);\n            TextView oED2 = (TextView) oLL1.findViewById(R.id.ED2);\n            TextView oED3 = (TextView) oLL1.findViewById(R.id.ED3);\n\n            oED1.setId(oCursor.getInt(0)*10+2);\n            oED1.setText(oCursor.getInt(0)+&quot;&quot;);\n\n            //COL 2 = ITENS\n            //DESCRIPTION OF COL2 ITEM LIST MISSING\n\n            oED2.setId(oCursor.getInt(0)*10+3);\n            oED2.setText(oCursor.getInt(2)+&quot;&quot;);\n            oED3.setId(oCursor.getInt(0)*10+4); //repetido 10+4;\n            oED3.setText(oCursor.getString(3));\n\n            oLL.addView(oLL1);\n            bCarryOn = oCursor.moveToNext();\n        }\n\n\n    }\n//INSERT NEW method\n    public void novoPedido(View v){\n        Intent intento1 = new Intent(Main2Activity.this, activityPedido.class );\n        intento1.putExtra(&quot;acao&quot;,&quot;novoPedido&quot;);\n        intento1.putExtra(&quot;count&quot;,(getLastID()+1)+&quot;&quot;);\n        intento1.putExtra(&quot;currentTime&quot;,currentTime);\n\n        startActivityForResult(intento1, iRequest_Code1);\n    }\n\n//EDIT method\n    public void editPedido(View v){\n        Intent intento2 = new Intent(Main2Activity.this, activityPedido.class );\n        intento2.putExtra(&quot;acao&quot;,&quot;editarPedido&quot;);\n        \n//not implemented\n\n        startActivityForResult(intento2,iRequest_Code2);\n    }\n\n//DELETE method\n    public void deletePedido(View v){\n\n        //oSQLiteDB.delete(oAPABD.TABLE_NAME, &quot;id = ?&quot; + choosenRowID/10,null);\n        oSQLiteDB.execSQL(&quot;DELETE FROM &quot; + oAPABD.TABLE_NAME + &quot; WHERE &quot; + oAPABD.COL1 + &quot;=\\&quot;&quot; + choosenRowID/10 + &quot;\\&quot;&quot;);\n        oSQLiteDB.close();\n\n        LinearLayout oLL1 = (LinearLayout)findViewById(choosenRowID+8);\n        ((LinearLayout) oLL1.getParent()).removeView(oLL1);\n    }\n\n//decided to go with activityResult like this (only inser method included)\n    protected void onActivityResult(int iReqCode, int iResultCode, Intent iResult){\n        oAPABD = new AjudanteParaAbrirBD(this);\n        oSQLiteDB = oAPABD.getWritableDatabase();\n\n        if( (iReqCode == iRequest_Code1) &amp;&amp; (iResultCode == RESULT_OK)){    //ADICIONAR\n            String id = iResult.getStringExtra(&quot;id&quot;);\n            String listaItens = iResult.getStringExtra(&quot;itens&quot;);\n            String mesa = iResult.getStringExtra(&quot;mesa&quot;);\n            String cliente = iResult.getStringExtra(&quot;cliente&quot;);\n\n            LastID = Integer.parseInt(id);\n\n            ContentValues oCV = new ContentValues();\n            oCV.put(oAPABD.COL1, id );\n            //oCV.put(oAPABD.COL2, listaItens);\n            oCV.put(oAPABD.COL3, mesa);\n            oCV.put(oAPABD.COL4, cliente);\n\n            oSQLiteDB.insert(oAPABD.TABLE_NAME,null,oCV);\n\n            //Toast.makeText(this, &quot;Pedido adicionado com sucesso!&quot;, Toast.LENGTH_SHORT).show();\n        }else if((iReqCode == iRequest_Code2) &amp;&amp; (iResultCode == RESULT_OK)){ //EDITAR\n\n        }else if((iReqCode == iRequest_Code3) &amp;&amp; (iResultCode == RESULT_OK)){ //REMOVER\n            //Toast.makeText(this, &quot;Pedido removido com sucesso!&quot;, Toast.LENGTH_SHORT).show();\n        }else{\n            //Toast.makeText(this, &quot;Ups! Algo correu mal...&quot;, Toast.LENGTH_SHORT).show();\n        }\n    }\n</code></pre>\n<p>on my other activity, the one which I'm using for inserting and then it gives me the result back is defined like this:</p>\n<pre><code>public class activityPedido extends Activity {\n    AjudanteParaAbrirBD oAPABD;\n    SQLiteDatabase oSQLiteDB;\n    TextView tvAction;\n    EditText etInfo1,etInfo2,etInfo3,etCliente,etEmpregado,etPedido;\n    ImageButton bSaveNew,bSaveEdit;\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_pedido);\n\n        Intent iCameFromAct2 = getIntent();\n        String action = iCameFromAct2.getStringExtra(&quot;acao&quot;);\n        String currentTime = iCameFromAct2.getStringExtra(&quot;currentTime&quot;);\n        tvAction = (TextView)findViewById(R.id.tAction);\n        etInfo1 = (EditText)findViewById(R.id.etInfo1);\n        bSaveNew = (ImageButton)findViewById(R.id.bSaveNew);\n        bSaveEdit = (ImageButton)findViewById(R.id.bSaveEdit);\n        etInfo3 = (EditText)findViewById(R.id.etInfo3);\n        etPedido = (EditText)findViewById(R.id.etPedido);\n\n        if (action.equals(&quot;novoPedido&quot;)){\n            tvAction.setText(&quot;Novo Pedido&quot;);\n            etInfo3.setText(currentTime);\n            bSaveEdit.setVisibility(View.GONE);\n\n            etInfo1.setText(iCameFromAct2.getStringExtra(&quot;count&quot;));\n            etInfo1.setInputType(InputType.TYPE_NULL);\n        }\n        if (action.equals(&quot;editarPedido&quot;)){\n            tvAction.setText(&quot;Editar Pedido&quot;);\n            bSaveNew.setVisibility(View.GONE);\n\n        }\n        if (action.equals(&quot;removerPedido&quot;)){\n            tvAction.setText(&quot;Remover Pedido&quot;);\n        }\n\n    }//onCreate\n\n/*Using this to make the &quot;same button&quot; with 2 different onClick methods:\nsaveNew(save data when clicked ADD NEW in the previous activity)\nand saveEdit(bellow)\nwhich I haven't yet done anything to it and is the one I really needed help,\nbecause I can't figure out out to make it)*/\n    public void saveNew(View v){\n        etInfo1 = (EditText)findViewById(R.id.etInfo1);\n        etInfo2 = (EditText)findViewById(R.id.etInfo2);\n        etCliente = (EditText)findViewById(R.id.etCliente);\n        etPedido = (EditText)findViewById(R.id.etPedido);\n\n        Intent iResult = new Intent();\n        iResult.putExtra(&quot;id&quot;,etInfo1.getText().toString());\n        iResult.putExtra(&quot;mesa&quot;,etInfo2.getText().toString());\n        iResult.putExtra(&quot;cliente&quot;,etCliente.getText().toString());\n        iResult.putExtra(&quot;itens&quot;,etPedido.getText().toString());\n\n        setResult(RESULT_OK, iResult);\n        super.finish();\n    }\n\n    public void saveEdit(View v){\n        etInfo1 = (EditText)findViewById(R.id.etInfo1);\n        etInfo2 = (EditText)findViewById(R.id.etInfo2);\n        etCliente = (EditText)findViewById(R.id.etCliente);\n        etPedido = (EditText)findViewById(R.id.etPedido);\n\n\n        super.finish();\n    }\n    public void goBack(View v){\n        finish();\n    }\n}\n\n</code></pre>\n<p>Adding the error in LogCat as asked in the comments:</p>\n<pre><code>2019-11-20 14:31:10.355 14923-14923/pmd.di.ubi.pedidunchos_2 E/AndroidRuntime: FATAL EXCEPTION: main\n    Process: pmd.di.ubi.pedidunchos_2, PID: 14923\n    java.lang.IllegalStateException: Could not execute method for android:onClick\n        at android.view.View$DeclaredOnClickListener.onClick(View.java:5652)\n        at android.view.View.performClick(View.java:6615)\n        at android.view.View.performClickInternal(View.java:6592)\n        at android.view.View.access$3100(View.java:786)\n        at android.view.View$PerformClick.run(View.java:25951)\n        at android.os.Handler.handleCallback(Handler.java:873)\n        at android.os.Handler.dispatchMessage(Handler.java:99)\n        at android.os.Looper.loop(Looper.java:201)\n        at android.app.ActivityThread.main(ActivityThread.java:6815)\n        at java.lang.reflect.Method.invoke(Native Method)\n        at com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:547)\n        at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:873)\n     Caused by: java.lang.reflect.InvocationTargetException\n        at java.lang.reflect.Method.invoke(Native Method)\n        at android.view.View$DeclaredOnClickListener.onClick(View.java:5647)\n        at android.view.View.performClick(View.java:6615) \n        at android.view.View.performClickInternal(View.java:6592) \n        at android.view.View.access$3100(View.java:786) \n        at android.view.View$PerformClick.run(View.java:25951) \n        at android.os.Handler.handleCallback(Handler.java:873) \n        at android.os.Handler.dispatchMessage(Handler.java:99) \n        at android.os.Looper.loop(Looper.java:201) \n        at android.app.ActivityThread.main(ActivityThread.java:6815) \n        at java.lang.reflect.Method.invoke(Native Method) \n        at com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:547) \n        at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:873) \n     Caused by: java.lang.NullPointerException: Attempt to invoke virtual method 'android.view.ViewParent android.widget.LinearLayout.getParent()' on a null object reference\n        at pmd.di.ubi.pedidunchos_2.Main2Activity.deletePedido(Main2Activity.java:134)\n        at java.lang.reflect.Method.invoke(Native Method) \n        at android.view.View$DeclaredOnClickListener.onClick(View.java:5647) \n        at android.view.View.performClick(View.java:6615) \n        at android.view.View.performClickInternal(View.java:6592) \n        at android.view.View.access$3100(View.java:786) \n        at android.view.View$PerformClick.run(View.java:25951) \n        at android.os.Handler.handleCallback(Handler.java:873) \n        at android.os.Handler.dispatchMessage(Handler.java:99) \n        at android.os.Looper.loop(Looper.java:201) \n        at android.app.ActivityThread.main(ActivityThread.java:6815) \n        at java.lang.reflect.Method.invoke(Native Method) \n        at com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:547) \n        at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:873) \n2019-11-20 14:31:10.437 1371-1830/? E/InputDispatcher: channel '55262fd pmd.di.ubi.pedidunchos_2/pmd.di.ubi.pedidunchos_2.Main2Activity (server)' ~ Channel is unrecoverably broken and will be disposed!\n2019-11-20 14:31:10.450 1371-1830/? E/InputDispatcher: channel 'c67c606 pmd.di.ubi.pedidunchos_2/pmd.di.ubi.pedidunchos_2.MainActivity (server)' ~ \nChannel is unrecoverably broken and will be disposed!\n</code></pre>\n"},{"tags":["java","spring-boot","gradle","intellij-idea","jar"],"comments":[{"owner":{"account_id":17742303,"reputation":57,"user_id":12882317,"display_name":"RenuR"},"score":0,"creation_date":1645821919,"post_id":71271414,"comment_id":125980800,"body_markdown":"Exact error: Caused by: org.springframework.beans.factory.UnsatisfiedDependencyException","body":"Exact error: Caused by: org.springframework.beans.factory.UnsatisfiedDependencyExcep&zwnj;&#8203;tion"},{"owner":{"account_id":318670,"reputation":15681,"user_id":636009,"display_name":"David Conrad"},"score":1,"creation_date":1645822253,"post_id":71271414,"comment_id":125980874,"body_markdown":"Is the class that&#39;s in annotated with `@Configuration` and is it in your component scan? Add some logging to the method and check that it runs when your project starts.","body":"Is the class that&#39;s in annotated with <code>@Configuration</code> and is it in your component scan? Add some logging to the method and check that it runs when your project starts."}],"answers":[{"tags":[],"owner":{"account_id":15311739,"reputation":161,"user_id":11046842,"display_name":"Revanth Kovuri"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1646073718,"creation_date":1646073718,"answer_id":71299617,"question_id":71271414,"body_markdown":"Please make sure you added the external jar as a dependency in your Gradle.","title":"Null Pointer when trying to access an interface from an external jar","body":"<p>Please make sure you added the external jar as a dependency in your Gradle.</p>\n"}],"owner":{"account_id":17742303,"reputation":57,"user_id":12882317,"display_name":"RenuR"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":218,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":1,"score":0,"last_activity_date":1646073718,"creation_date":1645821095,"question_id":71271414,"body_markdown":"I have included an external jar in my springboot project running on gradle and I&#39;m trying to call a method from an interface from that jar. I tried to autowire it and it just throws BeanInstantiationException and I just can&#39;t create an object because it is an interface and won&#39;t let me. I tried to create a bean with the below code and still throws a Bean instantiation exception. I tried to use the class that is implementing this interface inside the jar and it still throws a bean instantiation exception. I tried to the component scan in my main class to scan this package of the jar but that will not let me run the service in postman, it throws a 404. Not sure what else I could try.\r\n\r\n \r\n\r\n     @Bean   public HandlerImplementation  HandlerImplementationService(){      \r\n              return new HandlerImplementation();\r\n     }","title":"Null Pointer when trying to access an interface from an external jar","body":"<p>I have included an external jar in my springboot project running on gradle and I'm trying to call a method from an interface from that jar. I tried to autowire it and it just throws BeanInstantiationException and I just can't create an object because it is an interface and won't let me. I tried to create a bean with the below code and still throws a Bean instantiation exception. I tried to use the class that is implementing this interface inside the jar and it still throws a bean instantiation exception. I tried to the component scan in my main class to scan this package of the jar but that will not let me run the service in postman, it throws a 404. Not sure what else I could try.</p>\n<pre><code> @Bean   public HandlerImplementation  HandlerImplementationService(){      \n          return new HandlerImplementation();\n }\n</code></pre>\n"},{"tags":["java","spring","ssl","resttemplate","sslhandshakeexception"],"comments":[{"owner":{"account_id":471659,"reputation":3578,"user_id":879592,"accept_rate":84,"display_name":"Yan"},"score":0,"creation_date":1645589360,"post_id":71222498,"comment_id":125909423,"body_markdown":"is it possible Postman has SSL validation turned off?  If you access the site in any browser is the certificate trusted? or possibly run`openssl s_client -connect external-host.com:443` to see the certificate presented. you can also start the app with `java  -Djavax.net.debug=all` to see what&#39;s happening https://docs.oracle.com/javase/7/docs/technotes/guides/security/jsse/ReadDebug.html.  https://access.redhat.com/solutions/973783","body":"is it possible Postman has SSL validation turned off?  If you access the site in any browser is the certificate trusted? or possibly run<code>openssl s_client -connect external-host.com:443</code> to see the certificate presented. you can also start the app with <code>java  -Djavax.net.debug=all</code> to see what&#39;s happening <a href=\"https://docs.oracle.com/javase/7/docs/technotes/guides/security/jsse/ReadDebug.html\" rel=\"nofollow noreferrer\">docs.oracle.com/javase/7/docs/technotes/guides/security/jsse&zwnj;&#8203;/&hellip;</a>.  <a href=\"https://access.redhat.com/solutions/973783\" rel=\"nofollow noreferrer\">access.redhat.com/solutions/973783</a>"},{"owner":{"account_id":9847991,"reputation":56906,"user_id":7294900,"accept_rate":94,"display_name":"Ori Marko"},"score":0,"creation_date":1645598831,"post_id":71222498,"comment_id":125911224,"body_markdown":"@Yan postman ssl validation is on, updating question with debug all output","body":"@Yan postman ssl validation is on, updating question with debug all output"},{"owner":{"account_id":3421244,"reputation":35863,"user_id":2868801,"display_name":"dave_thompson_085"},"score":0,"creation_date":1645780494,"post_id":71222498,"comment_id":125966448,"body_markdown":"(@Yan: _received_ handshake_failure is _never_ due to mistrust of the server cert) OP: Many things _can_ cause handshake_failure and cannot be distinguished from the alert itself. The best approach to check server log(s) to see what _it_ says is the problem. If you can&#39;t do that, get a network trace of the successful postman handshake -- or use `openssl s_client -connect host:443` (as suggested) plus if below 1.1.1 `-servername host` and if that works add `-debug` -- and compare _every significant field_ of the working case to your non-working case.","body":"(@Yan: <i>received</i> handshake_failure is <i>never</i> due to mistrust of the server cert) OP: Many things <i>can</i> cause handshake_failure and cannot be distinguished from the alert itself. The best approach to check server log(s) to see what <i>it</i> says is the problem. If you can&#39;t do that, get a network trace of the successful postman handshake -- or use <code>openssl s_client -connect host:443</code> (as suggested) plus if below 1.1.1 <code>-servername host</code> and if that works add <code>-debug</code> -- and compare <i>every significant field</i> of the working case to your non-working case."},{"owner":{"account_id":17592368,"reputation":13891,"user_id":12763954,"display_name":"Olivier"},"score":0,"creation_date":1645952675,"post_id":71222498,"comment_id":126000935,"body_markdown":"You could also run openssl with a specific cipher (as explained [here](https://security.stackexchange.com/questions/93143/how-to-pass-cipher-list-to-openssl-s-client)) to check if the server accepts any of your Java cipher suites.","body":"You could also run openssl with a specific cipher (as explained <a href=\"https://security.stackexchange.com/questions/93143/how-to-pass-cipher-list-to-openssl-s-client\">here</a>) to check if the server accepts any of your Java cipher suites."}],"answers":[{"tags":[],"owner":{"account_id":19092422,"reputation":51311,"user_id":13942448,"display_name":"jccampanero"},"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1646073194,"creation_date":1645973927,"answer_id":71285821,"question_id":71222498,"body_markdown":"Please, be aware that the cipher suites described in your debug output doesn&#39;t show the cipher suite that was actually used by `openssl`, `ECDHE-RSA-AES256-GCM-SHA384`. In fact, they don&#39;t include any cipher suite that requires AES 256. It may not be of relevance, but it may be a symptom of any misconfiguration, and can explain why the handshake is failing. As indicated in the [Oracle documentation](https://docs.oracle.com/javase/8/docs/technotes/guides/security/SunProviders.html#SupportedCipherSuites) when describing Java 8 supported cipher suites:\r\n\r\n&gt; Cipher suites that use AES_256 require installation of the JCE \r\n&gt; Unlimited Strength Jurisdiction Policy Files.\r\n\r\nAs a consequence, please, be sure you installed and properly configured the [JCE Unlimited Strength Jurisdiction Policy Files](https://www.oracle.com/java/technologies/javase-jce-all-downloads.html).\r\n\r\nAs indicated by @dave_thompson_085 in his excellent comment, only Oracle Java 8 below 8u161 requires adding the unlimited policy, as stated in [Appendix C](https://docs.oracle.com/javase/8/docs/technotes/guides/security/crypto/CryptoSpec.html#AppC) of the aforementioned Oracle documentation.\r\n\r\nThe JCE Unlimited Strength Jurisdiction Policy Files are bundled into the JDK since [JDK 8u151](https://www.oracle.com/java/technologies/javase/8u151-relnotes.html#JDK-8157561), but the `unlimited` policy was not defined as [the default one](https://www.oracle.com/java/technologies/javase/8u161-relnotes.html#JDK-8170157) since JDK 8u161.\r\n\r\nIn JDK 8u151 or 8u152, as stated in [one](https://www.oracle.com/java/technologies/javase/8u151-relnotes.html#JDK-8157561) of the previous cited links, and explained as well by @dave_thompson_085 - thank you very much again, in order to make the `unlimited` version of the JCE the one that should be used, you need to define the system property `crypto.policy`. From the docs:\r\n\r\n&gt; This release introduces a new feature whereby the JCE jurisdiction \r\n&gt; policy files used by the JDK can be controlled via a new Security \r\n&gt; property. In older releases, JCE jurisdiction files had to be \r\n&gt; downloaded and installed separately to allow unlimited cryptography \r\n&gt; to be used by the JDK. The download and install steps are no longer \r\n&gt; necessary. To enable unlimited cryptography, one can use the new \r\n&gt; `crypto.policy` Security property. If the new Security property \r\n&gt; (`crypto.policy`) is set in the `java.security` file, or has been \r\n&gt; set dynamically by using the `Security.setProperty()` call before \r\n&gt; the JCE framework has been initialized, that setting will be \r\n&gt; honored. By default, the property will be undefined. If the \r\n&gt; property is undefined and the legacy JCE jurisdiction files don&#39;t \r\n&gt; exist in the legacy `lib/security` directory, then the default \r\n&gt; cryptographic level will remain at &#39;limited&#39;. To configure the JDK \r\n&gt; to use unlimited cryptography, set the `crypto.policy` to a value \r\n&gt; of &#39;unlimited&#39;. See the notes in the `java.security` file shipping \r\n&gt; with this release for more information. \r\n\r\nThe issue is not present in OpenJDK.\r\n\r\nAs an alternative solution, as suggested in [this related SO question](https://stackoverflow.com/questions/31971499/ecdhe-cipher-suites-not-supported-on-openjdk-8-installed-on-ec2-linux-machine), probably using an alternate provider like BouncyCastle could be of help as well.","title":"SSLHandshakeException only when using RestTemplate","body":"<p>Please, be aware that the cipher suites described in your debug output doesn't show the cipher suite that was actually used by <code>openssl</code>, <code>ECDHE-RSA-AES256-GCM-SHA384</code>. In fact, they don't include any cipher suite that requires AES 256. It may not be of relevance, but it may be a symptom of any misconfiguration, and can explain why the handshake is failing. As indicated in the <a href=\"https://docs.oracle.com/javase/8/docs/technotes/guides/security/SunProviders.html#SupportedCipherSuites\" rel=\"nofollow noreferrer\">Oracle documentation</a> when describing Java 8 supported cipher suites:</p>\n<blockquote>\n<p>Cipher suites that use AES_256 require installation of the JCE\nUnlimited Strength Jurisdiction Policy Files.</p>\n</blockquote>\n<p>As a consequence, please, be sure you installed and properly configured the <a href=\"https://www.oracle.com/java/technologies/javase-jce-all-downloads.html\" rel=\"nofollow noreferrer\">JCE Unlimited Strength Jurisdiction Policy Files</a>.</p>\n<p>As indicated by @dave_thompson_085 in his excellent comment, only Oracle Java 8 below 8u161 requires adding the unlimited policy, as stated in <a href=\"https://docs.oracle.com/javase/8/docs/technotes/guides/security/crypto/CryptoSpec.html#AppC\" rel=\"nofollow noreferrer\">Appendix C</a> of the aforementioned Oracle documentation.</p>\n<p>The JCE Unlimited Strength Jurisdiction Policy Files are bundled into the JDK since <a href=\"https://www.oracle.com/java/technologies/javase/8u151-relnotes.html#JDK-8157561\" rel=\"nofollow noreferrer\">JDK 8u151</a>, but the <code>unlimited</code> policy was not defined as <a href=\"https://www.oracle.com/java/technologies/javase/8u161-relnotes.html#JDK-8170157\" rel=\"nofollow noreferrer\">the default one</a> since JDK 8u161.</p>\n<p>In JDK 8u151 or 8u152, as stated in <a href=\"https://www.oracle.com/java/technologies/javase/8u151-relnotes.html#JDK-8157561\" rel=\"nofollow noreferrer\">one</a> of the previous cited links, and explained as well by @dave_thompson_085 - thank you very much again, in order to make the <code>unlimited</code> version of the JCE the one that should be used, you need to define the system property <code>crypto.policy</code>. From the docs:</p>\n<blockquote>\n<p>This release introduces a new feature whereby the JCE jurisdiction\npolicy files used by the JDK can be controlled via a new Security\nproperty. In older releases, JCE jurisdiction files had to be\ndownloaded and installed separately to allow unlimited cryptography\nto be used by the JDK. The download and install steps are no longer\nnecessary. To enable unlimited cryptography, one can use the new\n<code>crypto.policy</code> Security property. If the new Security property\n(<code>crypto.policy</code>) is set in the <code>java.security</code> file, or has been\nset dynamically by using the <code>Security.setProperty()</code> call before\nthe JCE framework has been initialized, that setting will be\nhonored. By default, the property will be undefined. If the\nproperty is undefined and the legacy JCE jurisdiction files don't\nexist in the legacy <code>lib/security</code> directory, then the default\ncryptographic level will remain at 'limited'. To configure the JDK\nto use unlimited cryptography, set the <code>crypto.policy</code> to a value\nof 'unlimited'. See the notes in the <code>java.security</code> file shipping\nwith this release for more information.</p>\n</blockquote>\n<p>The issue is not present in OpenJDK.</p>\n<p>As an alternative solution, as suggested in <a href=\"https://stackoverflow.com/questions/31971499/ecdhe-cipher-suites-not-supported-on-openjdk-8-installed-on-ec2-linux-machine\">this related SO question</a>, probably using an alternate provider like BouncyCastle could be of help as well.</p>\n"}],"owner":{"account_id":9847991,"reputation":56906,"user_id":7294900,"accept_rate":94,"display_name":"Ori Marko"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2572,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":71285821,"answer_count":1,"score":1,"last_activity_date":1646073194,"creation_date":1645537900,"question_id":71222498,"body_markdown":"I&#39;m using Java 8, trying to post https third party (other subdomain works), works with postman, but using `RestTemplate` throws `SSLHandshakeException`\r\n\r\n    new RestTemplate().postForEntity(&quot;https://external-host.com&quot; ,new HttpEntity&lt;&gt;(null, new HttpHeaders()), String.class);\r\n\r\nI have JCE Unlimited jars in jdk1.8.0_151\\jre\\lib\\security\\policy\\unlimited folder and I have bouncy castle bcpkix-jdk15on and bcprov-jdk15on version 1.55\r\n\r\nException:\r\n\r\n    org.springframework.web.client.ResourceAccessException: I/O error on POST request for &quot;https://external-host.com&quot;: Received fatal alert: handshake_failure; nested exception is javax.net.ssl.SSLHandshakeException: Received fatal alert: handshake_failure\r\n    \tat org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:785)\r\n    \tat org.springframework.web.client.RestTemplate.execute(RestTemplate.java:711)\r\n    \tat org.springframework.web.client.RestTemplate.postForEntity(RestTemplate.java:468)\r\n    ...\r\n\tat org.apache.http.conn.ssl.SSLConnectionSocketFactory.connectSocket(SSLConnectionSocketFactory.java:353)\r\n    SSLConnectionSocketFactory.java:353\r\n    \tat org.apache.http.impl.conn.DefaultHttpClientConnectionOperator.connect(DefaultHttpClientConnectionOperator.java:141)\r\n    DefaultHttpClientConnectionOperator.java:141\r\n    \tat org.apache.http.impl.conn.PoolingHttpClientConnectionManager.connect(PoolingHttpClientConnectionManager.java:353)\r\n    PoolingHttpClientConnectionManager.java:353\r\n    \tat org.apache.http.impl.execchain.MainClientExec.establishRoute(MainClientExec.java:380)\r\n    MainClientExec.java:380\r\n    \tat org.apache.http.impl.execchain.MainClientExec.execute(MainClientExec.java:236)\r\n    MainClientExec.java:236\r\n    \tat org.apache.http.impl.execchain.ProtocolExec.execute(ProtocolExec.java:184)\r\n    ProtocolExec.java:184\r\n    \tat org.apache.http.impl.execchain.RetryExec.execute(RetryExec.java:88)\r\n    RetryExec.java:88\r\n    \tat org.apache.http.impl.execchain.RedirectExec.execute(RedirectExec.java:110)\r\n    RedirectExec.java:110\r\n    \tat org.apache.http.impl.client.InternalHttpClient.doExecute(InternalHttpClient.java:184)\r\n    InternalHttpClient.java:184\r\n    \tat org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:82)\r\n    CloseableHttpClient.java:82\r\n    \tat org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:55)\r\n    CloseableHttpClient.java:55\r\n    \tat org.springframework.http.client.HttpComponentsClientHttpRequest.executeInternal(HttpComponentsClientHttpRequest.java:87)\r\n    HttpComponentsClientHttpRequest.java:87\r\n    \tat org.springframework.http.client.AbstractBufferingClientHttpRequest.executeInternal(AbstractBufferingClientHttpRequest.java:48)\r\n    AbstractBufferingClientHttpRequest.java:48\r\n    \tat org.springframework.http.client.AbstractClientHttpRequest.execute(AbstractClientHttpRequest.java:66)\r\n    AbstractClientHttpRequest.java:66\r\n    \tat org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:776)\r\n    RestTemplate.java:776\r\n    \t... 42 more\r\n\r\n\r\nSame output using other [solutions][1] configuring RestTemplate as:\r\n\r\n&gt;     TrustStrategy acceptingTrustStrategy = (x509Certificates, s) -&gt; true;\r\n&gt;     SSLContext sslContext = org.apache.http.ssl.SSLContexts.custom().loadTrustMaterial(null, acceptingTrustStrategy).build();\r\n&gt;     SSLConnectionSocketFactory csf = new SSLConnectionSocketFactory(sslContext, new NoopHostnameVerifier());\r\n\r\n\r\nSSL log:\r\n\r\n    Allow unsafe renegotiation: false\r\n    Allow legacy hello messages: true\r\n    Is initial handshake: true\r\n    Is secure renegotiation: false\r\n    Ignoring unsupported cipher suite: TLS_ECDHE_ECDSA_WITH_AES_128_CBC_SHA256 for TLSv1\r\n    Ignoring unsupported cipher suite: TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256 for TLSv1\r\n    Ignoring unsupported cipher suite: TLS_RSA_WITH_AES_128_CBC_SHA256 for TLSv1\r\n    Ignoring unsupported cipher suite: TLS_ECDH_ECDSA_WITH_AES_128_CBC_SHA256 for TLSv1\r\n    Ignoring unsupported cipher suite: TLS_ECDH_RSA_WITH_AES_128_CBC_SHA256 for TLSv1\r\n    Ignoring unsupported cipher suite: TLS_DHE_RSA_WITH_AES_128_CBC_SHA256 for TLSv1\r\n    Ignoring unsupported cipher suite: TLS_DHE_DSS_WITH_AES_128_CBC_SHA256 for TLSv1\r\n    Ignoring unsupported cipher suite: TLS_ECDHE_ECDSA_WITH_AES_128_CBC_SHA256 for TLSv1.1\r\n    Ignoring unsupported cipher suite: TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256 for TLSv1.1\r\n    Ignoring unsupported cipher suite: TLS_RSA_WITH_AES_128_CBC_SHA256 for TLSv1.1\r\n    Ignoring unsupported cipher suite: TLS_ECDH_ECDSA_WITH_AES_128_CBC_SHA256 for TLSv1.1\r\n    Ignoring unsupported cipher suite: TLS_ECDH_RSA_WITH_AES_128_CBC_SHA256 for TLSv1.1\r\n    Ignoring unsupported cipher suite: TLS_DHE_RSA_WITH_AES_128_CBC_SHA256 for TLSv1.1\r\n    Ignoring unsupported cipher suite: TLS_DHE_DSS_WITH_AES_128_CBC_SHA256 for TLSv1.1\r\n    %% No cached client session\r\n    *** ClientHello, TLSv1.2\r\n    RandomCookie:  GMT: 1645533027 bytes = { 229, 64, 215, 234, 240, 91, 46, 176, 144, 108, 104, 176, 6, 192, 147, 200, 69, 213, 196, 106, 125, 235, 5, 167, 51, 215, 144, 174 }\r\n    Session ID:  {}\r\n    Cipher Suites: [TLS_ECDHE_ECDSA_WITH_AES_128_CBC_SHA256, TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256, TLS_RSA_WITH_AES_128_CBC_SHA256, TLS_ECDH_ECDSA_WITH_AES_128_CBC_SHA256, TLS_ECDH_RSA_WITH_AES_128_CBC_SHA256, TLS_DHE_RSA_WITH_AES_128_CBC_SHA256, TLS_DHE_DSS_WITH_AES_128_CBC_SHA256, TLS_ECDHE_ECDSA_WITH_AES_128_CBC_SHA, TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA, TLS_RSA_WITH_AES_128_CBC_SHA, TLS_ECDH_ECDSA_WITH_AES_128_CBC_SHA, TLS_ECDH_RSA_WITH_AES_128_CBC_SHA, TLS_DHE_RSA_WITH_AES_128_CBC_SHA, TLS_DHE_DSS_WITH_AES_128_CBC_SHA, TLS_ECDHE_ECDSA_WITH_AES_128_GCM_SHA256, TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256, TLS_RSA_WITH_AES_128_GCM_SHA256, TLS_ECDH_ECDSA_WITH_AES_128_GCM_SHA256, TLS_ECDH_RSA_WITH_AES_128_GCM_SHA256, TLS_DHE_RSA_WITH_AES_128_GCM_SHA256, TLS_DHE_DSS_WITH_AES_128_GCM_SHA256, TLS_ECDHE_ECDSA_WITH_3DES_EDE_CBC_SHA, TLS_ECDHE_RSA_WITH_3DES_EDE_CBC_SHA, SSL_RSA_WITH_3DES_EDE_CBC_SHA, TLS_ECDH_ECDSA_WITH_3DES_EDE_CBC_SHA, TLS_ECDH_RSA_WITH_3DES_EDE_CBC_SHA, SSL_DHE_RSA_WITH_3DES_EDE_CBC_SHA, SSL_DHE_DSS_WITH_3DES_EDE_CBC_SHA, TLS_EMPTY_RENEGOTIATION_INFO_SCSV]\r\n    Compression Methods:  { 0 }\r\n    Extension elliptic_curves, curve names: {secp256r1, secp384r1, secp521r1, sect283k1, sect283r1, sect409k1, sect409r1, sect571k1, sect571r1, secp256k1}\r\n    Extension ec_point_formats, formats: [uncompressed]\r\n    Extension signature_algorithms, signature_algorithms: SHA512withECDSA, SHA512withRSA, SHA384withECDSA, SHA384withRSA, SHA256withECDSA, SHA256withRSA, SHA256withDSA, SHA224withECDSA, SHA224withRSA, SHA224withDSA, SHA1withECDSA, SHA1withRSA, SHA1withDSA\r\n    Extension server_name, server_name: [type=host_name (0), value=external-host.com]\r\n    ***\r\n    ajp-nio-8009-exec-32, WRITE: TLSv1.2 Handshake, length = 211\r\n    ajp-nio-8009-exec-32, READ: TLSv1.2 Alert, length = 2\r\n    ajp-nio-8009-exec-32, RECV TLSv1.2 ALERT:  fatal, handshake_failure\r\n    ajp-nio-8009-exec-32, called closeSocket()\r\n    ajp-nio-8009-exec-32, handling exception: javax.net.ssl.SSLHandshakeException: Received fatal alert: handshake_failure\r\n    08:42:43.535 [ajp-nio-8009-exec-32] TRACE o.s.web.servlet.DispatcherServlet - Failed to complete request\r\n\r\n**EDIT** I download `cer` file from site, added to Java&#39;s cacerts and created p12 file, and tried using the following code, but still handshake exception\r\n\r\n    KeyStore clientStore = KeyStore.getInstance(&quot;PKCS12&quot;);\r\n    \t    clientStore.load(new FileInputStream(utils.getStoreProperty(&quot;./external.p12&quot;)),\r\n    \t\t\t\t&quot;MYPASS&quot;.toCharArray());\r\n    \r\n    \t    SSLContextBuilder sslContextBuilder = new SSLContextBuilder();\r\n    \t    sslContextBuilder.useProtocol(&quot;TLSv1.2&quot;);\r\n    \t    sslContextBuilder.loadKeyMaterial(clientStore, &quot;MYPASS&quot;.toCharArray());\r\n    \t    TrustStrategy acceptingTrustStrategy = (X509Certificate[] chain, String authType) -&gt; true;\r\n    \t    sslContextBuilder.loadTrustMaterial(null, acceptingTrustStrategy);\r\n    \t\tSSLConnectionSocketFactory sslConnectionSocketFactory = new SSLConnectionSocketFactory(sslContextBuilder.build());\r\n    \t    CloseableHttpClient httpClient = HttpClients.custom()\r\n    \t            .setSSLSocketFactory(sslConnectionSocketFactory)\r\n    \t            .build();\r\n    \t\t\r\nThe following output for `openssl s_client -connect host:443` as suggested\r\n@dave_thompson_085 , @yan\r\n \r\n\r\n    WARNING: can&#39;t open config file: /usr/local/ssl/openssl.cnf\r\n    CONNECTED(000001A4)\r\n    depth=3 C = US, O = &quot;The Go Daddy Group, Inc.&quot;, OU = Go Daddy Class 2 Certification Authority\r\n    verify error:num=19:self signed certificate in certificate chain\r\n    ---\r\n    ---\r\n    No client certificate CA names sent\r\n    Peer signing digest: SHA256\r\n    Server Temp Key: ECDH, P-256, 256 bits\r\n    ---\r\n    SSL handshake has read 5814 bytes and written 433 bytes\r\n    ---\r\n    New, TLSv1/SSLv3, Cipher is ECDHE-RSA-AES256-GCM-SHA384\r\n    Server public key is 2048 bit\r\n    Secure Renegotiation IS supported\r\n    Compression: NONE\r\n    Expansion: NONE\r\n    No ALPN negotiated\r\n    SSL-Session:\r\n        Protocol  : TLSv1.2\r\n        Cipher    : ECDHE-RSA-AES256-GCM-SHA384\r\n        Session-ID: A4966A2268EE5CCFA25DEE734DC980D01DF40A4763A4DF3CD19ADA49FF9AD90E\r\n        Session-ID-ctx:\r\n        Master-Key: 58BE6AF39E3DB3CBF3166A286550F2333028E66A9CC59AE886EAA777BAEA82A21D318E89746B97B1BFE0E3E7BF60F5E1\r\n        Key-Arg   : None\r\n        PSK identity: None\r\n        PSK identity hint: None\r\n        SRP username: None\r\n        TLS session ticket lifetime hint: 300 (seconds)\r\n        TLS session ticket:\r\n        0000 - 25 c2 24 26 c2 8f d1 6d-32 5e 2f f6 40 95 af d6   %.$&amp;...m2^/.@...\r\n        0010 - 02 de 28 3e 34 ae 47 96-2c 6a 87 2e 61 e6 fd a2   ..(&gt;4.G.,j..a...\r\n        0020 - 75 3b 3c 3b b2 ee 3c 16-ba e5 49 1c 18 f6 a1 16   u;&lt;;..&lt;...I.....\r\n        0030 - e3 4e 7b 6f 48 5d e7 e3-03 df c5 86 45 81 12 5b   .N{oH]......E..[\r\n        0040 - 4e d7 27 da f5 cd ed 18-6d 41 00 55 7a 8e 62 54   N.&#39;.....mA.Uz.bT\r\n        0050 - 31 75 90 3c aa 2a f9 2b-51 c2 c0 10 5d ca 02 6f   1u.&lt;.*.+Q...]..o\r\n        0060 - 51 0e e0 62 6d 94 12 bd-85 4b 01 88 dc 5d 90 ad   Q..bm....K...]..\r\n        0070 - 30 53 8c 09 a7 01 d9 d7-1b 89 ec 77 35 93 9f ae   0S.........w5...\r\n        0080 - b1 00 c7 ba 1c ea 84 77-36 bf 58 59 7a 78 44 f2   .......w6.XYzxD.\r\n        0090 - 77 55 f4 41 2b dd 3c 54-02 38 ae 37 ec 8a c6 10   wU.A+.&lt;T.8.7....\r\n        00a0 - 6e d5 23 0a 05 5c 19 9f-02 4d 9a 0a 1c 9a be 2e   n.#..\\...M......\r\n    \r\n        Start Time: 1645945411\r\n        Timeout   : 300 (sec)\r\n        Verify return code: 19 (self signed certificate in certificate chain)\r\n\r\n**EDIT** I followed @taleb [answer][2] , but same handshake exception remains\r\n\r\n&gt;Add the bcprov-&lt;verion&gt;.jar to /usr/lib/jvm/jre/lib/ext\r\n\r\n&gt;Edit /usr/lib/jvm/jre/lib/security/java.security adding the following line to the list of providers:\r\n\r\n&gt;     security.provider.6=org.bouncycastle.jce.provider.BouncyCastleProvider\r\n&gt; (I added it as the 6th entry but you can add higher in the order if you prefer)\r\n\r\nRestarted my application\r\n    \r\n[1]:https://stackoverflow.com/questions/4072585/disabling-ssl-certificate-validation-in-spring-resttemplate\r\n\r\n\r\n[2]:https://stackoverflow.com/questions/31971499/ecdhe-cipher-suites-not-supported-on-openjdk-8-installed-on-ec2-linux-machine\r\n\r\n","title":"SSLHandshakeException only when using RestTemplate","body":"<p>I'm using Java 8, trying to post https third party (other subdomain works), works with postman, but using <code>RestTemplate</code> throws <code>SSLHandshakeException</code></p>\n<pre><code>new RestTemplate().postForEntity(&quot;https://external-host.com&quot; ,new HttpEntity&lt;&gt;(null, new HttpHeaders()), String.class);\n</code></pre>\n<p>I have JCE Unlimited jars in jdk1.8.0_151\\jre\\lib\\security\\policy\\unlimited folder and I have bouncy castle bcpkix-jdk15on and bcprov-jdk15on version 1.55</p>\n<p>Exception:</p>\n<pre><code>org.springframework.web.client.ResourceAccessException: I/O error on POST request for &quot;https://external-host.com&quot;: Received fatal alert: handshake_failure; nested exception is javax.net.ssl.SSLHandshakeException: Received fatal alert: handshake_failure\n    at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:785)\n    at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:711)\n    at org.springframework.web.client.RestTemplate.postForEntity(RestTemplate.java:468)\n...\nat org.apache.http.conn.ssl.SSLConnectionSocketFactory.connectSocket(SSLConnectionSocketFactory.java:353)\nSSLConnectionSocketFactory.java:353\n    at org.apache.http.impl.conn.DefaultHttpClientConnectionOperator.connect(DefaultHttpClientConnectionOperator.java:141)\nDefaultHttpClientConnectionOperator.java:141\n    at org.apache.http.impl.conn.PoolingHttpClientConnectionManager.connect(PoolingHttpClientConnectionManager.java:353)\nPoolingHttpClientConnectionManager.java:353\n    at org.apache.http.impl.execchain.MainClientExec.establishRoute(MainClientExec.java:380)\nMainClientExec.java:380\n    at org.apache.http.impl.execchain.MainClientExec.execute(MainClientExec.java:236)\nMainClientExec.java:236\n    at org.apache.http.impl.execchain.ProtocolExec.execute(ProtocolExec.java:184)\nProtocolExec.java:184\n    at org.apache.http.impl.execchain.RetryExec.execute(RetryExec.java:88)\nRetryExec.java:88\n    at org.apache.http.impl.execchain.RedirectExec.execute(RedirectExec.java:110)\nRedirectExec.java:110\n    at org.apache.http.impl.client.InternalHttpClient.doExecute(InternalHttpClient.java:184)\nInternalHttpClient.java:184\n    at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:82)\nCloseableHttpClient.java:82\n    at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:55)\nCloseableHttpClient.java:55\n    at org.springframework.http.client.HttpComponentsClientHttpRequest.executeInternal(HttpComponentsClientHttpRequest.java:87)\nHttpComponentsClientHttpRequest.java:87\n    at org.springframework.http.client.AbstractBufferingClientHttpRequest.executeInternal(AbstractBufferingClientHttpRequest.java:48)\nAbstractBufferingClientHttpRequest.java:48\n    at org.springframework.http.client.AbstractClientHttpRequest.execute(AbstractClientHttpRequest.java:66)\nAbstractClientHttpRequest.java:66\n    at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:776)\nRestTemplate.java:776\n    ... 42 more\n</code></pre>\n<p>Same output using other <a href=\"https://stackoverflow.com/questions/4072585/disabling-ssl-certificate-validation-in-spring-resttemplate\">solutions</a> configuring RestTemplate as:</p>\n<blockquote>\n<pre><code>TrustStrategy acceptingTrustStrategy = (x509Certificates, s) -&gt; true;\nSSLContext sslContext = org.apache.http.ssl.SSLContexts.custom().loadTrustMaterial(null, acceptingTrustStrategy).build();\nSSLConnectionSocketFactory csf = new SSLConnectionSocketFactory(sslContext, new NoopHostnameVerifier());\n</code></pre>\n</blockquote>\n<p>SSL log:</p>\n<pre><code>Allow unsafe renegotiation: false\nAllow legacy hello messages: true\nIs initial handshake: true\nIs secure renegotiation: false\nIgnoring unsupported cipher suite: TLS_ECDHE_ECDSA_WITH_AES_128_CBC_SHA256 for TLSv1\nIgnoring unsupported cipher suite: TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256 for TLSv1\nIgnoring unsupported cipher suite: TLS_RSA_WITH_AES_128_CBC_SHA256 for TLSv1\nIgnoring unsupported cipher suite: TLS_ECDH_ECDSA_WITH_AES_128_CBC_SHA256 for TLSv1\nIgnoring unsupported cipher suite: TLS_ECDH_RSA_WITH_AES_128_CBC_SHA256 for TLSv1\nIgnoring unsupported cipher suite: TLS_DHE_RSA_WITH_AES_128_CBC_SHA256 for TLSv1\nIgnoring unsupported cipher suite: TLS_DHE_DSS_WITH_AES_128_CBC_SHA256 for TLSv1\nIgnoring unsupported cipher suite: TLS_ECDHE_ECDSA_WITH_AES_128_CBC_SHA256 for TLSv1.1\nIgnoring unsupported cipher suite: TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256 for TLSv1.1\nIgnoring unsupported cipher suite: TLS_RSA_WITH_AES_128_CBC_SHA256 for TLSv1.1\nIgnoring unsupported cipher suite: TLS_ECDH_ECDSA_WITH_AES_128_CBC_SHA256 for TLSv1.1\nIgnoring unsupported cipher suite: TLS_ECDH_RSA_WITH_AES_128_CBC_SHA256 for TLSv1.1\nIgnoring unsupported cipher suite: TLS_DHE_RSA_WITH_AES_128_CBC_SHA256 for TLSv1.1\nIgnoring unsupported cipher suite: TLS_DHE_DSS_WITH_AES_128_CBC_SHA256 for TLSv1.1\n%% No cached client session\n*** ClientHello, TLSv1.2\nRandomCookie:  GMT: 1645533027 bytes = { 229, 64, 215, 234, 240, 91, 46, 176, 144, 108, 104, 176, 6, 192, 147, 200, 69, 213, 196, 106, 125, 235, 5, 167, 51, 215, 144, 174 }\nSession ID:  {}\nCipher Suites: [TLS_ECDHE_ECDSA_WITH_AES_128_CBC_SHA256, TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256, TLS_RSA_WITH_AES_128_CBC_SHA256, TLS_ECDH_ECDSA_WITH_AES_128_CBC_SHA256, TLS_ECDH_RSA_WITH_AES_128_CBC_SHA256, TLS_DHE_RSA_WITH_AES_128_CBC_SHA256, TLS_DHE_DSS_WITH_AES_128_CBC_SHA256, TLS_ECDHE_ECDSA_WITH_AES_128_CBC_SHA, TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA, TLS_RSA_WITH_AES_128_CBC_SHA, TLS_ECDH_ECDSA_WITH_AES_128_CBC_SHA, TLS_ECDH_RSA_WITH_AES_128_CBC_SHA, TLS_DHE_RSA_WITH_AES_128_CBC_SHA, TLS_DHE_DSS_WITH_AES_128_CBC_SHA, TLS_ECDHE_ECDSA_WITH_AES_128_GCM_SHA256, TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256, TLS_RSA_WITH_AES_128_GCM_SHA256, TLS_ECDH_ECDSA_WITH_AES_128_GCM_SHA256, TLS_ECDH_RSA_WITH_AES_128_GCM_SHA256, TLS_DHE_RSA_WITH_AES_128_GCM_SHA256, TLS_DHE_DSS_WITH_AES_128_GCM_SHA256, TLS_ECDHE_ECDSA_WITH_3DES_EDE_CBC_SHA, TLS_ECDHE_RSA_WITH_3DES_EDE_CBC_SHA, SSL_RSA_WITH_3DES_EDE_CBC_SHA, TLS_ECDH_ECDSA_WITH_3DES_EDE_CBC_SHA, TLS_ECDH_RSA_WITH_3DES_EDE_CBC_SHA, SSL_DHE_RSA_WITH_3DES_EDE_CBC_SHA, SSL_DHE_DSS_WITH_3DES_EDE_CBC_SHA, TLS_EMPTY_RENEGOTIATION_INFO_SCSV]\nCompression Methods:  { 0 }\nExtension elliptic_curves, curve names: {secp256r1, secp384r1, secp521r1, sect283k1, sect283r1, sect409k1, sect409r1, sect571k1, sect571r1, secp256k1}\nExtension ec_point_formats, formats: [uncompressed]\nExtension signature_algorithms, signature_algorithms: SHA512withECDSA, SHA512withRSA, SHA384withECDSA, SHA384withRSA, SHA256withECDSA, SHA256withRSA, SHA256withDSA, SHA224withECDSA, SHA224withRSA, SHA224withDSA, SHA1withECDSA, SHA1withRSA, SHA1withDSA\nExtension server_name, server_name: [type=host_name (0), value=external-host.com]\n***\najp-nio-8009-exec-32, WRITE: TLSv1.2 Handshake, length = 211\najp-nio-8009-exec-32, READ: TLSv1.2 Alert, length = 2\najp-nio-8009-exec-32, RECV TLSv1.2 ALERT:  fatal, handshake_failure\najp-nio-8009-exec-32, called closeSocket()\najp-nio-8009-exec-32, handling exception: javax.net.ssl.SSLHandshakeException: Received fatal alert: handshake_failure\n08:42:43.535 [ajp-nio-8009-exec-32] TRACE o.s.web.servlet.DispatcherServlet - Failed to complete request\n</code></pre>\n<p><strong>EDIT</strong> I download <code>cer</code> file from site, added to Java's cacerts and created p12 file, and tried using the following code, but still handshake exception</p>\n<pre><code>KeyStore clientStore = KeyStore.getInstance(&quot;PKCS12&quot;);\n        clientStore.load(new FileInputStream(utils.getStoreProperty(&quot;./external.p12&quot;)),\n                &quot;MYPASS&quot;.toCharArray());\n\n        SSLContextBuilder sslContextBuilder = new SSLContextBuilder();\n        sslContextBuilder.useProtocol(&quot;TLSv1.2&quot;);\n        sslContextBuilder.loadKeyMaterial(clientStore, &quot;MYPASS&quot;.toCharArray());\n        TrustStrategy acceptingTrustStrategy = (X509Certificate[] chain, String authType) -&gt; true;\n        sslContextBuilder.loadTrustMaterial(null, acceptingTrustStrategy);\n        SSLConnectionSocketFactory sslConnectionSocketFactory = new SSLConnectionSocketFactory(sslContextBuilder.build());\n        CloseableHttpClient httpClient = HttpClients.custom()\n                .setSSLSocketFactory(sslConnectionSocketFactory)\n                .build();\n        \n</code></pre>\n<p>The following output for <code>openssl s_client -connect host:443</code> as suggested\n@dave_thompson_085 , @yan</p>\n<pre><code>WARNING: can't open config file: /usr/local/ssl/openssl.cnf\nCONNECTED(000001A4)\ndepth=3 C = US, O = &quot;The Go Daddy Group, Inc.&quot;, OU = Go Daddy Class 2 Certification Authority\nverify error:num=19:self signed certificate in certificate chain\n---\n---\nNo client certificate CA names sent\nPeer signing digest: SHA256\nServer Temp Key: ECDH, P-256, 256 bits\n---\nSSL handshake has read 5814 bytes and written 433 bytes\n---\nNew, TLSv1/SSLv3, Cipher is ECDHE-RSA-AES256-GCM-SHA384\nServer public key is 2048 bit\nSecure Renegotiation IS supported\nCompression: NONE\nExpansion: NONE\nNo ALPN negotiated\nSSL-Session:\n    Protocol  : TLSv1.2\n    Cipher    : ECDHE-RSA-AES256-GCM-SHA384\n    Session-ID: A4966A2268EE5CCFA25DEE734DC980D01DF40A4763A4DF3CD19ADA49FF9AD90E\n    Session-ID-ctx:\n    Master-Key: 58BE6AF39E3DB3CBF3166A286550F2333028E66A9CC59AE886EAA777BAEA82A21D318E89746B97B1BFE0E3E7BF60F5E1\n    Key-Arg   : None\n    PSK identity: None\n    PSK identity hint: None\n    SRP username: None\n    TLS session ticket lifetime hint: 300 (seconds)\n    TLS session ticket:\n    0000 - 25 c2 24 26 c2 8f d1 6d-32 5e 2f f6 40 95 af d6   %.$&amp;...m2^/.@...\n    0010 - 02 de 28 3e 34 ae 47 96-2c 6a 87 2e 61 e6 fd a2   ..(&gt;4.G.,j..a...\n    0020 - 75 3b 3c 3b b2 ee 3c 16-ba e5 49 1c 18 f6 a1 16   u;&lt;;..&lt;...I.....\n    0030 - e3 4e 7b 6f 48 5d e7 e3-03 df c5 86 45 81 12 5b   .N{oH]......E..[\n    0040 - 4e d7 27 da f5 cd ed 18-6d 41 00 55 7a 8e 62 54   N.'.....mA.Uz.bT\n    0050 - 31 75 90 3c aa 2a f9 2b-51 c2 c0 10 5d ca 02 6f   1u.&lt;.*.+Q...]..o\n    0060 - 51 0e e0 62 6d 94 12 bd-85 4b 01 88 dc 5d 90 ad   Q..bm....K...]..\n    0070 - 30 53 8c 09 a7 01 d9 d7-1b 89 ec 77 35 93 9f ae   0S.........w5...\n    0080 - b1 00 c7 ba 1c ea 84 77-36 bf 58 59 7a 78 44 f2   .......w6.XYzxD.\n    0090 - 77 55 f4 41 2b dd 3c 54-02 38 ae 37 ec 8a c6 10   wU.A+.&lt;T.8.7....\n    00a0 - 6e d5 23 0a 05 5c 19 9f-02 4d 9a 0a 1c 9a be 2e   n.#..\\...M......\n\n    Start Time: 1645945411\n    Timeout   : 300 (sec)\n    Verify return code: 19 (self signed certificate in certificate chain)\n</code></pre>\n<p><strong>EDIT</strong> I followed @taleb <a href=\"https://stackoverflow.com/questions/31971499/ecdhe-cipher-suites-not-supported-on-openjdk-8-installed-on-ec2-linux-machine\">answer</a> , but same handshake exception remains</p>\n<blockquote>\n<p>Add the bcprov-.jar to /usr/lib/jvm/jre/lib/ext</p>\n</blockquote>\n<blockquote>\n<p>Edit /usr/lib/jvm/jre/lib/security/java.security adding the following line to the list of providers:</p>\n</blockquote>\n<blockquote>\n<pre><code>security.provider.6=org.bouncycastle.jce.provider.BouncyCastleProvider\n</code></pre>\n<p>(I added it as the 6th entry but you can add higher in the order if you prefer)</p>\n</blockquote>\n<p>Restarted my application</p>\n"},{"tags":["javascript","java","html","jsp","struts"],"comments":[{"owner":{"account_id":20907575,"reputation":5943,"user_id":15359157,"display_name":"code"},"score":0,"creation_date":1646070697,"post_id":71299007,"comment_id":126028909,"body_markdown":"That I know of, `document.depositNotifInfoForm` has long been deprecated and removed.","body":"That I know of, <code>document.depositNotifInfoForm</code> has long been deprecated and removed."},{"owner":{"account_id":20907575,"reputation":5943,"user_id":15359157,"display_name":"code"},"score":0,"creation_date":1646070786,"post_id":71299007,"comment_id":126028931,"body_markdown":"Open the browser console (`Ctrl`+`Shift`+`J`) and see if there&#39;s any error. If there is kindly edit your question with the pasted error.","body":"Open the browser console (<code>Ctrl</code>+<code>Shift</code>+<code>J</code>) and see if there&#39;s any error. If there is kindly edit your question with the pasted error."},{"owner":{"account_id":24408198,"reputation":1,"user_id":18336078,"display_name":"Varun Tiwari"},"score":0,"creation_date":1646072680,"post_id":71299007,"comment_id":126029553,"body_markdown":"depositNotifInfo.recip:1034 Uncaught TypeError: Cannot read properties of null (reading &#39;value&#39;)\n    at validateFields (depositNotifInfo.recip:1034:64)\n    at depositNotifSubmit (depositNotifInfo.recip:980:9)\n    at HTMLAnchorElement.onclick (depositNotifInfo.recip:963:147)\nvalidateFields @ depositNotifInfo.recip:1034\ndepositNotifSubmit @ depositNotifInfo.recip:980\nonclick @ depositNotifInfo.recip:963\n\n\nFind the screen-shot for clear idea in the edited question","body":"depositNotifInfo.recip:1034 Uncaught TypeError: Cannot read properties of null (reading &#39;value&#39;)     at validateFields (depositNotifInfo.recip:1034:64)     at depositNotifSubmit (depositNotifInfo.recip:980:9)     at HTMLAnchorElement.onclick (depositNotifInfo.recip:963:147) validateFields @ depositNotifInfo.recip:1034 depositNotifSubmit @ depositNotifInfo.recip:980 onclick @ depositNotifInfo.recip:963   Find the screen-shot for clear idea in the edited question"},{"owner":{"account_id":20907575,"reputation":5943,"user_id":15359157,"display_name":"code"},"score":0,"creation_date":1646072711,"post_id":71299007,"comment_id":126029563,"body_markdown":"Could you edit your question with the error?","body":"Could you edit your question with the error?"},{"owner":{"account_id":24408198,"reputation":1,"user_id":18336078,"display_name":"Varun Tiwari"},"score":0,"creation_date":1646073200,"post_id":71299007,"comment_id":126029687,"body_markdown":"Added the console error for your reference in the edited question above","body":"Added the console error for your reference in the edited question above"},{"owner":{"account_id":24408198,"reputation":1,"user_id":18336078,"display_name":"Varun Tiwari"},"score":0,"creation_date":1646073733,"post_id":71299007,"comment_id":126029862,"body_markdown":"Could you suggest how can this problem be solved &amp; scenario be done /alternative of document.*  ?","body":"Could you suggest how can this problem be solved &amp; scenario be done /alternative of document.*  ?"},{"owner":{"account_id":20907575,"reputation":5943,"user_id":15359157,"display_name":"code"},"score":0,"creation_date":1646074895,"post_id":71299007,"comment_id":126030195,"body_markdown":"I&#39;m not sure what functionality you wish to achieve. Can you explain what you want?","body":"I&#39;m not sure what functionality you wish to achieve. Can you explain what you want?"},{"owner":{"account_id":24408198,"reputation":1,"user_id":18336078,"display_name":"Varun Tiwari"},"score":0,"creation_date":1646112804,"post_id":71299007,"comment_id":126037656,"body_markdown":"Expected result (working fine on Internet Explorer) :- After hitting the SUBMIT button it should prompt up a confirm box &amp; if &#39;Yes&#39; is selected, then update the changes that is written in the code not provided here. (Code from submit button &amp; the function called on hitting the submit button is provided above). Actual result :- Working fine in Internet Explorer, showing the confirm pp-up &amp; pressed &#39;Yes&#39; updating the values. But on Chrome &amp; FireFox, after hitting submit, nor confirm pop-up is showing nor the values are getting updated. So want to achieve the same functionality on chrome &amp; fireox","body":"Expected result (working fine on Internet Explorer) :- After hitting the SUBMIT button it should prompt up a confirm box &amp; if &#39;Yes&#39; is selected, then update the changes that is written in the code not provided here. (Code from submit button &amp; the function called on hitting the submit button is provided above). Actual result :- Working fine in Internet Explorer, showing the confirm pp-up &amp; pressed &#39;Yes&#39; updating the values. But on Chrome &amp; FireFox, after hitting submit, nor confirm pop-up is showing nor the values are getting updated. So want to achieve the same functionality on chrome &amp; fireox"},{"owner":{"account_id":24408198,"reputation":1,"user_id":18336078,"display_name":"Varun Tiwari"},"score":0,"creation_date":1646113190,"post_id":71299007,"comment_id":126037726,"body_markdown":"As mentioned that ‘document.depositNotifInfo’ is deprecated long back, what exactly do you mean by that. Have ‘document.*’ is deprecated? Because if you see the code snippet provided above, depositNotifInfoFrom is the name of my &lt;form-bean&gt; specified in my strut.XML file","body":"As mentioned that ‘document.depositNotifInfo’ is deprecated long back, what exactly do you mean by that. Have ‘document.*’ is deprecated? Because if you see the code snippet provided above, depositNotifInfoFrom is the name of my &lt;form-bean&gt; specified in my strut.XML file"},{"owner":{"account_id":20907575,"reputation":5943,"user_id":15359157,"display_name":"code"},"score":0,"creation_date":1646113626,"post_id":71299007,"comment_id":126037829,"body_markdown":"Sorry, my misunderstanding. So it was manually defined not by the browser?","body":"Sorry, my misunderstanding. So it was manually defined not by the browser?"},{"owner":{"account_id":24408198,"reputation":1,"user_id":18336078,"display_name":"Varun Tiwari"},"score":0,"creation_date":1646147600,"post_id":71299007,"comment_id":126048576,"body_markdown":"Yes.. it is the name of my bean defined in strut.xml.. The main culprit i can find is the confirm() function, which when clicked &#39;ok&#39; returns true &amp; submit the required form. when selected &#39;cancel&#39; returns false and set the isSubmit as false.\nThe main problem is that it is working fine on internet explorer. i.e., the confirm pop-up is shown and accordingly performing the task. But on chrome the confirm pop-up is not is shown thus, it seems falling &amp; setting the isSubmit as false..\nCould you suggest any alternative of confirm()? Which true or false like confirm()","body":"Yes.. it is the name of my bean defined in strut.xml.. The main culprit i can find is the confirm() function, which when clicked &#39;ok&#39; returns true &amp; submit the required form. when selected &#39;cancel&#39; returns false and set the isSubmit as false. The main problem is that it is working fine on internet explorer. i.e., the confirm pop-up is shown and accordingly performing the task. But on chrome the confirm pop-up is not is shown thus, it seems falling &amp; setting the isSubmit as false.. Could you suggest any alternative of confirm()? Which true or false like confirm()"}],"owner":{"account_id":24408198,"reputation":1,"user_id":18336078,"display_name":"Varun Tiwari"},"comment_count":11,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":339,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1646073022,"creation_date":1646070498,"question_id":71299007,"body_markdown":"In a legacy java struts application, this code in the jsp page is working fine on Internet Explorer but not working in the Chrome &amp; FireFox.\r\n\r\n    &lt;a id=&quot;alertSubmit&quot; class=&quot;button&quot; href=&quot;#&quot; onkeypress=&quot;&quot; onclick=&quot;javascript:this.blur();depositNotifSubmit();&quot;&gt;\r\n    &lt;span&gt;\r\n    &lt;bean-el:message bundle=&quot;${terms}&quot; key=&quot;label.submit&quot;/&gt;\r\n    &lt;/span&gt;\r\n    \r\n    &lt;script language=&quot;javascript&quot; type=&quot;text/javascript&quot;&gt;\r\n    \r\n    var isSubmit = false;\r\n    function depositNotifSubmit()\r\n    {\r\n      if (validateFields()) {\r\n    if(!isSubmit){\r\n       isSubmit = true;\r\n       doConfirmSubmitAction(document.depositNotifInfoForm, &#39;depositNotifInput.recip&#39;,\r\n    &#39;&lt;bean-el:message bundle=&quot;${terms}&quot; key=&quot;popup.message.continue&quot; /&gt;&#39;);\r\n        }\r\n    }\r\n    }\r\n    \r\n    function doConfirmSubmitAction(formObj, action, message)\r\n    {\r\n      //if (formObj == null) formObj = document.generalSubmit;\r\n      if (action != null &amp;&amp; action != &quot;&quot;)\r\n        formObj.action = action;\r\n      if (confirm(message)){\r\n     formObj.submit();\r\n      }else{\r\n     isSubmit = false;\r\n      }\r\n    } \r\n\r\nExpected result (working fine on Internet Explorer) :- After hitting the SUBMIT button it should prompt up a confirm box &amp;  if &#39;Yes&#39; is selected, then update the changes that is written in the code not provided here.\r\n\r\nActual result :- Working fine in Internet Explorer, showing the confirm pp-up &amp; pressed &#39;Yes&#39; updating the values. But on Chrome &amp; FireFox, after hitting submit, nor confirm pop-up is showing nor the values are getting updated.\r\n\r\nAny help to get this code/scenario  working  on Chrome and Firefox would be appreciated. Find the actual screen-shots for the reference.\r\n\r\n\r\nAfter getting the suggestion that document.depositNotifInfoForm has been deprecated &amp; to check the browser console for the error. Attaching the screen shot of the console error for the reference.\r\n\r\nConsole error :- \r\n\r\n    depositNotifInfo.recip:1034 Uncaught TypeError: Cannot read properties of null (reading &#39;value&#39;)\r\n        at validateFields (depositNotifInfo.recip:1034:64)\r\n        at depositNotifSubmit (depositNotifInfo.recip:980:9)\r\n        at HTMLAnchorElement.onclick (depositNotifInfo.recip:963:147)\r\n    validateFields @ depositNotifInfo.recip:1034\r\n    depositNotifSubmit @ depositNotifInfo.recip:980\r\n    onclick @ depositNotifInfo.recip:963\r\n\r\n[Browser console error screen-shot][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/g3mWL.jpg","title":"confirm() function is not working in Chrome &amp; FireFox || document.depositNotifInfoForm deprecated","body":"<p>In a legacy java struts application, this code in the jsp page is working fine on Internet Explorer but not working in the Chrome &amp; FireFox.</p>\n<pre><code>&lt;a id=&quot;alertSubmit&quot; class=&quot;button&quot; href=&quot;#&quot; onkeypress=&quot;&quot; onclick=&quot;javascript:this.blur();depositNotifSubmit();&quot;&gt;\n&lt;span&gt;\n&lt;bean-el:message bundle=&quot;${terms}&quot; key=&quot;label.submit&quot;/&gt;\n&lt;/span&gt;\n\n&lt;script language=&quot;javascript&quot; type=&quot;text/javascript&quot;&gt;\n\nvar isSubmit = false;\nfunction depositNotifSubmit()\n{\n  if (validateFields()) {\nif(!isSubmit){\n   isSubmit = true;\n   doConfirmSubmitAction(document.depositNotifInfoForm, 'depositNotifInput.recip',\n'&lt;bean-el:message bundle=&quot;${terms}&quot; key=&quot;popup.message.continue&quot; /&gt;');\n    }\n}\n}\n\nfunction doConfirmSubmitAction(formObj, action, message)\n{\n  //if (formObj == null) formObj = document.generalSubmit;\n  if (action != null &amp;&amp; action != &quot;&quot;)\n    formObj.action = action;\n  if (confirm(message)){\n formObj.submit();\n  }else{\n isSubmit = false;\n  }\n} \n</code></pre>\n<p>Expected result (working fine on Internet Explorer) :- After hitting the SUBMIT button it should prompt up a confirm box &amp;  if 'Yes' is selected, then update the changes that is written in the code not provided here.</p>\n<p>Actual result :- Working fine in Internet Explorer, showing the confirm pp-up &amp; pressed 'Yes' updating the values. But on Chrome &amp; FireFox, after hitting submit, nor confirm pop-up is showing nor the values are getting updated.</p>\n<p>Any help to get this code/scenario  working  on Chrome and Firefox would be appreciated. Find the actual screen-shots for the reference.</p>\n<p>After getting the suggestion that document.depositNotifInfoForm has been deprecated &amp; to check the browser console for the error. Attaching the screen shot of the console error for the reference.</p>\n<p>Console error :-</p>\n<pre><code>depositNotifInfo.recip:1034 Uncaught TypeError: Cannot read properties of null (reading 'value')\n    at validateFields (depositNotifInfo.recip:1034:64)\n    at depositNotifSubmit (depositNotifInfo.recip:980:9)\n    at HTMLAnchorElement.onclick (depositNotifInfo.recip:963:147)\nvalidateFields @ depositNotifInfo.recip:1034\ndepositNotifSubmit @ depositNotifInfo.recip:980\nonclick @ depositNotifInfo.recip:963\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/g3mWL.jpg\" rel=\"nofollow noreferrer\">Browser console error screen-shot</a></p>\n"},{"tags":["java","android","canvas","view"],"comments":[{"owner":{"account_id":14584795,"reputation":2961,"user_id":10534012,"display_name":"Darkman"},"score":0,"creation_date":1646077776,"post_id":71299432,"comment_id":126031068,"body_markdown":"What do the log say when you call `canvas.invalidate()` after `canvas.setColor(Color.BLACK)`?","body":"What do the log say when you call <code>canvas.invalidate()</code> after <code>canvas.setColor(Color.BLACK)</code>?"},{"owner":{"account_id":24408646,"reputation":1,"user_id":18336452,"display_name":"Fusera"},"score":0,"creation_date":1646089910,"post_id":71299432,"comment_id":126034233,"body_markdown":"Hi, it still has the same problem as before. Inside the `setColor()` metod has the correct value, but  `onDraw()` metod still output 0.","body":"Hi, it still has the same problem as before. Inside the <code>setColor()</code> metod has the correct value, but  <code>onDraw()</code> metod still output 0."},{"owner":{"account_id":14535713,"reputation":401,"user_id":10499158,"display_name":"EAS"},"score":0,"creation_date":1646112741,"post_id":71299432,"comment_id":126037643,"body_markdown":"@Fusera you are making mistake with canvas, if you have a canvas in XML, then why should you create a new canvas and setColor to on it.","body":"@Fusera you are making mistake with canvas, if you have a canvas in XML, then why should you create a new canvas and setColor to on it."},{"owner":{"account_id":24408646,"reputation":1,"user_id":18336452,"display_name":"Fusera"},"score":0,"creation_date":1646121279,"post_id":71299432,"comment_id":126039445,"body_markdown":"@EAS As you said, I tried to use the XML canvas and it works.  This problem has trouble me for quite a long time, thank you for helping me to figure out.","body":"@EAS As you said, I tried to use the XML canvas and it works.  This problem has trouble me for quite a long time, thank you for helping me to figure out."}],"owner":{"account_id":24408646,"reputation":1,"user_id":18336452,"display_name":"Fusera"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":42,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1646072545,"creation_date":1646072545,"question_id":71299432,"body_markdown":"I am tring to pass value from Main Activity to Custom View, I created a `setColor` metod in the CustomView. Inside the `setColor` metod it output the right value, but the outside the value is not changed, method doesn&#39;t effect the variable. Please help me with this problem.\r\n\r\nMainActivity create CustomView `canvas` and send data by `canvas.setColor(Color.BLACK)`\r\n```\r\npublic class MainActivity extends AppCompatActivity {\r\n    com.example.myapplication.MyCanvas myCanvas;\r\n    View test;\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_main);\r\n        //test = findViewById(R.id.canvas);\r\n        MyCanvas canvas = new MyCanvas(this, null);\r\n        canvas.setColor(Color.BLACK);\r\n    }\r\n}\r\n```\r\nCustomView `canvas`\r\n```\r\npublic class MyCanvas extends View {\r\n   public int test;\r\n   public MyCanvas(Context context, AttributeSet attrs) {\r\n      super(context, attrs);\r\n   }\r\n   public void setColor(int color) {\r\n      this.test = color;\r\n      Log.e(&quot;test&quot;, &quot;setColor &quot; + test);\r\n   }\r\n   protected void onDraw(Canvas canvas) {\r\n      super.onDraw(canvas);\r\n      Log.e(&quot;test&quot;, &quot;Color &quot; + test);\r\n   }\r\n}\r\n```\r\nOutput of `Log.e`\r\n```\r\n2022-02-28 20:06:40.714 29704-29704/com.example.myapplication E/test: setColor -16777216\r\n2022-02-28 20:06:42.314 29704-29704/com.example.myapplication E/test: Color 0\r\n```\r\nxml file\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n&lt;RelativeLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n    android:layout_width=&quot;match_parent&quot;\r\n    android:layout_height=&quot;match_parent&quot;\r\n    xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\r\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;\r\n    xmlns:custom=&quot;http://schemas.android.com/apk/res-auto&quot;\r\n    tools:ignore=&quot;MissingClass&quot;&gt;\r\n\r\n    &lt;com.example.myapplication.MyCanvas\r\n        android:id=&quot;@+id/canvas&quot;\r\n        android:layout_width=&quot;wrap_content&quot;\r\n        android:layout_height=&quot;500dp&quot; /&gt;\r\n\r\n    &lt;Button\r\n        android:id=&quot;@+id/button&quot;\r\n        android:layout_width=&quot;wrap_content&quot;\r\n        android:layout_alignParentEnd=&quot;true&quot;\r\n        android:layout_centerHorizontal=&quot;true&quot;\r\n        android:layout_marginTop=&quot;501dp&quot;\r\n        android:layout_marginEnd=&quot;158dp&quot;\r\n        android:text=&quot;Button&quot;\r\n        android:layout_height=&quot;50dp&quot;/&gt;\r\n&lt;/RelativeLayout&gt;\r\n```\r\n","title":"Android Java Custom view can not keep value passed from activity","body":"<p>I am tring to pass value from Main Activity to Custom View, I created a <code>setColor</code> metod in the CustomView. Inside the <code>setColor</code> metod it output the right value, but the outside the value is not changed, method doesn't effect the variable. Please help me with this problem.</p>\n<p>MainActivity create CustomView <code>canvas</code> and send data by <code>canvas.setColor(Color.BLACK)</code></p>\n<pre><code>public class MainActivity extends AppCompatActivity {\n    com.example.myapplication.MyCanvas myCanvas;\n    View test;\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_main);\n        //test = findViewById(R.id.canvas);\n        MyCanvas canvas = new MyCanvas(this, null);\n        canvas.setColor(Color.BLACK);\n    }\n}\n</code></pre>\n<p>CustomView <code>canvas</code></p>\n<pre><code>public class MyCanvas extends View {\n   public int test;\n   public MyCanvas(Context context, AttributeSet attrs) {\n      super(context, attrs);\n   }\n   public void setColor(int color) {\n      this.test = color;\n      Log.e(&quot;test&quot;, &quot;setColor &quot; + test);\n   }\n   protected void onDraw(Canvas canvas) {\n      super.onDraw(canvas);\n      Log.e(&quot;test&quot;, &quot;Color &quot; + test);\n   }\n}\n</code></pre>\n<p>Output of <code>Log.e</code></p>\n<pre><code>2022-02-28 20:06:40.714 29704-29704/com.example.myapplication E/test: setColor -16777216\n2022-02-28 20:06:42.314 29704-29704/com.example.myapplication E/test: Color 0\n</code></pre>\n<p>xml file</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n&lt;RelativeLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n    android:layout_width=&quot;match_parent&quot;\n    android:layout_height=&quot;match_parent&quot;\n    xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;\n    xmlns:custom=&quot;http://schemas.android.com/apk/res-auto&quot;\n    tools:ignore=&quot;MissingClass&quot;&gt;\n\n    &lt;com.example.myapplication.MyCanvas\n        android:id=&quot;@+id/canvas&quot;\n        android:layout_width=&quot;wrap_content&quot;\n        android:layout_height=&quot;500dp&quot; /&gt;\n\n    &lt;Button\n        android:id=&quot;@+id/button&quot;\n        android:layout_width=&quot;wrap_content&quot;\n        android:layout_alignParentEnd=&quot;true&quot;\n        android:layout_centerHorizontal=&quot;true&quot;\n        android:layout_marginTop=&quot;501dp&quot;\n        android:layout_marginEnd=&quot;158dp&quot;\n        android:text=&quot;Button&quot;\n        android:layout_height=&quot;50dp&quot;/&gt;\n&lt;/RelativeLayout&gt;\n</code></pre>\n"},{"tags":["java","spring-boot","hibernate","jpa","spring-data-jpa"],"owner":{"account_id":14456124,"reputation":11,"user_id":10442291,"display_name":"BlackShadow"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":479,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1646072512,"creation_date":1646072512,"question_id":71299423,"body_markdown":"I want to set a particular entity column value manually. For example, let&#39;s say billid has value &quot;bid123&quot; in the database. Firstname is &quot;ABC&quot; and lastname is &quot;XYZ&quot;.\r\nI want to set the billid value as billid+&quot;_&quot;+firstname+&quot;_&quot;+lastname i.e. &quot;bid123_ABC_XYZ&quot;.\r\n\r\n```\r\n@Getter\r\n@Setter\r\n@ToString\r\n@Entity\r\npublic class PreviousInvoiceSearchResult {\r\n\r\n  @Id\r\n  @Column(name = &quot;summaryid&quot;)\r\n  private Long summaryId;\r\n\r\n  @Column(name = &quot;custID&quot;)\r\n  private String custId;\r\n\r\n  @Column(name = &quot;firstName&quot;)\r\n  private String firstName;\r\n\r\n  @Column(name = &quot;lastName&quot;)\r\n  private String lastName;\r\n\r\n  @Column(name = &quot;billID&quot;)\r\n  private int billId;\r\n}\r\n\r\n```\r\nI am able to do this by iterating through Entity object in service implementation. But i have so many columns like billid. i got to know about AttributeConverter in JPA but i am not able to implement it using that.\r\n\r\nIs there a way to do this using AttributeConverter of JPA or by any other method which doesn’t involve iterating through Entity object in service implementation?","title":"Convert entity column values on the basis of other entity column in spring boot using AttributeConverter","body":"<p>I want to set a particular entity column value manually. For example, let's say billid has value &quot;bid123&quot; in the database. Firstname is &quot;ABC&quot; and lastname is &quot;XYZ&quot;.\nI want to set the billid value as billid+&quot;<em>&quot;+firstname+&quot;</em>&quot;+lastname i.e. &quot;bid123_ABC_XYZ&quot;.</p>\n<pre><code>@Getter\n@Setter\n@ToString\n@Entity\npublic class PreviousInvoiceSearchResult {\n\n  @Id\n  @Column(name = &quot;summaryid&quot;)\n  private Long summaryId;\n\n  @Column(name = &quot;custID&quot;)\n  private String custId;\n\n  @Column(name = &quot;firstName&quot;)\n  private String firstName;\n\n  @Column(name = &quot;lastName&quot;)\n  private String lastName;\n\n  @Column(name = &quot;billID&quot;)\n  private int billId;\n}\n\n</code></pre>\n<p>I am able to do this by iterating through Entity object in service implementation. But i have so many columns like billid. i got to know about AttributeConverter in JPA but i am not able to implement it using that.</p>\n<p>Is there a way to do this using AttributeConverter of JPA or by any other method which doesn’t involve iterating through Entity object in service implementation?</p>\n"},{"tags":["java","hibernate-validator"],"answers":[{"tags":[],"owner":{"account_id":2671248,"reputation":11,"user_id":2308620,"display_name":"CWils"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1646071424,"creation_date":1646071424,"answer_id":71299200,"question_id":66063058,"body_markdown":"I agree that the annotation defining the validator does feel backwards. While not ideal, I&#39;ve been able to work around this by separating my custom ConstraintValidator into an interface and implementation.\r\n\r\nExample:\r\n\r\nIn **api** module define constraint and interface validator\r\n```\r\n@Constraint(validatedBy = MyConstraintValidator.class)\r\npublic @interface MyConstraint\r\n{\r\n}\r\n```\r\n```\r\npublic interface MyConstraintValidator\r\n    extends ConstraintValidator&lt;MyConstraint, String&gt;\r\n{\r\n}\r\n```\r\nIn your **service** module define the implementation\r\n```\r\npublic class MyConstraintValidatorImpl implements MyConstraintValidator\r\n{\r\n  private FooService foo;\r\n\r\n  @Override\r\n  public boolean isValid( String value, ConstraintValidatorContext ctx)\r\n  {\r\n    // Implement your constraint logic\r\n  }\r\n}\r\n```","title":"Separate validation annotation and it&#39;s validator in separate modules","body":"<p>I agree that the annotation defining the validator does feel backwards. While not ideal, I've been able to work around this by separating my custom ConstraintValidator into an interface and implementation.</p>\n<p>Example:</p>\n<p>In <strong>api</strong> module define constraint and interface validator</p>\n<pre><code>@Constraint(validatedBy = MyConstraintValidator.class)\npublic @interface MyConstraint\n{\n}\n</code></pre>\n<pre><code>public interface MyConstraintValidator\n    extends ConstraintValidator&lt;MyConstraint, String&gt;\n{\n}\n</code></pre>\n<p>In your <strong>service</strong> module define the implementation</p>\n<pre><code>public class MyConstraintValidatorImpl implements MyConstraintValidator\n{\n  private FooService foo;\n\n  @Override\n  public boolean isValid( String value, ConstraintValidatorContext ctx)\n  {\n    // Implement your constraint logic\n  }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1666859,"reputation":2605,"user_id":1534084,"accept_rate":100,"display_name":"Martin Mucha"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1646072414,"creation_date":1646072414,"answer_id":71299409,"question_id":66063058,"body_markdown":"I we need to separate interface class and validator implementation into separate modules, it&#39;s possible. And even in a way, which I said in original question, that should be used. In API module you declare validation for example as:\r\n\r\n    @Target({ METHOD, FIELD, ANNOTATION_TYPE, CONSTRUCTOR, PARAMETER, TYPE_USE})\r\n    @Retention(RUNTIME)\r\n    @Documented\r\n    @Constraint(validatedBy = {})\r\n    @SupportedValidationTarget(ValidationTarget.ANNOTATED_ELEMENT)\r\n    @ReportAsSingleViolation\r\n    public @interface AnyUuid {\r\n        //...\r\n\r\nnotice `validatedBy = {}`. The validator implementation looks like:\r\n\r\n    public class AnyUuidValidator implements ConstraintValidator&lt;AnyUuid, Object&gt; {\r\n    //...\r\n\r\nand pairing can be setup using service loader(see javadoc if you don&#39;t know how that works). Put into file `META-INF/services/javax.validation.ConstraintValidator` FQDN of `AnyUuidValidator` shown above. And all other custom validators. And that should be it.\r\n\r\nThere is a bug I found with this. If I&#39;m not mistaken. If you have DTO you cannot change (~annotate with constraints) and still want to validate them via bean validation, you can register validation definitions via xml file. If you are doing so and use service loader for pairing definition and implementation of custom validators, there is probably some bug and your custom validators won&#39;t be found. So verify this scenario before relying on service loader. But maybe I&#39;m wrong, for me it was feasible to drop this validation trivially so I did to save some time and could ignore this.","title":"Separate validation annotation and it&#39;s validator in separate modules","body":"<p>I we need to separate interface class and validator implementation into separate modules, it's possible. And even in a way, which I said in original question, that should be used. In API module you declare validation for example as:</p>\n<pre><code>@Target({ METHOD, FIELD, ANNOTATION_TYPE, CONSTRUCTOR, PARAMETER, TYPE_USE})\n@Retention(RUNTIME)\n@Documented\n@Constraint(validatedBy = {})\n@SupportedValidationTarget(ValidationTarget.ANNOTATED_ELEMENT)\n@ReportAsSingleViolation\npublic @interface AnyUuid {\n    //...\n</code></pre>\n<p>notice <code>validatedBy = {}</code>. The validator implementation looks like:</p>\n<pre><code>public class AnyUuidValidator implements ConstraintValidator&lt;AnyUuid, Object&gt; {\n//...\n</code></pre>\n<p>and pairing can be setup using service loader(see javadoc if you don't know how that works). Put into file <code>META-INF/services/javax.validation.ConstraintValidator</code> FQDN of <code>AnyUuidValidator</code> shown above. And all other custom validators. And that should be it.</p>\n<p>There is a bug I found with this. If I'm not mistaken. If you have DTO you cannot change (~annotate with constraints) and still want to validate them via bean validation, you can register validation definitions via xml file. If you are doing so and use service loader for pairing definition and implementation of custom validators, there is probably some bug and your custom validators won't be found. So verify this scenario before relying on service loader. But maybe I'm wrong, for me it was feasible to drop this validation trivially so I did to save some time and could ignore this.</p>\n"}],"owner":{"account_id":1666859,"reputation":2605,"user_id":1534084,"accept_rate":100,"display_name":"Martin Mucha"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":544,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":2,"score":3,"last_activity_date":1646072414,"creation_date":1612527049,"question_id":66063058,"body_markdown":"Situation: you have module with DTO objects used in your API, so that other project(s) can reuse then when sending requests. These DTO classes does have bean-validation annotations in them. And you would like to use your custom validations to validate DTO &quot;arriving&quot; via requests. The sender typically does not validate outgoing data, IIUC, and might not be interested in importing validators along with annotations.\r\n\r\nProblem(?): bean-validation is defined in a way, where annotation defines who implements it (which is incorrect and it should be otherwise around imo), with possibility to specify empty array as annotation validator (seems like hack) and then pairing is done via manual hashmap manipulations instead of stuff like service loader etc.\r\n\r\nHow do you do this? \r\n\r\n- Would you split annotation and it&#39;s validator in separate modules?\r\n- How would you bind them together? I think it should be possible to use `{}` as validator and then use `org.hibernate.validator.internal.metadata.core.ConstraintHelper#putValidatorDescriptors` to bind them together, but I did not test it yet + maybe there is better way...\r\n","title":"Separate validation annotation and it&#39;s validator in separate modules","body":"<p>Situation: you have module with DTO objects used in your API, so that other project(s) can reuse then when sending requests. These DTO classes does have bean-validation annotations in them. And you would like to use your custom validations to validate DTO &quot;arriving&quot; via requests. The sender typically does not validate outgoing data, IIUC, and might not be interested in importing validators along with annotations.</p>\n<p>Problem(?): bean-validation is defined in a way, where annotation defines who implements it (which is incorrect and it should be otherwise around imo), with possibility to specify empty array as annotation validator (seems like hack) and then pairing is done via manual hashmap manipulations instead of stuff like service loader etc.</p>\n<p>How do you do this?</p>\n<ul>\n<li>Would you split annotation and it's validator in separate modules?</li>\n<li>How would you bind them together? I think it should be possible to use <code>{}</code> as validator and then use <code>org.hibernate.validator.internal.metadata.core.ConstraintHelper#putValidatorDescriptors</code> to bind them together, but I did not test it yet + maybe there is better way...</li>\n</ul>\n"},{"tags":["java","spring","junit","spring-async"],"comments":[{"owner":{"account_id":1684248,"reputation":108,"user_id":1547838,"display_name":"Honwhy Wang"},"score":1,"creation_date":1574181183,"post_id":42438862,"comment_id":104136062,"body_markdown":"the nice solution [How do I write..](https://stackoverflow.com/q/20807232/923560) you mention above is a practicable one, expose *asyncMethod* result type as *Future&lt;Void&gt;*, and return **new  AsyncResult&lt;&gt;(null);** at the last of *asyncMethod*; and in the test method, get the future from *asyncMethod* and wait for it, as like ```Future&lt;Void&gt; f = someService.asyncMethod(testData); f.get(); verifyResults();```","body":"the nice solution <a href=\"https://stackoverflow.com/q/20807232/923560\">How do I write..</a> you mention above is a practicable one, expose <i>asyncMethod</i> result type as <i>Future&lt;Void&gt;</i>, and return <b>new  AsyncResult&lt;&gt;(null);</b> at the last of <i>asyncMethod</i>; and in the test method, get the future from <i>asyncMethod</i> and wait for it, as like <code>Future&lt;Void&gt; f = someService.asyncMethod(testData); f.get(); verifyResults();</code>"}],"answers":[{"tags":[],"owner":{"account_id":873159,"reputation":26684,"user_id":923560,"accept_rate":47,"display_name":"Abdull"},"down_vote_count":2,"up_vote_count":41,"is_accepted":true,"score":39,"last_activity_date":1487939900,"creation_date":1487939900,"answer_id":42438863,"question_id":42438862,"body_markdown":"For `@Async` semantics to be adhered, [some active `@Configuration` class will have the `@EnableAsync` annotation](https://stackoverflow.com/a/29930166/923560), e.g.\r\n\r\n    @Configuration\r\n    @EnableAsync\r\n    @EnableScheduling\r\n    public class AsyncConfiguration implements AsyncConfigurer {\r\n\r\n      //\r\n\r\n    }\r\n\r\n\r\nTo resolve my issue, I introduced a new Spring profile `non-async`.\r\n\r\nIf the `non-async` profile is **not** active, the `AsyncConfiguration` is used:\r\n\r\n    @Configuration\r\n    @EnableAsync\r\n    @EnableScheduling\r\n    @Profile(&quot;!non-async&quot;)\r\n    public class AsyncConfiguration implements AsyncConfigurer {\r\n\r\n      // this configuration will be active as long as profile &quot;non-async&quot; is not (!) active\r\n\r\n    }\r\n\r\nIf the non-async profile **is** active, the `NonAsyncConfiguration` is used:\r\n\r\n    @Configuration\r\n    // notice the missing @EnableAsync annotation\r\n    @EnableScheduling\r\n    @Profile(&quot;non-async&quot;)\r\n    public class NonAsyncConfiguration {\r\n\r\n      // this configuration will be active as long as profile &quot;non-async&quot; is active\r\n\r\n    }\r\n\r\nNow in the problematic JUnit test class, I explicitly activate the &quot;non-async&quot; profile in order to mutually exclude the async behavior:\r\n\r\n\r\n    @RunWith(SpringJUnit4ClassRunner.class)\r\n    @SpringApplicationConfiguration(classes = Application.class)\r\n    @WebAppConfiguration\r\n    @IntegrationTest\r\n    @Transactional\r\n    @ActiveProfiles(profiles = &quot;non-async&quot;)\r\n    public class SomeServiceIntTest {\r\n\r\n        @Inject\r\n        private SomeService someService;\r\n\r\n            @Test\r\n            public void testAsyncMethod() {\r\n\r\n                Foo testData = prepareTestData();\r\n\r\n                someService.asyncMethod(testData);\r\n\r\n                verifyResults();\r\n            }\r\n\r\n            // verifyResult() with assertions, etc.\r\n    }\r\n\r\n","title":"JUnit-testing a Spring @Async void service method","body":"<p>For <code>@Async</code> semantics to be adhered, <a href=\"https://stackoverflow.com/a/29930166/923560\">some active <code>@Configuration</code> class will have the <code>@EnableAsync</code> annotation</a>, e.g.</p>\n\n<pre><code>@Configuration\n@EnableAsync\n@EnableScheduling\npublic class AsyncConfiguration implements AsyncConfigurer {\n\n  //\n\n}\n</code></pre>\n\n<p>To resolve my issue, I introduced a new Spring profile <code>non-async</code>.</p>\n\n<p>If the <code>non-async</code> profile is <strong>not</strong> active, the <code>AsyncConfiguration</code> is used:</p>\n\n<pre><code>@Configuration\n@EnableAsync\n@EnableScheduling\n@Profile(\"!non-async\")\npublic class AsyncConfiguration implements AsyncConfigurer {\n\n  // this configuration will be active as long as profile \"non-async\" is not (!) active\n\n}\n</code></pre>\n\n<p>If the non-async profile <strong>is</strong> active, the <code>NonAsyncConfiguration</code> is used:</p>\n\n<pre><code>@Configuration\n// notice the missing @EnableAsync annotation\n@EnableScheduling\n@Profile(\"non-async\")\npublic class NonAsyncConfiguration {\n\n  // this configuration will be active as long as profile \"non-async\" is active\n\n}\n</code></pre>\n\n<p>Now in the problematic JUnit test class, I explicitly activate the \"non-async\" profile in order to mutually exclude the async behavior:</p>\n\n<pre><code>@RunWith(SpringJUnit4ClassRunner.class)\n@SpringApplicationConfiguration(classes = Application.class)\n@WebAppConfiguration\n@IntegrationTest\n@Transactional\n@ActiveProfiles(profiles = \"non-async\")\npublic class SomeServiceIntTest {\n\n    @Inject\n    private SomeService someService;\n\n        @Test\n        public void testAsyncMethod() {\n\n            Foo testData = prepareTestData();\n\n            someService.asyncMethod(testData);\n\n            verifyResults();\n        }\n\n        // verifyResult() with assertions, etc.\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4352234,"reputation":3771,"user_id":3552141,"accept_rate":55,"display_name":"jhyot"},"down_vote_count":0,"up_vote_count":27,"is_accepted":false,"score":27,"last_activity_date":1646072379,"creation_date":1505422122,"answer_id":46227996,"question_id":42438862,"body_markdown":"If you are using Mockito (directly or via Spring testing support `@MockBean`), it has a verification mode with a timeout exactly for this case:\r\nhttps://static.javadoc.io/org.mockito/mockito-core/2.10.0/org/mockito/Mockito.html#22\r\n\r\n    someAsyncCall();\r\n    verify(mock, timeout(100)).someMethod();\r\n\r\n\r\nMuch more capable is the great library [Awaitility][1], which has many options how to handle async assertions. Example:\r\n\r\n    someAsyncCall();\r\n    await().atMost(5, SECONDS)\r\n      .untilAsserted(() -&gt; assertThat(userRepo.size()).isEqualTo(1));\r\n\r\n\r\n  [1]: http://www.awaitility.org/","title":"JUnit-testing a Spring @Async void service method","body":"<p>If you are using Mockito (directly or via Spring testing support <code>@MockBean</code>), it has a verification mode with a timeout exactly for this case:\n<a href=\"https://static.javadoc.io/org.mockito/mockito-core/2.10.0/org/mockito/Mockito.html#22\" rel=\"noreferrer\">https://static.javadoc.io/org.mockito/mockito-core/2.10.0/org/mockito/Mockito.html#22</a></p>\n<pre><code>someAsyncCall();\nverify(mock, timeout(100)).someMethod();\n</code></pre>\n<p>Much more capable is the great library <a href=\"http://www.awaitility.org/\" rel=\"noreferrer\">Awaitility</a>, which has many options how to handle async assertions. Example:</p>\n<pre><code>someAsyncCall();\nawait().atMost(5, SECONDS)\n  .untilAsserted(() -&gt; assertThat(userRepo.size()).isEqualTo(1));\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3941187,"reputation":797,"user_id":3255540,"display_name":"Jan Mares"},"down_vote_count":1,"up_vote_count":6,"is_accepted":false,"score":5,"last_activity_date":1514992860,"creation_date":1514992860,"answer_id":48080255,"question_id":42438862,"body_markdown":"In case your method returns `CompletableFuture` use `join` method - [documentation CompletableFuture::join][1]. \r\n\r\nThis method waits for the async method to finish and returns the result. Any encountered exception is rethrown in the main thread.\r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/CompletableFuture.html#join--","title":"JUnit-testing a Spring @Async void service method","body":"<p>In case your method returns <code>CompletableFuture</code> use <code>join</code> method - <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/CompletableFuture.html#join--\" rel=\"noreferrer\">documentation CompletableFuture::join</a>. </p>\n\n<p>This method waits for the async method to finish and returns the result. Any encountered exception is rethrown in the main thread.</p>\n"},{"tags":[],"owner":{"account_id":1525014,"reputation":1869,"user_id":1423685,"accept_rate":62,"display_name":"bastiat"},"down_vote_count":1,"up_vote_count":27,"is_accepted":false,"score":26,"last_activity_date":1564577387,"creation_date":1564577387,"answer_id":57291135,"question_id":42438862,"body_markdown":"I have done by injecting \r\n**ThreadPoolTaskExecutor**\r\n\r\nand then\r\n\r\n **executor.getThreadPoolExecutor().awaitTermination(1, TimeUnit.SECONDS);**\r\n\r\nbefore verifying results,\r\nit as below:\r\n\r\n      @Autowired\r\n      private ThreadPoolTaskExecutor executor;\r\n\r\n        @Test\r\n        public void testAsyncMethod() {\r\n\r\n            Foo testData = prepareTestData();\r\n\r\n            someService.asyncMethod(testData);\r\n\r\n            executor.getThreadPoolExecutor().awaitTermination(1, TimeUnit.SECONDS);\r\n\r\n            verifyResults();\r\n        }\r\n\r\n","title":"JUnit-testing a Spring @Async void service method","body":"<p>I have done by injecting \n<strong>ThreadPoolTaskExecutor</strong></p>\n\n<p>and then</p>\n\n<p><strong>executor.getThreadPoolExecutor().awaitTermination(1, TimeUnit.SECONDS);</strong></p>\n\n<p>before verifying results,\nit as below:</p>\n\n<pre><code>  @Autowired\n  private ThreadPoolTaskExecutor executor;\n\n    @Test\n    public void testAsyncMethod() {\n\n        Foo testData = prepareTestData();\n\n        someService.asyncMethod(testData);\n\n        executor.getThreadPoolExecutor().awaitTermination(1, TimeUnit.SECONDS);\n\n        verifyResults();\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5342445,"reputation":4807,"user_id":4259032,"accept_rate":56,"display_name":"Alain Cruz"},"down_vote_count":1,"up_vote_count":4,"is_accepted":false,"score":3,"last_activity_date":1614199602,"creation_date":1614199602,"answer_id":66358607,"question_id":42438862,"body_markdown":"Just to extend the answer by @bastiat, which in my opinion should be considered the correct one, you should also specified the `TaskExecutor`, if you are working with multiple executors. So you would need to inject the correct one that you wish to wait for. So, let&#39;s imagine we have the following **configuration** class.\r\n\r\n    @Configuration\r\n    @EnableAsync\r\n    public class AsyncConfiguration {\r\n    \r\n        @Bean(&quot;myTaskExecutor&quot;)\r\n        public TaskExecutor myTaskExecutor() {\r\n            ThreadPoolTaskExecutor executor = new ThreadPoolTaskExecutor();\r\n            executor.setMaxPoolSize(15);\r\n            executor.setCoreCapacity(10);\r\n            executor.setQueueCapacity(Integer.MAX_VALUE);\r\n            executor.setThreadNamePrefix(&quot;MyTaskExecutor-&quot;);\r\n            executor.initialize();\r\n            return executor;\r\n        }\r\n    \r\n        // Everything else\r\n    \r\n    }\r\n\r\nThen, you would have a service that would look like the following one.\r\n\r\n    @Service\r\n    public class SomeServiceImplementation {\r\n    \r\n        @Async(&quot;myTaskExecutor&quot;)\r\n        public void asyncMethod() {\r\n             // Do something\r\n        }\r\n    \r\n        // Everything else\r\n    \r\n    }\r\n\r\nNow, extending on @bastiat answer, the test would look like the following one.\r\n\r\n    @Autowired\r\n    private SomeService someService;\r\n\r\n    @Autowired\r\n    private ThreadPoolTaskExecutor myTaskExecutor;\r\n    \r\n    @Test\r\n    public void testAsyncMethod() {\r\n    \r\n        Foo testData = prepareTestData();\r\n    \r\n        this.someService.asyncMethod(testData);\r\n    \r\n        this.myTaskExecutor.getThreadPoolExecutor().awaitTermination(1, TimeUnit.SECONDS);\r\n    \r\n        this.verifyResults();\r\n    \r\n        // Everything else\r\n    }\r\n\r\nAlso, I have a minor recommendation that has nothing to do with the question. I wouldn&#39;t add the `@Transactional` annotation to a **service**, only to the **DAO/repository**. Unless you need to add it to a specific service method that must be **atomic**.","title":"JUnit-testing a Spring @Async void service method","body":"<p>Just to extend the answer by @bastiat, which in my opinion should be considered the correct one, you should also specified the <code>TaskExecutor</code>, if you are working with multiple executors. So you would need to inject the correct one that you wish to wait for. So, let's imagine we have the following <strong>configuration</strong> class.</p>\n<pre><code>@Configuration\n@EnableAsync\npublic class AsyncConfiguration {\n\n    @Bean(&quot;myTaskExecutor&quot;)\n    public TaskExecutor myTaskExecutor() {\n        ThreadPoolTaskExecutor executor = new ThreadPoolTaskExecutor();\n        executor.setMaxPoolSize(15);\n        executor.setCoreCapacity(10);\n        executor.setQueueCapacity(Integer.MAX_VALUE);\n        executor.setThreadNamePrefix(&quot;MyTaskExecutor-&quot;);\n        executor.initialize();\n        return executor;\n    }\n\n    // Everything else\n\n}\n</code></pre>\n<p>Then, you would have a service that would look like the following one.</p>\n<pre><code>@Service\npublic class SomeServiceImplementation {\n\n    @Async(&quot;myTaskExecutor&quot;)\n    public void asyncMethod() {\n         // Do something\n    }\n\n    // Everything else\n\n}\n</code></pre>\n<p>Now, extending on @bastiat answer, the test would look like the following one.</p>\n<pre><code>@Autowired\nprivate SomeService someService;\n\n@Autowired\nprivate ThreadPoolTaskExecutor myTaskExecutor;\n\n@Test\npublic void testAsyncMethod() {\n\n    Foo testData = prepareTestData();\n\n    this.someService.asyncMethod(testData);\n\n    this.myTaskExecutor.getThreadPoolExecutor().awaitTermination(1, TimeUnit.SECONDS);\n\n    this.verifyResults();\n\n    // Everything else\n}\n</code></pre>\n<p>Also, I have a minor recommendation that has nothing to do with the question. I wouldn't add the <code>@Transactional</code> annotation to a <strong>service</strong>, only to the <strong>DAO/repository</strong>. Unless you need to add it to a specific service method that must be <strong>atomic</strong>.</p>\n"},{"tags":[],"owner":{"account_id":2904275,"reputation":12430,"user_id":2490074,"accept_rate":62,"display_name":"Sarvar Nishonboyev"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1627910563,"creation_date":1627910563,"answer_id":68622371,"question_id":42438862,"body_markdown":"Just addition to the above solutions:\r\n\r\n```\r\n @Autowired\r\n  private ThreadPoolTaskExecutor pool;\r\n\r\n    @Test\r\n    public void testAsyncMethod() {\r\n        // call async method\r\n        someService.asyncMethod(testData);\r\n\r\n        boolean awaitTermination = pool.getThreadPoolExecutor().awaitTermination(1, TimeUnit.SECONDS);\r\n        assertThat(awaitTermination).isFalse();\r\n\r\n        // verify results\r\n    }\r\n\r\n```","title":"JUnit-testing a Spring @Async void service method","body":"<p>Just addition to the above solutions:</p>\n<pre><code> @Autowired\n  private ThreadPoolTaskExecutor pool;\n\n    @Test\n    public void testAsyncMethod() {\n        // call async method\n        someService.asyncMethod(testData);\n\n        boolean awaitTermination = pool.getThreadPoolExecutor().awaitTermination(1, TimeUnit.SECONDS);\n        assertThat(awaitTermination).isFalse();\n\n        // verify results\n    }\n\n</code></pre>\n"}],"owner":{"account_id":873159,"reputation":26684,"user_id":923560,"accept_rate":47,"display_name":"Abdull"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":56043,"favorite_count":0,"down_vote_count":1,"up_vote_count":55,"accepted_answer_id":42438863,"answer_count":6,"score":54,"last_activity_date":1646072379,"creation_date":1487939900,"question_id":42438862,"body_markdown":"I have a Spring service:\r\n\r\n    @Service\r\n    @Transactional\r\n    public class SomeService {\r\n\r\n        @Async\r\n        public void asyncMethod(Foo foo) {\r\n            // processing takes significant time\r\n        }\r\n    }\r\n\r\nAnd I have an integration test for this `SomeService`:\r\n\r\n    @RunWith(SpringJUnit4ClassRunner.class)\r\n    @SpringApplicationConfiguration(classes = Application.class)\r\n    @WebAppConfiguration\r\n    @IntegrationTest\r\n    @Transactional\r\n    public class SomeServiceIntTest {\r\n\r\n        @Inject\r\n        private SomeService someService;\r\n\r\n            @Test\r\n            public void testAsyncMethod() {\r\n\r\n                Foo testData = prepareTestData();\r\n\r\n                someService.asyncMethod(testData);\r\n\r\n                verifyResults();\r\n            }\r\n\r\n            // verifyResult() with assertions, etc.\r\n    }\r\n\r\nHere is the problem:\r\n\r\n* as `SomeService.asyncMethod(..)` is annotated with `@Async` and\r\n* as the `SpringJUnit4ClassRunner` adheres to the `@Async` semantics\r\n\r\nthe `testAsyncMethod` thread will fork the call `someService.asyncMethod(testData)` into its own worker thread, then directly continue executing `verifyResults()`, possibly before the previous worker thread has finished its work.\r\n\r\nHow can I wait for `someService.asyncMethod(testData)`&#39;s completion before verifying the results? Notice that the solutions to *https://stackoverflow.com/q/20807232/923560* don&#39;t apply here, as `someService.asyncMethod(testData)` returns `void`, not a `Future&lt;?&gt;`.","title":"JUnit-testing a Spring @Async void service method","body":"<p>I have a Spring service:</p>\n\n<pre><code>@Service\n@Transactional\npublic class SomeService {\n\n    @Async\n    public void asyncMethod(Foo foo) {\n        // processing takes significant time\n    }\n}\n</code></pre>\n\n<p>And I have an integration test for this <code>SomeService</code>:</p>\n\n<pre><code>@RunWith(SpringJUnit4ClassRunner.class)\n@SpringApplicationConfiguration(classes = Application.class)\n@WebAppConfiguration\n@IntegrationTest\n@Transactional\npublic class SomeServiceIntTest {\n\n    @Inject\n    private SomeService someService;\n\n        @Test\n        public void testAsyncMethod() {\n\n            Foo testData = prepareTestData();\n\n            someService.asyncMethod(testData);\n\n            verifyResults();\n        }\n\n        // verifyResult() with assertions, etc.\n}\n</code></pre>\n\n<p>Here is the problem:</p>\n\n<ul>\n<li>as <code>SomeService.asyncMethod(..)</code> is annotated with <code>@Async</code> and</li>\n<li>as the <code>SpringJUnit4ClassRunner</code> adheres to the <code>@Async</code> semantics</li>\n</ul>\n\n<p>the <code>testAsyncMethod</code> thread will fork the call <code>someService.asyncMethod(testData)</code> into its own worker thread, then directly continue executing <code>verifyResults()</code>, possibly before the previous worker thread has finished its work.</p>\n\n<p>How can I wait for <code>someService.asyncMethod(testData)</code>'s completion before verifying the results? Notice that the solutions to <em><a href=\"https://stackoverflow.com/q/20807232/923560\">How do I write a unit test to verify async behavior using Spring 4 and annotations?</a></em> don't apply here, as <code>someService.asyncMethod(testData)</code> returns <code>void</code>, not a <code>Future&lt;?&gt;</code>.</p>\n"},{"tags":["java","date","kotlin"],"comments":[{"owner":{"account_id":14032570,"reputation":46,"user_id":17533661,"display_name":"Emre Uygun"},"score":1,"creation_date":1645961503,"post_id":71284223,"comment_id":126002485,"body_markdown":"Does this answer your question? [Java format yyyy-MM-dd&#39;T&#39;HH:mm:ss.SSSz to yyyy-mm-dd HH:mm:ss](https://stackoverflow.com/questions/15730298/java-format-yyyy-mm-ddthhmmss-sssz-to-yyyy-mm-dd-hhmmss)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/15730298/java-format-yyyy-mm-ddthhmmss-sssz-to-yyyy-mm-dd-hhmmss\">Java format yyyy-MM-dd&#39;T&#39;HH:mm:ss.SSSz to yyyy-mm-dd HH:mm:ss</a>"}],"answers":[{"tags":[],"owner":{"account_id":5559956,"reputation":13819,"user_id":9840318,"display_name":"Madhu Bhat"},"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1646071510,"creation_date":1645965506,"answer_id":71284823,"question_id":71284223,"body_markdown":"You can parse the datetime string to `LocalDateTime` object and use its `getDayOfWeek()` method ([doc](https://docs.oracle.com/javase/8/docs/api/java/time/LocalDateTime.html#getDayOfWeek--)) to find the day of week, which returns a `DayOfWeek` enum ([doc](https://docs.oracle.com/javase/8/docs/api/java/time/DayOfWeek.html)). In Kotlin, it would look like\r\n\r\n    val date = LocalDateTime.parse(&quot;2017-03-25T11:24:20&quot;)\r\n    println(date.dayOfWeek) // would print &quot;SATURDAY&quot;\r\n\r\nOn the `DayOfWeek` enum, you could use `getDisplayName(TextStyle style, Locale locale)` to get a localized textual representation, such as &#39;Mon&#39; or &#39;Friday&#39;, or `getValue()` to get the day-of-week int value.","title":"Convert date like 2017-03-25T11:24:20 to week day","body":"<p>You can parse the datetime string to <code>LocalDateTime</code> object and use its <code>getDayOfWeek()</code> method (<a href=\"https://docs.oracle.com/javase/8/docs/api/java/time/LocalDateTime.html#getDayOfWeek--\" rel=\"nofollow noreferrer\">doc</a>) to find the day of week, which returns a <code>DayOfWeek</code> enum (<a href=\"https://docs.oracle.com/javase/8/docs/api/java/time/DayOfWeek.html\" rel=\"nofollow noreferrer\">doc</a>). In Kotlin, it would look like</p>\n<pre><code>val date = LocalDateTime.parse(&quot;2017-03-25T11:24:20&quot;)\nprintln(date.dayOfWeek) // would print &quot;SATURDAY&quot;\n</code></pre>\n<p>On the <code>DayOfWeek</code> enum, you could use <code>getDisplayName(TextStyle style, Locale locale)</code> to get a localized textual representation, such as 'Mon' or 'Friday', or <code>getValue()</code> to get the day-of-week int value.</p>\n"}],"owner":{"account_id":22728694,"reputation":11,"user_id":17957523,"display_name":"U wan"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":285,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":1,"score":0,"last_activity_date":1646071510,"creation_date":1645960038,"question_id":71284223,"body_markdown":"I have date strings in a given matching format: 2017-03-25T11:24:20 or 2020-06-26T11:14:00\r\n\r\nand would like to find which day of the week is on a given date, usin java or Kotlin","title":"Convert date like 2017-03-25T11:24:20 to week day","body":"<p>I have date strings in a given matching format: 2017-03-25T11:24:20 or 2020-06-26T11:14:00</p>\n<p>and would like to find which day of the week is on a given date, usin java or Kotlin</p>\n"},{"tags":["java","exception","completable-future"],"comments":[{"owner":{"account_id":13252051,"reputation":1635,"user_id":9569292,"display_name":"Thomas Timbul"},"score":0,"creation_date":1645543532,"post_id":71223761,"comment_id":125896155,"body_markdown":"Since you&#39;re in the Spring ecosystem, have you looked into Reactor/webflux?","body":"Since you&#39;re in the Spring ecosystem, have you looked into Reactor/webflux?"},{"owner":{"account_id":1268556,"reputation":48088,"user_id":1225328,"accept_rate":93,"display_name":"sp00m"},"score":2,"creation_date":1645543866,"post_id":71223761,"comment_id":125896310,"body_markdown":"`.get()` will throw the exceptions if any, so you could just use a good old try/catch around your `.get()`s and handle those exceptions synchronously.","body":"<code>.get()</code> will throw the exceptions if any, so you could just use a good old try/catch around your <code>.get()</code>s and handle those exceptions synchronously."},{"owner":{"account_id":2515468,"reputation":1611,"user_id":2187022,"accept_rate":90,"display_name":"Malvon"},"score":0,"creation_date":1645544342,"post_id":71223761,"comment_id":125896532,"body_markdown":"@ThomasTimbul, Two things: 1) The old service call must stay with `RestTemplate` since the external service call retires in the next year and half (we don&#39;t touch it), 2) The second service call to an external API will be developed in Reactor `WebClient` the make the call, however, there are some logic that needs to be performed after receiving the results from the `WebClient` -- that&#39;s why I&#39;m thinking I have to deal with those logic in a separate `@Async` thread for the newer service (please advise if this is incorrect).","body":"@ThomasTimbul, Two things: 1) The old service call must stay with <code>RestTemplate</code> since the external service call retires in the next year and half (we don&#39;t touch it), 2) The second service call to an external API will be developed in Reactor <code>WebClient</code> the make the call, however, there are some logic that needs to be performed after receiving the results from the <code>WebClient</code> -- that&#39;s why I&#39;m thinking I have to deal with those logic in a separate <code>@Async</code> thread for the newer service (please advise if this is incorrect)."},{"owner":{"account_id":2515468,"reputation":1611,"user_id":2187022,"accept_rate":90,"display_name":"Malvon"},"score":0,"creation_date":1645544533,"post_id":71223761,"comment_id":125896622,"body_markdown":"@sp00m Would that also capture exceptions thrown by `ServInf.doSomething()`? It seems like [`get()`](https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/CompletableFuture.html#get--) only throws a few exceptions.","body":"@sp00m Would that also capture exceptions thrown by <code>ServInf.doSomething()</code>? It seems like <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/CompletableFuture.html#get--\" rel=\"nofollow noreferrer\"><code>get()</code></a> only throws a few exceptions."},{"owner":{"account_id":1268556,"reputation":48088,"user_id":1225328,"accept_rate":93,"display_name":"sp00m"},"score":0,"creation_date":1645545039,"post_id":71223761,"comment_id":125896862,"body_markdown":"@Malvon Any exception thrown while completing the future (i.e. asynchronously, resolving into a failed future) will be wrapped into an ExceptionException, accessible in the catch block with e.getCause() if needed.","body":"@Malvon Any exception thrown while completing the future (i.e. asynchronously, resolving into a failed future) will be wrapped into an ExceptionException, accessible in the catch block with e.getCause() if needed."},{"owner":{"account_id":2515468,"reputation":1611,"user_id":2187022,"accept_rate":90,"display_name":"Malvon"},"score":0,"creation_date":1645547786,"post_id":71223761,"comment_id":125898145,"body_markdown":"@sp00m This indeed provides a workaround by shifting the work from chasing the root cause to the main/joining thread. I think it actually provides more control.","body":"@sp00m This indeed provides a workaround by shifting the work from chasing the root cause to the main/joining thread. I think it actually provides more control."},{"owner":{"account_id":13252051,"reputation":1635,"user_id":9569292,"display_name":"Thomas Timbul"},"score":1,"creation_date":1645613627,"post_id":71223761,"comment_id":125916915,"body_markdown":"Some more clarifications please: What is the definition of `WrapperObj`? If the happy path involves only one of the results, why are you racing these services against each other? Would it not be preferable to either: load balance (smart?); always prefer one, only calling the other if failed (easiest to implement?); ....? Regarding my earlier comment, you can perform additional logic within additional Reactor transformations (in fact you should, to keep everything reactive and prevent the whole thing seizing up as you run out of threads).","body":"Some more clarifications please: What is the definition of <code>WrapperObj</code>? If the happy path involves only one of the results, why are you racing these services against each other? Would it not be preferable to either: load balance (smart?); always prefer one, only calling the other if failed (easiest to implement?); ....? Regarding my earlier comment, you can perform additional logic within additional Reactor transformations (in fact you should, to keep everything reactive and prevent the whole thing seizing up as you run out of threads)."},{"owner":{"account_id":2515468,"reputation":1611,"user_id":2187022,"accept_rate":90,"display_name":"Malvon"},"score":0,"creation_date":1645623607,"post_id":71223761,"comment_id":125921009,"body_markdown":"@ThomasTimbul I break this into two parts: (1) Requirement clarification, (2) Comment on Reactor. For (1), the goal is to make calls to two external services, retrieve information from both sources, and finally merge them. These are two distinct systems with their own response structures and logics that need to be ran against their respective responses. If one fails, we still want to return results from the other. Only if both fail, that&#39;s when the API fails altogether. `WrapperObj` is just wrapper for a merged lists coming from these services (RESTful JSON).","body":"@ThomasTimbul I break this into two parts: (1) Requirement clarification, (2) Comment on Reactor. For (1), the goal is to make calls to two external services, retrieve information from both sources, and finally merge them. These are two distinct systems with their own response structures and logics that need to be ran against their respective responses. If one fails, we still want to return results from the other. Only if both fail, that&#39;s when the API fails altogether. <code>WrapperObj</code> is just wrapper for a merged lists coming from these services (RESTful JSON)."},{"owner":{"account_id":2515468,"reputation":1611,"user_id":2187022,"accept_rate":90,"display_name":"Malvon"},"score":0,"creation_date":1645623902,"post_id":71223761,"comment_id":125921127,"body_markdown":"@ThomasTimbul (2) The existing service is written in `RestTemplate` and won&#39;t get updated as it will retire in a year plus. And the only reason the new service call will use `WebClient` is because of deprecation of `RestTemplate`. The call is going to be blocking (I know, dumb), as the entire stack is blocking (Servlet, Spring MVC, external services are not `WebFlux` and block too). The logics are extensive, so not sure how well they fit into these transformations (sorry, don&#39;t know much about Reactive).","body":"@ThomasTimbul (2) The existing service is written in <code>RestTemplate</code> and won&#39;t get updated as it will retire in a year plus. And the only reason the new service call will use <code>WebClient</code> is because of deprecation of <code>RestTemplate</code>. The call is going to be blocking (I know, dumb), as the entire stack is blocking (Servlet, Spring MVC, external services are not <code>WebFlux</code> and block too). The logics are extensive, so not sure how well they fit into these transformations (sorry, don&#39;t know much about Reactive)."},{"owner":{"account_id":2515468,"reputation":1611,"user_id":2187022,"accept_rate":90,"display_name":"Malvon"},"score":0,"creation_date":1645624012,"post_id":71223761,"comment_id":125921182,"body_markdown":"@ThomasTimbul (2) Cont. As you can see, we are basically going from main Servlet thread to Spring common thread, to Reactive CPU per-core thread.","body":"@ThomasTimbul (2) Cont. As you can see, we are basically going from main Servlet thread to Spring common thread, to Reactive CPU per-core thread."}],"answers":[{"tags":[],"owner":{"account_id":1268556,"reputation":48088,"user_id":1225328,"accept_rate":93,"display_name":"sp00m"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1645547783,"creation_date":1645547783,"answer_id":71225002,"question_id":71223761,"body_markdown":"CompletableFutures are quite cumbersome to deal with, but here would be a more functional and reactive approach IMO.\r\n\r\nWe&#39;ll need that `sequence` method from https://stackoverflow.com/a/30026710/1225328:\r\n\r\n```java\r\nstatic&lt;T&gt; CompletableFuture&lt;List&lt;T&gt;&gt; sequence(List&lt;CompletableFuture&lt;T&gt;&gt; com) {\r\n    return CompletableFuture.allOf(com.toArray(new CompletableFuture&lt;?&gt;[0]))\r\n            .thenApply(v -&gt; com.stream()\r\n                .map(CompletableFuture::join)\r\n                .collect(Collectors.toList())\r\n            );\r\n}\r\n```\r\n\r\nThen, I&#39;m using `Optional` to represent the status of the operations, but a [`Try` monad](https://stackoverflow.com/q/27787772/1225328) would suit better (so use one if you have such a utility in your codebase - Java doesn&#39;t bring one natively yet):\r\n\r\n```java\r\nCompletableFuture&lt;Optional&lt;List&lt;Object&gt;&gt;&gt; future1 = service1.getSomething().thenApply(Optional::of).exceptionally(e -&gt; {\r\n    // log e\r\n    return Optional.empty();\r\n});\r\nCompletableFuture&lt;Optional&lt;List&lt;Object&gt;&gt;&gt; future2 = service2.getSomething().thenApply(Optional::of).exceptionally(e -&gt; {\r\n    // log e\r\n    return Optional.empty();\r\n});\r\n```\r\n\r\nNow wait for the two futures and handle the results once available:\r\n\r\n```java\r\nCompletableFuture&lt;List&lt;Object&gt;&gt; mergedResults = sequence(Arrays.asList(future1, future2)).thenApply(results -&gt; {\r\n    Optional&lt;List&lt;Object&gt;&gt; result1 = results.get(0);\r\n    Optional&lt;List&lt;Object&gt;&gt; result2 = results.get(1);\r\n    if (result1.isEmpty() &amp;&amp; result2.isEmpty()) {\r\n        throw new CustomException(...);\r\n    }\r\n    // https://stackoverflow.com/a/18687790/1225328:\r\n    return Stream.of(\r\n            result1.map(Stream::of).orElseGet(Stream::empty),\r\n            result2.map(Stream::of).orElseGet(Stream::empty)\r\n    ).collect(Collectors.toList());\r\n});\r\n```\r\n\r\nThen you would ideally return `mergedResults` directly and let the framework deal with it for you so that you don&#39;t block any thread, or you can `.get()` on it (which will block the thread), which will throw an `ExecutionException` if your `CustomException` (or any other exception) is thrown (accessible in `e.getCause()`).\r\n\r\n---\r\n\r\nThis would look simpler with Project Reactor (or equivalent), in case you&#39;re using it already, but the idea would be roughly the same.","title":"How to Obtain the Exception Outside of CompletableFuture Handler?","body":"<p>CompletableFutures are quite cumbersome to deal with, but here would be a more functional and reactive approach IMO.</p>\n<p>We'll need that <code>sequence</code> method from <a href=\"https://stackoverflow.com/a/30026710/1225328\">https://stackoverflow.com/a/30026710/1225328</a>:</p>\n<pre class=\"lang-java prettyprint-override\"><code>static&lt;T&gt; CompletableFuture&lt;List&lt;T&gt;&gt; sequence(List&lt;CompletableFuture&lt;T&gt;&gt; com) {\n    return CompletableFuture.allOf(com.toArray(new CompletableFuture&lt;?&gt;[0]))\n            .thenApply(v -&gt; com.stream()\n                .map(CompletableFuture::join)\n                .collect(Collectors.toList())\n            );\n}\n</code></pre>\n<p>Then, I'm using <code>Optional</code> to represent the status of the operations, but a <a href=\"https://stackoverflow.com/q/27787772/1225328\"><code>Try</code> monad</a> would suit better (so use one if you have such a utility in your codebase - Java doesn't bring one natively yet):</p>\n<pre class=\"lang-java prettyprint-override\"><code>CompletableFuture&lt;Optional&lt;List&lt;Object&gt;&gt;&gt; future1 = service1.getSomething().thenApply(Optional::of).exceptionally(e -&gt; {\n    // log e\n    return Optional.empty();\n});\nCompletableFuture&lt;Optional&lt;List&lt;Object&gt;&gt;&gt; future2 = service2.getSomething().thenApply(Optional::of).exceptionally(e -&gt; {\n    // log e\n    return Optional.empty();\n});\n</code></pre>\n<p>Now wait for the two futures and handle the results once available:</p>\n<pre class=\"lang-java prettyprint-override\"><code>CompletableFuture&lt;List&lt;Object&gt;&gt; mergedResults = sequence(Arrays.asList(future1, future2)).thenApply(results -&gt; {\n    Optional&lt;List&lt;Object&gt;&gt; result1 = results.get(0);\n    Optional&lt;List&lt;Object&gt;&gt; result2 = results.get(1);\n    if (result1.isEmpty() &amp;&amp; result2.isEmpty()) {\n        throw new CustomException(...);\n    }\n    // https://stackoverflow.com/a/18687790/1225328:\n    return Stream.of(\n            result1.map(Stream::of).orElseGet(Stream::empty),\n            result2.map(Stream::of).orElseGet(Stream::empty)\n    ).collect(Collectors.toList());\n});\n</code></pre>\n<p>Then you would ideally return <code>mergedResults</code> directly and let the framework deal with it for you so that you don't block any thread, or you can <code>.get()</code> on it (which will block the thread), which will throw an <code>ExecutionException</code> if your <code>CustomException</code> (or any other exception) is thrown (accessible in <code>e.getCause()</code>).</p>\n<hr />\n<p>This would look simpler with Project Reactor (or equivalent), in case you're using it already, but the idea would be roughly the same.</p>\n"},{"tags":[],"owner":{"account_id":3211603,"reputation":289297,"user_id":2711488,"display_name":"Holger"},"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1645732867,"creation_date":1645732867,"answer_id":71257593,"question_id":71223761,"body_markdown":"Assuming two futures\r\n\r\n```java\r\nCompletableFuture&lt;List&lt;String&gt;&gt; service1Result = …\r\nCompletableFuture&lt;List&lt;String&gt;&gt; service2Result = …\r\n```\r\n\r\na straight-forward approach to combine the two futures is\r\n\r\n```java\r\nCompletableFuture&lt;List&lt;String&gt;&gt; both = service1Result.thenCombine(service2Result,\r\n    (list1, list2) -&gt; Stream.concat(list1.stream(), list2.stream())\r\n                            .collect(Collectors.toList()));\r\n```\r\n\r\nbut this future will fail if either future fails.\r\n\r\nTo fail only when both futures failed and construct a new exception from both throwable, we can define two utility methods:\r\n\r\n```java\r\nprivate static Throwable getThrowable(CompletableFuture&lt;?&gt; f) {\r\n    return f.&lt;Throwable&gt;thenApply(value -&gt; null)\r\n            .exceptionally(throwable -&gt; throwable).join();\r\n}\r\n\r\nprivate static &lt;T&gt; T throwCustom(Throwable t1, Throwable t2) {\r\n    throw new CustomException(t1.getMessage() + &quot; and &quot; + t2.getMessage());\r\n}\r\n```\r\nThe method `getThrowable` is intended to be used with a future already known to be completed exceptionally. We could call `join` and catch the exception, but as show above, we can also turn transform the future to a non-exceptional future containing the throwable as its value.\r\n\r\nThen, we can combine all of the above to\r\n\r\n```java\r\nCompletableFuture&lt;List&lt;String&gt;&gt; failOnlyWhenBothFailed = both\r\n    .thenApply(list -&gt; both)\r\n    .exceptionally(t -&gt;\r\n        !service1Result.isCompletedExceptionally()? service1Result:\r\n        !service2Result.isCompletedExceptionally()? service2Result:\r\n        throwCustom(getThrowable(service1Result), getThrowable(service2Result)))\r\n    .thenCompose(Function.identity());\r\n```\r\n\r\nWithin the function passed to `exceptionally`, the incoming futures are already known to be completed, so we can use the utility methods to extract the throwables and throw a new exception.\r\n\r\nThe advantage of this is that the resulting construction is non-blocking.\r\n\r\nBut in your case, you want to wait for the completion rather than returning a future, so we can simplify the operation:\r\n\r\n```java\r\nCompletableFuture&lt;List&lt;String&gt;&gt; both = service1Result.thenCombine(service2Result,\r\n    (list1, list2) -&gt; Stream.concat(list1.stream(), list2.stream())\r\n                            .collect(Collectors.toList()));\r\n\r\nboth.exceptionally(t -&gt; null).join();\r\n\r\nif(service1Result.isCompletedExceptionally()&amp;&amp;service2Result.isCompletedExceptionally()){\r\n  Throwable t1 = getThrowable(service1Result), t2 = getThrowable(service2Result);\r\n  throw new CustomException(t1.getMessage() + &quot; and &quot; + t2.getMessage());\r\n}\r\n\r\nList&lt;String&gt; result = (\r\n    service1Result.isCompletedExceptionally()? service2Result:\r\n    service2Result.isCompletedExceptionally()? service1Result: both\r\n).join();\r\n```\r\n\r\nBy using `both.exceptionally(t -&gt; null).join();` we wait for the completion of both jobs, without throwing an exception on failures. After this statement, we can safely use `isCompletedExceptionally()` to check the futures we know to be completed.\r\n\r\nSo if both failed, we extract the throwables and throw our custom exception, otherwise, we check which task(s) succeeded and extract the result of either or both.\r\n","title":"How to Obtain the Exception Outside of CompletableFuture Handler?","body":"<p>Assuming two futures</p>\n<pre class=\"lang-java prettyprint-override\"><code>CompletableFuture&lt;List&lt;String&gt;&gt; service1Result = …\nCompletableFuture&lt;List&lt;String&gt;&gt; service2Result = …\n</code></pre>\n<p>a straight-forward approach to combine the two futures is</p>\n<pre class=\"lang-java prettyprint-override\"><code>CompletableFuture&lt;List&lt;String&gt;&gt; both = service1Result.thenCombine(service2Result,\n    (list1, list2) -&gt; Stream.concat(list1.stream(), list2.stream())\n                            .collect(Collectors.toList()));\n</code></pre>\n<p>but this future will fail if either future fails.</p>\n<p>To fail only when both futures failed and construct a new exception from both throwable, we can define two utility methods:</p>\n<pre class=\"lang-java prettyprint-override\"><code>private static Throwable getThrowable(CompletableFuture&lt;?&gt; f) {\n    return f.&lt;Throwable&gt;thenApply(value -&gt; null)\n            .exceptionally(throwable -&gt; throwable).join();\n}\n\nprivate static &lt;T&gt; T throwCustom(Throwable t1, Throwable t2) {\n    throw new CustomException(t1.getMessage() + &quot; and &quot; + t2.getMessage());\n}\n</code></pre>\n<p>The method <code>getThrowable</code> is intended to be used with a future already known to be completed exceptionally. We could call <code>join</code> and catch the exception, but as show above, we can also turn transform the future to a non-exceptional future containing the throwable as its value.</p>\n<p>Then, we can combine all of the above to</p>\n<pre class=\"lang-java prettyprint-override\"><code>CompletableFuture&lt;List&lt;String&gt;&gt; failOnlyWhenBothFailed = both\n    .thenApply(list -&gt; both)\n    .exceptionally(t -&gt;\n        !service1Result.isCompletedExceptionally()? service1Result:\n        !service2Result.isCompletedExceptionally()? service2Result:\n        throwCustom(getThrowable(service1Result), getThrowable(service2Result)))\n    .thenCompose(Function.identity());\n</code></pre>\n<p>Within the function passed to <code>exceptionally</code>, the incoming futures are already known to be completed, so we can use the utility methods to extract the throwables and throw a new exception.</p>\n<p>The advantage of this is that the resulting construction is non-blocking.</p>\n<p>But in your case, you want to wait for the completion rather than returning a future, so we can simplify the operation:</p>\n<pre class=\"lang-java prettyprint-override\"><code>CompletableFuture&lt;List&lt;String&gt;&gt; both = service1Result.thenCombine(service2Result,\n    (list1, list2) -&gt; Stream.concat(list1.stream(), list2.stream())\n                            .collect(Collectors.toList()));\n\nboth.exceptionally(t -&gt; null).join();\n\nif(service1Result.isCompletedExceptionally()&amp;&amp;service2Result.isCompletedExceptionally()){\n  Throwable t1 = getThrowable(service1Result), t2 = getThrowable(service2Result);\n  throw new CustomException(t1.getMessage() + &quot; and &quot; + t2.getMessage());\n}\n\nList&lt;String&gt; result = (\n    service1Result.isCompletedExceptionally()? service2Result:\n    service2Result.isCompletedExceptionally()? service1Result: both\n).join();\n</code></pre>\n<p>By using <code>both.exceptionally(t -&gt; null).join();</code> we wait for the completion of both jobs, without throwing an exception on failures. After this statement, we can safely use <code>isCompletedExceptionally()</code> to check the futures we know to be completed.</p>\n<p>So if both failed, we extract the throwables and throw our custom exception, otherwise, we check which task(s) succeeded and extract the result of either or both.</p>\n"},{"tags":[],"owner":{"account_id":13252051,"reputation":1635,"user_id":9569292,"display_name":"Thomas Timbul"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1646071356,"creation_date":1646071356,"answer_id":71299186,"question_id":71223761,"body_markdown":"Just because I raised it as a possibility, I imagine something like this should work in a world using Project Reactor:\r\n\r\nFirst we modify the services to return `Mono`s, which is easy using `Mono.fromFuture` (or you can turn one service into Reactor style, if and once it is ready):\r\n\r\n    @Service\r\n    public class Serv1 implements ServInf {\r\n        public Mono&lt;List&lt;Obj&gt;&gt; getSomething(int id) {\r\n            // The service ensures that the list is never null, but it can be empty\r\n            return Mono.fromFuture(CompletableFuture.completedFuture(/* calling an external RESTful API */));\r\n            //This Mono will either emit the result or complete with an error in case of Exception\r\n        }\r\n    }\r\n    \r\n    //similar for Serv2\r\n\r\nThe (reactive) endpoint could look like this (please see numbered comments below):\r\n\r\n    public Mono&lt;WrapperObj&gt; getById(String id) {\r\n            WrapperObj wrapper = new WrapperObj(); //1\r\n            Mono&lt;Optional&lt;List&lt;Obj&gt;&gt;&gt; s1Mono = serv1.getSomething(id)\r\n                .subscribeOn(Schedulers.boundedElastic()) //2\r\n                .map(Optional::ofNullable) //3\r\n                .doOnError(wrapper::setS1ErrorResult) //4\r\n                .onErrorResume(t -&gt; Mono.just(Optional.empty())); //5\r\n    \r\n            Mono&lt;Optional&lt;List&lt;Obj&gt;&gt;&gt; s2Mono = serv2.getSomething(id)\r\n                .subscribeOn(Schedulers.boundedElastic()) //2\r\n                .map(Optional::ofNullable) //3\r\n                .doOnError(wrapper::setS2ErrorResult) //4\r\n                .onErrorResume(t -&gt; Mono.just(Optional.empty())); //5\r\n    \r\n            return s1Mono\r\n                .zipWith(s2Mono) //6\r\n                .map(result -&gt;\r\n                    //transforms non-error results and merges them into the wrapper object\r\n                    transformResult(result.getT1().orElse(null), result.getT2().orElse(null), wrapper) //7\r\n                )\r\n                .switchIfEmpty(Mono.just(wrapper)) //8\r\n    \r\n            ;\r\n        }\r\n\r\n**Comments:**\r\n\r\n 1. The result is used to &#39;accumulate&#39; the results and Exceptions\r\n 2. Call services on the `boundedElastic` thread pool, which is recommended for longer IO tasks.\r\n 3. Wrap the result in `Optional`. I am using an empty Optional as a convenience result for erroneous completion, since `null`s don&#39;t propagate nicely through Reactor.\r\n 4. If the service call throws an exception, we can set the corresponding erroneous result on the `WrapperObj`. This is similar to your use of `AtomicReference`, but without creating additional objects.\r\n 5. However, such an exception would cause `zipWith` (6) to fail, so if this happens we substitute the `Optional.empty()` result.\r\n 6. `zipWith` creates a tuple of both results\r\n 7. We process these results, replacing \r\n 8. What&#39;s left is to transform the two (non-exceptional) results:\r\n\r\n        private WrapperObj transformResult(List&lt;Obj&gt; s1Result, List&lt;Obj&gt; s2Result, WrapperObj wrapper) {\r\n            //perform your result transformation and\r\n            //flesh out &#39;wrapper&#39; with the results\r\n            //if there was an exception, the &#39;wrapper&#39; contains the corresponding exception values\r\n            return wrapper;\r\n        }\r\n","title":"How to Obtain the Exception Outside of CompletableFuture Handler?","body":"<p>Just because I raised it as a possibility, I imagine something like this should work in a world using Project Reactor:</p>\n<p>First we modify the services to return <code>Mono</code>s, which is easy using <code>Mono.fromFuture</code> (or you can turn one service into Reactor style, if and once it is ready):</p>\n<pre><code>@Service\npublic class Serv1 implements ServInf {\n    public Mono&lt;List&lt;Obj&gt;&gt; getSomething(int id) {\n        // The service ensures that the list is never null, but it can be empty\n        return Mono.fromFuture(CompletableFuture.completedFuture(/* calling an external RESTful API */));\n        //This Mono will either emit the result or complete with an error in case of Exception\n    }\n}\n\n//similar for Serv2\n</code></pre>\n<p>The (reactive) endpoint could look like this (please see numbered comments below):</p>\n<pre><code>public Mono&lt;WrapperObj&gt; getById(String id) {\n        WrapperObj wrapper = new WrapperObj(); //1\n        Mono&lt;Optional&lt;List&lt;Obj&gt;&gt;&gt; s1Mono = serv1.getSomething(id)\n            .subscribeOn(Schedulers.boundedElastic()) //2\n            .map(Optional::ofNullable) //3\n            .doOnError(wrapper::setS1ErrorResult) //4\n            .onErrorResume(t -&gt; Mono.just(Optional.empty())); //5\n\n        Mono&lt;Optional&lt;List&lt;Obj&gt;&gt;&gt; s2Mono = serv2.getSomething(id)\n            .subscribeOn(Schedulers.boundedElastic()) //2\n            .map(Optional::ofNullable) //3\n            .doOnError(wrapper::setS2ErrorResult) //4\n            .onErrorResume(t -&gt; Mono.just(Optional.empty())); //5\n\n        return s1Mono\n            .zipWith(s2Mono) //6\n            .map(result -&gt;\n                //transforms non-error results and merges them into the wrapper object\n                transformResult(result.getT1().orElse(null), result.getT2().orElse(null), wrapper) //7\n            )\n            .switchIfEmpty(Mono.just(wrapper)) //8\n\n        ;\n    }\n</code></pre>\n<p><strong>Comments:</strong></p>\n<ol>\n<li><p>The result is used to 'accumulate' the results and Exceptions</p>\n</li>\n<li><p>Call services on the <code>boundedElastic</code> thread pool, which is recommended for longer IO tasks.</p>\n</li>\n<li><p>Wrap the result in <code>Optional</code>. I am using an empty Optional as a convenience result for erroneous completion, since <code>null</code>s don't propagate nicely through Reactor.</p>\n</li>\n<li><p>If the service call throws an exception, we can set the corresponding erroneous result on the <code>WrapperObj</code>. This is similar to your use of <code>AtomicReference</code>, but without creating additional objects.</p>\n</li>\n<li><p>However, such an exception would cause <code>zipWith</code> (6) to fail, so if this happens we substitute the <code>Optional.empty()</code> result.</p>\n</li>\n<li><p><code>zipWith</code> creates a tuple of both results</p>\n</li>\n<li><p>We process these results, replacing</p>\n</li>\n<li><p>What's left is to transform the two (non-exceptional) results:</p>\n<pre><code>private WrapperObj transformResult(List&lt;Obj&gt; s1Result, List&lt;Obj&gt; s2Result, WrapperObj wrapper) {\n    //perform your result transformation and\n    //flesh out 'wrapper' with the results\n    //if there was an exception, the 'wrapper' contains the corresponding exception values\n    return wrapper;\n}\n</code></pre>\n</li>\n</ol>\n"}],"owner":{"account_id":2515468,"reputation":1611,"user_id":2187022,"accept_rate":90,"display_name":"Malvon"},"comment_count":10,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1738,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":71257593,"answer_count":3,"score":2,"last_activity_date":1646071356,"creation_date":1645542901,"question_id":71223761,"body_markdown":"I have the following situation where I&#39;m trying to see if there is a solution for:\r\n\r\n - Two Spring service calls must be made in parallel (one is an existing service call/logic and the second is the new addition).\r\n - The results should then be merged and returned by the RESTful API.\r\n\r\nA happy path should be straightforward, however, when it comes to errors emitted by the services the following rule should adhere to:\r\n\r\n - The API fails only when both service calls fail -- this should be thrown from the main thread and not the `@Async` pool since they are independent threads and don&#39;t have access to each other&#39;s exception (at least that&#39;s my reasoning).\r\n - If only one of them fails, log the error through another service (asynchronously), and the API returns only the results from a service that was successful -- this can be done from the respective `@Async` threads.\r\n\r\n\r\n\r\n       @Service\r\n       public class Serv1 interface ServInf {\r\n    \t@Async(&quot;customPool&quot;)\r\n    \tpublic CompletableFuture&lt;List&lt;Obj&gt;&gt; getSomething(int id) {\r\n    \t  // The service ensures that the list is never null, but it can be empty\r\n    \t  return CompletableFuture.completedFuture(/* calling an external RESTful API */);\r\n    \t}\r\n       }\r\n    \r\n       @Service\r\n       public class Serv2 interface ServInf {\r\n    \t@Async(&quot;customPool&quot;)\r\n    \tpublic CompletableFuture&lt;List&lt;Obj&gt;&gt; getSomething(int id) {\r\n    \t  // The service ensures that the list is never null, but it can be empty\r\n    \t  return CompletableFuture.completedFuture(/* calling another external RESTful API */);\r\n    \t    }\r\n        }\r\n    \r\n       @RestController\r\n       public class MyController {\r\n\r\n\t\t/** Typical service @Autowired&#39;s */\r\n\t\t\r\n\t\t@GetMapping(/* ... */)\r\n\t\tpublic WrapperObj getById(String id) {\r\n\t\t\r\n\t\t\tCompletableFuture&lt;List&lt;String&gt;&gt; service1Result =\r\n\t\t\t\t\tservice1.getSomething(id)\r\n\t\t\t\t\t\t\t.thenApply(result -&gt; {\r\n\t\t\t\t\t\t\t\tif (result == null) { return null; }\r\n\t\t\t\t\t\t\t\treturn result.stream().map(Obj::getName).collect(Collectors.toList());\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t.handle((result, exception) -&gt; {\r\n\t\t\t\t\t\t\t\tif (exception != null) {\r\n                                    // Call another asynchronous logging service which should be easy\r\n\t\t\t\t\t\t\t\t\treturn null;\r\n\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\treturn result;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t});\r\n\t\t\r\n\t\t\tCompletableFuture&lt;List&lt;String&gt;&gt; service2Result =\r\n\t\t\t\t\tservice2.getSomething(id)\r\n\t\t\t\t\t\t\t.thenApply(result -&gt; {\r\n\t\t\t\t\t\t\t\tif (result == null) { return null; }\r\n\t\t\t\t\t\t\t\treturn result.stream().map(Obj::getName).collect(Collectors.toList());\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t.handle((result, exception) -&gt; {\r\n\t\t\t\t\t\t\t\tif (exception != null) {\r\n                                    // Call another asynchronous logging service which should be easy\r\n\t\t\t\t\t\t\t\t\treturn null;\r\n\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\treturn result;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\r\n\t\t\t// Blocking till we get the results from both services\r\n\t\t\tList&lt;String&gt; result1 = service1Result.get();\r\n\t\t\tList&lt;String&gt; result2 = service2Result.get();\r\n\t\t\r\n\t\t\t/** Where to get the exceptions thrown by the services if both fail\r\n\t\t\tif (result1 == null &amp;&amp; result2 == null) {\r\n\t\t\t\t/** Signal that the API needs to fail as a whole */\r\n\t\t\t\tthrow new CustomException( /** where to get the messages? */);\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t/** merge and return the result */\r\n\t\t}\r\n\t   }\r\n\r\nMy question is, Since these services return a list of some object, even if I use `CompletableFuture.handle()` and check for existence of an exception, I can&#39;t return the Exception itself in order to capture and let Spring Advice class handle it (chained to return a list).\r\n\r\nOne thing I thought of is to use `AtomicReference` in order to capture the exceptions and set them within the `handle()` and use them once the futures are done/complete, e.g.\r\n\r\n\tAtomicReference&lt;Throwable&gt; ce1 = new AtomicReference&lt;&gt;();\r\n\tAtomicReference&lt;Throwable&gt; ce2 = new AtomicReference&lt;&gt;();\r\n\r\n\t.handle((result, exception) -&gt; {\r\n\t\tif (exception != null) {\r\n\t\t\tce1.set(exception);\r\n\t\t\treturn null; // This signals that there was a failure\r\n\t\t} else {\r\n\t\t\treturn result;\r\n\t\t}\r\n\t});\r\n\t\r\n\tList&lt;String&gt; result1 = service1Result.get();\r\n\tList&lt;String&gt; result2 = service2Result.get();\r\n\r\n\t/** Where to get the exceptions thrown by the services if both fail\r\n\tif (result1 == null &amp;&amp; result2 == null) {\r\n\t\t/** Signal that the API needs to fail as a whole */\r\n\t\tthrow new CustomException(/** do logic to capture ce1.get().getMessage() + ce2.get().getMessage() */);\r\n\t}\r\n\r\nFirst, does this sound like a viable solution in this multi-threaded asynchronous calls?\r\n\r\nSecond, this looks messy, so I was wondering if there is a more elegant way of capturing these exceptions outside of Spring async pool, and deal with it in the main thread, e.g. combine the exception information and throw it to Spring Advice exception handler.","title":"How to Obtain the Exception Outside of CompletableFuture Handler?","body":"<p>I have the following situation where I'm trying to see if there is a solution for:</p>\n<ul>\n<li>Two Spring service calls must be made in parallel (one is an existing service call/logic and the second is the new addition).</li>\n<li>The results should then be merged and returned by the RESTful API.</li>\n</ul>\n<p>A happy path should be straightforward, however, when it comes to errors emitted by the services the following rule should adhere to:</p>\n<ul>\n<li><p>The API fails only when both service calls fail -- this should be thrown from the main thread and not the <code>@Async</code> pool since they are independent threads and don't have access to each other's exception (at least that's my reasoning).</p>\n</li>\n<li><p>If only one of them fails, log the error through another service (asynchronously), and the API returns only the results from a service that was successful -- this can be done from the respective <code>@Async</code> threads.</p>\n<pre><code>@Service\npublic class Serv1 interface ServInf {\n @Async(&quot;customPool&quot;)\n public CompletableFuture&lt;List&lt;Obj&gt;&gt; getSomething(int id) {\n   // The service ensures that the list is never null, but it can be empty\n   return CompletableFuture.completedFuture(/* calling an external RESTful API */);\n }\n}\n\n@Service\npublic class Serv2 interface ServInf {\n @Async(&quot;customPool&quot;)\n public CompletableFuture&lt;List&lt;Obj&gt;&gt; getSomething(int id) {\n   // The service ensures that the list is never null, but it can be empty\n   return CompletableFuture.completedFuture(/* calling another external RESTful API */);\n     }\n }\n\n@RestController\npublic class MyController {\n\n /** Typical service @Autowired's */\n\n @GetMapping(/* ... */)\n public WrapperObj getById(String id) {\n\n     CompletableFuture&lt;List&lt;String&gt;&gt; service1Result =\n             service1.getSomething(id)\n                     .thenApply(result -&gt; {\n                         if (result == null) { return null; }\n                         return result.stream().map(Obj::getName).collect(Collectors.toList());\n                     })\n                     .handle((result, exception) -&gt; {\n                         if (exception != null) {\n                             // Call another asynchronous logging service which should be easy\n                             return null;\n                         } else {\n                             return result;\n                         }\n                     });\n\n     CompletableFuture&lt;List&lt;String&gt;&gt; service2Result =\n             service2.getSomething(id)\n                     .thenApply(result -&gt; {\n                         if (result == null) { return null; }\n                         return result.stream().map(Obj::getName).collect(Collectors.toList());\n                     })\n                     .handle((result, exception) -&gt; {\n                         if (exception != null) {\n                             // Call another asynchronous logging service which should be easy\n                             return null;\n                         } else {\n                             return result;\n                         }\n                     });\n\n     // Blocking till we get the results from both services\n     List&lt;String&gt; result1 = service1Result.get();\n     List&lt;String&gt; result2 = service2Result.get();\n\n     /** Where to get the exceptions thrown by the services if both fail\n     if (result1 == null &amp;&amp; result2 == null) {\n         /** Signal that the API needs to fail as a whole */\n         throw new CustomException( /** where to get the messages? */);\n     }\n\n     /** merge and return the result */\n }\n}\n</code></pre>\n</li>\n</ul>\n<p>My question is, Since these services return a list of some object, even if I use <code>CompletableFuture.handle()</code> and check for existence of an exception, I can't return the Exception itself in order to capture and let Spring Advice class handle it (chained to return a list).</p>\n<p>One thing I thought of is to use <code>AtomicReference</code> in order to capture the exceptions and set them within the <code>handle()</code> and use them once the futures are done/complete, e.g.</p>\n<pre><code>AtomicReference&lt;Throwable&gt; ce1 = new AtomicReference&lt;&gt;();\nAtomicReference&lt;Throwable&gt; ce2 = new AtomicReference&lt;&gt;();\n\n.handle((result, exception) -&gt; {\n    if (exception != null) {\n        ce1.set(exception);\n        return null; // This signals that there was a failure\n    } else {\n        return result;\n    }\n});\n\nList&lt;String&gt; result1 = service1Result.get();\nList&lt;String&gt; result2 = service2Result.get();\n\n/** Where to get the exceptions thrown by the services if both fail\nif (result1 == null &amp;&amp; result2 == null) {\n    /** Signal that the API needs to fail as a whole */\n    throw new CustomException(/** do logic to capture ce1.get().getMessage() + ce2.get().getMessage() */);\n}\n</code></pre>\n<p>First, does this sound like a viable solution in this multi-threaded asynchronous calls?</p>\n<p>Second, this looks messy, so I was wondering if there is a more elegant way of capturing these exceptions outside of Spring async pool, and deal with it in the main thread, e.g. combine the exception information and throw it to Spring Advice exception handler.</p>\n"},{"tags":["java","arrays","algorithm"],"answers":[{"tags":[],"owner":{"account_id":8546,"reputation":17688,"user_id":15472,"accept_rate":87,"display_name":"tucuxi"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1646070535,"creation_date":1646070535,"answer_id":71299014,"question_id":71298651,"body_markdown":"I would not use 9 panels with 9 inputs each; instead, I would use single panel with 81 inputs, arranged in a 9x9 grid. Instead of `JTextFields`, I would define a `public static class SudokuCell extends JTextField`, so that, each time you create a new cell, you can keep all its tracking information inside:\r\n\r\n      public static class SudokuCell extends JTextField {\r\n       \r\n          public final int block; // 0 to 9, you call it `i`\r\n          public final int row;   // 0 to 9 again\r\n          public final int col;   // again 0-9\r\n\r\n          public SudokuCell(int block, int row, int col) {\r\n               // ... assign to attributes\r\n          }\r\n      }\r\n\r\nThe advantage is that interpreting clicks is now trivial: if you add a `MouseListener` to each of those cells, `c.row` will tell you the row it is on, `c.block` will reply with the block, and so on and so forth.\r\n\r\nInitializing those cells is also very easy:\r\n\r\n      for (int row=0; row&lt;DIM; row++) {\r\n         for (int col=0; col&lt;DIM; col++) {\r\n            SudokuCell c = new SudokuCell((row/3)*3 + col/3, row, col);\r\n            // add to panel for display, and to internal DIMxDIM array too.\r\n         }\r\n      }","title":"Translating coordinates from 9 layouts within a larger one, to two-dimensional array?","body":"<p>I would not use 9 panels with 9 inputs each; instead, I would use single panel with 81 inputs, arranged in a 9x9 grid. Instead of <code>JTextFields</code>, I would define a <code>public static class SudokuCell extends JTextField</code>, so that, each time you create a new cell, you can keep all its tracking information inside:</p>\n<pre><code>  public static class SudokuCell extends JTextField {\n   \n      public final int block; // 0 to 9, you call it `i`\n      public final int row;   // 0 to 9 again\n      public final int col;   // again 0-9\n\n      public SudokuCell(int block, int row, int col) {\n           // ... assign to attributes\n      }\n  }\n</code></pre>\n<p>The advantage is that interpreting clicks is now trivial: if you add a <code>MouseListener</code> to each of those cells, <code>c.row</code> will tell you the row it is on, <code>c.block</code> will reply with the block, and so on and so forth.</p>\n<p>Initializing those cells is also very easy:</p>\n<pre><code>  for (int row=0; row&lt;DIM; row++) {\n     for (int col=0; col&lt;DIM; col++) {\n        SudokuCell c = new SudokuCell((row/3)*3 + col/3, row, col);\n        // add to panel for display, and to internal DIMxDIM array too.\n     }\n  }\n</code></pre>\n"}],"owner":{"account_id":5533651,"reputation":846,"user_id":4392781,"accept_rate":0,"display_name":"Tarmiac"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":34,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1646071354,"creation_date":1646068403,"question_id":71298651,"body_markdown":"So I have a Sudoku grid which consists of one large 3x3 GridLayout and each of its elements consists of a smaller 3x3 GridLayout of JTextFields. My issue here is that my Sudoku will be in the form of a 2D array but the layout structure does not look the same. The image below shows how the coordinates look like in the layout form. My question is if and then how I can &quot;translate&quot; the coordinates from array form to &quot;layout&quot;-form? \r\n\r\n(I guess a problem could be that the outer GridLayout loops 9 times linearly while the inner ones loop 3x3 in 2D)\r\n\r\n[![enter image description here][1]][1]\r\n\r\n```\r\n        int[][] matrix = s.getMatrix();\r\n\t\tJPanel p1 = new JPanel();\r\n\t\t\r\n\t\tgl.setHgap(4);\r\n\t\tgl.setVgap(4);\r\n\t\tp1.setBackground(Color.black);\r\n\t\tp1.setSize(WIDTH, (HEIGHT - PANEL_HEIGHT));\r\n\t\tp1.setLayout(gl);\r\n\t\t\t\t\r\n\t\tfor(int i = 0; i &lt; 9; i++) {\r\n\t\t\tJPanel p = new JPanel();\r\n\t\t\tGridLayout local_gl = new GridLayout(3,3);\r\n\t\t\tlocal_gl.setHgap(2);\r\n\t\t\tlocal_gl.setVgap(2);\r\n\t\t\tp.setBackground(Color.black);\r\n\t\t\tp.setSize(WIDTH / 3, (HEIGHT - PANEL_HEIGHT) / 3);\r\n\t\t\tp.setLayout(local_gl);\r\n\t\t\t\r\n\t\t\tp1.add(p);\r\n\t\t\t\r\n\t\t\tfor(int row = 0; row &lt; 3; row++) {\r\n\t\t\t\tfor(int col = 0; col &lt; 3; col++) {\r\n\t\t\t\t\tJTextField jtf = new JTextField(&quot;  &quot; + Integer.toString(matrix[row][col]));\r\n\t\t\t\t\tif(jtf.getText().trim().equals(&quot;0&quot;)) {\r\n\t\t\t\t\t\tjtf.setText(&quot;  &quot;);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tjtf.setFont(new Font(&quot;Times New Roman&quot;, Font.BOLD, 30));\r\n\t\t\t\t\tp.add(jtf);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n```\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/xjQZ6.png\r\n\r\n-----------------------------------------\r\n\r\nThis solution works. \r\n\r\n```\r\nJTextField jtf = new JTextField(&quot;  &quot; + Integer.toString(matrix[translateRowToY(i, row)][translateColToX(i, col)]));\r\n```\r\n\r\n```\r\nprivate int translateColToX(int i, int col) {\r\n\t\tif(i == 2 || i == 5 || i == 8) {\r\n\t\t\treturn col + 6;\r\n\t\t}else if(i == 1 || i == 4 || i == 7) {\r\n\t\t\treturn col + 3;\r\n\t\t}else if(i == 0 || i == 3 || i == 6) {\r\n\t\t\treturn col;\r\n\t\t}else {\r\n\t\t\treturn -1;\t\r\n\t\t}\r\n\t}\r\n\t\r\nprivate int translateRowToY(int i, int row) {\r\n\t\tif(i &gt;= 0 &amp;&amp; i &lt; 3) {\r\n\t\t\treturn row;\r\n\t\t}else if(i &gt;= 3 &amp;&amp; i &lt; 6) {\r\n\t\t\treturn row + 3;\r\n\t\t}else if(i &gt;= 6 &amp;&amp; i &lt; 9) {\r\n\t\t\treturn row + 6;\r\n\t\t}else {\r\n\t\t\treturn -1;\r\n\t\t}\r\n\t}\r\n```","title":"Translating coordinates from 9 layouts within a larger one, to two-dimensional array?","body":"<p>So I have a Sudoku grid which consists of one large 3x3 GridLayout and each of its elements consists of a smaller 3x3 GridLayout of JTextFields. My issue here is that my Sudoku will be in the form of a 2D array but the layout structure does not look the same. The image below shows how the coordinates look like in the layout form. My question is if and then how I can &quot;translate&quot; the coordinates from array form to &quot;layout&quot;-form?</p>\n<p>(I guess a problem could be that the outer GridLayout loops 9 times linearly while the inner ones loop 3x3 in 2D)</p>\n<p><a href=\"https://i.stack.imgur.com/xjQZ6.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/xjQZ6.png\" alt=\"enter image description here\" /></a></p>\n<pre><code>        int[][] matrix = s.getMatrix();\n        JPanel p1 = new JPanel();\n        \n        gl.setHgap(4);\n        gl.setVgap(4);\n        p1.setBackground(Color.black);\n        p1.setSize(WIDTH, (HEIGHT - PANEL_HEIGHT));\n        p1.setLayout(gl);\n                \n        for(int i = 0; i &lt; 9; i++) {\n            JPanel p = new JPanel();\n            GridLayout local_gl = new GridLayout(3,3);\n            local_gl.setHgap(2);\n            local_gl.setVgap(2);\n            p.setBackground(Color.black);\n            p.setSize(WIDTH / 3, (HEIGHT - PANEL_HEIGHT) / 3);\n            p.setLayout(local_gl);\n            \n            p1.add(p);\n            \n            for(int row = 0; row &lt; 3; row++) {\n                for(int col = 0; col &lt; 3; col++) {\n                    JTextField jtf = new JTextField(&quot;  &quot; + Integer.toString(matrix[row][col]));\n                    if(jtf.getText().trim().equals(&quot;0&quot;)) {\n                        jtf.setText(&quot;  &quot;);\n                    }\n                    jtf.setFont(new Font(&quot;Times New Roman&quot;, Font.BOLD, 30));\n                    p.add(jtf);\n                }\n            }\n        }\n</code></pre>\n<hr />\n<p>This solution works.</p>\n<pre><code>JTextField jtf = new JTextField(&quot;  &quot; + Integer.toString(matrix[translateRowToY(i, row)][translateColToX(i, col)]));\n</code></pre>\n<pre><code>private int translateColToX(int i, int col) {\n        if(i == 2 || i == 5 || i == 8) {\n            return col + 6;\n        }else if(i == 1 || i == 4 || i == 7) {\n            return col + 3;\n        }else if(i == 0 || i == 3 || i == 6) {\n            return col;\n        }else {\n            return -1;  \n        }\n    }\n    \nprivate int translateRowToY(int i, int row) {\n        if(i &gt;= 0 &amp;&amp; i &lt; 3) {\n            return row;\n        }else if(i &gt;= 3 &amp;&amp; i &lt; 6) {\n            return row + 3;\n        }else if(i &gt;= 6 &amp;&amp; i &lt; 9) {\n            return row + 6;\n        }else {\n            return -1;\n        }\n    }\n</code></pre>\n"},{"tags":["java","c#","encryption","tripledes"],"comments":[{"owner":{"account_id":420575,"reputation":5030,"user_id":798346,"accept_rate":56,"display_name":"Jim Rhodes"},"score":0,"creation_date":1645911826,"post_id":71280332,"comment_id":125996033,"body_markdown":"Is `myEncryptionKey` the same as the string being passed to the `Crypto` constructor?","body":"Is <code>myEncryptionKey</code> the same as the string being passed to the <code>Crypto</code> constructor?"},{"owner":{"account_id":288696,"reputation":91230,"user_id":589259,"accept_rate":82,"display_name":"Maarten Bodewes"},"score":0,"creation_date":1645913385,"post_id":71280332,"comment_id":125996337,"body_markdown":"@JimRhodes Does it matter if no attempt is even made to implement `PasswordDeriveBytes`? Note that that is basically PBKDF1, but with &quot;special&quot; Microsoft code to extend it if the result is larger than the hash, in this case SHA-1. Special in the sense that it is entirely insecure and **should** be replaced directly.","body":"@JimRhodes Does it matter if no attempt is even made to implement <code>PasswordDeriveBytes</code>? Note that that is basically PBKDF1, but with &quot;special&quot; Microsoft code to extend it if the result is larger than the hash, in this case SHA-1. Special in the sense that it is entirely insecure and <b>should</b> be replaced directly."},{"owner":{"account_id":12359353,"reputation":42427,"user_id":9014097,"display_name":"Topaco"},"score":0,"creation_date":1646038008,"post_id":71280332,"comment_id":126017044,"body_markdown":"The C# code does not use the algorithm based on PBKDF1 extended by MS, but the algorithm from MS CAPI&#39;s `CryptoDeriveKey()`.","body":"The C# code does not use the algorithm based on PBKDF1 extended by MS, but the algorithm from MS CAPI&#39;s <code>CryptoDeriveKey()</code>."}],"answers":[{"tags":[],"owner":{"account_id":12359353,"reputation":42427,"user_id":9014097,"display_name":"Topaco"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1646071093,"creation_date":1645964076,"answer_id":71284660,"question_id":71280332,"body_markdown":"The C# code uses `PasswordDeriveBytes#CryptDeriveKey()` as key derivation function which is a wrapper around CAPI&#39;s `CryptDeriveKey()` function (see [here][2]). This functionality is missing in the Java code and is one of the reasons for the incompatibility.\r\n \r\n`PasswordDeriveBytes#CryptDeriveKey()` is not to be confused with `PasswordDeriveBytes#GetBytes()`. The latter uses the (by MS) extended implementation of the PBKDF1 algorithm mentioned in the comments, which is not applied here.\r\n\r\nThe algorithm of `CryptDeriveKey()` is described [here][3] and an implementation can be found [here][4]: \r\n\r\n```java\r\npublic static byte[] CryptDeriveKey(byte[] hBaseData, String hashAlgorithm, int requiredLength) throws NoSuchAlgorithmException {\r\n\tint keyLength = hBaseData.length;\r\n\tbyte[] derivedKey = new byte[requiredLength];\r\n\tif (keyLength &gt;= requiredLength) {\r\n\t\tfor (int i = 0; i &lt; requiredLength; i++) {\r\n\t\t\tderivedKey[i] = hBaseData[i];\r\n\t\t}\r\n\t\treturn derivedKey;\r\n\t}\r\n\r\n\tbyte[] buff1 = new byte[64];\r\n\tbyte[] buff2 = new byte[64];\r\n\tArrays.fill(buff1, (byte) 0x36);\r\n\tArrays.fill(buff2, (byte) 0x5C);\r\n\tfor (int i = 0; i &lt; keyLength; i++) {\r\n\t\tbuff1[i] ^= hBaseData[i];\r\n\t\tbuff2[i] ^= hBaseData[i];\r\n\t}\r\n\r\n\tMessageDigest md = MessageDigest.getInstance(hashAlgorithm);\r\n\tmd.reset();\r\n\tbyte[] result1 = md.digest(buff1);\r\n\tmd.reset();\r\n\tbyte[] result2 = md.digest(buff2);\r\n\r\n\tfor (int i = 0; i &lt; requiredLength; i++) {\r\n\t\tif (i &lt; result1.length)\r\n\t\t\tderivedKey[i] = result1[i];\r\n\t\telse\r\n\t\t\tderivedKey[i] = result2[i - result1.length];\r\n\t}\r\n\treturn derivedKey;\r\n}\r\n```\r\nNote that `CryptDeriveKey()` does not expect the passphrase as first parameter, but the hash of the passphrase.\r\n\r\nExample of usage:\r\n\r\n```java\r\nString passphrase = &quot;my passphrase&quot;;\r\nString digestName = &quot;SHA-1&quot;; \r\nMessageDigest md = MessageDigest.getInstance(digestName);\r\nbyte[] hash = md.digest(passphrase.getBytes(&quot;Cp1252&quot;));\r\nbyte[] key = CryptDeriveKey(hash, digestName, 24);\r\nSystem.out.println(HexFormat.of().formatHex(key)); // 5de508082bfe0924356d881c8cde15a540c92f267ef5a416\r\n```\r\n\r\nNote that in the case of DES or TripleDES the parity bits are not adjusted. This happens implicitly in `SecretKeyFactory#generateSecret()`.\r\n\r\n-----------------\r\n\r\nAdditional issues: Apart from key derivation, the CBC mode with a zero IV, PKCS#7 padding and the appropriate encodings for plaintext (Cp1252) and ciphertext (hex encoding) are to be used in the Java code. Since the C# code removes the last byte of the ciphertext for unknown reasons, a dummy byte must be added to the end of the ciphertext in the Java code.\r\n\r\nAlthough the C# code can not be changed according to the description, the following notes on vulnerabilities: The key derivation is weak (this applies to both `CryptDeriveKey()` and PBKDF1) and should be replaced by a dedicated password-based key derivation like Argon2 or PBKDF2. A static IV (like a zero IV) is also weak. TripleDES is deprecated and slow and should be replaced with a modern algorithm like AES.\r\n\r\n[1]: https://stackoverflow.com/a/27798812/9014097\r\n[2]: https://learn.microsoft.com/de-de/archive/blogs/shawnfa/generating-a-key-from-a-password\r\n[3]: https://learn.microsoft.com/en-us/windows/win32/api/wincrypt/nf-wincrypt-cryptderivekey\r\n[4]: https://www.databasedevelop.com/article/11530018/Java+version+of+MS+CryptDeriveKey()\r\n[5]: https://gist.github.com/ar/791674\r\n[6]: https://stackoverflow.com/q/9655181/9014097","title":"TripleDES Encryption in java for decryption in C#","body":"<p>The C# code uses <code>PasswordDeriveBytes#CryptDeriveKey()</code> as key derivation function which is a wrapper around CAPI's <code>CryptDeriveKey()</code> function (see <a href=\"https://learn.microsoft.com/de-de/archive/blogs/shawnfa/generating-a-key-from-a-password\" rel=\"nofollow noreferrer\">here</a>). This functionality is missing in the Java code and is one of the reasons for the incompatibility.</p>\n<p><code>PasswordDeriveBytes#CryptDeriveKey()</code> is not to be confused with <code>PasswordDeriveBytes#GetBytes()</code>. The latter uses the (by MS) extended implementation of the PBKDF1 algorithm mentioned in the comments, which is not applied here.</p>\n<p>The algorithm of <code>CryptDeriveKey()</code> is described <a href=\"https://learn.microsoft.com/en-us/windows/win32/api/wincrypt/nf-wincrypt-cryptderivekey\" rel=\"nofollow noreferrer\">here</a> and an implementation can be found <a href=\"https://www.databasedevelop.com/article/11530018/Java+version+of+MS+CryptDeriveKey()\" rel=\"nofollow noreferrer\">here</a>:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public static byte[] CryptDeriveKey(byte[] hBaseData, String hashAlgorithm, int requiredLength) throws NoSuchAlgorithmException {\n    int keyLength = hBaseData.length;\n    byte[] derivedKey = new byte[requiredLength];\n    if (keyLength &gt;= requiredLength) {\n        for (int i = 0; i &lt; requiredLength; i++) {\n            derivedKey[i] = hBaseData[i];\n        }\n        return derivedKey;\n    }\n\n    byte[] buff1 = new byte[64];\n    byte[] buff2 = new byte[64];\n    Arrays.fill(buff1, (byte) 0x36);\n    Arrays.fill(buff2, (byte) 0x5C);\n    for (int i = 0; i &lt; keyLength; i++) {\n        buff1[i] ^= hBaseData[i];\n        buff2[i] ^= hBaseData[i];\n    }\n\n    MessageDigest md = MessageDigest.getInstance(hashAlgorithm);\n    md.reset();\n    byte[] result1 = md.digest(buff1);\n    md.reset();\n    byte[] result2 = md.digest(buff2);\n\n    for (int i = 0; i &lt; requiredLength; i++) {\n        if (i &lt; result1.length)\n            derivedKey[i] = result1[i];\n        else\n            derivedKey[i] = result2[i - result1.length];\n    }\n    return derivedKey;\n}\n</code></pre>\n<p>Note that <code>CryptDeriveKey()</code> does not expect the passphrase as first parameter, but the hash of the passphrase.</p>\n<p>Example of usage:</p>\n<pre class=\"lang-java prettyprint-override\"><code>String passphrase = &quot;my passphrase&quot;;\nString digestName = &quot;SHA-1&quot;; \nMessageDigest md = MessageDigest.getInstance(digestName);\nbyte[] hash = md.digest(passphrase.getBytes(&quot;Cp1252&quot;));\nbyte[] key = CryptDeriveKey(hash, digestName, 24);\nSystem.out.println(HexFormat.of().formatHex(key)); // 5de508082bfe0924356d881c8cde15a540c92f267ef5a416\n</code></pre>\n<p>Note that in the case of DES or TripleDES the parity bits are not adjusted. This happens implicitly in <code>SecretKeyFactory#generateSecret()</code>.</p>\n<hr />\n<p>Additional issues: Apart from key derivation, the CBC mode with a zero IV, PKCS#7 padding and the appropriate encodings for plaintext (Cp1252) and ciphertext (hex encoding) are to be used in the Java code. Since the C# code removes the last byte of the ciphertext for unknown reasons, a dummy byte must be added to the end of the ciphertext in the Java code.</p>\n<p>Although the C# code can not be changed according to the description, the following notes on vulnerabilities: The key derivation is weak (this applies to both <code>CryptDeriveKey()</code> and PBKDF1) and should be replaced by a dedicated password-based key derivation like Argon2 or PBKDF2. A static IV (like a zero IV) is also weak. TripleDES is deprecated and slow and should be replaced with a modern algorithm like AES.</p>\n"}],"owner":{"account_id":5727632,"reputation":60,"user_id":4524189,"display_name":"Mahendra Singh"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":372,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":71284660,"answer_count":1,"score":1,"last_activity_date":1646071093,"creation_date":1645910184,"question_id":71280332,"body_markdown":"I have C# code which decrypts encrypted token passed by another application. I can not change this part.\r\nNow i&#39;m writing an application in java which will encrypt my token, that would be passed to C# application.\r\n\r\nI&#39;m not able to match encrypted string with java code. Any help would be appreciated.\r\nThank you.\r\n\r\n&gt; C# Code\r\n\r\n&lt;!-- language: lang-cs --&gt;\r\n    public class Crypto\r\n    {\r\n        private TripleDES DesInstance = null;\r\n\r\n        public Crypto(string key)\r\n        {\r\n            byte[] password = Encoding.GetEncoding(1252).GetBytes(key);\r\n            DesInstance = new System.Security.Cryptography.TripleDESCryptoServiceProvider();\r\n            PasswordDeriveBytes pdb = new PasswordDeriveBytes(password, null);\r\n            DesInstance.IV = new byte[8];\r\n            DesInstance.Key = pdb.CryptDeriveKey(&quot;TripleDES&quot;, &quot;SHA1&quot;, 192, DesInstance.IV);\r\n        }\r\n\r\n        public string Decrypt(string cipheredText)\r\n        {\r\n            byte[] cipherText = StringToByteArray(cipheredText);\r\n            string plainText = null;\r\n\r\n            ICryptoTransform transform = DesInstance.CreateDecryptor();\r\n\r\n            MemoryStream memStreamEncryptedData = new MemoryStream(cipherText, 0, cipherText.Length - 1);\r\n            CryptoStream encStream = new CryptoStream(memStreamEncryptedData, transform, CryptoStreamMode.Read);\r\n            using (StreamReader srDecrypt = new StreamReader(encStream, Encoding.GetEncoding(1252)))\r\n            {\r\n                plainText = srDecrypt.ReadToEnd();\r\n            }\r\n\r\n            return plainText;\r\n        }\r\n\r\n        private byte[] StringToByteArray(string hex)\r\n        {\r\n            return Enumerable.Range(0, hex.Length)\r\n                             .Where(x =&gt; x % 2 == 0)\r\n                             .Select(x =&gt; Convert.ToByte(hex.Substring(x, 2), 16))\r\n                             .ToArray();\r\n        }\r\n    }\r\n\r\n&gt; Java Code\r\n\r\n&lt;!-- language: lang-java --&gt;\r\n    public class TripleDes {\r\n\r\n        private static final String UNICODE_FORMAT = &quot;UTF-8&quot;;\r\n        public static final String DESEDE_ENCRYPTION_SCHEME = &quot;DESede&quot;;\r\n        private KeySpec ks;\r\n        private SecretKeyFactory skf;\r\n        private Cipher cipher;\r\n        byte[] arrayBytes;\r\n        private String myEncryptionKey;\r\n        private String myEncryptionScheme;\r\n        SecretKey key;\r\n\r\n        public TripleDes() throws Exception {\r\n            myEncryptionKey = &quot;045e466ccc34a1f1688640d0441601b7ae2c&quot;;\r\n            myEncryptionScheme = DESEDE_ENCRYPTION_SCHEME;\r\n            arrayBytes = myEncryptionKey.getBytes(UNICODE_FORMAT);\r\n            ks = new DESedeKeySpec(arrayBytes);\r\n            skf = SecretKeyFactory.getInstance(myEncryptionScheme);\r\n            cipher = Cipher.getInstance(myEncryptionScheme);\r\n            key = skf.generateSecret(ks);\r\n        }\r\n\r\n        public String encrypt(String unencryptedString) {\r\n            String encryptedString = null;\r\n            try {\r\n                cipher.init(Cipher.ENCRYPT_MODE, key);\r\n                byte[] plainText = unencryptedString.getBytes(UNICODE_FORMAT);\r\n                byte[] encryptedText = cipher.doFinal(plainText);\r\n                encryptedString = new String(Base64.encodeBase64(encryptedText));\r\n            } catch (Exception e) {\r\n                e.printStackTrace();\r\n            }\r\n            return encryptedString;\r\n        }\r\n\r\n        public String decrypt(String encryptedString) {\r\n            String decryptedText = null;\r\n            try {\r\n                cipher.init(Cipher.DECRYPT_MODE, key);\r\n                byte[] encryptedText = Base64.decodeBase64(encryptedString);\r\n                byte[] plainText = cipher.doFinal(encryptedText);\r\n                decryptedText = new String(plainText);\r\n            } catch (Exception e) {\r\n                e.printStackTrace();\r\n            }\r\n            return decryptedText;\r\n        }\r\n    }\r\n\r\n\r\n","title":"TripleDES Encryption in java for decryption in C#","body":"<p>I have C# code which decrypts encrypted token passed by another application. I can not change this part.\nNow i'm writing an application in java which will encrypt my token, that would be passed to C# application.</p>\n<p>I'm not able to match encrypted string with java code. Any help would be appreciated.\nThank you.</p>\n<blockquote>\n<p>C# Code</p>\n</blockquote>\n<pre class=\"lang-cs prettyprint-override\"><code>public class Crypto\n{\n    private TripleDES DesInstance = null;\n\n    public Crypto(string key)\n    {\n        byte[] password = Encoding.GetEncoding(1252).GetBytes(key);\n        DesInstance = new System.Security.Cryptography.TripleDESCryptoServiceProvider();\n        PasswordDeriveBytes pdb = new PasswordDeriveBytes(password, null);\n        DesInstance.IV = new byte[8];\n        DesInstance.Key = pdb.CryptDeriveKey(&quot;TripleDES&quot;, &quot;SHA1&quot;, 192, DesInstance.IV);\n    }\n\n    public string Decrypt(string cipheredText)\n    {\n        byte[] cipherText = StringToByteArray(cipheredText);\n        string plainText = null;\n\n        ICryptoTransform transform = DesInstance.CreateDecryptor();\n\n        MemoryStream memStreamEncryptedData = new MemoryStream(cipherText, 0, cipherText.Length - 1);\n        CryptoStream encStream = new CryptoStream(memStreamEncryptedData, transform, CryptoStreamMode.Read);\n        using (StreamReader srDecrypt = new StreamReader(encStream, Encoding.GetEncoding(1252)))\n        {\n            plainText = srDecrypt.ReadToEnd();\n        }\n\n        return plainText;\n    }\n\n    private byte[] StringToByteArray(string hex)\n    {\n        return Enumerable.Range(0, hex.Length)\n                         .Where(x =&gt; x % 2 == 0)\n                         .Select(x =&gt; Convert.ToByte(hex.Substring(x, 2), 16))\n                         .ToArray();\n    }\n}\n</code></pre>\n<blockquote>\n<p>Java Code</p>\n</blockquote>\n<pre class=\"lang-java prettyprint-override\"><code>public class TripleDes {\n\n    private static final String UNICODE_FORMAT = &quot;UTF-8&quot;;\n    public static final String DESEDE_ENCRYPTION_SCHEME = &quot;DESede&quot;;\n    private KeySpec ks;\n    private SecretKeyFactory skf;\n    private Cipher cipher;\n    byte[] arrayBytes;\n    private String myEncryptionKey;\n    private String myEncryptionScheme;\n    SecretKey key;\n\n    public TripleDes() throws Exception {\n        myEncryptionKey = &quot;045e466ccc34a1f1688640d0441601b7ae2c&quot;;\n        myEncryptionScheme = DESEDE_ENCRYPTION_SCHEME;\n        arrayBytes = myEncryptionKey.getBytes(UNICODE_FORMAT);\n        ks = new DESedeKeySpec(arrayBytes);\n        skf = SecretKeyFactory.getInstance(myEncryptionScheme);\n        cipher = Cipher.getInstance(myEncryptionScheme);\n        key = skf.generateSecret(ks);\n    }\n\n    public String encrypt(String unencryptedString) {\n        String encryptedString = null;\n        try {\n            cipher.init(Cipher.ENCRYPT_MODE, key);\n            byte[] plainText = unencryptedString.getBytes(UNICODE_FORMAT);\n            byte[] encryptedText = cipher.doFinal(plainText);\n            encryptedString = new String(Base64.encodeBase64(encryptedText));\n        } catch (Exception e) {\n            e.printStackTrace();\n        }\n        return encryptedString;\n    }\n\n    public String decrypt(String encryptedString) {\n        String decryptedText = null;\n        try {\n            cipher.init(Cipher.DECRYPT_MODE, key);\n            byte[] encryptedText = Base64.decodeBase64(encryptedString);\n            byte[] plainText = cipher.doFinal(encryptedText);\n            decryptedText = new String(plainText);\n        } catch (Exception e) {\n            e.printStackTrace();\n        }\n        return decryptedText;\n    }\n}\n</code></pre>\n"},{"tags":["java","graph","depth-first-search","breadth-first-search"],"answers":[{"tags":[],"owner":{"account_id":23959668,"reputation":26587,"user_id":17949945,"display_name":"Alexander Ivanchenko"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1645984542,"creation_date":1645983481,"answer_id":71287041,"question_id":71286470,"body_markdown":"There are several mistakes in your solution:\r\n* you not checking whether you find the target node;\r\n* case, when it is not possible to reach the end from the start node, is not covered in your solution;\r\n* the list `visited` will contain all a sequence of visited nodes, but not a path from the start node to end node;\r\n* method `contains()` costs **O(n)** for a list, you definitely have to use a `HashSet` for that purpose;\r\n* `ArrayDeque` will perform better than `LinkedList` (technically it&#39;s not a mistake but rather a strong recommendation).\r\n\r\nSo to fix your code you need to add a check whether the *node* to which points the *current edge* is **equal** to the *end node* and a *boolean flag* to **break** out from the loop (there&#39;s no need to do farther iterations).\r\n\r\nIn the code below `HashMap` **paths** is used for two purposes:\r\n* to track the parent node for each visited node in order to restore the path from start to end;\r\n* to check whether a new node is already visited.\r\n\r\nMethod `getPath()` will either return list nodes that represents a direct path from start to end an empty list if the path doesn&#39;t exist. \r\n\r\n\r\n    public List&lt;T&gt; breadthFirstSearch(T start, T end) {\r\n        Map&lt;T, T&gt; paths = new HashMap&lt;&gt;();\r\n        Queue&lt;T&gt; queue = new ArrayDeque&lt;&gt;();\r\n        queue.add(start);\r\n        paths.put(start, null);\r\n        boolean isFound = false;\r\n        while (!isFound &amp;&amp; !queue.isEmpty()) {\r\n            T currentNode = queue.remove();\r\n            for (Edge&lt;T&gt; edge : graphRep.get(currentNode)) {\r\n                if (paths.containsKey(edge.node)) {\r\n                    continue;\r\n                }\r\n                paths.put(edge.node, currentNode);\r\n                // end node was found\r\n                if (edge.node.equals(end)) {\r\n                    isFound = true;\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n        return getPath(start, end, paths);\r\n    }\r\n\r\n    public List&lt;T&gt; getPath(T start, T end,  Map&lt;T, T&gt; paths) {\r\n        List&lt;T&gt; path = new ArrayList&lt;T&gt;();\r\n        T current = end;\r\n        path.add(current);\r\n        while (current != start &amp;&amp; current != null) { // if there&#39;s no path from start to end current eventually will become null\r\n            path.add(paths.get(current));\r\n            current = paths.get(current);\r\n        }\r\n        System.out.println(path);\r\n        Collections.reverse(path);\r\n        return current != null ? path : Collections.emptyList();\r\n    }","title":"Breadth-first search from one node to another","body":"<p>There are several mistakes in your solution:</p>\n<ul>\n<li>you not checking whether you find the target node;</li>\n<li>case, when it is not possible to reach the end from the start node, is not covered in your solution;</li>\n<li>the list <code>visited</code> will contain all a sequence of visited nodes, but not a path from the start node to end node;</li>\n<li>method <code>contains()</code> costs <strong>O(n)</strong> for a list, you definitely have to use a <code>HashSet</code> for that purpose;</li>\n<li><code>ArrayDeque</code> will perform better than <code>LinkedList</code> (technically it's not a mistake but rather a strong recommendation).</li>\n</ul>\n<p>So to fix your code you need to add a check whether the <em>node</em> to which points the <em>current edge</em> is <strong>equal</strong> to the <em>end node</em> and a <em>boolean flag</em> to <strong>break</strong> out from the loop (there's no need to do farther iterations).</p>\n<p>In the code below <code>HashMap</code> <strong>paths</strong> is used for two purposes:</p>\n<ul>\n<li>to track the parent node for each visited node in order to restore the path from start to end;</li>\n<li>to check whether a new node is already visited.</li>\n</ul>\n<p>Method <code>getPath()</code> will either return list nodes that represents a direct path from start to end an empty list if the path doesn't exist.</p>\n<pre><code>public List&lt;T&gt; breadthFirstSearch(T start, T end) {\n    Map&lt;T, T&gt; paths = new HashMap&lt;&gt;();\n    Queue&lt;T&gt; queue = new ArrayDeque&lt;&gt;();\n    queue.add(start);\n    paths.put(start, null);\n    boolean isFound = false;\n    while (!isFound &amp;&amp; !queue.isEmpty()) {\n        T currentNode = queue.remove();\n        for (Edge&lt;T&gt; edge : graphRep.get(currentNode)) {\n            if (paths.containsKey(edge.node)) {\n                continue;\n            }\n            paths.put(edge.node, currentNode);\n            // end node was found\n            if (edge.node.equals(end)) {\n                isFound = true;\n                break;\n            }\n        }\n    }\n    return getPath(start, end, paths);\n}\n\npublic List&lt;T&gt; getPath(T start, T end,  Map&lt;T, T&gt; paths) {\n    List&lt;T&gt; path = new ArrayList&lt;T&gt;();\n    T current = end;\n    path.add(current);\n    while (current != start &amp;&amp; current != null) { // if there's no path from start to end current eventually will become null\n        path.add(paths.get(current));\n        current = paths.get(current);\n    }\n    System.out.println(path);\n    Collections.reverse(path);\n    return current != null ? path : Collections.emptyList();\n}\n</code></pre>\n"}],"owner":{"account_id":24018160,"reputation":55,"user_id":18000842,"display_name":"RazerMackham"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":483,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":71287041,"answer_count":1,"score":1,"last_activity_date":1646071052,"creation_date":1645979078,"question_id":71286470,"body_markdown":"I&#39;m implementing my own graph class, and I&#39;m currently making my own BFS-search method. Right now it traverses all vertices from one root vertex.\r\n\r\n    public List&lt;T&gt; breadthFirstSearch(T start, T end) {\r\n        List&lt;T&gt; visited = new ArrayList&lt;T&gt;();\r\n        Queue&lt;T&gt; path = new LinkedList&lt;T&gt;();\r\n        visited.add(start);\r\n        path.add(start);\r\n        while (!path.isEmpty()){\r\n            T currentNode = path.poll();\r\n            for (Edge&lt;T&gt; edge: graphRep.get(currentNode)) {\r\n                if (!visited.contains(edge.node)) {\r\n                    visited.add(edge.node);\r\n                    path.add(edge.node);\r\n                }\r\n            }\r\n        }\r\n        System.out.println(visited);\r\n        return visited;\r\n    }\r\n\r\nWhat I want to do is to find the path from vertex start to vertex end, but right now it finds the path between the start to all nodes. How do I change my code so that it only finds the path between the start to end?","title":"Breadth-first search from one node to another","body":"<p>I'm implementing my own graph class, and I'm currently making my own BFS-search method. Right now it traverses all vertices from one root vertex.</p>\n<pre><code>public List&lt;T&gt; breadthFirstSearch(T start, T end) {\n    List&lt;T&gt; visited = new ArrayList&lt;T&gt;();\n    Queue&lt;T&gt; path = new LinkedList&lt;T&gt;();\n    visited.add(start);\n    path.add(start);\n    while (!path.isEmpty()){\n        T currentNode = path.poll();\n        for (Edge&lt;T&gt; edge: graphRep.get(currentNode)) {\n            if (!visited.contains(edge.node)) {\n                visited.add(edge.node);\n                path.add(edge.node);\n            }\n        }\n    }\n    System.out.println(visited);\n    return visited;\n}\n</code></pre>\n<p>What I want to do is to find the path from vertex start to vertex end, but right now it finds the path between the start to all nodes. How do I change my code so that it only finds the path between the start to end?</p>\n"},{"tags":["java","spring","multithreading","spring-boot","scheduled-tasks"],"answers":[{"tags":[],"owner":{"account_id":422870,"reputation":25925,"user_id":801894,"display_name":"Solomon Slow"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1646070875,"creation_date":1646070875,"answer_id":71299094,"question_id":71298260,"body_markdown":"&gt; each schedule call will need a separate thread to run, right?\r\n\r\nProbably not.\r\n\r\nAll we know from the code that you showed is that `ses` refers to a `ScheduledExecutorService`, and since that&#39;s only an interface, we don&#39;t actually know what it will do; but any practical implementation of that interface most likely will be some kind of [_thread pool_](http://tutorials.jenkov.com/java-concurrency/thread-pools.html).\r\n\r\nA simple thread pool has a [_blocking queue_](https://tutorials.jenkov.com/java-concurrency/blocking-queues.html) of tasks, and a small number of _worker threads_ that each sit in a loop awaiting tasks and performing them;\r\n\r\n``` lang-java\r\n    while (true) {\r\n        Runnable task = queue.take();\r\n        task.run();\r\n    }\r\n```\r\n\r\nIn this way, the number of threads used can be much smaller than the number of tasks that are submitted to the queue.\r\n\r\nA `ScheduledExecutorService` such as [`ScheduledThreadPoolExecutor`](https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/concurrent/ScheduledThreadPoolExecutor.html) works in pretty much the same way, except that the queue is some kind of [_priority queue_](https://en.wikipedia.org/wiki/Priority_queue). A priority queue returns the tasks in the order in which they are scheduled to run instead of returning them in the same order as they were submitted. Each worker loops, waiting until a task at the head of the queue is due, and then it take()s the task, runs it, and goes back to await the next task, same as in the simple thread pool.","title":"Task schedule itself inside run() method will cause too many thread created?","body":"<blockquote>\n<p>each schedule call will need a separate thread to run, right?</p>\n</blockquote>\n<p>Probably not.</p>\n<p>All we know from the code that you showed is that <code>ses</code> refers to a <code>ScheduledExecutorService</code>, and since that's only an interface, we don't actually know what it will do; but any practical implementation of that interface most likely will be some kind of <a href=\"http://tutorials.jenkov.com/java-concurrency/thread-pools.html\" rel=\"nofollow noreferrer\"><em>thread pool</em></a>.</p>\n<p>A simple thread pool has a <a href=\"https://tutorials.jenkov.com/java-concurrency/blocking-queues.html\" rel=\"nofollow noreferrer\"><em>blocking queue</em></a> of tasks, and a small number of <em>worker threads</em> that each sit in a loop awaiting tasks and performing them;</p>\n<pre class=\"lang-java prettyprint-override\"><code>    while (true) {\n        Runnable task = queue.take();\n        task.run();\n    }\n</code></pre>\n<p>In this way, the number of threads used can be much smaller than the number of tasks that are submitted to the queue.</p>\n<p>A <code>ScheduledExecutorService</code> such as <a href=\"https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/concurrent/ScheduledThreadPoolExecutor.html\" rel=\"nofollow noreferrer\"><code>ScheduledThreadPoolExecutor</code></a> works in pretty much the same way, except that the queue is some kind of <a href=\"https://en.wikipedia.org/wiki/Priority_queue\" rel=\"nofollow noreferrer\"><em>priority queue</em></a>. A priority queue returns the tasks in the order in which they are scheduled to run instead of returning them in the same order as they were submitted. Each worker loops, waiting until a task at the head of the queue is due, and then it take()s the task, runs it, and goes back to await the next task, same as in the simple thread pool.</p>\n"}],"owner":{"account_id":1975034,"reputation":961,"user_id":1773011,"accept_rate":85,"display_name":"lightrek"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":173,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1646070875,"creation_date":1646066444,"question_id":71298260,"body_markdown":"According to this [post][1]:\r\n\r\n    public class ConditionCheckingTask implements Runnable \r\n    {\r\n        private final ScheduledExecutorService ses ;\r\n        private final Instant whenInstantiated = Instant.now() ;\r\n    \r\n        // Constructor\r\n        public ConditionCheckingTask( final ScheduledExecutorService ses ) {\r\n            this.ses = ses ;\r\n        }\r\n    \r\n        @Override\r\n        public void run() {\r\n            if( someConditionIsTrue ) {\r\n                doSomething ;\r\n            } else if ( ChronoUnit.MINUTES.between( this.whenInstantiated , Instant.now() ) &gt; 100000 ) {\r\n                // We have exceeded our time limit, so let this task die.\r\n                return ;\r\n            } else {  // Else wait a minute to check condition again.\r\n                this.ses.schedule( this , 1 , TimeUnit.MINUTES ) ;\r\n            }\r\n        }\r\n    }\r\n\r\nThe task schedule itself inside run() method. Suppose the time limit is 100000,  then 100000 threads will be created? Since each schedule call will need a separate thread to run, right?\r\n\r\n  [1]: https://stackoverflow.com/questions/71281530/why-not-implement-a-time-controlled-task-in-the-current-thread/71281676#71281676","title":"Task schedule itself inside run() method will cause too many thread created?","body":"<p>According to this <a href=\"https://stackoverflow.com/questions/71281530/why-not-implement-a-time-controlled-task-in-the-current-thread/71281676#71281676\">post</a>:</p>\n<pre><code>public class ConditionCheckingTask implements Runnable \n{\n    private final ScheduledExecutorService ses ;\n    private final Instant whenInstantiated = Instant.now() ;\n\n    // Constructor\n    public ConditionCheckingTask( final ScheduledExecutorService ses ) {\n        this.ses = ses ;\n    }\n\n    @Override\n    public void run() {\n        if( someConditionIsTrue ) {\n            doSomething ;\n        } else if ( ChronoUnit.MINUTES.between( this.whenInstantiated , Instant.now() ) &gt; 100000 ) {\n            // We have exceeded our time limit, so let this task die.\n            return ;\n        } else {  // Else wait a minute to check condition again.\n            this.ses.schedule( this , 1 , TimeUnit.MINUTES ) ;\n        }\n    }\n}\n</code></pre>\n<p>The task schedule itself inside run() method. Suppose the time limit is 100000,  then 100000 threads will be created? Since each schedule call will need a separate thread to run, right?</p>\n"},{"tags":["java","kubernetes","apache-pulsar"],"owner":{"account_id":23911160,"reputation":11,"user_id":17908088,"display_name":"Guillaume Roff&#233;"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":207,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1646070771,"creation_date":1641942355,"question_id":70674476,"body_markdown":"I am trying to create a Clickhouse sink connector with the Java API on a distant Pulsar cluster running on kubernetes but I experience some difficulties with it.\r\n\r\nMy cluster run on pulsar 2.8.1\r\n\r\n```\r\npulsarAdmin.sinks().createSinkWithUrl(\r\n     mySinkConfig,\r\n     &quot;https://archive.apache.org/dist/pulsar/pulsar-2.8.1/connectors/pulsar-io-jdbc-clickhouse-2.8.1.nar&quot;)\r\n```\r\n\r\n\r\n\r\nThe api returns well and seems to create the sink. \r\nI can get its status or its configuration however the status is in failure and when checking the pod on kubernetes I see the pod corresponding to the new sink crashing\r\n```\r\nNAME                                            READY   STATUS             RESTARTS   AGE\r\npf-my-tenant-test-sink6-ab222ce8-0        0/1     CrashLoopBackOff   15         57m\r\n```\r\nwith this in the k8s logs\r\n```\r\nnull\r\n\r\nReason: java.io.IOException: No such file or directory\r\n```\r\n\r\nHere is the command used by pulsar when creating the pod\r\n```\r\nsh -c\r\n      /pulsar/bin/pulsar-admin \r\n            --auth-plugin org.apache.pulsar.client.impl.auth.AuthenticationToken\r\n            --auth-params file:///etc/auth/token\r\n            --admin-url https://XXXX:8443/ functions download \r\n            --tenant my-tenant\r\n            --namespace test \r\n            --name sink6 \r\n            --destination-file /pulsar/download/pulsar_functions/functions17103366778764930042.tmp &amp;&amp; SHARD_ID=${POD_NAME##*-} &amp;&amp; echo shardId=${SHARD_ID} &amp;&amp; exec java -cp /pulsar/instances/java-instance.jar:/pulsar/instances/deps/* \r\n            -Dpulsar.functions.extra.dependencies.dir=/pulsar/instances/deps -Dpulsar.functions.instance.classpath=/pulsar/conf:::/pulsar/lib/*: \r\n            -Dlog4j.configurationFile=kubernetes_instance_log4j2.xml -Dpulsar.function.log.dir=logs/functions/my-tenant/test/sink6 \r\n            -Dpulsar.function.log.file=sink6-$SHARD_ID -Xmx1073741824 org.apache.pulsar.functions.instance.JavaInstanceMain \r\n            --jar /pulsar/download/pulsar_functions/functions17103366778764930042.tmp --instance_id $SHARD_ID --function_id 16d9bcab-abcd-2f4b-b536-d3fb5d1232ab \r\n            --function_version 8807b42e-b1fc-4495-862e-21fe27085eb7 \r\n            --function_details &#39;{&quot;tenant&quot;:&quot;my-tenant&quot;,&quot;namespace&quot;:&quot;test&quot;,&quot;name&quot;:&quot;sink6&quot;,&quot;className&quot;:&quot;org.apache.pulsar.functions.api.utils.IdentityFunction&quot;,&quot;autoAck&quot;:true,&quot;parallelism&quot;:1,&quot;source&quot;:{&quot;typeClassName&quot;:&quot;org.apache.pulsar.client.api.schema.GenericRecord&quot;,&quot;inputSpecs&quot;:{&quot;my-topic&quot;:{}},&quot;cleanupSubscription&quot;:true},&quot;sink&quot;:{&quot;className&quot;:&quot;org.apache.pulsar.io.jdbc.ClickHouseJdbcAutoSchemaSink&quot;,&quot;configs&quot;:&quot;{\\&quot;userName\\&quot;:\\&quot;XXXXX\\&quot;,\\&quot;password\\&quot;:\\&quot;XXXX\\&quot;,\\&quot;jdbcUrl\\&quot;:\\&quot;jdbc:clickhouse://XXXXXX\\&quot;,\\&quot;tableName\\&quot;:\\&quot;XXXXXXX\\&quot;}&quot;,&quot;typeClassName&quot;:&quot;org.apache.pulsar.client.api.schema.GenericRecord&quot;},&quot;resources&quot;:{&quot;cpu&quot;:1.0,&quot;ram&quot;:&quot;1234&quot;,&quot;disk&quot;:&quot;1234&quot;},&quot;componentType&quot;:&quot;SINK&quot;}&#39; \r\n            --pulsar_serviceurl pulsar+ssl://XXXX:6651/ \r\n            --client_auth_plugin org.apache.pulsar.client.impl.auth.AuthenticationToken\r\n            --client_auth_params file:///etc/auth/token \r\n            --use_tls false \r\n            --tls_allow_insecure false \r\n            --hostname_verification_enabled false \r\n            --max_buffered_tuples 1024 \r\n            --port 9093 \r\n            --metrics_port 39809 \r\n            --pending_async_requests 1000 \r\n            --expected_healthcheck_interval -1 \r\n            --secrets_provider org.apache.pulsar.functions.secretsprovider.ClearTextSecretsProvider \r\n            --cluster_name pulsar-ofgebi \r\n            --nar_extraction_directory /tmp\r\n```\r\n\r\nDoes anyone has any idea why creating a sink with the Java API could result in such error ?","title":"Create Apache Pulsar Sink on Kubernetes cluster with Java API","body":"<p>I am trying to create a Clickhouse sink connector with the Java API on a distant Pulsar cluster running on kubernetes but I experience some difficulties with it.</p>\n<p>My cluster run on pulsar 2.8.1</p>\n<pre><code>pulsarAdmin.sinks().createSinkWithUrl(\n     mySinkConfig,\n     &quot;https://archive.apache.org/dist/pulsar/pulsar-2.8.1/connectors/pulsar-io-jdbc-clickhouse-2.8.1.nar&quot;)\n</code></pre>\n<p>The api returns well and seems to create the sink.\nI can get its status or its configuration however the status is in failure and when checking the pod on kubernetes I see the pod corresponding to the new sink crashing</p>\n<pre><code>NAME                                            READY   STATUS             RESTARTS   AGE\npf-my-tenant-test-sink6-ab222ce8-0        0/1     CrashLoopBackOff   15         57m\n</code></pre>\n<p>with this in the k8s logs</p>\n<pre><code>null\n\nReason: java.io.IOException: No such file or directory\n</code></pre>\n<p>Here is the command used by pulsar when creating the pod</p>\n<pre><code>sh -c\n      /pulsar/bin/pulsar-admin \n            --auth-plugin org.apache.pulsar.client.impl.auth.AuthenticationToken\n            --auth-params file:///etc/auth/token\n            --admin-url https://XXXX:8443/ functions download \n            --tenant my-tenant\n            --namespace test \n            --name sink6 \n            --destination-file /pulsar/download/pulsar_functions/functions17103366778764930042.tmp &amp;&amp; SHARD_ID=${POD_NAME##*-} &amp;&amp; echo shardId=${SHARD_ID} &amp;&amp; exec java -cp /pulsar/instances/java-instance.jar:/pulsar/instances/deps/* \n            -Dpulsar.functions.extra.dependencies.dir=/pulsar/instances/deps -Dpulsar.functions.instance.classpath=/pulsar/conf:::/pulsar/lib/*: \n            -Dlog4j.configurationFile=kubernetes_instance_log4j2.xml -Dpulsar.function.log.dir=logs/functions/my-tenant/test/sink6 \n            -Dpulsar.function.log.file=sink6-$SHARD_ID -Xmx1073741824 org.apache.pulsar.functions.instance.JavaInstanceMain \n            --jar /pulsar/download/pulsar_functions/functions17103366778764930042.tmp --instance_id $SHARD_ID --function_id 16d9bcab-abcd-2f4b-b536-d3fb5d1232ab \n            --function_version 8807b42e-b1fc-4495-862e-21fe27085eb7 \n            --function_details '{&quot;tenant&quot;:&quot;my-tenant&quot;,&quot;namespace&quot;:&quot;test&quot;,&quot;name&quot;:&quot;sink6&quot;,&quot;className&quot;:&quot;org.apache.pulsar.functions.api.utils.IdentityFunction&quot;,&quot;autoAck&quot;:true,&quot;parallelism&quot;:1,&quot;source&quot;:{&quot;typeClassName&quot;:&quot;org.apache.pulsar.client.api.schema.GenericRecord&quot;,&quot;inputSpecs&quot;:{&quot;my-topic&quot;:{}},&quot;cleanupSubscription&quot;:true},&quot;sink&quot;:{&quot;className&quot;:&quot;org.apache.pulsar.io.jdbc.ClickHouseJdbcAutoSchemaSink&quot;,&quot;configs&quot;:&quot;{\\&quot;userName\\&quot;:\\&quot;XXXXX\\&quot;,\\&quot;password\\&quot;:\\&quot;XXXX\\&quot;,\\&quot;jdbcUrl\\&quot;:\\&quot;jdbc:clickhouse://XXXXXX\\&quot;,\\&quot;tableName\\&quot;:\\&quot;XXXXXXX\\&quot;}&quot;,&quot;typeClassName&quot;:&quot;org.apache.pulsar.client.api.schema.GenericRecord&quot;},&quot;resources&quot;:{&quot;cpu&quot;:1.0,&quot;ram&quot;:&quot;1234&quot;,&quot;disk&quot;:&quot;1234&quot;},&quot;componentType&quot;:&quot;SINK&quot;}' \n            --pulsar_serviceurl pulsar+ssl://XXXX:6651/ \n            --client_auth_plugin org.apache.pulsar.client.impl.auth.AuthenticationToken\n            --client_auth_params file:///etc/auth/token \n            --use_tls false \n            --tls_allow_insecure false \n            --hostname_verification_enabled false \n            --max_buffered_tuples 1024 \n            --port 9093 \n            --metrics_port 39809 \n            --pending_async_requests 1000 \n            --expected_healthcheck_interval -1 \n            --secrets_provider org.apache.pulsar.functions.secretsprovider.ClearTextSecretsProvider \n            --cluster_name pulsar-ofgebi \n            --nar_extraction_directory /tmp\n</code></pre>\n<p>Does anyone has any idea why creating a sink with the Java API could result in such error ?</p>\n"},{"tags":["java","android","firebase","android-recyclerview"],"answers":[{"tags":[],"owner":{"account_id":9516540,"reputation":796,"user_id":7072713,"display_name":"Shahadat Hossain Shaki"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1506852345,"creation_date":1506852345,"answer_id":46511304,"question_id":46510476,"body_markdown":"use the code for storing all key in an ArrayList from the dataSnapshot\r\n\r\n    HashMap&lt;String, Object&gt; allData = (HashMap&lt;String, Object&gt;) dataSnapshot.getValue();\r\n    String[] allKey = allData.keySet().toArray(new String[0]);\r\n\r\nYou can also get key while loop is running \r\n\r\n    for (DataSnapshot data : dataSnapshot.getChildren()) {\r\n\r\n                            String key = data.getKey();\r\n\r\n                        }","title":"On select item in RecyclerView get unique key from Firebase","body":"<p>use the code for storing all key in an ArrayList from the dataSnapshot</p>\n\n<pre><code>HashMap&lt;String, Object&gt; allData = (HashMap&lt;String, Object&gt;) dataSnapshot.getValue();\nString[] allKey = allData.keySet().toArray(new String[0]);\n</code></pre>\n\n<p>You can also get key while loop is running </p>\n\n<pre><code>for (DataSnapshot data : dataSnapshot.getChildren()) {\n\n                        String key = data.getKey();\n\n                    }\n</code></pre>\n"}],"owner":{"account_id":1490719,"reputation":21,"user_id":1397859,"accept_rate":75,"display_name":"user1397859"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1808,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"accepted_answer_id":46511304,"answer_count":1,"score":-1,"last_activity_date":1646070637,"creation_date":1506845642,"question_id":46510476,"body_markdown":"I would like to know how to get Key from Firebase when selected Item at custom RecyclerView. Here is my scenario.\r\n\r\n - MainActivity(contain fragment) is displaying custom RecyclerView(1 Image +3 text).\r\n - Upon click on one item, display the detail in an activity(in Editable mode: Means user want to edit or delete this item). I read data at a position and sent through a bundle.\r\n - Problem is I don&#39;t know how to get the uniqueKey of that line item, because of I need it for the update back to firebase database, or delete it upon user decision.  \r\n\r\n**Firebase Image Here**:\r\n\r\n[![enter image description here][1]][1]\r\n\r\nmy Code as following:\r\n\r\n    \r\n     \tpackage com.abc.personalexpensestracker;\r\n    \r\n       import android.content.Context;\r\n    \timport android.content.Intent;\r\n    \timport android.os.Bundle;\r\n    \timport android.support.design.widget.FloatingActionButton;\r\n    \timport android.support.v4.app.Fragment;\r\n    \timport android.support.v7.widget.LinearLayoutManager;\r\n    \timport android.support.v7.widget.RecyclerView;\r\n    \timport android.view.LayoutInflater;\r\n    \timport android.view.View;\r\n    \timport android.view.ViewGroup;\r\n    \timport android.widget.TextView;\r\n    \timport android.widget.Toast;\r\n    \r\n    \timport com.google.firebase.auth.FirebaseAuth;\r\n    \timport com.google.firebase.auth.FirebaseUser;\r\n    \timport com.google.firebase.database.DataSnapshot;\r\n    \timport com.google.firebase.database.DatabaseError;\r\n    \timport com.google.firebase.database.DatabaseReference;\r\n    \timport com.google.firebase.database.FirebaseDatabase;\r\n    \timport com.google.firebase.database.ValueEventListener;\r\n    \timport com.squareup.picasso.Picasso;\r\n    \r\n    \timport java.util.ArrayList;\r\n    \timport java.util.Calendar;\r\n    \timport java.util.LinkedHashSet;\r\n    \r\n    \timport de.hdodenhof.circleimageview.CircleImageView;\r\n    \timport io.github.luizgrp.sectionedrecyclerviewadapter.SectionParameters;\r\n    \timport io.github.luizgrp.sectionedrecyclerviewadapter.SectionedRecyclerViewAdapter;\r\n    \timport io.github.luizgrp.sectionedrecyclerviewadapter.StatelessSection;\r\n    \r\n    \r\n    \t/**\r\n    \t * A simple {@link Fragment} subclass.\r\n    \t */\r\n    \tpublic class CurrentmonthFragment extends Fragment {\r\n    \r\n    \t\tprivate SectionedRecyclerViewAdapter mSectionAdapter; \r\n    \r\n    \t\tprivate FloatingActionButton mCurrMonthAddFab;\r\n    \r\n    \t\tprivate RecyclerView mTransactionsList;\r\n    \t\tprivate DatabaseReference mUsersTransactionsDatabase;\r\n    \r\n    \t\tprivate FirebaseAuth mAuth;\r\n    \t\tprivate FirebaseUser mCurrUser;\r\n    \r\n    \t\tprivate ArrayList&lt;TransactionsData transactionsListViewValuesArr =null;\r\n    \r\n    \t\tprivate int mYear, mMonth, mDay;\r\n    \r\n    \r\n    \t\tpublic CurrentmonthFragment() {\r\n    \t\t\t// Required empty public constructor\r\n    \t\t}\r\n    \r\n    \t\t@Override\r\n    \t\tpublic void onResume() {\r\n    \t\t\tsuper.onResume();\r\n    \r\n    \r\n    \t\t\tmTransactionsList.setLayoutManager(new LinearLayoutManager(getContext()));\r\n    \t\t\t//mTransactionsList.setHasFixedSize(true);\r\n    \t\t\tmSectionAdapter = new SectionedRecyclerViewAdapter(); \r\n    \r\n    \t\t\t//// Set data in arraylist\r\n    \t\t\ttransactionsListViewValuesArr = new ArrayList&lt;TransactionsData();\r\n    \t\t\tsetTransactionsListData();\r\n    \r\n    \t\t\tmUsersTransactionsDatabase.addListenerForSingleValueEvent(new ValueEventListener() {\r\n    \t\t\t\t@Override\r\n    \t\t\t\tpublic void onDataChange(DataSnapshot dataSnapshot) {\r\n    \r\n    \t\t\t\t\t//check if there are categories with current user ID\r\n    \t\t\t\t\tif(dataSnapshot.exists()){\r\n    \r\n    \t\t\t\t\t\tLinkedHashSet&lt;String uniqueSetDate = new LinkedHashSet&lt;String();\r\n    \r\n    \t\t\t\t\t\t//first get unique Date from database\r\n    \t\t\t\t\t\tfor (DataSnapshot data : dataSnapshot.getChildren()) {\r\n    \r\n    \t\t\t\t\t\t\tuniqueSetDate.add(data.child(&quot;datetime&quot;).getValue().toString());\r\n    \r\n    \t\t\t\t\t\t}\r\n    \r\n    \t\t\t\t\t\t//Bind recyclerView by Section, group by date\r\n    \t\t\t\t\t\tfor(String sDate : uniqueSetDate) {\r\n    \t\t\t\t\t\t\tString sDatetime =sDate;\r\n    \t\t\t\t\t\t\tArrayList&lt;TransactionsData transactionsPerDay = getTransactionsPerDay(sDate, transactionsListViewValuesArr);\r\n    \t\t\t\t\t\t\tif (transactionsPerDay.size()  0) {\r\n    \t\t\t\t\t\t\t\tmSectionAdapter.addSection(new TransactionsSection(String.valueOf(sDatetime), transactionsPerDay));\r\n    \t\t\t\t\t\t\t}\r\n    \t\t\t\t\t\t\tmTransactionsList.setAdapter(mSectionAdapter);\r\n    \t\t\t\t\t\t}\r\n    \r\n    \t\t\t\t\t}\r\n    \r\n    \t\t\t\t}\r\n    \r\n    \t\t\t\t@Override\r\n    \t\t\t\tpublic void onCancelled(DatabaseError databaseError) {\r\n    \r\n    \t\t\t\t}\r\n    \t\t\t});\r\n    \r\n    \r\n    \t\t}\r\n    \r\n    \t\t@Override\r\n    \t\tpublic View onCreateView(LayoutInflater inflater, ViewGroup container,\r\n    \t\t\tBundle savedInstanceState) {\r\n    \t\t\t// Inflate the layout for this fragment\r\n    \t\t\tView view = inflater.inflate(R.layout.fragment_currentmonth, container, false);\r\n    \r\n    \r\n    \t\t\tfinal Calendar c = Calendar.getInstance();\r\n    \t\t\tmYear = c.get(Calendar.YEAR);\r\n    \t\t\tmMonth = c.get(Calendar.MONTH);\r\n    \t\t\tmDay = c.get(Calendar.DAY_OF_MONTH);\r\n    \r\n    \t\t\tmAuth = FirebaseAuth.getInstance();\r\n    \t\t\tmCurrUser = mAuth.getCurrentUser();\r\n    \t\t\tmUsersTransactionsDatabase = FirebaseDatabase.getInstance().getReference().child(&quot;users_transactions&quot;).child(mCurrUser.getUid()).child(&quot;by_year&quot;).child(String.valueOf(mYear)).child(String.valueOf(mMonth));\r\n    \r\n    \r\n    \t\t\tmCurrMonthAddFab = (FloatingActionButton) view.findViewById(R.id.current_month_add_fab);\r\n    \t\t\tmCurrMonthAddFab.setOnClickListener(new View.OnClickListener() {\r\n    \t\t\t\t@Override\r\n    \t\t\t\tpublic void onClick(View v) {\r\n    \t\t\t\t\tIntent newTransactionIntent = new Intent(getActivity(),AddNewTransaction.class);\r\n    \t\t\t\t\tstartActivity(newTransactionIntent);\r\n    \r\n    \t\t\t\t}\r\n    \t\t\t});\r\n    \r\n    \t\t\t\r\n    \t\t\tmTransactionsList= (RecyclerView)view.findViewById(R.id.ListView_Curr_Transactions);\r\n    \t\t   \r\n    \r\n    \t\t\treturn view;\r\n    \r\n    \t\t}\r\n    \r\n    \r\n    \t\tpublic static class TransactionsViewHolder extends RecyclerView.ViewHolder{\r\n    \r\n    \t\t\tView mView;\r\n    \r\n    \t\t\tpublic TransactionsViewHolder(View itemView) {\r\n    \t\t\t\tsuper(itemView);\r\n    \r\n    \t\t\t\tmView = itemView;\r\n    \t\t\t}\r\n    \r\n    \t\t\tpublic  void setTransactCat(String name){\r\n    \t\t\t\tTextView categoryName = (TextView) mView.findViewById(R.id.txt_TransSingle_CatName);\r\n    \t\t\t\tcategoryName.setText(name);\r\n    \t\t\t}\r\n    \r\n    \t\t\tpublic void setTransactCatImage(String image, Context ctx){\r\n    \t\t\t\tCircleImageView catImageView= (CircleImageView) mView.findViewById(R.id.img_TransSingle_Cat);\r\n    \t\t\t\tPicasso.with(ctx).load(image).placeholder(R.mipmap.question_circular_button).into(catImageView);\r\n    \r\n    \t\t\t}\r\n    \t\t\tpublic  void setTransactDate(String transactDate){\r\n    \t\t\t\tTextView categoryName = (TextView) mView.findViewById(R.id.txt_TransSingle_Date);\r\n    \t\t\t\tcategoryName.setText(transactDate);\r\n    \t\t\t}\r\n    \r\n    \t\t\tpublic  void setTransactAmount(Double transactAmount){\r\n    \t\t\t\tTextView categoryName = (TextView) mView.findViewById(R.id.txt_TransSingle_Amt);\r\n    \t\t\t\tif (!Double.isNaN(transactAmount)){\r\n    \t\t\t\t\tcategoryName.setText(transactAmount.toString());\r\n    \t\t\t\t}\r\n    \t\t\t}\r\n    \r\n    \t\t}\r\n    \r\n    \t   \r\n    \t\tprivate ArrayList&lt;TransactionsData getTransactionsPerDay(String date, ArrayList&lt;TransactionsData transactionsList) {\r\n    \t\t\tArrayList&lt;TransactionsData transactions = new ArrayList&lt;TransactionsData();\r\n    \r\n    \t\t\tfor(int i = 0; i &lt; transactionsList.size(); i++) {\r\n    \t\t\t\t//System.out.println(transactionsListViewValuesArr.get(i)); //prints element i\r\n    \t\t\t\tTransactionsData transaction = transactionsList.get(i);\r\n    \t\t\t\tif (transaction.getDatetime().equals(date)) {\r\n    \t\t\t\t\ttransactions.add(transaction);\r\n    \t\t\t\t}\r\n    \t\t\t}\r\n    \r\n    \t\t\treturn transactions;\r\n    \t\t}\r\n    \r\n    \r\n    \r\n    \t\tprivate class TransactionsSection extends StatelessSection {\r\n    \r\n    \t\t\tString title;\r\n    \t\t\tArrayList&lt;TransactionsData alist;\r\n    \r\n    \t\t\tTransactionsSection(String title, ArrayList&lt;TransactionsData list) {\r\n    \t\t\t\tsuper(new SectionParameters.Builder(R.layout.transactions_single_layout)\r\n    \t\t\t\t\t\t.headerResourceId(R.layout.transactions_section_header)\r\n    \t\t\t\t\t\t.build());\r\n    \r\n    \t\t\t\tthis.title = title;\r\n    \t\t\t\tthis.alist = list;\r\n    \t\t\t}\r\n    \r\n    \t\t\t@Override\r\n    \t\t\tpublic int getContentItemsTotal() {\r\n    \t\t\t\treturn alist.size();\r\n    \t\t\t}\r\n    \r\n    \t\t\t@Override\r\n    \t\t\tpublic RecyclerView.ViewHolder getItemViewHolder(View view) {\r\n    \t\t\t\treturn new TransactionsViewHolder(view);\r\n    \t\t\t}\r\n    \r\n    \t\t\t@Override\r\n    \t\t\tpublic void onBindItemViewHolder(RecyclerView.ViewHolder holder, int position) {\r\n    \t\t\t\tfinal TransactionsViewHolder itemHolder = (TransactionsViewHolder) holder;\r\n    \r\n    \t\t\t\t\r\n    \t\t\t\tfinal TransactionsData tData = alist.get(position);\r\n    \r\n    \t\t\t\titemHolder.setTransactDate(tData.getDatetime());\r\n    \t\t\t\titemHolder.setTransactCat(tData.getCategory());\r\n    \t\t\t\titemHolder.setTransactAmount(tData.getAmount());\r\n    \r\n    \r\n    \t\t\t\titemHolder.mView.setOnClickListener(new View.OnClickListener() {\r\n    \t\t\t\t\t@Override\r\n    \t\t\t\t\tpublic void onClick(View v) {\r\n    \t\t\t\t\t\tToast.makeText(getContext(), String.format(&quot;Clicked on position #%s of Section %s&quot;, mSectionAdapter.getPositionInSection(itemHolder.getAdapterPosition()), title), Toast.LENGTH_SHORT).show();\r\n    \r\n    \t\t\t\t\t\tIntent editTransactionIntent = new Intent(getActivity(),EditExistingTransaction.class);\r\n    \t\t\t\t\t\tBundle transactionBundle = new Bundle();\r\n    \t\t\t\t\t\ttransactionBundle.putDouble(&quot;selected_amount&quot;,tData.getAmount());\r\n    \t\t\t\t\t\ttransactionBundle.putString(&quot;selected_catType&quot;,tData.getCategory_type());\r\n    \t\t\t\t\t\ttransactionBundle.putString(&quot;selected_catName&quot;,tData.getCategory());\r\n    \t\t\t\t\t\ttransactionBundle.putString(&quot;selected_date&quot;,tData.getDatetime());\r\n    \t\t\t\t\t\ttransactionBundle.putString(&quot;selected_note&quot;,tData.getNotes());\r\n    \t\t\t\t\t\teditTransactionIntent.putExtras(transactionBundle);\r\n    \t\t\t\t\t\tstartActivity(editTransactionIntent);\r\n    \t\t\t\t\t}\r\n    \t\t\t\t});\r\n    \t\t\t}\r\n    \r\n    \t\t\t@Override\r\n    \t\t\tpublic RecyclerView.ViewHolder getHeaderViewHolder(View view) {\r\n    \t\t\t\treturn new HeaderViewHolder(view);\r\n    \t\t\t}\r\n    \r\n    \t\t\t@Override\r\n    \t\t\tpublic void onBindHeaderViewHolder(RecyclerView.ViewHolder holder) {\r\n    \t\t\t\tHeaderViewHolder headerHolder = (HeaderViewHolder) holder;\r\n    \r\n    \t\t\t\theaderHolder.tvTitle.setText(title);\r\n    \t\t\t}\r\n    \t\t}\r\n    \r\n    \r\n    \t\tprivate class HeaderViewHolder extends RecyclerView.ViewHolder {\r\n    \r\n    \t\t\tprivate final TextView tvTitle;\r\n    \r\n    \t\t\tHeaderViewHolder(View view) {\r\n    \t\t\t\tsuper(view);\r\n    \r\n    \t\t\t\ttvTitle = (TextView) view.findViewById(R.id.txt_transaction_header_date);\r\n    \t\t\t}\r\n    \t\t}\r\n    \r\n    \r\n    \t\t/****** Function to set data in ArrayList *************/\r\n    \t\tpublic void setTransactionsListData()\r\n    \t\t{\r\n    \r\n    \t\t\t//transactionsListViewValuesArr.add(new TransactionsData(5.5,&quot;default&quot;,&quot;default&quot;,&quot;default&quot;,&quot;default&quot;));\r\n    \r\n    \t\t\tmUsersTransactionsDatabase.addValueEventListener(new ValueEventListener() {\r\n    \t\t\t\t@Override\r\n    \t\t\t\tpublic void onDataChange(DataSnapshot dataSnapshot) {\r\n    \r\n    \t\t\t\t\tfor(DataSnapshot categorySnapshot: dataSnapshot.getChildren()){\r\n    \t\t\t\t\t\tString transactionCat = categorySnapshot.child(&quot;category&quot;).getValue(String.class);\r\n    \t\t\t\t\t\tString transactionDate = categorySnapshot.child(&quot;datetime&quot;).getValue(String.class);\r\n    \t\t\t\t\t\tDouble transactionAmt = categorySnapshot.child(&quot;amount&quot;).getValue(Double.class);\r\n    \t\t\t\t\t\tString transactionCatType = categorySnapshot.child(&quot;category_type&quot;).getValue(String.class);\r\n    \t\t\t\t\t\tString transactionNote = categorySnapshot.child(&quot;notes&quot;).getValue(String.class);\r\n    \r\n    \t\t\t\t\t\tfinal TransactionsData transactionsData = new TransactionsData();\r\n    \t\t\t\t\t\t/******* Firstly take data in model object ******/\r\n    \t\t\t\t\t\ttransactionsData.setCategory(transactionCat);\r\n    \t\t\t\t\t\ttransactionsData.setDatetime(transactionDate);\r\n    \t\t\t\t\t\ttransactionsData.setAmount(transactionAmt);\r\n    \t\t\t\t\t\ttransactionsData.setCategory_type(transactionCatType);\r\n    \t\t\t\t\t\ttransactionsData.setNotes(transactionNote);\r\n    \r\n    \r\n    \t\t\t\t\t\t/******** Take Model Object in ArrayList **********/\r\n    \t\t\t\t\t\ttransactionsListViewValuesArr.add(transactionsData);\r\n    \t\t\t\t\t}\r\n    \r\n    \t\t\t\t}\r\n    \r\n    \t\t\t\t@Override\r\n    \t\t\t\tpublic void onCancelled(DatabaseError databaseError) {\r\n    \r\n    \t\t\t\t}\r\n    \r\n    \t\t\t});\r\n\r\n    \t\t}\r\n\r\n    \t}\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/vcxkR.jpg","title":"On select item in RecyclerView get unique key from Firebase","body":"<p>I would like to know how to get Key from Firebase when selected Item at custom RecyclerView. Here is my scenario.</p>\n\n<ul>\n<li>MainActivity(contain fragment) is displaying custom RecyclerView(1 Image +3 text).</li>\n<li>Upon click on one item, display the detail in an activity(in Editable mode: Means user want to edit or delete this item). I read data at a position and sent through a bundle.</li>\n<li>Problem is I don't know how to get the uniqueKey of that line item, because of I need it for the update back to firebase database, or delete it upon user decision.  </li>\n</ul>\n\n<p><strong>Firebase Image Here</strong>:</p>\n\n<p><a href=\"https://i.stack.imgur.com/vcxkR.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/vcxkR.jpg\" alt=\"enter image description here\"></a></p>\n\n<p>my Code as following:</p>\n\n<pre><code>    package com.abc.personalexpensestracker;\n\n   import android.content.Context;\n    import android.content.Intent;\n    import android.os.Bundle;\n    import android.support.design.widget.FloatingActionButton;\n    import android.support.v4.app.Fragment;\n    import android.support.v7.widget.LinearLayoutManager;\n    import android.support.v7.widget.RecyclerView;\n    import android.view.LayoutInflater;\n    import android.view.View;\n    import android.view.ViewGroup;\n    import android.widget.TextView;\n    import android.widget.Toast;\n\n    import com.google.firebase.auth.FirebaseAuth;\n    import com.google.firebase.auth.FirebaseUser;\n    import com.google.firebase.database.DataSnapshot;\n    import com.google.firebase.database.DatabaseError;\n    import com.google.firebase.database.DatabaseReference;\n    import com.google.firebase.database.FirebaseDatabase;\n    import com.google.firebase.database.ValueEventListener;\n    import com.squareup.picasso.Picasso;\n\n    import java.util.ArrayList;\n    import java.util.Calendar;\n    import java.util.LinkedHashSet;\n\n    import de.hdodenhof.circleimageview.CircleImageView;\n    import io.github.luizgrp.sectionedrecyclerviewadapter.SectionParameters;\n    import io.github.luizgrp.sectionedrecyclerviewadapter.SectionedRecyclerViewAdapter;\n    import io.github.luizgrp.sectionedrecyclerviewadapter.StatelessSection;\n\n\n    /**\n     * A simple {@link Fragment} subclass.\n     */\n    public class CurrentmonthFragment extends Fragment {\n\n        private SectionedRecyclerViewAdapter mSectionAdapter; \n\n        private FloatingActionButton mCurrMonthAddFab;\n\n        private RecyclerView mTransactionsList;\n        private DatabaseReference mUsersTransactionsDatabase;\n\n        private FirebaseAuth mAuth;\n        private FirebaseUser mCurrUser;\n\n        private ArrayList&lt;TransactionsData transactionsListViewValuesArr =null;\n\n        private int mYear, mMonth, mDay;\n\n\n        public CurrentmonthFragment() {\n            // Required empty public constructor\n        }\n\n        @Override\n        public void onResume() {\n            super.onResume();\n\n\n            mTransactionsList.setLayoutManager(new LinearLayoutManager(getContext()));\n            //mTransactionsList.setHasFixedSize(true);\n            mSectionAdapter = new SectionedRecyclerViewAdapter(); \n\n            //// Set data in arraylist\n            transactionsListViewValuesArr = new ArrayList&lt;TransactionsData();\n            setTransactionsListData();\n\n            mUsersTransactionsDatabase.addListenerForSingleValueEvent(new ValueEventListener() {\n                @Override\n                public void onDataChange(DataSnapshot dataSnapshot) {\n\n                    //check if there are categories with current user ID\n                    if(dataSnapshot.exists()){\n\n                        LinkedHashSet&lt;String uniqueSetDate = new LinkedHashSet&lt;String();\n\n                        //first get unique Date from database\n                        for (DataSnapshot data : dataSnapshot.getChildren()) {\n\n                            uniqueSetDate.add(data.child(\"datetime\").getValue().toString());\n\n                        }\n\n                        //Bind recyclerView by Section, group by date\n                        for(String sDate : uniqueSetDate) {\n                            String sDatetime =sDate;\n                            ArrayList&lt;TransactionsData transactionsPerDay = getTransactionsPerDay(sDate, transactionsListViewValuesArr);\n                            if (transactionsPerDay.size()  0) {\n                                mSectionAdapter.addSection(new TransactionsSection(String.valueOf(sDatetime), transactionsPerDay));\n                            }\n                            mTransactionsList.setAdapter(mSectionAdapter);\n                        }\n\n                    }\n\n                }\n\n                @Override\n                public void onCancelled(DatabaseError databaseError) {\n\n                }\n            });\n\n\n        }\n\n        @Override\n        public View onCreateView(LayoutInflater inflater, ViewGroup container,\n            Bundle savedInstanceState) {\n            // Inflate the layout for this fragment\n            View view = inflater.inflate(R.layout.fragment_currentmonth, container, false);\n\n\n            final Calendar c = Calendar.getInstance();\n            mYear = c.get(Calendar.YEAR);\n            mMonth = c.get(Calendar.MONTH);\n            mDay = c.get(Calendar.DAY_OF_MONTH);\n\n            mAuth = FirebaseAuth.getInstance();\n            mCurrUser = mAuth.getCurrentUser();\n            mUsersTransactionsDatabase = FirebaseDatabase.getInstance().getReference().child(\"users_transactions\").child(mCurrUser.getUid()).child(\"by_year\").child(String.valueOf(mYear)).child(String.valueOf(mMonth));\n\n\n            mCurrMonthAddFab = (FloatingActionButton) view.findViewById(R.id.current_month_add_fab);\n            mCurrMonthAddFab.setOnClickListener(new View.OnClickListener() {\n                @Override\n                public void onClick(View v) {\n                    Intent newTransactionIntent = new Intent(getActivity(),AddNewTransaction.class);\n                    startActivity(newTransactionIntent);\n\n                }\n            });\n\n\n            mTransactionsList= (RecyclerView)view.findViewById(R.id.ListView_Curr_Transactions);\n\n\n            return view;\n\n        }\n\n\n        public static class TransactionsViewHolder extends RecyclerView.ViewHolder{\n\n            View mView;\n\n            public TransactionsViewHolder(View itemView) {\n                super(itemView);\n\n                mView = itemView;\n            }\n\n            public  void setTransactCat(String name){\n                TextView categoryName = (TextView) mView.findViewById(R.id.txt_TransSingle_CatName);\n                categoryName.setText(name);\n            }\n\n            public void setTransactCatImage(String image, Context ctx){\n                CircleImageView catImageView= (CircleImageView) mView.findViewById(R.id.img_TransSingle_Cat);\n                Picasso.with(ctx).load(image).placeholder(R.mipmap.question_circular_button).into(catImageView);\n\n            }\n            public  void setTransactDate(String transactDate){\n                TextView categoryName = (TextView) mView.findViewById(R.id.txt_TransSingle_Date);\n                categoryName.setText(transactDate);\n            }\n\n            public  void setTransactAmount(Double transactAmount){\n                TextView categoryName = (TextView) mView.findViewById(R.id.txt_TransSingle_Amt);\n                if (!Double.isNaN(transactAmount)){\n                    categoryName.setText(transactAmount.toString());\n                }\n            }\n\n        }\n\n\n        private ArrayList&lt;TransactionsData getTransactionsPerDay(String date, ArrayList&lt;TransactionsData transactionsList) {\n            ArrayList&lt;TransactionsData transactions = new ArrayList&lt;TransactionsData();\n\n            for(int i = 0; i &lt; transactionsList.size(); i++) {\n                //System.out.println(transactionsListViewValuesArr.get(i)); //prints element i\n                TransactionsData transaction = transactionsList.get(i);\n                if (transaction.getDatetime().equals(date)) {\n                    transactions.add(transaction);\n                }\n            }\n\n            return transactions;\n        }\n\n\n\n        private class TransactionsSection extends StatelessSection {\n\n            String title;\n            ArrayList&lt;TransactionsData alist;\n\n            TransactionsSection(String title, ArrayList&lt;TransactionsData list) {\n                super(new SectionParameters.Builder(R.layout.transactions_single_layout)\n                        .headerResourceId(R.layout.transactions_section_header)\n                        .build());\n\n                this.title = title;\n                this.alist = list;\n            }\n\n            @Override\n            public int getContentItemsTotal() {\n                return alist.size();\n            }\n\n            @Override\n            public RecyclerView.ViewHolder getItemViewHolder(View view) {\n                return new TransactionsViewHolder(view);\n            }\n\n            @Override\n            public void onBindItemViewHolder(RecyclerView.ViewHolder holder, int position) {\n                final TransactionsViewHolder itemHolder = (TransactionsViewHolder) holder;\n\n\n                final TransactionsData tData = alist.get(position);\n\n                itemHolder.setTransactDate(tData.getDatetime());\n                itemHolder.setTransactCat(tData.getCategory());\n                itemHolder.setTransactAmount(tData.getAmount());\n\n\n                itemHolder.mView.setOnClickListener(new View.OnClickListener() {\n                    @Override\n                    public void onClick(View v) {\n                        Toast.makeText(getContext(), String.format(\"Clicked on position #%s of Section %s\", mSectionAdapter.getPositionInSection(itemHolder.getAdapterPosition()), title), Toast.LENGTH_SHORT).show();\n\n                        Intent editTransactionIntent = new Intent(getActivity(),EditExistingTransaction.class);\n                        Bundle transactionBundle = new Bundle();\n                        transactionBundle.putDouble(\"selected_amount\",tData.getAmount());\n                        transactionBundle.putString(\"selected_catType\",tData.getCategory_type());\n                        transactionBundle.putString(\"selected_catName\",tData.getCategory());\n                        transactionBundle.putString(\"selected_date\",tData.getDatetime());\n                        transactionBundle.putString(\"selected_note\",tData.getNotes());\n                        editTransactionIntent.putExtras(transactionBundle);\n                        startActivity(editTransactionIntent);\n                    }\n                });\n            }\n\n            @Override\n            public RecyclerView.ViewHolder getHeaderViewHolder(View view) {\n                return new HeaderViewHolder(view);\n            }\n\n            @Override\n            public void onBindHeaderViewHolder(RecyclerView.ViewHolder holder) {\n                HeaderViewHolder headerHolder = (HeaderViewHolder) holder;\n\n                headerHolder.tvTitle.setText(title);\n            }\n        }\n\n\n        private class HeaderViewHolder extends RecyclerView.ViewHolder {\n\n            private final TextView tvTitle;\n\n            HeaderViewHolder(View view) {\n                super(view);\n\n                tvTitle = (TextView) view.findViewById(R.id.txt_transaction_header_date);\n            }\n        }\n\n\n        /****** Function to set data in ArrayList *************/\n        public void setTransactionsListData()\n        {\n\n            //transactionsListViewValuesArr.add(new TransactionsData(5.5,\"default\",\"default\",\"default\",\"default\"));\n\n            mUsersTransactionsDatabase.addValueEventListener(new ValueEventListener() {\n                @Override\n                public void onDataChange(DataSnapshot dataSnapshot) {\n\n                    for(DataSnapshot categorySnapshot: dataSnapshot.getChildren()){\n                        String transactionCat = categorySnapshot.child(\"category\").getValue(String.class);\n                        String transactionDate = categorySnapshot.child(\"datetime\").getValue(String.class);\n                        Double transactionAmt = categorySnapshot.child(\"amount\").getValue(Double.class);\n                        String transactionCatType = categorySnapshot.child(\"category_type\").getValue(String.class);\n                        String transactionNote = categorySnapshot.child(\"notes\").getValue(String.class);\n\n                        final TransactionsData transactionsData = new TransactionsData();\n                        /******* Firstly take data in model object ******/\n                        transactionsData.setCategory(transactionCat);\n                        transactionsData.setDatetime(transactionDate);\n                        transactionsData.setAmount(transactionAmt);\n                        transactionsData.setCategory_type(transactionCatType);\n                        transactionsData.setNotes(transactionNote);\n\n\n                        /******** Take Model Object in ArrayList **********/\n                        transactionsListViewValuesArr.add(transactionsData);\n                    }\n\n                }\n\n                @Override\n                public void onCancelled(DatabaseError databaseError) {\n\n                }\n\n            });\n\n        }\n\n    }\n</code></pre>\n"},{"tags":["javascript","java","vaadin","vaadin14"],"comments":[{"owner":{"account_id":12280349,"reputation":10212,"user_id":8962195,"display_name":"Tatu Lund"},"score":0,"creation_date":1645188963,"post_id":71173690,"comment_id":125811153,"body_markdown":"Is the Div you are looking for in shadow DOM, if yes then document.getElementById(myid) will not find it. Do you need to find this Div in Java or JavaScript side?","body":"Is the Div you are looking for in shadow DOM, if yes then document.getElementById(myid) will not find it. Do you need to find this Div in Java or JavaScript side?"},{"owner":{"account_id":3837378,"reputation":35463,"user_id":3181392,"display_name":"cfrick"},"score":1,"creation_date":1645189712,"post_id":71173690,"comment_id":125811397,"body_markdown":"What version of vaadin are you using? Can you please share some minimal example, that shows your problem? Or at least the relevant code parts.","body":"What version of vaadin are you using? Can you please share some minimal example, that shows your problem? Or at least the relevant code parts."},{"owner":{"account_id":8269449,"reputation":67,"user_id":6217646,"display_name":"Wayne"},"score":0,"creation_date":1645191865,"post_id":71173690,"comment_id":125812206,"body_markdown":"I see it in the shadow DOM (whatever that is)....   Using Vaadin 14.    Due to network, I cannot add code.  :&lt;(","body":"I see it in the shadow DOM (whatever that is)....   Using Vaadin 14.    Due to network, I cannot add code.  :&lt;("},{"owner":{"account_id":8269449,"reputation":67,"user_id":6217646,"display_name":"Wayne"},"score":0,"creation_date":1645192676,"post_id":71173690,"comment_id":125812538,"body_markdown":"Seems to be a shadowRoot inside a shadowRoot","body":"Seems to be a shadowRoot inside a shadowRoot"},{"owner":{"account_id":12280349,"reputation":10212,"user_id":8962195,"display_name":"Tatu Lund"},"score":0,"creation_date":1645193936,"post_id":71173690,"comment_id":125813058,"body_markdown":"In your case you should modify your subwindow component (assuming that has the Div you are looking for). In Java you can use Id annotation to inject that Div as field in subwindow class and then create getter for that.","body":"In your case you should modify your subwindow component (assuming that has the Div you are looking for). In Java you can use Id annotation to inject that Div as field in subwindow class and then create getter for that."},{"owner":{"account_id":3837378,"reputation":35463,"user_id":3181392,"display_name":"cfrick"},"score":0,"creation_date":1645193976,"post_id":71173690,"comment_id":125813078,"body_markdown":"Without the code, this will be pure guess work. So here is my guess: you have a div in somewhere in your application code and now you try to tack on some JS.  You will have an uphill battle with that, since shadow DOM is meant to isolate webcomponents. You will have an easier time turning your &quot;javascript component&quot; into a proper webcomponent to use in vaadin.","body":"Without the code, this will be pure guess work. So here is my guess: you have a div in somewhere in your application code and now you try to tack on some JS.  You will have an uphill battle with that, since shadow DOM is meant to isolate webcomponents. You will have an easier time turning your &quot;javascript component&quot; into a proper webcomponent to use in vaadin."},{"owner":{"account_id":322981,"reputation":310745,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":0,"creation_date":1645201009,"post_id":71173690,"comment_id":125816067,"body_markdown":"Provide details as edits to your Question, not as Comments.","body":"Provide details as edits to your Question, not as Comments."}],"owner":{"account_id":8269449,"reputation":67,"user_id":6217646,"display_name":"Wayne"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":184,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1646070486,"creation_date":1645188190,"question_id":71173690,"body_markdown":"New WEB person here.   Been doing JAVA for 20 years, and this is 1st time in the web pool.   Anyway, I am using Vaadin and like it very much.   I am using the *subwindow* component (user contrib) to give me a workspace in the browser where I am opening up other windows.   In one of these windows, I am trying to attach a javascript component.      I have already verified the component runs in a plain page, but when I try to attach in the window in the workspace, it cannot find the Div-ID.    I have tried many, many versions.   Even executing the script AFTER the window is displayed using a simple button.\r\nIf I use the dev tools in Chrome, I can dig down and find the window/Div space and I see the ID is correctly set.\r\nIf there something I must do in JS to see an ID that is nested??\r\n\r\nIn the JS I am just using: document.getElementById(myid)... ect...\r\n\r\nThanks!\r\n\r\n\r\n\r\nThank you for all that responded.\r\nI ended up passing the Div element into the javascript when it was started.   Worked like a charm.   Now to make resize work.. &lt;sigh&gt;\r\n\r\n","title":"Cannot resolve div ID inside JS using Vaadin","body":"<p>New WEB person here.   Been doing JAVA for 20 years, and this is 1st time in the web pool.   Anyway, I am using Vaadin and like it very much.   I am using the <em>subwindow</em> component (user contrib) to give me a workspace in the browser where I am opening up other windows.   In one of these windows, I am trying to attach a javascript component.      I have already verified the component runs in a plain page, but when I try to attach in the window in the workspace, it cannot find the Div-ID.    I have tried many, many versions.   Even executing the script AFTER the window is displayed using a simple button.\nIf I use the dev tools in Chrome, I can dig down and find the window/Div space and I see the ID is correctly set.\nIf there something I must do in JS to see an ID that is nested??</p>\n<p>In the JS I am just using: document.getElementById(myid)... ect...</p>\n<p>Thanks!</p>\n<p>Thank you for all that responded.\nI ended up passing the Div element into the javascript when it was started.   Worked like a charm.   Now to make resize work.. </p>\n"},{"tags":["java","swing","jbutton","jlabel","layout-manager"],"comments":[{"owner":{"account_id":183279,"reputation":168313,"user_id":418556,"accept_rate":98,"display_name":"Andrew Thompson"},"score":1,"creation_date":1646055071,"post_id":71295468,"comment_id":126022620,"body_markdown":"*&quot;Any tips?&quot;* 1) Don&#39;t use slang like &#39;wanna&#39;. The term is &#39;want to&#39;. 2) Practice more on combining different layouts. I see a 3x3 grid layout of panels, each with a 3x3 grid layout of .. whatever component is inside those panels. Add the outer grid layout to the `CENTER` of a border layout. To the `PAGE_END` constraint, add a panel with flow layout or grid bag layout. Add the buttons to that. 3) *&quot;how to proceed how to create labels in a grid format[a] and how to set exact sizes to them[b]&quot;* a) grid layout as mentioned earlier. b) Don&#39;t. They need to be square? Extend the component ..","body":"<i>&quot;Any tips?&quot;</i> 1) Don&#39;t use slang like &#39;wanna&#39;. The term is &#39;want to&#39;. 2) Practice more on combining different layouts. I see a 3x3 grid layout of panels, each with a 3x3 grid layout of .. whatever component is inside those panels. Add the outer grid layout to the <code>CENTER</code> of a border layout. To the <code>PAGE_END</code> constraint, add a panel with flow layout or grid bag layout. Add the buttons to that. 3) <i>&quot;how to proceed how to create labels in a grid format[a] and how to set exact sizes to them[b]&quot;</i> a) grid layout as mentioned earlier. b) Don&#39;t. They need to be square? Extend the component .."},{"owner":{"account_id":183279,"reputation":168313,"user_id":418556,"accept_rate":98,"display_name":"Andrew Thompson"},"score":0,"creation_date":1646055141,"post_id":71295468,"comment_id":126022645,"body_markdown":".. and override the `getPreferredSize()` method to return a dimension that is the larger of width or height, for both the width **and** height.","body":".. and override the <code>getPreferredSize()</code> method to return a dimension that is the larger of width or height, for both the width <b>and</b> height."},{"owner":{"account_id":5533651,"reputation":846,"user_id":4392781,"accept_rate":0,"display_name":"Tarmiac"},"score":0,"creation_date":1646056263,"post_id":71295468,"comment_id":126023097,"body_markdown":"Why doesn&#39;t setPreferredSize set the panels to the size I want?","body":"Why doesn&#39;t setPreferredSize set the panels to the size I want?"},{"owner":{"account_id":114128,"reputation":50422,"user_id":300257,"accept_rate":89,"display_name":"Gilbert Le Blanc"},"score":0,"creation_date":1646056304,"post_id":71295468,"comment_id":126023104,"body_markdown":"It appears that you&#39;re making a sudoku grid.  It&#39;s much easier to create a drawing `JPanel` with a `MouseListener` to display and change numbers.  Oracle has a helpful tutorial, [Creating a GUI With Swing](https://docs.oracle.com/javase/tutorial/uiswing/index.html).  Skip the Learning Swing with the NetBeans IDE section.  The [Performing Custom Painting](https://docs.oracle.com/javase/tutorial/uiswing/painting/index.html) lesson will show you how to create a drawing `JPanel`.","body":"It appears that you&#39;re making a sudoku grid.  It&#39;s much easier to create a drawing <code>JPanel</code> with a <code>MouseListener</code> to display and change numbers.  Oracle has a helpful tutorial, <a href=\"https://docs.oracle.com/javase/tutorial/uiswing/index.html\" rel=\"nofollow noreferrer\">Creating a GUI With Swing</a>.  Skip the Learning Swing with the NetBeans IDE section.  The <a href=\"https://docs.oracle.com/javase/tutorial/uiswing/painting/index.html\" rel=\"nofollow noreferrer\">Performing Custom Painting</a> lesson will show you how to create a drawing <code>JPanel</code>."},{"owner":{"account_id":183279,"reputation":168313,"user_id":418556,"accept_rate":98,"display_name":"Andrew Thompson"},"score":1,"creation_date":1646057464,"post_id":71295468,"comment_id":126023575,"body_markdown":"*&quot;Why doesn&#39;t setPreferredSize set the panels to the size I want?&quot;* A layout manager will take the preferred size as *a hint,* and in *some cases* will use it. For examples: 1) A `GridLayout` will make the cell size as wide as the widest component, and as tall as the tallest. Every other component in the cells will be stretched to fit. 2) A border layout will stretch for the center constraint, stretch height for the line start &amp; end constraints, and stretch width for the page start &amp; end constraints. 3) A flow layout will respect the preferred width and height. ..","body":"<i>&quot;Why doesn&#39;t setPreferredSize set the panels to the size I want?&quot;</i> A layout manager will take the preferred size as <i>a hint,</i> and in <i>some cases</i> will use it. For examples: 1) A <code>GridLayout</code> will make the cell size as wide as the widest component, and as tall as the tallest. Every other component in the cells will be stretched to fit. 2) A border layout will stretch for the center constraint, stretch height for the line start &amp; end constraints, and stretch width for the page start &amp; end constraints. 3) A flow layout will respect the preferred width and height. .."},{"owner":{"account_id":5533651,"reputation":846,"user_id":4392781,"accept_rate":0,"display_name":"Tarmiac"},"score":0,"creation_date":1646059728,"post_id":71295468,"comment_id":126024577,"body_markdown":"@GilbertLeBlanc I don&#39;t understand how paintComponents work in realation to other components it seems like I cant add things on top of the pC method...","body":"@GilbertLeBlanc I don&#39;t understand how paintComponents work in realation to other components it seems like I cant add things on top of the pC method..."},{"owner":{"account_id":44852,"reputation":322224,"user_id":131872,"accept_rate":100,"display_name":"camickr"},"score":1,"creation_date":1646060406,"post_id":71295468,"comment_id":126024872,"body_markdown":"I would not use a drawing panel for this. For a sududo grid it is easy enough to use  JTextFields to make it easy to enter values into the grid. Concentrate on creating your panel using a GridLayout. When you create your Sududo panel you should specify the size of each grid. Then override the `getPreferredSize()` of your panel to return the preferred size of the panel which would simply be the size of each cell * 9. Once all the components are added to the frame you then `pack()` the frame to make sure each component is displayed properly.","body":"I would not use a drawing panel for this. For a sududo grid it is easy enough to use  JTextFields to make it easy to enter values into the grid. Concentrate on creating your panel using a GridLayout. When you create your Sududo panel you should specify the size of each grid. Then override the <code>getPreferredSize()</code> of your panel to return the preferred size of the panel which would simply be the size of each cell * 9. Once all the components are added to the frame you then <code>pack()</code> the frame to make sure each component is displayed properly."},{"owner":{"account_id":44852,"reputation":322224,"user_id":131872,"accept_rate":100,"display_name":"camickr"},"score":2,"creation_date":1646060517,"post_id":71295468,"comment_id":126024922,"body_markdown":"When you create the GridLayout you can specify the space between components and make the background of your panel black so by default your grid lines will be painted. *I also want to create JLabel components for the grid so I can enter numbers with KeyListener (and having MouseListener for selecting which cell)* - what about people who want to use the keyboard? I would just use JTextFields. Then you can tab from cell to cell or use the mouse.","body":"When you create the GridLayout you can specify the space between components and make the background of your panel black so by default your grid lines will be painted. <i>I also want to create JLabel components for the grid so I can enter numbers with KeyListener (and having MouseListener for selecting which cell)</i> - what about people who want to use the keyboard? I would just use JTextFields. Then you can tab from cell to cell or use the mouse."},{"owner":{"account_id":278315,"reputation":11589,"user_id":572834,"display_name":"Alexey Ivanov"},"score":0,"creation_date":1646062135,"post_id":71295468,"comment_id":126025653,"body_markdown":"You can&#39;t have two different components at the same `BorderLayout.*` position. If you need two buttons in the bottom panel, place them inside a `JPanel`. If you want there to be blank space around buttons, try using `BoxLayout` for the bottom panel and add the glue on either side of buttons using `Box.createGlue()`.","body":"You can&#39;t have two different components at the same <code>BorderLayout.*</code> position. If you need two buttons in the bottom panel, place them inside a <code>JPanel</code>. If you want there to be blank space around buttons, try using <code>BoxLayout</code> for the bottom panel and add the glue on either side of buttons using <code>Box.createGlue()</code>."},{"owner":{"account_id":5533651,"reputation":846,"user_id":4392781,"accept_rate":0,"display_name":"Tarmiac"},"score":0,"creation_date":1646065152,"post_id":71295468,"comment_id":126026843,"body_markdown":"@camickr Is there a way to get different sized gaps in the GridLayout? To achive the Sudoku-look?","body":"@camickr Is there a way to get different sized gaps in the GridLayout? To achive the Sudoku-look?"},{"owner":{"account_id":183279,"reputation":168313,"user_id":418556,"accept_rate":98,"display_name":"Andrew Thompson"},"score":0,"creation_date":1646068991,"post_id":71295468,"comment_id":126028358,"body_markdown":"*&quot;get different sized gaps in the GridLayout&quot;* No, but you can use a 3x3 of 3x3 gird layouts to create the effect of a Soduko board, as I mentioned in the first comment.. The &#39;outer&#39; grid layout can be assigned more space between each of the panels (each with their own grid layouts with less space) for the effect.","body":"<i>&quot;get different sized gaps in the GridLayout&quot;</i> No, but you can use a 3x3 of 3x3 gird layouts to create the effect of a Soduko board, as I mentioned in the first comment.. The &#39;outer&#39; grid layout can be assigned more space between each of the panels (each with their own grid layouts with less space) for the effect."},{"owner":{"account_id":5533651,"reputation":846,"user_id":4392781,"accept_rate":0,"display_name":"Tarmiac"},"score":0,"creation_date":1646069171,"post_id":71295468,"comment_id":126028423,"body_markdown":"@AndrewThompson Did that and it worked nicely. I did a new question regarding how to translate the coordinate issue that arises next. Any ideas here?\nhttps://stackoverflow.com/questions/71298651/translating-coordinates-from-9-layouts-within-a-larger-one-to-two-dimensional-a","body":"@AndrewThompson Did that and it worked nicely. I did a new question regarding how to translate the coordinate issue that arises next. Any ideas here? <a href=\"https://stackoverflow.com/questions/71298651/translating-coordinates-from-9-layouts-within-a-larger-one-to-two-dimensional-a\" title=\"translating coordinates from 9 layouts within a larger one to two dimensional a\">stackoverflow.com/questions/71298651/&hellip;</a>"}],"answers":[{"tags":[],"owner":{"account_id":183279,"reputation":168313,"user_id":418556,"accept_rate":98,"display_name":"Andrew Thompson"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1646070112,"creation_date":1646070112,"answer_id":71298943,"question_id":71295468,"body_markdown":"You can use a 3x3 grid of 3x3 grid layouts to create the effect of a Soduko board. The &#39;outer&#39; grid layout can be assigned more space between each of the panels (each with its own grid layout with less space) for the effect.\r\n\r\n[![enter image description here][1]][1]\r\n\r\nHere is how that screenshot was created, adjust numbers (colors etc) to suit the exact requirement.\r\n\r\n    import javax.swing.*;\r\n    import javax.swing.border.EmptyBorder;\r\n    import java.awt.*;\r\n    import java.awt.image.BufferedImage;\r\n    \r\n    public class SudokuBoard {\r\n    \r\n        public SudokuBoard() {\r\n            initComponents();\r\n        }\r\n    \r\n        public final void initComponents() {\r\n            JPanel panel = new JPanel(new GridLayout(3,3,6,6));\r\n            panel.setBackground(Color.ORANGE);\r\n            panel.setBorder(new EmptyBorder(3,3,3,3));\r\n            int s = 20;\r\n            BufferedImage image = new BufferedImage(s,s,BufferedImage.TYPE_INT_RGB);\r\n            ImageIcon icon = new ImageIcon(image);\r\n            for (int ii=0; ii&lt;9; ii++) {\r\n                JPanel p = new JPanel(new GridLayout(3,3,2,2));\r\n                p.setBackground(Color.CYAN);\r\n                for (int jj=0; jj&lt;9; jj++) {\r\n                    JLabel l = new JLabel(icon);\r\n                    p.add(l);\r\n                }\r\n                panel.add(p);\r\n            }\r\n    \r\n            JFrame f = new JFrame(&quot;Sudoku&quot;);\r\n            f.add(panel);\r\n            f.setResizable(false);\r\n            f.pack();\r\n            f.setLocationByPlatform(true);\r\n            f.setDefaultCloseOperation(JFrame.DISPOSE_ON_CLOSE);\r\n            f.setVisible(true);\r\n        }\r\n    \r\n        public static void main(String[] args) {\r\n            Runnable r = new Runnable() {\r\n                @Override\r\n                public void run() {\r\n                    new SudokuBoard();\r\n                }\r\n            };\r\n            SwingUtilities.invokeLater(r);\r\n        }\r\n    }\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/maAeN.png","title":"Placing JButtons at exact locations and creating grid of JLabels?","body":"<p>You can use a 3x3 grid of 3x3 grid layouts to create the effect of a Soduko board. The 'outer' grid layout can be assigned more space between each of the panels (each with its own grid layout with less space) for the effect.</p>\n<p><a href=\"https://i.stack.imgur.com/maAeN.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/maAeN.png\" alt=\"enter image description here\" /></a></p>\n<p>Here is how that screenshot was created, adjust numbers (colors etc) to suit the exact requirement.</p>\n<pre><code>import javax.swing.*;\nimport javax.swing.border.EmptyBorder;\nimport java.awt.*;\nimport java.awt.image.BufferedImage;\n\npublic class SudokuBoard {\n\n    public SudokuBoard() {\n        initComponents();\n    }\n\n    public final void initComponents() {\n        JPanel panel = new JPanel(new GridLayout(3,3,6,6));\n        panel.setBackground(Color.ORANGE);\n        panel.setBorder(new EmptyBorder(3,3,3,3));\n        int s = 20;\n        BufferedImage image = new BufferedImage(s,s,BufferedImage.TYPE_INT_RGB);\n        ImageIcon icon = new ImageIcon(image);\n        for (int ii=0; ii&lt;9; ii++) {\n            JPanel p = new JPanel(new GridLayout(3,3,2,2));\n            p.setBackground(Color.CYAN);\n            for (int jj=0; jj&lt;9; jj++) {\n                JLabel l = new JLabel(icon);\n                p.add(l);\n            }\n            panel.add(p);\n        }\n\n        JFrame f = new JFrame(&quot;Sudoku&quot;);\n        f.add(panel);\n        f.setResizable(false);\n        f.pack();\n        f.setLocationByPlatform(true);\n        f.setDefaultCloseOperation(JFrame.DISPOSE_ON_CLOSE);\n        f.setVisible(true);\n    }\n\n    public static void main(String[] args) {\n        Runnable r = new Runnable() {\n            @Override\n            public void run() {\n                new SudokuBoard();\n            }\n        };\n        SwingUtilities.invokeLater(r);\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":5533651,"reputation":846,"user_id":4392781,"accept_rate":0,"display_name":"Tarmiac"},"comment_count":12,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":36,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1646070112,"creation_date":1646053597,"question_id":71295468,"body_markdown":"```\r\npublic class SudukoGUI extends JPanel{\r\n\t\r\n\tprivate static int WIDTH;\r\n\tprivate static int HEIGHT;\r\n\tprivate static int PANEL_HEIGHT;\r\n\t\r\n\tpublic SudukoGUI(int width, int height, String title) {\r\n\t\tthis.WIDTH = width;\r\n\t\tthis.HEIGHT = height;\r\n\t\tthis.PANEL_HEIGHT = height - width;\r\n\t\tSwingUtilities.invokeLater(() -&gt; initGUI(WIDTH, HEIGHT, title));\r\n\t}\r\n\t\r\n\tpublic int getWidth() {\r\n\t\treturn WIDTH;\r\n\t}\r\n\t\r\n\tpublic int getHeight() {\r\n\t\treturn HEIGHT;\r\n\t}\r\n\t\r\n\tpublic void initGUI(int width, int height, String title) {\r\n\t\tJFrame frame = new JFrame(title);\r\n\t\tJButton b1 = new JButton(&quot;Solve&quot;);\r\n\t\tJButton b2 = new JButton(&quot;Clear&quot;);\r\n\t\t\r\n//\t\tJPanel bp = new JPanel();\r\n//\t\tbp.setLayout(new BorderLayout());\r\n//\t\tbp.setPreferredSize(new Dimension(WIDTH, PANEL_HEIGHT));\r\n//\t\tframe.add(bp);\r\n\t\t\r\n\t\tthis.setPreferredSize(new Dimension(width, height));\r\n\t\t\r\n\t\tthis.setLayout(new BorderLayout());\r\n\t\tthis.add(b1, BorderLayout.SOUTH);\r\n\t\tthis.add(b2, BorderLayout.SOUTH);\r\n\r\n\t\tframe.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\r\n\t\tframe.setLocationRelativeTo(null);\r\n\t\tframe.setResizable(false);\r\n\t\tframe.setSize(width + 16, height);\r\n\t\tframe.setVisible(true);\r\n\t\tframe.add(this);\r\n\t\t//frame.pack();\r\n\t}\r\n\t\r\n\t@Override\r\n\tprotected void paintComponent(Graphics g) {\r\n\t\tsuper.paintComponent(g);\r\n\t\tGraphics2D g2d = (Graphics2D) g;\r\n\t\t\r\n\t\tg2d.setColor(new Color(1.0f, 1.0f, 1.0f));\r\n\t\t\r\n\t\tint cellWidth = WIDTH / Suduko.getNumRows();\r\n\t\tint cellHeight = (HEIGHT - PANEL_HEIGHT) / Suduko.getNumCols();\r\n\t\tint gridHeight = HEIGHT - PANEL_HEIGHT;\r\n\t\tint regionWidth = 3, regionHeight = 3;\r\n\t\t\t\t\r\n\t\tg2d.fillRect(0, 0, WIDTH, HEIGHT);\r\n\t\t\r\n\t\tg2d.setColor(new Color(0,0,0));\r\n\t\tfor(int i = 0; i &lt;= WIDTH; i += cellWidth) {\r\n\t\t\tif((i / cellWidth) % regionWidth == 0) {\r\n\t\t\t\tg2d.setStroke(new BasicStroke(2));\r\n\t\t\t\tg2d.drawLine(i, 0, i, gridHeight);\r\n\t\t\t}else {\r\n\t\t\t\tg2d.setStroke(new BasicStroke(1));\r\n\t\t\t\tg2d.drawLine(i, 0, i, gridHeight);\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\tfor(int i = 0; i &lt;= gridHeight; i += cellHeight) {\r\n\t\t\tif((i / cellHeight) % regionHeight == 0) {\r\n\t\t\t\tg2d.setStroke(new BasicStroke(2));\r\n\t\t\t\tg2d.drawLine(0, i, WIDTH, i);\r\n\t\t\t}else {\r\n\t\t\t\tg2d.setStroke(new BasicStroke(1));\r\n\t\t\t\tg2d.drawLine(0,  i, WIDTH, i);\r\n\t\t\t}\r\n\t\t}\t\r\n\t}\r\n}\r\n```\r\n\r\n[![enter image description here][1]][1]\r\n\r\nAs of now both buttons are at `BorderLayout.SOUTH`. I don&#39;t know how to place them at the bottom of this window and in smaller sizes. I tried creating a separate `JPanel` with ```setPreferredSize(new Dimension(WIDTH, PANEL_HEIGHT));``` So it would be the blank area at the bottom, but that doesn&#39;t work of course, when changing the border layout the buttons take up the entire height. I want to place the buttons at the bottom in the blank area. \r\n\r\nI also want to create `JLabel` components for the grid so I can enter numbers with `KeyListener` (and having `MouseListener` for selecting which cell). I&#39;m not sure here how to proceed how to create labels in a grid format and how to set exact sizes to them etc. Any tips?\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/KHq4a.png","title":"Placing JButtons at exact locations and creating grid of JLabels?","body":"<pre><code>public class SudukoGUI extends JPanel{\n    \n    private static int WIDTH;\n    private static int HEIGHT;\n    private static int PANEL_HEIGHT;\n    \n    public SudukoGUI(int width, int height, String title) {\n        this.WIDTH = width;\n        this.HEIGHT = height;\n        this.PANEL_HEIGHT = height - width;\n        SwingUtilities.invokeLater(() -&gt; initGUI(WIDTH, HEIGHT, title));\n    }\n    \n    public int getWidth() {\n        return WIDTH;\n    }\n    \n    public int getHeight() {\n        return HEIGHT;\n    }\n    \n    public void initGUI(int width, int height, String title) {\n        JFrame frame = new JFrame(title);\n        JButton b1 = new JButton(&quot;Solve&quot;);\n        JButton b2 = new JButton(&quot;Clear&quot;);\n        \n//      JPanel bp = new JPanel();\n//      bp.setLayout(new BorderLayout());\n//      bp.setPreferredSize(new Dimension(WIDTH, PANEL_HEIGHT));\n//      frame.add(bp);\n        \n        this.setPreferredSize(new Dimension(width, height));\n        \n        this.setLayout(new BorderLayout());\n        this.add(b1, BorderLayout.SOUTH);\n        this.add(b2, BorderLayout.SOUTH);\n\n        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\n        frame.setLocationRelativeTo(null);\n        frame.setResizable(false);\n        frame.setSize(width + 16, height);\n        frame.setVisible(true);\n        frame.add(this);\n        //frame.pack();\n    }\n    \n    @Override\n    protected void paintComponent(Graphics g) {\n        super.paintComponent(g);\n        Graphics2D g2d = (Graphics2D) g;\n        \n        g2d.setColor(new Color(1.0f, 1.0f, 1.0f));\n        \n        int cellWidth = WIDTH / Suduko.getNumRows();\n        int cellHeight = (HEIGHT - PANEL_HEIGHT) / Suduko.getNumCols();\n        int gridHeight = HEIGHT - PANEL_HEIGHT;\n        int regionWidth = 3, regionHeight = 3;\n                \n        g2d.fillRect(0, 0, WIDTH, HEIGHT);\n        \n        g2d.setColor(new Color(0,0,0));\n        for(int i = 0; i &lt;= WIDTH; i += cellWidth) {\n            if((i / cellWidth) % regionWidth == 0) {\n                g2d.setStroke(new BasicStroke(2));\n                g2d.drawLine(i, 0, i, gridHeight);\n            }else {\n                g2d.setStroke(new BasicStroke(1));\n                g2d.drawLine(i, 0, i, gridHeight);\n            }\n        }\n        \n        for(int i = 0; i &lt;= gridHeight; i += cellHeight) {\n            if((i / cellHeight) % regionHeight == 0) {\n                g2d.setStroke(new BasicStroke(2));\n                g2d.drawLine(0, i, WIDTH, i);\n            }else {\n                g2d.setStroke(new BasicStroke(1));\n                g2d.drawLine(0,  i, WIDTH, i);\n            }\n        }   \n    }\n}\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/KHq4a.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/KHq4a.png\" alt=\"enter image description here\" /></a></p>\n<p>As of now both buttons are at <code>BorderLayout.SOUTH</code>. I don't know how to place them at the bottom of this window and in smaller sizes. I tried creating a separate <code>JPanel</code> with <code>setPreferredSize(new Dimension(WIDTH, PANEL_HEIGHT));</code> So it would be the blank area at the bottom, but that doesn't work of course, when changing the border layout the buttons take up the entire height. I want to place the buttons at the bottom in the blank area.</p>\n<p>I also want to create <code>JLabel</code> components for the grid so I can enter numbers with <code>KeyListener</code> (and having <code>MouseListener</code> for selecting which cell). I'm not sure here how to proceed how to create labels in a grid format and how to set exact sizes to them etc. Any tips?</p>\n"},{"tags":["java","concurrency","reference","volatile","consistency"],"answers":[{"tags":[],"owner":{"account_id":3211603,"reputation":289297,"user_id":2711488,"display_name":"Holger"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1646069903,"creation_date":1646069903,"answer_id":71298917,"question_id":71255376,"body_markdown":"When you invoke `clear()` on a reference object, it will only clear this particular `Reference` object without any impact on the rest of your application and no special memory semantics. It’s exactly like you have seen in the code, an assignment of `null` to a field which has no `volatile` modifier.\r\n\r\nMind [the documentation of `clear()`]:\r\n\r\n&gt; This method is invoked only by Java code; when the garbage collector clears references it does so directly, without invoking this method.\r\n\r\nSo this is not related to the event of the GC clearing a reference. Your assumption “that all threads will see it cleared” when the GC clears a reference is correct. The [documentation of `WeakReference`] states:\r\n\r\n&gt; Suppose that the garbage collector determines at a certain point in time that an object is [weakly reachable]. At that time it will atomically clear all weak references to that object and all weak references to any other weakly-reachable objects from which that object is reachable through a chain of strong and soft references.\r\n\r\nSo at this point, not only all threads will agree that a weak reference has been cleared, they will also agree that all weak references to the same object have been cleared. A similar statement can be found at `SoftReference` and `PhantomReference`.\r\n\r\n[The Java Language Specification, &#167;12.6.2. Interaction with the Memory Model] refers to points where such an atomic clear may happen as *reachability decision points*. It specifies interactions between these points and other program actions, in terms of “*comes-before di*” and “*comes-after di*” relationships, the most import ones being:\r\n\r\n&gt; If *r* is a read that sees a write *w* and *r* comes-before *di*, then *w* must come-before *di*.\r\n&gt; \r\n&gt; If *x* and *y* are synchronization actions on the same variable or monitor such that *so(x, y)* ([&#167;17.4.4]) and *y* comes-before *di*, then *x* must come-before *di*.\r\n\r\nSo, the GC action will be inserted into the synchronization order and even a racy read could not subvert it, but it’s important to keep in mind that the exact location of the reachability decision point is not known to the application. It’s obviously somewhere between the last point where `get()` returned a non-`null` reference or `refersTo(null)` returned `false` and the first point where `get()` returned `null` or `refersTo(null)` returned `true`.\r\n\r\nFor practical applications, the fact that once the reference reports the object to be garbage collected you can be sure that it won’t reappear anywhere&#185;, is enough. Just keep the reference object private, to be sure that not someone invoked `clear()` on it.\r\n\r\n&#185; Letting things like “finalizer resurrection aside”\r\n\r\n[the documentation of `clear()`]: https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/ref/Reference.html#clear()\r\n[documentation of `WeakReference`]: https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/ref/WeakReference.html\r\n[weakly reachable]: https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/ref/package-summary.html#reachability\r\n[The Java Language Specification, &#167;12.6.2. Interaction with the Memory Model]: https://docs.oracle.com/javase/specs/jls/se17/html/jls-12.html#jls-12.6.2\r\n[&#167;17.4.4]: https://docs.oracle.com/javase/specs/jls/se17/html/jls-17.html#jls-17.4.4 (17.4.4. Synchronization Order)","title":"Memory semantics of java.lang.ref.Reference methods","body":"<p>When you invoke <code>clear()</code> on a reference object, it will only clear this particular <code>Reference</code> object without any impact on the rest of your application and no special memory semantics. It’s exactly like you have seen in the code, an assignment of <code>null</code> to a field which has no <code>volatile</code> modifier.</p>\n<p>Mind <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/ref/Reference.html#clear()\" rel=\"nofollow noreferrer\">the documentation of <code>clear()</code></a>:</p>\n<blockquote>\n<p>This method is invoked only by Java code; when the garbage collector clears references it does so directly, without invoking this method.</p>\n</blockquote>\n<p>So this is not related to the event of the GC clearing a reference. Your assumption “that all threads will see it cleared” when the GC clears a reference is correct. The <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/ref/WeakReference.html\" rel=\"nofollow noreferrer\">documentation of <code>WeakReference</code></a> states:</p>\n<blockquote>\n<p>Suppose that the garbage collector determines at a certain point in time that an object is <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/ref/package-summary.html#reachability\" rel=\"nofollow noreferrer\">weakly reachable</a>. At that time it will atomically clear all weak references to that object and all weak references to any other weakly-reachable objects from which that object is reachable through a chain of strong and soft references.</p>\n</blockquote>\n<p>So at this point, not only all threads will agree that a weak reference has been cleared, they will also agree that all weak references to the same object have been cleared. A similar statement can be found at <code>SoftReference</code> and <code>PhantomReference</code>.</p>\n<p><a href=\"https://docs.oracle.com/javase/specs/jls/se17/html/jls-12.html#jls-12.6.2\" rel=\"nofollow noreferrer\">The Java Language Specification, §12.6.2. Interaction with the Memory Model</a> refers to points where such an atomic clear may happen as <em>reachability decision points</em>. It specifies interactions between these points and other program actions, in terms of “<em>comes-before di</em>” and “<em>comes-after di</em>” relationships, the most import ones being:</p>\n<blockquote>\n<p>If <em>r</em> is a read that sees a write <em>w</em> and <em>r</em> comes-before <em>di</em>, then <em>w</em> must come-before <em>di</em>.</p>\n<p>If <em>x</em> and <em>y</em> are synchronization actions on the same variable or monitor such that <em>so(x, y)</em> (<a href=\"https://docs.oracle.com/javase/specs/jls/se17/html/jls-17.html#jls-17.4.4\" rel=\"nofollow noreferrer\" title=\"17.4.4. Synchronization Order\">§17.4.4</a>) and <em>y</em> comes-before <em>di</em>, then <em>x</em> must come-before <em>di</em>.</p>\n</blockquote>\n<p>So, the GC action will be inserted into the synchronization order and even a racy read could not subvert it, but it’s important to keep in mind that the exact location of the reachability decision point is not known to the application. It’s obviously somewhere between the last point where <code>get()</code> returned a non-<code>null</code> reference or <code>refersTo(null)</code> returned <code>false</code> and the first point where <code>get()</code> returned <code>null</code> or <code>refersTo(null)</code> returned <code>true</code>.</p>\n<p>For practical applications, the fact that once the reference reports the object to be garbage collected you can be sure that it won’t reappear anywhere¹, is enough. Just keep the reference object private, to be sure that not someone invoked <code>clear()</code> on it.</p>\n<p>¹ Letting things like “finalizer resurrection aside”</p>\n"}],"owner":{"account_id":9719856,"reputation":430,"user_id":7208919,"display_name":"Juan"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":92,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":71298917,"answer_count":1,"score":3,"last_activity_date":1646069903,"creation_date":1645720979,"question_id":71255376,"body_markdown":"I am developing some concurrent algorithms which deal with Reference objects. I am using java 17.\r\n\r\nThe thing is I don&#39;t know what&#39;s the memory semantics of operations like get, clear or refersTo. It isn&#39;t documented in the Javadoc.\r\n\r\nLooking into the source code of OpenJdk, the referent has no modifier, such as volatile (while the next pointer for reference queues is volatile).\r\nAlso, get implementation is trivial, but it is an intrinsic candidate. clear and refersTo are native. So I don&#39;t know what they really do.\r\n\r\nWhen the GC clears a reference, I have to assume that all threads will see it cleared, or otherwise they would see a reference to an object (in process of being) garbage collected, but it&#39;s just an informal guess.\r\n\r\nIs there any warranty about the memory semantics of all these operations?\r\n\r\nIf there isn&#39;t, is there a way to obtain the same warranries of a volatile access by invoking, for instance, a fence operation before and/or after calling one of these operations?\r\n","title":"Memory semantics of java.lang.ref.Reference methods","body":"<p>I am developing some concurrent algorithms which deal with Reference objects. I am using java 17.</p>\n<p>The thing is I don't know what's the memory semantics of operations like get, clear or refersTo. It isn't documented in the Javadoc.</p>\n<p>Looking into the source code of OpenJdk, the referent has no modifier, such as volatile (while the next pointer for reference queues is volatile).\nAlso, get implementation is trivial, but it is an intrinsic candidate. clear and refersTo are native. So I don't know what they really do.</p>\n<p>When the GC clears a reference, I have to assume that all threads will see it cleared, or otherwise they would see a reference to an object (in process of being) garbage collected, but it's just an informal guess.</p>\n<p>Is there any warranty about the memory semantics of all these operations?</p>\n<p>If there isn't, is there a way to obtain the same warranries of a volatile access by invoking, for instance, a fence operation before and/or after calling one of these operations?</p>\n"},{"tags":["java","intellij-idea","javac"],"comments":[{"owner":{"account_id":6651855,"reputation":224830,"user_id":5133585,"accept_rate":96,"display_name":"Sweeper"},"score":0,"creation_date":1646068654,"post_id":71298655,"comment_id":126028218,"body_markdown":"Please don&#39;t ask multiple questions in one post. Please [edit] to remove one of your questions.","body":"Please don&#39;t ask multiple questions in one post. Please <a href=\"https://stackoverflow.com/posts/71298655/edit\">edit</a> to remove one of your questions."},{"owner":{"account_id":195854,"reputation":159194,"user_id":438992,"accept_rate":90,"display_name":"Dave Newton"},"score":1,"creation_date":1646068758,"post_id":71298655,"comment_id":126028271,"body_markdown":"What do you mean by they yield &quot;different results&quot;?","body":"What do you mean by they yield &quot;different results&quot;?"},{"owner":{"account_id":15375909,"reputation":643,"user_id":11092636,"display_name":"FluidMechanics Potential Flows"},"score":0,"creation_date":1646068918,"post_id":71298655,"comment_id":126028333,"body_markdown":"I&#39;ve removed one of my questions and will post a new one. Sorry @Sweeper.","body":"I&#39;ve removed one of my questions and will post a new one. Sorry @Sweeper."},{"owner":{"account_id":15375909,"reputation":643,"user_id":11092636,"display_name":"FluidMechanics Potential Flows"},"score":0,"creation_date":1646068970,"post_id":71298655,"comment_id":126028349,"body_markdown":"@DaveNewton What I meant is that the file I obtain after `javac myfile.java` is different than what I view when i click `Show bytecode` so I figured they both played a different role into how a .java file is processed to be executed.","body":"@DaveNewton What I meant is that the file I obtain after <code>javac myfile.java</code> is different than what I view when i click <code>Show bytecode</code> so I figured they both played a different role into how a .java file is processed to be executed."},{"owner":{"account_id":195854,"reputation":159194,"user_id":438992,"accept_rate":90,"display_name":"Dave Newton"},"score":0,"creation_date":1646069039,"post_id":71298655,"comment_id":126028373,"body_markdown":"Different how? What are you expecting to see in either case?","body":"Different how? What are you expecting to see in either case?"},{"owner":{"account_id":15375909,"reputation":643,"user_id":11092636,"display_name":"FluidMechanics Potential Flows"},"score":0,"creation_date":1646069143,"post_id":71298655,"comment_id":126028406,"body_markdown":"Well I was expecting to see the same file - the one that was given to the machine. I don&#39;t know much about low-level programming so I&#39;m just wondering what those two do if they&#39;re not the same files. I&#39;m sorry if I&#39;m not clear.","body":"Well I was expecting to see the same file - the one that was given to the machine. I don&#39;t know much about low-level programming so I&#39;m just wondering what those two do if they&#39;re not the same files. I&#39;m sorry if I&#39;m not clear."},{"owner":{"account_id":6651855,"reputation":224830,"user_id":5133585,"accept_rate":96,"display_name":"Sweeper"},"score":1,"creation_date":1646069319,"post_id":71298655,"comment_id":126028477,"body_markdown":"What program are you viewing the .class file with? Most text editors will only display gibberish, since it is a binary file, not text.","body":"What program are you viewing the .class file with? Most text editors will only display gibberish, since it is a binary file, not text."},{"owner":{"account_id":15375909,"reputation":643,"user_id":11092636,"display_name":"FluidMechanics Potential Flows"},"score":0,"creation_date":1646070671,"post_id":71298655,"comment_id":126028893,"body_markdown":"@Sweeper I was using IntelliJ. I didn&#39;t know a binary file wasn&#39;t text!","body":"@Sweeper I was using IntelliJ. I didn&#39;t know a binary file wasn&#39;t text!"}],"answers":[{"tags":[],"owner":{"account_id":1082858,"reputation":104688,"user_id":1079354,"accept_rate":93,"display_name":"Makoto"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1646069462,"creation_date":1646069462,"answer_id":71298840,"question_id":71298655,"body_markdown":"`javac` produces bytecode.  That&#39;s what all JVM languages compile down to.\r\n\r\nIntelliJ&#39;s bytecode viewer shows you a *projection* of that bytecode, since it&#39;s [normally not human readable](https://docs.oracle.com/javase/specs/jvms/se7/html/jvms-4.html).\r\n\r\nNote that the IntelliJ tool *won&#39;t* work if the class is not compiled, since it won&#39;t actually know what the exact bytecode is.","title":"difference between javac and bytecode","body":"<p><code>javac</code> produces bytecode.  That's what all JVM languages compile down to.</p>\n<p>IntelliJ's bytecode viewer shows you a <em>projection</em> of that bytecode, since it's <a href=\"https://docs.oracle.com/javase/specs/jvms/se7/html/jvms-4.html\" rel=\"nofollow noreferrer\">normally not human readable</a>.</p>\n<p>Note that the IntelliJ tool <em>won't</em> work if the class is not compiled, since it won't actually know what the exact bytecode is.</p>\n"}],"owner":{"account_id":15375909,"reputation":643,"user_id":11092636,"display_name":"FluidMechanics Potential Flows"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":146,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"closed_date":1646069580,"accepted_answer_id":71298840,"answer_count":1,"score":-1,"last_activity_date":1646069462,"creation_date":1646068421,"question_id":71298655,"body_markdown":"I understand IntelliJ does everything automatically by clicking on the little green arrow next to my Main class but I&#39;m trying to understand what&#39;s happening underneath.\r\n\r\nOn the internet I&#39;ve encountered two different things. First is the file created when we do `javac` + `my_file.java`. Second is the `Show bytecode` in the View section in the menu.\r\n[![enter image description here][1]][1]\r\n\r\nBoth yield different results, so I was looking for more explanation on what those two are.\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/LRTLK.png\r\n","title":"difference between javac and bytecode","body":"<p>I understand IntelliJ does everything automatically by clicking on the little green arrow next to my Main class but I'm trying to understand what's happening underneath.</p>\n<p>On the internet I've encountered two different things. First is the file created when we do <code>javac</code> + <code>my_file.java</code>. Second is the <code>Show bytecode</code> in the View section in the menu.\n<a href=\"https://i.stack.imgur.com/LRTLK.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/LRTLK.png\" alt=\"enter image description here\" /></a></p>\n<p>Both yield different results, so I was looking for more explanation on what those two are.</p>\n"},{"tags":["java","javafx-8","textflow"],"answers":[{"tags":[],"owner":{"account_id":1956160,"reputation":36345,"user_id":1759128,"accept_rate":54,"display_name":"ItachiUchiha"},"down_vote_count":1,"up_vote_count":9,"is_accepted":true,"score":8,"last_activity_date":1445504060,"creation_date":1445504060,"answer_id":33277020,"question_id":33274827,"body_markdown":"Text and TextFlow in JavaFX are not &quot;selectable&quot;. \r\n\r\nThere is an issue open for this : [Text should have API for selecting group of characters based on their position similar to the DOM&#39;s Range](https://bugs.openjdk.java.net/browse/JDK-8092278).\r\n\r\n\r\nUntil the issue is taken care of, your best option is to use a 3rd party control like [RichTextFX](https://github.com/TomasMikula/RichTextFX). ","title":"How to make textflow selectable","body":"<p>Text and TextFlow in JavaFX are not \"selectable\". </p>\n\n<p>There is an issue open for this : <a href=\"https://bugs.openjdk.java.net/browse/JDK-8092278\" rel=\"noreferrer\">Text should have API for selecting group of characters based on their position similar to the DOM's Range</a>.</p>\n\n<p>Until the issue is taken care of, your best option is to use a 3rd party control like <a href=\"https://github.com/TomasMikula/RichTextFX\" rel=\"noreferrer\">RichTextFX</a>. </p>\n"},{"tags":[],"owner":{"account_id":24390162,"reputation":11,"user_id":18320250,"display_name":"Chengen Zhao"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1646069310,"creation_date":1646069310,"answer_id":71298811,"question_id":33274827,"body_markdown":"I think I got a nasty way of doing the similar job\r\n\r\n1) Text could sense the mouse enter &amp; exit move event\r\n\r\n2) We could set a signal for mouse pressed and release event. Would be nice to have this event triggered on Textflow node\r\n\r\n3) extends Text class to have mouse enter event handler, when the global signal is on and mouse enters text then copy the text to some places\r\nand also record the text place in the textflow \r\nusing sth. like\r\nvar index = textflow.getChildren().indexof(text)\r\nrecord the pair of index and text\r\n\r\n4) when mouse release or exit event are triggered, sort the texts selected and generate the corresponding texts into clipboard","title":"How to make textflow selectable","body":"<p>I think I got a nasty way of doing the similar job</p>\n<ol>\n<li><p>Text could sense the mouse enter &amp; exit move event</p>\n</li>\n<li><p>We could set a signal for mouse pressed and release event. Would be nice to have this event triggered on Textflow node</p>\n</li>\n<li><p>extends Text class to have mouse enter event handler, when the global signal is on and mouse enters text then copy the text to some places\nand also record the text place in the textflow\nusing sth. like\nvar index = textflow.getChildren().indexof(text)\nrecord the pair of index and text</p>\n</li>\n<li><p>when mouse release or exit event are triggered, sort the texts selected and generate the corresponding texts into clipboard</p>\n</li>\n</ol>\n"}],"owner":{"account_id":2796841,"reputation":135,"user_id":2405926,"accept_rate":62,"display_name":"RhysBuddy"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3944,"favorite_count":0,"down_vote_count":0,"up_vote_count":7,"accepted_answer_id":33277020,"answer_count":2,"score":7,"last_activity_date":1646069310,"creation_date":1445496145,"question_id":33274827,"body_markdown":"I have made a `TextFlow`, as I need to use multiple font-postures (I have set particular &quot;Text&quot; to either italic or normal). Once I display the `TextFlow`, it&#39;s not selectable/copyable. All I need is the TextFlow to be selectable once it&#39;s displayed in a scene, so it can be copy/paste-able.\r\n\r\nText example with font-posture (only one for examples sake):\r\n\r\n    Text volumeText = new Text(volume.getText());\r\n    volumeText.setFill(Color.WHITE); \r\n    volumeText.setFont(Font.font(&quot;arial&quot;, FontPosture.ITALIC, 13));\r\n    TextFlow reference = new TextFlow(\r\n                             lastNameText, miscelanous1, firstNameText, miscelanous2);\r\n    reference.setLayoutX(115);\r\n    reference.setLayoutY(480);\r\n    reference.setMaxWidth(500);\r\n    control.getChildren().add(reference);","title":"How to make textflow selectable","body":"<p>I have made a <code>TextFlow</code>, as I need to use multiple font-postures (I have set particular \"Text\" to either italic or normal). Once I display the <code>TextFlow</code>, it's not selectable/copyable. All I need is the TextFlow to be selectable once it's displayed in a scene, so it can be copy/paste-able.</p>\n\n<p>Text example with font-posture (only one for examples sake):</p>\n\n<pre><code>Text volumeText = new Text(volume.getText());\nvolumeText.setFill(Color.WHITE); \nvolumeText.setFont(Font.font(\"arial\", FontPosture.ITALIC, 13));\nTextFlow reference = new TextFlow(\n                         lastNameText, miscelanous1, firstNameText, miscelanous2);\nreference.setLayoutX(115);\nreference.setLayoutY(480);\nreference.setMaxWidth(500);\ncontrol.getChildren().add(reference);\n</code></pre>\n"},{"tags":["java","hadoop"],"comments":[{"owner":{"account_id":19571657,"reputation":181,"user_id":14322692,"display_name":"Karan Gehlod"},"score":0,"creation_date":1679993791,"post_id":39519566,"comment_id":133816435,"body_markdown":"if you are using organization domain pc/laptop please connect with VPN to solve issue.","body":"if you are using organization domain pc/laptop please connect with VPN to solve issue."}],"answers":[{"tags":[],"owner":{"account_id":3267881,"reputation":3993,"user_id":2751997,"accept_rate":71,"display_name":"John Chrysostom"},"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1616097264,"creation_date":1473970262,"answer_id":39519567,"question_id":39519566,"body_markdown":"This is a bug related to how Hadoop 2.7 understands file permissions on Windows when you have an office domain and are not currently connected to it (e.g., because you&#39;re working remote).\r\n\r\nThe long-term fix is to upgrade to Hadoop 2.8+.\r\n\r\nThe short-term fix is to VPN into your office when working remote so that you can be connected to your office domain and Hadoop will somehow understand your permissions correctly.","title":"Failed to setup local dir in Hadoop on Windows","body":"<p>This is a bug related to how Hadoop 2.7 understands file permissions on Windows when you have an office domain and are not currently connected to it (e.g., because you're working remote).</p>\n<p>The long-term fix is to upgrade to Hadoop 2.8+.</p>\n<p>The short-term fix is to VPN into your office when working remote so that you can be connected to your office domain and Hadoop will somehow understand your permissions correctly.</p>\n"},{"tags":[],"owner":{"account_id":4375063,"reputation":492,"user_id":3568315,"accept_rate":25,"display_name":"Manoj Kumar G"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1474027925,"creation_date":1474027925,"answer_id":39531230,"question_id":39519566,"body_markdown":"This is a permissions issue. Sometime back I too got this error while trying to submit the a mapreduce job. The OS was CentOS and not Windows. But however, the cause of this error is same. The /tmp directory has been created by &quot;hdfs&quot; user and belongs to &quot;supergroup&quot;. It some user who does not belong to supergroup try to submit a job, the user is sure to get this error. \r\n\r\n    Name\tUser\tGroup\t    \r\n\r\n    tmp\t\thdfs\tsupergroup\t\r\n\r\n\r\nThis is the reason why when you login to your office domain and submit the job, the job executes. \r\n","title":"Failed to setup local dir in Hadoop on Windows","body":"<p>This is a permissions issue. Sometime back I too got this error while trying to submit the a mapreduce job. The OS was CentOS and not Windows. But however, the cause of this error is same. The /tmp directory has been created by \"hdfs\" user and belongs to \"supergroup\". It some user who does not belong to supergroup try to submit a job, the user is sure to get this error. </p>\n\n<pre><code>Name    User    Group       \n\ntmp     hdfs    supergroup  \n</code></pre>\n\n<p>This is the reason why when you login to your office domain and submit the job, the job executes. </p>\n"},{"tags":[],"owner":{"account_id":11365491,"reputation":79,"user_id":8332522,"display_name":"Khanh Duy Pham"},"down_vote_count":1,"up_vote_count":8,"is_accepted":false,"score":7,"last_activity_date":1523127075,"creation_date":1500475980,"answer_id":45194188,"question_id":39519566,"body_markdown":"You should run CMD with &quot;Run as Administrator&quot; to fix this as the Hadoop cluster environment is on WINDOWS operating system","title":"Failed to setup local dir in Hadoop on Windows","body":"<p>You should run CMD with \"Run as Administrator\" to fix this as the Hadoop cluster environment is on WINDOWS operating system</p>\n"},{"tags":[],"owner":{"account_id":5098424,"reputation":46,"user_id":4088895,"display_name":"Jordan Huffaker"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1548964091,"creation_date":1548964091,"answer_id":54468217,"question_id":39519566,"body_markdown":"There seems to be a bug in Hadoop 2.7 related to file permissions on windows. You can either fix the bug by [editing the code directly][1] or save yourself the headache by upgrading to Hadoop 2.8.\r\n\r\n\r\n  [1]: http://mail-archives.apache.org/mod_mbox/hadoop-yarn-issues/201602.mbox/%3CJIRA.12771411.1422646436000.276347.1454420139878@Atlassian.JIRA%3E","title":"Failed to setup local dir in Hadoop on Windows","body":"<p>There seems to be a bug in Hadoop 2.7 related to file permissions on windows. You can either fix the bug by <a href=\"http://mail-archives.apache.org/mod_mbox/hadoop-yarn-issues/201602.mbox/%3CJIRA.12771411.1422646436000.276347.1454420139878@Atlassian.JIRA%3E\" rel=\"nofollow noreferrer\">editing the code directly</a> or save yourself the headache by upgrading to Hadoop 2.8.</p>\n"},{"tags":[],"owner":{"account_id":11682804,"reputation":31,"user_id":8553842,"display_name":"Megh Patel"},"down_vote_count":1,"up_vote_count":3,"is_accepted":false,"score":2,"last_activity_date":1615576505,"creation_date":1615576505,"answer_id":66605910,"question_id":39519566,"body_markdown":"One solution to the problem is to run the command prompt as administrator and then running the scripts like &quot;start-all.cmd&quot;. I think the administrator privileges will solve the problem.","title":"Failed to setup local dir in Hadoop on Windows","body":"<p>One solution to the problem is to run the command prompt as administrator and then running the scripts like &quot;start-all.cmd&quot;. I think the administrator privileges will solve the problem.</p>\n"}],"owner":{"account_id":3267881,"reputation":3993,"user_id":2751997,"accept_rate":71,"display_name":"John Chrysostom"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":4696,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":39519567,"answer_count":5,"score":2,"last_activity_date":1646069280,"creation_date":1473970262,"question_id":39519566,"body_markdown":"Trying to run MapReduce jobs on Windows, when I got an error like this:\r\n\r\n    Error: Application application_1441785420720_0002 failed 2 times due to AM Container for appattempt_1441785420720_0002_000002 exited with exitCode:-1000\r\n\r\n    Diagnostics:\r\n    Application application_1441785420720_0003 failed 2 times due to AM Container for appattempt_1441785420720_0003_000002 exited with exitCode: -1000 For more detailed output, check application tracking page:http://HOST:8088/cluster/app/application_1441785420720_0003 Then, click on links to logs of each attempt.\r\n\r\n    Diagnostics: Failed to setup local dir /tmp/hadoop-USER/nm-local-dir, which was marked as good. Failing this attempt. Failing the application.\r\n\r\nEverything worked fine yesterday, and nothing about the Java Environment, file permissions, or Hadoop configurations has changed.","title":"Failed to setup local dir in Hadoop on Windows","body":"<p>Trying to run MapReduce jobs on Windows, when I got an error like this:</p>\n\n<pre><code>Error: Application application_1441785420720_0002 failed 2 times due to AM Container for appattempt_1441785420720_0002_000002 exited with exitCode:-1000\n\nDiagnostics:\nApplication application_1441785420720_0003 failed 2 times due to AM Container for appattempt_1441785420720_0003_000002 exited with exitCode: -1000 For more detailed output, check application tracking page:http://HOST:8088/cluster/app/application_1441785420720_0003 Then, click on links to logs of each attempt.\n\nDiagnostics: Failed to setup local dir /tmp/hadoop-USER/nm-local-dir, which was marked as good. Failing this attempt. Failing the application.\n</code></pre>\n\n<p>Everything worked fine yesterday, and nothing about the Java Environment, file permissions, or Hadoop configurations has changed.</p>\n"},{"tags":["java","intellij-idea","javac"],"comments":[{"owner":{"account_id":36734,"reputation":392127,"user_id":104891,"display_name":"CrazyCoder"},"score":0,"creation_date":1646069408,"post_id":71298774,"comment_id":126028505,"body_markdown":"See https://stackoverflow.com/a/58125957/104891. You need to install standalone JDK and javac will be in the bin directory of it, add bin directory of the JDK to PATH and reboot. It&#39;s not recommended to use JetBrains Runtime for development, it&#39;s for running the IDE itself.","body":"See <a href=\"https://stackoverflow.com/a/58125957/104891\">stackoverflow.com/a/58125957/104891</a>. You need to install standalone JDK and javac will be in the bin directory of it, add bin directory of the JDK to PATH and reboot. It&#39;s not recommended to use JetBrains Runtime for development, it&#39;s for running the IDE itself."},{"owner":{"account_id":15375909,"reputation":643,"user_id":11092636,"display_name":"FluidMechanics Potential Flows"},"score":0,"creation_date":1646070078,"post_id":71298774,"comment_id":126028706,"body_markdown":"I don&#39;t think I&#39;m using JetBrains Runtime, I&#39;m using https://i.imgur.com/bqpC8qP.png (I&#39;ve clicked on download jdk). Is this what you call standalone JDK?","body":"I don&#39;t think I&#39;m using JetBrains Runtime, I&#39;m using <a href=\"https://i.imgur.com/bqpC8qP.png\" rel=\"nofollow noreferrer\">i.imgur.com/bqpC8qP.png</a> (I&#39;ve clicked on download jdk). Is this what you call standalone JDK?"},{"owner":{"account_id":36734,"reputation":392127,"user_id":104891,"display_name":"CrazyCoder"},"score":1,"creation_date":1646070313,"post_id":71298774,"comment_id":126028779,"body_markdown":"To use this JDK in Terminal you would need to add `c:\\Users\\&lt;user&gt;\\.jdks\\openjdk-17.0.2\\bin` to `PATH` and reboot. The actual path may be different depending on the JDK version/vendor you installed.","body":"To use this JDK in Terminal you would need to add <code>c:\\Users\\&lt;user&gt;\\.jdks\\openjdk-17.0.2\\bin</code> to <code>PATH</code> and reboot. The actual path may be different depending on the JDK version/vendor you installed."},{"owner":{"account_id":15375909,"reputation":643,"user_id":11092636,"display_name":"FluidMechanics Potential Flows"},"score":0,"creation_date":1646071648,"post_id":71298774,"comment_id":126029176,"body_markdown":"It worked!!!! I would&#39;ve never found it without your help, appreciate it!","body":"It worked!!!! I would&#39;ve never found it without your help, appreciate it!"},{"owner":{"account_id":15375909,"reputation":643,"user_id":11092636,"display_name":"FluidMechanics Potential Flows"},"score":0,"creation_date":1646071665,"post_id":71298774,"comment_id":126029183,"body_markdown":"So I basically don&#39;t really need a standalone JDK right?","body":"So I basically don&#39;t really need a standalone JDK right?"},{"owner":{"account_id":36734,"reputation":392127,"user_id":104891,"display_name":"CrazyCoder"},"score":0,"creation_date":1646071734,"post_id":71298774,"comment_id":126029212,"body_markdown":"If you are working in IntelliJ IDEA only and don&#39;t plan to use this JDK in the system terminal, these steps are optional.","body":"If you are working in IntelliJ IDEA only and don&#39;t plan to use this JDK in the system terminal, these steps are optional."}],"owner":{"account_id":15375909,"reputation":643,"user_id":11092636,"display_name":"FluidMechanics Potential Flows"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":371,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1646069070,"creation_date":1646069070,"question_id":71298774,"body_markdown":"I have installed Java directly in IntelliJ on my new laptop (Oracle openjdk-17) and it doesn&#39;t recognize javac. \r\n\r\nI&#39;ve seen this [post][2] but there is no `javac.exe` in `C:\\Program Files (x86)\\Common Files\\Oracle\\Java\\javapath`, only `java.exe`, `javaw.exe` and `javaws.exe`. There is a `javac.exe` in `C:\\Program Files\\JetBrains\\IntelliJ IDEA Community Edition 2021.3.2\\jbr\\bin` but it doesn&#39;t work when I add it to the Path. Should I install an additional version of jdk.17 outside of IntelliJ to make it work?\r\n\r\n\r\n  [2]: https://stackoverflow.com/questions/7709041/javac-is-not-recognized-as-an-internal-or-external-command-operable-program-or","title":"javac in terminal when java was installed with intellij","body":"<p>I have installed Java directly in IntelliJ on my new laptop (Oracle openjdk-17) and it doesn't recognize javac.</p>\n<p>I've seen this <a href=\"https://stackoverflow.com/questions/7709041/javac-is-not-recognized-as-an-internal-or-external-command-operable-program-or\">post</a> but there is no <code>javac.exe</code> in <code>C:\\Program Files (x86)\\Common Files\\Oracle\\Java\\javapath</code>, only <code>java.exe</code>, <code>javaw.exe</code> and <code>javaws.exe</code>. There is a <code>javac.exe</code> in <code>C:\\Program Files\\JetBrains\\IntelliJ IDEA Community Edition 2021.3.2\\jbr\\bin</code> but it doesn't work when I add it to the Path. Should I install an additional version of jdk.17 outside of IntelliJ to make it work?</p>\n"},{"tags":["java","matrix","multidimensional-array"],"comments":[{"owner":{"account_id":16726121,"reputation":455,"user_id":12089702,"display_name":"Stan van der Bend"},"score":0,"creation_date":1602203677,"post_id":64272121,"comment_id":113653812,"body_markdown":"Instead of ignoring the exception, make it print the stack trace, then share the full exception you are getting.","body":"Instead of ignoring the exception, make it print the stack trace, then share the full exception you are getting."},{"owner":{"account_id":10591094,"reputation":144,"user_id":7801638,"accept_rate":0,"display_name":"Co ti"},"score":0,"creation_date":1602203975,"post_id":64272121,"comment_id":113653860,"body_markdown":"@StanvanderBend tried cant figure anyway","body":"@StanvanderBend tried cant figure anyway"},{"owner":{"account_id":16726121,"reputation":455,"user_id":12089702,"display_name":"Stan van der Bend"},"score":1,"creation_date":1602204178,"post_id":64272121,"comment_id":113653892,"body_markdown":"? I am asking whether you can print the full stracktrace, replace\n    `}catch (ArrayIndexOutOfBoundsException ignore){\n        System.out.println(&quot;throw ArrayIndexOutOfBoundsException&quot;);\n    }`\nwith\n    `}catch (ArrayIndexOutOfBoundsException e){\n        e.printStackTrace();\n    }`\nand then edit your question to include the resulting error + stack trace, otherwise it&#39;s more difficult than need be for people to help you.","body":"? I am asking whether you can print the full stracktrace, replace     <code>}catch (ArrayIndexOutOfBoundsException ignore){         System.out.println(&quot;throw ArrayIndexOutOfBoundsException&quot;);     }</code> with     <code>}catch (ArrayIndexOutOfBoundsException e){         e.printStackTrace();     }</code> and then edit your question to include the resulting error + stack trace, otherwise it&#39;s more difficult than need be for people to help you."}],"answers":[{"tags":[],"owner":{"account_id":2485939,"reputation":19426,"user_id":2164365,"accept_rate":40,"display_name":"Abra"},"down_vote_count":3,"up_vote_count":1,"is_accepted":false,"score":-2,"last_activity_date":1602225825,"creation_date":1602225825,"answer_id":64275133,"question_id":64272121,"body_markdown":"`routeExists()` needs to be a recursive method, i.e. a method that calls itself. When you write a recursive method you first need to write the terminating condition, i.e. if the condition is true then the method does not call itself. If the condition is false then the method should call itself but with different values for the method parameters.\r\n\r\nIn any method in java, even regular, non-recursive methods, you should always make sure that the method parameters are valid. Hence you need to first check that `toRow` and `toColumn` are valid.\r\n\r\nYou should think of the method parameters `fromRow` and `fromColumn` as the indexes of the cell in `mapMatrix` that you are currently in, and not where you started the matrix traversal from. Of-course, in the first call to method `routeExists()`, the values of parameters `fromRow` and `fromColumn` are the indexes of the start of the route.\r\n\r\nThere are five terminating conditions for method `routeExists()`.\r\n\r\n1. If `mapMatrix[toRow][toColumn]` is false then a route does not exist, so the method must return false.\r\n2. If `fromRow` is not a valid index for `mapMatrix` then the method must return false. Using your example, if `fromRow` equals 3 then the method must return false.\r\n3. If `fromRow` is valid, then if `fromColumn` is not valid then the method must return false.\r\n4. If both `fromRow` and `fromColumn` are valid, then if `mapMatrix[fromRow][fromColumn]` is false, the method must return false.\r\n5. If `mapMatrix[toRow][toColumn]` is true then if `fromRow` equals `toRow` and `fromColumn` equals `toColumn`, that means you have reached the destination. In this case the method must return true.\r\n\r\nIf none of the above terminating conditions are met, then you need to progress to the next cell in `mapMatrix` and continue checking whether a route exists. In the code below, I arbitrarily decided to progress to the next row. If progressing to the next row does not find a route, I check the next column. Note that the order is not important. You can first move to the next column and after that move to the next row.\r\n\r\nHere is the code.\r\n```java\r\npublic class RoutePlanner {\r\n    public static boolean routeExists(int fromRow,\r\n                                      int fromColumn,\r\n                                      int toRow,\r\n                                      int toColumn,\r\n                                      boolean[][] mapMatrix) {\r\n        if (mapMatrix == null) {\r\n            return false;\r\n        }\r\n\r\n        // Check method parameters for destination.\r\n        if (toRow &gt;= mapMatrix.length) {\r\n            return false;\r\n        }\r\n        if (toColumn &gt;= mapMatrix[toRow].length) {\r\n            return false;\r\n        }\r\n\r\n        // Check that destination is reachable.\r\n        if (!mapMatrix[toRow][toColumn]) {\r\n            return false;\r\n        }\r\n\r\n        // Check remaining method parameters.\r\n        if (fromRow &gt;= mapMatrix.length) {\r\n            return false;\r\n        }\r\n        if (fromColumn &gt;= mapMatrix[fromRow].length) {\r\n            return false;\r\n        }\r\n\r\n        if (!mapMatrix[fromRow][fromColumn]) {\r\n            return false;\r\n        }\r\n        if (fromRow == toRow  &amp;&amp;  fromColumn == toColumn) {\r\n            return true;\r\n        }\r\n        boolean exists = routeExists(fromRow + 1, fromColumn, toRow, toColumn, mapMatrix);\r\n        if (!exists) {\r\n            exists = routeExists(fromRow, fromColumn + 1, toRow, toColumn, mapMatrix);\r\n        }\r\n        return exists;\r\n    }\r\n\r\n    public static void main(String[] args) {\r\n        boolean[][] mapMatrix = {{true, false, false},\r\n                                 {true, true, false},\r\n                                 {false, true, true}};\r\n\r\n        System.out.println(routeExists(0, 0, 2, 2, mapMatrix));\r\n    }\r\n}\r\n```\r\n","title":"Route planner two dimensional array","body":"<p><code>routeExists()</code> needs to be a recursive method, i.e. a method that calls itself. When you write a recursive method you first need to write the terminating condition, i.e. if the condition is true then the method does not call itself. If the condition is false then the method should call itself but with different values for the method parameters.</p>\n<p>In any method in java, even regular, non-recursive methods, you should always make sure that the method parameters are valid. Hence you need to first check that <code>toRow</code> and <code>toColumn</code> are valid.</p>\n<p>You should think of the method parameters <code>fromRow</code> and <code>fromColumn</code> as the indexes of the cell in <code>mapMatrix</code> that you are currently in, and not where you started the matrix traversal from. Of-course, in the first call to method <code>routeExists()</code>, the values of parameters <code>fromRow</code> and <code>fromColumn</code> are the indexes of the start of the route.</p>\n<p>There are five terminating conditions for method <code>routeExists()</code>.</p>\n<ol>\n<li>If <code>mapMatrix[toRow][toColumn]</code> is false then a route does not exist, so the method must return false.</li>\n<li>If <code>fromRow</code> is not a valid index for <code>mapMatrix</code> then the method must return false. Using your example, if <code>fromRow</code> equals 3 then the method must return false.</li>\n<li>If <code>fromRow</code> is valid, then if <code>fromColumn</code> is not valid then the method must return false.</li>\n<li>If both <code>fromRow</code> and <code>fromColumn</code> are valid, then if <code>mapMatrix[fromRow][fromColumn]</code> is false, the method must return false.</li>\n<li>If <code>mapMatrix[toRow][toColumn]</code> is true then if <code>fromRow</code> equals <code>toRow</code> and <code>fromColumn</code> equals <code>toColumn</code>, that means you have reached the destination. In this case the method must return true.</li>\n</ol>\n<p>If none of the above terminating conditions are met, then you need to progress to the next cell in <code>mapMatrix</code> and continue checking whether a route exists. In the code below, I arbitrarily decided to progress to the next row. If progressing to the next row does not find a route, I check the next column. Note that the order is not important. You can first move to the next column and after that move to the next row.</p>\n<p>Here is the code.</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class RoutePlanner {\n    public static boolean routeExists(int fromRow,\n                                      int fromColumn,\n                                      int toRow,\n                                      int toColumn,\n                                      boolean[][] mapMatrix) {\n        if (mapMatrix == null) {\n            return false;\n        }\n\n        // Check method parameters for destination.\n        if (toRow &gt;= mapMatrix.length) {\n            return false;\n        }\n        if (toColumn &gt;= mapMatrix[toRow].length) {\n            return false;\n        }\n\n        // Check that destination is reachable.\n        if (!mapMatrix[toRow][toColumn]) {\n            return false;\n        }\n\n        // Check remaining method parameters.\n        if (fromRow &gt;= mapMatrix.length) {\n            return false;\n        }\n        if (fromColumn &gt;= mapMatrix[fromRow].length) {\n            return false;\n        }\n\n        if (!mapMatrix[fromRow][fromColumn]) {\n            return false;\n        }\n        if (fromRow == toRow  &amp;&amp;  fromColumn == toColumn) {\n            return true;\n        }\n        boolean exists = routeExists(fromRow + 1, fromColumn, toRow, toColumn, mapMatrix);\n        if (!exists) {\n            exists = routeExists(fromRow, fromColumn + 1, toRow, toColumn, mapMatrix);\n        }\n        return exists;\n    }\n\n    public static void main(String[] args) {\n        boolean[][] mapMatrix = {{true, false, false},\n                                 {true, true, false},\n                                 {false, true, true}};\n\n        System.out.println(routeExists(0, 0, 2, 2, mapMatrix));\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":9346445,"reputation":530,"user_id":6937598,"accept_rate":60,"display_name":"G.M"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1605541452,"creation_date":1605541452,"answer_id":64861085,"question_id":64272121,"body_markdown":"Here is my answer which passes all four tests:\r\n\r\n    import java.util.*;\r\n\r\n    public class RoutePlanner {\r\n\t\r\n    static HashMap&lt;String, ArrayList&lt;String&gt;&gt; graph;\r\n    \r\n    public static boolean routeExists(int fromRow, int fromColumn, int toRow, int toColumn, boolean[][] mapMatrix) {\r\n    \tif(fromRow &lt; 0 || fromColumn &lt; 0 || toRow &lt; 0 || toColumn &lt; 0) {\r\n    \t\treturn false;\r\n    \t}\r\n    \tif(fromRow &gt;= mapMatrix.length || fromColumn &gt;= mapMatrix[0].length || toRow &gt;= mapMatrix.length || toColumn &gt;= mapMatrix[0].length) {\r\n    \t\treturn false; \r\n    \t}\r\n    \tif(!mapMatrix[fromRow][fromColumn] || !mapMatrix[toRow][toColumn]) {\r\n    \t\treturn false;\r\n    \t}\r\n    \t\r\n    \tif(fromRow == toRow &amp;&amp; fromColumn == toColumn) {\r\n    \t\treturn true;\r\n    \t}\r\n    \t\r\n    \tconstructGraph(mapMatrix);\r\n    \treturn bfs(fromRow + &quot;-&quot; + fromColumn, toRow + &quot;-&quot; + toColumn);\r\n    }\r\n    \r\n    \r\n    public static void constructGraph(boolean[][] mapMatrix) {\r\n    \tgraph = new HashMap&lt;String, ArrayList&lt;String&gt;&gt;();\r\n    \t\r\n    \tfor(int i = 0; i &lt; mapMatrix.length; i++) {\r\n    \t\tfor(int j = 0; j &lt; mapMatrix[i].length; j++) {\r\n    \t\t\tif(!mapMatrix[i][j]) {\r\n    \t\t\t\tcontinue;\r\n    \t\t\t}\r\n    \t\t\tString currId = i + &quot;-&quot; + j;\r\n    \t\t\tif(i-1 &gt;= 0) {\r\n    \t\t\t\tif(mapMatrix[i-1][j]) {\r\n    \t\t\t\t\taddEdge(currId, (i-1) + &quot;-&quot; + j);\r\n    \t\t\t\t}\r\n    \t\t\t}\r\n    \t\t\tif(i+1 &lt; mapMatrix.length) {\r\n    \t\t\t\tif(mapMatrix[i+1][j]) {\r\n    \t\t\t\t\taddEdge(currId, (i+1) + &quot;-&quot; + j);\r\n    \t\t\t\t}\r\n    \t\t\t}\r\n    \t\t\tif(j-1 &gt;= 0) {\r\n    \t\t\t\tif(mapMatrix[i][j-1]) {\r\n    \t\t\t\t\taddEdge(currId, i + &quot;-&quot; + (j-1));\r\n    \t\t\t\t}\r\n    \t\t\t}\r\n    \t\t\tif(j+1 &lt; mapMatrix[i].length) {\r\n    \t\t\t\tif(mapMatrix[i][j+1]) {\r\n    \t\t\t\t\taddEdge(currId, i + &quot;-&quot; + (j+1));\r\n    \t\t\t\t}\r\n    \t\t\t}\r\n    \t\t}\r\n    \t}\r\n    }\r\n    \r\n    public static void addEdge(String from, String to) {\r\n    \tif(graph.containsKey(from)) {\r\n    \t\tgraph.get(from).add(to);\r\n    \t} else {\r\n    \t\tArrayList&lt;String&gt; neighbour = new ArrayList&lt;String&gt;();\r\n    \t\tneighbour.add(to);\r\n    \t\tgraph.put(from, neighbour);\r\n    \t}\r\n    }\r\n    \r\n    public static boolean bfs(String start, String end) {\r\n    \tLinkedList&lt;String&gt; queue = new LinkedList&lt;String&gt;();\t\t// FIFO queue for BFS\r\n    \tHashSet&lt;String&gt; visited = new HashSet&lt;String&gt;();\r\n    \t\r\n    \tqueue.add(start);\r\n    \tvisited.add(start);\r\n    \t\r\n    \tString curr;\r\n    \twhile(!queue.isEmpty()) {\r\n    \t\tcurr = queue.poll();\r\n    \t\t\r\n    \t\tif(curr.equals(end)) {\r\n    \t\t\treturn true;\r\n    \t\t}\r\n    \t\t\r\n    \t\tif(!graph.containsKey(curr)) {\r\n    \t\t\treturn false;\r\n    \t\t}\r\n    \t\t\r\n    \t\tfor(String next : graph.get(curr)) {\r\n    \t\t\tif(!visited.contains(next)) {\r\n    \t\t\t\tvisited.add(next);\r\n    \t\t\t\tqueue.add(next);\r\n    \t\t\t}\r\n    \t\t}\r\n    \t}\r\n    \t\r\n    \treturn false;\r\n    }\r\n    \r\n        \r\n    public static void main(String[] args) {\r\n        boolean[][] mapMatrix = {\r\n            {true,  false, false},\r\n            {true,  true,  false},\r\n            {false, true,  true}\r\n        };\r\n        System.out.println(routeExists(0, 0, 2, 2, mapMatrix));\r\n        \r\n    }\r\n    }\r\n\r\n\r\nI am first constructing a graph by connecting two matrix entries if they are adjacent and both are `true`. \r\n\r\nThen, I am doing a simple Breadth-First Search through the graph, starting from the point `(fromRow, fromColumn)` and returning `true` once we reach the point `(toRow, toColumn)`, or returning `false` otherwise.\r\n\r\nNote: I am using a String `i + &quot;-&quot; + j` to give each point in the matrix a unique id. ","title":"Route planner two dimensional array","body":"<p>Here is my answer which passes all four tests:</p>\n<pre><code>import java.util.*;\n\npublic class RoutePlanner {\n\nstatic HashMap&lt;String, ArrayList&lt;String&gt;&gt; graph;\n\npublic static boolean routeExists(int fromRow, int fromColumn, int toRow, int toColumn, boolean[][] mapMatrix) {\n    if(fromRow &lt; 0 || fromColumn &lt; 0 || toRow &lt; 0 || toColumn &lt; 0) {\n        return false;\n    }\n    if(fromRow &gt;= mapMatrix.length || fromColumn &gt;= mapMatrix[0].length || toRow &gt;= mapMatrix.length || toColumn &gt;= mapMatrix[0].length) {\n        return false; \n    }\n    if(!mapMatrix[fromRow][fromColumn] || !mapMatrix[toRow][toColumn]) {\n        return false;\n    }\n    \n    if(fromRow == toRow &amp;&amp; fromColumn == toColumn) {\n        return true;\n    }\n    \n    constructGraph(mapMatrix);\n    return bfs(fromRow + &quot;-&quot; + fromColumn, toRow + &quot;-&quot; + toColumn);\n}\n\n\npublic static void constructGraph(boolean[][] mapMatrix) {\n    graph = new HashMap&lt;String, ArrayList&lt;String&gt;&gt;();\n    \n    for(int i = 0; i &lt; mapMatrix.length; i++) {\n        for(int j = 0; j &lt; mapMatrix[i].length; j++) {\n            if(!mapMatrix[i][j]) {\n                continue;\n            }\n            String currId = i + &quot;-&quot; + j;\n            if(i-1 &gt;= 0) {\n                if(mapMatrix[i-1][j]) {\n                    addEdge(currId, (i-1) + &quot;-&quot; + j);\n                }\n            }\n            if(i+1 &lt; mapMatrix.length) {\n                if(mapMatrix[i+1][j]) {\n                    addEdge(currId, (i+1) + &quot;-&quot; + j);\n                }\n            }\n            if(j-1 &gt;= 0) {\n                if(mapMatrix[i][j-1]) {\n                    addEdge(currId, i + &quot;-&quot; + (j-1));\n                }\n            }\n            if(j+1 &lt; mapMatrix[i].length) {\n                if(mapMatrix[i][j+1]) {\n                    addEdge(currId, i + &quot;-&quot; + (j+1));\n                }\n            }\n        }\n    }\n}\n\npublic static void addEdge(String from, String to) {\n    if(graph.containsKey(from)) {\n        graph.get(from).add(to);\n    } else {\n        ArrayList&lt;String&gt; neighbour = new ArrayList&lt;String&gt;();\n        neighbour.add(to);\n        graph.put(from, neighbour);\n    }\n}\n\npublic static boolean bfs(String start, String end) {\n    LinkedList&lt;String&gt; queue = new LinkedList&lt;String&gt;();        // FIFO queue for BFS\n    HashSet&lt;String&gt; visited = new HashSet&lt;String&gt;();\n    \n    queue.add(start);\n    visited.add(start);\n    \n    String curr;\n    while(!queue.isEmpty()) {\n        curr = queue.poll();\n        \n        if(curr.equals(end)) {\n            return true;\n        }\n        \n        if(!graph.containsKey(curr)) {\n            return false;\n        }\n        \n        for(String next : graph.get(curr)) {\n            if(!visited.contains(next)) {\n                visited.add(next);\n                queue.add(next);\n            }\n        }\n    }\n    \n    return false;\n}\n\n    \npublic static void main(String[] args) {\n    boolean[][] mapMatrix = {\n        {true,  false, false},\n        {true,  true,  false},\n        {false, true,  true}\n    };\n    System.out.println(routeExists(0, 0, 2, 2, mapMatrix));\n    \n}\n}\n</code></pre>\n<p>I am first constructing a graph by connecting two matrix entries if they are adjacent and both are <code>true</code>.</p>\n<p>Then, I am doing a simple Breadth-First Search through the graph, starting from the point <code>(fromRow, fromColumn)</code> and returning <code>true</code> once we reach the point <code>(toRow, toColumn)</code>, or returning <code>false</code> otherwise.</p>\n<p>Note: I am using a String <code>i + &quot;-&quot; + j</code> to give each point in the matrix a unique id.</p>\n"},{"tags":[],"owner":{"account_id":12305665,"reputation":756,"user_id":8978791,"display_name":"Eli Zatlawy"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1627502039,"creation_date":1627502039,"answer_id":68566625,"question_id":64272121,"body_markdown":"My recursive solution to this question using `visited` helper matrix to prevent endless recursion of the same steps over and over: \r\n\r\n    import java.util.*;\r\n    \r\n    public class RoutePlanner {\r\n    \r\n    \r\n        public static boolean validMove(boolean[][] mapMatrix,boolean[][] visited, int row, int column) {\r\n            if (row &gt;= 0 &amp;&amp; column &gt;= 0 &amp;&amp; row &lt; mapMatrix.length &amp;&amp; column &lt; mapMatrix[row].length ) {\r\n                if (mapMatrix[row][column] &amp;&amp; !visited[row][column]) // check if move is valid &amp; not visited yet\r\n                    return true;\r\n            }\r\n            return false;\r\n        }\r\n    \r\n        public static boolean routeExists(int fromRow, int fromColumn, int toRow, int toColumn,\r\n                                          boolean[][] mapMatrix) {\r\n            boolean[][] visited = new boolean[mapMatrix.length][mapMatrix[0].length];\r\n            return routeExistsHelper(fromRow,fromColumn,toRow,toColumn,mapMatrix,visited);\r\n        }\r\n    \r\n        public static boolean routeExistsHelper(int fromRow, int fromColumn, int toRow, int toColumn, boolean[][] mapMatrix, boolean[][] visited) {\r\n            visited[fromRow][fromColumn] = true;\r\n            if (fromRow == toRow &amp;&amp; fromColumn == toColumn)\r\n                return true;\r\n            else {\r\n                boolean left = false, right = false, up = false, down = false;\r\n                if (validMove(mapMatrix,visited, fromRow + 1, fromColumn)) {\r\n                    right = routeExistsHelper(fromRow + 1, fromColumn, toRow, toColumn, mapMatrix,visited);\r\n                }\r\n                if (validMove(mapMatrix,visited, fromRow - 1, fromColumn)) {\r\n                    left = routeExistsHelper(fromRow - 1, fromColumn, toRow, toColumn, mapMatrix,visited);\r\n                }\r\n                if (validMove(mapMatrix,visited, fromRow, fromColumn + 1)) {\r\n                    up = routeExistsHelper(fromRow, fromColumn + 1, toRow, toColumn, mapMatrix,visited);\r\n                }\r\n                if (validMove(mapMatrix,visited, fromRow, fromColumn - 1)) {\r\n                    down = routeExistsHelper(fromRow, fromColumn - 1, toRow, toColumn, mapMatrix,visited);\r\n                }\r\n                return left || right || up || down;\r\n            }\r\n    \r\n        }\r\n    \r\n    \r\n        public static void main(String[] args) {\r\n            boolean[][] mapMatrix = {\r\n                    {true, false, false},\r\n                    {true, true, false},\r\n                    {false, true, true}\r\n            };\r\n            System.out.println(routeExists(0, 0, 2, 2, mapMatrix));\r\n            System.out.println(routeExists(2, 2, 0, 0, mapMatrix));\r\n            System.out.println(routeExists(1, 1, 0, 0, mapMatrix));\r\n            System.out.println(routeExists(1, 1, 0, 1, mapMatrix));\r\n        }\r\n    }","title":"Route planner two dimensional array","body":"<p>My recursive solution to this question using <code>visited</code> helper matrix to prevent endless recursion of the same steps over and over:</p>\n<pre><code>import java.util.*;\n\npublic class RoutePlanner {\n\n\n    public static boolean validMove(boolean[][] mapMatrix,boolean[][] visited, int row, int column) {\n        if (row &gt;= 0 &amp;&amp; column &gt;= 0 &amp;&amp; row &lt; mapMatrix.length &amp;&amp; column &lt; mapMatrix[row].length ) {\n            if (mapMatrix[row][column] &amp;&amp; !visited[row][column]) // check if move is valid &amp; not visited yet\n                return true;\n        }\n        return false;\n    }\n\n    public static boolean routeExists(int fromRow, int fromColumn, int toRow, int toColumn,\n                                      boolean[][] mapMatrix) {\n        boolean[][] visited = new boolean[mapMatrix.length][mapMatrix[0].length];\n        return routeExistsHelper(fromRow,fromColumn,toRow,toColumn,mapMatrix,visited);\n    }\n\n    public static boolean routeExistsHelper(int fromRow, int fromColumn, int toRow, int toColumn, boolean[][] mapMatrix, boolean[][] visited) {\n        visited[fromRow][fromColumn] = true;\n        if (fromRow == toRow &amp;&amp; fromColumn == toColumn)\n            return true;\n        else {\n            boolean left = false, right = false, up = false, down = false;\n            if (validMove(mapMatrix,visited, fromRow + 1, fromColumn)) {\n                right = routeExistsHelper(fromRow + 1, fromColumn, toRow, toColumn, mapMatrix,visited);\n            }\n            if (validMove(mapMatrix,visited, fromRow - 1, fromColumn)) {\n                left = routeExistsHelper(fromRow - 1, fromColumn, toRow, toColumn, mapMatrix,visited);\n            }\n            if (validMove(mapMatrix,visited, fromRow, fromColumn + 1)) {\n                up = routeExistsHelper(fromRow, fromColumn + 1, toRow, toColumn, mapMatrix,visited);\n            }\n            if (validMove(mapMatrix,visited, fromRow, fromColumn - 1)) {\n                down = routeExistsHelper(fromRow, fromColumn - 1, toRow, toColumn, mapMatrix,visited);\n            }\n            return left || right || up || down;\n        }\n\n    }\n\n\n    public static void main(String[] args) {\n        boolean[][] mapMatrix = {\n                {true, false, false},\n                {true, true, false},\n                {false, true, true}\n        };\n        System.out.println(routeExists(0, 0, 2, 2, mapMatrix));\n        System.out.println(routeExists(2, 2, 0, 0, mapMatrix));\n        System.out.println(routeExists(1, 1, 0, 0, mapMatrix));\n        System.out.println(routeExists(1, 1, 0, 1, mapMatrix));\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":309090,"reputation":158,"user_id":621359,"accept_rate":50,"display_name":"Vikas Kumar"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1646068680,"creation_date":1646068680,"answer_id":71298702,"question_id":64272121,"body_markdown":"Simple solution to pass all 4 test cases:\r\n\r\n    import java.util.*;\r\n    \r\n    public class RoutePlanner {\r\n        \r\n        public static boolean routeExists(int fromRow, int fromColumn, int toRow, int toColumn,\r\n                                          boolean[][] mapMatrix) {\r\n            boolean[][] mapVisited = new boolean[mapMatrix.length][mapMatrix[0].length];\r\n            \r\n            return routeSearch(fromRow, fromColumn, toRow, toColumn,mapMatrix, mapVisited);\r\n            \r\n        }\r\n    \r\n        public static boolean routeSearch(int fromRow, int fromColumn, int toRow, int toColumn,\r\n                                          boolean[][] mapMatrix, boolean[][] mapVisited) {\r\n            \r\n          \r\n            if(fromRow &lt; 0 || fromColumn &lt; 0 || fromRow &gt;= mapMatrix.length || fromColumn &gt;= mapMatrix[0].length)\r\n                return false;\r\n            \r\n                   \r\n            if(mapVisited[fromRow][fromColumn] || !mapMatrix[fromRow][fromColumn]\r\n               || !mapMatrix[toRow][toColumn])\r\n                return false;\r\n            \r\n            if(fromRow == toRow &amp;&amp; fromColumn == toColumn)\r\n                return true;\r\n            \r\n            mapVisited[fromRow][fromColumn] = true;\r\n            \r\n            return routeSearch(fromRow-1, fromColumn, toRow, toColumn, mapMatrix, mapVisited)\r\n                || routeSearch(fromRow, fromColumn-1, toRow, toColumn, mapMatrix, mapVisited)\r\n                || routeSearch(fromRow+1, fromColumn, toRow, toColumn, mapMatrix, mapVisited)            \r\n                ||routeSearch(fromRow, fromColumn+1, toRow, toColumn, mapMatrix, mapVisited);\r\n        }\r\n            \r\n        public static void main(String[] args) {\r\n             boolean[][] mapMatrix = {\r\n                    {true, false, false},\r\n                    {true, true, false},\r\n                    {false, true, true}\r\n            };\r\n            System.out.println(routeExists(0, 0, 2, 2, mapMatrix));        \r\n        }\r\n    }","title":"Route planner two dimensional array","body":"<p>Simple solution to pass all 4 test cases:</p>\n<pre><code>import java.util.*;\n\npublic class RoutePlanner {\n    \n    public static boolean routeExists(int fromRow, int fromColumn, int toRow, int toColumn,\n                                      boolean[][] mapMatrix) {\n        boolean[][] mapVisited = new boolean[mapMatrix.length][mapMatrix[0].length];\n        \n        return routeSearch(fromRow, fromColumn, toRow, toColumn,mapMatrix, mapVisited);\n        \n    }\n\n    public static boolean routeSearch(int fromRow, int fromColumn, int toRow, int toColumn,\n                                      boolean[][] mapMatrix, boolean[][] mapVisited) {\n        \n      \n        if(fromRow &lt; 0 || fromColumn &lt; 0 || fromRow &gt;= mapMatrix.length || fromColumn &gt;= mapMatrix[0].length)\n            return false;\n        \n               \n        if(mapVisited[fromRow][fromColumn] || !mapMatrix[fromRow][fromColumn]\n           || !mapMatrix[toRow][toColumn])\n            return false;\n        \n        if(fromRow == toRow &amp;&amp; fromColumn == toColumn)\n            return true;\n        \n        mapVisited[fromRow][fromColumn] = true;\n        \n        return routeSearch(fromRow-1, fromColumn, toRow, toColumn, mapMatrix, mapVisited)\n            || routeSearch(fromRow, fromColumn-1, toRow, toColumn, mapMatrix, mapVisited)\n            || routeSearch(fromRow+1, fromColumn, toRow, toColumn, mapMatrix, mapVisited)            \n            ||routeSearch(fromRow, fromColumn+1, toRow, toColumn, mapMatrix, mapVisited);\n    }\n        \n    public static void main(String[] args) {\n         boolean[][] mapMatrix = {\n                {true, false, false},\n                {true, true, false},\n                {false, true, true}\n        };\n        System.out.println(routeExists(0, 0, 2, 2, mapMatrix));        \n    }\n}\n</code></pre>\n"}],"owner":{"account_id":10591094,"reputation":144,"user_id":7801638,"accept_rate":0,"display_name":"Co ti"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3186,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":64861085,"answer_count":4,"score":1,"last_activity_date":1646068680,"creation_date":1602201029,"question_id":64272121,"body_markdown":"I&#39;m doing Java tasks from this website https://www.testdome.com/questions/java/route-planner/41102\r\nand got stuck on `ArrayIndexOutOfBoundsException` error. When you debug code I&#39;ll get to finish, but right after that you will get array index is out of bounds. If you open website you will see full task with picture for better understanding. What am I doing wrong?\r\n```java\r\npublic static boolean routeExists(int fromRow, int fromColumn, int toRow,\r\n                                  int toColumn, boolean[][] mapMatrix) {\r\n    if (fromRow == mapMatrix.length - 1 &amp;&amp; fromColumn == mapMatrix.length - 1) {\r\n        return true;\r\n    }\r\n\r\n    goRight(fromRow, fromColumn, mapMatrix);\r\n    goDown(fromRow, fromColumn, mapMatrix);\r\n\r\n    return false;\r\n}\r\n\r\nprivate static void goRight(int one, int two, boolean[][] matrix) {\r\n    try {\r\n        if (matrix[one][two + 1]) {\r\n            routeExists(one, two + 1, matrix.length - 1,\r\n                    matrix.length - 1, matrix);\r\n        }\r\n    } catch (ArrayIndexOutOfBoundsException ignore) {\r\n        System.out.println(&quot;throw ArrayIndexOutOfBoundsException&quot;);\r\n    }\r\n}\r\n\r\nprivate static void goDown(int one, int two, boolean[][] matrix) {\r\n    try {\r\n        if (matrix[one + 1][two]) {\r\n            routeExists(one + 1, two, matrix.length - 1,\r\n                    matrix.length - 1, matrix);\r\n        }\r\n    } catch (ArrayIndexOutOfBoundsException ignore) {\r\n        System.out.println(&quot;throw ArrayIndexOutOfBoundsException&quot;);\r\n    }\r\n}\r\n```\r\n","title":"Route planner two dimensional array","body":"<p>I'm doing Java tasks from this website <a href=\"https://www.testdome.com/questions/java/route-planner/41102\" rel=\"nofollow noreferrer\">https://www.testdome.com/questions/java/route-planner/41102</a>\nand got stuck on <code>ArrayIndexOutOfBoundsException</code> error. When you debug code I'll get to finish, but right after that you will get array index is out of bounds. If you open website you will see full task with picture for better understanding. What am I doing wrong?</p>\n<pre class=\"lang-java prettyprint-override\"><code>public static boolean routeExists(int fromRow, int fromColumn, int toRow,\n                                  int toColumn, boolean[][] mapMatrix) {\n    if (fromRow == mapMatrix.length - 1 &amp;&amp; fromColumn == mapMatrix.length - 1) {\n        return true;\n    }\n\n    goRight(fromRow, fromColumn, mapMatrix);\n    goDown(fromRow, fromColumn, mapMatrix);\n\n    return false;\n}\n\nprivate static void goRight(int one, int two, boolean[][] matrix) {\n    try {\n        if (matrix[one][two + 1]) {\n            routeExists(one, two + 1, matrix.length - 1,\n                    matrix.length - 1, matrix);\n        }\n    } catch (ArrayIndexOutOfBoundsException ignore) {\n        System.out.println(&quot;throw ArrayIndexOutOfBoundsException&quot;);\n    }\n}\n\nprivate static void goDown(int one, int two, boolean[][] matrix) {\n    try {\n        if (matrix[one + 1][two]) {\n            routeExists(one + 1, two, matrix.length - 1,\n                    matrix.length - 1, matrix);\n        }\n    } catch (ArrayIndexOutOfBoundsException ignore) {\n        System.out.println(&quot;throw ArrayIndexOutOfBoundsException&quot;);\n    }\n}\n</code></pre>\n"},{"tags":["java","android","searchview"],"comments":[{"owner":{"account_id":142732,"reputation":10255,"user_id":1747491,"accept_rate":62,"display_name":"theblang"},"score":1,"creation_date":1404332038,"post_id":15992882,"comment_id":38002612,"body_markdown":"Rather than edit your original question, you can answer your own question.","body":"Rather than edit your original question, you can answer your own question."}],"answers":[{"tags":[],"owner":{"account_id":5078620,"reputation":188,"user_id":4075373,"display_name":"Medhi Redjem"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1411574674,"creation_date":1411573713,"answer_id":26021251,"question_id":15992882,"body_markdown":"Perhaps it&#39;s not suited for your app but you also have the option to use a simple `EditText`, then add a `TextWatcher` listener. This way you catch every input even if the user enters an empty string.","title":"Android SearchView empty string","body":"<p>Perhaps it's not suited for your app but you also have the option to use a simple <code>EditText</code>, then add a <code>TextWatcher</code> listener. This way you catch every input even if the user enters an empty string.</p>\n"},{"tags":[],"owner":{"account_id":6793630,"reputation":91,"user_id":5229794,"display_name":"Jan Hofman"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1439630151,"creation_date":1439629680,"answer_id":32023266,"question_id":15992882,"body_markdown":"I had same issue with SearchView but I did not want to use ActionBarSherlock so I came up with solution which consists of styling your own SearchView as shown in guide http://novoda.com/blog/styling-the-actionbar-searchview/ and setting OnEditorActionListener for EditText( https://stackoverflow.com/questions/4209404/how-do-i-trigger-an-action-when-the-user-has-hit-enter) which is part of the SearchView.\r\n\r\n    final SearchView searchView = (SearchView)findViewById(R.id.search);\r\n    int searchPlateId = searchView.getContext().getResources().getIdentifier(&quot;android:id/search_src_text&quot;, null, null);\r\n    EditText searchPlate = (EditText) searchView.findViewById(searchPlateId);\r\n    searchPlate.setOnEditorActionListener(new TextView.OnEditorActionListener() {\r\n        @Override\r\n        public boolean onEditorAction(TextView v, int actionId, KeyEvent event) {\r\n\r\n            if (actionId == EditorInfo.IME_ACTION_SEARCH) {\r\n                //Do something\r\n            }\r\n            return false;\r\n\r\n        });\r\n        ","title":"Android SearchView empty string","body":"<p>I had same issue with SearchView but I did not want to use ActionBarSherlock so I came up with solution which consists of styling your own SearchView as shown in guide <a href=\"http://novoda.com/blog/styling-the-actionbar-searchview/\" rel=\"nofollow noreferrer\">http://novoda.com/blog/styling-the-actionbar-searchview/</a> and setting OnEditorActionListener for EditText( <a href=\"https://stackoverflow.com/questions/4209404/how-do-i-trigger-an-action-when-the-user-has-hit-enter\">How do I trigger an action when the user has hit enter?</a>) which is part of the SearchView.</p>\n\n<pre><code>final SearchView searchView = (SearchView)findViewById(R.id.search);\nint searchPlateId = searchView.getContext().getResources().getIdentifier(\"android:id/search_src_text\", null, null);\nEditText searchPlate = (EditText) searchView.findViewById(searchPlateId);\nsearchPlate.setOnEditorActionListener(new TextView.OnEditorActionListener() {\n    @Override\n    public boolean onEditorAction(TextView v, int actionId, KeyEvent event) {\n\n        if (actionId == EditorInfo.IME_ACTION_SEARCH) {\n            //Do something\n        }\n        return false;\n\n    });\n</code></pre>\n"}],"owner":{"account_id":1973447,"reputation":311,"user_id":1771799,"accept_rate":0,"display_name":"M3rd0n"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":7526,"favorite_count":0,"down_vote_count":0,"up_vote_count":8,"answer_count":2,"score":8,"last_activity_date":1646067995,"creation_date":1365886924,"question_id":15992882,"body_markdown":"I&#39;m trying to use a SearchView and I got everything to work, except when I want to search an empty string.  \r\nThe onQueryTextChange does react when I remove the last character, but I want the user to be able to press the search button when the searchfield is empty.\r\n\r\n     final SearchView.OnQueryTextListener queryTextListener = new SearchView.OnQueryTextListener() {\r\n\t\t\t\t\t@Override\r\n\t\t\t\t\tpublic boolean onQueryTextChange(String newText) {\r\n\t\t\t\t\t\t// Do something\r\n\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t@Override\r\n\t\t\t\t\tpublic boolean onQueryTextSubmit(String query) {\r\n\t                    // Do something\r\n\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t}\r\n\t\t\t\t};\r\n\r\n\t\t\tsearchView.setOnQueryTextListener(queryTextListener);\r\n\r\nI&#39;ve also tried using a OnKeyListner. but it does not seem to work either.\r\n\r\n    \t\t\tsearchView.setOnKeyListener(new OnKeyListener() {\r\n\t\t\t\t@Override\r\n\t\t\t\tpublic boolean onKey(View arg0, int arg1, KeyEvent arg2) {\r\n\r\n\t\t\t\t\t//Do something\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t}\r\n\t\t\t}); \r\n\r\n\r\nThis seems such a simple thing to do, but I can&#39;t get it to work. Any suggestions?\r\n\r\n**Edit**\r\n\r\nI have looked for a solution for a while now and just some minutes after posting this, I found a solution.  \r\nOn this thread I found out this was not a bug, but it actually was deliberate.\r\n\r\n[https://stackoverflow.com/questions/13576283/android-searchview-onquerytextlistener-onquerytextsubmit-not-fired-on-empty-quer][1]\r\n\r\nSo I just downloaded [ActionBarSherlock][2] and made some modification to the method onSubmitQuery()\r\n\r\nFrom\r\n\r\n    private void onSubmitQuery() {\r\n        CharSequence query = mQueryTextView.getText();\r\n        if (query != null &amp;&amp; TextUtils.getTrimmedLength(query) &gt; 0) {\r\n            if (mOnQueryChangeListener == null\r\n                    || !mOnQueryChangeListener.onQueryTextSubmit(query.toString())) {\r\n                if (mSearchable != null) {\r\n                    launchQuerySearch(KeyEvent.KEYCODE_UNKNOWN, null, query.toString());\r\n                    setImeVisibility(false);\r\n                }\r\n                dismissSuggestions();\r\n            }\r\n        }\r\n    }\r\n\r\nAnd the modified version\r\n\r\n    private void onSubmitQuery() {\r\n        CharSequence query = mQueryTextView.getText();\r\n        if(query == null) {query = &quot;&quot;;}\r\n        if (mOnQueryChangeListener == null\r\n                    || !mOnQueryChangeListener.onQueryTextSubmit(query.toString())) {\r\n            if (mSearchable != null) {\r\n                    launchQuerySearch(KeyEvent.KEYCODE_UNKNOWN, null, query.toString());\r\n                    setImeVisibility(false);\r\n             }\r\n             dismissSuggestions();\r\n        }\r\n    }\r\n\r\nHope this helps if anyone else is having this problem.\r\n\r\n  [1]: https://stackoverflow.com/questions/13576283/android-searchview-onquerytextlistener-onquerytextsubmit-not-fired-on-empty-quer\r\n  [2]: http://actionbarsherlock.com/\r\n","title":"Android SearchView empty string","body":"<p>I'm trying to use a SearchView and I got everything to work, except when I want to search an empty string.<br>\nThe onQueryTextChange does react when I remove the last character, but I want the user to be able to press the search button when the searchfield is empty.</p>\n\n<pre><code> final SearchView.OnQueryTextListener queryTextListener = new SearchView.OnQueryTextListener() {\n                @Override\n                public boolean onQueryTextChange(String newText) {\n                    // Do something\n                    return true;\n                }\n\n                @Override\n                public boolean onQueryTextSubmit(String query) {\n                    // Do something\n                    return true;\n                }\n            };\n\n        searchView.setOnQueryTextListener(queryTextListener);\n</code></pre>\n\n<p>I've also tried using a OnKeyListner. but it does not seem to work either.</p>\n\n<pre><code>            searchView.setOnKeyListener(new OnKeyListener() {\n            @Override\n            public boolean onKey(View arg0, int arg1, KeyEvent arg2) {\n\n                //Do something\n                return true;\n            }\n        }); \n</code></pre>\n\n<p>This seems such a simple thing to do, but I can't get it to work. Any suggestions?</p>\n\n<p><strong>Edit</strong></p>\n\n<p>I have looked for a solution for a while now and just some minutes after posting this, I found a solution.<br>\nOn this thread I found out this was not a bug, but it actually was deliberate.</p>\n\n<p><a href=\"https://stackoverflow.com/questions/13576283/android-searchview-onquerytextlistener-onquerytextsubmit-not-fired-on-empty-quer\">Android SearchView.OnQueryTextListener OnQueryTextSubmit not fired on empty query string</a></p>\n\n<p>So I just downloaded <a href=\"http://actionbarsherlock.com/\" rel=\"nofollow noreferrer\">ActionBarSherlock</a> and made some modification to the method onSubmitQuery()</p>\n\n<p>From</p>\n\n<pre><code>private void onSubmitQuery() {\n    CharSequence query = mQueryTextView.getText();\n    if (query != null &amp;&amp; TextUtils.getTrimmedLength(query) &gt; 0) {\n        if (mOnQueryChangeListener == null\n                || !mOnQueryChangeListener.onQueryTextSubmit(query.toString())) {\n            if (mSearchable != null) {\n                launchQuerySearch(KeyEvent.KEYCODE_UNKNOWN, null, query.toString());\n                setImeVisibility(false);\n            }\n            dismissSuggestions();\n        }\n    }\n}\n</code></pre>\n\n<p>And the modified version</p>\n\n<pre><code>private void onSubmitQuery() {\n    CharSequence query = mQueryTextView.getText();\n    if(query == null) {query = \"\";}\n    if (mOnQueryChangeListener == null\n                || !mOnQueryChangeListener.onQueryTextSubmit(query.toString())) {\n        if (mSearchable != null) {\n                launchQuerySearch(KeyEvent.KEYCODE_UNKNOWN, null, query.toString());\n                setImeVisibility(false);\n         }\n         dismissSuggestions();\n    }\n}\n</code></pre>\n\n<p>Hope this helps if anyone else is having this problem.</p>\n"},{"tags":["java","microsoft-graph-api"],"owner":{"account_id":24407982,"reputation":11,"user_id":18335885,"display_name":"Zail"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":305,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1646067173,"creation_date":1646067173,"question_id":71298399,"body_markdown":"I&#39;m trying to update metadata in my drive item.\r\nIf I create column directly in my Document Library (1 line, Multi lines etc) it&#39;s ok but when my columns are linked with term store (managed metadata) i have this error : \r\n\r\n    GRAVE: Throwable detail: com.microsoft.graph.http.GraphServiceException: Error code: itemNotFound\r\n    Error message: The resource could not be found.\r\n    \r\n    GET https://graph.microsoft.com/v1.0/me/drives/[mydrive]/items/017QC4KJLG35SQJ5NC6VALGDTRG7LFJ6IM\r\n    SdkVersion : graph-java/v5.5.0\r\n    \r\n    404 : Not Found\r\n    [...]\r\n\r\nAnd here is my code : \r\n\r\n    FieldValueSetRequest updateRequest = client.sites(siteId).lists(listId).items(listItemId).fields().buildRequest();\r\n    logger.debug(updateRequest);\r\n    FieldValueSet fieldValueSet =  new FieldValueSet();\r\n    for(Map.Entry&lt;String, String&gt; element: elements.entrySet()) {\r\n    \tString key = element.getKey();\r\n    \tString value = element.getValue();\r\n    \tlogger.debug(key+ &quot;=&quot; + value);\r\n    \tfieldValueSet.additionalDataManager().put(key, new JsonPrimitive(value));\r\n    }\r\n    updateRequest.patch(fieldValueSet);\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/MHNvz.png","title":"MS Graph API metadata field with term store","body":"<p>I'm trying to update metadata in my drive item.\nIf I create column directly in my Document Library (1 line, Multi lines etc) it's ok but when my columns are linked with term store (managed metadata) i have this error :</p>\n<pre><code>GRAVE: Throwable detail: com.microsoft.graph.http.GraphServiceException: Error code: itemNotFound\nError message: The resource could not be found.\n\nGET https://graph.microsoft.com/v1.0/me/drives/[mydrive]/items/017QC4KJLG35SQJ5NC6VALGDTRG7LFJ6IM\nSdkVersion : graph-java/v5.5.0\n\n404 : Not Found\n[...]\n</code></pre>\n<p>And here is my code :</p>\n<pre><code>FieldValueSetRequest updateRequest = client.sites(siteId).lists(listId).items(listItemId).fields().buildRequest();\nlogger.debug(updateRequest);\nFieldValueSet fieldValueSet =  new FieldValueSet();\nfor(Map.Entry&lt;String, String&gt; element: elements.entrySet()) {\n    String key = element.getKey();\n    String value = element.getValue();\n    logger.debug(key+ &quot;=&quot; + value);\n    fieldValueSet.additionalDataManager().put(key, new JsonPrimitive(value));\n}\nupdateRequest.patch(fieldValueSet);\n</code></pre>\n"},{"tags":["java","jpa","collections","many-to-many"],"comments":[{"owner":{"account_id":3284439,"reputation":39734,"user_id":2764255,"accept_rate":50,"display_name":"Nikos Paraskevopoulos"},"score":0,"creation_date":1646133395,"post_id":71298361,"comment_id":126043510,"body_markdown":"My suggestion is to separate the code used for persistence from the code used for business logic. So, persistence code has 3 entity classes, one for each table. The mappings are straightforward. Your DAO layer translates the entity objects to domain model objects, having e.g. the `Set&lt;Set&lt;Bar&gt;&gt;` property. This involves writing more code, but results in a cleaner, more maintainable system by applying separation of concerns. Besides that, I don&#39;t think this mapping is possible with JPA. Perhaps you could trick JPA with an embeddable that implements `Set`???","body":"My suggestion is to separate the code used for persistence from the code used for business logic. So, persistence code has 3 entity classes, one for each table. The mappings are straightforward. Your DAO layer translates the entity objects to domain model objects, having e.g. the <code>Set&lt;Set&lt;Bar&gt;&gt;</code> property. This involves writing more code, but results in a cleaner, more maintainable system by applying separation of concerns. Besides that, I don&#39;t think this mapping is possible with JPA. Perhaps you could trick JPA with an embeddable that implements <code>Set</code>???"}],"owner":{"account_id":3971503,"reputation":47,"user_id":3276002,"display_name":"andi"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":327,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1646066952,"creation_date":1646066952,"question_id":71298361,"body_markdown":"Is there a possibility to achieve a set of sets of some specific entity? If yes, how do I need to annotate that field? My java class looks the following:\r\n\r\n\r\n```java\r\nclass Foo {\r\n  long id;\r\n  int value;\r\n  Set&lt;Set&lt;Bar&gt;&gt; barSets;\r\n}\r\n\r\nclass Bar {\r\n  long id;\r\n  String name;\r\n\r\n  String toString() { return name; }\r\n}\r\n```\r\n\r\nMy database tables are specified as following:\r\n```sql\r\nCREATE TABLE foo (\r\n  id LONG PRIMARY KEY,\r\n  value INTEGER\r\n);\r\n\r\nCREATE TABLE bar (\r\n  id LONG PRIMARY KEY,\r\n  name TEXT\r\n);\r\n\r\nCREATE TABLE foo_bar (\r\n  foo_id LONG REFERENCES foo,\r\n  set_index INTEGER,\r\n  bar_id LONG REFERENCES bar\r\n);\r\n```\r\nThe set_index of the foo_bar table defines which entries belong together within the same foo element. Maybe there is also some better approach to achieve this?\r\n\r\nExample:\r\n```\r\nfoo:\r\nid | value\r\n---|------\r\n 1 | 100 \r\n 2 | 200\r\n\r\nbar:\r\nid | name\r\n---|------\r\n 1 | AAA \r\n 2 | BBB\r\n 3 | CCC\r\n\r\nfoo_bar:\r\nfoo_id | set_index | bar_id\r\n-------|-----------|-------\r\n     1 |         1 |      1\r\n     1 |         1 |      2\r\n     1 |         2 |      1\r\n     1 |         2 |      3\r\n     2 |         1 |      2\r\n     2 |         1 |      3\r\n```\r\nJava objects:\r\n - Foo { id=1, value=100, bars=[ [AAA, BBB], [AAA, CCC] ] }\r\n - Foo { id=2, value=200, bars=[ [BBB, CCC] ] }\r\n","title":"JPA Set of Set of Entity","body":"<p>Is there a possibility to achieve a set of sets of some specific entity? If yes, how do I need to annotate that field? My java class looks the following:</p>\n<pre class=\"lang-java prettyprint-override\"><code>class Foo {\n  long id;\n  int value;\n  Set&lt;Set&lt;Bar&gt;&gt; barSets;\n}\n\nclass Bar {\n  long id;\n  String name;\n\n  String toString() { return name; }\n}\n</code></pre>\n<p>My database tables are specified as following:</p>\n<pre class=\"lang-sql prettyprint-override\"><code>CREATE TABLE foo (\n  id LONG PRIMARY KEY,\n  value INTEGER\n);\n\nCREATE TABLE bar (\n  id LONG PRIMARY KEY,\n  name TEXT\n);\n\nCREATE TABLE foo_bar (\n  foo_id LONG REFERENCES foo,\n  set_index INTEGER,\n  bar_id LONG REFERENCES bar\n);\n</code></pre>\n<p>The set_index of the foo_bar table defines which entries belong together within the same foo element. Maybe there is also some better approach to achieve this?</p>\n<p>Example:</p>\n<pre><code>foo:\nid | value\n---|------\n 1 | 100 \n 2 | 200\n\nbar:\nid | name\n---|------\n 1 | AAA \n 2 | BBB\n 3 | CCC\n\nfoo_bar:\nfoo_id | set_index | bar_id\n-------|-----------|-------\n     1 |         1 |      1\n     1 |         1 |      2\n     1 |         2 |      1\n     1 |         2 |      3\n     2 |         1 |      2\n     2 |         1 |      3\n</code></pre>\n<p>Java objects:</p>\n<ul>\n<li>Foo { id=1, value=100, bars=[ [AAA, BBB], [AAA, CCC] ] }</li>\n<li>Foo { id=2, value=200, bars=[ [BBB, CCC] ] }</li>\n</ul>\n"},{"tags":["java","spring","spring-boot","java-stream","option-type"],"answers":[{"tags":[],"owner":{"account_id":5695281,"reputation":331,"user_id":4501972,"display_name":"Nenad J."},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1645780498,"creation_date":1645780498,"answer_id":71263545,"question_id":71263430,"body_markdown":"Try next example:\r\n\r\n    Foo foo = new Foo();\r\n    foo.setName(&quot;Exp&quot;);\r\n    \r\n    \r\n    user.setFoo(dep.getFoo()\r\n                .stream()\r\n                .filter(f -&gt; f.getName().equals(doo.getName))\r\n                .findFirst().orElse(foo);\r\n\r\nBecause filter could return more then one object, you should to limit it on one object. findFirst will return object of type Optional&lt;Foo&gt; and orElse will return foo in case optional is empty. In other case you will get founded foo.","title":"if stream().filter is empty","body":"<p>Try next example:</p>\n<pre><code>Foo foo = new Foo();\nfoo.setName(&quot;Exp&quot;);\n\n\nuser.setFoo(dep.getFoo()\n            .stream()\n            .filter(f -&gt; f.getName().equals(doo.getName))\n            .findFirst().orElse(foo);\n</code></pre>\n<p>Because filter could return more then one object, you should to limit it on one object. findFirst will return object of type Optional and orElse will return foo in case optional is empty. In other case you will get founded foo.</p>\n"},{"tags":[],"owner":{"account_id":10310871,"reputation":25632,"user_id":7606764,"display_name":"Andronicus"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1646066931,"creation_date":1645780672,"answer_id":71263588,"question_id":71263430,"body_markdown":"I would suggest creating a constructor for `Foo` accepting `name`.\r\n\r\nYou can then extract the name with default value of `Optional`:\r\n\r\n    Foo foo = dep.getFoo()\r\n            .stream()\r\n            .filter(f -&gt; f.getName().equals(doo.getName))\r\n            .findAny().orElse(new Foo(&quot;Exp&quot;));\r\n    user.setFoo(foo);\r\n\r\nAs Holger cleverly noticed using `orElseGet` would avoid executing the `Supplier` in case the `Optional` is not empty (beneficial if the computation is complex or side effects occur):\r\n\r\n    Foo foo = dep.getFoo()\r\n            .stream()\r\n            .filter(f -&gt; f.getName().equals(doo.getName))\r\n            .findAny().orElseGet(() -&gt; new Foo(&quot;Exp&quot;));\r\n    user.setFoo(foo);\r\n\r\nSince java 11 you can use `ifPresentOrElse`:\r\n\r\n    dep.getFoo()\r\n            .stream()\r\n            .filter(f -&gt; f.getName().equals(doo.getName))\r\n            .findAny()\r\n            .ifPresentOrElse(user::setFoo, () -&gt; user.setFoo(new Foo(&quot;Exp&quot;)));\r\n\r\nP.S.: If you cannot create the constructor, you can just create the method to provide it and use it in the above snippet:\r\n\r\n    public static Foo defaultFoo() {\r\n        Foo foo = new Foo();\r\n        foo.setName(&quot;Exp&quot;);\r\n        return foo;\r\n    }\r\n\r\n","title":"if stream().filter is empty","body":"<p>I would suggest creating a constructor for <code>Foo</code> accepting <code>name</code>.</p>\n<p>You can then extract the name with default value of <code>Optional</code>:</p>\n<pre><code>Foo foo = dep.getFoo()\n        .stream()\n        .filter(f -&gt; f.getName().equals(doo.getName))\n        .findAny().orElse(new Foo(&quot;Exp&quot;));\nuser.setFoo(foo);\n</code></pre>\n<p>As Holger cleverly noticed using <code>orElseGet</code> would avoid executing the <code>Supplier</code> in case the <code>Optional</code> is not empty (beneficial if the computation is complex or side effects occur):</p>\n<pre><code>Foo foo = dep.getFoo()\n        .stream()\n        .filter(f -&gt; f.getName().equals(doo.getName))\n        .findAny().orElseGet(() -&gt; new Foo(&quot;Exp&quot;));\nuser.setFoo(foo);\n</code></pre>\n<p>Since java 11 you can use <code>ifPresentOrElse</code>:</p>\n<pre><code>dep.getFoo()\n        .stream()\n        .filter(f -&gt; f.getName().equals(doo.getName))\n        .findAny()\n        .ifPresentOrElse(user::setFoo, () -&gt; user.setFoo(new Foo(&quot;Exp&quot;)));\n</code></pre>\n<p>P.S.: If you cannot create the constructor, you can just create the method to provide it and use it in the above snippet:</p>\n<pre><code>public static Foo defaultFoo() {\n    Foo foo = new Foo();\n    foo.setName(&quot;Exp&quot;);\n    return foo;\n}\n</code></pre>\n"}],"owner":{"account_id":19216643,"reputation":191,"user_id":14041268,"display_name":"Джейк Морган"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3250,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":71263588,"answer_count":2,"score":2,"last_activity_date":1646066931,"creation_date":1645779912,"question_id":71263430,"body_markdown":"I want to know how to execute code from a stream if the filter does not find values and finds it, an example code:\r\n\r\n     @Transactional\r\n    public void change(ClassName dep){\r\n        // code\r\n        dep.getFoo()\r\n                .stream()\r\n                .filter(f -&gt; f.getName().equals(doo.getName))\r\n                \r\n    }\r\n\r\nif the filter has a value then:\r\n\r\n    user.setFoo(f);\r\n\r\nif there is no value in the filter then:\r\n\r\n    Foo foo = new Foo();\r\n    foo.setName(&quot;Exp&quot;);\r\n    user.setFoo(foo);","title":"if stream().filter is empty","body":"<p>I want to know how to execute code from a stream if the filter does not find values and finds it, an example code:</p>\n<pre><code> @Transactional\npublic void change(ClassName dep){\n    // code\n    dep.getFoo()\n            .stream()\n            .filter(f -&gt; f.getName().equals(doo.getName))\n            \n}\n</code></pre>\n<p>if the filter has a value then:</p>\n<pre><code>user.setFoo(f);\n</code></pre>\n<p>if there is no value in the filter then:</p>\n<pre><code>Foo foo = new Foo();\nfoo.setName(&quot;Exp&quot;);\nuser.setFoo(foo);\n</code></pre>\n"},{"tags":["java","bitbucket","bitbucket-server"],"comments":[{"owner":{"account_id":1016899,"reputation":1242,"user_id":1028276,"accept_rate":76,"display_name":"eeijlar"},"score":0,"creation_date":1647941537,"post_id":71298347,"comment_id":126491847,"body_markdown":"This might be helpful: https://github.com/christiangalsterer/stash-filehooks-plugin/blob/master/src/main/java/org/christiangalsterer/stash/filehooks/plugin/hook/FileNameHook.java#L65","body":"This might be helpful: <a href=\"https://github.com/christiangalsterer/stash-filehooks-plugin/blob/master/src/main/java/org/christiangalsterer/stash/filehooks/plugin/hook/FileNameHook.java#L65\" rel=\"nofollow noreferrer\">github.com/christiangalsterer/stash-filehooks-plugin/blob/&hellip;</a>"}],"owner":{"account_id":3580657,"reputation":146,"user_id":2988946,"display_name":"mrcoar"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":519,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":0,"score":2,"last_activity_date":1646066877,"creation_date":1646066877,"question_id":71298347,"body_markdown":"I have a Java Application that implements a hook using the Atlassian Bitbucket API.\r\n\r\nThe class that implements the hook is defined as follows:\r\n\r\n```\r\nimport com.atlassian.plugin.spring.scanner.annotation.export.ExportAsService;\r\nimport com.atlassian.bitbucket.hook.repository.PreRepositoryHook;\r\nimport com.atlassian.bitbucket.hook.repository.RepositoryHookRequest;\r\nimport com.atlassian.bitbucket.hook.repository.PreRepositoryHookContext;\r\nimport com.atlassian.bitbucket.hook.repository.RepositoryHookResult;\r\nimport com.atlassian.bitbucket.hook.repository.PreRepositoryHookRequest;\r\nimport com.atlassian.bitbucket.repository.Repository;\r\nimport javax.annotation.Nonnull;\r\n\r\n/* Other imports */\r\n\r\n@ExportAsService({SCMAdapter.class})\r\npublic class SCMAdapter implements PreRepositoryHook&lt;RepositoryHookRequest&gt;, ISCMAdapter{\r\n     /*Methods from both interfaces*/\r\n}\r\n```\r\n\r\nThe methods from the ```ISCMAdapter``` interface are irrelevant for this problem.\r\n\r\nThe ```PreRepositoryHook``` interface contains two methods. One of them is the following:\r\n\r\n```\r\npublic RepositoryHookResult preUpdate(@Nonnull PreRepositoryHookContext context, @Nonnull RepositoryHookRequest request){\r\n    /*Returns a RepositoryHookResult object */\r\n}\r\n```\r\n\r\nI can obtain the repository involved in the hook with the following call:\r\n\r\n```\r\nRepository repo = request.getRepository();\r\n```\r\n\r\nFrom that object, I can obtain the project&#39;s key, the slug, the ID, the name and the state:\r\n\r\n```\r\nString pkey=repo.getProject().getKey();\r\nString slug=repo.getSlug();\r\nString name=repo.getName();\r\nint id=repo.getId();\r\nRepository.State state=repo.getState();\r\n```\r\n\r\nThe method is currently working fine. However, I got a requirement that each repository must have a hidden directory with the same name for all repositories (lets say &quot;.myHiddenDir&quot;) and that directory must contain a YAML file named config.yml\r\n \r\nIs it possible, with the information obtained as listed above to obtain the content of an specific file in the repo?\r\n\r\nThanks in advance.\r\n\r\nP.D.: If you find that this description is lacking more info, please let me know and I will check the code.","title":"Get file from repository using Atlassian Bitbucket API","body":"<p>I have a Java Application that implements a hook using the Atlassian Bitbucket API.</p>\n<p>The class that implements the hook is defined as follows:</p>\n<pre><code>import com.atlassian.plugin.spring.scanner.annotation.export.ExportAsService;\nimport com.atlassian.bitbucket.hook.repository.PreRepositoryHook;\nimport com.atlassian.bitbucket.hook.repository.RepositoryHookRequest;\nimport com.atlassian.bitbucket.hook.repository.PreRepositoryHookContext;\nimport com.atlassian.bitbucket.hook.repository.RepositoryHookResult;\nimport com.atlassian.bitbucket.hook.repository.PreRepositoryHookRequest;\nimport com.atlassian.bitbucket.repository.Repository;\nimport javax.annotation.Nonnull;\n\n/* Other imports */\n\n@ExportAsService({SCMAdapter.class})\npublic class SCMAdapter implements PreRepositoryHook&lt;RepositoryHookRequest&gt;, ISCMAdapter{\n     /*Methods from both interfaces*/\n}\n</code></pre>\n<p>The methods from the <code>ISCMAdapter</code> interface are irrelevant for this problem.</p>\n<p>The <code>PreRepositoryHook</code> interface contains two methods. One of them is the following:</p>\n<pre><code>public RepositoryHookResult preUpdate(@Nonnull PreRepositoryHookContext context, @Nonnull RepositoryHookRequest request){\n    /*Returns a RepositoryHookResult object */\n}\n</code></pre>\n<p>I can obtain the repository involved in the hook with the following call:</p>\n<pre><code>Repository repo = request.getRepository();\n</code></pre>\n<p>From that object, I can obtain the project's key, the slug, the ID, the name and the state:</p>\n<pre><code>String pkey=repo.getProject().getKey();\nString slug=repo.getSlug();\nString name=repo.getName();\nint id=repo.getId();\nRepository.State state=repo.getState();\n</code></pre>\n<p>The method is currently working fine. However, I got a requirement that each repository must have a hidden directory with the same name for all repositories (lets say &quot;.myHiddenDir&quot;) and that directory must contain a YAML file named config.yml</p>\n<p>Is it possible, with the information obtained as listed above to obtain the content of an specific file in the repo?</p>\n<p>Thanks in advance.</p>\n<p>P.D.: If you find that this description is lacking more info, please let me know and I will check the code.</p>\n"},{"tags":["java","type-conversion"],"comments":[{"owner":{"account_id":18243171,"reputation":19300,"user_id":13279831,"display_name":"Nowhere Man"},"score":0,"creation_date":1646156396,"post_id":71297832,"comment_id":126052094,"body_markdown":"The mistake is that having 100K recursive calls of `selectionSort` method with three arguments is too much for JVM.  If you have not tweaked the stack size setting before running this code, by default, the stack size per thread is just 512K","body":"The mistake is that having 100K recursive calls of <code>selectionSort</code> method with three arguments is too much for JVM.  If you have not tweaked the stack size setting before running this code, by default, the stack size per thread is just 512K"}],"answers":[{"tags":[],"owner":{"account_id":231683,"reputation":4218,"user_id":496038,"display_name":"pringi"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1646066624,"creation_date":1646066624,"answer_id":71298297,"question_id":71297832,"body_markdown":"You hit the &quot;*maximum recursion call depth*&quot;/*maximum stack size* in Java.\r\n\r\nYou can solve this exact problem with the `-Xss20m` parameter when running your program.\r\n\r\n\r\nReferences: https://stackoverflow.com/questions/53729546/set-maximum-recursion-depth-in-java, https://stackoverflow.com/questions/27043922/why-is-the-max-recursion-depth-i-can-reach-non-deterministic, https://stackoverflow.com/questions/4967885/jvm-option-xss-what-does-it-do-exactly","title":"Stackoverflow Error while using long datatype","body":"<p>You hit the &quot;<em>maximum recursion call depth</em>&quot;/<em>maximum stack size</em> in Java.</p>\n<p>You can solve this exact problem with the <code>-Xss20m</code> parameter when running your program.</p>\n<p>References: <a href=\"https://stackoverflow.com/questions/53729546/set-maximum-recursion-depth-in-java\">Set maximum recursion depth in java</a>, <a href=\"https://stackoverflow.com/questions/27043922/why-is-the-max-recursion-depth-i-can-reach-non-deterministic\">Why is the max recursion depth I can reach non-deterministic?</a>, <a href=\"https://stackoverflow.com/questions/4967885/jvm-option-xss-what-does-it-do-exactly\">JVM option -Xss - What does it do exactly?</a></p>\n"}],"owner":{"account_id":22935850,"reputation":11,"user_id":17069349,"display_name":"Jaswanth gannamaneni"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":31,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1646066624,"creation_date":1646064554,"question_id":71297832,"body_markdown":"Getting StackOverflowError when using long data type while trying recursion. Tried type conversion where ever possible but I am unable to solve this error.\r\nCode:\r\n```\r\nimport java.util.Arrays;\r\n \r\nclass Demo\r\n{\r\n    // Utility function to swap values at two indices in the array\r\n    public static void swap(long[] arr, long i, long j)\r\n    {\r\n        long temp = arr[(int) i];\r\n        arr[(int) i] = arr[(int) j];\r\n        arr[(int) j] = temp;\r\n    }\r\n \r\n    // Recursive function to perform selection sort on subarray `arr[i…n-1]`\r\n    public static void selectionSort(long[] arr, long i, long n)\r\n    {\r\n        // find the minimum element in the unsorted subarray `[i…n-1]`\r\n        // and swap it with `arr[i]`\r\n        long min = i;\r\n        for (long j = i + 1; j &lt; n; j++)\r\n        {\r\n            // if `arr[j]` is less, then it is the new minimum\r\n            if (arr[(int) j] &lt; arr[(int) min]) {\r\n                min = j;    // update the index of minimum element\r\n            }\r\n        }\r\n \r\n        // swap the minimum element in subarray `arr[i…n-1]` with `arr[i]`\r\n        swap(arr, min, i);\r\n \r\n        if (i + 1 &lt; n) {\r\n            selectionSort(arr, i + 1, n);\r\n        }\r\n    }\r\n \r\n    public static void main(String[] args)\r\n    {\r\n    \tlong[] arr = new long[100000];\r\n    \tArrays.setAll(arr, i -&gt; i + 1);\r\n \r\n        selectionSort(arr, 0, arr.length);\r\n \r\n        // print the sorted array\r\n        for (long i = 0; i&lt; arr.length; i++)\r\n        \tSystem.out.print(arr[(int) i] + &quot; &quot;);\r\n        System.out.print(&quot;\\n&quot;);\r\n    }\r\n}\r\n```\r\n\r\nThis is the error i am getting when i try to run the code.\r\n\r\n```\r\nException in thread &quot;main&quot; java.lang.StackOverflowError\r\n\tat Demo.selectionSort(Demo.java:28)\r\n\tat Demo.selectionSort(Demo.java:31)\r\n\tat Demo.selectionSort(Demo.java:31)\r\n\tat Demo.selectionSort(Demo.java:31)\r\n```\r\nWhat mistake am i doing?","title":"Stackoverflow Error while using long datatype","body":"<p>Getting StackOverflowError when using long data type while trying recursion. Tried type conversion where ever possible but I am unable to solve this error.\nCode:</p>\n<pre><code>import java.util.Arrays;\n \nclass Demo\n{\n    // Utility function to swap values at two indices in the array\n    public static void swap(long[] arr, long i, long j)\n    {\n        long temp = arr[(int) i];\n        arr[(int) i] = arr[(int) j];\n        arr[(int) j] = temp;\n    }\n \n    // Recursive function to perform selection sort on subarray `arr[i…n-1]`\n    public static void selectionSort(long[] arr, long i, long n)\n    {\n        // find the minimum element in the unsorted subarray `[i…n-1]`\n        // and swap it with `arr[i]`\n        long min = i;\n        for (long j = i + 1; j &lt; n; j++)\n        {\n            // if `arr[j]` is less, then it is the new minimum\n            if (arr[(int) j] &lt; arr[(int) min]) {\n                min = j;    // update the index of minimum element\n            }\n        }\n \n        // swap the minimum element in subarray `arr[i…n-1]` with `arr[i]`\n        swap(arr, min, i);\n \n        if (i + 1 &lt; n) {\n            selectionSort(arr, i + 1, n);\n        }\n    }\n \n    public static void main(String[] args)\n    {\n        long[] arr = new long[100000];\n        Arrays.setAll(arr, i -&gt; i + 1);\n \n        selectionSort(arr, 0, arr.length);\n \n        // print the sorted array\n        for (long i = 0; i&lt; arr.length; i++)\n            System.out.print(arr[(int) i] + &quot; &quot;);\n        System.out.print(&quot;\\n&quot;);\n    }\n}\n</code></pre>\n<p>This is the error i am getting when i try to run the code.</p>\n<pre><code>Exception in thread &quot;main&quot; java.lang.StackOverflowError\n    at Demo.selectionSort(Demo.java:28)\n    at Demo.selectionSort(Demo.java:31)\n    at Demo.selectionSort(Demo.java:31)\n    at Demo.selectionSort(Demo.java:31)\n</code></pre>\n<p>What mistake am i doing?</p>\n"},{"tags":["java","android","firebase-authentication","android-pendingintent","activity-result-api"],"owner":{"account_id":22979825,"reputation":56,"user_id":17106939,"display_name":"shaked428"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":20,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"closed_date":1648386952,"answer_count":0,"score":1,"last_activity_date":1646066282,"creation_date":1646066282,"question_id":71298233,"body_markdown":"I have a code which goes to firebaseAuthUI with this activityResultLauncher:\r\n\r\n            //used for login\r\n        this.loginActivityLauncher = registerForActivityResult(new FirebaseAuthUIActivityResultContract(),\r\n            result -&gt; {\r\n                String s;\r\n                //result success\r\n                if(result.getResultCode() == RESULT_OK) {\r\n                    user.SignIn(MainActivity.this);\r\n                    s = getString(R.string.welcome);\r\n                }\r\n                //user exited login screen\r\n                else if(result.getIdpResponse() == null){\r\n                    s = getString(R.string.error_login_cancelled);\r\n                }\r\n                //error\r\n                else {\r\n                    s = Objects.requireNonNull(result.getIdpResponse().getError()).getLocalizedMessage();\r\n                    Utils.AlertBuild(null, s, null, MainActivity.this).show();\r\n                }\r\n\r\n                updateData(s);//update screen\r\n        });\r\nBut when I try my app with a newer OS the app crashes with this error:\r\n```\r\nE/AndroidRuntime: FATAL EXCEPTION: main\r\n    Process: com.example.bigproject, PID: 2013\r\n    java.lang.IllegalArgumentException: com.example.bigproject: Targeting S+ (version 31 and above) requires that one of FLAG_IMMUTABLE or FLAG_MUTABLE be specified when creating a PendingIntent.\r\n    Strongly consider using FLAG_IMMUTABLE, only use FLAG_MUTABLE if some functionality depends on the PendingIntent being mutable, e.g. if it needs to be used with inline replies or bubbles.\r\n        at android.app.PendingIntent.checkFlags(PendingIntent.java:401)\r\n        at android.app.PendingIntent.getActivityAsUser(PendingIntent.java:484)\r\n        at android.app.PendingIntent.getActivity(PendingIntent.java:470)\r\n        at android.app.PendingIntent.getActivity(PendingIntent.java:434)\r\n        at com.google.android.gms.internal.auth-api.zzr.zzc(com.google.android.gms:play-services-auth@@19.0.0:19)\r\n        at com.google.android.gms.auth.api.credentials.CredentialsClient.getHintPickerIntent(com.google.android.gms:play-services-auth@@19.0.0:10)\r\n        at com.firebase.ui.auth.ui.phone.CheckPhoneHandler.fetchCredential(CheckPhoneHandler.java:28)\r\n        at com.firebase.ui.auth.ui.phone.CheckPhoneNumberFragment.setDefaultCountryForSpinner(CheckPhoneNumberFragment.java:246)\r\n        at com.firebase.ui.auth.ui.phone.CheckPhoneNumberFragment.onActivityCreated(CheckPhoneNumberFragment.java:130)\r\n        at androidx.fragment.app.Fragment.performActivityCreated(Fragment.java:2996)\r\n        at androidx.fragment.app.FragmentStateManager.activityCreated(FragmentStateManager.java:580)\r\n        at androidx.fragment.app.FragmentStateManager.moveToExpectedState(FragmentStateManager.java:285)\r\n        at androidx.fragment.app.FragmentManager.executeOpsTogether(FragmentManager.java:2189)\r\n        at androidx.fragment.app.FragmentManager.removeRedundantOperationsAndExecute(FragmentManager.java:2100)\r\n        at androidx.fragment.app.FragmentManager.execPendingActions(FragmentManager.java:2002)\r\n        at androidx.fragment.app.FragmentManager.dispatchStateChange(FragmentManager.java:3138)\r\n        at androidx.fragment.app.FragmentManager.dispatchActivityCreated(FragmentManager.java:3072)\r\n        at androidx.fragment.app.FragmentController.dispatchActivityCreated(FragmentController.java:251)\r\n        at androidx.fragment.app.FragmentActivity.onStart(FragmentActivity.java:502)\r\n        at androidx.appcompat.app.AppCompatActivity.onStart(AppCompatActivity.java:246)\r\n        at android.app.Instrumentation.callActivityOnStart(Instrumentation.java:1467)\r\n        at android.app.Activity.performStart(Activity.java:7945)\r\n        at android.app.ActivityThread.handleStartActivity(ActivityThread.java:3750)\r\n        at android.app.servertransaction.TransactionExecutor.performLifecycleSequence(TransactionExecutor.java:221)\r\n        at android.app.servertransaction.TransactionExecutor.cycleToPath(TransactionExecutor.java:201)\r\n        at android.app.servertransaction.TransactionExecutor.executeLifecycleState(TransactionExecutor.java:173)\r\n        at android.app.servertransaction.TransactionExecutor.execute(TransactionExecutor.java:97)\r\n        at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2272)\r\n        at android.os.Handler.dispatchMessage(Handler.java:106)\r\n        at android.os.Looper.loopOnce(Looper.java:201)\r\n        at android.os.Looper.loop(Looper.java:288)\r\n        at android.app.ActivityThread.main(ActivityThread.java:7902)\r\n        at java.lang.reflect.Method.invoke(Native Method)\r\n        at com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:548)\r\n        at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:933)\r\n```\r\n\r\nI didn&#39;t find a way to convert or launch firebaseAuthUI with pending intent and I also make the Intent by this code and I don&#39;t know how to change it to PendingIntent:\r\n```\r\n    public Intent createIntent() {\r\n        return AuthUI.getInstance()\r\n                .createSignInIntentBuilder()\r\n                .setAvailableProviders(Collections.singletonList(new AuthUI.IdpConfig.PhoneBuilder().build()))\r\n                .setLogo(R.drawable.main_act_img)\r\n                .build();\r\n    }\r\n```","title":"FirebaseUI needs pending intent","body":"<p>I have a code which goes to firebaseAuthUI with this activityResultLauncher:</p>\n<pre><code>        //used for login\n    this.loginActivityLauncher = registerForActivityResult(new FirebaseAuthUIActivityResultContract(),\n        result -&gt; {\n            String s;\n            //result success\n            if(result.getResultCode() == RESULT_OK) {\n                user.SignIn(MainActivity.this);\n                s = getString(R.string.welcome);\n            }\n            //user exited login screen\n            else if(result.getIdpResponse() == null){\n                s = getString(R.string.error_login_cancelled);\n            }\n            //error\n            else {\n                s = Objects.requireNonNull(result.getIdpResponse().getError()).getLocalizedMessage();\n                Utils.AlertBuild(null, s, null, MainActivity.this).show();\n            }\n\n            updateData(s);//update screen\n    });\n</code></pre>\n<p>But when I try my app with a newer OS the app crashes with this error:</p>\n<pre><code>E/AndroidRuntime: FATAL EXCEPTION: main\n    Process: com.example.bigproject, PID: 2013\n    java.lang.IllegalArgumentException: com.example.bigproject: Targeting S+ (version 31 and above) requires that one of FLAG_IMMUTABLE or FLAG_MUTABLE be specified when creating a PendingIntent.\n    Strongly consider using FLAG_IMMUTABLE, only use FLAG_MUTABLE if some functionality depends on the PendingIntent being mutable, e.g. if it needs to be used with inline replies or bubbles.\n        at android.app.PendingIntent.checkFlags(PendingIntent.java:401)\n        at android.app.PendingIntent.getActivityAsUser(PendingIntent.java:484)\n        at android.app.PendingIntent.getActivity(PendingIntent.java:470)\n        at android.app.PendingIntent.getActivity(PendingIntent.java:434)\n        at com.google.android.gms.internal.auth-api.zzr.zzc(com.google.android.gms:play-services-auth@@19.0.0:19)\n        at com.google.android.gms.auth.api.credentials.CredentialsClient.getHintPickerIntent(com.google.android.gms:play-services-auth@@19.0.0:10)\n        at com.firebase.ui.auth.ui.phone.CheckPhoneHandler.fetchCredential(CheckPhoneHandler.java:28)\n        at com.firebase.ui.auth.ui.phone.CheckPhoneNumberFragment.setDefaultCountryForSpinner(CheckPhoneNumberFragment.java:246)\n        at com.firebase.ui.auth.ui.phone.CheckPhoneNumberFragment.onActivityCreated(CheckPhoneNumberFragment.java:130)\n        at androidx.fragment.app.Fragment.performActivityCreated(Fragment.java:2996)\n        at androidx.fragment.app.FragmentStateManager.activityCreated(FragmentStateManager.java:580)\n        at androidx.fragment.app.FragmentStateManager.moveToExpectedState(FragmentStateManager.java:285)\n        at androidx.fragment.app.FragmentManager.executeOpsTogether(FragmentManager.java:2189)\n        at androidx.fragment.app.FragmentManager.removeRedundantOperationsAndExecute(FragmentManager.java:2100)\n        at androidx.fragment.app.FragmentManager.execPendingActions(FragmentManager.java:2002)\n        at androidx.fragment.app.FragmentManager.dispatchStateChange(FragmentManager.java:3138)\n        at androidx.fragment.app.FragmentManager.dispatchActivityCreated(FragmentManager.java:3072)\n        at androidx.fragment.app.FragmentController.dispatchActivityCreated(FragmentController.java:251)\n        at androidx.fragment.app.FragmentActivity.onStart(FragmentActivity.java:502)\n        at androidx.appcompat.app.AppCompatActivity.onStart(AppCompatActivity.java:246)\n        at android.app.Instrumentation.callActivityOnStart(Instrumentation.java:1467)\n        at android.app.Activity.performStart(Activity.java:7945)\n        at android.app.ActivityThread.handleStartActivity(ActivityThread.java:3750)\n        at android.app.servertransaction.TransactionExecutor.performLifecycleSequence(TransactionExecutor.java:221)\n        at android.app.servertransaction.TransactionExecutor.cycleToPath(TransactionExecutor.java:201)\n        at android.app.servertransaction.TransactionExecutor.executeLifecycleState(TransactionExecutor.java:173)\n        at android.app.servertransaction.TransactionExecutor.execute(TransactionExecutor.java:97)\n        at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2272)\n        at android.os.Handler.dispatchMessage(Handler.java:106)\n        at android.os.Looper.loopOnce(Looper.java:201)\n        at android.os.Looper.loop(Looper.java:288)\n        at android.app.ActivityThread.main(ActivityThread.java:7902)\n        at java.lang.reflect.Method.invoke(Native Method)\n        at com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:548)\n        at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:933)\n</code></pre>\n<p>I didn't find a way to convert or launch firebaseAuthUI with pending intent and I also make the Intent by this code and I don't know how to change it to PendingIntent:</p>\n<pre><code>    public Intent createIntent() {\n        return AuthUI.getInstance()\n                .createSignInIntentBuilder()\n                .setAvailableProviders(Collections.singletonList(new AuthUI.IdpConfig.PhoneBuilder().build()))\n                .setLogo(R.drawable.main_act_img)\n                .build();\n    }\n</code></pre>\n"},{"tags":["java","android"],"comments":[{"owner":{"account_id":483434,"reputation":25487,"user_id":898478,"accept_rate":86,"display_name":"m0skit0"},"score":0,"creation_date":1646072529,"post_id":71298081,"comment_id":126029496,"body_markdown":"The UI needs to be updated on the main thread. Try runOnUiThread.","body":"The UI needs to be updated on the main thread. Try runOnUiThread."},{"owner":{"account_id":24406112,"reputation":11,"user_id":18334273,"display_name":"Platin78"},"score":0,"creation_date":1646078844,"post_id":71298081,"comment_id":126031388,"body_markdown":"wow I didn&#39;t even know there was such a thing such as a main UI thread, I tried executing  the lines within a runOnUiThread runnable and now it&#39;s working. thanks a lot boss much appreciated!","body":"wow I didn&#39;t even know there was such a thing such as a main UI thread, I tried executing  the lines within a runOnUiThread runnable and now it&#39;s working. thanks a lot boss much appreciated!"},{"owner":{"account_id":483434,"reputation":25487,"user_id":898478,"accept_rate":86,"display_name":"m0skit0"},"score":0,"creation_date":1646139075,"post_id":71298081,"comment_id":126045325,"body_markdown":"Does this answer your question? [How do we use runOnUiThread in Android?](https://stackoverflow.com/questions/11140285/how-do-we-use-runonuithread-in-android)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/11140285/how-do-we-use-runonuithread-in-android\">How do we use runOnUiThread in Android?</a>"}],"answers":[{"tags":[],"owner":{"account_id":21934980,"reputation":39,"user_id":16216382,"display_name":"CreativeDifference"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1646066169,"creation_date":1646066169,"answer_id":71298205,"question_id":71298081,"body_markdown":"Try this: \r\n\r\n    Timer timer = new Timer();\r\n    \r\n    timer.schedule(new TimerTask() {\r\n      @Override\r\n      public void run() {\r\n        //Your stuff\r\n      }\r\n    }, 0, 1000);\r\n\r\nOr this using the scheuldedServiceExecutor:\r\n\r\n    final ScheduledExecutorService scheduler = Executors.newScheduledThreadPool(1);\r\n    scheduler.scheduleAtFixedRate(() -&gt; {\r\n       //Your stuff\r\n    }, 1, 5, TimeUnit.SECONDS);","title":"Trying to make a basic counter using scheduled executor service","body":"<p>Try this:</p>\n<pre><code>Timer timer = new Timer();\n\ntimer.schedule(new TimerTask() {\n  @Override\n  public void run() {\n    //Your stuff\n  }\n}, 0, 1000);\n</code></pre>\n<p>Or this using the scheuldedServiceExecutor:</p>\n<pre><code>final ScheduledExecutorService scheduler = Executors.newScheduledThreadPool(1);\nscheduler.scheduleAtFixedRate(() -&gt; {\n   //Your stuff\n}, 1, 5, TimeUnit.SECONDS);\n</code></pre>\n"}],"owner":{"account_id":24406112,"reputation":11,"user_id":18334273,"display_name":"Platin78"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":106,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1646066169,"creation_date":1646065632,"question_id":71298081,"body_markdown":"I&#39;m new to java and was trying to make a simple android app that does the following:\r\n\r\n - display a window in the main activity \r\n - every second the value of integer i is increased by 1\r\n - update the window content to display the value of i every second\r\n\r\nfor example the window should display the following text:\r\n\r\n 1st second: &quot;update 1&quot;\r\n\r\n 2nd second: &quot;update 2&quot; \r\n\r\n 3rd second: &quot;update 3&quot;\r\n\r\n...\r\netc\r\n\r\nI learned that using java&#39;s ScheduledExecutorService with ScheduleAtFixedRate is better than implementing an infinite loop, so I attempted the following code:\r\n```\r\n    public class MainActivity extends AppCompatActivity {\r\n    \r\n    public FrameLayout mLayout;\r\n    public WindowManager wm;\r\n    public WindowManager.LayoutParams lp;\r\n    public int i;\r\n    \r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_main);\r\n\r\n        // display a window saying &quot;hello&quot;\r\n        wm = (WindowManager) getSystemService(WINDOW_SERVICE);\r\n        mLayout = new FrameLayout(this);\r\n        lp = new WindowManager.LayoutParams();\r\n        lp.format = PixelFormat.TRANSLUCENT;\r\n        lp.flags |= WindowManager.LayoutParams.FLAG_NOT_FOCUSABLE;\r\n        lp.width = WindowManager.LayoutParams.WRAP_CONTENT;\r\n        lp.height = WindowManager.LayoutParams.WRAP_CONTENT;\r\n        LayoutInflater inflater = LayoutInflater.from(this);\r\n        inflater.inflate(R.layout.text_bubble, mLayout);\r\n        ((TextView) mLayout.findViewById(R.id.text)).setText(&quot;hello&quot;);\r\n        wm.addView(mLayout, lp);\r\n\r\n        //creating a scheduled executor service, it runs the method &quot;myTask&quot; at fixed rate of 1 second\r\n        final ScheduledExecutorService executorService = Executors.newSingleThreadScheduledExecutor();\r\n        executorService.scheduleAtFixedRate(new Runnable() {\r\n            @Override\r\n            public void run() {\r\n                myTask();\r\n            }\r\n        }, 0, 1, TimeUnit.SECONDS);\r\n    }\r\n    \r\n    private void myTask() {\r\n        Log.v(TAG,&quot;Running&quot;);\r\n\r\n        //Increment i by 1 and update the window layout\r\n        i = i + 1;\r\n        ((TextView) mLayout.findViewById(R.id.text)).setText(&quot;update &quot; + i);\r\n        wm.updateViewLayout(mLayout, lp);\r\n    }\r\n}\r\n```\r\nWhen I start the app it does display the window as intended, but it doesn&#39;t update the number every second, instead it only shows &quot;update 1&quot;. I can&#39;t tell why as I didn&#39;t get any errors. After some trial and error I found that when I remove the last two lines from the myTask method (the lines responsible for updating the text of the window layout): \r\n```\r\n((TextView) mLayout.findViewById(R.id.text)).setText(&quot;update &quot; + i);\r\nwm.updateViewLayout(mLayout, lp);\r\n```\r\nwhen I remove these two lines the executor service will function just fine, and I can see that by watching the logged text message &quot;running&quot; popping every second. but when I add those two lines again, it doesn&#39;t pop these messages anymore(except for the first second).\r\nso what am I doing wrong here? I thought the problem could be about the the way I update the layout maybe. what am I missing here?\r\n","title":"Trying to make a basic counter using scheduled executor service","body":"<p>I'm new to java and was trying to make a simple android app that does the following:</p>\n<ul>\n<li>display a window in the main activity</li>\n<li>every second the value of integer i is increased by 1</li>\n<li>update the window content to display the value of i every second</li>\n</ul>\n<p>for example the window should display the following text:</p>\n<p>1st second: &quot;update 1&quot;</p>\n<p>2nd second: &quot;update 2&quot;</p>\n<p>3rd second: &quot;update 3&quot;</p>\n<p>...\netc</p>\n<p>I learned that using java's ScheduledExecutorService with ScheduleAtFixedRate is better than implementing an infinite loop, so I attempted the following code:</p>\n<pre><code>    public class MainActivity extends AppCompatActivity {\n    \n    public FrameLayout mLayout;\n    public WindowManager wm;\n    public WindowManager.LayoutParams lp;\n    public int i;\n    \n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_main);\n\n        // display a window saying &quot;hello&quot;\n        wm = (WindowManager) getSystemService(WINDOW_SERVICE);\n        mLayout = new FrameLayout(this);\n        lp = new WindowManager.LayoutParams();\n        lp.format = PixelFormat.TRANSLUCENT;\n        lp.flags |= WindowManager.LayoutParams.FLAG_NOT_FOCUSABLE;\n        lp.width = WindowManager.LayoutParams.WRAP_CONTENT;\n        lp.height = WindowManager.LayoutParams.WRAP_CONTENT;\n        LayoutInflater inflater = LayoutInflater.from(this);\n        inflater.inflate(R.layout.text_bubble, mLayout);\n        ((TextView) mLayout.findViewById(R.id.text)).setText(&quot;hello&quot;);\n        wm.addView(mLayout, lp);\n\n        //creating a scheduled executor service, it runs the method &quot;myTask&quot; at fixed rate of 1 second\n        final ScheduledExecutorService executorService = Executors.newSingleThreadScheduledExecutor();\n        executorService.scheduleAtFixedRate(new Runnable() {\n            @Override\n            public void run() {\n                myTask();\n            }\n        }, 0, 1, TimeUnit.SECONDS);\n    }\n    \n    private void myTask() {\n        Log.v(TAG,&quot;Running&quot;);\n\n        //Increment i by 1 and update the window layout\n        i = i + 1;\n        ((TextView) mLayout.findViewById(R.id.text)).setText(&quot;update &quot; + i);\n        wm.updateViewLayout(mLayout, lp);\n    }\n}\n</code></pre>\n<p>When I start the app it does display the window as intended, but it doesn't update the number every second, instead it only shows &quot;update 1&quot;. I can't tell why as I didn't get any errors. After some trial and error I found that when I remove the last two lines from the myTask method (the lines responsible for updating the text of the window layout):</p>\n<pre><code>((TextView) mLayout.findViewById(R.id.text)).setText(&quot;update &quot; + i);\nwm.updateViewLayout(mLayout, lp);\n</code></pre>\n<p>when I remove these two lines the executor service will function just fine, and I can see that by watching the logged text message &quot;running&quot; popping every second. but when I add those two lines again, it doesn't pop these messages anymore(except for the first second).\nso what am I doing wrong here? I thought the problem could be about the the way I update the layout maybe. what am I missing here?</p>\n"},{"tags":["java","algorithm","search","indexing"],"comments":[{"owner":{"account_id":17640,"reputation":261516,"user_id":39677,"accept_rate":57,"display_name":"Blankman"},"score":0,"creation_date":1646067874,"post_id":71298157,"comment_id":126027954,"body_markdown":"@Phaelaxz java not javascript......","body":"@Phaelaxz java not javascript......"},{"owner":{"display_name":"user1196549"},"score":1,"creation_date":1646068045,"post_id":71298157,"comment_id":126028008,"body_markdown":"Can&#39;t you use a relational database ? If not, consider https://en.wikipedia.org/wiki/ISAM","body":"Can&#39;t you use a relational database ? If not, consider <a href=\"https://en.wikipedia.org/wiki/ISAM\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/ISAM</a>"},{"owner":{"account_id":434266,"reputation":15464,"user_id":820127,"display_name":"rossum"},"score":0,"creation_date":1646068339,"post_id":71298157,"comment_id":126028097,"body_markdown":"O(1) retrieval time will not be possible, unless the time to retrieve one record is the same as the time to retrieve all two million records.  Better to look for ways to reduce the overall retrieval time.","body":"O(1) retrieval time will not be possible, unless the time to retrieve one record is the same as the time to retrieve all two million records.  Better to look for ways to reduce the overall retrieval time."},{"owner":{"account_id":15508885,"reputation":1854,"user_id":11188210,"display_name":"Phaelax z"},"score":2,"creation_date":1646068582,"post_id":71298157,"comment_id":126028185,"body_markdown":"Ugh sorry, I work in both but been in javascript all morning and my brain wasn&#39;t processing.  You can read the file line by line with bufferedreader and pull out the timestamp. Use the timestamp as key in a hashmap where the value is the byte offset for that row in your file. Then you can use a RandomAccessFile. (you may need to store the length of the line to read as well as its offset)","body":"Ugh sorry, I work in both but been in javascript all morning and my brain wasn&#39;t processing.  You can read the file line by line with bufferedreader and pull out the timestamp. Use the timestamp as key in a hashmap where the value is the byte offset for that row in your file. Then you can use a RandomAccessFile. (you may need to store the length of the line to read as well as its offset)"},{"owner":{"account_id":2968584,"reputation":50561,"user_id":2521214,"accept_rate":71,"display_name":"Spektre"},"score":0,"creation_date":1646122230,"post_id":71298157,"comment_id":126039740,"body_markdown":"the best I can think of is binary search for the start of timestamp and then linear to output the wanted rows ... so `O(log2(n)+m)` where n=2000000,m=size of output ... that should be relaively fast enough even without any LUT ... hope your rows are aligned to common size","body":"the best I can think of is binary search for the start of timestamp and then linear to output the wanted rows ... so <code>O(log2(n)+m)</code> where n=2000000,m=size of output ... that should be relaively fast enough even without any LUT ... hope your rows are aligned to common size"}],"owner":{"account_id":17640,"reputation":261516,"user_id":39677,"accept_rate":57,"display_name":"Blankman"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":52,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1646065935,"creation_date":1646065935,"question_id":71298157,"body_markdown":"I have a file that has 2 million rows, where each row represents transactions that contain a timestamp.\r\n\r\nI want to be able to fetch all rows that e.g. between 10:54am and 10:55am.\r\n\r\nThe rows are ordered according to time.\r\n\r\nI cannot load the entire file in memory, is there a way to load it in memory as a batch job, then create some sort of a index that I can use to lookup the correct lines in the file for my calls?\r\n\r\nI&#39;m looking for a solution that doesn&#39;t require other dependencies like elastic search etc.\r\n\r\n","title":"file with 2million rows, is it possible to create an index that will give O(1) retreival times?","body":"<p>I have a file that has 2 million rows, where each row represents transactions that contain a timestamp.</p>\n<p>I want to be able to fetch all rows that e.g. between 10:54am and 10:55am.</p>\n<p>The rows are ordered according to time.</p>\n<p>I cannot load the entire file in memory, is there a way to load it in memory as a batch job, then create some sort of a index that I can use to lookup the correct lines in the file for my calls?</p>\n<p>I'm looking for a solution that doesn't require other dependencies like elastic search etc.</p>\n"},{"tags":["java","swing","serversocket","event-dispatch-thread"],"comments":[{"owner":{"account_id":183279,"reputation":168313,"user_id":418556,"accept_rate":98,"display_name":"Andrew Thompson"},"score":1,"creation_date":1646055317,"post_id":71294771,"comment_id":126022713,"body_markdown":"1) Don&#39;t block the Event Dispatch Thread. See [Concurrency in Swing](https://docs.oracle.com/javase/tutorial/uiswing/concurrency/index.html) for details. 2) *&quot;it will be easy solve error&quot;* How could you know it will be easy when you do not know what the solution is? Don&#39;t presume.","body":"1) Don&#39;t block the Event Dispatch Thread. See <a href=\"https://docs.oracle.com/javase/tutorial/uiswing/concurrency/index.html\" rel=\"nofollow noreferrer\">Concurrency in Swing</a> for details. 2) <i>&quot;it will be easy solve error&quot;</i> How could you know it will be easy when you do not know what the solution is? Don&#39;t presume."}],"answers":[{"tags":[],"owner":{"account_id":2485939,"reputation":19426,"user_id":2164365,"accept_rate":40,"display_name":"Abra"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1646065867,"creation_date":1646065867,"answer_id":71298136,"question_id":71294771,"body_markdown":"You are calling method `receiveFile` on the [Event Dispatch Thread][1] (EDT). Method `receiveFile` contains the following line:\r\n```java\r\nSocket socket = serverSocket.accept();\r\n```\r\nHere is a quote from the [*javadoc*][2] of method `accept`:\r\n&gt; The method blocks until a connection is made.\r\n\r\nIn other words, when you run your program, its execution will stop at the above line until a socket connection is made. Thus you have literally stopped the EDT. If the EDT is stopped then it can&#39;t paint anything and that&#39;s why\r\n&gt; It does not add `fileNameLabel`, `headerLabel` or `scrollFile`\r\n\r\nAnd that&#39;s also why\r\n&gt; if I remove the socket then it loads all added Swing components\r\n\r\nYou need to run your socket code on a separate thread.  \r\nYou can either use a [SwingWorker][3] or create a new `Thread` to run your socket code and update the GUI from that thread by calling method [invokeLater][4] of class `java.awt.EventQueue`. Note that you will probably find a lot of examples that use method `invokeLater` of class `javax.swing.SwingUtilities`. That method simply calls the same name method in class `java.awt.EventQueue`.\r\n\r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/tutorial/uiswing/concurrency/dispatch.html\r\n  [2]: https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/net/ServerSocket.html#accept()\r\n  [3]: https://docs.oracle.com/javase/tutorial/uiswing/concurrency/worker.html\r\n  [4]: https://docs.oracle.com/en/java/javase/17/docs/api/java.desktop/java/awt/EventQueue.html#invokeLater(java.lang.Runnable)","title":"JFrame showing empty when start socket server","body":"<p>You are calling method <code>receiveFile</code> on the <a href=\"https://docs.oracle.com/javase/tutorial/uiswing/concurrency/dispatch.html\" rel=\"nofollow noreferrer\">Event Dispatch Thread</a> (EDT). Method <code>receiveFile</code> contains the following line:</p>\n<pre class=\"lang-java prettyprint-override\"><code>Socket socket = serverSocket.accept();\n</code></pre>\n<p>Here is a quote from the <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/net/ServerSocket.html#accept()\" rel=\"nofollow noreferrer\"><em>javadoc</em></a> of method <code>accept</code>:</p>\n<blockquote>\n<p>The method blocks until a connection is made.</p>\n</blockquote>\n<p>In other words, when you run your program, its execution will stop at the above line until a socket connection is made. Thus you have literally stopped the EDT. If the EDT is stopped then it can't paint anything and that's why</p>\n<blockquote>\n<p>It does not add <code>fileNameLabel</code>, <code>headerLabel</code> or <code>scrollFile</code></p>\n</blockquote>\n<p>And that's also why</p>\n<blockquote>\n<p>if I remove the socket then it loads all added Swing components</p>\n</blockquote>\n<p>You need to run your socket code on a separate thread.<br />\nYou can either use a <a href=\"https://docs.oracle.com/javase/tutorial/uiswing/concurrency/worker.html\" rel=\"nofollow noreferrer\">SwingWorker</a> or create a new <code>Thread</code> to run your socket code and update the GUI from that thread by calling method <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.desktop/java/awt/EventQueue.html#invokeLater(java.lang.Runnable)\" rel=\"nofollow noreferrer\">invokeLater</a> of class <code>java.awt.EventQueue</code>. Note that you will probably find a lot of examples that use method <code>invokeLater</code> of class <code>javax.swing.SwingUtilities</code>. That method simply calls the same name method in class <code>java.awt.EventQueue</code>.</p>\n"}],"owner":{"account_id":16525075,"reputation":82,"user_id":11940108,"display_name":"Pratik Gaikwad"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":111,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":71298136,"answer_count":1,"score":1,"last_activity_date":1646065867,"creation_date":1646049957,"question_id":71294771,"body_markdown":"When the code uses a socket, the receiving frame loads empty. \r\nIt does not add `fileNameLabel`, `headerLabel` or `scrollFile` and if I remove the socket then it loads all added Swing components. \r\n\r\nHow can I deal with it?\r\n\r\nThis is the full code of receive files:\r\n  \r\n```\r\nimport java.awt.Font;\r\nimport java.awt.event.ActionEvent;\r\nimport java.awt.event.ActionListener;\r\nimport java.io.DataInputStream;\r\nimport java.io.DataOutputStream;\r\n// import java.lang.module.ModuleDescriptor.Builder;\r\nimport java.io.File;\r\nimport java.io.FileOutputStream;\r\nimport java.io.IOException;\r\nimport java.io.InputStream;\r\nimport java.net.ServerSocket;\r\nimport java.net.Socket;\r\n\r\n// import javax.swing.BorderFactory;\r\nimport javax.swing.Box;\r\nimport javax.swing.BoxLayout;\r\nimport javax.swing.JButton;\r\nimport javax.swing.JFrame;\r\nimport javax.swing.JLabel;\r\nimport javax.swing.JOptionPane;\r\nimport javax.swing.JPanel;\r\nimport javax.swing.JScrollPane;\r\n\r\n// import javax.swing.border.Border;\r\n// import javax.swing.border.EmptyBorder;\r\n// import java.awt.Color;\r\nimport java.awt.Component;\r\n\r\nclass App {\r\n\r\n    public static File[] file = new File[1];\r\n\r\n    public static void receiveFile() {\r\n\r\n        JFrame receiveFileFrame;\r\n        JPanel receiveFilePanel;\r\n        JLabel fileNameLabel, headerLabel;\r\n\r\n        receiveFileFrame = new JFrame();\r\n        receiveFilePanel = new JPanel();\r\n        fileNameLabel = new JLabel();\r\n        headerLabel = new JLabel();\r\n\r\n        receiveFileFrame.setBounds(750, 300, 400, 400);\r\n        receiveFileFrame.setLayout(new BoxLayout(receiveFileFrame.getContentPane(), BoxLayout.Y_AXIS));\r\n\r\n        JScrollPane scrollFiles = new JScrollPane(receiveFilePanel);\r\n        scrollFiles.setVerticalScrollBarPolicy(JScrollPane.VERTICAL_SCROLLBAR_ALWAYS);\r\n\r\n        fileNameLabel.setFont(new Font(&quot;Serif&quot;, Font.BOLD, 20));\r\n        fileNameLabel.setAlignmentX(Component.CENTER_ALIGNMENT);\r\n\r\n        headerLabel.setText(&quot;Received Files&quot;);\r\n        headerLabel.setFont(new Font(&quot;Serif&quot;, Font.BOLD, 20));\r\n        headerLabel.setAlignmentX(Component.CENTER_ALIGNMENT);\r\n\r\n        receiveFilePanel.add(fileNameLabel);\r\n\r\n        receiveFileFrame.add(headerLabel);\r\n        receiveFileFrame.add(scrollFiles);\r\n\r\n        receiveFileFrame.setVisible(true);\r\n\r\n        receiveFileFrame.setDefaultCloseOperation(JFrame.DISPOSE_ON_CLOSE);\r\n\r\n        try {\r\n\r\n            ServerSocket serverSocket = new ServerSocket(4444);\r\n            while (true) {\r\n                Socket socket = serverSocket.accept();\r\n                DataInputStream dataInputStream = new DataInputStream(socket.getInputStream());\r\n                int fileNameLength = dataInputStream.readInt();\r\n                byte[] fileNameSize = new byte[fileNameLength];\r\n                dataInputStream.readFully(fileNameSize, 0, fileNameSize.length);\r\n                String fileName = new String(fileNameSize);\r\n                fileNameLabel.setText(fileName);\r\n                int fileContentLength = dataInputStream.readInt();\r\n                byte[] fileContentSize = new byte[fileContentLength];\r\n                dataInputStream.readFully(fileContentSize, 0, fileContentLength);\r\n                File fileDownload = new File(fileName);\r\n                FileOutputStream fileOutputStream = new FileOutputStream(fileDownload);\r\n                fileOutputStream.write(fileContentSize);\r\n                fileOutputStream.close();\r\n            }\r\n            \r\n        } catch (Exception e) {\r\n            JOptionPane.showMessageDialog(receiveFileFrame, e, &quot;Message&quot;, 0);\r\n        }\r\n\r\n    }\r\n\r\n    public static void main(String[] args) throws Exception {\r\n        JFrame mainFrame = new JFrame();\r\n        JButton send, receive;\r\n        JPanel mainPanel, buttoPanel;\r\n        JLabel heading;\r\n        // Border border = BorderFactory.createLineBorder(Color.black);\r\n\r\n        heading = new JLabel();\r\n        send = new JButton();\r\n        receive = new JButton();\r\n        mainPanel = new JPanel();\r\n        buttoPanel = new JPanel();\r\n\r\n        mainFrame.setBounds(700, 250, 400, 200);\r\n        mainFrame.setLayout(new BoxLayout(mainFrame.getContentPane(), BoxLayout.Y_AXIS));\r\n\r\n        heading.setText(&quot;File Transfer&quot;);\r\n        heading.setFont(new Font(&quot;Serif&quot;, Font.BOLD, 20));\r\n        heading.setAlignmentX(Component.CENTER_ALIGNMENT);\r\n\r\n        send.setText(&quot;Send&quot;);\r\n        send.setSize(100, 50);\r\n        send.setFont(new Font(&quot;Serif&quot;, Font.PLAIN, 15));\r\n\r\n        receive.setText(&quot;Receive&quot;);\r\n        receive.setSize(100, 50);\r\n        receive.setFont(new Font(&quot;Serif&quot;, Font.PLAIN, 15));\r\n\r\n        buttoPanel.add(send);\r\n        buttoPanel.add(receive);\r\n\r\n        mainPanel.add(heading);\r\n        mainPanel.setLayout(new BoxLayout(mainPanel, BoxLayout.Y_AXIS));\r\n        mainPanel.add(Box.createHorizontalStrut(10));\r\n        mainPanel.add(buttoPanel);\r\n\r\n        mainFrame.add(mainPanel);\r\n\r\n        mainFrame.setVisible(true);\r\n        mainFrame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\r\n\r\n        send.addActionListener(new ActionListener() {\r\n\r\n            @Override\r\n            public void actionPerformed(ActionEvent e) {\r\n\r\n                JOptionPane.showMessageDialog(mainFrame, &quot;Send feature not added&quot;, &quot;Message&quot;, 0);\r\n\r\n            }\r\n        });\r\n\r\n        receive.addActionListener(new ActionListener() {\r\n\r\n            @Override\r\n            public void actionPerformed(ActionEvent e) {\r\n\r\n                receiveFile();\r\n\r\n            }\r\n        });\r\n    }\r\n}\r\n```\r\n","title":"JFrame showing empty when start socket server","body":"<p>When the code uses a socket, the receiving frame loads empty.\nIt does not add <code>fileNameLabel</code>, <code>headerLabel</code> or <code>scrollFile</code> and if I remove the socket then it loads all added Swing components.</p>\n<p>How can I deal with it?</p>\n<p>This is the full code of receive files:</p>\n<pre><code>import java.awt.Font;\nimport java.awt.event.ActionEvent;\nimport java.awt.event.ActionListener;\nimport java.io.DataInputStream;\nimport java.io.DataOutputStream;\n// import java.lang.module.ModuleDescriptor.Builder;\nimport java.io.File;\nimport java.io.FileOutputStream;\nimport java.io.IOException;\nimport java.io.InputStream;\nimport java.net.ServerSocket;\nimport java.net.Socket;\n\n// import javax.swing.BorderFactory;\nimport javax.swing.Box;\nimport javax.swing.BoxLayout;\nimport javax.swing.JButton;\nimport javax.swing.JFrame;\nimport javax.swing.JLabel;\nimport javax.swing.JOptionPane;\nimport javax.swing.JPanel;\nimport javax.swing.JScrollPane;\n\n// import javax.swing.border.Border;\n// import javax.swing.border.EmptyBorder;\n// import java.awt.Color;\nimport java.awt.Component;\n\nclass App {\n\n    public static File[] file = new File[1];\n\n    public static void receiveFile() {\n\n        JFrame receiveFileFrame;\n        JPanel receiveFilePanel;\n        JLabel fileNameLabel, headerLabel;\n\n        receiveFileFrame = new JFrame();\n        receiveFilePanel = new JPanel();\n        fileNameLabel = new JLabel();\n        headerLabel = new JLabel();\n\n        receiveFileFrame.setBounds(750, 300, 400, 400);\n        receiveFileFrame.setLayout(new BoxLayout(receiveFileFrame.getContentPane(), BoxLayout.Y_AXIS));\n\n        JScrollPane scrollFiles = new JScrollPane(receiveFilePanel);\n        scrollFiles.setVerticalScrollBarPolicy(JScrollPane.VERTICAL_SCROLLBAR_ALWAYS);\n\n        fileNameLabel.setFont(new Font(&quot;Serif&quot;, Font.BOLD, 20));\n        fileNameLabel.setAlignmentX(Component.CENTER_ALIGNMENT);\n\n        headerLabel.setText(&quot;Received Files&quot;);\n        headerLabel.setFont(new Font(&quot;Serif&quot;, Font.BOLD, 20));\n        headerLabel.setAlignmentX(Component.CENTER_ALIGNMENT);\n\n        receiveFilePanel.add(fileNameLabel);\n\n        receiveFileFrame.add(headerLabel);\n        receiveFileFrame.add(scrollFiles);\n\n        receiveFileFrame.setVisible(true);\n\n        receiveFileFrame.setDefaultCloseOperation(JFrame.DISPOSE_ON_CLOSE);\n\n        try {\n\n            ServerSocket serverSocket = new ServerSocket(4444);\n            while (true) {\n                Socket socket = serverSocket.accept();\n                DataInputStream dataInputStream = new DataInputStream(socket.getInputStream());\n                int fileNameLength = dataInputStream.readInt();\n                byte[] fileNameSize = new byte[fileNameLength];\n                dataInputStream.readFully(fileNameSize, 0, fileNameSize.length);\n                String fileName = new String(fileNameSize);\n                fileNameLabel.setText(fileName);\n                int fileContentLength = dataInputStream.readInt();\n                byte[] fileContentSize = new byte[fileContentLength];\n                dataInputStream.readFully(fileContentSize, 0, fileContentLength);\n                File fileDownload = new File(fileName);\n                FileOutputStream fileOutputStream = new FileOutputStream(fileDownload);\n                fileOutputStream.write(fileContentSize);\n                fileOutputStream.close();\n            }\n            \n        } catch (Exception e) {\n            JOptionPane.showMessageDialog(receiveFileFrame, e, &quot;Message&quot;, 0);\n        }\n\n    }\n\n    public static void main(String[] args) throws Exception {\n        JFrame mainFrame = new JFrame();\n        JButton send, receive;\n        JPanel mainPanel, buttoPanel;\n        JLabel heading;\n        // Border border = BorderFactory.createLineBorder(Color.black);\n\n        heading = new JLabel();\n        send = new JButton();\n        receive = new JButton();\n        mainPanel = new JPanel();\n        buttoPanel = new JPanel();\n\n        mainFrame.setBounds(700, 250, 400, 200);\n        mainFrame.setLayout(new BoxLayout(mainFrame.getContentPane(), BoxLayout.Y_AXIS));\n\n        heading.setText(&quot;File Transfer&quot;);\n        heading.setFont(new Font(&quot;Serif&quot;, Font.BOLD, 20));\n        heading.setAlignmentX(Component.CENTER_ALIGNMENT);\n\n        send.setText(&quot;Send&quot;);\n        send.setSize(100, 50);\n        send.setFont(new Font(&quot;Serif&quot;, Font.PLAIN, 15));\n\n        receive.setText(&quot;Receive&quot;);\n        receive.setSize(100, 50);\n        receive.setFont(new Font(&quot;Serif&quot;, Font.PLAIN, 15));\n\n        buttoPanel.add(send);\n        buttoPanel.add(receive);\n\n        mainPanel.add(heading);\n        mainPanel.setLayout(new BoxLayout(mainPanel, BoxLayout.Y_AXIS));\n        mainPanel.add(Box.createHorizontalStrut(10));\n        mainPanel.add(buttoPanel);\n\n        mainFrame.add(mainPanel);\n\n        mainFrame.setVisible(true);\n        mainFrame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\n\n        send.addActionListener(new ActionListener() {\n\n            @Override\n            public void actionPerformed(ActionEvent e) {\n\n                JOptionPane.showMessageDialog(mainFrame, &quot;Send feature not added&quot;, &quot;Message&quot;, 0);\n\n            }\n        });\n\n        receive.addActionListener(new ActionListener() {\n\n            @Override\n            public void actionPerformed(ActionEvent e) {\n\n                receiveFile();\n\n            }\n        });\n    }\n}\n</code></pre>\n"},{"tags":["java","json","jsonschema","jsonschema2pojo"],"answers":[{"tags":[],"owner":{"account_id":1995875,"reputation":1447,"user_id":1788863,"accept_rate":89,"display_name":"Flowryn"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1498835008,"creation_date":1498835008,"answer_id":44849514,"question_id":44755916,"body_markdown":"I managed to solve the issue by switching from jackson-converter to gson-converter.","title":"How can I mark as ignored some properties using json schema or jsonschema2pojo?","body":"<p>I managed to solve the issue by switching from jackson-converter to gson-converter.</p>\n"},{"tags":[],"owner":{"account_id":1567762,"reputation":124,"user_id":1456164,"display_name":"Tihomir"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1646065605,"creation_date":1646065605,"answer_id":71298077,"question_id":44755916,"body_markdown":"In jsonschema2pojo case these properties can be deleted from json or jsonschema used for generating pojos.\r\n \r\nWhen they are retrieved in json they will be deserialized and added to pojo&#39;s `Map&lt;String, Object&gt; additionalProperties` field.\r\nadditionalProperties field is created by default. Make sure it is not disabledin schema `&quot;additionalProperties&quot;: false`\r\n ","title":"How can I mark as ignored some properties using json schema or jsonschema2pojo?","body":"<p>In jsonschema2pojo case these properties can be deleted from json or jsonschema used for generating pojos.</p>\n<p>When they are retrieved in json they will be deserialized and added to pojo's <code>Map&lt;String, Object&gt; additionalProperties</code> field.\nadditionalProperties field is created by default. Make sure it is not disabledin schema <code>&quot;additionalProperties&quot;: false</code></p>\n"}],"owner":{"account_id":1995875,"reputation":1447,"user_id":1788863,"accept_rate":89,"display_name":"Flowryn"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1453,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":44849514,"answer_count":2,"score":2,"last_activity_date":1646065605,"creation_date":1498466683,"question_id":44755916,"body_markdown":"How can I mark as ignored some properties using json schema or jsonschema2pojo plugin? Sometimes I do receive these properties, sometimes I do not.\r\n\r\nHere is the exception I am having: \r\n\r\n&gt; com.fasterxml.jackson.databind.exc.UnrecognizedPropertyException: Unrecognized field &quot;warnings&quot; (class com.xyz.music.napster.v2.metadata.MetaVO), not marked as ignorable (2 known properties: &quot;returnedCount&quot;, &quot;totalCount&quot;])\r\n at [Source: okhttp3.ResponseBody$BomAwareReader@49f94818; line: 1, column: 15846] (through reference chain: com.xyz.music.napster.v2.metadata.PlaylistsResponseVO[&quot;meta&quot;]-&gt;com.xyz.music.napster.v2.metadata.MetaVO[&quot;warnings&quot;])\r\n\r\nHere is my schema for `MetaVO` class\r\n\r\n    {\r\n      &quot;properties&quot;: {\r\n        &quot;returnedCount&quot;: {\r\n          &quot;type&quot;: &quot;integer&quot;\r\n        },\r\n        &quot;totalCount&quot;: {\r\n          &quot;type&quot;: &quot;integer&quot;\r\n        }\r\n      },\r\n      &quot;type&quot;: &quot;object&quot;\r\n    }\r\n\r\nFor the moment I have found if I set the following annotation on `MetaVO` class \r\n\r\n    @JsonIgnoreProperties(ignoreUnknown = true)\r\n\r\nmy problem is solved.\r\n\r\nHowever **these classes are auto-generated by the plugin** (and according to our project specs they have to stay so).\r\n\r\nIs it possible to do anything like this from json schema or jsonschema2pojo plugin? \r\n\r\n","title":"How can I mark as ignored some properties using json schema or jsonschema2pojo?","body":"<p>How can I mark as ignored some properties using json schema or jsonschema2pojo plugin? Sometimes I do receive these properties, sometimes I do not.</p>\n\n<p>Here is the exception I am having: </p>\n\n<blockquote>\n  <p>com.fasterxml.jackson.databind.exc.UnrecognizedPropertyException: Unrecognized field \"warnings\" (class com.xyz.music.napster.v2.metadata.MetaVO), not marked as ignorable (2 known properties: \"returnedCount\", \"totalCount\"])\n   at [Source: okhttp3.ResponseBody$BomAwareReader@49f94818; line: 1, column: 15846] (through reference chain: com.xyz.music.napster.v2.metadata.PlaylistsResponseVO[\"meta\"]->com.xyz.music.napster.v2.metadata.MetaVO[\"warnings\"])</p>\n</blockquote>\n\n<p>Here is my schema for <code>MetaVO</code> class</p>\n\n<pre><code>{\n  \"properties\": {\n    \"returnedCount\": {\n      \"type\": \"integer\"\n    },\n    \"totalCount\": {\n      \"type\": \"integer\"\n    }\n  },\n  \"type\": \"object\"\n}\n</code></pre>\n\n<p>For the moment I have found if I set the following annotation on <code>MetaVO</code> class </p>\n\n<pre><code>@JsonIgnoreProperties(ignoreUnknown = true)\n</code></pre>\n\n<p>my problem is solved.</p>\n\n<p>However <strong>these classes are auto-generated by the plugin</strong> (and according to our project specs they have to stay so).</p>\n\n<p>Is it possible to do anything like this from json schema or jsonschema2pojo plugin? </p>\n"},{"tags":["java","mysql","mariadb","database-connection"],"answers":[{"tags":[],"owner":{"account_id":10929,"reputation":545317,"user_id":20860,"accept_rate":92,"display_name":"Bill Karwin"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1646065390,"creation_date":1646065390,"answer_id":71298020,"question_id":71297643,"body_markdown":"You could resolve the SSL errors using the other method recommended in the error message itself:\r\n\r\n&gt; You need either to explicitly disable SSL by setting useSSL=false, **or set useSSL=true and provide truststore for server certificate verification.**\r\n\r\n(emphasis mine)\r\n\r\nThat is, create a truststore file, and set the path to the truststore file and the password using Java properties. Then you can set those properties without changing code.\r\n\r\nSee https://dev.mysql.com/doc/connector-j/8.0/en/connector-j-reference-using-ssl.html for more details on creating the truststore file and use properties to specify it to your Java app. ","title":"SSL connection error when connecting to MySQL, using JDBC","body":"<p>You could resolve the SSL errors using the other method recommended in the error message itself:</p>\n<blockquote>\n<p>You need either to explicitly disable SSL by setting useSSL=false, <strong>or set useSSL=true and provide truststore for server certificate verification.</strong></p>\n</blockquote>\n<p>(emphasis mine)</p>\n<p>That is, create a truststore file, and set the path to the truststore file and the password using Java properties. Then you can set those properties without changing code.</p>\n<p>See <a href=\"https://dev.mysql.com/doc/connector-j/8.0/en/connector-j-reference-using-ssl.html\" rel=\"nofollow noreferrer\">https://dev.mysql.com/doc/connector-j/8.0/en/connector-j-reference-using-ssl.html</a> for more details on creating the truststore file and use properties to specify it to your Java app.</p>\n"}],"owner":{"account_id":7430214,"reputation":1253,"user_id":5651468,"accept_rate":100,"display_name":"Sandeep"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1816,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1646065390,"creation_date":1646063703,"question_id":71297643,"body_markdown":"The problem that we are facing is well documented in [https://stackoverflow.com/questions/34189756/warning-about-ssl-connection-when-connecting-to-mysql-database.][1]\r\n\r\nWe started facing this issue upon transitioning from `MySQL 5.6.51` to `MySQL 8.0.27`.\r\nThe fix that is suggested works for us but we have an issue in that we don’t want to update the Java source files to change, for example, from\r\n\r\n    jdbc:mysql://localhost:3306/Peoples\r\n\r\nto  \r\n\r\n    jdbc:mysql://localhost:3306/Peoples?autoReconnect=true&amp;useSSL=false\r\n\r\nas suggested in [https://stackoverflow.com/a/34449182][2]\r\n\r\n\r\n----------\r\n\r\n\r\n**Question:** Is there some change that we can make to the execution environment of our new target (`Ubuntu kernel version 5.4.0-91`) such that we need not make changes to the existing Java code?  \r\n\r\n  [1]: https://stackoverflow.com/questions/34189756/warning-about-ssl-connection-when-connecting-to-mysql-database\r\n  [2]: https://stackoverflow.com/a/34449182\r\n\r\n","title":"SSL connection error when connecting to MySQL, using JDBC","body":"<p>The problem that we are facing is well documented in <a href=\"https://stackoverflow.com/questions/34189756/warning-about-ssl-connection-when-connecting-to-mysql-database\">https://stackoverflow.com/questions/34189756/warning-about-ssl-connection-when-connecting-to-mysql-database.</a></p>\n<p>We started facing this issue upon transitioning from <code>MySQL 5.6.51</code> to <code>MySQL 8.0.27</code>.\nThe fix that is suggested works for us but we have an issue in that we don’t want to update the Java source files to change, for example, from</p>\n<pre><code>jdbc:mysql://localhost:3306/Peoples\n</code></pre>\n<p>to</p>\n<pre><code>jdbc:mysql://localhost:3306/Peoples?autoReconnect=true&amp;useSSL=false\n</code></pre>\n<p>as suggested in <a href=\"https://stackoverflow.com/a/34449182\">https://stackoverflow.com/a/34449182</a></p>\n<hr />\n<p><strong>Question:</strong> Is there some change that we can make to the execution environment of our new target (<code>Ubuntu kernel version 5.4.0-91</code>) such that we need not make changes to the existing Java code?</p>\n"},{"tags":["java","spring-boot","reactive-programming","project-reactor"],"answers":[{"tags":[],"owner":{"account_id":1126254,"reputation":27393,"user_id":1113486,"display_name":"Simon Basl&#233;"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1646065115,"creation_date":1645886988,"answer_id":71277604,"question_id":71264455,"body_markdown":"I think you can simply use `flatMap`, which connects the context of the downstream to each inner publisher already. Use `then()` inside the `flatmap` function to ignore the result.","title":"Correct way to detach a computation and forward context with Reactor","body":"<p>I think you can simply use <code>flatMap</code>, which connects the context of the downstream to each inner publisher already. Use <code>then()</code> inside the <code>flatmap</code> function to ignore the result.</p>\n"}],"owner":{"account_id":19127057,"reputation":149,"user_id":13969814,"display_name":"Nahoj"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":885,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"closed_date":1646403456,"answer_count":1,"score":1,"last_activity_date":1646065115,"creation_date":1645784945,"question_id":71264455,"body_markdown":"In a Spring Boot project, I sometimes need to &quot;fire and forget&quot; a time-consuming task from within an already non-blocking context, and to forward the current subscriber Context to it.\r\n\r\nI have an implementation that works but I feel it may be overcomplicated or not recommended. Here is what I&#39;m doing:\r\n\r\n```java\r\n    static Mono&lt;Object&gt; longTask() {\r\n        return Mono.deferContextual(ctx -&gt;\r\n            Mono.delay(Duration.ofMillis(500))\r\n                .doOnSuccess(ignored -&gt; System.out.println(&quot;print 2nd: &quot; + ctx.get(&quot;x&quot;)))\r\n        );\r\n    }\r\n\r\n    // Improve me\r\n    static Mono&lt;Object&gt; fireAndForgetLongTask() {\r\n        return Mono.deferContextual(ctx -&gt; {\r\n            longTask()\r\n                .contextWrite(ctx)\r\n                .subscribeOn(Schedulers.single())\r\n                .subscribe();\r\n            System.out.println(&quot;print 1st&quot;);\r\n            return Mono.empty();\r\n        });\r\n    }\r\n\r\n    // Hypothetical caller\r\n    public static void main(String[] args) {\r\n        fireAndForgetLongTask()\r\n            .contextWrite(Context.of(&quot;x&quot;, &quot;42&quot;))\r\n            .then(Mono.delay(Duration.ofMillis(1000)))\r\n            .block();\r\n    }\r\n```\r\n\r\nIs it correct to call `.subscribe()` from inside `Mono.deferContextual()`? Is there a simpler way to write `fireAndForgetLongTask()`?\r\n\r\nReading the documentation, I was under the impression that I could just do this:\r\n\r\n```java\r\n    static Mono&lt;Object&gt; fireAndForgetLongTask() {\r\n        return longTask()\r\n            .subscribeOn(Schedulers.single())\r\n            .doOnSuccess(ignored -&gt; System.out.println(&quot;print 1st&quot;));\r\n    }\r\n```\r\nbut this doesn&#39;t work for me, it runs `longTask` synchronously and prints &quot;print 1st&quot; last.","title":"Correct way to detach a computation and forward context with Reactor","body":"<p>In a Spring Boot project, I sometimes need to &quot;fire and forget&quot; a time-consuming task from within an already non-blocking context, and to forward the current subscriber Context to it.</p>\n<p>I have an implementation that works but I feel it may be overcomplicated or not recommended. Here is what I'm doing:</p>\n<pre class=\"lang-java prettyprint-override\"><code>    static Mono&lt;Object&gt; longTask() {\n        return Mono.deferContextual(ctx -&gt;\n            Mono.delay(Duration.ofMillis(500))\n                .doOnSuccess(ignored -&gt; System.out.println(&quot;print 2nd: &quot; + ctx.get(&quot;x&quot;)))\n        );\n    }\n\n    // Improve me\n    static Mono&lt;Object&gt; fireAndForgetLongTask() {\n        return Mono.deferContextual(ctx -&gt; {\n            longTask()\n                .contextWrite(ctx)\n                .subscribeOn(Schedulers.single())\n                .subscribe();\n            System.out.println(&quot;print 1st&quot;);\n            return Mono.empty();\n        });\n    }\n\n    // Hypothetical caller\n    public static void main(String[] args) {\n        fireAndForgetLongTask()\n            .contextWrite(Context.of(&quot;x&quot;, &quot;42&quot;))\n            .then(Mono.delay(Duration.ofMillis(1000)))\n            .block();\n    }\n</code></pre>\n<p>Is it correct to call <code>.subscribe()</code> from inside <code>Mono.deferContextual()</code>? Is there a simpler way to write <code>fireAndForgetLongTask()</code>?</p>\n<p>Reading the documentation, I was under the impression that I could just do this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>    static Mono&lt;Object&gt; fireAndForgetLongTask() {\n        return longTask()\n            .subscribeOn(Schedulers.single())\n            .doOnSuccess(ignored -&gt; System.out.println(&quot;print 1st&quot;));\n    }\n</code></pre>\n<p>but this doesn't work for me, it runs <code>longTask</code> synchronously and prints &quot;print 1st&quot; last.</p>\n"},{"tags":["java","android","deep-linking"],"comments":[{"owner":{"account_id":282771,"reputation":396,"user_id":579875,"accept_rate":25,"display_name":"Android_IT"},"score":0,"creation_date":1655214251,"post_id":71223223,"comment_id":128275551,"body_markdown":"Hi, do you found the solution?","body":"Hi, do you found the solution?"},{"owner":{"account_id":216950,"reputation":20103,"user_id":472495,"accept_rate":92,"display_name":"halfer"},"score":0,"creation_date":1655239348,"post_id":71223223,"comment_id":128284544,"body_markdown":"@Android_IT: based on their profile information, the question author has not signed in for at least a month. They may not receive your message.","body":"@Android_IT: based on their profile information, the question author has not signed in for at least a month. They may not receive your message."}],"owner":{"account_id":10752999,"reputation":13,"user_id":7911730,"display_name":"Mahmod Masoud"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":730,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1646065020,"creation_date":1645540630,"question_id":71223223,"body_markdown":"I follow the [documentation][1] for deep linking. When I test \r\nthe deep link using https://developers.google.com/digital-asset-links/tools/generator I got sometimes attached error message and sometimes I got like attached success message and the same happened sometimes redirect me to the the browser and sometimes redirect me to the deep link page.\r\n\r\nThis is my manifest configuration\r\n\r\n            &lt;intent-filter android:label=&quot;@string/app_name&quot; android:autoVerify=&quot;true&quot;&gt;\r\n                &lt;action android:name=&quot;android.intent.action.VIEW&quot; /&gt;\r\n\r\n                &lt;category android:name=&quot;android.intent.category.DEFAULT&quot; /&gt;\r\n                &lt;category android:name=&quot;android.intent.category.BROWSABLE&quot; /&gt;\r\n\r\n                &lt;data\r\n                    android:scheme=&quot;https&quot;\r\n                    android:host=&quot;example.com.qa&quot;\r\n                    android:pathPrefix=&quot;/fb/fb&quot; /&gt;\r\n            &lt;/intent-filter&gt;\r\n            &lt;intent-filter&gt;\r\n                &lt;action android:name=&quot;android.intent.action.VIEW&quot; /&gt;\r\n\r\n                &lt;category android:name=&quot;android.intent.category.DEFAULT&quot; /&gt;\r\n                &lt;category android:name=&quot;android.intent.category.BROWSABLE&quot; /&gt;\r\n\r\n                &lt;data\r\n                    android:scheme=&quot;https&quot;\r\n                    android:host=&quot;example.com.qa&quot;\r\n                    android:pathPrefix=&quot;/edocs/edocs&quot; /&gt;\r\n            &lt;/intent-filter&gt;\r\n \r\n[![enter image description here][2]][2]\r\n\r\n[![enter image description here][3]][3]\r\n\r\n\r\n  [1]: https://developer.android.com/training/app-links/verify-site-associations\r\n  [2]: https://i.stack.imgur.com/dPdFG.png\r\n  [3]: https://i.stack.imgur.com/8mlhB.png","title":"Android app link not working on new update OS 12","body":"<p>I follow the <a href=\"https://developer.android.com/training/app-links/verify-site-associations\" rel=\"nofollow noreferrer\">documentation</a> for deep linking. When I test\nthe deep link using <a href=\"https://developers.google.com/digital-asset-links/tools/generator\" rel=\"nofollow noreferrer\">https://developers.google.com/digital-asset-links/tools/generator</a> I got sometimes attached error message and sometimes I got like attached success message and the same happened sometimes redirect me to the the browser and sometimes redirect me to the deep link page.</p>\n<p>This is my manifest configuration</p>\n<pre><code>        &lt;intent-filter android:label=&quot;@string/app_name&quot; android:autoVerify=&quot;true&quot;&gt;\n            &lt;action android:name=&quot;android.intent.action.VIEW&quot; /&gt;\n\n            &lt;category android:name=&quot;android.intent.category.DEFAULT&quot; /&gt;\n            &lt;category android:name=&quot;android.intent.category.BROWSABLE&quot; /&gt;\n\n            &lt;data\n                android:scheme=&quot;https&quot;\n                android:host=&quot;example.com.qa&quot;\n                android:pathPrefix=&quot;/fb/fb&quot; /&gt;\n        &lt;/intent-filter&gt;\n        &lt;intent-filter&gt;\n            &lt;action android:name=&quot;android.intent.action.VIEW&quot; /&gt;\n\n            &lt;category android:name=&quot;android.intent.category.DEFAULT&quot; /&gt;\n            &lt;category android:name=&quot;android.intent.category.BROWSABLE&quot; /&gt;\n\n            &lt;data\n                android:scheme=&quot;https&quot;\n                android:host=&quot;example.com.qa&quot;\n                android:pathPrefix=&quot;/edocs/edocs&quot; /&gt;\n        &lt;/intent-filter&gt;\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/dPdFG.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/dPdFG.png\" alt=\"enter image description here\" /></a></p>\n<p><a href=\"https://i.stack.imgur.com/8mlhB.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/8mlhB.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":["java","regex"],"answers":[{"tags":[],"owner":{"account_id":262968,"reputation":767120,"user_id":548225,"accept_rate":90,"display_name":"anubhava"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1646064964,"creation_date":1646061646,"answer_id":71297188,"question_id":71297098,"body_markdown":"You may use this regex to match single ot multiple conditionals:\r\n\r\n```sh\r\n^\\w+\\.\\w+ *= *\\S+(?: *&amp;&amp; *\\w+\\.\\w+ *= *\\S+)*$\r\n```\r\n\r\n[RegEx Demo][1]\r\n\r\n\r\n  [1]: https://regex101.com/r/w3mQY8/2\r\n\r\nRepetition in `(?: *&amp;&amp; *\\w+\\.\\w+ *= \\S+)*` will let me match 0 or more occurrences of your conditions thus allowing it to match all of your desired expressions.","title":"Write regex pattern in java to work for multiple &amp;&amp; condition","body":"<p>You may use this regex to match single ot multiple conditionals:</p>\n<pre class=\"lang-sh prettyprint-override\"><code>^\\w+\\.\\w+ *= *\\S+(?: *&amp;&amp; *\\w+\\.\\w+ *= *\\S+)*$\n</code></pre>\n<p><a href=\"https://regex101.com/r/w3mQY8/2\" rel=\"nofollow noreferrer\">RegEx Demo</a></p>\n<p>Repetition in <code>(?: *&amp;&amp; *\\w+\\.\\w+ *= \\S+)*</code> will let me match 0 or more occurrences of your conditions thus allowing it to match all of your desired expressions.</p>\n"}],"owner":{"account_id":905431,"reputation":965,"user_id":940441,"accept_rate":37,"display_name":"gogagubi"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":43,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":71297188,"answer_count":1,"score":0,"last_activity_date":1646064964,"creation_date":1646061198,"question_id":71297098,"body_markdown":"This is pattern `^\\w+\\.\\w+ *= *.+$` that works for `parent.child1=value11`. \r\nThis is pattern `^\\w+\\.\\w+ *= *.+ *&amp;&amp; *\\w+\\.\\w+ *= *.+$` that works for this `parent.child1=value1 &amp;&amp; parent.child2=value2`.\r\nIs there an easier way to write a RegEx pattern that will work for both? Even more to work for multiple &amp;&amp; condition(`cond1 &amp;&amp; cond2 &amp;&amp; cond3...`)?","title":"Write regex pattern in java to work for multiple &amp;&amp; condition","body":"<p>This is pattern <code>^\\w+\\.\\w+ *= *.+$</code> that works for <code>parent.child1=value11</code>.\nThis is pattern <code>^\\w+\\.\\w+ *= *.+ *&amp;&amp; *\\w+\\.\\w+ *= *.+$</code> that works for this <code>parent.child1=value1 &amp;&amp; parent.child2=value2</code>.\nIs there an easier way to write a RegEx pattern that will work for both? Even more to work for multiple &amp;&amp; condition(<code>cond1 &amp;&amp; cond2 &amp;&amp; cond3...</code>)?</p>\n"},{"tags":["java","jar","google-cloud-storage","dataflow","google-cloud-shell"],"answers":[{"tags":[],"owner":{"account_id":15760814,"reputation":68973,"user_id":11372593,"display_name":"guillaume blaquiere"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1646064757,"creation_date":1646064757,"answer_id":71297887,"question_id":71294727,"body_markdown":"gs:// isn&#39;t a local file system and Java can&#39;t access it. If you want to do something similar, and you are on a linux environment, you can try to use [GCSFuse][1]. It mounts a GCS bucket as a logical file system on your linux filesystem tree. There are limitations but it should work for JAR\r\n\r\n\r\n  [1]: https://github.com/GoogleCloudPlatform/gcsfuse","title":"Unable to run the jar file stored in GCS bucket using cloud shell command","body":"<p>gs:// isn't a local file system and Java can't access it. If you want to do something similar, and you are on a linux environment, you can try to use <a href=\"https://github.com/GoogleCloudPlatform/gcsfuse\" rel=\"nofollow noreferrer\">GCSFuse</a>. It mounts a GCS bucket as a logical file system on your linux filesystem tree. There are limitations but it should work for JAR</p>\n"}],"owner":{"account_id":15037785,"reputation":540,"user_id":10853669,"display_name":"Joseph N"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":712,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1646064757,"creation_date":1646049710,"question_id":71294727,"body_markdown":"I have stored one jar file in gcs bucket which launches dataflow job. I want to run that jar file from cloud shell command.\r\n\r\nI am using below command to run jar file:\r\n\r\n    java -jar gs://TestBucket/lib/jar_file.jar func123 --runner=dataflow --project=project123 --bigtableInstanceId=bt-instance --bigtableTableId=tab123 --outputPrefix=gs://TestBucket1/data/output123 --stagingLocation=gs://TestBucket1/staging --hashTableOutputDir=gs://TestBucket1/dir1 --tempLocation=gs://TestBucket1/temp --region=us-central1\r\n\r\nAnd getting below error:\r\n\r\n    Error: Unable to access jarfile gs://TestBucket/lib/jar_file.jar\r\n\r\nI have rechecked the jar file path and it is correct. Can anyone help me if this because *&quot;java -jar&quot;* command does not support gs:// file or any bucket permission issue or something else? ","title":"Unable to run the jar file stored in GCS bucket using cloud shell command","body":"<p>I have stored one jar file in gcs bucket which launches dataflow job. I want to run that jar file from cloud shell command.</p>\n<p>I am using below command to run jar file:</p>\n<pre><code>java -jar gs://TestBucket/lib/jar_file.jar func123 --runner=dataflow --project=project123 --bigtableInstanceId=bt-instance --bigtableTableId=tab123 --outputPrefix=gs://TestBucket1/data/output123 --stagingLocation=gs://TestBucket1/staging --hashTableOutputDir=gs://TestBucket1/dir1 --tempLocation=gs://TestBucket1/temp --region=us-central1\n</code></pre>\n<p>And getting below error:</p>\n<pre><code>Error: Unable to access jarfile gs://TestBucket/lib/jar_file.jar\n</code></pre>\n<p>I have rechecked the jar file path and it is correct. Can anyone help me if this because <em>&quot;java -jar&quot;</em> command does not support gs:// file or any bucket permission issue or something else?</p>\n"},{"tags":["java","spring","spring-boot","hibernate"],"comments":[{"owner":{"account_id":231683,"reputation":4218,"user_id":496038,"display_name":"pringi"},"score":0,"creation_date":1646064195,"post_id":71297676,"comment_id":126026452,"body_markdown":"Are you auto-genetaring de DDL from java code or the database exists previouslly?","body":"Are you auto-genetaring de DDL from java code or the database exists previouslly?"},{"owner":{"account_id":12973262,"reputation":610,"user_id":9560002,"display_name":"Arzybek"},"score":0,"creation_date":1646064385,"post_id":71297676,"comment_id":126026521,"body_markdown":"auto generating","body":"auto generating"}],"answers":[{"tags":[],"owner":{"account_id":231683,"reputation":4218,"user_id":496038,"display_name":"pringi"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1646064346,"creation_date":1646064346,"answer_id":71297789,"question_id":71297676,"body_markdown":"The problem is that *name* in `JoinColumn` has value *id*. Change it to **info_id** for example:\r\n\r\n\r\n    @OneToOne(targetEntity = InfoEntity.class, cascade = CascadeType.ALL)\r\n    @JoinColumn(name=&quot;info_id&quot;, referencedColumnName = &quot;id&quot;)\r\n    private InfoEntity info;\r\n\r\nYou `TestEntity` already has a column `id`, so it has to has another name.","title":"HIbernate doesn&#39;t create Foreign key for @OneToOne","body":"<p>The problem is that <em>name</em> in <code>JoinColumn</code> has value <em>id</em>. Change it to <strong>info_id</strong> for example:</p>\n<pre><code>@OneToOne(targetEntity = InfoEntity.class, cascade = CascadeType.ALL)\n@JoinColumn(name=&quot;info_id&quot;, referencedColumnName = &quot;id&quot;)\nprivate InfoEntity info;\n</code></pre>\n<p>You <code>TestEntity</code> already has a column <code>id</code>, so it has to has another name.</p>\n"}],"owner":{"account_id":12973262,"reputation":610,"user_id":9560002,"display_name":"Arzybek"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":593,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":71297789,"answer_count":1,"score":0,"last_activity_date":1646064346,"creation_date":1646063852,"question_id":71297676,"body_markdown":"I have two tables:\r\n```\r\n@Entity\r\npublic class TestEntity {\r\n\r\n    @Id\r\n    @Column(name = &quot;id&quot;)\r\n    private UUID id;\r\n\r\n    @OneToOne(targetEntity = InfoEntity.class, cascade = CascadeType.ALL)\r\n    @JoinColumn(name=&quot;id&quot;, referencedColumnName = &quot;id&quot;)\r\n    private InfoEntity info;\r\n\r\n    ...\r\n}\r\n```\r\n```\r\n@Entity\r\npublic class InfoEntity {\r\n    @Id\r\n    @Column(name = &quot;id&quot;)\r\n    private UUID id;\r\n\r\n    @OneToOne(mappedBy = &quot;info&quot;)\r\n    private TestEntity test;\r\n    \r\n    ...\r\n}\r\n```\r\nBasically I want to define a Foreign Key from ```TestEntity``` to ```InfoEntity``` by id fields which are the same in both tables. The problem is that when I check the database in IntelliJ Idea I don&#39;t see any Foreign Keys in keys section (checked both tables), only their PK&#39;s. Is something wrong with this code? I already set the property as it suggested in another similar question: \r\n```\r\n  jpa:\r\n    properties:\r\n      hibernate:\r\n        dialect: org.hibernate.dialect.PostgreSQLDialect\r\n```","title":"HIbernate doesn&#39;t create Foreign key for @OneToOne","body":"<p>I have two tables:</p>\n<pre><code>@Entity\npublic class TestEntity {\n\n    @Id\n    @Column(name = &quot;id&quot;)\n    private UUID id;\n\n    @OneToOne(targetEntity = InfoEntity.class, cascade = CascadeType.ALL)\n    @JoinColumn(name=&quot;id&quot;, referencedColumnName = &quot;id&quot;)\n    private InfoEntity info;\n\n    ...\n}\n</code></pre>\n<pre><code>@Entity\npublic class InfoEntity {\n    @Id\n    @Column(name = &quot;id&quot;)\n    private UUID id;\n\n    @OneToOne(mappedBy = &quot;info&quot;)\n    private TestEntity test;\n    \n    ...\n}\n</code></pre>\n<p>Basically I want to define a Foreign Key from <code>TestEntity</code> to <code>InfoEntity</code> by id fields which are the same in both tables. The problem is that when I check the database in IntelliJ Idea I don't see any Foreign Keys in keys section (checked both tables), only their PK's. Is something wrong with this code? I already set the property as it suggested in another similar question:</p>\n<pre><code>  jpa:\n    properties:\n      hibernate:\n        dialect: org.hibernate.dialect.PostgreSQLDialect\n</code></pre>\n"},{"tags":["java","spring","unit-testing","kotlin","mockito"],"comments":[{"owner":{"account_id":1535561,"reputation":7664,"user_id":1431720,"accept_rate":89,"display_name":"Robert"},"score":0,"creation_date":1646004213,"post_id":71287988,"comment_id":126011349,"body_markdown":"Please [edit] your question and add what you&#39;ve tried and describe how it didn&#39;t work. See [ask].","body":"Please <a href=\"https://stackoverflow.com/posts/71287988/edit\">edit</a> your question and add what you&#39;ve tried and describe how it didn&#39;t work. See <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a>."}],"answers":[{"tags":[],"owner":{"account_id":3352721,"reputation":1057,"user_id":2816429,"display_name":"HariHaravelan"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1646059616,"creation_date":1646059616,"answer_id":71296746,"question_id":71287988,"body_markdown":"Mocking only works with the injected objects. mocking doesn&#39;t work for those objects created inside the method scope \r\n\r\nYou can abstract out the HTTP calls to a different class\r\n\r\n    class HttpService {\r\n        fun post(url: String, timeOut: Long): HttpResponse {\r\n                return HttpRequest\r\n                .post(url)\r\n                .timeout(timeOut)\r\n                .connectionTimeout(timeOut)\r\n                .send()\r\n\r\n        }\r\n    }\r\n\r\n    class ValidateUrlService {\r\n        val httpService: HttpService\r\n        val TIMEOUT = 5000\r\n    \r\n        fun validateUrl(url: String): RequestVO {\r\n            var response = HttpResponse()\r\n            var timeBefore = Date()\r\n    \r\n            return try{\r\n                response = httpService.post(url, TIMEOUT)\r\n    \r\n                val httpStatus = response.statusCode()\r\n    \r\n                buildResponseDTO(httpStatusToBoolean(httpStatus), httpStatus)\r\n            } catch (ex: Exception) {\r\n                genericExceptionHandler(ex, response.statusCode(), timeBefore)\r\n            }\r\n        }\r\n\r\nNow you should be able to mock the `HttpService` `post` method\r\n","title":"Mock jodd http request and response","body":"<p>Mocking only works with the injected objects. mocking doesn't work for those objects created inside the method scope</p>\n<p>You can abstract out the HTTP calls to a different class</p>\n<pre><code>class HttpService {\n    fun post(url: String, timeOut: Long): HttpResponse {\n            return HttpRequest\n            .post(url)\n            .timeout(timeOut)\n            .connectionTimeout(timeOut)\n            .send()\n\n    }\n}\n\nclass ValidateUrlService {\n    val httpService: HttpService\n    val TIMEOUT = 5000\n\n    fun validateUrl(url: String): RequestVO {\n        var response = HttpResponse()\n        var timeBefore = Date()\n\n        return try{\n            response = httpService.post(url, TIMEOUT)\n\n            val httpStatus = response.statusCode()\n\n            buildResponseDTO(httpStatusToBoolean(httpStatus), httpStatus)\n        } catch (ex: Exception) {\n            genericExceptionHandler(ex, response.statusCode(), timeBefore)\n        }\n    }\n</code></pre>\n<p>Now you should be able to mock the <code>HttpService</code> <code>post</code> method</p>\n"},{"tags":[],"owner":{"account_id":6472712,"reputation":209,"user_id":5012326,"display_name":"IlTera"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1646064185,"creation_date":1646064185,"answer_id":71297755,"question_id":71287988,"body_markdown":"Your first error is here\r\n\r\n    @Mock\r\n    var request: HttpRequest = HttpRequest.post(ArgumentMatchers.anyString())\r\n\r\nBecause you are assigning to request a non mock object\r\n\r\nIf you want to use the annotations you must write you test like this:\r\n(I&#39;m assuming that you are using JUnit5)\r\n\r\n     @ExtendWith(MockitoExtension::class)\r\n     internal class ValidateUrlServiceTest{\r\n        private val service = ValidateUrlService()\r\n    \r\n        @Mock\r\n        lateinit var request: HttpRequest\r\n    \r\n        @Test\r\n        fun test(){\r\n            Mockito.`when`(request.send()).thenReturn(HttpResponse().statusCode(555))\r\n            service.validateUrl(&quot;https://www.example.com&quot;)\r\n        }\r\n    \r\n    }\r\n\r\nThe second one is that you are trying to mock an object that is created inside the method you are testing\r\n\r\nYou must provide an instance of HttpRequest through dependency injection (maybe using a provider injected as a constructor argument to ValidateUrlService)\r\n\r\n\r\nSmall tip:\r\nif you want to avoid the &quot;ugly&quot; syntax ``` Mockito.`when` ``` you can use [mokito kotlin library][1] or [mockk library][2], both of them wrap mockito in with a more fluent kotlin way to write tests\r\n\r\n  [1]: https://mvnrepository.com/artifact/org.mockito.kotlin/mockito-kotlin/4.0.0\r\n  [2]: https://mvnrepository.com/artifact/io.mockk/mockk/1.12.2","title":"Mock jodd http request and response","body":"<p>Your first error is here</p>\n<pre><code>@Mock\nvar request: HttpRequest = HttpRequest.post(ArgumentMatchers.anyString())\n</code></pre>\n<p>Because you are assigning to request a non mock object</p>\n<p>If you want to use the annotations you must write you test like this:\n(I'm assuming that you are using JUnit5)</p>\n<pre><code> @ExtendWith(MockitoExtension::class)\n internal class ValidateUrlServiceTest{\n    private val service = ValidateUrlService()\n\n    @Mock\n    lateinit var request: HttpRequest\n\n    @Test\n    fun test(){\n        Mockito.`when`(request.send()).thenReturn(HttpResponse().statusCode(555))\n        service.validateUrl(&quot;https://www.example.com&quot;)\n    }\n\n}\n</code></pre>\n<p>The second one is that you are trying to mock an object that is created inside the method you are testing</p>\n<p>You must provide an instance of HttpRequest through dependency injection (maybe using a provider injected as a constructor argument to ValidateUrlService)</p>\n<p>Small tip:\nif you want to avoid the &quot;ugly&quot; syntax <code>Mockito.`when`</code> you can use <a href=\"https://mvnrepository.com/artifact/org.mockito.kotlin/mockito-kotlin/4.0.0\" rel=\"nofollow noreferrer\">mokito kotlin library</a> or <a href=\"https://mvnrepository.com/artifact/io.mockk/mockk/1.12.2\" rel=\"nofollow noreferrer\">mockk library</a>, both of them wrap mockito in with a more fluent kotlin way to write tests</p>\n"}],"owner":{"account_id":24397274,"reputation":11,"user_id":18326483,"display_name":"BillyJh"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":376,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1646064185,"creation_date":1645991411,"question_id":71287988,"body_markdown":"I&#39;m using Jodd http to make requests. Is there any way to create the mock so the request doesn&#39;t happen during unit tests? I&#39;ve already tried to create a mock of the `send()` method but without success.\r\n\r\n```kotlin\r\n@Service\r\nclass ValidateUrlService {\r\n    val TIMEOUT = 5000\r\n\r\n    fun validateUrl(url: String): RequestVO {\r\n        var response = HttpResponse()\r\n        var timeBefore = Date()\r\n\r\n        return try{\r\n            response = HttpRequest\r\n                .post(url)\r\n                .timeout(TIMEOUT)\r\n                .connectionTimeout(TIMEOUT)\r\n                .send()\r\n\r\n            val httpStatus = response.statusCode()\r\n\r\n            buildResponseDTO(httpStatusToBoolean(httpStatus), httpStatus)\r\n        } catch (ex: Exception) {\r\n            genericExceptionHandler(ex, response.statusCode(), timeBefore)\r\n        }\r\n    }\r\n```\r\n\r\n\r\nMy test\r\n```\r\ninternal class ValidateUrlServiceTest{\r\n    private val service = ValidateUrlService()\r\n\r\n    @Mock\r\n    var request: HttpRequest = HttpRequest.post(ArgumentMatchers.anyString())\r\n\r\n    @Test\r\n    fun test(){\r\n        Mockito.`when`(request.send()).thenReturn(HttpResponse().statusCode(555))\r\n        service.validateUrl(&quot;https://www.example.com&quot;)\r\n    }\r\n\r\n}\r\n```\r\n\r\nError: \r\n\r\n   \r\n```\r\nYou cannot use argument matchers outside of verification or stubbing.\r\nExamples of correct usage of argument matchers:\r\nwhen(mock.get(anyInt())).thenReturn(null);\r\ndoThrow(new RuntimeException()).when(mock).someVoidMethod(any());\r\nverify(mock).someMethod(contains(&quot;foo&quot;))\r\n```","title":"Mock jodd http request and response","body":"<p>I'm using Jodd http to make requests. Is there any way to create the mock so the request doesn't happen during unit tests? I've already tried to create a mock of the <code>send()</code> method but without success.</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>@Service\nclass ValidateUrlService {\n    val TIMEOUT = 5000\n\n    fun validateUrl(url: String): RequestVO {\n        var response = HttpResponse()\n        var timeBefore = Date()\n\n        return try{\n            response = HttpRequest\n                .post(url)\n                .timeout(TIMEOUT)\n                .connectionTimeout(TIMEOUT)\n                .send()\n\n            val httpStatus = response.statusCode()\n\n            buildResponseDTO(httpStatusToBoolean(httpStatus), httpStatus)\n        } catch (ex: Exception) {\n            genericExceptionHandler(ex, response.statusCode(), timeBefore)\n        }\n    }\n</code></pre>\n<p>My test</p>\n<pre><code>internal class ValidateUrlServiceTest{\n    private val service = ValidateUrlService()\n\n    @Mock\n    var request: HttpRequest = HttpRequest.post(ArgumentMatchers.anyString())\n\n    @Test\n    fun test(){\n        Mockito.`when`(request.send()).thenReturn(HttpResponse().statusCode(555))\n        service.validateUrl(&quot;https://www.example.com&quot;)\n    }\n\n}\n</code></pre>\n<p>Error:</p>\n<pre><code>You cannot use argument matchers outside of verification or stubbing.\nExamples of correct usage of argument matchers:\nwhen(mock.get(anyInt())).thenReturn(null);\ndoThrow(new RuntimeException()).when(mock).someVoidMethod(any());\nverify(mock).someMethod(contains(&quot;foo&quot;))\n</code></pre>\n"},{"tags":["java","multithreading","jmeter","jedis"],"answers":[{"tags":[],"owner":{"account_id":3460456,"reputation":162728,"user_id":2897748,"display_name":"Dmitri T"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1646063511,"creation_date":1646063511,"answer_id":71297601,"question_id":71297283,"body_markdown":"Maybe you should call [JedisPool.returnBrokenResource()][1] somewhere in [finally][2] block and catching more specific exception? \r\n\r\nyou can also consider using [Jedis.close()][3] instead. \r\n\r\nBy the way, have you considered using [Redis Data Set Config][4] instead of writing the custom code? \r\n\r\n\r\n  [1]: https://www.javadoc.io/static/redis.clients/jedis/3.0.0/redis/clients/jedis/JedisPool.html#returnBrokenResource-redis.clients.jedis.Jedis-\r\n  [2]: https://docs.oracle.com/javase/tutorial/essential/exceptions/finally.html\r\n  [3]: https://www.javadoc.io/static/redis.clients/jedis/3.0.0/redis/clients/jedis/Jedis.html#close--\r\n  [4]: https://www.blazemeter.com/blog/jmeters-redis-data-set-an-introduction","title":"WARN r.c.j.JedisFactory: Error while close redis.clients.jedis.exceptions.JedisException: Could not return the broken resource to the pool","body":"<p>Maybe you should call <a href=\"https://www.javadoc.io/static/redis.clients/jedis/3.0.0/redis/clients/jedis/JedisPool.html#returnBrokenResource-redis.clients.jedis.Jedis-\" rel=\"nofollow noreferrer\">JedisPool.returnBrokenResource()</a> somewhere in <a href=\"https://docs.oracle.com/javase/tutorial/essential/exceptions/finally.html\" rel=\"nofollow noreferrer\">finally</a> block and catching more specific exception?</p>\n<p>you can also consider using <a href=\"https://www.javadoc.io/static/redis.clients/jedis/3.0.0/redis/clients/jedis/Jedis.html#close--\" rel=\"nofollow noreferrer\">Jedis.close()</a> instead.</p>\n<p>By the way, have you considered using <a href=\"https://www.blazemeter.com/blog/jmeters-redis-data-set-an-introduction\" rel=\"nofollow noreferrer\">Redis Data Set Config</a> instead of writing the custom code?</p>\n"}],"owner":{"account_id":12651820,"reputation":7,"user_id":9195679,"display_name":"USER"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1367,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":71297601,"answer_count":1,"score":0,"last_activity_date":1646063511,"creation_date":1646062047,"question_id":71297283,"body_markdown":"I get the following error\r\n\r\n    WARN r.c.j.JedisFactory: Error while close\r\n    redis.clients.jedis.exceptions.JedisException: Could not return the broken resource to the pool\r\n\r\nPlease tell me how it can be fixed. Because I get this error regularly. I think that there is an additional need to wrap something in &quot;try&quot; and &quot;catch&quot;. Or is there a problem in something else ? I will be glad to help.\r\n\r\nThe code looks like this.\r\n\r\n    import redis.clients.jedis.Jedis;\r\n    import java.util.ArrayList;\r\n    import java.util.List;\r\n    import redis.clients.jedis.Response;\r\n    import redis.clients.jedis.Transaction;\r\n    import redis.clients.jedis.JedisPool;\r\n    import redis.clients.jedis.JedisPoolConfig;\r\n    import redis.clients.jedis.exceptions.JedisConnectionException;\r\n    import java.time.Duration;\r\n    import java.util.Objects;\r\n    import java.util.concurrent.ThreadLocalRandom;\r\n    import org.apache.jmeter.samplers.SampleResult;\r\n\r\n    JedisPool jedisPool = (JedisPool) props.get(&#39;jedisPool&#39;);\r\n    Jedis jedis = jedisPool.getResource();\r\n    List&lt;Object&gt; execResult = null;\r\n\r\n    String GetIncrNumber;\r\n    int countTry = 0;\r\n\r\n     while(execResult == null) {\r\n                try{\r\n                    jedis.watch(&quot;Number&quot;);\r\n                    Transaction t = jedis.multi();\r\n                    Response&lt;String&gt; rs = t.incr(&quot;Number&quot;);\r\n                    execResult = t.exec();\r\n                    GetIncrNumber = rs.get();\r\n                    t.close();\r\n                    t = null;\r\n                    rs = null;\r\n                } catch (Exception e){\r\n                    countTry++;\r\n                    sleep(50);\r\n                    if(countTry &gt; 15){\r\n                        log.error(&quot;\\r\\nSome error (countTry = &quot; + countTry + &quot;) GetIncrNumber: &quot; + e.getMessage() + &quot;\\r\\n&quot;);\r\n                    }\r\n              }  \r\n\r\n    }\r\n\r\n\r\n    execResult.clear();\r\n    vars.put(&quot;GetIncrNumber_JM&quot;, GetIncrNumber.toString()); \r\n\r\n    //log.info(GetIncrNumber)\r\n      \r\n    jedisPool.returnResource(jedis);\r\n\r\n    execResult = null;\r\n    jedis = null;\r\n    jedisPool = null;\r\n\r\n","title":"WARN r.c.j.JedisFactory: Error while close redis.clients.jedis.exceptions.JedisException: Could not return the broken resource to the pool","body":"<p>I get the following error</p>\n<pre><code>WARN r.c.j.JedisFactory: Error while close\nredis.clients.jedis.exceptions.JedisException: Could not return the broken resource to the pool\n</code></pre>\n<p>Please tell me how it can be fixed. Because I get this error regularly. I think that there is an additional need to wrap something in &quot;try&quot; and &quot;catch&quot;. Or is there a problem in something else ? I will be glad to help.</p>\n<p>The code looks like this.</p>\n<pre><code>import redis.clients.jedis.Jedis;\nimport java.util.ArrayList;\nimport java.util.List;\nimport redis.clients.jedis.Response;\nimport redis.clients.jedis.Transaction;\nimport redis.clients.jedis.JedisPool;\nimport redis.clients.jedis.JedisPoolConfig;\nimport redis.clients.jedis.exceptions.JedisConnectionException;\nimport java.time.Duration;\nimport java.util.Objects;\nimport java.util.concurrent.ThreadLocalRandom;\nimport org.apache.jmeter.samplers.SampleResult;\n\nJedisPool jedisPool = (JedisPool) props.get('jedisPool');\nJedis jedis = jedisPool.getResource();\nList&lt;Object&gt; execResult = null;\n\nString GetIncrNumber;\nint countTry = 0;\n\n while(execResult == null) {\n            try{\n                jedis.watch(&quot;Number&quot;);\n                Transaction t = jedis.multi();\n                Response&lt;String&gt; rs = t.incr(&quot;Number&quot;);\n                execResult = t.exec();\n                GetIncrNumber = rs.get();\n                t.close();\n                t = null;\n                rs = null;\n            } catch (Exception e){\n                countTry++;\n                sleep(50);\n                if(countTry &gt; 15){\n                    log.error(&quot;\\r\\nSome error (countTry = &quot; + countTry + &quot;) GetIncrNumber: &quot; + e.getMessage() + &quot;\\r\\n&quot;);\n                }\n          }  \n\n}\n\n\nexecResult.clear();\nvars.put(&quot;GetIncrNumber_JM&quot;, GetIncrNumber.toString()); \n\n//log.info(GetIncrNumber)\n  \njedisPool.returnResource(jedis);\n\nexecResult = null;\njedis = null;\njedisPool = null;\n</code></pre>\n"},{"tags":["java","spring-boot","spring-data-jpa"],"answers":[{"tags":[],"owner":{"account_id":12640843,"reputation":485,"user_id":9188403,"display_name":"S-Wing"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1646063363,"creation_date":1646063363,"answer_id":71297578,"question_id":71219473,"body_markdown":"At the end I have to change the method signature to use String, Long ecc. as input instead of my custom object ( PhaseBean ); in this way I can use the &quot;normal&quot; sintax &quot;:param&quot; and everything works (I move the null controls of the PhaseBean objects in the caller method):\r\n\r\n    @Query(value= \r\n    &quot; ... \r\n    and ( :subPhaseId is null or ...   //row2\r\n    ... &quot;\r\n    )\r\n    List&lt;Phase&gt; load(\r\n    ...\r\n    @Param(&quot;phaseId&quot;) Long phaseId, @Param(&quot;subPhaseId&quot;) Long subPhaseId\r\n    ...\r\n    );\r\n\r\n","title":"Null check on input object in spring boot jpa query","body":"<p>At the end I have to change the method signature to use String, Long ecc. as input instead of my custom object ( PhaseBean ); in this way I can use the &quot;normal&quot; sintax &quot;:param&quot; and everything works (I move the null controls of the PhaseBean objects in the caller method):</p>\n<pre><code>@Query(value= \n&quot; ... \nand ( :subPhaseId is null or ...   //row2\n... &quot;\n)\nList&lt;Phase&gt; load(\n...\n@Param(&quot;phaseId&quot;) Long phaseId, @Param(&quot;subPhaseId&quot;) Long subPhaseId\n...\n);\n</code></pre>\n"}],"owner":{"account_id":12640843,"reputation":485,"user_id":9188403,"display_name":"S-Wing"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1229,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1646063363,"creation_date":1645525131,"question_id":71219473,"body_markdown":"I&#39;ve got this object:\r\n\r\n    @Getter\r\n    @Setter\r\n    public class PhaseBean {\r\n       private Long id;\r\n       private String name;\r\n       private PhaseBean subPhase;\r\n    }\r\n\r\nthat is passed as input to this repo method (simplified):\r\n\r\n    @Query(value= \r\n      &quot; ... \r\n        and ( :#{#phaseBean.id} is null or :#{#phaseBean.name} is null ....                  //row1\r\n        and ( :#{#phaseBean.subPhase} is null or :#{#phaseBean.subPhase.id} is null or ...   //row2\r\n        ... &quot;\r\n    )\r\n    List&lt;Phase&gt; load(@Param(&quot;phaseBean&quot;) PhaseBean phaseBean);\r\n\r\nIn the test that I&#39;ve done, the phaseBean is valorized in this way:\r\n\r\n    id = 3 \r\n    name = null\r\n    subPhase = null\r\n\r\nand when the repo method is executed, I get this error:\r\n\r\n    SpelEvaluationException: EL1007E: Property or field &#39;id&#39; cannot be found on null\r\n\r\nI did 2 different tests:\r\n\r\n 1. comment &quot;row1&quot; of the query and execute the method -&gt; same error\r\n 2. comment &quot;row2&quot; of the query and execute the method -&gt; method works!\r\n\r\nSo I&#39;m sure that the problem is that the check **:#{#phaseBean.subPhase} is null** is not working for the inner object.\r\n&lt;br&gt;Any suggestion? Thanks a lot.","title":"Null check on input object in spring boot jpa query","body":"<p>I've got this object:</p>\n<pre><code>@Getter\n@Setter\npublic class PhaseBean {\n   private Long id;\n   private String name;\n   private PhaseBean subPhase;\n}\n</code></pre>\n<p>that is passed as input to this repo method (simplified):</p>\n<pre><code>@Query(value= \n  &quot; ... \n    and ( :#{#phaseBean.id} is null or :#{#phaseBean.name} is null ....                  //row1\n    and ( :#{#phaseBean.subPhase} is null or :#{#phaseBean.subPhase.id} is null or ...   //row2\n    ... &quot;\n)\nList&lt;Phase&gt; load(@Param(&quot;phaseBean&quot;) PhaseBean phaseBean);\n</code></pre>\n<p>In the test that I've done, the phaseBean is valorized in this way:</p>\n<pre><code>id = 3 \nname = null\nsubPhase = null\n</code></pre>\n<p>and when the repo method is executed, I get this error:</p>\n<pre><code>SpelEvaluationException: EL1007E: Property or field 'id' cannot be found on null\n</code></pre>\n<p>I did 2 different tests:</p>\n<ol>\n<li>comment &quot;row1&quot; of the query and execute the method -&gt; same error</li>\n<li>comment &quot;row2&quot; of the query and execute the method -&gt; method works!</li>\n</ol>\n<p>So I'm sure that the problem is that the check <strong>:#{#phaseBean.subPhase} is null</strong> is not working for the inner object.\n<br>Any suggestion? Thanks a lot.</p>\n"},{"tags":["java","android","firebase-realtime-database"],"comments":[{"owner":{"account_id":6819231,"reputation":132841,"user_id":5246885,"accept_rate":78,"display_name":"Alex Mamo"},"score":0,"creation_date":1646043391,"post_id":71293358,"comment_id":126018768,"body_markdown":"Are you allowed to change the database schema?","body":"Are you allowed to change the database schema?"},{"owner":{"account_id":24403496,"reputation":5,"user_id":18331925,"display_name":"Adrian"},"score":0,"creation_date":1646043593,"post_id":71293358,"comment_id":126018846,"body_markdown":"yes we are allowed to do our own database schema","body":"yes we are allowed to do our own database schema"}],"answers":[{"tags":[],"owner":{"account_id":6819231,"reputation":132841,"user_id":5246885,"accept_rate":78,"display_name":"Alex Mamo"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1646052486,"creation_date":1646045293,"answer_id":71293824,"question_id":71293358,"body_markdown":"Your actual database doesn&#39;t allow you to simply query the data. Since you&#39;re already storing the date into the `date` filed, you can remove one level in your three like this:\r\n\r\n    Firebase-root\r\n      |\r\n      --- CrimeReport\r\n            |\r\n            --- Baltazar\r\n                  |\r\n                  --- Robbery\r\n                        |\r\n                        --- $pushedId\r\n                               |\r\n                               --- brgy: &quot;Baltazar&quot;\r\n                               |\r\n                               --- date: &quot;Feb 14, 2022&quot;\r\n                               |\r\n                               --- \\\\The other fields.\r\n\r\nNow to be able to read the data, you need to create a reference that points exactly to the `Robbery` node and then attach a listener as below:\r\n\r\n\tDatabaseReference db = FirebaseDatabase.getInstance().getReference();\r\n\tDatabaseReference robberyRef = db.child(&quot;CrimeReport&quot;).child(&quot;Baltazar&quot;).child(&quot;Robbery&quot;);\r\n    robberyRef.get().addOnCompleteListener(new OnCompleteListener&lt;DataSnapshot&gt;() {\r\n\t\t@Override\r\n\t\tpublic void onComplete(@NonNull Task&lt;DataSnapshot&gt; task) {\r\n\t\t\tif (task.isSuccessful()) {\r\n                DataSnapshot snapshot = task.getResult();\r\n\t\t\t\tfor (DataSnapshot ds : snapshot.getChildren()) {\r\n\t\t\t\t\tString brgy = ds.child(&quot;brgy&quot;).getValue(String.class);\r\n\t\t\t\t\tLog.d(&quot;TAG&quot;, brgy);\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tLog.d(&quot;TAG&quot;, task.getException().getMessage()); //Never ignore potential errors!\r\n\t\t\t}\r\n\t\t}\r\n\t});\r\n\r\nThe result in the logcat will be:\r\n\r\n    Baltazar\r\n\r\nIn the same way, I read the value of the `brgy` field, you can also read the remaining ones.\r\n\r\nIf you want to map the result into an object of type `FireStoreData`, then instead of reading each value, you can map it directly using:\r\n\r\n    FireStoreData data = ds.getValue(FireStoreData.class);\r\n    Log.d(&quot;TAG&quot;, data.getBrgy());\r\n\r\nThis will produce the same result as above.","title":"How to retrive as custom object using Firebase RTDB","body":"<p>Your actual database doesn't allow you to simply query the data. Since you're already storing the date into the <code>date</code> filed, you can remove one level in your three like this:</p>\n<pre><code>Firebase-root\n  |\n  --- CrimeReport\n        |\n        --- Baltazar\n              |\n              --- Robbery\n                    |\n                    --- $pushedId\n                           |\n                           --- brgy: &quot;Baltazar&quot;\n                           |\n                           --- date: &quot;Feb 14, 2022&quot;\n                           |\n                           --- \\\\The other fields.\n</code></pre>\n<p>Now to be able to read the data, you need to create a reference that points exactly to the <code>Robbery</code> node and then attach a listener as below:</p>\n<pre><code>DatabaseReference db = FirebaseDatabase.getInstance().getReference();\nDatabaseReference robberyRef = db.child(&quot;CrimeReport&quot;).child(&quot;Baltazar&quot;).child(&quot;Robbery&quot;);\nrobberyRef.get().addOnCompleteListener(new OnCompleteListener&lt;DataSnapshot&gt;() {\n    @Override\n    public void onComplete(@NonNull Task&lt;DataSnapshot&gt; task) {\n        if (task.isSuccessful()) {\n            DataSnapshot snapshot = task.getResult();\n            for (DataSnapshot ds : snapshot.getChildren()) {\n                String brgy = ds.child(&quot;brgy&quot;).getValue(String.class);\n                Log.d(&quot;TAG&quot;, brgy);\n            }\n        } else {\n            Log.d(&quot;TAG&quot;, task.getException().getMessage()); //Never ignore potential errors!\n        }\n    }\n});\n</code></pre>\n<p>The result in the logcat will be:</p>\n<pre><code>Baltazar\n</code></pre>\n<p>In the same way, I read the value of the <code>brgy</code> field, you can also read the remaining ones.</p>\n<p>If you want to map the result into an object of type <code>FireStoreData</code>, then instead of reading each value, you can map it directly using:</p>\n<pre><code>FireStoreData data = ds.getValue(FireStoreData.class);\nLog.d(&quot;TAG&quot;, data.getBrgy());\n</code></pre>\n<p>This will produce the same result as above.</p>\n"}],"owner":{"account_id":24403496,"reputation":5,"user_id":18331925,"display_name":"Adrian"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":55,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":71293824,"answer_count":1,"score":0,"last_activity_date":1646063228,"creation_date":1646043036,"question_id":71293358,"body_markdown":"    public class FireStoreData  {\r\n\r\n    private String brgy;\r\n    private String street;\r\n    private String date;\r\n    private String  time;\r\n    private GeoPoint location;\r\n    private String item;\r\n\r\n\r\n    public FireStoreData(){\r\n\r\n    }\r\n\r\n    public FireStoreData(String brgy, String street, String date, String time, GeoPoint location, String item) {\r\n        .....\r\n    }\r\n\r\n\r\n...\r\n\r\n\r\nHere is my database\r\n[my database structure][1]\r\n\r\n\r\nThis is my code for retrieving data\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n     databaseReference = FirebaseDatabase.getInstance().getReference();\r\n        databaseReference.child( &quot;CrimeReport&quot; ).get().addOnCompleteListener( new OnCompleteListener&lt;DataSnapshot&gt;() {\r\n            @Override\r\n            public void onComplete(@NonNull Task&lt;DataSnapshot&gt; task) {\r\n                if (!task.isSuccessful()) {\r\n\r\n                    Log.e(&quot;firebase&quot;, &quot;Error getting data&quot;, task.getException());\r\n                }\r\n                else {\r\n\r\n\r\n                    Toast.makeText( requireContext(), &quot;Data&quot;+ task.getResult().getValue(), Toast.LENGTH_SHORT ).show();\r\n                    Log.d(&quot;firebase&quot;, String.valueOf(task.getResult().getValue()));\r\n                }\r\n            }\r\n        } );\r\n\r\nThis is the received data.\r\n\r\n     {Palatie={Robbery={Report={date=02/28/22, item=Robbery, street=Santos, location={latitude=14.561677776545071, longitude=121.08633846044542}, time=12:0 AM, brgy=Palatie}}, Hijacking={Report={date=02/23/22, item=Hijacking, street=Santos, location={latitude=14.561677776545071, longitude=121.08633846044542}, time=12:0 AM, brgy=Palatie}}}\r\n\r\n  [1]: https://i.stack.imgur.com/YvTRr.png","title":"How to retrive as custom object using Firebase RTDB","body":"<pre><code>public class FireStoreData  {\n\nprivate String brgy;\nprivate String street;\nprivate String date;\nprivate String  time;\nprivate GeoPoint location;\nprivate String item;\n\n\npublic FireStoreData(){\n\n}\n\npublic FireStoreData(String brgy, String street, String date, String time, GeoPoint location, String item) {\n    .....\n}\n</code></pre>\n<p>...</p>\n<p>Here is my database\n<a href=\"https://i.stack.imgur.com/YvTRr.png\" rel=\"nofollow noreferrer\">my database structure</a></p>\n<p>This is my code for retrieving data</p>\n<pre><code> databaseReference = FirebaseDatabase.getInstance().getReference();\n    databaseReference.child( &quot;CrimeReport&quot; ).get().addOnCompleteListener( new OnCompleteListener&lt;DataSnapshot&gt;() {\n        @Override\n        public void onComplete(@NonNull Task&lt;DataSnapshot&gt; task) {\n            if (!task.isSuccessful()) {\n\n                Log.e(&quot;firebase&quot;, &quot;Error getting data&quot;, task.getException());\n            }\n            else {\n\n\n                Toast.makeText( requireContext(), &quot;Data&quot;+ task.getResult().getValue(), Toast.LENGTH_SHORT ).show();\n                Log.d(&quot;firebase&quot;, String.valueOf(task.getResult().getValue()));\n            }\n        }\n    } );\n</code></pre>\n<p>This is the received data.</p>\n<pre><code> {Palatie={Robbery={Report={date=02/28/22, item=Robbery, street=Santos, location={latitude=14.561677776545071, longitude=121.08633846044542}, time=12:0 AM, brgy=Palatie}}, Hijacking={Report={date=02/23/22, item=Hijacking, street=Santos, location={latitude=14.561677776545071, longitude=121.08633846044542}, time=12:0 AM, brgy=Palatie}}}\n</code></pre>\n"},{"tags":["java","jquery","html"],"comments":[{"owner":{"account_id":6151821,"reputation":4968,"user_id":4796021,"display_name":"David P&#233;rez Cabrera"},"score":0,"creation_date":1452984060,"post_id":34832901,"comment_id":57407473,"body_markdown":"http://stackoverflow.com/a/1341133/4796021","body":"<a href=\"http://stackoverflow.com/a/1341133/4796021\">stackoverflow.com/a/1341133/4796021</a>"},{"owner":{"account_id":7651210,"reputation":11,"user_id":5799869,"display_name":"Kkris"},"score":0,"creation_date":1452988168,"post_id":34832901,"comment_id":57408485,"body_markdown":"Thanks . I did try that but does not seem to work. Also does this work when we make a ajax call from a html page and the response from the server is set not to cache?","body":"Thanks . I did try that but does not seem to work. Also does this work when we make a ajax call from a html page and the response from the server is set not to cache?"}],"answers":[{"tags":[],"owner":{"account_id":16861791,"reputation":105,"user_id":13756694,"display_name":"Jyotsna Masand"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1646062697,"creation_date":1646062697,"answer_id":71297428,"question_id":34832901,"body_markdown":"Writing only ```response.setHeader(&quot;Cache-Control&quot;,&quot;no-store&quot;);``` worked for me.\r\n\r\nTried running my Java application on Chrome and Edge, and the back button showed no signs of caching with the above line of code.\r\n\r\nI used ```Http 1.2``` in my application.","title":"The response.setheader on a java servlet does not disable browser cache","body":"<p>Writing only <code>response.setHeader(&quot;Cache-Control&quot;,&quot;no-store&quot;);</code> worked for me.</p>\n<p>Tried running my Java application on Chrome and Edge, and the back button showed no signs of caching with the above line of code.</p>\n<p>I used <code>Http 1.2</code> in my application.</p>\n"}],"owner":{"account_id":7651210,"reputation":11,"user_id":5799869,"display_name":"Kkris"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":622,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1646062697,"creation_date":1452983729,"question_id":34832901,"body_markdown":"\r\n*What I am trying to do* \r\n\r\nGoal\r\n 1.  Not allow the browser to cache responses from the server\r\n 2. After session logout the back button should not bring the user to a cached page\r\n\r\n*What I have done so far*\r\n\r\nIn my web app, i have a login page that authenticates a user and then routes to another page via the Login servlet. In the Login servlet I have set the response header to not cache the html pages. This does not work.\r\n\r\nCurrently I  use the below in the doPost method of the Login servlet \r\n\r\n    response.setHeader(&quot;Cache-control&quot;,&quot;no-cache, no-store, must-revalidate&quot;);\r\n    response.setHeader(&quot;Pragma&quot;,&quot;no-cache&quot;);\r\n    response.setHeader(&quot;max-age&quot;, &quot;-1&quot;);\r\n    response.setDateHeader(&quot;Expires&quot;, 0);\r\n\r\n\r\n*Results*\r\nThe html page header (from google chrome dev tools ) shows this\r\n\r\n&gt; Accept-Ranges:bytes Content-Length:8404 Content-Type:text/html\r\n&gt; Date:Sat, 16 Jan 2016 22:26:57 GMT ETag:W/&quot;8404-1452983191066&quot;\r\n&gt; Last-Modified:Sat, 16 Jan 2016 22:26:31 GMT Server:Apache-Coyote/1.1\r\n\r\n\r\nAny suggestions people.. Thanks in advance for you time?","title":"The response.setheader on a java servlet does not disable browser cache","body":"<p><em>What I am trying to do</em> </p>\n\n<p>Goal\n 1.  Not allow the browser to cache responses from the server\n 2. After session logout the back button should not bring the user to a cached page</p>\n\n<p><em>What I have done so far</em></p>\n\n<p>In my web app, i have a login page that authenticates a user and then routes to another page via the Login servlet. In the Login servlet I have set the response header to not cache the html pages. This does not work.</p>\n\n<p>Currently I  use the below in the doPost method of the Login servlet </p>\n\n<pre><code>response.setHeader(\"Cache-control\",\"no-cache, no-store, must-revalidate\");\nresponse.setHeader(\"Pragma\",\"no-cache\");\nresponse.setHeader(\"max-age\", \"-1\");\nresponse.setDateHeader(\"Expires\", 0);\n</code></pre>\n\n<p><em>Results</em>\nThe html page header (from google chrome dev tools ) shows this</p>\n\n<blockquote>\n  <p>Accept-Ranges:bytes Content-Length:8404 Content-Type:text/html\n  Date:Sat, 16 Jan 2016 22:26:57 GMT ETag:W/\"8404-1452983191066\"\n  Last-Modified:Sat, 16 Jan 2016 22:26:31 GMT Server:Apache-Coyote/1.1</p>\n</blockquote>\n\n<p>Any suggestions people.. Thanks in advance for you time?</p>\n"},{"tags":["java","arraylist","indexoutofboundsexception","defensive-programming"],"comments":[{"owner":{"account_id":1352170,"reputation":34246,"user_id":1291492,"accept_rate":100,"display_name":"ControlAltDel"},"score":0,"creation_date":1646054543,"post_id":71295603,"comment_id":126022444,"body_markdown":"what is ArrayList.rangeCheckForAdd() ??","body":"what is ArrayList.rangeCheckForAdd() ??"},{"owner":{"account_id":1352170,"reputation":34246,"user_id":1291492,"accept_rate":100,"display_name":"ControlAltDel"},"score":0,"creation_date":1646054563,"post_id":71295603,"comment_id":126022453,"body_markdown":"what is java.util.Arrays.ArrayList ??","body":"what is java.util.Arrays.ArrayList ??"},{"owner":{"account_id":1352170,"reputation":34246,"user_id":1291492,"accept_rate":100,"display_name":"ControlAltDel"},"score":0,"creation_date":1646054636,"post_id":71295603,"comment_id":126022481,"body_markdown":"In any case. ArrayList&#39;s implementation is how how the programming team at Sun / Oracle chose to do it. It&#39;s honestly as simple an answer as that","body":"In any case. ArrayList&#39;s implementation is how how the programming team at Sun / Oracle chose to do it. It&#39;s honestly as simple an answer as that"},{"owner":{"account_id":17835,"reputation":303895,"user_id":40342,"accept_rate":62,"display_name":"Joachim Sauer"},"score":0,"creation_date":1646055704,"post_id":71295603,"comment_id":126022879,"body_markdown":"Note that `ArrayIndexOutOfBoundsException` **is-a** `IndexOutOfBoundsException` and the spec just requires an IOOBE to be thrown, so by not checking for negative values, one unnecessary check is avoided (this may not actually result in higher performance, because the runtime is pretty good at optimizing unnecessary range checks away).","body":"Note that <code>ArrayIndexOutOfBoundsException</code> <b>is-a</b> <code>IndexOutOfBoundsException</code> and the spec just requires an IOOBE to be thrown, so by not checking for negative values, one unnecessary check is avoided (this may not actually result in higher performance, because the runtime is pretty good at optimizing unnecessary range checks away)."},{"owner":{"account_id":3116234,"reputation":9296,"user_id":2636929,"display_name":"Stultuske"},"score":0,"creation_date":1646056151,"post_id":71295603,"comment_id":126023054,"body_markdown":"checking for a negative index? an index can&#39;t be negative","body":"checking for a negative index? an index can&#39;t be negative"},{"owner":{"account_id":22057425,"reputation":135,"user_id":16320675,"display_name":"user16320675"},"score":1,"creation_date":1646056238,"post_id":71295603,"comment_id":126023085,"body_markdown":"&quot;Why doesn&#39;t ArrayList.rangeCheck() check for negative index?&quot; The answer is in the source-code comment yourself included: &quot;It is always used immediately prior to an array access, which throws an ArrayIndexOutOfBoundsException if index is negative.&quot;","body":"&quot;Why doesn&#39;t ArrayList.rangeCheck() check for negative index?&quot; The answer is in the source-code comment yourself included: &quot;It is always used immediately prior to an array access, which throws an ArrayIndexOutOfBoundsException if index is negative.&quot;"},{"owner":{"account_id":7909307,"reputation":409,"user_id":5973816,"display_name":"Poison"},"score":0,"creation_date":1646056308,"post_id":71295603,"comment_id":126023108,"body_markdown":"@Stultuske The `rangeCheckForAdd` method in the `java.util.ArrayList` checks for negative index but the `rangeCheck` method does not.","body":"@Stultuske The <code>rangeCheckForAdd</code> method in the <code>java.util.ArrayList</code> checks for negative index but the <code>rangeCheck</code> method does not."},{"owner":{"account_id":7909307,"reputation":409,"user_id":5973816,"display_name":"Poison"},"score":0,"creation_date":1646056385,"post_id":71295603,"comment_id":126023133,"body_markdown":"@user16320675 So why does `rangeCheckForAdd` perform a negative index check?","body":"@user16320675 So why does <code>rangeCheckForAdd</code> perform a negative index check?"},{"owner":{"account_id":22057425,"reputation":135,"user_id":16320675,"display_name":"user16320675"},"score":1,"creation_date":1646056482,"post_id":71295603,"comment_id":126023166,"body_markdown":"I did not implement nor was I involved in the development of `raneCheckForAdd` - my comment is to answer the question in title (and its only based on posted comment) - Maybe this question should be asked in some mailing-lists of the Java developers","body":"I did not implement nor was I involved in the development of <code>raneCheckForAdd</code> - my comment is to answer the question in title (and its only based on posted comment) - Maybe this question should be asked in some mailing-lists of the Java developers"},{"owner":{"account_id":7909307,"reputation":409,"user_id":5973816,"display_name":"Poison"},"score":0,"creation_date":1646056523,"post_id":71295603,"comment_id":126023179,"body_markdown":"@ControlAltDel [rangeCheckForAdd](https://github.com/openjdk/jdk/blob/jdk8-b120/jdk/src/share/classes/java/util/ArrayList.java#L644-L647) and [java.util.Arrays.ArrayList](https://github.com/openjdk/jdk/blob/jdk8-b120/jdk/src/share/classes/java/util/Arrays.java#L3800-L3868)","body":"@ControlAltDel <a href=\"https://github.com/openjdk/jdk/blob/jdk8-b120/jdk/src/share/classes/java/util/ArrayList.java#L644-L647\" rel=\"nofollow noreferrer\">rangeCheckForAdd</a> and <a href=\"https://github.com/openjdk/jdk/blob/jdk8-b120/jdk/src/share/classes/java/util/Arrays.java#L3800-L3868\" rel=\"nofollow noreferrer\">java.util.Arrays.ArrayList</a>"},{"owner":{"account_id":17835,"reputation":303895,"user_id":40342,"accept_rate":62,"display_name":"Joachim Sauer"},"score":0,"creation_date":1646058752,"post_id":71295603,"comment_id":126024151,"body_markdown":"`rangeCheckForAdd` is **not** always called immediately before a array access, so the comment in `rangeCheck` does not apply here. The `ForAdd` variant sometimes even causes the array to be resized, so checking for negative index here makes sense.","body":"<code>rangeCheckForAdd</code> is <b>not</b> always called immediately before a array access, so the comment in <code>rangeCheck</code> does not apply here. The <code>ForAdd</code> variant sometimes even causes the array to be resized, so checking for negative index here makes sense."}],"answers":[{"tags":[],"owner":{"account_id":2994830,"reputation":1,"user_id":2541560,"display_name":"Kayaman"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1646058230,"creation_date":1646055263,"answer_id":71295799,"question_id":71295603,"body_markdown":"It&#39;s a micro-optimization. For code clarity you might prefer the same exception for both, but when you&#39;re in a hot loop you&#39;ll want to avoid an unnecessary operation. `ArrayList` being an old class, the effect this has may have varied between times and JDK versions. If someone has enough interest they could benchmark it with 1.8 and newer JDKs to see how much of an optimization it is for `get()`.\r\n\r\nSince accessing a negative array index will fail anyway, there is no need to check for it. However the size of the `ArrayList` is not always the same as the size of its internal array, so it needs to be checked explicitly.\r\n\r\nAs to why `rangeCheckForAdd` *does* check for negative indexes, good question. Adding is slow anyway, so the micro-optimization wouldn&#39;t make much of a difference. Maybe they wanted consistent error messaging here.","title":"Why doesn&#39;t the rangeCheck method in the java.util.ArrayList class check for negative index?","body":"<p>It's a micro-optimization. For code clarity you might prefer the same exception for both, but when you're in a hot loop you'll want to avoid an unnecessary operation. <code>ArrayList</code> being an old class, the effect this has may have varied between times and JDK versions. If someone has enough interest they could benchmark it with 1.8 and newer JDKs to see how much of an optimization it is for <code>get()</code>.</p>\n<p>Since accessing a negative array index will fail anyway, there is no need to check for it. However the size of the <code>ArrayList</code> is not always the same as the size of its internal array, so it needs to be checked explicitly.</p>\n<p>As to why <code>rangeCheckForAdd</code> <em>does</em> check for negative indexes, good question. Adding is slow anyway, so the micro-optimization wouldn't make much of a difference. Maybe they wanted consistent error messaging here.</p>\n"},{"tags":[],"owner":{"account_id":7423601,"reputation":18712,"user_id":5646962,"display_name":"Thomas Kl&#228;ger"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1646062360,"creation_date":1646055270,"answer_id":71295802,"question_id":71295603,"body_markdown":"The range check on the array access checks if the array index is in the range `0 &lt;= index &lt; elementData.length`.\r\n\r\nFor a `java.util.ArrayList` the valid range of indexes is only `0 &lt;= index &lt; size`, with `size &lt;= elementData.length`. Since the array access cannot correctly check the upper bound (`size` could be less then `elementData.length`) the `ArrayList` class has to make sure that the upper bound is not violated.\r\n\r\nThe lower bound doesn&#39;t need to be checked because the lower bound is always `0` and is validated when the `elementData` array is accessed.\r\n\r\n---\r\n_Why does `rangeCheckForAdd` check for negative index?_\r\n\r\nWhen adding elements it can be necessary to grow the size of the `elementData` array before the new element is added. But if the index is invalid (negative or greater than size) you don&#39;t want to grow the `elementData` array. In this case it is therefore necessary to do the complete bounds check (`0 &lt;= index &lt;= size`) before anything else is done.\r\n\r\n---\r\n_Why doesn&#39;t `java.util.Arrays.ArrayList` do out of bounds checking?_\r\n\r\nThe size of a `java.util.Arrays.ArrayList` is exactly the size of the backing array. A separate bounds check (as in the of the `java.util.ArrayList`, where size can be smaller then the size of the backing array) is therefore not required.","title":"Why doesn&#39;t the rangeCheck method in the java.util.ArrayList class check for negative index?","body":"<p>The range check on the array access checks if the array index is in the range <code>0 &lt;= index &lt; elementData.length</code>.</p>\n<p>For a <code>java.util.ArrayList</code> the valid range of indexes is only <code>0 &lt;= index &lt; size</code>, with <code>size &lt;= elementData.length</code>. Since the array access cannot correctly check the upper bound (<code>size</code> could be less then <code>elementData.length</code>) the <code>ArrayList</code> class has to make sure that the upper bound is not violated.</p>\n<p>The lower bound doesn't need to be checked because the lower bound is always <code>0</code> and is validated when the <code>elementData</code> array is accessed.</p>\n<hr />\n<p><em>Why does <code>rangeCheckForAdd</code> check for negative index?</em></p>\n<p>When adding elements it can be necessary to grow the size of the <code>elementData</code> array before the new element is added. But if the index is invalid (negative or greater than size) you don't want to grow the <code>elementData</code> array. In this case it is therefore necessary to do the complete bounds check (<code>0 &lt;= index &lt;= size</code>) before anything else is done.</p>\n<hr />\n<p><em>Why doesn't <code>java.util.Arrays.ArrayList</code> do out of bounds checking?</em></p>\n<p>The size of a <code>java.util.Arrays.ArrayList</code> is exactly the size of the backing array. A separate bounds check (as in the of the <code>java.util.ArrayList</code>, where size can be smaller then the size of the backing array) is therefore not required.</p>\n"}],"owner":{"account_id":7909307,"reputation":409,"user_id":5973816,"display_name":"Poison"},"comment_count":11,"delete_vote_count":1,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":575,"favorite_count":0,"down_vote_count":5,"up_vote_count":2,"closed_date":1646112183,"accepted_answer_id":71295799,"answer_count":2,"score":-3,"last_activity_date":1646062360,"creation_date":1646054237,"question_id":71295603,"body_markdown":"```java\r\n/**\r\n * Checks if the given index is in range.  If not, throws an appropriate\r\n * runtime exception.  This method does *not* check if the index is\r\n * negative: It is always used immediately prior to an array access,\r\n * which throws an ArrayIndexOutOfBoundsException if index is negative.\r\n */\r\nprivate void rangeCheck(int index) {\r\n    if (index &gt;= size)\r\n        throw new IndexOutOfBoundsException(outOfBoundsMsg(index));\r\n}\r\n```\r\n\r\nFrom: [jdk/ArrayList.java at jdk8-b120 &#183; openjdk/jdk &#183; GitHub](https://github.com/openjdk/jdk/blob/jdk8-b120/jdk/src/share/classes/java/util/ArrayList.java#L630-L639)\r\n\r\nIf we write the following code, both indexes are out of bounds, but the exception types are different.\r\n```java\r\nimport java.util.ArrayList;\r\nimport java.util.List;\r\n\r\npublic class Test {\r\n\r\n    public static void main(String[] args) {\r\n        List&lt;String&gt; list = new ArrayList&lt;&gt;();\r\n        list.add(&quot;&quot;);\r\n\r\n        try {\r\n            list.get(-1);\r\n        } catch (Exception e) {\r\n            e.printStackTrace();\r\n        }\r\n\r\n        try {\r\n            list.get(1);\r\n        } catch (Exception e) {\r\n            e.printStackTrace();\r\n        }\r\n    }\r\n\r\n}\r\n```\r\n\r\nThe output is as follows:\r\n```\r\njava.lang.ArrayIndexOutOfBoundsException: -1\r\n\tat java.util.ArrayList.elementData(ArrayList.java:424)\r\n\tat java.util.ArrayList.get(ArrayList.java:437)\r\n\tat Test.main(Test.java:11)\r\njava.lang.IndexOutOfBoundsException: Index: 1, Size: 1\r\n\tat java.util.ArrayList.rangeCheck(ArrayList.java:659)\r\n\tat java.util.ArrayList.get(ArrayList.java:435)\r\n\tat Test.main(Test.java:17)\r\n```\r\n\r\nRelated question: \r\n* Why does `rangeCheckForAdd` method in the `java.util.ArrayList` check for negative index?\r\n* Why doesn&#39;t `java.util.Arrays.ArrayList` do index out-of-bounds checking?\r\n\r\nWhat confuses me is why their implementations are inconsistent? Are these methods written by different people with their own programming style? In other words, if out-of-bounds exceptions will eventually fire, then there is no need to check.","title":"Why doesn&#39;t the rangeCheck method in the java.util.ArrayList class check for negative index?","body":"<pre class=\"lang-java prettyprint-override\"><code>/**\n * Checks if the given index is in range.  If not, throws an appropriate\n * runtime exception.  This method does *not* check if the index is\n * negative: It is always used immediately prior to an array access,\n * which throws an ArrayIndexOutOfBoundsException if index is negative.\n */\nprivate void rangeCheck(int index) {\n    if (index &gt;= size)\n        throw new IndexOutOfBoundsException(outOfBoundsMsg(index));\n}\n</code></pre>\n<p>From: <a href=\"https://github.com/openjdk/jdk/blob/jdk8-b120/jdk/src/share/classes/java/util/ArrayList.java#L630-L639\" rel=\"nofollow noreferrer\">jdk/ArrayList.java at jdk8-b120 · openjdk/jdk · GitHub</a></p>\n<p>If we write the following code, both indexes are out of bounds, but the exception types are different.</p>\n<pre class=\"lang-java prettyprint-override\"><code>import java.util.ArrayList;\nimport java.util.List;\n\npublic class Test {\n\n    public static void main(String[] args) {\n        List&lt;String&gt; list = new ArrayList&lt;&gt;();\n        list.add(&quot;&quot;);\n\n        try {\n            list.get(-1);\n        } catch (Exception e) {\n            e.printStackTrace();\n        }\n\n        try {\n            list.get(1);\n        } catch (Exception e) {\n            e.printStackTrace();\n        }\n    }\n\n}\n</code></pre>\n<p>The output is as follows:</p>\n<pre><code>java.lang.ArrayIndexOutOfBoundsException: -1\n    at java.util.ArrayList.elementData(ArrayList.java:424)\n    at java.util.ArrayList.get(ArrayList.java:437)\n    at Test.main(Test.java:11)\njava.lang.IndexOutOfBoundsException: Index: 1, Size: 1\n    at java.util.ArrayList.rangeCheck(ArrayList.java:659)\n    at java.util.ArrayList.get(ArrayList.java:435)\n    at Test.main(Test.java:17)\n</code></pre>\n<p>Related question:</p>\n<ul>\n<li>Why does <code>rangeCheckForAdd</code> method in the <code>java.util.ArrayList</code> check for negative index?</li>\n<li>Why doesn't <code>java.util.Arrays.ArrayList</code> do index out-of-bounds checking?</li>\n</ul>\n<p>What confuses me is why their implementations are inconsistent? Are these methods written by different people with their own programming style? In other words, if out-of-bounds exceptions will eventually fire, then there is no need to check.</p>\n"},{"tags":["java","apache-flink","flink-streaming"],"answers":[{"tags":[],"owner":{"account_id":2274094,"reputation":40354,"user_id":2000823,"display_name":"David Anderson"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1645982581,"creation_date":1645982581,"answer_id":71286927,"question_id":71284901,"body_markdown":"Consider an event _e_ with timestamp _e.t_ and a dynamic gap computed as _gap(e)_. \r\n\r\nAs each event _e_ arrives at the window operator, it is initially assigned to a new session window extending from `e.t` to `e.t + gap(e)`. Then the window operator iterates over all of the sessions (independently for each key), and whenever two sessions overlap (in time), they are merged to form a new, longer session covering the union of the timespans of both sessions. This continues until no further merging is possible.\r\n\r\nAs each merge occurs, the `onMerge` method of the trigger is called, as well as the `merge` method of the accumulator. \r\n\r\nThen the `onElement` method of the trigger is called, passing in the event _e_. This will ensure that the appropriate timer is in place so that when the watermark passes the end of the session window (which includes the appropriate gap) the window will FIRE.\r\n\r\nThus the merging is done as each event is processed, and is not coupled to the timing of the continuous/periodic trigger.\r\n\r\n","title":"AggregateFunction with SessionWindow - understand how merge works","body":"<p>Consider an event <em>e</em> with timestamp <em>e.t</em> and a dynamic gap computed as <em>gap(e)</em>.</p>\n<p>As each event <em>e</em> arrives at the window operator, it is initially assigned to a new session window extending from <code>e.t</code> to <code>e.t + gap(e)</code>. Then the window operator iterates over all of the sessions (independently for each key), and whenever two sessions overlap (in time), they are merged to form a new, longer session covering the union of the timespans of both sessions. This continues until no further merging is possible.</p>\n<p>As each merge occurs, the <code>onMerge</code> method of the trigger is called, as well as the <code>merge</code> method of the accumulator.</p>\n<p>Then the <code>onElement</code> method of the trigger is called, passing in the event <em>e</em>. This will ensure that the appropriate timer is in place so that when the watermark passes the end of the session window (which includes the appropriate gap) the window will FIRE.</p>\n<p>Thus the merging is done as each event is processed, and is not coupled to the timing of the continuous/periodic trigger.</p>\n"}],"owner":{"account_id":14838211,"reputation":1,"user_id":10715652,"display_name":"sujoy majumder"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":180,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1646062228,"creation_date":1645966159,"question_id":71284901,"body_markdown":"While implementing the `AggregateFunction` in Flink with `EventTimeSessionWindows`, I am not able to understand when the merge happens in case of a SessionWindow with dynamic gap.\r\n\r\n**Code snippet:**\r\n\r\n```\r\nSingleOutputStreamOperator&lt;Tuple1&lt;String&gt;&gt; aggregateData = parsedData.assignTimestampsAndWatermarks(WatermarkStrategy.forBoundedOutOfOrderness(Duration.ofMinutes(20)))\r\n.keyBy(new ZeusRawKeyByFunction())\r\n.window(EventTimeSessionWindows.withDynamicGap(new SessionWindowTimeGapExtractor&lt;ZeusEvent&gt;() {\r\n                    @Override\r\n                    public long extract(ZeusEvent event) {\r\n                        if (event.getEventTypeName().equals(&quot;PlaybackSessionClosed&quot;)) {\r\n                            return 100;\r\n                        } else {\r\n                            return Time.minutes(30).toMilliseconds();\r\n                        }\r\n                    }\r\n                }))\r\n                .allowedLateness(Time.minutes(10))\r\n                .trigger(ContinuousEventTimeTrigger.of(Time.minutes(1)))\r\n                .sideOutputLateData(lateEvents)\r\n                .aggregate(new ZeusAggregateFunction())\r\n                .setParallelism(parameterTool.getInt(&quot;zeus-aggregator-parallelism&quot;))\r\n                .name(&quot;Zeus Aggregator&quot;)\r\n```\r\n\r\nI have defined four functions in the aggregator: \r\n\r\n- `createAccumulator`: This creates a new accumulator\r\n\r\n- `add`: This will keep on adding all the new events in the 1 min trigger time to the accumulator\r\n\r\n- `getResult`: This will get the final row to write to sink for that trigger\r\n\r\n- `merge`: When does this work ? Does the merge happen for every trigger?\r\n\r\nI am trying to understand if the merge will happen every min with the trigger and a new accumulator gets created and gets merged with the previous one.\r\n","title":"AggregateFunction with SessionWindow - understand how merge works","body":"<p>While implementing the <code>AggregateFunction</code> in Flink with <code>EventTimeSessionWindows</code>, I am not able to understand when the merge happens in case of a SessionWindow with dynamic gap.</p>\n<p><strong>Code snippet:</strong></p>\n<pre><code>SingleOutputStreamOperator&lt;Tuple1&lt;String&gt;&gt; aggregateData = parsedData.assignTimestampsAndWatermarks(WatermarkStrategy.forBoundedOutOfOrderness(Duration.ofMinutes(20)))\n.keyBy(new ZeusRawKeyByFunction())\n.window(EventTimeSessionWindows.withDynamicGap(new SessionWindowTimeGapExtractor&lt;ZeusEvent&gt;() {\n                    @Override\n                    public long extract(ZeusEvent event) {\n                        if (event.getEventTypeName().equals(&quot;PlaybackSessionClosed&quot;)) {\n                            return 100;\n                        } else {\n                            return Time.minutes(30).toMilliseconds();\n                        }\n                    }\n                }))\n                .allowedLateness(Time.minutes(10))\n                .trigger(ContinuousEventTimeTrigger.of(Time.minutes(1)))\n                .sideOutputLateData(lateEvents)\n                .aggregate(new ZeusAggregateFunction())\n                .setParallelism(parameterTool.getInt(&quot;zeus-aggregator-parallelism&quot;))\n                .name(&quot;Zeus Aggregator&quot;)\n</code></pre>\n<p>I have defined four functions in the aggregator:</p>\n<ul>\n<li><p><code>createAccumulator</code>: This creates a new accumulator</p>\n</li>\n<li><p><code>add</code>: This will keep on adding all the new events in the 1 min trigger time to the accumulator</p>\n</li>\n<li><p><code>getResult</code>: This will get the final row to write to sink for that trigger</p>\n</li>\n<li><p><code>merge</code>: When does this work ? Does the merge happen for every trigger?</p>\n</li>\n</ul>\n<p>I am trying to understand if the merge will happen every min with the trigger and a new accumulator gets created and gets merged with the previous one.</p>\n"},{"tags":["java","automation","command","minecraft"],"comments":[{"owner":{"account_id":15178500,"reputation":4190,"user_id":10952503,"display_name":"Elikill58"},"score":1,"creation_date":1646057085,"post_id":71296087,"comment_id":126023403,"body_markdown":"Can you [edit] your post to show what you tried ? what is the code ? You didn&#39;t add [tag:java] tag, it&#39;s because you don&#39;t are making plugin ?","body":"Can you <a href=\"https://stackoverflow.com/posts/71296087/edit\">edit</a> your post to show what you tried ? what is the code ? You didn&#39;t add <a href=\"https://stackoverflow.com/questions/tagged/java\">java</a> tag, it&#39;s because you don&#39;t are making plugin ?"},{"owner":{"display_name":"user17805502"},"score":0,"creation_date":1646058045,"post_id":71296087,"comment_id":126023820,"body_markdown":"Sir actually I am a python developer, I have a basic Idea in java, but I have no idea about the question I asked, otherwise I love to do R&amp;D myself. I come here only when I am stuck where I have really no idea.","body":"Sir actually I am a python developer, I have a basic Idea in java, but I have no idea about the question I asked, otherwise I love to do R&amp;D myself. I come here only when I am stuck where I have really no idea."},{"owner":{"account_id":15178500,"reputation":4190,"user_id":10952503,"display_name":"Elikill58"},"score":0,"creation_date":1646058476,"post_id":71296087,"comment_id":126024026,"body_markdown":"Yes but you are asking for help about what exactly ? You are looking about how to make a spigot plugin ? Did you already made the server where you want to run command ?","body":"Yes but you are asking for help about what exactly ? You are looking about how to make a spigot plugin ? Did you already made the server where you want to run command ?"},{"owner":{"account_id":15178500,"reputation":4190,"user_id":10952503,"display_name":"Elikill58"},"score":0,"creation_date":1646058606,"post_id":71296087,"comment_id":126024082,"body_markdown":"I think I&#39;m understanding it. You want to automate a command. Are you actually able to edit your tlauncher ? You want to run this command on another server that your own ?","body":"I think I&#39;m understanding it. You want to automate a command. Are you actually able to edit your tlauncher ? You want to run this command on another server that your own ?"},{"owner":{"display_name":"user17805502"},"score":0,"creation_date":1646058662,"post_id":71296087,"comment_id":126024111,"body_markdown":"Sir actually I am not making a plugin, but what i want is i want to make a custom command, for example when i send &quot;sell_blaze&quot; in chat, I want my minecraft tlauncher to read it and send a command to the server &quot;a&quot;, and a=the command which is sent to the server when we click on sell button in the gui.","body":"Sir actually I am not making a plugin, but what i want is i want to make a custom command, for example when i send &quot;sell_blaze&quot; in chat, I want my minecraft tlauncher to read it and send a command to the server &quot;a&quot;, and a=the command which is sent to the server when we click on sell button in the gui."},{"owner":{"display_name":"user17805502"},"score":0,"creation_date":1646058788,"post_id":71296087,"comment_id":126024159,"body_markdown":"U r absolutely right, the server I play on is private, and I dont know the owner, ip: offline.herobrine.org . And I cant edit my tlauncher but I want to. I don&#39;t know that where to put the code of reading chat so that it works when I play on the server.","body":"U r absolutely right, the server I play on is private, and I dont know the owner, ip: offline.herobrine.org . And I cant edit my tlauncher but I want to. I don&#39;t know that where to put the code of reading chat so that it works when I play on the server."},{"owner":{"account_id":15178500,"reputation":4190,"user_id":10952503,"display_name":"Elikill58"},"score":0,"creation_date":1646059061,"post_id":71296087,"comment_id":126024283,"body_markdown":"That&#39;s the problem. You can&#39;t do it like that. You can just take already existing MC launcher and try to change it, or just find something that directly enable it with config","body":"That&#39;s the problem. You can&#39;t do it like that. You can just take already existing MC launcher and try to change it, or just find something that directly enable it with config"},{"owner":{"display_name":"user17805502"},"score":0,"creation_date":1646060152,"post_id":71296087,"comment_id":126024760,"body_markdown":"Sir actually I said That I have literally no Idea about this, can u help me out?","body":"Sir actually I said That I have literally no Idea about this, can u help me out?"}],"answers":[{"tags":[],"owner":{"account_id":15178500,"reputation":4190,"user_id":10952503,"display_name":"Elikill58"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1646062203,"creation_date":1646062203,"answer_id":71297316,"question_id":71296087,"body_markdown":"You question seems too board. I suggest you multiple things :\r\n\r\n1) **Search a mod** that have a config to run a command when you say something in chat. *Possible to don&#39;t find something.*\r\n\r\n2) Create your **own version of minecraft** such as suggested [here](https://www.reddit.com/r/Minecraft/comments/e57xwh/create_a_custom_version/). *Require lot of Java skill*\r\n\r\n3) **Use [forge](https://forums.minecraftforge.net/)**, and just make a mod. You can follow tutorial like [this](https://www.youtube.com/watch?v=3sZtN_1q0ug) one. *Require some Java Skill*\r\n\r\nYou should [listen for event](https://mcforge.readthedocs.io/en/latest/events/intro/), in your case it seems to be `ClientChatReceivedEvent`. Then, run this code:\r\n```java\r\nMinecraftServer.getServer().getCommandManager().executeCommand(player, &quot;shop&quot;)\r\n```\r\n\r\n4) **Use [fabric](https://fabricmc.net/)**, and add all features that you want. You can follow tutorial like [this](https://fabricmc.net/develop/) one. *Require some Java Skill*\r\n\r\nTo listen events, you should take a look [here](https://fabricmc.net/wiki/tutorial:events).","title":"How to see and send commands to minecraft server without typing them","body":"<p>You question seems too board. I suggest you multiple things :</p>\n<ol>\n<li><p><strong>Search a mod</strong> that have a config to run a command when you say something in chat. <em>Possible to don't find something.</em></p>\n</li>\n<li><p>Create your <strong>own version of minecraft</strong> such as suggested <a href=\"https://www.reddit.com/r/Minecraft/comments/e57xwh/create_a_custom_version/\" rel=\"nofollow noreferrer\">here</a>. <em>Require lot of Java skill</em></p>\n</li>\n<li><p><strong>Use <a href=\"https://forums.minecraftforge.net/\" rel=\"nofollow noreferrer\">forge</a></strong>, and just make a mod. You can follow tutorial like <a href=\"https://www.youtube.com/watch?v=3sZtN_1q0ug\" rel=\"nofollow noreferrer\">this</a> one. <em>Require some Java Skill</em></p>\n</li>\n</ol>\n<p>You should <a href=\"https://mcforge.readthedocs.io/en/latest/events/intro/\" rel=\"nofollow noreferrer\">listen for event</a>, in your case it seems to be <code>ClientChatReceivedEvent</code>. Then, run this code:</p>\n<pre class=\"lang-java prettyprint-override\"><code>MinecraftServer.getServer().getCommandManager().executeCommand(player, &quot;shop&quot;)\n</code></pre>\n<ol start=\"4\">\n<li><strong>Use <a href=\"https://fabricmc.net/\" rel=\"nofollow noreferrer\">fabric</a></strong>, and add all features that you want. You can follow tutorial like <a href=\"https://fabricmc.net/develop/\" rel=\"nofollow noreferrer\">this</a> one. <em>Require some Java Skill</em></li>\n</ol>\n<p>To listen events, you should take a look <a href=\"https://fabricmc.net/wiki/tutorial:events\" rel=\"nofollow noreferrer\">here</a>.</p>\n"}],"owner":{"display_name":"user17805502"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":939,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":71297316,"answer_count":1,"score":0,"last_activity_date":1646062203,"creation_date":1646056590,"question_id":71296087,"body_markdown":"I have a tlauncher (cracked Mincraft) player, and I play on cracked minecraft servers.\r\n\r\nI put a request here is because what I want to do is, to earn money players sell blaze rods by click on the gui which is opened when we type /shop command.\r\n\r\nNow what I want is to get the line of code which my tlauncher player sends to the server when I click on the sell blaze rod button, and then I want to send that command to server without opening the GUI.\r\n\r\nSo what I want to know is &quot;what is going on the backend&quot;. I have no idea of what to do here. I am a python developer but I have a basic Idea of java, I don&#39;t know anything in minecraft java development.","title":"How to see and send commands to minecraft server without typing them","body":"<p>I have a tlauncher (cracked Mincraft) player, and I play on cracked minecraft servers.</p>\n<p>I put a request here is because what I want to do is, to earn money players sell blaze rods by click on the gui which is opened when we type /shop command.</p>\n<p>Now what I want is to get the line of code which my tlauncher player sends to the server when I click on the sell blaze rod button, and then I want to send that command to server without opening the GUI.</p>\n<p>So what I want to know is &quot;what is going on the backend&quot;. I have no idea of what to do here. I am a python developer but I have a basic Idea of java, I don't know anything in minecraft java development.</p>\n"}],"has_more":true,"quota_max":10000,"quota_remaining":8438,"page":1554,"page_size":100}
