{"items":[{"tags":["java","swing","jlist"],"comments":[{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":2,"creation_date":1692266259,"post_id":76918546,"comment_id":135601114,"body_markdown":"You need to post the source of *listListeners* btw [class names start upper case and should not be plurals unless encapsulating a Collection](https://technojeeves.com/index.php/aliasjava1/106-java-style-conventions) I suspect you&#39;re not ignoring, when true, `event.getValueIsAdjusting()`","body":"You need to post the source of <i>listListeners</i> btw <a href=\"https://technojeeves.com/index.php/aliasjava1/106-java-style-conventions\" rel=\"nofollow noreferrer\">class names start upper case and should not be plurals unless encapsulating a Collection</a> I suspect you&#39;re not ignoring, when true, <code>event.getValueIsAdjusting()</code>"},{"owner":{"account_id":44852,"reputation":322224,"user_id":131872,"accept_rate":100,"display_name":"camickr"},"score":0,"creation_date":1692278221,"post_id":76918546,"comment_id":135603535,"body_markdown":"Class names SHOUILD start with an upper case character and NOT contain &quot;_&quot; characters. Learn and follow Java conventions. This is easy when you look at the class names in the API,","body":"Class names SHOUILD start with an upper case character and NOT contain &quot;_&quot; characters. Learn and follow Java conventions. This is easy when you look at the class names in the API,"},{"owner":{"account_id":10353015,"reputation":167,"user_id":7635893,"accept_rate":60,"display_name":"Alpha"},"score":0,"creation_date":1692307032,"post_id":76918546,"comment_id":135609385,"body_markdown":"@g00se:- Unfortunately, I was missing the method `e.getValueIsAdjusting()`. It works fine now! Thank you for pointing out java notations","body":"@g00se:- Unfortunately, I was missing the method <code>e.getValueIsAdjusting()</code>. It works fine now! Thank you for pointing out java notations"}],"owner":{"account_id":10353015,"reputation":167,"user_id":7635893,"accept_rate":60,"display_name":"Alpha"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":31,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1692307752,"creation_date":1692247737,"question_id":76918546,"body_markdown":"I was trying to troubleshoot the code that why `JList` prints same values x2 times on console, but on GUI it shows only x1 time. I need ID on backend to do more functions, but it comes x2 time. The values are retrieving from DB.\r\nJList Initialization &amp; calling: -\r\n\r\n    CustomListModel listModel;\r\n    listModel = new CustomListModel(getListOfRoutes());\r\n    routeList = new JList&lt;tbl_bom_route&gt;(listModel);\r\n    ListSelectionListener myListener = new listListeners();\r\n    routeList.addListSelectionListener(myListener);\r\n    routeList.setCellRenderer(new routeListCellRenderer());\r\n    scrollPaneList.setViewportView(routeList);\r\n\r\n    class CustomListModel extends AbstractListModel&lt;tbl_bom_route&gt; {\r\n    \t\tprivate static final long serialVersionUID = 1L;\r\n    \t\tprivate ArrayList&lt;tbl_bom_route&gt; items;\r\n    \t    public CustomListModel(ArrayList&lt;tbl_bom_route&gt; items) {\r\n    \t        this.items = items;\r\n    \t    }\r\n    \t    @Override\r\n    \t    public int getSize() {\r\n    \t        return items.size();\r\n    \t    }\r\n    \r\n    \t    @Override\r\n    \t    public tbl_bom_route getElementAt(int index) {\r\n    \t        return items.get(index);\r\n    \t    }\r\n    \t}\r\n\r\n     private ArrayList&lt;tbl_bom_route&gt; getListOfRoutes() {\r\n        \t\tArrayList&lt;tbl_bom_route&gt; itemsList = new ArrayList&lt;&gt;();\r\n        \t\ttry {\r\n        \t\t\titemsList = daoBomRouteObject.getAllListOfRoutes();\r\n        \t\t} catch (Exception e) {\r\n        \t\t\te.printStackTrace();\r\n        \t\t}\r\n        \t\treturn itemsList;\r\n        \t}\r\n\r\n    class routeListCellRenderer extends DefaultListCellRenderer {\r\n    \t\tprivate static final long serialVersionUID = 1L;\r\n    \t\t@Override\r\n    \t\tpublic Component getListCellRendererComponent(JList&lt;?&gt; list, Object value, int index, boolean isSelected,\r\n    \t\t\t\tboolean cellHasFocus) {\r\n    \t\t\tsuper.getListCellRendererComponent(list, value, index, isSelected, cellHasFocus);\r\n    \t\t\tif (value instanceof tbl_bom_route) {\r\n    \t\t\t\ttbl_bom_route item = (tbl_bom_route) value;\r\n    \t\t\t\tsetText(item.getRouteName());\r\n    \t\t\t}\r\n    \t\t\treturn this;\r\n    \t\t}\r\n    \t}\r\n\r\nConsole Output: -\r\n   - Route00476R1020ARDWN_No 4 Draw Bench\r\n   - ID186\r\n   - Route00476R1020ARDWN_No 4 Draw Bench\r\n   - ID186\r\n\r\n\r\nUpdated: -\r\n\r\n    private class RouteListListener implements ListSelectionListener {\r\n    \t\t@Override\r\n    \t\tpublic void valueChanged(ListSelectionEvent e) {\r\n    \t\t\tif (!e.getValueIsAdjusting()) {\r\n    \t\t\t\tint selectedIndex = routeList.getSelectedIndex();\r\n    \t\t\t\tif (selectedIndex != -1) {\r\n    \t\t\t\t\ttbl_bom_route selectedListValue = routeList.getSelectedValue();\r\n    \t\t\t\t\tSANDBOX_GROUP_ID = selectedListValue.getRouteGroupID();\r\n    \t\t\t\t}\r\n    \t\t\t}\r\n    \t\t}\r\n    \t}","title":"JList prints duplicate values on console, display single values on GUI","body":"<p>I was trying to troubleshoot the code that why <code>JList</code> prints same values x2 times on console, but on GUI it shows only x1 time. I need ID on backend to do more functions, but it comes x2 time. The values are retrieving from DB.\nJList Initialization &amp; calling: -</p>\n<pre><code>CustomListModel listModel;\nlistModel = new CustomListModel(getListOfRoutes());\nrouteList = new JList&lt;tbl_bom_route&gt;(listModel);\nListSelectionListener myListener = new listListeners();\nrouteList.addListSelectionListener(myListener);\nrouteList.setCellRenderer(new routeListCellRenderer());\nscrollPaneList.setViewportView(routeList);\n\nclass CustomListModel extends AbstractListModel&lt;tbl_bom_route&gt; {\n        private static final long serialVersionUID = 1L;\n        private ArrayList&lt;tbl_bom_route&gt; items;\n        public CustomListModel(ArrayList&lt;tbl_bom_route&gt; items) {\n            this.items = items;\n        }\n        @Override\n        public int getSize() {\n            return items.size();\n        }\n\n        @Override\n        public tbl_bom_route getElementAt(int index) {\n            return items.get(index);\n        }\n    }\n\n private ArrayList&lt;tbl_bom_route&gt; getListOfRoutes() {\n            ArrayList&lt;tbl_bom_route&gt; itemsList = new ArrayList&lt;&gt;();\n            try {\n                itemsList = daoBomRouteObject.getAllListOfRoutes();\n            } catch (Exception e) {\n                e.printStackTrace();\n            }\n            return itemsList;\n        }\n\nclass routeListCellRenderer extends DefaultListCellRenderer {\n        private static final long serialVersionUID = 1L;\n        @Override\n        public Component getListCellRendererComponent(JList&lt;?&gt; list, Object value, int index, boolean isSelected,\n                boolean cellHasFocus) {\n            super.getListCellRendererComponent(list, value, index, isSelected, cellHasFocus);\n            if (value instanceof tbl_bom_route) {\n                tbl_bom_route item = (tbl_bom_route) value;\n                setText(item.getRouteName());\n            }\n            return this;\n        }\n    }\n</code></pre>\n<p>Console Output: -</p>\n<ul>\n<li>Route00476R1020ARDWN_No 4 Draw Bench</li>\n<li>ID186</li>\n<li>Route00476R1020ARDWN_No 4 Draw Bench</li>\n<li>ID186</li>\n</ul>\n<p>Updated: -</p>\n<pre><code>private class RouteListListener implements ListSelectionListener {\n        @Override\n        public void valueChanged(ListSelectionEvent e) {\n            if (!e.getValueIsAdjusting()) {\n                int selectedIndex = routeList.getSelectedIndex();\n                if (selectedIndex != -1) {\n                    tbl_bom_route selectedListValue = routeList.getSelectedValue();\n                    SANDBOX_GROUP_ID = selectedListValue.getRouteGroupID();\n                }\n            }\n        }\n    }\n</code></pre>\n"},{"tags":["java","jenkins","groovy","jenkins-pipeline","jenkins-groovy"],"comments":[{"owner":{"account_id":9028807,"reputation":524,"user_id":6727228,"display_name":"Ruslan"},"score":0,"creation_date":1692491862,"post_id":76925166,"comment_id":135630625,"body_markdown":"it works for me. remove everything in prepare stage and execute script { build_job(&quot;123&quot;,&quot;123&quot;,&quot;123&quot;) }.  then add your lines one by one \nif doesnt help update plugins","body":"it works for me. remove everything in prepare stage and execute script { build_job(&quot;123&quot;,&quot;123&quot;,&quot;123&quot;) }.  then add your lines one by one  if doesnt help update plugins"}],"owner":{"account_id":19256289,"reputation":679,"user_id":14073111,"display_name":"user14073111"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":43,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1692306805,"creation_date":1692306805,"question_id":76925166,"body_markdown":"Basically I have this groovy script:\r\n\r\n    pipeline {\r\n        agent {\r\n            node {\r\n                label &#39;master&#39;\r\n            }\r\n        }\r\n        stages {\r\n            stage(&quot;prepare&quot;) {\r\n                steps {\r\n                    catchError(buildResult: &quot;SUCCESS&quot;, stageResult: &quot;SUCCESS&quot;) {\r\n                        step([$class: &#39;WsCleanup&#39;])\r\n                        git url: &quot;git@gitlab.com:tests.git&quot;, branch: &quot;master&quot;, credentialsId: &quot;test-keys&quot;\r\n                        script {\r\n                            def params = load(&quot;test_folder/test.gy&quot;)\r\n                            def yml = readYaml file: &quot;test_folder/test.yml&quot;\r\n                            def selectedJobsMap = yml.selected_jobs\r\n                            def extra_parameters = []\r\n    \r\n                            selectedJobsMap.each { param -&gt;\r\n                                def platformChoices = selectedJobsMap[param.key].collect { it.name as String }\r\n                                params.add (\r\n                                    extendedChoice(\r\n                                        name: &quot;${param.key}_PLATFORMS&quot;,\r\n                                        description: &quot;Select ${param.key} platforms that you want to run tests&quot;,\r\n                                        type: &#39;PT_CHECKBOX&#39;,\r\n                                        multiSelectDelimiter: &#39;,&#39;,\r\n                                        value: platformChoices.join(&#39;,&#39;)\r\n                                        )\r\n                                    )\r\n                                   extra_parameters.add(&quot;${param.key}_PLATFORMS&quot;)\r\n                            }\r\n                            properties([parameters(params)])\r\n                            def jobsToRun = []\r\n    \r\n                            extra_parameters.each { platformParam -&gt;\r\n                                def selectedPlatforms = this[platformParam]\r\n                                def exact_platform = &quot;${platformParam}&quot; - &quot;_PLATFORMS&quot;\r\n                                selectedPlatforms.tokenize(&#39;,&#39;).each { selectedPlatform -&gt;\r\n                                    def jobName = selectedJobsMap[exact_platform].find { it.name == selectedPlatform }?.job\r\n                                    if (jobName) {\r\n                                        jobsToRun.add(jobName)\r\n                                    }\r\n                                }\r\n                            }\r\n                            parallel jobsToRun.collectEntries { jobName -&gt;\r\n                                [&quot;Running $jobName&quot;: {\r\n                                    build_job(&quot;$jobName&quot;, &quot;${branch_test_code}&quot;, &quot;${project_name}&quot;)\r\n                                }]\r\n                            }\r\n                        }\r\n                        step([$class: &#39;WsCleanup&#39;])\r\n                    } // catchError\r\n                } // steps\r\n            } // stage\r\n        } // stages\r\n    }\r\n    \r\n    def build_job(job_name, branch_test_code, project_name) {\r\n        try {\r\n            timeout(time: 1, unit: &#39;HOURS&#39;) {\r\n                println(&quot;Test run started : &quot; + job_name.toString())\r\n                build job: job_name, parameters: [string(name: &quot;branch_test_code&quot;, value: branch_test_code),\r\n                                                  string(name: &quot;project_name&quot;, value: project_name))]\r\n            }\r\n        } catch (err) {\r\n            println(&quot;Job exited with an error:&quot;)\r\n            println(err.toString())\r\n        } finally {\r\n            try {\r\n                copyArtifacts( filter: &quot;testing/allure-results/*&quot;,\r\n                               projectName: job_name,\r\n                               selector: lastCompleted() )\r\n            } catch (err) {\r\n                println(&quot;Something went wrong when trying to copy artifacts:&quot;)\r\n                println(err.toString())\r\n            }\r\n        }\r\n    }\r\n\r\nThe problem that I am having is that when I use that build_job there, I am getting an error:\r\n\r\n    java.lang.NoSuchMethodError: No such DSL method &#39;build_job&#39; found among steps\r\nBut if I try a more simpler groovy script, it works fine:\r\n\r\n    def build_job(jobName) {\r\n        // Function logic\r\n        echo &quot;Building job: $jobName&quot;\r\n    }\r\n    \r\n    pipeline {\r\n        agent any\r\n        \r\n        stages {\r\n            stage(&#39;Call Function&#39;) {\r\n                steps {\r\n                    script {\r\n                        def myJobName = &#39;myJob&#39; // Set the job name here\r\n                        build_job(myJobName)\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\nAny idea how to fix that one? I know that maybe I can declare it inside the Script block but somehow with that method it is not copying the artifacts in the master job. What is different in my complex groovy compared to the simpler one.  Only addition the first one has is the git clone step...\r\n","title":"Call a method inside a declarative pipeline groovy script","body":"<p>Basically I have this groovy script:</p>\n<pre><code>pipeline {\n    agent {\n        node {\n            label 'master'\n        }\n    }\n    stages {\n        stage(&quot;prepare&quot;) {\n            steps {\n                catchError(buildResult: &quot;SUCCESS&quot;, stageResult: &quot;SUCCESS&quot;) {\n                    step([$class: 'WsCleanup'])\n                    git url: &quot;git@gitlab.com:tests.git&quot;, branch: &quot;master&quot;, credentialsId: &quot;test-keys&quot;\n                    script {\n                        def params = load(&quot;test_folder/test.gy&quot;)\n                        def yml = readYaml file: &quot;test_folder/test.yml&quot;\n                        def selectedJobsMap = yml.selected_jobs\n                        def extra_parameters = []\n\n                        selectedJobsMap.each { param -&gt;\n                            def platformChoices = selectedJobsMap[param.key].collect { it.name as String }\n                            params.add (\n                                extendedChoice(\n                                    name: &quot;${param.key}_PLATFORMS&quot;,\n                                    description: &quot;Select ${param.key} platforms that you want to run tests&quot;,\n                                    type: 'PT_CHECKBOX',\n                                    multiSelectDelimiter: ',',\n                                    value: platformChoices.join(',')\n                                    )\n                                )\n                               extra_parameters.add(&quot;${param.key}_PLATFORMS&quot;)\n                        }\n                        properties([parameters(params)])\n                        def jobsToRun = []\n\n                        extra_parameters.each { platformParam -&gt;\n                            def selectedPlatforms = this[platformParam]\n                            def exact_platform = &quot;${platformParam}&quot; - &quot;_PLATFORMS&quot;\n                            selectedPlatforms.tokenize(',').each { selectedPlatform -&gt;\n                                def jobName = selectedJobsMap[exact_platform].find { it.name == selectedPlatform }?.job\n                                if (jobName) {\n                                    jobsToRun.add(jobName)\n                                }\n                            }\n                        }\n                        parallel jobsToRun.collectEntries { jobName -&gt;\n                            [&quot;Running $jobName&quot;: {\n                                build_job(&quot;$jobName&quot;, &quot;${branch_test_code}&quot;, &quot;${project_name}&quot;)\n                            }]\n                        }\n                    }\n                    step([$class: 'WsCleanup'])\n                } // catchError\n            } // steps\n        } // stage\n    } // stages\n}\n\ndef build_job(job_name, branch_test_code, project_name) {\n    try {\n        timeout(time: 1, unit: 'HOURS') {\n            println(&quot;Test run started : &quot; + job_name.toString())\n            build job: job_name, parameters: [string(name: &quot;branch_test_code&quot;, value: branch_test_code),\n                                              string(name: &quot;project_name&quot;, value: project_name))]\n        }\n    } catch (err) {\n        println(&quot;Job exited with an error:&quot;)\n        println(err.toString())\n    } finally {\n        try {\n            copyArtifacts( filter: &quot;testing/allure-results/*&quot;,\n                           projectName: job_name,\n                           selector: lastCompleted() )\n        } catch (err) {\n            println(&quot;Something went wrong when trying to copy artifacts:&quot;)\n            println(err.toString())\n        }\n    }\n}\n</code></pre>\n<p>The problem that I am having is that when I use that build_job there, I am getting an error:</p>\n<pre><code>java.lang.NoSuchMethodError: No such DSL method 'build_job' found among steps\n</code></pre>\n<p>But if I try a more simpler groovy script, it works fine:</p>\n<pre><code>def build_job(jobName) {\n    // Function logic\n    echo &quot;Building job: $jobName&quot;\n}\n\npipeline {\n    agent any\n    \n    stages {\n        stage('Call Function') {\n            steps {\n                script {\n                    def myJobName = 'myJob' // Set the job name here\n                    build_job(myJobName)\n                }\n            }\n        }\n    }\n}\n</code></pre>\n<p>Any idea how to fix that one? I know that maybe I can declare it inside the Script block but somehow with that method it is not copying the artifacts in the master job. What is different in my complex groovy compared to the simpler one.  Only addition the first one has is the git clone step...</p>\n"},{"tags":["java","multithreading","concurrency","java.util.concurrent","completable-future"],"comments":[{"owner":{"account_id":9879926,"reputation":4097,"user_id":7316365,"accept_rate":80,"display_name":"Vivick"},"score":0,"creation_date":1692283173,"post_id":76922452,"comment_id":135604728,"body_markdown":"The docs state: The task may execute in a new thread or in an existing pooled thread","body":"The docs state: The task may execute in a new thread or in an existing pooled thread"},{"owner":{"account_id":12033000,"reputation":684,"user_id":8802609,"display_name":"nluk"},"score":0,"creation_date":1692283308,"post_id":76922452,"comment_id":135604762,"body_markdown":"Ok, but the `main` thread is not: 1. a new thread 2. a pooled thread. The &#39;existing&#39; part matches though. Also, the tasks (lambda bodies) run where they should, it&#39;s the `String decoratingThread = Thread.currentThread().getName();` part that runs on main.","body":"Ok, but the <code>main</code> thread is not: 1. a new thread 2. a pooled thread. The &#39;existing&#39; part matches though. Also, the tasks (lambda bodies) run where they should, it&#39;s the <code>String decoratingThread = Thread.currentThread().getName();</code> part that runs on main."},{"owner":{"account_id":5404,"reputation":22089,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"score":0,"creation_date":1692284252,"post_id":76922452,"comment_id":135605022,"body_markdown":"Of course, that part just runs on the calling thread. Why wouldn&#39;t it?","body":"Of course, that part just runs on the calling thread. Why wouldn&#39;t it?"},{"owner":{"account_id":12033000,"reputation":684,"user_id":8802609,"display_name":"nluk"},"score":0,"creation_date":1692284608,"post_id":76922452,"comment_id":135605117,"body_markdown":"First time it should and does run on `main`, that&#39;s ok. But the second execution/decoration (of lambda in `thenApplyAsync`) it sometimes runs on `main` and sometimes on `firstExecutor`. That&#39;s why the next-to-last assertion does not fail 99% of test repeats.\n\nTo be precise: \n`String decoratingThread = Thread.currentThread().getName();` runs always on `main` for `supplyAsync`,  and randomly on `main` or `firstExecutor` for `thenApplyAsync`. The `supplyAsync` and `thenApplyAsync` lambdas always run where they should, so on `firstExecutor` and `secondExecutor`.","body":"First time it should and does run on <code>main</code>, that&#39;s ok. But the second execution/decoration (of lambda in <code>thenApplyAsync</code>) it sometimes runs on <code>main</code> and sometimes on <code>firstExecutor</code>. That&#39;s why the next-to-last assertion does not fail 99% of test repeats.  To be precise:  <code>String decoratingThread = Thread.currentThread().getName();</code> runs always on <code>main</code> for <code>supplyAsync</code>,  and randomly on <code>main</code> or <code>firstExecutor</code> for <code>thenApplyAsync</code>. The <code>supplyAsync</code> and <code>thenApplyAsync</code> lambdas always run where they should, so on <code>firstExecutor</code> and <code>secondExecutor</code>."},{"owner":{"account_id":322981,"reputation":310745,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":3,"creation_date":1692284733,"post_id":76922452,"comment_id":135605149,"body_markdown":"Javadoc for [`Executor#execute`](https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/concurrent/Executor.html#execute(java.lang.Runnable)) says (my emphasis): The command may execute in a new thread, in a pooled thread, *or in the calling thread*, at the discretion of the Executor implementation.","body":"Javadoc for <a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/concurrent/Executor.html#execute(java.lang.Runnable)\" rel=\"nofollow noreferrer\"><code>Executor#execute</code></a> says (my emphasis): The command may execute in a new thread, in a pooled thread, <i>or in the calling thread</i>, at the discretion of the Executor implementation."},{"owner":{"account_id":12033000,"reputation":684,"user_id":8802609,"display_name":"nluk"},"score":0,"creation_date":1692285156,"post_id":76922452,"comment_id":135605269,"body_markdown":"@BasilBourque That&#39;s a good catch. But I hoped that was the case just for certain implementations, for example the same docs show this implementation:\n`class DirectExecutor implements Executor {\n   public void execute(Runnable r) {\n     r.run();\n   }\n }\n`\nNow this obviously always runs on the caller thread. So my question should be why does the `ThreadPoolExecutor` (the parent/delegate) sometimes run on main. And are there any ExecutorService implementations that specify where do they run under given circumstances.","body":"@BasilBourque That&#39;s a good catch. But I hoped that was the case just for certain implementations, for example the same docs show this implementation: <code>class DirectExecutor implements Executor {    public void execute(Runnable r) {      r.run();    }  } </code> Now this obviously always runs on the caller thread. So my question should be why does the <code>ThreadPoolExecutor</code> (the parent/delegate) sometimes run on main. And are there any ExecutorService implementations that specify where do they run under given circumstances."},{"owner":{"account_id":322981,"reputation":310745,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":0,"creation_date":1692290180,"post_id":76922452,"comment_id":135606368,"body_markdown":"I’m no expert on this, but I believe if you want to avoid that possible behavior of `Executor#execute` then you should instead call [`ExecutorService#submit`](https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/concurrent/ExecutorService.html#submit(java.lang.Runnable)) method (or others such as `invokeAll`).","body":"I’m no expert on this, but I believe if you want to avoid that possible behavior of <code>Executor#execute</code> then you should instead call <a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/concurrent/ExecutorService.html#submit(java.lang.Runnable)\" rel=\"nofollow noreferrer\"><code>ExecutorService#submit</code></a> method (or others such as <code>invokeAll</code>)."},{"owner":{"account_id":322981,"reputation":310745,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":0,"creation_date":1692290327,"post_id":76922452,"comment_id":135606392,"body_markdown":"Perhaps [some other sources](https://www.ecosia.org/search?q=java%20executor%20execute%20versus%20submit&amp;tts=st_asaf_iphone) can shed some light on the matter of `execute` versus `submit`","body":"Perhaps <a href=\"https://www.ecosia.org/search?q=java%20executor%20execute%20versus%20submit&amp;tts=st_asaf_iphone\" rel=\"nofollow noreferrer\">some other sources</a> can shed some light on the matter of <code>execute</code> versus <code>submit</code>"},{"owner":{"account_id":12033000,"reputation":684,"user_id":8802609,"display_name":"nluk"},"score":0,"creation_date":1692294821,"post_id":76922452,"comment_id":135607295,"body_markdown":"Unfortunately I don&#39;t explicitly call `execute`. It&#39;s something inside the `CompletableFuture` logic that uses the `execute` part of `ExecutorService` interface. And ithe behaviour varies according to some condition, which is unknown at the moment.","body":"Unfortunately I don&#39;t explicitly call <code>execute</code>. It&#39;s something inside the <code>CompletableFuture</code> logic that uses the <code>execute</code> part of <code>ExecutorService</code> interface. And ithe behaviour varies according to some condition, which is unknown at the moment."}],"answers":[{"tags":[],"owner":{"account_id":8666186,"reputation":7757,"user_id":6486622,"display_name":"Denis Zavedeev"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1692306761,"creation_date":1692306761,"answer_id":76925159,"question_id":76922452,"body_markdown":"&gt; Does it depend on how long it takes to complete the `Supplier` in `supplyAsync`?\r\n\r\nThis depends on whether or not the `supplyAsync` part has been completed before the `thenApplyAsync` call.\r\n\r\n### Explanation\r\n\r\nLet&#39;s split the `CompletableFuture` chain in the `testWhoCalled` test for explanation. Instead of:\r\n\r\n```java\r\nInteger result = CompletableFuture.supplyAsync(() -&gt; 1, firstExecutor)\r\n         .thenApplyAsync(supplyResult -&gt; supplyResult, secondExecutor)\r\n         .get();\r\n```\r\n\r\ndo:\r\n\r\n```\r\nCompletableFuture&lt;Integer&gt; firstFuture = CompletableFuture.supplyAsync(() -&gt; 1, firstExecutor);\r\nInteger result = firstFuture\r\n         .thenApplyAsync(supplyResult -&gt; supplyResult, secondExecutor)\r\n         .get();\r\n```\r\n\r\n_The test still fails for me sometimes. There are no changes in logic, but it will allow me easier to explain._\r\n\r\nWhen I create the `firstFuture` using the [`supplyAsync`](https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/concurrent/CompletableFuture.html#supplyAsync(java.util.function.Supplier,java.util.concurrent.Executor)) method, the `firstExecutor` can already execute the lamba&#39;s (`Supplier`&#39;s) body.\r\n\r\nIn other words, computation can be _already_ running.\r\n_This is different from other frameworks. For example, in [Project Reactor nothing happens until you `subscribe`](https://projectreactor.io/docs/core/release/reference/#_from_imperative_to_reactive_programming)_.\r\n\r\nSo the computation _can be already running_ after we return from the `supplyAsync`.\r\nLet&#39;s understand what happens next.\r\nThere are two possibilities:\r\n\r\n1. `firstExecutor` has executed the `() -&gt; 1` lambda. And the `CompletableFuture` has the result\r\n2. The `() -&gt; 1` lambda is executing or will be executed later. We don&#39;t have result.\r\n\r\nNow we do:\r\n\r\n```java\r\nfirstFuture.thenApplyAsync(...)\r\n```\r\n\r\nWho will submit the second lambda into the `secondExecutor`?\r\n\r\nIt will do either `main` thread or a thread from the `firstExecutor`:\r\n\r\n* If we have the result, the `main` thread will submit the task into the `secondExecutor`. Because no one can do it here except the `main` thread: the task is already done, the `firstExecutor` can not submit the task to the `secondExecutor`\r\n* If we don&#39;t have the result a thread from the `firstExecutor` submits the task into the `secondExecutor`\r\n\r\n### Experiment: add sleep in between \r\n\r\nIf I add a `sleep` in the test like:\r\n\r\n```java\r\nCompletableFuture&lt;Integer&gt; firstFuture = CompletableFuture.supplyAsync(() -&gt; 1, firstExecutor);\r\nThread.sleep(1);\r\nInteger result = firstFuture\r\n        .thenApplyAsync(supplyResult -&gt; supplyResult, secondExecutor)\r\n        .get();\r\n```\r\n\r\nI have 9986 failures.\r\nThe `sleep` call increases the probability that the `firstExecutor` has completed the task before we add a new callback in `thenApplyAsync`.\r\n\r\nSee also [&quot;Asynchronous API with CompletableFuture: Performance Tips and Tricks&quot;](https://youtu.be/lyJBtg6Dgwc?t=1340) talk","title":"Why does the &#39;execute&#39; method of ExecutorService in applyAsync run on main thread sometimes","body":"<blockquote>\n<p>Does it depend on how long it takes to complete the <code>Supplier</code> in <code>supplyAsync</code>?</p>\n</blockquote>\n<p>This depends on whether or not the <code>supplyAsync</code> part has been completed before the <code>thenApplyAsync</code> call.</p>\n<h3>Explanation</h3>\n<p>Let's split the <code>CompletableFuture</code> chain in the <code>testWhoCalled</code> test for explanation. Instead of:</p>\n<pre class=\"lang-java prettyprint-override\"><code>Integer result = CompletableFuture.supplyAsync(() -&gt; 1, firstExecutor)\n         .thenApplyAsync(supplyResult -&gt; supplyResult, secondExecutor)\n         .get();\n</code></pre>\n<p>do:</p>\n<pre><code>CompletableFuture&lt;Integer&gt; firstFuture = CompletableFuture.supplyAsync(() -&gt; 1, firstExecutor);\nInteger result = firstFuture\n         .thenApplyAsync(supplyResult -&gt; supplyResult, secondExecutor)\n         .get();\n</code></pre>\n<p><em>The test still fails for me sometimes. There are no changes in logic, but it will allow me easier to explain.</em></p>\n<p>When I create the <code>firstFuture</code> using the <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/concurrent/CompletableFuture.html#supplyAsync(java.util.function.Supplier,java.util.concurrent.Executor)\" rel=\"nofollow noreferrer\"><code>supplyAsync</code></a> method, the <code>firstExecutor</code> can already execute the lamba's (<code>Supplier</code>'s) body.</p>\n<p>In other words, computation can be <em>already</em> running.\n<em>This is different from other frameworks. For example, in <a href=\"https://projectreactor.io/docs/core/release/reference/#_from_imperative_to_reactive_programming\" rel=\"nofollow noreferrer\">Project Reactor nothing happens until you <code>subscribe</code></a></em>.</p>\n<p>So the computation <em>can be already running</em> after we return from the <code>supplyAsync</code>.\nLet's understand what happens next.\nThere are two possibilities:</p>\n<ol>\n<li><code>firstExecutor</code> has executed the <code>() -&gt; 1</code> lambda. And the <code>CompletableFuture</code> has the result</li>\n<li>The <code>() -&gt; 1</code> lambda is executing or will be executed later. We don't have result.</li>\n</ol>\n<p>Now we do:</p>\n<pre class=\"lang-java prettyprint-override\"><code>firstFuture.thenApplyAsync(...)\n</code></pre>\n<p>Who will submit the second lambda into the <code>secondExecutor</code>?</p>\n<p>It will do either <code>main</code> thread or a thread from the <code>firstExecutor</code>:</p>\n<ul>\n<li>If we have the result, the <code>main</code> thread will submit the task into the <code>secondExecutor</code>. Because no one can do it here except the <code>main</code> thread: the task is already done, the <code>firstExecutor</code> can not submit the task to the <code>secondExecutor</code></li>\n<li>If we don't have the result a thread from the <code>firstExecutor</code> submits the task into the <code>secondExecutor</code></li>\n</ul>\n<h3>Experiment: add sleep in between</h3>\n<p>If I add a <code>sleep</code> in the test like:</p>\n<pre class=\"lang-java prettyprint-override\"><code>CompletableFuture&lt;Integer&gt; firstFuture = CompletableFuture.supplyAsync(() -&gt; 1, firstExecutor);\nThread.sleep(1);\nInteger result = firstFuture\n        .thenApplyAsync(supplyResult -&gt; supplyResult, secondExecutor)\n        .get();\n</code></pre>\n<p>I have 9986 failures.\nThe <code>sleep</code> call increases the probability that the <code>firstExecutor</code> has completed the task before we add a new callback in <code>thenApplyAsync</code>.</p>\n<p>See also <a href=\"https://youtu.be/lyJBtg6Dgwc?t=1340\" rel=\"nofollow noreferrer\">&quot;Asynchronous API with CompletableFuture: Performance Tips and Tricks&quot;</a> talk</p>\n"}],"owner":{"account_id":12033000,"reputation":684,"user_id":8802609,"display_name":"nluk"},"comment_count":9,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":107,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":76925159,"answer_count":1,"score":3,"last_activity_date":1692306761,"creation_date":1692282289,"question_id":76922452,"body_markdown":"I have overridden the `execute` method for `java.util.concurrent.Executor` in `ThreadPoolExecutor` implementation. The new implementation just decorates the runnable and then calls the original execute. The issue I&#39;m having is that if I have two such executors, then following:\r\n```java\r\nsupplyAsync(() -&gt; foo(), firstExecutor).thenApplyAsync(firstResult -&gt; bar(), secondExecutor)\r\n```\r\ntranslates to two `execute` calls. Usually they are executed by `main` and `firstExecutor`, but sometimes it&#39;s `main` two times.\r\n\r\nDoes it depend on how long it takes to complete the Suppplier in supplyAsync?\r\n\r\nHere&#39;s a minimal reproducible example (10k repeats, for me it fails about 3 times `java.lang.AssertionError: Unexpected second decorator: main`):\r\n\r\n```java\r\npackage com.foo;\r\n\r\nimport org.junit.jupiter.api.AfterEach;\r\nimport org.junit.jupiter.api.BeforeEach;\r\nimport org.junit.jupiter.api.RepeatedTest;\r\n\r\nimport java.util.ArrayList;\r\nimport java.util.List;\r\nimport java.util.concurrent.CompletableFuture;\r\nimport java.util.concurrent.ExecutorService;\r\nimport java.util.concurrent.LinkedBlockingQueue;\r\nimport java.util.concurrent.ThreadPoolExecutor;\r\nimport java.util.concurrent.TimeUnit;\r\n\r\nclass DecorationTest {\r\n\r\n    record WhoCalled(String decorator, String runnable) {}\r\n\r\n    static class DecoratedExecutor extends ThreadPoolExecutor{\r\n\r\n        private final List&lt;WhoCalled&gt; callers;\r\n\r\n        public DecoratedExecutor(List&lt;WhoCalled&gt; callers, String threadName) {\r\n            super(1, 1, 1, TimeUnit.MINUTES, new LinkedBlockingQueue&lt;&gt;(), runnable -&gt; new Thread(runnable, threadName));\r\n            this.callers = callers;\r\n        }\r\n\r\n        @Override\r\n        public void execute(final Runnable command) {\r\n            String decoratingThread = Thread.currentThread().getName();\r\n            Runnable decorated = () -&gt; {\r\n                String runningThread = Thread.currentThread().getName();\r\n                callers.add(new WhoCalled(decoratingThread, runningThread));\r\n                command.run();\r\n            };\r\n            super.execute(decorated);\r\n        }\r\n    }\r\n\r\n    List&lt;WhoCalled&gt; callers;\r\n    ExecutorService firstExecutor;\r\n    ExecutorService secondExecutor;\r\n\r\n    @BeforeEach\r\n    void beforeEach() {\r\n        callers = new ArrayList&lt;&gt;();\r\n        firstExecutor = new DecoratedExecutor(callers, &quot;firstExecutor&quot;);\r\n        secondExecutor = new DecoratedExecutor(callers, &quot;secondExecutor&quot;);\r\n    }\r\n\r\n    @AfterEach\r\n    void afterEach() {\r\n        firstExecutor.shutdown();\r\n        secondExecutor.shutdown();\r\n    }\r\n\r\n\r\n    @RepeatedTest(10_000)\r\n    void testWhoCalled() throws Exception {\r\n        Integer result = CompletableFuture.supplyAsync(() -&gt; 1, firstExecutor)\r\n                .thenApplyAsync(supplyResult -&gt; supplyResult, secondExecutor)\r\n                .get();\r\n\r\n        assert result == 1;\r\n\r\n        WhoCalled firstCallers = callers.get(0);\r\n        assert firstCallers.decorator().equals(&quot;main&quot;);\r\n        assert firstCallers.runnable().equals(&quot;firstExecutor&quot;);\r\n\r\n        WhoCalled secondCallers = callers.get(1);\r\n        assert secondCallers.decorator().equals(&quot;firstExecutor&quot;) : &quot;Unexpected second decorator: &quot; + secondCallers.decorator;\r\n        assert secondCallers.runnable().equals(&quot;secondExecutor&quot;);\r\n    }\r\n}\r\n```","title":"Why does the &#39;execute&#39; method of ExecutorService in applyAsync run on main thread sometimes","body":"<p>I have overridden the <code>execute</code> method for <code>java.util.concurrent.Executor</code> in <code>ThreadPoolExecutor</code> implementation. The new implementation just decorates the runnable and then calls the original execute. The issue I'm having is that if I have two such executors, then following:</p>\n<pre class=\"lang-java prettyprint-override\"><code>supplyAsync(() -&gt; foo(), firstExecutor).thenApplyAsync(firstResult -&gt; bar(), secondExecutor)\n</code></pre>\n<p>translates to two <code>execute</code> calls. Usually they are executed by <code>main</code> and <code>firstExecutor</code>, but sometimes it's <code>main</code> two times.</p>\n<p>Does it depend on how long it takes to complete the Suppplier in supplyAsync?</p>\n<p>Here's a minimal reproducible example (10k repeats, for me it fails about 3 times <code>java.lang.AssertionError: Unexpected second decorator: main</code>):</p>\n<pre class=\"lang-java prettyprint-override\"><code>package com.foo;\n\nimport org.junit.jupiter.api.AfterEach;\nimport org.junit.jupiter.api.BeforeEach;\nimport org.junit.jupiter.api.RepeatedTest;\n\nimport java.util.ArrayList;\nimport java.util.List;\nimport java.util.concurrent.CompletableFuture;\nimport java.util.concurrent.ExecutorService;\nimport java.util.concurrent.LinkedBlockingQueue;\nimport java.util.concurrent.ThreadPoolExecutor;\nimport java.util.concurrent.TimeUnit;\n\nclass DecorationTest {\n\n    record WhoCalled(String decorator, String runnable) {}\n\n    static class DecoratedExecutor extends ThreadPoolExecutor{\n\n        private final List&lt;WhoCalled&gt; callers;\n\n        public DecoratedExecutor(List&lt;WhoCalled&gt; callers, String threadName) {\n            super(1, 1, 1, TimeUnit.MINUTES, new LinkedBlockingQueue&lt;&gt;(), runnable -&gt; new Thread(runnable, threadName));\n            this.callers = callers;\n        }\n\n        @Override\n        public void execute(final Runnable command) {\n            String decoratingThread = Thread.currentThread().getName();\n            Runnable decorated = () -&gt; {\n                String runningThread = Thread.currentThread().getName();\n                callers.add(new WhoCalled(decoratingThread, runningThread));\n                command.run();\n            };\n            super.execute(decorated);\n        }\n    }\n\n    List&lt;WhoCalled&gt; callers;\n    ExecutorService firstExecutor;\n    ExecutorService secondExecutor;\n\n    @BeforeEach\n    void beforeEach() {\n        callers = new ArrayList&lt;&gt;();\n        firstExecutor = new DecoratedExecutor(callers, &quot;firstExecutor&quot;);\n        secondExecutor = new DecoratedExecutor(callers, &quot;secondExecutor&quot;);\n    }\n\n    @AfterEach\n    void afterEach() {\n        firstExecutor.shutdown();\n        secondExecutor.shutdown();\n    }\n\n\n    @RepeatedTest(10_000)\n    void testWhoCalled() throws Exception {\n        Integer result = CompletableFuture.supplyAsync(() -&gt; 1, firstExecutor)\n                .thenApplyAsync(supplyResult -&gt; supplyResult, secondExecutor)\n                .get();\n\n        assert result == 1;\n\n        WhoCalled firstCallers = callers.get(0);\n        assert firstCallers.decorator().equals(&quot;main&quot;);\n        assert firstCallers.runnable().equals(&quot;firstExecutor&quot;);\n\n        WhoCalled secondCallers = callers.get(1);\n        assert secondCallers.decorator().equals(&quot;firstExecutor&quot;) : &quot;Unexpected second decorator: &quot; + secondCallers.decorator;\n        assert secondCallers.runnable().equals(&quot;secondExecutor&quot;);\n    }\n}\n</code></pre>\n"},{"tags":["java","android","flutter","visual-studio-code","android-activity"],"answers":[{"tags":[],"owner":{"account_id":12159079,"reputation":109,"user_id":8877183,"display_name":"Miki Vanoušek"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1644691039,"creation_date":1644691039,"answer_id":71094789,"question_id":70063286,"body_markdown":"For me, the solution was to simply run `flutter clean` and `flutter pub get` in the project directory.","title":"Flutter Unable to instantiate activity ComponentInfo Main Activity","body":"<p>For me, the solution was to simply run <code>flutter clean</code> and <code>flutter pub get</code> in the project directory.</p>\n"},{"tags":[],"owner":{"account_id":9576126,"reputation":21,"user_id":7310460,"display_name":"Nicolas Thomas"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1650735510,"creation_date":1650735510,"answer_id":71982149,"question_id":70063286,"body_markdown":"For me the solution was to fix the name of the package in MainActivity.kt for some reason the last part was doubled.\r\n\r\n","title":"Flutter Unable to instantiate activity ComponentInfo Main Activity","body":"<p>For me the solution was to fix the name of the package in MainActivity.kt for some reason the last part was doubled.</p>\n"},{"tags":[],"owner":{"account_id":394275,"reputation":4356,"user_id":756630,"accept_rate":100,"display_name":"Jaja Harris"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1692306671,"creation_date":1692306671,"answer_id":76925150,"question_id":70063286,"body_markdown":"In case it helps someone, for me the fix was to go into the MainActivity.kt file under the Android folder and to fix the package import line so that it was using the correct app id name i.e. com.company.app.","title":"Flutter Unable to instantiate activity ComponentInfo Main Activity","body":"<p>In case it helps someone, for me the fix was to go into the MainActivity.kt file under the Android folder and to fix the package import line so that it was using the correct app id name i.e. com.company.app.</p>\n"}],"owner":{"account_id":21570843,"reputation":33,"user_id":15903738,"display_name":"Joh"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2303,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":3,"score":2,"last_activity_date":1692306671,"creation_date":1637572203,"question_id":70063286,"body_markdown":"I&#39;m using vs code (to code) and android studio (to get virtual device).\r\nI just merged and pulled the project I&#39;m working on this morning, and first, have a very long time to wait to build my project. So i stopped all, uninstalled my app from my virtual device, then cleaned and run by &quot;flutter run&quot;. Now I have these errors:\r\n\r\n```\r\nUsing hardware rendering with device AOSP on IA Emulator. If you notice graphics artifacts, consider enabling software rendering with\r\n&quot;--enable-software-rendering&quot;.\r\nLaunching lib\\main.dart on AOSP on IA Emulator in debug mode...\r\nRunning Gradle task &#39;assembleDebug&#39;...                              6,0s\r\n√  Built build\\app\\outputs\\flutter-apk\\app-debug.apk.\r\nE/AndroidRuntime(11190): FATAL EXCEPTION: main\r\nE/AndroidRuntime(11190): Process: com.example.coming_soon, PID: 11190\r\nE/AndroidRuntime(11190): java.lang.RuntimeException: Unable to instantiate activity ComponentInfo{com.example.coming_soon/com.example.coming_soon.MainActivity}: java.lang.ClassNotFoundException: Didn&#39;t find class &quot;com.example.coming_soon.MainActivity&quot; on path: DexPathList[[zip file &quot;/data/app/com.example.coming_soon-g9Xk6gs-AdO4Khd-H_dR3g==/base.apk&quot;],nativeLibraryDirectories=[/data/app/com.example.coming_soon-g9Xk6gs-AdO4Khd-H_dR3g==/lib/x86, /data/app/com.example.coming_soon-g9Xk6gs-AdO4Khd-H_dR3g==/base.apk!/lib/x86, /system/lib]]\r\nE/AndroidRuntime(11190):        at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2843)\r\nE/AndroidRuntime(11190):        at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:3048)\r\nE/AndroidRuntime(11190):        at android.app.servertransaction.LaunchActivityItem.execute(LaunchActivityItem.java:78)\r\nE/AndroidRuntime(11190):        at android.app.servertransaction.TransactionExecutor.executeCallbacks(TransactionExecutor.java:108)\r\nE/AndroidRuntime(11190):        at android.app.servertransaction.TransactionExecutor.execute(TransactionExecutor.java:68)\r\nE/AndroidRuntime(11190):        at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1808)\r\nE/AndroidRuntime(11190):        at android.os.Handler.dispatchMessage(Handler.java:106)\r\nE/AndroidRuntime(11190):        at android.os.Looper.loop(Looper.java:193)\r\nE/AndroidRuntime(11190):        at android.app.ActivityThread.main(ActivityThread.java:6669)\r\nE/AndroidRuntime(11190):        at java.lang.reflect.Method.invoke(Native Method)\r\nE/AndroidRuntime(11190):        at com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:493)\r\nE/AndroidRuntime(11190):        at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:858)\r\nE/AndroidRuntime(11190): Caused by: java.lang.ClassNotFoundException: Didn&#39;t find class &quot;com.example.coming_soon.MainActivity&quot; on path: DexPathList[[zip file &quot;/data/app/com.example.coming_soon-g9Xk6gs-AdO4Khd-H_dR3g==/base.apk&quot;],nativeLibraryDirectories=[/data/app/com.example.coming_soon-g9Xk6gs-AdO4Khd-H_dR3g==/lib/x86, /data/app/com.example.coming_soon-g9Xk6gs-AdO4Khd-H_dR3g==/base.apk!/lib/x86, /system/lib]]\r\nE/AndroidRuntime(11190):        at dalvik.system.BaseDexClassLoader.findClass(BaseDexClassLoader.java:134)\r\nE/AndroidRuntime(11190):        at java.lang.ClassLoader.loadClass(ClassLoader.java:379)\r\nE/AndroidRuntime(11190):        at java.lang.ClassLoader.loadClass(ClassLoader.java:312)\r\nE/AndroidRuntime(11190):        at android.app.AppComponentFactory.instantiateActivity(AppComponentFactory.java:69)\r\nE/AndroidRuntime(11190):        at androidx.core.app.CoreComponentFactory.instantiateActivity(CoreComponentFactory.java:41)\r\nE/AndroidRuntime(11190):        at android.app.Instrumentation.newActivity(Instrumentation.java:1215)\r\nE/AndroidRuntime(11190):        at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2831)\r\nE/AndroidRuntime(11190):        ... 11 more\r\n```\r\n\r\nHere is my flutter doctor -v\r\n\r\n```\r\n\r\n[√] Flutter (Channel stable, 2.5.3, on Microsoft Windows [version 10.0.19043.1348], locale fr-FR)\r\n    • Flutter version 2.5.3 at C:\\Users\\Johanne\\Development\\sdks\\flutter\r\n    • Upstream repository https://github.com/flutter/flutter.git\r\n    • Framework revision 18116933e7 (5 weeks ago), 2021-10-15 10:46:35 -0700\r\n    • Engine revision d3ea636dc5\r\n    • Dart version 2.14.4\r\n\r\n[√] Android toolchain - develop for Android devices (Android SDK version 31.0.0)\r\n    • Android SDK at C:\\Users\\Johanne\\AppData\\Local\\Android\\sdk\r\n    • Platform android-31, build-tools 31.0.0\r\n    • Java binary at: C:\\Program Files\\Android\\Android Studio\\jre\\bin\\java\r\n    • Java version OpenJDK Runtime Environment (build 11.0.10+0-b96-7249189)\r\n    • All Android licenses accepted.\r\n\r\n[√] Chrome - develop for the web\r\n    • Chrome at C:\\Program Files\\Google\\Chrome\\Application\\chrome.exe\r\n\r\n[√] Android Studio (version 2020.3)\r\n    • Android Studio at C:\\Program Files\\Android\\Android Studio\r\n    • Flutter plugin can be installed from:\r\n       https://plugins.jetbrains.com/plugin/9212-flutter\r\n    • Dart plugin can be installed from:\r\n       https://plugins.jetbrains.com/plugin/6351-dart\r\n    • Java version OpenJDK Runtime Environment (build 11.0.10+0-b96-7249189)\r\n\r\n[√] VS Code (version 1.62.2)\r\n    • VS Code at C:\\Users\\Johanne\\AppData\\Local\\Programs\\Microsoft VS Code\r\n    • Flutter extension version 3.28.0\r\n\r\n[√] Connected device (3 available)\r\n    • AOSP on IA Emulator (mobile) • emulator-5556 • android-x86    • Android 9 (API 28) (emulator)\r\n    • Chrome (web)                 • chrome        • web-javascript • Google Chrome 95.0.4638.69\r\n    • Edge (web)                   • edge          • web-javascript • Microsoft Edge 95.0.1020.44\r\n\r\n• No issues found!\r\n\r\n```\r\nHere is my android.manifest :\r\n\r\n```\r\n&lt;manifest xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n    package=&quot;com.example.coming_soon&quot;&gt;\r\n    &lt;uses-permission android:name=&quot;android.permission.READ_CALENDAR&quot; /&gt;\r\n    &lt;uses-permission android:name=&quot;android.permission.WRITE_CALENDAR&quot; /&gt;\r\n    &lt;uses-permission android:name=&quot;android.permission.VIBRATE&quot; /&gt;   \r\n&lt;application\r\n        android:label=&quot;coming_soon&quot;\r\n        android:icon=&quot;@mipmap/ic_launcher&quot;&gt;\r\n        &lt;activity\r\n            android:name=&quot;.MainActivity&quot;\r\n            android:launchMode=&quot;singleTop&quot;\r\n            android:theme=&quot;@style/LaunchTheme&quot;\r\n            android:configChanges=&quot;orientation|keyboardHidden|keyboard|screenSize|smallestScreenSize|locale|layoutDirection|fontScale|screenLayout|density|uiMode&quot;\r\n            android:hardwareAccelerated=&quot;true&quot;\r\n            android:windowSoftInputMode=&quot;adjustResize&quot;&gt;\r\n            &lt;!-- Specifies an Android theme to apply to this Activity as soon as\r\n                 the Android process has started. This theme is visible to the user\r\n                 while the Flutter UI initializes. After that, this theme continues\r\n                 to determine the Window background behind the Flutter UI. --&gt;\r\n            &lt;meta-data\r\n              android:name=&quot;io.flutter.embedding.android.NormalTheme&quot;\r\n              android:resource=&quot;@style/NormalTheme&quot;\r\n              /&gt;\r\n            &lt;!-- Displays an Android View that continues showing the launch screen\r\n                 Drawable until Flutter paints its first frame, then this splash\r\n                 screen fades out. A splash screen is useful to avoid any visual\r\n                 gap between the end of Android&#39;s launch screen and the painting of\r\n                 Flutter&#39;s first frame. --&gt;\r\n            &lt;meta-data\r\n              android:name=&quot;io.flutter.embedding.android.SplashScreenDrawable&quot;\r\n              android:resource=&quot;@drawable/launch_background&quot;\r\n              /&gt;\r\n            &lt;intent-filter&gt;\r\n                &lt;action android:name=&quot;android.intent.action.MAIN&quot;/&gt;\r\n                &lt;category android:name=&quot;android.intent.category.LAUNCHER&quot;/&gt;\r\n            &lt;/intent-filter&gt;\r\n        &lt;/activity&gt;\r\n        &lt;!-- Don&#39;t delete the meta-data below.\r\n             This is used by the Flutter tool to generate GeneratedPluginRegistrant.java --&gt;\r\n        &lt;meta-data\r\n            android:name=&quot;flutterEmbedding&quot;\r\n            android:value=&quot;2&quot; /&gt;\r\n    &lt;/application&gt;\r\n&lt;/manifest&gt;\r\n\r\n```\r\nI already searched and found similar issues, but I wasn&#39;t able to solve my problem.\r\nI tried to create a MainActivity.java file, but got new errors, so I deleted it.\r\nDid I miss something?\r\n","title":"Flutter Unable to instantiate activity ComponentInfo Main Activity","body":"<p>I'm using vs code (to code) and android studio (to get virtual device).\nI just merged and pulled the project I'm working on this morning, and first, have a very long time to wait to build my project. So i stopped all, uninstalled my app from my virtual device, then cleaned and run by &quot;flutter run&quot;. Now I have these errors:</p>\n<pre><code>Using hardware rendering with device AOSP on IA Emulator. If you notice graphics artifacts, consider enabling software rendering with\n&quot;--enable-software-rendering&quot;.\nLaunching lib\\main.dart on AOSP on IA Emulator in debug mode...\nRunning Gradle task 'assembleDebug'...                              6,0s\n√  Built build\\app\\outputs\\flutter-apk\\app-debug.apk.\nE/AndroidRuntime(11190): FATAL EXCEPTION: main\nE/AndroidRuntime(11190): Process: com.example.coming_soon, PID: 11190\nE/AndroidRuntime(11190): java.lang.RuntimeException: Unable to instantiate activity ComponentInfo{com.example.coming_soon/com.example.coming_soon.MainActivity}: java.lang.ClassNotFoundException: Didn't find class &quot;com.example.coming_soon.MainActivity&quot; on path: DexPathList[[zip file &quot;/data/app/com.example.coming_soon-g9Xk6gs-AdO4Khd-H_dR3g==/base.apk&quot;],nativeLibraryDirectories=[/data/app/com.example.coming_soon-g9Xk6gs-AdO4Khd-H_dR3g==/lib/x86, /data/app/com.example.coming_soon-g9Xk6gs-AdO4Khd-H_dR3g==/base.apk!/lib/x86, /system/lib]]\nE/AndroidRuntime(11190):        at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2843)\nE/AndroidRuntime(11190):        at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:3048)\nE/AndroidRuntime(11190):        at android.app.servertransaction.LaunchActivityItem.execute(LaunchActivityItem.java:78)\nE/AndroidRuntime(11190):        at android.app.servertransaction.TransactionExecutor.executeCallbacks(TransactionExecutor.java:108)\nE/AndroidRuntime(11190):        at android.app.servertransaction.TransactionExecutor.execute(TransactionExecutor.java:68)\nE/AndroidRuntime(11190):        at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1808)\nE/AndroidRuntime(11190):        at android.os.Handler.dispatchMessage(Handler.java:106)\nE/AndroidRuntime(11190):        at android.os.Looper.loop(Looper.java:193)\nE/AndroidRuntime(11190):        at android.app.ActivityThread.main(ActivityThread.java:6669)\nE/AndroidRuntime(11190):        at java.lang.reflect.Method.invoke(Native Method)\nE/AndroidRuntime(11190):        at com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:493)\nE/AndroidRuntime(11190):        at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:858)\nE/AndroidRuntime(11190): Caused by: java.lang.ClassNotFoundException: Didn't find class &quot;com.example.coming_soon.MainActivity&quot; on path: DexPathList[[zip file &quot;/data/app/com.example.coming_soon-g9Xk6gs-AdO4Khd-H_dR3g==/base.apk&quot;],nativeLibraryDirectories=[/data/app/com.example.coming_soon-g9Xk6gs-AdO4Khd-H_dR3g==/lib/x86, /data/app/com.example.coming_soon-g9Xk6gs-AdO4Khd-H_dR3g==/base.apk!/lib/x86, /system/lib]]\nE/AndroidRuntime(11190):        at dalvik.system.BaseDexClassLoader.findClass(BaseDexClassLoader.java:134)\nE/AndroidRuntime(11190):        at java.lang.ClassLoader.loadClass(ClassLoader.java:379)\nE/AndroidRuntime(11190):        at java.lang.ClassLoader.loadClass(ClassLoader.java:312)\nE/AndroidRuntime(11190):        at android.app.AppComponentFactory.instantiateActivity(AppComponentFactory.java:69)\nE/AndroidRuntime(11190):        at androidx.core.app.CoreComponentFactory.instantiateActivity(CoreComponentFactory.java:41)\nE/AndroidRuntime(11190):        at android.app.Instrumentation.newActivity(Instrumentation.java:1215)\nE/AndroidRuntime(11190):        at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2831)\nE/AndroidRuntime(11190):        ... 11 more\n</code></pre>\n<p>Here is my flutter doctor -v</p>\n<pre><code>\n[√] Flutter (Channel stable, 2.5.3, on Microsoft Windows [version 10.0.19043.1348], locale fr-FR)\n    • Flutter version 2.5.3 at C:\\Users\\Johanne\\Development\\sdks\\flutter\n    • Upstream repository https://github.com/flutter/flutter.git\n    • Framework revision 18116933e7 (5 weeks ago), 2021-10-15 10:46:35 -0700\n    • Engine revision d3ea636dc5\n    • Dart version 2.14.4\n\n[√] Android toolchain - develop for Android devices (Android SDK version 31.0.0)\n    • Android SDK at C:\\Users\\Johanne\\AppData\\Local\\Android\\sdk\n    • Platform android-31, build-tools 31.0.0\n    • Java binary at: C:\\Program Files\\Android\\Android Studio\\jre\\bin\\java\n    • Java version OpenJDK Runtime Environment (build 11.0.10+0-b96-7249189)\n    • All Android licenses accepted.\n\n[√] Chrome - develop for the web\n    • Chrome at C:\\Program Files\\Google\\Chrome\\Application\\chrome.exe\n\n[√] Android Studio (version 2020.3)\n    • Android Studio at C:\\Program Files\\Android\\Android Studio\n    • Flutter plugin can be installed from:\n       https://plugins.jetbrains.com/plugin/9212-flutter\n    • Dart plugin can be installed from:\n       https://plugins.jetbrains.com/plugin/6351-dart\n    • Java version OpenJDK Runtime Environment (build 11.0.10+0-b96-7249189)\n\n[√] VS Code (version 1.62.2)\n    • VS Code at C:\\Users\\Johanne\\AppData\\Local\\Programs\\Microsoft VS Code\n    • Flutter extension version 3.28.0\n\n[√] Connected device (3 available)\n    • AOSP on IA Emulator (mobile) • emulator-5556 • android-x86    • Android 9 (API 28) (emulator)\n    • Chrome (web)                 • chrome        • web-javascript • Google Chrome 95.0.4638.69\n    • Edge (web)                   • edge          • web-javascript • Microsoft Edge 95.0.1020.44\n\n• No issues found!\n\n</code></pre>\n<p>Here is my android.manifest :</p>\n<pre><code>&lt;manifest xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n    package=&quot;com.example.coming_soon&quot;&gt;\n    &lt;uses-permission android:name=&quot;android.permission.READ_CALENDAR&quot; /&gt;\n    &lt;uses-permission android:name=&quot;android.permission.WRITE_CALENDAR&quot; /&gt;\n    &lt;uses-permission android:name=&quot;android.permission.VIBRATE&quot; /&gt;   \n&lt;application\n        android:label=&quot;coming_soon&quot;\n        android:icon=&quot;@mipmap/ic_launcher&quot;&gt;\n        &lt;activity\n            android:name=&quot;.MainActivity&quot;\n            android:launchMode=&quot;singleTop&quot;\n            android:theme=&quot;@style/LaunchTheme&quot;\n            android:configChanges=&quot;orientation|keyboardHidden|keyboard|screenSize|smallestScreenSize|locale|layoutDirection|fontScale|screenLayout|density|uiMode&quot;\n            android:hardwareAccelerated=&quot;true&quot;\n            android:windowSoftInputMode=&quot;adjustResize&quot;&gt;\n            &lt;!-- Specifies an Android theme to apply to this Activity as soon as\n                 the Android process has started. This theme is visible to the user\n                 while the Flutter UI initializes. After that, this theme continues\n                 to determine the Window background behind the Flutter UI. --&gt;\n            &lt;meta-data\n              android:name=&quot;io.flutter.embedding.android.NormalTheme&quot;\n              android:resource=&quot;@style/NormalTheme&quot;\n              /&gt;\n            &lt;!-- Displays an Android View that continues showing the launch screen\n                 Drawable until Flutter paints its first frame, then this splash\n                 screen fades out. A splash screen is useful to avoid any visual\n                 gap between the end of Android's launch screen and the painting of\n                 Flutter's first frame. --&gt;\n            &lt;meta-data\n              android:name=&quot;io.flutter.embedding.android.SplashScreenDrawable&quot;\n              android:resource=&quot;@drawable/launch_background&quot;\n              /&gt;\n            &lt;intent-filter&gt;\n                &lt;action android:name=&quot;android.intent.action.MAIN&quot;/&gt;\n                &lt;category android:name=&quot;android.intent.category.LAUNCHER&quot;/&gt;\n            &lt;/intent-filter&gt;\n        &lt;/activity&gt;\n        &lt;!-- Don't delete the meta-data below.\n             This is used by the Flutter tool to generate GeneratedPluginRegistrant.java --&gt;\n        &lt;meta-data\n            android:name=&quot;flutterEmbedding&quot;\n            android:value=&quot;2&quot; /&gt;\n    &lt;/application&gt;\n&lt;/manifest&gt;\n\n</code></pre>\n<p>I already searched and found similar issues, but I wasn't able to solve my problem.\nI tried to create a MainActivity.java file, but got new errors, so I deleted it.\nDid I miss something?</p>\n"},{"tags":["java","spring-boot","maven"],"owner":{"account_id":6284,"reputation":14589,"user_id":10508,"accept_rate":53,"display_name":"David M. Karr"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":69,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1692306544,"creation_date":1692306544,"question_id":76925134,"body_markdown":"I&#39;ve discovered a situation where a SpringBoot service is using two maven dependencies that mostly deal with different things, but which happen to have at least one fully-qualified class name that is in both artifacts.  This service is failing at startup because it ends up using the class from one jar, where it really needs to get it from the other jar.\r\n\r\nI have another service that has the same two dependencies, but does not have this problem. but I see that in the fat jar, the order of the two jars is different from the one that has the problem.\r\n\r\nThere&#39;s no question that this is a stupid situation.  One of those jars should absolutely not have that class (and other classes in the same package), but I don&#39;t have any control over that artifact, and it&#39;s a legacy artifact.\r\n\r\nFrom what I understand, problems like this are dealt with using a custom &quot;classpath.idx&quot; file.  It&#39;s possible I can get away with that file just having two entries in it, the two jars that I need to control the ordering for.\r\n\r\nWhat I don&#39;t understand is how to get it there.  I assume that if I put the file in src/main/resources, that will dump it into BOOT-INF/classes, but it needs to go into BOOT-INF.\r\n\r\nI would have thought functionality around this would have been available in the spring-boot-maven-plugin, but I don&#39;t see anything. Perhaps it&#39;s so simple to do this that it wasn&#39;t deemed necessary.  If so, I don&#39;t see how to do it.\r\n\r\nI also wondered whether simply changing the order of dependencies in the maven pom.xml could do this, but I&#39;ve tried moving the artifact that references this problem artifact as a transient dependency to both first and last in the dependences list, but that made no difference.","title":"Need to create custom classpath.idx for springboot app to control jar loading order","body":"<p>I've discovered a situation where a SpringBoot service is using two maven dependencies that mostly deal with different things, but which happen to have at least one fully-qualified class name that is in both artifacts.  This service is failing at startup because it ends up using the class from one jar, where it really needs to get it from the other jar.</p>\n<p>I have another service that has the same two dependencies, but does not have this problem. but I see that in the fat jar, the order of the two jars is different from the one that has the problem.</p>\n<p>There's no question that this is a stupid situation.  One of those jars should absolutely not have that class (and other classes in the same package), but I don't have any control over that artifact, and it's a legacy artifact.</p>\n<p>From what I understand, problems like this are dealt with using a custom &quot;classpath.idx&quot; file.  It's possible I can get away with that file just having two entries in it, the two jars that I need to control the ordering for.</p>\n<p>What I don't understand is how to get it there.  I assume that if I put the file in src/main/resources, that will dump it into BOOT-INF/classes, but it needs to go into BOOT-INF.</p>\n<p>I would have thought functionality around this would have been available in the spring-boot-maven-plugin, but I don't see anything. Perhaps it's so simple to do this that it wasn't deemed necessary.  If so, I don't see how to do it.</p>\n<p>I also wondered whether simply changing the order of dependencies in the maven pom.xml could do this, but I've tried moving the artifact that references this problem artifact as a transient dependency to both first and last in the dependences list, but that made no difference.</p>\n"},{"tags":["java","sql-server","linux","ssl","jdbc"],"answers":[{"tags":[],"owner":{"account_id":1377055,"reputation":4155,"user_id":1310865,"accept_rate":50,"display_name":"2Aguy"},"down_vote_count":2,"up_vote_count":50,"is_accepted":true,"score":48,"last_activity_date":1497096208,"creation_date":1443110967,"answer_id":32766115,"question_id":32766114,"body_markdown":"I turned on SSL logging in the Java 8 JVM on a Linux instance which reproduces the problem.  SSL logging is turned on using  `-Djavax.net.debug=ssl:handshake:verbose`.  This revealed some useful information.  \r\n\r\nThe **workaround** that we are using in production and has proven to work for us is to set this parameter on the JVM:\r\n\r\n     -Djdk.tls.client.protocols=TLSv1\r\n\r\nIf you want more details, please read on.\r\n\r\nOn a server where the problem can be reproduced (again, only 5-10% of the time), I observed the following:\r\n\r\n    *** ClientHello, TLSv1.2\r\n    --- 8&lt;-- SNIP -----\r\n    main, WRITE: TLSv1.2 Handshake, length = 195\r\n    main, READ: TLSv1.2 Handshake, length = 1130\r\n    *** ServerHello, TLSv1.2\r\n    --- 8&lt;-- SNIP -----\r\n    %% Initialized:  [Session-79, TLS_DHE_RSA_WITH_AES_128_GCM_SHA256]\r\n    ** TLS_DHE_RSA_WITH_AES_128_GCM_SHA256\r\n    --- 8&lt;-- SNIP -----\r\n    Algorithm: [SHA1withRSA]\r\n    --- 8&lt;-- SNIP -----\r\n    *** Diffie-Hellman ServerKeyExchange\r\n    --- 8&lt;-- SNIP -----\r\n    *** ServerHelloDone\r\n    *** ClientKeyExchange, DH\r\n    --- 8&lt;-- SNIP -----\r\n    main, WRITE: TLSv1.2 Handshake, length = 133\r\n    --- 8&lt;-- SNIP -----\r\n    main, WRITE: TLSv1.2 Change Cipher Spec, length = 1\r\n    *** Finished\r\n    verify_data:  { 108, 116, 29, 115, 13, 26, 154, 198, 17, 125, 114, 166 }\r\n    ***\r\n    main, WRITE: TLSv1.2 Handshake, length = 40\r\n    main, called close()\r\n    main, called closeInternal(true)\r\n    main, SEND TLSv1.2 ALERT:  warning, description = close_notify\r\n    main, WRITE: TLSv1.2 Alert, length = 26\r\n    main, called closeSocket(true)\r\n    main, waiting for close_notify or alert: state 5\r\n    main, received EOFException: ignored\r\n    main, called closeInternal(false)\r\n    main, close invoked again; state = 5\r\n    main, handling exception: java.io.IOException: SQL Server returned an incomplete response. The connection has been closed. ClientConnectionId:12a722b3-d61d-4ce4-8319-af049a0a4415\r\n\r\nNotice that **TLSv1.2** is selected by the database server and used in this exchange.  I&#39;ve observed that, when connections fail from the problematic linux service, TLSv1.2 is ALWAYS the level which was selected. However, connections do not ALWAYS fail when TLSv1.2 is used.  They only fail 5-10% of the time.\r\n \r\nNow here is an exchange from a server that does NOT have the problem.  Everything else is equal. I.e.,  connecting to the same database, same version of the JVM (Java 1.8.0_60), same JDBC driver, etc.  Notice that, here, **TLSv1** is selected by the database server instead of TLSv1.2 as in the faulty server&#39;s case.\r\n\r\n    *** ClientHello, TLSv1.2\r\n    --- 8&lt;-- SNIP -----\r\n    main, WRITE: TLSv1.2 Handshake, length = 207\r\n    main, READ: TLSv1 Handshake, length = 604\r\n    *** ServerHello, TLSv1\r\n    --- 8&lt;-- SNIP -----\r\n    Cipher Suite: TLS_RSA_WITH_AES_128_CBC_SHA\r\n    --- 8&lt;-- SNIP -----\r\n    %% Initialized:  [Session-79, TLS_RSA_WITH_AES_128_CBC_SHA]\r\n    ** TLS_RSA_WITH_AES_128_CBC_SHA\r\n    --- 8&lt;-- SNIP -----\r\n    Algorithm: [SHA1withRSA]\r\n    --- 8&lt;-- SNIP -----\r\n    ***\r\n    *** ServerHelloDone\r\n    *** ClientKeyExchange, RSA PreMasterSecret, TLSv1\r\n    --- 8&lt;-- SNIP -----\r\n    main, WRITE: TLSv1 Handshake, length = 134\r\n    main, WRITE: TLSv1 Change Cipher Spec, length = 1\r\n    *** Finished\r\n    verify_data:  { 26, 155, 166, 89, 229, 193, 126, 39, 103, 206, 126, 21 }\r\n    ***\r\n    main, WRITE: TLSv1 Handshake, length = 48\r\n    main, READ: TLSv1 Change Cipher Spec, length = 1\r\n    main, READ: TLSv1 Handshake, length = 48\r\n    *** Finished\r\n\r\nSo, when TLSv1 is negotiated between the Linux JVM and the SQL Server, connections are ALWAYS successful.  When TLSv1.2 is negotiated, we get sporadic connection failures.  \r\n\r\n(Note: Java 7 (1.7.0_51) always negotiates TLSv1, which is why the problem never occurred for us with a Java 7 JVM.)\r\n\r\nThe open questions we still have are: \r\n\r\n 1. WHY is that the same Java 8 JVM run from 2 different Linux servers will always negotiate TLSv1, but when connecting from another Linux server it always negotiates TLSv1.2.  \r\n 2. And also why are TLSv1.2 negotiated connections successful most, but not all, of the time on that server?\r\n\r\n**Update 6/10/2017:**\r\n[This posting from Microsoft][1] describes the problem and their proposed solution.\r\n\r\n**Resources:**\r\n\r\nhttp://www.infoworld.com/article/2849292/operating-systems/more-patch-problems-reported-with-the-ms14-066-kb-2992611-winshock-mess.html\r\n\r\nhttp://www.infoworld.com/article/2849292/operating-systems/more-patch-problems-reported-with-the-ms14-066-kb-2992611-winshock-mess.html\r\n\r\nhttp://blogs.msdn.com/b/jdbcteam/archive/2008/09/09/the-driver-could-not-establish-a-secure-connection-to-sql-server-by-using-secure-sockets-layer-ssl-encryption.aspx\r\n\r\nhttps://stackoverflow.com/questions/30792156/java-8-jce-unlimited-strength-policy-and-ssl-handshake-over-tls\r\n\r\nhttp://blogs.msdn.com/b/saponsqlserver/archive/2013/05/10/analyzing-jdbc-connection-issues.aspx\r\n\r\nhttps://docs.oracle.com/javase/8/docs/technotes/guides/security/jsse/JSSERefGuide.html#descPhase2\r\n\r\nhttps://blogs.oracle.com/java-platform-group/entry/java_8_will_use_tls\r\n\r\n\r\n  [1]: https://blogs.msdn.microsoft.com/dataaccesstechnologies/2016/11/30/intermittent-jdbc-connectivity-issue-the-driver-could-not-establish-a-secure-connection-to-sql-server-by-using-secure-sockets-layer-ssl-encryption-error-sql-server-returned-an-incomplete-respons/","title":"SQL Server JDBC Error on Java 8: The driver could not establish a secure connection to SQL Server by using Secure Sockets Layer (SSL) encryption","body":"<p>I turned on SSL logging in the Java 8 JVM on a Linux instance which reproduces the problem.  SSL logging is turned on using  <code>-Djavax.net.debug=ssl:handshake:verbose</code>.  This revealed some useful information.  </p>\n\n<p>The <strong>workaround</strong> that we are using in production and has proven to work for us is to set this parameter on the JVM:</p>\n\n<pre><code> -Djdk.tls.client.protocols=TLSv1\n</code></pre>\n\n<p>If you want more details, please read on.</p>\n\n<p>On a server where the problem can be reproduced (again, only 5-10% of the time), I observed the following:</p>\n\n<pre><code>*** ClientHello, TLSv1.2\n--- 8&lt;-- SNIP -----\nmain, WRITE: TLSv1.2 Handshake, length = 195\nmain, READ: TLSv1.2 Handshake, length = 1130\n*** ServerHello, TLSv1.2\n--- 8&lt;-- SNIP -----\n%% Initialized:  [Session-79, TLS_DHE_RSA_WITH_AES_128_GCM_SHA256]\n** TLS_DHE_RSA_WITH_AES_128_GCM_SHA256\n--- 8&lt;-- SNIP -----\nAlgorithm: [SHA1withRSA]\n--- 8&lt;-- SNIP -----\n*** Diffie-Hellman ServerKeyExchange\n--- 8&lt;-- SNIP -----\n*** ServerHelloDone\n*** ClientKeyExchange, DH\n--- 8&lt;-- SNIP -----\nmain, WRITE: TLSv1.2 Handshake, length = 133\n--- 8&lt;-- SNIP -----\nmain, WRITE: TLSv1.2 Change Cipher Spec, length = 1\n*** Finished\nverify_data:  { 108, 116, 29, 115, 13, 26, 154, 198, 17, 125, 114, 166 }\n***\nmain, WRITE: TLSv1.2 Handshake, length = 40\nmain, called close()\nmain, called closeInternal(true)\nmain, SEND TLSv1.2 ALERT:  warning, description = close_notify\nmain, WRITE: TLSv1.2 Alert, length = 26\nmain, called closeSocket(true)\nmain, waiting for close_notify or alert: state 5\nmain, received EOFException: ignored\nmain, called closeInternal(false)\nmain, close invoked again; state = 5\nmain, handling exception: java.io.IOException: SQL Server returned an incomplete response. The connection has been closed. ClientConnectionId:12a722b3-d61d-4ce4-8319-af049a0a4415\n</code></pre>\n\n<p>Notice that <strong>TLSv1.2</strong> is selected by the database server and used in this exchange.  I've observed that, when connections fail from the problematic linux service, TLSv1.2 is ALWAYS the level which was selected. However, connections do not ALWAYS fail when TLSv1.2 is used.  They only fail 5-10% of the time.</p>\n\n<p>Now here is an exchange from a server that does NOT have the problem.  Everything else is equal. I.e.,  connecting to the same database, same version of the JVM (Java 1.8.0_60), same JDBC driver, etc.  Notice that, here, <strong>TLSv1</strong> is selected by the database server instead of TLSv1.2 as in the faulty server's case.</p>\n\n<pre><code>*** ClientHello, TLSv1.2\n--- 8&lt;-- SNIP -----\nmain, WRITE: TLSv1.2 Handshake, length = 207\nmain, READ: TLSv1 Handshake, length = 604\n*** ServerHello, TLSv1\n--- 8&lt;-- SNIP -----\nCipher Suite: TLS_RSA_WITH_AES_128_CBC_SHA\n--- 8&lt;-- SNIP -----\n%% Initialized:  [Session-79, TLS_RSA_WITH_AES_128_CBC_SHA]\n** TLS_RSA_WITH_AES_128_CBC_SHA\n--- 8&lt;-- SNIP -----\nAlgorithm: [SHA1withRSA]\n--- 8&lt;-- SNIP -----\n***\n*** ServerHelloDone\n*** ClientKeyExchange, RSA PreMasterSecret, TLSv1\n--- 8&lt;-- SNIP -----\nmain, WRITE: TLSv1 Handshake, length = 134\nmain, WRITE: TLSv1 Change Cipher Spec, length = 1\n*** Finished\nverify_data:  { 26, 155, 166, 89, 229, 193, 126, 39, 103, 206, 126, 21 }\n***\nmain, WRITE: TLSv1 Handshake, length = 48\nmain, READ: TLSv1 Change Cipher Spec, length = 1\nmain, READ: TLSv1 Handshake, length = 48\n*** Finished\n</code></pre>\n\n<p>So, when TLSv1 is negotiated between the Linux JVM and the SQL Server, connections are ALWAYS successful.  When TLSv1.2 is negotiated, we get sporadic connection failures.  </p>\n\n<p>(Note: Java 7 (1.7.0_51) always negotiates TLSv1, which is why the problem never occurred for us with a Java 7 JVM.)</p>\n\n<p>The open questions we still have are: </p>\n\n<ol>\n<li>WHY is that the same Java 8 JVM run from 2 different Linux servers will always negotiate TLSv1, but when connecting from another Linux server it always negotiates TLSv1.2.  </li>\n<li>And also why are TLSv1.2 negotiated connections successful most, but not all, of the time on that server?</li>\n</ol>\n\n<p><strong>Update 6/10/2017:</strong>\n<a href=\"https://blogs.msdn.microsoft.com/dataaccesstechnologies/2016/11/30/intermittent-jdbc-connectivity-issue-the-driver-could-not-establish-a-secure-connection-to-sql-server-by-using-secure-sockets-layer-ssl-encryption-error-sql-server-returned-an-incomplete-respons/\" rel=\"noreferrer\">This posting from Microsoft</a> describes the problem and their proposed solution.</p>\n\n<p><strong>Resources:</strong></p>\n\n<p><a href=\"http://www.infoworld.com/article/2849292/operating-systems/more-patch-problems-reported-with-the-ms14-066-kb-2992611-winshock-mess.html\" rel=\"noreferrer\">http://www.infoworld.com/article/2849292/operating-systems/more-patch-problems-reported-with-the-ms14-066-kb-2992611-winshock-mess.html</a></p>\n\n<p><a href=\"http://www.infoworld.com/article/2849292/operating-systems/more-patch-problems-reported-with-the-ms14-066-kb-2992611-winshock-mess.html\" rel=\"noreferrer\">http://www.infoworld.com/article/2849292/operating-systems/more-patch-problems-reported-with-the-ms14-066-kb-2992611-winshock-mess.html</a></p>\n\n<p><a href=\"http://blogs.msdn.com/b/jdbcteam/archive/2008/09/09/the-driver-could-not-establish-a-secure-connection-to-sql-server-by-using-secure-sockets-layer-ssl-encryption.aspx\" rel=\"noreferrer\">http://blogs.msdn.com/b/jdbcteam/archive/2008/09/09/the-driver-could-not-establish-a-secure-connection-to-sql-server-by-using-secure-sockets-layer-ssl-encryption.aspx</a></p>\n\n<p><a href=\"https://stackoverflow.com/questions/30792156/java-8-jce-unlimited-strength-policy-and-ssl-handshake-over-tls\">Java 8 , JCE Unlimited Strength Policy and SSL Handshake over TLS</a></p>\n\n<p><a href=\"http://blogs.msdn.com/b/saponsqlserver/archive/2013/05/10/analyzing-jdbc-connection-issues.aspx\" rel=\"noreferrer\">http://blogs.msdn.com/b/saponsqlserver/archive/2013/05/10/analyzing-jdbc-connection-issues.aspx</a></p>\n\n<p><a href=\"https://docs.oracle.com/javase/8/docs/technotes/guides/security/jsse/JSSERefGuide.html#descPhase2\" rel=\"noreferrer\">https://docs.oracle.com/javase/8/docs/technotes/guides/security/jsse/JSSERefGuide.html#descPhase2</a></p>\n\n<p><a href=\"https://blogs.oracle.com/java-platform-group/entry/java_8_will_use_tls\" rel=\"noreferrer\">https://blogs.oracle.com/java-platform-group/entry/java_8_will_use_tls</a></p>\n"},{"tags":[],"owner":{"account_id":7028736,"reputation":61,"user_id":5385257,"display_name":"Tore Refsnes"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1521488467,"creation_date":1443453136,"answer_id":32826341,"question_id":32766114,"body_markdown":"This appears to have been fixed in version 4.2 of the MS SQL JDBC driver. I created a program where I connected to the server 1000 times, pausing 100ms between each attempt. With version 4.1 I was able to reproduce the problem every time, although it happened only sporadically. With version 4.2 I was unable to reproduce the problem.","title":"SQL Server JDBC Error on Java 8: The driver could not establish a secure connection to SQL Server by using Secure Sockets Layer (SSL) encryption","body":"<p>This appears to have been fixed in version 4.2 of the MS SQL JDBC driver. I created a program where I connected to the server 1000 times, pausing 100ms between each attempt. With version 4.1 I was able to reproduce the problem every time, although it happened only sporadically. With version 4.2 I was unable to reproduce the problem.</p>\n"},{"tags":[],"owner":{"account_id":9438253,"reputation":61,"user_id":7019598,"display_name":"bbhagat"},"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1476455555,"creation_date":1476453636,"answer_id":40045072,"question_id":32766114,"body_markdown":"Before you upgrade SQL JDBC Driver, check the compatibility first:\r\n\r\n - Sqljdbc.jar requires a JRE of 5 and supports the JDBC 3.0 API \r\n - Sqljdbc4.jar requires a JRE of 6 and supports the JDBC 4.0 API \r\n - Sqljdbc41.jar requires a JRE of 7 and supports the JDBC 4.1 API \r\n - Sqljdbc42.jar requires a JRE of 8 and supports the JDBC 4.2 API \r\n\r\nSource: https://www.microsoft.com/en-us/download/details.aspx?id=11774","title":"SQL Server JDBC Error on Java 8: The driver could not establish a secure connection to SQL Server by using Secure Sockets Layer (SSL) encryption","body":"<p>Before you upgrade SQL JDBC Driver, check the compatibility first:</p>\n\n<ul>\n<li>Sqljdbc.jar requires a JRE of 5 and supports the JDBC 3.0 API </li>\n<li>Sqljdbc4.jar requires a JRE of 6 and supports the JDBC 4.0 API </li>\n<li>Sqljdbc41.jar requires a JRE of 7 and supports the JDBC 4.1 API </li>\n<li>Sqljdbc42.jar requires a JRE of 8 and supports the JDBC 4.2 API </li>\n</ul>\n\n<p>Source: <a href=\"https://www.microsoft.com/en-us/download/details.aspx?id=11774\" rel=\"noreferrer\">https://www.microsoft.com/en-us/download/details.aspx?id=11774</a></p>\n"},{"tags":[],"owner":{"account_id":3588415,"reputation":570,"user_id":2995001,"display_name":"Nikhil"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1491422856,"creation_date":1491422856,"answer_id":43240694,"question_id":32766114,"body_markdown":"Microsoft Recently open sourced their driver. One can see [mssql-jdbc][1] driver activity on GitHub. I guess latest preview version is 6.1.5. \r\n\r\nAlso you can find all preview versions on maven too. Supporting both JDK7 &amp; JDK 8.\r\n\r\n\r\n  [1]: https://github.com/Microsoft/mssql-jdbc","title":"SQL Server JDBC Error on Java 8: The driver could not establish a secure connection to SQL Server by using Secure Sockets Layer (SSL) encryption","body":"<p>Microsoft Recently open sourced their driver. One can see <a href=\"https://github.com/Microsoft/mssql-jdbc\" rel=\"nofollow noreferrer\">mssql-jdbc</a> driver activity on GitHub. I guess latest preview version is 6.1.5. </p>\n\n<p>Also you can find all preview versions on maven too. Supporting both JDK7 &amp; JDK 8.</p>\n"},{"tags":[],"owner":{"account_id":4218194,"reputation":21,"user_id":3453666,"display_name":"coolhand"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1496974295,"creation_date":1496974295,"answer_id":44448225,"question_id":32766114,"body_markdown":"I&#39;ve also hit this issue on Windows Server 2012 R2, using JDBC driver 4.0 &amp; 4.1 with Java 7.  This [Microsoft article](https://blogs.msdn.microsoft.com/dataaccesstechnologies/2016/11/30/intermittent-jdbc-connectivity-issue-the-driver-could-not-establish-a-secure-connection-to-sql-server-by-using-secure-sockets-layer-ssl-encryption-error-sql-server-returned-an-incomplete-respons/) pins the blame on DHE ciphersuites, and recommends disabling them or reducing their priority if you cannot upgrade to JDBC driver 4.2","title":"SQL Server JDBC Error on Java 8: The driver could not establish a secure connection to SQL Server by using Secure Sockets Layer (SSL) encryption","body":"<p>I've also hit this issue on Windows Server 2012 R2, using JDBC driver 4.0 &amp; 4.1 with Java 7.  This <a href=\"https://blogs.msdn.microsoft.com/dataaccesstechnologies/2016/11/30/intermittent-jdbc-connectivity-issue-the-driver-could-not-establish-a-secure-connection-to-sql-server-by-using-secure-sockets-layer-ssl-encryption-error-sql-server-returned-an-incomplete-respons/\" rel=\"nofollow noreferrer\">Microsoft article</a> pins the blame on DHE ciphersuites, and recommends disabling them or reducing their priority if you cannot upgrade to JDBC driver 4.2</p>\n"},{"tags":[],"owner":{"account_id":14782139,"reputation":2029,"user_id":10675401,"display_name":"Sunil Kumar"},"down_vote_count":1,"up_vote_count":199,"is_accepted":false,"score":198,"last_activity_date":1542641179,"creation_date":1542639375,"answer_id":53377246,"question_id":32766114,"body_markdown":"Your url should be like below and add sql sqljdbc42.jar. This will resolve your issue\r\n\r\n    url = &quot;jdbc:sqlserver://&quot; +serverName + &quot;:1433;DatabaseName=&quot; + dbName + &quot;;encrypt=true;trustServerCertificate=true;","title":"SQL Server JDBC Error on Java 8: The driver could not establish a secure connection to SQL Server by using Secure Sockets Layer (SSL) encryption","body":"<p>Your url should be like below and add sql sqljdbc42.jar. This will resolve your issue</p>\n\n<pre><code>url = \"jdbc:sqlserver://\" +serverName + \":1433;DatabaseName=\" + dbName + \";encrypt=true;trustServerCertificate=true;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":330384,"reputation":1345,"user_id":654471,"display_name":"cabaji99"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1552693680,"creation_date":1552693680,"answer_id":55192021,"question_id":32766114,"body_markdown":"In my case i had a sql server using the 3DES_EDE_CBC algorithm, this is disabled by default on jdk 1.8 , so checking the \r\n\r\n&gt; /Library/Java/JavaVirtualMachines/adoptopenjdk-8.jdk/Contents/Home/jre/lib/security/java.security\r\n\r\nAnd eliminating the algorithm from:\r\n\r\n&gt; jdk.tls.disabledAlgorithms=SSLv3, RC4, DES, MD5withRSA, DH keySize &lt;\r\n&gt; 1024, \\\r\n&gt;     EC keySize &lt; 224, 3DES_EDE_CBC, anon, NULL\r\n\r\nWorked for me.","title":"SQL Server JDBC Error on Java 8: The driver could not establish a secure connection to SQL Server by using Secure Sockets Layer (SSL) encryption","body":"<p>In my case i had a sql server using the 3DES_EDE_CBC algorithm, this is disabled by default on jdk 1.8 , so checking the </p>\n\n<blockquote>\n  <p>/Library/Java/JavaVirtualMachines/adoptopenjdk-8.jdk/Contents/Home/jre/lib/security/java.security</p>\n</blockquote>\n\n<p>And eliminating the algorithm from:</p>\n\n<blockquote>\n  <p>jdk.tls.disabledAlgorithms=SSLv3, RC4, DES, MD5withRSA, DH keySize &lt;\n  1024, \\\n      EC keySize &lt; 224, 3DES_EDE_CBC, anon, NULL</p>\n</blockquote>\n\n<p>Worked for me.</p>\n"},{"tags":[],"owner":{"account_id":7704367,"reputation":111,"user_id":5835746,"display_name":"eby"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1572373887,"creation_date":1572373887,"answer_id":58613453,"question_id":32766114,"body_markdown":"In my case, the issue was because the app was set to use spring-boot-ext-security-starter-credhub-credential and there were some issues with that setup.\r\n\r\nSo I removed credhub from the manifest file and pom and fetched credentials in a different way; then the error was gone.","title":"SQL Server JDBC Error on Java 8: The driver could not establish a secure connection to SQL Server by using Secure Sockets Layer (SSL) encryption","body":"<p>In my case, the issue was because the app was set to use spring-boot-ext-security-starter-credhub-credential and there were some issues with that setup.</p>\n\n<p>So I removed credhub from the manifest file and pom and fetched credentials in a different way; then the error was gone.</p>\n"},{"tags":[],"owner":{"account_id":9559927,"reputation":385,"user_id":7101158,"accept_rate":83,"display_name":"yolob 21"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1615375960,"creation_date":1615375960,"answer_id":66563921,"question_id":32766114,"body_markdown":"If the server name in the connection string does not match the server name in the SQL Server SSL certificate, the following error will be issued: The driver could not establish a secure connection to SQL Server by using Secure Sockets Layer (SSL) encryption. Error: &quot;java.security.cert.CertificateException: Failed to validate the server name in a certificate during Secure Sockets Layer (SSL) initialization.&quot;\r\n\r\nThis helped me resolve the issue. Was using the localhost in servername, finally changing in jdbc connection string to the same name as the CN was able to connect.\r\n\r\nRefer: https://wiki.deepnetsecurity.com/pages/viewpage.action?pageId=1410867 for more info","title":"SQL Server JDBC Error on Java 8: The driver could not establish a secure connection to SQL Server by using Secure Sockets Layer (SSL) encryption","body":"<p>If the server name in the connection string does not match the server name in the SQL Server SSL certificate, the following error will be issued: The driver could not establish a secure connection to SQL Server by using Secure Sockets Layer (SSL) encryption. Error: &quot;java.security.cert.CertificateException: Failed to validate the server name in a certificate during Secure Sockets Layer (SSL) initialization.&quot;</p>\n<p>This helped me resolve the issue. Was using the localhost in servername, finally changing in jdbc connection string to the same name as the CN was able to connect.</p>\n<p>Refer: <a href=\"https://wiki.deepnetsecurity.com/pages/viewpage.action?pageId=1410867\" rel=\"nofollow noreferrer\">https://wiki.deepnetsecurity.com/pages/viewpage.action?pageId=1410867</a> for more info</p>\n"},{"tags":[],"owner":{"account_id":9090019,"reputation":99,"user_id":6766297,"display_name":"nby"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1629039750,"creation_date":1629039408,"answer_id":68792695,"question_id":32766114,"body_markdown":"Like @2Aguy wrote, you can change the JVM parameter. \r\nIn my case I couldn&#39;t change it, and used the connection string &quot;[sslProtocol](https://github.com/Microsoft/mssql-jdbc/wiki/SSLProtocol)&quot; parameter, lowering the connection to TLSV1.\r\n\r\n&gt; Connection String:\r\njdbc:sqlserver://\\&lt;HOST\\&gt;:\\&lt;PORT\\&gt;;encrypt=true;trustServerCertificate=true;sslProtocol=TLSv1;database=\\&lt;DB NAME\\&gt;","title":"SQL Server JDBC Error on Java 8: The driver could not establish a secure connection to SQL Server by using Secure Sockets Layer (SSL) encryption","body":"<p>Like @2Aguy wrote, you can change the JVM parameter.\nIn my case I couldn't change it, and used the connection string &quot;<a href=\"https://github.com/Microsoft/mssql-jdbc/wiki/SSLProtocol\" rel=\"nofollow noreferrer\">sslProtocol</a>&quot; parameter, lowering the connection to TLSV1.</p>\n<blockquote>\n<p>Connection String:\njdbc:sqlserver://&lt;HOST&gt;:&lt;PORT&gt;;encrypt=true;trustServerCertificate=true;sslProtocol=TLSv1;database=&lt;DB NAME&gt;</p>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":8520391,"reputation":190,"user_id":6387539,"display_name":"Martin Karari"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1631117682,"creation_date":1631117682,"answer_id":69106514,"question_id":32766114,"body_markdown":"I had this issue recently after doing a yum update in a client&#39;s server running RedHat 7. Since the above thread did not help me resolve my issue, I am posting this answer.\r\n\r\nIssue:-\r\nYum update in RedHat automatically reinstalls OpenJDK , my applications use oracle JDK. \r\nVerifying Default JDK:\r\n&gt; java version \r\nSwitch the default version:\r\n\r\n update-alternatives --config java\r\n\r\nThere are 2 programs which provide &#39;java&#39;.\r\n\r\n  Selection    Command\r\n-----------------------------------------------\r\n*  1           java-1.8.0-openjdk.x86_64 (/usr/lib/jvm/java-1.8.0-openjdk-1.8.0.302.b08-0.el7_9.x86_64/jre/bin/java)\r\n + 2           /usr/java/jdk1.8.0_181-amd64/jre/bin/java\r\n\r\nEnter to keep the current selection[+], or type selection number:\r\n\r\nEnter the number alongside the appropriate version you want to us and hit enter.\r\n\r\n","title":"SQL Server JDBC Error on Java 8: The driver could not establish a secure connection to SQL Server by using Secure Sockets Layer (SSL) encryption","body":"<p>I had this issue recently after doing a yum update in a client's server running RedHat 7. Since the above thread did not help me resolve my issue, I am posting this answer.</p>\n<p>Issue:-\nYum update in RedHat automatically reinstalls OpenJDK , my applications use oracle JDK.\nVerifying Default JDK:</p>\n<blockquote>\n<p>java version\nSwitch the default version:</p>\n</blockquote>\n<p>update-alternatives --config java</p>\n<p>There are 2 programs which provide 'java'.</p>\n<h2>Selection    Command</h2>\n<ul>\n<li>1           java-1.8.0-openjdk.x86_64 (/usr/lib/jvm/java-1.8.0-openjdk-1.8.0.302.b08-0.el7_9.x86_64/jre/bin/java)</li>\n</ul>\n<ul>\n<li>2           /usr/java/jdk1.8.0_181-amd64/jre/bin/java</li>\n</ul>\n<p>Enter to keep the current selection[+], or type selection number:</p>\n<p>Enter the number alongside the appropriate version you want to us and hit enter.</p>\n"},{"tags":[],"owner":{"account_id":24262350,"reputation":19,"user_id":18211759,"display_name":"Leo"},"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1644917748,"creation_date":1644917748,"answer_id":71124098,"question_id":32766114,"body_markdown":"I have fixed the issue on my local enviroment, it mainly contains two steps below.\r\n\r\n 1. Switch the JDBC Driver dependency like below if your project is built by maven:\r\n\r\n\r\n\r\n&lt;!-- begin snippet: js hide: false console: true babel: false --&gt;\r\n\r\n&lt;!-- language: xml --&gt;\r\n\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;net.sourceforge.jtds&lt;/groupId&gt;\r\n      &lt;artifactId&gt;jtds&lt;/artifactId&gt;\r\n      &lt;version&gt;1.3.1&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n\r\n&lt;!-- end snippet --&gt;\r\n\r\n  2.Replace the Driver Class Name additionally:\r\n\r\n    ru.yandex.clickhouse.ClickHouseDriver\r\n\r\n  3.Modify the JDBC URL like this:\r\n\r\n    jdbc:jtds:sqlserver://xxxx:1433;databaseName=xxx\r\n\r\n","title":"SQL Server JDBC Error on Java 8: The driver could not establish a secure connection to SQL Server by using Secure Sockets Layer (SSL) encryption","body":"<p>I have fixed the issue on my local enviroment, it mainly contains two steps below.</p>\n<ol>\n<li>Switch the JDBC Driver dependency like below if your project is built by maven:</li>\n</ol>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;dependency&gt;\n  &lt;groupId&gt;net.sourceforge.jtds&lt;/groupId&gt;\n  &lt;artifactId&gt;jtds&lt;/artifactId&gt;\n  &lt;version&gt;1.3.1&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>2.Replace the Driver Class Name additionally:</p>\n<pre><code>ru.yandex.clickhouse.ClickHouseDriver\n</code></pre>\n<p>3.Modify the JDBC URL like this:</p>\n<pre><code>jdbc:jtds:sqlserver://xxxx:1433;databaseName=xxx\n</code></pre>\n"},{"tags":[],"owner":{"account_id":24864911,"reputation":41,"user_id":18740148,"display_name":"Application Automation"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1689234226,"creation_date":1649362217,"answer_id":71788357,"question_id":32766114,"body_markdown":"Thanks to @Sunil Kumar and @Joce.\r\nI used the jar and below syntax:\r\n```\r\nString myDriver = &quot;com.microsoft.jdbc.sqlserver.SQLServerDriver&quot;;\r\n\r\nString myURL = &quot;jdbc:sqlserver://DB_ipaddress\\\\DB_instance;&quot; +\r\n               &quot;databaseName=DB_name;&quot; +\r\n               &quot;user=myusername;&quot; +\r\n               &quot;password=mypass;&quot; +\r\n               &quot;encrypt=true;&quot; +\r\n               &quot;trustServerCertificate=true;&quot;; // here the semicolon will be twice like shown\r\n\r\nConnection con = DriverManager.getConnection(myURL);\r\n```","title":"SQL Server JDBC Error on Java 8: The driver could not establish a secure connection to SQL Server by using Secure Sockets Layer (SSL) encryption","body":"<p>Thanks to @Sunil Kumar and @Joce.\nI used the jar and below syntax:</p>\n<pre><code>String myDriver = &quot;com.microsoft.jdbc.sqlserver.SQLServerDriver&quot;;\n\nString myURL = &quot;jdbc:sqlserver://DB_ipaddress\\\\DB_instance;&quot; +\n               &quot;databaseName=DB_name;&quot; +\n               &quot;user=myusername;&quot; +\n               &quot;password=mypass;&quot; +\n               &quot;encrypt=true;&quot; +\n               &quot;trustServerCertificate=true;&quot;; // here the semicolon will be twice like shown\n\nConnection con = DriverManager.getConnection(myURL);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":13406436,"reputation":2189,"user_id":9895452,"display_name":"Sandeep Patel"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1652270503,"creation_date":1652270503,"answer_id":72200723,"question_id":32766114,"body_markdown":"I have also faced same issue while creating connection to the database with below connection string.\r\n\r\n    DriverManager.getConnection(&quot;jdbc:sqlserver://&quot; + host + &quot;:&quot; + port + &quot;;databaseName=&quot; + dbName + &quot;;user=&quot; + userName + &quot;;password=&quot; + password);\r\n\r\nAfter updating connection string as below, it worked.\r\n\r\n    Connection con = DriverManager.getConnection(&quot;jdbc:sqlserver://&quot; + host + &quot;:&quot; + port + &quot;;databaseName=&quot; + dbName + &quot;;encrypt=true;trustServerCertificate=true;user=&quot; + userName + &quot;;password=&quot; + password);\r\n\r\nhere i have added `encrypt=true;trustServerCertificate=true` after the database name.","title":"SQL Server JDBC Error on Java 8: The driver could not establish a secure connection to SQL Server by using Secure Sockets Layer (SSL) encryption","body":"<p>I have also faced same issue while creating connection to the database with below connection string.</p>\n<pre><code>DriverManager.getConnection(&quot;jdbc:sqlserver://&quot; + host + &quot;:&quot; + port + &quot;;databaseName=&quot; + dbName + &quot;;user=&quot; + userName + &quot;;password=&quot; + password);\n</code></pre>\n<p>After updating connection string as below, it worked.</p>\n<pre><code>Connection con = DriverManager.getConnection(&quot;jdbc:sqlserver://&quot; + host + &quot;:&quot; + port + &quot;;databaseName=&quot; + dbName + &quot;;encrypt=true;trustServerCertificate=true;user=&quot; + userName + &quot;;password=&quot; + password);\n</code></pre>\n<p>here i have added <code>encrypt=true;trustServerCertificate=true</code> after the database name.</p>\n"},{"tags":[],"owner":{"account_id":25139388,"reputation":126,"user_id":18985864,"display_name":"Ruhul Hussain"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1652297954,"creation_date":1652297954,"answer_id":72206760,"question_id":32766114,"body_markdown":"Issue got resolved for me when I changed the sqljdbc-4.2.0 jar with mssql-jdbc-8.4.1 jar\r\n\r\n    &lt;dependency&gt;\r\n\t\t  &lt;groupId&gt;com.microsoft.sqlserver&lt;/groupId&gt;\r\n\t\t  &lt;artifactId&gt;mssql-jdbc&lt;/artifactId&gt;\r\n\t\t  &lt;version&gt;8.4.1.jre8&lt;/version&gt;\r\n\t&lt;/dependency&gt;\r\n\r\n\r\n","title":"SQL Server JDBC Error on Java 8: The driver could not establish a secure connection to SQL Server by using Secure Sockets Layer (SSL) encryption","body":"<p>Issue got resolved for me when I changed the sqljdbc-4.2.0 jar with mssql-jdbc-8.4.1 jar</p>\n<pre><code>&lt;dependency&gt;\n      &lt;groupId&gt;com.microsoft.sqlserver&lt;/groupId&gt;\n      &lt;artifactId&gt;mssql-jdbc&lt;/artifactId&gt;\n      &lt;version&gt;8.4.1.jre8&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":19187848,"reputation":566,"user_id":14018249,"display_name":"RepentAndBelieveTheGospel"},"down_vote_count":0,"up_vote_count":37,"is_accepted":false,"score":37,"last_activity_date":1653474877,"creation_date":1653474877,"answer_id":72376020,"question_id":32766114,"body_markdown":"In case someone arrives here looking for a solution to connect to a database from PhpStorm, just add the following after the port in the URL:\r\n\r\n    ;encrypt=true;trustServerCertificate=true;\r\n\r\n[![enter image description here][1]][1]\r\n\r\nI got the solution from this comment: https://stackoverflow.com/questions/32766114/sql-server-jdbc-error-on-java-8-the-driver-could-not-establish-a-secure-connect#comment126721395_53377246\r\n\r\nThank you so much! Can confirm it&#39;s working on PhpStorm 2022.1.1.\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/hkJiW.png","title":"SQL Server JDBC Error on Java 8: The driver could not establish a secure connection to SQL Server by using Secure Sockets Layer (SSL) encryption","body":"<p>In case someone arrives here looking for a solution to connect to a database from PhpStorm, just add the following after the port in the URL:</p>\n<pre><code>;encrypt=true;trustServerCertificate=true;\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/hkJiW.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/hkJiW.png\" alt=\"enter image description here\" /></a></p>\n<p>I got the solution from this comment: <a href=\"https://stackoverflow.com/questions/32766114/sql-server-jdbc-error-on-java-8-the-driver-could-not-establish-a-secure-connect#comment126721395_53377246\">SQL Server JDBC Error on Java 8: The driver could not establish a secure connection to SQL Server by using Secure Sockets Layer (SSL) encryption</a></p>\n<p>Thank you so much! Can confirm it's working on PhpStorm 2022.1.1.</p>\n"},{"tags":[],"owner":{"account_id":20621322,"reputation":119,"user_id":15138287,"display_name":"S3D"},"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1681286979,"creation_date":1653832876,"answer_id":72424311,"question_id":32766114,"body_markdown":" - application.properties:\r\n```\r\n    spring.datasource.url=jdbc:sqlserver://&lt;YourServerName&gt;:1433;database=&lt;YourDatabaseName&gt;;encrypt=true;trustServerCertificate=true;\r\n    spring.datasource.username=root\r\n    spring.datasource.password=1234\r\n    spring.datasource.driverClassName=com.microsoft.sqlserver.jdbc.SQLServerDriver\r\n    spring.jpa.show-sql=true\r\n    spring.jpa.hibernate.dialect=org.hibernate.dialect.SQLServer2012Dialect\r\n    spring.jpa.properties.hibernate.globally_quoted_identifiers=true\r\n    spring.jpa.hibernate.ddl-auto = create-drop\r\n```","title":"SQL Server JDBC Error on Java 8: The driver could not establish a secure connection to SQL Server by using Secure Sockets Layer (SSL) encryption","body":"<ul>\n<li>application.properties:</li>\n</ul>\n<pre><code>    spring.datasource.url=jdbc:sqlserver://&lt;YourServerName&gt;:1433;database=&lt;YourDatabaseName&gt;;encrypt=true;trustServerCertificate=true;\n    spring.datasource.username=root\n    spring.datasource.password=1234\n    spring.datasource.driverClassName=com.microsoft.sqlserver.jdbc.SQLServerDriver\n    spring.jpa.show-sql=true\n    spring.jpa.hibernate.dialect=org.hibernate.dialect.SQLServer2012Dialect\n    spring.jpa.properties.hibernate.globally_quoted_identifiers=true\n    spring.jpa.hibernate.ddl-auto = create-drop\n</code></pre>\n"},{"tags":[],"owner":{"account_id":16735950,"reputation":437,"user_id":12097072,"display_name":"stoneshishang"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1655470890,"creation_date":1655470890,"answer_id":72659806,"question_id":32766114,"body_markdown":"For me I add to add     `Class.forName(&quot;com.microsoft.sqlserver.jdbc.SQLServerDriver&quot;);`\r\n between the two lines      \r\n\r\n`DriverManager.registerDriver(new com.microsoft.sqlserver.jdbc.SQLServerDriver());`\r\n\r\n `Connection con = DriverManager.getConnection(connectionUrl);`\r\n\r\n\r\nSo the final code for the connection would be:\r\n\r\n        DriverManager.registerDriver(new com.microsoft.sqlserver.jdbc.SQLServerDriver());\r\n        Class.forName(&quot;com.microsoft.sqlserver.jdbc.SQLServerDriver&quot;);\r\n        Connection con = DriverManager.getConnection(connectionUrl);","title":"SQL Server JDBC Error on Java 8: The driver could not establish a secure connection to SQL Server by using Secure Sockets Layer (SSL) encryption","body":"<p>For me I add to add     <code>Class.forName(&quot;com.microsoft.sqlserver.jdbc.SQLServerDriver&quot;);</code>\nbetween the two lines</p>\n<p><code>DriverManager.registerDriver(new com.microsoft.sqlserver.jdbc.SQLServerDriver());</code></p>\n<p><code>Connection con = DriverManager.getConnection(connectionUrl);</code></p>\n<p>So the final code for the connection would be:</p>\n<pre><code>    DriverManager.registerDriver(new com.microsoft.sqlserver.jdbc.SQLServerDriver());\n    Class.forName(&quot;com.microsoft.sqlserver.jdbc.SQLServerDriver&quot;);\n    Connection con = DriverManager.getConnection(connectionUrl);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":11533061,"reputation":149,"user_id":8451437,"display_name":"Juan hernan jaime arias"},"down_vote_count":0,"up_vote_count":14,"is_accepted":false,"score":14,"last_activity_date":1657009656,"creation_date":1656942475,"answer_id":72857788,"question_id":32766114,"body_markdown":"Using openjdk 11 it&#39;s possible to add the following properties to the connection URL in order to force the use of SSL\r\n\r\n`;integratedSecurity=false;encrypt=false;trustServerCertificate=true;`","title":"SQL Server JDBC Error on Java 8: The driver could not establish a secure connection to SQL Server by using Secure Sockets Layer (SSL) encryption","body":"<p>Using openjdk 11 it's possible to add the following properties to the connection URL in order to force the use of SSL</p>\n<p><code>;integratedSecurity=false;encrypt=false;trustServerCertificate=true;</code></p>\n"},{"tags":[],"owner":{"account_id":3532567,"reputation":349,"user_id":2951657,"display_name":"Thuan Tran"},"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1663257826,"creation_date":1663257496,"answer_id":73734198,"question_id":32766114,"body_markdown":"Add `;encrypt=true;trustServerCertificate=true` into connection.url. Example \r\n\r\njdbc:sqlserver://localhost\\\\SQLEXPRESS:1433;databaseName=testdb;encrypt=true;trustServerCertificate=true\r\n\r\nAnd check Compatible compiler version java in pom file with version jre of mssql-jdbc of maven. Like this\r\n\r\n    &lt;maven.compiler.source&gt;1.8&lt;/maven.compiler.source&gt;\r\n    &lt;maven.compiler.target&gt;1.8&lt;/maven.compiler.target&gt;\r\nAnd \r\n\r\n    &lt;dependency&gt;\r\n    \t&lt;groupId&gt;com.microsoft.sqlserver&lt;/groupId&gt;\r\n    \t&lt;artifactId&gt;mssql-jdbc&lt;/artifactId&gt;\r\n    \t&lt;version&gt;11.2.1.jre8&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\ncompiler 1.8 and jre8 ","title":"SQL Server JDBC Error on Java 8: The driver could not establish a secure connection to SQL Server by using Secure Sockets Layer (SSL) encryption","body":"<p>Add <code>;encrypt=true;trustServerCertificate=true</code> into connection.url. Example</p>\n<p>jdbc:sqlserver://localhost\\SQLEXPRESS:1433;databaseName=testdb;encrypt=true;trustServerCertificate=true</p>\n<p>And check Compatible compiler version java in pom file with version jre of mssql-jdbc of maven. Like this</p>\n<pre><code>&lt;maven.compiler.source&gt;1.8&lt;/maven.compiler.source&gt;\n&lt;maven.compiler.target&gt;1.8&lt;/maven.compiler.target&gt;\n</code></pre>\n<p>And</p>\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;com.microsoft.sqlserver&lt;/groupId&gt;\n    &lt;artifactId&gt;mssql-jdbc&lt;/artifactId&gt;\n    &lt;version&gt;11.2.1.jre8&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>compiler 1.8 and jre8</p>\n"},{"tags":[],"owner":{"account_id":23074024,"reputation":1,"user_id":17187240,"display_name":"Benny Cohen"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1670285896,"creation_date":1670285896,"answer_id":74695879,"question_id":32766114,"body_markdown":"If you came here for Ignition 8.1+ error, and you&#39;re using MSSQL express on your local host, at your &quot;Connect URL&quot; put this: jdbc:sqlserver://localhost\\SQLEXPRESS; encrypt=true;trustServerCertificate=true;\r\n[URL settings][1]\r\n\r\n\r\n[Valid connection][2]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/6J4Os.png\r\n  [2]: https://i.stack.imgur.com/g55t0.png","title":"SQL Server JDBC Error on Java 8: The driver could not establish a secure connection to SQL Server by using Secure Sockets Layer (SSL) encryption","body":"<p>If you came here for Ignition 8.1+ error, and you're using MSSQL express on your local host, at your &quot;Connect URL&quot; put this: jdbc:sqlserver://localhost\\SQLEXPRESS; encrypt=true;trustServerCertificate=true;\n<a href=\"https://i.stack.imgur.com/6J4Os.png\" rel=\"nofollow noreferrer\">URL settings</a></p>\n<p><a href=\"https://i.stack.imgur.com/g55t0.png\" rel=\"nofollow noreferrer\">Valid connection</a></p>\n"},{"tags":[],"owner":{"account_id":17384819,"reputation":1,"user_id":12596334,"display_name":"Jaeger"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1677511501,"creation_date":1677143372,"answer_id":75542658,"question_id":32766114,"body_markdown":"    setTrustServerCertificate(true); \r\n\r\nWorked for me. ","title":"SQL Server JDBC Error on Java 8: The driver could not establish a secure connection to SQL Server by using Secure Sockets Layer (SSL) encryption","body":"<pre><code>setTrustServerCertificate(true); \n</code></pre>\n<p>Worked for me.</p>\n"},{"tags":[],"owner":{"account_id":21954229,"reputation":31,"user_id":16233040,"display_name":"Nithin karthick"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1678873443,"creation_date":1678873314,"answer_id":75742909,"question_id":32766114,"body_markdown":"I have faced this issue while connecting SQL database. Faced this issue because of incorrect JAR file. \r\n\r\nConnection URL that I used\r\n\r\n     &quot;jdbc:sqlserver://localhost:8080;databaseName=db_name;encrypt=true;trustServerCertificate=true&quot;;\r\n\r\nBefore I used **&quot;sqljdbc4-2.0.jar&quot;** JAR file, it won&#39;t work for me.\r\n\r\nOnce I changed this JAR file then it worked fine\r\n\r\n**mssql-jdbc-8.4.1.jre8.jar**","title":"SQL Server JDBC Error on Java 8: The driver could not establish a secure connection to SQL Server by using Secure Sockets Layer (SSL) encryption","body":"<p>I have faced this issue while connecting SQL database. Faced this issue because of incorrect JAR file.</p>\n<p>Connection URL that I used</p>\n<pre><code> &quot;jdbc:sqlserver://localhost:8080;databaseName=db_name;encrypt=true;trustServerCertificate=true&quot;;\n</code></pre>\n<p>Before I used <strong>&quot;sqljdbc4-2.0.jar&quot;</strong> JAR file, it won't work for me.</p>\n<p>Once I changed this JAR file then it worked fine</p>\n<p><strong>mssql-jdbc-8.4.1.jre8.jar</strong></p>\n"},{"tags":[],"owner":{"account_id":8543734,"reputation":19,"user_id":6659239,"display_name":"Alireza Abolhasani"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1690993302,"creation_date":1690992973,"answer_id":76821767,"question_id":32766114,"body_markdown":"We can find answer of this question in below page:\r\n\r\nhttps://learn.microsoft.com/en-us/sql/connect/jdbc/connecting-with-ssl-encryption?view=sql-server-ver16\r\n\r\nAnswer:&quot;;**integratedSecurity**=true;&quot; +\r\n     &quot;**encrypt**=true;**trustServerCertificate**=true&quot;;&quot;","title":"SQL Server JDBC Error on Java 8: The driver could not establish a secure connection to SQL Server by using Secure Sockets Layer (SSL) encryption","body":"<p>We can find answer of this question in below page:</p>\n<p><a href=\"https://learn.microsoft.com/en-us/sql/connect/jdbc/connecting-with-ssl-encryption?view=sql-server-ver16\" rel=\"nofollow noreferrer\">https://learn.microsoft.com/en-us/sql/connect/jdbc/connecting-with-ssl-encryption?view=sql-server-ver16</a></p>\n<p>Answer:&quot;;<strong>integratedSecurity</strong>=true;&quot; +\n&quot;<strong>encrypt</strong>=true;<strong>trustServerCertificate</strong>=true&quot;;&quot;</p>\n"},{"tags":[],"owner":{"account_id":19317135,"reputation":177,"user_id":14121652,"display_name":"Gift Ntokozo Mavuso"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1692306144,"creation_date":1692306144,"answer_id":76925107,"question_id":32766114,"body_markdown":"What ended up working for me was updating to the latest mssql jdbc driver and then making sure I use the fully qualified domain name as it appears on the SSL certificate of the SQL server.","title":"SQL Server JDBC Error on Java 8: The driver could not establish a secure connection to SQL Server by using Secure Sockets Layer (SSL) encryption","body":"<p>What ended up working for me was updating to the latest mssql jdbc driver and then making sure I use the fully qualified domain name as it appears on the SSL certificate of the SQL server.</p>\n"}],"owner":{"account_id":1377055,"reputation":4155,"user_id":1310865,"accept_rate":50,"display_name":"2Aguy"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":332962,"favorite_count":0,"down_vote_count":0,"up_vote_count":108,"accepted_answer_id":32766115,"answer_count":25,"score":108,"last_activity_date":1692306144,"creation_date":1443110967,"question_id":32766114,"body_markdown":"I am getting the following error when connecting to a SQL Server database using version the Microsoft JDBC Driver:\r\n\r\n&gt; com.microsoft.sqlserver.jdbc.SQLServerException: The driver could not establish a secure connection to SQL Server by using Secure Sockets Layer (SSL) encryption. Error: &quot;SQL Server returned an incomplete response. The connection has been closed. ClientConnectionId:98d0b6f4-f3ca-4683-939e-7c0a0fca5931&quot;.\r\n\r\nWe recently upgraded our applications from Java 6 &amp; Java 7 to Java 8.  All systems running Java are running SUSE Linux Enterprise Server 11 (x86_64), VERSION = 11, PATCHLEVEL = 3.\r\n\r\nHere are the facts I have collected with a Java program that I wrote which simply sequentially opens and closes 1,000 database connections.\r\n\r\n - Connections are dropped with this error about 5%-10% of the time.  The error DOES NOT occur on every connection.\r\n - The problem ONLY occurs with Java 8.  I ran the same program on Java 7 and the problem is not reproducible.  This is consistent with our experience in production prior to upgrading.  We&#39;ve had zero problems running under Java 7 in production.\r\n - The problem DOES NOT occur on all of our Linux servers running Java 8, it only occurs on some of them.  This is perplexing to me, but when I run the same test program on the same version of the Linux JVM (1.8.0_60, 64 bit) on different Linux instances, the problem does not occur on one of the Linux instances, but the problem does occur on others.  The Linux instances are running the same version of SUSE and they are at the same patch level.\r\n - The problem occurs when connecting to BOTH SQL Server 2008 and SQL Server 2014 servers/databases.\r\n - The problem occurs regardless if I am using the 4.0 version of the SQL Server JDBC driver or the newer 4.1 version of the driver.\r\n\r\nThe thing that makes my observations unique on this compared to others on the web is that although the problem happens ONLY on Java 8, I cannot get the problem to occur on one of the seemingly identical Linux servers that is running the same Java 8 JVM.  Other folks have seen this problem on earlier versions of Java as well, but that has not been our experience.\r\n\r\nAny input, suggestions, or observations you may have are appreciated.\r\n\r\n\r\n\r\n","title":"SQL Server JDBC Error on Java 8: The driver could not establish a secure connection to SQL Server by using Secure Sockets Layer (SSL) encryption","body":"<p>I am getting the following error when connecting to a SQL Server database using version the Microsoft JDBC Driver:</p>\n\n<blockquote>\n  <p>com.microsoft.sqlserver.jdbc.SQLServerException: The driver could not establish a secure connection to SQL Server by using Secure Sockets Layer (SSL) encryption. Error: \"SQL Server returned an incomplete response. The connection has been closed. ClientConnectionId:98d0b6f4-f3ca-4683-939e-7c0a0fca5931\".</p>\n</blockquote>\n\n<p>We recently upgraded our applications from Java 6 &amp; Java 7 to Java 8.  All systems running Java are running SUSE Linux Enterprise Server 11 (x86_64), VERSION = 11, PATCHLEVEL = 3.</p>\n\n<p>Here are the facts I have collected with a Java program that I wrote which simply sequentially opens and closes 1,000 database connections.</p>\n\n<ul>\n<li>Connections are dropped with this error about 5%-10% of the time.  The error DOES NOT occur on every connection.</li>\n<li>The problem ONLY occurs with Java 8.  I ran the same program on Java 7 and the problem is not reproducible.  This is consistent with our experience in production prior to upgrading.  We've had zero problems running under Java 7 in production.</li>\n<li>The problem DOES NOT occur on all of our Linux servers running Java 8, it only occurs on some of them.  This is perplexing to me, but when I run the same test program on the same version of the Linux JVM (1.8.0_60, 64 bit) on different Linux instances, the problem does not occur on one of the Linux instances, but the problem does occur on others.  The Linux instances are running the same version of SUSE and they are at the same patch level.</li>\n<li>The problem occurs when connecting to BOTH SQL Server 2008 and SQL Server 2014 servers/databases.</li>\n<li>The problem occurs regardless if I am using the 4.0 version of the SQL Server JDBC driver or the newer 4.1 version of the driver.</li>\n</ul>\n\n<p>The thing that makes my observations unique on this compared to others on the web is that although the problem happens ONLY on Java 8, I cannot get the problem to occur on one of the seemingly identical Linux servers that is running the same Java 8 JVM.  Other folks have seen this problem on earlier versions of Java as well, but that has not been our experience.</p>\n\n<p>Any input, suggestions, or observations you may have are appreciated.</p>\n"},{"tags":["java","logging","configuration","log4j","log4j2"],"answers":[{"tags":[],"owner":{"account_id":16269349,"reputation":13452,"user_id":11748454,"display_name":"Piotr P. Karwasz"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1692305988,"creation_date":1692300734,"answer_id":76924586,"question_id":76919416,"body_markdown":"A Log4j [`Message`](https://logging.apache.org/log4j/2.x/log4j-api/apidocs/org/apache/logging/log4j/message/Message.html) is composed of:\r\n - a format and some parameters, which are interpolated to give you a formatted message. In your case it is:\r\n   ```\r\n   Initiating transaction rollback on application exception\r\n   ```\r\n - an optional `Throwable` that is formatted similarly to `Throwable#printStackTrace()`:\r\n   ```\r\n   javax.jms.IllegalStateException: JMS-131: Session is closed\r\n       at oracle.jms.AQjmsError.throwIllegalStateEx(AQjmsError.java:514) ~[aqapi-12.2.0.1.0.jar:?]\r\n       at oracle.jms.AQjmsSession.checkSessionStarted(AQjmsSession.java:5521) ~[aqapi-12.2.0.1.0.jar:?]\r\n       at oracle.jms.AQjmsSession.getTransacted(AQjmsSession.java:1015) ~[aqapi-12.2.0.1.0.jar:?]\r\n   ```\r\n\r\nThe `RegexFilter` (cf. [documentation](https://logging.apache.org/log4j/2.x/manual/filters.html#RegexFilter)) only matches the formatted (or unformatted) message. The throwable is not used by this filter or any other of the standard filters.\r\n\r\nFortunately Log4j Core is very extensible and writing a new filter is a couple dozen lines:\r\n```lang-java\r\n@Plugin(name = &quot;ThrowableMessageFilter&quot;, category = Node.CATEGORY, elementType = Filter.ELEMENT_TYPE)\r\npublic class ThrowableMessageFilter extends AbstractFilter {\r\n\r\n    @PluginFactory\r\n    public static ThrowableMessageFilter createFilter(@PluginAttribute(&quot;regex&quot;) final String regex,\r\n            @PluginAttribute(&quot;onMatch&quot;) final Result onMatch, @PluginAttribute(&quot;onMismatch&quot;) final Result onMismatch) {\r\n        if (regex == null) {\r\n            LOGGER.error(&quot;A regular expression must be provided for ThrowableMessageFilter&quot;);\r\n            return null;\r\n        }\r\n        return new ThrowableMessageFilter(Pattern.compile(regex), onMatch, onMismatch);\r\n    }\r\n\r\n    private final Pattern pattern;\r\n\r\n    private ThrowableMessageFilter(final Pattern pattern, final Result onMatch, final Result onMismatch) {\r\n        super(onMatch, onMismatch);\r\n        this.pattern = pattern;\r\n    }\r\n\r\n    private Result filter(final String message) {\r\n        if (message == null) {\r\n            return onMismatch;\r\n        }\r\n        final Matcher m = pattern.matcher(message);\r\n        return m.matches() ? onMatch : onMismatch;\r\n    }\r\n\r\n    @Override\r\n    public Result filter(LogEvent event) {\r\n        final Throwable t = event.getThrown();\r\n        return t != null ? filter(t.getMessage()) : onMismatch;\r\n    }\r\n}\r\n```\r\n\r\nYou can then use it as:\r\n```lang-xml\r\n&lt;Logger name=&quot;oracle.jms.AQjmsError&quot; additivity=&quot;false&quot;&gt;\r\n  &lt;AppenderRef ref=&quot;OtherFile&quot;&gt;\r\n    &lt;ThrowableMessageFilter regex=&quot;.*JMS-131.*&quot;\r\n                            onMatch=&quot;ACCEPT&quot;\r\n                            onMismatch=&quot;DENY&quot;/&gt;\r\n  &lt;/AppenderRef&gt;\r\n&lt;/Logger&gt;\r\n```\r\n&lt;/Logger&gt;\r\n\r\n**Edit:** For a temporary solution you can also use `ScriptFilter` (cf. [documentation](https://logging.apache.org/log4j/2.x/manual/filters.html#Script)). To use it you need:\r\n * a scripting engine like [Nashorn](https://github.com/openjdk/nashorn), which was available up to JRE 14 and is available standalone for JRE 15+,\r\n * add the scripting language used to the list of allowed languages by listing it in the system property `log4j2.scriptEnableLanguages` (e.g. by adding `-Dlog4j2.scriptEnableLanguages=javascript` to the JVM arguments),\r\n * write a script to match your exception, e.g.:\r\n   ```lang-xml\r\n   &lt;ScriptFilter onMatch=&quot;ACCEPT&quot; onMismatch=&quot;DENY&quot;&gt;\r\n     &lt;Script language=&quot;javascript&quot;&gt;&lt;![CDATA[\r\n       var t = logEvent.getThrown();\r\n       if (t != null) {\r\n         var m = t.getMessage();\r\n         m != null ? m.contains(&quot;JMS-131&quot;) : false;\r\n       } else {\r\n         false;\r\n       }\r\n     ]]&gt;&lt;/Script&gt;\r\n   &lt;/ScriptFilter&gt;\r\n   ```","title":"Log4j - How to log specific exception into a separate file?","body":"<p>A Log4j <a href=\"https://logging.apache.org/log4j/2.x/log4j-api/apidocs/org/apache/logging/log4j/message/Message.html\" rel=\"nofollow noreferrer\"><code>Message</code></a> is composed of:</p>\n<ul>\n<li>a format and some parameters, which are interpolated to give you a formatted message. In your case it is:\n<pre><code>Initiating transaction rollback on application exception\n</code></pre>\n</li>\n<li>an optional <code>Throwable</code> that is formatted similarly to <code>Throwable#printStackTrace()</code>:\n<pre><code>javax.jms.IllegalStateException: JMS-131: Session is closed\n    at oracle.jms.AQjmsError.throwIllegalStateEx(AQjmsError.java:514) ~[aqapi-12.2.0.1.0.jar:?]\n    at oracle.jms.AQjmsSession.checkSessionStarted(AQjmsSession.java:5521) ~[aqapi-12.2.0.1.0.jar:?]\n    at oracle.jms.AQjmsSession.getTransacted(AQjmsSession.java:1015) ~[aqapi-12.2.0.1.0.jar:?]\n</code></pre>\n</li>\n</ul>\n<p>The <code>RegexFilter</code> (cf. <a href=\"https://logging.apache.org/log4j/2.x/manual/filters.html#RegexFilter\" rel=\"nofollow noreferrer\">documentation</a>) only matches the formatted (or unformatted) message. The throwable is not used by this filter or any other of the standard filters.</p>\n<p>Fortunately Log4j Core is very extensible and writing a new filter is a couple dozen lines:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Plugin(name = &quot;ThrowableMessageFilter&quot;, category = Node.CATEGORY, elementType = Filter.ELEMENT_TYPE)\npublic class ThrowableMessageFilter extends AbstractFilter {\n\n    @PluginFactory\n    public static ThrowableMessageFilter createFilter(@PluginAttribute(&quot;regex&quot;) final String regex,\n            @PluginAttribute(&quot;onMatch&quot;) final Result onMatch, @PluginAttribute(&quot;onMismatch&quot;) final Result onMismatch) {\n        if (regex == null) {\n            LOGGER.error(&quot;A regular expression must be provided for ThrowableMessageFilter&quot;);\n            return null;\n        }\n        return new ThrowableMessageFilter(Pattern.compile(regex), onMatch, onMismatch);\n    }\n\n    private final Pattern pattern;\n\n    private ThrowableMessageFilter(final Pattern pattern, final Result onMatch, final Result onMismatch) {\n        super(onMatch, onMismatch);\n        this.pattern = pattern;\n    }\n\n    private Result filter(final String message) {\n        if (message == null) {\n            return onMismatch;\n        }\n        final Matcher m = pattern.matcher(message);\n        return m.matches() ? onMatch : onMismatch;\n    }\n\n    @Override\n    public Result filter(LogEvent event) {\n        final Throwable t = event.getThrown();\n        return t != null ? filter(t.getMessage()) : onMismatch;\n    }\n}\n</code></pre>\n<p>You can then use it as:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;Logger name=&quot;oracle.jms.AQjmsError&quot; additivity=&quot;false&quot;&gt;\n  &lt;AppenderRef ref=&quot;OtherFile&quot;&gt;\n    &lt;ThrowableMessageFilter regex=&quot;.*JMS-131.*&quot;\n                            onMatch=&quot;ACCEPT&quot;\n                            onMismatch=&quot;DENY&quot;/&gt;\n  &lt;/AppenderRef&gt;\n&lt;/Logger&gt;\n</code></pre>\n\n<p><strong>Edit:</strong> For a temporary solution you can also use <code>ScriptFilter</code> (cf. <a href=\"https://logging.apache.org/log4j/2.x/manual/filters.html#Script\" rel=\"nofollow noreferrer\">documentation</a>). To use it you need:</p>\n<ul>\n<li>a scripting engine like <a href=\"https://github.com/openjdk/nashorn\" rel=\"nofollow noreferrer\">Nashorn</a>, which was available up to JRE 14 and is available standalone for JRE 15+,</li>\n<li>add the scripting language used to the list of allowed languages by listing it in the system property <code>log4j2.scriptEnableLanguages</code> (e.g. by adding <code>-Dlog4j2.scriptEnableLanguages=javascript</code> to the JVM arguments),</li>\n<li>write a script to match your exception, e.g.:\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;ScriptFilter onMatch=&quot;ACCEPT&quot; onMismatch=&quot;DENY&quot;&gt;\n  &lt;Script language=&quot;javascript&quot;&gt;&lt;![CDATA[\n    var t = logEvent.getThrown();\n    if (t != null) {\n      var m = t.getMessage();\n      m != null ? m.contains(&quot;JMS-131&quot;) : false;\n    } else {\n      false;\n    }\n  ]]&gt;&lt;/Script&gt;\n&lt;/ScriptFilter&gt;\n</code></pre>\n</li>\n</ul>\n"}],"owner":{"account_id":29241961,"reputation":1,"user_id":22403259,"display_name":"Display"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":65,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1692305988,"creation_date":1692258221,"question_id":76919416,"body_markdown":"I&#39;m using a java application with apache tomcat, if a specific camel exception occurs then need to log it into a separate log file.\r\n\r\nFor example, the running log **(app.log)**, if specific exception **(JMS-131)** occurs then need to log it into a separate log file **(excp.log)**\r\n\r\n**log4j2 configuration**\r\n\r\n```\r\n&lt;Configuration status=&quot;DEBUG&quot;&gt;\r\n    &lt;Appenders&gt;\r\n        &lt;Console name=&quot;LogToConsole&quot; target=&quot;SYSTEM_OUT&quot;&gt;\r\n            &lt;PatternLayout pattern=&quot;%d{HH:mm:ss.SSS} [%t] %-5level %logger{36} - %msg%n&quot;/&gt;\r\n        &lt;/Console&gt;        \r\n        &lt;RollingFile name=&quot;LogToRollingFile&quot; fileName=&quot;logs/app.log&quot;\r\n                     filePattern=&quot;logs/$${date:yyyy-MM}/app-%d{MM-dd-yyyy}-%i.log.gz&quot;&gt;\r\n            &lt;PatternLayout&gt;\r\n                &lt;Pattern&gt;%d %p %c{1.} [%t] %m%n&lt;/Pattern&gt;\r\n            &lt;/PatternLayout&gt;\r\n            &lt;Policies&gt;\r\n                &lt;TimeBasedTriggeringPolicy/&gt;\r\n                &lt;SizeBasedTriggeringPolicy size=&quot;10 MB&quot;/&gt;\r\n            &lt;/Policies&gt;\r\n            &lt;DefaultRolloverStrategy max=&quot;100&quot;/&gt;\r\n        &lt;/RollingFile&gt;\r\n        &lt;RollingFile name=&quot;OtherFile&quot; fileName=&quot;logs/excp.log&quot;\r\n                     filePattern=&quot;logs/$${date:yyyy-MM}/excp-%d{MM-dd-yyyy}-%i.log.gz&quot;&gt;\r\n            &lt;PatternLayout&gt;\r\n                &lt;Pattern&gt;%d %p %c{1.} [%t] %m%n&lt;/Pattern&gt;\r\n            &lt;/PatternLayout&gt;\r\n            &lt;Policies&gt;\r\n                &lt;TimeBasedTriggeringPolicy/&gt;\r\n                &lt;SizeBasedTriggeringPolicy size=&quot;10 MB&quot;/&gt;\r\n            &lt;/Policies&gt;\r\n            &lt;DefaultRolloverStrategy max=&quot;100&quot;/&gt;\r\n        &lt;/RollingFile&gt;\r\n    &lt;/Appenders&gt;\r\n    &lt;Loggers&gt;\r\n        &lt;Logger name=&quot;com.test&quot; additivity=&quot;false&quot;&gt;\r\n            &lt;AppenderRef ref=&quot;LogToRollingFile&quot;/&gt;\r\n            &lt;AppenderRef ref=&quot;LogToConsole&quot;/&gt;\r\n        &lt;/Logger&gt;\r\n        &lt;logger name=&quot;oracle.jms.AQjmsError&quot; additivity=&quot;false&quot;&gt;\r\n            &lt;AppenderRef ref=&quot;OtherFile&quot;/&gt;\r\n\t&lt;/logger&gt;\r\n        &lt;Root level=&quot;info&quot;&gt;\r\n            &lt;AppenderRef ref=&quot;LogToConsole&quot;/&gt;\r\n        &lt;/Root&gt;\r\n    &lt;/Loggers&gt;\r\n&lt;/Configuration&gt;\r\n```\r\n\r\n**app.log**\r\n\r\n```\r\norg.apache.camel.component.jms.DefaultJmsMessageListenerContainer [] - Initiating transaction rollback on listener exception\r\njavax.jms.IllegalStateException: JMS-131: Session is closed\r\n\tat oracle.jms.AQjmsError.throwIllegalStateEx(AQjmsError.java:514) ~[aqapi-12.2.0.1.0.jar:?]\r\n\tat oracle.jms.AQjmsSession.checkSessionStarted(AQjmsSession.java:5521) ~[aqapi-12.2.0.1.0.jar:?]\r\n\tat oracle.jms.AQjmsSession.getTransacted(AQjmsSession.java:1015) ~[aqapi-12.2.0.1.0.jar:?]\r\n```\r\n\r\nI&#39;ve tried using filter, RegexFilter &amp; routing appenders but nothing seems to work as expected. All I&#39;m able to achieve was to exclude the specific exception from the log.  \r\n  \r\nI&#39;m very new to this &amp; any help would be really appreciated. Thanks in advance!","title":"Log4j - How to log specific exception into a separate file?","body":"<p>I'm using a java application with apache tomcat, if a specific camel exception occurs then need to log it into a separate log file.</p>\n<p>For example, the running log <strong>(app.log)</strong>, if specific exception <strong>(JMS-131)</strong> occurs then need to log it into a separate log file <strong>(excp.log)</strong></p>\n<p><strong>log4j2 configuration</strong></p>\n<pre><code>&lt;Configuration status=&quot;DEBUG&quot;&gt;\n    &lt;Appenders&gt;\n        &lt;Console name=&quot;LogToConsole&quot; target=&quot;SYSTEM_OUT&quot;&gt;\n            &lt;PatternLayout pattern=&quot;%d{HH:mm:ss.SSS} [%t] %-5level %logger{36} - %msg%n&quot;/&gt;\n        &lt;/Console&gt;        \n        &lt;RollingFile name=&quot;LogToRollingFile&quot; fileName=&quot;logs/app.log&quot;\n                     filePattern=&quot;logs/$${date:yyyy-MM}/app-%d{MM-dd-yyyy}-%i.log.gz&quot;&gt;\n            &lt;PatternLayout&gt;\n                &lt;Pattern&gt;%d %p %c{1.} [%t] %m%n&lt;/Pattern&gt;\n            &lt;/PatternLayout&gt;\n            &lt;Policies&gt;\n                &lt;TimeBasedTriggeringPolicy/&gt;\n                &lt;SizeBasedTriggeringPolicy size=&quot;10 MB&quot;/&gt;\n            &lt;/Policies&gt;\n            &lt;DefaultRolloverStrategy max=&quot;100&quot;/&gt;\n        &lt;/RollingFile&gt;\n        &lt;RollingFile name=&quot;OtherFile&quot; fileName=&quot;logs/excp.log&quot;\n                     filePattern=&quot;logs/$${date:yyyy-MM}/excp-%d{MM-dd-yyyy}-%i.log.gz&quot;&gt;\n            &lt;PatternLayout&gt;\n                &lt;Pattern&gt;%d %p %c{1.} [%t] %m%n&lt;/Pattern&gt;\n            &lt;/PatternLayout&gt;\n            &lt;Policies&gt;\n                &lt;TimeBasedTriggeringPolicy/&gt;\n                &lt;SizeBasedTriggeringPolicy size=&quot;10 MB&quot;/&gt;\n            &lt;/Policies&gt;\n            &lt;DefaultRolloverStrategy max=&quot;100&quot;/&gt;\n        &lt;/RollingFile&gt;\n    &lt;/Appenders&gt;\n    &lt;Loggers&gt;\n        &lt;Logger name=&quot;com.test&quot; additivity=&quot;false&quot;&gt;\n            &lt;AppenderRef ref=&quot;LogToRollingFile&quot;/&gt;\n            &lt;AppenderRef ref=&quot;LogToConsole&quot;/&gt;\n        &lt;/Logger&gt;\n        &lt;logger name=&quot;oracle.jms.AQjmsError&quot; additivity=&quot;false&quot;&gt;\n            &lt;AppenderRef ref=&quot;OtherFile&quot;/&gt;\n    &lt;/logger&gt;\n        &lt;Root level=&quot;info&quot;&gt;\n            &lt;AppenderRef ref=&quot;LogToConsole&quot;/&gt;\n        &lt;/Root&gt;\n    &lt;/Loggers&gt;\n&lt;/Configuration&gt;\n</code></pre>\n<p><strong>app.log</strong></p>\n<pre><code>org.apache.camel.component.jms.DefaultJmsMessageListenerContainer [] - Initiating transaction rollback on listener exception\njavax.jms.IllegalStateException: JMS-131: Session is closed\n    at oracle.jms.AQjmsError.throwIllegalStateEx(AQjmsError.java:514) ~[aqapi-12.2.0.1.0.jar:?]\n    at oracle.jms.AQjmsSession.checkSessionStarted(AQjmsSession.java:5521) ~[aqapi-12.2.0.1.0.jar:?]\n    at oracle.jms.AQjmsSession.getTransacted(AQjmsSession.java:1015) ~[aqapi-12.2.0.1.0.jar:?]\n</code></pre>\n<p>I've tried using filter, RegexFilter &amp; routing appenders but nothing seems to work as expected. All I'm able to achieve was to exclude the specific exception from the log.</p>\n<p>I'm very new to this &amp; any help would be really appreciated. Thanks in advance!</p>\n"},{"tags":["java","spring","spring-security","oauth-2.0"],"answers":[{"tags":[],"owner":{"account_id":24440940,"reputation":3122,"user_id":18364656,"display_name":"Andrei Lisa"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1692293290,"creation_date":1692289622,"answer_id":76923411,"question_id":76923238,"body_markdown":"According to documentation: [resource-server][1]:\r\n     \r\nResource Server will use this property(`issuer-uri:`) to further self-configure, discover the authorization server’s public keys, and subsequently validate incoming JWTs.\r\n\r\nIf Resource Server must be able to start up independently from the authorization server, then the `jwk-set-uri` can be supplied.\r\n\r\nI think that I give answers to your question for more details, read in your own documentation about resource server provided above there is a good explanation with examples.\r\n\r\n\r\n\r\n  [1]: https://docs.spring.io/spring-security/reference/servlet/oauth2/resource-server/jwt.html","title":"Spring Security + OAuth: settings for local JWT validation","body":"<p>According to documentation: <a href=\"https://docs.spring.io/spring-security/reference/servlet/oauth2/resource-server/jwt.html\" rel=\"nofollow noreferrer\">resource-server</a>:</p>\n<p>Resource Server will use this property(<code>issuer-uri:</code>) to further self-configure, discover the authorization server’s public keys, and subsequently validate incoming JWTs.</p>\n<p>If Resource Server must be able to start up independently from the authorization server, then the <code>jwk-set-uri</code> can be supplied.</p>\n<p>I think that I give answers to your question for more details, read in your own documentation about resource server provided above there is a good explanation with examples.</p>\n"},{"tags":[],"owner":{"account_id":308139,"reputation":8199,"user_id":619830,"accept_rate":75,"display_name":"ch4mp"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1692305690,"creation_date":1692296247,"answer_id":76924168,"question_id":76923238,"body_markdown":"When used alone, `issuer-uri` serves two purposes:\r\n- discover OpenID configuration (which usually stands at `{issuer-uri}/.well-known/openid-configuration`), read the JWKS endpoint URI from it, and then fetch public keys\r\n- setup an issuer validator in the JWT decoder: if the value of the `iss` claim in the token does not match exactly what is configured, an exception is thrown (even trailing slash, if any, is important).\r\n\r\nWhen `jwk-set-uri` is provided, public keys are fetched using it, whatever is configured as `issuer-uri` (which can be omitted, in which case the JWT decoder won&#39;t validate the issuer). **But tokens are still validated with a JWT decoder, so you are wrong when thinking that a round-trip to the authorization server is made for every request when you set `jwk-set-uri`.** This round-trip happens when you use access token introspection (instead of JWT decoding) or if you explicitly wire it in the authentication converter or manager (for instance use a REST client to call Keycloak&#39;s authorization service).\r\n\r\nIn my opinion, you should validate issuer, and therefore, provide with `issuer-uri`. In that case, you need to provide a `jwk-set-uri` only if, because of your network configuration, the resource server can&#39;t reach the authorization server using what it sets as audience claim (this happens when authorization server is misconfigured and puts a `localhost` URI as audience in a containerized environment). So, in the case of your configuration (where you reuse `issuer-uri` to define `jwk-set-uri`), just remove the `jwk-set-uri`, it will be inferred from OpenID configuration.\r\n\r\nP.S.\r\n\r\nAs already written in another question, you would really save time and efforts reading [my tutorials][1]: your resource server config still has a reference to `/login` (which it should not), CSRF protection is disabled but sessions are still enabled (this is a very bad idea), you are not explicitly returning 401 for unauthorized requests (default is 302 redirect to login which is non-sense for a resource server), there is nothing about CORS configuration which is something you&#39;ll probably bump into, and to finish, my guess is you still haven&#39;t written a serious `keykloakJwtAuthConverter`.\r\n\r\n\r\n  [1]: https://github.com/ch4mpy/spring-addons/tree/master/samples/tutorials#oauth_essentials","title":"Spring Security + OAuth: settings for local JWT validation","body":"<p>When used alone, <code>issuer-uri</code> serves two purposes:</p>\n<ul>\n<li>discover OpenID configuration (which usually stands at <code>{issuer-uri}/.well-known/openid-configuration</code>), read the JWKS endpoint URI from it, and then fetch public keys</li>\n<li>setup an issuer validator in the JWT decoder: if the value of the <code>iss</code> claim in the token does not match exactly what is configured, an exception is thrown (even trailing slash, if any, is important).</li>\n</ul>\n<p>When <code>jwk-set-uri</code> is provided, public keys are fetched using it, whatever is configured as <code>issuer-uri</code> (which can be omitted, in which case the JWT decoder won't validate the issuer). <strong>But tokens are still validated with a JWT decoder, so you are wrong when thinking that a round-trip to the authorization server is made for every request when you set <code>jwk-set-uri</code>.</strong> This round-trip happens when you use access token introspection (instead of JWT decoding) or if you explicitly wire it in the authentication converter or manager (for instance use a REST client to call Keycloak's authorization service).</p>\n<p>In my opinion, you should validate issuer, and therefore, provide with <code>issuer-uri</code>. In that case, you need to provide a <code>jwk-set-uri</code> only if, because of your network configuration, the resource server can't reach the authorization server using what it sets as audience claim (this happens when authorization server is misconfigured and puts a <code>localhost</code> URI as audience in a containerized environment). So, in the case of your configuration (where you reuse <code>issuer-uri</code> to define <code>jwk-set-uri</code>), just remove the <code>jwk-set-uri</code>, it will be inferred from OpenID configuration.</p>\n<p>P.S.</p>\n<p>As already written in another question, you would really save time and efforts reading <a href=\"https://github.com/ch4mpy/spring-addons/tree/master/samples/tutorials#oauth_essentials\" rel=\"nofollow noreferrer\">my tutorials</a>: your resource server config still has a reference to <code>/login</code> (which it should not), CSRF protection is disabled but sessions are still enabled (this is a very bad idea), you are not explicitly returning 401 for unauthorized requests (default is 302 redirect to login which is non-sense for a resource server), there is nothing about CORS configuration which is something you'll probably bump into, and to finish, my guess is you still haven't written a serious <code>keykloakJwtAuthConverter</code>.</p>\n"}],"owner":{"account_id":4192655,"reputation":341,"user_id":3434906,"display_name":"Dec0de"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":698,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":76924168,"answer_count":2,"score":1,"last_activity_date":1692305690,"creation_date":1692288225,"question_id":76923238,"body_markdown":"I&#39;m building microservices app, secured by Keycloak and want to secure each microservice. It was written here many times, that it&#39;s not a good idea to query Auth service (Keycloak - in my case) for every time you want to validate your token. So it&#39;s better to validate a signature locally, as soon as your request passes through API-Gateway to the microservices.\r\n\r\nSo, I want to setup my Spring-app this way. \r\n\r\n**Am I right stating that:**\r\n1. `jwt.jwk-set-uri` parameter is responsible for checking JWT keys locally. So when I&#39;m setting up this, open keys will be fetched from Keycloak&#39;s endpoint for the future checking of JWT-signature validity offline. Without accessing Keycloak&#39;s server per every check.\r\n2. If I set `issuer-uri` without `jwk-set-uri` there will be only on-line JWT-check per every request.\r\n\r\nIf all of above mentioned is false, please describe the right way in your opinion.\r\nUnfortunately, the [Spring&#39;s doc][1] is not so verbose on this, stating that:\r\n\r\n&gt; Consequently, Resource Server will not ping the authorization server at startup. We still specify the issuer-uri so that Resource Server still validates the iss claim on incoming JWTs.\r\n\r\nThe config I&#39;m talking about is here(application.yaml):\r\n```\r\n  security:\r\n    oauth2:\r\n      resourceserver:\r\n        jwt:\r\n          issuer-uri: http://localhost:3000/realms/msapp\r\n          jwk-set-uri: ${spring.security.oauth2.resourceserver.jwt.issuer-uri}/protocol/openid-connect/certs\r\n```\r\nSecurityConfig\r\n``` \r\n@EnableWebFluxSecurity\r\n@EnableReactiveMethodSecurity()\r\npublic class SecurityConfig {\r\n\r\n    @Bean\r\n    public SecurityWebFilterChain securityWebFilterChain(ServerHttpSecurity http) {\r\n        http\r\n            .csrf().disable()\r\n            .authorizeExchange()\r\n                .pathMatchers(&quot;/login&quot;).permitAll()\r\n            .anyExchange()\r\n                .authenticated().and()\r\n            .oauth2ResourceServer() \r\n                .jwt()\r\n                .jwtAuthenticationConverter(keykloakJwtAuthConverter());\r\n        return http.build();\r\n    }\r\n``` \r\n\r\n\r\n\r\n  [1]: https://docs.spring.io/spring-security/site/docs/5.2.12.RELEASE/reference/html/oauth2.html","title":"Spring Security + OAuth: settings for local JWT validation","body":"<p>I'm building microservices app, secured by Keycloak and want to secure each microservice. It was written here many times, that it's not a good idea to query Auth service (Keycloak - in my case) for every time you want to validate your token. So it's better to validate a signature locally, as soon as your request passes through API-Gateway to the microservices.</p>\n<p>So, I want to setup my Spring-app this way.</p>\n<p><strong>Am I right stating that:</strong></p>\n<ol>\n<li><code>jwt.jwk-set-uri</code> parameter is responsible for checking JWT keys locally. So when I'm setting up this, open keys will be fetched from Keycloak's endpoint for the future checking of JWT-signature validity offline. Without accessing Keycloak's server per every check.</li>\n<li>If I set <code>issuer-uri</code> without <code>jwk-set-uri</code> there will be only on-line JWT-check per every request.</li>\n</ol>\n<p>If all of above mentioned is false, please describe the right way in your opinion.\nUnfortunately, the <a href=\"https://docs.spring.io/spring-security/site/docs/5.2.12.RELEASE/reference/html/oauth2.html\" rel=\"nofollow noreferrer\">Spring's doc</a> is not so verbose on this, stating that:</p>\n<blockquote>\n<p>Consequently, Resource Server will not ping the authorization server at startup. We still specify the issuer-uri so that Resource Server still validates the iss claim on incoming JWTs.</p>\n</blockquote>\n<p>The config I'm talking about is here(application.yaml):</p>\n<pre><code>  security:\n    oauth2:\n      resourceserver:\n        jwt:\n          issuer-uri: http://localhost:3000/realms/msapp\n          jwk-set-uri: ${spring.security.oauth2.resourceserver.jwt.issuer-uri}/protocol/openid-connect/certs\n</code></pre>\n<p>SecurityConfig</p>\n<pre><code>@EnableWebFluxSecurity\n@EnableReactiveMethodSecurity()\npublic class SecurityConfig {\n\n    @Bean\n    public SecurityWebFilterChain securityWebFilterChain(ServerHttpSecurity http) {\n        http\n            .csrf().disable()\n            .authorizeExchange()\n                .pathMatchers(&quot;/login&quot;).permitAll()\n            .anyExchange()\n                .authenticated().and()\n            .oauth2ResourceServer() \n                .jwt()\n                .jwtAuthenticationConverter(keykloakJwtAuthConverter());\n        return http.build();\n    }\n</code></pre>\n"},{"tags":["java","smartgwt"],"owner":{"account_id":23528839,"reputation":109,"user_id":17630064,"display_name":"Norida Olivera"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":25,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1692304829,"creation_date":1692304829,"question_id":76924983,"body_markdown":"I have a test environment with the BuiltInDs project that uses the following components:\r\n - JDK 1.8 \r\n - SmartGWT Eval v13.0p_2023-08-16  \r\n\r\nIn the BuiltInDs project we added a formula field and modified the setCanFilter attribute so that it can be filtered, but when we try to filter and switch to another field we get a dot in the formula field filter.\r\nHere I attach a video of the behavior and the part of the code where we add the new field:\r\n\r\n[FormulaField][1]\r\n\r\n[![Code][2]][2]\r\n\r\n\r\n  [1]: https://youtu.be/yW_G9Gk0h3w\r\n  [2]: https://i.stack.imgur.com/2iajT.png","title":"Filters formula fields smartGWT13","body":"<p>I have a test environment with the BuiltInDs project that uses the following components:</p>\n<ul>\n<li>JDK 1.8</li>\n<li>SmartGWT Eval v13.0p_2023-08-16</li>\n</ul>\n<p>In the BuiltInDs project we added a formula field and modified the setCanFilter attribute so that it can be filtered, but when we try to filter and switch to another field we get a dot in the formula field filter.\nHere I attach a video of the behavior and the part of the code where we add the new field:</p>\n<p><a href=\"https://youtu.be/yW_G9Gk0h3w\" rel=\"nofollow noreferrer\">FormulaField</a></p>\n<p><a href=\"https://i.stack.imgur.com/2iajT.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/2iajT.png\" alt=\"Code\" /></a></p>\n"},{"tags":["java","spring-boot","liquibase"],"comments":[{"owner":{"account_id":477214,"reputation":5260,"user_id":888580,"display_name":"lane.maxwell"},"score":0,"creation_date":1692305735,"post_id":76924865,"comment_id":135609176,"body_markdown":"In short, no, not in the automated ways your updates are applied anyway.","body":"In short, no, not in the automated ways your updates are applied anyway."}],"owner":{"account_id":16165507,"reputation":1,"user_id":11670582,"display_name":"Ahmed Essam"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":25,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1692303638,"creation_date":1692303638,"question_id":76924865,"body_markdown":"I&#39;m trying to run liquibase from spring boot jar unzip using maven command to get the liquibase maven plugin\r\n\r\nfor example \r\n\r\nmy jar like this xyz.jar and run this jar like this java -jar xyz.jar\r\nnow i wont to run liquibase rollback befour run the previous verison for xyz.jar.","title":"Can run liquibase rollback using command line out project path or using spring boot jar without unzip?","body":"<p>I'm trying to run liquibase from spring boot jar unzip using maven command to get the liquibase maven plugin</p>\n<p>for example</p>\n<p>my jar like this xyz.jar and run this jar like this java -jar xyz.jar\nnow i wont to run liquibase rollback befour run the previous verison for xyz.jar.</p>\n"},{"tags":["java","unit-testing","mockito","spring-boot-test"],"answers":[{"tags":[],"owner":{"account_id":14822168,"reputation":38,"user_id":10704082,"display_name":"Israel Oluwole"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1692303583,"creation_date":1692303583,"answer_id":76924857,"question_id":76919277,"body_markdown":"I used the @SpyBean annotation on the targetted service like so\r\n\r\n```java\r\n    ...\r\n    @Autowired\r\n    @SpyBean\r\n    private FirebaseService firebaseService\r\n    ...\r\n\r\n    ...\r\n    doReturn(...).when(firebaseService).doSomething();\r\n    ...\r\n```","title":"How do I fix java.lang.IllegalStateException: Failed to unwrap proxied object error","body":"<p>I used the @SpyBean annotation on the targetted service like so</p>\n<pre class=\"lang-java prettyprint-override\"><code>    ...\n    @Autowired\n    @SpyBean\n    private FirebaseService firebaseService\n    ...\n\n    ...\n    doReturn(...).when(firebaseService).doSomething();\n    ...\n</code></pre>\n"}],"owner":{"account_id":14822168,"reputation":38,"user_id":10704082,"display_name":"Israel Oluwole"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":201,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1692303583,"creation_date":1692256975,"question_id":76919277,"body_markdown":"I have this sample implementation and test but I get the error\r\n\r\n```\r\njava.lang.IllegalStateException: Failed to unwrap proxied object\r\n...\r\nE.g. thenReturn() may be missing.\r\nExamples of correct stubbing:\r\n    when(mock.isOk()).thenReturn(true);\r\n    when(mock.isOk()).thenThrow(exception);\r\n    doThrow(exception).when(mock).someVoidMethod();\r\nHints:\r\n 1. missing thenReturn()\r\n 2. you are trying to stub a final method, which is not supported\r\n 3. you are stubbing the behaviour of another mock inside before &#39;thenReturn&#39; instruction is completed\r\n...\r\n```\r\n\r\n```java\r\n...\r\n\r\n@Service\r\npublic class FirebaseService {\r\n    ...\r\n\r\n    public FirebaseService(...) {\r\n        ...\r\n    }\r\n\r\n\r\n    public FirebaseApp initializeApp() {\r\n\r\n        try {\r\n            ...\r\n            InputStream inputStream = getServiceAccountFileInputStream();\r\n            ...\r\n        } catch (IOException e) {\r\n            throw new RuntimeException(e);\r\n        }\r\n\r\n    }\r\n\r\n    public InputStream getServiceAccountFileInputStream() throws IOException {\r\n        ...\r\n    }\r\n}\r\n\r\n...\r\n\r\n@ExtendWith(SpringExtension.class)\r\n@RunWith(SpringRunner.class)\r\n@SpringBootTest\r\npublic class FirebaseServiceTest {\r\n\r\n    ...\r\n    @Autowired\r\n    private FirebaseService firebaseService;\r\n    ...\r\n\r\n    @Test\r\n    public void whenGetAppIsEmpty_thenReturnFirebaseAppInstanceFromInitializeApp() throws IOException {\r\n        ...\r\n        InputStream inputStream = mock(InputStream.class);\r\n        ...\r\n        FirebaseService firebaseServiceSpy = spy(firebaseService);\r\n\r\n// Specifically at this point       \r\ndoReturn(FileInputStream.nullInputStream()).when(firebaseServiceSpy).getServiceAccountFileInputStream();\r\n        ...\r\n    }\r\n}\r\n```\r\n\r\nI am new to testing so I appreciate the help of anyone that can help me realize what I have done wrong.\r\nThank you\r\n\r\nI tried spying on the autowired dependency like this and I am expecting the method to return the null input stream...\r\n\r\n```java\r\n...\r\nFirebaseService firebaseServiceSpy = spy(firebaseService);\r\ndoReturn(FileInputStream.nullInputStream()).when(firebaseServiceSpy).getServiceAccountFileInputStream();\r\n...\r\n```","title":"How do I fix java.lang.IllegalStateException: Failed to unwrap proxied object error","body":"<p>I have this sample implementation and test but I get the error</p>\n<pre><code>java.lang.IllegalStateException: Failed to unwrap proxied object\n...\nE.g. thenReturn() may be missing.\nExamples of correct stubbing:\n    when(mock.isOk()).thenReturn(true);\n    when(mock.isOk()).thenThrow(exception);\n    doThrow(exception).when(mock).someVoidMethod();\nHints:\n 1. missing thenReturn()\n 2. you are trying to stub a final method, which is not supported\n 3. you are stubbing the behaviour of another mock inside before 'thenReturn' instruction is completed\n...\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>...\n\n@Service\npublic class FirebaseService {\n    ...\n\n    public FirebaseService(...) {\n        ...\n    }\n\n\n    public FirebaseApp initializeApp() {\n\n        try {\n            ...\n            InputStream inputStream = getServiceAccountFileInputStream();\n            ...\n        } catch (IOException e) {\n            throw new RuntimeException(e);\n        }\n\n    }\n\n    public InputStream getServiceAccountFileInputStream() throws IOException {\n        ...\n    }\n}\n\n...\n\n@ExtendWith(SpringExtension.class)\n@RunWith(SpringRunner.class)\n@SpringBootTest\npublic class FirebaseServiceTest {\n\n    ...\n    @Autowired\n    private FirebaseService firebaseService;\n    ...\n\n    @Test\n    public void whenGetAppIsEmpty_thenReturnFirebaseAppInstanceFromInitializeApp() throws IOException {\n        ...\n        InputStream inputStream = mock(InputStream.class);\n        ...\n        FirebaseService firebaseServiceSpy = spy(firebaseService);\n\n// Specifically at this point       \ndoReturn(FileInputStream.nullInputStream()).when(firebaseServiceSpy).getServiceAccountFileInputStream();\n        ...\n    }\n}\n</code></pre>\n<p>I am new to testing so I appreciate the help of anyone that can help me realize what I have done wrong.\nThank you</p>\n<p>I tried spying on the autowired dependency like this and I am expecting the method to return the null input stream...</p>\n<pre class=\"lang-java prettyprint-override\"><code>...\nFirebaseService firebaseServiceSpy = spy(firebaseService);\ndoReturn(FileInputStream.nullInputStream()).when(firebaseServiceSpy).getServiceAccountFileInputStream();\n...\n</code></pre>\n"},{"tags":["java","eclipse","ubuntu"],"answers":[{"tags":[],"owner":{"account_id":8198,"reputation":176773,"user_id":14637,"accept_rate":88,"display_name":"Thomas"},"down_vote_count":0,"up_vote_count":5,"is_accepted":true,"score":5,"last_activity_date":1221620901,"creation_date":1221620901,"answer_id":79551,"question_id":79538,"body_markdown":"The Scanner class is new in Java 5. I do not know what Hardy&#39;s default Java environment is, but it is not Sun&#39;s and therefore may be outdated.\r\n\r\nI recommend installing the package sun-java6-jdk to get the most up-to-date version, then telling Eclipse to use it.","title":"Scanner cannot be resolved to a type","body":"<p>The Scanner class is new in Java 5. I do not know what Hardy's default Java environment is, but it is not Sun's and therefore may be outdated.</p>\n\n<p>I recommend installing the package sun-java6-jdk to get the most up-to-date version, then telling Eclipse to use it.</p>\n"},{"tags":[],"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1221633722,"creation_date":1221621010,"answer_id":79557,"question_id":79538,"body_markdown":"If you are using a version of Java before 1.5, java.util.Scanner doesn&#39;t exist.\r\n\r\nWhich version of the JDK is your Eclipse project set up to use?\r\n\r\nHave a look at Project, Properties, Java Build Path -- look for the &#39;JRE System Library&#39; entry, which should have a version number next to it.","title":"Scanner cannot be resolved to a type","body":"<p>If you are using a version of Java before 1.5, java.util.Scanner doesn't exist.</p>\n\n<p>Which version of the JDK is your Eclipse project set up to use?</p>\n\n<p>Have a look at Project, Properties, Java Build Path -- look for the 'JRE System Library' entry, which should have a version number next to it.</p>\n"},{"tags":[],"owner":{"account_id":1425,"reputation":8501,"user_id":1900,"accept_rate":84,"display_name":"Lee Theobald"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1221653880,"creation_date":1221653880,"answer_id":82475,"question_id":79538,"body_markdown":"It could also be that although you are have JDK 1.5 or higher, the project has some specific settings set that tell it to compile as 1.4.  You can test this via Project &gt;&gt; Properties &gt;&gt; Java Compiler and ensure the &quot;Compiler Compliance Level&quot; is set to 1.5 or higher.","title":"Scanner cannot be resolved to a type","body":"<p>It could also be that although you are have JDK 1.5 or higher, the project has some specific settings set that tell it to compile as 1.4.  You can test this via Project >> Properties >> Java Compiler and ensure the \"Compiler Compliance Level\" is set to 1.5 or higher.</p>\n"},{"tags":[],"owner":{"display_name":"h3lium"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1692303352,"creation_date":1232731934,"answer_id":473785,"question_id":79538,"body_markdown":"Under Ubuntu you need to set the java compiler &quot;javac&quot; to use sun&#39;s jdk instead of any other alternative. The difference to some of the answers posted so far is that I am talking about javac NOT java. To do so fire up a shell and do the following:\r\n\r\n1. As root or sudo type in at command line:\r\n\r\n`# update-alternatives --config javac`\r\n\r\n2. Locate the number pointing to sun&#39;s jdk, type in this number, and hit &quot;ENTER&quot;.   \r\n\r\n3. You can now use java.util.Scanner under Ubuntu.\r\n\r\n","title":"Scanner cannot be resolved to a type","body":"<p>Under Ubuntu you need to set the java compiler &quot;javac&quot; to use sun's jdk instead of any other alternative. The difference to some of the answers posted so far is that I am talking about javac NOT java. To do so fire up a shell and do the following:</p>\n<ol>\n<li>As root or sudo type in at command line:</li>\n</ol>\n<p><code># update-alternatives --config javac</code></p>\n<ol start=\"2\">\n<li><p>Locate the number pointing to sun's jdk, type in this number, and hit &quot;ENTER&quot;.</p>\n</li>\n<li><p>You can now use java.util.Scanner under Ubuntu.</p>\n</li>\n</ol>\n"},{"tags":[],"owner":{"account_id":17719384,"reputation":86,"user_id":12864849,"display_name":"boi yeet"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1585687366,"creation_date":1585687366,"answer_id":60959558,"question_id":79538,"body_markdown":"You imported Scanner but you&#39;re not using it. You&#39;re using Scanner, which requires user inputs. You&#39;re trying to print out one thing, but you&#39;re exposing the your program to the fact that you are going to use your own input, so it decides to print &quot;Hello World&quot; after you give a user input. But since you are not deciding what the program will print, the system gets confused since it doesn&#39;t know what to print. You need something like `int a=sc.nextInt();` or `String b=sc.nextLine();` and then give your user input. But you said you want `Hello World!`, so Scanner is redundant.","title":"Scanner cannot be resolved to a type","body":"<p>You imported Scanner but you're not using it. You're using Scanner, which requires user inputs. You're trying to print out one thing, but you're exposing the your program to the fact that you are going to use your own input, so it decides to print \"Hello World\" after you give a user input. But since you are not deciding what the program will print, the system gets confused since it doesn't know what to print. You need something like <code>int a=sc.nextInt();</code> or <code>String b=sc.nextLine();</code> and then give your user input. But you said you want <code>Hello World!</code>, so Scanner is redundant.</p>\n"}],"owner":{"account_id":34394,"reputation":153,"user_id":97220,"accept_rate":54,"display_name":"Austin"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":26432,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":79551,"answer_count":5,"score":0,"last_activity_date":1692303352,"creation_date":1221620713,"question_id":79538,"body_markdown":"I just installed Ubuntu 8.04 and Eclipse. \r\n\r\nI made a very simple Hello World program in order to ensure that everything is running smoothly. When I attempted to use the Scanner class for acquiring some user input I got a very odd error.\r\n\r\nMy code:\r\n```java\r\nimport java.util.Scanner;\r\n\r\nclass Test {\r\n    public static void main (String [] args) {\r\n\t    Scanner sc = new Scanner(System.in);\r\n\t\tSystem.out.println(&quot;hi&quot;);\r\n\t}\r\n}\r\n```\r\n\r\nError message\r\n\r\n```none\r\nException in thread &quot;main&quot; java.lang.Error: Unresolved compilation problems: \r\n\tScanner cannot be resolved to a type\r\n\tScanner cannot be resolved to a type\r\n\r\n   at test.main(test.java:5)\r\n```\r\n","title":"Scanner cannot be resolved to a type","body":"<p>I just installed Ubuntu 8.04 and Eclipse.</p>\n<p>I made a very simple Hello World program in order to ensure that everything is running smoothly. When I attempted to use the Scanner class for acquiring some user input I got a very odd error.</p>\n<p>My code:</p>\n<pre class=\"lang-java prettyprint-override\"><code>import java.util.Scanner;\n\nclass Test {\n    public static void main (String [] args) {\n        Scanner sc = new Scanner(System.in);\n        System.out.println(&quot;hi&quot;);\n    }\n}\n</code></pre>\n<p>Error message</p>\n<pre class=\"lang-none prettyprint-override\"><code>Exception in thread &quot;main&quot; java.lang.Error: Unresolved compilation problems: \n    Scanner cannot be resolved to a type\n    Scanner cannot be resolved to a type\n\n   at test.main(test.java:5)\n</code></pre>\n"},{"tags":["java","spring","http","spring-security"],"answers":[{"tags":[],"owner":{"display_name":"user3906011"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1505137265,"creation_date":1505137265,"answer_id":46157165,"question_id":46156978,"body_markdown":"We can use spring security tags    \r\nfor example:\r\n\r\n    &lt;sec:intercept-url pattern=&quot;/url/domestic/*&quot; access=&quot;!hasAuthority(&#39;systemAccessRole&#39;)&quot;/&gt;\r\n\r\nas above example use `!` and `(not)` operator.","title":"Spring Security - How do I block access to any url except a few listed by role?","body":"<p>We can use spring security tags<br>\nfor example:</p>\n\n<pre><code>&lt;sec:intercept-url pattern=\"/url/domestic/*\" access=\"!hasAuthority('systemAccessRole')\"/&gt;\n</code></pre>\n\n<p>as above example use <code>!</code> and <code>(not)</code> operator.</p>\n"},{"tags":[],"owner":{"account_id":8229771,"reputation":2191,"user_id":6190803,"accept_rate":50,"display_name":"Dylan"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1505394651,"creation_date":1505144120,"answer_id":46159368,"question_id":46156978,"body_markdown":"To do what I needed I just had to add                 \r\n           \r\n `.antMatchers(&quot;/**&quot;).not().hasAuthority(&quot;ROLE_CANDIDATE&quot;)`\r\n\r\nafter any URL i wanted excluded from the matcher\r\n\r\n                .antMatchers(&quot;/&quot;).permitAll()\r\n                .antMatchers(&quot;/index&quot;).permitAll()\r\n                .antMatchers(&quot;/static/**&quot;).permitAll()\r\n                .antMatchers(&quot;/assets/**&quot;).permitAll()\r\n                .antMatchers(&quot;/register&quot;).permitAll()\r\n                .antMatchers(&quot;/skillRequest/**&quot;).permitAll()\r\n                .antMatchers(&quot;/skillRequest/skillFormUpdate/**&quot;).permitAll()\r\n                .antMatchers(&quot;/password/reset&quot;).permitAll()\r\n                .antMatchers(&quot;/password/reset/complete&quot;).permitAll()\r\n                .antMatchers(&quot;/email/verify&quot;).permitAll()\r\n                .antMatchers(&quot;/view/**&quot;).permitAll()\r\n                .antMatchers(&quot;/embed/**&quot;).permitAll()\r\n","title":"Spring Security - How do I block access to any url except a few listed by role?","body":"<p>To do what I needed I just had to add                 </p>\n\n<p><code>.antMatchers(\"/**\").not().hasAuthority(\"ROLE_CANDIDATE\")</code></p>\n\n<p>after any URL i wanted excluded from the matcher</p>\n\n<pre><code>            .antMatchers(\"/\").permitAll()\n            .antMatchers(\"/index\").permitAll()\n            .antMatchers(\"/static/**\").permitAll()\n            .antMatchers(\"/assets/**\").permitAll()\n            .antMatchers(\"/register\").permitAll()\n            .antMatchers(\"/skillRequest/**\").permitAll()\n            .antMatchers(\"/skillRequest/skillFormUpdate/**\").permitAll()\n            .antMatchers(\"/password/reset\").permitAll()\n            .antMatchers(\"/password/reset/complete\").permitAll()\n            .antMatchers(\"/email/verify\").permitAll()\n            .antMatchers(\"/view/**\").permitAll()\n            .antMatchers(\"/embed/**\").permitAll()\n</code></pre>\n"},{"tags":[],"owner":{"account_id":18989903,"reputation":158,"user_id":13859405,"display_name":"Melvin Kah Hoo"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1692303115,"creation_date":1617179139,"answer_id":66884144,"question_id":46156978,"body_markdown":"    .antMatchers(&quot;/**&quot;).denyAll()\r\n\r\nI find putting the above line as the last antmatchers works for me. It block all the API that declare on previous antMatchers\r\n\r\n    .antMatchers(&quot;/index&quot;).permitAll()\r\n    .antMatchers(&quot;/assets/**&quot;).permitAll()\r\n    .antMatchers(&quot;/candidate/*&quot;).hasAuthority(&quot;ROLE_CANDIDATE&quot;)\r\n    .antMatchers(&quot;/**&quot;).denyAll()\r\n    .anyRequest().authenticated()","title":"Spring Security - How do I block access to any url except a few listed by role?","body":"<pre><code>.antMatchers(&quot;/**&quot;).denyAll()\n</code></pre>\n<p>I find putting the above line as the last antmatchers works for me. It block all the API that declare on previous antMatchers</p>\n<pre><code>.antMatchers(&quot;/index&quot;).permitAll()\n.antMatchers(&quot;/assets/**&quot;).permitAll()\n.antMatchers(&quot;/candidate/*&quot;).hasAuthority(&quot;ROLE_CANDIDATE&quot;)\n.antMatchers(&quot;/**&quot;).denyAll()\n.anyRequest().authenticated()\n</code></pre>\n"},{"tags":[],"owner":{"account_id":12243278,"reputation":762,"user_id":10275600,"display_name":"Shtefan"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1673336460,"creation_date":1673336460,"answer_id":75066843,"question_id":46156978,"body_markdown":"How about:\r\n\r\n    httpSecurity.httpBasic().and().\r\n    authorizeRequests().\r\n    antMatchers(&quot;/&quot;).hasRole(&quot;USER&quot;).\r\n    antMatchers(&quot;/public/**&quot;).permitAll().\r\n    antMatchers(&quot;/**&quot;).denyAll().\r\n    and().formLogin();\r\n","title":"Spring Security - How do I block access to any url except a few listed by role?","body":"<p>How about:</p>\n<pre><code>httpSecurity.httpBasic().and().\nauthorizeRequests().\nantMatchers(&quot;/&quot;).hasRole(&quot;USER&quot;).\nantMatchers(&quot;/public/**&quot;).permitAll().\nantMatchers(&quot;/**&quot;).denyAll().\nand().formLogin();\n</code></pre>\n"}],"owner":{"account_id":8229771,"reputation":2191,"user_id":6190803,"accept_rate":50,"display_name":"Dylan"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":11878,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":46159368,"answer_count":4,"score":2,"last_activity_date":1692303115,"creation_date":1505136721,"question_id":46156978,"body_markdown":"So I have this web application that has three different sets of roles. One of which should allow anyone to view even if they are not logged in. Then there are a set of pages that the user must be logged into see but if they have the role of &quot;Candidate&quot; they cannot access. Finally, a role of &quot;Candidate&quot; may be able to only view their page at /candidate/ID\r\n\r\nBasically is there a way to block access to any url basically &quot;/**&quot; except the links listed below? Or do I need to specify each link like /dashboard /profile \r\n\r\n     http.authorizeRequests()\r\n                .antMatchers(&quot;/&quot;).permitAll()\r\n                .antMatchers(&quot;/index&quot;).permitAll()\r\n                .antMatchers(&quot;/static/**&quot;).permitAll()\r\n                .antMatchers(&quot;/assets/**&quot;).permitAll()\r\n                .antMatchers(&quot;/register&quot;).permitAll()\r\n                .antMatchers(&quot;/skillRequest/**&quot;).permitAll()\r\n                .antMatchers(&quot;/skillRequest/skillFormUpdate/**&quot;).permitAll()\r\n                .antMatchers(&quot;/password/reset&quot;).permitAll()\r\n                .antMatchers(&quot;/password/reset/complete&quot;).permitAll()\r\n                .antMatchers(&quot;/email/verify&quot;).permitAll()\r\n                .antMatchers(&quot;/view/**&quot;).permitAll()\r\n                .antMatchers(&quot;/embed/**&quot;).permitAll()\r\n                .anyRequest().authenticated()\r\n                .and()\r\n                .formLogin()\r\n                .loginPage(&quot;/login&quot;)\r\n                .defaultSuccessUrl(&quot;/dashboard&quot;, false) //Force user to always go to the home page.  \r\n    //                .successHandler(successHandler())\r\n                .permitAll()\r\n                .and()\r\n                .httpBasic()\r\n                .and()\r\n                .logout()\r\n                .permitAll();","title":"Spring Security - How do I block access to any url except a few listed by role?","body":"<p>So I have this web application that has three different sets of roles. One of which should allow anyone to view even if they are not logged in. Then there are a set of pages that the user must be logged into see but if they have the role of \"Candidate\" they cannot access. Finally, a role of \"Candidate\" may be able to only view their page at /candidate/ID</p>\n\n<p>Basically is there a way to block access to any url basically \"/**\" except the links listed below? Or do I need to specify each link like /dashboard /profile </p>\n\n<pre><code> http.authorizeRequests()\n            .antMatchers(\"/\").permitAll()\n            .antMatchers(\"/index\").permitAll()\n            .antMatchers(\"/static/**\").permitAll()\n            .antMatchers(\"/assets/**\").permitAll()\n            .antMatchers(\"/register\").permitAll()\n            .antMatchers(\"/skillRequest/**\").permitAll()\n            .antMatchers(\"/skillRequest/skillFormUpdate/**\").permitAll()\n            .antMatchers(\"/password/reset\").permitAll()\n            .antMatchers(\"/password/reset/complete\").permitAll()\n            .antMatchers(\"/email/verify\").permitAll()\n            .antMatchers(\"/view/**\").permitAll()\n            .antMatchers(\"/embed/**\").permitAll()\n            .anyRequest().authenticated()\n            .and()\n            .formLogin()\n            .loginPage(\"/login\")\n            .defaultSuccessUrl(\"/dashboard\", false) //Force user to always go to the home page.  \n//                .successHandler(successHandler())\n            .permitAll()\n            .and()\n            .httpBasic()\n            .and()\n            .logout()\n            .permitAll();\n</code></pre>\n"},{"tags":["java","jenkins","groovy","jenkins-pipeline","jenkins-groovy"],"comments":[{"owner":{"account_id":1333316,"reputation":26958,"user_id":1276664,"accept_rate":17,"display_name":"daggett"},"score":1,"creation_date":1692295137,"post_id":76923600,"comment_id":135607354,"body_markdown":"try something like: `println this[&quot;WINDOWS_PLATFORMS&quot;]`","body":"try something like: <code>println this[&quot;WINDOWS_PLATFORMS&quot;]</code>"},{"owner":{"account_id":19256289,"reputation":679,"user_id":14073111,"display_name":"user14073111"},"score":0,"creation_date":1692298300,"post_id":76923600,"comment_id":135607898,"body_markdown":"@daggett You are a life saver. Thanks! You can make it as answer, i will accept it.","body":"@daggett You are a life saver. Thanks! You can make it as answer, i will accept it."}],"answers":[{"tags":[],"owner":{"account_id":1333316,"reputation":26958,"user_id":1276664,"accept_rate":17,"display_name":"daggett"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1692303074,"creation_date":1692300553,"answer_id":76924568,"question_id":76923600,"body_markdown":"https://www.jenkins.io/doc/book/pipeline/syntax/#parameters\r\n\r\n&gt; The parameters directive provides a list of parameters that a user should provide when triggering the Pipeline. The values for these user-specified parameters are made available to Pipeline steps via the `params` object\r\n\r\nso, after\r\n\r\n```lang-js\r\nparameters { \r\n  string(name: &#39;WINDOWS_PLATFORMS&#39;, defaultValue: &#39;staging&#39;, description: &#39;&#39;)\r\n}\r\n```\r\n\r\nyou should be able to access parameter value through `params` variable:\r\n\r\n```\r\nprintln params.WINDOWS_PLATFORMS\r\nprintln params[&#39;WINDOWS_PLATFORMS&#39;]\r\n//or dymamically\r\ndef key=&quot;WINDOWS&quot;\r\nprintln params[&quot;${key}_PLATFORMS&quot;]\r\n```\r\n\r\ni noticed that `this` is also working when using instead of `params`\r\n","title":"How to access parameters dynamically in groovy scripts","body":"<p><a href=\"https://www.jenkins.io/doc/book/pipeline/syntax/#parameters\" rel=\"nofollow noreferrer\">https://www.jenkins.io/doc/book/pipeline/syntax/#parameters</a></p>\n<blockquote>\n<p>The parameters directive provides a list of parameters that a user should provide when triggering the Pipeline. The values for these user-specified parameters are made available to Pipeline steps via the <code>params</code> object</p>\n</blockquote>\n<p>so, after</p>\n<pre class=\"lang-js prettyprint-override\"><code>parameters { \n  string(name: 'WINDOWS_PLATFORMS', defaultValue: 'staging', description: '')\n}\n</code></pre>\n<p>you should be able to access parameter value through <code>params</code> variable:</p>\n<pre><code>println params.WINDOWS_PLATFORMS\nprintln params['WINDOWS_PLATFORMS']\n//or dymamically\ndef key=&quot;WINDOWS&quot;\nprintln params[&quot;${key}_PLATFORMS&quot;]\n</code></pre>\n<p>i noticed that <code>this</code> is also working when using instead of <code>params</code></p>\n"}],"owner":{"account_id":19256289,"reputation":679,"user_id":14073111,"display_name":"user14073111"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":60,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76924568,"answer_count":1,"score":0,"last_activity_date":1692303074,"creation_date":1692291087,"question_id":76923600,"body_markdown":"Basically, I have a scenario where I have some parameters loaded from a file and additional parameters using a loop:\r\n\r\n    pipeline {\r\n    \tstages {\r\n    \t\tstage(&quot;prepare&quot;) {\r\n                steps {\r\n    \t\t\t\tscript {\r\n    \t\t\t\t\tdef params = load(&quot;parmas.gy&quot;)\r\n    \t\t\t\t\tdef yml = readYaml file: &quot;platforms.yml&quot;\r\n    \t\t\t\t\tdef selectedJobsMap = yml.selected_jobs\r\n    \t\t\t\t\tdef extra_parameters = []\r\n    \r\n    \t\t\t\t\tselectedJobsMap.each { param -&gt;\r\n    \t\t\t\t\t\tdef platformChoices = selectedJobsMap[param.key].collect { it.name as String }\r\n    \t\t\t\t\t\tparams.add (\r\n    \t\t\t\t\t\t\textendedChoice(\r\n    \t\t\t\t\t\t\t\tname: &quot;${param.key}_PLATFORMS&quot;,\r\n    \t\t\t\t\t\t\t\tdescription: &quot;Select ${param.key} platforms that you want to run tests&quot;,\r\n    \t\t\t\t\t\t\t\ttype: &#39;PT_CHECKBOX&#39;,\r\n    \t\t\t\t\t\t\t\tmultiSelectDelimiter: &#39;,&#39;,\r\n    \t\t\t\t\t\t\t\tvalue: platformChoices.join(&#39;,&#39;)\r\n    \t\t\t\t\t\t\t\t)\r\n    \t\t\t\t\t\t\t)\r\n    \t\t\t\t\t\t   extra_parameters.add(&quot;${param.key}_PLATFORMS&quot;)\r\n    \t\t\t\t\t}\r\n    \t\t\t\t\tproperties([parameters(params)])\r\n    \t\t\t\t\t\r\n    \t\t\t\t\textra_parameters.each { platformParam -&gt;\r\n    \t\t\t\t\t\tprintln(&quot;${platformParam}&quot;) // First print\r\n    \t\t\t\t\t\tprintln(&quot;${WINDOWS_PLATFORMS}&quot;) // Second print\r\n    \t\t\t\t\t}\r\n    \t\t\t\t}\r\n    \t\t\t}\r\n    \t\t}\r\n    \t}\r\n    }\r\n\r\nMy YML file is like this (it is huge but mocked it):\r\n\r\n    selected_jobs:\r\n    \tWindows:\r\n    \t\t- { name: &#39;windows10&#39;, job: &#39;app-test_windows10_x86_64_vm&#39; }\r\n    \t\t- { name: &#39;windows2019&#39;, job: &#39;app-test_windows2019_x86_64_vm&#39; }\r\n    \t\t- { name: &#39;windows2022&#39;, job: &#39;app-test_windows2022_x86_64_vm&#39; }\r\n    \tRHEL:\r\n    \t    - { name: &#39;rhel_7&#39;, job: &#39;app-test_rhel7_x64_docker&#39; }\r\n    \t\t- { name: &#39;rhel_8&#39;, job: &#39;app-test_rhel_8_arm64_docker&#39; }\r\n\r\nSo, `extra_parameters` is a list which will be like this: `[&quot;WINDOWS_PLATFORMS&quot;, &quot;RHEL_PLATFORMS&quot;]` and my problem is that the first print from groovy script is giving different results from the second print. Basically, the first print is printing &quot;WINDOWS_PLATFORMS&quot; as a string, and the second print is printing the correct value, which is the value which is stored behind WINDOWS_PLATFORMS parameter (which is the value that is selected in the Jenkins job).\r\n\r\nAny idea how to fix it?\r\n\r\nBasically, this doesn&#39;t print the same thing:\r\n\r\n    def x1 = &quot;WINDOWS_PLATFORMS&quot;\r\n    println(&quot;${WINDOWS_PLATFORMS}&quot;)\r\n    println(&quot;${x1}&quot;)\r\n\r\n","title":"How to access parameters dynamically in groovy scripts","body":"<p>Basically, I have a scenario where I have some parameters loaded from a file and additional parameters using a loop:</p>\n<pre><code>pipeline {\n    stages {\n        stage(&quot;prepare&quot;) {\n            steps {\n                script {\n                    def params = load(&quot;parmas.gy&quot;)\n                    def yml = readYaml file: &quot;platforms.yml&quot;\n                    def selectedJobsMap = yml.selected_jobs\n                    def extra_parameters = []\n\n                    selectedJobsMap.each { param -&gt;\n                        def platformChoices = selectedJobsMap[param.key].collect { it.name as String }\n                        params.add (\n                            extendedChoice(\n                                name: &quot;${param.key}_PLATFORMS&quot;,\n                                description: &quot;Select ${param.key} platforms that you want to run tests&quot;,\n                                type: 'PT_CHECKBOX',\n                                multiSelectDelimiter: ',',\n                                value: platformChoices.join(',')\n                                )\n                            )\n                           extra_parameters.add(&quot;${param.key}_PLATFORMS&quot;)\n                    }\n                    properties([parameters(params)])\n                    \n                    extra_parameters.each { platformParam -&gt;\n                        println(&quot;${platformParam}&quot;) // First print\n                        println(&quot;${WINDOWS_PLATFORMS}&quot;) // Second print\n                    }\n                }\n            }\n        }\n    }\n}\n</code></pre>\n<p>My YML file is like this (it is huge but mocked it):</p>\n<pre><code>selected_jobs:\n    Windows:\n        - { name: 'windows10', job: 'app-test_windows10_x86_64_vm' }\n        - { name: 'windows2019', job: 'app-test_windows2019_x86_64_vm' }\n        - { name: 'windows2022', job: 'app-test_windows2022_x86_64_vm' }\n    RHEL:\n        - { name: 'rhel_7', job: 'app-test_rhel7_x64_docker' }\n        - { name: 'rhel_8', job: 'app-test_rhel_8_arm64_docker' }\n</code></pre>\n<p>So, <code>extra_parameters</code> is a list which will be like this: <code>[&quot;WINDOWS_PLATFORMS&quot;, &quot;RHEL_PLATFORMS&quot;]</code> and my problem is that the first print from groovy script is giving different results from the second print. Basically, the first print is printing &quot;WINDOWS_PLATFORMS&quot; as a string, and the second print is printing the correct value, which is the value which is stored behind WINDOWS_PLATFORMS parameter (which is the value that is selected in the Jenkins job).</p>\n<p>Any idea how to fix it?</p>\n<p>Basically, this doesn't print the same thing:</p>\n<pre><code>def x1 = &quot;WINDOWS_PLATFORMS&quot;\nprintln(&quot;${WINDOWS_PLATFORMS}&quot;)\nprintln(&quot;${x1}&quot;)\n</code></pre>\n"},{"tags":["java","android","amadeus"],"answers":[{"tags":[],"owner":{"account_id":9194285,"reputation":418,"user_id":8628330,"display_name":"Jamal N"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1692302184,"creation_date":1692302184,"answer_id":76924726,"question_id":76924345,"body_markdown":"In the request builder you are calling the `url()` method tow times, that&#39;s the main cause of your problem.\r\n I am not sure of your use case but I think you will only need the second call `url(urlBuilder.build())` as this will contain the `baseUrl+endpoint+parameters` .","title":"Error Code: 38191, Invalid HTTP header when I visit the url I built using urlBuilder as shown below","body":"<p>In the request builder you are calling the <code>url()</code> method tow times, that's the main cause of your problem.\nI am not sure of your use case but I think you will only need the second call <code>url(urlBuilder.build())</code> as this will contain the <code>baseUrl+endpoint+parameters</code> .</p>\n"}],"owner":{"account_id":19154357,"reputation":23,"user_id":13991520,"display_name":"shakirul islam"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":87,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1692302184,"creation_date":1692298240,"question_id":76924345,"body_markdown":"I&#39;m currently working on an Android project that involves making HTTP requests to the Amadeus Flight Offers API. I&#39;ve encountered an issue with the API request, and I&#39;m hoping to get some guidance on how to resolve it.\r\n\r\nThe problem I&#39;m facing is related to the HTTP 401 (Unauthorized) error that I&#39;m receiving when trying to access the API. The error message specifically states that the &quot;Authorization&quot; header is missing or in an invalid format. I&#39;ve double-checked my code, and it seems like I&#39;m setting the header correctly. However, I might be missing something or mis-configuring it unintentionally.\r\n\r\nHere&#39;s a breakdown of my code where  I construct the base URL for the API:\r\n```\r\nHttpUrl baseHttpUrl = HttpUrl.parse(&quot;https://test.api.amadeus.com/v2/shopping/flight-offers&quot;);\r\n\r\n        if (baseHttpUrl != null) {\r\n            HttpUrl.Builder urlBuilder = baseHttpUrl.newBuilder();\r\n            urlBuilder.addQueryParameter(&quot;originLocationCode&quot;, origin);\r\n            urlBuilder.addQueryParameter(&quot;destinationLocationCode&quot;, destination);\r\n            urlBuilder.addQueryParameter(&quot;departureDate&quot;, fromDate);\r\n            urlBuilder.addQueryParameter(&quot;returnDate&quot;, toDate); // If round-trip search\r\n            Log.d(&quot;SearchActivity&quot;, &quot;URL: &quot; + urlBuilder.build());\r\n\r\n```\r\n\r\n\r\n**To be more specific, the URL I get from the log redirects me to a page saying** - \r\n\r\n\r\n\r\n&gt; errors\t\r\n0\t\r\ncode\t38191  \r\ntitle\t&quot;Invalid HTTP header&quot;  \r\ndetail\t&quot;Missing or invalid format for mandatory Authorization header&quot;  \r\nstatus\t401\r\n\r\n\r\n\r\nI feel I am making an error somewhere here, I attempt to perform the GET request using the following method - \r\n\r\n\r\n```\r\npublic String performGetRequest(String endpoint, HttpUrl.Builder urlBuilder) throws IOException {\r\n        Request request = new Request.Builder()\r\n                .url(BASE_URL + endpoint)\r\n                .addHeader(&quot;Authorization&quot;, &quot;Bearer &quot; + API_KEY)\r\n                .url(urlBuilder.build())\r\n                .build();\r\n\r\n        try (Response response = client.newCall(request).execute()) {\r\n            if (response.isSuccessful()) {\r\n                return response.body().string();\r\n            }\r\n        }\r\n        return null;\r\n    }\r\n```\r\n\r\n\r\n\r\n","title":"Error Code: 38191, Invalid HTTP header when I visit the url I built using urlBuilder as shown below","body":"<p>I'm currently working on an Android project that involves making HTTP requests to the Amadeus Flight Offers API. I've encountered an issue with the API request, and I'm hoping to get some guidance on how to resolve it.</p>\n<p>The problem I'm facing is related to the HTTP 401 (Unauthorized) error that I'm receiving when trying to access the API. The error message specifically states that the &quot;Authorization&quot; header is missing or in an invalid format. I've double-checked my code, and it seems like I'm setting the header correctly. However, I might be missing something or mis-configuring it unintentionally.</p>\n<p>Here's a breakdown of my code where  I construct the base URL for the API:</p>\n<pre><code>HttpUrl baseHttpUrl = HttpUrl.parse(&quot;https://test.api.amadeus.com/v2/shopping/flight-offers&quot;);\n\n        if (baseHttpUrl != null) {\n            HttpUrl.Builder urlBuilder = baseHttpUrl.newBuilder();\n            urlBuilder.addQueryParameter(&quot;originLocationCode&quot;, origin);\n            urlBuilder.addQueryParameter(&quot;destinationLocationCode&quot;, destination);\n            urlBuilder.addQueryParameter(&quot;departureDate&quot;, fromDate);\n            urlBuilder.addQueryParameter(&quot;returnDate&quot;, toDate); // If round-trip search\n            Log.d(&quot;SearchActivity&quot;, &quot;URL: &quot; + urlBuilder.build());\n\n</code></pre>\n<p><strong>To be more specific, the URL I get from the log redirects me to a page saying</strong> -</p>\n<blockquote>\n<p>errors<br />\n0<br />\ncode    38191<br />\ntitle   &quot;Invalid HTTP header&quot;<br />\ndetail  &quot;Missing or invalid format for mandatory Authorization header&quot;<br />\nstatus  401</p>\n</blockquote>\n<p>I feel I am making an error somewhere here, I attempt to perform the GET request using the following method -</p>\n<pre><code>public String performGetRequest(String endpoint, HttpUrl.Builder urlBuilder) throws IOException {\n        Request request = new Request.Builder()\n                .url(BASE_URL + endpoint)\n                .addHeader(&quot;Authorization&quot;, &quot;Bearer &quot; + API_KEY)\n                .url(urlBuilder.build())\n                .build();\n\n        try (Response response = client.newCall(request).execute()) {\n            if (response.isSuccessful()) {\n                return response.body().string();\n            }\n        }\n        return null;\n    }\n</code></pre>\n"},{"tags":["java","arrays","byte","boxing"],"comments":[{"owner":{"account_id":84585,"reputation":7493,"user_id":236345,"accept_rate":87,"display_name":"Alfabravo"},"score":5,"creation_date":1350513232,"post_id":12944377,"comment_id":17545816,"body_markdown":"10 questions, ONE accepted? No good","body":"10 questions, ONE accepted? No good"},{"owner":{"account_id":251932,"reputation":37692,"user_id":529630,"accept_rate":86,"display_name":"Dunes"},"score":0,"creation_date":1350513497,"post_id":12944377,"comment_id":17545895,"body_markdown":"Why do you need/have a `Byte[]`? Doesn&#39;t seem like a good idea... either use `byte[]` or `List&lt;Byte&gt;`.","body":"Why do you need/have a <code>Byte[]</code>? Doesn&#39;t seem like a good idea... either use <code>byte[]</code> or <code>List&lt;Byte&gt;</code>."},{"owner":{"account_id":358449,"reputation":42107,"user_id":699224,"accept_rate":67,"display_name":"DNA"},"score":0,"creation_date":1350513632,"post_id":12944377,"comment_id":17545927,"body_markdown":"Might be useful if the values can be null, though probably not very efficient (ie. wastes any space-benefit of storing bytes, because of all the object references)?","body":"Might be useful if the values can be null, though probably not very efficient (ie. wastes any space-benefit of storing bytes, because of all the object references)?"},{"owner":{"account_id":251932,"reputation":37692,"user_id":529630,"accept_rate":86,"display_name":"Dunes"},"score":0,"creation_date":1350513689,"post_id":12944377,"comment_id":17545936,"body_markdown":"But you can&#39;t convert a `Byte[]` to a `byte[]` if you have null references...","body":"But you can&#39;t convert a <code>Byte[]</code> to a <code>byte[]</code> if you have null references..."},{"owner":{"account_id":84585,"reputation":7493,"user_id":236345,"accept_rate":87,"display_name":"Alfabravo"},"score":0,"creation_date":1350513814,"post_id":12944377,"comment_id":17545969,"body_markdown":"@BalusC ok, 1 of 7. Haven&#39;t improved a lot!","body":"@BalusC ok, 1 of 7. Haven&#39;t improved a lot!"},{"owner":{"account_id":53155,"reputation":7742,"user_id":158876,"accept_rate":93,"display_name":"Ben"},"score":0,"creation_date":1382726731,"post_id":12944377,"comment_id":29087813,"body_markdown":"@Dunes One reason to have Byte[] is that it becomes an intermediate form of trying to call toArray on a List&lt;Byte&gt;. In this case, writing your own loop seems to be the easiest way.","body":"@Dunes One reason to have Byte[] is that it becomes an intermediate form of trying to call toArray on a List&lt;Byte&gt;. In this case, writing your own loop seems to be the easiest way."}],"answers":[{"tags":[],"owner":{"account_id":261048,"reputation":25820,"user_id":544983,"accept_rate":67,"display_name":"Juvanis"},"down_vote_count":0,"up_vote_count":61,"is_accepted":true,"score":61,"last_activity_date":1536249237,"creation_date":1350513073,"answer_id":12944413,"question_id":12944377,"body_markdown":"`Byte` class is a *wrapper* for the primitive `byte`. This should do the work:\r\n    \r\n    byte[] bytes = new byte[10];\r\n    Byte[] byteObjects = new Byte[bytes.length];\r\n    \r\n    int i=0;    \r\n    // Associating Byte array values with bytes. (byte[] to Byte[])\r\n    for(byte b: bytes)\r\n       byteObjects[i++] = b;  // Autoboxing.\r\n\r\n    ....\r\n\r\n    int j=0;\r\n    // Unboxing Byte values. (Byte[] to byte[])\r\n    for(Byte b: byteObjects)\r\n        bytes[j++] = b.byteValue();\r\n       ","title":"How to convert byte[] to Byte[] and the other way around?","body":"<p><code>Byte</code> class is a <em>wrapper</em> for the primitive <code>byte</code>. This should do the work:</p>\n\n<pre><code>byte[] bytes = new byte[10];\nByte[] byteObjects = new Byte[bytes.length];\n\nint i=0;    \n// Associating Byte array values with bytes. (byte[] to Byte[])\nfor(byte b: bytes)\n   byteObjects[i++] = b;  // Autoboxing.\n\n....\n\nint j=0;\n// Unboxing Byte values. (Byte[] to byte[])\nfor(Byte b: byteObjects)\n    bytes[j++] = b.byteValue();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":358449,"reputation":42107,"user_id":699224,"accept_rate":67,"display_name":"DNA"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1350513252,"creation_date":1350513252,"answer_id":12944441,"question_id":12944377,"body_markdown":"From byte[] to Byte[]:\r\n\r\n\t\tbyte[] b = new byte[]{1,2};\r\n\t\tByte[] B = new Byte[b.length];\r\n\t\tfor (int i = 0; i &lt; b.length; i++)\r\n\t\t{\r\n\t\t\tB[i] = Byte.valueOf(b[i]);\r\n\t\t}\r\n\r\nFrom Byte[] to byte[] (using our previously-defined `B`):\r\n\r\n\t\tbyte[] b2 = new byte[B.length];\r\n\t\tfor (int i = 0; i &lt; B.length; i++)\r\n\t\t{\r\n\t\t\tb2[i] = B[i];\r\n\t\t}","title":"How to convert byte[] to Byte[] and the other way around?","body":"<p>From byte[] to Byte[]:</p>\n\n<pre><code>    byte[] b = new byte[]{1,2};\n    Byte[] B = new Byte[b.length];\n    for (int i = 0; i &lt; b.length; i++)\n    {\n        B[i] = Byte.valueOf(b[i]);\n    }\n</code></pre>\n\n<p>From Byte[] to byte[] (using our previously-defined <code>B</code>):</p>\n\n<pre><code>    byte[] b2 = new byte[B.length];\n    for (int i = 0; i &lt; B.length; i++)\n    {\n        b2[i] = B[i];\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":298997,"reputation":5316,"user_id":605328,"accept_rate":87,"display_name":"Giannis"},"down_vote_count":0,"up_vote_count":16,"is_accepted":false,"score":16,"last_activity_date":1384250170,"creation_date":1384250170,"answer_id":19925997,"question_id":12944377,"body_markdown":"You could use the toPrimitive method in the Apache Commons lang library ArrayUtils class,\r\nAs suggested here - https://stackoverflow.com/questions/6430841/java-byte-to-byte","title":"How to convert byte[] to Byte[] and the other way around?","body":"<p>You could use the toPrimitive method in the Apache Commons lang library ArrayUtils class,\nAs suggested here - <a href=\"https://stackoverflow.com/questions/6430841/java-byte-to-byte\">Java - Byte[] to byte[]</a></p>\n"},{"tags":[],"owner":{"account_id":1415830,"reputation":7284,"user_id":1341526,"accept_rate":96,"display_name":"jacktrades"},"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1402958623,"creation_date":1402958623,"answer_id":24253320,"question_id":12944377,"body_markdown":"    byte[] toPrimitives(Byte[] oBytes)\r\n    {\r\n\r\n        byte[] bytes = new byte[oBytes.length];\r\n        for(int i = 0; i &lt; oBytes.length; i++){\r\n            bytes[i] = oBytes[i];\r\n        }\r\n        return bytes;\r\n\r\n    }\r\nInverse:\r\n\r\n    //byte[] to Byte[]\r\n    Byte[] toObjects(byte[] bytesPrim) {\r\n\r\n        Byte[] bytes = new Byte[bytesPrim.length];\r\n        int i = 0;\r\n        for (byte b : bytesPrim) bytes[i++] = b; //Autoboxing\r\n        return bytes;\r\n\r\n    }","title":"How to convert byte[] to Byte[] and the other way around?","body":"<pre><code>byte[] toPrimitives(Byte[] oBytes)\n{\n\n    byte[] bytes = new byte[oBytes.length];\n    for(int i = 0; i &lt; oBytes.length; i++){\n        bytes[i] = oBytes[i];\n    }\n    return bytes;\n\n}\n</code></pre>\n\n<p>Inverse:</p>\n\n<pre><code>//byte[] to Byte[]\nByte[] toObjects(byte[] bytesPrim) {\n\n    Byte[] bytes = new Byte[bytesPrim.length];\n    int i = 0;\n    for (byte b : bytesPrim) bytes[i++] = b; //Autoboxing\n    return bytes;\n\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2871026,"reputation":31449,"user_id":2464386,"accept_rate":84,"display_name":"ajb"},"down_vote_count":1,"up_vote_count":23,"is_accepted":false,"score":22,"last_activity_date":1402959032,"creation_date":1402959032,"answer_id":24253371,"question_id":12944377,"body_markdown":"Java 8 solution:\r\n\r\n    Byte[] toObjects(byte[] bytesPrim) {\r\n        Byte[] bytes = new Byte[bytesPrim.length];\r\n        Arrays.setAll(bytes, n -&gt; bytesPrim[n]);\r\n        return bytes;\r\n    }\r\n\r\nUnfortunately, you can&#39;t do this to convert from `Byte[]` to `byte[]`.  `Arrays` has `setAll` for `double[]`, `int[]`, and `long[]`, but not for other primitive types.\r\n       ","title":"How to convert byte[] to Byte[] and the other way around?","body":"<p>Java 8 solution:</p>\n\n<pre><code>Byte[] toObjects(byte[] bytesPrim) {\n    Byte[] bytes = new Byte[bytesPrim.length];\n    Arrays.setAll(bytes, n -&gt; bytesPrim[n]);\n    return bytes;\n}\n</code></pre>\n\n<p>Unfortunately, you can't do this to convert from <code>Byte[]</code> to <code>byte[]</code>.  <code>Arrays</code> has <code>setAll</code> for <code>double[]</code>, <code>int[]</code>, and <code>long[]</code>, but not for other primitive types.</p>\n"},{"tags":[],"owner":{"account_id":9060595,"reputation":935,"user_id":6747239,"display_name":"LaCrampe"},"down_vote_count":5,"up_vote_count":94,"is_accepted":false,"score":89,"last_activity_date":1692302147,"creation_date":1473075533,"answer_id":39329796,"question_id":12944377,"body_markdown":"byte[] to Byte[] :\r\n\r\n    byte[] bytes = ...;\r\n    Byte[] byteObject = ArrayUtils.toObject(bytes);\r\n    \r\nByte[] to byte[] :\r\n\r\n    Byte[] byteObject = new Byte[0];\r\n    byte[] bytes = ArrayUtils.toPrimitive(byteObject);\r\n\r\n\r\nNote: ArrayUtils are not a part of Java, but Apache lib","title":"How to convert byte[] to Byte[] and the other way around?","body":"<p>byte[] to Byte[] :</p>\n<pre><code>byte[] bytes = ...;\nByte[] byteObject = ArrayUtils.toObject(bytes);\n</code></pre>\n<p>Byte[] to byte[] :</p>\n<pre><code>Byte[] byteObject = new Byte[0];\nbyte[] bytes = ArrayUtils.toPrimitive(byteObject);\n</code></pre>\n<p>Note: ArrayUtils are not a part of Java, but Apache lib</p>\n"},{"tags":[],"owner":{"account_id":2058509,"reputation":195,"user_id":1835668,"display_name":"mkalmo"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1586344545,"creation_date":1586344545,"answer_id":61099379,"question_id":12944377,"body_markdown":"If someone preferes Stream API over ordinary loops.\r\n\r\n    private Byte[] toObjects(byte[] bytes) {\r\n        return IntStream.range(0, bytes.length)\r\n                .mapToObj(i -&gt; bytes[i])\r\n                .toArray(Byte[]::new);\r\n    }\r\n\r\n","title":"How to convert byte[] to Byte[] and the other way around?","body":"<p>If someone preferes Stream API over ordinary loops.</p>\n\n<pre><code>private Byte[] toObjects(byte[] bytes) {\n    return IntStream.range(0, bytes.length)\n            .mapToObj(i -&gt; bytes[i])\n            .toArray(Byte[]::new);\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":241000,"reputation":815,"user_id":511554,"accept_rate":0,"display_name":"David Urry"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1645474851,"creation_date":1645474463,"answer_id":71212499,"question_id":12944377,"body_markdown":"Step back.  Look at the bigger picture.  You&#39;re stuck converting byte[] to Byte[] or vice versa because of Java&#39;s strict type casing with something like this \r\n\r\n&gt; List&lt; Byte&gt;\r\nor\r\n&gt;List&lt;Byte[]&gt;  \r\n\r\nNow you have byte[] and Byte[] and have to convert.  This will help.\r\n\r\nKeep all your byte[]s in a list like this:  List&lt;byte[]&gt; instead of List&lt; Byte&gt; or List&lt;Byte[]&gt;. (byte is a primitive, byte[] is an object)\r\n\r\nAs you acquire bytes do this (networking socket example):\r\n\r\n    ArrayList&lt;byte[]&gt; compiledMessage = new ArrayList&lt;byte[]&gt;;\r\n    ...\r\n    compiledMessage.add(packet.getData());\r\n\r\nThen, when you want to put all your bytes in a single message, do this:\r\n\r\n\tbyte[] fromListOfNotByteArray (List&lt;byte[]&gt; list) {\r\n\t\tByteArrayOutputStream baos = new ByteArrayOutputStream();\r\n\t\tObjectOutputStream oos;\r\n\t\ttry {\r\n\t\t\toos = new ObjectOutputStream(baos);\r\n\t\t\toos.writeObject(list);\r\n\t\t} catch (IOException e) {\r\n\t\t\te.printStackTrace();\r\n\t\t}\r\n\t\treturn baos.toByteArray();\r\n\t}\r\n\r\nThat way, you can keep all your parts in List&lt;byte[]&gt; and your whole in byte[] without a bunch of crazy copy tasks in for loops with little baby byte[]s everywhere.  ;)\r\n\r\nNow you know -- teach others.\r\n","title":"How to convert byte[] to Byte[] and the other way around?","body":"<p>Step back.  Look at the bigger picture.  You're stuck converting byte[] to Byte[] or vice versa because of Java's strict type casing with something like this</p>\n<blockquote>\n<p>List&lt; Byte&gt;\nor\nList&lt;Byte[]&gt;</p>\n</blockquote>\n<p>Now you have byte[] and Byte[] and have to convert.  This will help.</p>\n<p>Keep all your byte[]s in a list like this:  List&lt;byte[]&gt; instead of List&lt; Byte&gt; or List&lt;Byte[]&gt;. (byte is a primitive, byte[] is an object)</p>\n<p>As you acquire bytes do this (networking socket example):</p>\n<pre><code>ArrayList&lt;byte[]&gt; compiledMessage = new ArrayList&lt;byte[]&gt;;\n...\ncompiledMessage.add(packet.getData());\n</code></pre>\n<p>Then, when you want to put all your bytes in a single message, do this:</p>\n<pre><code>byte[] fromListOfNotByteArray (List&lt;byte[]&gt; list) {\n    ByteArrayOutputStream baos = new ByteArrayOutputStream();\n    ObjectOutputStream oos;\n    try {\n        oos = new ObjectOutputStream(baos);\n        oos.writeObject(list);\n    } catch (IOException e) {\n        e.printStackTrace();\n    }\n    return baos.toByteArray();\n}\n</code></pre>\n<p>That way, you can keep all your parts in List&lt;byte[]&gt; and your whole in byte[] without a bunch of crazy copy tasks in for loops with little baby byte[]s everywhere.  ;)</p>\n<p>Now you know -- teach others.</p>\n"},{"tags":[],"owner":{"account_id":1888633,"reputation":309,"user_id":1707311,"accept_rate":56,"display_name":"dani77"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1675618095,"creation_date":1675618095,"answer_id":75354155,"question_id":12944377,"body_markdown":"Since Java 8:\r\n\r\n    byte[] bytes = new bytes[byteObject.length];\r\n    IntStream.range(0, byteObject.length).forEach(x -&gt; bytes [x] = byteObject[x]);","title":"How to convert byte[] to Byte[] and the other way around?","body":"<p>Since Java 8:</p>\n<pre><code>byte[] bytes = new bytes[byteObject.length];\nIntStream.range(0, byteObject.length).forEach(x -&gt; bytes [x] = byteObject[x]);\n</code></pre>\n"}],"owner":{"account_id":888003,"reputation":9435,"user_id":926958,"accept_rate":56,"display_name":"user926958"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":126614,"favorite_count":0,"down_vote_count":0,"up_vote_count":96,"accepted_answer_id":12944413,"answer_count":9,"score":96,"last_activity_date":1692302147,"creation_date":1350512874,"question_id":12944377,"body_markdown":"How to convert `byte[]` to `Byte[]` and also `Byte[]` to `byte[]`, in the case of not using any 3rd party library?\r\n\r\nIs there a way to do it fast just using the standard library?\r\n","title":"How to convert byte[] to Byte[] and the other way around?","body":"<p>How to convert <code>byte[]</code> to <code>Byte[]</code> and also <code>Byte[]</code> to <code>byte[]</code>, in the case of not using any 3rd party library?</p>\n\n<p>Is there a way to do it fast just using the standard library?</p>\n"},{"tags":["java","arrays","spring","image"],"comments":[{"owner":{"account_id":401843,"reputation":89768,"user_id":768644,"display_name":"rzwitserloot"},"score":3,"creation_date":1692227607,"post_id":76917529,"comment_id":135596633,"body_markdown":"If the file in question is, say, 2GB, you&#39;re going to run into `OutOfMemoryError`, or even if you don&#39;t, your system is _very_ constrained, needing __2GB__ for every concurrently running upload process. There are a few more reasons but that&#39;s one of the significant ones.","body":"If the file in question is, say, 2GB, you&#39;re going to run into <code>OutOfMemoryError</code>, or even if you don&#39;t, your system is <i>very</i> constrained, needing <b>2GB</b> for every concurrently running upload process. There are a few more reasons but that&#39;s one of the significant ones."},{"owner":{"account_id":11400015,"reputation":1904,"user_id":8357251,"display_name":"gdomo"},"score":1,"creation_date":1692227803,"post_id":76917529,"comment_id":135596651,"body_markdown":"You can use `byte[]`, but it could be less convenient: 1) you probably have to pass a filename. How would you wrap it together? 2) It could be more difficult to implement on a client side","body":"You can use <code>byte[]</code>, but it could be less convenient: 1) you probably have to pass a filename. How would you wrap it together? 2) It could be more difficult to implement on a client side"},{"owner":{"account_id":4565343,"reputation":12775,"user_id":3710490,"accept_rate":64,"display_name":"Valijon"},"score":0,"creation_date":1692228425,"post_id":76917529,"comment_id":135596700,"body_markdown":"More info: [How does HTTP file upload work?](https://stackoverflow.com/questions/8659808/how-does-http-file-upload-work)","body":"More info: <a href=\"https://stackoverflow.com/questions/8659808/how-does-http-file-upload-work\">How does HTTP file upload work?</a>"},{"owner":{"account_id":1531514,"reputation":26639,"user_id":1428606,"accept_rate":71,"display_name":"Harald K"},"score":0,"creation_date":1692346861,"post_id":76917529,"comment_id":135613260,"body_markdown":"That is how browsers implement multipart file upload using HTML forms. If you are just creating your own REST interface to transfer single files, I don&#39;t see any problems in just sending the entire file as the payload in a normal file transfer. I would recommend using `Input/OutputStream` over `byte[]` though, as that gives you more flexibility and less memory constraints (ie you can stream directly to/from disk, with a minimal byte buffer for better performance).","body":"That is how browsers implement multipart file upload using HTML forms. If you are just creating your own REST interface to transfer single files, I don&#39;t see any problems in just sending the entire file as the payload in a normal file transfer. I would recommend using <code>Input&#47;OutputStream</code> over <code>byte[]</code> though, as that gives you more flexibility and less memory constraints (ie you can stream directly to/from disk, with a minimal byte buffer for better performance)."}],"owner":{"account_id":9594227,"reputation":196,"user_id":7123940,"display_name":"apologiessirnoclue"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":133,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1692302087,"creation_date":1692226507,"question_id":76917529,"body_markdown":"My application requires images, that I store on somthing like Amazon S3, until now I was getting images by retrieving URL from the client and downloading the file. However that solution is highly dependent on clients infrastructure, so the idea now is for client to send bytes to my API. I’m writing the code in Spring Boot and it seems like the best way is to use `MultipartFile` class in Controller as a wrapper for the data, at least that’s the only thing that internet is saying, however I can’t figure out why not use `byte[]`, wouldn’t it be quicker if I don’t need anything else, just bytes that create the image?","title":"Why should I use MultipartFile instead of byte[]?","body":"<p>My application requires images, that I store on somthing like Amazon S3, until now I was getting images by retrieving URL from the client and downloading the file. However that solution is highly dependent on clients infrastructure, so the idea now is for client to send bytes to my API. I’m writing the code in Spring Boot and it seems like the best way is to use <code>MultipartFile</code> class in Controller as a wrapper for the data, at least that’s the only thing that internet is saying, however I can’t figure out why not use <code>byte[]</code>, wouldn’t it be quicker if I don’t need anything else, just bytes that create the image?</p>\n"},{"tags":["java","properties","apache-camel","integration"],"owner":{"account_id":20747635,"reputation":1,"user_id":15235902,"display_name":"foumz"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":13,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1692302033,"creation_date":1692224940,"question_id":76917447,"body_markdown":"I&#39;m utilizing Apache Camel and facing an intricate situation. I retrieve certain properties via an API call and aim to use these properties across all my other routes. Initially, I employed caching to manage this, but it no longer serves its purpose.\r\n\r\n```\r\n&lt;route id=&quot;initializeProperties&quot;&gt;\r\n    &lt;from uri=&quot;timer://initTimer?repeatCount=1&quot;/&gt;\r\n    &lt;to uri=&quot;http4://127.0.0.1:8093/GETSINGLETONASJSON?Singleton=PROP&quot;/&gt;\r\n    &lt;setProperty propertyName=&quot;PropData&quot;&gt;\r\n        &lt;simple&gt;${body}&lt;/simple&gt;\r\n    &lt;/setProperty&gt;\r\n    &lt;log message=&quot;Data initialized: ${property.PropData}&quot;/&gt;\r\n&lt;/route&gt;\r\n\r\n&lt;route id=&quot;anotherRoute&quot;&gt;\r\n    &lt;from uri=&quot;timer://someTimer?fixedRate=true&amp;amp;period=30000&quot;/&gt;\r\n    &lt;setHeader headerName=&quot;config&quot;&gt;\r\n        &lt;simple&gt;${property.PropData}&lt;/simple&gt;                        \r\n    &lt;/setHeader&gt;\r\n    &lt;!-- ... other route configurations ... --&gt;\r\n&lt;/route&gt;\r\n\r\n```\r\nI attempted to use a property, but each of my other routes uses a timer. As a result, they don&#39;t seem to be able to access this property. An alternative I found was to use the &quot;direct&quot; component to invoke the route making the API call each time. However, I have around fifteen routes that operate rather frequently. This would translate to making multiple API calls per second, which is not feasible.\r\n\r\nIs there any credible alternative or solution within Camel&#39;s built-in components or patterns that would allow me to propagate these properties to all routes without bombarding the API?","title":"Need to propagate properties from an API call to all Apache Camel routes with timers without excessive API calls","body":"<p>I'm utilizing Apache Camel and facing an intricate situation. I retrieve certain properties via an API call and aim to use these properties across all my other routes. Initially, I employed caching to manage this, but it no longer serves its purpose.</p>\n<pre><code>&lt;route id=&quot;initializeProperties&quot;&gt;\n    &lt;from uri=&quot;timer://initTimer?repeatCount=1&quot;/&gt;\n    &lt;to uri=&quot;http4://127.0.0.1:8093/GETSINGLETONASJSON?Singleton=PROP&quot;/&gt;\n    &lt;setProperty propertyName=&quot;PropData&quot;&gt;\n        &lt;simple&gt;${body}&lt;/simple&gt;\n    &lt;/setProperty&gt;\n    &lt;log message=&quot;Data initialized: ${property.PropData}&quot;/&gt;\n&lt;/route&gt;\n\n&lt;route id=&quot;anotherRoute&quot;&gt;\n    &lt;from uri=&quot;timer://someTimer?fixedRate=true&amp;amp;period=30000&quot;/&gt;\n    &lt;setHeader headerName=&quot;config&quot;&gt;\n        &lt;simple&gt;${property.PropData}&lt;/simple&gt;                        \n    &lt;/setHeader&gt;\n    &lt;!-- ... other route configurations ... --&gt;\n&lt;/route&gt;\n\n</code></pre>\n<p>I attempted to use a property, but each of my other routes uses a timer. As a result, they don't seem to be able to access this property. An alternative I found was to use the &quot;direct&quot; component to invoke the route making the API call each time. However, I have around fifteen routes that operate rather frequently. This would translate to making multiple API calls per second, which is not feasible.</p>\n<p>Is there any credible alternative or solution within Camel's built-in components or patterns that would allow me to propagate these properties to all routes without bombarding the API?</p>\n"},{"tags":["java","spring-boot","rest","openfeign"],"comments":[{"owner":{"account_id":9504657,"reputation":7440,"user_id":7064617,"display_name":"JCompetence"},"score":0,"creation_date":1615364605,"post_id":66560440,"comment_id":117664997,"body_markdown":"LockCodeDto has setters? Getters?.  Did you actually set values to your LockDto before sending it through the sendLockCodeToCloudbeds","body":"LockCodeDto has setters? Getters?.  Did you actually set values to your LockDto before sending it through the sendLockCodeToCloudbeds"},{"owner":{"account_id":20710855,"reputation":11,"user_id":15207511,"display_name":"Денис Завражнов"},"score":0,"creation_date":1615365789,"post_id":66560440,"comment_id":117665492,"body_markdown":"i use lombok annotation @Data\n`@Data\n@Builder\npublic class LockCodeDto {\n    private String bookingId;\n    private String codeValue;\n}`","body":"i use lombok annotation @Data <code>@Data @Builder public class LockCodeDto {     private String bookingId;     private String codeValue; }</code>"},{"owner":{"account_id":9504657,"reputation":7440,"user_id":7064617,"display_name":"JCompetence"},"score":1,"creation_date":1615366060,"post_id":66560440,"comment_id":117665599,"body_markdown":"shouldnt your public void cloudbeds(@RequestBody LockCodeDto dto) actually have a @RequestBody as well&gt;","body":"shouldnt your public void cloudbeds(@RequestBody LockCodeDto dto) actually have a @RequestBody as well&gt;"}],"answers":[{"tags":[],"owner":{"account_id":18923139,"reputation":1,"user_id":13806809,"display_name":"Gustavo Pedro"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1692301538,"creation_date":1692277670,"answer_id":76921833,"question_id":66560440,"body_markdown":"When you receive your request in the `localhost:8081` application, you need to put the `@RequestBody` before the `LockCodeDto`","title":"When sending data through openfeign, null is received","body":"<p>When you receive your request in the <code>localhost:8081</code> application, you need to put the <code>@RequestBody</code> before the <code>LockCodeDto</code></p>\n"}],"owner":{"account_id":20710855,"reputation":11,"user_id":15207511,"display_name":"Денис Завражнов"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":762,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1692301538,"creation_date":1615362702,"question_id":66560440,"body_markdown":"I have a trouble. When i send dto by feign clients like this:\r\n\r\n    @FeignClient(url = &quot;${external.service.cloudbeds.url}&quot;, name = &quot;CloudbedsIntegrationClient&quot;)\r\n    public interface CloudbedsIntegrationClient {\r\n\r\n    @PostMapping(value = &quot;/integration/cloudbeds/lock-code&quot;)\r\n    String sendLockCodeToCloudbeds(@RequestBody LockCodeDto lockCodeDto);\r\n}\r\n\r\nand use this method \r\n\r\n    cloudbedsIntegrationClient.sendLockCodeToCloudbeds(lockCodeDto);\r\n\r\ni try recive this data on localhost:8081 by this RestController\r\n   \r\n    @PostMapping(&quot;/integration/cloudbeds/lock-code&quot;)\r\n    public void cloudbeds(LockCodeDto dto){\r\n       log.info(dto + &quot;это с клауд&quot;);\r\n    }\r\n\r\nbut i get null\r\n    \r\n    2021-03-10 10:45:55.817  INFO 27780 --- [nio-8081-exec-7] c.e.feigntest.FeigntestApplication       : LockCodeDto(bookingId=null, codeValue=null)это с клауд\r\n\r\nwhat i do wrong?\r\n\r\n","title":"When sending data through openfeign, null is received","body":"<p>I have a trouble. When i send dto by feign clients like this:</p>\n<pre><code>@FeignClient(url = &quot;${external.service.cloudbeds.url}&quot;, name = &quot;CloudbedsIntegrationClient&quot;)\npublic interface CloudbedsIntegrationClient {\n\n@PostMapping(value = &quot;/integration/cloudbeds/lock-code&quot;)\nString sendLockCodeToCloudbeds(@RequestBody LockCodeDto lockCodeDto);\n</code></pre>\n<p>}</p>\n<p>and use this method</p>\n<pre><code>cloudbedsIntegrationClient.sendLockCodeToCloudbeds(lockCodeDto);\n</code></pre>\n<p>i try recive this data on localhost:8081 by this RestController</p>\n<pre><code>@PostMapping(&quot;/integration/cloudbeds/lock-code&quot;)\npublic void cloudbeds(LockCodeDto dto){\n   log.info(dto + &quot;это с клауд&quot;);\n}\n</code></pre>\n<p>but i get null</p>\n<pre><code>2021-03-10 10:45:55.817  INFO 27780 --- [nio-8081-exec-7] c.e.feigntest.FeigntestApplication       : LockCodeDto(bookingId=null, codeValue=null)это с клауд\n</code></pre>\n<p>what i do wrong?</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":11683,"reputation":1438169,"user_id":22656,"accept_rate":86,"display_name":"Jon Skeet"},"score":8,"creation_date":1692298002,"post_id":76924311,"comment_id":135607853,"body_markdown":"It sounds like you should really have an interface to implement...","body":"It sounds like you should really have an interface to implement..."},{"owner":{"account_id":106352,"reputation":14961,"user_id":283342,"accept_rate":91,"display_name":"Adrian"},"score":0,"creation_date":1692298129,"post_id":76924311,"comment_id":135607879,"body_markdown":"@JonSkeet Of course, I agree that that would be better for real-world code. I am simply asking because I am curious about whether the JVM implementation details would allow this.","body":"@JonSkeet Of course, I agree that that would be better for real-world code. I am simply asking because I am curious about whether the JVM implementation details would allow this."},{"owner":{"account_id":27834272,"reputation":688,"user_id":21252090,"display_name":"Grinding For Reputation"},"score":2,"creation_date":1692298188,"post_id":76924311,"comment_id":135607887,"body_markdown":"*&quot;if I don&#39;t want `Thing2` to inherit private fields of `Thing`?&quot;* how does a subclass in inherit private fields? Am I missing something?","body":"<i>&quot;if I don&#39;t want <code>Thing2</code> to inherit private fields of <code>Thing</code>?&quot;</i> how does a subclass in inherit private fields? Am I missing something?"},{"owner":{"account_id":184870,"reputation":118711,"user_id":421195,"accept_rate":83,"display_name":"paulsm4"},"score":0,"creation_date":1692298573,"post_id":76924311,"comment_id":135607960,"body_markdown":"If  Java class &quot;Thing2&quot; inherits from super class &quot;Thing2&quot; ... then Thing2 *IS* a subclass.  Period.  Full stop.  ALTERNATIVES: Yes, you can generate bytecode on the fly:. \n For example: https://stackoverflow.com/questions/52867815/.  Better, it sounds like you simply want an &quot;interface&quot;: https://docs.oracle.com/javase/tutorial/java/concepts/interface.html","body":"If  Java class &quot;Thing2&quot; inherits from super class &quot;Thing2&quot; ... then Thing2 <i>IS</i> a subclass.  Period.  Full stop.  ALTERNATIVES: Yes, you can generate bytecode on the fly:.   For example: <a href=\"https://stackoverflow.com/questions/52867815/\">stackoverflow.com/questions/52867815</a>.  Better, it sounds like you simply want an &quot;interface&quot;: <a href=\"https://docs.oracle.com/javase/tutorial/java/concepts/interface.html\" rel=\"nofollow noreferrer\">docs.oracle.com/javase/tutorial/java/concepts/interface.html</a>"},{"owner":{"account_id":6606677,"reputation":1024,"user_id":5103317,"display_name":"Old Dog Programmer"},"score":2,"creation_date":1692299837,"post_id":76924311,"comment_id":135608212,"body_markdown":"*&quot;for example, if I don&#39;t want Thing2 to inherit private fields of Thing?&quot;* Lousy example, since private members are not inherited anyway.","body":"<i>&quot;for example, if I don&#39;t want Thing2 to inherit private fields of Thing?&quot;</i> Lousy example, since private members are not inherited anyway."},{"owner":{"account_id":23740623,"reputation":1,"user_id":17758716,"display_name":"Reilas"},"score":0,"creation_date":1692308738,"post_id":76924311,"comment_id":135609632,"body_markdown":"If you don&#39;t use inheritance then you won&#39;t be able to pass _Thing2_ to  _myFunction_.  Possibly add an example of what you&#39;re trying to achieve.","body":"If you don&#39;t use inheritance then you won&#39;t be able to pass <i>Thing2</i> to  <i>myFunction</i>.  Possibly add an example of what you&#39;re trying to achieve."},{"owner":{"account_id":7612423,"reputation":82486,"user_id":5772882,"display_name":"Anonymous"},"score":1,"creation_date":1692313618,"post_id":76924311,"comment_id":135610090,"body_markdown":"First, if `Thing` is a class and you pass to your method an object that is not a `Thing` or a subclass of `Thing`, then you are getting a compile-time error. No way to avoid that. Second, it hardly applies to your imagined situation, but there are two cases where a subtype of a class type is not a subclass: (1) E.g., `ArrayList&lt;? extends Integer&gt;` is a subtype of `ArrayList&lt;? extends Number&gt;` but is still the same class, not a subclass. Wildcards in generics allow many such cases. (2) The type of `null` is a subtype of any type, so also a subtype of `Thing`. So yes, pass `null` .","body":"First, if <code>Thing</code> is a class and you pass to your method an object that is not a <code>Thing</code> or a subclass of <code>Thing</code>, then you are getting a compile-time error. No way to avoid that. Second, it hardly applies to your imagined situation, but there are two cases where a subtype of a class type is not a subclass: (1) E.g., <code>ArrayList&lt;? extends Integer&gt;</code> is a subtype of <code>ArrayList&lt;? extends Number&gt;</code> but is still the same class, not a subclass. Wildcards in generics allow many such cases. (2) The type of <code>null</code> is a subtype of any type, so also a subtype of <code>Thing</code>. So yes, pass <code>null</code> ."}],"answers":[{"tags":[],"owner":{"account_id":2645973,"reputation":65777,"user_id":2288659,"accept_rate":90,"display_name":"Silvio Mayolo"},"down_vote_count":1,"up_vote_count":4,"is_accepted":false,"score":3,"last_activity_date":1692298199,"creation_date":1692298199,"answer_id":76924341,"question_id":76924311,"body_markdown":"This is *exactly* what the D in [SOLID](https://en.wikipedia.org/wiki/SOLID) is talking about. The D stands for [Dependency inversion](https://en.wikipedia.org/wiki/Dependency_inversion_principle), and it can be phrased as: &quot;Abstractions should not depend on concrete implementations&quot;.\r\n\r\nWhat you have is a function that takes a `Thing`. A concrete class. But what you really *want* is a function that takes &quot;anything that happens to support my `frobnicate()` method&quot;. That means the function has the wrong signature. If the function only requires a specific interface, then you want an `interface` in Java. Rather than\r\n\r\n```\r\npublic class Thing {\r\n  private Foo lotsOfImplementationDetails;\r\n\r\n  public void frobnicate() {\r\n    ...\r\n  }\r\n}\r\n\r\nvoid myFunction(Thing x) {\r\n  // All I want is frobnicate(), but I depend on the *whole* state.\r\n  ...\r\n}\r\n```\r\n\r\nconsider\r\n\r\n```\r\npublic interface Frobnicatable {\r\n  public void frobnicate();\r\n}\r\n\r\npublic class Thing implements Frobnicatable {\r\n  private Foo lotsOfImplementationDetails;\r\n\r\n  @Override\r\n  public void frobnicate() {\r\n    ...\r\n  }\r\n}\r\n\r\nvoid myFunction(Frobnicatable x) {\r\n  // Anything will work, provided it has the right method.\r\n  ...\r\n}\r\n```\r\n","title":"Is it possible to subtype a class without creating a subclass?","body":"<p>This is <em>exactly</em> what the D in <a href=\"https://en.wikipedia.org/wiki/SOLID\" rel=\"nofollow noreferrer\">SOLID</a> is talking about. The D stands for <a href=\"https://en.wikipedia.org/wiki/Dependency_inversion_principle\" rel=\"nofollow noreferrer\">Dependency inversion</a>, and it can be phrased as: &quot;Abstractions should not depend on concrete implementations&quot;.</p>\n<p>What you have is a function that takes a <code>Thing</code>. A concrete class. But what you really <em>want</em> is a function that takes &quot;anything that happens to support my <code>frobnicate()</code> method&quot;. That means the function has the wrong signature. If the function only requires a specific interface, then you want an <code>interface</code> in Java. Rather than</p>\n<pre><code>public class Thing {\n  private Foo lotsOfImplementationDetails;\n\n  public void frobnicate() {\n    ...\n  }\n}\n\nvoid myFunction(Thing x) {\n  // All I want is frobnicate(), but I depend on the *whole* state.\n  ...\n}\n</code></pre>\n<p>consider</p>\n<pre><code>public interface Frobnicatable {\n  public void frobnicate();\n}\n\npublic class Thing implements Frobnicatable {\n  private Foo lotsOfImplementationDetails;\n\n  @Override\n  public void frobnicate() {\n    ...\n  }\n}\n\nvoid myFunction(Frobnicatable x) {\n  // Anything will work, provided it has the right method.\n  ...\n}\n</code></pre>\n"}],"owner":{"account_id":106352,"reputation":14961,"user_id":283342,"accept_rate":91,"display_name":"Adrian"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":72,"favorite_count":0,"down_vote_count":2,"up_vote_count":2,"answer_count":1,"score":0,"last_activity_date":1692301533,"creation_date":1692297866,"question_id":76924311,"body_markdown":"Suppose I have a class `Thing` and some function/method that accepts a thing `myFunction(Thing x)`. I want to create a class `Thing2` which can be passed into `myFunction`, and which replicates the interface of `Thing` by supporting all the same public methods and fields etc. One way to do this would be to have `Thing2` be a subclass of `Thing`. But is there a way to have `Thing2` be a subtype of `Thing` without making it a subclass — for example, if I don&#39;t want `Thing2` to inherit private fields of `Thing`?\r\n\r\nAnd if it is not possible using regular Java, is it possible to do so by generating Java bytecode via some other means?\r\n\r\nI am asking this question purely out of curiosity, I don&#39;t actually have a specific problem that I am trying to solve.","title":"Is it possible to subtype a class without creating a subclass?","body":"<p>Suppose I have a class <code>Thing</code> and some function/method that accepts a thing <code>myFunction(Thing x)</code>. I want to create a class <code>Thing2</code> which can be passed into <code>myFunction</code>, and which replicates the interface of <code>Thing</code> by supporting all the same public methods and fields etc. One way to do this would be to have <code>Thing2</code> be a subclass of <code>Thing</code>. But is there a way to have <code>Thing2</code> be a subtype of <code>Thing</code> without making it a subclass — for example, if I don't want <code>Thing2</code> to inherit private fields of <code>Thing</code>?</p>\n<p>And if it is not possible using regular Java, is it possible to do so by generating Java bytecode via some other means?</p>\n<p>I am asking this question purely out of curiosity, I don't actually have a specific problem that I am trying to solve.</p>\n"},{"tags":["java","spring-boot","redis","spring-session","spring-boot-3"],"answers":[{"tags":[],"owner":{"account_id":24440940,"reputation":3122,"user_id":18364656,"display_name":"Andrei Lisa"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1692301258,"creation_date":1692301258,"answer_id":76924640,"question_id":76924020,"body_markdown":"According to Spring Boot 3.x [Migration Guide](https://github.com/spring-projects/spring-boot/wiki/Spring-Boot-3.0-Migration-Guide#spring-session-store-type)\r\n\r\nYou can define your own `SessionRepository` bean and cause the auto-configuration to back off.","title":"Can Spring Session be turned off in Spring Boot 3?","body":"<p>According to Spring Boot 3.x <a href=\"https://github.com/spring-projects/spring-boot/wiki/Spring-Boot-3.0-Migration-Guide#spring-session-store-type\" rel=\"nofollow noreferrer\">Migration Guide</a></p>\n<p>You can define your own <code>SessionRepository</code> bean and cause the auto-configuration to back off.</p>\n"}],"owner":{"account_id":10525614,"reputation":414,"user_id":7756713,"accept_rate":86,"display_name":"Jon H"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":403,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"answer_count":1,"score":4,"last_activity_date":1692301258,"creation_date":1692294820,"question_id":76924020,"body_markdown":"In my `Spring Boot 2.7.4` project, I use `Spring Session` with `Redis` by including these dependencies:\r\n\r\n```\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-starter-data-redis&lt;/artifactId&gt;\r\n            &lt;version&gt;${spring-boot-version}&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.session&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-session-data-redis&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n```\r\nThis, along with a handful of application property settings to specify host, port, etc., this works fine.\r\n\r\nSetting the following property allows Spring Session to be switched off. This is very convenient when running the service in an IDE in a development environment, for example, where you may not have access to a running Redis instance.\r\n\r\n```\r\nspring.session.store-type=NONE\r\n```\r\n\r\nHowever, I have just upgraded to `Spring Boot 3.0.4` and have found that this property is no longer supported. I would be very grateful if anyone can suggest an alternative way to switch off `Spring Session` for development work, while still leaving the dependencies and configuration in place ready for formal deployments.","title":"Can Spring Session be turned off in Spring Boot 3?","body":"<p>In my <code>Spring Boot 2.7.4</code> project, I use <code>Spring Session</code> with <code>Redis</code> by including these dependencies:</p>\n<pre><code>        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-data-redis&lt;/artifactId&gt;\n            &lt;version&gt;${spring-boot-version}&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.session&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-session-data-redis&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n</code></pre>\n<p>This, along with a handful of application property settings to specify host, port, etc., this works fine.</p>\n<p>Setting the following property allows Spring Session to be switched off. This is very convenient when running the service in an IDE in a development environment, for example, where you may not have access to a running Redis instance.</p>\n<pre><code>spring.session.store-type=NONE\n</code></pre>\n<p>However, I have just upgraded to <code>Spring Boot 3.0.4</code> and have found that this property is no longer supported. I would be very grateful if anyone can suggest an alternative way to switch off <code>Spring Session</code> for development work, while still leaving the dependencies and configuration in place ready for formal deployments.</p>\n"},{"tags":["java","java-11","java-io","beanshell","java.nio.file"],"comments":[{"owner":{"account_id":2053598,"reputation":41316,"user_id":1831987,"display_name":"VGR"},"score":0,"creation_date":1692300789,"post_id":76924444,"comment_id":135608375,"body_markdown":"Are you sure the code you’ve shown us (`Path fnew = …`) is your real code?  Files.exists(Path, LinkOption...) exists, and as long as the type of fnew is `Path`, the code should work.  However, there is no exists method (or any other method) which takes an argument of type WindowsPath, so if you declared your variable as `WindowsPath fnew = (WindowsPath) Path.of(Folder);` then the error you’re seeing would make sense.","body":"Are you sure the code you’ve shown us (<code>Path fnew = …</code>) is your real code?  Files.exists(Path, LinkOption...) exists, and as long as the type of fnew is <code>Path</code>, the code should work.  However, there is no exists method (or any other method) which takes an argument of type WindowsPath, so if you declared your variable as <code>WindowsPath fnew = (WindowsPath) Path.of(Folder);</code> then the error you’re seeing would make sense."},{"owner":{"account_id":4555218,"reputation":32585,"user_id":3699139,"display_name":"Jorn Vernee"},"score":1,"creation_date":1692301046,"post_id":76924444,"comment_id":135608419,"body_markdown":"Do you mean this beanshell: https://github.com/beanshell/beanshell ? This looks like a custom Java source interpreter. It looks like the wrong method is being looked up by that interpreter.","body":"Do you mean this beanshell: <a href=\"https://github.com/beanshell/beanshell\" rel=\"nofollow noreferrer\">github.com/beanshell/beanshell</a> ? This looks like a custom Java source interpreter. It looks like the wrong method is being looked up by that interpreter."},{"owner":{"account_id":785560,"reputation":14879,"user_id":845414,"display_name":"Johannes Kuhn"},"score":2,"creation_date":1692306624,"post_id":76924444,"comment_id":135609322,"body_markdown":"The old problem of using `getClass()` on the result of `Path.of` instead of using the return type of `Path.of` for further lookups.","body":"The old problem of using <code>getClass()</code> on the result of <code>Path.of</code> instead of using the return type of <code>Path.of</code> for further lookups."},{"owner":{"account_id":3211603,"reputation":289297,"user_id":2711488,"display_name":"Holger"},"score":2,"creation_date":1692638621,"post_id":76924444,"comment_id":135648041,"body_markdown":"@JohannesKuhn but taken up to eleven as there even is a formal declaration (`Path fnew …`) but then ignored and wrongly replaced but the runtime type.","body":"@JohannesKuhn but taken up to eleven as there even is a formal declaration (<code>Path fnew …</code>) but then ignored and wrongly replaced but the runtime type."}],"owner":{"account_id":29246506,"reputation":11,"user_id":22406850,"display_name":"Chris"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":102,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1692301215,"creation_date":1692299068,"question_id":76924444,"body_markdown":"I am working in Java 11.0.11 with Amazon Corretto.\r\nThis code is running in a beanshell file as part of an identity governance system.\r\n\r\nI am trying to use java.nio methods with Windows network paths.\r\n\r\nI am able to create the path object using any method (path.of, Paths.get, File.toPath(), FileSystem.getPath, etc) and a sun.nio.fs.WindowsPath object is always returned.\r\n\r\nThen when I try to use the WindowsPath object with any java.nio methods I get the error:\r\n*methodName*(sun.nio.fs.WindowsPath) not found in class&#39;java.nio.*etc*.*etc*\r\n\r\nThis happens with Files.exists(*path*), Files.createDirectory(*path*), Files.getOwner(*path*), *etc*, *etc*\r\n\r\nI am failing to find related results in searching and I am even having issues when I go as far as to use the FileSystems.getDefault().getPath() as well as sun.nio.fs.WindowsFileSystem getPath and sun.nio.fs.WindowsPath toWindowsPath which all respond the same way. It can reach the method but there is no version of the method that supports an argument of type sun.nio.fs.WindowsPath.\r\n\r\nIf I fall back to java.io methods everything works fine but I am intending on supporting symbolicLinks which are much easier in nio not to mention the better error handling so I&#39;d prefer if I can get this working with nio.\r\n\r\nIs there any preexisting packages that handle managing windows network folders already?\r\n\r\nAlternatively, if I can&#39;t find a solution to get this working natively in java my plan is to just write a powershell script that will do the heavy lifting but I&#39;m facing more then a little bit of sunk cost fallacy with the logic I already fleshed out in java.\r\n\r\n\r\n```\r\nimport lava.lang.*;\r\nimport java.nio.*;\r\nimport java.io.*;\r\nString Folder = &quot;//idg-bridge/C$/TEMP/HomeDriveTest/testusername&quot;;\r\nPath fnew = Path.of(Folder,new String[0]);\r\nif(!Files.exists(fnew, LinkOption.NOFOLLOW_LINKS))\r\n{\r\n\tFiles.createDirectory(fnew);\r\n}\r\n```\r\n\r\n\r\nThis fails at Files.exists(fnew, LinkOption.NOFOLLOW_LINKS) with exception:\r\n\r\n    Error in method invocation: Static method exists( sun.nio.fs.WindowsPath, java.nio.file.LinkOption ) not found in class&#39;java.nio.file.Files&#39;\r\n\r\nIf I use java.io (new File(&quot;//idg-bridge/C$/TEMP/HomeDriveTest/testusername&quot;)).exists() it makes it past the exists check without issue and then fails in exactly the same way at Files.createDirectory(fnew) with exception:\r\n\r\n    Error in method invocation: Static method createDirectory( sun.nio.fs.WindowsPath ) not found in class&#39;java.nio.file.Files&#39;","title":"Static method exists( sun.nio.fs.WindowsPath, java.nio.file.LinkOption ) not found in class&#39;java.nio.file.Files&#39;","body":"<p>I am working in Java 11.0.11 with Amazon Corretto.\nThis code is running in a beanshell file as part of an identity governance system.</p>\n<p>I am trying to use java.nio methods with Windows network paths.</p>\n<p>I am able to create the path object using any method (path.of, Paths.get, File.toPath(), FileSystem.getPath, etc) and a sun.nio.fs.WindowsPath object is always returned.</p>\n<p>Then when I try to use the WindowsPath object with any java.nio methods I get the error:\n<em>methodName</em>(sun.nio.fs.WindowsPath) not found in class'java.nio.<em>etc</em>.<em>etc</em></p>\n<p>This happens with Files.exists(<em>path</em>), Files.createDirectory(<em>path</em>), Files.getOwner(<em>path</em>), <em>etc</em>, <em>etc</em></p>\n<p>I am failing to find related results in searching and I am even having issues when I go as far as to use the FileSystems.getDefault().getPath() as well as sun.nio.fs.WindowsFileSystem getPath and sun.nio.fs.WindowsPath toWindowsPath which all respond the same way. It can reach the method but there is no version of the method that supports an argument of type sun.nio.fs.WindowsPath.</p>\n<p>If I fall back to java.io methods everything works fine but I am intending on supporting symbolicLinks which are much easier in nio not to mention the better error handling so I'd prefer if I can get this working with nio.</p>\n<p>Is there any preexisting packages that handle managing windows network folders already?</p>\n<p>Alternatively, if I can't find a solution to get this working natively in java my plan is to just write a powershell script that will do the heavy lifting but I'm facing more then a little bit of sunk cost fallacy with the logic I already fleshed out in java.</p>\n<pre><code>import lava.lang.*;\nimport java.nio.*;\nimport java.io.*;\nString Folder = &quot;//idg-bridge/C$/TEMP/HomeDriveTest/testusername&quot;;\nPath fnew = Path.of(Folder,new String[0]);\nif(!Files.exists(fnew, LinkOption.NOFOLLOW_LINKS))\n{\n    Files.createDirectory(fnew);\n}\n</code></pre>\n<p>This fails at Files.exists(fnew, LinkOption.NOFOLLOW_LINKS) with exception:</p>\n<pre><code>Error in method invocation: Static method exists( sun.nio.fs.WindowsPath, java.nio.file.LinkOption ) not found in class'java.nio.file.Files'\n</code></pre>\n<p>If I use java.io (new File(&quot;//idg-bridge/C$/TEMP/HomeDriveTest/testusername&quot;)).exists() it makes it past the exists check without issue and then fails in exactly the same way at Files.createDirectory(fnew) with exception:</p>\n<pre><code>Error in method invocation: Static method createDirectory( sun.nio.fs.WindowsPath ) not found in class'java.nio.file.Files'\n</code></pre>\n"},{"tags":["java","spring-boot","junit","point"],"answers":[{"tags":[],"owner":{"account_id":7531034,"reputation":1,"user_id":5719229,"display_name":"S.N"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1692300091,"creation_date":1692300091,"answer_id":76924531,"question_id":76908357,"body_markdown":"Here is the **solution** show below\r\n\r\n**1 -** Define a class named `PointRandomizer` extending from `AbstractRandomizer` to generate Point randomly.\r\n\r\n    class PointRandomizer extends AbstractRandomizer&lt;Point&gt; {\r\n    \r\n        @Override\r\n        public Point getRandomValue() {\r\n            Coordinate[] coordinates = new Coordinate[]{new Coordinate(40.991739, 29.024168)};\r\n            CoordinateSequence coordinateSequence = new CoordinateArraySequence(coordinates);\r\n            GeometryFactory geometryFactory = new GeometryFactory();\r\n            return geometryFactory.createPoint(coordinateSequence);\r\n        }\r\n    }\r\n\r\n**2 -** Define a static final variable named `PointRandomizer` \r\n\r\n    private static final PointRandomizer POINT_RANDOMIZER = new PointRandomizer();\r\n\r\n**3 -** Add `POINT_RANDOMIZER` to `EasyRandomParameters` to produce point values randomly \r\n\r\n    parameters.randomize(Point.class, POINT_RANDOMIZER);\r\n\r\nHere is the final `TestBuilder` class shown below\r\n\r\n    public abstract class TestDataBuilder&lt;T&gt; {\r\n        protected final EasyRandom generator;\r\n        protected T data;\r\n        protected Class&lt;T&gt; clazz;\r\n        private static final PositiveIntegerRandomizer POSITIVE_INTEGER_RANDOMIZER = new PositiveIntegerRandomizer();\r\n        private static final LongRangeRandomizer LONG_RANGE_RANDOMIZER = new LongRangeRandomizer(1L, Long.MAX_VALUE);\r\n        private static final CharacterRandomizer CHARACTER_RANDOMIZER = new CharacterRandomizer();\r\n    \r\n        private static final PointRandomizer POINT_RANDOMIZER = new PointRandomizer();\r\n    \r\n    \r\n        public TestDataBuilder(Class&lt;T&gt; clazz) {\r\n            this(clazz, false);\r\n        }\r\n        public TestDataBuilder(Class&lt;T&gt; clazz, boolean excludeRelations) {\r\n            this.clazz = clazz;\r\n            this.generator = new EasyRandom(this.getExclusionParameters(excludeRelations));\r\n            this.data = generator.nextObject(clazz);\r\n        }\r\n        public T build() {\r\n            return data;\r\n        }\r\n        private EasyRandomParameters getExclusionParameters(boolean excludeRelations) {\r\n            EasyRandomParameters parameters = new EasyRandomParameters();\r\n            parameters.randomize(Integer.class, POSITIVE_INTEGER_RANDOMIZER);\r\n            parameters.randomize(String.class, CHARACTER_RANDOMIZER);\r\n            parameters.randomize(Long.class, LONG_RANGE_RANDOMIZER);\r\n            parameters.randomize(Point.class, POINT_RANDOMIZER);\r\n    \r\n            if (!excludeRelations) return parameters;\r\n    \r\n            parameters.excludeField(\r\n                    FieldPredicates.isAnnotatedWith(ManyToOne.class, OneToMany.class, OneToOne.class)\r\n                            .or(named(&quot;id&quot;))\r\n            );\r\n            return parameters;\r\n        }\r\n    }\r\n    class PositiveIntegerRandomizer extends IntegerRangeRandomizer {\r\n        private static final int MIN = 0;\r\n        private static final int MAX = 100;\r\n        public PositiveIntegerRandomizer() {\r\n            super(MIN, MAX);\r\n        }\r\n        @Override\r\n        protected Integer getDefaultMinValue() {\r\n            return MIN;\r\n        }\r\n    }\r\n    class CharacterRandomizer extends StringRandomizer {\r\n        @Override\r\n        public String getRandomValue() {\r\n            return RandomStringUtils.randomAlphabetic(10);\r\n        }\r\n    }\r\n    \r\n    \r\n    class PointRandomizer extends AbstractRandomizer&lt;Point&gt; {\r\n    \r\n        @Override\r\n        public Point getRandomValue() {\r\n            Coordinate[] coordinates = new Coordinate[]{new Coordinate(40.991739, 29.024168)};\r\n            CoordinateSequence coordinateSequence = new CoordinateArraySequence(coordinates);\r\n            GeometryFactory geometryFactory = new GeometryFactory();\r\n            return geometryFactory.createPoint(coordinateSequence);\r\n        }\r\n    }","title":"Cannot handle with Point (Caused by: java.lang.InstantiationError: org.locationtech.jts.geom.CoordinateSequence) in JUnit Test of Spring Boot","body":"<p>Here is the <strong>solution</strong> show below</p>\n<p><strong>1 -</strong> Define a class named <code>PointRandomizer</code> extending from <code>AbstractRandomizer</code> to generate Point randomly.</p>\n<pre><code>class PointRandomizer extends AbstractRandomizer&lt;Point&gt; {\n\n    @Override\n    public Point getRandomValue() {\n        Coordinate[] coordinates = new Coordinate[]{new Coordinate(40.991739, 29.024168)};\n        CoordinateSequence coordinateSequence = new CoordinateArraySequence(coordinates);\n        GeometryFactory geometryFactory = new GeometryFactory();\n        return geometryFactory.createPoint(coordinateSequence);\n    }\n}\n</code></pre>\n<p><strong>2 -</strong> Define a static final variable named <code>PointRandomizer</code></p>\n<pre><code>private static final PointRandomizer POINT_RANDOMIZER = new PointRandomizer();\n</code></pre>\n<p><strong>3 -</strong> Add <code>POINT_RANDOMIZER</code> to <code>EasyRandomParameters</code> to produce point values randomly</p>\n<pre><code>parameters.randomize(Point.class, POINT_RANDOMIZER);\n</code></pre>\n<p>Here is the final <code>TestBuilder</code> class shown below</p>\n<pre><code>public abstract class TestDataBuilder&lt;T&gt; {\n    protected final EasyRandom generator;\n    protected T data;\n    protected Class&lt;T&gt; clazz;\n    private static final PositiveIntegerRandomizer POSITIVE_INTEGER_RANDOMIZER = new PositiveIntegerRandomizer();\n    private static final LongRangeRandomizer LONG_RANGE_RANDOMIZER = new LongRangeRandomizer(1L, Long.MAX_VALUE);\n    private static final CharacterRandomizer CHARACTER_RANDOMIZER = new CharacterRandomizer();\n\n    private static final PointRandomizer POINT_RANDOMIZER = new PointRandomizer();\n\n\n    public TestDataBuilder(Class&lt;T&gt; clazz) {\n        this(clazz, false);\n    }\n    public TestDataBuilder(Class&lt;T&gt; clazz, boolean excludeRelations) {\n        this.clazz = clazz;\n        this.generator = new EasyRandom(this.getExclusionParameters(excludeRelations));\n        this.data = generator.nextObject(clazz);\n    }\n    public T build() {\n        return data;\n    }\n    private EasyRandomParameters getExclusionParameters(boolean excludeRelations) {\n        EasyRandomParameters parameters = new EasyRandomParameters();\n        parameters.randomize(Integer.class, POSITIVE_INTEGER_RANDOMIZER);\n        parameters.randomize(String.class, CHARACTER_RANDOMIZER);\n        parameters.randomize(Long.class, LONG_RANGE_RANDOMIZER);\n        parameters.randomize(Point.class, POINT_RANDOMIZER);\n\n        if (!excludeRelations) return parameters;\n\n        parameters.excludeField(\n                FieldPredicates.isAnnotatedWith(ManyToOne.class, OneToMany.class, OneToOne.class)\n                        .or(named(&quot;id&quot;))\n        );\n        return parameters;\n    }\n}\nclass PositiveIntegerRandomizer extends IntegerRangeRandomizer {\n    private static final int MIN = 0;\n    private static final int MAX = 100;\n    public PositiveIntegerRandomizer() {\n        super(MIN, MAX);\n    }\n    @Override\n    protected Integer getDefaultMinValue() {\n        return MIN;\n    }\n}\nclass CharacterRandomizer extends StringRandomizer {\n    @Override\n    public String getRandomValue() {\n        return RandomStringUtils.randomAlphabetic(10);\n    }\n}\n\n\nclass PointRandomizer extends AbstractRandomizer&lt;Point&gt; {\n\n    @Override\n    public Point getRandomValue() {\n        Coordinate[] coordinates = new Coordinate[]{new Coordinate(40.991739, 29.024168)};\n        CoordinateSequence coordinateSequence = new CoordinateArraySequence(coordinates);\n        GeometryFactory geometryFactory = new GeometryFactory();\n        return geometryFactory.createPoint(coordinateSequence);\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":7531034,"reputation":1,"user_id":5719229,"display_name":"S.N"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":98,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76924531,"answer_count":1,"score":0,"last_activity_date":1692300091,"creation_date":1692124581,"question_id":76908357,"body_markdown":"I tried to implement a junit test with the usage of Point in Spring Boot.\r\nI completed junit test but I have a problem to handle with Point issue in generateValidUserEntities method of AssignmentEntityBuilder.\r\n\r\nHow can I fix it?\r\n\r\n\r\nHere is the AssignmentEntity shown below\r\n\r\n    ...\r\n    public class AssignmentEntity extends BaseEntity {\r\n    \r\n        ...\r\n        \r\n        public void setPoint(double latitude, double longitude) {\r\n            Coordinate coordinate = new Coordinate(latitude, longitude);\r\n            GeometryFactory geometryFactory = new GeometryFactory();\r\n            this.point = geometryFactory.createPoint(coordinate);\r\n        }\r\n    \r\n    }\r\n\r\n\r\nHere is the AssignmentEntityBuilder shown below\r\n\r\n    public class AssignmentEntityBuilder extends TestDataBuilder&lt;AssignmentEntity&gt; {\r\n    \r\n        public AssignmentEntityBuilder() {\r\n            super(AssignmentEntity.class);\r\n        }\r\n    \r\n        public static List&lt;AssignmentEntity&gt; generateValidUserEntities(int size) {\r\n            List&lt;AssignmentEntity&gt; userEntities = new ArrayList&lt;&gt;();\r\n            for (int i = 0; i &lt; size; i++) {\r\n                AssignmentEntity assignmentEntity = new AssignmentEntityBuilder().withValidFields().build();\r\n                userEntities.add(assignmentEntity);\r\n            }\r\n            return userEntities;\r\n        }\r\n    \r\n        public AssignmentEntityBuilder withValidFields() {\r\n            InstitutionEntity institutionEntity = new InstitutionEntityBuilder().withValidFields().build();\r\n    \r\n            double x = Math.random();\r\n            double y = Math.random();\r\n            Point point = new GeometryFactory().createPoint(new Coordinate(x, y));\r\n    \r\n            return this\r\n                    .withId(AysRandomUtil.generateUUID())\r\n                    .withInstitutionId(institutionEntity.getId())\r\n                    .withInstitution(institutionEntity)\r\n                    .withPhoneNumber(new AysPhoneNumberBuilder().withValidFields().build())\r\n                    .withDescription(&quot;Description&quot;)\r\n                    .withFirstName(&quot;First Name&quot;)\r\n                    .withLastName(&quot;Last Name&quot;)\r\n                    .withStatus(AssignmentStatus.AVAILABLE)\r\n                    .withPoint(point);\r\n        }\r\n    \r\n        public AssignmentEntityBuilder withId(String id) {\r\n            data.setId(id);\r\n            return this;\r\n        }\r\n    \r\n        public AssignmentEntityBuilder withInstitutionId(String institutionId) {\r\n            data.setInstitutionId(institutionId);\r\n            return this;\r\n        }\r\n    \r\n        public AssignmentEntityBuilder withPhoneNumber(AysPhoneNumber phoneNumber) {\r\n            data.setCountryCode(phoneNumber.getCountryCode());\r\n            data.setLineNumber(phoneNumber.getLineNumber());\r\n            return this;\r\n        }\r\n    \r\n        public AssignmentEntityBuilder withInstitution(InstitutionEntity institution) {\r\n            data.setInstitution(institution);\r\n            return this;\r\n        }\r\n    \r\n        public AssignmentEntityBuilder withDescription(String description) {\r\n            data.setDescription(description);\r\n            return this;\r\n        }\r\n    \r\n        public AssignmentEntityBuilder withFirstName(String firstName) {\r\n            data.setFirstName(firstName);\r\n            return this;\r\n        }\r\n    \r\n        public AssignmentEntityBuilder withLastName(String lastName) {\r\n            data.setLastName(lastName);\r\n            return this;\r\n        }\r\n    \r\n        public AssignmentEntityBuilder withStatus(AssignmentStatus status) {\r\n            data.setStatus(status);\r\n            return this;\r\n        }\r\n    \r\n        public AssignmentEntityBuilder withPoint(Point point) {\r\n            data.setPoint(point);\r\n            return this;\r\n        }\r\n    \r\n    }\r\n\r\nHere is the service class shown below\r\n\r\n    class AssignmentSaveServiceImplTest extends AbstractUnitTest {\r\n    \r\n        @InjectMocks\r\n        private AssignmentSaveServiceImpl assignmentSaveService;\r\n    \r\n        @Mock\r\n        private AssignmentRepository assignmentRepository;\r\n    \r\n        @Mock\r\n        private AysIdentity identity;\r\n    \r\n        @Test\r\n        void givenValidAssignmentSaveRequest_whenAssignmentSaved_thenReturnAssignment() {\r\n    \r\n            // Given\r\n            AssignmentSaveRequest mockAssignmentSaveRequest = new AssignmentSaveRequestBuilder()\r\n                    .withValidFields()\r\n                    .build();\r\n    \r\n            List&lt;AssignmentEntity&gt; assignmentsFromDatabase = AssignmentEntityBuilder.generateValidUserEntities(10);  --- ERROR LINE\r\n    \r\n            AssignmentEntity mockAssignmentEntity = new AssignmentEntityBuilder()\r\n                    .withValidFields().build();\r\n    \r\n            // When\r\n            Mockito.when(assignmentRepository.findAll())\r\n                    .thenReturn(assignmentsFromDatabase);\r\n    \r\n            Mockito.when(assignmentRepository.save(Mockito.any(AssignmentEntity.class)))\r\n                    .thenReturn(mockAssignmentEntity);\r\n    \r\n            Mockito.when(identity.getInstitutionId())\r\n                    .thenReturn(AysRandomUtil.generateUUID());\r\n    \r\n            // Then\r\n            Assignment assignment = assignmentSaveService.saveAssignment(mockAssignmentSaveRequest);\r\n    \r\n            Assertions.assertEquals(mockAssignmentSaveRequest.getFirstName(), assignment.getFirstName());\r\n            Assertions.assertEquals(mockAssignmentSaveRequest.getLastName(), assignment.getLastName());\r\n            Assertions.assertEquals(mockAssignmentSaveRequest.getPhoneNumber().getLineNumber(), assignment.getPhoneNumber().getLineNumber());\r\n            Assertions.assertEquals(mockAssignmentSaveRequest.getPhoneNumber().getCountryCode(), assignment.getPhoneNumber().getCountryCode());\r\n            Assertions.assertEquals(mockAssignmentSaveRequest.getDescription(), assignment.getDescription());\r\n            Assertions.assertEquals(mockAssignmentSaveRequest.getDescription(), assignment.getDescription());\r\n            Assertions.assertEquals(mockAssignmentSaveRequest.getLongitude(), assignment.getLongitude());\r\n            Assertions.assertEquals(mockAssignmentSaveRequest.getLatitude(), assignment.getLatitude());\r\n    \r\n            Mockito.verify(assignmentRepository, Mockito.times(1)).findAll();\r\n            Mockito.verify(identity, Mockito.times(1)).getInstitutionId();\r\n        }\r\n    }\r\n\r\nHere is the error shown below\r\n\r\n    org.jeasy.random.ObjectCreationException: Unable to create a random instance of type class com.ays.assignment.model.entity.AssignmentEntity\r\n    \r\n    \tat org.jeasy.random.EasyRandom.doPopulateBean(EasyRandom.java:172)\r\n    \tat org.jeasy.random.EasyRandom.nextObject(EasyRandom.java:100)\r\n    \tat com.ays.common.model.TestDataBuilder.&lt;init&gt;(TestDataBuilder.java:39)\r\n    \tat com.ays.common.model.TestDataBuilder.&lt;init&gt;(TestDataBuilder.java:33)\r\n    \tat com.ays.assignment.model.entity.AssignmentEntityBuilder.&lt;init&gt;(AssignmentEntityBuilder.java:20)\r\n    \tat com.ays.assignment.model.entity.AssignmentEntityBuilder.generateValidUserEntities(AssignmentEntityBuilder.java:31)\r\n    \tat com.ays.assignment.service.impl.AssignmentSaveServiceImplTest.givenValidAssignmentSaveRequest_whenAssignmentSaved_thenReturnAssignment(AssignmentSaveServiceImplTest.java:41)\r\n    \tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)\r\n    \tat java.base/java.lang.reflect.Method.invoke(Method.java:578)\r\n    \tat org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:727)\r\n    \tat org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60)\r\n    \tat org.junit.jupiter.engine.execution.InvocationInterceptorChain$ValidatingInvocation.proceed(InvocationInterceptorChain.java:131)\r\n    \tat org.junit.jupiter.engine.extension.TimeoutExtension.intercept(TimeoutExtension.java:156)\r\n    \tat org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestableMethod(TimeoutExtension.java:147)\r\n    \tat org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestMethod(TimeoutExtension.java:86)\r\n    \tat org.junit.jupiter.engine.execution.InterceptingExecutableInvoker$ReflectiveInterceptorCall.lambda$ofVoidMethod$0(InterceptingExecutableInvoker.java:103)\r\n    \tat org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.lambda$invoke$0(InterceptingExecutableInvoker.java:93)\r\n    \tat org.junit.jupiter.engine.execution.InvocationInterceptorChain$InterceptedInvocation.proceed(InvocationInterceptorChain.java:106)\r\n    \tat org.junit.jupiter.engine.execution.InvocationInterceptorChain.proceed(InvocationInterceptorChain.java:64)\r\n    \tat org.junit.jupiter.engine.execution.InvocationInterceptorChain.chainAndInvoke(InvocationInterceptorChain.java:45)\r\n    \tat org.junit.jupiter.engine.execution.InvocationInterceptorChain.invoke(InvocationInterceptorChain.java:37)\r\n    \tat org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:92)\r\n    \tat org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:86)\r\n    \tat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$7(TestMethodTestDescriptor.java:217)\r\n    \tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n    \tat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:213)\r\n    \tat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:138)\r\n    \tat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:68)\r\n    \tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:151)\r\n    \tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n    \tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)\r\n    \tat org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)\r\n    \tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)\r\n    \tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n    \tat org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)\r\n    \tat org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)\r\n    \tat java.base/java.util.ArrayList.forEach(ArrayList.java:1511)\r\n    \tat org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)\r\n    \tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)\r\n    \tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n    \tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)\r\n    \tat org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)\r\n    \tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)\r\n    \tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n    \tat org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)\r\n    \tat org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)\r\n    \tat java.base/java.util.ArrayList.forEach(ArrayList.java:1511)\r\n    \tat org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)\r\n    \tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)\r\n    \tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n    \tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)\r\n    \tat org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)\r\n    \tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)\r\n    \tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n    \tat org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)\r\n    \tat org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)\r\n    \tat org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)\r\n    \tat org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)\r\n    \tat org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)\r\n    \tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:147)\r\n    \tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:127)\r\n    \tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:90)\r\n    \tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:55)\r\n    \tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:102)\r\n    \tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:54)\r\n    \tat org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:114)\r\n    \tat org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:86)\r\n    \tat org.junit.platform.launcher.core.DefaultLauncherSession$DelegatingLauncher.execute(DefaultLauncherSession.java:86)\r\n    \tat org.junit.platform.launcher.core.SessionPerRequestLauncher.execute(SessionPerRequestLauncher.java:53)\r\n    \tat com.intellij.junit5.JUnit5IdeaTestRunner.startRunnerWithArgs(JUnit5IdeaTestRunner.java:57)\r\n    \tat com.intellij.rt.junit.IdeaTestRunner$Repeater$1.execute(IdeaTestRunner.java:38)\r\n    \tat com.intellij.rt.execution.junit.TestsRepeater.repeat(TestsRepeater.java:11)\r\n    \tat com.intellij.rt.junit.IdeaTestRunner$Repeater.startRunnerWithArgs(IdeaTestRunner.java:35)\r\n    \tat com.intellij.rt.junit.JUnitStarter.prepareStreamsAndStart(JUnitStarter.java:235)\r\n    \tat com.intellij.rt.junit.JUnitStarter.main(JUnitStarter.java:54)\r\n    Caused by: org.jeasy.random.ObjectCreationException: Unable to create type: org.locationtech.jts.geom.Point for field: point of class: com.ays.assignment.model.entity.AssignmentEntity\r\n    \tat org.jeasy.random.FieldPopulator.populateField(FieldPopulator.java:98)\r\n    \tat org.jeasy.random.EasyRandom.populateField(EasyRandom.java:209)\r\n    \tat org.jeasy.random.EasyRandom.populateFields(EasyRandom.java:198)\r\n    \tat org.jeasy.random.EasyRandom.doPopulateBean(EasyRandom.java:165)\r\n    \t... 74 more\r\n    Caused by: org.jeasy.random.ObjectCreationException: Unable to create a random instance of type class org.locationtech.jts.geom.Point\r\n    \tat org.jeasy.random.EasyRandom.doPopulateBean(EasyRandom.java:172)\r\n    \tat org.jeasy.random.FieldPopulator.generateRandomValue(FieldPopulator.java:160)\r\n    \tat org.jeasy.random.FieldPopulator.populateField(FieldPopulator.java:93)\r\n    \t... 77 more\r\n    Caused by: org.jeasy.random.ObjectCreationException: Unable to create type: org.locationtech.jts.geom.CoordinateSequence for field: coordinates of class: org.locationtech.jts.geom.Point\r\n    \tat org.jeasy.random.FieldPopulator.populateField(FieldPopulator.java:98)\r\n    \tat org.jeasy.random.EasyRandom.populateField(EasyRandom.java:209)\r\n    \tat org.jeasy.random.EasyRandom.populateFields(EasyRandom.java:198)\r\n    \tat org.jeasy.random.EasyRandom.doPopulateBean(EasyRandom.java:165)\r\n    \t... 79 more\r\n    Caused by: org.jeasy.random.ObjectCreationException: Unable to create a random instance of type interface org.locationtech.jts.geom.CoordinateSequence\r\n    \tat org.jeasy.random.EasyRandom.doPopulateBean(EasyRandom.java:172)\r\n    \tat org.jeasy.random.FieldPopulator.generateRandomValue(FieldPopulator.java:160)\r\n    \tat org.jeasy.random.FieldPopulator.populateField(FieldPopulator.java:93)\r\n    \t... 82 more\r\n    Caused by: org.jeasy.random.ObjectCreationException: Unable to create an instance of type: interface org.locationtech.jts.geom.CoordinateSequence\r\n    \tat org.jeasy.random.ObjenesisObjectFactory.createInstance(ObjenesisObjectFactory.java:67)\r\n    \tat org.jeasy.random.EasyRandom.doPopulateBean(EasyRandom.java:147)\r\n    \t... 84 more\r\n    Caused by: java.lang.InstantiationError: org.locationtech.jts.geom.CoordinateSequence\r\n    \tat jdk.internal.reflect.GeneratedSerializationConstructorAccessor7.newInstance(Unknown Source)\r\n    \tat java.base/java.lang.reflect.Constructor.newInstanceWithCaller(Constructor.java:500)\r\n    \tat java.base/java.lang.reflect.Constructor.newInstance(Constructor.java:484)\r\n    \tat org.objenesis.instantiator.sun.SunReflectionFactoryInstantiator.newInstance(SunReflectionFactoryInstantiator.java:48)\r\n    \tat org.objenesis.ObjenesisBase.newInstance(ObjenesisBase.java:73)\r\n    \tat org.jeasy.random.ObjenesisObjectFactory.createNewInstance(ObjenesisObjectFactory.java:78)\r\n    \tat org.jeasy.random.ObjenesisObjectFactory.createInstance(ObjenesisObjectFactory.java:65)\r\n    \t... 85 more","title":"Cannot handle with Point (Caused by: java.lang.InstantiationError: org.locationtech.jts.geom.CoordinateSequence) in JUnit Test of Spring Boot","body":"<p>I tried to implement a junit test with the usage of Point in Spring Boot.\nI completed junit test but I have a problem to handle with Point issue in generateValidUserEntities method of AssignmentEntityBuilder.</p>\n<p>How can I fix it?</p>\n<p>Here is the AssignmentEntity shown below</p>\n<pre><code>...\npublic class AssignmentEntity extends BaseEntity {\n\n    ...\n    \n    public void setPoint(double latitude, double longitude) {\n        Coordinate coordinate = new Coordinate(latitude, longitude);\n        GeometryFactory geometryFactory = new GeometryFactory();\n        this.point = geometryFactory.createPoint(coordinate);\n    }\n\n}\n</code></pre>\n<p>Here is the AssignmentEntityBuilder shown below</p>\n<pre><code>public class AssignmentEntityBuilder extends TestDataBuilder&lt;AssignmentEntity&gt; {\n\n    public AssignmentEntityBuilder() {\n        super(AssignmentEntity.class);\n    }\n\n    public static List&lt;AssignmentEntity&gt; generateValidUserEntities(int size) {\n        List&lt;AssignmentEntity&gt; userEntities = new ArrayList&lt;&gt;();\n        for (int i = 0; i &lt; size; i++) {\n            AssignmentEntity assignmentEntity = new AssignmentEntityBuilder().withValidFields().build();\n            userEntities.add(assignmentEntity);\n        }\n        return userEntities;\n    }\n\n    public AssignmentEntityBuilder withValidFields() {\n        InstitutionEntity institutionEntity = new InstitutionEntityBuilder().withValidFields().build();\n\n        double x = Math.random();\n        double y = Math.random();\n        Point point = new GeometryFactory().createPoint(new Coordinate(x, y));\n\n        return this\n                .withId(AysRandomUtil.generateUUID())\n                .withInstitutionId(institutionEntity.getId())\n                .withInstitution(institutionEntity)\n                .withPhoneNumber(new AysPhoneNumberBuilder().withValidFields().build())\n                .withDescription(&quot;Description&quot;)\n                .withFirstName(&quot;First Name&quot;)\n                .withLastName(&quot;Last Name&quot;)\n                .withStatus(AssignmentStatus.AVAILABLE)\n                .withPoint(point);\n    }\n\n    public AssignmentEntityBuilder withId(String id) {\n        data.setId(id);\n        return this;\n    }\n\n    public AssignmentEntityBuilder withInstitutionId(String institutionId) {\n        data.setInstitutionId(institutionId);\n        return this;\n    }\n\n    public AssignmentEntityBuilder withPhoneNumber(AysPhoneNumber phoneNumber) {\n        data.setCountryCode(phoneNumber.getCountryCode());\n        data.setLineNumber(phoneNumber.getLineNumber());\n        return this;\n    }\n\n    public AssignmentEntityBuilder withInstitution(InstitutionEntity institution) {\n        data.setInstitution(institution);\n        return this;\n    }\n\n    public AssignmentEntityBuilder withDescription(String description) {\n        data.setDescription(description);\n        return this;\n    }\n\n    public AssignmentEntityBuilder withFirstName(String firstName) {\n        data.setFirstName(firstName);\n        return this;\n    }\n\n    public AssignmentEntityBuilder withLastName(String lastName) {\n        data.setLastName(lastName);\n        return this;\n    }\n\n    public AssignmentEntityBuilder withStatus(AssignmentStatus status) {\n        data.setStatus(status);\n        return this;\n    }\n\n    public AssignmentEntityBuilder withPoint(Point point) {\n        data.setPoint(point);\n        return this;\n    }\n\n}\n</code></pre>\n<p>Here is the service class shown below</p>\n<pre><code>class AssignmentSaveServiceImplTest extends AbstractUnitTest {\n\n    @InjectMocks\n    private AssignmentSaveServiceImpl assignmentSaveService;\n\n    @Mock\n    private AssignmentRepository assignmentRepository;\n\n    @Mock\n    private AysIdentity identity;\n\n    @Test\n    void givenValidAssignmentSaveRequest_whenAssignmentSaved_thenReturnAssignment() {\n\n        // Given\n        AssignmentSaveRequest mockAssignmentSaveRequest = new AssignmentSaveRequestBuilder()\n                .withValidFields()\n                .build();\n\n        List&lt;AssignmentEntity&gt; assignmentsFromDatabase = AssignmentEntityBuilder.generateValidUserEntities(10);  --- ERROR LINE\n\n        AssignmentEntity mockAssignmentEntity = new AssignmentEntityBuilder()\n                .withValidFields().build();\n\n        // When\n        Mockito.when(assignmentRepository.findAll())\n                .thenReturn(assignmentsFromDatabase);\n\n        Mockito.when(assignmentRepository.save(Mockito.any(AssignmentEntity.class)))\n                .thenReturn(mockAssignmentEntity);\n\n        Mockito.when(identity.getInstitutionId())\n                .thenReturn(AysRandomUtil.generateUUID());\n\n        // Then\n        Assignment assignment = assignmentSaveService.saveAssignment(mockAssignmentSaveRequest);\n\n        Assertions.assertEquals(mockAssignmentSaveRequest.getFirstName(), assignment.getFirstName());\n        Assertions.assertEquals(mockAssignmentSaveRequest.getLastName(), assignment.getLastName());\n        Assertions.assertEquals(mockAssignmentSaveRequest.getPhoneNumber().getLineNumber(), assignment.getPhoneNumber().getLineNumber());\n        Assertions.assertEquals(mockAssignmentSaveRequest.getPhoneNumber().getCountryCode(), assignment.getPhoneNumber().getCountryCode());\n        Assertions.assertEquals(mockAssignmentSaveRequest.getDescription(), assignment.getDescription());\n        Assertions.assertEquals(mockAssignmentSaveRequest.getDescription(), assignment.getDescription());\n        Assertions.assertEquals(mockAssignmentSaveRequest.getLongitude(), assignment.getLongitude());\n        Assertions.assertEquals(mockAssignmentSaveRequest.getLatitude(), assignment.getLatitude());\n\n        Mockito.verify(assignmentRepository, Mockito.times(1)).findAll();\n        Mockito.verify(identity, Mockito.times(1)).getInstitutionId();\n    }\n}\n</code></pre>\n<p>Here is the error shown below</p>\n<pre><code>org.jeasy.random.ObjectCreationException: Unable to create a random instance of type class com.ays.assignment.model.entity.AssignmentEntity\n\n    at org.jeasy.random.EasyRandom.doPopulateBean(EasyRandom.java:172)\n    at org.jeasy.random.EasyRandom.nextObject(EasyRandom.java:100)\n    at com.ays.common.model.TestDataBuilder.&lt;init&gt;(TestDataBuilder.java:39)\n    at com.ays.common.model.TestDataBuilder.&lt;init&gt;(TestDataBuilder.java:33)\n    at com.ays.assignment.model.entity.AssignmentEntityBuilder.&lt;init&gt;(AssignmentEntityBuilder.java:20)\n    at com.ays.assignment.model.entity.AssignmentEntityBuilder.generateValidUserEntities(AssignmentEntityBuilder.java:31)\n    at com.ays.assignment.service.impl.AssignmentSaveServiceImplTest.givenValidAssignmentSaveRequest_whenAssignmentSaved_thenReturnAssignment(AssignmentSaveServiceImplTest.java:41)\n    at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)\n    at java.base/java.lang.reflect.Method.invoke(Method.java:578)\n    at org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:727)\n    at org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60)\n    at org.junit.jupiter.engine.execution.InvocationInterceptorChain$ValidatingInvocation.proceed(InvocationInterceptorChain.java:131)\n    at org.junit.jupiter.engine.extension.TimeoutExtension.intercept(TimeoutExtension.java:156)\n    at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestableMethod(TimeoutExtension.java:147)\n    at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestMethod(TimeoutExtension.java:86)\n    at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker$ReflectiveInterceptorCall.lambda$ofVoidMethod$0(InterceptingExecutableInvoker.java:103)\n    at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.lambda$invoke$0(InterceptingExecutableInvoker.java:93)\n    at org.junit.jupiter.engine.execution.InvocationInterceptorChain$InterceptedInvocation.proceed(InvocationInterceptorChain.java:106)\n    at org.junit.jupiter.engine.execution.InvocationInterceptorChain.proceed(InvocationInterceptorChain.java:64)\n    at org.junit.jupiter.engine.execution.InvocationInterceptorChain.chainAndInvoke(InvocationInterceptorChain.java:45)\n    at org.junit.jupiter.engine.execution.InvocationInterceptorChain.invoke(InvocationInterceptorChain.java:37)\n    at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:92)\n    at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:86)\n    at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$7(TestMethodTestDescriptor.java:217)\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\n    at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:213)\n    at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:138)\n    at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:68)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:151)\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)\n    at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)\n    at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)\n    at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)\n    at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)\n    at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)\n    at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)\n    at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)\n    at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)\n    at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)\n    at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)\n    at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:147)\n    at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:127)\n    at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:90)\n    at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:55)\n    at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:102)\n    at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:54)\n    at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:114)\n    at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:86)\n    at org.junit.platform.launcher.core.DefaultLauncherSession$DelegatingLauncher.execute(DefaultLauncherSession.java:86)\n    at org.junit.platform.launcher.core.SessionPerRequestLauncher.execute(SessionPerRequestLauncher.java:53)\n    at com.intellij.junit5.JUnit5IdeaTestRunner.startRunnerWithArgs(JUnit5IdeaTestRunner.java:57)\n    at com.intellij.rt.junit.IdeaTestRunner$Repeater$1.execute(IdeaTestRunner.java:38)\n    at com.intellij.rt.execution.junit.TestsRepeater.repeat(TestsRepeater.java:11)\n    at com.intellij.rt.junit.IdeaTestRunner$Repeater.startRunnerWithArgs(IdeaTestRunner.java:35)\n    at com.intellij.rt.junit.JUnitStarter.prepareStreamsAndStart(JUnitStarter.java:235)\n    at com.intellij.rt.junit.JUnitStarter.main(JUnitStarter.java:54)\nCaused by: org.jeasy.random.ObjectCreationException: Unable to create type: org.locationtech.jts.geom.Point for field: point of class: com.ays.assignment.model.entity.AssignmentEntity\n    at org.jeasy.random.FieldPopulator.populateField(FieldPopulator.java:98)\n    at org.jeasy.random.EasyRandom.populateField(EasyRandom.java:209)\n    at org.jeasy.random.EasyRandom.populateFields(EasyRandom.java:198)\n    at org.jeasy.random.EasyRandom.doPopulateBean(EasyRandom.java:165)\n    ... 74 more\nCaused by: org.jeasy.random.ObjectCreationException: Unable to create a random instance of type class org.locationtech.jts.geom.Point\n    at org.jeasy.random.EasyRandom.doPopulateBean(EasyRandom.java:172)\n    at org.jeasy.random.FieldPopulator.generateRandomValue(FieldPopulator.java:160)\n    at org.jeasy.random.FieldPopulator.populateField(FieldPopulator.java:93)\n    ... 77 more\nCaused by: org.jeasy.random.ObjectCreationException: Unable to create type: org.locationtech.jts.geom.CoordinateSequence for field: coordinates of class: org.locationtech.jts.geom.Point\n    at org.jeasy.random.FieldPopulator.populateField(FieldPopulator.java:98)\n    at org.jeasy.random.EasyRandom.populateField(EasyRandom.java:209)\n    at org.jeasy.random.EasyRandom.populateFields(EasyRandom.java:198)\n    at org.jeasy.random.EasyRandom.doPopulateBean(EasyRandom.java:165)\n    ... 79 more\nCaused by: org.jeasy.random.ObjectCreationException: Unable to create a random instance of type interface org.locationtech.jts.geom.CoordinateSequence\n    at org.jeasy.random.EasyRandom.doPopulateBean(EasyRandom.java:172)\n    at org.jeasy.random.FieldPopulator.generateRandomValue(FieldPopulator.java:160)\n    at org.jeasy.random.FieldPopulator.populateField(FieldPopulator.java:93)\n    ... 82 more\nCaused by: org.jeasy.random.ObjectCreationException: Unable to create an instance of type: interface org.locationtech.jts.geom.CoordinateSequence\n    at org.jeasy.random.ObjenesisObjectFactory.createInstance(ObjenesisObjectFactory.java:67)\n    at org.jeasy.random.EasyRandom.doPopulateBean(EasyRandom.java:147)\n    ... 84 more\nCaused by: java.lang.InstantiationError: org.locationtech.jts.geom.CoordinateSequence\n    at jdk.internal.reflect.GeneratedSerializationConstructorAccessor7.newInstance(Unknown Source)\n    at java.base/java.lang.reflect.Constructor.newInstanceWithCaller(Constructor.java:500)\n    at java.base/java.lang.reflect.Constructor.newInstance(Constructor.java:484)\n    at org.objenesis.instantiator.sun.SunReflectionFactoryInstantiator.newInstance(SunReflectionFactoryInstantiator.java:48)\n    at org.objenesis.ObjenesisBase.newInstance(ObjenesisBase.java:73)\n    at org.jeasy.random.ObjenesisObjectFactory.createNewInstance(ObjenesisObjectFactory.java:78)\n    at org.jeasy.random.ObjenesisObjectFactory.createInstance(ObjenesisObjectFactory.java:65)\n    ... 85 more\n</code></pre>\n"},{"tags":["java","elasticsearch","elasticsearch-aggregation","elasticsearch-query","elasticsearch-high-level-restclient"],"answers":[{"tags":[],"owner":{"account_id":12414484,"reputation":131,"user_id":9044848,"display_name":"saw1k"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1692299384,"creation_date":1692299384,"answer_id":76924467,"question_id":76924144,"body_markdown":"You should change mapping for created field like this\r\n\r\n    &quot;created&quot;: {\r\n          &quot;type&quot;: &quot;date&quot;,\r\n          &quot;format&quot;:&quot;epoch_second&quot;\r\n        }\r\nThen on your aggregation change interval to &quot;day&quot; and add format field with date pattern like &quot;yyyy-MM-dd&quot;\r\n\r\nYou aggregation query should be something like this:\r\n\r\n     &quot;aggregations&quot;:{\r\n          &quot;date_count&quot;:{\r\n             &quot;date_histogram&quot;:{\r\n                &quot;field&quot;:&quot;created&quot;,\r\n                &quot;interval&quot;:&quot;day&quot;,\r\n                &quot;format&quot; : &quot;yyyy-MM-dd&quot;,\r\n                &quot;offset&quot;:0,\r\n                &quot;order&quot;:{\r\n                   &quot;_key&quot;:&quot;asc&quot;\r\n                },\r\n                &quot;keyed&quot;:false,\r\n                &quot;min_doc_count&quot;:0\r\n             }\r\n          }\r\n       }\r\n\r\nAnd the effect should be like this:\r\n\r\n    &quot;aggregations&quot; : {\r\n        &quot;date_count&quot; : {\r\n          &quot;buckets&quot; : {\r\n            &quot;2023-08-04&quot; : {\r\n              &quot;key_as_string&quot; : &quot;2023-08-04&quot;,\r\n              &quot;key&quot; : 1691107200000,\r\n              &quot;doc_count&quot; : 1\r\n            },\r\n            &quot;2023-08-05&quot; : {\r\n              &quot;key_as_string&quot; : &quot;2023-08-05&quot;,\r\n              &quot;key&quot; : 1691193600000,\r\n              &quot;doc_count&quot; : 1\r\n            },\r\n            &quot;2023-08-06&quot; : {\r\n              &quot;key_as_string&quot; : &quot;2023-08-06&quot;,\r\n              &quot;key&quot; : 1691280000000,\r\n              &quot;doc_count&quot; : 1\r\n            },\r\n            &quot;2023-08-07&quot; : {\r\n              &quot;key_as_string&quot; : &quot;2023-08-07&quot;,\r\n              &quot;key&quot; : 1691366400000,\r\n              &quot;doc_count&quot; : 0\r\n            },\r\n            &quot;2023-08-08&quot; : {\r\n              &quot;key_as_string&quot; : &quot;2023-08-08&quot;,\r\n              &quot;key&quot; : 1691452800000,\r\n              &quot;doc_count&quot; : 1\r\n            }\r\n          }\r\n        }\r\n      }\r\n\r\nOfcourse you can change interval for ex month :)","title":"Elasticsearch date histogram aggregation shows incorrect dates","body":"<p>You should change mapping for created field like this</p>\n<pre><code>&quot;created&quot;: {\n      &quot;type&quot;: &quot;date&quot;,\n      &quot;format&quot;:&quot;epoch_second&quot;\n    }\n</code></pre>\n<p>Then on your aggregation change interval to &quot;day&quot; and add format field with date pattern like &quot;yyyy-MM-dd&quot;</p>\n<p>You aggregation query should be something like this:</p>\n<pre><code> &quot;aggregations&quot;:{\n      &quot;date_count&quot;:{\n         &quot;date_histogram&quot;:{\n            &quot;field&quot;:&quot;created&quot;,\n            &quot;interval&quot;:&quot;day&quot;,\n            &quot;format&quot; : &quot;yyyy-MM-dd&quot;,\n            &quot;offset&quot;:0,\n            &quot;order&quot;:{\n               &quot;_key&quot;:&quot;asc&quot;\n            },\n            &quot;keyed&quot;:false,\n            &quot;min_doc_count&quot;:0\n         }\n      }\n   }\n</code></pre>\n<p>And the effect should be like this:</p>\n<pre><code>&quot;aggregations&quot; : {\n    &quot;date_count&quot; : {\n      &quot;buckets&quot; : {\n        &quot;2023-08-04&quot; : {\n          &quot;key_as_string&quot; : &quot;2023-08-04&quot;,\n          &quot;key&quot; : 1691107200000,\n          &quot;doc_count&quot; : 1\n        },\n        &quot;2023-08-05&quot; : {\n          &quot;key_as_string&quot; : &quot;2023-08-05&quot;,\n          &quot;key&quot; : 1691193600000,\n          &quot;doc_count&quot; : 1\n        },\n        &quot;2023-08-06&quot; : {\n          &quot;key_as_string&quot; : &quot;2023-08-06&quot;,\n          &quot;key&quot; : 1691280000000,\n          &quot;doc_count&quot; : 1\n        },\n        &quot;2023-08-07&quot; : {\n          &quot;key_as_string&quot; : &quot;2023-08-07&quot;,\n          &quot;key&quot; : 1691366400000,\n          &quot;doc_count&quot; : 0\n        },\n        &quot;2023-08-08&quot; : {\n          &quot;key_as_string&quot; : &quot;2023-08-08&quot;,\n          &quot;key&quot; : 1691452800000,\n          &quot;doc_count&quot; : 1\n        }\n      }\n    }\n  }\n</code></pre>\n<p>Ofcourse you can change interval for ex month :)</p>\n"}],"owner":{"account_id":26871811,"reputation":1,"user_id":20453687,"display_name":"roditoo"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":85,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1692299384,"creation_date":1692296033,"question_id":76924144,"body_markdown":"Im using ES version 6.8, trying to do a query with the Java High Level REST Client. I&#39;m trying to use the Histogram Date Aggregation to get the count of documents by date.\r\nThis is my query:\r\n\r\n\r\n```\r\n{\r\n   &quot;query&quot;:{\r\n      &quot;bool&quot;:{\r\n         &quot;filter&quot;:[\r\n            {\r\n               &quot;terms&quot;:{\r\n                  &quot;userId&quot;:[\r\n                     &quot;123456&quot;, &quot;654321&quot;\r\n                  ],\r\n                  &quot;boost&quot;:1.0\r\n               }\r\n            },\r\n            {\r\n               &quot;range&quot;:{\r\n                  &quot;created&quot;:{\r\n                     &quot;from&quot;:1672531200000,\r\n                     &quot;to&quot;:1675123200000,\r\n                     &quot;include_lower&quot;:true,\r\n                     &quot;include_upper&quot;:true,\r\n                     &quot;boost&quot;:1.0\r\n                  }\r\n               }\r\n            }\r\n         ],\r\n         &quot;adjust_pure_negative&quot;:true,\r\n         &quot;boost&quot;:1.0\r\n      }\r\n   },\r\n   &quot;aggregations&quot;:{\r\n      &quot;date_count&quot;:{\r\n         &quot;date_histogram&quot;:{\r\n            &quot;field&quot;:&quot;created&quot;,\r\n            &quot;interval&quot;:&quot;1d&quot;,\r\n            &quot;offset&quot;:0,\r\n            &quot;order&quot;:{\r\n               &quot;_key&quot;:&quot;asc&quot;\r\n            },\r\n            &quot;keyed&quot;:false,\r\n            &quot;min_doc_count&quot;:0\r\n         }\r\n      }\r\n   }\r\n}\r\n```\r\nIm using the BoolQueryBuilder to filter by user id and by a range date.\r\n\r\nI expect that if I use a range date from &quot;2023-01-01&quot; to &quot;2023-01-31&quot;  it will return me the quantity of documents per day, also if the count is 0, but this is returning me empty buckets. \r\n\r\nThen I try adding one month from &quot;2023-01-01&quot; to &quot;2023-02-31&quot; and this returns me just 2 buckets, when I want one bucket per day from &quot;2023-01-01&quot; to &quot;2023-02-31&quot;.\r\n\r\n\r\n```\r\n{\r\n   &quot;aggregations&quot;:{\r\n      &quot;date_histogram#date_count&quot;:{\r\n         &quot;buckets&quot;:[\r\n            {\r\n               &quot;key&quot;:1675209600000,\r\n               &quot;doc_count&quot;:3\r\n            },\r\n            {\r\n               &quot;key&quot;:1675296000000,\r\n               &quot;doc_count&quot;:1\r\n            }\r\n         ]\r\n      }\r\n   }\r\n}\r\n```\r\nThe &quot;key&quot; is numeric because we use Long in the &quot;created&quot; field, then I parse to a date.\r\n\r\nDoes anyone know if I am doing something wrong in the query?\r\n\r\nThanks!","title":"Elasticsearch date histogram aggregation shows incorrect dates","body":"<p>Im using ES version 6.8, trying to do a query with the Java High Level REST Client. I'm trying to use the Histogram Date Aggregation to get the count of documents by date.\nThis is my query:</p>\n<pre><code>{\n   &quot;query&quot;:{\n      &quot;bool&quot;:{\n         &quot;filter&quot;:[\n            {\n               &quot;terms&quot;:{\n                  &quot;userId&quot;:[\n                     &quot;123456&quot;, &quot;654321&quot;\n                  ],\n                  &quot;boost&quot;:1.0\n               }\n            },\n            {\n               &quot;range&quot;:{\n                  &quot;created&quot;:{\n                     &quot;from&quot;:1672531200000,\n                     &quot;to&quot;:1675123200000,\n                     &quot;include_lower&quot;:true,\n                     &quot;include_upper&quot;:true,\n                     &quot;boost&quot;:1.0\n                  }\n               }\n            }\n         ],\n         &quot;adjust_pure_negative&quot;:true,\n         &quot;boost&quot;:1.0\n      }\n   },\n   &quot;aggregations&quot;:{\n      &quot;date_count&quot;:{\n         &quot;date_histogram&quot;:{\n            &quot;field&quot;:&quot;created&quot;,\n            &quot;interval&quot;:&quot;1d&quot;,\n            &quot;offset&quot;:0,\n            &quot;order&quot;:{\n               &quot;_key&quot;:&quot;asc&quot;\n            },\n            &quot;keyed&quot;:false,\n            &quot;min_doc_count&quot;:0\n         }\n      }\n   }\n}\n</code></pre>\n<p>Im using the BoolQueryBuilder to filter by user id and by a range date.</p>\n<p>I expect that if I use a range date from &quot;2023-01-01&quot; to &quot;2023-01-31&quot;  it will return me the quantity of documents per day, also if the count is 0, but this is returning me empty buckets.</p>\n<p>Then I try adding one month from &quot;2023-01-01&quot; to &quot;2023-02-31&quot; and this returns me just 2 buckets, when I want one bucket per day from &quot;2023-01-01&quot; to &quot;2023-02-31&quot;.</p>\n<pre><code>{\n   &quot;aggregations&quot;:{\n      &quot;date_histogram#date_count&quot;:{\n         &quot;buckets&quot;:[\n            {\n               &quot;key&quot;:1675209600000,\n               &quot;doc_count&quot;:3\n            },\n            {\n               &quot;key&quot;:1675296000000,\n               &quot;doc_count&quot;:1\n            }\n         ]\n      }\n   }\n}\n</code></pre>\n<p>The &quot;key&quot; is numeric because we use Long in the &quot;created&quot; field, then I parse to a date.</p>\n<p>Does anyone know if I am doing something wrong in the query?</p>\n<p>Thanks!</p>\n"},{"tags":["java","activemq","spring-jms"],"owner":{"account_id":3367953,"reputation":1474,"user_id":2828006,"accept_rate":24,"display_name":"Scientist"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":14,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1692299241,"creation_date":1692293323,"question_id":76923867,"body_markdown":"I am trying to create Spring bean of JMS with ActiveMQ in following way:\r\n```xml\r\n&lt;!-- Spring JMS Template --&gt;\r\n&lt;bean id=&quot;refreshJmsTemplate&quot; class=&quot;org.springframework.jms.core.JmsTemplate&quot;&gt;\r\n    &lt;property name=&quot;connectionFactory&quot;&gt;\r\n        &lt;ref bean=&quot;refreshJmsFactory&quot;/&gt;\r\n    &lt;/property&gt;\r\n&lt;/bean&gt;\r\n\r\n&lt;!-- Queue --&gt;\r\n&lt;amq:topic id=&quot;refreshTopic&quot; physicalName=&quot;SystemRefreshTopic&quot;/&gt;\r\n\r\n&lt;!-- Publisher --&gt;\r\n&lt;bean id=&quot;refreshPublisher&quot; scope=&quot;prototype&quot;\r\n      class=&quot;com.pubsub.publisher.JMSRefreshMessagePublisher&quot; init-method=&quot;init&quot;&gt;\r\n    &lt;property name=&quot;destination&quot; ref=&quot;refreshTopic&quot;/&gt;\r\n    &lt;property name=&quot;jmsTemplate&quot; ref=&quot;refreshJmsTemplate&quot;/&gt;\r\n&lt;/bean&gt;\r\n```\r\nJava definition of RefreshMessagePublisher is as follows:\r\n```java\r\npublic class JMSRefreshMessagePublisher implements RefreshMessagePublisher, ApplicationContextAware {\r\n\r\n    private JmsTemplate jmsTemplate;\r\n\r\n    private ActiveMQDestination destination;\r\n\r\n    private ApplicationContext appContext;\r\n\r\n    /*\r\n        init() method to be called during bean init\r\n     */\r\n    public void init(String beanName, ApplicationContext appContext) {\r\n        final String topic = SystemConstants.SYSTEM_REFRESH_TOPIC + &quot;_&quot; + beanName;\r\n        final ActiveMQDestination destination = new ActiveMQTopic(topic);\r\n        this.setDestination(destination);\r\n    }\r\n\r\n\r\n    private void setDestination(ActiveMQDestination destination) {\r\n        this.destination = destination;\r\n    }\r\n\r\n    public void setJmsTemplate(JmsTemplate jmsTemplate) {\r\n        this.jmsTemplate = jmsTemplate;\r\n    }\r\n```\r\n\r\nWhen instantiating the bean i am getting following error \r\n```\r\nError setting property values; nested exception is org.springframework.beans.NotWritablePropertyException: Invalid property &#39;destination&#39; of bean class [com.pubsub.publisher.SystemRefreshMessagePublisher]: Bean property &#39;destination&#39; is not writable or has an invalid setter method. Does the parameter type of the setter match the return type of the getter?\r\n```","title":"Error in Spring bean of JMSPublisher using JMS AMQ topic","body":"<p>I am trying to create Spring bean of JMS with ActiveMQ in following way:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;!-- Spring JMS Template --&gt;\n&lt;bean id=&quot;refreshJmsTemplate&quot; class=&quot;org.springframework.jms.core.JmsTemplate&quot;&gt;\n    &lt;property name=&quot;connectionFactory&quot;&gt;\n        &lt;ref bean=&quot;refreshJmsFactory&quot;/&gt;\n    &lt;/property&gt;\n&lt;/bean&gt;\n\n&lt;!-- Queue --&gt;\n&lt;amq:topic id=&quot;refreshTopic&quot; physicalName=&quot;SystemRefreshTopic&quot;/&gt;\n\n&lt;!-- Publisher --&gt;\n&lt;bean id=&quot;refreshPublisher&quot; scope=&quot;prototype&quot;\n      class=&quot;com.pubsub.publisher.JMSRefreshMessagePublisher&quot; init-method=&quot;init&quot;&gt;\n    &lt;property name=&quot;destination&quot; ref=&quot;refreshTopic&quot;/&gt;\n    &lt;property name=&quot;jmsTemplate&quot; ref=&quot;refreshJmsTemplate&quot;/&gt;\n&lt;/bean&gt;\n</code></pre>\n<p>Java definition of RefreshMessagePublisher is as follows:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class JMSRefreshMessagePublisher implements RefreshMessagePublisher, ApplicationContextAware {\n\n    private JmsTemplate jmsTemplate;\n\n    private ActiveMQDestination destination;\n\n    private ApplicationContext appContext;\n\n    /*\n        init() method to be called during bean init\n     */\n    public void init(String beanName, ApplicationContext appContext) {\n        final String topic = SystemConstants.SYSTEM_REFRESH_TOPIC + &quot;_&quot; + beanName;\n        final ActiveMQDestination destination = new ActiveMQTopic(topic);\n        this.setDestination(destination);\n    }\n\n\n    private void setDestination(ActiveMQDestination destination) {\n        this.destination = destination;\n    }\n\n    public void setJmsTemplate(JmsTemplate jmsTemplate) {\n        this.jmsTemplate = jmsTemplate;\n    }\n</code></pre>\n<p>When instantiating the bean i am getting following error</p>\n<pre><code>Error setting property values; nested exception is org.springframework.beans.NotWritablePropertyException: Invalid property 'destination' of bean class [com.pubsub.publisher.SystemRefreshMessagePublisher]: Bean property 'destination' is not writable or has an invalid setter method. Does the parameter type of the setter match the return type of the getter?\n</code></pre>\n"},{"tags":["java","spring","spring-boot","logging","mockmvc"],"owner":{"account_id":2023908,"reputation":4939,"user_id":1809463,"accept_rate":84,"display_name":"mike"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":64,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1692299098,"creation_date":1692279455,"question_id":76922063,"body_markdown":"I have trouble finding the right configuration that includes the console output generated by MockMvc (ie, *MockHttpServletRequest*, *MockHttpServletResponse* etc) in Logback&#39;s file and console appender. \r\n\r\nBelow the current console output I&#39;m getting in IntelliJ.    \r\n\r\n    2023-08-17T15:02:55.698+02:00  INFO 17720 --- [    Test worker] ish.user.UserApplicationMockedTests      : Started UserApplicationMockedTests in 5.549 seconds (process running for\r\n    8.227) 2023-08-17T15:02:55.943+02:00  INFO 17720 --- [    Test worker] ish.user.controller.UserController       : Getting user for ID: 100\r\n    \r\n    MockHttpServletRequest:\r\n          HTTP Method = GET\r\n          Request URI = /api/v1.0/users/100\r\n           Parameters = {}\r\n              Headers = []\r\n                 Body = null\r\n        Session Attrs = {}\r\n    \r\n    Handler:\r\n                 Type = ish.user.controller.UserController\r\n               Method = ish.user.controller.UserController#getUserById(long)\r\n    \r\n    Async:\r\n        Async started = false\r\n         Async result = null\r\n    \r\n    Resolved Exception:\r\n                 Type = null\r\n    \r\n    ModelAndView:\r\n            View name = null\r\n                 View = null\r\n                Model = null\r\n    \r\n    FlashMap:\r\n           Attributes = null\r\n    \r\n    MockHttpServletResponse:\r\n               Status = 200\r\n        Error message = null\r\n              Headers = [Vary:&quot;Origin&quot;, &quot;Access-Control-Request-Method&quot;, &quot;Access-Control-Request-Headers&quot;, Content-Type:&quot;application/json&quot;]\r\n         Content type = application/json\r\n                 Body = {&quot;id&quot;:100,&quot;mail&quot;:&quot;mitch.lee@hedberg.com&quot;,&quot;firstname&quot;:&quot;Mitchell&quot;,&quot;lastname&quot;:&quot;Hedberg&quot;}\r\n        Forwarded URL = null    Redirected URL = null\r\n              Cookies = []\r\n    2023-08-17T15:02:56.158+02:00  INFO 17720 --- [    Test worker] ish.user.controller.UserController       : Getting user for ID: 1001\r\n\r\nMy **application.yaml** is configured as follows\r\n\r\n    logging:\r\n      level:\r\n        ROOT: INFO\r\n        org.springframework.boot: INFO\r\n        org.springframework.boot.test.*: TRACE\r\n        org.springframework.test.web.servlet.*: TRACE\r\n        ish.user.*: DEBUG\r\n        org.hibernate.SQL: TRACE\r\n        org.hibernate.type.descriptor.sql.BasicBinder: TRACE\r\n        org.hibernate.type: INFO\r\n      config: classpath:logback-test.xml\r\n\r\nI&#39;ve added `org.springframework.boot.test.*` and `org.spring.framework.test.web.servlet.*` with logging level `TRACE`, but that didnt&#39; help.\r\n\r\nHere, also my **logback-test.xml**\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;!DOCTYPE configuration&gt;\r\n    &lt;configuration&gt;\r\n        &lt;include resource=&quot;org/springframework/boot/logging/logback/defaults.xml&quot;/&gt;\r\n        &lt;statusListener class=&quot;ch.qos.logback.core.status.NopStatusListener&quot;/&gt;\r\n    \r\n        &lt;property name=&quot;APP&quot; value=&quot;ish-user-svc&quot;/&gt;\r\n        &lt;!-- or in Java with: System.setProperty(&quot;LOG_DIR&quot;, &quot;log&quot;); --&gt;\r\n        &lt;property name=&quot;LOG_DIR&quot; value=&quot;log&quot;/&gt;\r\n        &lt;property name=&quot;LOG_LEVEL&quot; value=&quot;TRACE&quot;/&gt;\r\n    \r\n        &lt;appender name=&quot;CONSOLE&quot; class=&quot;ch.qos.logback.core.ConsoleAppender&quot;&gt;\r\n            &lt;filter class=&quot;ch.qos.logback.classic.filter.ThresholdFilter&quot;&gt;\r\n                &lt;level&gt;DEBUG&lt;/level&gt;\r\n            &lt;/filter&gt;\r\n            &lt;encoder&gt;\r\n                &lt;pattern&gt;${CONSOLE_LOG_PATTERN}&lt;/pattern&gt;\r\n                &lt;charset&gt;utf8&lt;/charset&gt;\r\n            &lt;/encoder&gt;\r\n        &lt;/appender&gt;\r\n    \r\n        &lt;appender name=&quot;FILE_DEBUG&quot; class=&quot;ch.qos.logback.core.rolling.RollingFileAppender&quot;&gt;\r\n            &lt;filter class=&quot;ch.qos.logback.classic.filter.ThresholdFilter&quot;&gt;\r\n                &lt;level&gt;${LOG_LEVEL}&lt;/level&gt;\r\n            &lt;/filter&gt;\r\n    \r\n            &lt;file&gt;${LOG_DIR}/test.${APP}.${LOG_LEVEL}.log&lt;/file&gt;\r\n            &lt;encoder class=&quot;ch.qos.logback.classic.encoder.PatternLayoutEncoder&quot;&gt;\r\n                &lt;pattern&gt;${FILE_LOG_PATTERN}&lt;/pattern&gt;\r\n                &lt;charset&gt;utf8&lt;/charset&gt;\r\n            &lt;/encoder&gt;\r\n    \r\n            &lt;rollingPolicy class=&quot;ch.qos.logback.core.rolling.SizeAndTimeBasedRollingPolicy&quot;&gt;\r\n                &lt;fileNamePattern&gt;${LOG_DIR}/archived/test.${APP}-%d{yyyy-MM-dd}.%i.${LOG_LEVEL}.log&lt;/fileNamePattern&gt;\r\n                &lt;maxHistory&gt;10&lt;/maxHistory&gt;\r\n                &lt;totalSizeCap&gt;100MB&lt;/totalSizeCap&gt;\r\n                &lt;maxFileSize&gt;10MB&lt;/maxFileSize&gt;\r\n            &lt;/rollingPolicy&gt;\r\n        &lt;/appender&gt;\r\n    \r\n        &lt;root&gt;\r\n            &lt;appender-ref ref=&quot;CONSOLE&quot;/&gt;\r\n            &lt;appender-ref ref=&quot;FILE_DEBUG&quot;/&gt;\r\n        &lt;/root&gt;\r\n    \r\n    &lt;/configuration&gt;\r\n\r\n","title":"Logback configuration for MockMVC&#39;s logs when testing in Spring Boot","body":"<p>I have trouble finding the right configuration that includes the console output generated by MockMvc (ie, <em>MockHttpServletRequest</em>, <em>MockHttpServletResponse</em> etc) in Logback's file and console appender.</p>\n<p>Below the current console output I'm getting in IntelliJ.</p>\n<pre><code>2023-08-17T15:02:55.698+02:00  INFO 17720 --- [    Test worker] ish.user.UserApplicationMockedTests      : Started UserApplicationMockedTests in 5.549 seconds (process running for\n8.227) 2023-08-17T15:02:55.943+02:00  INFO 17720 --- [    Test worker] ish.user.controller.UserController       : Getting user for ID: 100\n\nMockHttpServletRequest:\n      HTTP Method = GET\n      Request URI = /api/v1.0/users/100\n       Parameters = {}\n          Headers = []\n             Body = null\n    Session Attrs = {}\n\nHandler:\n             Type = ish.user.controller.UserController\n           Method = ish.user.controller.UserController#getUserById(long)\n\nAsync:\n    Async started = false\n     Async result = null\n\nResolved Exception:\n             Type = null\n\nModelAndView:\n        View name = null\n             View = null\n            Model = null\n\nFlashMap:\n       Attributes = null\n\nMockHttpServletResponse:\n           Status = 200\n    Error message = null\n          Headers = [Vary:&quot;Origin&quot;, &quot;Access-Control-Request-Method&quot;, &quot;Access-Control-Request-Headers&quot;, Content-Type:&quot;application/json&quot;]\n     Content type = application/json\n             Body = {&quot;id&quot;:100,&quot;mail&quot;:&quot;mitch.lee@hedberg.com&quot;,&quot;firstname&quot;:&quot;Mitchell&quot;,&quot;lastname&quot;:&quot;Hedberg&quot;}\n    Forwarded URL = null    Redirected URL = null\n          Cookies = []\n2023-08-17T15:02:56.158+02:00  INFO 17720 --- [    Test worker] ish.user.controller.UserController       : Getting user for ID: 1001\n</code></pre>\n<p>My <strong>application.yaml</strong> is configured as follows</p>\n<pre><code>logging:\n  level:\n    ROOT: INFO\n    org.springframework.boot: INFO\n    org.springframework.boot.test.*: TRACE\n    org.springframework.test.web.servlet.*: TRACE\n    ish.user.*: DEBUG\n    org.hibernate.SQL: TRACE\n    org.hibernate.type.descriptor.sql.BasicBinder: TRACE\n    org.hibernate.type: INFO\n  config: classpath:logback-test.xml\n</code></pre>\n<p>I've added <code>org.springframework.boot.test.*</code> and <code>org.spring.framework.test.web.servlet.*</code> with logging level <code>TRACE</code>, but that didnt' help.</p>\n<p>Here, also my <strong>logback-test.xml</strong></p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;!DOCTYPE configuration&gt;\n&lt;configuration&gt;\n    &lt;include resource=&quot;org/springframework/boot/logging/logback/defaults.xml&quot;/&gt;\n    &lt;statusListener class=&quot;ch.qos.logback.core.status.NopStatusListener&quot;/&gt;\n\n    &lt;property name=&quot;APP&quot; value=&quot;ish-user-svc&quot;/&gt;\n    &lt;!-- or in Java with: System.setProperty(&quot;LOG_DIR&quot;, &quot;log&quot;); --&gt;\n    &lt;property name=&quot;LOG_DIR&quot; value=&quot;log&quot;/&gt;\n    &lt;property name=&quot;LOG_LEVEL&quot; value=&quot;TRACE&quot;/&gt;\n\n    &lt;appender name=&quot;CONSOLE&quot; class=&quot;ch.qos.logback.core.ConsoleAppender&quot;&gt;\n        &lt;filter class=&quot;ch.qos.logback.classic.filter.ThresholdFilter&quot;&gt;\n            &lt;level&gt;DEBUG&lt;/level&gt;\n        &lt;/filter&gt;\n        &lt;encoder&gt;\n            &lt;pattern&gt;${CONSOLE_LOG_PATTERN}&lt;/pattern&gt;\n            &lt;charset&gt;utf8&lt;/charset&gt;\n        &lt;/encoder&gt;\n    &lt;/appender&gt;\n\n    &lt;appender name=&quot;FILE_DEBUG&quot; class=&quot;ch.qos.logback.core.rolling.RollingFileAppender&quot;&gt;\n        &lt;filter class=&quot;ch.qos.logback.classic.filter.ThresholdFilter&quot;&gt;\n            &lt;level&gt;${LOG_LEVEL}&lt;/level&gt;\n        &lt;/filter&gt;\n\n        &lt;file&gt;${LOG_DIR}/test.${APP}.${LOG_LEVEL}.log&lt;/file&gt;\n        &lt;encoder class=&quot;ch.qos.logback.classic.encoder.PatternLayoutEncoder&quot;&gt;\n            &lt;pattern&gt;${FILE_LOG_PATTERN}&lt;/pattern&gt;\n            &lt;charset&gt;utf8&lt;/charset&gt;\n        &lt;/encoder&gt;\n\n        &lt;rollingPolicy class=&quot;ch.qos.logback.core.rolling.SizeAndTimeBasedRollingPolicy&quot;&gt;\n            &lt;fileNamePattern&gt;${LOG_DIR}/archived/test.${APP}-%d{yyyy-MM-dd}.%i.${LOG_LEVEL}.log&lt;/fileNamePattern&gt;\n            &lt;maxHistory&gt;10&lt;/maxHistory&gt;\n            &lt;totalSizeCap&gt;100MB&lt;/totalSizeCap&gt;\n            &lt;maxFileSize&gt;10MB&lt;/maxFileSize&gt;\n        &lt;/rollingPolicy&gt;\n    &lt;/appender&gt;\n\n    &lt;root&gt;\n        &lt;appender-ref ref=&quot;CONSOLE&quot;/&gt;\n        &lt;appender-ref ref=&quot;FILE_DEBUG&quot;/&gt;\n    &lt;/root&gt;\n\n&lt;/configuration&gt;\n</code></pre>\n"},{"tags":["java","spring","spring-boot"],"answers":[{"tags":[],"owner":{"account_id":2557553,"reputation":3975,"user_id":2219213,"accept_rate":69,"display_name":"Sergii Getman"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1476547126,"creation_date":1476547126,"answer_id":40061204,"question_id":40060989,"body_markdown":"You can specify properties according profiles in one *application.properties(yml)* like [here][1]. Then \n`mvn clean spring-boot:run -Dspring.profiles.active=dev` should run it correct. It works for me\n\n\n  [1]: http://docs.spring.io/spring-boot/docs/current/reference/html/boot-features-external-config.html#boot-features-external-config-profile-specific-properties","title":"How to use Spring Boot profiles?","body":"<p>You can specify properties according profiles in one <em>application.properties(yml)</em> like <a href=\"http://docs.spring.io/spring-boot/docs/current/reference/html/boot-features-external-config.html#boot-features-external-config-profile-specific-properties\" rel=\"nofollow\">here</a>. Then \n<code>mvn clean spring-boot:run -Dspring.profiles.active=dev</code> should run it correct. It works for me</p>\n"},{"tags":[],"owner":{"account_id":557859,"reputation":5979,"user_id":920457,"accept_rate":100,"display_name":"francis"},"down_vote_count":1,"up_vote_count":213,"is_accepted":false,"score":212,"last_activity_date":1688318665,"creation_date":1476547309,"answer_id":40061235,"question_id":40060989,"body_markdown":"I&#39;m not sure I fully understand the question but I&#39;ll attempt to answer by providing a few details about profiles in Spring Boot.\r\n\r\nFor your **#1** example, according to the docs you can select the profile using the _Spring Boot Maven Plugin_ using `-Drun.profiles`.\r\n \r\n**Edit**: For Spring Boot 2.0+ `run` has been renamed to `spring-boot.run` and `run.profiles` has been renamed to `spring-boot.run.profiles`\r\n\r\n    mvn spring-boot:run -Dspring-boot.run.profiles=dev\r\n\r\nFor more details look at: [Spring Boot Maven Plugin](https://docs.spring.io/spring-boot/docs/2.0.1.RELEASE/maven-plugin/examples/run-profiles.html)\r\n\r\nFrom your **#2** example, you are defining the active profile after the name of the jar. You need to provide the JVM argument before the name of the jar you are running.\r\n\r\n    java -jar -Dspring.profiles.active=dev XXX.jar\r\n\r\nGeneral info:\r\n\r\nYou mention that you have both an `application.yml` and a `application-dev.yml`. Running with the `dev` profile will actually load *both* config files. Values from `application-dev.yml` will override the same values provided by `application.yml` but values from both `yml` files will be loaded.\r\n\r\nThere are also multiple ways to define the active profile.\r\n\r\nYou can define them as you did, using `-Dspring.profiles.active` when running your jar. You can also set the profile using a `SPRING_PROFILES_ACTIVE` environment variable or a `spring.profiles.active` system property.\r\n\r\nMore info can be found here:\r\n[2.6. Set the Active Spring Profiles](https://docs.spring.io/spring-boot/docs/current/reference/html/howto.html#howto-set-active-spring-profiles)\r\n\r\n\r\n\r\n\r\n","title":"How to use Spring Boot profiles?","body":"<p>I'm not sure I fully understand the question but I'll attempt to answer by providing a few details about profiles in Spring Boot.</p>\n<p>For your <strong>#1</strong> example, according to the docs you can select the profile using the <em>Spring Boot Maven Plugin</em> using <code>-Drun.profiles</code>.</p>\n<p><strong>Edit</strong>: For Spring Boot 2.0+ <code>run</code> has been renamed to <code>spring-boot.run</code> and <code>run.profiles</code> has been renamed to <code>spring-boot.run.profiles</code></p>\n<pre><code>mvn spring-boot:run -Dspring-boot.run.profiles=dev\n</code></pre>\n<p>For more details look at: <a href=\"https://docs.spring.io/spring-boot/docs/2.0.1.RELEASE/maven-plugin/examples/run-profiles.html\" rel=\"noreferrer\">Spring Boot Maven Plugin</a></p>\n<p>From your <strong>#2</strong> example, you are defining the active profile after the name of the jar. You need to provide the JVM argument before the name of the jar you are running.</p>\n<pre><code>java -jar -Dspring.profiles.active=dev XXX.jar\n</code></pre>\n<p>General info:</p>\n<p>You mention that you have both an <code>application.yml</code> and a <code>application-dev.yml</code>. Running with the <code>dev</code> profile will actually load <em>both</em> config files. Values from <code>application-dev.yml</code> will override the same values provided by <code>application.yml</code> but values from both <code>yml</code> files will be loaded.</p>\n<p>There are also multiple ways to define the active profile.</p>\n<p>You can define them as you did, using <code>-Dspring.profiles.active</code> when running your jar. You can also set the profile using a <code>SPRING_PROFILES_ACTIVE</code> environment variable or a <code>spring.profiles.active</code> system property.</p>\n<p>More info can be found here:\n<a href=\"https://docs.spring.io/spring-boot/docs/current/reference/html/howto.html#howto-set-active-spring-profiles\" rel=\"noreferrer\">2.6. Set the Active Spring Profiles</a></p>\n"},{"tags":[],"owner":{"account_id":9542529,"reputation":522,"user_id":7090067,"display_name":"sumit singh"},"down_vote_count":1,"up_vote_count":8,"is_accepted":false,"score":7,"last_activity_date":1522523523,"creation_date":1522523523,"answer_id":49591444,"question_id":40060989,"body_markdown":"You don&#39;t need three .yml files for this. You can have a single application.yml file and write profile specific properties in the same where each profile section is separated by 3 hyphen (---)\r\n\r\nNext, for selecting the current active profile, you can specify that as well in your application.yml file, like this :\r\n\r\n    spring:\r\n      profiles:\r\n        active:\r\n        - local\r\n\r\nHowever, this configuration will be overriden if you set an Environment variable, eg :\r\nSPRING_PROFILES_ACTIVE = dev\r\n\r\n\r\n----------\r\n\r\n\r\nHere is a sample file for you requirement:\r\n\r\n    # include common properties for every profile in this section\r\n    \r\n    server.port: 5000 \r\n    \r\n    spring:\r\n      profiles:\r\n        active:\r\n        - local\r\n      \r\n    ---\r\n    # profile specific properties\r\n    \r\n    spring:\r\n      profiles: local\r\n      \r\n      datasource:\r\n        url: jdbc:mysql://localhost:3306/\r\n        username: root\r\n        password: root\r\n    \t\r\n    ---\r\n    # profile specific properties\r\n    \r\n    spring:\r\n      profiles: dev\r\n      \r\n      datasource:\r\n        url: jdbc:mysql://&lt;dev db url&gt;\r\n        username: &lt;username&gt;\r\n        password: &lt;password&gt;\r\n    \t\r\n    \t","title":"How to use Spring Boot profiles?","body":"<p>You don't need three .yml files for this. You can have a single application.yml file and write profile specific properties in the same where each profile section is separated by 3 hyphen (---)</p>\n\n<p>Next, for selecting the current active profile, you can specify that as well in your application.yml file, like this :</p>\n\n<pre><code>spring:\n  profiles:\n    active:\n    - local\n</code></pre>\n\n<p>However, this configuration will be overriden if you set an Environment variable, eg :\nSPRING_PROFILES_ACTIVE = dev</p>\n\n<hr>\n\n<p>Here is a sample file for you requirement:</p>\n\n<pre><code># include common properties for every profile in this section\n\nserver.port: 5000 \n\nspring:\n  profiles:\n    active:\n    - local\n\n---\n# profile specific properties\n\nspring:\n  profiles: local\n\n  datasource:\n    url: jdbc:mysql://localhost:3306/\n    username: root\n    password: root\n\n---\n# profile specific properties\n\nspring:\n  profiles: dev\n\n  datasource:\n    url: jdbc:mysql://&lt;dev db url&gt;\n    username: &lt;username&gt;\n    password: &lt;password&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":9708017,"reputation":1819,"user_id":7200877,"display_name":"pedromorfeu"},"down_vote_count":1,"up_vote_count":54,"is_accepted":false,"score":53,"last_activity_date":1681053292,"creation_date":1525356015,"answer_id":50156924,"question_id":40060989,"body_markdown":"If you are using the Spring Boot Maven Plugin, run:\r\n\r\n    mvn spring-boot:run -Dspring-boot.run.profiles=foo,bar\r\n\r\n(https://docs.spring.io/spring-boot/docs/current/maven-plugin/reference/htmlsingle/#using.overriding-command-line)","title":"How to use Spring Boot profiles?","body":"<p>If you are using the Spring Boot Maven Plugin, run:</p>\n<pre><code>mvn spring-boot:run -Dspring-boot.run.profiles=foo,bar\n</code></pre>\n<p>(<a href=\"https://docs.spring.io/spring-boot/docs/current/maven-plugin/reference/htmlsingle/#using.overriding-command-line\" rel=\"noreferrer\">https://docs.spring.io/spring-boot/docs/current/maven-plugin/reference/htmlsingle/#using.overriding-command-line</a>)</p>\n"},{"tags":[],"owner":{"account_id":10880077,"reputation":1286,"user_id":7999311,"display_name":"Adam Ostrožl&#237;k"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1536825866,"creation_date":1536825866,"answer_id":52309204,"question_id":40060989,"body_markdown":"&gt; The @Profile annotation allows you to indicate that a component is\r\n&gt; eligible for registration when one or more specified profiles are\r\n&gt; active. Using our example above, we can rewrite the dataSource\r\n&gt; configuration as follows:\r\n\r\n    @Configuration\r\n    @Profile(&quot;dev&quot;)\r\n    public class StandaloneDataConfig {\r\n    \r\n        @Bean\r\n        public DataSource dataSource() {\r\n            return new EmbeddedDatabaseBuilder()\r\n                .setType(EmbeddedDatabaseType.HSQL)\r\n                .addScript(&quot;classpath:com/bank/config/sql/schema.sql&quot;)\r\n                .addScript(&quot;classpath:com/bank/config/sql/test-data.sql&quot;)\r\n                .build();\r\n        }\r\n    }\r\n\r\n \r\nAnd other one:\r\n\r\n    @Configuration\r\n    @Profile(&quot;production&quot;)\r\n    public class JndiDataConfig {\r\n    \r\n        @Bean(destroyMethod=&quot;&quot;)\r\n        public DataSource dataSource() throws Exception {\r\n            Context ctx = new InitialContext();\r\n            return (DataSource) ctx.lookup(&quot;java:comp/env/jdbc/datasource&quot;);\r\n        }\r\n    }\r\n\r\n","title":"How to use Spring Boot profiles?","body":"<blockquote>\n  <p>The @Profile annotation allows you to indicate that a component is\n  eligible for registration when one or more specified profiles are\n  active. Using our example above, we can rewrite the dataSource\n  configuration as follows:</p>\n</blockquote>\n\n<pre><code>@Configuration\n@Profile(\"dev\")\npublic class StandaloneDataConfig {\n\n    @Bean\n    public DataSource dataSource() {\n        return new EmbeddedDatabaseBuilder()\n            .setType(EmbeddedDatabaseType.HSQL)\n            .addScript(\"classpath:com/bank/config/sql/schema.sql\")\n            .addScript(\"classpath:com/bank/config/sql/test-data.sql\")\n            .build();\n    }\n}\n</code></pre>\n\n<p>And other one:</p>\n\n<pre><code>@Configuration\n@Profile(\"production\")\npublic class JndiDataConfig {\n\n    @Bean(destroyMethod=\"\")\n    public DataSource dataSource() throws Exception {\n        Context ctx = new InitialContext();\n        return (DataSource) ctx.lookup(\"java:comp/env/jdbc/datasource\");\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":10947378,"reputation":21,"user_id":8044957,"display_name":"Ishadi Gamage"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1541226517,"creation_date":1541226196,"answer_id":53128962,"question_id":40060989,"body_markdown":"Create specific .yml files in the resources directory for each and every environment(Eg: dev,qa,stg etc.) that you need to run the application.\r\n[image of .yml files in resources directory][1]\r\n\r\nIf you are using spring-boot-maven-plugin 2.0.5.RELEASE in your pom.xml file you can add the profiles within the dependency tag as follows.\r\n[image of pom.xml spring-boot-maven-plugin][2]\r\n(you can configure multiple profiles using multiple profile tags)\r\n\r\nThen you can use the following commands to build and run the project.\r\n\r\n    1) mvn clean install\r\n    2) mvn spring-boot:run -Dspring-boot.run.default==qa\r\n\r\nThen you will see that the default profile is set as qa while running the project.\r\n[displaying the default profile when running the application][3]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/7fjec.png\r\n  [2]: https://i.stack.imgur.com/1Awql.png\r\n  [3]: https://i.stack.imgur.com/TM64B.png","title":"How to use Spring Boot profiles?","body":"<p>Create specific .yml files in the resources directory for each and every environment(Eg: dev,qa,stg etc.) that you need to run the application.\n<a href=\"https://i.stack.imgur.com/7fjec.png\" rel=\"nofollow noreferrer\">image of .yml files in resources directory</a></p>\n\n<p>If you are using spring-boot-maven-plugin 2.0.5.RELEASE in your pom.xml file you can add the profiles within the dependency tag as follows.\n<a href=\"https://i.stack.imgur.com/1Awql.png\" rel=\"nofollow noreferrer\">image of pom.xml spring-boot-maven-plugin</a>\n(you can configure multiple profiles using multiple profile tags)</p>\n\n<p>Then you can use the following commands to build and run the project.</p>\n\n<pre><code>1) mvn clean install\n2) mvn spring-boot:run -Dspring-boot.run.default==qa\n</code></pre>\n\n<p>Then you will see that the default profile is set as qa while running the project.\n<a href=\"https://i.stack.imgur.com/TM64B.png\" rel=\"nofollow noreferrer\">displaying the default profile when running the application</a></p>\n"},{"tags":[],"owner":{"account_id":3685282,"reputation":545,"user_id":3069161,"display_name":"Amimo Benja"},"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1547712472,"creation_date":1547712472,"answer_id":54231495,"question_id":40060989,"body_markdown":"If you are using maven, define your profiles as shown below within your pom.xml\r\n\r\n    &lt;profiles&gt;\r\n\t&lt;profile&gt;\r\n\t\t&lt;id&gt;local&lt;/id&gt;\r\n\t\t&lt;activation&gt;\r\n\t\t\t&lt;activeByDefault&gt;true&lt;/activeByDefault&gt;\r\n\t\t&lt;/activation&gt;\r\n\t\t&lt;properties&gt;\r\n\t\t\t&lt;jdbc.url&gt;dbUrl&lt;/jdbc.url&gt;\r\n\t\t\t&lt;jdbc.username&gt;dbuser&lt;/jdbc.username&gt;\r\n\t\t\t&lt;jdbc.password&gt;dbPassword&lt;/jdbc.password&gt;\r\n\t\t\t&lt;jdbc.driver&gt;dbDriver&lt;/jdbc.driver&gt;\r\n\t\t&lt;/properties&gt;\r\n\t&lt;/profile&gt;\r\n\t&lt;profile&gt;\r\n\t\t&lt;id&gt;dev&lt;/id&gt;\r\n\t\t&lt;properties&gt;\r\n\t\t\t&lt;jdbc.url&gt;dbUrl&lt;/jdbc.url&gt;\r\n\t\t\t&lt;jdbc.username&gt;dbuser&lt;/jdbc.username&gt;\r\n\t\t\t&lt;jdbc.password&gt;dbPassword&lt;/jdbc.password&gt;\r\n\t\t\t&lt;jdbc.driver&gt;dbDriver&lt;/jdbc.driver&gt;\r\n\t\t&lt;/properties&gt;\r\n\t\t&lt;dependencies&gt;\r\n\t\t\t&lt;dependency&gt;\r\n\t\t\t\t&lt;groupId&gt;org.postgresql&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;postgresql&lt;/artifactId&gt;\r\n\t\t\t&lt;/dependency&gt;\r\n\t\t&lt;/dependencies&gt;\r\n\t&lt;/profile&gt;\r\n\t&lt;profile&gt;\r\n\t\t&lt;id&gt;prod&lt;/id&gt;\r\n\t\t&lt;properties&gt;\r\n\t\t\t&lt;jdbc.url&gt;dbUrl&lt;/jdbc.url&gt;\r\n\t\t\t&lt;jdbc.username&gt;dbuser&lt;/jdbc.username&gt;\r\n\t\t\t&lt;jdbc.password&gt;dbPassword&lt;/jdbc.password&gt;\r\n\t\t\t&lt;jdbc.driver&gt;dbDriver&lt;/jdbc.driver&gt;\r\n\t\t&lt;/properties&gt;\r\n\t&lt;/profile&gt;\r\n&lt;/profiles&gt;\r\n\r\nBy default, i.e if No profile is selected, the local profile will always be use.\r\n\r\nTo select a specific profile in Spring Boot 2.x.x, use the below command.\r\n\r\n    mvn spring-boot:run -Dspring-boot.run.profiles=dev\r\n\r\nIf you want want to build/compile using properties of a specific profile, use the below command.\r\n\r\n    mvn clean install -Pdev -DprofileIdEnabled=true","title":"How to use Spring Boot profiles?","body":"<p>If you are using maven, define your profiles as shown below within your pom.xml</p>\n\n<pre><code>&lt;profiles&gt;\n&lt;profile&gt;\n    &lt;id&gt;local&lt;/id&gt;\n    &lt;activation&gt;\n        &lt;activeByDefault&gt;true&lt;/activeByDefault&gt;\n    &lt;/activation&gt;\n    &lt;properties&gt;\n        &lt;jdbc.url&gt;dbUrl&lt;/jdbc.url&gt;\n        &lt;jdbc.username&gt;dbuser&lt;/jdbc.username&gt;\n        &lt;jdbc.password&gt;dbPassword&lt;/jdbc.password&gt;\n        &lt;jdbc.driver&gt;dbDriver&lt;/jdbc.driver&gt;\n    &lt;/properties&gt;\n&lt;/profile&gt;\n&lt;profile&gt;\n    &lt;id&gt;dev&lt;/id&gt;\n    &lt;properties&gt;\n        &lt;jdbc.url&gt;dbUrl&lt;/jdbc.url&gt;\n        &lt;jdbc.username&gt;dbuser&lt;/jdbc.username&gt;\n        &lt;jdbc.password&gt;dbPassword&lt;/jdbc.password&gt;\n        &lt;jdbc.driver&gt;dbDriver&lt;/jdbc.driver&gt;\n    &lt;/properties&gt;\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.postgresql&lt;/groupId&gt;\n            &lt;artifactId&gt;postgresql&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n&lt;/profile&gt;\n&lt;profile&gt;\n    &lt;id&gt;prod&lt;/id&gt;\n    &lt;properties&gt;\n        &lt;jdbc.url&gt;dbUrl&lt;/jdbc.url&gt;\n        &lt;jdbc.username&gt;dbuser&lt;/jdbc.username&gt;\n        &lt;jdbc.password&gt;dbPassword&lt;/jdbc.password&gt;\n        &lt;jdbc.driver&gt;dbDriver&lt;/jdbc.driver&gt;\n    &lt;/properties&gt;\n&lt;/profile&gt;\n</code></pre>\n\n<p></p>\n\n<p>By default, i.e if No profile is selected, the local profile will always be use.</p>\n\n<p>To select a specific profile in Spring Boot 2.x.x, use the below command.</p>\n\n<pre><code>mvn spring-boot:run -Dspring-boot.run.profiles=dev\n</code></pre>\n\n<p>If you want want to build/compile using properties of a specific profile, use the below command.</p>\n\n<pre><code>mvn clean install -Pdev -DprofileIdEnabled=true\n</code></pre>\n"},{"tags":[],"owner":{"account_id":14699788,"reputation":1019,"user_id":10616141,"display_name":"kris"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1568887560,"creation_date":1568887560,"answer_id":58008570,"question_id":40060989,"body_markdown":"**`mvn spring-boot:run -Dspring-boot.run.profiles=foo,bar`**\r\n\r\n**Source- **https://docs.spring.io/spring-boot/docs/current/maven-plugin/examples/run-profiles.html\r\n\r\nBasically it is need when you multiple application-{environment}.properties is present inside in your project. by default, if you passed -Drun.profiles on command line or activeByDefault true in \r\n\r\n     &lt;profile&gt;\r\n        &lt;id&gt;dev&lt;/id&gt;\r\n        &lt;properties&gt;\r\n            &lt;activatedProperties&gt;dev&lt;/activatedProperties&gt;\r\n        &lt;/properties&gt;\r\n        &lt;activation&gt;\r\n            &lt;activeByDefault&gt;true&lt;/activeByDefault&gt;\r\n        &lt;/activation&gt;\r\n    &lt;/profile&gt;\r\n\r\n\r\nNothing defined like above it will choose by default application.properties otherwise you need to select by appending -Drun.profiles={dev/stage/prod}.\r\n\r\nTL;DR\r\n\r\n**`mvn spring-boot:run -Drun.profiles=dev`**\r\n\r\n","title":"How to use Spring Boot profiles?","body":"<p><strong><code>mvn spring-boot:run -Dspring-boot.run.profiles=foo,bar</code></strong></p>\n\n<p>**Source- **<a href=\"https://docs.spring.io/spring-boot/docs/current/maven-plugin/examples/run-profiles.html\" rel=\"noreferrer\">https://docs.spring.io/spring-boot/docs/current/maven-plugin/examples/run-profiles.html</a></p>\n\n<p>Basically it is need when you multiple application-{environment}.properties is present inside in your project. by default, if you passed -Drun.profiles on command line or activeByDefault true in </p>\n\n<pre><code> &lt;profile&gt;\n    &lt;id&gt;dev&lt;/id&gt;\n    &lt;properties&gt;\n        &lt;activatedProperties&gt;dev&lt;/activatedProperties&gt;\n    &lt;/properties&gt;\n    &lt;activation&gt;\n        &lt;activeByDefault&gt;true&lt;/activeByDefault&gt;\n    &lt;/activation&gt;\n&lt;/profile&gt;\n</code></pre>\n\n<p>Nothing defined like above it will choose by default application.properties otherwise you need to select by appending -Drun.profiles={dev/stage/prod}.</p>\n\n<p>TL;DR</p>\n\n<p><strong><code>mvn spring-boot:run -Drun.profiles=dev</code></strong></p>\n"},{"tags":[],"owner":{"account_id":2534655,"reputation":3537,"user_id":2202107,"accept_rate":56,"display_name":"Sida Zhou"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1576209000,"creation_date":1576209000,"answer_id":59315887,"question_id":40060989,"body_markdown":"Working with Intellij, because I don&#39;t know how to set keyboard shortcut to `mvn spring-boot:run -Dspring.profiles.active=dev`, I have to do this:\r\n\r\n    &lt;plugin&gt;\r\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n        &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\r\n        &lt;configuration&gt;\r\n            &lt;jvmArguments&gt;\r\n                -Dspring.profiles.active=dev\r\n            &lt;/jvmArguments&gt;\r\n        &lt;/configuration&gt;\r\n    &lt;/plugin&gt;","title":"How to use Spring Boot profiles?","body":"<p>Working with Intellij, because I don't know how to set keyboard shortcut to <code>mvn spring-boot:run -Dspring.profiles.active=dev</code>, I have to do this:</p>\n\n<pre><code>&lt;plugin&gt;\n    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n    &lt;configuration&gt;\n        &lt;jvmArguments&gt;\n            -Dspring.profiles.active=dev\n        &lt;/jvmArguments&gt;\n    &lt;/configuration&gt;\n&lt;/plugin&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":284829,"reputation":827,"user_id":583170,"accept_rate":25,"display_name":"harshit2811"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1596395267,"creation_date":1596395267,"answer_id":63220007,"question_id":40060989,"body_markdown":"Use &quot;-Dspring-boot.run.profiles=foo,local&quot; in Intellij IDEA. It&#39;s working. Its sets 2 profiles &quot;foo and local&quot;. \r\n\r\nVerified with boot version &quot;2.3.2.RELEASE&quot; &amp; Intellij IDEA CE 2019.3. \r\n\r\n```\r\n&lt;build&gt;\r\n\t\t&lt;plugins&gt;\r\n\t\t\t&lt;plugin&gt;\r\n\t\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\r\n\t\t\t&lt;/plugin&gt;\r\n\t\t&lt;/plugins&gt;\r\n\t&lt;/build&gt;\r\n\r\n```\r\n\r\n**Setting profile with &quot;mvn spring-boot:run&quot;**\r\n[![enter image description here][1]][1]\r\n\r\n**Setting environment variable**\r\n[![enter image description here][2]][2]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/u5hSu.png\r\n  [2]: https://i.stack.imgur.com/zYQsv.png","title":"How to use Spring Boot profiles?","body":"<p>Use &quot;-Dspring-boot.run.profiles=foo,local&quot; in Intellij IDEA. It's working. Its sets 2 profiles &quot;foo and local&quot;.</p>\n<p>Verified with boot version &quot;2.3.2.RELEASE&quot; &amp; Intellij IDEA CE 2019.3.</p>\n<pre><code>&lt;build&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n\n</code></pre>\n<p><strong>Setting profile with &quot;mvn spring-boot:run&quot;</strong>\n<a href=\"https://i.stack.imgur.com/u5hSu.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/u5hSu.png\" alt=\"enter image description here\" /></a></p>\n<p><strong>Setting environment variable</strong>\n<a href=\"https://i.stack.imgur.com/zYQsv.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/zYQsv.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":[],"owner":{"account_id":2767312,"reputation":348,"user_id":2382717,"display_name":"Randika Hapugoda"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1598380435,"creation_date":1598380435,"answer_id":63585115,"question_id":40060989,"body_markdown":"If your using maven,\r\n```xml\r\n&lt;build&gt;\r\n\t\t&lt;plugins&gt;\r\n\t\t\t&lt;plugin&gt;\r\n\t\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\r\n\t\t\t\t&lt;configuration&gt;\r\n\t\t\t\t\t&lt;profiles&gt;\r\n\t\t\t\t\t\t&lt;profile&gt;dev&lt;/profile&gt;\r\n\t\t\t\t\t&lt;/profiles&gt;\r\n\t\t\t\t&lt;/configuration&gt;\r\n\t\t\t&lt;/plugin&gt;\r\n\t\t&lt;/plugins&gt;\r\n\t&lt;/build&gt;\r\n```\r\nthis set dev as active profile\r\n```bash\r\n./mvnw spring-boot:run\r\n```\r\nwill have dev as active profile.","title":"How to use Spring Boot profiles?","body":"<p>If your using maven,</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;build&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n                &lt;configuration&gt;\n                    &lt;profiles&gt;\n                        &lt;profile&gt;dev&lt;/profile&gt;\n                    &lt;/profiles&gt;\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n</code></pre>\n<p>this set dev as active profile</p>\n<pre class=\"lang-sh prettyprint-override\"><code>./mvnw spring-boot:run\n</code></pre>\n<p>will have dev as active profile.</p>\n"},{"tags":[],"owner":{"account_id":1632225,"reputation":1661,"user_id":1506545,"display_name":"Avec"},"down_vote_count":0,"up_vote_count":37,"is_accepted":false,"score":37,"last_activity_date":1645089756,"creation_date":1605511943,"answer_id":64854119,"question_id":40060989,"body_markdown":"**Since Spring Boot v2+** \r\n\r\nAlternatives below works with Spring Boot v2.0.0 and newer.\r\n\r\n**With Spring Boot Maven Plugin**\r\n\r\nYou can provide [commandline argument][1] like this:\r\n\r\n`mvn spring-boot:run -Dspring-boot.run.arguments=&quot;--spring.profiles.active=dev&quot;`\r\n\r\nYou can provide [JVM argument][2] like this:\r\n\r\n`mvn spring-boot:run -Dspring-boot.run.jvmArguments=&quot;-Dspring.profiles.active=dev&quot;`\r\n\r\n**java -jar**\r\n\r\n`java -Dspring.profiles.active=dev -jar app.jar`\r\n(VM param)\r\n\r\nor\r\n\r\n`java -jar app.jar --spring.profiles.active=dev` (program param)\r\n\r\n**A note on Windows Powershell** \r\n\r\nPowershell will require you to wrap in double quotes like shown here since it otherwise will result in an error because of how it interpret a period:\r\n`java -D&quot;spring.profiles.active=dev&quot; -jar app.jar`\r\n\r\n  [1]: https://docs.spring.io/spring-boot/docs/2.4.0/maven-plugin/reference/htmlsingle/#goals-run-parameters-details-commandlineArguments\r\n  [2]: https://docs.spring.io/spring-boot/docs/2.4.0/maven-plugin/reference/htmlsingle/#goals-run-parameters-details-jvmArguments\r\n  [3]: https://github.com/spring-projects/spring-boot/issues/16819","title":"How to use Spring Boot profiles?","body":"<p><strong>Since Spring Boot v2+</strong></p>\n<p>Alternatives below works with Spring Boot v2.0.0 and newer.</p>\n<p><strong>With Spring Boot Maven Plugin</strong></p>\n<p>You can provide <a href=\"https://docs.spring.io/spring-boot/docs/2.4.0/maven-plugin/reference/htmlsingle/#goals-run-parameters-details-commandlineArguments\" rel=\"noreferrer\">commandline argument</a> like this:</p>\n<p><code>mvn spring-boot:run -Dspring-boot.run.arguments=&quot;--spring.profiles.active=dev&quot;</code></p>\n<p>You can provide <a href=\"https://docs.spring.io/spring-boot/docs/2.4.0/maven-plugin/reference/htmlsingle/#goals-run-parameters-details-jvmArguments\" rel=\"noreferrer\">JVM argument</a> like this:</p>\n<p><code>mvn spring-boot:run -Dspring-boot.run.jvmArguments=&quot;-Dspring.profiles.active=dev&quot;</code></p>\n<p><strong>java -jar</strong></p>\n<p><code>java -Dspring.profiles.active=dev -jar app.jar</code>\n(VM param)</p>\n<p>or</p>\n<p><code>java -jar app.jar --spring.profiles.active=dev</code> (program param)</p>\n<p><strong>A note on Windows Powershell</strong></p>\n<p>Powershell will require you to wrap in double quotes like shown here since it otherwise will result in an error because of how it interpret a period:\n<code>java -D&quot;spring.profiles.active=dev&quot; -jar app.jar</code></p>\n"},{"tags":[],"owner":{"account_id":17571893,"reputation":72,"user_id":12747476,"display_name":"selami tastan"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1608062894,"creation_date":1608062894,"answer_id":65312951,"question_id":40060989,"body_markdown":"\r\nAlternatively, the profile can be directly specified in the application.properties file by adding the line:\r\n\r\nspring.profiles.active=prod\r\n\r\nProfiles work in conjunction with Spring Boot properties files. By default, Spring Boot parses a file called application.properties – located in the src/main/resources directory – to identify configuration information.\r\n\r\nOur first task will be to add a parameter in that file which will tell Spring to use a different environment-specific property file corresponding to the active profile (i.e. the profile that the app is currently being run with). We can do this by adding the following to the application.properties file:\r\n\r\nspring.profiles.active=@activatedProperties@\r\n\r\nNow we need to create the two new environment-specific property files (in the same path as the existing application.properties file), one to be used by the DEV profile and one to be used by the PROD profile. These files need to be named the following:\r\n\r\napplication-dev.properties \r\n\r\napplication-prod.properties\r\n\r\nIn each case, we specify prod as the active profile, which causes the application-prod.properties file to be chosen for configuration purposes.","title":"How to use Spring Boot profiles?","body":"<p>Alternatively, the profile can be directly specified in the application.properties file by adding the line:</p>\n<p>spring.profiles.active=prod</p>\n<p>Profiles work in conjunction with Spring Boot properties files. By default, Spring Boot parses a file called application.properties – located in the src/main/resources directory – to identify configuration information.</p>\n<p>Our first task will be to add a parameter in that file which will tell Spring to use a different environment-specific property file corresponding to the active profile (i.e. the profile that the app is currently being run with). We can do this by adding the following to the application.properties file:</p>\n<p>spring.profiles.active=@activatedProperties@</p>\n<p>Now we need to create the two new environment-specific property files (in the same path as the existing application.properties file), one to be used by the DEV profile and one to be used by the PROD profile. These files need to be named the following:</p>\n<p>application-dev.properties</p>\n<p>application-prod.properties</p>\n<p>In each case, we specify prod as the active profile, which causes the application-prod.properties file to be chosen for configuration purposes.</p>\n"}],"owner":{"account_id":8224865,"reputation":1686,"user_id":6187459,"accept_rate":8,"display_name":"twogoods"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":266111,"favorite_count":0,"down_vote_count":0,"up_vote_count":133,"answer_count":13,"score":133,"last_activity_date":1692297716,"creation_date":1476545949,"question_id":40060989,"body_markdown":"I have the `application.yml`, `application-dev.yml` and `application-dev.yml` files\r\n\r\n 1. I&#39;m using the maven command `mvn spring-boot:run -Dspring.profiles.active=dev` it doesn&#39;t work and I can not choose the `dev` profile using `mvn spring-boot:run`. How do I choose it?\r\n 2. The documentation says `java -jar XXX.jar --spring.profiles.active=dev` works, and I tried `-Dspring.profiles.active=dev` but it does not work. And in my project, I use `java -jar XXX.jar` it runs, but if I use `java -jar XXX.jar --spring.profiles.active=dev` to choose `dev` profile, console print so many logs and warns that I never see used `java -jar XXX.jar`,and tell me `APPLICATION FAILED TO START`  \r\n\r\nSo, how to solve these two problems?\r\n\r\nThanks.\r\n\r\n","title":"How to use Spring Boot profiles?","body":"<p>I have the <code>application.yml</code>, <code>application-dev.yml</code> and <code>application-dev.yml</code> files</p>\n<ol>\n<li>I'm using the maven command <code>mvn spring-boot:run -Dspring.profiles.active=dev</code> it doesn't work and I can not choose the <code>dev</code> profile using <code>mvn spring-boot:run</code>. How do I choose it?</li>\n<li>The documentation says <code>java -jar XXX.jar --spring.profiles.active=dev</code> works, and I tried <code>-Dspring.profiles.active=dev</code> but it does not work. And in my project, I use <code>java -jar XXX.jar</code> it runs, but if I use <code>java -jar XXX.jar --spring.profiles.active=dev</code> to choose <code>dev</code> profile, console print so many logs and warns that I never see used <code>java -jar XXX.jar</code>,and tell me <code>APPLICATION FAILED TO START</code></li>\n</ol>\n<p>So, how to solve these two problems?</p>\n<p>Thanks.</p>\n"},{"tags":["java","spring","spring-boot","yaml"],"comments":[{"owner":{"account_id":70704,"reputation":49430,"user_id":204788,"display_name":"Biju Kunjummen"},"score":0,"creation_date":1435187862,"post_id":31038250,"comment_id":50101284,"body_markdown":"Can you please add your `bootRun` command line also","body":"Can you please add your <code>bootRun</code> command line also"},{"owner":{"account_id":2738653,"reputation":3819,"user_id":2360694,"accept_rate":67,"display_name":"Vinod Mohanan"},"score":1,"creation_date":1435238586,"post_id":31038250,"comment_id":50124235,"body_markdown":"I was running it from eclipse and not command line till now. But I tried running from using &quot;gradle bootRun -Dspring.config.location=C:\\Config\\ -Dspring.profiles.active=staging&quot; and got the same result.","body":"I was running it from eclipse and not command line till now. But I tried running from using &quot;gradle bootRun -Dspring.config.location=C:\\Config\\ -Dspring.profiles.active=staging&quot; and got the same result."}],"answers":[{"tags":[],"owner":{"account_id":6180360,"reputation":1697,"user_id":4816061,"display_name":"jst"},"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1435191455,"creation_date":1435191455,"answer_id":31039253,"question_id":31038250,"body_markdown":"I think your problem is likely related to your spring.config.location not ending the path with &quot;/&quot;.\r\n\r\nQuote the docs\r\n\r\n&gt; If spring.config.location contains directories (as opposed to files) they should end in / (and will be appended with the names generated from spring.config.name before being loaded).\r\n\r\n\r\nhttp://docs.spring.io/spring-boot/docs/current/reference/htmlsingle/#boot-features-external-config-application-property-files","title":"Setting active profile and config location from command line in Spring Boot","body":"<p>I think your problem is likely related to your spring.config.location not ending the path with \"/\".</p>\n\n<p>Quote the docs</p>\n\n<blockquote>\n  <p>If spring.config.location contains directories (as opposed to files) they should end in / (and will be appended with the names generated from spring.config.name before being loaded).</p>\n</blockquote>\n\n<p><a href=\"http://docs.spring.io/spring-boot/docs/current/reference/htmlsingle/#boot-features-external-config-application-property-files\" rel=\"noreferrer\">http://docs.spring.io/spring-boot/docs/current/reference/htmlsingle/#boot-features-external-config-application-property-files</a></p>\n"},{"tags":[],"owner":{"account_id":2738653,"reputation":3819,"user_id":2360694,"accept_rate":67,"display_name":"Vinod Mohanan"},"down_vote_count":2,"up_vote_count":20,"is_accepted":true,"score":18,"last_activity_date":1435255958,"creation_date":1435255958,"answer_id":31057742,"question_id":31038250,"body_markdown":"I had to add this:\r\n\r\n    bootRun {\r\n    \tString activeProfile =  System.properties[&#39;spring.profiles.active&#39;]\r\n    \tString confLoc = System.properties[&#39;spring.config.location&#39;]\r\n    \tsystemProperty &quot;spring.profiles.active&quot;, activeProfile\r\n    \tsystemProperty &quot;spring.config.location&quot;, &quot;file:$confLoc&quot;\r\n    }\r\n\r\nAnd now bootRun picks up the profile and config locations.\r\n\r\nThanks a lot @jst for the pointer.","title":"Setting active profile and config location from command line in Spring Boot","body":"<p>I had to add this:</p>\n\n<pre><code>bootRun {\n    String activeProfile =  System.properties['spring.profiles.active']\n    String confLoc = System.properties['spring.config.location']\n    systemProperty \"spring.profiles.active\", activeProfile\n    systemProperty \"spring.config.location\", \"file:$confLoc\"\n}\n</code></pre>\n\n<p>And now bootRun picks up the profile and config locations.</p>\n\n<p>Thanks a lot @jst for the pointer.</p>\n"},{"tags":[],"owner":{"account_id":6398408,"reputation":403,"user_id":4962008,"display_name":"Michael Yin"},"down_vote_count":6,"up_vote_count":41,"is_accepted":false,"score":35,"last_activity_date":1453769011,"creation_date":1453767709,"answer_id":35004980,"question_id":31038250,"body_markdown":"    -Dspring.profiles.active=staging -Dspring.config.location=C:\\Config\r\n\r\nis not correct.\r\n\r\nshould be:\r\n    \r\n    --spring.profiles.active=staging --spring.config.location=C:\\Config","title":"Setting active profile and config location from command line in Spring Boot","body":"<pre><code>-Dspring.profiles.active=staging -Dspring.config.location=C:\\Config\n</code></pre>\n\n<p>is not correct.</p>\n\n<p>should be:</p>\n\n<pre><code>--spring.profiles.active=staging --spring.config.location=C:\\Config\n</code></pre>\n"},{"tags":[],"owner":{"account_id":353439,"reputation":918,"user_id":691126,"accept_rate":43,"display_name":"Eric Taix"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1525156008,"creation_date":1461451943,"answer_id":36817353,"question_id":31038250,"body_markdown":"Michael Yin&#39;s answer is correct but a better explanation seems to be required!\r\n\r\nA lot of you mentioned that `-D` is the correct way to specify JVM parameters and you are absolutely right. But Michael is also right as mentioned in [Spring Boot Profiles][1] documentation.\r\n\r\nWhat is not clear in the documentation, is what kind of parameter it is: `--spring.profiles.active` is a not a standard JVM parameter so if you want to use it in your IDE fill the correct fields (i.e. program arguments)\r\n\r\n  [1]: https://docs.spring.io/spring-boot/docs/current/reference/html/boot-features-profiles.html","title":"Setting active profile and config location from command line in Spring Boot","body":"<p>Michael Yin's answer is correct but a better explanation seems to be required!</p>\n\n<p>A lot of you mentioned that <code>-D</code> is the correct way to specify JVM parameters and you are absolutely right. But Michael is also right as mentioned in <a href=\"https://docs.spring.io/spring-boot/docs/current/reference/html/boot-features-profiles.html\" rel=\"nofollow noreferrer\">Spring Boot Profiles</a> documentation.</p>\n\n<p>What is not clear in the documentation, is what kind of parameter it is: <code>--spring.profiles.active</code> is a not a standard JVM parameter so if you want to use it in your IDE fill the correct fields (i.e. program arguments)</p>\n"},{"tags":[],"owner":{"account_id":2233945,"reputation":10750,"user_id":1970870,"display_name":"RenRen"},"down_vote_count":0,"up_vote_count":605,"is_accepted":false,"score":605,"last_activity_date":1607858651,"creation_date":1464185219,"answer_id":37439625,"question_id":31038250,"body_markdown":"There are two different ways you can add/override spring properties on the command line.\r\n\r\n### Option 1: Java System Properties (VM Arguments)\r\n\r\nIt&#39;s important that the -D parameters are before your application.jar\r\notherwise they are not recognized.\r\n\r\n\r\n    java -jar -Dspring.profiles.active=prod application.jar\r\n\r\n### Option 2: Program arguments\r\n\r\n```    \r\njava -jar application.jar --spring.profiles.active=prod --spring.config.location=c:\\config\r\n```\r\n\r\n\r\n","title":"Setting active profile and config location from command line in Spring Boot","body":"<p>There are two different ways you can add/override spring properties on the command line.</p>\n<h3>Option 1: Java System Properties (VM Arguments)</h3>\n<p>It's important that the -D parameters are before your application.jar\notherwise they are not recognized.</p>\n<pre><code>java -jar -Dspring.profiles.active=prod application.jar\n</code></pre>\n<h3>Option 2: Program arguments</h3>\n<pre><code>java -jar application.jar --spring.profiles.active=prod --spring.config.location=c:\\config\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1044207,"reputation":507,"user_id":1049537,"accept_rate":25,"display_name":"Rollen Holt"},"down_vote_count":0,"up_vote_count":10,"is_accepted":false,"score":10,"last_activity_date":1466130663,"creation_date":1466130663,"answer_id":37872196,"question_id":31038250,"body_markdown":"you can use the following command line:\r\n\r\n    java -jar -Dspring.profiles.active=[yourProfileName] target/[yourJar].jar","title":"Setting active profile and config location from command line in Spring Boot","body":"<p>you can use the following command line:</p>\n\n<pre><code>java -jar -Dspring.profiles.active=[yourProfileName] target/[yourJar].jar\n</code></pre>\n"},{"tags":[],"owner":{"account_id":42845,"reputation":5288,"user_id":124982,"accept_rate":83,"display_name":"JARC"},"down_vote_count":1,"up_vote_count":9,"is_accepted":false,"score":8,"last_activity_date":1485875163,"creation_date":1485875163,"answer_id":41960870,"question_id":31038250,"body_markdown":"When setting the profile via the **Maven plugin** you must do it via `run.jvmArguments`\r\n\r\n    mvn spring-boot:run -Drun.jvmArguments=&quot;-Dspring.profiles.active=production&quot;\r\n\r\nWith debug option:\r\n\r\n    mvn spring-boot:run -Drun.jvmArguments=&quot;-Xdebug -Xrunjdwp:transport=dt_socket,server=y,suspend=n,address=5005 -Dspring.profiles.active=jpa&quot;\r\n\r\nI&#39;ve seen this trip a lot of people up..hope it helps\r\n","title":"Setting active profile and config location from command line in Spring Boot","body":"<p>When setting the profile via the <strong>Maven plugin</strong> you must do it via <code>run.jvmArguments</code></p>\n\n<pre><code>mvn spring-boot:run -Drun.jvmArguments=\"-Dspring.profiles.active=production\"\n</code></pre>\n\n<p>With debug option:</p>\n\n<pre><code>mvn spring-boot:run -Drun.jvmArguments=\"-Xdebug -Xrunjdwp:transport=dt_socket,server=y,suspend=n,address=5005 -Dspring.profiles.active=jpa\"\n</code></pre>\n\n<p>I've seen this trip a lot of people up..hope it helps</p>\n"},{"tags":[],"owner":{"account_id":6390967,"reputation":454,"user_id":4957149,"display_name":"Rothin Sen"},"down_vote_count":0,"up_vote_count":30,"is_accepted":false,"score":30,"last_activity_date":1644268181,"creation_date":1494932231,"answer_id":43999548,"question_id":31038250,"body_markdown":"There&#39;s another way by setting the **OS** environment variable, **SPRING_PROFILES_ACTIVE**.\r\n\r\nfor eg :\r\n\r\n    SPRING_PROFILES_ACTIVE=dev gradle clean bootRun\r\n\r\nReference : [How to set active Spring profiles](http://docs.spring.io/spring-boot/docs/current-SNAPSHOT/reference/htmlsingle/#howto-set-active-spring-profiles)\r\n","title":"Setting active profile and config location from command line in Spring Boot","body":"<p>There's another way by setting the <strong>OS</strong> environment variable, <strong>SPRING_PROFILES_ACTIVE</strong>.</p>\n<p>for eg :</p>\n<pre><code>SPRING_PROFILES_ACTIVE=dev gradle clean bootRun\n</code></pre>\n<p>Reference : <a href=\"http://docs.spring.io/spring-boot/docs/current-SNAPSHOT/reference/htmlsingle/#howto-set-active-spring-profiles\" rel=\"noreferrer\">How to set active Spring profiles</a></p>\n"},{"tags":[],"owner":{"account_id":8684080,"reputation":3411,"user_id":6499075,"display_name":"Sma Ma"},"down_vote_count":0,"up_vote_count":64,"is_accepted":false,"score":64,"last_activity_date":1604034079,"creation_date":1555361107,"answer_id":55696983,"question_id":31038250,"body_markdown":"My best practice is to define this as a VM &quot;-D&quot; argument. Please note the differences between spring boot 1.x and 2.x.\r\n\r\nThe profiles to enable can be specified on the command line:\r\n\r\nSpring-Boot 2.x (works only with maven)\r\n```\r\n-Dspring-boot.run.profiles=local\r\n``` \r\n\r\nSpring-Boot 1.x\r\n```\r\n-Dspring.profiles.active=local\r\n```\r\n\r\n**example usage with maven:**\r\n\r\nSpring-Boot 2.x\r\n```\r\nmvn spring-boot:run -Dspring-boot.run.profiles=local\r\n``` \r\n\r\nSpring-Boot 1.x and 2.x\r\n```\r\nmvn spring-boot:run -Dspring.profiles.active=local\r\n```\r\n\r\nMake sure to separate them with a comma for multiple profiles:\r\n\r\n```\r\nmvn spring-boot:run -Dspring.profiles.active=local,foo,bar\r\n```\r\n\r\n```\r\nmvn spring-boot:run -Dspring-boot.run.profiles=local,foo,bar\r\n``` \r\n","title":"Setting active profile and config location from command line in Spring Boot","body":"<p>My best practice is to define this as a VM &quot;-D&quot; argument. Please note the differences between spring boot 1.x and 2.x.</p>\n<p>The profiles to enable can be specified on the command line:</p>\n<p>Spring-Boot 2.x (works only with maven)</p>\n<pre><code>-Dspring-boot.run.profiles=local\n</code></pre>\n<p>Spring-Boot 1.x</p>\n<pre><code>-Dspring.profiles.active=local\n</code></pre>\n<p><strong>example usage with maven:</strong></p>\n<p>Spring-Boot 2.x</p>\n<pre><code>mvn spring-boot:run -Dspring-boot.run.profiles=local\n</code></pre>\n<p>Spring-Boot 1.x and 2.x</p>\n<pre><code>mvn spring-boot:run -Dspring.profiles.active=local\n</code></pre>\n<p>Make sure to separate them with a comma for multiple profiles:</p>\n<pre><code>mvn spring-boot:run -Dspring.profiles.active=local,foo,bar\n</code></pre>\n<pre><code>mvn spring-boot:run -Dspring-boot.run.profiles=local,foo,bar\n</code></pre>\n"},{"tags":[],"owner":{"account_id":7237174,"reputation":926,"user_id":5522002,"accept_rate":20,"display_name":"FredFlinstone"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1574847116,"creation_date":1574847116,"answer_id":59067023,"question_id":31038250,"body_markdown":"If you use Gradle:\r\n\r\n    -Pspring.profiles.active=local","title":"Setting active profile and config location from command line in Spring Boot","body":"<p>If you use Gradle:</p>\n\n<pre><code>-Pspring.profiles.active=local\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1626421,"reputation":451,"user_id":1501890,"display_name":"Suneet Khurana"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1601375100,"creation_date":1599292540,"answer_id":63751666,"question_id":31038250,"body_markdown":"We want to automatically pick property file based upon mentioned the profile name in `spring.profiles.active` and the path in `-Dspring.config.location`\r\n\r\n    application-dev.properties\r\n\r\nIf we are running jar in Unix OS then we have to use `/` at the end of `-Dspring.config.location` otherwise it will give below error.\r\n\r\n&gt; Error :: java.lang.IllegalStateException: File extension of config file location &#39;file:/home/xyz/projectName/cfg&#39; is not known to any PropertySourceLoader. If the location is meant to reference a directory, it must end in &#39;/&#39;\r\n\r\nExample\r\n----\r\n\r\n    java -Dspring.profiles.active=dev -Dspring.config.location=/home/xyz/projectName/cfg/ -jar /home/xyz/project/abc.jar\r\n\r\nor\r\n\r\n    java -jar /home/xyz/project/abc.jar --spring.profiles.active=dev --spring.config.location=/home/xyz/projectName/cfg/\r\n\r\n","title":"Setting active profile and config location from command line in Spring Boot","body":"<p>We want to automatically pick property file based upon mentioned the profile name in <code>spring.profiles.active</code> and the path in <code>-Dspring.config.location</code></p>\n<pre><code>application-dev.properties\n</code></pre>\n<p>If we are running jar in Unix OS then we have to use <code>/</code> at the end of <code>-Dspring.config.location</code> otherwise it will give below error.</p>\n<blockquote>\n<p>Error :: java.lang.IllegalStateException: File extension of config file location 'file:/home/xyz/projectName/cfg' is not known to any PropertySourceLoader. If the location is meant to reference a directory, it must end in '/'</p>\n</blockquote>\n<h2>Example</h2>\n<pre><code>java -Dspring.profiles.active=dev -Dspring.config.location=/home/xyz/projectName/cfg/ -jar /home/xyz/project/abc.jar\n</code></pre>\n<p>or</p>\n<pre><code>java -jar /home/xyz/project/abc.jar --spring.profiles.active=dev --spring.config.location=/home/xyz/projectName/cfg/\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1246795,"reputation":421,"user_id":1208060,"accept_rate":100,"display_name":"vinicius gati"},"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1610635614,"creation_date":1610635614,"answer_id":65721190,"question_id":31038250,"body_markdown":"A way that i do this on intellij is setting an environment variable on the command like so:\r\n\r\n[![test setup on intellij][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/EiL0d.png\r\n\r\n\r\nIn this case i am setting the profile to test","title":"Setting active profile and config location from command line in Spring Boot","body":"<p>A way that i do this on intellij is setting an environment variable on the command like so:</p>\n<p><a href=\"https://i.stack.imgur.com/EiL0d.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/EiL0d.png\" alt=\"test setup on intellij\" /></a></p>\n<p>In this case i am setting the profile to test</p>\n"},{"tags":[],"owner":{"account_id":4489017,"reputation":371,"user_id":3650655,"display_name":"user3650655"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1630609620,"creation_date":1630609620,"answer_id":69035844,"question_id":31038250,"body_markdown":"For me helped to add &quot;/&quot; at the end of profiles location.\r\n\r\n&lt;!-- begin snippet: js hide: false console: true babel: false --&gt;\r\n\r\n&lt;!-- language: lang-html --&gt;\r\n\r\n    java -jar myjar.jar --spring.config.additional-location=env/ --spring.profiles.active=prod\r\n\r\n&lt;!-- end snippet --&gt;\r\n\r\n","title":"Setting active profile and config location from command line in Spring Boot","body":"<p>For me helped to add &quot;/&quot; at the end of profiles location.</p>\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>java -jar myjar.jar --spring.config.additional-location=env/ --spring.profiles.active=prod</code></pre>\r\n</div>\r\n</div>\r\n</p>\n"},{"tags":[],"owner":{"account_id":14399098,"reputation":952,"user_id":10401397,"display_name":"O_K"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1646749349,"creation_date":1646749349,"answer_id":71396566,"question_id":31038250,"body_markdown":"I was facing similar issues to run tests with different profiles in command line in springboot. I fixed that by first setting the profile and then running the test command like below :\r\n\r\nStep 1 : export SPRING_PROFILES_ACTIVE=test(for mac/linux) or SET SPRING_PROFILES_ACTIVE=test(for windows)\r\n\r\nStep2 : ./gradlew test --tests &quot;com.maersk.snd.integrationtest.IntegrationTestPOC&quot;\r\n\r\nAbove commands can be clubbed together like below :\r\n\r\nexport SPRING_PROFILES_ACTIVE=test &amp;&amp; ./gradlew test --tests &quot;com.maersk.snd.integrationtest.IntegrationTestPOC&quot;  ","title":"Setting active profile and config location from command line in Spring Boot","body":"<p>I was facing similar issues to run tests with different profiles in command line in springboot. I fixed that by first setting the profile and then running the test command like below :</p>\n<p>Step 1 : export SPRING_PROFILES_ACTIVE=test(for mac/linux) or SET SPRING_PROFILES_ACTIVE=test(for windows)</p>\n<p>Step2 : ./gradlew test --tests &quot;com.maersk.snd.integrationtest.IntegrationTestPOC&quot;</p>\n<p>Above commands can be clubbed together like below :</p>\n<p>export SPRING_PROFILES_ACTIVE=test &amp;&amp; ./gradlew test --tests &quot;com.maersk.snd.integrationtest.IntegrationTestPOC&quot;</p>\n"},{"tags":[],"owner":{"account_id":7864424,"reputation":672,"user_id":5943689,"display_name":"Cozimetzer"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1646797416,"creation_date":1646797416,"answer_id":71404064,"question_id":31038250,"body_markdown":"Just as an addon, if you have a property mentioned in your `application.properties` file and you need to override that property from another config file you can use below property `spring.config.additional-location` (with -D since you pass from command line)\r\nWe used to use this because we have one `application.properties` inside the jar and one external one in each of our servers&#39; config folders, which is used to override any server specific properties.\r\n","title":"Setting active profile and config location from command line in Spring Boot","body":"<p>Just as an addon, if you have a property mentioned in your <code>application.properties</code> file and you need to override that property from another config file you can use below property <code>spring.config.additional-location</code> (with -D since you pass from command line)\nWe used to use this because we have one <code>application.properties</code> inside the jar and one external one in each of our servers' config folders, which is used to override any server specific properties.</p>\n"},{"tags":[],"owner":{"account_id":11602676,"reputation":103,"user_id":8499334,"display_name":"Vivek Singh"},"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1659944529,"creation_date":1659439207,"answer_id":73206679,"question_id":31038250,"body_markdown":"This will fix your problem on windows : \r\n\r\n    mvn spring-boot:run -D&quot;spring-boot.run.profiles&quot;=env","title":"Setting active profile and config location from command line in Spring Boot","body":"<p>This will fix your problem on windows :</p>\n<pre><code>mvn spring-boot:run -D&quot;spring-boot.run.profiles&quot;=env\n</code></pre>\n"}],"owner":{"account_id":2738653,"reputation":3819,"user_id":2360694,"accept_rate":67,"display_name":"Vinod Mohanan"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":574434,"favorite_count":0,"down_vote_count":1,"up_vote_count":317,"accepted_answer_id":31057742,"answer_count":16,"score":316,"last_activity_date":1692297613,"creation_date":1435185011,"question_id":31038250,"body_markdown":"I have a Spring Boot application.\r\n\r\nI have three profiles in my application-&gt; **development, staging and production**. So I have 3 files \r\n\r\n 1. application-development.yml\r\n 2. application-staging.yml\r\n 3. application-production.yml\r\n\r\nMy **application.yml** resides inside `src/main/resources`. I have set the active profile in application.yml as :\r\n\r\n    spring:\r\n      profiles.active: development\r\nThe other 3 profile specific config files are present in `C:\\config` folder. \r\n\r\nI am using gradle plugin for eclipse. When I try to do a &quot;**bootRun**&quot;, I am setting the command line arguments in my gradle configuration in eclipse as \r\n\r\n     -Dspring.profiles.active=staging -Dspring.config.location=C:\\Config\r\n\r\nHowever, the command line property is not getting reflected and my active profile is always getting set as development(which is the one that I have mentioned in the `applications.yml` file). Also *C:\\Config* folder is not searched for profile specific config files.\r\n\r\nI think I am missing something here. I have been trying to figure it out for the  past 2 days. But no luck. I would really appreciate any help.","title":"Setting active profile and config location from command line in Spring Boot","body":"<p>I have a Spring Boot application.</p>\n<p>I have three profiles in my application-&gt; <strong>development, staging and production</strong>. So I have 3 files</p>\n<ol>\n<li>application-development.yml</li>\n<li>application-staging.yml</li>\n<li>application-production.yml</li>\n</ol>\n<p>My <strong>application.yml</strong> resides inside <code>src/main/resources</code>. I have set the active profile in application.yml as :</p>\n<pre><code>spring:\n  profiles.active: development\n</code></pre>\n<p>The other 3 profile specific config files are present in <code>C:\\config</code> folder.</p>\n<p>I am using gradle plugin for eclipse. When I try to do a &quot;<strong>bootRun</strong>&quot;, I am setting the command line arguments in my gradle configuration in eclipse as</p>\n<pre><code> -Dspring.profiles.active=staging -Dspring.config.location=C:\\Config\n</code></pre>\n<p>However, the command line property is not getting reflected and my active profile is always getting set as development(which is the one that I have mentioned in the <code>applications.yml</code> file). Also <em>C:\\Config</em> folder is not searched for profile specific config files.</p>\n<p>I think I am missing something here. I have been trying to figure it out for the  past 2 days. But no luck. I would really appreciate any help.</p>\n"},{"tags":["java","spring","spring-boot","hibernate"],"comments":[{"owner":{"account_id":449256,"reputation":2122,"user_id":843943,"accept_rate":75,"display_name":"Grim"},"score":0,"creation_date":1692343330,"post_id":76924259,"comment_id":135612677,"body_markdown":"In the database, if you have only 1 top-level-comment only, no mentions, no reply but this one comment has 200 attachments, then you will get 200 times the same top-level-comment. Thats how leftjoin works.","body":"In the database, if you have only 1 top-level-comment only, no mentions, no reply but this one comment has 200 attachments, then you will get 200 times the same top-level-comment. Thats how leftjoin works."}],"owner":{"account_id":19541880,"reputation":33,"user_id":14299475,"display_name":"Jan Rojowski"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":37,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1692297385,"creation_date":1692297385,"question_id":76924259,"body_markdown":"I am having the n+1 problem with getting the collection of child entities. Let me share the model it will be easier to understand. These are comments and replies both having collection of attachments.\r\nThis is abstract Comment class having @ElementCollection of attachments:\r\n```@Entity\r\n@Data\r\n@AllArgsConstructor\r\n@NoArgsConstructor\r\n@EntityListeners(AuditingEntityListener.class)\r\n@Inheritance(strategy = InheritanceType.TABLE_PER_CLASS)\r\npublic abstract class Comment {\r\n\r\n    @Id\r\n    @UuidGenerator\r\n    @GeneratedValue(strategy = GenerationType.UUID)\r\n    @JdbcTypeCode(SqlTypes.VARCHAR)\r\n    private UUID id;\r\n\r\n    @ElementCollection(fetch = FetchType.EAGER)\r\n    @Column(name = &quot;attachment&quot;)\r\n    private Set&lt;String&gt; attachments;\r\n```\r\n\r\nTopLevelComment class which models high level comment:\r\n```\r\n@Entity\r\npublic class TopLevelComment extends Comment {\r\n\r\n    @OneToMany(mappedBy = &quot;parentComment&quot;, fetch = FetchType.EAGER)\r\n    @Getter(AccessLevel.NONE)\r\n    private Set&lt;Reply&gt; replies = new HashSet&lt;&gt;();\r\n```\r\nReply class which models the reply to TopLevelComment:\r\n```\r\n@Entity\r\n@Getter\r\n@Setter\r\npublic class Reply extends Comment {\r\n\r\n    @ManyToOne(cascade = CascadeType.PERSIST)\r\n    @JoinColumn(name = &quot;parent_comment_id&quot;)\r\n    private Comment parentComment;\r\n}\r\n```\r\nNow I use this service method to get the TopLevelComments with selected Ids, and I want to fetch also the replies and the attachments for both levels:\r\n```\r\npublic List&lt;CommentDto&gt; getCommentsForObject(UUID commentedObjectId) {\r\n    return topLevelCommentRepository.getAllByIdIn(ids)\r\n            .stream()\r\n            .map(c -&gt; mapper.map(c, CommentDto.class))\r\n            .sorted(Comparator.comparing(CommentDto::getCreated))\r\n            .toList();\r\n}\r\n```\r\nAnd this is a custom @Query that I use to fetch it from database:\r\n```\r\n@Query(&quot;&quot;&quot;\r\n       SELECT c\r\n       from TopLevelComment c\r\n       left join fetch c.replies\r\n       left join fetch c.attachments\r\n       left join fetch c.mentions\r\n       WHERE c.id in :ids\r\n       &quot;&quot;&quot;)\r\nList&lt;TopLevelComment&gt; getAllByIdIn(List&lt;UUID&gt; ids);\r\n```\r\n\r\nNow in the database I do have one comment which has 2 replies. If I use the following method I got such queries executed by Hibernate:\r\n```\r\nHibernate: \r\n    select\r\n        t1_0.id,\r\n        a1_0.comment_id,\r\n        a1_0.attachment,\r\n        t1_0.commented_object_id,\r\n        r1_0.parent_comment_id,\r\n        r1_0.id,\r\n        r1_0.commented_object_id,\r\n    from\r\n        top_level_comment t1_0 \r\n    left join\r\n        reply r1_0 \r\n            on t1_0.id=r1_0.parent_comment_id \r\n    left join\r\n        comment_attachments a1_0 \r\n            on t1_0.id=a1_0.comment_id \r\n    where\r\n        t1_0.id in(?)\r\nHibernate: \r\n    select\r\n        a1_0.comment_id,\r\n        a1_0.attachment \r\n    from\r\n        comment_attachments a1_0 \r\n    where\r\n        a1_0.comment_id=?\r\nHibernate: \r\n    select\r\n        a1_0.comment_id,\r\n        a1_0.attachment \r\n    from\r\n        comment_attachments a1_0 \r\n    where\r\n        a1_0.comment_id=?\r\n```\r\n\r\nSo it generates one query in which it fetches correctly replies and attachments for the TopLevelCommnent but then it does n queries to fetch attachments for each n replies that I have :(\r\n\r\n```\r\n@Query(&quot;&quot;&quot;\r\n       SELECT c\r\n       from TopLevelComment c\r\n       left join fetch c.replies r\r\n       left join fetch c.attachments\r\n       left join fetch c.mentions\r\n       left join fetch r.attachments\r\n       WHERE c.id in :ids\r\n       &quot;&quot;&quot;)\r\nList&lt;TopLevelComment&gt; getAllByIdIn(List&lt;UUID&gt; ids);\r\n```\r\nSuch query also gives the same number of n+1 queries :(\r\n\r\nSo the question is the following: is it even feasible to somehow avoid the n+1?\r\nThanks in advance for your help!","title":"Hibernate n+1 problem with collection property of child entities","body":"<p>I am having the n+1 problem with getting the collection of child entities. Let me share the model it will be easier to understand. These are comments and replies both having collection of attachments.\nThis is abstract Comment class having @ElementCollection of attachments:</p>\n<pre><code>@Data\n@AllArgsConstructor\n@NoArgsConstructor\n@EntityListeners(AuditingEntityListener.class)\n@Inheritance(strategy = InheritanceType.TABLE_PER_CLASS)\npublic abstract class Comment {\n\n    @Id\n    @UuidGenerator\n    @GeneratedValue(strategy = GenerationType.UUID)\n    @JdbcTypeCode(SqlTypes.VARCHAR)\n    private UUID id;\n\n    @ElementCollection(fetch = FetchType.EAGER)\n    @Column(name = &quot;attachment&quot;)\n    private Set&lt;String&gt; attachments;\n</code></pre>\n<p>TopLevelComment class which models high level comment:</p>\n<pre><code>@Entity\npublic class TopLevelComment extends Comment {\n\n    @OneToMany(mappedBy = &quot;parentComment&quot;, fetch = FetchType.EAGER)\n    @Getter(AccessLevel.NONE)\n    private Set&lt;Reply&gt; replies = new HashSet&lt;&gt;();\n</code></pre>\n<p>Reply class which models the reply to TopLevelComment:</p>\n<pre><code>@Entity\n@Getter\n@Setter\npublic class Reply extends Comment {\n\n    @ManyToOne(cascade = CascadeType.PERSIST)\n    @JoinColumn(name = &quot;parent_comment_id&quot;)\n    private Comment parentComment;\n}\n</code></pre>\n<p>Now I use this service method to get the TopLevelComments with selected Ids, and I want to fetch also the replies and the attachments for both levels:</p>\n<pre><code>public List&lt;CommentDto&gt; getCommentsForObject(UUID commentedObjectId) {\n    return topLevelCommentRepository.getAllByIdIn(ids)\n            .stream()\n            .map(c -&gt; mapper.map(c, CommentDto.class))\n            .sorted(Comparator.comparing(CommentDto::getCreated))\n            .toList();\n}\n</code></pre>\n<p>And this is a custom @Query that I use to fetch it from database:</p>\n<pre><code>@Query(&quot;&quot;&quot;\n       SELECT c\n       from TopLevelComment c\n       left join fetch c.replies\n       left join fetch c.attachments\n       left join fetch c.mentions\n       WHERE c.id in :ids\n       &quot;&quot;&quot;)\nList&lt;TopLevelComment&gt; getAllByIdIn(List&lt;UUID&gt; ids);\n</code></pre>\n<p>Now in the database I do have one comment which has 2 replies. If I use the following method I got such queries executed by Hibernate:</p>\n<pre><code>Hibernate: \n    select\n        t1_0.id,\n        a1_0.comment_id,\n        a1_0.attachment,\n        t1_0.commented_object_id,\n        r1_0.parent_comment_id,\n        r1_0.id,\n        r1_0.commented_object_id,\n    from\n        top_level_comment t1_0 \n    left join\n        reply r1_0 \n            on t1_0.id=r1_0.parent_comment_id \n    left join\n        comment_attachments a1_0 \n            on t1_0.id=a1_0.comment_id \n    where\n        t1_0.id in(?)\nHibernate: \n    select\n        a1_0.comment_id,\n        a1_0.attachment \n    from\n        comment_attachments a1_0 \n    where\n        a1_0.comment_id=?\nHibernate: \n    select\n        a1_0.comment_id,\n        a1_0.attachment \n    from\n        comment_attachments a1_0 \n    where\n        a1_0.comment_id=?\n</code></pre>\n<p>So it generates one query in which it fetches correctly replies and attachments for the TopLevelCommnent but then it does n queries to fetch attachments for each n replies that I have :(</p>\n<pre><code>@Query(&quot;&quot;&quot;\n       SELECT c\n       from TopLevelComment c\n       left join fetch c.replies r\n       left join fetch c.attachments\n       left join fetch c.mentions\n       left join fetch r.attachments\n       WHERE c.id in :ids\n       &quot;&quot;&quot;)\nList&lt;TopLevelComment&gt; getAllByIdIn(List&lt;UUID&gt; ids);\n</code></pre>\n<p>Such query also gives the same number of n+1 queries :(</p>\n<p>So the question is the following: is it even feasible to somehow avoid the n+1?\nThanks in advance for your help!</p>\n"},{"tags":["java","twilio","whatsapp"],"answers":[{"tags":[],"owner":{"account_id":13978,"reputation":71446,"user_id":28376,"accept_rate":86,"display_name":"philnash"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1633911295,"creation_date":1633911295,"answer_id":69519864,"question_id":69493926,"body_markdown":"Twilio developer evangelist here.\r\n\r\nCurrently, as you have read, the [Twilio API for WhatsApp only supports adding buttons to messages via templates][1].\r\n\r\n\r\n  [1]: https://www.twilio.com/docs/whatsapp/buttons","title":"In Twilio, How can I use Whatsapp buttons or list option in 24hour session without using message templates","body":"<p>Twilio developer evangelist here.</p>\n<p>Currently, as you have read, the <a href=\"https://www.twilio.com/docs/whatsapp/buttons\" rel=\"nofollow noreferrer\">Twilio API for WhatsApp only supports adding buttons to messages via templates</a>.</p>\n"}],"owner":{"account_id":22879868,"reputation":1,"user_id":17021619,"display_name":"Chandra"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":907,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1692297339,"creation_date":1633686691,"question_id":69493926,"body_markdown":"In Twilio, How can I use Whatsapp buttons or list option in 24hour session without using message templates?&lt;br/&gt;\r\n\r\nThis is the exact [reference](https://developers.facebook.com/docs/whatsapp/guides/interactive-messages) that I am planning to implement. In this page, it doesn&#39;t mandate that I have to have message templates to implement interactive messaging.\r\n\r\nBut, in Twilio, I read it as messaging template is mandatory for Button/Quick Reply use cases in Twilio [documentation](https://www.twilio.com/docs/whatsapp/buttons?code-sample=code-send-a-whatsapp-message-with-buttons&amp;code-language=Java&amp;code-sdk-version=8.x#creating-templates-with-buttons)\r\n\r\nIs it possible to implement interactive messaging as described in [whatsapp documentation](https://developers.facebook.com/docs/whatsapp/guides/interactive-messages), with list options or buttons without the message templates using Twilio Java SDK? If Yes, please throw some light on the usage or share links of any such examples or any references.\r\n\r\nRegards,&lt;br/&gt;\r\nChandra","title":"In Twilio, How can I use Whatsapp buttons or list option in 24hour session without using message templates","body":"<p>In Twilio, How can I use Whatsapp buttons or list option in 24hour session without using message templates?<br/></p>\n<p>This is the exact <a href=\"https://developers.facebook.com/docs/whatsapp/guides/interactive-messages\" rel=\"nofollow noreferrer\">reference</a> that I am planning to implement. In this page, it doesn't mandate that I have to have message templates to implement interactive messaging.</p>\n<p>But, in Twilio, I read it as messaging template is mandatory for Button/Quick Reply use cases in Twilio <a href=\"https://www.twilio.com/docs/whatsapp/buttons?code-sample=code-send-a-whatsapp-message-with-buttons&amp;code-language=Java&amp;code-sdk-version=8.x#creating-templates-with-buttons\" rel=\"nofollow noreferrer\">documentation</a></p>\n<p>Is it possible to implement interactive messaging as described in <a href=\"https://developers.facebook.com/docs/whatsapp/guides/interactive-messages\" rel=\"nofollow noreferrer\">whatsapp documentation</a>, with list options or buttons without the message templates using Twilio Java SDK? If Yes, please throw some light on the usage or share links of any such examples or any references.</p>\n<p>Regards,<br/>\nChandra</p>\n"},{"tags":["java","spring-boot","hibernate"],"answers":[{"tags":[],"owner":{"account_id":6085540,"reputation":22133,"user_id":4751173,"display_name":"Glorfindel"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1692297261,"creation_date":1692296885,"answer_id":76924222,"question_id":76893504,"body_markdown":"After some more experimenting, I discovered that Spring will [*automatically* rollback all changes after completing a test method](https://stackoverflow.com/a/12626636/4751173), which I totally did not expect, given the SQL `INSERT` and `DELETE` statements I saw in the application log. I should&#39;ve known they were executed after a `BEGIN TRANSACTION`, but could not easily check the results because I&#39;m using HSQLDB for the unit tests without a management tool. And I have other &#39;unit tests&#39; in the project (not marked `@Transactional`, and a different database connection in the properties file) to generate some bootstrap data in a PostgreSQL database, which work as expected and do persist data.\r\n\r\nSo for now I&#39;ll just end the test without\r\n```\r\nAssert.assertEquals(1, countryRepository.count());\r\n```\r\nhoping I won&#39;t be stupid enough to catch `DataIntegrityViolationException`s in my main code...","title":"How can I rollback deleting an object which failed after flushing a JpaRepository?","body":"<p>After some more experimenting, I discovered that Spring will <a href=\"https://stackoverflow.com/a/12626636/4751173\"><em>automatically</em> rollback all changes after completing a test method</a>, which I totally did not expect, given the SQL <code>INSERT</code> and <code>DELETE</code> statements I saw in the application log. I should've known they were executed after a <code>BEGIN TRANSACTION</code>, but could not easily check the results because I'm using HSQLDB for the unit tests without a management tool. And I have other 'unit tests' in the project (not marked <code>@Transactional</code>, and a different database connection in the properties file) to generate some bootstrap data in a PostgreSQL database, which work as expected and do persist data.</p>\n<p>So for now I'll just end the test without</p>\n<pre><code>Assert.assertEquals(1, countryRepository.count());\n</code></pre>\n<p>hoping I won't be stupid enough to catch <code>DataIntegrityViolationException</code>s in my main code...</p>\n"}],"owner":{"account_id":6085540,"reputation":22133,"user_id":4751173,"display_name":"Glorfindel"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":35,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76924222,"answer_count":1,"score":0,"last_activity_date":1692297261,"creation_date":1691932340,"question_id":76893504,"body_markdown":"I&#39;m trying to tweak the delete behaviour of the domain model of my application. Let&#39;s say I have Countries and Regions, and Countries should not be deleted if they have any Regions. The other classes / configuration will follow below, but the following code should test that. `countryRepository.flush();` throws a `DataIntegrityViolationException`, as expected, but the final call to `countryRepository.count()` throws the same Exception. In the logs you can see it&#39;s trying to execute the DELETE SQL command again.\r\n\r\nI was hoping on the `@Transactional` to rollback the situation, but apparently it doesn&#39;t - perhaps because it&#39;s caught by `assertThrows`?\r\n\r\n```\r\n@SpringBootTest\r\n@SpringBootApplication\r\n@TestPropertySource(locations = &quot;classpath:unit-tests.properties&quot;)\r\n@Transactional\r\npublic class Tests {\r\n\t@Autowired\r\n\tprivate CountryRepository countryRepository;\r\n\r\n\t@Autowired\r\n\tprivate RegionRepository regionRepository;\r\n\r\n\t@Test\r\n\tpublic void preventDeleteOfUsedObjects() {\r\n\t\t// Create objects\r\n\t\tCountry country = new Country();\r\n\t\tcountry.name = &quot;United Status&quot;;\r\n\t\tcountryRepository.save(country);\r\n\t\tcountryRepository.flush();\r\n\t\tRegion region = new Region();\r\n\t\tregion.name = &quot;California&quot;;\r\n\t\tregion.country = country;\r\n\t\tregionRepository.save(region);\r\n\t\tregionRepository.flush();\r\n\r\n\t\t// Deleting used countries should not be possible\r\n\t\tAssertions.assertThrows(DataIntegrityViolationException.class, () -&gt; {\r\n\t\t\tcountryRepository.delete(country);\r\n\t\t\tcountryRepository.flush();\r\n\t\t});\r\n\r\n\t\tAssert.assertEquals(1, countryRepository.count());\r\n\t}\r\n}\r\n```\r\n\r\nThe data model:\r\n```\r\n@Entity\r\n@Table(name = &quot;countries&quot;)\r\npublic class Country {\r\n\t@Id\r\n\tpublic String name;\r\n}\r\n```\r\n```\r\n@Entity\r\n@Table(name = &quot;regions&quot;)\r\npublic class Region {\r\n\t@Id\r\n\tpublic String name;\r\n\r\n\t@ManyToOne\r\n\tpublic Country country;\r\n}\r\n```\r\nthe corresponding repositories:\r\n```\r\npublic interface CountryRepository extends JpaRepository&lt;Country, String&gt; {\r\n}\r\n```\r\n```\r\npublic interface RegionRepository extends JpaRepository&lt;Region, String&gt; {\r\n}\r\n```\r\nunit-tests.properties:\r\n```none\r\nspring.datasource.url=jdbc:hsqldb:mem:model;sql.syntax_pgs=true\r\nspring.datasource.username=sa\r\nspring.datasource.password=\r\nspring.datasource.driver-class-name=org.hsqldb.jdbcDriver\r\nspring.jackson.default-property-inclusion=non_null\r\nspring.jpa.hibernate.ddl-auto=create\r\nspring.jpa.hibernate.naming.physical-strategy=org.hibernate.boot.model.naming.PhysicalNamingStrategyStandardImpl\r\nlogging.level.org.hibernate.SQL=DEBUG\r\nlogging.level.org.hibernate.type.descriptor.sql.BasicBinder=TRACE\r\nlogging.level.root=INFO\r\n```\r\npom.xml:\r\n```xml\r\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;\r\n\txmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n\txsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n\t&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n\t&lt;parent&gt;\r\n\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t&lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n\t\t&lt;version&gt;2.6.6&lt;/version&gt;\r\n\t\t&lt;relativePath/&gt;\r\n\t&lt;/parent&gt;\r\n\t&lt;artifactId&gt;example&lt;/artifactId&gt;\r\n\t&lt;name&gt;example&lt;/name&gt;\r\n\t&lt;properties&gt;\r\n\t\t&lt;maven.compiler.release&gt;11&lt;/maven.compiler.release&gt;\r\n\t&lt;/properties&gt;\r\n\t&lt;dependencies&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.hibernate&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;hibernate-core&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\r\n\t\t\t&lt;scope&gt;test&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n        \t&lt;groupId&gt;junit&lt;/groupId&gt;\r\n        \t&lt;artifactId&gt;junit&lt;/artifactId&gt;\r\n        \t&lt;scope&gt;test&lt;/scope&gt;\r\n    \t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.hsqldb&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;hsqldb&lt;/artifactId&gt;\r\n\t\t\t&lt;scope&gt;test&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t&lt;/dependencies&gt;\r\n&lt;/project&gt;\r\n```","title":"How can I rollback deleting an object which failed after flushing a JpaRepository?","body":"<p>I'm trying to tweak the delete behaviour of the domain model of my application. Let's say I have Countries and Regions, and Countries should not be deleted if they have any Regions. The other classes / configuration will follow below, but the following code should test that. <code>countryRepository.flush();</code> throws a <code>DataIntegrityViolationException</code>, as expected, but the final call to <code>countryRepository.count()</code> throws the same Exception. In the logs you can see it's trying to execute the DELETE SQL command again.</p>\n<p>I was hoping on the <code>@Transactional</code> to rollback the situation, but apparently it doesn't - perhaps because it's caught by <code>assertThrows</code>?</p>\n<pre><code>@SpringBootTest\n@SpringBootApplication\n@TestPropertySource(locations = &quot;classpath:unit-tests.properties&quot;)\n@Transactional\npublic class Tests {\n    @Autowired\n    private CountryRepository countryRepository;\n\n    @Autowired\n    private RegionRepository regionRepository;\n\n    @Test\n    public void preventDeleteOfUsedObjects() {\n        // Create objects\n        Country country = new Country();\n        country.name = &quot;United Status&quot;;\n        countryRepository.save(country);\n        countryRepository.flush();\n        Region region = new Region();\n        region.name = &quot;California&quot;;\n        region.country = country;\n        regionRepository.save(region);\n        regionRepository.flush();\n\n        // Deleting used countries should not be possible\n        Assertions.assertThrows(DataIntegrityViolationException.class, () -&gt; {\n            countryRepository.delete(country);\n            countryRepository.flush();\n        });\n\n        Assert.assertEquals(1, countryRepository.count());\n    }\n}\n</code></pre>\n<p>The data model:</p>\n<pre><code>@Entity\n@Table(name = &quot;countries&quot;)\npublic class Country {\n    @Id\n    public String name;\n}\n</code></pre>\n<pre><code>@Entity\n@Table(name = &quot;regions&quot;)\npublic class Region {\n    @Id\n    public String name;\n\n    @ManyToOne\n    public Country country;\n}\n</code></pre>\n<p>the corresponding repositories:</p>\n<pre><code>public interface CountryRepository extends JpaRepository&lt;Country, String&gt; {\n}\n</code></pre>\n<pre><code>public interface RegionRepository extends JpaRepository&lt;Region, String&gt; {\n}\n</code></pre>\n<p>unit-tests.properties:</p>\n<pre class=\"lang-none prettyprint-override\"><code>spring.datasource.url=jdbc:hsqldb:mem:model;sql.syntax_pgs=true\nspring.datasource.username=sa\nspring.datasource.password=\nspring.datasource.driver-class-name=org.hsqldb.jdbcDriver\nspring.jackson.default-property-inclusion=non_null\nspring.jpa.hibernate.ddl-auto=create\nspring.jpa.hibernate.naming.physical-strategy=org.hibernate.boot.model.naming.PhysicalNamingStrategyStandardImpl\nlogging.level.org.hibernate.SQL=DEBUG\nlogging.level.org.hibernate.type.descriptor.sql.BasicBinder=TRACE\nlogging.level.root=INFO\n</code></pre>\n<p>pom.xml:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;\n    xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n    xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n    &lt;parent&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n        &lt;version&gt;2.6.6&lt;/version&gt;\n        &lt;relativePath/&gt;\n    &lt;/parent&gt;\n    &lt;artifactId&gt;example&lt;/artifactId&gt;\n    &lt;name&gt;example&lt;/name&gt;\n    &lt;properties&gt;\n        &lt;maven.compiler.release&gt;11&lt;/maven.compiler.release&gt;\n    &lt;/properties&gt;\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.hibernate&lt;/groupId&gt;\n            &lt;artifactId&gt;hibernate-core&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;junit&lt;/groupId&gt;\n            &lt;artifactId&gt;junit&lt;/artifactId&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.hsqldb&lt;/groupId&gt;\n            &lt;artifactId&gt;hsqldb&lt;/artifactId&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n&lt;/project&gt;\n</code></pre>\n"},{"tags":["java","spring-boot"],"comments":[{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1692190771,"post_id":76913785,"comment_id":135589956,"body_markdown":"Please include the imports and packages in your sources, as well specify which Spring Boot version you are using (or rather post your dependencies).","body":"Please include the imports and packages in your sources, as well specify which Spring Boot version you are using (or rather post your dependencies)."},{"owner":{"account_id":3097035,"reputation":1105,"user_id":2622026,"accept_rate":71,"display_name":"hermit"},"score":0,"creation_date":1692191591,"post_id":76913785,"comment_id":135590184,"body_markdown":"Did you miss @Entity annotation in Tmsdata.java by any chance?","body":"Did you miss @Entity annotation in Tmsdata.java by any chance?"}],"answers":[{"tags":[],"owner":{"account_id":17834484,"reputation":1,"user_id":12953783,"display_name":"mohamad allan"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1692296979,"creation_date":1692193038,"answer_id":76914135,"question_id":76913785,"body_markdown":"You need to add annotation `@Entity` to your entity class\r\n\r\nTry the following :\r\n\r\n```java\r\n@Entity\r\npublic class Tmsdata {\r\n  @Id\r\n  private Long record_id;\r\n}\r\n```\r\n\r\nIf you want to add a name for the table add `@Table` annotation like so:\r\n\r\n```java\r\n@Entity\r\n@Table(name = &quot;your-table-name&quot;)\r\npublic class Tmsdata {\r\n  @Id\r\n  private Long record_id;\r\n}\r\n```","title":"SpringBoot JPA data access App doesn&#39;t recognise Repository type","body":"<p>You need to add annotation <code>@Entity</code> to your entity class</p>\n<p>Try the following :</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Entity\npublic class Tmsdata {\n  @Id\n  private Long record_id;\n}\n</code></pre>\n<p>If you want to add a name for the table add <code>@Table</code> annotation like so:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Entity\n@Table(name = &quot;your-table-name&quot;)\npublic class Tmsdata {\n  @Id\n  private Long record_id;\n}\n</code></pre>\n"}],"owner":{"account_id":423223,"reputation":5101,"user_id":802482,"accept_rate":67,"display_name":"Black"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":21,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1692296979,"creation_date":1692190644,"question_id":76913785,"body_markdown":"\r\nI&#39;ve written a basic SpringBoot web app using Java 8 to read tuples from a table called Tmsdata.\r\n\r\n\r\n\r\nSyncApplication.java:\r\n\r\n    @SpringBootApplication\r\n    public class SyncApplication {\r\n\r\n      public static void main(String[] args) {\r\n        SpringApplication.run(SyncApplication.class, args);\r\n      }\r\n    }\r\n\r\nSyncController.java:\r\n\r\n    @Controller\r\n    public class SyncController {\r\n\r\n      @Autowired\r\n      private TmsdataService tmsdataService;\r\n\r\n\r\n      @GetMapping(&quot;/&quot;)\r\n      @ResponseBody\r\n      public String default() {\r\n\r\n        List&lt;Tmsdata&gt; a = tmsdataService.findAll();\r\n\r\n        return &quot;{ message: &#39;OK&#39;, count: &quot; + a.size() + &quot; }&quot;;\r\n      }\r\n \r\n    }\r\n\r\nTmsdataRepository.java:\r\n\r\n    @Repository\r\n    public interface TmsdataRepository extends JpaRepository&lt;Tmsdata, Long&gt; {\r\n        // Define custom query methods if needed\r\n\r\n    }\r\n\r\nTmsdataService:\r\n\r\n    @Service\r\n    public class TmsdataService {\r\n\r\n      @Autowired\r\n      private TmsdataRepository tmsdataRepository;\r\n\r\n      public List&lt;Tmsdata&gt; findAll() {\r\n\r\n        List&lt;Tmsdata&gt; a = tmsdataRepository.findAll();\r\n\r\n        return a;\r\n      }\r\n\r\n    }\r\n\r\nTmsdata.java:\r\n\r\n    public class Tmsdata {\r\n      @Id\r\n      private Long record_id;\r\n    }\r\n\r\n\r\nWhen I compile the project there are no issues, but when I do `mvn spring-boot:run` I get the following error:\r\n\r\n    ***************************\r\n    APPLICATION FAILED TO START\r\n    ***************************\r\n    Description:\r\n    Field tmsdataRepository in com.company.sync.TmsdataService required a bean of type &#39;com.company.sync.TmsdataRepository&#39; that could not be found.\r\n    The injection point has the following annotations:\r\n    - @org.springframework.beans.factory.annotation.Autowired(required=true)\r\n    Action:\r\n    Consider defining a bean of type &#39;com.company.sync.TmsdataRepository&#39; in your configuration.\r\n\r\n\r\nAs you can see I already have defined the JPA Repository with that name.  What else could be going on here?\r\n","title":"SpringBoot JPA data access App doesn&#39;t recognise Repository type","body":"<p>I've written a basic SpringBoot web app using Java 8 to read tuples from a table called Tmsdata.</p>\n<p>SyncApplication.java:</p>\n<pre><code>@SpringBootApplication\npublic class SyncApplication {\n\n  public static void main(String[] args) {\n    SpringApplication.run(SyncApplication.class, args);\n  }\n}\n</code></pre>\n<p>SyncController.java:</p>\n<pre><code>@Controller\npublic class SyncController {\n\n  @Autowired\n  private TmsdataService tmsdataService;\n\n\n  @GetMapping(&quot;/&quot;)\n  @ResponseBody\n  public String default() {\n\n    List&lt;Tmsdata&gt; a = tmsdataService.findAll();\n\n    return &quot;{ message: 'OK', count: &quot; + a.size() + &quot; }&quot;;\n  }\n\n}\n</code></pre>\n<p>TmsdataRepository.java:</p>\n<pre><code>@Repository\npublic interface TmsdataRepository extends JpaRepository&lt;Tmsdata, Long&gt; {\n    // Define custom query methods if needed\n\n}\n</code></pre>\n<p>TmsdataService:</p>\n<pre><code>@Service\npublic class TmsdataService {\n\n  @Autowired\n  private TmsdataRepository tmsdataRepository;\n\n  public List&lt;Tmsdata&gt; findAll() {\n\n    List&lt;Tmsdata&gt; a = tmsdataRepository.findAll();\n\n    return a;\n  }\n\n}\n</code></pre>\n<p>Tmsdata.java:</p>\n<pre><code>public class Tmsdata {\n  @Id\n  private Long record_id;\n}\n</code></pre>\n<p>When I compile the project there are no issues, but when I do <code>mvn spring-boot:run</code> I get the following error:</p>\n<pre><code>***************************\nAPPLICATION FAILED TO START\n***************************\nDescription:\nField tmsdataRepository in com.company.sync.TmsdataService required a bean of type 'com.company.sync.TmsdataRepository' that could not be found.\nThe injection point has the following annotations:\n- @org.springframework.beans.factory.annotation.Autowired(required=true)\nAction:\nConsider defining a bean of type 'com.company.sync.TmsdataRepository' in your configuration.\n</code></pre>\n<p>As you can see I already have defined the JPA Repository with that name.  What else could be going on here?</p>\n"},{"tags":["java","yaml","filtering"],"comments":[{"owner":{"account_id":29073167,"reputation":1013,"user_id":22270964,"display_name":"Maksim Eliseev"},"score":0,"creation_date":1692290646,"post_id":76923309,"comment_id":135606456,"body_markdown":"Can you clerify the input and the output of the function?","body":"Can you clerify the input and the output of the function?"},{"owner":{"account_id":27699053,"reputation":2348,"user_id":21144042,"display_name":"Diego Borba"},"score":0,"creation_date":1692291109,"post_id":76923309,"comment_id":135606562,"body_markdown":"What is the Java and dependencies version?","body":"What is the Java and dependencies version?"},{"owner":{"account_id":24371439,"reputation":13,"user_id":18304329,"display_name":"izzzzthewiz"},"score":0,"creation_date":1692291744,"post_id":76923309,"comment_id":135606690,"body_markdown":"@DiegoBorba Java corretto-17.0.7 and only dependencies in my Maven project (if that&#39;s what you mean) are io.papermc.paper.paper-api v1.20.1-R0.1-SNAPSHOT and com.github.MilkBowl.VaultAPI v1.7","body":"@DiegoBorba Java corretto-17.0.7 and only dependencies in my Maven project (if that&#39;s what you mean) are io.papermc.paper.paper-api v1.20.1-R0.1-SNAPSHOT and com.github.MilkBowl.VaultAPI v1.7"},{"owner":{"account_id":24371439,"reputation":13,"user_id":18304329,"display_name":"izzzzthewiz"},"score":0,"creation_date":1692291811,"post_id":76923309,"comment_id":135606708,"body_markdown":"@MaksimEliseev I&#39;m not sure what you mean","body":"@MaksimEliseev I&#39;m not sure what you mean"},{"owner":{"account_id":27699053,"reputation":2348,"user_id":21144042,"display_name":"Diego Borba"},"score":0,"creation_date":1692294307,"post_id":76923309,"comment_id":135607216,"body_markdown":"Please add your `pom` to the question","body":"Please add your <code>pom</code> to the question"}],"answers":[{"tags":[],"owner":{"account_id":24371439,"reputation":13,"user_id":18304329,"display_name":"izzzzthewiz"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1692293093,"creation_date":1692293093,"answer_id":76923840,"question_id":76923309,"body_markdown":"After tinkering a bit, I found that I can use 2 methods - one essentially the same as the first and one to loop that function until nothing else can be added. Here is a link to the code - https://www.jdoodle.com/ia/KUJ","title":"Is there a filtering function to find links between lists in maps?","body":"<p>After tinkering a bit, I found that I can use 2 methods - one essentially the same as the first and one to loop that function until nothing else can be added. Here is a link to the code - <a href=\"https://www.jdoodle.com/ia/KUJ\" rel=\"nofollow noreferrer\">https://www.jdoodle.com/ia/KUJ</a></p>\n"},{"tags":[],"owner":{"account_id":27699053,"reputation":2348,"user_id":21144042,"display_name":"Diego Borba"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1692296227,"creation_date":1692296227,"answer_id":76924164,"question_id":76923309,"body_markdown":"&gt; After tinkering a bit, I found that I can use 2 methods - one\r\n&gt; essentially the same as the first and one to loop that function until\r\n&gt; nothing else can be added. Here is a link to the code -\r\n&gt; https://www.jdoodle.com/ia/KUJ\r\n\r\nConsidering your solution, I improved your code:\r\n\r\n```java\r\npublic static List&lt;String&gt; getAssociatedIPs(String ip) {\r\n\tList&lt;String&gt; aIPs = new ArrayList&lt;&gt;();\r\n\tipLog.values().stream().filter(ips -&gt; ips.contains(ip)).forEach(ips -&gt; aIPs.addAll(ips));\r\n\treturn aIPs.stream().distinct().collect(Collectors.toList());\r\n}\r\n\r\npublic static List&lt;String&gt; getDeeperAssociatedIPs(String ip) {\r\n\tList&lt;String&gt; checked = new ArrayList&lt;&gt;();\r\n\tList&lt;String&gt; aIPs = new ArrayList&lt;&gt;(getAssociatedIPs(ip));\r\n\tchecked.add(ip);\r\n\r\n\twhile (!aIPs.isEmpty()) {\r\n\t\tList&lt;String&gt; uncheckedIPs = aIPs.stream().filter(i -&gt; !checked.contains(i)).collect(Collectors.toList());\r\n\t\tfor (String uncheckedIP : uncheckedIPs) {\r\n\t\t\tchecked.add(uncheckedIP);\r\n\t\t\tList&lt;String&gt; associatedIPs = getAssociatedIPs(uncheckedIP);\r\n\t\t\taIPs.addAll(associatedIPs);\r\n\t\t}\r\n\t\taIPs.removeAll(checked);\r\n\t}\r\n\treturn checked;\r\n}\r\n``` \r\n\r\nImprovements:\r\n\r\n - **Stream Usage**: The code has been rewritten to use `Streams`,\r\n   making it clearer.\r\n - **Minimization of Loop Usage**: Instead of using explicit loops, the\r\n   method utilizes `Stream` functionality to process associated `IPs` more\r\n   efficiently.\r\n - **Reduction of Temporary Lists**: Rather than creating a new list for\r\n   unchecked `IPs` in each iteration, the code maintains the list `aIPs`\r\n   and removes the already verified `IPs` during each iteration.\r\n\r\n","title":"Is there a filtering function to find links between lists in maps?","body":"<blockquote>\n<p>After tinkering a bit, I found that I can use 2 methods - one\nessentially the same as the first and one to loop that function until\nnothing else can be added. Here is a link to the code -\n<a href=\"https://www.jdoodle.com/ia/KUJ\" rel=\"nofollow noreferrer\">https://www.jdoodle.com/ia/KUJ</a></p>\n</blockquote>\n<p>Considering your solution, I improved your code:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public static List&lt;String&gt; getAssociatedIPs(String ip) {\n    List&lt;String&gt; aIPs = new ArrayList&lt;&gt;();\n    ipLog.values().stream().filter(ips -&gt; ips.contains(ip)).forEach(ips -&gt; aIPs.addAll(ips));\n    return aIPs.stream().distinct().collect(Collectors.toList());\n}\n\npublic static List&lt;String&gt; getDeeperAssociatedIPs(String ip) {\n    List&lt;String&gt; checked = new ArrayList&lt;&gt;();\n    List&lt;String&gt; aIPs = new ArrayList&lt;&gt;(getAssociatedIPs(ip));\n    checked.add(ip);\n\n    while (!aIPs.isEmpty()) {\n        List&lt;String&gt; uncheckedIPs = aIPs.stream().filter(i -&gt; !checked.contains(i)).collect(Collectors.toList());\n        for (String uncheckedIP : uncheckedIPs) {\n            checked.add(uncheckedIP);\n            List&lt;String&gt; associatedIPs = getAssociatedIPs(uncheckedIP);\n            aIPs.addAll(associatedIPs);\n        }\n        aIPs.removeAll(checked);\n    }\n    return checked;\n}\n</code></pre>\n<p>Improvements:</p>\n<ul>\n<li><strong>Stream Usage</strong>: The code has been rewritten to use <code>Streams</code>,\nmaking it clearer.</li>\n<li><strong>Minimization of Loop Usage</strong>: Instead of using explicit loops, the\nmethod utilizes <code>Stream</code> functionality to process associated <code>IPs</code> more\nefficiently.</li>\n<li><strong>Reduction of Temporary Lists</strong>: Rather than creating a new list for\nunchecked <code>IPs</code> in each iteration, the code maintains the list <code>aIPs</code>\nand removes the already verified <code>IPs</code> during each iteration.</li>\n</ul>\n"}],"owner":{"account_id":24371439,"reputation":13,"user_id":18304329,"display_name":"izzzzthewiz"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":29,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76924164,"answer_count":2,"score":0,"last_activity_date":1692296227,"creation_date":1692288787,"question_id":76923309,"body_markdown":"I am tooling around for fun making a Minecraft plugin. In my plugin, there is a YML configuration containing a list of IP&#39;s for each player who has joined the server. I want to be able to loop through the other lists in the config to find accounts that may be associated by one or more of the same IP&#39;s. \r\n\r\nAs a visualization, here is an example YML file (ips.yml)\r\n```yaml\r\n98b7a77b-cd65-4f72-ad91-a6c399f1921e:\r\n   - 127.0.0.0\r\n   - 127.0.0.1\r\n1168c028-de65-4698-bbde-9ae674404829:\r\n   - 127.0.0.1\r\n   - 127.0.0.2\r\nbb88d2ab-2433-4c30-bbb8-e012edc19279:\r\n   - 127.0.0.2\r\n   - 127.0.0.3\r\nab6cad20-04ff-4317-939e-9af8ff50afd3:\r\n   - 127.0.0.3\r\n   - 127.0.0.4\r\n ```\r\n\r\nHere is my current filtering function: \r\n```java\r\nprivate static final Plugin plugin = Plugin.getPlugin();\r\nprivate static final File file = new File(plugin.getDataFolder());\r\nprivate static Map&lt;UUID, List&lt;String&gt;&gt; getIPsFromYAML() {\r\n    FileConfiguration ipLog = YamlConfiguration.loadConfiguration(file);\r\n    return ipLog.getKeys(false).stream().collect(Collectors.toMap(UUID::fromString, key -&gt; ipLog.getStringList(key)));\r\n}\r\npublic static List&lt;String&gt; getAssociatedIPs(String ip) {\r\n    List&lt;String&gt; associatedIPs = new ArrayList&lt;&gt;();\r\n    Map&lt;UUID, List&lt;String&gt;&gt; ipMap = getIPsFromYAML();\r\n    for (List&lt;String&gt; ips : ipMap.values()) {\r\n        if (ips.contains(ip)) {\r\n            for (String ip2 : ips) {\r\n                if (!associatedIPs.contains(ip2)) associatedIPs.add(ip2);\r\n            }\r\n        }\r\n    }\r\n    return associatedIps;\r\n}\r\n```\r\nHowever, in this function with this YML file, if you were to pass `&quot;127.0.0.1&quot;` in the method, you would only get a list with `{&quot;127.0.0&quot;,&quot;127.0.1&quot;,&quot;127.0.2&quot;}` as it only searches for what matches the original string when I want it to return all of the IP&#39;s because they are all linked somehow.\r\n\r\nAny help with this would be very appreciated.","title":"Is there a filtering function to find links between lists in maps?","body":"<p>I am tooling around for fun making a Minecraft plugin. In my plugin, there is a YML configuration containing a list of IP's for each player who has joined the server. I want to be able to loop through the other lists in the config to find accounts that may be associated by one or more of the same IP's.</p>\n<p>As a visualization, here is an example YML file (ips.yml)</p>\n<pre class=\"lang-yaml prettyprint-override\"><code>98b7a77b-cd65-4f72-ad91-a6c399f1921e:\n   - 127.0.0.0\n   - 127.0.0.1\n1168c028-de65-4698-bbde-9ae674404829:\n   - 127.0.0.1\n   - 127.0.0.2\nbb88d2ab-2433-4c30-bbb8-e012edc19279:\n   - 127.0.0.2\n   - 127.0.0.3\nab6cad20-04ff-4317-939e-9af8ff50afd3:\n   - 127.0.0.3\n   - 127.0.0.4\n</code></pre>\n<p>Here is my current filtering function:</p>\n<pre class=\"lang-java prettyprint-override\"><code>private static final Plugin plugin = Plugin.getPlugin();\nprivate static final File file = new File(plugin.getDataFolder());\nprivate static Map&lt;UUID, List&lt;String&gt;&gt; getIPsFromYAML() {\n    FileConfiguration ipLog = YamlConfiguration.loadConfiguration(file);\n    return ipLog.getKeys(false).stream().collect(Collectors.toMap(UUID::fromString, key -&gt; ipLog.getStringList(key)));\n}\npublic static List&lt;String&gt; getAssociatedIPs(String ip) {\n    List&lt;String&gt; associatedIPs = new ArrayList&lt;&gt;();\n    Map&lt;UUID, List&lt;String&gt;&gt; ipMap = getIPsFromYAML();\n    for (List&lt;String&gt; ips : ipMap.values()) {\n        if (ips.contains(ip)) {\n            for (String ip2 : ips) {\n                if (!associatedIPs.contains(ip2)) associatedIPs.add(ip2);\n            }\n        }\n    }\n    return associatedIps;\n}\n</code></pre>\n<p>However, in this function with this YML file, if you were to pass <code>&quot;127.0.0.1&quot;</code> in the method, you would only get a list with <code>{&quot;127.0.0&quot;,&quot;127.0.1&quot;,&quot;127.0.2&quot;}</code> as it only searches for what matches the original string when I want it to return all of the IP's because they are all linked somehow.</p>\n<p>Any help with this would be very appreciated.</p>\n"},{"tags":["java","applet","apache-fop"],"answers":[{"tags":[],"owner":{"account_id":5112043,"reputation":201,"user_id":4098345,"display_name":"Joseph Morris"},"down_vote_count":0,"up_vote_count":17,"is_accepted":false,"score":17,"last_activity_date":1412867835,"creation_date":1412867835,"answer_id":26282077,"question_id":26139301,"body_markdown":"In case anyone else has something similar, this turned out to be caused by the way the project was being built in Maven.\r\n\r\nFop 1.0 and above use the xml-graphics-commons library to facilitate the image rendering.  As mentioned in the question, this uses a plugin registry which is configured using the following files inside the JAR:\r\n\r\nMETA-INF/services/org.apache.xmlgraphics.image.loader.spi.ImageConverter&lt;BR&gt;\r\nMETA-INF/services/org.apache.xmlgraphics.image.loader.spi.ImageLoaderFactory&lt;BR&gt;\r\nMETA-INF/services/org.apache.xmlgraphics.image.loader.spi.ImagePreloader&lt;BR&gt;\r\n\r\n...each of these contains a list of the image decoders which will be supported.\r\n\r\nThe problem is that xml-graphics-common ships these files with a sensible list of defaults, while FOP also has a conflicting set of defaults, which for some weird reason disable all of the image decoders, and that one was taking priority.\r\n\r\nTo solve the problem, I made sure that my maven pom.xml file imported xml-graphics-common &lt;I&gt;before&lt;/I&gt; FOP, so that its defaults took precedence, and at that point everything sprang to life.\r\n\r\nI am still not sure why the code was working correctly as a standalone test program, but I suspect it was the way the classpath was being handled being different to it running in plugin mode.\r\n","title":"Apache FOP in a Java Applet - No ImagePreloader found for data","body":"<p>In case anyone else has something similar, this turned out to be caused by the way the project was being built in Maven.</p>\n\n<p>Fop 1.0 and above use the xml-graphics-commons library to facilitate the image rendering.  As mentioned in the question, this uses a plugin registry which is configured using the following files inside the JAR:</p>\n\n<p>META-INF/services/org.apache.xmlgraphics.image.loader.spi.ImageConverter<BR>\nMETA-INF/services/org.apache.xmlgraphics.image.loader.spi.ImageLoaderFactory<BR>\nMETA-INF/services/org.apache.xmlgraphics.image.loader.spi.ImagePreloader<BR></p>\n\n<p>...each of these contains a list of the image decoders which will be supported.</p>\n\n<p>The problem is that xml-graphics-common ships these files with a sensible list of defaults, while FOP also has a conflicting set of defaults, which for some weird reason disable all of the image decoders, and that one was taking priority.</p>\n\n<p>To solve the problem, I made sure that my maven pom.xml file imported xml-graphics-common <I>before</I> FOP, so that its defaults took precedence, and at that point everything sprang to life.</p>\n\n<p>I am still not sure why the code was working correctly as a standalone test program, but I suspect it was the way the classpath was being handled being different to it running in plugin mode.</p>\n"},{"tags":[],"owner":{"account_id":12256042,"reputation":11,"user_id":8945054,"display_name":"Kynx"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1510747952,"creation_date":1510747952,"answer_id":47307105,"question_id":26139301,"body_markdown":"Just been struggling with this one. If you&#39;re using the maven-shade-plugin to create an uber jar, use the `ServicesResourceTransformer` to merge all the services configuration:\r\n\r\n    &lt;plugin&gt;\r\n      &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n      &lt;artifactId&gt;maven-shade-plugin&lt;/artifactId&gt;\r\n      &lt;version&gt;2.2&lt;/version&gt;\r\n      &lt;executions&gt;\r\n        &lt;execution&gt;\r\n          &lt;!-- snip --&gt;\r\n          &lt;configuration&gt;\r\n            &lt;transformers&gt;\r\n              &lt;!-- snip --&gt;\r\n              &lt;transformer implementation=&quot;org.apache.maven.plugins.shade.resource.ServicesResourceTransformer&quot;/&gt;\r\n            &lt;/transformers&gt;\r\n          &lt;/configuration&gt;\r\n        &lt;/execution&gt;\r\n      &lt;/executions&gt;\r\n    &lt;/plugin&gt;","title":"Apache FOP in a Java Applet - No ImagePreloader found for data","body":"<p>Just been struggling with this one. If you're using the maven-shade-plugin to create an uber jar, use the <code>ServicesResourceTransformer</code> to merge all the services configuration:</p>\n\n<pre><code>&lt;plugin&gt;\n  &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n  &lt;artifactId&gt;maven-shade-plugin&lt;/artifactId&gt;\n  &lt;version&gt;2.2&lt;/version&gt;\n  &lt;executions&gt;\n    &lt;execution&gt;\n      &lt;!-- snip --&gt;\n      &lt;configuration&gt;\n        &lt;transformers&gt;\n          &lt;!-- snip --&gt;\n          &lt;transformer implementation=\"org.apache.maven.plugins.shade.resource.ServicesResourceTransformer\"/&gt;\n        &lt;/transformers&gt;\n      &lt;/configuration&gt;\n    &lt;/execution&gt;\n  &lt;/executions&gt;\n&lt;/plugin&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":115173,"reputation":3150,"user_id":302517,"display_name":"JiP"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1576507008,"creation_date":1576507008,"answer_id":59358788,"question_id":26139301,"body_markdown":"In my case the plugin registry loaded &lt;code&gt;ImagePreloader&lt;/code&gt;s from both the plugin files and mixed them together. Yet the error still appeared. I was inserting an SVG file into a PDF file. The root cause was incorrect version of &lt;code&gt;org.apache.xmlgraphics:batik-svg-dom&lt;/code&gt;. The &lt;code&gt;1.7&lt;/code&gt; version was required by the &lt;code&gt;org.apache.xmlgraphics:fop:1.1&lt;/code&gt;, however, the &lt;code&gt;1.8&lt;/code&gt; version was on the classpath.\r\n\r\nThere is a key difference between the two versions: the &lt;code&gt;org.apache.fop.image.loader.batik.PreloaderSVG&lt;/code&gt; class needs &lt;code&gt;org.apache.batik.dom.svg.SAXSVGDocumentFactory&lt;/code&gt; from the version &lt;code&gt;1.7&lt;/code&gt; on the classpath. If it gets &lt;code&gt;org.apache.batik.anim.dom.SAXSVGDocumentFactory&lt;/code&gt; from the &lt;code&gt;1.8&lt;/code&gt; version it does not work as expected.\r\n\r\nThis SO question: [Where has org.apache.batik.dom.svg.SVGDOMImplementation gone?][1] was helpful to me when resolving this issue.\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/30092651/where-has-org-apache-batik-dom-svg-svgdomimplementation-gone","title":"Apache FOP in a Java Applet - No ImagePreloader found for data","body":"<p>In my case the plugin registry loaded <code>ImagePreloader</code>s from both the plugin files and mixed them together. Yet the error still appeared. I was inserting an SVG file into a PDF file. The root cause was incorrect version of <code>org.apache.xmlgraphics:batik-svg-dom</code>. The <code>1.7</code> version was required by the <code>org.apache.xmlgraphics:fop:1.1</code>, however, the <code>1.8</code> version was on the classpath.</p>\n\n<p>There is a key difference between the two versions: the <code>org.apache.fop.image.loader.batik.PreloaderSVG</code> class needs <code>org.apache.batik.dom.svg.SAXSVGDocumentFactory</code> from the version <code>1.7</code> on the classpath. If it gets <code>org.apache.batik.anim.dom.SAXSVGDocumentFactory</code> from the <code>1.8</code> version it does not work as expected.</p>\n\n<p>This SO question: <a href=\"https://stackoverflow.com/questions/30092651/where-has-org-apache-batik-dom-svg-svgdomimplementation-gone\">Where has org.apache.batik.dom.svg.SVGDOMImplementation gone?</a> was helpful to me when resolving this issue.</p>\n"},{"tags":[],"owner":{"account_id":3088532,"reputation":71,"user_id":2615206,"display_name":"user2615206"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1644397771,"creation_date":1644397771,"answer_id":71046706,"question_id":26139301,"body_markdown":"thanks for the post!\r\nI can assert that this also works by changing ordering in Eclipse!\r\nin my case, under Windows it was working fine, but same JAR file in RHEL raised an error","title":"Apache FOP in a Java Applet - No ImagePreloader found for data","body":"<p>thanks for the post!\nI can assert that this also works by changing ordering in Eclipse!\nin my case, under Windows it was working fine, but same JAR file in RHEL raised an error</p>\n"}],"owner":{"account_id":5112043,"reputation":201,"user_id":4098345,"display_name":"Joseph Morris"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":6434,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":4,"score":3,"last_activity_date":1692296135,"creation_date":1412159359,"question_id":26139301,"body_markdown":"I&#39;m looking at an issue in a mature commercial product.\r\n\r\nIn a nutshell, we are using part of the Apache POI library to read in a Word .DOC or .DOCX file, and convert it into XSL-FO so that we can do token replacements.  We then use FOP – embedded into the Java program - to convert the FO data into a PDF for printing.  The catch is, all this is being done on the client inside a Java applet running inside Internet Explorer.\r\n\r\nOriginally we were using FOP 0.93, which worked reasonably well.  However, it was not able to utilise the fonts inside the DOC file when generating the PDF and would map everything to Times, which one of the customers did not like.  In theory it could be made to work by adding some kind of font metrics data, but that would require a relatively complex definition for every font it was likely to encounter and we can’t predict what the client is liable to use outside of the MS core fonts set.\r\n\r\nTo fix this, FOP was upgraded to 1.0, which added support for autodetecting the fonts from the operating system.  This worked, but we noticed that the image processing had stopped working and the letterheads had disappeared.\r\nWhat appears to have happened is that the image loader inside FOP was rewritten at some point between 0.93 and 0.95 so that instead of using Jimi and JAI it now uses ImageIO.  The earlier implementation worked fine, but the new code doesn’t like being run as an applet.\r\n\r\nImages are embedded in URIs in the FO data so we get an error like this:\r\n2014-09-30 17:00:10,607 ERROR [org.apache.fop.apps.FOUserAgent] Image not available. URI:\r\ndata:image/jpeg;base64,iVBORw0KGgoAAAANSUhEUgAAALQAAABSCAIAAABysmn6AAA...\r\n...ggg==. Reason: org.apache.xmlgraphics.image.loader.ImageException: The file format is not supported. No ImagePreloader found for data:image/jpeg;base64,iVBORw0KGgoAAAANSUhEUgAAALQAAABSCAIAAABysmn6AAAA...\r\n\r\nWhen run through a test harness, the correct output is generated, but when run as an applet inside the browser we get the above error which makes me suspect that the browser applet security is jamming the ImageIO plugin loader somehow.\r\n\r\nThe guts of the FOP transformation, i.e. the bit which is triggering the error is this:\r\n\r\n\t// Step 4: Setup JAXP using identity transformer\r\n\tTransformerFactory factory = TransformerFactory.newInstance();\r\n\tTransformer transformer = factory.newTransformer(); // identity transformer\r\n\t\r\n\ttransformer.transform(src, res);\r\n\r\n...which is all being run inside a PrivilegedAction block since in FOP 1.0 it needed file I/O access to manage the font cache.\r\n\r\nRunning the standalone FOP 0.93 and 1.0 programs under linux and using strace shows that it is writing out temporary files for the image data, but both 0.93 and 1.0 do similar things, so it shouldn’t be that by itself, especially since it should have permission to create temp files already.\r\n\r\nI&#39;ve tried different versions of the JRE since some builds a few years back apparently had security issues with the ImageIO library, but to no avail.\r\n\r\nAny ideas?\r\n\r\nThanks,\r\n","title":"Apache FOP in a Java Applet - No ImagePreloader found for data","body":"<p>I'm looking at an issue in a mature commercial product.</p>\n\n<p>In a nutshell, we are using part of the Apache POI library to read in a Word .DOC or .DOCX file, and convert it into XSL-FO so that we can do token replacements.  We then use FOP – embedded into the Java program - to convert the FO data into a PDF for printing.  The catch is, all this is being done on the client inside a Java applet running inside Internet Explorer.</p>\n\n<p>Originally we were using FOP 0.93, which worked reasonably well.  However, it was not able to utilise the fonts inside the DOC file when generating the PDF and would map everything to Times, which one of the customers did not like.  In theory it could be made to work by adding some kind of font metrics data, but that would require a relatively complex definition for every font it was likely to encounter and we can’t predict what the client is liable to use outside of the MS core fonts set.</p>\n\n<p>To fix this, FOP was upgraded to 1.0, which added support for autodetecting the fonts from the operating system.  This worked, but we noticed that the image processing had stopped working and the letterheads had disappeared.\nWhat appears to have happened is that the image loader inside FOP was rewritten at some point between 0.93 and 0.95 so that instead of using Jimi and JAI it now uses ImageIO.  The earlier implementation worked fine, but the new code doesn’t like being run as an applet.</p>\n\n<p>Images are embedded in URIs in the FO data so we get an error like this:\n2014-09-30 17:00:10,607 ERROR [org.apache.fop.apps.FOUserAgent] Image not available. URI:\ndata:image/jpeg;base64,iVBORw0KGgoAAAANSUhEUgAAALQAAABSCAIAAABysmn6AAA...\n...ggg==. Reason: org.apache.xmlgraphics.image.loader.ImageException: The file format is not supported. No ImagePreloader found for data:image/jpeg;base64,iVBORw0KGgoAAAANSUhEUgAAALQAAABSCAIAAABysmn6AAAA...</p>\n\n<p>When run through a test harness, the correct output is generated, but when run as an applet inside the browser we get the above error which makes me suspect that the browser applet security is jamming the ImageIO plugin loader somehow.</p>\n\n<p>The guts of the FOP transformation, i.e. the bit which is triggering the error is this:</p>\n\n<pre><code>// Step 4: Setup JAXP using identity transformer\nTransformerFactory factory = TransformerFactory.newInstance();\nTransformer transformer = factory.newTransformer(); // identity transformer\n\ntransformer.transform(src, res);\n</code></pre>\n\n<p>...which is all being run inside a PrivilegedAction block since in FOP 1.0 it needed file I/O access to manage the font cache.</p>\n\n<p>Running the standalone FOP 0.93 and 1.0 programs under linux and using strace shows that it is writing out temporary files for the image data, but both 0.93 and 1.0 do similar things, so it shouldn’t be that by itself, especially since it should have permission to create temp files already.</p>\n\n<p>I've tried different versions of the JRE since some builds a few years back apparently had security issues with the ImageIO library, but to no avail.</p>\n\n<p>Any ideas?</p>\n\n<p>Thanks,</p>\n"},{"tags":["java","android","google-cloud-firestore","dependencies","google-cloud-pubsub"],"answers":[{"tags":[],"owner":{"account_id":15077170,"reputation":424,"user_id":10880930,"display_name":"Sumit Chandel"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1692296068,"creation_date":1692296068,"answer_id":76924147,"question_id":75976034,"body_markdown":"It looks like this is a known issue with two workarounds currently available to try out:\r\n\r\n 1. Exclude the `protolite-well-known-types` dependency from the Firebase libraries in your build configuration. There is an example for how to do this in a thread with a similar question [here](https://stackoverflow.com/questions/56922949/resolve-duplicate-classes-with-firebase-and-dialog-flow).\r\n 2. Try updating the Firestore SDK version you are using (or downgrading it). This would involve trying to match the versions of the `proto-well-known-types` from the pubsub libraries and the Firestore SDK to match up and eliminate the duplicate class conflict. Alternatively you could also try adjusting the version of the pub sub libraries you are using.\r\n\r\nAlso please [see this closed GitHub issue](https://github.com/firebase/firebase-android-sdk/issues/3109) that discusses a very similar issue and workaround as 1.\r\n\r\n","title":"Adding Pub/Sub with Firestore causes duplicate class errors","body":"<p>It looks like this is a known issue with two workarounds currently available to try out:</p>\n<ol>\n<li>Exclude the <code>protolite-well-known-types</code> dependency from the Firebase libraries in your build configuration. There is an example for how to do this in a thread with a similar question <a href=\"https://stackoverflow.com/questions/56922949/resolve-duplicate-classes-with-firebase-and-dialog-flow\">here</a>.</li>\n<li>Try updating the Firestore SDK version you are using (or downgrading it). This would involve trying to match the versions of the <code>proto-well-known-types</code> from the pubsub libraries and the Firestore SDK to match up and eliminate the duplicate class conflict. Alternatively you could also try adjusting the version of the pub sub libraries you are using.</li>\n</ol>\n<p>Also please <a href=\"https://github.com/firebase/firebase-android-sdk/issues/3109\" rel=\"nofollow noreferrer\">see this closed GitHub issue</a> that discusses a very similar issue and workaround as 1.</p>\n"}],"owner":{"account_id":4326895,"reputation":451,"user_id":3533465,"display_name":"momersaleem"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":91,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1692296068,"creation_date":1681120482,"question_id":75976034,"body_markdown":"Adding Pub/Sub library with Firestore causes duplicate class issues. Firestore without Pub/Sub working perfectly fine with the required functionality. I don&#39;t want to exclude anything from Firestore and Pub/Sub dependencies to fix conflicts as both have some kind of implementation conflict so as per my understanding nothing to exclude from both libraries to work properly with their dependencies. Please help me to fix this issue. \r\n\r\n**Build.gradle**\r\n```\r\napply plugin: &#39;com.android.application&#39;\r\napply plugin: &quot;com.google.protobuf&quot;\r\n\r\n\r\nandroid {\r\n    namespace &#39;com.example.lottieanimation&#39;\r\n    compileSdk 33\r\n\r\n    defaultConfig {\r\n        applicationId &quot;com.example.lottieanimation&quot;\r\n        minSdk 28\r\n        targetSdk 33\r\n        versionCode 1\r\n        versionName &quot;1.0&quot;\r\n\r\n        testInstrumentationRunner &quot;androidx.test.runner.AndroidJUnitRunner&quot;\r\n    }\r\n\r\n    buildTypes {\r\n        release {\r\n            minifyEnabled false\r\n            proguardFiles getDefaultProguardFile(&#39;proguard-android-optimize.txt&#39;), &#39;proguard-rules.pro&#39;\r\n        }\r\n    }\r\n    compileOptions {\r\n        sourceCompatibility JavaVersion.VERSION_1_8\r\n        targetCompatibility JavaVersion.VERSION_1_8\r\n    }\r\n\r\n    packagingOptions {\r\n        pickFirst &#39;lib/*/libc++_shared.so&#39;\r\n        exclude &#39;META-INF/*&#39;\r\n    }\r\n}\r\n\r\ndependencies {\r\n\r\n    implementation &#39;androidx.appcompat:appcompat:1.6.1&#39;\r\n    implementation &#39;com.google.android.material:material:1.8.0&#39;\r\n    implementation &#39;androidx.constraintlayout:constraintlayout:2.1.4&#39;\r\n    //implementation project(path: &#39;:PubSubSync&#39;)\r\n    testImplementation &#39;junit:junit:4.13.2&#39;\r\n    androidTestImplementation &#39;androidx.test.ext:junit:1.1.5&#39;\r\n    androidTestImplementation &#39;androidx.test.espresso:espresso-core:3.5.1&#39;\r\n\r\n    implementation &#39;com.google.firebase:firebase-firestore:24.4.5&#39;\r\n    implementation &#39;com.google.firebase:firebase-auth:21.2.0&#39;\r\n    implementation &#39;com.google.auth:google-auth-library-oauth2-http:1.16.0&#39;\r\n\r\n    implementation(&#39;com.google.cloud:google-cloud-pubsub:1.123.7&#39;) {\r\n        exclude group: &#39;org.apache.httpcomponents&#39;\r\n    }\r\n}\r\n```\r\n\r\n**Errors:** There is a big list of duplicate class errors, just mentioning a few. You can recreate it on your end.\r\n\r\n&gt; Duplicate class com.google.api.Advice found in modules proto-google-common-protos-2.14.3 (com.google.api.grpc:proto-google-common-protos:2.14.3) and protolite-well-known-types-18.0.0-runtime (com.google.firebase:protolite-well-known-types:18.0.0)\r\nDuplicate class com.google.api.Advice$1 found in modules proto-google-common-protos-2.14.3 (com.google.api.grpc:proto-google-common-protos:2.14.3) and protolite-well-known-types-18.0.0-runtime (com.google.firebase:protolite-well-known-types:18.0.0)\r\nDuplicate class com.google.api.Advice$Builder found in modules proto-google-common-protos-2.14.3 (com.google.api.grpc:proto-google-common-protos:2.14.3) and protolite-well-known-types-18.0.0-runtime (com.google.firebase:protolite-well-known-types:18.0.0)\r\nDuplicate class com.google.api.AdviceOrBuilder found in modules proto-google-common-protos-2.14.3 (com.google.api.grpc:proto-google-common-protos:2.14.3) and protolite-well-known-types-18.0.0-runtime (com.google.firebase:protolite-well-known-types:18.0.0)\r\nDuplicate class com.google.api.AnnotationsProto found in modules proto-google-common-protos-2.14.3 (com.google.api.grpc:proto-google-common-protos:2.14.3) and protolite-well-known-types-18.0.0-runtime (com.google.firebase:protolite-well-known-types:18.0.0)\r\nDuplicate class com.google.api.AuthProto found in modules proto-google-common-protos-2.14.3 (com.google.api.grpc:proto-google-common-protos:2.14.3) and protolite-well-known-types-18.0.0-runtime (com.google.firebase:protolite-well-known-types:18.0.0)\r\nDuplicate class com.google.api.AuthProvider found in modules proto-google-common-protos-2.14.3 (com.google.api.grpc:proto-google-common-protos:2.14.3) and protolite-well-known-types-18.0.0-runtime (com.google.firebase:protolite-well-known-types:18.0.0)\r\nDuplicate class com.google.api.AuthProvider$1 found in modules proto-google-common-protos-2.14.3 (com.google.api.grpc:proto-google-common-protos:2.14.3) and protolite-well-known-types-18.0.0-runtime (com.google.firebase:protolite-well-known-types:18.0.0)\r\nDuplicate class com.google.api.AuthProvider$Builder found in modules proto-google-common-protos-2.14.3 (com.google.api.grpc:proto-google-common-protos:2.14.3) and protolite-well-known-types-18.0.0-runtime (com.google.firebase:protolite-well-known-types:18.0.0)\r\nDuplicate class com.google.api.AuthProviderOrBuilder found in modules proto-google-common-protos-2.14.3 (com.google.api.grpc:proto-google-common-protos:2.14.3) and protolite-well-known-types-18.0.0-runtime (com.google.firebase:protolite-well-known-types:18.0.0)\r\nDuplicate class com.google.api.AuthRequirement found in modules proto-google-common-protos-2.14.3 (com.google.api.grpc:proto-google-common-protos:2.14.3) and protolite-well-known-types-18.0.0-runtime (com.google.firebase:protolite-well-known-types:18.0.0)\r\nDuplicate class com.google.api.AuthRequirement$1 found in modules proto-google-common-protos-2.14.3 (com.google.api.grpc:proto-google-common-protos:2.14.3) and protolite-well-known-types-18.0.0-runtime (com.google.firebase:protolite-well-known-types:18.0.0)\r\nDuplicate class com.google.api.AuthRequirement$Builder found in modules proto-google-common-protos-2.14.3 (com.google.api.grpc:proto-google-common-protos:2.14.3) and protolite-well-known-types-18.0.0-runtime (com.google.firebase:protolite-well-known-types:18.0.0)\r\nDuplicate class com.google.api.AuthRequirementOrBuilder found in modules proto-google-common-protos-2.14.3 (com.google.api.grpc:proto-google-common-protos:2.14.3) and protolite-well-known-types-18.0.0-runtime (com.google.firebase:protolite-well-known-types:18.0.0)\r\nDuplicate class com.google.api.Authentication found in modules proto-google-common-protos-2.14.3 (com.google.api.grpc:proto-google-common-protos:2.14.3) and protolite-well-known-types-18.0.0-runtime (com.google.firebase:protolite-well-known-types:18.0.0)\r\nDuplicate class com.google.api.Authentication$1 found in modules proto-google-common-protos-2.14.3 (com.google.api.grpc:proto-google-common-protos:2.14.3) and protolite-well-known-types-18.0.0-runtime (com.google.firebase:protolite-well-known-types:18.0.0)\r\nDuplicate class com.google.api.Authentication$Builder found in modules proto-google-common-protos-2.14.3 (com.google.api.grpc:proto-google-common-protos:2.14.3) and protolite-well-known-types-18.0.0-runtime (com.google.firebase:protolite-well-known-types:18.0.0)\r\nDuplicate class com.google.api.AuthenticationOrBuilder found in modules proto-google-common-protos-2.14.3 (com.google.api.grpc:proto-google-common-protos:2.14.3) and protolite-well-known-types-18.0.0-runtime (com.google.firebase:protolite-well-known-types:18.0.0)\r\nDuplicate class com.google.api.AuthenticationRule found in modules proto-google-common-protos-2.14.3 (com.google.api.grpc:proto-google-common-protos:2.14.3) and protolite-well-known-types-18.0.0-runtime (com.google.firebase:protolite-well-known-types:18.0.0)\r\nDuplicate class com.google.api.AuthenticationRule$1 found in modules proto-google-common-protos-2.14.3 (com.google.api.grpc:proto-google-common-protos:2.14.3) and protolite-well-known-types-18.0.0-runtime (com.google.firebase:protolite-well-known-types:18.0.0)\r\nDuplicate class com.google.api.AuthenticationRule$Builder found in modules proto-google-common-protos-2.14.3 (com.google.api.grpc:proto-google-common-protos:2.14.3) and protolite-well-known-types-18.0.0-runtime (com.google.firebase:protolite-well-known-types:18.0.0)","title":"Adding Pub/Sub with Firestore causes duplicate class errors","body":"<p>Adding Pub/Sub library with Firestore causes duplicate class issues. Firestore without Pub/Sub working perfectly fine with the required functionality. I don't want to exclude anything from Firestore and Pub/Sub dependencies to fix conflicts as both have some kind of implementation conflict so as per my understanding nothing to exclude from both libraries to work properly with their dependencies. Please help me to fix this issue.</p>\n<p><strong>Build.gradle</strong></p>\n<pre><code>apply plugin: 'com.android.application'\napply plugin: &quot;com.google.protobuf&quot;\n\n\nandroid {\n    namespace 'com.example.lottieanimation'\n    compileSdk 33\n\n    defaultConfig {\n        applicationId &quot;com.example.lottieanimation&quot;\n        minSdk 28\n        targetSdk 33\n        versionCode 1\n        versionName &quot;1.0&quot;\n\n        testInstrumentationRunner &quot;androidx.test.runner.AndroidJUnitRunner&quot;\n    }\n\n    buildTypes {\n        release {\n            minifyEnabled false\n            proguardFiles getDefaultProguardFile('proguard-android-optimize.txt'), 'proguard-rules.pro'\n        }\n    }\n    compileOptions {\n        sourceCompatibility JavaVersion.VERSION_1_8\n        targetCompatibility JavaVersion.VERSION_1_8\n    }\n\n    packagingOptions {\n        pickFirst 'lib/*/libc++_shared.so'\n        exclude 'META-INF/*'\n    }\n}\n\ndependencies {\n\n    implementation 'androidx.appcompat:appcompat:1.6.1'\n    implementation 'com.google.android.material:material:1.8.0'\n    implementation 'androidx.constraintlayout:constraintlayout:2.1.4'\n    //implementation project(path: ':PubSubSync')\n    testImplementation 'junit:junit:4.13.2'\n    androidTestImplementation 'androidx.test.ext:junit:1.1.5'\n    androidTestImplementation 'androidx.test.espresso:espresso-core:3.5.1'\n\n    implementation 'com.google.firebase:firebase-firestore:24.4.5'\n    implementation 'com.google.firebase:firebase-auth:21.2.0'\n    implementation 'com.google.auth:google-auth-library-oauth2-http:1.16.0'\n\n    implementation('com.google.cloud:google-cloud-pubsub:1.123.7') {\n        exclude group: 'org.apache.httpcomponents'\n    }\n}\n</code></pre>\n<p><strong>Errors:</strong> There is a big list of duplicate class errors, just mentioning a few. You can recreate it on your end.</p>\n<blockquote>\n<p>Duplicate class com.google.api.Advice found in modules proto-google-common-protos-2.14.3 (com.google.api.grpc:proto-google-common-protos:2.14.3) and protolite-well-known-types-18.0.0-runtime (com.google.firebase:protolite-well-known-types:18.0.0)\nDuplicate class com.google.api.Advice$1 found in modules proto-google-common-protos-2.14.3 (com.google.api.grpc:proto-google-common-protos:2.14.3) and protolite-well-known-types-18.0.0-runtime (com.google.firebase:protolite-well-known-types:18.0.0)\nDuplicate class com.google.api.Advice$Builder found in modules proto-google-common-protos-2.14.3 (com.google.api.grpc:proto-google-common-protos:2.14.3) and protolite-well-known-types-18.0.0-runtime (com.google.firebase:protolite-well-known-types:18.0.0)\nDuplicate class com.google.api.AdviceOrBuilder found in modules proto-google-common-protos-2.14.3 (com.google.api.grpc:proto-google-common-protos:2.14.3) and protolite-well-known-types-18.0.0-runtime (com.google.firebase:protolite-well-known-types:18.0.0)\nDuplicate class com.google.api.AnnotationsProto found in modules proto-google-common-protos-2.14.3 (com.google.api.grpc:proto-google-common-protos:2.14.3) and protolite-well-known-types-18.0.0-runtime (com.google.firebase:protolite-well-known-types:18.0.0)\nDuplicate class com.google.api.AuthProto found in modules proto-google-common-protos-2.14.3 (com.google.api.grpc:proto-google-common-protos:2.14.3) and protolite-well-known-types-18.0.0-runtime (com.google.firebase:protolite-well-known-types:18.0.0)\nDuplicate class com.google.api.AuthProvider found in modules proto-google-common-protos-2.14.3 (com.google.api.grpc:proto-google-common-protos:2.14.3) and protolite-well-known-types-18.0.0-runtime (com.google.firebase:protolite-well-known-types:18.0.0)\nDuplicate class com.google.api.AuthProvider$1 found in modules proto-google-common-protos-2.14.3 (com.google.api.grpc:proto-google-common-protos:2.14.3) and protolite-well-known-types-18.0.0-runtime (com.google.firebase:protolite-well-known-types:18.0.0)\nDuplicate class com.google.api.AuthProvider$Builder found in modules proto-google-common-protos-2.14.3 (com.google.api.grpc:proto-google-common-protos:2.14.3) and protolite-well-known-types-18.0.0-runtime (com.google.firebase:protolite-well-known-types:18.0.0)\nDuplicate class com.google.api.AuthProviderOrBuilder found in modules proto-google-common-protos-2.14.3 (com.google.api.grpc:proto-google-common-protos:2.14.3) and protolite-well-known-types-18.0.0-runtime (com.google.firebase:protolite-well-known-types:18.0.0)\nDuplicate class com.google.api.AuthRequirement found in modules proto-google-common-protos-2.14.3 (com.google.api.grpc:proto-google-common-protos:2.14.3) and protolite-well-known-types-18.0.0-runtime (com.google.firebase:protolite-well-known-types:18.0.0)\nDuplicate class com.google.api.AuthRequirement$1 found in modules proto-google-common-protos-2.14.3 (com.google.api.grpc:proto-google-common-protos:2.14.3) and protolite-well-known-types-18.0.0-runtime (com.google.firebase:protolite-well-known-types:18.0.0)\nDuplicate class com.google.api.AuthRequirement$Builder found in modules proto-google-common-protos-2.14.3 (com.google.api.grpc:proto-google-common-protos:2.14.3) and protolite-well-known-types-18.0.0-runtime (com.google.firebase:protolite-well-known-types:18.0.0)\nDuplicate class com.google.api.AuthRequirementOrBuilder found in modules proto-google-common-protos-2.14.3 (com.google.api.grpc:proto-google-common-protos:2.14.3) and protolite-well-known-types-18.0.0-runtime (com.google.firebase:protolite-well-known-types:18.0.0)\nDuplicate class com.google.api.Authentication found in modules proto-google-common-protos-2.14.3 (com.google.api.grpc:proto-google-common-protos:2.14.3) and protolite-well-known-types-18.0.0-runtime (com.google.firebase:protolite-well-known-types:18.0.0)\nDuplicate class com.google.api.Authentication$1 found in modules proto-google-common-protos-2.14.3 (com.google.api.grpc:proto-google-common-protos:2.14.3) and protolite-well-known-types-18.0.0-runtime (com.google.firebase:protolite-well-known-types:18.0.0)\nDuplicate class com.google.api.Authentication$Builder found in modules proto-google-common-protos-2.14.3 (com.google.api.grpc:proto-google-common-protos:2.14.3) and protolite-well-known-types-18.0.0-runtime (com.google.firebase:protolite-well-known-types:18.0.0)\nDuplicate class com.google.api.AuthenticationOrBuilder found in modules proto-google-common-protos-2.14.3 (com.google.api.grpc:proto-google-common-protos:2.14.3) and protolite-well-known-types-18.0.0-runtime (com.google.firebase:protolite-well-known-types:18.0.0)\nDuplicate class com.google.api.AuthenticationRule found in modules proto-google-common-protos-2.14.3 (com.google.api.grpc:proto-google-common-protos:2.14.3) and protolite-well-known-types-18.0.0-runtime (com.google.firebase:protolite-well-known-types:18.0.0)\nDuplicate class com.google.api.AuthenticationRule$1 found in modules proto-google-common-protos-2.14.3 (com.google.api.grpc:proto-google-common-protos:2.14.3) and protolite-well-known-types-18.0.0-runtime (com.google.firebase:protolite-well-known-types:18.0.0)\nDuplicate class com.google.api.AuthenticationRule$Builder found in modules proto-google-common-protos-2.14.3 (com.google.api.grpc:proto-google-common-protos:2.14.3) and protolite-well-known-types-18.0.0-runtime (com.google.firebase:protolite-well-known-types:18.0.0)</p>\n</blockquote>\n"},{"tags":["java","json","jackson"],"comments":[{"owner":{"account_id":447212,"reputation":3321,"user_id":840714,"accept_rate":62,"display_name":"Druckles"},"score":2,"creation_date":1669643466,"post_id":56915449,"comment_id":131682087,"body_markdown":"@MarkRotteveel Hi Mark, you closed this a couple of years ago as a dupe of the linked question, but this one specifically concerns how to do the conversion *without* an ObjectMapper (because it&#39;s not available). The other question might be for the more general case, but I&#39;d never use this method if I *did* have the ObjectMapper, so it wouldn&#39;t be a very suitable answer for the other question. Similarly, I&#39;d come here, not to the other question, if I was in a Deserializer.","body":"@MarkRotteveel Hi Mark, you closed this a couple of years ago as a dupe of the linked question, but this one specifically concerns how to do the conversion <i>without</i> an ObjectMapper (because it&#39;s not available). The other question might be for the more general case, but I&#39;d never use this method if I <i>did</i> have the ObjectMapper, so it wouldn&#39;t be a very suitable answer for the other question. Similarly, I&#39;d come here, not to the other question, if I was in a Deserializer."},{"owner":{"account_id":447212,"reputation":3321,"user_id":840714,"accept_rate":62,"display_name":"Druckles"},"score":0,"creation_date":1669643579,"post_id":56915449,"comment_id":131682141,"body_markdown":"That&#39;s why I think they&#39;re different questions. And this question also doesn&#39;t have an answer over there; just a comment.","body":"That&#39;s why I think they&#39;re different questions. And this question also doesn&#39;t have an answer over there; just a comment."},{"owner":{"account_id":49802,"reputation":46805,"user_id":148423,"accept_rate":74,"display_name":"Joe"},"score":0,"creation_date":1692295923,"post_id":56915449,"comment_id":135607496,"body_markdown":"I came across this question, and I agree, I don&#39;t think it&#39;s a duplicate. I&#39;ve edited and requested it be re-opened.","body":"I came across this question, and I agree, I don&#39;t think it&#39;s a duplicate. I&#39;ve edited and requested it be re-opened."}],"answers":[{"tags":[],"owner":{"account_id":447212,"reputation":3321,"user_id":840714,"accept_rate":62,"display_name":"Druckles"},"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1577027048,"creation_date":1577027048,"answer_id":59445374,"question_id":56915449,"body_markdown":"You can use the `ObjectCodec` in `JsonParser` like this:\r\n\r\n    jp.getCodec().treeToValue(root.get(&quot;user&quot;), User.class)\r\n\r\nThis will give you your `User` object back according to any other existing serialization rules.\r\n\r\nThanks to @galcyurio for the comment in https://stackoverflow.com/questions/19711695/convert-jsonnode-into-pojo:\r\n\r\n&gt; You can also use this method in StdDeserializer: p.codec.treeToValue","title":"Convert JsonNode to POJO inside a custom StdDeserializer, when ObjectMapper is not available","body":"<p>You can use the <code>ObjectCodec</code> in <code>JsonParser</code> like this:</p>\n\n<pre><code>jp.getCodec().treeToValue(root.get(\"user\"), User.class)\n</code></pre>\n\n<p>This will give you your <code>User</code> object back according to any other existing serialization rules.</p>\n\n<p>Thanks to @galcyurio for the comment in <a href=\"https://stackoverflow.com/questions/19711695/convert-jsonnode-into-pojo\">Convert JsonNode into POJO</a>:</p>\n\n<blockquote>\n  <p>You can also use this method in StdDeserializer: p.codec.treeToValue</p>\n</blockquote>\n"}],"owner":{"account_id":234765,"reputation":7210,"user_id":501134,"accept_rate":54,"display_name":"mrdaliri"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1118,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"closed_date":1577261619,"accepted_answer_id":59445374,"answer_count":1,"score":4,"last_activity_date":1692295808,"creation_date":1562426966,"question_id":56915449,"body_markdown":"What I am trying to achieve is convert a `JsonNode` to a POJO (i.e. deserialize it) inside a custom deserializer.\r\n\r\nMost other answers, like [this one here](https://stackoverflow.com/questions/19711695/convert-jsonnode-into-pojo), suggest using `ObjectMapper`, but the `deserialize` method specifically does not have the object mapper, so the solutions do not work. This question is therefore not a duplicate. \r\n\r\nHere is my custom deserializer:\r\n\r\n```java\r\nclass AccountDeserializer extends StdDeserializer&lt;Input&gt; {\r\n    public AccountDeserializer() {\r\n        this(null);\r\n    }\r\n\r\n    public AccountDeserializer(Class&lt;?&gt; vc) {\r\n        super(vc);\r\n    }\r\n\r\n    @Override\r\n    public Account deserialize(JsonParser jp, DeserializationContext ctxt) throws IOException, JsonProcessingException {\r\n        JsonNode root = jp.getCodec().readTree(jp);\r\n        User user = root.get(&quot;user&quot;).????;\r\n\r\n        // other statements\r\n\r\n        Account acc = new Account(user);\r\n        return acc;\r\n    }\r\n}\r\n```\r\n\r\n(`User` is a simple class)\r\n\r\n","title":"Convert JsonNode to POJO inside a custom StdDeserializer, when ObjectMapper is not available","body":"<p>What I am trying to achieve is convert a <code>JsonNode</code> to a POJO (i.e. deserialize it) inside a custom deserializer.</p>\n<p>Most other answers, like <a href=\"https://stackoverflow.com/questions/19711695/convert-jsonnode-into-pojo\">this one here</a>, suggest using <code>ObjectMapper</code>, but the <code>deserialize</code> method specifically does not have the object mapper, so the solutions do not work. This question is therefore not a duplicate.</p>\n<p>Here is my custom deserializer:</p>\n<pre class=\"lang-java prettyprint-override\"><code>class AccountDeserializer extends StdDeserializer&lt;Input&gt; {\n    public AccountDeserializer() {\n        this(null);\n    }\n\n    public AccountDeserializer(Class&lt;?&gt; vc) {\n        super(vc);\n    }\n\n    @Override\n    public Account deserialize(JsonParser jp, DeserializationContext ctxt) throws IOException, JsonProcessingException {\n        JsonNode root = jp.getCodec().readTree(jp);\n        User user = root.get(&quot;user&quot;).????;\n\n        // other statements\n\n        Account acc = new Account(user);\n        return acc;\n    }\n}\n</code></pre>\n<p>(<code>User</code> is a simple class)</p>\n"},{"tags":["java","spring","spring-boot","jpa"],"comments":[{"owner":{"account_id":231721,"reputation":20460,"user_id":496099,"display_name":"Chris"},"score":0,"creation_date":1692294706,"post_id":76922177,"comment_id":135607279,"body_markdown":"You should probably tag this as a JSON issue, as this has little to do with JPA and everything to do with how your java objects are being serialized into JSON (spring uses Jackson). Also notices the differences in your classes - Lombok is annoying, but one has getters and setters, the one that isn&#39;t working doesn&#39;t. Jackson uses property access unless you configure it to use fields.","body":"You should probably tag this as a JSON issue, as this has little to do with JPA and everything to do with how your java objects are being serialized into JSON (spring uses Jackson). Also notices the differences in your classes - Lombok is annoying, but one has getters and setters, the one that isn&#39;t working doesn&#39;t. Jackson uses property access unless you configure it to use fields."}],"answers":[{"tags":[],"owner":{"account_id":231721,"reputation":20460,"user_id":496099,"display_name":"Chris"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1692295076,"creation_date":1692295076,"answer_id":76924043,"question_id":76922177,"body_markdown":"This issue has to do with your java objects serialization (via Jackson) to JSON, not JPA or the mappings. If you look at what is serialized:\r\n  \r\n\r\n    &quot;rentalType&quot;: {}\r\nYou can tell that there is an object being serialized, it just doesn&#39;t have any attributes or data. This is because Jackson will use property access by default.\r\n\r\nIf you check your entity definitions, the one that has data, Rental has:\r\n \r\n\r\n    @Getter @Setter @AllArgsConstructor @NoArgsConstructor \r\n\r\nWhile the RentalType class is just using:\r\n\r\n    @NoArgsConstructor @AllArgsConstructor \r\n\r\nIf you add in the getters and setters, Jackson will be able to see the properties and include them in the object JSON.\r\n","title":"Many to One microservice response not appear in postman","body":"<p>This issue has to do with your java objects serialization (via Jackson) to JSON, not JPA or the mappings. If you look at what is serialized:</p>\n<pre><code>&quot;rentalType&quot;: {}\n</code></pre>\n<p>You can tell that there is an object being serialized, it just doesn't have any attributes or data. This is because Jackson will use property access by default.</p>\n<p>If you check your entity definitions, the one that has data, Rental has:</p>\n<pre><code>@Getter @Setter @AllArgsConstructor @NoArgsConstructor \n</code></pre>\n<p>While the RentalType class is just using:</p>\n<pre><code>@NoArgsConstructor @AllArgsConstructor \n</code></pre>\n<p>If you add in the getters and setters, Jackson will be able to see the properties and include them in the object JSON.</p>\n"}],"owner":{"account_id":15452971,"reputation":3,"user_id":11147867,"display_name":"Ehsan-ul-haq Dar"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":32,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76924043,"answer_count":1,"score":0,"last_activity_date":1692295076,"creation_date":1692280340,"question_id":76922177,"body_markdown":"I make a microservice in controller my required values come from response but it not shown in postman but i post man i get the following response\r\n\r\n&gt; @RestController\r\n&gt; @RequestMapping(&quot;/rental&quot;)\r\n&gt; public class RentalController {\r\n&gt; \r\n&gt;     @Autowired\r\n&gt; private RentalService rentalService;\r\n&gt; \r\n&gt;     @GetMapping(&quot;/{id}&quot;)\r\n&gt; public ResponseEntity&lt;Rental&gt; getRental(@PathVariable(&quot;id&quot;) Long id){\r\n&gt; Rental rl = rentalService.findRentalById(id);\r\n&gt; return ResponseEntity.ok(rl);\r\n&gt;     }\r\n&gt; \r\n&gt;     @GetMapping(&quot;/viewAll&quot;)\r\n&gt; public List&lt;Rental&gt; getAllRental(){\r\n&gt; List&lt;Rental&gt; ls = rentalService.viewAllRental();\r\n&gt; return ls;\r\n&gt;     }\r\n&gt; \r\n&gt; }\r\n&gt; \r\n&gt; @Service\r\n&gt; public class RentalService {\r\n&gt; \r\n&gt;     @Autowired\r\n&gt; private RentalRepository rentalRepository;\r\n&gt; \r\n&gt;     @Autowired\r\n&gt; private RentalTypeRepository rentalTypeRepository;\r\n&gt; \r\n&gt;     @Autowired\r\n&gt; private SizeTypeRepository sizeTypeRepository;\r\n&gt;     @Autowired\r\n&gt; private SleepingArrangementRepository sleepingArrangementRepository;\r\n&gt; \r\n&gt; public Rental save(Rental rt) {\r\n&gt; return rentalRepository.save(rt);\r\n&gt;     }\r\n&gt; \r\n&gt; public Rental findRentalById(Long id) {\r\n&gt; return rentalRepository.findAllByRentalId(id);\r\n&gt;     }\r\n&gt; \r\n&gt; public List&lt;Rental&gt; viewAllRental(){\r\n&gt; List&lt;Rental&gt; lsRental= new ArrayList&lt;Rental&gt;();\r\n&gt; lsRental = rentalRepository.findAll();\r\n&gt; \r\n&gt; return lsRental;\r\n&gt;     }\r\n&gt; \r\n&gt; public List&lt;RentalType&gt; viewAllRentalType(){\r\n&gt; List&lt;RentalType&gt; lsRental= new ArrayList&lt;RentalType&gt;();\r\n&gt; lsRental = rentalTypeRepository.findAll();\r\n&gt; return lsRental;\r\n&gt;     }\r\n&gt; \r\n&gt; public List&lt;SizeType&gt; viewAllSizeType(){\r\n&gt; List&lt;SizeType&gt; lsSizeType= new ArrayList&lt;SizeType&gt;();\r\n&gt; lsSizeType = sizeTypeRepository.findAll();\r\n&gt; return lsSizeType;\r\n&gt;     }\r\n&gt; \r\n&gt; }\r\n&gt; \r\n&gt; @Repository\r\n&gt; public interface RentalRepository extends JpaRepository\\&lt;Rental, Long\\&gt; {\r\n&gt; \r\n&gt; public Rental findAllByRentalId(Long id);\r\n&gt; \r\n&gt; }\r\n&gt; \r\n&gt; @Entity\r\n&gt; @Getter\r\n&gt; @Setter\r\n&gt; @AllArgsConstructor\r\n&gt; @NoArgsConstructor\r\n&gt; @Table(name=&quot;rental&quot;,schema=&quot;bnb_pms&quot;)\r\n&gt; public class Rental {\r\n&gt; \r\n&gt;     @Id\r\n&gt;     @GeneratedValue(strategy = GenerationType.AUTO)\r\n&gt;     @Column(name=&quot;RENTAL_ID&quot;)\r\n&gt; private long rentalId;\r\n&gt; \r\n&gt;     @Column(name=&quot;RENTAL_NAME&quot;)\r\n&gt; private String rentalName;\r\n&gt; \r\n&gt;     @Column(name=&quot;INTERNAL_NAME&quot;)\r\n&gt; private String internalName;\r\n&gt; \r\n&gt;     @Column(name=&quot;DES&quot;)\r\n&gt; private String des;\r\n&gt; \r\n&gt;     @ManyToOne(cascade = { CascadeType.MERGE, CascadeType.PERSIST })\r\n&gt;     @JoinColumn(name=&quot;TYPE_ID&quot;)\r\n&gt; private RentalType rentalType;\r\n&gt; \r\n&gt;     @Column(name=&quot;RENTAL_SIZE&quot;)\r\n&gt; private int rentalSize;\r\n&gt; \r\n&gt;     @Column(name=&quot;GUEST_ACCOMODATE&quot;)\r\n&gt; private int guestAccomodate;\r\n&gt; \r\n&gt;     @Column(name=&quot;TOTAL_UNITS&quot;)\r\n&gt; private int totalUnits;\r\n&gt; \r\n&gt; }\r\n&gt; \r\n&gt; \r\n&gt; @Entity\r\n&gt; @NoArgsConstructor\r\n&gt; @AllArgsConstructor\r\n&gt; @Table(name=&quot;rental_type&quot;,schema=&quot;bnb_pms&quot;)\r\n&gt; public class RentalType {\r\n&gt; \r\n&gt;     @Id\r\n&gt;     @GeneratedValue(strategy = GenerationType.AUTO)\r\n&gt;     @Column(name=&quot;TYPE_ID&quot;)\r\n&gt; private long typeId;\r\n&gt; \r\n&gt;     @Column(name=&quot;TYPE_NAME&quot;)\r\n&gt; private String typeName;\r\n&gt; \r\n&gt; }\r\n\r\nIn response i get the value of rental type as shown in figure,\r\n[debugger image](https://i.stack.imgur.com/10mQ7.png)\r\n\r\nbut in postman rental type object is not shown. Postman response is as follow,\r\n\r\n&gt; {\r\n&gt;     &quot;rentalId&quot;: 453,\r\n&gt;     &quot;rentalName&quot;: &quot;Ehsan ulhaq Darrr1659&quot;,\r\n&gt;     &quot;internalName&quot;: &quot;Khadim Hussain Dar&quot;,\r\n&gt;     &quot;des&quot;: &quot;ehsandar@gmail.com&quot;,\r\n&gt;     &quot;rentalType&quot;: {},\r\n&gt;     &quot;rentalSize&quot;: 2,\r\n&gt;     &quot;guestAccomodate&quot;: 4,\r\n&gt;     &quot;totalUnits&quot;: 3\r\n&gt; }","title":"Many to One microservice response not appear in postman","body":"<p>I make a microservice in controller my required values come from response but it not shown in postman but i post man i get the following response</p>\n<blockquote>\n<p>@RestController\n@RequestMapping(&quot;/rental&quot;)\npublic class RentalController {</p>\n<pre><code>@Autowired\n</code></pre>\n<p>private RentalService rentalService;</p>\n<pre><code>@GetMapping(&quot;/{id}&quot;)\n</code></pre>\n<p>public ResponseEntity getRental(@PathVariable(&quot;id&quot;) Long id){\nRental rl = rentalService.findRentalById(id);\nreturn ResponseEntity.ok(rl);\n}</p>\n<pre><code>@GetMapping(&quot;/viewAll&quot;)\n</code></pre>\n<p>public List getAllRental(){\nList ls = rentalService.viewAllRental();\nreturn ls;\n}</p>\n<p>}</p>\n<p>@Service\npublic class RentalService {</p>\n<pre><code>@Autowired\n</code></pre>\n<p>private RentalRepository rentalRepository;</p>\n<pre><code>@Autowired\n</code></pre>\n<p>private RentalTypeRepository rentalTypeRepository;</p>\n<pre><code>@Autowired\n</code></pre>\n<p>private SizeTypeRepository sizeTypeRepository;\n@Autowired\nprivate SleepingArrangementRepository sleepingArrangementRepository;</p>\n<p>public Rental save(Rental rt) {\nreturn rentalRepository.save(rt);\n}</p>\n<p>public Rental findRentalById(Long id) {\nreturn rentalRepository.findAllByRentalId(id);\n}</p>\n<p>public List viewAllRental(){\nList lsRental= new ArrayList();\nlsRental = rentalRepository.findAll();</p>\n<p>return lsRental;\n}</p>\n<p>public List viewAllRentalType(){\nList lsRental= new ArrayList();\nlsRental = rentalTypeRepository.findAll();\nreturn lsRental;\n}</p>\n<p>public List viewAllSizeType(){\nList lsSizeType= new ArrayList();\nlsSizeType = sizeTypeRepository.findAll();\nreturn lsSizeType;\n}</p>\n<p>}</p>\n<p>@Repository\npublic interface RentalRepository extends JpaRepository&lt;Rental, Long&gt; {</p>\n<p>public Rental findAllByRentalId(Long id);</p>\n<p>}</p>\n<p>@Entity\n@Getter\n@Setter\n@AllArgsConstructor\n@NoArgsConstructor\n@Table(name=&quot;rental&quot;,schema=&quot;bnb_pms&quot;)\npublic class Rental {</p>\n<pre><code>@Id\n@GeneratedValue(strategy = GenerationType.AUTO)\n@Column(name=&quot;RENTAL_ID&quot;)\n</code></pre>\n<p>private long rentalId;</p>\n<pre><code>@Column(name=&quot;RENTAL_NAME&quot;)\n</code></pre>\n<p>private String rentalName;</p>\n<pre><code>@Column(name=&quot;INTERNAL_NAME&quot;)\n</code></pre>\n<p>private String internalName;</p>\n<pre><code>@Column(name=&quot;DES&quot;)\n</code></pre>\n<p>private String des;</p>\n<pre><code>@ManyToOne(cascade = { CascadeType.MERGE, CascadeType.PERSIST })\n@JoinColumn(name=&quot;TYPE_ID&quot;)\n</code></pre>\n<p>private RentalType rentalType;</p>\n<pre><code>@Column(name=&quot;RENTAL_SIZE&quot;)\n</code></pre>\n<p>private int rentalSize;</p>\n<pre><code>@Column(name=&quot;GUEST_ACCOMODATE&quot;)\n</code></pre>\n<p>private int guestAccomodate;</p>\n<pre><code>@Column(name=&quot;TOTAL_UNITS&quot;)\n</code></pre>\n<p>private int totalUnits;</p>\n<p>}</p>\n<p>@Entity\n@NoArgsConstructor\n@AllArgsConstructor\n@Table(name=&quot;rental_type&quot;,schema=&quot;bnb_pms&quot;)\npublic class RentalType {</p>\n<pre><code>@Id\n@GeneratedValue(strategy = GenerationType.AUTO)\n@Column(name=&quot;TYPE_ID&quot;)\n</code></pre>\n<p>private long typeId;</p>\n<pre><code>@Column(name=&quot;TYPE_NAME&quot;)\n</code></pre>\n<p>private String typeName;</p>\n<p>}</p>\n</blockquote>\n<p>In response i get the value of rental type as shown in figure,\n<a href=\"https://i.stack.imgur.com/10mQ7.png\" rel=\"nofollow noreferrer\">debugger image</a></p>\n<p>but in postman rental type object is not shown. Postman response is as follow,</p>\n<blockquote>\n<p>{\n&quot;rentalId&quot;: 453,\n&quot;rentalName&quot;: &quot;Ehsan ulhaq Darrr1659&quot;,\n&quot;internalName&quot;: &quot;Khadim Hussain Dar&quot;,\n&quot;des&quot;: &quot;ehsandar@gmail.com&quot;,\n&quot;rentalType&quot;: {},\n&quot;rentalSize&quot;: 2,\n&quot;guestAccomodate&quot;: 4,\n&quot;totalUnits&quot;: 3\n}</p>\n</blockquote>\n"},{"tags":["java","zebra-printers","printers"],"answers":[{"tags":[],"owner":{"account_id":2053598,"reputation":41316,"user_id":1831987,"display_name":"VGR"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1692294577,"creation_date":1692189677,"answer_id":76913640,"question_id":76912039,"body_markdown":"I’m not clear on what `PrintServiceLookup.DRIVER` is.  I see no DRIVER field in [the PrintServiceLookup class](https://docs.oracle.com/en/java/javase/20/docs/api/java.desktop/javax/print/PrintServiceLookup.html).\r\n\r\nYou might be able to obtain the address from the PrintService’s [PrinterURI](https://docs.oracle.com/en/java/javase/20/docs/api/java.desktop/javax/print/attribute/standard/PrinterURI.html) attribute.  (I have no printers here, so I don’t currently have a way to verify whether this works.)\r\n\r\n    Optional&lt;InetAddress&gt; ipAddress = Optional.empty();\r\n\r\n    PrinterURI uriAttr = service.getAttribute(PrinterURI.class);\r\n    if (uriAttr != null) {\r\n        URI printerURI = uriAttr.getURI();\r\n        String hostname = printerURI.getHost();\r\n        if (hostname != null) {\r\n            ipAddress = Optional.of(InetAddress.getByName(hostname));\r\n        }\r\n    }\r\n","title":"how to find the ip address of a printer with its printer driver in java?","body":"<p>I’m not clear on what <code>PrintServiceLookup.DRIVER</code> is.  I see no DRIVER field in <a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.desktop/javax/print/PrintServiceLookup.html\" rel=\"nofollow noreferrer\">the PrintServiceLookup class</a>.</p>\n<p>You might be able to obtain the address from the PrintService’s <a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.desktop/javax/print/attribute/standard/PrinterURI.html\" rel=\"nofollow noreferrer\">PrinterURI</a> attribute.  (I have no printers here, so I don’t currently have a way to verify whether this works.)</p>\n<pre><code>Optional&lt;InetAddress&gt; ipAddress = Optional.empty();\n\nPrinterURI uriAttr = service.getAttribute(PrinterURI.class);\nif (uriAttr != null) {\n    URI printerURI = uriAttr.getURI();\n    String hostname = printerURI.getHost();\n    if (hostname != null) {\n        ipAddress = Optional.of(InetAddress.getByName(hostname));\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":28602642,"reputation":1,"user_id":21899232,"display_name":"Aravind A"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":108,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1692294577,"creation_date":1692176460,"question_id":76912039,"body_markdown":"       PrintService[] printServices = PrintServiceLookup.lookupPrintServices(null, null);\r\n\r\n        System.out.println(&quot;Available Printer Drivers:&quot;);\r\n        for (PrintService service : printServices) {\r\n            String printerName = service.getName();\r\n            String driverClassName = (String) service.getAttribute(PrintServiceLookup.DRIVER);\r\n\r\n            System.out.println(&quot;Printer Name: &quot; + printerName);\r\n            System.out.println(&quot;Driver Class Name: &quot; + driverClassName);\r\n            System.out.println(&quot;--------------------------------------&quot;);\r\n        }\r\n    }\r\n\r\n\r\nthe above code will take the installed printer drivers and print that in console.\r\n\r\n\r\n\r\nwith that printer name i want to find the ip address assume every printer is connected to the wifi as the laptop.","title":"how to find the ip address of a printer with its printer driver in java?","body":"<pre><code>   PrintService[] printServices = PrintServiceLookup.lookupPrintServices(null, null);\n\n    System.out.println(&quot;Available Printer Drivers:&quot;);\n    for (PrintService service : printServices) {\n        String printerName = service.getName();\n        String driverClassName = (String) service.getAttribute(PrintServiceLookup.DRIVER);\n\n        System.out.println(&quot;Printer Name: &quot; + printerName);\n        System.out.println(&quot;Driver Class Name: &quot; + driverClassName);\n        System.out.println(&quot;--------------------------------------&quot;);\n    }\n}\n</code></pre>\n<p>the above code will take the installed printer drivers and print that in console.</p>\n<p>with that printer name i want to find the ip address assume every printer is connected to the wifi as the laptop.</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":5404,"reputation":22089,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"score":0,"creation_date":1692277178,"post_id":76921680,"comment_id":135603267,"body_markdown":"What is the implementation of `PhoneType`? Enum?","body":"What is the implementation of <code>PhoneType</code>? Enum?"},{"owner":{"account_id":18069010,"reputation":2524,"user_id":13134095,"display_name":"Manfred"},"score":0,"creation_date":1692279836,"post_id":76921680,"comment_id":135603926,"body_markdown":"Can you post the output of `javap -v &#39;shared/vo/Phone$WhenMappings.class&#39;`?","body":"Can you post the output of <code>javap -v &#39;shared&#47;vo&#47;Phone$WhenMappings.class&#39;</code>?"}],"answers":[{"tags":[],"owner":{"account_id":202054,"reputation":23899,"user_id":448875,"display_name":"broot"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1692280312,"creation_date":1692277449,"answer_id":76921812,"question_id":76921680,"body_markdown":"When we compile the code, the compiler often has to generate some additional synthetic classes or members. This is the case e.g. if using `when` with an enum. In that case the compiler generates an array which maps enum ordinals into execution branches (`when` cases), so `when` can be executed much faster. It has to store this array somewhere, so it synthesizes an additional class for it. In the above case this additional class is named `Phone$WhenMappings`. I believe the Java compiler does a similar thing when using `switch` over an enum.\r\n\r\nFor this reason we can&#39;t expect there will be no &quot;regular&quot; classes in the bytecode. I think your tests should run only against classes that exists explicitly in the source code. I don&#39;t know ArchUnit and what are best practices for using it, but maybe you should ignore synthetic classes when running tests?\r\n\r\nYou will probably see similar problems if using other features of Kotlin, e.g. lambdas. They also require to generate synthetic classes in the bytecode and these classes don&#39;t meet your requirements.","title":"ArchUnit detects statement as an error - javap","body":"<p>When we compile the code, the compiler often has to generate some additional synthetic classes or members. This is the case e.g. if using <code>when</code> with an enum. In that case the compiler generates an array which maps enum ordinals into execution branches (<code>when</code> cases), so <code>when</code> can be executed much faster. It has to store this array somewhere, so it synthesizes an additional class for it. In the above case this additional class is named <code>Phone$WhenMappings</code>. I believe the Java compiler does a similar thing when using <code>switch</code> over an enum.</p>\n<p>For this reason we can't expect there will be no &quot;regular&quot; classes in the bytecode. I think your tests should run only against classes that exists explicitly in the source code. I don't know ArchUnit and what are best practices for using it, but maybe you should ignore synthetic classes when running tests?</p>\n<p>You will probably see similar problems if using other features of Kotlin, e.g. lambdas. They also require to generate synthetic classes in the bytecode and these classes don't meet your requirements.</p>\n"}],"owner":{"account_id":28614024,"reputation":23,"user_id":21908428,"display_name":"JonathanSessenioo"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":78,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1692294342,"creation_date":1692276443,"question_id":76921680,"body_markdown":"I have such a test that checks if the `shared` package has only interfaces, enums and data classes.\r\n\r\n    package demo\r\n    \r\n    class Phone {\r\n        fun doSomething(arg: Foo) = when(arg) {\r\n            Foo.ABC -&gt; &quot;abc&quot;\r\n            Foo.DEF -&gt; &quot;def&quot;\r\n        }\r\n    }\r\n    \r\n    enum class Foo {\r\n        ABC, DEF\r\n    }\r\n\r\nWe can see that Kotlin generates an additional synthetic class `Phone$WhenMappings`, and that ArchUnit rule tries to analyze it despite that it makes no sense.\r\n  ","title":"ArchUnit detects statement as an error - javap","body":"<p>I have such a test that checks if the <code>shared</code> package has only interfaces, enums and data classes.</p>\n<pre><code>package demo\n\nclass Phone {\n    fun doSomething(arg: Foo) = when(arg) {\n        Foo.ABC -&gt; &quot;abc&quot;\n        Foo.DEF -&gt; &quot;def&quot;\n    }\n}\n\nenum class Foo {\n    ABC, DEF\n}\n</code></pre>\n<p>We can see that Kotlin generates an additional synthetic class <code>Phone$WhenMappings</code>, and that ArchUnit rule tries to analyze it despite that it makes no sense.</p>\n"},{"tags":["java","visual-studio-code","formatting"],"comments":[{"owner":{"account_id":13650861,"reputation":49,"user_id":9848783,"display_name":"chip coint"},"score":1,"creation_date":1617620911,"post_id":66946766,"comment_id":118346103,"body_markdown":"i think this isn&#39;t possible, and you would have to edit the extension itself","body":"i think this isn&#39;t possible, and you would have to edit the extension itself"},{"owner":{"account_id":13523174,"reputation":1121,"user_id":12218938,"display_name":"wristbands"},"score":0,"creation_date":1617736769,"post_id":66946766,"comment_id":118387533,"body_markdown":"Ok thanks @chipcoint. That&#39;s what I was worried about but make sense.","body":"Ok thanks @chipcoint. That&#39;s what I was worried about but make sense."}],"answers":[{"tags":[],"owner":{"account_id":19088616,"reputation":8284,"user_id":13939333,"display_name":"Molly Wang-MSFT"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1617676612,"creation_date":1617676612,"answer_id":66962039,"question_id":66946766,"body_markdown":"In **Settings.json**, set\r\n\r\n    &quot;editor.wordWrap&quot;: &quot;wordWrapColumn&quot;,\r\n    &quot;editor.wordWrapColumn&quot;: 79,\r\n\r\nWhen code is over the max length, which is 80 now, it will turn to the next line:\r\n\r\n[![enter image description here][1]][1]\r\n\r\nAfter coding, right click in current .java file and choose **Format Document**, all code will be formatted by the wordWrap setting and the max length will be 80.\r\n\r\n  [1]: https://i.stack.imgur.com/XGsu0.gif","title":"How to change max line length for formatter provided by Language Support for Java(TM) by Red Hat extension in Visual Studio Code?","body":"<p>In <strong>Settings.json</strong>, set</p>\n<pre><code>&quot;editor.wordWrap&quot;: &quot;wordWrapColumn&quot;,\n&quot;editor.wordWrapColumn&quot;: 79,\n</code></pre>\n<p>When code is over the max length, which is 80 now, it will turn to the next line:</p>\n<p><a href=\"https://i.stack.imgur.com/XGsu0.gif\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/XGsu0.gif\" alt=\"enter image description here\" /></a></p>\n<p>After coding, right click in current .java file and choose <strong>Format Document</strong>, all code will be formatted by the wordWrap setting and the max length will be 80.</p>\n"},{"tags":[],"owner":{"account_id":1961640,"reputation":12136,"user_id":1763035,"accept_rate":56,"display_name":"Andy Brown"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689928636,"creation_date":1689928636,"answer_id":76736400,"question_id":66946766,"body_markdown":"The setting you&#39;re looking for is `org.eclipse.jdt.core.formatter.lineSplit` which is located in your java formatter style XML file. \r\n\r\nFirst open your settings json file and find the `java.format.settings.url` option. It is a file url pointing to the style XML file. Open the XML file for editing.\r\n\r\nIf you already have an `org.eclipse.jdt.core.formatter.lineSplit` setting then change it to `80`. If not then paste in the following:\r\n\r\n```\r\n&lt;setting id=&quot;org.eclipse.jdt.core.formatter.lineSplit&quot; value=&quot;80&quot;/&gt;\r\n```\r\n\r\nYou *must* restart vscode for the changes to take effect.\r\n\r\nI had the opposite problem to you and wanted to prevent vscode from breaking lines except in extreme cases so I set it to `200`.","title":"How to change max line length for formatter provided by Language Support for Java(TM) by Red Hat extension in Visual Studio Code?","body":"<p>The setting you're looking for is <code>org.eclipse.jdt.core.formatter.lineSplit</code> which is located in your java formatter style XML file.</p>\n<p>First open your settings json file and find the <code>java.format.settings.url</code> option. It is a file url pointing to the style XML file. Open the XML file for editing.</p>\n<p>If you already have an <code>org.eclipse.jdt.core.formatter.lineSplit</code> setting then change it to <code>80</code>. If not then paste in the following:</p>\n<pre><code>&lt;setting id=&quot;org.eclipse.jdt.core.formatter.lineSplit&quot; value=&quot;80&quot;/&gt;\n</code></pre>\n<p>You <em>must</em> restart vscode for the changes to take effect.</p>\n<p>I had the opposite problem to you and wanted to prevent vscode from breaking lines except in extreme cases so I set it to <code>200</code>.</p>\n"},{"tags":[],"owner":{"account_id":315536,"reputation":1786,"user_id":631272,"display_name":"Marquee"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1692294300,"creation_date":1692293542,"answer_id":76923883,"question_id":66946766,"body_markdown":"The answers in this GitHub issue fixed it for me: https://github.com/redhat-developer/vscode-java/issues/1709\r\n\r\nI particularly liked rgrunber&#39;s solution to place the prefs in the .vscode folder:\r\n\r\n1. Create `.vscode/settings.prefs` and add the following lines:\r\n\r\n```\r\norg.eclipse.jdt.core.formatter.lineSplit=80\r\norg.eclipse.jdt.core.formatter.comment.line_length=80\r\n```\r\n\r\n2. Update `settings.json`\r\n\r\n```\r\n{\r\n\t&quot;java.settings.url&quot;: &quot;.vscode/settings.prefs&quot;\r\n}\r\n```\r\n\r\nI expanded upon it and followed the same pattern for my exported eclipse formatter prefs that I have used for years:\r\n\r\n1. Create `.vscode/formatter-settings.xml`:\r\n\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; standalone=&quot;no&quot;?&gt;\r\n&lt;profiles version=&quot;21&quot;&gt;\r\n    &lt;profile kind=&quot;CodeFormatterProfile&quot; name=&quot;My Formatter&quot; version=&quot;21&quot;&gt;\r\n        &lt;setting id=&quot;org.eclipse.jdt.core.formatter.insert_space_after_ellipsis&quot; value=&quot;insert&quot;/&gt;\r\n        &lt;setting id=&quot;org.eclipse.jdt.core.formatter.insert_space_after_comma_in_enum_declarations&quot; value=&quot;insert&quot;/&gt;\r\n        &lt;setting id=&quot;org.eclipse.jdt.core.formatter.insert_space_before_comma_in_allocation_expression&quot; value=&quot;do not insert&quot;/&gt;\r\n        &lt;setting id=&quot;org.eclipse.jdt.core.formatter.parentheses_positions_in_for_statment&quot; value=&quot;common_lines&quot;/&gt;\r\n        &lt;setting id=&quot;org.eclipse.jdt.core.formatter.comment.new_lines_at_block_boundaries&quot; value=&quot;true&quot;/&gt;\r\n...\r\n    &lt;/profile&gt;\r\n&lt;/profiles&gt;\r\n```\r\n\r\n2. Update `settings.json`:\r\n\r\n```\r\n{\r\n\t&quot;java.settings.url&quot;: &quot;.vscode/settings.prefs&quot;,\r\n\t&quot;java.format.settings.url&quot;: &quot;.vscode/formatter-settings.xml&quot;\r\n}\r\n```\r\n\r\nIf you want it to sync across devices, you could instead reference them from a public github repo (append ?raw=true) and set those uris instead.\r\n\r\n```\r\n{\r\n    &quot;java.settings.url&quot;: &quot;https://github.com/themarquee/vscode-settings/blob/main/settings.prefs?raw=true&quot;,\r\n    &quot;java.format.settings.url&quot;: &quot;https://github.com/themarquee/vscode-settings/blob/main/formatter-settings.xml?raw=true&quot;\r\n}\r\n```\r\n\r\nVoila! Finally after 2 years my vscode formats how I want it to!","title":"How to change max line length for formatter provided by Language Support for Java(TM) by Red Hat extension in Visual Studio Code?","body":"<p>The answers in this GitHub issue fixed it for me: <a href=\"https://github.com/redhat-developer/vscode-java/issues/1709\" rel=\"nofollow noreferrer\">https://github.com/redhat-developer/vscode-java/issues/1709</a></p>\n<p>I particularly liked rgrunber's solution to place the prefs in the .vscode folder:</p>\n<ol>\n<li>Create <code>.vscode/settings.prefs</code> and add the following lines:</li>\n</ol>\n<pre><code>org.eclipse.jdt.core.formatter.lineSplit=80\norg.eclipse.jdt.core.formatter.comment.line_length=80\n</code></pre>\n<ol start=\"2\">\n<li>Update <code>settings.json</code></li>\n</ol>\n<pre><code>{\n    &quot;java.settings.url&quot;: &quot;.vscode/settings.prefs&quot;\n}\n</code></pre>\n<p>I expanded upon it and followed the same pattern for my exported eclipse formatter prefs that I have used for years:</p>\n<ol>\n<li>Create <code>.vscode/formatter-settings.xml</code>:</li>\n</ol>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; standalone=&quot;no&quot;?&gt;\n&lt;profiles version=&quot;21&quot;&gt;\n    &lt;profile kind=&quot;CodeFormatterProfile&quot; name=&quot;My Formatter&quot; version=&quot;21&quot;&gt;\n        &lt;setting id=&quot;org.eclipse.jdt.core.formatter.insert_space_after_ellipsis&quot; value=&quot;insert&quot;/&gt;\n        &lt;setting id=&quot;org.eclipse.jdt.core.formatter.insert_space_after_comma_in_enum_declarations&quot; value=&quot;insert&quot;/&gt;\n        &lt;setting id=&quot;org.eclipse.jdt.core.formatter.insert_space_before_comma_in_allocation_expression&quot; value=&quot;do not insert&quot;/&gt;\n        &lt;setting id=&quot;org.eclipse.jdt.core.formatter.parentheses_positions_in_for_statment&quot; value=&quot;common_lines&quot;/&gt;\n        &lt;setting id=&quot;org.eclipse.jdt.core.formatter.comment.new_lines_at_block_boundaries&quot; value=&quot;true&quot;/&gt;\n...\n    &lt;/profile&gt;\n&lt;/profiles&gt;\n</code></pre>\n<ol start=\"2\">\n<li>Update <code>settings.json</code>:</li>\n</ol>\n<pre><code>{\n    &quot;java.settings.url&quot;: &quot;.vscode/settings.prefs&quot;,\n    &quot;java.format.settings.url&quot;: &quot;.vscode/formatter-settings.xml&quot;\n}\n</code></pre>\n<p>If you want it to sync across devices, you could instead reference them from a public github repo (append ?raw=true) and set those uris instead.</p>\n<pre><code>{\n    &quot;java.settings.url&quot;: &quot;https://github.com/themarquee/vscode-settings/blob/main/settings.prefs?raw=true&quot;,\n    &quot;java.format.settings.url&quot;: &quot;https://github.com/themarquee/vscode-settings/blob/main/formatter-settings.xml?raw=true&quot;\n}\n</code></pre>\n<p>Voila! Finally after 2 years my vscode formats how I want it to!</p>\n"}],"owner":{"account_id":13523174,"reputation":1121,"user_id":12218938,"display_name":"wristbands"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":4861,"favorite_count":0,"down_vote_count":0,"up_vote_count":7,"answer_count":3,"score":7,"last_activity_date":1692294300,"creation_date":1617579329,"question_id":66946766,"body_markdown":"I have the *Language Support for Java(TM) by Red Hat* extension installed in Visual Studio Code. Among other features, this extension can auto-format java code. I have it set to do this whenever I save the file.\r\n\r\nIt appears to have the max line length set to 120 characters, but I would like to set it to 80 characters. I have been searching everywhere but I can&#39;t figure out where to find the relevant setting.\r\n\r\nIs it possible to set the formatter to a different max line length? If so, how?","title":"How to change max line length for formatter provided by Language Support for Java(TM) by Red Hat extension in Visual Studio Code?","body":"<p>I have the <em>Language Support for Java(TM) by Red Hat</em> extension installed in Visual Studio Code. Among other features, this extension can auto-format java code. I have it set to do this whenever I save the file.</p>\n<p>It appears to have the max line length set to 120 characters, but I would like to set it to 80 characters. I have been searching everywhere but I can't figure out where to find the relevant setting.</p>\n<p>Is it possible to set the formatter to a different max line length? If so, how?</p>\n"},{"tags":["java","jpa","spring-boot","spring-batch"],"comments":[{"owner":{"account_id":3052937,"reputation":17914,"user_id":2587166,"accept_rate":83,"display_name":"Luca Basso Ricci"},"score":0,"creation_date":1453303987,"post_id":34902380,"comment_id":57544236,"body_markdown":"Do you have some component marked with @Transactional? Usually it is the source of transaction problems","body":"Do you have some component marked with @Transactional? Usually it is the source of transaction problems"},{"owner":{"account_id":7332995,"reputation":639,"user_id":5585279,"accept_rate":40,"display_name":"Gopi"},"score":0,"creation_date":1453374051,"post_id":34902380,"comment_id":57577543,"body_markdown":"Thank you for reply. I dont have @Transactional anywhere in my code. It is working when i setted the commit interval to 1 .if i setted to 100 or 1000 or 10000 it is failing.","body":"Thank you for reply. I dont have @Transactional anywhere in my code. It is working when i setted the commit interval to 1 .if i setted to 100 or 1000 or 10000 it is failing."}],"answers":[{"tags":[],"owner":{"account_id":13022667,"reputation":85,"user_id":9411531,"display_name":"Rakesh Gurung"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1550819385,"creation_date":1550819385,"answer_id":54821814,"question_id":34902380,"body_markdown":"I had same error &quot;Commit failed while step execution data was already updated. Reverting to old version&quot; and I solved it by using &quot;\t@Transactional(propagation = Propagation.REQUIRES_NEW)&quot; annotation above the method where the records were committed.","title":"Commit failed while step execution data was already updated","body":"<p>I had same error \"Commit failed while step execution data was already updated. Reverting to old version\" and I solved it by using \" @Transactional(propagation = Propagation.REQUIRES_NEW)\" annotation above the method where the records were committed.</p>\n"}],"owner":{"account_id":7332995,"reputation":639,"user_id":5585279,"accept_rate":40,"display_name":"Gopi"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":10538,"favorite_count":0,"down_vote_count":0,"up_vote_count":5,"answer_count":1,"score":5,"last_activity_date":1692293801,"creation_date":1453299220,"question_id":34902380,"body_markdown":"I am getting Commit failed while step execution data was already updated error when spring batch try to commit the records. Any help would be greatly appreciated.\r\nI am using HIbernate JPA .\r\n\r\nIt is working for lesser number of records. Throwing error when the record count is high. \r\n\r\nStack Trace:\r\n\r\n    2016-01-20 08:49:45 INFO  TaskletStep:359 - Commit failed while step execution data was already updated. Reverting to old version.\r\n    2016-01-20 08:49:45 ERROR TaskletStep:370 - Rolling back with transaction in unknown state\r\n    2016-01-20 08:49:45 ERROR AbstractStep:225 - Encountered an error executing  step uploadFiles in job fileUploadJob\r\n    org.springframework.transaction.TransactionSystemException: Could not commit JPA transaction; nested exception is javax.persistence.RollbackException:  Transaction marked as rollbackOnly\r\n\tat org.springframework.orm.jpa.JpaTransactionManager.doCommit(JpaTransactionManager.java:524)\r\n\tat org.springframework.transaction.support.AbstractPlatformTransactionManager.processCommit(AbstractPlatformTransactionManager.java:757)\r\n\tat org.springframework.transaction.support.AbstractPlatformTransactionManager.commit(AbstractPlatformTransactionManager.java:726)\r\n\r\n    ","title":"Commit failed while step execution data was already updated","body":"<p>I am getting Commit failed while step execution data was already updated error when spring batch try to commit the records. Any help would be greatly appreciated.\nI am using HIbernate JPA .</p>\n\n<p>It is working for lesser number of records. Throwing error when the record count is high. </p>\n\n<p>Stack Trace:</p>\n\n<pre><code>2016-01-20 08:49:45 INFO  TaskletStep:359 - Commit failed while step execution data was already updated. Reverting to old version.\n2016-01-20 08:49:45 ERROR TaskletStep:370 - Rolling back with transaction in unknown state\n2016-01-20 08:49:45 ERROR AbstractStep:225 - Encountered an error executing  step uploadFiles in job fileUploadJob\norg.springframework.transaction.TransactionSystemException: Could not commit JPA transaction; nested exception is javax.persistence.RollbackException:  Transaction marked as rollbackOnly\nat org.springframework.orm.jpa.JpaTransactionManager.doCommit(JpaTransactionManager.java:524)\nat org.springframework.transaction.support.AbstractPlatformTransactionManager.processCommit(AbstractPlatformTransactionManager.java:757)\nat org.springframework.transaction.support.AbstractPlatformTransactionManager.commit(AbstractPlatformTransactionManager.java:726)\n</code></pre>\n"},{"tags":["java","generics","tree","static","binary-tree"],"comments":[{"owner":{"account_id":23783500,"reputation":5175,"user_id":17795888,"display_name":"Chaosfire"},"score":3,"creation_date":1692292971,"post_id":76923812,"comment_id":135606930,"body_markdown":"`rootNode` should **not** be static. Static belongs to the class, not the instance.","body":"<code>rootNode</code> should <b>not</b> be static. Static belongs to the class, not the instance."},{"owner":{"account_id":1691630,"reputation":49583,"user_id":1553851,"accept_rate":73,"display_name":"shmosel"},"score":1,"creation_date":1692293048,"post_id":76923812,"comment_id":135606952,"body_markdown":"Note that `T` in `BinaryTree&lt;T&gt;` is not the same as that in `Node&lt;T&gt;`. You may want to remove the latter declaration and make the class non-static.","body":"Note that <code>T</code> in <code>BinaryTree&lt;T&gt;</code> is not the same as that in <code>Node&lt;T&gt;</code>. You may want to remove the latter declaration and make the class non-static."},{"owner":{"account_id":465573,"reputation":192694,"user_id":869736,"accept_rate":82,"display_name":"Louis Wasserman"},"score":0,"creation_date":1692297761,"post_id":76923812,"comment_id":135607819,"body_markdown":"I recommend against trying to have Node&#39;s constructor interact with rootNode at all, whether it&#39;s static or not.","body":"I recommend against trying to have Node&#39;s constructor interact with rootNode at all, whether it&#39;s static or not."},{"owner":{"account_id":29238818,"reputation":13,"user_id":22400834,"display_name":"sof"},"score":0,"creation_date":1692387128,"post_id":76923812,"comment_id":135621096,"body_markdown":"@LouisWasserman Oh, why is that?","body":"@LouisWasserman Oh, why is that?"},{"owner":{"account_id":29238818,"reputation":13,"user_id":22400834,"display_name":"sof"},"score":0,"creation_date":1692387181,"post_id":76923812,"comment_id":135621107,"body_markdown":"@Chaosfire got it","body":"@Chaosfire got it"},{"owner":{"account_id":465573,"reputation":192694,"user_id":869736,"accept_rate":82,"display_name":"Louis Wasserman"},"score":0,"creation_date":1692409362,"post_id":76923812,"comment_id":135623413,"body_markdown":"BinaryTree should manage its own root.  Constructors shouldn&#39;t have any logic and certainly should never modify outside state.","body":"BinaryTree should manage its own root.  Constructors shouldn&#39;t have any logic and certainly should never modify outside state."}],"owner":{"account_id":29238818,"reputation":13,"user_id":22400834,"display_name":"sof"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":18,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1692292979,"answer_count":0,"score":0,"last_activity_date":1692292903,"creation_date":1692292865,"question_id":76923812,"body_markdown":"I&#39;m encountering the error message &quot;non-static type variable T cannot be referenced from a static context&quot;. It shows **`Required type: Node &lt;T&gt; Provided: Node&lt;T&gt;`**\r\n\r\nI&#39;m struggling to understand what I am doing wrong, but as I understand, there&#39;s an issue with using the generic type T in static context. I would appreciate any help, thanks.\r\n\r\n\r\n```\r\nclass BinaryTree&lt;T&gt; {\r\n    private static Node&lt;T&gt; rootNode;\r\n\r\n    public static class Node&lt;T&gt; {\r\n        private final T value;\r\n        private Node&lt;T&gt; left;\r\n        private Node&lt;T&gt; right;\r\n\r\n        public Node(T value) {\r\n            this.value = value;\r\n            this.left = null;\r\n            this.right = null;\r\n            if (rootNode == null){\r\n                rootNode = this;\r\n            }\r\n        }\r\n    }\r\n\r\n    public BinaryTree() {\r\n        rootNode = null;\r\n    }\r\n}\r\n\r\n```\r\n\r\n\r\nI am trying to implement a Binary Tree. I have a static inner class Node inside a BinaryTree class with a generic type. I want to set a static variable (rootNode) within the inner class based on a condition if it is null. \r\n\r\n","title":"Java: Non-Static Type Variable T Cannot be Referenced from a Static Context, for Binary Tree","body":"<p>I'm encountering the error message &quot;non-static type variable T cannot be referenced from a static context&quot;. It shows <strong><code>Required type: Node &lt;T&gt; Provided: Node&lt;T&gt;</code></strong></p>\n<p>I'm struggling to understand what I am doing wrong, but as I understand, there's an issue with using the generic type T in static context. I would appreciate any help, thanks.</p>\n<pre><code>class BinaryTree&lt;T&gt; {\n    private static Node&lt;T&gt; rootNode;\n\n    public static class Node&lt;T&gt; {\n        private final T value;\n        private Node&lt;T&gt; left;\n        private Node&lt;T&gt; right;\n\n        public Node(T value) {\n            this.value = value;\n            this.left = null;\n            this.right = null;\n            if (rootNode == null){\n                rootNode = this;\n            }\n        }\n    }\n\n    public BinaryTree() {\n        rootNode = null;\n    }\n}\n\n</code></pre>\n<p>I am trying to implement a Binary Tree. I have a static inner class Node inside a BinaryTree class with a generic type. I want to set a static variable (rootNode) within the inner class based on a condition if it is null.</p>\n"},{"tags":["java","spring-boot","swagger-ui","openapi"],"comments":[{"owner":{"account_id":26782616,"reputation":313,"user_id":20377250,"display_name":"Alex_X1"},"score":0,"creation_date":1692187309,"post_id":76912990,"comment_id":135589153,"body_markdown":"Please explain further, I don&#39;t really get what you are trying to achieve?","body":"Please explain further, I don&#39;t really get what you are trying to achieve?"},{"owner":{"account_id":21101638,"reputation":11,"user_id":15511411,"display_name":"Andrei Raskolnikov"},"score":0,"creation_date":1692189824,"post_id":76912990,"comment_id":135589736,"body_markdown":"Thank your interest in helping, Alex.\nMy problem is the following: Swagger-ui is providing an example of a JSON for one of the GET endpoints. The example does not include the field &quot;id&quot; of my DTO because it was previously annotated with @Schema(hidden=true). \n\nIt was annotated to be hidden because I don&#39;t want that field to be included in the JSON example provided by Swagger for the POST endpoint. But meanwhile, I want that field to be included in the JSON example provided for the GET endpoint.","body":"Thank your interest in helping, Alex. My problem is the following: Swagger-ui is providing an example of a JSON for one of the GET endpoints. The example does not include the field &quot;id&quot; of my DTO because it was previously annotated with @Schema(hidden=true).   It was annotated to be hidden because I don&#39;t want that field to be included in the JSON example provided by Swagger for the POST endpoint. But meanwhile, I want that field to be included in the JSON example provided for the GET endpoint."},{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1692194078,"post_id":76912990,"comment_id":135590792,"body_markdown":"Please provide enough code so others can better understand or reproduce the problem.","body":"Please provide enough code so others can better understand or reproduce the problem."}],"answers":[{"tags":[],"owner":{"account_id":21101638,"reputation":11,"user_id":15511411,"display_name":"Andrei Raskolnikov"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1692292689,"creation_date":1692272743,"answer_id":76921207,"question_id":76912990,"body_markdown":"Ok I found a solution for my encounter. \r\n\r\nInstead of using `@Schema(hidden=true)` for the `id` field within my DTO. I switched to using: `@Schema(accessMode = Schema.AccessMode.READ_ONLY)`. \r\n\r\nWhich changed the behavior of Swagger as I wanted.","title":"SwaggerUI: show/hide a hidden schema field","body":"<p>Ok I found a solution for my encounter.</p>\n<p>Instead of using <code>@Schema(hidden=true)</code> for the <code>id</code> field within my DTO. I switched to using: <code>@Schema(accessMode = Schema.AccessMode.READ_ONLY)</code>.</p>\n<p>Which changed the behavior of Swagger as I wanted.</p>\n"}],"owner":{"account_id":21101638,"reputation":11,"user_id":15511411,"display_name":"Andrei Raskolnikov"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":222,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":76921207,"answer_count":1,"score":1,"last_activity_date":1692292689,"creation_date":1692184218,"question_id":76912990,"body_markdown":"I am trying to set-up an OpenApi documentation within a project. Currently, I am documenting an endpoint which receives a DTO and returns a DTO as a response.\r\n\r\nMy entity DTO has a private field hidden (via @Schema annotation: the id). I used this anno. for not having that field included in the example JSON for a POST..\r\n\r\nAll good so far, but I want to have the id displayed in the response example value JSON within swagger-ui.\r\n\r\nThe example is same for response and request:\r\n{\r\n  &quot;title&quot;: &quot;string&quot;,\r\n  &quot;subtitle&quot;: &quot;string&quot;,\r\n  &quot;publisher&quot;: &quot;string&quot;,\r\n  &quot;publishedDate&quot;: &quot;string&quot;,\r\n  &quot;description&quot;: &quot;string&quot;,\r\n  &quot;pageCount&quot;: 0,\r\n  &quot;language&quot;: &quot;string&quot;,\r\n  &quot;previewLink&quot;: &quot;string&quot;,\r\n  &quot;numberOfItems&quot;: 0\r\n}\r\n\r\nBut for the sake of documentation of the &quot;response&quot;, I want the below JSON to contain also the hidden schema field. Can I do this somehow?\r\n[Image example]\r\n(https://i.stack.imgur.com/PsXfJ.jpg)\r\n\r\nMy approach towards was the following:\r\n\r\n@ApiResponse(description = &quot;Successful response&quot;, responseCode = &quot;200&quot;,content = @Content(schema = @Schema(implementation = BookDto.class)))\r\n\r\nBut I am expecting to be able without making a custom @Content schema, to include in the API response documentation example the hidden field.","title":"SwaggerUI: show/hide a hidden schema field","body":"<p>I am trying to set-up an OpenApi documentation within a project. Currently, I am documenting an endpoint which receives a DTO and returns a DTO as a response.</p>\n<p>My entity DTO has a private field hidden (via @Schema annotation: the id). I used this anno. for not having that field included in the example JSON for a POST..</p>\n<p>All good so far, but I want to have the id displayed in the response example value JSON within swagger-ui.</p>\n<p>The example is same for response and request:\n{\n&quot;title&quot;: &quot;string&quot;,\n&quot;subtitle&quot;: &quot;string&quot;,\n&quot;publisher&quot;: &quot;string&quot;,\n&quot;publishedDate&quot;: &quot;string&quot;,\n&quot;description&quot;: &quot;string&quot;,\n&quot;pageCount&quot;: 0,\n&quot;language&quot;: &quot;string&quot;,\n&quot;previewLink&quot;: &quot;string&quot;,\n&quot;numberOfItems&quot;: 0\n}</p>\n<p>But for the sake of documentation of the &quot;response&quot;, I want the below JSON to contain also the hidden schema field. Can I do this somehow?\n[Image example]\n(<a href=\"https://i.stack.imgur.com/PsXfJ.jpg\" rel=\"nofollow noreferrer\">https://i.stack.imgur.com/PsXfJ.jpg</a>)</p>\n<p>My approach towards was the following:</p>\n<p>@ApiResponse(description = &quot;Successful response&quot;, responseCode = &quot;200&quot;,content = @Content(schema = @Schema(implementation = BookDto.class)))</p>\n<p>But I am expecting to be able without making a custom @Content schema, to include in the API response documentation example the hidden field.</p>\n"},{"tags":["java","android","video"],"comments":[{"owner":{"account_id":417862,"reputation":16972,"user_id":794088,"display_name":"petey"},"score":0,"creation_date":1449169522,"post_id":34074066,"comment_id":55901396,"body_markdown":"please change `e.printStackTrace();` to `Log.e(TAG, &quot;Exception&quot;, e);` and report what errors logcat says.","body":"please change <code>e.printStackTrace();</code> to <code>Log.e(TAG, &quot;Exception&quot;, e);</code> and report what errors logcat says."},{"owner":{"account_id":3683606,"reputation":5652,"user_id":3067928,"accept_rate":43,"display_name":"RNK"},"score":0,"creation_date":1449169593,"post_id":34074066,"comment_id":55901437,"body_markdown":"There is no exception message in there.","body":"There is no exception message in there."},{"owner":{"account_id":417862,"reputation":16972,"user_id":794088,"display_name":"petey"},"score":0,"creation_date":1449169606,"post_id":34074066,"comment_id":55901449,"body_markdown":"also,  https://www.youtube.com/watch?v=hS5CfP8n_js is not a url to a video,  its a url to a webpage that plays a video","body":"also,  <a href=\"https://www.youtube.com/watch?v=hS5CfP8n_js\" rel=\"nofollow noreferrer\">youtube.com/watch?v=hS5CfP8n_js</a> is not a url to a video,  its a url to a webpage that plays a video"},{"owner":{"account_id":3683606,"reputation":5652,"user_id":3067928,"accept_rate":43,"display_name":"RNK"},"score":0,"creation_date":1449169667,"post_id":34074066,"comment_id":55901491,"body_markdown":"How to get the URL from youtube by which we can download the video?","body":"How to get the URL from youtube by which we can download the video?"},{"owner":{"account_id":417862,"reputation":16972,"user_id":794088,"display_name":"petey"},"score":1,"creation_date":1449170732,"post_id":34074066,"comment_id":55902146,"body_markdown":"Sorry...thats not a programming question.  Try googling or searching on stackexchange.com.","body":"Sorry...thats not a programming question.  Try googling or searching on stackexchange.com."}],"answers":[{"tags":[],"owner":{"account_id":20076809,"reputation":11,"user_id":14720383,"display_name":"MOHAMMED SHAHBAZ"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1692292653,"creation_date":1692292653,"answer_id":76923789,"question_id":34074066,"body_markdown":"        //make sure to call it from a suspend function or coroutine   \r\n          \r\n        private suspend fun downloadVideo(videoUrl: String): File? = withContext(Dispatchers.IO) {\r\n                    try {\r\n                        val url = URL(videoUrl)\r\n                        val connection = url.openConnection() as HttpURLConnection\r\n                        connection.doInput = true\r\n                        connection.connect()\r\n            \r\n                        val inputStream = connection.inputStream\r\n                        val fileName = &quot;downloaded_video.mp4&quot; // Set the desired file name\r\n                        val file = File(context?.cacheDir, fileName) // Store the video in the app&#39;s cache directory\r\n            \r\n                        FileOutputStream(file).use { output -&gt;\r\n                            val buffer = ByteArray(4 * 1024) // 4KB buffer\r\n                            var bytesRead: Int\r\n                            while (inputStream.read(buffer).also { bytesRead = it } != -1) {\r\n                                output.write(buffer, 0, bytesRead)\r\n                            }\r\n                            output.flush()\r\n                        }\r\n            \r\n                        file\r\n                    } catch (e: Exception) {\r\n                        e.printStackTrace()\r\n                        null\r\n                    }\r\n                } \r\n         \r\n    \r\n    //by mohammed shahbaz \r\n","title":"Download video from URL and store it in android device","body":"<pre><code>    //make sure to call it from a suspend function or coroutine   \n      \n    private suspend fun downloadVideo(videoUrl: String): File? = withContext(Dispatchers.IO) {\n                try {\n                    val url = URL(videoUrl)\n                    val connection = url.openConnection() as HttpURLConnection\n                    connection.doInput = true\n                    connection.connect()\n        \n                    val inputStream = connection.inputStream\n                    val fileName = &quot;downloaded_video.mp4&quot; // Set the desired file name\n                    val file = File(context?.cacheDir, fileName) // Store the video in the app's cache directory\n        \n                    FileOutputStream(file).use { output -&gt;\n                        val buffer = ByteArray(4 * 1024) // 4KB buffer\n                        var bytesRead: Int\n                        while (inputStream.read(buffer).also { bytesRead = it } != -1) {\n                            output.write(buffer, 0, bytesRead)\n                        }\n                        output.flush()\n                    }\n        \n                    file\n                } catch (e: Exception) {\n                    e.printStackTrace()\n                    null\n                }\n            } \n     \n\n//by mohammed shahbaz \n</code></pre>\n"}],"owner":{"account_id":3683606,"reputation":5652,"user_id":3067928,"accept_rate":43,"display_name":"RNK"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":2244,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1692292653,"creation_date":1449169253,"question_id":34074066,"body_markdown":"I have below code to download video from URL:\r\n\r\nString videoUrl = &quot;https://www.youtube.com/watch?v=hS5CfP8n_js&quot;;\r\n\r\n    private class LongOperation extends AsyncTask&lt;String, Void, String&gt; {\r\n        private ProgressDialog dialog = new ProgressDialog(MainActivity.this);\r\n        private final int TIMEOUT_CONNECTION = 5000;//5sec\r\n        private final int TIMEOUT_SOCKET = 30000;//30sec\r\n        private String TAG = &quot;TAG&quot;;\r\n\r\n        @Override\r\n        protected void onPreExecute() {\r\n            dialog.setMessage(&quot;Downloading...&quot;);\r\n            dialog.show();\r\n        }\r\n\r\n        @Override\r\n        protected String doInBackground(String... params) {\r\n            try {\r\n                url = new URL(videoUrl);\r\n                long startTime = System.currentTimeMillis();\r\n                Log.i(TAG, &quot;video download beginning: &quot; + videoUrl);\r\n\r\n                //Open a connection to that URL.\r\n                URLConnection ucon = url.openConnection();\r\n\r\n                //this timeout affects how long it takes for the app to realize there&#39;s a connection problem\r\n                ucon.setReadTimeout(TIMEOUT_CONNECTION);\r\n                ucon.setConnectTimeout(TIMEOUT_SOCKET);\r\n\r\n\r\n                //Define InputStreams to read from the URLConnection.\r\n                // uses 3KB download buffer\r\n                InputStream is = ucon.getInputStream();\r\n                BufferedInputStream inStream = new BufferedInputStream(is, 1024 * 5);\r\n                FileOutputStream outStream = new FileOutputStream(Environment.getExternalStoragePublicDirectory(Environment.DIRECTORY_MUSIC).toString()+&quot;/new.mp4&quot;);\r\n                byte[] buff = new byte[5 * 1024];\r\n\r\n                //Read bytes (and store them) until there is nothing more to read(-1)\r\n                int len;\r\n                while ((len = inStream.read(buff)) != -1) {\r\n                    outStream.write(buff, 0, len);\r\n                }\r\n\r\n                //clean up\r\n                outStream.flush();\r\n                outStream.close();\r\n                inStream.close();\r\n\r\n                Log.i(TAG, &quot;download completed in &quot;\r\n                        + ((System.currentTimeMillis() - startTime) / 1000)\r\n                        + &quot; sec&quot;);\r\n\r\n            } catch (MalformedURLException e) {\r\n                e.printStackTrace();\r\n            } catch (FileNotFoundException e) {\r\n                e.printStackTrace();\r\n            } catch (IOException e) {\r\n                e.printStackTrace();\r\n            }\r\n            return &quot;Executed&quot;;\r\n        }\r\n\r\n        @Override\r\n        protected void onPostExecute(String result) {\r\n            Log.v(&quot;TEST&quot;, result);\r\n            dialog.dismiss();\r\n        }\r\n    }\r\n\r\nVideo file is there in folder. But, when I tried to play it in media player it&#39;s not playing. Is there anything wrong in code?","title":"Download video from URL and store it in android device","body":"<p>I have below code to download video from URL:</p>\n\n<p>String videoUrl = \"<a href=\"https://www.youtube.com/watch?v=hS5CfP8n_js\" rel=\"nofollow\">https://www.youtube.com/watch?v=hS5CfP8n_js</a>\";</p>\n\n<pre><code>private class LongOperation extends AsyncTask&lt;String, Void, String&gt; {\n    private ProgressDialog dialog = new ProgressDialog(MainActivity.this);\n    private final int TIMEOUT_CONNECTION = 5000;//5sec\n    private final int TIMEOUT_SOCKET = 30000;//30sec\n    private String TAG = \"TAG\";\n\n    @Override\n    protected void onPreExecute() {\n        dialog.setMessage(\"Downloading...\");\n        dialog.show();\n    }\n\n    @Override\n    protected String doInBackground(String... params) {\n        try {\n            url = new URL(videoUrl);\n            long startTime = System.currentTimeMillis();\n            Log.i(TAG, \"video download beginning: \" + videoUrl);\n\n            //Open a connection to that URL.\n            URLConnection ucon = url.openConnection();\n\n            //this timeout affects how long it takes for the app to realize there's a connection problem\n            ucon.setReadTimeout(TIMEOUT_CONNECTION);\n            ucon.setConnectTimeout(TIMEOUT_SOCKET);\n\n\n            //Define InputStreams to read from the URLConnection.\n            // uses 3KB download buffer\n            InputStream is = ucon.getInputStream();\n            BufferedInputStream inStream = new BufferedInputStream(is, 1024 * 5);\n            FileOutputStream outStream = new FileOutputStream(Environment.getExternalStoragePublicDirectory(Environment.DIRECTORY_MUSIC).toString()+\"/new.mp4\");\n            byte[] buff = new byte[5 * 1024];\n\n            //Read bytes (and store them) until there is nothing more to read(-1)\n            int len;\n            while ((len = inStream.read(buff)) != -1) {\n                outStream.write(buff, 0, len);\n            }\n\n            //clean up\n            outStream.flush();\n            outStream.close();\n            inStream.close();\n\n            Log.i(TAG, \"download completed in \"\n                    + ((System.currentTimeMillis() - startTime) / 1000)\n                    + \" sec\");\n\n        } catch (MalformedURLException e) {\n            e.printStackTrace();\n        } catch (FileNotFoundException e) {\n            e.printStackTrace();\n        } catch (IOException e) {\n            e.printStackTrace();\n        }\n        return \"Executed\";\n    }\n\n    @Override\n    protected void onPostExecute(String result) {\n        Log.v(\"TEST\", result);\n        dialog.dismiss();\n    }\n}\n</code></pre>\n\n<p>Video file is there in folder. But, when I tried to play it in media player it's not playing. Is there anything wrong in code?</p>\n"},{"tags":["java","android"],"comments":[{"owner":{"account_id":27699053,"reputation":2348,"user_id":21144042,"display_name":"Diego Borba"},"score":0,"creation_date":1692289069,"post_id":76923295,"comment_id":135606144,"body_markdown":"Please, write a [minimal reproducible example](https://stackoverflow.com/help/minimal-reproducible-example)","body":"Please, write a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>"},{"owner":{"account_id":45934,"reputation":203649,"user_id":135589,"accept_rate":100,"display_name":"Jesper"},"score":1,"creation_date":1692289447,"post_id":76923295,"comment_id":135606226,"body_markdown":"Your code is not valid Java. Method calls must be inside a method, constructor or (static) initializer block. You cannot have method calls directly inside a class body in Java.","body":"Your code is not valid Java. Method calls must be inside a method, constructor or (static) initializer block. You cannot have method calls directly inside a class body in Java."},{"owner":{"account_id":26218351,"reputation":1,"user_id":19896192,"display_name":"Collin"},"score":0,"creation_date":1692289567,"post_id":76923295,"comment_id":135606251,"body_markdown":"Actually running the code isn&#39;t the issue, it&#39;s that the method isn&#39;t recognized by Android Studio.  So, I don&#39;t really think reproducible code would help here.","body":"Actually running the code isn&#39;t the issue, it&#39;s that the method isn&#39;t recognized by Android Studio.  So, I don&#39;t really think reproducible code would help here."},{"owner":{"account_id":27699053,"reputation":2348,"user_id":21144042,"display_name":"Diego Borba"},"score":0,"creation_date":1692289680,"post_id":76923295,"comment_id":135606267,"body_markdown":"The code that you are using is **exactly the same** that is in the question?","body":"The code that you are using is <b>exactly the same</b> that is in the question?"},{"owner":{"account_id":26218351,"reputation":1,"user_id":19896192,"display_name":"Collin"},"score":0,"creation_date":1692290000,"post_id":76923295,"comment_id":135606328,"body_markdown":"Even within a method, I still get the same result. To clarify, when hovering over the text of &quot;.addView()&quot;, I cannot even see the documentation for it with CTRL+Q. It doesn&#39;t recognize it.","body":"Even within a method, I still get the same result. To clarify, when hovering over the text of &quot;.addView()&quot;, I cannot even see the documentation for it with CTRL+Q. It doesn&#39;t recognize it."},{"owner":{"account_id":16445373,"reputation":613,"user_id":11880323,"display_name":"cmak"},"score":0,"creation_date":1692290484,"post_id":76923295,"comment_id":135606416,"body_markdown":"Use an instance of ViewGroup to assure it works","body":"Use an instance of ViewGroup to assure it works"},{"owner":{"account_id":26218351,"reputation":1,"user_id":19896192,"display_name":"Collin"},"score":0,"creation_date":1692290846,"post_id":76923295,"comment_id":135606492,"body_markdown":"Thanks, Cmak. This works. I should be able to figure it out from here.","body":"Thanks, Cmak. This works. I should be able to figure it out from here."}],"owner":{"account_id":26218351,"reputation":1,"user_id":19896192,"display_name":"Collin"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":38,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1692291998,"creation_date":1692288683,"question_id":76923295,"body_markdown":"I&#39;m working on an application in Android Studio (Giraffe), written in Java, to which I need to add buttons to a ScrollView. I&#39;ve done some research and found that the addView method is likely what I&#39;d want to use. However, for some reason, my Android Studio does not recognize it as a method for the ViewGroup class. For instance, when I put the following:\r\n\r\n```\r\nimport androidx.appcompat.app.AppCompatActivity;\r\nimport android.widget.ScrollView;\r\nimport android.widget.LinearLayout;\r\nimport android.view.View;\r\n\r\n\r\nclass Test {\r\n    ViewGroup.addView(someView);\r\n}\r\n```\r\n\r\n\r\nIt acts as though addView isn&#39;t a valid method, giving me the message of &quot;Cannot resolve symbol &#39;addView&#39;&quot;. Also, when being applied to an instantiated ScrollView, it reads as &quot;Cannot resolve method &#39;addView&#39; in &#39;View&#39;&quot;.\r\n\r\nWould anyone know why this is? From what I&#39;ve read online, nobody else really seems to have this issue. I&#39;ve already attempted a few troubleshooting steps- like rebuilding, restarting, and even reinstalling Android Studio, but I haven&#39;t gotten any results. I&#39;d really appreciate any feedback.\r\n\r\nEdit: Here is a functional example of code that produces the same error.\r\n\r\n```\r\nclass Test {\r\n    public static void someMethod() {\r\n        View someView = null;\r\n        ViewGroup.addView(someView);\r\n    }\r\n}\r\n```","title":"Android Studio doesn&#39;t recognize the addView method","body":"<p>I'm working on an application in Android Studio (Giraffe), written in Java, to which I need to add buttons to a ScrollView. I've done some research and found that the addView method is likely what I'd want to use. However, for some reason, my Android Studio does not recognize it as a method for the ViewGroup class. For instance, when I put the following:</p>\n<pre><code>import androidx.appcompat.app.AppCompatActivity;\nimport android.widget.ScrollView;\nimport android.widget.LinearLayout;\nimport android.view.View;\n\n\nclass Test {\n    ViewGroup.addView(someView);\n}\n</code></pre>\n<p>It acts as though addView isn't a valid method, giving me the message of &quot;Cannot resolve symbol 'addView'&quot;. Also, when being applied to an instantiated ScrollView, it reads as &quot;Cannot resolve method 'addView' in 'View'&quot;.</p>\n<p>Would anyone know why this is? From what I've read online, nobody else really seems to have this issue. I've already attempted a few troubleshooting steps- like rebuilding, restarting, and even reinstalling Android Studio, but I haven't gotten any results. I'd really appreciate any feedback.</p>\n<p>Edit: Here is a functional example of code that produces the same error.</p>\n<pre><code>class Test {\n    public static void someMethod() {\n        View someView = null;\n        ViewGroup.addView(someView);\n    }\n}\n</code></pre>\n"},{"tags":["java","spring","spring-boot","hibernate","jpa"],"comments":[{"owner":{"account_id":231721,"reputation":20460,"user_id":496099,"display_name":"Chris"},"score":1,"creation_date":1692294280,"post_id":76923711,"comment_id":135607214,"body_markdown":"The debugger uses the class itself to &#39;see&#39; the data, which causes it to be fetched. Groups is being fetched joined in, which you can see in the executed query, while the projectGroups is being fetched separately because you are accessing it through the debugger. Turn on SQL logging and let it run without debugging - if you don&#39;t see the query on ProjectMember, it isn&#39;t being fetched","body":"The debugger uses the class itself to &#39;see&#39; the data, which causes it to be fetched. Groups is being fetched joined in, which you can see in the executed query, while the projectGroups is being fetched separately because you are accessing it through the debugger. Turn on SQL logging and let it run without debugging - if you don&#39;t see the query on ProjectMember, it isn&#39;t being fetched"},{"owner":{"account_id":13176203,"reputation":195,"user_id":9517076,"display_name":"I have 10 fingers"},"score":0,"creation_date":1692317610,"post_id":76923711,"comment_id":135610407,"body_markdown":"@Chris But i can&#39;t see any related entities in debugger using this query `select p from Project p`. If debugger fetches to see the data somehow then this query should fetch other entities as well","body":"@Chris But i can&#39;t see any related entities in debugger using this query <code>select p from Project p</code>. If debugger fetches to see the data somehow then this query should fetch other entities as well"},{"owner":{"account_id":231721,"reputation":20460,"user_id":496099,"display_name":"Chris"},"score":0,"creation_date":1692370981,"post_id":76923711,"comment_id":135618238,"body_markdown":"Check the logs - you should be able to determine when the query for ProjectMembers is issued. If it isn&#39;t issued, it isn&#39;t fetched. As for other queries - you should be able to see what is in the collection by expanding them. Have you maybe read in this Project instance before and had it fetch the projectMembers? You might be getting the cached instance from before. You need to see the query doing the fetch to figure out what is executing it - and it isn&#39;t in what you&#39;ve shown us","body":"Check the logs - you should be able to determine when the query for ProjectMembers is issued. If it isn&#39;t issued, it isn&#39;t fetched. As for other queries - you should be able to see what is in the collection by expanding them. Have you maybe read in this Project instance before and had it fetch the projectMembers? You might be getting the cached instance from before. You need to see the query doing the fetch to figure out what is executing it - and it isn&#39;t in what you&#39;ve shown us"},{"owner":{"account_id":13176203,"reputation":195,"user_id":9517076,"display_name":"I have 10 fingers"},"score":0,"creation_date":1692456985,"post_id":76923711,"comment_id":135627253,"body_markdown":"The member entity is only shown in the transaction then it is disappeared after transaction is finished. Also i can’t see any logs related member entity so it is not actually fetched as you said but why other entities still remain as proxy. Showing as proxy is what unselected entities should be isn’t it? Like i see when using default `findById`","body":"The member entity is only shown in the transaction then it is disappeared after transaction is finished. Also i can’t see any logs related member entity so it is not actually fetched as you said but why other entities still remain as proxy. Showing as proxy is what unselected entities should be isn’t it? Like i see when using default <code>findById</code>"},{"owner":{"account_id":231721,"reputation":20460,"user_id":496099,"display_name":"Chris"},"score":0,"creation_date":1692626971,"post_id":76923711,"comment_id":135645506,"body_markdown":"Are we debugging your debugger, or are you looking at debugging real world results in your application? I can only help guess at what you are seeing. If there is no query for the ProjectMembers occurring in your application at all - I could guess that maybe you have these Project instances and their ProjectMembers already cached from earlier application access. You&#39;ll have to figure out where/when they are fetched - maybe put a lock in the table and check to see if any threads are stuck blocked on it","body":"Are we debugging your debugger, or are you looking at debugging real world results in your application? I can only help guess at what you are seeing. If there is no query for the ProjectMembers occurring in your application at all - I could guess that maybe you have these Project instances and their ProjectMembers already cached from earlier application access. You&#39;ll have to figure out where/when they are fetched - maybe put a lock in the table and check to see if any threads are stuck blocked on it"},{"owner":{"account_id":13176203,"reputation":195,"user_id":9517076,"display_name":"I have 10 fingers"},"score":0,"creation_date":1692630571,"post_id":76923711,"comment_id":135646341,"body_markdown":"It appears on both local dev environment and the sample code i linked. I need to dig it in more since there is no explicit log. Thank you for your help anyways.","body":"It appears on both local dev environment and the sample code i linked. I need to dig it in more since there is no explicit log. Thank you for your help anyways."}],"owner":{"account_id":13176203,"reputation":195,"user_id":9517076,"display_name":"I have 10 fingers"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":36,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1692291949,"creation_date":1692291949,"question_id":76923711,"body_markdown":"Recently i&#39;m facing weird issue while developing spring data jpa application.\r\n\r\nI thought lazy fetched collection type entity is only fetched when it is actually accessed or when i fetch it with fetch join. But i can see unspecified entity which is not located in select clause nor from, where clause during debugging time.\r\n\r\n```java\r\n@Entity\r\n@Table(name = &quot;projects&quot;)\r\n@Getter\r\n@NoArgsConstructor(access = AccessLevel.PROTECTED)\r\npublic class Project extends BaseTimeEntity {\r\n\r\n    @Id\r\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n    private Long id;\r\n\r\n    @Column(name = &quot;name&quot;)\r\n    private String name;\r\n\r\n    @OneToMany(mappedBy = &quot;project&quot;, cascade = CascadeType.ALL, orphanRemoval = true)\r\n    private final List&lt;ProjectGroup&gt; groups = new ArrayList&lt;&gt;();\r\n\r\n    @OneToMany(mappedBy = &quot;project&quot;, cascade = CascadeType.ALL, orphanRemoval = true)\r\n    private final List&lt;ProjectMember&gt; projectMembers = new ArrayList&lt;&gt;();\r\n\r\n    @Builder\r\n    public Project(\r\n        String name\r\n    ) {\r\n        this.name = name;\r\n    }\r\n\r\n    public void addGroup(ProjectGroup group) {\r\n        this.groups.add(group);\r\n        group.setProject(this);\r\n    }\r\n\r\n    public void removeGroup(ProjectGroup group) {\r\n        this.groups.remove(group);\r\n        group.setProject(null);\r\n    }\r\n\r\n    public void addProjectMember(ProjectMember projectMember) {\r\n        this.projectMembers.add(projectMember);\r\n        projectMember.setProject(this);\r\n    }\r\n\r\n    public void removeProjectMember(ProjectMember projectMember) {\r\n        this.projectMembers.remove(projectMember);\r\n        projectMember.setProject(null);\r\n    }\r\n}\r\n\r\n@Entity\r\n@Table(name = &quot;project_groups&quot;)\r\n@Getter\r\n@NoArgsConstructor(access = AccessLevel.PROTECTED)\r\npublic class ProjectGroup extends BaseTimeEntity {\r\n\r\n    @Id\r\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n    private Long id;\r\n\r\n    @Column(name = &quot;name&quot;)\r\n    private String name;\r\n\r\n    @ManyToOne(fetch = FetchType.LAZY)\r\n    @JoinColumn(name = &quot;project_id&quot;, foreignKey = @ForeignKey(name = &quot;FK_PROJECT_GROUP_PROJECT&quot;))\r\n    private Project project;\r\n\r\n    @Builder\r\n    public ProjectGroup(String name) {\r\n        this.name = name;\r\n    }\r\n\r\n    public void setProject(Project project) {\r\n        this.project = project;\r\n    }\r\n}\r\n\r\n@Entity\r\n@Table(name = &quot;project_members&quot;)\r\n@Getter\r\n@NoArgsConstructor(access = AccessLevel.PROTECTED)\r\npublic class ProjectMember extends BaseTimeEntity {\r\n\r\n    @Id\r\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n    private Long id;\r\n\r\n    @ManyToOne(fetch = FetchType.LAZY)\r\n    @JoinColumn(name = &quot;project_id&quot;, foreignKey = @ForeignKey(name = &quot;FK_PROJECT_MEMBER_PROJECT&quot;))\r\n    private Project project;\r\n\r\n    @Column(name = &quot;nickname&quot;)\r\n    private String nickname;\r\n\r\n    @Column(name = &quot;is_deleted&quot;)\r\n    private boolean isDeleted = false;\r\n\r\n    @Builder\r\n    public ProjectMember(\r\n        String nickname,\r\n        boolean isDeleted\r\n    ) {\r\n        this.nickname = nickname;\r\n        this.isDeleted = isDeleted;\r\n    }\r\n\r\n    public void setProject(Project project) {\r\n        this.project = project;\r\n    }\r\n}\r\n```\r\nThose are my entities as you can see all the collection type entities are set as `FetchType.LAZY` which is the default value. \r\n\r\nAnd this is my repository and service class\r\n```java\r\npublic interface ProjectRepository extends JpaRepository&lt;Project, Long&gt; {\r\n\r\n    @Query(&quot;&quot;&quot;\r\n        select distinct p\r\n        from Project p\r\n            left join fetch p.groups\r\n        where p.id = :id\r\n    &quot;&quot;&quot;)\r\n    Optional&lt;Project&gt; findWithProjectGroupsById(@Param(&quot;id&quot;) Long id);\r\n\r\n}\r\n\r\n@Service\r\n@Transactional\r\n@RequiredArgsConstructor\r\npublic class ProjectQueryServiceImpl implements ProjectQueryService {\r\n\r\n    private final ProjectRepository projectRepository;\r\n\r\n    @Override\r\n    public ProjectResponseDto fetchWithMembersAndGroups(Long id) {\r\n        return projectRepository.findWithProjectGroupsById(id)\r\n            .map(ProjectResponseDto::new)\r\n            .orElseThrow(EntityNotFoundException::new);\r\n    }\r\n}\r\n```\r\n\r\nThe service code is very simple it only fetch project with group entity with fetch join. You can see clearly there is no member entity in this query.\r\n\r\nAnd the generated query looks like this\r\n```sql\r\n    select\r\n        distinct project0_.id as id1_2_0_,\r\n        groups1_.id as id1_0_1_,\r\n        project0_.created_at as created_2_2_0_,\r\n        project0_.modified_at as modified3_2_0_,\r\n        project0_.name as name4_2_0_,\r\n        groups1_.created_at as created_2_0_1_,\r\n        groups1_.modified_at as modified3_0_1_,\r\n        groups1_.name as name4_0_1_,\r\n        groups1_.project_id as project_5_0_1_,\r\n        groups1_.project_id as project_5_0_0__,\r\n        groups1_.id as id1_0_0__ \r\n    from\r\n        projects project0_ \r\n    left outer join\r\n        project_groups groups1_ \r\n            on project0_.id=groups1_.project_id \r\n    where\r\n        project0_.id=?\r\n```\r\nBut when i set the break point right after the above query is executed i can see the unspecified member entity\r\n[![enter image description here][1]][1]\r\n\r\nDoes anyone know why this happens? I&#39;ve tried to find out but still couldn&#39;t find any reason.\r\n\r\nIf you want to reproducible [sample code][2] please use it and you can easily reproduce it when you run the test method and set break point in the `PostResponseDto` so that you can pause test right after executing repository method.\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/BjwEP.png\r\n  [2]: https://github.com/Y-k-Y/jpatest/","title":"Unspecified entity is shown during spring boot jpa transaction","body":"<p>Recently i'm facing weird issue while developing spring data jpa application.</p>\n<p>I thought lazy fetched collection type entity is only fetched when it is actually accessed or when i fetch it with fetch join. But i can see unspecified entity which is not located in select clause nor from, where clause during debugging time.</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Entity\n@Table(name = &quot;projects&quot;)\n@Getter\n@NoArgsConstructor(access = AccessLevel.PROTECTED)\npublic class Project extends BaseTimeEntity {\n\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    private Long id;\n\n    @Column(name = &quot;name&quot;)\n    private String name;\n\n    @OneToMany(mappedBy = &quot;project&quot;, cascade = CascadeType.ALL, orphanRemoval = true)\n    private final List&lt;ProjectGroup&gt; groups = new ArrayList&lt;&gt;();\n\n    @OneToMany(mappedBy = &quot;project&quot;, cascade = CascadeType.ALL, orphanRemoval = true)\n    private final List&lt;ProjectMember&gt; projectMembers = new ArrayList&lt;&gt;();\n\n    @Builder\n    public Project(\n        String name\n    ) {\n        this.name = name;\n    }\n\n    public void addGroup(ProjectGroup group) {\n        this.groups.add(group);\n        group.setProject(this);\n    }\n\n    public void removeGroup(ProjectGroup group) {\n        this.groups.remove(group);\n        group.setProject(null);\n    }\n\n    public void addProjectMember(ProjectMember projectMember) {\n        this.projectMembers.add(projectMember);\n        projectMember.setProject(this);\n    }\n\n    public void removeProjectMember(ProjectMember projectMember) {\n        this.projectMembers.remove(projectMember);\n        projectMember.setProject(null);\n    }\n}\n\n@Entity\n@Table(name = &quot;project_groups&quot;)\n@Getter\n@NoArgsConstructor(access = AccessLevel.PROTECTED)\npublic class ProjectGroup extends BaseTimeEntity {\n\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    private Long id;\n\n    @Column(name = &quot;name&quot;)\n    private String name;\n\n    @ManyToOne(fetch = FetchType.LAZY)\n    @JoinColumn(name = &quot;project_id&quot;, foreignKey = @ForeignKey(name = &quot;FK_PROJECT_GROUP_PROJECT&quot;))\n    private Project project;\n\n    @Builder\n    public ProjectGroup(String name) {\n        this.name = name;\n    }\n\n    public void setProject(Project project) {\n        this.project = project;\n    }\n}\n\n@Entity\n@Table(name = &quot;project_members&quot;)\n@Getter\n@NoArgsConstructor(access = AccessLevel.PROTECTED)\npublic class ProjectMember extends BaseTimeEntity {\n\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    private Long id;\n\n    @ManyToOne(fetch = FetchType.LAZY)\n    @JoinColumn(name = &quot;project_id&quot;, foreignKey = @ForeignKey(name = &quot;FK_PROJECT_MEMBER_PROJECT&quot;))\n    private Project project;\n\n    @Column(name = &quot;nickname&quot;)\n    private String nickname;\n\n    @Column(name = &quot;is_deleted&quot;)\n    private boolean isDeleted = false;\n\n    @Builder\n    public ProjectMember(\n        String nickname,\n        boolean isDeleted\n    ) {\n        this.nickname = nickname;\n        this.isDeleted = isDeleted;\n    }\n\n    public void setProject(Project project) {\n        this.project = project;\n    }\n}\n</code></pre>\n<p>Those are my entities as you can see all the collection type entities are set as <code>FetchType.LAZY</code> which is the default value.</p>\n<p>And this is my repository and service class</p>\n<pre class=\"lang-java prettyprint-override\"><code>public interface ProjectRepository extends JpaRepository&lt;Project, Long&gt; {\n\n    @Query(&quot;&quot;&quot;\n        select distinct p\n        from Project p\n            left join fetch p.groups\n        where p.id = :id\n    &quot;&quot;&quot;)\n    Optional&lt;Project&gt; findWithProjectGroupsById(@Param(&quot;id&quot;) Long id);\n\n}\n\n@Service\n@Transactional\n@RequiredArgsConstructor\npublic class ProjectQueryServiceImpl implements ProjectQueryService {\n\n    private final ProjectRepository projectRepository;\n\n    @Override\n    public ProjectResponseDto fetchWithMembersAndGroups(Long id) {\n        return projectRepository.findWithProjectGroupsById(id)\n            .map(ProjectResponseDto::new)\n            .orElseThrow(EntityNotFoundException::new);\n    }\n}\n</code></pre>\n<p>The service code is very simple it only fetch project with group entity with fetch join. You can see clearly there is no member entity in this query.</p>\n<p>And the generated query looks like this</p>\n<pre class=\"lang-sql prettyprint-override\"><code>    select\n        distinct project0_.id as id1_2_0_,\n        groups1_.id as id1_0_1_,\n        project0_.created_at as created_2_2_0_,\n        project0_.modified_at as modified3_2_0_,\n        project0_.name as name4_2_0_,\n        groups1_.created_at as created_2_0_1_,\n        groups1_.modified_at as modified3_0_1_,\n        groups1_.name as name4_0_1_,\n        groups1_.project_id as project_5_0_1_,\n        groups1_.project_id as project_5_0_0__,\n        groups1_.id as id1_0_0__ \n    from\n        projects project0_ \n    left outer join\n        project_groups groups1_ \n            on project0_.id=groups1_.project_id \n    where\n        project0_.id=?\n</code></pre>\n<p>But when i set the break point right after the above query is executed i can see the unspecified member entity\n<a href=\"https://i.stack.imgur.com/BjwEP.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/BjwEP.png\" alt=\"enter image description here\" /></a></p>\n<p>Does anyone know why this happens? I've tried to find out but still couldn't find any reason.</p>\n<p>If you want to reproducible <a href=\"https://github.com/Y-k-Y/jpatest/\" rel=\"nofollow noreferrer\">sample code</a> please use it and you can easily reproduce it when you run the test method and set break point in the <code>PostResponseDto</code> so that you can pause test right after executing repository method.</p>\n"},{"tags":["java","html","merge","report","jacoco-maven-plugin"],"answers":[{"tags":[],"owner":{"account_id":284924,"reputation":431,"user_id":583309,"accept_rate":24,"display_name":"Hussain Ashruf"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1692291769,"creation_date":1692291769,"answer_id":76923692,"question_id":76902649,"body_markdown":"For the second part use $ java -jar jacococli.jar report ....it generates the html report","title":"Separate java projects with jacoco code coverage reports are generated separately using maven. Consolidated report generated is blank","body":"<p>For the second part use $ java -jar jacococli.jar report ....it generates the html report</p>\n"}],"owner":{"account_id":284924,"reputation":431,"user_id":583309,"accept_rate":24,"display_name":"Hussain Ashruf"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":81,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1692291769,"creation_date":1692054806,"question_id":76902649,"body_markdown":"Having separate java projects (non-multi module projects) with jacoco code coverage reports are generated separately using maven. Each one having its own target\\jacoco.exec coverage file and Html reports; so having number of those. I am trying to consolidate all of those into one and generate one jacoco.exec and one html report. \r\n\r\n\t&lt;build&gt;\r\n\t\t&lt;plugins&gt;\r\n\t\t\t&lt;plugin&gt;\r\n\t\t\t\t&lt;groupId&gt;org.jacoco&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;jacoco-maven-plugin&lt;/artifactId&gt;\r\n\t\t\t\t&lt;version&gt;0.8.9&lt;/version&gt;...\r\n\r\n\r\n                &lt;executions&gt;\r\n\t\t\t\t\t&lt;execution&gt;\r\n\t\t\t\t\t\t&lt;id&gt;merge-reports&lt;/id&gt;\r\n\t\t\t\t\t\t&lt;phase&gt;test&lt;/phase&gt;\r\n\t\t\t\t\t\t&lt;goals&gt;\r\n\t\t\t\t\t\t\t&lt;goal&gt;merge&lt;/goal&gt;\r\n\t\t\t\t\t\t&lt;/goals&gt;\r\n\t\t\t\t\t\t&lt;configuration&gt;\r\n\t\t\t\t\t\t\t&lt;fileSets&gt;\r\n\t\t\t\t\t\t\t\t&lt;fileSet&gt;\r\n\t\t\t\t\t\t\t\t\t&lt;directory&gt;lambda/face-email-handler/target/&lt;/directory&gt;\r\n\t\t\t\t\t\t\t\t\t&lt;includes&gt;\r\n\t\t\t\t\t\t\t\t\t\t&lt;include&gt;*.exec&lt;/include&gt;\r\n\t\t\t\t\t\t\t\t\t&lt;/includes&gt;\r\n\t\t\t\t\t\t\t\t&lt;/fileSet&gt;\r\n\t\t\t\t\t\t\t\t&lt;!-- Repeat for other projects --&gt;\r\n\t\t\t\t\t\t\t&lt;/fileSets&gt;\r\n\t\t\t\t\t\t&lt;/configuration&gt;\r\n\t\t\t\t\t&lt;/execution&gt;\r\n\r\n\t\t\t\t\t&lt;execution&gt;\r\n\t\t\t\t\t\t&lt;id&gt;report&lt;/id&gt;\r\n\t\t\t\t\t\t&lt;phase&gt;verify&lt;/phase&gt;\r\n\t\t\t\t\t\t&lt;goals&gt;\r\n\t\t\t\t\t\t\t&lt;goal&gt;report-aggregate&lt;/goal&gt;\r\n\t\t\t\t\t\t&lt;/goals&gt;\r\n\t\t\t\t\t\t&lt;configuration&gt;\r\n\t\t\t\t\t\t\t&lt;dataFileIncludes&gt;\r\n\t\t\t\t\t\t\t\t&lt;dataFileInclude&gt;target/jacoco.exec&lt;/dataFileInclude&gt;\r\n\t\t\t\t\t\t\t&lt;/dataFileIncludes&gt;\r\n\t\t\t\t\t\t\t&lt;includes&gt;\r\n\t\t\t\t\t\t\t\t&lt;include&gt;edu/uca/**&lt;/include&gt;\r\n\t\t\t\t\t\t\t&lt;/includes&gt;\r\n\t\t\t\t\t\t\t&lt;outputDirectory&gt;target/site/jacoco-coverage-aggregate&lt;/outputDirectory&gt;\r\n\t\t\t\t\t\t&lt;/configuration&gt;\r\n\t\t\t\t\t&lt;/execution&gt;...\r\n\r\nSo able to have one jacoco.exec but html report being generated is blank. Specific direction is appreciated.\r\n[![Blank html consolidated code coverage report][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/gNseA.png","title":"Separate java projects with jacoco code coverage reports are generated separately using maven. Consolidated report generated is blank","body":"<p>Having separate java projects (non-multi module projects) with jacoco code coverage reports are generated separately using maven. Each one having its own target\\jacoco.exec coverage file and Html reports; so having number of those. I am trying to consolidate all of those into one and generate one jacoco.exec and one html report.</p>\n<pre><code>&lt;build&gt;\n    &lt;plugins&gt;\n        &lt;plugin&gt;\n            &lt;groupId&gt;org.jacoco&lt;/groupId&gt;\n            &lt;artifactId&gt;jacoco-maven-plugin&lt;/artifactId&gt;\n            &lt;version&gt;0.8.9&lt;/version&gt;...\n\n\n            &lt;executions&gt;\n                &lt;execution&gt;\n                    &lt;id&gt;merge-reports&lt;/id&gt;\n                    &lt;phase&gt;test&lt;/phase&gt;\n                    &lt;goals&gt;\n                        &lt;goal&gt;merge&lt;/goal&gt;\n                    &lt;/goals&gt;\n                    &lt;configuration&gt;\n                        &lt;fileSets&gt;\n                            &lt;fileSet&gt;\n                                &lt;directory&gt;lambda/face-email-handler/target/&lt;/directory&gt;\n                                &lt;includes&gt;\n                                    &lt;include&gt;*.exec&lt;/include&gt;\n                                &lt;/includes&gt;\n                            &lt;/fileSet&gt;\n                            &lt;!-- Repeat for other projects --&gt;\n                        &lt;/fileSets&gt;\n                    &lt;/configuration&gt;\n                &lt;/execution&gt;\n\n                &lt;execution&gt;\n                    &lt;id&gt;report&lt;/id&gt;\n                    &lt;phase&gt;verify&lt;/phase&gt;\n                    &lt;goals&gt;\n                        &lt;goal&gt;report-aggregate&lt;/goal&gt;\n                    &lt;/goals&gt;\n                    &lt;configuration&gt;\n                        &lt;dataFileIncludes&gt;\n                            &lt;dataFileInclude&gt;target/jacoco.exec&lt;/dataFileInclude&gt;\n                        &lt;/dataFileIncludes&gt;\n                        &lt;includes&gt;\n                            &lt;include&gt;edu/uca/**&lt;/include&gt;\n                        &lt;/includes&gt;\n                        &lt;outputDirectory&gt;target/site/jacoco-coverage-aggregate&lt;/outputDirectory&gt;\n                    &lt;/configuration&gt;\n                &lt;/execution&gt;...\n</code></pre>\n<p>So able to have one jacoco.exec but html report being generated is blank. Specific direction is appreciated.\n<a href=\"https://i.stack.imgur.com/gNseA.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/gNseA.png\" alt=\"Blank html consolidated code coverage report\" /></a></p>\n"},{"tags":["java","kotlin","quarkus","avro"],"owner":{"account_id":14856134,"reputation":303,"user_id":10728589,"display_name":"Stefano Castoldi"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":33,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1692291281,"creation_date":1692291281,"question_id":76923626,"body_markdown":"I have created an application that reads data from a Kafka topic using Quarkus and Kotlin. The data on the topic are in Avro format, so I have to use `io.quarkus:quarkus-avro` dependency.\r\n\r\nEverything works fine but when I set Quarkus log level to `DEBUG` or higher I get the following message.\r\n\r\n```\r\nDEBUG requestId= traceId=, spanId=, sampled= [io.quarkus.deployment.util.FSWatchUtil] (FSWatchUtil) Failed checking for code gen source modifications: java.nio.file.NoSuchFileException: &lt;projectfolder&gt;/build/classes/java/quarkus-generated-sources/avro\r\n\tat java.base/sun.nio.fs.UnixException.translateToIOException(UnixException.java:92)\r\n\tat java.base/sun.nio.fs.UnixException.rethrowAsIOException(UnixException.java:106)\r\n\tat java.base/sun.nio.fs.UnixException.rethrowAsIOException(UnixException.java:111)\r\n\tat java.base/sun.nio.fs.UnixFileAttributeViews$Basic.readAttributes(UnixFileAttributeViews.java:55)\r\n\tat java.base/sun.nio.fs.UnixFileSystemProvider.readAttributes(UnixFileSystemProvider.java:148)\r\n\tat java.base/sun.nio.fs.LinuxFileSystemProvider.readAttributes(LinuxFileSystemProvider.java:99)\r\n\tat java.base/java.nio.file.Files.readAttributes(Files.java:1851)\r\n\tat java.base/java.nio.file.FileTreeWalker.getAttributes(FileTreeWalker.java:220)\r\n\tat java.base/java.nio.file.FileTreeWalker.visit(FileTreeWalker.java:277)\r\n\tat java.base/java.nio.file.FileTreeWalker.walk(FileTreeWalker.java:323)\r\n\tat java.base/java.nio.file.FileTreeIterator.&lt;init&gt;(FileTreeIterator.java:71)\r\n\tat java.base/java.nio.file.Files.walk(Files.java:3918)\r\n\tat java.base/java.nio.file.Files.walk(Files.java:3973)\r\n\tat io.quarkus.deployment.util.FSWatchUtil.doObserve(FSWatchUtil.java:55)\r\n\tat io.quarkus.deployment.util.FSWatchUtil.lambda$observe$1(FSWatchUtil.java:41)\r\n\tat java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)\r\n\tat java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)\r\n\tat java.base/java.lang.Thread.run(Thread.java:833)\r\n\r\n```\r\n\r\nThe path is related to Java but I have only Kotlin code so I didn&#39;t find a way to suppress the error.\r\n\r\n","title":"Kotlin Quarkus Avro NoSuchFileException","body":"<p>I have created an application that reads data from a Kafka topic using Quarkus and Kotlin. The data on the topic are in Avro format, so I have to use <code>io.quarkus:quarkus-avro</code> dependency.</p>\n<p>Everything works fine but when I set Quarkus log level to <code>DEBUG</code> or higher I get the following message.</p>\n<pre><code>DEBUG requestId= traceId=, spanId=, sampled= [io.quarkus.deployment.util.FSWatchUtil] (FSWatchUtil) Failed checking for code gen source modifications: java.nio.file.NoSuchFileException: &lt;projectfolder&gt;/build/classes/java/quarkus-generated-sources/avro\n    at java.base/sun.nio.fs.UnixException.translateToIOException(UnixException.java:92)\n    at java.base/sun.nio.fs.UnixException.rethrowAsIOException(UnixException.java:106)\n    at java.base/sun.nio.fs.UnixException.rethrowAsIOException(UnixException.java:111)\n    at java.base/sun.nio.fs.UnixFileAttributeViews$Basic.readAttributes(UnixFileAttributeViews.java:55)\n    at java.base/sun.nio.fs.UnixFileSystemProvider.readAttributes(UnixFileSystemProvider.java:148)\n    at java.base/sun.nio.fs.LinuxFileSystemProvider.readAttributes(LinuxFileSystemProvider.java:99)\n    at java.base/java.nio.file.Files.readAttributes(Files.java:1851)\n    at java.base/java.nio.file.FileTreeWalker.getAttributes(FileTreeWalker.java:220)\n    at java.base/java.nio.file.FileTreeWalker.visit(FileTreeWalker.java:277)\n    at java.base/java.nio.file.FileTreeWalker.walk(FileTreeWalker.java:323)\n    at java.base/java.nio.file.FileTreeIterator.&lt;init&gt;(FileTreeIterator.java:71)\n    at java.base/java.nio.file.Files.walk(Files.java:3918)\n    at java.base/java.nio.file.Files.walk(Files.java:3973)\n    at io.quarkus.deployment.util.FSWatchUtil.doObserve(FSWatchUtil.java:55)\n    at io.quarkus.deployment.util.FSWatchUtil.lambda$observe$1(FSWatchUtil.java:41)\n    at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)\n    at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)\n    at java.base/java.lang.Thread.run(Thread.java:833)\n\n</code></pre>\n<p>The path is related to Java but I have only Kotlin code so I didn't find a way to suppress the error.</p>\n"},{"tags":["java","string","printing","format"],"comments":[{"owner":{"account_id":372682,"reputation":22426,"user_id":721855,"display_name":"aled"},"score":0,"creation_date":1692287073,"post_id":76923071,"comment_id":135605712,"body_markdown":"Actually you have to use spaces to get the format. There is no way around it plain text.","body":"Actually you have to use spaces to get the format. There is no way around it plain text."},{"owner":{"account_id":5404,"reputation":22089,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"score":6,"creation_date":1692287147,"post_id":76923071,"comment_id":135605729,"body_markdown":"Just make a variable out of that `10` in `String.format(&quot;%10s&quot;, string)`. It may look weird, but you can concat the template string just like any other: `String.format(&quot;%&quot; + length + &quot;s&quot;, string)`","body":"Just make a variable out of that <code>10</code> in <code>String.format(&quot;%10s&quot;, string)</code>. It may look weird, but you can concat the template string just like any other: <code>String.format(&quot;%&quot; + length + &quot;s&quot;, string)</code>"},{"owner":{"account_id":29245436,"reputation":1,"user_id":22405995,"display_name":"Александр"},"score":0,"creation_date":1692287488,"post_id":76923071,"comment_id":135605812,"body_markdown":"Oh, thank you, I forgot I Can do that XD","body":"Oh, thank you, I forgot I Can do that XD"},{"owner":{"account_id":372682,"reputation":22426,"user_id":721855,"display_name":"aled"},"score":0,"creation_date":1692288039,"post_id":76923071,"comment_id":135605923,"body_markdown":"String format just adds spaces.","body":"String format just adds spaces."}],"answers":[{"tags":[],"owner":{"account_id":1689973,"reputation":37280,"user_id":1552534,"display_name":"WJS"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1692291273,"creation_date":1692291273,"answer_id":76923625,"question_id":76923071,"body_markdown":"You could do it like this. Create a method to create a format from a format.\r\nUse a formatted string to create a final formatted string.  The first takes the lengths of the headers to create the final format.\r\n```\r\n String h1 = &quot;header 1&quot;;\r\n String h2 = &quot;long header 2&quot;;\r\n String h3 = &quot;other&quot;;\r\n String headerTemplate = &quot;%%%ds|%%%ds|%%%ds%%n&quot;;\r\n // left justfied with negative lengths.\r\n String format = headerTemplate.formatted(-h1.length(), -h2.length(),\r\n         -h3.length());\r\n System.out.printf(format,h1,h2,h3);\r\n System.out.printf(format, &quot;A&quot;, &quot;B&quot;, &quot;C&quot;);\r\n```\r\nprints\r\n```\r\nheader 1|long header 2|other\r\nA       |B            |C    \r\n\r\n","title":"Format a string wittout predetermined length in Java","body":"<p>You could do it like this. Create a method to create a format from a format.\nUse a formatted string to create a final formatted string.  The first takes the lengths of the headers to create the final format.</p>\n<pre><code> String h1 = &quot;header 1&quot;;\n String h2 = &quot;long header 2&quot;;\n String h3 = &quot;other&quot;;\n String headerTemplate = &quot;%%%ds|%%%ds|%%%ds%%n&quot;;\n // left justfied with negative lengths.\n String format = headerTemplate.formatted(-h1.length(), -h2.length(),\n         -h3.length());\n System.out.printf(format,h1,h2,h3);\n System.out.printf(format, &quot;A&quot;, &quot;B&quot;, &quot;C&quot;);\n</code></pre>\n<p>prints</p>\n<pre><code>header 1|long header 2|other\nA       |B            |C    \n\n</code></pre>\n"}],"owner":{"account_id":29245436,"reputation":1,"user_id":22405995,"display_name":"Александр"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":42,"favorite_count":0,"down_vote_count":2,"up_vote_count":0,"answer_count":1,"score":-2,"last_activity_date":1692291273,"creation_date":1692286827,"question_id":76923071,"body_markdown":"I need to print the table like in the picture:[the table format][1]\r\n\r\n\r\nBut as I have taks of different length (2nd, 3d, 4th and 5th column headers) I can&#39;t format strings wtih spaces\r\n\r\n\r\nI tried using String.format(&quot;%10s&quot;, string) but this method doesn&#39;t accept length of the string through a variable (at least I haven&#39;t found any information)\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/ooE5z.png","title":"Format a string wittout predetermined length in Java","body":"<p>I need to print the table like in the picture:<a href=\"https://i.stack.imgur.com/ooE5z.png\" rel=\"nofollow noreferrer\">the table format</a></p>\n<p>But as I have taks of different length (2nd, 3d, 4th and 5th column headers) I can't format strings wtih spaces</p>\n<p>I tried using String.format(&quot;%10s&quot;, string) but this method doesn't accept length of the string through a variable (at least I haven't found any information)</p>\n"},{"tags":["java","sql","hibernate","sql-update"],"comments":[{"owner":{"account_id":1900385,"reputation":709,"user_id":1716357,"display_name":"wxyz"},"score":0,"creation_date":1383732441,"post_id":19809111,"comment_id":29450523,"body_markdown":"an update means you change something already existing, so you must retrieve it first, no doubt about it.","body":"an update means you change something already existing, so you must retrieve it first, no doubt about it."},{"owner":{"account_id":1834782,"reputation":1763,"user_id":1665377,"display_name":"maximede"},"score":0,"creation_date":1383732448,"post_id":19809111,"comment_id":29450528,"body_markdown":"see this link :  [possible duplicate](http://stackoverflow.com/a/1821095/1665377)","body":"see this link :  <a href=\"http://stackoverflow.com/a/1821095/1665377\">possible duplicate</a>"},{"owner":{"account_id":3154697,"reputation":7046,"user_id":2667343,"display_name":"pasha701"},"score":0,"creation_date":1383732543,"post_id":19809111,"comment_id":29450586,"body_markdown":"http://stackoverflow.com/questions/14723528/hibernate-update-query-issue","body":"<a href=\"http://stackoverflow.com/questions/14723528/hibernate-update-query-issue\" title=\"hibernate update query issue\">stackoverflow.com/questions/14723528/&hellip;</a>"},{"owner":{"account_id":17002,"reputation":3581,"user_id":37613,"accept_rate":75,"display_name":"acfrancis"},"score":9,"creation_date":1383733119,"post_id":19809111,"comment_id":29450917,"body_markdown":"@wxyz: That&#39;s not how SQL works. You can issue an update command without selecting first.","body":"@wxyz: That&#39;s not how SQL works. You can issue an update command without selecting first."}],"answers":[{"tags":[],"owner":{"account_id":2353390,"reputation":4575,"user_id":2061763,"accept_rate":67,"display_name":"Andrei Nicusan"},"down_vote_count":1,"up_vote_count":7,"is_accepted":true,"score":6,"last_activity_date":1383733353,"creation_date":1383733353,"answer_id":19809457,"question_id":19809111,"body_markdown":"HQL will definitely help you.\r\n\r\nIn order to maintain the separation of concerns, you can add a more specialized method in you DAO object:\r\n\r\n    public void updateStatusForId(long id, boolean status){\r\n    //provided you obtain a reference to your session object\r\n    session.createQuery(&quot;UPDATE Campaign SET status = &quot; + status + &quot; WHERE id = :id&quot;).setParameter(&quot;id&quot;, id).executeUpdate();\r\n    //flush your session\r\n    }\r\n\r\nThen you could simply call this method from your business method. You can check the generated SQL statements inside the logs of your app by setting the `show_sql` hibernate property to `true`.","title":"Hibernate update without select","body":"<p>HQL will definitely help you.</p>\n\n<p>In order to maintain the separation of concerns, you can add a more specialized method in you DAO object:</p>\n\n<pre><code>public void updateStatusForId(long id, boolean status){\n//provided you obtain a reference to your session object\nsession.createQuery(\"UPDATE Campaign SET status = \" + status + \" WHERE id = :id\").setParameter(\"id\", id).executeUpdate();\n//flush your session\n}\n</code></pre>\n\n<p>Then you could simply call this method from your business method. You can check the generated SQL statements inside the logs of your app by setting the <code>show_sql</code> hibernate property to <code>true</code>.</p>\n"},{"tags":[],"owner":{"account_id":2411926,"reputation":2788,"user_id":2106815,"accept_rate":69,"display_name":"Jabir"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1383733397,"creation_date":1383733397,"answer_id":19809473,"question_id":19809111,"body_markdown":"\r\nYou can use session.load(). It will not hit the database. [Here][1] you can find its details and example code.\r\n\r\n\r\n  [1]: http://www.mkyong.com/hibernate/different-between-session-get-and-session-load/","title":"Hibernate update without select","body":"<p>You can use session.load(). It will not hit the database. <a href=\"http://www.mkyong.com/hibernate/different-between-session-get-and-session-load/\" rel=\"nofollow\">Here</a> you can find its details and example code.</p>\n"},{"tags":[],"owner":{"account_id":113849,"reputation":36,"user_id":299654,"display_name":"user299654"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1419524387,"creation_date":1419524067,"answer_id":27648833,"question_id":19809111,"body_markdown":"I had worte a extension to solve this issue in **Nhibernate**\r\n\r\n***how to use!***   \r\nfirst of all you need enable ***dynamic-update=&quot;true&quot;***\r\n\r\n            using (ISession session = sessionFactory.OpenSession())\r\n            {\r\n                Customer c1 = new Customer();\r\n                c1.CustomerID = c.CustomerID;\r\n                session.Mark(c1);\r\n               // c1.Name = DateTime.Now.ToString();\r\n                c1.Phone = DateTime.Now.ToString();\r\n                //需要开启动态更新\r\n                session.UpdateDirty(c1);\r\n                session.Flush();\r\n            }\r\n\r\n\r\n\r\n***UpdateExtension.cs***\r\n\r\n\r\n        public static class UpdateExtension\r\n    {\r\n        static readonly Object NOTNULL = new Object();\r\n\r\n        public static void UpdateDirty&lt;TEntity&gt;(this ISession session, TEntity entity)\r\n        {\r\n            SessionImpl implementor = session as SessionImpl;\r\n            EntityEntry entry = implementor.PersistenceContext.GetEntry(entity);\r\n\r\n            if (entry == null)\r\n            {\r\n                throw new InvalidOperationException(&quot;找不到对应的实例，请先使用Mask方法标记&quot;);\r\n            }\r\n\r\n            IEntityPersister persister = entry.Persister;\r\n\r\n            // 如果某列不可以为空，新的Entity里也不想更新他。\r\n            // 那么LoadState 里的值应该和Entity 中的值相同\r\n\r\n            Object[] CurrentState = entry.Persister.GetPropertyValues(entity, EntityMode.Poco);\r\n            Object[] LoadedState = entry.LoadedState;\r\n\r\n            int[] dirtys = persister.FindDirty(CurrentState\r\n                , LoadedState\r\n                , entity\r\n                , (SessionImpl)session);\r\n\r\n            if (dirtys == null || dirtys.Length == 0)\r\n            {\r\n                return;\r\n            }\r\n\r\n            persister.Update(entry.Id\r\n                , CurrentState\r\n                , dirtys\r\n                , true\r\n                , LoadedState\r\n                , entry.Version\r\n                , entity\r\n                , entry.RowId\r\n                , (SessionImpl)session);\r\n\r\n            implementor.PersistenceContext.RemoveEntry(entity);\r\n            implementor.PersistenceContext.RemoveEntity(entry.EntityKey);\r\n\r\n       \r\n            session.Lock(entity, LockMode.None);\r\n             // 防止(implementor.PersistenceContext.EntityEntries.Count == 0)\r\n\r\n            \r\n        }\r\n\r\n\r\n        public static void Mark&lt;TEntity&gt;(this ISession session, TEntity entity)\r\n        {\r\n\r\n            session.Lock(entity, LockMode.None);\r\n\r\n        }\r\n    }\r\n\r\n**here is update sql**\r\n\r\n\r\ncommand 0:UPDATE Customers SET Phone = @p0 WHERE CustomerID = @p1;@p0 = &#39;2014/12/26 0:12:56&#39; [Type: String (4000)], @p1 = 1 [Type: Int32 (0)]\r\n\r\n\r\n***Only update Phone column .***  \r\n\r\n***event Name property can not be null. we can work very well.***\r\n\r\n","title":"Hibernate update without select","body":"<p>I had worte a extension to solve this issue in <strong>Nhibernate</strong></p>\n\n<p><strong><em>how to use!</em></strong><br>\nfirst of all you need enable <strong><em>dynamic-update=\"true\"</em></strong></p>\n\n<pre><code>        using (ISession session = sessionFactory.OpenSession())\n        {\n            Customer c1 = new Customer();\n            c1.CustomerID = c.CustomerID;\n            session.Mark(c1);\n           // c1.Name = DateTime.Now.ToString();\n            c1.Phone = DateTime.Now.ToString();\n            //需要开启动态更新\n            session.UpdateDirty(c1);\n            session.Flush();\n        }\n</code></pre>\n\n<p><strong><em>UpdateExtension.cs</em></strong></p>\n\n<pre><code>    public static class UpdateExtension\n{\n    static readonly Object NOTNULL = new Object();\n\n    public static void UpdateDirty&lt;TEntity&gt;(this ISession session, TEntity entity)\n    {\n        SessionImpl implementor = session as SessionImpl;\n        EntityEntry entry = implementor.PersistenceContext.GetEntry(entity);\n\n        if (entry == null)\n        {\n            throw new InvalidOperationException(\"找不到对应的实例，请先使用Mask方法标记\");\n        }\n\n        IEntityPersister persister = entry.Persister;\n\n        // 如果某列不可以为空，新的Entity里也不想更新他。\n        // 那么LoadState 里的值应该和Entity 中的值相同\n\n        Object[] CurrentState = entry.Persister.GetPropertyValues(entity, EntityMode.Poco);\n        Object[] LoadedState = entry.LoadedState;\n\n        int[] dirtys = persister.FindDirty(CurrentState\n            , LoadedState\n            , entity\n            , (SessionImpl)session);\n\n        if (dirtys == null || dirtys.Length == 0)\n        {\n            return;\n        }\n\n        persister.Update(entry.Id\n            , CurrentState\n            , dirtys\n            , true\n            , LoadedState\n            , entry.Version\n            , entity\n            , entry.RowId\n            , (SessionImpl)session);\n\n        implementor.PersistenceContext.RemoveEntry(entity);\n        implementor.PersistenceContext.RemoveEntity(entry.EntityKey);\n\n\n        session.Lock(entity, LockMode.None);\n         // 防止(implementor.PersistenceContext.EntityEntries.Count == 0)\n\n\n    }\n\n\n    public static void Mark&lt;TEntity&gt;(this ISession session, TEntity entity)\n    {\n\n        session.Lock(entity, LockMode.None);\n\n    }\n}\n</code></pre>\n\n<p><strong>here is update sql</strong></p>\n\n<p>command 0:UPDATE Customers SET Phone = @p0 WHERE CustomerID = @p1;@p0 = '2014/12/26 0:12:56' [Type: String (4000)], @p1 = 1 [Type: Int32 (0)]</p>\n\n<p><strong><em>Only update Phone column .</em></strong>  </p>\n\n<p><strong><em>event Name property can not be null. we can work very well.</em></strong></p>\n"}],"owner":{"account_id":552512,"reputation":586,"user_id":917651,"accept_rate":57,"display_name":"AlessioG"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":7431,"favorite_count":0,"down_vote_count":0,"up_vote_count":5,"accepted_answer_id":19809457,"answer_count":3,"score":5,"last_activity_date":1692289861,"creation_date":1383732315,"question_id":19809111,"body_markdown":"I&#39;ve a question on hibernate operation: update. \r\n\r\nHere a bit of code:\r\n\r\n    Campaign campaign = campaignDAO.get(id);\r\n    campaign.setStatus(true);\r\n    campaignDAO.update(campaign);\r\n\r\nIf I just have all the data of the campaign object, is there any way to perform an update without performing the select (campaignDAO.get(id)) first?\r\n\r\nThanks,\r\n\r\nAlessio","title":"Hibernate update without select","body":"<p>I've a question on hibernate operation: update.</p>\n<p>Here a bit of code:</p>\n<pre><code>Campaign campaign = campaignDAO.get(id);\ncampaign.setStatus(true);\ncampaignDAO.update(campaign);\n</code></pre>\n<p>If I just have all the data of the campaign object, is there any way to perform an update without performing the select (campaignDAO.get(id)) first?</p>\n<p>Thanks,</p>\n<p>Alessio</p>\n"},{"tags":["java","buffer"],"comments":[{"owner":{"account_id":11188,"reputation":75684,"user_id":21441,"accept_rate":100,"display_name":"Mark Elliot"},"score":3,"creation_date":1314850412,"post_id":7266042,"comment_id":8745046,"body_markdown":"`LinkedList` seems like a reasonable choice for O(1) inserts and removes, do you need O(1) indexing, too?","body":"<code>LinkedList</code> seems like a reasonable choice for O(1) inserts and removes, do you need O(1) indexing, too?"},{"owner":{"account_id":111110,"reputation":40021,"user_id":293686,"accept_rate":89,"display_name":"Maur&#237;cio Linhares"},"score":5,"creation_date":1314850417,"post_id":7266042,"comment_id":8745048,"body_markdown":"Thread safe? Not thread safe? For removing from the end and adding in the beginning a LinkedList is usually the best option.","body":"Thread safe? Not thread safe? For removing from the end and adding in the beginning a LinkedList is usually the best option."},{"owner":{"account_id":335069,"reputation":70755,"user_id":661933,"accept_rate":94,"display_name":"nawfal"},"score":0,"creation_date":1402221379,"post_id":7266042,"comment_id":37183585,"body_markdown":"Also see [how-would-you-code-an-efficient-circular-buffer-in-java-or-c-sharp?](http://stackoverflow.com/questions/590069/how-would-you-code-an-efficient-circular-buffer-in-java-or-c-sharp?lq=1)","body":"Also see <a href=\"http://stackoverflow.com/questions/590069/how-would-you-code-an-efficient-circular-buffer-in-java-or-c-sharp?lq=1\">how-would-you-code-an-efficient-circular-buffer-in-java-or-c&zwnj;&#8203;-sharp?</a>"}],"answers":[{"tags":[],"owner":{"account_id":175043,"reputation":7315,"user_id":404760,"accept_rate":90,"display_name":"Shawn"},"down_vote_count":11,"up_vote_count":8,"is_accepted":false,"score":-3,"last_activity_date":1314851236,"creation_date":1314850392,"answer_id":7266048,"question_id":7266042,"body_markdown":"Use a [Queue][1]\r\n\r\n\r\n    Queue&lt;String&gt; qe=new LinkedList&lt;String&gt;();\r\n\r\n\tqe.add(&quot;a&quot;);\r\n\tqe.add(&quot;b&quot;);\r\n\tqe.add(&quot;c&quot;);\r\n\tqe.add(&quot;d&quot;);\r\n\t\t\r\n\tSystem.out.println(qe.poll()); //returns a\r\n\tSystem.out.println(qe.poll()); //returns b\r\n\tSystem.out.println(qe.poll()); //returns c\r\n\tSystem.out.println(qe.poll()); //returns d\r\n\r\nThere&#39;s five simple methods of a [Queue][1]\r\n\r\n - element()  --  Retrieves, but does not remove, the head of this\r\n   queue.\r\n\r\n \r\n\r\n - offer(E o) -- Inserts the specified element into this queue, if   \r\n   possible.\r\n - peek()     -- Retrieves, but does not remove, the head of    this\r\n   queue, returning null if this queue is empty.\r\n\r\n - poll()     --    Retrieves and removes the head of this queue, or\r\n   null if this queue is empty.\r\n - remove()   -- Retrieves and removes the head of this queue.\r\n\r\n  [1]: http://download.oracle.com/javase/1,5.0/docs/api/java/util/Queue.html","title":"Ring Buffer in Java","body":"<p>Use a <a href=\"http://download.oracle.com/javase/1,5.0/docs/api/java/util/Queue.html\" rel=\"nofollow\">Queue</a></p>\n\n<pre><code>Queue&lt;String&gt; qe=new LinkedList&lt;String&gt;();\n\nqe.add(\"a\");\nqe.add(\"b\");\nqe.add(\"c\");\nqe.add(\"d\");\n\nSystem.out.println(qe.poll()); //returns a\nSystem.out.println(qe.poll()); //returns b\nSystem.out.println(qe.poll()); //returns c\nSystem.out.println(qe.poll()); //returns d\n</code></pre>\n\n<p>There's five simple methods of a <a href=\"http://download.oracle.com/javase/1,5.0/docs/api/java/util/Queue.html\" rel=\"nofollow\">Queue</a></p>\n\n<ul>\n<li><p>element()  --  Retrieves, but does not remove, the head of this\nqueue.</p></li>\n<li><p>offer(E o) -- Inserts the specified element into this queue, if<br>\npossible.</p></li>\n<li><p>peek()     -- Retrieves, but does not remove, the head of    this\nqueue, returning null if this queue is empty.</p></li>\n<li><p>poll()     --    Retrieves and removes the head of this queue, or\nnull if this queue is empty.</p></li>\n<li>remove()   -- Retrieves and removes the head of this queue.</li>\n</ul>\n"},{"tags":[],"owner":{"account_id":59506,"reputation":9417,"user_id":178042,"accept_rate":62,"display_name":"Andrey Taptunov"},"down_vote_count":0,"up_vote_count":102,"is_accepted":false,"score":102,"last_activity_date":1552212976,"creation_date":1314851886,"answer_id":7266175,"question_id":7266042,"body_markdown":" Consider [CircularFifoBuffer][1] from Apache [Common.Collections][2]. Unlike [Queue][3] you don&#39;t have to maintain the limited size of underlying collection and wrap it once you hit the limit.\r\n\r\n    Buffer buf = new CircularFifoBuffer(4);\r\n    buf.add(&quot;A&quot;);\r\n    buf.add(&quot;B&quot;);\r\n    buf.add(&quot;C&quot;);\r\n    buf.add(&quot;D&quot;); //ABCD\r\n    buf.add(&quot;E&quot;); //BCDE\r\n\r\n CircularFifoBuffer will do this for you because of the following properties:\r\n\r\n - CircularFifoBuffer is a *first in first out buffer with a fixed\r\n   size* that replaces its oldest element if full.\r\n - The removal order of a CircularFifoBuffer is based on the insertion\r\n   order; elements are removed in the same order in which they were\r\n   added. The iteration order is the same as the removal order.\r\n - The add(Object), BoundedFifoBuffer.remove() and\r\n   BoundedFifoBuffer.get() operations *all perform in constant time*.\r\n   All other operations perform in linear time or worse.\r\n\r\nHowever you should consider it&#39;s limitations as well - for example, you can&#39;t add missing timeseries to this collection because it doens&#39;t allow nulls.\r\n\r\nNOTE: When using current [Common Collections][4] (4.*), you have to use Queue. Like this:\r\n\r\n    Queue buf = new CircularFifoQueue(4);\r\n\r\n  [1]: https://commons.apache.org/proper/commons-collections/javadocs/api-3.2.2/org/apache/commons/collections/buffer/CircularFifoBuffer.html\r\n  [2]: http://commons.apache.org/collections/\r\n  [3]: http://download.oracle.com/javase/1,5.0/docs/api/java/util/Queue.html\r\n  [4]: https://commons.apache.org/proper/commons-collections/release_4_0.html","title":"Ring Buffer in Java","body":"<p>Consider <a href=\"https://commons.apache.org/proper/commons-collections/javadocs/api-3.2.2/org/apache/commons/collections/buffer/CircularFifoBuffer.html\" rel=\"noreferrer\">CircularFifoBuffer</a> from Apache <a href=\"http://commons.apache.org/collections/\" rel=\"noreferrer\">Common.Collections</a>. Unlike <a href=\"http://download.oracle.com/javase/1,5.0/docs/api/java/util/Queue.html\" rel=\"noreferrer\">Queue</a> you don't have to maintain the limited size of underlying collection and wrap it once you hit the limit.</p>\n\n<pre><code>Buffer buf = new CircularFifoBuffer(4);\nbuf.add(\"A\");\nbuf.add(\"B\");\nbuf.add(\"C\");\nbuf.add(\"D\"); //ABCD\nbuf.add(\"E\"); //BCDE\n</code></pre>\n\n<p>CircularFifoBuffer will do this for you because of the following properties:</p>\n\n<ul>\n<li>CircularFifoBuffer is a <em>first in first out buffer with a fixed\nsize</em> that replaces its oldest element if full.</li>\n<li>The removal order of a CircularFifoBuffer is based on the insertion\norder; elements are removed in the same order in which they were\nadded. The iteration order is the same as the removal order.</li>\n<li>The add(Object), BoundedFifoBuffer.remove() and\nBoundedFifoBuffer.get() operations <em>all perform in constant time</em>.\nAll other operations perform in linear time or worse.</li>\n</ul>\n\n<p>However you should consider it's limitations as well - for example, you can't add missing timeseries to this collection because it doens't allow nulls.</p>\n\n<p>NOTE: When using current <a href=\"https://commons.apache.org/proper/commons-collections/release_4_0.html\" rel=\"noreferrer\">Common Collections</a> (4.*), you have to use Queue. Like this:</p>\n\n<pre><code>Queue buf = new CircularFifoQueue(4);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":220394,"reputation":61,"user_id":477782,"display_name":"vgfeit"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1336655973,"creation_date":1330113691,"answer_id":9437235,"question_id":7266042,"body_markdown":"I had the same problem some time ago and was disappointed because I couldn&#39;t find any solution that suites my needs so I wrote my own class. \r\nHonestly, I did found some code back then, but even that wasn&#39;t what I was searching for so I adapted it and now I&#39;m sharing it, just like the author of that piece of code did. \r\n\r\nEDIT: This is the original (although slightly different) code: [CircularArrayList for java][1]\r\n\r\nI don&#39;t have the link of the source because it was time ago, but here&#39;s the code:\r\n\r\n    \r\n    import java.util.AbstractList;\r\n    import java.util.ArrayList;\r\n    import java.util.Collections;\r\n    import java.util.List;\r\n    import java.util.RandomAccess;\r\n\r\n    public class CircularArrayList&lt;E&gt; extends AbstractList&lt;E&gt; implements RandomAccess {\r\n \r\n    private final int n; // buffer length\r\n    private final List&lt;E&gt; buf; // a List implementing RandomAccess\r\n    private int leader = 0;\r\n    private int size = 0;\r\n    \r\n \r\n    public CircularArrayList(int capacity) {\r\n        n = capacity + 1;\r\n        buf = new ArrayList&lt;E&gt;(Collections.nCopies(n, (E) null));\r\n    }\r\n \r\n    public int capacity() {\r\n        return n - 1;\r\n    }\r\n \r\n    private int wrapIndex(int i) {\r\n        int m = i % n;\r\n        if (m &lt; 0) { // modulus can be negative\r\n            m += n;\r\n        }\r\n        return m;\r\n    }\r\n \r\n    @Override\r\n    public int size() {\r\n        return this.size;\r\n    }\r\n \r\n    @Override\r\n    public E get(int i) {\r\n        if (i &lt; 0 || i &gt;= n-1) throw new IndexOutOfBoundsException();\r\n        \r\n        if(i &gt; size()) throw new NullPointerException(&quot;Index is greater than size.&quot;);\r\n        \r\n        return buf.get(wrapIndex(leader + i));\r\n    }\r\n \r\n    @Override\r\n    public E set(int i, E e) {\r\n        if (i &lt; 0 || i &gt;= n-1) {\r\n            throw new IndexOutOfBoundsException();\r\n        }\r\n        if(i == size()) // assume leader&#39;s position as invalid (should use insert(e))\r\n        \tthrow new IndexOutOfBoundsException(&quot;The size of the list is &quot; + size() + &quot; while the index was &quot; + i\r\n        \t\t\t+&quot;. Please use insert(e) method to fill the list.&quot;);\r\n        return buf.set(wrapIndex(leader - size + i), e);\r\n    }\r\n    \r\n    public void insert(E e)\r\n    {\r\n    \tint s = size();    \t\r\n    \tbuf.set(wrapIndex(leader), e);\r\n    \tleader = wrapIndex(++leader);\r\n    \tbuf.set(leader, null);\r\n    \tif(s == n-1)\r\n    \t\treturn; // we have replaced the eldest element.\r\n    \tthis.size++;\r\n    \t\r\n    }\r\n    \r\n    @Override\r\n    public void clear()\r\n    {\r\n    \tint cnt = wrapIndex(leader-size());\r\n    \tfor(; cnt != leader; cnt = wrapIndex(++cnt))\r\n    \t\tthis.buf.set(cnt, null);\r\n    \tthis.size = 0;    \t\r\n    }\r\n \r\n    public E removeOldest() {\r\n    \tint i = wrapIndex(leader+1);\r\n    \t\r\n        for(;;i = wrapIndex(++i)) {\r\n        \tif(buf.get(i) != null) break;\r\n        \tif(i == leader)\r\n            \tthrow new IllegalStateException(&quot;Cannot remove element.&quot;\r\n                        + &quot; CircularArrayList is empty.&quot;);\r\n        }\r\n        \r\n        this.size--;\r\n        return buf.set(i, null);\r\n    }\r\n    \r\n    @Override\r\n    public String toString()\r\n    {\r\n    \tint i = wrapIndex(leader - size());\r\n    \tStringBuilder str = new StringBuilder(size());\r\n    \t\r\n    \tfor(; i != leader; i = wrapIndex(++i)){\r\n    \t\tstr.append(buf.get(i));\r\n    \t}\r\n    \treturn str.toString();\r\n    }\r\n    \r\n    public E getOldest(){\r\n    \tint i = wrapIndex(leader+1);\r\n    \t\r\n        for(;;i = wrapIndex(++i)) {\r\n        \tif(buf.get(i) != null) break;\r\n        \tif(i == leader)\r\n            \tthrow new IllegalStateException(&quot;Cannot remove element.&quot;\r\n                        + &quot; CircularArrayList is empty.&quot;);\r\n        }\r\n        \r\n        return buf.get(i);\r\n    }\r\n    \r\n    public E getNewest(){\r\n    \tint i = wrapIndex(leader-1);\r\n    \tif(buf.get(i) == null)\r\n    \t\tthrow new IndexOutOfBoundsException(&quot;Error while retrieving the newest element. The Circular Array list is empty.&quot;);\r\n    \treturn buf.get(i);\r\n    }\r\n    }\r\n\r\n\r\n  [1]: http://www.museful.net/2011/software-development/circulararraylist-for-java","title":"Ring Buffer in Java","body":"<p>I had the same problem some time ago and was disappointed because I couldn't find any solution that suites my needs so I wrote my own class. \nHonestly, I did found some code back then, but even that wasn't what I was searching for so I adapted it and now I'm sharing it, just like the author of that piece of code did. </p>\n\n<p>EDIT: This is the original (although slightly different) code: <a href=\"http://www.museful.net/2011/software-development/circulararraylist-for-java\" rel=\"nofollow\">CircularArrayList for java</a></p>\n\n<p>I don't have the link of the source because it was time ago, but here's the code:</p>\n\n<pre><code>import java.util.AbstractList;\nimport java.util.ArrayList;\nimport java.util.Collections;\nimport java.util.List;\nimport java.util.RandomAccess;\n\npublic class CircularArrayList&lt;E&gt; extends AbstractList&lt;E&gt; implements RandomAccess {\n\nprivate final int n; // buffer length\nprivate final List&lt;E&gt; buf; // a List implementing RandomAccess\nprivate int leader = 0;\nprivate int size = 0;\n\n\npublic CircularArrayList(int capacity) {\n    n = capacity + 1;\n    buf = new ArrayList&lt;E&gt;(Collections.nCopies(n, (E) null));\n}\n\npublic int capacity() {\n    return n - 1;\n}\n\nprivate int wrapIndex(int i) {\n    int m = i % n;\n    if (m &lt; 0) { // modulus can be negative\n        m += n;\n    }\n    return m;\n}\n\n@Override\npublic int size() {\n    return this.size;\n}\n\n@Override\npublic E get(int i) {\n    if (i &lt; 0 || i &gt;= n-1) throw new IndexOutOfBoundsException();\n\n    if(i &gt; size()) throw new NullPointerException(\"Index is greater than size.\");\n\n    return buf.get(wrapIndex(leader + i));\n}\n\n@Override\npublic E set(int i, E e) {\n    if (i &lt; 0 || i &gt;= n-1) {\n        throw new IndexOutOfBoundsException();\n    }\n    if(i == size()) // assume leader's position as invalid (should use insert(e))\n        throw new IndexOutOfBoundsException(\"The size of the list is \" + size() + \" while the index was \" + i\n                +\". Please use insert(e) method to fill the list.\");\n    return buf.set(wrapIndex(leader - size + i), e);\n}\n\npublic void insert(E e)\n{\n    int s = size();     \n    buf.set(wrapIndex(leader), e);\n    leader = wrapIndex(++leader);\n    buf.set(leader, null);\n    if(s == n-1)\n        return; // we have replaced the eldest element.\n    this.size++;\n\n}\n\n@Override\npublic void clear()\n{\n    int cnt = wrapIndex(leader-size());\n    for(; cnt != leader; cnt = wrapIndex(++cnt))\n        this.buf.set(cnt, null);\n    this.size = 0;      \n}\n\npublic E removeOldest() {\n    int i = wrapIndex(leader+1);\n\n    for(;;i = wrapIndex(++i)) {\n        if(buf.get(i) != null) break;\n        if(i == leader)\n            throw new IllegalStateException(\"Cannot remove element.\"\n                    + \" CircularArrayList is empty.\");\n    }\n\n    this.size--;\n    return buf.set(i, null);\n}\n\n@Override\npublic String toString()\n{\n    int i = wrapIndex(leader - size());\n    StringBuilder str = new StringBuilder(size());\n\n    for(; i != leader; i = wrapIndex(++i)){\n        str.append(buf.get(i));\n    }\n    return str.toString();\n}\n\npublic E getOldest(){\n    int i = wrapIndex(leader+1);\n\n    for(;;i = wrapIndex(++i)) {\n        if(buf.get(i) != null) break;\n        if(i == leader)\n            throw new IllegalStateException(\"Cannot remove element.\"\n                    + \" CircularArrayList is empty.\");\n    }\n\n    return buf.get(i);\n}\n\npublic E getNewest(){\n    int i = wrapIndex(leader-1);\n    if(buf.get(i) == null)\n        throw new IndexOutOfBoundsException(\"Error while retrieving the newest element. The Circular Array list is empty.\");\n    return buf.get(i);\n}\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":438783,"reputation":6771,"user_id":827280,"accept_rate":93,"display_name":"Museful"},"down_vote_count":0,"up_vote_count":12,"is_accepted":false,"score":12,"last_activity_date":1394122236,"creation_date":1337429762,"answer_id":10665082,"question_id":7266042,"body_markdown":"If you need\r\n\r\n* O(1) insertion and removal\r\n* O(1) indexing to interior elements\r\n* access from a single thread only\r\n* generic element type\r\n\r\nthen you can use [this CircularArrayList for Java][1] in this way (for example):\r\n\r\n    CircularArrayList&lt;String&gt; buf = new CircularArrayList&lt;String&gt;(4);\r\n    \r\n    buf.add(&quot;A&quot;);\r\n    buf.add(&quot;B&quot;);\r\n    buf.add(&quot;C&quot;);\r\n    buf.add(&quot;D&quot;); // ABCD\r\n    \r\n    String pop = buf.remove(0); // A &lt;- BCD\r\n    buf.add(&quot;E&quot;); // BCDE\r\n    \r\n    String interiorElement = buf.get(i);\r\nAll these methods run in O(1).\r\n\r\n  [1]: http://www.museful.net/2011/software-development/circulararraylist-for-java","title":"Ring Buffer in Java","body":"<p>If you need</p>\n\n<ul>\n<li>O(1) insertion and removal</li>\n<li>O(1) indexing to interior elements</li>\n<li>access from a single thread only</li>\n<li>generic element type</li>\n</ul>\n\n<p>then you can use <a href=\"http://www.museful.net/2011/software-development/circulararraylist-for-java\" rel=\"noreferrer\">this CircularArrayList for Java</a> in this way (for example):</p>\n\n<pre><code>CircularArrayList&lt;String&gt; buf = new CircularArrayList&lt;String&gt;(4);\n\nbuf.add(\"A\");\nbuf.add(\"B\");\nbuf.add(\"C\");\nbuf.add(\"D\"); // ABCD\n\nString pop = buf.remove(0); // A &lt;- BCD\nbuf.add(\"E\"); // BCDE\n\nString interiorElement = buf.get(i);\n</code></pre>\n\n<p>All these methods run in O(1).</p>\n"},{"tags":[],"owner":{"account_id":1726920,"reputation":185,"user_id":1581374,"display_name":"T. Baum"},"down_vote_count":8,"up_vote_count":20,"is_accepted":false,"score":12,"last_activity_date":1359676830,"creation_date":1344328676,"answer_id":11842123,"question_id":7266042,"body_markdown":"Since Java 1.6, there is `ArrayDeque`, which implements `Queue` and seems to be faster and more memory efficient than a `LinkedList` and doesn&#39;t have the thread synchronization overhead of the `ArrayBlockingQueue`: from the API docs: *&quot;This class is likely to be faster than Stack when used as a stack, and faster than LinkedList when used as a queue.&quot;*\r\n\r\n    final Queue&lt;Object&gt; q = new ArrayDeque&lt;Object&gt;();\r\n    q.add(new Object()); //insert element\r\n    q.poll(); //remove element\r\n","title":"Ring Buffer in Java","body":"<p>Since Java 1.6, there is <code>ArrayDeque</code>, which implements <code>Queue</code> and seems to be faster and more memory efficient than a <code>LinkedList</code> and doesn't have the thread synchronization overhead of the <code>ArrayBlockingQueue</code>: from the API docs: <em>\"This class is likely to be faster than Stack when used as a stack, and faster than LinkedList when used as a queue.\"</em></p>\n\n<pre><code>final Queue&lt;Object&gt; q = new ArrayDeque&lt;Object&gt;();\nq.add(new Object()); //insert element\nq.poll(); //remove element\n</code></pre>\n"},{"tags":[],"owner":{"account_id":98634,"reputation":5066,"user_id":266875,"display_name":"Thomas Ferris Nicolaisen"},"down_vote_count":0,"up_vote_count":53,"is_accepted":false,"score":53,"last_activity_date":1470849378,"creation_date":1386862718,"answer_id":20547713,"question_id":7266042,"body_markdown":"Since Guava 15.0 (released September 2013) there&#39;s [EvictingQueue][1]:\r\n\r\n&gt; A non-blocking queue which automatically evicts elements from the head\r\n&gt; of the queue when attempting to add new elements onto the queue and it\r\n&gt; is full. An evicting queue must be configured with a maximum size.\r\n&gt; Each time an element is added to a full queue, the queue automatically\r\n&gt; removes its head element. This is different from conventional bounded\r\n&gt; queues, which either block or reject new elements when full.\r\n&gt; \r\n&gt; This class is not thread-safe, and does not accept null elements.\r\n\r\nExample use:\r\n\r\n&lt;!-- language: lang-java --&gt;\r\n        \r\n    EvictingQueue&lt;String&gt; queue = EvictingQueue.create(2);\r\n    queue.add(&quot;a&quot;);\r\n    queue.add(&quot;b&quot;);\r\n    queue.add(&quot;c&quot;);\r\n    queue.add(&quot;d&quot;);\r\n    System.out.print(queue); //outputs [c, d]\r\n\r\n\r\n  [1]: http://google.github.io/guava/releases/15.0/api/docs/com/google/common/collect/EvictingQueue.html","title":"Ring Buffer in Java","body":"<p>Since Guava 15.0 (released September 2013) there's <a href=\"http://google.github.io/guava/releases/15.0/api/docs/com/google/common/collect/EvictingQueue.html\">EvictingQueue</a>:</p>\n\n<blockquote>\n  <p>A non-blocking queue which automatically evicts elements from the head\n  of the queue when attempting to add new elements onto the queue and it\n  is full. An evicting queue must be configured with a maximum size.\n  Each time an element is added to a full queue, the queue automatically\n  removes its head element. This is different from conventional bounded\n  queues, which either block or reject new elements when full.</p>\n  \n  <p>This class is not thread-safe, and does not accept null elements.</p>\n</blockquote>\n\n<p>Example use:</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>EvictingQueue&lt;String&gt; queue = EvictingQueue.create(2);\nqueue.add(\"a\");\nqueue.add(\"b\");\nqueue.add(\"c\");\nqueue.add(\"d\");\nSystem.out.print(queue); //outputs [c, d]\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4158942,"reputation":1091,"user_id":3409441,"accept_rate":100,"display_name":"Terran"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1548464247,"creation_date":1483470516,"answer_id":41450671,"question_id":7266042,"body_markdown":"None of the previously given examples were meeting my needs completely, so I wrote my own queue that allows following functionality: iteration, index access, indexOf, lastIndexOf, get first, get last, offer, remaining capacity, expand capacity, dequeue last, dequeue first, enqueue / add element, dequeue / remove element, subQueueCopy, subArrayCopy, toArray, snapshot, basics like size, remove or contains.\r\n\r\n[EjectingQueue][1]\r\n\r\n[EjectingIntQueue][2]\r\n\r\n\r\n  [1]: https://gist.github.com/shathor/007a66c731592012bd9a\r\n  [2]: https://gist.github.com/shathor/44de9daa5807aa05dfc1","title":"Ring Buffer in Java","body":"<p>None of the previously given examples were meeting my needs completely, so I wrote my own queue that allows following functionality: iteration, index access, indexOf, lastIndexOf, get first, get last, offer, remaining capacity, expand capacity, dequeue last, dequeue first, enqueue / add element, dequeue / remove element, subQueueCopy, subArrayCopy, toArray, snapshot, basics like size, remove or contains.</p>\n\n<p><a href=\"https://gist.github.com/shathor/007a66c731592012bd9a\" rel=\"nofollow noreferrer\">EjectingQueue</a></p>\n\n<p><a href=\"https://gist.github.com/shathor/44de9daa5807aa05dfc1\" rel=\"nofollow noreferrer\">EjectingIntQueue</a></p>\n"},{"tags":[],"owner":{"account_id":476761,"reputation":24593,"user_id":887836,"accept_rate":96,"display_name":"Alexander Oh"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1530731184,"creation_date":1494949242,"answer_id":44005900,"question_id":7266042,"body_markdown":"A very interesting project is disruptor. It has a ringbuffer and is used from what I know in financial applications.\r\n\r\nSee here: [code of ringbuffer][1]\r\n\r\nI checked both Guava&#39;s EvictingQueue and ArrayDeque.\r\n\r\nArrayDeque does not limit growth if it&#39;s full it will double size and hence is not precisely acting like a ringbuffer.\r\n\r\nEvictingQueue does what it promises but internally uses a Deque to store things and just bounds memory. \r\n\r\nHence, if you care about memory being bounded ArrayDeque is not fullfilling your promise. If you care about object count EvictingQueue uses internal composition (bigger object size).\r\n\r\nA simple and memory efficient one can be stolen from [jmonkeyengine][2].\r\nverbatim copy\r\n\r\n\r\n    import java.util.Iterator;\r\n    import java.util.NoSuchElementException;\r\n\r\n    public class RingBuffer&lt;T&gt; implements Iterable&lt;T&gt; {\r\n\r\n      private T[] buffer;          // queue elements\r\n      private int count = 0;          // number of elements on queue\r\n      private int indexOut = 0;       // index of first element of queue\r\n      private int indexIn = 0;       // index of next available slot\r\n\r\n      // cast needed since no generic array creation in Java\r\n      public RingBuffer(int capacity) {\r\n        buffer = (T[]) new Object[capacity];\r\n      }\r\n\r\n      public boolean isEmpty() {\r\n        return count == 0;\r\n      }\r\n\r\n      public int size() {\r\n        return count;\r\n      }\r\n\r\n      public void push(T item) {\r\n        if (count == buffer.length) {\r\n            throw new RuntimeException(&quot;Ring buffer overflow&quot;);\r\n        }\r\n        buffer[indexIn] = item;\r\n        indexIn = (indexIn + 1) % buffer.length;     // wrap-around\r\n        count++;\r\n      }\r\n\r\n      public T pop() {\r\n        if (isEmpty()) {\r\n            throw new RuntimeException(&quot;Ring buffer underflow&quot;);\r\n        }\r\n        T item = buffer[indexOut];\r\n        buffer[indexOut] = null;                  // to help with garbage collection\r\n        count--;\r\n        indexOut = (indexOut + 1) % buffer.length; // wrap-around\r\n        return item;\r\n      }\r\n\r\n      public Iterator&lt;T&gt; iterator() {\r\n        return new RingBufferIterator();\r\n      }\r\n\r\n      // an iterator, doesn&#39;t implement remove() since it&#39;s optional\r\n      private class RingBufferIterator implements Iterator&lt;T&gt; {\r\n\r\n        private int i = 0;\r\n\r\n        public boolean hasNext() {\r\n            return i &lt; count;\r\n        }\r\n\r\n        public void remove() {\r\n            throw new UnsupportedOperationException();\r\n        }\r\n\r\n        public T next() {\r\n            if (!hasNext()) {\r\n                throw new NoSuchElementException();\r\n            }\r\n            return buffer[i++];\r\n        }\r\n      }\r\n    }\r\n\r\n\r\n\r\n\r\n[1]: https://github.com/LMAX-Exchange/disruptor/blob/master/src/main/java/com/lmax/disruptor/RingBuffer.java\r\n[2]: https://github.com/jMonkeyEngine/jmonkeyengine/blob/master/jme3-ios/src/main/java/com/jme3/util/RingBuffer.java","title":"Ring Buffer in Java","body":"<p>A very interesting project is disruptor. It has a ringbuffer and is used from what I know in financial applications.</p>\n\n<p>See here: <a href=\"https://github.com/LMAX-Exchange/disruptor/blob/master/src/main/java/com/lmax/disruptor/RingBuffer.java\" rel=\"nofollow noreferrer\">code of ringbuffer</a></p>\n\n<p>I checked both Guava's EvictingQueue and ArrayDeque.</p>\n\n<p>ArrayDeque does not limit growth if it's full it will double size and hence is not precisely acting like a ringbuffer.</p>\n\n<p>EvictingQueue does what it promises but internally uses a Deque to store things and just bounds memory. </p>\n\n<p>Hence, if you care about memory being bounded ArrayDeque is not fullfilling your promise. If you care about object count EvictingQueue uses internal composition (bigger object size).</p>\n\n<p>A simple and memory efficient one can be stolen from <a href=\"https://github.com/jMonkeyEngine/jmonkeyengine/blob/master/jme3-ios/src/main/java/com/jme3/util/RingBuffer.java\" rel=\"nofollow noreferrer\">jmonkeyengine</a>.\nverbatim copy</p>\n\n<pre><code>import java.util.Iterator;\nimport java.util.NoSuchElementException;\n\npublic class RingBuffer&lt;T&gt; implements Iterable&lt;T&gt; {\n\n  private T[] buffer;          // queue elements\n  private int count = 0;          // number of elements on queue\n  private int indexOut = 0;       // index of first element of queue\n  private int indexIn = 0;       // index of next available slot\n\n  // cast needed since no generic array creation in Java\n  public RingBuffer(int capacity) {\n    buffer = (T[]) new Object[capacity];\n  }\n\n  public boolean isEmpty() {\n    return count == 0;\n  }\n\n  public int size() {\n    return count;\n  }\n\n  public void push(T item) {\n    if (count == buffer.length) {\n        throw new RuntimeException(\"Ring buffer overflow\");\n    }\n    buffer[indexIn] = item;\n    indexIn = (indexIn + 1) % buffer.length;     // wrap-around\n    count++;\n  }\n\n  public T pop() {\n    if (isEmpty()) {\n        throw new RuntimeException(\"Ring buffer underflow\");\n    }\n    T item = buffer[indexOut];\n    buffer[indexOut] = null;                  // to help with garbage collection\n    count--;\n    indexOut = (indexOut + 1) % buffer.length; // wrap-around\n    return item;\n  }\n\n  public Iterator&lt;T&gt; iterator() {\n    return new RingBufferIterator();\n  }\n\n  // an iterator, doesn't implement remove() since it's optional\n  private class RingBufferIterator implements Iterator&lt;T&gt; {\n\n    private int i = 0;\n\n    public boolean hasNext() {\n        return i &lt; count;\n    }\n\n    public void remove() {\n        throw new UnsupportedOperationException();\n    }\n\n    public T next() {\n        if (!hasNext()) {\n            throw new NoSuchElementException();\n        }\n        return buffer[i++];\n    }\n  }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4652024,"reputation":355,"user_id":3768649,"display_name":"w_n"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1692289844,"creation_date":1692125635,"answer_id":76908466,"question_id":7266042,"body_markdown":"If you don&#39;t want to import some library just for that, you can use a Deque as a queue and wrap the RingBuffer logic around it:\r\n ````\r\nimport java.util.ArrayDeque;\r\nimport java.util.Deque;\r\n\r\npublic class RingBuffer&lt;E&gt; {\r\n    private final Deque&lt;E&gt; queue;\r\n    private final int size;\r\n\r\n    public RingBuffer(final int size) {\r\n        queue = new ArrayDeque&lt;&gt;(size);\r\n        this.size = size;\r\n    }\r\n\r\n    public void add(final E e) {\r\n        if (queue.size() == size) {\r\n            queue.poll();\r\n        }\r\n        queue.add(e);\r\n    }\r\n\r\n    public E poll() {\r\n        return queue.poll();\r\n    }\r\n\r\n    @Override\r\n    public String toString() {\r\n        return queue.toString();\r\n    }\r\n}\r\n ````\r\n","title":"Ring Buffer in Java","body":"<p>If you don't want to import some library just for that, you can use a Deque as a queue and wrap the RingBuffer logic around it:</p>\n<pre><code>import java.util.ArrayDeque;\nimport java.util.Deque;\n\npublic class RingBuffer&lt;E&gt; {\n   private final Deque&lt;E&gt; queue;\n   private final int size;\n\n   public RingBuffer(final int size) {\n       queue = new ArrayDeque&lt;&gt;(size);\n       this.size = size;\n   }\n\n   public void add(final E e) {\n       if (queue.size() == size) {\n           queue.poll();\n       }\n       queue.add(e);\n   }\n\n   public E poll() {\n       return queue.poll();\n   }\n\n   @Override\n   public String toString() {\n       return queue.toString();\n   }\n}\n</code></pre>\n"}],"owner":{"account_id":792584,"reputation":921,"user_id":903915,"display_name":"Truba"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":137627,"favorite_count":0,"down_vote_count":0,"up_vote_count":92,"answer_count":9,"score":92,"last_activity_date":1692289844,"creation_date":1314850252,"question_id":7266042,"body_markdown":"I have a streaming time series, of which I am interested in keeping the last 4 elements, which means I want to be able to pop the first, and add to the end. Essentially what I need is a [**ring buffer**][1].\r\n\r\nWhich Java Collection is the best for this? Vector?\r\n\r\n\r\n  [1]: https://en.wikipedia.org/wiki/Circular_buffer","title":"Ring Buffer in Java","body":"<p>I have a streaming time series, of which I am interested in keeping the last 4 elements, which means I want to be able to pop the first, and add to the end. Essentially what I need is a <a href=\"https://en.wikipedia.org/wiki/Circular_buffer\" rel=\"noreferrer\"><strong>ring buffer</strong></a>.</p>\n\n<p>Which Java Collection is the best for this? Vector?</p>\n"},{"tags":["java","ntlm","apache-commons-httpclient","apache-httpclient-5.x"],"comments":[{"owner":{"account_id":133909,"reputation":26610,"user_id":335638,"display_name":"ok2c"},"score":0,"creation_date":1692294516,"post_id":76923340,"comment_id":135607246,"body_markdown":"NTLM is going to get deprecated and disabled by default in HttpClient 5.3. Consider migrating to TLS / Basic or Bearer","body":"NTLM is going to get deprecated and disabled by default in HttpClient 5.3. Consider migrating to TLS / Basic or Bearer"}],"owner":{"account_id":2573759,"reputation":347,"user_id":2231919,"accept_rate":82,"display_name":"Spyridon Non Serviam"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":106,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1692289014,"creation_date":1692289014,"question_id":76923340,"body_markdown":"I have the following Java code with `org.apache.commons.httpclient`:\r\n\r\n```\r\nString url = &quot;something&quot;;\r\nCredentialsProvider credsProvider;\r\nRequestConfig requestConfig;\r\ncredsProvider = new BasicCredentialsProvider();\r\ncredsProvider.setCredentials(AuthScope.ANY, new NTCredentials(user, pass, host, domain));\r\nrequestConfig = RequestConfig.custom()\r\n\t\t.setTargetPreferredAuthSchemes(Collections.singletonList(AuthSchemes.NTLM)).build();\r\n\r\nHttpClient httpClient = HttpClients.custom().setDefaultCredentialsProvider(credsProvider)\r\n\t\t\t\t.setDefaultRequestConfig(requestConfig).build();\r\nHttpComponentsClientHttpRequestFactory requestFactory = new HttpComponentsClientHttpRequestFactory();\r\nrequestFactory.setHttpClient(httpClient);\r\nRestTemplate restTemplate = new RestTemplate(requestFactory);\r\nreturn restTemplate.getForObject(url, String.class);\r\n```\r\n\r\nI want to migrate it to the newest `org.apache.hc.client5` but lines 4 and 5 cannot be converted one to one, neither I was able to find a proper conversion.\r\n\r\nIs there a path here to migrate this NTLM auth to the latest apache version (or to standard Java)?","title":"How to migrate NTLM auth to Apache HttpClient 5 from older version","body":"<p>I have the following Java code with <code>org.apache.commons.httpclient</code>:</p>\n<pre><code>String url = &quot;something&quot;;\nCredentialsProvider credsProvider;\nRequestConfig requestConfig;\ncredsProvider = new BasicCredentialsProvider();\ncredsProvider.setCredentials(AuthScope.ANY, new NTCredentials(user, pass, host, domain));\nrequestConfig = RequestConfig.custom()\n        .setTargetPreferredAuthSchemes(Collections.singletonList(AuthSchemes.NTLM)).build();\n\nHttpClient httpClient = HttpClients.custom().setDefaultCredentialsProvider(credsProvider)\n                .setDefaultRequestConfig(requestConfig).build();\nHttpComponentsClientHttpRequestFactory requestFactory = new HttpComponentsClientHttpRequestFactory();\nrequestFactory.setHttpClient(httpClient);\nRestTemplate restTemplate = new RestTemplate(requestFactory);\nreturn restTemplate.getForObject(url, String.class);\n</code></pre>\n<p>I want to migrate it to the newest <code>org.apache.hc.client5</code> but lines 4 and 5 cannot be converted one to one, neither I was able to find a proper conversion.</p>\n<p>Is there a path here to migrate this NTLM auth to the latest apache version (or to standard Java)?</p>\n"},{"tags":["java","docker","metrics","datadog"],"owner":{"account_id":16592282,"reputation":53,"user_id":11990156,"display_name":"DilliBabu S"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":98,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1692288542,"creation_date":1692288542,"question_id":76923273,"body_markdown":"We are currently using dd-agent to trace our application hosted in Docker container. Here both agent and application are hosted in container. Now, we are planning to push some custom metrics to datadog using DogStatsD from our application(Spring-boot). \r\n\r\nWe followed the steps for submitting the metrics from &quot;Metric Submission: DogStatsD&quot; documentation. But we are not seeing any metrics in metrics summary/metrics explorer. We using docker-compose to build and run our application.\r\n\r\nCould someone help me to resolve this?\r\n","title":"Custom Metrics sent through DogStatsD is not listed in DataDog","body":"<p>We are currently using dd-agent to trace our application hosted in Docker container. Here both agent and application are hosted in container. Now, we are planning to push some custom metrics to datadog using DogStatsD from our application(Spring-boot).</p>\n<p>We followed the steps for submitting the metrics from &quot;Metric Submission: DogStatsD&quot; documentation. But we are not seeing any metrics in metrics summary/metrics explorer. We using docker-compose to build and run our application.</p>\n<p>Could someone help me to resolve this?</p>\n"},{"tags":["java","hashmap","java-9","factory-method"],"answers":[{"tags":[],"owner":{"account_id":1056871,"reputation":117729,"user_id":1059372,"accept_rate":97,"display_name":"Eugene"},"down_vote_count":0,"up_vote_count":18,"is_accepted":true,"score":18,"last_activity_date":1536572120,"creation_date":1536571155,"answer_id":52254601,"question_id":52254569,"body_markdown":"There isn&#39;t a factory method like `LinkedHashMap::of` indeed, and a `Map` does not have an order per-se, so the only way I see it is to build a `LinkedHashMap` if you really needed one. \n\nBtw from [the JEP itself][1]:\n\n&gt; Static factory methods on concrete collection classes (e.g., ArrayList, HashSet) have been removed from this proposal ...\n&gt;\n&gt; There is another wrinkle, which is that static methods on classes are inherited by subclasses. Suppose a static factory method HashMap.of() were to be added. Since LinkedHashMap is a subclass of HashMap, it would be possible for application code to call LinkedHashMap.of(). This would end up calling HashMap.of(), not at all what one would expect! \n\nPoint here is that `static` methods are inherited, but not overridable, thus if such a method would have been added to `HashMap` it could have not been overridden in `LinkedHashMap`.\n\nIf you can use `guava`, you could use `ImmutableMap` that is documented as:\n\n&gt; An immutable, hash-based Map with reliable user-specified iteration order...\n\n\n  [1]: http://openjdk.java.net/jeps/269","title":"How to preserve order of insertion in Map.of factory?","body":"<p>There isn't a factory method like <code>LinkedHashMap::of</code> indeed, and a <code>Map</code> does not have an order per-se, so the only way I see it is to build a <code>LinkedHashMap</code> if you really needed one.</p>\n<p>Btw from <a href=\"http://openjdk.java.net/jeps/269\" rel=\"noreferrer\">the JEP itself</a>:</p>\n<blockquote>\n<p>Static factory methods on concrete collection classes (e.g., ArrayList, HashSet) have been removed from this proposal ...</p>\n<p>There is another wrinkle, which is that static methods on classes are inherited by subclasses. Suppose a static factory method HashMap.of() were to be added. Since LinkedHashMap is a subclass of HashMap, it would be possible for application code to call LinkedHashMap.of(). This would end up calling HashMap.of(), not at all what one would expect!</p>\n</blockquote>\n<p>Point here is that <code>static</code> methods are inherited, but not overridable, thus if such a method would have been added to <code>HashMap</code> it could have not been overridden in <code>LinkedHashMap</code>.</p>\n<p>If you can use <code>guava</code>, you could use <code>ImmutableMap</code> that is documented as:</p>\n<blockquote>\n<p>An immutable, hash-based Map with reliable user-specified iteration order...</p>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":213468,"reputation":103489,"user_id":466862,"display_name":"Mark Rotteveel"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1543827509,"creation_date":1543827509,"answer_id":53590354,"question_id":52254569,"body_markdown":"As documented on the Java apidoc of [`Map`][1] (emphasis mine):\r\n\r\n&gt; # Unmodifiable Maps\r\n&gt; \r\n&gt; The `Map.of`, `Map.ofEntries`, and `Map.copyOf` static factory methods\r\n&gt; provide a convenient way to create unmodifiable maps. The Map\r\n&gt; instances created by these methods have the following characteristics:\r\n&gt; \r\n&gt; - ...\r\n&gt; - The **iteration order of mappings is unspecified** and is subject to change.\r\n&gt; - ...\r\n\r\nUnfortunately, there is no equivalent convenience method in the Java API that creates a `LinkedHashMap`. If you want a consistent iteration order, then you will need to manually create a `LinkedHashMap` and populate it (and - if needed - wrap it using `Collections.unmodifiableMap`). \r\n\r\nConsider creating your own convenience method that does the equivalent of `Map.of` but with a consistent iteration order (or find an existing library that already provides this).\r\n\r\n  [1]: https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/Map.html","title":"How to preserve order of insertion in Map.of factory?","body":"<p>As documented on the Java apidoc of <a href=\"https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/Map.html\" rel=\"noreferrer\"><code>Map</code></a> (emphasis mine):</p>\n\n<blockquote>\n  <h1>Unmodifiable Maps</h1>\n  \n  <p>The <code>Map.of</code>, <code>Map.ofEntries</code>, and <code>Map.copyOf</code> static factory methods\n  provide a convenient way to create unmodifiable maps. The Map\n  instances created by these methods have the following characteristics:</p>\n  \n  <ul>\n  <li>...</li>\n  <li>The <strong>iteration order of mappings is unspecified</strong> and is subject to change.</li>\n  <li>...</li>\n  </ul>\n</blockquote>\n\n<p>Unfortunately, there is no equivalent convenience method in the Java API that creates a <code>LinkedHashMap</code>. If you want a consistent iteration order, then you will need to manually create a <code>LinkedHashMap</code> and populate it (and - if needed - wrap it using <code>Collections.unmodifiableMap</code>). </p>\n\n<p>Consider creating your own convenience method that does the equivalent of <code>Map.of</code> but with a consistent iteration order (or find an existing library that already provides this).</p>\n"},{"tags":[],"owner":{"account_id":7113761,"reputation":131,"user_id":5440774,"display_name":"miro"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1619526865,"creation_date":1619526865,"answer_id":67283143,"question_id":52254569,"body_markdown":"You can also use vavr.io in the following way:\r\n\r\n    Map&lt;String, String&gt; mapPreservingInsertionOrder = io.vavr.collection.LinkedHashMap.of(&quot;key1&quot;, &quot;val1&quot;, &quot;key2&quot;, &quot;val2&quot;).toJavaMap();","title":"How to preserve order of insertion in Map.of factory?","body":"<p>You can also use vavr.io in the following way:</p>\n<pre><code>Map&lt;String, String&gt; mapPreservingInsertionOrder = io.vavr.collection.LinkedHashMap.of(&quot;key1&quot;, &quot;val1&quot;, &quot;key2&quot;, &quot;val2&quot;).toJavaMap();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":10391508,"reputation":554,"user_id":7662651,"display_name":"Markus Hettich"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1657141170,"creation_date":1657141170,"answer_id":72889788,"question_id":52254569,"body_markdown":"Because there seems to be no method that is doing what you want in the JDK you have to implement it by yourself or use a existing library. Creating such helper method isn&#39;t that hard:\r\n\r\n    public static &lt;K, V&gt; LinkedHashMap&lt;K, V&gt; of(Collection&lt;Entry&lt;? extends K, ? extends V&gt;&gt; entries) {\r\n      final LinkedHashMap&lt;K, V&gt; map = new LinkedHashMap&lt;&gt;();\r\n      entries.forEach(entry -&gt; map.put(entry.getKey(), entry.getValue()));\r\n      return map;\r\n    }\r\n\r\nAnd then you could use it like this:\r\n\r\n    of(List.of(Map.entry(&quot;Hello&quot;, &quot;World&quot;), Map.entry(&quot;Goodnight&quot;, &quot;Moon&quot;)));\r\n\r\nThis solution has the advantage over the Map.of in the JDK that the key value pairs are provided as entry pairs and not just as lose pairs by parameter index.","title":"How to preserve order of insertion in Map.of factory?","body":"<p>Because there seems to be no method that is doing what you want in the JDK you have to implement it by yourself or use a existing library. Creating such helper method isn't that hard:</p>\n<pre><code>public static &lt;K, V&gt; LinkedHashMap&lt;K, V&gt; of(Collection&lt;Entry&lt;? extends K, ? extends V&gt;&gt; entries) {\n  final LinkedHashMap&lt;K, V&gt; map = new LinkedHashMap&lt;&gt;();\n  entries.forEach(entry -&gt; map.put(entry.getKey(), entry.getValue()));\n  return map;\n}\n</code></pre>\n<p>And then you could use it like this:</p>\n<pre><code>of(List.of(Map.entry(&quot;Hello&quot;, &quot;World&quot;), Map.entry(&quot;Goodnight&quot;, &quot;Moon&quot;)));\n</code></pre>\n<p>This solution has the advantage over the Map.of in the JDK that the key value pairs are provided as entry pairs and not just as lose pairs by parameter index.</p>\n"},{"tags":[],"owner":{"account_id":308365,"reputation":2377,"user_id":620192,"accept_rate":64,"display_name":"ScrappyDev"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1692288485,"creation_date":1692288485,"answer_id":76923268,"question_id":52254569,"body_markdown":"If you don&#39;t care about the order, but only need it to be consistent, you can use a sorted map like `TreeMap` in conjunction with `Map.of`\r\n\r\n```\r\nnew TreeMap&lt;&gt;(Map.of(&quot;key1&quot;, &quot;value1&quot;, &quot;key0&quot;, &quot;value0&quot;, &quot;key3&quot;, &quot;value3&quot;))\r\n```\r\n\r\nThis should always return a consistent map with the keys sorted.\r\n\r\nNote: If you need it to be Unmodifiable, you&#39;ll need to wrap it with something like \r\n```\r\nCollections.unmodifiableMap(&lt;&lt;&lt;TreeMap Here&gt;&gt;&gt;)\r\n```","title":"How to preserve order of insertion in Map.of factory?","body":"<p>If you don't care about the order, but only need it to be consistent, you can use a sorted map like <code>TreeMap</code> in conjunction with <code>Map.of</code></p>\n<pre><code>new TreeMap&lt;&gt;(Map.of(&quot;key1&quot;, &quot;value1&quot;, &quot;key0&quot;, &quot;value0&quot;, &quot;key3&quot;, &quot;value3&quot;))\n</code></pre>\n<p>This should always return a consistent map with the keys sorted.</p>\n<p>Note: If you need it to be Unmodifiable, you'll need to wrap it with something like</p>\n<pre><code>Collections.unmodifiableMap(&lt;&lt;&lt;TreeMap Here&gt;&gt;&gt;)\n</code></pre>\n"}],"owner":{"account_id":1229539,"reputation":82701,"user_id":1194415,"accept_rate":76,"display_name":"membersound"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":4134,"favorite_count":0,"down_vote_count":1,"up_vote_count":22,"accepted_answer_id":52254601,"answer_count":5,"score":21,"last_activity_date":1692288485,"creation_date":1536571050,"question_id":52254569,"body_markdown":"Java 9 offers `Map.of()` feature to easily create a map with fixed values.\r\n\r\nProblem: I want to create a map that preserves order of insertion like `LinkedHashMap`. Is that possible with that factory? At least `map.of()` does not preserv the order...","title":"How to preserve order of insertion in Map.of factory?","body":"<p>Java 9 offers <code>Map.of()</code> feature to easily create a map with fixed values.</p>\n\n<p>Problem: I want to create a map that preserves order of insertion like <code>LinkedHashMap</code>. Is that possible with that factory? At least <code>map.of()</code> does not preserv the order...</p>\n"},{"tags":["java","android","openai-api","chatgpt-api","whisper"],"owner":{"account_id":5649224,"reputation":1071,"user_id":4470419,"accept_rate":75,"display_name":"Manoj ahirwar"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":125,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1692288224,"creation_date":1692288224,"question_id":76923237,"body_markdown":"I am trying to call Whisper API from my android app. I am recording the audio and storing in `.wav` format. when i am calling the whisper API its always giving me 400 error saying invalid file format.\r\n\r\nI tried playing the audio back and its working. also file is readable. have been trying to find solution for couple of hours now. \r\n\r\nfollowing is my code\r\n\r\n```java\r\nprivate void startRecording() {\r\n        fileName = getExternalCacheDir().getAbsolutePath() + &quot;/recording.wav&quot;;\r\n\r\n        recorder = new MediaRecorder();\r\n        recorder.setAudioSource(MediaRecorder.AudioSource.MIC);\r\n        recorder.setOutputFormat(MediaRecorder.OutputFormat.DEFAULT);\r\n        recorder.setOutputFile(fileName);\r\n        recorder.setAudioEncoder(MediaRecorder.AudioEncoder.DEFAULT);\r\n\r\n        try {\r\n            recorder.prepare();\r\n        } catch (IOException e) {\r\n            e.printStackTrace();\r\n        }\r\n\r\n        recorder.start();\r\n    }\r\n```\r\n\r\n```java\r\nprivate void stopRecording() {\r\n        recorder.stop();\r\n        recorder.release();\r\n        recorder = null;\r\n\r\n        // Copy the recorded WAV file to a new file\r\n        String newFileName = getExternalCacheDir().getAbsolutePath() + &quot;/new_recording.wav&quot;;\r\n        try {\r\n            Files.copy(Paths.get(fileName), Paths.get(newFileName), StandardCopyOption.REPLACE_EXISTING);\r\n        } catch (IOException e) {\r\n            e.printStackTrace();\r\n        }\r\n\r\n        OkHttpClient client = new OkHttpClient();\r\n\r\n        File file = new File(newFileName);\r\n        String absolutePath = file.getAbsolutePath();\r\n\r\n        RequestBody requestBody = new MultipartBody.Builder()\r\n                .setType(MultipartBody.FORM)\r\n                .addFormDataPart(&quot;file&quot;, &quot;new_recording.wav&quot;, RequestBody.create(MediaType.parse(&quot;audio/wav&quot;), new File(absolutePath)))\r\n                .addFormDataPart(&quot;model&quot;, &quot;whisper-1&quot;)\r\n                .build();\r\n\r\n        Request request = new Request.Builder()\r\n                .url(&quot;https://api.openai.com/v1/audio/transcriptions&quot;)\r\n                .post(requestBody)\r\n                .header(&quot;Authorization&quot;, &quot;Bearer sk-QAym*******gUIRdxXGq&quot;)\r\n                .header(&quot;Content-Type&quot;, &quot;multipart/form-data&quot;)\r\n                .build();\r\n\r\n        client.newCall(request).enqueue(new okhttp3.Callback() {\r\n            @Override\r\n            public void onFailure(okhttp3.Call call, IOException e) {\r\n                e.printStackTrace();\r\n            }\r\n\r\n            @Override\r\n            public void onResponse(okhttp3.Call call, okhttp3.Response response) throws IOException {\r\n                if (!response.isSuccessful()) {\r\n                    System.out.println(&quot;Unexpected code &quot; + response);\r\n                }\r\n                System.out.println(response.body().string());\r\n            }\r\n        });\r\n    }\r\n```\r\n\r\nwas just trying to create another wav file from existing, and this is also not working.\r\n\r\nwould appreciate any help or suggestions.\r\n\r\nthanks","title":"Keep getting 400 Invalid File Form error from Whisper API","body":"<p>I am trying to call Whisper API from my android app. I am recording the audio and storing in <code>.wav</code> format. when i am calling the whisper API its always giving me 400 error saying invalid file format.</p>\n<p>I tried playing the audio back and its working. also file is readable. have been trying to find solution for couple of hours now.</p>\n<p>following is my code</p>\n<pre class=\"lang-java prettyprint-override\"><code>private void startRecording() {\n        fileName = getExternalCacheDir().getAbsolutePath() + &quot;/recording.wav&quot;;\n\n        recorder = new MediaRecorder();\n        recorder.setAudioSource(MediaRecorder.AudioSource.MIC);\n        recorder.setOutputFormat(MediaRecorder.OutputFormat.DEFAULT);\n        recorder.setOutputFile(fileName);\n        recorder.setAudioEncoder(MediaRecorder.AudioEncoder.DEFAULT);\n\n        try {\n            recorder.prepare();\n        } catch (IOException e) {\n            e.printStackTrace();\n        }\n\n        recorder.start();\n    }\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>private void stopRecording() {\n        recorder.stop();\n        recorder.release();\n        recorder = null;\n\n        // Copy the recorded WAV file to a new file\n        String newFileName = getExternalCacheDir().getAbsolutePath() + &quot;/new_recording.wav&quot;;\n        try {\n            Files.copy(Paths.get(fileName), Paths.get(newFileName), StandardCopyOption.REPLACE_EXISTING);\n        } catch (IOException e) {\n            e.printStackTrace();\n        }\n\n        OkHttpClient client = new OkHttpClient();\n\n        File file = new File(newFileName);\n        String absolutePath = file.getAbsolutePath();\n\n        RequestBody requestBody = new MultipartBody.Builder()\n                .setType(MultipartBody.FORM)\n                .addFormDataPart(&quot;file&quot;, &quot;new_recording.wav&quot;, RequestBody.create(MediaType.parse(&quot;audio/wav&quot;), new File(absolutePath)))\n                .addFormDataPart(&quot;model&quot;, &quot;whisper-1&quot;)\n                .build();\n\n        Request request = new Request.Builder()\n                .url(&quot;https://api.openai.com/v1/audio/transcriptions&quot;)\n                .post(requestBody)\n                .header(&quot;Authorization&quot;, &quot;Bearer sk-QAym*******gUIRdxXGq&quot;)\n                .header(&quot;Content-Type&quot;, &quot;multipart/form-data&quot;)\n                .build();\n\n        client.newCall(request).enqueue(new okhttp3.Callback() {\n            @Override\n            public void onFailure(okhttp3.Call call, IOException e) {\n                e.printStackTrace();\n            }\n\n            @Override\n            public void onResponse(okhttp3.Call call, okhttp3.Response response) throws IOException {\n                if (!response.isSuccessful()) {\n                    System.out.println(&quot;Unexpected code &quot; + response);\n                }\n                System.out.println(response.body().string());\n            }\n        });\n    }\n</code></pre>\n<p>was just trying to create another wav file from existing, and this is also not working.</p>\n<p>would appreciate any help or suggestions.</p>\n<p>thanks</p>\n"},{"tags":["java","selenium","selenium-webdriver"],"comments":[{"owner":{"account_id":1421603,"reputation":5012,"user_id":1346104,"accept_rate":16,"display_name":"Manigandan"},"score":0,"creation_date":1397726187,"post_id":23128743,"comment_id":35360755,"body_markdown":"If your application provides the graph and pie chart as an image. Then it is not possible to automate through selenium.","body":"If your application provides the graph and pie chart as an image. Then it is not possible to automate through selenium."},{"owner":{"account_id":2562742,"reputation":5917,"user_id":2851311,"display_name":"hfontanez"},"score":0,"creation_date":1640038748,"post_id":23128743,"comment_id":124496576,"body_markdown":"Do you see how all over the place these answers are? That&#39;s because you haven&#39;t provided sufficient information for anyone to help you. It would help if you include extracts of your DOM to see how you can use Selenium effectively to extract data from the document model and compare it with your expected results.","body":"Do you see how all over the place these answers are? That&#39;s because you haven&#39;t provided sufficient information for anyone to help you. It would help if you include extracts of your DOM to see how you can use Selenium effectively to extract data from the document model and compare it with your expected results."}],"answers":[{"tags":[],"owner":{"account_id":2741305,"reputation":137,"user_id":2691516,"accept_rate":100,"display_name":"Michele Festini"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1397725442,"creation_date":1397725442,"answer_id":23128897,"question_id":23128743,"body_markdown":"Assuming that your graph has a Javascript Model (e.g. an array) you can assert the contents of such array by using the assertEval command. ","title":"How to automate graphs using Selenium, Java","body":"<p>Assuming that your graph has a Javascript Model (e.g. an array) you can assert the contents of such array by using the assertEval command. </p>\n"},{"tags":[],"owner":{"account_id":4023251,"reputation":131,"user_id":3312657,"display_name":"Tehsil"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1397732884,"creation_date":1397728583,"answer_id":23129980,"question_id":23128743,"body_markdown":"I am posting the most basic but fundamental example for your Pie chart problem,\r\nHere I am taking Yahoo&#39;s YUI based PIE Chart for my example.\r\nHere in each refresh all the sections are created dynamically so I am using contains in the id of the element . Here in the chart the controls are not simple HTML but these are svg (HTML5 controls) so on finding these we need to use //* in xpath.\r\n\r\nMy motive here is to find these dynamic sections in the PIE chart(Here in the current chart there are 5 sections)\r\n\r\nAnd to click each section and to print tool tip text of these.\r\n\r\nThe Out put will be like.\r\nViolette Part:day: Monday\r\ntaxes: 2000\r\n\r\nGrey Part:day: Friday\r\ntaxes: 2000\r\n\r\nLight Violette Part:day: Thursday\r\ntaxes: 200\r\n\r\nGreen Part:day: Wednesday\r\ntaxes: 4000\r\n\r\nBrown Part:day: Tuesday\r\ntaxes: 50\r\n0.61%\r\n\r\nHere is the Demo program for it,anywhere you can execute it... :)\r\n\r\n\r\n\r\n     package tests;\r\n\r\n     import java.util.concurrent.TimeUnit;\r\n     import org.openqa.selenium.By; \r\n     import org.openqa.selenium.WebDriver;\r\n     import org.openqa.selenium.WebElement;\r\n     import org.openqa.selenium.firefox.FirefoxDriver;\r\n\r\n\r\n     public class testCode {\r\n     public static WebDriver driver;\r\n\r\n     public static void main(String[] args) throws InterruptedException {\r\n\r\n     driver = new FirefoxDriver();\r\n     driver.get(&quot;http://yuilibrary.com/yui/docs/charts/charts-pie.html&quot;);\r\n\r\n     driver.manage().timeouts().implicitlyWait(5, TimeUnit.SECONDS);\r\n\r\n     **//FIND DIFFERENT SECTIONS IN PIE CHART**\r\n\r\n     WebElement ViolettePart = driver.findElement(By.xpath(&quot;//*   [contains(@id,&#39;yui_3_13_0_1_&#39;)][contains(@class,&#39;yui3-svgSvgPieSlice&#39;)][@fill=&#39;#66007f&#39;]&quot;));\r\n     WebElement GreenPart = driver.findElement(By.xpath(&quot;//*[contains(@id,&#39;yui_3_13_0_1_&#39;)][contains(@class,&#39;yui3-svgSvgPieSlice&#39;)][@fill=&#39;#295454&#39;]&quot;));\r\n     WebElement GreyPart = driver.findElement(By.xpath(&quot;//*[contains(@id,&#39;yui_3_13_0_1_&#39;)][contains(@class,&#39;yui3-svgSvgPieSlice&#39;)][@fill=&#39;#e8cdb7&#39;]&quot;));\r\n     WebElement LightViolettePart = driver.findElement(By.xpath(&quot;//*[contains(@id,&#39;yui_3_13_0_1_&#39;)][contains(@class,&#39;yui3-svgSvgPieSlice&#39;)][@fill=&#39;#996ab2&#39;]&quot;));\r\n     WebElement BrownPart = driver.findElement(By.xpath(&quot;//*[contains(@id,&#39;yui_3_13_0_1_&#39;)][contains(@class,&#39;yui3-svgSvgPieSlice&#39;)][@fill=&#39;#a86f41&#39;]&quot;));\r\n\r\n     **//TOOLTIP OVER PIE CHART**\r\n\r\n     WebElement ToolTip = driver.findElement(By.xpath(&quot;//div[contains(@id,&#39;_tooltip&#39;)]&quot;));\r\n\r\n     **//CLICK EACH SECTION OF PIE CHART AND GET THE TEXT OVER IT**\r\n\r\n     ViolettePart.click();\r\n     System.out.println(&quot;Violette Part:&quot;+ToolTip.getText());\r\n     GreyPart.click();\r\n     System.out.println(&quot;Grey Part:&quot;+ToolTip.getText());\r\n     LightViolettePart.click();\r\n     System.out.println(&quot;Light Violete Part:&quot;+ToolTip.getText());\r\n     GreenPart.click();\r\n     System.out.println(&quot;Green Part:&quot;+ToolTip.getText());\r\n     BrownPart.click();\r\n     System.out.println(&quot;Brown Part:&quot;+ToolTip.getText());\r\n     } }\r\n","title":"How to automate graphs using Selenium, Java","body":"<p>I am posting the most basic but fundamental example for your Pie chart problem,\nHere I am taking Yahoo's YUI based PIE Chart for my example.\nHere in each refresh all the sections are created dynamically so I am using contains in the id of the element . Here in the chart the controls are not simple HTML but these are svg (HTML5 controls) so on finding these we need to use //* in xpath.</p>\n\n<p>My motive here is to find these dynamic sections in the PIE chart(Here in the current chart there are 5 sections)</p>\n\n<p>And to click each section and to print tool tip text of these.</p>\n\n<p>The Out put will be like.\nViolette Part:day: Monday\ntaxes: 2000</p>\n\n<p>Grey Part:day: Friday\ntaxes: 2000</p>\n\n<p>Light Violette Part:day: Thursday\ntaxes: 200</p>\n\n<p>Green Part:day: Wednesday\ntaxes: 4000</p>\n\n<p>Brown Part:day: Tuesday\ntaxes: 50\n0.61%</p>\n\n<p>Here is the Demo program for it,anywhere you can execute it... :)</p>\n\n<pre><code> package tests;\n\n import java.util.concurrent.TimeUnit;\n import org.openqa.selenium.By; \n import org.openqa.selenium.WebDriver;\n import org.openqa.selenium.WebElement;\n import org.openqa.selenium.firefox.FirefoxDriver;\n\n\n public class testCode {\n public static WebDriver driver;\n\n public static void main(String[] args) throws InterruptedException {\n\n driver = new FirefoxDriver();\n driver.get(\"http://yuilibrary.com/yui/docs/charts/charts-pie.html\");\n\n driver.manage().timeouts().implicitlyWait(5, TimeUnit.SECONDS);\n\n **//FIND DIFFERENT SECTIONS IN PIE CHART**\n\n WebElement ViolettePart = driver.findElement(By.xpath(\"//*   [contains(@id,'yui_3_13_0_1_')][contains(@class,'yui3-svgSvgPieSlice')][@fill='#66007f']\"));\n WebElement GreenPart = driver.findElement(By.xpath(\"//*[contains(@id,'yui_3_13_0_1_')][contains(@class,'yui3-svgSvgPieSlice')][@fill='#295454']\"));\n WebElement GreyPart = driver.findElement(By.xpath(\"//*[contains(@id,'yui_3_13_0_1_')][contains(@class,'yui3-svgSvgPieSlice')][@fill='#e8cdb7']\"));\n WebElement LightViolettePart = driver.findElement(By.xpath(\"//*[contains(@id,'yui_3_13_0_1_')][contains(@class,'yui3-svgSvgPieSlice')][@fill='#996ab2']\"));\n WebElement BrownPart = driver.findElement(By.xpath(\"//*[contains(@id,'yui_3_13_0_1_')][contains(@class,'yui3-svgSvgPieSlice')][@fill='#a86f41']\"));\n\n **//TOOLTIP OVER PIE CHART**\n\n WebElement ToolTip = driver.findElement(By.xpath(\"//div[contains(@id,'_tooltip')]\"));\n\n **//CLICK EACH SECTION OF PIE CHART AND GET THE TEXT OVER IT**\n\n ViolettePart.click();\n System.out.println(\"Violette Part:\"+ToolTip.getText());\n GreyPart.click();\n System.out.println(\"Grey Part:\"+ToolTip.getText());\n LightViolettePart.click();\n System.out.println(\"Light Violete Part:\"+ToolTip.getText());\n GreenPart.click();\n System.out.println(\"Green Part:\"+ToolTip.getText());\n BrownPart.click();\n System.out.println(\"Brown Part:\"+ToolTip.getText());\n } }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3459421,"reputation":15080,"user_id":2897008,"accept_rate":73,"display_name":"vins"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1538217810,"creation_date":1501906528,"answer_id":45518133,"question_id":23128743,"body_markdown":"Unless you are ok with just verifying metadata about the chart (captions, some JSON properties, etc) you will have to use image comparison. You define a baseline image that represents what the result should like like and your test compares against the reference.\r\n\r\nSince it is not trivial to reliably test images you can use a library such as [Ocular][1]. \r\n\r\n  [1]: https://github.com/vinsguru/ocular","title":"How to automate graphs using Selenium, Java","body":"<p>Unless you are ok with just verifying metadata about the chart (captions, some JSON properties, etc) you will have to use image comparison. You define a baseline image that represents what the result should like like and your test compares against the reference.</p>\n\n<p>Since it is not trivial to reliably test images you can use a library such as <a href=\"https://github.com/vinsguru/ocular\" rel=\"nofollow noreferrer\">Ocular</a>. </p>\n"},{"tags":[],"owner":{"account_id":5454772,"reputation":514,"user_id":4338553,"accept_rate":57,"display_name":"Suhail Ahmed"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1616489644,"creation_date":1616489644,"answer_id":66759931,"question_id":23128743,"body_markdown":"If it is a bar graph then you can identify all bars and the labels using &quot;findElements&quot;, then you can iterate among the labels, get the label text if the text matches with the input that you have given then using Actions class move on that bar, then you can validate the data on the tooltip.\r\n\r\nTo get any xpath from the graph, you can use the * in you xpath in place of tagname for example\r\n\r\n//*[@class=&#39;ABC&#39;]\r\n\r\n\r\nyou can follow the same process for pie chart but it is going to have few modifications","title":"How to automate graphs using Selenium, Java","body":"<p>If it is a bar graph then you can identify all bars and the labels using &quot;findElements&quot;, then you can iterate among the labels, get the label text if the text matches with the input that you have given then using Actions class move on that bar, then you can validate the data on the tooltip.</p>\n<p>To get any xpath from the graph, you can use the * in you xpath in place of tagname for example</p>\n<p>//*[@class='ABC']</p>\n<p>you can follow the same process for pie chart but it is going to have few modifications</p>\n"}],"owner":{"account_id":4237906,"reputation":155,"user_id":3468587,"accept_rate":71,"display_name":"Kazman"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":20983,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":4,"score":0,"last_activity_date":1692288220,"creation_date":1397725038,"question_id":23128743,"body_markdown":"I inject data into a web application and it generates a graph and a pie chart. I&#39;d like to test the result on the graph is coherent with the given data through Selenium. Any ideas? Thanks, Best regards !!!","title":"How to automate graphs using Selenium, Java","body":"<p>I inject data into a web application and it generates a graph and a pie chart. I'd like to test the result on the graph is coherent with the given data through Selenium. Any ideas? Thanks, Best regards !!!</p>\n"},{"tags":["java"],"owner":{"account_id":12928550,"reputation":51,"user_id":9348329,"display_name":"David Yuan"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":42,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1692288158,"creation_date":1692288158,"question_id":76923231,"body_markdown":"We are using Spring Security (with **@EnableMethodSecurity**) for **@PreAuthorize()** in our microservice in SpringBoot 3 and JVM 17. We also have unit tests to cover the controllers using **@WebMvctest**.\r\n\r\nWhen running the test code, it complains the **@Value** cannot be evaluated:\r\n\r\n*Caused by: org.springframework.beans.TypeMismatchException: Failed to convert value of type &#39;java.lang.String&#39; to required type &#39;boolean&#39;; Invalid boolean value [${myFeature.active:true}]*\r\n\r\nHowever, if I remove @EnableMethodSecurity in the config file, the test code runs fine.\r\n\r\nHere is the config\r\n```\r\n@Configuration(enforceUniqueMethods = false)\r\n@EnableWebSecurity\r\n@EnableMethodSecurity\r\npublic class config {\r\n\r\n}\r\n```\r\n\r\nHere is the unit test:\r\n```\r\n@WebMvcTest(controllers = DocApiController.class)\r\nclass DocApiControllerTest {\r\n\t@Autowired\r\n    protected MockMvc mockMvc;\r\n    @MockBean\r\n    private DocService service;\r\n\r\n    @Test\r\n    void test_getDocuments_success() throws Exception {\r\n        Result response = new Result();\r\n        when(service.search(any())).thenReturn(response);\r\n        mockMvc.perform(get(&quot;/document/get?pageSize=10&amp;pageNumber=1&quot;))\r\n        \t\t.andExpect(status().isOk());\r\n    }\r\n}\r\n```","title":"@EnableMethodSecurity caused @Value evaluation failure in @WebMvcTest using SprigBoot 3","body":"<p>We are using Spring Security (with <strong>@EnableMethodSecurity</strong>) for <strong>@PreAuthorize()</strong> in our microservice in SpringBoot 3 and JVM 17. We also have unit tests to cover the controllers using <strong>@WebMvctest</strong>.</p>\n<p>When running the test code, it complains the <strong>@Value</strong> cannot be evaluated:</p>\n<p><em>Caused by: org.springframework.beans.TypeMismatchException: Failed to convert value of type 'java.lang.String' to required type 'boolean'; Invalid boolean value [${myFeature.active:true}]</em></p>\n<p>However, if I remove @EnableMethodSecurity in the config file, the test code runs fine.</p>\n<p>Here is the config</p>\n<pre><code>@Configuration(enforceUniqueMethods = false)\n@EnableWebSecurity\n@EnableMethodSecurity\npublic class config {\n\n}\n</code></pre>\n<p>Here is the unit test:</p>\n<pre><code>@WebMvcTest(controllers = DocApiController.class)\nclass DocApiControllerTest {\n    @Autowired\n    protected MockMvc mockMvc;\n    @MockBean\n    private DocService service;\n\n    @Test\n    void test_getDocuments_success() throws Exception {\n        Result response = new Result();\n        when(service.search(any())).thenReturn(response);\n        mockMvc.perform(get(&quot;/document/get?pageSize=10&amp;pageNumber=1&quot;))\n                .andExpect(status().isOk());\n    }\n}\n</code></pre>\n"},{"tags":["java","spring-batch","footer","compositeitemwriter"],"comments":[{"owner":{"account_id":6482932,"reputation":29552,"user_id":5019386,"display_name":"Mahmoud Ben Hassine"},"score":0,"creation_date":1621441887,"post_id":67604628,"comment_id":119498884,"body_markdown":"The problem is that you are calling `FlatFileItemWriter.open` yourself (which is incorrect) but not `.close()` where the footer callback is called. You should not be calling those methods yourself. You need to declare the delegate writers as beans and register them as streams in your step. See the duplicate question for a complete example.","body":"The problem is that you are calling <code>FlatFileItemWriter.open</code> yourself (which is incorrect) but not <code>.close()</code> where the footer callback is called. You should not be calling those methods yourself. You need to declare the delegate writers as beans and register them as streams in your step. See the duplicate question for a complete example."},{"owner":{"account_id":6482932,"reputation":29552,"user_id":5019386,"display_name":"Mahmoud Ben Hassine"},"score":0,"creation_date":1621441893,"post_id":67604628,"comment_id":119498888,"body_markdown":"Does this answer your question? [creating logic inside Spring Batch using Tasklet or inside CompositeItemWriter?](https://stackoverflow.com/questions/53377660/creating-logic-inside-spring-batch-using-tasklet-or-inside-compositeitemwriter)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/53377660/creating-logic-inside-spring-batch-using-tasklet-or-inside-compositeitemwriter\">creating logic inside Spring Batch using Tasklet or inside CompositeItemWriter?</a>"},{"owner":{"account_id":18663603,"reputation":15,"user_id":13604183,"display_name":"RKP2019"},"score":0,"creation_date":1621443081,"post_id":67604628,"comment_id":119499461,"body_markdown":"@MahmoudBenHassine Thank you. In my case, i don&#39;t have fixed number writers (foo &amp; boo in your case) and they will be dynamic and need to create at RUN time. Any suggestions on how to do it and register them to step?","body":"@MahmoudBenHassine Thank you. In my case, i don&#39;t have fixed number writers (foo &amp; boo in your case) and they will be dynamic and need to create at RUN time. Any suggestions on how to do it and register them to step?"},{"owner":{"account_id":6482932,"reputation":29552,"user_id":5019386,"display_name":"Mahmoud Ben Hassine"},"score":0,"creation_date":1621504269,"post_id":67604628,"comment_id":119518037,"body_markdown":"In that case, you need to pre-calculate the possible distinct values (1, 2 and 4 in your case) with a query like `select distinct(id) from table` for instance or a similar mechanism and dynamically create `ItemWriter` beans and register them as streams in your step.","body":"In that case, you need to pre-calculate the possible distinct values (1, 2 and 4 in your case) with a query like <code>select distinct(id) from table</code> for instance or a similar mechanism and dynamically create <code>ItemWriter</code> beans and register them as streams in your step."},{"owner":{"account_id":6482932,"reputation":29552,"user_id":5019386,"display_name":"Mahmoud Ben Hassine"},"score":0,"creation_date":1621593638,"post_id":67604628,"comment_id":119548608,"body_markdown":"I added an answer with a complete example that shows the approach I mentioned.","body":"I added an answer with a complete example that shows the approach I mentioned."}],"answers":[{"tags":[],"owner":{"account_id":6482932,"reputation":29552,"user_id":5019386,"display_name":"Mahmoud Ben Hassine"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1621593606,"creation_date":1621593606,"answer_id":67635289,"question_id":67604628,"body_markdown":"&gt; In my case, i don&#39;t have fixed number writers (foo &amp; boo in your case) and they will be dynamic and need to create at RUN time. Any suggestions on how to do it and register them to step?\r\n\r\nIn that case, you need to:\r\n\r\n1. pre-calculate the possible distinct values (1, 2 and 4 in your case) with a query like `select distinct(id) from table` for example or a similar mechanism depending on you input data\r\n2. dynamically create `ItemWriter` beans and register them as streams in your step. \r\n\r\nThe following is an example based on your use case: given a list of students in different groups, the idea is to write them in different files based on their group. Here is a tasklet that pre-calculates the distinct groups and creates/registers item writers dynamically in the application context:\r\n\r\n```\r\nimport java.io.IOException;\r\nimport java.io.Writer;\r\nimport java.util.List;\r\n\r\nimport org.springframework.batch.core.StepContribution;\r\nimport org.springframework.batch.core.scope.context.ChunkContext;\r\nimport org.springframework.batch.core.step.tasklet.Tasklet;\r\nimport org.springframework.batch.item.file.FlatFileFooterCallback;\r\nimport org.springframework.batch.item.file.FlatFileHeaderCallback;\r\nimport org.springframework.batch.item.file.FlatFileItemWriter;\r\nimport org.springframework.batch.item.file.transform.PassThroughLineAggregator;\r\nimport org.springframework.batch.repeat.RepeatStatus;\r\nimport org.springframework.beans.MutablePropertyValues;\r\nimport org.springframework.beans.factory.config.ConfigurableListableBeanFactory;\r\nimport org.springframework.beans.factory.support.BeanDefinitionRegistry;\r\nimport org.springframework.beans.factory.support.GenericBeanDefinition;\r\nimport org.springframework.context.ConfigurableApplicationContext;\r\nimport org.springframework.core.io.FileSystemResource;\r\nimport org.springframework.jdbc.core.JdbcTemplate;\r\n\r\nclass DynamicWritersConfigurationTasklet implements Tasklet {\r\n\r\n    private JdbcTemplate jdbcTemplate;\r\n    private ConfigurableApplicationContext applicationContext;\r\n\r\n    public DynamicWritersConfigurationTasklet(JdbcTemplate jdbcTemplate, ConfigurableApplicationContext applicationContext) {\r\n        this.jdbcTemplate = jdbcTemplate;\r\n        this.applicationContext = applicationContext;\r\n    }\r\n\r\n    @Override\r\n    public RepeatStatus execute(StepContribution contribution, ChunkContext chunkContext) {\r\n        ConfigurableListableBeanFactory beanFactory = applicationContext.getBeanFactory();\r\n        BeanDefinitionRegistry registry = (BeanDefinitionRegistry) beanFactory;\r\n\r\n        String sql = &quot;select distinct(groupId) from student&quot;;\r\n        List&lt;Integer&gt; groups = jdbcTemplate.queryForList(sql, Integer.class);\r\n        for (Integer group : groups) {\r\n            String name = &quot;group&quot; + group + &quot;Writer&quot;;\r\n            GenericBeanDefinition beanDefinition = new GenericBeanDefinition();\r\n            beanDefinition.setBeanClassName(FlatFileItemWriter.class.getName());\r\n            MutablePropertyValues propertyValues = new MutablePropertyValues();\r\n            propertyValues.addPropertyValue(&quot;name&quot;, name);\r\n            propertyValues.addPropertyValue(&quot;lineAggregator&quot;, new PassThroughLineAggregator&lt;&gt;());\r\n            propertyValues.addPropertyValue(&quot;resource&quot;, new FileSystemResource(group + &quot;.txt&quot;));\r\n            propertyValues.addPropertyValue(&quot;headerCallback&quot;, (FlatFileHeaderCallback) writer -&gt; writer.write(&quot;header&quot;));\r\n            propertyValues.addPropertyValue(&quot;footerCallback&quot;, (FlatFileFooterCallback) writer -&gt; writer.write(&quot;footer&quot;));\r\n            beanDefinition.setPropertyValues(propertyValues);\r\n            registry.registerBeanDefinition(name, beanDefinition);\r\n        }\r\n        return RepeatStatus.FINISHED;\r\n    }\r\n\r\n}\r\n```\r\n\r\nOnce that in place, a second step loads those item writers from the application context **at runtime** and registers them as delegates in a `ClassifierCompositeItemWriter`:\r\n\r\n```\r\n@Bean\r\n@StepScope\r\npublic ClassifierCompositeItemWriter&lt;Student&gt; itemWriter(ConfigurableApplicationContext applicationContext) {\r\n    // dynamically get writers from the application context and register them as delegates in the composite\r\n    Map&lt;String, FlatFileItemWriter&gt; beansOfType = applicationContext.getBeansOfType(FlatFileItemWriter.class);\r\n    // Classify students by group\r\n    Classifier&lt;Student, FlatFileItemWriter&lt;Student&gt;&gt; classifier = student -&gt; beansOfType.get(&quot;group&quot; + student.getGroupId() + &quot;Writer&quot;);\r\n    return new ClassifierCompositeItemWriterBuilder()\r\n            .classifier(classifier)\r\n            .build();\r\n}\r\n\r\n@Bean\r\n@JobScope\r\npublic Step step2(StepBuilderFactory stepBuilderFactory, ConfigurableApplicationContext applicationContext, DataSource dataSource) {\r\n    SimpleStepBuilder&lt;Student, Student&gt; step2 = stepBuilderFactory.get(&quot;readWriteStudents&quot;)\r\n            .&lt;Student, Student&gt;chunk(2)\r\n            .reader(itemReader(dataSource))\r\n            .writer(itemWriter(applicationContext));\r\n\r\n    // register writers as streams in the step so that open/update/close are called correctly\r\n    Map&lt;String, FlatFileItemWriter&gt; beansOfType = applicationContext.getBeansOfType(FlatFileItemWriter.class);\r\n    for (FlatFileItemWriter flatFileItemWriter : beansOfType.values()) {\r\n        step2.stream(flatFileItemWriter);\r\n    }\r\n\r\n    return step2.build();\r\n}\r\n```\r\n\r\nI have a complete example here: [sample app for SO67604628](https://github.com/benas/spring-batch-lab/tree/main/issues/so67604628). Please refer to [this guide](https://github.com/benas/spring-batch-lab#how-to-checkout-a-single-project-folder) to see how to checkout a single folder (if you don&#39;t want to clone the entire repo). The sample generates 3 files with students grouped by groupId. Note how headers/footers are correctly generated since delegate writers are registered as streams in the step.","title":"Spring batch : ClassifierCompositeItemWriter footer not getting called","body":"<blockquote>\n<p>In my case, i don't have fixed number writers (foo &amp; boo in your case) and they will be dynamic and need to create at RUN time. Any suggestions on how to do it and register them to step?</p>\n</blockquote>\n<p>In that case, you need to:</p>\n<ol>\n<li>pre-calculate the possible distinct values (1, 2 and 4 in your case) with a query like <code>select distinct(id) from table</code> for example or a similar mechanism depending on you input data</li>\n<li>dynamically create <code>ItemWriter</code> beans and register them as streams in your step.</li>\n</ol>\n<p>The following is an example based on your use case: given a list of students in different groups, the idea is to write them in different files based on their group. Here is a tasklet that pre-calculates the distinct groups and creates/registers item writers dynamically in the application context:</p>\n<pre><code>import java.io.IOException;\nimport java.io.Writer;\nimport java.util.List;\n\nimport org.springframework.batch.core.StepContribution;\nimport org.springframework.batch.core.scope.context.ChunkContext;\nimport org.springframework.batch.core.step.tasklet.Tasklet;\nimport org.springframework.batch.item.file.FlatFileFooterCallback;\nimport org.springframework.batch.item.file.FlatFileHeaderCallback;\nimport org.springframework.batch.item.file.FlatFileItemWriter;\nimport org.springframework.batch.item.file.transform.PassThroughLineAggregator;\nimport org.springframework.batch.repeat.RepeatStatus;\nimport org.springframework.beans.MutablePropertyValues;\nimport org.springframework.beans.factory.config.ConfigurableListableBeanFactory;\nimport org.springframework.beans.factory.support.BeanDefinitionRegistry;\nimport org.springframework.beans.factory.support.GenericBeanDefinition;\nimport org.springframework.context.ConfigurableApplicationContext;\nimport org.springframework.core.io.FileSystemResource;\nimport org.springframework.jdbc.core.JdbcTemplate;\n\nclass DynamicWritersConfigurationTasklet implements Tasklet {\n\n    private JdbcTemplate jdbcTemplate;\n    private ConfigurableApplicationContext applicationContext;\n\n    public DynamicWritersConfigurationTasklet(JdbcTemplate jdbcTemplate, ConfigurableApplicationContext applicationContext) {\n        this.jdbcTemplate = jdbcTemplate;\n        this.applicationContext = applicationContext;\n    }\n\n    @Override\n    public RepeatStatus execute(StepContribution contribution, ChunkContext chunkContext) {\n        ConfigurableListableBeanFactory beanFactory = applicationContext.getBeanFactory();\n        BeanDefinitionRegistry registry = (BeanDefinitionRegistry) beanFactory;\n\n        String sql = &quot;select distinct(groupId) from student&quot;;\n        List&lt;Integer&gt; groups = jdbcTemplate.queryForList(sql, Integer.class);\n        for (Integer group : groups) {\n            String name = &quot;group&quot; + group + &quot;Writer&quot;;\n            GenericBeanDefinition beanDefinition = new GenericBeanDefinition();\n            beanDefinition.setBeanClassName(FlatFileItemWriter.class.getName());\n            MutablePropertyValues propertyValues = new MutablePropertyValues();\n            propertyValues.addPropertyValue(&quot;name&quot;, name);\n            propertyValues.addPropertyValue(&quot;lineAggregator&quot;, new PassThroughLineAggregator&lt;&gt;());\n            propertyValues.addPropertyValue(&quot;resource&quot;, new FileSystemResource(group + &quot;.txt&quot;));\n            propertyValues.addPropertyValue(&quot;headerCallback&quot;, (FlatFileHeaderCallback) writer -&gt; writer.write(&quot;header&quot;));\n            propertyValues.addPropertyValue(&quot;footerCallback&quot;, (FlatFileFooterCallback) writer -&gt; writer.write(&quot;footer&quot;));\n            beanDefinition.setPropertyValues(propertyValues);\n            registry.registerBeanDefinition(name, beanDefinition);\n        }\n        return RepeatStatus.FINISHED;\n    }\n\n}\n</code></pre>\n<p>Once that in place, a second step loads those item writers from the application context <strong>at runtime</strong> and registers them as delegates in a <code>ClassifierCompositeItemWriter</code>:</p>\n<pre><code>@Bean\n@StepScope\npublic ClassifierCompositeItemWriter&lt;Student&gt; itemWriter(ConfigurableApplicationContext applicationContext) {\n    // dynamically get writers from the application context and register them as delegates in the composite\n    Map&lt;String, FlatFileItemWriter&gt; beansOfType = applicationContext.getBeansOfType(FlatFileItemWriter.class);\n    // Classify students by group\n    Classifier&lt;Student, FlatFileItemWriter&lt;Student&gt;&gt; classifier = student -&gt; beansOfType.get(&quot;group&quot; + student.getGroupId() + &quot;Writer&quot;);\n    return new ClassifierCompositeItemWriterBuilder()\n            .classifier(classifier)\n            .build();\n}\n\n@Bean\n@JobScope\npublic Step step2(StepBuilderFactory stepBuilderFactory, ConfigurableApplicationContext applicationContext, DataSource dataSource) {\n    SimpleStepBuilder&lt;Student, Student&gt; step2 = stepBuilderFactory.get(&quot;readWriteStudents&quot;)\n            .&lt;Student, Student&gt;chunk(2)\n            .reader(itemReader(dataSource))\n            .writer(itemWriter(applicationContext));\n\n    // register writers as streams in the step so that open/update/close are called correctly\n    Map&lt;String, FlatFileItemWriter&gt; beansOfType = applicationContext.getBeansOfType(FlatFileItemWriter.class);\n    for (FlatFileItemWriter flatFileItemWriter : beansOfType.values()) {\n        step2.stream(flatFileItemWriter);\n    }\n\n    return step2.build();\n}\n</code></pre>\n<p>I have a complete example here: <a href=\"https://github.com/benas/spring-batch-lab/tree/main/issues/so67604628\" rel=\"nofollow noreferrer\">sample app for SO67604628</a>. Please refer to <a href=\"https://github.com/benas/spring-batch-lab#how-to-checkout-a-single-project-folder\" rel=\"nofollow noreferrer\">this guide</a> to see how to checkout a single folder (if you don't want to clone the entire repo). The sample generates 3 files with students grouped by groupId. Note how headers/footers are correctly generated since delegate writers are registered as streams in the step.</p>\n"}],"owner":{"account_id":18663603,"reputation":15,"user_id":13604183,"display_name":"RKP2019"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1354,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":67635289,"answer_count":1,"score":1,"last_activity_date":1692287941,"creation_date":1621432363,"question_id":67604628,"body_markdown":"I am using Spring Batch to write multiple reports.\r\nRequirement is i will get records with BranchId and name. I need to create one file for each branchId and write respective data into that file along with some header and footer.\r\n\r\nExample:\r\n\r\n    Student A = new Student(&quot;A&quot;,1);\r\n        \tStudent B = new Student(&quot;B&quot;,2);\r\n        \tStudent C = new Student(&quot;C&quot;,1);\r\n        \tStudent D = new Student(&quot;D&quot;,4);\r\n\r\nIn this case it should create total 3 files \r\n   \r\n\r\n     file1--&gt;1.txt(with A,C)\r\n        file2--&gt;2.txt(with B)\r\n        file3--&gt;4.txt(with D))\r\n\r\n.\r\n\r\nI am using ClassifierCompositeItemWriter to create / reuse the FlatFileItemWriter based on data(id in this case) &amp; able to create the files successfully. \r\nFor header and footer - using callbacks at writer level.\r\nGenerated files are having only HEADER and DATA. But somehow FOOTER is not at all getting executed.\r\n\r\nLooks like some issues with **File closing before Footer or issue with usage of STEP SCOPE**.\r\n\r\nCan someone help me in getting the FOOTER called.\r\n\r\nhere is the code.\r\n\r\n```\r\n   \r\n\r\n     import java.util.Arrays;\r\n        import java.util.HashMap;\r\n        import java.util.Map;\r\n        \r\n        import org.springframework.batch.core.Job;\r\n        import org.springframework.batch.core.JobParameters;\r\n        import org.springframework.batch.core.configuration.annotation.EnableBatchProcessing;\r\n        import org.springframework.batch.core.configuration.annotation.JobBuilderFactory;\r\n        import org.springframework.batch.core.configuration.annotation.StepBuilderFactory;\r\n        import org.springframework.batch.core.configuration.annotation.StepScope;\r\n        import org.springframework.batch.core.launch.JobLauncher;\r\n        import org.springframework.batch.item.ExecutionContext;\r\n        import org.springframework.batch.item.ItemReader;\r\n        import org.springframework.batch.item.ItemWriter;\r\n        import org.springframework.batch.item.file.FlatFileItemWriter;\r\n        import org.springframework.batch.item.file.transform.BeanWrapperFieldExtractor;\r\n        import org.springframework.batch.item.file.transform.DelimitedLineAggregator;\r\n        import org.springframework.batch.item.support.ClassifierCompositeItemWriter;\r\n        import org.springframework.batch.item.support.ListItemReader;\r\n        import org.springframework.classify.Classifier;\r\n        import org.springframework.context.ApplicationContext;\r\n        import org.springframework.context.annotation.AnnotationConfigApplicationContext;\r\n        import org.springframework.context.annotation.Bean;\r\n        import org.springframework.context.annotation.Configuration;\r\n        import org.springframework.core.io.FileSystemResource;\r\n        \r\n        @Configuration\r\n        @EnableBatchProcessing\r\n        public class MyJob3 {\r\n        \r\n        \tpublic static void main(String[] args) throws Exception {\r\n        \t\tApplicationContext context = new AnnotationConfigApplicationContext(MyJob3.class);\r\n        \t\tJobLauncher jobLauncher = context.getBean(JobLauncher.class);\r\n        \t\tJob job = context.getBean(Job.class);\r\n        \t\tjobLauncher.run(job, new JobParameters());\r\n        \t}\r\n        \r\n        \t@Bean\r\n        \tpublic Job job(JobBuilderFactory jobs, StepBuilderFactory steps) {\r\n        \t\treturn jobs.get(&quot;job&quot;).start(steps.get(&quot;step&quot;).&lt;Student, Student&gt;chunk(5)\r\n        \t\t\t\t.reader(itemReader())\r\n        \t\t\t\t.writer(getStudentItemWriter(itemWriterClassifier()))\r\n        \t\t\t\t.build())\r\n        \t\t\t\t.build();\r\n        \t}\r\n        \r\n        \t@Bean\r\n        \t@StepScope\r\n        \tpublic ItemReader&lt;Student&gt; itemReader() {\r\n        \t\tStudent A = new Student(&quot;A&quot;, 1);\r\n        \t\tStudent B = new Student(&quot;B&quot;, 2);\r\n        \t\tStudent C = new Student(&quot;C&quot;, 1);\r\n        \t\tStudent D = new Student(&quot;D&quot;, 4);\r\n        \t\tStudent E = new Student(&quot;E&quot;, 4); \r\n        \r\n        \t\treturn new ListItemReader&lt;&gt;(Arrays.asList(A,B,C,D,E));\r\n        \t}\r\n        \r\n        \tMap&lt;Integer, FlatFileItemWriter&lt;Student&gt;&gt; map = new HashMap&lt;&gt;();\r\n        \r\n        \t@Bean\r\n        \t@StepScope\r\n        \tpublic ClassifierCompositeItemWriter&lt;Student&gt; getStudentItemWriter(Classifier&lt;Student, ItemWriter&lt;? super Student&gt;&gt; classifier) {\r\n        \t\tClassifierCompositeItemWriter&lt;Student&gt; compositeItemWriter = new ClassifierCompositeItemWriter&lt;&gt;();\r\n        \t\tcompositeItemWriter.setClassifier(classifier);\r\n        \t\treturn compositeItemWriter;\r\n        \t}\r\n        \r\n        \t@Bean\r\n        \t@StepScope\r\n        \tpublic Classifier&lt;Student, ItemWriter&lt;? super Student&gt;&gt; itemWriterClassifier() {\r\n        \t\treturn student -&gt; {\r\n        \r\n        \t\t\tSystem.out.println(&quot;Branch Id ::&quot; + student.getBranchId() + &quot; and Student Name&quot; + student.getName());\r\n        \t\t\tif (map.containsKey(student.getBranchId())) {\r\n        \t\t\t\tFlatFileItemWriter&lt;Student&gt; result = map.get(student.getBranchId());\r\n        \t\t\t\tSystem.out.println(&quot;Exising Writer object ::&quot; + result);\r\n        \t\t\t\treturn result;\r\n        \t\t\t}\r\n        \t\t\t\r\n        \t\t\tString fileName =&quot;Branch_Info_&quot; + student.getBranchId() + &quot;.txt&quot;;\r\n        \t\t\tBeanWrapperFieldExtractor&lt;Student&gt; fieldExtractor = new BeanWrapperFieldExtractor&lt;&gt;();\r\n        \t\t\tfieldExtractor.setNames(new String[] { &quot;branchId&quot;, &quot;name&quot; });\r\n        \t\t\tDelimitedLineAggregator&lt;Student&gt; lineAggregator = new DelimitedLineAggregator&lt;&gt;();\r\n        \t\t\tlineAggregator.setFieldExtractor(fieldExtractor);\r\n        \r\n        \t\t\tFlatFileItemWriter&lt;Student&gt; flatFileItemWriter = new FlatFileItemWriter&lt;&gt;();\r\n        \t\t\tflatFileItemWriter.setResource(new FileSystemResource(fileName));\r\n        \t\t\tflatFileItemWriter.setAppendAllowed(true);\r\n        \t\t\tflatFileItemWriter.setLineAggregator(lineAggregator);\r\n        \t\t\tSystem.out.println(&quot;Writing header...&quot;);\r\n        \t\t\tflatFileItemWriter.setHeaderCallback(writer -&gt; writer.write(&quot;Header&quot;));\r\n        \t\t\tSystem.out.println(&quot;Writing Footer...&quot;);\r\n        \t\t\tflatFileItemWriter.setFooterCallback(writer -&gt; writer.write(&quot;Footer&quot;));\r\n        \t\t\tSystem.out.println(&quot;Writing done...&quot;);\r\n        \t\t\tflatFileItemWriter.open(new ExecutionContext());\r\n        \r\n        \t\t\tmap.put(student.getBranchId(), flatFileItemWriter);\r\n        \r\n        \t\t\tSystem.out.println(&quot;New Writer object ::&quot; + flatFileItemWriter);\r\n        \t\t\treturn flatFileItemWriter;\r\n        \t\t};\r\n        \t}\r\n        }\r\n\r\n","title":"Spring batch : ClassifierCompositeItemWriter footer not getting called","body":"<p>I am using Spring Batch to write multiple reports.\nRequirement is i will get records with BranchId and name. I need to create one file for each branchId and write respective data into that file along with some header and footer.</p>\n<p>Example:</p>\n<pre><code>Student A = new Student(&quot;A&quot;,1);\n        Student B = new Student(&quot;B&quot;,2);\n        Student C = new Student(&quot;C&quot;,1);\n        Student D = new Student(&quot;D&quot;,4);\n</code></pre>\n<p>In this case it should create total 3 files</p>\n<pre><code> file1--&gt;1.txt(with A,C)\n    file2--&gt;2.txt(with B)\n    file3--&gt;4.txt(with D))\n</code></pre>\n<p>.</p>\n<p>I am using ClassifierCompositeItemWriter to create / reuse the FlatFileItemWriter based on data(id in this case) &amp; able to create the files successfully.\nFor header and footer - using callbacks at writer level.\nGenerated files are having only HEADER and DATA. But somehow FOOTER is not at all getting executed.</p>\n<p>Looks like some issues with <strong>File closing before Footer or issue with usage of STEP SCOPE</strong>.</p>\n<p>Can someone help me in getting the FOOTER called.</p>\n<p>here is the code.</p>\n<pre><code>   \n\n     import java.util.Arrays;\n        import java.util.HashMap;\n        import java.util.Map;\n        \n        import org.springframework.batch.core.Job;\n        import org.springframework.batch.core.JobParameters;\n        import org.springframework.batch.core.configuration.annotation.EnableBatchProcessing;\n        import org.springframework.batch.core.configuration.annotation.JobBuilderFactory;\n        import org.springframework.batch.core.configuration.annotation.StepBuilderFactory;\n        import org.springframework.batch.core.configuration.annotation.StepScope;\n        import org.springframework.batch.core.launch.JobLauncher;\n        import org.springframework.batch.item.ExecutionContext;\n        import org.springframework.batch.item.ItemReader;\n        import org.springframework.batch.item.ItemWriter;\n        import org.springframework.batch.item.file.FlatFileItemWriter;\n        import org.springframework.batch.item.file.transform.BeanWrapperFieldExtractor;\n        import org.springframework.batch.item.file.transform.DelimitedLineAggregator;\n        import org.springframework.batch.item.support.ClassifierCompositeItemWriter;\n        import org.springframework.batch.item.support.ListItemReader;\n        import org.springframework.classify.Classifier;\n        import org.springframework.context.ApplicationContext;\n        import org.springframework.context.annotation.AnnotationConfigApplicationContext;\n        import org.springframework.context.annotation.Bean;\n        import org.springframework.context.annotation.Configuration;\n        import org.springframework.core.io.FileSystemResource;\n        \n        @Configuration\n        @EnableBatchProcessing\n        public class MyJob3 {\n        \n            public static void main(String[] args) throws Exception {\n                ApplicationContext context = new AnnotationConfigApplicationContext(MyJob3.class);\n                JobLauncher jobLauncher = context.getBean(JobLauncher.class);\n                Job job = context.getBean(Job.class);\n                jobLauncher.run(job, new JobParameters());\n            }\n        \n            @Bean\n            public Job job(JobBuilderFactory jobs, StepBuilderFactory steps) {\n                return jobs.get(&quot;job&quot;).start(steps.get(&quot;step&quot;).&lt;Student, Student&gt;chunk(5)\n                        .reader(itemReader())\n                        .writer(getStudentItemWriter(itemWriterClassifier()))\n                        .build())\n                        .build();\n            }\n        \n            @Bean\n            @StepScope\n            public ItemReader&lt;Student&gt; itemReader() {\n                Student A = new Student(&quot;A&quot;, 1);\n                Student B = new Student(&quot;B&quot;, 2);\n                Student C = new Student(&quot;C&quot;, 1);\n                Student D = new Student(&quot;D&quot;, 4);\n                Student E = new Student(&quot;E&quot;, 4); \n        \n                return new ListItemReader&lt;&gt;(Arrays.asList(A,B,C,D,E));\n            }\n        \n            Map&lt;Integer, FlatFileItemWriter&lt;Student&gt;&gt; map = new HashMap&lt;&gt;();\n        \n            @Bean\n            @StepScope\n            public ClassifierCompositeItemWriter&lt;Student&gt; getStudentItemWriter(Classifier&lt;Student, ItemWriter&lt;? super Student&gt;&gt; classifier) {\n                ClassifierCompositeItemWriter&lt;Student&gt; compositeItemWriter = new ClassifierCompositeItemWriter&lt;&gt;();\n                compositeItemWriter.setClassifier(classifier);\n                return compositeItemWriter;\n            }\n        \n            @Bean\n            @StepScope\n            public Classifier&lt;Student, ItemWriter&lt;? super Student&gt;&gt; itemWriterClassifier() {\n                return student -&gt; {\n        \n                    System.out.println(&quot;Branch Id ::&quot; + student.getBranchId() + &quot; and Student Name&quot; + student.getName());\n                    if (map.containsKey(student.getBranchId())) {\n                        FlatFileItemWriter&lt;Student&gt; result = map.get(student.getBranchId());\n                        System.out.println(&quot;Exising Writer object ::&quot; + result);\n                        return result;\n                    }\n                    \n                    String fileName =&quot;Branch_Info_&quot; + student.getBranchId() + &quot;.txt&quot;;\n                    BeanWrapperFieldExtractor&lt;Student&gt; fieldExtractor = new BeanWrapperFieldExtractor&lt;&gt;();\n                    fieldExtractor.setNames(new String[] { &quot;branchId&quot;, &quot;name&quot; });\n                    DelimitedLineAggregator&lt;Student&gt; lineAggregator = new DelimitedLineAggregator&lt;&gt;();\n                    lineAggregator.setFieldExtractor(fieldExtractor);\n        \n                    FlatFileItemWriter&lt;Student&gt; flatFileItemWriter = new FlatFileItemWriter&lt;&gt;();\n                    flatFileItemWriter.setResource(new FileSystemResource(fileName));\n                    flatFileItemWriter.setAppendAllowed(true);\n                    flatFileItemWriter.setLineAggregator(lineAggregator);\n                    System.out.println(&quot;Writing header...&quot;);\n                    flatFileItemWriter.setHeaderCallback(writer -&gt; writer.write(&quot;Header&quot;));\n                    System.out.println(&quot;Writing Footer...&quot;);\n                    flatFileItemWriter.setFooterCallback(writer -&gt; writer.write(&quot;Footer&quot;));\n                    System.out.println(&quot;Writing done...&quot;);\n                    flatFileItemWriter.open(new ExecutionContext());\n        \n                    map.put(student.getBranchId(), flatFileItemWriter);\n        \n                    System.out.println(&quot;New Writer object ::&quot; + flatFileItemWriter);\n                    return flatFileItemWriter;\n                };\n            }\n        }\n\n</code></pre>\n"},{"tags":["java","screen-scraping","mainframe"],"comments":[{"owner":{"account_id":22086,"reputation":14236,"user_id":54200,"accept_rate":83,"display_name":"KevinDTimm"},"score":0,"creation_date":1291751529,"post_id":4380891,"comment_id":4772146,"body_markdown":"In the righthand column, the following link seems to answer your question : http://stackoverflow.com/questions/1302484/screen-scraping-a-mainframe-screen-in-c-without-3rd-party-utilities","body":"In the righthand column, the following link seems to answer your question : <a href=\"http://stackoverflow.com/questions/1302484/screen-scraping-a-mainframe-screen-in-c-without-3rd-party-utilities\" title=\"screen scraping a mainframe screen in c without 3rd party utilities\">stackoverflow.com/questions/1302484/&hellip;</a>"}],"answers":[{"tags":[],"owner":{"account_id":98609,"reputation":555,"user_id":266808,"accept_rate":88,"display_name":"Magwich"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1291751905,"creation_date":1291751905,"answer_id":4380997,"question_id":4380891,"body_markdown":"I believe you will need to make a macro or module with Visual Basic for Attachemate&#39;s Reflecitons product.  Have your VB macro save the data somewhere and then your Java program can read it.","title":"Screen scraping a mainframe screen in java?","body":"<p>I believe you will need to make a macro or module with Visual Basic for Attachemate's Reflecitons product.  Have your VB macro save the data somewhere and then your Java program can read it.</p>\n"},{"tags":[],"owner":{"account_id":138967,"reputation":4238,"user_id":344249,"accept_rate":71,"display_name":"Joe Zitzelberger"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1303588683,"creation_date":1303588683,"answer_id":5766546,"question_id":4380891,"body_markdown":"IBM used to offer a package that would allow TN3270 connections from straight Java.  I can&#39;t remember the name of the package, but if you can find that, you wouldn&#39;t need Attachmate at all.","title":"Screen scraping a mainframe screen in java?","body":"<p>IBM used to offer a package that would allow TN3270 connections from straight Java.  I can't remember the name of the package, but if you can find that, you wouldn't need Attachmate at all.</p>\n"}],"owner":{"account_id":253600,"reputation":6060,"user_id":532434,"accept_rate":100,"display_name":"Ritesh Mengji"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2935,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"closed_date":1692321228,"accepted_answer_id":5766546,"answer_count":2,"score":2,"last_activity_date":1692287250,"creation_date":1291751101,"question_id":4380891,"body_markdown":"I am new to programming world, and in my project I need to screen scrape a mainframe screen using attachmate? Can anyone tell me what exactly screen scraping is and how does it work?\r\n\r\nThanks in advance. ","title":"Screen scraping a mainframe screen in java?","body":"<p>I am new to programming world, and in my project I need to screen scrape a mainframe screen using attachmate? Can anyone tell me what exactly screen scraping is and how does it work?</p>\n\n<p>Thanks in advance. </p>\n"},{"tags":["java","spring-boot"],"comments":[{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1692289362,"post_id":76923094,"comment_id":135606209,"body_markdown":"Well - *C:\\Users\\user\\.mailcap* **Is** that file present?","body":"Well - <i>C:\\Users\\user\\.mailcap</i> <b>Is</b> that file present?"}],"owner":{"account_id":23002260,"reputation":21,"user_id":17126066,"display_name":"Lubom&#237;r R&#253;gl"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":183,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1692287005,"creation_date":1692287005,"question_id":76923094,"body_markdown":"I have an application that is sending emails trough gmail. I have credentials setup and everything works fine on one machine, but throws java.io.FileNotFoundException: C:\\Users\\User\\.mailcap (System cannot find the file) on a different machine. The code is exactly the same\r\n\r\n```java\r\n@Service\r\n@RequiredArgsConstructor\r\npublic class EmailServiceUtils {\r\n\r\n    private final JavaMailSender mailSender;\r\n    private final TemplateEngine templateEngine;\r\n\r\n    //TODO change method to accept other variables as a hashmap\r\n\r\n    public void sendEmail(String to, String subject, Map&lt;String, String&gt; templateVariables, String templateFilePath) throws MessagingException, IOException {\r\n        MimeMessage message = mailSender.createMimeMessage();\r\n        MimeMessageHelper helper = new MimeMessageHelper(message, true, &quot;utf-8&quot;);\r\n        helper.setTo(to);\r\n        helper.setSubject(subject);\r\n\r\n        // Load and process the HTML template\r\n        String htmlContent = loadAndProcessTemplate(templateVariables, templateFilePath);\r\n        helper.setText(htmlContent, true);\r\n        mailSender.send(message);\r\n    }\r\n\r\n    private String loadAndProcessTemplate(Map&lt;String, String&gt; templateVariables, String templateFilePath) {\r\n        Context context = new Context();\r\n\r\n        //Step through all items in templateVariables map and set them as variable for thymeleaf template\r\n        for (Map.Entry&lt;String, String&gt; entry : templateVariables.entrySet()) {\r\n            context.setVariable(entry.getKey(), entry.getValue());\r\n        }\r\n\r\n        // Process the template with variables\r\n        return templateEngine.process(templateFilePath, context);\r\n    }\r\n\r\n}\r\n```\r\n\r\nThe error in question\r\n\r\n```\r\n2023-08-17T17:37:40.365+02:00 DEBUG 10472 --- [nio-8080-exec-2] com.sun.mail.smtp                        : Using mechanism LOGIN\r\n2023-08-17T17:37:40.636+02:00 DEBUG 10472 --- [nio-8080-exec-2] jakarta.activation                       : MailcapCommandMap: load HOME\r\n2023-08-17T17:37:40.637+02:00 DEBUG 10472 --- [nio-8080-exec-2] jakarta.activation                       : Checking system property jakarta.activation.spi.MailcapRegistryProvider\r\n2023-08-17T17:37:40.637+02:00 DEBUG 10472 --- [nio-8080-exec-2] jakarta.activation                       :   not found\r\n2023-08-17T17:37:40.637+02:00 DEBUG 10472 --- [nio-8080-exec-2] jakarta.activation                       : Using java.util.ServiceLoader to find jakarta.activation.spi.MailcapRegistryProvider\r\n2023-08-17T17:37:40.638+02:00 DEBUG 10472 --- [nio-8080-exec-2] jakarta.activation                       : ServiceProvider loading Facility used; returning object [org.eclipse.angus.activation.MailcapRegistryProviderImpl]\r\n2023-08-17T17:37:40.639+02:00 DEBUG 10472 --- [nio-8080-exec-2] angus.activation                         : new MailcapFile: file C:\\Users\\user\\.mailcap\r\n2023-08-17T17:37:40.639+02:00 DEBUG 10472 --- [nio-8080-exec-2] jakarta.activation                       : MailcapRegistry: can&#39;t load from file - C:\\Users\\user\\.mailcap\r\n\r\njava.io.FileNotFoundException: C:\\Users\\user\\.mailcap (Syst&#233;m nemůže nal&#233;zt uveden&#253; soubor)\r\n\tat java.base/java.io.FileInputStream.open0(Native Method) ~[na:na]\r\n\tat java.base/java.io.FileInputStream.open(FileInputStream.java:216) ~[na:na]\r\n\tat java.base/java.io.FileInputStream.&lt;init&gt;(FileInputStream.java:157) ~[na:na]\r\n\tat java.base/java.io.FileInputStream.&lt;init&gt;(FileInputStream.java:111) ~[na:na]\r\n\tat java.base/java.io.FileReader.&lt;init&gt;(FileReader.java:60) ~[na:na]\r\n\tat org.eclipse.angus.activation.MailcapFile.&lt;init&gt;(MailcapFile.java:71) ~[angus-activation-2.0.1.jar:na]\r\n\tat org.eclipse.angus.activation.MailcapRegistryProviderImpl.getByFileName(MailcapRegistryProviderImpl.java:29) ~[angus-activation-2.0.1.jar:na]\r\n\tat jakarta.activation.MailcapCommandMap.loadFile(MailcapCommandMap.java:284) ~[jakarta.activation-api-2.1.2.jar:na]\r\n\tat jakarta.activation.MailcapCommandMap.&lt;init&gt;(MailcapCommandMap.java:154) ~[jakarta.activation-api-2.1.2.jar:na]\r\n\tat jakarta.activation.CommandMap.getDefaultCommandMap(CommandMap.java:60) ~[jakarta.activation-api-2.1.2.jar:na]\r\n\tat jakarta.activation.DataHandler.getCommandMap(DataHandler.java:128) ~[jakarta.activation-api-2.1.2.jar:na]\r\n\tat jakarta.activation.DataHandler.getDataContentHandler(DataHandler.java:590) ~[jakarta.activation-api-2.1.2.jar:na]\r\n\tat jakarta.activation.DataHandler.writeTo(DataHandler.java:290) ~[jakarta.activation-api-2.1.2.jar:na]\r\n\tat jakarta.mail.internet.MimeUtility.getEncoding(MimeUtility.java:316) ~[jakarta.mail-1.1.0.jar:na]\r\n\tat jakarta.mail.internet.MimeBodyPart.updateHeaders(MimeBodyPart.java:1580) ~[jakarta.mail-1.1.0.jar:na]\r\n\tat jakarta.mail.internet.MimeBodyPart.updateHeaders(MimeBodyPart.java:1177) ~[jakarta.mail-1.1.0.jar:na]\r\n\tat jakarta.mail.internet.MimeMultipart.updateHeaders(MimeMultipart.java:510) ~[jakarta.mail-1.1.0.jar:na]\r\n\tat jakarta.mail.internet.MimeBodyPart.updateHeaders(MimeBodyPart.java:1538) ~[jakarta.mail-1.1.0.jar:na]\r\n\tat jakarta.mail.internet.MimeBodyPart.updateHeaders(MimeBodyPart.java:1177) ~[jakarta.mail-1.1.0.jar:na]\r\n\tat jakarta.mail.internet.MimeMultipart.updateHeaders(MimeMultipart.java:510) ~[jakarta.mail-1.1.0.jar:na]\r\n\tat jakarta.mail.internet.MimeBodyPart.updateHeaders(MimeBodyPart.java:1538) ~[jakarta.mail-1.1.0.jar:na]\r\n\tat jakarta.mail.internet.MimeMessage.updateHeaders(MimeMessage.java:2265) ~[jakarta.mail-1.1.0.jar:na]\r\n\tat jakarta.mail.internet.MimeMessage.saveChanges(MimeMessage.java:2225) ~[jakarta.mail-1.1.0.jar:na]\r\n\tat org.springframework.mail.javamail.JavaMailSenderImpl.doSend(JavaMailSenderImpl.java:459) ~[spring-context-support-6.0.10.jar:6.0.10]\r\n\tat org.springframework.mail.javamail.JavaMailSenderImpl.send(JavaMailSenderImpl.java:361) ~[spring-context-support-6.0.10.jar:6.0.10]\r\n\tat org.springframework.mail.javamail.JavaMailSenderImpl.send(JavaMailSenderImpl.java:356) ~[spring-context-support-6.0.10.jar:6.0.10]\r\n\tat com.voucherservice.evoucher.Utils.EmailServiceUtils.sendEmail(EmailServiceUtils.java:33) ~[classes/:na]\r\n\tat com.voucherservice.evoucher.Service.Impl.AuthenticationServiceImpl.register(AuthenticationServiceImpl.java:83) ~[classes/:na]\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]\r\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:568) ~[na:na]\r\n\tat org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:343) ~[spring-aop-6.0.10.jar:6.0.10]\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.0.10.jar:6.0.10]\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.0.10.jar:6.0.10]\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:756) ~[spring-aop-6.0.10.jar:6.0.10]\r\n\tat org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:89) ~[spring-aop-6.0.10.jar:6.0.10]\r\n\tat com.voucherservice.evoucher.Performance.PerformanceLoggingAspect.logPerformance(PerformanceLoggingAspect.java:25) ~[classes/:na]\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]\r\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:568) ~[na:na]\r\n\tat org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:637) ~[spring-aop-6.0.10.jar:6.0.10]\r\n\tat org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:627) ~[spring-aop-6.0.10.jar:6.0.10]\r\n\tat org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:71) ~[spring-aop-6.0.10.jar:6.0.10]\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:173) ~[spring-aop-6.0.10.jar:6.0.10]\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:756) ~[spring-aop-6.0.10.jar:6.0.10]\r\n\tat org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97) ~[spring-aop-6.0.10.jar:6.0.10]\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.0.10.jar:6.0.10]\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:756) ~[spring-aop-6.0.10.jar:6.0.10]\r\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708) ~[spring-aop-6.0.10.jar:6.0.10]\r\n\tat com.voucherservice.evoucher.Service.Impl.AuthenticationServiceImpl$$SpringCGLIB$$0.register(&lt;generated&gt;) ~[classes/:na]\r\n\tat com.voucherservice.evoucher.Controller.AuthenticationController.register(AuthenticationController.java:30) ~[classes/:na]\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]\r\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:568) ~[na:na]\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:207) ~[spring-web-6.0.10.jar:6.0.10]\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:152) ~[spring-web-6.0.10.jar:6.0.10]\r\n\tat org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.0.10.jar:6.0.10]\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:884) ~[spring-webmvc-6.0.10.jar:6.0.10]\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:797) ~[spring-webmvc-6.0.10.jar:6.0.10]\r\n\tat org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.0.10.jar:6.0.10]\r\n\tat org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1081) ~[spring-webmvc-6.0.10.jar:6.0.10]\r\n\tat org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:974) ~[spring-webmvc-6.0.10.jar:6.0.10]\r\n\tat org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1011) ~[spring-webmvc-6.0.10.jar:6.0.10]\r\n\tat org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914) ~[spring-webmvc-6.0.10.jar:6.0.10]\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590) ~[tomcat-embed-core-10.1.10.jar:6.0]\r\n\tat org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.0.10.jar:6.0.10]\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.10.jar:6.0]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:205) ~[tomcat-embed-core-10.1.10.jar:10.1.10]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.10.jar:10.1.10]\r\n\tat org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.10.jar:10.1.10]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.10.jar:10.1.10]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.10.jar:10.1.10]\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110) ~[spring-web-6.0.10.jar:6.0.10]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.10.jar:10.1.10]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.10.jar:10.1.10]\r\n\tat org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231) ~[spring-security-web-6.1.1.jar:6.1.1]\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365) ~[spring-security-web-6.1.1.jar:6.1.1]\r\n\tat org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100) ~[spring-security-web-6.1.1.jar:6.1.1]\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.1.1.jar:6.1.1]\r\n\tat org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126) ~[spring-security-web-6.1.1.jar:6.1.1]\r\n\tat org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120) ~[spring-security-web-6.1.1.jar:6.1.1]\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.1.1.jar:6.1.1]\r\n\tat org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131) ~[spring-security-web-6.1.1.jar:6.1.1]\r\n\tat org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85) ~[spring-security-web-6.1.1.jar:6.1.1]\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.1.1.jar:6.1.1]\r\n\tat org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100) ~[spring-security-web-6.1.1.jar:6.1.1]\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.1.1.jar:6.1.1]\r\n\tat org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179) ~[spring-security-web-6.1.1.jar:6.1.1]\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.1.1.jar:6.1.1]\r\n\tat org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63) ~[spring-security-web-6.1.1.jar:6.1.1]\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.1.1.jar:6.1.1]\r\n\tat com.voucherservice.evoucher.Configuration.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:35) ~[classes/:na]\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.10.jar:6.0.10]\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.1.1.jar:6.1.1]\r\n\tat org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107) ~[spring-security-web-6.1.1.jar:6.1.1]\r\n\tat org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93) ~[spring-security-web-6.1.1.jar:6.1.1]\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.1.1.jar:6.1.1]\r\n\tat org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90) ~[spring-security-web-6.1.1.jar:6.1.1]\r\n\tat org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75) ~[spring-security-web-6.1.1.jar:6.1.1]\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.10.jar:6.0.10]\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.1.1.jar:6.1.1]\r\n\tat org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82) ~[spring-security-web-6.1.1.jar:6.1.1]\r\n\tat org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69) ~[spring-security-web-6.1.1.jar:6.1.1]\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.1.1.jar:6.1.1]\r\n\tat org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62) ~[spring-security-web-6.1.1.jar:6.1.1]\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.10.jar:6.0.10]\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.1.1.jar:6.1.1]\r\n\tat org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42) ~[spring-security-web-6.1.1.jar:6.1.1]\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.10.jar:6.0.10]\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.1.1.jar:6.1.1]\r\n\tat org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233) ~[spring-security-web-6.1.1.jar:6.1.1]\r\n\tat org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191) ~[spring-security-web-6.1.1.jar:6.1.1]\r\n\tat org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:352) ~[spring-web-6.0.10.jar:6.0.10]\r\n\tat org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:268) ~[spring-web-6.0.10.jar:6.0.10]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.10.jar:10.1.10]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.10.jar:10.1.10]\r\n\tat org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.0.10.jar:6.0.10]\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.10.jar:6.0.10]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.10.jar:10.1.10]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.10.jar:10.1.10]\r\n\tat org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.0.10.jar:6.0.10]\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.10.jar:6.0.10]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.10.jar:10.1.10]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.10.jar:10.1.10]\r\n\tat org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.0.10.jar:6.0.10]\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.10.jar:6.0.10]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.10.jar:10.1.10]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.10.jar:10.1.10]\r\n\tat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:166) ~[tomcat-embed-core-10.1.10.jar:10.1.10]\r\n\tat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90) ~[tomcat-embed-core-10.1.10.jar:10.1.10]\r\n\tat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482) ~[tomcat-embed-core-10.1.10.jar:10.1.10]\r\n\tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115) ~[tomcat-embed-core-10.1.10.jar:10.1.10]\r\n\tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93) ~[tomcat-embed-core-10.1.10.jar:10.1.10]\r\n\tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74) ~[tomcat-embed-core-10.1.10.jar:10.1.10]\r\n\tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:341) ~[tomcat-embed-core-10.1.10.jar:10.1.10]\r\n\tat org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:391) ~[tomcat-embed-core-10.1.10.jar:10.1.10]\r\n\tat org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.10.jar:10.1.10]\r\n\tat org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:894) ~[tomcat-embed-core-10.1.10.jar:10.1.10]\r\n\tat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1741) ~[tomcat-embed-core-10.1.10.jar:10.1.10]\r\n\tat org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.10.jar:10.1.10]\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191) ~[tomcat-embed-core-10.1.10.jar:10.1.10]\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) ~[tomcat-embed-core-10.1.10.jar:10.1.10]\r\n\tat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) ~[tomcat-embed-core-10.1.10.jar:10.1.10]\r\n\tat java.base/java.lang.Thread.run(Thread.java:833) ~[na:na]\r\n\r\n2023-08-17T17:37:40.641+02:00 DEBUG 10472 --- [nio-8080-exec-2] jakarta.activation                       : MailcapCommandMap: load SYS\r\n2023-08-17T17:37:40.641+02:00 DEBUG 10472 --- [nio-8080-exec-2] jakarta.activation                       : Checking system property jakarta.activation.spi.MailcapRegistryProvider\r\n2023-08-17T17:37:40.642+02:00 DEBUG 10472 --- [nio-8080-exec-2] jakarta.activation                       :   not found\r\n2023-08-17T17:37:40.642+02:00 DEBUG 10472 --- [nio-8080-exec-2] jakarta.activation                       : Using java.util.ServiceLoader to find jakarta.activation.spi.MailcapRegistryProvider\r\n2023-08-17T17:37:40.642+02:00 DEBUG 10472 --- [nio-8080-exec-2] jakarta.activation                       : ServiceProvider loading Facility used; returning object [org.eclipse.angus.activation.MailcapRegistryProviderImpl]\r\n2023-08-17T17:37:40.642+02:00 DEBUG 10472 --- [nio-8080-exec-2] angus.activation                         : new MailcapFile: file C:\\Users\\user\\.jdks\\corretto-17.0.7\\conf\\mailcap\r\n2023-08-17T17:37:40.643+02:00 DEBUG 10472 --- [nio-8080-exec-2] jakarta.activation                       : MailcapRegistry: can&#39;t load from file - C:\\Users\\user\\.jdks\\corretto-17.0.7\\conf\\mailcap\r\n ```\r\n\r\nThis is an odd error as the same app with the same configuration works on one system and then fails on another.","title":"Java Mail sender .mailcap not found","body":"<p>I have an application that is sending emails trough gmail. I have credentials setup and everything works fine on one machine, but throws java.io.FileNotFoundException: C:\\Users\\User.mailcap (System cannot find the file) on a different machine. The code is exactly the same</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Service\n@RequiredArgsConstructor\npublic class EmailServiceUtils {\n\n    private final JavaMailSender mailSender;\n    private final TemplateEngine templateEngine;\n\n    //TODO change method to accept other variables as a hashmap\n\n    public void sendEmail(String to, String subject, Map&lt;String, String&gt; templateVariables, String templateFilePath) throws MessagingException, IOException {\n        MimeMessage message = mailSender.createMimeMessage();\n        MimeMessageHelper helper = new MimeMessageHelper(message, true, &quot;utf-8&quot;);\n        helper.setTo(to);\n        helper.setSubject(subject);\n\n        // Load and process the HTML template\n        String htmlContent = loadAndProcessTemplate(templateVariables, templateFilePath);\n        helper.setText(htmlContent, true);\n        mailSender.send(message);\n    }\n\n    private String loadAndProcessTemplate(Map&lt;String, String&gt; templateVariables, String templateFilePath) {\n        Context context = new Context();\n\n        //Step through all items in templateVariables map and set them as variable for thymeleaf template\n        for (Map.Entry&lt;String, String&gt; entry : templateVariables.entrySet()) {\n            context.setVariable(entry.getKey(), entry.getValue());\n        }\n\n        // Process the template with variables\n        return templateEngine.process(templateFilePath, context);\n    }\n\n}\n</code></pre>\n<p>The error in question</p>\n<pre><code>2023-08-17T17:37:40.365+02:00 DEBUG 10472 --- [nio-8080-exec-2] com.sun.mail.smtp                        : Using mechanism LOGIN\n2023-08-17T17:37:40.636+02:00 DEBUG 10472 --- [nio-8080-exec-2] jakarta.activation                       : MailcapCommandMap: load HOME\n2023-08-17T17:37:40.637+02:00 DEBUG 10472 --- [nio-8080-exec-2] jakarta.activation                       : Checking system property jakarta.activation.spi.MailcapRegistryProvider\n2023-08-17T17:37:40.637+02:00 DEBUG 10472 --- [nio-8080-exec-2] jakarta.activation                       :   not found\n2023-08-17T17:37:40.637+02:00 DEBUG 10472 --- [nio-8080-exec-2] jakarta.activation                       : Using java.util.ServiceLoader to find jakarta.activation.spi.MailcapRegistryProvider\n2023-08-17T17:37:40.638+02:00 DEBUG 10472 --- [nio-8080-exec-2] jakarta.activation                       : ServiceProvider loading Facility used; returning object [org.eclipse.angus.activation.MailcapRegistryProviderImpl]\n2023-08-17T17:37:40.639+02:00 DEBUG 10472 --- [nio-8080-exec-2] angus.activation                         : new MailcapFile: file C:\\Users\\user\\.mailcap\n2023-08-17T17:37:40.639+02:00 DEBUG 10472 --- [nio-8080-exec-2] jakarta.activation                       : MailcapRegistry: can't load from file - C:\\Users\\user\\.mailcap\n\njava.io.FileNotFoundException: C:\\Users\\user\\.mailcap (Systém nemůže nalézt uvedený soubor)\n    at java.base/java.io.FileInputStream.open0(Native Method) ~[na:na]\n    at java.base/java.io.FileInputStream.open(FileInputStream.java:216) ~[na:na]\n    at java.base/java.io.FileInputStream.&lt;init&gt;(FileInputStream.java:157) ~[na:na]\n    at java.base/java.io.FileInputStream.&lt;init&gt;(FileInputStream.java:111) ~[na:na]\n    at java.base/java.io.FileReader.&lt;init&gt;(FileReader.java:60) ~[na:na]\n    at org.eclipse.angus.activation.MailcapFile.&lt;init&gt;(MailcapFile.java:71) ~[angus-activation-2.0.1.jar:na]\n    at org.eclipse.angus.activation.MailcapRegistryProviderImpl.getByFileName(MailcapRegistryProviderImpl.java:29) ~[angus-activation-2.0.1.jar:na]\n    at jakarta.activation.MailcapCommandMap.loadFile(MailcapCommandMap.java:284) ~[jakarta.activation-api-2.1.2.jar:na]\n    at jakarta.activation.MailcapCommandMap.&lt;init&gt;(MailcapCommandMap.java:154) ~[jakarta.activation-api-2.1.2.jar:na]\n    at jakarta.activation.CommandMap.getDefaultCommandMap(CommandMap.java:60) ~[jakarta.activation-api-2.1.2.jar:na]\n    at jakarta.activation.DataHandler.getCommandMap(DataHandler.java:128) ~[jakarta.activation-api-2.1.2.jar:na]\n    at jakarta.activation.DataHandler.getDataContentHandler(DataHandler.java:590) ~[jakarta.activation-api-2.1.2.jar:na]\n    at jakarta.activation.DataHandler.writeTo(DataHandler.java:290) ~[jakarta.activation-api-2.1.2.jar:na]\n    at jakarta.mail.internet.MimeUtility.getEncoding(MimeUtility.java:316) ~[jakarta.mail-1.1.0.jar:na]\n    at jakarta.mail.internet.MimeBodyPart.updateHeaders(MimeBodyPart.java:1580) ~[jakarta.mail-1.1.0.jar:na]\n    at jakarta.mail.internet.MimeBodyPart.updateHeaders(MimeBodyPart.java:1177) ~[jakarta.mail-1.1.0.jar:na]\n    at jakarta.mail.internet.MimeMultipart.updateHeaders(MimeMultipart.java:510) ~[jakarta.mail-1.1.0.jar:na]\n    at jakarta.mail.internet.MimeBodyPart.updateHeaders(MimeBodyPart.java:1538) ~[jakarta.mail-1.1.0.jar:na]\n    at jakarta.mail.internet.MimeBodyPart.updateHeaders(MimeBodyPart.java:1177) ~[jakarta.mail-1.1.0.jar:na]\n    at jakarta.mail.internet.MimeMultipart.updateHeaders(MimeMultipart.java:510) ~[jakarta.mail-1.1.0.jar:na]\n    at jakarta.mail.internet.MimeBodyPart.updateHeaders(MimeBodyPart.java:1538) ~[jakarta.mail-1.1.0.jar:na]\n    at jakarta.mail.internet.MimeMessage.updateHeaders(MimeMessage.java:2265) ~[jakarta.mail-1.1.0.jar:na]\n    at jakarta.mail.internet.MimeMessage.saveChanges(MimeMessage.java:2225) ~[jakarta.mail-1.1.0.jar:na]\n    at org.springframework.mail.javamail.JavaMailSenderImpl.doSend(JavaMailSenderImpl.java:459) ~[spring-context-support-6.0.10.jar:6.0.10]\n    at org.springframework.mail.javamail.JavaMailSenderImpl.send(JavaMailSenderImpl.java:361) ~[spring-context-support-6.0.10.jar:6.0.10]\n    at org.springframework.mail.javamail.JavaMailSenderImpl.send(JavaMailSenderImpl.java:356) ~[spring-context-support-6.0.10.jar:6.0.10]\n    at com.voucherservice.evoucher.Utils.EmailServiceUtils.sendEmail(EmailServiceUtils.java:33) ~[classes/:na]\n    at com.voucherservice.evoucher.Service.Impl.AuthenticationServiceImpl.register(AuthenticationServiceImpl.java:83) ~[classes/:na]\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]\n    at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]\n    at java.base/java.lang.reflect.Method.invoke(Method.java:568) ~[na:na]\n    at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:343) ~[spring-aop-6.0.10.jar:6.0.10]\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.0.10.jar:6.0.10]\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.0.10.jar:6.0.10]\n    at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:756) ~[spring-aop-6.0.10.jar:6.0.10]\n    at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:89) ~[spring-aop-6.0.10.jar:6.0.10]\n    at com.voucherservice.evoucher.Performance.PerformanceLoggingAspect.logPerformance(PerformanceLoggingAspect.java:25) ~[classes/:na]\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]\n    at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]\n    at java.base/java.lang.reflect.Method.invoke(Method.java:568) ~[na:na]\n    at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:637) ~[spring-aop-6.0.10.jar:6.0.10]\n    at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:627) ~[spring-aop-6.0.10.jar:6.0.10]\n    at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:71) ~[spring-aop-6.0.10.jar:6.0.10]\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:173) ~[spring-aop-6.0.10.jar:6.0.10]\n    at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:756) ~[spring-aop-6.0.10.jar:6.0.10]\n    at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97) ~[spring-aop-6.0.10.jar:6.0.10]\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.0.10.jar:6.0.10]\n    at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:756) ~[spring-aop-6.0.10.jar:6.0.10]\n    at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708) ~[spring-aop-6.0.10.jar:6.0.10]\n    at com.voucherservice.evoucher.Service.Impl.AuthenticationServiceImpl$$SpringCGLIB$$0.register(&lt;generated&gt;) ~[classes/:na]\n    at com.voucherservice.evoucher.Controller.AuthenticationController.register(AuthenticationController.java:30) ~[classes/:na]\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]\n    at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]\n    at java.base/java.lang.reflect.Method.invoke(Method.java:568) ~[na:na]\n    at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:207) ~[spring-web-6.0.10.jar:6.0.10]\n    at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:152) ~[spring-web-6.0.10.jar:6.0.10]\n    at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.0.10.jar:6.0.10]\n    at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:884) ~[spring-webmvc-6.0.10.jar:6.0.10]\n    at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:797) ~[spring-webmvc-6.0.10.jar:6.0.10]\n    at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.0.10.jar:6.0.10]\n    at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1081) ~[spring-webmvc-6.0.10.jar:6.0.10]\n    at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:974) ~[spring-webmvc-6.0.10.jar:6.0.10]\n    at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1011) ~[spring-webmvc-6.0.10.jar:6.0.10]\n    at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914) ~[spring-webmvc-6.0.10.jar:6.0.10]\n    at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590) ~[tomcat-embed-core-10.1.10.jar:6.0]\n    at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.0.10.jar:6.0.10]\n    at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.10.jar:6.0]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:205) ~[tomcat-embed-core-10.1.10.jar:10.1.10]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.10.jar:10.1.10]\n    at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.10.jar:10.1.10]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.10.jar:10.1.10]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.10.jar:10.1.10]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110) ~[spring-web-6.0.10.jar:6.0.10]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.10.jar:10.1.10]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.10.jar:10.1.10]\n    at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231) ~[spring-security-web-6.1.1.jar:6.1.1]\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365) ~[spring-security-web-6.1.1.jar:6.1.1]\n    at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100) ~[spring-security-web-6.1.1.jar:6.1.1]\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.1.1.jar:6.1.1]\n    at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126) ~[spring-security-web-6.1.1.jar:6.1.1]\n    at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120) ~[spring-security-web-6.1.1.jar:6.1.1]\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.1.1.jar:6.1.1]\n    at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131) ~[spring-security-web-6.1.1.jar:6.1.1]\n    at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85) ~[spring-security-web-6.1.1.jar:6.1.1]\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.1.1.jar:6.1.1]\n    at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100) ~[spring-security-web-6.1.1.jar:6.1.1]\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.1.1.jar:6.1.1]\n    at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179) ~[spring-security-web-6.1.1.jar:6.1.1]\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.1.1.jar:6.1.1]\n    at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63) ~[spring-security-web-6.1.1.jar:6.1.1]\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.1.1.jar:6.1.1]\n    at com.voucherservice.evoucher.Configuration.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:35) ~[classes/:na]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.10.jar:6.0.10]\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.1.1.jar:6.1.1]\n    at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107) ~[spring-security-web-6.1.1.jar:6.1.1]\n    at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93) ~[spring-security-web-6.1.1.jar:6.1.1]\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.1.1.jar:6.1.1]\n    at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90) ~[spring-security-web-6.1.1.jar:6.1.1]\n    at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75) ~[spring-security-web-6.1.1.jar:6.1.1]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.10.jar:6.0.10]\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.1.1.jar:6.1.1]\n    at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82) ~[spring-security-web-6.1.1.jar:6.1.1]\n    at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69) ~[spring-security-web-6.1.1.jar:6.1.1]\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.1.1.jar:6.1.1]\n    at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62) ~[spring-security-web-6.1.1.jar:6.1.1]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.10.jar:6.0.10]\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.1.1.jar:6.1.1]\n    at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42) ~[spring-security-web-6.1.1.jar:6.1.1]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.10.jar:6.0.10]\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.1.1.jar:6.1.1]\n    at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233) ~[spring-security-web-6.1.1.jar:6.1.1]\n    at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191) ~[spring-security-web-6.1.1.jar:6.1.1]\n    at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:352) ~[spring-web-6.0.10.jar:6.0.10]\n    at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:268) ~[spring-web-6.0.10.jar:6.0.10]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.10.jar:10.1.10]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.10.jar:10.1.10]\n    at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.0.10.jar:6.0.10]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.10.jar:6.0.10]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.10.jar:10.1.10]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.10.jar:10.1.10]\n    at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.0.10.jar:6.0.10]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.10.jar:6.0.10]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.10.jar:10.1.10]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.10.jar:10.1.10]\n    at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.0.10.jar:6.0.10]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.10.jar:6.0.10]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.10.jar:10.1.10]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.10.jar:10.1.10]\n    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:166) ~[tomcat-embed-core-10.1.10.jar:10.1.10]\n    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90) ~[tomcat-embed-core-10.1.10.jar:10.1.10]\n    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482) ~[tomcat-embed-core-10.1.10.jar:10.1.10]\n    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115) ~[tomcat-embed-core-10.1.10.jar:10.1.10]\n    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93) ~[tomcat-embed-core-10.1.10.jar:10.1.10]\n    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74) ~[tomcat-embed-core-10.1.10.jar:10.1.10]\n    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:341) ~[tomcat-embed-core-10.1.10.jar:10.1.10]\n    at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:391) ~[tomcat-embed-core-10.1.10.jar:10.1.10]\n    at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.10.jar:10.1.10]\n    at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:894) ~[tomcat-embed-core-10.1.10.jar:10.1.10]\n    at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1741) ~[tomcat-embed-core-10.1.10.jar:10.1.10]\n    at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.10.jar:10.1.10]\n    at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191) ~[tomcat-embed-core-10.1.10.jar:10.1.10]\n    at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) ~[tomcat-embed-core-10.1.10.jar:10.1.10]\n    at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) ~[tomcat-embed-core-10.1.10.jar:10.1.10]\n    at java.base/java.lang.Thread.run(Thread.java:833) ~[na:na]\n\n2023-08-17T17:37:40.641+02:00 DEBUG 10472 --- [nio-8080-exec-2] jakarta.activation                       : MailcapCommandMap: load SYS\n2023-08-17T17:37:40.641+02:00 DEBUG 10472 --- [nio-8080-exec-2] jakarta.activation                       : Checking system property jakarta.activation.spi.MailcapRegistryProvider\n2023-08-17T17:37:40.642+02:00 DEBUG 10472 --- [nio-8080-exec-2] jakarta.activation                       :   not found\n2023-08-17T17:37:40.642+02:00 DEBUG 10472 --- [nio-8080-exec-2] jakarta.activation                       : Using java.util.ServiceLoader to find jakarta.activation.spi.MailcapRegistryProvider\n2023-08-17T17:37:40.642+02:00 DEBUG 10472 --- [nio-8080-exec-2] jakarta.activation                       : ServiceProvider loading Facility used; returning object [org.eclipse.angus.activation.MailcapRegistryProviderImpl]\n2023-08-17T17:37:40.642+02:00 DEBUG 10472 --- [nio-8080-exec-2] angus.activation                         : new MailcapFile: file C:\\Users\\user\\.jdks\\corretto-17.0.7\\conf\\mailcap\n2023-08-17T17:37:40.643+02:00 DEBUG 10472 --- [nio-8080-exec-2] jakarta.activation                       : MailcapRegistry: can't load from file - C:\\Users\\user\\.jdks\\corretto-17.0.7\\conf\\mailcap\n</code></pre>\n<p>This is an odd error as the same app with the same configuration works on one system and then fails on another.</p>\n"},{"tags":["java","spring","spring-mvc","spring-security"],"answers":[{"tags":[],"owner":{"account_id":2515170,"reputation":1590,"user_id":2186777,"accept_rate":83,"display_name":"fl4l"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1692286996,"creation_date":1692286642,"answer_id":76923042,"question_id":76732095,"body_markdown":"After days of debugging, I definitively associated the behavior to the session management.\r\nI noticed on the browser cookies that now are present multiple entries of JSESSIONID. The old build in Spring 3 / Java 8 running on JBoss 7 was having only one occurrence:\r\n\r\n    Cookie: JSESSIONID=0F7B1332F8F3D06021746ED547F58B02;JSESSIONID=0F7B1332F8F3D06021746ED547F58B02.20200749-ait; JSESSIONID=S4OXEvR5XykB1YXwIJPnTClFLhiDhyZ7CmsETvkP.20200749-ait; JSESSIONID=y0nsoBTMQumwTi78Zldue-wLx8qPmDnJKJSBUQzz.20200749-ait; _ga=GA1.1.493020884.1689330358; _ga_SR3H6G8EBP=GS1.1.1689330374.1.1.1689330525.0.0.0; preferredLanguage=en\r\n\r\nIn order to solve, even if probably it is not the best solution, I simply needed to customize the application cookie name in web.xml:\r\n\r\n      &lt;session-config&gt;\r\n        &lt;session-timeout&gt;15&lt;/session-timeout&gt;\r\n        &lt;cookie-config&gt;\r\n          &lt;name&gt;CUSTOM_SESSION_ID&lt;/name&gt;\r\n          &lt;path&gt;/myApplication&lt;/path&gt;\r\n          &lt;http-only&gt;true&lt;/http-only&gt;\r\n          &lt;secure&gt;true&lt;/secure&gt;\r\n        &lt;/cookie-config&gt;\r\n        &lt;tracking-mode&gt;COOKIE&lt;/tracking-mode&gt;\r\n      &lt;/session-config&gt;\r\n\r\nNow the cookie is something similar to:\r\n\r\n    Cookie: JSESSIONID=0F7B1332F8F3D06021746ED547F58B02 JSESSIONID=0F7B1332F8F3D06021746ED547F58B02.20200749-ait; CUSTOM_SESSION_ID=S4OXEvR5XykB1YXwIJPnTClFLhiDhyZ7CmsETvkP.20200749-ait;  _ga=GA1.1.493020884.1689330358; _ga_SR3H6G8EBP=GS1.1.1689330374.1.1.1689330525.0.0.0; preferredLanguage=en\r\n\r\nNow I have the custom cookie and also several JSESSIONID, as if it is managed outside the application. Consider that I&#39;m testing the application on my laptop running Wildfly locally, not in an enterprise environment.&lt;br&gt;\r\nI&#39;m currently not able to say if the above behavior of multiple entries of JSESSIONID was generated by WildFly 26 or the newer version of Spring/SpringSecurity, in my researches I don&#39;t find anything about it.&lt;br&gt;\r\nWho set the JSESSIONID?&lt;br&gt;I hope this helps, any clarification is appreciated.","title":"Spring Security 3.11 app migration to 5.7: login success but anonymous user","body":"<p>After days of debugging, I definitively associated the behavior to the session management.\nI noticed on the browser cookies that now are present multiple entries of JSESSIONID. The old build in Spring 3 / Java 8 running on JBoss 7 was having only one occurrence:</p>\n<pre><code>Cookie: JSESSIONID=0F7B1332F8F3D06021746ED547F58B02;JSESSIONID=0F7B1332F8F3D06021746ED547F58B02.20200749-ait; JSESSIONID=S4OXEvR5XykB1YXwIJPnTClFLhiDhyZ7CmsETvkP.20200749-ait; JSESSIONID=y0nsoBTMQumwTi78Zldue-wLx8qPmDnJKJSBUQzz.20200749-ait; _ga=GA1.1.493020884.1689330358; _ga_SR3H6G8EBP=GS1.1.1689330374.1.1.1689330525.0.0.0; preferredLanguage=en\n</code></pre>\n<p>In order to solve, even if probably it is not the best solution, I simply needed to customize the application cookie name in web.xml:</p>\n<pre><code>  &lt;session-config&gt;\n    &lt;session-timeout&gt;15&lt;/session-timeout&gt;\n    &lt;cookie-config&gt;\n      &lt;name&gt;CUSTOM_SESSION_ID&lt;/name&gt;\n      &lt;path&gt;/myApplication&lt;/path&gt;\n      &lt;http-only&gt;true&lt;/http-only&gt;\n      &lt;secure&gt;true&lt;/secure&gt;\n    &lt;/cookie-config&gt;\n    &lt;tracking-mode&gt;COOKIE&lt;/tracking-mode&gt;\n  &lt;/session-config&gt;\n</code></pre>\n<p>Now the cookie is something similar to:</p>\n<pre><code>Cookie: JSESSIONID=0F7B1332F8F3D06021746ED547F58B02 JSESSIONID=0F7B1332F8F3D06021746ED547F58B02.20200749-ait; CUSTOM_SESSION_ID=S4OXEvR5XykB1YXwIJPnTClFLhiDhyZ7CmsETvkP.20200749-ait;  _ga=GA1.1.493020884.1689330358; _ga_SR3H6G8EBP=GS1.1.1689330374.1.1.1689330525.0.0.0; preferredLanguage=en\n</code></pre>\n<p>Now I have the custom cookie and also several JSESSIONID, as if it is managed outside the application. Consider that I'm testing the application on my laptop running Wildfly locally, not in an enterprise environment.<br>\nI'm currently not able to say if the above behavior of multiple entries of JSESSIONID was generated by WildFly 26 or the newer version of Spring/SpringSecurity, in my researches I don't find anything about it.<br>\nWho set the JSESSIONID?<br>I hope this helps, any clarification is appreciated.</p>\n"}],"owner":{"account_id":2515170,"reputation":1590,"user_id":2186777,"accept_rate":83,"display_name":"fl4l"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":192,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1692286996,"creation_date":1689872048,"question_id":76732095,"body_markdown":"I&#39;m migrating a quite old application in Spring 3.1.1 + Spring Security 3.1.8, that works fine in JBossEAP 7.3 + Java8,&lt;br&gt; to Spring 5.3.29 + Spring Security 5.7.9, executed by WildFly26 + Java11. &lt;br&gt;I use xml notation for Spring context declaration.\r\n\r\nThe application starts and the context is loaded fine with no errors, the problem comes after a success login call, I get an `Anonymous user` at the `default-target-url=&quot;/loginSuccessful.htm` page, due to a *null* `securityContext` in the `SecurityContextHolderFilter` just before that page (in the following configuration see that I commented the &quot;isFullyAuthenticated&quot; intercept-url check to loginSuccessful.htm for debugging, alternatively I&#39;ve been redirected to login page).\r\n\r\nIn the migration I enabled the `security-context-explicit-save` and added `HttpSessionSecurityContextRepository` as *securityContextRepository* (that is the default) as requested by [documentation][1] and disabled *headers* and *csrf*.\r\n\r\nFrom debug I see that the POST to */j_spring_security_check* produces an authentication with success and the permissions are retrieved correctly: the `AbstractAuthenticationProcessingFilter`, in *successfulAuthentication* performs the context saving by calling `this.securityContextRepository.saveContext` by passing a `UsernamePasswordAuthenticationToken` (where `this.securityContextRepository` is a `HttpSessionSecurityContextRepository` object saved to SPRING_SECURITY_CONTEXT property name), and finally calls success authentication function.&lt;br&gt;\r\nIn the next `SecurityContextHolderFilter`, just before the */loginSuccessful.htm*, the following line generates a *null*: `SecurityContext securityContext = this.securityContextRepository.loadContext(request).get();` its try to retrieve an `HttpSessionSecurityContextRepository` by getting a property with name SPRING_SECURITY_CONTEXT\r\n\r\nI know that there is something wrong in my configutation, but I don&#39;t know what, I have read many question similar to mine, in particular [this one][2], or [this other][3], [that][4], or [that other][5] and many other, tried with no luck its solutions. Is it needed to implement a custom `UsernamePasswordAuthenticationFilter` in substitution to `&lt;security:form-login /&gt;` tag? In what way? I didn&#39;t find any examples\r\n\r\nHere my code:&lt;br&gt;\r\n**SecurityContext.xml**\r\n\r\n    &lt;security:http\r\n    \t\tauto-config=&quot;true&quot;\r\n    \t\tuse-expressions=&quot;true&quot;\r\n    \t\tdisable-url-rewriting=&quot;true&quot;\r\n    \t\tsecurity-context-explicit-save=&quot;true&quot;\r\n    \t\tsecurity-context-repository-ref=&quot;securityContextRepository&quot;\r\n    \t&gt;\r\n    \r\n    \t&lt;security:intercept-url pattern=&quot;/login.**&quot; access=&quot;permitAll&quot; /&gt;\r\n    &lt;!-- \t&lt;security:intercept-url pattern=&quot;/loginSuccessful.htm&quot; access=&quot;isFullyAuthenticated()&quot; /&gt; --&gt;\r\n    \r\n    \t&lt;security:headers disabled=&quot;true&quot;/&gt;\r\n    \t&lt;security:csrf disabled=&quot;true&quot;/&gt;\t\t\r\n    \t&lt;security:form-login\r\n    \t\t\tlogin-page=&quot;/login.htm&quot;\r\n    \t\t\tlogin-processing-url=&quot;/j_spring_security_check&quot;\r\n    \t\t\tusername-parameter=&quot;j_username&quot;\r\n    \t\t\tpassword-parameter=&quot;j_password&quot;\r\n    \t\t\tauthentication-failure-url=&quot;/loginFailed.htm&quot;\r\n    \t\t\tdefault-target-url=&quot;/loginSuccessful.htm&quot;\r\n    \t\t\tauthentication-details-source-ref=&quot;customAuthenticationDetailsSource&quot;\r\n    \t\t\talways-use-default-target=&quot;false&quot;\r\n    \t/&gt;\r\n    \t&lt;security:logout\r\n    \t\t\tinvalidate-session=&quot;true&quot;\r\n    \t\t\tlogout-success-url=&quot;/logoutSuccessful.htm&quot;\r\n    \t\t\tdelete-cookies=&quot;JSESSIONID&quot;\r\n    \t/&gt;\r\n    \t&lt;security:session-management&gt;\r\n    \t\t&lt;security:concurrency-control max-sessions=&quot;1&quot; /&gt;\r\n    \t&lt;/security:session-management&gt;\t\t\r\n    \t&lt;security:access-denied-handler error-page=&quot;/accessDenied.htm&quot; /&gt;\r\n    &lt;/security:http&gt;\r\n    \r\n    &lt;security:debug/&gt;\r\n    \r\n    &lt;security:authentication-manager alias=&quot;authenticationManager&quot;&gt;\r\n    \t&lt;security:authentication-provider ref=&#39;ldapAuthProvider&#39; /&gt;\r\n    &lt;/security:authentication-manager&gt;\r\n    \r\n    &lt;bean id=&quot;securityContextRepository&quot; class=&quot;org.springframework.security.web.context.HttpSessionSecurityContextRepository&quot; /&gt;\r\n    \r\n    &lt;bean id=&quot;contextSource&quot; class=&quot;org.springframework.security.ldap.DefaultSpringSecurityContextSource&quot;&gt;\r\n    \t&lt;constructor-arg value=&quot;${ldap.ldapUrl}&quot; /&gt;\r\n    &lt;/bean&gt;\r\n    \r\n    &lt;bean id=&quot;customAuthenticationDetailsSource&quot; class=&quot;my.class.path.security.CustomAuthenticationDetailsSource&quot;/&gt;\r\n    \r\n    &lt;bean id=&quot;ldapAuthProvider&quot; class=&quot;org.springframework.security.ldap.authentication.LdapAuthenticationProvider&quot;&gt;\r\n    \t&lt;constructor-arg&gt;\r\n    \t\t&lt;bean class=&quot;my.class.path.web.security.CustomLdapBindAuthenticator&quot;&gt;\r\n    \t\t\t&lt;constructor-arg ref=&quot;contextSource&quot; /&gt;\r\n    \t\t\t&lt;property name=&quot;userDnPatterns&quot;&gt;\r\n    \t\t\t\t&lt;list&gt;\r\n    \t\t\t\t\t&lt;value&gt;cn={0},${ldap.fullyQualifiedDN}&lt;/value&gt;\r\n    \t\t\t\t&lt;/list&gt;\r\n    \t\t\t&lt;/property&gt;\r\n    \t\t&lt;/bean&gt;\r\n    \t&lt;/constructor-arg&gt;\r\n    \t&lt;constructor-arg&gt;\r\n    \t\t&lt;bean class=&quot;my.class.path.security.CustomLdapAuthoritiesPopulator&quot; /&gt;\r\n    \t&lt;/constructor-arg&gt;\r\n    &lt;/bean&gt;\r\n\r\n\r\n**LoginController.java**\r\n\r\n    @Controller\r\n    public class LoginController {\r\n    \r\n    \t@RequestMapping(value=&quot;/login.htm&quot;, method = RequestMethod.GET)\r\n        public String showLogin(Model model,HttpSession httpSession) {\r\n    \t\thttpSession.invalidate();\r\n    \t\t\r\n    \t\tBoolean fromLogin = true;\t\r\n    \t\tmodel.addAttribute(&quot;fromLogin&quot;, fromLogin);\r\n            \r\n            return &quot;login&quot;;\r\n        }\r\n        \r\n    \t@RequestMapping(value=&quot;/loginSuccessful.htm&quot;, method = RequestMethod.GET)\r\n    \tpublic ModelAndView loginAccess(Model model, HttpServletRequest request, HttpServletResponse response, Locale locale, Authentication authen, Principal princ) throws NoSuchMessageException, Exception {\r\n    \r\n    \t\tHttpSessionSecurityContextRepository secRepo = new HttpSessionSecurityContextRepository();\r\n    \t    Authentication auth = secRepo.loadContext(request).get().getAuthentication();  \r\n    \t\r\n    \t\tAuthentication authentication = SecurityContextHolder.getContext().getAuthentication();\r\n    \t\tAuthentication authentication3 = SecurityContextHolder.getContextHolderStrategy().getContext().getAuthentication();\r\n    }\r\n\r\nSee that I tried to get the Principal and Authentication in many ways, but always *null*\r\n\r\nHere is the filter registration from logs:\r\n\r\n    [INFO] 2023-07-20 16:43:21,906 HttpSecurityBeanDefinitionParser.checkFilterChainOrder:283 -&gt; Checking sorted filter chain: [\r\n    Root bean: class [org.springframework.security.web.session.DisableEncodeUrlFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 100,\r\n    Root bean: class [org.springframework.security.web.session.ForceEagerSessionCreationFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 200,\r\n    Root bean: class [org.springframework.security.web.context.SecurityContextHolderFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 400,\r\n    Root bean: class [org.springframework.security.web.session.ConcurrentSessionFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 500,\r\n    Root bean: class [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 600,\r\n    Root bean: class [org.springframework.security.web.authentication.logout.LogoutFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 1300, &lt;org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter#0&gt;, order = 2100,\r\n    Root bean: class [org.springframework.security.web.authentication.www.BasicAuthenticationFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 2700,\r\n    Root bean: class [org.springframework.security.web.savedrequest.RequestCacheAwareFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 2800,\r\n    Root bean: class [null]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=org.springframework.security.config.http.HttpConfigurationBuilder$SecurityContextHolderAwareRequestFilterBeanFactory#0; factoryMethodName=getBean; initMethodName=null; destroyMethodName=null, order = 2900,\r\n    Root bean: class [org.springframework.security.web.authentication.AnonymousAuthenticationFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 3200,\r\n    Root bean: class [org.springframework.security.web.session.SessionManagementFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 3500,\r\n    Root bean: class [org.springframework.security.web.access.ExceptionTranslationFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 3600, &lt;org.springframework.security.web.access.intercept.FilterSecurityInterceptor#0&gt;, order = 3700]\r\n\r\nSecurity Filter Chain from logs:\r\n\r\n    Security filter chain: [\r\n      DisableEncodeUrlFilter\r\n      ForceEagerSessionCreationFilter\r\n      SecurityContextHolderFilter\r\n      ConcurrentSessionFilter\r\n      WebAsyncManagerIntegrationFilter\r\n      LogoutFilter\r\n      UsernamePasswordAuthenticationFilter\r\n      BasicAuthenticationFilter\r\n      RequestCacheAwareFilter\r\n      SecurityContextHolderAwareRequestFilter\r\n      AnonymousAuthenticationFilter\r\n      SessionManagementFilter\r\n      ExceptionTranslationFilter\r\n      FilterSecurityInterceptor\r\n    ]\r\n\r\nAll seems to be OK as I see in the debugger, but where is the problem? any help is appreciated\r\n\r\n  [1]: https://docs.spring.io/spring-security/reference/5.7/servlet/authentication/architecture.html\r\n  [2]: https://stackoverflow.com/q/75289494\r\n  [3]: https://stackoverflow.com/q/47020096\r\n  [4]: https://stackoverflow.com/q/40249306\r\n  [5]: https://stackoverflow.com/q/24696717","title":"Spring Security 3.11 app migration to 5.7: login success but anonymous user","body":"<p>I'm migrating a quite old application in Spring 3.1.1 + Spring Security 3.1.8, that works fine in JBossEAP 7.3 + Java8,<br> to Spring 5.3.29 + Spring Security 5.7.9, executed by WildFly26 + Java11. <br>I use xml notation for Spring context declaration.</p>\n<p>The application starts and the context is loaded fine with no errors, the problem comes after a success login call, I get an <code>Anonymous user</code> at the <code>default-target-url=&quot;/loginSuccessful.htm</code> page, due to a <em>null</em> <code>securityContext</code> in the <code>SecurityContextHolderFilter</code> just before that page (in the following configuration see that I commented the &quot;isFullyAuthenticated&quot; intercept-url check to loginSuccessful.htm for debugging, alternatively I've been redirected to login page).</p>\n<p>In the migration I enabled the <code>security-context-explicit-save</code> and added <code>HttpSessionSecurityContextRepository</code> as <em>securityContextRepository</em> (that is the default) as requested by <a href=\"https://docs.spring.io/spring-security/reference/5.7/servlet/authentication/architecture.html\" rel=\"nofollow noreferrer\">documentation</a> and disabled <em>headers</em> and <em>csrf</em>.</p>\n<p>From debug I see that the POST to <em>/j_spring_security_check</em> produces an authentication with success and the permissions are retrieved correctly: the <code>AbstractAuthenticationProcessingFilter</code>, in <em>successfulAuthentication</em> performs the context saving by calling <code>this.securityContextRepository.saveContext</code> by passing a <code>UsernamePasswordAuthenticationToken</code> (where <code>this.securityContextRepository</code> is a <code>HttpSessionSecurityContextRepository</code> object saved to SPRING_SECURITY_CONTEXT property name), and finally calls success authentication function.<br>\nIn the next <code>SecurityContextHolderFilter</code>, just before the <em>/loginSuccessful.htm</em>, the following line generates a <em>null</em>: <code>SecurityContext securityContext = this.securityContextRepository.loadContext(request).get();</code> its try to retrieve an <code>HttpSessionSecurityContextRepository</code> by getting a property with name SPRING_SECURITY_CONTEXT</p>\n<p>I know that there is something wrong in my configutation, but I don't know what, I have read many question similar to mine, in particular <a href=\"https://stackoverflow.com/q/75289494\">this one</a>, or <a href=\"https://stackoverflow.com/q/47020096\">this other</a>, <a href=\"https://stackoverflow.com/q/40249306\">that</a>, or <a href=\"https://stackoverflow.com/q/24696717\">that other</a> and many other, tried with no luck its solutions. Is it needed to implement a custom <code>UsernamePasswordAuthenticationFilter</code> in substitution to <code>&lt;security:form-login /&gt;</code> tag? In what way? I didn't find any examples</p>\n<p>Here my code:<br>\n<strong>SecurityContext.xml</strong></p>\n<pre><code>&lt;security:http\n        auto-config=&quot;true&quot;\n        use-expressions=&quot;true&quot;\n        disable-url-rewriting=&quot;true&quot;\n        security-context-explicit-save=&quot;true&quot;\n        security-context-repository-ref=&quot;securityContextRepository&quot;\n    &gt;\n\n    &lt;security:intercept-url pattern=&quot;/login.**&quot; access=&quot;permitAll&quot; /&gt;\n&lt;!--    &lt;security:intercept-url pattern=&quot;/loginSuccessful.htm&quot; access=&quot;isFullyAuthenticated()&quot; /&gt; --&gt;\n\n    &lt;security:headers disabled=&quot;true&quot;/&gt;\n    &lt;security:csrf disabled=&quot;true&quot;/&gt;        \n    &lt;security:form-login\n            login-page=&quot;/login.htm&quot;\n            login-processing-url=&quot;/j_spring_security_check&quot;\n            username-parameter=&quot;j_username&quot;\n            password-parameter=&quot;j_password&quot;\n            authentication-failure-url=&quot;/loginFailed.htm&quot;\n            default-target-url=&quot;/loginSuccessful.htm&quot;\n            authentication-details-source-ref=&quot;customAuthenticationDetailsSource&quot;\n            always-use-default-target=&quot;false&quot;\n    /&gt;\n    &lt;security:logout\n            invalidate-session=&quot;true&quot;\n            logout-success-url=&quot;/logoutSuccessful.htm&quot;\n            delete-cookies=&quot;JSESSIONID&quot;\n    /&gt;\n    &lt;security:session-management&gt;\n        &lt;security:concurrency-control max-sessions=&quot;1&quot; /&gt;\n    &lt;/security:session-management&gt;      \n    &lt;security:access-denied-handler error-page=&quot;/accessDenied.htm&quot; /&gt;\n&lt;/security:http&gt;\n\n&lt;security:debug/&gt;\n\n&lt;security:authentication-manager alias=&quot;authenticationManager&quot;&gt;\n    &lt;security:authentication-provider ref='ldapAuthProvider' /&gt;\n&lt;/security:authentication-manager&gt;\n\n&lt;bean id=&quot;securityContextRepository&quot; class=&quot;org.springframework.security.web.context.HttpSessionSecurityContextRepository&quot; /&gt;\n\n&lt;bean id=&quot;contextSource&quot; class=&quot;org.springframework.security.ldap.DefaultSpringSecurityContextSource&quot;&gt;\n    &lt;constructor-arg value=&quot;${ldap.ldapUrl}&quot; /&gt;\n&lt;/bean&gt;\n\n&lt;bean id=&quot;customAuthenticationDetailsSource&quot; class=&quot;my.class.path.security.CustomAuthenticationDetailsSource&quot;/&gt;\n\n&lt;bean id=&quot;ldapAuthProvider&quot; class=&quot;org.springframework.security.ldap.authentication.LdapAuthenticationProvider&quot;&gt;\n    &lt;constructor-arg&gt;\n        &lt;bean class=&quot;my.class.path.web.security.CustomLdapBindAuthenticator&quot;&gt;\n            &lt;constructor-arg ref=&quot;contextSource&quot; /&gt;\n            &lt;property name=&quot;userDnPatterns&quot;&gt;\n                &lt;list&gt;\n                    &lt;value&gt;cn={0},${ldap.fullyQualifiedDN}&lt;/value&gt;\n                &lt;/list&gt;\n            &lt;/property&gt;\n        &lt;/bean&gt;\n    &lt;/constructor-arg&gt;\n    &lt;constructor-arg&gt;\n        &lt;bean class=&quot;my.class.path.security.CustomLdapAuthoritiesPopulator&quot; /&gt;\n    &lt;/constructor-arg&gt;\n&lt;/bean&gt;\n</code></pre>\n<p><strong>LoginController.java</strong></p>\n<pre><code>@Controller\npublic class LoginController {\n\n    @RequestMapping(value=&quot;/login.htm&quot;, method = RequestMethod.GET)\n    public String showLogin(Model model,HttpSession httpSession) {\n        httpSession.invalidate();\n        \n        Boolean fromLogin = true;   \n        model.addAttribute(&quot;fromLogin&quot;, fromLogin);\n        \n        return &quot;login&quot;;\n    }\n    \n    @RequestMapping(value=&quot;/loginSuccessful.htm&quot;, method = RequestMethod.GET)\n    public ModelAndView loginAccess(Model model, HttpServletRequest request, HttpServletResponse response, Locale locale, Authentication authen, Principal princ) throws NoSuchMessageException, Exception {\n\n        HttpSessionSecurityContextRepository secRepo = new HttpSessionSecurityContextRepository();\n        Authentication auth = secRepo.loadContext(request).get().getAuthentication();  \n    \n        Authentication authentication = SecurityContextHolder.getContext().getAuthentication();\n        Authentication authentication3 = SecurityContextHolder.getContextHolderStrategy().getContext().getAuthentication();\n}\n</code></pre>\n<p>See that I tried to get the Principal and Authentication in many ways, but always <em>null</em></p>\n<p>Here is the filter registration from logs:</p>\n<pre><code>[INFO] 2023-07-20 16:43:21,906 HttpSecurityBeanDefinitionParser.checkFilterChainOrder:283 -&gt; Checking sorted filter chain: [\nRoot bean: class [org.springframework.security.web.session.DisableEncodeUrlFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 100,\nRoot bean: class [org.springframework.security.web.session.ForceEagerSessionCreationFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 200,\nRoot bean: class [org.springframework.security.web.context.SecurityContextHolderFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 400,\nRoot bean: class [org.springframework.security.web.session.ConcurrentSessionFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 500,\nRoot bean: class [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 600,\nRoot bean: class [org.springframework.security.web.authentication.logout.LogoutFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 1300, &lt;org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter#0&gt;, order = 2100,\nRoot bean: class [org.springframework.security.web.authentication.www.BasicAuthenticationFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 2700,\nRoot bean: class [org.springframework.security.web.savedrequest.RequestCacheAwareFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 2800,\nRoot bean: class [null]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=org.springframework.security.config.http.HttpConfigurationBuilder$SecurityContextHolderAwareRequestFilterBeanFactory#0; factoryMethodName=getBean; initMethodName=null; destroyMethodName=null, order = 2900,\nRoot bean: class [org.springframework.security.web.authentication.AnonymousAuthenticationFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 3200,\nRoot bean: class [org.springframework.security.web.session.SessionManagementFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 3500,\nRoot bean: class [org.springframework.security.web.access.ExceptionTranslationFilter]; scope=; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null, order = 3600, &lt;org.springframework.security.web.access.intercept.FilterSecurityInterceptor#0&gt;, order = 3700]\n</code></pre>\n<p>Security Filter Chain from logs:</p>\n<pre><code>Security filter chain: [\n  DisableEncodeUrlFilter\n  ForceEagerSessionCreationFilter\n  SecurityContextHolderFilter\n  ConcurrentSessionFilter\n  WebAsyncManagerIntegrationFilter\n  LogoutFilter\n  UsernamePasswordAuthenticationFilter\n  BasicAuthenticationFilter\n  RequestCacheAwareFilter\n  SecurityContextHolderAwareRequestFilter\n  AnonymousAuthenticationFilter\n  SessionManagementFilter\n  ExceptionTranslationFilter\n  FilterSecurityInterceptor\n]\n</code></pre>\n<p>All seems to be OK as I see in the debugger, but where is the problem? any help is appreciated</p>\n"},{"tags":["java","classloader"],"comments":[{"owner":{"account_id":969721,"reputation":344508,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"score":0,"creation_date":1440545337,"post_id":32215693,"comment_id":52315120,"body_markdown":"From my experience, the path of the resource is depended on what you give it.  For example `/myfile.txt` will look for `{classpath}/myfile.txt`, but `myfile.txt` will look for `{classpath}/{class package path}/myfile.txt`, where `{class package path}` is the package path of the class used to request it, having said that, it will change depending on HOW you use `getResource`, for example, doing something like `this.getResource(...)` will work as described, but doing something like `SomeClass.class.getResource(...)` will not (if I&#39;m correct, it will work as you&#39;ve described).","body":"From my experience, the path of the resource is depended on what you give it.  For example <code>&#47;myfile.txt</code> will look for <code>{classpath}&#47;myfile.txt</code>, but <code>myfile.txt</code> will look for <code>{classpath}&#47;{class package path}&#47;myfile.txt</code>, where <code>{class package path}</code> is the package path of the class used to request it, having said that, it will change depending on HOW you use <code>getResource</code>, for example, doing something like <code>this.getResource(...)</code> will work as described, but doing something like <code>SomeClass.class.getResource(...)</code> will not (if I&#39;m correct, it will work as you&#39;ve described)."},{"owner":{"account_id":235528,"reputation":12632,"user_id":502399,"accept_rate":67,"display_name":"Tavian Barnes"},"score":0,"creation_date":1440548262,"post_id":32215693,"comment_id":52315927,"body_markdown":"`ClassLoader` resource paths are always absolute, but a leading `/` is **invalid**, not simply **redundant**.","body":"<code>ClassLoader</code> resource paths are always absolute, but a leading <code>&#47;</code> is <b>invalid</b>, not simply <b>redundant</b>."},{"owner":{"account_id":71739,"reputation":307142,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":1,"creation_date":1440553065,"post_id":32215693,"comment_id":52317040,"body_markdown":"@MadProgrammer You&#39;re confusing `Class.getResource()` with `ClassLoader.getResource()`. The latter has no way of knowing about a package name.","body":"@MadProgrammer You&#39;re confusing <code>Class.getResource()</code> with <code>ClassLoader.getResource()</code>. The latter has no way of knowing about a package name."},{"owner":{"account_id":1455702,"reputation":15662,"user_id":1371329,"accept_rate":64,"display_name":"jaco0646"},"score":0,"creation_date":1440773055,"post_id":32215693,"comment_id":52426340,"body_markdown":"@TavianBarnes, can you point to some documentation?","body":"@TavianBarnes, can you point to some documentation?"},{"owner":{"account_id":235528,"reputation":12632,"user_id":502399,"accept_rate":67,"display_name":"Tavian Barnes"},"score":0,"creation_date":1441047941,"post_id":32215693,"comment_id":52511352,"body_markdown":"@jaco0646 I&#39;m not aware of any official location that this is documented, except by painstakingly tracing through the source code.  But the behaviour has been consistent forever.  I&#39;ve written an entire `java.nio.file.Path` abstraction over classpath resources just to make them more sane to work with.","body":"@jaco0646 I&#39;m not aware of any official location that this is documented, except by painstakingly tracing through the source code.  But the behaviour has been consistent forever.  I&#39;ve written an entire <code>java.nio.file.Path</code> abstraction over classpath resources just to make them more sane to work with."}],"answers":[{"tags":[],"owner":{"account_id":2478127,"reputation":19514,"user_id":2158288,"display_name":"ZhongYu"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1440548079,"creation_date":1440547599,"answer_id":32216033,"question_id":32215693,"body_markdown":"Apparently not. \r\n\r\nIt is up to the class loader to interpret `name` in `getResource(name)`. \r\n\r\nExamining the source code of `URLClassLoader`, eventually it calls\r\n\r\n[`new URL(baseURL, name)`](http://docs.oracle.com/javase/7/docs/api/java/net/URL.html#URL%28java.net.URL,%20java.lang.String%29)\r\n\r\nIt is important here whether `name` is absolute or relative\r\n\r\nIt is possible that, for some `baseURL`, absolute `/foo/bar` and relative `foo/bar` have the same effect. In particular, this is always the case for [&quot;jar file URL&quot;](http://docs.oracle.com/javase/7/docs/api/java/net/JarURLConnection.html) in classpaths\r\n\r\n    baseURL:       jar:file:/home/duke/duke.jar!/\r\n\r\n     foo/bar  -&gt;   jar:file:/home/duke/duke.jar!/foo/bar \r\n    /foo/bar  -&gt;   jar:file:/home/duke/duke.jar!/foo/bar ","title":"Classloader resource paths are always absolute?","body":"<p>Apparently not. </p>\n\n<p>It is up to the class loader to interpret <code>name</code> in <code>getResource(name)</code>. </p>\n\n<p>Examining the source code of <code>URLClassLoader</code>, eventually it calls</p>\n\n<p><a href=\"http://docs.oracle.com/javase/7/docs/api/java/net/URL.html#URL%28java.net.URL,%20java.lang.String%29\" rel=\"nofollow\"><code>new URL(baseURL, name)</code></a></p>\n\n<p>It is important here whether <code>name</code> is absolute or relative</p>\n\n<p>It is possible that, for some <code>baseURL</code>, absolute <code>/foo/bar</code> and relative <code>foo/bar</code> have the same effect. In particular, this is always the case for <a href=\"http://docs.oracle.com/javase/7/docs/api/java/net/JarURLConnection.html\" rel=\"nofollow\">\"jar file URL\"</a> in classpaths</p>\n\n<pre><code>baseURL:       jar:file:/home/duke/duke.jar!/\n\n foo/bar  -&gt;   jar:file:/home/duke/duke.jar!/foo/bar \n/foo/bar  -&gt;   jar:file:/home/duke/duke.jar!/foo/bar \n</code></pre>\n"}],"owner":{"account_id":1455702,"reputation":15662,"user_id":1371329,"accept_rate":64,"display_name":"jaco0646"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1232,"favorite_count":0,"down_vote_count":0,"up_vote_count":6,"accepted_answer_id":32216033,"answer_count":1,"score":6,"last_activity_date":1692286408,"creation_date":1440545024,"question_id":32215693,"body_markdown":"In a popular [answer](https://stackoverflow.com/a/6608848/1371329) regarding the difference between class loading methods, Jon Skeet has stated,\r\n&gt; Classloader resource paths are always deemed to be absolute.\r\n\r\nAn even more popular [answer](https://stackoverflow.com/a/676273/1371329) affirms this statement with an example.\r\n\r\n&gt; `ClassLoader.getResourceAsStream(path)` will consider all paths to be\r\n&gt; absolute paths. So calling\r\n&gt; `String.getClassLoader().getResourceAsString(&quot;myfile.txt&quot;)` and\r\n&gt; `String.getClassLoader().getResourceAsString(&quot;/myfile.txt&quot;)` will both\r\n&gt; look for a file in your classpath at the following location:\r\n&gt; `./myfile.txt`.\r\n\r\nDisregarding the fact that the example won&#39;t compile, consensus indicates a leading forward slash is irrelevant to the ClassLoader.\r\n\r\nA simple test shows otherwise.\r\n\r\n`Foo.class.getClassLoader().getResource(&quot;test.xml&quot;)  // file`  &lt;br /&gt;\r\n`Foo.class.getClassLoader().getResource(&quot;/test.xml&quot;)  // null`\r\n\r\nI have simply added the path `files/test.xml` to the classpath of a test project, with a class named `Foo` containing a `main()` method printing out the results of those two calls. What am I missing, since hundreds of people have up-voted the aforementioned answers? Are ClassLoaders absolute, or do they depend on the structure of the input name?\r\n\r\n----------\r\nThis [Oracle blog post](https://web.archive.org/web/20131216061624/https://blogs.oracle.com/sundararajan/entry/understanding_java_class_loading) was helpful to my understanding.\r\n\r\nThe method which ultimately constructs a URL from the resource name is [URLClassPath.JarLoader.checkResource()](https://github.com/openjdk/jdk/blob/jdk-17-ga/src/java.base/share/classes/jdk/internal/loader/URLClassPath.java#L848).","title":"Classloader resource paths are always absolute?","body":"<p>In a popular <a href=\"https://stackoverflow.com/a/6608848/1371329\">answer</a> regarding the difference between class loading methods, Jon Skeet has stated,</p>\n<blockquote>\n<p>Classloader resource paths are always deemed to be absolute.</p>\n</blockquote>\n<p>An even more popular <a href=\"https://stackoverflow.com/a/676273/1371329\">answer</a> affirms this statement with an example.</p>\n<blockquote>\n<p><code>ClassLoader.getResourceAsStream(path)</code> will consider all paths to be\nabsolute paths. So calling\n<code>String.getClassLoader().getResourceAsString(&quot;myfile.txt&quot;)</code> and\n<code>String.getClassLoader().getResourceAsString(&quot;/myfile.txt&quot;)</code> will both\nlook for a file in your classpath at the following location:\n<code>./myfile.txt</code>.</p>\n</blockquote>\n<p>Disregarding the fact that the example won't compile, consensus indicates a leading forward slash is irrelevant to the ClassLoader.</p>\n<p>A simple test shows otherwise.</p>\n<p><code>Foo.class.getClassLoader().getResource(&quot;test.xml&quot;)  // file</code>  <br />\n<code>Foo.class.getClassLoader().getResource(&quot;/test.xml&quot;)  // null</code></p>\n<p>I have simply added the path <code>files/test.xml</code> to the classpath of a test project, with a class named <code>Foo</code> containing a <code>main()</code> method printing out the results of those two calls. What am I missing, since hundreds of people have up-voted the aforementioned answers? Are ClassLoaders absolute, or do they depend on the structure of the input name?</p>\n<hr />\n<p>This <a href=\"https://web.archive.org/web/20131216061624/https://blogs.oracle.com/sundararajan/entry/understanding_java_class_loading\" rel=\"nofollow noreferrer\">Oracle blog post</a> was helpful to my understanding.</p>\n<p>The method which ultimately constructs a URL from the resource name is <a href=\"https://github.com/openjdk/jdk/blob/jdk-17-ga/src/java.base/share/classes/jdk/internal/loader/URLClassPath.java#L848\" rel=\"nofollow noreferrer\">URLClassPath.JarLoader.checkResource()</a>.</p>\n"},{"tags":["java","spring","spring-boot"],"comments":[{"owner":{"account_id":8312409,"reputation":956,"user_id":6247003,"accept_rate":20,"display_name":"ajax992"},"score":1,"creation_date":1692283815,"post_id":76922648,"comment_id":135604908,"body_markdown":"An ApplicationContext is not an instance of a Spring Boot app. Nor is the @SpringBootApplication annotation, which configures classpath scanning and dependency injection. You are creating an object which does nothing and the main method completes, exiting the program. You need to actually run a Spring app, see this example: https://docs.spring.io/spring-boot/docs/current/api/org/springframework/boot/SpringApplication.html","body":"An ApplicationContext is not an instance of a Spring Boot app. Nor is the @SpringBootApplication annotation, which configures classpath scanning and dependency injection. You are creating an object which does nothing and the main method completes, exiting the program. You need to actually run a Spring app, see this example: <a href=\"https://docs.spring.io/spring-boot/docs/current/api/org/springframework/boot/SpringApplication.html\" rel=\"nofollow noreferrer\">docs.spring.io/spring-boot/docs/current/api/org/springframew&zwnj;&#8203;ork/&hellip;</a>"}],"answers":[{"tags":[],"owner":{"account_id":3097035,"reputation":1105,"user_id":2622026,"accept_rate":71,"display_name":"hermit"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1692285654,"creation_date":1692285654,"answer_id":76922913,"question_id":76922648,"body_markdown":"As mentioned in the comment, you need to run the spring boot app in this manner.\r\n\r\n    @SpringBootApplication\r\n    public class WebSpringDemoApplication {\r\n        public static void main(String[] args) {\r\n            SpringApplication.run(MyApplication.class, args);\r\n        }\r\n    }\r\n\r\nIf you want to run additional logic after startup, you can create a application listener class like this and place the logic there:\r\n\r\n    public class MyApplicationListener implements ApplicationListener&lt;ApplicationReadyEvent&gt; {\r\n        @Override\r\n        public void onApplicationEvent(ApplicationReadyEvent event) {\r\n            // Your additional logic\r\n        }\r\n    }","title":"Spring Boot Application Auto Shut Down","body":"<p>As mentioned in the comment, you need to run the spring boot app in this manner.</p>\n<pre><code>@SpringBootApplication\npublic class WebSpringDemoApplication {\n    public static void main(String[] args) {\n        SpringApplication.run(MyApplication.class, args);\n    }\n}\n</code></pre>\n<p>If you want to run additional logic after startup, you can create a application listener class like this and place the logic there:</p>\n<pre><code>public class MyApplicationListener implements ApplicationListener&lt;ApplicationReadyEvent&gt; {\n    @Override\n    public void onApplicationEvent(ApplicationReadyEvent event) {\n        // Your additional logic\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":8312409,"reputation":956,"user_id":6247003,"accept_rate":20,"display_name":"ajax992"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1692286011,"creation_date":1692286011,"answer_id":76922969,"question_id":76922648,"body_markdown":"Per my comment, your application is exiting because you are not explicitly starting a Spring Application. The idiomatic way of doing this is using the static method [SpringApplication.run][1].\r\n\r\nAn ApplicationContext is not an instance of a Spring app, but is still a core component of the IoC framework. It&#39;s used internally by Spring to manage bean lifecycles, autowire dependencies, provide scheduling functionality, etc. Only in advanced use cases would I advise creating or modifying custom `ApplicationContext` instances, as Spring manages this class for the developer.\r\n\r\nLast word of advice, the XML syntax is typically deprecated in favor of annotation based bean registration. In practice, this is easier to read and understand. Here&#39;s an example:\r\n\r\n\r\n    @SpringBootApplication\r\n    public class WebSpringDemoApplication {\r\n\r\n\t    public static void main(String[] args) {\r\n\t\t    SpringApplication.run(WebSpringDemoApplication.class, args);\r\n\t    }\r\n\r\n        @Bean\r\n        Cat createCat() {\r\n            return new Cat();\r\n        }\r\n    }\r\n\r\n    @Component\r\n    class Zoo {\r\n        private Cat cat;\r\n        \r\n        public Zoo(Cat cat) { // an instance of Cat is autowired here!\r\n            this.cat = cat;\r\n        }\r\n    }\r\n\r\n\r\n  [1]: https://docs.spring.io/spring-boot/docs/current/api/org/springframework/boot/SpringApplication.html#run(java.lang.Class%5B%5D,java.lang.String%5B%5D)","title":"Spring Boot Application Auto Shut Down","body":"<p>Per my comment, your application is exiting because you are not explicitly starting a Spring Application. The idiomatic way of doing this is using the static method <a href=\"https://docs.spring.io/spring-boot/docs/current/api/org/springframework/boot/SpringApplication.html#run(java.lang.Class%5B%5D,java.lang.String%5B%5D)\" rel=\"nofollow noreferrer\">SpringApplication.run</a>.</p>\n<p>An ApplicationContext is not an instance of a Spring app, but is still a core component of the IoC framework. It's used internally by Spring to manage bean lifecycles, autowire dependencies, provide scheduling functionality, etc. Only in advanced use cases would I advise creating or modifying custom <code>ApplicationContext</code> instances, as Spring manages this class for the developer.</p>\n<p>Last word of advice, the XML syntax is typically deprecated in favor of annotation based bean registration. In practice, this is easier to read and understand. Here's an example:</p>\n<pre><code>@SpringBootApplication\npublic class WebSpringDemoApplication {\n\n    public static void main(String[] args) {\n        SpringApplication.run(WebSpringDemoApplication.class, args);\n    }\n\n    @Bean\n    Cat createCat() {\n        return new Cat();\n    }\n}\n\n@Component\nclass Zoo {\n    private Cat cat;\n    \n    public Zoo(Cat cat) { // an instance of Cat is autowired here!\n        this.cat = cat;\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":24539860,"reputation":7,"user_id":18450349,"display_name":"ducnm19"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":56,"favorite_count":0,"down_vote_count":3,"up_vote_count":1,"answer_count":2,"score":-2,"last_activity_date":1692286011,"creation_date":1692283648,"question_id":76922648,"body_markdown":"I have this really simple main class in a Spring Boot Demo\r\n\r\n```\r\n@SpringBootApplication\r\npublic class WebSpringDemoApplication {\r\n    public static void main(String[] args) {\r\n        ClassPathXmlApplicationContext applicationContext =\r\n                new ClassPathXmlApplicationContext(&quot;spring-config.xml&quot;);\r\n    }\r\n}\r\n```\r\nThis is my spring-config xml file(just to make a bean):\r\n\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;\r\n       xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n       xsi:schemaLocation=&quot;http://www.springframework.org/schema/beans\r\n                           http://www.springframework.org/schema/beans/spring-beans.xsd&quot;&gt;\r\n    &lt;bean id=&quot;myBean&quot; class=&quot;com.example.webspringdemo.Cat&quot; init-method=&quot;init&quot; destroy-method=&quot;destroy&quot; /&gt;\r\n&lt;/beans&gt;\r\n```\r\n\r\nWhen I start the main method, everything works fine, but it seems like it didn&#39;t make any web-related thing, and it shut down automatically. I was expecting it to run continously (until I manually stop by using IDE or use the close() method) on port 8080 so I can add further more complicated code. But the program just shut down after it makes the bean. Like here is all the output(it didn&#39;t even generate the &quot;info&quot; lines):\r\n\r\n```\r\nInit\r\n\r\nProcess finished with exit code 0\r\n```\r\nI am using IntelliJ.","title":"Spring Boot Application Auto Shut Down","body":"<p>I have this really simple main class in a Spring Boot Demo</p>\n<pre><code>@SpringBootApplication\npublic class WebSpringDemoApplication {\n    public static void main(String[] args) {\n        ClassPathXmlApplicationContext applicationContext =\n                new ClassPathXmlApplicationContext(&quot;spring-config.xml&quot;);\n    }\n}\n</code></pre>\n<p>This is my spring-config xml file(just to make a bean):</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;\n       xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n       xsi:schemaLocation=&quot;http://www.springframework.org/schema/beans\n                           http://www.springframework.org/schema/beans/spring-beans.xsd&quot;&gt;\n    &lt;bean id=&quot;myBean&quot; class=&quot;com.example.webspringdemo.Cat&quot; init-method=&quot;init&quot; destroy-method=&quot;destroy&quot; /&gt;\n&lt;/beans&gt;\n</code></pre>\n<p>When I start the main method, everything works fine, but it seems like it didn't make any web-related thing, and it shut down automatically. I was expecting it to run continously (until I manually stop by using IDE or use the close() method) on port 8080 so I can add further more complicated code. But the program just shut down after it makes the bean. Like here is all the output(it didn't even generate the &quot;info&quot; lines):</p>\n<pre><code>Init\n\nProcess finished with exit code 0\n</code></pre>\n<p>I am using IntelliJ.</p>\n"},{"tags":["java","xml","type-conversion","jaxb"],"answers":[{"tags":[],"owner":{"account_id":29176687,"reputation":322,"user_id":22351796,"display_name":"Karsten"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1692285153,"creation_date":1692283930,"answer_id":76922694,"question_id":76922202,"body_markdown":"You&#39;re getting the error since your @XmlRootElement misses the XML namespace (xmlns) but since your XML documents contains a lot of child elements with different namespaces I doubt adding this would be enough. Usually you would start with the XML schema of BPMN and generate Java classes out of it.\r\n\r\nI think another option in this special case would be not to use JAXB but the [Camunda Model API][1].\r\n\r\nAnother thing: Do yourself a favor and never convert between XML documents, which come as byte array usually, and String using `new String()` or `String.getBytes()`. If you do this without watching the character set within the XML declaration of your document, or UTF-8 if its missing, you&#39;ll get mangled characters sooner or later. Every conversion between byte [] and String either assumes a character set or encoding (default platform encoding) or expects it as a parameter.\r\n\r\n\r\n  [1]: https://docs.camunda.org/manual/7.19/user-guide/model-api/bpmn-model-api/read-a-model/","title":"unmarshall string to java object using JAXB","body":"<p>You're getting the error since your @XmlRootElement misses the XML namespace (xmlns) but since your XML documents contains a lot of child elements with different namespaces I doubt adding this would be enough. Usually you would start with the XML schema of BPMN and generate Java classes out of it.</p>\n<p>I think another option in this special case would be not to use JAXB but the <a href=\"https://docs.camunda.org/manual/7.19/user-guide/model-api/bpmn-model-api/read-a-model/\" rel=\"nofollow noreferrer\">Camunda Model API</a>.</p>\n<p>Another thing: Do yourself a favor and never convert between XML documents, which come as byte array usually, and String using <code>new String()</code> or <code>String.getBytes()</code>. If you do this without watching the character set within the XML declaration of your document, or UTF-8 if its missing, you'll get mangled characters sooner or later. Every conversion between byte [] and String either assumes a character set or encoding (default platform encoding) or expects it as a parameter.</p>\n"}],"owner":{"account_id":21845332,"reputation":59,"user_id":16138258,"display_name":"Matin Parsapour"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":82,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1692285153,"creation_date":1692280497,"question_id":76922202,"body_markdown":"I&#39;m using JAXB unmarshaller to convert xml string to java object, however I get an error that I don&#39;t know what does that mean\r\n```\r\n\r\nException in thread &quot;main&quot; jakarta.xml.bind.UnmarshalException: unexpected element (uri:&quot;http://www.omg.org/spec/BPMN/20100524/MODEL&quot;, local:&quot;definitions&quot;). Expected elements are &lt;{}bpmn:definitions&gt;\r\n\tat org.glassfish.jaxb.runtime.v2.runtime.unmarshaller.UnmarshallingContext.handleEvent(UnmarshallingContext.java:701)\r\n\tat org.glassfish.jaxb.runtime.v2.runtime.unmarshaller.Loader.reportError(Loader.java:230)\r\n\tat org.glassfish.jaxb.runtime.v2.runtime.unmarshaller.Loader.reportError(Loader.java:225)\r\n\tat org.glassfish.jaxb.runtime.v2.runtime.unmarshaller.Loader.reportUnexpectedChildElement(Loader.java:92)\r\n\tat org.glassfish.jaxb.runtime.v2.runtime.unmarshaller.UnmarshallingContext$DefaultRootLoader.childElement(UnmarshallingContext.java:1106)\r\n\tat org.glassfish.jaxb.runtime.v2.runtime.unmarshaller.UnmarshallingContext._startElement(UnmarshallingContext.java:531)\r\n\tat org.glassfish.jaxb.runtime.v2.runtime.unmarshaller.UnmarshallingContext.startElement(UnmarshallingContext.java:513)\r\n\tat org.glassfish.jaxb.runtime.v2.runtime.unmarshaller.SAXConnector.startElement(SAXConnector.java:137)\r\n\tat java.xml/com.sun.org.apache.xerces.internal.parsers.AbstractSAXParser.startElement(AbstractSAXParser.java:518)\r\n\tat java.xml/com.sun.org.apache.xerces.internal.impl.XMLNSDocumentScannerImpl.scanStartElement(XMLNSDocumentScannerImpl.java:374)\r\n\tat java.xml/com.sun.org.apache.xerces.internal.impl.XMLNSDocumentScannerImpl$NSContentDriver.scanRootElementHook(XMLNSDocumentScannerImpl.java:613)\r\n\tat java.xml/com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl$FragmentContentDriver.next(XMLDocumentFragmentScannerImpl.java:3079)\r\n```\r\nThe xml I&#39;m using is something like this\r\n```\r\n&lt;bpmn:definitions xmlns:bpmn=&quot;http://www.omg.org/spec/BPMN/20100524/MODEL&quot; xmlns:bpmndi=&quot;http://www.omg.org/spec/BPMN/20100524/DI&quot; xmlns:dc=&quot;http://www.omg.org/spec/DD/20100524/DC&quot; xmlns:camunda=&quot;http://camunda.org/schema/1.0/bpmn&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xmlns:di=&quot;http://www.omg.org/spec/DD/20100524/DI&quot; xmlns:modeler=&quot;http://camunda.org/schema/modeler/1.0&quot; id=&quot;Definitions_1xqdoqa&quot; targetNamespace=&quot;http://bpmn.io/schema/bpmn&quot; exporter=&quot;Camunda Modeler&quot; exporterVersion=&quot;5.13.0&quot; modeler:executionPlatform=&quot;Camunda Platform&quot; modeler:executionPlatformVersion=&quot;7.19.0&quot;&gt;\r\n  &lt;bpmn:process id=&quot;Process2&quot; isExecutable=&quot;true&quot; camunda:historyTimeToLive=&quot;1&quot;&gt;\r\n    &lt;bpmn:userTask id=&quot;Activity_0r63cqs&quot;&gt;\r\n      &lt;bpmn:incoming&gt;Flow02&lt;/bpmn:incoming&gt;\r\n      &lt;bpmn:outgoing&gt;Flow_0xsmp8q&lt;/bpmn:outgoing&gt;\r\n    &lt;/bpmn:userTask&gt;\r\n    &lt;bpmn:userTask id=&quot;Activity_0e7h96z&quot;&gt;\r\n      &lt;bpmn:extensionElements&gt;\r\n        &lt;camunda:taskListener class=&quot;ir.edmp.camunda.listeners.EDMPTaskCreateListener&quot; event=&quot;create&quot;&gt;\r\n          &lt;camunda:field name=&quot;assigneeType&quot;&gt;\r\n            &lt;camunda:string&gt;Static&lt;/camunda:string&gt;\r\n          &lt;/camunda:field&gt;\r\n          &lt;camunda:field name=&quot;assigneeApproach&quot;&gt;\r\n            &lt;camunda:string&gt;admin_platform&lt;/camunda:string&gt;\r\n          &lt;/camunda:field&gt;\r\n        &lt;/camunda:taskListener&gt;\r\n....\r\n```\r\nMy java class is BPMNDefinition\r\n```\r\n@XmlRootElement(name = &quot;bpmn:definitions&quot;)\r\npublic class BPMNDefinitions {\r\n    private String bPMN;\r\n    private String xPMNDI;\r\n    private String dC;\r\n    private String camunda;\r\n    private String xSI;\r\n    private String dI;\r\n    private String modeler;\r\n    private String id;\r\n    private String targetNameSpace;\r\n    private String exporter;\r\n    private String exporterVersion;\r\n    private String executionPlatform;\r\n    private String executionPlatformVersion;\r\n\r\n    public String getbPMN() {\r\n        return bPMN;\r\n    }\r\n\r\n    @XmlAttribute\r\n    public void setbPMN(String bPMN) {\r\n        this.bPMN = bPMN;\r\n    }\r\n\r\n    public String getxPMNDI() {\r\n        return xPMNDI;\r\n    }\r\n    @XmlAttribute\r\n    public void setxPMNDI(String xPMNDI) {\r\n        this.xPMNDI = xPMNDI;\r\n    }\r\n\r\n    public String getdC() {\r\n        return dC;\r\n    }\r\n    @XmlAttribute\r\n    public void setdC(String dC) {\r\n        this.dC = dC;\r\n    }\r\n\r\n    public String getCamunda() {\r\n        return camunda;\r\n    }\r\n    @XmlAttribute\r\n    public void setCamunda(String camunda) {\r\n        this.camunda = camunda;\r\n    }\r\n\r\n    public String getxSI() {\r\n        return xSI;\r\n    }\r\n    @XmlAttribute\r\n    public void setxSI(String xSI) {\r\n        this.xSI = xSI;\r\n    }\r\n\r\n    public String getdI() {\r\n        return dI;\r\n    }\r\n    @XmlAttribute\r\n    public void setdI(String dI) {\r\n        this.dI = dI;\r\n    }\r\n\r\n    public String getModeler() {\r\n        return modeler;\r\n    }\r\n    @XmlAttribute\r\n    public void setModeler(String modeler) {\r\n        this.modeler = modeler;\r\n    }\r\n\r\n    public String getId() {\r\n        return id;\r\n    }\r\n    @XmlAttribute\r\n    public void setId(String id) {\r\n        this.id = id;\r\n    }\r\n\r\n    public String getTargetNameSpace() {\r\n        return targetNameSpace;\r\n    }\r\n    @XmlAttribute\r\n    public void setTargetNameSpace(String targetNameSpace) {\r\n        this.targetNameSpace = targetNameSpace;\r\n    }\r\n\r\n    public String getExporter() {\r\n        return exporter;\r\n    }\r\n    @XmlAttribute\r\n    public void setExporter(String exporter) {\r\n        this.exporter = exporter;\r\n    }\r\n\r\n    public String getExporterVersion() {\r\n        return exporterVersion;\r\n    }\r\n    @XmlAttribute\r\n    public void setExporterVersion(String exporterVersion) {\r\n        this.exporterVersion = exporterVersion;\r\n    }\r\n\r\n    public String getExecutionPlatform() {\r\n        return executionPlatform;\r\n    }\r\n    @XmlAttribute\r\n    public void setExecutionPlatform(String executionPlatform) {\r\n        this.executionPlatform = executionPlatform;\r\n    }\r\n\r\n    public String getExecutionPlatformVersion() {\r\n        return executionPlatformVersion;\r\n    }\r\n    @XmlAttribute\r\n    public void setExecutionPlatformVersion(String executionPlatformVersion) {\r\n        this.executionPlatformVersion = executionPlatformVersion;\r\n    }\r\n}\r\n```\r\nAnd this is how I&#39;m unmarshalling the string\r\n```\r\n    public static void main(String[] args) throws IOException, ParseException, JAXBException {\r\n        HttpGet getRequest = new HttpGet(&quot;http://localhost:8081/engine-rest/process-definition/key/Process2/xml&quot;);\r\n        CloseableHttpClient client = HttpClientBuilder.create().build();\r\n        CloseableHttpResponse response = client.execute(getRequest);\r\n        JSONObject firstTaskFlows = new JSONObject(EntityUtils.toString(response.getEntity()));\r\n        String xmlString = firstTaskFlows.get(&quot;bpmn20Xml&quot;).toString();\r\n        JAXBContext jaxbContext = JAXBContext.newInstance(BPMNDefinitions.class);\r\n        StringReader reader = new StringReader(xmlString);\r\n        Unmarshaller jaxbUnmarshaller = jaxbContext.createUnmarshaller();\r\n        BPMNDefinitions customer = (BPMNDefinitions) jaxbUnmarshaller.unmarshal(reader);\r\n    }\r\n```\r\nBy the way, I&#39;m trying to get xml response from camunda (BPMN Engine) and convert it to java object","title":"unmarshall string to java object using JAXB","body":"<p>I'm using JAXB unmarshaller to convert xml string to java object, however I get an error that I don't know what does that mean</p>\n<pre><code>\nException in thread &quot;main&quot; jakarta.xml.bind.UnmarshalException: unexpected element (uri:&quot;http://www.omg.org/spec/BPMN/20100524/MODEL&quot;, local:&quot;definitions&quot;). Expected elements are &lt;{}bpmn:definitions&gt;\n    at org.glassfish.jaxb.runtime.v2.runtime.unmarshaller.UnmarshallingContext.handleEvent(UnmarshallingContext.java:701)\n    at org.glassfish.jaxb.runtime.v2.runtime.unmarshaller.Loader.reportError(Loader.java:230)\n    at org.glassfish.jaxb.runtime.v2.runtime.unmarshaller.Loader.reportError(Loader.java:225)\n    at org.glassfish.jaxb.runtime.v2.runtime.unmarshaller.Loader.reportUnexpectedChildElement(Loader.java:92)\n    at org.glassfish.jaxb.runtime.v2.runtime.unmarshaller.UnmarshallingContext$DefaultRootLoader.childElement(UnmarshallingContext.java:1106)\n    at org.glassfish.jaxb.runtime.v2.runtime.unmarshaller.UnmarshallingContext._startElement(UnmarshallingContext.java:531)\n    at org.glassfish.jaxb.runtime.v2.runtime.unmarshaller.UnmarshallingContext.startElement(UnmarshallingContext.java:513)\n    at org.glassfish.jaxb.runtime.v2.runtime.unmarshaller.SAXConnector.startElement(SAXConnector.java:137)\n    at java.xml/com.sun.org.apache.xerces.internal.parsers.AbstractSAXParser.startElement(AbstractSAXParser.java:518)\n    at java.xml/com.sun.org.apache.xerces.internal.impl.XMLNSDocumentScannerImpl.scanStartElement(XMLNSDocumentScannerImpl.java:374)\n    at java.xml/com.sun.org.apache.xerces.internal.impl.XMLNSDocumentScannerImpl$NSContentDriver.scanRootElementHook(XMLNSDocumentScannerImpl.java:613)\n    at java.xml/com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl$FragmentContentDriver.next(XMLDocumentFragmentScannerImpl.java:3079)\n</code></pre>\n<p>The xml I'm using is something like this</p>\n<pre><code>&lt;bpmn:definitions xmlns:bpmn=&quot;http://www.omg.org/spec/BPMN/20100524/MODEL&quot; xmlns:bpmndi=&quot;http://www.omg.org/spec/BPMN/20100524/DI&quot; xmlns:dc=&quot;http://www.omg.org/spec/DD/20100524/DC&quot; xmlns:camunda=&quot;http://camunda.org/schema/1.0/bpmn&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xmlns:di=&quot;http://www.omg.org/spec/DD/20100524/DI&quot; xmlns:modeler=&quot;http://camunda.org/schema/modeler/1.0&quot; id=&quot;Definitions_1xqdoqa&quot; targetNamespace=&quot;http://bpmn.io/schema/bpmn&quot; exporter=&quot;Camunda Modeler&quot; exporterVersion=&quot;5.13.0&quot; modeler:executionPlatform=&quot;Camunda Platform&quot; modeler:executionPlatformVersion=&quot;7.19.0&quot;&gt;\n  &lt;bpmn:process id=&quot;Process2&quot; isExecutable=&quot;true&quot; camunda:historyTimeToLive=&quot;1&quot;&gt;\n    &lt;bpmn:userTask id=&quot;Activity_0r63cqs&quot;&gt;\n      &lt;bpmn:incoming&gt;Flow02&lt;/bpmn:incoming&gt;\n      &lt;bpmn:outgoing&gt;Flow_0xsmp8q&lt;/bpmn:outgoing&gt;\n    &lt;/bpmn:userTask&gt;\n    &lt;bpmn:userTask id=&quot;Activity_0e7h96z&quot;&gt;\n      &lt;bpmn:extensionElements&gt;\n        &lt;camunda:taskListener class=&quot;ir.edmp.camunda.listeners.EDMPTaskCreateListener&quot; event=&quot;create&quot;&gt;\n          &lt;camunda:field name=&quot;assigneeType&quot;&gt;\n            &lt;camunda:string&gt;Static&lt;/camunda:string&gt;\n          &lt;/camunda:field&gt;\n          &lt;camunda:field name=&quot;assigneeApproach&quot;&gt;\n            &lt;camunda:string&gt;admin_platform&lt;/camunda:string&gt;\n          &lt;/camunda:field&gt;\n        &lt;/camunda:taskListener&gt;\n....\n</code></pre>\n<p>My java class is BPMNDefinition</p>\n<pre><code>@XmlRootElement(name = &quot;bpmn:definitions&quot;)\npublic class BPMNDefinitions {\n    private String bPMN;\n    private String xPMNDI;\n    private String dC;\n    private String camunda;\n    private String xSI;\n    private String dI;\n    private String modeler;\n    private String id;\n    private String targetNameSpace;\n    private String exporter;\n    private String exporterVersion;\n    private String executionPlatform;\n    private String executionPlatformVersion;\n\n    public String getbPMN() {\n        return bPMN;\n    }\n\n    @XmlAttribute\n    public void setbPMN(String bPMN) {\n        this.bPMN = bPMN;\n    }\n\n    public String getxPMNDI() {\n        return xPMNDI;\n    }\n    @XmlAttribute\n    public void setxPMNDI(String xPMNDI) {\n        this.xPMNDI = xPMNDI;\n    }\n\n    public String getdC() {\n        return dC;\n    }\n    @XmlAttribute\n    public void setdC(String dC) {\n        this.dC = dC;\n    }\n\n    public String getCamunda() {\n        return camunda;\n    }\n    @XmlAttribute\n    public void setCamunda(String camunda) {\n        this.camunda = camunda;\n    }\n\n    public String getxSI() {\n        return xSI;\n    }\n    @XmlAttribute\n    public void setxSI(String xSI) {\n        this.xSI = xSI;\n    }\n\n    public String getdI() {\n        return dI;\n    }\n    @XmlAttribute\n    public void setdI(String dI) {\n        this.dI = dI;\n    }\n\n    public String getModeler() {\n        return modeler;\n    }\n    @XmlAttribute\n    public void setModeler(String modeler) {\n        this.modeler = modeler;\n    }\n\n    public String getId() {\n        return id;\n    }\n    @XmlAttribute\n    public void setId(String id) {\n        this.id = id;\n    }\n\n    public String getTargetNameSpace() {\n        return targetNameSpace;\n    }\n    @XmlAttribute\n    public void setTargetNameSpace(String targetNameSpace) {\n        this.targetNameSpace = targetNameSpace;\n    }\n\n    public String getExporter() {\n        return exporter;\n    }\n    @XmlAttribute\n    public void setExporter(String exporter) {\n        this.exporter = exporter;\n    }\n\n    public String getExporterVersion() {\n        return exporterVersion;\n    }\n    @XmlAttribute\n    public void setExporterVersion(String exporterVersion) {\n        this.exporterVersion = exporterVersion;\n    }\n\n    public String getExecutionPlatform() {\n        return executionPlatform;\n    }\n    @XmlAttribute\n    public void setExecutionPlatform(String executionPlatform) {\n        this.executionPlatform = executionPlatform;\n    }\n\n    public String getExecutionPlatformVersion() {\n        return executionPlatformVersion;\n    }\n    @XmlAttribute\n    public void setExecutionPlatformVersion(String executionPlatformVersion) {\n        this.executionPlatformVersion = executionPlatformVersion;\n    }\n}\n</code></pre>\n<p>And this is how I'm unmarshalling the string</p>\n<pre><code>    public static void main(String[] args) throws IOException, ParseException, JAXBException {\n        HttpGet getRequest = new HttpGet(&quot;http://localhost:8081/engine-rest/process-definition/key/Process2/xml&quot;);\n        CloseableHttpClient client = HttpClientBuilder.create().build();\n        CloseableHttpResponse response = client.execute(getRequest);\n        JSONObject firstTaskFlows = new JSONObject(EntityUtils.toString(response.getEntity()));\n        String xmlString = firstTaskFlows.get(&quot;bpmn20Xml&quot;).toString();\n        JAXBContext jaxbContext = JAXBContext.newInstance(BPMNDefinitions.class);\n        StringReader reader = new StringReader(xmlString);\n        Unmarshaller jaxbUnmarshaller = jaxbContext.createUnmarshaller();\n        BPMNDefinitions customer = (BPMNDefinitions) jaxbUnmarshaller.unmarshal(reader);\n    }\n</code></pre>\n<p>By the way, I'm trying to get xml response from camunda (BPMN Engine) and convert it to java object</p>\n"},{"tags":["java","gradle","jar"],"answers":[{"tags":[],"owner":{"account_id":14095561,"reputation":1426,"user_id":10182449,"display_name":"PythonLearner"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1578048625,"creation_date":1578048625,"answer_id":59577231,"question_id":59577107,"body_markdown":"You can try with the following changes.\r\n\r\n    jar{\r\n       destinationDir = file(&quot;$rootDir/someDir&quot;)\r\n    }","title":"How to change jar output directory in Gradle?","body":"<p>You can try with the following changes.</p>\n\n<pre><code>jar{\n   destinationDir = file(\"$rootDir/someDir\")\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":19125636,"reputation":7406,"user_id":13968673,"display_name":"Михаил Нафталь"},"down_vote_count":0,"up_vote_count":10,"is_accepted":false,"score":10,"last_activity_date":1597838405,"creation_date":1597838405,"answer_id":63486509,"question_id":59577107,"body_markdown":"For Gradle 5.1+:\r\n```kotlin\r\njar {\r\n    destinationDirectory.set(file(&quot;$buildDir/someDir&quot;))\r\n}\r\n```","title":"How to change jar output directory in Gradle?","body":"<p>For Gradle 5.1+:</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>jar {\n    destinationDirectory.set(file(&quot;$buildDir/someDir&quot;))\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":282870,"reputation":3742,"user_id":580041,"accept_rate":91,"display_name":"Goldorak84"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1692285090,"creation_date":1692285090,"answer_id":76922830,"question_id":59577107,"body_markdown":"I use this syntax for Kotlin DSL (`build.gradle.kts`) \r\n\r\n\r\n    tasks.withType&lt;Jar&gt; {\r\n        destinationDirectory = File(&quot;$rootDir/someDir&quot;)\r\n    }","title":"How to change jar output directory in Gradle?","body":"<p>I use this syntax for Kotlin DSL (<code>build.gradle.kts</code>)</p>\n<pre><code>tasks.withType&lt;Jar&gt; {\n    destinationDirectory = File(&quot;$rootDir/someDir&quot;)\n}\n</code></pre>\n"}],"owner":{"account_id":17161441,"reputation":41,"user_id":12420994,"display_name":"Grantis"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":9689,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"answer_count":3,"score":4,"last_activity_date":1692285090,"creation_date":1578048086,"question_id":59577107,"body_markdown":"I was wondering if it is possible to change jar output file into other directory like on desktop or somewhere else? If so, how do I do that?\r\nThank you.","title":"How to change jar output directory in Gradle?","body":"<p>I was wondering if it is possible to change jar output file into other directory like on desktop or somewhere else? If so, how do I do that?\nThank you.</p>\n"},{"tags":["java","javafx","mssql-jdbc","jlink"],"comments":[{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1692285942,"post_id":76922817,"comment_id":135605453,"body_markdown":"Please state whether you have that driver as a jmod or a jar","body":"Please state whether you have that driver as a jmod or a jar"},{"owner":{"account_id":8532578,"reputation":39898,"user_id":6395627,"display_name":"Slaw"},"score":0,"creation_date":1692287399,"post_id":76922817,"comment_id":135605794,"body_markdown":"If you&#39;re willing to use `jpackage`, check out [my answer to a similar question](https://stackoverflow.com/a/76550092/6395627). However, I&#39;m not sure what that solution would look like in Maven.","body":"If you&#39;re willing to use <code>jpackage</code>, check out <a href=\"https://stackoverflow.com/a/76550092/6395627\">my answer to a similar question</a>. However, I&#39;m not sure what that solution would look like in Maven."},{"owner":{"account_id":8532578,"reputation":39898,"user_id":6395627,"display_name":"Slaw"},"score":1,"creation_date":1692288075,"post_id":76922817,"comment_id":135605935,"body_markdown":"@g00se Note whether the driver is packaged in a JMOD file or a JAR file is largely irrelevant, at least with regards to the specified error. The important thing is whether or not the dependency has a `module-info` descriptor, and from looking at [the source repository](https://github.com/microsoft/mssql-jdbc/tree/main), it doesn&#39;t look like mssql-jdbc has one. It does appear to have Gradle set the `Automatic-Module-Name` manifest attribute, which is further evidence of no `module-info` descriptor, and which won&#39;t help here because `jlink` can only work with _explicit_ modules.","body":"@g00se Note whether the driver is packaged in a JMOD file or a JAR file is largely irrelevant, at least with regards to the specified error. The important thing is whether or not the dependency has a <code>module-info</code> descriptor, and from looking at <a href=\"https://github.com/microsoft/mssql-jdbc/tree/main\" rel=\"nofollow noreferrer\">the source repository</a>, it doesn&#39;t look like mssql-jdbc has one. It does appear to have Gradle set the <code>Automatic-Module-Name</code> manifest attribute, which is further evidence of no <code>module-info</code> descriptor, and which won&#39;t help here because <code>jlink</code> can only work with <i>explicit</i> modules."},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1692288998,"post_id":76922817,"comment_id":135606127,"body_markdown":"What about repackaging it *as* a module?","body":"What about repackaging it <i>as</i> a module?"},{"owner":{"account_id":1180113,"reputation":152325,"user_id":1155209,"display_name":"jewelsea"},"score":0,"creation_date":1692291848,"post_id":76922817,"comment_id":135606718,"body_markdown":"@g00se repackaging as a module may work or may not.  Not all code will just work that way. If it already works as an automatic module repackaging will probably work.  Maven tools like moditect do that.  The badass jlink gradle plugin  does some kind of weird shenanigans to allow non modular code to be packaged with a distribution primarily built by jlink (if might do it through not linking them or repackaging them as a module).  JPackageScriptFX uses jpackage maven and scripts to package with unlinked automatic modules.  I haven’t used any of the above tools.","body":"@g00se repackaging as a module may work or may not.  Not all code will just work that way. If it already works as an automatic module repackaging will probably work.  Maven tools like moditect do that.  The badass jlink gradle plugin  does some kind of weird shenanigans to allow non modular code to be packaged with a distribution primarily built by jlink (if might do it through not linking them or repackaging them as a module).  JPackageScriptFX uses jpackage maven and scripts to package with unlinked automatic modules.  I haven’t used any of the above tools."},{"owner":{"account_id":8532578,"reputation":39898,"user_id":6395627,"display_name":"Slaw"},"score":0,"creation_date":1692296044,"post_id":76922817,"comment_id":135607512,"body_markdown":"@g00se It&#39;s possible. There are tools that do this, as pointed out by jewelsea, but I&#39;m not exactly sure how they work. Though I suspect they rely on [jdeps](https://docs.oracle.com/en/java/javase/20/docs/specs/man/jdeps.html).","body":"@g00se It&#39;s possible. There are tools that do this, as pointed out by jewelsea, but I&#39;m not exactly sure how they work. Though I suspect they rely on <a href=\"https://docs.oracle.com/en/java/javase/20/docs/specs/man/jdeps.html\" rel=\"nofollow noreferrer\">jdeps</a>."},{"owner":{"account_id":12164094,"reputation":13,"user_id":8880886,"display_name":"Etarus"},"score":1,"creation_date":1692303707,"post_id":76922817,"comment_id":135608826,"body_markdown":"@Slaw, you were right. I created a project on Gradle, added the mssql dependency, and built the custom image without any problems. That&#39;s very strange… And maven is more comfortable for me.","body":"@Slaw, you were right. I created a project on Gradle, added the mssql dependency, and built the custom image without any problems. That&#39;s very strange… And maven is more comfortable for me."},{"owner":{"account_id":1180113,"reputation":152325,"user_id":1155209,"display_name":"jewelsea"},"score":0,"creation_date":1692315557,"post_id":76922817,"comment_id":135610250,"body_markdown":"@ЭдуардАртюх yeah, the badass gradle plugin offers more functionality around this than the javafx-maven-plugin.  It isn’t a core maven limitation, the javafx-maven-plugin could probably be rewritten to do what the badass jlink plugin does, but it would be quite difficult and a lot of work I guess.  One traffic is the badass gradle jlink plugin documentation is more complex (and you have to use gradle to use it).","body":"@ЭдуардАртюх yeah, the badass gradle plugin offers more functionality around this than the javafx-maven-plugin.  It isn’t a core maven limitation, the javafx-maven-plugin could probably be rewritten to do what the badass jlink plugin does, but it would be quite difficult and a lot of work I guess.  One traffic is the badass gradle jlink plugin documentation is more complex (and you have to use gradle to use it)."},{"owner":{"account_id":1180113,"reputation":152325,"user_id":1155209,"display_name":"jewelsea"},"score":0,"creation_date":1692333511,"post_id":76922817,"comment_id":135611611,"body_markdown":"To create a jlink image using Maven, and also include automatic modules in the distribution:  One way to do that is to create a jlink image of all the modular dependencies and then use the assembly plugin to copy the non modular dependencies into the generated image output directory, together with a custom launch script which puts the automatic jars on the class or module path.  Zip up the entire assembly for distribution using the assembly plugin.  It is tricky and difficult to do right and I haven’t time to write an example answer here at the moment.","body":"To create a jlink image using Maven, and also include automatic modules in the distribution:  One way to do that is to create a jlink image of all the modular dependencies and then use the assembly plugin to copy the non modular dependencies into the generated image output directory, together with a custom launch script which puts the automatic jars on the class or module path.  Zip up the entire assembly for distribution using the assembly plugin.  It is tricky and difficult to do right and I haven’t time to write an example answer here at the moment."}],"owner":{"account_id":12164094,"reputation":13,"user_id":8880886,"display_name":"Etarus"},"comment_count":9,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":41,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1692284974,"creation_date":1692284974,"question_id":76922817,"body_markdown":"How to create a custom runtime image with MSSQL JDBC Driver? \r\n\r\n  \r\nI created a new JavaFX project using and IntelliJ IDEA.\r\n\r\nI added to dependency MSSQL JDBC Driver to my pom-file.\r\n\r\npom.xml\r\n\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;\r\n         xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n         xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n\r\n    &lt;groupId&gt;com.example&lt;/groupId&gt;\r\n    &lt;artifactId&gt;demo&lt;/artifactId&gt;\r\n    &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\r\n    &lt;packaging&gt;jar&lt;/packaging&gt;\r\n    &lt;name&gt;demo&lt;/name&gt;\r\n\r\n    &lt;properties&gt;\r\n        &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\r\n        &lt;junit.version&gt;5.9.2&lt;/junit.version&gt;\r\n    &lt;/properties&gt;\r\n\r\n    &lt;dependencies&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.openjfx&lt;/groupId&gt;\r\n            &lt;artifactId&gt;javafx-controls&lt;/artifactId&gt;\r\n            &lt;version&gt;17.0.6&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.openjfx&lt;/groupId&gt;\r\n            &lt;artifactId&gt;javafx-fxml&lt;/artifactId&gt;\r\n            &lt;version&gt;17.0.6&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;com.microsoft.sqlserver&lt;/groupId&gt;\r\n            &lt;artifactId&gt;mssql-jdbc&lt;/artifactId&gt;\r\n            &lt;version&gt;11.2.3.jre17&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.junit.jupiter&lt;/groupId&gt;\r\n            &lt;artifactId&gt;junit-jupiter-api&lt;/artifactId&gt;\r\n            &lt;version&gt;${junit.version}&lt;/version&gt;\r\n            &lt;scope&gt;test&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.junit.jupiter&lt;/groupId&gt;\r\n            &lt;artifactId&gt;junit-jupiter-engine&lt;/artifactId&gt;\r\n            &lt;version&gt;${junit.version}&lt;/version&gt;\r\n            &lt;scope&gt;test&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n    &lt;/dependencies&gt;\r\n\r\n    &lt;build&gt;\r\n        &lt;finalName&gt;app&lt;/finalName&gt;\r\n        &lt;plugins&gt;\r\n            &lt;plugin&gt;\r\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n                &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\r\n                &lt;version&gt;3.11.0&lt;/version&gt;\r\n                &lt;configuration&gt;\r\n                    &lt;source&gt;17&lt;/source&gt;\r\n                    &lt;target&gt;17&lt;/target&gt;\r\n                &lt;/configuration&gt;\r\n            &lt;/plugin&gt;\r\n            &lt;plugin&gt;\r\n                &lt;groupId&gt;org.openjfx&lt;/groupId&gt;\r\n                &lt;artifactId&gt;javafx-maven-plugin&lt;/artifactId&gt;\r\n                &lt;version&gt;0.0.8&lt;/version&gt;\r\n                &lt;executions&gt;\r\n                    &lt;execution&gt;\r\n                        &lt;!-- Default configuration for running with: mvn clean javafx:run --&gt;\r\n                        &lt;id&gt;default-cli&lt;/id&gt;\r\n                        &lt;configuration&gt;\r\n                            &lt;mainClass&gt;com.example.demo/com.example.demo.HelloApplication&lt;/mainClass&gt;\r\n                            &lt;launcher&gt;app&lt;/launcher&gt;\r\n                            &lt;jlinkZipName&gt;app&lt;/jlinkZipName&gt;\r\n                            &lt;jlinkImageName&gt;app&lt;/jlinkImageName&gt;\r\n                            &lt;noManPages&gt;true&lt;/noManPages&gt;\r\n                            &lt;stripDebug&gt;true&lt;/stripDebug&gt;\r\n                            &lt;noHeaderFiles&gt;true&lt;/noHeaderFiles&gt;\r\n                        &lt;/configuration&gt;\r\n                    &lt;/execution&gt;\r\n                &lt;/executions&gt;\r\n            &lt;/plugin&gt;\r\n        &lt;/plugins&gt;\r\n    &lt;/build&gt;\r\n&lt;/project&gt;\r\n```\r\n\r\nThen added requires to module-info.java\r\n\r\n```\r\nmodule com.example.demo {\r\n    requires javafx.controls;\r\n    requires javafx.fxml;\r\n    requires java.sql;\r\n    requires com.microsoft.sqlserver.jdbc;\r\n\r\n\r\n    opens com.example.demo to javafx.fxml;\r\n    exports com.example.demo;\r\n}\r\n```\r\n\r\nBut when I tried to create a custom runtime image , using the JavaFX Maven plugin, I get an error:\r\n\r\n```\r\nError: automatic module cannot be used with jlink: com.microsoft.sqlserver.jdbc\r\n```\r\n\r\n```\r\n&quot;C:\\Program Files\\Windows Portable\\Java\\jdk-17.0.7\\bin\\java.exe&quot; \r\n[INFO] Scanning for projects...\r\n[INFO] \r\n[INFO] --------------------------&lt; com.example:demo &gt;--------------------------\r\n[INFO] Building demo 1.0-SNAPSHOT\r\n[INFO] --------------------------------[ jar ]---------------------------------\r\n[INFO] \r\n[INFO] &gt;&gt;&gt; javafx-maven-plugin:0.0.8:jlink (default-cli) &gt; process-classes @ demo &gt;&gt;&gt;\r\n[INFO] \r\n[INFO] --- maven-resources-plugin:2.6:resources (default-resources) @ demo ---\r\n[INFO] Using &#39;UTF-8&#39; encoding to copy filtered resources.\r\n[INFO] Copying 2 resources\r\n[INFO] \r\n[INFO] --- maven-compiler-plugin:3.11.0:compile (default-compile) @ demo ---\r\n[INFO] Nothing to compile - all classes are up to date\r\n[INFO] \r\n[INFO] &lt;&lt;&lt; javafx-maven-plugin:0.0.8:jlink (default-cli) &lt; process-classes @ demo &lt;&lt;&lt;\r\n[INFO] \r\n[INFO] \r\n[INFO] --- javafx-maven-plugin:0.0.8:jlink (default-cli) @ demo ---\r\nError: automatic module cannot be used with jlink: com.microsoft.sqlserver.jdbc from file:///C:/Users/artyukhev/.m2/repository/com/microsoft/sqlserver/mssql-jdbc/11.2.3.jre17/mssql-jdbc-11.2.3.jre17.jar\r\n[ERROR] Command execution failed.\r\norg.apache.commons.exec.ExecuteException: Process exited with an error: 1 (Exit value: 1)\r\n    at org.apache.commons.exec.DefaultExecutor.executeInternal (DefaultExecutor.java:404)\r\n    at org.apache.commons.exec.DefaultExecutor.execute (DefaultExecutor.java:166)\r\n    at org.openjfx.JavaFXBaseMojo.executeCommandLine (JavaFXBaseMojo.java:567)\r\n    at org.openjfx.JavaFXBaseMojo.executeCommandLine (JavaFXBaseMojo.java:434)\r\n    at org.openjfx.JavaFXJLinkMojo.execute (JavaFXJLinkMojo.java:209)\r\n    at org.apache.maven.plugin.DefaultBuildPluginManager.executeMojo (DefaultBuildPluginManager.java:137)\r\n    at org.apache.maven.lifecycle.internal.MojoExecutor.doExecute (MojoExecutor.java:301)\r\n    at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:211)\r\n    at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:165)\r\n    at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:157)\r\n    at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject (LifecycleModuleBuilder.java:121)\r\n    at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject (LifecycleModuleBuilder.java:81)\r\n    at org.apache.maven.lifecycle.internal.builder.singlethreaded.SingleThreadedBuilder.build (SingleThreadedBuilder.java:56)\r\n    at org.apache.maven.lifecycle.internal.LifecycleStarter.execute (LifecycleStarter.java:127)\r\n    at org.apache.maven.DefaultMaven.doExecute (DefaultMaven.java:294)\r\n    at org.apache.maven.DefaultMaven.doExecute (DefaultMaven.java:192)\r\n    at org.apache.maven.DefaultMaven.execute (DefaultMaven.java:105)\r\n    at org.apache.maven.cli.MavenCli.execute (MavenCli.java:960)\r\n    at org.apache.maven.cli.MavenCli.doMain (MavenCli.java:293)\r\n    at org.apache.maven.cli.MavenCli.main (MavenCli.java:196)\r\n    at jdk.internal.reflect.NativeMethodAccessorImpl.invoke0 (Native Method)\r\n    at jdk.internal.reflect.NativeMethodAccessorImpl.invoke (NativeMethodAccessorImpl.java:77)\r\n    at jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke (DelegatingMethodAccessorImpl.java:43)\r\n    at java.lang.reflect.Method.invoke (Method.java:568)\r\n    at org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced (Launcher.java:282)\r\n    at org.codehaus.plexus.classworlds.launcher.Launcher.launch (Launcher.java:225)\r\n    at org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode (Launcher.java:406)\r\n    at org.codehaus.plexus.classworlds.launcher.Launcher.main (Launcher.java:347)\r\n    at org.codehaus.classworlds.Launcher.main (Launcher.java:47)\r\n[INFO] ------------------------------------------------------------------------\r\n[INFO] BUILD FAILURE\r\n[INFO] ------------------------------------------------------------------------\r\n[INFO] Total time:  1.806 s\r\n[INFO] Finished at: 2023-08-17T17:35:22+03:00\r\n[INFO] ------------------------------------------------------------------------\r\n[ERROR] Failed to execute goal org.openjfx:javafx-maven-plugin:0.0.8:jlink (default-cli) on project demo: Error: Command execution failed. Process exited with an error: 1 (Exit value: 1) -&gt; [Help 1]\r\n[ERROR] \r\n[ERROR] To see the full stack trace of the errors, re-run Maven with the -e switch.\r\n[ERROR] Re-run Maven using the -X switch to enable full debug logging.\r\n[ERROR] \r\n[ERROR] For more information about the errors and possible solutions, please read the following articles:\r\n[ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/MojoExecutionException\r\norg.apache.commons.exec.ExecuteException: Process exited with an error: 1 (Exit value: 1)\r\n\tat org.apache.commons.exec.DefaultExecutor.executeInternal(DefaultExecutor.java:404)\r\n\tat org.apache.commons.exec.DefaultExecutor.execute(DefaultExecutor.java:166)\r\n\tat org.openjfx.JavaFXBaseMojo.executeCommandLine(JavaFXBaseMojo.java:567)\r\n\tat org.openjfx.JavaFXBaseMojo.executeCommandLine(JavaFXBaseMojo.java:434)\r\n\tat org.openjfx.JavaFXJLinkMojo.execute(JavaFXJLinkMojo.java:209)\r\n\tat org.apache.maven.plugin.DefaultBuildPluginManager.executeMojo(DefaultBuildPluginManager.java:137)\r\n\tat org.apache.maven.lifecycle.internal.MojoExecutor.doExecute(MojoExecutor.java:301)\r\n\tat org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:211)\r\n\tat org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:165)\r\n\tat org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:157)\r\n\tat org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(LifecycleModuleBuilder.java:121)\r\n\tat org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(LifecycleModuleBuilder.java:81)\r\n\tat org.apache.maven.lifecycle.internal.builder.singlethreaded.SingleThreadedBuilder.build(SingleThreadedBuilder.java:56)\r\n\tat org.apache.maven.lifecycle.internal.LifecycleStarter.execute(LifecycleStarter.java:127)\r\n\tat org.apache.maven.DefaultMaven.doExecute(DefaultMaven.java:294)\r\n\tat org.apache.maven.DefaultMaven.doExecute(DefaultMaven.java:192)\r\n\tat org.apache.maven.DefaultMaven.execute(DefaultMaven.java:105)\r\n\tat org.apache.maven.cli.MavenCli.execute(MavenCli.java:960)\r\n\tat org.apache.maven.cli.MavenCli.doMain(MavenCli.java:293)\r\n\tat org.apache.maven.cli.MavenCli.main(MavenCli.java:196)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)\r\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:568)\r\n\tat org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced(Launcher.java:282)\r\n\tat org.codehaus.plexus.classworlds.launcher.Launcher.launch(Launcher.java:225)\r\n\tat org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode(Launcher.java:406)\r\n\tat org.codehaus.plexus.classworlds.launcher.Launcher.main(Launcher.java:347)\r\n\tat org.codehaus.classworlds.Launcher.main(Launcher.java:47)\r\n\r\nProcess finished with exit code 1\r\n```\r\n\r\nHow to fix it?","title":"Can&#39;t to create a custom runtime image with MSSQL JDBC Driver","body":"<p>How to create a custom runtime image with MSSQL JDBC Driver?</p>\n<p>I created a new JavaFX project using and IntelliJ IDEA.</p>\n<p>I added to dependency MSSQL JDBC Driver to my pom-file.</p>\n<p>pom.xml</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;\n         xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n         xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n\n    &lt;groupId&gt;com.example&lt;/groupId&gt;\n    &lt;artifactId&gt;demo&lt;/artifactId&gt;\n    &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\n    &lt;packaging&gt;jar&lt;/packaging&gt;\n    &lt;name&gt;demo&lt;/name&gt;\n\n    &lt;properties&gt;\n        &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\n        &lt;junit.version&gt;5.9.2&lt;/junit.version&gt;\n    &lt;/properties&gt;\n\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.openjfx&lt;/groupId&gt;\n            &lt;artifactId&gt;javafx-controls&lt;/artifactId&gt;\n            &lt;version&gt;17.0.6&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.openjfx&lt;/groupId&gt;\n            &lt;artifactId&gt;javafx-fxml&lt;/artifactId&gt;\n            &lt;version&gt;17.0.6&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.microsoft.sqlserver&lt;/groupId&gt;\n            &lt;artifactId&gt;mssql-jdbc&lt;/artifactId&gt;\n            &lt;version&gt;11.2.3.jre17&lt;/version&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.junit.jupiter&lt;/groupId&gt;\n            &lt;artifactId&gt;junit-jupiter-api&lt;/artifactId&gt;\n            &lt;version&gt;${junit.version}&lt;/version&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.junit.jupiter&lt;/groupId&gt;\n            &lt;artifactId&gt;junit-jupiter-engine&lt;/artifactId&gt;\n            &lt;version&gt;${junit.version}&lt;/version&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n\n    &lt;build&gt;\n        &lt;finalName&gt;app&lt;/finalName&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n                &lt;version&gt;3.11.0&lt;/version&gt;\n                &lt;configuration&gt;\n                    &lt;source&gt;17&lt;/source&gt;\n                    &lt;target&gt;17&lt;/target&gt;\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.openjfx&lt;/groupId&gt;\n                &lt;artifactId&gt;javafx-maven-plugin&lt;/artifactId&gt;\n                &lt;version&gt;0.0.8&lt;/version&gt;\n                &lt;executions&gt;\n                    &lt;execution&gt;\n                        &lt;!-- Default configuration for running with: mvn clean javafx:run --&gt;\n                        &lt;id&gt;default-cli&lt;/id&gt;\n                        &lt;configuration&gt;\n                            &lt;mainClass&gt;com.example.demo/com.example.demo.HelloApplication&lt;/mainClass&gt;\n                            &lt;launcher&gt;app&lt;/launcher&gt;\n                            &lt;jlinkZipName&gt;app&lt;/jlinkZipName&gt;\n                            &lt;jlinkImageName&gt;app&lt;/jlinkImageName&gt;\n                            &lt;noManPages&gt;true&lt;/noManPages&gt;\n                            &lt;stripDebug&gt;true&lt;/stripDebug&gt;\n                            &lt;noHeaderFiles&gt;true&lt;/noHeaderFiles&gt;\n                        &lt;/configuration&gt;\n                    &lt;/execution&gt;\n                &lt;/executions&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n&lt;/project&gt;\n</code></pre>\n<p>Then added requires to module-info.java</p>\n<pre><code>module com.example.demo {\n    requires javafx.controls;\n    requires javafx.fxml;\n    requires java.sql;\n    requires com.microsoft.sqlserver.jdbc;\n\n\n    opens com.example.demo to javafx.fxml;\n    exports com.example.demo;\n}\n</code></pre>\n<p>But when I tried to create a custom runtime image , using the JavaFX Maven plugin, I get an error:</p>\n<pre><code>Error: automatic module cannot be used with jlink: com.microsoft.sqlserver.jdbc\n</code></pre>\n<pre><code>&quot;C:\\Program Files\\Windows Portable\\Java\\jdk-17.0.7\\bin\\java.exe&quot; \n[INFO] Scanning for projects...\n[INFO] \n[INFO] --------------------------&lt; com.example:demo &gt;--------------------------\n[INFO] Building demo 1.0-SNAPSHOT\n[INFO] --------------------------------[ jar ]---------------------------------\n[INFO] \n[INFO] &gt;&gt;&gt; javafx-maven-plugin:0.0.8:jlink (default-cli) &gt; process-classes @ demo &gt;&gt;&gt;\n[INFO] \n[INFO] --- maven-resources-plugin:2.6:resources (default-resources) @ demo ---\n[INFO] Using 'UTF-8' encoding to copy filtered resources.\n[INFO] Copying 2 resources\n[INFO] \n[INFO] --- maven-compiler-plugin:3.11.0:compile (default-compile) @ demo ---\n[INFO] Nothing to compile - all classes are up to date\n[INFO] \n[INFO] &lt;&lt;&lt; javafx-maven-plugin:0.0.8:jlink (default-cli) &lt; process-classes @ demo &lt;&lt;&lt;\n[INFO] \n[INFO] \n[INFO] --- javafx-maven-plugin:0.0.8:jlink (default-cli) @ demo ---\nError: automatic module cannot be used with jlink: com.microsoft.sqlserver.jdbc from file:///C:/Users/artyukhev/.m2/repository/com/microsoft/sqlserver/mssql-jdbc/11.2.3.jre17/mssql-jdbc-11.2.3.jre17.jar\n[ERROR] Command execution failed.\norg.apache.commons.exec.ExecuteException: Process exited with an error: 1 (Exit value: 1)\n    at org.apache.commons.exec.DefaultExecutor.executeInternal (DefaultExecutor.java:404)\n    at org.apache.commons.exec.DefaultExecutor.execute (DefaultExecutor.java:166)\n    at org.openjfx.JavaFXBaseMojo.executeCommandLine (JavaFXBaseMojo.java:567)\n    at org.openjfx.JavaFXBaseMojo.executeCommandLine (JavaFXBaseMojo.java:434)\n    at org.openjfx.JavaFXJLinkMojo.execute (JavaFXJLinkMojo.java:209)\n    at org.apache.maven.plugin.DefaultBuildPluginManager.executeMojo (DefaultBuildPluginManager.java:137)\n    at org.apache.maven.lifecycle.internal.MojoExecutor.doExecute (MojoExecutor.java:301)\n    at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:211)\n    at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:165)\n    at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:157)\n    at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject (LifecycleModuleBuilder.java:121)\n    at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject (LifecycleModuleBuilder.java:81)\n    at org.apache.maven.lifecycle.internal.builder.singlethreaded.SingleThreadedBuilder.build (SingleThreadedBuilder.java:56)\n    at org.apache.maven.lifecycle.internal.LifecycleStarter.execute (LifecycleStarter.java:127)\n    at org.apache.maven.DefaultMaven.doExecute (DefaultMaven.java:294)\n    at org.apache.maven.DefaultMaven.doExecute (DefaultMaven.java:192)\n    at org.apache.maven.DefaultMaven.execute (DefaultMaven.java:105)\n    at org.apache.maven.cli.MavenCli.execute (MavenCli.java:960)\n    at org.apache.maven.cli.MavenCli.doMain (MavenCli.java:293)\n    at org.apache.maven.cli.MavenCli.main (MavenCli.java:196)\n    at jdk.internal.reflect.NativeMethodAccessorImpl.invoke0 (Native Method)\n    at jdk.internal.reflect.NativeMethodAccessorImpl.invoke (NativeMethodAccessorImpl.java:77)\n    at jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke (DelegatingMethodAccessorImpl.java:43)\n    at java.lang.reflect.Method.invoke (Method.java:568)\n    at org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced (Launcher.java:282)\n    at org.codehaus.plexus.classworlds.launcher.Launcher.launch (Launcher.java:225)\n    at org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode (Launcher.java:406)\n    at org.codehaus.plexus.classworlds.launcher.Launcher.main (Launcher.java:347)\n    at org.codehaus.classworlds.Launcher.main (Launcher.java:47)\n[INFO] ------------------------------------------------------------------------\n[INFO] BUILD FAILURE\n[INFO] ------------------------------------------------------------------------\n[INFO] Total time:  1.806 s\n[INFO] Finished at: 2023-08-17T17:35:22+03:00\n[INFO] ------------------------------------------------------------------------\n[ERROR] Failed to execute goal org.openjfx:javafx-maven-plugin:0.0.8:jlink (default-cli) on project demo: Error: Command execution failed. Process exited with an error: 1 (Exit value: 1) -&gt; [Help 1]\n[ERROR] \n[ERROR] To see the full stack trace of the errors, re-run Maven with the -e switch.\n[ERROR] Re-run Maven using the -X switch to enable full debug logging.\n[ERROR] \n[ERROR] For more information about the errors and possible solutions, please read the following articles:\n[ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/MojoExecutionException\norg.apache.commons.exec.ExecuteException: Process exited with an error: 1 (Exit value: 1)\n    at org.apache.commons.exec.DefaultExecutor.executeInternal(DefaultExecutor.java:404)\n    at org.apache.commons.exec.DefaultExecutor.execute(DefaultExecutor.java:166)\n    at org.openjfx.JavaFXBaseMojo.executeCommandLine(JavaFXBaseMojo.java:567)\n    at org.openjfx.JavaFXBaseMojo.executeCommandLine(JavaFXBaseMojo.java:434)\n    at org.openjfx.JavaFXJLinkMojo.execute(JavaFXJLinkMojo.java:209)\n    at org.apache.maven.plugin.DefaultBuildPluginManager.executeMojo(DefaultBuildPluginManager.java:137)\n    at org.apache.maven.lifecycle.internal.MojoExecutor.doExecute(MojoExecutor.java:301)\n    at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:211)\n    at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:165)\n    at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:157)\n    at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(LifecycleModuleBuilder.java:121)\n    at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(LifecycleModuleBuilder.java:81)\n    at org.apache.maven.lifecycle.internal.builder.singlethreaded.SingleThreadedBuilder.build(SingleThreadedBuilder.java:56)\n    at org.apache.maven.lifecycle.internal.LifecycleStarter.execute(LifecycleStarter.java:127)\n    at org.apache.maven.DefaultMaven.doExecute(DefaultMaven.java:294)\n    at org.apache.maven.DefaultMaven.doExecute(DefaultMaven.java:192)\n    at org.apache.maven.DefaultMaven.execute(DefaultMaven.java:105)\n    at org.apache.maven.cli.MavenCli.execute(MavenCli.java:960)\n    at org.apache.maven.cli.MavenCli.doMain(MavenCli.java:293)\n    at org.apache.maven.cli.MavenCli.main(MavenCli.java:196)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)\n    at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.base/java.lang.reflect.Method.invoke(Method.java:568)\n    at org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced(Launcher.java:282)\n    at org.codehaus.plexus.classworlds.launcher.Launcher.launch(Launcher.java:225)\n    at org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode(Launcher.java:406)\n    at org.codehaus.plexus.classworlds.launcher.Launcher.main(Launcher.java:347)\n    at org.codehaus.classworlds.Launcher.main(Launcher.java:47)\n\nProcess finished with exit code 1\n</code></pre>\n<p>How to fix it?</p>\n"},{"tags":["java","junit","junit5"],"comments":[{"owner":{"account_id":4470050,"reputation":68258,"user_id":3636601,"accept_rate":75,"display_name":"Jens"},"score":0,"creation_date":1671462815,"post_id":74852262,"comment_id":132098554,"body_markdown":"Please add the complete stacktrace","body":"Please add the complete stacktrace"},{"owner":{"account_id":25593043,"reputation":69,"user_id":19369423,"display_name":"TalClip"},"score":0,"creation_date":1671463129,"post_id":74852262,"comment_id":132098675,"body_markdown":"Done. Partially, it is very long :)","body":"Done. Partially, it is very long :)"},{"owner":{"account_id":4470050,"reputation":68258,"user_id":3636601,"accept_rate":75,"display_name":"Jens"},"score":0,"creation_date":1671463451,"post_id":74852262,"comment_id":132098799,"body_markdown":"Take care of java naming conventions. Method names should start with lower case character. Maybe that is the reason why your `@MethodSource`is not found","body":"Take care of java naming conventions. Method names should start with lower case character. Maybe that is the reason why your <code>@MethodSource</code>is not found"},{"owner":{"account_id":25593043,"reputation":69,"user_id":19369423,"display_name":"TalClip"},"score":0,"creation_date":1671463687,"post_id":74852262,"comment_id":132098888,"body_markdown":"You are correct convention-wise ofcourse, but that unfortunately didn&#39;t help...","body":"You are correct convention-wise ofcourse, but that unfortunately didn&#39;t help..."},{"owner":{"account_id":4470050,"reputation":68258,"user_id":3636601,"accept_rate":75,"display_name":"Jens"},"score":0,"creation_date":1671463746,"post_id":74852262,"comment_id":132098906,"body_markdown":"The main problem is *Configuration error: You must configure at least one set of arguments for this @ParameterizedTest*.","body":"The main problem is <i>Configuration error: You must configure at least one set of arguments for this @ParameterizedTest</i>."},{"owner":{"account_id":4470050,"reputation":68258,"user_id":3636601,"accept_rate":75,"display_name":"Jens"},"score":0,"creation_date":1671463810,"post_id":74852262,"comment_id":132098926,"body_markdown":"Can you please provide an [mcve]","body":"Can you please provide an <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>"},{"owner":{"account_id":25593043,"reputation":69,"user_id":19369423,"display_name":"TalClip"},"score":0,"creation_date":1671463830,"post_id":74852262,"comment_id":132098930,"body_markdown":"I understand that, and I think this is what I do. Do I do it correctly?","body":"I understand that, and I think this is what I do. Do I do it correctly?"},{"owner":{"account_id":4470050,"reputation":68258,"user_id":3636601,"accept_rate":75,"display_name":"Jens"},"score":0,"creation_date":1671463962,"post_id":74852262,"comment_id":132098971,"body_markdown":"I think *static Stream&lt;Arguments&gt; slidesTestsArguments()* should be *static Stream&lt;VersionData&gt; slidesTestsArguments()*","body":"I think <i>static Stream&lt;Arguments&gt; slidesTestsArguments()</i> should be <i>static Stream&lt;VersionData&gt; slidesTestsArguments()</i>"},{"owner":{"account_id":213468,"reputation":103489,"user_id":466862,"display_name":"Mark Rotteveel"},"score":0,"creation_date":1671464253,"post_id":74852262,"comment_id":132099069,"body_markdown":"@Jens Use of `Stream&lt;Arguments&gt;` should work.","body":"@Jens Use of <code>Stream&lt;Arguments&gt;</code> should work."},{"owner":{"account_id":3391382,"reputation":3687,"user_id":2846138,"display_name":"cyberbrain"},"score":0,"creation_date":1671464751,"post_id":74852262,"comment_id":132099281,"body_markdown":"I tested something similar to your code. Works fine. (I didn&#39;t use maven though). Only question left for me: can you show the inheritance relationship between `VersionData` and `V2Data`, `V3Data` and `V4Data`? This and a sample implementation of the method to test would miss for me to get a [mre].","body":"I tested something similar to your code. Works fine. (I didn&#39;t use maven though). Only question left for me: can you show the inheritance relationship between <code>VersionData</code> and <code>V2Data</code>, <code>V3Data</code> and <code>V4Data</code>? This and a sample implementation of the method to test would miss for me to get a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."},{"owner":{"account_id":25593043,"reputation":69,"user_id":19369423,"display_name":"TalClip"},"score":0,"creation_date":1671465112,"post_id":74852262,"comment_id":132099401,"body_markdown":"@cyberbrain it is simply V2Data extends VersionData, both are simple POJOs","body":"@cyberbrain it is simply V2Data extends VersionData, both are simple POJOs"},{"owner":{"account_id":25593043,"reputation":69,"user_id":19369423,"display_name":"TalClip"},"score":0,"creation_date":1671466124,"post_id":74852262,"comment_id":132099757,"body_markdown":"I made some post updates. Hope that helps","body":"I made some post updates. Hope that helps"},{"owner":{"account_id":25593043,"reputation":69,"user_id":19369423,"display_name":"TalClip"},"score":0,"creation_date":1671469250,"post_id":74852262,"comment_id":132100900,"body_markdown":"@cyberbrain (and @Gens), I added a minimal reproducible example (I hope)","body":"@cyberbrain (and @Gens), I added a minimal reproducible example (I hope)"}],"answers":[{"tags":[],"owner":{"account_id":3391382,"reputation":3687,"user_id":2846138,"display_name":"cyberbrain"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1671479278,"creation_date":1671479278,"answer_id":74855333,"question_id":74852262,"body_markdown":"Your pom.xml looks weird. You have too many test libraries as dependencies, and mix JUnit versions. \r\nFor start, try it with something smaller like this:\r\n\r\n``` lang-xml\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;\r\n         xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n         xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n  &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n\r\n  &lt;groupId&gt;com.aaaaaa&lt;/groupId&gt;\r\n  &lt;artifactId&gt;aasasa-dfsdfsdfsd-api-test&lt;/artifactId&gt;\r\n  &lt;version&gt;10.0.0&lt;/version&gt;\r\n\r\n  &lt;properties&gt;\r\n    &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\r\n    &lt;maven.compiler.version&gt;3.8.1&lt;/maven.compiler.version&gt;\r\n    &lt;java.version&gt;15&lt;/java.version&gt;\r\n    &lt;junit-jupiter.version&gt;5.9.1&lt;/junit-jupiter.version&gt;\r\n  &lt;/properties&gt;\r\n\r\n  &lt;build&gt;\r\n    &lt;plugins&gt;\r\n      &lt;plugin&gt;\r\n        &lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;\r\n        &lt;version&gt;3.0.0-M5&lt;/version&gt;\r\n      &lt;/plugin&gt;\r\n    &lt;/plugins&gt;\r\n  &lt;/build&gt;\r\n\r\n  &lt;dependencies&gt;\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;org.junit.jupiter&lt;/groupId&gt;\r\n      &lt;artifactId&gt;junit-jupiter&lt;/artifactId&gt;\r\n      &lt;version&gt;${junit-jupiter.version}&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n  &lt;/dependencies&gt;\r\n&lt;/project&gt;\r\n```","title":"JUnit 5 fails to run a methodSourced test","body":"<p>Your pom.xml looks weird. You have too many test libraries as dependencies, and mix JUnit versions.\nFor start, try it with something smaller like this:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;\n         xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n         xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n  &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n\n  &lt;groupId&gt;com.aaaaaa&lt;/groupId&gt;\n  &lt;artifactId&gt;aasasa-dfsdfsdfsd-api-test&lt;/artifactId&gt;\n  &lt;version&gt;10.0.0&lt;/version&gt;\n\n  &lt;properties&gt;\n    &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\n    &lt;maven.compiler.version&gt;3.8.1&lt;/maven.compiler.version&gt;\n    &lt;java.version&gt;15&lt;/java.version&gt;\n    &lt;junit-jupiter.version&gt;5.9.1&lt;/junit-jupiter.version&gt;\n  &lt;/properties&gt;\n\n  &lt;build&gt;\n    &lt;plugins&gt;\n      &lt;plugin&gt;\n        &lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;\n        &lt;version&gt;3.0.0-M5&lt;/version&gt;\n      &lt;/plugin&gt;\n    &lt;/plugins&gt;\n  &lt;/build&gt;\n\n  &lt;dependencies&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;org.junit.jupiter&lt;/groupId&gt;\n      &lt;artifactId&gt;junit-jupiter&lt;/artifactId&gt;\n      &lt;version&gt;${junit-jupiter.version}&lt;/version&gt;\n    &lt;/dependency&gt;\n  &lt;/dependencies&gt;\n&lt;/project&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":25593043,"reputation":69,"user_id":19369423,"display_name":"TalClip"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1671643236,"creation_date":1671519630,"answer_id":74859507,"question_id":74852262,"body_markdown":"At the end, leaving only\r\n\r\n```xml\r\n&lt;dependency&gt;\r\n    &lt;groupId&gt;org.junit.jupiter&lt;/groupId&gt;\r\n    &lt;artifactId&gt;junit-jupiter&lt;/artifactId&gt;\r\n    &lt;version&gt;5.9.1&lt;/version&gt;\r\n&lt;/dependency&gt;\r\n\r\n&lt;dependency&gt;\r\n    &lt;groupId&gt;org.junit.jupiter&lt;/groupId&gt;\r\n    &lt;artifactId&gt;junit-jupiter-engine&lt;/artifactId&gt;\r\n    &lt;version&gt;5.9.1&lt;/version&gt;\r\n&lt;/dependency&gt;\r\n```\r\n\r\nunder the surefire dependencies section fixed the problem. ","title":"JUnit 5 fails to run a methodSourced test","body":"<p>At the end, leaving only</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.junit.jupiter&lt;/groupId&gt;\n    &lt;artifactId&gt;junit-jupiter&lt;/artifactId&gt;\n    &lt;version&gt;5.9.1&lt;/version&gt;\n&lt;/dependency&gt;\n\n&lt;dependency&gt;\n    &lt;groupId&gt;org.junit.jupiter&lt;/groupId&gt;\n    &lt;artifactId&gt;junit-jupiter-engine&lt;/artifactId&gt;\n    &lt;version&gt;5.9.1&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>under the surefire dependencies section fixed the problem.</p>\n"}],"owner":{"account_id":25593043,"reputation":69,"user_id":19369423,"display_name":"TalClip"},"comment_count":13,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":887,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1692284959,"creation_date":1671462124,"question_id":74852262,"body_markdown":"I have the following JUnit 5 test:\r\n\r\n    @ParameterizedTest\r\n    @DisplayName(&quot;Test Valid Video With Slides&quot;)\r\n    @MethodSource(&quot;slidesTestsArguments&quot;)\r\n    void testValidVideoWithSlides(VersionData versionData) {\r\n\r\n        SlidesResponse slidesResponse = testsHelper.callVideosSlidesRequest(versionData);\r\n        assertAll(\r\n            &quot;Validating response of transcript ep for a video with transcript&quot;,\r\n            () -&gt; assertEquals(validPublishedSlidesVideoId, slidesResponse.videoId, &quot;VideoId is not as expected&quot;),\r\n            () -&gt; assertNotEquals(0, slidesResponse.slides.size(), &quot;Segments number should be more than 0&quot;)\r\n        );\r\n    }\r\n\r\nand a supplier method in the same class:\r\n\r\n    static Stream&lt;Arguments&gt; slidesTestsArguments() {\r\n\r\n        return Stream.of(\r\n            Arguments.of(new V2Data()),\r\n            Arguments.of(new V3Data()),\r\n            Arguments.of(new V4Data())\r\n        );\r\n    }\r\n\r\nFor some reason I get the following error:\r\n\r\n```none\r\njava.lang.AbstractMethodError: Receiver class org.junit.jupiter.engine.descriptor.TestTemplateExtensionContext does not define or inherit an implementation of the resolved method &#39;abstract org.junit.jupiter.api.extension.ExecutableInvoker getExecutableInvoker()&#39; of interface org.junit.jupiter.api.extension.ExtensionContext.\r\n\tat org.junit.jupiter.params.provider.MethodArgumentsProvider.lambda$provideArguments$1(MethodArgumentsProvider.java:54)\r\n\tat java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:195)\r\n\tat java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:195)\r\n\tat java.base/java.util.Spliterators$ArraySpliterator.forEachRemaining(Spliterators.java:948)\r\n\tat java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:484)\r\n\tat java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:474)\r\n\tat java.base/java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:150)\r\n\r\n\tat org.junit.platform.launcher.core.DefaultLauncherSession$DelegatingLauncher.execute(DefaultLauncherSession.java:86)\r\n\tat org.junit.platform.launcher.core.SessionPerRequestLauncher.execute(SessionPerRequestLauncher.java:53)\r\n\tat com.intellij.junit5.JUnit5IdeaTestRunner.startRunnerWithArgs(JUnit5IdeaTestRunner.java:57)\r\n\tat com.intellij.rt.junit.IdeaTestRunner$Repeater$1.execute(IdeaTestRunner.java:38)\r\n\tat com.intellij.rt.execution.junit.TestsRepeater.repeat(TestsRepeater.java:11)\r\n\tat com.intellij.rt.junit.IdeaTestRunner$Repeater.startRunnerWithArgs(IdeaTestRunner.java:35)\r\n\tat com.intellij.rt.junit.JUnitStarter.prepareStreamsAndStart(JUnitStarter.java:235)\r\n\tat com.intellij.rt.junit.JUnitStarter.main(JUnitStarter.java:54)\r\n\tSuppressed: org.junit.platform.commons.PreconditionViolationException: Configuration error: You must configure at least one set of arguments for this @ParameterizedTest\r\n\t\tat org.junit.platform.commons.util.Preconditions.condition(Preconditions.java:299)\r\n\t\tat org.junit.jupiter.params.ParameterizedTestExtension.lambda$provideTestTemplateInvocationContexts$5(ParameterizedTestExtension.java:98)\r\n\t\tat java.base/java.util.stream.AbstractPipeline.close(AbstractPipeline.java:323)\r\n\t\tat java.base/java.util.stream.ReferencePipeline$7$1.accept(ReferencePipeline.java:271)\r\n\t\t... 55 more\r\n```\r\n\r\nThis is part of the pom.xml: \r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;project xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n         xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;\r\n         xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 \r\n    http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n    &lt;groupId&gt;com.aaaaaa&lt;/groupId&gt;\r\n    &lt;artifactId&gt;aasasa-dfsdfsdfsd-api-test&lt;/artifactId&gt;\r\n    &lt;version&gt;10.0.0&lt;/version&gt;\r\n    &lt;properties&gt;\r\n        &lt;maven.compiler.version&gt;3.8.1&lt;/maven.compiler.version&gt;\r\n        &lt;java.version&gt;15&lt;/java.version&gt;\r\n        &lt;junit-jupiter.version&gt;5.9.1&lt;/junit-jupiter.version&gt;\r\n    &lt;/properties&gt;\r\n\r\n    &lt;build&gt;\r\n        &lt;plugins&gt;\r\n            &lt;plugin&gt;\r\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n                &lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;\r\n                &lt;version&gt;3.0.0-M5&lt;/version&gt;\r\n                &lt;configuration&gt;\r\n                    &lt;testFailureIgnore&gt;false&lt;/testFailureIgnore&gt;\r\n                    &lt;includes&gt;\r\n                        &lt;include&gt;**/SanityTMTestsSuite*.java&lt;/include&gt;\r\n                    &lt;/includes&gt;\r\n                    &lt;argLine&gt;\r\n                        -javaagent:&quot;${settings.localRepository}/org/aspectj/aspectjweaver/${aspectj.version}/aspectjweaver-${aspectj.version}.jar&quot;\r\n                    &lt;/argLine&gt;\r\n                &lt;/configuration&gt;\r\n                &lt;dependencies&gt;\r\n                    &lt;dependency&gt;\r\n                        &lt;groupId&gt;org.aspectj&lt;/groupId&gt;\r\n                        &lt;artifactId&gt;aspectjweaver&lt;/artifactId&gt;\r\n                        &lt;version&gt;${aspectj.version}&lt;/version&gt;\r\n                    &lt;/dependency&gt;\r\n                    &lt;dependency&gt;\r\n                        &lt;groupId&gt;org.junit.jupiter&lt;/groupId&gt;\r\n                        &lt;artifactId&gt;junit-jupiter&lt;/artifactId&gt;\r\n                        &lt;version&gt;${junit-jupiter.version}&lt;/version&gt;\r\n                    &lt;/dependency&gt;\r\n                    &lt;dependency&gt;\r\n                        &lt;groupId&gt;org.junit.jupiter&lt;/groupId&gt;\r\n                        &lt;artifactId&gt;junit-jupiter-api&lt;/artifactId&gt;\r\n                        &lt;version&gt;${junit-jupiter.version}&lt;/version&gt;\r\n                    &lt;/dependency&gt;\r\n                    &lt;!--JUnit Jupiter Engine to depend on the JUnit5 engine and JUnit 5 API --&gt;\r\n                    &lt;dependency&gt;\r\n                        &lt;groupId&gt;org.junit.jupiter&lt;/groupId&gt;\r\n                        &lt;artifactId&gt;junit-jupiter-engine&lt;/artifactId&gt;\r\n                        &lt;version&gt;${junit-jupiter.version}&lt;/version&gt;\r\n                    &lt;/dependency&gt;\r\n                &lt;/dependencies&gt;\r\n            &lt;/plugin&gt;\r\n        &lt;/plugins&gt;\r\n    &lt;/build&gt;\r\n    &lt;dependencies&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n            &lt;artifactId&gt;maven-surefire-report-plugin&lt;/artifactId&gt;\r\n            &lt;version&gt;3.0.0-M5&lt;/version&gt;\r\n            &lt;type&gt;maven-plugin&lt;/type&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.codehaus.groovy&lt;/groupId&gt;\r\n            &lt;artifactId&gt;groovy-all&lt;/artifactId&gt;\r\n            &lt;version&gt;3.0.13&lt;/version&gt;\r\n            &lt;type&gt;pom&lt;/type&gt;\r\n            &lt;scope&gt;compile&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;pl.pragmatists&lt;/groupId&gt;\r\n            &lt;artifactId&gt;JUnitParams&lt;/artifactId&gt;\r\n            &lt;version&gt;1.1.1&lt;/version&gt;\r\n            &lt;scope&gt;test&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;!--JUnit Jupiter Engine to depend on the JUnit4 engine and JUnit 4 API  --&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.junit.vintage&lt;/groupId&gt;\r\n            &lt;artifactId&gt;junit-vintage-engine&lt;/artifactId&gt;\r\n            &lt;version&gt;${junit-jupiter.version}&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.junit.jupiter&lt;/groupId&gt;\r\n            &lt;artifactId&gt;junit-jupiter-params&lt;/artifactId&gt;\r\n            &lt;version&gt;${junit-jupiter.version}&lt;/version&gt;\r\n            &lt;scope&gt;test&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\r\n            &lt;artifactId&gt;jackson-annotations&lt;/artifactId&gt;\r\n            &lt;version&gt;2.14.1&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.testng&lt;/groupId&gt;\r\n            &lt;artifactId&gt;testng&lt;/artifactId&gt;\r\n            &lt;version&gt;7.7.0&lt;/version&gt;\r\n            &lt;scope&gt;test&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.junit.platform&lt;/groupId&gt;\r\n            &lt;artifactId&gt;junit-platform-suite-engine&lt;/artifactId&gt;\r\n            &lt;version&gt;1.9.0&lt;/version&gt;\r\n            &lt;scope&gt;test&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n    &lt;/dependencies&gt;\r\n&lt;/project&gt;\r\n\r\nJava 15.\r\n\r\nI work on latest IntelliJ env.\r\n\r\n\r\nThe very same happened for me on the same class with :\r\n\r\n```java\r\nstatic Stream&lt;Integer&gt; testArguments() {\r\n     return Stream.of(1, 2 ,3);\r\n}\r\n\r\n\r\n@ParameterizedTest\r\n@MethodSource(&quot;testArguments&quot;)\r\nvoid testInteger(Integer n) {\r\n     System.out.println(n);\r\n}\r\n```","title":"JUnit 5 fails to run a methodSourced test","body":"<p>I have the following JUnit 5 test:</p>\n<pre><code>@ParameterizedTest\n@DisplayName(&quot;Test Valid Video With Slides&quot;)\n@MethodSource(&quot;slidesTestsArguments&quot;)\nvoid testValidVideoWithSlides(VersionData versionData) {\n\n    SlidesResponse slidesResponse = testsHelper.callVideosSlidesRequest(versionData);\n    assertAll(\n        &quot;Validating response of transcript ep for a video with transcript&quot;,\n        () -&gt; assertEquals(validPublishedSlidesVideoId, slidesResponse.videoId, &quot;VideoId is not as expected&quot;),\n        () -&gt; assertNotEquals(0, slidesResponse.slides.size(), &quot;Segments number should be more than 0&quot;)\n    );\n}\n</code></pre>\n<p>and a supplier method in the same class:</p>\n<pre><code>static Stream&lt;Arguments&gt; slidesTestsArguments() {\n\n    return Stream.of(\n        Arguments.of(new V2Data()),\n        Arguments.of(new V3Data()),\n        Arguments.of(new V4Data())\n    );\n}\n</code></pre>\n<p>For some reason I get the following error:</p>\n<pre class=\"lang-none prettyprint-override\"><code>java.lang.AbstractMethodError: Receiver class org.junit.jupiter.engine.descriptor.TestTemplateExtensionContext does not define or inherit an implementation of the resolved method 'abstract org.junit.jupiter.api.extension.ExecutableInvoker getExecutableInvoker()' of interface org.junit.jupiter.api.extension.ExtensionContext.\n    at org.junit.jupiter.params.provider.MethodArgumentsProvider.lambda$provideArguments$1(MethodArgumentsProvider.java:54)\n    at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:195)\n    at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:195)\n    at java.base/java.util.Spliterators$ArraySpliterator.forEachRemaining(Spliterators.java:948)\n    at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:484)\n    at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:474)\n    at java.base/java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:150)\n\n    at org.junit.platform.launcher.core.DefaultLauncherSession$DelegatingLauncher.execute(DefaultLauncherSession.java:86)\n    at org.junit.platform.launcher.core.SessionPerRequestLauncher.execute(SessionPerRequestLauncher.java:53)\n    at com.intellij.junit5.JUnit5IdeaTestRunner.startRunnerWithArgs(JUnit5IdeaTestRunner.java:57)\n    at com.intellij.rt.junit.IdeaTestRunner$Repeater$1.execute(IdeaTestRunner.java:38)\n    at com.intellij.rt.execution.junit.TestsRepeater.repeat(TestsRepeater.java:11)\n    at com.intellij.rt.junit.IdeaTestRunner$Repeater.startRunnerWithArgs(IdeaTestRunner.java:35)\n    at com.intellij.rt.junit.JUnitStarter.prepareStreamsAndStart(JUnitStarter.java:235)\n    at com.intellij.rt.junit.JUnitStarter.main(JUnitStarter.java:54)\n    Suppressed: org.junit.platform.commons.PreconditionViolationException: Configuration error: You must configure at least one set of arguments for this @ParameterizedTest\n        at org.junit.platform.commons.util.Preconditions.condition(Preconditions.java:299)\n        at org.junit.jupiter.params.ParameterizedTestExtension.lambda$provideTestTemplateInvocationContexts$5(ParameterizedTestExtension.java:98)\n        at java.base/java.util.stream.AbstractPipeline.close(AbstractPipeline.java:323)\n        at java.base/java.util.stream.ReferencePipeline$7$1.accept(ReferencePipeline.java:271)\n        ... 55 more\n</code></pre>\n<p>This is part of the pom.xml:</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;project xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n     xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;\n     xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 \nhttp://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n&lt;groupId&gt;com.aaaaaa&lt;/groupId&gt;\n&lt;artifactId&gt;aasasa-dfsdfsdfsd-api-test&lt;/artifactId&gt;\n&lt;version&gt;10.0.0&lt;/version&gt;\n&lt;properties&gt;\n    &lt;maven.compiler.version&gt;3.8.1&lt;/maven.compiler.version&gt;\n    &lt;java.version&gt;15&lt;/java.version&gt;\n    &lt;junit-jupiter.version&gt;5.9.1&lt;/junit-jupiter.version&gt;\n&lt;/properties&gt;\n\n&lt;build&gt;\n    &lt;plugins&gt;\n        &lt;plugin&gt;\n            &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n            &lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;\n            &lt;version&gt;3.0.0-M5&lt;/version&gt;\n            &lt;configuration&gt;\n                &lt;testFailureIgnore&gt;false&lt;/testFailureIgnore&gt;\n                &lt;includes&gt;\n                    &lt;include&gt;**/SanityTMTestsSuite*.java&lt;/include&gt;\n                &lt;/includes&gt;\n                &lt;argLine&gt;\n                    -javaagent:&quot;${settings.localRepository}/org/aspectj/aspectjweaver/${aspectj.version}/aspectjweaver-${aspectj.version}.jar&quot;\n                &lt;/argLine&gt;\n            &lt;/configuration&gt;\n            &lt;dependencies&gt;\n                &lt;dependency&gt;\n                    &lt;groupId&gt;org.aspectj&lt;/groupId&gt;\n                    &lt;artifactId&gt;aspectjweaver&lt;/artifactId&gt;\n                    &lt;version&gt;${aspectj.version}&lt;/version&gt;\n                &lt;/dependency&gt;\n                &lt;dependency&gt;\n                    &lt;groupId&gt;org.junit.jupiter&lt;/groupId&gt;\n                    &lt;artifactId&gt;junit-jupiter&lt;/artifactId&gt;\n                    &lt;version&gt;${junit-jupiter.version}&lt;/version&gt;\n                &lt;/dependency&gt;\n                &lt;dependency&gt;\n                    &lt;groupId&gt;org.junit.jupiter&lt;/groupId&gt;\n                    &lt;artifactId&gt;junit-jupiter-api&lt;/artifactId&gt;\n                    &lt;version&gt;${junit-jupiter.version}&lt;/version&gt;\n                &lt;/dependency&gt;\n                &lt;!--JUnit Jupiter Engine to depend on the JUnit5 engine and JUnit 5 API --&gt;\n                &lt;dependency&gt;\n                    &lt;groupId&gt;org.junit.jupiter&lt;/groupId&gt;\n                    &lt;artifactId&gt;junit-jupiter-engine&lt;/artifactId&gt;\n                    &lt;version&gt;${junit-jupiter.version}&lt;/version&gt;\n                &lt;/dependency&gt;\n            &lt;/dependencies&gt;\n        &lt;/plugin&gt;\n    &lt;/plugins&gt;\n&lt;/build&gt;\n&lt;dependencies&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n        &lt;artifactId&gt;maven-surefire-report-plugin&lt;/artifactId&gt;\n        &lt;version&gt;3.0.0-M5&lt;/version&gt;\n        &lt;type&gt;maven-plugin&lt;/type&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.codehaus.groovy&lt;/groupId&gt;\n        &lt;artifactId&gt;groovy-all&lt;/artifactId&gt;\n        &lt;version&gt;3.0.13&lt;/version&gt;\n        &lt;type&gt;pom&lt;/type&gt;\n        &lt;scope&gt;compile&lt;/scope&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;pl.pragmatists&lt;/groupId&gt;\n        &lt;artifactId&gt;JUnitParams&lt;/artifactId&gt;\n        &lt;version&gt;1.1.1&lt;/version&gt;\n        &lt;scope&gt;test&lt;/scope&gt;\n    &lt;/dependency&gt;\n    &lt;!--JUnit Jupiter Engine to depend on the JUnit4 engine and JUnit 4 API  --&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.junit.vintage&lt;/groupId&gt;\n        &lt;artifactId&gt;junit-vintage-engine&lt;/artifactId&gt;\n        &lt;version&gt;${junit-jupiter.version}&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.junit.jupiter&lt;/groupId&gt;\n        &lt;artifactId&gt;junit-jupiter-params&lt;/artifactId&gt;\n        &lt;version&gt;${junit-jupiter.version}&lt;/version&gt;\n        &lt;scope&gt;test&lt;/scope&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\n        &lt;artifactId&gt;jackson-annotations&lt;/artifactId&gt;\n        &lt;version&gt;2.14.1&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.testng&lt;/groupId&gt;\n        &lt;artifactId&gt;testng&lt;/artifactId&gt;\n        &lt;version&gt;7.7.0&lt;/version&gt;\n        &lt;scope&gt;test&lt;/scope&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.junit.platform&lt;/groupId&gt;\n        &lt;artifactId&gt;junit-platform-suite-engine&lt;/artifactId&gt;\n        &lt;version&gt;1.9.0&lt;/version&gt;\n        &lt;scope&gt;test&lt;/scope&gt;\n    &lt;/dependency&gt;\n&lt;/dependencies&gt;\n</code></pre>\n\n<p>Java 15.</p>\n<p>I work on latest IntelliJ env.</p>\n<p>The very same happened for me on the same class with :</p>\n<pre class=\"lang-java prettyprint-override\"><code>static Stream&lt;Integer&gt; testArguments() {\n     return Stream.of(1, 2 ,3);\n}\n\n\n@ParameterizedTest\n@MethodSource(&quot;testArguments&quot;)\nvoid testInteger(Integer n) {\n     System.out.println(n);\n}\n</code></pre>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":39523,"reputation":1405,"user_id":114044,"accept_rate":83,"display_name":"Stephen Hosking"},"score":11,"creation_date":1470695402,"post_id":12192050,"comment_id":65044596,"body_markdown":"&quot;Business work&quot; is the key distinction here. I find it a useful convention to use `Utils` for a static class which could be used anywhere in the organisation, or in another organisation. A `Helper` class has common code which can be re-used within a project and has dependencies within the project. Of course, there is no generally accepted rule, but I find this useful.","body":"&quot;Business work&quot; is the key distinction here. I find it a useful convention to use <code>Utils</code> for a static class which could be used anywhere in the organisation, or in another organisation. A <code>Helper</code> class has common code which can be re-used within a project and has dependencies within the project. Of course, there is no generally accepted rule, but I find this useful."},{"owner":{"account_id":7779323,"reputation":1482,"user_id":5886270,"accept_rate":74,"display_name":"Bigair"},"score":1,"creation_date":1553046865,"post_id":12192050,"comment_id":97237390,"body_markdown":"@StephenHosking Your explanation is the most persuading to me &amp; maybe to everyone.  If possible would you post your explanation as actual answer to this post rather than just left comment.","body":"@StephenHosking Your explanation is the most persuading to me &amp; maybe to everyone.  If possible would you post your explanation as actual answer to this post rather than just left comment."},{"owner":{"account_id":39523,"reputation":1405,"user_id":114044,"accept_rate":83,"display_name":"Stephen Hosking"},"score":0,"creation_date":1553557549,"post_id":12192050,"comment_id":97420557,"body_markdown":"@Bigair. Thankyou, but mine is only a suggestion, not an answer. I am glad that people have found it helpful.","body":"@Bigair. Thankyou, but mine is only a suggestion, not an answer. I am glad that people have found it helpful."}],"answers":[{"tags":[],"owner":{"account_id":45934,"reputation":203649,"user_id":135589,"accept_rate":100,"display_name":"Jesper"},"down_vote_count":3,"up_vote_count":41,"is_accepted":false,"score":38,"last_activity_date":1346312323,"creation_date":1346312323,"answer_id":12192074,"question_id":12192050,"body_markdown":"In general? It&#39;s entirely arbitrary. There are no rules for this.","title":"What are the differences between Helper and Utility classes?","body":"<p>In general? It's entirely arbitrary. There are no rules for this.</p>\n"},{"tags":[],"owner":{"account_id":138128,"reputation":294236,"user_id":342852,"accept_rate":97,"display_name":"Sean Patrick Floyd"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1346312842,"creation_date":1346312387,"answer_id":12192093,"question_id":12192050,"body_markdown":"There&#39;s no ultimate answer for this. Figure out one naming scheme and stick with it. Naming your packages and classes is an important part of software architecture, and nobody can take that decision away from you.\r\n\r\nI personally like the XHelper better, but I see XUtils more often in foreign code.\r\n\r\nI also like the &quot;plural&quot; naming scheme you will find both in the JDK and [Guava][1]:\r\n\r\nif a class deals with `Collection` objects, it&#39;s called `Collections`\r\n\r\nArray &gt; Arrays (jdk)  \r\nList &gt; Lists (guava)  \r\nMap &gt; Maps (guava)  \r\n\r\netc.\r\n\r\n\r\n  [1]: https://code.google.com/p/guava-libraries/","title":"What are the differences between Helper and Utility classes?","body":"<p>There's no ultimate answer for this. Figure out one naming scheme and stick with it. Naming your packages and classes is an important part of software architecture, and nobody can take that decision away from you.</p>\n\n<p>I personally like the XHelper better, but I see XUtils more often in foreign code.</p>\n\n<p>I also like the \"plural\" naming scheme you will find both in the JDK and <a href=\"https://code.google.com/p/guava-libraries/\" rel=\"nofollow\">Guava</a>:</p>\n\n<p>if a class deals with <code>Collection</code> objects, it's called <code>Collections</code></p>\n\n<p>Array > Arrays (jdk)<br>\nList > Lists (guava)<br>\nMap > Maps (guava)  </p>\n\n<p>etc.</p>\n"},{"tags":[],"owner":{"account_id":23121,"reputation":527346,"user_id":57695,"accept_rate":75,"display_name":"Peter Lawrey"},"down_vote_count":3,"up_vote_count":149,"is_accepted":true,"score":146,"last_activity_date":1346313081,"creation_date":1346312621,"answer_id":12192155,"question_id":12192050,"body_markdown":"There are many naming styles to use. I would suggest Utils just because its more common.\r\n\r\nA Utility class is understood to only have static methods and be stateless. You would not create an instance of such a class.\r\n\r\nA Helper can be a utility class or it can be stateful or require an instance be created.  I would avoid this if possible.\r\n\r\nIf you can make the name more specific. e.g. if it has sorting methods, make it XSorter\r\n\r\nFor arrays you can find helper classes like\r\n\r\n    Array\r\n    Arrays\r\n    ArrayUtil\r\n    ArrayUtils\r\n    ArrayHelper\r\n\r\nBTW a short hand for a utility class is an enum with no instances\r\n\r\n    enum XUtils {;\r\n        static methods here\r\n    }\r\n\r\nIf you need to implement an interface, I would use a stateless Singleton.\r\n\r\n    enum XHelper implements RequiredInterface {\r\n       INSTANCE;\r\n       // no instance fields.\r\n    }","title":"What are the differences between Helper and Utility classes?","body":"<p>There are many naming styles to use. I would suggest Utils just because its more common.</p>\n\n<p>A Utility class is understood to only have static methods and be stateless. You would not create an instance of such a class.</p>\n\n<p>A Helper can be a utility class or it can be stateful or require an instance be created.  I would avoid this if possible.</p>\n\n<p>If you can make the name more specific. e.g. if it has sorting methods, make it XSorter</p>\n\n<p>For arrays you can find helper classes like</p>\n\n<pre><code>Array\nArrays\nArrayUtil\nArrayUtils\nArrayHelper\n</code></pre>\n\n<p>BTW a short hand for a utility class is an enum with no instances</p>\n\n<pre><code>enum XUtils {;\n    static methods here\n}\n</code></pre>\n\n<p>If you need to implement an interface, I would use a stateless Singleton.</p>\n\n<pre><code>enum XHelper implements RequiredInterface {\n   INSTANCE;\n   // no instance fields.\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1574230,"reputation":2310,"user_id":1461154,"accept_rate":88,"display_name":"James M. Lay"},"down_vote_count":0,"up_vote_count":30,"is_accepted":false,"score":30,"last_activity_date":1548657672,"creation_date":1548657672,"answer_id":54396742,"question_id":12192050,"body_markdown":"A utility is a &quot;leaf node&quot; class of general use. That is, it doesn&#39;t have any dependencies into your project and can be ported from project to project without breaking or becoming useless. Examples: `Vector3`, `RandomNumberGenerator`, `StringMatcher`, etc...\r\n\r\nA &quot;helper&quot; seems to be any class whose design is to aid another class. These may or may not depend on your project.  If you&#39;re creating a `GameNetworkClient` class, you could say the `GameNetworkConnection` class is a &#39;helper&#39;, because it &quot;helps&quot; the `GameNetworkClient`.\r\n\r\nThe way developers refer to tools reflects common usage of these words. If you can recall hearing tools described as &quot;helpful&quot; vs &quot;useful&quot;, a helpful tool tends to have some context (cheese grater helps to grate cheese, corn stripper helps to strip corn, speed loader helps to reload a firearm).  A &quot;utility&quot; is expected to work in a variety of contexts (WD-40, duct tape, army-knives, glue, flashlight, etc...).","title":"What are the differences between Helper and Utility classes?","body":"<p>A utility is a \"leaf node\" class of general use. That is, it doesn't have any dependencies into your project and can be ported from project to project without breaking or becoming useless. Examples: <code>Vector3</code>, <code>RandomNumberGenerator</code>, <code>StringMatcher</code>, etc...</p>\n\n<p>A \"helper\" seems to be any class whose design is to aid another class. These may or may not depend on your project.  If you're creating a <code>GameNetworkClient</code> class, you could say the <code>GameNetworkConnection</code> class is a 'helper', because it \"helps\" the <code>GameNetworkClient</code>.</p>\n\n<p>The way developers refer to tools reflects common usage of these words. If you can recall hearing tools described as \"helpful\" vs \"useful\", a helpful tool tends to have some context (cheese grater helps to grate cheese, corn stripper helps to strip corn, speed loader helps to reload a firearm).  A \"utility\" is expected to work in a variety of contexts (WD-40, duct tape, army-knives, glue, flashlight, etc...).</p>\n"},{"tags":[],"owner":{"account_id":7762019,"reputation":2420,"user_id":5874476,"display_name":"typhon04"},"down_vote_count":1,"up_vote_count":19,"is_accepted":false,"score":18,"last_activity_date":1570347367,"creation_date":1570347367,"answer_id":58255188,"question_id":12192050,"body_markdown":"As Jesper said, it&#39;s **entirely arbitrary**. You can think of what works for your organization and make that the convention.\r\n\r\nFor me, it&#39;s something like this:\r\n\r\n\r\n&gt; **utils** - Static class, that can be freely moved and imported anywhere.\r\n\r\nDoing general tasks that could be useful in different modules. As Peter Lawrey said, more *specific names* are useful.\r\n\r\n&gt; **helper** - Class *helping* another class or a module.\r\n\r\nTasks that are only used in the module it&#39;s placed and won&#39;t make sense to be imported elsewhere. Hence the name could be more specific - ***ModuleName*Helper** (e.g. *AdministrationHelper*, *LoginHelper*)\r\n","title":"What are the differences between Helper and Utility classes?","body":"<p>As Jesper said, it's <strong>entirely arbitrary</strong>. You can think of what works for your organization and make that the convention.</p>\n\n<p>For me, it's something like this:</p>\n\n<blockquote>\n  <p><strong>utils</strong> - Static class, that can be freely moved and imported anywhere.</p>\n</blockquote>\n\n<p>Doing general tasks that could be useful in different modules. As Peter Lawrey said, more <em>specific names</em> are useful.</p>\n\n<blockquote>\n  <p><strong>helper</strong> - Class <em>helping</em> another class or a module.</p>\n</blockquote>\n\n<p>Tasks that are only used in the module it's placed and won't make sense to be imported elsewhere. Hence the name could be more specific - <strong><em>ModuleName</em>Helper</strong> (e.g. <em>AdministrationHelper</em>, <em>LoginHelper</em>)</p>\n"},{"tags":[],"owner":{"account_id":22136417,"reputation":1,"user_id":19285751,"display_name":"Pedro Nastasi Bermudez"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1682799476,"creation_date":1682794161,"answer_id":76137878,"question_id":12192050,"body_markdown":"Helper Functions/Classes: These are functions or classes that are designed to provide support or aid to other parts of the program. They are often used to encapsulate complex or repetitive logic, and are typically defined within a specific module or part of the program. Helper functions/classes may depend on other parts of the program or external libraries, and may be tightly coupled with the code they support. Examples of helper functions/classes might include form validation functions or data formatting classes.\r\n\r\nUtility Functions/Classes: These are functions or classes that perform common or generic operations that are not tied to any specific part of the program. They are usually defined separately from the rest of the program and can be used throughout the program or in multiple programs. Utility functions/classes are typically independent of other parts of the program, and may not have any dependencies beyond the standard library. Examples of utility functions/classes might include string manipulation functions or math libraries.","title":"What are the differences between Helper and Utility classes?","body":"<p>Helper Functions/Classes: These are functions or classes that are designed to provide support or aid to other parts of the program. They are often used to encapsulate complex or repetitive logic, and are typically defined within a specific module or part of the program. Helper functions/classes may depend on other parts of the program or external libraries, and may be tightly coupled with the code they support. Examples of helper functions/classes might include form validation functions or data formatting classes.</p>\n<p>Utility Functions/Classes: These are functions or classes that perform common or generic operations that are not tied to any specific part of the program. They are usually defined separately from the rest of the program and can be used throughout the program or in multiple programs. Utility functions/classes are typically independent of other parts of the program, and may not have any dependencies beyond the standard library. Examples of utility functions/classes might include string manipulation functions or math libraries.</p>\n"},{"tags":[],"owner":{"account_id":5954045,"reputation":3379,"user_id":4681265,"display_name":"Adrian"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1692284147,"creation_date":1691772219,"answer_id":76885374,"question_id":12192050,"body_markdown":"A *Utility* class is one not depending on the usage context (aka, application/system&#39;s business or domain) hence is less prone to vary. Examples: StringUtils, MathUtils, etc.  \r\n\r\nA Utility class does not necessarily have all its methods static, though usually it happens so. Examples: \r\n- a `SortUtils` class that depends on some configuration passed to it at instantiation time to customize how to deal with `null`(s) no matter the business context; e.g. put `null`(s) at the end/start, handle Any*Empty*BusinessObject(s) as `null`, etc  \r\n- a `XDomainObjectUtils.toString(xDomainObject)` that based on some customization will return a distinct result, no matter the business context (well, here will matter slightly because it&#39;ll have to be something involving a XDomainObject)\r\n- a `LogUtils` class that depends on some configuration passed to it at instantiation time to customize its behaviour\r\n\r\nEven if at application/system level more same Utility class instances are needed, each configured differently, as long as Utility class&#39; logic is not dependent on a particular business context, it&#39;s still a Utility class.\r\n\r\nThese might not be the best examples (especially the `LogUtils` one for nowadays) but I guess you see a pattern here: when the utility class has to behave in a configurable fashion then it might no longer have static methods (only) because one needs to parameterize it with the configuration or strategy (see the Strategy pattern) that changes its behaviour.\r\n\r\nA *Helper* class is one containing methods dependent on one particular scenario, methods that are not implementing the main logic of that scenario because another class does it. The Helper&#39;s methods could stay into the main-logic-implementing-class but doing so would pollute it hence they are better extracted into a distinct class (i.e. Helper). That&#39;s why the name: the Helper class is &quot;helping&quot; the main-logic-implementing-class.\r\n\r\nExample: `XService` is using `YService` that is throwing `YServiceException`(s) while the `XService`&#39;s methods are supposed to only throw `XServiceException`(s). One could use `try`-`catch` everywhere in `XService` or one could create `XServiceHelper` that&#39;s adapting `YServiceService` exceptions to `XServiceException` leaving the XService code more easy to read. This approach makes sense when that `try`-`catch` occurs so many times that really blurs the main code; besides `try`-`catch` once could have verbose types/values conversion/transformation, e.g. `Stream` processing that `reduce` some collection, which again could be moved to a helper if otherwise they bring a significant amount of code in the middle of the main-logic-implementing-class.","title":"What are the differences between Helper and Utility classes?","body":"<p>A <em>Utility</em> class is one not depending on the usage context (aka, application/system's business or domain) hence is less prone to vary. Examples: StringUtils, MathUtils, etc.</p>\n<p>A Utility class does not necessarily have all its methods static, though usually it happens so. Examples:</p>\n<ul>\n<li>a <code>SortUtils</code> class that depends on some configuration passed to it at instantiation time to customize how to deal with <code>null</code>(s) no matter the business context; e.g. put <code>null</code>(s) at the end/start, handle Any<em>Empty</em>BusinessObject(s) as <code>null</code>, etc</li>\n<li>a <code>XDomainObjectUtils.toString(xDomainObject)</code> that based on some customization will return a distinct result, no matter the business context (well, here will matter slightly because it'll have to be something involving a XDomainObject)</li>\n<li>a <code>LogUtils</code> class that depends on some configuration passed to it at instantiation time to customize its behaviour</li>\n</ul>\n<p>Even if at application/system level more same Utility class instances are needed, each configured differently, as long as Utility class' logic is not dependent on a particular business context, it's still a Utility class.</p>\n<p>These might not be the best examples (especially the <code>LogUtils</code> one for nowadays) but I guess you see a pattern here: when the utility class has to behave in a configurable fashion then it might no longer have static methods (only) because one needs to parameterize it with the configuration or strategy (see the Strategy pattern) that changes its behaviour.</p>\n<p>A <em>Helper</em> class is one containing methods dependent on one particular scenario, methods that are not implementing the main logic of that scenario because another class does it. The Helper's methods could stay into the main-logic-implementing-class but doing so would pollute it hence they are better extracted into a distinct class (i.e. Helper). That's why the name: the Helper class is &quot;helping&quot; the main-logic-implementing-class.</p>\n<p>Example: <code>XService</code> is using <code>YService</code> that is throwing <code>YServiceException</code>(s) while the <code>XService</code>'s methods are supposed to only throw <code>XServiceException</code>(s). One could use <code>try</code>-<code>catch</code> everywhere in <code>XService</code> or one could create <code>XServiceHelper</code> that's adapting <code>YServiceService</code> exceptions to <code>XServiceException</code> leaving the XService code more easy to read. This approach makes sense when that <code>try</code>-<code>catch</code> occurs so many times that really blurs the main code; besides <code>try</code>-<code>catch</code> once could have verbose types/values conversion/transformation, e.g. <code>Stream</code> processing that <code>reduce</code> some collection, which again could be moved to a helper if otherwise they bring a significant amount of code in the middle of the main-logic-implementing-class.</p>\n"}],"owner":{"account_id":413833,"reputation":1839,"user_id":787698,"accept_rate":40,"display_name":"jakcam"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":103357,"favorite_count":0,"down_vote_count":3,"up_vote_count":167,"closed_date":1692203883,"accepted_answer_id":12192155,"answer_count":7,"score":164,"last_activity_date":1692284147,"creation_date":1346312257,"question_id":12192050,"body_markdown":"How determine how call a class XHelper or XUtils ?\r\n\r\nTo my mind  :\r\n\r\n**Helper class**, is a class that can be instantiate and do some business work\r\n\r\n**Utils class**, is a static class that perform small and repetitive operations on a kind of instance (example of utils classes ArrayUtils or IOUtils from Apache)","title":"What are the differences between Helper and Utility classes?","body":"<p>How determine how call a class XHelper or XUtils ?</p>\n\n<p>To my mind  :</p>\n\n<p><strong>Helper class</strong>, is a class that can be instantiate and do some business work</p>\n\n<p><strong>Utils class</strong>, is a static class that perform small and repetitive operations on a kind of instance (example of utils classes ArrayUtils or IOUtils from Apache)</p>\n"},{"tags":["java","reflection"],"comments":[{"owner":{"account_id":3211603,"reputation":289297,"user_id":2711488,"display_name":"Holger"},"score":1,"creation_date":1692618280,"post_id":76922437,"comment_id":135643454,"body_markdown":"Does the thread pool use distinctive thread names? Then, you can first check whether a thread with a name indicating the existence of the pool exists.","body":"Does the thread pool use distinctive thread names? Then, you can first check whether a thread with a name indicating the existence of the pool exists."},{"owner":{"account_id":7639,"reputation":23810,"user_id":13317,"accept_rate":85,"display_name":"Kenster"},"score":0,"creation_date":1692645037,"post_id":76922437,"comment_id":135649149,"body_markdown":"@Holger The threadpool does use a distinctive thread name. But there are other deployments in this tomcat instance using the same third-party library. So there are threads with the distinctive name belonging to other deployments.","body":"@Holger The threadpool does use a distinctive thread name. But there are other deployments in this tomcat instance using the same third-party library. So there are threads with the distinctive name belonging to other deployments."}],"answers":[{"tags":[],"owner":{"account_id":8192773,"reputation":54,"user_id":17364339,"display_name":"KpekepSalt"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1692283518,"creation_date":1692283518,"answer_id":76922630,"question_id":76922437,"body_markdown":"Static block code executes only once during the class loading.\r\nAt this point:\r\n```java\r\n    static {\r\n        System.out.println(&quot;A initializing&quot;);\r\n        field = &quot;I&#39;m initialized!&quot;;\r\n    }\r\n```\r\nclass is not initialized, but just loaded into JVM. You can&#39;t get information of class via reflection if it is not loaded. ","title":"Get static field through reflection without triggering initialization?","body":"<p>Static block code executes only once during the class loading.\nAt this point:</p>\n<pre class=\"lang-java prettyprint-override\"><code>    static {\n        System.out.println(&quot;A initializing&quot;);\n        field = &quot;I'm initialized!&quot;;\n    }\n</code></pre>\n<p>class is not initialized, but just loaded into JVM. You can't get information of class via reflection if it is not loaded.</p>\n"},{"tags":[],"owner":{"account_id":5404,"reputation":22089,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1692283943,"creation_date":1692283943,"answer_id":76922697,"question_id":76922437,"body_markdown":"The only way to fix this is to not tie your initialization to class loading. And that&#39;s fine, because that&#39;s a bad idea anyway. So rewrite your class:\r\n\r\n```\r\npublic class A {\r\n    private static A LATEST_INSTANCE;\r\n    private String field;\r\n    \r\n    private A() {\r\n        System.out.println(&quot;A initializing&quot;);\r\n        field = &quot;I&#39;m initialized!&quot;;\r\n        LATEST_INSTANCE = this;\r\n    }\r\n}\r\n```\r\n\r\nNow you can access the `LATEST_INSTANCE` field and do whatever you want to its state. You don&#39;t even need reflection! You can create static methods to access and access or initialize the instance(s), whatever you need.","title":"Get static field through reflection without triggering initialization?","body":"<p>The only way to fix this is to not tie your initialization to class loading. And that's fine, because that's a bad idea anyway. So rewrite your class:</p>\n<pre><code>public class A {\n    private static A LATEST_INSTANCE;\n    private String field;\n    \n    private A() {\n        System.out.println(&quot;A initializing&quot;);\n        field = &quot;I'm initialized!&quot;;\n        LATEST_INSTANCE = this;\n    }\n}\n</code></pre>\n<p>Now you can access the <code>LATEST_INSTANCE</code> field and do whatever you want to its state. You don't even need reflection! You can create static methods to access and access or initialize the instance(s), whatever you need.</p>\n"}],"owner":{"account_id":7639,"reputation":23810,"user_id":13317,"accept_rate":85,"display_name":"Kenster"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":44,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1692283943,"creation_date":1692282190,"question_id":76922437,"body_markdown":"We have a WAR application which uses a third-party library that creates a threadpool with a running thread as a static field of one of its internal classes. When we undeploy the WAR, this thread continues running. To work around this, I want to run some code during undeployment which uses reflection to access the private static field and shut down the thread pool.\r\n\r\nThe threadpool is created in a static initializer for the class. It&#39;s possible the class in question hasn&#39;t been loaded or initialized when our shutdown code runs, and I don&#39;t want the shutdown code to initialize the class just to shut it down again if I can avoid that.\r\n\r\nI can use the three-argument form of `Class.forName()` to get the class without initializing it. However, after getting the `Field` that I want, getting the value of the field still triggers the class to be initialized. I&#39;m looking for a way to avoid that.\r\n\r\nHere is some example code:\r\n\r\n    package scratch;\r\n    public class A {\r\n        private static final String field;\r\n        static {\r\n            System.out.println(&quot;A initializing&quot;);\r\n            field = &quot;I&#39;m initialized!&quot;;\r\n        }\r\n    }\r\n\r\n    package scratch;\r\n    public class B {\r\n        public static void main(String[] args) {\r\n            // var a = new A();\r\n            try {\r\n                System.out.println(&quot;B starting&quot;);\r\n                var clazz = Class.forName(&quot;scratch.A&quot;, false, B.class.getClassLoader());\r\n                System.out.println(&quot;B got class&quot;);\r\n                var field = clazz.getDeclaredField(&quot;field&quot;);\r\n                System.out.println(&quot;B got field&quot;);\r\n                field.setAccessible(true);\r\n                System.out.println(&quot;B set accessible&quot;);\r\n                var value = field.get(null);\r\n                System.out.println(&quot;B got value &#39;&quot; + value + &quot;&#39;&quot;);\r\n            } catch (Exception e) {\r\n                System.out.println(e);\r\n            }\r\n        }\r\n    }\r\n\r\nRunning this code produces this output:\r\n\r\n    B starting\r\n    B got class\r\n    B got field\r\n    B set accessible\r\n    A initializing\r\n    B got value &#39;I&#39;m initialized!&#39;\r\n\r\nThe call to `Field.get()` triggers initialization of the class.\r\n\r\nI just want to avoid initializing the class (if it&#39;s not already initialized) in the process of accessing this field to shut it down. Is there any way to avoid fetching the class if it&#39;s not already loaded? Or to test whether it&#39;s initialized before fetching the field? Or to fetch the value of the field without triggering initialization?","title":"Get static field through reflection without triggering initialization?","body":"<p>We have a WAR application which uses a third-party library that creates a threadpool with a running thread as a static field of one of its internal classes. When we undeploy the WAR, this thread continues running. To work around this, I want to run some code during undeployment which uses reflection to access the private static field and shut down the thread pool.</p>\n<p>The threadpool is created in a static initializer for the class. It's possible the class in question hasn't been loaded or initialized when our shutdown code runs, and I don't want the shutdown code to initialize the class just to shut it down again if I can avoid that.</p>\n<p>I can use the three-argument form of <code>Class.forName()</code> to get the class without initializing it. However, after getting the <code>Field</code> that I want, getting the value of the field still triggers the class to be initialized. I'm looking for a way to avoid that.</p>\n<p>Here is some example code:</p>\n<pre><code>package scratch;\npublic class A {\n    private static final String field;\n    static {\n        System.out.println(&quot;A initializing&quot;);\n        field = &quot;I'm initialized!&quot;;\n    }\n}\n\npackage scratch;\npublic class B {\n    public static void main(String[] args) {\n        // var a = new A();\n        try {\n            System.out.println(&quot;B starting&quot;);\n            var clazz = Class.forName(&quot;scratch.A&quot;, false, B.class.getClassLoader());\n            System.out.println(&quot;B got class&quot;);\n            var field = clazz.getDeclaredField(&quot;field&quot;);\n            System.out.println(&quot;B got field&quot;);\n            field.setAccessible(true);\n            System.out.println(&quot;B set accessible&quot;);\n            var value = field.get(null);\n            System.out.println(&quot;B got value '&quot; + value + &quot;'&quot;);\n        } catch (Exception e) {\n            System.out.println(e);\n        }\n    }\n}\n</code></pre>\n<p>Running this code produces this output:</p>\n<pre><code>B starting\nB got class\nB got field\nB set accessible\nA initializing\nB got value 'I'm initialized!'\n</code></pre>\n<p>The call to <code>Field.get()</code> triggers initialization of the class.</p>\n<p>I just want to avoid initializing the class (if it's not already initialized) in the process of accessing this field to shut it down. Is there any way to avoid fetching the class if it's not already loaded? Or to test whether it's initialized before fetching the field? Or to fetch the value of the field without triggering initialization?</p>\n"},{"tags":["java","spring","spring-boot","kotlin","spring-security"],"answers":[{"tags":[],"owner":{"account_id":29214968,"reputation":186,"user_id":22381995,"display_name":"cant-code"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1692283808,"creation_date":1692205537,"answer_id":76915680,"question_id":76915440,"body_markdown":"How about using OncePerRequestFilter instead and overriding the shouldNotFilter method and adding any endpoints to be excluded. I have added an example for a single url but you can maintain a list and exclude those endpoints as well.\r\n\r\n```\r\n@Component\r\nclass JwtFilter : OncePerRequestFilter {\r\n    override fun doFilterInternal(request: ServletRequest, response: ServletResponse, chain: FilterChain) {\r\n        val httpRequest = request as HttpServletRequest\r\n        val httpResponse = response as HttpServletResponse\r\n        val jwt = httpRequest.getHeader(&quot;Authorization&quot;)?.removePrefix(&quot;Bearer &quot;)\r\n        if (jwt != null) {\r\n            val extractedToken = verifyJwtWithLambda(jwt)\r\n            val isValid: Boolean? = extractedToken[&quot;isValid&quot;] as? Boolean\r\n            if (isValid!!) {\r\n                val attributes = extractedToken[&quot;attributes&quot;] as? Map&lt;*, *&gt;\r\n                val subject = attributes?.get(&quot;userId&quot;) as? String\r\n                val authentication = UsernamePasswordAuthenticationToken(subject, null, emptyList())\r\n                SecurityContextHolder.getContext().authentication = authentication\r\n                chain.doFilter(request, response)\r\n            } else {\r\n                httpResponse.status = HttpServletResponse.SC_UNAUTHORIZED\r\n            }\r\n        } else {\r\n            httpResponse.status = HttpServletResponse.SC_UNAUTHORIZED\r\n        }\r\n    }\r\n\r\n    override fun shouldNotFilter(request: HttpServletRequest): Boolean {\r\n        val url = request.requestURL;\r\n        return &quot;/health&quot;.equals(url);\r\n    }\r\n}\r\n```\r\n\r\nReference:\r\n\r\nhttps://stackoverflow.com/questions/70387209/extends-onceperrequestfilter-bypass-specific-url\r\n\r\nhttps://www.baeldung.com/spring-exclude-filter","title":"Not able to exclude defined URLS from SecurityFilterChain","body":"<p>How about using OncePerRequestFilter instead and overriding the shouldNotFilter method and adding any endpoints to be excluded. I have added an example for a single url but you can maintain a list and exclude those endpoints as well.</p>\n<pre><code>@Component\nclass JwtFilter : OncePerRequestFilter {\n    override fun doFilterInternal(request: ServletRequest, response: ServletResponse, chain: FilterChain) {\n        val httpRequest = request as HttpServletRequest\n        val httpResponse = response as HttpServletResponse\n        val jwt = httpRequest.getHeader(&quot;Authorization&quot;)?.removePrefix(&quot;Bearer &quot;)\n        if (jwt != null) {\n            val extractedToken = verifyJwtWithLambda(jwt)\n            val isValid: Boolean? = extractedToken[&quot;isValid&quot;] as? Boolean\n            if (isValid!!) {\n                val attributes = extractedToken[&quot;attributes&quot;] as? Map&lt;*, *&gt;\n                val subject = attributes?.get(&quot;userId&quot;) as? String\n                val authentication = UsernamePasswordAuthenticationToken(subject, null, emptyList())\n                SecurityContextHolder.getContext().authentication = authentication\n                chain.doFilter(request, response)\n            } else {\n                httpResponse.status = HttpServletResponse.SC_UNAUTHORIZED\n            }\n        } else {\n            httpResponse.status = HttpServletResponse.SC_UNAUTHORIZED\n        }\n    }\n\n    override fun shouldNotFilter(request: HttpServletRequest): Boolean {\n        val url = request.requestURL;\n        return &quot;/health&quot;.equals(url);\n    }\n}\n</code></pre>\n<p>Reference:</p>\n<p><a href=\"https://stackoverflow.com/questions/70387209/extends-onceperrequestfilter-bypass-specific-url\">Extends OncePerRequestFilter bypass specific URL</a></p>\n<p><a href=\"https://www.baeldung.com/spring-exclude-filter\" rel=\"nofollow noreferrer\">https://www.baeldung.com/spring-exclude-filter</a></p>\n"}],"owner":{"account_id":8490830,"reputation":427,"user_id":6934695,"accept_rate":89,"display_name":"nerdicsapo"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":142,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"accepted_answer_id":76915680,"answer_count":1,"score":-1,"last_activity_date":1692283808,"creation_date":1692203145,"question_id":76915440,"body_markdown":"I&#39;m working on a spring-boot3 project and added spring-security 6 for authorization process. Since it&#39;s working with Authorization token in header, I would like to let in with no Authorization token, such as /health or /signup\r\n\r\nFirst, I wrote SecurityConfig\r\n\r\n    @Configuration\r\n    @EnableWebSecurity\r\n    @Order(1)\r\n    class SecurityConfiguration(private val jwtFilter : JwtFilter) {\r\n        @Bean\r\n        fun filterChain(http: HttpSecurity): SecurityFilterChain {\r\n            http.csrf().disable().\r\n            authorizeHttpRequests { authorize -&gt;\r\n                authorize\r\n                    .requestMatchers(&quot;/health&quot;).permitAll()\r\n                    .anyRequest().authenticated()\r\n            }\r\n    \r\n            http.addFilterBefore(jwtFilter, UsernamePasswordAuthenticationFilter::class.java)\r\n            return http.build()\r\n        }\r\n    }\r\n\r\nAnd here is filter;\r\n\r\n    @Component\r\n    class JwtFilter : Filter {\r\n        override fun doFilter(request: ServletRequest, response: ServletResponse, chain: FilterChain) {\r\n            val httpRequest = request as HttpServletRequest\r\n            val httpResponse = response as HttpServletResponse\r\n            val jwt = httpRequest.getHeader(&quot;Authorization&quot;)?.removePrefix(&quot;Bearer &quot;)\r\n            if(jwt != null){\r\n                val extractedToken = verifyJwtWithLambda(jwt)\r\n                val isValid : Boolean? = extractedToken[&quot;isValid&quot;] as? Boolean\r\n                if(isValid!!){\r\n                    val attributes = extractedToken[&quot;attributes&quot;] as? Map&lt;*, *&gt;\r\n                    val subject = attributes?.get(&quot;userId&quot;) as? String\r\n                    val authentication = UsernamePasswordAuthenticationToken(subject, null, emptyList())\r\n                    SecurityContextHolder.getContext().authentication = authentication\r\n                    chain.doFilter(request, response)\r\n                }\r\n                else {\r\n                    httpResponse.status = HttpServletResponse.SC_UNAUTHORIZED\r\n                }\r\n            }\r\n            else {\r\n                    httpResponse.status = HttpServletResponse.SC_UNAUTHORIZED\r\n            }\r\n        }\r\n\r\n\r\nNow, when I send get request to /health, it returns 401. But when I send request with Authorization token, it returns 200.\r\n\r\nWhat I have tried so far?\r\n\r\n - Added WebSecurityCustomizer to ignore, did not work.\r\n   \r\n - Tried to .anonymous instead of .permitAll, did not work.\r\n   \r\n - Added logic control to JwtFilter to check ServletPath for defined urls and then chain.doFilter, it works but I do not think it is usable.\r\n\r\n -  https://stackoverflow.com/questions/24696717/spring-security-permitall-not-allowing-anonymous-access , Tried this topic\r\n\r\n - I tried to change addFilterBefore like addFilterAfter, did not work.\r\n\r\n\r\n - If I would change httpResponse.status = HttpServletResponse.SC_UNAUTHORIZED part in second Else block with chain.doFilter(), it works as expected but returns 403 instead of 401.\r\n\r\n\r\nThank you a lot.","title":"Not able to exclude defined URLS from SecurityFilterChain","body":"<p>I'm working on a spring-boot3 project and added spring-security 6 for authorization process. Since it's working with Authorization token in header, I would like to let in with no Authorization token, such as /health or /signup</p>\n<p>First, I wrote SecurityConfig</p>\n<pre><code>@Configuration\n@EnableWebSecurity\n@Order(1)\nclass SecurityConfiguration(private val jwtFilter : JwtFilter) {\n    @Bean\n    fun filterChain(http: HttpSecurity): SecurityFilterChain {\n        http.csrf().disable().\n        authorizeHttpRequests { authorize -&gt;\n            authorize\n                .requestMatchers(&quot;/health&quot;).permitAll()\n                .anyRequest().authenticated()\n        }\n\n        http.addFilterBefore(jwtFilter, UsernamePasswordAuthenticationFilter::class.java)\n        return http.build()\n    }\n}\n</code></pre>\n<p>And here is filter;</p>\n<pre><code>@Component\nclass JwtFilter : Filter {\n    override fun doFilter(request: ServletRequest, response: ServletResponse, chain: FilterChain) {\n        val httpRequest = request as HttpServletRequest\n        val httpResponse = response as HttpServletResponse\n        val jwt = httpRequest.getHeader(&quot;Authorization&quot;)?.removePrefix(&quot;Bearer &quot;)\n        if(jwt != null){\n            val extractedToken = verifyJwtWithLambda(jwt)\n            val isValid : Boolean? = extractedToken[&quot;isValid&quot;] as? Boolean\n            if(isValid!!){\n                val attributes = extractedToken[&quot;attributes&quot;] as? Map&lt;*, *&gt;\n                val subject = attributes?.get(&quot;userId&quot;) as? String\n                val authentication = UsernamePasswordAuthenticationToken(subject, null, emptyList())\n                SecurityContextHolder.getContext().authentication = authentication\n                chain.doFilter(request, response)\n            }\n            else {\n                httpResponse.status = HttpServletResponse.SC_UNAUTHORIZED\n            }\n        }\n        else {\n                httpResponse.status = HttpServletResponse.SC_UNAUTHORIZED\n        }\n    }\n</code></pre>\n<p>Now, when I send get request to /health, it returns 401. But when I send request with Authorization token, it returns 200.</p>\n<p>What I have tried so far?</p>\n<ul>\n<li><p>Added WebSecurityCustomizer to ignore, did not work.</p>\n</li>\n<li><p>Tried to .anonymous instead of .permitAll, did not work.</p>\n</li>\n<li><p>Added logic control to JwtFilter to check ServletPath for defined urls and then chain.doFilter, it works but I do not think it is usable.</p>\n</li>\n<li><p><a href=\"https://stackoverflow.com/questions/24696717/spring-security-permitall-not-allowing-anonymous-access\">Spring Security permitAll not allowing anonymous access</a> , Tried this topic</p>\n</li>\n<li><p>I tried to change addFilterBefore like addFilterAfter, did not work.</p>\n</li>\n<li><p>If I would change httpResponse.status = HttpServletResponse.SC_UNAUTHORIZED part in second Else block with chain.doFilter(), it works as expected but returns 403 instead of 401.</p>\n</li>\n</ul>\n<p>Thank you a lot.</p>\n"},{"tags":["java","solr","lucene","sap-commerce-cloud","morelikethis"],"owner":{"account_id":13364598,"reputation":119,"user_id":9645351,"display_name":"Oleksandr Onopriienko"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":17,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1692283337,"creation_date":1692283337,"question_id":76922600,"body_markdown":"I&#39;m trying to get results from solr &#39;MoreLikeThis&#39; search in Hybris.\r\nFor example: If I try to query solr in Solr UI , query will look like this - \r\n\r\n&gt; https://localhost:8983/solr/master_backoffice_backoffice_product_flip/mlt?indent=true&amp;mlt.count=10&amp;mlt.fl=manufacturerName_text%2Cdescription_text_en%2CcatalogVersion%2Ccategory_string_mv&amp;mlt.match.include=true%2Ctrue&amp;q.op=AND&amp;q=id%3A8796102066177%2CcatalogVersion%3AOnline\r\n\r\nAnd in the result I will take smth like this :\r\n\r\n        {\r\n      &quot;responseHeader&quot;:{\r\n        &quot;status&quot;:0,\r\n        &quot;QTime&quot;:3},\r\n      &quot;match&quot;:{&quot;numFound&quot;:1,&quot;start&quot;:0,&quot;numFoundExact&quot;:true,&quot;docs&quot;:[\r\n          {\r\n           \r\n      },\r\n      &quot;response&quot;:{&quot;numFound&quot;:433,&quot;start&quot;:0,&quot;numFoundExact&quot;:true,&quot;docs&quot;:[\r\n          {\r\n       \r\n\r\n\r\nThe response will include a section match, which includes the original document. The response section includes the similar documents.\r\n\r\nBefore that I added Request Handler in solrconfig.xml - \r\n\r\n    &lt;requestHandler name=&quot;/mlt&quot; class=&quot;solr.MoreLikeThisHandler&quot;&gt;\r\n    \t\t&lt;str name=&quot;mlt.fl&quot;&gt;body&lt;/str&gt;\r\n    &lt;/requestHandler&gt;\r\n\r\n\r\nHow can I perform this request in Hybris and get the ProductData results ?\r\nAs far as I know Hybris does not have OOTB implementation for Solr MoreLikeThis. Maybe someone has some workarounds or advices regarding this? \r\n\r\nAlso , I found another way how to get &#39;MoreLikeThis&#39; results directly in Hybris.By overriding OOTB DefaultFacetSearchService and adding those query params :\r\n\r\n     public SearchQuery createFreeTextSearchQueryFromTemplate (FacetSearchConfig facetSearchConfig, IndexedType indexedType, String queryTemplateName, String userQuery) {\r\n            final SearchQuery searchQuery = super.createFreeTextSearchQueryFromTemplate(facetSearchConfig, indexedType, queryTemplateName, userQuery);\r\n            searchQuery.addRawParam(&quot;mlt&quot;, &quot;true&quot;);\r\n            searchQuery.addRawParam(&quot;mlt.fl&quot;, &quot;fulltext_en,catalogVersion,category_string_mv&quot;);\r\n            searchQuery.addRawParam(&quot;mlt.count&quot;, &quot;10&quot;); //count of documents in the response\r\n            searchQuery.addRawParam(&quot;mlt.mindf&quot;, &quot;2&quot;); //min document frequency\r\n            searchQuery.addRawParam(&quot;mlt.mintf&quot;, &quot;1&quot;); //min term frequency\r\n            return searchQuery;\r\n        }\r\nIn a result we can access the &#39;MoreLikeThisResult&#39; in following way - \r\n\r\n    SolrSearchResult.getSolrObject().getResponse().get(“moreLikeThis”))\r\n\r\nBut In the result, we will have different data structure from simple Solr search result , and we cant reuse the existing implementation of fetching, converting, populating and so on...\r\nSo , maybe there is more easy way to fetch &#39;MoreLikeThis&#39; result from solr, in order not to implement the whole flow.\r\n","title":"Solr MoreLikeThis in Hybris","body":"<p>I'm trying to get results from solr 'MoreLikeThis' search in Hybris.\nFor example: If I try to query solr in Solr UI , query will look like this -</p>\n<blockquote>\n<p>https://localhost:8983/solr/master_backoffice_backoffice_product_flip/mlt?indent=true&amp;mlt.count=10&amp;mlt.fl=manufacturerName_text%2Cdescription_text_en%2CcatalogVersion%2Ccategory_string_mv&amp;mlt.match.include=true%2Ctrue&amp;q.op=AND&amp;q=id%3A8796102066177%2CcatalogVersion%3AOnline</p>\n</blockquote>\n<p>And in the result I will take smth like this :</p>\n<pre><code>    {\n  &quot;responseHeader&quot;:{\n    &quot;status&quot;:0,\n    &quot;QTime&quot;:3},\n  &quot;match&quot;:{&quot;numFound&quot;:1,&quot;start&quot;:0,&quot;numFoundExact&quot;:true,&quot;docs&quot;:[\n      {\n       \n  },\n  &quot;response&quot;:{&quot;numFound&quot;:433,&quot;start&quot;:0,&quot;numFoundExact&quot;:true,&quot;docs&quot;:[\n      {\n   \n</code></pre>\n<p>The response will include a section match, which includes the original document. The response section includes the similar documents.</p>\n<p>Before that I added Request Handler in solrconfig.xml -</p>\n<pre><code>&lt;requestHandler name=&quot;/mlt&quot; class=&quot;solr.MoreLikeThisHandler&quot;&gt;\n        &lt;str name=&quot;mlt.fl&quot;&gt;body&lt;/str&gt;\n&lt;/requestHandler&gt;\n</code></pre>\n<p>How can I perform this request in Hybris and get the ProductData results ?\nAs far as I know Hybris does not have OOTB implementation for Solr MoreLikeThis. Maybe someone has some workarounds or advices regarding this?</p>\n<p>Also , I found another way how to get 'MoreLikeThis' results directly in Hybris.By overriding OOTB DefaultFacetSearchService and adding those query params :</p>\n<pre><code> public SearchQuery createFreeTextSearchQueryFromTemplate (FacetSearchConfig facetSearchConfig, IndexedType indexedType, String queryTemplateName, String userQuery) {\n        final SearchQuery searchQuery = super.createFreeTextSearchQueryFromTemplate(facetSearchConfig, indexedType, queryTemplateName, userQuery);\n        searchQuery.addRawParam(&quot;mlt&quot;, &quot;true&quot;);\n        searchQuery.addRawParam(&quot;mlt.fl&quot;, &quot;fulltext_en,catalogVersion,category_string_mv&quot;);\n        searchQuery.addRawParam(&quot;mlt.count&quot;, &quot;10&quot;); //count of documents in the response\n        searchQuery.addRawParam(&quot;mlt.mindf&quot;, &quot;2&quot;); //min document frequency\n        searchQuery.addRawParam(&quot;mlt.mintf&quot;, &quot;1&quot;); //min term frequency\n        return searchQuery;\n    }\n</code></pre>\n<p>In a result we can access the 'MoreLikeThisResult' in following way -</p>\n<pre><code>SolrSearchResult.getSolrObject().getResponse().get(“moreLikeThis”))\n</code></pre>\n<p>But In the result, we will have different data structure from simple Solr search result , and we cant reuse the existing implementation of fetching, converting, populating and so on...\nSo , maybe there is more easy way to fetch 'MoreLikeThis' result from solr, in order not to implement the whole flow.</p>\n"},{"tags":["java","redhat","keycloak","keycloak-services","redhat-sso"],"comments":[{"owner":{"account_id":1235468,"reputation":31121,"user_id":1199132,"accept_rate":83,"display_name":"Aritz"},"score":0,"creation_date":1519372306,"post_id":48930281,"comment_id":84893368,"body_markdown":"Are you using the KC provided database or some other external DB?","body":"Are you using the KC provided database or some other external DB?"},{"owner":{"account_id":65983,"reputation":9310,"user_id":193850,"accept_rate":85,"display_name":"Michel"},"score":0,"creation_date":1519375836,"post_id":48930281,"comment_id":84894894,"body_markdown":"external postgresql . So querying directly is possible but our last option ;-)","body":"external postgresql . So querying directly is possible but our last option ;-)"},{"owner":{"account_id":1235468,"reputation":31121,"user_id":1199132,"accept_rate":83,"display_name":"Aritz"},"score":0,"creation_date":1519378288,"post_id":48930281,"comment_id":84896124,"body_markdown":"If it is for internal use I guess you could use some direct query... Still, for the performance problem, have you considered a more powerful machine? Or even upgrading the KC version? Are you using some kind of pagination to list them?","body":"If it is for internal use I guess you could use some direct query... Still, for the performance problem, have you considered a more powerful machine? Or even upgrading the KC version? Are you using some kind of pagination to list them?"},{"owner":{"account_id":65983,"reputation":9310,"user_id":193850,"accept_rate":85,"display_name":"Michel"},"score":0,"creation_date":1519491531,"post_id":48930281,"comment_id":84936437,"body_markdown":"Yes we do. 25 user takes 2 seconds and 50 takes 4 seconds. Upgrading the server may help but I guess the API isn&#39;t made for this kind of request. Direct queries seems to be the solution for now","body":"Yes we do. 25 user takes 2 seconds and 50 takes 4 seconds. Upgrading the server may help but I guess the API isn&#39;t made for this kind of request. Direct queries seems to be the solution for now"},{"owner":{"account_id":2864238,"reputation":10897,"user_id":2458858,"accept_rate":85,"display_name":"tryingToLearn"},"score":0,"creation_date":1538643662,"post_id":48930281,"comment_id":92217894,"body_markdown":"@Michel did you find a solution to this? When I export realm, users are not exported.","body":"@Michel did you find a solution to this? When I export realm, users are not exported."},{"owner":{"account_id":65983,"reputation":9310,"user_id":193850,"accept_rate":85,"display_name":"Michel"},"score":0,"creation_date":1538653674,"post_id":48930281,"comment_id":92223751,"body_markdown":"Direct queries on your source DB seems to be the solution for now","body":"Direct queries on your source DB seems to be the solution for now"},{"owner":{"account_id":2864238,"reputation":10897,"user_id":2458858,"accept_rate":85,"display_name":"tryingToLearn"},"score":0,"creation_date":1538730652,"post_id":48930281,"comment_id":92254334,"body_markdown":"I am trying to export users from keycloak database. I am not using a separate source db.","body":"I am trying to export users from keycloak database. I am not using a separate source db."}],"answers":[{"tags":[],"owner":{"account_id":16247807,"reputation":153,"user_id":11732944,"display_name":"Gernot Grames"},"down_vote_count":0,"up_vote_count":14,"is_accepted":false,"score":14,"last_activity_date":1580900580,"creation_date":1580887921,"answer_id":60070937,"question_id":48930281,"body_markdown":"I have done it with an parallel starting container via docker, which connects to the existing keycloak db.\r\n\r\nPlease use the same Version of the container keycloak as the real keacloak has.\r\nBecause of db schema differences between versions.\r\n\r\n**EXPORT**\r\n```\r\ndocker run --rm\\\r\n    --name keycloak_exporter\\\r\n    -v /tmp:/tmp/keycloak-export:Z\\\r\n    -e POSTGRES_DATABASE=keycloak\\\r\n    -e POSTGRES_PASSWORD=PASSOWRD_PLEASE\\\r\n    -e POSTGRES_USER=keycloak\\\r\n    -e DB_VENDOR=POSTGRES\\\r\n    -e POSTGRES_PORT_5432_TCP_ADDR=postgresql.local\\\r\n    jboss/keycloak:3.4.3.Final\\\r\n    -Dkeycloak.migration.action=export\\\r\n    -Dkeycloak.migration.provider=dir\\\r\n    -Dkeycloak.migration.dir=/tmp/keycloak-export\\\r\n    -Dkeycloak.migration.usersExportStrategy=SAME_FILE\\\r\n    -Dkeycloak.migration.realmName=therealm\r\n```\r\n\r\n**IMPORT**\r\n```\r\ndocker run --rm\\\r\n    --name keycloak_importer\\\r\n    -v /tmp:/tmp/keycloak-import:Z\\\r\n    -e POSTGRES_DATABASE=keycloak_dest\\\r\n    -e POSTGRES_PASSWORD=PASSOWRD_DEST_PLEASE\\\r\n    -e POSTGRES_USER=keycloak\\\r\n    -e DB_VENDOR=POSTGRES\\\r\n    -e POSTGRES_PORT_5432_TCP_ADDR=postgresql2.local\\\r\n    jboss/keycloak:3.4.3.Final\\\r\n    -Dkeycloak.migration.action=import\\\r\n    -Dkeycloak.migration.provider=dir\\\r\n    -Dkeycloak.migration.dir=/tmp/keycloak-import\\\r\n    -Dkeycloak.migration.strategy=IGNORE_EXISTING\\\r\n    -Dkeycloak.migration.usersExportStrategy=SAME_FILE\\\r\n    -Dkeycloak.migration.realmName=therealm\r\n```\r\n\r\nPossible config options:\r\n[https://github.com/keycloak/keycloak-documentation/blob/master/server_admin/topics/export-import.adoc][1]\r\n\r\n\r\n  [1]: https://github.com/keycloak/keycloak-documentation/blob/master/server_admin/topics/export-import.adoc","title":"Export all users from KeyCloak","body":"<p>I have done it with an parallel starting container via docker, which connects to the existing keycloak db.</p>\n\n<p>Please use the same Version of the container keycloak as the real keacloak has.\nBecause of db schema differences between versions.</p>\n\n<p><strong>EXPORT</strong></p>\n\n<pre><code>docker run --rm\\\n    --name keycloak_exporter\\\n    -v /tmp:/tmp/keycloak-export:Z\\\n    -e POSTGRES_DATABASE=keycloak\\\n    -e POSTGRES_PASSWORD=PASSOWRD_PLEASE\\\n    -e POSTGRES_USER=keycloak\\\n    -e DB_VENDOR=POSTGRES\\\n    -e POSTGRES_PORT_5432_TCP_ADDR=postgresql.local\\\n    jboss/keycloak:3.4.3.Final\\\n    -Dkeycloak.migration.action=export\\\n    -Dkeycloak.migration.provider=dir\\\n    -Dkeycloak.migration.dir=/tmp/keycloak-export\\\n    -Dkeycloak.migration.usersExportStrategy=SAME_FILE\\\n    -Dkeycloak.migration.realmName=therealm\n</code></pre>\n\n<p><strong>IMPORT</strong></p>\n\n<pre><code>docker run --rm\\\n    --name keycloak_importer\\\n    -v /tmp:/tmp/keycloak-import:Z\\\n    -e POSTGRES_DATABASE=keycloak_dest\\\n    -e POSTGRES_PASSWORD=PASSOWRD_DEST_PLEASE\\\n    -e POSTGRES_USER=keycloak\\\n    -e DB_VENDOR=POSTGRES\\\n    -e POSTGRES_PORT_5432_TCP_ADDR=postgresql2.local\\\n    jboss/keycloak:3.4.3.Final\\\n    -Dkeycloak.migration.action=import\\\n    -Dkeycloak.migration.provider=dir\\\n    -Dkeycloak.migration.dir=/tmp/keycloak-import\\\n    -Dkeycloak.migration.strategy=IGNORE_EXISTING\\\n    -Dkeycloak.migration.usersExportStrategy=SAME_FILE\\\n    -Dkeycloak.migration.realmName=therealm\n</code></pre>\n\n<p>Possible config options:\n<a href=\"https://github.com/keycloak/keycloak-documentation/blob/master/server_admin/topics/export-import.adoc\" rel=\"noreferrer\">https://github.com/keycloak/keycloak-documentation/blob/master/server_admin/topics/export-import.adoc</a></p>\n"},{"tags":[],"owner":{"account_id":4540045,"reputation":1159,"user_id":3688170,"display_name":"Salvatore Pannozzo Capodiferro"},"down_vote_count":0,"up_vote_count":15,"is_accepted":false,"score":15,"last_activity_date":1606980391,"creation_date":1602710014,"answer_id":64361583,"question_id":48930281,"body_markdown":"you need in your docker-compose-yml to bind your folder, not just the realm json file, like this:\r\n\r\n    keycloak:\r\n        image: jboss/keycloak:8.0.1\r\n        container_name: &quot;keycloak&quot;\r\n         volumes:\r\n          - ./realms/:/tmp/\r\n        environment:\r\n          - KEYCLOAK_USER=admin\r\n          - KEYCLOAK_PASSWORD=admin\r\n          - KEYCLOAK_IMPORT=/tmp/realm-export.json -Dkeycloak.profile.feature.upload_scripts=enabled \r\n\r\nwhere realms is your folder beside the yaml file. At this point you can run docker-compose up -d with your basic realm-export.json as always, go in your admin panel, adding users with credentials and roles, and then with this command you will able to export the entire configuration:\r\n\r\n    docker exec -it keycloak /opt/jboss/keycloak/bin/standalone.sh -Djboss.socket.binding.port-offset=100 -Dkeycloak.migration.action=export -Dkeycloak.migration.provider=singleFile -Dkeycloak.migration.realmName=ed-realm -Dkeycloak.migration.usersExportStrategy=REALM_FILE -Dkeycloak.migration.file=/tmp/export.json\r\n\r\nYou will see in your realms folder that a new file will be created, and it will contain the entire configuration, so you can run docker-compose down, replace your old file with this new and run again docker-compose up as many time you want, and redoing the process when you will change your realm again.\r\n\r\n","title":"Export all users from KeyCloak","body":"<p>you need in your docker-compose-yml to bind your folder, not just the realm json file, like this:</p>\n<pre><code>keycloak:\n    image: jboss/keycloak:8.0.1\n    container_name: &quot;keycloak&quot;\n     volumes:\n      - ./realms/:/tmp/\n    environment:\n      - KEYCLOAK_USER=admin\n      - KEYCLOAK_PASSWORD=admin\n      - KEYCLOAK_IMPORT=/tmp/realm-export.json -Dkeycloak.profile.feature.upload_scripts=enabled \n</code></pre>\n<p>where realms is your folder beside the yaml file. At this point you can run docker-compose up -d with your basic realm-export.json as always, go in your admin panel, adding users with credentials and roles, and then with this command you will able to export the entire configuration:</p>\n<pre><code>docker exec -it keycloak /opt/jboss/keycloak/bin/standalone.sh -Djboss.socket.binding.port-offset=100 -Dkeycloak.migration.action=export -Dkeycloak.migration.provider=singleFile -Dkeycloak.migration.realmName=ed-realm -Dkeycloak.migration.usersExportStrategy=REALM_FILE -Dkeycloak.migration.file=/tmp/export.json\n</code></pre>\n<p>You will see in your realms folder that a new file will be created, and it will contain the entire configuration, so you can run docker-compose down, replace your old file with this new and run again docker-compose up as many time you want, and redoing the process when you will change your realm again.</p>\n"},{"tags":[],"owner":{"account_id":13316463,"reputation":55,"user_id":9612721,"display_name":"Kornext"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1686053225,"creation_date":1686053225,"answer_id":76414472,"question_id":48930281,"body_markdown":"\r\nyou can add to your realm.json export file manually\r\n\r\n    &quot;users&quot;: [\r\n      {\r\n        &quot;username&quot;: &quot;admin&quot;,\r\n        &quot;enabled&quot;: true,\r\n        &quot;emailVerified&quot;: true,\r\n        &quot;firstName&quot;: &quot;Rootus&quot;,\r\n        &quot;lastName&quot;: &quot;Adminus&quot;,\r\n        &quot;email&quot;: &quot;local-admin@mail.com&quot;,\r\n        &quot;credentials&quot;: [\r\n          {\r\n            &quot;type&quot;: &quot;password&quot;,\r\n            &quot;value&quot;: &quot;admin&quot;\r\n          }\r\n        ],\r\n        &quot;realmRoles&quot;: [\r\n          &quot;ADMIN&quot;\r\n        ]\r\n      },\r\n      {\r\n        &quot;username&quot;: &quot;operator&quot;,\r\n        &quot;enabled&quot;: true,\r\n        &quot;emailVerified&quot;: true,\r\n        &quot;firstName&quot;: &quot;Operatus&quot;,\r\n        &quot;lastName&quot;: &quot;Operando&quot;,\r\n        &quot;email&quot;: &quot;local-operator@mail.com&quot;,\r\n        &quot;credentials&quot;: [\r\n          {\r\n            &quot;type&quot;: &quot;password&quot;,\r\n            &quot;value&quot;: &quot;operator&quot;\r\n          }\r\n        ],\r\n        &quot;realmRoles&quot;: [\r\n          &quot;ROLE_OPERATOR&quot;\r\n        ]\r\n      }\r\n    ]","title":"Export all users from KeyCloak","body":"<p>you can add to your realm.json export file manually</p>\n<pre><code>&quot;users&quot;: [\n  {\n    &quot;username&quot;: &quot;admin&quot;,\n    &quot;enabled&quot;: true,\n    &quot;emailVerified&quot;: true,\n    &quot;firstName&quot;: &quot;Rootus&quot;,\n    &quot;lastName&quot;: &quot;Adminus&quot;,\n    &quot;email&quot;: &quot;local-admin@mail.com&quot;,\n    &quot;credentials&quot;: [\n      {\n        &quot;type&quot;: &quot;password&quot;,\n        &quot;value&quot;: &quot;admin&quot;\n      }\n    ],\n    &quot;realmRoles&quot;: [\n      &quot;ADMIN&quot;\n    ]\n  },\n  {\n    &quot;username&quot;: &quot;operator&quot;,\n    &quot;enabled&quot;: true,\n    &quot;emailVerified&quot;: true,\n    &quot;firstName&quot;: &quot;Operatus&quot;,\n    &quot;lastName&quot;: &quot;Operando&quot;,\n    &quot;email&quot;: &quot;local-operator@mail.com&quot;,\n    &quot;credentials&quot;: [\n      {\n        &quot;type&quot;: &quot;password&quot;,\n        &quot;value&quot;: &quot;operator&quot;\n      }\n    ],\n    &quot;realmRoles&quot;: [\n      &quot;ROLE_OPERATOR&quot;\n    ]\n  }\n]\n</code></pre>\n"},{"tags":[],"owner":{"account_id":29244684,"reputation":1,"user_id":22405387,"display_name":"Rosa Persiani"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1692282382,"creation_date":1692279475,"answer_id":76922066,"question_id":48930281,"body_markdown":"We used this query to export user related data from the db:\r\n\r\n    SELECT U.EMAIL, U.FIRST_NAME, U.LAST_NAME, U.USERNAME, R.NAME, R.DESCRIPTION\r\n    FROM (USER_ENTITY U\r\n    join USER_ROLE_MAPPING M \r\n    ON U.ID = M.USER_ID) join KEYCLOAK_ROLE R\r\n    ON M.ROLE_ID= R.ID;\r\n\r\nthe output looks like this:\r\n\r\n| EMAIL                              | FIRST_NAME | LAST_NAME  | USERNAME            | NAME              | DESCRIPTION\t\t\t\t | | rosa@example.com                 | Rosa    | Persiani       | rsper    | view-profile      | ${role_view-profile}      |\r\n\r\nthe output can be easily converted to cvs or excel \r\n\r\n","title":"Export all users from KeyCloak","body":"<p>We used this query to export user related data from the db:</p>\n<pre><code>SELECT U.EMAIL, U.FIRST_NAME, U.LAST_NAME, U.USERNAME, R.NAME, R.DESCRIPTION\nFROM (USER_ENTITY U\njoin USER_ROLE_MAPPING M \nON U.ID = M.USER_ID) join KEYCLOAK_ROLE R\nON M.ROLE_ID= R.ID;\n</code></pre>\n<p>the output looks like this:</p>\n<p>| EMAIL                              | FIRST_NAME | LAST_NAME  | USERNAME            | NAME              | DESCRIPTION               | | rosa@example.com                 | Rosa    | Persiani       | rsper    | view-profile      | ${role_view-profile}      |</p>\n<p>the output can be easily converted to cvs or excel</p>\n"}],"owner":{"account_id":65983,"reputation":9310,"user_id":193850,"accept_rate":85,"display_name":"Michel"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":46397,"favorite_count":0,"down_vote_count":0,"up_vote_count":21,"answer_count":4,"score":21,"last_activity_date":1692282382,"creation_date":1519310786,"question_id":48930281,"body_markdown":"I have a specific use case in which we want to ask Keycloak for all the users and the groups and roles for each user, on a daily basis. For reconciliation purposes with other internal systems.\r\n\r\nCurrently we are using the provided Keycloak endpoints in the UsersResource for this. But we see that performance slows down after each call to a point we can&#39;t use this solution anymore. There are more then 30K users in the realm.\r\n\r\nWe&#39;ve also seen that Keycloak can export the database, but only on system boot (I guess for migration purposes). Given that we want to extract all the users on a daily basis we cannot use this.\r\n\r\nAre there some known functionalities or workarounds?","title":"Export all users from KeyCloak","body":"<p>I have a specific use case in which we want to ask Keycloak for all the users and the groups and roles for each user, on a daily basis. For reconciliation purposes with other internal systems.</p>\n\n<p>Currently we are using the provided Keycloak endpoints in the UsersResource for this. But we see that performance slows down after each call to a point we can't use this solution anymore. There are more then 30K users in the realm.</p>\n\n<p>We've also seen that Keycloak can export the database, but only on system boot (I guess for migration purposes). Given that we want to extract all the users on a daily basis we cannot use this.</p>\n\n<p>Are there some known functionalities or workarounds?</p>\n"},{"tags":["java","unit-testing","junit"],"comments":[{"owner":{"account_id":379763,"reputation":29886,"user_id":733345,"display_name":"Joe"},"score":1,"creation_date":1497871349,"post_id":44628483,"comment_id":76243937,"body_markdown":"Possible duplicate of [Using Assume.assumeTrue or Assert.assertTrue, when do tests exit?](https://stackoverflow.com/questions/36208492/using-assume-assumetrue-or-assert-asserttrue-when-do-tests-exit)","body":"Possible duplicate of <a href=\"https://stackoverflow.com/questions/36208492/using-assume-assumetrue-or-assert-asserttrue-when-do-tests-exit\">Using Assume.assumeTrue or Assert.assertTrue, when do tests exit?</a>"}],"answers":[{"tags":[],"owner":{"account_id":404649,"reputation":57172,"user_id":773113,"accept_rate":72,"display_name":"Mike Nakis"},"down_vote_count":0,"up_vote_count":39,"is_accepted":true,"score":39,"last_activity_date":1692282350,"creation_date":1497869395,"answer_id":44628570,"question_id":44628483,"body_markdown":"As you already know, you use `assert` to fail a test if something goes wrong.\r\n\r\nYou use `assume` if you have circumstances under which a test should not run. &quot;Not run&quot; means that it cannot fail, because, well, it did not run.\r\n\r\nSo, in a hypothetical scenario where:\r\n\r\n* you have different builds for different customers, and \r\n* you have some resource which is only applicable to a particular client, and\r\n* there is something testable about that resource, then \r\n\r\nyou would write a test which:\r\n\r\n* assumes that the resource is present, (so the test will not run on customers that do not have that resource,) and then\r\n* asserts that everything about the resource is okay (so on the customer that does actually have the resource, the test makes sure that the resource is as it should be.)\r\n\r\nTechnically, both `assert` and `assume` throw exceptions. The difference is that:\r\n- the kind of exception thrown by `assert` will cause the test to fail, while \r\n- the kind of exception thrown by `assume` will cause the test to be skipped.","title":"Assume vs assert in JUnit tests","body":"<p>As you already know, you use <code>assert</code> to fail a test if something goes wrong.</p>\n<p>You use <code>assume</code> if you have circumstances under which a test should not run. &quot;Not run&quot; means that it cannot fail, because, well, it did not run.</p>\n<p>So, in a hypothetical scenario where:</p>\n<ul>\n<li>you have different builds for different customers, and</li>\n<li>you have some resource which is only applicable to a particular client, and</li>\n<li>there is something testable about that resource, then</li>\n</ul>\n<p>you would write a test which:</p>\n<ul>\n<li>assumes that the resource is present, (so the test will not run on customers that do not have that resource,) and then</li>\n<li>asserts that everything about the resource is okay (so on the customer that does actually have the resource, the test makes sure that the resource is as it should be.)</li>\n</ul>\n<p>Technically, both <code>assert</code> and <code>assume</code> throw exceptions. The difference is that:</p>\n<ul>\n<li>the kind of exception thrown by <code>assert</code> will cause the test to fail, while</li>\n<li>the kind of exception thrown by <code>assume</code> will cause the test to be skipped.</li>\n</ul>\n"},{"tags":[],"owner":{"account_id":1663234,"reputation":138406,"user_id":1531124,"accept_rate":96,"display_name":"GhostCat"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1497869495,"creation_date":1497869495,"answer_id":44628603,"question_id":44628483,"body_markdown":"Simply check out the [javadoc][1] for Assume:\r\n\r\n&gt; A set of methods useful for stating assumptions about the conditions in which a test is meaningful. A failed assumption does not mean the code is broken, but that the test provides no useful information.\r\n\r\nIn other words: when an **assert** fires, you know that your testcase *failed*. Your production code isn&#39;t doing what you expect it to do.\r\n\r\n*Assume* means ... you don&#39;t know exactly what happened.\r\n\r\n  [1]: http://junit.sourceforge.net/javadoc/org/junit/Assume.html","title":"Assume vs assert in JUnit tests","body":"<p>Simply check out the <a href=\"http://junit.sourceforge.net/javadoc/org/junit/Assume.html\" rel=\"nofollow noreferrer\">javadoc</a> for Assume:</p>\n\n<blockquote>\n  <p>A set of methods useful for stating assumptions about the conditions in which a test is meaningful. A failed assumption does not mean the code is broken, but that the test provides no useful information.</p>\n</blockquote>\n\n<p>In other words: when an <strong>assert</strong> fires, you know that your testcase <em>failed</em>. Your production code isn't doing what you expect it to do.</p>\n\n<p><em>Assume</em> means ... you don't know exactly what happened.</p>\n"},{"tags":[],"owner":{"account_id":1474730,"reputation":829,"user_id":1385425,"display_name":"Natan Braslavski"},"down_vote_count":0,"up_vote_count":12,"is_accepted":false,"score":12,"last_activity_date":1497871209,"creation_date":1497870501,"answer_id":44628970,"question_id":44628483,"body_markdown":"**The Assert** class is the workhorse of JUnit and is the class JUnit testers are most familiar with. Most JUnit assert signatures are similar in nature. They consist of an optional message, an expected instance or variable and the actual instance or variable to be compared. Or, in the case of a boolean test like True, False, or Null, there is simply the actual instance to be tested.\r\n\r\nThe signature with a message simply has an initial parameter with a message string that will be displayed in the event the assert fails:\r\n\r\n    assert&lt;something&gt;(“Failure Message String”, &lt;condition to be tested&gt;);\r\n\r\n**Assumptions**:\r\nYou’ve probably heard that it’s best not to work on assumptions so here is a testing tool JUnit gives you to ensure your tests don’t.\r\n\r\nBoth Asserts and Assumes stop when a test fails and move on to the next test. The difference is that a failed Assert registers the failure as a failed test while an Assume just moves to the next test. This permits a tester to ensure that conditions, some of which may be external and out of control of the tester, are present as required before a test is run.\r\n\r\nThere are four varieties of Assumes: one to check a boolean condition, one to check that an exception has not occurred, one to check for null objects, and one that can take a Hamcrest matcher. As seen in the Assert section above, the ability to take a Hamcrest matcher is a gateway to testing flexibility.\r\n\r\nYou can read more here\r\nhttps://objectcomputing.com/resources/publications/sett/march-2014-junit-not-just-another-pretty-assert/\r\n\r\nIn short Assume used to disable tests, for example the following disables a test on Linux: `Assume.assumeFalse(System.getProperty(&quot;os.name&quot;).contains(&quot;Linux&quot;));`&lt;br&gt;\r\nAssert is used to test the functionality.","title":"Assume vs assert in JUnit tests","body":"<p><strong>The Assert</strong> class is the workhorse of JUnit and is the class JUnit testers are most familiar with. Most JUnit assert signatures are similar in nature. They consist of an optional message, an expected instance or variable and the actual instance or variable to be compared. Or, in the case of a boolean test like True, False, or Null, there is simply the actual instance to be tested.</p>\n\n<p>The signature with a message simply has an initial parameter with a message string that will be displayed in the event the assert fails:</p>\n\n<pre><code>assert&lt;something&gt;(“Failure Message String”, &lt;condition to be tested&gt;);\n</code></pre>\n\n<p><strong>Assumptions</strong>:\nYou’ve probably heard that it’s best not to work on assumptions so here is a testing tool JUnit gives you to ensure your tests don’t.</p>\n\n<p>Both Asserts and Assumes stop when a test fails and move on to the next test. The difference is that a failed Assert registers the failure as a failed test while an Assume just moves to the next test. This permits a tester to ensure that conditions, some of which may be external and out of control of the tester, are present as required before a test is run.</p>\n\n<p>There are four varieties of Assumes: one to check a boolean condition, one to check that an exception has not occurred, one to check for null objects, and one that can take a Hamcrest matcher. As seen in the Assert section above, the ability to take a Hamcrest matcher is a gateway to testing flexibility.</p>\n\n<p>You can read more here\n<a href=\"https://objectcomputing.com/resources/publications/sett/march-2014-junit-not-just-another-pretty-assert/\" rel=\"noreferrer\">https://objectcomputing.com/resources/publications/sett/march-2014-junit-not-just-another-pretty-assert/</a></p>\n\n<p>In short Assume used to disable tests, for example the following disables a test on Linux: <code>Assume.assumeFalse(System.getProperty(\"os.name\").contains(\"Linux\"));</code><br>\nAssert is used to test the functionality.</p>\n"},{"tags":[],"owner":{"account_id":18336641,"reputation":51,"user_id":13353915,"display_name":"Swarnadeep Ghosh"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1606153115,"creation_date":1606153115,"answer_id":64973460,"question_id":44628483,"body_markdown":"The most easiest difference between Assert and Assume is :\r\n\r\n**Assume** will only run when the assumption is true. Will be skipped if it false.\r\n\r\n    assumeTrue(boolean assumption, String message)\r\n\r\n\r\n**Assert** will run normally if true.\r\nIn case of false assert, it gives predefined error message.\r\n\r\n    assertTrue(boolean condition, String message)\r\n","title":"Assume vs assert in JUnit tests","body":"<p>The most easiest difference between Assert and Assume is :</p>\n<p><strong>Assume</strong> will only run when the assumption is true. Will be skipped if it false.</p>\n<pre><code>assumeTrue(boolean assumption, String message)\n</code></pre>\n<p><strong>Assert</strong> will run normally if true.\nIn case of false assert, it gives predefined error message.</p>\n<pre><code>assertTrue(boolean condition, String message)\n</code></pre>\n"}],"owner":{"account_id":3704844,"reputation":1152,"user_id":3083679,"accept_rate":71,"display_name":"Mike"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":20088,"favorite_count":0,"down_vote_count":0,"up_vote_count":32,"accepted_answer_id":44628570,"answer_count":4,"score":32,"last_activity_date":1692282350,"creation_date":1497869140,"question_id":44628483,"body_markdown":"I have read that `assume` will not run the test if assumption failed,\r\nbut I am not sure regarding the logic of when to place `assert` vs `assume`.\r\n\r\nFor example: any resource loading check should be done with `assume`?\r\n\r\nWhen should I use `assume` over `assert`?\r\n \r\n(Note: i am looking for correct design of when to use one over the other)\r\n\r\n","title":"Assume vs assert in JUnit tests","body":"<p>I have read that <code>assume</code> will not run the test if assumption failed,\nbut I am not sure regarding the logic of when to place <code>assert</code> vs <code>assume</code>.</p>\n\n<p>For example: any resource loading check should be done with <code>assume</code>?</p>\n\n<p>When should I use <code>assume</code> over <code>assert</code>?</p>\n\n<p>(Note: i am looking for correct design of when to use one over the other)</p>\n"},{"tags":["java","hibernate","entity","relationship"],"answers":[{"tags":[],"owner":{"account_id":5221534,"reputation":314,"user_id":4174849,"display_name":"Omid"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1692282333,"creation_date":1692282333,"answer_id":76922456,"question_id":76920733,"body_markdown":"Your problem is the OneToOne relation. According to [this][1]\r\nConfiguring lazy loading for one-to-one associations is not as easy as it is for other associations. \r\n\r\nWith some Hibernate versions, you can set the optional attribute of the @OneToOne annotation to false to avoid the eager fetching. Hibernate then always initializes the manuscript attribute with a proxy object. Unfortunately, this doesn’t work for all Hibernate version. If it works with your Hibernate version, you need to be prepared that it might change with future updates. I mean something like this:\r\n\r\n    @OneToOne(fetch = FetchType.LAZY, optional = false)\r\n    @JoinColumn(name = &quot;last_modified_by&quot;, referencedColumnName = &quot;login&quot;, insertable = false, updatable = false)\r\n    private User lastModifiedUser;\r\n\r\n  [1]: https://thorben-janssen.com/hibernate-tip-lazy-loading-one-to-one/","title":"I want to fetch lazy my user entity but it not work","body":"<p>Your problem is the OneToOne relation. According to <a href=\"https://thorben-janssen.com/hibernate-tip-lazy-loading-one-to-one/\" rel=\"nofollow noreferrer\">this</a>\nConfiguring lazy loading for one-to-one associations is not as easy as it is for other associations.</p>\n<p>With some Hibernate versions, you can set the optional attribute of the @OneToOne annotation to false to avoid the eager fetching. Hibernate then always initializes the manuscript attribute with a proxy object. Unfortunately, this doesn’t work for all Hibernate version. If it works with your Hibernate version, you need to be prepared that it might change with future updates. I mean something like this:</p>\n<pre><code>@OneToOne(fetch = FetchType.LAZY, optional = false)\n@JoinColumn(name = &quot;last_modified_by&quot;, referencedColumnName = &quot;login&quot;, insertable = false, updatable = false)\nprivate User lastModifiedUser;\n</code></pre>\n"}],"owner":{"account_id":23320829,"reputation":1,"user_id":22404393,"display_name":"Rubin"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":31,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1692282333,"creation_date":1692268904,"question_id":76920733,"body_markdown":"I have my Entity\r\n```\r\n@MappedSuperclass\r\n@EntityListeners(AuditingEntityListener.class)\r\n@JsonIgnoreProperties(value = { &quot;createdBy&quot;, &quot;createdDate&quot;, &quot;lastModifiedBy&quot;, &quot;lastModifiedDate&quot; }, allowGetters = true)\r\npublic abstract class AbstractAuditingEntity&lt;T&gt; implements Serializable {\r\n\r\n    private static final long serialVersionUID = 1L;\r\n\r\n    public abstract T getId();\r\n\r\n    @NotNull\r\n    @CreatedBy\r\n    @Column(name = &quot;created_by&quot;, nullable = false, length = 13, updatable = false)\r\n    private String createdBy;\r\n\r\n    @NotNull\r\n    @CreatedDate\r\n    @Column(name = &quot;created_date&quot;, updatable = false)\r\n    private Instant createdDate = Instant.now();\r\n\r\n    @LastModifiedBy\r\n    @Column(name = &quot;last_modified_by&quot;, length = 13)\r\n    private String lastModifiedBy;\r\n\r\n    @LastModifiedDate\r\n    @Column(name = &quot;last_modified_date&quot;)\r\n    private Instant lastModifiedDate = Instant.now();\r\n    //GETTER AND SETTER\r\n}\r\n\r\n```\r\nsecond class \r\n```\r\npackage cnas.gov.md.domain;\r\n\r\nimport cnas.gov.md.domain.enumeration.DecisionStatus;\r\nimport java.io.Serializable;\r\nimport java.time.Instant;\r\nimport java.util.UUID;\r\nimport javax.persistence.*;\r\nimport javax.validation.constraints.NotNull;\r\n\r\n/**\r\n * A Decision.\r\n */\r\n@Entity\r\n@Table(name = &quot;decision&quot;)\r\n@SuppressWarnings(&quot;common-java:DuplicatedBlocks&quot;)\r\npublic class Decision extends AbstractAuditingEntity&lt;UUID&gt; implements Serializable {\r\n\r\n    private static final long serialVersionUID = 1L;\r\n\r\n    @Id\r\n    @GeneratedValue\r\n    @Column(name = &quot;id&quot;)\r\n    private UUID id;\r\n\r\n    @Column(name = &quot;decision_nr&quot;)\r\n    private String decisionNr;\r\n\r\n    @Enumerated(EnumType.STRING)\r\n    @Column(name = &quot;status&quot;)\r\n    private DecisionStatus status;\r\n\r\n\r\n    @OneToOne\r\n    @JoinColumn(name = &quot;application_id&quot;, referencedColumnName = &quot;id&quot;)\r\n    private Application application;\r\n\r\n    @NotNull\r\n    @Column(name = &quot;order_nr&quot;, nullable = false)\r\n    private Integer orderNr;\r\n\r\n    @Column(name = &quot;examined_date&quot;)\r\n    private Instant examinedDate;\r\n\r\n    @Column(name = &quot;examined_by&quot;)\r\n    private String examinedBy;\r\n\r\n    @Column(name = &quot;verified_date&quot;)\r\n    private Instant verifiedDate;\r\n\r\n    @Column(name = &quot;verified_by&quot;)\r\n    private String verifiedBy;\r\n\r\n\r\n    @Column(name = &quot;approved_date&quot;)\r\n    private Instant approvedDate;\r\n\r\n    @Column(name = &quot;approved_by&quot;)\r\n    private String approvedBy;\r\n\r\n    @OneToOne\r\n    @JoinColumn(name = &quot;created_by&quot;, referencedColumnName = &quot;login&quot;, insertable = false, updatable = false)\r\n    private User createdUser;\r\n\r\n    @OneToOne\r\n    @JoinColumn(name = &quot;last_modified_by&quot;, referencedColumnName = &quot;login&quot;, insertable = false, updatable = false)\r\n    private User lastModifiedUser;\r\n}\r\n```\r\n\r\n\r\n I want to fetch lazy  createdUser and lastModifiedUser if is possible, and use eager fetch when i want with entity graph, I try to use fetch = LAZY but it dont work. I need this for get some info about user and Yes i can&#39;t use in my AbstractAuditingEntity reference to user because that class extend more where i don&#39;t need info about user.","title":"I want to fetch lazy my user entity but it not work","body":"<p>I have my Entity</p>\n<pre><code>@MappedSuperclass\n@EntityListeners(AuditingEntityListener.class)\n@JsonIgnoreProperties(value = { &quot;createdBy&quot;, &quot;createdDate&quot;, &quot;lastModifiedBy&quot;, &quot;lastModifiedDate&quot; }, allowGetters = true)\npublic abstract class AbstractAuditingEntity&lt;T&gt; implements Serializable {\n\n    private static final long serialVersionUID = 1L;\n\n    public abstract T getId();\n\n    @NotNull\n    @CreatedBy\n    @Column(name = &quot;created_by&quot;, nullable = false, length = 13, updatable = false)\n    private String createdBy;\n\n    @NotNull\n    @CreatedDate\n    @Column(name = &quot;created_date&quot;, updatable = false)\n    private Instant createdDate = Instant.now();\n\n    @LastModifiedBy\n    @Column(name = &quot;last_modified_by&quot;, length = 13)\n    private String lastModifiedBy;\n\n    @LastModifiedDate\n    @Column(name = &quot;last_modified_date&quot;)\n    private Instant lastModifiedDate = Instant.now();\n    //GETTER AND SETTER\n}\n\n</code></pre>\n<p>second class</p>\n<pre><code>package cnas.gov.md.domain;\n\nimport cnas.gov.md.domain.enumeration.DecisionStatus;\nimport java.io.Serializable;\nimport java.time.Instant;\nimport java.util.UUID;\nimport javax.persistence.*;\nimport javax.validation.constraints.NotNull;\n\n/**\n * A Decision.\n */\n@Entity\n@Table(name = &quot;decision&quot;)\n@SuppressWarnings(&quot;common-java:DuplicatedBlocks&quot;)\npublic class Decision extends AbstractAuditingEntity&lt;UUID&gt; implements Serializable {\n\n    private static final long serialVersionUID = 1L;\n\n    @Id\n    @GeneratedValue\n    @Column(name = &quot;id&quot;)\n    private UUID id;\n\n    @Column(name = &quot;decision_nr&quot;)\n    private String decisionNr;\n\n    @Enumerated(EnumType.STRING)\n    @Column(name = &quot;status&quot;)\n    private DecisionStatus status;\n\n\n    @OneToOne\n    @JoinColumn(name = &quot;application_id&quot;, referencedColumnName = &quot;id&quot;)\n    private Application application;\n\n    @NotNull\n    @Column(name = &quot;order_nr&quot;, nullable = false)\n    private Integer orderNr;\n\n    @Column(name = &quot;examined_date&quot;)\n    private Instant examinedDate;\n\n    @Column(name = &quot;examined_by&quot;)\n    private String examinedBy;\n\n    @Column(name = &quot;verified_date&quot;)\n    private Instant verifiedDate;\n\n    @Column(name = &quot;verified_by&quot;)\n    private String verifiedBy;\n\n\n    @Column(name = &quot;approved_date&quot;)\n    private Instant approvedDate;\n\n    @Column(name = &quot;approved_by&quot;)\n    private String approvedBy;\n\n    @OneToOne\n    @JoinColumn(name = &quot;created_by&quot;, referencedColumnName = &quot;login&quot;, insertable = false, updatable = false)\n    private User createdUser;\n\n    @OneToOne\n    @JoinColumn(name = &quot;last_modified_by&quot;, referencedColumnName = &quot;login&quot;, insertable = false, updatable = false)\n    private User lastModifiedUser;\n}\n</code></pre>\n<p>I want to fetch lazy  createdUser and lastModifiedUser if is possible, and use eager fetch when i want with entity graph, I try to use fetch = LAZY but it dont work. I need this for get some info about user and Yes i can't use in my AbstractAuditingEntity reference to user because that class extend more where i don't need info about user.</p>\n"},{"tags":["java","build","graalvm-native-image"],"owner":{"account_id":29244894,"reputation":1,"user_id":22405561,"display_name":"BSluge"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":33,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1692281701,"creation_date":1692281701,"question_id":76922378,"body_markdown":"There seems to be no way to add jvm parameters to enable anonymous modules to access java.base/java.lang. I tried to add --add-opens=java.base/java.lang=ALL-UNNAMED, but the binary that was compiled into graalvm still reported an error. The way I compile is with something like native iamge-jar[enter image description here](https://i.stack.imgur.com/UDBq5.png)\r\n\r\nI hope that the binary file compiled by the way of native image-jar can run normally without error","title":"I used graalvm to compile the spring boot3 project for jdk17. module opens unnamed","body":"<p>There seems to be no way to add jvm parameters to enable anonymous modules to access java.base/java.lang. I tried to add --add-opens=java.base/java.lang=ALL-UNNAMED, but the binary that was compiled into graalvm still reported an error. The way I compile is with something like native iamge-jar<a href=\"https://i.stack.imgur.com/UDBq5.png\" rel=\"nofollow noreferrer\">enter image description here</a></p>\n<p>I hope that the binary file compiled by the way of native image-jar can run normally without error</p>\n"},{"tags":["java","android","pytorch","jit"],"comments":[{"owner":{"account_id":29244875,"reputation":1,"user_id":22405546,"display_name":"Areeb Lone"},"score":0,"creation_date":1692771087,"post_id":76922370,"comment_id":135667901,"body_markdown":"Turns out there was an issue with my model. There were many forward calls in the other classes the my main model was inheriting from. I removed those forward calls and fixed the issue","body":"Turns out there was an issue with my model. There were many forward calls in the other classes the my main model was inheriting from. I removed those forward calls and fixed the issue"}],"owner":{"account_id":29244875,"reputation":1,"user_id":22405546,"display_name":"Areeb Lone"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":16,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1692281645,"creation_date":1692281645,"question_id":76922370,"body_markdown":"I&#39;m trying to deploy an image to image model on Android. Model consists of encoder and decoder. \r\nThe encoder works fine. But this issue comes in decoder. My model takes one tensor as input and it should return a tensor of size [1,3,1024,1024] as output. But there comes a Fatal in the app. \r\n\r\n```\r\nfinal long[] styleshape = new long[]{3};\r\nfinal FloatBuffer styledBuffer = Tensor.allocateFloatBuffer(3);\r\nstyledBuffer.put(-0.4951f);\r\nstyledBuffer.put(-1.0065f);\r\nstyledBuffer.put(-1.0413f);\r\n\r\nstyledBuffer.get(0);\r\nTensor styledTensor = Tensor.fromBlob(styledBuffer, styleshape);\r\nIValue style = IValue.from(styledTensor);\r\nfinal Tensor styledOutputTensor = decoderModule.forward(style).toTensor();\r\n```\r\n                                                                                                    java.lang.RuntimeException: Failure delivering result ResultInfo{who=null, request=101, result=-1, data=Intent { dat=content://com.android.providers.media.documents/... flg=0x1 }} to activity {org.pytorch.helloworld/org.pytorch.helloworld.MainActivity}: com.facebook.jni.CppException: Error happened at preparing for default values for the argument. The 1th argument dim does not have a specified value or default value. \r\nI tried passing a random tensor of the similar shape and then I didn&#39;t get the error.\r\n```\r\ndef forward(self,  style_tensor):\r\n        spade_input=None \r\n        pure_generation=False\r\n        content_list=[]\r\n        content_list.append(torch.rand([1, 192, 256, 256]))\r\n        content_list.append(torch.rand([1, 5, 512, 512]))\r\n        content_list.append(torch.rand([1, 5, 1024, 1024]))\r\n        style_tensor = torch.randn(1,1,3,1)\r\n        style_tensor=style_tensor.view(1,1,3,1)\r\n        if self.pred_adain_params:\r\n            adain_params = self.adain_net(style_tensor)\r\n            self.assign_adain_params(adain_params, self)\r\n\r\n        if self.pred_conv_kernel:\r\n            assert style_tensor.size(0) == 1, &#39;prediction of convilution does not work with batch size &gt; 1&#39;\r\n            self.assign_style(style_tensor.view(1, -1), self)\r\n\r\n        tensor = module_list_forward(self.body, content_list[0], spade_input)\r\n        for skip_content, up_layer, up_postprocess_layer, skip_preprocess_layer in     zip(content_list[1:], self.upsample_head, self.upsample_postprocess,self.skip_preprocess):                            \r\n                                                                                       \r\n                                                                                       \r\n                                                                                       \r\n            tensor = up_layer(tensor)\r\n            skip_tensor = skip_preprocess_layer(skip_content)\r\n            tensor = torch.cat([tensor, skip_tensor], 1)\r\n            tensor = up_postprocess_layer(tensor)\r\n        for layer in self.model_postprocess:\r\n            tensor = layer(tensor)    \r\n\r\n        tensor = torch.tanh(tensor[:, : 3])\r\n\r\n                            \r\n        #ret = torch.randn([1, 3, 1024, 1024])\r\n        \r\n        return tensor\r\n\r\n```\r\n\r\nExpecting a Tensor but getting the above error.","title":"The 1th argument dim does not have a specified value or default value","body":"<p>I'm trying to deploy an image to image model on Android. Model consists of encoder and decoder.\nThe encoder works fine. But this issue comes in decoder. My model takes one tensor as input and it should return a tensor of size [1,3,1024,1024] as output. But there comes a Fatal in the app.</p>\n<pre><code>final long[] styleshape = new long[]{3};\nfinal FloatBuffer styledBuffer = Tensor.allocateFloatBuffer(3);\nstyledBuffer.put(-0.4951f);\nstyledBuffer.put(-1.0065f);\nstyledBuffer.put(-1.0413f);\n\nstyledBuffer.get(0);\nTensor styledTensor = Tensor.fromBlob(styledBuffer, styleshape);\nIValue style = IValue.from(styledTensor);\nfinal Tensor styledOutputTensor = decoderModule.forward(style).toTensor();\n</code></pre>\n<pre><code>                                                                                                java.lang.RuntimeException: Failure delivering result ResultInfo{who=null, request=101, result=-1, data=Intent { dat=content://com.android.providers.media.documents/... flg=0x1 }} to activity {org.pytorch.helloworld/org.pytorch.helloworld.MainActivity}: com.facebook.jni.CppException: Error happened at preparing for default values for the argument. The 1th argument dim does not have a specified value or default value. \n</code></pre>\n<p>I tried passing a random tensor of the similar shape and then I didn't get the error.</p>\n<pre><code>def forward(self,  style_tensor):\n        spade_input=None \n        pure_generation=False\n        content_list=[]\n        content_list.append(torch.rand([1, 192, 256, 256]))\n        content_list.append(torch.rand([1, 5, 512, 512]))\n        content_list.append(torch.rand([1, 5, 1024, 1024]))\n        style_tensor = torch.randn(1,1,3,1)\n        style_tensor=style_tensor.view(1,1,3,1)\n        if self.pred_adain_params:\n            adain_params = self.adain_net(style_tensor)\n            self.assign_adain_params(adain_params, self)\n\n        if self.pred_conv_kernel:\n            assert style_tensor.size(0) == 1, 'prediction of convilution does not work with batch size &gt; 1'\n            self.assign_style(style_tensor.view(1, -1), self)\n\n        tensor = module_list_forward(self.body, content_list[0], spade_input)\n        for skip_content, up_layer, up_postprocess_layer, skip_preprocess_layer in     zip(content_list[1:], self.upsample_head, self.upsample_postprocess,self.skip_preprocess):                            \n                                                                                       \n                                                                                       \n                                                                                       \n            tensor = up_layer(tensor)\n            skip_tensor = skip_preprocess_layer(skip_content)\n            tensor = torch.cat([tensor, skip_tensor], 1)\n            tensor = up_postprocess_layer(tensor)\n        for layer in self.model_postprocess:\n            tensor = layer(tensor)    \n\n        tensor = torch.tanh(tensor[:, : 3])\n\n                            \n        #ret = torch.randn([1, 3, 1024, 1024])\n        \n        return tensor\n\n</code></pre>\n<p>Expecting a Tensor but getting the above error.</p>\n"},{"tags":["java","mockito","variadic-functions"],"comments":[{"owner":{"account_id":4740392,"reputation":1670,"user_id":3833404,"accept_rate":100,"display_name":"Jonathan Schoreels"},"score":1,"creation_date":1457975669,"post_id":35993559,"comment_id":59640250,"body_markdown":"For varargs, it exists special matchers/argument captors. [See this thread.](http://stackoverflow.com/questions/2631596/how-to-properly-match-varargs-in-mockito)","body":"For varargs, it exists special matchers/argument captors. <a href=\"http://stackoverflow.com/questions/2631596/how-to-properly-match-varargs-in-mockito\">See this thread.</a>"},{"owner":{"account_id":8039943,"reputation":51,"user_id":6061935,"display_name":"Vincent Vandemeulebrouck"},"score":0,"creation_date":1458030046,"post_id":35993559,"comment_id":59663295,"body_markdown":"The issue is not on matching or use of argument captor: the verifiers verifies the method is called twice as expected, with varargs. But when the ArgumentCaptor is used to get the captured values, it returns a list with the 3 arguments of both calls.","body":"The issue is not on matching or use of argument captor: the verifiers verifies the method is called twice as expected, with varargs. But when the ArgumentCaptor is used to get the captured values, it returns a list with the 3 arguments of both calls."}],"answers":[{"tags":[],"owner":{"account_id":1437017,"reputation":358,"user_id":1358166,"display_name":"domaru"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1617781920,"creation_date":1617781920,"answer_id":66981723,"question_id":35993559,"body_markdown":"So after 5 years ops question is still unanswered because there are only workarounds present. These are:\r\n\r\n - If you only have single invocation of tested method you can still use captors like op mentioned using `getAllValues()` for verification. This is the method recommended for varargs in documentation for latest Mockito 3.8.0\r\n - If you have multiple invocations you will **not** be able to tell which argument was passed in which invocation, you will just have them in one list. You will still be able to verify number of invocations. Yet, you might be better using `argThat()` in this scenario","title":"ArgumentCaptor mockito vararg getAllValues","body":"<p>So after 5 years ops question is still unanswered because there are only workarounds present. These are:</p>\n<ul>\n<li>If you only have single invocation of tested method you can still use captors like op mentioned using <code>getAllValues()</code> for verification. This is the method recommended for varargs in documentation for latest Mockito 3.8.0</li>\n<li>If you have multiple invocations you will <strong>not</strong> be able to tell which argument was passed in which invocation, you will just have them in one list. You will still be able to verify number of invocations. Yet, you might be better using <code>argThat()</code> in this scenario</li>\n</ul>\n"},{"tags":[],"owner":{"account_id":12098571,"reputation":141,"user_id":11228438,"display_name":"Chebi"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1692281351,"creation_date":1692281351,"answer_id":76922326,"question_id":35993559,"body_markdown":"I think this used to be a bug or some other behavior was intended with `getAllValues()`.\r\n\r\nHere there&#39;s a discussion on the issue or a similar one: https://github.com/mockito/mockito/issues/584\r\n\r\nYour code would work today, or at least the `getAllValues()` would indeed return a list with size 2, as expected.","title":"ArgumentCaptor mockito vararg getAllValues","body":"<p>I think this used to be a bug or some other behavior was intended with <code>getAllValues()</code>.</p>\n<p>Here there's a discussion on the issue or a similar one: <a href=\"https://github.com/mockito/mockito/issues/584\" rel=\"nofollow noreferrer\">https://github.com/mockito/mockito/issues/584</a></p>\n<p>Your code would work today, or at least the <code>getAllValues()</code> would indeed return a list with size 2, as expected.</p>\n"}],"owner":{"account_id":8039943,"reputation":51,"user_id":6061935,"display_name":"Vincent Vandemeulebrouck"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2849,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"answer_count":2,"score":4,"last_activity_date":1692281351,"creation_date":1457974582,"question_id":35993559,"body_markdown":"I want to validate the logging made by a helper class, which calls a method with some varargs.\r\n\r\nI am using Mockito (1.10.19) to mock the actual logger, and to verify the mocked method is called as expected.\r\n\r\nI use an ArgumentCaptor to validate the arguments.\r\n\r\nThe Mockito.verify validates the number of times the mocked method is called, \r\nhowever, the ArgumentCaptor.getAllValues is returning a single array with all the parameters of all the method calls.\r\n\r\nHere is a sample code:\r\n\r\n    interface Logger\r\n    {\r\n        void info(Object... params);\r\n    }\r\n\r\n    @Mock\r\n    Logger logger;\r\n\r\n    public void logMatrix(String[][] matrix)\r\n    {\r\n        for (int column = 0; column &lt; matrix.length; column++)\r\n        {\r\n            logger.info(column, &quot; : &quot;, matrix[column]);\r\n        }\r\n    }\r\n\r\n    @Test\r\n    public void givenMatrix_whenLogMatrix_thenLogsEachRow() throws Exception\r\n    {\r\n        String[][] matrix = {\r\n            {&quot;a&quot;, &quot;b&quot;},\r\n            {&quot;c&quot;, &quot;d&quot;}\r\n        };\r\n\r\n        ArgumentCaptor&lt;Object[]&gt; captor = ArgumentCaptor.forClass(Object[].class);\r\n\r\n        logMatrix(matrix);\r\n\r\n        // verify the mocked method is called twice\r\n        Mockito.verify(logger, times(2)).info(captor.capture());\r\n        \r\n        // verify the contents of the calls: expecting two arrays, one for each call \r\n        assertThat(captor.getAllValues()).hasSize(2);\r\n        // fails !\r\n    }\r\n\r\nThe failure is:\r\n\r\n    java.lang.AssertionError: \r\n       Expected size:&lt;2&gt; but was:&lt;6&gt; in:\r\n          &lt;[0, &quot; : &quot;, [&quot;a&quot;, &quot;b&quot;], 1, &quot; : &quot;, [&quot;c&quot;, &quot;d&quot;]]&gt;\r\n       at TestLogHelper.givenMatrix_whenLogMatrix_thenLogsEachRow(TestLogHelper.java:72)\r\n\t...\r\n\r\n\r\nIs it a misuse? or a bug in mockito ?\r\n","title":"ArgumentCaptor mockito vararg getAllValues","body":"<p>I want to validate the logging made by a helper class, which calls a method with some varargs.</p>\n\n<p>I am using Mockito (1.10.19) to mock the actual logger, and to verify the mocked method is called as expected.</p>\n\n<p>I use an ArgumentCaptor to validate the arguments.</p>\n\n<p>The Mockito.verify validates the number of times the mocked method is called, \nhowever, the ArgumentCaptor.getAllValues is returning a single array with all the parameters of all the method calls.</p>\n\n<p>Here is a sample code:</p>\n\n<pre><code>interface Logger\n{\n    void info(Object... params);\n}\n\n@Mock\nLogger logger;\n\npublic void logMatrix(String[][] matrix)\n{\n    for (int column = 0; column &lt; matrix.length; column++)\n    {\n        logger.info(column, \" : \", matrix[column]);\n    }\n}\n\n@Test\npublic void givenMatrix_whenLogMatrix_thenLogsEachRow() throws Exception\n{\n    String[][] matrix = {\n        {\"a\", \"b\"},\n        {\"c\", \"d\"}\n    };\n\n    ArgumentCaptor&lt;Object[]&gt; captor = ArgumentCaptor.forClass(Object[].class);\n\n    logMatrix(matrix);\n\n    // verify the mocked method is called twice\n    Mockito.verify(logger, times(2)).info(captor.capture());\n\n    // verify the contents of the calls: expecting two arrays, one for each call \n    assertThat(captor.getAllValues()).hasSize(2);\n    // fails !\n}\n</code></pre>\n\n<p>The failure is:</p>\n\n<pre><code>java.lang.AssertionError: \n   Expected size:&lt;2&gt; but was:&lt;6&gt; in:\n      &lt;[0, \" : \", [\"a\", \"b\"], 1, \" : \", [\"c\", \"d\"]]&gt;\n   at TestLogHelper.givenMatrix_whenLogMatrix_thenLogsEachRow(TestLogHelper.java:72)\n...\n</code></pre>\n\n<p>Is it a misuse? or a bug in mockito ?</p>\n"},{"tags":["java","spring","spring-boot","swagger-ui","openapi-generator"],"comments":[{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":1,"creation_date":1692264112,"post_id":76920052,"comment_id":135600658,"body_markdown":"See https://github.com/swagger-api/swagger-codegen/issues/5675","body":"See <a href=\"https://github.com/swagger-api/swagger-codegen/issues/5675\" rel=\"nofollow noreferrer\">github.com/swagger-api/swagger-codegen/issues/5675</a>"}],"owner":{"account_id":28605751,"reputation":31,"user_id":21901733,"display_name":"Asmita Tiwari"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":481,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":0,"score":3,"last_activity_date":1692281122,"creation_date":1692263493,"question_id":76920052,"body_markdown":"I&#39;m currently working with the OpenAPI Generator for my API project, and I&#39;ve run into an unexpected issue. When I define a default response in my OpenAPI specification, the OpenAPI Generator seems to be automatically assigning a 200 status code to that default response, which is not the behavior I expect.\r\n\r\nIn my YAML specification, I&#39;ve defined the default response without specifying a status code, focusing on providing a description for unexpected errors:\r\n\r\nyaml\r\nCopy code\r\nresponses:\r\n  default:\r\n    description: Unexpected error\r\n\r\nHowever, despite not specifying a status code, the generated Swagger documentation shows a 200 status code for this default response, which is not accurate for an error response.\r\n\r\nHas anyone else encountered this issue with the OpenAPI Generator? Is there a way to prevent the generator from automatically assigning a 200 status code to default responses? Any insights, workarounds, or suggestions would be greatly appreciated.\r\n\r\nThank you in advance for your help!\r\n\r\n\r\nI&#39;ve reviewed my other response definitions, validated the OpenAPI specification, and checked the OpenAPI Generator&#39;s configuration settings, but I&#39;m still encountering this behavior.\r\n","title":"Open API Generator assigns 200 status code to default responses","body":"<p>I'm currently working with the OpenAPI Generator for my API project, and I've run into an unexpected issue. When I define a default response in my OpenAPI specification, the OpenAPI Generator seems to be automatically assigning a 200 status code to that default response, which is not the behavior I expect.</p>\n<p>In my YAML specification, I've defined the default response without specifying a status code, focusing on providing a description for unexpected errors:</p>\n<p>yaml\nCopy code\nresponses:\ndefault:\ndescription: Unexpected error</p>\n<p>However, despite not specifying a status code, the generated Swagger documentation shows a 200 status code for this default response, which is not accurate for an error response.</p>\n<p>Has anyone else encountered this issue with the OpenAPI Generator? Is there a way to prevent the generator from automatically assigning a 200 status code to default responses? Any insights, workarounds, or suggestions would be greatly appreciated.</p>\n<p>Thank you in advance for your help!</p>\n<p>I've reviewed my other response definitions, validated the OpenAPI specification, and checked the OpenAPI Generator's configuration settings, but I'm still encountering this behavior.</p>\n"},{"tags":["java","spring","component-scan"],"owner":{"account_id":4392576,"reputation":167,"user_id":3580519,"accept_rate":50,"display_name":"TajnosAgentos"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":22,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1692281085,"creation_date":1692281085,"question_id":76922294,"body_markdown":"Short proiblem descriotrion\r\n1. i have 2 jar files main-module.jar and sub-module.jar\r\n2. main-module.jar is a spring-boot application\r\n3. sub-module.jar has few components which i want to have in my running main-module application\r\n4. both main-module and sub-module have simillar package structure eg. com.something.mainapp, com.something.subapp\r\n5. @ComponentScan in set to com.something\r\n6. i want to be able to include many JAR files only using the JAVA jut command and scan the via ConponentScan to the spring context\r\n\r\nfiles which i have\r\n\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/nzYlN.png\r\n\r\nused commands\r\n\r\n     java -cp sub-module.jar:* -jar .\\main-module.jar","title":"Java Spring boot scan components from external jar","body":"<p>Short proiblem descriotrion</p>\n<ol>\n<li>i have 2 jar files main-module.jar and sub-module.jar</li>\n<li>main-module.jar is a spring-boot application</li>\n<li>sub-module.jar has few components which i want to have in my running main-module application</li>\n<li>both main-module and sub-module have simillar package structure eg. com.something.mainapp, com.something.subapp</li>\n<li>@ComponentScan in set to com.something</li>\n<li>i want to be able to include many JAR files only using the JAVA jut command and scan the via ConponentScan to the spring context</li>\n</ol>\n<p>files which i have</p>\n<p><a href=\"https://i.stack.imgur.com/nzYlN.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/nzYlN.png\" alt=\"enter image description here\" /></a></p>\n<p>used commands</p>\n<pre><code> java -cp sub-module.jar:* -jar .\\main-module.jar\n</code></pre>\n"},{"tags":["java","amazon-s3","apache-camel"],"owner":{"account_id":11708210,"reputation":11,"user_id":8571050,"display_name":"Vitalii"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":29,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1692280836,"creation_date":1692277486,"question_id":76921814,"body_markdown":"I&#39;m trying to read the message and its headers from the message broker and persist it to the AWS S3 bucket by replacing headers with tags. The object is getting persisted to S3 but the tags are not.\r\n\r\nhere is the routing config:\r\n\r\n```\r\nfrom(from)\r\n  .routeId(id)\r\n  .process(new S3FileProcessor(...))\r\n  .to(to);\r\n```\r\n, and here is the S3FileProcessor#process method:\r\n\r\n```\r\n@Override\r\npublic void process(Exchange exchange) {\r\n  Map&lt;String, Object&gt; inputHeaders = exchange.getIn().getHeaders();\r\n  ...\r\n  Map&lt;String, Object&gt; s3Metadata = Map.of(&quot;x-amz-tagging&quot;, &quot;tag1=tag1&amp;tag2=tag2&quot;);\r\n  outMessage.setHeader(AWS2S3Constants.METADATA, s3Metadata); // option 1: does not work\r\n  outMessage.setHeader(&quot;x-amz-tagging&quot;, s3ObjectTagsAsUrlQueryString); // option 2: does not work as well\r\n}  \r\n```","title":"Push file to S3 with added tags using Apache Camel and Java","body":"<p>I'm trying to read the message and its headers from the message broker and persist it to the AWS S3 bucket by replacing headers with tags. The object is getting persisted to S3 but the tags are not.</p>\n<p>here is the routing config:</p>\n<pre><code>from(from)\n  .routeId(id)\n  .process(new S3FileProcessor(...))\n  .to(to);\n</code></pre>\n<p>, and here is the S3FileProcessor#process method:</p>\n<pre><code>@Override\npublic void process(Exchange exchange) {\n  Map&lt;String, Object&gt; inputHeaders = exchange.getIn().getHeaders();\n  ...\n  Map&lt;String, Object&gt; s3Metadata = Map.of(&quot;x-amz-tagging&quot;, &quot;tag1=tag1&amp;tag2=tag2&quot;);\n  outMessage.setHeader(AWS2S3Constants.METADATA, s3Metadata); // option 1: does not work\n  outMessage.setHeader(&quot;x-amz-tagging&quot;, s3ObjectTagsAsUrlQueryString); // option 2: does not work as well\n}  \n</code></pre>\n"},{"tags":["java","spring-boot","ssl","pkcs#11"],"comments":[{"owner":{"account_id":2416545,"reputation":2517,"user_id":2110443,"display_name":"Frank"},"score":0,"creation_date":1601297249,"post_id":59718236,"comment_id":113354784,"body_markdown":"Have you tried using a PKCS#11 URI like &quot;pkcs11:id=%01;token=softhsm;type=cert&quot; instead of the non-existent file &#39;NONE&#39;?","body":"Have you tried using a PKCS#11 URI like &quot;pkcs11:id=%01;token=softhsm;type=cert&quot; instead of the non-existent file &#39;NONE&#39;?"}],"answers":[{"tags":[],"owner":{"account_id":10010688,"reputation":182,"user_id":7403630,"display_name":"JavaBoy"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1578924615,"creation_date":1578924615,"answer_id":59718289,"question_id":59718236,"body_markdown":"It is trying to locate the file at: file:/C:/ProjectsGit/ssl-server/NONE  \r\n```\r\nCaused by: java.io.IOException: Failed to load keystore type [PKCS11] with path [file:/C:/ProjectsGit/ssl-server/NONE]\r\n```\r\nSo do you have any references somwhere to this location?","title":"Using PKCS11 keystore type to establish TLS connections in a web application on Spring Boot","body":"<p>It is trying to locate the file at: file:/C:/ProjectsGit/ssl-server/NONE  </p>\n\n<pre><code>Caused by: java.io.IOException: Failed to load keystore type [PKCS11] with path [file:/C:/ProjectsGit/ssl-server/NONE]\n</code></pre>\n\n<p>So do you have any references somwhere to this location?</p>\n"},{"tags":[],"owner":{"account_id":7728304,"reputation":3488,"user_id":5852281,"display_name":"cdan"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1677781497,"creation_date":1677781497,"answer_id":75619461,"question_id":59718236,"body_markdown":"[This issue][1] has been fixed in Spring Boot v2.2.7 and v3.0.1.\r\n\r\n\r\n  [1]: https://github.com/spring-projects/spring-boot/issues/33433","title":"Using PKCS11 keystore type to establish TLS connections in a web application on Spring Boot","body":"<p><a href=\"https://github.com/spring-projects/spring-boot/issues/33433\" rel=\"nofollow noreferrer\">This issue</a> has been fixed in Spring Boot v2.2.7 and v3.0.1.</p>\n"},{"tags":[],"owner":{"account_id":157470,"reputation":1518,"user_id":375449,"display_name":"dmatej"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1692280494,"creation_date":1692280494,"answer_id":76922201,"question_id":59718236,"body_markdown":"The path should be in quotation marks:\r\n\r\n    library = &quot;C:\\nCipher\\nfast\\toolkits\\pkcs11\\cknfast-64.dll&quot;","title":"Using PKCS11 keystore type to establish TLS connections in a web application on Spring Boot","body":"<p>The path should be in quotation marks:</p>\n<pre><code>library = &quot;C:\\nCipher\\nfast\\toolkits\\pkcs11\\cknfast-64.dll&quot;\n</code></pre>\n"}],"owner":{"account_id":3879547,"reputation":115,"user_id":3212517,"display_name":"Sorand"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1439,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":3,"score":1,"last_activity_date":1692280494,"creation_date":1578924407,"question_id":59718236,"body_markdown":"I try to set TLS connections for my web-app build with Spring Boot. My application.properties config file look like that\r\n\r\n    server.port=9999\r\n    server.ssl.key-store-password=password\r\n    server.ssl.key-store=NONE\r\n    server.ssl.trust-store=C:/newcert/truststore.keystore\r\n    server.ssl.trust-store-password=password\r\n    server.ssl.key-store-provider=SunPKCS11-Thales\r\n    server.ssl.key-store-type=PKCS11\r\n    server.ssl.key-alias=test_key_ocs2\r\n\r\nIn java.security file (%JAVA_HOME%/jre/lib/security/) contains row:\r\n\r\n    security.provider.11=sun.security.pkcs11.SunPKCS11 C:/cert/pkcs11.cfg\r\n\r\nIn pkcs11.cfg file contains:\r\n\r\n    name=Thales\r\n    library = C:\\nCipher\\nfast\\toolkits\\pkcs11\\cknfast-64.dll\r\n    slot=761406613\r\n\r\nBut after run my app I get error:\r\n\r\n    INFO 16788 --- [           main] o.s.s.concurrent.ThreadPoolTaskExecutor  : Initializing ExecutorService &#39;applicationTaskExecutor&#39;\r\n    ERROR 16788 --- [           main] org.apache.tomcat.util.net.SSLUtilBase   : Failed to load keystore type [PKCS11] with path [file:/C:/ProjectsGit/ssl-server/NONE] due to [Initialization failed]\r\n    \r\n    java.security.ProviderException: Initialization failed\r\n    \tat sun.security.pkcs11.SunPKCS11.&lt;init&gt;(SunPKCS11.java:376) ~[sunpkcs11.jar:1.8.0_161]\r\n    \tat sun.security.pkcs11.SunPKCS11.&lt;init&gt;(SunPKCS11.java:103) ~[sunpkcs11.jar:1.8.0_161]\r\n    \tat sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method) ~[na:1.8.0_152]\r\n    \tat sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:62) ~[na:1.8.0_152]\r\n    \tat sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45) ~[na:1.8.0_152]\r\n    \tat java.lang.reflect.Constructor.newInstance(Constructor.java:423) ~[na:1.8.0_152]\r\n    \tat sun.security.jca.ProviderConfig$2.run(ProviderConfig.java:224) ~[na:1.8.0_152]\r\n    \tat sun.security.jca.ProviderConfig$2.run(ProviderConfig.java:206) ~[na:1.8.0_152]\r\n    \tat java.security.AccessController.doPrivileged(Native Method) ~[na:1.8.0_152]\r\n    \tat sun.security.jca.ProviderConfig.doLoadProvider(ProviderConfig.java:206) ~[na:1.8.0_152]\r\n    \tat sun.security.jca.ProviderConfig.getProvider(ProviderConfig.java:187) ~[na:1.8.0_152]\r\n    \tat sun.security.jca.ProviderList.getProvider(ProviderList.java:233) ~[na:1.8.0_152]\r\n    \tat sun.security.jca.ProviderList.getIndex(ProviderList.java:263) ~[na:1.8.0_152]\r\n    \tat sun.security.jca.ProviderList.getProviderConfig(ProviderList.java:247) ~[na:1.8.0_152]\r\n    \tat sun.security.jca.ProviderList.getProvider(ProviderList.java:253) ~[na:1.8.0_152]\r\n    \tat sun.security.jca.GetInstance.getService(GetInstance.java:81) ~[na:1.8.0_152]\r\n    \tat sun.security.jca.GetInstance.getInstance(GetInstance.java:206) ~[na:1.8.0_152]\r\n    \tat java.security.Security.getImpl(Security.java:698) ~[na:1.8.0_152]\r\n    \tat java.security.KeyStore.getInstance(KeyStore.java:896) ~[na:1.8.0_152]\r\n    \tat org.apache.tomcat.util.net.SSLUtilBase.getStore(SSLUtilBase.java:187) [tomcat-embed-core-9.0.27.jar:9.0.27]\r\n    \tat org.apache.tomcat.util.net.SSLHostConfigCertificate.getCertificateKeystore(SSLHostConfigCertificate.java:206) [tomcat-embed-core-9.0.27.jar:9.0.27]\r\n    \tat org.apache.tomcat.util.net.SSLUtilBase.getKeyManagers(SSLUtilBase.java:283) [tomcat-embed-core-9.0.27.jar:9.0.27]\r\n    \tat org.apache.tomcat.util.net.SSLUtilBase.createSSLContext(SSLUtilBase.java:247) [tomcat-embed-core-9.0.27.jar:9.0.27]\r\n    \tat org.apache.tomcat.util.net.AbstractJsseEndpoint.createSSLContext(AbstractJsseEndpoint.java:97) [tomcat-embed-core-9.0.27.jar:9.0.27]\r\n    \tat org.apache.tomcat.util.net.AbstractJsseEndpoint.initialiseSsl(AbstractJsseEndpoint.java:71) [tomcat-embed-core-9.0.27.jar:9.0.27]\r\n    \tat org.apache.tomcat.util.net.NioEndpoint.bind(NioEndpoint.java:218) [tomcat-embed-core-9.0.27.jar:9.0.27]\r\n    \tat org.apache.tomcat.util.net.AbstractEndpoint.bindWithCleanup(AbstractEndpoint.java:1124) [tomcat-embed-core-9.0.27.jar:9.0.27]\r\n    \tat org.apache.tomcat.util.net.AbstractEndpoint.start(AbstractEndpoint.java:1210) [tomcat-embed-core-9.0.27.jar:9.0.27]\r\n    \tat org.apache.coyote.AbstractProtocol.start(AbstractProtocol.java:586) [tomcat-embed-core-9.0.27.jar:9.0.27]\r\n    \tat org.apache.catalina.connector.Connector.startInternal(Connector.java:1005) [tomcat-embed-core-9.0.27.jar:9.0.27]\r\n    \tat org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183) [tomcat-embed-core-9.0.27.jar:9.0.27]\r\n    \tat org.apache.catalina.core.StandardService.addConnector(StandardService.java:227) [tomcat-embed-core-9.0.27.jar:9.0.27]\r\n    \tat org.springframework.boot.web.embedded.tomcat.TomcatWebServer.addPreviouslyRemovedConnectors(TomcatWebServer.java:278) [spring-boot-2.2.1.RELEASE.jar:2.2.1.RELEASE]\r\n    \tat org.springframework.boot.web.embedded.tomcat.TomcatWebServer.start(TomcatWebServer.java:197) [spring-boot-2.2.1.RELEASE.jar:2.2.1.RELEASE]\r\n    \tat org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.startWebServer(ServletWebServerApplicationContext.java:297) [spring-boot-2.2.1.RELEASE.jar:2.2.1.RELEASE]\r\n    \tat org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.finishRefresh(ServletWebServerApplicationContext.java:163) [spring-boot-2.2.1.RELEASE.jar:2.2.1.RELEASE]\r\n    \tat org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:553) [spring-context-5.2.1.RELEASE.jar:5.2.1.RELEASE]\r\n    \tat org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:141) [spring-boot-2.2.1.RELEASE.jar:2.2.1.RELEASE]\r\n    \tat org.springframework.boot.SpringApplication.refresh(SpringApplication.java:747) [spring-boot-2.2.1.RELEASE.jar:2.2.1.RELEASE]\r\n    \tat org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:397) [spring-boot-2.2.1.RELEASE.jar:2.2.1.RELEASE]\r\n    \tat org.springframework.boot.SpringApplication.run(SpringApplication.java:315) [spring-boot-2.2.1.RELEASE.jar:2.2.1.RELEASE]\r\n    \tat org.springframework.boot.SpringApplication.run(SpringApplication.java:1226) [spring-boot-2.2.1.RELEASE.jar:2.2.1.RELEASE]\r\n    \tat org.springframework.boot.SpringApplication.run(SpringApplication.java:1215) [spring-boot-2.2.1.RELEASE.jar:2.2.1.RELEASE]\r\n    \tat com.example.sslserver.SslServerApplication.main(SslServerApplication.java:10) [classes/:na]\r\n    \tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:1.8.0_152]\r\n    \tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[na:1.8.0_152]\r\n    \tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:1.8.0_152]\r\n    \tat java.lang.reflect.Method.invoke(Method.java:498) ~[na:1.8.0_152]\r\n    \tat com.intellij.rt.execution.application.AppMain.main(AppMain.java:147) [idea_rt.jar:na]\r\n    Caused by: sun.security.pkcs11.wrapper.PKCS11Exception: CKR_FUNCTION_FAILED\r\n    \tat sun.security.pkcs11.wrapper.PKCS11.C_Initialize(Native Method) ~[sunpkcs11.jar:1.8.0_161]\r\n    \tat sun.security.pkcs11.wrapper.PKCS11$SynchronizedPKCS11.C_Initialize(PKCS11.java:1545) ~[sunpkcs11.jar:1.8.0_161]\r\n    \tat sun.security.pkcs11.wrapper.PKCS11.getInstance(PKCS11.java:157) ~[sunpkcs11.jar:1.8.0_161]\r\n    \tat sun.security.pkcs11.SunPKCS11.&lt;init&gt;(SunPKCS11.java:330) ~[sunpkcs11.jar:1.8.0_161]\r\n    \t... 48 common frames omitted\r\n    \r\n    INFO 16788 --- [           main] o.apache.catalina.core.StandardService   : Stopping service [Tomcat]\r\n    INFO 16788 --- [           main] ConditionEvaluationReportLoggingListener : \r\n    \r\n    Error starting ApplicationContext. To display the conditions report re-run your application with &#39;debug&#39; enabled.\r\n    ERROR 16788 --- [           main] o.s.boot.SpringApplication               : Application run failed\r\n    \r\n    org.springframework.boot.web.server.WebServerException: Unable to start embedded Tomcat server\r\n    \tat org.springframework.boot.web.embedded.tomcat.TomcatWebServer.start(TomcatWebServer.java:215) ~[spring-boot-2.2.1.RELEASE.jar:2.2.1.RELEASE]\r\n    \tat org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.startWebServer(ServletWebServerApplicationContext.java:297) ~[spring-boot-2.2.1.RELEASE.jar:2.2.1.RELEASE]\r\n    \tat org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.finishRefresh(ServletWebServerApplicationContext.java:163) ~[spring-boot-2.2.1.RELEASE.jar:2.2.1.RELEASE]\r\n    \tat org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:553) ~[spring-context-5.2.1.RELEASE.jar:5.2.1.RELEASE]\r\n    \tat org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:141) ~[spring-boot-2.2.1.RELEASE.jar:2.2.1.RELEASE]\r\n    \tat org.springframework.boot.SpringApplication.refresh(SpringApplication.java:747) [spring-boot-2.2.1.RELEASE.jar:2.2.1.RELEASE]\r\n    \tat org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:397) [spring-boot-2.2.1.RELEASE.jar:2.2.1.RELEASE]\r\n    \tat org.springframework.boot.SpringApplication.run(SpringApplication.java:315) [spring-boot-2.2.1.RELEASE.jar:2.2.1.RELEASE]\r\n    \tat org.springframework.boot.SpringApplication.run(SpringApplication.java:1226) [spring-boot-2.2.1.RELEASE.jar:2.2.1.RELEASE]\r\n    \tat org.springframework.boot.SpringApplication.run(SpringApplication.java:1215) [spring-boot-2.2.1.RELEASE.jar:2.2.1.RELEASE]\r\n    \tat com.example.sslserver.SslServerApplication.main(SslServerApplication.java:10) [classes/:na]\r\n    \tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:1.8.0_152]\r\n    \tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[na:1.8.0_152]\r\n    \tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:1.8.0_152]\r\n    \tat java.lang.reflect.Method.invoke(Method.java:498) ~[na:1.8.0_152]\r\n    \tat com.intellij.rt.execution.application.AppMain.main(AppMain.java:147) [idea_rt.jar:na]\r\n    Caused by: java.lang.IllegalArgumentException: standardService.connector.startFailed\r\n    \tat org.apache.catalina.core.StandardService.addConnector(StandardService.java:231) ~[tomcat-embed-core-9.0.27.jar:9.0.27]\r\n    \tat org.springframework.boot.web.embedded.tomcat.TomcatWebServer.addPreviouslyRemovedConnectors(TomcatWebServer.java:278) ~[spring-boot-2.2.1.RELEASE.jar:2.2.1.RELEASE]\r\n    \tat org.springframework.boot.web.embedded.tomcat.TomcatWebServer.start(TomcatWebServer.java:197) ~[spring-boot-2.2.1.RELEASE.jar:2.2.1.RELEASE]\r\n    \t... 15 common frames omitted\r\n    Caused by: org.apache.catalina.LifecycleException: Protocol handler start failed\r\n    \tat org.apache.catalina.connector.Connector.startInternal(Connector.java:1008) ~[tomcat-embed-core-9.0.27.jar:9.0.27]\r\n    \tat org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183) ~[tomcat-embed-core-9.0.27.jar:9.0.27]\r\n    \tat org.apache.catalina.core.StandardService.addConnector(StandardService.java:227) ~[tomcat-embed-core-9.0.27.jar:9.0.27]\r\n    \t... 17 common frames omitted\r\n    Caused by: java.lang.IllegalArgumentException: Failed to load keystore type [PKCS11] with path [file:/C:/ProjectsGit/ssl-server/NONE] due to [Initialization failed]\r\n    \tat org.apache.tomcat.util.net.AbstractJsseEndpoint.createSSLContext(AbstractJsseEndpoint.java:99) ~[tomcat-embed-core-9.0.27.jar:9.0.27]\r\n    \tat org.apache.tomcat.util.net.AbstractJsseEndpoint.initialiseSsl(AbstractJsseEndpoint.java:71) ~[tomcat-embed-core-9.0.27.jar:9.0.27]\r\n    \tat org.apache.tomcat.util.net.NioEndpoint.bind(NioEndpoint.java:218) ~[tomcat-embed-core-9.0.27.jar:9.0.27]\r\n    \tat org.apache.tomcat.util.net.AbstractEndpoint.bindWithCleanup(AbstractEndpoint.java:1124) ~[tomcat-embed-core-9.0.27.jar:9.0.27]\r\n    \tat org.apache.tomcat.util.net.AbstractEndpoint.start(AbstractEndpoint.java:1210) ~[tomcat-embed-core-9.0.27.jar:9.0.27]\r\n    \tat org.apache.coyote.AbstractProtocol.start(AbstractProtocol.java:586) ~[tomcat-embed-core-9.0.27.jar:9.0.27]\r\n    \tat org.apache.catalina.connector.Connector.startInternal(Connector.java:1005) ~[tomcat-embed-core-9.0.27.jar:9.0.27]\r\n    \t... 19 common frames omitted\r\n    Caused by: java.io.IOException: Failed to load keystore type [PKCS11] with path [file:/C:/ProjectsGit/ssl-server/NONE] due to [Initialization failed]\r\n    \tat org.apache.tomcat.util.net.SSLUtilBase.getStore(SSLUtilBase.java:229) ~[tomcat-embed-core-9.0.27.jar:9.0.27]\r\n    \tat org.apache.tomcat.util.net.SSLHostConfigCertificate.getCertificateKeystore(SSLHostConfigCertificate.java:206) ~[tomcat-embed-core-9.0.27.jar:9.0.27]\r\n    \tat org.apache.tomcat.util.net.SSLUtilBase.getKeyManagers(SSLUtilBase.java:283) ~[tomcat-embed-core-9.0.27.jar:9.0.27]\r\n    \tat org.apache.tomcat.util.net.SSLUtilBase.createSSLContext(SSLUtilBase.java:247) ~[tomcat-embed-core-9.0.27.jar:9.0.27]\r\n    \tat org.apache.tomcat.util.net.AbstractJsseEndpoint.createSSLContext(AbstractJsseEndpoint.java:97) ~[tomcat-embed-core-9.0.27.jar:9.0.27]\r\n    \t... 25 common frames omitted\r\n    \r\n    INFO 16788 --- [           main] o.s.s.concurrent.ThreadPoolTaskExecutor  : Shutting down ExecutorService &#39;applicationTaskExecutor&#39;\r\n    \r\n    Process finished with exit code 1\r\n\r\nPlease tell me what I did wrong? \r\n\r\nMaybe there is another way to establish TLS connections for service requests using PKCS11 provider (define KeyManager and TrustManager, use SSLSocketFactory, etc.) but I don&#39;t know it very well. Any examples would be very useful.\r\n \r\n\r\n","title":"Using PKCS11 keystore type to establish TLS connections in a web application on Spring Boot","body":"<p>I try to set TLS connections for my web-app build with Spring Boot. My application.properties config file look like that</p>\n\n<pre><code>server.port=9999\nserver.ssl.key-store-password=password\nserver.ssl.key-store=NONE\nserver.ssl.trust-store=C:/newcert/truststore.keystore\nserver.ssl.trust-store-password=password\nserver.ssl.key-store-provider=SunPKCS11-Thales\nserver.ssl.key-store-type=PKCS11\nserver.ssl.key-alias=test_key_ocs2\n</code></pre>\n\n<p>In java.security file (%JAVA_HOME%/jre/lib/security/) contains row:</p>\n\n<pre><code>security.provider.11=sun.security.pkcs11.SunPKCS11 C:/cert/pkcs11.cfg\n</code></pre>\n\n<p>In pkcs11.cfg file contains:</p>\n\n<pre><code>name=Thales\nlibrary = C:\\nCipher\\nfast\\toolkits\\pkcs11\\cknfast-64.dll\nslot=761406613\n</code></pre>\n\n<p>But after run my app I get error:</p>\n\n<pre><code>INFO 16788 --- [           main] o.s.s.concurrent.ThreadPoolTaskExecutor  : Initializing ExecutorService 'applicationTaskExecutor'\nERROR 16788 --- [           main] org.apache.tomcat.util.net.SSLUtilBase   : Failed to load keystore type [PKCS11] with path [file:/C:/ProjectsGit/ssl-server/NONE] due to [Initialization failed]\n\njava.security.ProviderException: Initialization failed\n    at sun.security.pkcs11.SunPKCS11.&lt;init&gt;(SunPKCS11.java:376) ~[sunpkcs11.jar:1.8.0_161]\n    at sun.security.pkcs11.SunPKCS11.&lt;init&gt;(SunPKCS11.java:103) ~[sunpkcs11.jar:1.8.0_161]\n    at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method) ~[na:1.8.0_152]\n    at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:62) ~[na:1.8.0_152]\n    at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45) ~[na:1.8.0_152]\n    at java.lang.reflect.Constructor.newInstance(Constructor.java:423) ~[na:1.8.0_152]\n    at sun.security.jca.ProviderConfig$2.run(ProviderConfig.java:224) ~[na:1.8.0_152]\n    at sun.security.jca.ProviderConfig$2.run(ProviderConfig.java:206) ~[na:1.8.0_152]\n    at java.security.AccessController.doPrivileged(Native Method) ~[na:1.8.0_152]\n    at sun.security.jca.ProviderConfig.doLoadProvider(ProviderConfig.java:206) ~[na:1.8.0_152]\n    at sun.security.jca.ProviderConfig.getProvider(ProviderConfig.java:187) ~[na:1.8.0_152]\n    at sun.security.jca.ProviderList.getProvider(ProviderList.java:233) ~[na:1.8.0_152]\n    at sun.security.jca.ProviderList.getIndex(ProviderList.java:263) ~[na:1.8.0_152]\n    at sun.security.jca.ProviderList.getProviderConfig(ProviderList.java:247) ~[na:1.8.0_152]\n    at sun.security.jca.ProviderList.getProvider(ProviderList.java:253) ~[na:1.8.0_152]\n    at sun.security.jca.GetInstance.getService(GetInstance.java:81) ~[na:1.8.0_152]\n    at sun.security.jca.GetInstance.getInstance(GetInstance.java:206) ~[na:1.8.0_152]\n    at java.security.Security.getImpl(Security.java:698) ~[na:1.8.0_152]\n    at java.security.KeyStore.getInstance(KeyStore.java:896) ~[na:1.8.0_152]\n    at org.apache.tomcat.util.net.SSLUtilBase.getStore(SSLUtilBase.java:187) [tomcat-embed-core-9.0.27.jar:9.0.27]\n    at org.apache.tomcat.util.net.SSLHostConfigCertificate.getCertificateKeystore(SSLHostConfigCertificate.java:206) [tomcat-embed-core-9.0.27.jar:9.0.27]\n    at org.apache.tomcat.util.net.SSLUtilBase.getKeyManagers(SSLUtilBase.java:283) [tomcat-embed-core-9.0.27.jar:9.0.27]\n    at org.apache.tomcat.util.net.SSLUtilBase.createSSLContext(SSLUtilBase.java:247) [tomcat-embed-core-9.0.27.jar:9.0.27]\n    at org.apache.tomcat.util.net.AbstractJsseEndpoint.createSSLContext(AbstractJsseEndpoint.java:97) [tomcat-embed-core-9.0.27.jar:9.0.27]\n    at org.apache.tomcat.util.net.AbstractJsseEndpoint.initialiseSsl(AbstractJsseEndpoint.java:71) [tomcat-embed-core-9.0.27.jar:9.0.27]\n    at org.apache.tomcat.util.net.NioEndpoint.bind(NioEndpoint.java:218) [tomcat-embed-core-9.0.27.jar:9.0.27]\n    at org.apache.tomcat.util.net.AbstractEndpoint.bindWithCleanup(AbstractEndpoint.java:1124) [tomcat-embed-core-9.0.27.jar:9.0.27]\n    at org.apache.tomcat.util.net.AbstractEndpoint.start(AbstractEndpoint.java:1210) [tomcat-embed-core-9.0.27.jar:9.0.27]\n    at org.apache.coyote.AbstractProtocol.start(AbstractProtocol.java:586) [tomcat-embed-core-9.0.27.jar:9.0.27]\n    at org.apache.catalina.connector.Connector.startInternal(Connector.java:1005) [tomcat-embed-core-9.0.27.jar:9.0.27]\n    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183) [tomcat-embed-core-9.0.27.jar:9.0.27]\n    at org.apache.catalina.core.StandardService.addConnector(StandardService.java:227) [tomcat-embed-core-9.0.27.jar:9.0.27]\n    at org.springframework.boot.web.embedded.tomcat.TomcatWebServer.addPreviouslyRemovedConnectors(TomcatWebServer.java:278) [spring-boot-2.2.1.RELEASE.jar:2.2.1.RELEASE]\n    at org.springframework.boot.web.embedded.tomcat.TomcatWebServer.start(TomcatWebServer.java:197) [spring-boot-2.2.1.RELEASE.jar:2.2.1.RELEASE]\n    at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.startWebServer(ServletWebServerApplicationContext.java:297) [spring-boot-2.2.1.RELEASE.jar:2.2.1.RELEASE]\n    at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.finishRefresh(ServletWebServerApplicationContext.java:163) [spring-boot-2.2.1.RELEASE.jar:2.2.1.RELEASE]\n    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:553) [spring-context-5.2.1.RELEASE.jar:5.2.1.RELEASE]\n    at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:141) [spring-boot-2.2.1.RELEASE.jar:2.2.1.RELEASE]\n    at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:747) [spring-boot-2.2.1.RELEASE.jar:2.2.1.RELEASE]\n    at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:397) [spring-boot-2.2.1.RELEASE.jar:2.2.1.RELEASE]\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:315) [spring-boot-2.2.1.RELEASE.jar:2.2.1.RELEASE]\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:1226) [spring-boot-2.2.1.RELEASE.jar:2.2.1.RELEASE]\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:1215) [spring-boot-2.2.1.RELEASE.jar:2.2.1.RELEASE]\n    at com.example.sslserver.SslServerApplication.main(SslServerApplication.java:10) [classes/:na]\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:1.8.0_152]\n    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[na:1.8.0_152]\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:1.8.0_152]\n    at java.lang.reflect.Method.invoke(Method.java:498) ~[na:1.8.0_152]\n    at com.intellij.rt.execution.application.AppMain.main(AppMain.java:147) [idea_rt.jar:na]\nCaused by: sun.security.pkcs11.wrapper.PKCS11Exception: CKR_FUNCTION_FAILED\n    at sun.security.pkcs11.wrapper.PKCS11.C_Initialize(Native Method) ~[sunpkcs11.jar:1.8.0_161]\n    at sun.security.pkcs11.wrapper.PKCS11$SynchronizedPKCS11.C_Initialize(PKCS11.java:1545) ~[sunpkcs11.jar:1.8.0_161]\n    at sun.security.pkcs11.wrapper.PKCS11.getInstance(PKCS11.java:157) ~[sunpkcs11.jar:1.8.0_161]\n    at sun.security.pkcs11.SunPKCS11.&lt;init&gt;(SunPKCS11.java:330) ~[sunpkcs11.jar:1.8.0_161]\n    ... 48 common frames omitted\n\nINFO 16788 --- [           main] o.apache.catalina.core.StandardService   : Stopping service [Tomcat]\nINFO 16788 --- [           main] ConditionEvaluationReportLoggingListener : \n\nError starting ApplicationContext. To display the conditions report re-run your application with 'debug' enabled.\nERROR 16788 --- [           main] o.s.boot.SpringApplication               : Application run failed\n\norg.springframework.boot.web.server.WebServerException: Unable to start embedded Tomcat server\n    at org.springframework.boot.web.embedded.tomcat.TomcatWebServer.start(TomcatWebServer.java:215) ~[spring-boot-2.2.1.RELEASE.jar:2.2.1.RELEASE]\n    at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.startWebServer(ServletWebServerApplicationContext.java:297) ~[spring-boot-2.2.1.RELEASE.jar:2.2.1.RELEASE]\n    at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.finishRefresh(ServletWebServerApplicationContext.java:163) ~[spring-boot-2.2.1.RELEASE.jar:2.2.1.RELEASE]\n    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:553) ~[spring-context-5.2.1.RELEASE.jar:5.2.1.RELEASE]\n    at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:141) ~[spring-boot-2.2.1.RELEASE.jar:2.2.1.RELEASE]\n    at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:747) [spring-boot-2.2.1.RELEASE.jar:2.2.1.RELEASE]\n    at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:397) [spring-boot-2.2.1.RELEASE.jar:2.2.1.RELEASE]\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:315) [spring-boot-2.2.1.RELEASE.jar:2.2.1.RELEASE]\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:1226) [spring-boot-2.2.1.RELEASE.jar:2.2.1.RELEASE]\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:1215) [spring-boot-2.2.1.RELEASE.jar:2.2.1.RELEASE]\n    at com.example.sslserver.SslServerApplication.main(SslServerApplication.java:10) [classes/:na]\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:1.8.0_152]\n    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[na:1.8.0_152]\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:1.8.0_152]\n    at java.lang.reflect.Method.invoke(Method.java:498) ~[na:1.8.0_152]\n    at com.intellij.rt.execution.application.AppMain.main(AppMain.java:147) [idea_rt.jar:na]\nCaused by: java.lang.IllegalArgumentException: standardService.connector.startFailed\n    at org.apache.catalina.core.StandardService.addConnector(StandardService.java:231) ~[tomcat-embed-core-9.0.27.jar:9.0.27]\n    at org.springframework.boot.web.embedded.tomcat.TomcatWebServer.addPreviouslyRemovedConnectors(TomcatWebServer.java:278) ~[spring-boot-2.2.1.RELEASE.jar:2.2.1.RELEASE]\n    at org.springframework.boot.web.embedded.tomcat.TomcatWebServer.start(TomcatWebServer.java:197) ~[spring-boot-2.2.1.RELEASE.jar:2.2.1.RELEASE]\n    ... 15 common frames omitted\nCaused by: org.apache.catalina.LifecycleException: Protocol handler start failed\n    at org.apache.catalina.connector.Connector.startInternal(Connector.java:1008) ~[tomcat-embed-core-9.0.27.jar:9.0.27]\n    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183) ~[tomcat-embed-core-9.0.27.jar:9.0.27]\n    at org.apache.catalina.core.StandardService.addConnector(StandardService.java:227) ~[tomcat-embed-core-9.0.27.jar:9.0.27]\n    ... 17 common frames omitted\nCaused by: java.lang.IllegalArgumentException: Failed to load keystore type [PKCS11] with path [file:/C:/ProjectsGit/ssl-server/NONE] due to [Initialization failed]\n    at org.apache.tomcat.util.net.AbstractJsseEndpoint.createSSLContext(AbstractJsseEndpoint.java:99) ~[tomcat-embed-core-9.0.27.jar:9.0.27]\n    at org.apache.tomcat.util.net.AbstractJsseEndpoint.initialiseSsl(AbstractJsseEndpoint.java:71) ~[tomcat-embed-core-9.0.27.jar:9.0.27]\n    at org.apache.tomcat.util.net.NioEndpoint.bind(NioEndpoint.java:218) ~[tomcat-embed-core-9.0.27.jar:9.0.27]\n    at org.apache.tomcat.util.net.AbstractEndpoint.bindWithCleanup(AbstractEndpoint.java:1124) ~[tomcat-embed-core-9.0.27.jar:9.0.27]\n    at org.apache.tomcat.util.net.AbstractEndpoint.start(AbstractEndpoint.java:1210) ~[tomcat-embed-core-9.0.27.jar:9.0.27]\n    at org.apache.coyote.AbstractProtocol.start(AbstractProtocol.java:586) ~[tomcat-embed-core-9.0.27.jar:9.0.27]\n    at org.apache.catalina.connector.Connector.startInternal(Connector.java:1005) ~[tomcat-embed-core-9.0.27.jar:9.0.27]\n    ... 19 common frames omitted\nCaused by: java.io.IOException: Failed to load keystore type [PKCS11] with path [file:/C:/ProjectsGit/ssl-server/NONE] due to [Initialization failed]\n    at org.apache.tomcat.util.net.SSLUtilBase.getStore(SSLUtilBase.java:229) ~[tomcat-embed-core-9.0.27.jar:9.0.27]\n    at org.apache.tomcat.util.net.SSLHostConfigCertificate.getCertificateKeystore(SSLHostConfigCertificate.java:206) ~[tomcat-embed-core-9.0.27.jar:9.0.27]\n    at org.apache.tomcat.util.net.SSLUtilBase.getKeyManagers(SSLUtilBase.java:283) ~[tomcat-embed-core-9.0.27.jar:9.0.27]\n    at org.apache.tomcat.util.net.SSLUtilBase.createSSLContext(SSLUtilBase.java:247) ~[tomcat-embed-core-9.0.27.jar:9.0.27]\n    at org.apache.tomcat.util.net.AbstractJsseEndpoint.createSSLContext(AbstractJsseEndpoint.java:97) ~[tomcat-embed-core-9.0.27.jar:9.0.27]\n    ... 25 common frames omitted\n\nINFO 16788 --- [           main] o.s.s.concurrent.ThreadPoolTaskExecutor  : Shutting down ExecutorService 'applicationTaskExecutor'\n\nProcess finished with exit code 1\n</code></pre>\n\n<p>Please tell me what I did wrong? </p>\n\n<p>Maybe there is another way to establish TLS connections for service requests using PKCS11 provider (define KeyManager and TrustManager, use SSLSocketFactory, etc.) but I don't know it very well. Any examples would be very useful.</p>\n"},{"tags":["java","powershell"],"comments":[{"owner":{"account_id":366852,"reputation":161775,"user_id":712649,"accept_rate":100,"display_name":"Mathias R. Jessen"},"score":2,"creation_date":1692193095,"post_id":76913893,"comment_id":135590552,"body_markdown":"What&#39;s with the `$[...]` syntax? Are you running your script through some sort of template engine to generate the correct arguments?","body":"What&#39;s with the <code>$[...]</code> syntax? Are you running your script through some sort of template engine to generate the correct arguments?"},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1692193770,"post_id":76913893,"comment_id":135590722,"body_markdown":"Shouldn&#39;t you be quoting those parameters?","body":"Shouldn&#39;t you be quoting those parameters?"},{"owner":{"account_id":3992180,"reputation":1526,"user_id":3290745,"display_name":"Tristate"},"score":1,"creation_date":1692194057,"post_id":76913893,"comment_id":135590788,"body_markdown":"You need double quote the params. e.g. java -jar JavaApp_v2.jar &quot;$Name&quot; &quot;$Region&quot; &quot;$Device&quot; &quot;$ForHO&quot; &quot;$Ex_Pas&quot; &quot;$Ex_Pass_Nr&quot; &quot;$Monitor&quot;","body":"You need double quote the params. e.g. java -jar JavaApp_v2.jar &quot;$Name&quot; &quot;$Region&quot; &quot;$Device&quot; &quot;$ForHO&quot; &quot;$Ex_Pas&quot; &quot;$Ex_Pass_Nr&quot; &quot;$Monitor&quot;"},{"owner":{"account_id":19375,"reputation":396713,"user_id":45375,"display_name":"mklement0"},"score":0,"creation_date":1692227706,"post_id":76913893,"comment_id":135596644,"body_markdown":"@Tristate: In PowerShell - unlike in `cmd.exe` and  in POSIX-compatible shells \n such as Bash - variable references used as command arguments do NOT need double-quoting (even if they contain spaces or other shell metacharacters).","body":"@Tristate: In PowerShell - unlike in <code>cmd.exe</code> and  in POSIX-compatible shells   such as Bash - variable references used as command arguments do NOT need double-quoting (even if they contain spaces or other shell metacharacters)."},{"owner":{"account_id":19375,"reputation":396713,"user_id":45375,"display_name":"mklement0"},"score":0,"creation_date":1692278610,"post_id":76913893,"comment_id":135603625,"body_markdown":"@ajra: A variable containing the _empty string_ indeed causes a problem _on the PowerShell side_, as described below. _Special characters_ are _not_ a problem on the PowerShell side, though can be for target programs with nonstandard argument parsing, such as batch files.","body":"@ajra: A variable containing the <i>empty string</i> indeed causes a problem <i>on the PowerShell side</i>, as described below. <i>Special characters</i> are <i>not</i> a problem on the PowerShell side, though can be for target programs with nonstandard argument parsing, such as batch files."}],"answers":[{"tags":[],"owner":{"account_id":19375,"reputation":396713,"user_id":45375,"display_name":"mklement0"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1692280393,"creation_date":1692226826,"answer_id":76917546,"question_id":76913893,"body_markdown":"&lt;!-- language-all: sh --&gt;\r\n\r\nNote:\r\n\r\n* The symptom is likely caused by variables containing the _empty string_ (see below), even though the sample argument values in the question never result in such, given that _no_ string interpolation is performed, because the syntax form `$[var]` isn&#39;t a valid variable reference.\r\n\r\n* You also mention _special characters_ as a problem, though that is unlikely, given that PowerShell passes them through correctly, even with variable references _not_ enclosed in `&quot;...&quot;`, the latter generally not being necessary in PowerShell (e.g., `some.exe $var` is sufficient, no need for `some.exe &quot;$var&quot;`).\r\n\r\n---\r\n\r\n&gt; but the problem is when **if one these parameter is empty, one parameter takes the value of another one**\r\n\r\nYou&#39;re likely seeing a **long-standing bug** present in ***Windows PowerShell*** and in **[_PowerShell (Core)_](https://github.com/PowerShell/PowerShell/blob/master/README.md) _up to version 7.2.x_** - it has been **fixed in v7.3+**, with **selective exceptions on Windows** - see [this answer](https://stackoverflow.com/a/74440425/45375) for details (it focuses on arguments with _embedded double-quotes_, but the issue at hand is part of the problem).\r\n\r\n * **Trying to pass an _empty string_ (`&quot;&quot;`, `&#39;&#39;`) as an argument to an _external program_ is _quietly ignored_**; that is, no argument is passed at all.\r\n\r\n * Note that, by contrast, passing `$null` is ignored _by design_.\r\n\r\n**Examples**:\r\n\r\nThe following uses `python` to simply echo the arguments it was passed.\r\n\r\n```\r\n# Pass an empty-string *literal*\r\npython -c &#39;import sys; print(sys.argv[1:])&#39; &#39;&#39; hi\r\n\r\n# Pass an empty string via a *variable*\r\n$someArg=&#39;&#39;\r\npython -c &#39;import sys; print(sys.argv[1:])&#39; $someArg hi\r\n```\r\n\r\n* The expected output is `[&#39;&#39;, &#39;hi&#39;]`\r\n* With the bug present, the output is `[&#39;hi&#39;]`, indicating that the empty string wasn&#39;t passed at all.\r\n\r\n**Workarounds**:\r\n\r\n* Passing an empty string _literally_:\r\n\r\n  * Use **`` &#39;&quot;&quot;&#39; ``** (sic) (`` `&quot;`&quot; `` works too):\r\n\r\n        # In WinPS and PS Core v7.2.x- only\r\n        # (In v7.3+, use it only with $PSNativeCommandArgumentPassing = &#39;Legacy&#39;.)\r\n        python -c &#39;import sys; print(sys.argv[1:])&#39; &#39;&quot;&quot;&#39; hi\r\n\r\n  * Alternatively, on Windows only, use `--%`, the [stop-parsing token](https://learn.microsoft.com/en-us/powershell/module/microsoft.powershell.core/about/about_Parsing#the-stop-parsing-token) in combination with `&quot;&quot;` (_not_ `&#39;&#39;`), but note its **many limitations**, detailed in the bottom section of [this answer](http://stackoverflow.com/a/42601912/45375), notably the inability to embed PowerShell variables and expressions:\r\n\r\n        # Windows only.\r\n        python -c &#39;import sys; print(sys.argv[1:])&#39; --% &quot;&quot; hi\r\n\r\n* Passing an empty string _via variables_ that may or may not contain the empty string:\r\n\r\n  * With an _individual_ argument:\r\n\r\n        $someArg = &#39;&#39;\r\n        python -c &#39;import sys; print(sys.argv[1:])&#39; ($someArg, &#39;&quot;&quot;&#39;)[$someArg -is [string] -and -not $someArg] hi\r\n\r\n  * With an _array_ of arguments:\r\n\r\n        $someArgs = &#39;&#39;, &#39;hi&#39;\r\n        python -c &#39;import sys; print(sys.argv[1:])&#39; $someArgs.ForEach({\r\n            ($_, &#39;&quot;&quot;&#39;)[$_ -is [string] -and -not $_]\r\n          })\r\n\r\n  * Explanation of the `($someArg, &#39;&quot;&quot;&#39;)[$someArg -is [string] -and -not $someArg]` technique:\r\n\r\n    * It is the concise equivalent of:\r\n\r\n          if ($someArg -is [string] -and -not $someArg) { &#39;&quot;&quot;&#39; } else { $someArg }\r\n\r\n     * In [_PowerShell (Core) 7+_](https://github.com/PowerShell/PowerShell/blob/master/README.md), you can also use the [ternary conditional operator](https://learn.microsoft.com/en-us/powershell/module/microsoft.powershell.core/about/about_Operators#ternary-operator--if-true--if-false)\r\n\r\n           ($someArg -is [string] -and -not $someArg ? &#39;&quot;&quot;&#39; : $someArg)\r\n\r\n    * It emulates a conditional using an _array_ to represent the return values, and relies on a _Boolean_ value getting implicitly converted to an _integer_ in the context of an index expression (`[...]`), with `$false` becoming `0`, and `$true` becoming `1`, so that the appropriate array element is returned.&lt;sup&gt;[1]&lt;/sup&gt;\r\n\r\n    * If you know `$someArg` to _always be a string_, you can simplify to one of the following:\r\n\r\n          ($someArg, &#39;&quot;&quot;&#39;)[-not $someArg]\r\n          # PS v7+ only\r\n          (-not $someArg ? &#39;&quot;&quot;&#39; : $someArg)\r\n\r\n    * All variants rely on PowerShell&#39;s implicit to-Boolean conversions, which treat an _empty string_ as `$false`, and any nonempty one as `$true`. The complete rules are summarized in the bottom section of [this answer](https://stackoverflow.com/a/53108138/45375).\r\n\r\n---\r\n\r\n**Module-based polyfill**:\r\n\r\nIf you **need to write cross-edition, cross-version PowerShell code**, the **[`Native` module](https://github.com/mklement0/Native)** (`Install-Module Native`; authored by me), has an **`ie`** function (short for: Invoke Executable), which is a polyfill that **provides workaround-free, cross-edition (v3+), cross-platform, cross-version, forward-compatible behavior in the _vast majority_ of cases**, both for passing _empty-string_ arguments and arguments _with embedded `&quot;` chars. correctly_ - simply prepend `ie ` to your external-program calls:\r\n\r\n```\r\n# With the &#39;Native&#39; module installed, simply prepending `ie` \r\n# to your external-program calls ensures that both empty-string\r\n# arguments and arguments with embedded &quot; chars. are passed correctly.\r\nie python -c &#39;import sys; print(sys.argv[1:])&#39; &#39;&#39; hi\r\n```\r\n\r\n---\r\n\r\n&lt;sup&gt;[1] Small caveat: unlike true conditionals, this shortcut performs no _short-circuiting_; that is, _both_ array elements are evaluated up front, before the appropriate element is selected by the index expression.&lt;/sup&gt;","title":"pass parameters from PowerShell to a jar file","body":"\n<p>Note:</p>\n<ul>\n<li><p>The symptom is likely caused by variables containing the <em>empty string</em> (see below), even though the sample argument values in the question never result in such, given that <em>no</em> string interpolation is performed, because the syntax form <code>$[var]</code> isn't a valid variable reference.</p>\n</li>\n<li><p>You also mention <em>special characters</em> as a problem, though that is unlikely, given that PowerShell passes them through correctly, even with variable references <em>not</em> enclosed in <code>&quot;...&quot;</code>, the latter generally not being necessary in PowerShell (e.g., <code>some.exe $var</code> is sufficient, no need for <code>some.exe &quot;$var&quot;</code>).</p>\n</li>\n</ul>\n<hr />\n<blockquote>\n<p>but the problem is when <strong>if one these parameter is empty, one parameter takes the value of another one</strong></p>\n</blockquote>\n<p>You're likely seeing a <strong>long-standing bug</strong> present in <em><strong>Windows PowerShell</strong></em> and in <strong><a href=\"https://github.com/PowerShell/PowerShell/blob/master/README.md\" rel=\"nofollow noreferrer\"><em>PowerShell (Core)</em></a> <em>up to version 7.2.x</em></strong> - it has been <strong>fixed in v7.3+</strong>, with <strong>selective exceptions on Windows</strong> - see <a href=\"https://stackoverflow.com/a/74440425/45375\">this answer</a> for details (it focuses on arguments with <em>embedded double-quotes</em>, but the issue at hand is part of the problem).</p>\n<ul>\n<li><p><strong>Trying to pass an <em>empty string</em> (<code>&quot;&quot;</code>, <code>''</code>) as an argument to an <em>external program</em> is <em>quietly ignored</em></strong>; that is, no argument is passed at all.</p>\n</li>\n<li><p>Note that, by contrast, passing <code>$null</code> is ignored <em>by design</em>.</p>\n</li>\n</ul>\n<p><strong>Examples</strong>:</p>\n<p>The following uses <code>python</code> to simply echo the arguments it was passed.</p>\n<pre class=\"lang-bash prettyprint-override\"><code># Pass an empty-string *literal*\npython -c 'import sys; print(sys.argv[1:])' '' hi\n\n# Pass an empty string via a *variable*\n$someArg=''\npython -c 'import sys; print(sys.argv[1:])' $someArg hi\n</code></pre>\n<ul>\n<li>The expected output is <code>['', 'hi']</code></li>\n<li>With the bug present, the output is <code>['hi']</code>, indicating that the empty string wasn't passed at all.</li>\n</ul>\n<p><strong>Workarounds</strong>:</p>\n<ul>\n<li><p>Passing an empty string <em>literally</em>:</p>\n<ul>\n<li><p>Use <strong><code>'&quot;&quot;'</code></strong> (sic) (<code>`&quot;`&quot;</code> works too):</p>\n<pre class=\"lang-bash prettyprint-override\"><code># In WinPS and PS Core v7.2.x- only\n# (In v7.3+, use it only with $PSNativeCommandArgumentPassing = 'Legacy'.)\npython -c 'import sys; print(sys.argv[1:])' '&quot;&quot;' hi\n</code></pre>\n</li>\n<li><p>Alternatively, on Windows only, use <code>--%</code>, the <a href=\"https://learn.microsoft.com/en-us/powershell/module/microsoft.powershell.core/about/about_Parsing#the-stop-parsing-token\" rel=\"nofollow noreferrer\">stop-parsing token</a> in combination with <code>&quot;&quot;</code> (<em>not</em> <code>''</code>), but note its <strong>many limitations</strong>, detailed in the bottom section of <a href=\"http://stackoverflow.com/a/42601912/45375\">this answer</a>, notably the inability to embed PowerShell variables and expressions:</p>\n<pre class=\"lang-bash prettyprint-override\"><code># Windows only.\npython -c 'import sys; print(sys.argv[1:])' --% &quot;&quot; hi\n</code></pre>\n</li>\n</ul>\n</li>\n<li><p>Passing an empty string <em>via variables</em> that may or may not contain the empty string:</p>\n<ul>\n<li><p>With an <em>individual</em> argument:</p>\n<pre class=\"lang-bash prettyprint-override\"><code>$someArg = ''\npython -c 'import sys; print(sys.argv[1:])' ($someArg, '&quot;&quot;')[$someArg -is [string] -and -not $someArg] hi\n</code></pre>\n</li>\n<li><p>With an <em>array</em> of arguments:</p>\n<pre class=\"lang-bash prettyprint-override\"><code>$someArgs = '', 'hi'\npython -c 'import sys; print(sys.argv[1:])' $someArgs.ForEach({\n    ($_, '&quot;&quot;')[$_ -is [string] -and -not $_]\n  })\n</code></pre>\n</li>\n<li><p>Explanation of the <code>($someArg, '&quot;&quot;')[$someArg -is [string] -and -not $someArg]</code> technique:</p>\n<ul>\n<li><p>It is the concise equivalent of:</p>\n<pre class=\"lang-bash prettyprint-override\"><code>if ($someArg -is [string] -and -not $someArg) { '&quot;&quot;' } else { $someArg }\n</code></pre>\n</li>\n<li><p>In <a href=\"https://github.com/PowerShell/PowerShell/blob/master/README.md\" rel=\"nofollow noreferrer\"><em>PowerShell (Core) 7+</em></a>, you can also use the <a href=\"https://learn.microsoft.com/en-us/powershell/module/microsoft.powershell.core/about/about_Operators#ternary-operator--if-true--if-false\" rel=\"nofollow noreferrer\">ternary conditional operator</a></p>\n<pre class=\"lang-bash prettyprint-override\"><code> ($someArg -is [string] -and -not $someArg ? '&quot;&quot;' : $someArg)\n</code></pre>\n</li>\n<li><p>It emulates a conditional using an <em>array</em> to represent the return values, and relies on a <em>Boolean</em> value getting implicitly converted to an <em>integer</em> in the context of an index expression (<code>[...]</code>), with <code>$false</code> becoming <code>0</code>, and <code>$true</code> becoming <code>1</code>, so that the appropriate array element is returned.<sup>[1]</sup></p>\n</li>\n<li><p>If you know <code>$someArg</code> to <em>always be a string</em>, you can simplify to one of the following:</p>\n<pre class=\"lang-bash prettyprint-override\"><code>($someArg, '&quot;&quot;')[-not $someArg]\n# PS v7+ only\n(-not $someArg ? '&quot;&quot;' : $someArg)\n</code></pre>\n</li>\n<li><p>All variants rely on PowerShell's implicit to-Boolean conversions, which treat an <em>empty string</em> as <code>$false</code>, and any nonempty one as <code>$true</code>. The complete rules are summarized in the bottom section of <a href=\"https://stackoverflow.com/a/53108138/45375\">this answer</a>.</p>\n</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<hr />\n<p><strong>Module-based polyfill</strong>:</p>\n<p>If you <strong>need to write cross-edition, cross-version PowerShell code</strong>, the <strong><a href=\"https://github.com/mklement0/Native\" rel=\"nofollow noreferrer\"><code>Native</code> module</a></strong> (<code>Install-Module Native</code>; authored by me), has an <strong><code>ie</code></strong> function (short for: Invoke Executable), which is a polyfill that <strong>provides workaround-free, cross-edition (v3+), cross-platform, cross-version, forward-compatible behavior in the <em>vast majority</em> of cases</strong>, both for passing <em>empty-string</em> arguments and arguments <em>with embedded <code>&quot;</code> chars. correctly</em> - simply prepend <code>ie </code> to your external-program calls:</p>\n<pre class=\"lang-bash prettyprint-override\"><code># With the 'Native' module installed, simply prepending `ie` \n# to your external-program calls ensures that both empty-string\n# arguments and arguments with embedded &quot; chars. are passed correctly.\nie python -c 'import sys; print(sys.argv[1:])' '' hi\n</code></pre>\n<hr />\n<p><sup>[1] Small caveat: unlike true conditionals, this shortcut performs no <em>short-circuiting</em>; that is, <em>both</em> array elements are evaluated up front, before the appropriate element is selected by the index expression.</sup></p>\n"}],"owner":{"account_id":1242792,"reputation":31,"user_id":1204977,"display_name":"ajra"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":78,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1692280393,"creation_date":1692191334,"question_id":76913893,"body_markdown":"When I pass parameters to a JAR, the Java application generates a  PDF file which contains the values of the parameters passed, but  the  problem is when one these parameters is empty, one parameter takes the value of another one.\r\n\r\nExample:\r\n```none\r\nd:\r\ncd D:\\JavaApp\\ITEquipmentPassV2\r\n$Name=@&quot;\r\n$[Name]\r\n&quot;@\r\n$Region=@&quot;\r\n$[Region]\r\n&quot;@\r\n$Device=@&quot;\r\n$[Device]\r\n&quot;@\r\n$ForHO=@&quot;\r\n$[ForHO]\r\n&quot;@\r\n$Ex_Pas=@&quot;\r\n$[Ex_Pa]\r\n&quot;@\r\n$Ex_Pass_Nr=@&quot;\r\n$[Ex_Pass_Nr]\r\n&quot;@\r\n$Monitor=@&quot;\r\n$[Monitorl]\r\n&quot;@\r\njava -jar JavaApp_v2.jar $Name $Region $Device $ForHO $Ex_Pas $Ex_Pass_Nr $Monitor\r\n```\r\nIf `$Ex_Pas` is empty or contains a special character then `$forHo` takes the value of `$Monitor`.\r\n","title":"pass parameters from PowerShell to a jar file","body":"<p>When I pass parameters to a JAR, the Java application generates a  PDF file which contains the values of the parameters passed, but  the  problem is when one these parameters is empty, one parameter takes the value of another one.</p>\n<p>Example:</p>\n<pre class=\"lang-none prettyprint-override\"><code>d:\ncd D:\\JavaApp\\ITEquipmentPassV2\n$Name=@&quot;\n$[Name]\n&quot;@\n$Region=@&quot;\n$[Region]\n&quot;@\n$Device=@&quot;\n$[Device]\n&quot;@\n$ForHO=@&quot;\n$[ForHO]\n&quot;@\n$Ex_Pas=@&quot;\n$[Ex_Pa]\n&quot;@\n$Ex_Pass_Nr=@&quot;\n$[Ex_Pass_Nr]\n&quot;@\n$Monitor=@&quot;\n$[Monitorl]\n&quot;@\njava -jar JavaApp_v2.jar $Name $Region $Device $ForHO $Ex_Pas $Ex_Pass_Nr $Monitor\n</code></pre>\n<p>If <code>$Ex_Pas</code> is empty or contains a special character then <code>$forHo</code> takes the value of <code>$Monitor</code>.</p>\n"},{"tags":["java","spring-boot","unit-testing","testing","apache-kafka"],"comments":[{"owner":{"account_id":2671330,"reputation":183376,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"score":0,"creation_date":1692275948,"post_id":76919337,"comment_id":135602957,"body_markdown":"There&#39;s a whole section of the docs on testing. https://docs.spring.io/spring-kafka/reference/html/#reference","body":"There&#39;s a whole section of the docs on testing. <a href=\"https://docs.spring.io/spring-kafka/reference/html/#reference\" rel=\"nofollow noreferrer\">docs.spring.io/spring-kafka/reference/html/#reference</a>"}],"answers":[{"tags":[],"owner":{"account_id":7291906,"reputation":503,"user_id":7789681,"display_name":"Alexey Bril"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1692280132,"creation_date":1692271957,"answer_id":76921108,"question_id":76919337,"body_markdown":"What you are trying to do is not unit testing. \r\n\r\nUnit tests are when you mock your entire environment and call the method you are testing directly:\r\n\r\n    @InjectMocks\r\n    Listener listener;\r\n\r\n    @Mock\r\n    Handler handler;\r\n\r\n    @Test\r\n    void givenSomething() {\r\n        var id = UUID.randomUUID();\r\n        listener.listen(id);\r\n        verify(handler).handle(id);\r\n    }\r\n\r\n\r\nIf you want to test the listener with a real kafka broker, these are integration tests and you need to prepare a test environment for this.\r\n\r\nTo do this, you can use a testcontainers or a separate docker-compose file that will run before your tests so that the real environment does not mix with the test one.\r\n\r\n[testcontainers][1]\r\n\r\n[docker-compose][2]\r\n\r\n\r\nAdditionally, there is also a spring-kafka-test library that allows you to write integration tests with kafka that resides in the application&#39;s memory.\r\n\r\nhttps://mvnrepository.com/artifact/org.springframework.kafka/spring-kafka-test\r\n\r\n```yaml\r\nspring:\r\n  kafka:\r\n    consumer:\r\n      auto-offset-reset: earliest\r\n      group-id: groupName\r\ntest:\r\n  topic: test-topic\r\n```\r\n\r\n```java\r\n@SpringBootTest\r\n@DirtiesContext\r\n@EmbeddedKafka(partitions = 1, brokerProperties = { &quot;listeners=PLAINTEXT://localhost:9092&quot;, &quot;port=9092&quot; })\r\nclass EmbeddedKafkaIntegrationTest {\r\n\r\n    @Autowired\r\n    private KafkaConsumer consumer;\r\n\r\n    @Autowired\r\n    private KafkaProducer producer;\r\n\r\n    @Value(&quot;${test.topic}&quot;)\r\n    private String topic;\r\n\r\n    @Test\r\n    public void givenEmbeddedKafkaBroker_whenSendingWithSimpleProducer_thenMessageReceived() \r\n      throws Exception {\r\n        String data = &quot;Sending with our own simple KafkaProducer&quot;;\r\n        \r\n        producer.send(topic, data);\r\n        \r\n        boolean messageConsumed = consumer.getLatch().await(10, TimeUnit.SECONDS);\r\n        assertTrue(messageConsumed);\r\n        assertThat(consumer.getPayload(), containsString(data));\r\n    }\r\n}\r\n\r\n```\r\n\r\nYou can see more details here: [https://www.baeldung.com/spring-boot-kafka-testing][3]\r\n\r\n\r\n  [1]: https://testcontainers.com/\r\n  [2]: https://docs.docker.com/compose/\r\n  [3]: https://www.baeldung.com/spring-boot-kafka-testing","title":"KafkaListner Unit Tests","body":"<p>What you are trying to do is not unit testing.</p>\n<p>Unit tests are when you mock your entire environment and call the method you are testing directly:</p>\n<pre><code>@InjectMocks\nListener listener;\n\n@Mock\nHandler handler;\n\n@Test\nvoid givenSomething() {\n    var id = UUID.randomUUID();\n    listener.listen(id);\n    verify(handler).handle(id);\n}\n</code></pre>\n<p>If you want to test the listener with a real kafka broker, these are integration tests and you need to prepare a test environment for this.</p>\n<p>To do this, you can use a testcontainers or a separate docker-compose file that will run before your tests so that the real environment does not mix with the test one.</p>\n<p><a href=\"https://testcontainers.com/\" rel=\"nofollow noreferrer\">testcontainers</a></p>\n<p><a href=\"https://docs.docker.com/compose/\" rel=\"nofollow noreferrer\">docker-compose</a></p>\n<p>Additionally, there is also a spring-kafka-test library that allows you to write integration tests with kafka that resides in the application's memory.</p>\n<p><a href=\"https://mvnrepository.com/artifact/org.springframework.kafka/spring-kafka-test\" rel=\"nofollow noreferrer\">https://mvnrepository.com/artifact/org.springframework.kafka/spring-kafka-test</a></p>\n<pre class=\"lang-yaml prettyprint-override\"><code>spring:\n  kafka:\n    consumer:\n      auto-offset-reset: earliest\n      group-id: groupName\ntest:\n  topic: test-topic\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>@SpringBootTest\n@DirtiesContext\n@EmbeddedKafka(partitions = 1, brokerProperties = { &quot;listeners=PLAINTEXT://localhost:9092&quot;, &quot;port=9092&quot; })\nclass EmbeddedKafkaIntegrationTest {\n\n    @Autowired\n    private KafkaConsumer consumer;\n\n    @Autowired\n    private KafkaProducer producer;\n\n    @Value(&quot;${test.topic}&quot;)\n    private String topic;\n\n    @Test\n    public void givenEmbeddedKafkaBroker_whenSendingWithSimpleProducer_thenMessageReceived() \n      throws Exception {\n        String data = &quot;Sending with our own simple KafkaProducer&quot;;\n        \n        producer.send(topic, data);\n        \n        boolean messageConsumed = consumer.getLatch().await(10, TimeUnit.SECONDS);\n        assertTrue(messageConsumed);\n        assertThat(consumer.getPayload(), containsString(data));\n    }\n}\n\n</code></pre>\n<p>You can see more details here: <a href=\"https://www.baeldung.com/spring-boot-kafka-testing\" rel=\"nofollow noreferrer\">https://www.baeldung.com/spring-boot-kafka-testing</a></p>\n"}],"owner":{"account_id":18045956,"reputation":41,"user_id":13116949,"display_name":"Kstackr"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":112,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":1,"score":0,"last_activity_date":1692280132,"creation_date":1692257543,"question_id":76919337,"body_markdown":"I have the following method to consume data from a Kafka topic. \r\n\r\n\r\n```\r\n    @KafkaListener(\r\n            groupId = &quot;&lt;group-id&gt;&quot;,\r\n            topics = &quot;&lt;topic&gt;&quot;,\r\n            concurrency = &quot;&lt;concurrency&gt;&quot;,\r\n    )\r\n    public void listen(\r\n            Acknowledgment ack,\r\n            @Payload final ConsumerRecord&lt;String, GenericRecord&gt; consumerRecord,\r\n            @Header(KafkaHeaders.RECEIVED_PARTITION) int partition,\r\n            @Header(KafkaHeaders.OFFSET) String offset,\r\n            @Header(name = KafkaHeaders.RECEIVED_KEY, required = false) String key,\r\n            @Header(KafkaHeaders.RECEIVED_TOPIC) String topic\r\n    ) throws IOException {\r\n\r\n\t\t// Consumes the data with consumerRecord and doing the rest of the stuff\r\n\r\n        ack.acknowledge();\r\n    }\r\n```\r\nI need to write a unit test for this. What I am trying to do is publish some data to a test topic and test if it is consumed by this listener. How can I do it?\r\n\r\nTrying to find a solution on this.","title":"KafkaListner Unit Tests","body":"<p>I have the following method to consume data from a Kafka topic.</p>\n<pre><code>    @KafkaListener(\n            groupId = &quot;&lt;group-id&gt;&quot;,\n            topics = &quot;&lt;topic&gt;&quot;,\n            concurrency = &quot;&lt;concurrency&gt;&quot;,\n    )\n    public void listen(\n            Acknowledgment ack,\n            @Payload final ConsumerRecord&lt;String, GenericRecord&gt; consumerRecord,\n            @Header(KafkaHeaders.RECEIVED_PARTITION) int partition,\n            @Header(KafkaHeaders.OFFSET) String offset,\n            @Header(name = KafkaHeaders.RECEIVED_KEY, required = false) String key,\n            @Header(KafkaHeaders.RECEIVED_TOPIC) String topic\n    ) throws IOException {\n\n        // Consumes the data with consumerRecord and doing the rest of the stuff\n\n        ack.acknowledge();\n    }\n</code></pre>\n<p>I need to write a unit test for this. What I am trying to do is publish some data to a test topic and test if it is consumed by this listener. How can I do it?</p>\n<p>Trying to find a solution on this.</p>\n"},{"tags":["java","hibernate","quarkus","reactive","quarkus-panache"],"comments":[{"owner":{"account_id":7614789,"reputation":175,"user_id":5774614,"display_name":"Amine ABBAOUI"},"score":0,"creation_date":1692280355,"post_id":76922135,"comment_id":135604051,"body_markdown":"Where is your SessionFactory bean configuration ?","body":"Where is your SessionFactory bean configuration ?"},{"owner":{"account_id":23166977,"reputation":61,"user_id":17266758,"display_name":"Plus Ultra"},"score":0,"creation_date":1692280564,"post_id":76922135,"comment_id":135604104,"body_markdown":"I don&#39;t have that defined, I&#39;m new to the framework with limited knowledge of how it works..Kindly assist thanks","body":"I don&#39;t have that defined, I&#39;m new to the framework with limited knowledge of how it works..Kindly assist thanks"},{"owner":{"account_id":7614789,"reputation":175,"user_id":5774614,"display_name":"Amine ABBAOUI"},"score":0,"creation_date":1692280877,"post_id":76922135,"comment_id":135604174,"body_markdown":"you should have an configuration (xml or java based) to define the beans, do you have any xml or java configuration ?","body":"you should have an configuration (xml or java based) to define the beans, do you have any xml or java configuration ?"},{"owner":{"account_id":23166977,"reputation":61,"user_id":17266758,"display_name":"Plus Ultra"},"score":0,"creation_date":1692281188,"post_id":76922135,"comment_id":135604265,"body_markdown":"No I don&#39;t have any configuration, can you share a link to any resource with such configuration so that I can see how it works?","body":"No I don&#39;t have any configuration, can you share a link to any resource with such configuration so that I can see how it works?"},{"owner":{"account_id":7614789,"reputation":175,"user_id":5774614,"display_name":"Amine ABBAOUI"},"score":0,"creation_date":1692281364,"post_id":76922135,"comment_id":135604300,"body_markdown":"you can check this link : https://www.javatpoint.com/hibernate-configuration","body":"you can check this link : <a href=\"https://www.javatpoint.com/hibernate-configuration\" rel=\"nofollow noreferrer\">javatpoint.com/hibernate-configuration</a>"},{"owner":{"account_id":23166977,"reputation":61,"user_id":17266758,"display_name":"Plus Ultra"},"score":0,"creation_date":1692282228,"post_id":76922135,"comment_id":135604503,"body_markdown":"I used the properties file configuration and it didn&#39;t work. I think it&#39;s important to note that it is Hibernate reactive, not sure if it makes use of JDBC. However I have some hibernate configurations on my application.properties file\n\n# Hibernate Reactive configuration\nquarkus.hibernate-orm.log.sql=true\nquarkus.hibernate-orm.datasource=default-reactive","body":"I used the properties file configuration and it didn&#39;t work. I think it&#39;s important to note that it is Hibernate reactive, not sure if it makes use of JDBC. However I have some hibernate configurations on my application.properties file  # Hibernate Reactive configuration quarkus.hibernate-orm.log.sql=true quarkus.hibernate-orm.datasource=default-reactive"},{"owner":{"account_id":7614789,"reputation":175,"user_id":5774614,"display_name":"Amine ABBAOUI"},"score":0,"creation_date":1692282551,"post_id":76922135,"comment_id":135604604,"body_markdown":"Hibernate Reactive configuration might be similar to traditional Hibernate configuration, the error that you get indicate that there is no SessionFactory bean, so you need to add it, and this bean need configuration that can be different for Hibernate reactive by adding some additional properties, you can check also this link : https://thorben-janssen.com/hibernate-reactive-getting-started-guide/","body":"Hibernate Reactive configuration might be similar to traditional Hibernate configuration, the error that you get indicate that there is no SessionFactory bean, so you need to add it, and this bean need configuration that can be different for Hibernate reactive by adding some additional properties, you can check also this link : <a href=\"https://thorben-janssen.com/hibernate-reactive-getting-started-guide/\" rel=\"nofollow noreferrer\">thorben-janssen.com/hibernate-reactive-getting-started-guide</a>"}],"owner":{"account_id":23166977,"reputation":61,"user_id":17266758,"display_name":"Plus Ultra"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":224,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1692280021,"creation_date":1692280021,"question_id":76922135,"body_markdown":"I&#39;m Trying to create a CRUD implementation using hibernate reactive with Panache when I run the add method I get the error\r\n\r\n&gt; java.lang.IllegalStateException: Mutiny.SessionFactory bean not found.\r\n\r\nBellow is my code:\r\n\r\nDtoItem\r\n\r\n```\r\n@Entity\r\n@AllArgsConstructor\r\n@RequiredArgsConstructor\r\npublic class DtoItem {\r\n\r\n    @Id\r\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n    public Long id;\r\n    public String name;\r\n    public String description;\r\n}\r\n```\r\nDaoItem:\r\n\r\n```\r\n@ApplicationScoped\r\npublic class DaoItem implements PanacheRepository&lt;DtoItem&gt; {\r\n\r\n}\r\n```\r\n\r\nDalItem:\r\n\r\n```\r\n@ApplicationScoped\r\npublic class DalItem {\r\n\r\n    @Inject\r\n    DaoItem daoItem;\r\n\r\n    public Uni&lt;DtoItem&gt; save(DtoItem item) {\r\n        return daoItem.persist(item);\r\n    }\r\n\r\n    public Uni&lt;DtoItem&gt; find(Long id) {\r\n        return daoItem.findById(id);\r\n    }\r\n\r\n    public Uni&lt;List&lt;DtoItem&gt;&gt; findAll(){\r\n        return daoItem.listAll();\r\n    }\r\n}\r\n```\r\n\r\nItemResource:\r\n\r\n```\r\n@RouteBase(path = &quot;/v1/items&quot;, produces = ReactiveRoutes.APPLICATION_JSON, consumes = ReactiveRoutes.APPLICATION_JSON)\r\npublic class ItemResource {\r\n\r\n    @Inject\r\n    private DalItem dalItem;\r\n\r\n\r\n    @Route(path = &quot;/:id&quot;, methods = Route.HttpMethod.GET)\r\n    public Uni&lt;JsonObject&gt; getSingleItem(RoutingExchange routingExchange) {\r\n        String id = routingExchange.getParam(&quot;id&quot;).orElse(&quot;0&quot;);\r\n        return dalItem.find(Long.parseLong(id))\r\n                .flatMap(item -&gt; Uni.createFrom().item(JsonObject.mapFrom(item)));\r\n    }\r\n\r\n    @WithTransaction\r\n    @Route(methods = Route.HttpMethod.POST)\r\n    public Uni&lt;JsonObject&gt; add(@Body DtoItem item) {\r\n        return dalItem.save(item).flatMap(itm -&gt; Uni.createFrom().item(JsonObject.mapFrom(itm)));\r\n    }\r\n}\r\n```\r\n\r\nwhat am I missing?","title":"java.lang.IllegalStateException: Mutiny.SessionFactory bean not found. Hibernate Reactive with Panache","body":"<p>I'm Trying to create a CRUD implementation using hibernate reactive with Panache when I run the add method I get the error</p>\n<blockquote>\n<p>java.lang.IllegalStateException: Mutiny.SessionFactory bean not found.</p>\n</blockquote>\n<p>Bellow is my code:</p>\n<p>DtoItem</p>\n<pre><code>@Entity\n@AllArgsConstructor\n@RequiredArgsConstructor\npublic class DtoItem {\n\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    public Long id;\n    public String name;\n    public String description;\n}\n</code></pre>\n<p>DaoItem:</p>\n<pre><code>@ApplicationScoped\npublic class DaoItem implements PanacheRepository&lt;DtoItem&gt; {\n\n}\n</code></pre>\n<p>DalItem:</p>\n<pre><code>@ApplicationScoped\npublic class DalItem {\n\n    @Inject\n    DaoItem daoItem;\n\n    public Uni&lt;DtoItem&gt; save(DtoItem item) {\n        return daoItem.persist(item);\n    }\n\n    public Uni&lt;DtoItem&gt; find(Long id) {\n        return daoItem.findById(id);\n    }\n\n    public Uni&lt;List&lt;DtoItem&gt;&gt; findAll(){\n        return daoItem.listAll();\n    }\n}\n</code></pre>\n<p>ItemResource:</p>\n<pre><code>@RouteBase(path = &quot;/v1/items&quot;, produces = ReactiveRoutes.APPLICATION_JSON, consumes = ReactiveRoutes.APPLICATION_JSON)\npublic class ItemResource {\n\n    @Inject\n    private DalItem dalItem;\n\n\n    @Route(path = &quot;/:id&quot;, methods = Route.HttpMethod.GET)\n    public Uni&lt;JsonObject&gt; getSingleItem(RoutingExchange routingExchange) {\n        String id = routingExchange.getParam(&quot;id&quot;).orElse(&quot;0&quot;);\n        return dalItem.find(Long.parseLong(id))\n                .flatMap(item -&gt; Uni.createFrom().item(JsonObject.mapFrom(item)));\n    }\n\n    @WithTransaction\n    @Route(methods = Route.HttpMethod.POST)\n    public Uni&lt;JsonObject&gt; add(@Body DtoItem item) {\n        return dalItem.save(item).flatMap(itm -&gt; Uni.createFrom().item(JsonObject.mapFrom(itm)));\n    }\n}\n</code></pre>\n<p>what am I missing?</p>\n"},{"tags":["java","spring-boot","spring-boot-test","openfeign"],"answers":[{"tags":[],"owner":{"account_id":6502278,"reputation":1449,"user_id":5032575,"display_name":"Ahmed Sayed"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1624018017,"creation_date":1584867606,"answer_id":60797480,"question_id":58539366,"body_markdown":"I know this is an old question, but maybe this answer will be helpful to someone\r\n\r\n\r\n----------\r\n\r\n\r\nAs a workaround, what we can do, is let the host resolving up to Spring Ribbon. You would then configure the host dynamically right before your test starts.\r\n\r\nFirst, add the maven dependency if you don&#39;t have it yet\r\n```xml\r\n&lt;dependency&gt;\r\n   &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\r\n   &lt;artifactId&gt;spring-cloud-starter-netflix-ribbon&lt;/artifactId&gt;\r\n   &lt;scope&gt;test&lt;/scope&gt;\r\n&lt;/dependency&gt;\r\n```\r\nThen configure your test to run with an &#39;empty&#39; configuration url for the host, which is the `myservice.url` property here\r\n```\r\n@SpringBootTest(webEnvironment = RANDOM_PORT, classes = MyApplication.class)\r\n@RunWith(SpringRunner.class)\r\n@EnableFeignClients(clients = MyServiceClient.class)\r\n@TestPropertySource(properties = &quot;myservice.url=&quot;) // this makes sure we do the server lookup with ribbon\r\npublic class MyTest {\r\n   ...\r\n}\r\n```\r\nThen, in a `@Before` method, all we need to do is provide the service url to ribbon, we can do that with a simple `System.setProperty()`\r\n```java\r\npublic class MyTest {\r\n\r\n    @LocalServerPort\r\n    private int port;\r\n\r\n    @Before\r\n    public void setup() {\r\n        System.setProperty(&quot;MyServiceClient.ribbon.listOfServers&quot;, &quot;http://localhost:&quot; + port);\r\n        ...\r\n    }\r\n```","title":"Spring Boot OpenFeign random port test","body":"<p>I know this is an old question, but maybe this answer will be helpful to someone</p>\n<hr />\n<p>As a workaround, what we can do, is let the host resolving up to Spring Ribbon. You would then configure the host dynamically right before your test starts.</p>\n<p>First, add the maven dependency if you don't have it yet</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;dependency&gt;\n   &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\n   &lt;artifactId&gt;spring-cloud-starter-netflix-ribbon&lt;/artifactId&gt;\n   &lt;scope&gt;test&lt;/scope&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>Then configure your test to run with an 'empty' configuration url for the host, which is the <code>myservice.url</code> property here</p>\n<pre><code>@SpringBootTest(webEnvironment = RANDOM_PORT, classes = MyApplication.class)\n@RunWith(SpringRunner.class)\n@EnableFeignClients(clients = MyServiceClient.class)\n@TestPropertySource(properties = &quot;myservice.url=&quot;) // this makes sure we do the server lookup with ribbon\npublic class MyTest {\n   ...\n}\n</code></pre>\n<p>Then, in a <code>@Before</code> method, all we need to do is provide the service url to ribbon, we can do that with a simple <code>System.setProperty()</code></p>\n<pre class=\"lang-java prettyprint-override\"><code>public class MyTest {\n\n    @LocalServerPort\n    private int port;\n\n    @Before\n    public void setup() {\n        System.setProperty(&quot;MyServiceClient.ribbon.listOfServers&quot;, &quot;http://localhost:&quot; + port);\n        ...\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":136251,"reputation":87506,"user_id":339637,"accept_rate":55,"display_name":"Ken Chan"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1692279671,"creation_date":1692279671,"answer_id":76922083,"question_id":58539366,"body_markdown":"Another simpler way is to spy the method that is used to resolve the service &#39;s IP. By default, it will call `CompositeDiscoveryClient#getInstances()` to do that . Together with `@LocalServerPort` to access the web container port , you can do something like :\r\n\r\n``` java\r\n@SpringBootTest(webEnvironment = RANDOM_PORT)\r\npublic class FooTest {\r\n\r\n\r\n    @SpyBean\r\n    private CompositeDiscoveryClient compositeDiscoveryClient;\r\n\r\n    @LocalServerPort\r\n    private int serverPort;\r\n\r\n\r\n    @Test\r\n    void test(){\r\n        //call stubResolveMyService() before you invoke any FeignClient &#39;s method\r\n    }\r\n\r\n\r\n    private void stubResolveMyService(){\r\n        DefaultServiceInstance instance = new DefaultServiceInstance(&quot;some-instance&quot; , &quot;myService&quot;, &quot;127.0.0.1&quot;,serverPort,false);\r\n        when(compositeDiscoveryClient.getInstances(&quot;myService&quot;)).thenReturn(List.of(instance));\r\n    }\r\n\r\n}\r\n\r\n```\r\nIt resolves the IP of the service which the service id `myService` to `127.0.0.1:XXXXX` where `XXXXX` is the random port of the running web container.","title":"Spring Boot OpenFeign random port test","body":"<p>Another simpler way is to spy the method that is used to resolve the service 's IP. By default, it will call <code>CompositeDiscoveryClient#getInstances()</code> to do that . Together with <code>@LocalServerPort</code> to access the web container port , you can do something like :</p>\n<pre class=\"lang-java prettyprint-override\"><code>@SpringBootTest(webEnvironment = RANDOM_PORT)\npublic class FooTest {\n\n\n    @SpyBean\n    private CompositeDiscoveryClient compositeDiscoveryClient;\n\n    @LocalServerPort\n    private int serverPort;\n\n\n    @Test\n    void test(){\n        //call stubResolveMyService() before you invoke any FeignClient 's method\n    }\n\n\n    private void stubResolveMyService(){\n        DefaultServiceInstance instance = new DefaultServiceInstance(&quot;some-instance&quot; , &quot;myService&quot;, &quot;127.0.0.1&quot;,serverPort,false);\n        when(compositeDiscoveryClient.getInstances(&quot;myService&quot;)).thenReturn(List.of(instance));\n    }\n\n}\n\n</code></pre>\n<p>It resolves the IP of the service which the service id <code>myService</code> to <code>127.0.0.1:XXXXX</code> where <code>XXXXX</code> is the random port of the running web container.</p>\n"}],"owner":{"account_id":9714590,"reputation":119,"user_id":7205417,"display_name":"Lukasz G."},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1469,"favorite_count":0,"down_vote_count":0,"up_vote_count":5,"answer_count":2,"score":5,"last_activity_date":1692279671,"creation_date":1571912944,"question_id":58539366,"body_markdown":"I have an OpenFeign client set up like this:\r\n\r\n```\r\n@FeignClient(name = &quot;myService&quot;, qualifier = &quot;myServiceClient&quot;, url = &quot;${myservice.url}&quot;)\r\npublic interface MyServiceClient {\r\n...\r\n}\r\n```\r\n\r\nand a Spring Boot test set up like this:\r\n\r\n```\r\n@SpringBootTest(webEnvironment = RANDOM_PORT, classes = MyApplication.class)\r\n@RunWith(SpringRunner.class)\r\n@EnableFeignClients(clients = MyServiceClient .class)\r\npublic class ReservationSteps {\r\n...\r\n}\r\n```\r\n\r\nThe test is supposed to spin up the application and send a request to it using the Feign client.\r\n\r\nThe problem is the RANDOM_PORT value.\r\n\r\nHow do I declare the &quot;myservice.url&quot; property in the properties file so it includes the correct port?\r\n\r\nI have tried this:\r\n```\r\nmyservice.url=localhost:${local.server.port}\r\n```\r\n\r\nbut it results in &quot;localhost:0&quot;.\r\n\r\nI don&#39;t want to use a constant value for the port.\r\n\r\nPlease help. Thanks!","title":"Spring Boot OpenFeign random port test","body":"<p>I have an OpenFeign client set up like this:</p>\n\n<pre><code>@FeignClient(name = \"myService\", qualifier = \"myServiceClient\", url = \"${myservice.url}\")\npublic interface MyServiceClient {\n...\n}\n</code></pre>\n\n<p>and a Spring Boot test set up like this:</p>\n\n<pre><code>@SpringBootTest(webEnvironment = RANDOM_PORT, classes = MyApplication.class)\n@RunWith(SpringRunner.class)\n@EnableFeignClients(clients = MyServiceClient .class)\npublic class ReservationSteps {\n...\n}\n</code></pre>\n\n<p>The test is supposed to spin up the application and send a request to it using the Feign client.</p>\n\n<p>The problem is the RANDOM_PORT value.</p>\n\n<p>How do I declare the \"myservice.url\" property in the properties file so it includes the correct port?</p>\n\n<p>I have tried this:</p>\n\n<pre><code>myservice.url=localhost:${local.server.port}\n</code></pre>\n\n<p>but it results in \"localhost:0\".</p>\n\n<p>I don't want to use a constant value for the port.</p>\n\n<p>Please help. Thanks!</p>\n"},{"tags":["java","keystore"],"comments":[{"owner":{"account_id":388441,"reputation":2525,"user_id":747392,"accept_rate":86,"display_name":"Shamis Shukoor"},"score":0,"creation_date":1353995918,"post_id":13578134,"comment_id":18607669,"body_markdown":"why dont you read these informations from a property file ?","body":"why dont you read these informations from a property file ?"},{"owner":{"account_id":22194,"reputation":18092,"user_id":54506,"accept_rate":78,"display_name":"Jayan"},"score":0,"creation_date":1353996412,"post_id":13578134,"comment_id":18607798,"body_markdown":"There are more command line options - read http://docs.oracle.com/javase/7/docs/technotes/tools/windows/keytool.html (including distinguished name)","body":"There are more command line options - read <a href=\"http://docs.oracle.com/javase/7/docs/technotes/tools/windows/keytool.html\" rel=\"nofollow noreferrer\">docs.oracle.com/javase/7/docs/technotes/tools/windows/&hellip;</a> (including distinguished name)"},{"owner":{"account_id":891679,"reputation":2286,"user_id":929796,"accept_rate":95,"display_name":"Trevor North"},"score":7,"creation_date":1422817154,"post_id":13578134,"comment_id":44889415,"body_markdown":"Just because the example used a local address, doesnt mean this issue is localised.  I am un UK and just had the same question.  Fortunately, because some answered the question before it was closed, it just saved me a load of time trying to work out the answer.","body":"Just because the example used a local address, doesnt mean this issue is localised.  I am un UK and just had the same question.  Fortunately, because some answered the question before it was closed, it just saved me a load of time trying to work out the answer."},{"owner":{"account_id":1611562,"reputation":11552,"user_id":1490322,"accept_rate":71,"display_name":"Jose Martinez"},"score":7,"creation_date":1425309712,"post_id":13578134,"comment_id":45898413,"body_markdown":"This question was very useful and the answer helped out.  Don&#39;t understand why it was closed.","body":"This question was very useful and the answer helped out.  Don&#39;t understand why it was closed."},{"owner":{"account_id":2256668,"reputation":590,"user_id":1987724,"accept_rate":63,"display_name":"Fam"},"score":2,"creation_date":1439581382,"post_id":13578134,"comment_id":51937559,"body_markdown":"Yet another example of trigger happy SO moderators ready to jump the gun at a moment&#39;s notice on closing actual, relevant, and useful questions so they can exercise the small amount of power they have to make themselves feel important. This was the first result when I searched this question on Google and it helped me solve my issue, unbelievable that it was closed simply because it referenced the asker&#39;s locale in the question.","body":"Yet another example of trigger happy SO moderators ready to jump the gun at a moment&#39;s notice on closing actual, relevant, and useful questions so they can exercise the small amount of power they have to make themselves feel important. This was the first result when I searched this question on Google and it helped me solve my issue, unbelievable that it was closed simply because it referenced the asker&#39;s locale in the question."}],"answers":[{"tags":[],"owner":{"account_id":22194,"reputation":18092,"user_id":54506,"accept_rate":78,"display_name":"Jayan"},"down_vote_count":1,"up_vote_count":7,"is_accepted":false,"score":6,"last_activity_date":1450172328,"creation_date":1353996641,"answer_id":13578344,"question_id":13578134,"body_markdown":"See the [full documentation about command line ][1]  or by typing `keytool` without any arguments.\r\n\r\nSpecifically you may want to look options `-storepass password -keypass password` \r\n\r\n\r\n  [1]: http://docs.oracle.com/javase/7/docs/technotes/tools/windows/keytool.html","title":"How to automate Keystore generation using the java keystore tool? w/o user interaction","body":"<p>See the <a href=\"http://docs.oracle.com/javase/7/docs/technotes/tools/windows/keytool.html\" rel=\"nofollow\">full documentation about command line </a>  or by typing <code>keytool</code> without any arguments.</p>\n\n<p>Specifically you may want to look options <code>-storepass password -keypass password</code> </p>\n"},{"tags":[],"owner":{"account_id":2052678,"reputation":134073,"user_id":1831293,"accept_rate":91,"display_name":"Evgeniy Dorofeev"},"down_vote_count":0,"up_vote_count":196,"is_accepted":true,"score":196,"last_activity_date":1692278760,"creation_date":1353997352,"answer_id":13578480,"question_id":13578134,"body_markdown":"Try this:\r\n\r\n    keytool -genkey -noprompt \\\r\n     -alias alias1 \\\r\n     -dname &quot;CN=mqttserver.ibm.com, OU=ID, O=IBM, L=Hursley, S=Hants, C=GB&quot; \\\r\n     -keystore keystore \\\r\n     -storepass password \\\r\n     -keypass password \\\r\n     -keyalg RSA","title":"How to automate Keystore generation using the java keystore tool? w/o user interaction","body":"<p>Try this:</p>\n<pre><code>keytool -genkey -noprompt \\\n -alias alias1 \\\n -dname &quot;CN=mqttserver.ibm.com, OU=ID, O=IBM, L=Hursley, S=Hants, C=GB&quot; \\\n -keystore keystore \\\n -storepass password \\\n -keypass password \\\n -keyalg RSA\n</code></pre>\n"},{"tags":[],"owner":{"account_id":7198483,"reputation":721,"user_id":5496419,"display_name":"star"},"down_vote_count":0,"up_vote_count":18,"is_accepted":false,"score":18,"last_activity_date":1472518493,"creation_date":1472518493,"answer_id":39217303,"question_id":13578134,"body_markdown":"don&#39;t forget -noprompt, otherwise you will be asked to input Yes or No\r\n","title":"How to automate Keystore generation using the java keystore tool? w/o user interaction","body":"<p>don't forget -noprompt, otherwise you will be asked to input Yes or No</p>\n"}],"owner":{"account_id":2061440,"reputation":2775,"user_id":1837873,"display_name":"r3ap3r"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":47643,"favorite_count":0,"down_vote_count":1,"up_vote_count":113,"accepted_answer_id":13578480,"answer_count":3,"score":112,"last_activity_date":1692278760,"creation_date":1353995505,"question_id":13578134,"body_markdown":"I am trying to automate keystore generation using the Java keystore tool. The command I am using is :\r\n\r\n    keytool -keystore keystore -alias jetty -genkey -keyalg RSA\r\n\r\nBut after this command, user is required to enter certain inputs as follows:\r\n\r\n    Enter keystore password:  password\r\n    What is your first and last name?  \r\n    [Unknown]:  jetty.mortbay.org  \r\n    What is the name of your organizational unit?  \r\n    [Unknown]:  Jetty  \r\n    What is the name of your organization?  \r\n    [Unknown]:  Mort Bay Consulting Pty. Ltd.  \r\n    What is the name of your City or Locality?  \r\n    [Unknown]:  \r\n    What is the name of your State or Province?  \r\n    [Unknown]:  \r\n    What is the two-letter country code for this unit?  \r\n    [Unknown]:  \r\n    Is CN=jetty.mortbay.org, OU=Jetty, O=Mort Bay Consulting Pty. Ltd.,  \r\n    L=Unknown, ST=Unknown, C=Unknown correct?  \r\n    [no]:  yes  \r\n\r\n    Enter key password for &lt;jetty&gt;  \r\n    (RETURN if same as keystore password):  password  \r\n\r\nInstead of the user entering these values , is there any way of providing these values without user interaction ,either within the command or through a script?\r\n\r\nThanks\r\n","title":"How to automate Keystore generation using the java keystore tool? w/o user interaction","body":"<p>I am trying to automate keystore generation using the Java keystore tool. The command I am using is :</p>\n\n<pre><code>keytool -keystore keystore -alias jetty -genkey -keyalg RSA\n</code></pre>\n\n<p>But after this command, user is required to enter certain inputs as follows:</p>\n\n<pre><code>Enter keystore password:  password\nWhat is your first and last name?  \n[Unknown]:  jetty.mortbay.org  \nWhat is the name of your organizational unit?  \n[Unknown]:  Jetty  \nWhat is the name of your organization?  \n[Unknown]:  Mort Bay Consulting Pty. Ltd.  \nWhat is the name of your City or Locality?  \n[Unknown]:  \nWhat is the name of your State or Province?  \n[Unknown]:  \nWhat is the two-letter country code for this unit?  \n[Unknown]:  \nIs CN=jetty.mortbay.org, OU=Jetty, O=Mort Bay Consulting Pty. Ltd.,  \nL=Unknown, ST=Unknown, C=Unknown correct?  \n[no]:  yes  \n\nEnter key password for &lt;jetty&gt;  \n(RETURN if same as keystore password):  password  \n</code></pre>\n\n<p>Instead of the user entering these values , is there any way of providing these values without user interaction ,either within the command or through a script?</p>\n\n<p>Thanks</p>\n"},{"tags":["java","android","fast-android-networking"],"answers":[{"tags":[],"owner":{"account_id":238127,"reputation":86162,"user_id":506796,"accept_rate":83,"display_name":"Tenfour04"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1692278170,"creation_date":1692278170,"answer_id":76921894,"question_id":76921456,"body_markdown":"That&#39;s not an *error*--it&#39;s a *warning* that appears if your RecyclerView doesn&#39;t have an adapter set on it yet by the time it is drawn. In your case that&#39;s because you only create and attach the adapter after your data is available from the network. It&#39;s not really a problem, but it might be considered cleaner to create and attach your adapter with empty data in your `init()` method, and update the adapter&#39;s data in your networking callback.","title":"Error says. No adapter attached; skipping layout","body":"<p>That's not an <em>error</em>--it's a <em>warning</em> that appears if your RecyclerView doesn't have an adapter set on it yet by the time it is drawn. In your case that's because you only create and attach the adapter after your data is available from the network. It's not really a problem, but it might be considered cleaner to create and attach your adapter with empty data in your <code>init()</code> method, and update the adapter's data in your networking callback.</p>\n"}],"owner":{"account_id":18713254,"reputation":1,"user_id":13642897,"display_name":"said hamisi"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":29,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1692278170,"creation_date":1692274666,"question_id":76921456,"body_markdown":"I am trying to fetch data from database to my recyclerview but error keeps on showing no adapter attached. Below is my code for recyclerview.\r\n\r\nXML code with my recycler view\r\n```\r\n&lt;androidx.recyclerview.widget.RecyclerView\r\n        android:id=&quot;@+id/recycler_comments&quot;\r\n        android:layout_width=&quot;match_parent&quot;\r\n        android:layout_height=&quot;match_parent&quot;\r\n        android:layout_marginTop=&quot;?attr/actionBarSize&quot;\r\n        android:layout_marginBottom=&quot;?attr/actionBarSize&quot;/&gt;\r\n```\r\n\r\nMy Adapter class is below\r\n\r\n```\r\npublic class CommentAdapter extends RecyclerView.Adapter&lt;CommentAdapter.CommentsHolder&gt;{\r\n    private Context context;\r\n    private ArrayList&lt;Comment&gt; list;\r\n\r\n    public CommentAdapter(Context context, ArrayList&lt;Comment&gt; list) {\r\n        this.context = context;\r\n        this.list = list;\r\n    }\r\n\r\n    @NonNull\r\n    @Override\r\n    public CommentsHolder onCreateViewHolder(@NonNull ViewGroup parent, int viewType) {\r\n        View v = LayoutInflater.from(parent.getContext()).inflate(R.layout.layout_comment, parent, false);\r\n        return new CommentsHolder(v);\r\n    }\r\n\r\n    @Override\r\n    public void onBindViewHolder(@NonNull CommentsHolder holder, int position) {\r\n        Comment comment = list.get(position);\r\n        Picasso.get().load(comment.getUser().getProfile_image_url()).into(holder.circleImageProfileComment);\r\n        holder.nameComment.setText(comment.getUser().getName());\r\n        holder.dateComment.setText(comment.getDate());\r\n        holder.comment.setText(comment.getComment());\r\n    }\r\n\r\n    @Override\r\n    public int getItemCount() {\r\n        return list.size();\r\n    }\r\n\r\n    class CommentsHolder extends RecyclerView.ViewHolder{\r\n\r\n        private CircleImageView circleImageProfileComment;\r\n        private TextView nameComment, dateComment, comment;\r\n        private ImageButton imgBtnComment;\r\n\r\n        public CommentsHolder(@NonNull View itemView) {\r\n            super(itemView);\r\n\r\n            circleImageProfileComment = itemView.findViewById(R.id.imgCommentProfile);\r\n            nameComment = itemView.findViewById(R.id.commentName);\r\n            dateComment = itemView.findViewById(R.id.commentDate);\r\n            comment = itemView.findViewById(R.id.txtAllComments);\r\n            imgBtnComment = itemView.findViewById(R.id.btnCommentOption);\r\n        }\r\n    }\r\n}\r\n\r\n```\r\n\r\nMy activity class where i want to display the data code is below\r\n\r\n```\r\npublic class CommentActivity extends AppCompatActivity {\r\n\r\n    private RecyclerView recyclerViewC;\r\n    private ArrayList&lt;Comment&gt; list;\r\n    private CommentAdapter adapter;\r\n    private SharedPreferences sharedPreferences;\r\n    private int postId = 0;\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_comment);\r\n\r\n        init();\r\n\r\n    }\r\n\r\n    private void init() {\r\n        sharedPreferences = getApplication().getSharedPreferences(&quot;user&quot;, Context.MODE_PRIVATE);\r\n\r\n        recyclerViewC = findViewById(R.id.recycler_comments);\r\n        recyclerViewC.setHasFixedSize(true);\r\n        recyclerViewC.setLayoutManager(new LinearLayoutManager(this));\r\n        postId = getIntent().getIntExtra(&quot;postId&quot;, 0);\r\n\r\n        getComments();\r\n    }\r\n\r\n    private void getComments() {\r\n        list = new ArrayList&lt;&gt;();\r\n\r\n        String token = sharedPreferences.getString(&quot;token&quot;, &quot;&quot;);\r\n\r\n        AndroidNetworking.post(Constant.COMMENTS)\r\n                .addHeaders(&quot;Authorization&quot;, &quot;Bearer &quot;+token)\r\n                .addBodyParameter(&quot;postId&quot;, postId+&quot;&quot;)\r\n                .setPriority(Priority.MEDIUM)\r\n                .build()\r\n                .getAsString(new StringRequestListener() {\r\n                    @Override\r\n                    public void onResponse(String response) {\r\n                        try {\r\n                            JSONObject object = new JSONObject(response);\r\n                            if (object.getBoolean(&quot;success&quot;)) {\r\n                                JSONArray comments = new JSONArray(object.getString(&quot;comments&quot;));\r\n                                for (int i = 0; i &lt; comments.length(); i++) {\r\n                                    JSONObject comment = comments.getJSONObject(i);\r\n                                    JSONObject user = comment.getJSONObject(&quot;user&quot;);\r\n\r\n                                    User mUser = new User();\r\n                                    mUser.setId(user.getInt(&quot;id&quot;));\r\n                                    mUser.setProfile_image_url(user.getString(&quot;profile_image_url&quot;));\r\n                                    mUser.setName(user.getString(&quot;name&quot;));\r\n\r\n                                    Comment mComment = new Comment();\r\n                                    mComment.setId(comment.getInt(&quot;id&quot;));\r\n                                    mComment.setUser(mUser);\r\n\r\n                                    String dateTime = comment.getString(&quot;created_at&quot;);\r\n                                    mComment.setDate(dateTime.substring(0,10)+&quot;&quot;+dateTime.substring(11,16));\r\n\r\n                                    mComment.setComment(comment.getString(&quot;comment&quot;));\r\n                                    list.add(mComment);\r\n                                }\r\n                            }\r\n                            adapter = new CommentAdapter(getApplicationContext(), list);\r\n                            recyclerViewC.setAdapter(adapter);\r\n                        } catch (JSONException e) {\r\n                            e.printStackTrace();\r\n                        }\r\n                    }\r\n\r\n                    @Override\r\n                    public void onError(ANError anError) {\r\n\r\n                    }\r\n                });\r\n    }\r\n}\r\n```\r\n\r\n\r\n\r\n\r\nI tried to check the adapter class if it was there of which is true. It took alot of hours to debug and changing the code without success","title":"Error says. No adapter attached; skipping layout","body":"<p>I am trying to fetch data from database to my recyclerview but error keeps on showing no adapter attached. Below is my code for recyclerview.</p>\n<p>XML code with my recycler view</p>\n<pre><code>&lt;androidx.recyclerview.widget.RecyclerView\n        android:id=&quot;@+id/recycler_comments&quot;\n        android:layout_width=&quot;match_parent&quot;\n        android:layout_height=&quot;match_parent&quot;\n        android:layout_marginTop=&quot;?attr/actionBarSize&quot;\n        android:layout_marginBottom=&quot;?attr/actionBarSize&quot;/&gt;\n</code></pre>\n<p>My Adapter class is below</p>\n<pre><code>public class CommentAdapter extends RecyclerView.Adapter&lt;CommentAdapter.CommentsHolder&gt;{\n    private Context context;\n    private ArrayList&lt;Comment&gt; list;\n\n    public CommentAdapter(Context context, ArrayList&lt;Comment&gt; list) {\n        this.context = context;\n        this.list = list;\n    }\n\n    @NonNull\n    @Override\n    public CommentsHolder onCreateViewHolder(@NonNull ViewGroup parent, int viewType) {\n        View v = LayoutInflater.from(parent.getContext()).inflate(R.layout.layout_comment, parent, false);\n        return new CommentsHolder(v);\n    }\n\n    @Override\n    public void onBindViewHolder(@NonNull CommentsHolder holder, int position) {\n        Comment comment = list.get(position);\n        Picasso.get().load(comment.getUser().getProfile_image_url()).into(holder.circleImageProfileComment);\n        holder.nameComment.setText(comment.getUser().getName());\n        holder.dateComment.setText(comment.getDate());\n        holder.comment.setText(comment.getComment());\n    }\n\n    @Override\n    public int getItemCount() {\n        return list.size();\n    }\n\n    class CommentsHolder extends RecyclerView.ViewHolder{\n\n        private CircleImageView circleImageProfileComment;\n        private TextView nameComment, dateComment, comment;\n        private ImageButton imgBtnComment;\n\n        public CommentsHolder(@NonNull View itemView) {\n            super(itemView);\n\n            circleImageProfileComment = itemView.findViewById(R.id.imgCommentProfile);\n            nameComment = itemView.findViewById(R.id.commentName);\n            dateComment = itemView.findViewById(R.id.commentDate);\n            comment = itemView.findViewById(R.id.txtAllComments);\n            imgBtnComment = itemView.findViewById(R.id.btnCommentOption);\n        }\n    }\n}\n\n</code></pre>\n<p>My activity class where i want to display the data code is below</p>\n<pre><code>public class CommentActivity extends AppCompatActivity {\n\n    private RecyclerView recyclerViewC;\n    private ArrayList&lt;Comment&gt; list;\n    private CommentAdapter adapter;\n    private SharedPreferences sharedPreferences;\n    private int postId = 0;\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_comment);\n\n        init();\n\n    }\n\n    private void init() {\n        sharedPreferences = getApplication().getSharedPreferences(&quot;user&quot;, Context.MODE_PRIVATE);\n\n        recyclerViewC = findViewById(R.id.recycler_comments);\n        recyclerViewC.setHasFixedSize(true);\n        recyclerViewC.setLayoutManager(new LinearLayoutManager(this));\n        postId = getIntent().getIntExtra(&quot;postId&quot;, 0);\n\n        getComments();\n    }\n\n    private void getComments() {\n        list = new ArrayList&lt;&gt;();\n\n        String token = sharedPreferences.getString(&quot;token&quot;, &quot;&quot;);\n\n        AndroidNetworking.post(Constant.COMMENTS)\n                .addHeaders(&quot;Authorization&quot;, &quot;Bearer &quot;+token)\n                .addBodyParameter(&quot;postId&quot;, postId+&quot;&quot;)\n                .setPriority(Priority.MEDIUM)\n                .build()\n                .getAsString(new StringRequestListener() {\n                    @Override\n                    public void onResponse(String response) {\n                        try {\n                            JSONObject object = new JSONObject(response);\n                            if (object.getBoolean(&quot;success&quot;)) {\n                                JSONArray comments = new JSONArray(object.getString(&quot;comments&quot;));\n                                for (int i = 0; i &lt; comments.length(); i++) {\n                                    JSONObject comment = comments.getJSONObject(i);\n                                    JSONObject user = comment.getJSONObject(&quot;user&quot;);\n\n                                    User mUser = new User();\n                                    mUser.setId(user.getInt(&quot;id&quot;));\n                                    mUser.setProfile_image_url(user.getString(&quot;profile_image_url&quot;));\n                                    mUser.setName(user.getString(&quot;name&quot;));\n\n                                    Comment mComment = new Comment();\n                                    mComment.setId(comment.getInt(&quot;id&quot;));\n                                    mComment.setUser(mUser);\n\n                                    String dateTime = comment.getString(&quot;created_at&quot;);\n                                    mComment.setDate(dateTime.substring(0,10)+&quot;&quot;+dateTime.substring(11,16));\n\n                                    mComment.setComment(comment.getString(&quot;comment&quot;));\n                                    list.add(mComment);\n                                }\n                            }\n                            adapter = new CommentAdapter(getApplicationContext(), list);\n                            recyclerViewC.setAdapter(adapter);\n                        } catch (JSONException e) {\n                            e.printStackTrace();\n                        }\n                    }\n\n                    @Override\n                    public void onError(ANError anError) {\n\n                    }\n                });\n    }\n}\n</code></pre>\n<p>I tried to check the adapter class if it was there of which is true. It took alot of hours to debug and changing the code without success</p>\n"},{"tags":["java","oracle","jdbc","callable-statement"],"comments":[{"owner":{"account_id":6389739,"reputation":2892,"user_id":4956336,"display_name":"p3consulting"},"score":0,"creation_date":1692282553,"post_id":76921889,"comment_id":135604606,"body_markdown":"Should be a SCHEMA-level object (CREATE TYPE ... AS OBJECT), not any PL/SQL data type (RECORD, etc.)","body":"Should be a SCHEMA-level object (CREATE TYPE ... AS OBJECT), not any PL/SQL data type (RECORD, etc.)"},{"owner":{"account_id":26978029,"reputation":6997,"user_id":20542862,"display_name":"Paul W"},"score":0,"creation_date":1692283451,"post_id":76921889,"comment_id":135604799,"body_markdown":"Package-defined types should work just fine in PL/SQL like this. Just ensure you have exec privs on the package. To actually populate it, you need to use the type name as a constructor: ` p_my_rec := schema2.my_package.my_rec_type(:field1,:field2,:field3);`","body":"Package-defined types should work just fine in PL/SQL like this. Just ensure you have exec privs on the package. To actually populate it, you need to use the type name as a constructor: ` p_my_rec := schema2.my_package.my_rec_type(:field1,:field2,:field3);`"},{"owner":{"account_id":26978029,"reputation":6997,"user_id":20542862,"display_name":"Paul W"},"score":0,"creation_date":1692283740,"post_id":76921889,"comment_id":135604886,"body_markdown":"As for the %ROWTYPE parameters, I think you have the right idea: structure using a wrapping PL/SQL block which assigns the elements of the record individually, just like you&#39;re doing. %ROWTYPE is really intended for intra-PL/SQL easy of typing and internal passing of records, not interaction with clients outside the database.","body":"As for the %ROWTYPE parameters, I think you have the right idea: structure using a wrapping PL/SQL block which assigns the elements of the record individually, just like you&#39;re doing. %ROWTYPE is really intended for intra-PL/SQL easy of typing and internal passing of records, not interaction with clients outside the database."},{"owner":{"account_id":26978029,"reputation":6997,"user_id":20542862,"display_name":"Paul W"},"score":0,"creation_date":1692283963,"post_id":76921889,"comment_id":135604943,"body_markdown":"If you need to destructure for OUT, then simply refer to the elements by name: `:field1 := p_my_rec.field1;  :field2 := p_my_rec.field2`, and the same for the ROWTYPE records.","body":"If you need to destructure for OUT, then simply refer to the elements by name: <code>:field1 := p_my_rec.field1;  :field2 := p_my_rec.field2</code>, and the same for the ROWTYPE records."}],"owner":{"account_id":29243988,"reputation":1,"user_id":22404825,"display_name":"JavaUser1923912"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":62,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1692278144,"creation_date":1692278144,"question_id":76921889,"body_markdown":"PROCEDURE has 2 OUT parameters, that CallableStatement wants registered.\r\nOne is of RECORD TYPE, this is the OUT value that actually interests me.\r\n\r\n```\r\ncreate PACKAGE         my_package IS\r\n\r\n  TYPE my_rec_type IS RECORD\r\n  ( field1                                 VARCHAR2(40 CHAR)  DEFAULT &#39;0&#39;\r\n  , field2                                 VARCHAR2(240 CHAR)\r\n  , field3                                 VARCHAR2(1 CHAR)  DEFAULT &#39;1&#39;\r\n    );\r\nEND my_package;\r\n```\r\nThe other one is of %ROWTYPE.\r\n\r\nThe procedure itself looks like this:\r\n\r\n```\r\nPROCEDURE myProcedure(p_my_tbl1_rec          IN     schema2.my_table1%ROWTYPE\r\n                    , p_my_tbl2_rec          IN     schema2.my_table2%ROWTYPE\r\n               \r\n                    , p_to_my_table1_rec     OUT    schema2.my_table1%ROWTYPE\r\n                    , p_my_rec               OUT    schema2.my_package.my_rec_type)\r\n  BEGIN \r\n      ...\r\n  END myProcedure;\r\n```\r\n\r\n\r\n\r\n\r\nIs used a workaround to map my Java objects to %ROWTYPE inputs that the Oracle procedure can use.\r\n\r\n```\r\nConnection con = dataSource.getConnection();\r\n\r\n        String sql = &quot;&quot;&quot;\r\n                declare p_my_tbl1_rec      schema2.my_table1%ROWTYPE; \r\n                        p_my_tbl2_rec      schema2.my_table2%ROWTYPE;\r\n                        \r\n                        p_to_my_table1_rec schema2.my_table1%ROWTYPE;\r\n                        p_my_rec           schema2.my_package.my_rec_type;\r\n                        \r\n                begin \r\n                    p_my_tbl1_rec.TABLE_FIELD1                  :=  :table1TableField1;\r\n                    p_my_tbl1_rec.TABLE_FIELD2                  :=  :table1TableField2;\r\n                    ...\r\n                    p_my_tbl2_rec.TABLE_FIELD1                  :=  :table2TableField1; \r\n                    p_my_tbl2_rec.TABLE_FIELD2                  :=  :table2TableField2;\r\n                    ...\r\n                    \r\n                    p_to_my_table1_rec                       :=  ???\r\n                    p_my_rec                                 :=  ???\r\n                    \r\n                    myProcedure( p_my_tbl1_rec         =&gt; p_my_tbl1_rec\r\n                               , p_my_tbl2_rec         =&gt; p_my_tbl2_rec\r\n                        \r\n                               , p_to_my_table1_rec    =&gt; p_to_my_table1_rec\r\n                               , p_my_rec              =&gt; p_my_rec);\r\n                end;\r\n                &quot;&quot;&quot;;\r\n        CallableStatement cs = con.prepareCall(sql);\r\n        // This is how I can map a Java object to %ROWTYPE TYPE\r\n        cs.setLong  (&quot;table1TableField1&quot;, myObject1.getTable1TableField1());\r\n        cs.setString(&quot;table1TableField2&quot;, myObject1.getTable1TableField2());\r\n        ...\r\n        cs.setLong  (&quot;table2TableField1&quot;, myObject2.getTable2TableField1());\r\n        cs.setString(&quot;table2TableField2&quot;, myObject2.getTable2TableField2());\r\n        ...\r\n\r\n        cs.registerOutParameter(&quot;p_to_my_table1_rec&quot;, ???);\r\n        cs.registerOutParameter(&quot;p_my_rec&quot;, ???);\r\n        cs.execute();\r\n```\r\n\r\n**Expectation:**\r\nI call the procedure, I can verify the database, that the procedure has indeed been called. Ideally I can map p_my_rec to a Java object, for future use.\r\n\r\n**Reality:**\r\ni have tried different things. STRUCT seems to be the thing I am loking for, but I do not know how to define it correctly. Sometimes, when I tried calling \r\n```cs.registerOutParameter(&quot;schema2.my_package.my_rec_type&quot;, STRUCT);```\r\nit did not find schema2.my_package.my_rec_type. Could it be, because it is in a PACKAGE?\r\nIf you can help me I would be very grateful. Also, if you can provide me an alternative way to call procedures with %ROWTYPE parameter values, that would also help a lot.\r\n","title":"How to call a PL/SQL procedure with %ROWTYPE and RECORD as OUT parameters in Java?","body":"<p>PROCEDURE has 2 OUT parameters, that CallableStatement wants registered.\nOne is of RECORD TYPE, this is the OUT value that actually interests me.</p>\n<pre><code>create PACKAGE         my_package IS\n\n  TYPE my_rec_type IS RECORD\n  ( field1                                 VARCHAR2(40 CHAR)  DEFAULT '0'\n  , field2                                 VARCHAR2(240 CHAR)\n  , field3                                 VARCHAR2(1 CHAR)  DEFAULT '1'\n    );\nEND my_package;\n</code></pre>\n<p>The other one is of %ROWTYPE.</p>\n<p>The procedure itself looks like this:</p>\n<pre><code>PROCEDURE myProcedure(p_my_tbl1_rec          IN     schema2.my_table1%ROWTYPE\n                    , p_my_tbl2_rec          IN     schema2.my_table2%ROWTYPE\n               \n                    , p_to_my_table1_rec     OUT    schema2.my_table1%ROWTYPE\n                    , p_my_rec               OUT    schema2.my_package.my_rec_type)\n  BEGIN \n      ...\n  END myProcedure;\n</code></pre>\n<p>Is used a workaround to map my Java objects to %ROWTYPE inputs that the Oracle procedure can use.</p>\n<pre><code>Connection con = dataSource.getConnection();\n\n        String sql = &quot;&quot;&quot;\n                declare p_my_tbl1_rec      schema2.my_table1%ROWTYPE; \n                        p_my_tbl2_rec      schema2.my_table2%ROWTYPE;\n                        \n                        p_to_my_table1_rec schema2.my_table1%ROWTYPE;\n                        p_my_rec           schema2.my_package.my_rec_type;\n                        \n                begin \n                    p_my_tbl1_rec.TABLE_FIELD1                  :=  :table1TableField1;\n                    p_my_tbl1_rec.TABLE_FIELD2                  :=  :table1TableField2;\n                    ...\n                    p_my_tbl2_rec.TABLE_FIELD1                  :=  :table2TableField1; \n                    p_my_tbl2_rec.TABLE_FIELD2                  :=  :table2TableField2;\n                    ...\n                    \n                    p_to_my_table1_rec                       :=  ???\n                    p_my_rec                                 :=  ???\n                    \n                    myProcedure( p_my_tbl1_rec         =&gt; p_my_tbl1_rec\n                               , p_my_tbl2_rec         =&gt; p_my_tbl2_rec\n                        \n                               , p_to_my_table1_rec    =&gt; p_to_my_table1_rec\n                               , p_my_rec              =&gt; p_my_rec);\n                end;\n                &quot;&quot;&quot;;\n        CallableStatement cs = con.prepareCall(sql);\n        // This is how I can map a Java object to %ROWTYPE TYPE\n        cs.setLong  (&quot;table1TableField1&quot;, myObject1.getTable1TableField1());\n        cs.setString(&quot;table1TableField2&quot;, myObject1.getTable1TableField2());\n        ...\n        cs.setLong  (&quot;table2TableField1&quot;, myObject2.getTable2TableField1());\n        cs.setString(&quot;table2TableField2&quot;, myObject2.getTable2TableField2());\n        ...\n\n        cs.registerOutParameter(&quot;p_to_my_table1_rec&quot;, ???);\n        cs.registerOutParameter(&quot;p_my_rec&quot;, ???);\n        cs.execute();\n</code></pre>\n<p><strong>Expectation:</strong>\nI call the procedure, I can verify the database, that the procedure has indeed been called. Ideally I can map p_my_rec to a Java object, for future use.</p>\n<p><strong>Reality:</strong>\ni have tried different things. STRUCT seems to be the thing I am loking for, but I do not know how to define it correctly. Sometimes, when I tried calling\n<code>cs.registerOutParameter(&quot;schema2.my_package.my_rec_type&quot;, STRUCT);</code>\nit did not find schema2.my_package.my_rec_type. Could it be, because it is in a PACKAGE?\nIf you can help me I would be very grateful. Also, if you can provide me an alternative way to call procedures with %ROWTYPE parameter values, that would also help a lot.</p>\n"},{"tags":["java","apache-spark"],"answers":[{"tags":[],"owner":{"account_id":1017255,"reputation":1526,"user_id":1028537,"display_name":"Chris"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1692278013,"creation_date":1692278013,"answer_id":76921872,"question_id":76920612,"body_markdown":"You probably shouldn&#39;t use monotonically_increasing_id for an actual id generation, the next time you run that query you&#39;ll get the same id&#39;s again.  If you want unique id&#39;s use something that produces them like Sparks uuid or [unique_id](https://sparkutils.github.io/quality/0.1.1/advanced/rowIdFunctions/#guaranteed-unique-id-how).  If your data has combinations of fields forming a primary key you could also hash on them to produce a data driven key.\r\n\r\nRegarding your last code snippet that will force all of the df to be evaluated for max(&quot;id&quot;), so you evaluate twice.  There is no other way to use this approach, but per above I&#39;d argue it&#39;s possibly not a good approach for you.\r\n","title":"java spark, using max value of a column in another without breaking deferred execution","body":"<p>You probably shouldn't use monotonically_increasing_id for an actual id generation, the next time you run that query you'll get the same id's again.  If you want unique id's use something that produces them like Sparks uuid or <a href=\"https://sparkutils.github.io/quality/0.1.1/advanced/rowIdFunctions/#guaranteed-unique-id-how\" rel=\"nofollow noreferrer\">unique_id</a>.  If your data has combinations of fields forming a primary key you could also hash on them to produce a data driven key.</p>\n<p>Regarding your last code snippet that will force all of the df to be evaluated for max(&quot;id&quot;), so you evaluate twice.  There is no other way to use this approach, but per above I'd argue it's possibly not a good approach for you.</p>\n"}],"owner":{"account_id":3042668,"reputation":187,"user_id":2579265,"display_name":"Calimero"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":56,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76921872,"answer_count":1,"score":0,"last_activity_date":1692278013,"creation_date":1692267742,"question_id":76920612,"body_markdown":"With Java Spark, I have a `Dataset&lt;Row&gt;` with a  Column of unique numeric IDs. \r\n\r\n    | Id |\r\n    |  1 |\r\n    |  5 |\r\n    |  2 |\r\n\r\nFor each of those rows I generate several rows in anothe Dataframe. The Ids are not scrambled by the transformation.\r\n\r\n    | Id |\r\n    |  1 |\r\n    |  1 |\r\n    |  1 |\r\n    |  5 |\r\n    |  2 |\r\n    |  2 |\r\n\r\nSince Ids are supposed to be unique, I need to regenerate a new set of Id. However I need to keep a trace of the transformation, so I keep the old ids and try to generate a second Id column with Ids.\r\n\r\nTo make things simpler for the human consuming the data and prevent confusion, I want those newer ids to follow two rules :\r\n - New Id and Old Id should not overlap\r\n - New Ids need to be consecutive for a same old Id\r\n\r\nFor example a valid result could be : \r\n\r\n```\r\n|New_Id   | Old_Id |\r\n| 59404   |  1     |\r\n| 59405   |  1     |\r\n| 59406   |  1     |\r\n| 493     |  5     |\r\n| 3       |  2     |\r\n| 4       |  2     |\r\n```\r\n\r\nTo achieve this I tried \r\n\r\n    df.withColumnRenamed(&quot;Id&quot;, &quot;Old_Id&quot;).withColumn(&quot;New_Id&quot;, monotonically_increasing_id())\r\n\r\nBut the `New_Id` column produced is just consecutive integers from zero. Which satisfies my second rule but not the first one.\r\n\r\n```\r\n|New_Id   | Old_Id |\r\n| 0       |  1     |\r\n| 1       |  1     |\r\n| 2       |  1     |\r\n| 3       |  5     |\r\n| 4       |  2     |\r\n| 5       |  2     |\r\n```\r\n\r\nTo fix this, I thought of adding the max value of the `Old_Id` to my `monotonically_increasing_id`\r\n\r\n    Column maxId = lit(df.select(&quot;Id&quot;).agg(max(&quot;Id&quot;)).head().getLong(0)));\r\n    Dataset&lt;Row&gt; result = df.withColumnRenamed(&quot;Id&quot;, &quot;Old_Id&quot;).withColumn(&quot;New_Id&quot;, monotonically_increasing_id().plus(maxId));\r\n\r\n\r\nIt produces the expected result but is this the correct way to achieve this ? Is there a simpler or built-in way ? In terms of lazy evaluation/deferred execution, does this goes through my dataset once or twice ?","title":"java spark, using max value of a column in another without breaking deferred execution","body":"<p>With Java Spark, I have a <code>Dataset&lt;Row&gt;</code> with a  Column of unique numeric IDs.</p>\n<pre><code>| Id |\n|  1 |\n|  5 |\n|  2 |\n</code></pre>\n<p>For each of those rows I generate several rows in anothe Dataframe. The Ids are not scrambled by the transformation.</p>\n<pre><code>| Id |\n|  1 |\n|  1 |\n|  1 |\n|  5 |\n|  2 |\n|  2 |\n</code></pre>\n<p>Since Ids are supposed to be unique, I need to regenerate a new set of Id. However I need to keep a trace of the transformation, so I keep the old ids and try to generate a second Id column with Ids.</p>\n<p>To make things simpler for the human consuming the data and prevent confusion, I want those newer ids to follow two rules :</p>\n<ul>\n<li>New Id and Old Id should not overlap</li>\n<li>New Ids need to be consecutive for a same old Id</li>\n</ul>\n<p>For example a valid result could be :</p>\n<pre><code>|New_Id   | Old_Id |\n| 59404   |  1     |\n| 59405   |  1     |\n| 59406   |  1     |\n| 493     |  5     |\n| 3       |  2     |\n| 4       |  2     |\n</code></pre>\n<p>To achieve this I tried</p>\n<pre><code>df.withColumnRenamed(&quot;Id&quot;, &quot;Old_Id&quot;).withColumn(&quot;New_Id&quot;, monotonically_increasing_id())\n</code></pre>\n<p>But the <code>New_Id</code> column produced is just consecutive integers from zero. Which satisfies my second rule but not the first one.</p>\n<pre><code>|New_Id   | Old_Id |\n| 0       |  1     |\n| 1       |  1     |\n| 2       |  1     |\n| 3       |  5     |\n| 4       |  2     |\n| 5       |  2     |\n</code></pre>\n<p>To fix this, I thought of adding the max value of the <code>Old_Id</code> to my <code>monotonically_increasing_id</code></p>\n<pre><code>Column maxId = lit(df.select(&quot;Id&quot;).agg(max(&quot;Id&quot;)).head().getLong(0)));\nDataset&lt;Row&gt; result = df.withColumnRenamed(&quot;Id&quot;, &quot;Old_Id&quot;).withColumn(&quot;New_Id&quot;, monotonically_increasing_id().plus(maxId));\n</code></pre>\n<p>It produces the expected result but is this the correct way to achieve this ? Is there a simpler or built-in way ? In terms of lazy evaluation/deferred execution, does this goes through my dataset once or twice ?</p>\n"},{"tags":["java","csv","apache-camel","numberformatexception","bindy"],"answers":[{"tags":[],"owner":{"account_id":7484981,"reputation":166,"user_id":5688552,"display_name":"Loginus"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1692278005,"creation_date":1692278005,"answer_id":76921871,"question_id":76912353,"body_markdown":"There can be various options like:\r\n\r\n - Implement [custom data format][1] that wraps Bindy data format and handles parting exception e.g. returning null on invalid record\r\n - use [filter][2] or [validator][3] that validates the record before processing it e.g. using regular expression before it&#39;s unmarshalled.\r\nThis can look like\r\n``` java\r\nfrom(&quot;file:...&quot;)\r\n   .idempotentConsumer(...)\r\n   .log(...)\r\n   .split(body().tokenize(&quot;\\n&quot;))\r\n      .filter().regex(&quot;[A-Z]{3}\\\\*[^*]+\\\\*[0-9.]+\\\\*[0-9.]+\\\\*[0-9.]+&quot;) // put the valid regex here\r\n      .unmarshal().bindy(BindyType.Csv, ExchangeRateBindy.class)\r\n      .process(...);\r\n```\r\n\r\n\r\n  [1]: https://people.apache.org/~dkulp/camel/custom-dataformat.html\r\n  [2]: https://camel.apache.org/components/4.0.x/eips/filter-eip.html\r\n  [3]: https://camel.apache.org/manual/validator.html","title":"Is there a way to skip an invalid record when unmarshalling csv records with apache camel bindy","body":"<p>There can be various options like:</p>\n<ul>\n<li>Implement <a href=\"https://people.apache.org/%7Edkulp/camel/custom-dataformat.html\" rel=\"nofollow noreferrer\">custom data format</a> that wraps Bindy data format and handles parting exception e.g. returning null on invalid record</li>\n<li>use <a href=\"https://camel.apache.org/components/4.0.x/eips/filter-eip.html\" rel=\"nofollow noreferrer\">filter</a> or <a href=\"https://camel.apache.org/manual/validator.html\" rel=\"nofollow noreferrer\">validator</a> that validates the record before processing it e.g. using regular expression before it's unmarshalled.\nThis can look like</li>\n</ul>\n<pre class=\"lang-java prettyprint-override\"><code>from(&quot;file:...&quot;)\n   .idempotentConsumer(...)\n   .log(...)\n   .split(body().tokenize(&quot;\\n&quot;))\n      .filter().regex(&quot;[A-Z]{3}\\\\*[^*]+\\\\*[0-9.]+\\\\*[0-9.]+\\\\*[0-9.]+&quot;) // put the valid regex here\n      .unmarshal().bindy(BindyType.Csv, ExchangeRateBindy.class)\n      .process(...);\n</code></pre>\n"}],"owner":{"account_id":1344196,"reputation":749,"user_id":1285249,"accept_rate":0,"display_name":"Christian"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":36,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1692278005,"creation_date":1692178755,"question_id":76912353,"body_markdown":"I have the following route \r\n\r\n```\r\nfrom(&quot;file:&quot; + baseInputPath + &quot;/exchangerates&quot; + &quot;?noop=true&quot;)\r\n                                .idempotentConsumer(header(CAMEL_FILE_NAME),\r\n                                                FileIdempotentRepository.fileIdempotentRepository(new File(\r\n                                                                baseInputPath + &quot;/tracker/exchangeratefiles.txt&quot;)))\r\n                                .log(&quot;Processing exchange rate file: ${header.CamelFileName}&quot;).unmarshal()\r\n                                .bindy(BindyType.Csv, ExchangeRateBindy.class).process(exchange -&gt; {\r\n                                        ExchangeRateBindy exchangeRateBindy = exchange.getIn()\r\n                                                        .getBody(ExchangeRateBindy.class);\r\n                                        if (exchangeRateBindy != null) {\r\n                                                exchangeRateService.save(exchangeRateBindy.toExchangeRate());\r\n                                        } else {\r\n                                                log.error(&quot;Invalid exchange rate: {}&quot;, exchange.getIn().getBody());\r\n                                        }\r\n                                });\r\n```\r\n\r\nand the following bindy class\r\n\r\n```\r\n@Data\r\n@CsvRecord(separator = &quot;\\\\*&quot;, skipFirstLine = false)\r\npublic class ExchangeRateBindy {\r\n    @DataField(pos = 1)\r\n    private String currencyId;\r\n    @DataField(pos = 2)\r\n    private String currencyName;\r\n    @DataField(pos = 3)\r\n    private double buyRate;\r\n    @DataField(pos = 4)\r\n    private double midRate;\r\n    @DataField(pos = 5, defaultValue = &quot;0&quot;)\r\n    private double sellRate;\r\n\r\n    public ExchangeRate toExchangeRate() {\r\n        return ExchangeRate.builder().currencyId(currencyId).currencyName(currencyName).buyRate(buyRate)\r\n                .midRate(midRate).sellRate(sellRate).build();\r\n    }\r\n}\r\n```\r\n\r\nand csv data\r\n\r\n```\r\nCAD*Canadian Dollar.*1.0332*1.0332*1.0332\r\nAUD*Australian Dollars.*812.7459194*837.88239115*Test\r\nBWP*BOTSWANA PULA*90.29159051*93.084113925*95.87663734\r\n```\r\n\r\nHow do I allow my route to skip the second record which has an invalid last field with the value &#39;Test&#39; instead of a numeric value? As it is the code just throws a NumberFormatException and does not process any of the records.\r\n","title":"Is there a way to skip an invalid record when unmarshalling csv records with apache camel bindy","body":"<p>I have the following route</p>\n<pre><code>from(&quot;file:&quot; + baseInputPath + &quot;/exchangerates&quot; + &quot;?noop=true&quot;)\n                                .idempotentConsumer(header(CAMEL_FILE_NAME),\n                                                FileIdempotentRepository.fileIdempotentRepository(new File(\n                                                                baseInputPath + &quot;/tracker/exchangeratefiles.txt&quot;)))\n                                .log(&quot;Processing exchange rate file: ${header.CamelFileName}&quot;).unmarshal()\n                                .bindy(BindyType.Csv, ExchangeRateBindy.class).process(exchange -&gt; {\n                                        ExchangeRateBindy exchangeRateBindy = exchange.getIn()\n                                                        .getBody(ExchangeRateBindy.class);\n                                        if (exchangeRateBindy != null) {\n                                                exchangeRateService.save(exchangeRateBindy.toExchangeRate());\n                                        } else {\n                                                log.error(&quot;Invalid exchange rate: {}&quot;, exchange.getIn().getBody());\n                                        }\n                                });\n</code></pre>\n<p>and the following bindy class</p>\n<pre><code>@Data\n@CsvRecord(separator = &quot;\\\\*&quot;, skipFirstLine = false)\npublic class ExchangeRateBindy {\n    @DataField(pos = 1)\n    private String currencyId;\n    @DataField(pos = 2)\n    private String currencyName;\n    @DataField(pos = 3)\n    private double buyRate;\n    @DataField(pos = 4)\n    private double midRate;\n    @DataField(pos = 5, defaultValue = &quot;0&quot;)\n    private double sellRate;\n\n    public ExchangeRate toExchangeRate() {\n        return ExchangeRate.builder().currencyId(currencyId).currencyName(currencyName).buyRate(buyRate)\n                .midRate(midRate).sellRate(sellRate).build();\n    }\n}\n</code></pre>\n<p>and csv data</p>\n<pre><code>CAD*Canadian Dollar.*1.0332*1.0332*1.0332\nAUD*Australian Dollars.*812.7459194*837.88239115*Test\nBWP*BOTSWANA PULA*90.29159051*93.084113925*95.87663734\n</code></pre>\n<p>How do I allow my route to skip the second record which has an invalid last field with the value 'Test' instead of a numeric value? As it is the code just throws a NumberFormatException and does not process any of the records.</p>\n"},{"tags":["java","maven","apache-kafka","graalvm-native-image"],"comments":[{"owner":{"account_id":2671330,"reputation":183376,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"score":0,"creation_date":1692197520,"post_id":76912248,"comment_id":135591582,"body_markdown":"1) Don&#39;t use `Class.forName` when you can just use `StringSerializer.class` 2) Seems like your native image doesn&#39;t include external dependencies, or you&#39;re not running the code with a complete classpath... Successful building and packaging doesn&#39;t address runtime errors","body":"1) Don&#39;t use <code>Class.forName</code> when you can just use <code>StringSerializer.class</code> 2) Seems like your native image doesn&#39;t include external dependencies, or you&#39;re not running the code with a complete classpath... Successful building and packaging doesn&#39;t address runtime errors"},{"owner":{"account_id":29235612,"reputation":11,"user_id":22398310,"display_name":"paul"},"score":1,"creation_date":1692274478,"post_id":76912248,"comment_id":135602654,"body_markdown":"It was indeed a problem with the dependencies, in fact I solved the problem with some entries in my &quot;reflect-config.json&quot; file. Thanks!","body":"It was indeed a problem with the dependencies, in fact I solved the problem with some entries in my &quot;reflect-config.json&quot; file. Thanks!"},{"owner":{"account_id":2671330,"reputation":183376,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"score":0,"creation_date":1692276703,"post_id":76912248,"comment_id":135603138,"body_markdown":"Feel free to add your complete solution below as an answer","body":"Feel free to add your complete solution below as an answer"}],"answers":[{"tags":[],"owner":{"account_id":29235612,"reputation":11,"user_id":22398310,"display_name":"paul"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1692277609,"creation_date":1692277564,"answer_id":76921826,"question_id":76912248,"body_markdown":"So, the problem I had was that I didnt know about configuring the GraalVM with Kafka at all. In the following link I found the solution to my problem in adding the requested json file for the confluent schema registry to my project: [https://jeqo.github.io/posts/2022-03-18-kafka-clients-graalvm/][1]\r\n\r\n\r\n  [1]: https://jeqo.github.io/posts/2022-03-18-kafka-clients-graalvm/","title":"GraalVM, Apache Kafka: Could not find a public no-argument constructor for org.apache.kafka.common.serialization.StringSerializer","body":"<p>So, the problem I had was that I didnt know about configuring the GraalVM with Kafka at all. In the following link I found the solution to my problem in adding the requested json file for the confluent schema registry to my project: <a href=\"https://jeqo.github.io/posts/2022-03-18-kafka-clients-graalvm/\" rel=\"nofollow noreferrer\">https://jeqo.github.io/posts/2022-03-18-kafka-clients-graalvm/</a></p>\n"}],"owner":{"account_id":29235612,"reputation":11,"user_id":22398310,"display_name":"paul"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":148,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1692277609,"creation_date":1692178075,"question_id":76912248,"body_markdown":"I am currently working on a Java-Application which is a Kafka-Producer. I have already finished and fully tested the code with Maven, everything worked fine. Then I waned to get a Graal-Native-Image for executing the producer Code.\r\n\r\nI am building the project with &quot;mvn -Pnative package&quot; and everything is getting built fine. (also using the maven profile from the docs: (https://graalvm.github.io/native-build-tools/latest/maven-plugin.html)). When trying to start the image via &quot;./MyApp&quot; I am getting the following errors:\r\n\r\n```\r\nException in thread &quot;main&quot; org.apache.kafka.common.KafkaException: Failed to construct kafka producer\r\n        at org.apache.kafka.clients.producer.KafkaProducer.&lt;init&gt;(KafkaProducer.java:465)\r\n        at org.apache.kafka.clients.producer.KafkaProducer.&lt;init&gt;(KafkaProducer.java:290)\r\n        at org.apache.kafka.clients.producer.KafkaProducer.&lt;init&gt;(KafkaProducer.java:317)\r\n        at org.apache.kafka.clients.producer.KafkaProducer.&lt;init&gt;(KafkaProducer.java:302)\r\n        at Main.main(Main.java:23)\r\nCaused by: org.apache.kafka.common.KafkaException: Could not find a public no-argument constructor for org.apache.kafka.common.serialization.StringSerializer\r\n        at org.apache.kafka.common.utils.Utils.newInstance(Utils.java:397)\r\n        at org.apache.kafka.common.config.AbstractConfig.getConfiguredInstance(AbstractConfig.java:401)\r\n        at org.apache.kafka.common.config.AbstractConfig.getConfiguredInstance(AbstractConfig.java:440)\r\n        at org.apache.kafka.common.config.AbstractConfig.getConfiguredInstance(AbstractConfig.java:425)\r\n        at org.apache.kafka.clients.producer.KafkaProducer.&lt;init&gt;(KafkaProducer.java:380)\r\n        ... 4 more\r\nCaused by: java.lang.NoSuchMethodException: org.apache.kafka.common.serialization.StringSerializer.&lt;init&gt;()\r\n        at java.base@17.0.8/java.lang.Class.checkMethod(DynamicHub.java:1038)\r\n        at java.base@17.0.8/java.lang.Class.getConstructor0(DynamicHub.java:1204)\r\n        at java.base@17.0.8/java.lang.Class.getDeclaredConstructor(DynamicHub.java:2754)\r\n        at org.apache.kafka.common.utils.Utils.newInstance(Utils.java:395)\r\n        ... 8 more\r\n```\r\nThe following code snippet represents the code where the error seems to happen:\r\n\r\n```\r\n        Properties properties = new Properties();\r\n        properties.put(ProducerConfig.BOOTSTRAP_SERVERS_CONFIG, &quot;localhost:9092&quot;);\r\n        properties.put(&quot;schema.registry.url&quot;, &quot;http://localhost:8081&quot;);\r\n        properties.put(&quot;key.serializer&quot;, Class.forName(&quot;org.apache.kafka.common.serialization.StringSerializer&quot;));\r\n        properties.put(&quot;value.serializer&quot;, Class.forName(&quot;io.confluent.kafka.serializers.KafkaAvroSerializer&quot;));\r\n\r\n        final org.apache.kafka.clients.producer.Producer&lt;String, GenericRecord&gt; producer = new KafkaProducer&lt;&gt;(properties);\r\n        Runtime.getRuntime().addShutdownHook(new Thread(() -&gt; {\r\n            System.out.println(&quot;Stopping Producer&quot;);\r\n            producer.close();\r\n        }));\r\n```\r\n\r\n\r\n\r\nMy guess was that the Kafka Depedency just isnt being imported properly, but trying it without it in my pom.xml the &quot;mvn package&quot; command wouldnt even work without errors. By the way I am using the latest Kafka Version.\r\nI also tried using as less Dependencies as possible and looked if one of the would be the problem. Is there any specific GraalVM configs I am missing? I am new to the topic.\r\n\r\n\r\nI hope that is all information relevant for that kind of problem otherwise I would of course share it, if something was missing.\r\nThanks in advance.","title":"GraalVM, Apache Kafka: Could not find a public no-argument constructor for org.apache.kafka.common.serialization.StringSerializer","body":"<p>I am currently working on a Java-Application which is a Kafka-Producer. I have already finished and fully tested the code with Maven, everything worked fine. Then I waned to get a Graal-Native-Image for executing the producer Code.</p>\n<p>I am building the project with &quot;mvn -Pnative package&quot; and everything is getting built fine. (also using the maven profile from the docs: (<a href=\"https://graalvm.github.io/native-build-tools/latest/maven-plugin.html\" rel=\"nofollow noreferrer\">https://graalvm.github.io/native-build-tools/latest/maven-plugin.html</a>)). When trying to start the image via &quot;./MyApp&quot; I am getting the following errors:</p>\n<pre><code>Exception in thread &quot;main&quot; org.apache.kafka.common.KafkaException: Failed to construct kafka producer\n        at org.apache.kafka.clients.producer.KafkaProducer.&lt;init&gt;(KafkaProducer.java:465)\n        at org.apache.kafka.clients.producer.KafkaProducer.&lt;init&gt;(KafkaProducer.java:290)\n        at org.apache.kafka.clients.producer.KafkaProducer.&lt;init&gt;(KafkaProducer.java:317)\n        at org.apache.kafka.clients.producer.KafkaProducer.&lt;init&gt;(KafkaProducer.java:302)\n        at Main.main(Main.java:23)\nCaused by: org.apache.kafka.common.KafkaException: Could not find a public no-argument constructor for org.apache.kafka.common.serialization.StringSerializer\n        at org.apache.kafka.common.utils.Utils.newInstance(Utils.java:397)\n        at org.apache.kafka.common.config.AbstractConfig.getConfiguredInstance(AbstractConfig.java:401)\n        at org.apache.kafka.common.config.AbstractConfig.getConfiguredInstance(AbstractConfig.java:440)\n        at org.apache.kafka.common.config.AbstractConfig.getConfiguredInstance(AbstractConfig.java:425)\n        at org.apache.kafka.clients.producer.KafkaProducer.&lt;init&gt;(KafkaProducer.java:380)\n        ... 4 more\nCaused by: java.lang.NoSuchMethodException: org.apache.kafka.common.serialization.StringSerializer.&lt;init&gt;()\n        at java.base@17.0.8/java.lang.Class.checkMethod(DynamicHub.java:1038)\n        at java.base@17.0.8/java.lang.Class.getConstructor0(DynamicHub.java:1204)\n        at java.base@17.0.8/java.lang.Class.getDeclaredConstructor(DynamicHub.java:2754)\n        at org.apache.kafka.common.utils.Utils.newInstance(Utils.java:395)\n        ... 8 more\n</code></pre>\n<p>The following code snippet represents the code where the error seems to happen:</p>\n<pre><code>        Properties properties = new Properties();\n        properties.put(ProducerConfig.BOOTSTRAP_SERVERS_CONFIG, &quot;localhost:9092&quot;);\n        properties.put(&quot;schema.registry.url&quot;, &quot;http://localhost:8081&quot;);\n        properties.put(&quot;key.serializer&quot;, Class.forName(&quot;org.apache.kafka.common.serialization.StringSerializer&quot;));\n        properties.put(&quot;value.serializer&quot;, Class.forName(&quot;io.confluent.kafka.serializers.KafkaAvroSerializer&quot;));\n\n        final org.apache.kafka.clients.producer.Producer&lt;String, GenericRecord&gt; producer = new KafkaProducer&lt;&gt;(properties);\n        Runtime.getRuntime().addShutdownHook(new Thread(() -&gt; {\n            System.out.println(&quot;Stopping Producer&quot;);\n            producer.close();\n        }));\n</code></pre>\n<p>My guess was that the Kafka Depedency just isnt being imported properly, but trying it without it in my pom.xml the &quot;mvn package&quot; command wouldnt even work without errors. By the way I am using the latest Kafka Version.\nI also tried using as less Dependencies as possible and looked if one of the would be the problem. Is there any specific GraalVM configs I am missing? I am new to the topic.</p>\n<p>I hope that is all information relevant for that kind of problem otherwise I would of course share it, if something was missing.\nThanks in advance.</p>\n"},{"tags":["java","jsp","compiler-errors"],"answers":[{"tags":[],"owner":{"account_id":7701,"reputation":47163,"user_id":13447,"accept_rate":100,"display_name":"Olaf Kock"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1692264912,"creation_date":1692264912,"answer_id":76920236,"question_id":76916533,"body_markdown":"You can not ignore this kind of compilation error, as JSPs are first compiled into standalone Servlets, which are in turn compiled into binary .class files. \r\n\r\nWhile you can generate unbalanced HTML tags as you please, you absolutely can not do so with JSP-Taglibs: They will *always* need to be balanced *in the same JSP file*.\r\n\r\nSo, what you can do is separate out by having &quot;outer&quot; tags in one file, and &quot;inner&quot; tags in another (included) one (to a certain extent), but you typically can&#39;t separate them into separate beginning &amp; ending. \r\n\r\nAnother alternative is to separate a JSP out into JSPF or other fragments. If you *statically* include them into a single JSP file _at compile time_, you can spread them out over multiple files. In general, from a maintainability standpoint, I&#39;d *strongly* prefer not to separate beginning and end of a JSP tag though. ","title":"Is there a way to ignore compilation error for a JSP file","body":"<p>You can not ignore this kind of compilation error, as JSPs are first compiled into standalone Servlets, which are in turn compiled into binary .class files.</p>\n<p>While you can generate unbalanced HTML tags as you please, you absolutely can not do so with JSP-Taglibs: They will <em>always</em> need to be balanced <em>in the same JSP file</em>.</p>\n<p>So, what you can do is separate out by having &quot;outer&quot; tags in one file, and &quot;inner&quot; tags in another (included) one (to a certain extent), but you typically can't separate them into separate beginning &amp; ending.</p>\n<p>Another alternative is to separate a JSP out into JSPF or other fragments. If you <em>statically</em> include them into a single JSP file <em>at compile time</em>, you can spread them out over multiple files. In general, from a maintainability standpoint, I'd <em>strongly</em> prefer not to separate beginning and end of a JSP tag though.</p>\n"}],"owner":{"account_id":5858990,"reputation":35,"user_id":4615353,"display_name":"VIVEK SHARMA"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":61,"favorite_count":0,"down_vote_count":3,"up_vote_count":0,"closed_date":1692277473,"answer_count":1,"score":-3,"last_activity_date":1692277537,"creation_date":1692214223,"question_id":76916533,"body_markdown":"I have to intentially ignore Compilation error in a jsp file.\r\n\r\n**What is being implemented?**\r\n\r\nfor a use-case, i have to override &lt;form&gt; tag in a service which is defined in other service. We have an in house page assembly logic to achieve it.\r\n\r\n**What is the issue?**\r\n\r\nI am getting `unterminated form jag` error and i need to ignore this error for my JSP file because my page assembly service will combine this form and send it to client.\r\n\r\n```\r\n[jasper] At least one JAR was scanned for TLDs yet contained no TLDs. Enable debug logging for this logger for a complete list of JARs that were scanned but no TLDs were found in them. Skipping unneeded JARs during scanning can improve startup time and JSP compilation time.\r\n   [jasper] Compilation error\r\n   [jasper] Error count: [1]\r\n```\r\n\r\n**What are the things which i tried?**\r\n\r\n`&lt;%-- @SuppressWarnings(&quot;jasper&quot;) --%&gt;`\r\n\r\n`&lt;%-- @ignoreCompilationErrors --%&gt;`\r\n\r\n`&lt;%@ suppressError jasper=&quot;true&quot; %&gt;`\r\n\r\n\r\nPlease let me know if there&#39;s a way to suppress error for a particular jsp file.","title":"Is there a way to ignore compilation error for a JSP file","body":"<p>I have to intentially ignore Compilation error in a jsp file.</p>\n<p><strong>What is being implemented?</strong></p>\n<p>for a use-case, i have to override  tag in a service which is defined in other service. We have an in house page assembly logic to achieve it.</p>\n<p><strong>What is the issue?</strong></p>\n<p>I am getting <code>unterminated form jag</code> error and i need to ignore this error for my JSP file because my page assembly service will combine this form and send it to client.</p>\n<pre><code>[jasper] At least one JAR was scanned for TLDs yet contained no TLDs. Enable debug logging for this logger for a complete list of JARs that were scanned but no TLDs were found in them. Skipping unneeded JARs during scanning can improve startup time and JSP compilation time.\n   [jasper] Compilation error\n   [jasper] Error count: [1]\n</code></pre>\n<p><strong>What are the things which i tried?</strong></p>\n<p><code>&lt;%-- @SuppressWarnings(&quot;jasper&quot;) --%&gt;</code></p>\n<p><code>&lt;%-- @ignoreCompilationErrors --%&gt;</code></p>\n<p><code>&lt;%@ suppressError jasper=&quot;true&quot; %&gt;</code></p>\n<p>Please let me know if there's a way to suppress error for a particular jsp file.</p>\n"},{"tags":["java","hibernate","jpa","jpql"],"comments":[{"owner":{"account_id":24440940,"reputation":3122,"user_id":18364656,"display_name":"Andrei Lisa"},"score":0,"creation_date":1692276601,"post_id":76921611,"comment_id":135603110,"body_markdown":"did you try to write a sql query as a native with `nativeQuery = true` ?","body":"did you try to write a sql query as a native with <code>nativeQuery = true</code> ?"},{"owner":{"account_id":10160823,"reputation":1,"user_id":7504338,"display_name":"hokkun"},"score":0,"creation_date":1692278587,"post_id":76921611,"comment_id":135603618,"body_markdown":"@AndreiLisa Thank you Andrei, that&#39;s definitely another option. But I guess we may need to set a return type to `List&lt;Object[]&gt;` and convert it to POJOs by ourselves?","body":"@AndreiLisa Thank you Andrei, that&#39;s definitely another option. But I guess we may need to set a return type to <code>List&lt;Object[]&gt;</code> and convert it to POJOs by ourselves?"},{"owner":{"account_id":24440940,"reputation":3122,"user_id":18364656,"display_name":"Andrei Lisa"},"score":0,"creation_date":1692280119,"post_id":76921611,"comment_id":135604002,"body_markdown":"yes, but in hibernate 6 was changed this approach","body":"yes, but in hibernate 6 was changed this approach"},{"owner":{"account_id":7614789,"reputation":175,"user_id":5774614,"display_name":"Amine ABBAOUI"},"score":0,"creation_date":1692280733,"post_id":76921611,"comment_id":135604148,"body_markdown":"Are you using TypedQuery or what exactly !!!, please share all your query statements, and what do you mean by N+1 problem ?","body":"Are you using TypedQuery or what exactly !!!, please share all your query statements, and what do you mean by N+1 problem ?"},{"owner":{"account_id":10160823,"reputation":1,"user_id":7504338,"display_name":"hokkun"},"score":0,"creation_date":1692281750,"post_id":76921611,"comment_id":135604392,"body_markdown":"@AmineABBAOUI Basically I am using Hibernates via Spring Data JPA, which means `@Query(QUERY)` where QUERY is the JPQL statements I wrote in the question ([Reference](https://www.baeldung.com/spring-data-jpa-query)). Regarding N+1 problem, for example [this blog article](https://vladmihalcea.com/n-plus-1-query-problem/) might be a good reference.","body":"@AmineABBAOUI Basically I am using Hibernates via Spring Data JPA, which means <code>@Query(QUERY)</code> where QUERY is the JPQL statements I wrote in the question (<a href=\"https://www.baeldung.com/spring-data-jpa-query\" rel=\"nofollow noreferrer\">Reference</a>). Regarding N+1 problem, for example <a href=\"https://vladmihalcea.com/n-plus-1-query-problem/\" rel=\"nofollow noreferrer\">this blog article</a> might be a good reference."},{"owner":{"account_id":231721,"reputation":20460,"user_id":496099,"display_name":"Chris"},"score":0,"creation_date":1692286604,"post_id":76921611,"comment_id":135605621,"body_markdown":"You cannot add filtering criteria to &#39;fetch&#39; joins. JPA requires returned (aka managed) entities to reflect what is actually in the database - providers are required to track changes, so missing entities from relationships might show up depending on how that entity is merged back in and so force changes that weren&#39;t actually made back into the DB. If you want to control the query to fetch only some B instances, query on them directly, not the As.","body":"You cannot add filtering criteria to &#39;fetch&#39; joins. JPA requires returned (aka managed) entities to reflect what is actually in the database - providers are required to track changes, so missing entities from relationships might show up depending on how that entity is merged back in and so force changes that weren&#39;t actually made back into the DB. If you want to control the query to fetch only some B instances, query on them directly, not the As."},{"owner":{"account_id":10160823,"reputation":1,"user_id":7504338,"display_name":"hokkun"},"score":0,"creation_date":1692606011,"post_id":76921611,"comment_id":135641036,"body_markdown":"@Chris Thank you Chris, my understanding is that such queries won&#39;t match JPA&#39;s philosophy. I wonder if we still should do that even when we want A itself as an array. It seems that I have to submit queries for `# of A records` x `# of B records` to RDBMS, which may be sometimes unacceptable for the performance reason.","body":"@Chris Thank you Chris, my understanding is that such queries won&#39;t match JPA&#39;s philosophy. I wonder if we still should do that even when we want A itself as an array. It seems that I have to submit queries for <code># of A records</code> x <code># of B records</code> to RDBMS, which may be sometimes unacceptable for the performance reason."},{"owner":{"account_id":231721,"reputation":20460,"user_id":496099,"display_name":"Chris"},"score":0,"creation_date":1692626364,"post_id":76921611,"comment_id":135645382,"body_markdown":"fetch joins across many to many: there are other options. EclipseLink has a batchFetch option you can use on relationships, so 1 query for all As and 1 more query for all related Bs. I believe hibernate has similar options, I just don&#39;t know how well the batchSize annotation works. You can always query As and Bs yourself in a similar fashion, which of course by building As, would allow you to sort and filter the Bs in their B collections yourself too, and give you much more control for performance tuning","body":"fetch joins across many to many: there are other options. EclipseLink has a batchFetch option you can use on relationships, so 1 query for all As and 1 more query for all related Bs. I believe hibernate has similar options, I just don&#39;t know how well the batchSize annotation works. You can always query As and Bs yourself in a similar fashion, which of course by building As, would allow you to sort and filter the Bs in their B collections yourself too, and give you much more control for performance tuning"}],"owner":{"account_id":10160823,"reputation":1,"user_id":7504338,"display_name":"hokkun"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":58,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1692277407,"creation_date":1692275890,"question_id":76921611,"body_markdown":"Assume you have these two entities and corresponding tables (this is kind of a pseudo code; may not be really accurate Java code):\r\n\r\n\r\n```lang-java\r\n@Entity\r\n@Table(&quot;table_a&quot;)\r\npublic class A {\r\n  @Id\r\n  private int id;\r\n  @OneToMany\r\n  @JoinColumn(name = &quot;a_id&quot;, referencedColumnName = &quot;id&quot;)\r\n  private List&lt;B&gt; bList;\r\n}\r\n\r\n@Entity\r\n@Table(&quot;table_b&quot;)\r\npublic class B {\r\n  @Id\r\n  private int id;\r\n  @Column(name = &quot;a_id&quot;)\r\n  private int aId;\r\n  @Column(name = &quot;condition&quot;)\r\n  private int condition;\r\n} \r\n```\r\n\r\nWhat I want to achieve is (Pseudo JPQL):\r\n```lang-jpql\r\nselect a\r\nfrom A a\r\nleft join B b on (\r\n  a.id = b.aId\r\n  and b.condition &lt; 100\r\n)\r\n```\r\n\r\nI&#39;m using Hibernate 6.1.7.FINAL as a JPA implementation along with Spring Data JPA 3.0.8.\r\n\r\nI tried several options:\r\n\r\n1. Normal `JOIN` -&gt; That must have the N+1 problem.\r\n2. `JOIN FETCH` -&gt; You cannot use `on` for join fetch for the JPQL syntax restriction.\r\n3. Entity Graph -&gt; I have originally used this way, but it was no longer working after upgrading Hibernate to 6.x according to https://hibernate.atlassian.net/browse/HHH-15612.\r\n\r\nProbably one possible option is `JOIN FETCH` and `WHERE` like\r\n\r\n```lang-jpql\r\nselect a\r\nfrom A a\r\nleft fetch join B b\r\nwhere\r\n  (b.id is null) or (a.id = b.aId and b.condition &lt; 100)\r\n```\r\n\r\nBut actually you have to write `(b.id is null)` every time, and not semantically the same as the original one (maybe RDBMS can optimize it to some extend though).\r\n\r\nAny other possible options?\r\n\r\n---\r\nOriginally Hibernate 5 allowed me to use the following JPQL:\r\n```lang-jpql\r\nselect a\r\nfrom A a\r\nleft join B b on (\r\n  a.id = b.aId\r\n  and b.condition &lt; 100\r\n)\r\n```\r\n\r\nwith @EntityGraph (from Spring Data JPA), but now Hibernate 6 returns a SQL statement that contains duplicate `join` clauses (see HHH-15612 above). ","title":"What&#39;s the most reasonable way when I want to LEFT JOIN two tables with ON conditions in JPQL without suffering from the N+1 problem?","body":"<p>Assume you have these two entities and corresponding tables (this is kind of a pseudo code; may not be really accurate Java code):</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Entity\n@Table(&quot;table_a&quot;)\npublic class A {\n  @Id\n  private int id;\n  @OneToMany\n  @JoinColumn(name = &quot;a_id&quot;, referencedColumnName = &quot;id&quot;)\n  private List&lt;B&gt; bList;\n}\n\n@Entity\n@Table(&quot;table_b&quot;)\npublic class B {\n  @Id\n  private int id;\n  @Column(name = &quot;a_id&quot;)\n  private int aId;\n  @Column(name = &quot;condition&quot;)\n  private int condition;\n} \n</code></pre>\n<p>What I want to achieve is (Pseudo JPQL):</p>\n<pre class=\"lang-jpql prettyprint-override\"><code>select a\nfrom A a\nleft join B b on (\n  a.id = b.aId\n  and b.condition &lt; 100\n)\n</code></pre>\n<p>I'm using Hibernate 6.1.7.FINAL as a JPA implementation along with Spring Data JPA 3.0.8.</p>\n<p>I tried several options:</p>\n<ol>\n<li>Normal <code>JOIN</code> -&gt; That must have the N+1 problem.</li>\n<li><code>JOIN FETCH</code> -&gt; You cannot use <code>on</code> for join fetch for the JPQL syntax restriction.</li>\n<li>Entity Graph -&gt; I have originally used this way, but it was no longer working after upgrading Hibernate to 6.x according to <a href=\"https://hibernate.atlassian.net/browse/HHH-15612\" rel=\"nofollow noreferrer\">https://hibernate.atlassian.net/browse/HHH-15612</a>.</li>\n</ol>\n<p>Probably one possible option is <code>JOIN FETCH</code> and <code>WHERE</code> like</p>\n<pre class=\"lang-jpql prettyprint-override\"><code>select a\nfrom A a\nleft fetch join B b\nwhere\n  (b.id is null) or (a.id = b.aId and b.condition &lt; 100)\n</code></pre>\n<p>But actually you have to write <code>(b.id is null)</code> every time, and not semantically the same as the original one (maybe RDBMS can optimize it to some extend though).</p>\n<p>Any other possible options?</p>\n<hr />\n<p>Originally Hibernate 5 allowed me to use the following JPQL:</p>\n<pre class=\"lang-jpql prettyprint-override\"><code>select a\nfrom A a\nleft join B b on (\n  a.id = b.aId\n  and b.condition &lt; 100\n)\n</code></pre>\n<p>with @EntityGraph (from Spring Data JPA), but now Hibernate 6 returns a SQL statement that contains duplicate <code>join</code> clauses (see HHH-15612 above).</p>\n"},{"tags":["java","android","client","message"],"answers":[{"tags":[],"owner":{"account_id":3347023,"reputation":1,"user_id":2811995,"display_name":"user2811995"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1400768287,"creation_date":1380046160,"answer_id":18988914,"question_id":18988606,"body_markdown":"Some thoughts that may or may not solve the problem:\r\n\r\nThe method readLine() for the ObjectInputStream is deprecated. Try using a DataInputStream instead. Something like : \r\n\r\n    try {\r\n\t\t\toutToClient = new DataOutputStream(socket.getOutputStream());\r\n\t\t\tinFromClient = new DataInputStream(socket.getInputStream());\r\n\t} catch (IOException e) {\r\n\t\t\t// TODO Auto-generated catch block\r\n\t\t\te.printStackTrace();\r\n\t}\r\n\r\nAnd then :\r\n\r\n    inFromClient.readLine();\r\n\r\n\r\n\r\nNote that the read line will continue to read until it encounters a new line character &#39;\\n&#39;. So readLine() will block until it reads a newline.\r\n\r\nTry these things and see if they help\r\n\r\n\r\nEDIT:\r\nIt appears readLine() for DataInputStream is deprecated as well, but there are several others methods that should work. For example readUTF()","title":"Creating a simple Hello world Android Client-Server program","body":"<p>Some thoughts that may or may not solve the problem:</p>\n\n<p>The method readLine() for the ObjectInputStream is deprecated. Try using a DataInputStream instead. Something like : </p>\n\n<pre><code>try {\n        outToClient = new DataOutputStream(socket.getOutputStream());\n        inFromClient = new DataInputStream(socket.getInputStream());\n} catch (IOException e) {\n        // TODO Auto-generated catch block\n        e.printStackTrace();\n}\n</code></pre>\n\n<p>And then :</p>\n\n<pre><code>inFromClient.readLine();\n</code></pre>\n\n<p>Note that the read line will continue to read until it encounters a new line character '\\n'. So readLine() will block until it reads a newline.</p>\n\n<p>Try these things and see if they help</p>\n\n<p>EDIT:\nIt appears readLine() for DataInputStream is deprecated as well, but there are several others methods that should work. For example readUTF()</p>\n"}],"owner":{"account_id":3347322,"reputation":33,"user_id":2812231,"display_name":"Camil Latif"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":9949,"favorite_count":0,"down_vote_count":1,"up_vote_count":2,"answer_count":1,"score":1,"last_activity_date":1692277280,"creation_date":1380045076,"question_id":18988606,"body_markdown":"To keep it simple, all I&#39;m trying to do is to send a message from my Android Emulator to a Java console server on Eclipse that contains a simple string, then I want the server to reply with another string.\r\nOfcourse; Ill connect to host 10.0.2.2 and use any open port (in my case 4000). The server gets a &quot;connected&quot; msg everytime I click on connecting button on the emulator, but I cant find a way to deliver packets or messages.\r\n\r\nIn case you want to read some code, here&#39;s my (what I think is) too long code for a simple task.\r\n\r\nClient\r\n    package com.example.clienttest;\r\n    \r\n    import java.io.IOException;\r\n    import java.io.ObjectInputStream;\r\n    import java.io.ObjectOutputStream;\r\n    import java.net.Socket;\r\n    \r\n    import android.os.Bundle;\r\n    import android.app.Activity;\r\n    import android.view.View;\r\n    import android.widget.EditText;\r\n    import android.widget.TextView;\r\n    \r\n    public class MainActivity extends Activity {\r\n    \r\n    \tThread m_objThreadClient;\r\n    \tSocket clientSocket;\r\n    \tTextView serverMessage;\r\n    \tEditText clientMessage;\r\n    \tString sIn, sOut;\r\n    \tObjectOutputStream oos;\r\n    \tObjectInputStream ois;\r\n    \t\r\n    \t@Override\r\n    \tpublic void onCreate(Bundle savedInstanceState) {\r\n    \t    super.onCreate(savedInstanceState);\r\n    \t    setContentView(R.layout.activity_main);\r\n    \t    \r\n    \t    serverMessage = (TextView) findViewById(R.id.textView1);\r\n    \t    clientMessage = (EditText) findViewById(R.id.editText1);\r\n    \t    \r\n    \t}\r\n        \r\n    \r\n    \tpublic void Start(View view) throws IOException{\r\n            final String Text;\r\n            String send = &quot; &quot;;\r\n            Text = clientMessage.getText().toString();\r\n    \t\tm_objThreadClient = new Thread( new Runnable(){\r\n    \t\t\tpublic void run()\r\n    \t\t\t{\r\n    \t\t        try {\r\n    \t\t            clientSocket = new Socket(&quot;10.0.2.2&quot;, 4000);\r\n    \t\t            oos = new ObjectOutputStream (clientSocket.getOutputStream());\r\n    \t\t            oos.writeObject(Text);\r\n    \t\t            oos.flush();\r\n    \t\t            \t\t            \r\n    \t\t        } catch (IOException e) {\r\n    \t\t            serverMessage.setText(e.getMessage());\r\n    \t\t        }\r\n    \t\t\t\t\r\n    \t\t\t}\r\n    \t\t});\r\n            serverMessage.setText(send);\r\n    \t\t\r\n    \t\tm_objThreadClient.start();\r\n    \t    \r\n        }\r\n     \r\n    }\r\n\r\n\r\nand server\r\n\r\n    import java.net.ServerSocket;\r\n    import java.net.Socket;\r\n     \r\n    import java.io.IOException;\r\n    import java.io.BufferedReader;\r\n    import java.io.InputStreamReader;\r\n    import java.io.ObjectInputStream;\r\n    import java.io.ObjectOutputStream;\r\n    import java.io.PrintWriter;\r\n     \r\n    import java.util.Hashtable;\r\n     \r\n    public class Server2 {\r\n     \r\n        @SuppressWarnings(&quot;resource&quot;)\r\n    \tpublic static void main (String[] args) throws IOException {\r\n     \r\n            ServerSocket server = null;  \r\n            try {\r\n                server = new ServerSocket(4000); \r\n            } catch (IOException e) {\r\n                System.err.println(&quot;Could not start up on: &quot; + &quot;4000&quot; + &quot;Maby server is already open? Or a portforwording messup?&quot;);\r\n                System.err.println(e);\r\n                System.exit(1);\r\n            }\r\n     \r\n            Socket client = null;\r\n            while(true) {\r\n                try {\r\n                    client = server.accept();\r\n                    System.out.print(&quot;connected&quot;);\r\n                } catch (IOException e) {\r\n                    System.err.println(&quot;Accept failed.&quot;);\r\n                    System.err.println(e);\r\n                }\r\n    \r\n                Thread t = new Thread(new ClientConn(client));\r\n                t.start();\r\n            }\r\n        }\r\n    }\r\n     \r\n     \r\n    class ClientConn implements Runnable {\r\n        private Socket client;\r\n        ObjectInputStream ois;\r\n        ObjectOutputStream oos;\r\n     \r\n        ClientConn(Socket client) {\r\n            this.client = client;\r\n            try {\r\n                ois = new ObjectInputStream(client.getInputStream());\r\n                String Recv;\r\n                Recv = ois.readLine();\r\n    \r\n                oos = new ObjectOutputStream(client.getOutputStream());\r\n                oos.writeChars(&quot;Welcome&quot;);\r\n                oos.flush();\r\n                \r\n                oos.close();\r\n                \r\n            } catch (IOException e) {\r\n                System.err.println(e);\r\n                return;\r\n            }\r\n        }\r\n     \r\n        public void run() {\r\n            String msg, response;\r\n            try {\r\n            \tSystem.out.print(&quot;checking&quot;);\r\n                while ((msg = ois.readLine()) != null) {\r\n                \tSystem.out.print(msg);\r\n                }\r\n            } catch (IOException e) {\r\n                System.err.println(e);\r\n            }\r\n        }\r\n     \r\n        public void sendMsg(String msg) throws IOException {\r\n            oos.writeChars(msg);\r\n        }\r\n    }\r\n\r\n\r\nThanks~","title":"Creating a simple Hello world Android Client-Server program","body":"<p>To keep it simple, all I'm trying to do is to send a message from my Android Emulator to a Java console server on Eclipse that contains a simple string, then I want the server to reply with another string.\nOfcourse; Ill connect to host 10.0.2.2 and use any open port (in my case 4000). The server gets a \"connected\" msg everytime I click on connecting button on the emulator, but I cant find a way to deliver packets or messages.</p>\n\n<p>In case you want to read some code, here's my (what I think is) too long code for a simple task.</p>\n\n<p>Client\n    package com.example.clienttest;</p>\n\n<pre><code>import java.io.IOException;\nimport java.io.ObjectInputStream;\nimport java.io.ObjectOutputStream;\nimport java.net.Socket;\n\nimport android.os.Bundle;\nimport android.app.Activity;\nimport android.view.View;\nimport android.widget.EditText;\nimport android.widget.TextView;\n\npublic class MainActivity extends Activity {\n\n    Thread m_objThreadClient;\n    Socket clientSocket;\n    TextView serverMessage;\n    EditText clientMessage;\n    String sIn, sOut;\n    ObjectOutputStream oos;\n    ObjectInputStream ois;\n\n    @Override\n    public void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_main);\n\n        serverMessage = (TextView) findViewById(R.id.textView1);\n        clientMessage = (EditText) findViewById(R.id.editText1);\n\n    }\n\n\n    public void Start(View view) throws IOException{\n        final String Text;\n        String send = \" \";\n        Text = clientMessage.getText().toString();\n        m_objThreadClient = new Thread( new Runnable(){\n            public void run()\n            {\n                try {\n                    clientSocket = new Socket(\"10.0.2.2\", 4000);\n                    oos = new ObjectOutputStream (clientSocket.getOutputStream());\n                    oos.writeObject(Text);\n                    oos.flush();\n\n                } catch (IOException e) {\n                    serverMessage.setText(e.getMessage());\n                }\n\n            }\n        });\n        serverMessage.setText(send);\n\n        m_objThreadClient.start();\n\n    }\n\n}\n</code></pre>\n\n<p>and server</p>\n\n<pre><code>import java.net.ServerSocket;\nimport java.net.Socket;\n\nimport java.io.IOException;\nimport java.io.BufferedReader;\nimport java.io.InputStreamReader;\nimport java.io.ObjectInputStream;\nimport java.io.ObjectOutputStream;\nimport java.io.PrintWriter;\n\nimport java.util.Hashtable;\n\npublic class Server2 {\n\n    @SuppressWarnings(\"resource\")\n    public static void main (String[] args) throws IOException {\n\n        ServerSocket server = null;  \n        try {\n            server = new ServerSocket(4000); \n        } catch (IOException e) {\n            System.err.println(\"Could not start up on: \" + \"4000\" + \"Maby server is already open? Or a portforwording messup?\");\n            System.err.println(e);\n            System.exit(1);\n        }\n\n        Socket client = null;\n        while(true) {\n            try {\n                client = server.accept();\n                System.out.print(\"connected\");\n            } catch (IOException e) {\n                System.err.println(\"Accept failed.\");\n                System.err.println(e);\n            }\n\n            Thread t = new Thread(new ClientConn(client));\n            t.start();\n        }\n    }\n}\n\n\nclass ClientConn implements Runnable {\n    private Socket client;\n    ObjectInputStream ois;\n    ObjectOutputStream oos;\n\n    ClientConn(Socket client) {\n        this.client = client;\n        try {\n            ois = new ObjectInputStream(client.getInputStream());\n            String Recv;\n            Recv = ois.readLine();\n\n            oos = new ObjectOutputStream(client.getOutputStream());\n            oos.writeChars(\"Welcome\");\n            oos.flush();\n\n            oos.close();\n\n        } catch (IOException e) {\n            System.err.println(e);\n            return;\n        }\n    }\n\n    public void run() {\n        String msg, response;\n        try {\n            System.out.print(\"checking\");\n            while ((msg = ois.readLine()) != null) {\n                System.out.print(msg);\n            }\n        } catch (IOException e) {\n            System.err.println(e);\n        }\n    }\n\n    public void sendMsg(String msg) throws IOException {\n        oos.writeChars(msg);\n    }\n}\n</code></pre>\n\n<p>Thanks~</p>\n"},{"tags":["java","spring-boot","hibernate"],"comments":[{"owner":{"account_id":4181375,"reputation":5091,"user_id":3426309,"display_name":"Andrey B. Panfilov"},"score":0,"creation_date":1691018716,"post_id":76823937,"comment_id":135435579,"body_markdown":"that is expected: I believe you have retrieved `initialState` via `em.find` or something similar, so actual state get stored in persistent context and HBN modifies that state when performing `merge`. Call `em.detach(initialState)` before calling `update`","body":"that is expected: I believe you have retrieved <code>initialState</code> via <code>em.find</code> or something similar, so actual state get stored in persistent context and HBN modifies that state when performing <code>merge</code>. Call <code>em.detach(initialState)</code> before calling <code>update</code>"}],"answers":[{"tags":[],"owner":{"account_id":5553822,"reputation":94,"user_id":4405995,"display_name":"Caio Costa"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1692276263,"creation_date":1691437645,"answer_id":76854774,"question_id":76823937,"body_markdown":"I&#39;ve solved it by using .toBuilder().build():\r\n```\r\nhibernateEntityAccess.update(original.toBuilder().build(), patchedData.toBuilder().build(), OperationTarget.ENTITY);\r\n```\r\nThis way my original variables didn&#39;t change.","title":"Hibernate&#39;s sessionFactory overwrites initialState entity after merge","body":"<p>I've solved it by using .toBuilder().build():</p>\n<pre><code>hibernateEntityAccess.update(original.toBuilder().build(), patchedData.toBuilder().build(), OperationTarget.ENTITY);\n</code></pre>\n<p>This way my original variables didn't change.</p>\n"}],"owner":{"account_id":5553822,"reputation":94,"user_id":4405995,"display_name":"Caio Costa"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":38,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76854774,"answer_count":1,"score":0,"last_activity_date":1692276263,"creation_date":1691016296,"question_id":76823937,"body_markdown":"I&#39;m using Springboot and Hibernate in a project and I&#39;m doing a PATCH request.\r\nLong story short, I invoke an update with:\r\n```\r\nhibernateEntityAccess.update(original, patchedData, OperationTarget.ENTITY);\r\n```\r\nThis is the update invoked:\r\n\r\n```\r\n    @SyncChs\r\n    @Transactional(rollbackFor = Exception.class)\r\n    public void update(final Auditable&lt;?&gt; initialState, final Auditable&lt;?&gt; finalState, final OperationTarget target, final boolean isInternalOperation) throws IOException {\r\n        int key = operation.getCurrentSession().setInitial(initialState, (AuditableEntity) initialState, target, isInternalOperation);\r\n        Auditable&lt;?&gt; merged = (Auditable&lt;?&gt;) sessionFactory.getCurrentSession().merge(finalState);\r\n        operation.getCurrentSession().setFinal(key, merged, (AuditableEntity) finalState, isInternalOperation);\r\n    }\r\n```\r\nAfter `.merge(finalState)`, the data in `original` is overwritten with the data that was in `patchedData`.\r\nI&#39;ve made my entities clonable and tried this \r\n```\r\nhibernateEntityAccess.update(original.clone(), patchedData.clone(), OperationTarget.ENTITY);\r\n```\r\nto see if `original` variable would not be overwritten by merge but the same behavior occurred.\r\n\r\nDoes anyone have an idea of why this happens?","title":"Hibernate&#39;s sessionFactory overwrites initialState entity after merge","body":"<p>I'm using Springboot and Hibernate in a project and I'm doing a PATCH request.\nLong story short, I invoke an update with:</p>\n<pre><code>hibernateEntityAccess.update(original, patchedData, OperationTarget.ENTITY);\n</code></pre>\n<p>This is the update invoked:</p>\n<pre><code>    @SyncChs\n    @Transactional(rollbackFor = Exception.class)\n    public void update(final Auditable&lt;?&gt; initialState, final Auditable&lt;?&gt; finalState, final OperationTarget target, final boolean isInternalOperation) throws IOException {\n        int key = operation.getCurrentSession().setInitial(initialState, (AuditableEntity) initialState, target, isInternalOperation);\n        Auditable&lt;?&gt; merged = (Auditable&lt;?&gt;) sessionFactory.getCurrentSession().merge(finalState);\n        operation.getCurrentSession().setFinal(key, merged, (AuditableEntity) finalState, isInternalOperation);\n    }\n</code></pre>\n<p>After <code>.merge(finalState)</code>, the data in <code>original</code> is overwritten with the data that was in <code>patchedData</code>.\nI've made my entities clonable and tried this</p>\n<pre><code>hibernateEntityAccess.update(original.clone(), patchedData.clone(), OperationTarget.ENTITY);\n</code></pre>\n<p>to see if <code>original</code> variable would not be overwritten by merge but the same behavior occurred.</p>\n<p>Does anyone have an idea of why this happens?</p>\n"},{"tags":["java","spring"],"comments":[{"owner":{"account_id":5404,"reputation":22089,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"score":1,"creation_date":1692259641,"post_id":76919480,"comment_id":135599772,"body_markdown":"While I get the close vote (especially because of OP&#39;s point 3...), this isn&#39;t really opinion based. We can answer this based on good design choices.","body":"While I get the close vote (especially because of OP&#39;s point 3...), this isn&#39;t really opinion based. We can answer this based on good design choices."}],"answers":[{"tags":[],"owner":{"account_id":5404,"reputation":22089,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1692259496,"creation_date":1692259496,"answer_id":76919551,"question_id":76919480,"body_markdown":"Each controller manages one entity type. So if you&#39;re retrieving media, the endpoint should be in the MediaController.\r\n\r\nInstead of making a new endpoint `media/me`, consider making `me` a filter on the normal GET (list) endpoint. That&#39;s much more scalable than having a new endpoint per thing you want to filter on. Let&#39;s say the next feature you want to add is filtering on media type. If you have both of those as filters on the same endpoint, now your users can combine those filters for free!","title":"What is a more appropriate API endpoint in my case?","body":"<p>Each controller manages one entity type. So if you're retrieving media, the endpoint should be in the MediaController.</p>\n<p>Instead of making a new endpoint <code>media/me</code>, consider making <code>me</code> a filter on the normal GET (list) endpoint. That's much more scalable than having a new endpoint per thing you want to filter on. Let's say the next feature you want to add is filtering on media type. If you have both of those as filters on the same endpoint, now your users can combine those filters for free!</p>\n"},{"tags":[],"owner":{"account_id":29176687,"reputation":322,"user_id":22351796,"display_name":"Karsten"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1692265663,"creation_date":1692265663,"answer_id":76920352,"question_id":76919480,"body_markdown":"When I structure my REST resources, I always start with the client view: What would be most helpful to a web programmer?\r\n\r\nIn your example I can imagine that you have a list of users, select one and display his media. Then your REST path should be `/users/{userId}/medias`. If you have lots of other resources that belong to a user, your web programmer still has to use just one endpoint.","title":"What is a more appropriate API endpoint in my case?","body":"<p>When I structure my REST resources, I always start with the client view: What would be most helpful to a web programmer?</p>\n<p>In your example I can imagine that you have a list of users, select one and display his media. Then your REST path should be <code>/users/{userId}/medias</code>. If you have lots of other resources that belong to a user, your web programmer still has to use just one endpoint.</p>\n"},{"tags":[],"owner":{"account_id":22129385,"reputation":1,"user_id":16381149,"display_name":"Sergio J"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1692276033,"creation_date":1692276033,"answer_id":76921629,"question_id":76919480,"body_markdown":"To make the API experience more enjoyable for the average consumer, consider packaging condition sets within an easily accessible REST path. For example, the &quot;my media&quot; query can be packaged as GET /media/me.","title":"What is a more appropriate API endpoint in my case?","body":"<p>To make the API experience more enjoyable for the average consumer, consider packaging condition sets within an easily accessible REST path. For example, the &quot;my media&quot; query can be packaged as GET /media/me.</p>\n"}],"owner":{"account_id":29242295,"reputation":1,"user_id":22403535,"display_name":"KH Eom"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":51,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"closed_date":1692492777,"answer_count":3,"score":-1,"last_activity_date":1692276033,"creation_date":1692258818,"question_id":76919480,"body_markdown":"There are two controllers, &quot;MediaController&quot; and &quot;UserController&quot; in my spring project.\r\n\r\nMediaController - contains CRUD endpoint related media\r\n\r\nUserController - contains CURD endpoint related user\r\n\r\nI want to make an endpoint which can retrieve &quot;my&quot; medias\r\n\r\nCould you help me understand which option is better?\r\n\r\n1. &quot;/users/me/medias&quot; - in UserController\r\n2. &quot;/medias/me&quot; - in MediaController\r\n\r\nor Is there a more standard option?\r\n\r\nLooking forward to your insights.","title":"What is a more appropriate API endpoint in my case?","body":"<p>There are two controllers, &quot;MediaController&quot; and &quot;UserController&quot; in my spring project.</p>\n<p>MediaController - contains CRUD endpoint related media</p>\n<p>UserController - contains CURD endpoint related user</p>\n<p>I want to make an endpoint which can retrieve &quot;my&quot; medias</p>\n<p>Could you help me understand which option is better?</p>\n<ol>\n<li>&quot;/users/me/medias&quot; - in UserController</li>\n<li>&quot;/medias/me&quot; - in MediaController</li>\n</ol>\n<p>or Is there a more standard option?</p>\n<p>Looking forward to your insights.</p>\n"},{"tags":["java","generics"],"comments":[{"owner":{"account_id":117125,"reputation":13617,"user_id":306855,"accept_rate":73,"display_name":"Emil"},"score":2,"creation_date":1281339458,"post_id":3437897,"comment_id":3582094,"body_markdown":"Try answers in this question.I think its similar.\nhttp://stackoverflow.com/questions/1942644/get-generic-type-of-java-util-list/1942680#1942680","body":"Try answers in this question.I think its similar. <a href=\"http://stackoverflow.com/questions/1942644/get-generic-type-of-java-util-list/1942680#1942680\" title=\"get generic type of java util list\">stackoverflow.com/questions/1942644/&hellip;</a>"},{"owner":{"account_id":2863495,"reputation":3749,"user_id":2458234,"accept_rate":60,"display_name":"7hi4g0"},"score":3,"creation_date":1396361210,"post_id":3437897,"comment_id":34746179,"body_markdown":"possible duplicate of [Get generic type of class at runtime](http://stackoverflow.com/questions/3403909/get-generic-type-of-class-at-runtime)","body":"possible duplicate of <a href=\"http://stackoverflow.com/questions/3403909/get-generic-type-of-class-at-runtime\">Get generic type of class at runtime</a>"},{"owner":{"account_id":207433,"reputation":1997,"user_id":457290,"accept_rate":64,"display_name":"matiasg"},"score":1,"creation_date":1413306767,"post_id":3437897,"comment_id":41390162,"body_markdown":"possible duplicate of [Instantiating a generic class in Java](http://stackoverflow.com/questions/1090458/instantiating-a-generic-class-in-java)","body":"possible duplicate of <a href=\"http://stackoverflow.com/questions/1090458/instantiating-a-generic-class-in-java\">Instantiating a generic class in Java</a>"},{"owner":{"account_id":5751247,"reputation":219,"user_id":4540861,"accept_rate":88,"display_name":"helloWorld"},"score":2,"creation_date":1549454348,"post_id":3437897,"comment_id":95906001,"body_markdown":"`import com.fasterxml.jackson.core.type.TypeReference; `\n`new TypeReference&lt;T&gt;(){}`","body":"<code>import com.fasterxml.jackson.core.type.TypeReference; </code> <code>new TypeReference&lt;T&gt;(){}</code>"},{"owner":{"account_id":2965471,"reputation":923,"user_id":2518705,"display_name":"RAM237"},"score":0,"creation_date":1640639823,"post_id":3437897,"comment_id":124623659,"body_markdown":"Yup, as the comment above suggests, workarounded it by providing `new TypeReference&lt;Foo&lt;Bar&gt;&gt;() {}` as a parameter to my deserialized model reader method.","body":"Yup, as the comment above suggests, workarounded it by providing <code>new TypeReference&lt;Foo&lt;Bar&gt;&gt;() {}</code> as a parameter to my deserialized model reader method."},{"owner":{"account_id":881914,"reputation":1409,"user_id":303623,"display_name":"Rick O&#39;Shea"},"score":0,"creation_date":1663810285,"post_id":3437897,"comment_id":130328706,"body_markdown":"Perfect solution: https://iqcode.com/code/java/get-class-from-generic-type-java","body":"Perfect solution: <a href=\"https://iqcode.com/code/java/get-class-from-generic-type-java\" rel=\"nofollow noreferrer\">iqcode.com/code/java/get-class-from-generic-type-java</a>"}],"answers":[{"tags":[],"owner":{"account_id":103731,"reputation":53285,"user_id":277683,"accept_rate":68,"display_name":"Konrad Garus"},"down_vote_count":1,"up_vote_count":13,"is_accepted":false,"score":12,"last_activity_date":1443342198,"creation_date":1281337347,"answer_id":3437922,"question_id":3437897,"body_markdown":"You can&#39;t do it because of type erasure. See also Stack Overflow question *[Java generics - type erasure - when and what happens][1]*.\r\n\r\n  [1]: https://stackoverflow.com/questions/339699\r\n","title":"How do I get a class instance of generic type T?","body":"<p>You can't do it because of type erasure. See also Stack Overflow question <em><a href=\"https://stackoverflow.com/questions/339699\">Java generics - type erasure - when and what happens</a></em>.</p>\n"},{"tags":[],"owner":{"account_id":37976,"reputation":10329,"user_id":108781,"display_name":"Zsolt T&#246;r&#246;k"},"down_vote_count":14,"up_vote_count":707,"is_accepted":true,"score":693,"last_activity_date":1281337788,"creation_date":1281337395,"answer_id":3437930,"question_id":3437897,"body_markdown":"The short answer is, that there is no way to find out the runtime type of generic type parameters in Java. I suggest reading the chapter about type erasure in the [Java Tutorial][1] for more details.\r\n\r\nA popular solution to this is to pass the `Class` of the type parameter into the constructor of the generic type, e.g.\r\n\r\n    class Foo&lt;T&gt; {\r\n        final Class&lt;T&gt; typeParameterClass;\r\n\r\n        public Foo(Class&lt;T&gt; typeParameterClass) {\r\n            this.typeParameterClass = typeParameterClass;\r\n        }\r\n\r\n        public void bar() {\r\n            // you can access the typeParameterClass here and do whatever you like\r\n        }\r\n    }\r\n        \r\n\r\n  [1]: http://download.oracle.com/javase/tutorial/java/generics/erasure.html","title":"How do I get a class instance of generic type T?","body":"<p>The short answer is, that there is no way to find out the runtime type of generic type parameters in Java. I suggest reading the chapter about type erasure in the <a href=\"http://download.oracle.com/javase/tutorial/java/generics/erasure.html\" rel=\"noreferrer\">Java Tutorial</a> for more details.</p>\n\n<p>A popular solution to this is to pass the <code>Class</code> of the type parameter into the constructor of the generic type, e.g.</p>\n\n<pre><code>class Foo&lt;T&gt; {\n    final Class&lt;T&gt; typeParameterClass;\n\n    public Foo(Class&lt;T&gt; typeParameterClass) {\n        this.typeParameterClass = typeParameterClass;\n    }\n\n    public void bar() {\n        // you can access the typeParameterClass here and do whatever you like\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":36858,"reputation":113744,"user_id":105224,"accept_rate":73,"display_name":"Andreas Dolk"},"down_vote_count":3,"up_vote_count":47,"is_accepted":false,"score":44,"last_activity_date":1328809040,"creation_date":1281337670,"answer_id":3437957,"question_id":3437897,"body_markdown":"A standard approach/workaround/solution is to add a `class` object to the constructor(s), like:\r\n\r\n     public class Foo&lt;T&gt; {\r\n\r\n        private Class&lt;T&gt; type;\r\n        public Foo(Class&lt;T&gt; type) {\r\n          this.type = type;\r\n        }\r\n\r\n        public Class&lt;T&gt; getType() {\r\n          return type;\r\n        }\r\n\r\n        public T newInstance() {\r\n          return type.newInstance();\r\n        }\r\n     }","title":"How do I get a class instance of generic type T?","body":"<p>A standard approach/workaround/solution is to add a <code>class</code> object to the constructor(s), like:</p>\n\n<pre><code> public class Foo&lt;T&gt; {\n\n    private Class&lt;T&gt; type;\n    public Foo(Class&lt;T&gt; type) {\n      this.type = type;\n    }\n\n    public Class&lt;T&gt; getType() {\n      return type;\n    }\n\n    public T newInstance() {\n      return type.newInstance();\n    }\n }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":57768,"reputation":2919,"user_id":173074,"accept_rate":75,"display_name":"Ricky Clarkson"},"down_vote_count":0,"up_vote_count":10,"is_accepted":false,"score":10,"last_activity_date":1363266240,"creation_date":1281354442,"answer_id":3439659,"question_id":3437897,"body_markdown":"A better route than the Class the others suggested is to pass in an object that can do what you would have done with the Class, e.g., create a new instance.\r\n\r\n    interface Factory&lt;T&gt; {\r\n      T apply();\r\n    }\r\n\r\n    &lt;T&gt; void List&lt;T&gt; make10(Factory&lt;T&gt; factory) {\r\n      List&lt;T&gt; result = new ArrayList&lt;T&gt;();\r\n      for (int a = 0; a &lt; 10; a++)\r\n        result.add(factory.apply());\r\n      return result;\r\n    }\r\n\r\n    class FooFactory&lt;T&gt; implements Factory&lt;Foo&lt;T&gt;&gt; {\r\n      public Foo&lt;T&gt; apply() {\r\n        return new Foo&lt;T&gt;();\r\n      }\r\n    }\r\n\r\n    List&lt;Foo&lt;Integer&gt;&gt; foos = make10(new FooFactory&lt;Integer&gt;());\r\n\r\n\r\n","title":"How do I get a class instance of generic type T?","body":"<p>A better route than the Class the others suggested is to pass in an object that can do what you would have done with the Class, e.g., create a new instance.</p>\n\n<pre><code>interface Factory&lt;T&gt; {\n  T apply();\n}\n\n&lt;T&gt; void List&lt;T&gt; make10(Factory&lt;T&gt; factory) {\n  List&lt;T&gt; result = new ArrayList&lt;T&gt;();\n  for (int a = 0; a &lt; 10; a++)\n    result.add(factory.apply());\n  return result;\n}\n\nclass FooFactory&lt;T&gt; implements Factory&lt;Foo&lt;T&gt;&gt; {\n  public Foo&lt;T&gt; apply() {\n    return new Foo&lt;T&gt;();\n  }\n}\n\nList&lt;Foo&lt;Integer&gt;&gt; foos = make10(new FooFactory&lt;Integer&gt;());\n</code></pre>\n"},{"tags":[],"owner":{"account_id":117065,"reputation":3023,"user_id":306730,"display_name":"bert bruynooghe"},"down_vote_count":2,"up_vote_count":122,"is_accepted":false,"score":120,"last_activity_date":1502105879,"creation_date":1302933072,"answer_id":5684761,"question_id":3437897,"body_markdown":"There is a small loophole however: if you define your `Foo` class as abstract.\r\nThat would mean you have to instantiate you class as:\r\n\r\n    Foo&lt;MyType&gt; myFoo = new Foo&lt;MyType&gt;(){};\r\n(Note the double braces at the end.)\r\n\r\nNow you can retrieve the type of `T` at runtime:\r\n\r\n    Type mySuperclass = myFoo.getClass().getGenericSuperclass();\r\n    Type tType = ((ParameterizedType)mySuperclass).getActualTypeArguments()[0];\r\n\r\nNote however that `mySuperclass` has to be the superclass of the class definition actually defining the final type for `T`.\r\n\r\nIt is also not very elegant, but you have to decide whether you  prefer `new Foo&lt;MyType&gt;(){}` or `new Foo&lt;MyType&gt;(MyType.class);` in your code.\r\n\r\n----\r\n\r\nFor example:\r\n\r\n    import java.lang.reflect.ParameterizedType;\r\n    import java.lang.reflect.Type;\r\n    \r\n    import java.util.ArrayDeque;\r\n    import java.util.Deque;\r\n    import java.util.NoSuchElementException;\r\n\r\n    /**\r\n     * Captures and silently ignores stack exceptions upon popping.\r\n     */\r\n    public abstract class SilentStack&lt;E&gt; extends ArrayDeque&lt;E&gt; {\r\n      public E pop() {\r\n        try {\r\n          return super.pop();\r\n        }\r\n        catch( NoSuchElementException nsee ) {\r\n          return create();\r\n        }\r\n      }\r\n      \r\n      public E create() {\r\n        try {\r\n          Type sooper = getClass().getGenericSuperclass();\r\n          Type t = ((ParameterizedType)sooper).getActualTypeArguments()[ 0 ];\r\n    \r\n          return (E)(Class.forName( t.toString() ).newInstance());\r\n        }\r\n        catch( Exception e ) {\r\n          return null;\r\n        }\r\n      }\r\n    }\r\n\r\nThen:\r\n\r\n    public class Main {\r\n        // Note the braces...\r\n        private Deque&lt;String&gt; stack = new SilentStack&lt;String&gt;(){};\r\n    \r\n        public static void main( String args[] ) {\r\n          // Returns a new instance of String.\r\n          String s = stack.pop();\r\n          System.out.printf( &quot;s = &#39;%s&#39;\\n&quot;, s );\r\n        }\r\n    }\r\n\r\n","title":"How do I get a class instance of generic type T?","body":"<p>There is a small loophole however: if you define your <code>Foo</code> class as abstract.\nThat would mean you have to instantiate you class as:</p>\n\n<pre><code>Foo&lt;MyType&gt; myFoo = new Foo&lt;MyType&gt;(){};\n</code></pre>\n\n<p>(Note the double braces at the end.)</p>\n\n<p>Now you can retrieve the type of <code>T</code> at runtime:</p>\n\n<pre><code>Type mySuperclass = myFoo.getClass().getGenericSuperclass();\nType tType = ((ParameterizedType)mySuperclass).getActualTypeArguments()[0];\n</code></pre>\n\n<p>Note however that <code>mySuperclass</code> has to be the superclass of the class definition actually defining the final type for <code>T</code>.</p>\n\n<p>It is also not very elegant, but you have to decide whether you  prefer <code>new Foo&lt;MyType&gt;(){}</code> or <code>new Foo&lt;MyType&gt;(MyType.class);</code> in your code.</p>\n\n<hr>\n\n<p>For example:</p>\n\n<pre><code>import java.lang.reflect.ParameterizedType;\nimport java.lang.reflect.Type;\n\nimport java.util.ArrayDeque;\nimport java.util.Deque;\nimport java.util.NoSuchElementException;\n\n/**\n * Captures and silently ignores stack exceptions upon popping.\n */\npublic abstract class SilentStack&lt;E&gt; extends ArrayDeque&lt;E&gt; {\n  public E pop() {\n    try {\n      return super.pop();\n    }\n    catch( NoSuchElementException nsee ) {\n      return create();\n    }\n  }\n\n  public E create() {\n    try {\n      Type sooper = getClass().getGenericSuperclass();\n      Type t = ((ParameterizedType)sooper).getActualTypeArguments()[ 0 ];\n\n      return (E)(Class.forName( t.toString() ).newInstance());\n    }\n    catch( Exception e ) {\n      return null;\n    }\n  }\n}\n</code></pre>\n\n<p>Then:</p>\n\n<pre><code>public class Main {\n    // Note the braces...\n    private Deque&lt;String&gt; stack = new SilentStack&lt;String&gt;(){};\n\n    public static void main( String args[] ) {\n      // Returns a new instance of String.\n      String s = stack.pop();\n      System.out.printf( \"s = '%s'\\n\", s );\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":534856,"reputation":5625,"user_id":904624,"accept_rate":81,"display_name":"Christine"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1321012292,"creation_date":1321012292,"answer_id":8093592,"question_id":3437897,"body_markdown":"Actually, I suppose you have a field in your class of type T. If there&#39;s no field of type T, what&#39;s the point of having a generic Type? So, you can simply do an instanceof on that field.\r\n\r\nIn my case, I have a &lt;pre&gt;List&amp;lt;T&amp;gt; items;&lt;/pre&gt; in my class, and I check if the class type is &quot;Locality&quot; by\r\n&lt;pre&gt;if (items.get(0) instanceof Locality) ...\r\n&lt;/pre&gt;\r\nOf course, this only works if the total number of possible classes is limited.","title":"How do I get a class instance of generic type T?","body":"<p>Actually, I suppose you have a field in your class of type T. If there's no field of type T, what's the point of having a generic Type? So, you can simply do an instanceof on that field.</p>\n\n<p>In my case, I have a <pre>List&lt;T&gt; items;</pre> in my class, and I check if the class type is \"Locality\" by</p>\n\n<pre>if (items.get(0) instanceof Locality) ...\n</pre>\n\n<p>Of course, this only works if the total number of possible classes is limited.</p>\n"},{"tags":[],"owner":{"account_id":1230408,"reputation":6991,"user_id":1195139,"accept_rate":76,"display_name":"Ben Thurley"},"down_vote_count":3,"up_vote_count":316,"is_accepted":false,"score":313,"last_activity_date":1689276562,"creation_date":1328739249,"answer_id":9202329,"question_id":3437897,"body_markdown":"I was looking for a way to do this myself without adding an extra dependency to the classpath. After some investigation I found that it ***is*** possible as long as you have a generic supertype with a non-generic subclass. This was OK for me as I was working with a [DAO][1] layer with a generic layer supertype. If this fits your scenario then it&#39;s the neatest approach IMHO.\r\n\r\nMost generics use cases I&#39;ve come across have some kind of generic supertype e.g. `List&lt;T&gt;` for `ArrayList&lt;T&gt;` or `GenericDAO&lt;T&gt;` for `DAO&lt;T&gt;`, etc.\r\n\r\n### Pure Java solution\r\n\r\nThe article *[Accessing generic types at runtime in Java][2]* explains how you can do it using pure Java.\r\n\r\n    @SuppressWarnings(&quot;unchecked&quot;)\r\n    public Class reflectClassType() {\r\n      return ((Class) ((ParameterizedType) getClass()\r\n          .getGenericSuperclass()).getActualTypeArguments()[0]);\r\n    }\r\n\r\nThere are several limitations with this code. It will not work in all cases involving several levels of abstraction, or when your type is an array (e.g. `int[]`). For a more complete solution that extends this for more cases, [see this article](https://www.artima.com/weblogs/viewpost.jsp?thread=208860).\r\n\r\nNote again that this method only works with a non-generic/raw subclass. If you try to do this with a generic class, the type arguments will be unresolved, generic `TypeVariableImpl` objects still, whose class is `null`. For example:\r\n\r\n```java\r\nclass Generic&lt;T&gt;{\r\n    @SuppressWarnings(&quot;unchecked&quot;)\r\n    public Class reflectClassType() {\r\n      return ((Class) ((ParameterizedType) getClass()\r\n          .getGenericSuperclass()).getActualTypeArguments()[0]);\r\n    }\r\n}\r\n\r\nclass ChildGeneric&lt;T&gt; extends Generic&lt;T&gt;{}\r\nclass ChildString extends Generic&lt;String&gt;{}\r\n\r\n// Error! Won&#39;t work, since the subclass is generic\r\nnew ChildGeneric&lt;String&gt;().reflectClassType();\r\n// Works; we create an anonymous, trivial, non-generic subclass\r\nnew ChildGeneric&lt;String&gt;(){}.reflectClsasType();\r\n// Works; we create an explicit non-generic subclass\r\nnew ChildString().reflectClassType(); // okay\r\n```\r\n\r\n### Spring solution\r\n\r\n[Spring][3] provides a utility class [GenericTypeResolver](https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/core/GenericTypeResolver.html), which implements a more robust version of this technique. It comes with its own subtle limitations. In general, it will only work if the called for a non-generic class.\r\n\r\nMy project was using Spring so is the best approach for me as it looks neatest. I guess if you weren&#39;t using Spring you could write your own utility method.\r\n\r\n    import org.springframework.core.GenericTypeResolver;\r\n\r\n    public abstract class AbstractHibernateDao&lt;T extends DomainObject&gt; implements DataAccessObject&lt;T&gt;\r\n    {\r\n\r\n        @Autowired\r\n        private SessionFactory sessionFactory;\r\n\r\n        private final Class&lt;T&gt; genericType;\r\n\r\n        private final String RECORD_COUNT_HQL;\r\n        private final String FIND_ALL_HQL;\r\n\r\n        @SuppressWarnings(&quot;unchecked&quot;)\r\n        public AbstractHibernateDao()\r\n        {\r\n            this.genericType = (Class&lt;T&gt;) GenericTypeResolver.resolveTypeArgument(getClass(), AbstractHibernateDao.class);\r\n            this.RECORD_COUNT_HQL = &quot;select count(*) from &quot; + this.genericType.getName();\r\n            this.FIND_ALL_HQL = &quot;from &quot; + this.genericType.getName() + &quot; t &quot;;\r\n        }\r\n\r\n### Full code example\r\n\r\nSome people are struggling in the comments to get this working so I wrote a small application to show both approaches in action.\r\nhttps://github.com/benthurley82/generic-type-resolver-test\r\n\r\nNote that in this code, the non-generic `Foo` subclass has a generic superclass `AbstractFoo`:\r\n\r\n```java\r\npublic class Foo extends AbstractFoo&lt;GenericType&gt;\r\n```\r\n\r\nwhich is what allows this method to work.\r\n\r\n  [1]: http://en.wikipedia.org/wiki/Data_access_object\r\n  [2]: https://web.archive.org/web/20180124022935/http://blog.xebia.com/acessing-generic-types-at-runtime-in-java/\r\n  [3]: http://en.wikipedia.org/wiki/Spring_Framework\r\n","title":"How do I get a class instance of generic type T?","body":"<p>I was looking for a way to do this myself without adding an extra dependency to the classpath. After some investigation I found that it <em><strong>is</strong></em> possible as long as you have a generic supertype with a non-generic subclass. This was OK for me as I was working with a <a href=\"http://en.wikipedia.org/wiki/Data_access_object\" rel=\"nofollow noreferrer\">DAO</a> layer with a generic layer supertype. If this fits your scenario then it's the neatest approach IMHO.</p>\n<p>Most generics use cases I've come across have some kind of generic supertype e.g. <code>List&lt;T&gt;</code> for <code>ArrayList&lt;T&gt;</code> or <code>GenericDAO&lt;T&gt;</code> for <code>DAO&lt;T&gt;</code>, etc.</p>\n<h3>Pure Java solution</h3>\n<p>The article <em><a href=\"https://web.archive.org/web/20180124022935/http://blog.xebia.com/acessing-generic-types-at-runtime-in-java/\" rel=\"nofollow noreferrer\">Accessing generic types at runtime in Java</a></em> explains how you can do it using pure Java.</p>\n<pre><code>@SuppressWarnings(&quot;unchecked&quot;)\npublic Class reflectClassType() {\n  return ((Class) ((ParameterizedType) getClass()\n      .getGenericSuperclass()).getActualTypeArguments()[0]);\n}\n</code></pre>\n<p>There are several limitations with this code. It will not work in all cases involving several levels of abstraction, or when your type is an array (e.g. <code>int[]</code>). For a more complete solution that extends this for more cases, <a href=\"https://www.artima.com/weblogs/viewpost.jsp?thread=208860\" rel=\"nofollow noreferrer\">see this article</a>.</p>\n<p>Note again that this method only works with a non-generic/raw subclass. If you try to do this with a generic class, the type arguments will be unresolved, generic <code>TypeVariableImpl</code> objects still, whose class is <code>null</code>. For example:</p>\n<pre class=\"lang-java prettyprint-override\"><code>class Generic&lt;T&gt;{\n    @SuppressWarnings(&quot;unchecked&quot;)\n    public Class reflectClassType() {\n      return ((Class) ((ParameterizedType) getClass()\n          .getGenericSuperclass()).getActualTypeArguments()[0]);\n    }\n}\n\nclass ChildGeneric&lt;T&gt; extends Generic&lt;T&gt;{}\nclass ChildString extends Generic&lt;String&gt;{}\n\n// Error! Won't work, since the subclass is generic\nnew ChildGeneric&lt;String&gt;().reflectClassType();\n// Works; we create an anonymous, trivial, non-generic subclass\nnew ChildGeneric&lt;String&gt;(){}.reflectClsasType();\n// Works; we create an explicit non-generic subclass\nnew ChildString().reflectClassType(); // okay\n</code></pre>\n<h3>Spring solution</h3>\n<p><a href=\"http://en.wikipedia.org/wiki/Spring_Framework\" rel=\"nofollow noreferrer\">Spring</a> provides a utility class <a href=\"https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/core/GenericTypeResolver.html\" rel=\"nofollow noreferrer\">GenericTypeResolver</a>, which implements a more robust version of this technique. It comes with its own subtle limitations. In general, it will only work if the called for a non-generic class.</p>\n<p>My project was using Spring so is the best approach for me as it looks neatest. I guess if you weren't using Spring you could write your own utility method.</p>\n<pre><code>import org.springframework.core.GenericTypeResolver;\n\npublic abstract class AbstractHibernateDao&lt;T extends DomainObject&gt; implements DataAccessObject&lt;T&gt;\n{\n\n    @Autowired\n    private SessionFactory sessionFactory;\n\n    private final Class&lt;T&gt; genericType;\n\n    private final String RECORD_COUNT_HQL;\n    private final String FIND_ALL_HQL;\n\n    @SuppressWarnings(&quot;unchecked&quot;)\n    public AbstractHibernateDao()\n    {\n        this.genericType = (Class&lt;T&gt;) GenericTypeResolver.resolveTypeArgument(getClass(), AbstractHibernateDao.class);\n        this.RECORD_COUNT_HQL = &quot;select count(*) from &quot; + this.genericType.getName();\n        this.FIND_ALL_HQL = &quot;from &quot; + this.genericType.getName() + &quot; t &quot;;\n    }\n</code></pre>\n<h3>Full code example</h3>\n<p>Some people are struggling in the comments to get this working so I wrote a small application to show both approaches in action.\n<a href=\"https://github.com/benthurley82/generic-type-resolver-test\" rel=\"nofollow noreferrer\">https://github.com/benthurley82/generic-type-resolver-test</a></p>\n<p>Note that in this code, the non-generic <code>Foo</code> subclass has a generic superclass <code>AbstractFoo</code>:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class Foo extends AbstractFoo&lt;GenericType&gt;\n</code></pre>\n<p>which is what allows this method to work.</p>\n"},{"tags":[],"owner":{"account_id":1179380,"reputation":1392,"user_id":1154664,"accept_rate":75,"display_name":"user1154664"},"down_vote_count":0,"up_vote_count":14,"is_accepted":false,"score":14,"last_activity_date":1402011398,"creation_date":1350787269,"answer_id":12994468,"question_id":3437897,"body_markdown":"I had this problem in an abstract generic class. In this particular case, the solution is simpler:\r\n\r\n    abstract class Foo&lt;T&gt; {\r\n        abstract Class&lt;T&gt; getTClass();\r\n        //...\r\n    }\r\n\r\nand later on the derived class:\r\n\r\n    class Bar extends Foo&lt;Whatever&gt; {\r\n    \t@Override\r\n    \tClass&lt;T&gt; getTClass() {\r\n    \t\treturn Whatever.class;\r\n    \t}\r\n    }","title":"How do I get a class instance of generic type T?","body":"<p>I had this problem in an abstract generic class. In this particular case, the solution is simpler:</p>\n\n<pre><code>abstract class Foo&lt;T&gt; {\n    abstract Class&lt;T&gt; getTClass();\n    //...\n}\n</code></pre>\n\n<p>and later on the derived class:</p>\n\n<pre><code>class Bar extends Foo&lt;Whatever&gt; {\n    @Override\n    Class&lt;T&gt; getTClass() {\n        return Whatever.class;\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":105176,"reputation":13693,"user_id":280783,"accept_rate":91,"display_name":"Peter Tseng"},"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1583766903,"creation_date":1358457752,"answer_id":14388385,"question_id":3437897,"body_markdown":"It&#39;s possible:\r\n\r\n    class Foo&lt;T&gt; {\r\n      Class&lt;T&gt; clazz = (Class&lt;T&gt;) DAOUtil.getTypeArguments(Foo.class, this.getClass()).get(0);\r\n    }\r\n\r\nYou need two functions from [hibernate-generic-dao/blob/master/dao/src/main/java/com/googlecode/genericdao/dao/DAOUtil.java][1].\r\n\r\nFor more explanations, see *[Reflecting generics][2]*.\r\n\r\n  [1]: https://github.com/based2/hibernate-generic-dao/blob/master/dao/src/main/java/com/googlecode/genericdao/dao/DAOUtil.java\r\n\r\n  [2]: http://www.artima.com/weblogs/viewpost.jsp?thread=208860\r\n","title":"How do I get a class instance of generic type T?","body":"<p>It's possible:</p>\n\n<pre><code>class Foo&lt;T&gt; {\n  Class&lt;T&gt; clazz = (Class&lt;T&gt;) DAOUtil.getTypeArguments(Foo.class, this.getClass()).get(0);\n}\n</code></pre>\n\n<p>You need two functions from <a href=\"https://github.com/based2/hibernate-generic-dao/blob/master/dao/src/main/java/com/googlecode/genericdao/dao/DAOUtil.java\" rel=\"nofollow noreferrer\">hibernate-generic-dao/blob/master/dao/src/main/java/com/googlecode/genericdao/dao/DAOUtil.java</a>.</p>\n\n<p>For more explanations, see <em><a href=\"http://www.artima.com/weblogs/viewpost.jsp?thread=208860\" rel=\"nofollow noreferrer\">Reflecting generics</a></em>.</p>\n"},{"tags":[],"owner":{"account_id":1699585,"reputation":5882,"user_id":1560067,"accept_rate":95,"display_name":"droidpl"},"down_vote_count":0,"up_vote_count":23,"is_accepted":false,"score":23,"last_activity_date":1419417127,"creation_date":1395876037,"answer_id":22675121,"question_id":3437897,"body_markdown":"Imagine you have an abstract superclass that is generic:\r\n\r\n    public abstract class Foo&lt;? extends T&gt; {}\r\n\r\nAnd then you have a second class that extends Foo with a generic Bar that extends T:\r\n\r\n    public class Second extends Foo&lt;Bar&gt; {}\r\n\r\nYou can get the class `Bar.class` in the Foo class by selecting the `Type` (from bert bruynooghe answer) and infering it using `Class` instance:\r\n\r\n    Type mySuperclass = myFoo.getClass().getGenericSuperclass();\r\n    Type tType = ((ParameterizedType)mySuperclass).getActualTypeArguments()[0];\r\n    //Parse it as String\r\n    String className = tType.toString().split(&quot; &quot;)[1];\r\n    Class clazz = Class.forName(className);\r\n\r\nYou have to note this operation is not ideal, so it is a good idea to cache the computed value to avoid multiple calculations on this. One of the typical uses is in generic DAO implementation. \r\n\r\nThe final implementation:\r\n\r\n    public abstract class Foo&lt;T&gt; {\r\n    \r\n        private Class&lt;T&gt; inferedClass;\r\n    \r\n        public Class&lt;T&gt; getGenericClass(){\r\n            if(inferedClass == null){\r\n                Type mySuperclass = getClass().getGenericSuperclass();\r\n                Type tType = ((ParameterizedType)mySuperclass).getActualTypeArguments()[0];\r\n                String className = tType.toString().split(&quot; &quot;)[1];\r\n                inferedClass = Class.forName(className);\r\n            }\r\n            return inferedClass;\r\n        }\r\n    }\r\n\r\nThe value returned is Bar.class when invoked from Foo class in other function or from Bar class.","title":"How do I get a class instance of generic type T?","body":"<p>Imagine you have an abstract superclass that is generic:</p>\n\n<pre><code>public abstract class Foo&lt;? extends T&gt; {}\n</code></pre>\n\n<p>And then you have a second class that extends Foo with a generic Bar that extends T:</p>\n\n<pre><code>public class Second extends Foo&lt;Bar&gt; {}\n</code></pre>\n\n<p>You can get the class <code>Bar.class</code> in the Foo class by selecting the <code>Type</code> (from bert bruynooghe answer) and infering it using <code>Class</code> instance:</p>\n\n<pre><code>Type mySuperclass = myFoo.getClass().getGenericSuperclass();\nType tType = ((ParameterizedType)mySuperclass).getActualTypeArguments()[0];\n//Parse it as String\nString className = tType.toString().split(\" \")[1];\nClass clazz = Class.forName(className);\n</code></pre>\n\n<p>You have to note this operation is not ideal, so it is a good idea to cache the computed value to avoid multiple calculations on this. One of the typical uses is in generic DAO implementation. </p>\n\n<p>The final implementation:</p>\n\n<pre><code>public abstract class Foo&lt;T&gt; {\n\n    private Class&lt;T&gt; inferedClass;\n\n    public Class&lt;T&gt; getGenericClass(){\n        if(inferedClass == null){\n            Type mySuperclass = getClass().getGenericSuperclass();\n            Type tType = ((ParameterizedType)mySuperclass).getActualTypeArguments()[0];\n            String className = tType.toString().split(\" \")[1];\n            inferedClass = Class.forName(className);\n        }\n        return inferedClass;\n    }\n}\n</code></pre>\n\n<p>The value returned is Bar.class when invoked from Foo class in other function or from Bar class.</p>\n"},{"tags":[],"owner":{"account_id":536658,"reputation":6119,"user_id":905544,"display_name":"Abel ANEIROS"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1396442755,"creation_date":1396442755,"answer_id":22811963,"question_id":3437897,"body_markdown":"       \r\n       public &lt;T&gt; T yourMethodSignature(Class&lt;T&gt; type) {\r\n           \r\n            // get some object and check the type match the given type\r\n            Object result = ...            \r\n\r\n            if (type.isAssignableFrom(result.getClass())) {\r\n                return (T)result;\r\n            } else {\r\n                // handle the error\r\n            }\r\n       }\r\n","title":"How do I get a class instance of generic type T?","body":"<pre><code>   public &lt;T&gt; T yourMethodSignature(Class&lt;T&gt; type) {\n\n        // get some object and check the type match the given type\n        Object result = ...            \n\n        if (type.isAssignableFrom(result.getClass())) {\n            return (T)result;\n        } else {\n            // handle the error\n        }\n   }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5964676,"reputation":430,"user_id":4688730,"display_name":"Yaroslav Kovbas"},"down_vote_count":2,"up_vote_count":25,"is_accepted":false,"score":23,"last_activity_date":1529225759,"creation_date":1448881772,"answer_id":33997207,"question_id":3437897,"body_markdown":"Here is a working solution:\r\n\r\n    @SuppressWarnings(&quot;unchecked&quot;)\r\n    private&#160;Class&lt;T&gt; getGenericTypeClass() {\r\n    &#160;&#160;&#160;&#160;try&#160;{\r\n    &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;String className = ((ParameterizedType) getClass().getGenericSuperclass()).getActualTypeArguments()[0].getTypeName();\r\n    &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;Class&lt;?&gt; clazz = Class.forName(className);\r\n    &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;return&#160;(Class&lt;T&gt;) clazz;\r\n    &#160;&#160;&#160;&#160;}&#160;catch&#160;(Exception e) {\r\n    &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;throw new&#160;IllegalStateException(&quot;Class is not parametrized with generic type!!! Please use extends &lt;&gt; &quot;);\r\n    &#160;&#160;&#160;&#160;}\r\n    } \r\n\r\nNOTES:\r\n**Can be used only as superclass**\r\n\r\n 1. Has to be extended with typed class  (`Child extends Generic&lt;Integer&gt;`)\r\n\r\n***OR***\r\n\r\n 2. Has to be created as anonymous implementation (`new Generic&lt;Integer&gt;() {};`)   ","title":"How do I get a class instance of generic type T?","body":"<p>Here is a working solution:</p>\n\n<pre><code>@SuppressWarnings(\"unchecked\")\nprivate Class&lt;T&gt; getGenericTypeClass() {\n    try {\n        String className = ((ParameterizedType) getClass().getGenericSuperclass()).getActualTypeArguments()[0].getTypeName();\n        Class&lt;?&gt; clazz = Class.forName(className);\n        return (Class&lt;T&gt;) clazz;\n    } catch (Exception e) {\n        throw new IllegalStateException(\"Class is not parametrized with generic type!!! Please use extends &lt;&gt; \");\n    }\n} \n</code></pre>\n\n<p>NOTES:\n<strong>Can be used only as superclass</strong></p>\n\n<ol>\n<li>Has to be extended with typed class  (<code>Child extends Generic&lt;Integer&gt;</code>)</li>\n</ol>\n\n<p><strong><em>OR</em></strong></p>\n\n<ol start=\"2\">\n<li>Has to be created as anonymous implementation (<code>new Generic&lt;Integer&gt;() {};</code>)   </li>\n</ol>\n"},{"tags":[],"owner":{"account_id":5100890,"reputation":2796,"user_id":4090550,"display_name":"Anil Agrawal"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1480934637,"creation_date":1480934637,"answer_id":40972358,"question_id":3437897,"body_markdown":"If you are extending or implementing any class/interface that are using generics , you may get the Generic Type of parent class/interface, without modifying any existing class/interface at all.\r\n\r\nThere could be three possibilities, \r\n\r\n**Case 1**\r\nWhen your class is extending a class that is using Generics\r\n\r\n    public class TestGenerics {\r\n    \tpublic static void main(String[] args) {\r\n    \t\tType type = TestMySuperGenericType.class.getGenericSuperclass();\r\n    \t\tType[] gTypes = ((ParameterizedType)type).getActualTypeArguments();\r\n\t\t\tfor(Type gType : gTypes){\r\n    \t\t\tSystem.out.println(&quot;Generic type:&quot;+gType.toString());\r\n    \t\t}\r\n    \t}\r\n    }\r\n\r\n    class GenericClass&lt;T&gt; {\r\n    \tpublic void print(T obj){};\r\n    }\r\n\r\n    class TestMySuperGenericType extends GenericClass&lt;Integer&gt; {\r\n    }\r\n\r\n**Case 2**\r\nWhen your class is implementing an interface that is using Generics\r\n\r\n    public class TestGenerics {\r\n        public static void main(String[] args) {\r\n\t\t\tType[] interfaces = TestMySuperGenericType.class.getGenericInterfaces();\r\n            for(Type type : interfaces){\r\n\t\t\t\tType[] gTypes = ((ParameterizedType)type).getActualTypeArguments();\r\n\t\t\t\tfor(Type gType : gTypes){\r\n\t\t\t\t\tSystem.out.println(&quot;Generic type:&quot;+gType.toString());\r\n\t\t\t\t}\r\n            }\r\n        }\r\n    }\r\n\r\n    interface GenericClass&lt;T&gt; {\r\n        public void print(T obj);\r\n    }\r\n\r\n    class TestMySuperGenericType implements GenericClass&lt;Integer&gt; {\r\n    \tpublic void print(Integer obj){}\r\n    }\r\n\r\n**Case 3**\r\nWhen your interface is extending an interface that is using Generics\r\n\r\n    public class TestGenerics {\r\n        public static void main(String[] args) {\r\n\t\t\tType[] interfaces = TestMySuperGenericType.class.getGenericInterfaces();\r\n            for(Type type : interfaces){\r\n\t\t\t\tType[] gTypes = ((ParameterizedType)type).getActualTypeArguments();\r\n\t\t\t\tfor(Type gType : gTypes){\r\n\t\t\t\t\tSystem.out.println(&quot;Generic type:&quot;+gType.toString());\r\n\t\t\t\t}\r\n            }\r\n        }\r\n    }\r\n\r\n    interface GenericClass&lt;T&gt; {\r\n        public void print(T obj);\r\n    }\r\n\r\n    interface TestMySuperGenericType extends GenericClass&lt;Integer&gt; {\r\n    }","title":"How do I get a class instance of generic type T?","body":"<p>If you are extending or implementing any class/interface that are using generics , you may get the Generic Type of parent class/interface, without modifying any existing class/interface at all.</p>\n\n<p>There could be three possibilities, </p>\n\n<p><strong>Case 1</strong>\nWhen your class is extending a class that is using Generics</p>\n\n<pre><code>public class TestGenerics {\n    public static void main(String[] args) {\n        Type type = TestMySuperGenericType.class.getGenericSuperclass();\n        Type[] gTypes = ((ParameterizedType)type).getActualTypeArguments();\n        for(Type gType : gTypes){\n            System.out.println(\"Generic type:\"+gType.toString());\n        }\n    }\n}\n\nclass GenericClass&lt;T&gt; {\n    public void print(T obj){};\n}\n\nclass TestMySuperGenericType extends GenericClass&lt;Integer&gt; {\n}\n</code></pre>\n\n<p><strong>Case 2</strong>\nWhen your class is implementing an interface that is using Generics</p>\n\n<pre><code>public class TestGenerics {\n    public static void main(String[] args) {\n        Type[] interfaces = TestMySuperGenericType.class.getGenericInterfaces();\n        for(Type type : interfaces){\n            Type[] gTypes = ((ParameterizedType)type).getActualTypeArguments();\n            for(Type gType : gTypes){\n                System.out.println(\"Generic type:\"+gType.toString());\n            }\n        }\n    }\n}\n\ninterface GenericClass&lt;T&gt; {\n    public void print(T obj);\n}\n\nclass TestMySuperGenericType implements GenericClass&lt;Integer&gt; {\n    public void print(Integer obj){}\n}\n</code></pre>\n\n<p><strong>Case 3</strong>\nWhen your interface is extending an interface that is using Generics</p>\n\n<pre><code>public class TestGenerics {\n    public static void main(String[] args) {\n        Type[] interfaces = TestMySuperGenericType.class.getGenericInterfaces();\n        for(Type type : interfaces){\n            Type[] gTypes = ((ParameterizedType)type).getActualTypeArguments();\n            for(Type gType : gTypes){\n                System.out.println(\"Generic type:\"+gType.toString());\n            }\n        }\n    }\n}\n\ninterface GenericClass&lt;T&gt; {\n    public void print(T obj);\n}\n\ninterface TestMySuperGenericType extends GenericClass&lt;Integer&gt; {\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3457181,"reputation":762,"user_id":2895411,"display_name":"nikolai.serdiuk"},"down_vote_count":4,"up_vote_count":0,"is_accepted":false,"score":-4,"last_activity_date":1498553127,"creation_date":1498553127,"answer_id":44775848,"question_id":3437897,"body_markdown":"I&#39;m using workaround for this:\r\n\r\n    class MyClass extends Foo&lt;T&gt; {\r\n    ....\r\n    }\r\n    \r\n    MyClass myClassInstance = MyClass.class.newInstance();","title":"How do I get a class instance of generic type T?","body":"<p>I'm using workaround for this:</p>\n\n<pre><code>class MyClass extends Foo&lt;T&gt; {\n....\n}\n\nMyClass myClassInstance = MyClass.class.newInstance();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3328167,"reputation":535,"user_id":2797663,"accept_rate":100,"display_name":"Riaan Schutte"},"down_vote_count":1,"up_vote_count":3,"is_accepted":false,"score":2,"last_activity_date":1505876484,"creation_date":1505875444,"answer_id":46312408,"question_id":3437897,"body_markdown":"As explained in other answers, to use this `ParameterizedType` approach, you need to extend the class, but that seems like extra work to make a whole new class that extends it...\r\n\r\nSo, making the class abstract it forces you to extend it, thus satisfying the subclassing requirement. (using lombok&#39;s @Getter).\r\n\r\n    @Getter\r\n    public abstract class ConfigurationDefinition&lt;T&gt; {\r\n    \r\n        private Class&lt;T&gt; type;\r\n        ...\r\n\r\n        public ConfigurationDefinition(...) {\r\n            this.type = (Class&lt;T&gt;) ((ParameterizedType) this.getClass().getGenericSuperclass()).getActualTypeArguments()[0];\r\n            ...\r\n        }\r\n    }\r\n\r\nNow to extend it without defining a new class. (Note the {} on the end... extended, but don&#39;t overwrite anything - unless you want to).\r\n\r\n    private ConfigurationDefinition&lt;String&gt; myConfigA = new ConfigurationDefinition&lt;String&gt;(...){};\r\n    private ConfigurationDefinition&lt;File&gt; myConfigB = new ConfigurationDefinition&lt;File&gt;(...){};\r\n    ...\r\n    Class stringType = myConfigA.getType();\r\n    Class fileType = myConfigB.getType();","title":"How do I get a class instance of generic type T?","body":"<p>As explained in other answers, to use this <code>ParameterizedType</code> approach, you need to extend the class, but that seems like extra work to make a whole new class that extends it...</p>\n\n<p>So, making the class abstract it forces you to extend it, thus satisfying the subclassing requirement. (using lombok's @Getter).</p>\n\n<pre><code>@Getter\npublic abstract class ConfigurationDefinition&lt;T&gt; {\n\n    private Class&lt;T&gt; type;\n    ...\n\n    public ConfigurationDefinition(...) {\n        this.type = (Class&lt;T&gt;) ((ParameterizedType) this.getClass().getGenericSuperclass()).getActualTypeArguments()[0];\n        ...\n    }\n}\n</code></pre>\n\n<p>Now to extend it without defining a new class. (Note the {} on the end... extended, but don't overwrite anything - unless you want to).</p>\n\n<pre><code>private ConfigurationDefinition&lt;String&gt; myConfigA = new ConfigurationDefinition&lt;String&gt;(...){};\nprivate ConfigurationDefinition&lt;File&gt; myConfigB = new ConfigurationDefinition&lt;File&gt;(...){};\n...\nClass stringType = myConfigA.getType();\nClass fileType = myConfigB.getType();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4835872,"reputation":2833,"user_id":3902603,"accept_rate":76,"display_name":"unknown6656"},"down_vote_count":0,"up_vote_count":13,"is_accepted":false,"score":13,"last_activity_date":1661069200,"creation_date":1510035634,"answer_id":47151206,"question_id":3437897,"body_markdown":"# Actually, it _is_ possible (_without_ external libraries!)\r\n\r\nThe following is my (ugly, yet effective) solution for this problem:\r\n\r\n    import java.lang.reflect.TypeVariable;\r\n\r\n\r\n    public static &lt;T&gt; Class&lt;T&gt; getGenericClass() {\r\n        __&lt;T&gt; instance = new __&lt;T&gt;();\r\n        TypeVariable&lt;?&gt;[] parameters = instance.getClass().getTypeParameters(); \r\n\r\n        return (Class&lt;T&gt;)parameters[0].getClass();\r\n    }\r\n    \r\n    // Generic helper class which (only) provides type information. This avoids the\r\n    //   usage of a local variable of type T, which would have to be initialized.\r\n    private final class __&lt;T&gt; {\r\n        private __() { }\r\n    }","title":"How do I get a class instance of generic type T?","body":"<h1>Actually, it <em>is</em> possible (<em>without</em> external libraries!)</h1>\n<p>The following is my (ugly, yet effective) solution for this problem:</p>\n<pre><code>import java.lang.reflect.TypeVariable;\n\n\npublic static &lt;T&gt; Class&lt;T&gt; getGenericClass() {\n    __&lt;T&gt; instance = new __&lt;T&gt;();\n    TypeVariable&lt;?&gt;[] parameters = instance.getClass().getTypeParameters(); \n\n    return (Class&lt;T&gt;)parameters[0].getClass();\n}\n\n// Generic helper class which (only) provides type information. This avoids the\n//   usage of a local variable of type T, which would have to be initialized.\nprivate final class __&lt;T&gt; {\n    private __() { }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":12608377,"reputation":343,"user_id":9168450,"display_name":"Juan Urrego"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1514989261,"creation_date":1514988646,"answer_id":48079056,"question_id":3437897,"body_markdown":"I found a generic and simple way to do that. In my class I created a method that returns the generic type according to it&#39;s position in the class definition. Let&#39;s assume a class definition like this:\r\n\r\n    public class MyClass&lt;A, B, C&gt; {\r\n    \r\n    }\r\n\r\nNow let&#39;s create some attributes to persist the types:\r\n\r\n    public class MyClass&lt;A, B, C&gt; {\r\n    \r\n        private Class&lt;A&gt; aType;\r\n    \r\n        private Class&lt;B&gt; bType;\r\n    \r\n        private Class&lt;C&gt; cType;\r\n    \r\n    // Getters and setters (not necessary if you are going to use them internally)\r\n        \r\n        } \r\n\r\nThen you can create a generic method that returns the type based on the index of the generic definition:\r\n\r\n       /**\r\n         * Returns a {@link Type} object to identify generic types\r\n         * @return type\r\n         */\r\n        private Type getGenericClassType(int index) {\r\n            // To make it use generics without supplying the class type\r\n            Type type = getClass().getGenericSuperclass();\r\n    \r\n            while (!(type instanceof ParameterizedType)) {\r\n                if (type instanceof ParameterizedType) {\r\n                    type = ((Class&lt;?&gt;) ((ParameterizedType) type).getRawType()).getGenericSuperclass();\r\n                } else {\r\n                    type = ((Class&lt;?&gt;) type).getGenericSuperclass();\r\n                }\r\n            }\r\n    \r\n            return ((ParameterizedType) type).getActualTypeArguments()[index];\r\n        }\r\nFinally, in the constructor just call the method and send the index for each type. The complete code should look like:\r\n\r\n    public class MyClass&lt;A, B, C&gt; {\r\n    \r\n        private Class&lt;A&gt; aType;\r\n    \r\n        private Class&lt;B&gt; bType;\r\n    \r\n        private Class&lt;C&gt; cType;\r\n    \r\n    \r\n        public MyClass() {\r\n          this.aType = (Class&lt;A&gt;) getGenericClassType(0);\r\n          this.bType = (Class&lt;B&gt;) getGenericClassType(1);\r\n          this.cType = (Class&lt;C&gt;) getGenericClassType(2);\r\n        }\r\n\r\n       /**\r\n         * Returns a {@link Type} object to identify generic types\r\n         * @return type\r\n         */\r\n        private Type getGenericClassType(int index) {\r\n            \r\n            Type type = getClass().getGenericSuperclass();\r\n    \r\n            while (!(type instanceof ParameterizedType)) {\r\n                if (type instanceof ParameterizedType) {\r\n                    type = ((Class&lt;?&gt;) ((ParameterizedType) type).getRawType()).getGenericSuperclass();\r\n                } else {\r\n                    type = ((Class&lt;?&gt;) type).getGenericSuperclass();\r\n                }\r\n            }\r\n    \r\n            return ((ParameterizedType) type).getActualTypeArguments()[index];\r\n        }\r\n    }\r\n\r\n","title":"How do I get a class instance of generic type T?","body":"<p>I found a generic and simple way to do that. In my class I created a method that returns the generic type according to it's position in the class definition. Let's assume a class definition like this:</p>\n\n<pre><code>public class MyClass&lt;A, B, C&gt; {\n\n}\n</code></pre>\n\n<p>Now let's create some attributes to persist the types:</p>\n\n<pre><code>public class MyClass&lt;A, B, C&gt; {\n\n    private Class&lt;A&gt; aType;\n\n    private Class&lt;B&gt; bType;\n\n    private Class&lt;C&gt; cType;\n\n// Getters and setters (not necessary if you are going to use them internally)\n\n    } \n</code></pre>\n\n<p>Then you can create a generic method that returns the type based on the index of the generic definition:</p>\n\n<pre><code>   /**\n     * Returns a {@link Type} object to identify generic types\n     * @return type\n     */\n    private Type getGenericClassType(int index) {\n        // To make it use generics without supplying the class type\n        Type type = getClass().getGenericSuperclass();\n\n        while (!(type instanceof ParameterizedType)) {\n            if (type instanceof ParameterizedType) {\n                type = ((Class&lt;?&gt;) ((ParameterizedType) type).getRawType()).getGenericSuperclass();\n            } else {\n                type = ((Class&lt;?&gt;) type).getGenericSuperclass();\n            }\n        }\n\n        return ((ParameterizedType) type).getActualTypeArguments()[index];\n    }\n</code></pre>\n\n<p>Finally, in the constructor just call the method and send the index for each type. The complete code should look like:</p>\n\n<pre><code>public class MyClass&lt;A, B, C&gt; {\n\n    private Class&lt;A&gt; aType;\n\n    private Class&lt;B&gt; bType;\n\n    private Class&lt;C&gt; cType;\n\n\n    public MyClass() {\n      this.aType = (Class&lt;A&gt;) getGenericClassType(0);\n      this.bType = (Class&lt;B&gt;) getGenericClassType(1);\n      this.cType = (Class&lt;C&gt;) getGenericClassType(2);\n    }\n\n   /**\n     * Returns a {@link Type} object to identify generic types\n     * @return type\n     */\n    private Type getGenericClassType(int index) {\n\n        Type type = getClass().getGenericSuperclass();\n\n        while (!(type instanceof ParameterizedType)) {\n            if (type instanceof ParameterizedType) {\n                type = ((Class&lt;?&gt;) ((ParameterizedType) type).getRawType()).getGenericSuperclass();\n            } else {\n                type = ((Class&lt;?&gt;) type).getGenericSuperclass();\n            }\n        }\n\n        return ((ParameterizedType) type).getActualTypeArguments()[index];\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5714780,"reputation":5395,"user_id":4515438,"accept_rate":0,"display_name":"Vahe Gharibyan"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1565784320,"creation_date":1565784320,"answer_id":57494360,"question_id":3437897,"body_markdown":"This question is old, but now the best is use google `Gson`.\r\n\r\nAn example to get custom `viewModel`.\r\n\r\n    Class&lt;CustomViewModel&lt;String&gt;&gt; clazz = new GenericClass&lt;CustomViewModel&lt;String&gt;&gt;().getRawType();\r\n    CustomViewModel&lt;String&gt; viewModel = viewModelProvider.get(clazz);\r\n\r\n**Generic type class**\r\n\r\n    class GenericClass&lt;T&gt;(private val rawType: Class&lt;*&gt;) {\r\n    \r\n        constructor():this(`$Gson$Types`.getRawType(object : TypeToken&lt;T&gt;() {}.getType()))\r\n    \r\n        fun getRawType(): Class&lt;T&gt; {\r\n            return rawType as Class&lt;T&gt;\r\n        }\r\n    }","title":"How do I get a class instance of generic type T?","body":"<p>This question is old, but now the best is use google <code>Gson</code>.</p>\n\n<p>An example to get custom <code>viewModel</code>.</p>\n\n<pre><code>Class&lt;CustomViewModel&lt;String&gt;&gt; clazz = new GenericClass&lt;CustomViewModel&lt;String&gt;&gt;().getRawType();\nCustomViewModel&lt;String&gt; viewModel = viewModelProvider.get(clazz);\n</code></pre>\n\n<p><strong>Generic type class</strong></p>\n\n<pre><code>class GenericClass&lt;T&gt;(private val rawType: Class&lt;*&gt;) {\n\n    constructor():this(`$Gson$Types`.getRawType(object : TypeToken&lt;T&gt;() {}.getType()))\n\n    fun getRawType(): Class&lt;T&gt; {\n        return rawType as Class&lt;T&gt;\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2922140,"reputation":482,"user_id":2504156,"accept_rate":70,"display_name":"Gana"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1567858951,"creation_date":1567858951,"answer_id":57833645,"question_id":3437897,"body_markdown":"That is pretty straight forward.\r\nIf you need from within the same class:\r\n\t\t\r\n\t\t\r\n\r\n    Class clazz = this.getClass();\r\n    ParameterizedType parameterizedType = (ParameterizedType) clazz.getGenericSuperclass();\r\n    try {\r\n    \t\tClass typeClass = Class.forName( parameterizedType.getActualTypeArguments()[0].getTypeName() );\r\n            // You have the instance of type &#39;T&#39; in typeClass variable\r\n    \t\t\t\r\n            System.out.println( &quot;Class instance name: &quot;+  typeClass.getName() );\r\n    \t} catch (ClassNotFoundException e) {\r\n    \t\tSystem.out.println( &quot;ClassNotFound!! Something wrong! &quot;+ e.getMessage() );\r\n    \t}\r\n\r\n","title":"How do I get a class instance of generic type T?","body":"<p>That is pretty straight forward.\nIf you need from within the same class:</p>\n\n<pre><code>Class clazz = this.getClass();\nParameterizedType parameterizedType = (ParameterizedType) clazz.getGenericSuperclass();\ntry {\n        Class typeClass = Class.forName( parameterizedType.getActualTypeArguments()[0].getTypeName() );\n        // You have the instance of type 'T' in typeClass variable\n\n        System.out.println( \"Class instance name: \"+  typeClass.getName() );\n    } catch (ClassNotFoundException e) {\n        System.out.println( \"ClassNotFound!! Something wrong! \"+ e.getMessage() );\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2481039,"reputation":2395,"user_id":2160507,"display_name":"Pontios"},"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1582371148,"creation_date":1582371148,"answer_id":60351745,"question_id":3437897,"body_markdown":"I assume that, since you have a generic class, you would have a variable like that:\r\n\r\n    private T t;\r\n*(this variable needs to take a value at the constructor)*\r\n\r\nIn that case you can simply create the following method:\r\n\r\n    Class&lt;T&gt; getClassOfInstance()\r\n    {\r\n    \treturn (Class&lt;T&gt;) t.getClass();\r\n    }\r\n\r\nHope it helps!","title":"How do I get a class instance of generic type T?","body":"<p>I assume that, since you have a generic class, you would have a variable like that:</p>\n\n<pre><code>private T t;\n</code></pre>\n\n<p><em>(this variable needs to take a value at the constructor)</em></p>\n\n<p>In that case you can simply create the following method:</p>\n\n<pre><code>Class&lt;T&gt; getClassOfInstance()\n{\n    return (Class&lt;T&gt;) t.getClass();\n}\n</code></pre>\n\n<p>Hope it helps!</p>\n"},{"tags":[],"owner":{"account_id":2909312,"reputation":662,"user_id":2493938,"display_name":"Madhu Tomy"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1590268157,"creation_date":1590268157,"answer_id":61978602,"question_id":3437897,"body_markdown":"I wanted to pass T.class to a method which make use of Generics\r\n\r\nThe method **readFile** reads a .csv file specified by the fileName with fullpath. There can be csv files with different contents hence i need to pass the model file class so that i can get the appropriate objects. Since this is reading csv file i wanted to do in a generic way. For some reason or other none of the above solutions worked for me. I need to use \r\n`Class&lt;? extends T&gt; type` to make it work. I use opencsv library for parsing the CSV files.\r\n\r\n\r\n    private &lt;T&gt;List&lt;T&gt; readFile(String fileName, Class&lt;? extends T&gt; type) {\r\n\r\n        List&lt;T&gt; dataList = new ArrayList&lt;T&gt;();\r\n        try {\r\n            File file = new File(fileName);\r\n\r\n            Reader reader = new BufferedReader(new InputStreamReader(new FileInputStream(file)));\r\n            Reader headerReader = new BufferedReader(new InputStreamReader(new FileInputStream(file)));\r\n\r\n            CSVReader csvReader = new CSVReader(headerReader);\r\n            // create csv bean reader\r\n            CsvToBean&lt;T&gt; csvToBean = new CsvToBeanBuilder(reader)\r\n                    .withType(type)\r\n                    .withIgnoreLeadingWhiteSpace(true)\r\n                    .build();\r\n\r\n            dataList = csvToBean.parse();\r\n        }\r\n        catch (Exception ex) {\r\n            logger.error(&quot;Error: &quot;, ex);\r\n        }\r\n\r\n        return dataList;\r\n    }\r\n\r\n\r\nThis is how the readFile method is called\r\n\r\n    List&lt;RigSurfaceCSV&gt; rigSurfaceCSVDataList = readSurfaceFile(surfaceFileName, RigSurfaceCSV.class);","title":"How do I get a class instance of generic type T?","body":"<p>I wanted to pass T.class to a method which make use of Generics</p>\n\n<p>The method <strong>readFile</strong> reads a .csv file specified by the fileName with fullpath. There can be csv files with different contents hence i need to pass the model file class so that i can get the appropriate objects. Since this is reading csv file i wanted to do in a generic way. For some reason or other none of the above solutions worked for me. I need to use \n<code>Class&lt;? extends T&gt; type</code> to make it work. I use opencsv library for parsing the CSV files.</p>\n\n<pre><code>private &lt;T&gt;List&lt;T&gt; readFile(String fileName, Class&lt;? extends T&gt; type) {\n\n    List&lt;T&gt; dataList = new ArrayList&lt;T&gt;();\n    try {\n        File file = new File(fileName);\n\n        Reader reader = new BufferedReader(new InputStreamReader(new FileInputStream(file)));\n        Reader headerReader = new BufferedReader(new InputStreamReader(new FileInputStream(file)));\n\n        CSVReader csvReader = new CSVReader(headerReader);\n        // create csv bean reader\n        CsvToBean&lt;T&gt; csvToBean = new CsvToBeanBuilder(reader)\n                .withType(type)\n                .withIgnoreLeadingWhiteSpace(true)\n                .build();\n\n        dataList = csvToBean.parse();\n    }\n    catch (Exception ex) {\n        logger.error(\"Error: \", ex);\n    }\n\n    return dataList;\n}\n</code></pre>\n\n<p>This is how the readFile method is called</p>\n\n<pre><code>List&lt;RigSurfaceCSV&gt; rigSurfaceCSVDataList = readSurfaceFile(surfaceFileName, RigSurfaceCSV.class);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":13053348,"reputation":824,"user_id":9432967,"display_name":"Omid.N"},"down_vote_count":1,"up_vote_count":3,"is_accepted":false,"score":2,"last_activity_date":1616015748,"creation_date":1603471808,"answer_id":64504193,"question_id":3437897,"body_markdown":"Many people don&#39;t know this trick! Actually, I just found it today! It works like a dream! Just check this example out:\r\n\r\n    public static void main(String[] args) {\r\n        Date d=new Date();  //Or anything you want!\r\n        printMethods(d);\r\n    }\r\n\r\n    public static &lt;T&gt; void printMethods(T t){\r\n        Class&lt;T&gt; clazz= (Class&lt;T&gt;) t.getClass(); // There you go!\r\n        for ( Method m : clazz.getMethods()){\r\n            System.out.println( m.getName() );\r\n        }\r\n    }","title":"How do I get a class instance of generic type T?","body":"<p>Many people don't know this trick! Actually, I just found it today! It works like a dream! Just check this example out:</p>\n<pre><code>public static void main(String[] args) {\n    Date d=new Date();  //Or anything you want!\n    printMethods(d);\n}\n\npublic static &lt;T&gt; void printMethods(T t){\n    Class&lt;T&gt; clazz= (Class&lt;T&gt;) t.getClass(); // There you go!\n    for ( Method m : clazz.getMethods()){\n        System.out.println( m.getName() );\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2691023,"reputation":16196,"user_id":2324388,"accept_rate":41,"display_name":"Marian Kl&#252;hspies"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1652971235,"creation_date":1652971235,"answer_id":72306581,"question_id":3437897,"body_markdown":"I&#39;ve created an example based on one of two most promising solutions here from this question.\r\n\r\nThe result is however **not so promising**, at least for my use case.\r\n\r\n\r\n**Only one approach is working**, but you **need a super class** containing the method and the **generic** has to be **set in the child class** and **cannot be assigned dynamically** (which my use case sadly is)\r\n\r\n\r\n```\r\n\r\nimport org.junit.jupiter.api.Test;\r\n\r\nimport java.lang.reflect.ParameterizedType;\r\nimport java.lang.reflect.Type;\r\n\r\nimport static org.junit.jupiter.api.Assertions.assertEquals;\r\nimport static org.junit.jupiter.api.Assertions.assertThrows;\r\n\r\n\r\npublic class GenericTest {\r\n\r\n    /**\r\n     * only this will work!\r\n     */\r\n    @Test\r\n    void testGetGenericTypeClassFromChildClassWithSpecifiedType() {\r\n        TestClassWithSpecifiedType parent = new TestClassWithSpecifiedType();\r\n        assertEquals(SomeGenericType.class, parent.getGenericTypeClass());\r\n    }\r\n\r\n    /**\r\n     * won&#39;t work!\r\n     */\r\n    @Test\r\n    void testGetGenericTypeClassFromChildClassWithUnspecifiedType() {\r\n        TestClassWithUnspecifiedType&lt;SomeGenericType&gt; parent = new TestClassWithUnspecifiedType&lt;&gt;();\r\n        assertThrows(IllegalStateException.class, parent::getGenericTypeClass);\r\n    }\r\n\r\n    /**\r\n     * won&#39;t work\r\n     */\r\n    @Test\r\n    void testGetGenericTypeClassWithUnspecifiedType() {\r\n        SomeGenericTypedClass&lt;SomeGenericType&gt; parent = new SomeGenericTypedClass&lt;&gt;();\r\n        assertThrows(IllegalStateException.class, parent::getGenericTypeClass);\r\n    }\r\n\r\n    /**\r\n     * won&#39;t work\r\n     * returns object instead!\r\n     */\r\n    @Test\r\n    void testGetLoadedClassFromObject() {\r\n        Foo&lt;SomeGenericType&gt; foo = new Foo&lt;&gt;();\r\n        Class&lt;?&gt; barClass = foo.getBarClass();\r\n        assertEquals(SomeGenericType.class, barClass);\r\n    }\r\n\r\n    /**\r\n     * A class that has specified the type parameter\r\n     */\r\n    public static class TestClassWithSpecifiedType extends AbstractGenericTypedClass&lt;SomeGenericType&gt; {\r\n\r\n    }\r\n\r\n    /**\r\n     * A class where the type parameter will be specified on demand\r\n     *\r\n     * @param &lt;T&gt;\r\n     */\r\n    public static class TestClassWithUnspecifiedType&lt;T&gt; extends AbstractGenericTypedClass&lt;T&gt; {\r\n\r\n    }\r\n\r\n    /**\r\n     * An abstract class, because otherwise finding the parameter will not work\r\n     */\r\n    @SuppressWarnings(&quot;unchecked&quot;)\r\n    public static abstract class AbstractGenericTypedClass&lt;T&gt; {\r\n        @SuppressWarnings(&quot;unchecked&quot;)\r\n        public Class&lt;T&gt; getGenericTypeClass() {\r\n            try {\r\n                String className = ((ParameterizedType) getClass().getGenericSuperclass()).getActualTypeArguments()[0].getTypeName();\r\n                Class&lt;?&gt; clazz = Class.forName(className);\r\n                return (Class&lt;T&gt;) clazz;\r\n            } catch (Exception e) {\r\n                throw new IllegalStateException(&quot;Class is not parametrized with generic type!!! Please use extends &lt;&gt; &quot;);\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * A typed class without abstract super class\r\n     *\r\n     * @param &lt;T&gt;\r\n     */\r\n    public static class SomeGenericTypedClass&lt;T&gt; {\r\n        @SuppressWarnings(&quot;unchecked&quot;)\r\n        public Class&lt;T&gt; getGenericTypeClass() {\r\n            try {\r\n                String className = ((ParameterizedType) getClass().getGenericSuperclass()).getActualTypeArguments()[0].getTypeName();\r\n                Class&lt;?&gt; clazz = Class.forName(className);\r\n                return (Class&lt;T&gt;) clazz;\r\n            } catch (Exception e) {\r\n                throw new IllegalStateException(&quot;Class is not parametrized with generic type!!! Please use extends &lt;&gt; &quot;);\r\n            }\r\n        }\r\n    }\r\n\r\n\r\n    /**\r\n     * Some generic type - won&#39;t work with primitives such as String, Integer, Double!\r\n     */\r\n    public static class SomeGenericType {\r\n\r\n    }\r\n\r\n    public static class Foo&lt;T&gt; {\r\n        // The class:\r\n        private final Class&lt;?&gt; barClass;\r\n\r\n        public Foo() {\r\n            try {\r\n                // Im giving it [0] cuz Bar is the first TypeParam\r\n                Type[] bounds = getClass().getTypeParameters()[0].getBounds();\r\n                // Here, we get the class now:\r\n                barClass = Class.forName(bounds[0].getTypeName());\r\n            } catch (ClassNotFoundException e) {\r\n                // will never happen!\r\n                throw new Error(&quot;Something impossible happened!&quot;, e);\r\n            }\r\n        }\r\n\r\n        public Class&lt;?&gt; getBarClass() {\r\n            return barClass;\r\n        }\r\n    }\r\n}\r\n\r\n```\r\n\r\n\r\n&gt; I do not really understand why this has to be so complicated, but I bet there have to be some technical limitations for the dynamically setting of parameters.","title":"How do I get a class instance of generic type T?","body":"<p>I've created an example based on one of two most promising solutions here from this question.</p>\n<p>The result is however <strong>not so promising</strong>, at least for my use case.</p>\n<p><strong>Only one approach is working</strong>, but you <strong>need a super class</strong> containing the method and the <strong>generic</strong> has to be <strong>set in the child class</strong> and <strong>cannot be assigned dynamically</strong> (which my use case sadly is)</p>\n<pre><code>\nimport org.junit.jupiter.api.Test;\n\nimport java.lang.reflect.ParameterizedType;\nimport java.lang.reflect.Type;\n\nimport static org.junit.jupiter.api.Assertions.assertEquals;\nimport static org.junit.jupiter.api.Assertions.assertThrows;\n\n\npublic class GenericTest {\n\n    /**\n     * only this will work!\n     */\n    @Test\n    void testGetGenericTypeClassFromChildClassWithSpecifiedType() {\n        TestClassWithSpecifiedType parent = new TestClassWithSpecifiedType();\n        assertEquals(SomeGenericType.class, parent.getGenericTypeClass());\n    }\n\n    /**\n     * won't work!\n     */\n    @Test\n    void testGetGenericTypeClassFromChildClassWithUnspecifiedType() {\n        TestClassWithUnspecifiedType&lt;SomeGenericType&gt; parent = new TestClassWithUnspecifiedType&lt;&gt;();\n        assertThrows(IllegalStateException.class, parent::getGenericTypeClass);\n    }\n\n    /**\n     * won't work\n     */\n    @Test\n    void testGetGenericTypeClassWithUnspecifiedType() {\n        SomeGenericTypedClass&lt;SomeGenericType&gt; parent = new SomeGenericTypedClass&lt;&gt;();\n        assertThrows(IllegalStateException.class, parent::getGenericTypeClass);\n    }\n\n    /**\n     * won't work\n     * returns object instead!\n     */\n    @Test\n    void testGetLoadedClassFromObject() {\n        Foo&lt;SomeGenericType&gt; foo = new Foo&lt;&gt;();\n        Class&lt;?&gt; barClass = foo.getBarClass();\n        assertEquals(SomeGenericType.class, barClass);\n    }\n\n    /**\n     * A class that has specified the type parameter\n     */\n    public static class TestClassWithSpecifiedType extends AbstractGenericTypedClass&lt;SomeGenericType&gt; {\n\n    }\n\n    /**\n     * A class where the type parameter will be specified on demand\n     *\n     * @param &lt;T&gt;\n     */\n    public static class TestClassWithUnspecifiedType&lt;T&gt; extends AbstractGenericTypedClass&lt;T&gt; {\n\n    }\n\n    /**\n     * An abstract class, because otherwise finding the parameter will not work\n     */\n    @SuppressWarnings(&quot;unchecked&quot;)\n    public static abstract class AbstractGenericTypedClass&lt;T&gt; {\n        @SuppressWarnings(&quot;unchecked&quot;)\n        public Class&lt;T&gt; getGenericTypeClass() {\n            try {\n                String className = ((ParameterizedType) getClass().getGenericSuperclass()).getActualTypeArguments()[0].getTypeName();\n                Class&lt;?&gt; clazz = Class.forName(className);\n                return (Class&lt;T&gt;) clazz;\n            } catch (Exception e) {\n                throw new IllegalStateException(&quot;Class is not parametrized with generic type!!! Please use extends &lt;&gt; &quot;);\n            }\n        }\n    }\n\n    /**\n     * A typed class without abstract super class\n     *\n     * @param &lt;T&gt;\n     */\n    public static class SomeGenericTypedClass&lt;T&gt; {\n        @SuppressWarnings(&quot;unchecked&quot;)\n        public Class&lt;T&gt; getGenericTypeClass() {\n            try {\n                String className = ((ParameterizedType) getClass().getGenericSuperclass()).getActualTypeArguments()[0].getTypeName();\n                Class&lt;?&gt; clazz = Class.forName(className);\n                return (Class&lt;T&gt;) clazz;\n            } catch (Exception e) {\n                throw new IllegalStateException(&quot;Class is not parametrized with generic type!!! Please use extends &lt;&gt; &quot;);\n            }\n        }\n    }\n\n\n    /**\n     * Some generic type - won't work with primitives such as String, Integer, Double!\n     */\n    public static class SomeGenericType {\n\n    }\n\n    public static class Foo&lt;T&gt; {\n        // The class:\n        private final Class&lt;?&gt; barClass;\n\n        public Foo() {\n            try {\n                // Im giving it [0] cuz Bar is the first TypeParam\n                Type[] bounds = getClass().getTypeParameters()[0].getBounds();\n                // Here, we get the class now:\n                barClass = Class.forName(bounds[0].getTypeName());\n            } catch (ClassNotFoundException e) {\n                // will never happen!\n                throw new Error(&quot;Something impossible happened!&quot;, e);\n            }\n        }\n\n        public Class&lt;?&gt; getBarClass() {\n            return barClass;\n        }\n    }\n}\n\n</code></pre>\n<blockquote>\n<p>I do not really understand why this has to be so complicated, but I bet there have to be some technical limitations for the dynamically setting of parameters.</p>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":7242133,"reputation":1472,"user_id":5525384,"accept_rate":33,"display_name":"Paul"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1692275568,"creation_date":1692275568,"answer_id":76921568,"question_id":3437897,"body_markdown":"To be honest I used the solution with parameterized superclass constructor with the subclass type or with all type of reflection like `java.lang.reflect.ParameterizedType`, but it looks like ugly workaround for me.\r\n\r\nI prefer to use an abstract method. I&#39;m feeling like at least the contract between sub and superclass is more explicit.\r\n\r\n```\r\npublic abstract class MySuperClass&lt;T&gt; {\r\n\r\n    protected abstract T getSubClass();\r\n\r\n    // Example of usage in superclass\r\n    public String getName() {\r\n        return getSubClass().getClass().getSimpleName();\r\n    }\r\n}\r\n```\r\n\r\n```\r\npublic class MySubClass extends MySuperClass&lt;MySubClass&gt; {\r\n\r\n    @Override\r\n    protected MySubClass getSubClass() {\r\n        return this;\r\n    }\r\n    // ...\r\n}\r\n```","title":"How do I get a class instance of generic type T?","body":"<p>To be honest I used the solution with parameterized superclass constructor with the subclass type or with all type of reflection like <code>java.lang.reflect.ParameterizedType</code>, but it looks like ugly workaround for me.</p>\n<p>I prefer to use an abstract method. I'm feeling like at least the contract between sub and superclass is more explicit.</p>\n<pre><code>public abstract class MySuperClass&lt;T&gt; {\n\n    protected abstract T getSubClass();\n\n    // Example of usage in superclass\n    public String getName() {\n        return getSubClass().getClass().getSimpleName();\n    }\n}\n</code></pre>\n<pre><code>public class MySubClass extends MySuperClass&lt;MySubClass&gt; {\n\n    @Override\n    protected MySubClass getSubClass() {\n        return this;\n    }\n    // ...\n}\n</code></pre>\n"}],"owner":{"account_id":200226,"reputation":17730,"user_id":448452,"accept_rate":70,"display_name":"robinmag"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":980909,"favorite_count":0,"down_vote_count":0,"up_vote_count":896,"accepted_answer_id":3437930,"answer_count":24,"score":896,"last_activity_date":1692275568,"creation_date":1281337125,"question_id":3437897,"body_markdown":"I have a generics class, `Foo&lt;T&gt;`. In a method of `Foo`, I want to get the class instance of type `T`, but I just can&#39;t call `T.class`.\r\n\r\nWhat is the preferred way to get around it using `T.class`?\r\n","title":"How do I get a class instance of generic type T?","body":"<p>I have a generics class, <code>Foo&lt;T&gt;</code>. In a method of <code>Foo</code>, I want to get the class instance of type <code>T</code>, but I just can't call <code>T.class</code>.</p>\n\n<p>What is the preferred way to get around it using <code>T.class</code>?</p>\n"},{"tags":["java","nio","java-io","watchservice"],"comments":[{"owner":{"account_id":2053598,"reputation":41316,"user_id":1831987,"display_name":"VGR"},"score":0,"creation_date":1692283950,"post_id":76921556,"comment_id":135604938,"body_markdown":"In your registerSubdirectories method, you registered for watch events on the immutable Path object `C:\\niotest\\pre_rename`.  Watch events are associated with the watched Path object.  I think in order to see the updated Path, you will have to re-register your WatchService on the newly “created” directory, and unregister from the “deleted” directory.","body":"In your registerSubdirectories method, you registered for watch events on the immutable Path object <code>C:\\niotest\\pre_rename</code>.  Watch events are associated with the watched Path object.  I think in order to see the updated Path, you will have to re-register your WatchService on the newly “created” directory, and unregister from the “deleted” directory."}],"owner":{"account_id":29235612,"reputation":11,"user_id":22398310,"display_name":"paul"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":34,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1692275470,"creation_date":1692275470,"question_id":76921556,"body_markdown":"I am currently working on a project with Java NIO which should simply observe all subdirectories and files located in a specific directory. When a Delete or Create event happens it should be printed to the console. I implemented this and discovered a problem, which I couldnt solve after hours of trying.\r\n\r\nSo creating and deleting folders and files in all kinds of subfolders works well but if you rename a folder and try to create a file in that newly renamed folder you get wrong values from Java NIO. I will try to explain it in an example:\r\n\r\n\r\n```\r\nContext: pre_rename\r\nKind: ENTRY_DELETE\r\nWatchable: C:\\niotest\r\nDir: C:\\niotest\r\nContext Path: C:\\niotest\\pre_rename\r\n-------------------------------------\r\nContext: post_rename\r\nKind: ENTRY_CREATE\r\nWatchable: C:\\niotest\r\nDir: C:\\niotest\r\nContext Path: C:\\niotest\\post_rename\r\nC:\\niotest registered\r\n-------------------------------------\r\nContext: testfile.txt\r\nKind: ENTRY_CREATE\r\nWatchable: C:\\niotest\\pre_rename\r\nDir: C:\\niotest\\pre_rename\r\nContext Path: C:\\niotest\\pre_rename\\testfile.txt\r\nC:\\niotest\\pre_rename registered\r\n-------------------------------------\r\n```\r\n\r\nThis is the output I get from renaming the folder &quot;pre_rename&quot; to &quot;post_rename&quot; (Delete followed by Create) and after that creating the file &quot;testfile.txt&quot; in &quot;post_rename&quot;. As you can see, the path given by NIO still contatins pre_rename instead of post_rename in the last section. Can you guys help me how to fix this?\r\nIn the following I will share my code:\r\n\r\n```\r\nimport java.io.IOException;\r\nimport java.nio.file.*;\r\nimport java.nio.file.attribute.BasicFileAttributes;\r\n\r\npublic class Main {\r\n    public static void main(String[] args) {\r\n        try(WatchService watchService = FileSystems.getDefault().newWatchService()){\r\n            Path directory = Path.of(&quot;C:\\\\niotest&quot;);\r\n            registerSubdirectories(directory, watchService);\r\n\r\n            WatchKey key;\r\n            while((key = watchService.take()) != null){\r\n                for(WatchEvent event : key.pollEvents()){\r\n                    System.out.println(&quot;Context: &quot; + event.context());\r\n                    System.out.println(&quot;Kind: &quot; + event.kind());\r\n                    System.out.println(&quot;Watchable: &quot; + key.watchable());\r\n                    Path dir = (Path) key.watchable();\r\n                    System.out.println(&quot;Dir: &quot; + dir);\r\n                    Path contextPath = dir.resolve((Path) event.context());\r\n                    System.out.println(&quot;Context Path: &quot; + contextPath);\r\n                    if(event.kind() == StandardWatchEventKinds.ENTRY_CREATE){\r\n                        registerSubdirectories(directory, watchService);\r\n                        System.out.println(dir + &quot; registered&quot;);\r\n                    }\r\n                    System.out.println(&quot;-------------------------------------&quot;);\r\n                }\r\n                key.reset();\r\n            }\r\n        }\r\n        catch (IOException e){\r\n            e.printStackTrace();\r\n        } catch (InterruptedException e) {\r\n            throw new RuntimeException(e);\r\n        }\r\n    }\r\n\r\n    private static void registerSubdirectories(Path start, WatchService watchService) throws IOException {\r\n        Files.walkFileTree(start, new SimpleFileVisitor&lt;Path&gt;() {\r\n            @Override\r\n            public FileVisitResult preVisitDirectory(Path dir, BasicFileAttributes attributes) throws IOException {\r\n                dir.register(watchService, StandardWatchEventKinds.ENTRY_CREATE, StandardWatchEventKinds.ENTRY_DELETE);\r\n                //System.out.println(dir);\r\n                return FileVisitResult.CONTINUE;\r\n            }\r\n        });\r\n    }\r\n}\r\n\r\n```\r\n \r\n\r\nI trying playing around with key.close() and reset() but none of it really worked. I also tried to change minor thinks in the registerSubdirectories method. \r\n\r\nTo me it looks like NIO is observing the old and the new name of the folder (in my case pre and post_rename) and therefore probably just prefers to return the old path but I havenot found a way to clear one specific path and I am not 100% sure if that is even the problem either.\r\n\r\nIf any infos or something are missing please let me know.\r\nLooking forward to your replies, thanks in advance!","title":"Java NIO: Problem creating files in a renamed folder when observing a file tree","body":"<p>I am currently working on a project with Java NIO which should simply observe all subdirectories and files located in a specific directory. When a Delete or Create event happens it should be printed to the console. I implemented this and discovered a problem, which I couldnt solve after hours of trying.</p>\n<p>So creating and deleting folders and files in all kinds of subfolders works well but if you rename a folder and try to create a file in that newly renamed folder you get wrong values from Java NIO. I will try to explain it in an example:</p>\n<pre><code>Context: pre_rename\nKind: ENTRY_DELETE\nWatchable: C:\\niotest\nDir: C:\\niotest\nContext Path: C:\\niotest\\pre_rename\n-------------------------------------\nContext: post_rename\nKind: ENTRY_CREATE\nWatchable: C:\\niotest\nDir: C:\\niotest\nContext Path: C:\\niotest\\post_rename\nC:\\niotest registered\n-------------------------------------\nContext: testfile.txt\nKind: ENTRY_CREATE\nWatchable: C:\\niotest\\pre_rename\nDir: C:\\niotest\\pre_rename\nContext Path: C:\\niotest\\pre_rename\\testfile.txt\nC:\\niotest\\pre_rename registered\n-------------------------------------\n</code></pre>\n<p>This is the output I get from renaming the folder &quot;pre_rename&quot; to &quot;post_rename&quot; (Delete followed by Create) and after that creating the file &quot;testfile.txt&quot; in &quot;post_rename&quot;. As you can see, the path given by NIO still contatins pre_rename instead of post_rename in the last section. Can you guys help me how to fix this?\nIn the following I will share my code:</p>\n<pre><code>import java.io.IOException;\nimport java.nio.file.*;\nimport java.nio.file.attribute.BasicFileAttributes;\n\npublic class Main {\n    public static void main(String[] args) {\n        try(WatchService watchService = FileSystems.getDefault().newWatchService()){\n            Path directory = Path.of(&quot;C:\\\\niotest&quot;);\n            registerSubdirectories(directory, watchService);\n\n            WatchKey key;\n            while((key = watchService.take()) != null){\n                for(WatchEvent event : key.pollEvents()){\n                    System.out.println(&quot;Context: &quot; + event.context());\n                    System.out.println(&quot;Kind: &quot; + event.kind());\n                    System.out.println(&quot;Watchable: &quot; + key.watchable());\n                    Path dir = (Path) key.watchable();\n                    System.out.println(&quot;Dir: &quot; + dir);\n                    Path contextPath = dir.resolve((Path) event.context());\n                    System.out.println(&quot;Context Path: &quot; + contextPath);\n                    if(event.kind() == StandardWatchEventKinds.ENTRY_CREATE){\n                        registerSubdirectories(directory, watchService);\n                        System.out.println(dir + &quot; registered&quot;);\n                    }\n                    System.out.println(&quot;-------------------------------------&quot;);\n                }\n                key.reset();\n            }\n        }\n        catch (IOException e){\n            e.printStackTrace();\n        } catch (InterruptedException e) {\n            throw new RuntimeException(e);\n        }\n    }\n\n    private static void registerSubdirectories(Path start, WatchService watchService) throws IOException {\n        Files.walkFileTree(start, new SimpleFileVisitor&lt;Path&gt;() {\n            @Override\n            public FileVisitResult preVisitDirectory(Path dir, BasicFileAttributes attributes) throws IOException {\n                dir.register(watchService, StandardWatchEventKinds.ENTRY_CREATE, StandardWatchEventKinds.ENTRY_DELETE);\n                //System.out.println(dir);\n                return FileVisitResult.CONTINUE;\n            }\n        });\n    }\n}\n\n</code></pre>\n<p>I trying playing around with key.close() and reset() but none of it really worked. I also tried to change minor thinks in the registerSubdirectories method.</p>\n<p>To me it looks like NIO is observing the old and the new name of the folder (in my case pre and post_rename) and therefore probably just prefers to return the old path but I havenot found a way to clear one specific path and I am not 100% sure if that is even the problem either.</p>\n<p>If any infos or something are missing please let me know.\nLooking forward to your replies, thanks in advance!</p>\n"},{"tags":["java","http","post"],"comments":[{"owner":{"account_id":1949626,"reputation":13702,"user_id":1754020,"accept_rate":87,"display_name":"Eddie Martinez"},"score":0,"creation_date":1488580656,"post_id":42589576,"comment_id":72311532,"body_markdown":"can you post stacktrace?","body":"can you post stacktrace?"},{"owner":{"account_id":3577045,"reputation":331,"user_id":2986018,"display_name":"user2986018"},"score":0,"creation_date":1488583702,"post_id":42589576,"comment_id":72312463,"body_markdown":"Please find the stack trace\n\njava.lang.IllegalStateException: Cannot use BufferedReader while ServletInputStream is in use\n\tat com.ibm.domino.xsp.bridge.http.servlet.XspCmdHttpServletRequest.getReader(XspCmdHttpServletRequest.java:1373)\n\n\tat com.ibm.designer.runtime.domino.adapter.servlet.LCDAdapterHttpServletRequest.getReader(LCDAdapterHttpServletRequest.java:324)\n\tat \n\ncom.ibm.xsp.http.FileUploadRequestWrapper.getReader(FileUploadRequestWrapper.java:703)\nat \n\njavax.servlet.ServletRequestWrapper.getReader(ServletRequestWrapper.java:251)","body":"Please find the stack trace  java.lang.IllegalStateException: Cannot use BufferedReader while ServletInputStream is in use \tat com.ibm.domino.xsp.bridge.http.servlet.XspCmdHttpServletRequ&zwnj;&#8203;est.getReader(XspCmd&zwnj;&#8203;HttpServletRequest.j&zwnj;&#8203;ava:1373)  \tat com.ibm.designer.runtime.domino.adapter.servlet.LCDAdapterHt&zwnj;&#8203;tpServletRequest.get&zwnj;&#8203;Reader(LCDAdapterHtt&zwnj;&#8203;pServletRequest.java&zwnj;&#8203;:324) \tat   com.ibm.xsp.http.FileUploadRequestWrapper.getReader(FileUplo&zwnj;&#8203;adRequestWrapper.jav&zwnj;&#8203;a:703) at   javax.servlet.ServletRequestWrapper.getReader(ServletRequest&zwnj;&#8203;Wrapper.java:251)"}],"answers":[{"tags":[],"owner":{"account_id":1949626,"reputation":13702,"user_id":1754020,"accept_rate":87,"display_name":"Eddie Martinez"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1488597404,"creation_date":1488581369,"answer_id":42589767,"question_id":42589576,"body_markdown":"It seems to be this line\r\n\r\n   \r\n            in = new BufferedReader(new InputStreamReader(connection.getInputStream())); \r\n\r\nI noticed the BufferedReader is not being instantiated, you are reusing an instance variable `in`. \r\n\r\n\r\nI copied your code and just changed it to this, and I can make multiple requests without any problem.\r\n\r\n    BufferedReader in = new BufferedReader(\r\n       new InputStreamReader(connection.getInputStream()));\r\n\r\n ","title":"java.lang.IllegalStateException: Cannot use BufferedReader while ServletInputStream is in use","body":"<p>It seems to be this line</p>\n\n<pre><code>        in = new BufferedReader(new InputStreamReader(connection.getInputStream())); \n</code></pre>\n\n<p>I noticed the BufferedReader is not being instantiated, you are reusing an instance variable <code>in</code>. </p>\n\n<p>I copied your code and just changed it to this, and I can make multiple requests without any problem.</p>\n\n<pre><code>BufferedReader in = new BufferedReader(\n   new InputStreamReader(connection.getInputStream()));\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2311729,"reputation":21,"user_id":2029715,"display_name":"Patrik Plesky"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1692275102,"creation_date":1692275102,"answer_id":76921510,"question_id":42589576,"body_markdown":"In my case, the same error occurred while testing with an empty request body in a POST request. When provided with an empty JSON object {} in the request body, the code runs as expected.","title":"java.lang.IllegalStateException: Cannot use BufferedReader while ServletInputStream is in use","body":"<p>In my case, the same error occurred while testing with an empty request body in a POST request. When provided with an empty JSON object {} in the request body, the code runs as expected.</p>\n"}],"owner":{"account_id":3577045,"reputation":331,"user_id":2986018,"display_name":"user2986018"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":545,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1692275102,"creation_date":1488580319,"question_id":42589576,"body_markdown":"Can Java experts help me on this issue, I&#39;m geting the error below\r\n\r\njava.lang.IllegalStateException: Cannot use BufferedReader while ServletInputStream is in use\r\n\r\nI&#39;m calling a REST service url to post some data using a server side java code, not through a browser.\r\n\r\n     try{\r\n      \tString urlLocation = &quot;http://myserver/james/dev/hello.nsf/services.xsp/test&quot;;\r\n      \tURL url = new URL(urlLocation);\r\n      \tHttpURLConnection connection = (HttpURLConnection)url.openConnection();\r\n      \tconnection.setRequestMethod(&quot;POST&quot;); \r\n\t\t\tconnection.setAllowUserInteraction(false); \r\n\t\t\tconnection.setDoOutput(true); \r\n\t\t\tconnection.setDoInput(true);\r\n\t\t\tconnection.setUseCaches(false);\r\n\t\t\tconnection.setRequestProperty( &quot;Content-type&quot;, &quot;application/x-www-form-urlencoded&quot; ); \r\n\t\t\t//connection.setRequestProperty( &quot;Content-length&quot;, Integer.toString(content.length())); \r\n\t\t\tDataOutputStream out = new DataOutputStream (connection.getOutputStream ());\r\n\t\t\tout.writeBytes (getXML());\r\n\t\t\tout.flush ();\r\n\t\t\tout.close ();\r\n\t\t\tconnection.disconnect();\r\n\r\n\t\t\tin = new BufferedReader(new InputStreamReader(connection.getInputStream())); \r\n\t\t\t\r\n\t\t\tString line;\r\n\t\t\twhile( (line = in.readLine()) !=null) {\r\n\t\t\t\tSystem.out.println(line);\r\n\t\t\t\t} \r\n\t\t\tin.close();\r\n\t\t\t}\r\n\t    \tcatch(Exception e){\r\n\t    \t\tSystem.out.println(&quot;Error from 2nd try statement&quot;);\r\n\t    \t\te.printStackTrace();\r\n\t    \t\te.toString();\r\n\t\t\t}\r\n\r\nAny help will be greatly appreciated...","title":"java.lang.IllegalStateException: Cannot use BufferedReader while ServletInputStream is in use","body":"<p>Can Java experts help me on this issue, I'm geting the error below</p>\n\n<p>java.lang.IllegalStateException: Cannot use BufferedReader while ServletInputStream is in use</p>\n\n<p>I'm calling a REST service url to post some data using a server side java code, not through a browser.</p>\n\n<pre><code> try{\n    String urlLocation = \"http://myserver/james/dev/hello.nsf/services.xsp/test\";\n    URL url = new URL(urlLocation);\n    HttpURLConnection connection = (HttpURLConnection)url.openConnection();\n    connection.setRequestMethod(\"POST\"); \n        connection.setAllowUserInteraction(false); \n        connection.setDoOutput(true); \n        connection.setDoInput(true);\n        connection.setUseCaches(false);\n        connection.setRequestProperty( \"Content-type\", \"application/x-www-form-urlencoded\" ); \n        //connection.setRequestProperty( \"Content-length\", Integer.toString(content.length())); \n        DataOutputStream out = new DataOutputStream (connection.getOutputStream ());\n        out.writeBytes (getXML());\n        out.flush ();\n        out.close ();\n        connection.disconnect();\n\n        in = new BufferedReader(new InputStreamReader(connection.getInputStream())); \n\n        String line;\n        while( (line = in.readLine()) !=null) {\n            System.out.println(line);\n            } \n        in.close();\n        }\n        catch(Exception e){\n            System.out.println(\"Error from 2nd try statement\");\n            e.printStackTrace();\n            e.toString();\n        }\n</code></pre>\n\n<p>Any help will be greatly appreciated...</p>\n"},{"tags":["java","apache-flink","flink-sql","flink-cep"],"comments":[{"owner":{"account_id":28968787,"reputation":1,"user_id":22189579,"display_name":"Krutik Gadhiya"},"score":0,"creation_date":1692776394,"post_id":76921499,"comment_id":135668889,"body_markdown":"https://issues.apache.org/jira/browse/FLINK-32899","body":"<a href=\"https://issues.apache.org/jira/browse/FLINK-32899\" rel=\"nofollow noreferrer\">issues.apache.org/jira/browse/FLINK-32899</a>"}],"owner":{"account_id":28968787,"reputation":1,"user_id":22189579,"display_name":"Krutik Gadhiya"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":26,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1692275005,"creation_date":1692275005,"question_id":76921499,"body_markdown":"I am using Flink CEP with SQL for processing events, the schema is determined by the JSON event, while trying to execute the given SQL it gives bellow exception can. we have defined DTO’s for the event (contains nested Dto&#39;s), does any one know what am I doing wrong. as basic query like `SELECT message.event.size FROM Log` works just fine.\r\n\r\nAm I doing something wrong or Flink does not allow to reference nested objects with `MATCH_RECOGNIZE`\r\n\r\nEvent Example\r\n```JSON\r\n{\r\n  &quot;message&quot;: {\r\n    &quot;@timestamp&quot;: &quot;2023-08-02T12:12:16Z&quot;,\r\n    &quot;customFields&quot;: &quot;some string&quot;,\r\n    &quot;cloud&quot;: {\r\n      &quot;region&quot;: &quot;us-east-1&quot;\r\n    },\r\n    &quot;ecs&quot;: {\r\n      &quot;version&quot;: &quot;8.0.0&quot;\r\n    },\r\n    &quot;event&quot;: {\r\n      &quot;action&quot;: &quot;GetBucketAcl&quot;,\r\n      &quot;id&quot;: &quot;bb7ee0ed-f273-4da8-a75d-53e10e7d1515&quot;,\r\n      &quot;kind&quot;: &quot;event&quot;,\r\n      &quot;outcome&quot;: &quot;success&quot;,\r\n      &quot;provider&quot;: &quot;s3.amazonaws.com&quot;,\r\n      &quot;type&quot;: &quot;info&quot;,\r\n\t\t\t&quot;size&quot;: 10\r\n    },\r\n    &quot;source&quot;: {\r\n      &quot;address&quot;: &quot;cloudtrail.amazonaws.com&quot;\r\n    }\r\n  },\r\n  &quot;id&quot;: &quot;pxX_35all1pkteGtxXxOi&quot;,\r\n  &quot;timestamp&quot;: &quot;2023-08-02 12:17:31.526356&quot;,\r\n  &quot;integration&quot;: &quot;cloudtrail&quot;,\r\n  &quot;configuration&quot;: &quot;conf-1&quot;\r\n}\r\n```\r\n\r\nSQL Query\r\n```SQL\r\nSELECT * FROM Log\r\nMATCH_RECOGNIZE (\r\n\tPARTITION BY integration\r\n\tORDER BY time_ltz\r\n\tMEASURES\r\n\t\tFIRST(A.time_ltz) AS start_tstamp,\r\n\t\tLAST(A.time_ltz) AS end_tstamp,\r\n\t\tSUM(message.event.size) AS size,\r\n\t\tA.id AS aID,\r\n\t\tLAST(B.id) as bID,\r\n\t\tC.id AS cID\r\n\tAFTER MATCH SKIP PAST LAST ROW\r\n\tPATTERN (A B+ C) WITHIN INTERVAL &#39;5&#39; SECOND\r\n\tDEFINE\r\n\t\tA AS A.message.event.action = &#39;login&#39;,\r\n\t\tB AS SUM(message.event.size) &gt; 30\r\n) T;\r\n```\r\n\r\nGenerated Schema\r\n```\r\n(\r\n  `message` *org.example.Dto.Message&lt;`cloud` *org.example.Dto.Cloud&lt;`region` STRING&gt;*, `customField` STRING, `ecs` *org.example.Dto.Ecs&lt;`version` STRING&gt;*, `event` *org.example.Dto.Event&lt;`action` STRING, `id` STRING, `kind` STRING, `outcome` STRING, `provider` STRING, `type` STRING, `size` BIGINT NOT NULL&gt;*, `source` *org.example.Dto.Source&lt;`address` STRING&gt;*, `timestamp` STRING&gt;*,\r\n  `id` STRING,\r\n  `timestamp` STRING,\r\n  `integration` STRING,\r\n  `configuration` STRING,\r\n  `time_ltz` TIMESTAMP(3)\r\n)\r\n\r\n```\r\n\r\nStackTrace\r\n```\r\nException in thread &quot;main&quot; org.apache.flink.table.api.ValidationException: SQL validation failed. From line 15, column 22 to line 15, column 26: Table &#39;event.message.event&#39; not found\r\n\tat org.apache.flink.table.planner.calcite.FlinkPlannerImpl.org$apache$flink$table$planner$calcite$FlinkPlannerImpl$$validate(FlinkPlannerImpl.scala:187)\r\n\tat org.apache.flink.table.planner.calcite.FlinkPlannerImpl.validate(FlinkPlannerImpl.scala:113)\r\n\tat org.apache.flink.table.planner.operations.SqlToOperationConverter.convert(SqlToOperationConverter.java:281)\r\n\tat org.apache.flink.table.planner.delegation.ParserImpl.parse(ParserImpl.java:106)\r\n\tat org.apache.flink.table.api.internal.TableEnvironmentImpl.sqlQuery(TableEnvironmentImpl.java:738)\r\n\tat org.example.StaticRuleEvaluator.main(StaticRuleEvaluator.java:115)\r\nCaused by: org.apache.calcite.runtime.CalciteContextException: From line 15, column 22 to line 15, column 26: Table &#39;event.message.event&#39; not found\r\n\tat java.base/jdk.internal.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)\r\n```","title":"How to reference nested objects in Flink cep SQL in MATCH_RECOGNIZE clause","body":"<p>I am using Flink CEP with SQL for processing events, the schema is determined by the JSON event, while trying to execute the given SQL it gives bellow exception can. we have defined DTO’s for the event (contains nested Dto's), does any one know what am I doing wrong. as basic query like <code>SELECT message.event.size FROM Log</code> works just fine.</p>\n<p>Am I doing something wrong or Flink does not allow to reference nested objects with <code>MATCH_RECOGNIZE</code></p>\n<p>Event Example</p>\n<pre><code>{\n  &quot;message&quot;: {\n    &quot;@timestamp&quot;: &quot;2023-08-02T12:12:16Z&quot;,\n    &quot;customFields&quot;: &quot;some string&quot;,\n    &quot;cloud&quot;: {\n      &quot;region&quot;: &quot;us-east-1&quot;\n    },\n    &quot;ecs&quot;: {\n      &quot;version&quot;: &quot;8.0.0&quot;\n    },\n    &quot;event&quot;: {\n      &quot;action&quot;: &quot;GetBucketAcl&quot;,\n      &quot;id&quot;: &quot;bb7ee0ed-f273-4da8-a75d-53e10e7d1515&quot;,\n      &quot;kind&quot;: &quot;event&quot;,\n      &quot;outcome&quot;: &quot;success&quot;,\n      &quot;provider&quot;: &quot;s3.amazonaws.com&quot;,\n      &quot;type&quot;: &quot;info&quot;,\n            &quot;size&quot;: 10\n    },\n    &quot;source&quot;: {\n      &quot;address&quot;: &quot;cloudtrail.amazonaws.com&quot;\n    }\n  },\n  &quot;id&quot;: &quot;pxX_35all1pkteGtxXxOi&quot;,\n  &quot;timestamp&quot;: &quot;2023-08-02 12:17:31.526356&quot;,\n  &quot;integration&quot;: &quot;cloudtrail&quot;,\n  &quot;configuration&quot;: &quot;conf-1&quot;\n}\n</code></pre>\n<p>SQL Query</p>\n<pre><code>SELECT * FROM Log\nMATCH_RECOGNIZE (\n    PARTITION BY integration\n    ORDER BY time_ltz\n    MEASURES\n        FIRST(A.time_ltz) AS start_tstamp,\n        LAST(A.time_ltz) AS end_tstamp,\n        SUM(message.event.size) AS size,\n        A.id AS aID,\n        LAST(B.id) as bID,\n        C.id AS cID\n    AFTER MATCH SKIP PAST LAST ROW\n    PATTERN (A B+ C) WITHIN INTERVAL '5' SECOND\n    DEFINE\n        A AS A.message.event.action = 'login',\n        B AS SUM(message.event.size) &gt; 30\n) T;\n</code></pre>\n<p>Generated Schema</p>\n<pre><code>(\n  `message` *org.example.Dto.Message&lt;`cloud` *org.example.Dto.Cloud&lt;`region` STRING&gt;*, `customField` STRING, `ecs` *org.example.Dto.Ecs&lt;`version` STRING&gt;*, `event` *org.example.Dto.Event&lt;`action` STRING, `id` STRING, `kind` STRING, `outcome` STRING, `provider` STRING, `type` STRING, `size` BIGINT NOT NULL&gt;*, `source` *org.example.Dto.Source&lt;`address` STRING&gt;*, `timestamp` STRING&gt;*,\n  `id` STRING,\n  `timestamp` STRING,\n  `integration` STRING,\n  `configuration` STRING,\n  `time_ltz` TIMESTAMP(3)\n)\n\n</code></pre>\n<p>StackTrace</p>\n<pre><code>Exception in thread &quot;main&quot; org.apache.flink.table.api.ValidationException: SQL validation failed. From line 15, column 22 to line 15, column 26: Table 'event.message.event' not found\n    at org.apache.flink.table.planner.calcite.FlinkPlannerImpl.org$apache$flink$table$planner$calcite$FlinkPlannerImpl$$validate(FlinkPlannerImpl.scala:187)\n    at org.apache.flink.table.planner.calcite.FlinkPlannerImpl.validate(FlinkPlannerImpl.scala:113)\n    at org.apache.flink.table.planner.operations.SqlToOperationConverter.convert(SqlToOperationConverter.java:281)\n    at org.apache.flink.table.planner.delegation.ParserImpl.parse(ParserImpl.java:106)\n    at org.apache.flink.table.api.internal.TableEnvironmentImpl.sqlQuery(TableEnvironmentImpl.java:738)\n    at org.example.StaticRuleEvaluator.main(StaticRuleEvaluator.java:115)\nCaused by: org.apache.calcite.runtime.CalciteContextException: From line 15, column 22 to line 15, column 26: Table 'event.message.event' not found\n    at java.base/jdk.internal.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)\n</code></pre>\n"}],"has_more":true,"quota_max":10000,"quota_remaining":9751,"page":241,"page_size":100}
