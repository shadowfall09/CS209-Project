{"items":[{"tags":["java","eclipse","class","jar","import"],"comments":[{"owner":{"account_id":184870,"reputation":118711,"user_id":421195,"accept_rate":83,"display_name":"paulsm4"},"score":0,"creation_date":1381618780,"post_id":19339670,"comment_id":28651573,"body_markdown":"Q: Can you have two classes with the same name in different .jar&#39;s?  A: Sure.  Q: Can you rely on their position in the classpath to choose one .jar over the other?  A: No - you should disambiguate them by using qualified package names.","body":"Q: Can you have two classes with the same name in different .jar&#39;s?  A: Sure.  Q: Can you rely on their position in the classpath to choose one .jar over the other?  A: No - you should disambiguate them by using qualified package names."},{"owner":{"account_id":905393,"reputation":309,"user_id":940408,"accept_rate":83,"display_name":"Fenrir"},"score":1,"creation_date":1381620940,"post_id":19339670,"comment_id":28652007,"body_markdown":"@paulsm4 How do I do that if they have the same fully qualified name (com.sun.mail.imap.IMAPFolder), that is what I am looking for here.","body":"@paulsm4 How do I do that if they have the same fully qualified name (com.sun.mail.imap.IMAPFolder), that is what I am looking for here."},{"owner":{"account_id":184870,"reputation":118711,"user_id":421195,"accept_rate":83,"display_name":"paulsm4"},"score":0,"creation_date":1381621103,"post_id":19339670,"comment_id":28652036,"body_markdown":"Q: Do both .jar&#39;s each have an &quot;IMAPFolder&quot; with the exact same package &quot;com.sun.mail.imap.IMAPFolder&quot;? If so, then I guess the two .jar&#39;s *are* incompatible.  But that&#39;s typically *not* the case...  Q: What are the two .jar files in question?  Where did they come from?  Are you *sure* you need both?","body":"Q: Do both .jar&#39;s each have an &quot;IMAPFolder&quot; with the exact same package &quot;com.sun.mail.imap.IMAPFolder&quot;? If so, then I guess the two .jar&#39;s <i>are</i> incompatible.  But that&#39;s typically <i>not</i> the case...  Q: What are the two .jar files in question?  Where did they come from?  Are you <i>sure</i> you need both?"},{"owner":{"account_id":905393,"reputation":309,"user_id":940408,"accept_rate":83,"display_name":"Fenrir"},"score":0,"creation_date":1381621437,"post_id":19339670,"comment_id":28652093,"body_markdown":"@paulsm4 mail-1.4.jar and imap.jar both have com.sun.mail.imap.IMAPFolder and each have other packages that I need for other parts of my program but the other packages they contain are not identical so removing either would not work.","body":"@paulsm4 mail-1.4.jar and imap.jar both have com.sun.mail.imap.IMAPFolder and each have other packages that I need for other parts of my program but the other packages they contain are not identical so removing either would not work."},{"owner":{"account_id":184870,"reputation":118711,"user_id":421195,"accept_rate":83,"display_name":"paulsm4"},"score":0,"creation_date":1381694222,"post_id":19339670,"comment_id":28668290,"body_markdown":"please follow my suggestion [below](http://stackoverflow.com/a/19341314/421195): get the JavaMail API .jar files from Oracle.  I already confirmed that the current versions of mail.jar and imap.jar at the link below do *NOT* have the conflict.  Please let us know what happens!","body":"please follow my suggestion <a href=\"http://stackoverflow.com/a/19341314/421195\">below</a>: get the JavaMail API .jar files from Oracle.  I already confirmed that the current versions of mail.jar and imap.jar at the link below do <i>NOT</i> have the conflict.  Please let us know what happens!"}],"answers":[{"tags":[],"owner":{"account_id":95764,"reputation":12019,"user_id":260633,"accept_rate":100,"display_name":"Dev"},"down_vote_count":0,"up_vote_count":35,"is_accepted":false,"score":35,"last_activity_date":1675219822,"creation_date":1381621266,"answer_id":19340327,"question_id":19339670,"body_markdown":"When a class is loaded, the first implementation that matches the requested fully qualified name that is visible to the relevant `ClassLoader` is what gets returned. Any other implementations with the same fully qualified name are effectively hidden to that `ClassLoader`.\r\n\r\nWhat this means in a standard Java SE application is that the first code base (e.g. a jar) listed on the classpath with the required class, provides it, and all other code bases&#39; implementations of the same fully qualified class are hidden.\r\n\r\n## Example:\r\n\r\nAssume that A.jar contains the compiled class\r\n\r\n    package com.stackoverflow.example;\r\n    public class Hello {\r\n         public static String getGreeting(){\r\n             return &quot;Hello, A!&quot;\r\n         }\r\n    }\r\n\r\nAssume that B.jar contains the compiled class\r\n\r\n    package com.stackoverflow.example\r\n    public class Hello {\r\n         public static String getGreeting(){\r\n             return &quot;Hello, B!&quot;\r\n         }\r\n    }\r\n\r\nNote that in both of the above classes have the same fully qualified name.\r\n\r\nAssume  main class is\r\n\r\n       import com.stackoverflow.example.Hello;\r\n\r\n       public class ExampleMain {\r\n           public static void main(String[] args){\r\n                System.out.println(Hello.getGreeting());\r\n           }\r\n       }\r\n\r\n\r\nIf I were to invoke my program with\r\n\r\n`java -cp A.jar:B.jar ExampleMain`\r\n\r\nthe output is: `Hello, A!`\r\n\r\nIf I reverse the classpath like so\r\n\r\n`java -cp B.jar:A.jar ExampleMain`\r\n\r\nthe output is: `Hello, B!`\r\n\r\n\r\n","title":"Java: Two jars in project with same class.","body":"<p>When a class is loaded, the first implementation that matches the requested fully qualified name that is visible to the relevant <code>ClassLoader</code> is what gets returned. Any other implementations with the same fully qualified name are effectively hidden to that <code>ClassLoader</code>.</p>\n<p>What this means in a standard Java SE application is that the first code base (e.g. a jar) listed on the classpath with the required class, provides it, and all other code bases' implementations of the same fully qualified class are hidden.</p>\n<h2>Example:</h2>\n<p>Assume that A.jar contains the compiled class</p>\n<pre><code>package com.stackoverflow.example;\npublic class Hello {\n     public static String getGreeting(){\n         return &quot;Hello, A!&quot;\n     }\n}\n</code></pre>\n<p>Assume that B.jar contains the compiled class</p>\n<pre><code>package com.stackoverflow.example\npublic class Hello {\n     public static String getGreeting(){\n         return &quot;Hello, B!&quot;\n     }\n}\n</code></pre>\n<p>Note that in both of the above classes have the same fully qualified name.</p>\n<p>Assume  main class is</p>\n<pre><code>   import com.stackoverflow.example.Hello;\n\n   public class ExampleMain {\n       public static void main(String[] args){\n            System.out.println(Hello.getGreeting());\n       }\n   }\n</code></pre>\n<p>If I were to invoke my program with</p>\n<p><code>java -cp A.jar:B.jar ExampleMain</code></p>\n<p>the output is: <code>Hello, A!</code></p>\n<p>If I reverse the classpath like so</p>\n<p><code>java -cp B.jar:A.jar ExampleMain</code></p>\n<p>the output is: <code>Hello, B!</code></p>\n"},{"tags":[],"owner":{"account_id":184870,"reputation":118711,"user_id":421195,"accept_rate":83,"display_name":"paulsm4"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1381632245,"creation_date":1381632245,"answer_id":19341314,"question_id":19339670,"body_markdown":"1) In general: Yes you can have the same class in different .jar files: you just disambiguate them with a fully qualified package name.  The &quot;Date&quot; class (present in java.util and java.sql) is a good example.\r\n\r\n2) If you have two *DIFFERENT* .jar files that have the *SAME* fully qualified package names ... chances are, you&#39;ve got a conflict.  Even if you can hack around the InvocationTargetException by playing with the class loader, you might still encounter other problems. In this case, it sounds like maybe your two .jar files have two different implementations of the JavaMail API.  I don&#39;t know.\r\n\r\n3) The safest bet is to satisfy all your program&#39;s references *WITHOUT* risking a conflict.  I believe if you took took the &quot;official&quot; .jar&#39;s from Oracle&#39;s JavaMail web page, you can do this:\r\n\r\n  https://java.net/projects/javamail/pages/Home\r\n\r\n&#39;Hope that helps!","title":"Java: Two jars in project with same class.","body":"<p>1) In general: Yes you can have the same class in different .jar files: you just disambiguate them with a fully qualified package name.  The \"Date\" class (present in java.util and java.sql) is a good example.</p>\n\n<p>2) If you have two <em>DIFFERENT</em> .jar files that have the <em>SAME</em> fully qualified package names ... chances are, you've got a conflict.  Even if you can hack around the InvocationTargetException by playing with the class loader, you might still encounter other problems. In this case, it sounds like maybe your two .jar files have two different implementations of the JavaMail API.  I don't know.</p>\n\n<p>3) The safest bet is to satisfy all your program's references <em>WITHOUT</em> risking a conflict.  I believe if you took took the \"official\" .jar's from Oracle's JavaMail web page, you can do this:</p>\n\n<p><a href=\"https://java.net/projects/javamail/pages/Home\" rel=\"nofollow\">https://java.net/projects/javamail/pages/Home</a></p>\n\n<p>'Hope that helps!</p>\n"},{"tags":[],"owner":{"account_id":21994,"reputation":73798,"user_id":53897,"accept_rate":56,"display_name":"Thorbj&#248;rn Ravn Andersen"},"down_vote_count":0,"up_vote_count":12,"is_accepted":true,"score":12,"last_activity_date":1381653345,"creation_date":1381653345,"answer_id":19343282,"question_id":19339670,"body_markdown":"You cannot do what you ask just in your Java source.  Java was not designed for that.\r\n\r\nThis is a bad situation which can only be handled reliably with custom class loaders, each providing one of the jars you need.  Since you are asking this question in the first place this is probably not the way you should go yet since that opens up a LOT of new time consuming problems.\r\n\r\nI would strongly suggest you find out _why_ you have two different versions of the same jar in your classpath and rework your program so you only need one version.  ","title":"Java: Two jars in project with same class.","body":"<p>You cannot do what you ask just in your Java source.  Java was not designed for that.</p>\n\n<p>This is a bad situation which can only be handled reliably with custom class loaders, each providing one of the jars you need.  Since you are asking this question in the first place this is probably not the way you should go yet since that opens up a LOT of new time consuming problems.</p>\n\n<p>I would strongly suggest you find out <em>why</em> you have two different versions of the same jar in your classpath and rework your program so you only need one version.  </p>\n"},{"tags":[],"owner":{"account_id":4985204,"reputation":111,"user_id":4009042,"accept_rate":100,"display_name":"biao li"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1413570612,"creation_date":1413570612,"answer_id":26431254,"question_id":19339670,"body_markdown":"Yes, there is a way to fix the issue. In my scenario, I have two classes with same name and same path and eclipse always imports the wrong one. What I have done is changing the jar order in the build path and eclipse will pick the first one in the build path.  ","title":"Java: Two jars in project with same class.","body":"<p>Yes, there is a way to fix the issue. In my scenario, I have two classes with same name and same path and eclipse always imports the wrong one. What I have done is changing the jar order in the build path and eclipse will pick the first one in the build path.  </p>\n"},{"tags":[],"owner":{"account_id":1357124,"reputation":103,"user_id":1295300,"display_name":"user1295300"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1461248574,"creation_date":1461248574,"answer_id":36772526,"question_id":19339670,"body_markdown":"If you are using an IDE, you can set the order of exporting the files to the class loader. \r\n\r\nI work on eclipse and I use maven. When I install the project using maven, it produced many extra jars (which i hadnt defined in my dependencies) and there was a file `org.w3c.dom.Element` which was present in 2 jar files and 3rd instance of the same file was also in JRE7.\r\n\r\nIn order to make sure the correct file is picked up, all I had to do was to go to **Java Build Path** -&gt; **Order and Export**. Select the Jar file I wanted the classloader to give more preference and move it up with the button &quot;Up&quot;.\r\n\r\nThis is how it looks. \r\n[![Eclipse - Java Build Path -&gt; Order and Export][1]][1]\r\nPlease note that this image is for eclipse. But for other IDEs there would definitely be a similar way to work this out. \r\n\r\n\r\n  [1]: http://i.stack.imgur.com/gXcGf.jpg","title":"Java: Two jars in project with same class.","body":"<p>If you are using an IDE, you can set the order of exporting the files to the class loader. </p>\n\n<p>I work on eclipse and I use maven. When I install the project using maven, it produced many extra jars (which i hadnt defined in my dependencies) and there was a file <code>org.w3c.dom.Element</code> which was present in 2 jar files and 3rd instance of the same file was also in JRE7.</p>\n\n<p>In order to make sure the correct file is picked up, all I had to do was to go to <strong>Java Build Path</strong> -> <strong>Order and Export</strong>. Select the Jar file I wanted the classloader to give more preference and move it up with the button \"Up\".</p>\n\n<p>This is how it looks. \n<a href=\"https://i.stack.imgur.com/gXcGf.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/gXcGf.jpg\" alt=\"Eclipse - Java Build Path -&gt; Order and Export\"></a>\nPlease note that this image is for eclipse. But for other IDEs there would definitely be a similar way to work this out. </p>\n"}],"owner":{"account_id":905393,"reputation":309,"user_id":940408,"accept_rate":83,"display_name":"Fenrir"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":40125,"favorite_count":0,"down_vote_count":1,"up_vote_count":16,"accepted_answer_id":19343282,"answer_count":5,"score":15,"last_activity_date":1675219822,"creation_date":1381615323,"question_id":19339670,"body_markdown":"I have a java project that is using two imported jars with the same class (`com.sun.mail.imap.IMAPFolder`).  Is there a way to explicitly say which jar to use when importing the class?  Using: \r\n\r\n    import com.sun.mail.imap.IMAPFolder; \r\n\r\nwould seem to use the class in order of build path order but this does not seem to be the case for some reason causing \r\n\r\n    Exception in thread &quot;main&quot; java.lang.reflect.InvocationTargetException\r\n            at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n            at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)\r\n            at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n            at java.lang.reflect.Method.invoke(Method.java:616)\r\n            at org.eclipse.jdt.internal.jarinjarloader.JarRsrcLoader.main(JarRsrcLoader.java:58)\r\n    Caused by: java.lang.NoSuchMethodError: com.sun.mail.imap.IMAPFolder.idle()V\r\n            at com.woodbury.GCM.HelperGmailMonitor.doEmail(HelperGmailMonitor.java:104)\r\n            at com.woodbury.GCM.Launch.listen(Launch.java:16)\r\n            at com.woodbury.GCM.Launch.main(Launch.java:10)\r\n            ... 5 more\r\n\r\n\r\nat runtime.  I am building the project in eclipse.  ","title":"Java: Two jars in project with same class.","body":"<p>I have a java project that is using two imported jars with the same class (<code>com.sun.mail.imap.IMAPFolder</code>).  Is there a way to explicitly say which jar to use when importing the class?  Using: </p>\n\n<pre><code>import com.sun.mail.imap.IMAPFolder; \n</code></pre>\n\n<p>would seem to use the class in order of build path order but this does not seem to be the case for some reason causing </p>\n\n<pre><code>Exception in thread \"main\" java.lang.reflect.InvocationTargetException\n        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)\n        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n        at java.lang.reflect.Method.invoke(Method.java:616)\n        at org.eclipse.jdt.internal.jarinjarloader.JarRsrcLoader.main(JarRsrcLoader.java:58)\nCaused by: java.lang.NoSuchMethodError: com.sun.mail.imap.IMAPFolder.idle()V\n        at com.woodbury.GCM.HelperGmailMonitor.doEmail(HelperGmailMonitor.java:104)\n        at com.woodbury.GCM.Launch.listen(Launch.java:16)\n        at com.woodbury.GCM.Launch.main(Launch.java:10)\n        ... 5 more\n</code></pre>\n\n<p>at runtime.  I am building the project in eclipse.  </p>\n"},{"tags":["java","maven","jar","dependencies"],"comments":[{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":0,"creation_date":1674252299,"post_id":75189460,"comment_id":132682812,"body_markdown":"Looking at the plugin docs I couldn&#39;t see which phase `changelog:changelog` was bound to by default, but you can add plugin configuration, as you have for the `build-helper-maven-plugin` which will run changelog in an earlier phase.","body":"Looking at the plugin docs I couldn&#39;t see which phase <code>changelog:changelog</code> was bound to by default, but you can add plugin configuration, as you have for the <code>build-helper-maven-plugin</code> which will run changelog in an earlier phase."},{"owner":{"account_id":10076777,"reputation":213,"user_id":7448604,"display_name":"KJ0797"},"score":0,"creation_date":1674483986,"post_id":75189460,"comment_id":132717548,"body_markdown":"@tgdavies I did try adding a phase to the `build-helper` plugin, but when used in the `&lt;reporting&gt; block it always runs last. I tried moving the plugin to the &lt;build&gt; block with an earlier phase, and it still did not work. \nEven using `mvn site install`, which builds the reports first, does not work because the `add-changelog` plugin does not find the file","body":"@tgdavies I did try adding a phase to the <code>build-helper</code> plugin, but when used in the <code>&lt;reporting&gt; block it always runs last. I tried moving the plugin to the &lt;build&gt; block with an earlier phase, and it still did not work.  Even using </code>mvn site install<code>, which builds the reports first, does not work because the </code>add-changelog` plugin does not find the file"}],"answers":[{"tags":[],"owner":{"account_id":10076777,"reputation":213,"user_id":7448604,"display_name":"KJ0797"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1675219534,"creation_date":1675219534,"answer_id":75305146,"question_id":75189460,"body_markdown":"The issue with the `maven-changelog-plugin` was that it always ran at a step later than the build step where it needed to be. I ended up using the `gitlog-maven-plugin` instead, which allowed me to change the phase at which it executed","title":"Generating changeset and adding it to JAR with Maven","body":"<p>The issue with the <code>maven-changelog-plugin</code> was that it always ran at a step later than the build step where it needed to be. I ended up using the <code>gitlog-maven-plugin</code> instead, which allowed me to change the phase at which it executed</p>\n"}],"owner":{"account_id":10076777,"reputation":213,"user_id":7448604,"display_name":"KJ0797"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":88,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75305146,"answer_count":1,"score":0,"last_activity_date":1675219534,"creation_date":1674250010,"question_id":75189460,"body_markdown":"I&#39;m generating a git diff changeset using the `maven-changelog-plugin`. This plugin runs when I run `mvn site` or `mvn changeset:changeset` and outputs the changeset file into `target/site/changeset.html` and `/target/changeset.xml`. I would like to include this generated file in the jar that is built when I run `mvn clean install`.\r\n\r\nHow can I include this generated file in the JAR? I&#39;ve tried using the `build-helper-maven-plugin` to add an artifact or to add a source, but it seems that the changeset is created as the last step or isn&#39;t discoverable. \r\n\r\nMy most recent attempt:\r\n\r\n```xml\r\n  &lt;reporting&gt;\r\n    &lt;plugins&gt;\r\n      &lt;plugin&gt;\r\n        &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n        &lt;artifactId&gt;maven-changelog-plugin&lt;/artifactId&gt;\r\n        &lt;version&gt;2.3&lt;/version&gt;\r\n        &lt;reportSets&gt;\r\n          &lt;reportSet&gt;\r\n            &lt;id&gt;changelog-report&lt;/id&gt;\r\n            &lt;configuration&gt;\r\n              &lt;type&gt;range&lt;/type&gt;\r\n              &lt;range&gt;30&lt;/range&gt;\r\n            &lt;/configuration&gt;\r\n            &lt;reports&gt;\r\n              &lt;report&gt;changelog&lt;/report&gt;\r\n            &lt;/reports&gt;\r\n          &lt;/reportSet&gt;\r\n        &lt;/reportSets&gt;\r\n      &lt;/plugin&gt;\r\n    &lt;/plugins&gt;\r\n  &lt;/reporting&gt;\r\n\r\n  &lt;profiles&gt;\r\n    &lt;profile&gt;\r\n      &lt;id&gt;add-changelog-to-artifact&lt;/id&gt;\r\n        &lt;activation&gt;\r\n            &lt;file&gt;&lt;exists&gt;target/site/changelog.html&lt;/exists&gt;&lt;/file&gt;\r\n        &lt;/activation&gt;\r\n        &lt;build&gt;\r\n          &lt;plugins&gt;\r\n            &lt;plugin&gt;\r\n              &lt;groupId&gt;org.codehaus.mojo&lt;/groupId&gt;\r\n              &lt;artifactId&gt;build-helper-maven-plugin&lt;/artifactId&gt;\r\n              &lt;version&gt;3.3.0&lt;/version&gt;\r\n              &lt;executions&gt;\r\n                &lt;execution&gt;\r\n                  &lt;id&gt;add-source&lt;/id&gt;\r\n                  &lt;phase&gt;generate-sources&lt;/phase&gt;\r\n                  &lt;goals&gt;\r\n                    &lt;goal&gt;add-source&lt;/goal&gt;\r\n                  &lt;/goals&gt;\r\n                  &lt;configuration&gt;\r\n                    &lt;sources&gt;\r\n                      &lt;source&gt;target/site/changelog.html&lt;/source&gt;\r\n                    &lt;/sources&gt;\r\n                  &lt;/configuration&gt;\r\n                &lt;/execution&gt;\r\n              &lt;/executions&gt;\r\n            &lt;/plugin&gt;\r\n          &lt;/plugins&gt;\r\n        &lt;/build&gt;\r\n    &lt;/profile&gt;\r\n  &lt;/profiles&gt;\r\n```","title":"Generating changeset and adding it to JAR with Maven","body":"<p>I'm generating a git diff changeset using the <code>maven-changelog-plugin</code>. This plugin runs when I run <code>mvn site</code> or <code>mvn changeset:changeset</code> and outputs the changeset file into <code>target/site/changeset.html</code> and <code>/target/changeset.xml</code>. I would like to include this generated file in the jar that is built when I run <code>mvn clean install</code>.</p>\n<p>How can I include this generated file in the JAR? I've tried using the <code>build-helper-maven-plugin</code> to add an artifact or to add a source, but it seems that the changeset is created as the last step or isn't discoverable.</p>\n<p>My most recent attempt:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>  &lt;reporting&gt;\n    &lt;plugins&gt;\n      &lt;plugin&gt;\n        &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n        &lt;artifactId&gt;maven-changelog-plugin&lt;/artifactId&gt;\n        &lt;version&gt;2.3&lt;/version&gt;\n        &lt;reportSets&gt;\n          &lt;reportSet&gt;\n            &lt;id&gt;changelog-report&lt;/id&gt;\n            &lt;configuration&gt;\n              &lt;type&gt;range&lt;/type&gt;\n              &lt;range&gt;30&lt;/range&gt;\n            &lt;/configuration&gt;\n            &lt;reports&gt;\n              &lt;report&gt;changelog&lt;/report&gt;\n            &lt;/reports&gt;\n          &lt;/reportSet&gt;\n        &lt;/reportSets&gt;\n      &lt;/plugin&gt;\n    &lt;/plugins&gt;\n  &lt;/reporting&gt;\n\n  &lt;profiles&gt;\n    &lt;profile&gt;\n      &lt;id&gt;add-changelog-to-artifact&lt;/id&gt;\n        &lt;activation&gt;\n            &lt;file&gt;&lt;exists&gt;target/site/changelog.html&lt;/exists&gt;&lt;/file&gt;\n        &lt;/activation&gt;\n        &lt;build&gt;\n          &lt;plugins&gt;\n            &lt;plugin&gt;\n              &lt;groupId&gt;org.codehaus.mojo&lt;/groupId&gt;\n              &lt;artifactId&gt;build-helper-maven-plugin&lt;/artifactId&gt;\n              &lt;version&gt;3.3.0&lt;/version&gt;\n              &lt;executions&gt;\n                &lt;execution&gt;\n                  &lt;id&gt;add-source&lt;/id&gt;\n                  &lt;phase&gt;generate-sources&lt;/phase&gt;\n                  &lt;goals&gt;\n                    &lt;goal&gt;add-source&lt;/goal&gt;\n                  &lt;/goals&gt;\n                  &lt;configuration&gt;\n                    &lt;sources&gt;\n                      &lt;source&gt;target/site/changelog.html&lt;/source&gt;\n                    &lt;/sources&gt;\n                  &lt;/configuration&gt;\n                &lt;/execution&gt;\n              &lt;/executions&gt;\n            &lt;/plugin&gt;\n          &lt;/plugins&gt;\n        &lt;/build&gt;\n    &lt;/profile&gt;\n  &lt;/profiles&gt;\n</code></pre>\n"},{"tags":["java","logging","log4j2","xinclude"],"comments":[{"owner":{"account_id":2567170,"reputation":10683,"user_id":3537858,"display_name":"Alexey Gavrilov"},"score":0,"creation_date":1398109443,"post_id":23200891,"comment_id":35494718,"body_markdown":"Log4j loads configuration files from the classpath. If you put the test code classpath before the library classpath the log4j configuration should be taken from the test code. Here is a [link](http://stackoverflow.com/questions/2772466/where-to-place-log4j-xml) to the stackoverflow question which can be helpful.","body":"Log4j loads configuration files from the classpath. If you put the test code classpath before the library classpath the log4j configuration should be taken from the test code. Here is a <a href=\"http://stackoverflow.com/questions/2772466/where-to-place-log4j-xml\">link</a> to the stackoverflow question which can be helpful."},{"owner":{"account_id":3717453,"reputation":133,"user_id":3093295,"display_name":"user3093295"},"score":0,"creation_date":1398110899,"post_id":23200891,"comment_id":35495545,"body_markdown":"Thanks for the reply Alexey, but I don&#39;t think I was clear enough in my question. I&#39;ve edited it to try to be more clear.","body":"Thanks for the reply Alexey, but I don&#39;t think I was clear enough in my question. I&#39;ve edited it to try to be more clear."}],"answers":[{"tags":[],"owner":{"account_id":1555751,"reputation":35615,"user_id":1446916,"display_name":"Remko Popma"},"down_vote_count":1,"up_vote_count":10,"is_accepted":true,"score":9,"last_activity_date":1398147382,"creation_date":1398147382,"answer_id":23211804,"question_id":23200891,"body_markdown":"This may be helpful:\r\n\r\n - Log4j2 will first look for log4j2-test.xml in the classpath\r\n - if that file is not found, it will look for log4j2.xml in the classpath\r\n\r\nSo one option is to copy the library&#39;s configuration (log4j2.xml) to log4j2-test.xml and add your own configuration to log4j2-test.xml.\r\n\r\nFurthermore, Log4j2 [supports XInclude in XML configuration][1], so you could use that feature to avoid duplicating the library&#39;s configuration in your log4j2-test.xml.\r\n\r\n\r\n  [1]: https://issues.apache.org/jira/browse/LOG4J2-341","title":"How to use multiple configuration files for Log4j2?","body":"<p>This may be helpful:</p>\n\n<ul>\n<li>Log4j2 will first look for log4j2-test.xml in the classpath</li>\n<li>if that file is not found, it will look for log4j2.xml in the classpath</li>\n</ul>\n\n<p>So one option is to copy the library's configuration (log4j2.xml) to log4j2-test.xml and add your own configuration to log4j2-test.xml.</p>\n\n<p>Furthermore, Log4j2 <a href=\"https://issues.apache.org/jira/browse/LOG4J2-341\" rel=\"noreferrer\">supports XInclude in XML configuration</a>, so you could use that feature to avoid duplicating the library's configuration in your log4j2-test.xml.</p>\n"},{"tags":[],"owner":{"account_id":2754907,"reputation":1362,"user_id":2373304,"accept_rate":67,"display_name":"loknath"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1398149360,"creation_date":1398149360,"answer_id":23212426,"question_id":23200891,"body_markdown":"There are two step you can try to solve for your issue\r\n   \r\n\r\n - Create your own configuration file with your custom name(eg: xyz.properties/.xml)\r\n - You must add the following line to your java runtime command\r\n  \r\n   \r\n\r\n&gt; **cmd&gt; java -Dlog4j.configuration=location/xyz.properties**\r\n\r\n \r\n\r\nIf you use diffent name for configuration rather log4j.properties/.xml file you need to configure that file at runtime by above command for more info have a look [**here..**][1]\r\n\r\n\r\n  [1]: http://logging.apache.org/log4j/1.2/apidocs/org/apache/log4j/PropertyConfigurator.html","title":"How to use multiple configuration files for Log4j2?","body":"<p>There are two step you can try to solve for your issue</p>\n\n<ul>\n<li>Create your own configuration file with your custom name(eg: xyz.properties/.xml)</li>\n<li>You must add the following line to your java runtime command</li>\n</ul>\n\n<blockquote>\n  <p><strong>cmd> java -Dlog4j.configuration=location/xyz.properties</strong></p>\n</blockquote>\n\n<p>If you use diffent name for configuration rather log4j.properties/.xml file you need to configure that file at runtime by above command for more info have a look <a href=\"http://logging.apache.org/log4j/1.2/apidocs/org/apache/log4j/PropertyConfigurator.html\" rel=\"nofollow\"><strong>here..</strong></a></p>\n"},{"tags":[],"owner":{"account_id":439249,"reputation":1128,"user_id":828062,"accept_rate":40,"display_name":"zendu"},"down_vote_count":0,"up_vote_count":9,"is_accepted":false,"score":9,"last_activity_date":1675218879,"creation_date":1506133170,"answer_id":46375401,"question_id":23200891,"body_markdown":"Log4j2 supports &quot;*Composite Configuration*&quot; which exactly matches your requirement. All you need to do is provide path to multiple files in `log4j.configurationFile` property. This can be passed from command line or added to `log4j2.component.properties` file in your application.\r\n\r\n---\r\n## References\r\n\r\n - https://logging.apache.org/log4j/2.x/manual/configuration.html#CompositeConfiguration\r\n - https://logging.apache.org/log4j/2.x/manual/configuration.html#SystemProperties","title":"How to use multiple configuration files for Log4j2?","body":"<p>Log4j2 supports &quot;<em>Composite Configuration</em>&quot; which exactly matches your requirement. All you need to do is provide path to multiple files in <code>log4j.configurationFile</code> property. This can be passed from command line or added to <code>log4j2.component.properties</code> file in your application.</p>\n<hr />\n<h2>References</h2>\n<ul>\n<li><a href=\"https://logging.apache.org/log4j/2.x/manual/configuration.html#CompositeConfiguration\" rel=\"nofollow noreferrer\">https://logging.apache.org/log4j/2.x/manual/configuration.html#CompositeConfiguration</a></li>\n<li><a href=\"https://logging.apache.org/log4j/2.x/manual/configuration.html#SystemProperties\" rel=\"nofollow noreferrer\">https://logging.apache.org/log4j/2.x/manual/configuration.html#SystemProperties</a></li>\n</ul>\n"},{"tags":[],"owner":{"account_id":15765412,"reputation":1,"user_id":11375943,"display_name":"habeeb"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1555533467,"creation_date":1555533467,"answer_id":55735631,"question_id":23200891,"body_markdown":"Correct format for using an alternate XML file to log4j2.xml: \r\n\r\n`java -Dlog4j.configurationFile=./location/log4j2-custom.xml`\r\n\r\nAssuming `./location/log4j2-custom.xml` exists and is the new XML to replace log4j2.xml in this run\r\n\r\nSee:\r\nhttps://github.com/kamalcph/Log4j2Examples/blob/master/src/main/java/in/co/nmsworks/log4j2/examples/CompositeConfigurationExample.java","title":"How to use multiple configuration files for Log4j2?","body":"<p>Correct format for using an alternate XML file to log4j2.xml: </p>\n\n<p><code>java -Dlog4j.configurationFile=./location/log4j2-custom.xml</code></p>\n\n<p>Assuming <code>./location/log4j2-custom.xml</code> exists and is the new XML to replace log4j2.xml in this run</p>\n\n<p>See:\n<a href=\"https://github.com/kamalcph/Log4j2Examples/blob/master/src/main/java/in/co/nmsworks/log4j2/examples/CompositeConfigurationExample.java\" rel=\"nofollow noreferrer\">https://github.com/kamalcph/Log4j2Examples/blob/master/src/main/java/in/co/nmsworks/log4j2/examples/CompositeConfigurationExample.java</a></p>\n"},{"tags":[],"owner":{"account_id":1840135,"reputation":1,"user_id":1669714,"display_name":"Vadim Leyzerovich"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1557861395,"creation_date":1557861395,"answer_id":56137154,"question_id":23200891,"body_markdown":"Referencing [https://logging.apache.org/log4j/2.x/manual/configuration.html][1] states that you can add multiple comma separated files under log4j2.configurationFile property. \r\n\r\n\r\n \r\n\r\n\r\n  [1]: https://logging.apache.org/log4j/2.x/manual/configuration.html","title":"How to use multiple configuration files for Log4j2?","body":"<p>Referencing <a href=\"https://logging.apache.org/log4j/2.x/manual/configuration.html\" rel=\"nofollow noreferrer\">https://logging.apache.org/log4j/2.x/manual/configuration.html</a> states that you can add multiple comma separated files under log4j2.configurationFile property. </p>\n"},{"tags":[],"owner":{"account_id":4739083,"reputation":41,"user_id":8171932,"display_name":"Jose G. Mej&#237;a"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1597427594,"creation_date":1597427594,"answer_id":63417779,"question_id":23200891,"body_markdown":"To use multiple configuration files, depending on the environment you must set the.\r\n\r\nfor example:\r\n\r\n    if (env.equals(&quot;DEV&quot;)) {\r\n     setConfigFile(&quot;log4j2-dev.xml&quot;);\r\n    }\r\n\r\n    public static void setConfigFile(String logConfigFile) {\r\n    \t\tFile file = new File(logConfigFile);\r\n    \t\tLoggerContext context = (org.apache.logging.log4j.core.LoggerContext) LogManager.getContext(false);\r\n    \t\tcontext.setConfigLocation(file.toURI());\r\n    \t}\r\n\r\n\r\n","title":"How to use multiple configuration files for Log4j2?","body":"<p>To use multiple configuration files, depending on the environment you must set the.</p>\n<p>for example:</p>\n<pre><code>if (env.equals(&quot;DEV&quot;)) {\n setConfigFile(&quot;log4j2-dev.xml&quot;);\n}\n\npublic static void setConfigFile(String logConfigFile) {\n        File file = new File(logConfigFile);\n        LoggerContext context = (org.apache.logging.log4j.core.LoggerContext) LogManager.getContext(false);\n        context.setConfigLocation(file.toURI());\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":19550060,"reputation":1,"user_id":14305911,"display_name":"user14305911"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1600524344,"creation_date":1600524344,"answer_id":63969650,"question_id":23200891,"body_markdown":"\r\n\r\n    first configure application.yaml file\r\n    spring:\r\n      profiles:\r\n        active: dev\r\n    \r\n    ---\r\n    spring:\r\n      message: running in the dev profile    //just to output the message in the log\r\n      profiles: dev\r\n    logging.config: classpath:log4j2-dev.xml\r\n    \r\n    ---\r\n    spring:\r\n      profiles: prod\r\n    logging.config: classpath:log4j2-prod.xml\r\n    \r\n    \r\n    \r\n    and create these similar files in your classpath\r\n    * log4j2-dev.xml\r\n    * log4j2-prod.xml","title":"How to use multiple configuration files for Log4j2?","body":"<pre><code>first configure application.yaml file\nspring:\n  profiles:\n    active: dev\n\n---\nspring:\n  message: running in the dev profile    //just to output the message in the log\n  profiles: dev\nlogging.config: classpath:log4j2-dev.xml\n\n---\nspring:\n  profiles: prod\nlogging.config: classpath:log4j2-prod.xml\n\n\n\nand create these similar files in your classpath\n* log4j2-dev.xml\n* log4j2-prod.xml\n</code></pre>\n"}],"owner":{"account_id":3717453,"reputation":133,"user_id":3093295,"display_name":"user3093295"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":20805,"favorite_count":0,"down_vote_count":0,"up_vote_count":11,"accepted_answer_id":23211804,"answer_count":7,"score":11,"last_activity_date":1675218879,"creation_date":1398095824,"question_id":23200891,"body_markdown":"I am writing Java code that tests a Java library. The library includes its own Log4j2 configuration as part of the distribution.\r\n\r\nI would like to use Log4j2 in my test code without modifying the library&#39;s configuration.\r\n\r\nIs there a way to have a separate Log4j2 configuration for my test code?\r\n\r\nThis is all running as command-line Java, no servers or web involvement at all.\r\n\r\n---\r\n## EDIT\r\n\r\nWhat I want is to be able to configure *loggers*, *appenders*, etc for the test code to use, and **at the same time** have the library code use **its own separate configuration file** for its logging.\r\n\r\nThe idea is to use Log4j2 in my test code, but without having to change the library&#39;s configuration file. Since the library configuration file is part of the library&#39;s distribution, I don&#39;t want to change it for testing.","title":"How to use multiple configuration files for Log4j2?","body":"<p>I am writing Java code that tests a Java library. The library includes its own Log4j2 configuration as part of the distribution.</p>\n<p>I would like to use Log4j2 in my test code without modifying the library's configuration.</p>\n<p>Is there a way to have a separate Log4j2 configuration for my test code?</p>\n<p>This is all running as command-line Java, no servers or web involvement at all.</p>\n<hr />\n<h2>EDIT</h2>\n<p>What I want is to be able to configure <em>loggers</em>, <em>appenders</em>, etc for the test code to use, and <strong>at the same time</strong> have the library code use <strong>its own separate configuration file</strong> for its logging.</p>\n<p>The idea is to use Log4j2 in my test code, but without having to change the library's configuration file. Since the library configuration file is part of the library's distribution, I don't want to change it for testing.</p>\n"},{"tags":["c#","java","python","performance"],"comments":[{"owner":{"account_id":7478,"reputation":74884,"user_id":13018,"accept_rate":73,"display_name":"annakata"},"score":1,"creation_date":1237804059,"post_id":672857,"comment_id":486351,"body_markdown":"you know, you really should provide evidence of this...","body":"you know, you really should provide evidence of this..."},{"owner":{"account_id":11683,"reputation":1438179,"user_id":22656,"accept_rate":86,"display_name":"Jon Skeet"},"score":0,"creation_date":1237804144,"post_id":672857,"comment_id":486357,"body_markdown":"Indeed - at least a test case would help us to reason about it.","body":"Indeed - at least a test case would help us to reason about it."},{"owner":{"account_id":11449,"reputation":46738,"user_id":22076,"accept_rate":94,"display_name":"yesraaj"},"score":0,"creation_date":1237804180,"post_id":672857,"comment_id":486362,"body_markdown":"http://furryland.org/~mikec/bench/","body":"<a href=\"http://furryland.org/~mikec/bench/\" rel=\"nofollow noreferrer\">furryland.org/~mikec/bench</a>"},{"owner":{"account_id":11449,"reputation":46738,"user_id":22076,"accept_rate":94,"display_name":"yesraaj"},"score":0,"creation_date":1237804244,"post_id":672857,"comment_id":486366,"body_markdown":"http://blog.dhananjaynene.com/2008/07/performance-comparison-c-java-python-ruby-jython-jruby-groovy/","body":"<a href=\"http://blog.dhananjaynene.com/2008/07/performance-comparison-c-java-python-ruby-jython-jruby-groovy/\" rel=\"nofollow noreferrer\">blog.dhananjaynene.com/2008/07/&hellip;</a>"},{"owner":{"account_id":6358,"reputation":386072,"user_id":10661,"accept_rate":91,"display_name":"S.Lott"},"score":0,"creation_date":1237805013,"post_id":672857,"comment_id":486387,"body_markdown":"@rajKumar: Please update the question with additional facts -- do not put important information into comments.","body":"@rajKumar: Please update the question with additional facts -- do not put important information into comments."},{"owner":{"account_id":25448,"reputation":5001,"user_id":65412,"accept_rate":59,"display_name":"Real Red."},"score":2,"creation_date":1237806080,"post_id":672857,"comment_id":486426,"body_markdown":"why would you close this, i don&#39;t see this as subjective or argumentive. there should be this much flexibility in questions at least!","body":"why would you close this, i don&#39;t see this as subjective or argumentive. there should be this much flexibility in questions at least!"},{"owner":{"account_id":7478,"reputation":74884,"user_id":13018,"accept_rate":73,"display_name":"annakata"},"score":0,"creation_date":1237806193,"post_id":672857,"comment_id":486429,"body_markdown":"on the grounds that as it stands it&#39;s not a real question - not enough data","body":"on the grounds that as it stands it&#39;s not a real question - not enough data"},{"owner":{"account_id":6358,"reputation":386072,"user_id":10661,"accept_rate":91,"display_name":"S.Lott"},"score":2,"creation_date":1237806989,"post_id":672857,"comment_id":486445,"body_markdown":"@annakata: There&#39;s some data that Python can be slow.  It&#39;s demonstrably slower than C#.  When it comes to Java, this is debatable; there&#39;s lot&#39;s of JIT factors that influence this.","body":"@annakata: There&#39;s some data that Python can be slow.  It&#39;s demonstrably slower than C#.  When it comes to Java, this is debatable; there&#39;s lot&#39;s of JIT factors that influence this."},{"owner":{"account_id":6358,"reputation":386072,"user_id":10661,"accept_rate":91,"display_name":"S.Lott"},"score":0,"creation_date":1237813393,"post_id":672857,"comment_id":486783,"body_markdown":"Is this a question about run-time or development time?  Are you asking if Python are slower to run or are slower to develop?","body":"Is this a question about run-time or development time?  Are you asking if Python are slower to run or are slower to develop?"},{"owner":{"account_id":29014,"reputation":2864,"user_id":1838492,"accept_rate":89,"display_name":"Michael Piendl"},"score":11,"creation_date":1237819123,"post_id":672857,"comment_id":487056,"body_markdown":"guido says sometimes: python focus on fast development - not on fast runtime. you should be able to code skripts as simple and fast as possible.","body":"guido says sometimes: python focus on fast development - not on fast runtime. you should be able to code skripts as simple and fast as possible."},{"owner":{"account_id":3021,"reputation":403258,"user_id":4279,"accept_rate":94,"display_name":"jfs"},"score":0,"creation_date":1237828946,"post_id":672857,"comment_id":487796,"body_markdown":"@rajKumar: Please, change title of the question to be more neutral and specific.","body":"@rajKumar: Please, change title of the question to be more neutral and specific."},{"owner":{"account_id":7689,"reputation":53388,"user_id":13422,"accept_rate":50,"display_name":"Zan Lynx"},"score":0,"creation_date":1237861940,"post_id":672857,"comment_id":489457,"body_markdown":"And what implementation of Python?  CPython is only one, there is jython and IronPython as well.","body":"And what implementation of Python?  CPython is only one, there is jython and IronPython as well."},{"owner":{"account_id":23998,"reputation":131987,"user_id":60711,"accept_rate":81,"display_name":"vartec"},"score":6,"creation_date":1237884272,"post_id":672857,"comment_id":489903,"body_markdown":"&#161;&#191;Offensive?! Why would someone mark that question as offensive?","body":"&#161;&#191;Offensive?! Why would someone mark that question as offensive?"},{"owner":{"account_id":16121,"reputation":36478,"user_id":34813,"accept_rate":67,"display_name":"Esteban K&#252;ber"},"score":0,"creation_date":1248441925,"post_id":672857,"comment_id":998336,"body_markdown":"Slower? Slower for what? It depends on what libraries are you using, as a lot of them are C compiled, specially the number intensive libraries.","body":"Slower? Slower for what? It depends on what libraries are you using, as a lot of them are C compiled, specially the number intensive libraries."},{"owner":{"account_id":358635,"reputation":829,"user_id":699540,"accept_rate":40,"display_name":"user699540"},"score":0,"creation_date":1369624224,"post_id":672857,"comment_id":24154851,"body_markdown":"Speed is subjective. What kind of speed are we talking about here? For example, if you are referring to using the CPU cores, then obviously no variant of Python is able to get rid of GIL except Jython - this factor does affect the speed.","body":"Speed is subjective. What kind of speed are we talking about here? For example, if you are referring to using the CPU cores, then obviously no variant of Python is able to get rid of GIL except Jython - this factor does affect the speed."},{"owner":{"account_id":9060061,"reputation":527,"user_id":6746850,"display_name":"Ahmad Javadi Nezhad"},"score":0,"creation_date":1536865035,"post_id":672857,"comment_id":91587643,"body_markdown":"It depends on what do u want do with python.","body":"It depends on what do u want do with python."}],"answers":[{"tags":[],"owner":{"account_id":11683,"reputation":1438179,"user_id":22656,"accept_rate":86,"display_name":"Jon Skeet"},"down_vote_count":0,"up_vote_count":16,"is_accepted":false,"score":16,"last_activity_date":1237804251,"creation_date":1237804251,"answer_id":672871,"question_id":672857,"body_markdown":"As suggested in comments, you should really provide a test case to reason about. Reasons behind performance differences will change depending on the test being executed.\r\n\r\nHowever, I&#39;d suggest that the static vs dynamic nature may well have a lot to do with it. For non-virtual calls, the JIT-compiled C#/Java is extremely cheap as it can be determined accurately at JIT-time. Even virtual calls just involve a single level of redirection. When binding becomes dynamic, there&#39;s a wider range of things to consider.\r\n\r\nI don&#39;t know enough details about Python to claim to understand its exact runtime behaviour, which I suspect may vary with version and implementation too. There is such a thing as &quot;python byte code&quot; which is then executed by a virtual machine - whether this virtual machine actually performs JIT-compilation or not is another matter.","title":"Is Python slower than Java/C#?","body":"<p>As suggested in comments, you should really provide a test case to reason about. Reasons behind performance differences will change depending on the test being executed.</p>\n\n<p>However, I'd suggest that the static vs dynamic nature may well have a lot to do with it. For non-virtual calls, the JIT-compiled C#/Java is extremely cheap as it can be determined accurately at JIT-time. Even virtual calls just involve a single level of redirection. When binding becomes dynamic, there's a wider range of things to consider.</p>\n\n<p>I don't know enough details about Python to claim to understand its exact runtime behaviour, which I suspect may vary with version and implementation too. There is such a thing as \"python byte code\" which is then executed by a virtual machine - whether this virtual machine actually performs JIT-compilation or not is another matter.</p>\n"},{"tags":[],"owner":{"account_id":11659,"reputation":53279,"user_id":22595,"accept_rate":77,"display_name":"Michał Niklas"},"down_vote_count":1,"up_vote_count":4,"is_accepted":false,"score":3,"last_activity_date":1237804421,"creation_date":1237804421,"answer_id":672879,"question_id":672857,"body_markdown":"I think opposite. I can do simple program in Python faster than in Java,\r\nand those Python scripts work really fast.\r\n\r\nOf course your question without examples is hard to answer. Maybe you have found slow library, bug etc. Give us more details please.","title":"Is Python slower than Java/C#?","body":"<p>I think opposite. I can do simple program in Python faster than in Java,\nand those Python scripts work really fast.</p>\n\n<p>Of course your question without examples is hard to answer. Maybe you have found slow library, bug etc. Give us more details please.</p>\n"},{"tags":[],"owner":{"account_id":6358,"reputation":386072,"user_id":10661,"accept_rate":91,"display_name":"S.Lott"},"down_vote_count":17,"up_vote_count":142,"is_accepted":true,"score":125,"last_activity_date":1504002089,"creation_date":1237807508,"answer_id":673019,"question_id":672857,"body_markdown":"Don&#39;t conflate Language and Run-Time.\n\nPython (the language) has many run-time implementations.\n\n- CPython is usually interpreted, and will be slower than native-code C#.  It might be slower than Java, depending on the Java JIT compiler.\n\n- JYthon is interpreted in the JVM and has the same performance profile as Java.\n\n- IronPython relies on the same .NET libraries and IL as C#, so the performance difference will be relatively small.\n\n- Python can be translated to native code via PyREX, PyToC, and others.  In this case, it will generally perform as well as C++.  You can -- to an extent -- further optimize C++ and perhaps squeeze out a little bit better performance than unoptimized output from PyREX. \n\n  For more information, see http://arcriley.blogspot.com/2009/03/so-long-pyrex.html\n\nNote that Python (the language) is not slow.  Some Python run-times (CPython, for example) will be slower than native-code C++.","title":"Is Python slower than Java/C#?","body":"<p>Don't conflate Language and Run-Time.</p>\n<p>Python (the language) has many run-time implementations.</p>\n<ul>\n<li><p>CPython is usually interpreted, and will be slower than native-code C#.  It might be slower than Java, depending on the Java JIT compiler.</p>\n</li>\n<li><p>JYthon is interpreted in the JVM and has the same performance profile as Java.</p>\n</li>\n<li><p>IronPython relies on the same .NET libraries and IL as C#, so the performance difference will be relatively small.</p>\n</li>\n<li><p>Python can be translated to native code via PyREX, PyToC, and others.  In this case, it will generally perform as well as C++.  You can -- to an extent -- further optimize C++ and perhaps squeeze out a little bit better performance than unoptimized output from PyREX.</p>\n<p>For more information, see <a href=\"http://arcriley.blogspot.com/2009/03/so-long-pyrex.html\" rel=\"noreferrer\">http://arcriley.blogspot.com/2009/03/so-long-pyrex.html</a></p>\n</li>\n</ul>\n<p>Note that Python (the language) is not slow.  Some Python run-times (CPython, for example) will be slower than native-code C++.</p>\n"},{"tags":[],"owner":{"account_id":3282,"reputation":146296,"user_id":4725,"accept_rate":100,"display_name":"Tom Hawtin - tackline"},"down_vote_count":3,"up_vote_count":65,"is_accepted":false,"score":62,"last_activity_date":1237807848,"creation_date":1237807848,"answer_id":673043,"question_id":672857,"body_markdown":"It is not really correct to ask why Python is slower than Java/C#. How fast is Java? Well, naive interpreters are around ten times slower than optimised compilers. I believe there is a Java bytcode interpreter written in JavaScript - that probably isn&#39;t very fast. So, the intended question appears to be &quot;Why is the CPython language system slower than the equivalent Sun, IBM and Oracle JRE and Microsoft .NET runtime?&quot;\r\n\r\nI believe the correct answer is non-technical. The fastest Java and .NET runtime are faster because they have large full time technical teams developing them in performance-competitive environment.\r\n\r\nDynamic language systems are easy to implement. Any idiot can do it. I have. Static language systems are more complex to design and implement. A simple static system will tend to run much faster than the equivalent just-working dynamic equivalent. However, it is possible for highly optimised dynamic systems to run almost as fast. I understand some Smalltalk implementation were quite good. An often quoted example of a developed dynamic system is the [MIT Lisp Machine][1].\r\n\r\nIn addition if the real grunt is being done by library code, then the language system may not matter. Alternatively, the language may encourage (or give time(!)) to develop more efficient algorithms which can easily wipe out constant factor performance differences.\r\n\r\n\r\n  [1]: http://en.wikipedia.org/wiki/Lisp_machine","title":"Is Python slower than Java/C#?","body":"<p>It is not really correct to ask why Python is slower than Java/C#. How fast is Java? Well, naive interpreters are around ten times slower than optimised compilers. I believe there is a Java bytcode interpreter written in JavaScript - that probably isn't very fast. So, the intended question appears to be \"Why is the CPython language system slower than the equivalent Sun, IBM and Oracle JRE and Microsoft .NET runtime?\"</p>\n\n<p>I believe the correct answer is non-technical. The fastest Java and .NET runtime are faster because they have large full time technical teams developing them in performance-competitive environment.</p>\n\n<p>Dynamic language systems are easy to implement. Any idiot can do it. I have. Static language systems are more complex to design and implement. A simple static system will tend to run much faster than the equivalent just-working dynamic equivalent. However, it is possible for highly optimised dynamic systems to run almost as fast. I understand some Smalltalk implementation were quite good. An often quoted example of a developed dynamic system is the <a href=\"http://en.wikipedia.org/wiki/Lisp_machine\" rel=\"noreferrer\">MIT Lisp Machine</a>.</p>\n\n<p>In addition if the real grunt is being done by library code, then the language system may not matter. Alternatively, the language may encourage (or give time(!)) to develop more efficient algorithms which can easily wipe out constant factor performance differences.</p>\n"},{"tags":[],"owner":{"account_id":23998,"reputation":131987,"user_id":60711,"accept_rate":81,"display_name":"vartec"},"down_vote_count":3,"up_vote_count":13,"is_accepted":false,"score":10,"last_activity_date":1237808846,"creation_date":1237808846,"answer_id":673090,"question_id":672857,"body_markdown":"What you got there is clear example of writing Java in Python:\r\n\r\n     def __init__(self,size):  \r\n         self.first = None  \r\n         last = None  \r\n         for i in range(size):  \r\n             current = Person(i)  \r\n             if self.first == None : self.first = current  \r\n             if last != None :  \r\n                 last.next = current  \r\n                 current.prev = last  \r\n             last = current  \r\n         self.first.prev = last  \r\n         last.next = self.first  \r\n\r\nA bit more pythonic:\r\n\r\n     def __init__(self,size):  \r\n         chain = [Person(i) for i in range(size)]\r\n         self.first = chain[0]\r\n         chain = zip(chain, chain[1:].append(chain[0]))\r\n         for p,n in chain:\r\n            p.next = n\r\n            n.prev = p\r\n         \r\n\r\n","title":"Is Python slower than Java/C#?","body":"<p>What you got there is clear example of writing Java in Python:</p>\n\n<pre><code> def __init__(self,size):  \n     self.first = None  \n     last = None  \n     for i in range(size):  \n         current = Person(i)  \n         if self.first == None : self.first = current  \n         if last != None :  \n             last.next = current  \n             current.prev = last  \n         last = current  \n     self.first.prev = last  \n     last.next = self.first  \n</code></pre>\n\n<p>A bit more pythonic:</p>\n\n<pre><code> def __init__(self,size):  \n     chain = [Person(i) for i in range(size)]\n     self.first = chain[0]\n     chain = zip(chain, chain[1:].append(chain[0]))\n     for p,n in chain:\n        p.next = n\n        n.prev = p\n</code></pre>\n"},{"tags":[],"owner":{"account_id":7354,"reputation":672,"user_id":12754,"display_name":"Dhananjay Nene"},"down_vote_count":0,"up_vote_count":15,"is_accepted":false,"score":15,"last_activity_date":1237810785,"creation_date":1237810785,"answer_id":673173,"question_id":672857,"body_markdown":"It boils down to the fact that the compilation phase has lesser information to work with and hence the runtime needs to do more work in case of duck typed (dynamically typed) languages. \r\n\r\nThus if I am making the method invocation foo.bar(), in case of Java or C++ the invocation to bar can be optimized in the compilation process by discovering the type of &quot;foo&quot; and then directly invoking the method at the memory location where the compiler knows it will be found. Since a python or any other dynamically typed language compiler does not know what type the object foo belongs to, it has to do a type check at runtime and then look up the address of the bar method and then invoke it. \r\n\r\nThere are other difficulties a python compiler writer struggles with as well, though the one above hopefully adequately gives an indication. So even with the best compiler writers, statically typed languages are likely to perform much better at runtime.\r\n\r\nWhere dynamically typed languages score are typically in the development time. Due to fewer lines of code to write and maintain, and no compile wait times for developers, the development often goes through much faster.","title":"Is Python slower than Java/C#?","body":"<p>It boils down to the fact that the compilation phase has lesser information to work with and hence the runtime needs to do more work in case of duck typed (dynamically typed) languages. </p>\n\n<p>Thus if I am making the method invocation foo.bar(), in case of Java or C++ the invocation to bar can be optimized in the compilation process by discovering the type of \"foo\" and then directly invoking the method at the memory location where the compiler knows it will be found. Since a python or any other dynamically typed language compiler does not know what type the object foo belongs to, it has to do a type check at runtime and then look up the address of the bar method and then invoke it. </p>\n\n<p>There are other difficulties a python compiler writer struggles with as well, though the one above hopefully adequately gives an indication. So even with the best compiler writers, statically typed languages are likely to perform much better at runtime.</p>\n\n<p>Where dynamically typed languages score are typically in the development time. Due to fewer lines of code to write and maintain, and no compile wait times for developers, the development often goes through much faster.</p>\n"},{"tags":[],"owner":{"account_id":21100,"reputation":37467,"user_id":51025,"accept_rate":94,"display_name":"DNS"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1237813446,"creation_date":1237813446,"answer_id":673289,"question_id":672857,"body_markdown":"I would argue that the ease and simplicity of writing Python code makes it possible to write more complex code; for example, code that takes advantage of multi-core processors.  Since per-core performance has been mostly stagnant for the past 5-10 years, I don&#39;t think it&#39;s clear that Python programs (whether they&#39;re running on CPython or something else) are slower in the long run.","title":"Is Python slower than Java/C#?","body":"<p>I would argue that the ease and simplicity of writing Python code makes it possible to write more complex code; for example, code that takes advantage of multi-core processors.  Since per-core performance has been mostly stagnant for the past 5-10 years, I don't think it's clear that Python programs (whether they're running on CPython or something else) are slower in the long run.</p>\n"},{"tags":[],"owner":{"account_id":14956,"reputation":30472,"user_id":31141,"accept_rate":79,"display_name":"Marko"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1443651027,"creation_date":1237815040,"answer_id":673369,"question_id":672857,"body_markdown":"It doesn&#39;t have anything to do with the languages themselves, it&#39;s just the fact that java **implementation** and **runtime system** (JVM) are very high quality, and that lots of resources have been invested in stability, scalability and performance improvements over the years.\r\n\r\nContrast that to the fact that CPython implementation just recently implemented eg threaded dispatch in its interpreter which gave it performance boost of up to 20% for certain problems. It&#39;s not a good thing as it sounds, it is bad because that kind of basic optimization should be there from the day one.","title":"Is Python slower than Java/C#?","body":"<p>It doesn't have anything to do with the languages themselves, it's just the fact that java <strong>implementation</strong> and <strong>runtime system</strong> (JVM) are very high quality, and that lots of resources have been invested in stability, scalability and performance improvements over the years.</p>\n\n<p>Contrast that to the fact that CPython implementation just recently implemented eg threaded dispatch in its interpreter which gave it performance boost of up to 20% for certain problems. It's not a good thing as it sounds, it is bad because that kind of basic optimization should be there from the day one.</p>\n"},{"tags":[],"owner":{"account_id":1603,"reputation":193453,"user_id":2147,"accept_rate":85,"display_name":"Jason Baker"},"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1240781820,"creation_date":1237816380,"answer_id":673441,"question_id":672857,"body_markdown":"I think it&#39;s ultimately that Python doesn&#39;t go as far as it can with optimizations.  Most of the optimization techniques that are common are for static languages.  There *are* optimization techniques for dynamic languages, but the modern ones don&#39;t seem to make as much use of them as they could.  Steve Yegge has an excellent [blog post on the subject][1].\r\n\r\n**EDIT**:  I just wanted to point out that I&#39;m not necessarily stating this to be critical of Python.  I prefer simplicity over unnecessary speed any day. \r\n\r\n\r\n  [1]: http://steve-yegge.blogspot.com/2008/05/dynamic-languages-strike-back.html","title":"Is Python slower than Java/C#?","body":"<p>I think it's ultimately that Python doesn't go as far as it can with optimizations.  Most of the optimization techniques that are common are for static languages.  There <em>are</em> optimization techniques for dynamic languages, but the modern ones don't seem to make as much use of them as they could.  Steve Yegge has an excellent <a href=\"http://steve-yegge.blogspot.com/2008/05/dynamic-languages-strike-back.html\" rel=\"nofollow noreferrer\">blog post on the subject</a>.</p>\n\n<p><strong>EDIT</strong>:  I just wanted to point out that I'm not necessarily stating this to be critical of Python.  I prefer simplicity over unnecessary speed any day. </p>\n"},{"tags":[],"owner":{"account_id":876508,"reputation":1299,"user_id":95520,"display_name":"Saleh Al-Zaid"},"down_vote_count":2,"up_vote_count":5,"is_accepted":false,"score":3,"last_activity_date":1240764902,"creation_date":1240764902,"answer_id":791183,"question_id":672857,"body_markdown":"Since it&#39;s interpreted and not compiled.. it should be slower in execution time. \r\n\r\nAs a table mentioned in *Code Complete (second edition)* book, page 600, \r\n\r\nC# equals C++ in *execution time* (1:1). And Python is slower above hundred times than C++ in *execution time* (&gt;100:1).\r\n\r\nAnd Java is slower than C++ by one time and a half (1.5:1). \r\n\r\nThese statistics are on average. I don&#39;t know who made this study, but seems interesting.   ","title":"Is Python slower than Java/C#?","body":"<p>Since it's interpreted and not compiled.. it should be slower in execution time. </p>\n\n<p>As a table mentioned in <em>Code Complete (second edition)</em> book, page 600, </p>\n\n<p>C# equals C++ in <em>execution time</em> (1:1). And Python is slower above hundred times than C++ in <em>execution time</em> (>100:1).</p>\n\n<p>And Java is slower than C++ by one time and a half (1.5:1). </p>\n\n<p>These statistics are on average. I don't know who made this study, but seems interesting.   </p>\n"},{"tags":[],"owner":{"account_id":19562,"reputation":30712,"user_id":45935,"accept_rate":100,"display_name":"Jim Ferrans"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1248267481,"creation_date":1248267481,"answer_id":1165085,"question_id":672857,"body_markdown":"This type of question can&#39;t be answered just by qualitative reasoning, you need good benchmarks to back it up.  Here&#39;s one set that compare [Python 3 vs C# Mono][1] and find Python to be 3 to 300 times slower.  The Python vs. Java results are similar.  (The usual cautions about interpreting benchmarks apply.)\r\n\r\nThese benchmarks also report the source code size, and Python was significantly more concise than Java and C#.\r\n\r\n  [1]: http://shootout.alioth.debian.org/u32q/benchmark.php?test=all&amp;lang=python3&amp;lang2=csharp&amp;box=1","title":"Is Python slower than Java/C#?","body":"<p>This type of question can't be answered just by qualitative reasoning, you need good benchmarks to back it up.  Here's one set that compare <a href=\"http://shootout.alioth.debian.org/u32q/benchmark.php?test=all&amp;lang=python3&amp;lang2=csharp&amp;box=1\" rel=\"nofollow noreferrer\">Python 3 vs C# Mono</a> and find Python to be 3 to 300 times slower.  The Python vs. Java results are similar.  (The usual cautions about interpreting benchmarks apply.)</p>\n\n<p>These benchmarks also report the source code size, and Python was significantly more concise than Java and C#.</p>\n"},{"tags":[],"owner":{"account_id":46149,"reputation":4299,"user_id":136264,"accept_rate":62,"display_name":"wierob"},"down_vote_count":5,"up_vote_count":44,"is_accepted":false,"score":39,"last_activity_date":1675218484,"creation_date":1248441191,"answer_id":1177553,"question_id":672857,"body_markdown":"As mentioned in the other answers this depends on the run-time system as well as the task at hand. So the standard (C)Python is not necessarily slower than Java or C#. Some of its modules are implemented in C. Thus combining speed of a *native* implementation with Python&#39;s language.\r\n\r\nWe did a small experiment: We compared the execution time of a Factorial computation in different languages. The test was actually intended to evaluate the performance of arbitrary-precision integers implementations.\r\n&lt;pre&gt;\r\ntestee. language arbitrary-precision integers run-time\r\n\r\n     1. Java     java.math.BigInteger         JRE 6.13\r\n     2. .NET     System.Numerics.BigInteger   MS CLR 4.0\r\n     3. Python   long                         Active Python 2.6.2.2\r\n     4. Squeak   BigInt                       Squeak 3.10.2\r\n     5. .NET     Mono.Math.BigInteger         MS CLR 4.0\r\n\r\nresults:\r\n\r\n                 1)         2)       3)       4)        5)\r\n   10.000!      343 ms    137 ms    91 ms  1.200 ms    169 ms\r\n   20.000!    1.480 ms    569 ms   372 ms  1.457 ms    701 ms\r\n   30.000!    3.424 ms  1.243 ms   836 ms  3.360 ms  1.675 ms\r\n   40.000!    6.340 ms  2.101 ms 1.975 ms  6.738 ms  3.042 ms\r\n   50.000!   10.493 ms  3.763 ms 3.658 ms 10.019 ms  5.242 ms\r\n   60.000!   15.586 ms  7.683 ms 5.788 ms 14.241 ms 10.000 ms\r\n&lt;/pre&gt;\r\n[![alt text][1]][1]  \n&lt;sub&gt;(source: [mycsharp.de](http://www.mycsharp.de/wbb2/attachment.php?attachmentid=6909&amp;sid=0d5aa62b522d005d9e7089785b5d19f1))&lt;/sub&gt;  \n\r\n\r\nThe bar chart shows the results. Python is the clear winner. As far as I know Python uses the [Karatsuba-algorithm][2] to multiply large integers, which explains the speed.\r\n\r\nBesides, Python&#39;s &quot;arbitrary-precision integers&quot;-type is the built-in `long`. Hence you don&#39;t even need special type handling which is required for Java&#39;s BigInteger-class.\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/tiM4L.gif\r\n  [2]: https://en.wikipedia.org/wiki/Karatsuba_algorithm","title":"Is Python slower than Java/C#?","body":"<p>As mentioned in the other answers this depends on the run-time system as well as the task at hand. So the standard (C)Python is not necessarily slower than Java or C#. Some of its modules are implemented in C. Thus combining speed of a <em>native</em> implementation with Python's language.</p>\n<p>We did a small experiment: We compared the execution time of a Factorial computation in different languages. The test was actually intended to evaluate the performance of arbitrary-precision integers implementations.</p>\n<pre>\ntestee. language arbitrary-precision integers run-time\n\n     1. Java     java.math.BigInteger         JRE 6.13\n     2. .NET     System.Numerics.BigInteger   MS CLR 4.0\n     3. Python   long                         Active Python 2.6.2.2\n     4. Squeak   BigInt                       Squeak 3.10.2\n     5. .NET     Mono.Math.BigInteger         MS CLR 4.0\n\nresults:\n\n                 1)         2)       3)       4)        5)\n   10.000!      343 ms    137 ms    91 ms  1.200 ms    169 ms\n   20.000!    1.480 ms    569 ms   372 ms  1.457 ms    701 ms\n   30.000!    3.424 ms  1.243 ms   836 ms  3.360 ms  1.675 ms\n   40.000!    6.340 ms  2.101 ms 1.975 ms  6.738 ms  3.042 ms\n   50.000!   10.493 ms  3.763 ms 3.658 ms 10.019 ms  5.242 ms\n   60.000!   15.586 ms  7.683 ms 5.788 ms 14.241 ms 10.000 ms\n</pre>\n<p><a href=\"https://i.stack.imgur.com/tiM4L.gif\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/tiM4L.gif\" alt=\"alt text\" /></a><br />\n<sub>(source: <a href=\"http://www.mycsharp.de/wbb2/attachment.php?attachmentid=6909&amp;sid=0d5aa62b522d005d9e7089785b5d19f1\" rel=\"nofollow noreferrer\">mycsharp.de</a>)</sub></p>\n<p>The bar chart shows the results. Python is the clear winner. As far as I know Python uses the <a href=\"https://en.wikipedia.org/wiki/Karatsuba_algorithm\" rel=\"nofollow noreferrer\">Karatsuba-algorithm</a> to multiply large integers, which explains the speed.</p>\n<p>Besides, Python's &quot;arbitrary-precision integers&quot;-type is the built-in <code>long</code>. Hence you don't even need special type handling which is required for Java's BigInteger-class.</p>\n"},{"tags":[],"owner":{"account_id":1343324,"reputation":1382,"user_id":1284552,"accept_rate":100,"display_name":"Ravi Kumar"},"down_vote_count":3,"up_vote_count":34,"is_accepted":false,"score":31,"last_activity_date":1374505727,"creation_date":1374505727,"answer_id":17791079,"question_id":672857,"body_markdown":"Simply - **Python is slow**. \r\n\r\nNo matter what interpreter (currently available) you use, it is slower than Java and C. In various benchmarks, its slower than Ruby and PHP.\r\nDo not depend on other&#39;s answers, check and verify yourself.\r\n\r\n [http://benchmarksgame.alioth.debian.org/u64q/benchmark.php?test=all&amp;lang=python3&amp;lang2=java&amp;data=u64q][1] \r\n\r\nPersonally I do not think, there is much serious contribution and development done on getting python faster. Since the productivity is good in python and it solves some of problem straight forward, speed/performance is not taken seriously. There are some architecture issues too preventing Python getting performance tweaks.\r\n\r\n**Disclaimer** - This answer probably will hurt Python lovers. I too am Python developer, loves developing webapps in Django/Flask/Pyramid rather than Spring (Java). But I see practically in my work and experience, how Python is slower. The speed is not always my priority. But I do stand with them, who says Python Interpreter should get oiling and greasing or total engine change to at least stand in marathon. It&#39;s a mainstream programming language.\r\n\r\n\r\n  [1]: http://benchmarksgame.alioth.debian.org/u64q/benchmark.php?test=all&amp;lang=python3&amp;lang2=java&amp;data=u64q","title":"Is Python slower than Java/C#?","body":"<p>Simply - <strong>Python is slow</strong>. </p>\n\n<p>No matter what interpreter (currently available) you use, it is slower than Java and C. In various benchmarks, its slower than Ruby and PHP.\nDo not depend on other's answers, check and verify yourself.</p>\n\n<p><a href=\"http://benchmarksgame.alioth.debian.org/u64q/benchmark.php?test=all&amp;lang=python3&amp;lang2=java&amp;data=u64q\">http://benchmarksgame.alioth.debian.org/u64q/benchmark.php?test=all&amp;lang=python3&amp;lang2=java&amp;data=u64q</a> </p>\n\n<p>Personally I do not think, there is much serious contribution and development done on getting python faster. Since the productivity is good in python and it solves some of problem straight forward, speed/performance is not taken seriously. There are some architecture issues too preventing Python getting performance tweaks.</p>\n\n<p><strong>Disclaimer</strong> - This answer probably will hurt Python lovers. I too am Python developer, loves developing webapps in Django/Flask/Pyramid rather than Spring (Java). But I see practically in my work and experience, how Python is slower. The speed is not always my priority. But I do stand with them, who says Python Interpreter should get oiling and greasing or total engine change to at least stand in marathon. It's a mainstream programming language.</p>\n"}],"owner":{"account_id":11449,"reputation":46738,"user_id":22076,"accept_rate":94,"display_name":"yesraaj"},"comment_count":16,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":102384,"favorite_count":0,"down_vote_count":4,"up_vote_count":79,"closed_date":1374519143,"accepted_answer_id":673019,"answer_count":13,"score":75,"last_activity_date":1675218484,"creation_date":1237803973,"question_id":672857,"body_markdown":"Is Python slower than Java/C#?\r\n\r\n[performance-comparison-c-java-python-ruby-jython-jruby-groovy][1]\r\n\r\nHere is a project that optimizes CPython: [unladen-swallow][2] \r\n\r\n\r\n  [1]: http://blog.dhananjaynene.com/2008/07/performance-comparison-c-java-python-ruby-jython-jruby-groovy/\r\n  [2]: http://code.google.com/p/unladen-swallow/","title":"Is Python slower than Java/C#?","body":"<p>Is Python slower than Java/C#?</p>\n\n<p><a href=\"http://blog.dhananjaynene.com/2008/07/performance-comparison-c-java-python-ruby-jython-jruby-groovy/\" rel=\"noreferrer\">performance-comparison-c-java-python-ruby-jython-jruby-groovy</a></p>\n\n<p>Here is a project that optimizes CPython: <a href=\"http://code.google.com/p/unladen-swallow/\" rel=\"noreferrer\">unladen-swallow</a> </p>\n"},{"tags":["java","date","datetime","parsing","datetime-format"],"comments":[{"owner":{"account_id":74704,"reputation":11534,"user_id":214525,"accept_rate":100,"display_name":"f1sh"},"score":1,"creation_date":1675159601,"post_id":75295483,"comment_id":132863779,"body_markdown":"Have you tried to run it?","body":"Have you tried to run it?"},{"owner":{"account_id":6651855,"reputation":224830,"user_id":5133585,"accept_rate":96,"display_name":"Sweeper"},"score":2,"creation_date":1675159605,"post_id":75295483,"comment_id":132863782,"body_markdown":"That is a `LocalDate`, not a `ZonedDateTime`. There is neither a zone nor a time in that string.","body":"That is a <code>LocalDate</code>, not a <code>ZonedDateTime</code>. There is neither a zone nor a time in that string."},{"owner":{"account_id":1894950,"reputation":18007,"user_id":1712135,"display_name":"deHaar"},"score":0,"creation_date":1675161099,"post_id":75295483,"comment_id":132864245,"body_markdown":"What is the resulting type/value in Go and what do you expect/want it to be in Java? Looks like @Sweeper is right, the result might just be a *date* without *time (of day)*, offset or zone.","body":"What is the resulting type/value in Go and what do you expect/want it to be in Java? Looks like @Sweeper is right, the result might just be a <i>date</i> without <i>time (of day)</i>, offset or zone."}],"answers":[{"tags":[],"owner":{"account_id":6651855,"reputation":224830,"user_id":5133585,"accept_rate":96,"display_name":"Sweeper"},"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1675214971,"creation_date":1675162126,"answer_id":75296009,"question_id":75295483,"body_markdown":"A quick look at the [Go documentation][1] reveals that:\r\n\r\n&gt; A `Time` represents an instant in time with nanosecond precision.\r\n\r\nWhich is similar to Java&#39;s `Instant` type.\r\n\r\nAlso, from the docs of [`Parse`][2],\r\n\r\n&gt; Elements omitted from the layout are assumed to be zero or, when zero is impossible, one, so parsing &quot;3:04pm&quot; returns the time corresponding to Jan 1, year 0, 15:04:00 UTC (note that because the year is 0, this time is before the zero Time).\r\n&gt;\r\n&gt; [...]\r\n&gt;\r\n&gt; In the absence of a time zone indicator, Parse returns a time in UTC.\r\n\r\nKnowing this, we can first create a `LocalDate` from your string that does not contain any zone or time information, then &quot;assume&quot; (as the Go documentation calls it) that it is at the start of day, and at the UTC zone, in order to convert it to an `Instant`:\r\n\r\n```\r\nvar date = LocalDate.parse(someString, DateTimeFormatter.BASIC_ISO_DATE);\r\nvar instant = date.atStartOfDay(ZoneOffset.UTC).toInstant();\r\n```\r\n\r\n\r\n  [1]: https://pkg.go.dev/time#Time\r\n  [2]: https://pkg.go.dev/time#Parse","title":"Java analog of time.Parse from GoLang","body":"<p>A quick look at the <a href=\"https://pkg.go.dev/time#Time\" rel=\"nofollow noreferrer\">Go documentation</a> reveals that:</p>\n<blockquote>\n<p>A <code>Time</code> represents an instant in time with nanosecond precision.</p>\n</blockquote>\n<p>Which is similar to Java's <code>Instant</code> type.</p>\n<p>Also, from the docs of <a href=\"https://pkg.go.dev/time#Parse\" rel=\"nofollow noreferrer\"><code>Parse</code></a>,</p>\n<blockquote>\n<p>Elements omitted from the layout are assumed to be zero or, when zero is impossible, one, so parsing &quot;3:04pm&quot; returns the time corresponding to Jan 1, year 0, 15:04:00 UTC (note that because the year is 0, this time is before the zero Time).</p>\n<p>[...]</p>\n<p>In the absence of a time zone indicator, Parse returns a time in UTC.</p>\n</blockquote>\n<p>Knowing this, we can first create a <code>LocalDate</code> from your string that does not contain any zone or time information, then &quot;assume&quot; (as the Go documentation calls it) that it is at the start of day, and at the UTC zone, in order to convert it to an <code>Instant</code>:</p>\n<pre><code>var date = LocalDate.parse(someString, DateTimeFormatter.BASIC_ISO_DATE);\nvar instant = date.atStartOfDay(ZoneOffset.UTC).toInstant();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1894950,"reputation":18007,"user_id":1712135,"display_name":"deHaar"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1675178590,"creation_date":1675162289,"answer_id":75296045,"question_id":75295483,"body_markdown":"Since the result of the line of Go you provided includes an offset, a zone and the time of day, you will have to explicitly attach those and use a specific formatter in Java:\r\n\r\n```Java\r\npublic static void main(String[] args) {\r\n\t// example input\r\n\tString date = &quot;20060102&quot;;\r\n\t// parse the date first, using a built-in formatter\r\n\tLocalDate localDate = LocalDate.parse(date, DateTimeFormatter.BASIC_ISO_DATE);\r\n\t// then add the minimum time of day and the desired zone id\r\n\tZonedDateTime zdt = ZonedDateTime.of(localDate, LocalTime.MIN, ZoneId.of(&quot;UTC&quot;));\r\n\t// the formatter\r\n\tDateTimeFormatter dtfOut = DateTimeFormatter.ofPattern(&quot;uuuu-MM-dd HH:mm:ss Z VV&quot;, Locale.ENGLISH);\r\n\t// the result of the Go statement\r\n\tString expected = &quot;2006-01-02 00:00:00 +0000 UTC&quot;;\r\n\t// print the result\r\n\tSystem.out.println(&quot;Expected: &quot; + expected);\r\n\tSystem.out.println(&quot;Actual:   &quot; + zdt.format(dtfOut));\r\n}\r\n```\r\n\r\nOutput:\r\n\r\n```none\r\nExpected: 2006-01-02 00:00:00 +0000 UTC\r\nActual:   2006-01-02 00:00:00 +0000 UTC\r\n```\r\n\r\n---\r\nPosts about `y` and `u` (actually accepted answers to the questions)\r\n- [`uuuu` versus `yyyy` in `DateTimeFormatter` formatting pattern codes in Java](https://stackoverflow.com/a/41182911/1712135)\r\n- [What is the difference between year and year-of-era?](https://stackoverflow.com/a/29014580/1712135)","title":"Java analog of time.Parse from GoLang","body":"<p>Since the result of the line of Go you provided includes an offset, a zone and the time of day, you will have to explicitly attach those and use a specific formatter in Java:</p>\n<pre><code>public static void main(String[] args) {\n    // example input\n    String date = &quot;20060102&quot;;\n    // parse the date first, using a built-in formatter\n    LocalDate localDate = LocalDate.parse(date, DateTimeFormatter.BASIC_ISO_DATE);\n    // then add the minimum time of day and the desired zone id\n    ZonedDateTime zdt = ZonedDateTime.of(localDate, LocalTime.MIN, ZoneId.of(&quot;UTC&quot;));\n    // the formatter\n    DateTimeFormatter dtfOut = DateTimeFormatter.ofPattern(&quot;uuuu-MM-dd HH:mm:ss Z VV&quot;, Locale.ENGLISH);\n    // the result of the Go statement\n    String expected = &quot;2006-01-02 00:00:00 +0000 UTC&quot;;\n    // print the result\n    System.out.println(&quot;Expected: &quot; + expected);\n    System.out.println(&quot;Actual:   &quot; + zdt.format(dtfOut));\n}\n</code></pre>\n<p>Output:</p>\n<pre class=\"lang-none prettyprint-override\"><code>Expected: 2006-01-02 00:00:00 +0000 UTC\nActual:   2006-01-02 00:00:00 +0000 UTC\n</code></pre>\n<hr />\n<p>Posts about <code>y</code> and <code>u</code> (actually accepted answers to the questions)</p>\n<ul>\n<li><a href=\"https://stackoverflow.com/a/41182911/1712135\"><code>uuuu</code> versus <code>yyyy</code> in <code>DateTimeFormatter</code> formatting pattern codes in Java</a></li>\n<li><a href=\"https://stackoverflow.com/a/29014580/1712135\">What is the difference between year and year-of-era?</a></li>\n</ul>\n"}],"owner":{"account_id":3163862,"reputation":36940,"user_id":2674303,"accept_rate":62,"display_name":"gstackoverflow"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":445,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"accepted_answer_id":75296009,"answer_count":2,"score":-1,"last_activity_date":1675214971,"creation_date":1675159483,"question_id":75295483,"body_markdown":"I am rewriting piece of GO code to java and I have doubths about the following snippet.\r\n\r\nGo code:\r\n\r\n    time.Parse(&quot;20060102&quot;, someString);\r\n\r\nIs it analog of ?\r\n\r\n    ZonedDateTime zdt = ZonedDateTime.parse(credElements[0], DateTimeFormatter.ofPattern(&quot;yyyyMMdd&quot;)\r\n\r\n","title":"Java analog of time.Parse from GoLang","body":"<p>I am rewriting piece of GO code to java and I have doubths about the following snippet.</p>\n<p>Go code:</p>\n<pre><code>time.Parse(&quot;20060102&quot;, someString);\n</code></pre>\n<p>Is it analog of ?</p>\n<pre><code>ZonedDateTime zdt = ZonedDateTime.parse(credElements[0], DateTimeFormatter.ofPattern(&quot;yyyyMMdd&quot;)\n</code></pre>\n"},{"tags":["java","hashmap","multimap"],"comments":[{"owner":{"account_id":11391822,"reputation":148,"user_id":8351575,"display_name":"svrdoljak"},"score":0,"creation_date":1675208489,"post_id":75304247,"comment_id":132878604,"body_markdown":"Stream trough each map and collect the doubles and calculate the average.","body":"Stream trough each map and collect the doubles and calculate the average."},{"owner":{"account_id":11342805,"reputation":919,"user_id":8316275,"accept_rate":52,"display_name":"user565"},"score":0,"creation_date":1675208911,"post_id":75304247,"comment_id":132878693,"body_markdown":"How and where to link the key after calculating the average?","body":"How and where to link the key after calculating the average?"},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1675209258,"post_id":75304247,"comment_id":132878748,"body_markdown":"The key would have nothing to do with the average would it?","body":"The key would have nothing to do with the average would it?"},{"owner":{"account_id":11342805,"reputation":919,"user_id":8316275,"accept_rate":52,"display_name":"user565"},"score":0,"creation_date":1675209314,"post_id":75304247,"comment_id":132878758,"body_markdown":"@g00se Well, this is why I am using HashMap, I need to find the Key and then decide which Key in the collection of HashMap has a lower average.","body":"@g00se Well, this is why I am using HashMap, I need to find the Key and then decide which Key in the collection of HashMap has a lower average."},{"owner":{"account_id":1085259,"reputation":78314,"user_id":1081110,"display_name":"Dawood ibn Kareem"},"score":0,"creation_date":1675209486,"post_id":75304247,"comment_id":132878789,"body_markdown":"What do you mean by &quot;key in the collection of HashMap&quot;?  What kind of collection is it?  Do you actually have a HashMap of HashMaps, or something like that?","body":"What do you mean by &quot;key in the collection of HashMap&quot;?  What kind of collection is it?  Do you actually have a HashMap of HashMaps, or something like that?"},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1675209654,"post_id":75304247,"comment_id":132878805,"body_markdown":"So the average in your particular case is 1.75. How does the key fit in with that value?","body":"So the average in your particular case is 1.75. How does the key fit in with that value?"},{"owner":{"account_id":11342805,"reputation":919,"user_id":8316275,"accept_rate":52,"display_name":"user565"},"score":0,"creation_date":1675209939,"post_id":75304247,"comment_id":132878838,"body_markdown":"No, I want to calculate the average on each Key, for example, A1 average is (2.0+3.0)/2= 2.5, A2 average is (1.0,1.0)/2=1. \nAfter that method will return A2 in response because it has a lower average.","body":"No, I want to calculate the average on each Key, for example, A1 average is (2.0+3.0)/2= 2.5, A2 average is (1.0,1.0)/2=1.  After that method will return A2 in response because it has a lower average."},{"owner":{"account_id":27393528,"reputation":353,"user_id":20896122,"display_name":"undefined symbol"},"score":0,"creation_date":1675210082,"post_id":75304247,"comment_id":132878857,"body_markdown":"If you have one HashMap as shown, then you **don&#39;t have** two instances of the A1 (or A2) key.   Problem solved!","body":"If you have one HashMap as shown, then you <b>don&#39;t have</b> two instances of the A1 (or A2) key.   Problem solved!"},{"owner":{"account_id":11342805,"reputation":919,"user_id":8316275,"accept_rate":52,"display_name":"user565"},"score":0,"creation_date":1675210166,"post_id":75304247,"comment_id":132878878,"body_markdown":"@undefinedsymbol Well, this is by design as I mentioned in my question that I am also using MultiMap.","body":"@undefinedsymbol Well, this is by design as I mentioned in my question that I am also using MultiMap."},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1675210245,"post_id":75304247,"comment_id":132878891,"body_markdown":"So it looks like you&#39;ve separated out the multimap into separate maps. If that&#39;s the case, why are you not calculating the average directly on the multimap? That would seem to make more sense","body":"So it looks like you&#39;ve separated out the multimap into separate maps. If that&#39;s the case, why are you not calculating the average directly on the multimap? That would seem to make more sense"}],"answers":[{"tags":[],"owner":{"account_id":6714862,"reputation":16230,"user_id":5176992,"display_name":"Eritrean"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1675210684,"creation_date":1675210684,"answer_id":75304454,"question_id":75304247,"body_markdown":"Assuming your collection of maps is something similar to this:\r\n\r\n    List&lt;Map&lt;String, Double&gt;&gt; mapList = List.of(\r\n            Map.of(&quot;A1&quot;, 2.0),\r\n            Map.of(&quot;A2&quot;, 1.0),\r\n            Map.of(&quot;A1&quot;, 3.0),\r\n            Map.of(&quot;A2&quot;, 1.0));\r\n\r\nYou can just stream over the list (collection), stream over the entries of each map flatmaping to a stream of entries, collect to a new map grouping by key and averaging value, stream over the resulting map and find the min using a comparator by value:\r\n\r\n    import java.util.List;\r\n    import java.util.Map;\r\n    import java.util.Map.Entry;\r\n    import java.util.stream.Collectors;\r\n\r\n    ....\r\n\r\n\r\n\r\n    Entry&lt;String, Double&gt; entryWithMinAvg =\r\n            mapList.stream()\r\n                   .flatMap(m -&gt; m.entrySet().stream())\r\n                   .collect(Collectors.groupingBy(Entry::getKey, Collectors.averagingDouble(Entry::getValue)))\r\n                   .entrySet()\r\n                   .stream()\r\n                   .min(Entry.comparingByValue())\r\n                   .get();\r\n\r\n    System.out.println(entryWithMinAvg);","title":"How to calculate average from Collection of HashMap&lt;String, Double&gt;","body":"<p>Assuming your collection of maps is something similar to this:</p>\n<pre><code>List&lt;Map&lt;String, Double&gt;&gt; mapList = List.of(\n        Map.of(&quot;A1&quot;, 2.0),\n        Map.of(&quot;A2&quot;, 1.0),\n        Map.of(&quot;A1&quot;, 3.0),\n        Map.of(&quot;A2&quot;, 1.0));\n</code></pre>\n<p>You can just stream over the list (collection), stream over the entries of each map flatmaping to a stream of entries, collect to a new map grouping by key and averaging value, stream over the resulting map and find the min using a comparator by value:</p>\n<pre><code>import java.util.List;\nimport java.util.Map;\nimport java.util.Map.Entry;\nimport java.util.stream.Collectors;\n\n....\n\n\n\nEntry&lt;String, Double&gt; entryWithMinAvg =\n        mapList.stream()\n               .flatMap(m -&gt; m.entrySet().stream())\n               .collect(Collectors.groupingBy(Entry::getKey, Collectors.averagingDouble(Entry::getValue)))\n               .entrySet()\n               .stream()\n               .min(Entry.comparingByValue())\n               .get();\n\nSystem.out.println(entryWithMinAvg);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4563475,"reputation":27298,"user_id":3705127,"accept_rate":52,"display_name":"sprinter"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1675214649,"creation_date":1675214649,"answer_id":75304774,"question_id":75304247,"body_markdown":"The most straightforward multi-map implementation using standard Java collections is a `Map&lt;K,List&lt;V&gt;&gt;` - i.e. a map from each key to a list of values for that key. It is relatively trivial to add to it using \r\n\r\n    Map&lt;String,List&lt;Double&gt;&gt; multimap;\r\n    multimap.computeIfAbsent(key, k -&gt; new ArrayList&lt;&gt;()).add(value);\r\n\r\nFinding the key with the minimum average is also trivial using a comparator to compare the averages:\r\n\r\n    Comparator&lt;String&gt; compareAverageKeys = Comparator.comparingDouble(\r\n        k -&gt; multimap.get(k).stream().mapToDouble(v -&gt; v).average().get());\r\n    multimap.keys().stream().min(compareAverageKeys);\r\n\r\nIf your only reason for creating the collection is to find the average then you could just keep the stats rather than the keys:\r\n\r\n    Map&lt;String,DoubleSummaryStatistics&gt; stats;\r\n\r\n    stats.computeIfAbsent(key, k -&gt; new DoubleSummaryStatistics()).add(value);\r\n\r\nThen finding the key with the minimum is much simpler and more efficient:\r\n\r\n    stats.keys().stream().min(Comparator.comparingDouble(k -&gt; stats.get(k).getAverage());","title":"How to calculate average from Collection of HashMap&lt;String, Double&gt;","body":"<p>The most straightforward multi-map implementation using standard Java collections is a <code>Map&lt;K,List&lt;V&gt;&gt;</code> - i.e. a map from each key to a list of values for that key. It is relatively trivial to add to it using</p>\n<pre><code>Map&lt;String,List&lt;Double&gt;&gt; multimap;\nmultimap.computeIfAbsent(key, k -&gt; new ArrayList&lt;&gt;()).add(value);\n</code></pre>\n<p>Finding the key with the minimum average is also trivial using a comparator to compare the averages:</p>\n<pre><code>Comparator&lt;String&gt; compareAverageKeys = Comparator.comparingDouble(\n    k -&gt; multimap.get(k).stream().mapToDouble(v -&gt; v).average().get());\nmultimap.keys().stream().min(compareAverageKeys);\n</code></pre>\n<p>If your only reason for creating the collection is to find the average then you could just keep the stats rather than the keys:</p>\n<pre><code>Map&lt;String,DoubleSummaryStatistics&gt; stats;\n\nstats.computeIfAbsent(key, k -&gt; new DoubleSummaryStatistics()).add(value);\n</code></pre>\n<p>Then finding the key with the minimum is much simpler and more efficient:</p>\n<pre><code>stats.keys().stream().min(Comparator.comparingDouble(k -&gt; stats.get(k).getAverage());\n</code></pre>\n"}],"owner":{"account_id":11342805,"reputation":919,"user_id":8316275,"accept_rate":52,"display_name":"user565"},"comment_count":10,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":74,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75304454,"answer_count":2,"score":0,"last_activity_date":1675214649,"creation_date":1675208355,"question_id":75304247,"body_markdown":"I have a Collection of HashMap&lt;String, Duble&gt; which I am getting from multimap. I want to calculate the average on Maps values and calculate which Map key is having minimum average. The data looks like that:\r\n\r\n    HashMap&lt;A1, 2.0&gt;\r\n    HashMap&lt;A2, 1.0&gt;\r\n    HashMap&lt;A1, 3.0&gt;\r\n    HashMap&lt;A2, 1.0&gt;\r\n\r\n\r\nI am not getting the idea. Can someone give me a hint?\r\n\r\n\r\nAdding some more data which show why I am using MultiMap.\r\n\r\n    {‘Gateway’:’ G1’, ‘Device’: ‘D1’,’position’:{‘rssi’: 1}},\r\n    {‘Gateway’:’ G2’, ‘Device’: ‘D1’,’position’:{‘rssi’: 3}},\r\n    {‘Gateway’:’ G1’, ‘Device’: ‘D1’,’position’:{‘rssi’: 2}},\r\n    {‘Gateway’:’ G2’, ‘Device’: ‘D1’,’position’:{‘rssi’: 5}},\r\n    {‘Gateway’:’ G1’, ‘Device’: ‘D1’,’position’:{‘rssi’: 4}},\r\n    {‘Gateway’:’ G2’, ‘Device’: ‘D1’,’position’:{‘rssi’: 6}},\r\n    ..\r\n    {‘Gateway’:’ G1’, ‘Device’: ‘D2’,’position’:{‘rssi’: 3}},\r\n    {‘Gateway’:’ G2’, ‘Device’: ‘D2’,’position’:{‘rssi’: 2}},\r\n\r\n \r\nActually, this is a series of data coming to my endpoint, I need to calculate Which device is staying more at which Gateway. First I need to add Devices into MultiMap and then Gateway with position into Map.\r\nIn the end I want to calculate the average like that:\r\n\r\n    D1-&gt; G1: {1,2,4} =&gt; 7/3 = 2.3 \r\n    D1-&gt; G2: {3,5,6} =&gt; 14/3 = 4.6\r\n\r\n","title":"How to calculate average from Collection of HashMap&lt;String, Double&gt;","body":"<p>I have a Collection of HashMap&lt;String, Duble&gt; which I am getting from multimap. I want to calculate the average on Maps values and calculate which Map key is having minimum average. The data looks like that:</p>\n<pre><code>HashMap&lt;A1, 2.0&gt;\nHashMap&lt;A2, 1.0&gt;\nHashMap&lt;A1, 3.0&gt;\nHashMap&lt;A2, 1.0&gt;\n</code></pre>\n<p>I am not getting the idea. Can someone give me a hint?</p>\n<p>Adding some more data which show why I am using MultiMap.</p>\n<pre><code>{‘Gateway’:’ G1’, ‘Device’: ‘D1’,’position’:{‘rssi’: 1}},\n{‘Gateway’:’ G2’, ‘Device’: ‘D1’,’position’:{‘rssi’: 3}},\n{‘Gateway’:’ G1’, ‘Device’: ‘D1’,’position’:{‘rssi’: 2}},\n{‘Gateway’:’ G2’, ‘Device’: ‘D1’,’position’:{‘rssi’: 5}},\n{‘Gateway’:’ G1’, ‘Device’: ‘D1’,’position’:{‘rssi’: 4}},\n{‘Gateway’:’ G2’, ‘Device’: ‘D1’,’position’:{‘rssi’: 6}},\n..\n{‘Gateway’:’ G1’, ‘Device’: ‘D2’,’position’:{‘rssi’: 3}},\n{‘Gateway’:’ G2’, ‘Device’: ‘D2’,’position’:{‘rssi’: 2}},\n</code></pre>\n<p>Actually, this is a series of data coming to my endpoint, I need to calculate Which device is staying more at which Gateway. First I need to add Devices into MultiMap and then Gateway with position into Map.\nIn the end I want to calculate the average like that:</p>\n<pre><code>D1-&gt; G1: {1,2,4} =&gt; 7/3 = 2.3 \nD1-&gt; G2: {3,5,6} =&gt; 14/3 = 4.6\n</code></pre>\n"},{"tags":["java","file","amazon-s3"],"comments":[{"owner":{"account_id":100740,"reputation":73217,"user_id":271415,"accept_rate":91,"display_name":"jarmod"},"score":0,"creation_date":1675210764,"post_id":75304321,"comment_id":132878981,"body_markdown":"FYI this is called serialization (and deserialization). Use [ObjectMapper](https://www.baeldung.com/jackson-object-mapper-tutorial).","body":"FYI this is called serialization (and deserialization). Use <a href=\"https://www.baeldung.com/jackson-object-mapper-tutorial\" rel=\"nofollow noreferrer\">ObjectMapper</a>."},{"owner":{"account_id":16720659,"reputation":408,"user_id":12085680,"display_name":"BugsOverflow"},"score":0,"creation_date":1675211215,"post_id":75304321,"comment_id":132879049,"body_markdown":"@jarmod Thanks for the info, the problem is how to take that json that I can obtain with the mapper to a .json file? I was thinking about this (to have &quot;in memory json file&quot;) https://kodejava.org/how-to-read-and-write-java-object-to-json-file/ and then get the bytes of this file like so: https://mkyong.com/java/how-to-convert-file-into-an-array-of-bytes/ but I think it is too much","body":"@jarmod Thanks for the info, the problem is how to take that json that I can obtain with the mapper to a .json file? I was thinking about this (to have &quot;in memory json file&quot;) <a href=\"https://kodejava.org/how-to-read-and-write-java-object-to-json-file/\" rel=\"nofollow noreferrer\">kodejava.org/how-to-read-and-write-java-object-to-json-file</a> and then get the bytes of this file like so: <a href=\"https://mkyong.com/java/how-to-convert-file-into-an-array-of-bytes/\" rel=\"nofollow noreferrer\">mkyong.com/java/how-to-convert-file-into-an-array-of-bytes</a> but I think it is too much"},{"owner":{"account_id":100740,"reputation":73217,"user_id":271415,"accept_rate":91,"display_name":"jarmod"},"score":1,"creation_date":1675212237,"post_id":75304321,"comment_id":132879215,"body_markdown":"Use `objectMapper.writeValueAsString(student)` to serialize the student to a string and then use the AWS SDK to [put](https://sdk.amazonaws.com/java/api/latest/software/amazon/awssdk/services/s3/S3Client.html#putObject(software.amazon.awssdk.services.s3.model.PutObjectRequest,java.nio.file.Path)) that [string](https://sdk.amazonaws.com/java/api/latest/software/amazon/awssdk/core/sync/RequestBody.html#fromString(java.lang.String)) to an object in S3. No need for an intermediate local file.","body":"Use <code>objectMapper.writeValueAsString(student)</code> to serialize the student to a string and then use the AWS SDK to <a href=\"https://sdk.amazonaws.com/java/api/latest/software/amazon/awssdk/services/s3/S3Client.html#putObject(software.amazon.awssdk.services.s3.model.PutObjectRequest,java.nio.file.Path)\" rel=\"nofollow noreferrer\">put</a> that <a href=\"https://sdk.amazonaws.com/java/api/latest/software/amazon/awssdk/core/sync/RequestBody.html#fromString(java.lang.String)\" rel=\"nofollow noreferrer\">string</a> to an object in S3. No need for an intermediate local file."}],"answers":[{"tags":[],"owner":{"account_id":14738,"reputation":1687,"user_id":30581,"accept_rate":67,"display_name":"Emrah Diril"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1675214621,"creation_date":1675211184,"answer_id":75304498,"question_id":75304321,"body_markdown":"Yes this is how you want to do it if you want to save json to a file to upload to S3. Jackson has a native json data structure (I think it&#39;s called `JsonNode`) but you don&#39;t want to save that to a file. Just save the json string to a text file.\r\n\r\nTo convert `Student` object to String:\r\n\r\n    Student student = new Student(&quot;Joe&quot;, 25);\r\n    ObjectMapper mapper = new ObjectMapper();\r\n    String json_string = mapper.writeValueAsString(student);\r\n\r\nYou can save this string to a text file and upload to S3.\r\nWhen you want to get the `Student` object back:\r\n\r\n    ObjectMapper mapper = new ObjectMapper();\r\n    Student student = mapper.readValue(new File(&quot;student.json&quot;), Student.class);\r\n\r\nNote that there is nothing special about a &quot;json file&quot;. It&#39;s just a text file with the `.json` extention. It contains text data that happens to be in the Json format. You can save `json_string` to a file like this:\r\n\r\n    Path path = Paths.get(&quot;student.json&quot;);\r\n    byte[] strToBytes = json_string.getBytes();\r\n    Files.write(path, strToBytes);\r\n\r\n(Reference: https://www.baeldung.com/jackson-object-mapper-tutorial)","title":"Convert Object to JSON File then to Bytes to save to an Storage and then back to Object","body":"<p>Yes this is how you want to do it if you want to save json to a file to upload to S3. Jackson has a native json data structure (I think it's called <code>JsonNode</code>) but you don't want to save that to a file. Just save the json string to a text file.</p>\n<p>To convert <code>Student</code> object to String:</p>\n<pre><code>Student student = new Student(&quot;Joe&quot;, 25);\nObjectMapper mapper = new ObjectMapper();\nString json_string = mapper.writeValueAsString(student);\n</code></pre>\n<p>You can save this string to a text file and upload to S3.\nWhen you want to get the <code>Student</code> object back:</p>\n<pre><code>ObjectMapper mapper = new ObjectMapper();\nStudent student = mapper.readValue(new File(&quot;student.json&quot;), Student.class);\n</code></pre>\n<p>Note that there is nothing special about a &quot;json file&quot;. It's just a text file with the <code>.json</code> extention. It contains text data that happens to be in the Json format. You can save <code>json_string</code> to a file like this:</p>\n<pre><code>Path path = Paths.get(&quot;student.json&quot;);\nbyte[] strToBytes = json_string.getBytes();\nFiles.write(path, strToBytes);\n</code></pre>\n<p>(Reference: <a href=\"https://www.baeldung.com/jackson-object-mapper-tutorial\" rel=\"nofollow noreferrer\">https://www.baeldung.com/jackson-object-mapper-tutorial</a>)</p>\n"}],"owner":{"account_id":16720659,"reputation":408,"user_id":12085680,"display_name":"BugsOverflow"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":461,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1675214621,"creation_date":1675209188,"question_id":75304321,"body_markdown":"Suppose I have the class Student which only has name and age attributes.\r\n\r\n    public class Student {\r\n         private String studentName;\r\n         private Integer age;\r\n    }\r\n\r\nI want to convert this Student objects to JSON files (I think I can do this with Jackson mapper)\r\n\r\nThen I need to store this .json file to an storage, so I have the method save(String key, byte[] resource) which saves any kind of file to the storage (.zip, .txt, etc.).\r\n\r\nSo I was wondering if I can do this like so:\r\n\r\n1) Write value as String with jackson (Student to json)\r\n2) Get the bytes of this String\r\n3) Save to the Storage with save(studentName, bytes)\r\n\r\n**Back to Student object:**\r\n\r\nThen when I search an student from the storage I would need to convert back to String like so:\r\n\r\n    Charset charset = Charset.forName(&quot;UTF-8&quot;);\r\n    String string = new String(studentBytes, charset);\r\n\r\nThen String back to Student with Jackson mapper\r\n\r\nIs this a good approach (I think not because the idea is that those bytes are actually a .json file, but are bytes of a java String object)? I am a little confused because the &quot;file bytes&quot; that I am saving are from a String object with this approach, but I can not find how to convert the Student object to a &quot;.json file&quot;, can not figure out how to save .json file (which I do not need to save in disk because I only need the bytes to save to the cloud storage), how would I write an Object to an &quot;in memory .json file&quot; or maybe is not to see it as a file, just as bytes right? Please point in the right direction, like how to directly write the object to a json file and then store this file bytes?","title":"Convert Object to JSON File then to Bytes to save to an Storage and then back to Object","body":"<p>Suppose I have the class Student which only has name and age attributes.</p>\n<pre><code>public class Student {\n     private String studentName;\n     private Integer age;\n}\n</code></pre>\n<p>I want to convert this Student objects to JSON files (I think I can do this with Jackson mapper)</p>\n<p>Then I need to store this .json file to an storage, so I have the method save(String key, byte[] resource) which saves any kind of file to the storage (.zip, .txt, etc.).</p>\n<p>So I was wondering if I can do this like so:</p>\n<ol>\n<li>Write value as String with jackson (Student to json)</li>\n<li>Get the bytes of this String</li>\n<li>Save to the Storage with save(studentName, bytes)</li>\n</ol>\n<p><strong>Back to Student object:</strong></p>\n<p>Then when I search an student from the storage I would need to convert back to String like so:</p>\n<pre><code>Charset charset = Charset.forName(&quot;UTF-8&quot;);\nString string = new String(studentBytes, charset);\n</code></pre>\n<p>Then String back to Student with Jackson mapper</p>\n<p>Is this a good approach (I think not because the idea is that those bytes are actually a .json file, but are bytes of a java String object)? I am a little confused because the &quot;file bytes&quot; that I am saving are from a String object with this approach, but I can not find how to convert the Student object to a &quot;.json file&quot;, can not figure out how to save .json file (which I do not need to save in disk because I only need the bytes to save to the cloud storage), how would I write an Object to an &quot;in memory .json file&quot; or maybe is not to see it as a file, just as bytes right? Please point in the right direction, like how to directly write the object to a json file and then store this file bytes?</p>\n"},{"tags":["java","javafx","slider","media"],"comments":[{"owner":{"account_id":16559,"reputation":1856,"user_id":36223,"display_name":"DaveB"},"score":1,"creation_date":1675184096,"post_id":75298221,"comment_id":132872214,"body_markdown":"I would be tempted to make the slider transparent, and then put it in a StackPane with another Pane containing the blue shapes at the bottom.  Set the size of the shape Pane to the same dimensions as the Slider and position the blue shapes in the Pane where you want them.  Probably less fiddly than trying to get linear gradients to work.","body":"I would be tempted to make the slider transparent, and then put it in a StackPane with another Pane containing the blue shapes at the bottom.  Set the size of the shape Pane to the same dimensions as the Slider and position the blue shapes in the Pane where you want them.  Probably less fiddly than trying to get linear gradients to work."},{"owner":{"account_id":22737541,"reputation":43,"user_id":16899534,"display_name":"deepl"},"score":0,"creation_date":1675187272,"post_id":75298221,"comment_id":132873240,"body_markdown":"@DaveB how to position the blue shapes in the Pane?","body":"@DaveB how to position the blue shapes in the Pane?"},{"owner":{"account_id":16559,"reputation":1856,"user_id":36223,"display_name":"DaveB"},"score":0,"creation_date":1675191438,"post_id":75298221,"comment_id":132874425,"body_markdown":"I added an answer.","body":"I added an answer."}],"answers":[{"tags":[],"owner":{"account_id":13284784,"reputation":61,"user_id":9591245,"display_name":"Nina Koninckx"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1675174543,"creation_date":1675174543,"answer_id":75298486,"question_id":75298221,"body_markdown":"I recommend you play around with linear gradients, I think those can solve you issues:\r\n\r\n    -fx-background-color: linear-gradient(from 30% 30% to 23% 30%, repeat,  #e9967a 62%, #ff8c00 88%);\r\n\r\nFor more info you can look at the documentation: https://docs.oracle.com/javafx/2/api/javafx/scene/doc-files/cssref.html","title":"How to color portion of a slider in JavaFX","body":"<p>I recommend you play around with linear gradients, I think those can solve you issues:</p>\n<pre><code>-fx-background-color: linear-gradient(from 30% 30% to 23% 30%, repeat,  #e9967a 62%, #ff8c00 88%);\n</code></pre>\n<p>For more info you can look at the documentation: <a href=\"https://docs.oracle.com/javafx/2/api/javafx/scene/doc-files/cssref.html\" rel=\"nofollow noreferrer\">https://docs.oracle.com/javafx/2/api/javafx/scene/doc-files/cssref.html</a></p>\n"},{"tags":[],"owner":{"account_id":16559,"reputation":1856,"user_id":36223,"display_name":"DaveB"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1675191368,"creation_date":1675191368,"answer_id":75301897,"question_id":75298221,"body_markdown":"As per my comment on the question, here&#39;s some code that will do the trick.  It takes just a little bit of messing about with the styling of the &quot;track&quot; element of the Slider to make it transparent, and then the rest falls in place.\r\n\r\nBTW:  This is Kotlin, but you should be able to figure out how it works, if you have any questions, I can update this with some explanations:\r\n\r\n    class FancySlider : Application() {\r\n       override fun start(stage: Stage) {\r\n          stage.scene = Scene(createContent()).apply {\r\n             FancySlider::class.java.getResource(&quot;/css/default.css&quot;)?.toString()?.let { stylesheets += it }\r\n          }\r\n          stage.show()\r\n       }\r\n    \r\n       private fun createContent(): Region {\r\n          val stackPane = StackPane().apply {\r\n             val slider = Slider().apply {\r\n                minWidth = 300.0\r\n                styleClass += &quot;fancy-slider&quot;\r\n             }\r\n             val pane = Pane().apply {\r\n                val heightAdjust = 8.0\r\n                val widthAdjust = 10.0\r\n                maxHeightProperty().bind(slider.heightProperty().subtract(heightAdjust))\r\n                minHeightProperty().bind(slider.heightProperty().subtract(heightAdjust))\r\n                maxWidthProperty().bind(slider.widthProperty().subtract(widthAdjust))\r\n                minWidthProperty().bind(slider.widthProperty().subtract(widthAdjust))\r\n                children += createRectangle(this.widthProperty(), 0.43, 0.08)\r\n                children += createRectangle(this.widthProperty(), 0.12, 0.15)\r\n                children += createRectangle(this.widthProperty(), 0.75, 0.03)\r\n             }\r\n             children += listOf(pane, slider)\r\n             minHeight = 60.0\r\n             padding = Insets(20.0)\r\n          }\r\n          return stackPane\r\n       }\r\n    \r\n       fun createRectangle(sliderWidthProperty: ReadOnlyDoubleProperty, startPos: Double, duration: Double) = Rectangle(1.0, 7.0).apply {\r\n          layoutXProperty().bind(sliderWidthProperty.multiply(startPos))\r\n          widthProperty().bind(sliderWidthProperty.multiply(duration))\r\n          fill = Color.DARKBLUE\r\n          styleClass += &quot;fancy-slider-rectangle&quot;\r\n       }\r\n    }\r\n    \r\n    fun main() {\r\n       Application.launch(FancySlider::class.java)\r\n    }\r\n\r\nAnd the CSS stuff looks like this:\r\n\r\n    .fancy-slider .track {\r\n        -fx-background-color: transparent;\r\n        -fx-border-color: derive(-fx-text-box-border, -10%);\r\n        -fx-background-insets: 2;\r\n        -fx-border-radius: 0.25em;\r\n        -fx-background-radius: 0.25em\r\n        -fx-padding: 0.25em; /* 3 */\r\n    }\r\n    \r\n    .fancy-slider-rectangle {\r\n      -fx-arc-width: 6.0;\r\n      -fx-arc-height: 6.0;\r\n    }\r\n\r\nA couple of notes:\r\n\r\n1.  This is only for horizontal Sliders, you&#39;d have to rework it for a verticle Slider.  \r\n\r\n1.  The width and height bindings for the Pane are set with hard-coded adjustments, and I&#39;m not sure what would happen if you could somehow change the height of the Slider.\r\n\r\n1.  The StackPane keeps everything lined up nicely, since it centres by default, so long as you get the right height and width for the Pane is should just align nicely. \r\n\r\n1.  You could implement this as a custom Node and expose an addRectangle() method which worked nicely with the Slider&#39;s conversions of it&#39;s value. \r\n\r\nAnyways, it looks like this: \r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/ZEduQ.png","title":"How to color portion of a slider in JavaFX","body":"<p>As per my comment on the question, here's some code that will do the trick.  It takes just a little bit of messing about with the styling of the &quot;track&quot; element of the Slider to make it transparent, and then the rest falls in place.</p>\n<p>BTW:  This is Kotlin, but you should be able to figure out how it works, if you have any questions, I can update this with some explanations:</p>\n<pre><code>class FancySlider : Application() {\n   override fun start(stage: Stage) {\n      stage.scene = Scene(createContent()).apply {\n         FancySlider::class.java.getResource(&quot;/css/default.css&quot;)?.toString()?.let { stylesheets += it }\n      }\n      stage.show()\n   }\n\n   private fun createContent(): Region {\n      val stackPane = StackPane().apply {\n         val slider = Slider().apply {\n            minWidth = 300.0\n            styleClass += &quot;fancy-slider&quot;\n         }\n         val pane = Pane().apply {\n            val heightAdjust = 8.0\n            val widthAdjust = 10.0\n            maxHeightProperty().bind(slider.heightProperty().subtract(heightAdjust))\n            minHeightProperty().bind(slider.heightProperty().subtract(heightAdjust))\n            maxWidthProperty().bind(slider.widthProperty().subtract(widthAdjust))\n            minWidthProperty().bind(slider.widthProperty().subtract(widthAdjust))\n            children += createRectangle(this.widthProperty(), 0.43, 0.08)\n            children += createRectangle(this.widthProperty(), 0.12, 0.15)\n            children += createRectangle(this.widthProperty(), 0.75, 0.03)\n         }\n         children += listOf(pane, slider)\n         minHeight = 60.0\n         padding = Insets(20.0)\n      }\n      return stackPane\n   }\n\n   fun createRectangle(sliderWidthProperty: ReadOnlyDoubleProperty, startPos: Double, duration: Double) = Rectangle(1.0, 7.0).apply {\n      layoutXProperty().bind(sliderWidthProperty.multiply(startPos))\n      widthProperty().bind(sliderWidthProperty.multiply(duration))\n      fill = Color.DARKBLUE\n      styleClass += &quot;fancy-slider-rectangle&quot;\n   }\n}\n\nfun main() {\n   Application.launch(FancySlider::class.java)\n}\n</code></pre>\n<p>And the CSS stuff looks like this:</p>\n<pre><code>.fancy-slider .track {\n    -fx-background-color: transparent;\n    -fx-border-color: derive(-fx-text-box-border, -10%);\n    -fx-background-insets: 2;\n    -fx-border-radius: 0.25em;\n    -fx-background-radius: 0.25em\n    -fx-padding: 0.25em; /* 3 */\n}\n\n.fancy-slider-rectangle {\n  -fx-arc-width: 6.0;\n  -fx-arc-height: 6.0;\n}\n</code></pre>\n<p>A couple of notes:</p>\n<ol>\n<li><p>This is only for horizontal Sliders, you'd have to rework it for a verticle Slider.</p>\n</li>\n<li><p>The width and height bindings for the Pane are set with hard-coded adjustments, and I'm not sure what would happen if you could somehow change the height of the Slider.</p>\n</li>\n<li><p>The StackPane keeps everything lined up nicely, since it centres by default, so long as you get the right height and width for the Pane is should just align nicely.</p>\n</li>\n<li><p>You could implement this as a custom Node and expose an addRectangle() method which worked nicely with the Slider's conversions of it's value.</p>\n</li>\n</ol>\n<p>Anyways, it looks like this:</p>\n<p><a href=\"https://i.stack.imgur.com/ZEduQ.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ZEduQ.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":[],"owner":{"account_id":7717111,"reputation":8764,"user_id":5844477,"display_name":"Sai Dandem"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1675214290,"creation_date":1675212709,"answer_id":75304618,"question_id":75298221,"body_markdown":"If you are not very concerned about curved highlights, below is a way you can try with. This is on the same lines what @Nina Koninckx suggested.\r\n\r\nThe general idea is, we paint the track color using linear gradient color stops.\r\n\r\nLets say the default track color is `white` and you need to highlight the sections(50%-70% and 80%-90%) with `blue`. You define all individual sections with the percentage values. Like\r\n\r\n* white 50% (default start with 0% so no need to specify) \r\n* blue 50% , blue 70% , \r\n* white 70% , white 80% , \r\n* blue 80% , blue 90% , \r\n* white 90% , white 100%\r\n\r\nCombining all, the linear gradient styling will be like:\r\n\r\n    linear-gradient(from 0% 0% to 100% 0% , white 50% , blue 50% , blue 70% , white 70% , white 80% , blue 80% , blue 90% , white 90% , white 100% )\r\n\r\nThen we create a variable( lets say `-track-color`) for slider in CSS, and we update the variable in the java code.\r\n\r\nBelow is a quick demo of the example:\r\n\r\n    import javafx.application.Application;\r\n    import javafx.geometry.Insets;\r\n    import javafx.geometry.Pos;\r\n    import javafx.scene.Scene;\r\n    import javafx.scene.control.Slider;\r\n    import javafx.scene.layout.VBox;\r\n    import javafx.stage.Stage;\r\n    public class SliderStylingDemo extends Application {\r\n        @Override\r\n        public void start(Stage primaryStage) throws Exception {\r\n            Slider slider = new Slider(0, 100, 30) ;\r\n            slider.setMajorTickUnit(10);\r\n            slider.setShowTickMarks(true);\r\n            slider.setShowTickLabels(true);\r\n            String style = &quot;-track-color: linear-gradient(from 0% 0% to 100% 0% , white 50% , blue 50% , blue 70% , white 70% , white 80% , blue 80% , blue 90% , white 90% , white 100% )&quot;;\r\n            slider.setStyle(style);\r\n            VBox root = new VBox(slider);\r\n            root.setAlignment(Pos.CENTER);\r\n            root.setPadding(new Insets(20));\r\n            root.setSpacing(20);\r\n            Scene scene = new Scene(root, 600, 100);\r\n            scene.getStylesheets().add(getClass().getResource(&quot;sliderstyle.css&quot;).toExternalForm());\r\n            primaryStage.setScene(scene);\r\n            primaryStage.setTitle(&quot;Slider Styling Demo&quot;);\r\n            primaryStage.show();\r\n        }\r\n    }\r\n\r\n**CSS Code:**\r\n\r\n    .slider {\r\n        -track-color: -fx-control-inner-background;\r\n    }\r\n    .slider .track {\r\n          -fx-background-color:\r\n              -fx-shadow-highlight-color,\r\n              linear-gradient(to bottom, derive(-fx-text-box-border, -10%), -fx-text-box-border),\r\n              -track-color;\r\n    }\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/zTuQh.png","title":"How to color portion of a slider in JavaFX","body":"<p>If you are not very concerned about curved highlights, below is a way you can try with. This is on the same lines what @Nina Koninckx suggested.</p>\n<p>The general idea is, we paint the track color using linear gradient color stops.</p>\n<p>Lets say the default track color is <code>white</code> and you need to highlight the sections(50%-70% and 80%-90%) with <code>blue</code>. You define all individual sections with the percentage values. Like</p>\n<ul>\n<li>white 50% (default start with 0% so no need to specify)</li>\n<li>blue 50% , blue 70% ,</li>\n<li>white 70% , white 80% ,</li>\n<li>blue 80% , blue 90% ,</li>\n<li>white 90% , white 100%</li>\n</ul>\n<p>Combining all, the linear gradient styling will be like:</p>\n<pre><code>linear-gradient(from 0% 0% to 100% 0% , white 50% , blue 50% , blue 70% , white 70% , white 80% , blue 80% , blue 90% , white 90% , white 100% )\n</code></pre>\n<p>Then we create a variable( lets say <code>-track-color</code>) for slider in CSS, and we update the variable in the java code.</p>\n<p>Below is a quick demo of the example:</p>\n<pre><code>import javafx.application.Application;\nimport javafx.geometry.Insets;\nimport javafx.geometry.Pos;\nimport javafx.scene.Scene;\nimport javafx.scene.control.Slider;\nimport javafx.scene.layout.VBox;\nimport javafx.stage.Stage;\npublic class SliderStylingDemo extends Application {\n    @Override\n    public void start(Stage primaryStage) throws Exception {\n        Slider slider = new Slider(0, 100, 30) ;\n        slider.setMajorTickUnit(10);\n        slider.setShowTickMarks(true);\n        slider.setShowTickLabels(true);\n        String style = &quot;-track-color: linear-gradient(from 0% 0% to 100% 0% , white 50% , blue 50% , blue 70% , white 70% , white 80% , blue 80% , blue 90% , white 90% , white 100% )&quot;;\n        slider.setStyle(style);\n        VBox root = new VBox(slider);\n        root.setAlignment(Pos.CENTER);\n        root.setPadding(new Insets(20));\n        root.setSpacing(20);\n        Scene scene = new Scene(root, 600, 100);\n        scene.getStylesheets().add(getClass().getResource(&quot;sliderstyle.css&quot;).toExternalForm());\n        primaryStage.setScene(scene);\n        primaryStage.setTitle(&quot;Slider Styling Demo&quot;);\n        primaryStage.show();\n    }\n}\n</code></pre>\n<p><strong>CSS Code:</strong></p>\n<pre><code>.slider {\n    -track-color: -fx-control-inner-background;\n}\n.slider .track {\n      -fx-background-color:\n          -fx-shadow-highlight-color,\n          linear-gradient(to bottom, derive(-fx-text-box-border, -10%), -fx-text-box-border),\n          -track-color;\n}\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/zTuQh.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/zTuQh.png\" alt=\"enter image description here\" /></a></p>\n"}],"owner":{"account_id":22737541,"reputation":43,"user_id":16899534,"display_name":"deepl"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":229,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"accepted_answer_id":75301897,"answer_count":3,"score":4,"last_activity_date":1675214290,"creation_date":1675173281,"question_id":75298221,"body_markdown":"I&#39;m creating a video player and I want to color only a portion (with custom values) in the slider like this:\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n\r\n\r\n\r\nhow can I do?\r\n\r\n\r\nI&#39;ve colored the whole bar up to now, but I can&#39;t color just different portions:\r\n\r\n```\r\n            StackPane trackPane = (StackPane) seekSlider.lookup(&quot;.track&quot;);\r\n            trackPane.setStyle(&quot;-fx-background-color: #e5e5e5&quot;);\r\n```\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/nXPPU.png","title":"How to color portion of a slider in JavaFX","body":"<p>I'm creating a video player and I want to color only a portion (with custom values) in the slider like this:</p>\n<p><a href=\"https://i.stack.imgur.com/nXPPU.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/nXPPU.png\" alt=\"enter image description here\" /></a></p>\n<p>how can I do?</p>\n<p>I've colored the whole bar up to now, but I can't color just different portions:</p>\n<pre><code>            StackPane trackPane = (StackPane) seekSlider.lookup(&quot;.track&quot;);\n            trackPane.setStyle(&quot;-fx-background-color: #e5e5e5&quot;);\n</code></pre>\n"},{"tags":["java","android","header","exoplayer","referer"],"owner":{"account_id":27226208,"reputation":1,"user_id":20754680,"display_name":"Kikay Jaya"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":95,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1675214046,"creation_date":1675213992,"question_id":75304721,"body_markdown":"I trying to add custom referer as header top play m3u8 in exoplayer. I searched many method is not compatible with my source code i have. \r\n\r\n    if (uri.getLastPathSegment().contains(&quot;m3u8&quot;) || uri.getLastPathSegment().contains(&quot;m3u&quot;) || uri.getLastPathSegment().contains(&quot;ts&quot;)) {\r\n            return new HlsMediaSource.Factory(new DefaultHttpDataSourceFactory(&quot;ua&quot;, BANDWIDTH_METER))\r\n                    .createMediaSource(uri);\r\n\r\n        }\r\n\r\n","title":"How to set custom header referer in exoplayer?","body":"<p>I trying to add custom referer as header top play m3u8 in exoplayer. I searched many method is not compatible with my source code i have.</p>\n<pre><code>if (uri.getLastPathSegment().contains(&quot;m3u8&quot;) || uri.getLastPathSegment().contains(&quot;m3u&quot;) || uri.getLastPathSegment().contains(&quot;ts&quot;)) {\n        return new HlsMediaSource.Factory(new DefaultHttpDataSourceFactory(&quot;ua&quot;, BANDWIDTH_METER))\n                .createMediaSource(uri);\n\n    }\n</code></pre>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":20304974,"reputation":99,"user_id":14893498,"display_name":"Daniel Janz"},"score":0,"creation_date":1663631768,"post_id":73780304,"comment_id":130280920,"body_markdown":"You need to use the right logarithm-function. See here in the tutorial.\nhttps://www.baeldung.com/java-logarithms","body":"You need to use the right logarithm-function. See here in the tutorial. <a href=\"https://www.baeldung.com/java-logarithms\" rel=\"nofollow noreferrer\">baeldung.com/java-logarithms</a>"},{"owner":{"account_id":184870,"reputation":118711,"user_id":421195,"accept_rate":83,"display_name":"paulsm4"},"score":1,"creation_date":1663632501,"post_id":73780304,"comment_id":130280995,"body_markdown":"Log base 10 (0.5)= -0.30102999566.  Log base e (0.5) = -0.69314718055995.  &quot;Log to the base e&quot; (ln x) is the [Natural logarithm](https://en.wikipedia.org/wiki/Natural_logarithm).  The [javadoc](https://docs.oracle.com/javase/8/docs/api/java/lang/Math.html) for Math.log() clearly says: &quot;log(double a)\nReturns the natural logarithm (base e) of a double value.&quot;","body":"Log base 10 (0.5)= -0.30102999566.  Log base e (0.5) = -0.69314718055995.  &quot;Log to the base e&quot; (ln x) is the <a href=\"https://en.wikipedia.org/wiki/Natural_logarithm\" rel=\"nofollow noreferrer\">Natural logarithm</a>.  The <a href=\"https://docs.oracle.com/javase/8/docs/api/java/lang/Math.html\" rel=\"nofollow noreferrer\">javadoc</a> for Math.log() clearly says: &quot;log(double a) Returns the natural logarithm (base e) of a double value.&quot;"}],"answers":[{"tags":[],"owner":{"account_id":1085259,"reputation":78314,"user_id":1081110,"display_name":"Dawood ibn Kareem"},"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1663631657,"creation_date":1663631657,"answer_id":73780316,"question_id":73780304,"body_markdown":"`Math.log` calculates a &quot;natural logarithm&quot;, that is, base e.  On your calculator, this might be denoted by a button `ln` or similar.\r\n\r\nTo get a &quot;common logarithm&quot;, that is, base 10, you need `Math.log10`.  This is the function represented by the `log` button on your calculator.","title":"Why Java Logarithm and answer using calculator not equal","body":"<p><code>Math.log</code> calculates a &quot;natural logarithm&quot;, that is, base e.  On your calculator, this might be denoted by a button <code>ln</code> or similar.</p>\n<p>To get a &quot;common logarithm&quot;, that is, base 10, you need <code>Math.log10</code>.  This is the function represented by the <code>log</code> button on your calculator.</p>\n"}],"owner":{"account_id":17309458,"reputation":181,"user_id":12537438,"display_name":"Jonas Lu"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":40,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"accepted_answer_id":73780316,"answer_count":1,"score":-1,"last_activity_date":1675213489,"creation_date":1663631501,"question_id":73780304,"body_markdown":"I am new to Java, sorry I have this wield question came up, I tried to do `log(0.5)` in Java using `Math.log(0.5)`, I did `log(0.5`) in calculator and answer is `-0.3` and I computed `Math.log(0.5)`, answer is `-0.69`. Any one know where I did it wrong?","title":"Why Java Logarithm and answer using calculator not equal","body":"<p>I am new to Java, sorry I have this wield question came up, I tried to do <code>log(0.5)</code> in Java using <code>Math.log(0.5)</code>, I did <code>log(0.5</code>) in calculator and answer is <code>-0.3</code> and I computed <code>Math.log(0.5)</code>, answer is <code>-0.69</code>. Any one know where I did it wrong?</p>\n"},{"tags":["java","multidimensional-array"],"comments":[{"owner":{"account_id":5281408,"reputation":18797,"user_id":4216641,"display_name":"Turing85"},"score":1,"creation_date":1670457157,"post_id":74724071,"comment_id":131883049,"body_markdown":"I am curious: who do you determine the memory address of `x` and `x[0]`?","body":"I am curious: who do you determine the memory address of <code>x</code> and <code>x[0]</code>?"},{"owner":{"account_id":1085259,"reputation":78314,"user_id":1081110,"display_name":"Dawood ibn Kareem"},"score":1,"creation_date":1670457234,"post_id":74724071,"comment_id":131883066,"body_markdown":"Well, there&#39;s C and C++.  But I&#39;m curious like Turing85 - how are you getting memory addresses?  Java is supposed to shield you from stuff like that.  Unless you mean hash codes, of course, which are not necessarily the same thing.","body":"Well, there&#39;s C and C++.  But I&#39;m curious like Turing85 - how are you getting memory addresses?  Java is supposed to shield you from stuff like that.  Unless you mean hash codes, of course, which are not necessarily the same thing."},{"owner":{"account_id":4010701,"reputation":15103,"user_id":4398966,"accept_rate":64,"display_name":"DCR"},"score":0,"creation_date":1670457305,"post_id":74724071,"comment_id":131883077,"body_markdown":"do you mean who or how?  Isn&#39;t the toString() method &quot;close  enough for government work&quot; a reasonable surrogate for the address","body":"do you mean who or how?  Isn&#39;t the toString() method &quot;close  enough for government work&quot; a reasonable surrogate for the address"},{"owner":{"account_id":4010701,"reputation":15103,"user_id":4398966,"accept_rate":64,"display_name":"DCR"},"score":0,"creation_date":1670457362,"post_id":74724071,"comment_id":131883088,"body_markdown":"but c stores 2d arrays as an array of arrays","body":"but c stores 2d arrays as an array of arrays"},{"owner":{"account_id":1085259,"reputation":78314,"user_id":1081110,"display_name":"Dawood ibn Kareem"},"score":0,"creation_date":1670457463,"post_id":74724071,"comment_id":131883102,"body_markdown":"No, the C compiler acts as if the 2D array is an array of arrays.  Under the covers, it&#39;s stored as a matrix.  And no, `toString()` does NOT return a memory address.","body":"No, the C compiler acts as if the 2D array is an array of arrays.  Under the covers, it&#39;s stored as a matrix.  And no, <code>toString()</code> does NOT return a memory address."},{"owner":{"account_id":4010701,"reputation":15103,"user_id":4398966,"accept_rate":64,"display_name":"DCR"},"score":0,"creation_date":1670457630,"post_id":74724071,"comment_id":131883127,"body_markdown":"i know toString does not return the actual memory address but it&#39;s really not important  I thought the hash code would be close enough i.e if two elements have the same address won&#39;t they almost always have the same hash code?","body":"i know toString does not return the actual memory address but it&#39;s really not important  I thought the hash code would be close enough i.e if two elements have the same address won&#39;t they almost always have the same hash code?"},{"owner":{"account_id":5281408,"reputation":18797,"user_id":4216641,"display_name":"Turing85"},"score":0,"creation_date":1670457695,"post_id":74724071,"comment_id":131883136,"body_markdown":"@DCR The [`toString()`-method of `Object`](http://hg.openjdk.java.net/jdk7/jdk7/jdk/file/tip/src/share/classes/java/lang/Object.java#l237) prints out the `hashCode()` of the object. And the [`hashCode()` of `Object`](http://hg.openjdk.java.net/jdk7/jdk7/jdk/file/tip/src/share/classes/java/lang/Object.java#l92) is &quot;*typically implemented by converting the internal address of the object into an integer*&quot;.","body":"@DCR The <a href=\"http://hg.openjdk.java.net/jdk7/jdk7/jdk/file/tip/src/share/classes/java/lang/Object.java#l237\" rel=\"nofollow noreferrer\"><code>toString()</code>-method of <code>Object</code></a> prints out the <code>hashCode()</code> of the object. And the <a href=\"http://hg.openjdk.java.net/jdk7/jdk7/jdk/file/tip/src/share/classes/java/lang/Object.java#l92\" rel=\"nofollow noreferrer\"><code>hashCode()</code> of <code>Object</code></a> is &quot;<i>typically implemented by converting the internal address of the object into an integer</i>&quot;."},{"owner":{"account_id":4010701,"reputation":15103,"user_id":4398966,"accept_rate":64,"display_name":"DCR"},"score":0,"creation_date":1670457860,"post_id":74724071,"comment_id":131883152,"body_markdown":"right, so if two objects have the same address won&#39;t the hash code usually be the same?","body":"right, so if two objects have the same address won&#39;t the hash code usually be the same?"},{"owner":{"account_id":4010701,"reputation":15103,"user_id":4398966,"accept_rate":64,"display_name":"DCR"},"score":0,"creation_date":1670458046,"post_id":74724071,"comment_id":131883181,"body_markdown":"I thought in C if we declare int[][] x = new int[3][3]; we can access x with x{2][2] or x[8] would give us the same cell but, clearly you can&#39;t do that in Java","body":"I thought in C if we declare int[][] x = new int[3][3]; we can access x with x{2][2] or x[8] would give us the same cell but, clearly you can&#39;t do that in Java"},{"owner":{"account_id":14679090,"reputation":1358,"user_id":10601203,"display_name":"Jesse"},"score":0,"creation_date":1670458129,"post_id":74724071,"comment_id":131883190,"body_markdown":"Because of the way memory works, each index would always have their own memory address. Memory is linear so you can&#39;t very well store something two-dimensional in it without creating a linear representation for it. The structure of an array in memory is simply the number of entries followed by the entries themselves. In a 2d array, these entries are simply more arrays. When you access an index, it takes that index * the size of each item to get the offset, then adds the offset to the original pointer to get the pointer of the item. I don&#39;t think there&#39;s any other performant way to do this.","body":"Because of the way memory works, each index would always have their own memory address. Memory is linear so you can&#39;t very well store something two-dimensional in it without creating a linear representation for it. The structure of an array in memory is simply the number of entries followed by the entries themselves. In a 2d array, these entries are simply more arrays. When you access an index, it takes that index * the size of each item to get the offset, then adds the offset to the original pointer to get the pointer of the item. I don&#39;t think there&#39;s any other performant way to do this."},{"owner":{"account_id":4010701,"reputation":15103,"user_id":4398966,"accept_rate":64,"display_name":"DCR"},"score":1,"creation_date":1670458222,"post_id":74724071,"comment_id":131883205,"body_markdown":"I don&#39;t think that&#39;s correct.  Doesn&#39;t java and c store 2d arrays differently?  Specifically, in c  2d array will be stored sequentially while in java it won&#39;t.  In c I would need to create an array of pointers and then with malloc allocate memory for the columns to duplicate what happens in java","body":"I don&#39;t think that&#39;s correct.  Doesn&#39;t java and c store 2d arrays differently?  Specifically, in c  2d array will be stored sequentially while in java it won&#39;t.  In c I would need to create an array of pointers and then with malloc allocate memory for the columns to duplicate what happens in java"},{"owner":{"account_id":6606677,"reputation":1024,"user_id":5103317,"display_name":"Old Dog Programmer"},"score":0,"creation_date":1670520895,"post_id":74724071,"comment_id":131899315,"body_markdown":"As far as I know, in Java, If two objects have the same memory address, they are the same object. One is an alias of the other. Java doesn&#39;t have something like the `EQUIVALENCE` of  Fortran or the `union` of C / C++.  Also, if two different objects, `a`, and `b` return `true` for `a.equals(b)`, they are supposed to return the same value for `hashCode ()`.","body":"As far as I know, in Java, If two objects have the same memory address, they are the same object. One is an alias of the other. Java doesn&#39;t have something like the <code>EQUIVALENCE</code> of  Fortran or the <code>union</code> of C / C++.  Also, if two different objects, <code>a</code>, and <code>b</code> return <code>true</code> for <code>a.equals(b)</code>, they are supposed to return the same value for <code>hashCode ()</code>."},{"owner":{"account_id":6606677,"reputation":1024,"user_id":5103317,"display_name":"Old Dog Programmer"},"score":0,"creation_date":1670523959,"post_id":74724071,"comment_id":131900229,"body_markdown":"I believe @DCR is correct, at least in regards to Java.  In Java, arrays are reference types. Suppose I have `int [][] foo = new int [20][15]; int [] bar = new int [12];`.  Each row of `foo` is a reference to an `int []`.   An entire row can be replaced by changing the reference to that row:  `foo [9] = bar;`  Note that Java 2D arrays can be &quot;ragged&quot; (have rows of different lengths). In this example, `foo` becomes ragged from  `foo [9] = bar;` being executed.","body":"I believe @DCR is correct, at least in regards to Java.  In Java, arrays are reference types. Suppose I have <code>int [][] foo = new int [20][15]; int [] bar = new int [12];</code>.  Each row of <code>foo</code> is a reference to an <code>int []</code>.   An entire row can be replaced by changing the reference to that row:  <code>foo [9] = bar;</code>  Note that Java 2D arrays can be &quot;ragged&quot; (have rows of different lengths). In this example, <code>foo</code> becomes ragged from  <code>foo [9] = bar;</code> being executed."},{"owner":{"account_id":6606677,"reputation":1024,"user_id":5103317,"display_name":"Old Dog Programmer"},"score":0,"creation_date":1670528031,"post_id":74724071,"comment_id":131901400,"body_markdown":"By the way, in a C++ course, one assignment was to create a `class` that represented a edges of a graph using an adjacency matrix. Because the graph was undirected, the professor encouraged us to use a &quot;triangular&quot; array. If the graph had `n` nodes (vertices), row 0 would have `n` columns. Row 1 would have `n - 1` columns. Row 2 would have `n - 2` columns.  Row 3 ... . If my memory is correct, we coded the array pretty much the same as it would be done in Java. It was an array of arrays.","body":"By the way, in a C++ course, one assignment was to create a <code>class</code> that represented a edges of a graph using an adjacency matrix. Because the graph was undirected, the professor encouraged us to use a &quot;triangular&quot; array. If the graph had <code>n</code> nodes (vertices), row 0 would have <code>n</code> columns. Row 1 would have <code>n - 1</code> columns. Row 2 would have <code>n - 2</code> columns.  Row 3 ... . If my memory is correct, we coded the array pretty much the same as it would be done in Java. It was an array of arrays."}],"answers":[{"tags":[],"owner":{"account_id":6606677,"reputation":1024,"user_id":5103317,"display_name":"Old Dog Programmer"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1675213042,"creation_date":1670459111,"answer_id":74724260,"question_id":74724071,"body_markdown":"&gt; are there any computer languages that store a 2d array as a matrix and\r\n&gt; not as an array of arrays?\r\n\r\nYes. Or, at least, there used to be. \r\n\r\nThere is the possibility of using an assembler language, where the programmer has extreme control over how arrays might be handled. But, let&#39;s assume the question is about high-level languages (&gt;=3GL). \r\n\r\nI don&#39;t know about modern version of Fortran, but the early versions of FORTRAN stored any array, including multi-dimensional arrays, in consecutive storage locations. So, for example, if you  declared an array as `INTEGER FOO (3,4,5)`, then `FOO` and `FOO (1,1,1)` would have the same memory address.  `FOO` would occupy a block of 60 `INTEGER` sized locations. The compiler generates code to find, from the subscript values, the location of an element in a manner similar to what @Jesse described in a comment on the question. It&#39;s slightly different to allow for the fact that FORTRAN subscripts started at one instead of zero.\r\n\r\nBy the way, FORTRAN subscript are in opposite order of most other languages. In Java, C, C++, and COBOL, the major subscripts are to the left. In FORTRAN, they were to the right. \r\n\r\nFORTRAN syntax didn&#39;t allow missing subscripts. So, continuing the example, something like `FOO (2,3)` would generate a compiler error.\r\n\r\nNow, suppose there was the following method:\r\n\r\n          REAL FUNCTION MEAN (ARR, N)\r\n          INTEGER N, ARR (N)\r\n          REAL SUM\r\n          DO 400 I = 1,N,1\r\n          SUM = SUM + ARR (I)\r\n      400 CONTINUE   \r\n          RETURN SUM / N\r\n          END\r\n\r\nA programmer could it use to calculate the mean of the entire `FOO` array, or any part of it: \r\n\r\n         REAL ALLMEAN, LEVEL3MEAN, ROWMEAN\r\n\r\n         ALLMEAN = MEAN (FOO(1,1,1), 60)\r\n         LEVEL3MEAN = MEAN (FOO(1,1,3), 12)\r\n         ROWMEAN = MEAN (FOO(1,2,3), 4)\r\n\r\nSuppose, for some strange reason, there was this:\r\n\r\n          AVGPART = MEAN (FOO (2,3,2), 20)\r\n\r\nThis would use 20 consecutive elements of `FOO`, even if those elements were in different rows or levels. \r\n\r\nWhen I took a C++ course, someone didn&#39;t like having to type separate `[x]` subscripts for multidimensional arrays. Instead of `foo [2][1][0]`, he would rather type something like `foo.get (2,1,0)`, so wrote a convenience wrapper class for an array. Such code might still have `foo [t][r][c]` inside the wrapper class. Or, it could allocate a 1D array. Once the class was created, it allowed him to specify subscripts as arguments in a call to a method.\r\n\r\nCode in Java to do that, using the 1D array option, might look like this:\r\n\r\n      public class Block {\r\n         // class for regular 3D Array\r\n         private int [] array;\r\n         private int rows, int columns, int levels;\r\n     \r\n         public Block (int t, int r, int c) { \r\n             rows = r;\r\n             columns = c;\r\n             levels = t;\r\n             array = new array [ t * r * c];\r\n        }\r\n\r\n        public int get (int t, int r, int c) { \r\n           return array [ t * rows * columns + r * columns + c ];  \r\n        }\r\n        \r\n        public void set (int value, int t, int r, int c) { \r\n           array [ t * rows * columns + r * columns + c ] = value;\r\n        }\r\n        ...\r\n     }\r\n","title":"java 2d memory address","body":"<blockquote>\n<p>are there any computer languages that store a 2d array as a matrix and\nnot as an array of arrays?</p>\n</blockquote>\n<p>Yes. Or, at least, there used to be.</p>\n<p>There is the possibility of using an assembler language, where the programmer has extreme control over how arrays might be handled. But, let's assume the question is about high-level languages (&gt;=3GL).</p>\n<p>I don't know about modern version of Fortran, but the early versions of FORTRAN stored any array, including multi-dimensional arrays, in consecutive storage locations. So, for example, if you  declared an array as <code>INTEGER FOO (3,4,5)</code>, then <code>FOO</code> and <code>FOO (1,1,1)</code> would have the same memory address.  <code>FOO</code> would occupy a block of 60 <code>INTEGER</code> sized locations. The compiler generates code to find, from the subscript values, the location of an element in a manner similar to what @Jesse described in a comment on the question. It's slightly different to allow for the fact that FORTRAN subscripts started at one instead of zero.</p>\n<p>By the way, FORTRAN subscript are in opposite order of most other languages. In Java, C, C++, and COBOL, the major subscripts are to the left. In FORTRAN, they were to the right.</p>\n<p>FORTRAN syntax didn't allow missing subscripts. So, continuing the example, something like <code>FOO (2,3)</code> would generate a compiler error.</p>\n<p>Now, suppose there was the following method:</p>\n<pre><code>      REAL FUNCTION MEAN (ARR, N)\n      INTEGER N, ARR (N)\n      REAL SUM\n      DO 400 I = 1,N,1\n      SUM = SUM + ARR (I)\n  400 CONTINUE   \n      RETURN SUM / N\n      END\n</code></pre>\n<p>A programmer could it use to calculate the mean of the entire <code>FOO</code> array, or any part of it:</p>\n<pre><code>     REAL ALLMEAN, LEVEL3MEAN, ROWMEAN\n\n     ALLMEAN = MEAN (FOO(1,1,1), 60)\n     LEVEL3MEAN = MEAN (FOO(1,1,3), 12)\n     ROWMEAN = MEAN (FOO(1,2,3), 4)\n</code></pre>\n<p>Suppose, for some strange reason, there was this:</p>\n<pre><code>      AVGPART = MEAN (FOO (2,3,2), 20)\n</code></pre>\n<p>This would use 20 consecutive elements of <code>FOO</code>, even if those elements were in different rows or levels.</p>\n<p>When I took a C++ course, someone didn't like having to type separate <code>[x]</code> subscripts for multidimensional arrays. Instead of <code>foo [2][1][0]</code>, he would rather type something like <code>foo.get (2,1,0)</code>, so wrote a convenience wrapper class for an array. Such code might still have <code>foo [t][r][c]</code> inside the wrapper class. Or, it could allocate a 1D array. Once the class was created, it allowed him to specify subscripts as arguments in a call to a method.</p>\n<p>Code in Java to do that, using the 1D array option, might look like this:</p>\n<pre><code>  public class Block {\n     // class for regular 3D Array\n     private int [] array;\n     private int rows, int columns, int levels;\n \n     public Block (int t, int r, int c) { \n         rows = r;\n         columns = c;\n         levels = t;\n         array = new array [ t * r * c];\n    }\n\n    public int get (int t, int r, int c) { \n       return array [ t * rows * columns + r * columns + c ];  \n    }\n    \n    public void set (int value, int t, int r, int c) { \n       array [ t * rows * columns + r * columns + c ] = value;\n    }\n    ...\n }\n</code></pre>\n"}],"owner":{"account_id":4010701,"reputation":15103,"user_id":4398966,"accept_rate":64,"display_name":"DCR"},"comment_count":14,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":85,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1675213042,"creation_date":1670457077,"question_id":74724071,"body_markdown":"in java if we have:\r\n\r\n    int[][] x = new int[3][3];\r\n\r\nthe memory address of x is different from the memory address of x[0].  As  x[0] gives the memory address of the first column.  So the memory address of x[0][0] is different than the memory address of x[0].\r\n\r\nare there any computer languages that store a 2d array as a matrix and not as an array of arrays?\r\n\r\nwould the address of x always be different from x[0] and the address of x[0] equal x[0][0]?","title":"java 2d memory address","body":"<p>in java if we have:</p>\n<pre><code>int[][] x = new int[3][3];\n</code></pre>\n<p>the memory address of x is different from the memory address of x[0].  As  x[0] gives the memory address of the first column.  So the memory address of x[0][0] is different than the memory address of x[0].</p>\n<p>are there any computer languages that store a 2d array as a matrix and not as an array of arrays?</p>\n<p>would the address of x always be different from x[0] and the address of x[0] equal x[0][0]?</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":108033,"reputation":17201,"user_id":286934,"display_name":"Progman"},"score":0,"creation_date":1604699491,"post_id":64722027,"comment_id":114436594,"body_markdown":"What do you mean by &quot;finding the mode&quot;?","body":"What do you mean by &quot;finding the mode&quot;?"},{"owner":{"account_id":19916079,"reputation":13,"user_id":14593036,"display_name":"apll0"},"score":0,"creation_date":1604699599,"post_id":64722027,"comment_id":114436628,"body_markdown":"The number in the array that occurs the most for example [1,2,2,3,4,5], the value 2 occurs twice so that is the mode, but in [1,2,2,3,3,4], the values 2 and 3 occur twice so both are the mode","body":"The number in the array that occurs the most for example [1,2,2,3,4,5], the value 2 occurs twice so that is the mode, but in [1,2,2,3,3,4], the values 2 and 3 occur twice so both are the mode"},{"owner":{"account_id":6780825,"reputation":155680,"user_id":5221149,"display_name":"Andreas"},"score":0,"creation_date":1604699609,"post_id":64722027,"comment_id":114436633,"body_markdown":"@Progman [Definition of Mode](https://www.mathsisfun.com/definitions/mode.html): The number which appears most often in a set of numbers.","body":"@Progman <a href=\"https://www.mathsisfun.com/definitions/mode.html\" rel=\"nofollow noreferrer\">Definition of Mode</a>: The number which appears most often in a set of numbers."},{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":0,"creation_date":1604718718,"post_id":64722027,"comment_id":114440227,"body_markdown":"What problem are you having, detecting a second run with the same length, returning NaN, or something else?","body":"What problem are you having, detecting a second run with the same length, returning NaN, or something else?"}],"answers":[{"tags":[],"owner":{"account_id":6780825,"reputation":155680,"user_id":5221149,"display_name":"Andreas"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1604700331,"creation_date":1604700331,"answer_id":64722198,"question_id":64722027,"body_markdown":"The code in the question finds the same mode value multiple times. E.g. if `data = {1,2,3,3,4}`, when `i = 2` it will find `count = 2` for value `3`, and when `i = 3` it will again find `count = 2` for value `3`.\r\n\r\nTo recognize multiple *distinct* modes, the code needs to not find the same `mode` value more than once. This is easily achieved by changing the `j` loop to start at `i`, so that subsequent counting of a particular value ends up counting less.\r\n\r\nNow that the code will never see the same mode more than once, we can detect multimodal data by checking for `count == maxCount`. If that happens, change `maxValue`, aka the mode, to `NaN`.\r\n\r\nWe also need to initialize `maxValue` to `NaN` instead of `0`, so the result is `NaN` if `data` is an empty array.\r\n\r\n*Note:* This is not the most efficient implementation for finding mode, but it is the least amount of change to fix the code in the question.\r\n\r\n```lang-java\r\npublic static double mode(double... data) {\r\n\tdouble maxValue = Double.NaN;\r\n\tint maxCount = 0;\r\n\tfor (int i = 0; i &lt; data.length; ++i) {\r\n\t\tint count = 0;\r\n\t\tfor (int j = i; j &lt; data.length; ++j) {\r\n\t\t\tif (data[j] == data[i])\r\n\t\t\t\t++count;\r\n\t\t}\r\n\t\tif (count == maxCount) {\r\n\t\t\tmaxValue = Double.NaN;\r\n\t\t} else if (count &gt; maxCount) {\r\n\t\t\tmaxCount = count;\r\n\t\t\tmaxValue = data[i];\r\n\t\t}\r\n\t}\r\n\treturn maxValue;\r\n}\r\n```\r\n\r\n*Test*\r\n\r\n```lang-java\r\nSystem.out.println(mode(1,2,3,3,4));\r\nSystem.out.println(mode(1,2,2,3,3,4));\r\nSystem.out.println(mode(1));\r\nSystem.out.println(mode());\r\n```\r\n\r\n*Output*\r\n\r\n```lang-none\r\n3.0\r\nNaN\r\n1.0\r\nNaN\r\n```","title":"Program to recognize multiple modes","body":"<p>The code in the question finds the same mode value multiple times. E.g. if <code>data = {1,2,3,3,4}</code>, when <code>i = 2</code> it will find <code>count = 2</code> for value <code>3</code>, and when <code>i = 3</code> it will again find <code>count = 2</code> for value <code>3</code>.</p>\n<p>To recognize multiple <em>distinct</em> modes, the code needs to not find the same <code>mode</code> value more than once. This is easily achieved by changing the <code>j</code> loop to start at <code>i</code>, so that subsequent counting of a particular value ends up counting less.</p>\n<p>Now that the code will never see the same mode more than once, we can detect multimodal data by checking for <code>count == maxCount</code>. If that happens, change <code>maxValue</code>, aka the mode, to <code>NaN</code>.</p>\n<p>We also need to initialize <code>maxValue</code> to <code>NaN</code> instead of <code>0</code>, so the result is <code>NaN</code> if <code>data</code> is an empty array.</p>\n<p><em>Note:</em> This is not the most efficient implementation for finding mode, but it is the least amount of change to fix the code in the question.</p>\n<pre class=\"lang-java prettyprint-override\"><code>public static double mode(double... data) {\n    double maxValue = Double.NaN;\n    int maxCount = 0;\n    for (int i = 0; i &lt; data.length; ++i) {\n        int count = 0;\n        for (int j = i; j &lt; data.length; ++j) {\n            if (data[j] == data[i])\n                ++count;\n        }\n        if (count == maxCount) {\n            maxValue = Double.NaN;\n        } else if (count &gt; maxCount) {\n            maxCount = count;\n            maxValue = data[i];\n        }\n    }\n    return maxValue;\n}\n</code></pre>\n<p><em>Test</em></p>\n<pre class=\"lang-java prettyprint-override\"><code>System.out.println(mode(1,2,3,3,4));\nSystem.out.println(mode(1,2,2,3,3,4));\nSystem.out.println(mode(1));\nSystem.out.println(mode());\n</code></pre>\n<p><em>Output</em></p>\n<pre class=\"lang-none prettyprint-override\"><code>3.0\nNaN\n1.0\nNaN\n</code></pre>\n"}],"owner":{"account_id":19916079,"reputation":13,"user_id":14593036,"display_name":"apll0"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":156,"favorite_count":0,"down_vote_count":2,"up_vote_count":1,"closed_date":1604725765,"answer_count":1,"score":-1,"last_activity_date":1675212386,"creation_date":1604699257,"question_id":64722027,"body_markdown":"I have this code that find the mode of an array. Ex: [1,2,3,3,4] the program will out put 3.0. However, in the case of [1,2,2,3,3,4] the program will output 2.0 because it comes first. I want the program to know that the values 2 and 3 show up twice and thus should return the value Double.NaN(which is what our professor wants). Any help is appreciated, thank you!\r\n\r\nP.S. We cannot use any import classes such as java.util.Arrays, etc.  \r\nThe input array is always sorted.\r\n\r\n    public double mode() {\r\n\r\n\t\tdouble maxValue = 0;\r\n\r\n\t\tint maxCount = 0;\r\n\r\n\t\tfor (int i = 0; i &lt; data.length; ++i) {\r\n\r\n\t\t\tint count = 0;\r\n\r\n\t\t\tfor (int j = 0; j &lt; data.length; ++j) {\r\n\r\n\t\t\t\tif (data[j] == data[i])\r\n\r\n\t\t\t\t\t++count;\r\n\r\n\t\t\t} // End of for loop\r\n\r\n\t\t\tif (count &gt; maxCount) {\r\n\r\n\t\t\t\tmaxCount = count;\r\n\r\n\t\t\t\tmaxValue = data[i];\r\n\r\n\t\t\t} // End of if condition\r\n\r\n\t\t} // End of for loop\r\n\t\t\r\n\t\treturn maxValue;\r\n\r\n\t} // End of method\r\n\r\n","title":"Program to recognize multiple modes","body":"<p>I have this code that find the mode of an array. Ex: [1,2,3,3,4] the program will out put 3.0. However, in the case of [1,2,2,3,3,4] the program will output 2.0 because it comes first. I want the program to know that the values 2 and 3 show up twice and thus should return the value Double.NaN(which is what our professor wants). Any help is appreciated, thank you!</p>\n<p>P.S. We cannot use any import classes such as java.util.Arrays, etc.<br />\nThe input array is always sorted.</p>\n<pre><code>public double mode() {\n\n    double maxValue = 0;\n\n    int maxCount = 0;\n\n    for (int i = 0; i &lt; data.length; ++i) {\n\n        int count = 0;\n\n        for (int j = 0; j &lt; data.length; ++j) {\n\n            if (data[j] == data[i])\n\n                ++count;\n\n        } // End of for loop\n\n        if (count &gt; maxCount) {\n\n            maxCount = count;\n\n            maxValue = data[i];\n\n        } // End of if condition\n\n    } // End of for loop\n    \n    return maxValue;\n\n} // End of method\n</code></pre>\n"},{"tags":["java","android","graphics","android-drawable"],"owner":{"account_id":19598741,"reputation":1,"user_id":20757377,"display_name":"Yaroslav Zhuk"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":33,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1675211720,"creation_date":1675210954,"question_id":75304478,"body_markdown":"I&#39;m not familiar with android.graphic, but I have to edit following code in my app. What I get is comic-like cloud, dialog with a tail in bottom-right corner. This tail should be removed and replaced with rounded corner. \r\n```\r\npath.moveTo(bounds.right&#160;-&#160;dp(2.6f),&#160;bounds.bottom&#160;-&#160;padding);\r\npath.lineTo(bounds.left&#160;+&#160;padding&#160;+&#160;rad,&#160;bounds.bottom&#160;-&#160;padding);  rect.set(bounds.left&#160;+&#160;padding,&#160;bounds.bottom&#160;-&#160;padding&#160;-&#160;rad&#160;*&#160;2,&#160;bounds.left&#160;+&#160;padding&#160;+&#160;rad&#160;*&#160;2,&#160;bounds.bottom&#160;-&#160;padding); \r\npath.arcTo(rect,&#160;90,&#160;90,&#160;false);\r\npath.lineTo(bounds.left&#160;+&#160;padding,&#160;bounds.top&#160;+&#160;padding&#160;+&#160;rad);  rect.set(bounds.left&#160;+&#160;padding,&#160;bounds.top&#160;+&#160;padding,&#160;bounds.left&#160;+&#160;padding&#160;+&#160;rad&#160;*&#160;2,&#160;bounds.top&#160;+&#160;padding&#160;+&#160;rad&#160;*&#160;2); \r\npath.arcTo(rect,&#160;180,&#160;90,&#160;false); \r\nint&#160;radToUse&#160;=&#160;isTopNear&#160;?&#160;nearRad&#160;:&#160;rad;\r\npath.lineTo(bounds.right&#160;-&#160;dp(8)&#160;-&#160;radToUse,&#160;bounds.top&#160;+&#160;padding); \r\nrect.set(bounds.right&#160;-&#160;dp(8)&#160;-&#160;radToUse&#160;*&#160;2,&#160;bounds.top&#160;+&#160;padding,&#160;bounds.right&#160;-&#160;dp(8),&#160;bounds.top&#160;+&#160;padding&#160;+&#160;radToUse&#160;*&#160;2);\r\npath.arcTo(rect,&#160;270,&#160;90,&#160;false);\r\npath.lineTo(bounds.right&#160;-&#160;padding,&#160;top&#160;-&#160;topY&#160;+&#160;currentBackgroundHeight);\r\n```\r\nPaddind is 2F,\r\nSmall rad is 6F,\r\nRad can be in range of 1F to 17F.\r\n\r\nI tried to remove three lines, responsible for this corner, but drawable becomes destroyed.\r\n","title":"How to create a right drawable with path class","body":"<p>I'm not familiar with android.graphic, but I have to edit following code in my app. What I get is comic-like cloud, dialog with a tail in bottom-right corner. This tail should be removed and replaced with rounded corner.</p>\n<pre><code>path.moveTo(bounds.right - dp(2.6f), bounds.bottom - padding);\npath.lineTo(bounds.left + padding + rad, bounds.bottom - padding);  rect.set(bounds.left + padding, bounds.bottom - padding - rad * 2, bounds.left + padding + rad * 2, bounds.bottom - padding); \npath.arcTo(rect, 90, 90, false);\npath.lineTo(bounds.left + padding, bounds.top + padding + rad);  rect.set(bounds.left + padding, bounds.top + padding, bounds.left + padding + rad * 2, bounds.top + padding + rad * 2); \npath.arcTo(rect, 180, 90, false); \nint radToUse = isTopNear ? nearRad : rad;\npath.lineTo(bounds.right - dp(8) - radToUse, bounds.top + padding); \nrect.set(bounds.right - dp(8) - radToUse * 2, bounds.top + padding, bounds.right - dp(8), bounds.top + padding + radToUse * 2);\npath.arcTo(rect, 270, 90, false);\npath.lineTo(bounds.right - padding, top - topY + currentBackgroundHeight);\n</code></pre>\n<p>Paddind is 2F,\nSmall rad is 6F,\nRad can be in range of 1F to 17F.</p>\n<p>I tried to remove three lines, responsible for this corner, but drawable becomes destroyed.</p>\n"},{"tags":["java","azure","azure-keyvault","azure-ad-msal","azure-security"],"answers":[{"tags":[],"owner":{"account_id":1035119,"reputation":1104,"user_id":1042624,"accept_rate":74,"display_name":"Niclas"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1675210644,"creation_date":1675210644,"answer_id":75304448,"question_id":75239636,"body_markdown":"Are you sure it is supported? As far as I know certificated-based authentication is not supported.\r\nMSAL uses either public clients or confidential clients.\r\n\r\n - https://learn.microsoft.com/en-us/azure/active-directory/develop/authentication-flows-app-scenarios#daemon-app-that-calls-a-web-api-in-the-daemons-name\r\n - https://learn.microsoft.com/en-us/azure/active-directory/develop/msal-client-applications\r\n\r\nHowever, I did find this on their wiki:  https://github.com/AzureAD/microsoft-authentication-library-for-java/wiki/Client-Credentials\r\n\r\nThere are two types of client secrets in MSAL4J:\r\n- Application Secrets\r\n- Certificates\r\n\r\nYou need to instantiate a confidential client application; if you have a certificate:\r\n\r\n    String PUBLIC_CLIENT_ID;\r\n    String AUTHORITY;\r\n    PrivateKey PRIVATE_KEY;  \r\n    X509Certificate PUBLIC_KEY;\r\n    \r\n    IClientCredential credential = ClientCredentialFactory.createFromCertificate(PRIVATE_KEY, PUBLIC_KEY);\r\n    ConfidentialClientApplication app = \r\n        ConfidentialClientApplication\r\n            .builder(PUBLIC_CLIENT_ID, credential)\r\n            .authority(AUTHORITY)\r\n            .build();\r\n\r\nThen acquire a token:  https://github.com/AzureAD/microsoft-authentication-library-for-java/wiki/Acquiring-Tokens#confidential-client-applications\r\n\r\nhttps://github.com/AzureAD/microsoft-authentication-library-for-js/blob/dev/lib/msal-node/src/client/ConfidentialClientApplication.ts  \r\nYou would need to use: `acquireTokenByClientCredential`\r\nhttps://azuread.github.io/microsoft-authentication-library-for-js/ref/classes/_azure_msal_node.confidentialclientapplication.html#acquiretokenbyclientcredential   \r\n\r\n\r\nAlso see:  \r\n- https://github.com/AzureAD/microsoft-authentication-library-for-java/blob/dev/msal4j-sdk/src/integrationtest/java/com.microsoft.aad.msal4j/CertificateHelper.java\r\n- https://learn.microsoft.com/en-us/azure/active-directory/develop/sample-v2-code\r\n- https://learn.microsoft.com/en-us/azure/active-directory/develop/v2-oauth2-client-creds-grant-flow","title":"How can I make MSAL4J and azure-security-keyvault-* work together?","body":"<p>Are you sure it is supported? As far as I know certificated-based authentication is not supported.\nMSAL uses either public clients or confidential clients.</p>\n<ul>\n<li><a href=\"https://learn.microsoft.com/en-us/azure/active-directory/develop/authentication-flows-app-scenarios#daemon-app-that-calls-a-web-api-in-the-daemons-name\" rel=\"nofollow noreferrer\">https://learn.microsoft.com/en-us/azure/active-directory/develop/authentication-flows-app-scenarios#daemon-app-that-calls-a-web-api-in-the-daemons-name</a></li>\n<li><a href=\"https://learn.microsoft.com/en-us/azure/active-directory/develop/msal-client-applications\" rel=\"nofollow noreferrer\">https://learn.microsoft.com/en-us/azure/active-directory/develop/msal-client-applications</a></li>\n</ul>\n<p>However, I did find this on their wiki:  <a href=\"https://github.com/AzureAD/microsoft-authentication-library-for-java/wiki/Client-Credentials\" rel=\"nofollow noreferrer\">https://github.com/AzureAD/microsoft-authentication-library-for-java/wiki/Client-Credentials</a></p>\n<p>There are two types of client secrets in MSAL4J:</p>\n<ul>\n<li>Application Secrets</li>\n<li>Certificates</li>\n</ul>\n<p>You need to instantiate a confidential client application; if you have a certificate:</p>\n<pre><code>String PUBLIC_CLIENT_ID;\nString AUTHORITY;\nPrivateKey PRIVATE_KEY;  \nX509Certificate PUBLIC_KEY;\n\nIClientCredential credential = ClientCredentialFactory.createFromCertificate(PRIVATE_KEY, PUBLIC_KEY);\nConfidentialClientApplication app = \n    ConfidentialClientApplication\n        .builder(PUBLIC_CLIENT_ID, credential)\n        .authority(AUTHORITY)\n        .build();\n</code></pre>\n<p>Then acquire a token:  <a href=\"https://github.com/AzureAD/microsoft-authentication-library-for-java/wiki/Acquiring-Tokens#confidential-client-applications\" rel=\"nofollow noreferrer\">https://github.com/AzureAD/microsoft-authentication-library-for-java/wiki/Acquiring-Tokens#confidential-client-applications</a></p>\n<p><a href=\"https://github.com/AzureAD/microsoft-authentication-library-for-js/blob/dev/lib/msal-node/src/client/ConfidentialClientApplication.ts\" rel=\"nofollow noreferrer\">https://github.com/AzureAD/microsoft-authentication-library-for-js/blob/dev/lib/msal-node/src/client/ConfidentialClientApplication.ts</a><br />\nYou would need to use: <code>acquireTokenByClientCredential</code>\n<a href=\"https://azuread.github.io/microsoft-authentication-library-for-js/ref/classes/_azure_msal_node.confidentialclientapplication.html#acquiretokenbyclientcredential\" rel=\"nofollow noreferrer\">https://azuread.github.io/microsoft-authentication-library-for-js/ref/classes/_azure_msal_node.confidentialclientapplication.html#acquiretokenbyclientcredential</a></p>\n<p>Also see:</p>\n<ul>\n<li><a href=\"https://github.com/AzureAD/microsoft-authentication-library-for-java/blob/dev/msal4j-sdk/src/integrationtest/java/com.microsoft.aad.msal4j/CertificateHelper.java\" rel=\"nofollow noreferrer\">https://github.com/AzureAD/microsoft-authentication-library-for-java/blob/dev/msal4j-sdk/src/integrationtest/java/com.microsoft.aad.msal4j/CertificateHelper.java</a></li>\n<li><a href=\"https://learn.microsoft.com/en-us/azure/active-directory/develop/sample-v2-code\" rel=\"nofollow noreferrer\">https://learn.microsoft.com/en-us/azure/active-directory/develop/sample-v2-code</a></li>\n<li><a href=\"https://learn.microsoft.com/en-us/azure/active-directory/develop/v2-oauth2-client-creds-grant-flow\" rel=\"nofollow noreferrer\">https://learn.microsoft.com/en-us/azure/active-directory/develop/v2-oauth2-client-creds-grant-flow</a></li>\n</ul>\n"}],"owner":{"account_id":7876611,"reputation":77,"user_id":5952188,"display_name":"Xtonic Chen"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":200,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1675210644,"creation_date":1674679405,"question_id":75239636,"body_markdown":"I would like to authenticate with MSAL4J and the certificate stored in Azure Key Vault (AKV). The certificate is a self-signed Azure Key Vault certificate.\r\n\r\nI could find an example based on a certificate and key stored locally (file system) but not a certificate created and stored in AKV. How to use the certificate, key, and secret objects obtained from `azure-security-keyvault-*` with MSAL4J?\r\n\r\n1.\tThe key from `azure-security-keyvault-keys` is `com.azure.security.keyvault.keys.models.KeyVaultKey`, but MSAL4J expects `java.security.PrivateKey`.\r\n1.\tHow to apply the secret obtained from `azure-security-keyvault-secrets` to decrypt the private key?\r\n","title":"How can I make MSAL4J and azure-security-keyvault-* work together?","body":"<p>I would like to authenticate with MSAL4J and the certificate stored in Azure Key Vault (AKV). The certificate is a self-signed Azure Key Vault certificate.</p>\n<p>I could find an example based on a certificate and key stored locally (file system) but not a certificate created and stored in AKV. How to use the certificate, key, and secret objects obtained from <code>azure-security-keyvault-*</code> with MSAL4J?</p>\n<ol>\n<li>The key from <code>azure-security-keyvault-keys</code> is <code>com.azure.security.keyvault.keys.models.KeyVaultKey</code>, but MSAL4J expects <code>java.security.PrivateKey</code>.</li>\n<li>How to apply the secret obtained from <code>azure-security-keyvault-secrets</code> to decrypt the private key?</li>\n</ol>\n"},{"tags":["java","excel","eclipse","apache-poi"],"comments":[{"owner":{"account_id":14380012,"reputation":333,"user_id":10387506,"display_name":"Dolunaykiz"},"score":0,"creation_date":1675181904,"post_id":75299858,"comment_id":132871463,"body_markdown":"Are you writing the file to OneDrive or SharePoint? That is, is the mapped drive you are listing as &quot;D&quot; a local drive or one mapped from OneDrive/SharePoint?","body":"Are you writing the file to OneDrive or SharePoint? That is, is the mapped drive you are listing as &quot;D&quot; a local drive or one mapped from OneDrive/SharePoint?"},{"owner":{"account_id":12743722,"reputation":19956,"user_id":12567365,"display_name":"andrewJames"},"score":1,"creation_date":1675193750,"post_id":75299858,"comment_id":132874984,"body_markdown":"Can you describe a bit more what you mean by &quot;_the switch to an SSH MySQL connection_&quot; here? Your code shown in the question works OK for me - but there is nothing to indicate that this code is using SSH in any way. It looks like a standard TCP/IP connection URL to me (except on port 3307 instead of 3306). How have you set up that SSH tunnel, and how are you using it in your Java code?","body":"Can you describe a bit more what you mean by &quot;<i>the switch to an SSH MySQL connection</i>&quot; here? Your code shown in the question works OK for me - but there is nothing to indicate that this code is using SSH in any way. It looks like a standard TCP/IP connection URL to me (except on port 3307 instead of 3306). How have you set up that SSH tunnel, and how are you using it in your Java code?"},{"owner":{"account_id":12743722,"reputation":19956,"user_id":12567365,"display_name":"andrewJames"},"score":0,"creation_date":1675202388,"post_id":75299858,"comment_id":132877287,"body_markdown":"Just as an experiment, I opened my own SSH tunnel to a remote MySQL server (using OpenSSH on Windows as the client). I used your code (different SQL of course) - and my Excel file opened correctly. I am not able to recreate your issue, unfortunately. Maybe as well as showing the SSH details, you can share all the versions you are using (Java, MySQL, the JDBC driver, POI).","body":"Just as an experiment, I opened my own SSH tunnel to a remote MySQL server (using OpenSSH on Windows as the client). I used your code (different SQL of course) - and my Excel file opened correctly. I am not able to recreate your issue, unfortunately. Maybe as well as showing the SSH details, you can share all the versions you are using (Java, MySQL, the JDBC driver, POI)."},{"owner":{"account_id":11324596,"reputation":45,"user_id":8303968,"accept_rate":40,"display_name":"David S."},"score":0,"creation_date":1675210665,"post_id":75299858,"comment_id":132878964,"body_markdown":"AndrewJames thanks for weighing in.  Can you tell me the versions of your POI jar files, etc.?","body":"AndrewJames thanks for weighing in.  Can you tell me the versions of your POI jar files, etc.?"},{"owner":{"account_id":12743722,"reputation":19956,"user_id":12567365,"display_name":"andrewJames"},"score":0,"creation_date":1675212489,"post_id":75299858,"comment_id":132879246,"body_markdown":"Your Java SSH code works OK for me - it still allows me to generate a valid Excel file. I am using Java 17, POI 5.2.3, MySQL connector 8.0.32 (and MySQL 8), JSch 0.1.55. (You don&#39;t need `Class.forName(driverName)` these days - but that is not related to your POI problem). Sorry, I am unable to recreate the problem. Maybe write the SQL result data to a text file - both with the tunnel and without it (if you say adding the tunnel caused the problems to start appearing). That way, you can narrow down things.","body":"Your Java SSH code works OK for me - it still allows me to generate a valid Excel file. I am using Java 17, POI 5.2.3, MySQL connector 8.0.32 (and MySQL 8), JSch 0.1.55. (You don&#39;t need <code>Class.forName(driverName)</code> these days - but that is not related to your POI problem). Sorry, I am unable to recreate the problem. Maybe write the SQL result data to a text file - both with the tunnel and without it (if you say adding the tunnel caused the problems to start appearing). That way, you can narrow down things."},{"owner":{"account_id":11324596,"reputation":45,"user_id":8303968,"accept_rate":40,"display_name":"David S."},"score":0,"creation_date":1675215599,"post_id":75299858,"comment_id":132879640,"body_markdown":"Thanks a ton AndrewJames.  I will follow your guidance and get back on here with the results.  I appreciate your help!","body":"Thanks a ton AndrewJames.  I will follow your guidance and get back on here with the results.  I appreciate your help!"},{"owner":{"account_id":11324596,"reputation":45,"user_id":8303968,"accept_rate":40,"display_name":"David S."},"score":0,"creation_date":1675216160,"post_id":75299858,"comment_id":132879723,"body_markdown":"By the way, I went to the build properties and see that I am using JRE -  JavaSE-1.8\nI&#39;m wondering if that would be related...","body":"By the way, I went to the build properties and see that I am using JRE -  JavaSE-1.8 I&#39;m wondering if that would be related..."}],"owner":{"account_id":11324596,"reputation":45,"user_id":8303968,"accept_rate":40,"display_name":"David S."},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":183,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1675210428,"creation_date":1675181049,"question_id":75299858,"body_markdown":"I run the following class to generate an Excel spreadsheet that will contain the results of my SQL query.  Each time the file is generated, there is an error message when you try to open it up, &quot;Excel cannot open the file because the file format or file extension is not valid. Verify that the file has not been corrupted and that the file extension matches the format of the file.  \r\n\r\nI am at the end of my abilities with respect to troubleshooting this as I have used this type of code successfully and have noticed this error arising after the switch to an SSH MySQL connection versus a straight 3306 connection previously.  There are no error messages in the console.\r\n\r\n    package process;\r\n\t\r\n    import java.sql.*;\r\n    import org.apache.poi.ss.usermodel.*;\r\n    import org.apache.poi.xssf.usermodel.*;\r\n    import java.io.*;\r\n\r\n\r\n\tpublic class WriteMySQLToExcel {\r\n\t   public static void main(String[] args) throws SQLException, IOException {\r\n\r\n\t         Connection conn = DriverManager.getConnection(&quot;jdbc:mysql://localhost:3307/wp_dashort&quot;, &quot;dashort&quot;, &quot;gt9wkk6r1TPnkgrY&quot;);\r\n\t         \r\n\t         String mark_complete = &quot;SELECT DISTINCT wpgc.user_id, wpgc.timestamp\\r\\n&quot;\r\n\t\t\t\t\t\t+ &quot;FROM wp_grassblade_completions as wpgc \\r\\n&quot; + &quot;  INNER JOIN \\r\\n&quot;\r\n\t\t\t\t\t\t+ &quot;  wp_usermeta ON wpgc.user_id = wp_usermeta.user_id\\r\\n&quot;\r\n\t\t\t\t\t\t+ &quot;  WHERE wpgc.user_id NOT IN (SELECT atc_reporting.user_id FROM atc_reporting WHERE course = &#39;SECURITY&#39;) AND wpgc.timestamp BETWEEN (CURRENT_DATE -INTERVAL 30 DAY) AND DATE_ADD(CURRENT_DATE(), INTERVAL 1 DAY) AND content_id IN (1575, 642, 1580) \\r\\n&quot;\r\n\t\t\t\t\t\t+ &quot;GROUP BY wpgc.user_id\\r\\n&quot; + &quot;order BY wpgc.timestamp, wp_usermeta.user_id&quot;;\r\n\t         \r\n\t         Statement stmt = conn.createStatement();\r\n\t         ResultSet rs = stmt.executeQuery(mark_complete);\r\n\t         \r\n\t         XSSFWorkbook workbook = new XSSFWorkbook();\r\n\t         XSSFSheet sheet = workbook.createSheet(&quot;Query Results&quot;);\r\n\t         // Create header row\r\n\t         XSSFRow headerRow = sheet.createRow(0);\r\n\t         for (int i = 1; i &lt;= rs.getMetaData().getColumnCount(); i++) {\r\n\t           headerRow.createCell(i - 1).setCellValue(rs.getMetaData().getColumnName(i));\r\n\t         }\r\n\r\n\t         int rowNum = 1;\r\n\t         while (rs.next()) {\r\n\t           XSSFRow row = sheet.createRow(rowNum++);\r\n\t           for (int i = 1; i &lt;= rs.getMetaData().getColumnCount(); i++) {\r\n\t             row.createCell(i - 1).setCellValue(rs.getString(i));\r\n\t           }\r\n\t         }\r\n\t  \r\n\t         FileOutputStream fileOut = new FileOutputStream(&quot;D://testexpdata.xlsx&quot;);\r\n\t         workbook.write(fileOut);\r\n\t         fileOut.close();\r\n\t         workbook.close();\r\n\t         \r\n\t         rs.close();\r\n\t         stmt.close();\r\n\t         conn.close();\r\n\t      }\r\n\t   }\r\n\r\nCode to connect through SSH follows:\r\n\r\n\r\n    public class SQLConnection {\r\n\tprivate static Connection connection = null;\r\n    private static Session session = null;\r\n\r\n    private static void connectToServer(String dataBaseName) throws SQLException {\r\n        dataBaseName=&quot;wp_dashort&quot;;\r\n        connectSSH();\r\n        connectToDataBase(dataBaseName);\r\n    \r\n    }\r\n\r\n    static void connectSSH() throws SQLException {\r\n        String sshHost = &quot;shortguy.ssh.wpengine.net&quot;;\r\n        String sshuser = &quot;shortguy&quot;;\r\n        String dbuserName = &quot;shortguy&quot;;\r\n        String dbpassword = &quot;gt9wgrYpassword&quot;;\r\n        String SshKeyFilepath = &quot;c://users//ed25519eclipse&quot;;\r\n\r\n        int localPort = 3307; // any free port can be used\r\n        String remoteHost = &quot;127.0.0.1&quot;;\r\n        int remotePort = 3306;\r\n        String localSSHUrl = &quot;localhost&quot;;\r\n        /***************/\r\n        String driverName = &quot;com.mysql.cj.jdbc.Driver&quot;;\r\n\r\n        try {\r\n            java.util.Properties config = new java.util.Properties();\r\n            JSch jsch = new JSch();\r\n            session = jsch.getSession(sshuser, sshHost, 22);\r\n            jsch.addIdentity(SshKeyFilepath);\r\n            config.put(&quot;StrictHostKeyChecking&quot;, &quot;no&quot;);\r\n            config.put(&quot;ConnectionAttempts&quot;, &quot;3&quot;);\r\n            session.setConfig(config);\r\n            session.connect();\r\n\r\n            System.out.println(&quot;SSH Connected&quot;);\r\n\r\n            Class.forName(driverName).newInstance();\r\n\r\n            int assinged_port = session.setPortForwardingL(localPort, remoteHost, remotePort);\r\n\r\n            System.out.println(&quot;localhost:&quot; + assinged_port + &quot; -&gt; &quot; + remoteHost + &quot;:&quot; + remotePort);\r\n            System.out.println(&quot;Port Forwarded&quot;);\r\n        } catch (Exception e) {\r\n            e.printStackTrace();\r\n        }\r\n    }\r\n\r\n\r\n\r\n\r\n    POI 5.2.3 \r\n    Apache Maven  3.8.7\r\n    MySQL Connector  8.0.32\r\n    XMLBeans 5.1.1\r\n\r\nI put the versions at the bottom of the code block above.\r\n\r\nThanks again!\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n","title":"Corrupted Excel workbook after POI write from SQL results","body":"<p>I run the following class to generate an Excel spreadsheet that will contain the results of my SQL query.  Each time the file is generated, there is an error message when you try to open it up, &quot;Excel cannot open the file because the file format or file extension is not valid. Verify that the file has not been corrupted and that the file extension matches the format of the file.</p>\n<p>I am at the end of my abilities with respect to troubleshooting this as I have used this type of code successfully and have noticed this error arising after the switch to an SSH MySQL connection versus a straight 3306 connection previously.  There are no error messages in the console.</p>\n<pre><code>package process;\n\nimport java.sql.*;\nimport org.apache.poi.ss.usermodel.*;\nimport org.apache.poi.xssf.usermodel.*;\nimport java.io.*;\n\n\npublic class WriteMySQLToExcel {\n   public static void main(String[] args) throws SQLException, IOException {\n\n         Connection conn = DriverManager.getConnection(&quot;jdbc:mysql://localhost:3307/wp_dashort&quot;, &quot;dashort&quot;, &quot;gt9wkk6r1TPnkgrY&quot;);\n         \n         String mark_complete = &quot;SELECT DISTINCT wpgc.user_id, wpgc.timestamp\\r\\n&quot;\n                    + &quot;FROM wp_grassblade_completions as wpgc \\r\\n&quot; + &quot;  INNER JOIN \\r\\n&quot;\n                    + &quot;  wp_usermeta ON wpgc.user_id = wp_usermeta.user_id\\r\\n&quot;\n                    + &quot;  WHERE wpgc.user_id NOT IN (SELECT atc_reporting.user_id FROM atc_reporting WHERE course = 'SECURITY') AND wpgc.timestamp BETWEEN (CURRENT_DATE -INTERVAL 30 DAY) AND DATE_ADD(CURRENT_DATE(), INTERVAL 1 DAY) AND content_id IN (1575, 642, 1580) \\r\\n&quot;\n                    + &quot;GROUP BY wpgc.user_id\\r\\n&quot; + &quot;order BY wpgc.timestamp, wp_usermeta.user_id&quot;;\n         \n         Statement stmt = conn.createStatement();\n         ResultSet rs = stmt.executeQuery(mark_complete);\n         \n         XSSFWorkbook workbook = new XSSFWorkbook();\n         XSSFSheet sheet = workbook.createSheet(&quot;Query Results&quot;);\n         // Create header row\n         XSSFRow headerRow = sheet.createRow(0);\n         for (int i = 1; i &lt;= rs.getMetaData().getColumnCount(); i++) {\n           headerRow.createCell(i - 1).setCellValue(rs.getMetaData().getColumnName(i));\n         }\n\n         int rowNum = 1;\n         while (rs.next()) {\n           XSSFRow row = sheet.createRow(rowNum++);\n           for (int i = 1; i &lt;= rs.getMetaData().getColumnCount(); i++) {\n             row.createCell(i - 1).setCellValue(rs.getString(i));\n           }\n         }\n  \n         FileOutputStream fileOut = new FileOutputStream(&quot;D://testexpdata.xlsx&quot;);\n         workbook.write(fileOut);\n         fileOut.close();\n         workbook.close();\n         \n         rs.close();\n         stmt.close();\n         conn.close();\n      }\n   }\n</code></pre>\n<p>Code to connect through SSH follows:</p>\n<pre><code>public class SQLConnection {\nprivate static Connection connection = null;\nprivate static Session session = null;\n\nprivate static void connectToServer(String dataBaseName) throws SQLException {\n    dataBaseName=&quot;wp_dashort&quot;;\n    connectSSH();\n    connectToDataBase(dataBaseName);\n\n}\n\nstatic void connectSSH() throws SQLException {\n    String sshHost = &quot;shortguy.ssh.wpengine.net&quot;;\n    String sshuser = &quot;shortguy&quot;;\n    String dbuserName = &quot;shortguy&quot;;\n    String dbpassword = &quot;gt9wgrYpassword&quot;;\n    String SshKeyFilepath = &quot;c://users//ed25519eclipse&quot;;\n\n    int localPort = 3307; // any free port can be used\n    String remoteHost = &quot;127.0.0.1&quot;;\n    int remotePort = 3306;\n    String localSSHUrl = &quot;localhost&quot;;\n    /***************/\n    String driverName = &quot;com.mysql.cj.jdbc.Driver&quot;;\n\n    try {\n        java.util.Properties config = new java.util.Properties();\n        JSch jsch = new JSch();\n        session = jsch.getSession(sshuser, sshHost, 22);\n        jsch.addIdentity(SshKeyFilepath);\n        config.put(&quot;StrictHostKeyChecking&quot;, &quot;no&quot;);\n        config.put(&quot;ConnectionAttempts&quot;, &quot;3&quot;);\n        session.setConfig(config);\n        session.connect();\n\n        System.out.println(&quot;SSH Connected&quot;);\n\n        Class.forName(driverName).newInstance();\n\n        int assinged_port = session.setPortForwardingL(localPort, remoteHost, remotePort);\n\n        System.out.println(&quot;localhost:&quot; + assinged_port + &quot; -&gt; &quot; + remoteHost + &quot;:&quot; + remotePort);\n        System.out.println(&quot;Port Forwarded&quot;);\n    } catch (Exception e) {\n        e.printStackTrace();\n    }\n}\n\n\n\n\nPOI 5.2.3 \nApache Maven  3.8.7\nMySQL Connector  8.0.32\nXMLBeans 5.1.1\n</code></pre>\n<p>I put the versions at the bottom of the code block above.</p>\n<p>Thanks again!</p>\n"},{"tags":["java","optimization","compilation","bytecode"],"comments":[{"owner":{"account_id":5809836,"reputation":33185,"user_id":4581301,"display_name":"user4581301"},"score":1,"creation_date":1675200614,"post_id":75303288,"comment_id":132876828,"body_markdown":"Unrelated: Amazing what a difference a few compiler versions can make: https://godbolt.org/z/z55x5M13P","body":"Unrelated: Amazing what a difference a few compiler versions can make: <a href=\"https://godbolt.org/z/z55x5M13P\" rel=\"nofollow noreferrer\">godbolt.org/z/z55x5M13P</a>"},{"owner":{"account_id":1475,"reputation":533754,"user_id":1968,"accept_rate":83,"display_name":"Konrad Rudolph"},"score":0,"creation_date":1675200831,"post_id":75303288,"comment_id":132876886,"body_markdown":"@user4581301 That has nothing to do with the compiler version. GCC 9.4 produces the exact same output. It only calls the functions if they are not defined in the same compilation unit.","body":"@user4581301 That has nothing to do with the compiler version. GCC 9.4 produces the exact same output. It only calls the functions if they are not defined in the same compilation unit."},{"owner":{"account_id":5809836,"reputation":33185,"user_id":4581301,"display_name":"user4581301"},"score":0,"creation_date":1675200900,"post_id":75303288,"comment_id":132876900,"body_markdown":"A fair point. Remove the ability to see what `A` and friends do and the output is identical. [Well, almost identical](https://godbolt.org/z/WT5f8j3P9). Good enough for me.","body":"A fair point. Remove the ability to see what <code>A</code> and friends do and the output is identical. <a href=\"https://godbolt.org/z/WT5f8j3P9\" rel=\"nofollow noreferrer\">Well, almost identical</a>. Good enough for me."}],"answers":[{"tags":[],"owner":{"account_id":5289146,"reputation":8128,"user_id":4222206,"display_name":"queeg"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1675200884,"creation_date":1675200884,"answer_id":75303375,"question_id":75303288,"body_markdown":"You are likely comparing apples and oranges.\r\n\r\nWhile the C++ compiler produces machine code, the java compiler produces bytecode to run on a virtual machine. The virtual machine either interprets it or uses a just-in-time compiler to transfer it into machine language.\r\n\r\nI doubt you used the JIT and looked at the produced machine code.","title":"Should I stop using local variables in Java?","body":"<p>You are likely comparing apples and oranges.</p>\n<p>While the C++ compiler produces machine code, the java compiler produces bytecode to run on a virtual machine. The virtual machine either interprets it or uses a just-in-time compiler to transfer it into machine language.</p>\n<p>I doubt you used the JIT and looked at the produced machine code.</p>\n"},{"tags":[],"owner":{"account_id":401843,"reputation":89788,"user_id":768644,"display_name":"rzwitserloot"},"down_vote_count":0,"up_vote_count":7,"is_accepted":true,"score":7,"last_activity_date":1675210112,"creation_date":1675201329,"answer_id":75303440,"question_id":75303288,"body_markdown":"No. The detail you&#39;re missing is _where the optimisation happens_.\r\n\r\nIn C-land, the application that reads in your source code (`gcc` for example) is the one that does most of the optimization (though more and more is done by the CPU itself, in its pipeline and microcode translation engines - not that there&#39;s a heck of a lot you can do to affect this as a programmer). Hence, it&#39;s that application (`gcc`) that has an `-o` (optimization level) option, and that is the application that potentially is going to churn through a ton of CPU cycles analysing your code to death.\r\n\r\nIn java-land, __that is not how it works__. `javac` is on rails: The spec decrees exactly what it should generate, pretty much down to the byte - in contrast to C-land where the spec is stacked to the gills with &#39;mays&#39; and &#39;coulds&#39; - compilers have a ton of leeway, notably including the bit width of your basic &#39;word&#39;, whereas java locks all of that down in spec, regardless of the bit-width of the CPU architecture you end up running on.\r\n\r\nThe optimization is done by `java.exe` - the runtime. And its approach is, as a rule, more efficient than C can ever be, because unlike C, the runtime gets the benefit of being able to check &#39;live behaviour&#39;, not something a C compiler can do (that&#39;s why C compilers tend to have a lot of &#39;hinting&#39; systems, where you can inform the compiler about what you suspect the runtime behaviour is likely to be).\r\n\r\nAll modern JVMs work by running code inefficiently (that seemingly inefficient code that javac produced, which you notices with `javap -v`), and in fact run it even more inefficiently than that, as the JVM will add a bunch of hooks to add bookkeeping. For example, the JVM will track how often a method is invoked, how long it takes to run, and for example, for each `if`, counts of how often each branch is taken. All making it run even slower.\r\n\r\nThe JVM does this, because for 99% (literally) of all programs out there, about 99% (again, literally, not an exaggeration) of CPU/memory is &#39;spent&#39; on less than 1% of the code, but the trick is, trying to predict which 1% that is. With all that bookkeeping, java will know, and will then analyse the bytecode of that 1%, __and gets to use the runtime behaviour observed so far due to all that bookkeeping__, to come up with fine-tuned machine code. This means java gets to write code that branch predicts (ensures the machine code does not have to jump around for most often taken branch path), except it&#39;s not a prediction: `java.exe` __knows__ which one is the &#39;most often taken path&#39;. Vs `gcc` which has to guess, optionally assisted by the programmer with branch hints in the source file.\r\n\r\nThat&#39;s just one of thousands of places where `java.exe` can apply machine code optimization.\r\n\r\nThat still means ~99% of the code runs very inefficiently. But, given that this takes less than 1% of CPU/memory, it just doesn&#39;t matter.\r\n\r\nJava is slower than C due to various factors, but &#39;optimizing instructions&#39; is not one of them:\r\n\r\n* Java cannot use architecture-specific features that affect the underlying language model, such as 80-bit width variables in what used to be the coprocessor. Project Valhalla is trying to fix that.\r\n* More generally java has a hard time interfacing directly with arch/OS-local low-level API.\r\n* That bookkeeping, and the garbage collector, tend to have &#39;ramp up time&#39;. They start off slow and become faster over time. Vs. C code which pretty much springs into existence running as fast as it ever will.\r\n\r\nNaturally then, java is neither popular nor a good idea for simple command line one-off tools like `ls` or `/bin/true`. Java is fantastic at performance when writing, say, a web request responder. Those run for a long time and that hotspot process really helps there.","title":"Should I stop using local variables in Java?","body":"<p>No. The detail you're missing is <em>where the optimisation happens</em>.</p>\n<p>In C-land, the application that reads in your source code (<code>gcc</code> for example) is the one that does most of the optimization (though more and more is done by the CPU itself, in its pipeline and microcode translation engines - not that there's a heck of a lot you can do to affect this as a programmer). Hence, it's that application (<code>gcc</code>) that has an <code>-o</code> (optimization level) option, and that is the application that potentially is going to churn through a ton of CPU cycles analysing your code to death.</p>\n<p>In java-land, <strong>that is not how it works</strong>. <code>javac</code> is on rails: The spec decrees exactly what it should generate, pretty much down to the byte - in contrast to C-land where the spec is stacked to the gills with 'mays' and 'coulds' - compilers have a ton of leeway, notably including the bit width of your basic 'word', whereas java locks all of that down in spec, regardless of the bit-width of the CPU architecture you end up running on.</p>\n<p>The optimization is done by <code>java.exe</code> - the runtime. And its approach is, as a rule, more efficient than C can ever be, because unlike C, the runtime gets the benefit of being able to check 'live behaviour', not something a C compiler can do (that's why C compilers tend to have a lot of 'hinting' systems, where you can inform the compiler about what you suspect the runtime behaviour is likely to be).</p>\n<p>All modern JVMs work by running code inefficiently (that seemingly inefficient code that javac produced, which you notices with <code>javap -v</code>), and in fact run it even more inefficiently than that, as the JVM will add a bunch of hooks to add bookkeeping. For example, the JVM will track how often a method is invoked, how long it takes to run, and for example, for each <code>if</code>, counts of how often each branch is taken. All making it run even slower.</p>\n<p>The JVM does this, because for 99% (literally) of all programs out there, about 99% (again, literally, not an exaggeration) of CPU/memory is 'spent' on less than 1% of the code, but the trick is, trying to predict which 1% that is. With all that bookkeeping, java will know, and will then analyse the bytecode of that 1%, <strong>and gets to use the runtime behaviour observed so far due to all that bookkeeping</strong>, to come up with fine-tuned machine code. This means java gets to write code that branch predicts (ensures the machine code does not have to jump around for most often taken branch path), except it's not a prediction: <code>java.exe</code> <strong>knows</strong> which one is the 'most often taken path'. Vs <code>gcc</code> which has to guess, optionally assisted by the programmer with branch hints in the source file.</p>\n<p>That's just one of thousands of places where <code>java.exe</code> can apply machine code optimization.</p>\n<p>That still means ~99% of the code runs very inefficiently. But, given that this takes less than 1% of CPU/memory, it just doesn't matter.</p>\n<p>Java is slower than C due to various factors, but 'optimizing instructions' is not one of them:</p>\n<ul>\n<li>Java cannot use architecture-specific features that affect the underlying language model, such as 80-bit width variables in what used to be the coprocessor. Project Valhalla is trying to fix that.</li>\n<li>More generally java has a hard time interfacing directly with arch/OS-local low-level API.</li>\n<li>That bookkeeping, and the garbage collector, tend to have 'ramp up time'. They start off slow and become faster over time. Vs. C code which pretty much springs into existence running as fast as it ever will.</li>\n</ul>\n<p>Naturally then, java is neither popular nor a good idea for simple command line one-off tools like <code>ls</code> or <code>/bin/true</code>. Java is fantastic at performance when writing, say, a web request responder. Those run for a long time and that hotspot process really helps there.</p>\n"}],"owner":{"account_id":6009424,"reputation":1164,"user_id":4720292,"accept_rate":86,"display_name":"Pierre"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":116,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":75303440,"answer_count":2,"score":1,"last_activity_date":1675210112,"creation_date":1675200159,"question_id":75303288,"body_markdown":"I have these 2 codes in Java and C++, which are supposed to do the same thing.\r\n\r\nMy intuition was that the size (and also content) of object code would be the same for `R1` and `R2`. It&#39;s the case for the C++ (difference of 4 bytes if compiled without `-O1`). There is a bigger difference for the Java bytecode (`R2` is longer), which is surprising for me.\r\n\r\nMaybe I&#39;m not looking at the right things and my question might not be relevant, but is it normal that the Java bytecode is so &quot;close&quot; from the source code, and does it mean that it&#39;s always more &quot;efficient&quot;/&quot;optimized&quot; to write everything in one-line instead of using local variables ?\r\n\r\n**C++**\r\n\r\n```c++\r\nint A(int a) { return 0; }\r\nint B(int b) { return 0; }\r\nint C(int c) { return 0; }\r\nint D(int d) { return 0; }\r\n\r\nint R1() {\r\n  return  A(B(C(3)+D(3)));\r\n}\r\n\r\nint R2() {\r\n  int d = D(3);\r\n  int c = C(3);\r\n  int b = B(c + d);\r\n  return A(b);\r\n}\r\n\r\n// Then R1() and R2() are called in the main()\r\n```\r\n\r\n**Java**\r\n\r\n```java\r\nclass MyClass {\r\n  static int A(int a) { return 0; }\r\n  static int B(int b) { return 0; }\r\n  static int C(int c) { return 0; }\r\n  static int D(int d) { return 0; }\r\n  \r\n  static int R1() {\r\n    return  A(B(C(3)+D(3)));\r\n  }\r\n  \r\n  static int R2() {\r\n    int d = D(3);\r\n    int c = C(3);\r\n    int b = B(c + d);\r\n    \r\n    return A(b);\r\n  }\r\n\r\n  // Then R1 and R2 are called in the Main()\r\n}\r\n```\r\n\r\nWhen I compiled both of them (`g++ -O1` version 9.4 and `javac` version 11.0.17), and disassemble `R1` and `R2`, I get this:\r\n\r\n**C++ (`g++ -O1 prog.cpp`)**\r\n\r\n\r\n```\r\nR1:\r\n  1251:\tf3 0f 1e fa          \tendbr64 \r\n  1255:\t53                   \tpush   %rbx\r\n  1256:\tbf 03 00 00 00       \tmov    $0x3,%edi\r\n  125b:\te8 9d ff ff ff       \tcallq  11fd &lt;_Z1Ci&gt;\r\n  1260:\t89 c3                \tmov    %eax,%ebx\r\n  1262:\tbf 03 00 00 00       \tmov    $0x3,%edi\r\n  1267:\te8 bb ff ff ff       \tcallq  1227 &lt;_Z1Di&gt;\r\n  126c:\t8d 3c 03             \tlea    (%rbx,%rax,1),%edi\r\n  126f:\te8 5f ff ff ff       \tcallq  11d3 &lt;_Z1Bi&gt;\r\n  1274:\t89 c7                \tmov    %eax,%edi\r\n  1276:\te8 2e ff ff ff       \tcallq  11a9 &lt;_Z1Ai&gt;\r\n  127b:\t5b                   \tpop    %rbx\r\n  127c:\tc3                   \tretq   \r\n\r\nR2:\r\n  &lt;exact same as R1&gt;\r\n```\r\n\r\n**Java (`javap -c MyClass`)**\r\n\r\n```\r\njavap -c Appel \r\nstatic int R1();\r\n  Code:\r\n     0: iconst_3\r\n     1: invokestatic  #8                  // Method C:(I)I\r\n     4: iconst_3\r\n     5: invokestatic  #9                  // Method D:(I)I\r\n     8: iadd\r\n     9: invokestatic  #10                 // Method B:(I)I\r\n    12: invokestatic  #11                 // Method A:(I)I\r\n    15: ireturn\r\n\r\nstatic int R2();\r\n  Code:\r\n     0: iconst_3\r\n     1: invokestatic  #9                  // Method D:(I)I\r\n     4: istore_0\r\n     5: iconst_3\r\n     6: invokestatic  #8                  // Method C:(I)I\r\n     9: istore_1\r\n    10: iload_1\r\n    11: iload_0\r\n    12: iadd\r\n    13: invokestatic  #10                 // Method B:(I)I\r\n    16: istore_2\r\n    17: iload_2\r\n    18: invokestatic  #11                 // Method A:(I)I\r\n    21: ireturn\r\n```","title":"Should I stop using local variables in Java?","body":"<p>I have these 2 codes in Java and C++, which are supposed to do the same thing.</p>\n<p>My intuition was that the size (and also content) of object code would be the same for <code>R1</code> and <code>R2</code>. It's the case for the C++ (difference of 4 bytes if compiled without <code>-O1</code>). There is a bigger difference for the Java bytecode (<code>R2</code> is longer), which is surprising for me.</p>\n<p>Maybe I'm not looking at the right things and my question might not be relevant, but is it normal that the Java bytecode is so &quot;close&quot; from the source code, and does it mean that it's always more &quot;efficient&quot;/&quot;optimized&quot; to write everything in one-line instead of using local variables ?</p>\n<p><strong>C++</strong></p>\n<pre class=\"lang-cpp prettyprint-override\"><code>int A(int a) { return 0; }\nint B(int b) { return 0; }\nint C(int c) { return 0; }\nint D(int d) { return 0; }\n\nint R1() {\n  return  A(B(C(3)+D(3)));\n}\n\nint R2() {\n  int d = D(3);\n  int c = C(3);\n  int b = B(c + d);\n  return A(b);\n}\n\n// Then R1() and R2() are called in the main()\n</code></pre>\n<p><strong>Java</strong></p>\n<pre class=\"lang-java prettyprint-override\"><code>class MyClass {\n  static int A(int a) { return 0; }\n  static int B(int b) { return 0; }\n  static int C(int c) { return 0; }\n  static int D(int d) { return 0; }\n  \n  static int R1() {\n    return  A(B(C(3)+D(3)));\n  }\n  \n  static int R2() {\n    int d = D(3);\n    int c = C(3);\n    int b = B(c + d);\n    \n    return A(b);\n  }\n\n  // Then R1 and R2 are called in the Main()\n}\n</code></pre>\n<p>When I compiled both of them (<code>g++ -O1</code> version 9.4 and <code>javac</code> version 11.0.17), and disassemble <code>R1</code> and <code>R2</code>, I get this:</p>\n<p><strong>C++ (<code>g++ -O1 prog.cpp</code>)</strong></p>\n<pre><code>R1:\n  1251: f3 0f 1e fa             endbr64 \n  1255: 53                      push   %rbx\n  1256: bf 03 00 00 00          mov    $0x3,%edi\n  125b: e8 9d ff ff ff          callq  11fd &lt;_Z1Ci&gt;\n  1260: 89 c3                   mov    %eax,%ebx\n  1262: bf 03 00 00 00          mov    $0x3,%edi\n  1267: e8 bb ff ff ff          callq  1227 &lt;_Z1Di&gt;\n  126c: 8d 3c 03                lea    (%rbx,%rax,1),%edi\n  126f: e8 5f ff ff ff          callq  11d3 &lt;_Z1Bi&gt;\n  1274: 89 c7                   mov    %eax,%edi\n  1276: e8 2e ff ff ff          callq  11a9 &lt;_Z1Ai&gt;\n  127b: 5b                      pop    %rbx\n  127c: c3                      retq   \n\nR2:\n  &lt;exact same as R1&gt;\n</code></pre>\n<p><strong>Java (<code>javap -c MyClass</code>)</strong></p>\n<pre><code>javap -c Appel \nstatic int R1();\n  Code:\n     0: iconst_3\n     1: invokestatic  #8                  // Method C:(I)I\n     4: iconst_3\n     5: invokestatic  #9                  // Method D:(I)I\n     8: iadd\n     9: invokestatic  #10                 // Method B:(I)I\n    12: invokestatic  #11                 // Method A:(I)I\n    15: ireturn\n\nstatic int R2();\n  Code:\n     0: iconst_3\n     1: invokestatic  #9                  // Method D:(I)I\n     4: istore_0\n     5: iconst_3\n     6: invokestatic  #8                  // Method C:(I)I\n     9: istore_1\n    10: iload_1\n    11: iload_0\n    12: iadd\n    13: invokestatic  #10                 // Method B:(I)I\n    16: istore_2\n    17: iload_2\n    18: invokestatic  #11                 // Method A:(I)I\n    21: ireturn\n</code></pre>\n"},{"tags":["java","spring-boot"],"comments":[{"owner":{"account_id":1473276,"reputation":110999,"user_id":1384297,"accept_rate":100,"display_name":"Andy Wilkinson"},"score":0,"creation_date":1675244869,"post_id":75304287,"comment_id":132885014,"body_markdown":"It looks like you have a `@Configuration` class in your application or one of its dependencies that is referencing `WebMvcConfigurerAdapter`. You could use the debugger and a breakpoint to suspend the application when `WebMvcConfigurerAdapter.class` cannot be found. When the app is suspended look at the class that `ConfigurationClassParser` is processing to identify the cause.","body":"It looks like you have a <code>@Configuration</code> class in your application or one of its dependencies that is referencing <code>WebMvcConfigurerAdapter</code>. You could use the debugger and a breakpoint to suspend the application when <code>WebMvcConfigurerAdapter.class</code> cannot be found. When the app is suspended look at the class that <code>ConfigurationClassParser</code> is processing to identify the cause."}],"owner":{"account_id":22514366,"reputation":1,"user_id":16708824,"display_name":"Mr. Isaac"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":631,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1675210083,"creation_date":1675208683,"question_id":75304287,"body_markdown":"I have upgraded a project that I am working on from Spring Boot 2.7.7 to 3.0.0. There were some classes in the project that depended on the deprecated WebMvcConfigurerAdapter class, but I have removed the dependency and use the replacement WebMvcConfigurer interface.\r\n\r\nVersion info\r\n\r\nJava - 17\r\n\r\nSpringframework - 6.0.2\r\n\r\nSpring Boot - 3.0.0\r\n\r\nSpring Cloud - 2022.0.0\r\n\r\n```\r\norg.springframework.beans.factory.BeanDefinitionStoreException: Failed to parse configuration class [com.app.Application]\r\n\tat org.springframework.context.annotation.ConfigurationClassParser.parse(ConfigurationClassParser.java:179) ~[spring-context-6.0.2.jar:6.0.2]\r\n\tat org.springframework.context.annotation.ConfigurationClassPostProcessor.processConfigBeanDefinitions(ConfigurationClassPostProcessor.java:397) ~[spring-context-6.0.2.jar:6.0.2]\r\n\tat org.springframework.context.annotation.ConfigurationClassPostProcessor.postProcessBeanDefinitionRegistry(ConfigurationClassPostProcessor.java:283) ~[spring-context-6.0.2.jar:6.0.2]\r\n\tat org.springframework.context.support.PostProcessorRegistrationDelegate.invokeBeanDefinitionRegistryPostProcessors(PostProcessorRegistrationDelegate.java:344) ~[spring-context-6.0.2.jar:6.0.2]\r\n\tat org.springframework.context.support.PostProcessorRegistrationDelegate.invokeBeanFactoryPostProcessors(PostProcessorRegistrationDelegate.java:115) ~[spring-context-6.0.2.jar:6.0.2]\r\n\tat org.springframework.context.support.AbstractApplicationContext.invokeBeanFactoryPostProcessors(AbstractApplicationContext.java:745) ~[spring-context-6.0.2.jar:6.0.2]\r\n\tat org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:565) ~[spring-context-6.0.2.jar:6.0.2]\r\n\tat org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146) ~[spring-boot-3.0.0.jar:3.0.0]\r\n\tat org.springframework.boot.SpringApplication.refresh(SpringApplication.java:730) ~[spring-boot-3.0.0.jar:3.0.0]\r\n\tat org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:432) ~[spring-boot-3.0.0.jar:3.0.0]\r\n\tat org.springframework.boot.SpringApplication.run(SpringApplication.java:308) ~[spring-boot-3.0.0.jar:3.0.0]\r\n\tat org.springframework.boot.SpringApplication.run(SpringApplication.java:1302) ~[spring-boot-3.0.0.jar:3.0.0]\r\n\tat org.springframework.boot.SpringApplication.run(SpringApplication.java:1291) ~[spring-boot-3.0.0.jar:3.0.0]\r\n\tat com.app.Application.main(Application.java:30) ~[classes/:na]\r\nCaused by: java.io.FileNotFoundException: class path resource [org/springframework/web/servlet/config/annotation/WebMvcConfigurerAdapter.class] cannot be opened because it does not exist\r\n\tat org.springframework.core.io.ClassPathResource.getInputStream(ClassPathResource.java:211) ~[spring-core-6.0.2.jar:6.0.2]\r\n\tat org.springframework.core.type.classreading.SimpleMetadataReader.getClassReader(SimpleMetadataReader.java:54) ~[spring-core-6.0.2.jar:6.0.2]\r\n\tat org.springframework.core.type.classreading.SimpleMetadataReader.&lt;init&gt;(SimpleMetadataReader.java:48) ~[spring-core-6.0.2.jar:6.0.2]\r\n\tat org.springframework.core.type.classreading.SimpleMetadataReaderFactory.getMetadataReader(SimpleMetadataReaderFactory.java:103) ~[spring-core-6.0.2.jar:6.0.2]\r\n\tat org.springframework.boot.type.classreading.ConcurrentReferenceCachingMetadataReaderFactory.createMetadataReader(ConcurrentReferenceCachingMetadataReaderFactory.java:86) ~[spring-boot-3.0.0.jar:3.0.0]\r\n\tat org.springframework.boot.type.classreading.ConcurrentReferenceCachingMetadataReaderFactory.getMetadataReader(ConcurrentReferenceCachingMetadataReaderFactory.java:73) ~[spring-boot-3.0.0.jar:3.0.0]\r\n\tat org.springframework.core.type.classreading.SimpleMetadataReaderFactory.getMetadataReader(SimpleMetadataReaderFactory.java:81) ~[spring-core-6.0.2.jar:6.0.2]\r\n\tat org.springframework.context.annotation.ConfigurationClassParser.asSourceClass(ConfigurationClassParser.java:611) ~[spring-context-6.0.2.jar:6.0.2]\r\n\tat org.springframework.context.annotation.ConfigurationClassParser$SourceClass.getSuperClass(ConfigurationClassParser.java:924) ~[spring-context-6.0.2.jar:6.0.2]\r\n\tat org.springframework.context.annotation.ConfigurationClassParser.doProcessConfigurationClass(ConfigurationClassParser.java:335) ~[spring-context-6.0.2.jar:6.0.2]\r\n\tat org.springframework.context.annotation.ConfigurationClassParser.processConfigurationClass(ConfigurationClassParser.java:244) ~[spring-context-6.0.2.jar:6.0.2]\r\n\tat org.springframework.context.annotation.ConfigurationClassParser.parse(ConfigurationClassParser.java:189) ~[spring-context-6.0.2.jar:6.0.2]\r\n\tat org.springframework.context.annotation.ConfigurationClassParser.doProcessConfigurationClass(ConfigurationClassParser.java:298) ~[spring-context-6.0.2.jar:6.0.2]\r\n\tat org.springframework.context.annotation.ConfigurationClassParser.processConfigurationClass(ConfigurationClassParser.java:244) ~[spring-context-6.0.2.jar:6.0.2]\r\n\tat org.springframework.context.annotation.ConfigurationClassParser.parse(ConfigurationClassParser.java:197) ~[spring-context-6.0.2.jar:6.0.2]\r\n\tat org.springframework.context.annotation.ConfigurationClassParser.parse(ConfigurationClassParser.java:165) ~[spring-context-6.0.2.jar:6.0.2]\r\n\t... 13 common frames omitted\r\n```\r\n\r\nI am unsure how to proceed or why this exception is being thrown. I have searched for any references to WebMvcConfigurerAdapter in the project, and there are none. ","title":"FileNotFoundException for WebMvcConfigurerAdapter dependency for spring-core-6.0.2 not found after Spring Boot 3 upgrade","body":"<p>I have upgraded a project that I am working on from Spring Boot 2.7.7 to 3.0.0. There were some classes in the project that depended on the deprecated WebMvcConfigurerAdapter class, but I have removed the dependency and use the replacement WebMvcConfigurer interface.</p>\n<p>Version info</p>\n<p>Java - 17</p>\n<p>Springframework - 6.0.2</p>\n<p>Spring Boot - 3.0.0</p>\n<p>Spring Cloud - 2022.0.0</p>\n<pre><code>org.springframework.beans.factory.BeanDefinitionStoreException: Failed to parse configuration class [com.app.Application]\n    at org.springframework.context.annotation.ConfigurationClassParser.parse(ConfigurationClassParser.java:179) ~[spring-context-6.0.2.jar:6.0.2]\n    at org.springframework.context.annotation.ConfigurationClassPostProcessor.processConfigBeanDefinitions(ConfigurationClassPostProcessor.java:397) ~[spring-context-6.0.2.jar:6.0.2]\n    at org.springframework.context.annotation.ConfigurationClassPostProcessor.postProcessBeanDefinitionRegistry(ConfigurationClassPostProcessor.java:283) ~[spring-context-6.0.2.jar:6.0.2]\n    at org.springframework.context.support.PostProcessorRegistrationDelegate.invokeBeanDefinitionRegistryPostProcessors(PostProcessorRegistrationDelegate.java:344) ~[spring-context-6.0.2.jar:6.0.2]\n    at org.springframework.context.support.PostProcessorRegistrationDelegate.invokeBeanFactoryPostProcessors(PostProcessorRegistrationDelegate.java:115) ~[spring-context-6.0.2.jar:6.0.2]\n    at org.springframework.context.support.AbstractApplicationContext.invokeBeanFactoryPostProcessors(AbstractApplicationContext.java:745) ~[spring-context-6.0.2.jar:6.0.2]\n    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:565) ~[spring-context-6.0.2.jar:6.0.2]\n    at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146) ~[spring-boot-3.0.0.jar:3.0.0]\n    at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:730) ~[spring-boot-3.0.0.jar:3.0.0]\n    at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:432) ~[spring-boot-3.0.0.jar:3.0.0]\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:308) ~[spring-boot-3.0.0.jar:3.0.0]\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:1302) ~[spring-boot-3.0.0.jar:3.0.0]\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:1291) ~[spring-boot-3.0.0.jar:3.0.0]\n    at com.app.Application.main(Application.java:30) ~[classes/:na]\nCaused by: java.io.FileNotFoundException: class path resource [org/springframework/web/servlet/config/annotation/WebMvcConfigurerAdapter.class] cannot be opened because it does not exist\n    at org.springframework.core.io.ClassPathResource.getInputStream(ClassPathResource.java:211) ~[spring-core-6.0.2.jar:6.0.2]\n    at org.springframework.core.type.classreading.SimpleMetadataReader.getClassReader(SimpleMetadataReader.java:54) ~[spring-core-6.0.2.jar:6.0.2]\n    at org.springframework.core.type.classreading.SimpleMetadataReader.&lt;init&gt;(SimpleMetadataReader.java:48) ~[spring-core-6.0.2.jar:6.0.2]\n    at org.springframework.core.type.classreading.SimpleMetadataReaderFactory.getMetadataReader(SimpleMetadataReaderFactory.java:103) ~[spring-core-6.0.2.jar:6.0.2]\n    at org.springframework.boot.type.classreading.ConcurrentReferenceCachingMetadataReaderFactory.createMetadataReader(ConcurrentReferenceCachingMetadataReaderFactory.java:86) ~[spring-boot-3.0.0.jar:3.0.0]\n    at org.springframework.boot.type.classreading.ConcurrentReferenceCachingMetadataReaderFactory.getMetadataReader(ConcurrentReferenceCachingMetadataReaderFactory.java:73) ~[spring-boot-3.0.0.jar:3.0.0]\n    at org.springframework.core.type.classreading.SimpleMetadataReaderFactory.getMetadataReader(SimpleMetadataReaderFactory.java:81) ~[spring-core-6.0.2.jar:6.0.2]\n    at org.springframework.context.annotation.ConfigurationClassParser.asSourceClass(ConfigurationClassParser.java:611) ~[spring-context-6.0.2.jar:6.0.2]\n    at org.springframework.context.annotation.ConfigurationClassParser$SourceClass.getSuperClass(ConfigurationClassParser.java:924) ~[spring-context-6.0.2.jar:6.0.2]\n    at org.springframework.context.annotation.ConfigurationClassParser.doProcessConfigurationClass(ConfigurationClassParser.java:335) ~[spring-context-6.0.2.jar:6.0.2]\n    at org.springframework.context.annotation.ConfigurationClassParser.processConfigurationClass(ConfigurationClassParser.java:244) ~[spring-context-6.0.2.jar:6.0.2]\n    at org.springframework.context.annotation.ConfigurationClassParser.parse(ConfigurationClassParser.java:189) ~[spring-context-6.0.2.jar:6.0.2]\n    at org.springframework.context.annotation.ConfigurationClassParser.doProcessConfigurationClass(ConfigurationClassParser.java:298) ~[spring-context-6.0.2.jar:6.0.2]\n    at org.springframework.context.annotation.ConfigurationClassParser.processConfigurationClass(ConfigurationClassParser.java:244) ~[spring-context-6.0.2.jar:6.0.2]\n    at org.springframework.context.annotation.ConfigurationClassParser.parse(ConfigurationClassParser.java:197) ~[spring-context-6.0.2.jar:6.0.2]\n    at org.springframework.context.annotation.ConfigurationClassParser.parse(ConfigurationClassParser.java:165) ~[spring-context-6.0.2.jar:6.0.2]\n    ... 13 common frames omitted\n</code></pre>\n<p>I am unsure how to proceed or why this exception is being thrown. I have searched for any references to WebMvcConfigurerAdapter in the project, and there are none.</p>\n"},{"tags":["java","class","import"],"comments":[{"owner":{"account_id":115344,"reputation":76329,"user_id":302916,"display_name":"Brian Roach"},"score":1,"creation_date":1319402601,"post_id":7869006,"comment_id":9600296,"body_markdown":"What is the *actual* problem you are having, since you don&#39;t have to import classes that are in the same package?","body":"What is the <i>actual</i> problem you are having, since you don&#39;t have to import classes that are in the same package?"}],"answers":[{"tags":[],"owner":{"account_id":195854,"reputation":159194,"user_id":438992,"accept_rate":90,"display_name":"Dave Newton"},"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1319402931,"creation_date":1319402335,"answer_id":7869018,"question_id":7869006,"body_markdown":"First off, avoid using the default package.\r\n\r\nSecond of all, you don&#39;t need to import the class; it&#39;s in the same package.","title":"Import a custom class in Java","body":"<p>First off, avoid using the default package.</p>\n\n<p>Second of all, you don't need to import the class; it's in the same package.</p>\n"},{"tags":[],"owner":{"account_id":261786,"reputation":13726,"user_id":546205,"accept_rate":60,"display_name":"Miguel Prz"},"down_vote_count":1,"up_vote_count":4,"is_accepted":false,"score":3,"last_activity_date":1319402379,"creation_date":1319402379,"answer_id":7869021,"question_id":7869006,"body_markdown":"I see the picture, and all your classes are in the same package. So you don&#39;t have to import, you can create a new instance without the import sentence.","title":"Import a custom class in Java","body":"<p>I see the picture, and all your classes are in the same package. So you don't have to import, you can create a new instance without the import sentence.</p>\n"},{"tags":[],"owner":{"account_id":395357,"reputation":44547,"user_id":758280,"accept_rate":100,"display_name":"Jeffrey"},"down_vote_count":2,"up_vote_count":109,"is_accepted":true,"score":107,"last_activity_date":1675209536,"creation_date":1319402458,"answer_id":7869030,"question_id":7869006,"body_markdown":"If all of your classes are in the same package, you shouldn&#39;t need to import them.\r\n\r\nSimply instantiate the object like so: \r\n\r\n```java\r\nCustomObject myObject = new CustomObject();\r\n```","title":"Import a custom class in Java","body":"<p>If all of your classes are in the same package, you shouldn't need to import them.</p>\n<p>Simply instantiate the object like so:</p>\n<pre class=\"lang-java prettyprint-override\"><code>CustomObject myObject = new CustomObject();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":323326,"reputation":6604,"user_id":643271,"accept_rate":74,"display_name":"Kayser"},"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1416002447,"creation_date":1319402582,"answer_id":7869045,"question_id":7869006,"body_markdown":"In the same package you don&#39;t need to import the class.\r\n\r\nOtherwise, it is very easy. In [Eclipse][1] or [NetBeans][2] just write the class you want to use and press on &lt;kbd&gt;Ctrl&lt;/kbd&gt; + &lt;kbd&gt;Space&lt;/kbd&gt;. The [IDE][3] will automatically import the class.\r\n\r\nGeneral information:\r\n\r\nYou can import a class with import keyword after package information:\r\n\r\nExample:\r\n\r\n    package your_package;\r\n\r\n\r\n    import anotherpackage.anotherclass;\r\n\r\n    public class Your_Class {\r\n        ...\r\n        private Vector variable;\r\n        ...\r\n    }\r\n\r\nYou can instance the class with:\r\n\r\n    Anotherclass foo = new Anotherclass();\r\n\r\n  [1]: http://en.wikipedia.org/wiki/Eclipse_%28software%29\r\n  [2]: http://en.wikipedia.org/wiki/NetBeans\r\n  [3]: http://en.wikipedia.org/wiki/Integrated_development_environment\r\n","title":"Import a custom class in Java","body":"<p>In the same package you don't need to import the class.</p>\n\n<p>Otherwise, it is very easy. In <a href=\"http://en.wikipedia.org/wiki/Eclipse_%28software%29\" rel=\"noreferrer\">Eclipse</a> or <a href=\"http://en.wikipedia.org/wiki/NetBeans\" rel=\"noreferrer\">NetBeans</a> just write the class you want to use and press on <kbd>Ctrl</kbd> + <kbd>Space</kbd>. The <a href=\"http://en.wikipedia.org/wiki/Integrated_development_environment\" rel=\"noreferrer\">IDE</a> will automatically import the class.</p>\n\n<p>General information:</p>\n\n<p>You can import a class with import keyword after package information:</p>\n\n<p>Example:</p>\n\n<pre><code>package your_package;\n\n\nimport anotherpackage.anotherclass;\n\npublic class Your_Class {\n    ...\n    private Vector variable;\n    ...\n}\n</code></pre>\n\n<p>You can instance the class with:</p>\n\n<pre><code>Anotherclass foo = new Anotherclass();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":420891,"reputation":11018,"user_id":798818,"accept_rate":91,"display_name":"Mob"},"down_vote_count":0,"up_vote_count":39,"is_accepted":false,"score":39,"last_activity_date":1416002502,"creation_date":1319402585,"answer_id":7869046,"question_id":7869006,"body_markdown":"Import by using the `import` keyword:\r\n\r\n    import package.myclass;\r\n\r\nBut since it&#39;s the default package and *same*, you just create a new instance like:\r\n\r\n    elf ob = new elf(); //Instance of elf class\r\n","title":"Import a custom class in Java","body":"<p>Import by using the <code>import</code> keyword:</p>\n\n<pre><code>import package.myclass;\n</code></pre>\n\n<p>But since it's the default package and <em>same</em>, you just create a new instance like:</p>\n\n<pre><code>elf ob = new elf(); //Instance of elf class\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3259065,"reputation":525,"user_id":2745013,"accept_rate":61,"display_name":"IHazABone"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1379547026,"creation_date":1379547026,"answer_id":18884024,"question_id":7869006,"body_markdown":"If your classes are in the same package, you won&#39;t need to import. To call a method from class B in class A, you should use `classB.methodName(arg)`","title":"Import a custom class in Java","body":"<p>If your classes are in the same package, you won't need to import. To call a method from class B in class A, you should use <code>classB.methodName(arg)</code></p>\n"},{"tags":[],"owner":{"account_id":9546393,"reputation":1184,"user_id":7092293,"display_name":"MMKarami"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1503736556,"creation_date":1503736556,"answer_id":45893557,"question_id":7869006,"body_markdown":"According Oracle and Sun doc, a class can use all classes from its own package and all public classes from other packages. You can access the public classes in another package in two ways. \r\n\r\n- The first is simply to add the full package name in front of every class name. For example:\r\n\r\n    java.util.Date today = new java.util.Date();\r\n\r\n- The simpler, and more common, approach is to use the import statement. The point of the import statement is to give you a shorthand to refer to the classes in the package. Once you use import, you no longer have to give the classes their full names. You can import a specific class or the whole package. You place import statements at the top of your source files (but below any package statements). For example, you can import all classes in the java.util package with the statement Then you can use without a package prefix.\r\n\r\n    import java.util.*;\r\n\r\n    // Use class in your code with this manner\r\n    \r\n    Date today = new Date();\r\n\r\nAs you mentioned in your question that your classes are under the same package, you should not have any problem, it is better just to use class name.  ","title":"Import a custom class in Java","body":"<p>According Oracle and Sun doc, a class can use all classes from its own package and all public classes from other packages. You can access the public classes in another package in two ways. </p>\n\n<ul>\n<li><p>The first is simply to add the full package name in front of every class name. For example:</p>\n\n<p>java.util.Date today = new java.util.Date();</p></li>\n<li><p>The simpler, and more common, approach is to use the import statement. The point of the import statement is to give you a shorthand to refer to the classes in the package. Once you use import, you no longer have to give the classes their full names. You can import a specific class or the whole package. You place import statements at the top of your source files (but below any package statements). For example, you can import all classes in the java.util package with the statement Then you can use without a package prefix.</p>\n\n<p>import java.util.*;</p>\n\n<p>// Use class in your code with this manner</p>\n\n<p>Date today = new Date();</p></li>\n</ul>\n\n<p>As you mentioned in your question that your classes are under the same package, you should not have any problem, it is better just to use class name.  </p>\n"},{"tags":[],"owner":{"account_id":24225829,"reputation":1,"user_id":18180337,"display_name":"ashik acharya"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1666266625,"creation_date":1665919567,"answer_id":74086712,"question_id":7869006,"body_markdown":"If you have the java files under the same package, you will not need to import the classes within those java files. Simply instantiate an object and you will have access. For example, if you need to access class named My_Class from another file within the same package:\r\n\r\n    My_Class object = new My_Class();\r\n\r\nNow, if you put a `.` dot after typing object, you will gain access to all the methods and attributes from the class.\r\n\r\nNow, if you don&#39;t have the files under the same package, you can import the Class.\r\nJust type:\r\n\r\n    import Package_Name.Class_name\r\n\r\nWhere `Package_Name` represents the name of the package in which the class exists and\r\n`Class_name` being the name of the class you want to import.\r\n\r\n\r\n","title":"Import a custom class in Java","body":"<p>If you have the java files under the same package, you will not need to import the classes within those java files. Simply instantiate an object and you will have access. For example, if you need to access class named My_Class from another file within the same package:</p>\n<pre><code>My_Class object = new My_Class();\n</code></pre>\n<p>Now, if you put a <code>.</code> dot after typing object, you will gain access to all the methods and attributes from the class.</p>\n<p>Now, if you don't have the files under the same package, you can import the Class.\nJust type:</p>\n<pre><code>import Package_Name.Class_name\n</code></pre>\n<p>Where <code>Package_Name</code> represents the name of the package in which the class exists and\n<code>Class_name</code> being the name of the class you want to import.</p>\n"}],"owner":{"display_name":"user704010"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":642673,"favorite_count":0,"down_vote_count":3,"up_vote_count":86,"accepted_answer_id":7869030,"answer_count":8,"score":83,"last_activity_date":1675209536,"creation_date":1319402185,"question_id":7869006,"body_markdown":"How do I import a class I wrote in a different file? All my classes are under the same package.","title":"Import a custom class in Java","body":"<p>How do I import a class I wrote in a different file? All my classes are under the same package.</p>\n"},{"tags":["java","spring-jms","jms-topic"],"owner":{"account_id":12163361,"reputation":160,"user_id":8880333,"display_name":"Developer"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":74,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1675209496,"creation_date":1675160086,"question_id":75295602,"body_markdown":"I am using a JMS queue.\r\n \r\n I am attaching my own Listener name as MyMessageListenerContainer to endpoint using following way but it is not getting picked up.\r\n \r\n \r\n\r\n    JmsQueueEndpoint jmsQueueEndpoint = (JmsQueueEndpoint) endpoint;\r\n     \r\n      // my own listener.\r\n      MyMessageListenerContainer myMessageListenerContainer = new MyMessageListenerContainer();\r\n      \r\n      //overriden below method of  the JmsComponent\r\n       configureMessageListenerContainer(myMessageListenerContainer, endpoint);\r\n\r\n      // MyMessageListenerContainer implementation\r\n      class MyMessageListenerContainer extends DefaultMessageListenerContainer {\r\n        @Override\r\n        protected void refreshConnectionUntilSuccessful() {\r\n                      System.out.println(&quot;In My message listener **********&quot;);\r\n                       super.refreshConnectionUntilSuccessful();\r\n        }\r\n    \r\n    }\r\n\r\nWhen the broker is down, ideally it should pickup this class and log In My message listener **********.\r\n\r\nBut in my case it is invoking DefaultMessageListenerContainer method.\r\n\r\nCan somebody help me here ?","title":"Invoking our Custom MessageListenerContainer in JMS","body":"<p>I am using a JMS queue.</p>\n<p>I am attaching my own Listener name as MyMessageListenerContainer to endpoint using following way but it is not getting picked up.</p>\n<pre><code>JmsQueueEndpoint jmsQueueEndpoint = (JmsQueueEndpoint) endpoint;\n \n  // my own listener.\n  MyMessageListenerContainer myMessageListenerContainer = new MyMessageListenerContainer();\n  \n  //overriden below method of  the JmsComponent\n   configureMessageListenerContainer(myMessageListenerContainer, endpoint);\n\n  // MyMessageListenerContainer implementation\n  class MyMessageListenerContainer extends DefaultMessageListenerContainer {\n    @Override\n    protected void refreshConnectionUntilSuccessful() {\n                  System.out.println(&quot;In My message listener **********&quot;);\n                   super.refreshConnectionUntilSuccessful();\n    }\n\n}\n</code></pre>\n<p>When the broker is down, ideally it should pickup this class and log In My message listener **********.</p>\n<p>But in my case it is invoking DefaultMessageListenerContainer method.</p>\n<p>Can somebody help me here ?</p>\n"},{"tags":["java","spring","spring-boot","spring-security","spring-webflux"],"comments":[{"owner":{"account_id":21488921,"reputation":4715,"user_id":15835039,"display_name":"Steve Riesenberg"},"score":0,"creation_date":1675101154,"post_id":75287013,"comment_id":132851774,"body_markdown":"When you say &quot;for further validations&quot; can you give an example?","body":"When you say &quot;for further validations&quot; can you give an example?"},{"owner":{"account_id":2064278,"reputation":13129,"user_id":1840146,"accept_rate":86,"display_name":"Toerktumlare"},"score":0,"creation_date":1675102867,"post_id":75287013,"comment_id":132852296,"body_markdown":"by not using a JWT and instead use a opague token instead of building some strange weird custom flow.","body":"by not using a JWT and instead use a opague token instead of building some strange weird custom flow."},{"owner":{"account_id":27654906,"reputation":11,"user_id":21109013,"display_name":"Enthus"},"score":0,"creation_date":1675152717,"post_id":75287013,"comment_id":132861695,"body_markdown":"@SteveRiesenberg we need to take a field from the user info endpoint response, map it and add it to the authority","body":"@SteveRiesenberg we need to take a field from the user info endpoint response, map it and add it to the authority"}],"answers":[{"tags":[],"owner":{"account_id":21488921,"reputation":4715,"user_id":15835039,"display_name":"Steve Riesenberg"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1675202924,"creation_date":1675201659,"answer_id":75303489,"question_id":75287013,"body_markdown":"The [UserInfo Endpoint](https://openid.net/specs/openid-connect-core-1_0.html#UserInfo) is part of [OpenID Connect 1.0](https://openid.net/specs/openid-connect-core-1_0.html), and returns user information for an access token. It is not automatically called from a resource server (`http.oauth2ResourceServer()`) by Spring Security.\r\n\r\nBased on your security configuration, it looks like you&#39;re wanting to use both OAuth2 Client (`http.oauth2Client()`) and OAuth2 Resource Server (`http.oauth2ResourceServer()`) in the same application. OAuth2 Client isn&#39;t designed for this use case (calling UserInfo from a resource server), and therefore would require customization to be adapted for such a case. Instead, you can simply use a `RestTemplate` or `WebClient` to call the UserInfo endpoint yourself.\r\n\r\nYou can do this in a custom `Converter&lt;Jwt, Collection&lt;GrantedAuthority&gt;&gt;` (or in this case the reactive version) like so:\r\n\r\n```java\r\n@Configuration\r\n@EnableWebFluxSecurity\r\npublic class SecurityConfiguration {\r\n\t@Bean\r\n\tpublic SecurityWebFilterChain securityWebFilterChain(ServerHttpSecurity http) {\r\n\t\t// @formatter:off\r\n\t\thttp\r\n\t\t\t.authorizeExchange((authorize) -&gt; authorize\r\n\t\t\t\t.anyExchange().authenticated()\r\n\t\t\t)\r\n\t\t\t.oauth2ResourceServer((oauth2) -&gt; oauth2\r\n\t\t\t\t.jwt((jwt) -&gt; jwt\r\n\t\t\t\t\t.jwtAuthenticationConverter(jwtAuthenticationConverter())\r\n\t\t\t\t)\r\n\t\t\t);\r\n\t\t// @formatter:on\r\n\r\n\t\treturn http.build();\r\n\t}\r\n\r\n\tprivate Converter&lt;Jwt, Mono&lt;AbstractAuthenticationToken&gt;&gt; jwtAuthenticationConverter() {\r\n\t\tReactiveJwtAuthenticationConverter converter = new ReactiveJwtAuthenticationConverter();\r\n\t\tconverter.setJwtGrantedAuthoritiesConverter(jwtGrantedAuthoritiesConverter());\r\n\t\treturn converter;\r\n\t}\r\n\r\n\tprivate Converter&lt;Jwt, Flux&lt;GrantedAuthority&gt;&gt; jwtGrantedAuthoritiesConverter() {\r\n\t\tJwtGrantedAuthoritiesConverter delegate = new JwtGrantedAuthoritiesConverter();\r\n\t\treturn (jwt) -&gt; getUserInfo(jwt.getTokenValue())\r\n\t\t\t.flatMapIterable((userInfo) -&gt; {\r\n\t\t\t\tCollection&lt;GrantedAuthority&gt; authorities = delegate.convert(jwt);\r\n\t\t\t\t// TODO: Add authority from userInfo...\r\n\t\t\t\treturn authorities;\r\n\t\t\t});\r\n\t}\r\n\r\n\tprivate Mono&lt;Map&lt;String, String&gt;&gt; getUserInfo(String accessToken) {\r\n\t\t// TODO: Call user info and extract one or more claims from response\r\n\t\treturn Mono.just(new HashMap&lt;&gt;());\r\n\t}\r\n\r\n\r\n}\r\n```","title":"Oauth2 jwt token enriched with userinfo enpoint","body":"<p>The <a href=\"https://openid.net/specs/openid-connect-core-1_0.html#UserInfo\" rel=\"nofollow noreferrer\">UserInfo Endpoint</a> is part of <a href=\"https://openid.net/specs/openid-connect-core-1_0.html\" rel=\"nofollow noreferrer\">OpenID Connect 1.0</a>, and returns user information for an access token. It is not automatically called from a resource server (<code>http.oauth2ResourceServer()</code>) by Spring Security.</p>\n<p>Based on your security configuration, it looks like you're wanting to use both OAuth2 Client (<code>http.oauth2Client()</code>) and OAuth2 Resource Server (<code>http.oauth2ResourceServer()</code>) in the same application. OAuth2 Client isn't designed for this use case (calling UserInfo from a resource server), and therefore would require customization to be adapted for such a case. Instead, you can simply use a <code>RestTemplate</code> or <code>WebClient</code> to call the UserInfo endpoint yourself.</p>\n<p>You can do this in a custom <code>Converter&lt;Jwt, Collection&lt;GrantedAuthority&gt;&gt;</code> (or in this case the reactive version) like so:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Configuration\n@EnableWebFluxSecurity\npublic class SecurityConfiguration {\n    @Bean\n    public SecurityWebFilterChain securityWebFilterChain(ServerHttpSecurity http) {\n        // @formatter:off\n        http\n            .authorizeExchange((authorize) -&gt; authorize\n                .anyExchange().authenticated()\n            )\n            .oauth2ResourceServer((oauth2) -&gt; oauth2\n                .jwt((jwt) -&gt; jwt\n                    .jwtAuthenticationConverter(jwtAuthenticationConverter())\n                )\n            );\n        // @formatter:on\n\n        return http.build();\n    }\n\n    private Converter&lt;Jwt, Mono&lt;AbstractAuthenticationToken&gt;&gt; jwtAuthenticationConverter() {\n        ReactiveJwtAuthenticationConverter converter = new ReactiveJwtAuthenticationConverter();\n        converter.setJwtGrantedAuthoritiesConverter(jwtGrantedAuthoritiesConverter());\n        return converter;\n    }\n\n    private Converter&lt;Jwt, Flux&lt;GrantedAuthority&gt;&gt; jwtGrantedAuthoritiesConverter() {\n        JwtGrantedAuthoritiesConverter delegate = new JwtGrantedAuthoritiesConverter();\n        return (jwt) -&gt; getUserInfo(jwt.getTokenValue())\n            .flatMapIterable((userInfo) -&gt; {\n                Collection&lt;GrantedAuthority&gt; authorities = delegate.convert(jwt);\n                // TODO: Add authority from userInfo...\n                return authorities;\n            });\n    }\n\n    private Mono&lt;Map&lt;String, String&gt;&gt; getUserInfo(String accessToken) {\n        // TODO: Call user info and extract one or more claims from response\n        return Mono.just(new HashMap&lt;&gt;());\n    }\n\n\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":308139,"reputation":8199,"user_id":619830,"accept_rate":75,"display_name":"ch4mp"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1675209357,"creation_date":1675209357,"answer_id":75304340,"question_id":75287013,"body_markdown":"It is way more efficient to decode the data from a JWT than querying an external endpoint.\r\n\r\nAs a consequence, the best option is to configure the authorization-server (even if it is 3rd party)  to enrich the JWTs (access and ID tokens) with the data you need for authorization. Most OIDC authorization-servers support it, just refer to its documentation (Keycloak, Auth0, Cognito, ...).\r\n\r\nOnce all the claims you need are in access-tokens, you can read it on resource-server from the `JwtAuthenticationToken` instance (or `OAuth2AuthenticationToken` for client app with `oauth2login`) in the security-context. This allows to write stuff like:\r\n```java\r\n@PostMapping(&quot;/answers/{subject}&quot;)\r\n@PreAuthorize(&quot;#userSubject == #auth.token.claims[&#39;sub&#39;]&quot;)\r\npublic ResponseEntity&lt;String&gt; addAnswer(@PathVariable(&quot;subject&quot;) String userSubject, @RequestBody @Valid AnswerDto, JwtAuthenticationToken auth) {\r\n     ...\r\n}\r\n```\r\n\r\n\r\n\r\n","title":"Oauth2 jwt token enriched with userinfo enpoint","body":"<p>It is way more efficient to decode the data from a JWT than querying an external endpoint.</p>\n<p>As a consequence, the best option is to configure the authorization-server (even if it is 3rd party)  to enrich the JWTs (access and ID tokens) with the data you need for authorization. Most OIDC authorization-servers support it, just refer to its documentation (Keycloak, Auth0, Cognito, ...).</p>\n<p>Once all the claims you need are in access-tokens, you can read it on resource-server from the <code>JwtAuthenticationToken</code> instance (or <code>OAuth2AuthenticationToken</code> for client app with <code>oauth2login</code>) in the security-context. This allows to write stuff like:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@PostMapping(&quot;/answers/{subject}&quot;)\n@PreAuthorize(&quot;#userSubject == #auth.token.claims['sub']&quot;)\npublic ResponseEntity&lt;String&gt; addAnswer(@PathVariable(&quot;subject&quot;) String userSubject, @RequestBody @Valid AnswerDto, JwtAuthenticationToken auth) {\n     ...\n}\n</code></pre>\n"}],"owner":{"account_id":27654906,"reputation":11,"user_id":21109013,"display_name":"Enthus"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":498,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":2,"score":0,"last_activity_date":1675209357,"creation_date":1675094643,"question_id":75287013,"body_markdown":"I have a spring application that exposes some webflux endpoints, I use a jwt token to authorize the post calls but we I also need the information given by the userinfo endpoint.\r\nI have a SecurityWebFilterChain bean right now and we are using an oauth2ResourceServer configuration then calling the userinfoendpoint for further checks.\r\nWhat is the best way to validate a jwt token then get the userinfo enpoint information for further validations?\r\n\r\nps: the authorization server is a third part one.\r\n\r\nSecurity configuration without the external call for the user-info\r\n\r\n```\r\n  @Bean\r\n  public SecurityWebFilterChain filterChain(ServerHttpSecurity http) {\r\n\r\n    http\r\n      .cors()\r\n      .and()\r\n            .httpBasic().disable()\r\n            .formLogin().disable()\r\n            .csrf().disable()\r\n            .logout().disable()\r\n            .oauth2Client()\r\n            .and()\r\n      .authorizeExchange()\r\n            .pathMatchers(HttpMethod.POST).authenticated()\r\n            .anyExchange().permitAll()\r\n            .and().oauth2ResourceServer().jwt()\r\n            ;\r\n\r\n    return http.build();\r\n  }\r\n```","title":"Oauth2 jwt token enriched with userinfo enpoint","body":"<p>I have a spring application that exposes some webflux endpoints, I use a jwt token to authorize the post calls but we I also need the information given by the userinfo endpoint.\nI have a SecurityWebFilterChain bean right now and we are using an oauth2ResourceServer configuration then calling the userinfoendpoint for further checks.\nWhat is the best way to validate a jwt token then get the userinfo enpoint information for further validations?</p>\n<p>ps: the authorization server is a third part one.</p>\n<p>Security configuration without the external call for the user-info</p>\n<pre><code>  @Bean\n  public SecurityWebFilterChain filterChain(ServerHttpSecurity http) {\n\n    http\n      .cors()\n      .and()\n            .httpBasic().disable()\n            .formLogin().disable()\n            .csrf().disable()\n            .logout().disable()\n            .oauth2Client()\n            .and()\n      .authorizeExchange()\n            .pathMatchers(HttpMethod.POST).authenticated()\n            .anyExchange().permitAll()\n            .and().oauth2ResourceServer().jwt()\n            ;\n\n    return http.build();\n  }\n</code></pre>\n"},{"tags":["java","swing","jdialog","swingbuilder"],"comments":[{"owner":{"account_id":969721,"reputation":344508,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"score":2,"creation_date":1675206596,"post_id":75303671,"comment_id":132878275,"body_markdown":"`UIManager.getLookAndFeel().getDefaults().getIcon(...)` and pass it one of the following keys based on what you need `OptionPane.errorIcon`; `OptionPane.informationIcon`; `OptionPane.warningIcon`; `OptionPane.questionIcon`","body":"<code>UIManager.getLookAndFeel().getDefaults().getIcon(...)</code> and pass it one of the following keys based on what you need <code>OptionPane.errorIcon</code>; <code>OptionPane.informationIcon</code>; <code>OptionPane.warningIcon</code>; <code>OptionPane.questionIcon</code>"},{"owner":{"account_id":81822,"reputation":204250,"user_id":230513,"accept_rate":100,"display_name":"trashgod"},"score":0,"creation_date":1675206782,"post_id":75303671,"comment_id":132878310,"body_markdown":"For [example](https://stackoverflow.com/a/12228640/230513).","body":"For <a href=\"https://stackoverflow.com/a/12228640/230513\">example</a>."},{"owner":{"account_id":44852,"reputation":322224,"user_id":131872,"accept_rate":100,"display_name":"camickr"},"score":1,"creation_date":1675216232,"post_id":75303671,"comment_id":132879738,"body_markdown":"Check out [UIManager Defaults](https://tips4java.wordpress.com/2008/10/09/uimanager-defaults/) for the list of keywords you can use to access the Icons of the JOptionPane or any Swing component.","body":"Check out <a href=\"https://tips4java.wordpress.com/2008/10/09/uimanager-defaults/\" rel=\"nofollow noreferrer\">UIManager Defaults</a> for the list of keywords you can use to access the Icons of the JOptionPane or any Swing component."}],"answers":[{"tags":[],"owner":{"account_id":969721,"reputation":344508,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1675208648,"creation_date":1675208648,"answer_id":75304282,"question_id":75303671,"body_markdown":"On MacOS, `JOptionPane`, left to right, top to bottom, Error; Information; Warning; Question\r\n\r\n[![enter image description here][1]][1]\r\n\r\nLoaded from `UIManager`\r\n\r\n[![enter image description here][2]][2]\r\n\r\n    import java.awt.EventQueue;\r\n    import java.awt.GridLayout;\r\n    import javax.swing.JFrame;\r\n    import javax.swing.JLabel;\r\n    import javax.swing.JOptionPane;\r\n    import javax.swing.UIManager;\r\n\r\n    public class Main {\r\n        public static void main(String[] args) {\r\n            new Main();\r\n        }\r\n\r\n        public Main() {\r\n            EventQueue.invokeLater(new Runnable() {\r\n                @Override\r\n                public void run() {\r\n                    JFrame frame = new JFrame();\r\n                    frame.setLayout(new GridLayout(2, 2));\r\n                    frame.add(new JLabel(UIManager.getLookAndFeel().getDefaults().getIcon(&quot;OptionPane.errorIcon&quot;)));\r\n                    frame.add(new JLabel(UIManager.getLookAndFeel().getDefaults().getIcon(&quot;OptionPane.informationIcon&quot;)));\r\n                    frame.add(new JLabel(UIManager.getLookAndFeel().getDefaults().getIcon(&quot;OptionPane.warningIcon&quot;)));\r\n                    frame.add(new JLabel(UIManager.getLookAndFeel().getDefaults().getIcon(&quot;OptionPane.questionIcon&quot;)));\r\n                    frame.pack();\r\n                    frame.setLocationRelativeTo(null);\r\n                    frame.setVisible(true);\r\n\r\n                    JOptionPane.showMessageDialog(frame, &quot;Test&quot;, &quot;Test&quot;, JOptionPane.ERROR_MESSAGE);\r\n                    JOptionPane.showMessageDialog(frame, &quot;Test&quot;, &quot;Test&quot;, JOptionPane.INFORMATION_MESSAGE);\r\n                    JOptionPane.showMessageDialog(frame, &quot;Test&quot;, &quot;Test&quot;, JOptionPane.WARNING_MESSAGE);\r\n                    JOptionPane.showMessageDialog(frame, &quot;Test&quot;, &quot;Test&quot;, JOptionPane.QUESTION_MESSAGE);\r\n                }\r\n            });\r\n        }\r\n    }\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/bJYtl.png\r\n  [2]: https://i.stack.imgur.com/XPlLL.png","title":"Create a Jdialog that has an icon just like joptionpane","body":"<p>On MacOS, <code>JOptionPane</code>, left to right, top to bottom, Error; Information; Warning; Question</p>\n<p><a href=\"https://i.stack.imgur.com/bJYtl.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/bJYtl.png\" alt=\"enter image description here\" /></a></p>\n<p>Loaded from <code>UIManager</code></p>\n<p><a href=\"https://i.stack.imgur.com/XPlLL.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/XPlLL.png\" alt=\"enter image description here\" /></a></p>\n<pre><code>import java.awt.EventQueue;\nimport java.awt.GridLayout;\nimport javax.swing.JFrame;\nimport javax.swing.JLabel;\nimport javax.swing.JOptionPane;\nimport javax.swing.UIManager;\n\npublic class Main {\n    public static void main(String[] args) {\n        new Main();\n    }\n\n    public Main() {\n        EventQueue.invokeLater(new Runnable() {\n            @Override\n            public void run() {\n                JFrame frame = new JFrame();\n                frame.setLayout(new GridLayout(2, 2));\n                frame.add(new JLabel(UIManager.getLookAndFeel().getDefaults().getIcon(&quot;OptionPane.errorIcon&quot;)));\n                frame.add(new JLabel(UIManager.getLookAndFeel().getDefaults().getIcon(&quot;OptionPane.informationIcon&quot;)));\n                frame.add(new JLabel(UIManager.getLookAndFeel().getDefaults().getIcon(&quot;OptionPane.warningIcon&quot;)));\n                frame.add(new JLabel(UIManager.getLookAndFeel().getDefaults().getIcon(&quot;OptionPane.questionIcon&quot;)));\n                frame.pack();\n                frame.setLocationRelativeTo(null);\n                frame.setVisible(true);\n\n                JOptionPane.showMessageDialog(frame, &quot;Test&quot;, &quot;Test&quot;, JOptionPane.ERROR_MESSAGE);\n                JOptionPane.showMessageDialog(frame, &quot;Test&quot;, &quot;Test&quot;, JOptionPane.INFORMATION_MESSAGE);\n                JOptionPane.showMessageDialog(frame, &quot;Test&quot;, &quot;Test&quot;, JOptionPane.WARNING_MESSAGE);\n                JOptionPane.showMessageDialog(frame, &quot;Test&quot;, &quot;Test&quot;, JOptionPane.QUESTION_MESSAGE);\n            }\n        });\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":18737546,"reputation":338,"user_id":13661557,"display_name":"Girl Codes"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":118,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":75304282,"answer_count":1,"score":1,"last_activity_date":1675208648,"creation_date":1675203032,"question_id":75303671,"body_markdown":"I have a extended JDialog for a custom dialog because it&#39;s a bit complicated and I can&#39;t create it with JOptionPane but my issue is I still want to add to the JDialog the same icons that JOptionPane has to keep my dialogs similar in the entire app. These are the Icons provided by java in JOptionPane, but when I create a JDialog it doesn&#39;t have an Icon, how can I add one just like JOptionPane without changing into a JOptionPane.\r\n\r\n[![enter image description here][1]][1]\r\n[![enter image description here][2]][2]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/l6yWh.png\r\n  [2]: https://i.stack.imgur.com/P4D48.png","title":"Create a Jdialog that has an icon just like joptionpane","body":"<p>I have a extended JDialog for a custom dialog because it's a bit complicated and I can't create it with JOptionPane but my issue is I still want to add to the JDialog the same icons that JOptionPane has to keep my dialogs similar in the entire app. These are the Icons provided by java in JOptionPane, but when I create a JDialog it doesn't have an Icon, how can I add one just like JOptionPane without changing into a JOptionPane.</p>\n<p><a href=\"https://i.stack.imgur.com/l6yWh.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/l6yWh.png\" alt=\"enter image description here\" /></a>\n<a href=\"https://i.stack.imgur.com/P4D48.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/P4D48.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":["java","spring-boot","unit-testing","groovy","spock"],"answers":[{"tags":[],"owner":{"account_id":67966,"reputation":12546,"user_id":2145769,"accept_rate":67,"display_name":"Leonard Br&#252;nings"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1675208304,"creation_date":1675208304,"answer_id":75304240,"question_id":75295523,"body_markdown":"I can only recommend not to mock `WebClient` calls, as the necessary steps are a pain to mock, as you have seen yourself, requiring a lot of intermediary mocks without actually adding much value. This basically repeats the implementation, thus locking it in, which is not a good thing.\r\n\r\nWhat I usually do is to extract all code that interacts with `WebClient` into a client class, and only mock this class interactions in my code. From the looks of it this is what you are already doing with `TransitApiClient`. For these client classes, I would recommend testing them with `MockServer`, `WireMock`, or any of the other frameworks. This way you actually make sure that the correct request/responses are sent/received, and you don&#39;t have to awkwardly deal with the `WebClient` interface.","title":"Custom-Webclient Spock test throws unwanted NullPointerException in GET call","body":"<p>I can only recommend not to mock <code>WebClient</code> calls, as the necessary steps are a pain to mock, as you have seen yourself, requiring a lot of intermediary mocks without actually adding much value. This basically repeats the implementation, thus locking it in, which is not a good thing.</p>\n<p>What I usually do is to extract all code that interacts with <code>WebClient</code> into a client class, and only mock this class interactions in my code. From the looks of it this is what you are already doing with <code>TransitApiClient</code>. For these client classes, I would recommend testing them with <code>MockServer</code>, <code>WireMock</code>, or any of the other frameworks. This way you actually make sure that the correct request/responses are sent/received, and you don't have to awkwardly deal with the <code>WebClient</code> interface.</p>\n"}],"owner":{"account_id":27633463,"reputation":21,"user_id":21091863,"display_name":"JavaEnthusiast27"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":237,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1675208304,"creation_date":1675159658,"question_id":75295523,"body_markdown":"Using the custom WebClient below:\r\n\r\n```java\r\n@Slf4j\r\n@RequiredArgsConstructor\r\n@Component\r\npublic class TransitApiClient {\r\n\r\n    private final TransitApiClientProperties transitApiClientProperties;\r\n\r\n    private final WebClient transitApiWebClient;\r\n\r\n    private final OAuth2CustomClient oAuth2CustomClient;\r\n\r\n    public ResponseEntity&lt;Void&gt; isOfficeOfTransitValidAndNational(String officeId){\r\n        try {\r\n            final String url = UriComponentsBuilder.fromUriString(transitApiClientProperties.getFindOfficeOfTransit())\r\n                    .queryParam(&quot;codelistKey&quot;, &quot;CL173&quot;)\r\n                    .queryParam(&quot;itemCode&quot;, officeId)\r\n                    .build()\r\n                    .toUriString();\r\n\r\n            return transitApiWebClient.get()\r\n                    .uri(url)\r\n                    .header(AUTHORIZATION, getAccessTokenHeaderValue(oAuth2CustomClient.getJwtToken()))\r\n                    .retrieve()\r\n                    .onStatus(status -&gt; status.value() == HttpStatus.NO_CONTENT.value(),\r\n                            clientResponse -&gt; Mono.error( new InvalidOfficeException(null,\r\n                                    &quot;Invalid Office exception occurred while invoking :&quot; + transitApiClientProperties.getFindOfficeOfTransit() + officeId)))\r\n                    .toBodilessEntity()\r\n                    .block();\r\n\r\n        } catch (WebClientResponseException webClientResponseException) {\r\n            log.error(&quot;Technical exception occurred while invoking :&quot; + transitApiClientProperties.getFindOfficeOfTransit(), webClientResponseException);\r\n            throw new TechnicalErrorException(null, &quot;Technical exception occurred while trying to find &quot; + transitApiClientProperties.getFindOfficeOfTransit(), webClientResponseException);\r\n        }\r\n    }\r\n\r\n```\r\n\r\nwith its intended usage to hit an endpoint, and check if it returns a 200 code with a body or 204 NoContent code, and react accordingly with some custom exceptions.\r\n\r\nI&#39;ve implemented the groovy-spock test below :\r\n\r\n```\r\nclass TransitApiClientSpec extends Specification {\r\n\r\n    private WebClient transitApiWebClient\r\n    private TransitApiClient transitApiClient\r\n    private OAuth2CustomClient oAuth2CustomClient\r\n    private TransitApiClientProperties transitApiClientProperties\r\n    private RequestBodyUriSpec requestBodyUriSpec\r\n    private RequestHeadersSpec requestHeadersSpec\r\n    private RequestBodySpec requestBodySpec\r\n    private ResponseSpec responseSpec\r\n    private RequestHeadersUriSpec requestHeadersUriSpec\r\n\r\n    def setup() {\r\n        transitApiClientProperties = new TransitApiClientProperties()\r\n        transitApiClientProperties.setServiceUrl(&quot;https://test-url&quot;)\r\n        transitApiClientProperties.setFindOfficeOfTransit(&quot;/transit?&quot;)\r\n        transitApiClientProperties.setUsername(&quot;username&quot;)\r\n        transitApiClientProperties.setPassword(&quot;password&quot;)\r\n        transitApiClientProperties.setAuthorizationGrantType(&quot;grantType&quot;)\r\n        transitApiClientProperties.setClientId(&quot;clientId&quot;)\r\n        transitApiClientProperties.setClientSecret(&quot;clientSecret&quot;)\r\n\r\n        oAuth2CustomClient = Stub(OAuth2CustomClient)\r\n        oAuth2CustomClient.getJwtToken() &gt;&gt; &quot;token&quot;\r\n        transitApiWebClient = Mock(WebClient)\r\n        requestHeadersSpec = Mock(RequestHeadersSpec)\r\n        responseSpec = Mock(ResponseSpec)\r\n        requestHeadersUriSpec = Mock(RequestHeadersUriSpec)\r\n        transitApiClient = new TransitApiClient(transitApiClientProperties, transitApiWebClient, oAuth2CustomClient)\r\n    }\r\n\r\n    def &quot;request validation of OoTra and throw InvalidOfficeException&quot;(){\r\n        given :\r\n        def officeId = &quot;testId&quot;\r\n        def uri = UriComponentsBuilder\r\n                .fromUriString(transitApiClientProperties.getFindOfficeOfTransit())\r\n                .queryParam(&quot;codelistKey&quot;, &quot;CL173&quot;)\r\n                .queryParam(&quot;itemCode&quot;, officeId)\r\n                .build()\r\n                .toUriString()\r\n\r\n        1 * transitApiWebClient.get() &gt;&gt; requestHeadersUriSpec\r\n        1 * requestHeadersUriSpec.uri(uri) &gt;&gt; requestHeadersSpec\r\n        1 * requestHeadersSpec.header(HttpHeaders.AUTHORIZATION, &quot;Bearer token&quot;) &gt;&gt; requestHeadersSpec\r\n        1 * requestHeadersSpec.retrieve() &gt;&gt; responseSpec\r\n        1 * responseSpec.onStatus() &gt;&gt; Mono.error( new InvalidOfficeException(null,null) )\r\n\r\n        when :\r\n        def response = transitApiClient.isOfficeOfTransitValidAndNational(officeId)\r\n\r\n        then :\r\n        thrown(InvalidOfficeException)\r\n    }\r\n\r\n```\r\n\r\nBut instead of an `InvalidOfficeException` being thrown, a `java.lang.NullPointerException` is thrown.\r\n\r\nIt seems to be triggered when during the test run, the program calls the following :\r\n\r\n``` java\r\n\r\nreturn transitApiWebClient.get()\r\n     .uri(url)\r\n     .header(AUTHORIZATION, getAccessTokenHeaderValue(oAuth2CustomClient.getJwtToken()))\r\n     .retrieve()\r\n     .onStatus(status -&gt; status.value() == HttpStatus.NO_CONTENT.value(),\r\n                            clientResponse -&gt; Mono.error( new InvalidOfficeException(null,\r\n                                    &quot;Invalid Office exception occurred while invoking :&quot; + transitApiClientProperties.getFindOfficeOfTransit() + officeId)))\r\n     .toBodilessEntity()   &lt;---------------------- **HERE**\r\n     .block();\r\n\r\n```\r\n\r\nI understand that I haven&#39;t mocked its behavior but seems to me that some other mock hasn&#39;t been done correctly.\r\n ","title":"Custom-Webclient Spock test throws unwanted NullPointerException in GET call","body":"<p>Using the custom WebClient below:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Slf4j\n@RequiredArgsConstructor\n@Component\npublic class TransitApiClient {\n\n    private final TransitApiClientProperties transitApiClientProperties;\n\n    private final WebClient transitApiWebClient;\n\n    private final OAuth2CustomClient oAuth2CustomClient;\n\n    public ResponseEntity&lt;Void&gt; isOfficeOfTransitValidAndNational(String officeId){\n        try {\n            final String url = UriComponentsBuilder.fromUriString(transitApiClientProperties.getFindOfficeOfTransit())\n                    .queryParam(&quot;codelistKey&quot;, &quot;CL173&quot;)\n                    .queryParam(&quot;itemCode&quot;, officeId)\n                    .build()\n                    .toUriString();\n\n            return transitApiWebClient.get()\n                    .uri(url)\n                    .header(AUTHORIZATION, getAccessTokenHeaderValue(oAuth2CustomClient.getJwtToken()))\n                    .retrieve()\n                    .onStatus(status -&gt; status.value() == HttpStatus.NO_CONTENT.value(),\n                            clientResponse -&gt; Mono.error( new InvalidOfficeException(null,\n                                    &quot;Invalid Office exception occurred while invoking :&quot; + transitApiClientProperties.getFindOfficeOfTransit() + officeId)))\n                    .toBodilessEntity()\n                    .block();\n\n        } catch (WebClientResponseException webClientResponseException) {\n            log.error(&quot;Technical exception occurred while invoking :&quot; + transitApiClientProperties.getFindOfficeOfTransit(), webClientResponseException);\n            throw new TechnicalErrorException(null, &quot;Technical exception occurred while trying to find &quot; + transitApiClientProperties.getFindOfficeOfTransit(), webClientResponseException);\n        }\n    }\n\n</code></pre>\n<p>with its intended usage to hit an endpoint, and check if it returns a 200 code with a body or 204 NoContent code, and react accordingly with some custom exceptions.</p>\n<p>I've implemented the groovy-spock test below :</p>\n<pre><code>class TransitApiClientSpec extends Specification {\n\n    private WebClient transitApiWebClient\n    private TransitApiClient transitApiClient\n    private OAuth2CustomClient oAuth2CustomClient\n    private TransitApiClientProperties transitApiClientProperties\n    private RequestBodyUriSpec requestBodyUriSpec\n    private RequestHeadersSpec requestHeadersSpec\n    private RequestBodySpec requestBodySpec\n    private ResponseSpec responseSpec\n    private RequestHeadersUriSpec requestHeadersUriSpec\n\n    def setup() {\n        transitApiClientProperties = new TransitApiClientProperties()\n        transitApiClientProperties.setServiceUrl(&quot;https://test-url&quot;)\n        transitApiClientProperties.setFindOfficeOfTransit(&quot;/transit?&quot;)\n        transitApiClientProperties.setUsername(&quot;username&quot;)\n        transitApiClientProperties.setPassword(&quot;password&quot;)\n        transitApiClientProperties.setAuthorizationGrantType(&quot;grantType&quot;)\n        transitApiClientProperties.setClientId(&quot;clientId&quot;)\n        transitApiClientProperties.setClientSecret(&quot;clientSecret&quot;)\n\n        oAuth2CustomClient = Stub(OAuth2CustomClient)\n        oAuth2CustomClient.getJwtToken() &gt;&gt; &quot;token&quot;\n        transitApiWebClient = Mock(WebClient)\n        requestHeadersSpec = Mock(RequestHeadersSpec)\n        responseSpec = Mock(ResponseSpec)\n        requestHeadersUriSpec = Mock(RequestHeadersUriSpec)\n        transitApiClient = new TransitApiClient(transitApiClientProperties, transitApiWebClient, oAuth2CustomClient)\n    }\n\n    def &quot;request validation of OoTra and throw InvalidOfficeException&quot;(){\n        given :\n        def officeId = &quot;testId&quot;\n        def uri = UriComponentsBuilder\n                .fromUriString(transitApiClientProperties.getFindOfficeOfTransit())\n                .queryParam(&quot;codelistKey&quot;, &quot;CL173&quot;)\n                .queryParam(&quot;itemCode&quot;, officeId)\n                .build()\n                .toUriString()\n\n        1 * transitApiWebClient.get() &gt;&gt; requestHeadersUriSpec\n        1 * requestHeadersUriSpec.uri(uri) &gt;&gt; requestHeadersSpec\n        1 * requestHeadersSpec.header(HttpHeaders.AUTHORIZATION, &quot;Bearer token&quot;) &gt;&gt; requestHeadersSpec\n        1 * requestHeadersSpec.retrieve() &gt;&gt; responseSpec\n        1 * responseSpec.onStatus() &gt;&gt; Mono.error( new InvalidOfficeException(null,null) )\n\n        when :\n        def response = transitApiClient.isOfficeOfTransitValidAndNational(officeId)\n\n        then :\n        thrown(InvalidOfficeException)\n    }\n\n</code></pre>\n<p>But instead of an <code>InvalidOfficeException</code> being thrown, a <code>java.lang.NullPointerException</code> is thrown.</p>\n<p>It seems to be triggered when during the test run, the program calls the following :</p>\n<pre class=\"lang-java prettyprint-override\"><code>\nreturn transitApiWebClient.get()\n     .uri(url)\n     .header(AUTHORIZATION, getAccessTokenHeaderValue(oAuth2CustomClient.getJwtToken()))\n     .retrieve()\n     .onStatus(status -&gt; status.value() == HttpStatus.NO_CONTENT.value(),\n                            clientResponse -&gt; Mono.error( new InvalidOfficeException(null,\n                                    &quot;Invalid Office exception occurred while invoking :&quot; + transitApiClientProperties.getFindOfficeOfTransit() + officeId)))\n     .toBodilessEntity()   &lt;---------------------- **HERE**\n     .block();\n\n</code></pre>\n<p>I understand that I haven't mocked its behavior but seems to me that some other mock hasn't been done correctly.</p>\n"},{"tags":["java","selenium","ssl","selenium-webdriver","brave"],"answers":[{"tags":[],"owner":{"account_id":10049107,"reputation":186627,"user_id":7429447,"accept_rate":86,"display_name":"undetected Selenium"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1675207743,"creation_date":1675207743,"answer_id":75304191,"question_id":75300709,"body_markdown":"[ERR_SSL_VERSION_OR_CIPHER_MISMATCH](https://www.plesk.com/blog/various/how-to-fix-err_ssl_version_or_cipher_mismatch/)\r\n----------------------------------\r\nBrowsers always checks the SSL certificate of the website every time you try to connect to it. The process to ensure that the site is legitimate and the site has the right protocol put in place to ensure that the user&#39;s connection is secure, is known as a TLS handshake. TLS (Transport Layer Security) is a protocol that ensures secure communication between a user computer and a webserver.\r\n\r\nIncase the user&#39;s browser and the webserver fail to support a common SSL protocol version or cipher suite during the TLS handshake in those cases the browser can display the error message _`ERR_SSL_VERSION_OR_CIPHER_MISMATCH`_.\r\n\r\n\r\n----------\r\n\r\n\r\nThis usecase\r\n------------\r\nIn your case it&#39;s possibly the mismatch between either of the following configuration:\r\n\r\n- Java _v17.0.1_\r\n- Selenium _v3.141.59_\r\n- ChromeDriver/Chrome _v109.0_\r\n\r\n\r\n----------\r\n\r\n\r\nSolution\r\n--------\r\nA possible solution may be to use the compatible version as follows:\r\n\r\n- _JDK 8u351_\r\n- Selenium _v4.8.0_\r\n- ChromeDriver/Chrome _v109.0_\r\n\r\nUsing the above configuration the following code block works perfect on my [tag:windows-10] system:\r\n\r\n\tSystem.setProperty(&quot;webdriver.chrome.driver&quot;, &quot;C:\\\\BrowserDrivers\\\\chromedriver.exe&quot;);\r\n\tChromeOptions options = new ChromeOptions();\r\n\toptions.setBinary(&quot;C:\\\\Program Files\\\\BraveSoftware\\\\Brave-Browser\\\\Application\\\\brave.exe&quot;);\r\n\toptions.addArguments(&quot;--start-maximized&quot;);\r\n\tWebDriver driver = new ChromeDriver(options);\r\n\tdriver.get(&quot;https://relatedwords.org/relatedto/Fishsticks&quot;);","title":"org.openqa.selenium.WebDriverException: unknown error: net::ERR_SSL_VERSION_OR_CIPHER_MISMATCH error initiating Brave browser using Selenium on MAC","body":"<h2><a href=\"https://www.plesk.com/blog/various/how-to-fix-err_ssl_version_or_cipher_mismatch/\" rel=\"nofollow noreferrer\">ERR_SSL_VERSION_OR_CIPHER_MISMATCH</a></h2>\n<p>Browsers always checks the SSL certificate of the website every time you try to connect to it. The process to ensure that the site is legitimate and the site has the right protocol put in place to ensure that the user's connection is secure, is known as a TLS handshake. TLS (Transport Layer Security) is a protocol that ensures secure communication between a user computer and a webserver.</p>\n<p>Incase the user's browser and the webserver fail to support a common SSL protocol version or cipher suite during the TLS handshake in those cases the browser can display the error message <em><code>ERR_SSL_VERSION_OR_CIPHER_MISMATCH</code></em>.</p>\n<hr />\n<h2>This usecase</h2>\n<p>In your case it's possibly the mismatch between either of the following configuration:</p>\n<ul>\n<li>Java <em>v17.0.1</em></li>\n<li>Selenium <em>v3.141.59</em></li>\n<li>ChromeDriver/Chrome <em>v109.0</em></li>\n</ul>\n<hr />\n<h2>Solution</h2>\n<p>A possible solution may be to use the compatible version as follows:</p>\n<ul>\n<li><em>JDK 8u351</em></li>\n<li>Selenium <em>v4.8.0</em></li>\n<li>ChromeDriver/Chrome <em>v109.0</em></li>\n</ul>\n<p>Using the above configuration the following code block works perfect on my <a href=\"/questions/tagged/windows-10\" class=\"post-tag\" title=\"show questions tagged &#39;windows-10&#39;\" aria-label=\"show questions tagged &#39;windows-10&#39;\" rel=\"tag\" aria-labelledby=\"windows-10-container\">windows-10</a> system:</p>\n<pre><code>System.setProperty(&quot;webdriver.chrome.driver&quot;, &quot;C:\\\\BrowserDrivers\\\\chromedriver.exe&quot;);\nChromeOptions options = new ChromeOptions();\noptions.setBinary(&quot;C:\\\\Program Files\\\\BraveSoftware\\\\Brave-Browser\\\\Application\\\\brave.exe&quot;);\noptions.addArguments(&quot;--start-maximized&quot;);\nWebDriver driver = new ChromeDriver(options);\ndriver.get(&quot;https://relatedwords.org/relatedto/Fishsticks&quot;);\n</code></pre>\n"}],"owner":{"account_id":26831533,"reputation":1,"user_id":20419423,"display_name":"rajeshs"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":477,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1675208168,"creation_date":1675185214,"question_id":75300709,"body_markdown":"I am trying to launch and control Brave browser using Selenium. It is part of a larger project where other popular browsers are automated as well. I used ChromeOptions and gave the path location of the Brave binary. \r\n\r\nCode trials:\r\n```\r\nSystem.setProperty(&quot;webdriver.chrome.driver&quot;, &quot;/Users/user/Downloads/chrome/chromedriver_mac64/chromedriver&quot;);\r\nChromeOptions options = new ChromeOptions();\r\noptions.setBinary(&quot;/Applications/Brave Browser.app/Contents/MacOS/Brave Browser&quot;);\r\ndriver = new ChromeDriver(options);\r\n```\r\nThe browser gets launched. But says, \r\n\r\n    This site can’t provide a secure connection\r\n    www.abcxyzabcxyzabc.univer.se uses an unsupported protocol.\r\n    ERR_SSL_VERSION_OR_CIPHER_MISMATCH\r\n\r\nAnd Eclipse console says: \r\n\r\n    Exception in thread &quot;main&quot; org.openqa.selenium.WebDriverException: unknown error: net::ERR_SSL_VERSION_OR_CIPHER_MISMATCH\r\n      (Session info: chrome=109.0.5414.119)\r\n    Build info: version: &#39;3.141.59&#39;, revision: &#39;e82be7d358&#39;, time: &#39;2018-11-14T08:25:53&#39;\r\n\r\nI have not implemented TestNG or Maven or anything.\r\n\r\nThe website itself is built using OnUniverse.com Website builder.\r\n\r\n- Selenium version: &#39;3.141.59&#39;\r\n- Brave browser version: &#39;Version 1.47.186 \r\n- Chromium: 109.0.5414.119 (Official Build) (x86_64)\r\n\r\nSystem info: os.name: &#39;Mac OS X&#39;, os.arch: &#39;x86_64&#39;, os.version: &#39;11.5&#39;, java.version: &#39;17.0.1&#39;`\r\n\r\nDriver info:\r\n```\r\norg.openqa.selenium.chrome.ChromeDriver\r\nCapabilities {acceptInsecureCerts: false, browserName: chrome, browserVersion: 109.0.5414.119, chrome: {chromedriverVersion: 109.0.5414.74 (e7c5703604da..., userDataDir: /var/folders/sg/x5dk1wqd2g7...}, goog:chromeOptions: {debuggerAddress: localhost:52634}, javascriptEnabled: true, networkConnectionEnabled: false, pageLoadStrategy: normal, platform: MAC, platformName: MAC, proxy: Proxy(), setWindowRect: true, strictFileInteractability: false, timeouts: {implicit: 0, pageLoad: 300000, script: 30000}, unhandledPromptBehavior: dismiss and notify, webauthn:extension:credBlob: true, webauthn:extension:largeBlob: true, webauthn:virtualAuthenticators: true}\r\n```\r\n\r\nAppreciate the help.","title":"org.openqa.selenium.WebDriverException: unknown error: net::ERR_SSL_VERSION_OR_CIPHER_MISMATCH error initiating Brave browser using Selenium on MAC","body":"<p>I am trying to launch and control Brave browser using Selenium. It is part of a larger project where other popular browsers are automated as well. I used ChromeOptions and gave the path location of the Brave binary.</p>\n<p>Code trials:</p>\n<pre><code>System.setProperty(&quot;webdriver.chrome.driver&quot;, &quot;/Users/user/Downloads/chrome/chromedriver_mac64/chromedriver&quot;);\nChromeOptions options = new ChromeOptions();\noptions.setBinary(&quot;/Applications/Brave Browser.app/Contents/MacOS/Brave Browser&quot;);\ndriver = new ChromeDriver(options);\n</code></pre>\n<p>The browser gets launched. But says,</p>\n<pre><code>This site can’t provide a secure connection\nwww.abcxyzabcxyzabc.univer.se uses an unsupported protocol.\nERR_SSL_VERSION_OR_CIPHER_MISMATCH\n</code></pre>\n<p>And Eclipse console says:</p>\n<pre><code>Exception in thread &quot;main&quot; org.openqa.selenium.WebDriverException: unknown error: net::ERR_SSL_VERSION_OR_CIPHER_MISMATCH\n  (Session info: chrome=109.0.5414.119)\nBuild info: version: '3.141.59', revision: 'e82be7d358', time: '2018-11-14T08:25:53'\n</code></pre>\n<p>I have not implemented TestNG or Maven or anything.</p>\n<p>The website itself is built using OnUniverse.com Website builder.</p>\n<ul>\n<li>Selenium version: '3.141.59'</li>\n<li>Brave browser version: 'Version 1.47.186</li>\n<li>Chromium: 109.0.5414.119 (Official Build) (x86_64)</li>\n</ul>\n<p>System info: os.name: 'Mac OS X', os.arch: 'x86_64', os.version: '11.5', java.version: '17.0.1'`</p>\n<p>Driver info:</p>\n<pre><code>org.openqa.selenium.chrome.ChromeDriver\nCapabilities {acceptInsecureCerts: false, browserName: chrome, browserVersion: 109.0.5414.119, chrome: {chromedriverVersion: 109.0.5414.74 (e7c5703604da..., userDataDir: /var/folders/sg/x5dk1wqd2g7...}, goog:chromeOptions: {debuggerAddress: localhost:52634}, javascriptEnabled: true, networkConnectionEnabled: false, pageLoadStrategy: normal, platform: MAC, platformName: MAC, proxy: Proxy(), setWindowRect: true, strictFileInteractability: false, timeouts: {implicit: 0, pageLoad: 300000, script: 30000}, unhandledPromptBehavior: dismiss and notify, webauthn:extension:credBlob: true, webauthn:extension:largeBlob: true, webauthn:virtualAuthenticators: true}\n</code></pre>\n<p>Appreciate the help.</p>\n"},{"tags":["java","arrays"],"comments":[{"owner":{"account_id":5289146,"reputation":8128,"user_id":4222206,"display_name":"queeg"},"score":1,"creation_date":1675195166,"post_id":75302468,"comment_id":132875414,"body_markdown":"Where is your code, even if it does not work?","body":"Where is your code, even if it does not work?"},{"owner":{"display_name":"user21120780"},"score":0,"creation_date":1675195359,"post_id":75302468,"comment_id":132875469,"body_markdown":"Sorry, I just added it","body":"Sorry, I just added it"},{"owner":{"account_id":2698782,"reputation":38625,"user_id":2330053,"display_name":"Idle_Mind"},"score":1,"creation_date":1675205720,"post_id":75302468,"comment_id":132878085,"body_markdown":"Based on your desired OUTPUT, it looks like `swipeLeft()` is supposed to push all non-zero values to the very left of their row, displacing the zeroes to the right of all non-zero values. Is that correct?","body":"Based on your desired OUTPUT, it looks like <code>swipeLeft()</code> is supposed to push all non-zero values to the very left of their row, displacing the zeroes to the right of all non-zero values. Is that correct?"},{"owner":{"account_id":81168,"reputation":234336,"user_id":229044,"accept_rate":83,"display_name":"user229044"},"score":1,"creation_date":1675214055,"post_id":75302468,"comment_id":132879442,"body_markdown":"It&#39;s not really clear what you expect `(c+1) % gameBoard.length` to do, but you need to actually examine the values in the cells, not the indexes, to do this. You need to keep track of two indexes for each row: The index of the left-most zero, and the index of the next cell to check for non-zero values.","body":"It&#39;s not really clear what you expect <code>(c+1) % gameBoard.length</code> to do, but you need to actually examine the values in the cells, not the indexes, to do this. You need to keep track of two indexes for each row: The index of the left-most zero, and the index of the next cell to check for non-zero values."}],"answers":[{"tags":[],"owner":{"account_id":5289146,"reputation":8128,"user_id":4222206,"display_name":"queeg"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1675197716,"creation_date":1675196088,"answer_id":75302650,"question_id":75302468,"body_markdown":"So your code intends to rotate the board one column to the left. Rotate? Well, the numbers you push out on the left might come back on the end, right?\r\n\r\nProbably the line\r\n\r\n    gameBoard[r][c] = gameBoard[r][ (c+1) % gameBoard.length];\r\n\r\nshould be\r\n\r\n    gameBoard[r][c] = gameBoard[r][ (c+1) % gameBoard[r].length];\r\n\r\nBut try to do this stuff with pen &amp; paper, and you should notice that you are going to loose one column/copy the values from the second column into the first, then copy that into the last column again.\r\n\r\nYou will need to change two items:\r\n- store the value from the first column somewhere if you still need it so you can push it into the last one.\r\n- only rotate the column data if it needs to be rotated. Or in other words, rotate the remainder of the row if you find a zero. In this case you do not need to remember the first column, as you will overwrite a zero and push a zero into the last column. And then it would not be called rotate but shift.\r\n\r\nExercise this with pen &amp; paper until you can write down instructions for someone else to perform the same operation. Then you are ready to also write it in Java.","title":"How to shift everything in a 2D array to the left","body":"<p>So your code intends to rotate the board one column to the left. Rotate? Well, the numbers you push out on the left might come back on the end, right?</p>\n<p>Probably the line</p>\n<pre><code>gameBoard[r][c] = gameBoard[r][ (c+1) % gameBoard.length];\n</code></pre>\n<p>should be</p>\n<pre><code>gameBoard[r][c] = gameBoard[r][ (c+1) % gameBoard[r].length];\n</code></pre>\n<p>But try to do this stuff with pen &amp; paper, and you should notice that you are going to loose one column/copy the values from the second column into the first, then copy that into the last column again.</p>\n<p>You will need to change two items:</p>\n<ul>\n<li>store the value from the first column somewhere if you still need it so you can push it into the last one.</li>\n<li>only rotate the column data if it needs to be rotated. Or in other words, rotate the remainder of the row if you find a zero. In this case you do not need to remember the first column, as you will overwrite a zero and push a zero into the last column. And then it would not be called rotate but shift.</li>\n</ul>\n<p>Exercise this with pen &amp; paper until you can write down instructions for someone else to perform the same operation. Then you are ready to also write it in Java.</p>\n"},{"tags":[],"owner":{"account_id":4228398,"reputation":17727,"user_id":3461397,"display_name":"Oleg Cherednik"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1675196831,"creation_date":1675196831,"answer_id":75302771,"question_id":75302468,"body_markdown":"To rotate the array in place, you should roteate the array 3 times:\r\n\r\n 1. `123456` -&gt; `654312`\r\n 1. `654321`\r\n 1. `3456..`\r\n 1. `....12`\r\n\r\n```java\r\npublic static void shiftLeft(int[] arr, int offs) {\r\n    if (offs &lt;= 0)\r\n        return;\r\n\r\n    offs = arr.length - offs % arr.length - 1;\r\n\r\n    for (int i = 0, j = arr.length - 1; i &lt; j; i++, j--)\r\n        swap(arr, i, j);\r\n    for (int i = 0, j = offs; i &lt; j; i++, j--)\r\n        swap(arr, i, j);\r\n    for (int i = offs + 1, j = arr.length - 1; i &lt; j; i++, j--)\r\n        swap(arr, i, j);\r\n}\r\n\r\nprivate static void swap(int[] arr, int i, int j) {\r\n    int tmp = arr[i];\r\n    arr[i] = arr[j];\r\n    arr[j] = tmp;\r\n}\r\n```\r\n","title":"How to shift everything in a 2D array to the left","body":"<p>To rotate the array in place, you should roteate the array 3 times:</p>\n<ol>\n<li><code>123456</code> -&gt; <code>654312</code></li>\n<li><code>654321</code></li>\n<li><code>3456..</code></li>\n<li><code>....12</code></li>\n</ol>\n<pre class=\"lang-java prettyprint-override\"><code>public static void shiftLeft(int[] arr, int offs) {\n    if (offs &lt;= 0)\n        return;\n\n    offs = arr.length - offs % arr.length - 1;\n\n    for (int i = 0, j = arr.length - 1; i &lt; j; i++, j--)\n        swap(arr, i, j);\n    for (int i = 0, j = offs; i &lt; j; i++, j--)\n        swap(arr, i, j);\n    for (int i = offs + 1, j = arr.length - 1; i &lt; j; i++, j--)\n        swap(arr, i, j);\n}\n\nprivate static void swap(int[] arr, int i, int j) {\n    int tmp = arr[i];\n    arr[i] = arr[j];\n    arr[j] = tmp;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6606677,"reputation":1024,"user_id":5103317,"display_name":"Old Dog Programmer"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1675206124,"creation_date":1675205762,"answer_id":75304003,"question_id":75302468,"body_markdown":"From the example  in the question, it appears to me that what is wanted is to shift all non-zero elements to the left, and zero elements are shifted to the right. The order of the non-zero elements is to be retained. \r\n\r\nNote that each row is independent of other rows.\r\n\r\nOne way to approach this is to create a method that works on a 1D array. This method takes a 1D array as a parameter, and returns another 1D array with the elements shifted:\r\n\r\n    public static int [] zeroShift (int [] arr) {\r\n        int [] left = new int [arr.length];\r\n        int count = 0;\r\n        for (int i = 0; i &lt; arr.length; i++) {\r\n            if (arr[i] != 0) {\r\n                left [count++] = arr [i];\r\n            }\r\n        }\r\n        return  left;\r\n    }\r\n\r\nThis copies each non-zero element to a new array of the same size, keeping track (`count`) of how many have been copied so far.  Note this relies on `left` being initialized to all-zeros.  \r\n\r\nOnce that method is working, it can be used for `gameBoard` on a row-by-row basis:\r\n\r\n     public void swipeLeft() {\r\n        for (int r = 0; r &lt; gameBoard.length; r++) {\r\n            gameBoard [r] = zeroShift (gameBoard [r]);\r\n        }  \r\n  \r\n        // output for testing \r\n        for (int i = 0; i &lt; gameBoard.length; ++i) {\r\n            System.out.println(Arrays.toString(gameBoard[i]));\r\n        }\r\n    }","title":"How to shift everything in a 2D array to the left","body":"<p>From the example  in the question, it appears to me that what is wanted is to shift all non-zero elements to the left, and zero elements are shifted to the right. The order of the non-zero elements is to be retained.</p>\n<p>Note that each row is independent of other rows.</p>\n<p>One way to approach this is to create a method that works on a 1D array. This method takes a 1D array as a parameter, and returns another 1D array with the elements shifted:</p>\n<pre><code>public static int [] zeroShift (int [] arr) {\n    int [] left = new int [arr.length];\n    int count = 0;\n    for (int i = 0; i &lt; arr.length; i++) {\n        if (arr[i] != 0) {\n            left [count++] = arr [i];\n        }\n    }\n    return  left;\n}\n</code></pre>\n<p>This copies each non-zero element to a new array of the same size, keeping track (<code>count</code>) of how many have been copied so far.  Note this relies on <code>left</code> being initialized to all-zeros.</p>\n<p>Once that method is working, it can be used for <code>gameBoard</code> on a row-by-row basis:</p>\n<pre><code> public void swipeLeft() {\n    for (int r = 0; r &lt; gameBoard.length; r++) {\n        gameBoard [r] = zeroShift (gameBoard [r]);\n    }  \n\n    // output for testing \n    for (int i = 0; i &lt; gameBoard.length; ++i) {\n        System.out.println(Arrays.toString(gameBoard[i]));\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2698782,"reputation":38625,"user_id":2330053,"display_name":"Idle_Mind"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1675207520,"creation_date":1675207520,"answer_id":75304166,"question_id":75302468,"body_markdown":"Based on your desired OUTPUT, it looks like `swipeLeft()` is supposed to push all non-zero values to the very left of their row, displacing the zeroes to the right of all non-zero values.\r\n\r\nIf that&#39;s correct, this is similar to Old Dog Programmer&#39;s approach, except all shifting is done &quot;in place&quot; without creating any new arrays:\r\n\r\n    import java.util.*;\r\n    class Main {\r\n    \r\n      private static int[][] gameBoard;\r\n      \r\n      public static void main(String[] args) {\r\n        gameBoard = new int[][] {\r\n          {0, 2, 4, 2},\r\n          {0, 0, 2, 0},\r\n          {2, 2, 0, 0},\r\n          {0, 4, 0, 2}\r\n        };\r\n    \r\n        System.out.println(&quot;Before:&quot;);\r\n        displayBoard();\r\n    \r\n        swipeLeft();\r\n        \r\n        System.out.println(&quot;\\nAfter:&quot;);\r\n        displayBoard();\r\n      }\r\n    \r\n      public static void displayBoard() {\r\n        for(int[] row : gameBoard) {\r\n          System.out.println(Arrays.toString(row));  \r\n        }\r\n      }\r\n    \r\n      public static void swipeLeft() {\r\n        for(int[] row : gameBoard) {\r\n          // find the first blank (zero) spot\r\n          int nextIndex = 0;\r\n          while(nextIndex &lt; row.length &amp;&amp; row[nextIndex] != 0) {\r\n            nextIndex++;\r\n          }\r\n          // start with the first blank, and shift any non-zero\r\n          // values afterwards to the left\r\n          for(int col=nextIndex; col &lt; row.length; col++) {\r\n            if (row[col] != 0) {\r\n              row[nextIndex] = row[col];\r\n              row[col] = 0;\r\n              nextIndex++;\r\n            }\r\n          }\r\n        }\r\n      }\r\n      \r\n    }\r\n\r\nOutput:\r\n\r\n    Before:\r\n    [0, 2, 4, 2]\r\n    [0, 0, 2, 0]\r\n    [2, 2, 0, 0]\r\n    [0, 4, 0, 2]\r\n    \r\n    After:\r\n    [2, 4, 2, 0]\r\n    [2, 0, 0, 0]\r\n    [2, 2, 0, 0]\r\n    [4, 2, 0, 0]\r\n\r\n","title":"How to shift everything in a 2D array to the left","body":"<p>Based on your desired OUTPUT, it looks like <code>swipeLeft()</code> is supposed to push all non-zero values to the very left of their row, displacing the zeroes to the right of all non-zero values.</p>\n<p>If that's correct, this is similar to Old Dog Programmer's approach, except all shifting is done &quot;in place&quot; without creating any new arrays:</p>\n<pre><code>import java.util.*;\nclass Main {\n\n  private static int[][] gameBoard;\n  \n  public static void main(String[] args) {\n    gameBoard = new int[][] {\n      {0, 2, 4, 2},\n      {0, 0, 2, 0},\n      {2, 2, 0, 0},\n      {0, 4, 0, 2}\n    };\n\n    System.out.println(&quot;Before:&quot;);\n    displayBoard();\n\n    swipeLeft();\n    \n    System.out.println(&quot;\\nAfter:&quot;);\n    displayBoard();\n  }\n\n  public static void displayBoard() {\n    for(int[] row : gameBoard) {\n      System.out.println(Arrays.toString(row));  \n    }\n  }\n\n  public static void swipeLeft() {\n    for(int[] row : gameBoard) {\n      // find the first blank (zero) spot\n      int nextIndex = 0;\n      while(nextIndex &lt; row.length &amp;&amp; row[nextIndex] != 0) {\n        nextIndex++;\n      }\n      // start with the first blank, and shift any non-zero\n      // values afterwards to the left\n      for(int col=nextIndex; col &lt; row.length; col++) {\n        if (row[col] != 0) {\n          row[nextIndex] = row[col];\n          row[col] = 0;\n          nextIndex++;\n        }\n      }\n    }\n  }\n  \n}\n</code></pre>\n<p>Output:</p>\n<pre><code>Before:\n[0, 2, 4, 2]\n[0, 0, 2, 0]\n[2, 2, 0, 0]\n[0, 4, 0, 2]\n\nAfter:\n[2, 4, 2, 0]\n[2, 0, 0, 0]\n[2, 2, 0, 0]\n[4, 2, 0, 0]\n</code></pre>\n"}],"owner":{"display_name":"user21120780"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":172,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"accepted_answer_id":75304166,"answer_count":4,"score":-1,"last_activity_date":1675207520,"creation_date":1675194852,"question_id":75302468,"body_markdown":"I need to take a 2D array and move everything as far left as possible. It is a 4x4 array and I have tried to do it but either only move certain items or the index goes out of bounds. \r\n\r\nThe gameBoard array looks like this:\r\n\r\n    {0 2 4 2}\r\n    {0 0 2 0}\r\n    {2 2 0 0}\r\n    {0 4 0 2}\r\n\r\nand after you call the swipeLeft() method it should look like this:\r\n\r\n    {2 4 2 0}\r\n    {2 0 0 0}\r\n    {2 2 0 0}\r\n    {4 2 0 0}\r\n\r\nThere is also the issue of placing a zero into the previous index that you moved it from.\r\n\r\nI created a double for loop to just loop through the array and tried to code something that would move it over but it hasn&#39;t worked. \r\n\r\nHere was the code I had so far\r\n\r\n    public void swipeLeft() {\r\n       \r\n        for ( int r = 0; r &lt; gameBoard.length; r++ ) {\r\n            for ( int c = 0; c &lt; gameBoard[r].length; c++ ) {\r\n                \r\n                gameBoard[r][c] = gameBoard[r][ (c+1) % \r\n                                                    gameBoard.length];\r\n            }\r\n        }\r\n\r\n        \r\n    }\r\n","title":"How to shift everything in a 2D array to the left","body":"<p>I need to take a 2D array and move everything as far left as possible. It is a 4x4 array and I have tried to do it but either only move certain items or the index goes out of bounds.</p>\n<p>The gameBoard array looks like this:</p>\n<pre><code>{0 2 4 2}\n{0 0 2 0}\n{2 2 0 0}\n{0 4 0 2}\n</code></pre>\n<p>and after you call the swipeLeft() method it should look like this:</p>\n<pre><code>{2 4 2 0}\n{2 0 0 0}\n{2 2 0 0}\n{4 2 0 0}\n</code></pre>\n<p>There is also the issue of placing a zero into the previous index that you moved it from.</p>\n<p>I created a double for loop to just loop through the array and tried to code something that would move it over but it hasn't worked.</p>\n<p>Here was the code I had so far</p>\n<pre><code>public void swipeLeft() {\n   \n    for ( int r = 0; r &lt; gameBoard.length; r++ ) {\n        for ( int c = 0; c &lt; gameBoard[r].length; c++ ) {\n            \n            gameBoard[r][c] = gameBoard[r][ (c+1) % \n                                                gameBoard.length];\n        }\n    }\n\n    \n}\n</code></pre>\n"},{"tags":["java","spring","spring-boot","dropwizard"],"owner":{"account_id":26669791,"reputation":41,"user_id":20281373,"display_name":"Reid2"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":56,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1675205859,"creation_date":1675205859,"question_id":75304015,"body_markdown":"I&#39;m currently porting my app from Drop Wizard to Spring Boot. But, I cant find a equivalent for `DropwizardAppExtension`. \r\n\r\n\r\nFor example: \r\n```java\r\nprivate static final ResourceExtension resource = ResourceExtension.builder()\r\n            .addResource(new Controller(NEO4J_CLIENT))\r\n            .build();\r\n\r\n@Test\r\npublic void myTest() {\r\n       final Invocation.Builder request = resource.target(&quot;/documents&quot;) \r\n               .queryParam(&quot;ids&quot;, &quot;111&quot;)\r\n               .request();\r\n\r\n       Map&lt;String, Object&gt; response = request.get(TYPED_MAP);\r\n\r\n       assertEquals(expectedResponse, response);\r\n}\r\n```\r\n\r\n\r\nDoes anyone know if there is a Spring boot equivalent for DropwizardAppExtension? How would I create simular tests using spring-boot-starter-test?\r\n","title":"Spring boot equivalent of DropwizardAppExtension?","body":"<p>I'm currently porting my app from Drop Wizard to Spring Boot. But, I cant find a equivalent for <code>DropwizardAppExtension</code>.</p>\n<p>For example:</p>\n<pre class=\"lang-java prettyprint-override\"><code>private static final ResourceExtension resource = ResourceExtension.builder()\n            .addResource(new Controller(NEO4J_CLIENT))\n            .build();\n\n@Test\npublic void myTest() {\n       final Invocation.Builder request = resource.target(&quot;/documents&quot;) \n               .queryParam(&quot;ids&quot;, &quot;111&quot;)\n               .request();\n\n       Map&lt;String, Object&gt; response = request.get(TYPED_MAP);\n\n       assertEquals(expectedResponse, response);\n}\n</code></pre>\n<p>Does anyone know if there is a Spring boot equivalent for DropwizardAppExtension? How would I create simular tests using spring-boot-starter-test?</p>\n"},{"tags":["java","spring","prometheus"],"answers":[{"tags":[],"owner":{"account_id":18065663,"reputation":49,"user_id":13131627,"display_name":"Fredrik R&#248;dland"},"down_vote_count":1,"up_vote_count":5,"is_accepted":false,"score":4,"last_activity_date":1585256788,"creation_date":1585256788,"answer_id":60876125,"question_id":52900234,"body_markdown":"This is probably due to the context being reloaded, and thus collectors trying to re-register to the static `CollectorRegistry.defaultRegistry`.\r\n\r\nSee more info and work-arounds here: https://github.com/prometheus/jmx_exporter/issues/290","title":"Prometheus Error: Collector already registered that provides name: http_client_requests_count","body":"<p>This is probably due to the context being reloaded, and thus collectors trying to re-register to the static <code>CollectorRegistry.defaultRegistry</code>.</p>\n\n<p>See more info and work-arounds here: <a href=\"https://github.com/prometheus/jmx_exporter/issues/290\" rel=\"noreferrer\">https://github.com/prometheus/jmx_exporter/issues/290</a></p>\n"},{"tags":[],"owner":{"account_id":5139737,"reputation":3288,"user_id":4117496,"accept_rate":89,"display_name":"Fisher Coder"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1675205739,"creation_date":1675205739,"answer_id":75304000,"question_id":52900234,"body_markdown":"I encountered a similar error in my tests, what I ended up doing to fix this error was to:\r\n\r\n```\r\n    @BeforeEach\r\n    @AfterEach\r\n    public void cleanup() {\r\n        CollectorRegistry.defaultRegistry.clear();\r\n    }\r\n```","title":"Prometheus Error: Collector already registered that provides name: http_client_requests_count","body":"<p>I encountered a similar error in my tests, what I ended up doing to fix this error was to:</p>\n<pre><code>    @BeforeEach\n    @AfterEach\n    public void cleanup() {\n        CollectorRegistry.defaultRegistry.clear();\n    }\n</code></pre>\n"}],"owner":{"account_id":12331913,"reputation":651,"user_id":8997572,"accept_rate":57,"display_name":"kramsiv94"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":10365,"favorite_count":0,"down_vote_count":0,"up_vote_count":11,"answer_count":2,"score":11,"last_activity_date":1675205739,"creation_date":1539985147,"question_id":52900234,"body_markdown":"I&#39;m seeing this odd Prometheus-related error: \r\n\r\n    RESTful call failed. Cause: Collector already registered that provides name: http_client_requests_count \r\n\r\nI didn&#39;t include a http_client_requests_count metric in my project -- so what gives? Where the heck is this coming from?","title":"Prometheus Error: Collector already registered that provides name: http_client_requests_count","body":"<p>I'm seeing this odd Prometheus-related error: </p>\n\n<pre><code>RESTful call failed. Cause: Collector already registered that provides name: http_client_requests_count \n</code></pre>\n\n<p>I didn't include a http_client_requests_count metric in my project -- so what gives? Where the heck is this coming from?</p>\n"},{"tags":["java","apache-beam","apache-beam-io"],"answers":[{"tags":[],"owner":{"account_id":3830132,"reputation":1318,"user_id":3175889,"display_name":"ningk"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1675205667,"creation_date":1651604392,"answer_id":72104227,"question_id":72052676,"body_markdown":"It depends on which runner you are using and what options they offer. A similar question is https://stackoverflow.com/questions/56950728/join-two-large-volumne-of-pcollection-has-performance-issue.\r\n\r\nIf you are using the DataflowRunner, you can enable the shuffle service to speed up the process. However, according to [documentation](https://cloud.google.com/dataflow/docs/shuffle-for-batch#use_shuffle), this option is currently enabled on Dataflow by default.\r\n\r\n\r\n  [1]: https://cloud.google.com/dataflow/docs/shuffle-for-batch#use_shuffle","title":"Using CombineFn instead of CoGroupByKey to handle hotkeys","body":"<p>It depends on which runner you are using and what options they offer. A similar question is <a href=\"https://stackoverflow.com/questions/56950728/join-two-large-volumne-of-pcollection-has-performance-issue\">Join two large volumne of PCollection has performance issue</a>.</p>\n<p>If you are using the DataflowRunner, you can enable the shuffle service to speed up the process. However, according to <a href=\"https://cloud.google.com/dataflow/docs/shuffle-for-batch#use_shuffle\" rel=\"nofollow noreferrer\">documentation</a>, this option is currently enabled on Dataflow by default.</p>\n"}],"owner":{"account_id":2430697,"reputation":524,"user_id":2121671,"accept_rate":56,"display_name":"Mitesh Pant"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":158,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1675205667,"creation_date":1651204766,"question_id":72052676,"body_markdown":"I have a two very huge PCollections `&lt;KV&lt;Long,XYZ&gt;&gt;` and `&lt;KV&lt;Long,ABC&gt;&gt;`. I need to create a PCollection `&lt;KV&lt;XYZ,ABC&gt;&gt;` which I am able to using `CoGroupByKey.create()` transform. It works fine for smaller data set but in case of hotkeys it gets stuck. I am new to beam, I am trying to figure out how to use `CombineFn` to solve this. For now my code looks like this \r\n```\r\nfinal PCollection &lt;KV&lt;Long,XYZ&gt;&gt; xyzKV;\r\nfinal PCollection &lt;KV&lt;Long,ABC&gt;&gt; abcKV;\r\nfinal TupleTag&lt;XYZ&gt; t1 = new TupleTag&lt;&gt;();\r\nfinal TupleTag&lt;ABC&gt; t1 = new TupleTag&lt;&gt;();\r\nfinal PCollection &lt;KV&lt;XYZ,ABC&gt;&gt; combinedCollection = \r\n                               KeyedPCollectionTuple.of(t1, xyzKV).and(t2, abcKV)\r\n    .apply(CoGroupByKey.create());\r\n    \r\n// this works fine but has performance issues in case of hotkeys.\r\n\r\n```","title":"Using CombineFn instead of CoGroupByKey to handle hotkeys","body":"<p>I have a two very huge PCollections <code>&lt;KV&lt;Long,XYZ&gt;&gt;</code> and <code>&lt;KV&lt;Long,ABC&gt;&gt;</code>. I need to create a PCollection <code>&lt;KV&lt;XYZ,ABC&gt;&gt;</code> which I am able to using <code>CoGroupByKey.create()</code> transform. It works fine for smaller data set but in case of hotkeys it gets stuck. I am new to beam, I am trying to figure out how to use <code>CombineFn</code> to solve this. For now my code looks like this</p>\n<pre><code>final PCollection &lt;KV&lt;Long,XYZ&gt;&gt; xyzKV;\nfinal PCollection &lt;KV&lt;Long,ABC&gt;&gt; abcKV;\nfinal TupleTag&lt;XYZ&gt; t1 = new TupleTag&lt;&gt;();\nfinal TupleTag&lt;ABC&gt; t1 = new TupleTag&lt;&gt;();\nfinal PCollection &lt;KV&lt;XYZ,ABC&gt;&gt; combinedCollection = \n                               KeyedPCollectionTuple.of(t1, xyzKV).and(t2, abcKV)\n    .apply(CoGroupByKey.create());\n    \n// this works fine but has performance issues in case of hotkeys.\n\n</code></pre>\n"},{"tags":["java","amazon-s3","spring-batch","large-data","large-files"],"answers":[{"tags":[],"owner":{"account_id":1985248,"reputation":364,"user_id":1780668,"accept_rate":42,"display_name":"Vignesh"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1634824593,"creation_date":1634824593,"answer_id":69663319,"question_id":69652446,"body_markdown":"Making use of the ResourceLoader, we could read files in S3 in ItemReader as like other resource. This would help to read files in S3 in chunks instead of loading entire file into memory.\r\n\r\nWith the dependencies injected for `ResourceLoader` and `AmazonS3 client`, have changed reader configuration as below:\r\n\r\nReplace values for `sourceBucket` and `sourceObjectPrefix` as needed.\r\n\r\n    @Autowired\r\n    private ResourceLoader resourceLoader;\r\n\r\n    @Autowired\r\n    private AmazonS3 amazonS3Client;\r\n\r\n    // READER\r\n    @Bean(destroyMethod=&quot;&quot;)\r\n    @StepScope\r\n    public SynchronizedItemStreamReader&lt;Employee&gt; employeeDataReader() {\r\n        SynchronizedItemStreamReader synchronizedItemStreamReader = new SynchronizedItemStreamReader();\r\n        List&lt;Resource&gt; resourceList = new ArrayList&lt;&gt;();\r\n        String sourceBucket = yourBucketName;\r\n        String sourceObjectPrefix = yourSourceObjectPrefix;\r\n        log.info(&quot;sourceObjectPrefix::&quot;+sourceObjectPrefix);\r\n        ListObjectsRequest listObjectsRequest = new ListObjectsRequest()\r\n                .withBucketName(sourceBucket)\r\n                .withPrefix(sourceObjectPrefix);\r\n        ObjectListing sourceObjectsListing;\r\n        do{\r\n            sourceObjectsListing = amazonS3Client.listObjects(listObjectsRequest);\r\n            for (S3ObjectSummary sourceFile : sourceObjectsListing.getObjectSummaries()){\r\n\r\n                if(!(sourceFile.getSize() &gt; 0)\r\n                        || (!sourceFile.getKey().endsWith(DOT.concat(&quot;csv&quot;)))\r\n                ){\r\n                    // Skip if file is empty (or) file extension is not &quot;csv&quot;\r\n                    continue;\r\n                }\r\n                log.info(&quot;Reading &quot;+sourceFile.getKey());\r\n                resourceList.add(resourceLoader.getResource(&quot;s3://&quot;.concat(sourceBucket).concat(&quot;/&quot;)\r\n                        .concat(sourceFile.getKey())));\r\n            }\r\n            listObjectsRequest.setMarker(sourceObjectsListing.getNextMarker());\r\n        }while(sourceObjectsListing.isTruncated());\r\n\r\n        Resource[] resources = resourceList.toArray(new Resource[resourceList.size()]);\r\n        MultiResourceItemReader&lt;Employee&gt; multiResourceItemReader = new MultiResourceItemReader&lt;&gt;();\r\n        multiResourceItemReader.setName(&quot;employee-multiResource-Reader&quot;);\r\n        multiResourceItemReader.setResources(resources);\r\n        multiResourceItemReader.setDelegate(employeeFileItemReader());\r\n        synchronizedItemStreamReader.setDelegate(multiResourceItemReader);\r\n        return synchronizedItemStreamReader;\r\n    }\r\n\r\n    @Bean\r\n    @StepScope\r\n    public FlatFileItemReader&lt;Employee&gt; employeeFileItemReader()\r\n    {\r\n        FlatFileItemReader&lt;Employee&gt; reader = new FlatFileItemReader&lt;Employee&gt;();\r\n        reader.setLinesToSkip(1);\r\n        reader.setLineMapper(new DefaultLineMapper() {\r\n            {\r\n                setLineTokenizer(new DelimitedLineTokenizer() {\r\n                    {\r\n                        setNames(Employee.fields());\r\n                    }\r\n                });\r\n                setFieldSetMapper(new BeanWrapperFieldSetMapper&lt;Employee&gt;() {\r\n                    {\r\n                        setTargetType(Employee.class);\r\n                    }\r\n                });\r\n            }\r\n        });\r\n        return reader;\r\n    }\r\n\r\n\r\nHave used MultiResourceItemReader as example. This would work even if there are multiple CSV files in the particular S3 path you are looking for.\r\n\r\nFor processing only one CSV file in a location it would work implicitly as well with `Resources[] resources` containing one entry.","title":"How to process a large file from S3 and use it in spring batch","body":"<p>Making use of the ResourceLoader, we could read files in S3 in ItemReader as like other resource. This would help to read files in S3 in chunks instead of loading entire file into memory.</p>\n<p>With the dependencies injected for <code>ResourceLoader</code> and <code>AmazonS3 client</code>, have changed reader configuration as below:</p>\n<p>Replace values for <code>sourceBucket</code> and <code>sourceObjectPrefix</code> as needed.</p>\n<pre><code>@Autowired\nprivate ResourceLoader resourceLoader;\n\n@Autowired\nprivate AmazonS3 amazonS3Client;\n\n// READER\n@Bean(destroyMethod=&quot;&quot;)\n@StepScope\npublic SynchronizedItemStreamReader&lt;Employee&gt; employeeDataReader() {\n    SynchronizedItemStreamReader synchronizedItemStreamReader = new SynchronizedItemStreamReader();\n    List&lt;Resource&gt; resourceList = new ArrayList&lt;&gt;();\n    String sourceBucket = yourBucketName;\n    String sourceObjectPrefix = yourSourceObjectPrefix;\n    log.info(&quot;sourceObjectPrefix::&quot;+sourceObjectPrefix);\n    ListObjectsRequest listObjectsRequest = new ListObjectsRequest()\n            .withBucketName(sourceBucket)\n            .withPrefix(sourceObjectPrefix);\n    ObjectListing sourceObjectsListing;\n    do{\n        sourceObjectsListing = amazonS3Client.listObjects(listObjectsRequest);\n        for (S3ObjectSummary sourceFile : sourceObjectsListing.getObjectSummaries()){\n\n            if(!(sourceFile.getSize() &gt; 0)\n                    || (!sourceFile.getKey().endsWith(DOT.concat(&quot;csv&quot;)))\n            ){\n                // Skip if file is empty (or) file extension is not &quot;csv&quot;\n                continue;\n            }\n            log.info(&quot;Reading &quot;+sourceFile.getKey());\n            resourceList.add(resourceLoader.getResource(&quot;s3://&quot;.concat(sourceBucket).concat(&quot;/&quot;)\n                    .concat(sourceFile.getKey())));\n        }\n        listObjectsRequest.setMarker(sourceObjectsListing.getNextMarker());\n    }while(sourceObjectsListing.isTruncated());\n\n    Resource[] resources = resourceList.toArray(new Resource[resourceList.size()]);\n    MultiResourceItemReader&lt;Employee&gt; multiResourceItemReader = new MultiResourceItemReader&lt;&gt;();\n    multiResourceItemReader.setName(&quot;employee-multiResource-Reader&quot;);\n    multiResourceItemReader.setResources(resources);\n    multiResourceItemReader.setDelegate(employeeFileItemReader());\n    synchronizedItemStreamReader.setDelegate(multiResourceItemReader);\n    return synchronizedItemStreamReader;\n}\n\n@Bean\n@StepScope\npublic FlatFileItemReader&lt;Employee&gt; employeeFileItemReader()\n{\n    FlatFileItemReader&lt;Employee&gt; reader = new FlatFileItemReader&lt;Employee&gt;();\n    reader.setLinesToSkip(1);\n    reader.setLineMapper(new DefaultLineMapper() {\n        {\n            setLineTokenizer(new DelimitedLineTokenizer() {\n                {\n                    setNames(Employee.fields());\n                }\n            });\n            setFieldSetMapper(new BeanWrapperFieldSetMapper&lt;Employee&gt;() {\n                {\n                    setTargetType(Employee.class);\n                }\n            });\n        }\n    });\n    return reader;\n}\n</code></pre>\n<p>Have used MultiResourceItemReader as example. This would work even if there are multiple CSV files in the particular S3 path you are looking for.</p>\n<p>For processing only one CSV file in a location it would work implicitly as well with <code>Resources[] resources</code> containing one entry.</p>\n"}],"owner":{"account_id":21733790,"reputation":387,"user_id":16042088,"display_name":"Mike Marsh"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":3210,"favorite_count":0,"down_vote_count":0,"up_vote_count":5,"answer_count":1,"score":5,"last_activity_date":1675204854,"creation_date":1634760565,"question_id":69652446,"body_markdown":"I&#39;ve CSV file which contains millions of records and the size will be around 2GB. My use case here is to read the CSV file from S3 and process it. Please find my code below:\r\n\r\nIn the below code, I&#39;m reading a file from S3 bucket and using the `inputStream` directly in the Spring batch **FlatFileItemReader** `reader.setResource(new InputStreamResource(inputStream));`\r\n\r\nAs per this implementation, I&#39;m holding 2GB of content in memory and processing it which is not an efficient way of doing it - can someone please suggest what is the efficient way of reading a large file from the S3 bucket and processing it in the Spring batch.\r\n\r\nAppreciated your help in advance! Thanks.\r\n\r\n\r\n\r\n    @Component\r\n    public class GetFileFromS3 {\r\n    \r\n        public S3ObjectInputStream dowloadFile(String keyName, String bucketName, String region) {\r\n            try {\r\n                AmazonS3 s3Client = AmazonS3ClientBuilder.standard().withClientConfiguration(new ClientConfiguration())\r\n                        .withRegion(region).build();\r\n    \r\n                S3Object s3object = s3Client.getObject(bucketName, keyName);\r\n                return s3object.getObjectContent();\r\n            } catch (AmazonServiceException e) {\r\n                e.printStackTrace();\r\n            }\r\n            return null;\r\n        }\r\n    \r\n    }\r\n\r\n\r\n \r\n\r\n    public class SpringBatch {\r\n    \r\n        @Autowired\r\n        private GetFileFromS3 getFileFromS3;\r\n    \r\n    \r\n     @Bean(name = &quot;csvFile&quot;)\r\n        public Step step1() {\r\n            return stepBuilderFactory.get(&quot;step1&quot;).&lt;Employee, Employee&gt;chunk(10)\r\n                    .reader(reader())\r\n                    .processor(processor())\r\n                    .writer(writer())\r\n                    .build();\r\n        }\r\n    \r\n        @Bean\r\n        public FlatFileItemReader&lt;Employee&gt; reader() {\r\n            S3ObjectInputStream inputStream = getFileFromS3.dowloadFile(&quot;employee.csv&quot;, &quot;testBucket&quot;, &quot;us-east-1&quot;);\r\n            FlatFileItemReader&lt;Employee&gt; reader = new FlatFileItemReader&lt;Employee&gt;();\r\n            reader.setResource(new InputStreamResource(inputStream));\r\n            reader.setLinesToSkip(1);\r\n            reader.setLineMapper(new DefaultLineMapper() {\r\n                {\r\n                    setLineTokenizer(new DelimitedLineTokenizer() {\r\n                        {\r\n                            setNames(Employee.fields());\r\n                        }\r\n                    });\r\n                    setFieldSetMapper(new BeanWrapperFieldSetMapper&lt;Employee&gt;() {\r\n                        {\r\n                            setTargetType(Employee.class);\r\n                        }\r\n                    });\r\n                }\r\n            });\r\n            return reader;\r\n        }\r\n    \r\n        @Bean\r\n        public ItemProcessor&lt;Employee, Employee&gt; processor() {\r\n            return new ItemProcessor();\r\n        }\r\n    \r\n        @Bean\r\n        public ItemWriter&lt;Employee&gt; writer() {\r\n            return new ItemWriter&lt;Event&gt;();\r\n        }\r\n    \r\n        }","title":"How to process a large file from S3 and use it in spring batch","body":"<p>I've CSV file which contains millions of records and the size will be around 2GB. My use case here is to read the CSV file from S3 and process it. Please find my code below:</p>\n<p>In the below code, I'm reading a file from S3 bucket and using the <code>inputStream</code> directly in the Spring batch <strong>FlatFileItemReader</strong> <code>reader.setResource(new InputStreamResource(inputStream));</code></p>\n<p>As per this implementation, I'm holding 2GB of content in memory and processing it which is not an efficient way of doing it - can someone please suggest what is the efficient way of reading a large file from the S3 bucket and processing it in the Spring batch.</p>\n<p>Appreciated your help in advance! Thanks.</p>\n<pre><code>@Component\npublic class GetFileFromS3 {\n\n    public S3ObjectInputStream dowloadFile(String keyName, String bucketName, String region) {\n        try {\n            AmazonS3 s3Client = AmazonS3ClientBuilder.standard().withClientConfiguration(new ClientConfiguration())\n                    .withRegion(region).build();\n\n            S3Object s3object = s3Client.getObject(bucketName, keyName);\n            return s3object.getObjectContent();\n        } catch (AmazonServiceException e) {\n            e.printStackTrace();\n        }\n        return null;\n    }\n\n}\n\n\n\n\npublic class SpringBatch {\n\n    @Autowired\n    private GetFileFromS3 getFileFromS3;\n\n\n @Bean(name = &quot;csvFile&quot;)\n    public Step step1() {\n        return stepBuilderFactory.get(&quot;step1&quot;).&lt;Employee, Employee&gt;chunk(10)\n                .reader(reader())\n                .processor(processor())\n                .writer(writer())\n                .build();\n    }\n\n    @Bean\n    public FlatFileItemReader&lt;Employee&gt; reader() {\n        S3ObjectInputStream inputStream = getFileFromS3.dowloadFile(&quot;employee.csv&quot;, &quot;testBucket&quot;, &quot;us-east-1&quot;);\n        FlatFileItemReader&lt;Employee&gt; reader = new FlatFileItemReader&lt;Employee&gt;();\n        reader.setResource(new InputStreamResource(inputStream));\n        reader.setLinesToSkip(1);\n        reader.setLineMapper(new DefaultLineMapper() {\n            {\n                setLineTokenizer(new DelimitedLineTokenizer() {\n                    {\n                        setNames(Employee.fields());\n                    }\n                });\n                setFieldSetMapper(new BeanWrapperFieldSetMapper&lt;Employee&gt;() {\n                    {\n                        setTargetType(Employee.class);\n                    }\n                });\n            }\n        });\n        return reader;\n    }\n\n    @Bean\n    public ItemProcessor&lt;Employee, Employee&gt; processor() {\n        return new ItemProcessor();\n    }\n\n    @Bean\n    public ItemWriter&lt;Employee&gt; writer() {\n        return new ItemWriter&lt;Event&gt;();\n    }\n\n    }\n</code></pre>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":213468,"reputation":103485,"user_id":466862,"display_name":"Mark Rotteveel"},"score":0,"creation_date":1675431449,"post_id":75303700,"comment_id":132932960,"body_markdown":"`writeUTF` expects a string, you&#39;re trying to write an int. Either you need to convert the int to string, or you need to use one of the other methods. As an aside, are you really sure you should be using `DataOutputStream`?","body":"<code>writeUTF</code> expects a string, you&#39;re trying to write an int. Either you need to convert the int to string, or you need to use one of the other methods. As an aside, are you really sure you should be using <code>DataOutputStream</code>?"}],"answers":[{"tags":[],"owner":{"account_id":74704,"reputation":11534,"user_id":214525,"accept_rate":100,"display_name":"f1sh"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1675204422,"creation_date":1675204422,"answer_id":75303854,"question_id":75303700,"body_markdown":"If you take a look at [the docs of that class](https://docs.oracle.com/javase/7/docs/api/java/io/DataOutputStream.html#method_summary), you can see that each type has its own method for writing it to the `DataOutputStream`.\r\n\r\nThat means to write a `double`, use the `writeDouble` method and the `writeInt` method for `int` values.\r\n\r\nThe `UTF` in `writeUTF(String)` hint at the fact that the `String` will be written to the stream in a specific encoding. A UTF encoding only makes sense for writing `String`s.\r\n","title":"WriteUTF cannot be applied to (int)","body":"<p>If you take a look at <a href=\"https://docs.oracle.com/javase/7/docs/api/java/io/DataOutputStream.html#method_summary\" rel=\"nofollow noreferrer\">the docs of that class</a>, you can see that each type has its own method for writing it to the <code>DataOutputStream</code>.</p>\n<p>That means to write a <code>double</code>, use the <code>writeDouble</code> method and the <code>writeInt</code> method for <code>int</code> values.</p>\n<p>The <code>UTF</code> in <code>writeUTF(String)</code> hint at the fact that the <code>String</code> will be written to the stream in a specific encoding. A UTF encoding only makes sense for writing <code>String</code>s.</p>\n"}],"owner":{"account_id":26557336,"reputation":3,"user_id":20185739,"display_name":"gangrx"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":28,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75303854,"answer_count":1,"score":0,"last_activity_date":1675204422,"creation_date":1675203245,"question_id":75303700,"body_markdown":"```\r\nfor (Account accountObj : accounts) {\r\n                System.out.print(accountObj);\r\n                account.writeUTF(accountObj.getAccountHolderName());\r\n                account.writeUTF(accountObj.getAccountType());\r\n                account.writeUTF(accountObj.getBalance());\r\n                account.writeUTF(accountObj.getAccountNumber());\r\n\r\n            }\r\n```\r\n&#39;writeUTF(java.lang.String)&#39; in &#39;java.io.DataOutputStream&#39; cannot be applied to &#39;(double)&#39;\r\n&#39;writeUTF(java.lang.String)&#39; in &#39;java.io.DataOutputStream&#39; cannot be applied to &#39;(int)&#39;\r\n\r\nso, I got these two errors, and I even tried parseInt and double before storing the values in the ArrayList yet, am a little confused, some help would be kind : ) ","title":"WriteUTF cannot be applied to (int)","body":"<pre><code>for (Account accountObj : accounts) {\n                System.out.print(accountObj);\n                account.writeUTF(accountObj.getAccountHolderName());\n                account.writeUTF(accountObj.getAccountType());\n                account.writeUTF(accountObj.getBalance());\n                account.writeUTF(accountObj.getAccountNumber());\n\n            }\n</code></pre>\n<p>'writeUTF(java.lang.String)' in 'java.io.DataOutputStream' cannot be applied to '(double)'\n'writeUTF(java.lang.String)' in 'java.io.DataOutputStream' cannot be applied to '(int)'</p>\n<p>so, I got these two errors, and I even tried parseInt and double before storing the values in the ArrayList yet, am a little confused, some help would be kind : )</p>\n"},{"tags":["java","spring-boot","authentication"],"comments":[{"owner":{"account_id":7774266,"reputation":186,"user_id":5882852,"display_name":"Thorne"},"score":0,"creation_date":1675111978,"post_id":75289718,"comment_id":132854901,"body_markdown":"That is most likely happening because of your `authenticationJwtTokenFilter()`. It&#39;s difficult to tell without having the full config code, but I would start investigating from there","body":"That is most likely happening because of your <code>authenticationJwtTokenFilter()</code>. It&#39;s difficult to tell without having the full config code, but I would start investigating from there"},{"owner":{"account_id":10363660,"reputation":1677,"user_id":8867721,"accept_rate":80,"display_name":"OD1995"},"score":0,"creation_date":1675116882,"post_id":75289718,"comment_id":132856175,"body_markdown":"@Thorne thanks for the reply, I&#39;ve had a look but I can&#39;t see what might be wrong, I&#39;ve added more code if that might be helpful","body":"@Thorne thanks for the reply, I&#39;ve had a look but I can&#39;t see what might be wrong, I&#39;ve added more code if that might be helpful"},{"owner":{"account_id":7774266,"reputation":186,"user_id":5882852,"display_name":"Thorne"},"score":0,"creation_date":1675172267,"post_id":75289718,"comment_id":132867868,"body_markdown":"I&#39;ve checked one of my projects which has the same &quot;problem&quot; (the log message didn&#39;t bother me before). At least in my project, the log message comes from a class extending `AuthenticationEntryPoint`. In your case it seems to be injected as `unauthorizedHandler`, judging from `.exceptionHandling().authenticationEntryPoint(unauthorizedHandler)`, so check there.\nAlso, it would be good to see the full log message – it should refer to the exact class which logs the line.","body":"I&#39;ve checked one of my projects which has the same &quot;problem&quot; (the log message didn&#39;t bother me before). At least in my project, the log message comes from a class extending <code>AuthenticationEntryPoint</code>. In your case it seems to be injected as <code>unauthorizedHandler</code>, judging from <code>.exceptionHandling().authenticationEntryPoint(unauthorizedHa&zwnj;&#8203;ndler)</code>, so check there. Also, it would be good to see the full log message – it should refer to the exact class which logs the line."},{"owner":{"account_id":13838021,"reputation":117,"user_id":9989073,"display_name":"ilovestackoverflow"},"score":0,"creation_date":1700076846,"post_id":75289718,"comment_id":136611682,"body_markdown":"@OD1995 I have the exact same issue! Did you manage to solve it?","body":"@OD1995 I have the exact same issue! Did you manage to solve it?"}],"owner":{"account_id":10363660,"reputation":1677,"user_id":8867721,"accept_rate":80,"display_name":"OD1995"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":290,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1675204154,"creation_date":1675110076,"question_id":75289718,"body_markdown":"I have a Spring Boot app that will log &quot;Unauthorized error: Full authentication is required to access this resource&quot; when one of the endpoints tagged with `permitAll()` is called.\r\n\r\nIf I call any of the `/teams/**` endpoints, I get the response back that I am expecting. However, the above error is logged.\r\n\r\nIf I call any of the endpoints of `/admin/**` or `/test/**` (without the appropriate authorization) I get the above error as expected.\r\n\r\nWhy is the error being logged when nothing is actually going wrong?\r\n\r\n*WebSecurityConfig.java*\r\n\r\n    @Configuration\r\n    @EnableWebSecurity\r\n    @EnableGlobalMethodSecurity(prePostEnabled = true)\r\n    public class WebSecurityConfig extends WebSecurityConfigurerAdapter {\r\n\r\n        // ...\r\n\r\n        @Bean\r\n    \tpublic AuthTokenFilter authenticationJwtTokenFilter() {\r\n    \t\treturn new AuthTokenFilter();\r\n    \t}\r\n\r\n        @Override\r\n    \tprotected void configure(HttpSecurity http) throws Exception {\r\n    \t\thttp.cors().and().csrf().disable()\r\n    \t\t\t.exceptionHandling().authenticationEntryPoint(unauthorizedHandler).and()\r\n    \t\t\t.sessionManagement().sessionCreationPolicy(SessionCreationPolicy.STATELESS).and()\r\n    \t\t\t.authorizeRequests()\r\n    \t\t\t.antMatchers(&quot;/api/v1/admin/**&quot;).hasRole(&quot;ADMIN&quot;)\r\n    \t\t\t.antMatchers(&quot;/api/v1/test/**&quot;).hasRole(&quot;USER&quot;)\r\n    \t\t\t.antMatchers(&quot;/api/v1/teams/**&quot;).permitAll()\r\n    \t\t\t.anyRequest().authenticated();\r\n    \t\thttp.addFilterBefore(authenticationJwtTokenFilter(), UsernamePasswordAuthenticationFilter.class);\r\n    \t}\r\n    }\r\n\r\n*AuthTokenFilter.java*\r\n\r\n    public class AuthTokenFilter extends OncePerRequestFilter {\r\n    \t@Override\r\n    \tprotected void doFilterInternal(\r\n    \t\t\tHttpServletRequest request,\r\n    \t\t\tHttpServletResponse response,\r\n    \t\t\tFilterChain filterChain\r\n    \t) throws ServletException, IOException {\r\n    \t\ttry {\r\n    \t\t\tString jwt = parseJwt(request);\r\n                // jwt is null for the request I&#39;m referring to\r\n    \t\t\tif (jwt != null &amp;&amp; jwtUtils.validateJwtToken(jwt)) {\r\n    \t\t\t\tString username = jwtUtils.getUserNameFromJwtToken(jwt);\r\n    \t\t\t\tUserDetails userDetails = userDetailsService.loadUserByUsername(username);\r\n    \t\t\t\tUsernamePasswordAuthenticationToken authentication = new UsernamePasswordAuthenticationToken(\r\n    \t\t\t\t\t\tuserDetails,\r\n    \t\t\t\t\t\tnull,\r\n    \t\t\t\t\t\tuserDetails.getAuthorities()\r\n    \t\t\t\t);\r\n    \t\t\t\tauthentication.setDetails(new WebAuthenticationDetailsSource().buildDetails(request));\r\n    \t\t\t\tSecurityContextHolder.getContext().setAuthentication(authentication);\r\n    \t\t\t}\r\n    \t\t} catch (Exception e) {\r\n    \t\t\tlogger.error(&quot;Cannot set user authentication: {}&quot;, e);\r\n    \t\t}\r\n    \t\tfilterChain.doFilter(request, response);\r\n    \t}\r\n    \tprivate String parseJwt(HttpServletRequest request) {\r\n    \t\tString headerAuth = request.getHeader(&quot;Authorization&quot;);\r\n    \t\tif (StringUtils.hasText(headerAuth) &amp;&amp; headerAuth.startsWith(&quot;Bearer &quot;)) {\r\n    \t\t\treturn headerAuth.substring(7, headerAuth.length());\r\n    \t\t}\r\n    \t\treturn null;\r\n    \t}\r\n\r\n*Log*\r\n\r\n    m.t.security.jwt.AuthEntryPointJwt       : Unauthorized error: Full authentication is required to access this resource\r\n\r\n*AuthEntryPointJwt.java*\r\n\r\n    package mygroup.tqbcbackend.security.jwt;\r\n    \r\n    import java.io.IOException;\r\n    import java.time.Clock;\r\n    import java.time.ZonedDateTime;\r\n    import java.util.HashMap;\r\n    import java.util.Map;\r\n    \r\n    import javax.servlet.ServletException;\r\n    import javax.servlet.http.HttpServletRequest;\r\n    import javax.servlet.http.HttpServletResponse;\r\n    \r\n    import org.slf4j.Logger;\r\n    import org.slf4j.LoggerFactory;\r\n    import org.springframework.http.MediaType;\r\n    import org.springframework.security.core.AuthenticationException;\r\n    import org.springframework.security.web.AuthenticationEntryPoint;\r\n    import org.springframework.stereotype.Component;\r\n    \r\n    import com.fasterxml.jackson.databind.ObjectMapper;\r\n    \r\n    @Component\r\n    public class AuthEntryPointJwt implements AuthenticationEntryPoint {\r\n    \r\n    \tprivate static final Logger logger = LoggerFactory.getLogger(AuthEntryPointJwt.class);\r\n    \r\n    \t@Override\r\n    \tpublic void commence(\r\n    \t\t\tHttpServletRequest request,\r\n    \t\t\tHttpServletResponse response,\r\n    \t\t\tAuthenticationException authException\r\n    \t) throws IOException, ServletException {\r\n    \t\tlogger.error(&quot;Unauthorized error: {}&quot;, authException.getMessage());\r\n    \r\n    \t\tresponse.setContentType(MediaType.APPLICATION_JSON_VALUE);\r\n    \t\tresponse.setStatus(HttpServletResponse.SC_UNAUTHORIZED);\r\n    \t\t\r\n    \t\tfinal Map&lt;String, Object&gt; body = new HashMap&lt;&gt;();\r\n    \t\tbody.put(&quot;status&quot;, HttpServletResponse.SC_UNAUTHORIZED);\r\n    \t\tbody.put(&quot;error&quot;, &quot;Unauthorized&quot;);\r\n    \t\tbody.put(&quot;message&quot;, authException.getMessage());\r\n    \t\tbody.put(&quot;path&quot;, request.getServletPath());\r\n    \t\tbody.put(&quot;datetime&quot;, ZonedDateTime.now(Clock.systemUTC()).toString());\r\n    \t\t\r\n    \t\tfinal ObjectMapper mapper = new ObjectMapper();\r\n    \t\tmapper.writeValue(response.getOutputStream(), body);\r\n    \t}\r\n    }\r\n\r\n*Stack Trace*\r\n\r\n    org.springframework.security.authentication.InsufficientAuthenticationException: Full authentication is required to access this resource\r\n            at org.springframework.security.web.access.ExceptionTranslationFilter.handleAccessDeniedException(ExceptionTranslationFilter.java:195)\r\n            at org.springframework.security.web.access.ExceptionTranslationFilter.handleSpringSecurityException(ExceptionTranslationFilter.java:174)\r\n            at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:143)\r\n            at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:116)\r\n            at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)\r\n            at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:126)\r\n            at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:81)\r\n            at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)\r\n            at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:109)\r\n            at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)\r\n            at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:149)\r\n            at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)\r\n            at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)\r\n            at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)\r\n            at mygroup.tqbcbackend.security.jwt.AuthTokenFilter.doFilterInternal(AuthTokenFilter.java:54)\r\n            at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)        \r\n            at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)\r\n            at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:103)\r\n            at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:89) \r\n            at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)\r\n            at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)\r\n            at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)        \r\n            at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)\r\n            at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)\r\n            at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)\r\n            at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)        \r\n            at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)\r\n            at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:110)\r\n            at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:80)\r\n            at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)\r\n            at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:55)\r\n            at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)        \r\n            at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)\r\n            at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:211)      \r\n            at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:183)\r\n            at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:354)\r\n            at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:267)      \r\n            at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)  \r\n            at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)\r\n            at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)\r\n            at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)        \r\n            at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)  \r\n            at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)\r\n            at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)       \r\n            at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)        \r\n            at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:540)\r\n            at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:135)\r\n            at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)        at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)\r\n            at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357)\r\n            at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:382)\r\n            at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)\r\n            at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:895)        at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1732)\r\n            at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)\r\n            at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)\r\n            at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)\r\n            at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\r\n            at java.base/java.lang.Thread.run(Thread.java:829)\r\n\r\nLine 54 of `AuthTokenFilter.java` is `filterChain.doFilter(request, response);`","title":"&quot;Unauthorized error: Full authentication is required to access this resource&quot; is logged despite getting a successful response","body":"<p>I have a Spring Boot app that will log &quot;Unauthorized error: Full authentication is required to access this resource&quot; when one of the endpoints tagged with <code>permitAll()</code> is called.</p>\n<p>If I call any of the <code>/teams/**</code> endpoints, I get the response back that I am expecting. However, the above error is logged.</p>\n<p>If I call any of the endpoints of <code>/admin/**</code> or <code>/test/**</code> (without the appropriate authorization) I get the above error as expected.</p>\n<p>Why is the error being logged when nothing is actually going wrong?</p>\n<p><em>WebSecurityConfig.java</em></p>\n<pre><code>@Configuration\n@EnableWebSecurity\n@EnableGlobalMethodSecurity(prePostEnabled = true)\npublic class WebSecurityConfig extends WebSecurityConfigurerAdapter {\n\n    // ...\n\n    @Bean\n    public AuthTokenFilter authenticationJwtTokenFilter() {\n        return new AuthTokenFilter();\n    }\n\n    @Override\n    protected void configure(HttpSecurity http) throws Exception {\n        http.cors().and().csrf().disable()\n            .exceptionHandling().authenticationEntryPoint(unauthorizedHandler).and()\n            .sessionManagement().sessionCreationPolicy(SessionCreationPolicy.STATELESS).and()\n            .authorizeRequests()\n            .antMatchers(&quot;/api/v1/admin/**&quot;).hasRole(&quot;ADMIN&quot;)\n            .antMatchers(&quot;/api/v1/test/**&quot;).hasRole(&quot;USER&quot;)\n            .antMatchers(&quot;/api/v1/teams/**&quot;).permitAll()\n            .anyRequest().authenticated();\n        http.addFilterBefore(authenticationJwtTokenFilter(), UsernamePasswordAuthenticationFilter.class);\n    }\n}\n</code></pre>\n<p><em>AuthTokenFilter.java</em></p>\n<pre><code>public class AuthTokenFilter extends OncePerRequestFilter {\n    @Override\n    protected void doFilterInternal(\n            HttpServletRequest request,\n            HttpServletResponse response,\n            FilterChain filterChain\n    ) throws ServletException, IOException {\n        try {\n            String jwt = parseJwt(request);\n            // jwt is null for the request I'm referring to\n            if (jwt != null &amp;&amp; jwtUtils.validateJwtToken(jwt)) {\n                String username = jwtUtils.getUserNameFromJwtToken(jwt);\n                UserDetails userDetails = userDetailsService.loadUserByUsername(username);\n                UsernamePasswordAuthenticationToken authentication = new UsernamePasswordAuthenticationToken(\n                        userDetails,\n                        null,\n                        userDetails.getAuthorities()\n                );\n                authentication.setDetails(new WebAuthenticationDetailsSource().buildDetails(request));\n                SecurityContextHolder.getContext().setAuthentication(authentication);\n            }\n        } catch (Exception e) {\n            logger.error(&quot;Cannot set user authentication: {}&quot;, e);\n        }\n        filterChain.doFilter(request, response);\n    }\n    private String parseJwt(HttpServletRequest request) {\n        String headerAuth = request.getHeader(&quot;Authorization&quot;);\n        if (StringUtils.hasText(headerAuth) &amp;&amp; headerAuth.startsWith(&quot;Bearer &quot;)) {\n            return headerAuth.substring(7, headerAuth.length());\n        }\n        return null;\n    }\n</code></pre>\n<p><em>Log</em></p>\n<pre><code>m.t.security.jwt.AuthEntryPointJwt       : Unauthorized error: Full authentication is required to access this resource\n</code></pre>\n<p><em>AuthEntryPointJwt.java</em></p>\n<pre><code>package mygroup.tqbcbackend.security.jwt;\n\nimport java.io.IOException;\nimport java.time.Clock;\nimport java.time.ZonedDateTime;\nimport java.util.HashMap;\nimport java.util.Map;\n\nimport javax.servlet.ServletException;\nimport javax.servlet.http.HttpServletRequest;\nimport javax.servlet.http.HttpServletResponse;\n\nimport org.slf4j.Logger;\nimport org.slf4j.LoggerFactory;\nimport org.springframework.http.MediaType;\nimport org.springframework.security.core.AuthenticationException;\nimport org.springframework.security.web.AuthenticationEntryPoint;\nimport org.springframework.stereotype.Component;\n\nimport com.fasterxml.jackson.databind.ObjectMapper;\n\n@Component\npublic class AuthEntryPointJwt implements AuthenticationEntryPoint {\n\n    private static final Logger logger = LoggerFactory.getLogger(AuthEntryPointJwt.class);\n\n    @Override\n    public void commence(\n            HttpServletRequest request,\n            HttpServletResponse response,\n            AuthenticationException authException\n    ) throws IOException, ServletException {\n        logger.error(&quot;Unauthorized error: {}&quot;, authException.getMessage());\n\n        response.setContentType(MediaType.APPLICATION_JSON_VALUE);\n        response.setStatus(HttpServletResponse.SC_UNAUTHORIZED);\n        \n        final Map&lt;String, Object&gt; body = new HashMap&lt;&gt;();\n        body.put(&quot;status&quot;, HttpServletResponse.SC_UNAUTHORIZED);\n        body.put(&quot;error&quot;, &quot;Unauthorized&quot;);\n        body.put(&quot;message&quot;, authException.getMessage());\n        body.put(&quot;path&quot;, request.getServletPath());\n        body.put(&quot;datetime&quot;, ZonedDateTime.now(Clock.systemUTC()).toString());\n        \n        final ObjectMapper mapper = new ObjectMapper();\n        mapper.writeValue(response.getOutputStream(), body);\n    }\n}\n</code></pre>\n<p><em>Stack Trace</em></p>\n<pre><code>org.springframework.security.authentication.InsufficientAuthenticationException: Full authentication is required to access this resource\n        at org.springframework.security.web.access.ExceptionTranslationFilter.handleAccessDeniedException(ExceptionTranslationFilter.java:195)\n        at org.springframework.security.web.access.ExceptionTranslationFilter.handleSpringSecurityException(ExceptionTranslationFilter.java:174)\n        at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:143)\n        at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:116)\n        at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)\n        at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:126)\n        at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:81)\n        at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)\n        at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:109)\n        at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)\n        at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:149)\n        at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)\n        at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)\n        at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)\n        at mygroup.tqbcbackend.security.jwt.AuthTokenFilter.doFilterInternal(AuthTokenFilter.java:54)\n        at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)        \n        at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)\n        at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:103)\n        at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:89) \n        at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)\n        at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)\n        at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)        \n        at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)\n        at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)\n        at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)\n        at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)        \n        at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)\n        at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:110)\n        at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:80)\n        at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)\n        at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:55)\n        at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)        \n        at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)\n        at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:211)      \n        at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:183)\n        at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:354)\n        at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:267)      \n        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)  \n        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)\n        at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)\n        at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)        \n        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)  \n        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)\n        at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)       \n        at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)        \n        at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:540)\n        at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:135)\n        at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)        at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)\n        at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357)\n        at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:382)\n        at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)\n        at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:895)        at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1732)\n        at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)\n        at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)\n        at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)\n        at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\n        at java.base/java.lang.Thread.run(Thread.java:829)\n</code></pre>\n<p>Line 54 of <code>AuthTokenFilter.java</code> is <code>filterChain.doFilter(request, response);</code></p>\n"},{"tags":["java","tomcat","weld","tomcat10","embedded-tomcat"],"answers":[{"tags":[],"owner":{"account_id":3858155,"reputation":76,"user_id":3196507,"display_name":"newuser"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1675204101,"creation_date":1675204101,"answer_id":75303811,"question_id":75254294,"body_markdown":"The Weld example was missing setResources() call which is needed to initialize this properly. \r\n\r\n```\r\n...\r\nWebResourceRoot webResourceRoot = new StandardRoot(ctx);\r\nwebResourceRoot.addPreResources(\r\n        new DirResourceSet(webResourceRoot, &quot;/WEB-INF/classes&quot;, additionWebInfClasses.getAbsolutePath(), &quot;/&quot;));\r\n\r\n// this was missing \r\nctx.setResources(webResourceRoot);\r\n...\r\n```\r\n\r\nThis is also easy to miss due to lack of documentation on embedded Tomcat. ","title":"Basic Weld example with Embedded Tomcat not working","body":"<p>The Weld example was missing setResources() call which is needed to initialize this properly.</p>\n<pre><code>...\nWebResourceRoot webResourceRoot = new StandardRoot(ctx);\nwebResourceRoot.addPreResources(\n        new DirResourceSet(webResourceRoot, &quot;/WEB-INF/classes&quot;, additionWebInfClasses.getAbsolutePath(), &quot;/&quot;));\n\n// this was missing \nctx.setResources(webResourceRoot);\n...\n</code></pre>\n<p>This is also easy to miss due to lack of documentation on embedded Tomcat.</p>\n"}],"owner":{"account_id":3858155,"reputation":76,"user_id":3196507,"display_name":"newuser"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":146,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75303811,"answer_count":1,"score":0,"last_activity_date":1675204101,"creation_date":1674796219,"question_id":75254294,"body_markdown":"I am trying to use Weld with Embedded Tomcat (10.1.5) using a basic example and settings from official [weld docs][1]. \r\n\r\n**This weld injection with same code works fine with Tomcat on Eclipse.**\r\n\r\nHowever, on Embedded Tomcat, the **injected bean is always null**. If I try to lookup BeanManager using JNDI it throws this error:\r\n\r\n```java\r\n//code\r\nContext initContext = new InitialContext();\r\nbm = (BeanManager) ((Context) initContext.lookup(&quot;java:comp/env&quot;)).lookup(&quot;BeanManager&quot;);\r\n```\r\n```\r\nException: javax.naming.NamingException: WELD-001300: Unable to locate BeanManager\r\n```\r\n\r\nAdded BeanManager entries to context.xml, web.xml, and empty beans.xml to WEB-INF.\r\n\r\ngradle dependency:\r\n```\t\r\nimplementation group: &#39;org.jboss.weld.servlet&#39;, name: &#39;weld-servlet-core&#39;, version: &#39;5.1.0.Final&#39;\r\n```\r\n\r\nmain class:\r\n```java\r\nTomcat tomcat = new Tomcat();\r\nString webappDirLocation = &quot;src/main/webapp/&quot;;\r\nContext ctx = tomcat.addWebapp(&quot;/&quot;, new File(webappDirLocation).getAbsolutePath());\r\n\r\n// declare an alternate location for your &quot;WEB-INF/classes&quot; dir:\r\nFile additionWebInfClasses = new File(&quot;build/classes/java/main/&quot;);\r\nWebResourceRoot webResourceRoot = new StandardRoot(ctx);\r\nwebResourceRoot.addPreResources(\r\n\t\tnew DirResourceSet(webResourceRoot, &quot;/WEB-INF/classes&quot;, additionWebInfClasses.getAbsolutePath(), &quot;/&quot;));\r\n\r\nctx.addApplicationListener(Listener.class.getName());\r\n\r\ntomcat.enableNaming();\r\ntomcat.getConnector();\r\ntomcat.start();\r\ntomcat.getServer().await();\r\n\r\n```\r\n\r\nWhat is the issue here? What extra setting is needed to use Weld with Embedded Tomcat ?\r\n\r\n\r\nThere is a curious difference in Weld startup logs too:\r\n```\r\n// Embedded Tomcat\r\nJan 26, 2023 11:50:56 PM org.jboss.weld.environment.servlet.WeldServletLifecycle initialize\r\n\r\n// Tomcat with Eclipse\r\nJan 26, 2023 11:56:43 PM org.jboss.weld.environment.tomcat.TomcatContainer initialize\r\n\r\n```\r\n\r\n\r\n  [1]: https://docs.jboss.org/weld/reference/latest/en-US/html/environments.html#environments","title":"Basic Weld example with Embedded Tomcat not working","body":"<p>I am trying to use Weld with Embedded Tomcat (10.1.5) using a basic example and settings from official <a href=\"https://docs.jboss.org/weld/reference/latest/en-US/html/environments.html#environments\" rel=\"nofollow noreferrer\">weld docs</a>.</p>\n<p><strong>This weld injection with same code works fine with Tomcat on Eclipse.</strong></p>\n<p>However, on Embedded Tomcat, the <strong>injected bean is always null</strong>. If I try to lookup BeanManager using JNDI it throws this error:</p>\n<pre class=\"lang-java prettyprint-override\"><code>//code\nContext initContext = new InitialContext();\nbm = (BeanManager) ((Context) initContext.lookup(&quot;java:comp/env&quot;)).lookup(&quot;BeanManager&quot;);\n</code></pre>\n<pre><code>Exception: javax.naming.NamingException: WELD-001300: Unable to locate BeanManager\n</code></pre>\n<p>Added BeanManager entries to context.xml, web.xml, and empty beans.xml to WEB-INF.</p>\n<p>gradle dependency:</p>\n<pre><code>implementation group: 'org.jboss.weld.servlet', name: 'weld-servlet-core', version: '5.1.0.Final'\n</code></pre>\n<p>main class:</p>\n<pre class=\"lang-java prettyprint-override\"><code>Tomcat tomcat = new Tomcat();\nString webappDirLocation = &quot;src/main/webapp/&quot;;\nContext ctx = tomcat.addWebapp(&quot;/&quot;, new File(webappDirLocation).getAbsolutePath());\n\n// declare an alternate location for your &quot;WEB-INF/classes&quot; dir:\nFile additionWebInfClasses = new File(&quot;build/classes/java/main/&quot;);\nWebResourceRoot webResourceRoot = new StandardRoot(ctx);\nwebResourceRoot.addPreResources(\n        new DirResourceSet(webResourceRoot, &quot;/WEB-INF/classes&quot;, additionWebInfClasses.getAbsolutePath(), &quot;/&quot;));\n\nctx.addApplicationListener(Listener.class.getName());\n\ntomcat.enableNaming();\ntomcat.getConnector();\ntomcat.start();\ntomcat.getServer().await();\n\n</code></pre>\n<p>What is the issue here? What extra setting is needed to use Weld with Embedded Tomcat ?</p>\n<p>There is a curious difference in Weld startup logs too:</p>\n<pre><code>// Embedded Tomcat\nJan 26, 2023 11:50:56 PM org.jboss.weld.environment.servlet.WeldServletLifecycle initialize\n\n// Tomcat with Eclipse\nJan 26, 2023 11:56:43 PM org.jboss.weld.environment.tomcat.TomcatContainer initialize\n\n</code></pre>\n"},{"tags":["java","spring","mongodb"],"owner":{"account_id":17974936,"reputation":11,"user_id":13062767,"display_name":"Stephen Kross"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":20,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1675203998,"creation_date":1675203998,"question_id":75303799,"body_markdown":"This is my repository:\r\n\r\n    @Repository\r\n    public interface PluginRepository extends MongoRepository&lt;Plugin, Integer&gt; { }\r\n\r\nHere is a sample of my @Document class:\r\n\r\n    @Document(collection = &quot;plugins&quot;)\r\n    public class Plugin {\r\n    \r\n        @Id\r\n        private int id;\r\n        private HashMap&lt;String, Boolean&gt; files = new HashMap&lt;&gt;(); // sha256 -&gt; malware\r\n\r\nI basically need to return one Plugin where the files map contains a specific key. I don&#39;t care about the value of that HashMap.\r\n\r\nI know Spring has the auto method naming thing since the Repo is an interface. I just don&#39;t know what to name it. I see these on the Spring docs:\r\n\r\n[Spring docs][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/dmCLB.png\r\n\r\nBut none seems to be a containsKey option.","title":"Using Mongo&#39;s Spring Boot integration, what method name in the MongoRepository interface would return the document if a Map in it has a specific key?","body":"<p>This is my repository:</p>\n<pre><code>@Repository\npublic interface PluginRepository extends MongoRepository&lt;Plugin, Integer&gt; { }\n</code></pre>\n<p>Here is a sample of my @Document class:</p>\n<pre><code>@Document(collection = &quot;plugins&quot;)\npublic class Plugin {\n\n    @Id\n    private int id;\n    private HashMap&lt;String, Boolean&gt; files = new HashMap&lt;&gt;(); // sha256 -&gt; malware\n</code></pre>\n<p>I basically need to return one Plugin where the files map contains a specific key. I don't care about the value of that HashMap.</p>\n<p>I know Spring has the auto method naming thing since the Repo is an interface. I just don't know what to name it. I see these on the Spring docs:</p>\n<p><a href=\"https://i.stack.imgur.com/dmCLB.png\" rel=\"nofollow noreferrer\">Spring docs</a></p>\n<p>But none seems to be a containsKey option.</p>\n"},{"tags":["java","gradle"],"answers":[{"tags":[],"owner":{"account_id":15144230,"reputation":1347,"user_id":10928439,"display_name":"Simon Jacobs"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1675203712,"creation_date":1675203712,"answer_id":75303766,"question_id":75302920,"body_markdown":"You can add the output of the `testcommons` SourceSet as a dependency of the main suite:\r\n```gy\r\ntesting {\r\n   suites {\r\n      test {\r\n         dependencies {\r\n            implementation(sourceSets[&quot;testcommons&quot;].output)\r\n         }\r\n      }\r\n   }\r\n}\r\n```\r\nNote this approach eagerly accesses the `testcommons` SourceSet, so its definition must be moved above this code.","title":"Gradle include classes from Source set in a gradle test suite","body":"<p>You can add the output of the <code>testcommons</code> SourceSet as a dependency of the main suite:</p>\n<pre><code>testing {\n   suites {\n      test {\n         dependencies {\n            implementation(sourceSets[&quot;testcommons&quot;].output)\n         }\n      }\n   }\n}\n</code></pre>\n<p>Note this approach eagerly accesses the <code>testcommons</code> SourceSet, so its definition must be moved above this code.</p>\n"}],"owner":{"account_id":26289969,"reputation":313,"user_id":19957114,"display_name":"dev-rifaii"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":162,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75303766,"answer_count":1,"score":0,"last_activity_date":1675203712,"creation_date":1675197753,"question_id":75302920,"body_markdown":"I have this setup in my build.gradle:\r\n```groovy\r\ntesting {\r\n    suites {\r\n        test {\r\n            useJUnitJupiter()\r\n        }\r\n\r\n        itest(JvmTestSuite) {\r\n            testType = TestSuiteType.INTEGRATION_TEST\r\n\r\n            dependencies {\r\n                implementation project()\r\n            }\r\n\r\n            configurations {\r\n                itestImplementation.extendsFrom testImplementation\r\n                itestRuntime.extendsFrom testRuntime\r\n                itestRuntimeOnly.extendsFrom testRuntimeOnly\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\nsourceSets {\r\n    testcommons{\r\n        java{\r\n            srcDir &#39;src/testcommons/java&#39;\r\n        }\r\n    }\r\n}\r\n```\r\n\r\nI&#39;d like to include test commons in both test suites, any idea how I can go on about that?\r\n","title":"Gradle include classes from Source set in a gradle test suite","body":"<p>I have this setup in my build.gradle:</p>\n<pre><code>testing {\n    suites {\n        test {\n            useJUnitJupiter()\n        }\n\n        itest(JvmTestSuite) {\n            testType = TestSuiteType.INTEGRATION_TEST\n\n            dependencies {\n                implementation project()\n            }\n\n            configurations {\n                itestImplementation.extendsFrom testImplementation\n                itestRuntime.extendsFrom testRuntime\n                itestRuntimeOnly.extendsFrom testRuntimeOnly\n            }\n        }\n    }\n}\n\nsourceSets {\n    testcommons{\n        java{\n            srcDir 'src/testcommons/java'\n        }\n    }\n}\n</code></pre>\n<p>I'd like to include test commons in both test suites, any idea how I can go on about that?</p>\n"},{"tags":["java","groovy","jenkins"],"comments":[{"owner":{"account_id":1821904,"reputation":730,"user_id":1655780,"display_name":"Steven the Easily Amused"},"score":0,"creation_date":1519753010,"post_id":27142674,"comment_id":85034184,"body_markdown":"Not clear why it&#39;s a unique requirement to check if a node is running a build. That&#39;s exactly what Jenkins master is doing by default. Is your requirement that you do not want to run a build unless N slaves are all currently free?","body":"Not clear why it&#39;s a unique requirement to check if a node is running a build. That&#39;s exactly what Jenkins master is doing by default. Is your requirement that you do not want to run a build unless N slaves are all currently free?"}],"answers":[{"tags":[],"owner":{"account_id":5384131,"reputation":1,"user_id":4288605,"display_name":"Raman  Tretyak"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1416994001,"creation_date":1416994001,"answer_id":27145446,"question_id":27142674,"body_markdown":"To get the name of the node, that is running the current build, just use System.getenv(&quot;NODE_NAME&quot;)\r\n\r\n&gt; When a Jenkins job executes, it sets some environment variables..\r\n\r\nYou may find these variables very useful. Check [this link][1] \r\n\r\n\r\n  [1]: https://wiki.jenkins-ci.org/display/JENKINS/Building+a+software+project#Buildingasoftwareproject-JenkinsSetEnvironmentVariables","title":"Jenkins How to find if a given slave is running a Job","body":"<p>To get the name of the node, that is running the current build, just use System.getenv(\"NODE_NAME\")</p>\n\n<blockquote>\n  <p>When a Jenkins job executes, it sets some environment variables..</p>\n</blockquote>\n\n<p>You may find these variables very useful. Check <a href=\"https://wiki.jenkins-ci.org/display/JENKINS/Building+a+software+project#Buildingasoftwareproject-JenkinsSetEnvironmentVariables\" rel=\"nofollow\">this link</a> </p>\n"},{"tags":[],"owner":{"account_id":1949923,"reputation":1957,"user_id":1754255,"accept_rate":52,"display_name":"NotAgain"},"down_vote_count":0,"up_vote_count":10,"is_accepted":true,"score":10,"last_activity_date":1675203500,"creation_date":1417500281,"answer_id":27242903,"question_id":27142674,"body_markdown":"Here is the hackish way I was able to do it. I changed my workflow to find the available free slave rather than finding if a slave was busy and then checking the next one to see it is free.\r\n\r\nThis Groovy script counts the number of busy executors on the Slave. It polls continuously till it finds an online slave with zero number of busy executors. I hate polling and will request knowledgeable members to chip in with suggestions to somehow plug into Jenkins event based notification.\r\n\r\n    import hudson.FilePath\r\n    import hudson.model.Node\r\n    import hudson.model.Slave\r\n    import jenkins.model.Jenkins\r\n    import groovy.time.*\r\n    \r\n    Jenkins jenkins = Jenkins.instance\r\n    def jenkinsNodes =jenkins.nodes\r\n    while(1)\r\n    {\r\n    \tfor (Node node in jenkinsNodes) \r\n      \t{\r\n          \tsleep(1000)\r\n    \t \t// Make sure slave is online\r\n    \t\tif (!node.getComputer().isOffline()) \r\n    \t\t{          \t\r\n    \t\t\t//Make sure that the slave busy executor number is 0.\r\n              \tif(node.getComputer().countBusy()==0)\r\n              \t{\r\n                  \tprintln &quot;&#39;$node.nodeName&#39; can take jobs !!!&quot;\r\n     \t  \t\t\treturn 0\r\n                }\r\n    \t    \telse\r\n                {\r\n                  \tprintln &quot;$node.nodeName&#39; is busy !!!&quot;\r\n                }\r\n    \t\t}\r\n          \telse\r\n            {\r\n             \tprintln &quot;&#39;$node.nodeName&#39; is offline !!!&quot; \r\n            }\r\n        }\r\n    \tsleep(1000)\r\n    }\r\n\r\nThis runs as job and returns as soon as it finds a suitable slave. Return 0 is a success in Jenkins.\r\n\r\nI am open to better ways of doing it. I am not really happy with this continuous polling I have to do. \r\n","title":"Jenkins How to find if a given slave is running a Job","body":"<p>Here is the hackish way I was able to do it. I changed my workflow to find the available free slave rather than finding if a slave was busy and then checking the next one to see it is free.</p>\n<p>This Groovy script counts the number of busy executors on the Slave. It polls continuously till it finds an online slave with zero number of busy executors. I hate polling and will request knowledgeable members to chip in with suggestions to somehow plug into Jenkins event based notification.</p>\n<pre><code>import hudson.FilePath\nimport hudson.model.Node\nimport hudson.model.Slave\nimport jenkins.model.Jenkins\nimport groovy.time.*\n\nJenkins jenkins = Jenkins.instance\ndef jenkinsNodes =jenkins.nodes\nwhile(1)\n{\n    for (Node node in jenkinsNodes) \n    {\n        sleep(1000)\n        // Make sure slave is online\n        if (!node.getComputer().isOffline()) \n        {           \n            //Make sure that the slave busy executor number is 0.\n            if(node.getComputer().countBusy()==0)\n            {\n                println &quot;'$node.nodeName' can take jobs !!!&quot;\n                return 0\n            }\n            else\n            {\n                println &quot;$node.nodeName' is busy !!!&quot;\n            }\n        }\n        else\n        {\n            println &quot;'$node.nodeName' is offline !!!&quot; \n        }\n    }\n    sleep(1000)\n}\n</code></pre>\n<p>This runs as job and returns as soon as it finds a suitable slave. Return 0 is a success in Jenkins.</p>\n<p>I am open to better ways of doing it. I am not really happy with this continuous polling I have to do.</p>\n"},{"tags":[],"owner":{"account_id":4639487,"reputation":3664,"user_id":3759764,"display_name":"prudviraj"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1588864126,"creation_date":1588864126,"answer_id":61661202,"question_id":27142674,"body_markdown":"Let me propose a very simple and efficient way \r\n\r\nEach node stores the information related to if it example : idle or not , offline or not etc\r\n\r\nYou can get those details using below command \r\n\r\n    curl -X GET --silent -u jenkins_user:${jenkins_pwd} &quot;http://your_jenkins_url:8080/computer/node_name/api/json&quot;\r\n\r\nor directly from browser\r\n\r\n    http://your_jenkins_url:8080/computer/node_name/api/jso\r\n\r\n\r\nThis result provides valuable information related to slave.\r\n\r\nIf you want narrow down the search to a specific thing like , is the slave idle or not then you can append it with below logic\r\n\r\n    curl -X GET --silent -u jenkins_user:${jenkins_pwd} &quot;http://jenkins_domanin:8080/computer/node_name/api/json&quot; | python -c &#39;import json,sys,os;obj=json.load(sys.stdin);print obj[&quot;idle&quot;]&#39;\r\n\r\n","title":"Jenkins How to find if a given slave is running a Job","body":"<p>Let me propose a very simple and efficient way </p>\n\n<p>Each node stores the information related to if it example : idle or not , offline or not etc</p>\n\n<p>You can get those details using below command </p>\n\n<pre><code>curl -X GET --silent -u jenkins_user:${jenkins_pwd} \"http://your_jenkins_url:8080/computer/node_name/api/json\"\n</code></pre>\n\n<p>or directly from browser</p>\n\n<pre><code>http://your_jenkins_url:8080/computer/node_name/api/jso\n</code></pre>\n\n<p>This result provides valuable information related to slave.</p>\n\n<p>If you want narrow down the search to a specific thing like , is the slave idle or not then you can append it with below logic</p>\n\n<pre><code>curl -X GET --silent -u jenkins_user:${jenkins_pwd} \"http://jenkins_domanin:8080/computer/node_name/api/json\" | python -c 'import json,sys,os;obj=json.load(sys.stdin);print obj[\"idle\"]'\n</code></pre>\n"}],"owner":{"account_id":1949923,"reputation":1957,"user_id":1754255,"accept_rate":52,"display_name":"NotAgain"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":36909,"favorite_count":0,"down_vote_count":0,"up_vote_count":7,"accepted_answer_id":27242903,"answer_count":3,"score":7,"last_activity_date":1675203500,"creation_date":1416983402,"question_id":27142674,"body_markdown":"I have this unique requirement to check if the given node is running a job or not. I am thinking of using groovy as it looks easiest option.\r\n\r\nI have found this answer to be useful.\r\n\r\nhttps://stackoverflow.com/questions/23761479/how-can-i-check-via-a-script-or-a-plugin-in-jenkins-whether-a-slave-is-online-be\r\n\r\nIt allows me to find if the slave is online or not. Next step for me is to check if it is running a job. \r\n\r\nI was considering using the [API][1] function [setAcceptingTasks(false)][2] to mark slave as running a Job so that when next time I query using [isAcceptingTasks()][3], I get false and hence do not launch job on that slave.\r\n\r\nBut I would rather have the slave mark itself. \r\n\r\n[taskAccepted()][4] and [taskCompleted()][5] come to mind.  &lt;strike&gt;I can call the setAcceptingTasks to false once task is accepted and on completion of tasks set isAcceptingTasks to true once again.  \r\n\r\n\r\n  [1]: http://javadoc.jenkins-ci.org/hudson/slaves/SlaveComputer.html\r\n  [2]: http://javadoc.jenkins-ci.org/hudson/slaves/SlaveComputer.html#setAcceptingTasks%28boolean%29\r\n  [3]: http://javadoc.jenkins-ci.org/hudson/slaves/SlaveComputer.html#isAcceptingTasks%28%29\r\n  [4]: http://javadoc.jenkins-ci.org/hudson/slaves/SlaveComputer.html#taskAccepted%28hudson.model.Executor,%20hudson.model.Queue.Task%29\r\n  [5]: http://javadoc.jenkins-ci.org/hudson/slaves/SlaveComputer.html#taskCompleted%28hudson.model.Executor,%20hudson.model.Queue.Task,%20long%29\r\n\r\nBut I am not sure of the arguments these functions take e.g executor and task. And where do these function calls fit in a groovy script.&lt;/strike&gt;\r\n\r\nI am not sure if my assumption of task is equivalent to a job is true or not.\r\n\r\nThis is what I have got till now:\r\n\r\n    import hudson.model.*\r\n    def requiredNodes = [&#39;Slave1&#39;, &#39;Slave2&#39;, &#39;Slave3&#39;];\r\n    def status = 0;\r\n    for (node in requiredNodes) \r\n    {\r\n          println &quot;Searching for $node&quot;;\r\n          slave = Hudson.instance.slaves.find({it.name == node});\r\n          if (slave != null)\r\n           {\r\n            computer = slave.getComputer();\r\n            if (computer.isOffline())\r\n             {\r\n               println &quot;Error! $node is offline.&quot;;\r\n               status = 1;\r\n             }\r\n             else \r\n             {\r\n               println &quot;OK: $node is online&quot;;\r\n               if(computer.isAcceptingTasks())\r\n               {\r\n                  //Launch job\r\n               }\r\n             }\r\n           }\r\n           else \r\n           {\r\n             println &quot;Slave $node not found!&quot;;\r\n             status = 1;\r\n           }\r\n    }\r\n    status;\r\n\r\nEDIT: Number of executors on each slave is 1.","title":"Jenkins How to find if a given slave is running a Job","body":"<p>I have this unique requirement to check if the given node is running a job or not. I am thinking of using groovy as it looks easiest option.</p>\n\n<p>I have found this answer to be useful.</p>\n\n<p><a href=\"https://stackoverflow.com/questions/23761479/how-can-i-check-via-a-script-or-a-plugin-in-jenkins-whether-a-slave-is-online-be\">How can I check via a script or a plugin in Jenkins whether a slave is online before starting a build from another project on it</a></p>\n\n<p>It allows me to find if the slave is online or not. Next step for me is to check if it is running a job. </p>\n\n<p>I was considering using the <a href=\"http://javadoc.jenkins-ci.org/hudson/slaves/SlaveComputer.html\" rel=\"noreferrer\">API</a> function <a href=\"http://javadoc.jenkins-ci.org/hudson/slaves/SlaveComputer.html#setAcceptingTasks%28boolean%29\" rel=\"noreferrer\">setAcceptingTasks(false)</a> to mark slave as running a Job so that when next time I query using <a href=\"http://javadoc.jenkins-ci.org/hudson/slaves/SlaveComputer.html#isAcceptingTasks%28%29\" rel=\"noreferrer\">isAcceptingTasks()</a>, I get false and hence do not launch job on that slave.</p>\n\n<p>But I would rather have the slave mark itself. </p>\n\n<p><a href=\"http://javadoc.jenkins-ci.org/hudson/slaves/SlaveComputer.html#taskAccepted%28hudson.model.Executor,%20hudson.model.Queue.Task%29\" rel=\"noreferrer\">taskAccepted()</a> and <a href=\"http://javadoc.jenkins-ci.org/hudson/slaves/SlaveComputer.html#taskCompleted%28hudson.model.Executor,%20hudson.model.Queue.Task,%20long%29\" rel=\"noreferrer\">taskCompleted()</a> come to mind.  <strike>I can call the setAcceptingTasks to false once task is accepted and on completion of tasks set isAcceptingTasks to true once again.  </p>\n\n<p>But I am not sure of the arguments these functions take e.g executor and task. And where do these function calls fit in a groovy script.</strike></p>\n\n<p>I am not sure if my assumption of task is equivalent to a job is true or not.</p>\n\n<p>This is what I have got till now:</p>\n\n<pre><code>import hudson.model.*\ndef requiredNodes = ['Slave1', 'Slave2', 'Slave3'];\ndef status = 0;\nfor (node in requiredNodes) \n{\n      println \"Searching for $node\";\n      slave = Hudson.instance.slaves.find({it.name == node});\n      if (slave != null)\n       {\n        computer = slave.getComputer();\n        if (computer.isOffline())\n         {\n           println \"Error! $node is offline.\";\n           status = 1;\n         }\n         else \n         {\n           println \"OK: $node is online\";\n           if(computer.isAcceptingTasks())\n           {\n              //Launch job\n           }\n         }\n       }\n       else \n       {\n         println \"Slave $node not found!\";\n         status = 1;\n       }\n}\nstatus;\n</code></pre>\n\n<p>EDIT: Number of executors on each slave is 1.</p>\n"},{"tags":["java","spring","spring-mvc"],"comments":[{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1675236670,"post_id":75302380,"comment_id":132882621,"body_markdown":"Don&#39;t. You shoud be upgrading **all** your spring dependencies and not just 1, all the versions of the `org.springframework` dependencies have to match else you might (and will) run into weird issues (like this one).","body":"Don&#39;t. You shoud be upgrading <b>all</b> your spring dependencies and not just 1, all the versions of the <code>org.springframework</code> dependencies have to match else you might (and will) run into weird issues (like this one)."}],"answers":[{"tags":[],"owner":{"account_id":16744354,"reputation":504,"user_id":12103109,"display_name":"CaptainAye"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1675203303,"creation_date":1675198531,"answer_id":75303039,"question_id":75302380,"body_markdown":"In spring 5.3.x `ResponseStatusException` used to have `getStatus()` available directly as you can see in the java doc https://docs.spring.io/spring-framework/docs/5.3.x/javadoc-api/\r\n\r\nIn version 6.0.x it was changed and `ResponseStatusException` extends from `ErrorResponseException` which does not have the `getStatus()` method directly available.\r\n\r\nInstead, you need to call `responseStatusException.getBody().getStatus()` in order to access the status correctly. Check the java doc for details https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/web/ErrorResponseException.html\r\n\r\nFrom your question it is not clear if you access status directly in your code or if this code is part of some library. If it is part of the library, then you would need to upgrade the version of the library to the one compatible with spring 6.","title":"Got error after upgrade spring-web version","body":"<p>In spring 5.3.x <code>ResponseStatusException</code> used to have <code>getStatus()</code> available directly as you can see in the java doc <a href=\"https://docs.spring.io/spring-framework/docs/5.3.x/javadoc-api/\" rel=\"nofollow noreferrer\">https://docs.spring.io/spring-framework/docs/5.3.x/javadoc-api/</a></p>\n<p>In version 6.0.x it was changed and <code>ResponseStatusException</code> extends from <code>ErrorResponseException</code> which does not have the <code>getStatus()</code> method directly available.</p>\n<p>Instead, you need to call <code>responseStatusException.getBody().getStatus()</code> in order to access the status correctly. Check the java doc for details <a href=\"https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/web/ErrorResponseException.html\" rel=\"nofollow noreferrer\">https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/web/ErrorResponseException.html</a></p>\n<p>From your question it is not clear if you access status directly in your code or if this code is part of some library. If it is part of the library, then you would need to upgrade the version of the library to the one compatible with spring 6.</p>\n"}],"owner":{"account_id":27415027,"reputation":49,"user_id":20914383,"display_name":"EXEC1"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":967,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":75303039,"answer_count":1,"score":2,"last_activity_date":1675203303,"creation_date":1675194284,"question_id":75302380,"body_markdown":"I got error after upgrade the spring-web version to after 6.0.0, previous is 5.3.20\r\n```\r\n &lt;dependency&gt;\r\n        &lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n        &lt;artifactId&gt;spring-web&lt;/artifactId&gt;\r\n        &lt;version&gt;6.0.4&lt;/version&gt;\r\n      &lt;/dependency&gt;\r\n```\r\n\r\n```\r\nCannot access &#39;status&#39;: it is invisible (private in a supertype) in &#39;ResponseStatusException&#39;\r\n\r\nis ResponseStatusException -&gt; {\r\n                    serverWebExchange.response.statusCode = throwable.status\r\n         }\r\n```","title":"Got error after upgrade spring-web version","body":"<p>I got error after upgrade the spring-web version to after 6.0.0, previous is 5.3.20</p>\n<pre><code> &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-web&lt;/artifactId&gt;\n        &lt;version&gt;6.0.4&lt;/version&gt;\n      &lt;/dependency&gt;\n</code></pre>\n<pre><code>Cannot access 'status': it is invisible (private in a supertype) in 'ResponseStatusException'\n\nis ResponseStatusException -&gt; {\n                    serverWebExchange.response.statusCode = throwable.status\n         }\n</code></pre>\n"},{"tags":["java","spring","spring-boot","stomp","spring-websocket"],"answers":[{"tags":[],"owner":{"account_id":15525089,"reputation":99,"user_id":11200149,"display_name":"NoobSailboat"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1675202867,"creation_date":1675202867,"answer_id":75303649,"question_id":75302571,"body_markdown":"Using Lazy Initialization fixed the issue although it feels like a bandaid solution. I&#39;m not sure if there is another better way since I&#39;m new to Spring.\r\n\r\n```\r\n@Configuration\r\n@EnableWebSocketMessageBroker\r\npublic class WebSocketConfig implements WebSocketMessageBrokerConfigurer {\r\n\r\n\tprivate TopicSubscriptionInterceptor topicSubscriptionInterceptor;\r\n\t\r\n\t@Autowired\r\n\tpublic WebSocketConfig(@Lazy TopicSubscriptionInterceptor topicSubscriptionInterceptor) {\r\n\t\tthis.topicSubscriptionInterceptor = topicSubscriptionInterceptor;\r\n\t}\r\n\r\n    ...\r\n    \r\n    @Override\r\n    public void configureClientInboundChannel(ChannelRegistration registration) {\r\n        registration.interceptors(topicSubscriptionInterceptor);\r\n    }\r\n}\r\n\r\n```\r\n\r\n\r\n  [1]: https://github.com/spring-projects/spring-framework/issues/27746","title":"Spring WebSocket: Use SimpUserRegistry inside of ChannelInterceptor without creating a dependency cycle","body":"<p>Using Lazy Initialization fixed the issue although it feels like a bandaid solution. I'm not sure if there is another better way since I'm new to Spring.</p>\n<pre><code>@Configuration\n@EnableWebSocketMessageBroker\npublic class WebSocketConfig implements WebSocketMessageBrokerConfigurer {\n\n    private TopicSubscriptionInterceptor topicSubscriptionInterceptor;\n    \n    @Autowired\n    public WebSocketConfig(@Lazy TopicSubscriptionInterceptor topicSubscriptionInterceptor) {\n        this.topicSubscriptionInterceptor = topicSubscriptionInterceptor;\n    }\n\n    ...\n    \n    @Override\n    public void configureClientInboundChannel(ChannelRegistration registration) {\n        registration.interceptors(topicSubscriptionInterceptor);\n    }\n}\n\n</code></pre>\n"}],"owner":{"account_id":15525089,"reputation":99,"user_id":11200149,"display_name":"NoobSailboat"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":333,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75303649,"answer_count":1,"score":0,"last_activity_date":1675202867,"creation_date":1675195511,"question_id":75302571,"body_markdown":"I aim to use SimpUserRegistry to check how many users are subscribed to a topic to limit the number of subscriptions. To test my code I used the basic https://spring.io/guides/gs/messaging-stomp-websocket/ project.\r\n\r\nHere are my only changes to this project: \r\n\r\n    @Configuration\r\n    @EnableWebSocketMessageBroker\r\n    public class WebSocketConfig implements WebSocketMessageBrokerConfigurer {\r\n        @Autowired\r\n        private TopicSubscriptionInterceptor topicSubscriptionInterceptor\r\n        ...\r\n    \t\r\n    \t@Override\r\n    \tpublic void configureClientInboundChannel(ChannelRegistration registration) {\r\n    \t\tregistration.interceptors(topicSubscriptionInterceptor);\r\n    \t}\r\n    }\r\n//--------------------------------------------------------------------------------------\r\n    \r\n    @Component\r\n    public class TopicSubscriptionInterceptor implements ChannelInterceptor {\r\n    \t\r\n    \t@Autowired \r\n    \tprivate SimpUserRegistry userRegistry;\r\n    \t\r\n        @Override\r\n        public Message&lt;?&gt; preSend(Message&lt;?&gt; message, MessageChannel channel){    \t    \t\r\n            // ... use SimpUserRegistry to check amount of users subscribed to a topic and whether \r\n            // or not to allow a subscription (throw exception/null)\r\n    \r\n        }\r\n//-----------------------------------------------------------------------------------------\r\n\r\nI&#39;ve tried to just pass a `new TopicSubscriptionInterceptor()` instead of adding it as a dependency using @Autowired but that obviously made all dependencies in TopicSubscriptionInterceptor null.\r\n\r\n\r\n//---------------------------------------------------\r\n\r\nDependency Cycle:\r\n\r\n```\r\n┌─────┐\r\n|  webSocketConfig (field private com.xxx.yyy.interceptor.TopicSubscriptionInterceptor com.xxx.yyy.config.WebSocketConfig.topicSubscriptionInterceptor)\r\n↑     ↓\r\n|  topicSubscriptionInterceptor (field private org.springframework.messaging.simp.user.SimpUserRegistry com.xxx.yyy.interceptor.TopicSubscriptionInterceptor.userRegistry)\r\n↑     ↓\r\n|  org.springframework.web.socket.config.annotation.DelegatingWebSocketMessageBrokerConfiguration\r\n└─────┘\r\n\r\n```\r\n\r\n\r\nHere&#39;s what I tried Edit(1): \r\n```java\r\n    @Configuration\r\n    @EnableWebSocketMessageBroker\r\n    public class WebSocketConfig implements WebSocketMessageBrokerConfigurer {\r\n        @Bean\r\n\t    public TopicSubscriptionInterceptor \r\n            myTopicSubscriptionInterceptor(){\r\n\t\t        return new TopicSubscriptionInterceptor();\r\n\t    }\r\n\r\n        ...\r\n    \t\r\n    \t@Override\r\n    \tpublic void configureClientInboundChannel(ChannelRegistration registration) {\r\n    \t\tregistration.interceptors(myTopicSubscriptionInterceptor());\r\n    \t}\r\n    }\r\n```","title":"Spring WebSocket: Use SimpUserRegistry inside of ChannelInterceptor without creating a dependency cycle","body":"<p>I aim to use SimpUserRegistry to check how many users are subscribed to a topic to limit the number of subscriptions. To test my code I used the basic <a href=\"https://spring.io/guides/gs/messaging-stomp-websocket/\" rel=\"nofollow noreferrer\">https://spring.io/guides/gs/messaging-stomp-websocket/</a> project.</p>\n<p>Here are my only changes to this project:</p>\n<pre><code>@Configuration\n@EnableWebSocketMessageBroker\npublic class WebSocketConfig implements WebSocketMessageBrokerConfigurer {\n    @Autowired\n    private TopicSubscriptionInterceptor topicSubscriptionInterceptor\n    ...\n    \n    @Override\n    public void configureClientInboundChannel(ChannelRegistration registration) {\n        registration.interceptors(topicSubscriptionInterceptor);\n    }\n}\n</code></pre>\n<p>//--------------------------------------------------------------------------------------</p>\n<pre><code>@Component\npublic class TopicSubscriptionInterceptor implements ChannelInterceptor {\n    \n    @Autowired \n    private SimpUserRegistry userRegistry;\n    \n    @Override\n    public Message&lt;?&gt; preSend(Message&lt;?&gt; message, MessageChannel channel){              \n        // ... use SimpUserRegistry to check amount of users subscribed to a topic and whether \n        // or not to allow a subscription (throw exception/null)\n\n    }\n</code></pre>\n<p>//-----------------------------------------------------------------------------------------</p>\n<p>I've tried to just pass a <code>new TopicSubscriptionInterceptor()</code> instead of adding it as a dependency using @Autowired but that obviously made all dependencies in TopicSubscriptionInterceptor null.</p>\n<p>//---------------------------------------------------</p>\n<p>Dependency Cycle:</p>\n<pre><code>┌─────┐\n|  webSocketConfig (field private com.xxx.yyy.interceptor.TopicSubscriptionInterceptor com.xxx.yyy.config.WebSocketConfig.topicSubscriptionInterceptor)\n↑     ↓\n|  topicSubscriptionInterceptor (field private org.springframework.messaging.simp.user.SimpUserRegistry com.xxx.yyy.interceptor.TopicSubscriptionInterceptor.userRegistry)\n↑     ↓\n|  org.springframework.web.socket.config.annotation.DelegatingWebSocketMessageBrokerConfiguration\n└─────┘\n\n</code></pre>\n<p>Here's what I tried Edit(1):</p>\n<pre class=\"lang-java prettyprint-override\"><code>    @Configuration\n    @EnableWebSocketMessageBroker\n    public class WebSocketConfig implements WebSocketMessageBrokerConfigurer {\n        @Bean\n        public TopicSubscriptionInterceptor \n            myTopicSubscriptionInterceptor(){\n                return new TopicSubscriptionInterceptor();\n        }\n\n        ...\n        \n        @Override\n        public void configureClientInboundChannel(ChannelRegistration registration) {\n            registration.interceptors(myTopicSubscriptionInterceptor());\n        }\n    }\n</code></pre>\n"},{"tags":["java","spring","spring-boot","pagination","deserialization"],"comments":[{"owner":{"account_id":7358121,"reputation":4925,"user_id":5602214,"display_name":"Prashant"},"score":1,"creation_date":1537853116,"post_id":52490399,"comment_id":91922822,"body_markdown":"Please provide the text for the exception. (Please refer: http://idownvotedbecau.se/imageofanexception/)","body":"Please provide the text for the exception. (Please refer: <a href=\"http://idownvotedbecau.se/imageofanexception/\" rel=\"nofollow noreferrer\">idownvotedbecau.se/imageofanexception</a>)"},{"owner":{"display_name":"user10367961"},"score":0,"creation_date":1537863656,"post_id":52490399,"comment_id":91927781,"body_markdown":"A workaround would be not exposing the `Page` as the response type from the controller endpoint and returning a List&lt;YourEntity&gt; instead. The `Page` has a method `getContent()` that you can invoke for the conversion from Page to List&lt;YourEntity&gt;. As I said, not a fix but a workaround.","body":"A workaround would be not exposing the <code>Page</code> as the response type from the controller endpoint and returning a List&lt;YourEntity&gt; instead. The <code>Page</code> has a method <code>getContent()</code> that you can invoke for the conversion from Page to List&lt;YourEntity&gt;. As I said, not a fix but a workaround."},{"owner":{"account_id":390125,"reputation":4499,"user_id":749979,"accept_rate":100,"display_name":"GSUgambit"},"score":0,"creation_date":1537930078,"post_id":52490399,"comment_id":91958568,"body_markdown":"@alexrolea i actually want to return the page though not just the list so if you are in a web client you can tab thru pages","body":"@alexrolea i actually want to return the page though not just the list so if you are in a web client you can tab thru pages"},{"owner":{"account_id":390125,"reputation":4499,"user_id":749979,"accept_rate":100,"display_name":"GSUgambit"},"score":0,"creation_date":1537930477,"post_id":52490399,"comment_id":91958653,"body_markdown":"@Prashant have removed the picture and added the text","body":"@Prashant have removed the picture and added the text"},{"owner":{"display_name":"user10367961"},"score":0,"creation_date":1537931647,"post_id":52490399,"comment_id":91958910,"body_markdown":"@GSUgambit if the client tracks something like a `pageIndex` and `pageSize` on his side and sends the two parameters with the request you don&#39;t really need to expose the `Page` to the client. But, as I said, this is more of a workaround and less of a fix :)","body":"@GSUgambit if the client tracks something like a <code>pageIndex</code> and <code>pageSize</code> on his side and sends the two parameters with the request you don&#39;t really need to expose the <code>Page</code> to the client. But, as I said, this is more of a workaround and less of a fix :)"},{"owner":{"account_id":390125,"reputation":4499,"user_id":749979,"accept_rate":100,"display_name":"GSUgambit"},"score":0,"creation_date":1537934039,"post_id":52490399,"comment_id":91959451,"body_markdown":"@alexrolea if you don&#39;t send back the page, the client doesnt know the number of pages etc","body":"@alexrolea if you don&#39;t send back the page, the client doesnt know the number of pages etc"},{"owner":{"display_name":"user10367961"},"score":0,"creation_date":1537934492,"post_id":52490399,"comment_id":91959543,"body_markdown":"@GSUgambit if you have a non-GUI client you are right. Most GUI clients track that information (`pageIndex` and `pageSize`) by the table state in which you would display `ObservationSet`. There is usually a dropdown with `items per page`, with predefined sizes (this maps to the `pageSize`) and buttons with some state (`page 0`, `page1`, `next`, `previous`, `first`, `last`) which map to the `pageIndex`. The index button states are computed by the GUI, by submitting a count query first in order to determine how many pages are there (so you can go to the last page without iterating everything).","body":"@GSUgambit if you have a non-GUI client you are right. Most GUI clients track that information (<code>pageIndex</code> and <code>pageSize</code>) by the table state in which you would display <code>ObservationSet</code>. There is usually a dropdown with <code>items per page</code>, with predefined sizes (this maps to the <code>pageSize</code>) and buttons with some state (<code>page 0</code>, <code>page1</code>, <code>next</code>, <code>previous</code>, <code>first</code>, <code>last</code>) which map to the <code>pageIndex</code>. The index button states are computed by the GUI, by submitting a count query first in order to determine how many pages are there (so you can go to the last page without iterating everything)."},{"owner":{"account_id":390125,"reputation":4499,"user_id":749979,"accept_rate":100,"display_name":"GSUgambit"},"score":1,"creation_date":1537935482,"post_id":52490399,"comment_id":91959757,"body_markdown":"yeah but if you hide the page objects &quot;numberOfPages&quot; etc from the response the UI would not know how many possible pages there are.\nYou could hard code how many elements you want to show per page but you could not know total page numbers which wouldn&#39;t allow you to show page1...page127 etc., you would basically only know the page numbers that exist after you make the calls and get back a different number of elements\nI found the answer on how to make this work though now","body":"yeah but if you hide the page objects &quot;numberOfPages&quot; etc from the response the UI would not know how many possible pages there are. You could hard code how many elements you want to show per page but you could not know total page numbers which wouldn&#39;t allow you to show page1...page127 etc., you would basically only know the page numbers that exist after you make the calls and get back a different number of elements I found the answer on how to make this work though now"},{"owner":{"account_id":4769045,"reputation":10243,"user_id":3854385,"display_name":"Loren"},"score":0,"creation_date":1548773351,"post_id":52490399,"comment_id":95657296,"body_markdown":"Possible duplicate of [Spring RestTemplate with paginated API](https://stackoverflow.com/questions/34647303/spring-resttemplate-with-paginated-api)","body":"Possible duplicate of <a href=\"https://stackoverflow.com/questions/34647303/spring-resttemplate-with-paginated-api\">Spring RestTemplate with paginated API</a>"},{"owner":{"account_id":6613669,"reputation":2911,"user_id":5107769,"display_name":"Aekansh Kansal"},"score":0,"creation_date":1626909803,"post_id":52490399,"comment_id":121020693,"body_markdown":"Does this answer your question? [How to consume Page&lt;Entity&gt; response using Spring RestTemplate](https://stackoverflow.com/questions/34099559/how-to-consume-pageentity-response-using-spring-resttemplate)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/34099559/how-to-consume-pageentity-response-using-spring-resttemplate\">How to consume Page&lt;Entity&gt; response using Spring RestTemplate</a>"}],"answers":[{"tags":[],"owner":{"account_id":390125,"reputation":4499,"user_id":749979,"accept_rate":100,"display_name":"GSUgambit"},"down_vote_count":0,"up_vote_count":52,"is_accepted":true,"score":52,"last_activity_date":1537935594,"creation_date":1537935594,"answer_id":52509886,"question_id":52490399,"body_markdown":"Found the answer in the different post on here. It was not the accepted answer which it should be\r\n\r\nhttps://stackoverflow.com/questions/34647303/spring-resttemplate-with-paginated-api/46847429#46847429\r\n\r\nthe answer by @rvheddeg is correct. You just need to put @JsonCreator and provide a constructor with all the properties, here is my RestResponsePage class that fixes the issue.\r\n\r\n    class RestResponsePage&lt;T&gt; extends PageImpl&lt;T&gt; {\r\n    \r\n        private static final long serialVersionUID = 3248189030448292002L;\r\n    \r\n        @JsonCreator(mode = JsonCreator.Mode.PROPERTIES)\r\n        public RestResponsePage(@JsonProperty(&quot;content&quot;) List&lt;T&gt; content, @JsonProperty(&quot;number&quot;) int number, @JsonProperty(&quot;size&quot;) int size,\r\n                        @JsonProperty(&quot;totalElements&quot;) Long totalElements, @JsonProperty(&quot;pageable&quot;) JsonNode pageable, @JsonProperty(&quot;last&quot;) boolean last,\r\n                        @JsonProperty(&quot;totalPages&quot;) int totalPages, @JsonProperty(&quot;sort&quot;) JsonNode sort, @JsonProperty(&quot;first&quot;) boolean first,\r\n                        @JsonProperty(&quot;numberOfElements&quot;) int numberOfElements) {\r\n            super(content, PageRequest.of(number, size), totalElements);\r\n        }\r\n    \r\n        public RestResponsePage(List&lt;T&gt; content, Pageable pageable, long total) {\r\n            super(content, pageable, total);\r\n        }\r\n    \r\n        public RestResponsePage(List&lt;T&gt; content) {\r\n            super(content);\r\n        }\r\n    \r\n        public RestResponsePage() {\r\n            super(new ArrayList&lt;T&gt;());\r\n        }\r\n    \r\n    }","title":"Spring Boot Page Deserialization - PageImpl No constructor","body":"<p>Found the answer in the different post on here. It was not the accepted answer which it should be</p>\n\n<p><a href=\"https://stackoverflow.com/questions/34647303/spring-resttemplate-with-paginated-api/46847429#46847429\">Spring RestTemplate with paginated API</a></p>\n\n<p>the answer by @rvheddeg is correct. You just need to put @JsonCreator and provide a constructor with all the properties, here is my RestResponsePage class that fixes the issue.</p>\n\n<pre><code>class RestResponsePage&lt;T&gt; extends PageImpl&lt;T&gt; {\n\n    private static final long serialVersionUID = 3248189030448292002L;\n\n    @JsonCreator(mode = JsonCreator.Mode.PROPERTIES)\n    public RestResponsePage(@JsonProperty(\"content\") List&lt;T&gt; content, @JsonProperty(\"number\") int number, @JsonProperty(\"size\") int size,\n                    @JsonProperty(\"totalElements\") Long totalElements, @JsonProperty(\"pageable\") JsonNode pageable, @JsonProperty(\"last\") boolean last,\n                    @JsonProperty(\"totalPages\") int totalPages, @JsonProperty(\"sort\") JsonNode sort, @JsonProperty(\"first\") boolean first,\n                    @JsonProperty(\"numberOfElements\") int numberOfElements) {\n        super(content, PageRequest.of(number, size), totalElements);\n    }\n\n    public RestResponsePage(List&lt;T&gt; content, Pageable pageable, long total) {\n        super(content, pageable, total);\n    }\n\n    public RestResponsePage(List&lt;T&gt; content) {\n        super(content);\n    }\n\n    public RestResponsePage() {\n        super(new ArrayList&lt;T&gt;());\n    }\n\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4769045,"reputation":10243,"user_id":3854385,"display_name":"Loren"},"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1548773242,"creation_date":1548773242,"answer_id":54423605,"question_id":52490399,"body_markdown":"Had to make a small change to ignore the unknown property of empty:\r\n\r\n```\r\npackage ...helper;\r\n\r\nimport com.fasterxml.jackson.annotation.JsonCreator;\r\nimport com.fasterxml.jackson.annotation.JsonIgnoreProperties;\r\nimport com.fasterxml.jackson.annotation.JsonProperty;\r\nimport com.fasterxml.jackson.databind.JsonNode;\r\nimport org.springframework.data.domain.PageImpl;\r\nimport org.springframework.data.domain.PageRequest;\r\nimport org.springframework.data.domain.Pageable;\r\n\r\nimport java.util.ArrayList;\r\nimport java.util.List;\r\n\r\n@JsonIgnoreProperties(ignoreUnknown = true)\r\npublic class RestResponsePage&lt;T&gt; extends PageImpl&lt;T&gt; {\r\n    @JsonCreator(mode = JsonCreator.Mode.PROPERTIES)\r\n    public RestResponsePage(@JsonProperty(&quot;content&quot;) List&lt;T&gt; content,\r\n                            @JsonProperty(&quot;number&quot;) int number,\r\n                            @JsonProperty(&quot;size&quot;) int size,\r\n                            @JsonProperty(&quot;totalElements&quot;) Long totalElements,\r\n                            @JsonProperty(&quot;pageable&quot;) JsonNode pageable,\r\n                            @JsonProperty(&quot;last&quot;) boolean last,\r\n                            @JsonProperty(&quot;totalPages&quot;) int totalPages,\r\n                            @JsonProperty(&quot;sort&quot;) JsonNode sort,\r\n                            @JsonProperty(&quot;first&quot;) boolean first,\r\n                            @JsonProperty(&quot;numberOfElements&quot;) int numberOfElements) {\r\n\r\n        super(content, PageRequest.of(number, size), totalElements);\r\n    }\r\n\r\n    public RestResponsePage(List&lt;T&gt; content, Pageable pageable, long total) {\r\n        super(content, pageable, total);\r\n    }\r\n\r\n    public RestResponsePage(List&lt;T&gt; content) {\r\n        super(content);\r\n    }\r\n\r\n    public RestResponsePage() {\r\n        super(new ArrayList&lt;&gt;());\r\n    }\r\n}\r\n```","title":"Spring Boot Page Deserialization - PageImpl No constructor","body":"<p>Had to make a small change to ignore the unknown property of empty:</p>\n\n<pre><code>package ...helper;\n\nimport com.fasterxml.jackson.annotation.JsonCreator;\nimport com.fasterxml.jackson.annotation.JsonIgnoreProperties;\nimport com.fasterxml.jackson.annotation.JsonProperty;\nimport com.fasterxml.jackson.databind.JsonNode;\nimport org.springframework.data.domain.PageImpl;\nimport org.springframework.data.domain.PageRequest;\nimport org.springframework.data.domain.Pageable;\n\nimport java.util.ArrayList;\nimport java.util.List;\n\n@JsonIgnoreProperties(ignoreUnknown = true)\npublic class RestResponsePage&lt;T&gt; extends PageImpl&lt;T&gt; {\n    @JsonCreator(mode = JsonCreator.Mode.PROPERTIES)\n    public RestResponsePage(@JsonProperty(\"content\") List&lt;T&gt; content,\n                            @JsonProperty(\"number\") int number,\n                            @JsonProperty(\"size\") int size,\n                            @JsonProperty(\"totalElements\") Long totalElements,\n                            @JsonProperty(\"pageable\") JsonNode pageable,\n                            @JsonProperty(\"last\") boolean last,\n                            @JsonProperty(\"totalPages\") int totalPages,\n                            @JsonProperty(\"sort\") JsonNode sort,\n                            @JsonProperty(\"first\") boolean first,\n                            @JsonProperty(\"numberOfElements\") int numberOfElements) {\n\n        super(content, PageRequest.of(number, size), totalElements);\n    }\n\n    public RestResponsePage(List&lt;T&gt; content, Pageable pageable, long total) {\n        super(content, pageable, total);\n    }\n\n    public RestResponsePage(List&lt;T&gt; content) {\n        super(content);\n    }\n\n    public RestResponsePage() {\n        super(new ArrayList&lt;&gt;());\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1915903,"reputation":2018,"user_id":1728511,"accept_rate":80,"display_name":"Mikhail Kopylov"},"down_vote_count":1,"up_vote_count":15,"is_accepted":false,"score":14,"last_activity_date":1550380923,"creation_date":1550380923,"answer_id":54730375,"question_id":52490399,"body_markdown":"There&#39;s a simplier way to do it - to create and register custom deserializator for Page interface.\r\nSo the usage will be straightforward:\r\n\r\n    //Catalog is the paged entity\r\n    Page&lt;Catalog&gt; page = objectMapper.readValue(content, new TypeReference&lt;Page&lt;Catalog&gt;&gt;() {});\r\n\r\n\r\nObjectMapper configuration:\r\n\r\n    ObjectMapper objectMapper= new ObjectMapper();\r\n    objectMapper.registerModule(new PageModule());\r\n\r\n\r\nPageModule:\r\n\r\n    public class PageModule extends SimpleModule {\r\n        private static final long serialVersionUID = 1L;\r\n\r\n        public PageModule() {\r\n            addDeserializer(Page.class, new PageDeserializer());\r\n        }\r\n    }\r\n\r\nPageDeserializer:\r\n\r\n    public class PageDeserializer extends JsonDeserializer&lt;Page&lt;?&gt;&gt; implements ContextualDeserializer {\r\n        private static final String CONTENT = &quot;content&quot;;\r\n        private static final String NUMBER = &quot;number&quot;;\r\n        private static final String SIZE = &quot;size&quot;;\r\n        private static final String TOTAL_ELEMENTS = &quot;totalElements&quot;;\r\n        private JavaType valueType;\r\n    \r\n        @Override\r\n        public Page&lt;?&gt; deserialize(JsonParser p, DeserializationContext ctxt) throws IOException {\r\n            final CollectionType valuesListType = ctxt.getTypeFactory().constructCollectionType(List.class, valueType);\r\n    \r\n            List&lt;?&gt; list = new ArrayList&lt;&gt;();\r\n            int pageNumber = 0;\r\n            int pageSize = 0;\r\n            long total = 0;\r\n            if (p.isExpectedStartObjectToken()) {\r\n                p.nextToken();\r\n                if (p.hasTokenId(JsonTokenId.ID_FIELD_NAME)) {\r\n                    String propName = p.getCurrentName();\r\n                    do {\r\n                        p.nextToken();\r\n                        switch (propName) {\r\n                            case CONTENT:\r\n                                list = ctxt.readValue(p, valuesListType);\r\n                                break;\r\n                            case NUMBER:\r\n                                pageNumber = ctxt.readValue(p, Integer.class);\r\n                                break;\r\n                            case SIZE:\r\n                                pageSize = ctxt.readValue(p, Integer.class);\r\n                                break;\r\n                            case TOTAL_ELEMENTS:\r\n                                total = ctxt.readValue(p, Long.class);\r\n                                break;\r\n                            default:\r\n                                p.skipChildren();\r\n                                break;\r\n                        }\r\n                    } while (((propName = p.nextFieldName())) != null);\r\n                } else {\r\n                    ctxt.handleUnexpectedToken(handledType(), p);\r\n                }\r\n            } else {\r\n                ctxt.handleUnexpectedToken(handledType(), p);\r\n            }\r\n            \r\n            //Note that Sort field of Page is ignored here.\r\n            //Feel free to add more switch cases above to deserialize it as well.  \r\n            return new PageImpl&lt;&gt;(list, PageRequest.of(pageNumber, pageSize), total);\r\n        }\r\n    \r\n        /**\r\n         * This is the main point here.\r\n         * The PageDeserializer is created for each specific deserialization with concrete generic parameter type of Page.\r\n         */\r\n        @Override\r\n        public JsonDeserializer&lt;?&gt; createContextual(DeserializationContext ctxt, BeanProperty property) {\r\n            //This is the Page actually\r\n            final JavaType wrapperType = ctxt.getContextualType();\r\n            final PageDeserializer deserializer = new PageDeserializer();\r\n            //This is the parameter of Page\r\n            deserializer.valueType = wrapperType.containedType(0);\r\n            return deserializer;\r\n        }\r\n    }\r\n\r\n","title":"Spring Boot Page Deserialization - PageImpl No constructor","body":"<p>There's a simplier way to do it - to create and register custom deserializator for Page interface.\nSo the usage will be straightforward:</p>\n\n<pre><code>//Catalog is the paged entity\nPage&lt;Catalog&gt; page = objectMapper.readValue(content, new TypeReference&lt;Page&lt;Catalog&gt;&gt;() {});\n</code></pre>\n\n<p>ObjectMapper configuration:</p>\n\n<pre><code>ObjectMapper objectMapper= new ObjectMapper();\nobjectMapper.registerModule(new PageModule());\n</code></pre>\n\n<p>PageModule:</p>\n\n<pre><code>public class PageModule extends SimpleModule {\n    private static final long serialVersionUID = 1L;\n\n    public PageModule() {\n        addDeserializer(Page.class, new PageDeserializer());\n    }\n}\n</code></pre>\n\n<p>PageDeserializer:</p>\n\n<pre><code>public class PageDeserializer extends JsonDeserializer&lt;Page&lt;?&gt;&gt; implements ContextualDeserializer {\n    private static final String CONTENT = \"content\";\n    private static final String NUMBER = \"number\";\n    private static final String SIZE = \"size\";\n    private static final String TOTAL_ELEMENTS = \"totalElements\";\n    private JavaType valueType;\n\n    @Override\n    public Page&lt;?&gt; deserialize(JsonParser p, DeserializationContext ctxt) throws IOException {\n        final CollectionType valuesListType = ctxt.getTypeFactory().constructCollectionType(List.class, valueType);\n\n        List&lt;?&gt; list = new ArrayList&lt;&gt;();\n        int pageNumber = 0;\n        int pageSize = 0;\n        long total = 0;\n        if (p.isExpectedStartObjectToken()) {\n            p.nextToken();\n            if (p.hasTokenId(JsonTokenId.ID_FIELD_NAME)) {\n                String propName = p.getCurrentName();\n                do {\n                    p.nextToken();\n                    switch (propName) {\n                        case CONTENT:\n                            list = ctxt.readValue(p, valuesListType);\n                            break;\n                        case NUMBER:\n                            pageNumber = ctxt.readValue(p, Integer.class);\n                            break;\n                        case SIZE:\n                            pageSize = ctxt.readValue(p, Integer.class);\n                            break;\n                        case TOTAL_ELEMENTS:\n                            total = ctxt.readValue(p, Long.class);\n                            break;\n                        default:\n                            p.skipChildren();\n                            break;\n                    }\n                } while (((propName = p.nextFieldName())) != null);\n            } else {\n                ctxt.handleUnexpectedToken(handledType(), p);\n            }\n        } else {\n            ctxt.handleUnexpectedToken(handledType(), p);\n        }\n\n        //Note that Sort field of Page is ignored here.\n        //Feel free to add more switch cases above to deserialize it as well.  \n        return new PageImpl&lt;&gt;(list, PageRequest.of(pageNumber, pageSize), total);\n    }\n\n    /**\n     * This is the main point here.\n     * The PageDeserializer is created for each specific deserialization with concrete generic parameter type of Page.\n     */\n    @Override\n    public JsonDeserializer&lt;?&gt; createContextual(DeserializationContext ctxt, BeanProperty property) {\n        //This is the Page actually\n        final JavaType wrapperType = ctxt.getContextualType();\n        final PageDeserializer deserializer = new PageDeserializer();\n        //This is the parameter of Page\n        deserializer.valueType = wrapperType.containedType(0);\n        return deserializer;\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":11218260,"reputation":377,"user_id":8230136,"display_name":"steven"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1595302092,"creation_date":1595302092,"answer_id":63006892,"question_id":52490399,"body_markdown":"In fact, spring mvc serialize object by jackson, so inject a pageImp serializer should resolve the problem.\r\n\r\n**step 1**:  PageSerializer class :\r\n\r\n\r\n \r\n\r\n       public class PageSerializer extends StdSerializer&lt;PageImpl&gt; {\r\n    \r\n        public PageSerializer() {\r\n            super(PageImpl.class);\r\n        }\r\n    \r\n        @Override\r\n        public void serialize(PageImpl value, JsonGenerator gen, SerializerProvider provider) throws IOException {\r\n            gen.writeStartObject();\r\n            gen.writeNumberField(&quot;number&quot;, value.getNumber());\r\n            gen.writeNumberField(&quot;numberOfElements&quot;, value.getNumberOfElements());\r\n            gen.writeNumberField(&quot;totalElements&quot;, value.getTotalElements());\r\n            gen.writeNumberField(&quot;totalPages&quot;, value.getTotalPages());\r\n            gen.writeNumberField(&quot;size&quot;, value.getSize());\r\n            gen.writeFieldName(&quot;content&quot;);\r\n            provider.defaultSerializeValue(value.getContent(), gen);\r\n            gen.writeEndObject();\r\n        }\r\n     }\r\n\r\n**step 2**: inject jackson Moudle:\r\n\r\n    @Bean\r\n    public Module jacksonPageWithJsonViewModule() {\r\n        SimpleModule module = new SimpleModule(&quot;jackson-page-with-jsonview&quot;,\r\n            unknownVersion());\r\n        module.addSerializer(PageImpl.class, new PageSerializer());\r\n        return module;\r\n    }\r\n\r\nok, end.\r\n\r\n\r\n\r\n","title":"Spring Boot Page Deserialization - PageImpl No constructor","body":"<p>In fact, spring mvc serialize object by jackson, so inject a pageImp serializer should resolve the problem.</p>\n<p><strong>step 1</strong>:  PageSerializer class :</p>\n<pre><code>   public class PageSerializer extends StdSerializer&lt;PageImpl&gt; {\n\n    public PageSerializer() {\n        super(PageImpl.class);\n    }\n\n    @Override\n    public void serialize(PageImpl value, JsonGenerator gen, SerializerProvider provider) throws IOException {\n        gen.writeStartObject();\n        gen.writeNumberField(&quot;number&quot;, value.getNumber());\n        gen.writeNumberField(&quot;numberOfElements&quot;, value.getNumberOfElements());\n        gen.writeNumberField(&quot;totalElements&quot;, value.getTotalElements());\n        gen.writeNumberField(&quot;totalPages&quot;, value.getTotalPages());\n        gen.writeNumberField(&quot;size&quot;, value.getSize());\n        gen.writeFieldName(&quot;content&quot;);\n        provider.defaultSerializeValue(value.getContent(), gen);\n        gen.writeEndObject();\n    }\n }\n</code></pre>\n<p><strong>step 2</strong>: inject jackson Moudle:</p>\n<pre><code>@Bean\npublic Module jacksonPageWithJsonViewModule() {\n    SimpleModule module = new SimpleModule(&quot;jackson-page-with-jsonview&quot;,\n        unknownVersion());\n    module.addSerializer(PageImpl.class, new PageSerializer());\n    return module;\n}\n</code></pre>\n<p>ok, end.</p>\n"},{"tags":[],"owner":{"account_id":19675805,"reputation":141,"user_id":14403986,"display_name":"Marcio Esposito"},"down_vote_count":0,"up_vote_count":14,"is_accepted":false,"score":14,"last_activity_date":1602025915,"creation_date":1602025915,"answer_id":64235004,"question_id":52490399,"body_markdown":"This worked (org.springframework.cloud:spring-cloud-openfeign-core:2.2.5.RELEASE):\r\n\r\n    @Configuration\r\n    public class FeignConfigurationFactory {\r\n    \r\n        @Bean\r\n        public Module pageJacksonModule() {\r\n            return new PageJacksonModule();\r\n        }\r\n    \r\n        @Bean\r\n        public Module sortJacksonModule() {\r\n            return new SortJacksonModule();\r\n        }\r\n    }","title":"Spring Boot Page Deserialization - PageImpl No constructor","body":"<p>This worked (org.springframework.cloud:spring-cloud-openfeign-core:2.2.5.RELEASE):</p>\n<pre><code>@Configuration\npublic class FeignConfigurationFactory {\n\n    @Bean\n    public Module pageJacksonModule() {\n        return new PageJacksonModule();\n    }\n\n    @Bean\n    public Module sortJacksonModule() {\n        return new SortJacksonModule();\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":17659919,"reputation":608,"user_id":12818585,"display_name":"Andrea Ciccotta"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1622442791,"creation_date":1622442791,"answer_id":67768916,"question_id":52490399,"body_markdown":"You can do something like this\r\n\r\n    final PageImplDeserializer&lt;YOUR_CLASS&gt; response = objectMapper.readValue(jsonResponse, new TypeReference&lt;&gt;() {});\r\n\r\n\r\n    public class PageImplDeserializer&lt;T&gt; {\r\n        private List&lt;T&gt; content;\r\n        private int number;\r\n        private int size;\r\n        private Long totalElements;\r\n        private JsonNode pageable;\r\n        private boolean last;\r\n        private int totalPages;\r\n        private JsonNode sort;\r\n        private boolean first;\r\n        private int numberOfElements;\r\n    \r\n    ... HERE GETTERS AND SETTERS...\r\n    \r\n    }","title":"Spring Boot Page Deserialization - PageImpl No constructor","body":"<p>You can do something like this</p>\n<pre><code>final PageImplDeserializer&lt;YOUR_CLASS&gt; response = objectMapper.readValue(jsonResponse, new TypeReference&lt;&gt;() {});\n\n\npublic class PageImplDeserializer&lt;T&gt; {\n    private List&lt;T&gt; content;\n    private int number;\n    private int size;\n    private Long totalElements;\n    private JsonNode pageable;\n    private boolean last;\n    private int totalPages;\n    private JsonNode sort;\n    private boolean first;\n    private int numberOfElements;\n\n... HERE GETTERS AND SETTERS...\n\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4531095,"reputation":1545,"user_id":3681565,"display_name":"Gaspar"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1627361540,"creation_date":1627361540,"answer_id":68539147,"question_id":52490399,"body_markdown":"These solutions don&#39;t work in tests universe if you are using response and serializing it. I had to serialize the content in List myself :) &lt;br&gt;\r\nIn this scenario i am using RestAssured response.\r\n\r\n    protected static &lt;T&gt; List&lt;T&gt; getResponsePageDTO(Response response, Class&lt;T&gt; clazz) throws IOException {\r\n        Map&lt;String, Object&gt; objectMap = objectMapper.readValue(response.getBody().print(), Map.class);\r\n        List&lt;Object&gt; content = (List&lt;Object&gt;) objectMap.get(&quot;content&quot;);\r\n        List&lt;T&gt; result = new ArrayList&lt;&gt;();\r\n        for (Object o : content) {\r\n            result.add(objectMapper.convertValue(o, clazz));\r\n        }\r\n        return result;\r\n    }","title":"Spring Boot Page Deserialization - PageImpl No constructor","body":"<p>These solutions don't work in tests universe if you are using response and serializing it. I had to serialize the content in List myself :) <br>\nIn this scenario i am using RestAssured response.</p>\n<pre><code>protected static &lt;T&gt; List&lt;T&gt; getResponsePageDTO(Response response, Class&lt;T&gt; clazz) throws IOException {\n    Map&lt;String, Object&gt; objectMap = objectMapper.readValue(response.getBody().print(), Map.class);\n    List&lt;Object&gt; content = (List&lt;Object&gt;) objectMap.get(&quot;content&quot;);\n    List&lt;T&gt; result = new ArrayList&lt;&gt;();\n    for (Object o : content) {\n        result.add(objectMapper.convertValue(o, clazz));\n    }\n    return result;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":12271702,"reputation":313,"user_id":8956678,"display_name":"Raouf Makhlouf"},"down_vote_count":2,"up_vote_count":0,"is_accepted":false,"score":-2,"last_activity_date":1641504461,"creation_date":1641498817,"answer_id":70612916,"question_id":52490399,"body_markdown":"To retrieve objects from Page content, there is no need to code a specific mapper, use **objectMapper** and the class **org.springframework.data.domain.PageImpl** \r\n\r\nHere is the method:\r\n\r\n```java\r\nprivate &lt;T&gt; List&lt;T&gt; getResponsePageContent(ObjectMapper objectMapper, ResultActions result, Class&lt;T&gt; clazz) throws IOException {\r\n   return  objectMapper.readValue(result.andReturn().getResponse().getContentAsString(), \r\n                             new TypeReference&lt;PageImpl&lt;T&gt;&gt;() {})\r\n                            .getContent();\r\n}\r\n```\r\nAnd I use it like this: \r\n\r\n```java\r\nList&lt;Book&gt; books = getResponsePageContent(objectMapper, result, Book.class);\r\n```\r\n","title":"Spring Boot Page Deserialization - PageImpl No constructor","body":"<p>To retrieve objects from Page content, there is no need to code a specific mapper, use <strong>objectMapper</strong> and the class <strong>org.springframework.data.domain.PageImpl</strong></p>\n<p>Here is the method:</p>\n<pre class=\"lang-java prettyprint-override\"><code>private &lt;T&gt; List&lt;T&gt; getResponsePageContent(ObjectMapper objectMapper, ResultActions result, Class&lt;T&gt; clazz) throws IOException {\n   return  objectMapper.readValue(result.andReturn().getResponse().getContentAsString(), \n                             new TypeReference&lt;PageImpl&lt;T&gt;&gt;() {})\n                            .getContent();\n}\n</code></pre>\n<p>And I use it like this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>List&lt;Book&gt; books = getResponsePageContent(objectMapper, result, Book.class);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":16772987,"reputation":474,"user_id":12125012,"display_name":"attalos"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1647532791,"creation_date":1647532791,"answer_id":71515470,"question_id":52490399,"body_markdown":"Similar to @GSUgambit answer but more compact, since you do not have to specify the unused constructor parameters. The trick is to use `@JsonIgnoreProperties`.\r\n\r\n```java\r\n@JsonIgnoreProperties(ignoreUnknown = true, value = {&quot;pageable&quot;})\r\npublic class RestPage&lt;T&gt; extends PageImpl&lt;T&gt; {\r\n    @JsonCreator(mode = JsonCreator.Mode.PROPERTIES)\r\n    public RestPage(@JsonProperty(&quot;content&quot;) List&lt;T&gt; content,\r\n                    @JsonProperty(&quot;number&quot;) int page,\r\n                    @JsonProperty(&quot;size&quot;) int size,\r\n                    @JsonProperty(&quot;totalElements&quot;) long total) {\r\n        super(content, PageRequest.of(page, size), total);\r\n    }\r\n\r\n    public RestPage(Page&lt;T&gt; page) {\r\n        super(page.getContent(), page.getPageable(), page.getTotalElements());\r\n    }\r\n}\r\n```","title":"Spring Boot Page Deserialization - PageImpl No constructor","body":"<p>Similar to @GSUgambit answer but more compact, since you do not have to specify the unused constructor parameters. The trick is to use <code>@JsonIgnoreProperties</code>.</p>\n<pre class=\"lang-java prettyprint-override\"><code>@JsonIgnoreProperties(ignoreUnknown = true, value = {&quot;pageable&quot;})\npublic class RestPage&lt;T&gt; extends PageImpl&lt;T&gt; {\n    @JsonCreator(mode = JsonCreator.Mode.PROPERTIES)\n    public RestPage(@JsonProperty(&quot;content&quot;) List&lt;T&gt; content,\n                    @JsonProperty(&quot;number&quot;) int page,\n                    @JsonProperty(&quot;size&quot;) int size,\n                    @JsonProperty(&quot;totalElements&quot;) long total) {\n        super(content, PageRequest.of(page, size), total);\n    }\n\n    public RestPage(Page&lt;T&gt; page) {\n        super(page.getContent(), page.getPageable(), page.getTotalElements());\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":9784761,"reputation":63,"user_id":7251427,"display_name":"Jordi Gomis"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1663141469,"creation_date":1663141469,"answer_id":73713222,"question_id":52490399,"body_markdown":"I have this problem on kotlin and solved on this way:\r\n\r\n    import com.fasterxml.jackson.annotation.JsonCreator\r\n    import com.fasterxml.jackson.annotation.JsonProperty\r\n    import com.fasterxml.jackson.databind.JsonNode\r\n    import org.springframework.data.domain.PageImpl\r\n    import org.springframework.data.domain.PageRequest\r\n    \r\n    class RestResponsePage&lt;T&gt; @JsonCreator(mode = JsonCreator.Mode.PROPERTIES) constructor(\r\n        @JsonProperty(&quot;content&quot;) content: List&lt;T&gt;?,\r\n        @JsonProperty(&quot;number&quot;) number: Int,\r\n        @JsonProperty(&quot;size&quot;) size: Int,\r\n        @JsonProperty(&quot;totalElements&quot;) totalElements: Long?,\r\n        @JsonProperty(&quot;pageable&quot;) pageable: JsonNode?,\r\n        @JsonProperty(&quot;last&quot;) last: Boolean,\r\n        @JsonProperty(&quot;totalPages&quot;) totalPages: Int,\r\n        @JsonProperty(&quot;sort&quot;) sort: JsonNode?,\r\n        @JsonProperty(&quot;first&quot;) first: Boolean,\r\n        @JsonProperty(&quot;numberOfElements&quot;) numberOfElements: Int\r\n    ) : PageImpl&lt;T&gt;(\r\n        content!!, PageRequest.of(number, size),\r\n        totalElements!!\r\n    )\r\n\r\nAnd is used like this:\r\n\r\n    private fun getPersonsRequest(\r\n            page: Int,\r\n            size: Int,\r\n        ): RestResponsePage&lt;PersonsResponse&gt; {}","title":"Spring Boot Page Deserialization - PageImpl No constructor","body":"<p>I have this problem on kotlin and solved on this way:</p>\n<pre><code>import com.fasterxml.jackson.annotation.JsonCreator\nimport com.fasterxml.jackson.annotation.JsonProperty\nimport com.fasterxml.jackson.databind.JsonNode\nimport org.springframework.data.domain.PageImpl\nimport org.springframework.data.domain.PageRequest\n\nclass RestResponsePage&lt;T&gt; @JsonCreator(mode = JsonCreator.Mode.PROPERTIES) constructor(\n    @JsonProperty(&quot;content&quot;) content: List&lt;T&gt;?,\n    @JsonProperty(&quot;number&quot;) number: Int,\n    @JsonProperty(&quot;size&quot;) size: Int,\n    @JsonProperty(&quot;totalElements&quot;) totalElements: Long?,\n    @JsonProperty(&quot;pageable&quot;) pageable: JsonNode?,\n    @JsonProperty(&quot;last&quot;) last: Boolean,\n    @JsonProperty(&quot;totalPages&quot;) totalPages: Int,\n    @JsonProperty(&quot;sort&quot;) sort: JsonNode?,\n    @JsonProperty(&quot;first&quot;) first: Boolean,\n    @JsonProperty(&quot;numberOfElements&quot;) numberOfElements: Int\n) : PageImpl&lt;T&gt;(\n    content!!, PageRequest.of(number, size),\n    totalElements!!\n)\n</code></pre>\n<p>And is used like this:</p>\n<pre><code>private fun getPersonsRequest(\n        page: Int,\n        size: Int,\n    ): RestResponsePage&lt;PersonsResponse&gt; {}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2264978,"reputation":3734,"user_id":1993937,"accept_rate":47,"display_name":"TheJeff"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1675202614,"creation_date":1675202614,"answer_id":75303615,"question_id":52490399,"body_markdown":"There is a PageJacksonModule and a SortJacksonModule.\r\n\r\nKotlin:\r\n\r\n    private val mapper = jacksonObjectMapper().registerModules(\r\n        PageJacksonModule(),\r\n        SortJacksonModule()\r\n    )","title":"Spring Boot Page Deserialization - PageImpl No constructor","body":"<p>There is a PageJacksonModule and a SortJacksonModule.</p>\n<p>Kotlin:</p>\n<pre><code>private val mapper = jacksonObjectMapper().registerModules(\n    PageJacksonModule(),\n    SortJacksonModule()\n)\n</code></pre>\n"}],"owner":{"account_id":390125,"reputation":4499,"user_id":749979,"accept_rate":100,"display_name":"GSUgambit"},"comment_count":10,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":42131,"favorite_count":0,"down_vote_count":0,"up_vote_count":27,"accepted_answer_id":52509886,"answer_count":11,"score":27,"last_activity_date":1675202614,"creation_date":1537848097,"question_id":52490399,"body_markdown":"Trying to unit test receiving a page from spring boot. If used with javascript the page can be easily be deserialized, but with java, it fails. Have added a default constructor for spring (which is an accepted answer in another stackoverflow post) but it does not work here.\r\n\r\nUnit Test\r\n\r\n    @Test\r\n    public void test_read_pagination_happy(@Autowired ObservationSet set) {\r\n\r\n        repository.save(set);\r\n\r\n        final HttpEntity&lt;String&gt; authHeaders = authentication.convert(&quot;&quot;, authSuccess);\r\n        final ParameterizedTypeReference&lt;RestResponsePage&lt;ObservationSet&gt;&gt; responseType = new ParameterizedTypeReference&lt;RestResponsePage&lt;ObservationSet&gt;&gt;() {\r\n        };\r\n        // final ResponseEntity&lt;String&gt; result = restTemplate.exchange(base + &quot;/api/v1/observationset&quot;, HttpMethod.GET, authHeaders, String.class);\r\n        final ResponseEntity&lt;RestResponsePage&lt;ObservationSet&gt;&gt; result = restTemplate.exchange(base + &quot;/api/v1/observationset&quot;, HttpMethod.GET, authHeaders,\r\n                        responseType);\r\n        System.out.println(result.getBody());\r\n        assertSame(HttpStatus.OK, result.getStatusCode(), &quot;incorrect status code&quot;);\r\n    }\r\n\r\nRestRespongePage class\r\n\r\n    class RestResponsePage&lt;T&gt; extends PageImpl&lt;T&gt; {\r\n\r\n        private static final long serialVersionUID = 3248189030448292002L;\r\n\r\n        public RestResponsePage(List&lt;T&gt; content, Pageable pageable, long total) {\r\n            super(content, pageable, total);\r\n        }\r\n\r\n        public RestResponsePage(List&lt;T&gt; content) {\r\n            super(content);\r\n        }\r\n\r\n        public RestResponsePage() {\r\n            super(new ArrayList&lt;T&gt;());\r\n        }\r\n\r\n    }\r\n\r\n```\r\n\r\nCode is available on github --&gt; https://github.com/OpenPCM/openpcm-server/blob/integration-test/src/test/java/org/openpcm/controller/ObservationSetControllerIntTest.java\r\n\r\nThe deserialization throws this error:\r\n\r\n    org.springframework.http.converter.HttpMessageConversionException: Type definition error: [simple type, class org.springframework.data.domain.Pageable]; nested exception is com.fasterxml.jackson.databind.exc.InvalidDefinitionException: Cannot construct instance of `org.springframework.data.domain.Pageable` (no Creators, like default construct, exist): abstract types either need to be mapped to concrete types, have custom deserializer, or contain additional type information\r\n     at [Source: (PushbackInputStream); line: 1, column: 294] (through reference chain: org.openpcm.controller.RestResponsePage[&quot;pageable&quot;])\r\n    \tat org.springframework.http.converter.json.AbstractJackson2HttpMessageConverter.readJavaType(AbstractJackson2HttpMessageConverter.java:240)\r\n    \tat org.springframework.http.converter.json.AbstractJackson2HttpMessageConverter.read(AbstractJackson2HttpMessageConverter.java:225)\r\n    \tat org.springframework.web.client.HttpMessageConverterExtractor.extractData(HttpMessageConverterExtractor.java:100)\r\n    \tat org.springframework.web.client.RestTemplate$ResponseEntityResponseExtractor.extractData(RestTemplate.java:959)\r\n    \tat org.springframework.web.client.RestTemplate$ResponseEntityResponseExtractor.extractData(RestTemplate.java:942)\r\n    \tat org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:689)\r\n    \tat org.springframework.web.client.RestTemplate.execute(RestTemplate.java:644)\r\n    \tat org.springframework.web.client.RestTemplate.exchange(RestTemplate.java:593)\r\n    \tat org.springframework.boot.test.web.client.TestRestTemplate.exchange(TestRestTemplate.java:843)\r\n    \tat org.openpcm.controller.ObservationSetControllerIntTest.test_read_pagination_happy(ObservationSetControllerIntTest.java:85)\r\n    \tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n    \tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n    \tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n    \tat java.base/java.lang.reflect.Method.invoke(Method.java:564)\r\n    \tat org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:436)\r\n    \tat org.junit.jupiter.engine.execution.ExecutableInvoker.invoke(ExecutableInvoker.java:115)\r\n    \tat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$6(TestMethodTestDescriptor.java:170)\r\n    \tat org.junit.jupiter.engine.execution.ThrowableCollector.execute(ThrowableCollector.java:40)\r\n    \tat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:166)\r\n    \tat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:113)\r\n    \tat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:58)\r\n    \tat org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.lambda$executeRecursively$3(HierarchicalTestExecutor.java:112)\r\n    \tat org.junit.platform.engine.support.hierarchical.SingleTestExecutor.executeSafely(SingleTestExecutor.java:66)\r\n    \tat org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.executeRecursively(HierarchicalTestExecutor.java:108)\r\n    \tat org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.execute(HierarchicalTestExecutor.java:79)\r\n    \tat org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.lambda$executeRecursively$2(HierarchicalTestExecutor.java:120)\r\n    \tat java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.accept(ForEachOps.java:184)\r\n    \tat java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:177)\r\n    \tat java.base/java.util.Iterator.forEachRemaining(Iterator.java:133)\r\n    \tat java.base/java.util.Spliterators$IteratorSpliterator.forEachRemaining(Spliterators.java:1801)\r\n    \tat java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:484)\r\n    \tat java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:474)\r\n    \tat java.base/java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:151)\r\n    \tat java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:174)\r\n    \tat java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)\r\n    \tat java.base/java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:430)\r\n    \tat org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.lambda$executeRecursively$3(HierarchicalTestExecutor.java:120)\r\n    \tat org.junit.platform.engine.support.hierarchical.SingleTestExecutor.executeSafely(SingleTestExecutor.java:66)\r\n    \tat org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.executeRecursively(HierarchicalTestExecutor.java:108)\r\n    \tat org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.execute(HierarchicalTestExecutor.java:79)\r\n    \tat org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.lambda$executeRecursively$2(HierarchicalTestExecutor.java:120)\r\n    \tat java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.accept(ForEachOps.java:184)\r\n    \tat java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:177)\r\n    \tat java.base/java.util.Iterator.forEachRemaining(Iterator.java:133)\r\n    \tat java.base/java.util.Spliterators$IteratorSpliterator.forEachRemaining(Spliterators.java:1801)\r\n    \tat java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:484)\r\n    \tat java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:474)\r\n    \tat java.base/java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:151)\r\n    \tat java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:174)\r\n    \tat java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)\r\n    \tat java.base/java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:430)\r\n    \tat org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.lambda$executeRecursively$3(HierarchicalTestExecutor.java:120)\r\n    \tat org.junit.platform.engine.support.hierarchical.SingleTestExecutor.executeSafely(SingleTestExecutor.java:66)\r\n    \tat org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.executeRecursively(HierarchicalTestExecutor.java:108)\r\n    \tat org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.execute(HierarchicalTestExecutor.java:79)\r\n    \tat org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:55)\r\n    \tat org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:43)\r\n    \tat org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:170)\r\n    \tat org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:154)\r\n    \tat org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:90)\r\n    \tat org.eclipse.jdt.internal.junit5.runner.JUnit5TestReference.run(JUnit5TestReference.java:89)\r\n    \tat org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:41)\r\n    \tat org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:541)\r\n    \tat org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:763)\r\n    \tat org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:463)\r\n    \tat org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:209)\r\n    Caused by: com.fasterxml.jackson.databind.exc.InvalidDefinitionException: Cannot construct instance of `org.springframework.data.domain.Pageable` (no Creators, like default construct, exist): abstract types either need to be mapped to concrete types, have custom deserializer, or contain additional type information\r\n     at [Source: (PushbackInputStream); line: 1, column: 294] (through reference chain: org.openpcm.controller.RestResponsePage[&quot;pageable&quot;])\r\n    \tat com.fasterxml.jackson.databind.exc.InvalidDefinitionException.from(InvalidDefinitionException.java:67)\r\n    \tat com.fasterxml.jackson.databind.DeserializationContext.reportBadDefinition(DeserializationContext.java:1451)\r\n    \tat com.fasterxml.jackson.databind.DeserializationContext.handleMissingInstantiator(DeserializationContext.java:1027)\r\n    \tat com.fasterxml.jackson.databind.deser.AbstractDeserializer.deserialize(AbstractDeserializer.java:265)\r\n    \tat com.fasterxml.jackson.databind.deser.impl.FieldProperty.deserializeAndSet(FieldProperty.java:136)\r\n    \tat com.fasterxml.jackson.databind.deser.BeanDeserializer.vanillaDeserialize(BeanDeserializer.java:288)\r\n    \tat com.fasterxml.jackson.databind.deser.BeanDeserializer.deserialize(BeanDeserializer.java:151)\r\n    \tat com.fasterxml.jackson.databind.ObjectMapper._readMapAndClose(ObjectMapper.java:4013)\r\n    \tat com.fasterxml.jackson.databind.ObjectMapper.readValue(ObjectMapper.java:3084)\r\n    \tat org.springframework.http.converter.json.AbstractJackson2HttpMessageConverter.readJavaType(AbstractJackson2HttpMessageConverter.java:237)\r\n    \t... 65 more\r\n\r\n","title":"Spring Boot Page Deserialization - PageImpl No constructor","body":"<p>Trying to unit test receiving a page from spring boot. If used with javascript the page can be easily be deserialized, but with java, it fails. Have added a default constructor for spring (which is an accepted answer in another stackoverflow post) but it does not work here.</p>\n\n<p>Unit Test</p>\n\n<pre><code>@Test\npublic void test_read_pagination_happy(@Autowired ObservationSet set) {\n\n    repository.save(set);\n\n    final HttpEntity&lt;String&gt; authHeaders = authentication.convert(\"\", authSuccess);\n    final ParameterizedTypeReference&lt;RestResponsePage&lt;ObservationSet&gt;&gt; responseType = new ParameterizedTypeReference&lt;RestResponsePage&lt;ObservationSet&gt;&gt;() {\n    };\n    // final ResponseEntity&lt;String&gt; result = restTemplate.exchange(base + \"/api/v1/observationset\", HttpMethod.GET, authHeaders, String.class);\n    final ResponseEntity&lt;RestResponsePage&lt;ObservationSet&gt;&gt; result = restTemplate.exchange(base + \"/api/v1/observationset\", HttpMethod.GET, authHeaders,\n                    responseType);\n    System.out.println(result.getBody());\n    assertSame(HttpStatus.OK, result.getStatusCode(), \"incorrect status code\");\n}\n</code></pre>\n\n<p>RestRespongePage class</p>\n\n<pre><code>class RestResponsePage&lt;T&gt; extends PageImpl&lt;T&gt; {\n\n    private static final long serialVersionUID = 3248189030448292002L;\n\n    public RestResponsePage(List&lt;T&gt; content, Pageable pageable, long total) {\n        super(content, pageable, total);\n    }\n\n    public RestResponsePage(List&lt;T&gt; content) {\n        super(content);\n    }\n\n    public RestResponsePage() {\n        super(new ArrayList&lt;T&gt;());\n    }\n\n}\n</code></pre>\n\n<p>```</p>\n\n<p>Code is available on github --> <a href=\"https://github.com/OpenPCM/openpcm-server/blob/integration-test/src/test/java/org/openpcm/controller/ObservationSetControllerIntTest.java\" rel=\"noreferrer\">https://github.com/OpenPCM/openpcm-server/blob/integration-test/src/test/java/org/openpcm/controller/ObservationSetControllerIntTest.java</a></p>\n\n<p>The deserialization throws this error:</p>\n\n<pre><code>org.springframework.http.converter.HttpMessageConversionException: Type definition error: [simple type, class org.springframework.data.domain.Pageable]; nested exception is com.fasterxml.jackson.databind.exc.InvalidDefinitionException: Cannot construct instance of `org.springframework.data.domain.Pageable` (no Creators, like default construct, exist): abstract types either need to be mapped to concrete types, have custom deserializer, or contain additional type information\n at [Source: (PushbackInputStream); line: 1, column: 294] (through reference chain: org.openpcm.controller.RestResponsePage[\"pageable\"])\n    at org.springframework.http.converter.json.AbstractJackson2HttpMessageConverter.readJavaType(AbstractJackson2HttpMessageConverter.java:240)\n    at org.springframework.http.converter.json.AbstractJackson2HttpMessageConverter.read(AbstractJackson2HttpMessageConverter.java:225)\n    at org.springframework.web.client.HttpMessageConverterExtractor.extractData(HttpMessageConverterExtractor.java:100)\n    at org.springframework.web.client.RestTemplate$ResponseEntityResponseExtractor.extractData(RestTemplate.java:959)\n    at org.springframework.web.client.RestTemplate$ResponseEntityResponseExtractor.extractData(RestTemplate.java:942)\n    at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:689)\n    at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:644)\n    at org.springframework.web.client.RestTemplate.exchange(RestTemplate.java:593)\n    at org.springframework.boot.test.web.client.TestRestTemplate.exchange(TestRestTemplate.java:843)\n    at org.openpcm.controller.ObservationSetControllerIntTest.test_read_pagination_happy(ObservationSetControllerIntTest.java:85)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n    at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.base/java.lang.reflect.Method.invoke(Method.java:564)\n    at org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:436)\n    at org.junit.jupiter.engine.execution.ExecutableInvoker.invoke(ExecutableInvoker.java:115)\n    at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$6(TestMethodTestDescriptor.java:170)\n    at org.junit.jupiter.engine.execution.ThrowableCollector.execute(ThrowableCollector.java:40)\n    at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:166)\n    at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:113)\n    at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:58)\n    at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.lambda$executeRecursively$3(HierarchicalTestExecutor.java:112)\n    at org.junit.platform.engine.support.hierarchical.SingleTestExecutor.executeSafely(SingleTestExecutor.java:66)\n    at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.executeRecursively(HierarchicalTestExecutor.java:108)\n    at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.execute(HierarchicalTestExecutor.java:79)\n    at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.lambda$executeRecursively$2(HierarchicalTestExecutor.java:120)\n    at java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.accept(ForEachOps.java:184)\n    at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:177)\n    at java.base/java.util.Iterator.forEachRemaining(Iterator.java:133)\n    at java.base/java.util.Spliterators$IteratorSpliterator.forEachRemaining(Spliterators.java:1801)\n    at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:484)\n    at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:474)\n    at java.base/java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:151)\n    at java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:174)\n    at java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)\n    at java.base/java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:430)\n    at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.lambda$executeRecursively$3(HierarchicalTestExecutor.java:120)\n    at org.junit.platform.engine.support.hierarchical.SingleTestExecutor.executeSafely(SingleTestExecutor.java:66)\n    at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.executeRecursively(HierarchicalTestExecutor.java:108)\n    at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.execute(HierarchicalTestExecutor.java:79)\n    at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.lambda$executeRecursively$2(HierarchicalTestExecutor.java:120)\n    at java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.accept(ForEachOps.java:184)\n    at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:177)\n    at java.base/java.util.Iterator.forEachRemaining(Iterator.java:133)\n    at java.base/java.util.Spliterators$IteratorSpliterator.forEachRemaining(Spliterators.java:1801)\n    at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:484)\n    at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:474)\n    at java.base/java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:151)\n    at java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:174)\n    at java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)\n    at java.base/java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:430)\n    at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.lambda$executeRecursively$3(HierarchicalTestExecutor.java:120)\n    at org.junit.platform.engine.support.hierarchical.SingleTestExecutor.executeSafely(SingleTestExecutor.java:66)\n    at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.executeRecursively(HierarchicalTestExecutor.java:108)\n    at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor$NodeExecutor.execute(HierarchicalTestExecutor.java:79)\n    at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:55)\n    at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:43)\n    at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:170)\n    at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:154)\n    at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:90)\n    at org.eclipse.jdt.internal.junit5.runner.JUnit5TestReference.run(JUnit5TestReference.java:89)\n    at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:41)\n    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:541)\n    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:763)\n    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:463)\n    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:209)\nCaused by: com.fasterxml.jackson.databind.exc.InvalidDefinitionException: Cannot construct instance of `org.springframework.data.domain.Pageable` (no Creators, like default construct, exist): abstract types either need to be mapped to concrete types, have custom deserializer, or contain additional type information\n at [Source: (PushbackInputStream); line: 1, column: 294] (through reference chain: org.openpcm.controller.RestResponsePage[\"pageable\"])\n    at com.fasterxml.jackson.databind.exc.InvalidDefinitionException.from(InvalidDefinitionException.java:67)\n    at com.fasterxml.jackson.databind.DeserializationContext.reportBadDefinition(DeserializationContext.java:1451)\n    at com.fasterxml.jackson.databind.DeserializationContext.handleMissingInstantiator(DeserializationContext.java:1027)\n    at com.fasterxml.jackson.databind.deser.AbstractDeserializer.deserialize(AbstractDeserializer.java:265)\n    at com.fasterxml.jackson.databind.deser.impl.FieldProperty.deserializeAndSet(FieldProperty.java:136)\n    at com.fasterxml.jackson.databind.deser.BeanDeserializer.vanillaDeserialize(BeanDeserializer.java:288)\n    at com.fasterxml.jackson.databind.deser.BeanDeserializer.deserialize(BeanDeserializer.java:151)\n    at com.fasterxml.jackson.databind.ObjectMapper._readMapAndClose(ObjectMapper.java:4013)\n    at com.fasterxml.jackson.databind.ObjectMapper.readValue(ObjectMapper.java:3084)\n    at org.springframework.http.converter.json.AbstractJackson2HttpMessageConverter.readJavaType(AbstractJackson2HttpMessageConverter.java:237)\n    ... 65 more\n</code></pre>\n"},{"tags":["java","selenium","web-scraping"],"comments":[{"owner":{"account_id":2709823,"reputation":10716,"user_id":2338547,"display_name":"markspace"},"score":0,"creation_date":1675197894,"post_id":75302864,"comment_id":132876113,"body_markdown":"AFAIK, &quot;connection reset&quot; means the other side already closed the connection for you.  In HTTP, it&#39;s normal close the connection immediately after all data is sent (unless &quot;keep alive&quot; is set?), so what you&#39;re getting is probably normal.","body":"AFAIK, &quot;connection reset&quot; means the other side already closed the connection for you.  In HTTP, it&#39;s normal close the connection immediately after all data is sent (unless &quot;keep alive&quot; is set?), so what you&#39;re getting is probably normal."},{"owner":{"account_id":17231778,"reputation":11,"user_id":17380810,"display_name":"Maremare"},"score":0,"creation_date":1675198924,"post_id":75302864,"comment_id":132876415,"body_markdown":"@markspace Okay, so what should I do about it? What I understand from this is that I should not call the quit(), is that a better approach to this issue, or better to catch it and do nothing about it? What do you think?","body":"@markspace Okay, so what should I do about it? What I understand from this is that I should not call the quit(), is that a better approach to this issue, or better to catch it and do nothing about it? What do you think?"}],"answers":[{"tags":[],"owner":{"account_id":10299692,"reputation":5719,"user_id":7598774,"accept_rate":75,"display_name":"Shawn"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1675200638,"creation_date":1675200638,"answer_id":75303346,"question_id":75302864,"body_markdown":"Below is the same code I have tried and it works fine with no exceptions. Only difference is that I have not added following code `System.setProperty(&quot;webdriver.chrome.driver&quot;, filePath);`. You do not need to set property when you are using the latest version of selenium(which you are using anyways). Try removing this line and see if it resolves your issue.\r\n\r\n\tpublic static void main(String[] args){\r\n\t\t\r\n\t\tChromeOptions options = new ChromeOptions();\r\n\t\toptions.addArguments(&quot;--headless&quot;);\r\n\r\n\t\tWebDriver driver = new ChromeDriver(options);\r\n\t\tdriver.get(&quot;https://relatedwords.org/relatedto/&quot; + &quot;Fishsticks&quot;);\r\n\t\t\r\n\t\tWebElement words = driver.findElement(By.className(&quot;words&quot;));\r\n\t\tfinal List&lt;WebElement&gt; wordList = words.findElements(By.tagName(&quot;a&quot;));\r\n\t\twordList.forEach(word -&gt; System.out.println(word.getText()));\r\n\r\n\t\tdriver.quit();\r\n\r\n\t}\r\n\r\nHere is the console output:\r\n\r\n````\r\nSLF4J: Failed to load class &quot;org.slf4j.impl.StaticLoggerBinder&quot;.\r\nSLF4J: Defaulting to no-operation (NOP) logger implementation\r\nSLF4J: See http://www.slf4j.org/codes.html#StaticLoggerBinder for further details.\r\nStarting ChromeDriver 109.0.5414.74 (e7c5703604daa9cc128ccf5a5d3e993513758913-refs/branch-heads/5414@{#1172}) on port 2732\r\nOnly local connections are allowed.\r\nPlease see https://chromedriver.chromium.org/security-considerations for suggestions on keeping ChromeDriver safe.\r\nChromeDriver was started successfully.\r\nbatter\r\ncod\r\nunited kingdom\r\nketchup\r\nherring\r\nwhitefish\r\nhake\r\nhaddock\r\npollock\r\nrefrigerator\r\nbritish english\r\nbreaded\r\namerican english\r\neurope\r\nfood processing\r\nsupermarket\r\ngrilling\r\ntartar sauce\r\nfish\r\nmachine\r\nbackbone\r\nparents\r\nfrozen food\r\nwheel\r\nblade\r\ntelevision commercial\r\nsouthampton\r\nshallow frying\r\nskin\r\nbreadcrumbs\r\nsalmon\r\nbone\r\ndeep frying\r\nworld war ii\r\ngorton&#39;s of gloucester\r\nclarence birdseye\r\nstore brand\r\nvegetable oil\r\n````","title":"Selenium java.net.SocketException: Connection reset when calling driver.quit();","body":"<p>Below is the same code I have tried and it works fine with no exceptions. Only difference is that I have not added following code <code>System.setProperty(&quot;webdriver.chrome.driver&quot;, filePath);</code>. You do not need to set property when you are using the latest version of selenium(which you are using anyways). Try removing this line and see if it resolves your issue.</p>\n<pre><code>public static void main(String[] args){\n    \n    ChromeOptions options = new ChromeOptions();\n    options.addArguments(&quot;--headless&quot;);\n\n    WebDriver driver = new ChromeDriver(options);\n    driver.get(&quot;https://relatedwords.org/relatedto/&quot; + &quot;Fishsticks&quot;);\n    \n    WebElement words = driver.findElement(By.className(&quot;words&quot;));\n    final List&lt;WebElement&gt; wordList = words.findElements(By.tagName(&quot;a&quot;));\n    wordList.forEach(word -&gt; System.out.println(word.getText()));\n\n    driver.quit();\n\n}\n</code></pre>\n<p>Here is the console output:</p>\n<pre><code>SLF4J: Failed to load class &quot;org.slf4j.impl.StaticLoggerBinder&quot;.\nSLF4J: Defaulting to no-operation (NOP) logger implementation\nSLF4J: See http://www.slf4j.org/codes.html#StaticLoggerBinder for further details.\nStarting ChromeDriver 109.0.5414.74 (e7c5703604daa9cc128ccf5a5d3e993513758913-refs/branch-heads/5414@{#1172}) on port 2732\nOnly local connections are allowed.\nPlease see https://chromedriver.chromium.org/security-considerations for suggestions on keeping ChromeDriver safe.\nChromeDriver was started successfully.\nbatter\ncod\nunited kingdom\nketchup\nherring\nwhitefish\nhake\nhaddock\npollock\nrefrigerator\nbritish english\nbreaded\namerican english\neurope\nfood processing\nsupermarket\ngrilling\ntartar sauce\nfish\nmachine\nbackbone\nparents\nfrozen food\nwheel\nblade\ntelevision commercial\nsouthampton\nshallow frying\nskin\nbreadcrumbs\nsalmon\nbone\ndeep frying\nworld war ii\ngorton's of gloucester\nclarence birdseye\nstore brand\nvegetable oil\n</code></pre>\n"},{"tags":[],"owner":{"account_id":10049107,"reputation":186627,"user_id":7429447,"accept_rate":86,"display_name":"undetected Selenium"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1675202503,"creation_date":1675202503,"answer_id":75303602,"question_id":75302864,"body_markdown":"java.net.SocketException: Connection reset\r\n------------------------------------------\r\n[java.net.SocketException](https://www.geeksforgeeks.org/java-net-socketexception-in-java-with-examples/) may occur due to several possible reasons as follows:\r\n\r\n- It can occur on the server-side when the client closed the socket connection before the response could be returned over the socket. For example, by quitting the browser before the response was retrieved.\r\n- It can also occur by writing to a connection that the other end has already closed normally resulting in an application protocol error.\r\n\r\n\r\n----------\r\n\r\n\r\nThis usecase\r\n------------\r\nI took your program and executed it. Here is the result:\r\n\r\n- Code block:\r\n\r\n\t  System.setProperty(&quot;webdriver.chrome.driver&quot;, &quot;C:\\\\BrowserDrivers\\\\chromedriver.exe&quot;);\r\n\t  ChromeOptions options = new ChromeOptions();\r\n\t  options.addArguments(&quot;--start-maximized&quot;);\r\n\t  WebDriver driver = new ChromeDriver(options);\r\n\t  driver.get(&quot;https://relatedwords.org/relatedto/Fishsticks&quot;);\r\n\t  WebElement words = driver.findElement(By.className(&quot;words&quot;));\r\n\t  final List&lt;WebElement&gt; wordList = words.findElements(By.tagName(&quot;a&quot;));\r\n\t  wordList.forEach(word -&gt; System.out.println(word.getText()));\r\n\t  driver.quit();\r\n\t  \r\n- Console output:\r\n\r\n\t  batter\r\n\t  cod\r\n\t  united kingdom\r\n\t  ketchup\r\n\t  herring\r\n\t  whitefish\r\n\t  hake\r\n\t  haddock\r\n\t  pollock\r\n\t  refrigerator\r\n\t  british english\r\n\t  breaded\r\n\t  american english\r\n\t  europe\r\n\t  food processing\r\n\t  supermarket\r\n\t  grilling\r\n\t  tartar sauce\r\n\t  fish\r\n\t  machine\r\n\t  backbone\r\n\t  parents\r\n\t  frozen food\r\n\t  wheel\r\n\t  blade\r\n\t  television commercial\r\n\t  southampton\r\n\t  shallow frying\r\n\t  skin\r\n\t  breadcrumbs\r\n\t  salmon\r\n\t  bone\r\n\t  deep frying\r\n\t  world war ii\r\n\t  gorton&#39;s of gloucester\r\n\t  clarence birdseye\r\n\t  store brand\r\n\t  vegetable oil\r\n\r\n\r\n----------\r\n\r\n\r\n\t  \r\nConclusion\r\n----------\r\nProgrammatically, I don&#39;t see any error in your code block. However ensure that:\r\n\r\n- _JDK_ is upgraded to current levels [JDK 8u351](https://www.oracle.com/java/technologies/javase/javase8u211-later-archive-downloads.html).\r\n- _Selenium_ is upgraded to current levels [Version 4.8.0](https://www.selenium.dev/downloads/).\r\n- _ChromeDriver_ is updated to  current [ChromeDriver v109.0](https://chromedriver.storage.googleapis.com/index.html?path=109.0.5414.74/) level.\r\n- _Chrome Browser_ is updated to  current _chrome=109.0_ (as per [chromedriver=109.0.5414.74 release notes](https://chromedriver.storage.googleapis.com/109.0.5414.74/notes.txt)).\r\n- Take a _System Reboot_.\r\n- Execute your `Test` as a non-root user.\r\n\r\n\r\n----------\r\n\r\n\r\nReferences\r\n----------\r\nYou can find a couple of relevant detailed discussions in:\r\n\r\n- [Selenium shows java.net.SocketException: Connection reset](https://stackoverflow.com/a/48354459/7429447)\r\n- [java.net.SocketException: Connection reset](https://stackoverflow.com/q/62929/7429447)\r\n- [What&#39;s causing my java.net.SocketException: Connection reset?](https://stackoverflow.com/q/585599/7429447)","title":"Selenium java.net.SocketException: Connection reset when calling driver.quit();","body":"<h2>java.net.SocketException: Connection reset</h2>\n<p><a href=\"https://www.geeksforgeeks.org/java-net-socketexception-in-java-with-examples/\" rel=\"nofollow noreferrer\">java.net.SocketException</a> may occur due to several possible reasons as follows:</p>\n<ul>\n<li>It can occur on the server-side when the client closed the socket connection before the response could be returned over the socket. For example, by quitting the browser before the response was retrieved.</li>\n<li>It can also occur by writing to a connection that the other end has already closed normally resulting in an application protocol error.</li>\n</ul>\n<hr />\n<h2>This usecase</h2>\n<p>I took your program and executed it. Here is the result:</p>\n<ul>\n<li><p>Code block:</p>\n<pre><code>System.setProperty(&quot;webdriver.chrome.driver&quot;, &quot;C:\\\\BrowserDrivers\\\\chromedriver.exe&quot;);\nChromeOptions options = new ChromeOptions();\noptions.addArguments(&quot;--start-maximized&quot;);\nWebDriver driver = new ChromeDriver(options);\ndriver.get(&quot;https://relatedwords.org/relatedto/Fishsticks&quot;);\nWebElement words = driver.findElement(By.className(&quot;words&quot;));\nfinal List&lt;WebElement&gt; wordList = words.findElements(By.tagName(&quot;a&quot;));\nwordList.forEach(word -&gt; System.out.println(word.getText()));\ndriver.quit();\n</code></pre>\n</li>\n<li><p>Console output:</p>\n<pre><code>batter\ncod\nunited kingdom\nketchup\nherring\nwhitefish\nhake\nhaddock\npollock\nrefrigerator\nbritish english\nbreaded\namerican english\neurope\nfood processing\nsupermarket\ngrilling\ntartar sauce\nfish\nmachine\nbackbone\nparents\nfrozen food\nwheel\nblade\ntelevision commercial\nsouthampton\nshallow frying\nskin\nbreadcrumbs\nsalmon\nbone\ndeep frying\nworld war ii\ngorton's of gloucester\nclarence birdseye\nstore brand\nvegetable oil\n</code></pre>\n</li>\n</ul>\n<hr />\n<h2>Conclusion</h2>\n<p>Programmatically, I don't see any error in your code block. However ensure that:</p>\n<ul>\n<li><em>JDK</em> is upgraded to current levels <a href=\"https://www.oracle.com/java/technologies/javase/javase8u211-later-archive-downloads.html\" rel=\"nofollow noreferrer\">JDK 8u351</a>.</li>\n<li><em>Selenium</em> is upgraded to current levels <a href=\"https://www.selenium.dev/downloads/\" rel=\"nofollow noreferrer\">Version 4.8.0</a>.</li>\n<li><em>ChromeDriver</em> is updated to  current <a href=\"https://chromedriver.storage.googleapis.com/index.html?path=109.0.5414.74/\" rel=\"nofollow noreferrer\">ChromeDriver v109.0</a> level.</li>\n<li><em>Chrome Browser</em> is updated to  current <em>chrome=109.0</em> (as per <a href=\"https://chromedriver.storage.googleapis.com/109.0.5414.74/notes.txt\" rel=\"nofollow noreferrer\">chromedriver=109.0.5414.74 release notes</a>).</li>\n<li>Take a <em>System Reboot</em>.</li>\n<li>Execute your <code>Test</code> as a non-root user.</li>\n</ul>\n<hr />\n<h2>References</h2>\n<p>You can find a couple of relevant detailed discussions in:</p>\n<ul>\n<li><a href=\"https://stackoverflow.com/a/48354459/7429447\">Selenium shows java.net.SocketException: Connection reset</a></li>\n<li><a href=\"https://stackoverflow.com/q/62929/7429447\">java.net.SocketException: Connection reset</a></li>\n<li><a href=\"https://stackoverflow.com/q/585599/7429447\">What's causing my java.net.SocketException: Connection reset?</a></li>\n</ul>\n"}],"owner":{"account_id":17231778,"reputation":11,"user_id":17380810,"display_name":"Maremare"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":2188,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1675202503,"creation_date":1675197430,"question_id":75302864,"body_markdown":"I saw these threads:\r\n\r\nhttps://stackoverflow.com/questions/63303153/java-net-socketexception-connection-reset-on-selenium-driver-close-or-driver\r\n\r\nhttps://stackoverflow.com/questions/72755662/selenium-java-java-net-socketexception-connection-reset\r\n\r\nBut I still don&#39;t understand the issue here. Everything is working fine, I get the response and content from the website and when I&#39;m done I call the `driver.quit();` / `driver.close();` and get the exception. If I don&#39;t call that `.quit();` I don&#39;t get the exception.\r\n\r\nI get this exception after I get the web scraping content:\r\n\r\n\r\n    2023-01-31T21:28:31.222+01:00  WARN 8400 --- [cHttpClient-1-4] o.a.netty.handler.WebSocketHandler       : onError\r\n    \r\n    java.net.SocketException: Connection reset\r\n    \tat java.base/sun.nio.ch.SocketChannelImpl.throwConnectionReset(SocketChannelImpl.java:394) ~[na:na]\r\n    \tat java.base/sun.nio.ch.SocketChannelImpl.read(SocketChannelImpl.java:426) ~[na:na]\r\n    \tat io.netty.buffer.PooledByteBuf.setBytes(PooledByteBuf.java:259) ~[netty-buffer-4.1.87.Final.jar:4.1.87.Final]\r\n    \tat io.netty.buffer.AbstractByteBuf.writeBytes(AbstractByteBuf.java:1132) ~[netty-buffer-4.1.87.Final.jar:4.1.87.Final]\r\n    \tat io.netty.channel.socket.nio.NioSocketChannel.doReadBytes(NioSocketChannel.java:357) ~[netty-transport-4.1.87.Final.jar:4.1.87.Final]\r\n    \tat io.netty.channel.nio.AbstractNioByteChannel$NioByteUnsafe.read(AbstractNioByteChannel.java:151) ~[netty-transport-4.1.87.Final.jar:4.1.87.Final]\r\n    \tat io.netty.channel.nio.NioEventLoop.processSelectedKey(NioEventLoop.java:788) ~[netty-transport-4.1.87.Final.jar:4.1.87.Final]\r\n    \tat io.netty.channel.nio.NioEventLoop.processSelectedKeysOptimized(NioEventLoop.java:724) ~[netty-transport-4.1.87.Final.jar:4.1.87.Final]\r\n    \tat io.netty.channel.nio.NioEventLoop.processSelectedKeys(NioEventLoop.java:650) ~[netty-transport-4.1.87.Final.jar:4.1.87.Final]\r\n    \tat io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:562) ~[netty-transport-4.1.87.Final.jar:4.1.87.Final]\r\n    \tat io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:997) ~[netty-common-4.1.87.Final.jar:4.1.87.Final]\r\n    \tat io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74) ~[netty-common-4.1.87.Final.jar:4.1.87.Final]\r\n    \tat io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30) ~[netty-common-4.1.87.Final.jar:4.1.87.Final]\r\n    \tat java.base/java.lang.Thread.run(Thread.java:833) ~[na:na]\r\n    \r\n    2023-01-31T21:28:31.229+01:00  WARN 8400 --- [cHttpClient-1-4] o.openqa.selenium.remote.http.WebSocket  : Connection reset\r\n    \r\n    java.net.SocketException: Connection reset\r\n    \tat java.base/sun.nio.ch.SocketChannelImpl.throwConnectionReset(SocketChannelImpl.java:394) ~[na:na]\r\n    \tat java.base/sun.nio.ch.SocketChannelImpl.read(SocketChannelImpl.java:426) ~[na:na]\r\n    \tat io.netty.buffer.PooledByteBuf.setBytes(PooledByteBuf.java:259) ~[netty-buffer-4.1.87.Final.jar:4.1.87.Final]\r\n    \tat io.netty.buffer.AbstractByteBuf.writeBytes(AbstractByteBuf.java:1132) ~[netty-buffer-4.1.87.Final.jar:4.1.87.Final]\r\n    \tat io.netty.channel.socket.nio.NioSocketChannel.doReadBytes(NioSocketChannel.java:357) ~[netty-transport-4.1.87.Final.jar:4.1.87.Final]\r\n    \tat io.netty.channel.nio.AbstractNioByteChannel$NioByteUnsafe.read(AbstractNioByteChannel.java:151) ~[netty-transport-4.1.87.Final.jar:4.1.87.Final]\r\n    \tat io.netty.channel.nio.NioEventLoop.processSelectedKey(NioEventLoop.java:788) ~[netty-transport-4.1.87.Final.jar:4.1.87.Final]\r\n    \tat io.netty.channel.nio.NioEventLoop.processSelectedKeysOptimized(NioEventLoop.java:724) ~[netty-transport-4.1.87.Final.jar:4.1.87.Final]\r\n    \tat io.netty.channel.nio.NioEventLoop.processSelectedKeys(NioEventLoop.java:650) ~[netty-transport-4.1.87.Final.jar:4.1.87.Final]\r\n    \tat io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:562) ~[netty-transport-4.1.87.Final.jar:4.1.87.Final]\r\n    \tat io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:997) ~[netty-common-4.1.87.Final.jar:4.1.87.Final]\r\n    \tat io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74) ~[netty-common-4.1.87.Final.jar:4.1.87.Final]\r\n    \tat io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30) ~[netty-common-4.1.87.Final.jar:4.1.87.Final]\r\n    \tat java.base/java.lang.Thread.run(Thread.java:833) ~[na:na]\r\n\r\nThis is the code from the main:\r\n\r\n            String url = &quot;https://relatedwords.org/relatedto/&quot;;\r\n    \t\tSystem.setProperty(&quot;webdriver.chrome.driver&quot;, filePath);\r\n    \r\n    \t\tChromeOptions chromeOptions = new ChromeOptions();\r\n    \t\tchromeOptions.addArguments(&quot;--headless&quot;);\r\n    \r\n    \t\tWebDriver driver = new ChromeDriver(chromeOptions);\r\n    \t\tdriver.get(url + &quot;Fishsticks&quot;);\r\n    \r\n    \t\tWebElement words = driver.findElement(By.className(&quot;words&quot;));\r\n    \t\tfinal List&lt;WebElement&gt; wordList = words.findElements(By.tagName(&quot;a&quot;));\r\n    \t\twordList.forEach(word -&gt; System.out.println(word.getText()));\r\n    \r\n    \t\t// when I remove this I do not get any exceptions\r\n    \t\tdriver.quit();\r\n\r\nI use the latest chrome version I just checked, and there are no updates available (Version 109.0.5414.120) and I am using chrome driver version ChromeDriver 109.0.5414.74 and the latest selenium version 4.8.0\r\n\r\nSo what is the solution here? I tried to read so many stack threads but have not found any solution","title":"Selenium java.net.SocketException: Connection reset when calling driver.quit();","body":"<p>I saw these threads:</p>\n<p><a href=\"https://stackoverflow.com/questions/63303153/java-net-socketexception-connection-reset-on-selenium-driver-close-or-driver\">java.net.SocketException: Connection reset on Selenium driver.close() or driver.quit() statements</a></p>\n<p><a href=\"https://stackoverflow.com/questions/72755662/selenium-java-java-net-socketexception-connection-reset\">selenium/java- java.net.SocketException: Connection reset</a></p>\n<p>But I still don't understand the issue here. Everything is working fine, I get the response and content from the website and when I'm done I call the <code>driver.quit();</code> / <code>driver.close();</code> and get the exception. If I don't call that <code>.quit();</code> I don't get the exception.</p>\n<p>I get this exception after I get the web scraping content:</p>\n<pre><code>2023-01-31T21:28:31.222+01:00  WARN 8400 --- [cHttpClient-1-4] o.a.netty.handler.WebSocketHandler       : onError\n\njava.net.SocketException: Connection reset\n    at java.base/sun.nio.ch.SocketChannelImpl.throwConnectionReset(SocketChannelImpl.java:394) ~[na:na]\n    at java.base/sun.nio.ch.SocketChannelImpl.read(SocketChannelImpl.java:426) ~[na:na]\n    at io.netty.buffer.PooledByteBuf.setBytes(PooledByteBuf.java:259) ~[netty-buffer-4.1.87.Final.jar:4.1.87.Final]\n    at io.netty.buffer.AbstractByteBuf.writeBytes(AbstractByteBuf.java:1132) ~[netty-buffer-4.1.87.Final.jar:4.1.87.Final]\n    at io.netty.channel.socket.nio.NioSocketChannel.doReadBytes(NioSocketChannel.java:357) ~[netty-transport-4.1.87.Final.jar:4.1.87.Final]\n    at io.netty.channel.nio.AbstractNioByteChannel$NioByteUnsafe.read(AbstractNioByteChannel.java:151) ~[netty-transport-4.1.87.Final.jar:4.1.87.Final]\n    at io.netty.channel.nio.NioEventLoop.processSelectedKey(NioEventLoop.java:788) ~[netty-transport-4.1.87.Final.jar:4.1.87.Final]\n    at io.netty.channel.nio.NioEventLoop.processSelectedKeysOptimized(NioEventLoop.java:724) ~[netty-transport-4.1.87.Final.jar:4.1.87.Final]\n    at io.netty.channel.nio.NioEventLoop.processSelectedKeys(NioEventLoop.java:650) ~[netty-transport-4.1.87.Final.jar:4.1.87.Final]\n    at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:562) ~[netty-transport-4.1.87.Final.jar:4.1.87.Final]\n    at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:997) ~[netty-common-4.1.87.Final.jar:4.1.87.Final]\n    at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74) ~[netty-common-4.1.87.Final.jar:4.1.87.Final]\n    at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30) ~[netty-common-4.1.87.Final.jar:4.1.87.Final]\n    at java.base/java.lang.Thread.run(Thread.java:833) ~[na:na]\n\n2023-01-31T21:28:31.229+01:00  WARN 8400 --- [cHttpClient-1-4] o.openqa.selenium.remote.http.WebSocket  : Connection reset\n\njava.net.SocketException: Connection reset\n    at java.base/sun.nio.ch.SocketChannelImpl.throwConnectionReset(SocketChannelImpl.java:394) ~[na:na]\n    at java.base/sun.nio.ch.SocketChannelImpl.read(SocketChannelImpl.java:426) ~[na:na]\n    at io.netty.buffer.PooledByteBuf.setBytes(PooledByteBuf.java:259) ~[netty-buffer-4.1.87.Final.jar:4.1.87.Final]\n    at io.netty.buffer.AbstractByteBuf.writeBytes(AbstractByteBuf.java:1132) ~[netty-buffer-4.1.87.Final.jar:4.1.87.Final]\n    at io.netty.channel.socket.nio.NioSocketChannel.doReadBytes(NioSocketChannel.java:357) ~[netty-transport-4.1.87.Final.jar:4.1.87.Final]\n    at io.netty.channel.nio.AbstractNioByteChannel$NioByteUnsafe.read(AbstractNioByteChannel.java:151) ~[netty-transport-4.1.87.Final.jar:4.1.87.Final]\n    at io.netty.channel.nio.NioEventLoop.processSelectedKey(NioEventLoop.java:788) ~[netty-transport-4.1.87.Final.jar:4.1.87.Final]\n    at io.netty.channel.nio.NioEventLoop.processSelectedKeysOptimized(NioEventLoop.java:724) ~[netty-transport-4.1.87.Final.jar:4.1.87.Final]\n    at io.netty.channel.nio.NioEventLoop.processSelectedKeys(NioEventLoop.java:650) ~[netty-transport-4.1.87.Final.jar:4.1.87.Final]\n    at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:562) ~[netty-transport-4.1.87.Final.jar:4.1.87.Final]\n    at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:997) ~[netty-common-4.1.87.Final.jar:4.1.87.Final]\n    at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74) ~[netty-common-4.1.87.Final.jar:4.1.87.Final]\n    at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30) ~[netty-common-4.1.87.Final.jar:4.1.87.Final]\n    at java.base/java.lang.Thread.run(Thread.java:833) ~[na:na]\n</code></pre>\n<p>This is the code from the main:</p>\n<pre><code>        String url = &quot;https://relatedwords.org/relatedto/&quot;;\n        System.setProperty(&quot;webdriver.chrome.driver&quot;, filePath);\n\n        ChromeOptions chromeOptions = new ChromeOptions();\n        chromeOptions.addArguments(&quot;--headless&quot;);\n\n        WebDriver driver = new ChromeDriver(chromeOptions);\n        driver.get(url + &quot;Fishsticks&quot;);\n\n        WebElement words = driver.findElement(By.className(&quot;words&quot;));\n        final List&lt;WebElement&gt; wordList = words.findElements(By.tagName(&quot;a&quot;));\n        wordList.forEach(word -&gt; System.out.println(word.getText()));\n\n        // when I remove this I do not get any exceptions\n        driver.quit();\n</code></pre>\n<p>I use the latest chrome version I just checked, and there are no updates available (Version 109.0.5414.120) and I am using chrome driver version ChromeDriver 109.0.5414.74 and the latest selenium version 4.8.0</p>\n<p>So what is the solution here? I tried to read so many stack threads but have not found any solution</p>\n"},{"tags":["java","spring-boot","spring-security","spring-webflux"],"comments":[{"owner":{"account_id":16506849,"reputation":153,"user_id":11926676,"display_name":"DILIP DHANKECHA"},"score":0,"creation_date":1622117214,"post_id":67720651,"comment_id":119701618,"body_markdown":"@Alex I am talking about PathMatcher..","body":"@Alex I am talking about PathMatcher.."}],"answers":[{"tags":[],"owner":{"account_id":7134819,"reputation":5058,"user_id":5454842,"display_name":"Marcus Hert da Coregio"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1622209852,"creation_date":1622209852,"answer_id":67740134,"question_id":67720651,"body_markdown":"The [Spring Security documentation][1] has some examples of how to do that.\r\n\r\nI think you could do something like:\r\n```java\r\n@Configuration\r\n@EnableWebFluxSecurity\r\nstatic class MultiSecurityHttpConfig {\r\n\r\n    @Order(Ordered.HIGHEST_PRECEDENCE)                                                      \r\n    @Bean\r\n    SecurityWebFilterChain yourEndpointHttpSecurity(ServerHttpSecurity http) {\r\n        http\r\n            .securityMatcher(new PathPatternParserServerWebExchangeMatcher(&quot;/your-endpoint/**&quot;))      \r\n            .authorizeExchange((exchanges) -&gt; exchanges\r\n                .anyExchange().authenticated()\r\n            )\r\n            .httpBasic(withDefaults());                         \r\n        return http.build();\r\n    }\r\n\r\n    @Bean\r\n    SecurityWebFilterChain webHttpSecurity(ServerHttpSecurity http) {                       \r\n        http\r\n            .csrf().disable()\r\n            .exceptionHandling().and()\r\n            .httpBasic().disable()                                                  \r\n        return http.build();\r\n    }\r\n\r\n}\r\n```\r\n\r\nThis way firstly your `yourEndpointHttpSecurity` **Bean** would be evaluated if the path matches `/your-endpoint/**` and then your default `webHttpSecurity`\r\n\r\n  [1]: https://docs.spring.io/spring-security/site/docs/current/reference/html5/#jc-webflux-multiple-filter-chains","title":"Multiple HttpSecurity for different path matcher","body":"<p>The <a href=\"https://docs.spring.io/spring-security/site/docs/current/reference/html5/#jc-webflux-multiple-filter-chains\" rel=\"nofollow noreferrer\">Spring Security documentation</a> has some examples of how to do that.</p>\n<p>I think you could do something like:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Configuration\n@EnableWebFluxSecurity\nstatic class MultiSecurityHttpConfig {\n\n    @Order(Ordered.HIGHEST_PRECEDENCE)                                                      \n    @Bean\n    SecurityWebFilterChain yourEndpointHttpSecurity(ServerHttpSecurity http) {\n        http\n            .securityMatcher(new PathPatternParserServerWebExchangeMatcher(&quot;/your-endpoint/**&quot;))      \n            .authorizeExchange((exchanges) -&gt; exchanges\n                .anyExchange().authenticated()\n            )\n            .httpBasic(withDefaults());                         \n        return http.build();\n    }\n\n    @Bean\n    SecurityWebFilterChain webHttpSecurity(ServerHttpSecurity http) {                       \n        http\n            .csrf().disable()\n            .exceptionHandling().and()\n            .httpBasic().disable()                                                  \n        return http.build();\n    }\n\n}\n</code></pre>\n<p>This way firstly your <code>yourEndpointHttpSecurity</code> <strong>Bean</strong> would be evaluated if the path matches <code>/your-endpoint/**</code> and then your default <code>webHttpSecurity</code></p>\n"}],"owner":{"account_id":16506849,"reputation":153,"user_id":11926676,"display_name":"DILIP DHANKECHA"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1099,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1675201663,"creation_date":1622112751,"question_id":67720651,"body_markdown":"In my current system, we are using below functionality for Spring Security gateway which is mentioned below.\r\n\r\n&lt;!-- language: java --&gt;\r\n\r\n     http\r\n       .csrf().disable()\r\n       .exceptionHandling()\r\n           .and()\r\n       .httpBasic().disable()\r\n\r\nbut now I want to build a new endpoint which will use HTTP basic auth. How to manage this things using `PathMatcher`?\r\n\r\nIf we want to use different configuration methods for HTTP basic auth disable or enable. How it will work for me?\r\n\r\nWhen I will use two filter inside same class then I will get below error:\r\n\r\n```    \r\nDescription:\r\n\r\nThe bean &#39;conversionServicePostProcessor&#39;, defined in class path resource [org/springframework/security/config/annotation/web/configuration/WebSecurityConfiguration.class], could not be registered. A bean with that name has already been defined in class path resource [org/springframework/security/config/annotation/web/reactive/WebFluxSecurityConfiguration.class] and overriding is disabled.\r\n\r\nAction:\r\n\r\nConsider renaming one of the beans or enabling overriding by setting spring.main.allow-bean-definition-overriding=true\r\n```","title":"Multiple HttpSecurity for different path matcher","body":"<p>In my current system, we are using below functionality for Spring Security gateway which is mentioned below.</p>\n<pre class=\"lang-java prettyprint-override\"><code> http\n   .csrf().disable()\n   .exceptionHandling()\n       .and()\n   .httpBasic().disable()\n</code></pre>\n<p>but now I want to build a new endpoint which will use HTTP basic auth. How to manage this things using <code>PathMatcher</code>?</p>\n<p>If we want to use different configuration methods for HTTP basic auth disable or enable. How it will work for me?</p>\n<p>When I will use two filter inside same class then I will get below error:</p>\n<pre><code>Description:\n\nThe bean 'conversionServicePostProcessor', defined in class path resource [org/springframework/security/config/annotation/web/configuration/WebSecurityConfiguration.class], could not be registered. A bean with that name has already been defined in class path resource [org/springframework/security/config/annotation/web/reactive/WebFluxSecurityConfiguration.class] and overriding is disabled.\n\nAction:\n\nConsider renaming one of the beans or enabling overriding by setting spring.main.allow-bean-definition-overriding=true\n</code></pre>\n"},{"tags":["java","ethereum","web3-java"],"answers":[{"tags":[],"owner":{"account_id":9698070,"reputation":180,"user_id":7193875,"display_name":"dHour"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1549272190,"creation_date":1549272190,"answer_id":54513150,"question_id":54494730,"body_markdown":"Not sure how you can detect it, but you could maybe cache the current nonce, ie. in Redis, and then check that value whenever you are sending the transaction. Once the transaction is sent, update the nonce and each server would share the same instance of cache. ","title":"recognizing too high nonce","body":"<p>Not sure how you can detect it, but you could maybe cache the current nonce, ie. in Redis, and then check that value whenever you are sending the transaction. Once the transaction is sent, update the nonce and each server would share the same instance of cache. </p>\n"}],"owner":{"account_id":6131614,"reputation":595,"user_id":4781594,"accept_rate":75,"display_name":"Phil"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":503,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1675201187,"creation_date":1549122885,"question_id":54494730,"body_markdown":"We have a cluster of servers which run a service. This services are broadcasting transactions from one address to many different addresses.\r\nThe problem now is, that they work in parallel. This means, that they always need to know the next valid nonce. Sometimes it happens that a service tries to broadcast a transaction with a nonce which is too high. For example lets say the last transaction of address &quot;0xabc...&quot; has the nonce 100. Now one service tries to broadcast a raw transaction with a nonce of 102 instead of the valid 101like this:\r\n```\r\nweb3j.ethSendRawTransaction(rawMessageWithNonce102).send();\r\n```\r\n\r\nIs there any way of detecting the issue?\r\n\r\nweb3j of course does not through an error here, because initially the tx gets into the tx pool. But after some time its deleted from there.\r\n\r\nHow can I detect a &quot;too high nonce issue&quot; in my java application? Any ideas?\r\n\r\n","title":"recognizing too high nonce","body":"<p>We have a cluster of servers which run a service. This services are broadcasting transactions from one address to many different addresses.\nThe problem now is, that they work in parallel. This means, that they always need to know the next valid nonce. Sometimes it happens that a service tries to broadcast a transaction with a nonce which is too high. For example lets say the last transaction of address &quot;0xabc...&quot; has the nonce 100. Now one service tries to broadcast a raw transaction with a nonce of 102 instead of the valid 101like this:</p>\n<pre><code>web3j.ethSendRawTransaction(rawMessageWithNonce102).send();\n</code></pre>\n<p>Is there any way of detecting the issue?</p>\n<p>web3j of course does not through an error here, because initially the tx gets into the tx pool. But after some time its deleted from there.</p>\n<p>How can I detect a &quot;too high nonce issue&quot; in my java application? Any ideas?</p>\n"},{"tags":["java","spring-cloud","amazon-sqs"],"comments":[{"owner":{"account_id":2813792,"reputation":1545,"user_id":2419434,"accept_rate":72,"display_name":"javafan"},"score":0,"creation_date":1535626355,"post_id":50867684,"comment_id":91140403,"body_markdown":"Did you fix the issue?","body":"Did you fix the issue?"}],"answers":[{"tags":[],"owner":{"account_id":444485,"reputation":18145,"user_id":836318,"accept_rate":53,"display_name":"wrschneider"},"down_vote_count":0,"up_vote_count":27,"is_accepted":false,"score":27,"last_activity_date":1537219516,"creation_date":1537219516,"answer_id":52375885,"question_id":50867684,"body_markdown":"Ran into the same issue, and I would answer the question one of two ways depending on who generates the message\r\n\r\n* Yes it is possible to set the `contentType` on the message, and if you control the messages being generated, this is preferred. In the AWS Console, when you send a message by hand, there is a tab for &quot;message attributes&quot;.  You would add an attribute with name `contentType` and value `application/json`.  AWS SDK calls should allow you to do the same from application code.\r\n\r\n* For messages that AWS generates without content specified content types, like S3 events, you do in fact need to set `strictContentMatch` to false.  This is documented here: \r\nhttp://cloud.spring.io/spring-cloud-static/spring-cloud-aws/2.0.0.RELEASE/multi/multi__messaging.html#_consuming_aws_event_messages_with_amazon_sqs\r\n\r\nThe document is confusing because it says &quot;without the mime-type header&quot; but the actual name of the header is `contentType`, as you found yourself.","title":"Spring Cloud @SqsListener MessageConversionException: Cannot convert from [java.lang.String] for GenericMessage","body":"<p>Ran into the same issue, and I would answer the question one of two ways depending on who generates the message</p>\n\n<ul>\n<li><p>Yes it is possible to set the <code>contentType</code> on the message, and if you control the messages being generated, this is preferred. In the AWS Console, when you send a message by hand, there is a tab for \"message attributes\".  You would add an attribute with name <code>contentType</code> and value <code>application/json</code>.  AWS SDK calls should allow you to do the same from application code.</p></li>\n<li><p>For messages that AWS generates without content specified content types, like S3 events, you do in fact need to set <code>strictContentMatch</code> to false.  This is documented here: \n<a href=\"http://cloud.spring.io/spring-cloud-static/spring-cloud-aws/2.0.0.RELEASE/multi/multi__messaging.html#_consuming_aws_event_messages_with_amazon_sqs\" rel=\"noreferrer\">http://cloud.spring.io/spring-cloud-static/spring-cloud-aws/2.0.0.RELEASE/multi/multi__messaging.html#_consuming_aws_event_messages_with_amazon_sqs</a></p></li>\n</ul>\n\n<p>The document is confusing because it says \"without the mime-type header\" but the actual name of the header is <code>contentType</code>, as you found yourself.</p>\n"},{"tags":[],"owner":{"account_id":706860,"reputation":9592,"user_id":601844,"display_name":"epox"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1644896630,"creation_date":1590578394,"answer_id":62041860,"question_id":50867684,"body_markdown":"Consistent converter in both &quot;send&quot; and &quot;listen&quot; methods:\r\n=\r\n\r\n    \r\n    /** Provides a deserialization template for incoming SQS messages */\r\n    @Bean\r\n    public QueueMessageHandlerFactory queueMessageHandlerFactory(MessageConverter messageConverter) {\r\n    \r\n        var factory = new QueueMessageHandlerFactory();\r\n        factory.setArgumentResolvers(singletonList(new PayloadArgumentResolver(messageConverter)));\r\n        return factory;\r\n    }\r\n\r\n    /** Provides a serialization template for outgoing SQS messages */\r\n    @Bean\r\n    public QueueMessagingTemplate queueMessagingTemplate(AmazonSQSAsync amazonSQSAsync, MessageConverter messageConverter) {\r\n        return new QueueMessagingTemplate(amazonSQSAsync, (ResourceIdResolver) null, messageConverter);\r\n    }\r\n\r\n    /** Provides JSON converter for SQS messages */\r\n    @Bean\r\n    protected MessageConverter messageConverter(ObjectMapper objectMapper) {\r\n\r\n      var converter = new MappingJackson2MessageConverter();\r\n      converter.setObjectMapper(objectMapper);\r\n      // Serialization support:\r\n      converter.setSerializedPayloadClass(String.class);\r\n      // Deserialization support: (suppress &quot;contentType=application/json&quot; header requirement)\r\n      converter.setStrictContentTypeMatch(false);\r\n      return converter;\r\n    }\r\n    \r\nSee details in the original accepted answer. Credits to @wrschneider.\r\n\r\nNOTE: the above example injects and sets ObjectMapper. That is for HTTP REST controllers consistency (if any controllers).\r\n\r\n---\r\n\r\nImports:\r\n=\r\n\r\n    import static java.util.Collections.singletonList;\r\n\r\n    import com.amazonaws.services.sqs.AmazonSQSAsync;\r\n    import com.fasterxml.jackson.databind.ObjectMapper;\r\n    import org.springframework.cloud.aws.core.env.ResourceIdResolver;\r\n    import org.springframework.cloud.aws.messaging.config.QueueMessageHandlerFactory;\r\n    import org.springframework.cloud.aws.messaging.core.QueueMessagingTemplate;\r\n    import org.springframework.context.annotation.Bean;\r\n    import org.springframework.messaging.converter.MappingJackson2MessageConverter;\r\n    import org.springframework.messaging.converter.MessageConverter;\r\n    import org.springframework.messaging.handler.annotation.support.PayloadArgumentResolver;\r\n\r\n---\r\n\r\nUsage:\r\n=\r\n\r\n      @SqsListener(&quot;my-queue&quot;)\r\n      public void listen(Foo payload) {\r\n\r\n      }\r\n\r\n      public void send(Foo dto) {\r\n        queueMessagingTemplate.convertAndSend(url, dto);\r\n      }\r\n\r\n","title":"Spring Cloud @SqsListener MessageConversionException: Cannot convert from [java.lang.String] for GenericMessage","body":"<h1>Consistent converter in both &quot;send&quot; and &quot;listen&quot; methods:</h1>\n<pre><code>/** Provides a deserialization template for incoming SQS messages */\n@Bean\npublic QueueMessageHandlerFactory queueMessageHandlerFactory(MessageConverter messageConverter) {\n\n    var factory = new QueueMessageHandlerFactory();\n    factory.setArgumentResolvers(singletonList(new PayloadArgumentResolver(messageConverter)));\n    return factory;\n}\n\n/** Provides a serialization template for outgoing SQS messages */\n@Bean\npublic QueueMessagingTemplate queueMessagingTemplate(AmazonSQSAsync amazonSQSAsync, MessageConverter messageConverter) {\n    return new QueueMessagingTemplate(amazonSQSAsync, (ResourceIdResolver) null, messageConverter);\n}\n\n/** Provides JSON converter for SQS messages */\n@Bean\nprotected MessageConverter messageConverter(ObjectMapper objectMapper) {\n\n  var converter = new MappingJackson2MessageConverter();\n  converter.setObjectMapper(objectMapper);\n  // Serialization support:\n  converter.setSerializedPayloadClass(String.class);\n  // Deserialization support: (suppress &quot;contentType=application/json&quot; header requirement)\n  converter.setStrictContentTypeMatch(false);\n  return converter;\n}\n</code></pre>\n<p>See details in the original accepted answer. Credits to @wrschneider.</p>\n<p>NOTE: the above example injects and sets ObjectMapper. That is for HTTP REST controllers consistency (if any controllers).</p>\n<hr />\n<h1>Imports:</h1>\n<pre><code>import static java.util.Collections.singletonList;\n\nimport com.amazonaws.services.sqs.AmazonSQSAsync;\nimport com.fasterxml.jackson.databind.ObjectMapper;\nimport org.springframework.cloud.aws.core.env.ResourceIdResolver;\nimport org.springframework.cloud.aws.messaging.config.QueueMessageHandlerFactory;\nimport org.springframework.cloud.aws.messaging.core.QueueMessagingTemplate;\nimport org.springframework.context.annotation.Bean;\nimport org.springframework.messaging.converter.MappingJackson2MessageConverter;\nimport org.springframework.messaging.converter.MessageConverter;\nimport org.springframework.messaging.handler.annotation.support.PayloadArgumentResolver;\n</code></pre>\n<hr />\n<h1>Usage:</h1>\n<pre><code>  @SqsListener(&quot;my-queue&quot;)\n  public void listen(Foo payload) {\n\n  }\n\n  public void send(Foo dto) {\n    queueMessagingTemplate.convertAndSend(url, dto);\n  }\n</code></pre>\n"}],"owner":{"account_id":6359776,"reputation":666,"user_id":4935626,"display_name":"Joe Stepowski"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":17665,"favorite_count":0,"down_vote_count":0,"up_vote_count":22,"answer_count":2,"score":22,"last_activity_date":1675200679,"creation_date":1529022622,"question_id":50867684,"body_markdown":"I&#39;m seeing the following exception when I try to consume an SQS message: \r\n\r\n    org.springframework.messaging.converter.MessageConversionException: \r\n\r\n    Cannot convert from [java.lang.String] to [com.example.demo.Foo] for GenericMessage [payload={}, headers={LogicalResourceId=my-queue, ApproximateReceiveCount=1, SentTimestamp=1529021258825, ReceiptHandle=xxxx, Visibility=org.springframework.cloud.aws.messaging.listener.QueueMessageVisibility@47ce6922, SenderId=xxxx, lookupDestination=my-queue, ApproximateFirstReceiveTimestamp=1529021264456, MessageId=xxxx}]\r\n    \tat org.springframework.messaging.handler.annotation.support.PayloadArgumentResolver.resolveArgument(PayloadArgumentResolver.java:144)\r\n    \tat org.springframework.messaging.handler.invocation.HandlerMethodArgumentResolverComposite.resolveArgument(HandlerMethodArgumentResolverComposite.java:116)\r\n    \tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.getMethodArgumentValues(InvocableHandlerMethod.java:137)\r\n    \tat org.springframework.messaging.handler.invocation.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:109)\r\n    \tat org.springframework.messaging.handler.invocation.AbstractMethodMessageHandler.handleMatch(AbstractMethodMessageHandler.java:515)\r\n    \tat org.springframework.messaging.handler.invocation.AbstractMethodMessageHandler.handleMessageInternal(AbstractMethodMessageHandler.java:473)\r\n    \tat org.springframework.messaging.handler.invocation.AbstractMethodMessageHandler.handleMessage(AbstractMethodMessageHandler.java:409)\r\n    \tat org.springframework.cloud.aws.messaging.listener.SimpleMessageListenerContainer.executeMessage(SimpleMessageListenerContainer.java:205)\r\n    \tat org.springframework.cloud.aws.messaging.listener.SimpleMessageListenerContainer$MessageExecutor.run(SimpleMessageListenerContainer.java:342)\r\n    \tat org.springframework.cloud.aws.messaging.listener.SimpleMessageListenerContainer$SignalExecutingRunnable.run(SimpleMessageListenerContainer.java:397)\r\n    \tat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)\r\n    \tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)\r\n    \tat java.lang.Thread.run(Thread.java:748)\r\n\r\n\r\nSpring Boot code is as follows:\r\n\r\n    @Configuration\r\n    @EnableSqs\r\n    public class AmazonSqsConfiguration {\r\n    \r\n        @Bean\r\n        public AmazonSQS amazonSQSAsync() {\r\n            return AmazonSQSAsyncClientBuilder.standard()\r\n                .withRegion(Regions.US_WEST_2)\r\n                .build();\r\n        }\r\n    }\r\n\r\n    @Service\r\n    public class MyService {\r\n    \r\n        // Throws MessageConversionException\r\n        @SqsListener(&quot;my-queue&quot;)\r\n        public void listen(Foo payload) {\r\n\r\n        }\r\n\r\n        // Works fine\r\n        @SqsListener(&quot;my-queue&quot;)\r\n        public void listen(String payload) {\r\n\r\n        }\r\n    }\r\n\r\nI&#39;m using `org.springframework.cloud:spring-cloud-aws-messaging:2.0.0.RC2`\r\n\r\nI do have Jackson 2 libraries on my classpath, so `PayloadArgumentResolver` is trying to use `MappingJackson2MessageConverter` to deserialize my message payload.  However, because the SQS message is missing a `contentType` header and `strictContentTypeMatch` is set to true, `canConvertFrom` returns false.\r\n\r\nhttps://github.com/spring-projects/spring-framework/blob/f5e8f4983f7653169f3da8a3287499fce93cadd4/spring-messaging/src/main/java/org/springframework/messaging/converter/AbstractMessageConverter.java#L237\r\n\r\nI don&#39;t see how it is possible to set `contentType` header for SQS messages - am I missing something?\r\n\r\nShould Spring Cloud `QueueMessageHandler` be setting `strictContentTypeMatch` to true?\r\n\r\nhttps://github.com/spring-cloud/spring-cloud-aws/blob/6a7c3c31709d4239131b27936de29385df414d41/spring-cloud-aws-messaging/src/main/java/org/springframework/cloud/aws/messaging/listener/QueueMessageHandler.java#L217","title":"Spring Cloud @SqsListener MessageConversionException: Cannot convert from [java.lang.String] for GenericMessage","body":"<p>I'm seeing the following exception when I try to consume an SQS message: </p>\n\n<pre><code>org.springframework.messaging.converter.MessageConversionException: \n\nCannot convert from [java.lang.String] to [com.example.demo.Foo] for GenericMessage [payload={}, headers={LogicalResourceId=my-queue, ApproximateReceiveCount=1, SentTimestamp=1529021258825, ReceiptHandle=xxxx, Visibility=org.springframework.cloud.aws.messaging.listener.QueueMessageVisibility@47ce6922, SenderId=xxxx, lookupDestination=my-queue, ApproximateFirstReceiveTimestamp=1529021264456, MessageId=xxxx}]\n    at org.springframework.messaging.handler.annotation.support.PayloadArgumentResolver.resolveArgument(PayloadArgumentResolver.java:144)\n    at org.springframework.messaging.handler.invocation.HandlerMethodArgumentResolverComposite.resolveArgument(HandlerMethodArgumentResolverComposite.java:116)\n    at org.springframework.messaging.handler.invocation.InvocableHandlerMethod.getMethodArgumentValues(InvocableHandlerMethod.java:137)\n    at org.springframework.messaging.handler.invocation.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:109)\n    at org.springframework.messaging.handler.invocation.AbstractMethodMessageHandler.handleMatch(AbstractMethodMessageHandler.java:515)\n    at org.springframework.messaging.handler.invocation.AbstractMethodMessageHandler.handleMessageInternal(AbstractMethodMessageHandler.java:473)\n    at org.springframework.messaging.handler.invocation.AbstractMethodMessageHandler.handleMessage(AbstractMethodMessageHandler.java:409)\n    at org.springframework.cloud.aws.messaging.listener.SimpleMessageListenerContainer.executeMessage(SimpleMessageListenerContainer.java:205)\n    at org.springframework.cloud.aws.messaging.listener.SimpleMessageListenerContainer$MessageExecutor.run(SimpleMessageListenerContainer.java:342)\n    at org.springframework.cloud.aws.messaging.listener.SimpleMessageListenerContainer$SignalExecutingRunnable.run(SimpleMessageListenerContainer.java:397)\n    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)\n    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)\n    at java.lang.Thread.run(Thread.java:748)\n</code></pre>\n\n<p>Spring Boot code is as follows:</p>\n\n<pre><code>@Configuration\n@EnableSqs\npublic class AmazonSqsConfiguration {\n\n    @Bean\n    public AmazonSQS amazonSQSAsync() {\n        return AmazonSQSAsyncClientBuilder.standard()\n            .withRegion(Regions.US_WEST_2)\n            .build();\n    }\n}\n\n@Service\npublic class MyService {\n\n    // Throws MessageConversionException\n    @SqsListener(\"my-queue\")\n    public void listen(Foo payload) {\n\n    }\n\n    // Works fine\n    @SqsListener(\"my-queue\")\n    public void listen(String payload) {\n\n    }\n}\n</code></pre>\n\n<p>I'm using <code>org.springframework.cloud:spring-cloud-aws-messaging:2.0.0.RC2</code></p>\n\n<p>I do have Jackson 2 libraries on my classpath, so <code>PayloadArgumentResolver</code> is trying to use <code>MappingJackson2MessageConverter</code> to deserialize my message payload.  However, because the SQS message is missing a <code>contentType</code> header and <code>strictContentTypeMatch</code> is set to true, <code>canConvertFrom</code> returns false.</p>\n\n<p><a href=\"https://github.com/spring-projects/spring-framework/blob/f5e8f4983f7653169f3da8a3287499fce93cadd4/spring-messaging/src/main/java/org/springframework/messaging/converter/AbstractMessageConverter.java#L237\" rel=\"noreferrer\">https://github.com/spring-projects/spring-framework/blob/f5e8f4983f7653169f3da8a3287499fce93cadd4/spring-messaging/src/main/java/org/springframework/messaging/converter/AbstractMessageConverter.java#L237</a></p>\n\n<p>I don't see how it is possible to set <code>contentType</code> header for SQS messages - am I missing something?</p>\n\n<p>Should Spring Cloud <code>QueueMessageHandler</code> be setting <code>strictContentTypeMatch</code> to true?</p>\n\n<p><a href=\"https://github.com/spring-cloud/spring-cloud-aws/blob/6a7c3c31709d4239131b27936de29385df414d41/spring-cloud-aws-messaging/src/main/java/org/springframework/cloud/aws/messaging/listener/QueueMessageHandler.java#L217\" rel=\"noreferrer\">https://github.com/spring-cloud/spring-cloud-aws/blob/6a7c3c31709d4239131b27936de29385df414d41/spring-cloud-aws-messaging/src/main/java/org/springframework/cloud/aws/messaging/listener/QueueMessageHandler.java#L217</a></p>\n"},{"tags":["java","multithreading","caching","threadpool","guava"],"comments":[{"owner":{"account_id":465573,"reputation":192694,"user_id":869736,"accept_rate":82,"display_name":"Louis Wasserman"},"score":1,"creation_date":1675280820,"post_id":75302979,"comment_id":132897039,"body_markdown":"Have you looked at http://guava.dev/CacheBuilder ?  It recommends you switch to Caffeine, which has a specific async cache API as well.","body":"Have you looked at <a href=\"http://guava.dev/CacheBuilder\" rel=\"nofollow noreferrer\">guava.dev/CacheBuilder</a> ?  It recommends you switch to Caffeine, which has a specific async cache API as well."},{"owner":{"account_id":6156584,"reputation":193,"user_id":4799382,"accept_rate":0,"display_name":"codemaster001"},"score":0,"creation_date":1675281134,"post_id":75302979,"comment_id":132897119,"body_markdown":"@LouisWasserman can I achieve this with guava itself instead of caffeine? I looked at the cachebuilder method, but I couldn&#39;t find anything that can help the above situation","body":"@LouisWasserman can I achieve this with guava itself instead of caffeine? I looked at the cachebuilder method, but I couldn&#39;t find anything that can help the above situation"},{"owner":{"account_id":6156584,"reputation":193,"user_id":4799382,"accept_rate":0,"display_name":"codemaster001"},"score":0,"creation_date":1675282731,"post_id":75302979,"comment_id":132897637,"body_markdown":"could you please give me an example with caffeine?","body":"could you please give me an example with caffeine?"}],"owner":{"account_id":6156584,"reputation":193,"user_id":4799382,"accept_rate":0,"display_name":"codemaster001"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":112,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1675200487,"creation_date":1675198123,"question_id":75302979,"body_markdown":"I have implemented a guava cache.In the load method of the guava cache I wanted to call a service asynchronously. I don&#39;t want to block this call for other thread, so, on it&#39;s call back I wanted to load the cache. How can I achieve this?\r\n\r\n```\r\npublic CacheLoader(final DataValueProvider dataValueProvider) {\r\n        this.parentExecutor = Executors.newSingleThreadExecutor(new DefaultThreadFactory(&quot;cache-loader&quot;));\r\n        this.executorService = MoreExecutors.listeningDecorator(parentExecutor);\r\n        this.secretValueProvider = secretValueProvider;\r\n    }\r\n    /**\r\n     * Call back method invoked by Guava to loads the initial value of the secretManager entry.\r\n     */\r\n    @Override\r\n    public String load(CacheIndex cacheIndex) throws Exception {\r\n       return dataValueProvider.constructDataMangerFromSource(cacheIndex);\r\n    }\r\n\r\n```\r\n\r\n```\r\n protected String constructDataMangerFromSource(CacheIndex cacheIndex) {\r\n       GetSecretValueRequest getSecretValueRequest = new GetSecretValueRequest()\r\n                .withSecretId(cacheIndex.secretArn);\r\n\r\n        Future&lt;GetSecretValueResult&gt; future = awsSecretsManagerAsync.getSecretValueAsync(\r\n                getSecretValueRequest, new AsyncHandler&lt;GetSecretValueRequest, GetSecretValueResult&gt;() {\r\n                    @SneakyThrows\r\n                    @Override\r\n                    public void onError(Exception e) {\r\n                        //I want to throw exception from here\r\n                    }\r\n\r\n                    @Override\r\n                    public void onSuccess(GetSecretValueRequest request, GetSecretValueResult getSecretValueResult) {\r\n                        long endTime = System.currentTimeMillis();\r\n                        long totalTime = endTime - startTime;\r\n                        logger.info(&quot;Total time taken in the call &quot; + totalTime);\r\n                        //I want to return the value from here\r\n\r\n                    }\r\n                });\r\n        try {\r\n//This is currently blocking other thread\r\n\r\n            GetSecretValueResult getSecretValueResult = future.get();\r\n            return getSecretValueResult.getSecretString();\r\n        } catch (Exception ex) {\r\n            logger.error(&quot;SecretManage call failed  &quot; + ex.getCause() + &quot; &quot; + ex.getMessage());\r\n            throw ex;\r\n        }\r\n    }\r\n\r\n```\r\n","title":"Guava caching load method with an async service call","body":"<p>I have implemented a guava cache.In the load method of the guava cache I wanted to call a service asynchronously. I don't want to block this call for other thread, so, on it's call back I wanted to load the cache. How can I achieve this?</p>\n<pre><code>public CacheLoader(final DataValueProvider dataValueProvider) {\n        this.parentExecutor = Executors.newSingleThreadExecutor(new DefaultThreadFactory(&quot;cache-loader&quot;));\n        this.executorService = MoreExecutors.listeningDecorator(parentExecutor);\n        this.secretValueProvider = secretValueProvider;\n    }\n    /**\n     * Call back method invoked by Guava to loads the initial value of the secretManager entry.\n     */\n    @Override\n    public String load(CacheIndex cacheIndex) throws Exception {\n       return dataValueProvider.constructDataMangerFromSource(cacheIndex);\n    }\n\n</code></pre>\n<pre><code> protected String constructDataMangerFromSource(CacheIndex cacheIndex) {\n       GetSecretValueRequest getSecretValueRequest = new GetSecretValueRequest()\n                .withSecretId(cacheIndex.secretArn);\n\n        Future&lt;GetSecretValueResult&gt; future = awsSecretsManagerAsync.getSecretValueAsync(\n                getSecretValueRequest, new AsyncHandler&lt;GetSecretValueRequest, GetSecretValueResult&gt;() {\n                    @SneakyThrows\n                    @Override\n                    public void onError(Exception e) {\n                        //I want to throw exception from here\n                    }\n\n                    @Override\n                    public void onSuccess(GetSecretValueRequest request, GetSecretValueResult getSecretValueResult) {\n                        long endTime = System.currentTimeMillis();\n                        long totalTime = endTime - startTime;\n                        logger.info(&quot;Total time taken in the call &quot; + totalTime);\n                        //I want to return the value from here\n\n                    }\n                });\n        try {\n//This is currently blocking other thread\n\n            GetSecretValueResult getSecretValueResult = future.get();\n            return getSecretValueResult.getSecretString();\n        } catch (Exception ex) {\n            logger.error(&quot;SecretManage call failed  &quot; + ex.getCause() + &quot; &quot; + ex.getMessage());\n            throw ex;\n        }\n    }\n\n</code></pre>\n"},{"tags":["java","intellij-idea","character-encoding"],"comments":[{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1651620720,"post_id":72106304,"comment_id":127405801,"body_markdown":"`System.out.println(System.getProperty(&quot;file.encoding&quot;));` What does that give? What is your OS?","body":"<code>System.out.println(System.getProperty(&quot;file.encoding&quot;));</code> What does that give? What is your OS?"},{"owner":{"account_id":24895864,"reputation":3,"user_id":18767113,"display_name":"kutbeyy"},"score":0,"creation_date":1651622438,"post_id":72106304,"comment_id":127406065,"body_markdown":"Terminal output: UTF-8, My OS is Windows 10","body":"Terminal output: UTF-8, My OS is Windows 10"},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1651624496,"post_id":72106304,"comment_id":127406343,"body_markdown":"Try setting the IDE encoding to `Windows-1254`. What btw does `chcp` give in cmd.exe?","body":"Try setting the IDE encoding to <code>Windows-1254</code>. What btw does <code>chcp</code> give in cmd.exe?"},{"owner":{"account_id":24895864,"reputation":3,"user_id":18767113,"display_name":"kutbeyy"},"score":0,"creation_date":1651625912,"post_id":72106304,"comment_id":127406590,"body_markdown":"I tried the Windows-1254, the problem persisted. chcp cmd output:857(Turkish).  I tested everything from scratch in the virtual windows operating system, there is no problem there. I think the problem is in my operating system","body":"I tried the Windows-1254, the problem persisted. chcp cmd output:857(Turkish).  I tested everything from scratch in the virtual windows operating system, there is no problem there. I think the problem is in my operating system"},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1651645822,"post_id":72106304,"comment_id":127409526,"body_markdown":"Hmm. Is it the case that *some* Turkish characters are OK? Have a go with IBM857","body":"Hmm. Is it the case that <i>some</i> Turkish characters are OK? Have a go with IBM857"}],"answers":[{"tags":[],"owner":{"account_id":11179248,"reputation":11890,"user_id":8203759,"display_name":"Konstantin Annikov"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1651640787,"creation_date":1651640787,"answer_id":72108180,"question_id":72106304,"body_markdown":"Here is a related issue on YouTrack:\r\n\r\nhttps://youtrack.jetbrains.com/issue/IDEA-291006/Running-the-Java-project-by-using-the-JDK-18-prints-the-garbled-\r\n\r\nFeel free to watch it in order to be notified once it has updates. See [this article](https://intellij-support.jetbrains.com/hc/articles/207241135) if you are not familiar with YouTrack.","title":"intellij idea console output not supporting turkish charecter","body":"<p>Here is a related issue on YouTrack:</p>\n<p><a href=\"https://youtrack.jetbrains.com/issue/IDEA-291006/Running-the-Java-project-by-using-the-JDK-18-prints-the-garbled-\" rel=\"nofollow noreferrer\">https://youtrack.jetbrains.com/issue/IDEA-291006/Running-the-Java-project-by-using-the-JDK-18-prints-the-garbled-</a></p>\n<p>Feel free to watch it in order to be notified once it has updates. See <a href=\"https://intellij-support.jetbrains.com/hc/articles/207241135\" rel=\"nofollow noreferrer\">this article</a> if you are not familiar with YouTrack.</p>\n"},{"tags":[],"owner":{"account_id":24825720,"reputation":1,"user_id":18705551,"display_name":"AlperKorkmaz"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1675199612,"creation_date":1675194494,"answer_id":75302418,"question_id":72106304,"body_markdown":"\r\n\r\nFor turkish character support, you chould choose the international global UTF-8 format. \r\n&lt;p&gt;In IntelliJIdea \r\n**File / Settings / Editor / File Encoding** / *.properties\r\nChoose -&gt; **Default encoding for properties files UTF-8 \r\n\r\n&lt;/p&gt;\r\n\r\n&lt;p&gt; By the use of BOM configurations you can find the correct solution for your files. Do not forget that some choices of BOM for some class files can cause various \\uxxxx errors like &#39;\\ufeff&#39; error &lt;/p&gt;\r\n&lt;p&gt; Moreover you could choose also Global Encoding and Project encoding values just given above in the same tab as UTF-8 to get a more general solution for the future projects.&lt;/p&gt;\r\n\r\n\r\n\r\n\r\n\r\n\r\n[Screenshot of the web content created by the use of many components bfrom messages.properties][1]\r\n\r\n\r\n\r\n\r\n[printed text or response from local server with turkish characters][2]\r\n\r\n\r\n[Settings Page][3]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/QLYnk.png\r\n  [2]: https://i.stack.imgur.com/IAT5w.png\r\n  [3]: https://i.stack.imgur.com/IQAdA.png","title":"intellij idea console output not supporting turkish charecter","body":"<p>For turkish character support, you chould choose the international global UTF-8 format.</p>\n<p>In IntelliJIdea \n**File / Settings / Editor / File Encoding** / *.properties\nChoose -> **Default encoding for properties files UTF-8 \n</p>\n<p> By the use of BOM configurations you can find the correct solution for your files. Do not forget that some choices of BOM for some class files can cause various \\uxxxx errors like '\\ufeff' error </p>\n<p> Moreover you could choose also Global Encoding and Project encoding values just given above in the same tab as UTF-8 to get a more general solution for the future projects.</p>\n<p><a href=\"https://i.stack.imgur.com/QLYnk.png\" rel=\"nofollow noreferrer\">Screenshot of the web content created by the use of many components bfrom messages.properties</a></p>\n<p><a href=\"https://i.stack.imgur.com/IAT5w.png\" rel=\"nofollow noreferrer\">printed text or response from local server with turkish characters</a></p>\n<p><a href=\"https://i.stack.imgur.com/IQAdA.png\" rel=\"nofollow noreferrer\">Settings Page</a></p>\n"}],"owner":{"account_id":24895864,"reputation":3,"user_id":18767113,"display_name":"kutbeyy"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":694,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":72108180,"answer_count":2,"score":0,"last_activity_date":1675199612,"creation_date":1651619024,"question_id":72106304,"body_markdown":"\r\nhttps://stackoverflow.com/questions/35231291/intellij-idea-incorrect-encoding-in-console-output\r\n\r\nhttps://www.jetbrains.com/help/idea/encoding.html\r\n\r\nTurkish characters are not supported in intellij idea&#39;s terminal after run command.\r\nI tried the above two links but I couldn&#39;t solve the problem.\r\n[console output photo-screenshot][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/PDOGW.jpg","title":"intellij idea console output not supporting turkish charecter","body":"<p><a href=\"https://stackoverflow.com/questions/35231291/intellij-idea-incorrect-encoding-in-console-output\">IntelliJ IDEA incorrect encoding in console output</a></p>\n<p><a href=\"https://www.jetbrains.com/help/idea/encoding.html\" rel=\"nofollow noreferrer\">https://www.jetbrains.com/help/idea/encoding.html</a></p>\n<p>Turkish characters are not supported in intellij idea's terminal after run command.\nI tried the above two links but I couldn't solve the problem.\n<a href=\"https://i.stack.imgur.com/PDOGW.jpg\" rel=\"nofollow noreferrer\">console output photo-screenshot</a></p>\n"},{"tags":["java","string","arraylist","split","substring"],"comments":[{"owner":{"account_id":6606677,"reputation":1024,"user_id":5103317,"display_name":"Old Dog Programmer"},"score":0,"creation_date":1675131395,"post_id":75291884,"comment_id":132858552,"body_markdown":"So, what question do you have? Your question did not actually ask anything. Please edit the question to describe what is going wrong or other problem you face, and where you think the problem lies. It might help to include output from an example run, and expected output.","body":"So, what question do you have? Your question did not actually ask anything. Please edit the question to describe what is going wrong or other problem you face, and where you think the problem lies. It might help to include output from an example run, and expected output."},{"owner":{"account_id":27662051,"reputation":3,"user_id":21114649,"display_name":"coder107"},"score":1,"creation_date":1675136139,"post_id":75291884,"comment_id":132859147,"body_markdown":"@OldDogProgrammer My bad I didn&#39;t clarify my question earlier. So, I want to take a Single string at a time from the Wlist Arraylist&lt;String&gt; from Reader class into the Tokenizer class and split it into 3 parts(Ex: teacher will be &quot;te&quot;, &quot;ac&quot;, &quot;her&quot;). If the String has even length(Ex: 6) it should be split into 3 parts equally(i.e 2 letters each). If the string has odd length(Ex: 7) it has to be split into 3 parts where the last part has 3 letters as given in example for String &quot;teacher&quot;.","body":"@OldDogProgrammer My bad I didn&#39;t clarify my question earlier. So, I want to take a Single string at a time from the Wlist Arraylist&lt;String&gt; from Reader class into the Tokenizer class and split it into 3 parts(Ex: teacher will be &quot;te&quot;, &quot;ac&quot;, &quot;her&quot;). If the String has even length(Ex: 6) it should be split into 3 parts equally(i.e 2 letters each). If the string has odd length(Ex: 7) it has to be split into 3 parts where the last part has 3 letters as given in example for String &quot;teacher&quot;."},{"owner":{"account_id":65396,"reputation":8715,"user_id":192465,"accept_rate":85,"display_name":"riddle_me_this"},"score":0,"creation_date":1675199734,"post_id":75291884,"comment_id":132876615,"body_markdown":"Welcome to SO.  Maybe think a little more about the problem first before writing any code, as there are multiple ways to solve your problem.  Would sorting into two lists of even and odd words make it easier to manage?  If so, how would you go about sorting them?  How are you defining a word?  If is it based on length, is &quot;to&quot; a word?","body":"Welcome to SO.  Maybe think a little more about the problem first before writing any code, as there are multiple ways to solve your problem.  Would sorting into two lists of even and odd words make it easier to manage?  If so, how would you go about sorting them?  How are you defining a word?  If is it based on length, is &quot;to&quot; a word?"}],"answers":[{"tags":[],"owner":{"account_id":93689,"reputation":415931,"user_id":256196,"accept_rate":77,"display_name":"Bohemian"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1675198891,"creation_date":1675131748,"answer_id":75292116,"question_id":75291884,"body_markdown":"If you&#39;re asking how to split a string into pairs of letters, with any remainder left with the last split:\r\n\r\n    String[] parts = str.split(&quot;(?&lt;=\\\\G..)(?=..)&quot;);\r\n\r\nwhich achieves your goal (see below).\r\n\r\nThe split matches *between* these two look arounds:\r\n\r\n- `(?&lt;=\\\\G..)` two chars after the end of the last match\r\n- `(?=..)` there are (at least) two chars after\r\n\r\n---\r\n\r\n    String[] wordList = {&quot;Printer&quot;, &quot;Airport&quot;, &quot;Painter&quot;, &quot;Letter&quot;, &quot;vehicle&quot;, &quot;Teacher&quot;};\r\n    List&lt;String[]&gt; splitWords = Arrays.stream(wordList).map(s -&gt; s.split(&quot;(?&lt;=\\\\G..)(?=..)&quot;)).collect(toList());\r\n    splitWords.forEach(a -&gt; System.out.println(Arrays.toString(a)));\r\n\r\nOutput:\r\n\r\n    [Pr, in, ter]\r\n    [Ai, rp, ort]\r\n    [Pa, in, ter]\r\n    [Le, tt, er]\r\n    [ve, hi, cle]\r\n    [Te, ac, her]\r\n\r\n","title":"Split a string in an Arraylist in Java into substring of letters","body":"<p>If you're asking how to split a string into pairs of letters, with any remainder left with the last split:</p>\n<pre><code>String[] parts = str.split(&quot;(?&lt;=\\\\G..)(?=..)&quot;);\n</code></pre>\n<p>which achieves your goal (see below).</p>\n<p>The split matches <em>between</em> these two look arounds:</p>\n<ul>\n<li><code>(?&lt;=\\\\G..)</code> two chars after the end of the last match</li>\n<li><code>(?=..)</code> there are (at least) two chars after</li>\n</ul>\n<hr />\n<pre><code>String[] wordList = {&quot;Printer&quot;, &quot;Airport&quot;, &quot;Painter&quot;, &quot;Letter&quot;, &quot;vehicle&quot;, &quot;Teacher&quot;};\nList&lt;String[]&gt; splitWords = Arrays.stream(wordList).map(s -&gt; s.split(&quot;(?&lt;=\\\\G..)(?=..)&quot;)).collect(toList());\nsplitWords.forEach(a -&gt; System.out.println(Arrays.toString(a)));\n</code></pre>\n<p>Output:</p>\n<pre><code>[Pr, in, ter]\n[Ai, rp, ort]\n[Pa, in, ter]\n[Le, tt, er]\n[ve, hi, cle]\n[Te, ac, her]\n</code></pre>\n"}],"owner":{"account_id":27662051,"reputation":3,"user_id":21114649,"display_name":"coder107"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":58,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75292116,"answer_count":1,"score":0,"last_activity_date":1675198891,"creation_date":1675129124,"question_id":75291884,"body_markdown":"I have two classes Reader and Tokenizer. I want to split Strings in Wlist Arraylist from the Reader class in tokenizer class. Splitting must be done based on odd and even length of the String.\r\n\r\nEx: If string is &quot;teacher&quot;, as its length is odd it should be split into three parts &quot;te&quot;, &quot;ac&quot;, &quot;her&quot;.\r\n\r\nIf string is even like &quot;cattle&quot; it should be split in 3 parts &quot;ca&quot;, &quot;tt&quot;, &quot;le&quot;.\r\n\r\n \r\n\r\n**Reader Class**\r\n\r\n\r\n```\r\nimport java.util.ArrayList;\r\nimport java.util.List;\r\n\r\npublic class Reader {\r\n\r\n    String[] wordList = {&quot;Printer&quot;, &quot;Airport&quot;, &quot;Painter&quot;, &quot;Letter&quot;,\r\n                         &quot;vehicle&quot;, &quot;Teacher&quot;};\r\n\r\n    String[] SentenceList = {&quot;Device made to waste ink and paper&quot;,&quot;Platform for Commercial air transport&quot;,\r\n                             &quot;Someone who uses colors and brushes&quot;,&quot;a written type of communication sent by mail&quot;,\r\n                             &quot;Thing used to travel via land&quot;,&quot;A person who teaches&quot;};\r\n\r\n    ArrayList&lt;String&gt; Wlist = new ArrayList&lt;&gt;(6);\r\n    public ArrayList&lt;String&gt; wordCheck(){\r\n\r\n        for(int i=0;i&lt;6;i++){\r\n            if((wordList[i] != null) &amp;&amp; (!wordList[i].equals(&quot;&quot;)) &amp;&amp; (wordList[i].matches(&quot;^[a-zA-Z]*$&quot;))\r\n                    &amp;&amp; (wordList[i].length()&gt;4)) {\r\n                //System.out.println(&quot;Array does satisfy the required criteria&quot;);\r\n                Wlist.add(wordList[i].toUpperCase());\r\n            }\r\n            else\r\n            {\r\n                System.out.println(&quot;Array does NOT satisfy the required criteria&quot;);\r\n                break;\r\n            }\r\n        }\r\n        //System.out.println(Wlist);\r\n        return Wlist;\r\n    }\r\n\r\n    public ArrayList&lt;String&gt; getWord(){\r\n        return wordCheck();\r\n    }\r\n    public ArrayList&lt;String&gt; Sentence(){\r\n        ArrayList&lt;String&gt; Slist = new ArrayList&lt;&gt;(6);\r\n        for(int i=0;i&lt;6;i++){\r\n            Slist.add(SentenceList[i]);\r\n        }\r\n        //System.out.println(Slist);\r\n        return Slist;\r\n    }\r\n\r\n}\r\n\r\n\r\n\r\n\r\n// This is the updated Tokenizer class\r\nimport java.util.ArrayList;\r\nimport java.util.List;\r\n\r\npublic class Tokenizer {\r\n    Reader rd = new Reader();\r\n    ArrayList&lt;String&gt; SplList = new ArrayList&lt;&gt;();\r\n    public ArrayList&lt;String&gt; splitString() {\r\n        ArrayList&lt;String&gt; Wlist = rd.getWord();\r\n        //String[] result = new String[(Wlist.get().length()+2)/3];\r\n        for(int i=0;i&lt;Wlist.size();i++){\r\n                SplList.add(Arrays.toString(Wlist.get(i).split(&quot;(?&lt;=\\\\\\\\G..)(?=..)&quot;)));\r\n\r\n        }\r\n\r\n        System.out.println(SplList);\r\n        return SplList;\r\n    }\r\n}\r\n```\r\n","title":"Split a string in an Arraylist in Java into substring of letters","body":"<p>I have two classes Reader and Tokenizer. I want to split Strings in Wlist Arraylist from the Reader class in tokenizer class. Splitting must be done based on odd and even length of the String.</p>\n<p>Ex: If string is &quot;teacher&quot;, as its length is odd it should be split into three parts &quot;te&quot;, &quot;ac&quot;, &quot;her&quot;.</p>\n<p>If string is even like &quot;cattle&quot; it should be split in 3 parts &quot;ca&quot;, &quot;tt&quot;, &quot;le&quot;.</p>\n<p><strong>Reader Class</strong></p>\n<pre><code>import java.util.ArrayList;\nimport java.util.List;\n\npublic class Reader {\n\n    String[] wordList = {&quot;Printer&quot;, &quot;Airport&quot;, &quot;Painter&quot;, &quot;Letter&quot;,\n                         &quot;vehicle&quot;, &quot;Teacher&quot;};\n\n    String[] SentenceList = {&quot;Device made to waste ink and paper&quot;,&quot;Platform for Commercial air transport&quot;,\n                             &quot;Someone who uses colors and brushes&quot;,&quot;a written type of communication sent by mail&quot;,\n                             &quot;Thing used to travel via land&quot;,&quot;A person who teaches&quot;};\n\n    ArrayList&lt;String&gt; Wlist = new ArrayList&lt;&gt;(6);\n    public ArrayList&lt;String&gt; wordCheck(){\n\n        for(int i=0;i&lt;6;i++){\n            if((wordList[i] != null) &amp;&amp; (!wordList[i].equals(&quot;&quot;)) &amp;&amp; (wordList[i].matches(&quot;^[a-zA-Z]*$&quot;))\n                    &amp;&amp; (wordList[i].length()&gt;4)) {\n                //System.out.println(&quot;Array does satisfy the required criteria&quot;);\n                Wlist.add(wordList[i].toUpperCase());\n            }\n            else\n            {\n                System.out.println(&quot;Array does NOT satisfy the required criteria&quot;);\n                break;\n            }\n        }\n        //System.out.println(Wlist);\n        return Wlist;\n    }\n\n    public ArrayList&lt;String&gt; getWord(){\n        return wordCheck();\n    }\n    public ArrayList&lt;String&gt; Sentence(){\n        ArrayList&lt;String&gt; Slist = new ArrayList&lt;&gt;(6);\n        for(int i=0;i&lt;6;i++){\n            Slist.add(SentenceList[i]);\n        }\n        //System.out.println(Slist);\n        return Slist;\n    }\n\n}\n\n\n\n\n// This is the updated Tokenizer class\nimport java.util.ArrayList;\nimport java.util.List;\n\npublic class Tokenizer {\n    Reader rd = new Reader();\n    ArrayList&lt;String&gt; SplList = new ArrayList&lt;&gt;();\n    public ArrayList&lt;String&gt; splitString() {\n        ArrayList&lt;String&gt; Wlist = rd.getWord();\n        //String[] result = new String[(Wlist.get().length()+2)/3];\n        for(int i=0;i&lt;Wlist.size();i++){\n                SplList.add(Arrays.toString(Wlist.get(i).split(&quot;(?&lt;=\\\\\\\\G..)(?=..)&quot;)));\n\n        }\n\n        System.out.println(SplList);\n        return SplList;\n    }\n}\n</code></pre>\n"},{"tags":["java","spring-boot","validation"],"answers":[{"tags":[],"owner":{"account_id":461096,"reputation":59403,"user_id":862594,"accept_rate":83,"display_name":"nickb"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1647591756,"creation_date":1647591756,"answer_id":71524171,"question_id":71524129,"body_markdown":"No, you need `@Valid` on the `personDetail` field in order for validation to continue to look down into that field. You can configure this in other ways (validation.xml), but ultimately you need to tell the Validator to descend into the value of the `personDetail` field.","title":"Javax @Valid Annotation in Inner NEsted Objects","body":"<p>No, you need <code>@Valid</code> on the <code>personDetail</code> field in order for validation to continue to look down into that field. You can configure this in other ways (validation.xml), but ultimately you need to tell the Validator to descend into the value of the <code>personDetail</code> field.</p>\n"}],"owner":{"account_id":6290431,"reputation":1187,"user_id":4888323,"accept_rate":20,"display_name":"Bilgehan"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":467,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":1,"score":0,"last_activity_date":1675198094,"creation_date":1647591520,"question_id":71524129,"body_markdown":"I want to use javax validation on poco objects that contain complex types. In my code, I want to validate the `PersonDetail` object inside my `Person` class. If I don&#39;t use the `@Valid PersonDetail`, then validations on that subclass don&#39;t work. \r\n\r\nIs there any way to validate nested objects without the `@Valid` annotation on each one?\r\n \r\n\r\n    public class Person {\r\n\r\n\r\n    @Pattern(regexp = &quot;^[a-zA-Z]+$&quot;)\r\n    private String surname;\r\n\r\n    @Valid(//without this personDetails validations not worked)\r\n        private PersonDetail personDetail;\r\n\r\n....\r\n\r\nPersonDetail class\r\n\r\n    public class PersonDetail {\r\n    \r\n        @Pattern(regexp = &quot;^[a-zA-Z]+$&quot;)\r\n        private String surname2;\r\n    \r\n        public String getSurname2() {\r\n            return surname2;\r\n        }","title":"Javax @Valid Annotation in Inner NEsted Objects","body":"<p>I want to use javax validation on poco objects that contain complex types. In my code, I want to validate the <code>PersonDetail</code> object inside my <code>Person</code> class. If I don't use the <code>@Valid PersonDetail</code>, then validations on that subclass don't work.</p>\n<p>Is there any way to validate nested objects without the <code>@Valid</code> annotation on each one?</p>\n<pre><code>public class Person {\n\n\n@Pattern(regexp = &quot;^[a-zA-Z]+$&quot;)\nprivate String surname;\n\n@Valid(//without this personDetails validations not worked)\n    private PersonDetail personDetail;\n</code></pre>\n<p>....</p>\n<p>PersonDetail class</p>\n<pre><code>public class PersonDetail {\n\n    @Pattern(regexp = &quot;^[a-zA-Z]+$&quot;)\n    private String surname2;\n\n    public String getSurname2() {\n        return surname2;\n    }\n</code></pre>\n"},{"tags":["java","maven","maven-3"],"comments":[{"owner":{"account_id":4181375,"reputation":5091,"user_id":3426309,"display_name":"Andrey B. Panfilov"},"score":2,"creation_date":1674872471,"post_id":75260577,"comment_id":132812581,"body_markdown":"would you mind describing your final goal, not a synthetic case? Inheriting properties from multiple parents - this rabbit hole is too deep, however I believe the solution exists for real case.","body":"would you mind describing your final goal, not a synthetic case? Inheriting properties from multiple parents - this rabbit hole is too deep, however I believe the solution exists for real case."},{"owner":{"account_id":112317,"reputation":93939,"user_id":296328,"accept_rate":60,"display_name":"khmarbaise"},"score":0,"creation_date":1674993906,"post_id":75260577,"comment_id":132828711,"body_markdown":"The question is why does your child not inherit from your parent (`&lt;module&gt;A&lt;/module&gt; `) ... that would solve the problem very easy?","body":"The question is why does your child not inherit from your parent (<code>&lt;module&gt;A&lt;&#47;module&gt; </code>) ... that would solve the problem very easy?"},{"owner":{"account_id":44871,"reputation":22865,"user_id":131929,"accept_rate":83,"display_name":"Marcel St&#246;r"},"score":0,"creation_date":1675196507,"post_id":75260577,"comment_id":132875743,"body_markdown":"@AndreyB.Panfilov it&#39;s a very real use case, not a synthetic one. However, for the sake of simplicity and legibility I omitted everything that&#39;s not &quot;relevant&quot; for this Q. Relevant or not is very subjective, though. I&#39;ll amend the Q.","body":"@AndreyB.Panfilov it&#39;s a very real use case, not a synthetic one. However, for the sake of simplicity and legibility I omitted everything that&#39;s not &quot;relevant&quot; for this Q. Relevant or not is very subjective, though. I&#39;ll amend the Q."},{"owner":{"account_id":44871,"reputation":22865,"user_id":131929,"accept_rate":83,"display_name":"Marcel St&#246;r"},"score":0,"creation_date":1675196581,"post_id":75260577,"comment_id":132875771,"body_markdown":"@khmarbaise oh yes, that would eliminate the problem altogether. If it were that easy, the Q here would not exist :)","body":"@khmarbaise oh yes, that would eliminate the problem altogether. If it were that easy, the Q here would not exist :)"},{"owner":{"account_id":4181375,"reputation":5091,"user_id":3426309,"display_name":"Andrey B. Panfilov"},"score":0,"creation_date":1675219957,"post_id":75260577,"comment_id":132880208,"body_markdown":"@MarcelSt&#246;r so, your actual goal is to manage versions of dependencies... maven way there is to create &quot;dummy&quot; [BoM](https://maven.apache.org/guides/introduction/introduction-to-dependency-mechanism.html#bill-of-materials-bom-poms) project and import it into both aggregator and &quot;child&quot; projects, as for the `revision` property maven recommends to manage in via [`.mvn/maven.config`](https://maven.apache.org/maven-ci-friendly.html)","body":"@MarcelSt&#246;r so, your actual goal is to manage versions of dependencies... maven way there is to create &quot;dummy&quot; <a href=\"https://maven.apache.org/guides/introduction/introduction-to-dependency-mechanism.html#bill-of-materials-bom-poms\" rel=\"nofollow noreferrer\">BoM</a> project and import it into both aggregator and &quot;child&quot; projects, as for the <code>revision</code> property maven recommends to manage in via <a href=\"https://maven.apache.org/maven-ci-friendly.html\" rel=\"nofollow noreferrer\"><code>.mvn&#47;maven.config</code></a>"},{"owner":{"account_id":44871,"reputation":22865,"user_id":131929,"accept_rate":83,"display_name":"Marcel St&#246;r"},"score":0,"creation_date":1675284922,"post_id":75260577,"comment_id":132898307,"body_markdown":"That&#39;s one of the goals - and BOMs are really helpful in that (we use them in several projects). What they don&#39;t offer is what we need in _this_ project: managing and passing on properties and plugin versions.","body":"That&#39;s one of the goals - and BOMs are really helpful in that (we use them in several projects). What they don&#39;t offer is what we need in <i>this</i> project: managing and passing on properties and plugin versions."}],"owner":{"account_id":44871,"reputation":22865,"user_id":131929,"accept_rate":83,"display_name":"Marcel St&#246;r"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":166,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1675197687,"creation_date":1674835659,"question_id":75260577,"body_markdown":"Given the following minimal Maven multi-module structure. Module A is released together with the project and the other modules of the project. However, it inherits from some other parent POM (rather than the project POM). \r\n\r\n```\r\n                              |--------------------|\r\n|-------------|               | module A that does | \r\n| project POM |--- module ---&gt;| *not* inherit from |\r\n|-------------|               | project POM        |\r\n                              |--------------------|\r\n```\r\nHow can I propagate or synchronize properties from project POM to module A?\r\n\r\n**Project**\r\n\r\n```xml\r\n&lt;project&gt;\r\n    &lt;parent&gt;some-parent&lt;/parent&gt;\r\n\r\n    &lt;groupId&gt;some-group&lt;/groupId&gt;\r\n    &lt;artifactId&gt;my-project&lt;/artifactId&gt;\r\n\r\n    &lt;properties&gt;\r\n        &lt;revision&gt;1.0.0-SNAPSHOT&lt;/revision&gt;\r\n    &lt;/properties&gt;\r\n\r\n    &lt;modules&gt;\r\n        &lt;module&gt;A&lt;/module&gt; &lt;!-- NOT inheriting from here --&gt;\r\n        &lt;module&gt;B&lt;/module&gt; &lt;!-- inheriting from here --&gt;\r\n    &lt;/modules&gt;\r\n&lt;/project&gt;\r\n```\r\n\r\n**Module**\r\n\r\n```xml\r\n&lt;project&gt;\r\n    &lt;parent&gt;some-OTHER-parent&lt;/parent&gt;\r\n\r\n    &lt;!-- don&#39;t want to duplicate this, should be propagated from my-project --&gt;\r\n    &lt;!--properties&gt;\r\n        &lt;revision&gt;1.0.0-SNAPSHOT&lt;/revision&gt;\r\n    &lt;/properties--&gt;\r\n\r\n    &lt;groupId&gt;some-group&lt;/groupId&gt;\r\n    &lt;artifactId&gt;A&lt;/artifactId&gt;\r\n&lt;/project&gt;\r\n```\r\n\r\n**First attempt**\r\n\r\nI wrote a small Groovy script for the GMavenPlus plugin that updates the module A `pom.xml` correctly synchronizing the _project_ properties. However, even though the plugin runs in the `validate` phase (i.e. the earliest possible) it&#39;s too late. Maven already initialized the reactor with the old properties.\r\n\r\nI want to give developers the convenience of simply running `mvn some-task` without having to worry about the properties being consistent. Managing those manually would be a pain.\r\n\r\n8&lt; ---------------\r\n\r\n**off-topic: the complete use case**\r\n\r\nI have a project (&quot;my-project&quot;) that contains code other projects will consume: libraries, tools, utilities, etc (modules &quot;B&quot;, &quot;B+&quot;, &quot;B++&quot;). Furthermore, it contains a POM module (module &quot;A&quot;) that said business projects will inherit from. That POM represents an opinionated blue-print that those projects should adhere to unless there are good reasons not to.\r\n\r\n- I need the project POM &quot;my-project&quot; to build all the modules &quot;B&quot;, &quot;B+&quot;, &quot;B++&quot;.\r\n- The POM module &quot;A&quot;\r\n  - has definitions very different from &quot;my-project&quot; as itself serves as a parent for the business projects.\r\n  - (amongst others) lists all the modules &quot;B&quot;, &quot;B+&quot;, &quot;B++&quot;, etc. in its dependency management section.\r\n  - has to be released together with all the &quot;B&quot;s it manages -&gt; that&#39;s why it lives in the same code project\r\n  - shares a few external dependencies &quot;X&quot;, &quot;Y&quot;, &quot;Z&quot; with the project POM &quot;my-project&quot;\r\n\r\n=&gt; I need the versions for &quot;X&quot;, &quot;Y&quot;, &quot;Z&quot; in both the project POM &quot;my-project&quot; and in the POM module &quot;A&quot;","title":"Propagating Maven project properties to module that has a different parent","body":"<p>Given the following minimal Maven multi-module structure. Module A is released together with the project and the other modules of the project. However, it inherits from some other parent POM (rather than the project POM).</p>\n<pre><code>                              |--------------------|\n|-------------|               | module A that does | \n| project POM |--- module ---&gt;| *not* inherit from |\n|-------------|               | project POM        |\n                              |--------------------|\n</code></pre>\n<p>How can I propagate or synchronize properties from project POM to module A?</p>\n<p><strong>Project</strong></p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;project&gt;\n    &lt;parent&gt;some-parent&lt;/parent&gt;\n\n    &lt;groupId&gt;some-group&lt;/groupId&gt;\n    &lt;artifactId&gt;my-project&lt;/artifactId&gt;\n\n    &lt;properties&gt;\n        &lt;revision&gt;1.0.0-SNAPSHOT&lt;/revision&gt;\n    &lt;/properties&gt;\n\n    &lt;modules&gt;\n        &lt;module&gt;A&lt;/module&gt; &lt;!-- NOT inheriting from here --&gt;\n        &lt;module&gt;B&lt;/module&gt; &lt;!-- inheriting from here --&gt;\n    &lt;/modules&gt;\n&lt;/project&gt;\n</code></pre>\n<p><strong>Module</strong></p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;project&gt;\n    &lt;parent&gt;some-OTHER-parent&lt;/parent&gt;\n\n    &lt;!-- don't want to duplicate this, should be propagated from my-project --&gt;\n    &lt;!--properties&gt;\n        &lt;revision&gt;1.0.0-SNAPSHOT&lt;/revision&gt;\n    &lt;/properties--&gt;\n\n    &lt;groupId&gt;some-group&lt;/groupId&gt;\n    &lt;artifactId&gt;A&lt;/artifactId&gt;\n&lt;/project&gt;\n</code></pre>\n<p><strong>First attempt</strong></p>\n<p>I wrote a small Groovy script for the GMavenPlus plugin that updates the module A <code>pom.xml</code> correctly synchronizing the <em>project</em> properties. However, even though the plugin runs in the <code>validate</code> phase (i.e. the earliest possible) it's too late. Maven already initialized the reactor with the old properties.</p>\n<p>I want to give developers the convenience of simply running <code>mvn some-task</code> without having to worry about the properties being consistent. Managing those manually would be a pain.</p>\n<p>8&lt; ---------------</p>\n<p><strong>off-topic: the complete use case</strong></p>\n<p>I have a project (&quot;my-project&quot;) that contains code other projects will consume: libraries, tools, utilities, etc (modules &quot;B&quot;, &quot;B+&quot;, &quot;B++&quot;). Furthermore, it contains a POM module (module &quot;A&quot;) that said business projects will inherit from. That POM represents an opinionated blue-print that those projects should adhere to unless there are good reasons not to.</p>\n<ul>\n<li>I need the project POM &quot;my-project&quot; to build all the modules &quot;B&quot;, &quot;B+&quot;, &quot;B++&quot;.</li>\n<li>The POM module &quot;A&quot;\n<ul>\n<li>has definitions very different from &quot;my-project&quot; as itself serves as a parent for the business projects.</li>\n<li>(amongst others) lists all the modules &quot;B&quot;, &quot;B+&quot;, &quot;B++&quot;, etc. in its dependency management section.</li>\n<li>has to be released together with all the &quot;B&quot;s it manages -&gt; that's why it lives in the same code project</li>\n<li>shares a few external dependencies &quot;X&quot;, &quot;Y&quot;, &quot;Z&quot; with the project POM &quot;my-project&quot;</li>\n</ul>\n</li>\n</ul>\n<p>=&gt; I need the versions for &quot;X&quot;, &quot;Y&quot;, &quot;Z&quot; in both the project POM &quot;my-project&quot; and in the POM module &quot;A&quot;</p>\n"},{"tags":["java","java-native-interface"],"comments":[{"owner":{"account_id":1684984,"reputation":27030,"user_id":1548468,"display_name":"Botje"},"score":0,"creation_date":1675071670,"post_id":75276919,"comment_id":132841899,"body_markdown":"Please edit your question with the signature of the Java method you are trying to pass a lambda to.","body":"Please edit your question with the signature of the Java method you are trying to pass a lambda to."},{"owner":{"account_id":23096518,"reputation":85,"user_id":17206534,"display_name":"majorsopa"},"score":0,"creation_date":1675115358,"post_id":75276919,"comment_id":132855783,"body_markdown":"@Botje It is an obfuscated signature so I&#39;m not sure how much help it would be to others.","body":"@Botje It is an obfuscated signature so I&#39;m not sure how much help it would be to others."},{"owner":{"account_id":1684984,"reputation":27030,"user_id":1548468,"display_name":"Botje"},"score":0,"creation_date":1675152063,"post_id":75276919,"comment_id":132861524,"body_markdown":"It would help because methods generally don&#39;t take &quot;lambdas&quot;. They take objects that implement a given interface and lambdas are just a shortcut for constricting suitable objects. If we know the exact signature of the method the translation to a native method is mechanical.","body":"It would help because methods generally don&#39;t take &quot;lambdas&quot;. They take objects that implement a given interface and lambdas are just a shortcut for constricting suitable objects. If we know the exact signature of the method the translation to a native method is mechanical."}],"answers":[{"tags":[],"owner":{"account_id":1684984,"reputation":27030,"user_id":1548468,"display_name":"Botje"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1675197640,"creation_date":1675197640,"answer_id":75302902,"question_id":75276919,"body_markdown":"Let me take `LongStream.generate` as an example target method. Its method signature is\r\n```\r\nstatic LongStream generate(LongSupplier s);\r\n```\r\n\r\nand `LongSupplier` is:\r\n```\r\n@FunctionalInterface public interface LongSupplier {\r\n  long getAsLong();\r\n}\r\n```\r\n\r\nYou can implement your own `LongSupplier` on the Java side as follows:\r\n\r\n```\r\npackage dummy.pkg;\r\nimport java.util.function.LongSupplier;\r\npublic class NativeLongSupplier implements LongSupplier {\r\n  native public long getAsLong();\r\n}\r\n```\r\n\r\nthen the following C++ code will let you implement the `getAsLong` method:\r\n```\r\nJNIEXPORT jlong Java_dummy_pkg_NativeLongSupplier_getAsLong(JNIEnv * env, jobject obj) {\r\n  static uint64_t counter = 0;\r\n  return ++counter;\r\n}\r\n```","title":"How would you call a Java method that takes a lambda as an argument from the native side of JNI?","body":"<p>Let me take <code>LongStream.generate</code> as an example target method. Its method signature is</p>\n<pre><code>static LongStream generate(LongSupplier s);\n</code></pre>\n<p>and <code>LongSupplier</code> is:</p>\n<pre><code>@FunctionalInterface public interface LongSupplier {\n  long getAsLong();\n}\n</code></pre>\n<p>You can implement your own <code>LongSupplier</code> on the Java side as follows:</p>\n<pre><code>package dummy.pkg;\nimport java.util.function.LongSupplier;\npublic class NativeLongSupplier implements LongSupplier {\n  native public long getAsLong();\n}\n</code></pre>\n<p>then the following C++ code will let you implement the <code>getAsLong</code> method:</p>\n<pre><code>JNIEXPORT jlong Java_dummy_pkg_NativeLongSupplier_getAsLong(JNIEnv * env, jobject obj) {\n  static uint64_t counter = 0;\n  return ++counter;\n}\n</code></pre>\n"}],"owner":{"account_id":23096518,"reputation":85,"user_id":17206534,"display_name":"majorsopa"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":115,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75302902,"answer_count":1,"score":0,"last_activity_date":1675197640,"creation_date":1675013405,"question_id":75276919,"body_markdown":"I am attempting to call a Java method which accepts a lambda as an argument. I am not in control of the Java side of the code, and am using the invocation API. I do not know how I would even start to approach this problem- from my searches, lambdas are [compile-time language artifacts of Java](https://stackoverflow.com/a/23650686). That also links [this answer](https://stackoverflow.com/a/23606688/17206534) which shows how to make a lambda at runtime. Is creating a lambda possible to do in JNI, and if so how do you pass this into a method call?","title":"How would you call a Java method that takes a lambda as an argument from the native side of JNI?","body":"<p>I am attempting to call a Java method which accepts a lambda as an argument. I am not in control of the Java side of the code, and am using the invocation API. I do not know how I would even start to approach this problem- from my searches, lambdas are <a href=\"https://stackoverflow.com/a/23650686\">compile-time language artifacts of Java</a>. That also links <a href=\"https://stackoverflow.com/a/23606688/17206534\">this answer</a> which shows how to make a lambda at runtime. Is creating a lambda possible to do in JNI, and if so how do you pass this into a method call?</p>\n"},{"tags":["java","eclipse","error-messaging"],"answers":[{"tags":[],"owner":{"account_id":22144484,"reputation":1,"user_id":16394012,"display_name":"SSV"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1675197577,"creation_date":1665531484,"answer_id":74035046,"question_id":74034896,"body_markdown":"\r\nThere are a few things you can try to resolve the issues:\r\n\r\nCheck the class path: Make sure that the class path is correctly set and that all required libraries and packages are included.\r\n\r\nClean the project: In Eclipse, go to &quot;Project&quot; -&gt; &quot;Clean&quot; and select the project. This will delete all compiled files and rebuild the project.\r\n\r\nCheck the Java version: Make sure that you are using the correct Java version for your project. If the project was developed using a different version of Java, you may need to change your Java version to match.\r\n\r\nCheck the class name: Make sure that the class name in the Java file matches the name of the main class.","title":"Why Is My Eclipse Java Program Not Running - Error Message: &quot;Error: Could not find or load main class&quot;","body":"<p>There are a few things you can try to resolve the issues:</p>\n<p>Check the class path: Make sure that the class path is correctly set and that all required libraries and packages are included.</p>\n<p>Clean the project: In Eclipse, go to &quot;Project&quot; -&gt; &quot;Clean&quot; and select the project. This will delete all compiled files and rebuild the project.</p>\n<p>Check the Java version: Make sure that you are using the correct Java version for your project. If the project was developed using a different version of Java, you may need to change your Java version to match.</p>\n<p>Check the class name: Make sure that the class name in the Java file matches the name of the main class.</p>\n"},{"tags":[],"owner":{"account_id":13796,"reputation":19353,"user_id":27905,"display_name":"nitind"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1665541732,"creation_date":1665541732,"answer_id":74035855,"question_id":74034896,"body_markdown":"The main class couldn&#39;t be found because it couldn&#39;t be compiled, and it couldn&#39;t be compiled because your project is missing a build path entry to a valid JRE. That&#39;s why String is also underlined--it is not found because it&#39;s expected to be provided from a Java runtime.\r\n\r\nDouble-check that the **Installed JREs** preference page has a valid Java 11 runtime defined. Eclipse uses Java to run itself, but you still have to tell it which JREs you want it to offer to compile your own projects against. Once a JRE is configured, open up the **Properties** dialog for your project and go to the **Java Build Path** property page. On its **Libraries** tab, click on **Classpath** and then the **Add Library...** button. Select JRE System Library from the list you&#39;re shown and then pick one to use. Choosing by **Execution environment** (think of it as the intended Java SE version number at *runtime*) is preferred.\r\n\r\n[![Adding a Library][1]][1]\r\n[![Picking a JRE by Execution environment][2]][2]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/oxpUV.jpg\r\n  [2]: https://i.stack.imgur.com/NiWWn.png","title":"Why Is My Eclipse Java Program Not Running - Error Message: &quot;Error: Could not find or load main class&quot;","body":"<p>The main class couldn't be found because it couldn't be compiled, and it couldn't be compiled because your project is missing a build path entry to a valid JRE. That's why String is also underlined--it is not found because it's expected to be provided from a Java runtime.</p>\n<p>Double-check that the <strong>Installed JREs</strong> preference page has a valid Java 11 runtime defined. Eclipse uses Java to run itself, but you still have to tell it which JREs you want it to offer to compile your own projects against. Once a JRE is configured, open up the <strong>Properties</strong> dialog for your project and go to the <strong>Java Build Path</strong> property page. On its <strong>Libraries</strong> tab, click on <strong>Classpath</strong> and then the <strong>Add Library...</strong> button. Select JRE System Library from the list you're shown and then pick one to use. Choosing by <strong>Execution environment</strong> (think of it as the intended Java SE version number at <em>runtime</em>) is preferred.</p>\n<p><a href=\"https://i.stack.imgur.com/oxpUV.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/oxpUV.jpg\" alt=\"Adding a Library\" /></a>\n<a href=\"https://i.stack.imgur.com/NiWWn.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/NiWWn.png\" alt=\"Picking a JRE by Execution environment\" /></a></p>\n"}],"owner":{"account_id":26174707,"reputation":7,"user_id":19859073,"display_name":"Jack Finnegan"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":467,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1675197577,"creation_date":1665529542,"question_id":74034896,"body_markdown":"I am working on a Java project for a Computer Science class. For this class, I downloaded a zip file and imported it into Eclipse to then start working on it. Before I could even start writing code I had error messages which had never happened before when importing zip files and opening them up.\r\n\r\nThe first error message I came across was: &quot;Linkage Error occurred while loading the main class&quot;, along with other side errors like, &quot;Must define an explicit constructor&quot;.\r\n\r\nI attempted to do some research and the only thing I could find was setting my JDK settings back to an earlier version. I went in and changed my compiler from JDK 15 to JDK 11 and attempted to run the code once again. Now instead of Linkage Error, it gives the error message which can be seen in the screenshot provided below:\r\n\r\n[Error Message Screenshot][1]\r\n\r\n  [1]: https://i.stack.imgur.com/ilN5M.jpg\r\n\r\nDoes anyone know why this might be happening or have any suggestions/solutions? Let me know if any other information is needed. I will gladly provide it.","title":"Why Is My Eclipse Java Program Not Running - Error Message: &quot;Error: Could not find or load main class&quot;","body":"<p>I am working on a Java project for a Computer Science class. For this class, I downloaded a zip file and imported it into Eclipse to then start working on it. Before I could even start writing code I had error messages which had never happened before when importing zip files and opening them up.</p>\n<p>The first error message I came across was: &quot;Linkage Error occurred while loading the main class&quot;, along with other side errors like, &quot;Must define an explicit constructor&quot;.</p>\n<p>I attempted to do some research and the only thing I could find was setting my JDK settings back to an earlier version. I went in and changed my compiler from JDK 15 to JDK 11 and attempted to run the code once again. Now instead of Linkage Error, it gives the error message which can be seen in the screenshot provided below:</p>\n<p><a href=\"https://i.stack.imgur.com/ilN5M.jpg\" rel=\"nofollow noreferrer\">Error Message Screenshot</a></p>\n<p>Does anyone know why this might be happening or have any suggestions/solutions? Let me know if any other information is needed. I will gladly provide it.</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":1085259,"reputation":78314,"user_id":1081110,"display_name":"Dawood ibn Kareem"},"score":2,"creation_date":1675197390,"post_id":75302787,"comment_id":132875974,"body_markdown":"I&#39;ve removed the JavaScript tag.  This is not JavaScript.","body":"I&#39;ve removed the JavaScript tag.  This is not JavaScript."},{"owner":{"account_id":1085259,"reputation":78314,"user_id":1081110,"display_name":"Dawood ibn Kareem"},"score":1,"creation_date":1675197480,"post_id":75302787,"comment_id":132875993,"body_markdown":"Also, you probably want to declare all those variables much earlier in your program, otherwise they go out of scope before you can use them, which means their values will disappear.","body":"Also, you probably want to declare all those variables much earlier in your program, otherwise they go out of scope before you can use them, which means their values will disappear."},{"owner":{"account_id":14357,"reputation":9128,"user_id":29470,"display_name":"Tim Moore"},"score":1,"creation_date":1675200874,"post_id":75302787,"comment_id":132876895,"body_markdown":"It doesn’t really matter where they came from originally. Once you have two `int` variables `x` and `y`, you add them together with `x + y`","body":"It doesn’t really matter where they came from originally. Once you have two <code>int</code> variables <code>x</code> and <code>y</code>, you add them together with <code>x + y</code>"},{"owner":{"account_id":27180802,"reputation":7,"user_id":20716077,"display_name":"user20716077"},"score":0,"creation_date":1675202260,"post_id":75302787,"comment_id":132877242,"body_markdown":"Thank you @TimMoore... the problem is that I am asking for both integers here: int integers_1 = input.nextInt();... unfortunately that is the format I need to follow... .... I cannot access to the second int.","body":"Thank you @TimMoore... the problem is that I am asking for both integers here: int integers_1 = input.nextInt();... unfortunately that is the format I need to follow... .... I cannot access to the second int."},{"owner":{"account_id":7612423,"reputation":82486,"user_id":5772882,"display_name":"Anonymous"},"score":1,"creation_date":1675203173,"post_id":75302787,"comment_id":132877519,"body_markdown":"To read two integes you need to call `nextInt()` twice. There is no other reasonable way. Its easiest to have two lines like `int integers_1 = input.nextInt();` only with two different variable names. Then print the sum (in the `&quot;add&quot;` case) with something like `System.out.println(integers_1 + integers_2);`. That’s all there is to it.","body":"To read two integes you need to call <code>nextInt()</code> twice. There is no other reasonable way. Its easiest to have two lines like <code>int integers_1 = input.nextInt();</code> only with two different variable names. Then print the sum (in the <code>&quot;add&quot;</code> case) with something like <code>System.out.println(integers_1 + integers_2);</code>. That’s all there is to it."}],"owner":{"account_id":27180802,"reputation":7,"user_id":20716077,"display_name":"user20716077"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":51,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1675197369,"creation_date":1675196972,"question_id":75302787,"body_markdown":"I am asking the user to write 2 integers and I need to perform some mathematical operations with them. How can I do it?\r\n\r\nIn this case, for example, I am selecting the &quot;add&quot; operation, I am writing the integers 2 and 3, and I would like to have &quot;5&quot; as the result. \r\n\r\nPS: I need to use the &quot;Switch&quot; method. \r\n\r\n[Output terminal][1]\r\n\r\nBest regards. \r\n\r\n    import java.util.Scanner;\r\n    \r\n    public class Calculator {\r\n        public static void main(String[] args) {\r\n            \r\n            System.out.println(&quot;List of operations: add subtract multiply divide alphabetize&quot;);\r\n    \r\n            Scanner input = new Scanner(System.in);\r\n           \r\n            System.out.print(&quot;Enter an operation: &quot;);\r\n            String type_operation = input.nextLine().toLowerCase();\r\n    \r\n            if ((new String(type_operation).equals(&quot;add&quot;)) || \r\n                (new String(type_operation).equals(&quot;substract&quot;)) ||\r\n                (new String(type_operation).equals(&quot;multiply&quot;)) ||\r\n                (new String(type_operation).equals(&quot;divide&quot;)) ||\r\n                (new String(type_operation).equals(&quot;alphabetize&quot;)))  {\r\n                   \r\n                        \r\n                    switch (type_operation) {\r\n                        case &quot;add&quot;:\r\n                            \r\n                            System.out.print(&quot;Enter two integers: &quot;);\r\n                            int integers_1 = input.nextInt();\r\n                            System.out.println(integers_1);\r\n                                     \r\n            \r\n                        case &quot;substract&quot;:\r\n                            System.out.print(&quot;Enter two integers: &quot;);\r\n                            int integers_2 = input.nextInt();\r\n                            break;\r\n    \r\n                        case &quot;multiply&quot;:\r\n                            System.out.print( &quot;Enter two doubles: &quot;);\r\n                            double integers_3 = input.nextDouble();\r\n                            \r\n                            break;\r\n    \r\n                        case &quot;divide&quot;:\r\n                            System.out.print(&quot;Enter two doubles: &quot;);\r\n                            double integers_4 = input.nextDouble();\r\n                            break;\r\n    \r\n                        case &quot;alphabetize&quot;:\r\n                            System.out.print(&quot;Enter two Strings: &quot;);\r\n                            String integers_5 = input.nextLine();\r\n                            break;\r\n            }    \r\n        \r\n            else {\r\n                System.out.println(&quot;Invalid value.&quot;);\r\n            }\r\n            \r\n        }\r\n    }\r\n\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/y2ypE.png","title":"How to perform mathematical operation on integers/double extracted from input.nextInt() / input.nextDouble()?","body":"<p>I am asking the user to write 2 integers and I need to perform some mathematical operations with them. How can I do it?</p>\n<p>In this case, for example, I am selecting the &quot;add&quot; operation, I am writing the integers 2 and 3, and I would like to have &quot;5&quot; as the result.</p>\n<p>PS: I need to use the &quot;Switch&quot; method.</p>\n<p><a href=\"https://i.stack.imgur.com/y2ypE.png\" rel=\"nofollow noreferrer\">Output terminal</a></p>\n<p>Best regards.</p>\n<pre><code>import java.util.Scanner;\n\npublic class Calculator {\n    public static void main(String[] args) {\n        \n        System.out.println(&quot;List of operations: add subtract multiply divide alphabetize&quot;);\n\n        Scanner input = new Scanner(System.in);\n       \n        System.out.print(&quot;Enter an operation: &quot;);\n        String type_operation = input.nextLine().toLowerCase();\n\n        if ((new String(type_operation).equals(&quot;add&quot;)) || \n            (new String(type_operation).equals(&quot;substract&quot;)) ||\n            (new String(type_operation).equals(&quot;multiply&quot;)) ||\n            (new String(type_operation).equals(&quot;divide&quot;)) ||\n            (new String(type_operation).equals(&quot;alphabetize&quot;)))  {\n               \n                    \n                switch (type_operation) {\n                    case &quot;add&quot;:\n                        \n                        System.out.print(&quot;Enter two integers: &quot;);\n                        int integers_1 = input.nextInt();\n                        System.out.println(integers_1);\n                                 \n        \n                    case &quot;substract&quot;:\n                        System.out.print(&quot;Enter two integers: &quot;);\n                        int integers_2 = input.nextInt();\n                        break;\n\n                    case &quot;multiply&quot;:\n                        System.out.print( &quot;Enter two doubles: &quot;);\n                        double integers_3 = input.nextDouble();\n                        \n                        break;\n\n                    case &quot;divide&quot;:\n                        System.out.print(&quot;Enter two doubles: &quot;);\n                        double integers_4 = input.nextDouble();\n                        break;\n\n                    case &quot;alphabetize&quot;:\n                        System.out.print(&quot;Enter two Strings: &quot;);\n                        String integers_5 = input.nextLine();\n                        break;\n        }    \n    \n        else {\n            System.out.println(&quot;Invalid value.&quot;);\n        }\n        \n    }\n}\n</code></pre>\n"},{"tags":["java","android","runnable","seekbar"],"answers":[{"tags":[],"owner":{"account_id":7217455,"reputation":61,"user_id":5509349,"display_name":"Krunal Patel"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1675196445,"creation_date":1468068599,"answer_id":38281982,"question_id":38281836,"body_markdown":"when next song is play that time set `seekBar.setProgress(0);`","title":"How to not have seekBar set to 0 when next song is played","body":"<p>when next song is play that time set <code>seekBar.setProgress(0);</code></p>\n"},{"tags":[],"owner":{"account_id":4016416,"reputation":17,"user_id":3308353,"accept_rate":100,"display_name":"user3308353"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1468082484,"creation_date":1468078390,"answer_id":38283409,"question_id":38281836,"body_markdown":"Just created a solution myself that involves creating an `Arraylist of mediaPlayers` instead of just making `one mediaPlayer`.\r\n\r\nHere is the working code if anyone needs it:\r\n\r\n    public void onCompletion(MediaPlayer mediaPlayer) {\r\n      for(int i = 0; i &lt; currentTrack; i++) {\r\n        trueSeek += mediaPlayers.get(i).getCurrentPosition();\r\n      }\r\n      currentTrack++;\r\n      if(currentTrack &gt;= mediaPlayers.size()){\r\n        currentTrack = 0;\r\n      }\r\n      handler.post(UpdateSongTime);\r\n      mediaPlayers.get(currentTrack).start();\r\n    }\r\n\r\nand the thread:\r\n\r\n    private Runnable UpdateSongTime = new Runnable() {\r\n      @Override\r\n      public void run() {\r\n        if(currentTrack == 0){\r\n          trueSeek = mediaPlayers.get(currentTrack).getCurrentPosition();\r\n          startTime = trueSeek;\r\n        }\r\n        if(currentTrack &gt; 0){\r\n          int tempSeek = 0;\r\n          for(int i = 0; i &lt; currentTrack; i++){\r\n            tempSeek += mediaPlayers.get(i).getCurrentPosition();\r\n          }\r\n          trueSeek = mediaPlayers.get(currentTrack).getCurrentPosition() + tempSeek;\r\n          startTime = trueSeek;\r\n        }\r\n        seekBar.setMax(songEndTime);\r\n        int currentSongEndTime = songEndTime - trueSeek;\r\n        startTimeText.setText(convertSeekLength(startTime));\r\n        String endTime = &quot;-&quot; + convertSeekLength(currentSongEndTime);\r\n        songDisplay.setText(songArrayList.get(currentTrack).getTitle());\r\n        endTimeText.setText(endTime);\r\n        seekBar.setProgress(startTime);\r\n        handler.postDelayed(this, 100);\r\n      }\r\n    };","title":"How to not have seekBar set to 0 when next song is played","body":"<p>Just created a solution myself that involves creating an <code>Arraylist of mediaPlayers</code> instead of just making <code>one mediaPlayer</code>.</p>\n\n<p>Here is the working code if anyone needs it:</p>\n\n<pre><code>public void onCompletion(MediaPlayer mediaPlayer) {\n  for(int i = 0; i &lt; currentTrack; i++) {\n    trueSeek += mediaPlayers.get(i).getCurrentPosition();\n  }\n  currentTrack++;\n  if(currentTrack &gt;= mediaPlayers.size()){\n    currentTrack = 0;\n  }\n  handler.post(UpdateSongTime);\n  mediaPlayers.get(currentTrack).start();\n}\n</code></pre>\n\n<p>and the thread:</p>\n\n<pre><code>private Runnable UpdateSongTime = new Runnable() {\n  @Override\n  public void run() {\n    if(currentTrack == 0){\n      trueSeek = mediaPlayers.get(currentTrack).getCurrentPosition();\n      startTime = trueSeek;\n    }\n    if(currentTrack &gt; 0){\n      int tempSeek = 0;\n      for(int i = 0; i &lt; currentTrack; i++){\n        tempSeek += mediaPlayers.get(i).getCurrentPosition();\n      }\n      trueSeek = mediaPlayers.get(currentTrack).getCurrentPosition() + tempSeek;\n      startTime = trueSeek;\n    }\n    seekBar.setMax(songEndTime);\n    int currentSongEndTime = songEndTime - trueSeek;\n    startTimeText.setText(convertSeekLength(startTime));\n    String endTime = \"-\" + convertSeekLength(currentSongEndTime);\n    songDisplay.setText(songArrayList.get(currentTrack).getTitle());\n    endTimeText.setText(endTime);\n    seekBar.setProgress(startTime);\n    handler.postDelayed(this, 100);\n  }\n};\n</code></pre>\n"}],"owner":{"account_id":4016416,"reputation":17,"user_id":3308353,"accept_rate":100,"display_name":"user3308353"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":92,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":38283409,"answer_count":2,"score":0,"last_activity_date":1675196445,"creation_date":1468067578,"question_id":38281836,"body_markdown":"I would like to have the `mediaplayer` play the next song, and have the seekbar continuously go forward. However, right now the seekbar resets back to 0 when the next song is played. \r\n\r\nHow would I have the seekBar not reset back to 0 when the next song is played? \r\n\r\nHere is my `onCompletion` method:\r\n\r\n    @Override\r\n    public void onCompletion(MediaPlayer mediaPlayer) {\r\n      mp.release();\r\n      if(currentTrack &lt; tracks.length) {\r\n        currentTrack++;\r\n        if (currentTrack &gt;= 2) {\r\n          currentTrack = 0;\r\n        }\r\n        mp = MediaPlayer.create(this, tracks[currentTrack]);\r\n        mp.setOnCompletionListener(this);\r\n        if (currentTrack &gt; 0) {\r\n          mp.seekTo(tracks[currentTrack]);\r\n        }\r\n        handler.post(UpdateSongTime);\r\n        mp.start();\r\n      }\r\n    }\r\n\r\nHere is the thread that updates all of the positioning:\r\n\r\n    private Runnable UpdateSongTime = new Runnable() {\r\n      @Override\r\n      public void run() {\r\n        if(mp.isPlaying()) {\r\n          startTime = mp.getCurrentPosition() / 1000;\r\n          seekBar.setMax(songEndTime);\r\n          int currentSongEndTime = songEndTime - mp.getCurrentPosition()/1000;\r\n          startTimeText.setText(convertSeekLength(startTime));\r\n          String endTime = &quot;-&quot; + convertSeekLength(currentSongEndTime);\r\n          songDisplay.setText(songArrayList.get(currentTrack).getTitle());\r\n          endTimeText.setText(endTime);\r\n          seekBar.setProgress(startTime);\r\n          handler.postDelayed(this, 100);\r\n        }\r\n      }\r\n    };","title":"How to not have seekBar set to 0 when next song is played","body":"<p>I would like to have the <code>mediaplayer</code> play the next song, and have the seekbar continuously go forward. However, right now the seekbar resets back to 0 when the next song is played. </p>\n\n<p>How would I have the seekBar not reset back to 0 when the next song is played? </p>\n\n<p>Here is my <code>onCompletion</code> method:</p>\n\n<pre><code>@Override\npublic void onCompletion(MediaPlayer mediaPlayer) {\n  mp.release();\n  if(currentTrack &lt; tracks.length) {\n    currentTrack++;\n    if (currentTrack &gt;= 2) {\n      currentTrack = 0;\n    }\n    mp = MediaPlayer.create(this, tracks[currentTrack]);\n    mp.setOnCompletionListener(this);\n    if (currentTrack &gt; 0) {\n      mp.seekTo(tracks[currentTrack]);\n    }\n    handler.post(UpdateSongTime);\n    mp.start();\n  }\n}\n</code></pre>\n\n<p>Here is the thread that updates all of the positioning:</p>\n\n<pre><code>private Runnable UpdateSongTime = new Runnable() {\n  @Override\n  public void run() {\n    if(mp.isPlaying()) {\n      startTime = mp.getCurrentPosition() / 1000;\n      seekBar.setMax(songEndTime);\n      int currentSongEndTime = songEndTime - mp.getCurrentPosition()/1000;\n      startTimeText.setText(convertSeekLength(startTime));\n      String endTime = \"-\" + convertSeekLength(currentSongEndTime);\n      songDisplay.setText(songArrayList.get(currentTrack).getTitle());\n      endTimeText.setText(endTime);\n      seekBar.setProgress(startTime);\n      handler.postDelayed(this, 100);\n    }\n  }\n};\n</code></pre>\n"},{"tags":["java","android","android-wake-lock"],"comments":[{"owner":{"account_id":6799234,"reputation":111,"user_id":5233184,"display_name":"Edward Alexander"},"score":0,"creation_date":1470246286,"post_id":38750271,"comment_id":64874593,"body_markdown":"I&#39;m trying to do the same, except I&#39;m using the NDK.","body":"I&#39;m trying to do the same, except I&#39;m using the NDK."},{"owner":{"account_id":2492939,"reputation":1583,"user_id":2170070,"accept_rate":100,"display_name":"yardie"},"score":0,"creation_date":1470246755,"post_id":38750271,"comment_id":64874855,"body_markdown":"Mhmm, I&#39;m sure this is possible some way or another. I will update you if I figure this out before an answer gets posted.","body":"Mhmm, I&#39;m sure this is possible some way or another. I will update you if I figure this out before an answer gets posted."}],"owner":{"account_id":2492939,"reputation":1583,"user_id":2170070,"accept_rate":100,"display_name":"yardie"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":272,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":0,"score":2,"last_activity_date":1675196371,"creation_date":1470245720,"question_id":38750271,"body_markdown":"I am trying to turn my device screen off while the device&#39;s CPU remains awake. I  have tried a few different things but I am unable to turn the screen completely off programmatically.\r\n\r\nI have done some research and saw that using `WakeLock` can dim the screen / leave room for the screen to be turned off while the CPU is still running and that seems to work:\r\n\r\n    PowerManager pm = (PowerManager) getSystemService(Context.POWER_SERVICE);\r\n    PowerManager.WakeLock wl = pm.newWakeLock(PowerManager.PARTIAL_WAKE_LOCK, &quot;My Tag&quot;);\r\n\r\nIn order to turn the screen off completely, I have tried to change the screen time-out, but that only dims the screen:\r\n\r\n    android.provider.Settings.System.putInt(getContentResolver(),\r\n                Settings.System.SCREEN_OFF_TIMEOUT, 1);\r\n\r\nIs there any other way that I can turn the screen off completely while the CPU is still running ?\r\n","title":"Android: Keep CPU running and shut screen off (Not dimmed)","body":"<p>I am trying to turn my device screen off while the device's CPU remains awake. I  have tried a few different things but I am unable to turn the screen completely off programmatically.</p>\n<p>I have done some research and saw that using <code>WakeLock</code> can dim the screen / leave room for the screen to be turned off while the CPU is still running and that seems to work:</p>\n<pre><code>PowerManager pm = (PowerManager) getSystemService(Context.POWER_SERVICE);\nPowerManager.WakeLock wl = pm.newWakeLock(PowerManager.PARTIAL_WAKE_LOCK, &quot;My Tag&quot;);\n</code></pre>\n<p>In order to turn the screen off completely, I have tried to change the screen time-out, but that only dims the screen:</p>\n<pre><code>android.provider.Settings.System.putInt(getContentResolver(),\n            Settings.System.SCREEN_OFF_TIMEOUT, 1);\n</code></pre>\n<p>Is there any other way that I can turn the screen off completely while the CPU is still running ?</p>\n"},{"tags":["java","android","android-livedata","mutablelivedata"],"answers":[{"tags":[],"owner":{"account_id":23883416,"reputation":134,"user_id":17883851,"display_name":"TG. Kahsay"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1675195650,"creation_date":1675195650,"answer_id":75302595,"question_id":75288136,"body_markdown":"if Source.Java has a listener, why not implement it in the activity GroupDescription? or make an instance of Source.java in your viewModel and set the listener interface there and postValue of your MutableLiveData() inside the listener interface and observe it in your activity? from there you can notify your recyclerView adapter. ","title":"How to update LiveData from another class?","body":"<p>if Source.Java has a listener, why not implement it in the activity GroupDescription? or make an instance of Source.java in your viewModel and set the listener interface there and postValue of your MutableLiveData() inside the listener interface and observe it in your activity? from there you can notify your recyclerView adapter.</p>\n"}],"owner":{"account_id":27659416,"reputation":1,"user_id":21112586,"display_name":"LoScarso"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":74,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1675195650,"creation_date":1675100320,"question_id":75288136,"body_markdown":"I have this on my GroupDescriptionActivity class:\r\n```\r\nGroupDescriptionViewModel mFavViewModel;\r\nArrayList&lt;String&gt; mFav;\r\n\r\nmFavViewModel = new ViewModelProvider(this).get(GroupDescriptionViewModel.class);\r\n        final Observer&lt;ArrayList&lt;String&gt;&gt; favsObserver = new Observer&lt;ArrayList&lt;String&gt;&gt;() {\r\n            @Override\r\n            public void onChanged(@Nullable final ArrayList&lt;String&gt; updatedList) {\r\n                if (mFav == null) {\r\n                    mFav = updatedList;\r\n                    ArrayAdapter arrayAdapter = new ArrayAdapter(context, android.R.layout.simple_expandable_list_item_1, mFav);\r\n                    partecipants.setAdapter(arrayAdapter);\r\n                }\r\n            }\r\n        };\r\n```\r\n\r\nAnd in my GroupDescriptionViewModel:\r\n\r\n```\r\npublic class GroupDescriptionViewModel extends AndroidViewModel {\r\n    private static MutableLiveData&lt;ArrayList&lt;String&gt;&gt; mFavs;\r\n\r\n    public GroupDescriptionViewModel(@NonNull Application application) {\r\n        super(application);\r\n    }\r\n\r\n    public static MutableLiveData&lt;ArrayList&lt;String&gt;&gt; getFavs(ArrayList&lt;HashMap&gt; partecipants) {\r\n        if (mFavs == null) {\r\n            mFavs = new MutableLiveData&lt;&gt;();\r\n        }\r\n        loadFavs(partecipants);\r\n\r\n        return mFavs;\r\n    }\r\n\r\n    public static void loadFavs(ArrayList&lt;HashMap&gt; partecipants) {\r\n        ArrayList&lt;String&gt; newFavs = new ArrayList&lt;&gt;();\r\n\r\n        for (HashMap member : partecipants) {\r\n            newFavs.add(member.get(&quot;mail&quot;).toString());\r\n        }\r\n        mFavs.setValue(newFavs);\r\n    }\r\n\r\n}\r\n```\r\nI then have a firestore database change listener in the Source.java file. How can I update my ListView which is in the activity GroupDescription from Source.java?\r\n\r\nI tried in Source.java\r\n\r\n```\r\nGroupDescriptionViewModel.getFavs((ArrayList&lt;HashMap&gt;) ((HashMap) arr.get(2)).get(&quot;partecipants&quot;));\r\n```\r\nbut didn&#39;t work. `((ArrayList&lt;HashMap&gt;) ((HashMap) arr.get(2)).get(&quot;partecipants&quot;)` is my new array for the updates.\r\n\r\n\r\nSo I would like the new data to be entered from source via livedata, and my listview to update in real time","title":"How to update LiveData from another class?","body":"<p>I have this on my GroupDescriptionActivity class:</p>\n<pre><code>GroupDescriptionViewModel mFavViewModel;\nArrayList&lt;String&gt; mFav;\n\nmFavViewModel = new ViewModelProvider(this).get(GroupDescriptionViewModel.class);\n        final Observer&lt;ArrayList&lt;String&gt;&gt; favsObserver = new Observer&lt;ArrayList&lt;String&gt;&gt;() {\n            @Override\n            public void onChanged(@Nullable final ArrayList&lt;String&gt; updatedList) {\n                if (mFav == null) {\n                    mFav = updatedList;\n                    ArrayAdapter arrayAdapter = new ArrayAdapter(context, android.R.layout.simple_expandable_list_item_1, mFav);\n                    partecipants.setAdapter(arrayAdapter);\n                }\n            }\n        };\n</code></pre>\n<p>And in my GroupDescriptionViewModel:</p>\n<pre><code>public class GroupDescriptionViewModel extends AndroidViewModel {\n    private static MutableLiveData&lt;ArrayList&lt;String&gt;&gt; mFavs;\n\n    public GroupDescriptionViewModel(@NonNull Application application) {\n        super(application);\n    }\n\n    public static MutableLiveData&lt;ArrayList&lt;String&gt;&gt; getFavs(ArrayList&lt;HashMap&gt; partecipants) {\n        if (mFavs == null) {\n            mFavs = new MutableLiveData&lt;&gt;();\n        }\n        loadFavs(partecipants);\n\n        return mFavs;\n    }\n\n    public static void loadFavs(ArrayList&lt;HashMap&gt; partecipants) {\n        ArrayList&lt;String&gt; newFavs = new ArrayList&lt;&gt;();\n\n        for (HashMap member : partecipants) {\n            newFavs.add(member.get(&quot;mail&quot;).toString());\n        }\n        mFavs.setValue(newFavs);\n    }\n\n}\n</code></pre>\n<p>I then have a firestore database change listener in the Source.java file. How can I update my ListView which is in the activity GroupDescription from Source.java?</p>\n<p>I tried in Source.java</p>\n<pre><code>GroupDescriptionViewModel.getFavs((ArrayList&lt;HashMap&gt;) ((HashMap) arr.get(2)).get(&quot;partecipants&quot;));\n</code></pre>\n<p>but didn't work. <code>((ArrayList&lt;HashMap&gt;) ((HashMap) arr.get(2)).get(&quot;partecipants&quot;)</code> is my new array for the updates.</p>\n<p>So I would like the new data to be entered from source via livedata, and my listview to update in real time</p>\n"},{"tags":["java","puzzle","out-of-memory","sliding-tile-puzzle"],"comments":[{"owner":{"account_id":26356,"reputation":68584,"user_id":68507,"accept_rate":94,"display_name":"Ben S"},"score":3,"creation_date":1277223137,"post_id":3094925,"comment_id":3173196,"body_markdown":"What are you attempting to do? What do you think the issue is? What have you tried? StackOverflow is more for specific questions. Vague questions with a large code block don&#39;t get very good feedback.","body":"What are you attempting to do? What do you think the issue is? What have you tried? StackOverflow is more for specific questions. Vague questions with a large code block don&#39;t get very good feedback."},{"owner":{"account_id":47435,"reputation":2212,"user_id":140468,"display_name":"Lee"},"score":4,"creation_date":1277223152,"post_id":3094925,"comment_id":3173199,"body_markdown":"Yet another &quot;please do my homework for me&quot; question. It&#39;s getting to be like the spam of SO now.","body":"Yet another &quot;please do my homework for me&quot; question. It&#39;s getting to be like the spam of SO now."},{"owner":{"account_id":142002,"reputation":10373,"user_id":349415,"accept_rate":84,"display_name":"Jesse Jashinsky"},"score":2,"creation_date":1277223164,"post_id":3094925,"comment_id":3173201,"body_markdown":"You give us all this code and expect us to improve it for you without even any mention of where or why it runs out of memory?","body":"You give us all this code and expect us to improve it for you without even any mention of where or why it runs out of memory?"},{"owner":{"account_id":10836,"reputation":196641,"user_id":20654,"accept_rate":80,"display_name":"OscarRyz"},"score":1,"creation_date":1277234059,"post_id":3094925,"comment_id":3174830,"body_markdown":"Nooooooohhhhhh.... don&#39;t close it yet... the OP provided more details and I have the answer!!!! :&#39;( :&#39;(","body":"Nooooooohhhhhh.... don&#39;t close it yet... the OP provided more details and I have the answer!!!! :&#39;( :&#39;("}],"answers":[{"tags":[],"owner":{"account_id":10836,"reputation":196641,"user_id":20654,"accept_rate":80,"display_name":"OscarRyz"},"down_vote_count":1,"up_vote_count":46,"is_accepted":false,"score":45,"last_activity_date":1541108882,"creation_date":1277224040,"answer_id":3095101,"question_id":3094925,"body_markdown":"# The problem\n\nThe root cause is the tons of String objects you are creating and storing in the `toProcess` Queue and the `antecessor` Map. Why are you doing that?\n\nLook at your algorithm. See if you really need to store &gt;2 million nodes and 5 million strings in each. \n\n# The investigation\n\nThis was hard to spot because the program is complex. Actually, I didn&#39;t even try to understand all of the code. Instead, I used **[VisualVM][1]** – a Java profiler, sampler, and CPU/memory usage monitor.\n\nI launched it:\n\n[![][2]][2]\n\nAnd took a look at the memory usage. The first thing I noticed was the (obvious) fact that you&#39;re creating *tons* of objects. \n\nThis is an screenshot of the app:\n\n[![][3]][3]\n\nAs you can see, the amount of memory used is tremendous. In as few as 40 seconds, 2 GB were consumed and the entire heap was filled.\n\n## A dead end\n\nI initially thought the problem had something to do with the `Node` class, because even though it implements `Comparable`, it doesn&#39;t implement `equals`. So I provided the method:\n\n    public boolean equals( Object o ) {\n        if( o instanceof Node ) {\n            Node other = ( Node ) o;\n            return this.value == other.value &amp;&amp; this.moves == other.moves;\n        }\n        return false;\n    }\n\nBut that was not the problem. \n\nThe actual problem turned out to be the one stated at the top.\n\n# The workaround\n\nAs previously stated, the real solution is to rethink your algorithm. Whatever else can be done, in the meantime, will only delay the problem.\n\nBut workarounds can be useful. One is to reuse the strings you&#39;re generating. You&#39;re very intensively using the `TilePuzzle.toString()` method; this ends up creating duplicate strings quite often.\n\nSince you&#39;re generating string permutations, you may create many `12345ABCD` strings in matter of seconds. If they are the same string, there is no point in creating millions of instances with the same value.\n\nThe [**`String.intern()`**][4] method allows strings to be reused. The doc says:\n\n&gt; Returns a canonical representation for the string object.\n&gt;\n&gt; A pool of strings, initially empty, is maintained privately by the class String.\n&gt;\n&gt; When the intern method is invoked, if the pool already contains a string equal to this String object as determined by the equals() method, then the string from the pool is returned. Otherwise, this String object is added to the pool and a reference to this String object is returned.\n\nFor a regular application, using `String.intern()` could be a bad idea because it doesn&#39;t let instances be reclaimed by the GC. But in this case, since you&#39;re holding the references in your Map and Queue anyway, it makes sense.\n\nSo making this change:\n\n    public String toString() {\n        if (change) {\n            representation = asString();\n        }\n        return representation.intern(); // &lt;-- Use intern\n    }\n\nPretty much solves the memory problem.\n\nThis is a screenshot after the change:\n\n[![][5]][5]\n\nNow, the heap usage doesn&#39;t reach 100 MB even after a couple of minutes.\n\n# Extra remarks\n\n## Remark #1\n\nYou&#39;re using an exception to validate if the movement is valid or not, which is okay; but when you catch them, you&#39;re just ignoring them:\n\n    try {\n        t.move(i);\n    } catch(RuntimeException e) {\n        continue;\n    }\n\nIf you&#39;re not using them anyway, you can save a lot of computation by not creating the exceptions in the first place. Otherwise you&#39;re creating millions of unused exceptions.\n\nMake this change:\n\n    if (!areValidCoordinates(nx, ny)) {\n        // REMOVE THIS LINE:\n        // throw new IllegalArgumentException(&quot;(&quot; + nx + &quot;, &quot; + ny + &quot;)&quot;);\n\n        // ADD THIS LINE:\n        return;\n    }\n\nAnd use validation instead:\n\n    // REMOVE THESE LINES:\n    // try {\n    //     t.move(i);\n    // } catch(RuntimeException e) {\n    //     continue;\n    // }\n\n    // ADD THESE LINES:\n    if(t.isValidMovement(i)){\n        t.move(i);\n    } else {\n        continue;\n    }\n\n## Remark #2\n\nYou&#39;re creating a new `Random` object for every new `TilePuzzle` instance. It would be better if you used just one for the whole program. After all, you are only using a single thread.\n\n## Remark #3\n\nThe workaround solved the heap memory problem, but created another one involving PermGen. I simply increased the PermGen size, like this:\n\n&lt;!-- language: lang-none --&gt;\n\n    java -Xmx1g -Xms1g -XX:MaxPermSize=1g TilePuzzle\n\n## Remark #4\n\nThe output was sometimes 49 and sometimes 50. The matrices were printed like:\n\n&lt;!-- language: lang-none --&gt;\n\n    1 2 3 4 \n    5 6 7 8 \n    9 A B C \n    D E 0 F \n\n    1 2 3 4 \n    5 6 7 8 \n    9 A B C \n    D E F 0 \n\n... 50 times \n\n  [1]: https://visualvm.github.io/\n  [2]: https://i.stack.imgur.com/AjoMI.png\n  [3]: https://i.stack.imgur.com/OFysv.png\n  [4]: https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/String.html#intern()\n  [5]: https://i.stack.imgur.com/o1EKm.png","title":"I am trying to solve &#39;15 puzzle&#39;, but I get &#39;OutOfMemoryError&#39;","body":"<h1>The problem</h1>\n<p>The root cause is the tons of String objects you are creating and storing in the <code>toProcess</code> Queue and the <code>antecessor</code> Map. Why are you doing that?</p>\n<p>Look at your algorithm. See if you really need to store &gt;2 million nodes and 5 million strings in each.</p>\n<h1>The investigation</h1>\n<p>This was hard to spot because the program is complex. Actually, I didn't even try to understand all of the code. Instead, I used <strong><a href=\"https://visualvm.github.io/\" rel=\"noreferrer\">VisualVM</a></strong> – a Java profiler, sampler, and CPU/memory usage monitor.</p>\n<p>I launched it:</p>\n<p><a href=\"https://i.stack.imgur.com/AjoMI.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/AjoMI.png\" alt=\"\" /></a></p>\n<p>And took a look at the memory usage. The first thing I noticed was the (obvious) fact that you're creating <em>tons</em> of objects.</p>\n<p>This is an screenshot of the app:</p>\n<p><a href=\"https://i.stack.imgur.com/OFysv.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/OFysv.png\" alt=\"\" /></a></p>\n<p>As you can see, the amount of memory used is tremendous. In as few as 40 seconds, 2 GB were consumed and the entire heap was filled.</p>\n<h2>A dead end</h2>\n<p>I initially thought the problem had something to do with the <code>Node</code> class, because even though it implements <code>Comparable</code>, it doesn't implement <code>equals</code>. So I provided the method:</p>\n<pre><code>public boolean equals( Object o ) {\n    if( o instanceof Node ) {\n        Node other = ( Node ) o;\n        return this.value == other.value &amp;&amp; this.moves == other.moves;\n    }\n    return false;\n}\n</code></pre>\n<p>But that was not the problem.</p>\n<p>The actual problem turned out to be the one stated at the top.</p>\n<h1>The workaround</h1>\n<p>As previously stated, the real solution is to rethink your algorithm. Whatever else can be done, in the meantime, will only delay the problem.</p>\n<p>But workarounds can be useful. One is to reuse the strings you're generating. You're very intensively using the <code>TilePuzzle.toString()</code> method; this ends up creating duplicate strings quite often.</p>\n<p>Since you're generating string permutations, you may create many <code>12345ABCD</code> strings in matter of seconds. If they are the same string, there is no point in creating millions of instances with the same value.</p>\n<p>The <a href=\"https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/String.html#intern()\" rel=\"noreferrer\"><strong><code>String.intern()</code></strong></a> method allows strings to be reused. The doc says:</p>\n<blockquote>\n<p>Returns a canonical representation for the string object.</p>\n<p>A pool of strings, initially empty, is maintained privately by the class String.</p>\n<p>When the intern method is invoked, if the pool already contains a string equal to this String object as determined by the equals() method, then the string from the pool is returned. Otherwise, this String object is added to the pool and a reference to this String object is returned.</p>\n</blockquote>\n<p>For a regular application, using <code>String.intern()</code> could be a bad idea because it doesn't let instances be reclaimed by the GC. But in this case, since you're holding the references in your Map and Queue anyway, it makes sense.</p>\n<p>So making this change:</p>\n<pre><code>public String toString() {\n    if (change) {\n        representation = asString();\n    }\n    return representation.intern(); // &lt;-- Use intern\n}\n</code></pre>\n<p>Pretty much solves the memory problem.</p>\n<p>This is a screenshot after the change:</p>\n<p><a href=\"https://i.stack.imgur.com/o1EKm.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/o1EKm.png\" alt=\"\" /></a></p>\n<p>Now, the heap usage doesn't reach 100 MB even after a couple of minutes.</p>\n<h1>Extra remarks</h1>\n<h2>Remark #1</h2>\n<p>You're using an exception to validate if the movement is valid or not, which is okay; but when you catch them, you're just ignoring them:</p>\n<pre><code>try {\n    t.move(i);\n} catch(RuntimeException e) {\n    continue;\n}\n</code></pre>\n<p>If you're not using them anyway, you can save a lot of computation by not creating the exceptions in the first place. Otherwise you're creating millions of unused exceptions.</p>\n<p>Make this change:</p>\n<pre><code>if (!areValidCoordinates(nx, ny)) {\n    // REMOVE THIS LINE:\n    // throw new IllegalArgumentException(&quot;(&quot; + nx + &quot;, &quot; + ny + &quot;)&quot;);\n\n    // ADD THIS LINE:\n    return;\n}\n</code></pre>\n<p>And use validation instead:</p>\n<pre><code>// REMOVE THESE LINES:\n// try {\n//     t.move(i);\n// } catch(RuntimeException e) {\n//     continue;\n// }\n\n// ADD THESE LINES:\nif(t.isValidMovement(i)){\n    t.move(i);\n} else {\n    continue;\n}\n</code></pre>\n<h2>Remark #2</h2>\n<p>You're creating a new <code>Random</code> object for every new <code>TilePuzzle</code> instance. It would be better if you used just one for the whole program. After all, you are only using a single thread.</p>\n<h2>Remark #3</h2>\n<p>The workaround solved the heap memory problem, but created another one involving PermGen. I simply increased the PermGen size, like this:</p>\n<pre class=\"lang-none prettyprint-override\"><code>java -Xmx1g -Xms1g -XX:MaxPermSize=1g TilePuzzle\n</code></pre>\n<h2>Remark #4</h2>\n<p>The output was sometimes 49 and sometimes 50. The matrices were printed like:</p>\n<pre class=\"lang-none prettyprint-override\"><code>1 2 3 4 \n5 6 7 8 \n9 A B C \nD E 0 F \n\n1 2 3 4 \n5 6 7 8 \n9 A B C \nD E F 0 \n</code></pre>\n<p>... 50 times</p>\n"}],"owner":{"account_id":156191,"reputation":95,"user_id":373332,"display_name":"gaijinco"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3209,"favorite_count":0,"down_vote_count":8,"up_vote_count":10,"closed_date":1277233695,"answer_count":1,"score":2,"last_activity_date":1675195484,"creation_date":1277222961,"question_id":3094925,"body_markdown":"Is there a way that I can optimize this code as to not run out of memory?\r\n\r\n    import java.util.HashMap;\r\n    import java.util.Map;\r\n    import java.util.PriorityQueue;\r\n    import java.util.Random;\r\n    import java.util.Stack;\r\n\r\n    public class TilePuzzle {\r\n\r\n        private final static byte ROWS = 4;\r\n        private final static byte COLUMNS = 4;\r\n        private static String SOLUTION = &quot;123456789ABCDEF0&quot;;\r\n        private static byte RADIX = 16;\r\n\r\n        private char[][] board = new char[ROWS][COLUMNS];\r\n        private byte x; // Row of the space (&#39;0&#39;)\r\n        private byte y; // Column of the space (&#39;0&#39;) private String representation;\r\n        private boolean change = false; // Has the board changed after the last call to toString?\r\n\r\n        private TilePuzzle() {\r\n            this(SOLUTION);\r\n            int times = 1000;\r\n            Random rnd = new Random();\r\n            while(times-- &gt; 0) {\r\n                try {\r\n                    move((byte)rnd.nextInt(4));\r\n                }\r\n                catch(RuntimeException e) {\r\n                }\r\n            }\r\n            this.representation = asString();\r\n        }\r\n\r\n        public TilePuzzle(String representation) {\r\n            this.representation = representation;\r\n            final byte SIZE = (byte)SOLUTION.length();\r\n            if (representation.length() != SIZE) {\r\n                throw new IllegalArgumentException(&quot;The board must have &quot; + SIZE + &quot;numbers.&quot;);\r\n            }\r\n\r\n            boolean[] used = new boolean[SIZE];\r\n            byte idx = 0;\r\n            for (byte i = 0; i &lt; ROWS; ++i) {\r\n                for (byte j = 0; j &lt; COLUMNS; ++j) {\r\n                    char digit = representation.charAt(idx++);\r\n                    byte number = (byte)Character.digit(digit, RADIX);\r\n                    if (number &lt; 0 || number &gt;= SIZE) {\r\n                        throw new IllegalArgumentException(&quot;The character &quot; + digit + &quot; is not valid.&quot;);\r\n                    } else if(used[number]) {\r\n                        throw new IllegalArgumentException(&quot;The character &quot; + digit + &quot; is repeated.&quot;);\r\n                    }\r\n                    used[number] = true;\r\n                    board[i][j] = digit;\r\n                    if (digit == &#39;0&#39;) {\r\n                        x = i;\r\n                        y = j;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n        /**\r\n         * Swap position of the space (&#39;0&#39;) with the number that&#39;s up to it.\r\n         */\r\n        public void moveUp() {\r\n            try {\r\n                move((byte)(x - 1), y);\r\n            } catch(IllegalArgumentException e) {\r\n                throw new RuntimeException(&quot;Move prohibited &quot; + e.getMessage());\r\n            }\r\n        }\r\n\r\n        /**\r\n         * Swap position of the space (&#39;0&#39;) with the number that&#39;s down to it.\r\n         */\r\n        public void moveDown() {\r\n            try {\r\n                move((byte)(x + 1), y);\r\n            } catch(IllegalArgumentException e) {\r\n                throw new RuntimeException(&quot;Move prohibited &quot; + e.getMessage());\r\n            }\r\n        }\r\n\r\n        /**\r\n         * Swap position of the space (&#39;0&#39;) with the number that&#39;s left to it.\r\n         */\r\n        public void moveLeft() {\r\n            try {\r\n                move(x, (byte)(y - 1));\r\n            } catch(IllegalArgumentException e) {\r\n                throw new RuntimeException(&quot;Move prohibited &quot; + e.getMessage());\r\n            }\r\n        }\r\n\r\n        /**\r\n         * Swap position of the space (&#39;0&#39;) with the number that&#39;s right to it.\r\n         */\r\n        public void moveRight() {\r\n            try {\r\n                move(x, (byte)(y + 1));\r\n            } catch(IllegalArgumentException e) {\r\n                throw new RuntimeException(&quot;Move prohibited &quot; + e.getMessage());\r\n            }\r\n        }\r\n\r\n        private void move(byte movement) {\r\n            switch(movement) {\r\n            case 0: moveUp(); break;\r\n            case 1: moveRight(); break;\r\n            case 2: moveDown(); break;\r\n            case 3: moveLeft(); break;\r\n            }\r\n        }\r\n\r\n        private boolean areValidCoordinates(byte x, byte y) {\r\n            return (x &gt;= 0 &amp;&amp; x &lt; ROWS &amp;&amp; y &gt;= 0 &amp;&amp; y &lt; COLUMNS);\r\n        }\r\n\r\n        private void move(byte nx, byte ny) {\r\n            if (!areValidCoordinates(nx, ny)) {\r\n                throw new IllegalArgumentException(&quot;(&quot; + nx + &quot;, &quot; + ny + &quot;)&quot;);\r\n            }\r\n            board[x][y] = board[nx][ny];\r\n            board[nx][ny] = &#39;0&#39;;\r\n            x = nx;\r\n            y = ny;\r\n            change = true;\r\n        }\r\n\r\n        public String printableString() {\r\n            StringBuilder sb = new StringBuilder();\r\n            for (byte i = 0; i &lt; ROWS; ++i) {\r\n                for (byte j = 0; j &lt; COLUMNS; ++j) {\r\n                    sb.append(board[i][j] + &quot; &quot;);\r\n                }\r\n                sb.append(&quot;\\r\\n&quot;);\r\n            }\r\n            return sb.toString();\r\n        }\r\n\r\n        private String asString() {\r\n            StringBuilder sb = new StringBuilder();\r\n            for (byte i = 0; i &lt; ROWS; ++i) {\r\n                for (byte j = 0; j &lt; COLUMNS; ++j) {\r\n                    sb.append(board[i][j]);\r\n                }\r\n            }\r\n            return sb.toString();\r\n        }\r\n\r\n        public String toString() {\r\n            if (change) {\r\n                representation = asString();\r\n            }\r\n            return representation;\r\n        }\r\n\r\n        private static byte[] whereShouldItBe(char digit) {\r\n            byte idx = (byte)SOLUTION.indexOf(digit);\r\n            return new byte[] { (byte)(idx / ROWS), (byte)(idx % ROWS) };\r\n        }\r\n\r\n        private static byte manhattanDistance(byte x, byte y, byte x2, byte y2) {\r\n            byte dx = (byte)Math.abs(x - x2);\r\n            byte dy = (byte)Math.abs(y - y2);\r\n            return (byte)(dx + dy);\r\n        }\r\n\r\n        private byte heuristic() {\r\n            byte total = 0;\r\n            for (byte i = 0; i &lt; ROWS; ++i) {\r\n                for (byte j = 0; j &lt; COLUMNS; ++j) {\r\n                    char digit = board[i][j];\r\n                    byte[] coordenates = whereShouldItBe(digit);\r\n                    byte distance = manhattanDistance(i, j, coordenates[0], coordenates[1]);\r\n                    total += distance;\r\n                }\r\n            }\r\n            return total;\r\n        }\r\n\r\n        private class Node implements Comparable&lt;Node&gt; {\r\n            private String puzzle;\r\n            private byte moves; // Number of moves from original configuration\r\n            private byte value; // The value of the heuristic for this configuration.\r\n            public Node(String puzzle, byte moves, byte value) {\r\n                this.puzzle = puzzle;\r\n                this.moves = moves;\r\n                this.value = value;\r\n            }\r\n            @Override\r\n            public int compareTo(Node o) {\r\n                return (value + moves) - (o.value + o.moves);\r\n            }\r\n        }\r\n\r\n        private void print(Map&lt;String, String&gt; antecessor) {\r\n            Stack toPrint = new Stack();\r\n            toPrint.add(SOLUTION);\r\n            String before = antecessor.get(SOLUTION);\r\n            while (!before.equals(&quot;&quot;)) {\r\n                toPrint.add(before);\r\n                before = antecessor.get(before);\r\n            }\r\n            while (!toPrint.isEmpty()) {\r\n                System.out.println(new TilePuzzle(toPrint.pop()).printableString());\r\n            }\r\n        }\r\n\r\n        private byte solve() {\r\n            if(toString().equals(SOLUTION)) {\r\n                return 0;\r\n            }\r\n\r\n            PriorityQueue&lt;Node&gt; toProcess = new PriorityQueue();\r\n            Node initial = new Node(toString(), (byte)0, heuristic());\r\n            toProcess.add(initial);\r\n\r\n            Map&lt;String, String&gt; antecessor = new HashMap&lt;String, String&gt;();\r\n            antecessor.put(toString(), &quot;&quot;);\r\n\r\n            while(!toProcess.isEmpty()) {\r\n                Node actual = toProcess.poll();\r\n                for (byte i = 0; i &lt; 4; ++i) {\r\n                    TilePuzzle t = new TilePuzzle(actual.puzzle);\r\n                    try {\r\n                        t.move(i);\r\n                    } catch(RuntimeException e) {\r\n                        continue;\r\n                    }\r\n                    if (t.toString().equals(SOLUTION)) {\r\n                        antecessor.put(SOLUTION, actual.puzzle);\r\n                        print(antecessor);\r\n                        return (byte)(actual.moves + 1);\r\n                    } else if (!antecessor.containsKey(t.toString())) {\r\n                        byte v = t.heuristic();\r\n                        Node neighbor = new Node(t.toString(), (byte)(actual.moves + 1), v);\r\n                        toProcess.add(neighbor);\r\n                        antecessor.put(t.toString(), actual.puzzle);\r\n                    }\r\n                }\r\n            }\r\n            return -1;\r\n        }\r\n\r\n        public static void main(String... args) {\r\n            TilePuzzle puzzle = new TilePuzzle();\r\n            System.out.println(puzzle.solve());\r\n        }\r\n    }\r\n","title":"I am trying to solve &#39;15 puzzle&#39;, but I get &#39;OutOfMemoryError&#39;","body":"<p>Is there a way that I can optimize this code as to not run out of memory?</p>\n<pre><code>import java.util.HashMap;\nimport java.util.Map;\nimport java.util.PriorityQueue;\nimport java.util.Random;\nimport java.util.Stack;\n\npublic class TilePuzzle {\n\n    private final static byte ROWS = 4;\n    private final static byte COLUMNS = 4;\n    private static String SOLUTION = &quot;123456789ABCDEF0&quot;;\n    private static byte RADIX = 16;\n\n    private char[][] board = new char[ROWS][COLUMNS];\n    private byte x; // Row of the space ('0')\n    private byte y; // Column of the space ('0') private String representation;\n    private boolean change = false; // Has the board changed after the last call to toString?\n\n    private TilePuzzle() {\n        this(SOLUTION);\n        int times = 1000;\n        Random rnd = new Random();\n        while(times-- &gt; 0) {\n            try {\n                move((byte)rnd.nextInt(4));\n            }\n            catch(RuntimeException e) {\n            }\n        }\n        this.representation = asString();\n    }\n\n    public TilePuzzle(String representation) {\n        this.representation = representation;\n        final byte SIZE = (byte)SOLUTION.length();\n        if (representation.length() != SIZE) {\n            throw new IllegalArgumentException(&quot;The board must have &quot; + SIZE + &quot;numbers.&quot;);\n        }\n\n        boolean[] used = new boolean[SIZE];\n        byte idx = 0;\n        for (byte i = 0; i &lt; ROWS; ++i) {\n            for (byte j = 0; j &lt; COLUMNS; ++j) {\n                char digit = representation.charAt(idx++);\n                byte number = (byte)Character.digit(digit, RADIX);\n                if (number &lt; 0 || number &gt;= SIZE) {\n                    throw new IllegalArgumentException(&quot;The character &quot; + digit + &quot; is not valid.&quot;);\n                } else if(used[number]) {\n                    throw new IllegalArgumentException(&quot;The character &quot; + digit + &quot; is repeated.&quot;);\n                }\n                used[number] = true;\n                board[i][j] = digit;\n                if (digit == '0') {\n                    x = i;\n                    y = j;\n                }\n            }\n        }\n    }\n\n    /**\n     * Swap position of the space ('0') with the number that's up to it.\n     */\n    public void moveUp() {\n        try {\n            move((byte)(x - 1), y);\n        } catch(IllegalArgumentException e) {\n            throw new RuntimeException(&quot;Move prohibited &quot; + e.getMessage());\n        }\n    }\n\n    /**\n     * Swap position of the space ('0') with the number that's down to it.\n     */\n    public void moveDown() {\n        try {\n            move((byte)(x + 1), y);\n        } catch(IllegalArgumentException e) {\n            throw new RuntimeException(&quot;Move prohibited &quot; + e.getMessage());\n        }\n    }\n\n    /**\n     * Swap position of the space ('0') with the number that's left to it.\n     */\n    public void moveLeft() {\n        try {\n            move(x, (byte)(y - 1));\n        } catch(IllegalArgumentException e) {\n            throw new RuntimeException(&quot;Move prohibited &quot; + e.getMessage());\n        }\n    }\n\n    /**\n     * Swap position of the space ('0') with the number that's right to it.\n     */\n    public void moveRight() {\n        try {\n            move(x, (byte)(y + 1));\n        } catch(IllegalArgumentException e) {\n            throw new RuntimeException(&quot;Move prohibited &quot; + e.getMessage());\n        }\n    }\n\n    private void move(byte movement) {\n        switch(movement) {\n        case 0: moveUp(); break;\n        case 1: moveRight(); break;\n        case 2: moveDown(); break;\n        case 3: moveLeft(); break;\n        }\n    }\n\n    private boolean areValidCoordinates(byte x, byte y) {\n        return (x &gt;= 0 &amp;&amp; x &lt; ROWS &amp;&amp; y &gt;= 0 &amp;&amp; y &lt; COLUMNS);\n    }\n\n    private void move(byte nx, byte ny) {\n        if (!areValidCoordinates(nx, ny)) {\n            throw new IllegalArgumentException(&quot;(&quot; + nx + &quot;, &quot; + ny + &quot;)&quot;);\n        }\n        board[x][y] = board[nx][ny];\n        board[nx][ny] = '0';\n        x = nx;\n        y = ny;\n        change = true;\n    }\n\n    public String printableString() {\n        StringBuilder sb = new StringBuilder();\n        for (byte i = 0; i &lt; ROWS; ++i) {\n            for (byte j = 0; j &lt; COLUMNS; ++j) {\n                sb.append(board[i][j] + &quot; &quot;);\n            }\n            sb.append(&quot;\\r\\n&quot;);\n        }\n        return sb.toString();\n    }\n\n    private String asString() {\n        StringBuilder sb = new StringBuilder();\n        for (byte i = 0; i &lt; ROWS; ++i) {\n            for (byte j = 0; j &lt; COLUMNS; ++j) {\n                sb.append(board[i][j]);\n            }\n        }\n        return sb.toString();\n    }\n\n    public String toString() {\n        if (change) {\n            representation = asString();\n        }\n        return representation;\n    }\n\n    private static byte[] whereShouldItBe(char digit) {\n        byte idx = (byte)SOLUTION.indexOf(digit);\n        return new byte[] { (byte)(idx / ROWS), (byte)(idx % ROWS) };\n    }\n\n    private static byte manhattanDistance(byte x, byte y, byte x2, byte y2) {\n        byte dx = (byte)Math.abs(x - x2);\n        byte dy = (byte)Math.abs(y - y2);\n        return (byte)(dx + dy);\n    }\n\n    private byte heuristic() {\n        byte total = 0;\n        for (byte i = 0; i &lt; ROWS; ++i) {\n            for (byte j = 0; j &lt; COLUMNS; ++j) {\n                char digit = board[i][j];\n                byte[] coordenates = whereShouldItBe(digit);\n                byte distance = manhattanDistance(i, j, coordenates[0], coordenates[1]);\n                total += distance;\n            }\n        }\n        return total;\n    }\n\n    private class Node implements Comparable&lt;Node&gt; {\n        private String puzzle;\n        private byte moves; // Number of moves from original configuration\n        private byte value; // The value of the heuristic for this configuration.\n        public Node(String puzzle, byte moves, byte value) {\n            this.puzzle = puzzle;\n            this.moves = moves;\n            this.value = value;\n        }\n        @Override\n        public int compareTo(Node o) {\n            return (value + moves) - (o.value + o.moves);\n        }\n    }\n\n    private void print(Map&lt;String, String&gt; antecessor) {\n        Stack toPrint = new Stack();\n        toPrint.add(SOLUTION);\n        String before = antecessor.get(SOLUTION);\n        while (!before.equals(&quot;&quot;)) {\n            toPrint.add(before);\n            before = antecessor.get(before);\n        }\n        while (!toPrint.isEmpty()) {\n            System.out.println(new TilePuzzle(toPrint.pop()).printableString());\n        }\n    }\n\n    private byte solve() {\n        if(toString().equals(SOLUTION)) {\n            return 0;\n        }\n\n        PriorityQueue&lt;Node&gt; toProcess = new PriorityQueue();\n        Node initial = new Node(toString(), (byte)0, heuristic());\n        toProcess.add(initial);\n\n        Map&lt;String, String&gt; antecessor = new HashMap&lt;String, String&gt;();\n        antecessor.put(toString(), &quot;&quot;);\n\n        while(!toProcess.isEmpty()) {\n            Node actual = toProcess.poll();\n            for (byte i = 0; i &lt; 4; ++i) {\n                TilePuzzle t = new TilePuzzle(actual.puzzle);\n                try {\n                    t.move(i);\n                } catch(RuntimeException e) {\n                    continue;\n                }\n                if (t.toString().equals(SOLUTION)) {\n                    antecessor.put(SOLUTION, actual.puzzle);\n                    print(antecessor);\n                    return (byte)(actual.moves + 1);\n                } else if (!antecessor.containsKey(t.toString())) {\n                    byte v = t.heuristic();\n                    Node neighbor = new Node(t.toString(), (byte)(actual.moves + 1), v);\n                    toProcess.add(neighbor);\n                    antecessor.put(t.toString(), actual.puzzle);\n                }\n            }\n        }\n        return -1;\n    }\n\n    public static void main(String... args) {\n        TilePuzzle puzzle = new TilePuzzle();\n        System.out.println(puzzle.solve());\n    }\n}\n</code></pre>\n"},{"tags":["java","security","certificate","digital-signature","x509certificate"],"comments":[{"owner":{"account_id":3421244,"reputation":35863,"user_id":2868801,"display_name":"dave_thompson_085"},"score":0,"creation_date":1675196565,"post_id":75302020,"comment_id":132875767,"body_markdown":"Verifying a signature is not decrypting and signing is not encrypting; see (my) https://security.stackexchange.com/questions/159282/#159289 . And per below note that verifying the signature on a cert, although necessary, is not nearly enough to establish the cert can be trusted.","body":"Verifying a signature is not decrypting and signing is not encrypting; see (my) <a href=\"https://security.stackexchange.com/questions/159282/#159289\">security.stackexchange.com/questions/159282/#159289</a> . And per below note that verifying the signature on a cert, although necessary, is not nearly enough to establish the cert can be trusted."}],"answers":[{"tags":[],"owner":{"account_id":5289146,"reputation":8128,"user_id":4222206,"display_name":"queeg"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1675195444,"creation_date":1675195444,"answer_id":75302562,"question_id":75302020,"body_markdown":"You can grab the public key from the certificate itself. After all, a certificate is a public key, some metadata and a signature.\r\n\r\nNow you still need a trusted source of certificates or public keys. And that is the application&#39;s truststore. This one is filled with certificates the application is allowed to trust (blindly). So any certificate contained in the truststore is trusted, but also any certificate that was signed by one of the trusted ones. With that, you can build a hierarchy and validate an enormous amount of certificates.\r\n\r\nOn top of just checking the signatures and trust chains, you will also want to contact the CAs for their certificate revocation list - just to ensure the certificate in question is not contained there.\r\n\r\nSee also\r\n- [Generating a KeyStore and TrustStore][1]\r\n- https://stackoverflow.com/questions/11143360/ssl-certificate-verification-in-java\r\n- [Certificate revocation list][2]\r\n\r\n\r\n  [1]: https://docs.oracle.com/cd/E19509-01/820-3503/6nf1il6er/index.html\r\n  [2]: https://en.wikipedia.org/wiki/Certificate_revocation_list","title":"How to verify digital signature is from CA in Java 8?","body":"<p>You can grab the public key from the certificate itself. After all, a certificate is a public key, some metadata and a signature.</p>\n<p>Now you still need a trusted source of certificates or public keys. And that is the application's truststore. This one is filled with certificates the application is allowed to trust (blindly). So any certificate contained in the truststore is trusted, but also any certificate that was signed by one of the trusted ones. With that, you can build a hierarchy and validate an enormous amount of certificates.</p>\n<p>On top of just checking the signatures and trust chains, you will also want to contact the CAs for their certificate revocation list - just to ensure the certificate in question is not contained there.</p>\n<p>See also</p>\n<ul>\n<li><a href=\"https://docs.oracle.com/cd/E19509-01/820-3503/6nf1il6er/index.html\" rel=\"nofollow noreferrer\">Generating a KeyStore and TrustStore</a></li>\n<li><a href=\"https://stackoverflow.com/questions/11143360/ssl-certificate-verification-in-java\">SSL Certificate Verification in Java</a></li>\n<li><a href=\"https://en.wikipedia.org/wiki/Certificate_revocation_list\" rel=\"nofollow noreferrer\">Certificate revocation list</a></li>\n</ul>\n"}],"owner":{"account_id":10724628,"reputation":378,"user_id":7892562,"display_name":"Joe D"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":198,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75302562,"answer_count":1,"score":0,"last_activity_date":1675195444,"creation_date":1675191991,"question_id":75302020,"body_markdown":"I&#39;ve spent the last few days trying to learn x509 certificates (issued by CAs) and I *think* I have a solid understanding of the principle of how they work. My understanding is that a digital certificate has an associated signature, and that signature should only be able to be decrypted with the public key of the CA that issued/signed it.\r\n\r\nWhat I&#39;m failing to understand is how to actually implement that verification logic in Java. Where do I retrieve that public key from to decrypt the signature and verify the digest? Is there a lookup table somewhere where you can provide a DN and get a public key back?\r\n\r\nI&#39;ve tried to use the `javax.security.cert.X509Certificate` class to load a certificate, and I notice the `verify` function that requires a public key. I just don&#39;t know where to get the public key. \r\n","title":"How to verify digital signature is from CA in Java 8?","body":"<p>I've spent the last few days trying to learn x509 certificates (issued by CAs) and I <em>think</em> I have a solid understanding of the principle of how they work. My understanding is that a digital certificate has an associated signature, and that signature should only be able to be decrypted with the public key of the CA that issued/signed it.</p>\n<p>What I'm failing to understand is how to actually implement that verification logic in Java. Where do I retrieve that public key from to decrypt the signature and verify the digest? Is there a lookup table somewhere where you can provide a DN and get a public key back?</p>\n<p>I've tried to use the <code>javax.security.cert.X509Certificate</code> class to load a certificate, and I notice the <code>verify</code> function that requires a public key. I just don't know where to get the public key.</p>\n"},{"tags":["javascript","java","react-native","expo"],"answers":[{"tags":[],"owner":{"account_id":2638302,"reputation":51,"user_id":2282485,"display_name":"kbrandwijk"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1675194881,"creation_date":1675194881,"answer_id":75302472,"question_id":75301797,"body_markdown":"Yes, there is a workaround, which is a two step progress:\r\n\r\n- Adjust the package name in your config to be a _valid_ Java name\r\n- Use a config plugin to set the applicationId in your build.gradle to your old package name\r\n\r\nThat way, your applicationId for Play Console stays the same, and the package name used in Java is valid for building.\r\n\r\nHere is a gist with an example config plugin, and how to add it to your app.json: \r\n\r\nhttps://gist.github.com/kbrandwijk/cef9e3b01cff91f8dfad8f47f02cb880\r\n\r\n","title":"Expo - Package &#39;com.xxx.native.xxx&#39; from AndroidManifest.xml is not a valid Java package name as &#39;native&#39; is a Java keyword","body":"<p>Yes, there is a workaround, which is a two step progress:</p>\n<ul>\n<li>Adjust the package name in your config to be a <em>valid</em> Java name</li>\n<li>Use a config plugin to set the applicationId in your build.gradle to your old package name</li>\n</ul>\n<p>That way, your applicationId for Play Console stays the same, and the package name used in Java is valid for building.</p>\n<p>Here is a gist with an example config plugin, and how to add it to your app.json:</p>\n<p><a href=\"https://gist.github.com/kbrandwijk/cef9e3b01cff91f8dfad8f47f02cb880\" rel=\"nofollow noreferrer\">https://gist.github.com/kbrandwijk/cef9e3b01cff91f8dfad8f47f02cb880</a></p>\n"}],"owner":{"account_id":7331808,"reputation":23,"user_id":5584431,"display_name":"Aamir J"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":338,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1675194881,"creation_date":1675190706,"question_id":75301797,"body_markdown":"I have used the pattern &#39;com.mycompanyname.native.appname&#39; to name the bundle Ids for my apps since years and have created many apps using the keyword &quot;native&quot; in the package name. I didn&#39;t get this error when using classic expo builds until I switched to EAS builds.\r\nNow, I have to upgrade a few of the live apps, can there be a workaround to overcome this error?","title":"Expo - Package &#39;com.xxx.native.xxx&#39; from AndroidManifest.xml is not a valid Java package name as &#39;native&#39; is a Java keyword","body":"<p>I have used the pattern 'com.mycompanyname.native.appname' to name the bundle Ids for my apps since years and have created many apps using the keyword &quot;native&quot; in the package name. I didn't get this error when using classic expo builds until I switched to EAS builds.\nNow, I have to upgrade a few of the live apps, can there be a workaround to overcome this error?</p>\n"},{"tags":["java","spring-boot","jpa","jdbc"],"comments":[{"owner":{"account_id":15087658,"reputation":84,"user_id":10888409,"display_name":"Turtle"},"score":0,"creation_date":1657833955,"post_id":72986724,"comment_id":128911053,"body_markdown":"I think the url is missing the port after localhost / invalid","body":"I think the url is missing the port after localhost / invalid"},{"owner":{"account_id":25793049,"reputation":23,"user_id":19536797,"display_name":"FacundoGB"},"score":0,"creation_date":1657836239,"post_id":72986724,"comment_id":128911547,"body_markdown":"I believe the server.port removes the need. But I&#39;ve tried it (be it removing it and adding it where you say or keeping both) and the problem persists.","body":"I believe the server.port removes the need. But I&#39;ve tried it (be it removing it and adding it where you say or keeping both) and the problem persists."}],"answers":[{"tags":[],"owner":{"account_id":25793049,"reputation":23,"user_id":19536797,"display_name":"FacundoGB"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1657836946,"creation_date":1657836946,"answer_id":72987169,"question_id":72986724,"body_markdown":"I managed to fix it.\r\nThe actual problem was a typo, instead of: `spring.datasource.url=jdbc.mysql://localhost/webservice?useSSL=false`\r\nit shoud have been:\r\n`spring.datasource.url=jdbc:mysql://localhost/webservice?useSSL=false`\r\n\r\nTo take away the grey i followed the advise on https://intellij-support.jetbrains.com/hc/en-us/community/posts/206858715-Properties-editor-reporting-Unused-property-for-all-entries","title":"How can I avoid grayed-out properties in the &quot;application.properties&quot; file?","body":"<p>I managed to fix it.\nThe actual problem was a typo, instead of: <code>spring.datasource.url=jdbc.mysql://localhost/webservice?useSSL=false</code>\nit shoud have been:\n<code>spring.datasource.url=jdbc:mysql://localhost/webservice?useSSL=false</code></p>\n<p>To take away the grey i followed the advise on <a href=\"https://intellij-support.jetbrains.com/hc/en-us/community/posts/206858715-Properties-editor-reporting-Unused-property-for-all-entries\" rel=\"nofollow noreferrer\">https://intellij-support.jetbrains.com/hc/en-us/community/posts/206858715-Properties-editor-reporting-Unused-property-for-all-entries</a></p>\n"}],"owner":{"account_id":25793049,"reputation":23,"user_id":19536797,"display_name":"FacundoGB"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":291,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":72987169,"answer_count":1,"score":0,"last_activity_date":1675194557,"creation_date":1657833190,"question_id":72986724,"body_markdown":"Working in Intellij. I&#39;m trying to see the data stored in my DB. When I go to my application.properties to configure the connection all &quot;**spring.(...)**&quot; lines are grayed out. My application.properties resource directory **is** marked as **resource root**\r\n\r\n    #GENERAL\r\n    server.port=8080\r\n    \r\n    #DATABASE\r\n    spring.datasource.url=jdbc.mysql://localhost/webservice?useSSL=false\r\n    spring.datasource.dbname=webservice\r\n    spring.datasource.username=root\r\n    spring.datasource.password=\r\n    spring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver\r\n\r\nThis is my pom.xml file:\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n    \txsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n    \t&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n    \t&lt;parent&gt;\r\n    \t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t&lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n    \t\t&lt;version&gt;2.7.1&lt;/version&gt;\r\n    \t\t&lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\r\n    \t&lt;/parent&gt;\r\n    \t&lt;groupId&gt;com.JavaWebSerice&lt;/groupId&gt;\r\n    \t&lt;artifactId&gt;WebService&lt;/artifactId&gt;\r\n    \t&lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\r\n    \t&lt;packaging&gt;war&lt;/packaging&gt;\r\n    \t&lt;name&gt;WebService&lt;/name&gt;\r\n    \t&lt;description&gt;Demo project for Spring Boot&lt;/description&gt;\r\n    \t&lt;properties&gt;\r\n    \t\t&lt;java.version&gt;11&lt;/java.version&gt;\r\n    \t&lt;/properties&gt;\r\n    \t&lt;dependencies&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;spring-boot-starter-mail&lt;/artifactId&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;spring-boot-starter-security&lt;/artifactId&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;spring-boot-starter-tomcat&lt;/artifactId&gt;\r\n    \t\t\t&lt;scope&gt;provided&lt;/scope&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\r\n    \t\t\t&lt;scope&gt;test&lt;/scope&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.springframework.security&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;spring-security-test&lt;/artifactId&gt;\r\n    \t\t\t&lt;scope&gt;test&lt;/scope&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;spring-tx&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;5.3.20&lt;/version&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;2.7.0&lt;/version&gt;\r\n    \t\t\t&lt;optional&gt;true&lt;/optional&gt;\r\n    \r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;mysql&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;\r\n    \t\t\t&lt;scope&gt;runtime&lt;/scope&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;lombok&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;1.18.24&lt;/version&gt;\r\n    \t\t\t&lt;scope&gt;provided&lt;/scope&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \r\n    \r\n    \t&lt;/dependencies&gt;\r\n    \r\n    \t&lt;build&gt;\r\n    \t\t&lt;plugins&gt;\r\n    \t\t\t&lt;plugin&gt;\r\n    \t\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t\t\t&lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\r\n    \t\t\t&lt;/plugin&gt;\r\n    \t\t&lt;/plugins&gt;\r\n    \t&lt;/build&gt;\r\n    \r\n    &lt;/project&gt;\r\n\r\n\r\n\r\nI get the following error even tho the build is a success:\r\n\r\n        Error starting ApplicationContext. To display the conditions report re-run your application with &#39;debug&#39; enabled.\r\n    2022-07-14 17:59:57.628 ERROR 7960 --- [  restartedMain] o.s.boot.SpringApplication               : Application run failed\r\n    \r\n    org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;entityManagerFactory&#39; defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/HibernateJpaConfiguration.class]: Bean instantiation via factory method failed; nested exception is org.springframework.beans.BeanInstantiationException: Failed to instantiate [org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean]: Factory method &#39;entityManagerFactory&#39; threw exception; nested exception is java.lang.RuntimeException: Driver com.mysql.cj.jdbc.Driver claims to not accept jdbcUrl, jdbc.mysql://localhost/webservice?useSSL=false\r\n    \tat org.springframework.beans.factory.support.ConstructorResolver.instantiate(ConstructorResolver.java:658) ~[spring-beans-5.3.21.jar:5.3.21]\r\n    \tat org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:638) ~[spring-beans-5.3.21.jar:5.3.21]\r\n    \tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1352) ~[spring-beans-5.3.21.jar:5.3.21]\r\n    \tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1195) ~[spring-beans-5.3.21.jar:5.3.21]\r\n    \tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:582) ~[spring-beans-5.3.21.jar:5.3.21]\r\n    \tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:542) ~[spring-beans-5.3.21.jar:5.3.21]\r\n    \tat org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:335) ~[spring-beans-5.3.21.jar:5.3.21]\r\n    \tat org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-5.3.21.jar:5.3.21]\r\n    \tat org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:333) ~[spring-beans-5.3.21.jar:5.3.21]\r\n    \tat org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:208) ~[spring-beans-5.3.21.jar:5.3.21]\r\n    \tat org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1154) ~[spring-context-5.3.21.jar:5.3.21]\r\n    \tat org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:908) ~[spring-context-5.3.21.jar:5.3.21]\r\n    \tat org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:583) ~[spring-context-5.3.21.jar:5.3.21]\r\n    \tat org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:147) ~[spring-boot-2.7.1.jar:2.7.1]\r\n    \tat org.springframework.boot.SpringApplication.refresh(SpringApplication.java:734) ~[spring-boot-2.7.1.jar:2.7.1]\r\n    \tat org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:408) ~[spring-boot-2.7.1.jar:2.7.1]\r\n    \tat org.springframework.boot.SpringApplication.run(SpringApplication.java:308) ~[spring-boot-2.7.1.jar:2.7.1]\r\n    \tat org.springframework.boot.SpringApplication.run(SpringApplication.java:1306) ~[spring-boot-2.7.1.jar:2.7.1]\r\n    \tat org.springframework.boot.SpringApplication.run(SpringApplication.java:1295) ~[spring-boot-2.7.1.jar:2.7.1]\r\n    \tat com.JavaWebSerice.WebService.WebServiceApplication.main(WebServiceApplication.java:10) ~[classes/:na]\r\n    \tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]\r\n    \tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[na:na]\r\n    \tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]\r\n    \tat java.base/java.lang.reflect.Method.invoke(Method.java:566) ~[na:na]\r\n    \tat org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:49) ~[spring-boot-devtools-2.7.0.jar:2.7.0]\r\n    Caused by: org.springframework.beans.BeanInstantiationException: Failed to instantiate [org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean]: Factory method &#39;entityManagerFactory&#39; threw exception; nested exception is java.lang.RuntimeException: Driver com.mysql.cj.jdbc.Driver claims to not accept jdbcUrl, jdbc.mysql://localhost/webservice?useSSL=false\r\n    \tat org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:185) ~[spring-beans-5.3.21.jar:5.3.21]\r\n    \tat org.springframework.beans.factory.support.ConstructorResolver.instantiate(ConstructorResolver.java:653) ~[spring-beans-5.3.21.jar:5.3.21]\r\n    \t... 24 common frames omitted\r\n    Caused by: java.lang.RuntimeException: Driver com.mysql.cj.jdbc.Driver claims to not accept jdbcUrl, jdbc.mysql://localhost/webservice?useSSL=false\r\n    \tat com.zaxxer.hikari.util.DriverDataSource.&lt;init&gt;(DriverDataSource.java:110) ~[HikariCP-4.0.3.jar:na]\r\n    \tat com.zaxxer.hikari.pool.PoolBase.initializeDataSource(PoolBase.java:331) ~[HikariCP-4.0.3.jar:na]\r\n    \tat com.zaxxer.hikari.pool.PoolBase.&lt;init&gt;(PoolBase.java:114) ~[HikariCP-4.0.3.jar:na]\r\n    \tat com.zaxxer.hikari.pool.HikariPool.&lt;init&gt;(HikariPool.java:108) ~[HikariCP-4.0.3.jar:na]\r\n    \tat com.zaxxer.hikari.HikariDataSource.getConnection(HikariDataSource.java:112) ~[HikariCP-4.0.3.jar:na]\r\n    \tat org.springframework.jdbc.datasource.DataSourceUtils.fetchConnection(DataSourceUtils.java:159) ~[spring-jdbc-5.3.21.jar:5.3.21]\r\n    \tat org.springframework.jdbc.datasource.DataSourceUtils.doGetConnection(DataSourceUtils.java:117) ~[spring-jdbc-5.3.21.jar:5.3.21]\r\n    \tat org.springframework.jdbc.datasource.DataSourceUtils.getConnection(DataSourceUtils.java:80) ~[spring-jdbc-5.3.21.jar:5.3.21]\r\n    \tat org.springframework.jdbc.core.JdbcTemplate.execute(JdbcTemplate.java:330) ~[spring-jdbc-5.3.21.jar:5.3.21]\r\n    \tat org.springframework.boot.jdbc.EmbeddedDatabaseConnection.isEmbedded(EmbeddedDatabaseConnection.java:162) ~[spring-boot-2.7.1.jar:2.7.1]\r\n    \tat org.springframework.boot.autoconfigure.orm.jpa.HibernateDefaultDdlAutoProvider.getDefaultDdlAuto(HibernateDefaultDdlAutoProvider.java:42) ~[spring-boot-autoconfigure-2.7.1.jar:2.7.1]\r\n    \tat org.springframework.boot.autoconfigure.orm.jpa.HibernateJpaConfiguration.lambda$getVendorProperties$1(HibernateJpaConfiguration.java:130) ~[spring-boot-autoconfigure-2.7.1.jar:2.7.1]\r\n    \tat org.springframework.boot.autoconfigure.orm.jpa.HibernateSettings.getDdlAuto(HibernateSettings.java:41) ~[spring-boot-autoconfigure-2.7.1.jar:2.7.1]\r\n    \tat org.springframework.boot.autoconfigure.orm.jpa.HibernateProperties.determineDdlAuto(HibernateProperties.java:143) ~[spring-boot-autoconfigure-2.7.1.jar:2.7.1]\r\n    \tat org.springframework.boot.autoconfigure.orm.jpa.HibernateProperties.getAdditionalProperties(HibernateProperties.java:103) ~[spring-boot-autoconfigure-2.7.1.jar:2.7.1]\r\n    \tat org.springframework.boot.autoconfigure.orm.jpa.HibernateProperties.determineHibernateProperties(HibernateProperties.java:95) ~[spring-boot-autoconfigure-2.7.1.jar:2.7.1]\r\n    \tat org.springframework.boot.autoconfigure.orm.jpa.HibernateJpaConfiguration.getVendorProperties(HibernateJpaConfiguration.java:132) ~[spring-boot-autoconfigure-2.7.1.jar:2.7.1]\r\n    \tat org.springframework.boot.autoconfigure.orm.jpa.JpaBaseConfiguration.entityManagerFactory(JpaBaseConfiguration.java:132) ~[spring-boot-autoconfigure-2.7.1.jar:2.7.1]\r\n    \tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]\r\n    \tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[na:na]\r\n    \tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]\r\n    \tat java.base/java.lang.reflect.Method.invoke(Method.java:566) ~[na:na]\r\n    \tat org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:154) ~[spring-beans-5.3.21.jar:5.3.21]\r\n    \t... 25 common frames omitted\r\n\r\n","title":"How can I avoid grayed-out properties in the &quot;application.properties&quot; file?","body":"<p>Working in Intellij. I'm trying to see the data stored in my DB. When I go to my application.properties to configure the connection all &quot;<strong>spring.(...)</strong>&quot; lines are grayed out. My application.properties resource directory <strong>is</strong> marked as <strong>resource root</strong></p>\n<pre><code>#GENERAL\nserver.port=8080\n\n#DATABASE\nspring.datasource.url=jdbc.mysql://localhost/webservice?useSSL=false\nspring.datasource.dbname=webservice\nspring.datasource.username=root\nspring.datasource.password=\nspring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver\n</code></pre>\n<p>This is my pom.xml file:</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n    xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n    &lt;parent&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n        &lt;version&gt;2.7.1&lt;/version&gt;\n        &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\n    &lt;/parent&gt;\n    &lt;groupId&gt;com.JavaWebSerice&lt;/groupId&gt;\n    &lt;artifactId&gt;WebService&lt;/artifactId&gt;\n    &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n    &lt;packaging&gt;war&lt;/packaging&gt;\n    &lt;name&gt;WebService&lt;/name&gt;\n    &lt;description&gt;Demo project for Spring Boot&lt;/description&gt;\n    &lt;properties&gt;\n        &lt;java.version&gt;11&lt;/java.version&gt;\n    &lt;/properties&gt;\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-mail&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-security&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-tomcat&lt;/artifactId&gt;\n            &lt;scope&gt;provided&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.security&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-security-test&lt;/artifactId&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-tx&lt;/artifactId&gt;\n            &lt;version&gt;5.3.20&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt;\n            &lt;version&gt;2.7.0&lt;/version&gt;\n            &lt;optional&gt;true&lt;/optional&gt;\n\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;mysql&lt;/groupId&gt;\n            &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;\n            &lt;scope&gt;runtime&lt;/scope&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\n            &lt;artifactId&gt;lombok&lt;/artifactId&gt;\n            &lt;version&gt;1.18.24&lt;/version&gt;\n            &lt;scope&gt;provided&lt;/scope&gt;\n        &lt;/dependency&gt;\n\n\n    &lt;/dependencies&gt;\n\n    &lt;build&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n\n&lt;/project&gt;\n</code></pre>\n<p>I get the following error even tho the build is a success:</p>\n<pre><code>    Error starting ApplicationContext. To display the conditions report re-run your application with 'debug' enabled.\n2022-07-14 17:59:57.628 ERROR 7960 --- [  restartedMain] o.s.boot.SpringApplication               : Application run failed\n\norg.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/HibernateJpaConfiguration.class]: Bean instantiation via factory method failed; nested exception is org.springframework.beans.BeanInstantiationException: Failed to instantiate [org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean]: Factory method 'entityManagerFactory' threw exception; nested exception is java.lang.RuntimeException: Driver com.mysql.cj.jdbc.Driver claims to not accept jdbcUrl, jdbc.mysql://localhost/webservice?useSSL=false\n    at org.springframework.beans.factory.support.ConstructorResolver.instantiate(ConstructorResolver.java:658) ~[spring-beans-5.3.21.jar:5.3.21]\n    at org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:638) ~[spring-beans-5.3.21.jar:5.3.21]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1352) ~[spring-beans-5.3.21.jar:5.3.21]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1195) ~[spring-beans-5.3.21.jar:5.3.21]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:582) ~[spring-beans-5.3.21.jar:5.3.21]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:542) ~[spring-beans-5.3.21.jar:5.3.21]\n    at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:335) ~[spring-beans-5.3.21.jar:5.3.21]\n    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-5.3.21.jar:5.3.21]\n    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:333) ~[spring-beans-5.3.21.jar:5.3.21]\n    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:208) ~[spring-beans-5.3.21.jar:5.3.21]\n    at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1154) ~[spring-context-5.3.21.jar:5.3.21]\n    at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:908) ~[spring-context-5.3.21.jar:5.3.21]\n    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:583) ~[spring-context-5.3.21.jar:5.3.21]\n    at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:147) ~[spring-boot-2.7.1.jar:2.7.1]\n    at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:734) ~[spring-boot-2.7.1.jar:2.7.1]\n    at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:408) ~[spring-boot-2.7.1.jar:2.7.1]\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:308) ~[spring-boot-2.7.1.jar:2.7.1]\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:1306) ~[spring-boot-2.7.1.jar:2.7.1]\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:1295) ~[spring-boot-2.7.1.jar:2.7.1]\n    at com.JavaWebSerice.WebService.WebServiceApplication.main(WebServiceApplication.java:10) ~[classes/:na]\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[na:na]\n    at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]\n    at java.base/java.lang.reflect.Method.invoke(Method.java:566) ~[na:na]\n    at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:49) ~[spring-boot-devtools-2.7.0.jar:2.7.0]\nCaused by: org.springframework.beans.BeanInstantiationException: Failed to instantiate [org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean]: Factory method 'entityManagerFactory' threw exception; nested exception is java.lang.RuntimeException: Driver com.mysql.cj.jdbc.Driver claims to not accept jdbcUrl, jdbc.mysql://localhost/webservice?useSSL=false\n    at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:185) ~[spring-beans-5.3.21.jar:5.3.21]\n    at org.springframework.beans.factory.support.ConstructorResolver.instantiate(ConstructorResolver.java:653) ~[spring-beans-5.3.21.jar:5.3.21]\n    ... 24 common frames omitted\nCaused by: java.lang.RuntimeException: Driver com.mysql.cj.jdbc.Driver claims to not accept jdbcUrl, jdbc.mysql://localhost/webservice?useSSL=false\n    at com.zaxxer.hikari.util.DriverDataSource.&lt;init&gt;(DriverDataSource.java:110) ~[HikariCP-4.0.3.jar:na]\n    at com.zaxxer.hikari.pool.PoolBase.initializeDataSource(PoolBase.java:331) ~[HikariCP-4.0.3.jar:na]\n    at com.zaxxer.hikari.pool.PoolBase.&lt;init&gt;(PoolBase.java:114) ~[HikariCP-4.0.3.jar:na]\n    at com.zaxxer.hikari.pool.HikariPool.&lt;init&gt;(HikariPool.java:108) ~[HikariCP-4.0.3.jar:na]\n    at com.zaxxer.hikari.HikariDataSource.getConnection(HikariDataSource.java:112) ~[HikariCP-4.0.3.jar:na]\n    at org.springframework.jdbc.datasource.DataSourceUtils.fetchConnection(DataSourceUtils.java:159) ~[spring-jdbc-5.3.21.jar:5.3.21]\n    at org.springframework.jdbc.datasource.DataSourceUtils.doGetConnection(DataSourceUtils.java:117) ~[spring-jdbc-5.3.21.jar:5.3.21]\n    at org.springframework.jdbc.datasource.DataSourceUtils.getConnection(DataSourceUtils.java:80) ~[spring-jdbc-5.3.21.jar:5.3.21]\n    at org.springframework.jdbc.core.JdbcTemplate.execute(JdbcTemplate.java:330) ~[spring-jdbc-5.3.21.jar:5.3.21]\n    at org.springframework.boot.jdbc.EmbeddedDatabaseConnection.isEmbedded(EmbeddedDatabaseConnection.java:162) ~[spring-boot-2.7.1.jar:2.7.1]\n    at org.springframework.boot.autoconfigure.orm.jpa.HibernateDefaultDdlAutoProvider.getDefaultDdlAuto(HibernateDefaultDdlAutoProvider.java:42) ~[spring-boot-autoconfigure-2.7.1.jar:2.7.1]\n    at org.springframework.boot.autoconfigure.orm.jpa.HibernateJpaConfiguration.lambda$getVendorProperties$1(HibernateJpaConfiguration.java:130) ~[spring-boot-autoconfigure-2.7.1.jar:2.7.1]\n    at org.springframework.boot.autoconfigure.orm.jpa.HibernateSettings.getDdlAuto(HibernateSettings.java:41) ~[spring-boot-autoconfigure-2.7.1.jar:2.7.1]\n    at org.springframework.boot.autoconfigure.orm.jpa.HibernateProperties.determineDdlAuto(HibernateProperties.java:143) ~[spring-boot-autoconfigure-2.7.1.jar:2.7.1]\n    at org.springframework.boot.autoconfigure.orm.jpa.HibernateProperties.getAdditionalProperties(HibernateProperties.java:103) ~[spring-boot-autoconfigure-2.7.1.jar:2.7.1]\n    at org.springframework.boot.autoconfigure.orm.jpa.HibernateProperties.determineHibernateProperties(HibernateProperties.java:95) ~[spring-boot-autoconfigure-2.7.1.jar:2.7.1]\n    at org.springframework.boot.autoconfigure.orm.jpa.HibernateJpaConfiguration.getVendorProperties(HibernateJpaConfiguration.java:132) ~[spring-boot-autoconfigure-2.7.1.jar:2.7.1]\n    at org.springframework.boot.autoconfigure.orm.jpa.JpaBaseConfiguration.entityManagerFactory(JpaBaseConfiguration.java:132) ~[spring-boot-autoconfigure-2.7.1.jar:2.7.1]\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[na:na]\n    at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]\n    at java.base/java.lang.reflect.Method.invoke(Method.java:566) ~[na:na]\n    at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:154) ~[spring-beans-5.3.21.jar:5.3.21]\n    ... 25 common frames omitted\n</code></pre>\n"},{"tags":["java","spring-boot","maven","graalvm","graalvm-native-image"],"answers":[{"tags":[],"owner":{"account_id":1362416,"reputation":4479,"user_id":1299533,"display_name":"Scott Frederick"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1675194296,"creation_date":1675194296,"answer_id":75302384,"question_id":75284668,"body_markdown":"The `org.springframework.nativex.substitutions.boot.Target_SpringApplicationBannerPrinter` class comes from the [Spring Native experimental project][1]. Spring Native is only compatible with Spring Boot 2.7, and should not be used with Spring Boot 3.0. Spring Framework 6.0 and Spring Boot 3.0 have [GraalVM native executable capabilities][2] built in. \r\n\r\nRemove the Spring Native dependencies from your application and follow the Spring Boot 3 documentation. \r\n\r\n\r\n  [1]: https://github.com/spring-projects-experimental/spring-native\r\n  [2]: https://docs.spring.io/spring-boot/docs/current/reference/htmlsingle/#native-image","title":"Spring Boot NativeImage compilation fails on: &quot;Could not find target method: private org.springframework.boot.Banner&quot;","body":"<p>The <code>org.springframework.nativex.substitutions.boot.Target_SpringApplicationBannerPrinter</code> class comes from the <a href=\"https://github.com/spring-projects-experimental/spring-native\" rel=\"nofollow noreferrer\">Spring Native experimental project</a>. Spring Native is only compatible with Spring Boot 2.7, and should not be used with Spring Boot 3.0. Spring Framework 6.0 and Spring Boot 3.0 have <a href=\"https://docs.spring.io/spring-boot/docs/current/reference/htmlsingle/#native-image\" rel=\"nofollow noreferrer\">GraalVM native executable capabilities</a> built in.</p>\n<p>Remove the Spring Native dependencies from your application and follow the Spring Boot 3 documentation.</p>\n"}],"owner":{"account_id":2238936,"reputation":1737,"user_id":1974494,"accept_rate":43,"display_name":"martin"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":668,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75302384,"answer_count":1,"score":0,"last_activity_date":1675194296,"creation_date":1675083154,"question_id":75284668,"body_markdown":"I have problem with compilation of my Spring boot application.\r\n\r\n**TL;DR: `Error: Could not find target method: private org.springframework.boot.Banner org.springframework.nativex.substitutions.boot.Target_SpringApplicationBannerPrinter.getImageBanner(org.springframework.core.env.Environment)`**\r\n\r\n\r\nI&#39;m using:\r\n- graalvm-ce-java17-linux-amd64-22.3.1\r\n- Spring Boot 3.0.2\r\n- Buildpack gcr.io/paketo-buildpacks/bellsoft-liberica:9.10.3\r\n\r\n`pom.xml` plugin configuration:\r\n```yml\r\n\t&lt;build&gt;\r\n\t\t&lt;plugins&gt;\r\n\t\t\t&lt;plugin&gt;\r\n\t\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\r\n\t\t\t\t&lt;configuration&gt;\r\n\t\t\t\t\t&lt;image&gt;\r\n\t\t\t\t\t\t&lt;buildpacks&gt;\r\n\t\t\t\t\t\t\t&lt;buildpack&gt;gcr.io/paketo-buildpacks/bellsoft-liberica:9.10.3&lt;/buildpack&gt;\r\n\t\t\t\t\t\t\t&lt;buildpack&gt;gcr.io/paketo-buildpacks/java-native-image&lt;/buildpack&gt;\r\n\t\t\t\t\t\t&lt;/buildpacks&gt;\r\n\t\t\t\t\t&lt;/image&gt;\r\n\t\t\t\t\t&lt;excludes&gt;\r\n\t\t\t\t\t\t&lt;exclude&gt;\r\n\t\t\t\t\t\t\t&lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\r\n\t\t\t\t\t\t\t&lt;artifactId&gt;lombok&lt;/artifactId&gt;\r\n\t\t\t\t\t\t&lt;/exclude&gt;\r\n\t\t\t\t\t&lt;/excludes&gt;\r\n\t\t\t\t&lt;/configuration&gt;\r\n\t\t\t&lt;/plugin&gt;\r\n\t\t&lt;/plugins&gt;\r\n\t&lt;/build&gt;\r\n```\r\n\r\n`.gitlab-ci.yml`:\r\n```yaml\r\nstages:\r\n  - build\r\n\r\nbuild:\r\n  stage: build\r\n  image:\r\n    name: maven:3-eclipse-temurin-17-focal\r\n  before_script:\r\n    - set -e\r\n    - apt-get update\r\n    - apt-get -y install wget build-essential zlibc zlib1g zlib1g-dev upx-ucl \r\n    - wget -q https://github.com/graalvm/graalvm-ce-builds/releases/download/vm-22.3.1/graalvm-ce-java17-linux-amd64-22.3.1.tar.gz\r\n    - tar xzf graalvm-ce-java17-linux-amd64-22.3.1.tar.gz\r\n    - mkdir -p /usr/lib/jvm\r\n    - mv graalvm-ce-java17-22.3.1 /usr/lib/jvm/graalvm\r\n    - export PATH=/usr/lib/jvm/graalvm/bin/:$PATH\r\n    - export JAVA_HOME=/usr/lib/jvm/graalvm\r\n    - gu install native-image\r\n    - java --version\r\n    - native-image --version\r\n  script:\r\n    - ./compile.sh\r\n  artifacts:\r\n    expire_in: 1 days\r\n    paths:\r\n     - ${CI_PROJECT_DIR}/target/app-0.0.1-SNAPSHOT.jar\r\n     - ${CI_PROJECT_DIR}/target/app\r\n```\r\n\r\nand `compile.sh`:\r\n```bash\r\n#!/bin/bash\r\n\r\nset -e\r\nmvn -Pnative spring-boot:build-image\r\n\r\nrm -rf target/native\r\nmkdir -p target/native\r\ncd target/native\r\njar -xvf ../app-0.0.1-SNAPSHOT.jar\r\ntouch META-INF/native-image/argfile\r\n\r\nnative-image -H:Name=app \\\r\n@META-INF/native-image/argfile \\\r\n-H:+ReportExceptionStackTraces \\\r\n-H:TraceClassInitialization=true \\\r\n-H:IncludeResources=&quot;.*&quot; \\\r\n--initialize-at-build-time=\\\r\ncom.fasterxml.jackson.annotation.JsonProperty\\\r\n,org.slf4j.impl.StaticLoggerBinder\\\r\n,org.slf4j.LoggerFactory\\\r\n,org.slf4j.simple.SimpleLogger\\\r\n,ch.qos.logback.classic.Logger\\\r\n,ch.qos.logback.core.spi.AppenderAttachableImpl\\\r\n,ch.qos.logback.core.status.StatusBase\\\r\n,ch.qos.logback.classic.Level\\\r\n,ch.qos.logback.core.status.InfoStatus\\\r\n,ch.qos.logback.classic.PatternLayout\\\r\n,ch.qos.logback.core.CoreConstants\\\r\n,ch.qos.logback.core.pattern.parser.Parser \\\r\n-cp .:BOOT-INF/classes:`find BOOT-INF/lib | tr &#39;\\n&#39; &#39;:&#39;`\r\n\r\nmv app ../\r\n```\r\n\r\nThe application works fine when running from JAR. But compilation crashes on:\r\n```\r\nError: Could not find target method: private org.springframework.boot.Banner org.springframework.nativex.substitutions.boot.Target_SpringApplicationBannerPrinter.getImageBanner(org.springframework.core.env.Environment)\r\n```\r\n\r\nFull output:\r\n```\r\n[INFO]     [creator]     Paketo Buildpack for Native Image 5.8.0\r\n[INFO]     [creator]       https://github.com/paketo-buildpacks/native-image\r\n[INFO]     [creator]       Build Configuration:\r\n[INFO]     [creator]         $BP_BINARY_COMPRESSION_METHOD                Compression mechanism used to reduce binary size. Options: `none` (default), `upx` or `gzexe`\r\n[INFO]     [creator]         $BP_NATIVE_IMAGE                       true  enable native image build\r\n[INFO]     [creator]         $BP_NATIVE_IMAGE_BUILD_ARGUMENTS             arguments to pass to the native-image command\r\n[INFO]     [creator]         $BP_NATIVE_IMAGE_BUILD_ARGUMENTS_FILE        a file with arguments to pass to the native-image command\r\n[INFO]     [creator]         $BP_NATIVE_IMAGE_BUILT_ARTIFACT              the built application artifact explicitly, required if building from a JAR\r\n[INFO]     [creator]       Native Image: Contributing to layer\r\n[INFO]     [creator]         Executing native-image -H:+StaticExecutableWithDynamicLibC -H:Name=/layers/paketo-buildpacks_native-image/native-image/cloud.mwapp.app.appApplication -cp /workspace:/workspace/BOOT-INF/classes:/workspace/BOOT-INF/lib/logback-classic-1.4.5.jar:/workspace/BOOT-INF/lib/logback-core-1.4.5.jar:/workspace/BOOT-INF/lib/log4j-to-slf4j-2.19.0.jar:/workspace/BOOT-INF/lib/log4j-api-2.19.0.jar:/workspace/BOOT-INF/lib/jul-to-slf4j-2.0.6.jar:/workspace/BOOT-INF/lib/jakarta.annotation-api-2.1.1.jar:/workspace/BOOT-INF/lib/snakeyaml-1.33.jar:/workspace/BOOT-INF/lib/jackson-databind-2.14.1.jar:/workspace/BOOT-INF/lib/jackson-annotations-2.14.1.jar:/workspace/BOOT-INF/lib/jackson-core-2.14.1.jar:/workspace/BOOT-INF/lib/jackson-datatype-jdk8-2.14.1.jar:/workspace/BOOT-INF/lib/jackson-datatype-jsr310-2.14.1.jar:/workspace/BOOT-INF/lib/jackson-module-parameter-names-2.14.1.jar:/workspace/BOOT-INF/lib/tomcat-embed-core-10.1.5.jar:/workspace/BOOT-INF/lib/tomcat-embed-el-10.1.5.jar:/workspace/BOOT-INF/lib/tomcat-embed-websocket-10.1.5.jar:/workspace/BOOT-INF/lib/spring-web-6.0.4.jar:/workspace/BOOT-INF/lib/spring-beans-6.0.4.jar:/workspace/BOOT-INF/lib/micrometer-observation-1.10.3.jar:/workspace/BOOT-INF/lib/micrometer-commons-1.10.3.jar:/workspace/BOOT-INF/lib/spring-webmvc-6.0.4.jar:/workspace/BOOT-INF/lib/spring-aop-6.0.4.jar:/workspace/BOOT-INF/lib/spring-context-6.0.4.jar:/workspace/BOOT-INF/lib/spring-expression-6.0.4.jar:/workspace/BOOT-INF/lib/slf4j-api-2.0.6.jar:/workspace/BOOT-INF/lib/jakarta.xml.bind-api-4.0.0.jar:/workspace/BOOT-INF/lib/jakarta.activation-api-2.1.1.jar:/workspace/BOOT-INF/lib/spring-core-6.0.4.jar:/workspace/BOOT-INF/lib/spring-jcl-6.0.4.jar:/workspace/BOOT-INF/lib/spring-boot-3.0.2.jar:/workspace/BOOT-INF/lib/spring-boot-autoconfigure-3.0.2.jar:/workspace/BOOT-INF/lib/springdoc-openapi-starter-webmvc-ui-2.0.2.jar:/workspace/BOOT-INF/lib/springdoc-openapi-starter-webmvc-api-2.0.2.jar:/workspace/BOOT-INF/lib/springdoc-openapi-starter-common-2.0.2.jar:/workspace/BOOT-INF/lib/swagger-core-jakarta-2.2.7.jar:/workspace/BOOT-INF/lib/swagger-annotations-jakarta-2.2.7.jar:/workspace/BOOT-INF/lib/swagger-models-jakarta-2.2.7.jar:/workspace/BOOT-INF/lib/swagger-ui-4.15.5.jar:/workspace/BOOT-INF/lib/webjars-locator-core-0.52.jar:/workspace/BOOT-INF/lib/classgraph-4.8.149.jar:/workspace/BOOT-INF/lib/springdoc-openapi-native-1.6.14.jar:/workspace/BOOT-INF/lib/springdoc-openapi-common-1.6.14.jar:/workspace/BOOT-INF/lib/swagger-core-2.2.7.jar:/workspace/BOOT-INF/lib/commons-lang3-3.12.0.jar:/workspace/BOOT-INF/lib/jackson-dataformat-yaml-2.14.1.jar:/workspace/BOOT-INF/lib/swagger-annotations-2.2.7.jar:/workspace/BOOT-INF/lib/swagger-models-2.2.7.jar:/workspace/BOOT-INF/lib/jakarta.validation-api-3.0.2.jar:/workspace/BOOT-INF/lib/spring-native-0.12.1.jar:/workspace/BOOT-INF/lib/spring-boot-jarmode-layertools-3.0.2.jar cloud.mwapp.app.appApplication\r\n[INFO]     [creator]     ================================================================================\r\n[INFO]     [creator]     GraalVM Native Image: Generating &#39;/layers/paketo-buildpacks_native-image/native-image/cloud.mwapp.app.appApplication&#39; (static executable)...\r\n[INFO]     [creator]     ================================================================================\r\n[INFO]     [creator]     \r\n[INFO]     [creator]     [1/7] Initializing...                                            (0.0s @ 0.27GB)\r\n[INFO]     [creator]     Error: Could not find target method: private org.springframework.boot.Banner org.springframework.nativex.substitutions.boot.Target_SpringApplicationBannerPrinter.getImageBanner(org.springframework.core.env.Environment)\r\n[INFO]     [creator]     Error: Use -H:+ReportExceptionStackTraces to print stacktrace of underlying exception\r\n[INFO]     [creator]     --------------------------------------------------------------------------------\r\n[INFO]     [creator]          0.8s (5.5% of total time) in 8 GCs | Peak RSS: 0.62GB | CPU load: 1.91\r\n[INFO]     [creator]     ================================================================================\r\n[INFO]     [creator]     Failed generating &#39;/layers/paketo-buildpacks_native-image/native-image/cloud.mwapp.app.appApplication&#39; after 12.8s.\r\n[INFO]     [creator]     Error: Image build request failed with exit status 1\r\n[INFO]     [creator]     unable to invoke layer creator\r\n[INFO]     [creator]     unable to contribute native-image layer\r\n[INFO]     [creator]     error running build\r\n[INFO]     [creator]     exit status 1\r\n[INFO]     [creator]     ERROR: failed to build: exit status 1\r\n[INFO] ------------------------------------------------------------------------\r\n[INFO] BUILD FAILURE\r\n[INFO] ------------------------------------------------------------------------\r\n[INFO] Total time:  02:23 min\r\n[INFO] Finished at: 2023-01-30T12:40:18Z\r\n[INFO] ------------------------------------------------------------------------\r\n[ERROR] Failed to execute goal org.springframework.boot:spring-boot-maven-plugin:3.0.2:build-image (default-cli) on project app: Execution default-cli of goal org.springframework.boot:spring-boot-maven-plugin:3.0.2:build-image failed: Builder lifecycle &#39;creator&#39; failed with status code 51 -&gt; [Help 1]\r\n```\r\nI&#39;m stuck on this and can&#39;t figure it out. Can someone please advise me?","title":"Spring Boot NativeImage compilation fails on: &quot;Could not find target method: private org.springframework.boot.Banner&quot;","body":"<p>I have problem with compilation of my Spring boot application.</p>\n<p><strong>TL;DR: <code>Error: Could not find target method: private org.springframework.boot.Banner org.springframework.nativex.substitutions.boot.Target_SpringApplicationBannerPrinter.getImageBanner(org.springframework.core.env.Environment)</code></strong></p>\n<p>I'm using:</p>\n<ul>\n<li>graalvm-ce-java17-linux-amd64-22.3.1</li>\n<li>Spring Boot 3.0.2</li>\n<li>Buildpack gcr.io/paketo-buildpacks/bellsoft-liberica:9.10.3</li>\n</ul>\n<p><code>pom.xml</code> plugin configuration:</p>\n<pre class=\"lang-yaml prettyprint-override\"><code>    &lt;build&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n                &lt;configuration&gt;\n                    &lt;image&gt;\n                        &lt;buildpacks&gt;\n                            &lt;buildpack&gt;gcr.io/paketo-buildpacks/bellsoft-liberica:9.10.3&lt;/buildpack&gt;\n                            &lt;buildpack&gt;gcr.io/paketo-buildpacks/java-native-image&lt;/buildpack&gt;\n                        &lt;/buildpacks&gt;\n                    &lt;/image&gt;\n                    &lt;excludes&gt;\n                        &lt;exclude&gt;\n                            &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\n                            &lt;artifactId&gt;lombok&lt;/artifactId&gt;\n                        &lt;/exclude&gt;\n                    &lt;/excludes&gt;\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n</code></pre>\n<p><code>.gitlab-ci.yml</code>:</p>\n<pre class=\"lang-yaml prettyprint-override\"><code>stages:\n  - build\n\nbuild:\n  stage: build\n  image:\n    name: maven:3-eclipse-temurin-17-focal\n  before_script:\n    - set -e\n    - apt-get update\n    - apt-get -y install wget build-essential zlibc zlib1g zlib1g-dev upx-ucl \n    - wget -q https://github.com/graalvm/graalvm-ce-builds/releases/download/vm-22.3.1/graalvm-ce-java17-linux-amd64-22.3.1.tar.gz\n    - tar xzf graalvm-ce-java17-linux-amd64-22.3.1.tar.gz\n    - mkdir -p /usr/lib/jvm\n    - mv graalvm-ce-java17-22.3.1 /usr/lib/jvm/graalvm\n    - export PATH=/usr/lib/jvm/graalvm/bin/:$PATH\n    - export JAVA_HOME=/usr/lib/jvm/graalvm\n    - gu install native-image\n    - java --version\n    - native-image --version\n  script:\n    - ./compile.sh\n  artifacts:\n    expire_in: 1 days\n    paths:\n     - ${CI_PROJECT_DIR}/target/app-0.0.1-SNAPSHOT.jar\n     - ${CI_PROJECT_DIR}/target/app\n</code></pre>\n<p>and <code>compile.sh</code>:</p>\n<pre class=\"lang-bash prettyprint-override\"><code>#!/bin/bash\n\nset -e\nmvn -Pnative spring-boot:build-image\n\nrm -rf target/native\nmkdir -p target/native\ncd target/native\njar -xvf ../app-0.0.1-SNAPSHOT.jar\ntouch META-INF/native-image/argfile\n\nnative-image -H:Name=app \\\n@META-INF/native-image/argfile \\\n-H:+ReportExceptionStackTraces \\\n-H:TraceClassInitialization=true \\\n-H:IncludeResources=&quot;.*&quot; \\\n--initialize-at-build-time=\\\ncom.fasterxml.jackson.annotation.JsonProperty\\\n,org.slf4j.impl.StaticLoggerBinder\\\n,org.slf4j.LoggerFactory\\\n,org.slf4j.simple.SimpleLogger\\\n,ch.qos.logback.classic.Logger\\\n,ch.qos.logback.core.spi.AppenderAttachableImpl\\\n,ch.qos.logback.core.status.StatusBase\\\n,ch.qos.logback.classic.Level\\\n,ch.qos.logback.core.status.InfoStatus\\\n,ch.qos.logback.classic.PatternLayout\\\n,ch.qos.logback.core.CoreConstants\\\n,ch.qos.logback.core.pattern.parser.Parser \\\n-cp .:BOOT-INF/classes:`find BOOT-INF/lib | tr '\\n' ':'`\n\nmv app ../\n</code></pre>\n<p>The application works fine when running from JAR. But compilation crashes on:</p>\n<pre><code>Error: Could not find target method: private org.springframework.boot.Banner org.springframework.nativex.substitutions.boot.Target_SpringApplicationBannerPrinter.getImageBanner(org.springframework.core.env.Environment)\n</code></pre>\n<p>Full output:</p>\n<pre><code>[INFO]     [creator]     Paketo Buildpack for Native Image 5.8.0\n[INFO]     [creator]       https://github.com/paketo-buildpacks/native-image\n[INFO]     [creator]       Build Configuration:\n[INFO]     [creator]         $BP_BINARY_COMPRESSION_METHOD                Compression mechanism used to reduce binary size. Options: `none` (default), `upx` or `gzexe`\n[INFO]     [creator]         $BP_NATIVE_IMAGE                       true  enable native image build\n[INFO]     [creator]         $BP_NATIVE_IMAGE_BUILD_ARGUMENTS             arguments to pass to the native-image command\n[INFO]     [creator]         $BP_NATIVE_IMAGE_BUILD_ARGUMENTS_FILE        a file with arguments to pass to the native-image command\n[INFO]     [creator]         $BP_NATIVE_IMAGE_BUILT_ARTIFACT              the built application artifact explicitly, required if building from a JAR\n[INFO]     [creator]       Native Image: Contributing to layer\n[INFO]     [creator]         Executing native-image -H:+StaticExecutableWithDynamicLibC -H:Name=/layers/paketo-buildpacks_native-image/native-image/cloud.mwapp.app.appApplication -cp /workspace:/workspace/BOOT-INF/classes:/workspace/BOOT-INF/lib/logback-classic-1.4.5.jar:/workspace/BOOT-INF/lib/logback-core-1.4.5.jar:/workspace/BOOT-INF/lib/log4j-to-slf4j-2.19.0.jar:/workspace/BOOT-INF/lib/log4j-api-2.19.0.jar:/workspace/BOOT-INF/lib/jul-to-slf4j-2.0.6.jar:/workspace/BOOT-INF/lib/jakarta.annotation-api-2.1.1.jar:/workspace/BOOT-INF/lib/snakeyaml-1.33.jar:/workspace/BOOT-INF/lib/jackson-databind-2.14.1.jar:/workspace/BOOT-INF/lib/jackson-annotations-2.14.1.jar:/workspace/BOOT-INF/lib/jackson-core-2.14.1.jar:/workspace/BOOT-INF/lib/jackson-datatype-jdk8-2.14.1.jar:/workspace/BOOT-INF/lib/jackson-datatype-jsr310-2.14.1.jar:/workspace/BOOT-INF/lib/jackson-module-parameter-names-2.14.1.jar:/workspace/BOOT-INF/lib/tomcat-embed-core-10.1.5.jar:/workspace/BOOT-INF/lib/tomcat-embed-el-10.1.5.jar:/workspace/BOOT-INF/lib/tomcat-embed-websocket-10.1.5.jar:/workspace/BOOT-INF/lib/spring-web-6.0.4.jar:/workspace/BOOT-INF/lib/spring-beans-6.0.4.jar:/workspace/BOOT-INF/lib/micrometer-observation-1.10.3.jar:/workspace/BOOT-INF/lib/micrometer-commons-1.10.3.jar:/workspace/BOOT-INF/lib/spring-webmvc-6.0.4.jar:/workspace/BOOT-INF/lib/spring-aop-6.0.4.jar:/workspace/BOOT-INF/lib/spring-context-6.0.4.jar:/workspace/BOOT-INF/lib/spring-expression-6.0.4.jar:/workspace/BOOT-INF/lib/slf4j-api-2.0.6.jar:/workspace/BOOT-INF/lib/jakarta.xml.bind-api-4.0.0.jar:/workspace/BOOT-INF/lib/jakarta.activation-api-2.1.1.jar:/workspace/BOOT-INF/lib/spring-core-6.0.4.jar:/workspace/BOOT-INF/lib/spring-jcl-6.0.4.jar:/workspace/BOOT-INF/lib/spring-boot-3.0.2.jar:/workspace/BOOT-INF/lib/spring-boot-autoconfigure-3.0.2.jar:/workspace/BOOT-INF/lib/springdoc-openapi-starter-webmvc-ui-2.0.2.jar:/workspace/BOOT-INF/lib/springdoc-openapi-starter-webmvc-api-2.0.2.jar:/workspace/BOOT-INF/lib/springdoc-openapi-starter-common-2.0.2.jar:/workspace/BOOT-INF/lib/swagger-core-jakarta-2.2.7.jar:/workspace/BOOT-INF/lib/swagger-annotations-jakarta-2.2.7.jar:/workspace/BOOT-INF/lib/swagger-models-jakarta-2.2.7.jar:/workspace/BOOT-INF/lib/swagger-ui-4.15.5.jar:/workspace/BOOT-INF/lib/webjars-locator-core-0.52.jar:/workspace/BOOT-INF/lib/classgraph-4.8.149.jar:/workspace/BOOT-INF/lib/springdoc-openapi-native-1.6.14.jar:/workspace/BOOT-INF/lib/springdoc-openapi-common-1.6.14.jar:/workspace/BOOT-INF/lib/swagger-core-2.2.7.jar:/workspace/BOOT-INF/lib/commons-lang3-3.12.0.jar:/workspace/BOOT-INF/lib/jackson-dataformat-yaml-2.14.1.jar:/workspace/BOOT-INF/lib/swagger-annotations-2.2.7.jar:/workspace/BOOT-INF/lib/swagger-models-2.2.7.jar:/workspace/BOOT-INF/lib/jakarta.validation-api-3.0.2.jar:/workspace/BOOT-INF/lib/spring-native-0.12.1.jar:/workspace/BOOT-INF/lib/spring-boot-jarmode-layertools-3.0.2.jar cloud.mwapp.app.appApplication\n[INFO]     [creator]     ================================================================================\n[INFO]     [creator]     GraalVM Native Image: Generating '/layers/paketo-buildpacks_native-image/native-image/cloud.mwapp.app.appApplication' (static executable)...\n[INFO]     [creator]     ================================================================================\n[INFO]     [creator]     \n[INFO]     [creator]     [1/7] Initializing...                                            (0.0s @ 0.27GB)\n[INFO]     [creator]     Error: Could not find target method: private org.springframework.boot.Banner org.springframework.nativex.substitutions.boot.Target_SpringApplicationBannerPrinter.getImageBanner(org.springframework.core.env.Environment)\n[INFO]     [creator]     Error: Use -H:+ReportExceptionStackTraces to print stacktrace of underlying exception\n[INFO]     [creator]     --------------------------------------------------------------------------------\n[INFO]     [creator]          0.8s (5.5% of total time) in 8 GCs | Peak RSS: 0.62GB | CPU load: 1.91\n[INFO]     [creator]     ================================================================================\n[INFO]     [creator]     Failed generating '/layers/paketo-buildpacks_native-image/native-image/cloud.mwapp.app.appApplication' after 12.8s.\n[INFO]     [creator]     Error: Image build request failed with exit status 1\n[INFO]     [creator]     unable to invoke layer creator\n[INFO]     [creator]     unable to contribute native-image layer\n[INFO]     [creator]     error running build\n[INFO]     [creator]     exit status 1\n[INFO]     [creator]     ERROR: failed to build: exit status 1\n[INFO] ------------------------------------------------------------------------\n[INFO] BUILD FAILURE\n[INFO] ------------------------------------------------------------------------\n[INFO] Total time:  02:23 min\n[INFO] Finished at: 2023-01-30T12:40:18Z\n[INFO] ------------------------------------------------------------------------\n[ERROR] Failed to execute goal org.springframework.boot:spring-boot-maven-plugin:3.0.2:build-image (default-cli) on project app: Execution default-cli of goal org.springframework.boot:spring-boot-maven-plugin:3.0.2:build-image failed: Builder lifecycle 'creator' failed with status code 51 -&gt; [Help 1]\n</code></pre>\n<p>I'm stuck on this and can't figure it out. Can someone please advise me?</p>\n"},{"tags":["java","spring","oracle","spring-boot","jpa"],"answers":[{"tags":[],"owner":{"account_id":12498833,"reputation":135387,"user_id":9097906,"display_name":"Littlefoot"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1675194186,"creation_date":1675194186,"answer_id":75302360,"question_id":75302282,"body_markdown":"What you are saying is not (entirely) true. Table name certainly isn&#39;t `user`:\r\n\r\n    SQL&gt; create table user (id number);\r\n    create table user (id number)\r\n                 *\r\n    ERROR at line 1:\r\n    ORA-00903: invalid table name\r\n    \r\nWhy? Because it is *reserved* for function that returns currently logged user:\r\n    \r\n    SQL&gt; select user from dual;\r\n    \r\n    USER\r\n    --------------------------------------------------------------------------------\r\n    SCOTT\r\n    \r\n    SQL&gt;\r\n\r\nTherefore, table name is *something else*; or, if it *is* `user`, then you must have created it by enclosing its name into double quotes, but then you have to use double quotes every time, matching letter case every time:\r\n\r\n    SQL&gt; create table &quot;user&quot; (id number);\r\n    \r\n    Table created.\r\n    \r\nPresuming that this is what you have, then:\r\n\r\n    SQL&gt; alter table &quot;user&quot; add imported varchar2(1);\r\n    \r\n    Table altered.\r\n    \r\n    SQL&gt;\r\n\r\n-----------\r\n\r\nFurthermore, error you specified is\r\n\r\n&gt; ORA-00904: invalid identifier\r\n\r\nIf you got it when inserting a row into a table, it means that there&#39;s no such column in that table. Possible causes: \r\n\r\n  - you misspelled its name\r\n  - there&#39;s really no such column there\r\n  - double quotes and letter case matching issue\r\n\r\nPresuming that column exists (see above `alter table`), `insert` also works:\r\n\r\n    SQL&gt; insert into &quot;user&quot; (id, imported) values (1, 0);\r\n    \r\n    1 row created.\r\n    \r\n    SQL&gt; select * from &quot;user&quot;;\r\n    \r\n            ID IMPORTED\r\n    ---------- ----------\r\n             1 0\r\n    \r\n    SQL&gt;","title":"How to resolve &quot;ORA-00904: Invalid identifier insert statement&quot;","body":"<p>What you are saying is not (entirely) true. Table name certainly isn't <code>user</code>:</p>\n<pre><code>SQL&gt; create table user (id number);\ncreate table user (id number)\n             *\nERROR at line 1:\nORA-00903: invalid table name\n</code></pre>\n<p>Why? Because it is <em>reserved</em> for function that returns currently logged user:</p>\n<pre><code>SQL&gt; select user from dual;\n\nUSER\n--------------------------------------------------------------------------------\nSCOTT\n\nSQL&gt;\n</code></pre>\n<p>Therefore, table name is <em>something else</em>; or, if it <em>is</em> <code>user</code>, then you must have created it by enclosing its name into double quotes, but then you have to use double quotes every time, matching letter case every time:</p>\n<pre><code>SQL&gt; create table &quot;user&quot; (id number);\n\nTable created.\n</code></pre>\n<p>Presuming that this is what you have, then:</p>\n<pre><code>SQL&gt; alter table &quot;user&quot; add imported varchar2(1);\n\nTable altered.\n\nSQL&gt;\n</code></pre>\n<hr />\n<p>Furthermore, error you specified is</p>\n<blockquote>\n<p>ORA-00904: invalid identifier</p>\n</blockquote>\n<p>If you got it when inserting a row into a table, it means that there's no such column in that table. Possible causes:</p>\n<ul>\n<li>you misspelled its name</li>\n<li>there's really no such column there</li>\n<li>double quotes and letter case matching issue</li>\n</ul>\n<p>Presuming that column exists (see above <code>alter table</code>), <code>insert</code> also works:</p>\n<pre><code>SQL&gt; insert into &quot;user&quot; (id, imported) values (1, 0);\n\n1 row created.\n\nSQL&gt; select * from &quot;user&quot;;\n\n        ID IMPORTED\n---------- ----------\n         1 0\n\nSQL&gt;\n</code></pre>\n"}],"owner":{"account_id":24548379,"reputation":11,"user_id":18457853,"display_name":"Marcos Costa"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":227,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"closed_date":1675256460,"answer_count":1,"score":-1,"last_activity_date":1675194193,"creation_date":1675193681,"question_id":75302282,"body_markdown":"I&#39;m trying to add a column to my users table but I get an error every time I try to create a new user I end up getting the error &quot;java.sql.SQLSyntaxErrorException: ORA-00904: &quot;IMPORTED&quot;: invalid identifier&quot;.\r\nIn the database my column is created but I still get an error when i try to create a user.\r\n\r\nI&#39;m trying to create a column that receives true or false in my user table.\r\nWhen I try to create a new user by jpa I end up getting an error\r\n\r\nMy Model:\r\n\r\n    @Column(name = &quot;IMPORTED&quot;)\r\n    @Enumerated(EnumType.STRING)\r\n    private Eboolean imported;\r\n    \r\nMy query:\r\n\r\n    alter table USER add IMPORTED VARCHAR2(1);","title":"How to resolve &quot;ORA-00904: Invalid identifier insert statement&quot;","body":"<p>I'm trying to add a column to my users table but I get an error every time I try to create a new user I end up getting the error &quot;java.sql.SQLSyntaxErrorException: ORA-00904: &quot;IMPORTED&quot;: invalid identifier&quot;.\nIn the database my column is created but I still get an error when i try to create a user.</p>\n<p>I'm trying to create a column that receives true or false in my user table.\nWhen I try to create a new user by jpa I end up getting an error</p>\n<p>My Model:</p>\n<pre><code>@Column(name = &quot;IMPORTED&quot;)\n@Enumerated(EnumType.STRING)\nprivate Eboolean imported;\n</code></pre>\n<p>My query:</p>\n<pre><code>alter table USER add IMPORTED VARCHAR2(1);\n</code></pre>\n"},{"tags":["java","installation","syntax"],"owner":{"account_id":19726925,"reputation":35,"user_id":14443291,"display_name":"kerryp"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":29,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1675193759,"creation_date":1675193759,"question_id":75302292,"body_markdown":"I&#39;m following installation instructions on https://snp-pipeline.readthedocs.io/en/latest/installation.html, which state the following:\r\n\r\n&gt; Define the CLASSPATH environment variable to specify the location of\r\n&gt; the Picard, VarScan, and GATK jar files. Add the following lines (or\r\n&gt; something similar) to your .bashrc file:\r\n&gt; \r\n&gt; export CLASSPATH=~/software/varscan.v2.3.9/VarScan.jar:$CLASSPATH\r\n&gt; export CLASSPATH=~/software/picard/picard.jar:$CLASSPATH export\r\n&gt; CLASSPATH=~/software/GenomeAnalysisTK-3.8-1-0-gf15c1c3ef/GenomeAnalysisTK.jar:$CLASSPATH\r\n\r\nMy downloaded executable jar files are named:\r\nVarScan.v2.3.9, \r\npicard, and \r\ngatk-package-4.3.0.0-local.jar\r\n\r\nHow should I edit these lines appropriately, with regards the filename?\r\n\r\n\r\n","title":"installing cfsan-snp-pipeline (Define the CLASSPATH environment variable to specify the location of the Picard, VarScan, and GATK jar files)","body":"<p>I'm following installation instructions on <a href=\"https://snp-pipeline.readthedocs.io/en/latest/installation.html\" rel=\"nofollow noreferrer\">https://snp-pipeline.readthedocs.io/en/latest/installation.html</a>, which state the following:</p>\n<blockquote>\n<p>Define the CLASSPATH environment variable to specify the location of\nthe Picard, VarScan, and GATK jar files. Add the following lines (or\nsomething similar) to your .bashrc file:</p>\n<p>export CLASSPATH=~/software/varscan.v2.3.9/VarScan.jar:$CLASSPATH\nexport CLASSPATH=~/software/picard/picard.jar:$CLASSPATH export\nCLASSPATH=~/software/GenomeAnalysisTK-3.8-1-0-gf15c1c3ef/GenomeAnalysisTK.jar:$CLASSPATH</p>\n</blockquote>\n<p>My downloaded executable jar files are named:\nVarScan.v2.3.9,\npicard, and\ngatk-package-4.3.0.0-local.jar</p>\n<p>How should I edit these lines appropriately, with regards the filename?</p>\n"},{"tags":["java","javafx"],"comments":[{"owner":{"account_id":70123,"reputation":51175,"user_id":203657,"accept_rate":53,"display_name":"kleopatra"},"score":0,"creation_date":1675184451,"post_id":75299857,"comment_id":132872332,"body_markdown":"nothing off the shelf, afaik","body":"nothing off the shelf, afaik"},{"owner":{"account_id":2518243,"reputation":203472,"user_id":2189127,"display_name":"James_D"},"score":0,"creation_date":1675187631,"post_id":75299857,"comment_id":132873330,"body_markdown":"What&#39;s the concern about &quot;scaling to many tables&quot;? Is it just the amount of code? It isn&#39;t too hard to factor the listeners on the selection models into a separate class and make a straightforward method call to set up the &quot;multiway select&quot;.","body":"What&#39;s the concern about &quot;scaling to many tables&quot;? Is it just the amount of code? It isn&#39;t too hard to factor the listeners on the selection models into a separate class and make a straightforward method call to set up the &quot;multiway select&quot;."},{"owner":{"account_id":95570,"reputation":131,"user_id":260203,"display_name":"Brad K."},"score":0,"creation_date":1675190932,"post_id":75299857,"comment_id":132874288,"body_markdown":"The fact that the programmer creating each of those listeners would have to ensure that they abide by the soft &quot;contract&quot; to not manipulate any selection models when another selection model is executing.","body":"The fact that the programmer creating each of those listeners would have to ensure that they abide by the soft &quot;contract&quot; to not manipulate any selection models when another selection model is executing."}],"answers":[{"tags":[],"owner":{"account_id":2518243,"reputation":203472,"user_id":2189127,"display_name":"James_D"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1675193149,"creation_date":1675193149,"answer_id":75302205,"question_id":75299857,"body_markdown":"I don&#39;t think there is a fundamentally simpler way of doing what you&#39;re already doing. You can refactor this though in a way that might be more &quot;scalable&quot;:\r\n\r\n    public class SelectionManager {\r\n        private boolean selecting ;\r\n        private &lt;S,T&gt; void setUpMultiSelection(TableView&lt;S&gt; firstTable, TableView&lt;T&gt; secondTable, BiPredicate&lt;S,T&gt; shouldSelect) {\r\n            firstTable.getSelectionModel().getSelectedItems().addListener((Change&lt;? extends S&gt; c) -&gt; {\r\n                if (selecting) return;\r\n                selecting = true ;\r\n                secondTable.getSelectionModel().clearSelection();\r\n                for (T t : secondTable.getItems()) {\r\n                    for (S s : firstTable.getSelectionModel().getSelectedItems()) {\r\n                        if (shouldSelect.test(s, t)) {\r\n                            secondTable.getSelectionModel().select(t);\r\n                        }\r\n                    }\r\n                }\r\n                selecting = false;\r\n            });\r\n            secondTable.getSelectionModel().getSelectedItems().addListener((Change&lt;? extends T&gt; c) -&gt; {\r\n                if (selecting) return ;\r\n                selecting = true;\r\n                firstTable.getSelectionModel().clearSelection();\r\n                for (S s : firstTable.getItems()) {\r\n                    for (T t : secondTable.getSelectionModel().getSelectedItems()) {\r\n                        if (shouldSelect.test(s, t)) {\r\n                            firstTable.getSelectionModel().select(s);\r\n                        }\r\n                    }\r\n                }\r\n                selecting = false;\r\n            });\r\n        }\r\n    }\r\n\r\nand then\r\n\r\n        private Region buildView() {\r\n            TableView&lt;Part&gt; partsTable = setupPartsTableView();\r\n            TableView&lt;Assembly&gt; assembliesTable = setupAssembliesTableView();\r\n    //        assembliesTable.getSelectionModel().getSelectedItems().addListener(new ListChangeListener&lt;Assembly&gt;() {\r\n    //            @Override\r\n    //            public void onChanged(Change&lt;? extends Assembly&gt; c) {\r\n    //                if (!selecting) {\r\n    //                    selecting = true;\r\n    //\r\n    //                    TableViewSelectionModel&lt;Part&gt; sm = partsTable.getSelectionModel();\r\n    //                    sm.clearSelection();\r\n    //                    for (Assembly a : c.getList()) {\r\n    //                        for (Part p : a.partsProperty()) {\r\n    //                            sm.select(p);\r\n    //                        }\r\n    //                    }\r\n    //                    selecting = false;\r\n    //                }\r\n    //\r\n    //            }\r\n    //        });\r\n    //\r\n    //        partsTable.getSelectionModel().getSelectedItems().addListener(new ListChangeListener&lt;Part&gt;() {\r\n    //            @Override\r\n    //            public void onChanged(Change&lt;? extends Part&gt; c) {\r\n    //                if (!selecting) {\r\n    //                    selecting = true;\r\n    //                    TableViewSelectionModel&lt;Assembly&gt; sm = assembliesTable.getSelectionModel();\r\n    //                    sm.clearSelection();\r\n    //                    for (Part p : c.getList()) {\r\n    //                        for (Assembly a : assemblies) {\r\n    //                            if (a.partsProperty().contains(p)) {\r\n    //                                sm.select(a);\r\n    //                            }\r\n    //                        }\r\n    //                    }\r\n    //                    selecting = false;\r\n    //                }\r\n    //            }\r\n    //        });\r\n            SelectionManager selectionManager = new SelectionManager();\r\n            selectionManager.setUpMultiSelection(assembliesTable, partsTable,\r\n                    (assembly, part) -&gt; assembly.partsProperty().contains(part)\r\n            );\r\n    \r\n            return new SplitPane(assembliesTable, partsTable);\r\n        }\r\n\r\nThe point to note here is that if you use the same instance of `SelectionManager` for multiple &quot;multi-selections&quot;, it will use the same mutex. On the other hand, a different `SelectionManager` instance will have its own mutex. This (or some variation on it) should enable you to fairly easily configure this over many tables in any way you need.","title":"Is there a more idiomatic way to perform mutual, multi-way selection using TableViews?","body":"<p>I don't think there is a fundamentally simpler way of doing what you're already doing. You can refactor this though in a way that might be more &quot;scalable&quot;:</p>\n<pre><code>public class SelectionManager {\n    private boolean selecting ;\n    private &lt;S,T&gt; void setUpMultiSelection(TableView&lt;S&gt; firstTable, TableView&lt;T&gt; secondTable, BiPredicate&lt;S,T&gt; shouldSelect) {\n        firstTable.getSelectionModel().getSelectedItems().addListener((Change&lt;? extends S&gt; c) -&gt; {\n            if (selecting) return;\n            selecting = true ;\n            secondTable.getSelectionModel().clearSelection();\n            for (T t : secondTable.getItems()) {\n                for (S s : firstTable.getSelectionModel().getSelectedItems()) {\n                    if (shouldSelect.test(s, t)) {\n                        secondTable.getSelectionModel().select(t);\n                    }\n                }\n            }\n            selecting = false;\n        });\n        secondTable.getSelectionModel().getSelectedItems().addListener((Change&lt;? extends T&gt; c) -&gt; {\n            if (selecting) return ;\n            selecting = true;\n            firstTable.getSelectionModel().clearSelection();\n            for (S s : firstTable.getItems()) {\n                for (T t : secondTable.getSelectionModel().getSelectedItems()) {\n                    if (shouldSelect.test(s, t)) {\n                        firstTable.getSelectionModel().select(s);\n                    }\n                }\n            }\n            selecting = false;\n        });\n    }\n}\n</code></pre>\n<p>and then</p>\n<pre><code>    private Region buildView() {\n        TableView&lt;Part&gt; partsTable = setupPartsTableView();\n        TableView&lt;Assembly&gt; assembliesTable = setupAssembliesTableView();\n//        assembliesTable.getSelectionModel().getSelectedItems().addListener(new ListChangeListener&lt;Assembly&gt;() {\n//            @Override\n//            public void onChanged(Change&lt;? extends Assembly&gt; c) {\n//                if (!selecting) {\n//                    selecting = true;\n//\n//                    TableViewSelectionModel&lt;Part&gt; sm = partsTable.getSelectionModel();\n//                    sm.clearSelection();\n//                    for (Assembly a : c.getList()) {\n//                        for (Part p : a.partsProperty()) {\n//                            sm.select(p);\n//                        }\n//                    }\n//                    selecting = false;\n//                }\n//\n//            }\n//        });\n//\n//        partsTable.getSelectionModel().getSelectedItems().addListener(new ListChangeListener&lt;Part&gt;() {\n//            @Override\n//            public void onChanged(Change&lt;? extends Part&gt; c) {\n//                if (!selecting) {\n//                    selecting = true;\n//                    TableViewSelectionModel&lt;Assembly&gt; sm = assembliesTable.getSelectionModel();\n//                    sm.clearSelection();\n//                    for (Part p : c.getList()) {\n//                        for (Assembly a : assemblies) {\n//                            if (a.partsProperty().contains(p)) {\n//                                sm.select(a);\n//                            }\n//                        }\n//                    }\n//                    selecting = false;\n//                }\n//            }\n//        });\n        SelectionManager selectionManager = new SelectionManager();\n        selectionManager.setUpMultiSelection(assembliesTable, partsTable,\n                (assembly, part) -&gt; assembly.partsProperty().contains(part)\n        );\n\n        return new SplitPane(assembliesTable, partsTable);\n    }\n</code></pre>\n<p>The point to note here is that if you use the same instance of <code>SelectionManager</code> for multiple &quot;multi-selections&quot;, it will use the same mutex. On the other hand, a different <code>SelectionManager</code> instance will have its own mutex. This (or some variation on it) should enable you to fairly easily configure this over many tables in any way you need.</p>\n"}],"owner":{"account_id":95570,"reputation":131,"user_id":260203,"display_name":"Brad K."},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":48,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"accepted_answer_id":75302205,"answer_count":1,"score":4,"last_activity_date":1675193149,"creation_date":1675181046,"question_id":75299857,"body_markdown":"I need to perform a multiway selection among multiple JavaFX `TableView`s such that when selecting one or more rows in one `TableView`, all other `TableView`s with related information will also be selected/highlighted (actually, highlighting is more appropriate, but selection is built-in, so...)\r\n\r\nI&#39;ve come up with a slighly janky method, but it doesn&#39;t really scale very well to many `TableView`s.\r\n\r\n```\r\npackage multiwayselect;\r\n\r\nimport javafx.application.*;\r\nimport javafx.beans.property.*;\r\nimport javafx.collections.ListChangeListener.Change;\r\nimport javafx.collections.*;\r\nimport javafx.scene.*;\r\nimport javafx.scene.control.*;\r\nimport javafx.scene.control.TableView.TableViewSelectionModel;\r\nimport javafx.scene.layout.*;\r\nimport javafx.stage.*;\r\n\r\npublic class MultiwaySelectDemo extends Application {\r\n\r\n    private final ObservableList&lt;Part&gt; parts = FXCollections.observableArrayList();\r\n    private final ObservableList&lt;Assembly&gt; assemblies = FXCollections.observableArrayList();\r\n\r\n    public static void main(String[] args) {\r\n        launch(args);\r\n    }\r\n\r\n    @Override\r\n    public void start(Stage stage) throws Exception {\r\n        buildModel();\r\n        stage.setTitle(&quot;multi-way selection demo&quot;);\r\n        final Region root = buildView();\r\n        stage.setScene(new Scene(root));\r\n        stage.show();\r\n    }\r\n\r\n    private void buildModel() {\r\n        Part cpu = new Part(1, &quot;CPU Ryzen 5&quot;);\r\n        Part ram8 = new Part(2, &quot;RAM 8GB DDR4 (1x8GB)&quot;);\r\n        Part ram16 = new Part(5, &quot;RAM 16GB DDR4 (2x8GB)&quot;);\r\n        Part mobo1 = new Part(3, &quot;MOBO ATX B550&quot;);\r\n        Part mobo2 = new Part(7, &quot;MOBO ATX X570 RGB&quot;);\r\n        Part chassis = new Part(4, &quot;CASE Standard ATX Case&quot;);\r\n        Part chassis1 = new Part(8, &quot;CASE Gamer ATX Case w/RGB&quot;);\r\n        Assembly basicBox = new Assembly(1, &quot;Basic AMD Box&quot;, cpu, ram8, mobo1, chassis);\r\n        Assembly gamerBox = new Assembly(2, &quot;Gamer AMD Box&quot;, cpu, ram16, mobo2, chassis1);\r\n        assemblies.addAll(basicBox, gamerBox);\r\n        for (Assembly a : assemblies) {\r\n            for (Part p : a.parts) {\r\n                if (!parts.contains(p)) {\r\n                    parts.add(p);\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    private boolean selecting = false;\r\n\r\n    private Region buildView() {\r\n        TableView&lt;Part&gt; partsTable = setupPartsTableView();\r\n        TableView&lt;Assembly&gt; assembliesTable = setupAssembliesTableView();\r\n        assembliesTable.getSelectionModel().getSelectedItems().addListener(new ListChangeListener&lt;Assembly&gt;() {\r\n            @Override\r\n            public void onChanged(Change&lt;? extends Assembly&gt; c) {\r\n                if (!selecting) {\r\n                    selecting = true;\r\n\r\n                    TableViewSelectionModel&lt;Part&gt; sm = partsTable.getSelectionModel();\r\n                    sm.clearSelection();\r\n                    for (Assembly a : c.getList()) {\r\n                        for (Part p : a.partsProperty()) {\r\n                            sm.select(p);\r\n                        }\r\n                    }\r\n                    selecting = false;\r\n                }\r\n\r\n            }\r\n        });\r\n\r\n        partsTable.getSelectionModel().getSelectedItems().addListener(new ListChangeListener&lt;Part&gt;() {\r\n            @Override\r\n            public void onChanged(Change&lt;? extends Part&gt; c) {\r\n                if (!selecting) {\r\n                    selecting = true;\r\n                    TableViewSelectionModel&lt;Assembly&gt; sm = assembliesTable.getSelectionModel();\r\n                    sm.clearSelection();\r\n                    for (Part p : c.getList()) {\r\n                        for (Assembly a : assemblies) {\r\n                            if (a.partsProperty().contains(p)) {\r\n                                sm.select(a);\r\n                            }\r\n                        }\r\n                    }\r\n                    selecting = false;\r\n                }\r\n            }\r\n        });\r\n        return new SplitPane(assembliesTable, partsTable);\r\n    }\r\n\r\n    private TableView setupAssembliesTableView() {\r\n        final TableView tableView = new TableView(assemblies);\r\n        tableView.getSelectionModel().setSelectionMode(SelectionMode.MULTIPLE);\r\n\r\n        final TableColumn&lt;Assembly, Integer&gt; idColumn = new TableColumn&lt;&gt;(&quot;id&quot;);\r\n        idColumn.setCellValueFactory(cell -&gt; cell.getValue().idProperty());\r\n\r\n        final TableColumn&lt;Assembly, String&gt; nameColumn = new TableColumn&lt;&gt;(&quot;name&quot;);\r\n        nameColumn.setCellValueFactory(cell -&gt; cell.getValue().nameProperty());\r\n\r\n        tableView.getColumns().addAll(idColumn, nameColumn);\r\n        return tableView;\r\n    }\r\n\r\n    private TableView setupPartsTableView() {\r\n        final TableView tableView = new TableView(parts);\r\n        tableView.getSelectionModel().setSelectionMode(SelectionMode.MULTIPLE);\r\n\r\n        final TableColumn&lt;Part, Integer&gt; idColumn = new TableColumn&lt;&gt;(&quot;id&quot;);\r\n        idColumn.setCellValueFactory(cell -&gt; cell.getValue().idProperty());\r\n\r\n        final TableColumn&lt;Part, String&gt; nameColumn = new TableColumn&lt;&gt;(&quot;name&quot;);\r\n        nameColumn.setCellValueFactory(cell -&gt; cell.getValue().nameProperty());\r\n\r\n        tableView.getColumns().addAll(idColumn, nameColumn);\r\n\r\n        return tableView;\r\n    }\r\n\r\n    public static class Part {\r\n\r\n        private ObjectProperty&lt;Integer&gt; id;\r\n        private StringProperty name;\r\n\r\n        public Part(int newId, String newName) {\r\n            this.id = new SimpleObjectProperty&lt;&gt;();\r\n            this.name = new SimpleStringProperty();\r\n            setId(newId);\r\n            setName(newName);\r\n        }\r\n\r\n        public final ObjectProperty&lt;Integer&gt; idProperty() {\r\n            return this.id;\r\n        }\r\n\r\n        public final void setId(int newValue) {\r\n            idProperty().set(newValue);\r\n        }\r\n\r\n        public final int getId() {\r\n            return idProperty().get();\r\n        }\r\n\r\n        public final StringProperty nameProperty() {\r\n            return this.name;\r\n        }\r\n\r\n        public final void setName(String newValue) {\r\n            nameProperty().set(newValue);\r\n        }\r\n\r\n        public final String getName() {\r\n            return nameProperty().get();\r\n        }\r\n    }\r\n\r\n    public static class Assembly {\r\n\r\n        private ObjectProperty&lt;Integer&gt; id;\r\n        private StringProperty name;\r\n        private ObservableList&lt;Part&gt; parts;\r\n\r\n        public Assembly(int newId, String newName, Part... newParts) {\r\n            id = new SimpleObjectProperty&lt;&gt;();\r\n            name = new SimpleStringProperty();\r\n            parts = FXCollections.observableArrayList();\r\n            setId(newId);\r\n            setName(newName);\r\n            parts.setAll(newParts);\r\n        }\r\n\r\n        public final ObjectProperty&lt;Integer&gt; idProperty() {\r\n            return id;\r\n        }\r\n\r\n        public final void setId(int newId) {\r\n            idProperty().set(newId);\r\n        }\r\n\r\n        public final int getId() {\r\n            return idProperty().get();\r\n        }\r\n\r\n        public final StringProperty nameProperty() {\r\n            return name;\r\n        }\r\n\r\n        public final void setName(String newValue) {\r\n            nameProperty().set(newValue);\r\n        }\r\n\r\n        public final String getName() {\r\n            return nameProperty().get();\r\n        }\r\n\r\n        public final ObservableList&lt;Part&gt; partsProperty() {\r\n            return parts;\r\n        }\r\n    }\r\n\r\n}\r\n```\r\n\r\nBasically `selecting` puts up an &quot;in selection mode&quot; mutex; without it, the two listeners eat up the stack.\r\n\r\nWhat&#39;s a better way to do this that (a) scales out to many `TableView`s and/or (b) is more idiomatic of JavaFX or (c) is just plain better? (Note: currently working with Java 8/JavaFX 8 but will take solutions in higher versions.) Also, will take any feedback on different ways to represent the data that better fits the JavaFX idiom.","title":"Is there a more idiomatic way to perform mutual, multi-way selection using TableViews?","body":"<p>I need to perform a multiway selection among multiple JavaFX <code>TableView</code>s such that when selecting one or more rows in one <code>TableView</code>, all other <code>TableView</code>s with related information will also be selected/highlighted (actually, highlighting is more appropriate, but selection is built-in, so...)</p>\n<p>I've come up with a slighly janky method, but it doesn't really scale very well to many <code>TableView</code>s.</p>\n<pre><code>package multiwayselect;\n\nimport javafx.application.*;\nimport javafx.beans.property.*;\nimport javafx.collections.ListChangeListener.Change;\nimport javafx.collections.*;\nimport javafx.scene.*;\nimport javafx.scene.control.*;\nimport javafx.scene.control.TableView.TableViewSelectionModel;\nimport javafx.scene.layout.*;\nimport javafx.stage.*;\n\npublic class MultiwaySelectDemo extends Application {\n\n    private final ObservableList&lt;Part&gt; parts = FXCollections.observableArrayList();\n    private final ObservableList&lt;Assembly&gt; assemblies = FXCollections.observableArrayList();\n\n    public static void main(String[] args) {\n        launch(args);\n    }\n\n    @Override\n    public void start(Stage stage) throws Exception {\n        buildModel();\n        stage.setTitle(&quot;multi-way selection demo&quot;);\n        final Region root = buildView();\n        stage.setScene(new Scene(root));\n        stage.show();\n    }\n\n    private void buildModel() {\n        Part cpu = new Part(1, &quot;CPU Ryzen 5&quot;);\n        Part ram8 = new Part(2, &quot;RAM 8GB DDR4 (1x8GB)&quot;);\n        Part ram16 = new Part(5, &quot;RAM 16GB DDR4 (2x8GB)&quot;);\n        Part mobo1 = new Part(3, &quot;MOBO ATX B550&quot;);\n        Part mobo2 = new Part(7, &quot;MOBO ATX X570 RGB&quot;);\n        Part chassis = new Part(4, &quot;CASE Standard ATX Case&quot;);\n        Part chassis1 = new Part(8, &quot;CASE Gamer ATX Case w/RGB&quot;);\n        Assembly basicBox = new Assembly(1, &quot;Basic AMD Box&quot;, cpu, ram8, mobo1, chassis);\n        Assembly gamerBox = new Assembly(2, &quot;Gamer AMD Box&quot;, cpu, ram16, mobo2, chassis1);\n        assemblies.addAll(basicBox, gamerBox);\n        for (Assembly a : assemblies) {\n            for (Part p : a.parts) {\n                if (!parts.contains(p)) {\n                    parts.add(p);\n                }\n            }\n        }\n    }\n\n    private boolean selecting = false;\n\n    private Region buildView() {\n        TableView&lt;Part&gt; partsTable = setupPartsTableView();\n        TableView&lt;Assembly&gt; assembliesTable = setupAssembliesTableView();\n        assembliesTable.getSelectionModel().getSelectedItems().addListener(new ListChangeListener&lt;Assembly&gt;() {\n            @Override\n            public void onChanged(Change&lt;? extends Assembly&gt; c) {\n                if (!selecting) {\n                    selecting = true;\n\n                    TableViewSelectionModel&lt;Part&gt; sm = partsTable.getSelectionModel();\n                    sm.clearSelection();\n                    for (Assembly a : c.getList()) {\n                        for (Part p : a.partsProperty()) {\n                            sm.select(p);\n                        }\n                    }\n                    selecting = false;\n                }\n\n            }\n        });\n\n        partsTable.getSelectionModel().getSelectedItems().addListener(new ListChangeListener&lt;Part&gt;() {\n            @Override\n            public void onChanged(Change&lt;? extends Part&gt; c) {\n                if (!selecting) {\n                    selecting = true;\n                    TableViewSelectionModel&lt;Assembly&gt; sm = assembliesTable.getSelectionModel();\n                    sm.clearSelection();\n                    for (Part p : c.getList()) {\n                        for (Assembly a : assemblies) {\n                            if (a.partsProperty().contains(p)) {\n                                sm.select(a);\n                            }\n                        }\n                    }\n                    selecting = false;\n                }\n            }\n        });\n        return new SplitPane(assembliesTable, partsTable);\n    }\n\n    private TableView setupAssembliesTableView() {\n        final TableView tableView = new TableView(assemblies);\n        tableView.getSelectionModel().setSelectionMode(SelectionMode.MULTIPLE);\n\n        final TableColumn&lt;Assembly, Integer&gt; idColumn = new TableColumn&lt;&gt;(&quot;id&quot;);\n        idColumn.setCellValueFactory(cell -&gt; cell.getValue().idProperty());\n\n        final TableColumn&lt;Assembly, String&gt; nameColumn = new TableColumn&lt;&gt;(&quot;name&quot;);\n        nameColumn.setCellValueFactory(cell -&gt; cell.getValue().nameProperty());\n\n        tableView.getColumns().addAll(idColumn, nameColumn);\n        return tableView;\n    }\n\n    private TableView setupPartsTableView() {\n        final TableView tableView = new TableView(parts);\n        tableView.getSelectionModel().setSelectionMode(SelectionMode.MULTIPLE);\n\n        final TableColumn&lt;Part, Integer&gt; idColumn = new TableColumn&lt;&gt;(&quot;id&quot;);\n        idColumn.setCellValueFactory(cell -&gt; cell.getValue().idProperty());\n\n        final TableColumn&lt;Part, String&gt; nameColumn = new TableColumn&lt;&gt;(&quot;name&quot;);\n        nameColumn.setCellValueFactory(cell -&gt; cell.getValue().nameProperty());\n\n        tableView.getColumns().addAll(idColumn, nameColumn);\n\n        return tableView;\n    }\n\n    public static class Part {\n\n        private ObjectProperty&lt;Integer&gt; id;\n        private StringProperty name;\n\n        public Part(int newId, String newName) {\n            this.id = new SimpleObjectProperty&lt;&gt;();\n            this.name = new SimpleStringProperty();\n            setId(newId);\n            setName(newName);\n        }\n\n        public final ObjectProperty&lt;Integer&gt; idProperty() {\n            return this.id;\n        }\n\n        public final void setId(int newValue) {\n            idProperty().set(newValue);\n        }\n\n        public final int getId() {\n            return idProperty().get();\n        }\n\n        public final StringProperty nameProperty() {\n            return this.name;\n        }\n\n        public final void setName(String newValue) {\n            nameProperty().set(newValue);\n        }\n\n        public final String getName() {\n            return nameProperty().get();\n        }\n    }\n\n    public static class Assembly {\n\n        private ObjectProperty&lt;Integer&gt; id;\n        private StringProperty name;\n        private ObservableList&lt;Part&gt; parts;\n\n        public Assembly(int newId, String newName, Part... newParts) {\n            id = new SimpleObjectProperty&lt;&gt;();\n            name = new SimpleStringProperty();\n            parts = FXCollections.observableArrayList();\n            setId(newId);\n            setName(newName);\n            parts.setAll(newParts);\n        }\n\n        public final ObjectProperty&lt;Integer&gt; idProperty() {\n            return id;\n        }\n\n        public final void setId(int newId) {\n            idProperty().set(newId);\n        }\n\n        public final int getId() {\n            return idProperty().get();\n        }\n\n        public final StringProperty nameProperty() {\n            return name;\n        }\n\n        public final void setName(String newValue) {\n            nameProperty().set(newValue);\n        }\n\n        public final String getName() {\n            return nameProperty().get();\n        }\n\n        public final ObservableList&lt;Part&gt; partsProperty() {\n            return parts;\n        }\n    }\n\n}\n</code></pre>\n<p>Basically <code>selecting</code> puts up an &quot;in selection mode&quot; mutex; without it, the two listeners eat up the stack.</p>\n<p>What's a better way to do this that (a) scales out to many <code>TableView</code>s and/or (b) is more idiomatic of JavaFX or (c) is just plain better? (Note: currently working with Java 8/JavaFX 8 but will take solutions in higher versions.) Also, will take any feedback on different ways to represent the data that better fits the JavaFX idiom.</p>\n"},{"tags":["java","mongodb","spring-boot","spring-data","spring-data-mongodb"],"answers":[{"tags":[],"owner":{"account_id":18482495,"reputation":14167,"user_id":13464279,"display_name":"J.F."},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1675192875,"creation_date":1675192875,"answer_id":75302156,"question_id":75298762,"body_markdown":"I think the problem can be the result can&#39;t be serialized into your `OrganizationDTO` so you can try to add a `$project` stage into aggregation, something like this (not tested):\r\n\r\n```java\r\nProjectionOperation project = Aggregation.project().andExclude(&quot;_id&quot;).and(&quot;organizationId&quot;).nested(Fields.fields(&quot;_id.organizationId&quot;)).and(&quot;organizationName&quot;).nested(Fields.fields(&quot;_id.organizationName&quot;));\r\nAggregation aggregation = Aggregation.newAggregation(match, group, project);\r\n```\r\n\r\nAnd now the result is like the DTO and can be mapped so now should not be empty objects.","title":"Distinct query but selecting multiple fields on Spring MongoDB","body":"<p>I think the problem can be the result can't be serialized into your <code>OrganizationDTO</code> so you can try to add a <code>$project</code> stage into aggregation, something like this (not tested):</p>\n<pre class=\"lang-java prettyprint-override\"><code>ProjectionOperation project = Aggregation.project().andExclude(&quot;_id&quot;).and(&quot;organizationId&quot;).nested(Fields.fields(&quot;_id.organizationId&quot;)).and(&quot;organizationName&quot;).nested(Fields.fields(&quot;_id.organizationName&quot;));\nAggregation aggregation = Aggregation.newAggregation(match, group, project);\n</code></pre>\n<p>And now the result is like the DTO and can be mapped so now should not be empty objects.</p>\n"}],"owner":{"account_id":23999668,"reputation":25,"user_id":17984751,"display_name":"matpel42"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":368,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":75302156,"answer_count":1,"score":1,"last_activity_date":1675192875,"creation_date":1675175850,"question_id":75298762,"body_markdown":"I have a `User` model on a Mongo collection that looks like this:\r\n\r\n**User.class**\r\n```\r\n@Id\r\nprivate String userId;\r\nprivate String userName;\r\nprivate String organizationId;\r\nprivate String organizationName;\r\nprivate String status\r\n```\r\n\r\nI need to get a list of `OrganizationDTO` to send as a response to the frontend. The DTO is shaped as below:\r\n\r\n**OrganizationDTO.class**\r\n```\r\nprivate String organizationId;\r\nprivate String organizationName;\r\n```\r\nBut in the collection is obviously possible that different Users have the same organizationId and organizationName, so I want to list them only once.\r\nThe list of OrganizationDTO should contain every distinct organizationId/Name that has a status included in a set I choose.\r\n\r\n\r\n\r\nI&#39;ll be glad to add everything that could be helpful if needed.\r\n\r\nI tried using `mongoTemplate.findDistinct()` but it clearly isn&#39;t the solution I&#39;m looking for.\r\nThe over-complicated &quot;solution&quot; I found is this:\r\n\r\n```\r\nQuery orgIdListQuery = new Query().addCriteria(\r\n  Criteria.where(&quot;status&quot;).in(statusList)\r\n);\r\n\r\nList&lt;String&gt; organizationIdList = mongoTemplate.findDistinct(orgIdListQuery, &quot;organizationId&quot;, User.class, String.class);\r\n\r\nList&lt;String&gt; organizationNameList = mongoTemplate.findDistinct(orgIdListQuery, &quot;organizationName&quot;, User.class, String.class);\r\n\r\n// Map the two lists to get a single one with both fields, obtaining a list of OrganizationDTO\r\n```\r\nbut I didn&#39;t like it at all, so I tried with aggregations:\r\n\r\n```\r\nMatchOperation match = new MatchOperation(getCriteria(statusList));  //getCriteria returns the Criteria as above\r\nGroupOperation group = new GroupOperation(Fields.fields(&quot;organizationId&quot;, &quot;organizationName&quot;));\r\nAggregation aggregation = Aggregation.newAggregation(match, group);\r\nAggregationResults&lt;OrganizationDTO&gt; results = mongoTemplate.aggregate(aggregation, User.class, OrganizationDTO.class);\r\nreturn results.getMappedResults();\r\n```\r\nIt seems that I&#39;m near the right implementation, but at the moment the result is a List with some empty objects. Is this the right solution once the aggregation is correct? Or maybe there&#39;s something better?","title":"Distinct query but selecting multiple fields on Spring MongoDB","body":"<p>I have a <code>User</code> model on a Mongo collection that looks like this:</p>\n<p><strong>User.class</strong></p>\n<pre><code>@Id\nprivate String userId;\nprivate String userName;\nprivate String organizationId;\nprivate String organizationName;\nprivate String status\n</code></pre>\n<p>I need to get a list of <code>OrganizationDTO</code> to send as a response to the frontend. The DTO is shaped as below:</p>\n<p><strong>OrganizationDTO.class</strong></p>\n<pre><code>private String organizationId;\nprivate String organizationName;\n</code></pre>\n<p>But in the collection is obviously possible that different Users have the same organizationId and organizationName, so I want to list them only once.\nThe list of OrganizationDTO should contain every distinct organizationId/Name that has a status included in a set I choose.</p>\n<p>I'll be glad to add everything that could be helpful if needed.</p>\n<p>I tried using <code>mongoTemplate.findDistinct()</code> but it clearly isn't the solution I'm looking for.\nThe over-complicated &quot;solution&quot; I found is this:</p>\n<pre><code>Query orgIdListQuery = new Query().addCriteria(\n  Criteria.where(&quot;status&quot;).in(statusList)\n);\n\nList&lt;String&gt; organizationIdList = mongoTemplate.findDistinct(orgIdListQuery, &quot;organizationId&quot;, User.class, String.class);\n\nList&lt;String&gt; organizationNameList = mongoTemplate.findDistinct(orgIdListQuery, &quot;organizationName&quot;, User.class, String.class);\n\n// Map the two lists to get a single one with both fields, obtaining a list of OrganizationDTO\n</code></pre>\n<p>but I didn't like it at all, so I tried with aggregations:</p>\n<pre><code>MatchOperation match = new MatchOperation(getCriteria(statusList));  //getCriteria returns the Criteria as above\nGroupOperation group = new GroupOperation(Fields.fields(&quot;organizationId&quot;, &quot;organizationName&quot;));\nAggregation aggregation = Aggregation.newAggregation(match, group);\nAggregationResults&lt;OrganizationDTO&gt; results = mongoTemplate.aggregate(aggregation, User.class, OrganizationDTO.class);\nreturn results.getMappedResults();\n</code></pre>\n<p>It seems that I'm near the right implementation, but at the moment the result is a List with some empty objects. Is this the right solution once the aggregation is correct? Or maybe there's something better?</p>\n"},{"tags":["java","time-complexity","big-o","discrete-mathematics"],"comments":[{"owner":{"account_id":13743231,"reputation":677,"user_id":9917714,"display_name":"Aleksa Majkic"},"score":0,"creation_date":1675191033,"post_id":75301656,"comment_id":132874321,"body_markdown":"When you say you want to determine T(n), does that mean you want to calculate time complexity of the given code?","body":"When you say you want to determine T(n), does that mean you want to calculate time complexity of the given code?"},{"owner":{"account_id":27669054,"reputation":3,"user_id":21120285,"display_name":"Joseph Decker"},"score":0,"creation_date":1675191825,"post_id":75301656,"comment_id":132874522,"body_markdown":"Yes, sorry for not clarifying in the post. I think that&#39;s what the question is looking for. @AleksaMajkic","body":"Yes, sorry for not clarifying in the post. I think that&#39;s what the question is looking for. @AleksaMajkic"}],"answers":[{"tags":[],"owner":{"account_id":13743231,"reputation":677,"user_id":9917714,"display_name":"Aleksa Majkic"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1675192315,"creation_date":1675192315,"answer_id":75302070,"question_id":75301656,"body_markdown":"Here is how you can approach this problem: \r\n```\r\nsum = 0;                 // 1 - O(1)\r\nfor (i=0; i&lt;3; i++)      // This will run 3x times - O(3)\r\n    for (j=0; j&lt;n; j++)  // This will run n times (O(n)), meaning the sum will be increased n times \r\n        sum++;\r\n```\r\nThen you can write `T(n)=1+3*(1+n+2n)≈1+3n`. This means that the time complexity for this code is O(n).\r\n\r\nGenerally, when looking at the simple `for` loop, like the one here, you can determine its complexity by looking at the condition statement. For `j&lt;n` the complexity will be O(n), and for `i&lt;3` the complexity will be O(3).","title":"How do you calculate T(n) in an equation from a code fragment?","body":"<p>Here is how you can approach this problem:</p>\n<pre><code>sum = 0;                 // 1 - O(1)\nfor (i=0; i&lt;3; i++)      // This will run 3x times - O(3)\n    for (j=0; j&lt;n; j++)  // This will run n times (O(n)), meaning the sum will be increased n times \n        sum++;\n</code></pre>\n<p>Then you can write <code>T(n)=1+3*(1+n+2n)≈1+3n</code>. This means that the time complexity for this code is O(n).</p>\n<p>Generally, when looking at the simple <code>for</code> loop, like the one here, you can determine its complexity by looking at the condition statement. For <code>j&lt;n</code> the complexity will be O(n), and for <code>i&lt;3</code> the complexity will be O(3).</p>\n"}],"owner":{"account_id":27669054,"reputation":3,"user_id":21120285,"display_name":"Joseph Decker"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":102,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75302070,"answer_count":1,"score":0,"last_activity_date":1675192552,"creation_date":1675189986,"question_id":75301656,"body_markdown":"I&#39;m having trouble converting code fragments into equations that figure out T(n) of said equation. An example code fragment is this:\r\n\r\na = b + c;\r\nd = a + e;\r\n\r\n\r\nThis specific questions asks to determine T(n). How would I go about doing that? Another example code given is as follows:\r\n\r\n\r\n    sum = 0;\r\n    for (i=0; i&lt;3; i++)\r\n        for (j=0; j&lt;n; j++)\r\n            sum++;\r\n\r\nI&#39;ve attempted to follow instruction and examples from other questions that are similar, but am getting stuck on how the equation is found exactly. Here&#39;s an example and result that I know of so far:\r\n\r\nCode:\r\n    \r\n    sum = 0;\r\n    i = 1;\r\n    while (i &lt;= N)\r\n    {\r\n        sum = sum + 1;\r\n        i++;\r\n    }\r\n\r\nWith the result being this:\r\nT(N) = 2 + (Σ with N on top and i+1 on bottom) * 2\r\nand that ends up simplifying to 2+2N\r\nI&#39;m unsure of how this result is found though.","title":"How do you calculate T(n) in an equation from a code fragment?","body":"<p>I'm having trouble converting code fragments into equations that figure out T(n) of said equation. An example code fragment is this:</p>\n<p>a = b + c;\nd = a + e;</p>\n<p>This specific questions asks to determine T(n). How would I go about doing that? Another example code given is as follows:</p>\n<pre><code>sum = 0;\nfor (i=0; i&lt;3; i++)\n    for (j=0; j&lt;n; j++)\n        sum++;\n</code></pre>\n<p>I've attempted to follow instruction and examples from other questions that are similar, but am getting stuck on how the equation is found exactly. Here's an example and result that I know of so far:</p>\n<p>Code:</p>\n<pre><code>sum = 0;\ni = 1;\nwhile (i &lt;= N)\n{\n    sum = sum + 1;\n    i++;\n}\n</code></pre>\n<p>With the result being this:\nT(N) = 2 + (Σ with N on top and i+1 on bottom) * 2\nand that ends up simplifying to 2+2N\nI'm unsure of how this result is found though.</p>\n"},{"tags":["java","tizen","tizen-studio"],"answers":[{"tags":[],"owner":{"account_id":19279347,"reputation":139,"user_id":14091655,"display_name":"Sangwook Lee"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1670894382,"creation_date":1670894382,"answer_id":74779028,"question_id":74757679,"body_markdown":"Thank you very much for asking it.\r\nWe have not supported windows11 on TizenStudio officially till now\r\nBut we will check the issue as soon as possible, and then, once we find out something, we will update it again.\r\nThanks\r\n","title":"Tizen Studio Fails to install","body":"<p>Thank you very much for asking it.\nWe have not supported windows11 on TizenStudio officially till now\nBut we will check the issue as soon as possible, and then, once we find out something, we will update it again.\nThanks</p>\n"}],"owner":{"account_id":27214902,"reputation":3,"user_id":20745085,"display_name":"Swee from Swee Studios."},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":233,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":74779028,"answer_count":1,"score":0,"last_activity_date":1675192376,"creation_date":1670720746,"question_id":74757679,"body_markdown":"I tried to install Tizen Studio 5.0 on my Windows 11 PC. I noticed the installer shows up but when it says &quot;the installation process is starting...&quot; it disappears.\r\n\r\nI tried looking into the temporary files and ran installer.jar using\r\n\r\n```\r\njava -jar installer.jar\r\n```\r\nbut I got an error saying:\r\n\r\n```\r\nException in thread &quot;main&quot; java.lang.ExceptionInInitializerError\r\nCaused by: org.tizen.installer.exception.IMFatalException: Cannot find the config file.\r\n        at org.tizen.installer.core.Config.&lt;init&gt;(Config.java:138)\r\n        at org.tizen.installer.util.Log.getLogger(Log.java:144)\r\n        at org.tizen.installer.ui.wizard.WizardUIMain.&lt;clinit&gt;(WizardUIMain.java:68)\r\n```\r\n","title":"Tizen Studio Fails to install","body":"<p>I tried to install Tizen Studio 5.0 on my Windows 11 PC. I noticed the installer shows up but when it says &quot;the installation process is starting...&quot; it disappears.</p>\n<p>I tried looking into the temporary files and ran installer.jar using</p>\n<pre><code>java -jar installer.jar\n</code></pre>\n<p>but I got an error saying:</p>\n<pre><code>Exception in thread &quot;main&quot; java.lang.ExceptionInInitializerError\nCaused by: org.tizen.installer.exception.IMFatalException: Cannot find the config file.\n        at org.tizen.installer.core.Config.&lt;init&gt;(Config.java:138)\n        at org.tizen.installer.util.Log.getLogger(Log.java:144)\n        at org.tizen.installer.ui.wizard.WizardUIMain.&lt;clinit&gt;(WizardUIMain.java:68)\n</code></pre>\n"},{"tags":["java","spring","spring-boot"],"comments":[{"owner":{"account_id":10941198,"reputation":4394,"user_id":8041003,"display_name":"John Williams"},"score":0,"creation_date":1675188085,"post_id":75301211,"comment_id":132873455,"body_markdown":"What is the package of Neo4jConnectionFactory? What is the package of the class containing \\@SpringBootApplication and what does the \\@SpringBootApplication annotation look like?","body":"What is the package of Neo4jConnectionFactory? What is the package of the class containing \\@SpringBootApplication and what does the \\@SpringBootApplication annotation look like?"}],"answers":[{"tags":[],"owner":{"account_id":2124329,"reputation":612,"user_id":1886904,"display_name":"egeorge"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1675192050,"creation_date":1675192050,"answer_id":75302030,"question_id":75301211,"body_markdown":"I think this automatically prepends the prefix `neo4j`\r\n```Java\r\n@Configuration(&quot;neo4j&quot;)\r\n```\r\nSo your `@Value` statments should omit the prefix, like this:\r\n```Java\r\n    @Value(&quot;${url}&quot;)\r\n    private String url;\r\n\r\n    @Value(&quot;${user}&quot;)\r\n    private String user;\r\n\r\n    @Value(&quot;${password}&quot;)\r\n    private String password;\r\n```","title":"Values not getting picked up from application.properties","body":"<p>I think this automatically prepends the prefix <code>neo4j</code></p>\n<pre><code>@Configuration(&quot;neo4j&quot;)\n</code></pre>\n<p>So your <code>@Value</code> statments should omit the prefix, like this:</p>\n<pre><code>    @Value(&quot;${url}&quot;)\n    private String url;\n\n    @Value(&quot;${user}&quot;)\n    private String user;\n\n    @Value(&quot;${password}&quot;)\n    private String password;\n</code></pre>\n"}],"owner":{"account_id":26669791,"reputation":41,"user_id":20281373,"display_name":"Reid2"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":51,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1675192050,"creation_date":1675187801,"question_id":75301211,"body_markdown":"I&#39;m trying to access values from my application.properties file in the Neo4jConnectionFactory class. I am able to access the properties within my Setup beans class. But, I want to be able to access them from Neo4jConnectionFactory. When I try to do so I get null values. Is this possible? \r\n\r\nApplications.properties\r\n```java\r\nneo4j.url = bolt://localhost:7687\r\nneo4j.user = neo4j\r\nneo4j.password = neo4j\r\n```\r\n\r\nSetupBeans.java\r\n```java\r\n@Component\r\npublic class SetupBeans {\r\n    @Bean\r\n    public Neo4jClient neo4jClient() {\r\n        return new Neo4jConnectionFactory().build();\r\n    }\r\n}\r\n```\r\n\r\nNeo4jConnectionFactory.java\r\n```java\r\n@Configuration(&quot;neo4j&quot;)\r\npublic class Neo4jConnectionFactory {\r\n\r\n    @Value(&quot;${neo4j.url}&quot;)\r\n    private String url;\r\n\r\n    @Value(&quot;${neo4j.user}&quot;)\r\n    private String user;\r\n\r\n    @Value(&quot;${neo4j.password}&quot;)\r\n    private String password;\r\n\r\n    public Neo4jClient build() {\r\n        return new Neo4jClient(getUrl(), getUser(), getPassword());\r\n    }\r\n}\r\n```\r\n\r\nMyApplication.java\r\n```java\r\n@SpringBootApplication\r\npublic class MyApplication {\r\n\r\n    public static void main(String[] args) {\r\n        SpringApplication.run(MyApplication.class, args);\r\n    }\r\n}\r\n```","title":"Values not getting picked up from application.properties","body":"<p>I'm trying to access values from my application.properties file in the Neo4jConnectionFactory class. I am able to access the properties within my Setup beans class. But, I want to be able to access them from Neo4jConnectionFactory. When I try to do so I get null values. Is this possible?</p>\n<p>Applications.properties</p>\n<pre class=\"lang-java prettyprint-override\"><code>neo4j.url = bolt://localhost:7687\nneo4j.user = neo4j\nneo4j.password = neo4j\n</code></pre>\n<p>SetupBeans.java</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Component\npublic class SetupBeans {\n    @Bean\n    public Neo4jClient neo4jClient() {\n        return new Neo4jConnectionFactory().build();\n    }\n}\n</code></pre>\n<p>Neo4jConnectionFactory.java</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Configuration(&quot;neo4j&quot;)\npublic class Neo4jConnectionFactory {\n\n    @Value(&quot;${neo4j.url}&quot;)\n    private String url;\n\n    @Value(&quot;${neo4j.user}&quot;)\n    private String user;\n\n    @Value(&quot;${neo4j.password}&quot;)\n    private String password;\n\n    public Neo4jClient build() {\n        return new Neo4jClient(getUrl(), getUser(), getPassword());\n    }\n}\n</code></pre>\n<p>MyApplication.java</p>\n<pre class=\"lang-java prettyprint-override\"><code>@SpringBootApplication\npublic class MyApplication {\n\n    public static void main(String[] args) {\n        SpringApplication.run(MyApplication.class, args);\n    }\n}\n</code></pre>\n"},{"tags":["java","ssl","jvm","ssl-certificate","java-17"],"comments":[{"owner":{"account_id":2179728,"reputation":73047,"user_id":10819573,"display_name":"Arvind Kumar Avinash"},"score":0,"creation_date":1675191212,"post_id":74431240,"comment_id":132874363,"body_markdown":"[This](https://docs.oracle.com/javase/tutorial/security/toolsign/rstep2.html) can be helpful.","body":"<a href=\"https://docs.oracle.com/javase/tutorial/security/toolsign/rstep2.html\" rel=\"nofollow noreferrer\">This</a> can be helpful."}],"answers":[{"tags":[],"owner":{"account_id":27669132,"reputation":66,"user_id":21120344,"display_name":"Sam Lane"},"down_vote_count":0,"up_vote_count":5,"is_accepted":true,"score":5,"last_activity_date":1675191512,"creation_date":1675189803,"answer_id":75301625,"question_id":74431240,"body_markdown":"Try `%JAVA_HOME/lib/security/cacerts`","title":"How to add SSL certificate into the jvm for java 17","body":"<p>Try <code>%JAVA_HOME/lib/security/cacerts</code></p>\n"}],"owner":{"account_id":12037792,"reputation":1783,"user_id":8805742,"display_name":"mahfuj asif"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":7176,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":75301625,"answer_count":1,"score":3,"last_activity_date":1675191512,"creation_date":1668426904,"question_id":74431240,"body_markdown":"I need to add my SSL certificate file to the JVM trust store. I have java oracle 8 and java adoptium 17 installed. \r\n\r\nFollowing this [link][1] I have successfully added the certificate for java 8 and can communicate using the certificate. Here is the command\r\n```\r\nkeytool -importcert -alias startssl -keystore $JAVA_HOME/jre/lib/security/cacerts -storepass changeit -file ca.crt\r\n```\r\n\r\nBut now I need to add this to java 17 as well. With the same command, I could not add the certificate. I found out that for java 17 the `JAVA_HOME` does not have directory `jre/lib/security` , rather it has `conf/security` directory. So i changed my command to this\r\n```\r\nkeytool -importcert -alias startssl -keystore $JAVA_HOME/conf/security/cacerts -storepass changeit -file ca.crt\r\n```\r\n\r\nThis command generates the `cacerts` file under the `security` folder, but still, I am getting error. This same error i was getting in java 8 before adding certificate. Where I am supposed to put this `cacerts` file for java 17?\r\n\r\n```\r\nCaused by: javax.net.ssl.SSLHandshakeException: PKIX path building failed: sun.security.provider.certpath.SunCertPathBuilderException: unable to find valid certification path to requested target\r\n        at java.base/sun.security.ssl.Alert.createSSLException(Alert.java:131) ~[na:na]\r\n        at java.base/sun.security.ssl.TransportContext.fatal(TransportContext.java:371) ~[na:na]\r\n        at java.base/sun.security.ssl.TransportContext.fatal(TransportContext.java:314) ~[na:na]\r\n        at java.base/sun.security.ssl.TransportContext.fatal(TransportContext.java:309) ~[na:na]\r\n        at java.base/sun.security.ssl.CertificateMessage$T13CertificateConsumer.checkServerCerts(CertificateMessage.java:1357) ~[na:na]\r\n        at java.base/sun.security.ssl.CertificateMessage$T13CertificateConsumer.onConsumeCertificate(CertificateMessage.java:1232) ~[na:na]\r\n        at java.base/sun.security.ssl.CertificateMessage$T13CertificateConsumer.consume(CertificateMessage.java:1175) ~[na:na]\r\n        at java.base/sun.security.ssl.SSLHandshake.consume(SSLHandshake.java:396) ~[na:na]\r\n        at java.base/sun.security.ssl.HandshakeContext.dispatch(HandshakeContext.java:480) ~[na:na]\r\n        at java.base/sun.security.ssl.SSLEngineImpl$DelegatedTask$DelegatedAction.run(SSLEngineImpl.java:1277) ~[na:na]\r\n        at java.base/sun.security.ssl.SSLEngineImpl$DelegatedTask$DelegatedAction.run(SSLEngineImpl.java:1264) ~[na:na]\r\n        at java.base/java.security.AccessController.doPrivileged(AccessController.java:712) ~[na:na]\r\n        at java.base/sun.security.ssl.SSLEngineImpl$DelegatedTask.run(SSLEngineImpl.java:1209) ~[na:na]\r\n        at org.apache.http.nio.reactor.ssl.SSLIOSession.doRunTask(SSLIOSession.java:288) ~[httpcore-nio-4.4.15.jar:4.4.15]\r\n        at org.apache.http.nio.reactor.ssl.SSLIOSession.doHandshake(SSLIOSession.java:356) ~[httpcore-nio-4.4.15.jar:4.4.15]\r\n        at org.apache.http.nio.reactor.ssl.SSLIOSession.isAppInputReady(SSLIOSession.java:547) ~[httpcore-nio-4.4.15.jar:4.4.15]\r\n        at org.apache.http.impl.nio.reactor.AbstractIODispatch.inputReady(AbstractIODispatch.java:120) ~[httpcore-nio-4.4.15.jar:4.4.15]\r\n        at org.apache.http.impl.nio.reactor.BaseIOReactor.readable(BaseIOReactor.java:162) ~[httpcore-nio-4.4.15.jar:4.4.15]\r\n        at org.apache.http.impl.nio.reactor.AbstractIOReactor.processEvent(AbstractIOReactor.java:337) ~[httpcore-nio-4.4.15.jar:4.4.15]\r\n        at org.apache.http.impl.nio.reactor.AbstractIOReactor.processEvents(AbstractIOReactor.java:315) ~[httpcore-nio-4.4.15.jar:4.4.15]\r\n        at org.apache.http.impl.nio.reactor.AbstractIOReactor.execute(AbstractIOReactor.java:276) ~[httpcore-nio-4.4.15.jar:4.4.15]\r\n        at org.apache.http.impl.nio.reactor.BaseIOReactor.execute(BaseIOReactor.java:104) ~[httpcore-nio-4.4.15.jar:4.4.15]\r\n        at org.apache.http.impl.nio.reactor.AbstractMultiworkerIOReactor$Worker.run(AbstractMultiworkerIOReactor.java:591) ~[httpcore-nio-4.4.15.jar:4.4.15]\r\n        ... 1 common frames omitted\r\nCaused by: sun.security.validator.ValidatorException: PKIX path building failed: sun.security.provider.certpath.SunCertPathBuilderException: unable to find valid certification path to requested target\r\n        at java.base/sun.security.validator.PKIXValidator.doBuild(PKIXValidator.java:439) ~[na:na]\r\n        at java.base/sun.security.validator.PKIXValidator.engineValidate(PKIXValidator.java:306) ~[na:na]\r\n        at java.base/sun.security.validator.Validator.validate(Validator.java:264) ~[na:na]\r\n        at java.base/sun.security.ssl.X509TrustManagerImpl.checkTrusted(X509TrustManagerImpl.java:285) ~[na:na]\r\n        at java.base/sun.security.ssl.X509TrustManagerImpl.checkServerTrusted(X509TrustManagerImpl.java:144) ~[na:na]\r\n        at java.base/sun.security.ssl.CertificateMessage$T13CertificateConsumer.checkServerCerts(CertificateMessage.java:1335) ~[na:na]\r\n        ... 19 common frames omitted\r\nCaused by: sun.security.provider.certpath.SunCertPathBuilderException: unable to find valid certification path to requested target\r\n        at java.base/sun.security.provider.certpath.SunCertPathBuilder.build(SunCertPathBuilder.java:141) ~[na:na]\r\n        at java.base/sun.security.provider.certpath.SunCertPathBuilder.engineBuild(SunCertPathBuilder.java:126) ~[na:na]\r\n        at java.base/java.security.cert.CertPathBuilder.build(CertPathBuilder.java:297) ~[na:na]\r\n        at java.base/sun.security.validator.PKIXValidator.doBuild(PKIXValidator.java:434) ~[na:na]\r\n        ... 24 common frames omitted\r\n\r\n```\r\n\r\n\r\n\r\n  [1]: https://connect2id.com/blog/importing-ca-root-cert-into-jvm-trust-store","title":"How to add SSL certificate into the jvm for java 17","body":"<p>I need to add my SSL certificate file to the JVM trust store. I have java oracle 8 and java adoptium 17 installed.</p>\n<p>Following this <a href=\"https://connect2id.com/blog/importing-ca-root-cert-into-jvm-trust-store\" rel=\"nofollow noreferrer\">link</a> I have successfully added the certificate for java 8 and can communicate using the certificate. Here is the command</p>\n<pre><code>keytool -importcert -alias startssl -keystore $JAVA_HOME/jre/lib/security/cacerts -storepass changeit -file ca.crt\n</code></pre>\n<p>But now I need to add this to java 17 as well. With the same command, I could not add the certificate. I found out that for java 17 the <code>JAVA_HOME</code> does not have directory <code>jre/lib/security</code> , rather it has <code>conf/security</code> directory. So i changed my command to this</p>\n<pre><code>keytool -importcert -alias startssl -keystore $JAVA_HOME/conf/security/cacerts -storepass changeit -file ca.crt\n</code></pre>\n<p>This command generates the <code>cacerts</code> file under the <code>security</code> folder, but still, I am getting error. This same error i was getting in java 8 before adding certificate. Where I am supposed to put this <code>cacerts</code> file for java 17?</p>\n<pre><code>Caused by: javax.net.ssl.SSLHandshakeException: PKIX path building failed: sun.security.provider.certpath.SunCertPathBuilderException: unable to find valid certification path to requested target\n        at java.base/sun.security.ssl.Alert.createSSLException(Alert.java:131) ~[na:na]\n        at java.base/sun.security.ssl.TransportContext.fatal(TransportContext.java:371) ~[na:na]\n        at java.base/sun.security.ssl.TransportContext.fatal(TransportContext.java:314) ~[na:na]\n        at java.base/sun.security.ssl.TransportContext.fatal(TransportContext.java:309) ~[na:na]\n        at java.base/sun.security.ssl.CertificateMessage$T13CertificateConsumer.checkServerCerts(CertificateMessage.java:1357) ~[na:na]\n        at java.base/sun.security.ssl.CertificateMessage$T13CertificateConsumer.onConsumeCertificate(CertificateMessage.java:1232) ~[na:na]\n        at java.base/sun.security.ssl.CertificateMessage$T13CertificateConsumer.consume(CertificateMessage.java:1175) ~[na:na]\n        at java.base/sun.security.ssl.SSLHandshake.consume(SSLHandshake.java:396) ~[na:na]\n        at java.base/sun.security.ssl.HandshakeContext.dispatch(HandshakeContext.java:480) ~[na:na]\n        at java.base/sun.security.ssl.SSLEngineImpl$DelegatedTask$DelegatedAction.run(SSLEngineImpl.java:1277) ~[na:na]\n        at java.base/sun.security.ssl.SSLEngineImpl$DelegatedTask$DelegatedAction.run(SSLEngineImpl.java:1264) ~[na:na]\n        at java.base/java.security.AccessController.doPrivileged(AccessController.java:712) ~[na:na]\n        at java.base/sun.security.ssl.SSLEngineImpl$DelegatedTask.run(SSLEngineImpl.java:1209) ~[na:na]\n        at org.apache.http.nio.reactor.ssl.SSLIOSession.doRunTask(SSLIOSession.java:288) ~[httpcore-nio-4.4.15.jar:4.4.15]\n        at org.apache.http.nio.reactor.ssl.SSLIOSession.doHandshake(SSLIOSession.java:356) ~[httpcore-nio-4.4.15.jar:4.4.15]\n        at org.apache.http.nio.reactor.ssl.SSLIOSession.isAppInputReady(SSLIOSession.java:547) ~[httpcore-nio-4.4.15.jar:4.4.15]\n        at org.apache.http.impl.nio.reactor.AbstractIODispatch.inputReady(AbstractIODispatch.java:120) ~[httpcore-nio-4.4.15.jar:4.4.15]\n        at org.apache.http.impl.nio.reactor.BaseIOReactor.readable(BaseIOReactor.java:162) ~[httpcore-nio-4.4.15.jar:4.4.15]\n        at org.apache.http.impl.nio.reactor.AbstractIOReactor.processEvent(AbstractIOReactor.java:337) ~[httpcore-nio-4.4.15.jar:4.4.15]\n        at org.apache.http.impl.nio.reactor.AbstractIOReactor.processEvents(AbstractIOReactor.java:315) ~[httpcore-nio-4.4.15.jar:4.4.15]\n        at org.apache.http.impl.nio.reactor.AbstractIOReactor.execute(AbstractIOReactor.java:276) ~[httpcore-nio-4.4.15.jar:4.4.15]\n        at org.apache.http.impl.nio.reactor.BaseIOReactor.execute(BaseIOReactor.java:104) ~[httpcore-nio-4.4.15.jar:4.4.15]\n        at org.apache.http.impl.nio.reactor.AbstractMultiworkerIOReactor$Worker.run(AbstractMultiworkerIOReactor.java:591) ~[httpcore-nio-4.4.15.jar:4.4.15]\n        ... 1 common frames omitted\nCaused by: sun.security.validator.ValidatorException: PKIX path building failed: sun.security.provider.certpath.SunCertPathBuilderException: unable to find valid certification path to requested target\n        at java.base/sun.security.validator.PKIXValidator.doBuild(PKIXValidator.java:439) ~[na:na]\n        at java.base/sun.security.validator.PKIXValidator.engineValidate(PKIXValidator.java:306) ~[na:na]\n        at java.base/sun.security.validator.Validator.validate(Validator.java:264) ~[na:na]\n        at java.base/sun.security.ssl.X509TrustManagerImpl.checkTrusted(X509TrustManagerImpl.java:285) ~[na:na]\n        at java.base/sun.security.ssl.X509TrustManagerImpl.checkServerTrusted(X509TrustManagerImpl.java:144) ~[na:na]\n        at java.base/sun.security.ssl.CertificateMessage$T13CertificateConsumer.checkServerCerts(CertificateMessage.java:1335) ~[na:na]\n        ... 19 common frames omitted\nCaused by: sun.security.provider.certpath.SunCertPathBuilderException: unable to find valid certification path to requested target\n        at java.base/sun.security.provider.certpath.SunCertPathBuilder.build(SunCertPathBuilder.java:141) ~[na:na]\n        at java.base/sun.security.provider.certpath.SunCertPathBuilder.engineBuild(SunCertPathBuilder.java:126) ~[na:na]\n        at java.base/java.security.cert.CertPathBuilder.build(CertPathBuilder.java:297) ~[na:na]\n        at java.base/sun.security.validator.PKIXValidator.doBuild(PKIXValidator.java:434) ~[na:na]\n        ... 24 common frames omitted\n\n</code></pre>\n"},{"tags":["java","ssl","ssl-certificate","self-signed-certificate","java-http-client"],"comments":[{"owner":{"account_id":5289146,"reputation":8128,"user_id":4222206,"display_name":"queeg"},"score":0,"creation_date":1675196454,"post_id":75301918,"comment_id":132875732,"body_markdown":"There is another chance to reproduce the issue - if you have control on the server: Self-sign a new certificate and install it on the server side.","body":"There is another chance to reproduce the issue - if you have control on the server: Self-sign a new certificate and install it on the server side."},{"owner":{"account_id":5289146,"reputation":8128,"user_id":4222206,"display_name":"queeg"},"score":0,"creation_date":1675196586,"post_id":75301918,"comment_id":132875774,"body_markdown":"Startup your application with command line options pointing to another truststore. You could even create an empty one to start with.","body":"Startup your application with command line options pointing to another truststore. You could even create an empty one to start with."},{"owner":{"account_id":85671,"reputation":40847,"user_id":238704,"display_name":"President James K. Polk"},"score":0,"creation_date":1675263263,"post_id":75301918,"comment_id":132891122,"body_markdown":"You should probably avoid modifying `cacerts`. [This discussion](https://docs.oracle.com/en/java/javase/17/security/java-secure-socket-extension-jsse-reference-guide.html#GUID-32CF3420-56E8-4BC5-8D3B-1F6B4692A290) explains some better options, including create your own file of trusted certificates.","body":"You should probably avoid modifying <code>cacerts</code>. <a href=\"https://docs.oracle.com/en/java/javase/17/security/java-secure-socket-extension-jsse-reference-guide.html#GUID-32CF3420-56E8-4BC5-8D3B-1F6B4692A290\" rel=\"nofollow noreferrer\">This discussion</a> explains some better options, including create your own file of trusted certificates."},{"owner":{"account_id":85671,"reputation":40847,"user_id":238704,"display_name":"President James K. Polk"},"score":0,"creation_date":1675263465,"post_id":75301918,"comment_id":132891176,"body_markdown":"You can use `keytool` to examine the `cacerts` file, or an applicate like KeyStore Explorer. Just taking a wild guess here but the problem may be that your platform has multiple JDKs installed, and you modified the cacerts file of one of these but then tried to remove it from a different one, or you ran the program the first time using one JDK but ran it the second time using a different JDK. I would try running it using the full absolute pathname to the `java` executable to help diagnose the issue.","body":"You can use <code>keytool</code> to examine the <code>cacerts</code> file, or an applicate like KeyStore Explorer. Just taking a wild guess here but the problem may be that your platform has multiple JDKs installed, and you modified the cacerts file of one of these but then tried to remove it from a different one, or you ran the program the first time using one JDK but ran it the second time using a different JDK. I would try running it using the full absolute pathname to the <code>java</code> executable to help diagnose the issue."}],"owner":{"account_id":385654,"reputation":275,"user_id":742925,"accept_rate":43,"display_name":"user742925"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":160,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1675191463,"creation_date":1675191463,"question_id":75301918,"body_markdown":"I am running a Java 11 SDK program through IntelliJ IDEA (on Widows 10) which is using the Java 11 Httpclient to send a simple GET request to a site that has a self-signed certificate. \r\n```\r\nfinal HttpClient httpClient = HttpClient.newBuilder()\r\n        .version(HttpClient.Version.HTTP_1_1)\r\n        .connectTimeout(Duration.ofSeconds(10))\r\n        .build();\r\n\r\nHttpRequest request = HttpRequest.newBuilder()\r\n            .uri(new URI(url))\r\n            .GET()\r\n            .build();\r\n\r\nHttpResponse&lt;String&gt; response = httpClient.send(request, HttpResponse.BodyHandlers.ofString());\r\n```\r\n\r\nThis was initially resulting in a &quot;pkix path building failed&quot; error, which I solved by adding the site&#39;s certificate to the local truststore `C:\\Users\\[username]\\.jdks\\azul-11.0.16.1\\lib\\security\\cacerts`\r\n\r\nProblem solved. Except now I need to reproduce that issue again, so I went to remove that certificate from the cacerts file and restarted the whole PC for good measure.\r\n\r\nHowever, even with the certificate removed from cacerts, there are no errors and the request is still going through as if the certificate was still trusted. I thought any possible caching might be eliminated by restarting the machine.\r\n\r\nI am out of ideas and problems with removing a previously added certificate is not a very hot topic for googling. What could be going on here that I&#39;m missing?","title":"Java Httpclient request to a site with self-signed certificate passes even after removing certificate from truststore","body":"<p>I am running a Java 11 SDK program through IntelliJ IDEA (on Widows 10) which is using the Java 11 Httpclient to send a simple GET request to a site that has a self-signed certificate.</p>\n<pre><code>final HttpClient httpClient = HttpClient.newBuilder()\n        .version(HttpClient.Version.HTTP_1_1)\n        .connectTimeout(Duration.ofSeconds(10))\n        .build();\n\nHttpRequest request = HttpRequest.newBuilder()\n            .uri(new URI(url))\n            .GET()\n            .build();\n\nHttpResponse&lt;String&gt; response = httpClient.send(request, HttpResponse.BodyHandlers.ofString());\n</code></pre>\n<p>This was initially resulting in a &quot;pkix path building failed&quot; error, which I solved by adding the site's certificate to the local truststore <code>C:\\Users\\[username]\\.jdks\\azul-11.0.16.1\\lib\\security\\cacerts</code></p>\n<p>Problem solved. Except now I need to reproduce that issue again, so I went to remove that certificate from the cacerts file and restarted the whole PC for good measure.</p>\n<p>However, even with the certificate removed from cacerts, there are no errors and the request is still going through as if the certificate was still trusted. I thought any possible caching might be eliminated by restarting the machine.</p>\n<p>I am out of ideas and problems with removing a previously added certificate is not a very hot topic for googling. What could be going on here that I'm missing?</p>\n"},{"tags":["java","synchronization","locking"],"answers":[{"tags":[],"owner":{"account_id":58650,"reputation":3399,"user_id":175554,"accept_rate":40,"display_name":"ozkanpakdil"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1675191385,"creation_date":1675191385,"answer_id":75301903,"question_id":75285432,"body_markdown":"### How to deal with the problem of waiting for the answer ?###\r\n\r\nUsing **while(true)** can create issues because you are blocking the thread and opening sub thread and multi streams will make it more complex. There is easy way called  reactive programming which handles this kind of multi-threaded issues easily, [quarkus async solution](https://stackoverflow.com/a/71232766/175554) and [spring](https://stackoverflow.com/a/55573852/175554), if you still want to manage your sockets from java code you can use [akka](https://doc.akka.io/docs/akka/current/stream/stream-io.html)\r\n\r\n### How can I make sure that there will be no problems when more than 2 clients send requests at the same time. ###\r\n\r\nThat can be done by not blocking the main thread and If you manage to use reactive and/or async approach you will not have that problem.\r\n\r\nReference \r\n- https://quarkus.io/guides/getting-started-reactive\r\n- https://docs.spring.io/spring-framework/docs/current/reference/html/web-reactive.html","title":"synchronize between multiple clients in a server","body":"<h3>How to deal with the problem of waiting for the answer ?###</h3>\n<p>Using <strong>while(true)</strong> can create issues because you are blocking the thread and opening sub thread and multi streams will make it more complex. There is easy way called  reactive programming which handles this kind of multi-threaded issues easily, <a href=\"https://stackoverflow.com/a/71232766/175554\">quarkus async solution</a> and <a href=\"https://stackoverflow.com/a/55573852/175554\">spring</a>, if you still want to manage your sockets from java code you can use <a href=\"https://doc.akka.io/docs/akka/current/stream/stream-io.html\" rel=\"nofollow noreferrer\">akka</a></p>\n<h3>How can I make sure that there will be no problems when more than 2 clients send requests at the same time.</h3>\n<p>That can be done by not blocking the main thread and If you manage to use reactive and/or async approach you will not have that problem.</p>\n<p>Reference</p>\n<ul>\n<li><a href=\"https://quarkus.io/guides/getting-started-reactive\" rel=\"nofollow noreferrer\">https://quarkus.io/guides/getting-started-reactive</a></li>\n<li><a href=\"https://docs.spring.io/spring-framework/docs/current/reference/html/web-reactive.html\" rel=\"nofollow noreferrer\">https://docs.spring.io/spring-framework/docs/current/reference/html/web-reactive.html</a></li>\n</ul>\n"}],"owner":{"account_id":15032752,"reputation":29,"user_id":10850275,"display_name":"N.Omar"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":68,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1675191385,"creation_date":1675086999,"question_id":75285432,"body_markdown":"I have a Server that can receive multiple request at the same time.\r\n\r\nIn my Server, I have to make some traitement and wait for response. This traitmenet is done by externe library so I don&#39;t how much should I wait.\r\n\r\nSo the Server looks like :\r\n\r\n    public class MyServer{\r\n\r\n\r\n    @Override\r\n    //method from the library\r\n    public void workonRequest(){\r\n       //---\r\n       response=[...] \r\n       \r\n    }\r\n\r\n        public void listenRequest() {\r\n            new Thread(() -&gt; {\r\n                while (true) {\r\n                    try {\r\n                        socket = server.accept();\r\n                        ObjectInputStream input = new ObjectInputStream(socket.getInputStream());\r\n                        ObjectOutputStream output = new ObjectOutputStream(socket.getOutputStream());\r\n                        socket.setTcpNoDelay(true); //TODO : Not sure !\r\n                        new Thread(() -&gt; {\r\n                            try {\r\n                                handleRequest(input, output);\r\n                            } catch (IOException e) {\r\n                                throw new RuntimeException(e);\r\n                            }\r\n                        }).start();\r\n                    } catch (IOException ex) {\r\n                        System.out.println(ex.getMessage());\r\n                    }\r\n                }\r\n            }).start();\r\n        }\r\n\r\n\r\n\r\n\r\n\r\nAnd the handle request method is :\r\n\r\n\r\n        public void handleRequest(ObjectInputStream input, ObjectOutputStream output) throws IOException {\r\n            try {\r\n                while (true) {\r\n                //forward the request to the library\r\n                //work on it [means using the library and waiting]\r\n                // return response \r\n               }\r\n    }\r\n    \r\n    }\r\n\r\n\r\nThe response object is the result that I want return to the client\r\n\r\n1. How to deal with the problem of waiting for the answer?\r\n2. How can I make sure that there will be no problems when more than 2 clients send requests at the same time.\r\n\r\nThanks in advance\r\n\r\n","title":"synchronize between multiple clients in a server","body":"<p>I have a Server that can receive multiple request at the same time.</p>\n<p>In my Server, I have to make some traitement and wait for response. This traitmenet is done by externe library so I don't how much should I wait.</p>\n<p>So the Server looks like :</p>\n<pre><code>public class MyServer{\n\n\n@Override\n//method from the library\npublic void workonRequest(){\n   //---\n   response=[...] \n   \n}\n\n    public void listenRequest() {\n        new Thread(() -&gt; {\n            while (true) {\n                try {\n                    socket = server.accept();\n                    ObjectInputStream input = new ObjectInputStream(socket.getInputStream());\n                    ObjectOutputStream output = new ObjectOutputStream(socket.getOutputStream());\n                    socket.setTcpNoDelay(true); //TODO : Not sure !\n                    new Thread(() -&gt; {\n                        try {\n                            handleRequest(input, output);\n                        } catch (IOException e) {\n                            throw new RuntimeException(e);\n                        }\n                    }).start();\n                } catch (IOException ex) {\n                    System.out.println(ex.getMessage());\n                }\n            }\n        }).start();\n    }\n</code></pre>\n<p>And the handle request method is :</p>\n<pre><code>    public void handleRequest(ObjectInputStream input, ObjectOutputStream output) throws IOException {\n        try {\n            while (true) {\n            //forward the request to the library\n            //work on it [means using the library and waiting]\n            // return response \n           }\n}\n\n}\n</code></pre>\n<p>The response object is the result that I want return to the client</p>\n<ol>\n<li>How to deal with the problem of waiting for the answer?</li>\n<li>How can I make sure that there will be no problems when more than 2 clients send requests at the same time.</li>\n</ol>\n<p>Thanks in advance</p>\n"},{"tags":["java","ant","jacoco"],"comments":[{"owner":{"account_id":6243460,"reputation":97907,"user_id":4856258,"accept_rate":100,"display_name":"Tagir Valeev"},"score":0,"creation_date":1438256234,"post_id":31720139,"comment_id":51381731,"body_markdown":"Add how executiondata (`${jacocoexec.filename}`) is generated? There should be separate target which executes `jacoco:coverage` task. Put this target to question as well.","body":"Add how executiondata (<code>${jacocoexec.filename}</code>) is generated? There should be separate target which executes <code>jacoco:coverage</code> task. Put this target to question as well."},{"owner":{"account_id":3455742,"reputation":2315,"user_id":2894309,"accept_rate":56,"display_name":"Nishant Lakhara"},"score":0,"creation_date":1438258003,"post_id":31720139,"comment_id":51382947,"body_markdown":"by adding -javaagent parameter while running test case: -javaagent:JaCoCoProject/lib/jacocoagent.jar=destfile=JaCoCoProject/jacoco.exec,output=file","body":"by adding -javaagent parameter while running test case: -javaagent:JaCoCoProject/lib/jacocoagent.jar=destfile=JaCoCo&zwnj;&#8203;Project/jacoco.exec,&zwnj;&#8203;output=file"},{"owner":{"account_id":22194,"reputation":18092,"user_id":54506,"accept_rate":78,"display_name":"Jayan"},"score":1,"creation_date":1439051419,"post_id":31720139,"comment_id":51707600,"body_markdown":"please share the full build file.  All that error is saying is you instrumented a jar, ran tests- Those classes are not from &quot;./jar/abc.jar&quot;- It is not enough to match the classes by name. they must match the &quot;classID&quot; seen by jacoco- which means even if you recompile, the classes are different.","body":"please share the full build file.  All that error is saying is you instrumented a jar, ran tests- Those classes are not from &quot;./jar/abc.jar&quot;- It is not enough to match the classes by name. they must match the &quot;classID&quot; seen by jacoco- which means even if you recompile, the classes are different."},{"owner":{"account_id":3455742,"reputation":2315,"user_id":2894309,"accept_rate":56,"display_name":"Nishant Lakhara"},"score":0,"creation_date":1439198397,"post_id":31720139,"comment_id":51744534,"body_markdown":"@Jayan : Does recompiling on same code may change the content in jar ?","body":"@Jayan : Does recompiling on same code may change the content in jar ?"},{"owner":{"account_id":22194,"reputation":18092,"user_id":54506,"accept_rate":78,"display_name":"Jayan"},"score":0,"creation_date":1439198634,"post_id":31720139,"comment_id":51744692,"body_markdown":"Yes- from jacoco&#39;s point of view. It computes has hash from binary- this is different each time you compile- probably due to timestamps.","body":"Yes- from jacoco&#39;s point of view. It computes has hash from binary- this is different each time you compile- probably due to timestamps."},{"owner":{"account_id":22194,"reputation":18092,"user_id":54506,"accept_rate":78,"display_name":"Jayan"},"score":0,"creation_date":1439198788,"post_id":31720139,"comment_id":51744795,"body_markdown":"@Nishu: you are offering a bounty- The OP however did not add enough details to the qustion- do you have access to smaple build.xml used by OP(or whatever the question leads to?)","body":"@Nishu: you are offering a bounty- The OP however did not add enough details to the qustion- do you have access to smaple build.xml used by OP(or whatever the question leads to?)"},{"owner":{"account_id":3455742,"reputation":2315,"user_id":2894309,"accept_rate":56,"display_name":"Nishant Lakhara"},"score":0,"creation_date":1439199086,"post_id":31720139,"comment_id":51744973,"body_markdown":"@Jayan: Nope... actually i am getting such errors while generating code coverage in my project and that&#39;s why set a bounty to this one. Your comment looked a bit convincing and that&#39;s why asked you","body":"@Jayan: Nope... actually i am getting such errors while generating code coverage in my project and that&#39;s why set a bounty to this one. Your comment looked a bit convincing and that&#39;s why asked you"},{"owner":{"account_id":22194,"reputation":18092,"user_id":54506,"accept_rate":78,"display_name":"Jayan"},"score":0,"creation_date":1439200977,"post_id":31720139,"comment_id":51746058,"body_markdown":"@Nishu : So you can edit question with your additional details :). Please see my answers - which is a shameless copy from JaCoCo Site.","body":"@Nishu : So you can edit question with your additional details :). Please see my answers - which is a shameless copy from JaCoCo Site."}],"answers":[{"tags":[],"owner":{"account_id":2238971,"reputation":379,"user_id":1974522,"accept_rate":67,"display_name":"kkmonlee"},"down_vote_count":1,"up_vote_count":7,"is_accepted":false,"score":6,"last_activity_date":1439177123,"creation_date":1439177123,"answer_id":31911218,"question_id":31720139,"body_markdown":"JaCoCo needs the exact same class files for report generation that used at execution time. Due to different compilers and/or other tools modifying the classes, the classes might be different.","title":"jacoco code coverage report generator showing error : &quot;Classes in bundle &#39;Code Coverage Report&#39; do no match with execution data&quot;","body":"<p>JaCoCo needs the exact same class files for report generation that used at execution time. Due to different compilers and/or other tools modifying the classes, the classes might be different.</p>\n"},{"tags":[],"owner":{"account_id":22194,"reputation":18092,"user_id":54506,"accept_rate":78,"display_name":"Jayan"},"down_vote_count":1,"up_vote_count":42,"is_accepted":false,"score":41,"last_activity_date":1487751766,"creation_date":1439200900,"answer_id":31916686,"question_id":31720139,"body_markdown":"You are getting the error related to classID. This is a concept described in detail at JaCoCo docs-site. http://www.eclemma.org/jacoco/trunk/doc/classids.html.  This is a key step for supporting multiple versions of class (an appserver for example) in same JVM.\r\n\r\nCopying part some part of it here for visibility. \r\n \r\n\r\n**What are class ids and how are they created?**\r\n    \r\n    \r\n\r\n&gt; Class ids are 64-bit integer values, for example 0x638e104737889183 in\r\n&gt; hex notation. Their calculation is considered an implementation detail\r\n&gt; of JaCoCo. Currently ids are created with a CRC64 checksum of the raw\r\n&gt; class file.\r\n\r\n\r\n\r\n**What can cause different class ids?**\r\n\r\n&gt; Class ids are identical for the exact same class file only\r\n&gt; (byte-by-byte). There is a couple of reasons why you might get\r\n&gt; different class files. First compiling Java source files will result\r\n&gt; in different class files if you use a different tool chain:\r\n\r\n    \r\n\r\n - Different compiler vendor (e.g. Eclipse vs. Oracle JDK)\r\n\r\n - Different compiler versions\r\n\r\n - Different compiler settings (e.g. debug vs. non-debug)\r\n\r\nAlso post-processing class files (obfuscation, AspectJ, etc.) will typically change the class files. JaCoCo will work well if you simply use the same class files for runtime as well as for analysis. So the tool chain to create these class files does not matter.\r\n\r\nEven if the class files on the file system are the same there is possible that classes seen by the JaCoCo runtime agent are different anyways. This typically happens when another Java agent is configured before the JaCoCo agent or special class loaders pre-process the class files. Typical candidates are:\r\n\r\n- Mocking frameworks\r\n- Application servers\r\n- Persistence frameworks\r\n\r\nThe same page covers possible solutions. \r\n\r\n**What workarounds exist to deal with runtime-modified classes?**\r\n\r\nIf classes get modified at runtime in your setup there are some workarounds to make JaCoCo work anyways:\r\n\r\n- If you use another Java agent make sure the JaCoCo agent is specified at first in the command line. This way the JaCoCo agent should see the original class files.\r\n- Specify the classdumpdir option of the JaCoCo agent and use the dumped classes at report generation. Note that only loaded classes will be dumped, i.e. classes not executed at all will not show-up in your report as not covered.\r\n- Use offline instrumentation before you run your tests. This way classes get instrumented by JaCoCo before any runtime modification can take place. Note that in this case the report has to be generated with the original classes, not with instrumented ones.\r\n\r\n**Edited on 22-02-2017**\r\n\r\n**How to use Offline Instrumentation:**\r\nUse below task provided by [Daniel Atallah][1].\r\n\r\n    //Additional SourceSets can be added to the jacocoOfflineSourceSets as needed by \r\n    project.ext.jacocoOfflineSourceSets = [ &#39;main&#39; ]\r\n    task doJacocoOfflineInstrumentation(dependsOn: [ classes, project.configurations.jacocoAnt ]) {\r\n        inputs.files classes.outputs.files\r\n        File outputDir = new File(project.buildDir, &#39;instrumentedClasses&#39;)\r\n        outputs.dir outputDir\r\n        doFirst {\r\n            project.delete(outputDir)\r\n            ant.taskdef(\r\n                resource: &#39;org/jacoco/ant/antlib.xml&#39;,\r\n                classpath: project.configurations.jacocoAnt.asPath,\r\n                uri: &#39;jacoco&#39;\r\n            )\r\n            def instrumented = false\r\n            jacocoOfflineSourceSets.each { sourceSetName -&gt;\r\n                if (file(sourceSets[sourceSetName].output.classesDir).exists()) {\r\n                    def instrumentedClassedDir = &quot;${outputDir}/${sourceSetName}&quot;\r\n                    ant.&#39;jacoco:instrument&#39;(destdir: instrumentedClassedDir) {\r\n                        fileset(dir: sourceSets[sourceSetName].output.classesDir, includes: &#39;**/*.class&#39;)\r\n                    }\r\n                    //Replace the classes dir in the test classpath with the instrumented one\r\n                    sourceSets.test.runtimeClasspath -= files(sourceSets[sourceSetName].output.classesDir)\r\n                    sourceSets.test.runtimeClasspath += files(instrumentedClassedDir)\r\n                    instrumented = true\r\n                }\r\n            }\r\n            if (instrumented) {\r\n                //Disable class verification based on https://github.com/jayway/powermock/issues/375\r\n                test.jvmArgs += &#39;-noverify&#39;\r\n            }\r\n        }\r\n    }\r\n    test.dependsOn doJacocoOfflineInstrumentation\r\n\r\nNow generate report using `&quot;gradlew test jacocoTestReport&quot;` command.\r\n\r\n\r\n  [1]: https://discuss.gradle.org/t/jacoco-offline-instrumentation-in-gradle/9996/2","title":"jacoco code coverage report generator showing error : &quot;Classes in bundle &#39;Code Coverage Report&#39; do no match with execution data&quot;","body":"<p>You are getting the error related to classID. This is a concept described in detail at JaCoCo docs-site. <a href=\"http://www.eclemma.org/jacoco/trunk/doc/classids.html\" rel=\"noreferrer\">http://www.eclemma.org/jacoco/trunk/doc/classids.html</a>.  This is a key step for supporting multiple versions of class (an appserver for example) in same JVM.</p>\n\n<p>Copying part some part of it here for visibility. </p>\n\n<p><strong>What are class ids and how are they created?</strong></p>\n\n<blockquote>\n  <p>Class ids are 64-bit integer values, for example 0x638e104737889183 in\n  hex notation. Their calculation is considered an implementation detail\n  of JaCoCo. Currently ids are created with a CRC64 checksum of the raw\n  class file.</p>\n</blockquote>\n\n<p><strong>What can cause different class ids?</strong></p>\n\n<blockquote>\n  <p>Class ids are identical for the exact same class file only\n  (byte-by-byte). There is a couple of reasons why you might get\n  different class files. First compiling Java source files will result\n  in different class files if you use a different tool chain:</p>\n</blockquote>\n\n<ul>\n<li><p>Different compiler vendor (e.g. Eclipse vs. Oracle JDK)</p></li>\n<li><p>Different compiler versions</p></li>\n<li><p>Different compiler settings (e.g. debug vs. non-debug)</p></li>\n</ul>\n\n<p>Also post-processing class files (obfuscation, AspectJ, etc.) will typically change the class files. JaCoCo will work well if you simply use the same class files for runtime as well as for analysis. So the tool chain to create these class files does not matter.</p>\n\n<p>Even if the class files on the file system are the same there is possible that classes seen by the JaCoCo runtime agent are different anyways. This typically happens when another Java agent is configured before the JaCoCo agent or special class loaders pre-process the class files. Typical candidates are:</p>\n\n<ul>\n<li>Mocking frameworks</li>\n<li>Application servers</li>\n<li>Persistence frameworks</li>\n</ul>\n\n<p>The same page covers possible solutions. </p>\n\n<p><strong>What workarounds exist to deal with runtime-modified classes?</strong></p>\n\n<p>If classes get modified at runtime in your setup there are some workarounds to make JaCoCo work anyways:</p>\n\n<ul>\n<li>If you use another Java agent make sure the JaCoCo agent is specified at first in the command line. This way the JaCoCo agent should see the original class files.</li>\n<li>Specify the classdumpdir option of the JaCoCo agent and use the dumped classes at report generation. Note that only loaded classes will be dumped, i.e. classes not executed at all will not show-up in your report as not covered.</li>\n<li>Use offline instrumentation before you run your tests. This way classes get instrumented by JaCoCo before any runtime modification can take place. Note that in this case the report has to be generated with the original classes, not with instrumented ones.</li>\n</ul>\n\n<p><strong>Edited on 22-02-2017</strong></p>\n\n<p><strong>How to use Offline Instrumentation:</strong>\nUse below task provided by <a href=\"https://discuss.gradle.org/t/jacoco-offline-instrumentation-in-gradle/9996/2\" rel=\"noreferrer\">Daniel Atallah</a>.</p>\n\n<pre><code>//Additional SourceSets can be added to the jacocoOfflineSourceSets as needed by \nproject.ext.jacocoOfflineSourceSets = [ 'main' ]\ntask doJacocoOfflineInstrumentation(dependsOn: [ classes, project.configurations.jacocoAnt ]) {\n    inputs.files classes.outputs.files\n    File outputDir = new File(project.buildDir, 'instrumentedClasses')\n    outputs.dir outputDir\n    doFirst {\n        project.delete(outputDir)\n        ant.taskdef(\n            resource: 'org/jacoco/ant/antlib.xml',\n            classpath: project.configurations.jacocoAnt.asPath,\n            uri: 'jacoco'\n        )\n        def instrumented = false\n        jacocoOfflineSourceSets.each { sourceSetName -&gt;\n            if (file(sourceSets[sourceSetName].output.classesDir).exists()) {\n                def instrumentedClassedDir = \"${outputDir}/${sourceSetName}\"\n                ant.'jacoco:instrument'(destdir: instrumentedClassedDir) {\n                    fileset(dir: sourceSets[sourceSetName].output.classesDir, includes: '**/*.class')\n                }\n                //Replace the classes dir in the test classpath with the instrumented one\n                sourceSets.test.runtimeClasspath -= files(sourceSets[sourceSetName].output.classesDir)\n                sourceSets.test.runtimeClasspath += files(instrumentedClassedDir)\n                instrumented = true\n            }\n        }\n        if (instrumented) {\n            //Disable class verification based on https://github.com/jayway/powermock/issues/375\n            test.jvmArgs += '-noverify'\n        }\n    }\n}\ntest.dependsOn doJacocoOfflineInstrumentation\n</code></pre>\n\n<p>Now generate report using <code>\"gradlew test jacocoTestReport\"</code> command.</p>\n"},{"tags":[],"owner":{"account_id":3062063,"reputation":1352,"user_id":2594494,"accept_rate":27,"display_name":"Calicoder"},"down_vote_count":1,"up_vote_count":5,"is_accepted":false,"score":4,"last_activity_date":1609893390,"creation_date":1609893390,"answer_id":65588594,"question_id":31720139,"body_markdown":"I have noticed that this happens if a class you want to report code coverage for has its static initialization suppressed by Mockito with PowerMockito in your JUnit test. For example, if your test class looks like:\r\n\r\n\r\n    @SuppressStaticInitializationFor(\r\n            {&quot;com.yourpkg.A&quot;,\r\n            &quot;com.yourpkg.B&quot;})\r\n    public class Test {\r\n         @Test\r\n         public void Test() { }\r\n    }\r\n\r\n\r\nThe error when you test will be something like:\r\n\r\n\r\n    Classes in bundle &#39;yourProject&#39; do not match with execution data. \r\n    For report generation the same class files must be used as at runtime. \r\n    Execution data for class com/yourpkg/A does not match. \r\n    Execution data for class com/yourpkg/B does not match.","title":"jacoco code coverage report generator showing error : &quot;Classes in bundle &#39;Code Coverage Report&#39; do no match with execution data&quot;","body":"<p>I have noticed that this happens if a class you want to report code coverage for has its static initialization suppressed by Mockito with PowerMockito in your JUnit test. For example, if your test class looks like:</p>\n<pre><code>@SuppressStaticInitializationFor(\n        {&quot;com.yourpkg.A&quot;,\n        &quot;com.yourpkg.B&quot;})\npublic class Test {\n     @Test\n     public void Test() { }\n}\n</code></pre>\n<p>The error when you test will be something like:</p>\n<pre><code>Classes in bundle 'yourProject' do not match with execution data. \nFor report generation the same class files must be used as at runtime. \nExecution data for class com/yourpkg/A does not match. \nExecution data for class com/yourpkg/B does not match.\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1172561,"reputation":5924,"user_id":1149398,"accept_rate":100,"display_name":"sud007"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1637594910,"creation_date":1637594910,"answer_id":70068263,"question_id":31720139,"body_markdown":"Various answers with deep insights, but still I will share what worked for me after 2 days of fiddling with the setup.\r\n- I am using Azure Devops for git.\r\n\r\nSo as per the code setup guideline, it says that you need to run the analysis task after your build task. And this was the step I was completely missing.\r\n\r\nHere is how my task sequence looked before\r\n\r\n     - task: Gradle@2\r\n        inputs:\r\n          gradleWrapperFile: &#39;gradlew&#39;\r\n          tasks: &#39;--build-cache jacocoTestReport SonarQube&#39;\r\n          options: &#39;-PversionName=$(Build.BuildNumber) -PversionCode=$(Build.BuildId) -Porg.gradle.parallel=true&#39;\r\n          publishJUnitResults: true\r\n          testResultsFiles: &#39;**/TEST-*.xml&#39;\r\n          javaHomeOption: &#39;JDKVersion&#39;\r\n          jdkVersionOption: &#39;1.11&#39;\r\n          gradleOptions: &#39;-Xmx4096m&#39;\r\n          sonarQubeRunAnalysis: false\r\n        continueOnError: true\r\n        displayName: &quot;Run Quality Scan and upload&quot;\r\n        env:\r\n          SONAR_LOGIN: $(sonar-login)\r\n          BRANCH_NAME: $(Build.SourceBranchName)\r\n          \r\n      - task: Gradle@2\r\n        condition: in(variables[&#39;Build.SourceBranchName&#39;], &#39;develop&#39;)\r\n        inputs:\r\n          gradleWrapperFile: &#39;gradlew&#39;\r\n          tasks: &#39;--build-cache build publishAllPublicationsToMyDigitalRepository&#39;\r\n          options: &#39;-PversionName=$(Build.BuildNumber) -PversionCode=$(Build.BuildId) -PsecureSign&#39;\r\n          publishJUnitResults: true\r\n          testResultsFiles: &#39;**/TEST-*.xml&#39;\r\n          javaHomeOption: &#39;JDKVersion&#39;\r\n          jdkVersionOption: &#39;1.11&#39;\r\n          gradleOptions: &#39;-Xmx4096m&#39;\r\n          sonarQubeRunAnalysis: false\r\n        env:\r\n          SDK_NAME: &#39;iphoneos&#39;\r\n        continueOnError: false\r\n        displayName: &quot;Build &amp; publish library&quot;\r\n\r\nAnd here is how it looked after the repositioning\r\n\r\n      - task: Gradle@2\r\n        condition: in(variables[&#39;Build.SourceBranchName&#39;], &#39;develop&#39;)\r\n        inputs:\r\n          gradleWrapperFile: &#39;gradlew&#39;\r\n          tasks: &#39;--build-cache build publishAllPublicationsToMyDigitalRepository&#39;\r\n          options: &#39;-PversionName=$(Build.BuildNumber) -PversionCode=$(Build.BuildId) -PsecureSign&#39;\r\n          publishJUnitResults: true\r\n          testResultsFiles: &#39;**/TEST-*.xml&#39;\r\n          javaHomeOption: &#39;JDKVersion&#39;\r\n          jdkVersionOption: &#39;1.11&#39;\r\n          gradleOptions: &#39;-Xmx4096m&#39;\r\n          sonarQubeRunAnalysis: false\r\n        env:\r\n          SDK_NAME: &#39;iphoneos&#39;\r\n        continueOnError: false\r\n        displayName: &quot;Build &amp; publish library&quot;\r\n    \r\n      - task: Gradle@2\r\n        inputs:\r\n          gradleWrapperFile: &#39;gradlew&#39;\r\n          tasks: &#39;--build-cache jacocoTestReport SonarQube&#39;\r\n          options: &#39;-PversionName=$(Build.BuildNumber) -PversionCode=$(Build.BuildId) -Porg.gradle.parallel=true&#39;\r\n          publishJUnitResults: true\r\n          testResultsFiles: &#39;**/TEST-*.xml&#39;\r\n          javaHomeOption: &#39;JDKVersion&#39;\r\n          jdkVersionOption: &#39;1.11&#39;\r\n          gradleOptions: &#39;-Xmx4096m&#39;\r\n          sonarQubeRunAnalysis: false\r\n        continueOnError: true\r\n        displayName: &quot;Run Quality Scan and upload&quot;\r\n        env:\r\n          SONAR_LOGIN: $(sonar-login)\r\n          BRANCH_NAME: $(Build.SourceBranchName)\r\n\r\nSo in essence I learned a few things, out of context here but most important one was.\r\n- right order of tasks\r\n- and for Sonar to correctly find those files was, to have that build available.","title":"jacoco code coverage report generator showing error : &quot;Classes in bundle &#39;Code Coverage Report&#39; do no match with execution data&quot;","body":"<p>Various answers with deep insights, but still I will share what worked for me after 2 days of fiddling with the setup.</p>\n<ul>\n<li>I am using Azure Devops for git.</li>\n</ul>\n<p>So as per the code setup guideline, it says that you need to run the analysis task after your build task. And this was the step I was completely missing.</p>\n<p>Here is how my task sequence looked before</p>\n<pre><code> - task: Gradle@2\n    inputs:\n      gradleWrapperFile: 'gradlew'\n      tasks: '--build-cache jacocoTestReport SonarQube'\n      options: '-PversionName=$(Build.BuildNumber) -PversionCode=$(Build.BuildId) -Porg.gradle.parallel=true'\n      publishJUnitResults: true\n      testResultsFiles: '**/TEST-*.xml'\n      javaHomeOption: 'JDKVersion'\n      jdkVersionOption: '1.11'\n      gradleOptions: '-Xmx4096m'\n      sonarQubeRunAnalysis: false\n    continueOnError: true\n    displayName: &quot;Run Quality Scan and upload&quot;\n    env:\n      SONAR_LOGIN: $(sonar-login)\n      BRANCH_NAME: $(Build.SourceBranchName)\n      \n  - task: Gradle@2\n    condition: in(variables['Build.SourceBranchName'], 'develop')\n    inputs:\n      gradleWrapperFile: 'gradlew'\n      tasks: '--build-cache build publishAllPublicationsToMyDigitalRepository'\n      options: '-PversionName=$(Build.BuildNumber) -PversionCode=$(Build.BuildId) -PsecureSign'\n      publishJUnitResults: true\n      testResultsFiles: '**/TEST-*.xml'\n      javaHomeOption: 'JDKVersion'\n      jdkVersionOption: '1.11'\n      gradleOptions: '-Xmx4096m'\n      sonarQubeRunAnalysis: false\n    env:\n      SDK_NAME: 'iphoneos'\n    continueOnError: false\n    displayName: &quot;Build &amp; publish library&quot;\n</code></pre>\n<p>And here is how it looked after the repositioning</p>\n<pre><code>  - task: Gradle@2\n    condition: in(variables['Build.SourceBranchName'], 'develop')\n    inputs:\n      gradleWrapperFile: 'gradlew'\n      tasks: '--build-cache build publishAllPublicationsToMyDigitalRepository'\n      options: '-PversionName=$(Build.BuildNumber) -PversionCode=$(Build.BuildId) -PsecureSign'\n      publishJUnitResults: true\n      testResultsFiles: '**/TEST-*.xml'\n      javaHomeOption: 'JDKVersion'\n      jdkVersionOption: '1.11'\n      gradleOptions: '-Xmx4096m'\n      sonarQubeRunAnalysis: false\n    env:\n      SDK_NAME: 'iphoneos'\n    continueOnError: false\n    displayName: &quot;Build &amp; publish library&quot;\n\n  - task: Gradle@2\n    inputs:\n      gradleWrapperFile: 'gradlew'\n      tasks: '--build-cache jacocoTestReport SonarQube'\n      options: '-PversionName=$(Build.BuildNumber) -PversionCode=$(Build.BuildId) -Porg.gradle.parallel=true'\n      publishJUnitResults: true\n      testResultsFiles: '**/TEST-*.xml'\n      javaHomeOption: 'JDKVersion'\n      jdkVersionOption: '1.11'\n      gradleOptions: '-Xmx4096m'\n      sonarQubeRunAnalysis: false\n    continueOnError: true\n    displayName: &quot;Run Quality Scan and upload&quot;\n    env:\n      SONAR_LOGIN: $(sonar-login)\n      BRANCH_NAME: $(Build.SourceBranchName)\n</code></pre>\n<p>So in essence I learned a few things, out of context here but most important one was.</p>\n<ul>\n<li>right order of tasks</li>\n<li>and for Sonar to correctly find those files was, to have that build available.</li>\n</ul>\n"},{"tags":[],"owner":{"account_id":26863437,"reputation":1,"user_id":20446541,"display_name":"Josh"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1667888101,"creation_date":1667888082,"answer_id":74356391,"question_id":31720139,"body_markdown":"After adding offline instrumentation, coverage was proper but I started getting **class is already instrumented** message. Adding this in build.gradle helps.\r\n\r\n````\r\ntest {\r\n    jacoco {\r\n        excludes = [&#39;{package_path}&#39;]     //package_path like &#39;*com/**&#39;\r\n    }\r\n}\r\n````","title":"jacoco code coverage report generator showing error : &quot;Classes in bundle &#39;Code Coverage Report&#39; do no match with execution data&quot;","body":"<p>After adding offline instrumentation, coverage was proper but I started getting <strong>class is already instrumented</strong> message. Adding this in build.gradle helps.</p>\n<pre><code>test {\n    jacoco {\n        excludes = ['{package_path}']     //package_path like '*com/**'\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":3455742,"reputation":2315,"user_id":2894309,"accept_rate":56,"display_name":"Nishant Lakhara"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":40996,"favorite_count":0,"down_vote_count":0,"up_vote_count":37,"answer_count":5,"score":37,"last_activity_date":1675191228,"creation_date":1438248930,"question_id":31720139,"body_markdown":"I am generating jacoco report by using jacoco:report tag.\r\nI am getting errors like : \r\n\r\n    [jacoco:report] Classes in bundle &#39;Code Coverage Report&#39; do no match with execution data. For report generation the same class files must be used as at runtime.\r\n    [jacoco:report] Execution data for class xxxxx does not match.\r\n    [jacoco:report] Execution data for class yyyyy does not match.\r\n\r\nThe ant report target looks like : \r\n\r\n    &lt;target name=&quot;report&quot;&gt;\r\n                    &lt;jacoco:report&gt;\r\n                            &lt;executiondata&gt;\r\n                                    &lt;file file=&quot;${jacocoexec.dir}/${jacocoexec.filename}&quot;/&gt;\r\n                            &lt;/executiondata&gt;\r\n                            &lt;!-- the class files and optional source files ... --&gt;\r\n                            &lt;structure name=&quot;Code Coverage Report&quot;&gt;\r\n                                    &lt;classfiles&gt;\r\n                                            &lt;fileset file=&quot;./jar/abc.jar&quot;/&gt;\r\n                                    &lt;/classfiles&gt;\r\n                                    &lt;sourcefiles&gt;\r\n                                   \t      &lt;fileset dir=&quot;./code/src&quot;/&gt;\r\n                                    &lt;/sourcefiles&gt;\r\n                            &lt;/structure&gt;\r\n                            &lt;!-- to produce reports in different formats. --&gt;\r\n                            &lt;html destdir=&quot;${jacoco.report.dir}&quot;/&gt;\r\n                    &lt;/jacoco:report&gt;\r\n            &lt;/target&gt;\r\n\r\nThe `abc.jar` so generated is by using `./code/src` only. Then why is it giving such errors. Any idea?","title":"jacoco code coverage report generator showing error : &quot;Classes in bundle &#39;Code Coverage Report&#39; do no match with execution data&quot;","body":"<p>I am generating jacoco report by using jacoco:report tag.\nI am getting errors like : </p>\n\n<pre><code>[jacoco:report] Classes in bundle 'Code Coverage Report' do no match with execution data. For report generation the same class files must be used as at runtime.\n[jacoco:report] Execution data for class xxxxx does not match.\n[jacoco:report] Execution data for class yyyyy does not match.\n</code></pre>\n\n<p>The ant report target looks like : </p>\n\n<pre><code>&lt;target name=\"report\"&gt;\n                &lt;jacoco:report&gt;\n                        &lt;executiondata&gt;\n                                &lt;file file=\"${jacocoexec.dir}/${jacocoexec.filename}\"/&gt;\n                        &lt;/executiondata&gt;\n                        &lt;!-- the class files and optional source files ... --&gt;\n                        &lt;structure name=\"Code Coverage Report\"&gt;\n                                &lt;classfiles&gt;\n                                        &lt;fileset file=\"./jar/abc.jar\"/&gt;\n                                &lt;/classfiles&gt;\n                                &lt;sourcefiles&gt;\n                                      &lt;fileset dir=\"./code/src\"/&gt;\n                                &lt;/sourcefiles&gt;\n                        &lt;/structure&gt;\n                        &lt;!-- to produce reports in different formats. --&gt;\n                        &lt;html destdir=\"${jacoco.report.dir}\"/&gt;\n                &lt;/jacoco:report&gt;\n        &lt;/target&gt;\n</code></pre>\n\n<p>The <code>abc.jar</code> so generated is by using <code>./code/src</code> only. Then why is it giving such errors. Any idea?</p>\n"},{"tags":["java","netbeans","glassfish","build-impl.xml"],"comments":[{"owner":{"account_id":8269753,"reputation":21,"user_id":6217820,"display_name":"Vitor Cardoso"},"score":0,"creation_date":1462635633,"post_id":37084844,"comment_id":61724597,"body_markdown":"Problem resolved, i included a servlet-mapping in WEB.XML but don&#39;t included the servelet-class reference.","body":"Problem resolved, i included a servlet-mapping in WEB.XML but don&#39;t included the servelet-class reference."}],"answers":[{"tags":[],"owner":{"account_id":7813124,"reputation":715,"user_id":5908729,"accept_rate":48,"display_name":"sql_dummy"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1525500795,"creation_date":1525500795,"answer_id":50186341,"question_id":37084844,"body_markdown":"This could also happen if you do not properly configure servlets in deployment descriptor \r\n\r\nExample: notice servlet names are different\r\n\r\n\r\n    &lt;servlet&gt;\r\n        &lt;servlet-name&gt;abcd&lt;/servlet-name&gt;\r\n        &lt;servlet-class&gt;xxx&lt;/servlet-class&gt;\r\n    &lt;/servlet&gt; \r\n\r\n    &lt;servlet-mapping&gt;\r\n        &lt;servlet-name&gt;abc&lt;/servlet-name&gt;\r\n        &lt;url-pattern&gt;/xxx&lt;/url-pattern&gt;\r\n    &lt;/servlet-mapping&gt;\r\n\r\n","title":"build-impl.xml:1045: The module has not been deployed","body":"<p>This could also happen if you do not properly configure servlets in deployment descriptor </p>\n\n<p>Example: notice servlet names are different</p>\n\n<pre><code>&lt;servlet&gt;\n    &lt;servlet-name&gt;abcd&lt;/servlet-name&gt;\n    &lt;servlet-class&gt;xxx&lt;/servlet-class&gt;\n&lt;/servlet&gt; \n\n&lt;servlet-mapping&gt;\n    &lt;servlet-name&gt;abc&lt;/servlet-name&gt;\n    &lt;url-pattern&gt;/xxx&lt;/url-pattern&gt;\n&lt;/servlet-mapping&gt;\n</code></pre>\n"}],"owner":{"account_id":8269753,"reputation":21,"user_id":6217820,"display_name":"Vitor Cardoso"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":6536,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1675191062,"creation_date":1462598764,"question_id":37084844,"body_markdown":"I&#39;ve a problem on Netbeans, after any sucessfully deploys, they show me this msg:\r\n\r\nbuild-impl.xml:1045: The module has not been deployed.\r\n\r\nI&#39;been restart netbeans any times and change debugmode to TRUE but the problem continue.\r\n\r\nIt&#39;s the line 1045 by build-impl.xml:\r\n\r\n    1044 &lt;target if=&quot;netbeans.home&quot; name=&quot;-run-deploy-nb&quot;&gt;\r\n    1045        &lt;nbdeploy clientUrlPart=&quot;${client.urlPart}&quot; debugmode=&quot;true&quot; forceRedeploy=&quot;${forceRedeploy}&quot;/&gt;\r\n    1046    &lt;/target&gt;\r\n\r\nHelp me, Thanks!!\r\n","title":"build-impl.xml:1045: The module has not been deployed","body":"<p>I've a problem on Netbeans, after any sucessfully deploys, they show me this msg:</p>\n\n<p>build-impl.xml:1045: The module has not been deployed.</p>\n\n<p>I'been restart netbeans any times and change debugmode to TRUE but the problem continue.</p>\n\n<p>It's the line 1045 by build-impl.xml:</p>\n\n<pre><code>1044 &lt;target if=\"netbeans.home\" name=\"-run-deploy-nb\"&gt;\n1045        &lt;nbdeploy clientUrlPart=\"${client.urlPart}\" debugmode=\"true\" forceRedeploy=\"${forceRedeploy}\"/&gt;\n1046    &lt;/target&gt;\n</code></pre>\n\n<p>Help me, Thanks!!</p>\n"},{"tags":["java","inkscape","batik"],"owner":{"account_id":2142244,"reputation":2287,"user_id":1900620,"accept_rate":41,"display_name":"Thiago Say&#227;o"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":57,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1675190853,"creation_date":1675190853,"question_id":75301814,"body_markdown":"I am using Inkscape with the &quot;Flow into frame&quot; feature - it fits the text into a frame:\r\n\r\n[![InkScape][1]][1]\r\n\r\nThe plan is to have an poster where the text is batch-editable. I want to open the `.svg` file, set the text on the limited area and save into pdf (the pdf save process is working).\r\n\r\nThe problem is Inkscape calculates the breaks (`&lt;tspan&gt;`) and saves it on the file:\r\n\r\n    &lt;g\r\n         inkscape:label=&quot;Layer 1&quot;\r\n         inkscape:groupmode=&quot;layer&quot;\r\n         id=&quot;layer1&quot;&gt;\r\n        &lt;rect\r\n           style=&quot;fill:#000000;fill-opacity:0;stroke-width:1.18454&quot;\r\n           id=&quot;rect234&quot;\r\n           width=&quot;142.12402&quot;\r\n           height=&quot;49.014164&quot;\r\n           x=&quot;12.008593&quot;\r\n           y=&quot;22.947208&quot; /&gt;\r\n        &lt;text\r\n           xml:space=&quot;preserve&quot;\r\n           style=&quot;font-size:19.7556px;font-family:sans-serif;-inkscape-font-specification:&#39;sans-serif, Normal&#39;;text-align:center;white-space:pre;shape-inside:url(#rect234);fill:#000000;fill-opacity:1;stroke-width:0.264583&quot;\r\n           x=&quot;108.87433&quot;\r\n           y=&quot;36.942204&quot;\r\n           id=&quot;text290&quot;&gt;&lt;tspan\r\n             x=&quot;20.441781&quot;\r\n             y=&quot;40.426341&quot;\r\n             id=&quot;tspan473&quot;&gt;Text that will &lt;/tspan&gt;&lt;tspan\r\n             x=&quot;59.340441&quot;\r\n             y=&quot;65.120841&quot;\r\n             id=&quot;tspan475&quot;&gt;span&lt;/tspan&gt;&lt;/text&gt;\r\n      &lt;/g&gt; \r\n\r\nSo it&#39;s not possible just to replace the text and render to a pdf.\r\n\r\n\r\n    String parser = XMLResourceDescriptor.getXMLParserClassName();\r\n    SAXSVGDocumentFactory f = new SAXSVGDocumentFactory(parser);\r\n    Document doc = f.createDocument(&quot;test.svg&quot;);\r\n    Element element = doc.getElementById(&quot;id&quot;);\r\n    \r\n    ...\r\n    \r\n    Transcoder transcoder = new PDFTranscoder();\r\n    var transcoderInput = new TranscoderInput(doc);\r\n    var transcoderOutput = new TranscoderOutput(new FileOutputStream(&quot;out.pdf&quot;));\r\n    transcoder.transcode(transcoderInput, transcoderOutput);\r\n\r\nIs there a way with Batik to define the bounds and auto-span the text?\r\n\r\n  [1]: https://i.stack.imgur.com/EYQTJ.png\r\n\r\n\r\n","title":"Batik: How to edit text and keep it inside an area with spans?","body":"<p>I am using Inkscape with the &quot;Flow into frame&quot; feature - it fits the text into a frame:</p>\n<p><a href=\"https://i.stack.imgur.com/EYQTJ.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/EYQTJ.png\" alt=\"InkScape\" /></a></p>\n<p>The plan is to have an poster where the text is batch-editable. I want to open the <code>.svg</code> file, set the text on the limited area and save into pdf (the pdf save process is working).</p>\n<p>The problem is Inkscape calculates the breaks (<code>&lt;tspan&gt;</code>) and saves it on the file:</p>\n<pre><code>&lt;g\n     inkscape:label=&quot;Layer 1&quot;\n     inkscape:groupmode=&quot;layer&quot;\n     id=&quot;layer1&quot;&gt;\n    &lt;rect\n       style=&quot;fill:#000000;fill-opacity:0;stroke-width:1.18454&quot;\n       id=&quot;rect234&quot;\n       width=&quot;142.12402&quot;\n       height=&quot;49.014164&quot;\n       x=&quot;12.008593&quot;\n       y=&quot;22.947208&quot; /&gt;\n    &lt;text\n       xml:space=&quot;preserve&quot;\n       style=&quot;font-size:19.7556px;font-family:sans-serif;-inkscape-font-specification:'sans-serif, Normal';text-align:center;white-space:pre;shape-inside:url(#rect234);fill:#000000;fill-opacity:1;stroke-width:0.264583&quot;\n       x=&quot;108.87433&quot;\n       y=&quot;36.942204&quot;\n       id=&quot;text290&quot;&gt;&lt;tspan\n         x=&quot;20.441781&quot;\n         y=&quot;40.426341&quot;\n         id=&quot;tspan473&quot;&gt;Text that will &lt;/tspan&gt;&lt;tspan\n         x=&quot;59.340441&quot;\n         y=&quot;65.120841&quot;\n         id=&quot;tspan475&quot;&gt;span&lt;/tspan&gt;&lt;/text&gt;\n  &lt;/g&gt; \n</code></pre>\n<p>So it's not possible just to replace the text and render to a pdf.</p>\n<pre><code>String parser = XMLResourceDescriptor.getXMLParserClassName();\nSAXSVGDocumentFactory f = new SAXSVGDocumentFactory(parser);\nDocument doc = f.createDocument(&quot;test.svg&quot;);\nElement element = doc.getElementById(&quot;id&quot;);\n\n...\n\nTranscoder transcoder = new PDFTranscoder();\nvar transcoderInput = new TranscoderInput(doc);\nvar transcoderOutput = new TranscoderOutput(new FileOutputStream(&quot;out.pdf&quot;));\ntranscoder.transcode(transcoderInput, transcoderOutput);\n</code></pre>\n<p>Is there a way with Batik to define the bounds and auto-span the text?</p>\n"},{"tags":["java","ant","bytecode","interpreter","jacoco"],"comments":[{"owner":{"account_id":322516,"reputation":121953,"user_id":641955,"accept_rate":72,"display_name":"janos"},"score":2,"creation_date":1499438292,"post_id":44776226,"comment_id":76921955,"body_markdown":"Hi, I rolled back your edit because it&#39;s a completely different question and invalidates the answer you received. You should ask a new question, ideally including a [MCVE](https://stackoverflow.com/help/mcve)","body":"Hi, I rolled back your edit because it&#39;s a completely different question and invalidates the answer you received. You should ask a new question, ideally including a <a href=\"https://stackoverflow.com/help/mcve\">MCVE</a>"}],"answers":[{"tags":[],"owner":{"account_id":88629,"reputation":9961,"user_id":244993,"display_name":"Godin"},"down_vote_count":0,"up_vote_count":16,"is_accepted":true,"score":16,"last_activity_date":1498837425,"creation_date":1498837063,"answer_id":44850229,"question_id":44776226,"body_markdown":"&gt; Will there be any difference in the bytecode generated by compilers based on jdk 1.8.0_101 and jdk 1.8.0_111? Can incremental updates change bytecode? Or is the difference only significant during major version updates?\r\n\r\nYes - in general any different versions (without exceptions) of compilers can generate different bits of bytecode.\r\n\r\n&gt; Why am I still getting this error even after offline instrumentation has been implemented? Am I missing out on any declaration in the code?\r\n\r\nThe message itself is already perfectly explained in SO question to which you refer: https://stackoverflow.com/questions/31720139/jacoco-code-coverage-report-generator-showing-error-classes-in-bundle-code-c\r\n\r\nMore precise answers require a Minimal, **Complete**, and **Verifiable** example (https://stackoverflow.com/help/mcve) to be provided by you, and unfortunately in my opinion just excerpt of `build.xml` with some comments is not **Complete** and **Verifiable** example. And not clear which role Eclipse is playing here in addition to JDK. By the way Eclipse has and uses its own Eclipse Java Compiler.\r\n\r\n&gt; I&#39;ve also noticed that the number of classes being instrumented(614) differs from the number of classes being added to the Test bundle (566) when both contain the same classpaths. Could that be of any consequence?\r\n\r\nYes - consequence is that what was instrumented is not the same as what was analyzed for generation of report. Which also correlates with messages about mismatch.\r\n","title":"Execution data for class does not match + Jacoco","body":"<blockquote>\n  <p>Will there be any difference in the bytecode generated by compilers based on jdk 1.8.0_101 and jdk 1.8.0_111? Can incremental updates change bytecode? Or is the difference only significant during major version updates?</p>\n</blockquote>\n\n<p>Yes - in general any different versions (without exceptions) of compilers can generate different bits of bytecode.</p>\n\n<blockquote>\n  <p>Why am I still getting this error even after offline instrumentation has been implemented? Am I missing out on any declaration in the code?</p>\n</blockquote>\n\n<p>The message itself is already perfectly explained in SO question to which you refer: <a href=\"https://stackoverflow.com/questions/31720139/jacoco-code-coverage-report-generator-showing-error-classes-in-bundle-code-c\">jacoco code coverage report generator showing error : &quot;Classes in bundle &#39;Code Coverage Report&#39; do no match with execution data&quot;</a></p>\n\n<p>More precise answers require a Minimal, <strong>Complete</strong>, and <strong>Verifiable</strong> example (<a href=\"https://stackoverflow.com/help/mcve\">https://stackoverflow.com/help/mcve</a>) to be provided by you, and unfortunately in my opinion just excerpt of <code>build.xml</code> with some comments is not <strong>Complete</strong> and <strong>Verifiable</strong> example. And not clear which role Eclipse is playing here in addition to JDK. By the way Eclipse has and uses its own Eclipse Java Compiler.</p>\n\n<blockquote>\n  <p>I've also noticed that the number of classes being instrumented(614) differs from the number of classes being added to the Test bundle (566) when both contain the same classpaths. Could that be of any consequence?</p>\n</blockquote>\n\n<p>Yes - consequence is that what was instrumented is not the same as what was analyzed for generation of report. Which also correlates with messages about mismatch.</p>\n"},{"tags":[],"owner":{"account_id":231844,"reputation":15697,"user_id":496289,"accept_rate":86,"display_name":"Kashyap"},"down_vote_count":0,"up_vote_count":9,"is_accepted":false,"score":9,"last_activity_date":1556225633,"creation_date":1556225633,"answer_id":55857472,"question_id":44776226,"body_markdown":"&gt; 2.Why am I still getting this error even after offline instrumentation has been implemented? Am I missing out on any declaration in the code? I&#39;ve tried to keep the format of the code as similar to that of the example provided in the jacoco documentation here.\r\n\r\nI&#39;ve noticed this when the class under test is added to [PrepareForTest annotation][1] in it&#39;s test class.\r\n\r\nE.g. in following situation, Foo.java will have 0 coverage with error `Execution data for class Foo does not match.`.\r\n\r\n    @PrepareForTest({ Foo.class })\r\n    public class FooTest {\r\n      \r\n      @Test\r\n      public void test1() {\r\n        Foo f = new Foo();\r\n        String result = f.doSomething();\r\n        assertEquals(expectedResult, result);\r\n      }\r\n    \r\n    }\r\n\r\n\r\n\r\n  [1]: https://static.javadoc.io/org.powermock/powermock-core/1.6.5/org/powermock/core/classloader/annotations/PrepareForTest.html","title":"Execution data for class does not match + Jacoco","body":"<blockquote>\n  <p>2.Why am I still getting this error even after offline instrumentation has been implemented? Am I missing out on any declaration in the code? I've tried to keep the format of the code as similar to that of the example provided in the jacoco documentation here.</p>\n</blockquote>\n\n<p>I've noticed this when the class under test is added to <a href=\"https://static.javadoc.io/org.powermock/powermock-core/1.6.5/org/powermock/core/classloader/annotations/PrepareForTest.html\" rel=\"noreferrer\">PrepareForTest annotation</a> in it's test class.</p>\n\n<p>E.g. in following situation, Foo.java will have 0 coverage with error <code>Execution data for class Foo does not match.</code>.</p>\n\n<pre><code>@PrepareForTest({ Foo.class })\npublic class FooTest {\n\n  @Test\n  public void test1() {\n    Foo f = new Foo();\n    String result = f.doSomething();\n    assertEquals(expectedResult, result);\n  }\n\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":9095918,"reputation":14433,"user_id":6769908,"accept_rate":91,"display_name":"Amir Ziarati"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1675190826,"creation_date":1675190826,"answer_id":75301811,"question_id":44776226,"body_markdown":"Basically any difference between the bytecodes that tests were run against vs the bytecodes jacoco picks up to calculate coverage with, would cause this. some examples are **minifying and obfuscation**, using **different jvms for different steps** and any type of **bytecode level manipulation**. \r\n\r\nin my case firebase was doing some bytecode manipulation. there is a ticket filed [here][1].\r\n\r\n\r\n  [1]: https://github.com/firebase/firebase-android-sdk/issues/3948\r\n\r\nyou will need to downgrade to a version of firebase + AGP that does not have this issue.","title":"Execution data for class does not match + Jacoco","body":"<p>Basically any difference between the bytecodes that tests were run against vs the bytecodes jacoco picks up to calculate coverage with, would cause this. some examples are <strong>minifying and obfuscation</strong>, using <strong>different jvms for different steps</strong> and any type of <strong>bytecode level manipulation</strong>.</p>\n<p>in my case firebase was doing some bytecode manipulation. there is a ticket filed <a href=\"https://github.com/firebase/firebase-android-sdk/issues/3948\" rel=\"nofollow noreferrer\">here</a>.</p>\n<p>you will need to downgrade to a version of firebase + AGP that does not have this issue.</p>\n"}],"owner":{"account_id":9654692,"reputation":404,"user_id":8095733,"display_name":"xmacz"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":39774,"favorite_count":0,"down_vote_count":0,"up_vote_count":18,"accepted_answer_id":44850229,"answer_count":3,"score":18,"last_activity_date":1675190826,"creation_date":1498554284,"question_id":44776226,"body_markdown":"I&#39;m using **Jacoco** to find the code coverage of unit tests with **ANT** but the report isn&#39;t generated and I get this error sequence:\r\n\r\n    [jacoco:report] Loading execution data file C:\\JUnit\\apache-ant-1.10.1\\jacoco.ex\r\n    ec\r\n    \r\n    [jacoco:report] Writing bundle &#39;Test&#39; with 566 classes\r\n    \r\n    [jacoco:report] Classes in bundle &#39;Test&#39; do no match with execution data. For report generation the same class files must be used as at runtime.\r\n    \r\n    [jacoco:report] Execution data for class com/!!/AccountDetails does not match.\r\n    \r\n    [jacoco:report] Execution data for class com/!!/DataExtractorHelper does not match.\r\n    \r\n    [jacoco:report] Execution data for class com/!!/WelcomeLetter does not match.\r\n    \r\n    [jacoco:report] Execution data for class com/!!/WelcomeLetterABCD does not match.\r\n\r\n\r\n**I&#39;ve read these answers but none seemed to help me solve the problem.**\r\n\r\nhttps://stackoverflow.com/questions/31720139/jacoco-code-coverage-report-generator-showing-error-classes-in-bundle-code-c\r\n\r\nhttps://stackoverflow.com/questions/33517805/jacoco-for-report-generation-the-same-class-files-must-be-used-as-at-runtime\r\n\r\nI compiled all classes on Eclipse and used the ANT build tool to perform code coverage on these classes. I do make use of some external jars due to some dependencies and they&#39;ve been compiled on jdk 1.8.0_101 and I&#39;m using jdk 1.8.0_111 (I tried solving this error by using jdk 1.8.0_101 but I got the same errors) \r\n\r\nIt has been mentioned that the class ID might change in Eclipse vs Oracle JDK compilation. Therefore I also checked this case by compiling some basic classes on Eclipse and used the jdk + ANT to find the code coverage. It worked in this case. There is no compilation taking place in the code coverage task. The .class files just need to be checked for coverage. \r\n\r\nAll the classes mentioned in the errors have been compiled on eclipse before testing for the code coverage.\r\n\r\nI&#39;ve **tried using the offline instrumentation** tool as a workaround to the persistence framework being used but it still gives me these errors.\r\n**All the classes mentioned above in the errors are present in the Instrumented classes folder.** ${dest.dir}\r\n\r\nThis is my build.xml at the moment.\r\n\r\n    &lt;target name=&quot;instrument&quot;&gt;\r\n    \t&lt;delete dir=&quot;${dest.dir}&quot;/&gt;\r\n    \t&lt;mkdir dir=&quot;${dest.dir}&quot;/&gt;\r\n    \t&lt;jacoco:instrument destdir=&quot;${dest.dir}&quot;&gt;\r\n    \t\t&lt;fileset file=&quot;D:/NEON/HW/!!/module/!!/bin&quot; includes=&quot;**/*.class&quot;/&gt;\r\n    \t\t&lt;fileset file=&quot;D:/NEON/HW/!!/testprojects/!!/bin&quot; includes=&quot;**/*.class&quot;/&gt;\r\n    \t&lt;/jacoco:instrument&gt;\r\n    &lt;/target&gt;\r\n    \r\n    \r\n    &lt;target name=&quot;cov-test&quot; depends=&quot;instrument&quot;&gt;\r\n    \t&lt;mkdir dir=&quot;${report.dir}&quot;/&gt;\t\r\n    \t&lt;jacoco:coverage&gt;\r\n    \t\t&lt;junit fork=&quot;true&quot; forkmode=&quot;once&quot; showoutput=&quot;true&quot; printsummary=&quot;on&quot; enabletestlistenerevents=&quot;true&quot;&gt;\r\n    \r\n    \t\t\t&lt;classpath&gt;\r\n    \t\t\t\t&lt;path refid=&quot;ALL.jars&quot;/&gt;\r\n    \t\t\t\t&lt;path refid=&quot;classpath&quot;/&gt;\r\n    \t\t\t\t&lt;pathelement location=&quot;C:/JUnit/jacoco-0.7.9/lib/jacocoagent.jar&quot;/&gt;\r\n    \t\t\t\t&lt;pathelement location=&quot;C:/JUnit/JARS/!!/config/&quot;/&gt;\r\n    \t\t\t\t&lt;pathelement path=&quot;C:/JUnit/apache-ant-1.10.1/InstrClasses&quot;/&gt;\r\n    \t\t\t&lt;/classpath&gt;\r\n    \t\t\t\r\n    \t\t\t&lt;sysproperty key=&quot;jacoco-agent.destfile&quot; file=&quot;jacoco.exec&quot;/&gt;\r\n    \t\t\t\r\n    \t\t\t\r\n    \t\t\t\r\n    \t\t\t&lt;test name=&quot;Fully qualified classname&quot;/&gt;\r\n    \r\n    \t\t\t&lt;formatter type=&quot;plain&quot;/&gt;\r\n    \t\t\t&lt;formatter type=&quot;plain&quot; usefile=&quot;false&quot; /&gt;\r\n    \t\t\t&lt;batchtest fork=&quot;yes&quot; todir=&quot;${report.dir}&quot;&gt;\r\n    \t\t\t\t&lt;fileset dir=&quot;${src.dir}&quot; includes=&quot;Fully qualified classname.java&quot;/&gt;\r\n    \t\t\t&lt;/batchtest&gt;\r\n    \t\t&lt;/junit&gt;\r\n    \t&lt;/jacoco:coverage&gt;\r\n    &lt;/target&gt;\r\n    \r\n    \r\n    &lt;target name=&quot;cov-report&quot; depends=&quot;cov-test&quot;&gt;\r\n    \t&lt;jacoco:report&gt;\r\n    \t\t&lt;executiondata&gt;\r\n    \t\t\t&lt;file file=&quot;jacoco.exec&quot; /&gt;\r\n    \t\t&lt;/executiondata&gt;\r\n    \t\t&lt;structure name=&quot;Test&quot;&gt;\r\n    \t\t\t&lt;classfiles&gt;\r\n    \t\t\t\t&lt;fileset dir=&quot;D:/NEON/HW/!!/module/!!/bin&quot;/&gt;\r\n    \t\t\t\t&lt;fileset dir=&quot;D:/NEON/HW/!!/testprojects/!!/bin&quot;/&gt;\r\n    \t\t\t&lt;/classfiles&gt;\r\n    \t\t\t&lt;sourcefiles&gt;\r\n    \t\t\t\t&lt;fileset dir=&quot;D:/NEON/HW/!!/module/!!/src&quot;/&gt;\r\n    \t\t\t\t&lt;fileset dir=&quot;D:/NEON/HW/!!/testprojects/!!/src&quot;/&gt;\r\n    \t\t\t&lt;/sourcefiles&gt;\t\t\r\n    \t\t&lt;/structure&gt;\r\n    \t\t&lt;csv destfile=&quot;${report.dir}/report.csv&quot; /&gt;\r\n    \t&lt;/jacoco:report&gt;\r\n    \r\n    &lt;/target&gt;\r\n\r\n**Questions:**\r\n1.Will there be any difference in the bytecode generated by compilers based on jdk 1.8.0_101 and jdk 1.8.0_111? Can incremental updates change bytecode? Or is the difference only significant during major version updates?\r\n\r\n2.Why am I still getting this error even after offline instrumentation has been implemented? Am I missing out on any declaration in the code? I&#39;ve tried to keep the format of the code as similar to that of the example provided in the jacoco documentation [here][1].\r\n\r\n3. I&#39;ve also noticed that the number of classes being instrumented(614) differs from the number of classes being added to the Test bundle (566) when both contain the same classpaths. Could that be of any consequence?\r\n\r\n\r\n  [1]: http://www.jacoco.org/jacoco/trunk/doc/examples/build/build-offline.xml","title":"Execution data for class does not match + Jacoco","body":"<p>I'm using <strong>Jacoco</strong> to find the code coverage of unit tests with <strong>ANT</strong> but the report isn't generated and I get this error sequence:</p>\n\n<pre><code>[jacoco:report] Loading execution data file C:\\JUnit\\apache-ant-1.10.1\\jacoco.ex\nec\n\n[jacoco:report] Writing bundle 'Test' with 566 classes\n\n[jacoco:report] Classes in bundle 'Test' do no match with execution data. For report generation the same class files must be used as at runtime.\n\n[jacoco:report] Execution data for class com/!!/AccountDetails does not match.\n\n[jacoco:report] Execution data for class com/!!/DataExtractorHelper does not match.\n\n[jacoco:report] Execution data for class com/!!/WelcomeLetter does not match.\n\n[jacoco:report] Execution data for class com/!!/WelcomeLetterABCD does not match.\n</code></pre>\n\n<p><strong>I've read these answers but none seemed to help me solve the problem.</strong></p>\n\n<p><a href=\"https://stackoverflow.com/questions/31720139/jacoco-code-coverage-report-generator-showing-error-classes-in-bundle-code-c\">jacoco code coverage report generator showing error : &quot;Classes in bundle &#39;Code Coverage Report&#39; do no match with execution data&quot;</a></p>\n\n<p><a href=\"https://stackoverflow.com/questions/33517805/jacoco-for-report-generation-the-same-class-files-must-be-used-as-at-runtime\">jacoco: For report generation the same class files must be used as at runtime</a></p>\n\n<p>I compiled all classes on Eclipse and used the ANT build tool to perform code coverage on these classes. I do make use of some external jars due to some dependencies and they've been compiled on jdk 1.8.0_101 and I'm using jdk 1.8.0_111 (I tried solving this error by using jdk 1.8.0_101 but I got the same errors) </p>\n\n<p>It has been mentioned that the class ID might change in Eclipse vs Oracle JDK compilation. Therefore I also checked this case by compiling some basic classes on Eclipse and used the jdk + ANT to find the code coverage. It worked in this case. There is no compilation taking place in the code coverage task. The .class files just need to be checked for coverage. </p>\n\n<p>All the classes mentioned in the errors have been compiled on eclipse before testing for the code coverage.</p>\n\n<p>I've <strong>tried using the offline instrumentation</strong> tool as a workaround to the persistence framework being used but it still gives me these errors.\n<strong>All the classes mentioned above in the errors are present in the Instrumented classes folder.</strong> ${dest.dir}</p>\n\n<p>This is my build.xml at the moment.</p>\n\n<pre><code>&lt;target name=\"instrument\"&gt;\n    &lt;delete dir=\"${dest.dir}\"/&gt;\n    &lt;mkdir dir=\"${dest.dir}\"/&gt;\n    &lt;jacoco:instrument destdir=\"${dest.dir}\"&gt;\n        &lt;fileset file=\"D:/NEON/HW/!!/module/!!/bin\" includes=\"**/*.class\"/&gt;\n        &lt;fileset file=\"D:/NEON/HW/!!/testprojects/!!/bin\" includes=\"**/*.class\"/&gt;\n    &lt;/jacoco:instrument&gt;\n&lt;/target&gt;\n\n\n&lt;target name=\"cov-test\" depends=\"instrument\"&gt;\n    &lt;mkdir dir=\"${report.dir}\"/&gt;    \n    &lt;jacoco:coverage&gt;\n        &lt;junit fork=\"true\" forkmode=\"once\" showoutput=\"true\" printsummary=\"on\" enabletestlistenerevents=\"true\"&gt;\n\n            &lt;classpath&gt;\n                &lt;path refid=\"ALL.jars\"/&gt;\n                &lt;path refid=\"classpath\"/&gt;\n                &lt;pathelement location=\"C:/JUnit/jacoco-0.7.9/lib/jacocoagent.jar\"/&gt;\n                &lt;pathelement location=\"C:/JUnit/JARS/!!/config/\"/&gt;\n                &lt;pathelement path=\"C:/JUnit/apache-ant-1.10.1/InstrClasses\"/&gt;\n            &lt;/classpath&gt;\n\n            &lt;sysproperty key=\"jacoco-agent.destfile\" file=\"jacoco.exec\"/&gt;\n\n\n\n            &lt;test name=\"Fully qualified classname\"/&gt;\n\n            &lt;formatter type=\"plain\"/&gt;\n            &lt;formatter type=\"plain\" usefile=\"false\" /&gt;\n            &lt;batchtest fork=\"yes\" todir=\"${report.dir}\"&gt;\n                &lt;fileset dir=\"${src.dir}\" includes=\"Fully qualified classname.java\"/&gt;\n            &lt;/batchtest&gt;\n        &lt;/junit&gt;\n    &lt;/jacoco:coverage&gt;\n&lt;/target&gt;\n\n\n&lt;target name=\"cov-report\" depends=\"cov-test\"&gt;\n    &lt;jacoco:report&gt;\n        &lt;executiondata&gt;\n            &lt;file file=\"jacoco.exec\" /&gt;\n        &lt;/executiondata&gt;\n        &lt;structure name=\"Test\"&gt;\n            &lt;classfiles&gt;\n                &lt;fileset dir=\"D:/NEON/HW/!!/module/!!/bin\"/&gt;\n                &lt;fileset dir=\"D:/NEON/HW/!!/testprojects/!!/bin\"/&gt;\n            &lt;/classfiles&gt;\n            &lt;sourcefiles&gt;\n                &lt;fileset dir=\"D:/NEON/HW/!!/module/!!/src\"/&gt;\n                &lt;fileset dir=\"D:/NEON/HW/!!/testprojects/!!/src\"/&gt;\n            &lt;/sourcefiles&gt;      \n        &lt;/structure&gt;\n        &lt;csv destfile=\"${report.dir}/report.csv\" /&gt;\n    &lt;/jacoco:report&gt;\n\n&lt;/target&gt;\n</code></pre>\n\n<p><strong>Questions:</strong>\n1.Will there be any difference in the bytecode generated by compilers based on jdk 1.8.0_101 and jdk 1.8.0_111? Can incremental updates change bytecode? Or is the difference only significant during major version updates?</p>\n\n<p>2.Why am I still getting this error even after offline instrumentation has been implemented? Am I missing out on any declaration in the code? I've tried to keep the format of the code as similar to that of the example provided in the jacoco documentation <a href=\"http://www.jacoco.org/jacoco/trunk/doc/examples/build/build-offline.xml\" rel=\"noreferrer\">here</a>.</p>\n\n<ol start=\"3\">\n<li>I've also noticed that the number of classes being instrumented(614) differs from the number of classes being added to the Test bundle (566) when both contain the same classpaths. Could that be of any consequence?</li>\n</ol>\n"},{"tags":["java","spring","dependency-injection","spring-bean"],"comments":[{"owner":{"account_id":3391382,"reputation":3687,"user_id":2846138,"display_name":"cyberbrain"},"score":2,"creation_date":1675191417,"post_id":75301788,"comment_id":132874419,"body_markdown":"Why is the `@Bean` annotated method also `static` ?  And does the `AppEnvironmentHelper` class really implement the correct `com.amazon.coral.spring.EnvironmentHelper` ?","body":"Why is the <code>@Bean</code> annotated method also <code>static</code> ?  And does the <code>AppEnvironmentHelper</code> class really implement the correct <code>com.amazon.coral.spring.EnvironmentHelper</code> ?"},{"owner":{"account_id":15342508,"reputation":396,"user_id":11069078,"display_name":"Mylies"},"score":0,"creation_date":1675265882,"post_id":75301788,"comment_id":132892078,"body_markdown":"@cyberbrain The Bean is static because the EnvironmentHelper is based off of `BeanFactoryPostProcessor` which means it has to be static from my understanding. And yes it implements the correct `com.amazon.coral.spring.EnvironmentHelper`","body":"@cyberbrain The Bean is static because the EnvironmentHelper is based off of <code>BeanFactoryPostProcessor</code> which means it has to be static from my understanding. And yes it implements the correct <code>com.amazon.coral.spring.EnvironmentHelper</code>"}],"owner":{"account_id":15342508,"reputation":396,"user_id":11069078,"display_name":"Mylies"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":300,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":0,"score":2,"last_activity_date":1675190634,"creation_date":1675190634,"question_id":75301788,"body_markdown":"I upgraded my package from Spring 4.3 to Spring 5.3 which has caused a issue I am completely to solve, for some reason a Bean that is created and works under 4.3 is being created, but not wired in. The bean is being created, and the configuration has not changed, yet it doesn&#39;t work? \r\n\r\nBean Creation:\r\n```\r\n@Configuration\r\n@SuppressWarnings(&quot;checkstyle:HideUtilityClassConstructor&quot;)\r\n@Slf4j\r\npublic class EnvironmentConfig {\r\n\r\n    @Bean\r\n    public static AppEnvironmentHelper environmentHelper() throws IOException {\r\n        final AppEnvironmentHelper.Config config = new AppConfigEnvironmentHelper.Confg()\r\n        // Config object is configured\r\n\r\n        \r\n        return new AppEnvironmentHelper(config);\r\n    }\r\n}\r\n```\r\n\r\nAttempted Injection of Bean:\r\n```\r\n@Configuration\r\n@Slf4j\r\npublic class OtherConfig {\r\n\r\n    @Value(&quot;${role}&quot;)\r\n    private String someRole;\r\n\r\n    @Value(&quot;${port}&quot;)\r\n    private String somePort;\r\n\r\n    @Autowired\r\n    private EnvironmentHelper environmentHelper;\r\n\r\n   .......\r\n}\r\n```\r\n\r\nThe class path for the bean is in the configuration, and when launching the service I see logs that indicate that EnviromentConfig is created before OtherConfig\r\n\r\n`org.springframework.beans.factory.support.DefaultListableBeanFactory: Finished creating instance of bean &#39;environmentHelper&#39;`\r\n\r\nBut I always get\r\n\r\n`UnsatisfiedDependencyException: Error creating bean with name &#39;OtherConfig&#39;: Unsatisfied dependency expressed through field &#39;environmentHelper&#39;; nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: No qualifying bean of type &#39;com.amazon.coral.spring.EnvironmentHelper&#39; available: expected at least 1 bean which qualifies as autowire candidate. Dependency annotations: {@org.springframework.beans.factory.annotation.Autowired(required=true)}`\r\n\r\nAfter it errors spring goes to clean up the beans with \r\n\r\n`Destroying singletons in org.springframework.beans.factory.support.DefaultListableBeanFactory@40db2a24: defining beans [.....,EnvironmentConfig, environmentHelper ]`\r\n\r\nWhich seems to indicate to me that it is finding the bean, its creating the bean, but then when it comes to wire in enviromentHelper it doesnt find it. Ive tried naming the bean using qualifiers but that did nothing. And I wrapped the EnviromentHelper and added logs during creation of the bean and destruction, so I know the bean isnt being destroyed prematurely. Im not certain what else to try to troubleshoot further. ","title":"Bean is no longer being autowired after Spring 5.3 Upgrade","body":"<p>I upgraded my package from Spring 4.3 to Spring 5.3 which has caused a issue I am completely to solve, for some reason a Bean that is created and works under 4.3 is being created, but not wired in. The bean is being created, and the configuration has not changed, yet it doesn't work?</p>\n<p>Bean Creation:</p>\n<pre><code>@Configuration\n@SuppressWarnings(&quot;checkstyle:HideUtilityClassConstructor&quot;)\n@Slf4j\npublic class EnvironmentConfig {\n\n    @Bean\n    public static AppEnvironmentHelper environmentHelper() throws IOException {\n        final AppEnvironmentHelper.Config config = new AppConfigEnvironmentHelper.Confg()\n        // Config object is configured\n\n        \n        return new AppEnvironmentHelper(config);\n    }\n}\n</code></pre>\n<p>Attempted Injection of Bean:</p>\n<pre><code>@Configuration\n@Slf4j\npublic class OtherConfig {\n\n    @Value(&quot;${role}&quot;)\n    private String someRole;\n\n    @Value(&quot;${port}&quot;)\n    private String somePort;\n\n    @Autowired\n    private EnvironmentHelper environmentHelper;\n\n   .......\n}\n</code></pre>\n<p>The class path for the bean is in the configuration, and when launching the service I see logs that indicate that EnviromentConfig is created before OtherConfig</p>\n<p><code>org.springframework.beans.factory.support.DefaultListableBeanFactory: Finished creating instance of bean 'environmentHelper'</code></p>\n<p>But I always get</p>\n<p><code>UnsatisfiedDependencyException: Error creating bean with name 'OtherConfig': Unsatisfied dependency expressed through field 'environmentHelper'; nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: No qualifying bean of type 'com.amazon.coral.spring.EnvironmentHelper' available: expected at least 1 bean which qualifies as autowire candidate. Dependency annotations: {@org.springframework.beans.factory.annotation.Autowired(required=true)}</code></p>\n<p>After it errors spring goes to clean up the beans with</p>\n<p><code>Destroying singletons in org.springframework.beans.factory.support.DefaultListableBeanFactory@40db2a24: defining beans [.....,EnvironmentConfig, environmentHelper ]</code></p>\n<p>Which seems to indicate to me that it is finding the bean, its creating the bean, but then when it comes to wire in enviromentHelper it doesnt find it. Ive tried naming the bean using qualifiers but that did nothing. And I wrapped the EnviromentHelper and added logs during creation of the bean and destruction, so I know the bean isnt being destroyed prematurely. Im not certain what else to try to troubleshoot further.</p>\n"},{"tags":["java","swing","jtable"],"comments":[{"owner":{"account_id":70123,"reputation":51175,"user_id":203657,"accept_rate":53,"display_name":"kleopatra"},"score":0,"creation_date":1675192439,"post_id":75301192,"comment_id":132874654,"body_markdown":"https://docs.oracle.com/javase/tutorial/uiswing/components/table.html","body":"<a href=\"https://docs.oracle.com/javase/tutorial/uiswing/components/table.html\" rel=\"nofollow noreferrer\">docs.oracle.com/javase/tutorial/uiswing/components/table.htm&zwnj;&#8203;l</a>"}],"answers":[{"tags":[],"owner":{"account_id":44852,"reputation":322224,"user_id":131872,"accept_rate":100,"display_name":"camickr"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1675190418,"creation_date":1675190418,"answer_id":75301746,"question_id":75301192,"body_markdown":"    //j = new JTable(sortedModel);\r\n\r\nDon&#39;t create a new JTable. \r\n\r\nJust reset the model of the existing table:\r\n\r\n    j.setModel( sortedModel );","title":"How to set an existing JTable equal to a new JTable in JSwing?","body":"<pre><code>//j = new JTable(sortedModel);\n</code></pre>\n<p>Don't create a new JTable.</p>\n<p>Just reset the model of the existing table:</p>\n<pre><code>j.setModel( sortedModel );\n</code></pre>\n"}],"owner":{"account_id":20231120,"reputation":761,"user_id":14837632,"display_name":"Soccerball123"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":33,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"accepted_answer_id":75301746,"answer_count":1,"score":-1,"last_activity_date":1675190418,"creation_date":1675187686,"question_id":75301192,"body_markdown":"So I have an existing JTable that is created upon creating the app and that has values in it. When a button is clicked to sort it, I then create a copy of all the values on the JTable and then sort it and put the sorted array in a 2D array. My existing JTable is called `j` and my existing model is called `model`. I created a new table model called `sortedModel` and now I want to set that equal to `j` so that it can display the updated sorted table on the screen. \r\n\r\nI&#39;ve tried this so far but it doesn&#39;t update it on to the screen so I&#39;m assuming I&#39;m doing something wrong in terms of setting it equal to `j` (my existed JTable).\r\n\r\nHere is my code:\r\n\r\n        // Converting 2D arraylist to normal 2D array for JTable\r\n        String[][] sortedData = tempUsersToAList.stream().map(u -&gt; u.toArray(new String[0])).toArray(String[][]::new);\r\n\r\n    \r\n        DefaultTableModel sortedModel = new DefaultTableModel(sortedData, columnNames);\r\n        j = new JTable(sortedModel);","title":"How to set an existing JTable equal to a new JTable in JSwing?","body":"<p>So I have an existing JTable that is created upon creating the app and that has values in it. When a button is clicked to sort it, I then create a copy of all the values on the JTable and then sort it and put the sorted array in a 2D array. My existing JTable is called <code>j</code> and my existing model is called <code>model</code>. I created a new table model called <code>sortedModel</code> and now I want to set that equal to <code>j</code> so that it can display the updated sorted table on the screen.</p>\n<p>I've tried this so far but it doesn't update it on to the screen so I'm assuming I'm doing something wrong in terms of setting it equal to <code>j</code> (my existed JTable).</p>\n<p>Here is my code:</p>\n<pre><code>    // Converting 2D arraylist to normal 2D array for JTable\n    String[][] sortedData = tempUsersToAList.stream().map(u -&gt; u.toArray(new String[0])).toArray(String[][]::new);\n\n\n    DefaultTableModel sortedModel = new DefaultTableModel(sortedData, columnNames);\n    j = new JTable(sortedModel);\n</code></pre>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":2709823,"reputation":10716,"user_id":2338547,"display_name":"markspace"},"score":0,"creation_date":1675189738,"post_id":75301584,"comment_id":132873951,"body_markdown":"What does `current.disconnectPred();` do?  You&#39;re calling it directly before the call to `getPred()`.","body":"What does <code>current.disconnectPred();</code> do?  You&#39;re calling it directly before the call to <code>getPred()</code>."},{"owner":{"account_id":25570478,"reputation":1,"user_id":19350934,"display_name":"King_Khalil"},"score":0,"creation_date":1675189929,"post_id":75301584,"comment_id":132874009,"body_markdown":"public void disconnectSucc()\n    {\n        if ( hasSucc() ) \n        {\n            succ.pred = null;\n            succ = null;\n        }\n    }","body":"public void disconnectSucc()     {         if ( hasSucc() )          {             succ.pred = null;             succ = null;         }     }"},{"owner":{"account_id":3391382,"reputation":3687,"user_id":2846138,"display_name":"cyberbrain"},"score":0,"creation_date":1675189970,"post_id":75301584,"comment_id":132874017,"body_markdown":"what exactly do you mean by &quot;flip&quot; ? reverse the order?","body":"what exactly do you mean by &quot;flip&quot; ? reverse the order?"},{"owner":{"account_id":25570478,"reputation":1,"user_id":19350934,"display_name":"King_Khalil"},"score":0,"creation_date":1675189974,"post_id":75301584,"comment_id":132874019,"body_markdown":"public void connectAsSucc( Element e)\n    {\n        disconnectSucc();\n        succ = e;\n        if ( e != null ) \n        {\n            e.disconnectPred();\n            e.pred = this;\n        }\n    }","body":"public void connectAsSucc( Element e)     {         disconnectSucc();         succ = e;         if ( e != null )          {             e.disconnectPred();             e.pred = this;         }     }"},{"owner":{"account_id":25570478,"reputation":1,"user_id":19350934,"display_name":"King_Khalil"},"score":0,"creation_date":1675190009,"post_id":75301584,"comment_id":132874034,"body_markdown":"I want to put the &quot;old&quot; List in reverse into the &quot;new&quot; List","body":"I want to put the &quot;old&quot; List in reverse into the &quot;new&quot; List"}],"answers":[{"tags":[],"owner":{"account_id":3391382,"reputation":3687,"user_id":2846138,"display_name":"cyberbrain"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1675190223,"creation_date":1675190223,"answer_id":75301710,"question_id":75301584,"body_markdown":"If your `DoublyLinkedList` implements the interface `java.util.List` I would first ensure that you can copy it (e.g. with a copy-constructor that initializes it with any other `Collection` or `List` - don&#39;t implement the `clone` method, too much hassle with that!).\r\n\r\nThen simply use the method `java.util.Collections.reverse(List&lt;?&gt;)` on a 1:1 copy of your original list.","title":"How to Flip a Double Linked List in java and put it into a new List","body":"<p>If your <code>DoublyLinkedList</code> implements the interface <code>java.util.List</code> I would first ensure that you can copy it (e.g. with a copy-constructor that initializes it with any other <code>Collection</code> or <code>List</code> - don't implement the <code>clone</code> method, too much hassle with that!).</p>\n<p>Then simply use the method <code>java.util.Collections.reverse(List&lt;?&gt;)</code> on a 1:1 copy of your original list.</p>\n"}],"owner":{"account_id":25570478,"reputation":1,"user_id":19350934,"display_name":"King_Khalil"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":37,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"accepted_answer_id":75301710,"answer_count":1,"score":-1,"last_activity_date":1675190223,"creation_date":1675189571,"question_id":75301584,"body_markdown":"I wanted to flip a Double Linked List and put it into a new List. But I don&#39;t know how to solve the Problem. My Code looks like this and I think it makes sense, but it doesn&#39;t work at all.\r\n\r\n*getPred = previous\r\ngetSucc = next*\r\n\r\n```\r\n    public DoublyLinkedList fliping()\r\n    {\r\n        DoublyLinkedList newList = new DoublyLinkedList();\r\n        Element current = last;\r\n        Element toInsert = newList.first;\r\n        while(current != null)\r\n        {\r\n            current.disconnectPred();\r\n            Element temp = current.getPred();\r\n            Element temp2 = current.getPred().getPred();\r\n            if(toInsert == newList.first)\r\n            {\r\n                temp.connectAsSucc(temp2);\r\n                temp2.connectAsPred(temp);\r\n                toInsert.connectAsSucc(temp);\r\n                newList.size++;\r\n            }\r\n            if(temp2 == null)\r\n            {\r\n                temp.connectAsSucc(temp2);\r\n                toInsert.connectAsSucc(temp);\r\n                newList.size++;\r\n            }\r\n            temp.connectAsSucc(temp2);\r\n            temp2.connectAsPred(temp);\r\n            toInsert.connectAsSucc(temp);\r\n            toInsert.connectAsPred(temp2);\r\n            toInsert = toInsert.getSucc();\r\n            current = current.getPred();\r\n            newList.size++;\r\n            size--;\r\n        }\r\n        return newList;\r\n    }\r\n\r\nException in thread &quot;main&quot; java.lang.NullPointerException: Cannot invoke &quot;Element.getPred()&quot; because the return value of &quot;Element.getPred()&quot; is null\r\n\tat DoublyLinkedList.fliping(DoublyLinkedList.java:282)\r\n\tat Testumgebung.testDoublyLinkedList(Testumgebung.java:35)\r\n\tat Testumgebung.main(Testumgebung.java:7)\r\n```\r\n\r\n\r\n\r\nI tried to disconnect the last element and the second last element. Than i tried to connect them to each other and put them togeter, as the first and second element into the new List","title":"How to Flip a Double Linked List in java and put it into a new List","body":"<p>I wanted to flip a Double Linked List and put it into a new List. But I don't know how to solve the Problem. My Code looks like this and I think it makes sense, but it doesn't work at all.</p>\n<p><em>getPred = previous\ngetSucc = next</em></p>\n<pre><code>    public DoublyLinkedList fliping()\n    {\n        DoublyLinkedList newList = new DoublyLinkedList();\n        Element current = last;\n        Element toInsert = newList.first;\n        while(current != null)\n        {\n            current.disconnectPred();\n            Element temp = current.getPred();\n            Element temp2 = current.getPred().getPred();\n            if(toInsert == newList.first)\n            {\n                temp.connectAsSucc(temp2);\n                temp2.connectAsPred(temp);\n                toInsert.connectAsSucc(temp);\n                newList.size++;\n            }\n            if(temp2 == null)\n            {\n                temp.connectAsSucc(temp2);\n                toInsert.connectAsSucc(temp);\n                newList.size++;\n            }\n            temp.connectAsSucc(temp2);\n            temp2.connectAsPred(temp);\n            toInsert.connectAsSucc(temp);\n            toInsert.connectAsPred(temp2);\n            toInsert = toInsert.getSucc();\n            current = current.getPred();\n            newList.size++;\n            size--;\n        }\n        return newList;\n    }\n\nException in thread &quot;main&quot; java.lang.NullPointerException: Cannot invoke &quot;Element.getPred()&quot; because the return value of &quot;Element.getPred()&quot; is null\n    at DoublyLinkedList.fliping(DoublyLinkedList.java:282)\n    at Testumgebung.testDoublyLinkedList(Testumgebung.java:35)\n    at Testumgebung.main(Testumgebung.java:7)\n</code></pre>\n<p>I tried to disconnect the last element and the second last element. Than i tried to connect them to each other and put them togeter, as the first and second element into the new List</p>\n"},{"tags":["java","random"],"comments":[{"owner":{"account_id":248321,"reputation":62665,"user_id":523612,"accept_rate":100,"display_name":"Karl Knechtel"},"score":0,"creation_date":1675189594,"post_id":75301544,"comment_id":132873908,"body_markdown":"Please tag the programming language you are asking about.","body":"Please tag the programming language you are asking about."},{"owner":{"account_id":3391382,"reputation":3687,"user_id":2846138,"display_name":"cyberbrain"},"score":1,"creation_date":1675189879,"post_id":75301544,"comment_id":132873993,"body_markdown":"you have to store the last error answer you gave and then check at the next answer if it would be the same. If yes, you can either pick again a random one or just take the &quot;next&quot; one.","body":"you have to store the last error answer you gave and then check at the next answer if it would be the same. If yes, you can either pick again a random one or just take the &quot;next&quot; one."},{"owner":{"account_id":248321,"reputation":62665,"user_id":523612,"accept_rate":100,"display_name":"Karl Knechtel"},"score":0,"creation_date":1675190161,"post_id":75301544,"comment_id":132874073,"body_markdown":"Should it use every answer once before using any of them again? Or does it only need to avoid giving the same answer twice in a row? Aside from that - how would you solve the problem with pencil and paper?","body":"Should it use every answer once before using any of them again? Or does it only need to avoid giving the same answer twice in a row? Aside from that - how would you solve the problem with pencil and paper?"},{"owner":{"account_id":22766627,"reputation":1,"user_id":16924564,"display_name":"jepa"},"score":0,"creation_date":1675190368,"post_id":75301544,"comment_id":132874139,"body_markdown":"It just needs to avoid giving the same error response twice in a row.","body":"It just needs to avoid giving the same error response twice in a row."},{"owner":{"account_id":248321,"reputation":62665,"user_id":523612,"accept_rate":100,"display_name":"Karl Knechtel"},"score":0,"creation_date":1675190957,"post_id":75301544,"comment_id":132874297,"body_markdown":"Does https://stackoverflow.com/questions/16265890 answer your question?","body":"Does <a href=\"https://stackoverflow.com/questions/16265890\">stackoverflow.com/questions/16265890</a> answer your question?"},{"owner":{"account_id":22766627,"reputation":1,"user_id":16924564,"display_name":"jepa"},"score":0,"creation_date":1675195844,"post_id":75301544,"comment_id":132875582,"body_markdown":"It doesn&#39;t seem to be helping","body":"It doesn&#39;t seem to be helping"}],"owner":{"account_id":22766627,"reputation":1,"user_id":16924564,"display_name":"jepa"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":29,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1675190060,"creation_date":1675189379,"question_id":75301544,"body_markdown":"I have a program that emulates a small translation program and I&#39;m trying to figure out how would I go about making the error responses not repeat itself twice in a row (e.g the response &quot;I don&#39;t know this word, sorry.&quot; can be explicitly stated right after when there is a failure to translate a word).\r\n\r\n```\r\npublic void fillErrorResponses() {\r\n\t\t// Adding responses to be used if no translation was found.\r\n\t\terrorResponses.add(&quot;I am sorry but I do not know how to translate this.&quot;);\r\n\t\terrorResponses.add(&quot;I don&#39;t know this word, sorry.&quot;);\r\n\t\terrorResponses.add(&quot;Are you sure that this is a word?&quot;);\r\n\t\terrorResponses.add(&quot;This cannot be translated.&quot;);\r\n\t}\r\n\r\n\tpublic String getErrorResponse() {\r\n\r\n        // Pick a random number for the index in the error response list.\r\n\t\t// The number will be between 0 (inclusive) and the size of the list (exclusive).\r\n\t\tint idx = rnd.nextInt(errorResponses.size());\r\n\t\treturn errorResponses.get(idx);\r\n```\r\nAt the moment, when a word that a user inputs cannot be translated, it will provide a random error response but still allows for that same error response to be displayed directly after it being used, for example:\r\n\r\n```\r\nPlease, type in a single word to translate it.\r\n&gt; gah\r\nI don&#39;t know this word, sorry.\r\n&gt; gah\r\nI am sorry but I do not know how to translate this.\r\n&gt; gah\r\nI am sorry but I do not know how to translate this.\r\n\r\n```\r\n\r\nHow do i make it so that it doesn&#39;t show the same response twice in a row when a user inputs word that cannot be translated?","title":"How do I ensure that the same error response is never repeated twice in a row","body":"<p>I have a program that emulates a small translation program and I'm trying to figure out how would I go about making the error responses not repeat itself twice in a row (e.g the response &quot;I don't know this word, sorry.&quot; can be explicitly stated right after when there is a failure to translate a word).</p>\n<pre><code>public void fillErrorResponses() {\n        // Adding responses to be used if no translation was found.\n        errorResponses.add(&quot;I am sorry but I do not know how to translate this.&quot;);\n        errorResponses.add(&quot;I don't know this word, sorry.&quot;);\n        errorResponses.add(&quot;Are you sure that this is a word?&quot;);\n        errorResponses.add(&quot;This cannot be translated.&quot;);\n    }\n\n    public String getErrorResponse() {\n\n        // Pick a random number for the index in the error response list.\n        // The number will be between 0 (inclusive) and the size of the list (exclusive).\n        int idx = rnd.nextInt(errorResponses.size());\n        return errorResponses.get(idx);\n</code></pre>\n<p>At the moment, when a word that a user inputs cannot be translated, it will provide a random error response but still allows for that same error response to be displayed directly after it being used, for example:</p>\n<pre><code>Please, type in a single word to translate it.\n&gt; gah\nI don't know this word, sorry.\n&gt; gah\nI am sorry but I do not know how to translate this.\n&gt; gah\nI am sorry but I do not know how to translate this.\n\n</code></pre>\n<p>How do i make it so that it doesn't show the same response twice in a row when a user inputs word that cannot be translated?</p>\n"},{"tags":["java","unit-testing","mockito"],"answers":[{"tags":[],"owner":{"account_id":9458732,"reputation":306,"user_id":7033181,"display_name":"Dash"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1675189996,"creation_date":1675189996,"answer_id":75301659,"question_id":75300417,"body_markdown":"Found a solution to use `ArgumentCaptor` to capture the initialized observer in the view model when `viewModelDataSource.setObserver(observer);` is called.\r\n\r\nIn my unit test:\r\n\r\n```\r\nArgumentCaptor&lt;ViewModelDataSource.DataSourceObserver&gt; capturedObserver = ArgumentCaptor.forClass(ViewModelDataSource.DataSourceObserver.class);\r\nSampleViewModel viewModel = new SimpleViewModel( ...);\r\nassertNotNull(capturedObserver);\r\n```","title":"How to unit test observer called from a private method?","body":"<p>Found a solution to use <code>ArgumentCaptor</code> to capture the initialized observer in the view model when <code>viewModelDataSource.setObserver(observer);</code> is called.</p>\n<p>In my unit test:</p>\n<pre><code>ArgumentCaptor&lt;ViewModelDataSource.DataSourceObserver&gt; capturedObserver = ArgumentCaptor.forClass(ViewModelDataSource.DataSourceObserver.class);\nSampleViewModel viewModel = new SimpleViewModel( ...);\nassertNotNull(capturedObserver);\n</code></pre>\n"}],"owner":{"account_id":9458732,"reputation":306,"user_id":7033181,"display_name":"Dash"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":39,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1675189996,"creation_date":1675183727,"question_id":75300417,"body_markdown":"I have a view model class, `SampleViewModel`, that has an observer, `DataSourceObserver`, whose event&#39;s (e.g. `onDataUpdated`) are triggered from a private method of the view model&#39;s data source class.\r\n\r\nI am trying to add a unit test for how the view model&#39;s observer handles the `onDataUpdated`.\r\n\r\n```\r\n@HiltViewModel\r\npublic class SampleViewModel extends ViewModel {\r\n\r\n  private final @NonNull ViewModelDataSource viewModelDataSource;\r\n\r\n  private final @NonNull ViewModelDataSource.DataSourceObserver observer = new ViewModelDataSource.DataSourceObserver() {\r\n    @Overrode\r\n    public void onDataUpdated(){\r\n      // some sort of handling\r\n    }\r\n  };\r\n\r\n  @Inject\r\n  public SampleViewModel(final @NonNull ViewModelDataSource dataSource){\r\n    viewModelDataSource = dataSource;\r\n    viewModelDataSource.setObserver(observer);\r\n  }\r\n}\r\n\r\npublic class ViewModelDataSource{\r\n  public interface DataSourceObserver {\r\n    void onDataUpdated();\r\n  }\r\n\r\n  private final ContactObservers.Observer contactObserver = new ContactObservers.Observer(){\r\n    @Override\r\n    public void onContactUpdated(){\r\n      if (myObserver != null){\r\n        myObserver.onDataUpdated();\r\n      }\r\n    }\r\n  };\r\n\r\n  private @Nullable DataSourceObserver myObserver;\r\n  \r\n  @Inject\r\n  public ViewModelDataSource(){\r\n    // other initialization here\r\n  }\r\n\r\n  public void setObserver(DataSourceObserver observer){\r\n    myObserver = observer;\r\n  }\r\n}\r\n```\r\n\r\nI have Mockito for mocking/stubbing objects, but I have no idea how to approach such a problem so that I can at least trigger something like `observer.onDataUpdated` and verify the method calls within the handling of `onDataUpdated`","title":"How to unit test observer called from a private method?","body":"<p>I have a view model class, <code>SampleViewModel</code>, that has an observer, <code>DataSourceObserver</code>, whose event's (e.g. <code>onDataUpdated</code>) are triggered from a private method of the view model's data source class.</p>\n<p>I am trying to add a unit test for how the view model's observer handles the <code>onDataUpdated</code>.</p>\n<pre><code>@HiltViewModel\npublic class SampleViewModel extends ViewModel {\n\n  private final @NonNull ViewModelDataSource viewModelDataSource;\n\n  private final @NonNull ViewModelDataSource.DataSourceObserver observer = new ViewModelDataSource.DataSourceObserver() {\n    @Overrode\n    public void onDataUpdated(){\n      // some sort of handling\n    }\n  };\n\n  @Inject\n  public SampleViewModel(final @NonNull ViewModelDataSource dataSource){\n    viewModelDataSource = dataSource;\n    viewModelDataSource.setObserver(observer);\n  }\n}\n\npublic class ViewModelDataSource{\n  public interface DataSourceObserver {\n    void onDataUpdated();\n  }\n\n  private final ContactObservers.Observer contactObserver = new ContactObservers.Observer(){\n    @Override\n    public void onContactUpdated(){\n      if (myObserver != null){\n        myObserver.onDataUpdated();\n      }\n    }\n  };\n\n  private @Nullable DataSourceObserver myObserver;\n  \n  @Inject\n  public ViewModelDataSource(){\n    // other initialization here\n  }\n\n  public void setObserver(DataSourceObserver observer){\n    myObserver = observer;\n  }\n}\n</code></pre>\n<p>I have Mockito for mocking/stubbing objects, but I have no idea how to approach such a problem so that I can at least trigger something like <code>observer.onDataUpdated</code> and verify the method calls within the handling of <code>onDataUpdated</code></p>\n"},{"tags":["java","flutter","error-handling","setup-project"],"owner":{"account_id":27627560,"reputation":1,"user_id":21087248,"display_name":"Sangeeta"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":116,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1675189753,"creation_date":1675189653,"question_id":75301597,"body_markdown":"I have recently set flutter in my laptop along with Android studio setup. When executed **flutter doctor**i got a continuous error under android studio      *Unable to find bundled java version*\r\n\r\n\r\n I tried using commands that changes the file jbr to jvr nd vice versa! \r\n\r\nAlso tried uninstalling the files of java! And set the requirements yet this is not resolved.\r\n\r\nUpdating the android studio also not helped..\r\n\r\n&gt; Unable to find bundled java version","title":"How to fix the errror &quot;unable to find bundled java version &quot; in flutter doctor command?","body":"<p>I have recently set flutter in my laptop along with Android studio setup. When executed <strong>flutter doctor</strong>i got a continuous error under android studio      <em>Unable to find bundled java version</em></p>\n<p>I tried using commands that changes the file jbr to jvr nd vice versa!</p>\n<p>Also tried uninstalling the files of java! And set the requirements yet this is not resolved.</p>\n<p>Updating the android studio also not helped..</p>\n<blockquote>\n<p>Unable to find bundled java version</p>\n</blockquote>\n"},{"tags":["java","spring","unit-testing","mockito"],"comments":[{"owner":{"account_id":1101161,"reputation":119804,"user_id":1093528,"accept_rate":65,"display_name":"fge"},"score":0,"creation_date":1429178515,"post_id":29670463,"comment_id":47480536,"body_markdown":"There would be by creating a custom argument matcher. I know it is possible, however I have never done that so I can&#39;t help further, sorry :( (edit: [link](http://docs.mockito.googlecode.com/hg/latest/org/mockito/Matchers.html))","body":"There would be by creating a custom argument matcher. I know it is possible, however I have never done that so I can&#39;t help further, sorry :( (edit: <a href=\"http://docs.mockito.googlecode.com/hg/latest/org/mockito/Matchers.html\" rel=\"nofollow noreferrer\">link</a>)"},{"owner":{"account_id":192292,"reputation":7779,"user_id":433348,"accept_rate":88,"display_name":"Kevin Welker"},"score":0,"creation_date":1429718713,"post_id":29670463,"comment_id":47734066,"body_markdown":"FYI, always replace `any(String.class)` with `anyString()`, and similarly for `anyInt()`, `anyFloat()`, etc...  It&#39;s simpler, more concise, easire on the eyes, and not subject to type-erasure.","body":"FYI, always replace <code>any(String.class)</code> with <code>anyString()</code>, and similarly for <code>anyInt()</code>, <code>anyFloat()</code>, etc...  It&#39;s simpler, more concise, easire on the eyes, and not subject to type-erasure."}],"answers":[{"tags":[],"owner":{"account_id":1529248,"reputation":92157,"user_id":1426891,"display_name":"Jeff Bowman"},"down_vote_count":0,"up_vote_count":31,"is_accepted":true,"score":31,"last_activity_date":1675189329,"creation_date":1429200772,"answer_id":29680408,"question_id":29670463,"body_markdown":"Mockito isn&#39;t good at matching generics itself, but your solution is much easier than the general case.\r\n\r\nReplace your:\r\n\r\n    Matchers.&lt;ParameterizedTypeReference&lt;SearchResultsDTO&lt;SolrDocumentDTO&gt;&gt;&gt;any())\r\n\r\nwith:\r\n\r\n    eq(new ParameterizedTypeReference&lt;SearchResultsDTO&lt;SolrDocumentDTO&gt;&gt;() {}))\r\n\r\n---\r\n\r\nFirst of all, `Matchers.any()` doesn&#39;t match type. In Mockito 1.x, `any(Foo.class)` doesn&#39;t even match type: `any()` matches [all values, including null and including incorrect types][any].\r\n\r\n&gt; Matches any object, including nulls\r\n&gt;\r\n&gt;This method doesn&#39;t do type checks with the given parameter, it is only there to avoid casting in your code. This might however change (type checks could be added) in a future major release.\r\n\r\n(Side note: In Mockito 2 and beyond, `any(Foo.class)` has English-like &quot;any Foo&quot; semantics, making it behave much more like `isA(Foo.class)`.)\r\n\r\nThe generics are helpful to get the right parameter for `exchange` and `thenReturn`, but because of [type erasure][] none of that type information makes it into the CLASS file, let alone the JVM. The only Matcher that asserts the type of its argument is [`isA`][isA], which takes a class literal and won&#39;t help you for parameterized types.\r\n\r\nYou could write a custom Matcher that inspects an argument&#39;s type and type parameters, if they aren&#39;t subject to erasure, but for your specific case that&#39;s not necessary.\r\n    \r\nType erasure is the whole reason [ParameterizedTypeReference][] exists: It captures the generics information into a subclass, where the parameterized type _will not_ be erased. This same pattern is used for [TypeToken][] in Guava or [TypeLiteral][] in Guice. All of these implementations _describe a parameterized type as an instance_.\r\n\r\nImportantly, all of them—including [ParameterizedTypeReference][]—support `equals` and `hashCode`, so `new ParameterizedTypeReference&lt;A&lt;B&gt;&gt;(){}` equals `new ParameterizedTypeReference&lt;A&lt;B&gt;&gt;(){}` even though the instances are different. [(See the code here.)][ptr-code]\r\n\r\nBecause references to the same parameterized type are equal, use Mockito&#39;s `eq` matcher with a different reference, and things should be fine.\r\n\r\n[any]: http://site.mockito.org/mockito/docs/current/org/mockito/Matchers.html#any(java.lang.Class)\r\n[any-change]: https://stackoverflow.com/questions/33904877/mockito-when-doesnt-differentiate-between-child-classes#comment55631479_33904939\r\n[type erasure]: https://docs.oracle.com/javase/tutorial/java/generics/erasure.html\r\n[isA]: https://mockito.googlecode.com/svn/branches/1.6/javadoc/org/mockito/Matchers.html#isA(java.lang.Class)\r\n[ParameterizedTypeReference]: http://docs.spring.io/autorepo/docs/spring/3.2.3.RELEASE/javadoc-api/org/springframework/core/ParameterizedTypeReference.html\r\n[TypeToken]: https://guava.dev/releases/snapshot-jre/api/docs/com/google/common/reflect/TypeToken.html\r\n[TypeLiteral]: http://google.github.io/guice/api-docs/latest/javadoc/com/google/inject/TypeLiteral.html\r\n[ptr-code]: https://github.com/spring-projects/spring-framework/blob/16937c7ce5aa43b495cc04587855da670219eb7a/spring-core/src/main/java/org/springframework/core/ParameterizedTypeReference.java#L71","title":"Match generics with Mockito","body":"<p>Mockito isn't good at matching generics itself, but your solution is much easier than the general case.</p>\n<p>Replace your:</p>\n<pre><code>Matchers.&lt;ParameterizedTypeReference&lt;SearchResultsDTO&lt;SolrDocumentDTO&gt;&gt;&gt;any())\n</code></pre>\n<p>with:</p>\n<pre><code>eq(new ParameterizedTypeReference&lt;SearchResultsDTO&lt;SolrDocumentDTO&gt;&gt;() {}))\n</code></pre>\n<hr />\n<p>First of all, <code>Matchers.any()</code> doesn't match type. In Mockito 1.x, <code>any(Foo.class)</code> doesn't even match type: <code>any()</code> matches <a href=\"http://site.mockito.org/mockito/docs/current/org/mockito/Matchers.html#any(java.lang.Class)\" rel=\"nofollow noreferrer\">all values, including null and including incorrect types</a>.</p>\n<blockquote>\n<p>Matches any object, including nulls</p>\n<p>This method doesn't do type checks with the given parameter, it is only there to avoid casting in your code. This might however change (type checks could be added) in a future major release.</p>\n</blockquote>\n<p>(Side note: In Mockito 2 and beyond, <code>any(Foo.class)</code> has English-like &quot;any Foo&quot; semantics, making it behave much more like <code>isA(Foo.class)</code>.)</p>\n<p>The generics are helpful to get the right parameter for <code>exchange</code> and <code>thenReturn</code>, but because of <a href=\"https://docs.oracle.com/javase/tutorial/java/generics/erasure.html\" rel=\"nofollow noreferrer\">type erasure</a> none of that type information makes it into the CLASS file, let alone the JVM. The only Matcher that asserts the type of its argument is <a href=\"https://mockito.googlecode.com/svn/branches/1.6/javadoc/org/mockito/Matchers.html#isA(java.lang.Class)\" rel=\"nofollow noreferrer\"><code>isA</code></a>, which takes a class literal and won't help you for parameterized types.</p>\n<p>You could write a custom Matcher that inspects an argument's type and type parameters, if they aren't subject to erasure, but for your specific case that's not necessary.</p>\n<p>Type erasure is the whole reason <a href=\"http://docs.spring.io/autorepo/docs/spring/3.2.3.RELEASE/javadoc-api/org/springframework/core/ParameterizedTypeReference.html\" rel=\"nofollow noreferrer\">ParameterizedTypeReference</a> exists: It captures the generics information into a subclass, where the parameterized type <em>will not</em> be erased. This same pattern is used for <a href=\"https://guava.dev/releases/snapshot-jre/api/docs/com/google/common/reflect/TypeToken.html\" rel=\"nofollow noreferrer\">TypeToken</a> in Guava or <a href=\"http://google.github.io/guice/api-docs/latest/javadoc/com/google/inject/TypeLiteral.html\" rel=\"nofollow noreferrer\">TypeLiteral</a> in Guice. All of these implementations <em>describe a parameterized type as an instance</em>.</p>\n<p>Importantly, all of them—including <a href=\"http://docs.spring.io/autorepo/docs/spring/3.2.3.RELEASE/javadoc-api/org/springframework/core/ParameterizedTypeReference.html\" rel=\"nofollow noreferrer\">ParameterizedTypeReference</a>—support <code>equals</code> and <code>hashCode</code>, so <code>new ParameterizedTypeReference&lt;A&lt;B&gt;&gt;(){}</code> equals <code>new ParameterizedTypeReference&lt;A&lt;B&gt;&gt;(){}</code> even though the instances are different. <a href=\"https://github.com/spring-projects/spring-framework/blob/16937c7ce5aa43b495cc04587855da670219eb7a/spring-core/src/main/java/org/springframework/core/ParameterizedTypeReference.java#L71\" rel=\"nofollow noreferrer\">(See the code here.)</a></p>\n<p>Because references to the same parameterized type are equal, use Mockito's <code>eq</code> matcher with a different reference, and things should be fine.</p>\n"}],"owner":{"account_id":286519,"reputation":1001,"user_id":585814,"accept_rate":80,"display_name":"Dario Zamuner"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":15630,"favorite_count":0,"down_vote_count":0,"up_vote_count":18,"accepted_answer_id":29680408,"answer_count":1,"score":18,"last_activity_date":1675189329,"creation_date":1429176152,"question_id":29670463,"body_markdown":"I&#39;m trying to mock the `restTemplate.exchange` method of Spring Rest.\r\n\r\nIn the same test I have multiple calls which differ only by the return type.\r\n\r\nHere are the methods with the mocks I created\r\n\r\nFirst\r\n\r\n    // Original method\r\n    restTemplate.exchange(UrlMap.SEARCH + &#39;?&#39; + searchDocsForm.toQueryParams(),\r\n\t\t\t\tHttpMethod.GET, null, new ParameterizedTypeReference&lt;SearchResultsDTO&lt;SolrDocumentDTO&gt;&gt;() {\r\n\t\t\t\t})\r\n    // Mock\r\n    when(restTemplate.exchange(any(String.class), any(HttpMethod.class), any(), Matchers.&lt;ParameterizedTypeReference&lt;SearchResultsDTO&lt;SolrDocumentDTO&gt;&gt;&gt;any())).thenReturn(\r\n\t\t\t\tnew ResponseEntity&lt;&gt;(searchResultsDTO, HttpStatus.OK));\r\n\r\nSecond\r\n\r\n    // Original method\r\n    restTemplate.exchange(UrlMap.ALL_DOCUS_TOPICS,\r\n\t\t\t\tHttpMethod.GET, null, new ParameterizedTypeReference&lt;List&lt;SelectItem&gt;&gt;() {\r\n\t\t\t\t}).getBody();\r\n    // Mock\r\n    when(restTemplate.exchange(any(String.class), any(HttpMethod.class), any(), Matchers.&lt;ParameterizedTypeReference&lt;List&lt;SelectItem&gt;&gt;&gt;any())).thenReturn(\r\n\t\t\t\tnew ResponseEntity&lt;&gt;(selectItems, HttpStatus.OK));\r\n\r\nThe generic parameters of `ParameterizedTypeReference` are not considered by the mock, and the last defined mock wins over the former.\r\n\r\nIs there any way to make it work?","title":"Match generics with Mockito","body":"<p>I'm trying to mock the <code>restTemplate.exchange</code> method of Spring Rest.</p>\n\n<p>In the same test I have multiple calls which differ only by the return type.</p>\n\n<p>Here are the methods with the mocks I created</p>\n\n<p>First</p>\n\n<pre><code>// Original method\nrestTemplate.exchange(UrlMap.SEARCH + '?' + searchDocsForm.toQueryParams(),\n            HttpMethod.GET, null, new ParameterizedTypeReference&lt;SearchResultsDTO&lt;SolrDocumentDTO&gt;&gt;() {\n            })\n// Mock\nwhen(restTemplate.exchange(any(String.class), any(HttpMethod.class), any(), Matchers.&lt;ParameterizedTypeReference&lt;SearchResultsDTO&lt;SolrDocumentDTO&gt;&gt;&gt;any())).thenReturn(\n            new ResponseEntity&lt;&gt;(searchResultsDTO, HttpStatus.OK));\n</code></pre>\n\n<p>Second</p>\n\n<pre><code>// Original method\nrestTemplate.exchange(UrlMap.ALL_DOCUS_TOPICS,\n            HttpMethod.GET, null, new ParameterizedTypeReference&lt;List&lt;SelectItem&gt;&gt;() {\n            }).getBody();\n// Mock\nwhen(restTemplate.exchange(any(String.class), any(HttpMethod.class), any(), Matchers.&lt;ParameterizedTypeReference&lt;List&lt;SelectItem&gt;&gt;&gt;any())).thenReturn(\n            new ResponseEntity&lt;&gt;(selectItems, HttpStatus.OK));\n</code></pre>\n\n<p>The generic parameters of <code>ParameterizedTypeReference</code> are not considered by the mock, and the last defined mock wins over the former.</p>\n\n<p>Is there any way to make it work?</p>\n"},{"tags":["java","spring","spring-jdbc","lombok"],"answers":[{"tags":[],"owner":{"account_id":27668500,"reputation":1,"user_id":21119820,"display_name":"cakimax113 "},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1675189232,"creation_date":1675189232,"answer_id":75301518,"question_id":75301259,"body_markdown":"I&#39;m answering my own question but its very specific to this project\r\n\r\nIn the end I found a class up the inheritance and used the injection functionality there and passed it in to the static class\r\n\r\nI don&#39;t know if that is the best way but it seems to be working \r\n\r\nI&#39;m open to comments on how i can improve this code solution","title":"Can you @autowire a field in static child class from spring boot 1.5.9","body":"<p>I'm answering my own question but its very specific to this project</p>\n<p>In the end I found a class up the inheritance and used the injection functionality there and passed it in to the static class</p>\n<p>I don't know if that is the best way but it seems to be working</p>\n<p>I'm open to comments on how i can improve this code solution</p>\n"}],"owner":{"account_id":27668500,"reputation":1,"user_id":21119820,"display_name":"cakimax113 "},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":78,"favorite_count":0,"down_vote_count":2,"up_vote_count":0,"answer_count":1,"score":-2,"last_activity_date":1675189232,"creation_date":1675187976,"question_id":75301259,"body_markdown":"I was given a really REALLY old project at work\r\n\r\nI usually don&#39;t have a problem google cant figure out for me\r\n\r\nThis is a massive code base and I&#39;m in charge of fixing it\r\n\r\nThe original author created a class and inside that class created a static child class\r\n\r\nexample\r\n```\r\npublic class parent {\r\n   public static class child {\r\n   }\r\n}\r\n```\r\ninside that static child class I am hoping to @Autowire a repo already created and working fine\r\n\r\nI am the first to admit I don&#39;t know everything but from what i understand\r\n\r\nIf the spring framework can find the component \r\n\r\nIt should be able to inject it&#39;s dependency\r\n\r\n\r\nFor example:\r\n```\r\n@component\r\npublic class parent {\r\n\r\n   @component\r\n   public static class child {\r\n\r\n        @autowired\r\n        private SomeRepo repo;\r\n   }\r\n}\r\n```\r\nBut clearly I&#39;m wrong about that\r\n\r\nI&#39;m really really trying to avoid using jdbctemplate because from what I&#39;m reading so far\r\nit bypasses and duplicates a connection that should be managed by Spring\r\n\r\nBut I am struggling to autowire this repo for accessing the database\r\n\r\nPlease help \r\n\r\n\r\nI have tried attaching the @component, @entity, JDBCTemplate Im hoping to avoid\r\nI have also tried Autowiring up the channel that calls it and sending it in the function of the static class that needs it\r\n\r\nI have been reading and cant find an answer yet","title":"Can you @autowire a field in static child class from spring boot 1.5.9","body":"<p>I was given a really REALLY old project at work</p>\n<p>I usually don't have a problem google cant figure out for me</p>\n<p>This is a massive code base and I'm in charge of fixing it</p>\n<p>The original author created a class and inside that class created a static child class</p>\n<p>example</p>\n<pre><code>public class parent {\n   public static class child {\n   }\n}\n</code></pre>\n<p>inside that static child class I am hoping to @Autowire a repo already created and working fine</p>\n<p>I am the first to admit I don't know everything but from what i understand</p>\n<p>If the spring framework can find the component</p>\n<p>It should be able to inject it's dependency</p>\n<p>For example:</p>\n<pre><code>@component\npublic class parent {\n\n   @component\n   public static class child {\n\n        @autowired\n        private SomeRepo repo;\n   }\n}\n</code></pre>\n<p>But clearly I'm wrong about that</p>\n<p>I'm really really trying to avoid using jdbctemplate because from what I'm reading so far\nit bypasses and duplicates a connection that should be managed by Spring</p>\n<p>But I am struggling to autowire this repo for accessing the database</p>\n<p>Please help</p>\n<p>I have tried attaching the @component, @entity, JDBCTemplate Im hoping to avoid\nI have also tried Autowiring up the channel that calls it and sending it in the function of the static class that needs it</p>\n<p>I have been reading and cant find an answer yet</p>\n"},{"tags":["java","android","ios","flutter","mobile-application"],"answers":[{"tags":[],"owner":{"account_id":320962,"reputation":31681,"user_id":639520,"accept_rate":72,"display_name":"E-Riz"},"down_vote_count":2,"up_vote_count":1,"is_accepted":true,"score":-1,"last_activity_date":1675189134,"creation_date":1675189134,"answer_id":75301497,"question_id":75301434,"body_markdown":"It&#39;s been a few years since I did any Android development, but I suspect most apps you&#39;re referring to probably use a [WebView][1] as their primary component, enabling them to serve mobile-friendly HTML/JavaScript/CSS content for the app to render.\r\n\r\nSome apps probably mix static UI components with WebViews for portions they need to be dynamic and change frequently.\r\n\r\n\r\n  [1]: https://developer.android.com/develop/ui/views/layout/webapps/webview","title":"Frequently changing UI in mobile applications","body":"<p>It's been a few years since I did any Android development, but I suspect most apps you're referring to probably use a <a href=\"https://developer.android.com/develop/ui/views/layout/webapps/webview\" rel=\"nofollow noreferrer\">WebView</a> as their primary component, enabling them to serve mobile-friendly HTML/JavaScript/CSS content for the app to render.</p>\n<p>Some apps probably mix static UI components with WebViews for portions they need to be dynamic and change frequently.</p>\n"}],"owner":{"account_id":25845637,"reputation":534,"user_id":19580540,"display_name":"ayush"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":48,"favorite_count":0,"down_vote_count":3,"up_vote_count":0,"closed_date":1675257106,"accepted_answer_id":75301497,"answer_count":1,"score":-3,"last_activity_date":1675189134,"creation_date":1675188833,"question_id":75301434,"body_markdown":"I have been working on Mobile Applications and developing several types of UIs. But I frequently face a question regarding dynamic UIs.  \r\nIn **E-Commerce apps or Food Delivery Apps**, we generally see that the UI changes quite often (with new offers, items, festival sales, etc. shown and removed) and is not static (**like we generally code a UI with different views/widgets, which show dynamic data**). So, my question is how the UI is made dynamic in this sense without pushing new updates to the apps?  \r\nAlso, how we can develop such a UI in **Flutter?**","title":"Frequently changing UI in mobile applications","body":"<p>I have been working on Mobile Applications and developing several types of UIs. But I frequently face a question regarding dynamic UIs.<br />\nIn <strong>E-Commerce apps or Food Delivery Apps</strong>, we generally see that the UI changes quite often (with new offers, items, festival sales, etc. shown and removed) and is not static (<strong>like we generally code a UI with different views/widgets, which show dynamic data</strong>). So, my question is how the UI is made dynamic in this sense without pushing new updates to the apps?<br />\nAlso, how we can develop such a UI in <strong>Flutter?</strong></p>\n"},{"tags":["java","multithreading","db2"],"answers":[{"tags":[],"owner":{"account_id":24847247,"reputation":1,"user_id":18724649,"display_name":"Sara.es"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1675189083,"creation_date":1675189083,"answer_id":75301483,"question_id":75301349,"body_markdown":"According to IBM documentation: \r\n\r\n&gt; The page or row lock on the page or subpage identified by the NAME resource-name value in message DSNT500I or DSNT501I caused the total number of page or row locks concurrently held to reach the installation maximum number of page or row locks (NUMLKUS) allowed for a single agent in the system\r\n\r\nI assume that you have to reduce the number of dirty pages or in another word uncommitted changes into DB. Alternatively you can also commit your changes during the process to reduce the number uncommitted changes.","title":"com.ibm.db2.jcc.am.SqlException: UNSUCCESSFUL EXECUTION CAUSED BY AN UNAVAILABLE RESOURCE. REASON 00C90096","body":"<p>According to IBM documentation:</p>\n<blockquote>\n<p>The page or row lock on the page or subpage identified by the NAME resource-name value in message DSNT500I or DSNT501I caused the total number of page or row locks concurrently held to reach the installation maximum number of page or row locks (NUMLKUS) allowed for a single agent in the system</p>\n</blockquote>\n<p>I assume that you have to reduce the number of dirty pages or in another word uncommitted changes into DB. Alternatively you can also commit your changes during the process to reduce the number uncommitted changes.</p>\n"}],"owner":{"account_id":4709043,"reputation":227,"user_id":3810175,"display_name":"Ramin Safar Manesh"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":268,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1675189083,"creation_date":1675188399,"question_id":75301349,"body_markdown":"I want to insert multiple records in a multi-thread function into DB and after inserting a specific amount of records i become always the following exception:\r\n```\r\nOutermost stacktrace: com.ibm.db2.jcc.am.SqlException: UNSUCCESSFUL EXECUTION CAUSED BY AN UNAVAILABLE RESOURCE. REASON 00C90096, TYPE OF RESOURCE 00000304, AND RESOURCE NAME X&#39;0005AB8C&#39;.X&#39;02&#39;. SQLCODE=-904, SQLSTATE=57011, DRIVER=4.31.10\r\n\tat com.ibm.db2.jcc.am.b7.a(b7.java:815)\r\n\tat com.ibm.db2.jcc.am.b7.a(b7.java:66)\r\n\tat com.ibm.db2.jcc.am.b7.a(b7.java:140)\r\n\tat com.ibm.db2.jcc.am.k_.b(k_.java:2491)\r\n\tat com.ibm.db2.jcc.am.k_.c(k_.java:2472)\r\n\tat com.ibm.db2.jcc.t4.ab.n(ab.java:917)\r\n\tat com.ibm.db2.jcc.t4.ab.a(ab.java:118)\r\n\tat com.ibm.db2.jcc.t4.p.a(p.java:50)\r\n\tat com.ibm.db2.jcc.t4.aw.b(aw.java:220)\r\n\tat com.ibm.db2.jcc.am.la.bm(la.java:3632)\r\n\tat com.ibm.db2.jcc.am.la.a(la.java:4677)\r\n\tat com.ibm.db2.jcc.am.la.b(la.java:4215)\r\n\tat com.ibm.db2.jcc.am.la.be(la.java:832)\r\n```\r\n\r\n\r\nIs that somthing because i tried to write into DB via multiple threads? What is the reason?","title":"com.ibm.db2.jcc.am.SqlException: UNSUCCESSFUL EXECUTION CAUSED BY AN UNAVAILABLE RESOURCE. REASON 00C90096","body":"<p>I want to insert multiple records in a multi-thread function into DB and after inserting a specific amount of records i become always the following exception:</p>\n<pre><code>Outermost stacktrace: com.ibm.db2.jcc.am.SqlException: UNSUCCESSFUL EXECUTION CAUSED BY AN UNAVAILABLE RESOURCE. REASON 00C90096, TYPE OF RESOURCE 00000304, AND RESOURCE NAME X'0005AB8C'.X'02'. SQLCODE=-904, SQLSTATE=57011, DRIVER=4.31.10\n    at com.ibm.db2.jcc.am.b7.a(b7.java:815)\n    at com.ibm.db2.jcc.am.b7.a(b7.java:66)\n    at com.ibm.db2.jcc.am.b7.a(b7.java:140)\n    at com.ibm.db2.jcc.am.k_.b(k_.java:2491)\n    at com.ibm.db2.jcc.am.k_.c(k_.java:2472)\n    at com.ibm.db2.jcc.t4.ab.n(ab.java:917)\n    at com.ibm.db2.jcc.t4.ab.a(ab.java:118)\n    at com.ibm.db2.jcc.t4.p.a(p.java:50)\n    at com.ibm.db2.jcc.t4.aw.b(aw.java:220)\n    at com.ibm.db2.jcc.am.la.bm(la.java:3632)\n    at com.ibm.db2.jcc.am.la.a(la.java:4677)\n    at com.ibm.db2.jcc.am.la.b(la.java:4215)\n    at com.ibm.db2.jcc.am.la.be(la.java:832)\n</code></pre>\n<p>Is that somthing because i tried to write into DB via multiple threads? What is the reason?</p>\n"},{"tags":["java","interpolation","argb"],"comments":[{"owner":{"account_id":22057425,"reputation":135,"user_id":16320675,"display_name":"user16320675"},"score":0,"creation_date":1675118975,"post_id":75290730,"comment_id":132856636,"body_markdown":"this algorithm is basically multiplying the colors by 256, that is, the value is shifted 8 bits left - since using `int` the 4th byte is lost - you can use `long` in the calculation (mask and factors) to avoid that","body":"this algorithm is basically multiplying the colors by 256, that is, the value is shifted 8 bits left - since using <code>int</code> the 4th byte is lost - you can use <code>long</code> in the calculation (mask and factors) to avoid that"},{"owner":{"account_id":24724028,"reputation":1,"user_id":19482999,"display_name":"MJSD"},"score":0,"creation_date":1675132493,"post_id":75290730,"comment_id":132858717,"body_markdown":"Thank you @user16320675! That did the trick! I can&#39;t believe I didn&#39;t think of that... Guess I was just blinded by the binary arithmetic that I can&#39;t justify in my head. Unfortunately, I don&#39;t know how to credit you, as your answer is just a comment.","body":"Thank you @user16320675! That did the trick! I can&#39;t believe I didn&#39;t think of that... Guess I was just blinded by the binary arithmetic that I can&#39;t justify in my head. Unfortunately, I don&#39;t know how to credit you, as your answer is just a comment."}],"answers":[{"tags":[],"owner":{"account_id":24724028,"reputation":1,"user_id":19482999,"display_name":"MJSD"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1675188965,"creation_date":1675132085,"answer_id":75292153,"question_id":75290730,"body_markdown":"&gt; &quot;...since using int the 4th byte is lost - you can use long in the calculation (mask and factors) to avoid that&quot; - user16320675\r\n\r\nThank you! I should have thought of that, but I guess that&#39;s what they all say.\r\nHere are the updated functions for 32bit integer ARGB color values:\r\n\r\n```\r\npublic static int mixColors(int a, int b){\r\n    long mask1 = 0x00ff00ffL;\r\n    long mask2 = 0xff00ff00L;\r\n\r\n    return (int)((((((a &amp; mask1) + (b &amp; mask1)) * 128) &gt;&gt; 8) &amp; mask1) \r\n               | (((((a &amp; mask2) + (b &amp; mask2)) * 128) &gt;&gt; 8) &amp; mask2));\r\n}\r\n\r\npublic static int mixColors(int a, int b, float fractionB){\r\n    long mask1 = 0x00ff00ffL;\r\n    long mask2 = 0xff00ff00L;\r\n\r\n    short f2 = (short)(256 * fractionB),\r\n          f1 = (short)(256 - f2);\r\n          \r\n    return (int)((((((a &amp; mask1) * f1) + ((b &amp; mask1) * f2)) &gt;&gt; 8) &amp; mask1) \r\n               | (((((a &amp; mask2) * f1) + ((b &amp; mask2) * f2)) &gt;&gt; 8) &amp; mask2));\r\n}\r\n```","title":"How to do ARGB color interpolation without separating components?","body":"<blockquote>\n<p>&quot;...since using int the 4th byte is lost - you can use long in the calculation (mask and factors) to avoid that&quot; - user16320675</p>\n</blockquote>\n<p>Thank you! I should have thought of that, but I guess that's what they all say.\nHere are the updated functions for 32bit integer ARGB color values:</p>\n<pre><code>public static int mixColors(int a, int b){\n    long mask1 = 0x00ff00ffL;\n    long mask2 = 0xff00ff00L;\n\n    return (int)((((((a &amp; mask1) + (b &amp; mask1)) * 128) &gt;&gt; 8) &amp; mask1) \n               | (((((a &amp; mask2) + (b &amp; mask2)) * 128) &gt;&gt; 8) &amp; mask2));\n}\n\npublic static int mixColors(int a, int b, float fractionB){\n    long mask1 = 0x00ff00ffL;\n    long mask2 = 0xff00ff00L;\n\n    short f2 = (short)(256 * fractionB),\n          f1 = (short)(256 - f2);\n          \n    return (int)((((((a &amp; mask1) * f1) + ((b &amp; mask1) * f2)) &gt;&gt; 8) &amp; mask1) \n               | (((((a &amp; mask2) * f1) + ((b &amp; mask2) * f2)) &gt;&gt; 8) &amp; mask2));\n}\n</code></pre>\n"}],"owner":{"account_id":24724028,"reputation":1,"user_id":19482999,"display_name":"MJSD"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":50,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75292153,"answer_count":1,"score":0,"last_activity_date":1675188965,"creation_date":1675116906,"question_id":75290730,"body_markdown":"After trying and failing to figure this out myself, I have scavenged some code which should combine two colors (integers) by a specified fraction from [another thread](https://stackoverflow.com/questions/2630925/whats-the-most-effective-way-to-interpolate-between-two-colors-pseudocode-and), but I am just simply not crafty enough to get it working with ARGB integers.\r\nDoes anyone know how to convert this function from combining RGB to combining ARGB?\r\n\r\n```\r\npublic static int mixColors(int a, int b, float fractionB){ \r\n   int mask1 = 0xff00ff; \r\n   int mask2 = 0x00ff00; \r\n    \r\n   int f2 = (int)(256 * fractionB);\r\n   int f1 = 256 - f2;\r\n   \r\n   return   ((((( a &amp; mask1 ) * f1 ) + ( ( b &amp; mask1 ) * f2 )) &gt;&gt;&gt; 8 ) &amp; mask1 ) \r\n          | ((((( a &amp; mask2 ) * f1 ) + ( ( b &amp; mask2 ) * f2 )) &gt;&gt;&gt; 8 ) &amp; mask2 );\r\n}\r\n```\r\n\r\nI have tried setting the masks to `mask1 = 0x00ff00ff; mask2 = 0xff00ff00;` but the function still only outputs a 3 byte number.","title":"How to do ARGB color interpolation without separating components?","body":"<p>After trying and failing to figure this out myself, I have scavenged some code which should combine two colors (integers) by a specified fraction from <a href=\"https://stackoverflow.com/questions/2630925/whats-the-most-effective-way-to-interpolate-between-two-colors-pseudocode-and\">another thread</a>, but I am just simply not crafty enough to get it working with ARGB integers.\nDoes anyone know how to convert this function from combining RGB to combining ARGB?</p>\n<pre><code>public static int mixColors(int a, int b, float fractionB){ \n   int mask1 = 0xff00ff; \n   int mask2 = 0x00ff00; \n    \n   int f2 = (int)(256 * fractionB);\n   int f1 = 256 - f2;\n   \n   return   ((((( a &amp; mask1 ) * f1 ) + ( ( b &amp; mask1 ) * f2 )) &gt;&gt;&gt; 8 ) &amp; mask1 ) \n          | ((((( a &amp; mask2 ) * f1 ) + ( ( b &amp; mask2 ) * f2 )) &gt;&gt;&gt; 8 ) &amp; mask2 );\n}\n</code></pre>\n<p>I have tried setting the masks to <code>mask1 = 0x00ff00ff; mask2 = 0xff00ff00;</code> but the function still only outputs a 3 byte number.</p>\n"},{"tags":["java","jackson","jackson-databind","apache-johnzon"],"owner":{"account_id":13342410,"reputation":33,"user_id":9630238,"display_name":"Francesco Rosso"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":40,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1675188567,"creation_date":1675186631,"question_id":75300987,"body_markdown":"In Apache Johnzon, is there a way to hava a generic field that contains dynamic JSON data, not mappable to a pre-defined POJO?\r\nIn Jackson you can simply use ObjectNode as a generic container, have some JSON processing on it, and then write the whole object in JSON format.\r\n\r\nIn Jackson it works as expected using ObjectNode, here is my code:\r\n```\r\npublic class JsonTest {\r\n  private String myStaticKey = &quot;foo&quot;;\r\n  private ObjectNode jsonData;\r\n\r\n  //code to initialize ObjectNode + getters + setters\r\n\r\n  @JsonIgnore\r\n  public void addValue(String key, String value) {\r\n    jsonData.put(key, value);\r\n  }\r\n\r\n  @JsonIgnore\r\n  public String toJson() {\r\n    return new ObjectMapper().writeValueAsString(this);\r\n  }\r\n}\r\n\r\n```\r\n\r\n```\r\npublic class MainTest {\r\n  public static void main(String[] args) {\r\n    JsonTest t = new JsonTest();\r\n    t.addValue(&quot;myDynamicKey&quot;, &quot;bar&quot;);\r\n    System.out.println(t.toJson());\r\n  }\r\n}\r\n```\r\n\r\nExpected result:\r\n```\r\n{\r\n  &quot;myStaticKey&quot;: &quot;foo&quot;,\r\n  &quot;jsonData&quot;: {\r\n    &quot;myDynamicKey&quot;: &quot;bar&quot;\r\n  }\r\n}\r\n```\r\n","title":"Johnzon sub dynamic json tree mapping","body":"<p>In Apache Johnzon, is there a way to hava a generic field that contains dynamic JSON data, not mappable to a pre-defined POJO?\nIn Jackson you can simply use ObjectNode as a generic container, have some JSON processing on it, and then write the whole object in JSON format.</p>\n<p>In Jackson it works as expected using ObjectNode, here is my code:</p>\n<pre><code>public class JsonTest {\n  private String myStaticKey = &quot;foo&quot;;\n  private ObjectNode jsonData;\n\n  //code to initialize ObjectNode + getters + setters\n\n  @JsonIgnore\n  public void addValue(String key, String value) {\n    jsonData.put(key, value);\n  }\n\n  @JsonIgnore\n  public String toJson() {\n    return new ObjectMapper().writeValueAsString(this);\n  }\n}\n\n</code></pre>\n<pre><code>public class MainTest {\n  public static void main(String[] args) {\n    JsonTest t = new JsonTest();\n    t.addValue(&quot;myDynamicKey&quot;, &quot;bar&quot;);\n    System.out.println(t.toJson());\n  }\n}\n</code></pre>\n<p>Expected result:</p>\n<pre><code>{\n  &quot;myStaticKey&quot;: &quot;foo&quot;,\n  &quot;jsonData&quot;: {\n    &quot;myDynamicKey&quot;: &quot;bar&quot;\n  }\n}\n</code></pre>\n"},{"tags":["java","spring-boot","dependency-injection","constructor-injection"],"comments":[{"owner":{"account_id":6586022,"reputation":76,"user_id":5088766,"display_name":"mcarn"},"score":0,"creation_date":1675189304,"post_id":75301373,"comment_id":132873814,"body_markdown":"Why don&#39;t you inject `JwtUtils` to `AuthTokenFilter`? creating a new instance breaks the purpose of having `@Component` in it.","body":"Why don&#39;t you inject <code>JwtUtils</code> to <code>AuthTokenFilter</code>? creating a new instance breaks the purpose of having <code>@Component</code> in it."},{"owner":{"account_id":8698932,"reputation":322,"user_id":6509481,"accept_rate":50,"display_name":"Marco"},"score":1,"creation_date":1675239785,"post_id":75301373,"comment_id":132883420,"body_markdown":"so you&#39;re telling me to autowire JwtUtils inside WebTokenConfig class and injecting the autowried field to AuthTokenFilter. Ok, it makes sense. Also, since I&#39;m creating a new bean for AuthTokenFilter, it is ok to do a new for it cause it&#39;s a new bean, but for its dependencies probably makes sense to inject the autowired field instead of doing a new, cause it is already a bean in the context. Makes totally sense :) Sorry, still learning spring&#39;s mechanisms ^^","body":"so you&#39;re telling me to autowire JwtUtils inside WebTokenConfig class and injecting the autowried field to AuthTokenFilter. Ok, it makes sense. Also, since I&#39;m creating a new bean for AuthTokenFilter, it is ok to do a new for it cause it&#39;s a new bean, but for its dependencies probably makes sense to inject the autowired field instead of doing a new, cause it is already a bean in the context. Makes totally sense :) Sorry, still learning spring&#39;s mechanisms ^^"}],"owner":{"account_id":8698932,"reputation":322,"user_id":6509481,"accept_rate":50,"display_name":"Marco"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":36,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1675188530,"creation_date":1675188530,"question_id":75301373,"body_markdown":"I have my JWT utils class:\r\n\r\n    @Component\r\n    public class JwtUtils {\r\n        private final String jwtSecret;\r\n        private final int jwtExpirationMs;\r\n    \r\n        public JwtUtils(@Value(&quot;${app.jwtSecret}&quot;) String jwtSecret, @Value(&quot;${app.jwtExpirationMs}&quot;) String jwtExpirationMs)){\r\n    this.jwtSecret = jwtSecret;\r\n    this.jwtExpirationMs = jwtExpirationMs;\r\n        }\r\n    ...\r\n    }\r\n\r\nand inside my WebTokenConfig I need to initialize it for my AuthTokenFilter:\r\n\r\n    @Bean\r\n        public AuthTokenFilter authenticationJwtTokenFilter() {\r\n            return new AuthTokenFilter(new JwtUtils(..., ...), ...);\r\n        }\r\n\r\nSo basically, JwtUtils needs 2 parameters, but those parameters should be set from properties&#39; context. How to handle the constructor&#39;s injection? \r\n\r\nPlus, I&#39;m trying to test JwtUtils class with a junit test with mockito. \r\nUsing @Autowired on fields (and not on constructor) and then instantiating the bean with new JwtUtils(), those parameters are not being init&#39;d, staying null and 0 (even with @TestPropertySource, System.setProperties, ...). That&#39;s why I&#39;m trying with constructor injection (which as I read is always the best option). This way I just have to pass the parameters through the new JwtUtils() and that&#39;s it. \r\n\r\nBut when done inside other beans (no test), it just makes no sense to me to pass them since they should be retrieved from context and not be passed. \r\nI&#39;m probably missing something. ","title":"How to manage Spring @Value parameters&#39; constuctor injection when explicitly instantiating a new bean?","body":"<p>I have my JWT utils class:</p>\n<pre><code>@Component\npublic class JwtUtils {\n    private final String jwtSecret;\n    private final int jwtExpirationMs;\n\n    public JwtUtils(@Value(&quot;${app.jwtSecret}&quot;) String jwtSecret, @Value(&quot;${app.jwtExpirationMs}&quot;) String jwtExpirationMs)){\nthis.jwtSecret = jwtSecret;\nthis.jwtExpirationMs = jwtExpirationMs;\n    }\n...\n}\n</code></pre>\n<p>and inside my WebTokenConfig I need to initialize it for my AuthTokenFilter:</p>\n<pre><code>@Bean\n    public AuthTokenFilter authenticationJwtTokenFilter() {\n        return new AuthTokenFilter(new JwtUtils(..., ...), ...);\n    }\n</code></pre>\n<p>So basically, JwtUtils needs 2 parameters, but those parameters should be set from properties' context. How to handle the constructor's injection?</p>\n<p>Plus, I'm trying to test JwtUtils class with a junit test with mockito.\nUsing @Autowired on fields (and not on constructor) and then instantiating the bean with new JwtUtils(), those parameters are not being init'd, staying null and 0 (even with @TestPropertySource, System.setProperties, ...). That's why I'm trying with constructor injection (which as I read is always the best option). This way I just have to pass the parameters through the new JwtUtils() and that's it.</p>\n<p>But when done inside other beans (no test), it just makes no sense to me to pass them since they should be retrieved from context and not be passed.\nI'm probably missing something.</p>\n"},{"tags":["java","if-statement","coding-style"],"comments":[{"owner":{"account_id":82474,"reputation":11438,"user_id":694469,"accept_rate":77,"display_name":"KajMagnus"},"score":1,"creation_date":1440485535,"post_id":4887212,"comment_id":52279350,"body_markdown":"With _&quot;I cannot view all code of a method in one screen&quot;_, did you mean that they&#39;ve if-elsed so much so the code has become indented so much so that it gets outside the right edge of the screen? Or that if-else takes a bit more space so the method is longer (taller) than what it needs to be? B.t.w. I like guard clauses.","body":"With <i>&quot;I cannot view all code of a method in one screen&quot;</i>, did you mean that they&#39;ve if-elsed so much so the code has become indented so much so that it gets outside the right edge of the screen? Or that if-else takes a bit more space so the method is longer (taller) than what it needs to be? B.t.w. I like guard clauses."},{"owner":{"account_id":128896,"reputation":11693,"user_id":327074,"accept_rate":86,"display_name":"icc97"},"score":0,"creation_date":1441269544,"post_id":4887212,"comment_id":52613134,"body_markdown":"*&quot;even if there is only one comment line in the else block&quot;* - one source for this comes from the book Code Complete. It sounds like they are being too dogmatic about applying it though.","body":"<i>&quot;even if there is only one comment line in the else block&quot;</i> - one source for this comes from the book Code Complete. It sounds like they are being too dogmatic about applying it though."}],"answers":[{"tags":[],"owner":{"account_id":286249,"reputation":43941,"user_id":585411,"accept_rate":60,"display_name":"btilly"},"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1469676293,"creation_date":1296742813,"answer_id":4887272,"question_id":4887212,"body_markdown":"Have them read http://www.cis.temple.edu/~ingargio/cis71/software/roberts/documents/loopexit.txt and see if it will change their minds.  (There is history to their idea, but I side with you.)\r\n\r\n*Edit:* Here are the critical points from the article.  The principle of single exits from control structures was adopted on principle, not observational data. But observational data says that allowing multiple ways of exiting control structures makes certain problems easier to solve accurately, and does not hurt readability. Disallowing it makes code harder and more likely to be buggy. This holds across a wide variety of programmers, from students to textbook writers. Therefore we should allow and use multiple exits where appropriate.","title":"Shall I use guard clause, and try to avoid else clause?","body":"<p>Have them read <a href=\"http://www.cis.temple.edu/~ingargio/cis71/software/roberts/documents/loopexit.txt\" rel=\"nofollow\">http://www.cis.temple.edu/~ingargio/cis71/software/roberts/documents/loopexit.txt</a> and see if it will change their minds.  (There is history to their idea, but I side with you.)</p>\n\n<p><em>Edit:</em> Here are the critical points from the article.  The principle of single exits from control structures was adopted on principle, not observational data. But observational data says that allowing multiple ways of exiting control structures makes certain problems easier to solve accurately, and does not hurt readability. Disallowing it makes code harder and more likely to be buggy. This holds across a wide variety of programmers, from students to textbook writers. Therefore we should allow and use multiple exits where appropriate.</p>\n"},{"tags":[],"owner":{"account_id":14956,"reputation":30472,"user_id":31141,"accept_rate":79,"display_name":"Marko"},"down_vote_count":0,"up_vote_count":50,"is_accepted":true,"score":50,"last_activity_date":1314693415,"creation_date":1296742851,"answer_id":4887280,"question_id":4887212,"body_markdown":"This is arguable and pure aesthetic question.\r\n\r\nEarly return has been historically avoided in C and similar languages since it was possible to miss resource cleanup which is usually placed at the end of the function in case of early return.\r\n\r\nGiven that Java have exceptions and try, catch, finally, there&#39;s no need to fear early returns.\r\n\r\nPersonaly, I agree with you, since I do early return often - that usually means less code and simpler code flow with less if/else nesting.","title":"Shall I use guard clause, and try to avoid else clause?","body":"<p>This is arguable and pure aesthetic question.</p>\n\n<p>Early return has been historically avoided in C and similar languages since it was possible to miss resource cleanup which is usually placed at the end of the function in case of early return.</p>\n\n<p>Given that Java have exceptions and try, catch, finally, there's no need to fear early returns.</p>\n\n<p>Personaly, I agree with you, since I do early return often - that usually means less code and simpler code flow with less if/else nesting.</p>\n"},{"tags":[],"owner":{"account_id":6664,"reputation":85927,"user_id":11296,"display_name":"Bert F"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1296744544,"creation_date":1296744544,"answer_id":4887611,"question_id":4887212,"body_markdown":"I&#39;m in the multiple-return/return-early camp and I would lobby to convince other engineers of this. You can have great arguments and cite great sources, but in the end, all you can do is make your pitch, suggest compromises, come to a decision, and then work as a team, which ever way it works out. (Although revisiting of the topic from time to time isn&#39;t out of the question either.)\r\n\r\nThis really just comes down to style and, in the grand scheme of things, a relatively minor one.  Overall, you&#39;re a more effective developer if you can adapt to either style.  If this really &quot;makes it difficult ... to follow their coding style&quot;, then I suggest you work on it, because in the end, you&#39;ll end up the better engineer.\r\n\r\nI had an engineer once come to me and insist he be given dispensation to follow his own coding style (and we had a pretty minimal set of guidelines).  He said the established coding style hurt his eyes and made it difficult for him to concentrate (I think he may have even said &quot;nauseous&quot;.)  I told him that if he was going to work on a lot of people&#39;s code, not just code he wrote, and vice versa. If he couldn&#39;t adapt to work with the agreed upon style, I couldn&#39;t use him and that maybe this type of collaborative project wasn&#39;t the right place for him.  Coincidentally, it was less of an issue after that (although every code review was still a battle).","title":"Shall I use guard clause, and try to avoid else clause?","body":"<p>I'm in the multiple-return/return-early camp and I would lobby to convince other engineers of this. You can have great arguments and cite great sources, but in the end, all you can do is make your pitch, suggest compromises, come to a decision, and then work as a team, which ever way it works out. (Although revisiting of the topic from time to time isn't out of the question either.)</p>\n\n<p>This really just comes down to style and, in the grand scheme of things, a relatively minor one.  Overall, you're a more effective developer if you can adapt to either style.  If this really \"makes it difficult ... to follow their coding style\", then I suggest you work on it, because in the end, you'll end up the better engineer.</p>\n\n<p>I had an engineer once come to me and insist he be given dispensation to follow his own coding style (and we had a pretty minimal set of guidelines).  He said the established coding style hurt his eyes and made it difficult for him to concentrate (I think he may have even said \"nauseous\".)  I told him that if he was going to work on a lot of people's code, not just code he wrote, and vice versa. If he couldn't adapt to work with the agreed upon style, I couldn't use him and that maybe this type of collaborative project wasn't the right place for him.  Coincidentally, it was less of an issue after that (although every code review was still a battle).</p>\n"},{"tags":[],"owner":{"account_id":2634317,"reputation":10972,"user_id":2279448,"display_name":"Zoran Horvat"},"down_vote_count":0,"up_vote_count":13,"is_accepted":false,"score":13,"last_activity_date":1436953638,"creation_date":1436953638,"answer_id":31426956,"question_id":4887212,"body_markdown":"Guard clause is a good idea because it clearly indicates that current method is not interested in certain cases. When you clear up at the very beginning of the method that it doesn&#39;t deal with some cases (e.g. when some value is less than zero), then the rest of the method is pure implementation of its responsibility.\r\n\r\nThere is one stronger case of guard clauses - statements that validate input and throw exceptions when some argument is unacceptable, e.g. null. In that case you don&#39;t want to proceed with execution but wish to throw at the very beginning of the method. That is where guard clauses are the best solution because you don&#39;t want to mix exception throwing logic with the core of the method you&#39;re implementing.\r\n\r\nWhen talking about guard clauses that throw exceptions, here is one article about how you can simplify them in C# using extension methods: [How to Reduce Cyclomatic Complexity: Guard Clause][1]. Though that method is not available in Java, it is useful in C#.\r\n\r\n\r\n  [1]: http://www.codinghelmet.com/?path=howto/reduce-cyclomatic-complexity-guard-clause","title":"Shall I use guard clause, and try to avoid else clause?","body":"<p>Guard clause is a good idea because it clearly indicates that current method is not interested in certain cases. When you clear up at the very beginning of the method that it doesn't deal with some cases (e.g. when some value is less than zero), then the rest of the method is pure implementation of its responsibility.</p>\n\n<p>There is one stronger case of guard clauses - statements that validate input and throw exceptions when some argument is unacceptable, e.g. null. In that case you don't want to proceed with execution but wish to throw at the very beginning of the method. That is where guard clauses are the best solution because you don't want to mix exception throwing logic with the core of the method you're implementing.</p>\n\n<p>When talking about guard clauses that throw exceptions, here is one article about how you can simplify them in C# using extension methods: <a href=\"http://www.codinghelmet.com/?path=howto/reduce-cyclomatic-complexity-guard-clause\" rel=\"noreferrer\">How to Reduce Cyclomatic Complexity: Guard Clause</a>. Though that method is not available in Java, it is useful in C#.</p>\n"},{"tags":[],"owner":{"account_id":20632722,"reputation":11,"user_id":15147200,"display_name":"Corey B."},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1675188414,"creation_date":1675188414,"answer_id":75301355,"question_id":4887212,"body_markdown":"My issue with guard clauses is that 1) they can be easily dispersed through code and be easy to miss (this has happened to me on multiple occasions) and 2) I have to remember which code has been &quot;ejected&quot; as I trace code blocks which can become complex and 3) by setting code within if/else you have a contained set of code that you know executes for a given set of criteria. With guard conditions, the criteria is EVERYTHING minus what the guard has ejected. It is much more difficult for me to get my head around that.","title":"Shall I use guard clause, and try to avoid else clause?","body":"<p>My issue with guard clauses is that 1) they can be easily dispersed through code and be easy to miss (this has happened to me on multiple occasions) and 2) I have to remember which code has been &quot;ejected&quot; as I trace code blocks which can become complex and 3) by setting code within if/else you have a contained set of code that you know executes for a given set of criteria. With guard conditions, the criteria is EVERYTHING minus what the guard has ejected. It is much more difficult for me to get my head around that.</p>\n"}],"owner":{"account_id":260039,"reputation":6377,"user_id":543362,"accept_rate":82,"display_name":"chance"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":20523,"favorite_count":0,"down_vote_count":0,"up_vote_count":32,"accepted_answer_id":4887280,"answer_count":5,"score":32,"last_activity_date":1675188414,"creation_date":1296742531,"question_id":4887212,"body_markdown":"I&#39;ve read (e.g. from Martin Fowler) that we should use guard clause instead of single return in a (short) method in OOP. I&#39;ve also read (from somewhere I don&#39;t remember) that else clause should be avoided when possible.\r\n\r\nBut my colleagues (I work in a small team with only 3 guys)  force me not to use multiple returns in a method, and to use else clause as much as possible, even if there is only one comment line in the else block.\r\n\r\nThis makes it difficult for me to follow their coding style, because for example, I cannot view all code of a method in one screen. And when I code, I have to write guard clause first, and then try to convert it into the form with out multiple returns.\r\n\r\nAm I wrong or what should I do with it?\r\n","title":"Shall I use guard clause, and try to avoid else clause?","body":"<p>I've read (e.g. from Martin Fowler) that we should use guard clause instead of single return in a (short) method in OOP. I've also read (from somewhere I don't remember) that else clause should be avoided when possible.</p>\n\n<p>But my colleagues (I work in a small team with only 3 guys)  force me not to use multiple returns in a method, and to use else clause as much as possible, even if there is only one comment line in the else block.</p>\n\n<p>This makes it difficult for me to follow their coding style, because for example, I cannot view all code of a method in one screen. And when I code, I have to write guard clause first, and then try to convert it into the form with out multiple returns.</p>\n\n<p>Am I wrong or what should I do with it?</p>\n"},{"tags":["java","android","android-studio","kotlin"],"comments":[{"owner":{"account_id":39846,"reputation":991133,"user_id":115145,"accept_rate":84,"display_name":"CommonsWare"},"score":1,"creation_date":1675177907,"post_id":75299152,"comment_id":132869949,"body_markdown":"You might be happier switching to the Project view via the selector above the tree. Right now, it looks like you are on the Android view.","body":"You might be happier switching to the Project view via the selector above the tree. Right now, it looks like you are on the Android view."}],"answers":[{"tags":[],"owner":{"account_id":19896142,"reputation":167,"user_id":14577209,"display_name":"Maleesha97"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1675187274,"creation_date":1675187274,"answer_id":75301121,"question_id":75299152,"body_markdown":"If you are not happy with switching the project view,\r\n\r\nYou can right click on the directory that you need to hide and select, \r\n\r\n`Mark Directory as -&gt; excluded`\r\n\r\nif you want to include a directory back, find the path of your excluded directory and,\r\n\r\n`right click -&gt; Mark Directory as -&gt; Cancel Exclusion`\r\n","title":"How to hide generated folders in android studio","body":"<p>If you are not happy with switching the project view,</p>\n<p>You can right click on the directory that you need to hide and select,</p>\n<p><code>Mark Directory as -&gt; excluded</code></p>\n<p>if you want to include a directory back, find the path of your excluded directory and,</p>\n<p><code>right click -&gt; Mark Directory as -&gt; Cancel Exclusion</code></p>\n"},{"tags":[],"owner":{"account_id":24120944,"reputation":21,"user_id":18090127,"display_name":"Khubaib Khan"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1675187617,"creation_date":1675187617,"answer_id":75301180,"question_id":75299152,"body_markdown":"**To hide generated folders in Android Studio:**\r\n\r\nGo to **&quot;File&quot; &gt; &quot;Settings&quot;**.\r\nNavigate to **&quot;Editor&quot; &gt; &quot;File Types&quot;**.\r\nScroll down to **&quot;Ignore files and folders&quot;**.\r\nAdd the folders you want to hide, such as **&quot;build&quot;, &quot;gen&quot;,** and **&quot;out&quot;**.\r\nClick **&quot;Apply&quot;** and **&quot;OK&quot;.**","title":"How to hide generated folders in android studio","body":"<p><strong>To hide generated folders in Android Studio:</strong></p>\n<p>Go to <strong>&quot;File&quot; &gt; &quot;Settings&quot;</strong>.\nNavigate to <strong>&quot;Editor&quot; &gt; &quot;File Types&quot;</strong>.\nScroll down to <strong>&quot;Ignore files and folders&quot;</strong>.\nAdd the folders you want to hide, such as <strong>&quot;build&quot;, &quot;gen&quot;,</strong> and <strong>&quot;out&quot;</strong>.\nClick <strong>&quot;Apply&quot;</strong> and <strong>&quot;OK&quot;.</strong></p>\n"}],"owner":{"account_id":7862760,"reputation":4624,"user_id":5942579,"accept_rate":74,"display_name":"Emmanuel Mtali"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1029,"favorite_count":0,"down_vote_count":0,"up_vote_count":6,"answer_count":2,"score":6,"last_activity_date":1675187617,"creation_date":1675177751,"question_id":75299152,"body_markdown":"I am working on an android project but I see some of the auto-generated code from my file tree as you can see in the picture\r\n\r\nHow can I hide them (the ones with green color)\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/QHTIP.png","title":"How to hide generated folders in android studio","body":"<p>I am working on an android project but I see some of the auto-generated code from my file tree as you can see in the picture</p>\n<p>How can I hide them (the ones with green color)</p>\n<p><a href=\"https://i.stack.imgur.com/QHTIP.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/QHTIP.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":["java","mongodb"],"comments":[{"owner":{"account_id":3631143,"reputation":55363,"user_id":3027266,"accept_rate":75,"display_name":"Wernfried Domscheit"},"score":0,"creation_date":1675236274,"post_id":75301172,"comment_id":132882514,"body_markdown":"I think there is not much you can do, the actual query will also take much time.","body":"I think there is not much you can do, the actual query will also take much time."}],"owner":{"account_id":15979059,"reputation":1072,"user_id":11531156,"display_name":"RCT"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":34,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1675187574,"creation_date":1675187574,"question_id":75301172,"body_markdown":"Using the latest java sync SDK, I would like to log operation execution details only for operations taking longer than expected time. For example, I have a find operation for which I would like to collect execution details when the operation takes longer than 10 ms.\r\n\r\n```Document doc = collection.find(query).explain();```","title":"How to selectively log execution details of MongoDB operations?","body":"<p>Using the latest java sync SDK, I would like to log operation execution details only for operations taking longer than expected time. For example, I have a find operation for which I would like to collect execution details when the operation takes longer than 10 ms.</p>\n<p><code>Document doc = collection.find(query).explain();</code></p>\n"},{"tags":["java","jgit"],"answers":[{"tags":[],"owner":{"account_id":4225459,"reputation":352,"user_id":3459089,"accept_rate":62,"display_name":"Augier"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1395743694,"creation_date":1395743694,"answer_id":22631875,"question_id":22631261,"body_markdown":"Ok, never mind, after hours searching for the answer, I find it right before asking it there...\r\n\r\nSo, the answer is in the [CookBook][1] :\r\n\r\n    Collection&lt;Ref&gt; refs = Git.lsRemoteRepository()\r\n                .setHeads(true)\r\n                .setTags(true)\r\n                .setRemote(REMOTE_URL)\r\n                .call();\r\n\r\n\r\n  [1]: https://github.com/centic9/jgit-cookbook/blob/master/src/main/java/org/dstadler/jgit/porcelain/ListRemoteRepository.java","title":"List branches of a git remote repo without cloning it","body":"<p>Ok, never mind, after hours searching for the answer, I find it right before asking it there...</p>\n\n<p>So, the answer is in the <a href=\"https://github.com/centic9/jgit-cookbook/blob/master/src/main/java/org/dstadler/jgit/porcelain/ListRemoteRepository.java\" rel=\"noreferrer\">CookBook</a> :</p>\n\n<pre><code>Collection&lt;Ref&gt; refs = Git.lsRemoteRepository()\n            .setHeads(true)\n            .setTags(true)\n            .setRemote(REMOTE_URL)\n            .call();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":549364,"reputation":20582,"user_id":2986905,"accept_rate":78,"display_name":"R&#252;diger Herrmann"},"down_vote_count":0,"up_vote_count":5,"is_accepted":true,"score":5,"last_activity_date":1675187306,"creation_date":1395744066,"answer_id":22632027,"question_id":22631261,"body_markdown":"There is the `LsRemoteCommand` to list the branches of a remote repository. To obtain the command, use either\r\n\r\n    Git.wrap(repo).lsRemote()\r\nor\r\n\r\n    Git.lsRemoteRepository()\r\nThe statically created `LsRemoteCommand` has its limitations. For certain transport protocols, a local repository is necessary to obtain configuration settings. Therefore I usually create an empty temporary local repository with `Git.init()` and then use the first approach.\r\n\r\nIf you want to avoid creating the extra repository, you can test with `Transport.open()` if it succeeds without a repository. It throws a `NotSupportedException` otherwise.","title":"List branches of a git remote repo without cloning it","body":"<p>There is the <code>LsRemoteCommand</code> to list the branches of a remote repository. To obtain the command, use either</p>\n<pre><code>Git.wrap(repo).lsRemote()\n</code></pre>\n<p>or</p>\n<pre><code>Git.lsRemoteRepository()\n</code></pre>\n<p>The statically created <code>LsRemoteCommand</code> has its limitations. For certain transport protocols, a local repository is necessary to obtain configuration settings. Therefore I usually create an empty temporary local repository with <code>Git.init()</code> and then use the first approach.</p>\n<p>If you want to avoid creating the extra repository, you can test with <code>Transport.open()</code> if it succeeds without a repository. It throws a <code>NotSupportedException</code> otherwise.</p>\n"}],"owner":{"account_id":4225459,"reputation":352,"user_id":3459089,"accept_rate":62,"display_name":"Augier"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3245,"favorite_count":0,"down_vote_count":0,"up_vote_count":8,"accepted_answer_id":22632027,"answer_count":2,"score":8,"last_activity_date":1675187306,"creation_date":1395742102,"question_id":22631261,"body_markdown":"I was wondering hows it would be possible to list all the branches of a remote Git repo with jgit but without cloning it.\r\n\r\nWhile going through the jgit&#39;s javadoc, I found the [ListBranchCommand][1] but that only seem to work with an already opened Repository object. But I was not able to find how to create a Repository object over HTTP without cloning it in local.\r\n\r\nIs it possible ?\r\nThanks\r\n\r\n  [1]: http://download.eclipse.org/jgit/docs/latest/apidocs/org/eclipse/jgit/api/ListBranchCommand.html","title":"List branches of a git remote repo without cloning it","body":"<p>I was wondering hows it would be possible to list all the branches of a remote Git repo with jgit but without cloning it.</p>\n\n<p>While going through the jgit's javadoc, I found the <a href=\"http://download.eclipse.org/jgit/docs/latest/apidocs/org/eclipse/jgit/api/ListBranchCommand.html\">ListBranchCommand</a> but that only seem to work with an already opened Repository object. But I was not able to find how to create a Repository object over HTTP without cloning it in local.</p>\n\n<p>Is it possible ?\nThanks</p>\n"},{"tags":["java","spring-ws"],"answers":[{"tags":[],"owner":{"account_id":16022447,"reputation":108,"user_id":11563594,"display_name":"M.Shahzad"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1675187025,"creation_date":1675187025,"answer_id":75301064,"question_id":75300983,"body_markdown":"Spring WS supports Java 8 and above, so it should work with Java 17. You can build a SOAP service project using Spring WS in Java 17.","title":"Spring WS(SOAP) in Java 17","body":"<p>Spring WS supports Java 8 and above, so it should work with Java 17. You can build a SOAP service project using Spring WS in Java 17.</p>\n"}],"owner":{"account_id":16543239,"reputation":1,"user_id":11953459,"display_name":"Ali Baizhanov"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":289,"favorite_count":0,"down_vote_count":2,"up_vote_count":0,"answer_count":1,"score":-2,"last_activity_date":1675187025,"creation_date":1675186616,"question_id":75300983,"body_markdown":"Can I use Spring WS module in Java 17 or Spring WS does not support Java 17 yet? \r\n\r\nI need realize how can I build project SOAP service use Spring WS in Java 17","title":"Spring WS(SOAP) in Java 17","body":"<p>Can I use Spring WS module in Java 17 or Spring WS does not support Java 17 yet?</p>\n<p>I need realize how can I build project SOAP service use Spring WS in Java 17</p>\n"},{"tags":["java","spring","spring-boot","datasource","jdbctemplate"],"comments":[{"owner":{"account_id":4470050,"reputation":68258,"user_id":3636601,"accept_rate":75,"display_name":"Jens"},"score":1,"creation_date":1497956232,"post_id":44651076,"comment_id":76287136,"body_markdown":"Can you check if the configuration is used?","body":"Can you check if the configuration is used?"},{"owner":{"account_id":6335906,"reputation":855,"user_id":4919308,"accept_rate":49,"display_name":"mahendra kawde"},"score":0,"creation_date":1497956340,"post_id":44651076,"comment_id":76287224,"body_markdown":"@Jens How can I do so?","body":"@Jens How can I do so?"},{"owner":{"account_id":4470050,"reputation":68258,"user_id":3636601,"accept_rate":75,"display_name":"Jens"},"score":0,"creation_date":1497956373,"post_id":44651076,"comment_id":76287247,"body_markdown":"Add a breakpoint  and run the code in a Debugger or add some logging statements","body":"Add a breakpoint  and run the code in a Debugger or add some logging statements"},{"owner":{"account_id":6335906,"reputation":855,"user_id":4919308,"accept_rate":49,"display_name":"mahendra kawde"},"score":0,"creation_date":1497956416,"post_id":44651076,"comment_id":76287280,"body_markdown":"Is configuration I provided is correct?","body":"Is configuration I provided is correct?"},{"owner":{"account_id":4470050,"reputation":68258,"user_id":3636601,"accept_rate":75,"display_name":"Jens"},"score":0,"creation_date":1497956433,"post_id":44651076,"comment_id":76287298,"body_markdown":"Looks ok for me","body":"Looks ok for me"},{"owner":{"account_id":6335906,"reputation":855,"user_id":4919308,"accept_rate":49,"display_name":"mahendra kawde"},"score":0,"creation_date":1497956451,"post_id":44651076,"comment_id":76287311,"body_markdown":"I am getting this error then No qualifying bean of type &#39;org.springframework.jdbc.core.JdbcTemplate&#39; available: expected at least 1 bean which qualifies as autowire candidate. Dependency annotations: {@org.springframework.beans.factory.annotation.Autowired(required=true), @org.springframework.beans.factory.annotation.Qualifier(value=msMysqlJdbcTemplate)}","body":"I am getting this error then No qualifying bean of type &#39;org.springframework.jdbc.core.JdbcTemplate&#39; available: expected at least 1 bean which qualifies as autowire candidate. Dependency annotations: {@org.springframework.beans.factory.annotation.Autowired(req&zwnj;&#8203;uired=true), @org.springframework.beans.factory.annotation.Qualifier(valu&zwnj;&#8203;e=msMysqlJdbcTemplat&zwnj;&#8203;e)}"},{"owner":{"account_id":4470050,"reputation":68258,"user_id":3636601,"accept_rate":75,"display_name":"Jens"},"score":0,"creation_date":1497956504,"post_id":44651076,"comment_id":76287352,"body_markdown":"Yes i see. But you get it also if the configuration is never readed, because of wrong anotation scan path","body":"Yes i see. But you get it also if the configuration is never readed, because of wrong anotation scan path"},{"owner":{"account_id":6335906,"reputation":855,"user_id":4919308,"accept_rate":49,"display_name":"mahendra kawde"},"score":0,"creation_date":1497956602,"post_id":44651076,"comment_id":76287430,"body_markdown":"In that case let me add my application.properties file code and boot file code","body":"In that case let me add my application.properties file code and boot file code"},{"owner":{"account_id":4470050,"reputation":68258,"user_id":3636601,"accept_rate":75,"display_name":"Jens"},"score":0,"creation_date":1497956643,"post_id":44651076,"comment_id":76287460,"body_markdown":"Why you not simply use a Debugger?","body":"Why you not simply use a Debugger?"},{"owner":{"account_id":6335906,"reputation":855,"user_id":4919308,"accept_rate":49,"display_name":"mahendra kawde"},"score":0,"creation_date":1497956992,"post_id":44651076,"comment_id":76287697,"body_markdown":"I just debug the code and found that it is giving the same error and not even logging or reading any configuration.","body":"I just debug the code and found that it is giving the same error and not even logging or reading any configuration."},{"owner":{"account_id":124772,"reputation":10425,"user_id":320087,"accept_rate":90,"display_name":"Niraj Sonawane"},"score":0,"creation_date":1497957043,"post_id":44651076,"comment_id":76287741,"body_markdown":"where you have imported configuration class MultipleDBConfig  ? also have you added","body":"where you have imported configuration class MultipleDBConfig  ? also have you added"},{"owner":{"account_id":6335906,"reputation":855,"user_id":4919308,"accept_rate":49,"display_name":"mahendra kawde"},"score":0,"creation_date":1497957143,"post_id":44651076,"comment_id":76287821,"body_markdown":"Its in the separate package from main class annotated with @Configuration","body":"Its in the separate package from main class annotated with @Configuration"},{"owner":{"account_id":2030,"reputation":50607,"user_id":2788,"accept_rate":69,"display_name":"Strelok"},"score":0,"creation_date":1497957484,"post_id":44651076,"comment_id":76288088,"body_markdown":"Is the package with the configuration class nested below the package that contains the `@SpringBootApplication` annotated class?","body":"Is the package with the configuration class nested below the package that contains the <code>@SpringBootApplication</code> annotated class?"},{"owner":{"account_id":6335906,"reputation":855,"user_id":4919308,"accept_rate":49,"display_name":"mahendra kawde"},"score":0,"creation_date":1497957546,"post_id":44651076,"comment_id":76288129,"body_markdown":"Yes. its like, com.example contains spring boot class and below that com.example.config contains configuration class","body":"Yes. its like, com.example contains spring boot class and below that com.example.config contains configuration class"},{"owner":{"account_id":4470050,"reputation":68258,"user_id":3636601,"accept_rate":75,"display_name":"Jens"},"score":0,"creation_date":1497957808,"post_id":44651076,"comment_id":76288333,"body_markdown":"@mahendrakawde Can you please add the package declaration to your classes?","body":"@mahendrakawde Can you please add the package declaration to your classes?"},{"owner":{"account_id":6335906,"reputation":855,"user_id":4919308,"accept_rate":49,"display_name":"mahendra kawde"},"score":0,"creation_date":1497958137,"post_id":44651076,"comment_id":76288583,"body_markdown":"I just edited question with package declaration added in it.","body":"I just edited question with package declaration added in it."},{"owner":{"account_id":4470050,"reputation":68258,"user_id":3636601,"accept_rate":75,"display_name":"Jens"},"score":0,"creation_date":1497958571,"post_id":44651076,"comment_id":76288925,"body_markdown":"@mahendrakawde in a comment you wrot *com.example.config contains configuration class*  in the question the package is *com.example*? Also have you tried to clean and rebuild your Project?","body":"@mahendrakawde in a comment you wrot <i>com.example.config contains configuration class</i>  in the question the package is <i>com.example</i>? Also have you tried to clean and rebuild your Project?"},{"owner":{"account_id":6335906,"reputation":855,"user_id":4919308,"accept_rate":49,"display_name":"mahendra kawde"},"score":0,"creation_date":1497960210,"post_id":44651076,"comment_id":76290192,"body_markdown":"Now I just move config class into com.example package where @springBootApplication class is reside. So errors now resolved. But my service class is not getting called explicitly. I dont have any controller in my app. How I can call my service class method.","body":"Now I just move config class into com.example package where @springBootApplication class is reside. So errors now resolved. But my service class is not getting called explicitly. I dont have any controller in my app. How I can call my service class method."},{"owner":{"account_id":4629221,"reputation":2621,"user_id":3752185,"display_name":"Janar"},"score":0,"creation_date":1497960485,"post_id":44651076,"comment_id":76290389,"body_markdown":"how are you trying to call it? You just need to autowire your service and call from there","body":"how are you trying to call it? You just need to autowire your service and call from there"},{"owner":{"account_id":6335906,"reputation":855,"user_id":4919308,"accept_rate":49,"display_name":"mahendra kawde"},"score":0,"creation_date":1497960619,"post_id":44651076,"comment_id":76290483,"body_markdown":"There is nothing in my @ SpringBootApplication class except main() method. And then there is @ Component class in which I am trying to read property files value and pass it onto the method which in turn calling @Service class which is using JdbcTemplate to connect to the database and excute SELECT query there.","body":"There is nothing in my @ SpringBootApplication class except main() method. And then there is @ Component class in which I am trying to read property files value and pass it onto the method which in turn calling @Service class which is using JdbcTemplate to connect to the database and excute SELECT query there."},{"owner":{"account_id":6335906,"reputation":855,"user_id":4919308,"accept_rate":49,"display_name":"mahendra kawde"},"score":0,"creation_date":1497960793,"post_id":44651076,"comment_id":76290595,"body_markdown":"@Jens I have updated question with added code please see","body":"@Jens I have updated question with added code please see"},{"owner":{"account_id":4470050,"reputation":68258,"user_id":3636601,"accept_rate":75,"display_name":"Jens"},"score":0,"creation_date":1497962329,"post_id":44651076,"comment_id":76291732,"body_markdown":"@mahendrakawde Sorry do not get your actual question","body":"@mahendrakawde Sorry do not get your actual question"}],"answers":[{"tags":[],"owner":{"account_id":7023705,"reputation":138,"user_id":5381990,"display_name":"vishal paalakurthi"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1497963453,"creation_date":1497963453,"answer_id":44653719,"question_id":44651076,"body_markdown":"I think issue is with declaring **driver class name** in application.properties   \r\n\r\n    logging.config=./conf/log4j.xml\r\n    \r\n    spring.ds_master_mysql.url = jdbc:mysql://&lt;host&gt;:3306\r\n    spring.ds_master_mysql.username = username\r\n    spring.ds_master_mysql.password = password\r\n    spring.ds_master_mysql.driverClassName=com.mysql.jdbc.Driver\r\n    \r\n     master.db_name=fdmsus_demo\r\n     master.table_name=vitalstats\r\n\r\n**Use below application.properties**:\r\n\r\n     logging.config=./conf/log4j.xml\r\n        \r\n        spring.ds_master_mysql.url = jdbc:mysql://&lt;host&gt;:3306\r\n        spring.ds_master_mysql.username = username\r\n        spring.ds_master_mysql.password = password\r\n        spring.ds_master_mysql.driver-class-name=com.mysql.jdbc.Driver\r\n        \r\n         master.db_name=fdmsus_demo\r\n         master.table_name=vitalstats","title":"Spring boot multiple datasource configuration","body":"<p>I think issue is with declaring <strong>driver class name</strong> in application.properties   </p>\n\n<pre><code>logging.config=./conf/log4j.xml\n\nspring.ds_master_mysql.url = jdbc:mysql://&lt;host&gt;:3306\nspring.ds_master_mysql.username = username\nspring.ds_master_mysql.password = password\nspring.ds_master_mysql.driverClassName=com.mysql.jdbc.Driver\n\n master.db_name=fdmsus_demo\n master.table_name=vitalstats\n</code></pre>\n\n<p><strong>Use below application.properties</strong>:</p>\n\n<pre><code> logging.config=./conf/log4j.xml\n\n    spring.ds_master_mysql.url = jdbc:mysql://&lt;host&gt;:3306\n    spring.ds_master_mysql.username = username\n    spring.ds_master_mysql.password = password\n    spring.ds_master_mysql.driver-class-name=com.mysql.jdbc.Driver\n\n     master.db_name=fdmsus_demo\n     master.table_name=vitalstats\n</code></pre>\n"},{"tags":[],"owner":{"account_id":18531683,"reputation":1,"user_id":13502312,"display_name":"Johan Moncada"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1588984153,"creation_date":1588984153,"answer_id":61690238,"question_id":44651076,"body_markdown":"SpringBoot configuration multiple datasource: \r\n\r\napplication.properties\r\n```\r\n#spring.jpa.hibernate.naming-strategy = org.hibernate.cfg.ImprovedNamingStrategy\r\nspring.jpa.generate-ddl=true\r\nspring.jpa.database=default\r\nlogging.level.org.springframework = info\r\nspring.jpa.show-sql=true\r\nspring.jpa.open-in-view=true\r\nspring.jpa.hibernate.ddl-auto=create-drop\r\n\r\n# Connection properties of Data Source A\r\nspring.datasource.a.url=jdbc:mysql://localhost:3306/demo1?serverTimezone=UTC\r\nspring.datasource.a.jdbcUrl=${spring.datasource.a.url}\r\nspring.datasource.a.username = root\r\nspring.datasource.a.password =\r\nspring.datasource.a.driverClassName=com.mysql.cj.jdbc.Driver\r\nspring.datasource.a.hibernate.dialect=org.hibernate.dialect.MySQL5Dialect\r\n\r\n\r\n# Connection properties of Data Source B\r\nspring.datasource.b.url=jdbc:mysql://localhost:3306/demo2?serverTimezone=UTC\r\nspring.datasource.b.jdbcUrl=${spring.datasource.b.url}\r\nspring.datasource.b.username = root\r\nspring.datasource.b.password =\r\nspring.datasource.b.driverClassName=com.mysql.cj.jdbc.Driver\r\nspring.datasource.b.hibernate.dialect=org.hibernate.dialect.MySQL5Dialect\r\n```\r\n\r\nConfigA.java\r\n```\r\n@Configuration\r\n@EnableTransactionManagement\r\n@EnableJpaRepositories(basePackages = {&quot;api.a.repo&quot;})\r\npublic class ConfigA {\r\n\t@Autowired\r\n\tprivate Environment env;\r\n\t\r\n    @Primary\r\n    @Bean(name = &quot;dataSourceA&quot;)\r\n    @ConfigurationProperties(prefix = &quot;spring.datasource.a&quot;)\r\n    public DataSource dataSource() {\r\n        return DataSourceBuilder.create().build();\r\n    }\r\n\r\n    @Primary\r\n    @Bean(name = &quot;entityManagerFactoryA&quot;)\r\n    public LocalContainerEntityManagerFactoryBean entityManagerFactory(EntityManagerFactoryBuilder builder,\r\n                                                                       @Qualifier(&quot;dataSourceA&quot;) DataSource dataSource) {\r\n        \r\n    \tMap&lt;String, Object&gt; properties = new HashMap&lt;&gt;();\r\n\t\tproperties.put(&quot;hibernate.show-sql&quot;, env.getProperty(&quot;spring.datasource.a.jpa.show-sql&quot;));\r\n\t\tproperties.put(&quot;spring.jpa.hibernate.ddl-auto&quot;, env.getProperty(&quot;spring.datasource.a.hibernate.dialect&quot;));\r\n\t\tproperties.put(&quot;hibernate.dialect&quot;, env.getProperty(&quot;spring.datasource.a.hibernate.dialect&quot;));\r\n\t\t\r\n    \treturn builder\r\n            .dataSource(dataSource)\r\n            .properties(properties)\r\n            .packages(&quot;api.a.model&quot;)\r\n            .persistenceUnit(&quot;datasourceA&quot;)\r\n            .build();\r\n    }\r\n\r\n    @Primary\r\n    @Bean(name = &quot;transactionManagerA&quot;)\r\n    public PlatformTransactionManager transactionManager(@Qualifier(&quot;entityManagerFactoryA&quot;) EntityManagerFactory entityManagerFactory) {\r\n        return new JpaTransactionManager(entityManagerFactory);\r\n    }\r\n}\r\n```\r\nConfigB.java\r\n\r\n```\r\n@Configuration\r\n@EnableTransactionManagement\r\n@EnableJpaRepositories(basePackages = {&quot;api.b.repo&quot;})\r\npublic class ConfigB {\r\n\r\n\t@Autowired\r\n\tprivate Environment env;\r\n\t\r\n    @Bean(name = &quot;dataSourceB&quot;)\r\n    @ConfigurationProperties(prefix = &quot;spring.datasource.b&quot;)\r\n    public DataSource dataSource() {\r\n        return DataSourceBuilder.create().build();\r\n    }\r\n\r\n    @Bean(name = &quot;entityManagerFactoryB&quot;)\r\n    public LocalContainerEntityManagerFactoryBean entityManagerFactory(EntityManagerFactoryBuilder builder,\r\n                                                                       @Qualifier(&quot;dataSourceB&quot;) DataSource dataSource) {\r\n    \tMap&lt;String, Object&gt; properties = new HashMap&lt;&gt;();\r\n\t\tproperties.put(&quot;hibernate.show-sql&quot;, env.getProperty(&quot;spring.datasource.b.jpa.show-sql&quot;));\r\n\t\tproperties.put(&quot;spring.jpa.hibernate.ddl-auto&quot;, env.getProperty(&quot;spring.datasource.b.hibernate.dialect&quot;));\r\n\t\tproperties.put(&quot;hibernate.dialect&quot;, env.getProperty(&quot;spring.datasource.b.hibernate.dialect&quot;));\r\n\t\t\r\n    \treturn builder\r\n            .dataSource(dataSource)\r\n            .packages(&quot;api.b.model&quot;)\r\n            .persistenceUnit(&quot;datasourceB&quot;)\r\n            .build();\r\n    }\r\n\r\n\r\n    @Bean(name = &quot;transactionManagerB&quot;)\r\n    public PlatformTransactionManager transactionManager(@Qualifier(&quot;entityManagerFactoryB&quot;) EntityManagerFactory entityManagerFactory) {\r\n        return new JpaTransactionManager(entityManagerFactory);\r\n    }\r\n}\r\n```\r\n\r\nvisit : [https://github.com/johanmoncada/OpenWork][1]\r\n\r\n\r\n  [1]: https://github.com/johanmoncada/OpenWork","title":"Spring boot multiple datasource configuration","body":"<p>SpringBoot configuration multiple datasource: </p>\n\n<p>application.properties</p>\n\n<pre><code>#spring.jpa.hibernate.naming-strategy = org.hibernate.cfg.ImprovedNamingStrategy\nspring.jpa.generate-ddl=true\nspring.jpa.database=default\nlogging.level.org.springframework = info\nspring.jpa.show-sql=true\nspring.jpa.open-in-view=true\nspring.jpa.hibernate.ddl-auto=create-drop\n\n# Connection properties of Data Source A\nspring.datasource.a.url=jdbc:mysql://localhost:3306/demo1?serverTimezone=UTC\nspring.datasource.a.jdbcUrl=${spring.datasource.a.url}\nspring.datasource.a.username = root\nspring.datasource.a.password =\nspring.datasource.a.driverClassName=com.mysql.cj.jdbc.Driver\nspring.datasource.a.hibernate.dialect=org.hibernate.dialect.MySQL5Dialect\n\n\n# Connection properties of Data Source B\nspring.datasource.b.url=jdbc:mysql://localhost:3306/demo2?serverTimezone=UTC\nspring.datasource.b.jdbcUrl=${spring.datasource.b.url}\nspring.datasource.b.username = root\nspring.datasource.b.password =\nspring.datasource.b.driverClassName=com.mysql.cj.jdbc.Driver\nspring.datasource.b.hibernate.dialect=org.hibernate.dialect.MySQL5Dialect\n</code></pre>\n\n<p>ConfigA.java</p>\n\n<pre><code>@Configuration\n@EnableTransactionManagement\n@EnableJpaRepositories(basePackages = {\"api.a.repo\"})\npublic class ConfigA {\n    @Autowired\n    private Environment env;\n\n    @Primary\n    @Bean(name = \"dataSourceA\")\n    @ConfigurationProperties(prefix = \"spring.datasource.a\")\n    public DataSource dataSource() {\n        return DataSourceBuilder.create().build();\n    }\n\n    @Primary\n    @Bean(name = \"entityManagerFactoryA\")\n    public LocalContainerEntityManagerFactoryBean entityManagerFactory(EntityManagerFactoryBuilder builder,\n                                                                       @Qualifier(\"dataSourceA\") DataSource dataSource) {\n\n        Map&lt;String, Object&gt; properties = new HashMap&lt;&gt;();\n        properties.put(\"hibernate.show-sql\", env.getProperty(\"spring.datasource.a.jpa.show-sql\"));\n        properties.put(\"spring.jpa.hibernate.ddl-auto\", env.getProperty(\"spring.datasource.a.hibernate.dialect\"));\n        properties.put(\"hibernate.dialect\", env.getProperty(\"spring.datasource.a.hibernate.dialect\"));\n\n        return builder\n            .dataSource(dataSource)\n            .properties(properties)\n            .packages(\"api.a.model\")\n            .persistenceUnit(\"datasourceA\")\n            .build();\n    }\n\n    @Primary\n    @Bean(name = \"transactionManagerA\")\n    public PlatformTransactionManager transactionManager(@Qualifier(\"entityManagerFactoryA\") EntityManagerFactory entityManagerFactory) {\n        return new JpaTransactionManager(entityManagerFactory);\n    }\n}\n</code></pre>\n\n<p>ConfigB.java</p>\n\n<pre><code>@Configuration\n@EnableTransactionManagement\n@EnableJpaRepositories(basePackages = {\"api.b.repo\"})\npublic class ConfigB {\n\n    @Autowired\n    private Environment env;\n\n    @Bean(name = \"dataSourceB\")\n    @ConfigurationProperties(prefix = \"spring.datasource.b\")\n    public DataSource dataSource() {\n        return DataSourceBuilder.create().build();\n    }\n\n    @Bean(name = \"entityManagerFactoryB\")\n    public LocalContainerEntityManagerFactoryBean entityManagerFactory(EntityManagerFactoryBuilder builder,\n                                                                       @Qualifier(\"dataSourceB\") DataSource dataSource) {\n        Map&lt;String, Object&gt; properties = new HashMap&lt;&gt;();\n        properties.put(\"hibernate.show-sql\", env.getProperty(\"spring.datasource.b.jpa.show-sql\"));\n        properties.put(\"spring.jpa.hibernate.ddl-auto\", env.getProperty(\"spring.datasource.b.hibernate.dialect\"));\n        properties.put(\"hibernate.dialect\", env.getProperty(\"spring.datasource.b.hibernate.dialect\"));\n\n        return builder\n            .dataSource(dataSource)\n            .packages(\"api.b.model\")\n            .persistenceUnit(\"datasourceB\")\n            .build();\n    }\n\n\n    @Bean(name = \"transactionManagerB\")\n    public PlatformTransactionManager transactionManager(@Qualifier(\"entityManagerFactoryB\") EntityManagerFactory entityManagerFactory) {\n        return new JpaTransactionManager(entityManagerFactory);\n    }\n}\n</code></pre>\n\n<p>visit : <a href=\"https://github.com/johanmoncada/OpenWork\" rel=\"nofollow noreferrer\">https://github.com/johanmoncada/OpenWork</a></p>\n"},{"tags":[],"owner":{"account_id":9792389,"reputation":1,"user_id":7256579,"display_name":"MDHZAMIR"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1675187020,"creation_date":1675186079,"answer_id":75300869,"question_id":44651076,"body_markdown":"I faced the same issue a few days back and solved it. I&#39;m using **spring boot version 3.0.1** and **java version 19**. Here is the source code\r\n\r\n**pom.xml**\r\n\r\n    &lt;dependency&gt;\r\n    \t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t&lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n    &lt;/dependency&gt;\r\n    \r\n    &lt;dependency&gt;\r\n    \t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t&lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\r\n    &lt;/dependency&gt;\r\n    \r\n    &lt;dependency&gt;\r\n    \t&lt;groupId&gt;mysql&lt;/groupId&gt;\r\n    \t&lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;\r\n    &lt;/dependency&gt;\r\n    **for oracle db**\r\n    &lt;dependency&gt;\r\n    \t&lt;groupId&gt;com.oracle.database.jdbc&lt;/groupId&gt;\r\n    \t&lt;artifactId&gt;ojdbc8&lt;/artifactId&gt;\r\n    \t&lt;scope&gt;runtime&lt;/scope&gt;\r\n    &lt;/dependency&gt;\r\n    **for postgresql db**\r\n    &lt;dependency&gt;\r\n    \t&lt;groupId&gt;org.postgresql&lt;/groupId&gt;\r\n    \t&lt;artifactId&gt;postgresql&lt;/artifactId&gt;\r\n    \t&lt;scope&gt;runtime&lt;/scope&gt;\r\n    &lt;/dependency&gt;\r\n\r\n**application.properties**\r\n\r\n    #first DB MYSQL\r\n    first.db.datasource.jdbc-url: jdbc:mysql://localhost:3306/test_db\r\n    first.db.datasource.username: \r\n    first.db.datasource.password: \r\n    first.db.datasource.driverClassName: com.mysql.jdbc.Driver\r\n    #second DB mysql ...\r\n    second.db.datasource.jdbc-url: jdbc:mysql://localhost:3308/test_db_2\r\n    second.db.datasource.username: \r\n    second.db.datasource.password: \r\n    second.db.datasource.driverClassName: com.mysql.jdbc.Driver\r\n\r\nConfig Class for the first datasource\r\n```\r\n@Configuration\r\n@EnableTransactionManagement\r\n@EnableJpaRepositories(entityManagerFactoryRef = &quot;firstDBEntityManagerFactory&quot;,\r\n        transactionManagerRef = &quot;firstDBTransactionManager&quot;,\r\n        basePackages = {&quot;com.*.*.repository&quot;})\r\npublic class FirstDbConfig {\r\n    @Primary\r\n    @Bean(name = &quot;firstDBDataSource&quot;)\r\n    @ConfigurationProperties(prefix = &quot;first.db.datasource&quot;)\r\n    public DataSource firstDataSource() {\r\n\t\treturn DataSourceBuilder.create().build();\r\n    }\r\n\r\n    @Primary\r\n    @Bean(name = &quot;firstDBEntityManagerFactory&quot;)\r\n    public LocalContainerEntityManagerFactoryBean entityManagerFactory(EntityManagerFactoryBuilder builder,\r\n                                                                       @Qualifier(&quot;firstDBDataSource&quot;) DataSource dataSource) {\r\n        return builder.dataSource(dataSource).packages(&quot;com.*.*.entity&quot;)\r\n                .persistenceUnit(&quot;db1&quot;).build();\r\n    }\r\n\r\n    @Primary\r\n    @Bean(name = &quot;firstDBTransactionManager&quot;)\r\n    public PlatformTransactionManager firstDBTransactionManager(@Qualifier(&quot;firstDBEntityManagerFactory&quot;) EntityManagerFactory firstDBEntityManagerFactory) {\r\n        return new JpaTransactionManager(firstDBEntityManagerFactory);\r\n    }\r\n}\r\n```\r\n\r\nConfig Class for the second datasource\r\n\r\n```\r\n@Configuration\r\n@EnableTransactionManagement\r\n@EnableJpaRepositories(entityManagerFactoryRef = &quot;secondDBEntityManagerFactory&quot;,\r\n        transactionManagerRef = &quot;secondDBTransactionManager&quot;,\r\n        basePackages = {&quot;com.*.*.seconddb.repository&quot;})\r\npublic class SecondDbConfig {\r\n\r\n    @Bean(name = &quot;secondDBDataSource&quot;)\r\n    @ConfigurationProperties(prefix = &quot;second.db.datasource&quot;)\r\n    public DataSource secondDataSource() {\r\n\t\treturn DataSourceBuilder.create().build();\r\n    }\r\n\r\n    @Bean(name = &quot;secondDBEntityManagerFactory&quot;)\r\n    public LocalContainerEntityManagerFactoryBean secondDBEntityManagerFactory(EntityManagerFactoryBuilder builder, @Qualifier(&quot;secondDBDataSource&quot;) DataSource dataSource) {\r\n        return builder.dataSource(dataSource)\r\n                .packages(&quot;com.*.*.seconddb.entity&quot;)\r\n                .persistenceUnit(&quot;db2&quot;)\r\n                .build();\r\n    }\r\n\r\n    @Bean(name = &quot;secondDBTransactionManager&quot;)\r\n    public PlatformTransactionManager secondDBTransactionManager(@Qualifier(&quot;secondDBEntityManagerFactory&quot;) EntityManagerFactory secondDBEntityManagerFactory) {\r\n        return new JpaTransactionManager(secondDBEntityManagerFactory);\r\n    }\r\n}\r\n```\r\n\r\n ","title":"Spring boot multiple datasource configuration","body":"<p>I faced the same issue a few days back and solved it. I'm using <strong>spring boot version 3.0.1</strong> and <strong>java version 19</strong>. Here is the source code</p>\n<p><strong>pom.xml</strong></p>\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n&lt;/dependency&gt;\n\n&lt;dependency&gt;\n    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\n&lt;/dependency&gt;\n\n&lt;dependency&gt;\n    &lt;groupId&gt;mysql&lt;/groupId&gt;\n    &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;\n&lt;/dependency&gt;\n**for oracle db**\n&lt;dependency&gt;\n    &lt;groupId&gt;com.oracle.database.jdbc&lt;/groupId&gt;\n    &lt;artifactId&gt;ojdbc8&lt;/artifactId&gt;\n    &lt;scope&gt;runtime&lt;/scope&gt;\n&lt;/dependency&gt;\n**for postgresql db**\n&lt;dependency&gt;\n    &lt;groupId&gt;org.postgresql&lt;/groupId&gt;\n    &lt;artifactId&gt;postgresql&lt;/artifactId&gt;\n    &lt;scope&gt;runtime&lt;/scope&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p><strong>application.properties</strong></p>\n<pre><code>#first DB MYSQL\nfirst.db.datasource.jdbc-url: jdbc:mysql://localhost:3306/test_db\nfirst.db.datasource.username: \nfirst.db.datasource.password: \nfirst.db.datasource.driverClassName: com.mysql.jdbc.Driver\n#second DB mysql ...\nsecond.db.datasource.jdbc-url: jdbc:mysql://localhost:3308/test_db_2\nsecond.db.datasource.username: \nsecond.db.datasource.password: \nsecond.db.datasource.driverClassName: com.mysql.jdbc.Driver\n</code></pre>\n<p>Config Class for the first datasource</p>\n<pre><code>@Configuration\n@EnableTransactionManagement\n@EnableJpaRepositories(entityManagerFactoryRef = &quot;firstDBEntityManagerFactory&quot;,\n        transactionManagerRef = &quot;firstDBTransactionManager&quot;,\n        basePackages = {&quot;com.*.*.repository&quot;})\npublic class FirstDbConfig {\n    @Primary\n    @Bean(name = &quot;firstDBDataSource&quot;)\n    @ConfigurationProperties(prefix = &quot;first.db.datasource&quot;)\n    public DataSource firstDataSource() {\n        return DataSourceBuilder.create().build();\n    }\n\n    @Primary\n    @Bean(name = &quot;firstDBEntityManagerFactory&quot;)\n    public LocalContainerEntityManagerFactoryBean entityManagerFactory(EntityManagerFactoryBuilder builder,\n                                                                       @Qualifier(&quot;firstDBDataSource&quot;) DataSource dataSource) {\n        return builder.dataSource(dataSource).packages(&quot;com.*.*.entity&quot;)\n                .persistenceUnit(&quot;db1&quot;).build();\n    }\n\n    @Primary\n    @Bean(name = &quot;firstDBTransactionManager&quot;)\n    public PlatformTransactionManager firstDBTransactionManager(@Qualifier(&quot;firstDBEntityManagerFactory&quot;) EntityManagerFactory firstDBEntityManagerFactory) {\n        return new JpaTransactionManager(firstDBEntityManagerFactory);\n    }\n}\n</code></pre>\n<p>Config Class for the second datasource</p>\n<pre><code>@Configuration\n@EnableTransactionManagement\n@EnableJpaRepositories(entityManagerFactoryRef = &quot;secondDBEntityManagerFactory&quot;,\n        transactionManagerRef = &quot;secondDBTransactionManager&quot;,\n        basePackages = {&quot;com.*.*.seconddb.repository&quot;})\npublic class SecondDbConfig {\n\n    @Bean(name = &quot;secondDBDataSource&quot;)\n    @ConfigurationProperties(prefix = &quot;second.db.datasource&quot;)\n    public DataSource secondDataSource() {\n        return DataSourceBuilder.create().build();\n    }\n\n    @Bean(name = &quot;secondDBEntityManagerFactory&quot;)\n    public LocalContainerEntityManagerFactoryBean secondDBEntityManagerFactory(EntityManagerFactoryBuilder builder, @Qualifier(&quot;secondDBDataSource&quot;) DataSource dataSource) {\n        return builder.dataSource(dataSource)\n                .packages(&quot;com.*.*.seconddb.entity&quot;)\n                .persistenceUnit(&quot;db2&quot;)\n                .build();\n    }\n\n    @Bean(name = &quot;secondDBTransactionManager&quot;)\n    public PlatformTransactionManager secondDBTransactionManager(@Qualifier(&quot;secondDBEntityManagerFactory&quot;) EntityManagerFactory secondDBEntityManagerFactory) {\n        return new JpaTransactionManager(secondDBEntityManagerFactory);\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":6335906,"reputation":855,"user_id":4919308,"accept_rate":49,"display_name":"mahendra kawde"},"comment_count":22,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":809,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":3,"score":0,"last_activity_date":1675187020,"creation_date":1497955988,"question_id":44651076,"body_markdown":"I am trying to configure multiple data sources in spring boot app. But I am getting following error when application is about to boot.\r\n\r\n    Caused by: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name &#39;mySQLReplicationStatusService&#39;: Unsatisfied dependency expressed through field &#39;jdbcTemplate&#39;; nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: No qualifying bean of type &#39;org.springframework.jdbc.core.JdbcTemplate&#39; available: expected at least 1 bean which qualifies as autowire candidate. Dependency annotations: {@org.springframework.beans.factory.annotation.Autowired(required=true), @org.springframework.beans.factory.annotation.Qualifier(value=msMysqlJdbcTemplate)}\r\n    \tat org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.inject(AutowiredAnnotationBeanPostProcessor.java:588)\r\n    \tat org.springframework.beans.factory.annotation.InjectionMetadata.inject(InjectionMetadata.java:88)\r\n    \tat org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessPropertyValues(AutowiredAnnotationBeanPostProcessor.java:366)\r\n    \tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1264)\r\n    \tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:553)\r\n    \tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:483)\r\n    \tat org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:306)\r\n    \tat org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:230)\r\n    \tat org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:302)\r\n    \tat org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:197)\r\n    \tat org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:761)\r\n    \tat org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:867)\r\n    \tat org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:543)\r\n    \tat org.springframework.boot.SpringApplication.refresh(SpringApplication.java:693)\r\n    \tat org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:360)\r\n    \tat org.springframework.boot.SpringApplication.run(SpringApplication.java:303)\r\n    \tat org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:120)\r\n    \tat org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:98)\r\n    \tat org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:116)\r\n    \tat org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:83)\r\n    \tat org.springframework.boot.test.autoconfigure.SpringBootDependencyInjectionTestExecutionListener.prepareTestInstance(SpringBootDependencyInjectionTestExecutionListener.java:47)\r\n    \tat org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:230)\r\n    \tat org.springframework.test.context.junit4.SpringJUnit4ClassRunner.createTest(SpringJUnit4ClassRunner.java:228)\r\n    \tat org.springframework.test.context.junit4.SpringJUnit4ClassRunner$1.runReflectiveCall(SpringJUnit4ClassRunner.java:287)\r\n    \tat org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)\r\n    \tat org.springframework.test.context.junit4.SpringJUnit4ClassRunner.methodBlock(SpringJUnit4ClassRunner.java:289)\r\n    \tat org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:247)\r\n    \tat org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:94)\r\n    \tat org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)\r\n    \tat org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)\r\n    \tat org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)\r\n    \tat org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)\r\n    \tat org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)\r\n    \tat org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61)\r\n    \tat org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:70)\r\n    \tat org.junit.runners.ParentRunner.run(ParentRunner.java:363)\r\n    \tat org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:191)\r\n    \tat org.apache.maven.surefire.junit4.JUnit4Provider.execute(JUnit4Provider.java:283)\r\n    \tat org.apache.maven.surefire.junit4.JUnit4Provider.executeWithRerun(JUnit4Provider.java:173)\r\n    \tat org.apache.maven.surefire.junit4.JUnit4Provider.executeTestSet(JUnit4Provider.java:153)\r\n    \tat org.apache.maven.surefire.junit4.JUnit4Provider.invoke(JUnit4Provider.java:128)\r\n    \tat org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:203)\r\n    \tat org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:155)\r\n    \tat org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:103)\r\n    Caused by: org.springframework.beans.factory.NoSuchBeanDefinitionException: No qualifying bean of type &#39;org.springframework.jdbc.core.JdbcTemplate&#39; available: expected at least 1 bean which qualifies as autowire candidate. Dependency annotations: {@org.springframework.beans.factory.annotation.Autowired(required=true), @org.springframework.beans.factory.annotation.Qualifier(value=msMysqlJdbcTemplate)}\r\n    \tat org.springframework.beans.factory.support.DefaultListableBeanFactory.raiseNoMatchingBeanFound(DefaultListableBeanFactory.java:1493)\r\n    \tat org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1104)\r\n    \tat org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1066)\r\n    \tat org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.inject(AutowiredAnnotationBeanPostProcessor.java:585)\r\n    \tat org.springframework.beans.factory.annotation.InjectionMetadata.inject(InjectionMetadata.java:88)\r\n    \tat org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessPropertyValues(AutowiredAnnotationBeanPostProcessor.java:366)\r\n    \tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1264)\r\n    \tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:553)\r\n    \tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:483)\r\n    \tat org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:306)\r\n    \tat org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:230)\r\n    \tat org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:302)\r\n    \tat org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:197)\r\n    \tat org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:761)\r\n    \tat org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:867)\r\n    \tat org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:543)\r\n    \tat org.springframework.boot.SpringApplication.refresh(SpringApplication.java:693)\r\n    \tat org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:360)\r\n    \tat org.springframework.boot.SpringApplication.run(SpringApplication.java:303)\r\n    \tat org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:120)\r\n    \tat org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:98)\r\n    \tat org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:116)\r\n    \tat org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:83)\r\n    \tat org.springframework.boot.test.autoconfigure.SpringBootDependencyInjectionTestExecutionListener.prepareTestInstance(SpringBootDependencyInjectionTestExecutionListener.java:47)\r\n    \tat org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:230)\r\n    \tat org.springframework.test.context.junit4.SpringJUnit4ClassRunner.createTest(SpringJUnit4ClassRunner.java:228)\r\n    \tat org.springframework.test.context.junit4.SpringJUnit4ClassRunner$1.runReflectiveCall(SpringJUnit4ClassRunner.java:287)\r\n    \tat org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)\r\n    \tat org.springframework.test.context.junit4.SpringJUnit4ClassRunner.methodBlock(SpringJUnit4ClassRunner.java:289)\r\n    \tat org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:247)\r\n    \tat org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:94)\r\n    \tat org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)\r\n    \tat org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)\r\n    \tat org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)\r\n    \tat org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)\r\n    \tat org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)\r\n    \tat org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61)\r\n    \tat org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:70)\r\n    \tat org.junit.runners.ParentRunner.run(ParentRunner.java:363)\r\n    \tat org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:191)\r\n    \tat org.apache.maven.surefire.junit4.JUnit4Provider.execute(JUnit4Provider.java:283)\r\n    \tat org.apache.maven.surefire.junit4.JUnit4Provider.executeWithRerun(JUnit4Provider.java:173)\r\n    \tat org.apache.maven.surefire.junit4.JUnit4Provider.executeTestSet(JUnit4Provider.java:153)\r\n    \tat org.apache.maven.surefire.junit4.JUnit4Provider.invoke(JUnit4Provider.java:128)\r\n    \tat org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:203)\r\n    \tat org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:155)\r\n    \tat org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:103)\r\n\r\n\r\nHere is my configuration class looks like:\r\n\r\n    package com.example;\r\n        @Configuration\r\n        public class MultipleDBConfig {\r\n        \r\n        \t\r\n        \t@Bean(name = &quot;masterMysqlDb&quot;)\r\n        \t@Primary\r\n        \t@ConfigurationProperties(prefix = &quot;spring.ds_master_mysql&quot;)\r\n        \tpublic DataSource masterMysqlDataSource() {\r\n        \t\treturn DataSourceBuilder.create().build();\r\n        \t}\r\n        \t\r\n        \t@Bean(name = &quot;msMysqlJdbcTemplate&quot;)\r\n        \tpublic JdbcTemplate masterJdbcTemplate(@Qualifier(&quot;masterMysqlDb&quot;) DataSource masterMysqlDb) {\r\n        \t\treturn new JdbcTemplate(masterMysqlDb);\r\n        \t}\r\n        \t\r\n        \t@Bean(name = &quot;slaveMysqlDb&quot;)\r\n        \t@ConfigurationProperties(prefix = &quot;spring.ds_slave_mysql&quot;)\r\n        \tpublic DataSource slaveMysqlDataSource() {\r\n        \t\treturn DataSourceBuilder.create().build();\r\n        \t}\r\n        \t\r\n        \t@Bean(name = &quot;slaveMysqlJdbcTemplate&quot;)\r\n        \tpublic JdbcTemplate slaveJdbcTemplate(@Qualifier(&quot;slaveMysqlDb&quot;) DataSource dsSlaveMySQL) {\r\n        \t\treturn new JdbcTemplate(dsSlaveMySQL);\r\n        \t}\r\n        }\r\n\r\nHere is my service class:\r\n\r\n        package com.example.replication.service;\r\n           @Service\r\n    public class MySQLReplicationStatusService {\r\n    \r\n    \t@Autowired\r\n    \t@Qualifier(&quot;msMysqlJdbcTemplate&quot;)\r\n    \tprivate JdbcTemplate jdbcTemplate;\r\n    \r\n    \t@Autowired\r\n    \t@Qualifier(&quot;slaveMysqlJdbcTemplate&quot;)\r\n    \tprivate JdbcTemplate slaveJdbcTemplate;\r\n    \t\r\n    \tpublic void checkReplicationStatus(String dbName, String tableName){\r\n    \t\tSystem.out.println(&quot;In checkReplicationStatus&quot;);\r\n    \t\tConnection conn_master = null;\r\n    \t\tStatement stmt_master = null;\r\n    \t\tStringBuilder sbSql_master = null;\r\n    \t\tResultSet rs_master = null;\r\n    \t\t\r\n    \t\tConnection conn_slave = null;\r\n    \t\tStatement stmt_slave = null;\r\n    \t\tStringBuilder sbSql_slave = null;\r\n    \t\tResultSet rs_slave = null;\r\n    \t\t\r\n    \t\ttry{\r\n    \t\t\tconn_master = jdbcTemplate.getDataSource().getConnection();\r\n    \t\t\tstmt_master = conn_master.createStatement();\r\n    \t\t\tsbSql_master = new StringBuilder();\r\n    \t\t\tsbSql_master.append(&quot;SELECT COLUMN_NAME&quot;);\r\n    \t\t\tsbSql_master.append(&quot;FROM information_schema.COLUMNS&quot;);\r\n    \t\t\tsbSql_master.append(&quot;WHERE (TABLE_SCHEMA = &quot; + dbName + &quot;)&quot;);\r\n    \t\t\tsbSql_master.append(&quot;AND (TABLE_NAME = &quot; + tableName + &quot;)&quot;);\r\n    \t\t\tsbSql_master.append(&quot;AND (COLUMN_KEY = &#39;PRI&#39;) &quot;);\r\n    \t\t\t\r\n    \t\t\trs_master = stmt_master.executeQuery(sbSql_master.toString());\r\n    \t\t\t\r\n    \t\t\t/*conn_slave = slaveJdbcTemplate.getDataSource().getConnection();\r\n    \t\t\tstmt_slave = conn_slave.createStatement();\r\n    \t\t\tsbSql_slave = new StringBuilder();\r\n    \t\t\tsbSql_slave.append(&quot;SELECT * FROM &quot;).append(dbName).append(&quot;.&quot;).append(tableName);\r\n    \t\t\trs_slave = stmt_slave.executeQuery(sbSql_slave.toString());*/\r\n    \t\t\t\r\n    \t\t\tif(rs_master != null){\r\n    \t\t\t\twhile(!rs_master.isLast()){\r\n    \t\t\t\t\trs_master.next();\r\n    \t\t\t\t\tObject obj = rs_master.getObject(1);\r\n    \t\t\t\t\tObject obj2 = rs_master.getObject(2);\r\n    \t\t\t\t\tString key = null;\r\n    \t\t\t\t\tString val = null;\r\n    \t\t\t\t\tif(obj != null){\r\n    \t\t\t\t\t\tkey = obj.toString();\r\n    \t\t\t\t\t\tSystem.out.println(&quot;Key = &quot; + key);\r\n    \t\t\t\t\t}\r\n    \t\t\t\t\tif(obj2 != null){\r\n    \t\t\t\t\t\tval = obj2.toString();\r\n    \t\t\t\t\t\tSystem.out.println(&quot;Value = &quot; + val);\r\n    \t\t\t\t\t}\r\n    \t\t\t\t}\r\n    \t\t\t}\r\n    \t\t}\r\n    \t\tcatch(SQLException e){\r\n    \t\t\te.printStackTrace();\r\n    \t\t}\r\n    \t}\r\n    }\r\n\r\nHere is component class:\r\n\r\n    @Component\r\n    public class MySQLReplicationStatusCheck {\r\n    \tfinal static Logger logger = Logger.getLogger(MySQLReplicationStatusCheck.class);\r\n    \t\r\n    \t@Autowired\r\n    \tprivate MySQLReplicationStatusService mysqlReplicationStatusService = null;\r\n    \t\r\n    \t@Value(&quot;${master.db_name}&quot;)\r\n        private  String databaseName;\r\n    \t\r\n    \t@Value(&quot;${master.table_name}&quot;)\r\n        private  String tableName;\r\n    \t\r\n    \tpublic void replicationEvent(){\r\n    \t\tlogger.info(&quot;Inside replicationEvent method&quot;);\r\n    \t\tSystem.out.println(&quot;Inside replicationEvent method&quot;);\r\n    \t\tmysqlReplicationStatusService.checkReplicationStatus(databaseName, tableName);\r\n    \t}\r\n    }\r\n\r\nHere is my application.properties:\r\n\r\n    logging.config=./conf/log4j.xml\r\n    \r\n    spring.ds_master_mysql.url = jdbc:mysql://&lt;host&gt;:3306\r\n    spring.ds_master_mysql.username = username\r\n    spring.ds_master_mysql.password = password\r\n    spring.ds_master_mysql.driverClassName=com.mysql.jdbc.Driver\r\n\r\n     master.db_name=fdmsus_demo\r\n     master.table_name=vitalstats\r\n\r\nHere is Spring boot class:\r\n\r\n    package com.example;\r\n        @SpringBootApplication\r\n        public class FdmsMysqlReplicationApplication {\r\n        \r\n        \tpublic static void main(String[] args) {\r\n        \t\tSpringApplication.run(FdmsMysqlReplicationApplication.class, args);\r\n        \t}\r\n        }\r\n\r\nHowever I am not able to figure out where is I am missing something. Can anyone please help me get this done.\r\n\r\nThanks.\r\n\r\n\r\n","title":"Spring boot multiple datasource configuration","body":"<p>I am trying to configure multiple data sources in spring boot app. But I am getting following error when application is about to boot.</p>\n\n<pre><code>Caused by: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'mySQLReplicationStatusService': Unsatisfied dependency expressed through field 'jdbcTemplate'; nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: No qualifying bean of type 'org.springframework.jdbc.core.JdbcTemplate' available: expected at least 1 bean which qualifies as autowire candidate. Dependency annotations: {@org.springframework.beans.factory.annotation.Autowired(required=true), @org.springframework.beans.factory.annotation.Qualifier(value=msMysqlJdbcTemplate)}\n    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.inject(AutowiredAnnotationBeanPostProcessor.java:588)\n    at org.springframework.beans.factory.annotation.InjectionMetadata.inject(InjectionMetadata.java:88)\n    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessPropertyValues(AutowiredAnnotationBeanPostProcessor.java:366)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1264)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:553)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:483)\n    at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:306)\n    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:230)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:302)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:197)\n    at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:761)\n    at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:867)\n    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:543)\n    at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:693)\n    at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:360)\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:303)\n    at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:120)\n    at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:98)\n    at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:116)\n    at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:83)\n    at org.springframework.boot.test.autoconfigure.SpringBootDependencyInjectionTestExecutionListener.prepareTestInstance(SpringBootDependencyInjectionTestExecutionListener.java:47)\n    at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:230)\n    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.createTest(SpringJUnit4ClassRunner.java:228)\n    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner$1.runReflectiveCall(SpringJUnit4ClassRunner.java:287)\n    at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)\n    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.methodBlock(SpringJUnit4ClassRunner.java:289)\n    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:247)\n    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:94)\n    at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)\n    at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)\n    at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)\n    at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)\n    at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)\n    at org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61)\n    at org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:70)\n    at org.junit.runners.ParentRunner.run(ParentRunner.java:363)\n    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:191)\n    at org.apache.maven.surefire.junit4.JUnit4Provider.execute(JUnit4Provider.java:283)\n    at org.apache.maven.surefire.junit4.JUnit4Provider.executeWithRerun(JUnit4Provider.java:173)\n    at org.apache.maven.surefire.junit4.JUnit4Provider.executeTestSet(JUnit4Provider.java:153)\n    at org.apache.maven.surefire.junit4.JUnit4Provider.invoke(JUnit4Provider.java:128)\n    at org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:203)\n    at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:155)\n    at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:103)\nCaused by: org.springframework.beans.factory.NoSuchBeanDefinitionException: No qualifying bean of type 'org.springframework.jdbc.core.JdbcTemplate' available: expected at least 1 bean which qualifies as autowire candidate. Dependency annotations: {@org.springframework.beans.factory.annotation.Autowired(required=true), @org.springframework.beans.factory.annotation.Qualifier(value=msMysqlJdbcTemplate)}\n    at org.springframework.beans.factory.support.DefaultListableBeanFactory.raiseNoMatchingBeanFound(DefaultListableBeanFactory.java:1493)\n    at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1104)\n    at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1066)\n    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.inject(AutowiredAnnotationBeanPostProcessor.java:585)\n    at org.springframework.beans.factory.annotation.InjectionMetadata.inject(InjectionMetadata.java:88)\n    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessPropertyValues(AutowiredAnnotationBeanPostProcessor.java:366)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1264)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:553)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:483)\n    at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:306)\n    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:230)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:302)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:197)\n    at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:761)\n    at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:867)\n    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:543)\n    at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:693)\n    at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:360)\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:303)\n    at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:120)\n    at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:98)\n    at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:116)\n    at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:83)\n    at org.springframework.boot.test.autoconfigure.SpringBootDependencyInjectionTestExecutionListener.prepareTestInstance(SpringBootDependencyInjectionTestExecutionListener.java:47)\n    at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:230)\n    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.createTest(SpringJUnit4ClassRunner.java:228)\n    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner$1.runReflectiveCall(SpringJUnit4ClassRunner.java:287)\n    at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)\n    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.methodBlock(SpringJUnit4ClassRunner.java:289)\n    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:247)\n    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:94)\n    at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)\n    at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)\n    at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)\n    at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)\n    at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)\n    at org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61)\n    at org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:70)\n    at org.junit.runners.ParentRunner.run(ParentRunner.java:363)\n    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:191)\n    at org.apache.maven.surefire.junit4.JUnit4Provider.execute(JUnit4Provider.java:283)\n    at org.apache.maven.surefire.junit4.JUnit4Provider.executeWithRerun(JUnit4Provider.java:173)\n    at org.apache.maven.surefire.junit4.JUnit4Provider.executeTestSet(JUnit4Provider.java:153)\n    at org.apache.maven.surefire.junit4.JUnit4Provider.invoke(JUnit4Provider.java:128)\n    at org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:203)\n    at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:155)\n    at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:103)\n</code></pre>\n\n<p>Here is my configuration class looks like:</p>\n\n<pre><code>package com.example;\n    @Configuration\n    public class MultipleDBConfig {\n\n\n        @Bean(name = \"masterMysqlDb\")\n        @Primary\n        @ConfigurationProperties(prefix = \"spring.ds_master_mysql\")\n        public DataSource masterMysqlDataSource() {\n            return DataSourceBuilder.create().build();\n        }\n\n        @Bean(name = \"msMysqlJdbcTemplate\")\n        public JdbcTemplate masterJdbcTemplate(@Qualifier(\"masterMysqlDb\") DataSource masterMysqlDb) {\n            return new JdbcTemplate(masterMysqlDb);\n        }\n\n        @Bean(name = \"slaveMysqlDb\")\n        @ConfigurationProperties(prefix = \"spring.ds_slave_mysql\")\n        public DataSource slaveMysqlDataSource() {\n            return DataSourceBuilder.create().build();\n        }\n\n        @Bean(name = \"slaveMysqlJdbcTemplate\")\n        public JdbcTemplate slaveJdbcTemplate(@Qualifier(\"slaveMysqlDb\") DataSource dsSlaveMySQL) {\n            return new JdbcTemplate(dsSlaveMySQL);\n        }\n    }\n</code></pre>\n\n<p>Here is my service class:</p>\n\n<pre><code>    package com.example.replication.service;\n       @Service\npublic class MySQLReplicationStatusService {\n\n    @Autowired\n    @Qualifier(\"msMysqlJdbcTemplate\")\n    private JdbcTemplate jdbcTemplate;\n\n    @Autowired\n    @Qualifier(\"slaveMysqlJdbcTemplate\")\n    private JdbcTemplate slaveJdbcTemplate;\n\n    public void checkReplicationStatus(String dbName, String tableName){\n        System.out.println(\"In checkReplicationStatus\");\n        Connection conn_master = null;\n        Statement stmt_master = null;\n        StringBuilder sbSql_master = null;\n        ResultSet rs_master = null;\n\n        Connection conn_slave = null;\n        Statement stmt_slave = null;\n        StringBuilder sbSql_slave = null;\n        ResultSet rs_slave = null;\n\n        try{\n            conn_master = jdbcTemplate.getDataSource().getConnection();\n            stmt_master = conn_master.createStatement();\n            sbSql_master = new StringBuilder();\n            sbSql_master.append(\"SELECT COLUMN_NAME\");\n            sbSql_master.append(\"FROM information_schema.COLUMNS\");\n            sbSql_master.append(\"WHERE (TABLE_SCHEMA = \" + dbName + \")\");\n            sbSql_master.append(\"AND (TABLE_NAME = \" + tableName + \")\");\n            sbSql_master.append(\"AND (COLUMN_KEY = 'PRI') \");\n\n            rs_master = stmt_master.executeQuery(sbSql_master.toString());\n\n            /*conn_slave = slaveJdbcTemplate.getDataSource().getConnection();\n            stmt_slave = conn_slave.createStatement();\n            sbSql_slave = new StringBuilder();\n            sbSql_slave.append(\"SELECT * FROM \").append(dbName).append(\".\").append(tableName);\n            rs_slave = stmt_slave.executeQuery(sbSql_slave.toString());*/\n\n            if(rs_master != null){\n                while(!rs_master.isLast()){\n                    rs_master.next();\n                    Object obj = rs_master.getObject(1);\n                    Object obj2 = rs_master.getObject(2);\n                    String key = null;\n                    String val = null;\n                    if(obj != null){\n                        key = obj.toString();\n                        System.out.println(\"Key = \" + key);\n                    }\n                    if(obj2 != null){\n                        val = obj2.toString();\n                        System.out.println(\"Value = \" + val);\n                    }\n                }\n            }\n        }\n        catch(SQLException e){\n            e.printStackTrace();\n        }\n    }\n}\n</code></pre>\n\n<p>Here is component class:</p>\n\n<pre><code>@Component\npublic class MySQLReplicationStatusCheck {\n    final static Logger logger = Logger.getLogger(MySQLReplicationStatusCheck.class);\n\n    @Autowired\n    private MySQLReplicationStatusService mysqlReplicationStatusService = null;\n\n    @Value(\"${master.db_name}\")\n    private  String databaseName;\n\n    @Value(\"${master.table_name}\")\n    private  String tableName;\n\n    public void replicationEvent(){\n        logger.info(\"Inside replicationEvent method\");\n        System.out.println(\"Inside replicationEvent method\");\n        mysqlReplicationStatusService.checkReplicationStatus(databaseName, tableName);\n    }\n}\n</code></pre>\n\n<p>Here is my application.properties:</p>\n\n<pre><code>logging.config=./conf/log4j.xml\n\nspring.ds_master_mysql.url = jdbc:mysql://&lt;host&gt;:3306\nspring.ds_master_mysql.username = username\nspring.ds_master_mysql.password = password\nspring.ds_master_mysql.driverClassName=com.mysql.jdbc.Driver\n\n master.db_name=fdmsus_demo\n master.table_name=vitalstats\n</code></pre>\n\n<p>Here is Spring boot class:</p>\n\n<pre><code>package com.example;\n    @SpringBootApplication\n    public class FdmsMysqlReplicationApplication {\n\n        public static void main(String[] args) {\n            SpringApplication.run(FdmsMysqlReplicationApplication.class, args);\n        }\n    }\n</code></pre>\n\n<p>However I am not able to figure out where is I am missing something. Can anyone please help me get this done.</p>\n\n<p>Thanks.</p>\n"},{"tags":["java","annotations","java-17","java-annotations","java-record"],"comments":[{"owner":{"account_id":945600,"reputation":3040,"user_id":972912,"accept_rate":46,"display_name":"Cl&#233;ment MATHIEU"},"score":0,"creation_date":1675149084,"post_id":75290864,"comment_id":132860863,"body_markdown":"Thanks @brian-goetz. I did not mention record-builder in the title because unless I&#39;m mistaken, all code paths leading to observed behavior are in JDK and could be reproduced without record-builder.","body":"Thanks @brian-goetz. I did not mention record-builder in the title because unless I&#39;m mistaken, all code paths leading to observed behavior are in JDK and could be reproduced without record-builder."},{"owner":{"account_id":3211603,"reputation":289297,"user_id":2711488,"display_name":"Holger"},"score":2,"creation_date":1675162892,"post_id":75290864,"comment_id":132864815,"body_markdown":"Sounds like there might be a bug (or two) in the JDK’s code. But what I don’t understand: the record is built by this record-builder from the annotated interface. So it knows the record components even before the source code has been generated. Why does it require the compiler feedback from the generated source code at all? That’s almost as weird as a compiler that parses its generated class files to find out what it has generated…","body":"Sounds like there might be a bug (or two) in the JDK’s code. But what I don’t understand: the record is built by this record-builder from the annotated interface. So it knows the record components even before the source code has been generated. Why does it require the compiler feedback from the generated source code at all? That’s almost as weird as a compiler that parses its generated class files to find out what it has generated…"},{"owner":{"account_id":945600,"reputation":3040,"user_id":972912,"accept_rate":46,"display_name":"Cl&#233;ment MATHIEU"},"score":0,"creation_date":1675181395,"post_id":75290864,"comment_id":132871263,"body_markdown":"I&#39;m still looking for a minimal reproducer. My current understanding is that issue doesn&#39;t occurs on fresh builds. It seems to occur after an initial build created ConfRecord source and class files and a file including ConfRecord is modified. I guess javac first parses the class from previous build (stacktrace #1), then annotation processor parses the source file (stacktrace #2). It&#39;s unclear to me if this is expected.","body":"I&#39;m still looking for a minimal reproducer. My current understanding is that issue doesn&#39;t occurs on fresh builds. It seems to occur after an initial build created ConfRecord source and class files and a file including ConfRecord is modified. I guess javac first parses the class from previous build (stacktrace #1), then annotation processor parses the source file (stacktrace #2). It&#39;s unclear to me if this is expected."},{"owner":{"account_id":945600,"reputation":3040,"user_id":972912,"accept_rate":46,"display_name":"Cl&#233;ment MATHIEU"},"score":0,"creation_date":1675186783,"post_id":75290864,"comment_id":132873065,"body_markdown":"@Holger I just updated the question to add a link to a reproducer. Any insight from someone more knowledgeable than me on this topic would be very much appreciated.","body":"@Holger I just updated the question to add a link to a reproducer. Any insight from someone more knowledgeable than me on this topic would be very much appreciated."},{"owner":{"account_id":2335634,"reputation":2907,"user_id":2048051,"display_name":"Randgalt"},"score":0,"creation_date":1678619481,"post_id":75290864,"comment_id":133565292,"body_markdown":"Author of RecordBuilder here... I&#39;ve been able to reproduce this in IntelliJ by compiling a single class. There seems to be a bug in javac with processing an annotated class generated by an annotation processor, though the docs say this should work. I have yet to refine it further however.","body":"Author of RecordBuilder here... I&#39;ve been able to reproduce this in IntelliJ by compiling a single class. There seems to be a bug in javac with processing an annotated class generated by an annotation processor, though the docs say this should work. I have yet to refine it further however."},{"owner":{"account_id":2335634,"reputation":2907,"user_id":2048051,"display_name":"Randgalt"},"score":0,"creation_date":1678626615,"post_id":75290864,"comment_id":133566282,"body_markdown":"Further down the rabbit hole... in my case, the existence of a .class file of the generated record in the output path causes the problem. If I delete it prior to generating the record the exception doesn&#39;t happen.","body":"Further down the rabbit hole... in my case, the existence of a .class file of the generated record in the output path causes the problem. If I delete it prior to generating the record the exception doesn&#39;t happen."}],"owner":{"account_id":945600,"reputation":3040,"user_id":972912,"accept_rate":46,"display_name":"Cl&#233;ment MATHIEU"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":194,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1675186565,"creation_date":1675118026,"question_id":75290864,"body_markdown":"While trying to troubleshoot &amp; fix [this issue](https://github.com/Randgalt/record-builder/issues/139) from record-builder (a Java annotation processor), I observed that `TypeElement.getRecordComponents()` returns two entries for the same record component. I&#39;m trying to understand if this behavior is expected from the JDK or a bug. \r\n\r\nrecord-builder has a feature allowing you to generate a record from an interface. Following interface definition\r\n\r\n```java\r\n@RecordInterface\r\ninterface Conf {\r\n\r\n    int maxConcurrency( );\r\n}\r\n```\r\n\r\ngenerates following code \r\n\r\n```java\r\n@Generated(&quot;io.soabase.recordbuilder.core.RecordInterface&quot;)\r\n@RecordBuilder\r\npublic record ConfRecord(int maxConcurrency) implements Conf, ConfRecordBuilder.With {}\r\n```\r\n\r\nI was able to observe that when `ConfRecord` class file already exists on disk; `TypeElement.getRecordComponents()` returns two `maxConcurrency` entries. One with (name: maxConcurrency, pos: 1, accessor: null), and another one with (name: maxConcurrency, pos: 387, accessor: &amp;lt;value&gt;)\r\n\r\nThe first entry is set from `setRecordComponents` when existing class file is parsed (triggered by an import statement).\r\n\r\n```\r\nsetRecordComponents:1542, Symbol$ClassSymbol (com.sun.tools.javac.code)\r\nread:1224, ClassReader$26 (com.sun.tools.javac.jvm)\r\nreadAttrs:1373, ClassReader (com.sun.tools.javac.jvm)\r\nreadClassAttrs:1387, ClassReader (com.sun.tools.javac.jvm)\r\nreadClass:2527, ClassReader (com.sun.tools.javac.jvm)\r\nreadClassBuffer:2644, ClassReader (com.sun.tools.javac.jvm)\r\nreadClassFile:2658, ClassReader (com.sun.tools.javac.jvm)\r\nfillIn:361, ClassFinder (com.sun.tools.javac.code)\r\ncomplete:291, ClassFinder (com.sun.tools.javac.code)\r\ncomplete:-1, ClassFinder$$Lambda$95/0x0000000801254af8 (com.sun.tools.javac.code)\r\ncomplete:682, Symbol (com.sun.tools.javac.code)\r\ncomplete:1410, Symbol$ClassSymbol (com.sun.tools.javac.code)\r\nloadClass:434, ClassFinder (com.sun.tools.javac.code)\r\nloadClass:2052, Resolve (com.sun.tools.javac.comp)\r\nfindIdentInPackageInternal:2450, Resolve (com.sun.tools.javac.comp)\r\nfindIdentInPackage:2438, Resolve (com.sun.tools.javac.comp)\r\nselectSym:4412, Attr (com.sun.tools.javac.comp)\r\nvisitSelect:4297, Attr (com.sun.tools.javac.comp)\r\naccept:2450, JCTree$JCFieldAccess (com.sun.tools.javac.tree)\r\nattribTree:677, Attr (com.sun.tools.javac.comp)\r\nattribType:743, Attr (com.sun.tools.javac.comp)\r\nattribType:736, Attr (com.sun.tools.javac.comp)\r\nattribImportType:447, TypeEnter$ImportsPhase (com.sun.tools.javac.comp)\r\ndoImport:430, TypeEnter$ImportsPhase (com.sun.tools.javac.comp)\r\nresolveImports:370, TypeEnter$ImportsPhase (com.sun.tools.javac.comp)\r\nrunPhase:327, TypeEnter$ImportsPhase (com.sun.tools.javac.comp)\r\ndoCompleteEnvs:288, TypeEnter$Phase (com.sun.tools.javac.comp)\r\ncompleteEnvs:257, TypeEnter$Phase (com.sun.tools.javac.comp)\r\ncomplete:204, TypeEnter (com.sun.tools.javac.comp)\r\ncomplete:682, Symbol (com.sun.tools.javac.code)\r\ncomplete:1410, Symbol$ClassSymbol (com.sun.tools.javac.code)\r\nflags:1331, Symbol$ClassSymbol (com.sun.tools.javac.code)\r\nisAccessible:327, Resolve (com.sun.tools.javac.comp)\r\nisAccessible:310, Resolve (com.sun.tools.javac.comp)\r\nloadClass:2053, Resolve (com.sun.tools.javac.comp)\r\nfindGlobalType:2299, Resolve (com.sun.tools.javac.comp)\r\nfindType:2373, Resolve (com.sun.tools.javac.comp)\r\nfindIdentInternal:2416, Resolve (com.sun.tools.javac.comp)\r\nfindIdent:2402, Resolve (com.sun.tools.javac.comp)\r\nresolveIdent:2685, Resolve (com.sun.tools.javac.comp)\r\nvisitIdent:4184, Attr (com.sun.tools.javac.comp)\r\naccept:2584, JCTree$JCIdent (com.sun.tools.javac.tree)\r\nattribTree:677, Attr (com.sun.tools.javac.comp)\r\nattribType:743, Attr (com.sun.tools.javac.comp)\r\nattribType:736, Attr (com.sun.tools.javac.comp)\r\nsignature:116, MemberEnter (com.sun.tools.javac.comp)\r\nvisitMethodDef:193, MemberEnter (com.sun.tools.javac.comp)\r\naccept:921, JCTree$JCMethodDecl (com.sun.tools.javac.tree)\r\nmemberEnter:163, MemberEnter (com.sun.tools.javac.comp)\r\nmemberEnter:175, MemberEnter (com.sun.tools.javac.comp)\r\nfinishClass:1075, TypeEnter$MembersPhase (com.sun.tools.javac.comp)\r\nrunPhase:1019, TypeEnter$MembersPhase (com.sun.tools.javac.comp)\r\ndoCompleteEnvs:288, TypeEnter$Phase (com.sun.tools.javac.comp)\r\ndoCompleteEnvs:928, TypeEnter$AbstractMembersPhase (com.sun.tools.javac.comp)\r\ncompleteEnvs:257, TypeEnter$Phase (com.sun.tools.javac.comp)\r\ncompleteEnvs:272, TypeEnter$Phase (com.sun.tools.javac.comp)\r\ncompleteEnvs:272, TypeEnter$Phase (com.sun.tools.javac.comp)\r\ncompleteEnvs:272, TypeEnter$Phase (com.sun.tools.javac.comp)\r\ncompleteEnvs:272, TypeEnter$Phase (com.sun.tools.javac.comp)\r\ncompleteEnvs:272, TypeEnter$Phase (com.sun.tools.javac.comp)\r\ncomplete:204, TypeEnter (com.sun.tools.javac.comp)\r\ncomplete:682, Symbol (com.sun.tools.javac.code)\r\ncomplete:1410, Symbol$ClassSymbol (com.sun.tools.javac.code)\r\ncomplete:610, Enter (com.sun.tools.javac.comp)\r\nmain:587, Enter (com.sun.tools.javac.comp)\r\nenterTrees:1042, JavaCompiler (com.sun.tools.javac.main)\r\ncompile:917, JavaCompiler (com.sun.tools.javac.main)\r\nlambda$doCall$0:104, JavacTaskImpl (com.sun.tools.javac.api)\r\ncall:-1, JavacTaskImpl$$Lambda$89/0x00000008012368e0 (com.sun.tools.javac.api)\r\ninvocationHelper:152, JavacTaskImpl (com.sun.tools.javac.api)\r\ndoCall:100, JavacTaskImpl (com.sun.tools.javac.api)\r\ncall:94, JavacTaskImpl (com.sun.tools.javac.api)\r\ncompileInProcess:136, JavaxToolsCompiler (org.codehaus.plexus.compiler.javac)\r\nperformCompile:182, JavacCompiler (org.codehaus.plexus.compiler.javac)\r\nexecute:1209, AbstractCompilerMojo (org.apache.maven.plugin.compiler)\r\nexecute:198, CompilerMojo (org.apache.maven.plugin.compiler)\r\nexecuteMojo:137, DefaultBuildPluginManager (org.apache.maven.plugin)\r\ndoExecute2:370, MojoExecutor (org.apache.maven.lifecycle.internal)\r\ndoExecute:351, MojoExecutor (org.apache.maven.lifecycle.internal)\r\nexecute:215, MojoExecutor (org.apache.maven.lifecycle.internal)\r\nexecute:171, MojoExecutor (org.apache.maven.lifecycle.internal)\r\nexecute:163, MojoExecutor (org.apache.maven.lifecycle.internal)\r\nbuildProject:117, LifecycleModuleBuilder (org.apache.maven.lifecycle.internal)\r\nbuildProject:81, LifecycleModuleBuilder (org.apache.maven.lifecycle.internal)\r\nbuild:56, SingleThreadedBuilder (org.apache.maven.lifecycle.internal.builder.singlethreaded)\r\nexecute:128, LifecycleStarter (org.apache.maven.lifecycle.internal)\r\ndoExecute:294, DefaultMaven (org.apache.maven)\r\ndoExecute:192, DefaultMaven (org.apache.maven)\r\nexecute:105, DefaultMaven (org.apache.maven)\r\nexecute:960, MavenCli (org.apache.maven.cli)\r\ndoMain:293, MavenCli (org.apache.maven.cli)\r\nmain:196, MavenCli (org.apache.maven.cli)\r\ninvoke0:-1, NativeMethodAccessorImpl (jdk.internal.reflect)\r\ninvoke:77, NativeMethodAccessorImpl (jdk.internal.reflect)\r\ninvoke:43, DelegatingMethodAccessorImpl (jdk.internal.reflect)\r\ninvoke:568, Method (java.lang.reflect)\r\nlaunchEnhanced:282, Launcher (org.codehaus.plexus.classworlds.launcher)\r\nlaunch:225, Launcher (org.codehaus.plexus.classworlds.launcher)\r\nmainWithExitCode:406, Launcher (org.codehaus.plexus.classworlds.launcher)\r\nmain:347, Launcher (org.codehaus.plexus.classworlds.launcher)\r\n```\r\n\r\nThe second one is set by the annotation processor while reading generated code\r\n\r\n```\r\ngetRecordComponent:1524, Symbol$ClassSymbol (com.sun.tools.javac.code)\r\nrunPhase:968, TypeEnter$RecordPhase (com.sun.tools.javac.comp)\r\ndoCompleteEnvs:288, TypeEnter$Phase (com.sun.tools.javac.comp)\r\ndoCompleteEnvs:928, TypeEnter$AbstractMembersPhase (com.sun.tools.javac.comp)\r\ncompleteEnvs:257, TypeEnter$Phase (com.sun.tools.javac.comp)\r\ncompleteEnvs:272, TypeEnter$Phase (com.sun.tools.javac.comp)\r\ncompleteEnvs:272, TypeEnter$Phase (com.sun.tools.javac.comp)\r\ncompleteEnvs:272, TypeEnter$Phase (com.sun.tools.javac.comp)\r\ncompleteEnvs:272, TypeEnter$Phase (com.sun.tools.javac.comp)\r\ncomplete:204, TypeEnter (com.sun.tools.javac.comp)\r\ncomplete:682, Symbol (com.sun.tools.javac.code)\r\ncomplete:1410, Symbol$ClassSymbol (com.sun.tools.javac.code)\r\ncomplete:610, Enter (com.sun.tools.javac.comp)\r\nmain:587, Enter (com.sun.tools.javac.comp)\r\nenterTrees:1042, JavaCompiler (com.sun.tools.javac.main)\r\nenterTrees:1247, JavacProcessingEnvironment$Round (com.sun.tools.javac.processing)\r\n&lt;init&gt;:1133, JavacProcessingEnvironment$Round (com.sun.tools.javac.processing)\r\nnext:1153, JavacProcessingEnvironment$Round (com.sun.tools.javac.processing)\r\ndoProcessing:1393, JavacProcessingEnvironment (com.sun.tools.javac.processing)\r\nprocessAnnotations:1234, JavaCompiler (com.sun.tools.javac.main)\r\ncompile:916, JavaCompiler (com.sun.tools.javac.main)\r\nlambda$doCall$0:104, JavacTaskImpl (com.sun.tools.javac.api)\r\ncall:-1, JavacTaskImpl$$Lambda$89/0x00000008012368e0 (com.sun.tools.javac.api)\r\ninvocationHelper:152, JavacTaskImpl (com.sun.tools.javac.api)\r\ndoCall:100, JavacTaskImpl (com.sun.tools.javac.api)\r\ncall:94, JavacTaskImpl (com.sun.tools.javac.api)\r\ncompileInProcess:136, JavaxToolsCompiler (org.codehaus.plexus.compiler.javac)\r\nperformCompile:182, JavacCompiler (org.codehaus.plexus.compiler.javac)\r\nexecute:1209, AbstractCompilerMojo (org.apache.maven.plugin.compiler)\r\nexecute:198, CompilerMojo (org.apache.maven.plugin.compiler)\r\nexecuteMojo:137, DefaultBuildPluginManager (org.apache.maven.plugin)\r\ndoExecute2:370, MojoExecutor (org.apache.maven.lifecycle.internal)\r\ndoExecute:351, MojoExecutor (org.apache.maven.lifecycle.internal)\r\nexecute:215, MojoExecutor (org.apache.maven.lifecycle.internal)\r\nexecute:171, MojoExecutor (org.apache.maven.lifecycle.internal)\r\nexecute:163, MojoExecutor (org.apache.maven.lifecycle.internal)\r\nbuildProject:117, LifecycleModuleBuilder (org.apache.maven.lifecycle.internal)\r\nbuildProject:81, LifecycleModuleBuilder (org.apache.maven.lifecycle.internal)\r\nbuild:56, SingleThreadedBuilder (org.apache.maven.lifecycle.internal.builder.singlethreaded)\r\nexecute:128, LifecycleStarter (org.apache.maven.lifecycle.internal)\r\ndoExecute:294, DefaultMaven (org.apache.maven)\r\ndoExecute:192, DefaultMaven (org.apache.maven)\r\nexecute:105, DefaultMaven (org.apache.maven)\r\nexecute:960, MavenCli (org.apache.maven.cli)\r\ndoMain:293, MavenCli (org.apache.maven.cli)\r\nmain:196, MavenCli (org.apache.maven.cli)\r\ninvoke0:-1, NativeMethodAccessorImpl (jdk.internal.reflect)\r\ninvoke:77, NativeMethodAccessorImpl (jdk.internal.reflect)\r\ninvoke:43, DelegatingMethodAccessorImpl (jdk.internal.reflect)\r\ninvoke:568, Method (java.lang.reflect)\r\nlaunchEnhanced:282, Launcher (org.codehaus.plexus.classworlds.launcher)\r\nlaunch:225, Launcher (org.codehaus.plexus.classworlds.launcher)\r\nmainWithExitCode:406, Launcher (org.codehaus.plexus.classworlds.launcher)\r\nmain:347, Launcher (org.codehaus.plexus.classworlds.launcher)\r\n```\r\n\r\n`Symbol#getRecordCompoment` has some logic to avoid duplicate components\r\n\r\n```java\r\n       public RecordComponent getRecordComponent(JCVariableDecl var, boolean addIfMissing, List&lt;JCAnnotation&gt; annotations) {\r\n            RecordComponent toRemove = null;\r\n            for (RecordComponent rc : recordComponents) {\r\n                /* it could be that a record erroneously declares two record components with the same name, in that\r\n                 * case we need to use the position to disambiguate\r\n                 */\r\n                if (rc.name == var.name &amp;&amp; var.pos == rc.pos) {\r\n                    if (rc.type.hasTag(TypeTag.ERROR) &amp;&amp; !var.sym.type.hasTag(TypeTag.ERROR)) {\r\n                        // Found a record component with an erroneous type: save it so that it can be removed later.\r\n                        // If the class type of the record component is generated by annotation processor, it should\r\n                        // use the new actual class type and symbol instead of the old dummy ErrorType.\r\n                        toRemove = rc;\r\n                    } else {\r\n                        // Found a good record component: just return.\r\n                        return rc;\r\n                    }\r\n                }\r\n            }\r\n            RecordComponent rc = null;\r\n            if (toRemove != null) {\r\n                // Found a record component with an erroneous type: remove it and create a new one\r\n                recordComponents = List.filter(recordComponents, toRemove);\r\n                recordComponents = recordComponents.append(rc = new RecordComponent(var.sym, annotations));\r\n            } else if (addIfMissing) {\r\n                // Didn&#39;t find the record component: create one.\r\n                recordComponents = recordComponents.append(rc = new RecordComponent(var.sym, annotations));\r\n            }\r\n            return rc;\r\n        }\r\n``` \r\n\r\nWe can see that de-duplication is done by name AND position. However, position reported from class file and source parsing differs; leading to two entries. And even more bizarre, a record component with a null accessor.\r\n\r\n1. Is it expected that `TypeElement#getRecordComponents` returns two record component entries for the same record component? \r\n2. Is it expected that `RecordComponent#getAccessor` returns null?\r\n3. Is it a JDK bug or should the annotation processor ignore RecordComponents with no accessor? \r\n\r\nNotes:\r\n\r\n* TypeElement&#39;s Javadoc is unclear to me.\r\n* Java 17.0.5, 19.0.2, 21.ea.7 behave the same way.\r\n* I think it is related to the interface defining what is an accessor to the record. Running `javap -v` on the record shows `Record:\\n  int maxConcurrency;\r\n    \\n\\ndescriptor: I`\r\n* Providing a reproducer is doable but requires some efforts. I think that knowlegeable persons are unlikely to require a working repoducer to explain the behavior. \r\n\r\nUpdate 1: Published a reproducer here: https://github.com/cykl/record-builder-139-reproducer\r\n","title":"record-builder: TypeElement.getRecordComponents() returns duplicated record component (one without accessor)","body":"<p>While trying to troubleshoot &amp; fix <a href=\"https://github.com/Randgalt/record-builder/issues/139\" rel=\"nofollow noreferrer\">this issue</a> from record-builder (a Java annotation processor), I observed that <code>TypeElement.getRecordComponents()</code> returns two entries for the same record component. I'm trying to understand if this behavior is expected from the JDK or a bug.</p>\n<p>record-builder has a feature allowing you to generate a record from an interface. Following interface definition</p>\n<pre class=\"lang-java prettyprint-override\"><code>@RecordInterface\ninterface Conf {\n\n    int maxConcurrency( );\n}\n</code></pre>\n<p>generates following code</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Generated(&quot;io.soabase.recordbuilder.core.RecordInterface&quot;)\n@RecordBuilder\npublic record ConfRecord(int maxConcurrency) implements Conf, ConfRecordBuilder.With {}\n</code></pre>\n<p>I was able to observe that when <code>ConfRecord</code> class file already exists on disk; <code>TypeElement.getRecordComponents()</code> returns two <code>maxConcurrency</code> entries. One with (name: maxConcurrency, pos: 1, accessor: null), and another one with (name: maxConcurrency, pos: 387, accessor: &lt;value&gt;)</p>\n<p>The first entry is set from <code>setRecordComponents</code> when existing class file is parsed (triggered by an import statement).</p>\n<pre><code>setRecordComponents:1542, Symbol$ClassSymbol (com.sun.tools.javac.code)\nread:1224, ClassReader$26 (com.sun.tools.javac.jvm)\nreadAttrs:1373, ClassReader (com.sun.tools.javac.jvm)\nreadClassAttrs:1387, ClassReader (com.sun.tools.javac.jvm)\nreadClass:2527, ClassReader (com.sun.tools.javac.jvm)\nreadClassBuffer:2644, ClassReader (com.sun.tools.javac.jvm)\nreadClassFile:2658, ClassReader (com.sun.tools.javac.jvm)\nfillIn:361, ClassFinder (com.sun.tools.javac.code)\ncomplete:291, ClassFinder (com.sun.tools.javac.code)\ncomplete:-1, ClassFinder$$Lambda$95/0x0000000801254af8 (com.sun.tools.javac.code)\ncomplete:682, Symbol (com.sun.tools.javac.code)\ncomplete:1410, Symbol$ClassSymbol (com.sun.tools.javac.code)\nloadClass:434, ClassFinder (com.sun.tools.javac.code)\nloadClass:2052, Resolve (com.sun.tools.javac.comp)\nfindIdentInPackageInternal:2450, Resolve (com.sun.tools.javac.comp)\nfindIdentInPackage:2438, Resolve (com.sun.tools.javac.comp)\nselectSym:4412, Attr (com.sun.tools.javac.comp)\nvisitSelect:4297, Attr (com.sun.tools.javac.comp)\naccept:2450, JCTree$JCFieldAccess (com.sun.tools.javac.tree)\nattribTree:677, Attr (com.sun.tools.javac.comp)\nattribType:743, Attr (com.sun.tools.javac.comp)\nattribType:736, Attr (com.sun.tools.javac.comp)\nattribImportType:447, TypeEnter$ImportsPhase (com.sun.tools.javac.comp)\ndoImport:430, TypeEnter$ImportsPhase (com.sun.tools.javac.comp)\nresolveImports:370, TypeEnter$ImportsPhase (com.sun.tools.javac.comp)\nrunPhase:327, TypeEnter$ImportsPhase (com.sun.tools.javac.comp)\ndoCompleteEnvs:288, TypeEnter$Phase (com.sun.tools.javac.comp)\ncompleteEnvs:257, TypeEnter$Phase (com.sun.tools.javac.comp)\ncomplete:204, TypeEnter (com.sun.tools.javac.comp)\ncomplete:682, Symbol (com.sun.tools.javac.code)\ncomplete:1410, Symbol$ClassSymbol (com.sun.tools.javac.code)\nflags:1331, Symbol$ClassSymbol (com.sun.tools.javac.code)\nisAccessible:327, Resolve (com.sun.tools.javac.comp)\nisAccessible:310, Resolve (com.sun.tools.javac.comp)\nloadClass:2053, Resolve (com.sun.tools.javac.comp)\nfindGlobalType:2299, Resolve (com.sun.tools.javac.comp)\nfindType:2373, Resolve (com.sun.tools.javac.comp)\nfindIdentInternal:2416, Resolve (com.sun.tools.javac.comp)\nfindIdent:2402, Resolve (com.sun.tools.javac.comp)\nresolveIdent:2685, Resolve (com.sun.tools.javac.comp)\nvisitIdent:4184, Attr (com.sun.tools.javac.comp)\naccept:2584, JCTree$JCIdent (com.sun.tools.javac.tree)\nattribTree:677, Attr (com.sun.tools.javac.comp)\nattribType:743, Attr (com.sun.tools.javac.comp)\nattribType:736, Attr (com.sun.tools.javac.comp)\nsignature:116, MemberEnter (com.sun.tools.javac.comp)\nvisitMethodDef:193, MemberEnter (com.sun.tools.javac.comp)\naccept:921, JCTree$JCMethodDecl (com.sun.tools.javac.tree)\nmemberEnter:163, MemberEnter (com.sun.tools.javac.comp)\nmemberEnter:175, MemberEnter (com.sun.tools.javac.comp)\nfinishClass:1075, TypeEnter$MembersPhase (com.sun.tools.javac.comp)\nrunPhase:1019, TypeEnter$MembersPhase (com.sun.tools.javac.comp)\ndoCompleteEnvs:288, TypeEnter$Phase (com.sun.tools.javac.comp)\ndoCompleteEnvs:928, TypeEnter$AbstractMembersPhase (com.sun.tools.javac.comp)\ncompleteEnvs:257, TypeEnter$Phase (com.sun.tools.javac.comp)\ncompleteEnvs:272, TypeEnter$Phase (com.sun.tools.javac.comp)\ncompleteEnvs:272, TypeEnter$Phase (com.sun.tools.javac.comp)\ncompleteEnvs:272, TypeEnter$Phase (com.sun.tools.javac.comp)\ncompleteEnvs:272, TypeEnter$Phase (com.sun.tools.javac.comp)\ncompleteEnvs:272, TypeEnter$Phase (com.sun.tools.javac.comp)\ncomplete:204, TypeEnter (com.sun.tools.javac.comp)\ncomplete:682, Symbol (com.sun.tools.javac.code)\ncomplete:1410, Symbol$ClassSymbol (com.sun.tools.javac.code)\ncomplete:610, Enter (com.sun.tools.javac.comp)\nmain:587, Enter (com.sun.tools.javac.comp)\nenterTrees:1042, JavaCompiler (com.sun.tools.javac.main)\ncompile:917, JavaCompiler (com.sun.tools.javac.main)\nlambda$doCall$0:104, JavacTaskImpl (com.sun.tools.javac.api)\ncall:-1, JavacTaskImpl$$Lambda$89/0x00000008012368e0 (com.sun.tools.javac.api)\ninvocationHelper:152, JavacTaskImpl (com.sun.tools.javac.api)\ndoCall:100, JavacTaskImpl (com.sun.tools.javac.api)\ncall:94, JavacTaskImpl (com.sun.tools.javac.api)\ncompileInProcess:136, JavaxToolsCompiler (org.codehaus.plexus.compiler.javac)\nperformCompile:182, JavacCompiler (org.codehaus.plexus.compiler.javac)\nexecute:1209, AbstractCompilerMojo (org.apache.maven.plugin.compiler)\nexecute:198, CompilerMojo (org.apache.maven.plugin.compiler)\nexecuteMojo:137, DefaultBuildPluginManager (org.apache.maven.plugin)\ndoExecute2:370, MojoExecutor (org.apache.maven.lifecycle.internal)\ndoExecute:351, MojoExecutor (org.apache.maven.lifecycle.internal)\nexecute:215, MojoExecutor (org.apache.maven.lifecycle.internal)\nexecute:171, MojoExecutor (org.apache.maven.lifecycle.internal)\nexecute:163, MojoExecutor (org.apache.maven.lifecycle.internal)\nbuildProject:117, LifecycleModuleBuilder (org.apache.maven.lifecycle.internal)\nbuildProject:81, LifecycleModuleBuilder (org.apache.maven.lifecycle.internal)\nbuild:56, SingleThreadedBuilder (org.apache.maven.lifecycle.internal.builder.singlethreaded)\nexecute:128, LifecycleStarter (org.apache.maven.lifecycle.internal)\ndoExecute:294, DefaultMaven (org.apache.maven)\ndoExecute:192, DefaultMaven (org.apache.maven)\nexecute:105, DefaultMaven (org.apache.maven)\nexecute:960, MavenCli (org.apache.maven.cli)\ndoMain:293, MavenCli (org.apache.maven.cli)\nmain:196, MavenCli (org.apache.maven.cli)\ninvoke0:-1, NativeMethodAccessorImpl (jdk.internal.reflect)\ninvoke:77, NativeMethodAccessorImpl (jdk.internal.reflect)\ninvoke:43, DelegatingMethodAccessorImpl (jdk.internal.reflect)\ninvoke:568, Method (java.lang.reflect)\nlaunchEnhanced:282, Launcher (org.codehaus.plexus.classworlds.launcher)\nlaunch:225, Launcher (org.codehaus.plexus.classworlds.launcher)\nmainWithExitCode:406, Launcher (org.codehaus.plexus.classworlds.launcher)\nmain:347, Launcher (org.codehaus.plexus.classworlds.launcher)\n</code></pre>\n<p>The second one is set by the annotation processor while reading generated code</p>\n<pre><code>getRecordComponent:1524, Symbol$ClassSymbol (com.sun.tools.javac.code)\nrunPhase:968, TypeEnter$RecordPhase (com.sun.tools.javac.comp)\ndoCompleteEnvs:288, TypeEnter$Phase (com.sun.tools.javac.comp)\ndoCompleteEnvs:928, TypeEnter$AbstractMembersPhase (com.sun.tools.javac.comp)\ncompleteEnvs:257, TypeEnter$Phase (com.sun.tools.javac.comp)\ncompleteEnvs:272, TypeEnter$Phase (com.sun.tools.javac.comp)\ncompleteEnvs:272, TypeEnter$Phase (com.sun.tools.javac.comp)\ncompleteEnvs:272, TypeEnter$Phase (com.sun.tools.javac.comp)\ncompleteEnvs:272, TypeEnter$Phase (com.sun.tools.javac.comp)\ncomplete:204, TypeEnter (com.sun.tools.javac.comp)\ncomplete:682, Symbol (com.sun.tools.javac.code)\ncomplete:1410, Symbol$ClassSymbol (com.sun.tools.javac.code)\ncomplete:610, Enter (com.sun.tools.javac.comp)\nmain:587, Enter (com.sun.tools.javac.comp)\nenterTrees:1042, JavaCompiler (com.sun.tools.javac.main)\nenterTrees:1247, JavacProcessingEnvironment$Round (com.sun.tools.javac.processing)\n&lt;init&gt;:1133, JavacProcessingEnvironment$Round (com.sun.tools.javac.processing)\nnext:1153, JavacProcessingEnvironment$Round (com.sun.tools.javac.processing)\ndoProcessing:1393, JavacProcessingEnvironment (com.sun.tools.javac.processing)\nprocessAnnotations:1234, JavaCompiler (com.sun.tools.javac.main)\ncompile:916, JavaCompiler (com.sun.tools.javac.main)\nlambda$doCall$0:104, JavacTaskImpl (com.sun.tools.javac.api)\ncall:-1, JavacTaskImpl$$Lambda$89/0x00000008012368e0 (com.sun.tools.javac.api)\ninvocationHelper:152, JavacTaskImpl (com.sun.tools.javac.api)\ndoCall:100, JavacTaskImpl (com.sun.tools.javac.api)\ncall:94, JavacTaskImpl (com.sun.tools.javac.api)\ncompileInProcess:136, JavaxToolsCompiler (org.codehaus.plexus.compiler.javac)\nperformCompile:182, JavacCompiler (org.codehaus.plexus.compiler.javac)\nexecute:1209, AbstractCompilerMojo (org.apache.maven.plugin.compiler)\nexecute:198, CompilerMojo (org.apache.maven.plugin.compiler)\nexecuteMojo:137, DefaultBuildPluginManager (org.apache.maven.plugin)\ndoExecute2:370, MojoExecutor (org.apache.maven.lifecycle.internal)\ndoExecute:351, MojoExecutor (org.apache.maven.lifecycle.internal)\nexecute:215, MojoExecutor (org.apache.maven.lifecycle.internal)\nexecute:171, MojoExecutor (org.apache.maven.lifecycle.internal)\nexecute:163, MojoExecutor (org.apache.maven.lifecycle.internal)\nbuildProject:117, LifecycleModuleBuilder (org.apache.maven.lifecycle.internal)\nbuildProject:81, LifecycleModuleBuilder (org.apache.maven.lifecycle.internal)\nbuild:56, SingleThreadedBuilder (org.apache.maven.lifecycle.internal.builder.singlethreaded)\nexecute:128, LifecycleStarter (org.apache.maven.lifecycle.internal)\ndoExecute:294, DefaultMaven (org.apache.maven)\ndoExecute:192, DefaultMaven (org.apache.maven)\nexecute:105, DefaultMaven (org.apache.maven)\nexecute:960, MavenCli (org.apache.maven.cli)\ndoMain:293, MavenCli (org.apache.maven.cli)\nmain:196, MavenCli (org.apache.maven.cli)\ninvoke0:-1, NativeMethodAccessorImpl (jdk.internal.reflect)\ninvoke:77, NativeMethodAccessorImpl (jdk.internal.reflect)\ninvoke:43, DelegatingMethodAccessorImpl (jdk.internal.reflect)\ninvoke:568, Method (java.lang.reflect)\nlaunchEnhanced:282, Launcher (org.codehaus.plexus.classworlds.launcher)\nlaunch:225, Launcher (org.codehaus.plexus.classworlds.launcher)\nmainWithExitCode:406, Launcher (org.codehaus.plexus.classworlds.launcher)\nmain:347, Launcher (org.codehaus.plexus.classworlds.launcher)\n</code></pre>\n<p><code>Symbol#getRecordCompoment</code> has some logic to avoid duplicate components</p>\n<pre class=\"lang-java prettyprint-override\"><code>       public RecordComponent getRecordComponent(JCVariableDecl var, boolean addIfMissing, List&lt;JCAnnotation&gt; annotations) {\n            RecordComponent toRemove = null;\n            for (RecordComponent rc : recordComponents) {\n                /* it could be that a record erroneously declares two record components with the same name, in that\n                 * case we need to use the position to disambiguate\n                 */\n                if (rc.name == var.name &amp;&amp; var.pos == rc.pos) {\n                    if (rc.type.hasTag(TypeTag.ERROR) &amp;&amp; !var.sym.type.hasTag(TypeTag.ERROR)) {\n                        // Found a record component with an erroneous type: save it so that it can be removed later.\n                        // If the class type of the record component is generated by annotation processor, it should\n                        // use the new actual class type and symbol instead of the old dummy ErrorType.\n                        toRemove = rc;\n                    } else {\n                        // Found a good record component: just return.\n                        return rc;\n                    }\n                }\n            }\n            RecordComponent rc = null;\n            if (toRemove != null) {\n                // Found a record component with an erroneous type: remove it and create a new one\n                recordComponents = List.filter(recordComponents, toRemove);\n                recordComponents = recordComponents.append(rc = new RecordComponent(var.sym, annotations));\n            } else if (addIfMissing) {\n                // Didn't find the record component: create one.\n                recordComponents = recordComponents.append(rc = new RecordComponent(var.sym, annotations));\n            }\n            return rc;\n        }\n</code></pre>\n<p>We can see that de-duplication is done by name AND position. However, position reported from class file and source parsing differs; leading to two entries. And even more bizarre, a record component with a null accessor.</p>\n<ol>\n<li>Is it expected that <code>TypeElement#getRecordComponents</code> returns two record component entries for the same record component?</li>\n<li>Is it expected that <code>RecordComponent#getAccessor</code> returns null?</li>\n<li>Is it a JDK bug or should the annotation processor ignore RecordComponents with no accessor?</li>\n</ol>\n<p>Notes:</p>\n<ul>\n<li>TypeElement's Javadoc is unclear to me.</li>\n<li>Java 17.0.5, 19.0.2, 21.ea.7 behave the same way.</li>\n<li>I think it is related to the interface defining what is an accessor to the record. Running <code>javap -v</code> on the record shows <code>Record:\\n  int maxConcurrency; \\n\\ndescriptor: I</code></li>\n<li>Providing a reproducer is doable but requires some efforts. I think that knowlegeable persons are unlikely to require a working repoducer to explain the behavior.</li>\n</ul>\n<p>Update 1: Published a reproducer here: <a href=\"https://github.com/cykl/record-builder-139-reproducer\" rel=\"nofollow noreferrer\">https://github.com/cykl/record-builder-139-reproducer</a></p>\n"},{"tags":["java","android"],"comments":[{"owner":{"account_id":7495697,"reputation":1501,"user_id":5696047,"display_name":"jayesh gurudayalani"},"score":0,"creation_date":1675186833,"post_id":75300895,"comment_id":132873081,"body_markdown":"if you want to have current date object then you can simply take it like ```new Date()``` instead of ```Time.from(Instant.now())```\n\nFYI , regarding timezone of date object then you can refer this answer \n\nhttps://stackoverflow.com/a/308689/5696047","body":"if you want to have current date object then you can simply take it like <code>new Date()</code> instead of <code>Time.from(Instant.now())</code>  FYI , regarding timezone of date object then you can refer this answer   <a href=\"https://stackoverflow.com/a/308689/5696047\">stackoverflow.com/a/308689/5696047</a>"}],"owner":{"account_id":18110309,"reputation":13,"user_id":13167397,"display_name":"Fazza Bajwa"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":27,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1675186249,"creation_date":1675186249,"question_id":75300895,"body_markdown":"I am attempting to create an app using android studio and when trying to run the app I seem to have an issue with one of the fields for my database. \r\n\r\n     public void setTime(){\r\n            if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.O) {\r\n                this.time = Time.from(Instant.now());\r\n            }\r\n     }\r\n         \r\n\r\nI keep getting error: Cannot find setter for field. private Date time;\r\nIf i remove the if statement about build version I get the same issue but android studio also underlines the this.time = Time.from(Instant.now()); statement and advises me to surround it with the if statement. How do I fix this?","title":"Issue with &#39;cannot find setter error&#39; with a date field","body":"<p>I am attempting to create an app using android studio and when trying to run the app I seem to have an issue with one of the fields for my database.</p>\n<pre><code> public void setTime(){\n        if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.O) {\n            this.time = Time.from(Instant.now());\n        }\n }\n     \n</code></pre>\n<p>I keep getting error: Cannot find setter for field. private Date time;\nIf i remove the if statement about build version I get the same issue but android studio also underlines the this.time = Time.from(Instant.now()); statement and advises me to surround it with the if statement. How do I fix this?</p>\n"},{"tags":["java","android","android-snackbar"],"answers":[{"tags":[],"owner":{"account_id":12977606,"reputation":71,"user_id":9381163,"display_name":"Anshul Khattar"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1667322136,"creation_date":1667322136,"answer_id":74279343,"question_id":74251521,"body_markdown":"You can access the snacker textview by doing - \r\n\r\n     val textView =\r\n                    sbView.findViewById&lt;TextView&gt;(R.id.snackbar_text)\r\n\r\nThen set whatever properties you want, to this textview","title":"How to format the text of a Snackbar in Android","body":"<p>You can access the snacker textview by doing -</p>\n<pre><code> val textView =\n                sbView.findViewById&lt;TextView&gt;(R.id.snackbar_text)\n</code></pre>\n<p>Then set whatever properties you want, to this textview</p>\n"}],"owner":{"account_id":13060317,"reputation":580,"user_id":9437740,"display_name":"VanessaF"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":281,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":74279343,"answer_count":1,"score":0,"last_activity_date":1675186238,"creation_date":1667118345,"question_id":74251521,"body_markdown":"I have a method that displays snackbars which is called from many different fragments. Here is the code of this method:\r\n\r\n    public static void showSnackBar(Activity activity, String message, View root) {\r\n    \r\n        int duration = 5000;\r\n        Snackbar currentSnackBar = Snackbar.make( activity, root, message, Snackbar.LENGTH_INDEFINITE).setDuration(duration);\r\n    \r\n        View sbView = currentSnackBar.getView();\r\n        sbView.setBackgroundColor(ContextCompat.getColor(activity, R.color.colorBlue));\r\n\r\n        FrameLayout.LayoutParams params =(FrameLayout.LayoutParams)sbView.getLayoutParams();\r\n        params.gravity = Gravity.TOP | Gravity.CENTER_HORIZONTAL;\r\n    \r\n        sbView.setLayoutParams(params);\r\n        currentSnackBar.setAnimationMode(BaseTransientBottomBar.ANIMATION_MODE_FADE);\r\n        currentSnackBar.show();\r\n    }\r\n\r\nCurrently it shows the snackbar at the top center of the display. I would like to have the following formatting modifications:\r\n\r\n1. The textsize should be bigger\r\n2. The text should be aligned in the center. At the moment it is aligned to the left.\r\n\r\n**Reminder**: do you know how I can do this?","title":"How to format the text of a Snackbar in Android","body":"<p>I have a method that displays snackbars which is called from many different fragments. Here is the code of this method:</p>\n<pre><code>public static void showSnackBar(Activity activity, String message, View root) {\n\n    int duration = 5000;\n    Snackbar currentSnackBar = Snackbar.make( activity, root, message, Snackbar.LENGTH_INDEFINITE).setDuration(duration);\n\n    View sbView = currentSnackBar.getView();\n    sbView.setBackgroundColor(ContextCompat.getColor(activity, R.color.colorBlue));\n\n    FrameLayout.LayoutParams params =(FrameLayout.LayoutParams)sbView.getLayoutParams();\n    params.gravity = Gravity.TOP | Gravity.CENTER_HORIZONTAL;\n\n    sbView.setLayoutParams(params);\n    currentSnackBar.setAnimationMode(BaseTransientBottomBar.ANIMATION_MODE_FADE);\n    currentSnackBar.show();\n}\n</code></pre>\n<p>Currently it shows the snackbar at the top center of the display. I would like to have the following formatting modifications:</p>\n<ol>\n<li>The textsize should be bigger</li>\n<li>The text should be aligned in the center. At the moment it is aligned to the left.</li>\n</ol>\n<p><strong>Reminder</strong>: do you know how I can do this?</p>\n"},{"tags":["java","spring-boot","lombok","default-value"],"comments":[{"owner":{"account_id":2139538,"reputation":42501,"user_id":1898563,"accept_rate":78,"display_name":"Michael"},"score":0,"creation_date":1675177651,"post_id":75298926,"comment_id":132869838,"body_markdown":"&quot;Any alternative?&quot; No, put it on every field.","body":"&quot;Any alternative?&quot; No, put it on every field."},{"owner":{"account_id":2139538,"reputation":42501,"user_id":1898563,"accept_rate":78,"display_name":"Michael"},"score":0,"creation_date":1675177742,"post_id":75298926,"comment_id":132869882,"body_markdown":"Please ask 1 question per question. I edited out the second one. You can ask separately about that","body":"Please ask 1 question per question. I edited out the second one. You can ask separately about that"}],"answers":[{"tags":[],"owner":{"account_id":14429973,"reputation":2483,"user_id":10423604,"display_name":"Volodya Lombrozo"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1675186106,"creation_date":1675186106,"answer_id":75300876,"question_id":75298926,"body_markdown":"As [Michael](https://stackoverflow.com/users/1898563/michael) pointed out, you don&#39;t have many other options. If you&#39;ve added the `@Builder` annotation, you must use `@Builder.Default` for each field in order to utilize the fluent builder API.\r\n```java\r\n@Data\r\n@Builder\r\n@NoArgsConstructor\r\n@AllArgsConstructor\r\n@EqualsAndHashCode(callSuper = true)\r\npublic class Audi extends Car {\r\n\r\n    private String name;\r\n    private String headquarter;\r\n    @Builder.Default\r\n    private BigDecimal revenue = BigDecimal.ZERO;\r\n    @Builder.Default\r\n    private BigDecimal totalAssets = BigDecimal.ZERO;\r\n}\r\n\r\n```\r\nUsage:\r\n```java\r\nAudi audi = Audi.builder()\r\n    .name(&quot;Audi A3&quot;)\r\n    .headquarter(&quot;Germany&quot;)\r\n    .build();\r\nSystem.out.println(audi);\r\n```\r\nOutput:\r\n```\r\nAudi(name=Audi A3, headquarter=Germany, revenue=0, totalAssets=0)\r\n```\r\n\r\nIf builder functionality is not needed, objects can be instantiated in the traditional `Java` way using a constructor. However, in this case, the `@Builder` annotation should be removed and default values must be set directly in the constructor or during declaration.\r\n\r\n```java\r\n@Data\r\n@NoArgsConstructor\r\n@RequiredArgsConstructor\r\n@EqualsAndHashCode(callSuper = true)\r\npublic class Audi extends Car {\r\n    @NonNull\r\n    private String name;\r\n    @NonNull\r\n    private String headquarter;\r\n    private BigDecimal revenue = BigDecimal.ZERO;\r\n    private BigDecimal totalAssets = BigDecimal.ZERO;\r\n}\r\n```\r\n\r\nUsage:\r\n```java\r\nfinal Audi audi = new Audi(&quot;Audi A3&quot;, &quot;Germany&quot;);\r\nSystem.out.println(audi);\r\n```\r\n\r\nOutput:\r\n```\r\nAudi(name=Audi A3, headquarter=Germany, revenue=0, totalAssets=0)\r\n```","title":"Default Value for BigDecimal using Lombok Builder","body":"<p>As <a href=\"https://stackoverflow.com/users/1898563/michael\">Michael</a> pointed out, you don't have many other options. If you've added the <code>@Builder</code> annotation, you must use <code>@Builder.Default</code> for each field in order to utilize the fluent builder API.</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Data\n@Builder\n@NoArgsConstructor\n@AllArgsConstructor\n@EqualsAndHashCode(callSuper = true)\npublic class Audi extends Car {\n\n    private String name;\n    private String headquarter;\n    @Builder.Default\n    private BigDecimal revenue = BigDecimal.ZERO;\n    @Builder.Default\n    private BigDecimal totalAssets = BigDecimal.ZERO;\n}\n\n</code></pre>\n<p>Usage:</p>\n<pre class=\"lang-java prettyprint-override\"><code>Audi audi = Audi.builder()\n    .name(&quot;Audi A3&quot;)\n    .headquarter(&quot;Germany&quot;)\n    .build();\nSystem.out.println(audi);\n</code></pre>\n<p>Output:</p>\n<pre><code>Audi(name=Audi A3, headquarter=Germany, revenue=0, totalAssets=0)\n</code></pre>\n<p>If builder functionality is not needed, objects can be instantiated in the traditional <code>Java</code> way using a constructor. However, in this case, the <code>@Builder</code> annotation should be removed and default values must be set directly in the constructor or during declaration.</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Data\n@NoArgsConstructor\n@RequiredArgsConstructor\n@EqualsAndHashCode(callSuper = true)\npublic class Audi extends Car {\n    @NonNull\n    private String name;\n    @NonNull\n    private String headquarter;\n    private BigDecimal revenue = BigDecimal.ZERO;\n    private BigDecimal totalAssets = BigDecimal.ZERO;\n}\n</code></pre>\n<p>Usage:</p>\n<pre class=\"lang-java prettyprint-override\"><code>final Audi audi = new Audi(&quot;Audi A3&quot;, &quot;Germany&quot;);\nSystem.out.println(audi);\n</code></pre>\n<p>Output:</p>\n<pre><code>Audi(name=Audi A3, headquarter=Germany, revenue=0, totalAssets=0)\n</code></pre>\n"}],"owner":{"account_id":18044315,"reputation":1227,"user_id":13115701,"display_name":"Paul Marcelin Bejan"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":463,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75300876,"answer_count":1,"score":0,"last_activity_date":1675186106,"creation_date":1675176668,"question_id":75298926,"body_markdown":"Let&#39;s consider the following Entity:\r\n\r\n    @Data\r\n    @Builder\r\n    @NoArgsConstructor\r\n    @AllArgsConstructor\r\n    @EqualsAndHashCode(callSuper = true)\r\n    public class Audi extends Car {\r\n    \r\n        private String name;\r\n        \r\n        private String headquarter;\r\n        \r\n        private BigDecimal revenue = BigDecimal.ZERO;\r\n    \r\n        private BigDecimal totalAssets = BigDecimal.ZERO;\r\n\r\n    }\r\n\r\nI want to have all BigDecimal variables with BigDecimal.ZERO as default value.\r\nIf I initialize it immediately after declaration, \r\n\r\nI got this warning:\r\n\r\n&gt; @Builder will ignore the initializing expression entirely. If you want\r\n&gt; the initializing expression to serve as default, add @Builder.Default.\r\n&gt; If it is not supposed to be settable during building, make the field\r\n&gt; final.\r\n\r\nFor an Entity with 10/15 BigDecimal, it&#39;s not so beautiful to have this annotation on each field.\r\n\r\nAny alternative?","title":"Default Value for BigDecimal using Lombok Builder","body":"<p>Let's consider the following Entity:</p>\n<pre><code>@Data\n@Builder\n@NoArgsConstructor\n@AllArgsConstructor\n@EqualsAndHashCode(callSuper = true)\npublic class Audi extends Car {\n\n    private String name;\n    \n    private String headquarter;\n    \n    private BigDecimal revenue = BigDecimal.ZERO;\n\n    private BigDecimal totalAssets = BigDecimal.ZERO;\n\n}\n</code></pre>\n<p>I want to have all BigDecimal variables with BigDecimal.ZERO as default value.\nIf I initialize it immediately after declaration,</p>\n<p>I got this warning:</p>\n<blockquote>\n<p>@Builder will ignore the initializing expression entirely. If you want\nthe initializing expression to serve as default, add @Builder.Default.\nIf it is not supposed to be settable during building, make the field\nfinal.</p>\n</blockquote>\n<p>For an Entity with 10/15 BigDecimal, it's not so beautiful to have this annotation on each field.</p>\n<p>Any alternative?</p>\n"},{"tags":["java","spring","spring-boot","spring-security","spring-security-oauth2"],"comments":[{"owner":{"account_id":15841746,"reputation":6011,"user_id":11430047,"display_name":"Eleftheria Stein-Kousathana"},"score":0,"creation_date":1563528908,"post_id":57103518,"comment_id":100738717,"body_markdown":"You said &quot;When I run the application, there is no need to send a csrf token in the POST request.&quot;, how did you try this? A CSRF token is required for all POST requests unless explicitly disabled using `.csrf(csrf -&gt; csrf.disable())` in your security configuration. The sample project tests are all for GET requests, so they don&#39;t require a CSRF token.","body":"You said &quot;When I run the application, there is no need to send a csrf token in the POST request.&quot;, how did you try this? A CSRF token is required for all POST requests unless explicitly disabled using <code>.csrf(csrf -&gt; csrf.disable())</code> in your security configuration. The sample project tests are all for GET requests, so they don&#39;t require a CSRF token."},{"owner":{"account_id":4279495,"reputation":528,"user_id":3499320,"accept_rate":100,"display_name":"henriquels"},"score":0,"creation_date":1563544586,"post_id":57103518,"comment_id":100746732,"body_markdown":"Actually, the CSRF token is not required in runtime. When I run the following command: `curl -v -H &quot;Authorization: Bearer $TOKEN&quot; -d &quot;my message&quot; -X POST localhost:8080/message` I receive a 200 status. As far as I understand, the CSRF filter only checks the token if there is no Bearer token.","body":"Actually, the CSRF token is not required in runtime. When I run the following command: <code>curl -v -H &quot;Authorization: Bearer $TOKEN&quot; -d &quot;my message&quot; -X POST localhost:8080&#47;message</code> I receive a 200 status. As far as I understand, the CSRF filter only checks the token if there is no Bearer token."},{"owner":{"account_id":15841746,"reputation":6011,"user_id":11430047,"display_name":"Eleftheria Stein-Kousathana"},"score":0,"creation_date":1563553027,"post_id":57103518,"comment_id":100751122,"body_markdown":"My mistake, you are correct that the CSRF token is not needed if there is a Bearer token. The issue with the test that only includes the `jwt` post processor is that while this creates the security context containing the JWT, it does not create a Bearer token in the request (which is what the CSRF filter is looking for).","body":"My mistake, you are correct that the CSRF token is not needed if there is a Bearer token. The issue with the test that only includes the <code>jwt</code> post processor is that while this creates the security context containing the JWT, it does not create a Bearer token in the request (which is what the CSRF filter is looking for)."}],"answers":[{"tags":[],"owner":{"account_id":15841746,"reputation":6011,"user_id":11430047,"display_name":"Eleftheria Stein-Kousathana"},"down_vote_count":0,"up_vote_count":8,"is_accepted":true,"score":8,"last_activity_date":1563554936,"creation_date":1563554936,"answer_id":57116667,"question_id":57103518,"body_markdown":"In order for the CSRF filter to detect that you are using a JWT token, you will need to include the JWT token in your request as an `Authorization` header, or as a request parameter.  \r\nThe tests that you have mentioned have a mock `JwtDecoder`, which means you can use any string as your token and mock the decoded value.  \r\nYour test would then become:\r\n```\r\nJwt jwt = Jwt.withTokenValue(&quot;token&quot;)\r\n\t\t.header(&quot;alg&quot;, &quot;none&quot;)\r\n\t\t.claim(&quot;scope&quot;, &quot;message:read&quot;)\r\n\t\t.build();\r\nwhen(jwtDecoder.decode(anyString())).thenReturn(jwt);\r\nmockMvc.perform(post(&quot;/message&quot;)\r\n\t\t.content(&quot;Hello message&quot;)\r\n\t\t.header(&quot;Authorization&quot;, &quot;Bearer &quot; + jwt.getTokenValue()))\r\n\t\t.andExpect(status().isOk())\r\n\t\t.andExpect(content().string(is(&quot;Message was created. Content: Hello message&quot;)));\r\n```\r\nIf you are not mocking the `JwtDecoder` then you would need to retrieve a valid bearer token and pass that in the `Authorization` header.","title":"Spring security - oauth2 resource server tests","body":"<p>In order for the CSRF filter to detect that you are using a JWT token, you will need to include the JWT token in your request as an <code>Authorization</code> header, or as a request parameter.<br>\nThe tests that you have mentioned have a mock <code>JwtDecoder</code>, which means you can use any string as your token and mock the decoded value.<br>\nYour test would then become:</p>\n\n<pre><code>Jwt jwt = Jwt.withTokenValue(\"token\")\n        .header(\"alg\", \"none\")\n        .claim(\"scope\", \"message:read\")\n        .build();\nwhen(jwtDecoder.decode(anyString())).thenReturn(jwt);\nmockMvc.perform(post(\"/message\")\n        .content(\"Hello message\")\n        .header(\"Authorization\", \"Bearer \" + jwt.getTokenValue()))\n        .andExpect(status().isOk())\n        .andExpect(content().string(is(\"Message was created. Content: Hello message\")));\n</code></pre>\n\n<p>If you are not mocking the <code>JwtDecoder</code> then you would need to retrieve a valid bearer token and pass that in the <code>Authorization</code> header.</p>\n"},{"tags":[],"owner":{"account_id":308139,"reputation":8199,"user_id":619830,"accept_rate":75,"display_name":"ch4mp"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1675186025,"creation_date":1675186025,"answer_id":75300857,"question_id":57103518,"body_markdown":"First with Bearer access-token, you might be able to disable sessions (STATELESS session-management), and, as so, CSRF protection (CSRF attack vector is session).\r\n\r\nSecond there is a `.csrf()` MockMvc request post-processor which would simulate the CSRF token if you want to keep cessions (and CSRF protection).\r\n\r\nLast, what `jwt()` request post-processor does is configuring directly the security context with a `JwtAuthenticationToken` instance, not creating a valid JWT token set as Bearer access-token. With MockMvc, Authorization header is not decoded nor converted to an Authentication instance. =&gt; What you should set before MockMvc request execution for your test to pass are authorities, not scope claim:\r\n\r\n```java\r\n.with(jwt(jwt -&gt; jwt.authorities(List.of(new SimpleGrantedAuthority(&quot;SCOPE_message:read&quot;)))))\r\n```\r\n\r\nNote that you could also simply decorate your test function with:\r\n```java\r\n@WithMockJwtAuth(&quot;SCOPE_message:read&quot;)\r\n```\r\nFrom [this lib][1] I maintain \r\n\r\n\r\n  [1]: https://github.com/ch4mpy/spring-addons","title":"Spring security - oauth2 resource server tests","body":"<p>First with Bearer access-token, you might be able to disable sessions (STATELESS session-management), and, as so, CSRF protection (CSRF attack vector is session).</p>\n<p>Second there is a <code>.csrf()</code> MockMvc request post-processor which would simulate the CSRF token if you want to keep cessions (and CSRF protection).</p>\n<p>Last, what <code>jwt()</code> request post-processor does is configuring directly the security context with a <code>JwtAuthenticationToken</code> instance, not creating a valid JWT token set as Bearer access-token. With MockMvc, Authorization header is not decoded nor converted to an Authentication instance. =&gt; What you should set before MockMvc request execution for your test to pass are authorities, not scope claim:</p>\n<pre class=\"lang-java prettyprint-override\"><code>.with(jwt(jwt -&gt; jwt.authorities(List.of(new SimpleGrantedAuthority(&quot;SCOPE_message:read&quot;)))))\n</code></pre>\n<p>Note that you could also simply decorate your test function with:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@WithMockJwtAuth(&quot;SCOPE_message:read&quot;)\n</code></pre>\n<p>From <a href=\"https://github.com/ch4mpy/spring-addons\" rel=\"nofollow noreferrer\">this lib</a> I maintain</p>\n"}],"owner":{"account_id":4279495,"reputation":528,"user_id":3499320,"accept_rate":100,"display_name":"henriquels"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":4066,"favorite_count":0,"down_vote_count":0,"up_vote_count":6,"accepted_answer_id":57116667,"answer_count":2,"score":6,"last_activity_date":1675186025,"creation_date":1563490036,"question_id":57103518,"body_markdown":"I am having some problems when testing an oauth2 resource server using @WebMvcTest and the POST HTTP method.\r\n\r\nI always receive a 403 status code when I don&#39;t send the csrf token, even though the token is not required when I am using a bearer token.  \r\n\r\nHere is the POST method that I want to test.\r\n```\r\n@PostMapping(&quot;/message&quot;)\r\npublic String createMessage(@RequestBody String message) {\r\n    return String.format(&quot;Message was created. Content: %s&quot;, message);\r\n}\r\n\r\n```\r\n\r\nHere is my security config:\r\n```\r\nhttp.authorizeRequests(authorizeRequests -&gt; authorizeRequests\t\t\r\n   .antMatchers(&quot;/message/**&quot;)\r\n   .hasAuthority(&quot;SCOPE_message:read&quot;)\r\n   .anyRequest().authenticated()\r\n).oauth2ResourceServer(oauth2ResourceServer -&gt;\t\t\t\t \r\n    oauth2ResourceServer\r\n\t.jwt(withDefaults())\r\n);\r\n```\r\nI am following the tests provided in the samples of [spring-security](https://github.com/spring-projects/spring-security/blob/master/samples/boot/oauth2resourceserver/src/test/java/sample/OAuth2ResourceServerControllerTests.java).\r\n\r\nThe following test was supposed to pass but it fails because the csrf token is not sent in the request.\r\n\r\n```\r\nmockMvc.perform(post(&quot;/message&quot;).content(&quot;Hello message&quot;)\r\n    .with(jwt(jwt -&gt; jwt.claim(&quot;scope&quot;, &quot;message:read&quot;)))\r\n    .andExpect(status().isOk())\r\n    .andExpect(content().string(is(&quot;Message was created. Content: Hello message&quot;)));\r\n```\r\n\r\nWhen I add the csrf token to the request, the test passes:\r\n```\r\nmockMvc.perform(post(&quot;/message&quot;).content(&quot;Hello message&quot;)\r\n    .with(jwt(jwt -&gt; jwt.claim(&quot;scope&quot;, &quot;message:read&quot;)))\r\n    .with(csrf()))\r\n    .andExpect(status().isOk())\r\n    .andExpect(content().string(is(&quot;Message was created. Content: Hello message&quot;)));\r\n```\r\n\r\nWhen I run the application, there is no need to send a csrf token in the POST request.\r\n\r\nI have forked the Spring Security GitHub repository and the project with this failing test is available at this [link](https://github.com/henriquels25/spring-security/blob/integration_tests_post_resource_server/samples/boot/oauth2resourceserver/src/test/java/sample/OAuth2ResourceServerControllerTests.java).\r\n\r\nIs there a way for me to configure my tests so I don&#39;t need to send the csrf token in the POST request?","title":"Spring security - oauth2 resource server tests","body":"<p>I am having some problems when testing an oauth2 resource server using @WebMvcTest and the POST HTTP method.</p>\n\n<p>I always receive a 403 status code when I don't send the csrf token, even though the token is not required when I am using a bearer token.  </p>\n\n<p>Here is the POST method that I want to test.</p>\n\n<pre><code>@PostMapping(\"/message\")\npublic String createMessage(@RequestBody String message) {\n    return String.format(\"Message was created. Content: %s\", message);\n}\n\n</code></pre>\n\n<p>Here is my security config:</p>\n\n<pre><code>http.authorizeRequests(authorizeRequests -&gt; authorizeRequests       \n   .antMatchers(\"/message/**\")\n   .hasAuthority(\"SCOPE_message:read\")\n   .anyRequest().authenticated()\n).oauth2ResourceServer(oauth2ResourceServer -&gt;               \n    oauth2ResourceServer\n    .jwt(withDefaults())\n);\n</code></pre>\n\n<p>I am following the tests provided in the samples of <a href=\"https://github.com/spring-projects/spring-security/blob/master/samples/boot/oauth2resourceserver/src/test/java/sample/OAuth2ResourceServerControllerTests.java\" rel=\"noreferrer\">spring-security</a>.</p>\n\n<p>The following test was supposed to pass but it fails because the csrf token is not sent in the request.</p>\n\n<pre><code>mockMvc.perform(post(\"/message\").content(\"Hello message\")\n    .with(jwt(jwt -&gt; jwt.claim(\"scope\", \"message:read\")))\n    .andExpect(status().isOk())\n    .andExpect(content().string(is(\"Message was created. Content: Hello message\")));\n</code></pre>\n\n<p>When I add the csrf token to the request, the test passes:</p>\n\n<pre><code>mockMvc.perform(post(\"/message\").content(\"Hello message\")\n    .with(jwt(jwt -&gt; jwt.claim(\"scope\", \"message:read\")))\n    .with(csrf()))\n    .andExpect(status().isOk())\n    .andExpect(content().string(is(\"Message was created. Content: Hello message\")));\n</code></pre>\n\n<p>When I run the application, there is no need to send a csrf token in the POST request.</p>\n\n<p>I have forked the Spring Security GitHub repository and the project with this failing test is available at this <a href=\"https://github.com/henriquels25/spring-security/blob/integration_tests_post_resource_server/samples/boot/oauth2resourceserver/src/test/java/sample/OAuth2ResourceServerControllerTests.java\" rel=\"noreferrer\">link</a>.</p>\n\n<p>Is there a way for me to configure my tests so I don't need to send the csrf token in the POST request?</p>\n"},{"tags":["java","groovy","soapui"],"comments":[{"owner":{"account_id":6685637,"reputation":739,"user_id":5156999,"display_name":"Santosh b"},"score":0,"creation_date":1675186309,"post_id":75300813,"comment_id":132872903,"body_markdown":"Check if this urlDB certificate is expired","body":"Check if this urlDB certificate is expired"},{"owner":{"account_id":16724784,"reputation":29,"user_id":12088615,"display_name":"pridhvimallikharjun"},"score":0,"creation_date":1675219586,"post_id":75300813,"comment_id":132880161,"body_markdown":"It has validity","body":"It has validity"},{"owner":{"account_id":3758602,"reputation":10072,"user_id":3124333,"accept_rate":100,"display_name":"SiKing"},"score":0,"creation_date":1675464788,"post_id":75300813,"comment_id":132942291,"body_markdown":"1) Are you using this at an employer that uses packet inspection for their security? 2) Are you running this from within SoapUI, or elsewhere? What version of SoapUI?","body":"1) Are you using this at an employer that uses packet inspection for their security? 2) Are you running this from within SoapUI, or elsewhere? What version of SoapUI?"}],"owner":{"account_id":16724784,"reputation":29,"user_id":12088615,"display_name":"pridhvimallikharjun"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":193,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1675185784,"creation_date":1675185784,"question_id":75300813,"body_markdown":"I&#39;m trying to connect the Cosmo DB and query database through the Groovy script. However, I&#39;m seeing the below exception Please help to resolve the issue\r\n\r\n  **Exception**\r\n\r\n      java.lang.IllegalStateException: com.microsoft.azure.documentdb.DocumentClientException: javax.net.ssl.SSLHandshakeException: PKIX path building failed: sun.security.provider.certpath.SunCertPathBuilderException: unable to find valid certification path to requested target error at line: 52\r\n\r\n***code***\r\n\r\n    \r\n    import java.io.FileReader;\r\n    import java.io.IOException;\r\n    import java.text.DateFormat;\r\n    import java.text.SimpleDateFormat;\r\n    import java.util.Date;\r\n    import com.microsoft.azure.cosmosdb.spark.*\r\n    import com.microsoft.azure.*\r\n    import com.microsoft.azure.cosmosdb.*\r\n    import com.microsoft.azure.documentdb.ConnectionPolicy;\r\n    import com.microsoft.azure.documentdb.ConsistencyLevel;\r\n    import com.microsoft.azure.documentdb.DataType;\r\n    import com.microsoft.azure.documentdb.Database;\r\n    import com.microsoft.azure.documentdb.DocumentClient;\r\n    import com.microsoft.azure.documentdb.DocumentClientException;\r\n    import com.microsoft.azure.documentdb.DocumentCollection;\r\n    import com.microsoft.azure.documentdb.Index;\r\n    import com.microsoft.azure.documentdb.IndexingPolicy;\r\n    import com.microsoft.azure.documentdb.RangeIndex;\r\n    import com.microsoft.azure.documentdb.RequestOptions;\r\n    import com.microsoft.azure.documentdb.*\r\n    import com.eviware.soapui.model.testsuite.TestRunner.*\r\n    \r\n    \r\n    \r\n    DocumentClient client;\r\n    \r\n    // Get the database configuration\r\n    urlDB = testRunner.testCase.testSuite.project.getPropertyValue( &quot;envCosmoURL&quot; );\r\n    keyDB = testRunner.testCase.testSuite.project.getPropertyValue( &quot;envCosmoKey&quot; );\r\n    \r\n    // Making the connection with COSMos DB account\r\n    client = new DocumentClient(&quot;${urlDB}&quot;,\r\n                    &quot;${keyDB}&quot;,\r\n                    new ConnectionPolicy(), ConsistencyLevel.Session);\r\n    \r\n    //Defining the options for retrieving data.\r\n    feedOptions = new FeedOptions();\r\n    feedOptions.setEmitVerboseTracesInQuery(false);\r\n    \r\n    // In this section we are accessing to the studydefinition table\r\n    DB = client.queryDatabases(\r\n            &quot;SELECT * FROM root r WHERE r.id=&#39;StudyDefinition&#39;&quot;, null)\r\n          .getQueryIterable()\r\n          .toList();\r\n     \r\n    StudyDefDB = DB[0]\r\n\r\n\r\n\r\nPlease help how to resolve the issue","title":"SoapUI : : javax.net.ssl.SSLHandshakeException: PKIX path building failed:","body":"<p>I'm trying to connect the Cosmo DB and query database through the Groovy script. However, I'm seeing the below exception Please help to resolve the issue</p>\n<p><strong>Exception</strong></p>\n<pre><code>  java.lang.IllegalStateException: com.microsoft.azure.documentdb.DocumentClientException: javax.net.ssl.SSLHandshakeException: PKIX path building failed: sun.security.provider.certpath.SunCertPathBuilderException: unable to find valid certification path to requested target error at line: 52\n</code></pre>\n<p><em><strong>code</strong></em></p>\n<pre><code>import java.io.FileReader;\nimport java.io.IOException;\nimport java.text.DateFormat;\nimport java.text.SimpleDateFormat;\nimport java.util.Date;\nimport com.microsoft.azure.cosmosdb.spark.*\nimport com.microsoft.azure.*\nimport com.microsoft.azure.cosmosdb.*\nimport com.microsoft.azure.documentdb.ConnectionPolicy;\nimport com.microsoft.azure.documentdb.ConsistencyLevel;\nimport com.microsoft.azure.documentdb.DataType;\nimport com.microsoft.azure.documentdb.Database;\nimport com.microsoft.azure.documentdb.DocumentClient;\nimport com.microsoft.azure.documentdb.DocumentClientException;\nimport com.microsoft.azure.documentdb.DocumentCollection;\nimport com.microsoft.azure.documentdb.Index;\nimport com.microsoft.azure.documentdb.IndexingPolicy;\nimport com.microsoft.azure.documentdb.RangeIndex;\nimport com.microsoft.azure.documentdb.RequestOptions;\nimport com.microsoft.azure.documentdb.*\nimport com.eviware.soapui.model.testsuite.TestRunner.*\n\n\n\nDocumentClient client;\n\n// Get the database configuration\nurlDB = testRunner.testCase.testSuite.project.getPropertyValue( &quot;envCosmoURL&quot; );\nkeyDB = testRunner.testCase.testSuite.project.getPropertyValue( &quot;envCosmoKey&quot; );\n\n// Making the connection with COSMos DB account\nclient = new DocumentClient(&quot;${urlDB}&quot;,\n                &quot;${keyDB}&quot;,\n                new ConnectionPolicy(), ConsistencyLevel.Session);\n\n//Defining the options for retrieving data.\nfeedOptions = new FeedOptions();\nfeedOptions.setEmitVerboseTracesInQuery(false);\n\n// In this section we are accessing to the studydefinition table\nDB = client.queryDatabases(\n        &quot;SELECT * FROM root r WHERE r.id='StudyDefinition'&quot;, null)\n      .getQueryIterable()\n      .toList();\n \nStudyDefDB = DB[0]\n</code></pre>\n<p>Please help how to resolve the issue</p>\n"},{"tags":["java","json","gson"],"comments":[{"owner":{"account_id":1111280,"reputation":6531,"user_id":1101692,"accept_rate":89,"display_name":"Shark"},"score":5,"creation_date":1675180030,"post_id":75299534,"comment_id":132870782,"body_markdown":"You do realize that your input &quot;json&quot; isn&#39;t really JSON, right? Why not have a talk with your backend team about it?","body":"You do realize that your input &quot;json&quot; isn&#39;t really JSON, right? Why not have a talk with your backend team about it?"},{"owner":{"account_id":12743722,"reputation":19956,"user_id":12567365,"display_name":"andrewJames"},"score":0,"creation_date":1675180255,"post_id":75299534,"comment_id":132870852,"body_markdown":"What you are showing us is _almost_ valid JSON so maybe you are actually handling valid JSON. We can&#39;t be sure. Asking for library recommendations is [off-topic](https://stackoverflow.com/help/on-topic) for Stack Overflow, but you can take a look at [How to parse JSON in Java](https://stackoverflow.com/q/2591098/12567365) as a starting point.","body":"What you are showing us is <i>almost</i> valid JSON so maybe you are actually handling valid JSON. We can&#39;t be sure. Asking for library recommendations is <a href=\"https://stackoverflow.com/help/on-topic\">off-topic</a> for Stack Overflow, but you can take a look at <a href=\"https://stackoverflow.com/q/2591098/12567365\">How to parse JSON in Java</a> as a starting point."},{"owner":{"account_id":6162914,"reputation":87,"user_id":4803870,"display_name":"Arthur"},"score":0,"creation_date":1675180326,"post_id":75299534,"comment_id":132870879,"body_markdown":"@Shark,\nWhile copying the excerpt from the original Json the &#39;data&#39; key got added.\nEdited the input json to be valid.","body":"@Shark, While copying the excerpt from the original Json the &#39;data&#39; key got added. Edited the input json to be valid."},{"owner":{"account_id":1111280,"reputation":6531,"user_id":1101692,"accept_rate":89,"display_name":"Shark"},"score":0,"creation_date":1675180859,"post_id":75299534,"comment_id":132871076,"body_markdown":"@Arthur it&#39;s still not valid JSON though. It&#39;s a JSON Array, called &quot;Employee&quot; which has elements that represent different field of the imaginary parent employee. And then, the second employee starts in the middle of it.\n\nIt would make more sense if it were a json array of json arrays - meaning, `Employees [ Employee: [ &lt;employee 1 items&gt; ], Employee: [ &lt;employee 2 items&gt; ] ... ]`\n\nThe way it currently sits, there is no common POJO class to use for it, since it could be a &lt;String, String&gt; mapping, or a &lt;String, Integer&gt; mapping. Looks like you could use a SAX parser for this &quot;json&quot;.","body":"@Arthur it&#39;s still not valid JSON though. It&#39;s a JSON Array, called &quot;Employee&quot; which has elements that represent different field of the imaginary parent employee. And then, the second employee starts in the middle of it.  It would make more sense if it were a json array of json arrays - meaning, <code>Employees [ Employee: [ &lt;employee 1 items&gt; ], Employee: [ &lt;employee 2 items&gt; ] ... ]</code>  The way it currently sits, there is no common POJO class to use for it, since it could be a &lt;String, String&gt; mapping, or a &lt;String, Integer&gt; mapping. Looks like you could use a SAX parser for this &quot;json&quot;."},{"owner":{"account_id":17835,"reputation":303895,"user_id":40342,"accept_rate":62,"display_name":"Joachim Sauer"},"score":1,"creation_date":1675182992,"post_id":75299534,"comment_id":132871857,"body_markdown":"@Shark: the current input described here is absolutely valid JSON. It&#39;s not &quot;nice&quot; JSON or &quot;well-designed&quot; JSON, but it&#39;s JSON.","body":"@Shark: the current input described here is absolutely valid JSON. It&#39;s not &quot;nice&quot; JSON or &quot;well-designed&quot; JSON, but it&#39;s JSON."},{"owner":{"account_id":6162914,"reputation":87,"user_id":4803870,"display_name":"Arthur"},"score":0,"creation_date":1675182998,"post_id":75299534,"comment_id":132871859,"body_markdown":"@Shark,\nUnfortunately, I don&#39;t have the control over the incoming json data.","body":"@Shark, Unfortunately, I don&#39;t have the control over the incoming json data."}],"answers":[{"tags":[],"owner":{"account_id":17835,"reputation":303895,"user_id":40342,"accept_rate":62,"display_name":"Joachim Sauer"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1675181503,"creation_date":1675181503,"answer_id":75299960,"question_id":75299534,"body_markdown":"The comments about the input format being &quot;weird&quot; (to put it politely) are spot-on: This is a convoluted way to represent simple hierarchical data.\r\n\r\nBut sometimes we have to deal with sub-optimal input formats, that&#39;s why we can fix them like this:\r\n\r\n```\r\n  private static JSONObject arrayToStructure(JSONArray inputArray) {\r\n    JSONObject output = new JSONObject();\r\n    for (Object o : inputArray) {\r\n      assert o instanceof JSONObject;\r\n      JSONObject jso = (JSONObject) o;\r\n      assert jso.length() == 1;\r\n      String key = jso.keys().next();\r\n      Object value = jso.get(key);\r\n      setJsonPath(output, key, value);\r\n    }\r\n    return output;\r\n  }\r\n\r\n  private static void setJsonPath(JSONObject target, String key, Object value) {\r\n    String[] keyParts = key.split(&quot;\\\\.&quot;);\r\n    JSONObject parent = target;\r\n    for (int i = 0; i &lt; keyParts.length - 1; i++) {\r\n      String keyPart = keyParts[i];\r\n      if (parent.has(keyPart)) {\r\n        parent = parent.getJSONObject(keyPart);\r\n      } else {\r\n        JSONObject child = new JSONObject();\r\n        parent.put(keyPart, child);\r\n        parent = child;\r\n      }\r\n    }\r\n    assert !parent.has(keyParts[keyParts.length - 1]);\r\n    parent.put(keyParts[keyParts.length - 1], value);\r\n  }\r\n```\r\n\r\nThis code uses [JSON-Java][1], probably better known as `org.json:json`.\r\n\r\nAnd it can be used like this:\r\n\r\n```\r\n  public static void main(String[] args) {\r\n    String input = &quot;&quot;&quot;\r\n        [\r\n          {\r\n            &quot;employee1.id&quot;: 1\r\n          },\r\n          {\r\n            &quot;employee1.name&quot;: &quot;John&quot;\r\n          },\r\n          {\r\n            &quot;employee1.address.street&quot;: &quot;main street&quot;\r\n          },\r\n          {\r\n            &quot;employee1.address.pin&quot;: &quot;123456&quot;\r\n          },\r\n          {\r\n            &quot;employee2.id&quot;: 2\r\n          },\r\n          {\r\n            &quot;employee2.name&quot;: &quot;Mike&quot;\r\n          },\r\n          {\r\n            &quot;employee2.address.street&quot;: &quot;51 street&quot;\r\n          },\r\n          {\r\n            &quot;employee2.address.pin&quot;: &quot;234543&quot;\r\n          }\r\n        ]&quot;&quot;&quot;;\r\n    JSONArray inputArray = new JSONArray(input);\r\n    JSONObject structure = arrayToStructure(inputArray);\r\n    System.out.println(structure.toString(2));\r\n  }\r\n```\r\n\r\nNote that this code is lacking proper sanity checks (some of which I&#39;ve hinted at using `assert`) and the nature of this &quot;protocol&quot; means that you can get misleading, ambiguous or straight up malicious inputs. For example nothing stops the input from having both `&quot;employee1.id&quot;: 1` and `&quot;employee1.id&quot;: 2` in there. How that is to be interpreted is up to the parser and such ambiguity is a great source of bugs and potential security issues.\r\n\r\n\r\n  [1]: https://stleary.github.io/JSON-java/","title":"Json manipulation and conversion in Java","body":"<p>The comments about the input format being &quot;weird&quot; (to put it politely) are spot-on: This is a convoluted way to represent simple hierarchical data.</p>\n<p>But sometimes we have to deal with sub-optimal input formats, that's why we can fix them like this:</p>\n<pre><code>  private static JSONObject arrayToStructure(JSONArray inputArray) {\n    JSONObject output = new JSONObject();\n    for (Object o : inputArray) {\n      assert o instanceof JSONObject;\n      JSONObject jso = (JSONObject) o;\n      assert jso.length() == 1;\n      String key = jso.keys().next();\n      Object value = jso.get(key);\n      setJsonPath(output, key, value);\n    }\n    return output;\n  }\n\n  private static void setJsonPath(JSONObject target, String key, Object value) {\n    String[] keyParts = key.split(&quot;\\\\.&quot;);\n    JSONObject parent = target;\n    for (int i = 0; i &lt; keyParts.length - 1; i++) {\n      String keyPart = keyParts[i];\n      if (parent.has(keyPart)) {\n        parent = parent.getJSONObject(keyPart);\n      } else {\n        JSONObject child = new JSONObject();\n        parent.put(keyPart, child);\n        parent = child;\n      }\n    }\n    assert !parent.has(keyParts[keyParts.length - 1]);\n    parent.put(keyParts[keyParts.length - 1], value);\n  }\n</code></pre>\n<p>This code uses <a href=\"https://stleary.github.io/JSON-java/\" rel=\"nofollow noreferrer\">JSON-Java</a>, probably better known as <code>org.json:json</code>.</p>\n<p>And it can be used like this:</p>\n<pre><code>  public static void main(String[] args) {\n    String input = &quot;&quot;&quot;\n        [\n          {\n            &quot;employee1.id&quot;: 1\n          },\n          {\n            &quot;employee1.name&quot;: &quot;John&quot;\n          },\n          {\n            &quot;employee1.address.street&quot;: &quot;main street&quot;\n          },\n          {\n            &quot;employee1.address.pin&quot;: &quot;123456&quot;\n          },\n          {\n            &quot;employee2.id&quot;: 2\n          },\n          {\n            &quot;employee2.name&quot;: &quot;Mike&quot;\n          },\n          {\n            &quot;employee2.address.street&quot;: &quot;51 street&quot;\n          },\n          {\n            &quot;employee2.address.pin&quot;: &quot;234543&quot;\n          }\n        ]&quot;&quot;&quot;;\n    JSONArray inputArray = new JSONArray(input);\n    JSONObject structure = arrayToStructure(inputArray);\n    System.out.println(structure.toString(2));\n  }\n</code></pre>\n<p>Note that this code is lacking proper sanity checks (some of which I've hinted at using <code>assert</code>) and the nature of this &quot;protocol&quot; means that you can get misleading, ambiguous or straight up malicious inputs. For example nothing stops the input from having both <code>&quot;employee1.id&quot;: 1</code> and <code>&quot;employee1.id&quot;: 2</code> in there. How that is to be interpreted is up to the parser and such ambiguity is a great source of bugs and potential security issues.</p>\n"},{"tags":[],"owner":{"account_id":13009011,"reputation":1105,"user_id":9402689,"display_name":"Raymond Choi"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1675185353,"creation_date":1675185353,"answer_id":75300733,"question_id":75299534,"body_markdown":"Library _Josson_ can do the transformation by one expression.\r\n\r\nhttps://github.com/octomix/josson\r\n\r\n    Josson josson = Josson.fromJsonString(\r\n        &quot;{&quot; +\r\n        &quot;  \\&quot;Employee\\&quot;: [&quot; +\r\n        &quot;    {&quot; +\r\n        &quot;      \\&quot;employee1.id\\&quot;: 1&quot; +\r\n        &quot;    },&quot; +\r\n        &quot;    {&quot; +\r\n        &quot;      \\&quot;employee1.name\\&quot;: \\&quot;John\\&quot;&quot; +\r\n        &quot;    },&quot; +\r\n        &quot;    {&quot; +\r\n        &quot;      \\&quot;employee1.address.street\\&quot;: \\&quot;main street\\&quot;&quot; +\r\n        &quot;    },&quot; +\r\n        &quot;    {&quot; +\r\n        &quot;      \\&quot;employee1.address.pin\\&quot;: \\&quot;123456\\&quot;&quot; +\r\n        &quot;    },&quot; +\r\n        &quot;    {&quot; +\r\n        &quot;      \\&quot;employee2.id\\&quot;: 2&quot; +\r\n        &quot;    },&quot; +\r\n        &quot;    {&quot; +\r\n        &quot;      \\&quot;employee2.name\\&quot;: \\&quot;Mike\\&quot;&quot; +\r\n        &quot;    },&quot; +\r\n        &quot;    {&quot; +\r\n        &quot;      \\&quot;employee2.address.street\\&quot;: \\&quot;51 street\\&quot;&quot; +\r\n        &quot;    },&quot; +\r\n        &quot;    {&quot; +\r\n        &quot;      \\&quot;employee2.address.pin\\&quot;: \\&quot;234543\\&quot;&quot; +\r\n        &quot;    }&quot; +\r\n        &quot;  ]&quot; +\r\n        &quot;}&quot;);\r\n    JsonNode node = josson.getNode(&quot;Employee.mergeObjects().unflatten(&#39;.&#39;)&quot;);\r\n    System.out.println(node.toPrettyString());\r\n\r\n__Output__\r\n\r\n    {\r\n      &quot;employee1&quot; : {\r\n        &quot;id&quot; : 1,\r\n        &quot;name&quot; : &quot;John&quot;,\r\n        &quot;address&quot; : {\r\n          &quot;street&quot; : &quot;main street&quot;,\r\n          &quot;pin&quot; : &quot;123456&quot;\r\n        }\r\n      },\r\n      &quot;employee2&quot; : {\r\n        &quot;id&quot; : 2,\r\n        &quot;name&quot; : &quot;Mike&quot;,\r\n        &quot;address&quot; : {\r\n          &quot;street&quot; : &quot;51 street&quot;,\r\n          &quot;pin&quot; : &quot;234543&quot;\r\n        }\r\n      }\r\n    }\r\n","title":"Json manipulation and conversion in Java","body":"<p>Library <em>Josson</em> can do the transformation by one expression.</p>\n<p><a href=\"https://github.com/octomix/josson\" rel=\"nofollow noreferrer\">https://github.com/octomix/josson</a></p>\n<pre><code>Josson josson = Josson.fromJsonString(\n    &quot;{&quot; +\n    &quot;  \\&quot;Employee\\&quot;: [&quot; +\n    &quot;    {&quot; +\n    &quot;      \\&quot;employee1.id\\&quot;: 1&quot; +\n    &quot;    },&quot; +\n    &quot;    {&quot; +\n    &quot;      \\&quot;employee1.name\\&quot;: \\&quot;John\\&quot;&quot; +\n    &quot;    },&quot; +\n    &quot;    {&quot; +\n    &quot;      \\&quot;employee1.address.street\\&quot;: \\&quot;main street\\&quot;&quot; +\n    &quot;    },&quot; +\n    &quot;    {&quot; +\n    &quot;      \\&quot;employee1.address.pin\\&quot;: \\&quot;123456\\&quot;&quot; +\n    &quot;    },&quot; +\n    &quot;    {&quot; +\n    &quot;      \\&quot;employee2.id\\&quot;: 2&quot; +\n    &quot;    },&quot; +\n    &quot;    {&quot; +\n    &quot;      \\&quot;employee2.name\\&quot;: \\&quot;Mike\\&quot;&quot; +\n    &quot;    },&quot; +\n    &quot;    {&quot; +\n    &quot;      \\&quot;employee2.address.street\\&quot;: \\&quot;51 street\\&quot;&quot; +\n    &quot;    },&quot; +\n    &quot;    {&quot; +\n    &quot;      \\&quot;employee2.address.pin\\&quot;: \\&quot;234543\\&quot;&quot; +\n    &quot;    }&quot; +\n    &quot;  ]&quot; +\n    &quot;}&quot;);\nJsonNode node = josson.getNode(&quot;Employee.mergeObjects().unflatten('.')&quot;);\nSystem.out.println(node.toPrettyString());\n</code></pre>\n<p><strong>Output</strong></p>\n<pre><code>{\n  &quot;employee1&quot; : {\n    &quot;id&quot; : 1,\n    &quot;name&quot; : &quot;John&quot;,\n    &quot;address&quot; : {\n      &quot;street&quot; : &quot;main street&quot;,\n      &quot;pin&quot; : &quot;123456&quot;\n    }\n  },\n  &quot;employee2&quot; : {\n    &quot;id&quot; : 2,\n    &quot;name&quot; : &quot;Mike&quot;,\n    &quot;address&quot; : {\n      &quot;street&quot; : &quot;51 street&quot;,\n      &quot;pin&quot; : &quot;234543&quot;\n    }\n  }\n}\n</code></pre>\n"}],"owner":{"account_id":6162914,"reputation":87,"user_id":4803870,"display_name":"Arthur"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":87,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75299960,"answer_count":2,"score":0,"last_activity_date":1675185353,"creation_date":1675179604,"question_id":75299534,"body_markdown":"I have an input json like:\r\n\r\n    {\r\n        &quot;Employee&quot;: [\r\n          {\r\n            &quot;employee1.id&quot;: 1\r\n          },\r\n          {\r\n            &quot;employee1.name&quot;: &quot;John&quot;\r\n          },\r\n          {\r\n            &quot;employee1.address.street&quot;: &quot;main street&quot;\r\n          },\r\n          {\r\n            &quot;employee1.address.pin&quot;: &quot;123456&quot;\r\n          },\r\n    \t  {\r\n            &quot;employee2.id&quot;: 2\r\n          },\r\n          {\r\n            &quot;employee2.name&quot;: &quot;Mike&quot;\r\n          },\r\n          {\r\n            &quot;employee2.address.street&quot;: &quot;51 street&quot;\r\n          },\r\n          {\r\n            &quot;employee2.address.pin&quot;: &quot;234543&quot;\r\n          }\r\n    \t]\r\n    }\r\n\r\nAnd I am trying to convert it into:\r\n\r\n    {\r\n    \t&quot;employee1&quot;:{\r\n    \t\t&quot;id&quot;: 1,\r\n    \t\t&quot;name&quot;: &quot;John&quot;,\r\n    \t\t&quot;address&quot;: {\r\n    \t\t\t&quot;street&quot;: &quot;main street&quot;,\r\n    \t\t\t&quot;pin&quot;: &quot;123456&quot;\r\n    \t\t}\r\n    \t},\r\n    \t\t&quot;employee2&quot;:{\r\n    \t\t&quot;id&quot;: 2,\r\n    \t\t&quot;name&quot;: &quot;Mike&quot;,\r\n    \t\t&quot;address&quot;: {\r\n    \t\t\t&quot;street&quot;: &quot;51 street&quot;,\r\n    \t\t\t&quot;pin&quot;: &quot;234543&quot;\r\n    \t\t}\r\n    \t}\r\n    }\r\n\r\nI tried to split the key from input json with dot i.e. &#39;**.**&#39; and tried to iterate over to construct a map: Map&lt;String, Object&gt;\r\nBut the problem is the input json key depth can go beyond 2 i.e. in future the input key can be like:\r\n\r\n    {\r\n        &quot;employee1.address.tempAddress.street&quot;: &quot;main street&quot;\r\n    },\r\n    {\r\n        &quot;employee1.address.permanentAddress.street&quot;: &quot;main street&quot;\r\n    }\r\n\r\nSo, is there any library available to achieve this, or anything closely related to this using which I can achieve this?","title":"Json manipulation and conversion in Java","body":"<p>I have an input json like:</p>\n<pre><code>{\n    &quot;Employee&quot;: [\n      {\n        &quot;employee1.id&quot;: 1\n      },\n      {\n        &quot;employee1.name&quot;: &quot;John&quot;\n      },\n      {\n        &quot;employee1.address.street&quot;: &quot;main street&quot;\n      },\n      {\n        &quot;employee1.address.pin&quot;: &quot;123456&quot;\n      },\n      {\n        &quot;employee2.id&quot;: 2\n      },\n      {\n        &quot;employee2.name&quot;: &quot;Mike&quot;\n      },\n      {\n        &quot;employee2.address.street&quot;: &quot;51 street&quot;\n      },\n      {\n        &quot;employee2.address.pin&quot;: &quot;234543&quot;\n      }\n    ]\n}\n</code></pre>\n<p>And I am trying to convert it into:</p>\n<pre><code>{\n    &quot;employee1&quot;:{\n        &quot;id&quot;: 1,\n        &quot;name&quot;: &quot;John&quot;,\n        &quot;address&quot;: {\n            &quot;street&quot;: &quot;main street&quot;,\n            &quot;pin&quot;: &quot;123456&quot;\n        }\n    },\n        &quot;employee2&quot;:{\n        &quot;id&quot;: 2,\n        &quot;name&quot;: &quot;Mike&quot;,\n        &quot;address&quot;: {\n            &quot;street&quot;: &quot;51 street&quot;,\n            &quot;pin&quot;: &quot;234543&quot;\n        }\n    }\n}\n</code></pre>\n<p>I tried to split the key from input json with dot i.e. '<strong>.</strong>' and tried to iterate over to construct a map: Map&lt;String, Object&gt;\nBut the problem is the input json key depth can go beyond 2 i.e. in future the input key can be like:</p>\n<pre><code>{\n    &quot;employee1.address.tempAddress.street&quot;: &quot;main street&quot;\n},\n{\n    &quot;employee1.address.permanentAddress.street&quot;: &quot;main street&quot;\n}\n</code></pre>\n<p>So, is there any library available to achieve this, or anything closely related to this using which I can achieve this?</p>\n"},{"tags":["java","spring","jpa","dependencies","mapper"],"comments":[{"owner":{"account_id":8316417,"reputation":565,"user_id":6249539,"accept_rate":83,"display_name":"yashpandey8055"},"score":0,"creation_date":1675172532,"post_id":75297952,"comment_id":132867966,"body_markdown":"I believe this line &quot;.map(UserMapper::toUser)&quot; is your problem , You have method reference to the same method which will indeed result in stackoverflow error","body":"I believe this line &quot;.map(UserMapper::toUser)&quot; is your problem , You have method reference to the same method which will indeed result in stackoverflow error"},{"owner":{"account_id":187094,"reputation":5113,"user_id":424903,"display_name":"Gimby"},"score":1,"creation_date":1675175272,"post_id":75297952,"comment_id":132868976,"body_markdown":"Snip: editing out a misunderstanding of the data. Somewhere there needs to be some logic which checks &quot;this user is already mapped before&quot;.","body":"Snip: editing out a misunderstanding of the data. Somewhere there needs to be some logic which checks &quot;this user is already mapped before&quot;."},{"owner":{"account_id":21382922,"reputation":89,"user_id":15748526,"display_name":"coman"},"score":0,"creation_date":1675177277,"post_id":75297952,"comment_id":132869713,"body_markdown":"@Gimby could i see an example please?","body":"@Gimby could i see an example please?"},{"owner":{"account_id":21382922,"reputation":89,"user_id":15748526,"display_name":"coman"},"score":0,"creation_date":1675179578,"post_id":75297952,"comment_id":132870607,"body_markdown":"I need a hint to solve this","body":"I need a hint to solve this"}],"answers":[{"tags":[],"owner":{"account_id":60737,"reputation":15904,"user_id":181336,"display_name":"Adriaan Koster"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1675173453,"creation_date":1675172602,"answer_id":75298072,"question_id":75297952,"body_markdown":"One way to resolve this is to model the &#39;follows&#39; relationship as a separate entity:\r\n\r\n    @Table(name=&quot;user_followers&quot;)\r\n    public class Follows {\r\n\r\n       @Id\r\n       @GeneratedValue\r\n       private Long id;\r\n\r\n       @NotNull\r\n       @Column(name = &quot;follower_Id&quot;)\r\n       private User follower;\r\n\r\n       @NotNull\r\n       @Column(name = &quot;user_id&quot;)\r\n       private User user;\r\n    }\r\n\r\nThen you could give your user two one-to-many lists of these entities:\r\n\r\n    public class User {\r\n    \r\n       @Id\r\n       @GeneratedValue\r\n       private Long id;       \r\n    \r\n       @OneToMany(mappedBy = &quot;user_id&quot;)\r\n       private List&lt;Follows&gt; followers;       \r\n\r\n       @OneToMany(mappedBy = &quot;follower_Id&quot;)\r\n       private List&lt;Follows&gt; following;\r\n\r\n    }\r\n\r\nEDIT: instead of the id field in Follows you could use the user_id and follower_id as a composite primary key using @Embeddable. Omitted here for brevity. See here for more details: https://www.baeldung.com/jpa-many-to-many","title":"Mapping DTO with circular self dependency","body":"<p>One way to resolve this is to model the 'follows' relationship as a separate entity:</p>\n<pre><code>@Table(name=&quot;user_followers&quot;)\npublic class Follows {\n\n   @Id\n   @GeneratedValue\n   private Long id;\n\n   @NotNull\n   @Column(name = &quot;follower_Id&quot;)\n   private User follower;\n\n   @NotNull\n   @Column(name = &quot;user_id&quot;)\n   private User user;\n}\n</code></pre>\n<p>Then you could give your user two one-to-many lists of these entities:</p>\n<pre><code>public class User {\n\n   @Id\n   @GeneratedValue\n   private Long id;       \n\n   @OneToMany(mappedBy = &quot;user_id&quot;)\n   private List&lt;Follows&gt; followers;       \n\n   @OneToMany(mappedBy = &quot;follower_Id&quot;)\n   private List&lt;Follows&gt; following;\n\n}\n</code></pre>\n<p>EDIT: instead of the id field in Follows you could use the user_id and follower_id as a composite primary key using @Embeddable. Omitted here for brevity. See here for more details: <a href=\"https://www.baeldung.com/jpa-many-to-many\" rel=\"nofollow noreferrer\">https://www.baeldung.com/jpa-many-to-many</a></p>\n"},{"tags":[],"owner":{"account_id":7774266,"reputation":186,"user_id":5882852,"display_name":"Thorne"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1675177928,"creation_date":1675173015,"answer_id":75298159,"question_id":75297952,"body_markdown":"Since you already have a DTO of `UserResponse`, you are on the right path towards a correct solution. My suggestion would be to avoid `@ManyToMany` on an entity level, and manage followers on a service level.\r\n\r\nThis means you will have to split relation ManyToMany join column into a separate entity, such as `UserFollowsEntity` with fields `userId` and `followsUserId`. Then remove `followers` and `following` lists from your User entity entirely.\r\n\r\nNow when creating `UserResponse` in a service, you will have to\r\n\r\n1. Select the actual user from repository – `userRepository.findById(userId)`\r\n2. Select followers – `userFollowsRepository.findByFollowsUserId(userId)`\r\n3. Select following – `userFollowsRepository.findByUserId(userId)`\r\n\r\nIt is a good practice to try and avoid bidirectional in entities relationships entirely if possible.\r\n\r\nEDIT: This will give you two lists: followers and following. You will probably want to know their user names, so what you can do is to merge followers and following lists into one, then extract all user ids from that list. Then query user repository with a list of those IDs, and just attach the required user information to your response model.\r\n\r\nYes it does sound like a bit more work compared to the seeming simplicity of utilizing JPA annotations, but this is the best way to avoid circular dependency as well as decouple the Follower functionality from your user entity.","title":"Mapping DTO with circular self dependency","body":"<p>Since you already have a DTO of <code>UserResponse</code>, you are on the right path towards a correct solution. My suggestion would be to avoid <code>@ManyToMany</code> on an entity level, and manage followers on a service level.</p>\n<p>This means you will have to split relation ManyToMany join column into a separate entity, such as <code>UserFollowsEntity</code> with fields <code>userId</code> and <code>followsUserId</code>. Then remove <code>followers</code> and <code>following</code> lists from your User entity entirely.</p>\n<p>Now when creating <code>UserResponse</code> in a service, you will have to</p>\n<ol>\n<li>Select the actual user from repository – <code>userRepository.findById(userId)</code></li>\n<li>Select followers – <code>userFollowsRepository.findByFollowsUserId(userId)</code></li>\n<li>Select following – <code>userFollowsRepository.findByUserId(userId)</code></li>\n</ol>\n<p>It is a good practice to try and avoid bidirectional in entities relationships entirely if possible.</p>\n<p>EDIT: This will give you two lists: followers and following. You will probably want to know their user names, so what you can do is to merge followers and following lists into one, then extract all user ids from that list. Then query user repository with a list of those IDs, and just attach the required user information to your response model.</p>\n<p>Yes it does sound like a bit more work compared to the seeming simplicity of utilizing JPA annotations, but this is the best way to avoid circular dependency as well as decouple the Follower functionality from your user entity.</p>\n"}],"owner":{"account_id":21382922,"reputation":89,"user_id":15748526,"display_name":"coman"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":63,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1675184770,"creation_date":1675171998,"question_id":75297952,"body_markdown":"I have a entity user with self dependency. When i Map this entity to DTO I have the problem of circular dependency. .\r\nUser.class:\r\n\r\n ```\r\npublic class User {\r\n\r\n    @Id\r\n    @GeneratedValue\r\n    private Long id;\r\n    @NotNull\r\n    @Column(name = &quot;first_name&quot;)\r\n    private String firstName;\r\n    @NotNull\r\n    @Column(name = &quot;last_name&quot;)\r\n    private String lastName;\r\n\r\n    @JsonBackReference\r\n    @ManyToMany(\r\n    private List&lt;User&gt; friedns_of = new ArrayList&lt;&gt;();\r\n\r\n\r\n    @ManyToMany(cascade = CascadeType.ALL,\r\n            mappedBy = &quot;followers&quot;)\r\n    private List&lt;User&gt; friends = new ArrayList&lt;&gt;();\r\n```\r\n\r\n\r\nUserMapper method in UserMapper:\r\n```\r\n\r\n\r\n    public static UserResponse toUser(User user) {\r\n        UserResponse userResponse = new UserResponse();\r\n        userResponse.setId(user.getId());\r\n        userResponse.setFollowers(user.getFollowers().stream().map(UserMapper::toUser).toList());\r\n        userResponse.setFollowing(user.getFollowing().stream().map(UserMapper::toUser).toList());\r\n        return userResponse;\r\n    }\r\n```\r\nWhen i run the method toUser() I get stackOverFlowError exception caused by the infinite circular dependency. Any advise how to solve this?\r\n\r\n\r\n","title":"Mapping DTO with circular self dependency","body":"<p>I have a entity user with self dependency. When i Map this entity to DTO I have the problem of circular dependency. .\nUser.class:</p>\n<pre><code>public class User {\n\n   @Id\n   @GeneratedValue\n   private Long id;\n   @NotNull\n   @Column(name = &quot;first_name&quot;)\n   private String firstName;\n   @NotNull\n   @Column(name = &quot;last_name&quot;)\n   private String lastName;\n\n   @JsonBackReference\n   @ManyToMany(\n   private List&lt;User&gt; friedns_of = new ArrayList&lt;&gt;();\n\n\n   @ManyToMany(cascade = CascadeType.ALL,\n           mappedBy = &quot;followers&quot;)\n   private List&lt;User&gt; friends = new ArrayList&lt;&gt;();\n</code></pre>\n<p>UserMapper method in UserMapper:</p>\n<pre><code>\n\n    public static UserResponse toUser(User user) {\n        UserResponse userResponse = new UserResponse();\n        userResponse.setId(user.getId());\n        userResponse.setFollowers(user.getFollowers().stream().map(UserMapper::toUser).toList());\n        userResponse.setFollowing(user.getFollowing().stream().map(UserMapper::toUser).toList());\n        return userResponse;\n    }\n</code></pre>\n<p>When i run the method toUser() I get stackOverFlowError exception caused by the infinite circular dependency. Any advise how to solve this?</p>\n"},{"tags":["java","json","algorithm","treeview"],"answers":[{"tags":[],"owner":{"account_id":22871786,"reputation":3,"user_id":17014713,"display_name":"JAlways"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1675169878,"creation_date":1675169878,"answer_id":75297522,"question_id":75297188,"body_markdown":"When I look at your JSON, what first comes to my mind would be:\r\n```\r\n    public class Employee {\r\n    private Integer empId;\r\n    private String empName;\r\n    private Integer empGroupId;\r\n    private List&lt;Employee&gt; children;\r\n    }\r\n```\r\n\r\nIf thats not it, maybe their is a way to generate an Object from your JSON with Jackson/ObjectMapper and find an idea their? But I don&#39;t know if Jackson can do this without a given class, but maybe it helps you while looking for a solution.","title":"Java JSON tree structure creation from existing data","body":"<p>When I look at your JSON, what first comes to my mind would be:</p>\n<pre><code>    public class Employee {\n    private Integer empId;\n    private String empName;\n    private Integer empGroupId;\n    private List&lt;Employee&gt; children;\n    }\n</code></pre>\n<p>If thats not it, maybe their is a way to generate an Object from your JSON with Jackson/ObjectMapper and find an idea their? But I don't know if Jackson can do this without a given class, but maybe it helps you while looking for a solution.</p>\n"},{"tags":[],"owner":{"account_id":13009011,"reputation":1105,"user_id":9402689,"display_name":"Raymond Choi"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1675184658,"creation_date":1675184658,"answer_id":75300592,"question_id":75297188,"body_markdown":"It is a matter of algorithm. Libraries or Java feature can&#39;t help you.\r\n\r\nFirst of all, `EmpTree.children` should be type of `List&lt;EmpTree&gt;`.\r\n\r\n    @Data\r\n    public class EmpTree {\r\n        private Integer empId;\r\n        private String empName;\r\n        private Integer empLevel;\r\n        private List&lt;EmpTree&gt; children;\r\n    }\r\n\r\nHere is a recursive function that build a `EmpTree`.\r\n\r\n    public EmpTree buildTree(List&lt;Employee&gt; employees, int empId, int empLevel) {\r\n        List&lt;Employee&gt; parent = employees.stream()\r\n            .filter(employee -&gt; empId == employee.getEmpId())\r\n            .collect(Collectors.toList());\r\n        List&lt;Integer&gt; groups = parent.stream()\r\n            .map(Employee::getEmpGroupId)\r\n            .collect(Collectors.toList());\r\n        List&lt;EmpTree&gt; childTree = employees.stream()\r\n            .filter(child -&gt; child.getEmpLevel() == empLevel + 1 &amp;&amp; groups.contains(child.getEmpGroupId()))\r\n            .map(Employee::getEmpId)\r\n            .distinct()\r\n            .map(childEmpId -&gt; buildTree(employees, childEmpId, empLevel + 1))\r\n            .collect(Collectors.toList());\r\n        return new EmpTree(empId, parent.get(0).getEmpName(), parent.get(0).getEmpLevel(), childTree.isEmpty() ? null : childTree);\r\n    }\r\n\r\nUse this statement to call the function.\r\n\r\n    EmpTree root = buildTree(employees, 1, 0);\r\n","title":"Java JSON tree structure creation from existing data","body":"<p>It is a matter of algorithm. Libraries or Java feature can't help you.</p>\n<p>First of all, <code>EmpTree.children</code> should be type of <code>List&lt;EmpTree&gt;</code>.</p>\n<pre><code>@Data\npublic class EmpTree {\n    private Integer empId;\n    private String empName;\n    private Integer empLevel;\n    private List&lt;EmpTree&gt; children;\n}\n</code></pre>\n<p>Here is a recursive function that build a <code>EmpTree</code>.</p>\n<pre><code>public EmpTree buildTree(List&lt;Employee&gt; employees, int empId, int empLevel) {\n    List&lt;Employee&gt; parent = employees.stream()\n        .filter(employee -&gt; empId == employee.getEmpId())\n        .collect(Collectors.toList());\n    List&lt;Integer&gt; groups = parent.stream()\n        .map(Employee::getEmpGroupId)\n        .collect(Collectors.toList());\n    List&lt;EmpTree&gt; childTree = employees.stream()\n        .filter(child -&gt; child.getEmpLevel() == empLevel + 1 &amp;&amp; groups.contains(child.getEmpGroupId()))\n        .map(Employee::getEmpId)\n        .distinct()\n        .map(childEmpId -&gt; buildTree(employees, childEmpId, empLevel + 1))\n        .collect(Collectors.toList());\n    return new EmpTree(empId, parent.get(0).getEmpName(), parent.get(0).getEmpLevel(), childTree.isEmpty() ? null : childTree);\n}\n</code></pre>\n<p>Use this statement to call the function.</p>\n<pre><code>EmpTree root = buildTree(employees, 1, 0);\n</code></pre>\n"}],"owner":{"account_id":7513807,"reputation":237,"user_id":5707925,"accept_rate":33,"display_name":"WebNoob"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":77,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75300592,"answer_count":2,"score":0,"last_activity_date":1675184658,"creation_date":1675168315,"question_id":75297188,"body_markdown":"Need your help with creating a JSON tree structure from available data. This is what is available with me right now,\r\n\r\n[![Data in DB][2]][2]\r\n\r\nThe same data in json format is as below,\r\n\r\n&lt;!-- begin snippet: js hide: false console: true babel: false --&gt;\r\n\r\n&lt;!-- language: lang-js --&gt;\r\n\r\n    {\r\n    &quot;employees&quot;: [\r\n      {\r\n        &quot;empId&quot;: 1,\r\n        &quot;empName&quot;: &quot;Alex&quot;,\r\n        &quot;empGroupId&quot;: 3,\r\n        &quot;empLevel&quot;: 0\r\n      },\r\n      {\r\n        &quot;empId&quot;: 42,\r\n        &quot;empName&quot;: &quot;Sam&quot;,\r\n        &quot;empGroupId&quot;: 3,\r\n        &quot;empLevel&quot;: 1\r\n      },\r\n      {\r\n        &quot;empId&quot;: 22,\r\n        &quot;empName&quot;: &quot;Max&quot;,\r\n        &quot;empGroupId&quot;: 3,\r\n        &quot;empLevel&quot;: 2\r\n      },\r\n      {\r\n        &quot;empId&quot;: 54,\r\n        &quot;empName&quot;: &quot;Ervin&quot;,\r\n        &quot;empGroupId&quot;: 3,\r\n        &quot;empLevel&quot;: 3\r\n      },\r\n      {\r\n        &quot;empId&quot;: 1,\r\n        &quot;empName&quot;: &quot;Alex&quot;,\r\n        &quot;empGroupId&quot;: 5,\r\n        &quot;empLevel&quot;: 0\r\n      },\r\n      {\r\n        &quot;empId&quot;: 42,\r\n        &quot;empName&quot;: &quot;Sam&quot;,\r\n        &quot;empGroupId&quot;: 5,\r\n        &quot;empLevel&quot;: 1\r\n      },\r\n      {\r\n        &quot;empId&quot;: 22,\r\n        &quot;empName&quot;: &quot;Max&quot;,\r\n        &quot;empGroupId&quot;: 5,\r\n        &quot;empLevel&quot;: 2\r\n      },\r\n      {\r\n        &quot;empId&quot;: 68,\r\n        &quot;empName&quot;: &quot;Jack&quot;,\r\n        &quot;empGroupId&quot;: 5,\r\n        &quot;empLevel&quot;: 3\r\n      },\r\n      {\r\n        &quot;empId&quot;: 1,\r\n        &quot;empName&quot;: &quot;Alex&quot;,\r\n        &quot;empGroupId&quot;: 7,\r\n        &quot;empLevel&quot;: 0\r\n      },\r\n      {\r\n        &quot;empId&quot;: 38,\r\n        &quot;empName&quot;: &quot;Mark&quot;,\r\n        &quot;empGroupId&quot;: 7,\r\n        &quot;empLevel&quot;: 7\r\n      },\r\n      {\r\n        &quot;empId&quot;: 12,\r\n        &quot;empName&quot;: &quot;Danny&quot;,\r\n        &quot;empGroupId&quot;: 7,\r\n        &quot;empLevel&quot;: 2\r\n      },\r\n      {\r\n        &quot;empId&quot;: 1,\r\n        &quot;empName&quot;: &quot;Alex&quot;,\r\n        &quot;empGroupId&quot;: 4,\r\n        &quot;empLevel&quot;: 0\r\n      },\r\n      {\r\n        &quot;empId&quot;: 38,\r\n        &quot;empName&quot;: &quot;Mark&quot;,\r\n        &quot;empGroupId&quot;: 4,\r\n        &quot;empLevel&quot;: 1\r\n      },\r\n      {\r\n        &quot;empId&quot;: 55,\r\n        &quot;empName&quot;: &quot;Kate&quot;,\r\n        &quot;empGroupId&quot;: 4,\r\n        &quot;empLevel&quot;: 2\r\n      }\r\n    ]\r\n    }\r\n\r\n\r\n&lt;!-- end snippet --&gt;\r\n\r\nI want to create a JSON tree structure which will map all the employees in hierarchical manner. Such that all the common employees will appear only once and according to their levels.\r\n\r\nSo basically, empName will have a unique empId associated with it. Multiple employees can be part of employee group [indicated by empGroupId]. The empLevel indicates level of employee, 0 being top person, then 1, and so on...\r\n\r\nFor e.g, if we consider first 8 rows in table above, it contains 2 empGroupIds, 3 &amp; 5. Alex, Sam and Max are the employees common in both groups with levels 0,1,2 respectively. Ervin and Jack are the last level at 3. And since their top 3 members are same, the final structure will have: Alex -&gt; Sam -&gt; Max -&gt; [Ervin, Jack]\r\n\r\nSo below is what I want to generate,\r\n\r\n&lt;!-- begin snippet: js hide: false console: true babel: false --&gt;\r\n\r\n&lt;!-- language: lang-js --&gt;\r\n\r\n    [{\r\n      &quot;empName&quot;:&quot;Alex&quot;,\r\n      &quot;empId&quot; : 1,\r\n      &quot;empLevel&quot; : 0,\r\n      &quot;children&quot; :[{\r\n        &quot;empName&quot;:&quot;Sam&quot;,\r\n        &quot;empId&quot; : 42,\r\n        &quot;empLevel&quot; : 1,\r\n        &quot;children&quot; : [{\r\n            &quot;empName&quot;:&quot;Max&quot;,\r\n            &quot;empId&quot; : 22,\r\n            &quot;empLevel&quot; : 2,\r\n            &quot;children&quot;: [{\r\n                &quot;empName&quot;:&quot;Ervin&quot;,\r\n                &quot;empId&quot; : 54,\r\n                &quot;empLevel&quot; : 3            \r\n                },{\r\n                &quot;empName&quot;:&quot;Jack&quot;,\r\n                &quot;empId&quot; : 68,\r\n                &quot;empLevel&quot; : 3 \r\n            }]\r\n        }]\r\n      },\r\n      {\r\n        &quot;empName&quot;:&quot;Mark&quot;,\r\n        &quot;empId&quot; : 38,\r\n        &quot;empLevel&quot; : 1,\r\n        &quot;children&quot;:[{\r\n            &quot;empName&quot;:&quot;Danny&quot;,\r\n            &quot;empId&quot; : 12,\r\n            &quot;empLevel&quot; : 2\r\n            },{\r\n            &quot;empName&quot;:&quot;Kate&quot;,\r\n            &quot;empId&quot; : 55,\r\n            &quot;empLevel&quot; : 2      \r\n        }]\r\n      }]\r\n    }]\r\n\r\n&lt;!-- end snippet --&gt;\r\n\r\nSo far I have created a sample program to read the JSON file and mapped the employees. However not sure how to approach the design for this tree structure. This is what I have right now,\r\n\r\n    @Data\r\n    public class Employee {\r\n        private Integer empId;\r\n        private String empName;\r\n        private Integer empGroupId;\r\n        private Integer empLevel;\r\n    }\r\n    \r\n    @Data\r\n    public class EmpLevels {\r\n        private List&lt;Employee&gt; employees;\r\n    }\r\n    \r\n    @Data\r\n    public class EmpTree {\r\n        private Integer empId;\r\n        private String empName;\r\n        private Integer empLevel;\r\n        private List&lt;Employee&gt; children;\r\n    }\r\n\r\nMy main method contains below stuff so far, regarding reading JSON and mapping employees,\r\n\r\n    EmpLevels empLevels = mapper.readValue(Paths.get(&quot;emp.json&quot;).toFile(), EmpLevels.class);\r\n    List&lt;Employee&gt; employees = empLevels.getEmployees();\r\n    System.out.println(&quot;Employees : &quot;+employees);\r\n\r\nHow to go ahead with building the logic to generate the JSON tree structure? Do we have any libraries that can help here? Or any latest Java release feature that can help generate this one?\r\n\r\n  [2]: https://i.stack.imgur.com/ifL3x.png","title":"Java JSON tree structure creation from existing data","body":"<p>Need your help with creating a JSON tree structure from available data. This is what is available with me right now,</p>\n<p><a href=\"https://i.stack.imgur.com/ifL3x.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ifL3x.png\" alt=\"Data in DB\" /></a></p>\n<p>The same data in json format is as below,</p>\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>{\n\"employees\": [\n  {\n    \"empId\": 1,\n    \"empName\": \"Alex\",\n    \"empGroupId\": 3,\n    \"empLevel\": 0\n  },\n  {\n    \"empId\": 42,\n    \"empName\": \"Sam\",\n    \"empGroupId\": 3,\n    \"empLevel\": 1\n  },\n  {\n    \"empId\": 22,\n    \"empName\": \"Max\",\n    \"empGroupId\": 3,\n    \"empLevel\": 2\n  },\n  {\n    \"empId\": 54,\n    \"empName\": \"Ervin\",\n    \"empGroupId\": 3,\n    \"empLevel\": 3\n  },\n  {\n    \"empId\": 1,\n    \"empName\": \"Alex\",\n    \"empGroupId\": 5,\n    \"empLevel\": 0\n  },\n  {\n    \"empId\": 42,\n    \"empName\": \"Sam\",\n    \"empGroupId\": 5,\n    \"empLevel\": 1\n  },\n  {\n    \"empId\": 22,\n    \"empName\": \"Max\",\n    \"empGroupId\": 5,\n    \"empLevel\": 2\n  },\n  {\n    \"empId\": 68,\n    \"empName\": \"Jack\",\n    \"empGroupId\": 5,\n    \"empLevel\": 3\n  },\n  {\n    \"empId\": 1,\n    \"empName\": \"Alex\",\n    \"empGroupId\": 7,\n    \"empLevel\": 0\n  },\n  {\n    \"empId\": 38,\n    \"empName\": \"Mark\",\n    \"empGroupId\": 7,\n    \"empLevel\": 7\n  },\n  {\n    \"empId\": 12,\n    \"empName\": \"Danny\",\n    \"empGroupId\": 7,\n    \"empLevel\": 2\n  },\n  {\n    \"empId\": 1,\n    \"empName\": \"Alex\",\n    \"empGroupId\": 4,\n    \"empLevel\": 0\n  },\n  {\n    \"empId\": 38,\n    \"empName\": \"Mark\",\n    \"empGroupId\": 4,\n    \"empLevel\": 1\n  },\n  {\n    \"empId\": 55,\n    \"empName\": \"Kate\",\n    \"empGroupId\": 4,\n    \"empLevel\": 2\n  }\n]\n}</code></pre>\r\n</div>\r\n</div>\r\n</p>\n<p>I want to create a JSON tree structure which will map all the employees in hierarchical manner. Such that all the common employees will appear only once and according to their levels.</p>\n<p>So basically, empName will have a unique empId associated with it. Multiple employees can be part of employee group [indicated by empGroupId]. The empLevel indicates level of employee, 0 being top person, then 1, and so on...</p>\n<p>For e.g, if we consider first 8 rows in table above, it contains 2 empGroupIds, 3 &amp; 5. Alex, Sam and Max are the employees common in both groups with levels 0,1,2 respectively. Ervin and Jack are the last level at 3. And since their top 3 members are same, the final structure will have: Alex -&gt; Sam -&gt; Max -&gt; [Ervin, Jack]</p>\n<p>So below is what I want to generate,</p>\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>[{\n  \"empName\":\"Alex\",\n  \"empId\" : 1,\n  \"empLevel\" : 0,\n  \"children\" :[{\n    \"empName\":\"Sam\",\n    \"empId\" : 42,\n    \"empLevel\" : 1,\n    \"children\" : [{\n        \"empName\":\"Max\",\n        \"empId\" : 22,\n        \"empLevel\" : 2,\n        \"children\": [{\n            \"empName\":\"Ervin\",\n            \"empId\" : 54,\n            \"empLevel\" : 3            \n            },{\n            \"empName\":\"Jack\",\n            \"empId\" : 68,\n            \"empLevel\" : 3 \n        }]\n    }]\n  },\n  {\n    \"empName\":\"Mark\",\n    \"empId\" : 38,\n    \"empLevel\" : 1,\n    \"children\":[{\n        \"empName\":\"Danny\",\n        \"empId\" : 12,\n        \"empLevel\" : 2\n        },{\n        \"empName\":\"Kate\",\n        \"empId\" : 55,\n        \"empLevel\" : 2      \n    }]\n  }]\n}]</code></pre>\r\n</div>\r\n</div>\r\n</p>\n<p>So far I have created a sample program to read the JSON file and mapped the employees. However not sure how to approach the design for this tree structure. This is what I have right now,</p>\n<pre><code>@Data\npublic class Employee {\n    private Integer empId;\n    private String empName;\n    private Integer empGroupId;\n    private Integer empLevel;\n}\n\n@Data\npublic class EmpLevels {\n    private List&lt;Employee&gt; employees;\n}\n\n@Data\npublic class EmpTree {\n    private Integer empId;\n    private String empName;\n    private Integer empLevel;\n    private List&lt;Employee&gt; children;\n}\n</code></pre>\n<p>My main method contains below stuff so far, regarding reading JSON and mapping employees,</p>\n<pre><code>EmpLevels empLevels = mapper.readValue(Paths.get(&quot;emp.json&quot;).toFile(), EmpLevels.class);\nList&lt;Employee&gt; employees = empLevels.getEmployees();\nSystem.out.println(&quot;Employees : &quot;+employees);\n</code></pre>\n<p>How to go ahead with building the logic to generate the JSON tree structure? Do we have any libraries that can help here? Or any latest Java release feature that can help generate this one?</p>\n"},{"tags":["java","json","spring"],"comments":[{"owner":{"account_id":14182472,"reputation":198,"user_id":10245558,"display_name":"Roland"},"score":0,"creation_date":1675243538,"post_id":75298861,"comment_id":132884576,"body_markdown":"can you provide the REST endpoint that is receiving this JSON payload","body":"can you provide the REST endpoint that is receiving this JSON payload"}],"answers":[{"tags":[],"owner":{"account_id":13068865,"reputation":357,"user_id":9443176,"display_name":"Max Aminov"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1675183483,"creation_date":1675183483,"answer_id":75300365,"question_id":75298861,"body_markdown":"You do not need a Data class because **data** field in your json is not an object - it is an array of objects, in your case it is an array of **Coin** objects.\r\n\r\nChange it the next way: \r\n\r\n```\r\npublic class MainDTO{\r\n    @JsonProperty(&quot;status&quot;)\r\n    private Status status;\r\n    @JsonProperty(&quot;data&quot;)\r\n    private List&lt;Coin&gt; data;\r\n}\r\n```","title":"How to map JSON array to Java class in Spring Boot","body":"<p>You do not need a Data class because <strong>data</strong> field in your json is not an object - it is an array of objects, in your case it is an array of <strong>Coin</strong> objects.</p>\n<p>Change it the next way:</p>\n<pre><code>public class MainDTO{\n    @JsonProperty(&quot;status&quot;)\n    private Status status;\n    @JsonProperty(&quot;data&quot;)\n    private List&lt;Coin&gt; data;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":14429973,"reputation":2483,"user_id":10423604,"display_name":"Volodya Lombrozo"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1675184433,"creation_date":1675184433,"answer_id":75300556,"question_id":75298861,"body_markdown":"It&#39;s worth mentioning that the JSON in your example is incorrect due to extra commas. I presume the correct form should look like this:\r\n```json\r\n{\r\n    &quot;status&quot;: {\r\n        &quot;timestamp&quot;: &quot;2023-01-31T14:06:45.210Z&quot;,\r\n        &quot;error_code&quot;: 0,\r\n        &quot;error_message&quot;: null\r\n    },\r\n    &quot;data&quot;: [\r\n        {\r\n            &quot;id&quot;: 7982,\r\n            &quot;name&quot;: &quot;wc4qtz6py1i&quot;,\r\n            &quot;tags&quot;: [\r\n                &quot;40rcevshzab&quot;,\r\n                &quot;3ja25pufu0z&quot;\r\n            ],\r\n            &quot;quote&quot;: {\r\n                &quot;USD&quot;: {\r\n                    &quot;price&quot;: 0.2\r\n                },\r\n                &quot;BTC&quot;: {\r\n                    &quot;price&quot;: 7159\r\n                }\r\n            }\r\n        },\r\n        {\r\n            &quot;id&quot;: 8742,\r\n            &quot;name&quot;: &quot;uhso98ca&quot;,\r\n            &quot;tags&quot;: [\r\n                &quot;84jsjsaesxx&quot;,\r\n                &quot;sasdd5dda76&quot;\r\n            ],\r\n            &quot;quote&quot;: {\r\n                &quot;USD&quot;: {\r\n                    &quot;price&quot;: 6\r\n                },\r\n                &quot;BTC&quot;: {\r\n                    &quot;price&quot;: 1230\r\n                }\r\n            }\r\n        }\r\n     ]\r\n }\r\n```\r\n\r\nAs for classes I would suggest you the next:\r\n\r\n```java\r\n@AllArgsConstructor\r\n@NoArgsConstructor\r\n@Getter\r\n@Setter\r\npublic class MainDTO {\r\n    @JsonProperty(&quot;status&quot;)\r\n    private Status status;\r\n    @JsonProperty(&quot;data&quot;)\r\n    private List&lt;Coin&gt; coins;\r\n}\r\n\r\n@AllArgsConstructor\r\n@NoArgsConstructor\r\n@Getter\r\n@Setter\r\npublic class Status {\r\n    @JsonProperty(&quot;timestamp&quot;)\r\n    private String timestamp;\r\n    @JsonProperty(&quot;error_code&quot;)\r\n    private Integer errorCode;\r\n    @JsonProperty(&quot;error_message&quot;)\r\n    private String errorMessage;\r\n}\r\n\r\n@AllArgsConstructor\r\n@NoArgsConstructor\r\n@Getter\r\n@Setter\r\npublic class Coin {\r\n    @JsonProperty(&quot;id&quot;)\r\n    private Integer id;\r\n    @JsonProperty(&quot;name&quot;)\r\n    private String name;\r\n    @JsonProperty(&quot;tags&quot;)\r\n    private List&lt;String&gt; tags;\r\n    @JsonProperty(&quot;quote&quot;)\r\n    private Map&lt;String, Quote&gt; quote;\r\n}\r\n\r\n@AllArgsConstructor\r\n@NoArgsConstructor\r\n@Getter\r\n@Setter\r\npublic class Quote {\r\n    @JsonProperty(&quot;price&quot;)\r\n    private Double price;\r\n}\r\n```\r\n\r\nThe &quot;data&quot; array in the `JSON` response is an array of coins, so the coins property in the `MainDTO` class should be of type `List&lt;Coin&gt;`.","title":"How to map JSON array to Java class in Spring Boot","body":"<p>It's worth mentioning that the JSON in your example is incorrect due to extra commas. I presume the correct form should look like this:</p>\n<pre class=\"lang-json prettyprint-override\"><code>{\n    &quot;status&quot;: {\n        &quot;timestamp&quot;: &quot;2023-01-31T14:06:45.210Z&quot;,\n        &quot;error_code&quot;: 0,\n        &quot;error_message&quot;: null\n    },\n    &quot;data&quot;: [\n        {\n            &quot;id&quot;: 7982,\n            &quot;name&quot;: &quot;wc4qtz6py1i&quot;,\n            &quot;tags&quot;: [\n                &quot;40rcevshzab&quot;,\n                &quot;3ja25pufu0z&quot;\n            ],\n            &quot;quote&quot;: {\n                &quot;USD&quot;: {\n                    &quot;price&quot;: 0.2\n                },\n                &quot;BTC&quot;: {\n                    &quot;price&quot;: 7159\n                }\n            }\n        },\n        {\n            &quot;id&quot;: 8742,\n            &quot;name&quot;: &quot;uhso98ca&quot;,\n            &quot;tags&quot;: [\n                &quot;84jsjsaesxx&quot;,\n                &quot;sasdd5dda76&quot;\n            ],\n            &quot;quote&quot;: {\n                &quot;USD&quot;: {\n                    &quot;price&quot;: 6\n                },\n                &quot;BTC&quot;: {\n                    &quot;price&quot;: 1230\n                }\n            }\n        }\n     ]\n }\n</code></pre>\n<p>As for classes I would suggest you the next:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@AllArgsConstructor\n@NoArgsConstructor\n@Getter\n@Setter\npublic class MainDTO {\n    @JsonProperty(&quot;status&quot;)\n    private Status status;\n    @JsonProperty(&quot;data&quot;)\n    private List&lt;Coin&gt; coins;\n}\n\n@AllArgsConstructor\n@NoArgsConstructor\n@Getter\n@Setter\npublic class Status {\n    @JsonProperty(&quot;timestamp&quot;)\n    private String timestamp;\n    @JsonProperty(&quot;error_code&quot;)\n    private Integer errorCode;\n    @JsonProperty(&quot;error_message&quot;)\n    private String errorMessage;\n}\n\n@AllArgsConstructor\n@NoArgsConstructor\n@Getter\n@Setter\npublic class Coin {\n    @JsonProperty(&quot;id&quot;)\n    private Integer id;\n    @JsonProperty(&quot;name&quot;)\n    private String name;\n    @JsonProperty(&quot;tags&quot;)\n    private List&lt;String&gt; tags;\n    @JsonProperty(&quot;quote&quot;)\n    private Map&lt;String, Quote&gt; quote;\n}\n\n@AllArgsConstructor\n@NoArgsConstructor\n@Getter\n@Setter\npublic class Quote {\n    @JsonProperty(&quot;price&quot;)\n    private Double price;\n}\n</code></pre>\n<p>The &quot;data&quot; array in the <code>JSON</code> response is an array of coins, so the coins property in the <code>MainDTO</code> class should be of type <code>List&lt;Coin&gt;</code>.</p>\n"}],"owner":{"account_id":9614104,"reputation":47,"user_id":10960565,"display_name":"Даниил "},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":76,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":75300365,"answer_count":2,"score":3,"last_activity_date":1675184433,"creation_date":1675176344,"question_id":75298861,"body_markdown":"I&#39;m trying to get responce from another API  convert it to Java clases and then sent to the front end using Spring Boot\r\nI have JSON response from external API like this\r\n```\r\n{\r\n    &quot;status&quot;: {\r\n        &quot;timestamp&quot;: &quot;2023-01-31T14:06:45.210Z&quot;,\r\n        &quot;error_code&quot;: 0,\r\n        &quot;error_message&quot;: null,\r\n    },\r\n    &quot;data&quot;: [\r\n        {\r\n            &quot;id&quot;: 7982,\r\n            &quot;name&quot;: &quot;wc4qtz6py1i&quot;,\r\n            &quot;tags&quot;: [\r\n                &quot;40rcevshzab&quot;,\r\n                &quot;3ja25pufu0z&quot;\r\n            ],\r\n            &quot;quote&quot;: {\r\n                &quot;USD&quot;: {\r\n                    &quot;price&quot;: 0.2,\r\n                },\r\n                &quot;BTC&quot;: {\r\n                    &quot;price&quot;: 7159,\r\n                }\r\n            }\r\n        },\r\n        {\r\n            &quot;id&quot;: 8742,\r\n            &quot;name&quot;: &quot;uhso98ca&quot;,\r\n            &quot;tags&quot;: [\r\n                &quot;84jsjsaesxx&quot;,\r\n                &quot;sasdd5dda76&quot;\r\n            ],\r\n            &quot;quote&quot;: {\r\n                &quot;USD&quot;: {\r\n                    &quot;price&quot;: 6,\r\n                },\r\n                &quot;BTC&quot;: {\r\n                    &quot;price&quot;: 1230,\r\n                }\r\n            }\r\n        }\r\n     ]\r\n }\r\n```\r\nI need to convert all of this to classes using Spring Boot. But how I should organize it?\r\nThe most question is about &quot;Data&quot; array.\r\nFor now I have something like this.\r\n\r\n\r\n```\r\n@AllArgsConstructor\r\n@NoArgsConstructor\r\n@Getter\r\n@Setter\r\npublic class MainDTO{\r\n    @JsonProperty(&quot;status&quot;)\r\n    private Status status;\r\n    @JsonProperty(&quot;data&quot;)\r\n    private Data data;\r\n}\r\n```\r\n```\r\n@AllArgsConstructor\r\n@NoArgsConstructor\r\n@Getter\r\n@Setter\r\npublic class Data {\r\n    Coin[] coins;\r\n}\r\n```\r\n```\r\n@AllArgsConstructor\r\n@NoArgsConstructor\r\n@Getter\r\n@Setter\r\npublic class Coin{\r\n    @JsonProperty(&quot;id&quot;)\r\n    private Integer id;\r\n    @JsonProperty(&quot;name&quot;)\r\n    private String name;\r\n    private Map&lt;String, Coin&gt; quote;\r\n}\r\n```\r\nBut it doesn&#39;t work. I have error:\r\n```\r\nI have error\r\nTue Jan 31 16:13:45 EET 2023\r\nThere was an unexpected error (type=Internal Server Error, status=500).\r\nError while extracting response for type [class com.example.myCoolApp.entity.MainDTO] and content type [application/json;charset=utf-8]\r\norg.springframework.web.client.RestClientException: Error while extracting response for type [class com.example.myCoolApp.entity.CryptoDTO] and content type [application/json;charset=utf-8]\r\n```\r\n","title":"How to map JSON array to Java class in Spring Boot","body":"<p>I'm trying to get responce from another API  convert it to Java clases and then sent to the front end using Spring Boot\nI have JSON response from external API like this</p>\n<pre><code>{\n    &quot;status&quot;: {\n        &quot;timestamp&quot;: &quot;2023-01-31T14:06:45.210Z&quot;,\n        &quot;error_code&quot;: 0,\n        &quot;error_message&quot;: null,\n    },\n    &quot;data&quot;: [\n        {\n            &quot;id&quot;: 7982,\n            &quot;name&quot;: &quot;wc4qtz6py1i&quot;,\n            &quot;tags&quot;: [\n                &quot;40rcevshzab&quot;,\n                &quot;3ja25pufu0z&quot;\n            ],\n            &quot;quote&quot;: {\n                &quot;USD&quot;: {\n                    &quot;price&quot;: 0.2,\n                },\n                &quot;BTC&quot;: {\n                    &quot;price&quot;: 7159,\n                }\n            }\n        },\n        {\n            &quot;id&quot;: 8742,\n            &quot;name&quot;: &quot;uhso98ca&quot;,\n            &quot;tags&quot;: [\n                &quot;84jsjsaesxx&quot;,\n                &quot;sasdd5dda76&quot;\n            ],\n            &quot;quote&quot;: {\n                &quot;USD&quot;: {\n                    &quot;price&quot;: 6,\n                },\n                &quot;BTC&quot;: {\n                    &quot;price&quot;: 1230,\n                }\n            }\n        }\n     ]\n }\n</code></pre>\n<p>I need to convert all of this to classes using Spring Boot. But how I should organize it?\nThe most question is about &quot;Data&quot; array.\nFor now I have something like this.</p>\n<pre><code>@AllArgsConstructor\n@NoArgsConstructor\n@Getter\n@Setter\npublic class MainDTO{\n    @JsonProperty(&quot;status&quot;)\n    private Status status;\n    @JsonProperty(&quot;data&quot;)\n    private Data data;\n}\n</code></pre>\n<pre><code>@AllArgsConstructor\n@NoArgsConstructor\n@Getter\n@Setter\npublic class Data {\n    Coin[] coins;\n}\n</code></pre>\n<pre><code>@AllArgsConstructor\n@NoArgsConstructor\n@Getter\n@Setter\npublic class Coin{\n    @JsonProperty(&quot;id&quot;)\n    private Integer id;\n    @JsonProperty(&quot;name&quot;)\n    private String name;\n    private Map&lt;String, Coin&gt; quote;\n}\n</code></pre>\n<p>But it doesn't work. I have error:</p>\n<pre><code>I have error\nTue Jan 31 16:13:45 EET 2023\nThere was an unexpected error (type=Internal Server Error, status=500).\nError while extracting response for type [class com.example.myCoolApp.entity.MainDTO] and content type [application/json;charset=utf-8]\norg.springframework.web.client.RestClientException: Error while extracting response for type [class com.example.myCoolApp.entity.CryptoDTO] and content type [application/json;charset=utf-8]\n</code></pre>\n"}],"has_more":true,"quota_max":10000,"quota_remaining":9307,"page":685,"page_size":100}
