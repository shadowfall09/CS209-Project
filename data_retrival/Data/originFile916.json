{"items":[{"tags":["java","multithreading","future","executorservice","java-threads"],"comments":[{"owner":{"account_id":173621,"reputation":10596,"user_id":402428,"display_name":"michid"},"score":4,"creation_date":1666246769,"post_id":74135025,"comment_id":130891301,"body_markdown":"There&#39;s no (sane) way for stopping a thread in Java without relying on cooperative mechanisms (i.e. flags, exceptions, ...). See also https://stackoverflow.com/a/671052/402428","body":"There&#39;s no (sane) way for stopping a thread in Java without relying on cooperative mechanisms (i.e. flags, exceptions, ...). See also <a href=\"https://stackoverflow.com/a/671052/402428\">stackoverflow.com/a/671052/402428</a>"},{"owner":{"account_id":415134,"reputation":12351,"user_id":789750,"accept_rate":87,"display_name":"Dan"},"score":0,"creation_date":1666307861,"post_id":74135025,"comment_id":130912445,"body_markdown":"@michid: I know, but I was hoping that there was a cooperative mechanism from *within* the thread that worked. That or something like &quot;create process, get PID and SIGKILL&quot; but with java interfaces instead of OS-specific ones.","body":"@michid: I know, but I was hoping that there was a cooperative mechanism from <i>within</i> the thread that worked. That or something like &quot;create process, get PID and SIGKILL&quot; but with java interfaces instead of OS-specific ones."},{"owner":{"account_id":2360785,"reputation":11123,"user_id":2067492,"display_name":"matt"},"score":0,"creation_date":1667341480,"post_id":74135025,"comment_id":131143944,"body_markdown":"Are you saying, `.doStuff` throws and logs an exception? If that&#39;s the case, there isn&#39;t anything you can do.","body":"Are you saying, <code>.doStuff</code> throws and logs an exception? If that&#39;s the case, there isn&#39;t anything you can do."}],"answers":[{"tags":[],"owner":{"account_id":26789322,"reputation":71,"user_id":20382988,"display_name":"Ahmet M"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1667340156,"creation_date":1667340156,"answer_id":74282282,"question_id":74135025,"body_markdown":"1. You can choose to run the task user wants to cancel by wrapping the future into another object which implements cancel() request and do not delegate the user given cancel request to the underlying future instance. In this case, the task will run as normal. (Trick user that the task cancelled but run in background and do not care the result of the task -- If the task has side-effect, this might not be desirable) -- will use computing resources.\r\n\r\n2. If you want the task to be responsive to interruption, then you should use the regular way of cancelling a task, namely notify the task that it should no longer continue by future.cancel() and the task you are notifying should be coded in a way that detects interruptions and clears any state required and return. (return something like an empty result, a special result etc.)\r\n\r\nNOTE: future.cancel() sets a specific boolean field in Thread class. Some blocking library functions throws InterruptedException in the entry before doing something. For instance, Thread.sleep function might look to see if the boolean flag is set and throw InterruptedException without waiting, or it might wait and somehow detect the cancellation request before waiting to the end and throw InterruptedException. Or it might not detect at all. In this case, you should check regulary through out the task that if the task cancelled. [ using Thread.currentThread().isInterrupted()]  \r\n","title":"How can I gracefully end execution in a java executor without returning or using an exception?","body":"<ol>\n<li><p>You can choose to run the task user wants to cancel by wrapping the future into another object which implements cancel() request and do not delegate the user given cancel request to the underlying future instance. In this case, the task will run as normal. (Trick user that the task cancelled but run in background and do not care the result of the task -- If the task has side-effect, this might not be desirable) -- will use computing resources.</p>\n</li>\n<li><p>If you want the task to be responsive to interruption, then you should use the regular way of cancelling a task, namely notify the task that it should no longer continue by future.cancel() and the task you are notifying should be coded in a way that detects interruptions and clears any state required and return. (return something like an empty result, a special result etc.)</p>\n</li>\n</ol>\n<p>NOTE: future.cancel() sets a specific boolean field in Thread class. Some blocking library functions throws InterruptedException in the entry before doing something. For instance, Thread.sleep function might look to see if the boolean flag is set and throw InterruptedException without waiting, or it might wait and somehow detect the cancellation request before waiting to the end and throw InterruptedException. Or it might not detect at all. In this case, you should check regulary through out the task that if the task cancelled. [ using Thread.currentThread().isInterrupted()]</p>\n"}],"owner":{"account_id":415134,"reputation":12351,"user_id":789750,"accept_rate":87,"display_name":"Dan"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":92,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"answer_count":1,"score":4,"last_activity_date":1667340156,"creation_date":1666245302,"question_id":74135025,"body_markdown":"I have codebase that calls a black box, that in turn calls other code I have control of, call it `thing.innerMethod()`. The code in the black box needs to execute in a different thread than the code that calls it, so I have decided to use an executor:\r\n\r\n    Future&lt;String&gt; bbFuture = executorService.submit(() -&gt; {\r\n      return blackBox.doStuff(thing);});\r\n\r\nIf the execution takes too long, the user might call another endpoint that ultimately calls `bbFuture.cancel()`, triggering a `CancellationException` in the thread with the future and an `InterruptedException` in the thread running inside the executor.\r\n\r\nThe problem is that when the `InterruptedException` propagates into the black box, it catches it and logs it a stack trace, and raises false alarms. I don&#39;t need to catch *every* `InterruptedException`, but I know a place I could put a `catch` that would get probably 90% of them. The problem is I don&#39;t really have a good way to stop execution without returning from the function, and any partial or dummy result would probably trigger another exception. I know I could use `Thread.currentThread().stop()`, but `stop()` is deprecated.\r\n\r\n**How can I stop execution inside a java executor without returning or throwing an exception?**\r\n\r\n","title":"How can I gracefully end execution in a java executor without returning or using an exception?","body":"<p>I have codebase that calls a black box, that in turn calls other code I have control of, call it <code>thing.innerMethod()</code>. The code in the black box needs to execute in a different thread than the code that calls it, so I have decided to use an executor:</p>\n<pre><code>Future&lt;String&gt; bbFuture = executorService.submit(() -&gt; {\n  return blackBox.doStuff(thing);});\n</code></pre>\n<p>If the execution takes too long, the user might call another endpoint that ultimately calls <code>bbFuture.cancel()</code>, triggering a <code>CancellationException</code> in the thread with the future and an <code>InterruptedException</code> in the thread running inside the executor.</p>\n<p>The problem is that when the <code>InterruptedException</code> propagates into the black box, it catches it and logs it a stack trace, and raises false alarms. I don't need to catch <em>every</em> <code>InterruptedException</code>, but I know a place I could put a <code>catch</code> that would get probably 90% of them. The problem is I don't really have a good way to stop execution without returning from the function, and any partial or dummy result would probably trigger another exception. I know I could use <code>Thread.currentThread().stop()</code>, but <code>stop()</code> is deprecated.</p>\n<p><strong>How can I stop execution inside a java executor without returning or throwing an exception?</strong></p>\n"},{"tags":["java","unicode","codepoint","surrogate-pairs","supplementary"],"comments":[{"owner":{"account_id":183279,"reputation":168313,"user_id":418556,"accept_rate":98,"display_name":"Andrew Thompson"},"score":0,"creation_date":1372410925,"post_id":17361210,"comment_id":25194399,"body_markdown":"There is no need to add the major tag in the title.","body":"There is no need to add the major tag in the title."},{"owner":{"account_id":1089467,"reputation":196749,"user_id":1084437,"display_name":"Jukka K. Korpela"},"score":3,"creation_date":1372412037,"post_id":17361210,"comment_id":25195010,"body_markdown":"possible duplicate of [Java reading in character streams with supplementary unicode characters](http://stackoverflow.com/questions/7721293/java-reading-in-character-streams-with-supplementary-unicode-characters)","body":"possible duplicate of <a href=\"http://stackoverflow.com/questions/7721293/java-reading-in-character-streams-with-supplementary-unicode-characters\">Java reading in character streams with supplementary unicode characters</a>"},{"owner":{"account_id":173557,"reputation":22258,"user_id":402322,"accept_rate":67,"display_name":"ceving"},"score":2,"creation_date":1372413555,"post_id":17361210,"comment_id":25195813,"body_markdown":"The possible duplicate does not contain an answer.","body":"The possible duplicate does not contain an answer."},{"owner":{"account_id":265649,"reputation":53086,"user_id":552759,"display_name":"jtahlborn"},"score":1,"creation_date":1372457856,"post_id":17361210,"comment_id":25219207,"body_markdown":"both of your answers are &quot;correct&quot; (although the first doesn&#39;t handle end of stream).  nothing about your casts is unsafe.","body":"both of your answers are &quot;correct&quot; (although the first doesn&#39;t handle end of stream).  nothing about your casts is unsafe."},{"owner":{"account_id":4198672,"reputation":28840,"user_id":3439404,"display_name":"JosefZ"},"score":0,"creation_date":1667422061,"post_id":17361210,"comment_id":131166371,"body_markdown":"Read [*The WTF-8 encoding*](https://simonsapin.github.io/wtf-8/) decode from potentially ill-formed `UTF-16` to code points and vice versa…","body":"Read <a href=\"https://simonsapin.github.io/wtf-8/\" rel=\"nofollow noreferrer\"><i>The WTF-8 encoding</i></a> decode from potentially ill-formed <code>UTF-16</code> to code points and vice versa…"}],"answers":[{"tags":[],"owner":{"account_id":960307,"reputation":107861,"user_id":984823,"display_name":"Joop Eggen"},"down_vote_count":2,"up_vote_count":1,"is_accepted":false,"score":-1,"last_activity_date":1372415837,"creation_date":1372413154,"answer_id":17361919,"question_id":17361210,"body_markdown":"Full Unicode can be represented in both UTF-8 and UTF-16, by sequences of bytes resp. byte pairs (&quot;java chars&quot;). From String a full Unicode _code point_ can be extracted with:\r\n\r\n    int[] codePoints = { 0x1d11e };\r\n    String s = new String(codePoints, 0, codePoints.length);\r\n\r\n    for (int i = 0; i &lt; s.length(); ) {\r\n        int cp = s.codePointAt(i);\r\n        i += Character.charCount(cp);\r\n    }\r\n\r\nFor a file with basically latin characters, UTF-8 would seem fine.\r\n\r\nTho following reads a full standard Unicode file (in UTF-8):\r\n\r\n    try (BufferedReader in = new BufferedReader(\r\n            new InputStreamReader(new FileInputStream(file), &quot;UTF-8&quot;))) {\r\n        for (;;) {\r\n            String line = in.readLine();\r\n            if (line == null) {\r\n                break;\r\n            }\r\n            ... do some thing with a Unicode line ...\r\n        }\r\n    } catch (FileNotFoundException e) {\r\n        System.err.println(&quot;No file: &quot; + file.getPath());\r\n    } catch (IOException e) {\r\n        ...\r\n    }\r\n\r\n-------\r\n\r\nA function that delivers a Java String of one (or more Unicode codes):\r\n\r\n    String s = unicodeToString(0x1d11e);\r\n    String s = unicodeToString(0x68, 0x65, 0x6c, 0x6c, 0x6f, 0x1d11e);\r\n\r\n    public static String unicodeToString(int... codepoints) {\r\n        return new String(codePoints, 0, codePoints.length);\r\n    }\r\n","title":"How to read non-BMP (astral) Unicode supplementary characters (code points)","body":"<p>Full Unicode can be represented in both UTF-8 and UTF-16, by sequences of bytes resp. byte pairs (\"java chars\"). From String a full Unicode <em>code point</em> can be extracted with:</p>\n\n<pre><code>int[] codePoints = { 0x1d11e };\nString s = new String(codePoints, 0, codePoints.length);\n\nfor (int i = 0; i &lt; s.length(); ) {\n    int cp = s.codePointAt(i);\n    i += Character.charCount(cp);\n}\n</code></pre>\n\n<p>For a file with basically latin characters, UTF-8 would seem fine.</p>\n\n<p>Tho following reads a full standard Unicode file (in UTF-8):</p>\n\n<pre><code>try (BufferedReader in = new BufferedReader(\n        new InputStreamReader(new FileInputStream(file), \"UTF-8\"))) {\n    for (;;) {\n        String line = in.readLine();\n        if (line == null) {\n            break;\n        }\n        ... do some thing with a Unicode line ...\n    }\n} catch (FileNotFoundException e) {\n    System.err.println(\"No file: \" + file.getPath());\n} catch (IOException e) {\n    ...\n}\n</code></pre>\n\n<hr>\n\n<p>A function that delivers a Java String of one (or more Unicode codes):</p>\n\n<pre><code>String s = unicodeToString(0x1d11e);\nString s = unicodeToString(0x68, 0x65, 0x6c, 0x6c, 0x6f, 0x1d11e);\n\npublic static String unicodeToString(int... codepoints) {\n    return new String(codePoints, 0, codePoints.length);\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":701757,"reputation":121151,"user_id":592139,"display_name":"Ian Roberts"},"down_vote_count":1,"up_vote_count":3,"is_accepted":true,"score":2,"last_activity_date":1372422425,"creation_date":1372421388,"answer_id":17364444,"question_id":17361210,"body_markdown":"&gt; My best work around so far is this but it still contains unsafe casts\r\n\r\nThe only unsafe thing about the code you&#39;ve presented is that `ch16` might be -1 if `input` has reached EOF.  If you check for this condition first then you can guarantee that the other `(char)` casts are safe as `Reader.read()` [is specified][1] to return either -1 or a value that is within the range of `char` (0 - 0xFFFF).\r\n\r\n    public int read_code_point (Reader input) throws java.io.IOException\r\n    {\r\n      int ch16 = input.read();\r\n      if (ch16 &lt; 0 || !Character.isHighSurrogate((char)ch16))\r\n        return ch16;\r\n      else {\r\n        int loSurr = input.read();\r\n        if(loSurr &lt; 0 || !Character.isLowSurrogate((char)loSurr)) \r\n          return ch16; // or possibly throw an exception\r\n        else \r\n          return Character.toCodePoint((char)ch16, (char)loSurr);\r\n      }\r\n    }\r\n\r\nThis still isn&#39;t ideal, really you need to handle the edge case where the first `char` read is a high surrogate but the second one isn&#39;t a matching low surrogate, in which case you probably want to return the first `char` as-is _and backup the reader_ so that the next read gives you the next character.  But that only works if `input.markSupported() == true`.  If you _can_ guarantee that then how about\r\n\r\n    public int read_code_point (Reader input) throws java.io.IOException\r\n    {\r\n      int firstChar = input.read();\r\n      if (firstChar &lt; 0 || !Character.isHighSurrogate((char)firstChar)) {\r\n        return firstChar;\r\n      } else {\r\n        input.mark(1);\r\n        int secondChar = input.read();\r\n        if(secondChar &lt; 0) {\r\n          // reached EOF\r\n          return firstChar;\r\n        } else if(!Character.isLowSurrogate((char)secondChar)) {\r\n          // unpaired surrogates, un-read the second char\r\n          input.reset();\r\n          return firstChar;\r\n        }\r\n        else {\r\n          return Character.toCodePoint((char)firstChar, (char)secondChar);\r\n        }\r\n      }\r\n    }\r\n\r\nOr you could wrap the original reader in a `PushbackReader` and use `unread(secondChar)`\r\n\r\n  [1]: http://docs.oracle.com/javase/7/docs/api/java/io/Reader.html#read%28%29","title":"How to read non-BMP (astral) Unicode supplementary characters (code points)","body":"<blockquote>\n  <p>My best work around so far is this but it still contains unsafe casts</p>\n</blockquote>\n\n<p>The only unsafe thing about the code you've presented is that <code>ch16</code> might be -1 if <code>input</code> has reached EOF.  If you check for this condition first then you can guarantee that the other <code>(char)</code> casts are safe as <code>Reader.read()</code> <a href=\"http://docs.oracle.com/javase/7/docs/api/java/io/Reader.html#read%28%29\" rel=\"nofollow\">is specified</a> to return either -1 or a value that is within the range of <code>char</code> (0 - 0xFFFF).</p>\n\n<pre><code>public int read_code_point (Reader input) throws java.io.IOException\n{\n  int ch16 = input.read();\n  if (ch16 &lt; 0 || !Character.isHighSurrogate((char)ch16))\n    return ch16;\n  else {\n    int loSurr = input.read();\n    if(loSurr &lt; 0 || !Character.isLowSurrogate((char)loSurr)) \n      return ch16; // or possibly throw an exception\n    else \n      return Character.toCodePoint((char)ch16, (char)loSurr);\n  }\n}\n</code></pre>\n\n<p>This still isn't ideal, really you need to handle the edge case where the first <code>char</code> read is a high surrogate but the second one isn't a matching low surrogate, in which case you probably want to return the first <code>char</code> as-is <em>and backup the reader</em> so that the next read gives you the next character.  But that only works if <code>input.markSupported() == true</code>.  If you <em>can</em> guarantee that then how about</p>\n\n<pre><code>public int read_code_point (Reader input) throws java.io.IOException\n{\n  int firstChar = input.read();\n  if (firstChar &lt; 0 || !Character.isHighSurrogate((char)firstChar)) {\n    return firstChar;\n  } else {\n    input.mark(1);\n    int secondChar = input.read();\n    if(secondChar &lt; 0) {\n      // reached EOF\n      return firstChar;\n    } else if(!Character.isLowSurrogate((char)secondChar)) {\n      // unpaired surrogates, un-read the second char\n      input.reset();\n      return firstChar;\n    }\n    else {\n      return Character.toCodePoint((char)firstChar, (char)secondChar);\n    }\n  }\n}\n</code></pre>\n\n<p>Or you could wrap the original reader in a <code>PushbackReader</code> and use <code>unread(secondChar)</code></p>\n"}],"owner":{"account_id":173557,"reputation":22258,"user_id":402322,"accept_rate":67,"display_name":"ceving"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":904,"favorite_count":0,"down_vote_count":0,"up_vote_count":8,"accepted_answer_id":17364444,"answer_count":2,"score":8,"last_activity_date":1667339635,"creation_date":1372410857,"question_id":17361210,"body_markdown":"The G-Clef (U+1D11E) is not part of the [Basic Multilingual Plane][1] (BMP), which means that it requires more than 16 bit. Almost all of Java&#39;s read functions return only a `char` or a `int` containing also [only 16 bit][2]. Which function reads complete Unicode symbols including SMP, SIP, TIP, SSP and PUA?\r\n\r\n**Update**\r\n\r\nI have asked how to read a single Unicode symbol (or code point) from a input stream. I neither have any integer array nor do I want to read a line.\r\n\r\nIt is possible to build a code point with `Character.toCodePoint()` but this function requires a `char`. On the other side reading a `char` is not possible because `read()` returns an `int`.  My best work around so far is this but it still contains unsafe casts:\r\n\r\n    public int read_code_point (Reader input) throws java.io.IOException\r\n    {\r\n      int ch16 = input.read();\r\n      if (Character.isHighSurrogate((char)ch16))\r\n        return Character.toCodePoint((char)ch16, (char)input.read());\r\n      else \r\n        return (int)ch16;\r\n    }\r\n\r\nHow to do it better?\r\n\r\n**Update 2**\r\n\r\nAnother version returning a String but still using casts:\r\n\r\n    public String readchar (Reader input) throws java.io.IOException\r\n    {\r\n      int i16 = input.read(); // UTF-16 as int\r\n      if (i16 == -1) return null;\r\n      char c16 = (char)i16; // UTF-16\r\n      if (Character.isHighSurrogate(c16)) {\r\n        int low_i16 = input.read(); // low surrogate UTF-16 as int\r\n        if (low_i16 == -1)\r\n          throw new java.io.IOException (&quot;Can not read low surrogate&quot;);\r\n        char low_c16 = (char)low_i16;\r\n        int codepoint = Character.toCodePoint(c16, low_c16);\r\n        return new String (Character.toChars(codepoint));\r\n      }\r\n      else \r\n        return Character.toString(c16);\r\n    }\r\n\r\nThe remaining question: are the casts safe or how to avoid them?\r\n\r\n  [1]: http://en.wikipedia.org/wiki/Unicode_plane#Basic_Multilingual_Plane\r\n  [2]: http://docs.oracle.com/javase/7/docs/api/java/io/Reader.html#read%28%29","title":"How to read non-BMP (astral) Unicode supplementary characters (code points)","body":"<p>The G-Clef (U+1D11E) is not part of the <a href=\"http://en.wikipedia.org/wiki/Unicode_plane#Basic_Multilingual_Plane\" rel=\"nofollow\">Basic Multilingual Plane</a> (BMP), which means that it requires more than 16 bit. Almost all of Java's read functions return only a <code>char</code> or a <code>int</code> containing also <a href=\"http://docs.oracle.com/javase/7/docs/api/java/io/Reader.html#read%28%29\" rel=\"nofollow\">only 16 bit</a>. Which function reads complete Unicode symbols including SMP, SIP, TIP, SSP and PUA?</p>\n\n<p><strong>Update</strong></p>\n\n<p>I have asked how to read a single Unicode symbol (or code point) from a input stream. I neither have any integer array nor do I want to read a line.</p>\n\n<p>It is possible to build a code point with <code>Character.toCodePoint()</code> but this function requires a <code>char</code>. On the other side reading a <code>char</code> is not possible because <code>read()</code> returns an <code>int</code>.  My best work around so far is this but it still contains unsafe casts:</p>\n\n<pre><code>public int read_code_point (Reader input) throws java.io.IOException\n{\n  int ch16 = input.read();\n  if (Character.isHighSurrogate((char)ch16))\n    return Character.toCodePoint((char)ch16, (char)input.read());\n  else \n    return (int)ch16;\n}\n</code></pre>\n\n<p>How to do it better?</p>\n\n<p><strong>Update 2</strong></p>\n\n<p>Another version returning a String but still using casts:</p>\n\n<pre><code>public String readchar (Reader input) throws java.io.IOException\n{\n  int i16 = input.read(); // UTF-16 as int\n  if (i16 == -1) return null;\n  char c16 = (char)i16; // UTF-16\n  if (Character.isHighSurrogate(c16)) {\n    int low_i16 = input.read(); // low surrogate UTF-16 as int\n    if (low_i16 == -1)\n      throw new java.io.IOException (\"Can not read low surrogate\");\n    char low_c16 = (char)low_i16;\n    int codepoint = Character.toCodePoint(c16, low_c16);\n    return new String (Character.toChars(codepoint));\n  }\n  else \n    return Character.toString(c16);\n}\n</code></pre>\n\n<p>The remaining question: are the casts safe or how to avoid them?</p>\n"},{"tags":["java","lambda","java-8"],"comments":[{"owner":{"account_id":1101161,"reputation":119804,"user_id":1093528,"accept_rate":65,"display_name":"fge"},"score":3,"creation_date":1430646307,"post_id":30012295,"comment_id":48142687,"body_markdown":"Your code won&#39;t compile; a `User` is not a `Client`, unless `User` inherits `Client`.","body":"Your code won&#39;t compile; a <code>User</code> is not a <code>Client</code>, unless <code>User</code> inherits <code>Client</code>."}],"answers":[{"tags":[],"owner":{"account_id":29375,"reputation":9332,"user_id":79332,"accept_rate":72,"display_name":"daphshez"},"down_vote_count":1,"up_vote_count":3,"is_accepted":false,"score":2,"last_activity_date":1430647250,"creation_date":1430646759,"answer_id":30012467,"question_id":30012295,"body_markdown":"Something like:\r\n\r\n    clients.stream.filter(c-&gt;{\r\n       users.stream.filter(u-&gt;u.getName().equals(c.getName()).count()&gt;0\r\n    }).collect(Collectors.toList());\r\n\r\n\r\nThis is however not an awfully efficient way to do it. Unless the collections are very small, you will be better of building a set of user names and using that in the condition. ","title":"Java 8 Lambda filter by Lists","body":"<p>Something like:</p>\n\n<pre><code>clients.stream.filter(c-&gt;{\n   users.stream.filter(u-&gt;u.getName().equals(c.getName()).count()&gt;0\n}).collect(Collectors.toList());\n</code></pre>\n\n<p>This is however not an awfully efficient way to do it. Unless the collections are very small, you will be better of building a set of user names and using that in the condition. </p>\n"},{"tags":[],"owner":{"account_id":277416,"reputation":681848,"user_id":571407,"accept_rate":100,"display_name":"JB Nizet"},"down_vote_count":0,"up_vote_count":100,"is_accepted":true,"score":100,"last_activity_date":1430647461,"creation_date":1430647125,"answer_id":30012511,"question_id":30012295,"body_markdown":"    Predicate&lt;Client&gt; hasSameNameAsOneUser = \r\n        c -&gt; users.stream().anyMatch(u -&gt; u.getName().equals(c.getName()));\r\n    \r\n    return clients.stream()\r\n                  .filter(hasSameNameAsOneUser)\r\n                  .collect(Collectors.toList());\r\n\r\nBut this is quite inefficient, because it&#39;s O(m * n). You&#39;d better create a Set of acceptable names:\r\n\r\n    Set&lt;String&gt; acceptableNames = \r\n        users.stream()\r\n             .map(User::getName)\r\n             .collect(Collectors.toSet());\r\n\r\n    return clients.stream()\r\n                  .filter(c -&gt; acceptableNames.contains(c.getName()))\r\n                  .collect(Collectors.toList());\r\n\r\nAlso note that it&#39;s not strictly equivalent to the code you have (if it compiled), which adds the same client twice to the list if several users have the same name as the client.","title":"Java 8 Lambda filter by Lists","body":"<pre><code>Predicate&lt;Client&gt; hasSameNameAsOneUser = \n    c -&gt; users.stream().anyMatch(u -&gt; u.getName().equals(c.getName()));\n\nreturn clients.stream()\n              .filter(hasSameNameAsOneUser)\n              .collect(Collectors.toList());\n</code></pre>\n\n<p>But this is quite inefficient, because it's O(m * n). You'd better create a Set of acceptable names:</p>\n\n<pre><code>Set&lt;String&gt; acceptableNames = \n    users.stream()\n         .map(User::getName)\n         .collect(Collectors.toSet());\n\nreturn clients.stream()\n              .filter(c -&gt; acceptableNames.contains(c.getName()))\n              .collect(Collectors.toList());\n</code></pre>\n\n<p>Also note that it's not strictly equivalent to the code you have (if it compiled), which adds the same client twice to the list if several users have the same name as the client.</p>\n"},{"tags":[],"owner":{"account_id":4800889,"reputation":99,"user_id":3877552,"display_name":"LeoMandrak"},"down_vote_count":1,"up_vote_count":9,"is_accepted":false,"score":8,"last_activity_date":1448291321,"creation_date":1448291321,"answer_id":33874301,"question_id":30012295,"body_markdown":"Look this:\r\n\r\n\r\n    List&lt;Client&gt; result = clients\r\n\t\t.stream()\r\n\t\t.filter(c -&gt; \r\n\t\t\t(users.stream().map(User::getName).collect(Collectors.toList())).contains(c.getName()))\r\n\t\t\t.collect(Collectors.toList());","title":"Java 8 Lambda filter by Lists","body":"<p>Look this:</p>\n\n<pre><code>List&lt;Client&gt; result = clients\n    .stream()\n    .filter(c -&gt; \n        (users.stream().map(User::getName).collect(Collectors.toList())).contains(c.getName()))\n        .collect(Collectors.toList());\n</code></pre>\n"},{"tags":[],"owner":{"account_id":12178797,"reputation":163,"user_id":8891016,"display_name":"Eswaran Venkatesan"},"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1510411984,"creation_date":1510411679,"answer_id":47239165,"question_id":30012295,"body_markdown":"I would like share an example to understand the usage of stream().filter\r\n\r\n**Code Snippet**: Sample program to identify even number.\r\n\r\n    import java.util.ArrayList;\r\n    import java.util.List;\r\n    import java.util.stream.Collectors;\r\n\r\n    public void fetchEvenNumber(){\r\n            List&lt;Integer&gt; numberList = new ArrayList&lt;&gt;();\r\n    \t\tnumberList.add(10);\r\n    \t\tnumberList.add(11);\r\n    \t\tnumberList.add(12);\r\n    \t\tnumberList.add(13);\r\n    \t\tnumberList.add(14);\r\n    \t\tnumberList.add(15);\r\n    \r\n            List&lt;Integer&gt; evenNumberListObj = numberList.stream().filter(i -&gt; i%2 == 0).collect(Collectors.toList());\r\n    \t\tSystem.out.println(evenNumberListObj);\r\n    }\r\n\r\nOutput will be : [10, 12, 14]\r\n \r\nList&lt;Integer&gt; evenNumberListObj = numberList.stream().filter(i -&gt; i%2 == 0).collect(Collectors.toList());\r\n\r\n***numberList***: it is an ArrayList&lt;Integer&gt; object contains list of numbers.\r\n\r\n***java.util.Collection.stream()*** : stream() will get the stream of collection, which will return the Stream of Integer.\r\n\r\n***filter***:  Returns a stream that match the given predicate. i.e based on given condition (i -&gt; i%2 != 0) returns the matching stream.\r\n\r\n***collect***: whatever the stream of Integer filter based in the filter condition, those integer will be put in a list.  \r\n\t\t","title":"Java 8 Lambda filter by Lists","body":"<p>I would like share an example to understand the usage of stream().filter</p>\n\n<p><strong>Code Snippet</strong>: Sample program to identify even number.</p>\n\n<pre><code>import java.util.ArrayList;\nimport java.util.List;\nimport java.util.stream.Collectors;\n\npublic void fetchEvenNumber(){\n        List&lt;Integer&gt; numberList = new ArrayList&lt;&gt;();\n        numberList.add(10);\n        numberList.add(11);\n        numberList.add(12);\n        numberList.add(13);\n        numberList.add(14);\n        numberList.add(15);\n\n        List&lt;Integer&gt; evenNumberListObj = numberList.stream().filter(i -&gt; i%2 == 0).collect(Collectors.toList());\n        System.out.println(evenNumberListObj);\n}\n</code></pre>\n\n<p>Output will be : [10, 12, 14]</p>\n\n<p>List evenNumberListObj = numberList.stream().filter(i -> i%2 == 0).collect(Collectors.toList());</p>\n\n<p><strong><em>numberList</em></strong>: it is an ArrayList object contains list of numbers.</p>\n\n<p><strong><em>java.util.Collection.stream()</em></strong> : stream() will get the stream of collection, which will return the Stream of Integer.</p>\n\n<p><strong><em>filter</em></strong>:  Returns a stream that match the given predicate. i.e based on given condition (i -> i%2 != 0) returns the matching stream.</p>\n\n<p><strong><em>collect</em></strong>: whatever the stream of Integer filter based in the filter condition, those integer will be put in a list.  </p>\n"}],"owner":{"account_id":4555377,"reputation":1729,"user_id":3699261,"accept_rate":81,"display_name":"eszik.k"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":174674,"favorite_count":0,"down_vote_count":0,"up_vote_count":51,"accepted_answer_id":30012511,"answer_count":4,"score":51,"last_activity_date":1667338701,"creation_date":1430645616,"question_id":30012295,"body_markdown":"I have two list and i want filter thoose elements which are both list contains. And i want to do this with lambda expression.\r\n\r\nUsers getName and Clients getUserName both are return with String.\r\n\r\nHere is my sample code:\r\n\r\n    List&lt;Client&gt; clients = new ArrayList&lt;&gt;();\r\n    List&lt;User&gt; users = new ArrayList&lt;&gt;();\r\n    List&lt;Client&gt; results = new ArrayList&lt;&gt;();\r\n\r\n    for (Client user : users) {\r\n        for(Client client: clients){\r\n            if(user.getName().equals(client.getUserName())){\r\n                result.add(client);\r\n            }\r\n        }\r\n    }","title":"Java 8 Lambda filter by Lists","body":"<p>I have two list and i want filter thoose elements which are both list contains. And i want to do this with lambda expression.</p>\n\n<p>Users getName and Clients getUserName both are return with String.</p>\n\n<p>Here is my sample code:</p>\n\n<pre><code>List&lt;Client&gt; clients = new ArrayList&lt;&gt;();\nList&lt;User&gt; users = new ArrayList&lt;&gt;();\nList&lt;Client&gt; results = new ArrayList&lt;&gt;();\n\nfor (Client user : users) {\n    for(Client client: clients){\n        if(user.getName().equals(client.getUserName())){\n            result.add(client);\n        }\n    }\n}\n</code></pre>\n"},{"tags":["java","android","xml"],"comments":[{"owner":{"account_id":2501854,"reputation":790,"user_id":5392825,"display_name":"Yasir Tahir"},"score":0,"creation_date":1462359623,"post_id":37025789,"comment_id":61601687,"body_markdown":"Why there is linearlayout?","body":"Why there is linearlayout?"},{"owner":{"account_id":2501854,"reputation":790,"user_id":5392825,"display_name":"Yasir Tahir"},"score":0,"creation_date":1462359684,"post_id":37025789,"comment_id":61601736,"body_markdown":"Remove that linearlayout and change the height of ScrollView to match parent","body":"Remove that linearlayout and change the height of ScrollView to match parent"}],"answers":[{"tags":[],"owner":{"account_id":8091186,"reputation":1841,"user_id":6097062,"display_name":"Saurabh Vardani"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1462359624,"creation_date":1462359624,"answer_id":37025863,"question_id":37025789,"body_markdown":"Add one more Relative layout in Linear Layout like this\r\n\r\n    &lt;RelativeLayout\r\n            android:id=&quot;@+id/footer&quot;\r\n            android:layout_width=&quot;match_parent&quot;\r\n            android:layout_height=&quot;wrap_content&quot;\r\n            android:layout_alignParentBottom=&quot;true&quot;\r\n            android:gravity=&quot;center&quot;&gt;\r\n            &lt;Button\r\n        android:layout_width=&quot;match_parent&quot;\r\n            android:layout_height=&quot;45dp&quot;\r\n        android:background=&quot;@drawable/btnbg&quot;\r\n        android:textColor=&quot;#ffffff&quot;\r\n        android:textSize=&quot;25sp&quot;\r\n        android:layout_marginTop=&quot;25dp&quot;\r\n        android:id=&quot;@+id/btncalendar&quot;\r\n        android:text=&quot;POST CALENDAR&quot;\r\n       /&gt;\r\n        &lt;/RelativeLayout&gt;\r\n\r\n","title":"my scrollview does not show the last item (Button)","body":"<p>Add one more Relative layout in Linear Layout like this</p>\n\n<pre><code>&lt;RelativeLayout\n        android:id=\"@+id/footer\"\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"wrap_content\"\n        android:layout_alignParentBottom=\"true\"\n        android:gravity=\"center\"&gt;\n        &lt;Button\n    android:layout_width=\"match_parent\"\n        android:layout_height=\"45dp\"\n    android:background=\"@drawable/btnbg\"\n    android:textColor=\"#ffffff\"\n    android:textSize=\"25sp\"\n    android:layout_marginTop=\"25dp\"\n    android:id=\"@+id/btncalendar\"\n    android:text=\"POST CALENDAR\"\n   /&gt;\n    &lt;/RelativeLayout&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4103438,"reputation":1830,"user_id":3368273,"display_name":"Mahesh Giri"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1462360536,"creation_date":1462360536,"answer_id":37026230,"question_id":37025789,"body_markdown":"Just do like this May be there is no need for ScrollView\r\n\r\n\r\n        &lt;ScrollView\r\n        xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n        xmlns:tools=&quot;http://schemas.android.com/tools&quot;\r\n        android:layout_width=&quot;match_parent&quot;\r\n        android:layout_height=&quot;wrap_content&quot;\r\n        android:fillViewport=&quot;true&quot;&gt;\r\n        &lt;LinearLayout\r\n            android:layout_width=&quot;match_parent&quot;\r\n            android:layout_height=&quot;wrap_content&quot;\r\n            android:orientation=&quot;vertical&quot; &gt;\r\n            &lt;RelativeLayout\r\n                android:layout_width=&quot;match_parent&quot;\r\n                android:layout_height=&quot;wrap_content&quot;\r\n                tools:context=&quot;com.msu.admin.subdueandroid.Calendering&quot;\r\n                android:id=&quot;@+id/rel1&quot;&gt;\r\n                &lt;TextView\r\n                    android:layout_width=&quot;match_parent&quot;\r\n                    android:layout_height=&quot;wrap_content&quot;\r\n                    android:text=&quot;SEMESTER CALENDAR&quot;\r\n                    android:typeface=&quot;sans&quot;\r\n                    android:textSize=&quot;35sp&quot;\r\n                    android:textColor=&quot;#ffffffff&quot;\r\n                    android:textStyle=&quot;bold&quot;\r\n                    android:gravity=&quot;center&quot;\r\n                    android:background=&quot;@drawable/btnbg&quot;\r\n                    android:id=&quot;@+id/textView5&quot;\r\n                    android:layout_alignParentTop=&quot;true&quot;\r\n                    android:layout_alignParentLeft=&quot;true&quot;\r\n                    android:layout_alignParentStart=&quot;true&quot; /&gt;\r\n    \r\n                &lt;TextView\r\n                    android:id=&quot;@+id/grestarts&quot;\r\n                    android:layout_width=&quot;match_parent&quot;\r\n                    android:layout_height=&quot;45dp&quot;\r\n                    android:layout_weight=&quot;0.08&quot;\r\n                    android:textColor=&quot;#002b1b&quot;\r\n                    android:background=&quot;@drawable/roundedtextfield&quot;\r\n                    android:hint=&quot;Online Registration Starts(returning)&quot;\r\n                    android:layout_below=&quot;@+id/textView5&quot;\r\n                    android:layout_alignParentLeft=&quot;true&quot;\r\n                    android:layout_alignParentStart=&quot;true&quot;\r\n                    android:layout_marginTop=&quot;25dp&quot;\r\n                    android:inputType=&quot;none&quot;/&gt;\r\n    \r\n                &lt;TextView\r\n                    android:id=&quot;@+id/gorstart&quot;\r\n                    android:layout_width=&quot;match_parent&quot;\r\n                    android:layout_height=&quot;45dp&quot;\r\n                    android:layout_weight=&quot;0.08&quot;\r\n                    android:textColor=&quot;#002b1b&quot;\r\n                    android:background=&quot;@drawable/roundedtextfield&quot;\r\n                    android:hint=&quot;Orientation and Registration (new students)&quot;\r\n                    android:layout_below=&quot;@+id/grestarts&quot;\r\n                    android:layout_alignParentLeft=&quot;true&quot;\r\n                    android:layout_alignParentStart=&quot;true&quot;\r\n                    android:layout_marginTop=&quot;25dp&quot;\r\n                    android:cursorVisible=&quot;false&quot;\r\n                    android:inputType=&quot;none&quot;/&gt;\r\n    \r\n                &lt;TextView\r\n                    android:id=&quot;@+id/gstart&quot;\r\n                    android:layout_width=&quot;match_parent&quot;\r\n                    android:layout_height=&quot;45dp&quot;\r\n                    android:layout_weight=&quot;0.08&quot;\r\n                    android:textColor=&quot;#002b1b&quot;\r\n                    android:background=&quot;@drawable/roundedtextfield&quot;\r\n                    android:hint=&quot;Semester Starts&quot;\r\n                    android:layout_below=&quot;@+id/gorstart&quot;\r\n                    android:layout_alignParentLeft=&quot;true&quot;\r\n                    android:layout_alignParentStart=&quot;true&quot;\r\n                    android:layout_marginTop=&quot;25dp&quot;\r\n                    android:cursorVisible=&quot;false&quot;\r\n                    android:inputType=&quot;none&quot;/&gt;\r\n                &lt;TextView\r\n                    android:id=&quot;@+id/semstart&quot;\r\n                    android:layout_width=&quot;match_parent&quot;\r\n                    android:layout_height=&quot;45dp&quot;\r\n                    android:layout_weight=&quot;0.08&quot;\r\n                    android:textColor=&quot;#002b1b&quot;\r\n                    android:background=&quot;@drawable/roundedtextfield&quot;\r\n                    android:hint=&quot;Semester Break Starts&quot;\r\n                    android:layout_below=&quot;@+id/gstart&quot;\r\n                    android:layout_centerHorizontal=&quot;true&quot;\r\n                    android:layout_marginTop=&quot;25dp&quot;\r\n                    android:cursorVisible=&quot;false&quot;\r\n                    android:inputType=&quot;none&quot;/&gt;\r\n                &lt;TextView\r\n                    android:id=&quot;@+id/semend&quot;\r\n                    android:layout_width=&quot;match_parent&quot;\r\n                    android:layout_height=&quot;45dp&quot;\r\n                    android:layout_weight=&quot;0.08&quot;\r\n                    android:textColor=&quot;#002b1b&quot;\r\n                    android:background=&quot;@drawable/roundedtextfield&quot;\r\n                    android:hint=&quot;Semester Break Ends&quot;\r\n                    android:layout_below=&quot;@+id/semstart&quot;\r\n                    android:layout_centerHorizontal=&quot;true&quot;\r\n                    android:layout_marginTop=&quot;25dp&quot;\r\n                    android:cursorVisible=&quot;false&quot;\r\n                    android:inputType=&quot;none&quot;/&gt;\r\n                &lt;TextView\r\n                    android:id=&quot;@+id/exstart&quot;\r\n                    android:layout_width=&quot;match_parent&quot;\r\n                    android:layout_height=&quot;45dp&quot;\r\n                    android:layout_weight=&quot;0.08&quot;\r\n                    android:textColor=&quot;#002b1b&quot;\r\n                    android:background=&quot;@drawable/roundedtextfield&quot;\r\n                    android:hint=&quot;Semester Exam Start&quot;\r\n                    android:layout_below=&quot;@+id/semend&quot;\r\n                    android:layout_centerHorizontal=&quot;true&quot;\r\n                    android:layout_marginTop=&quot;25dp&quot;\r\n                    android:cursorVisible=&quot;false&quot;\r\n                    android:inputType=&quot;none&quot;/&gt;\r\n                &lt;TextView\r\n                    android:id=&quot;@+id/exend&quot;\r\n                    android:layout_width=&quot;match_parent&quot;\r\n                    android:layout_height=&quot;45dp&quot;\r\n                    android:layout_weight=&quot;0.08&quot;\r\n                    android:textColor=&quot;#002b1b&quot;\r\n                    android:background=&quot;@drawable/roundedtextfield&quot;\r\n                    android:hint=&quot;Semester Exam End&quot;\r\n                    android:layout_below=&quot;@+id/exstart&quot;\r\n                    android:layout_marginTop=&quot;25dp&quot;\r\n                    android:cursorVisible=&quot;false&quot;\r\n                    android:inputType=&quot;none&quot;/&gt;\r\n                &lt;TextView\r\n                    android:id=&quot;@+id/semsend&quot;\r\n                    android:layout_width=&quot;match_parent&quot;\r\n                    android:layout_height=&quot;45dp&quot;\r\n                    android:layout_weight=&quot;0.08&quot;\r\n                    android:textColor=&quot;#002b1b&quot;\r\n                    android:background=&quot;@drawable/roundedtextfield&quot;\r\n                    android:hint=&quot;Semester Ends&quot;\r\n                    android:layout_below=&quot;@+id/exend&quot;\r\n                    android:layout_centerHorizontal=&quot;true&quot;\r\n                    android:layout_marginTop=&quot;25dp&quot;\r\n                    android:cursorVisible=&quot;false&quot;\r\n                    android:inputType=&quot;none&quot;/&gt;\r\n                &lt;Button\r\n                    android:layout_width=&quot;match_parent&quot;\r\n                    android:layout_height=&quot;45dp&quot;\r\n                    android:background=&quot;@drawable/btnbg&quot;\r\n                    android:textColor=&quot;#ffffff&quot;\r\n                    android:textSize=&quot;25sp&quot;\r\n                    android:layout_marginTop=&quot;25dp&quot;\r\n                    android:id=&quot;@+id/btncalendar&quot;\r\n                    android:text=&quot;POST CALENDAR&quot;\r\n                    android:layout_below=&quot;@+id/semsend&quot; /&gt;\r\n            &lt;/RelativeLayout&gt;\r\n        &lt;/LinearLayout&gt;\r\n    &lt;/ScrollView&gt;","title":"my scrollview does not show the last item (Button)","body":"<p>Just do like this May be there is no need for ScrollView</p>\n\n<pre><code>    &lt;ScrollView\n    xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    xmlns:tools=\"http://schemas.android.com/tools\"\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"wrap_content\"\n    android:fillViewport=\"true\"&gt;\n    &lt;LinearLayout\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"wrap_content\"\n        android:orientation=\"vertical\" &gt;\n        &lt;RelativeLayout\n            android:layout_width=\"match_parent\"\n            android:layout_height=\"wrap_content\"\n            tools:context=\"com.msu.admin.subdueandroid.Calendering\"\n            android:id=\"@+id/rel1\"&gt;\n            &lt;TextView\n                android:layout_width=\"match_parent\"\n                android:layout_height=\"wrap_content\"\n                android:text=\"SEMESTER CALENDAR\"\n                android:typeface=\"sans\"\n                android:textSize=\"35sp\"\n                android:textColor=\"#ffffffff\"\n                android:textStyle=\"bold\"\n                android:gravity=\"center\"\n                android:background=\"@drawable/btnbg\"\n                android:id=\"@+id/textView5\"\n                android:layout_alignParentTop=\"true\"\n                android:layout_alignParentLeft=\"true\"\n                android:layout_alignParentStart=\"true\" /&gt;\n\n            &lt;TextView\n                android:id=\"@+id/grestarts\"\n                android:layout_width=\"match_parent\"\n                android:layout_height=\"45dp\"\n                android:layout_weight=\"0.08\"\n                android:textColor=\"#002b1b\"\n                android:background=\"@drawable/roundedtextfield\"\n                android:hint=\"Online Registration Starts(returning)\"\n                android:layout_below=\"@+id/textView5\"\n                android:layout_alignParentLeft=\"true\"\n                android:layout_alignParentStart=\"true\"\n                android:layout_marginTop=\"25dp\"\n                android:inputType=\"none\"/&gt;\n\n            &lt;TextView\n                android:id=\"@+id/gorstart\"\n                android:layout_width=\"match_parent\"\n                android:layout_height=\"45dp\"\n                android:layout_weight=\"0.08\"\n                android:textColor=\"#002b1b\"\n                android:background=\"@drawable/roundedtextfield\"\n                android:hint=\"Orientation and Registration (new students)\"\n                android:layout_below=\"@+id/grestarts\"\n                android:layout_alignParentLeft=\"true\"\n                android:layout_alignParentStart=\"true\"\n                android:layout_marginTop=\"25dp\"\n                android:cursorVisible=\"false\"\n                android:inputType=\"none\"/&gt;\n\n            &lt;TextView\n                android:id=\"@+id/gstart\"\n                android:layout_width=\"match_parent\"\n                android:layout_height=\"45dp\"\n                android:layout_weight=\"0.08\"\n                android:textColor=\"#002b1b\"\n                android:background=\"@drawable/roundedtextfield\"\n                android:hint=\"Semester Starts\"\n                android:layout_below=\"@+id/gorstart\"\n                android:layout_alignParentLeft=\"true\"\n                android:layout_alignParentStart=\"true\"\n                android:layout_marginTop=\"25dp\"\n                android:cursorVisible=\"false\"\n                android:inputType=\"none\"/&gt;\n            &lt;TextView\n                android:id=\"@+id/semstart\"\n                android:layout_width=\"match_parent\"\n                android:layout_height=\"45dp\"\n                android:layout_weight=\"0.08\"\n                android:textColor=\"#002b1b\"\n                android:background=\"@drawable/roundedtextfield\"\n                android:hint=\"Semester Break Starts\"\n                android:layout_below=\"@+id/gstart\"\n                android:layout_centerHorizontal=\"true\"\n                android:layout_marginTop=\"25dp\"\n                android:cursorVisible=\"false\"\n                android:inputType=\"none\"/&gt;\n            &lt;TextView\n                android:id=\"@+id/semend\"\n                android:layout_width=\"match_parent\"\n                android:layout_height=\"45dp\"\n                android:layout_weight=\"0.08\"\n                android:textColor=\"#002b1b\"\n                android:background=\"@drawable/roundedtextfield\"\n                android:hint=\"Semester Break Ends\"\n                android:layout_below=\"@+id/semstart\"\n                android:layout_centerHorizontal=\"true\"\n                android:layout_marginTop=\"25dp\"\n                android:cursorVisible=\"false\"\n                android:inputType=\"none\"/&gt;\n            &lt;TextView\n                android:id=\"@+id/exstart\"\n                android:layout_width=\"match_parent\"\n                android:layout_height=\"45dp\"\n                android:layout_weight=\"0.08\"\n                android:textColor=\"#002b1b\"\n                android:background=\"@drawable/roundedtextfield\"\n                android:hint=\"Semester Exam Start\"\n                android:layout_below=\"@+id/semend\"\n                android:layout_centerHorizontal=\"true\"\n                android:layout_marginTop=\"25dp\"\n                android:cursorVisible=\"false\"\n                android:inputType=\"none\"/&gt;\n            &lt;TextView\n                android:id=\"@+id/exend\"\n                android:layout_width=\"match_parent\"\n                android:layout_height=\"45dp\"\n                android:layout_weight=\"0.08\"\n                android:textColor=\"#002b1b\"\n                android:background=\"@drawable/roundedtextfield\"\n                android:hint=\"Semester Exam End\"\n                android:layout_below=\"@+id/exstart\"\n                android:layout_marginTop=\"25dp\"\n                android:cursorVisible=\"false\"\n                android:inputType=\"none\"/&gt;\n            &lt;TextView\n                android:id=\"@+id/semsend\"\n                android:layout_width=\"match_parent\"\n                android:layout_height=\"45dp\"\n                android:layout_weight=\"0.08\"\n                android:textColor=\"#002b1b\"\n                android:background=\"@drawable/roundedtextfield\"\n                android:hint=\"Semester Ends\"\n                android:layout_below=\"@+id/exend\"\n                android:layout_centerHorizontal=\"true\"\n                android:layout_marginTop=\"25dp\"\n                android:cursorVisible=\"false\"\n                android:inputType=\"none\"/&gt;\n            &lt;Button\n                android:layout_width=\"match_parent\"\n                android:layout_height=\"45dp\"\n                android:background=\"@drawable/btnbg\"\n                android:textColor=\"#ffffff\"\n                android:textSize=\"25sp\"\n                android:layout_marginTop=\"25dp\"\n                android:id=\"@+id/btncalendar\"\n                android:text=\"POST CALENDAR\"\n                android:layout_below=\"@+id/semsend\" /&gt;\n        &lt;/RelativeLayout&gt;\n    &lt;/LinearLayout&gt;\n&lt;/ScrollView&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":7507805,"reputation":671,"user_id":5703820,"accept_rate":50,"display_name":"Infinite Loops"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1462360551,"creation_date":1462360551,"answer_id":37026236,"question_id":37025789,"body_markdown":"ScrollView can only have one child, so remove either the `Linear Layout` or `Relative Layout` in your code.\r\nSort all the code properly so that all of the code is `INSIDE` ScrollView, not `UNDER` it.","title":"my scrollview does not show the last item (Button)","body":"<p>ScrollView can only have one child, so remove either the <code>Linear Layout</code> or <code>Relative Layout</code> in your code.\nSort all the code properly so that all of the code is <code>INSIDE</code> ScrollView, not <code>UNDER</code> it.</p>\n"},{"tags":[],"owner":{"account_id":4681378,"reputation":2067,"user_id":3789993,"accept_rate":74,"display_name":"AbhayBohra"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1462363132,"creation_date":1462363132,"answer_id":37027156,"question_id":37025789,"body_markdown":"Add some padding bottom on your parent LinearLayout like:\r\n\r\n    android:paddingBottom=&quot;15dp&quot;","title":"my scrollview does not show the last item (Button)","body":"<p>Add some padding bottom on your parent LinearLayout like:</p>\n\n<pre><code>android:paddingBottom=\"15dp\"\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6825586,"reputation":2117,"user_id":5251407,"accept_rate":57,"display_name":"Akhil Soman"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1462363695,"creation_date":1462363695,"answer_id":37027372,"question_id":37025789,"body_markdown":"Your button could be behind the navigation bar. To check if this is the case. Just add another button under the btncalendar, with visibility=&quot;invisible&quot;. OR just add paddingBottom=&quot;40dp&quot; to your Relative layout. And check if the btncalendar is visible or not.","title":"my scrollview does not show the last item (Button)","body":"<p>Your button could be behind the navigation bar. To check if this is the case. Just add another button under the btncalendar, with visibility=\"invisible\". OR just add paddingBottom=\"40dp\" to your Relative layout. And check if the btncalendar is visible or not.</p>\n"},{"tags":[],"owner":{"account_id":2832790,"reputation":1,"user_id":2434011,"display_name":"Y. Cruz"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1667338669,"creation_date":1667338669,"answer_id":74282071,"question_id":37025789,"body_markdown":"Quick Fix: Add margin or padding at the bottom of the last item. It will do the trick.","title":"my scrollview does not show the last item (Button)","body":"<p>Quick Fix: Add margin or padding at the bottom of the last item. It will do the trick.</p>\n"}],"owner":{"account_id":8199717,"reputation":3,"user_id":6171431,"display_name":"Subdue"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":726,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":37026230,"answer_count":6,"score":0,"last_activity_date":1667338669,"creation_date":1462359463,"question_id":37025789,"body_markdown":"i am new to android and i have this xml page and when i am running the app , the last item is not showing.i have tried changing the last item to an edittext but the problem remains the same.This xml page is inflated in a fragment.Can someone help.\r\n       \r\n    &lt;ScrollView xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n        xmlns:tools=&quot;http://schemas.android.com/tools&quot;\r\n        android:layout_width=&quot;match_parent&quot;\r\n        android:layout_height=&quot;wrap_content&quot;\r\n        android:fillViewport=&quot;true&quot;&gt;\r\n    \r\n        &lt;LinearLayout\r\n            android:layout_width=&quot;match_parent&quot;\r\n            android:layout_height=&quot;wrap_content&quot;\r\n            android:orientation=&quot;vertical&quot;&gt;\r\n    \r\n            &lt;RelativeLayout\r\n                android:id=&quot;@+id/rel1&quot;\r\n                android:layout_width=&quot;match_parent&quot;\r\n                android:layout_height=&quot;wrap_content&quot;\r\n                tools:context=&quot;com.msu.admin.subdueandroid.Calendering&quot;&gt;\r\n    \r\n                &lt;TextView\r\n                    android:id=&quot;@+id/textView5&quot;\r\n                    android:layout_width=&quot;match_parent&quot;\r\n                    android:layout_height=&quot;wrap_content&quot;\r\n                    android:layout_alignParentLeft=&quot;true&quot;\r\n                    android:layout_alignParentStart=&quot;true&quot;\r\n                    android:layout_alignParentTop=&quot;true&quot;\r\n                    android:background=&quot;@drawable/btnbg&quot;\r\n                    android:gravity=&quot;center&quot;\r\n                    android:text=&quot;SEMESTER CALENDAR&quot;\r\n                    android:textColor=&quot;#ffffffff&quot;\r\n                    android:textSize=&quot;35sp&quot;\r\n                    android:textStyle=&quot;bold&quot;\r\n                    android:typeface=&quot;sans&quot; /&gt;\r\n    \r\n                &lt;TextView\r\n                    android:id=&quot;@+id/grestarts&quot;\r\n                    android:layout_width=&quot;match_parent&quot;\r\n                    android:layout_height=&quot;45dp&quot;\r\n                    android:layout_alignParentLeft=&quot;true&quot;\r\n                    android:layout_alignParentStart=&quot;true&quot;\r\n                    android:layout_below=&quot;@+id/textView5&quot;\r\n                    android:layout_marginTop=&quot;25dp&quot;\r\n                    android:layout_weight=&quot;0.08&quot;\r\n                    android:background=&quot;@drawable/roundedtextfield&quot;\r\n                    android:hint=&quot;Online Registration Starts(returning)&quot;\r\n                    android:inputType=&quot;none&quot;\r\n                    android:textColor=&quot;#002b1b&quot; /&gt;\r\n    \r\n                &lt;TextView\r\n                    android:id=&quot;@+id/gorstart&quot;\r\n                    android:layout_width=&quot;match_parent&quot;\r\n                    android:layout_height=&quot;45dp&quot;\r\n                    android:layout_alignParentLeft=&quot;true&quot;\r\n                    android:layout_alignParentStart=&quot;true&quot;\r\n                    android:layout_below=&quot;@+id/grestarts&quot;\r\n                    android:layout_marginTop=&quot;25dp&quot;\r\n                    android:layout_weight=&quot;0.08&quot;\r\n                    android:background=&quot;@drawable/roundedtextfield&quot;\r\n                    android:cursorVisible=&quot;false&quot;\r\n                    android:hint=&quot;Orientation and Registration (new students)&quot;\r\n                    android:inputType=&quot;none&quot;\r\n                    android:textColor=&quot;#002b1b&quot; /&gt;\r\n    \r\n                &lt;TextView\r\n                    android:id=&quot;@+id/gstart&quot;\r\n                    android:layout_width=&quot;match_parent&quot;\r\n                    android:layout_height=&quot;45dp&quot;\r\n                    android:layout_alignParentLeft=&quot;true&quot;\r\n                    android:layout_alignParentStart=&quot;true&quot;\r\n                    android:layout_below=&quot;@+id/gorstart&quot;\r\n                    android:layout_marginTop=&quot;25dp&quot;\r\n                    android:layout_weight=&quot;0.08&quot;\r\n                    android:background=&quot;@drawable/roundedtextfield&quot;\r\n                    android:cursorVisible=&quot;false&quot;\r\n                    android:hint=&quot;Semester Starts&quot;\r\n                    android:inputType=&quot;none&quot;\r\n                    android:textColor=&quot;#002b1b&quot; /&gt;\r\n    \r\n                &lt;TextView\r\n                    android:id=&quot;@+id/semstart&quot;\r\n                    android:layout_width=&quot;match_parent&quot;\r\n                    android:layout_height=&quot;45dp&quot;\r\n                    android:layout_below=&quot;@+id/gstart&quot;\r\n                    android:layout_centerHorizontal=&quot;true&quot;\r\n                    android:layout_marginTop=&quot;25dp&quot;\r\n                    android:layout_weight=&quot;0.08&quot;\r\n                    android:background=&quot;@drawable/roundedtextfield&quot;\r\n                    android:cursorVisible=&quot;false&quot;\r\n                    android:hint=&quot;Semester Break Starts&quot;\r\n                    android:inputType=&quot;none&quot;\r\n                    android:textColor=&quot;#002b1b&quot; /&gt;\r\n    \r\n                &lt;TextView\r\n                    android:id=&quot;@+id/semend&quot;\r\n                    android:layout_width=&quot;match_parent&quot;\r\n                    android:layout_height=&quot;45dp&quot;\r\n                    android:layout_below=&quot;@+id/semstart&quot;\r\n                    android:layout_centerHorizontal=&quot;true&quot;\r\n                    android:layout_marginTop=&quot;25dp&quot;\r\n                    android:layout_weight=&quot;0.08&quot;\r\n                    android:background=&quot;@drawable/roundedtextfield&quot;\r\n                    android:cursorVisible=&quot;false&quot;\r\n                    android:hint=&quot;Semester Break Ends&quot;\r\n                    android:inputType=&quot;none&quot;\r\n                    android:textColor=&quot;#002b1b&quot; /&gt;\r\n    \r\n                &lt;TextView\r\n                    android:id=&quot;@+id/exstart&quot;\r\n                    android:layout_width=&quot;match_parent&quot;\r\n                    android:layout_height=&quot;45dp&quot;\r\n                    android:layout_below=&quot;@+id/semend&quot;\r\n                    android:layout_centerHorizontal=&quot;true&quot;\r\n                    android:layout_marginTop=&quot;25dp&quot;\r\n                    android:layout_weight=&quot;0.08&quot;\r\n                    android:background=&quot;@drawable/roundedtextfield&quot;\r\n                    android:cursorVisible=&quot;false&quot;\r\n                    android:hint=&quot;Semester Exam Start&quot;\r\n                    android:inputType=&quot;none&quot;\r\n                    android:textColor=&quot;#002b1b&quot; /&gt;\r\n    \r\n                &lt;TextView\r\n                    android:id=&quot;@+id/exend&quot;\r\n                    android:layout_width=&quot;match_parent&quot;\r\n                    android:layout_height=&quot;45dp&quot;\r\n                    android:layout_below=&quot;@+id/exstart&quot;\r\n                    android:layout_marginTop=&quot;25dp&quot;\r\n                    android:layout_weight=&quot;0.08&quot;\r\n                    android:background=&quot;@drawable/roundedtextfield&quot;\r\n                    android:cursorVisible=&quot;false&quot;\r\n                    android:hint=&quot;Semester Exam End&quot;\r\n                    android:inputType=&quot;none&quot;\r\n                    android:textColor=&quot;#002b1b&quot; /&gt;\r\n    \r\n                &lt;TextView\r\n                    android:id=&quot;@+id/semsend&quot;\r\n                    android:layout_width=&quot;match_parent&quot;\r\n                    android:layout_height=&quot;45dp&quot;\r\n                    android:layout_below=&quot;@+id/exend&quot;\r\n                    android:layout_centerHorizontal=&quot;true&quot;\r\n                    android:layout_marginTop=&quot;25dp&quot;\r\n                    android:layout_weight=&quot;0.08&quot;\r\n                    android:background=&quot;@drawable/roundedtextfield&quot;\r\n                    android:cursorVisible=&quot;false&quot;\r\n                    android:hint=&quot;Semester Ends&quot;\r\n                    android:inputType=&quot;none&quot;\r\n                    android:textColor=&quot;#002b1b&quot; /&gt;\r\n    \r\n                &lt;Button\r\n                    android:id=&quot;@+id/btncalendar&quot;\r\n                    android:layout_width=&quot;match_parent&quot;\r\n                    android:layout_height=&quot;45dp&quot;\r\n                    android:layout_below=&quot;@+id/semsend&quot;\r\n                    android:layout_marginTop=&quot;25dp&quot;\r\n                    android:background=&quot;@drawable/btnbg&quot;\r\n                    android:text=&quot;POST CALENDAR&quot;\r\n                    android:textColor=&quot;#ffffff&quot;\r\n                    android:textSize=&quot;25sp&quot; /&gt;\r\n            &lt;/RelativeLayout&gt;\r\n        &lt;/LinearLayout&gt;\r\n    &lt;/ScrollView&gt;","title":"my scrollview does not show the last item (Button)","body":"<p>i am new to android and i have this xml page and when i am running the app , the last item is not showing.i have tried changing the last item to an edittext but the problem remains the same.This xml page is inflated in a fragment.Can someone help.</p>\n\n<pre><code>&lt;ScrollView xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    xmlns:tools=\"http://schemas.android.com/tools\"\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"wrap_content\"\n    android:fillViewport=\"true\"&gt;\n\n    &lt;LinearLayout\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"wrap_content\"\n        android:orientation=\"vertical\"&gt;\n\n        &lt;RelativeLayout\n            android:id=\"@+id/rel1\"\n            android:layout_width=\"match_parent\"\n            android:layout_height=\"wrap_content\"\n            tools:context=\"com.msu.admin.subdueandroid.Calendering\"&gt;\n\n            &lt;TextView\n                android:id=\"@+id/textView5\"\n                android:layout_width=\"match_parent\"\n                android:layout_height=\"wrap_content\"\n                android:layout_alignParentLeft=\"true\"\n                android:layout_alignParentStart=\"true\"\n                android:layout_alignParentTop=\"true\"\n                android:background=\"@drawable/btnbg\"\n                android:gravity=\"center\"\n                android:text=\"SEMESTER CALENDAR\"\n                android:textColor=\"#ffffffff\"\n                android:textSize=\"35sp\"\n                android:textStyle=\"bold\"\n                android:typeface=\"sans\" /&gt;\n\n            &lt;TextView\n                android:id=\"@+id/grestarts\"\n                android:layout_width=\"match_parent\"\n                android:layout_height=\"45dp\"\n                android:layout_alignParentLeft=\"true\"\n                android:layout_alignParentStart=\"true\"\n                android:layout_below=\"@+id/textView5\"\n                android:layout_marginTop=\"25dp\"\n                android:layout_weight=\"0.08\"\n                android:background=\"@drawable/roundedtextfield\"\n                android:hint=\"Online Registration Starts(returning)\"\n                android:inputType=\"none\"\n                android:textColor=\"#002b1b\" /&gt;\n\n            &lt;TextView\n                android:id=\"@+id/gorstart\"\n                android:layout_width=\"match_parent\"\n                android:layout_height=\"45dp\"\n                android:layout_alignParentLeft=\"true\"\n                android:layout_alignParentStart=\"true\"\n                android:layout_below=\"@+id/grestarts\"\n                android:layout_marginTop=\"25dp\"\n                android:layout_weight=\"0.08\"\n                android:background=\"@drawable/roundedtextfield\"\n                android:cursorVisible=\"false\"\n                android:hint=\"Orientation and Registration (new students)\"\n                android:inputType=\"none\"\n                android:textColor=\"#002b1b\" /&gt;\n\n            &lt;TextView\n                android:id=\"@+id/gstart\"\n                android:layout_width=\"match_parent\"\n                android:layout_height=\"45dp\"\n                android:layout_alignParentLeft=\"true\"\n                android:layout_alignParentStart=\"true\"\n                android:layout_below=\"@+id/gorstart\"\n                android:layout_marginTop=\"25dp\"\n                android:layout_weight=\"0.08\"\n                android:background=\"@drawable/roundedtextfield\"\n                android:cursorVisible=\"false\"\n                android:hint=\"Semester Starts\"\n                android:inputType=\"none\"\n                android:textColor=\"#002b1b\" /&gt;\n\n            &lt;TextView\n                android:id=\"@+id/semstart\"\n                android:layout_width=\"match_parent\"\n                android:layout_height=\"45dp\"\n                android:layout_below=\"@+id/gstart\"\n                android:layout_centerHorizontal=\"true\"\n                android:layout_marginTop=\"25dp\"\n                android:layout_weight=\"0.08\"\n                android:background=\"@drawable/roundedtextfield\"\n                android:cursorVisible=\"false\"\n                android:hint=\"Semester Break Starts\"\n                android:inputType=\"none\"\n                android:textColor=\"#002b1b\" /&gt;\n\n            &lt;TextView\n                android:id=\"@+id/semend\"\n                android:layout_width=\"match_parent\"\n                android:layout_height=\"45dp\"\n                android:layout_below=\"@+id/semstart\"\n                android:layout_centerHorizontal=\"true\"\n                android:layout_marginTop=\"25dp\"\n                android:layout_weight=\"0.08\"\n                android:background=\"@drawable/roundedtextfield\"\n                android:cursorVisible=\"false\"\n                android:hint=\"Semester Break Ends\"\n                android:inputType=\"none\"\n                android:textColor=\"#002b1b\" /&gt;\n\n            &lt;TextView\n                android:id=\"@+id/exstart\"\n                android:layout_width=\"match_parent\"\n                android:layout_height=\"45dp\"\n                android:layout_below=\"@+id/semend\"\n                android:layout_centerHorizontal=\"true\"\n                android:layout_marginTop=\"25dp\"\n                android:layout_weight=\"0.08\"\n                android:background=\"@drawable/roundedtextfield\"\n                android:cursorVisible=\"false\"\n                android:hint=\"Semester Exam Start\"\n                android:inputType=\"none\"\n                android:textColor=\"#002b1b\" /&gt;\n\n            &lt;TextView\n                android:id=\"@+id/exend\"\n                android:layout_width=\"match_parent\"\n                android:layout_height=\"45dp\"\n                android:layout_below=\"@+id/exstart\"\n                android:layout_marginTop=\"25dp\"\n                android:layout_weight=\"0.08\"\n                android:background=\"@drawable/roundedtextfield\"\n                android:cursorVisible=\"false\"\n                android:hint=\"Semester Exam End\"\n                android:inputType=\"none\"\n                android:textColor=\"#002b1b\" /&gt;\n\n            &lt;TextView\n                android:id=\"@+id/semsend\"\n                android:layout_width=\"match_parent\"\n                android:layout_height=\"45dp\"\n                android:layout_below=\"@+id/exend\"\n                android:layout_centerHorizontal=\"true\"\n                android:layout_marginTop=\"25dp\"\n                android:layout_weight=\"0.08\"\n                android:background=\"@drawable/roundedtextfield\"\n                android:cursorVisible=\"false\"\n                android:hint=\"Semester Ends\"\n                android:inputType=\"none\"\n                android:textColor=\"#002b1b\" /&gt;\n\n            &lt;Button\n                android:id=\"@+id/btncalendar\"\n                android:layout_width=\"match_parent\"\n                android:layout_height=\"45dp\"\n                android:layout_below=\"@+id/semsend\"\n                android:layout_marginTop=\"25dp\"\n                android:background=\"@drawable/btnbg\"\n                android:text=\"POST CALENDAR\"\n                android:textColor=\"#ffffff\"\n                android:textSize=\"25sp\" /&gt;\n        &lt;/RelativeLayout&gt;\n    &lt;/LinearLayout&gt;\n&lt;/ScrollView&gt;\n</code></pre>\n"},{"tags":["java","java-8"],"comments":[{"owner":{"account_id":2994830,"reputation":1,"user_id":2541560,"display_name":"Kayaman"},"score":0,"creation_date":1488542646,"post_id":42578210,"comment_id":72289326,"body_markdown":"Shouldn&#39;t the &quot;negative predicate&quot; be `!d.equals(Integer.valueOf(f));`?","body":"Shouldn&#39;t the &quot;negative predicate&quot; be <code>!d.equals(Integer.valueOf(f));</code>?"},{"owner":{"account_id":5286625,"reputation":647,"user_id":4932655,"accept_rate":100,"display_name":"Display name"},"score":0,"creation_date":1488542747,"post_id":42578210,"comment_id":72289382,"body_markdown":"Yeah sorry that was my typo there.","body":"Yeah sorry that was my typo there."},{"owner":{"account_id":1752871,"reputation":7935,"user_id":1601571,"display_name":"&#214;mer Erden"},"score":0,"creation_date":1488544155,"post_id":42578210,"comment_id":72290292,"body_markdown":"I guess you need to clarify, what do you want at the end? , do you want to seperate positive and negative resulted predict&#39;s arguments to different Stack ? With a single stream? . If this is your purpose, you need to use grouping (or &quot;partitioningBy&quot;) not filter*","body":"I guess you need to clarify, what do you want at the end? , do you want to seperate positive and negative resulted predict&#39;s arguments to different Stack ? With a single stream? . If this is your purpose, you need to use grouping (or &quot;partitioningBy&quot;) not filter*"},{"owner":{"account_id":5286625,"reputation":647,"user_id":4932655,"accept_rate":100,"display_name":"Display name"},"score":0,"creation_date":1488547687,"post_id":42578210,"comment_id":72292789,"body_markdown":"No, I have a single predicate. The problem is that when I use &#39;negative&#39; predicates, my solution bleeds and I can&#39;t find the reason why. Added some clarification with samples.","body":"No, I have a single predicate. The problem is that when I use &#39;negative&#39; predicates, my solution bleeds and I can&#39;t find the reason why. Added some clarification with samples."},{"owner":{"account_id":1752871,"reputation":7935,"user_id":1601571,"display_name":"&#214;mer Erden"},"score":0,"creation_date":1488550454,"post_id":42578210,"comment_id":72294659,"body_markdown":"@Displayname the reason is obvious, your negative prediction returns true at least 1 time.How ?  your 1st collection has at least 1 element that doesn&#39;t equal to any value in 2nd collection,  consider the current element as (int) 1 from 1st collection, then dive into the filter check for negative prediction. 2nd collection has &quot;any&quot; element as &quot;1&quot; ?  no ! so your negative prediction will return true, and any anymatch will be obtained. then filter is not going to work because your all anymatch calls will return true. it would only work for 2 collection have single and same element","body":"@Displayname the reason is obvious, your negative prediction returns true at least 1 time.How ?  your 1st collection has at least 1 element that doesn&#39;t equal to any value in 2nd collection,  consider the current element as (int) 1 from 1st collection, then dive into the filter check for negative prediction. 2nd collection has &quot;any&quot; element as &quot;1&quot; ?  no ! so your negative prediction will return true, and any anymatch will be obtained. then filter is not going to work because your all anymatch calls will return true. it would only work for 2 collection have single and same element"}],"answers":[{"tags":[],"owner":{"account_id":1281306,"reputation":1486,"user_id":1235354,"display_name":"utkusonmez"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1488544344,"creation_date":1488543014,"answer_id":42578562,"question_id":42578210,"body_markdown":"This is what you what i think\r\n\r\n    public static void main(String[] args) {\r\n        List&lt;Integer&gt; sample = Arrays.asList(0, 1, 2, 3, 4, 5, 6, 7, 8, 9);\r\n        List&lt;String&gt; values = Arrays.asList(&quot;4&quot;, &quot;5&quot;, &quot;6&quot;);\r\n\r\n        BiPredicate&lt;Integer, String&gt; predicate = (d, f) -&gt; {\r\n            return d.equals(Integer.valueOf(f));\r\n        };\r\n\r\n        Function&lt;Integer, Integer&gt; converter = Function.identity();\r\n\r\n        Map&lt;Integer, Boolean&gt; filtered =\r\n                sample.parallelStream()\r\n                        .collect(Collectors.toMap(intVal -&gt; converter.apply(intVal), intVal -&gt; values.parallelStream().noneMatch(stringVal -&gt; predicate.test(intVal, stringVal))));\r\n\r\n        System.out.println(&quot;filtered:&quot;);\r\n        filtered.forEach((k,v) -&gt; {\r\n            System.out.println(&quot;positive:&quot; + k + &quot; val: &quot; + v);\r\n        });\r\n\r\n    }\r\n\r\n\r\n\r\nresult: \r\n\r\n    positive:0 val: true\r\n    positive:1 val: true\r\n    positive:2 val: true\r\n    positive:3 val: true\r\n    positive:4 val: false\r\n    positive:5 val: false\r\n    positive:6 val: false\r\n    positive:7 val: true\r\n    positive:8 val: true\r\n    positive:9 val: true\r\n\r\n","title":"Filter stream with values from another stream","body":"<p>This is what you what i think</p>\n\n<pre><code>public static void main(String[] args) {\n    List&lt;Integer&gt; sample = Arrays.asList(0, 1, 2, 3, 4, 5, 6, 7, 8, 9);\n    List&lt;String&gt; values = Arrays.asList(\"4\", \"5\", \"6\");\n\n    BiPredicate&lt;Integer, String&gt; predicate = (d, f) -&gt; {\n        return d.equals(Integer.valueOf(f));\n    };\n\n    Function&lt;Integer, Integer&gt; converter = Function.identity();\n\n    Map&lt;Integer, Boolean&gt; filtered =\n            sample.parallelStream()\n                    .collect(Collectors.toMap(intVal -&gt; converter.apply(intVal), intVal -&gt; values.parallelStream().noneMatch(stringVal -&gt; predicate.test(intVal, stringVal))));\n\n    System.out.println(\"filtered:\");\n    filtered.forEach((k,v) -&gt; {\n        System.out.println(\"positive:\" + k + \" val: \" + v);\n    });\n\n}\n</code></pre>\n\n<p>result: </p>\n\n<pre><code>positive:0 val: true\npositive:1 val: true\npositive:2 val: true\npositive:3 val: true\npositive:4 val: false\npositive:5 val: false\npositive:6 val: false\npositive:7 val: true\npositive:8 val: true\npositive:9 val: true\n</code></pre>\n"},{"tags":[],"owner":{"account_id":9779820,"reputation":9709,"user_id":7248342,"display_name":"Thomas Fritsch"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1488543857,"creation_date":1488543384,"answer_id":42578679,"question_id":42578210,"body_markdown":"You can do this more easily with `List.contains`:\r\n    \r\n    Collection&lt;Integer&gt; filtered = sample.parallelStream()\r\n                                         .filter(f -&gt; values.contains(String.valueOf(f)))\r\n                                         .collect(Collectors.toCollection(Stack::new));\r\n    \r\ngives result `[4, 5, 6]`. And\r\n    \r\n    Collection&lt;Integer&gt; filtered = sample.parallelStream()\r\n                                         .filter(f -&gt; !values.contains(String.valueOf(f)))\r\n                                         .collect(Collectors.toCollection(Stack::new));\r\n    \r\ngives result `[0, 1, 2, 3, 7, 8, 9]`.     \r\nOr did I miss something?                                ","title":"Filter stream with values from another stream","body":"<p>You can do this more easily with <code>List.contains</code>:</p>\n\n<pre><code>Collection&lt;Integer&gt; filtered = sample.parallelStream()\n                                     .filter(f -&gt; values.contains(String.valueOf(f)))\n                                     .collect(Collectors.toCollection(Stack::new));\n</code></pre>\n\n<p>gives result <code>[4, 5, 6]</code>. And</p>\n\n<pre><code>Collection&lt;Integer&gt; filtered = sample.parallelStream()\n                                     .filter(f -&gt; !values.contains(String.valueOf(f)))\n                                     .collect(Collectors.toCollection(Stack::new));\n</code></pre>\n\n<p>gives result <code>[0, 1, 2, 3, 7, 8, 9]</code>.<br>\nOr did I miss something?                                </p>\n"},{"tags":[],"owner":{"account_id":9906407,"reputation":1254,"user_id":7334796,"display_name":"J&#233;r&#244;me"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1488544109,"creation_date":1488543726,"answer_id":42578793,"question_id":42578210,"body_markdown":"Regarding to the [answer of Thomas Fritsch](https://stackoverflow.com/a/42578679/7334796) you can do it in one line by just changing the `Predicate`. You don&#39;t need the  `BiPredicate` any more.\r\n\r\n    Predicate&lt;Integer&gt; predicate = (f) -&gt; !values.contains(String.valueOf(f));\r\n    Predicate&lt;Integer&gt; predicatePositive = (f) -&gt; values.contains(String.valueOf(f));\r\n    Function&lt;Integer, Integer&gt; converter = Function.identity();\r\n\r\n    Collection&lt;Integer&gt; filtered = sample.parallelStream()\r\n                                        .filter(d -&gt; values.parallelStream()\r\n                                        .anyMatch(f -&gt; predicate.test(d)))\r\n                                        .map(converter)\r\n                                        .collect(Collectors.toCollection(Stack::new));","title":"Filter stream with values from another stream","body":"<p>Regarding to the <a href=\"https://stackoverflow.com/a/42578679/7334796\">answer of Thomas Fritsch</a> you can do it in one line by just changing the <code>Predicate</code>. You don't need the  <code>BiPredicate</code> any more.</p>\n\n<pre><code>Predicate&lt;Integer&gt; predicate = (f) -&gt; !values.contains(String.valueOf(f));\nPredicate&lt;Integer&gt; predicatePositive = (f) -&gt; values.contains(String.valueOf(f));\nFunction&lt;Integer, Integer&gt; converter = Function.identity();\n\nCollection&lt;Integer&gt; filtered = sample.parallelStream()\n                                    .filter(d -&gt; values.parallelStream()\n                                    .anyMatch(f -&gt; predicate.test(d)))\n                                    .map(converter)\n                                    .collect(Collectors.toCollection(Stack::new));\n</code></pre>\n"},{"tags":[],"owner":{"account_id":9779820,"reputation":9709,"user_id":7248342,"display_name":"Thomas Fritsch"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1488556831,"creation_date":1488553043,"answer_id":42582080,"question_id":42578210,"body_markdown":"The boolean complement of\r\n    \r\n    anyMatch(s -&gt; predicate.test(p, s))\r\n    \r\nis (according to [De Morgan&#39;s laws](https://en.wikipedia.org/wiki/De_Morgan&#39;s_laws))\r\n    \r\n    allMatch(s -&gt; !predicate.test(p, s))\r\n    \r\nbut not (as you were seemingly thinking in your post)\r\n    \r\n    anyMatch(s -&gt; !predicate.test(p, s))\r\n    \r\nApplied to your case:\r\n     \r\n    Collection&lt;Person&gt; filtered = persons\r\n                .parallelStream()\r\n                .filter(p -&gt; selectors.parallelStream().anyMatch(s -&gt; predicate.test(p, s)))\r\n                .collect(Collectors.toCollection(Stack::new));\r\n\r\nwill give a collection of Persons. And\r\n     \r\n    Collection&lt;Person&gt; filtered = persons\r\n                .parallelStream()\r\n                .filter(p -&gt; selectors.parallelStream().allMatch(s -&gt; !predicate.test(p, s)))\r\n                .collect(Collectors.toCollection(Stack::new));\r\n\r\nwill give the correct complementary collection of Persons.","title":"Filter stream with values from another stream","body":"<p>The boolean complement of</p>\n\n<pre><code>anyMatch(s -&gt; predicate.test(p, s))\n</code></pre>\n\n<p>is (according to <a href=\"https://en.wikipedia.org/wiki/De_Morgan&#39;s_laws\" rel=\"nofollow noreferrer\">De Morgan's laws</a>)</p>\n\n<pre><code>allMatch(s -&gt; !predicate.test(p, s))\n</code></pre>\n\n<p>but not (as you were seemingly thinking in your post)</p>\n\n<pre><code>anyMatch(s -&gt; !predicate.test(p, s))\n</code></pre>\n\n<p>Applied to your case:</p>\n\n<pre><code>Collection&lt;Person&gt; filtered = persons\n            .parallelStream()\n            .filter(p -&gt; selectors.parallelStream().anyMatch(s -&gt; predicate.test(p, s)))\n            .collect(Collectors.toCollection(Stack::new));\n</code></pre>\n\n<p>will give a collection of Persons. And</p>\n\n<pre><code>Collection&lt;Person&gt; filtered = persons\n            .parallelStream()\n            .filter(p -&gt; selectors.parallelStream().allMatch(s -&gt; !predicate.test(p, s)))\n            .collect(Collectors.toCollection(Stack::new));\n</code></pre>\n\n<p>will give the correct complementary collection of Persons.</p>\n"},{"tags":[],"owner":{"account_id":3124728,"reputation":1564,"user_id":2643815,"display_name":"Smart Coder"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1667338605,"creation_date":1667338605,"answer_id":74282064,"question_id":42578210,"body_markdown":"    List&lt;MyModel&gt; MyModelAccountList = MyModelAccountList1.stream().filter(mymodel -&gt; customerAcctList.stream().anyMatch(customerAccounts -&gt; doesCustomerAccountMatch(customerAccounts, mymodel))\r\n                    ).collect(Collectors.toList());","title":"Filter stream with values from another stream","body":"<pre><code>List&lt;MyModel&gt; MyModelAccountList = MyModelAccountList1.stream().filter(mymodel -&gt; customerAcctList.stream().anyMatch(customerAccounts -&gt; doesCustomerAccountMatch(customerAccounts, mymodel))\n                ).collect(Collectors.toList());\n</code></pre>\n"}],"owner":{"account_id":5286625,"reputation":647,"user_id":4932655,"accept_rate":100,"display_name":"Display name"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":4736,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":42582080,"answer_count":5,"score":3,"last_activity_date":1667338605,"creation_date":1488541975,"question_id":42578210,"body_markdown":"I have a hard time coming up with a universal solution to my problem. Let&#39;s suppose I have a complex data structure D. I want to find all elements in D that satisfies a predicate P with given filter values F and store the result in a Stack.\r\nI came up with two distinct solutions for positive and negative predicates.\r\n\r\n    List&lt;Integer&gt; sample = Arrays.asList(0,1,2,3,4,5,6,7,8,9);\r\n    List&lt;String&gt; values = Arrays.asList(&quot;4&quot;,&quot;5&quot;,&quot;6&quot;);\r\n    \r\n    BiPredicate&lt;Integer, String&gt; predicate = (d,f) -&gt; d.equals(Integer.valueOf(f));\r\n    Function&lt;Integer, Integer&gt; converter = Function.identity();\r\n    \r\n    Collection&lt;Integer&gt; filtered = sample.parallelStream()\r\n                                         .filter(d -&gt; values.parallelStream()\r\n                                                            .anyMatch(f -&gt; predicate.test(d, f)))\r\n                                         .map(converter::apply)\r\n                                         .collect(Collectors.toCollection(Stack::new));\r\n\r\nThe problem:\r\nThe above approach works as long as my predicate is negative. In the upper case the result is [4, 5, 6]. However, if I change the predicate to *!d.equals(Integer.valueOf(f))* the result becomes [0, 1, 2, 3, 4, 5, 6, 7, 8, 9]. In order to solve negative predicates, I have to change the filter to:\r\n\r\n    .filter(d -&gt; values.parallelStream()\r\n                       .distinct()\r\n                       .allMatch(f -&gt; predicate.test(d, f))\r\n\r\nBut doing so destroys the positive predicates. The problem is a bit more complicated because the sample contains objects with more than one properties of different types. The BiPredicate is used to define the criteria the fulfills the filtering using values as Filter. The example above has just been simplified but correctly shows the problem I&#39;m facing for 2 days now...\r\n\r\nAnyone can give me a tip how I could write this lambda to work for both cases?\r\n\r\n\r\n@Clarification:\r\nSeeming that I failed to make one important point clear enough allow me to elaborate. That in the example I have given, I have a Collection of simple Integers doesn&#39;t mean that I&#39;m facing this problem. Let&#39;s dive deeper...\r\n\r\n    class SampleDataStructure {\r\n        PropertyType_0 property_0;\r\n        PropertyType_1 property_1;\r\n        ...\r\n        PropertyType_N property_n;\r\n    \r\n        // getters defined.\r\n    }\r\n\r\n    Collection&lt;SampleDataStructure&gt; sample = ...; // Let&#39;s assume it has been initialized.\r\n\r\nNow, Let&#39;s take an arbitrary property of SampleDataStructure (PropertyType_I property_i). That will be the key for filtering my collection. I have another collection of type PropertyType_I:\r\n\r\n    Collection&lt;PropertyType_I&gt; values = ...; //A set of values that will be used by the predicate.\r\n\r\nI also have a predicate, for simplicity&#39;s sake:\r\n\r\n    BiPredicate&lt;SampleDataStructure, PropertyType_I&gt; predicateA = (data, value) -&gt; data.getPropertyI().equals(value);\r\n    BiPredicate&lt;SampleDataStructure, PropertyType_I&gt; predicateB = (data, value) -&gt; !data.getPropertyI().equals(value);\r\n\r\nI want to find all SampleDataStructures that match a predicate. It can either be predicateA or predicateB. I don&#39;t know what it&#39;s going to be so use imagination. I provided these two because there&#39;re problems with my approach (see the first part of my post). Then I want to use the given converter on those SampleDataStructures and map them to something completely different and return the result in a Collection, currently Stack.\r\n\r\nExamples:\r\n\r\n    sample = [0, 1, 2, 3, 4, 5, 6, 7, 8, 9]\r\n    values = [4, 5, 6]\r\n    \r\n    Predicate_1 = (s, v) -&gt; s == v       Result = [4, 5, 6]\r\n    Predicate_2 = (s, v) -&gt; s != v       Result = [0, 1, 2, 3, 7, 8, 9]\r\n    \r\n    values = []\r\n    \r\n    Predicate_1 = (s, v) -&gt; s == v       Result = []\r\n    Predicate_2 = (s, v) -&gt; s != v       Result = []\r\n    \r\n    values = [99]\r\n    \r\n    Predicate_1 = (s, v) -&gt; s == v       Result = []\r\n    Predicate_2 = (s, v) -&gt; s != v       Result = []\r\n\r\nAll this means that those proposed solutions, assuming that sample or values are only simple types are wrong. They both can be arbitrarily complex data structures and the BiPredicate is telling how the sample data should be filtered against the values. I hope that clears it up.\r\n\r\nHere&#39;s another example:\r\n\r\n    class Person {\r\n        private long id;\r\n        String name;\r\n        public Person(long id, String name) { this.id = id; this.name = name; }\r\n        public long getId() { return id; }\r\n        public Strin getName() { return name; }\r\n    }\r\n    \r\n    Collection&lt;Person&gt; persons = Arrays.asList(new Person(1, &quot;Jane&quot;), new Person(2, &quot;Doe&quot;), new Person(3, &quot;Jane Doe&quot;), new Person(4, &quot;John&quot;), new Person(5, &quot;whatever John&quot;), ...);\r\n    BiPredicate&lt;Person, String&gt; predicate = (p, f) -&gt; p.getName().matches(f);\r\n    Function&lt;Person, String&gt; personToName = Person::getName;\r\n    List&lt;String&gt; selectors = Arrays.asList(&quot;^Jane$&quot;, &quot;John$&quot;);\r\n\r\nAs a result I want to get [ Jane, John, whatever John ]\r\n\r\nThe problem with the approach I&#39;ve provided however is if I have: \r\n\r\n    BiPredicate&lt;Person, String&gt; predicate = (p, f) -&gt; !p.getName().matches(f);\r\n\r\nI&#39;m not getting [Jane Doe, and the ... section]. I get every single item. I don&#39;t have both predicates, I showed the negative one because that doesn&#39;t work.","title":"Filter stream with values from another stream","body":"<p>I have a hard time coming up with a universal solution to my problem. Let's suppose I have a complex data structure D. I want to find all elements in D that satisfies a predicate P with given filter values F and store the result in a Stack.\nI came up with two distinct solutions for positive and negative predicates.</p>\n\n<pre><code>List&lt;Integer&gt; sample = Arrays.asList(0,1,2,3,4,5,6,7,8,9);\nList&lt;String&gt; values = Arrays.asList(\"4\",\"5\",\"6\");\n\nBiPredicate&lt;Integer, String&gt; predicate = (d,f) -&gt; d.equals(Integer.valueOf(f));\nFunction&lt;Integer, Integer&gt; converter = Function.identity();\n\nCollection&lt;Integer&gt; filtered = sample.parallelStream()\n                                     .filter(d -&gt; values.parallelStream()\n                                                        .anyMatch(f -&gt; predicate.test(d, f)))\n                                     .map(converter::apply)\n                                     .collect(Collectors.toCollection(Stack::new));\n</code></pre>\n\n<p>The problem:\nThe above approach works as long as my predicate is negative. In the upper case the result is [4, 5, 6]. However, if I change the predicate to <em>!d.equals(Integer.valueOf(f))</em> the result becomes [0, 1, 2, 3, 4, 5, 6, 7, 8, 9]. In order to solve negative predicates, I have to change the filter to:</p>\n\n<pre><code>.filter(d -&gt; values.parallelStream()\n                   .distinct()\n                   .allMatch(f -&gt; predicate.test(d, f))\n</code></pre>\n\n<p>But doing so destroys the positive predicates. The problem is a bit more complicated because the sample contains objects with more than one properties of different types. The BiPredicate is used to define the criteria the fulfills the filtering using values as Filter. The example above has just been simplified but correctly shows the problem I'm facing for 2 days now...</p>\n\n<p>Anyone can give me a tip how I could write this lambda to work for both cases?</p>\n\n<p>@Clarification:\nSeeming that I failed to make one important point clear enough allow me to elaborate. That in the example I have given, I have a Collection of simple Integers doesn't mean that I'm facing this problem. Let's dive deeper...</p>\n\n<pre><code>class SampleDataStructure {\n    PropertyType_0 property_0;\n    PropertyType_1 property_1;\n    ...\n    PropertyType_N property_n;\n\n    // getters defined.\n}\n\nCollection&lt;SampleDataStructure&gt; sample = ...; // Let's assume it has been initialized.\n</code></pre>\n\n<p>Now, Let's take an arbitrary property of SampleDataStructure (PropertyType_I property_i). That will be the key for filtering my collection. I have another collection of type PropertyType_I:</p>\n\n<pre><code>Collection&lt;PropertyType_I&gt; values = ...; //A set of values that will be used by the predicate.\n</code></pre>\n\n<p>I also have a predicate, for simplicity's sake:</p>\n\n<pre><code>BiPredicate&lt;SampleDataStructure, PropertyType_I&gt; predicateA = (data, value) -&gt; data.getPropertyI().equals(value);\nBiPredicate&lt;SampleDataStructure, PropertyType_I&gt; predicateB = (data, value) -&gt; !data.getPropertyI().equals(value);\n</code></pre>\n\n<p>I want to find all SampleDataStructures that match a predicate. It can either be predicateA or predicateB. I don't know what it's going to be so use imagination. I provided these two because there're problems with my approach (see the first part of my post). Then I want to use the given converter on those SampleDataStructures and map them to something completely different and return the result in a Collection, currently Stack.</p>\n\n<p>Examples:</p>\n\n<pre><code>sample = [0, 1, 2, 3, 4, 5, 6, 7, 8, 9]\nvalues = [4, 5, 6]\n\nPredicate_1 = (s, v) -&gt; s == v       Result = [4, 5, 6]\nPredicate_2 = (s, v) -&gt; s != v       Result = [0, 1, 2, 3, 7, 8, 9]\n\nvalues = []\n\nPredicate_1 = (s, v) -&gt; s == v       Result = []\nPredicate_2 = (s, v) -&gt; s != v       Result = []\n\nvalues = [99]\n\nPredicate_1 = (s, v) -&gt; s == v       Result = []\nPredicate_2 = (s, v) -&gt; s != v       Result = []\n</code></pre>\n\n<p>All this means that those proposed solutions, assuming that sample or values are only simple types are wrong. They both can be arbitrarily complex data structures and the BiPredicate is telling how the sample data should be filtered against the values. I hope that clears it up.</p>\n\n<p>Here's another example:</p>\n\n<pre><code>class Person {\n    private long id;\n    String name;\n    public Person(long id, String name) { this.id = id; this.name = name; }\n    public long getId() { return id; }\n    public Strin getName() { return name; }\n}\n\nCollection&lt;Person&gt; persons = Arrays.asList(new Person(1, \"Jane\"), new Person(2, \"Doe\"), new Person(3, \"Jane Doe\"), new Person(4, \"John\"), new Person(5, \"whatever John\"), ...);\nBiPredicate&lt;Person, String&gt; predicate = (p, f) -&gt; p.getName().matches(f);\nFunction&lt;Person, String&gt; personToName = Person::getName;\nList&lt;String&gt; selectors = Arrays.asList(\"^Jane$\", \"John$\");\n</code></pre>\n\n<p>As a result I want to get [ Jane, John, whatever John ]</p>\n\n<p>The problem with the approach I've provided however is if I have: </p>\n\n<pre><code>BiPredicate&lt;Person, String&gt; predicate = (p, f) -&gt; !p.getName().matches(f);\n</code></pre>\n\n<p>I'm not getting [Jane Doe, and the ... section]. I get every single item. I don't have both predicates, I showed the negative one because that doesn't work.</p>\n"},{"tags":["java","swing"],"comments":[{"owner":{"account_id":2800747,"reputation":135,"user_id":10686802,"display_name":"Remzi Cavdar"},"score":0,"creation_date":1667314548,"post_id":74277684,"comment_id":131135750,"body_markdown":"Would have been also a good idea to add the tag: `swing` to your question. I&#39;m experienced in Java and JavaFX and didn&#39;t understand the question before realizing you were talking about Swing. I would recommend always mentioning which programming language and which framework/library/etc you use so others can quickly help you. Also, add as many relevant tags as necessary (there are people who watch specific tags - you could have been helped faster this way).","body":"Would have been also a good idea to add the tag: <code>swing</code> to your question. I&#39;m experienced in Java and JavaFX and didn&#39;t understand the question before realizing you were talking about Swing. I would recommend always mentioning which programming language and which framework/library/etc you use so others can quickly help you. Also, add as many relevant tags as necessary (there are people who watch specific tags - you could have been helped faster this way)."},{"owner":{"account_id":2800747,"reputation":135,"user_id":10686802,"display_name":"Remzi Cavdar"},"score":0,"creation_date":1667314783,"post_id":74277684,"comment_id":131135830,"body_markdown":"Another piece of advice would be to start using JavaFX since JavaFX is the successor of Swing and AWT. JavaFX is not so difficult to learn, it&#39;s very easy. See https://openjfx.io (there are easy install guides on the website - I would recommend JetBrains IntelliJ idea community to start with which has maven built into it and from there it&#39;s easy to use OpenJFX/JavaFX).","body":"Another piece of advice would be to start using JavaFX since JavaFX is the successor of Swing and AWT. JavaFX is not so difficult to learn, it&#39;s very easy. See <a href=\"https://openjfx.io\" rel=\"nofollow noreferrer\">openjfx.io</a> (there are easy install guides on the website - I would recommend JetBrains IntelliJ idea community to start with which has maven built into it and from there it&#39;s easy to use OpenJFX/JavaFX)."},{"owner":{"account_id":44852,"reputation":322224,"user_id":131872,"accept_rate":100,"display_name":"camickr"},"score":3,"creation_date":1667315281,"post_id":74277684,"comment_id":131136002,"body_markdown":"1) `Don&#39;t use a null layout!` Don&#39;t use setBounds(). 2) Post a proper [mre] with every question demonstrating the problem. We have no idea how those lines of code are used in the context of your code. We don&#39;t even see where you add the buttons to the panel. 3) Variable names should NOT start with upper case characters. Learn and follow Java naming conventions when posting code for other to read.","body":"1) <code>Don&#39;t use a null layout!</code> Don&#39;t use setBounds(). 2) Post a proper <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> with every question demonstrating the problem. We have no idea how those lines of code are used in the context of your code. We don&#39;t even see where you add the buttons to the panel. 3) Variable names should NOT start with upper case characters. Learn and follow Java naming conventions when posting code for other to read."},{"owner":{"account_id":44852,"reputation":322224,"user_id":131872,"accept_rate":100,"display_name":"camickr"},"score":0,"creation_date":1667354082,"post_id":74277684,"comment_id":131146133,"body_markdown":"(1-) 3) this is not an [mre]. Game logic is not relevant to the stated question. 2) Even if the game logic was relevant it is still not an MRE because we can not copy/paste/compile/test the posted code. There is no class. The &quot;owins&quot; logic is not included. 3) The answer to your question is given in comments 1/2 above which you choose to ignore because someone posted complete code. However that answer doesn&#39;t tell you what is wrong with your code, so you don&#39;t learn anything about debugging your class. I suggest you first understand the comments and fix your code, then use the code below.","body":"(1-) 3) this is not an <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>. Game logic is not relevant to the stated question. 2) Even if the game logic was relevant it is still not an MRE because we can not copy/paste/compile/test the posted code. There is no class. The &quot;owins&quot; logic is not included. 3) The answer to your question is given in comments 1/2 above which you choose to ignore because someone posted complete code. However that answer doesn&#39;t tell you what is wrong with your code, so you don&#39;t learn anything about debugging your class. I suggest you first understand the comments and fix your code, then use the code below."}],"answers":[{"tags":[],"owner":{"account_id":114128,"reputation":50422,"user_id":300257,"accept_rate":89,"display_name":"Gilbert Le Blanc"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1667338441,"creation_date":1667319810,"answer_id":74278877,"question_id":74277684,"body_markdown":"# Introduction\r\n\r\nOracle has a helpful tutorial, [Creating a GUI With Swing](https://docs.oracle.com/javase/tutorial/uiswing/index.html).  Skip the Learning Swing with the NetBeans IDE section. Pay particular attention to the [Laying Out Components Within a Container](https://docs.oracle.com/javase/tutorial/uiswing/layout/index.html) section.\r\n\r\nI created the following GUI.\r\n\r\n[![Example][1]][1]\r\n\r\nI used Swing layout managers to create a button `JPanel` and a tic-tac-toe grid `JPanel`.  You can press any button you want, and all the buttons remain visible on the `JFrame`.\r\n\r\nI left all the coloring and fonts for you to add.\r\n\r\n# Explanation\r\n\r\nWhen I create a Swing GUI, I use the [model-view-controller][2] (MVC) pattern. This pattern allows me to separate my concerns and focus on one small part of the application at a time.\r\n\r\nFor a Swing GUI, the MVC pattern is defined as:\r\n\r\n1. The view reads information from the model.\r\n2. The view does not update the model.\r\n3. The controller updates the model and repaints / revalidates the view.\r\n\r\nA Swing GUI can have many controller classes. I created three controller classes for this tic-tac-toe game.  Two of the three controller classes are expressed as lambda expressions because they are simple.\r\n\r\nI created 5 different classes. One class makes up the application model, one class defines the view, and three controller classes manage the application.\r\n\r\n## Model\r\n\r\nThe `GameModel` class is a plain Java getter/setter class that creates a logical tic-tac-toe board and keeps track of whose turn it is.\r\n\r\n## View\r\n\r\nEvery Swing application must start with a call to the `SwingUtilities` `invokeLater` method.  This method ensures that the Swing components are created and updated on the [Event Dispatch Thread][3]. \r\n\r\nI use a `JFrame` and create a button `JPanel` and a grid `JPanel`.  The JFrame has a default `BorderLayout`.  I put the button `JPanel` at NORTH and the grid `JPanel` in the CENTER.\r\n\r\nThe button `JPanel` uses a `FlowLayout` and the grid `JPanel` uses, you guessed it, a `GridLayout`.  I added an empty border around both `JPanels` to add some whitespace to the GUI.\r\n\r\nI used a `Box` `createHorizontalStrut` method to add some whitespace to the button `JPanel`.\r\n\r\n## Controller\r\n\r\nThe reset button and quit button controllers are simple lambda expressions.\r\n\r\nI made nine instances of the `MoveListener` class, one for each button in the tic-tac-toe grid.  This makes the `actionPerformed` code rather simple.  The only logic is to check to make sure the square is empty before making the move.\r\n\r\nFor some reason, checking for spaces didn&#39;t work, so I check for the absence of an &#39;X&#39; or an &#39;O&#39;.\r\n\r\n# Code\r\n\r\nHere&#39;s the complete runnable code.  I made the additional classes inner classes so I could post this code as one block.\r\n\r\nI tested this code and it works.  Save it somewhere safe before you make lots of changes and then gripe that it doesn&#39;t work.\r\n\r\n    import java.awt.BorderLayout;\r\n    import java.awt.Dimension;\r\n    import java.awt.FlowLayout;\r\n    import java.awt.Font;\r\n    import java.awt.GridLayout;\r\n    import java.awt.event.ActionEvent;\r\n    import java.awt.event.ActionListener;\r\n    \r\n    import javax.swing.BorderFactory;\r\n    import javax.swing.Box;\r\n    import javax.swing.JButton;\r\n    import javax.swing.JFrame;\r\n    import javax.swing.JLabel;\r\n    import javax.swing.JPanel;\r\n    import javax.swing.SwingUtilities;\r\n    \r\n    public class SimpleTicTacToeGUI implements Runnable {\r\n    \r\n    \tpublic static void main(String[] args) {\r\n    \t\tSwingUtilities.invokeLater(new SimpleTicTacToeGUI());\r\n    \t}\r\n    \r\n    \tprivate final GameModel model;\r\n    \t\r\n    \tprivate JButton[] gridButtons;\r\n    \t\r\n    \tprivate JFrame frame;\r\n    \r\n    \tprivate JLabel turnLabel;\r\n    \t\r\n    \tpublic SimpleTicTacToeGUI() {\r\n    \t\tthis.model = new GameModel();\r\n    \t}\r\n    \r\n    \t@Override\r\n    \tpublic void run() {\r\n    \t\tframe = new JFrame();\r\n    \t\tframe.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\r\n    \r\n    \t\tframe.add(createButtonPanel(), BorderLayout.NORTH);\r\n    \t\tframe.add(createGrid(), BorderLayout.CENTER);\r\n    \r\n    \t\tframe.pack();\r\n    \t\tframe.setLocationByPlatform(true);\r\n    \t\tframe.setVisible(true);\r\n    \t}\r\n    \r\n    \tprivate JPanel createButtonPanel() {\r\n    \t\tJPanel panel = new JPanel(new FlowLayout());\r\n    \t\tpanel.setBorder(BorderFactory.createEmptyBorder(0, 5, 5, 5));\r\n    \t\tFont font = panel.getFont().deriveFont(16f);\r\n    \t\t\r\n    \t\tJButton resetButton = new JButton(&quot;Replay?&quot;);\r\n    \t\tresetButton.setFont(font);\r\n    \t\tresetButton.addActionListener(event -&gt; {\r\n    \t\t\tmodel.resetModel();\r\n    \t\t\tupdateGUI();\r\n    \t\t\tenableButtons();\r\n    \t\t});\r\n    \t\tpanel.add(resetButton);\r\n    \t\t\r\n    \t\tpanel.add(Box.createHorizontalStrut(30));\r\n    \r\n    \t\tturnLabel = new JLabel(model.getTurn() + &quot;&#39;s turn&quot;);\r\n    \t\tturnLabel.setFont(font);\r\n    \t\tpanel.add(turnLabel);\r\n    \t\t\r\n    \t\tpanel.add(Box.createHorizontalStrut(30));\r\n    \r\n    \t\tJButton quitButton = new JButton(&quot;Quit!&quot;);\r\n    \t\tquitButton.setFont(font);\r\n    \t\tquitButton.addActionListener(event -&gt; {\r\n    \t\t\tframe.dispose();\r\n    \t\t\tSystem.exit(0);\r\n    \t\t});\r\n    \t\tpanel.add(quitButton);\r\n    \r\n    \t\treturn panel;\r\n    \t}\r\n    \r\n    \tprivate JPanel createGrid() {\r\n    \t\tJPanel panel = new JPanel(new GridLayout(0, 3));\r\n    \t\tpanel.setBorder(BorderFactory.createEmptyBorder(0, 5, 5, 5));\r\n    \t\tFont font = panel.getFont().deriveFont(Font.BOLD, 72f);\r\n    \t\t\r\n    \t\tgridButtons = new JButton[model.getBoard().length];\r\n    \t\tfor (int index = 0; index &lt; gridButtons.length; index++) {\r\n    \t\t\tgridButtons[index] = new JButton(&quot; &quot;);\r\n    \t\t\tMoveListener listener = new MoveListener(this, model, index);\r\n    \t\t\tgridButtons[index].addActionListener(listener);\r\n    \t\t\tgridButtons[index].setFont(font);\r\n    \t\t\tgridButtons[index].setPreferredSize(new Dimension(96, 96));\r\n    \t\t\tpanel.add(gridButtons[index]);\r\n    \t\t}\r\n    \r\n    \t\treturn panel;\r\n    \t}\r\n    \t\r\n    \tpublic void updateGUI() {\r\n    \t\tchar[] board = model.getBoard();\r\n    \t\tfor (int index = 0; index &lt; gridButtons.length; index++) {\r\n    \t\t\tString s = Character.toString(board[index]);\r\n    \t\t\tgridButtons[index].setText(s);\r\n    \t\t}\r\n    \t\tturnLabel.setText(model.getTurn() + &quot;&#39;s turn&quot;);\r\n    \t}\r\n    \t\r\n    \tpublic void disableButtons() {\r\n    \t\tfor (int index = 0; index &lt; gridButtons.length; index++) {\r\n    \t\t\tgridButtons[index].setEnabled(false);\r\n    \t\t}\r\n    \t}\r\n    \t\r\n    \tprivate void enableButtons() {\r\n    \t\tfor (int index = 0; index &lt; gridButtons.length; index++) {\r\n    \t\t\tgridButtons[index].setEnabled(true);\r\n    \t\t}\r\n    \t}\r\n    \t\r\n    \tpublic JButton getButton(int index) {\r\n    \t\treturn gridButtons[index];\r\n    \t}\r\n    \t\r\n    \tpublic class MoveListener implements ActionListener {\r\n    \t\t\r\n    \t\tprivate final int index;\r\n    \t\t\r\n    \t\tprivate final SimpleTicTacToeGUI view;\r\n    \t\t\r\n    \t\tprivate final GameModel model;\r\n    \r\n    \t\tpublic MoveListener(SimpleTicTacToeGUI view, GameModel model,\r\n    \t\t\t\tint index) {\r\n    \t\t\tthis.view = view;\r\n    \t\t\tthis.model = model;\r\n    \t\t\tthis.index = index;\r\n    \t\t}\r\n    \r\n    \t\t@Override\r\n    \t\tpublic void actionPerformed(ActionEvent event) {\r\n    \t\t\tString s = view.getButton(index).getText();\r\n    \t\t\tif (!(s.equals(&quot;X&quot;) || s.equals(&quot;O&quot;))) {\r\n    \t\t\t\tmodel.makeMove(index);\r\n    \t\t\t\tview.updateGUI();\r\n    \t\t\t\tif (model.isGameOver()) {\r\n    \t\t\t\t\tview.disableButtons();\r\n    \t\t\t\t}\r\n    \t\t\t}\r\n    \t\t}\r\n    \t\t\r\n    \t}\r\n    \t\r\n    \tpublic class GameModel {\r\n    \t\t\r\n    \t\tprivate char[] board;\r\n    \t\tprivate char turn;\r\n    \t\t\r\n    \t\tpublic GameModel() {\r\n    \t\t\tresetModel();\r\n    \t\t}\r\n    \t\t\r\n    \t\tpublic void resetModel() {\r\n    \t\t\tthis.board = new char[9];\r\n    \t\t\tthis.turn = &#39;X&#39;;\r\n    \t\t}\r\n    \t\t\r\n    \t\tpublic void makeMove(int index) {\r\n    \t\t\tboard[index] = turn;\r\n    \t\t\tturn = (turn == &#39;X&#39;) ? &#39;O&#39; : &#39;X&#39;;\r\n    \t\t}\r\n    \t\t\r\n    \t\tpublic boolean isGameOver() {\r\n    \t\t\tint[][] indexes = { { 0, 1, 2 }, { 3, 4, 5 }, { 6, 7, 8 },\r\n    \t\t\t\t\t{ 0, 3, 6 }, { 1, 4, 7 }, { 2, 5, 8 }, { 0, 4, 8 },\r\n    \t\t\t\t\t{ 2, 4, 6 } };\r\n    \t\t\tfor (int index = 0; index &lt; indexes.length; index++) {\r\n    \t\t\t\tif (checkRow(&#39;X&#39;, indexes[index])\r\n    \t\t\t\t\t\t|| checkRow(&#39;O&#39;, indexes[index])) {\r\n    \t\t\t\t\treturn true;\r\n    \t\t\t\t}\r\n    \t\t\t}\r\n    \t\t\treturn false;\r\n    \t\t}\r\n    \t\t\r\n    \t\tprivate boolean checkRow(char player, int[] indexes) {\r\n    \t\t\tfor (int index = 0; index &lt; indexes.length; index++) {\r\n    \t\t\t\tif (board[indexes[index]] != player) {\r\n    \t\t\t\t\treturn false;\r\n    \t\t\t\t}\r\n    \t\t\t}\r\n    \t\t\t\r\n    \t\t\treturn true;\r\n    \t\t}\r\n    \r\n    \t\tpublic char getTurn() {\r\n    \t\t\treturn turn;\r\n    \t\t}\r\n    \r\n    \t\tpublic char[] getBoard() {\r\n    \t\t\treturn board;\r\n    \t\t}\r\n    \t\t\r\n    \t}\r\n    \r\n    }\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/fhdYj.png\r\n  [2]: https://en.wikipedia.org/wiki/Model%E2%80%93view%E2%80%93controller\r\n  [3]: https://docs.oracle.com/javase/tutorial/uiswing/concurrency/dispatch.html\r\n","title":"How to keep a button visible when clicking on other buttons?","body":"<h1>Introduction</h1>\n<p>Oracle has a helpful tutorial, <a href=\"https://docs.oracle.com/javase/tutorial/uiswing/index.html\" rel=\"nofollow noreferrer\">Creating a GUI With Swing</a>.  Skip the Learning Swing with the NetBeans IDE section. Pay particular attention to the <a href=\"https://docs.oracle.com/javase/tutorial/uiswing/layout/index.html\" rel=\"nofollow noreferrer\">Laying Out Components Within a Container</a> section.</p>\n<p>I created the following GUI.</p>\n<p><a href=\"https://i.stack.imgur.com/fhdYj.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/fhdYj.png\" alt=\"Example\" /></a></p>\n<p>I used Swing layout managers to create a button <code>JPanel</code> and a tic-tac-toe grid <code>JPanel</code>.  You can press any button you want, and all the buttons remain visible on the <code>JFrame</code>.</p>\n<p>I left all the coloring and fonts for you to add.</p>\n<h1>Explanation</h1>\n<p>When I create a Swing GUI, I use the <a href=\"https://en.wikipedia.org/wiki/Model%E2%80%93view%E2%80%93controller\" rel=\"nofollow noreferrer\">model-view-controller</a> (MVC) pattern. This pattern allows me to separate my concerns and focus on one small part of the application at a time.</p>\n<p>For a Swing GUI, the MVC pattern is defined as:</p>\n<ol>\n<li>The view reads information from the model.</li>\n<li>The view does not update the model.</li>\n<li>The controller updates the model and repaints / revalidates the view.</li>\n</ol>\n<p>A Swing GUI can have many controller classes. I created three controller classes for this tic-tac-toe game.  Two of the three controller classes are expressed as lambda expressions because they are simple.</p>\n<p>I created 5 different classes. One class makes up the application model, one class defines the view, and three controller classes manage the application.</p>\n<h2>Model</h2>\n<p>The <code>GameModel</code> class is a plain Java getter/setter class that creates a logical tic-tac-toe board and keeps track of whose turn it is.</p>\n<h2>View</h2>\n<p>Every Swing application must start with a call to the <code>SwingUtilities</code> <code>invokeLater</code> method.  This method ensures that the Swing components are created and updated on the <a href=\"https://docs.oracle.com/javase/tutorial/uiswing/concurrency/dispatch.html\" rel=\"nofollow noreferrer\">Event Dispatch Thread</a>.</p>\n<p>I use a <code>JFrame</code> and create a button <code>JPanel</code> and a grid <code>JPanel</code>.  The JFrame has a default <code>BorderLayout</code>.  I put the button <code>JPanel</code> at NORTH and the grid <code>JPanel</code> in the CENTER.</p>\n<p>The button <code>JPanel</code> uses a <code>FlowLayout</code> and the grid <code>JPanel</code> uses, you guessed it, a <code>GridLayout</code>.  I added an empty border around both <code>JPanels</code> to add some whitespace to the GUI.</p>\n<p>I used a <code>Box</code> <code>createHorizontalStrut</code> method to add some whitespace to the button <code>JPanel</code>.</p>\n<h2>Controller</h2>\n<p>The reset button and quit button controllers are simple lambda expressions.</p>\n<p>I made nine instances of the <code>MoveListener</code> class, one for each button in the tic-tac-toe grid.  This makes the <code>actionPerformed</code> code rather simple.  The only logic is to check to make sure the square is empty before making the move.</p>\n<p>For some reason, checking for spaces didn't work, so I check for the absence of an 'X' or an 'O'.</p>\n<h1>Code</h1>\n<p>Here's the complete runnable code.  I made the additional classes inner classes so I could post this code as one block.</p>\n<p>I tested this code and it works.  Save it somewhere safe before you make lots of changes and then gripe that it doesn't work.</p>\n<pre><code>import java.awt.BorderLayout;\nimport java.awt.Dimension;\nimport java.awt.FlowLayout;\nimport java.awt.Font;\nimport java.awt.GridLayout;\nimport java.awt.event.ActionEvent;\nimport java.awt.event.ActionListener;\n\nimport javax.swing.BorderFactory;\nimport javax.swing.Box;\nimport javax.swing.JButton;\nimport javax.swing.JFrame;\nimport javax.swing.JLabel;\nimport javax.swing.JPanel;\nimport javax.swing.SwingUtilities;\n\npublic class SimpleTicTacToeGUI implements Runnable {\n\n    public static void main(String[] args) {\n        SwingUtilities.invokeLater(new SimpleTicTacToeGUI());\n    }\n\n    private final GameModel model;\n    \n    private JButton[] gridButtons;\n    \n    private JFrame frame;\n\n    private JLabel turnLabel;\n    \n    public SimpleTicTacToeGUI() {\n        this.model = new GameModel();\n    }\n\n    @Override\n    public void run() {\n        frame = new JFrame();\n        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\n\n        frame.add(createButtonPanel(), BorderLayout.NORTH);\n        frame.add(createGrid(), BorderLayout.CENTER);\n\n        frame.pack();\n        frame.setLocationByPlatform(true);\n        frame.setVisible(true);\n    }\n\n    private JPanel createButtonPanel() {\n        JPanel panel = new JPanel(new FlowLayout());\n        panel.setBorder(BorderFactory.createEmptyBorder(0, 5, 5, 5));\n        Font font = panel.getFont().deriveFont(16f);\n        \n        JButton resetButton = new JButton(&quot;Replay?&quot;);\n        resetButton.setFont(font);\n        resetButton.addActionListener(event -&gt; {\n            model.resetModel();\n            updateGUI();\n            enableButtons();\n        });\n        panel.add(resetButton);\n        \n        panel.add(Box.createHorizontalStrut(30));\n\n        turnLabel = new JLabel(model.getTurn() + &quot;'s turn&quot;);\n        turnLabel.setFont(font);\n        panel.add(turnLabel);\n        \n        panel.add(Box.createHorizontalStrut(30));\n\n        JButton quitButton = new JButton(&quot;Quit!&quot;);\n        quitButton.setFont(font);\n        quitButton.addActionListener(event -&gt; {\n            frame.dispose();\n            System.exit(0);\n        });\n        panel.add(quitButton);\n\n        return panel;\n    }\n\n    private JPanel createGrid() {\n        JPanel panel = new JPanel(new GridLayout(0, 3));\n        panel.setBorder(BorderFactory.createEmptyBorder(0, 5, 5, 5));\n        Font font = panel.getFont().deriveFont(Font.BOLD, 72f);\n        \n        gridButtons = new JButton[model.getBoard().length];\n        for (int index = 0; index &lt; gridButtons.length; index++) {\n            gridButtons[index] = new JButton(&quot; &quot;);\n            MoveListener listener = new MoveListener(this, model, index);\n            gridButtons[index].addActionListener(listener);\n            gridButtons[index].setFont(font);\n            gridButtons[index].setPreferredSize(new Dimension(96, 96));\n            panel.add(gridButtons[index]);\n        }\n\n        return panel;\n    }\n    \n    public void updateGUI() {\n        char[] board = model.getBoard();\n        for (int index = 0; index &lt; gridButtons.length; index++) {\n            String s = Character.toString(board[index]);\n            gridButtons[index].setText(s);\n        }\n        turnLabel.setText(model.getTurn() + &quot;'s turn&quot;);\n    }\n    \n    public void disableButtons() {\n        for (int index = 0; index &lt; gridButtons.length; index++) {\n            gridButtons[index].setEnabled(false);\n        }\n    }\n    \n    private void enableButtons() {\n        for (int index = 0; index &lt; gridButtons.length; index++) {\n            gridButtons[index].setEnabled(true);\n        }\n    }\n    \n    public JButton getButton(int index) {\n        return gridButtons[index];\n    }\n    \n    public class MoveListener implements ActionListener {\n        \n        private final int index;\n        \n        private final SimpleTicTacToeGUI view;\n        \n        private final GameModel model;\n\n        public MoveListener(SimpleTicTacToeGUI view, GameModel model,\n                int index) {\n            this.view = view;\n            this.model = model;\n            this.index = index;\n        }\n\n        @Override\n        public void actionPerformed(ActionEvent event) {\n            String s = view.getButton(index).getText();\n            if (!(s.equals(&quot;X&quot;) || s.equals(&quot;O&quot;))) {\n                model.makeMove(index);\n                view.updateGUI();\n                if (model.isGameOver()) {\n                    view.disableButtons();\n                }\n            }\n        }\n        \n    }\n    \n    public class GameModel {\n        \n        private char[] board;\n        private char turn;\n        \n        public GameModel() {\n            resetModel();\n        }\n        \n        public void resetModel() {\n            this.board = new char[9];\n            this.turn = 'X';\n        }\n        \n        public void makeMove(int index) {\n            board[index] = turn;\n            turn = (turn == 'X') ? 'O' : 'X';\n        }\n        \n        public boolean isGameOver() {\n            int[][] indexes = { { 0, 1, 2 }, { 3, 4, 5 }, { 6, 7, 8 },\n                    { 0, 3, 6 }, { 1, 4, 7 }, { 2, 5, 8 }, { 0, 4, 8 },\n                    { 2, 4, 6 } };\n            for (int index = 0; index &lt; indexes.length; index++) {\n                if (checkRow('X', indexes[index])\n                        || checkRow('O', indexes[index])) {\n                    return true;\n                }\n            }\n            return false;\n        }\n        \n        private boolean checkRow(char player, int[] indexes) {\n            for (int index = 0; index &lt; indexes.length; index++) {\n                if (board[indexes[index]] != player) {\n                    return false;\n                }\n            }\n            \n            return true;\n        }\n\n        public char getTurn() {\n            return turn;\n        }\n\n        public char[] getBoard() {\n            return board;\n        }\n        \n    }\n\n}\n</code></pre>\n"}],"owner":{"account_id":26739943,"reputation":1,"user_id":20340896,"display_name":"Mustafa"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":164,"favorite_count":0,"down_vote_count":4,"up_vote_count":0,"accepted_answer_id":74278877,"answer_count":1,"score":-4,"last_activity_date":1667338441,"creation_date":1667313941,"question_id":74277684,"body_markdown":"I&#39;m creating a tic tac toe game, and I have created 2 buttons &quot;Quit&quot; and &quot;Replay&quot;. When I click on any other buttons, those 2 buttons disappear. I&#39;d be happy if you tell what I can do to have them visible when I click on any other buttons.  \r\n\r\nAs you can see in both screenshots, before I click on any buttons, both are visible, but when I click on any button, both disappear, and I have to hover my mouse over them for them appear again.\r\n\r\n[![Click here for the image][2]][2]\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n    Below is all of code\r\n    \r\n   \r\n\r\n    public static void main(String[] args) {\r\n        TickTacToe tik = new TickTacToe();\r\n    }\r\n     \r\n        Random random = new Random();\r\n        JFrame frame = new JFrame();\r\n        JPanel title_panel = new JPanel();\r\n        JPanel button_panel = new JPanel();\r\n        JLabel textfield = new JLabel();\r\n        JButton[] buttons_array = new JButton[9];\r\n        int i =0;\r\n        JPanel panel;\r\n         \r\n        JButton Replaybutton,Quitbutton;\r\n        boolean player1_turn;\r\n    \r\n     \r\n        TickTacToe(){\r\n            JButton Replay,Quit;\r\n            Replay = new JButton();\r\n             \r\n            Replay.setText(&quot;Replay?&quot;);\r\n            Replay.setForeground(Color.cyan);\r\n            Replay.setFont(new Font(&quot;Courgette&quot;,Font.BOLD,17));\r\n            Replay.setBackground(new Color(25,60,80));\r\n            Replay.setBounds(70,10, 100,45);\r\n             \r\n            Quit = new JButton();\r\n             \r\n            Quit.setText(&quot;Quit!&quot;);\r\n            Quit.setForeground(Color.black);\r\n            Quit.setFont(new Font(&quot;Courgette&quot;,Font.BOLD,19));\r\n            Quit.setBackground(new Color(145,80,120));\r\n            Quit.setBounds(620, 10, 100, 45);\r\n         \r\n            ////////////////////////////////////////////////////////\r\n             \r\n            frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\r\n            frame.setSize(800,800);\r\n            frame.getContentPane().setBackground(new Color(50,50,50));\r\n            frame.setLayout(new BorderLayout());\r\n            frame.setVisible(true);\r\n            //Below line is for centring our frame in the middle.\r\n            frame.setLocationRelativeTo(null);\r\n             \r\n             \r\n         \r\n            textfield.setBackground(Color.black);\r\n            textfield.setForeground(new Color(80,170,20));\r\n            textfield.setFont(new Font(&quot;Courgette&quot;,Font.PLAIN,50));\r\n            //The below method is for centering our text in the center.\r\n            textfield.setHorizontalAlignment(JLabel.CENTER);\r\n            textfield.setText(&quot;Tik-Tac-Toe&quot;);\r\n            textfield.setOpaque(true);\r\n             \r\n             \r\n             \r\n            title_panel.setLayout(new BorderLayout());\r\n            title_panel.setBounds(0, 0, 800, 100);\r\n             \r\n            button_panel.setLayout(new GridLayout(3,3));\r\n            button_panel.setBackground(new Color(150,150,150));\r\n             \r\n             \r\n         \r\n            for(int i = 0; i &lt;9;i++) {\r\n                buttons_array[i] = new JButton();\r\n                button_panel.add(buttons_array[i]);\r\n                buttons_array[i].setFont(new Font(&quot;InkFree&quot;,Font.BOLD,120));\r\n                buttons_array[i].setFocusable(false);\r\n                buttons_array[i].addActionListener(this);\r\n                 \r\n             \r\n            }\r\n             \r\n         \r\n             \r\n         \r\n            frame.add(Replay);\r\n            frame.add(Quit);\r\n            frame.setResizable(false);\r\n            title_panel.add(textfield);\r\n            frame.add(title_panel,BorderLayout.NORTH);\r\n            frame.add(button_panel);\r\n             \r\n            firstTurn();\r\n        }\r\n         \r\n         \r\n         \r\n        @Override\r\n        public void actionPerformed(ActionEvent e) {\r\n             \r\n            for(int i=0;i&lt;9;i++) {\r\n                if(e.getSource()==buttons_array[i]) {\r\n                     \r\n                    if(player1_turn) {\r\n                        if(buttons_array[i].getText()==&quot;&quot;) {\r\n                            buttons_array[i].setForeground(Color.red);\r\n                            buttons_array[i].setText(&quot;X&quot;);\r\n                            player1_turn =false;\r\n                            textfield.setText(&quot;O Turn&quot;);\r\n                            check();\r\n                             \r\n                        }\r\n                    }\r\n                     \r\n                    else {\r\n                        if(buttons_array[i].getText()==&quot;&quot;) {\r\n                            buttons_array[i].setForeground(Color.blue);\r\n                            buttons_array[i].setText(&quot;O&quot;);\r\n                            player1_turn =true;\r\n                            textfield.setText(&quot;X Turn&quot;);\r\n                            check();\r\n                             \r\n                        }\r\n                    }\r\n                }\r\n                 \r\n            }\r\n             \r\n        }\r\n         \r\n        public void firstTurn() {\r\n             \r\n            try {\r\n                Thread.sleep(1000);\r\n            } catch (InterruptedException e) {\r\n                 \r\n                e.printStackTrace();\r\n            }\r\n             \r\n            if(random.nextInt(2)==0) {\r\n                player1_turn = true;\r\n                textfield.setText(&quot;X Turn&quot;);\r\n                 \r\n            }else if(random.nextInt(2) == 1) {\r\n                 \r\n                player1_turn = false;\r\n                textfield.setText(&quot;O Turn&quot;);\r\n                 \r\n            }\r\n        }\r\n         \r\n        public void check() {\r\n             \r\n            // Checking for x win Conditiotns.\r\n            if(\r\n                    (buttons_array[0].getText() == &quot;X&quot;) &amp;&amp;\r\n                    buttons_array[1].getText() ==  &quot;X&quot; &amp;&amp;\r\n                    buttons_array[2].getText() ==  &quot;X&quot;\r\n                     \r\n                    ) {\r\n                 \r\n                xWins(0,1,2);\r\n            }\r\n             \r\n            if(\r\n                    (buttons_array[3].getText() == &quot;X&quot;) &amp;&amp;\r\n                    buttons_array[4].getText() ==  &quot;X&quot; &amp;&amp;\r\n                    buttons_array[5].getText() ==  &quot;X&quot;\r\n                     \r\n                    ) {\r\n                 \r\n                xWins(3,4,5);\r\n            }\r\n             \r\n            if(\r\n                    (buttons_array[6].getText() == &quot;X&quot;) &amp;&amp;\r\n                    buttons_array[7].getText() == &quot;X&quot; &amp;&amp;\r\n                    buttons_array[8].getText() == &quot;X&quot;\r\n                     \r\n                    ) {\r\n                 \r\n                xWins(6,7,8);\r\n            }\r\n         \r\n            if(\r\n                    (buttons_array[0].getText() == &quot;X&quot;) &amp;&amp;\r\n                    buttons_array[3].getText() ==  &quot;X&quot; &amp;&amp;\r\n                    buttons_array[6].getText() ==  &quot;X&quot;\r\n                     \r\n                    ) {\r\n                 \r\n                xWins(0,3,6);\r\n            }\r\n             \r\n            if(\r\n                    (buttons_array[1].getText() == &quot;X&quot;) &amp;&amp;\r\n                    buttons_array[4].getText() ==  &quot;X&quot; &amp;&amp;\r\n                    buttons_array[7].getText() ==  &quot;X&quot;\r\n                     \r\n                    ) {\r\n                 \r\n                xWins(1,4,7);\r\n            }\r\n             \r\n            if(\r\n                    (buttons_array[2].getText() == &quot;X&quot;) &amp;&amp;\r\n                    buttons_array[5].getText() ==  &quot;X&quot; &amp;&amp;\r\n                    buttons_array[8].getText() ==  &quot;X&quot;\r\n                     \r\n                    ) {\r\n                 \r\n                xWins(2,5,8);\r\n            }\r\n             \r\n            if(\r\n                    (buttons_array[0].getText() == &quot;X&quot;) &amp;&amp;\r\n                    buttons_array[4].getText() == &quot;X&quot; &amp;&amp;\r\n                    buttons_array[8].getText() ==  &quot;X&quot;\r\n                     \r\n                    ) {\r\n                 \r\n                xWins(0,4,8);\r\n            }\r\n             \r\n             \r\n            if(\r\n                    (buttons_array[2].getText() == &quot;X&quot;) &amp;&amp;\r\n                    buttons_array[4].getText() ==  &quot;X&quot; &amp;&amp;\r\n                    buttons_array[6].getText() ==  &quot;X&quot;\r\n                     \r\n                    ) {\r\n                 \r\n                xWins(2,4,6);\r\n            }\r\n             \r\n             \r\n            if(\r\n                    (buttons_array[0].getText() == &quot;O&quot;) &amp;&amp;\r\n                    buttons_array[1].getText() ==  &quot;O&quot;  &amp;&amp;\r\n                    buttons_array[2].getText() ==  &quot;O&quot;\r\n                     \r\n                    ) {\r\n                 \r\n                 \r\n                oWins(0,1,2);\r\n                 \r\n            }\r\n             \r\n            if(\r\n                    (buttons_array[3].getText() == &quot;O&quot;) &amp;&amp;\r\n                    buttons_array[4].getText() ==  &quot;O&quot; &amp;&amp;\r\n                    buttons_array[5].getText() ==  &quot;O&quot;\r\n                     \r\n                    ) {\r\n                 \r\n                oWins(3,4,5);\r\n            }\r\n             \r\n            if(\r\n                    (buttons_array[6].getText() == &quot;O&quot;) &amp;&amp;\r\n                    buttons_array[7].getText() ==  &quot;O&quot; &amp;&amp;\r\n                    buttons_array[8].getText() ==  &quot;O&quot;\r\n                     \r\n                    ) {\r\n                 \r\n                oWins(6,7,8);\r\n            }\r\n             \r\n            if(\r\n                    (buttons_array[0].getText() == &quot;O&quot;) &amp;&amp;\r\n                    buttons_array[3].getText() ==  &quot;O&quot; &amp;&amp;\r\n                    buttons_array[6].getText() ==  &quot;O&quot;\r\n                     \r\n                    ) {\r\n                 \r\n                oWins(0,3,6);\r\n            }\r\n             \r\n            if(\r\n                    (buttons_array[1].getText() == &quot;O&quot;) &amp;&amp;\r\n                    buttons_array[4].getText() ==  &quot;O&quot; &amp;&amp;\r\n                    buttons_array[7].getText() ==  &quot;O&quot;\r\n                     \r\n                    ) {\r\n                 \r\n                oWins(1,4,7);\r\n            }\r\n             \r\n            if(\r\n                    (buttons_array[2].getText() == &quot;O&quot;) &amp;&amp;\r\n                    buttons_array[5].getText() ==  &quot;O&quot; &amp;&amp;\r\n                    buttons_array[8].getText() ==  &quot;O&quot;\r\n                     \r\n                     \r\n                    ) {\r\n                 \r\n                oWins(2,5,8);\r\n            }\r\n             \r\n             \r\n            if(\r\n                    (buttons_array[0].getText() == &quot;O&quot;) &amp;&amp;\r\n                    buttons_array[4].getText() ==  &quot;O&quot; &amp;&amp;\r\n                    buttons_array[8].getText() ==  &quot;O&quot;\r\n                     \r\n                    ) {\r\n                 \r\n                oWins(0,4,8);\r\n            }\r\n             \r\n             \r\n            if(\r\n                    (buttons_array[2].getText() == &quot;O&quot;) &amp;&amp;\r\n                    buttons_array[4].getText() ==  &quot;O&quot; &amp;&amp;\r\n                    buttons_array[6].getText() ==  &quot;O&quot;\r\n                     \r\n                    ) {\r\n                 \r\n                oWins(2,4,6);\r\n             \r\n                 \r\n            }\r\n             \r\n        }\r\n            //////////////////////////////////////////////////////////////////////////////////\r\n                 \r\n               \r\n         \r\n             \r\n         \r\n         \r\n        public void xWins(int a, int b, int c) {\r\n             \r\n            buttons_array[a].setBackground(new Color(50,15,80));\r\n            buttons_array[b].setBackground(new Color(150,15,80));\r\n            buttons_array[c].setBackground(Color.BLACK);\r\n             \r\n            for(int i=0;i&lt;9;i++) {\r\n                buttons_array[i].setEnabled(false);\r\n            }\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/hbaFE.png\r\n  [2]: https://i.stack.imgur.com/EGobg.png","title":"How to keep a button visible when clicking on other buttons?","body":"<p>I'm creating a tic tac toe game, and I have created 2 buttons &quot;Quit&quot; and &quot;Replay&quot;. When I click on any other buttons, those 2 buttons disappear. I'd be happy if you tell what I can do to have them visible when I click on any other buttons.</p>\n<p>As you can see in both screenshots, before I click on any buttons, both are visible, but when I click on any button, both disappear, and I have to hover my mouse over them for them appear again.</p>\n<p><a href=\"https://i.stack.imgur.com/EGobg.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/EGobg.png\" alt=\"Click here for the image\" /></a></p>\n<p><a href=\"https://i.stack.imgur.com/hbaFE.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/hbaFE.png\" alt=\"enter image description here\" /></a></p>\n<pre><code>Below is all of code\n\n\n\npublic static void main(String[] args) {\n    TickTacToe tik = new TickTacToe();\n}\n \n    Random random = new Random();\n    JFrame frame = new JFrame();\n    JPanel title_panel = new JPanel();\n    JPanel button_panel = new JPanel();\n    JLabel textfield = new JLabel();\n    JButton[] buttons_array = new JButton[9];\n    int i =0;\n    JPanel panel;\n     \n    JButton Replaybutton,Quitbutton;\n    boolean player1_turn;\n\n \n    TickTacToe(){\n        JButton Replay,Quit;\n        Replay = new JButton();\n         \n        Replay.setText(&quot;Replay?&quot;);\n        Replay.setForeground(Color.cyan);\n        Replay.setFont(new Font(&quot;Courgette&quot;,Font.BOLD,17));\n        Replay.setBackground(new Color(25,60,80));\n        Replay.setBounds(70,10, 100,45);\n         \n        Quit = new JButton();\n         \n        Quit.setText(&quot;Quit!&quot;);\n        Quit.setForeground(Color.black);\n        Quit.setFont(new Font(&quot;Courgette&quot;,Font.BOLD,19));\n        Quit.setBackground(new Color(145,80,120));\n        Quit.setBounds(620, 10, 100, 45);\n     \n        ////////////////////////////////////////////////////////\n         \n        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\n        frame.setSize(800,800);\n        frame.getContentPane().setBackground(new Color(50,50,50));\n        frame.setLayout(new BorderLayout());\n        frame.setVisible(true);\n        //Below line is for centring our frame in the middle.\n        frame.setLocationRelativeTo(null);\n         \n         \n     \n        textfield.setBackground(Color.black);\n        textfield.setForeground(new Color(80,170,20));\n        textfield.setFont(new Font(&quot;Courgette&quot;,Font.PLAIN,50));\n        //The below method is for centering our text in the center.\n        textfield.setHorizontalAlignment(JLabel.CENTER);\n        textfield.setText(&quot;Tik-Tac-Toe&quot;);\n        textfield.setOpaque(true);\n         \n         \n         \n        title_panel.setLayout(new BorderLayout());\n        title_panel.setBounds(0, 0, 800, 100);\n         \n        button_panel.setLayout(new GridLayout(3,3));\n        button_panel.setBackground(new Color(150,150,150));\n         \n         \n     \n        for(int i = 0; i &lt;9;i++) {\n            buttons_array[i] = new JButton();\n            button_panel.add(buttons_array[i]);\n            buttons_array[i].setFont(new Font(&quot;InkFree&quot;,Font.BOLD,120));\n            buttons_array[i].setFocusable(false);\n            buttons_array[i].addActionListener(this);\n             \n         \n        }\n         \n     \n         \n     \n        frame.add(Replay);\n        frame.add(Quit);\n        frame.setResizable(false);\n        title_panel.add(textfield);\n        frame.add(title_panel,BorderLayout.NORTH);\n        frame.add(button_panel);\n         \n        firstTurn();\n    }\n     \n     \n     \n    @Override\n    public void actionPerformed(ActionEvent e) {\n         \n        for(int i=0;i&lt;9;i++) {\n            if(e.getSource()==buttons_array[i]) {\n                 \n                if(player1_turn) {\n                    if(buttons_array[i].getText()==&quot;&quot;) {\n                        buttons_array[i].setForeground(Color.red);\n                        buttons_array[i].setText(&quot;X&quot;);\n                        player1_turn =false;\n                        textfield.setText(&quot;O Turn&quot;);\n                        check();\n                         \n                    }\n                }\n                 \n                else {\n                    if(buttons_array[i].getText()==&quot;&quot;) {\n                        buttons_array[i].setForeground(Color.blue);\n                        buttons_array[i].setText(&quot;O&quot;);\n                        player1_turn =true;\n                        textfield.setText(&quot;X Turn&quot;);\n                        check();\n                         \n                    }\n                }\n            }\n             \n        }\n         \n    }\n     \n    public void firstTurn() {\n         \n        try {\n            Thread.sleep(1000);\n        } catch (InterruptedException e) {\n             \n            e.printStackTrace();\n        }\n         \n        if(random.nextInt(2)==0) {\n            player1_turn = true;\n            textfield.setText(&quot;X Turn&quot;);\n             \n        }else if(random.nextInt(2) == 1) {\n             \n            player1_turn = false;\n            textfield.setText(&quot;O Turn&quot;);\n             \n        }\n    }\n     \n    public void check() {\n         \n        // Checking for x win Conditiotns.\n        if(\n                (buttons_array[0].getText() == &quot;X&quot;) &amp;&amp;\n                buttons_array[1].getText() ==  &quot;X&quot; &amp;&amp;\n                buttons_array[2].getText() ==  &quot;X&quot;\n                 \n                ) {\n             \n            xWins(0,1,2);\n        }\n         \n        if(\n                (buttons_array[3].getText() == &quot;X&quot;) &amp;&amp;\n                buttons_array[4].getText() ==  &quot;X&quot; &amp;&amp;\n                buttons_array[5].getText() ==  &quot;X&quot;\n                 \n                ) {\n             \n            xWins(3,4,5);\n        }\n         \n        if(\n                (buttons_array[6].getText() == &quot;X&quot;) &amp;&amp;\n                buttons_array[7].getText() == &quot;X&quot; &amp;&amp;\n                buttons_array[8].getText() == &quot;X&quot;\n                 \n                ) {\n             \n            xWins(6,7,8);\n        }\n     \n        if(\n                (buttons_array[0].getText() == &quot;X&quot;) &amp;&amp;\n                buttons_array[3].getText() ==  &quot;X&quot; &amp;&amp;\n                buttons_array[6].getText() ==  &quot;X&quot;\n                 \n                ) {\n             \n            xWins(0,3,6);\n        }\n         \n        if(\n                (buttons_array[1].getText() == &quot;X&quot;) &amp;&amp;\n                buttons_array[4].getText() ==  &quot;X&quot; &amp;&amp;\n                buttons_array[7].getText() ==  &quot;X&quot;\n                 \n                ) {\n             \n            xWins(1,4,7);\n        }\n         \n        if(\n                (buttons_array[2].getText() == &quot;X&quot;) &amp;&amp;\n                buttons_array[5].getText() ==  &quot;X&quot; &amp;&amp;\n                buttons_array[8].getText() ==  &quot;X&quot;\n                 \n                ) {\n             \n            xWins(2,5,8);\n        }\n         \n        if(\n                (buttons_array[0].getText() == &quot;X&quot;) &amp;&amp;\n                buttons_array[4].getText() == &quot;X&quot; &amp;&amp;\n                buttons_array[8].getText() ==  &quot;X&quot;\n                 \n                ) {\n             \n            xWins(0,4,8);\n        }\n         \n         \n        if(\n                (buttons_array[2].getText() == &quot;X&quot;) &amp;&amp;\n                buttons_array[4].getText() ==  &quot;X&quot; &amp;&amp;\n                buttons_array[6].getText() ==  &quot;X&quot;\n                 \n                ) {\n             \n            xWins(2,4,6);\n        }\n         \n         \n        if(\n                (buttons_array[0].getText() == &quot;O&quot;) &amp;&amp;\n                buttons_array[1].getText() ==  &quot;O&quot;  &amp;&amp;\n                buttons_array[2].getText() ==  &quot;O&quot;\n                 \n                ) {\n             \n             \n            oWins(0,1,2);\n             \n        }\n         \n        if(\n                (buttons_array[3].getText() == &quot;O&quot;) &amp;&amp;\n                buttons_array[4].getText() ==  &quot;O&quot; &amp;&amp;\n                buttons_array[5].getText() ==  &quot;O&quot;\n                 \n                ) {\n             \n            oWins(3,4,5);\n        }\n         \n        if(\n                (buttons_array[6].getText() == &quot;O&quot;) &amp;&amp;\n                buttons_array[7].getText() ==  &quot;O&quot; &amp;&amp;\n                buttons_array[8].getText() ==  &quot;O&quot;\n                 \n                ) {\n             \n            oWins(6,7,8);\n        }\n         \n        if(\n                (buttons_array[0].getText() == &quot;O&quot;) &amp;&amp;\n                buttons_array[3].getText() ==  &quot;O&quot; &amp;&amp;\n                buttons_array[6].getText() ==  &quot;O&quot;\n                 \n                ) {\n             \n            oWins(0,3,6);\n        }\n         \n        if(\n                (buttons_array[1].getText() == &quot;O&quot;) &amp;&amp;\n                buttons_array[4].getText() ==  &quot;O&quot; &amp;&amp;\n                buttons_array[7].getText() ==  &quot;O&quot;\n                 \n                ) {\n             \n            oWins(1,4,7);\n        }\n         \n        if(\n                (buttons_array[2].getText() == &quot;O&quot;) &amp;&amp;\n                buttons_array[5].getText() ==  &quot;O&quot; &amp;&amp;\n                buttons_array[8].getText() ==  &quot;O&quot;\n                 \n                 \n                ) {\n             \n            oWins(2,5,8);\n        }\n         \n         \n        if(\n                (buttons_array[0].getText() == &quot;O&quot;) &amp;&amp;\n                buttons_array[4].getText() ==  &quot;O&quot; &amp;&amp;\n                buttons_array[8].getText() ==  &quot;O&quot;\n                 \n                ) {\n             \n            oWins(0,4,8);\n        }\n         \n         \n        if(\n                (buttons_array[2].getText() == &quot;O&quot;) &amp;&amp;\n                buttons_array[4].getText() ==  &quot;O&quot; &amp;&amp;\n                buttons_array[6].getText() ==  &quot;O&quot;\n                 \n                ) {\n             \n            oWins(2,4,6);\n         \n             \n        }\n         \n    }\n        //////////////////////////////////////////////////////////////////////////////////\n             \n           \n     \n         \n     \n     \n    public void xWins(int a, int b, int c) {\n         \n        buttons_array[a].setBackground(new Color(50,15,80));\n        buttons_array[b].setBackground(new Color(150,15,80));\n        buttons_array[c].setBackground(Color.BLACK);\n         \n        for(int i=0;i&lt;9;i++) {\n            buttons_array[i].setEnabled(false);\n        }\n</code></pre>\n"},{"tags":["java","ubuntu","raspberry-pi","raspberry-pi4","java-19"],"comments":[{"owner":{"account_id":16016658,"reputation":64,"user_id":11559187,"display_name":"Volzy"},"score":0,"creation_date":1667338504,"post_id":74281825,"comment_id":131143333,"body_markdown":"Did you try with javaFX mediaplayer? It is just one line of code and it is works much better with the default config","body":"Did you try with javaFX mediaplayer? It is just one line of code and it is works much better with the default config"},{"owner":{"account_id":10877744,"reputation":1088,"user_id":7997683,"display_name":"Roy Ash"},"score":0,"creation_date":1667339506,"post_id":74281825,"comment_id":131143564,"body_markdown":"@Volzy correct me if I wrong, but JavaFX doesn&#39;t included in JRE anymore, correct?\ncan you give an example?","body":"@Volzy correct me if I wrong, but JavaFX doesn&#39;t included in JRE anymore, correct? can you give an example?"},{"owner":{"account_id":16016658,"reputation":64,"user_id":11559187,"display_name":"Volzy"},"score":1,"creation_date":1667340065,"post_id":74281825,"comment_id":131143695,"body_markdown":"it&#39;s correct but you said you are using maven. You can add it as maven dependency","body":"it&#39;s correct but you said you are using maven. You can add it as maven dependency"},{"owner":{"account_id":10877744,"reputation":1088,"user_id":7997683,"display_name":"Roy Ash"},"score":0,"creation_date":1667340238,"post_id":74281825,"comment_id":131143726,"body_markdown":"now I&#39;m trying to figure out how to open the WAV file from resources directory, (`Media` constructor only recieves String of the location of the file)","body":"now I&#39;m trying to figure out how to open the WAV file from resources directory, (<code>Media</code> constructor only recieves String of the location of the file)"},{"owner":{"account_id":10877744,"reputation":1088,"user_id":7997683,"display_name":"Roy Ash"},"score":0,"creation_date":1667341327,"post_id":74281825,"comment_id":131143914,"body_markdown":"@Volzy as I can see, it guides me toward a GUI application, I want my application to be a CLI app.\n\nI keep getting errors like `Error: JavaFX runtime components are missing, and are required to run this application` after I extended my class to be type of `Application` even after I wrote `primaryStage.show();` inside the `start` method.","body":"@Volzy as I can see, it guides me toward a GUI application, I want my application to be a CLI app.  I keep getting errors like <code>Error: JavaFX runtime components are missing, and are required to run this application</code> after I extended my class to be type of <code>Application</code> even after I wrote <code>primaryStage.show();</code> inside the <code>start</code> method."},{"owner":{"account_id":10877744,"reputation":1088,"user_id":7997683,"display_name":"Roy Ash"},"score":0,"creation_date":1667344040,"post_id":74281825,"comment_id":131144452,"body_markdown":"In addition, it seems that it make me dependent on `javafx-maven-plugin` and I can only run it via `mvn javafx:run` instead of `java -jar &lt;my jar&gt;.jar` and it&#39;s not acceptable","body":"In addition, it seems that it make me dependent on <code>javafx-maven-plugin</code> and I can only run it via <code>mvn javafx:run</code> instead of <code>java -jar &lt;my jar&gt;.jar</code> and it&#39;s not acceptable"},{"owner":{"account_id":16016658,"reputation":64,"user_id":11559187,"display_name":"Volzy"},"score":0,"creation_date":1667377412,"post_id":74281825,"comment_id":131150187,"body_markdown":"Yes javaFx include GUI and cli components like mediaplayer. You get those errors because you must download the javaFX runtime and add it to the classpath as vm argument","body":"Yes javaFx include GUI and cli components like mediaplayer. You get those errors because you must download the javaFX runtime and add it to the classpath as vm argument"},{"owner":{"account_id":3211603,"reputation":289297,"user_id":2711488,"display_name":"Holger"},"score":1,"creation_date":1667387850,"post_id":74281825,"comment_id":131153885,"body_markdown":"You can not read an input stream multiple times. It’s a bad idea to use the same input stream for multiple playback attempts when you don’t know whether the previous attempt(s) have read data from it (or how much).","body":"You can not read an input stream multiple times. It’s a bad idea to use the same input stream for multiple playback attempts when you don’t know whether the previous attempt(s) have read data from it (or how much)."},{"owner":{"account_id":10877744,"reputation":1088,"user_id":7997683,"display_name":"Roy Ash"},"score":0,"creation_date":1667390557,"post_id":74281825,"comment_id":131154717,"body_markdown":"@Holger playing the clip multiple times works, this is not the problem, the problem is about the mixers only.","body":"@Holger playing the clip multiple times works, this is not the problem, the problem is about the mixers only."},{"owner":{"account_id":10877744,"reputation":1088,"user_id":7997683,"display_name":"Roy Ash"},"score":0,"creation_date":1667390927,"post_id":74281825,"comment_id":131154833,"body_markdown":"@Volzy I&#39;m building a standalone jar that need to work on any (main) OS, in addition I&#39;m already creating jar with dependencies so I can&#39;t demand that the users will need to install additional runtimes and play with classpath parameters. if you want to see what I&#39;m already doing, the project is in https://github.com/ashr123/red-alert-listener","body":"@Volzy I&#39;m building a standalone jar that need to work on any (main) OS, in addition I&#39;m already creating jar with dependencies so I can&#39;t demand that the users will need to install additional runtimes and play with classpath parameters. if you want to see what I&#39;m already doing, the project is in <a href=\"https://github.com/ashr123/red-alert-listener\" rel=\"nofollow noreferrer\">github.com/ashr123/red-alert-listener</a>"},{"owner":{"account_id":16016658,"reputation":64,"user_id":11559187,"display_name":"Volzy"},"score":0,"creation_date":1667392192,"post_id":74281825,"comment_id":131155253,"body_markdown":"Well i don&#39;t see the problem with dependency if it&#39;s not a malware you can still create an application easy to launch to launch the complex application. Java it&#39;s not &quot;plug and play&quot; it&#39;s an old language if you want plug and play support you should go for a modern language","body":"Well i don&#39;t see the problem with dependency if it&#39;s not a malware you can still create an application easy to launch to launch the complex application. Java it&#39;s not &quot;plug and play&quot; it&#39;s an old language if you want plug and play support you should go for a modern language"},{"owner":{"account_id":10877744,"reputation":1088,"user_id":7997683,"display_name":"Roy Ash"},"score":0,"creation_date":1667394994,"post_id":74281825,"comment_id":131156256,"body_markdown":"I know it&#39;s not a malware, I just want to keep it simple for people to download the jar-with-dependencies jar and run it via `java -jar`, it worked so far.. it still works on my MacOS and on Windows 10, I don&#39;t have Ubuntu installed on &quot;regular&quot; computer so I didn&#39;t check that case","body":"I know it&#39;s not a malware, I just want to keep it simple for people to download the jar-with-dependencies jar and run it via <code>java -jar</code>, it worked so far.. it still works on my MacOS and on Windows 10, I don&#39;t have Ubuntu installed on &quot;regular&quot; computer so I didn&#39;t check that case"},{"owner":{"account_id":16016658,"reputation":64,"user_id":11559187,"display_name":"Volzy"},"score":0,"creation_date":1667408143,"post_id":74281825,"comment_id":131161741,"body_markdown":"I repeat. Try if it&#39;s a raspberry issue, trying on normal pc. Otherwise consider using mediaplayer. I don&#39;t see usually people that use Clip. I see everyone that use the javafx mediaplayer. Or you if you don&#39;t like javafx then find another player. There are many library to play music. If you need to run on linux you can launch a music process with ProcessBuilder","body":"I repeat. Try if it&#39;s a raspberry issue, trying on normal pc. Otherwise consider using mediaplayer. I don&#39;t see usually people that use Clip. I see everyone that use the javafx mediaplayer. Or you if you don&#39;t like javafx then find another player. There are many library to play music. If you need to run on linux you can launch a music process with ProcessBuilder"},{"owner":{"account_id":10877744,"reputation":1088,"user_id":7997683,"display_name":"Roy Ash"},"score":0,"creation_date":1667410857,"post_id":74281825,"comment_id":131162758,"body_markdown":"This is indeed seems to be a raspberry pi issue (on Ubuntu 22.10 at least), on other computers it works just fine, the goal is to find more long-term and **stable** lightweight solution that doesn&#39;t needed to be run with extra flags and parameters or tinkering with environment variables and packages outside the jar with dependencies.","body":"This is indeed seems to be a raspberry pi issue (on Ubuntu 22.10 at least), on other computers it works just fine, the goal is to find more long-term and <b>stable</b> lightweight solution that doesn&#39;t needed to be run with extra flags and parameters or tinkering with environment variables and packages outside the jar with dependencies."}],"owner":{"account_id":10877744,"reputation":1088,"user_id":7997683,"display_name":"Roy Ash"},"comment_count":14,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":83,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1667338339,"creation_date":1667337003,"question_id":74281825,"body_markdown":"I&#39;m using Raspberry Pi with Ubuntu 22.10 and Java 19.\r\n\r\nI&#39;m trying to play a sound with the following code:\r\n\r\n```java\r\nprivate static void testMixers() throws IOException, UnsupportedAudioFileException\r\n{\r\n\ttry (AudioInputStream audioInputStream = AudioSystem.getAudioInputStream(new BufferedInputStream(Objects.requireNonNull(Listener.class.getResourceAsStream(&quot;/alarmSound.wav&quot;)))))\r\n\t{\r\n\t\tfinal Scanner scanner = new Scanner(System.in);\r\n\t\tfor (Mixer.Info info : AudioSystem.getMixerInfo())\r\n\t\t{\r\n\t\t\tSystem.out.println(&quot;Testing sound for mixer \\&quot;&quot; + info + &quot;\\&quot;...&quot;);\r\n\t\t\ttry (Clip clip = AudioSystem.getClip(info))\r\n\t\t\t{\r\n\t\t\t\tclip.open(audioInputStream);\r\n\t\t\t\tclip.setFramePosition(0);\r\n\t\t\t\tclip.start();\r\n\t\t\t\tSystem.out.println(&quot;Did you hear any sound? (true|false)&quot;);\r\n\t\t\t\tif (Boolean.parseBoolean(scanner.nextLine()))\r\n\t\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tcatch (Exception e)\r\n\t\t\t{\r\n\t\t\t\tSystem.out.println(e);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\tSystem.out.println(&quot;Mixer not found!&quot;);\r\n}\r\n```\r\n\r\n`alarmSound.wav` is under `src/main/resources` (this is a Maven project).\r\n\r\n`AudioSystem.getMixerInfo()` gives me the following `Mixer.Info[]`:\r\n\r\n - `Port Headphones [hw:0], version 5.19.0-1006-raspi`\r\n - `Port vc4hdmi0 [hw:1], version 5.19.0-1006-raspi`\r\n - `Port vc4hdmi1 [hw:2], version 5.19.0-1006-raspi`\r\n - `Headphones [default], version 5.19.0-1006-raspi`\r\n - `Headphones [plughw:0,0], version 5.19.0-1006-raspi`\r\n - `vc4hdmi0 [plughw:1,0], version 5.19.0-1006-raspi`\r\n - `vc4hdmi1 [plughw:2,0], version 5.19.0-1006-raspi`\r\n\r\nOnly the `Headphones` Mixers don&#39;t give the error:\r\n\r\n&gt; java.lang.IllegalArgumentException: Line unsupported: interface Clip supporting format PCM_SIGNED unknown sample rate, 16 bit, stereo, 4 bytes/frame, big-endian\r\n\r\nI didn&#39;t tested the headphone jack.\r\n\r\nThis is completely different from Ubuntu 22.04 which gave more `Mixer.Info`s.\r\n\r\nIs there any workaround? it seems that every Ubuntu version requires different workaround for being able to play a sound that can be heard not through the headphones (but from bluetooth speakers or via HDMI for example).","title":"Can&#39;t hear sound from bluetooth speaker","body":"<p>I'm using Raspberry Pi with Ubuntu 22.10 and Java 19.</p>\n<p>I'm trying to play a sound with the following code:</p>\n<pre class=\"lang-java prettyprint-override\"><code>private static void testMixers() throws IOException, UnsupportedAudioFileException\n{\n    try (AudioInputStream audioInputStream = AudioSystem.getAudioInputStream(new BufferedInputStream(Objects.requireNonNull(Listener.class.getResourceAsStream(&quot;/alarmSound.wav&quot;)))))\n    {\n        final Scanner scanner = new Scanner(System.in);\n        for (Mixer.Info info : AudioSystem.getMixerInfo())\n        {\n            System.out.println(&quot;Testing sound for mixer \\&quot;&quot; + info + &quot;\\&quot;...&quot;);\n            try (Clip clip = AudioSystem.getClip(info))\n            {\n                clip.open(audioInputStream);\n                clip.setFramePosition(0);\n                clip.start();\n                System.out.println(&quot;Did you hear any sound? (true|false)&quot;);\n                if (Boolean.parseBoolean(scanner.nextLine()))\n                    return;\n            }\n            catch (Exception e)\n            {\n                System.out.println(e);\n            }\n        }\n    }\n    System.out.println(&quot;Mixer not found!&quot;);\n}\n</code></pre>\n<p><code>alarmSound.wav</code> is under <code>src/main/resources</code> (this is a Maven project).</p>\n<p><code>AudioSystem.getMixerInfo()</code> gives me the following <code>Mixer.Info[]</code>:</p>\n<ul>\n<li><code>Port Headphones [hw:0], version 5.19.0-1006-raspi</code></li>\n<li><code>Port vc4hdmi0 [hw:1], version 5.19.0-1006-raspi</code></li>\n<li><code>Port vc4hdmi1 [hw:2], version 5.19.0-1006-raspi</code></li>\n<li><code>Headphones [default], version 5.19.0-1006-raspi</code></li>\n<li><code>Headphones [plughw:0,0], version 5.19.0-1006-raspi</code></li>\n<li><code>vc4hdmi0 [plughw:1,0], version 5.19.0-1006-raspi</code></li>\n<li><code>vc4hdmi1 [plughw:2,0], version 5.19.0-1006-raspi</code></li>\n</ul>\n<p>Only the <code>Headphones</code> Mixers don't give the error:</p>\n<blockquote>\n<p>java.lang.IllegalArgumentException: Line unsupported: interface Clip supporting format PCM_SIGNED unknown sample rate, 16 bit, stereo, 4 bytes/frame, big-endian</p>\n</blockquote>\n<p>I didn't tested the headphone jack.</p>\n<p>This is completely different from Ubuntu 22.04 which gave more <code>Mixer.Info</code>s.</p>\n<p>Is there any workaround? it seems that every Ubuntu version requires different workaround for being able to play a sound that can be heard not through the headphones (but from bluetooth speakers or via HDMI for example).</p>\n"},{"tags":["java","recursion","hashmap"],"comments":[{"owner":{"account_id":23959668,"reputation":26587,"user_id":17949945,"display_name":"Alexander Ivanchenko"},"score":0,"creation_date":1667327163,"post_id":74280095,"comment_id":131140167,"body_markdown":"Hello and Welcome! Please, you English in the code you&#39;re exposing. And the code you&#39;ve posted is incomplete (for instance, where `result` comes from?). Can you provide a [Minimal reproducible example](https://stackoverflow.com/help/minimal-reproducible-example)?","body":"Hello and Welcome! Please, you English in the code you&#39;re exposing. And the code you&#39;ve posted is incomplete (for instance, where <code>result</code> comes from?). Can you provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">Minimal reproducible example</a>?"},{"owner":{"account_id":26798208,"reputation":1,"user_id":20390596,"display_name":"Mad_Programmer"},"score":0,"creation_date":1667327852,"post_id":74280095,"comment_id":131140384,"body_markdown":"Result is a global variable which is empty when the method is called. The method is called with a list of all keys: doit((HashMap&lt;String, List&lt;ZeugnisNoteMitAa&gt;&gt;) e.getValue(), keyList, 0, 0);","body":"Result is a global variable which is empty when the method is called. The method is called with a list of all keys: doit((HashMap&lt;String, List&lt;ZeugnisNoteMitAa&gt;&gt;) e.getValue(), keyList, 0, 0);"},{"owner":{"account_id":2792262,"reputation":163847,"user_id":2402272,"accept_rate":85,"display_name":"John Bollinger"},"score":0,"creation_date":1667328217,"post_id":74280095,"comment_id":131140489,"body_markdown":"I guess you mean an *instance* variable or maybe even a class variable, since there are no global variables in Java.  Leaving aside the fact that using such a variable for the apparent purpose is terrible form, we need to know the *type* of that variable to understand the behavior of your method.  And if `loesugGefunden()` modifies its argument or any instance or class state then we need to know about that, too.","body":"I guess you mean an <i>instance</i> variable or maybe even a class variable, since there are no global variables in Java.  Leaving aside the fact that using such a variable for the apparent purpose is terrible form, we need to know the <i>type</i> of that variable to understand the behavior of your method.  And if <code>loesugGefunden()</code> modifies its argument or any instance or class state then we need to know about that, too."},{"owner":{"account_id":26798208,"reputation":1,"user_id":20390596,"display_name":"Mad_Programmer"},"score":0,"creation_date":1667328870,"post_id":74280095,"comment_id":131140650,"body_markdown":"private HashMap&lt;String, ZeugnisNoteMitAa&gt; result;                        \n private void loesungGefunden(HashMap&lt;String, ZeugnisNoteMitAa&gt;map)\n    {\n        for (Map.Entry e : map.entrySet())\n        {\n            ZeugnisNoteMitAa note = (ZeugnisNoteMitAa) e.getValue();\n            System.out.println(e.getKey()+&quot; &quot;+ note.getZeugnisNote().getSchuleFach().getUnterrichtsfach().getAnzeigeform()+&quot; &quot;\n                    + note.getZeugnisNote().getNote()+ &quot;\\n&quot;);\n        }\n    }","body":"private HashMap&lt;String, ZeugnisNoteMitAa&gt; result;                          private void loesungGefunden(HashMap&lt;String, ZeugnisNoteMitAa&gt;map)     {         for (Map.Entry e : map.entrySet())         {             ZeugnisNoteMitAa note = (ZeugnisNoteMitAa) e.getValue();             System.out.println(e.getKey()+&quot; &quot;+ note.getZeugnisNote().getSchuleFach().getUnterrichtsfach().g&zwnj;&#8203;etAnzeigeform()+&quot; &quot;                     + note.getZeugnisNote().getNote()+ &quot;\\n&quot;);         }     }"},{"owner":{"account_id":23959668,"reputation":26587,"user_id":17949945,"display_name":"Alexander Ivanchenko"},"score":1,"creation_date":1667329690,"post_id":74280095,"comment_id":131140872,"body_markdown":"Please, use the *edit* button or this [link](https://stackoverflow.com/posts/74280095/edit) to update the question. **Don&#39;t** post the code, or other clarifications that are crucial to the problem in the comments - update the question (and then you can use comments to notify users that have commented the question earlier that it has been updated).","body":"Please, use the <i>edit</i> button or this <a href=\"https://stackoverflow.com/posts/74280095/edit\">link</a> to update the question. <b>Don&#39;t</b> post the code, or other clarifications that are crucial to the problem in the comments - update the question (and then you can use comments to notify users that have commented the question earlier that it has been updated)."},{"owner":{"account_id":26798208,"reputation":1,"user_id":20390596,"display_name":"Mad_Programmer"},"score":0,"creation_date":1667331413,"post_id":74280095,"comment_id":131141406,"body_markdown":"Added method loesunggefunden, member variable result and constructor","body":"Added method loesunggefunden, member variable result and constructor"},{"owner":{"account_id":18044315,"reputation":1227,"user_id":13115701,"display_name":"Paul Marcelin Bejan"},"score":0,"creation_date":1667334681,"post_id":74280095,"comment_id":131142310,"body_markdown":"Can you share ZeugnisNoteMitAa ?","body":"Can you share ZeugnisNoteMitAa ?"},{"owner":{"account_id":26798208,"reputation":1,"user_id":20390596,"display_name":"Mad_Programmer"},"score":0,"creation_date":1667337934,"post_id":74280095,"comment_id":131143188,"body_markdown":"Shared ZeugnisNoteMitAa. For copyright reasons I can&#39;t share classes used inside this class.","body":"Shared ZeugnisNoteMitAa. For copyright reasons I can&#39;t share classes used inside this class."},{"owner":{"account_id":18044315,"reputation":1227,"user_id":13115701,"display_name":"Paul Marcelin Bejan"},"score":0,"creation_date":1667386674,"post_id":74280095,"comment_id":131153467,"body_markdown":"I wrote an example to see if this is what you want to achieve: https://shrib.com/#Frederick6zMddZY \nLet me know if I understand it well.","body":"I wrote an example to see if this is what you want to achieve: <a href=\"https://shrib.com/#Frederick6zMddZY\" rel=\"nofollow noreferrer\">shrib.com/#Frederick6zMddZY</a>  Let me know if I understand it well."},{"owner":{"account_id":9124873,"reputation":170,"user_id":6789045,"accept_rate":25,"display_name":"Michael Konz"},"score":0,"creation_date":1667473975,"post_id":74280095,"comment_id":131177435,"body_markdown":"Not exactly, there must be one x and one y in each solution. The difficulty is that x1 y1 is the same as y1 x1 and should only appear once","body":"Not exactly, there must be one x and one y in each solution. The difficulty is that x1 y1 is the same as y1 x1 and should only appear once"}],"owner":{"account_id":26798208,"reputation":1,"user_id":20390596,"display_name":"Mad_Programmer"},"comment_count":10,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":75,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1667337863,"creation_date":1667326206,"question_id":74280095,"body_markdown":"I have a Java Hashmap which contains Strings as key and a list of complex elements as value for each key.\r\nI want to find all possible combinations of values, if exactly one value must be chosen for each key.\r\nThe following code gives me all possible combinations. Unfortunately, some combinations are returned more than once.\r\n\r\nFor the key /value combinations\r\n\r\n\r\nW – w1, w2 \r\n\r\n\r\nX – x1, x2\r\n\r\n\r\nY – y1, y2\r\n\r\n\r\nZ – z1,z2\r\n\r\nThe code returns:\r\nw1\r\n\r\n\r\nw1, x1\r\n\r\n\r\nw1, x1, y1\r\n\r\n\r\nw1, x1, y1, z1\r\n\r\n\r\nw1, x1, y1, z2\r\n\r\n\r\nw1, x1, y2, z2\r\n\r\n\r\nw1, x1, y2, z1\r\n\r\n\r\nw1, x1, y2, z2 (already found before)\r\n\r\nAny hints how I can avoid getting combinations more than once?\r\n\r\n \r\n\r\n    private HashMap&lt;String, ZeugnisNoteMitAa&gt; result;\r\n\r\n \r\n\r\n    public DeutschCheck(final String bezeichner, final List&lt;String&gt; schulartenList) {\r\n            super(bezeichner, schulartenList);\r\n            mloesungGefunden =false;\r\n            mbeste = new HashMap&lt;&gt;();\r\n            result = new HashMap&lt;&gt;();\r\n            mbearbeitet = new HashMap&lt;&gt;();\r\n    \r\n        }\r\n    private void loesungGefunden(HashMap&lt;String, ZeugnisNoteMitAa&gt;map)\r\n        {\r\n            for (Map.Entry e : map.entrySet())\r\n            {\r\n                ZeugnisNoteMitAa note = (ZeugnisNoteMitAa) e.getValue();\r\n                System.out.println(e.getKey()+&quot; &quot;+ note.getZeugnisNote().getSchuleFach().getUnterrichtsfach().getAnzeigeform()+&quot; &quot;\r\n                        + note.getZeugnisNote().getNote()+ &quot;\\n&quot;);\r\n            }\r\n        }\r\n\r\n    private void doit(HashMap &lt; String, List &lt; ZeugnisNoteMitAa &gt;&gt; map, List &lt; String &gt; keys, int currentKey, int currentValue) {\r\n      if (currentKey &gt;= keys.size()) {\r\n        return;\r\n      } else {\r\n        List &lt; ZeugnisNoteMitAa &gt; currentValues = map.get(keys.get(currentKey));\r\n        if (currentValue &lt; currentValues.size()) {\r\n          result.put(keys.get(currentKey), currentValues.get(currentValue));\r\n          boolean found = true;\r\n          for (String current: keys) {\r\n            if (result.get(current) == null) {\r\n              found = false;\r\n            }\r\n          }\r\n          if (found) {\r\n            //Print the current selection\r\n            loesungGefunden(result);\r\n          }\r\n    \r\n          doit(map, keys, currentKey + 1, 0);\r\n          doit(map, keys, currentKey, currentValue + 1);\r\n    \r\n        }\r\n      }\r\n    }\r\n\r\n    public class ZeugnisNoteMitAa {\r\n    \r\n    \tprivate final ZeugnisNote mZeugnisNote;\r\n    \tprivate final SchuelerFachwahlFachAa mAa;\r\n    \t\r\n    \tpublic ZeugnisNoteMitAa(final ZeugnisNote zn, final SchuelerFachwahlFachAa aa) {\r\n    \t\tmZeugnisNote = zn;\r\n    \t\tmAa = aa;\r\n    \t}\r\n    \t\r\n    \tpublic ZeugnisNote getZeugnisNote() {\r\n    \t\treturn mZeugnisNote;\r\n    \t}\r\n    \t\r\n    \tpublic SchuelerFachwahlFachAa getAa() {\r\n    \t\treturn mAa;\r\n    \t}\r\n    \t\r\n    \tpublic SchuelerOberstufe getSchuelerOberstufe() {\r\n    \t\treturn mAa.getSchuelerFachwahlFach().getSchuelerFachwahl().getSchuelerOberstufe();\r\n    \t}\r\n\t\r\n\r\nI tried to find out how the machine steps through the Hashmap (noted above). I can’t find out, how to do the recursive method call that each combination only occurs once.\r\n\r\n","title":"Java recursive iteration through hashmap returns values multiple times","body":"<p>I have a Java Hashmap which contains Strings as key and a list of complex elements as value for each key.\nI want to find all possible combinations of values, if exactly one value must be chosen for each key.\nThe following code gives me all possible combinations. Unfortunately, some combinations are returned more than once.</p>\n<p>For the key /value combinations</p>\n<p>W – w1, w2</p>\n<p>X – x1, x2</p>\n<p>Y – y1, y2</p>\n<p>Z – z1,z2</p>\n<p>The code returns:\nw1</p>\n<p>w1, x1</p>\n<p>w1, x1, y1</p>\n<p>w1, x1, y1, z1</p>\n<p>w1, x1, y1, z2</p>\n<p>w1, x1, y2, z2</p>\n<p>w1, x1, y2, z1</p>\n<p>w1, x1, y2, z2 (already found before)</p>\n<p>Any hints how I can avoid getting combinations more than once?</p>\n<pre><code>private HashMap&lt;String, ZeugnisNoteMitAa&gt; result;\n\n\n\npublic DeutschCheck(final String bezeichner, final List&lt;String&gt; schulartenList) {\n        super(bezeichner, schulartenList);\n        mloesungGefunden =false;\n        mbeste = new HashMap&lt;&gt;();\n        result = new HashMap&lt;&gt;();\n        mbearbeitet = new HashMap&lt;&gt;();\n\n    }\nprivate void loesungGefunden(HashMap&lt;String, ZeugnisNoteMitAa&gt;map)\n    {\n        for (Map.Entry e : map.entrySet())\n        {\n            ZeugnisNoteMitAa note = (ZeugnisNoteMitAa) e.getValue();\n            System.out.println(e.getKey()+&quot; &quot;+ note.getZeugnisNote().getSchuleFach().getUnterrichtsfach().getAnzeigeform()+&quot; &quot;\n                    + note.getZeugnisNote().getNote()+ &quot;\\n&quot;);\n        }\n    }\n\nprivate void doit(HashMap &lt; String, List &lt; ZeugnisNoteMitAa &gt;&gt; map, List &lt; String &gt; keys, int currentKey, int currentValue) {\n  if (currentKey &gt;= keys.size()) {\n    return;\n  } else {\n    List &lt; ZeugnisNoteMitAa &gt; currentValues = map.get(keys.get(currentKey));\n    if (currentValue &lt; currentValues.size()) {\n      result.put(keys.get(currentKey), currentValues.get(currentValue));\n      boolean found = true;\n      for (String current: keys) {\n        if (result.get(current) == null) {\n          found = false;\n        }\n      }\n      if (found) {\n        //Print the current selection\n        loesungGefunden(result);\n      }\n\n      doit(map, keys, currentKey + 1, 0);\n      doit(map, keys, currentKey, currentValue + 1);\n\n    }\n  }\n}\n\npublic class ZeugnisNoteMitAa {\n\n    private final ZeugnisNote mZeugnisNote;\n    private final SchuelerFachwahlFachAa mAa;\n    \n    public ZeugnisNoteMitAa(final ZeugnisNote zn, final SchuelerFachwahlFachAa aa) {\n        mZeugnisNote = zn;\n        mAa = aa;\n    }\n    \n    public ZeugnisNote getZeugnisNote() {\n        return mZeugnisNote;\n    }\n    \n    public SchuelerFachwahlFachAa getAa() {\n        return mAa;\n    }\n    \n    public SchuelerOberstufe getSchuelerOberstufe() {\n        return mAa.getSchuelerFachwahlFach().getSchuelerFachwahl().getSchuelerOberstufe();\n    }\n</code></pre>\n<p>I tried to find out how the machine steps through the Hashmap (noted above). I can’t find out, how to do the recursive method call that each combination only occurs once.</p>\n"},{"tags":["java","angular","spring"],"comments":[{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1667306136,"post_id":74275399,"comment_id":131132593,"body_markdown":"Make sure that the cookies get sent as well, if not there is no session.","body":"Make sure that the cookies get sent as well, if not there is no session."},{"owner":{"account_id":13842381,"reputation":1,"user_id":9992311,"display_name":"Subarb"},"score":0,"creation_date":1667337465,"post_id":74275399,"comment_id":131143078,"body_markdown":"@M.Deinum I have debugged a little more and noticed that the cookies are indeed not set. Something is going on when I use ng serve which doesn&#39;t set the cookies","body":"@M.Deinum I have debugged a little more and noticed that the cookies are indeed not set. Something is going on when I use ng serve which doesn&#39;t set the cookies"},{"owner":{"account_id":12329207,"reputation":1050,"user_id":8995812,"display_name":"Jakob Em"},"score":0,"creation_date":1668181673,"post_id":74275399,"comment_id":131350785,"body_markdown":"Maybe this helps: https://stackoverflow.com/questions/47045716/angular-ng-serve-with-proxy-config-doesnt-set-cookies-from-laravel-api","body":"Maybe this helps: <a href=\"https://stackoverflow.com/questions/47045716/angular-ng-serve-with-proxy-config-doesnt-set-cookies-from-laravel-api\" title=\"angular ng serve with proxy config doesnt set cookies from laravel api\">stackoverflow.com/questions/47045716/&hellip;</a>"}],"owner":{"account_id":13842381,"reputation":1,"user_id":9992311,"display_name":"Subarb"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":97,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1667337564,"creation_date":1667303060,"question_id":74275399,"body_markdown":"Using spring boot and using scoped session:\r\n\r\n\r\n```\r\n@Service\r\n@Scope(value=&quot;session&quot;, proxyMode = ScopedProxyMode.TARGET_CLASS)\r\n\r\n```\r\n\r\nI have setters and getters on this class and when the web service is run via 8081 the rest apis are scoped correctly in that the session is maintained and the data is cached.\r\n\r\nHowever when I run the front end angular using ng serve via a proxy to the rest api, I noticed that the session is never maintained. ie the fields that have been initialized seems to be always reset back to null on subsequent calls from the ng serve.\r\n\r\n\r\nthe proxy config is:\r\n\r\n\r\n```\r\n{\r\n  &quot;/&quot;: {\r\n    &quot;target&quot;: &quot;http://localhost:8081/app&quot;,\r\n    &quot;secure&quot;: false,\r\n    &quot;changeOrigin&quot;: true,\r\n    &quot;logLevel&quot;: &quot;debug&quot;\r\n  }\r\n}\r\n\r\n```\r\n\r\nand running it via:\r\n\r\n\r\n```\r\nng serve --port 4201 --proxy-config proxy.conf.json\r\n\r\n```\r\nAlso the http requests I am using is this:\r\n    this.options = {\r\n      withCredentials: true,\r\n      headers:\r\n        new HttpHeaders({\r\n          &#39;Content-Type&#39;: &#39;application/json&#39;,\r\n          &#39;Access-Control-Allow-Credentials&#39;: &#39;true&#39;,\r\n          &#39;Access-Control-Allow-Origin&#39;: &#39;*&#39;,\r\n          &#39;Cache-Control&#39;: &#39;no-cache&#39;\r\n        })\r\n    };\r\n\r\n","title":"Spring boot scope session not working when using ng serve proxy","body":"<p>Using spring boot and using scoped session:</p>\n<pre><code>@Service\n@Scope(value=&quot;session&quot;, proxyMode = ScopedProxyMode.TARGET_CLASS)\n\n</code></pre>\n<p>I have setters and getters on this class and when the web service is run via 8081 the rest apis are scoped correctly in that the session is maintained and the data is cached.</p>\n<p>However when I run the front end angular using ng serve via a proxy to the rest api, I noticed that the session is never maintained. ie the fields that have been initialized seems to be always reset back to null on subsequent calls from the ng serve.</p>\n<p>the proxy config is:</p>\n<pre><code>{\n  &quot;/&quot;: {\n    &quot;target&quot;: &quot;http://localhost:8081/app&quot;,\n    &quot;secure&quot;: false,\n    &quot;changeOrigin&quot;: true,\n    &quot;logLevel&quot;: &quot;debug&quot;\n  }\n}\n\n</code></pre>\n<p>and running it via:</p>\n<pre><code>ng serve --port 4201 --proxy-config proxy.conf.json\n\n</code></pre>\n<p>Also the http requests I am using is this:\nthis.options = {\nwithCredentials: true,\nheaders:\nnew HttpHeaders({\n'Content-Type': 'application/json',\n'Access-Control-Allow-Credentials': 'true',\n'Access-Control-Allow-Origin': '*',\n'Cache-Control': 'no-cache'\n})\n};</p>\n"},{"tags":["java","spring"],"answers":[{"tags":[],"owner":{"account_id":136251,"reputation":87506,"user_id":339637,"accept_rate":55,"display_name":"Ken Chan"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1667337317,"creation_date":1667336860,"answer_id":74281806,"question_id":74281663,"body_markdown":"There is a `getBeansOfType()` method in the `ApplicationContext` which can return all beans of a given type. The beans will be retuned as a map which the key is the name of the bean while the value is the bean instance.\r\n\r\n``` java\r\nMap&lt;String, Person&gt; beans = applicationContext.getBeansOfType(Person.class);\r\n\r\nPerson person1 = beans.get(&quot;1&quot;); \r\nPerson person2 = beans.get(&quot;2&quot;);\r\n\r\nList&lt;Person&gt; allPersons = new ArrayList&lt;&gt;(beans.values());\r\n\r\n```","title":"Get every bean from bean.xml file","body":"<p>There is a <code>getBeansOfType()</code> method in the <code>ApplicationContext</code> which can return all beans of a given type. The beans will be retuned as a map which the key is the name of the bean while the value is the bean instance.</p>\n<pre class=\"lang-java prettyprint-override\"><code>Map&lt;String, Person&gt; beans = applicationContext.getBeansOfType(Person.class);\n\nPerson person1 = beans.get(&quot;1&quot;); \nPerson person2 = beans.get(&quot;2&quot;);\n\nList&lt;Person&gt; allPersons = new ArrayList&lt;&gt;(beans.values());\n\n</code></pre>\n"}],"owner":{"account_id":23875795,"reputation":173,"user_id":17885211,"display_name":"user346206"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":267,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":74281806,"answer_count":1,"score":0,"last_activity_date":1667337317,"creation_date":1667335952,"question_id":74281663,"body_markdown":"I have an xml file with beans  which look like this:\r\n\r\n    &lt;bean class=&quot;org.example.domain.Person&quot; id=&quot;1&quot;&gt;\r\n            &lt;property name=&quot;first_name&quot; value=&quot;Jillian&quot;/&gt;\r\n            &lt;property name=&quot;last_name&quot; value=&quot;Palethorpe&quot;/&gt;\r\n            &lt;property name=&quot;email&quot; value=&quot;jpalethorpe0@accuweather.com&quot;/&gt;\r\n            &lt;property name=&quot;company_name&quot; value=&quot;Layo&quot;/&gt;\r\n    &lt;/bean&gt;\r\nIt has up to 30 beans with class person and id from 1 to 30.\r\n\r\nNow i want to print them\r\nI know that I could do this like that:\r\n\r\n    @SpringBootApplication\r\n    @ImportResource(&quot;classpath:beans.xml&quot;)\r\n    public class Main {\r\n    public static void main(String[] args) {\r\n        \r\n        ApplicationContext applicationContext = SpringApplication.run(Main.class, args);\r\n        Person first = applicationContext.getBean(&quot;1&quot;, Person.class);\r\n        Person second = applicationContext.getBean(&quot;2&quot;, Person.class);\r\n        System.out.println(first);\r\n        System.out.println(second);\r\n    }\r\n\r\n    }\r\n\r\nBut is there a better way to get all of the &quot;beans&quot; or persons from this xml file?\r\n","title":"Get every bean from bean.xml file","body":"<p>I have an xml file with beans  which look like this:</p>\n<pre><code>&lt;bean class=&quot;org.example.domain.Person&quot; id=&quot;1&quot;&gt;\n        &lt;property name=&quot;first_name&quot; value=&quot;Jillian&quot;/&gt;\n        &lt;property name=&quot;last_name&quot; value=&quot;Palethorpe&quot;/&gt;\n        &lt;property name=&quot;email&quot; value=&quot;jpalethorpe0@accuweather.com&quot;/&gt;\n        &lt;property name=&quot;company_name&quot; value=&quot;Layo&quot;/&gt;\n&lt;/bean&gt;\n</code></pre>\n<p>It has up to 30 beans with class person and id from 1 to 30.</p>\n<p>Now i want to print them\nI know that I could do this like that:</p>\n<pre><code>@SpringBootApplication\n@ImportResource(&quot;classpath:beans.xml&quot;)\npublic class Main {\npublic static void main(String[] args) {\n    \n    ApplicationContext applicationContext = SpringApplication.run(Main.class, args);\n    Person first = applicationContext.getBean(&quot;1&quot;, Person.class);\n    Person second = applicationContext.getBean(&quot;2&quot;, Person.class);\n    System.out.println(first);\n    System.out.println(second);\n}\n\n}\n</code></pre>\n<p>But is there a better way to get all of the &quot;beans&quot; or persons from this xml file?</p>\n"},{"tags":["java","amazon-web-services","amazon-dynamodb","aws-java-sdk-2.x"],"comments":[{"owner":{"account_id":100740,"reputation":73217,"user_id":271415,"accept_rate":91,"display_name":"jarmod"},"score":2,"creation_date":1646325225,"post_id":71340402,"comment_id":126100498,"body_markdown":"You cannot specify conditions on individual put and delete requests with [BatchWriteItem](https://docs.aws.amazon.com/amazondynamodb/latest/APIReference/API_BatchWriteItem.html). You would have to use individual PutItem request(s).","body":"You cannot specify conditions on individual put and delete requests with <a href=\"https://docs.aws.amazon.com/amazondynamodb/latest/APIReference/API_BatchWriteItem.html\" rel=\"nofollow noreferrer\">BatchWriteItem</a>. You would have to use individual PutItem request(s)."},{"owner":{"account_id":11741517,"reputation":4117,"user_id":8593689,"display_name":"Shane Bishop"},"score":0,"creation_date":1646327028,"post_id":71340402,"comment_id":126101228,"body_markdown":"Right that makes sense, as it wouldn&#39;t make sense to write multiple items in a batch, where each item in the batch has a different condition. At least, that is how I understand it, please correct me if I am wrong.","body":"Right that makes sense, as it wouldn&#39;t make sense to write multiple items in a batch, where each item in the batch has a different condition. At least, that is how I understand it, please correct me if I am wrong."}],"owner":{"account_id":11741517,"reputation":4117,"user_id":8593689,"display_name":"Shane Bishop"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1962,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":0,"score":2,"last_activity_date":1667337006,"creation_date":1646324435,"question_id":71340402,"body_markdown":"I am trying to conditionally write an item to a DynamoDB table.\r\n\r\nI am using [AWS SDK for Java 2.x](https://docs.aws.amazon.com/sdk-for-java/latest/developer-guide/home.html). Below is my code:\r\n\r\n```java\r\nPutItemEnhancedRequest&lt;AssessmentBean&gt; putItemRequest =\r\n    PutItemEnhancedRequest.builder(AssessmentBean.class)\r\n        .conditionExpression(sqsMsgIdNoMatch)\r\n        .item(assessment)\r\n        .build();\r\nWriteBatch batch =\r\n    WriteBatch.builder(AssessmentBean.class)\r\n        .addPutItem(putItemRequest)\r\n        .mappedTableResource(table)\r\n        .build(); // This line throws the IllegalArgumentException\r\nBatchWriteItemEnhancedRequest batchWriteRequest =\r\n    BatchWriteItemEnhancedRequest.builder().addWriteBatch(batch).build();\r\n\r\neDDBClient\r\n    .batchWriteItem(batchWriteRequest)\r\n    .whenCompleteAsync(/* not important to this question */);\r\n```\r\n\r\nAs indicated by the comment in the code above, my code throws an `IllegalArgumentException`:\r\n&gt; java.lang.IllegalArgumentException: A mapper extension inserted a conditionExpression in a PutItem request as part of a BatchWriteItemRequest. This is not supported by DynamoDb. An extension known to do this is the VersionedRecordExtension which is loaded by default unless overridden. To fix this use a table schema that does not have a versioned attribute in it or do not load the offending extension.\r\n\r\nBelow is some type information:\r\n* `putItemRequest` is a `software.amazon.awssdk.enhanced.dynamodb.model.PutItemEnhancedRequest` object\r\n* `batch` is a `software.amazon.awssdk.enhanced.dynamodb.model.WriteBatch` object\r\n* `batchWriteRequest` is a `software.amazon.awssdk.enhanced.dynamodb.model.BatchWriteItemEnhancedRequest` object\r\n* `eDDBClient` is a `software.amazon.awssdk.enhanced.dynamodb.DynamoDbEnhancedAsyncClient` object\r\n\r\nHow do correctly conditionally write an item to DynamoDB?","title":"Condition expression in a PutItem request is not supported by DynamoDB","body":"<p>I am trying to conditionally write an item to a DynamoDB table.</p>\n<p>I am using <a href=\"https://docs.aws.amazon.com/sdk-for-java/latest/developer-guide/home.html\" rel=\"nofollow noreferrer\">AWS SDK for Java 2.x</a>. Below is my code:</p>\n<pre class=\"lang-java prettyprint-override\"><code>PutItemEnhancedRequest&lt;AssessmentBean&gt; putItemRequest =\n    PutItemEnhancedRequest.builder(AssessmentBean.class)\n        .conditionExpression(sqsMsgIdNoMatch)\n        .item(assessment)\n        .build();\nWriteBatch batch =\n    WriteBatch.builder(AssessmentBean.class)\n        .addPutItem(putItemRequest)\n        .mappedTableResource(table)\n        .build(); // This line throws the IllegalArgumentException\nBatchWriteItemEnhancedRequest batchWriteRequest =\n    BatchWriteItemEnhancedRequest.builder().addWriteBatch(batch).build();\n\neDDBClient\n    .batchWriteItem(batchWriteRequest)\n    .whenCompleteAsync(/* not important to this question */);\n</code></pre>\n<p>As indicated by the comment in the code above, my code throws an <code>IllegalArgumentException</code>:</p>\n<blockquote>\n<p>java.lang.IllegalArgumentException: A mapper extension inserted a conditionExpression in a PutItem request as part of a BatchWriteItemRequest. This is not supported by DynamoDb. An extension known to do this is the VersionedRecordExtension which is loaded by default unless overridden. To fix this use a table schema that does not have a versioned attribute in it or do not load the offending extension.</p>\n</blockquote>\n<p>Below is some type information:</p>\n<ul>\n<li><code>putItemRequest</code> is a <code>software.amazon.awssdk.enhanced.dynamodb.model.PutItemEnhancedRequest</code> object</li>\n<li><code>batch</code> is a <code>software.amazon.awssdk.enhanced.dynamodb.model.WriteBatch</code> object</li>\n<li><code>batchWriteRequest</code> is a <code>software.amazon.awssdk.enhanced.dynamodb.model.BatchWriteItemEnhancedRequest</code> object</li>\n<li><code>eDDBClient</code> is a <code>software.amazon.awssdk.enhanced.dynamodb.DynamoDbEnhancedAsyncClient</code> object</li>\n</ul>\n<p>How do correctly conditionally write an item to DynamoDB?</p>\n"},{"tags":["java","inner-classes"],"answers":[{"tags":[],"owner":{"account_id":11683,"reputation":1438179,"user_id":22656,"accept_rate":86,"display_name":"Jon Skeet"},"down_vote_count":0,"up_vote_count":375,"is_accepted":true,"score":375,"last_activity_date":1518302080,"creation_date":1259521864,"answer_id":1816462,"question_id":1816458,"body_markdown":"Within the inner class itself, you can use `OuterClass.this`. This expression, which allows to refer to any lexically enclosing instance, is described in the JLS as [Qualified `this`] [1].\r\n\r\nI don&#39;t *think* there&#39;s a way to get the instance from outside the code of the inner class though. Of course, you can always introduce your own property:\r\n\r\n    public OuterClass getOuter() {\r\n        return OuterClass.this;\r\n    }\r\n\r\nEDIT: By experimentation, it looks like the field holding the reference to the outer class has package level access - at least with the JDK I&#39;m using. \r\n\r\nEDIT: The name used (`this$0`) *is* actually valid in Java, although the [JLS][2] discourages its use:\r\n\r\n&gt; The `$` character should be used only in\r\n&gt; mechanically generated source code or,\r\n&gt; rarely, to access pre-existing names on\r\n&gt; legacy systems.\r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/specs/jls/se9/html/jls-15.html#jls-15.8.4\r\n  [2]: http://docs.oracle.com/javase/specs/jls/se7/html/jls-3.html#jls-3.8","title":"Getting hold of the outer class object from the inner class object","body":"<p>Within the inner class itself, you can use <code>OuterClass.this</code>. This expression, which allows to refer to any lexically enclosing instance, is described in the JLS as <a href=\"https://docs.oracle.com/javase/specs/jls/se9/html/jls-15.html#jls-15.8.4\" rel=\"noreferrer\">Qualified <code>this</code></a>.</p>\n\n<p>I don't <em>think</em> there's a way to get the instance from outside the code of the inner class though. Of course, you can always introduce your own property:</p>\n\n<pre><code>public OuterClass getOuter() {\n    return OuterClass.this;\n}\n</code></pre>\n\n<p>EDIT: By experimentation, it looks like the field holding the reference to the outer class has package level access - at least with the JDK I'm using. </p>\n\n<p>EDIT: The name used (<code>this$0</code>) <em>is</em> actually valid in Java, although the <a href=\"http://docs.oracle.com/javase/specs/jls/se7/html/jls-3.html#jls-3.8\" rel=\"noreferrer\">JLS</a> discourages its use:</p>\n\n<blockquote>\n  <p>The <code>$</code> character should be used only in\n  mechanically generated source code or,\n  rarely, to access pre-existing names on\n  legacy systems.</p>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":44736,"reputation":98412,"user_id":131433,"accept_rate":76,"display_name":"bmargulies"},"down_vote_count":5,"up_vote_count":46,"is_accepted":false,"score":41,"last_activity_date":1259522074,"creation_date":1259521939,"answer_id":1816468,"question_id":1816458,"body_markdown":"`OuterClass.this` references the outer class.\r\n\r\n","title":"Getting hold of the outer class object from the inner class object","body":"<p><code>OuterClass.this</code> references the outer class.</p>\n"},{"tags":[],"owner":{"account_id":247217,"reputation":213455,"user_id":521799,"accept_rate":89,"display_name":"Lukas Eder"},"down_vote_count":1,"up_vote_count":27,"is_accepted":false,"score":26,"last_activity_date":1362642986,"creation_date":1362642986,"answer_id":15265900,"question_id":1816458,"body_markdown":"You could (but you shouldn&#39;t) use reflection for the job:\r\n\r\n    import java.lang.reflect.Field;\r\n\r\n    public class Outer {\r\n        public class Inner {\r\n        }\r\n    \t\r\n        public static void main(String[] args) throws Exception {\r\n\r\n            // Create the inner instance\r\n    \t    Inner inner = new Outer().new Inner();\r\n\r\n            // Get the implicit reference from the inner to the outer instance\r\n            // ... make it accessible, as it has default visibility\r\n    \t    Field field = Inner.class.getDeclaredField(&quot;this$0&quot;);\r\n    \t    field.setAccessible(true);\r\n\r\n            // Dereference and cast it\r\n    \t    Outer outer = (Outer) field.get(inner);\r\n    \t    System.out.println(outer);\r\n        }\r\n    }\r\n\r\nOf course, the name of the implicit reference is utterly unreliable, so as I said, you shouldn&#39;t :-)","title":"Getting hold of the outer class object from the inner class object","body":"<p>You could (but you shouldn't) use reflection for the job:</p>\n\n<pre><code>import java.lang.reflect.Field;\n\npublic class Outer {\n    public class Inner {\n    }\n\n    public static void main(String[] args) throws Exception {\n\n        // Create the inner instance\n        Inner inner = new Outer().new Inner();\n\n        // Get the implicit reference from the inner to the outer instance\n        // ... make it accessible, as it has default visibility\n        Field field = Inner.class.getDeclaredField(\"this$0\");\n        field.setAccessible(true);\n\n        // Dereference and cast it\n        Outer outer = (Outer) field.get(inner);\n        System.out.println(outer);\n    }\n}\n</code></pre>\n\n<p>Of course, the name of the implicit reference is utterly unreliable, so as I said, you shouldn't :-)</p>\n"},{"tags":[],"owner":{"account_id":2389614,"reputation":3403,"user_id":2092405,"accept_rate":93,"display_name":"Ashish Rawat"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1462718402,"creation_date":1462718402,"answer_id":37101016,"question_id":1816458,"body_markdown":"Here&#39;s the example:\r\n\r\n    // Test\r\n    public void foo() {\r\n\t\tC c = new C();\r\n\t\tA s;\r\n\t\ts = ((A.B)c).get();\r\n\t\tSystem.out.println(s.getR());\r\n\t}\r\n\r\n    // classes\r\n    class C {}\r\n\r\n    class A {\r\n\t   public class B extends C{\r\n\t\t A get() {return A.this;}\r\n\t   }\r\n\t   public String getR() {\r\n\t\t return &quot;This is string&quot;;\r\n\t   }\r\n    }","title":"Getting hold of the outer class object from the inner class object","body":"<p>Here's the example:</p>\n\n<pre><code>// Test\npublic void foo() {\n    C c = new C();\n    A s;\n    s = ((A.B)c).get();\n    System.out.println(s.getR());\n}\n\n// classes\nclass C {}\n\nclass A {\n   public class B extends C{\n     A get() {return A.this;}\n   }\n   public String getR() {\n     return \"This is string\";\n   }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1680813,"reputation":687,"user_id":1545084,"accept_rate":83,"display_name":"Gladclef"},"down_vote_count":1,"up_vote_count":3,"is_accepted":false,"score":2,"last_activity_date":1508268649,"creation_date":1471032009,"answer_id":38925649,"question_id":1816458,"body_markdown":"The more general answer to this question involves shadowed variables and how they are accessed.\r\n\r\nIn the following example (from Oracle), the variable **x** in **main()** is shadowing **Test.x**:\r\n\r\n    class Test {\r\n        static int x = 1;\r\n        public static void main(String[] args) {\r\n            InnerClass innerClassInstance = new InnerClass()\r\n            {\r\n                public void printX()\r\n                {\r\n                    System.out.print(&quot;x=&quot; + x);\r\n                    System.out.println(&quot;, Test.this.x=&quot; + Test.this.x);\r\n                }\r\n            }\r\n            innerClassInstance.printX();\r\n        }\r\n        \r\n        public abstract static class InnerClass\r\n        {\r\n            int x = 0;\r\n\r\n            public InnerClass() { }\r\n\r\n            public abstract void printX();\r\n        }\r\n    }\r\n\r\nRunning this program will print:\r\n\r\n    x=0, Test.this.x=1\r\n\r\nMore at: http://docs.oracle.com/javase/specs/jls/se7/html/jls-6.html#jls-6.6","title":"Getting hold of the outer class object from the inner class object","body":"<p>The more general answer to this question involves shadowed variables and how they are accessed.</p>\n\n<p>In the following example (from Oracle), the variable <strong>x</strong> in <strong>main()</strong> is shadowing <strong>Test.x</strong>:</p>\n\n<pre><code>class Test {\n    static int x = 1;\n    public static void main(String[] args) {\n        InnerClass innerClassInstance = new InnerClass()\n        {\n            public void printX()\n            {\n                System.out.print(\"x=\" + x);\n                System.out.println(\", Test.this.x=\" + Test.this.x);\n            }\n        }\n        innerClassInstance.printX();\n    }\n\n    public abstract static class InnerClass\n    {\n        int x = 0;\n\n        public InnerClass() { }\n\n        public abstract void printX();\n    }\n}\n</code></pre>\n\n<p>Running this program will print:</p>\n\n<pre><code>x=0, Test.this.x=1\n</code></pre>\n\n<p>More at: <a href=\"http://docs.oracle.com/javase/specs/jls/se7/html/jls-6.html#jls-6.6\" rel=\"nofollow noreferrer\">http://docs.oracle.com/javase/specs/jls/se7/html/jls-6.html#jls-6.6</a></p>\n"},{"tags":[],"owner":{"account_id":8800824,"reputation":1,"user_id":6577041,"display_name":"曹建发"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1493303061,"creation_date":1493303061,"answer_id":43660586,"question_id":1816458,"body_markdown":"if you don&#39;t have control to modify the inner class, the refection may help you (but not recommend). this$0 is reference in Inner class which tells which instance of Outer class was used to create current instance of Inner class.","title":"Getting hold of the outer class object from the inner class object","body":"<p>if you don't have control to modify the inner class, the refection may help you (but not recommend). this$0 is reference in Inner class which tells which instance of Outer class was used to create current instance of Inner class.</p>\n"},{"tags":[],"owner":{"account_id":11106649,"reputation":27,"user_id":8153640,"display_name":"Vali Zhao"},"down_vote_count":2,"up_vote_count":0,"is_accepted":false,"score":-2,"last_activity_date":1533003359,"creation_date":1533003359,"answer_id":51604567,"question_id":1816458,"body_markdown":"\r\n\r\n    /**\r\n     * Not applicable to Static Inner Class (nested class)\r\n     */\r\n    public static Object getDeclaringTopLevelClassObject(Object object) {\r\n        if (object == null) {\r\n            return null;\r\n        }\r\n        Class cls = object.getClass();\r\n        if (cls == null) {\r\n            return object;\r\n        }\r\n        Class outerCls = cls.getEnclosingClass();\r\n        if (outerCls == null) {\r\n            // this is top-level class\r\n            return object;\r\n        }\r\n        // get outer class object\r\n        Object outerObj = null;\r\n        try {\r\n            Field[] fields = cls.getDeclaredFields();\r\n            for (Field field : fields) {\r\n                if (field != null &amp;&amp; field.getType() == outerCls\r\n                        &amp;&amp; field.getName() != null &amp;&amp; field.getName().startsWith(&quot;this$&quot;)) {\r\n                    field.setAccessible(true);\r\n                    outerObj = field.get(object);\r\n                    break;\r\n                }\r\n            }\r\n        } catch (Exception e) {\r\n            e.printStackTrace();\r\n        }\r\n        return getDeclaringTopLevelClassObject(outerObj);\r\n    }\r\n\r\n\r\nOf course, the name of the implicit reference is unreliable, so you shouldn&#39;t use reflection for the job.\r\n","title":"Getting hold of the outer class object from the inner class object","body":"<pre><code>/**\n * Not applicable to Static Inner Class (nested class)\n */\npublic static Object getDeclaringTopLevelClassObject(Object object) {\n    if (object == null) {\n        return null;\n    }\n    Class cls = object.getClass();\n    if (cls == null) {\n        return object;\n    }\n    Class outerCls = cls.getEnclosingClass();\n    if (outerCls == null) {\n        // this is top-level class\n        return object;\n    }\n    // get outer class object\n    Object outerObj = null;\n    try {\n        Field[] fields = cls.getDeclaredFields();\n        for (Field field : fields) {\n            if (field != null &amp;&amp; field.getType() == outerCls\n                    &amp;&amp; field.getName() != null &amp;&amp; field.getName().startsWith(\"this$\")) {\n                field.setAccessible(true);\n                outerObj = field.get(object);\n                break;\n            }\n        }\n    } catch (Exception e) {\n        e.printStackTrace();\n    }\n    return getDeclaringTopLevelClassObject(outerObj);\n}\n</code></pre>\n\n<p>Of course, the name of the implicit reference is unreliable, so you shouldn't use reflection for the job.</p>\n"}],"owner":{"account_id":45413,"reputation":28777,"user_id":133830,"accept_rate":87,"display_name":"peakit"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":173551,"favorite_count":0,"down_vote_count":0,"up_vote_count":285,"accepted_answer_id":1816462,"answer_count":7,"score":285,"last_activity_date":1667336122,"creation_date":1259521817,"question_id":1816458,"body_markdown":"I have the following code. I want to get hold of the outer class object using which I created the inner class object `inner`. How can I do it?\r\n\r\n    public class OuterClass {\r\n    \r\n    \tpublic class InnerClass {\r\n    \t\tprivate String name = &quot;Peakit&quot;;\r\n    \t}\r\n    \r\n    \tpublic static void main(String[] args) {\r\n    \t\tOuterClass outer = new OuterClass();\r\n    \t\tInnerClass inner = outer.new InnerClass();\r\n           // How to get the same outer object which created the inner object back?\r\n    \t\tOuterClass anotherOuter = ?? ;\r\n                \r\n            if(anotherOuter == outer) {\r\n                 System.out.println(&quot;Was able to reach out to the outer object via inner !!&quot;);\r\n            } else {\r\n                 System.out.println(&quot;No luck :-( &quot;);\r\n            }\r\n    \t}\r\n    }\r\n\r\n\r\n**EDIT:** Well, some of you guys suggested of modifying the inner class by adding a method:\r\n\r\n    public OuterClass outer() {\r\n       return OuterClass.this;\r\n    }\r\n\r\nBut what if I don&#39;t have control to modify the inner class, then (just to confirm) do we have some other way of getting the corresponding outer class object from the inner class object?","title":"Getting hold of the outer class object from the inner class object","body":"<p>I have the following code. I want to get hold of the outer class object using which I created the inner class object <code>inner</code>. How can I do it?</p>\n\n<pre><code>public class OuterClass {\n\n    public class InnerClass {\n        private String name = \"Peakit\";\n    }\n\n    public static void main(String[] args) {\n        OuterClass outer = new OuterClass();\n        InnerClass inner = outer.new InnerClass();\n       // How to get the same outer object which created the inner object back?\n        OuterClass anotherOuter = ?? ;\n\n        if(anotherOuter == outer) {\n             System.out.println(\"Was able to reach out to the outer object via inner !!\");\n        } else {\n             System.out.println(\"No luck :-( \");\n        }\n    }\n}\n</code></pre>\n\n<p><strong>EDIT:</strong> Well, some of you guys suggested of modifying the inner class by adding a method:</p>\n\n<pre><code>public OuterClass outer() {\n   return OuterClass.this;\n}\n</code></pre>\n\n<p>But what if I don't have control to modify the inner class, then (just to confirm) do we have some other way of getting the corresponding outer class object from the inner class object?</p>\n"},{"tags":["java","jvm","jit","jstat"],"answers":[{"tags":[],"owner":{"account_id":4210603,"reputation":94356,"user_id":3448419,"display_name":"apangin"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1667335980,"creation_date":1667335980,"answer_id":74281668,"question_id":74279300,"body_markdown":"The value in `Type` column corresponds to [this](https://github.com/openjdk/jdk/blob/d17bf51f91371072a758e775136af946192e771b/src/hotspot/share/compiler/compileBroker.hpp#L149-L150) enum:\r\n```\r\n1 = normal_compile  // Regular JIT compilation\r\n2 = osr_compile     // On-stack replacement\r\n3 = native_compile  // Compiled wrapper for a native method\r\n```\r\nHowever, the values other than `normal_compile` are available only in debug builds of the JVM when `-XX:+CICountOSR` or `-XX:+CICountNative` option is [set](https://github.com/openjdk/jdk/blob/d17bf51f91371072a758e775136af946192e771b/src/hotspot/share/compiler/compileBroker.cpp#L2415-L2420):\r\n```\r\n  int last_compile_type = normal_compile;\r\n  if (CICountOSR &amp;&amp; is_osr) {\r\n    last_compile_type = osr_compile;\r\n  } else if (CICountNative &amp;&amp; method-&gt;is_native()) {\r\n    last_compile_type = native_compile;\r\n  }\r\n```\r\nIn practice this means that `Type` is always `1` with a regular JDK.","title":"How to understand jstat -printcompilation output","body":"<p>The value in <code>Type</code> column corresponds to <a href=\"https://github.com/openjdk/jdk/blob/d17bf51f91371072a758e775136af946192e771b/src/hotspot/share/compiler/compileBroker.hpp#L149-L150\" rel=\"nofollow noreferrer\">this</a> enum:</p>\n<pre><code>1 = normal_compile  // Regular JIT compilation\n2 = osr_compile     // On-stack replacement\n3 = native_compile  // Compiled wrapper for a native method\n</code></pre>\n<p>However, the values other than <code>normal_compile</code> are available only in debug builds of the JVM when <code>-XX:+CICountOSR</code> or <code>-XX:+CICountNative</code> option is <a href=\"https://github.com/openjdk/jdk/blob/d17bf51f91371072a758e775136af946192e771b/src/hotspot/share/compiler/compileBroker.cpp#L2415-L2420\" rel=\"nofollow noreferrer\">set</a>:</p>\n<pre><code>  int last_compile_type = normal_compile;\n  if (CICountOSR &amp;&amp; is_osr) {\n    last_compile_type = osr_compile;\n  } else if (CICountNative &amp;&amp; method-&gt;is_native()) {\n    last_compile_type = native_compile;\n  }\n</code></pre>\n<p>In practice this means that <code>Type</code> is always <code>1</code> with a regular JDK.</p>\n"}],"owner":{"account_id":17549428,"reputation":15,"user_id":12730122,"display_name":"user12730122"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":357,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":74281668,"answer_count":1,"score":1,"last_activity_date":1667335980,"creation_date":1667321901,"question_id":74279300,"body_markdown":"```\r\njstat -printcompilation pid \r\n```\r\n\r\ncan get information about the last method that is compiled, like:\r\n\r\n```\r\nCompiled  Size  Type Method\r\n     207     64    1 java/lang/CharacterDataLatin1 toUpperCase\r\n     208      5    1 java/math/BigDecimal$StringBuilderHelper getCharArray\r\n```\r\nWhat&#39;s the third column mean? \r\nI can&#39;t find detail info about &#39;Type&#39;. How many types inclued?\r\n\r\nhttps://docs.oracle.com/javase/9/tools/jstat.htm#JSWOR734\r\n\r\noracle document dont&#39; have enough info yet","title":"How to understand jstat -printcompilation output","body":"<pre><code>jstat -printcompilation pid \n</code></pre>\n<p>can get information about the last method that is compiled, like:</p>\n<pre><code>Compiled  Size  Type Method\n     207     64    1 java/lang/CharacterDataLatin1 toUpperCase\n     208      5    1 java/math/BigDecimal$StringBuilderHelper getCharArray\n</code></pre>\n<p>What's the third column mean?\nI can't find detail info about 'Type'. How many types inclued?</p>\n<p><a href=\"https://docs.oracle.com/javase/9/tools/jstat.htm#JSWOR734\" rel=\"nofollow noreferrer\">https://docs.oracle.com/javase/9/tools/jstat.htm#JSWOR734</a></p>\n<p>oracle document dont' have enough info yet</p>\n"},{"tags":["java","string","integer"],"answers":[{"tags":[],"owner":{"account_id":7291967,"reputation":57515,"user_id":5558072,"accept_rate":100,"display_name":"Youcef LAIDANI"},"down_vote_count":2,"up_vote_count":24,"is_accepted":true,"score":22,"last_activity_date":1667335422,"creation_date":1491045400,"answer_id":43156135,"question_id":43156077,"body_markdown":"There are many ways to solve your problem. For example, you can use `try{}catch(){}`:\r\n\r\n**Solution 1**\r\n\r\n    public static void main(String[] args) {\r\n        String str = &quot;5588&quot;;\r\n\r\n        // Check if int\r\n        try {\r\n            Integer.parseInt(str);\r\n        } catch(NumberFormatException e) {\r\n            // Not int\r\n        }\r\n\r\n        // Check if float\r\n        try {\r\n            Float.parseFloat(str);\r\n        } catch(NumberFormatException e) {\r\n            // Not float\r\n        }\r\n    }\r\n\r\n**Solution 2**\r\n\r\nOr you can use regex `[-+]?[0-9]*\\.?[0-9]+`:\r\n\r\n    boolean correct = str.matches(&quot;[-+]?[0-9]*\\\\.?[0-9]+&quot;);\r\n\r\nFor more details, take a look at *[Matching Floating Point Numbers with a Regular Expression][1]*.\r\n\r\n  [1]: https://www.regular-expressions.info/floatingpoint.html\r\n\r\n\r\n","title":"How to check if a string is &#39;float&#39; or &#39;int&#39;","body":"<p>There are many ways to solve your problem. For example, you can use <code>try{}catch(){}</code>:</p>\n<p><strong>Solution 1</strong></p>\n<pre><code>public static void main(String[] args) {\n    String str = &quot;5588&quot;;\n\n    // Check if int\n    try {\n        Integer.parseInt(str);\n    } catch(NumberFormatException e) {\n        // Not int\n    }\n\n    // Check if float\n    try {\n        Float.parseFloat(str);\n    } catch(NumberFormatException e) {\n        // Not float\n    }\n}\n</code></pre>\n<p><strong>Solution 2</strong></p>\n<p>Or you can use regex <code>[-+]?[0-9]*\\.?[0-9]+</code>:</p>\n<pre><code>boolean correct = str.matches(&quot;[-+]?[0-9]*\\\\.?[0-9]+&quot;);\n</code></pre>\n<p>For more details, take a look at <em><a href=\"https://www.regular-expressions.info/floatingpoint.html\" rel=\"nofollow noreferrer\">Matching Floating Point Numbers with a Regular Expression</a></em>.</p>\n"},{"tags":[],"owner":{"account_id":4413830,"reputation":461,"user_id":3595995,"accept_rate":75,"display_name":"PremKumarR"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1667335536,"creation_date":1598065801,"answer_id":63532212,"question_id":43156077,"body_markdown":"In the [Apache Commons][1] *NumberUtils* class.\r\n\r\nNumberUtils.isCreatable(String) which checks whether a String is a valid Java number or not.\r\n\r\n        log.info(&quot;false {} &quot;, NumberUtils.isCreatable(&quot;NA.A&quot;));\r\n        log.info(&quot;true {} &quot;, NumberUtils.isCreatable(&quot;1223.589889890&quot;));\r\n        log.info(&quot;true {} &quot;, NumberUtils.isCreatable(&quot;1223&quot;));\r\n        log.info(&quot;true {} &quot;, NumberUtils.isCreatable(&quot;2.99e+8&quot;));\r\n\r\n  [1]: https://en.wikipedia.org/wiki/Apache_Commons\r\n","title":"How to check if a string is &#39;float&#39; or &#39;int&#39;","body":"<p>In the <a href=\"https://en.wikipedia.org/wiki/Apache_Commons\" rel=\"nofollow noreferrer\">Apache Commons</a> <em>NumberUtils</em> class.</p>\n<p>NumberUtils.isCreatable(String) which checks whether a String is a valid Java number or not.</p>\n<pre><code>    log.info(&quot;false {} &quot;, NumberUtils.isCreatable(&quot;NA.A&quot;));\n    log.info(&quot;true {} &quot;, NumberUtils.isCreatable(&quot;1223.589889890&quot;));\n    log.info(&quot;true {} &quot;, NumberUtils.isCreatable(&quot;1223&quot;));\n    log.info(&quot;true {} &quot;, NumberUtils.isCreatable(&quot;2.99e+8&quot;));\n</code></pre>\n"},{"tags":[],"owner":{"account_id":24444184,"reputation":1,"user_id":18367417,"display_name":"Saquib Islam"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1646336977,"creation_date":1646336977,"answer_id":71342990,"question_id":43156077,"body_markdown":"    public static String getPrimitiveDataTypeForNumberString(String str) {\r\n        try {\r\n            if (str.matches(&quot;^[\\\\p{Nd}]+[Ll]$&quot;)) {\r\n                str = str.substring(0, str.length() - 1);\r\n                long l = Long.parseLong(str);\r\n                if (l &lt;= Long.MAX_VALUE) {\r\n                    return &quot;Long&quot;;\r\n                }\r\n            } else if (str.matches(&quot;^[\\\\p{Nd}]+[.][\\\\p{Nd}Ee]+[Ff]$&quot;)) {\r\n                str = str.substring(0, str.length() - 1);\r\n                float f = Float.parseFloat(str);\r\n                if (f &lt;= Float.MAX_VALUE) {\r\n                    return &quot;Float&quot;;\r\n                }\r\n            } else if (str.matches(&quot;^[\\\\p{Nd}]+[.][\\\\p{Nd}Ee]+[Dd]$&quot;)) {\r\n                str = str.substring(0, str.length() - 1);\r\n                double d = Double.parseDouble(str);\r\n                if (d &lt;= Double.MAX_VALUE) {\r\n                    return &quot;Double&quot;;\r\n                }\r\n            } else if (str.matches(&quot;^[\\\\p{Nd}]+$&quot;)) {\r\n                double d = Double.parseDouble(str);\r\n                if (d &lt;= Integer.MAX_VALUE) {\r\n                    return &quot;Integer&quot;;\r\n                } else if (d &lt;= Long.MAX_VALUE) {\r\n                    return &quot;Long&quot;;\r\n                } else if(d &lt;= Float.MAX_VALUE) {\r\n                    return &quot;Float&quot;;\r\n                } else if(d &lt;= Double.MAX_VALUE) {\r\n                    return &quot;Double&quot;;\r\n                }\r\n            } else if (str.matches(&quot;^[\\\\p{Nd}]+[.][\\\\p{Nd}Ee]+$&quot;)) {\r\n                double d = Double.parseDouble(str);\r\n                if (d &gt; Float.MAX_VALUE) {\r\n                    return &quot;Double&quot;;\r\n                }\r\n                return &quot;Float&quot;;\r\n            }\r\n        } catch (NumberFormatException e) {\r\n        }\r\n    \r\n        return &quot;Unknown&quot;;\r\n    }","title":"How to check if a string is &#39;float&#39; or &#39;int&#39;","body":"<pre><code>public static String getPrimitiveDataTypeForNumberString(String str) {\n    try {\n        if (str.matches(&quot;^[\\\\p{Nd}]+[Ll]$&quot;)) {\n            str = str.substring(0, str.length() - 1);\n            long l = Long.parseLong(str);\n            if (l &lt;= Long.MAX_VALUE) {\n                return &quot;Long&quot;;\n            }\n        } else if (str.matches(&quot;^[\\\\p{Nd}]+[.][\\\\p{Nd}Ee]+[Ff]$&quot;)) {\n            str = str.substring(0, str.length() - 1);\n            float f = Float.parseFloat(str);\n            if (f &lt;= Float.MAX_VALUE) {\n                return &quot;Float&quot;;\n            }\n        } else if (str.matches(&quot;^[\\\\p{Nd}]+[.][\\\\p{Nd}Ee]+[Dd]$&quot;)) {\n            str = str.substring(0, str.length() - 1);\n            double d = Double.parseDouble(str);\n            if (d &lt;= Double.MAX_VALUE) {\n                return &quot;Double&quot;;\n            }\n        } else if (str.matches(&quot;^[\\\\p{Nd}]+$&quot;)) {\n            double d = Double.parseDouble(str);\n            if (d &lt;= Integer.MAX_VALUE) {\n                return &quot;Integer&quot;;\n            } else if (d &lt;= Long.MAX_VALUE) {\n                return &quot;Long&quot;;\n            } else if(d &lt;= Float.MAX_VALUE) {\n                return &quot;Float&quot;;\n            } else if(d &lt;= Double.MAX_VALUE) {\n                return &quot;Double&quot;;\n            }\n        } else if (str.matches(&quot;^[\\\\p{Nd}]+[.][\\\\p{Nd}Ee]+$&quot;)) {\n            double d = Double.parseDouble(str);\n            if (d &gt; Float.MAX_VALUE) {\n                return &quot;Double&quot;;\n            }\n            return &quot;Float&quot;;\n        }\n    } catch (NumberFormatException e) {\n    }\n\n    return &quot;Unknown&quot;;\n}\n</code></pre>\n"}],"owner":{"account_id":9945013,"reputation":145,"user_id":7360068,"accept_rate":75,"display_name":"Ali"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":33766,"favorite_count":0,"down_vote_count":6,"up_vote_count":12,"accepted_answer_id":43156135,"answer_count":3,"score":6,"last_activity_date":1667335536,"creation_date":1491044984,"question_id":43156077,"body_markdown":"I have a string, and I know that it only contains a number.\r\n\r\nHow can I check if this number is int or float?\r\n\r\n","title":"How to check if a string is &#39;float&#39; or &#39;int&#39;","body":"<p>I have a string, and I know that it only contains a number.</p>\n<p>How can I check if this number is int or float?</p>\n"},{"tags":["java","generics","interface","multiple-inheritance"],"comments":[{"owner":{"account_id":18250,"reputation":39302,"user_id":41655,"accept_rate":76,"display_name":"millimoose"},"score":2,"creation_date":1358876068,"post_id":14464226,"comment_id":20147556,"body_markdown":"&quot;I would like to have a pointer like this&quot; - you can&#39;t. Variables have to be of a known (possibly erased) type, and a type constraint isn&#39;t a type","body":"&quot;I would like to have a pointer like this&quot; - you can&#39;t. Variables have to be of a known (possibly erased) type, and a type constraint isn&#39;t a type"},{"owner":{"account_id":18250,"reputation":39302,"user_id":41655,"accept_rate":76,"display_name":"millimoose"},"score":5,"creation_date":1358876546,"post_id":14464226,"comment_id":20147812,"body_markdown":"Also, you can&#39;t actually return anything from `getFooBar()` without casting it to (T), which should give you a hint that you&#39;re doing something wrong.","body":"Also, you can&#39;t actually return anything from <code>getFooBar()</code> without casting it to (T), which should give you a hint that you&#39;re doing something wrong."},{"owner":{"account_id":18250,"reputation":39302,"user_id":41655,"accept_rate":76,"display_name":"millimoose"},"score":2,"creation_date":1358876850,"post_id":14464226,"comment_id":20147971,"body_markdown":"(Oddly enough, this discovered a bug in IntelliJ&#39;s code analysis engine, it only recognizes methods of `Foo` as valid.)","body":"(Oddly enough, this discovered a bug in IntelliJ&#39;s code analysis engine, it only recognizes methods of <code>Foo</code> as valid.)"},{"owner":{"account_id":357343,"reputation":54520,"user_id":697449,"accept_rate":82,"display_name":"Paul Bellora"},"score":3,"creation_date":1358879048,"post_id":14464226,"comment_id":20149048,"body_markdown":"Could the downvoter please explain? This is an understandable and relatively well-written question.","body":"Could the downvoter please explain? This is an understandable and relatively well-written question."},{"owner":{"account_id":357343,"reputation":54520,"user_id":697449,"accept_rate":82,"display_name":"Paul Bellora"},"score":0,"creation_date":1359573748,"post_id":14464226,"comment_id":20403918,"body_markdown":"Just to clarify the bounty message, I&#39;m specifically looking for a use case for a syntax like `Foo&amp;Bar bothFooAndBar = ...` - that is using `Foo&amp;Bar` as the type of a variable (like the question is asking for) or a return type.","body":"Just to clarify the bounty message, I&#39;m specifically looking for a use case for a syntax like <code>Foo&amp;Bar bothFooAndBar = ...</code> - that is using <code>Foo&amp;Bar</code> as the type of a variable (like the question is asking for) or a return type."}],"answers":[{"tags":[],"owner":{"account_id":2065125,"reputation":535,"user_id":1840775,"display_name":"jco.owens"},"down_vote_count":3,"up_vote_count":1,"is_accepted":false,"score":-2,"last_activity_date":1358875853,"creation_date":1358875853,"answer_id":14464560,"question_id":14464226,"body_markdown":"Not sure what Eclipse is doing for you, but most of the code above does not come close to compiling....\r\n\r\nI made the appropriate changes to get it to compile as much as possible and here is what I get:\r\n\r\n    public class Foo\r\n    {\r\n      public String getFoo() { return &quot;&quot;; }  // must have a body\r\n    }\r\n    public interface Bar // no ()\r\n    {\r\n      public void setBar(String bar);\r\n    }\r\n    public class FooBar&lt;T&gt;\r\n    {\r\n      public static &lt;T extends Foo &amp; Bar&gt; T getFooBar()\r\n      {\r\n        return null;\r\n      }\r\n    }\r\n    public class FB\r\n    {\r\n      private FooBar&lt;Object&gt; fb = new FooBar&lt;Object&gt;();\r\n    \r\n      public static void main(String args[])\r\n      {\r\n        new FB();\r\n      }\r\n    \r\n      public FB()\r\n      {\r\n        System.out.println(fb.getFooBar());\r\n      }\r\n    }\r\n    \r\n    FB.java:12: type parameters of &lt;T&gt;T cannot be determined; no unique maximal instance exists for type variable T with upper bounds java.lang.Object,Foo,Bar\r\n        System.out.println(fb.getFooBar());\r\n                                       ^\r\n    1 error\r\n\r\n","title":"How to reference a generic return type with multiple bounds","body":"<p>Not sure what Eclipse is doing for you, but most of the code above does not come close to compiling....</p>\n\n<p>I made the appropriate changes to get it to compile as much as possible and here is what I get:</p>\n\n<pre><code>public class Foo\n{\n  public String getFoo() { return \"\"; }  // must have a body\n}\npublic interface Bar // no ()\n{\n  public void setBar(String bar);\n}\npublic class FooBar&lt;T&gt;\n{\n  public static &lt;T extends Foo &amp; Bar&gt; T getFooBar()\n  {\n    return null;\n  }\n}\npublic class FB\n{\n  private FooBar&lt;Object&gt; fb = new FooBar&lt;Object&gt;();\n\n  public static void main(String args[])\n  {\n    new FB();\n  }\n\n  public FB()\n  {\n    System.out.println(fb.getFooBar());\n  }\n}\n\nFB.java:12: type parameters of &lt;T&gt;T cannot be determined; no unique maximal instance exists for type variable T with upper bounds java.lang.Object,Foo,Bar\n    System.out.println(fb.getFooBar());\n                                   ^\n1 error\n</code></pre>\n"},{"tags":[],"owner":{"account_id":357343,"reputation":54520,"user_id":697449,"accept_rate":82,"display_name":"Paul Bellora"},"down_vote_count":0,"up_vote_count":37,"is_accepted":true,"score":37,"last_activity_date":1648222772,"creation_date":1358895511,"answer_id":14469627,"question_id":14464226,"body_markdown":"While the type parameters of a generic method can be restricted by bounds, such as `extends Foo &amp; Bar`, they are ultimately decided by the caller. When you call `getFooBar()`, the call site already knows what `T` is being resolved to. Often, these type parameters will be *inferred* by the compiler, which is why you don&#39;t usually need to specify them, like this:\r\n\r\n    FooBar.&lt;FooAndBar&gt;getFooBar();\r\n\r\nBut even when `T` is inferred to be `FooAndBar`, that&#39;s really whats happening behind the scenes.\r\n\r\nSo, to answer your question, such a syntax like this:\r\n\r\n    Foo&amp;Bar bothFooAndBar = FooBar.getFooBar();\r\n\r\nWould never be useful in practice. The reason is that the caller *must already know* what `T` is. Either `T` is some concrete type:\r\n\r\n    FooAndBar bothFooAndBar = FooBar.&lt;FooAndBar&gt;getFooBar(); // T is FooAndBar\r\n\r\nOr, `T` is an unresolved type parameter, and we&#39;re in its scope:\r\n\r\n    &lt;U extends Foo &amp; Bar&gt; void someGenericMethod() {\r\n        U bothFooAndBar = FooBar.&lt;U&gt;getFooBar(); // T is U\r\n    }\r\n\r\nAnother example of that:\r\n\r\n    class SomeGenericClass&lt;V extends Foo &amp; Bar&gt; {\r\n        void someMethod() {\r\n            V bothFooAndBar = FooBar.&lt;V&gt;getFooBar(); // T is V\r\n        }\r\n    }\r\n\r\nTechnically, that wraps up the answer. But I&#39;d also like to point out that your example method `getFooBar` is inherently unsafe. Remember that the caller decides what `T` gets to be, not the method. Since `getFooBar` doesn&#39;t take any parameters related to `T`, and because of [type erasure][1], its only options would be to return `null` or to &quot;lie&quot; by making an unchecked cast, risking [heap pollution][2]. A typical workaround would be for `getFooBar` to take a `Class&lt;T&gt;` argument, or else a `FooFactory&lt;T&gt;` for example.\r\n\r\n## Update ##\r\n\r\nIt turns out I was wrong when I asserted that the caller of `getFooBar` must always know what `T` is. As @MiserableVariable points out, there are some situations where the type argument of a generic method is inferred to be a *wildcard capture*, rather than a concrete type or type variable. **See [his answer][3] for a great example of a `getFooBar` implementation that uses a proxy to drive home his point that `T` is unknown.**\r\n\r\nAs we discussed in the comments, [an example using `getFooBar`][4] created confusion because it takes no arguments to infer `T` from. Certain compilers [throw an error][5] on a contextless call to `getFooBar()` while others [are fine with it][6]. I *thought* that the inconsistent compile errors - along with the fact that calling `FooBar.&lt;?&gt;getFooBar()` is illegal - validated my point, but these turned out to be red herrings.\r\n\r\nBased on @MiserableVariable&#39;s answer, I put together [an new example][7] that uses a generic method with an argument, to remove the confusion. Assume we have interfaces `Foo` and `Bar` and an implementation `FooBarImpl`:\r\n\r\n    interface Foo { }\r\n    interface Bar { }\r\n    static class FooBarImpl implements Foo, Bar { }\r\n\r\nWe also have a simple container class that wraps an instance of some type implementing `Foo` and `Bar`. It declares a silly static method `unwrap` that takes a `FooBarContainer` and returns its referent:\r\n\r\n    static class FooBarContainer&lt;T extends Foo &amp; Bar&gt; {\r\n\r\n        private final T fooBar;\r\n        \r\n        public FooBarContainer(T fooBar) {\r\n            this.fooBar = fooBar;\r\n        }\r\n        \r\n        public T get() {\r\n            return fooBar;\r\n        }\r\n        \r\n        static &lt;T extends Foo &amp; Bar&gt; T unwrap(FooBarContainer&lt;T&gt; fooBarContainer) {\r\n            return fooBarContainer.get();\r\n        }\r\n    }\r\n\r\nNow let&#39;s say we have a wildcard parameterized type of `FooBarContainer`:\r\n\r\n    FooBarContainer&lt;?&gt; unknownFooBarContainer = ...;\r\n\r\nWe&#39;re allowed to pass `unknownFooBarContainer` into `unwrap`. This shows my earlier assertion was wrong, because the call site doesn&#39;t know what `T` is - only that it is some type within the bounds `extends Foo &amp; Bar`.\r\n\r\n    FooBarContainer.unwrap(unknownFooBarContainer); // T is a wildcard capture, ?\r\n\r\nAs I noted, calling `unwrap` with a wildcard is illegal:\r\n\r\n    FooBarContainer.&lt;?&gt;unwrap(unknownFooBarContainer); // compiler error\r\n\r\nI can only guess that this is because wildcard captures can never match each other - the `?` argument provided at the call site is ambiguous, with no way of saying that it should specifically match the wildcard in the type of `unknownFooBarContainer`.\r\n\r\nSo, here&#39;s the use case for the syntax the OP is asking about. Calling `unwrap` on `unknownFooBarContainer` returns a reference of type `? extends Foo &amp; Bar`. We can assign that reference to `Foo` or `Bar`, but not both:\r\n\r\n    Foo foo = FooBarContainer.unwrap(unknownFooBarContainer);\r\n    Bar bar = FooBarContainer.unwrap(unknownFooBarContainer);\r\n\r\nIf for some reason `unwrap` were expensive and we only wanted to call it once, we would be forced to cast:\r\n\r\n    Foo foo = FooBarContainer.unwrap(unknownFooBarContainer);\r\n    Bar bar = (Bar)foo;\r\n\r\nSo this is where the hypothetical syntax would come in handy:\r\n\r\n    Foo&amp;Bar fooBar = FooBarContainer.unwrap(unknownFooBarContainer);\r\n\r\nThis is just one fairly obscure use case. There would be pretty far-ranging implications for allowing such a syntax, both good and bad. It would open up room for abuse where it wasn&#39;t needed, and it&#39;s completely understandable why the language designers didn&#39;t implement such a thing. But I still think it&#39;s interesting to think about.\r\n\r\n*Note* - Since JDK 10 there is the `var` reserved type name, which makes this possible:\r\n\r\n    var fooBar = FooBarContainer.unwrap(unknownFooBarContainer);\r\n\r\nThe variable `fooBar` is inferred to have a type that implements both `Foo` and `Bar` and that cannot be denoted explicitly in source code.\r\n\r\n---\r\n\r\nA note about heap pollution\r\n---------------------------\r\n\r\n([Mostly for @MiserableVariable][8]) Here&#39;s a walkthrough of how an unsafe method like `getFooBar` causes heap pollution, and its implications. Given the following interface and implementations:\r\n\r\n    interface Foo { }\r\n    \r\n    static class Foo1 implements Foo {\r\n        public void foo1Method() { }\r\n    }\r\n    \r\n    static class Foo2 implements Foo { }\r\n\r\nLet&#39;s implement an unsafe method `getFoo`, similar to `getFooBar` but simplified for this example:\r\n\r\n    @SuppressWarnings(&quot;unchecked&quot;)\r\n    static &lt;T extends Foo&gt; T getFoo() {\r\n        //unchecked cast - ClassCastException is not thrown here if T is wrong\r\n        return (T)new Foo2();\r\n    }\r\n\r\n    public static void main(String[] args) {\r\n        Foo1 foo1 = getFoo(); //ClassCastException is thrown here\r\n    }\r\n\r\nHere, when the new `Foo2` is cast to `T`, it is &quot;unchecked&quot;, meaning because of type erasure the runtime doesn&#39;t know it should fail, even though it should in this case since `T` was `Foo1`. Instead, the heap is &quot;polluted&quot;, meaning references are pointing to objects they shouldn&#39;t have been allowed to.\r\n\r\nThe failure happens after the method returns, when the `Foo2` instance tries to get assigned to the `foo1` reference, which has the reifiable type `Foo1`.\r\n\r\nYou&#39;re probably thinking, &quot;Okay so it blew up at the call site instead of the method, big deal.&quot; But it can easily get more complicated when more generics are involved. For example:\r\n\r\n    static &lt;T extends Foo&gt; List&lt;T&gt; getFooList(int size) {\r\n        List&lt;T&gt; fooList = new ArrayList&lt;T&gt;(size);\r\n        for (int i = 0; i &lt; size; i++) {\r\n            T foo = getFoo();\r\n            fooList.add(foo);\r\n        }\r\n        return fooList;\r\n    }\r\n\r\n    public static void main(String[] args) {\r\n        \r\n        List&lt;Foo1&gt; foo1List = getFooList(5);\r\n        \r\n        // a bunch of things happen\r\n        \r\n        //sometime later maybe, depending on state\r\n        foo1List.get(0).foo1Method(); //ClassCastException is thrown here\r\n    }\r\n\r\nNow it doesn&#39;t blow up at the call site. It blows up sometime later when the contents of `foo1List` get used. This is how heap pollution gets harder to debug, because the exception stacktrace doesn&#39;t point you to the actual problem.\r\n\r\nIt gets even more complicated when the caller is in generic scope itself. Imagine instead of getting a `List&lt;Foo1&gt;` we&#39;re getting a `List&lt;T&gt;`, putting it in a `Map&lt;K, List&lt;T&gt;&gt;` and returning it to yet another method. You get the idea I hope.\r\n\r\n\r\n  [1]: http://docs.oracle.com/javase/tutorial/java/generics/erasure.html\r\n  [2]: https://softwareengineering.stackexchange.com/a/156008/33756\r\n  [3]: https://stackoverflow.com/a/14632995/697449\r\n  [4]: http://pastebin.com/UGNvgjEZ\r\n  [5]: http://ideone.com/3CqrAJ\r\n  [6]: http://ideone.com/YuKQLq\r\n  [7]: http://ideone.com/V1VED9\r\n  [8]: https://stackoverflow.com/questions/14464226/how-to-reference-a-generic-return-type-with-multiple-bounds#comment20233991_14469627","title":"How to reference a generic return type with multiple bounds","body":"<p>While the type parameters of a generic method can be restricted by bounds, such as <code>extends Foo &amp; Bar</code>, they are ultimately decided by the caller. When you call <code>getFooBar()</code>, the call site already knows what <code>T</code> is being resolved to. Often, these type parameters will be <em>inferred</em> by the compiler, which is why you don't usually need to specify them, like this:</p>\n<pre><code>FooBar.&lt;FooAndBar&gt;getFooBar();\n</code></pre>\n<p>But even when <code>T</code> is inferred to be <code>FooAndBar</code>, that's really whats happening behind the scenes.</p>\n<p>So, to answer your question, such a syntax like this:</p>\n<pre><code>Foo&amp;Bar bothFooAndBar = FooBar.getFooBar();\n</code></pre>\n<p>Would never be useful in practice. The reason is that the caller <em>must already know</em> what <code>T</code> is. Either <code>T</code> is some concrete type:</p>\n<pre><code>FooAndBar bothFooAndBar = FooBar.&lt;FooAndBar&gt;getFooBar(); // T is FooAndBar\n</code></pre>\n<p>Or, <code>T</code> is an unresolved type parameter, and we're in its scope:</p>\n<pre><code>&lt;U extends Foo &amp; Bar&gt; void someGenericMethod() {\n    U bothFooAndBar = FooBar.&lt;U&gt;getFooBar(); // T is U\n}\n</code></pre>\n<p>Another example of that:</p>\n<pre><code>class SomeGenericClass&lt;V extends Foo &amp; Bar&gt; {\n    void someMethod() {\n        V bothFooAndBar = FooBar.&lt;V&gt;getFooBar(); // T is V\n    }\n}\n</code></pre>\n<p>Technically, that wraps up the answer. But I'd also like to point out that your example method <code>getFooBar</code> is inherently unsafe. Remember that the caller decides what <code>T</code> gets to be, not the method. Since <code>getFooBar</code> doesn't take any parameters related to <code>T</code>, and because of <a href=\"http://docs.oracle.com/javase/tutorial/java/generics/erasure.html\" rel=\"nofollow noreferrer\">type erasure</a>, its only options would be to return <code>null</code> or to &quot;lie&quot; by making an unchecked cast, risking <a href=\"https://softwareengineering.stackexchange.com/a/156008/33756\">heap pollution</a>. A typical workaround would be for <code>getFooBar</code> to take a <code>Class&lt;T&gt;</code> argument, or else a <code>FooFactory&lt;T&gt;</code> for example.</p>\n<h2>Update</h2>\n<p>It turns out I was wrong when I asserted that the caller of <code>getFooBar</code> must always know what <code>T</code> is. As @MiserableVariable points out, there are some situations where the type argument of a generic method is inferred to be a <em>wildcard capture</em>, rather than a concrete type or type variable. <strong>See <a href=\"https://stackoverflow.com/a/14632995/697449\">his answer</a> for a great example of a <code>getFooBar</code> implementation that uses a proxy to drive home his point that <code>T</code> is unknown.</strong></p>\n<p>As we discussed in the comments, <a href=\"http://pastebin.com/UGNvgjEZ\" rel=\"nofollow noreferrer\">an example using <code>getFooBar</code></a> created confusion because it takes no arguments to infer <code>T</code> from. Certain compilers <a href=\"http://ideone.com/3CqrAJ\" rel=\"nofollow noreferrer\">throw an error</a> on a contextless call to <code>getFooBar()</code> while others <a href=\"http://ideone.com/YuKQLq\" rel=\"nofollow noreferrer\">are fine with it</a>. I <em>thought</em> that the inconsistent compile errors - along with the fact that calling <code>FooBar.&lt;?&gt;getFooBar()</code> is illegal - validated my point, but these turned out to be red herrings.</p>\n<p>Based on @MiserableVariable's answer, I put together <a href=\"http://ideone.com/V1VED9\" rel=\"nofollow noreferrer\">an new example</a> that uses a generic method with an argument, to remove the confusion. Assume we have interfaces <code>Foo</code> and <code>Bar</code> and an implementation <code>FooBarImpl</code>:</p>\n<pre><code>interface Foo { }\ninterface Bar { }\nstatic class FooBarImpl implements Foo, Bar { }\n</code></pre>\n<p>We also have a simple container class that wraps an instance of some type implementing <code>Foo</code> and <code>Bar</code>. It declares a silly static method <code>unwrap</code> that takes a <code>FooBarContainer</code> and returns its referent:</p>\n<pre><code>static class FooBarContainer&lt;T extends Foo &amp; Bar&gt; {\n\n    private final T fooBar;\n    \n    public FooBarContainer(T fooBar) {\n        this.fooBar = fooBar;\n    }\n    \n    public T get() {\n        return fooBar;\n    }\n    \n    static &lt;T extends Foo &amp; Bar&gt; T unwrap(FooBarContainer&lt;T&gt; fooBarContainer) {\n        return fooBarContainer.get();\n    }\n}\n</code></pre>\n<p>Now let's say we have a wildcard parameterized type of <code>FooBarContainer</code>:</p>\n<pre><code>FooBarContainer&lt;?&gt; unknownFooBarContainer = ...;\n</code></pre>\n<p>We're allowed to pass <code>unknownFooBarContainer</code> into <code>unwrap</code>. This shows my earlier assertion was wrong, because the call site doesn't know what <code>T</code> is - only that it is some type within the bounds <code>extends Foo &amp; Bar</code>.</p>\n<pre><code>FooBarContainer.unwrap(unknownFooBarContainer); // T is a wildcard capture, ?\n</code></pre>\n<p>As I noted, calling <code>unwrap</code> with a wildcard is illegal:</p>\n<pre><code>FooBarContainer.&lt;?&gt;unwrap(unknownFooBarContainer); // compiler error\n</code></pre>\n<p>I can only guess that this is because wildcard captures can never match each other - the <code>?</code> argument provided at the call site is ambiguous, with no way of saying that it should specifically match the wildcard in the type of <code>unknownFooBarContainer</code>.</p>\n<p>So, here's the use case for the syntax the OP is asking about. Calling <code>unwrap</code> on <code>unknownFooBarContainer</code> returns a reference of type <code>? extends Foo &amp; Bar</code>. We can assign that reference to <code>Foo</code> or <code>Bar</code>, but not both:</p>\n<pre><code>Foo foo = FooBarContainer.unwrap(unknownFooBarContainer);\nBar bar = FooBarContainer.unwrap(unknownFooBarContainer);\n</code></pre>\n<p>If for some reason <code>unwrap</code> were expensive and we only wanted to call it once, we would be forced to cast:</p>\n<pre><code>Foo foo = FooBarContainer.unwrap(unknownFooBarContainer);\nBar bar = (Bar)foo;\n</code></pre>\n<p>So this is where the hypothetical syntax would come in handy:</p>\n<pre><code>Foo&amp;Bar fooBar = FooBarContainer.unwrap(unknownFooBarContainer);\n</code></pre>\n<p>This is just one fairly obscure use case. There would be pretty far-ranging implications for allowing such a syntax, both good and bad. It would open up room for abuse where it wasn't needed, and it's completely understandable why the language designers didn't implement such a thing. But I still think it's interesting to think about.</p>\n<p><em>Note</em> - Since JDK 10 there is the <code>var</code> reserved type name, which makes this possible:</p>\n<pre><code>var fooBar = FooBarContainer.unwrap(unknownFooBarContainer);\n</code></pre>\n<p>The variable <code>fooBar</code> is inferred to have a type that implements both <code>Foo</code> and <code>Bar</code> and that cannot be denoted explicitly in source code.</p>\n<hr />\n<h2>A note about heap pollution</h2>\n<p>(<a href=\"https://stackoverflow.com/questions/14464226/how-to-reference-a-generic-return-type-with-multiple-bounds#comment20233991_14469627\">Mostly for @MiserableVariable</a>) Here's a walkthrough of how an unsafe method like <code>getFooBar</code> causes heap pollution, and its implications. Given the following interface and implementations:</p>\n<pre><code>interface Foo { }\n\nstatic class Foo1 implements Foo {\n    public void foo1Method() { }\n}\n\nstatic class Foo2 implements Foo { }\n</code></pre>\n<p>Let's implement an unsafe method <code>getFoo</code>, similar to <code>getFooBar</code> but simplified for this example:</p>\n<pre><code>@SuppressWarnings(&quot;unchecked&quot;)\nstatic &lt;T extends Foo&gt; T getFoo() {\n    //unchecked cast - ClassCastException is not thrown here if T is wrong\n    return (T)new Foo2();\n}\n\npublic static void main(String[] args) {\n    Foo1 foo1 = getFoo(); //ClassCastException is thrown here\n}\n</code></pre>\n<p>Here, when the new <code>Foo2</code> is cast to <code>T</code>, it is &quot;unchecked&quot;, meaning because of type erasure the runtime doesn't know it should fail, even though it should in this case since <code>T</code> was <code>Foo1</code>. Instead, the heap is &quot;polluted&quot;, meaning references are pointing to objects they shouldn't have been allowed to.</p>\n<p>The failure happens after the method returns, when the <code>Foo2</code> instance tries to get assigned to the <code>foo1</code> reference, which has the reifiable type <code>Foo1</code>.</p>\n<p>You're probably thinking, &quot;Okay so it blew up at the call site instead of the method, big deal.&quot; But it can easily get more complicated when more generics are involved. For example:</p>\n<pre><code>static &lt;T extends Foo&gt; List&lt;T&gt; getFooList(int size) {\n    List&lt;T&gt; fooList = new ArrayList&lt;T&gt;(size);\n    for (int i = 0; i &lt; size; i++) {\n        T foo = getFoo();\n        fooList.add(foo);\n    }\n    return fooList;\n}\n\npublic static void main(String[] args) {\n    \n    List&lt;Foo1&gt; foo1List = getFooList(5);\n    \n    // a bunch of things happen\n    \n    //sometime later maybe, depending on state\n    foo1List.get(0).foo1Method(); //ClassCastException is thrown here\n}\n</code></pre>\n<p>Now it doesn't blow up at the call site. It blows up sometime later when the contents of <code>foo1List</code> get used. This is how heap pollution gets harder to debug, because the exception stacktrace doesn't point you to the actual problem.</p>\n<p>It gets even more complicated when the caller is in generic scope itself. Imagine instead of getting a <code>List&lt;Foo1&gt;</code> we're getting a <code>List&lt;T&gt;</code>, putting it in a <code>Map&lt;K, List&lt;T&gt;&gt;</code> and returning it to yet another method. You get the idea I hope.</p>\n"},{"tags":[],"owner":{"account_id":317594,"reputation":2093,"user_id":634368,"accept_rate":100,"display_name":"Sednus"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1550074456,"creation_date":1359570492,"answer_id":14611127,"question_id":14464226,"body_markdown":"  Like @Paul Bellora mentioned in his answer, the type get resolved by the caller, since essentially it will now what it is calling. I would just like to add to his answer with an use case where I think the usage of the syntax could be of benefit.\r\n\r\n   There are always alternatives that avoid using such syntax. I cannot think of a single example that this is utterly necessary. However I can think of a use case of a particular situation that this syntax could be used conveniently, although I didn&#39;t even used it myself. I know its not the best example out there but it can get to the point. \r\n \r\n&lt;h2&gt;Case&lt;/h2&gt;\r\n\r\n  Recently I&#39;ve been working in the development of an user interface. In this application I use a library to manage my GUI elements. In addition to the features of the library, I created a custom interface that defines a View in my application that has inputs for a specific type of data, lets say, input of coordinates. That interface would look like:\r\n\r\n    public interface CoordinateView extends View\r\n    {\r\n        Coordinate getCoordinate();\r\n        //Maybe more stuff\r\n    } \r\n\r\n&lt;br/&gt;\r\n\r\n  I have several windows across my application that implement this interface. Now lets say that for some reason I want to store in a model the last coordinate submitted in a window and close the window right after. For this I can attach a handler to the window button that submits the form, the handler will get triggered when the user closes the Window. I could achieve that by simply adding the handler anonymously in every window, like:\r\n\r\n\r\n    public MyWindow extends Window implements CoordinateView, OtherInterface\r\n    {\r\n        private Button submitButton;\r\n \r\n        public MyWindow()\r\n        {\r\n            super();\r\n            //Create all the elements\r\n          \r\n            submitButton.addClickHandler(\r\n                new ClickHandler()\r\n                {\r\n                    @Override\r\n                    onCLick(ClickEvent e)\r\n                    {\r\n                        getModel().add(getCoordinate());\r\n                        destroy();\r\n                    }\r\n                });  \r\n       }\r\n    }\r\n\r\n However, this design is not desirable for me, it is not modular enough. Considering I have a decent amount of windows  with this behavior, changing it could get rather tedious. So I rather extract the anonymous method in a class so that it would be easier to change and maintain. But the problem is that the destroy() method is not defined in any interface, is just part of window and the getCoordinate() method is defined in the interface I defined.\r\n\r\n&lt;h2&gt;Usage&lt;/h2&gt;\r\n\r\nIn this case I could use multiple bounds like the following:\r\n\r\n\r\n    public class MyController &lt;T extends Window &amp; CoordinateView&gt; implements ClickHandler\r\n    {\r\n        private T windowWithCoordinates;\r\n\r\n        public MyController (T window)\r\n        {\r\n            windowWithCoordinates = window;\r\n        }\r\n\r\n        @Override\r\n        onClick(ClickEvent e)\r\n        {\r\n            getModel().add(windowWithCoordinates.getCoordinate());\r\n            windowWithCoordinate.destroy();\r\n        }\r\n    }\r\n\r\n\r\nThen the code in the windows will now be:\r\n\r\n    public MyWindow extends Window implements CoordinateView, OtherInterface\r\n    {\r\n        private Button submitButton;\r\n \r\n        public MyWindow()\r\n        {\r\n            super();\r\n            //Create all the elements\r\n              \r\n            submitButton.addClickHandler(new MyController&lt;MyWindow&gt;(this));\r\n                  \r\n        }\r\n    }\r\n\r\n\r\nNotice that the behaviour will remain the same, the code is just a cohesive as it used to be. Its only more modular, but it didn&#39;t required the creation of an additional interface to be able to extract it properly.\r\n\r\n   &lt;h2&gt;Alternative&lt;/h2&gt;\r\n \r\nAlternatively, I could have defined an additional interface extending `CoordinateView` and define a method to close the window.\r\n\r\n    public interface CoordinateWindow extends CoordinateView\r\n    {\r\n        void destroy();\r\n    }\r\n\r\nHaving the window implement this more specific interface instead of making unnecessary use of generic parameters in the extracted controller:\r\n\r\n    public class MyController implements ClickHandler\r\n    {\r\n        private CoordinateWindow windowWithCoordinates;\r\n\r\n        public MyController (CoordinateWindow window)\r\n        {\r\n            windowWithCoordinates = window;\r\n        }\r\n\r\n        @Override\r\n        onClick(ClickEvent e)\r\n        {\r\n            getModel().add(windowWithCoordinates.getCoordinate());\r\n            windowWithCoordinate.destroy();\r\n        }\r\n    }\r\n\r\n      \r\n    public MyWindow extends Window implements CoordinateWindow\r\n    {\r\n        private Button submitButton;\r\n \r\n        public MyWindow()\r\n        {\r\n            super();\r\n            //Create all the elements  \r\n            submitButton.addClickHandler(new MyController(this));                  \r\n        }\r\n\r\n        @Override\r\n        void destroy()\r\n        {\r\n            this.destroy();\r\n        }\r\n    }\r\n\r\n\r\n   This approach for some can be seen as much cleaner than the previous and even more reusable since now it could be added to other &quot;windows&quot; outside of the specified hierarchy. Personally, I prefer this approach as well. However, it may result in a little more coding since a new interface has to be defined just for the sake of getting a access to a desired method.\r\n\r\n\r\nIn conclusion, although I personally don&#39;t recommend it I think using generic types with multiple bounds could help in coupling definitions while reducing the amount of code.","title":"How to reference a generic return type with multiple bounds","body":"<p>Like @Paul Bellora mentioned in his answer, the type get resolved by the caller, since essentially it will now what it is calling. I would just like to add to his answer with an use case where I think the usage of the syntax could be of benefit.</p>\n\n<p>There are always alternatives that avoid using such syntax. I cannot think of a single example that this is utterly necessary. However I can think of a use case of a particular situation that this syntax could be used conveniently, although I didn't even used it myself. I know its not the best example out there but it can get to the point. </p>\n\n<h2>Case</h2>\n\n<p>Recently I've been working in the development of an user interface. In this application I use a library to manage my GUI elements. In addition to the features of the library, I created a custom interface that defines a View in my application that has inputs for a specific type of data, lets say, input of coordinates. That interface would look like:</p>\n\n<pre><code>public interface CoordinateView extends View\n{\n    Coordinate getCoordinate();\n    //Maybe more stuff\n} \n</code></pre>\n\n<p><br/></p>\n\n<p>I have several windows across my application that implement this interface. Now lets say that for some reason I want to store in a model the last coordinate submitted in a window and close the window right after. For this I can attach a handler to the window button that submits the form, the handler will get triggered when the user closes the Window. I could achieve that by simply adding the handler anonymously in every window, like:</p>\n\n<pre><code>public MyWindow extends Window implements CoordinateView, OtherInterface\n{\n    private Button submitButton;\n\n    public MyWindow()\n    {\n        super();\n        //Create all the elements\n\n        submitButton.addClickHandler(\n            new ClickHandler()\n            {\n                @Override\n                onCLick(ClickEvent e)\n                {\n                    getModel().add(getCoordinate());\n                    destroy();\n                }\n            });  \n   }\n}\n</code></pre>\n\n<p>However, this design is not desirable for me, it is not modular enough. Considering I have a decent amount of windows  with this behavior, changing it could get rather tedious. So I rather extract the anonymous method in a class so that it would be easier to change and maintain. But the problem is that the destroy() method is not defined in any interface, is just part of window and the getCoordinate() method is defined in the interface I defined.</p>\n\n<h2>Usage</h2>\n\n<p>In this case I could use multiple bounds like the following:</p>\n\n<pre><code>public class MyController &lt;T extends Window &amp; CoordinateView&gt; implements ClickHandler\n{\n    private T windowWithCoordinates;\n\n    public MyController (T window)\n    {\n        windowWithCoordinates = window;\n    }\n\n    @Override\n    onClick(ClickEvent e)\n    {\n        getModel().add(windowWithCoordinates.getCoordinate());\n        windowWithCoordinate.destroy();\n    }\n}\n</code></pre>\n\n<p>Then the code in the windows will now be:</p>\n\n<pre><code>public MyWindow extends Window implements CoordinateView, OtherInterface\n{\n    private Button submitButton;\n\n    public MyWindow()\n    {\n        super();\n        //Create all the elements\n\n        submitButton.addClickHandler(new MyController&lt;MyWindow&gt;(this));\n\n    }\n}\n</code></pre>\n\n<p>Notice that the behaviour will remain the same, the code is just a cohesive as it used to be. Its only more modular, but it didn't required the creation of an additional interface to be able to extract it properly.</p>\n\n<p><h2>Alternative</h2></p>\n\n<p>Alternatively, I could have defined an additional interface extending <code>CoordinateView</code> and define a method to close the window.</p>\n\n<pre><code>public interface CoordinateWindow extends CoordinateView\n{\n    void destroy();\n}\n</code></pre>\n\n<p>Having the window implement this more specific interface instead of making unnecessary use of generic parameters in the extracted controller:</p>\n\n<pre><code>public class MyController implements ClickHandler\n{\n    private CoordinateWindow windowWithCoordinates;\n\n    public MyController (CoordinateWindow window)\n    {\n        windowWithCoordinates = window;\n    }\n\n    @Override\n    onClick(ClickEvent e)\n    {\n        getModel().add(windowWithCoordinates.getCoordinate());\n        windowWithCoordinate.destroy();\n    }\n}\n\n\npublic MyWindow extends Window implements CoordinateWindow\n{\n    private Button submitButton;\n\n    public MyWindow()\n    {\n        super();\n        //Create all the elements  \n        submitButton.addClickHandler(new MyController(this));                  \n    }\n\n    @Override\n    void destroy()\n    {\n        this.destroy();\n    }\n}\n</code></pre>\n\n<p>This approach for some can be seen as much cleaner than the previous and even more reusable since now it could be added to other \"windows\" outside of the specified hierarchy. Personally, I prefer this approach as well. However, it may result in a little more coding since a new interface has to be defined just for the sake of getting a access to a desired method.</p>\n\n<p>In conclusion, although I personally don't recommend it I think using generic types with multiple bounds could help in coupling definitions while reducing the amount of code.</p>\n"},{"tags":[],"owner":{"account_id":9943,"reputation":28522,"user_id":18573,"accept_rate":56,"display_name":"Miserable Variable"},"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1550074515,"creation_date":1359658274,"answer_id":14632995,"question_id":14464226,"body_markdown":"There are cases where a called method returning a value can be used by the caller *without* knowing the concrete type. It is even likely that such a type does not exist at all, it is only a proxy: \r\n\r\n    import java.lang.reflect.*;\r\n    \r\n    interface Foo {}\r\n    interface Bar {}\r\n    \r\n    class FooBar1 implements Foo, Bar {public String toString() { return &quot;FooBar1&quot;; }}\r\n    class FooBar2 implements Foo, Bar {public String toString() { return &quot;FooBar2&quot;; }}   \r\n \r\n    class FooBar {\r\n    \tstatic &lt;T extends Foo &amp; Bar&gt; T getFooBar1() { return (T) new FooBar1(); }\r\n    \tstatic &lt;T extends Foo &amp; Bar&gt; T getFooBar2() { return (T) new FooBar2(); }\r\n    \tstatic &lt;T extends Foo &amp; Bar&gt; T getFooBar() { \r\n    \t\treturn (T) \r\n    \t\tProxy.newProxyInstance(\r\n    \t\t\tFoo.class.getClassLoader(),\r\n    \t\t\tnew Class[] { Foo.class, Bar.class },\r\n    \t\t\tnew InvocationHandler() {\r\n    \t\t\t    public Object invoke(Object proxy, Method method, Object[] args) {\r\n    \t\t\t\t\treturn &quot;PROXY!!!&quot;;}});\r\n    \t}\r\n    \r\n    \tstatic &lt;U extends Foo &amp; Bar&gt; void show(U u) { System.out.println(u); }\r\n    \r\n    \tpublic static void main(String[] args) {\r\n    \t\tshow(getFooBar1());\r\n    \t\tshow(getFooBar2());\r\n    \t\tshow(getFooBar());\t\t\r\n    \t}\r\n    \r\n    }\r\n\r\nBoth `FooBar1` and `FooBar2` implement `Foo` and `Bar`. In `main`, the calls to `getFooBar1` and `getFooBar2` can be assigned to a variable, though there isn&#39;t a strong reason for it to know IMHO.  \r\n\r\n**But `getFooBar` is the interesting case**, which uses a proxy. In practice, it may be the *only* instance of a an object that implements the two interfaces. A different method (`show` here) can be used with a temporary in a type-safer manner, but it cannot be assigned to a variable without the `FooBarWrapper` hack described in the question. It is not even possible to create a generic wrapper, `class Wrapper&lt;T extends U &amp; V&gt;` is not allowed.\r\n\r\nThe only trouble seems be defining a syntax, other type checking mechanisms seem to be in place, at least in Oracle javac 1.7.0.\r\n\r\n","title":"How to reference a generic return type with multiple bounds","body":"<p>There are cases where a called method returning a value can be used by the caller <em>without</em> knowing the concrete type. It is even likely that such a type does not exist at all, it is only a proxy: </p>\n\n<pre><code>import java.lang.reflect.*;\n\ninterface Foo {}\ninterface Bar {}\n\nclass FooBar1 implements Foo, Bar {public String toString() { return \"FooBar1\"; }}\nclass FooBar2 implements Foo, Bar {public String toString() { return \"FooBar2\"; }}   \n\nclass FooBar {\n    static &lt;T extends Foo &amp; Bar&gt; T getFooBar1() { return (T) new FooBar1(); }\n    static &lt;T extends Foo &amp; Bar&gt; T getFooBar2() { return (T) new FooBar2(); }\n    static &lt;T extends Foo &amp; Bar&gt; T getFooBar() { \n        return (T) \n        Proxy.newProxyInstance(\n            Foo.class.getClassLoader(),\n            new Class[] { Foo.class, Bar.class },\n            new InvocationHandler() {\n                public Object invoke(Object proxy, Method method, Object[] args) {\n                    return \"PROXY!!!\";}});\n    }\n\n    static &lt;U extends Foo &amp; Bar&gt; void show(U u) { System.out.println(u); }\n\n    public static void main(String[] args) {\n        show(getFooBar1());\n        show(getFooBar2());\n        show(getFooBar());      \n    }\n\n}\n</code></pre>\n\n<p>Both <code>FooBar1</code> and <code>FooBar2</code> implement <code>Foo</code> and <code>Bar</code>. In <code>main</code>, the calls to <code>getFooBar1</code> and <code>getFooBar2</code> can be assigned to a variable, though there isn't a strong reason for it to know IMHO.  </p>\n\n<p><strong>But <code>getFooBar</code> is the interesting case</strong>, which uses a proxy. In practice, it may be the <em>only</em> instance of a an object that implements the two interfaces. A different method (<code>show</code> here) can be used with a temporary in a type-safer manner, but it cannot be assigned to a variable without the <code>FooBarWrapper</code> hack described in the question. It is not even possible to create a generic wrapper, <code>class Wrapper&lt;T extends U &amp; V&gt;</code> is not allowed.</p>\n\n<p>The only trouble seems be defining a syntax, other type checking mechanisms seem to be in place, at least in Oracle javac 1.7.0.</p>\n"}],"owner":{"account_id":308278,"reputation":15431,"user_id":620053,"accept_rate":93,"display_name":"Rafael T"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":21087,"favorite_count":0,"down_vote_count":2,"up_vote_count":47,"accepted_answer_id":14469627,"answer_count":4,"score":45,"last_activity_date":1667333804,"creation_date":1358874883,"question_id":14464226,"body_markdown":"I have recently seen that one can declare a return type that is also bounded by an interface. Consider the following class and interface:\r\n\r\n    public class Foo {\r\n        public String getFoo() { ... }\r\n    }\r\n    \r\n    public interface Bar {\r\n        public void setBar(String bar);\r\n    }\r\n\r\nI can declare a return type like this:\r\n\r\n    public class FooBar {\r\n        public static &lt;T extends Foo &amp; Bar&gt; T getFooBar() {\r\n            //some implementation that returns a Foo object,\r\n            //which is forced to implement Bar\r\n        }\r\n    }\r\n\r\nIf I call that method from somewhere, my IDE is telling me that the return type has the method `String getFoo()` as well as `setBar(String)`, but only If I point a dot behind the *Function* like this:\r\n\r\n    FooBar.getFooBar(). // here the IDE is showing the available methods.\r\n\r\nIs there a way to get a reference to such an Object? I mean, if I would do something like this:\r\n\r\n    //bar only has the method setBar(String)\r\n    Bar bar = FooBar.getFooBar();\r\n    //foo only has the getFoo():String method\r\n    Foo foo = FooBar.getFooBar();\r\n\r\nI would like to have a reference like this (pseudo code):\r\n\r\n    &lt;T extents Foo &amp; Bar&gt; fooBar = FooBar.getFooBar();\r\n    //or maybe\r\n    $1Bar bar = FooBar.getFooBar();\r\n    //or else maybe\r\n    Foo&amp;Bar bar = FooBar.getFooBar();\r\n\r\nIs this possible somehow in Java, or am I only able to declare return types like this? I think Java has to type it also, somehow. I&#39;d prefer not to resort to a wrapper like this, as it feels like cheating:\r\n\r\n    public class FooBarWrapper&lt;T extends Foo&amp;Bar&gt; extends Foo implements Bar {\r\n        public T foobar;\r\n    \r\n        public FooBarWrapper(T val){\r\n            foobar = val;\r\n        }\r\n    \r\n    \r\n        @Override\r\n        public void setBar(String bar) {\r\n            foobar.setBar(bar);\r\n        }\r\n    \r\n        @Override\r\n        public String getFoo() {\r\n            return foobar.getFoo();\r\n        }\r\n    }\r\n\r\nDid Java really invent such a nice feature, but forget that one would like to have a reference to it?\r\n","title":"How to reference a generic return type with multiple bounds","body":"<p>I have recently seen that one can declare a return type that is also bounded by an interface. Consider the following class and interface:</p>\n<pre><code>public class Foo {\n    public String getFoo() { ... }\n}\n\npublic interface Bar {\n    public void setBar(String bar);\n}\n</code></pre>\n<p>I can declare a return type like this:</p>\n<pre><code>public class FooBar {\n    public static &lt;T extends Foo &amp; Bar&gt; T getFooBar() {\n        //some implementation that returns a Foo object,\n        //which is forced to implement Bar\n    }\n}\n</code></pre>\n<p>If I call that method from somewhere, my IDE is telling me that the return type has the method <code>String getFoo()</code> as well as <code>setBar(String)</code>, but only If I point a dot behind the <em>Function</em> like this:</p>\n<pre><code>FooBar.getFooBar(). // here the IDE is showing the available methods.\n</code></pre>\n<p>Is there a way to get a reference to such an Object? I mean, if I would do something like this:</p>\n<pre><code>//bar only has the method setBar(String)\nBar bar = FooBar.getFooBar();\n//foo only has the getFoo():String method\nFoo foo = FooBar.getFooBar();\n</code></pre>\n<p>I would like to have a reference like this (pseudo code):</p>\n<pre><code>&lt;T extents Foo &amp; Bar&gt; fooBar = FooBar.getFooBar();\n//or maybe\n$1Bar bar = FooBar.getFooBar();\n//or else maybe\nFoo&amp;Bar bar = FooBar.getFooBar();\n</code></pre>\n<p>Is this possible somehow in Java, or am I only able to declare return types like this? I think Java has to type it also, somehow. I'd prefer not to resort to a wrapper like this, as it feels like cheating:</p>\n<pre><code>public class FooBarWrapper&lt;T extends Foo&amp;Bar&gt; extends Foo implements Bar {\n    public T foobar;\n\n    public FooBarWrapper(T val){\n        foobar = val;\n    }\n\n\n    @Override\n    public void setBar(String bar) {\n        foobar.setBar(bar);\n    }\n\n    @Override\n    public String getFoo() {\n        return foobar.getFoo();\n    }\n}\n</code></pre>\n<p>Did Java really invent such a nice feature, but forget that one would like to have a reference to it?</p>\n"},{"tags":["java","memory-management","jvm"],"answers":[{"tags":[],"owner":{"account_id":4210603,"reputation":94356,"user_id":3448419,"display_name":"apangin"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1667333803,"creation_date":1576200619,"answer_id":59314953,"question_id":59310446,"body_markdown":"The first invocation of `new Long(0)` causes the resolution of the constant pool entry referenced by `new` bytecode. While resolving `CONSTANT_Class_info` for the first time, JVM loads the referenced class - `java.lang.Long`.\r\n\r\n[`ClassLoader.loadClass`](http://hg.openjdk.java.net/jdk8u/jdk8u/jdk/file/78d2004f65eb/src/share/classes/java/lang/ClassLoader.java#l395) is implemented in Java, and it can certainly allocate Java objects. For instance, [`getClassLoadingLock`](http://hg.openjdk.java.net/jdk8u/jdk8u/jdk/file/78d2004f65eb/src/share/classes/java/lang/ClassLoader.java#l453) method creates a new lock object and a new entry in `parallelLockMap`:\r\n```\r\n    protected Object getClassLoadingLock(String className) {\r\n        Object lock = this;\r\n        if (parallelLockMap != null) {\r\n            Object newLock = new Object();\r\n            lock = parallelLockMap.putIfAbsent(className, newLock);\r\n            if (lock == null) {\r\n                lock = newLock;\r\n            }\r\n        }\r\n        return lock;\r\n    }\r\n```\r\n\r\nAlso, when doing a class name lookup in the system dictionary, JVM creates a new String object.\r\n\r\nI used [async-profiler](https://github.com/jvm-profiling-tools/async-profiler) to record all heap allocations JVM does when loading `java.lang.Long` class. Here is the clickable interactive Flame Graph:\r\n\r\n[![Allocation Flame Graph][1]](https://profiler.tools/misc/load-class-alloc.svg)\r\n\r\nThe graph includes 13 samples - one per each allocated object. The type of an allocated object is not shown, but it can be easily guessed from the context (stack trace).\r\n\r\n - Green color denotes Java stack trace;\r\n - Yellow means VM stack trace.\r\n\r\nNote that each `java_lang_String::basic_create()` (and similar) allocates two objects: an instance of `java.lang.String` and its backing `char[]` array.\r\n\r\nThe graph is produced by the following test program:\r\n```\r\nimport one.profiler.AsyncProfiler;\r\n\r\npublic class ProfileHeapAlloc {\r\n\r\n    public static void main(String[] args) throws Exception {\r\n        AsyncProfiler profiler = AsyncProfiler.getInstance();\r\n\r\n        // Dry run to skip allocations caused by AsyncProfiler initialization\r\n        profiler.start(&quot;_ZN13SharedRuntime19dtrace_object_allocEP7oopDesci&quot;, 0);\r\n        profiler.stop();\r\n\r\n        // Real profiling session\r\n        profiler.start(&quot;_ZN13SharedRuntime19dtrace_object_allocEP7oopDesci&quot;, 0);\r\n\r\n        new Long(0);\r\n\r\n        profiler.stop();\r\n        profiler.execute(&quot;file=alloc.svg&quot;);\r\n    }\r\n}\r\n```\r\n\r\nHow to run:\r\n```\r\njava -Djava.library.path=/path/to/async-profiler -XX:+DTraceAllocProbes ProfileHeapAlloc\r\n```\r\n\r\nHere `_ZN13SharedRuntime19dtrace_object_allocEP7oopDesci` is the [mangled name](https://en.wikipedia.org/wiki/Name_mangling) for `SharedRuntime::dtrace_object_alloc()` function, which is called by JVM for every heap allocation whenever `DTraceAllocProbes` flag is on.\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/gsZzN.png","title":"What JVM runtime data area are included in ThreadMXBean.getThreadAllocatedBytes(long id)","body":"<p>The first invocation of <code>new Long(0)</code> causes the resolution of the constant pool entry referenced by <code>new</code> bytecode. While resolving <code>CONSTANT_Class_info</code> for the first time, JVM loads the referenced class - <code>java.lang.Long</code>.</p>\n<p><a href=\"http://hg.openjdk.java.net/jdk8u/jdk8u/jdk/file/78d2004f65eb/src/share/classes/java/lang/ClassLoader.java#l395\" rel=\"nofollow noreferrer\"><code>ClassLoader.loadClass</code></a> is implemented in Java, and it can certainly allocate Java objects. For instance, <a href=\"http://hg.openjdk.java.net/jdk8u/jdk8u/jdk/file/78d2004f65eb/src/share/classes/java/lang/ClassLoader.java#l453\" rel=\"nofollow noreferrer\"><code>getClassLoadingLock</code></a> method creates a new lock object and a new entry in <code>parallelLockMap</code>:</p>\n<pre><code>    protected Object getClassLoadingLock(String className) {\n        Object lock = this;\n        if (parallelLockMap != null) {\n            Object newLock = new Object();\n            lock = parallelLockMap.putIfAbsent(className, newLock);\n            if (lock == null) {\n                lock = newLock;\n            }\n        }\n        return lock;\n    }\n</code></pre>\n<p>Also, when doing a class name lookup in the system dictionary, JVM creates a new String object.</p>\n<p>I used <a href=\"https://github.com/jvm-profiling-tools/async-profiler\" rel=\"nofollow noreferrer\">async-profiler</a> to record all heap allocations JVM does when loading <code>java.lang.Long</code> class. Here is the clickable interactive Flame Graph:</p>\n<p><a href=\"https://profiler.tools/misc/load-class-alloc.svg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/gsZzN.png\" alt=\"Allocation Flame Graph\" /></a></p>\n<p>The graph includes 13 samples - one per each allocated object. The type of an allocated object is not shown, but it can be easily guessed from the context (stack trace).</p>\n<ul>\n<li>Green color denotes Java stack trace;</li>\n<li>Yellow means VM stack trace.</li>\n</ul>\n<p>Note that each <code>java_lang_String::basic_create()</code> (and similar) allocates two objects: an instance of <code>java.lang.String</code> and its backing <code>char[]</code> array.</p>\n<p>The graph is produced by the following test program:</p>\n<pre><code>import one.profiler.AsyncProfiler;\n\npublic class ProfileHeapAlloc {\n\n    public static void main(String[] args) throws Exception {\n        AsyncProfiler profiler = AsyncProfiler.getInstance();\n\n        // Dry run to skip allocations caused by AsyncProfiler initialization\n        profiler.start(&quot;_ZN13SharedRuntime19dtrace_object_allocEP7oopDesci&quot;, 0);\n        profiler.stop();\n\n        // Real profiling session\n        profiler.start(&quot;_ZN13SharedRuntime19dtrace_object_allocEP7oopDesci&quot;, 0);\n\n        new Long(0);\n\n        profiler.stop();\n        profiler.execute(&quot;file=alloc.svg&quot;);\n    }\n}\n</code></pre>\n<p>How to run:</p>\n<pre><code>java -Djava.library.path=/path/to/async-profiler -XX:+DTraceAllocProbes ProfileHeapAlloc\n</code></pre>\n<p>Here <code>_ZN13SharedRuntime19dtrace_object_allocEP7oopDesci</code> is the <a href=\"https://en.wikipedia.org/wiki/Name_mangling\" rel=\"nofollow noreferrer\">mangled name</a> for <code>SharedRuntime::dtrace_object_alloc()</code> function, which is called by JVM for every heap allocation whenever <code>DTraceAllocProbes</code> flag is on.</p>\n"}],"owner":{"account_id":5612189,"reputation":171,"user_id":4444561,"display_name":"coder.chenzhi"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":171,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":59314953,"answer_count":1,"score":1,"last_activity_date":1667333803,"creation_date":1576173980,"question_id":59310446,"body_markdown":"I was trying to get the memory consumption of some code snippets. After some search, I realized that `ThreadMXBean.getThreadAllocatedBytes(long id)` can be used to achieve this. So I tested this method with the following code:\r\n```\r\n    ThreadMXBean threadMXBean = (ThreadMXBean) ManagementFactory.getThreadMXBean();\r\n    long id = Thread.currentThread().getId();\r\n//      new Long(0);\r\n    long beforeMemUsage = threadMXBean.getThreadAllocatedBytes(id);\r\n    long afterMemUsage = 0;\r\n\r\n    {\r\n        // put the code you want to measure here\r\n        for (int i = 0; i &lt; 10; i++) {\r\n            new Long(i);\r\n        }\r\n    }\r\n\r\n    afterMemUsage = threadMXBean.getThreadAllocatedBytes(id);\r\n    System.out.println(afterMemUsage - beforeMemUsage);\r\n```\r\nI run this code with different iteration times in for loop (0, 1, 10, 20, and 30). And the result as follows:\r\n```\r\n0 Long:\t48 bytes\r\n1 Long:\t456 bytes\r\n10 Long:\t672 bytes\r\n20 Long:\t912 bytes\r\n30 Long:\t1152 bytes\r\n```\r\nThe differences between 1 and 10, 10 and 20, as well as 20 and 30 are easy to explain, because the size of Long object is 24 bytes. But I was confused by the huge difference between 0 and 1.\r\nActually, I guessed this is caused by the class loading. So I uncommented the 3rd line code and the result as follows:\r\n```\r\n0 Long:\t48 bytes\r\n1 Long:\t72 bytes\r\n10 Long:\t288 bytes\r\n20 Long:\t528 bytes\r\n30 Long:\t768 bytes\r\n``` \r\nIt seems that my guess is confirmed by the result. However, in my opinion, the information of class structure is stored in Method Area, which is not a part of heap memory. As the Javadoc of [ThreadMXBean.getThreadAllocatedBytes(long id)](https://docs.oracle.com/javase/8/docs/jre/api/management/extension/com/sun/management/ThreadMXBean.html#getThreadAllocatedBytes-long-) indicates, it returns `the total amount of memory allocated in heap memory`. Have I missed something?\r\n\r\nThe tested JVM version is:\r\n```\r\njava version &quot;1.8.0_131&quot;\r\nJava(TM) SE Runtime Environment (build 1.8.0_131-b11)\r\nJava HotSpot(TM) 64-Bit Server VM (build 25.131-b11, mixed mode)\r\n```\r\n\r\nThanks!  \r\n","title":"What JVM runtime data area are included in ThreadMXBean.getThreadAllocatedBytes(long id)","body":"<p>I was trying to get the memory consumption of some code snippets. After some search, I realized that <code>ThreadMXBean.getThreadAllocatedBytes(long id)</code> can be used to achieve this. So I tested this method with the following code:</p>\n\n<pre><code>    ThreadMXBean threadMXBean = (ThreadMXBean) ManagementFactory.getThreadMXBean();\n    long id = Thread.currentThread().getId();\n//      new Long(0);\n    long beforeMemUsage = threadMXBean.getThreadAllocatedBytes(id);\n    long afterMemUsage = 0;\n\n    {\n        // put the code you want to measure here\n        for (int i = 0; i &lt; 10; i++) {\n            new Long(i);\n        }\n    }\n\n    afterMemUsage = threadMXBean.getThreadAllocatedBytes(id);\n    System.out.println(afterMemUsage - beforeMemUsage);\n</code></pre>\n\n<p>I run this code with different iteration times in for loop (0, 1, 10, 20, and 30). And the result as follows:</p>\n\n<pre><code>0 Long: 48 bytes\n1 Long: 456 bytes\n10 Long:    672 bytes\n20 Long:    912 bytes\n30 Long:    1152 bytes\n</code></pre>\n\n<p>The differences between 1 and 10, 10 and 20, as well as 20 and 30 are easy to explain, because the size of Long object is 24 bytes. But I was confused by the huge difference between 0 and 1.\nActually, I guessed this is caused by the class loading. So I uncommented the 3rd line code and the result as follows:</p>\n\n<pre><code>0 Long: 48 bytes\n1 Long: 72 bytes\n10 Long:    288 bytes\n20 Long:    528 bytes\n30 Long:    768 bytes\n</code></pre>\n\n<p>It seems that my guess is confirmed by the result. However, in my opinion, the information of class structure is stored in Method Area, which is not a part of heap memory. As the Javadoc of <a href=\"https://docs.oracle.com/javase/8/docs/jre/api/management/extension/com/sun/management/ThreadMXBean.html#getThreadAllocatedBytes-long-\" rel=\"nofollow noreferrer\">ThreadMXBean.getThreadAllocatedBytes(long id)</a> indicates, it returns <code>the total amount of memory allocated in heap memory</code>. Have I missed something?</p>\n\n<p>The tested JVM version is:</p>\n\n<pre><code>java version \"1.8.0_131\"\nJava(TM) SE Runtime Environment (build 1.8.0_131-b11)\nJava HotSpot(TM) 64-Bit Server VM (build 25.131-b11, mixed mode)\n</code></pre>\n\n<p>Thanks!  </p>\n"},{"tags":["java","jvm"],"comments":[{"owner":{"account_id":143651,"reputation":19969,"user_id":352131,"accept_rate":77,"display_name":"Durandal"},"score":0,"creation_date":1496425026,"post_id":44333286,"comment_id":75672902,"body_markdown":"A java.lang.Class has java.lang.Fields, so why wouldn&#39;t there be Field instances? Hashtable is used a lot internally in places you wouldn&#39;t inutitively expect it. Since the program is so simple, the garbage collector probably hasn&#39;t even run once, so you see *every* single object created during VM startup.","body":"A java.lang.Class has java.lang.Fields, so why wouldn&#39;t there be Field instances? Hashtable is used a lot internally in places you wouldn&#39;t inutitively expect it. Since the program is so simple, the garbage collector probably hasn&#39;t even run once, so you see <i>every</i> single object created during VM startup."}],"answers":[{"tags":[],"owner":{"account_id":3211603,"reputation":289297,"user_id":2711488,"display_name":"Holger"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1496739854,"creation_date":1496426595,"answer_id":44334945,"question_id":44333286,"body_markdown":"There are a lot of maintenance data structures. E.g. every initialized JVM has these [system properties](https://docs.oracle.com/javase/8/docs/api/java/lang/System.html#getProperties--), which is a subtype of `Hashtable`, hence, explains the `Hashtable.Entry` instances.\r\n\r\nAlso, core classes like `java.lang.Character` know the Unicode properties of all characters, also, you see `Locale`-specific classes in you stats, as these have to be properly initialized at startup. What makes these examples so interesting, is, that they are loading these information from files or embedded resources, so their initialization involves I/O and caching mechanisms, whose artifacts you see in your output.\r\n\r\nAlso, other objects created during the startup process might not have been garbage collected yet. There are a lot of operations, like processing the class path and the jar files specified by it or parsing the command line options, which are more complex than the “Hello&#160;World” program that will be executed at the end. Mind that you can create a heap dump instead of just a histogram, so you can see who is holding a reference to the existing objects.\r\n","title":"Why does my Oracle JVM create all these objects for a simple &#39;Hello World&#39; program?","body":"<p>There are a lot of maintenance data structures. E.g. every initialized JVM has these <a href=\"https://docs.oracle.com/javase/8/docs/api/java/lang/System.html#getProperties--\" rel=\"nofollow noreferrer\">system properties</a>, which is a subtype of <code>Hashtable</code>, hence, explains the <code>Hashtable.Entry</code> instances.</p>\n\n<p>Also, core classes like <code>java.lang.Character</code> know the Unicode properties of all characters, also, you see <code>Locale</code>-specific classes in you stats, as these have to be properly initialized at startup. What makes these examples so interesting, is, that they are loading these information from files or embedded resources, so their initialization involves I/O and caching mechanisms, whose artifacts you see in your output.</p>\n\n<p>Also, other objects created during the startup process might not have been garbage collected yet. There are a lot of operations, like processing the class path and the jar files specified by it or parsing the command line options, which are more complex than the “Hello World” program that will be executed at the end. Mind that you can create a heap dump instead of just a histogram, so you can see who is holding a reference to the existing objects.</p>\n"},{"tags":[],"owner":{"account_id":4210603,"reputation":94356,"user_id":3448419,"display_name":"apangin"},"down_vote_count":0,"up_vote_count":24,"is_accepted":true,"score":24,"last_activity_date":1667333423,"creation_date":1496462656,"answer_id":44340119,"question_id":44333286,"body_markdown":"You can find the answer yourself by running the application with `-XX:+TraceBytecodes` flag.  \r\nThis flag is available in [debug builds of HotSpot JVM](https://stackoverflow.com/questions/40257504/trace-java-bytecode-stream/40296353#40296353).\r\n\r\nHere is the detailed Flame Graph (clickable SVG) showing the stack traces where the allocated objects come from.\r\n\r\n[![JDK start-up allocation](https://i.stack.imgur.com/c9wHy.png)](https://profiler.tools/misc/jdk-startup-alloc.svg)\r\n\r\nIn my case the main sources of start-up allocations were\r\n\r\n - URLClassLoader and Extension ClassLoader\r\n - Locale cache\r\n - UsageTrackerClient\r\n - [MetaIndex registry](http://hg.openjdk.java.net/jdk8u/jdk8u/jdk/file/5b86f66575b7/src/share/classes/sun/misc/MetaIndex.java#l38)\r\n - System Properties\r\n - Charset initialization\r\n\r\nP.S. [The script](https://gist.github.com/apangin/543f365dde05df0085083e82a3284866) used to generate the [Flame Graph](https://github.com/brendangregg/FlameGraph) from TraceBytecodes output.","title":"Why does my Oracle JVM create all these objects for a simple &#39;Hello World&#39; program?","body":"<p>You can find the answer yourself by running the application with <code>-XX:+TraceBytecodes</code> flag.<br />\nThis flag is available in <a href=\"https://stackoverflow.com/questions/40257504/trace-java-bytecode-stream/40296353#40296353\">debug builds of HotSpot JVM</a>.</p>\n<p>Here is the detailed Flame Graph (clickable SVG) showing the stack traces where the allocated objects come from.</p>\n<p><a href=\"https://profiler.tools/misc/jdk-startup-alloc.svg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/c9wHy.png\" alt=\"JDK start-up allocation\" /></a></p>\n<p>In my case the main sources of start-up allocations were</p>\n<ul>\n<li>URLClassLoader and Extension ClassLoader</li>\n<li>Locale cache</li>\n<li>UsageTrackerClient</li>\n<li><a href=\"http://hg.openjdk.java.net/jdk8u/jdk8u/jdk/file/5b86f66575b7/src/share/classes/sun/misc/MetaIndex.java#l38\" rel=\"nofollow noreferrer\">MetaIndex registry</a></li>\n<li>System Properties</li>\n<li>Charset initialization</li>\n</ul>\n<p>P.S. <a href=\"https://gist.github.com/apangin/543f365dde05df0085083e82a3284866\" rel=\"nofollow noreferrer\">The script</a> used to generate the <a href=\"https://github.com/brendangregg/FlameGraph\" rel=\"nofollow noreferrer\">Flame Graph</a> from TraceBytecodes output.</p>\n"},{"tags":[],"owner":{"account_id":7567,"reputation":10188,"user_id":13189,"accept_rate":75,"display_name":"eckes"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1497455232,"creation_date":1496774113,"answer_id":44397441,"question_id":44333286,"body_markdown":"**Checking if tools load additional classes**\r\n\r\nI tried the following program:\r\n\r\n    package test;\r\n    public class MainSleep {\r\n        public static void main(String[] args) throws InterruptedException {\r\n            synchronized (MainSleep.class) {\r\n                MainSleep.class.wait(5*1000);\r\n            }\r\n        }\r\n    }\r\n\r\nWhen I run it with:\r\n\r\n    &quot;c:\\Program Files\\Java\\jdk1.8.0_131\\bin\\java&quot; \\\r\n      -verbose:class -cp target\\classes test.MainSleep\r\n\r\nI get verbose class loading messages, then a 5 sec pause and then the shutdown does load even more classes:\r\n\r\n    ...\r\n    [Loaded sun.misc.PerfCounter from c:\\Program Files\\Java\\jdk1.8.0_131\\jre\\lib\\rt.jar]\r\n    [Loaded sun.misc.Perf$GetPerfAction from c:\\Program Files\\Java\\jdk1.8.0_131\\jre\\lib\\rt.jar]\r\n    [Loaded sun.misc.Perf from c:\\Program Files\\Java\\jdk1.8.0_131\\jre\\lib\\rt.jar]\r\n    [Loaded sun.misc.PerfCounter$CoreCounters from c:\\Program Files\\Java\\jdk1.8.0_131\\jre\\lib\\rt.jar]\r\n    [Loaded sun.nio.ch.DirectBuffer from c:\\Program Files\\Java\\jdk1.8.0_131\\jre\\lib\\rt.jar]\r\n    [Loaded java.nio.MappedByteBuffer from c:\\Program Files\\Java\\jdk1.8.0_131\\jre\\lib\\rt.jar]\r\n    [Loaded java.nio.DirectByteBuffer from c:\\Program Files\\Java\\jdk1.8.0_131\\jre\\lib\\rt.jar]\r\n    [Loaded java.nio.LongBuffer from c:\\Program Files\\Java\\jdk1.8.0_131\\jre\\lib\\rt.jar]\r\n    [Loaded java.nio.DirectLongBufferU from c:\\Program Files\\Java\\jdk1.8.0_131\\jre\\lib\\rt.jar]\r\n    [Loaded java.security.PermissionCollection from c:\\Program Files\\Java\\jdk1.8.0_131\\jre\\lib\\rt.jar]\r\n    [Loaded java.security.Permissions from c:\\Program Files\\Java\\jdk1.8.0_131\\jre\\lib\\rt.jar]\r\n    [Loaded java.net.URLConnection from c:\\Program Files\\Java\\jdk1.8.0_131\\jre\\lib\\rt.jar]\r\n    [Loaded sun.net.www.URLConnection from c:\\Program Files\\Java\\jdk1.8.0_131\\jre\\lib\\rt.jar]\r\n    [Loaded sun.net.www.protocol.file.FileURLConnection from c:\\Program Files\\Java\\jdk1.8.0_131\\jre\\lib\\rt.jar]\r\n    [Loaded sun.net.www.MessageHeader from c:\\Program Files\\Java\\jdk1.8.0_131\\jre\\lib\\rt.jar]\r\n    [Loaded java.io.FilePermission from c:\\Program Files\\Java\\jdk1.8.0_131\\jre\\lib\\rt.jar]\r\n    [Loaded java.io.FilePermission$1 from c:\\Program Files\\Java\\jdk1.8.0_131\\jre\\lib\\rt.jar]\r\n    [Loaded java.io.FilePermissionCollection from c:\\Program Files\\Java\\jdk1.8.0_131\\jre\\lib\\rt.jar]\r\n    [Loaded java.security.AllPermission from c:\\Program Files\\Java\\jdk1.8.0_131\\jre\\lib\\rt.jar]\r\n    [Loaded java.security.UnresolvedPermission from c:\\Program Files\\Java\\jdk1.8.0_131\\jre\\lib\\rt.jar]\r\n    [Loaded java.security.BasicPermissionCollection from c:\\Program Files\\Java\\jdk1.8.0_131\\jre\\lib\\rt.jar]\r\n    [Loaded test.MainSleep from file:/D:/ws/BIS65/test-java8/target/classes/]\r\n    [Loaded sun.launcher.LauncherHelper$FXHelper from c:\\Program Files\\Java\\jdk1.8.0_131\\jre\\lib\\rt.jar]\r\n    [Loaded java.lang.Class$MethodArray from c:\\Program Files\\Java\\jdk1.8.0_131\\jre\\lib\\rt.jar]\r\n    [Loaded java.lang.Void from c:\\Program Files\\Java\\jdk1.8.0_131\\jre\\lib\\rt.jar]\r\n    ...\r\n    [Loaded java.lang.Shutdown from c:\\Program Files\\Java\\jdk1.8.0_131\\jre\\lib\\rt.jar]\r\n    [Loaded java.lang.Shutdown$Lock from c:\\Program Files\\Java\\jdk1.8.0_131\\jre\\lib\\rt.jar]\r\n\r\nSo this would be the baseline. When I now use `jstack` or `jmap` on that file and check for verbose class loading messages I can see if it introduces new classes (not sure about instances of course).\r\n\r\nWith `jstack -l` and `jstack`, the following additional one class is loaded:\r\n\r\n    [Loaded java.lang.Class$MethodArray from\r\n    [Loaded java.lang.Void from\r\n    [Loaded java.util.concurrent.locks.AbstractOwnableSynchronizer ...\r\n    [Loaded java.lang.Shutdown from\r\n    [Loaded java.lang.Shutdown$Lock from\r\n\r\nWith `jstack -F` or `jstack -m` no(!) additional class is loaded:\r\n\r\n    [Loaded java.lang.Class$MethodArray from\r\n    [Loaded java.lang.Void from\r\n    [Loaded java.lang.Shutdown from\r\n    [Loaded java.lang.Shutdown$Lock from\r\n\r\nNone of `jmap` `-clstat`,`-finalizerinfo`,`-heap`, `-histo` or `-histo:live` loaded additional classes:\r\n\r\n    [Loaded java.lang.Class$MethodArray from\r\n    [Loaded java.lang.Void from\r\n    [Loaded java.lang.Shutdown from\r\n    [Loaded java.lang.Shutdown$Lock from\r\n\r\nThe same is true for `jmap -dump:format=b,file=ignore.hprof` with and without the -F option as well as with and without the `live` flag.\r\n\r\nJust for completeness, if I use *jvisualvm* or *jconsole* it will always trigger a lot of JMX class loads for thread, heap and application snapshots. Most likely because it always opens the dashboard for the process.\r\n\r\n**Exploring Heap Content**\r\n\r\nSo now that we have established this I took a look at the `jmap -dump:format=b` (non-live, non-forced) heap dump with MAT, looking for the Fields you have been interested in:\r\n\r\nThe MAT **unreachable objects histogram** (which shows instances found in the heap but not connected to any GC root, which is basically all not-yet collected garbage) has 3038 objects, and the top 10:\r\n\r\n    Class Name                               | Objects | Shallow Heap\r\n    ------------------------------------------------------------------\r\n    char[]                                   |   1.026 |      113.848\r\n    java.lang.String                         |     599 |       14.376\r\n    int[]                                    |     423 |        7.664\r\n    java.lang.Object[]                       |     220 |       14.192\r\n    java.lang.StringBuilder                  |     137 |        3.288\r\n    java.lang.reflect.Field                  |     115 |        8.280\r\n    java.lang.ProcessEnvironment$CheckedEntry|      66 |        1.056\r\n    java.io.File                             |      59 |        1.888\r\n    java.lang.Class                          |      32 |            0\r\n    java.lang.StringBuffer                   |      30 |          720\r\n\r\nThere is currently no single live `Field` instance visible with MAT and only very limited of `Class` instances. This looks much like a .hprof or MAT problem: the Class instances seems to not show any of their fields in the heap dump. I think they should be softly(!) referenced by `Class#reflectionData : SoftReference&lt;ReflectionData&lt;T&gt;&gt;`, but I think this should be visible in the heap dump and not losing 115 fields. (There is no `Class$ReflectionData` in the live heap and 14 `Class$ReflectionData` in the unreachable histo. That can fit well with 115 Fields.\r\n\r\n*(I guess I will check back with Serviceability-dev@openjdk on that. This does not fit in a comment, so this is an incomplete answer but I intend to enhance it).*","title":"Why does my Oracle JVM create all these objects for a simple &#39;Hello World&#39; program?","body":"<p><strong>Checking if tools load additional classes</strong></p>\n\n<p>I tried the following program:</p>\n\n<pre><code>package test;\npublic class MainSleep {\n    public static void main(String[] args) throws InterruptedException {\n        synchronized (MainSleep.class) {\n            MainSleep.class.wait(5*1000);\n        }\n    }\n}\n</code></pre>\n\n<p>When I run it with:</p>\n\n<pre><code>\"c:\\Program Files\\Java\\jdk1.8.0_131\\bin\\java\" \\\n  -verbose:class -cp target\\classes test.MainSleep\n</code></pre>\n\n<p>I get verbose class loading messages, then a 5 sec pause and then the shutdown does load even more classes:</p>\n\n<pre><code>...\n[Loaded sun.misc.PerfCounter from c:\\Program Files\\Java\\jdk1.8.0_131\\jre\\lib\\rt.jar]\n[Loaded sun.misc.Perf$GetPerfAction from c:\\Program Files\\Java\\jdk1.8.0_131\\jre\\lib\\rt.jar]\n[Loaded sun.misc.Perf from c:\\Program Files\\Java\\jdk1.8.0_131\\jre\\lib\\rt.jar]\n[Loaded sun.misc.PerfCounter$CoreCounters from c:\\Program Files\\Java\\jdk1.8.0_131\\jre\\lib\\rt.jar]\n[Loaded sun.nio.ch.DirectBuffer from c:\\Program Files\\Java\\jdk1.8.0_131\\jre\\lib\\rt.jar]\n[Loaded java.nio.MappedByteBuffer from c:\\Program Files\\Java\\jdk1.8.0_131\\jre\\lib\\rt.jar]\n[Loaded java.nio.DirectByteBuffer from c:\\Program Files\\Java\\jdk1.8.0_131\\jre\\lib\\rt.jar]\n[Loaded java.nio.LongBuffer from c:\\Program Files\\Java\\jdk1.8.0_131\\jre\\lib\\rt.jar]\n[Loaded java.nio.DirectLongBufferU from c:\\Program Files\\Java\\jdk1.8.0_131\\jre\\lib\\rt.jar]\n[Loaded java.security.PermissionCollection from c:\\Program Files\\Java\\jdk1.8.0_131\\jre\\lib\\rt.jar]\n[Loaded java.security.Permissions from c:\\Program Files\\Java\\jdk1.8.0_131\\jre\\lib\\rt.jar]\n[Loaded java.net.URLConnection from c:\\Program Files\\Java\\jdk1.8.0_131\\jre\\lib\\rt.jar]\n[Loaded sun.net.www.URLConnection from c:\\Program Files\\Java\\jdk1.8.0_131\\jre\\lib\\rt.jar]\n[Loaded sun.net.www.protocol.file.FileURLConnection from c:\\Program Files\\Java\\jdk1.8.0_131\\jre\\lib\\rt.jar]\n[Loaded sun.net.www.MessageHeader from c:\\Program Files\\Java\\jdk1.8.0_131\\jre\\lib\\rt.jar]\n[Loaded java.io.FilePermission from c:\\Program Files\\Java\\jdk1.8.0_131\\jre\\lib\\rt.jar]\n[Loaded java.io.FilePermission$1 from c:\\Program Files\\Java\\jdk1.8.0_131\\jre\\lib\\rt.jar]\n[Loaded java.io.FilePermissionCollection from c:\\Program Files\\Java\\jdk1.8.0_131\\jre\\lib\\rt.jar]\n[Loaded java.security.AllPermission from c:\\Program Files\\Java\\jdk1.8.0_131\\jre\\lib\\rt.jar]\n[Loaded java.security.UnresolvedPermission from c:\\Program Files\\Java\\jdk1.8.0_131\\jre\\lib\\rt.jar]\n[Loaded java.security.BasicPermissionCollection from c:\\Program Files\\Java\\jdk1.8.0_131\\jre\\lib\\rt.jar]\n[Loaded test.MainSleep from file:/D:/ws/BIS65/test-java8/target/classes/]\n[Loaded sun.launcher.LauncherHelper$FXHelper from c:\\Program Files\\Java\\jdk1.8.0_131\\jre\\lib\\rt.jar]\n[Loaded java.lang.Class$MethodArray from c:\\Program Files\\Java\\jdk1.8.0_131\\jre\\lib\\rt.jar]\n[Loaded java.lang.Void from c:\\Program Files\\Java\\jdk1.8.0_131\\jre\\lib\\rt.jar]\n...\n[Loaded java.lang.Shutdown from c:\\Program Files\\Java\\jdk1.8.0_131\\jre\\lib\\rt.jar]\n[Loaded java.lang.Shutdown$Lock from c:\\Program Files\\Java\\jdk1.8.0_131\\jre\\lib\\rt.jar]\n</code></pre>\n\n<p>So this would be the baseline. When I now use <code>jstack</code> or <code>jmap</code> on that file and check for verbose class loading messages I can see if it introduces new classes (not sure about instances of course).</p>\n\n<p>With <code>jstack -l</code> and <code>jstack</code>, the following additional one class is loaded:</p>\n\n<pre><code>[Loaded java.lang.Class$MethodArray from\n[Loaded java.lang.Void from\n[Loaded java.util.concurrent.locks.AbstractOwnableSynchronizer ...\n[Loaded java.lang.Shutdown from\n[Loaded java.lang.Shutdown$Lock from\n</code></pre>\n\n<p>With <code>jstack -F</code> or <code>jstack -m</code> no(!) additional class is loaded:</p>\n\n<pre><code>[Loaded java.lang.Class$MethodArray from\n[Loaded java.lang.Void from\n[Loaded java.lang.Shutdown from\n[Loaded java.lang.Shutdown$Lock from\n</code></pre>\n\n<p>None of <code>jmap</code> <code>-clstat</code>,<code>-finalizerinfo</code>,<code>-heap</code>, <code>-histo</code> or <code>-histo:live</code> loaded additional classes:</p>\n\n<pre><code>[Loaded java.lang.Class$MethodArray from\n[Loaded java.lang.Void from\n[Loaded java.lang.Shutdown from\n[Loaded java.lang.Shutdown$Lock from\n</code></pre>\n\n<p>The same is true for <code>jmap -dump:format=b,file=ignore.hprof</code> with and without the -F option as well as with and without the <code>live</code> flag.</p>\n\n<p>Just for completeness, if I use <em>jvisualvm</em> or <em>jconsole</em> it will always trigger a lot of JMX class loads for thread, heap and application snapshots. Most likely because it always opens the dashboard for the process.</p>\n\n<p><strong>Exploring Heap Content</strong></p>\n\n<p>So now that we have established this I took a look at the <code>jmap -dump:format=b</code> (non-live, non-forced) heap dump with MAT, looking for the Fields you have been interested in:</p>\n\n<p>The MAT <strong>unreachable objects histogram</strong> (which shows instances found in the heap but not connected to any GC root, which is basically all not-yet collected garbage) has 3038 objects, and the top 10:</p>\n\n<pre><code>Class Name                               | Objects | Shallow Heap\n------------------------------------------------------------------\nchar[]                                   |   1.026 |      113.848\njava.lang.String                         |     599 |       14.376\nint[]                                    |     423 |        7.664\njava.lang.Object[]                       |     220 |       14.192\njava.lang.StringBuilder                  |     137 |        3.288\njava.lang.reflect.Field                  |     115 |        8.280\njava.lang.ProcessEnvironment$CheckedEntry|      66 |        1.056\njava.io.File                             |      59 |        1.888\njava.lang.Class                          |      32 |            0\njava.lang.StringBuffer                   |      30 |          720\n</code></pre>\n\n<p>There is currently no single live <code>Field</code> instance visible with MAT and only very limited of <code>Class</code> instances. This looks much like a .hprof or MAT problem: the Class instances seems to not show any of their fields in the heap dump. I think they should be softly(!) referenced by <code>Class#reflectionData : SoftReference&lt;ReflectionData&lt;T&gt;&gt;</code>, but I think this should be visible in the heap dump and not losing 115 fields. (There is no <code>Class$ReflectionData</code> in the live heap and 14 <code>Class$ReflectionData</code> in the unreachable histo. That can fit well with 115 Fields.</p>\n\n<p><em>(I guess I will check back with Serviceability-dev@openjdk on that. This does not fit in a comment, so this is an incomplete answer but I intend to enhance it).</em></p>\n"}],"owner":{"account_id":9573991,"reputation":11925,"user_id":7110799,"accept_rate":87,"display_name":"Dmitriy Dumanskiy"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1113,"favorite_count":0,"down_vote_count":2,"up_vote_count":11,"accepted_answer_id":44340119,"answer_count":3,"score":9,"last_activity_date":1667333423,"creation_date":1496419971,"question_id":44333286,"body_markdown":"I was playing around with `jmap` and found that simple &quot;Hello World&quot; Java program creates thousands of objects. Here is truncated list of objects **Oracle JVM update 131** creates on startup: \r\n\r\n     num     #instances         #bytes  class name\r\n    ----------------------------------------------\r\n       1:           402        4903520  [I\r\n       2:          1621         158344  [C\r\n       3:           455          52056  java.lang.Class\r\n       4:           194          49728  [B\r\n       5:          1263          30312  java.lang.String\r\n       6:           515          26088  [Ljava.lang.Object;\r\n       7:           115           8280  java.lang.reflect.Field\r\n       8:           258           4128  java.lang.Integer\r\n       9:            94           3760  java.lang.ref.SoftReference\r\n      10:           116           3712  java.util.Hashtable$Entry\r\n      11:           126           3024  java.lang.StringBuilder\r\n      12:             8           3008  java.lang.Thread\r\n      13:            74           2576  [Ljava.lang.String;\r\n      14:            61           1952  java.io.File\r\n      15:            38           1824  sun.util.locale.LocaleObjectCache$CacheEntry\r\n      16:            12           1760  [Ljava.util.Hashtable$Entry;\r\n      17:            53           1696  java.util.concurrent.ConcurrentHashMap$Node\r\n      18:            23           1472  java.net.URL\r\n      19:            14           1120  [S\r\n      20:             2           1064  [Ljava.lang.invoke.MethodHandle;\r\n      21:             1           1040  [Ljava.lang.Integer;\r\n      22:            26           1040  java.io.ObjectStreamField\r\n      23:            12           1024  [Ljava.util.HashMap$Node;\r\n      24:            30            960  java.util.HashMap$Node\r\n      25:            20            800  sun.util.locale.BaseLocale$Key\r\n\r\nI know that the JVM loads classes from JAR files and expect to see `java.lang.Class`, `java.lang.String` and `[Ljava.lang.Object`. 258 `java.lang.Integer` objects are clear tp me too: this is the `Integer` cache.\r\n\r\nBut `java.lang.reflect.Field`? `Hashtable`? Many `StringBuilder`s? `java.util.concurrent.ConcurrentHashMap`? Where does this come from?\r\n\r\nThe program is pretty simple: \r\n\r\n    public class Test {\r\n        public static void main(String[] args) throws IOException {\r\n            System.out.println(&quot;Hello world&quot;);\r\n            System.in.read();\r\n        }\r\n    }\r\n\r\n\r\nJVM details:\r\n\r\n    java version &quot;1.8.0_131&quot;\r\n    Java(TM) SE Runtime Environment (build 1.8.0_131-b11)\r\n    Java HotSpot(TM) 64-Bit Server VM (build 25.131-b11, mixed mode)\r\n\r\nUbuntu 16.04.\r\n\r\n","title":"Why does my Oracle JVM create all these objects for a simple &#39;Hello World&#39; program?","body":"<p>I was playing around with <code>jmap</code> and found that simple \"Hello World\" Java program creates thousands of objects. Here is truncated list of objects <strong>Oracle JVM update 131</strong> creates on startup: </p>\n\n<pre><code> num     #instances         #bytes  class name\n----------------------------------------------\n   1:           402        4903520  [I\n   2:          1621         158344  [C\n   3:           455          52056  java.lang.Class\n   4:           194          49728  [B\n   5:          1263          30312  java.lang.String\n   6:           515          26088  [Ljava.lang.Object;\n   7:           115           8280  java.lang.reflect.Field\n   8:           258           4128  java.lang.Integer\n   9:            94           3760  java.lang.ref.SoftReference\n  10:           116           3712  java.util.Hashtable$Entry\n  11:           126           3024  java.lang.StringBuilder\n  12:             8           3008  java.lang.Thread\n  13:            74           2576  [Ljava.lang.String;\n  14:            61           1952  java.io.File\n  15:            38           1824  sun.util.locale.LocaleObjectCache$CacheEntry\n  16:            12           1760  [Ljava.util.Hashtable$Entry;\n  17:            53           1696  java.util.concurrent.ConcurrentHashMap$Node\n  18:            23           1472  java.net.URL\n  19:            14           1120  [S\n  20:             2           1064  [Ljava.lang.invoke.MethodHandle;\n  21:             1           1040  [Ljava.lang.Integer;\n  22:            26           1040  java.io.ObjectStreamField\n  23:            12           1024  [Ljava.util.HashMap$Node;\n  24:            30            960  java.util.HashMap$Node\n  25:            20            800  sun.util.locale.BaseLocale$Key\n</code></pre>\n\n<p>I know that the JVM loads classes from JAR files and expect to see <code>java.lang.Class</code>, <code>java.lang.String</code> and <code>[Ljava.lang.Object</code>. 258 <code>java.lang.Integer</code> objects are clear tp me too: this is the <code>Integer</code> cache.</p>\n\n<p>But <code>java.lang.reflect.Field</code>? <code>Hashtable</code>? Many <code>StringBuilder</code>s? <code>java.util.concurrent.ConcurrentHashMap</code>? Where does this come from?</p>\n\n<p>The program is pretty simple: </p>\n\n<pre><code>public class Test {\n    public static void main(String[] args) throws IOException {\n        System.out.println(\"Hello world\");\n        System.in.read();\n    }\n}\n</code></pre>\n\n<p>JVM details:</p>\n\n<pre><code>java version \"1.8.0_131\"\nJava(TM) SE Runtime Environment (build 1.8.0_131-b11)\nJava HotSpot(TM) 64-Bit Server VM (build 25.131-b11, mixed mode)\n</code></pre>\n\n<p>Ubuntu 16.04.</p>\n"},{"tags":["javascript","java","base64","filereader"],"comments":[{"owner":{"account_id":1754145,"reputation":43960,"user_id":1602555,"display_name":"Karol Dowbecki"},"score":1,"creation_date":1547338186,"post_id":54164988,"comment_id":95159674,"body_markdown":"Why are you doing `bytes.split(&quot;,&quot;)[1]`? Add what is the value of `bytes` and `type` when received in Java.","body":"Why are you doing <code>bytes.split(&quot;,&quot;)[1]</code>? Add what is the value of <code>bytes</code> and <code>type</code> when received in Java."},{"owner":{"account_id":218795,"reputation":1412,"user_id":8327733,"display_name":"duc mai"},"score":0,"creation_date":1547338233,"post_id":54164988,"comment_id":95159686,"body_markdown":"how do you know that your uploading files are base64 format?","body":"how do you know that your uploading files are base64 format?"},{"owner":{"account_id":3187825,"reputation":8415,"user_id":2692962,"accept_rate":82,"display_name":"Kleber Mota"},"score":0,"creation_date":1547338518,"post_id":54164988,"comment_id":95159739,"body_markdown":"@KarolDowbecki the `split()` is done to separate the `data:image/png;base64` part from the rest od the data, like seen in this image: https://imgur.com/a/aO9PMBz (also include the value for `type`).","body":"@KarolDowbecki the <code>split()</code> is done to separate the <code>data:image&#47;png;base64</code> part from the rest od the data, like seen in this image: <a href=\"https://imgur.com/a/aO9PMBz\" rel=\"nofollow noreferrer\">imgur.com/a/aO9PMBz</a> (also include the value for <code>type</code>)."},{"owner":{"account_id":3187825,"reputation":8415,"user_id":2692962,"accept_rate":82,"display_name":"Kleber Mota"},"score":0,"creation_date":1547338618,"post_id":54164988,"comment_id":95159751,"body_markdown":"@ducmai It is what `reader.readAsDataURL(file);` sends to the server, at least according to what I read about it.","body":"@ducmai It is what <code>reader.readAsDataURL(file);</code> sends to the server, at least according to what I read about it."},{"owner":{"account_id":290683,"reputation":12512,"user_id":592355,"display_name":"xerx593"},"score":1,"creation_date":1547338620,"post_id":54164988,"comment_id":95159752,"body_markdown":"`x-www-form-urlencoded` sounds wrong (for binary data) ...and url- is *not* base encoded.","body":"<code>x-www-form-urlencoded</code> sounds wrong (for binary data) ...and url- is <i>not</i> base encoded."},{"owner":{"account_id":3187825,"reputation":8415,"user_id":2692962,"accept_rate":82,"display_name":"Kleber Mota"},"score":0,"creation_date":1547340616,"post_id":54164988,"comment_id":95160027,"body_markdown":"@xerx593 if I remove the `x-www-form-urlencoded`, the error changes to missing required parameter `bytes`. And what you mean about url is not encoded? url is currently set up to `/imagem/upload` mapped in my controller to receive POST requests with 2 parameters (bytes and type). Only bytes is Base64 encoded.","body":"@xerx593 if I remove the <code>x-www-form-urlencoded</code>, the error changes to missing required parameter <code>bytes</code>. And what you mean about url is not encoded? url is currently set up to <code>&#47;imagem&#47;upload</code> mapped in my controller to receive POST requests with 2 parameters (bytes and type). Only bytes is Base64 encoded."},{"owner":{"account_id":290683,"reputation":12512,"user_id":592355,"display_name":"xerx593"},"score":0,"creation_date":1547375700,"post_id":54164988,"comment_id":95165102,"body_markdown":"no, removing is not an option! :) (I thought about replacing with something more suitable...)...but the key point is, that your data leaves the client [&quot;url encoded&quot;](https://en.wikipedia.org/wiki/Percent-encoding) (whichever encoding the original data had) ... to restore the original data you have to &quot;url decode&quot; before (....you can base64-decode)","body":"no, removing is not an option! :) (I thought about replacing with something more suitable...)...but the key point is, that your data leaves the client <a href=\"https://en.wikipedia.org/wiki/Percent-encoding\" rel=\"nofollow noreferrer\">&quot;url encoded&quot;</a> (whichever encoding the original data had) ... to restore the original data you have to &quot;url decode&quot; before (....you can base64-decode)"},{"owner":{"account_id":290683,"reputation":12512,"user_id":592355,"display_name":"xerx593"},"score":0,"creation_date":1548080531,"post_id":54164988,"comment_id":95404381,"body_markdown":"`application/octet-stream` would be &quot;appropriate&quot; (content type) for a &quot;pure byte body&quot;, with `application/multipart` you can compose modular (multiple type) and more complex &quot;bodies&quot; (like email or fileupload ...or so..).","body":"<code>application&#47;octet-stream</code> would be &quot;appropriate&quot; (content type) for a &quot;pure byte body&quot;, with <code>application&#47;multipart</code> you can compose modular (multiple type) and more complex &quot;bodies&quot; (like email or fileupload ...or so..)."}],"answers":[{"tags":[],"owner":{"account_id":1754145,"reputation":43960,"user_id":1602555,"display_name":"Karol Dowbecki"},"down_vote_count":0,"up_vote_count":14,"is_accepted":false,"score":14,"last_activity_date":1547339198,"creation_date":1547338384,"answer_id":54165051,"question_id":54164988,"body_markdown":"`Illegal base64 character 20` means that received value contained an invalid character not present in the [Base64 alphabet][1]. `20` is a space, because error message uses hex format. The data on your screenshot shows that there are spaces in the sent `bytes` value.\r\n\r\nAs per [this answer][2] you can use `reader.readAsBinaryString` and then `btoa` to convert file content to Base64 yourself.\r\n\r\n\r\n  [1]: https://en.wikipedia.org/wiki/Base64#Base64_table\r\n  [2]: https://stackoverflow.com/a/32531292/1602555","title":"Illegal base64 character","body":"<p><code>Illegal base64 character 20</code> means that received value contained an invalid character not present in the <a href=\"https://en.wikipedia.org/wiki/Base64#Base64_table\" rel=\"noreferrer\">Base64 alphabet</a>. <code>20</code> is a space, because error message uses hex format. The data on your screenshot shows that there are spaces in the sent <code>bytes</code> value.</p>\n\n<p>As per <a href=\"https://stackoverflow.com/a/32531292/1602555\">this answer</a> you can use <code>reader.readAsBinaryString</code> and then <code>btoa</code> to convert file content to Base64 yourself.</p>\n"},{"tags":[],"owner":{"account_id":7154506,"reputation":189,"user_id":5467450,"display_name":"kami"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1547339044,"creation_date":1547339044,"answer_id":54165101,"question_id":54164988,"body_markdown":"You can check working example of Base64 upload [here](https://github.com/mvkvl/image-uploader/blob/master/code/test-client/js_client.html) and [here](https://github.com/mvkvl/image-uploader/blob/master/code/upload-service/src/main/java/ws/slink/test/controllers/UploadController.java)\r\n\r\n**JS** (sends a list of files in Base64 encoding)\r\n```\r\n&lt;form id=&quot;jsonForm&quot;\r\n      class=&quot;form-inline&quot;\r\n      role=&quot;form&quot;&gt;\r\n        &lt;input id=&quot;jsonFiles&quot;\r\n               width=&quot;400px&quot;\r\n               type=&quot;file&quot;\r\n               class=&quot;form-control-file border&quot;\r\n               name=&quot;file&quot;\r\n               accept=&quot;image/gif, image/jpeg, image/png&quot;\r\n               multiple&gt;\r\n        &amp;nbsp;&lt;button type=&quot;button&quot; onclick=&quot;processJsonForm()&quot; class=&quot;btn-sm btn-outline-primary&quot;&gt;отправить&lt;/button&gt;\r\n&lt;/form&gt;\r\n\r\n\r\nfunction processJsonForm() {\r\n  if (window.File &amp;&amp; window.FileList &amp;&amp; window.FileReader) {\r\n    readJsonFiles(document.getElementById(&#39;jsonFiles&#39;).files, submitJsonForm);\r\n  } else {\r\n    alret(&quot;Your browser does not support File API&quot;);\r\n  }\r\n}\r\n\r\nfunction readJsonFiles(files, callback) {\r\n  var count = files.length;\r\n  var result = [];\r\n  for (i = 0; i &lt; files.length; i++) {\r\n    var file = files[i];\r\n    var picReader = new FileReader();\r\n    picReader.onload = (function(f) {\r\n      return function(event) {\r\n          var item = {};\r\n          item.name   = f.name;\r\n          item.type   = f.type;\r\n          item.base64 = event.target.result;\r\n          result.push(item);\r\n          if (!--count) callback(result);\r\n      }\r\n    })(file);\r\n    picReader.readAsDataURL(file);\r\n  }\r\n}\r\n\r\nfunction submitJsonForm(data) {\r\n  $.ajax({\r\n     url: baseURL,\r\n     type: &#39;POST&#39;,\r\n     data: JSON.stringify(data),\r\n     contentType: &#39;application/json; charset=UTF-8&#39;,\r\n     crossDomain: true,\r\n     headers: { &#39;Access-Control-Allow-Origin&#39;: &#39;*&#39; },\r\n     success: function(data, status) {\r\n       $.alert(&quot;Sent URLs to server&lt;br&gt;&quot;  +\r\n               &quot;Response code: &quot; + status + &quot;&lt;br&gt;&quot; +\r\n               &quot;Server response: &quot; + data, {\r\n         autoClose: true,\r\n         closeTime: 10000,\r\n         type: &#39;success&#39;,\r\n         title: false,\r\n       });\r\n       // console.log(data);\r\n     },\r\n     error: function(data, status){\r\n       $.alert(data, &quot;error&quot;);\r\n       // console.log(data);\r\n     }\r\n  });\r\n}\r\n```\r\n\r\n**Java controller**\r\n```\r\n\r\n// here input arguments Base64EncodedImageJson have Base64 string in &#39;base64&#39; field\r\n\r\n\t@PostMapping(path = &quot;/upload&quot;, consumes = &quot;application/json&quot;, produces = &quot;application/json&quot;)\r\n\tpublic DeferredResult&lt;Collection&lt;ProcessingResult&gt;&gt; processJSON(@RequestBody Base64EncodedImageJson [] imagesEncoded) {\r\n\t\tlogger.debug(&quot;processing application/json request&quot;);\r\n\t\tDeferredResult&lt;Collection&lt;ProcessingResult&gt;&gt; deferredResult = new DeferredResult&lt;&gt;();\r\n\t\tCompletableFuture.supplyAsync( () -&gt; base64Uploader.upload(imagesEncoded))\r\n\t\t                 .whenComplete( (result, error) -&gt; {\r\n\t\t                \t deferredResult.setResult(result);\r\n\t\t                \t if (null != error) {\r\n\t\t                \t\t logger.error(&quot;ERROR: &quot; + error.getMessage());\r\n\t\t                \t }\r\n\t\t                 });\r\n\t\treturn deferredResult;\r\n\t}\r\n```","title":"Illegal base64 character","body":"<p>You can check working example of Base64 upload <a href=\"https://github.com/mvkvl/image-uploader/blob/master/code/test-client/js_client.html\" rel=\"nofollow noreferrer\">here</a> and <a href=\"https://github.com/mvkvl/image-uploader/blob/master/code/upload-service/src/main/java/ws/slink/test/controllers/UploadController.java\" rel=\"nofollow noreferrer\">here</a></p>\n\n<p><strong>JS</strong> (sends a list of files in Base64 encoding)</p>\n\n<pre><code>&lt;form id=\"jsonForm\"\n      class=\"form-inline\"\n      role=\"form\"&gt;\n        &lt;input id=\"jsonFiles\"\n               width=\"400px\"\n               type=\"file\"\n               class=\"form-control-file border\"\n               name=\"file\"\n               accept=\"image/gif, image/jpeg, image/png\"\n               multiple&gt;\n        &amp;nbsp;&lt;button type=\"button\" onclick=\"processJsonForm()\" class=\"btn-sm btn-outline-primary\"&gt;отправить&lt;/button&gt;\n&lt;/form&gt;\n\n\nfunction processJsonForm() {\n  if (window.File &amp;&amp; window.FileList &amp;&amp; window.FileReader) {\n    readJsonFiles(document.getElementById('jsonFiles').files, submitJsonForm);\n  } else {\n    alret(\"Your browser does not support File API\");\n  }\n}\n\nfunction readJsonFiles(files, callback) {\n  var count = files.length;\n  var result = [];\n  for (i = 0; i &lt; files.length; i++) {\n    var file = files[i];\n    var picReader = new FileReader();\n    picReader.onload = (function(f) {\n      return function(event) {\n          var item = {};\n          item.name   = f.name;\n          item.type   = f.type;\n          item.base64 = event.target.result;\n          result.push(item);\n          if (!--count) callback(result);\n      }\n    })(file);\n    picReader.readAsDataURL(file);\n  }\n}\n\nfunction submitJsonForm(data) {\n  $.ajax({\n     url: baseURL,\n     type: 'POST',\n     data: JSON.stringify(data),\n     contentType: 'application/json; charset=UTF-8',\n     crossDomain: true,\n     headers: { 'Access-Control-Allow-Origin': '*' },\n     success: function(data, status) {\n       $.alert(\"Sent URLs to server&lt;br&gt;\"  +\n               \"Response code: \" + status + \"&lt;br&gt;\" +\n               \"Server response: \" + data, {\n         autoClose: true,\n         closeTime: 10000,\n         type: 'success',\n         title: false,\n       });\n       // console.log(data);\n     },\n     error: function(data, status){\n       $.alert(data, \"error\");\n       // console.log(data);\n     }\n  });\n}\n</code></pre>\n\n<p><strong>Java controller</strong></p>\n\n<pre><code>\n// here input arguments Base64EncodedImageJson have Base64 string in 'base64' field\n\n    @PostMapping(path = \"/upload\", consumes = \"application/json\", produces = \"application/json\")\n    public DeferredResult&lt;Collection&lt;ProcessingResult&gt;&gt; processJSON(@RequestBody Base64EncodedImageJson [] imagesEncoded) {\n        logger.debug(\"processing application/json request\");\n        DeferredResult&lt;Collection&lt;ProcessingResult&gt;&gt; deferredResult = new DeferredResult&lt;&gt;();\n        CompletableFuture.supplyAsync( () -&gt; base64Uploader.upload(imagesEncoded))\n                         .whenComplete( (result, error) -&gt; {\n                             deferredResult.setResult(result);\n                             if (null != error) {\n                                 logger.error(\"ERROR: \" + error.getMessage());\n                             }\n                         });\n        return deferredResult;\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6658383,"reputation":8312,"user_id":5138198,"display_name":"Alex Nikulin"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1667331825,"creation_date":1547794497,"answer_id":54249051,"question_id":54164988,"body_markdown":"Your code is strange. Why are you not doing it this way?: \r\n\r\n    function image_upload() {\r\n      var file_input = this;\r\n      var name = file_input.getAttribute(&quot;id&quot;);\r\n      var url = file_input.dataset.url;\r\n    \r\n      for(var i = 0; i&lt;this.files.length; i++) {\r\n        var file =  this.files[i];\r\n        var xhr = new XMLHttpRequest();\r\n        xhr.open(&quot;POST&quot;, url, true);\r\n        xhr.setRequestHeader(&quot;Content-Type&quot;, &quot;application/x-www-form-urlencoded&quot;);\r\n        xhr.onreadystatechange = function() {\r\n            if (xhr.readyState == 4 &amp;&amp; xhr.status == 200) {\r\n                var id = xhr.responseText;\r\n                var input = createElement(&quot;input&quot;);\r\n                input.setAttribute(&quot;type&quot;, &quot;hidden&quot;);\r\n                input.setAttribute(&quot;name&quot;, name);\r\n                input.setAttribute(&quot;value&quot;, id);\r\n                file_input.after(input);\r\n            }\r\n        };\r\n        var formData = new FormData();\r\n        formData.append(&quot;image&quot;, file, name) \r\n        xhr.send(formData)\r\n      }\r\n    }\r\n\r\n??\r\n\r\nAnd you don&#39;t need any base64\r\n\r\nOr more modern, this variant:\r\n\r\n       function image_upload() {\r\n    \t  let file_input = this;\r\n          let name = file_input.getAttribute(&quot;id&quot;);\r\n          let url = file_input.dataset.url;\r\n    \t  let uploads = Array.from(this.files).map((file) =&gt; {\r\n    \t\tvar formData  = new FormData();\r\n    \t\tformData.append(name, file, file.name);\r\n    \t\treturn fetch(url, {method: &#39;POST&#39;, body: formData}).then((response) =&gt; response.text()).then((id)=&gt;{  \r\n                   let input = document.createElement(&quot;input&quot;);\r\n                    input.setAttribute(&quot;type&quot;, &quot;hidden&quot;);\r\n                    input.setAttribute(&quot;name&quot;, name);\r\n                    input.setAttribute(&quot;value&quot;, id);\r\n                    file_input.after(input);\r\n              });\r\n    \t   });\r\n    \t   return uploads;\r\n    \t  }));\r\n    \t}\r\n\r\n","title":"Illegal base64 character","body":"<p>Your code is strange. Why are you not doing it this way?:</p>\n<pre><code>function image_upload() {\n  var file_input = this;\n  var name = file_input.getAttribute(&quot;id&quot;);\n  var url = file_input.dataset.url;\n\n  for(var i = 0; i&lt;this.files.length; i++) {\n    var file =  this.files[i];\n    var xhr = new XMLHttpRequest();\n    xhr.open(&quot;POST&quot;, url, true);\n    xhr.setRequestHeader(&quot;Content-Type&quot;, &quot;application/x-www-form-urlencoded&quot;);\n    xhr.onreadystatechange = function() {\n        if (xhr.readyState == 4 &amp;&amp; xhr.status == 200) {\n            var id = xhr.responseText;\n            var input = createElement(&quot;input&quot;);\n            input.setAttribute(&quot;type&quot;, &quot;hidden&quot;);\n            input.setAttribute(&quot;name&quot;, name);\n            input.setAttribute(&quot;value&quot;, id);\n            file_input.after(input);\n        }\n    };\n    var formData = new FormData();\n    formData.append(&quot;image&quot;, file, name) \n    xhr.send(formData)\n  }\n}\n</code></pre>\n<p>??</p>\n<p>And you don't need any base64</p>\n<p>Or more modern, this variant:</p>\n<pre><code>   function image_upload() {\n      let file_input = this;\n      let name = file_input.getAttribute(&quot;id&quot;);\n      let url = file_input.dataset.url;\n      let uploads = Array.from(this.files).map((file) =&gt; {\n        var formData  = new FormData();\n        formData.append(name, file, file.name);\n        return fetch(url, {method: 'POST', body: formData}).then((response) =&gt; response.text()).then((id)=&gt;{  \n               let input = document.createElement(&quot;input&quot;);\n                input.setAttribute(&quot;type&quot;, &quot;hidden&quot;);\n                input.setAttribute(&quot;name&quot;, name);\n                input.setAttribute(&quot;value&quot;, id);\n                file_input.after(input);\n          });\n       });\n       return uploads;\n      }));\n    }\n</code></pre>\n"}],"owner":{"account_id":3187825,"reputation":8415,"user_id":2692962,"accept_rate":82,"display_name":"Kleber Mota"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":29352,"favorite_count":0,"down_vote_count":0,"up_vote_count":13,"answer_count":3,"score":13,"last_activity_date":1667331825,"creation_date":1547337665,"question_id":54164988,"body_markdown":"I am trying uploading an image with this javascript code:\r\n\r\n    var reader  = new FileReader();\r\n    reader.onloadend = function() {\r\n      var bytes = window.btoa(reader.result);\r\n      var ext = file.name.split(&quot;.&quot;).pop();\r\n      xhr.send(&quot;bytes=&quot;+bytes+&quot;&amp;type=&quot;+ext);\r\n    }\r\n    reader.readAsBinaryString(file);\r\n\r\nwhere `bytes` is passed to this java code on the server side:\r\n\r\n    public Integer upload(String bytes, String type) throws IOException {\r\n        byte[] bytes_final = Base64.getDecoder().decode(bytes.split(&quot;,&quot;)[1]);\r\n        BufferedImage src = ImageIO.read(new ByteArrayInputStream(bytes_final));\r\n        ...\r\n    }\r\n\r\nbut I am getting the error:\r\n\r\n    java.lang.IllegalArgumentException: Illegal base64 character 20\r\n    \tat java.base/java.util.Base64$Decoder.decode0(Base64.java:743) ~[na:na]\r\n    \tat java.base/java.util.Base64$Decoder.decode(Base64.java:535) ~[na:na]\r\n    \tat java.base/java.util.Base64$Decoder.decode(Base64.java:558) ~[na:na]\r\n    \tat org.loja.model.imagem.ImagemService.upload(ImagemService.java:25) ~[classes/:1.0-SNAPSHOT]\r\n    \tat org.loja.model.imagem.ImagemController.upload(ImagemController.java:25) ~[classes/:1.0-SNAPSHOT]\r\n    \tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]\r\n    \tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[na:na]\r\n    \tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]\r\n    \tat java.base/java.lang.reflect.Method.invoke(Method.java:566) ~[na:na]\r\n    \tat org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:209) ~[spring-web-5.0.9.RELEASE.jar:5.0.9.RELEASE]\r\n    \tat org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:136) ~[spring-web-5.0.9.RELEASE.jar:5.0.9.RELEASE]\r\n    \tat org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:102) ~[spring-webmvc-5.0.9.RELEASE.jar:5.0.9.RELEASE]\r\n    \tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:891) ~[spring-webmvc-5.0.9.RELEASE.jar:5.0.9.RELEASE]\r\n    \tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:797) ~[spring-webmvc-5.0.9.RELEASE.jar:5.0.9.RELEASE]\r\n    \tat org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-5.0.9.RELEASE.jar:5.0.9.RELEASE]\r\n    \tat org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:991) ~[spring-webmvc-5.0.9.RELEASE.jar:5.0.9.RELEASE]\r\n    \tat org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:925) ~[spring-webmvc-5.0.9.RELEASE.jar:5.0.9.RELEASE]\r\n    \tat org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:974) ~[spring-webmvc-5.0.9.RELEASE.jar:5.0.9.RELEASE]\r\n    \tat org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:877) ~[spring-webmvc-5.0.9.RELEASE.jar:5.0.9.RELEASE]\r\n    \tat javax.servlet.http.HttpServlet.service(HttpServlet.java:660) ~[servlet-api.jar:na]\r\n    \tat org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:851) ~[spring-webmvc-5.0.9.RELEASE.jar:5.0.9.RELEASE]\r\n    \tat javax.servlet.http.HttpServlet.service(HttpServlet.java:741) ~[servlet-api.jar:na]\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:231) ~[catalina.jar:9.0.14]\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[catalina.jar:9.0.14]\r\n    \tat org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53) ~[tomcat-websocket.jar:9.0.14]\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[catalina.jar:9.0.14]\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[catalina.jar:9.0.14]\r\n    \tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:320) ~[spring-security-web-5.0.8.RELEASE.jar:5.0.8.RELEASE]\r\n    \tat org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:127) ~[spring-security-web-5.0.8.RELEASE.jar:5.0.8.RELEASE]\r\n    \tat org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:91) ~[spring-security-web-5.0.8.RELEASE.jar:5.0.8.RELEASE]\r\n    \tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334) ~[spring-security-web-5.0.8.RELEASE.jar:5.0.8.RELEASE]\r\n    \tat org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:119) ~[spring-security-web-5.0.8.RELEASE.jar:5.0.8.RELEASE]\r\n    \tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334) ~[spring-security-web-5.0.8.RELEASE.jar:5.0.8.RELEASE]\r\n    \tat org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:137) ~[spring-security-web-5.0.8.RELEASE.jar:5.0.8.RELEASE]\r\n    \tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334) ~[spring-security-web-5.0.8.RELEASE.jar:5.0.8.RELEASE]\r\n    \tat org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:111) ~[spring-security-web-5.0.8.RELEASE.jar:5.0.8.RELEASE]\r\n    \tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334) ~[spring-security-web-5.0.8.RELEASE.jar:5.0.8.RELEASE]\r\n    \tat org.springframework.security.web.authentication.rememberme.RememberMeAuthenticationFilter.doFilter(RememberMeAuthenticationFilter.java:158) ~[spring-security-web-5.0.8.RELEASE.jar:5.0.8.RELEASE]\r\n    \tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334) ~[spring-security-web-5.0.8.RELEASE.jar:5.0.8.RELEASE]\r\n    \tat org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:170) ~[spring-security-web-5.0.8.RELEASE.jar:5.0.8.RELEASE]\r\n    \tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334) ~[spring-security-web-5.0.8.RELEASE.jar:5.0.8.RELEASE]\r\n    \tat org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63) ~[spring-security-web-5.0.8.RELEASE.jar:5.0.8.RELEASE]\r\n    \tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334) ~[spring-security-web-5.0.8.RELEASE.jar:5.0.8.RELEASE]\r\n    \tat org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:200) ~[spring-security-web-5.0.8.RELEASE.jar:5.0.8.RELEASE]\r\n    \tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334) ~[spring-security-web-5.0.8.RELEASE.jar:5.0.8.RELEASE]\r\n    \tat org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:116) ~[spring-security-web-5.0.8.RELEASE.jar:5.0.8.RELEASE]\r\n    \tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334) ~[spring-security-web-5.0.8.RELEASE.jar:5.0.8.RELEASE]\r\n    \tat org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:66) ~[spring-security-web-5.0.8.RELEASE.jar:5.0.8.RELEASE]\r\n    \tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107) ~[spring-web-5.0.9.RELEASE.jar:5.0.9.RELEASE]\r\n    \tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334) ~[spring-security-web-5.0.8.RELEASE.jar:5.0.8.RELEASE]\r\n    \tat org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:105) ~[spring-security-web-5.0.8.RELEASE.jar:5.0.8.RELEASE]\r\n    \tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334) ~[spring-security-web-5.0.8.RELEASE.jar:5.0.8.RELEASE]\r\n    \tat org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:56) ~[spring-security-web-5.0.8.RELEASE.jar:5.0.8.RELEASE]\r\n    \tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107) ~[spring-web-5.0.9.RELEASE.jar:5.0.9.RELEASE]\r\n    \tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334) ~[spring-security-web-5.0.8.RELEASE.jar:5.0.8.RELEASE]\r\n    \tat org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:215) ~[spring-security-web-5.0.8.RELEASE.jar:5.0.8.RELEASE]\r\n    \tat org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:178) ~[spring-security-web-5.0.8.RELEASE.jar:5.0.8.RELEASE]\r\n    \tat org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:357) ~[spring-web-5.0.9.RELEASE.jar:5.0.9.RELEASE]\r\n    \tat org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:270) ~[spring-web-5.0.9.RELEASE.jar:5.0.9.RELEASE]\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[catalina.jar:9.0.14]\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[catalina.jar:9.0.14]\r\n    \tat org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:99) ~[spring-web-5.0.9.RELEASE.jar:5.0.9.RELEASE]\r\n    \tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107) ~[spring-web-5.0.9.RELEASE.jar:5.0.9.RELEASE]\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[catalina.jar:9.0.14]\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[catalina.jar:9.0.14]\r\n    \tat org.springframework.web.filter.HttpPutFormContentFilter.doFilterInternal(HttpPutFormContentFilter.java:109) ~[spring-web-5.0.9.RELEASE.jar:5.0.9.RELEASE]\r\n    \tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107) ~[spring-web-5.0.9.RELEASE.jar:5.0.9.RELEASE]\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[catalina.jar:9.0.14]\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[catalina.jar:9.0.14]\r\n    \tat org.springframework.web.filter.HiddenHttpMethodFilter.doFilterInternal(HiddenHttpMethodFilter.java:93) ~[spring-web-5.0.9.RELEASE.jar:5.0.9.RELEASE]\r\n    \tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107) ~[spring-web-5.0.9.RELEASE.jar:5.0.9.RELEASE]\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[catalina.jar:9.0.14]\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[catalina.jar:9.0.14]\r\n    \tat org.springframework.boot.web.servlet.support.ErrorPageFilter.doFilter(ErrorPageFilter.java:130) ~[spring-boot-2.0.5.RELEASE.jar:2.0.5.RELEASE]\r\n    \tat org.springframework.boot.web.servlet.support.ErrorPageFilter.access$000(ErrorPageFilter.java:66) ~[spring-boot-2.0.5.RELEASE.jar:2.0.5.RELEASE]\r\n    \tat org.springframework.boot.web.servlet.support.ErrorPageFilter$1.doFilterInternal(ErrorPageFilter.java:105) ~[spring-boot-2.0.5.RELEASE.jar:2.0.5.RELEASE]\r\n    \tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107) ~[spring-web-5.0.9.RELEASE.jar:5.0.9.RELEASE]\r\n    \tat org.springframework.boot.web.servlet.support.ErrorPageFilter.doFilter(ErrorPageFilter.java:123) ~[spring-boot-2.0.5.RELEASE.jar:2.0.5.RELEASE]\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[catalina.jar:9.0.14]\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[catalina.jar:9.0.14]\r\n    \tat org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:200) ~[spring-web-5.0.9.RELEASE.jar:5.0.9.RELEASE]\r\n    \tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107) ~[spring-web-5.0.9.RELEASE.jar:5.0.9.RELEASE]\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[catalina.jar:9.0.14]\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[catalina.jar:9.0.14]\r\n    \tat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:199) ~[catalina.jar:9.0.14]\r\n    \tat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:96) ~[catalina.jar:9.0.14]\r\n    \tat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:490) ~[catalina.jar:9.0.14]\r\n    \tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:139) ~[catalina.jar:9.0.14]\r\n    \tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92) ~[catalina.jar:9.0.14]\r\n    \tat org.apache.catalina.valves.AbstractAccessLogValve.invoke(AbstractAccessLogValve.java:668) ~[catalina.jar:9.0.14]\r\n    \tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74) ~[catalina.jar:9.0.14]\r\n    \tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343) ~[catalina.jar:9.0.14]\r\n    \tat org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:408) ~[tomcat-coyote.jar:9.0.14]\r\n    \tat org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:66) ~[tomcat-coyote.jar:9.0.14]\r\n    \tat org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:834) ~[tomcat-coyote.jar:9.0.14]\r\n    \tat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1417) ~[tomcat-coyote.jar:9.0.14]\r\n    \tat org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49) ~[tomcat-coyote.jar:9.0.14]\r\n    \tat java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128) ~[na:na]\r\n    \tat java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628) ~[na:na]\r\n    \tat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) ~[tomcat-util.jar:9.0.14]\r\n    \tat java.base/java.lang.Thread.run(Thread.java:834) ~[na:na]\r\n\r\n\r\n\r\nanyone can give me a hint of what&#39;s wrong here?\r\n\r\nps.:\r\n\r\ncomplete javascript function:\r\n\r\n    function image_upload() {\r\n      var file_input = this;\r\n      var name = file_input.getAttribute(&quot;id&quot;);\r\n      var url = file_input.dataset.url;\r\n    \r\n      for(var i = 0; i&lt;this.files.length; i++) {\r\n        var file =  this.files[i];\r\n        var xhr = new XMLHttpRequest();\r\n        xhr.open(&quot;POST&quot;, url, true);\r\n        xhr.setRequestHeader(&quot;Content-Type&quot;, &quot;application/x-www-form-urlencoded&quot;);\r\n        xhr.onreadystatechange = function() {\r\n            if (xhr.readyState == 4 &amp;&amp; xhr.status == 200) {\r\n                var id = xhr.responseText;\r\n                var input = createElement(&quot;input&quot;);\r\n                input.setAttribute(&quot;type&quot;, &quot;hidden&quot;);\r\n                input.setAttribute(&quot;name&quot;, name);\r\n                input.setAttribute(&quot;value&quot;, id);\r\n                file_input.after(input);\r\n            }\r\n        };\r\n        var reader  = new FileReader();\r\n        reader.onloadend = function() {\r\n          var bytes = reader.result;\r\n          var ext = file.name.split(&quot;.&quot;).pop();\r\n          xhr.send(&quot;bytes=&quot;+bytes+&quot;&amp;type=&quot;+ext);\r\n        }\r\n        reader.readAsDataURL(file);\r\n      }\r\n    }\r\n\r\ncomplete java function:\r\n\r\n      public Integer upload(String bytes, String type) throws IOException {\r\n        byte[] bytes_final = Base64.getDecoder().decode(bytes.split(&quot;,&quot;)[1]);\r\n        BufferedImage src = ImageIO.read(new ByteArrayInputStream(bytes_final));\r\n    \r\n        String file_name = file_path + File.separator + fileName();\r\n        File arquivo = new File(file_name);\r\n    \t\tif(!arquivo.exists())\r\n    \t\t\tif(arquivo.mkdirs())\r\n    \t\t\t\tarquivo.createNewFile();\r\n    \r\n        ImageIO.write(src, type, arquivo);\r\n    \r\n        Imagem imagem = new Imagem();\r\n        imagem.setFileName(file_name);\r\n        this.dao.insert(imagem);\r\n    \r\n        return imagem.getId();\r\n      }\r\n\r\n\r\n","title":"Illegal base64 character","body":"<p>I am trying uploading an image with this javascript code:</p>\n\n<pre><code>var reader  = new FileReader();\nreader.onloadend = function() {\n  var bytes = window.btoa(reader.result);\n  var ext = file.name.split(\".\").pop();\n  xhr.send(\"bytes=\"+bytes+\"&amp;type=\"+ext);\n}\nreader.readAsBinaryString(file);\n</code></pre>\n\n<p>where <code>bytes</code> is passed to this java code on the server side:</p>\n\n<pre><code>public Integer upload(String bytes, String type) throws IOException {\n    byte[] bytes_final = Base64.getDecoder().decode(bytes.split(\",\")[1]);\n    BufferedImage src = ImageIO.read(new ByteArrayInputStream(bytes_final));\n    ...\n}\n</code></pre>\n\n<p>but I am getting the error:</p>\n\n<pre><code>java.lang.IllegalArgumentException: Illegal base64 character 20\n    at java.base/java.util.Base64$Decoder.decode0(Base64.java:743) ~[na:na]\n    at java.base/java.util.Base64$Decoder.decode(Base64.java:535) ~[na:na]\n    at java.base/java.util.Base64$Decoder.decode(Base64.java:558) ~[na:na]\n    at org.loja.model.imagem.ImagemService.upload(ImagemService.java:25) ~[classes/:1.0-SNAPSHOT]\n    at org.loja.model.imagem.ImagemController.upload(ImagemController.java:25) ~[classes/:1.0-SNAPSHOT]\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[na:na]\n    at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]\n    at java.base/java.lang.reflect.Method.invoke(Method.java:566) ~[na:na]\n    at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:209) ~[spring-web-5.0.9.RELEASE.jar:5.0.9.RELEASE]\n    at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:136) ~[spring-web-5.0.9.RELEASE.jar:5.0.9.RELEASE]\n    at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:102) ~[spring-webmvc-5.0.9.RELEASE.jar:5.0.9.RELEASE]\n    at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:891) ~[spring-webmvc-5.0.9.RELEASE.jar:5.0.9.RELEASE]\n    at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:797) ~[spring-webmvc-5.0.9.RELEASE.jar:5.0.9.RELEASE]\n    at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-5.0.9.RELEASE.jar:5.0.9.RELEASE]\n    at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:991) ~[spring-webmvc-5.0.9.RELEASE.jar:5.0.9.RELEASE]\n    at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:925) ~[spring-webmvc-5.0.9.RELEASE.jar:5.0.9.RELEASE]\n    at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:974) ~[spring-webmvc-5.0.9.RELEASE.jar:5.0.9.RELEASE]\n    at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:877) ~[spring-webmvc-5.0.9.RELEASE.jar:5.0.9.RELEASE]\n    at javax.servlet.http.HttpServlet.service(HttpServlet.java:660) ~[servlet-api.jar:na]\n    at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:851) ~[spring-webmvc-5.0.9.RELEASE.jar:5.0.9.RELEASE]\n    at javax.servlet.http.HttpServlet.service(HttpServlet.java:741) ~[servlet-api.jar:na]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:231) ~[catalina.jar:9.0.14]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[catalina.jar:9.0.14]\n    at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53) ~[tomcat-websocket.jar:9.0.14]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[catalina.jar:9.0.14]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[catalina.jar:9.0.14]\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:320) ~[spring-security-web-5.0.8.RELEASE.jar:5.0.8.RELEASE]\n    at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:127) ~[spring-security-web-5.0.8.RELEASE.jar:5.0.8.RELEASE]\n    at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:91) ~[spring-security-web-5.0.8.RELEASE.jar:5.0.8.RELEASE]\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334) ~[spring-security-web-5.0.8.RELEASE.jar:5.0.8.RELEASE]\n    at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:119) ~[spring-security-web-5.0.8.RELEASE.jar:5.0.8.RELEASE]\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334) ~[spring-security-web-5.0.8.RELEASE.jar:5.0.8.RELEASE]\n    at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:137) ~[spring-security-web-5.0.8.RELEASE.jar:5.0.8.RELEASE]\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334) ~[spring-security-web-5.0.8.RELEASE.jar:5.0.8.RELEASE]\n    at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:111) ~[spring-security-web-5.0.8.RELEASE.jar:5.0.8.RELEASE]\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334) ~[spring-security-web-5.0.8.RELEASE.jar:5.0.8.RELEASE]\n    at org.springframework.security.web.authentication.rememberme.RememberMeAuthenticationFilter.doFilter(RememberMeAuthenticationFilter.java:158) ~[spring-security-web-5.0.8.RELEASE.jar:5.0.8.RELEASE]\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334) ~[spring-security-web-5.0.8.RELEASE.jar:5.0.8.RELEASE]\n    at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:170) ~[spring-security-web-5.0.8.RELEASE.jar:5.0.8.RELEASE]\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334) ~[spring-security-web-5.0.8.RELEASE.jar:5.0.8.RELEASE]\n    at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63) ~[spring-security-web-5.0.8.RELEASE.jar:5.0.8.RELEASE]\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334) ~[spring-security-web-5.0.8.RELEASE.jar:5.0.8.RELEASE]\n    at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:200) ~[spring-security-web-5.0.8.RELEASE.jar:5.0.8.RELEASE]\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334) ~[spring-security-web-5.0.8.RELEASE.jar:5.0.8.RELEASE]\n    at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:116) ~[spring-security-web-5.0.8.RELEASE.jar:5.0.8.RELEASE]\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334) ~[spring-security-web-5.0.8.RELEASE.jar:5.0.8.RELEASE]\n    at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:66) ~[spring-security-web-5.0.8.RELEASE.jar:5.0.8.RELEASE]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107) ~[spring-web-5.0.9.RELEASE.jar:5.0.9.RELEASE]\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334) ~[spring-security-web-5.0.8.RELEASE.jar:5.0.8.RELEASE]\n    at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:105) ~[spring-security-web-5.0.8.RELEASE.jar:5.0.8.RELEASE]\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334) ~[spring-security-web-5.0.8.RELEASE.jar:5.0.8.RELEASE]\n    at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:56) ~[spring-security-web-5.0.8.RELEASE.jar:5.0.8.RELEASE]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107) ~[spring-web-5.0.9.RELEASE.jar:5.0.9.RELEASE]\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334) ~[spring-security-web-5.0.8.RELEASE.jar:5.0.8.RELEASE]\n    at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:215) ~[spring-security-web-5.0.8.RELEASE.jar:5.0.8.RELEASE]\n    at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:178) ~[spring-security-web-5.0.8.RELEASE.jar:5.0.8.RELEASE]\n    at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:357) ~[spring-web-5.0.9.RELEASE.jar:5.0.9.RELEASE]\n    at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:270) ~[spring-web-5.0.9.RELEASE.jar:5.0.9.RELEASE]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[catalina.jar:9.0.14]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[catalina.jar:9.0.14]\n    at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:99) ~[spring-web-5.0.9.RELEASE.jar:5.0.9.RELEASE]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107) ~[spring-web-5.0.9.RELEASE.jar:5.0.9.RELEASE]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[catalina.jar:9.0.14]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[catalina.jar:9.0.14]\n    at org.springframework.web.filter.HttpPutFormContentFilter.doFilterInternal(HttpPutFormContentFilter.java:109) ~[spring-web-5.0.9.RELEASE.jar:5.0.9.RELEASE]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107) ~[spring-web-5.0.9.RELEASE.jar:5.0.9.RELEASE]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[catalina.jar:9.0.14]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[catalina.jar:9.0.14]\n    at org.springframework.web.filter.HiddenHttpMethodFilter.doFilterInternal(HiddenHttpMethodFilter.java:93) ~[spring-web-5.0.9.RELEASE.jar:5.0.9.RELEASE]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107) ~[spring-web-5.0.9.RELEASE.jar:5.0.9.RELEASE]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[catalina.jar:9.0.14]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[catalina.jar:9.0.14]\n    at org.springframework.boot.web.servlet.support.ErrorPageFilter.doFilter(ErrorPageFilter.java:130) ~[spring-boot-2.0.5.RELEASE.jar:2.0.5.RELEASE]\n    at org.springframework.boot.web.servlet.support.ErrorPageFilter.access$000(ErrorPageFilter.java:66) ~[spring-boot-2.0.5.RELEASE.jar:2.0.5.RELEASE]\n    at org.springframework.boot.web.servlet.support.ErrorPageFilter$1.doFilterInternal(ErrorPageFilter.java:105) ~[spring-boot-2.0.5.RELEASE.jar:2.0.5.RELEASE]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107) ~[spring-web-5.0.9.RELEASE.jar:5.0.9.RELEASE]\n    at org.springframework.boot.web.servlet.support.ErrorPageFilter.doFilter(ErrorPageFilter.java:123) ~[spring-boot-2.0.5.RELEASE.jar:2.0.5.RELEASE]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[catalina.jar:9.0.14]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[catalina.jar:9.0.14]\n    at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:200) ~[spring-web-5.0.9.RELEASE.jar:5.0.9.RELEASE]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107) ~[spring-web-5.0.9.RELEASE.jar:5.0.9.RELEASE]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[catalina.jar:9.0.14]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[catalina.jar:9.0.14]\n    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:199) ~[catalina.jar:9.0.14]\n    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:96) ~[catalina.jar:9.0.14]\n    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:490) ~[catalina.jar:9.0.14]\n    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:139) ~[catalina.jar:9.0.14]\n    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92) ~[catalina.jar:9.0.14]\n    at org.apache.catalina.valves.AbstractAccessLogValve.invoke(AbstractAccessLogValve.java:668) ~[catalina.jar:9.0.14]\n    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74) ~[catalina.jar:9.0.14]\n    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343) ~[catalina.jar:9.0.14]\n    at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:408) ~[tomcat-coyote.jar:9.0.14]\n    at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:66) ~[tomcat-coyote.jar:9.0.14]\n    at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:834) ~[tomcat-coyote.jar:9.0.14]\n    at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1417) ~[tomcat-coyote.jar:9.0.14]\n    at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49) ~[tomcat-coyote.jar:9.0.14]\n    at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128) ~[na:na]\n    at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628) ~[na:na]\n    at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) ~[tomcat-util.jar:9.0.14]\n    at java.base/java.lang.Thread.run(Thread.java:834) ~[na:na]\n</code></pre>\n\n<p>anyone can give me a hint of what's wrong here?</p>\n\n<p>ps.:</p>\n\n<p>complete javascript function:</p>\n\n<pre><code>function image_upload() {\n  var file_input = this;\n  var name = file_input.getAttribute(\"id\");\n  var url = file_input.dataset.url;\n\n  for(var i = 0; i&lt;this.files.length; i++) {\n    var file =  this.files[i];\n    var xhr = new XMLHttpRequest();\n    xhr.open(\"POST\", url, true);\n    xhr.setRequestHeader(\"Content-Type\", \"application/x-www-form-urlencoded\");\n    xhr.onreadystatechange = function() {\n        if (xhr.readyState == 4 &amp;&amp; xhr.status == 200) {\n            var id = xhr.responseText;\n            var input = createElement(\"input\");\n            input.setAttribute(\"type\", \"hidden\");\n            input.setAttribute(\"name\", name);\n            input.setAttribute(\"value\", id);\n            file_input.after(input);\n        }\n    };\n    var reader  = new FileReader();\n    reader.onloadend = function() {\n      var bytes = reader.result;\n      var ext = file.name.split(\".\").pop();\n      xhr.send(\"bytes=\"+bytes+\"&amp;type=\"+ext);\n    }\n    reader.readAsDataURL(file);\n  }\n}\n</code></pre>\n\n<p>complete java function:</p>\n\n<pre><code>  public Integer upload(String bytes, String type) throws IOException {\n    byte[] bytes_final = Base64.getDecoder().decode(bytes.split(\",\")[1]);\n    BufferedImage src = ImageIO.read(new ByteArrayInputStream(bytes_final));\n\n    String file_name = file_path + File.separator + fileName();\n    File arquivo = new File(file_name);\n        if(!arquivo.exists())\n            if(arquivo.mkdirs())\n                arquivo.createNewFile();\n\n    ImageIO.write(src, type, arquivo);\n\n    Imagem imagem = new Imagem();\n    imagem.setFileName(file_name);\n    this.dao.insert(imagem);\n\n    return imagem.getId();\n  }\n</code></pre>\n"},{"tags":["java","android","bluetooth","bluetooth-lowenergy"],"comments":[{"owner":{"account_id":269227,"reputation":18215,"user_id":558433,"accept_rate":72,"display_name":"Marcos Vasconcelos"},"score":0,"creation_date":1530300667,"post_id":51107933,"comment_id":89203625,"body_markdown":"You missed to initialize ```mBluetoothAdapter``` before trying to use it","body":"You missed to initialize <code>mBluetoothAdapter</code> before trying to use it"},{"owner":{"account_id":4656983,"reputation":41,"user_id":3772327,"display_name":"thunderbootyclap"},"score":0,"creation_date":1530628482,"post_id":51107933,"comment_id":89297768,"body_markdown":"What do you mean? I setup `mBluetoothAdapter` and then used `mBluetoothAdapter.getDefaultAdapter()` in the onCreate method","body":"What do you mean? I setup <code>mBluetoothAdapter</code> and then used <code>mBluetoothAdapter.getDefaultAdapter()</code> in the onCreate method"},{"owner":{"account_id":269227,"reputation":18215,"user_id":558433,"accept_rate":72,"display_name":"Marcos Vasconcelos"},"score":0,"creation_date":1530642434,"post_id":51107933,"comment_id":89305231,"body_markdown":"You missed something like ```mBluetoothAdapter = instance creation```, check answer","body":"You missed something like <code>mBluetoothAdapter = instance creation</code>, check answer"}],"answers":[{"tags":[],"owner":{"account_id":269227,"reputation":18215,"user_id":558433,"accept_rate":72,"display_name":"Marcos Vasconcelos"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1530812693,"creation_date":1530642402,"answer_id":51160896,"question_id":51107933,"body_markdown":"You missed to initialize ```mBluetoothAdapter```\r\n\r\nAs of (at oncreate):\r\n\r\n    BluetoothManager manager = (BluetoothManager) getSystemService(Context.BLUETOOTH_SERVICE);\r\n    mBluetoothAdapter = manager.getAdapter();\r\n\r\ninstead of:\r\n\r\n    mBluetoothAdapter.getDefaultAdapter();\r\n\r\nAfter that your variable is initialized and ready to use, just check if you need RuntimePermissions for using bluetooth.","title":"BLE connection issues","body":"<p>You missed to initialize <code>mBluetoothAdapter</code></p>\n\n<p>As of (at oncreate):</p>\n\n<pre><code>BluetoothManager manager = (BluetoothManager) getSystemService(Context.BLUETOOTH_SERVICE);\nmBluetoothAdapter = manager.getAdapter();\n</code></pre>\n\n<p>instead of:</p>\n\n<pre><code>mBluetoothAdapter.getDefaultAdapter();\n</code></pre>\n\n<p>After that your variable is initialized and ready to use, just check if you need RuntimePermissions for using bluetooth.</p>\n"},{"tags":[],"owner":{"account_id":1184171,"reputation":1796,"user_id":1158478,"accept_rate":60,"display_name":"ArtHare"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1530882428,"creation_date":1530813919,"answer_id":51197493,"question_id":51107933,"body_markdown":"Much of the stuff in android BLE communication is asynchronous.\r\n\r\nSo when you call Device.connectGatt(), you need to wait for the onConnectionStateChange callback before doing the next thing.  Your attempts to enumerate the services will fail (probably quietly) because your connection state hasn&#39;t gone from 0 to 2 at that point.  In your log you can see that you do the getServices() call before it has called you back to say the connection state has gone to connected.\r\n\r\nMaking things trickier, in my experience you should only be doing your BluetoothDevice interaction from the main thread. (Edit: Only sending requests from the main thread is apparently not a requirement)\r\n\r\nSo each command you do (connecting, reading characteristic values, writing, disconnecting, enumerating services, etc) needs to look like:\r\n\r\n 1. Main Thread: Call the (connect|read|write|enumerate) function\r\n 2. Callback thread: Java calls your BluetoothGattCallback, and you should find a way (Handler?) to signal the main thread to do your next thing.\r\n 3. Main thread: process the result from BluetoothGattCallback and trigger the next thing you&#39;ll be doing.\r\n\r\nMild aside: This is a lot easier in objective-c and react-native-ble-plx, because they handle the threading for you.  If you design a good way to get the results from the callback thread to the main thread from the beginning, you will save yourself a lot of pain.\r\n\r\nExample code for getting stuff back to the UI thread:\r\n\r\n    Handler m_handler;\r\n    public void onResume() {\r\n      m_handler = new Handler(); // creates a Handler bound to the UI thread, which lets us fire messages back and forth between threads.\r\n    }\r\n\r\n    // ... other stuff ... \r\n\r\n    public void onConnectionStateChange(BluetoothGatt gatt, int status, int newState) {\r\n            super.onConnectionStateChange(gatt, status, newState);\r\n\r\n            Log.i(&quot;onConnectionStateChange&quot;, &quot;State Changed from: &quot; + status + &quot; to &quot; + newState);\r\n\r\n            if (newState == BluetoothProfile.STATE_CONNECTED){\r\n                // oh boy, we&#39;re connected.  Let&#39;s try to discover services!\r\n                // m_handler.post() is a good way to make sure the thing you pass runs on the UI thread.\r\n                m_handler.post(new Runnable() {\r\n                    @Override\r\n                    public void run() {\r\n                      gatt.discoverServices();\r\n                    }\r\n                })\r\n            }\r\n        }","title":"BLE connection issues","body":"<p>Much of the stuff in android BLE communication is asynchronous.</p>\n\n<p>So when you call Device.connectGatt(), you need to wait for the onConnectionStateChange callback before doing the next thing.  Your attempts to enumerate the services will fail (probably quietly) because your connection state hasn't gone from 0 to 2 at that point.  In your log you can see that you do the getServices() call before it has called you back to say the connection state has gone to connected.</p>\n\n<p>Making things trickier, in my experience you should only be doing your BluetoothDevice interaction from the main thread. (Edit: Only sending requests from the main thread is apparently not a requirement)</p>\n\n<p>So each command you do (connecting, reading characteristic values, writing, disconnecting, enumerating services, etc) needs to look like:</p>\n\n<ol>\n<li>Main Thread: Call the (connect|read|write|enumerate) function</li>\n<li>Callback thread: Java calls your BluetoothGattCallback, and you should find a way (Handler?) to signal the main thread to do your next thing.</li>\n<li>Main thread: process the result from BluetoothGattCallback and trigger the next thing you'll be doing.</li>\n</ol>\n\n<p>Mild aside: This is a lot easier in objective-c and react-native-ble-plx, because they handle the threading for you.  If you design a good way to get the results from the callback thread to the main thread from the beginning, you will save yourself a lot of pain.</p>\n\n<p>Example code for getting stuff back to the UI thread:</p>\n\n<pre><code>Handler m_handler;\npublic void onResume() {\n  m_handler = new Handler(); // creates a Handler bound to the UI thread, which lets us fire messages back and forth between threads.\n}\n\n// ... other stuff ... \n\npublic void onConnectionStateChange(BluetoothGatt gatt, int status, int newState) {\n        super.onConnectionStateChange(gatt, status, newState);\n\n        Log.i(\"onConnectionStateChange\", \"State Changed from: \" + status + \" to \" + newState);\n\n        if (newState == BluetoothProfile.STATE_CONNECTED){\n            // oh boy, we're connected.  Let's try to discover services!\n            // m_handler.post() is a good way to make sure the thing you pass runs on the UI thread.\n            m_handler.post(new Runnable() {\n                @Override\n                public void run() {\n                  gatt.discoverServices();\n                }\n            })\n        }\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4656983,"reputation":41,"user_id":3772327,"display_name":"thunderbootyclap"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1533047229,"creation_date":1533047229,"answer_id":51615767,"question_id":51107933,"body_markdown":"For anyone looking this up in the future: If you receive a message similar to D/BluetoothGatt: onConnectionUpdated() - Device=xx:xx:xx:xx:xx:xx interval=6 latency=0 timeout=500 status=0 you are connecting to the device but not &quot;enough&quot; to recieve info. For me it turned out i had to click the device to connect to a second time to actually recieve the data. I dont know why yet","title":"BLE connection issues","body":"<p>For anyone looking this up in the future: If you receive a message similar to D/BluetoothGatt: onConnectionUpdated() - Device=xx:xx:xx:xx:xx:xx interval=6 latency=0 timeout=500 status=0 you are connecting to the device but not \"enough\" to recieve info. For me it turned out i had to click the device to connect to a second time to actually recieve the data. I dont know why yet</p>\n"},{"tags":[],"owner":{"account_id":13368178,"reputation":11,"user_id":9853696,"display_name":"syjsyj"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1667331644,"creation_date":1574085223,"answer_id":58916162,"question_id":51107933,"body_markdown":"in your answer\r\n\r\n\r\n&gt; For anyone looking this up in the future: If you receive a message\r\n&gt; similar to D/BluetoothGatt: onConnectionUpdated() -\r\n&gt; Device=xx:xx:xx:xx:xx:xx interval=6 latency=0 timeout=500 status=0 you\r\n&gt; are connecting to the device but not &quot;enough&quot; to recieve info. For me\r\n&gt; it turned out i had to click the device to connect to a second time to\r\n&gt; actually recieve the data. I dont know why yet\r\n\r\nI Unfortunately got this problem, you can see in my question\r\nhttps://stackoverflow.com/questions/58555820/ble-ondescriptorwrite-is-not-trigger-when-writedescriptor-receive-true\r\nAnd What do you say is the second click device, your app or other ble device.\r\nThanks a lot.","title":"BLE connection issues","body":"<p>in your answer</p>\n<blockquote>\n<p>For anyone looking this up in the future: If you receive a message\nsimilar to D/BluetoothGatt: onConnectionUpdated() -\nDevice=xx:xx:xx:xx:xx:xx interval=6 latency=0 timeout=500 status=0 you\nare connecting to the device but not &quot;enough&quot; to recieve info. For me\nit turned out i had to click the device to connect to a second time to\nactually recieve the data. I dont know why yet</p>\n</blockquote>\n<p>I Unfortunately got this problem, you can see in my question\n<a href=\"https://stackoverflow.com/questions/58555820/ble-ondescriptorwrite-is-not-trigger-when-writedescriptor-receive-true\">BLE onDescriptorWrite is not trigger when writeDescriptor receive true</a>\nAnd What do you say is the second click device, your app or other ble device.\nThanks a lot.</p>\n"}],"owner":{"account_id":4656983,"reputation":41,"user_id":3772327,"display_name":"thunderbootyclap"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1830,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":4,"score":0,"last_activity_date":1667331644,"creation_date":1530298963,"question_id":51107933,"body_markdown":"I am working on an app that can connect to an adafruit flora BLE device to receive information from it. I want the app to display the list of found devices and when an item in the list view is clicked the connection is made and data can be received. Ultimately I want to take said data over to another activity to graph in realtime (if possible). There are a few things going on that i dont understand and I hope someone can shed light on.\r\n\r\n 1. When it is scanning for devices the list view shows them but there are multiples of each.\r\n 2. For some reason the `onPause` and `onResume` make the list view glitchy (displays devices and then removes them)\r\n 3. How do I know when there is a connection?\r\n 4. When I have getRemoteDevice in my code I get a runtime error ( Attempt to invoke virtual method &#39;android.bluetooth.BluetoothDevice android.bluetooth.BluetoothAdapter.getRemoteDevice(java.lang.String)&#39; on a null object reference)\r\n 5. When I try and use filters and settings in the startScan method I get nothing in my list, I have also tried null filters w/ settings and still nothing.\r\n\r\n----------\r\n\r\n\r\n    import android.annotation.SuppressLint;\r\n    import android.bluetooth.BluetoothAdapter;\r\n    import android.bluetooth.BluetoothDevice;\r\n    import android.bluetooth.BluetoothGatt;\r\n    import android.bluetooth.BluetoothGattCallback;\r\n    import android.bluetooth.BluetoothGattCharacteristic;\r\n    import android.bluetooth.BluetoothGattDescriptor;\r\n    import android.bluetooth.BluetoothProfile;\r\n    import android.bluetooth.le.BluetoothLeScanner;\r\n    import android.bluetooth.le.ScanCallback;\r\n    import android.content.Intent;\r\n    import android.os.Build;\r\n    import android.os.ParcelUuid;\r\n    import android.support.v7.app.AppCompatActivity;\r\n    import android.os.Bundle;\r\n    import android.util.Log;\r\n    import android.view.View;\r\n    import android.widget.AdapterView;\r\n    import android.widget.Button;\r\n    import android.widget.ListView;\r\n    import android.widget.TextView;\r\n    import android.widget.Toast;\r\n    \r\n    import java.util.ArrayList;\r\n    import java.util.Arrays;\r\n    import java.util.List;\r\n    import java.util.UUID;\r\n    \r\n    import no.nordicsemi.android.support.v18.scanner.BluetoothLeScannerCompat;\r\n    import no.nordicsemi.android.support.v18.scanner.ScanFilter;\r\n    import no.nordicsemi.android.support.v18.scanner.ScanResult;\r\n    import no.nordicsemi.android.support.v18.scanner.ScanSettings;\r\n    \r\n    public class BluetoothDiscovery extends AppCompatActivity {\r\n    \r\n        private String TAG = &quot;Bluetooth Device&quot;;\r\n        private int REQUEST_ENABLE_BT = 5;\r\n    \r\n        private BluetoothAdapter mBluetoothAdapter;\r\n        private BluetoothLeScannerCompat scanner;\r\n        private ScanSettings settings;\r\n        private UUID baseUUID = UUID.fromString(&quot;6e400001-b5a3-f393-e0a9-e50e24dcca9e&quot;); // service UUID\r\n        private UUID txUUID = UUID.fromString(&quot;6e400002-b5a3-f393-e0a9-e50e24dcca9e&quot;); // TX UUID characteristic\r\n        private UUID rxUUID = UUID.fromString(&quot;6e400003-b5a3-f393-e0a9-e50e24dcca9e&quot;); // RX UUID characteristic\r\n        private ScanFilter scanFilter;\r\n        private BluetoothDevice device, mdevice;\r\n        private BluetoothGatt mGatt;\r\n        private boolean mScanning = false;\r\n        private ArrayList&lt;deviceShowFormat&gt; foundDevices = new ArrayList&lt;&gt;();\r\n        formattingAdapter BTadapter;\r\n    \r\n        Button scanButton;\r\n        TextView fancyWords;\r\n        ListView deviceList;\r\n    \r\n        @Override\r\n        protected void onCreate(Bundle savedInstanceState) {\r\n            super.onCreate(savedInstanceState);\r\n            setContentView(R.layout.activity_bluetooth_discovery);\r\n    \r\n            mBluetoothAdapter.getDefaultAdapter();\r\n    \r\n            scanButton = findViewById(R.id.scanButt);\r\n            scanButton.setText(getString(R.string.notScanning));\r\n    \r\n            fancyWords = findViewById(R.id.discoverText);\r\n            fancyWords.setText(getString(R.string.nonScanTitle));\r\n    \r\n            deviceList = findViewById(R.id.deviceList);\r\n            BTadapter = new formattingAdapter(BluetoothDiscovery.this, foundDevices);\r\n            deviceList.setAdapter(BTadapter);\r\n    \r\n    \r\n            scanner = BluetoothLeScannerCompat.getScanner();\r\n    \r\n            settings = new ScanSettings.Builder().setScanMode(ScanSettings.SCAN_MODE_BALANCED).setReportDelay(500).build();\r\n    \r\n            scanFilter = new ScanFilter.Builder().setServiceUuid(new ParcelUuid(baseUUID)).build();\r\n    \r\n            //scanner.startScan(Arrays.asList(scanFilter), settings, mScanCallback);\r\n    \r\n            deviceList.setOnItemClickListener(new AdapterView.OnItemClickListener() {\r\n                @SuppressLint(&quot;LongLogTag&quot;)\r\n                @Override\r\n                public void onItemClick(AdapterView&lt;?&gt; adapterView, View view, int i, long l) {\r\n                    deviceShowFormat mBTDevice = foundDevices.get(i);\r\n    \r\n                    BluetoothDevice Device = mBTDevice.get_device();\r\n                    String deviceName = mBTDevice.get_device_name();\r\n                    String deviceAddress = mBTDevice.get_device_address();\r\n    \r\n                    Log.d(TAG, &quot;Selected device: &quot; + Device.toString());\r\n                    Log.d(TAG, &quot;Selected device name: &quot; + deviceName);\r\n                    Log.d(TAG, &quot;Selected device address: &quot; + deviceAddress);\r\n    \r\n    \r\n    \r\n                    //BluetoothDevice deviceConnect = mBluetoothAdapter.getRemoteDevice(deviceAddress);\r\n                    //deviceConnect.createBond();\r\n                    mGatt = Device.connectGatt(BluetoothDiscovery.this, false, mGattCallback);\r\n                    Toast.makeText(BluetoothDiscovery.this, &quot;Selected device: &quot; + deviceName, Toast.LENGTH_SHORT).show();\r\n    \r\n                    if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.KITKAT) {\r\n                        Device.createBond();\r\n                    }\r\n    \r\n                    Log.d(TAG, &quot;&quot; + Device.getBondState());\r\n                    if(Device.getBondState() == BluetoothDevice.BOND_BONDED){\r\n                        Toast.makeText(BluetoothDiscovery.this, &quot;Bluetooth device connected successfully&quot;, Toast.LENGTH_SHORT).show();\r\n                    }\r\n    \r\n                    mGatt.getServices();\r\n                    mGatt.getConnectedDevices();\r\n    \r\n                    Log.d(&quot;THIS IS THE DEVICES UUID&quot;, String.valueOf(Device.getUuids()));\r\n                    Log.d(&quot;DEVICE SERVICES&quot;, String.valueOf(mGatt.getServices()));\r\n                }\r\n            });\r\n        }\r\n    \r\n        private final no.nordicsemi.android.support.v18.scanner.ScanCallback mScanCallback = new no.nordicsemi.android.support.v18.scanner.ScanCallback() {\r\n            @Override\r\n            public void onScanResult(int callbackType, ScanResult result) {\r\n                super.onScanResult(callbackType, result);\r\n    \r\n                Log.i(&quot;onScanResult&quot;, &quot;device detected&quot;);\r\n    \r\n                    device = result.getDevice();\r\n                    String deviceName = device.getName();\r\n                    String deviceAddress = device.getAddress();\r\n    \r\n                    Log.d(TAG, &quot;Scanned device: &quot; + device.toString());\r\n                    Log.d(TAG, &quot;Scanned device name: &quot; + deviceName);\r\n                    Log.d(TAG, &quot;Scanned device address: &quot; + deviceAddress);\r\n    \r\n                    foundDevices.add(new deviceShowFormat(device, deviceName, deviceAddress));\r\n                    BTadapter.notifyDataSetChanged();\r\n            }\r\n        };\r\n    \r\n        private final BluetoothGattCallback mGattCallback = new BluetoothGattCallback() {\r\n            @Override\r\n            public void onConnectionStateChange(BluetoothGatt gatt, int status, int newState) {\r\n                super.onConnectionStateChange(gatt, status, newState);\r\n    \r\n                Log.i(&quot;onConnectionStateChange&quot;, &quot;State Changed from: &quot; + status + &quot; to &quot; + newState);\r\n    \r\n                if (newState == BluetoothProfile.STATE_CONNECTED){\r\n                    Toast.makeText(BluetoothDiscovery.this, &quot;Attempting service discovery&quot;, Toast.LENGTH_SHORT).show();\r\n                    Log.i(&quot;onConnectionStateChange&quot;, &quot;Attempting service discovery: &quot; + gatt.discoverServices());\r\n                    gatt.discoverServices();\r\n                } else if (newState == BluetoothProfile.STATE_DISCONNECTED){\r\n                    Toast.makeText(BluetoothDiscovery.this, &quot;Connection has been terminated&quot;, Toast.LENGTH_SHORT).show();\r\n                }\r\n            }\r\n    \r\n            @Override\r\n            public void onServicesDiscovered(BluetoothGatt gatt, int status){\r\n                super.onServicesDiscovered(gatt, status);\r\n    \r\n                Log.i(&quot;onServicesDiscovered&quot;, &quot;Hey, we found a service&quot;);\r\n    \r\n                if (status != BluetoothGatt.GATT_SUCCESS){\r\n                    // Handle error\r\n                    Log.d(&quot;onServicesDiscovered&quot; , &quot;&quot; + status);\r\n                    return;\r\n                }\r\n    \r\n                BluetoothGattCharacteristic characteristic = gatt.getService(baseUUID).getCharacteristic(rxUUID);\r\n    \r\n                gatt.setCharacteristicNotification(characteristic, true);\r\n    \r\n                BluetoothGattDescriptor descriptor = characteristic.getDescriptor(txUUID);\r\n                descriptor.setValue(BluetoothGattDescriptor.ENABLE_NOTIFICATION_VALUE);\r\n                gatt.writeDescriptor(descriptor);\r\n            }\r\n    \r\n            @Override\r\n            public void onCharacteristicRead(BluetoothGatt gatt, BluetoothGattCharacteristic characteristic, int status){\r\n    \r\n                Log.i(&quot;onCharacteristicRead&quot;, &quot;Characteristic has been read&quot;);\r\n    \r\n                readCounterCharacteristic(characteristic);\r\n            }\r\n    \r\n            @Override\r\n            public void onCharacteristicChanged(BluetoothGatt gatt, BluetoothGattCharacteristic characteristic) {\r\n                if (mGatt.writeCharacteristic(characteristic)){\r\n                    Log.d(&quot;Characteristic changed&quot;, &quot;Possibly looking for a write&quot;);\r\n                }\r\n    \r\n                if (mGatt.readCharacteristic(characteristic)){\r\n                    readCounterCharacteristic(characteristic);\r\n                }\r\n            }\r\n    \r\n            private void readCounterCharacteristic(BluetoothGattCharacteristic characteristic){\r\n    \r\n                if (mGatt.readCharacteristic(characteristic)){\r\n                    byte[] data = characteristic.getValue();\r\n    \r\n                    Log.d(&quot;READ DATA&quot;, data.toString());\r\n                }\r\n    \r\n    //            if (rxUUID.equals(characteristic.getUuid())){\r\n    //                //byte[] data = characteristic.getValue();\r\n    //                byte[] data = mGatt.readCharacteristic(characteristic);\r\n    //                //int value = Ints.fromByteArray(data);\r\n    //                Log.d(&quot;READ DATA&quot;, data.toString());\r\n    //            }\r\n            }\r\n        };\r\n    \r\n        public void toggleScan(View view){\r\n            mScanning = !mScanning;\r\n    \r\n            if(mScanning){\r\n                scanner.startScan(mScanCallback); //Arrays.asList(scanFilter) null, settings,\r\n                scanButton.setText(getString(R.string.scanInProgress));\r\n                fancyWords.setText(getString(R.string.ScanTitle));\r\n    \r\n            } else {\r\n                scanner.stopScan(mScanCallback);\r\n                scanButton.setText(getString(R.string.notScanning));\r\n            }\r\n        }\r\n    \r\n    //    @Override\r\n    //    public void onPause(){\r\n    //        super.onPause();\r\n    //\r\n    ////        if(mScanning){\r\n    ////            mScanning = !mScanning;\r\n    //            scanner.stopScan(mScanCallback);\r\n    ////        }\r\n    //\r\n    //        //Empty Adapter\r\n    //        //BTadapter.clear();\r\n    //        //BTadapter.notifyDataSetChanged();\r\n    //\r\n    //        //mdevice = device;\r\n    //\r\n    //    }\r\n    //\r\n    //    @Override\r\n    //    public void onResume(){\r\n    //        super.onResume();\r\n    //\r\n    //        if (mBluetoothAdapter == null || !mBluetoothAdapter.isEnabled()) {\r\n    //            Intent enableBtIntent = new Intent(BluetoothAdapter.ACTION_REQUEST_ENABLE);\r\n    //            startActivityForResult(enableBtIntent, REQUEST_ENABLE_BT);\r\n    //        }\r\n    //\r\n    //        //device = mdevice;\r\n    //    }\r\n    \r\n    \r\n    }\r\n\r\n\r\n\r\nThe code is the second activity in my app, in the first bluetooth is initialized and what-not. The above code works but I dont receive any data from the device and am not sure its truly connected. from the logs shown in the code I get:\r\n\r\n[Logcat][1]\r\n[Logcat2][2]\r\n\r\n\r\nResources im using:\r\n\r\nhttps://github.com/NordicSemiconductor/Android-Scanner-Compat-Library\r\n\r\nhttps://learn.adafruit.com/introducing-the-adafruit-bluefruit-le-uart-friend/uart-service\r\n\r\nhttp://nilhcem.com/android-things/bluetooth-low-energy\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/lKPQh.png\r\n  [2]: https://i.stack.imgur.com/M3EsZ.png","title":"BLE connection issues","body":"<p>I am working on an app that can connect to an adafruit flora BLE device to receive information from it. I want the app to display the list of found devices and when an item in the list view is clicked the connection is made and data can be received. Ultimately I want to take said data over to another activity to graph in realtime (if possible). There are a few things going on that i dont understand and I hope someone can shed light on.</p>\n\n<ol>\n<li>When it is scanning for devices the list view shows them but there are multiples of each.</li>\n<li>For some reason the <code>onPause</code> and <code>onResume</code> make the list view glitchy (displays devices and then removes them)</li>\n<li>How do I know when there is a connection?</li>\n<li>When I have getRemoteDevice in my code I get a runtime error ( Attempt to invoke virtual method 'android.bluetooth.BluetoothDevice android.bluetooth.BluetoothAdapter.getRemoteDevice(java.lang.String)' on a null object reference)</li>\n<li>When I try and use filters and settings in the startScan method I get nothing in my list, I have also tried null filters w/ settings and still nothing.</li>\n</ol>\n\n<hr>\n\n<pre><code>import android.annotation.SuppressLint;\nimport android.bluetooth.BluetoothAdapter;\nimport android.bluetooth.BluetoothDevice;\nimport android.bluetooth.BluetoothGatt;\nimport android.bluetooth.BluetoothGattCallback;\nimport android.bluetooth.BluetoothGattCharacteristic;\nimport android.bluetooth.BluetoothGattDescriptor;\nimport android.bluetooth.BluetoothProfile;\nimport android.bluetooth.le.BluetoothLeScanner;\nimport android.bluetooth.le.ScanCallback;\nimport android.content.Intent;\nimport android.os.Build;\nimport android.os.ParcelUuid;\nimport android.support.v7.app.AppCompatActivity;\nimport android.os.Bundle;\nimport android.util.Log;\nimport android.view.View;\nimport android.widget.AdapterView;\nimport android.widget.Button;\nimport android.widget.ListView;\nimport android.widget.TextView;\nimport android.widget.Toast;\n\nimport java.util.ArrayList;\nimport java.util.Arrays;\nimport java.util.List;\nimport java.util.UUID;\n\nimport no.nordicsemi.android.support.v18.scanner.BluetoothLeScannerCompat;\nimport no.nordicsemi.android.support.v18.scanner.ScanFilter;\nimport no.nordicsemi.android.support.v18.scanner.ScanResult;\nimport no.nordicsemi.android.support.v18.scanner.ScanSettings;\n\npublic class BluetoothDiscovery extends AppCompatActivity {\n\n    private String TAG = \"Bluetooth Device\";\n    private int REQUEST_ENABLE_BT = 5;\n\n    private BluetoothAdapter mBluetoothAdapter;\n    private BluetoothLeScannerCompat scanner;\n    private ScanSettings settings;\n    private UUID baseUUID = UUID.fromString(\"6e400001-b5a3-f393-e0a9-e50e24dcca9e\"); // service UUID\n    private UUID txUUID = UUID.fromString(\"6e400002-b5a3-f393-e0a9-e50e24dcca9e\"); // TX UUID characteristic\n    private UUID rxUUID = UUID.fromString(\"6e400003-b5a3-f393-e0a9-e50e24dcca9e\"); // RX UUID characteristic\n    private ScanFilter scanFilter;\n    private BluetoothDevice device, mdevice;\n    private BluetoothGatt mGatt;\n    private boolean mScanning = false;\n    private ArrayList&lt;deviceShowFormat&gt; foundDevices = new ArrayList&lt;&gt;();\n    formattingAdapter BTadapter;\n\n    Button scanButton;\n    TextView fancyWords;\n    ListView deviceList;\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_bluetooth_discovery);\n\n        mBluetoothAdapter.getDefaultAdapter();\n\n        scanButton = findViewById(R.id.scanButt);\n        scanButton.setText(getString(R.string.notScanning));\n\n        fancyWords = findViewById(R.id.discoverText);\n        fancyWords.setText(getString(R.string.nonScanTitle));\n\n        deviceList = findViewById(R.id.deviceList);\n        BTadapter = new formattingAdapter(BluetoothDiscovery.this, foundDevices);\n        deviceList.setAdapter(BTadapter);\n\n\n        scanner = BluetoothLeScannerCompat.getScanner();\n\n        settings = new ScanSettings.Builder().setScanMode(ScanSettings.SCAN_MODE_BALANCED).setReportDelay(500).build();\n\n        scanFilter = new ScanFilter.Builder().setServiceUuid(new ParcelUuid(baseUUID)).build();\n\n        //scanner.startScan(Arrays.asList(scanFilter), settings, mScanCallback);\n\n        deviceList.setOnItemClickListener(new AdapterView.OnItemClickListener() {\n            @SuppressLint(\"LongLogTag\")\n            @Override\n            public void onItemClick(AdapterView&lt;?&gt; adapterView, View view, int i, long l) {\n                deviceShowFormat mBTDevice = foundDevices.get(i);\n\n                BluetoothDevice Device = mBTDevice.get_device();\n                String deviceName = mBTDevice.get_device_name();\n                String deviceAddress = mBTDevice.get_device_address();\n\n                Log.d(TAG, \"Selected device: \" + Device.toString());\n                Log.d(TAG, \"Selected device name: \" + deviceName);\n                Log.d(TAG, \"Selected device address: \" + deviceAddress);\n\n\n\n                //BluetoothDevice deviceConnect = mBluetoothAdapter.getRemoteDevice(deviceAddress);\n                //deviceConnect.createBond();\n                mGatt = Device.connectGatt(BluetoothDiscovery.this, false, mGattCallback);\n                Toast.makeText(BluetoothDiscovery.this, \"Selected device: \" + deviceName, Toast.LENGTH_SHORT).show();\n\n                if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.KITKAT) {\n                    Device.createBond();\n                }\n\n                Log.d(TAG, \"\" + Device.getBondState());\n                if(Device.getBondState() == BluetoothDevice.BOND_BONDED){\n                    Toast.makeText(BluetoothDiscovery.this, \"Bluetooth device connected successfully\", Toast.LENGTH_SHORT).show();\n                }\n\n                mGatt.getServices();\n                mGatt.getConnectedDevices();\n\n                Log.d(\"THIS IS THE DEVICES UUID\", String.valueOf(Device.getUuids()));\n                Log.d(\"DEVICE SERVICES\", String.valueOf(mGatt.getServices()));\n            }\n        });\n    }\n\n    private final no.nordicsemi.android.support.v18.scanner.ScanCallback mScanCallback = new no.nordicsemi.android.support.v18.scanner.ScanCallback() {\n        @Override\n        public void onScanResult(int callbackType, ScanResult result) {\n            super.onScanResult(callbackType, result);\n\n            Log.i(\"onScanResult\", \"device detected\");\n\n                device = result.getDevice();\n                String deviceName = device.getName();\n                String deviceAddress = device.getAddress();\n\n                Log.d(TAG, \"Scanned device: \" + device.toString());\n                Log.d(TAG, \"Scanned device name: \" + deviceName);\n                Log.d(TAG, \"Scanned device address: \" + deviceAddress);\n\n                foundDevices.add(new deviceShowFormat(device, deviceName, deviceAddress));\n                BTadapter.notifyDataSetChanged();\n        }\n    };\n\n    private final BluetoothGattCallback mGattCallback = new BluetoothGattCallback() {\n        @Override\n        public void onConnectionStateChange(BluetoothGatt gatt, int status, int newState) {\n            super.onConnectionStateChange(gatt, status, newState);\n\n            Log.i(\"onConnectionStateChange\", \"State Changed from: \" + status + \" to \" + newState);\n\n            if (newState == BluetoothProfile.STATE_CONNECTED){\n                Toast.makeText(BluetoothDiscovery.this, \"Attempting service discovery\", Toast.LENGTH_SHORT).show();\n                Log.i(\"onConnectionStateChange\", \"Attempting service discovery: \" + gatt.discoverServices());\n                gatt.discoverServices();\n            } else if (newState == BluetoothProfile.STATE_DISCONNECTED){\n                Toast.makeText(BluetoothDiscovery.this, \"Connection has been terminated\", Toast.LENGTH_SHORT).show();\n            }\n        }\n\n        @Override\n        public void onServicesDiscovered(BluetoothGatt gatt, int status){\n            super.onServicesDiscovered(gatt, status);\n\n            Log.i(\"onServicesDiscovered\", \"Hey, we found a service\");\n\n            if (status != BluetoothGatt.GATT_SUCCESS){\n                // Handle error\n                Log.d(\"onServicesDiscovered\" , \"\" + status);\n                return;\n            }\n\n            BluetoothGattCharacteristic characteristic = gatt.getService(baseUUID).getCharacteristic(rxUUID);\n\n            gatt.setCharacteristicNotification(characteristic, true);\n\n            BluetoothGattDescriptor descriptor = characteristic.getDescriptor(txUUID);\n            descriptor.setValue(BluetoothGattDescriptor.ENABLE_NOTIFICATION_VALUE);\n            gatt.writeDescriptor(descriptor);\n        }\n\n        @Override\n        public void onCharacteristicRead(BluetoothGatt gatt, BluetoothGattCharacteristic characteristic, int status){\n\n            Log.i(\"onCharacteristicRead\", \"Characteristic has been read\");\n\n            readCounterCharacteristic(characteristic);\n        }\n\n        @Override\n        public void onCharacteristicChanged(BluetoothGatt gatt, BluetoothGattCharacteristic characteristic) {\n            if (mGatt.writeCharacteristic(characteristic)){\n                Log.d(\"Characteristic changed\", \"Possibly looking for a write\");\n            }\n\n            if (mGatt.readCharacteristic(characteristic)){\n                readCounterCharacteristic(characteristic);\n            }\n        }\n\n        private void readCounterCharacteristic(BluetoothGattCharacteristic characteristic){\n\n            if (mGatt.readCharacteristic(characteristic)){\n                byte[] data = characteristic.getValue();\n\n                Log.d(\"READ DATA\", data.toString());\n            }\n\n//            if (rxUUID.equals(characteristic.getUuid())){\n//                //byte[] data = characteristic.getValue();\n//                byte[] data = mGatt.readCharacteristic(characteristic);\n//                //int value = Ints.fromByteArray(data);\n//                Log.d(\"READ DATA\", data.toString());\n//            }\n        }\n    };\n\n    public void toggleScan(View view){\n        mScanning = !mScanning;\n\n        if(mScanning){\n            scanner.startScan(mScanCallback); //Arrays.asList(scanFilter) null, settings,\n            scanButton.setText(getString(R.string.scanInProgress));\n            fancyWords.setText(getString(R.string.ScanTitle));\n\n        } else {\n            scanner.stopScan(mScanCallback);\n            scanButton.setText(getString(R.string.notScanning));\n        }\n    }\n\n//    @Override\n//    public void onPause(){\n//        super.onPause();\n//\n////        if(mScanning){\n////            mScanning = !mScanning;\n//            scanner.stopScan(mScanCallback);\n////        }\n//\n//        //Empty Adapter\n//        //BTadapter.clear();\n//        //BTadapter.notifyDataSetChanged();\n//\n//        //mdevice = device;\n//\n//    }\n//\n//    @Override\n//    public void onResume(){\n//        super.onResume();\n//\n//        if (mBluetoothAdapter == null || !mBluetoothAdapter.isEnabled()) {\n//            Intent enableBtIntent = new Intent(BluetoothAdapter.ACTION_REQUEST_ENABLE);\n//            startActivityForResult(enableBtIntent, REQUEST_ENABLE_BT);\n//        }\n//\n//        //device = mdevice;\n//    }\n\n\n}\n</code></pre>\n\n<p>The code is the second activity in my app, in the first bluetooth is initialized and what-not. The above code works but I dont receive any data from the device and am not sure its truly connected. from the logs shown in the code I get:</p>\n\n<p><a href=\"https://i.stack.imgur.com/lKPQh.png\" rel=\"nofollow noreferrer\">Logcat</a>\n<a href=\"https://i.stack.imgur.com/M3EsZ.png\" rel=\"nofollow noreferrer\">Logcat2</a></p>\n\n<p>Resources im using:</p>\n\n<p><a href=\"https://github.com/NordicSemiconductor/Android-Scanner-Compat-Library\" rel=\"nofollow noreferrer\">https://github.com/NordicSemiconductor/Android-Scanner-Compat-Library</a></p>\n\n<p><a href=\"https://learn.adafruit.com/introducing-the-adafruit-bluefruit-le-uart-friend/uart-service\" rel=\"nofollow noreferrer\">https://learn.adafruit.com/introducing-the-adafruit-bluefruit-le-uart-friend/uart-service</a></p>\n\n<p><a href=\"http://nilhcem.com/android-things/bluetooth-low-energy\" rel=\"nofollow noreferrer\">http://nilhcem.com/android-things/bluetooth-low-energy</a></p>\n"},{"tags":["java","log4j","log4j2","properties-file","tomcat9"],"answers":[{"tags":[],"owner":{"account_id":10122987,"reputation":541,"user_id":7479307,"display_name":"Sunil Sunny"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1639997920,"creation_date":1639997920,"answer_id":70420782,"question_id":70394366,"body_markdown":"After deep Research I have found one Jar as my solution\r\n\r\nLog4j-jcl-2.16 jar.\r\n\r\nAfter adding this to my build path I am getting all Logs printed in my file","title":"Not Every log is printing in Log files using LOG4j2 Properties file","body":"<p>After deep Research I have found one Jar as my solution</p>\n<p>Log4j-jcl-2.16 jar.</p>\n<p>After adding this to my build path I am getting all Logs printed in my file</p>\n"},{"tags":[],"owner":{"account_id":13640230,"reputation":1,"user_id":20391386,"display_name":"Saurabh Kumar"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1667331401,"creation_date":1667331401,"answer_id":74280985,"question_id":70394366,"body_markdown":"-Dlog4j.configurationFile=/src/main/resources/log4j2.xml in setEnv.bat file solved my problem.\r\n","title":"Not Every log is printing in Log files using LOG4j2 Properties file","body":"<p>-Dlog4j.configurationFile=/src/main/resources/log4j2.xml in setEnv.bat file solved my problem.</p>\n"}],"owner":{"account_id":10122987,"reputation":541,"user_id":7479307,"display_name":"Sunil Sunny"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1311,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":70420782,"answer_count":2,"score":1,"last_activity_date":1667331401,"creation_date":1639749799,"question_id":70394366,"body_markdown":"I have configured my webapp in java using log4j2 for logs using properties file.\r\n\r\nWhen I am starting tomcat ,there are so many logs printing in console but in my file only few lines are printing.\r\n\r\nWhat should I do in order to print every line which is present in console to my Log File.\r\n\r\nRecently I have migrated from log 1.x to log 2.16\r\n\r\nWhen I am using log1.x everything is printed in log files which are in console but in log2 its not printing.\r\n\r\nFor Example when I am staring tomcat ,I am getting only my app related logs in the file but not anything related to tomcat startup logs or any other jar related logs\r\n\r\nCan anyone help me on this\r\n\r\nbelow is my config file\r\n\r\nlog4j2 properties:\r\n\r\n    status = all\r\n    \r\n    \r\n    \r\n    appender.console.type = Console\r\n    appender.console.name = LogToConsole\r\n    appender.console.layout.type = PatternLayout\r\n    appender.console.layout.pattern = [%-5level] %d{yyyy-MM-dd HH:mm:ss.SSS} [%t] %c{1} - %msg%n\r\n    \r\n    \r\n    \r\n    #appender.file.type = File\r\n    #appender.file.name = LogToFile\r\n    #appender.file.fileName=logs/app.log\r\n    #appender.file.layout.type=PatternLayout\r\n    #appender.file.layout.pattern=[%-5level] %d{yyyy-MM-dd HH:mm:ss.SSS} [%t] %c{1} - %msg%n\r\n    \r\n    \r\n    \r\n    # Rotate log file\r\n    appender.rolling.type = RollingFile\r\n    appender.rolling.name = LogToRollingFile\r\n    appender.rolling.fileName = ${catalina.home}/logs/SunnyLogs.log\r\n    appender.rolling.filePattern = ${catalina.home}/logs/$${date:yyyy-MM}/SunnyLogs-%d{MM-dd-yyyy}-%i.log.gz\r\n    appender.rolling.layout.type = PatternLayout\r\n    appender.rolling.layout.pattern = %d %p %C{1.} [%t] %m%n\r\n    appender.rolling.policies.type = Policies\r\n    appender.rolling.policies.time.type = TimeBasedTriggeringPolicy\r\n    appender.rolling.policies.size.type = SizeBasedTriggeringPolicy\r\n    appender.rolling.policies.size.size=10MB\r\n    appender.rolling.strategy.type = DefaultRolloverStrategy\r\n    appender.rolling.strategy.max = 10\r\n    \r\n    \r\n    \r\n    # Log to console and rolling file\r\n    logger.app.name = com.sunny.common\r\n    logger.app.level = all\r\n    logger.app.additivity = false\r\n    logger.app.appenderRef.rolling.ref = LogToRollingFile\r\n    logger.app.appenderRef.console.ref = LogToConsole\r\n    \r\n    \r\n    \r\n    rootLogger.level = all\r\n    rootLogger.appenderRef.stdout.ref = LogToConsole\r\n\r\n\r\n\r\n\r\n\r\n","title":"Not Every log is printing in Log files using LOG4j2 Properties file","body":"<p>I have configured my webapp in java using log4j2 for logs using properties file.</p>\n<p>When I am starting tomcat ,there are so many logs printing in console but in my file only few lines are printing.</p>\n<p>What should I do in order to print every line which is present in console to my Log File.</p>\n<p>Recently I have migrated from log 1.x to log 2.16</p>\n<p>When I am using log1.x everything is printed in log files which are in console but in log2 its not printing.</p>\n<p>For Example when I am staring tomcat ,I am getting only my app related logs in the file but not anything related to tomcat startup logs or any other jar related logs</p>\n<p>Can anyone help me on this</p>\n<p>below is my config file</p>\n<p>log4j2 properties:</p>\n<pre><code>status = all\n\n\n\nappender.console.type = Console\nappender.console.name = LogToConsole\nappender.console.layout.type = PatternLayout\nappender.console.layout.pattern = [%-5level] %d{yyyy-MM-dd HH:mm:ss.SSS} [%t] %c{1} - %msg%n\n\n\n\n#appender.file.type = File\n#appender.file.name = LogToFile\n#appender.file.fileName=logs/app.log\n#appender.file.layout.type=PatternLayout\n#appender.file.layout.pattern=[%-5level] %d{yyyy-MM-dd HH:mm:ss.SSS} [%t] %c{1} - %msg%n\n\n\n\n# Rotate log file\nappender.rolling.type = RollingFile\nappender.rolling.name = LogToRollingFile\nappender.rolling.fileName = ${catalina.home}/logs/SunnyLogs.log\nappender.rolling.filePattern = ${catalina.home}/logs/$${date:yyyy-MM}/SunnyLogs-%d{MM-dd-yyyy}-%i.log.gz\nappender.rolling.layout.type = PatternLayout\nappender.rolling.layout.pattern = %d %p %C{1.} [%t] %m%n\nappender.rolling.policies.type = Policies\nappender.rolling.policies.time.type = TimeBasedTriggeringPolicy\nappender.rolling.policies.size.type = SizeBasedTriggeringPolicy\nappender.rolling.policies.size.size=10MB\nappender.rolling.strategy.type = DefaultRolloverStrategy\nappender.rolling.strategy.max = 10\n\n\n\n# Log to console and rolling file\nlogger.app.name = com.sunny.common\nlogger.app.level = all\nlogger.app.additivity = false\nlogger.app.appenderRef.rolling.ref = LogToRollingFile\nlogger.app.appenderRef.console.ref = LogToConsole\n\n\n\nrootLogger.level = all\nrootLogger.appenderRef.stdout.ref = LogToConsole\n</code></pre>\n"},{"tags":["java","grid","vaadin"],"comments":[{"owner":{"account_id":295383,"reputation":4686,"user_id":599765,"accept_rate":22,"display_name":"Andr&#233; Schild"},"score":0,"creation_date":1667293275,"post_id":74252596,"comment_id":131128710,"body_markdown":"Where do you set the grid content? Usually when you do this in a background thread it load async.","body":"Where do you set the grid content? Usually when you do this in a background thread it load async."},{"owner":{"account_id":11926310,"reputation":627,"user_id":8727518,"display_name":"Michael Kročka"},"score":0,"creation_date":1667320670,"post_id":74252596,"comment_id":131137962,"body_markdown":"I call the `setupGrid()` method in the view constructor.","body":"I call the <code>setupGrid()</code> method in the view constructor."}],"answers":[{"tags":[],"owner":{"account_id":11926310,"reputation":627,"user_id":8727518,"display_name":"Michael Kročka"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1667331349,"creation_date":1667331349,"answer_id":74280973,"question_id":74252596,"body_markdown":"I have found a solution to my problem on the [Vaadin documentantion][1] page for Server Push. What I needed to add, was that in the `getIconColumn()` method the `asyncLoadIcon()` action with callback is started in a separate `Thread` each time. This has resulted in me getting the grid outline instantly, along with the easily generated content and some empty image icons. The image icons are then gradually filled in when the async method finishes. Here is the update code:\r\n\r\n  \r\n\r\n      private Image getIconColumn(MangaEntity entity) {\r\n        Image image = new Image(&quot;&quot;, &quot;&quot;);\r\n        image.setHeight(&quot;150px&quot;);\r\n        image.setWidth(&quot;100px&quot;);\r\n    \r\n        UI ui = UI.getCurrent();\r\n        new Thread(() -&gt; rsCrawler.asyncLoadIcon(entity.getUrlName())\r\n            .addCallback(\r\n                result -&gt; ui.access(() -&gt; image.setSrc(result)),\r\n                err -&gt; ui.access(() -&gt; Notification.show(&quot;Failed to parse icon for &quot; + entity.getName()))\r\n            )).start();\r\n    \r\n        return image;\r\n      }\r\n\r\n\r\n  [1]: https://vaadin.com/docs/latest/advanced/server-push","title":"Grid content loads &quot;synchronously&quot; when it should not","body":"<p>I have found a solution to my problem on the <a href=\"https://vaadin.com/docs/latest/advanced/server-push\" rel=\"nofollow noreferrer\">Vaadin documentantion</a> page for Server Push. What I needed to add, was that in the <code>getIconColumn()</code> method the <code>asyncLoadIcon()</code> action with callback is started in a separate <code>Thread</code> each time. This has resulted in me getting the grid outline instantly, along with the easily generated content and some empty image icons. The image icons are then gradually filled in when the async method finishes. Here is the update code:</p>\n<pre><code>  private Image getIconColumn(MangaEntity entity) {\n    Image image = new Image(&quot;&quot;, &quot;&quot;);\n    image.setHeight(&quot;150px&quot;);\n    image.setWidth(&quot;100px&quot;);\n\n    UI ui = UI.getCurrent();\n    new Thread(() -&gt; rsCrawler.asyncLoadIcon(entity.getUrlName())\n        .addCallback(\n            result -&gt; ui.access(() -&gt; image.setSrc(result)),\n            err -&gt; ui.access(() -&gt; Notification.show(&quot;Failed to parse icon for &quot; + entity.getName()))\n        )).start();\n\n    return image;\n  }\n</code></pre>\n"}],"owner":{"account_id":11926310,"reputation":627,"user_id":8727518,"display_name":"Michael Kročka"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":67,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":74280973,"answer_count":1,"score":0,"last_activity_date":1667331349,"creation_date":1667128846,"question_id":74252596,"body_markdown":"I am using vaadin grid with push enabled and an asynchronous method to fetch some data. What I would expect is that the data that is already present in the entity is loaded instantly and the data that is loaded using an asynchronous method is loaded using callback. What currently happens is that the outer grid structure is loaded but the content is loaded after a longer period of time all at once. Here is sample code:\r\n\r\n    private void setupGrid() {\r\n      // String grid for illustration\r\n      Grid&lt;String&gt; grid = new Grid&lt;&gt;();\r\n      grid.addComponentColumn(this::getIconColumn).setHeader(&quot;Name&quot;);\r\n\r\n      // other entity items would be displayed here\r\n      // grid.addComponentColumn(this::getMainColumn).setHeader(&quot;Other&quot;);\r\n\r\n      grid.setItems(&quot;2800-player-who-returned-10000-years-later&quot;,\r\n        &quot;2633-duke-pendragon&quot;, &quot;8713-dungeon-reset&quot;);\r\n\r\n      // this allows the outer grid structure to be displayed while not blocking UI\r\n      // but content is still loaded &quot;synchronously&quot; - all at once, not one by one\r\n      grid.getDataCommunicator().enablePushUpdates(Executors.newCachedThreadPool());\r\n\r\n      add(grid);\r\n    }\r\n    \r\n    private Image getIconColumn(String entityName) {\r\n      Image image = new Image(&quot;&quot;, &quot;&quot;);\r\n      image.setHeight(&quot;150px&quot;);\r\n      image.setWidth(&quot;100px&quot;);\r\n\r\n      UI ui = UI.getCurrent();\r\n      asyncLoadIcon(entityName)\r\n          .addCallback(\r\n              result -&gt; ui.access(() -&gt; image.setSrc(result)),\r\n              err -&gt; ui.access(() -&gt; Notification.show(&quot;Failed to parse icon for &quot; + entityName))\r\n          );\r\n    \r\n      return image;\r\n    }\r\n\r\nAnd finally the async method with `Thread.sleep(3000)` for illustration purposes.\r\n  \r\n\r\n    @Async\r\n    public ListenableFuture&lt;String&gt; asyncLoadIcon(String entityName) {\r\n      try {\r\n        // some real code\r\n    \r\n        Thread.sleep(3000);\r\n        return AsyncResult.forValue(entityname);\r\n    \r\n      } catch (IOException | InterruptedException e) {\r\n        log.error(e);\r\n      }\r\n      return AsyncResult.forExecutionException(new RuntimeException(&quot;Error&quot;));\r\n    }","title":"Grid content loads &quot;synchronously&quot; when it should not","body":"<p>I am using vaadin grid with push enabled and an asynchronous method to fetch some data. What I would expect is that the data that is already present in the entity is loaded instantly and the data that is loaded using an asynchronous method is loaded using callback. What currently happens is that the outer grid structure is loaded but the content is loaded after a longer period of time all at once. Here is sample code:</p>\n<pre><code>private void setupGrid() {\n  // String grid for illustration\n  Grid&lt;String&gt; grid = new Grid&lt;&gt;();\n  grid.addComponentColumn(this::getIconColumn).setHeader(&quot;Name&quot;);\n\n  // other entity items would be displayed here\n  // grid.addComponentColumn(this::getMainColumn).setHeader(&quot;Other&quot;);\n\n  grid.setItems(&quot;2800-player-who-returned-10000-years-later&quot;,\n    &quot;2633-duke-pendragon&quot;, &quot;8713-dungeon-reset&quot;);\n\n  // this allows the outer grid structure to be displayed while not blocking UI\n  // but content is still loaded &quot;synchronously&quot; - all at once, not one by one\n  grid.getDataCommunicator().enablePushUpdates(Executors.newCachedThreadPool());\n\n  add(grid);\n}\n\nprivate Image getIconColumn(String entityName) {\n  Image image = new Image(&quot;&quot;, &quot;&quot;);\n  image.setHeight(&quot;150px&quot;);\n  image.setWidth(&quot;100px&quot;);\n\n  UI ui = UI.getCurrent();\n  asyncLoadIcon(entityName)\n      .addCallback(\n          result -&gt; ui.access(() -&gt; image.setSrc(result)),\n          err -&gt; ui.access(() -&gt; Notification.show(&quot;Failed to parse icon for &quot; + entityName))\n      );\n\n  return image;\n}\n</code></pre>\n<p>And finally the async method with <code>Thread.sleep(3000)</code> for illustration purposes.</p>\n<pre><code>@Async\npublic ListenableFuture&lt;String&gt; asyncLoadIcon(String entityName) {\n  try {\n    // some real code\n\n    Thread.sleep(3000);\n    return AsyncResult.forValue(entityname);\n\n  } catch (IOException | InterruptedException e) {\n    log.error(e);\n  }\n  return AsyncResult.forExecutionException(new RuntimeException(&quot;Error&quot;));\n}\n</code></pre>\n"},{"tags":["java","arraylist","static"],"comments":[{"owner":{"account_id":23783500,"reputation":5175,"user_id":17795888,"display_name":"Chaosfire"},"score":0,"creation_date":1667318814,"post_id":74278551,"comment_id":131137261,"body_markdown":"`readFile()` is instance method. Why exactly are you trying to invoke it as a static one?","body":"<code>readFile()</code> is instance method. Why exactly are you trying to invoke it as a static one?"},{"owner":{"account_id":1352170,"reputation":34246,"user_id":1291492,"accept_rate":100,"display_name":"ControlAltDel"},"score":0,"creation_date":1667318861,"post_id":74278551,"comment_id":131137278,"body_markdown":"So long as InputFileFactory,getInstance() works and returns an instance of a concrete subclass, it looks like `List&lt;Request&gt; requests = AbstractInputFile.readFile();` should be `List&lt;Request&gt; requests = fact.readFile();`","body":"So long as InputFileFactory,getInstance() works and returns an instance of a concrete subclass, it looks like <code>List&lt;Request&gt; requests = AbstractInputFile.readFile();</code> should be <code>List&lt;Request&gt; requests = fact.readFile();</code>"}],"answers":[{"tags":[],"owner":{"account_id":26798077,"reputation":16,"user_id":20390488,"display_name":"Emily Sub"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1667331150,"creation_date":1667331150,"answer_id":74280949,"question_id":74278551,"body_markdown":"First things first, AbstractInputFile.readFile() can&#39;t be called for 2 reasons:  readFile() in the AbstractInputFile class is abstract, and it is an instance method. \r\n\r\nFrom what you wrote here, you implement the readFile() method in the subclass, CSVInputFileImpl. Therefore, in this case, your readFile() calls should be based on THIS class, not AbstractInputFile. However, this is still classified as an instance method, meaning you need to first create an instance of CSVInputFileImpl before you can call readFile(). I would correct the code like this (I&#39;m making assumptions that the CSVInputFileImpl class is structured the same as AbstractInputFile, but make sure the file instance var is set):\r\n\r\n\r\n    CSVInputFileImpl csvInputFileImpl = new CSVInputFileImpl();\r\n    csvInputFileImpl.setFile(file);\r\n    List&lt;Request&gt; requests = csvInputFileImpl.readFile();\r\n    return requests;\r\n","title":"How to access value of an abstract method in a different class?","body":"<p>First things first, AbstractInputFile.readFile() can't be called for 2 reasons:  readFile() in the AbstractInputFile class is abstract, and it is an instance method.</p>\n<p>From what you wrote here, you implement the readFile() method in the subclass, CSVInputFileImpl. Therefore, in this case, your readFile() calls should be based on THIS class, not AbstractInputFile. However, this is still classified as an instance method, meaning you need to first create an instance of CSVInputFileImpl before you can call readFile(). I would correct the code like this (I'm making assumptions that the CSVInputFileImpl class is structured the same as AbstractInputFile, but make sure the file instance var is set):</p>\n<pre><code>CSVInputFileImpl csvInputFileImpl = new CSVInputFileImpl();\ncsvInputFileImpl.setFile(file);\nList&lt;Request&gt; requests = csvInputFileImpl.readFile();\nreturn requests;\n</code></pre>\n"}],"owner":{"account_id":21505789,"reputation":29,"user_id":15849197,"display_name":"jessa"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":150,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":74280949,"answer_count":1,"score":0,"last_activity_date":1667331150,"creation_date":1667318215,"question_id":74278551,"body_markdown":"`AbstractInputFile` is an abstract class and has the following code below:\r\n\r\n```\r\npublic abstract class AbstractInputFile {\r\n\r\n    static final public int MIN_BILLING_CYCLE = 1;\r\n    static final public int MAX_BILLING_CYCLE = 12;\r\n\r\n    private File file;\r\n\r\n    public AbstractInputFile() {\r\n\r\n    }\r\n\r\n    public abstract List&lt;Request&gt; readFile() throws IOException, BarsException;\r\n\r\n    public File getFile() {\r\n\r\n        return file;\r\n    }\r\n\r\n    public void setFile(File file) {\r\n        this.file = file;\r\n    }\r\n\r\n}\r\n```\r\n\r\n\r\n`CSVInputFileImpl` is a subclass of `AbstractInputFile`, thus inheriting the readFile() method. What it does is it reads the contents of a csv file using a buffered reader, stores it in an arraylist, and returns it.\r\n\r\n```\r\n    public List&lt;Request&gt; readFile() throws IOException, BarsException {\r\n        List&lt;Request&gt; requests = new ArrayList&lt;&gt;();\r\n        DateTimeFormatter formatter = DateTimeFormatter.ofPattern(&quot;MM/dd/yyyy&quot;);\r\n        \r\n        String line = &quot;&quot;;\r\n\r\n        //READ CSV FILE\r\n        try {\r\n            BufferedReader br = new BufferedReader(new FileReader(getFile()));\r\n            int row = 1;\r\n            int index = 0;\r\n\r\n            while ((line = br.readLine()) != null) {\r\n                String[] data = line.split(&quot;,&quot;, 3);\r\n\r\n                //Validate if billing cycle ranges 1-12\r\n                try {\r\n                    int billingCycle = Integer.parseInt(data[0]);\r\n\r\n                    if(billingCycle &lt;= MAX_BILLING_CYCLE &amp;&amp; billingCycle &gt;= MIN_BILLING_CYCLE) {\r\n                        request.setBillingCycle(billingCycle);\r\n\r\n                    } else {\r\n                        log.error(BILLING_CYCLE_NOT_ON_RANGE +  row);\r\n                        throw new BarsException(BILLING_CYCLE_NOT_ON_RANGE +  row);\r\n                    }\r\n\r\n                } catch (BarsException e) {\r\n                    log.error(INVALID_BILLING_CYCLE + row);\r\n                    throw new BarsException(INVALID_BILLING_CYCLE + row);\r\n                }\r\n\r\n\r\n                //Validate start date\r\n                try {\r\n                    LocalDate startDate = LocalDate.parse(data[1], formatter);\r\n                    request.setStartDate(startDate);\r\n\r\n                } catch (DateTimeParseException e) {\r\n                    log.error(INVALID_START_DATE_FORMAT + row);\r\n                    throw new BarsException(INVALID_START_DATE_FORMAT + row);\r\n                }\r\n\r\n\r\n                //Validate end date\r\n                try {\r\n                    LocalDate endDate = LocalDate.parse(data[2], formatter);\r\n                    request.setStartDate(endDate);\r\n\r\n                } catch (DateTimeParseException e) {\r\n                    log.error(INVALID_END_DATE_FORMAT + row);\r\n                    throw new BarsException(INVALID_END_DATE_FORMAT + row);\r\n                }\r\n\r\n                row++;\r\n\r\n\r\n                //Add the requests to array list created previously\r\n                requests.add(index,new Request(request.getBillingCycle(), request.getStartDate(), request.getEndDate()));\r\n                index++;\r\n\r\n           }\r\n\r\n        //Validate if file exists\r\n        } catch (FileNotFoundException e) {\r\n            throw new BarsException(NO_SUPPORTED_FILE);\r\n\r\n\r\n        } catch (IOException e) {\r\n            throw new IOException(PATH_DOES_NOT_EXIST);\r\n        }\r\n\r\n        return requests;\r\n    }\r\n```\r\nIn another public class `FileProcessor`, I am instructed to get the array list using `List&lt;Request&gt; requests = abstractInputFile.readFile();` but is unable to do so because I am getting the error `Non-static method &#39;readFile()&#39; cannot be referenced from a static context`.\r\n```\r\n    public List&lt;Request&gt; execute(File file) throws BarsException {\r\n\r\n        InputFileFactory fact = InputFileFactory.getInstance();\r\n\r\n        try {\r\n            fact.getInputFile(file);\r\n        } catch (BarsException e) {\r\n            throw new BarsException(NO_SUPPORTED_FILE);\r\n        }\r\n\r\n        List&lt;Request&gt; requests = AbstractInputFile.readFile();\r\n\r\n        return requests;\r\n\r\n    }\r\n```\r\nMy question is: How will I be able to retrieve the arraylist and return it in the `execute(file)` method? There might be a lot more errors in other areas of the code and logic but I&#39;d appreciate any help and suggestions.","title":"How to access value of an abstract method in a different class?","body":"<p><code>AbstractInputFile</code> is an abstract class and has the following code below:</p>\n<pre><code>public abstract class AbstractInputFile {\n\n    static final public int MIN_BILLING_CYCLE = 1;\n    static final public int MAX_BILLING_CYCLE = 12;\n\n    private File file;\n\n    public AbstractInputFile() {\n\n    }\n\n    public abstract List&lt;Request&gt; readFile() throws IOException, BarsException;\n\n    public File getFile() {\n\n        return file;\n    }\n\n    public void setFile(File file) {\n        this.file = file;\n    }\n\n}\n</code></pre>\n<p><code>CSVInputFileImpl</code> is a subclass of <code>AbstractInputFile</code>, thus inheriting the readFile() method. What it does is it reads the contents of a csv file using a buffered reader, stores it in an arraylist, and returns it.</p>\n<pre><code>    public List&lt;Request&gt; readFile() throws IOException, BarsException {\n        List&lt;Request&gt; requests = new ArrayList&lt;&gt;();\n        DateTimeFormatter formatter = DateTimeFormatter.ofPattern(&quot;MM/dd/yyyy&quot;);\n        \n        String line = &quot;&quot;;\n\n        //READ CSV FILE\n        try {\n            BufferedReader br = new BufferedReader(new FileReader(getFile()));\n            int row = 1;\n            int index = 0;\n\n            while ((line = br.readLine()) != null) {\n                String[] data = line.split(&quot;,&quot;, 3);\n\n                //Validate if billing cycle ranges 1-12\n                try {\n                    int billingCycle = Integer.parseInt(data[0]);\n\n                    if(billingCycle &lt;= MAX_BILLING_CYCLE &amp;&amp; billingCycle &gt;= MIN_BILLING_CYCLE) {\n                        request.setBillingCycle(billingCycle);\n\n                    } else {\n                        log.error(BILLING_CYCLE_NOT_ON_RANGE +  row);\n                        throw new BarsException(BILLING_CYCLE_NOT_ON_RANGE +  row);\n                    }\n\n                } catch (BarsException e) {\n                    log.error(INVALID_BILLING_CYCLE + row);\n                    throw new BarsException(INVALID_BILLING_CYCLE + row);\n                }\n\n\n                //Validate start date\n                try {\n                    LocalDate startDate = LocalDate.parse(data[1], formatter);\n                    request.setStartDate(startDate);\n\n                } catch (DateTimeParseException e) {\n                    log.error(INVALID_START_DATE_FORMAT + row);\n                    throw new BarsException(INVALID_START_DATE_FORMAT + row);\n                }\n\n\n                //Validate end date\n                try {\n                    LocalDate endDate = LocalDate.parse(data[2], formatter);\n                    request.setStartDate(endDate);\n\n                } catch (DateTimeParseException e) {\n                    log.error(INVALID_END_DATE_FORMAT + row);\n                    throw new BarsException(INVALID_END_DATE_FORMAT + row);\n                }\n\n                row++;\n\n\n                //Add the requests to array list created previously\n                requests.add(index,new Request(request.getBillingCycle(), request.getStartDate(), request.getEndDate()));\n                index++;\n\n           }\n\n        //Validate if file exists\n        } catch (FileNotFoundException e) {\n            throw new BarsException(NO_SUPPORTED_FILE);\n\n\n        } catch (IOException e) {\n            throw new IOException(PATH_DOES_NOT_EXIST);\n        }\n\n        return requests;\n    }\n</code></pre>\n<p>In another public class <code>FileProcessor</code>, I am instructed to get the array list using <code>List&lt;Request&gt; requests = abstractInputFile.readFile();</code> but is unable to do so because I am getting the error <code>Non-static method 'readFile()' cannot be referenced from a static context</code>.</p>\n<pre><code>    public List&lt;Request&gt; execute(File file) throws BarsException {\n\n        InputFileFactory fact = InputFileFactory.getInstance();\n\n        try {\n            fact.getInputFile(file);\n        } catch (BarsException e) {\n            throw new BarsException(NO_SUPPORTED_FILE);\n        }\n\n        List&lt;Request&gt; requests = AbstractInputFile.readFile();\n\n        return requests;\n\n    }\n</code></pre>\n<p>My question is: How will I be able to retrieve the arraylist and return it in the <code>execute(file)</code> method? There might be a lot more errors in other areas of the code and logic but I'd appreciate any help and suggestions.</p>\n"},{"tags":["java","minecraft","minecraft-forge"],"answers":[{"tags":[],"owner":{"account_id":26770511,"reputation":1,"user_id":20366969,"display_name":"Greenlight Shadow"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1667330636,"creation_date":1667330636,"answer_id":74280865,"question_id":74247127,"body_markdown":"Well, I didn&#39;t get an answer after searching this code, but I accidently found that golem is trying to replace bean with dropped ones. That technicaly solved my problem by half. `this.theWorld.func_147465_d(this.xx, this.yy, this.zz, ConfigBlocks.blockManaPod, 0, 3);`  This line is telling me about this, but it has no clue about specific aspect, random only","title":"Thaumcraft4 - Golem Core &quot;Harvest&quot; - Bug with magic beans","body":"<p>Well, I didn't get an answer after searching this code, but I accidently found that golem is trying to replace bean with dropped ones. That technicaly solved my problem by half. <code>this.theWorld.func_147465_d(this.xx, this.yy, this.zz, ConfigBlocks.blockManaPod, 0, 3);</code>  This line is telling me about this, but it has no clue about specific aspect, random only</p>\n"}],"owner":{"account_id":26770511,"reputation":1,"user_id":20366969,"display_name":"Greenlight Shadow"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":41,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"closed_date":1667687954,"accepted_answer_id":74280865,"answer_count":1,"score":-1,"last_activity_date":1667330636,"creation_date":1667062418,"question_id":74247127,"body_markdown":"I&#39;ve got a mana bean farm with different segments according of bean type each. There are golems with &quot;Harvest&quot; core and Ordo upgrade are harvesting them. They cannot reach the segments they are not bellongs. But sometimes I saw that in a neighbour segment is growing bean(s) with wrong aspect. In my case there are Vitium and Spiritus, but that is not important. Later I had an investigation of code and found something in it.\r\n\r\n`\r\n```\r\n void harvest() {\r\n        this.count = 200;\r\n        final int md = this.blockMd;\r\n        final FakePlayer fp = FakePlayerFactory.get((WorldServer)this.theWorld, new GameProfile((UUID)null, &quot;FakeThaumcraftGolem&quot;));\r\n        fp.func_70107_b(this.theGolem.field_70165_t, this.theGolem.field_70163_u, this.theGolem.field_70161_v);\r\n        if (CropUtils.clickableCrops.contains(this.block.func_149739_a() + md)) {\r\n            this.block.func_149727_a(this.theWorld, this.xx, this.yy, this.zz, (EntityPlayer)fp, 0, 0.0f, 0.0f, 0.0f);\r\n        }\r\n        else {\r\n            this.theWorld.func_147480_a(this.xx, this.yy, this.zz, true);\r\n            if (this.theGolem.getUpgradeAmount(4) &gt; 0) {\r\n                final ArrayList&lt;ItemStack&gt; items = new ArrayList&lt;ItemStack&gt;();\r\n                final ArrayList&lt;Entity&gt; drops = (ArrayList&lt;Entity&gt;)EntityUtils.getEntitiesInRange(this.theWorld, this.theGolem.field_70165_t, this.theGolem.field_70163_u, this.theGolem.field_70161_v, (Entity)this.theGolem, (Class)EntityItem.class, 6.0);\r\n                if (drops.size() &gt; 0) {\r\n                    for (final Entity e : drops) {\r\n                        if (e instanceof EntityItem) {\r\n                            if (e.field_70173_aa &lt; 2) {\r\n                                Vec3 v = Vec3.func_72443_a(e.field_70165_t - this.theGolem.field_70165_t, e.field_70163_u - this.theGolem.field_70163_u, e.field_70161_v - this.theGolem.field_70161_v);\r\n                                v = v.func_72432_b();\r\n                                e.field_70159_w = -v.field_72450_a / 4.0;\r\n                                e.field_70181_x = 0.075;\r\n                                e.field_70179_y = -v.field_72449_c / 4.0;\r\n                            }\r\n                            boolean done = false;\r\n                            final EntityItem item = (EntityItem)e;\r\n                            final ItemStack st = item.func_92059_d();\r\n                            if (st.func_77973_b() != null &amp;&amp; st.func_77973_b() == Items.field_151100_aR &amp;&amp; st.func_77960_j() == 3) {\r\n                                final int var5 = BlockDirectional.func_149895_l(this.blockMd);\r\n                                final int par2 = this.xx + Direction.field_71583_a[var5];\r\n                                final int par3 = this.zz + Direction.field_71581_b[var5];\r\n                                final Block var6 = this.theWorld.func_147439_a(par2, this.yy, par3);\r\n                                if (var6 == Blocks.field_150364_r &amp;&amp; BlockLog.func_150165_c(this.theWorld.func_72805_g(par2, this.yy, par3)) == 3) {\r\n                                    final ItemStack itemStack = st;\r\n                                    --itemStack.field_77994_a;\r\n                                    this.theWorld.func_147465_d(this.xx, this.yy, this.zz, Blocks.field_150375_by, BlockDirectional.func_149895_l(this.blockMd), 3);\r\n                                }\r\n                                done = true;\r\n                            }\r\n                            else if (st.func_77973_b() != null &amp;&amp; st.func_77973_b() == ConfigItems.itemManaBean) {\r\n                                if (this.block.func_149707_d(this.theWorld, this.xx, this.yy, this.zz, 0)) {\r\n                                    final ItemStack itemStack2 = st;\r\n                                    --itemStack2.field_77994_a;\r\n                                    if (!st.func_77973_b().func_77648_a(st.func_77946_l(), (EntityPlayer)fp, this.theWorld, this.xx, this.yy + 1, this.zz, 0, 0.5f, 0.5f, 0.5f)) {\r\n                                        this.theWorld.func_147465_d(this.xx, this.yy, this.zz, ConfigBlocks.blockManaPod, 0, 3);\r\n                                    }\r\n                                }\r\n                                done = true;\r\n                            }\r\n                            else {\r\n                                final int[] xm = { 0, 0, 1, 1, -1, 0, -1, -1, 1 };\r\n                                final int[] zm = { 0, 1, 0, 1, 0, -1, -1, 1, -1 };\r\n                                for (int count = 0; st != null &amp;&amp; st.field_77994_a &gt; 0 &amp;&amp; count &lt; 9; ++count) {\r\n                                    if (st.func_77973_b() != null &amp;&amp; (st.func_77973_b() instanceof IPlantable || st.func_77973_b() instanceof ItemSeedFood) &amp;&amp; st.func_77973_b().func_77648_a(st.func_77946_l(), (EntityPlayer)fp, this.theWorld, this.xx + xm[count], this.yy - 1, this.zz + zm[count], ForgeDirection.UP.ordinal(), 0.5f, 0.5f, 0.5f)) {\r\n                                        final ItemStack itemStack3 = st;\r\n                                        --itemStack3.field_77994_a;\r\n                                    }\r\n                                }\r\n                            }\r\n                            if (st.field_77994_a &lt;= 0) {\r\n                                item.func_70106_y();\r\n                            }\r\n                            else {\r\n                                item.func_92058_a(st);\r\n                            }\r\n                            if (done) {\r\n                                break;\r\n                            }\r\n                            continue;\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        fp.func_70106_y();\r\n        this.theGolem.startActionTimer();\r\n    }\r\n```\r\n`\r\n\r\nThe key is in first &#39;else&#39; is starts with condition &quot;this.theGolem.getUpgradeAmount(4) &gt; 0&quot;. I&#39;ve seen in the different file that upgrade with 4 ID is exactly an Ordo upgrade, but I&#39;m not familiar with Java and I can&#39;t see what&#39;s going on here and how to fix my problem with &quot;beans shuffle&quot;. Is anybody have any clue how to override this logic or where actually in code is caused a problem? Preventively thanks for any answer","title":"Thaumcraft4 - Golem Core &quot;Harvest&quot; - Bug with magic beans","body":"<p>I've got a mana bean farm with different segments according of bean type each. There are golems with &quot;Harvest&quot; core and Ordo upgrade are harvesting them. They cannot reach the segments they are not bellongs. But sometimes I saw that in a neighbour segment is growing bean(s) with wrong aspect. In my case there are Vitium and Spiritus, but that is not important. Later I had an investigation of code and found something in it.</p>\n<p>`</p>\n<pre><code> void harvest() {\n        this.count = 200;\n        final int md = this.blockMd;\n        final FakePlayer fp = FakePlayerFactory.get((WorldServer)this.theWorld, new GameProfile((UUID)null, &quot;FakeThaumcraftGolem&quot;));\n        fp.func_70107_b(this.theGolem.field_70165_t, this.theGolem.field_70163_u, this.theGolem.field_70161_v);\n        if (CropUtils.clickableCrops.contains(this.block.func_149739_a() + md)) {\n            this.block.func_149727_a(this.theWorld, this.xx, this.yy, this.zz, (EntityPlayer)fp, 0, 0.0f, 0.0f, 0.0f);\n        }\n        else {\n            this.theWorld.func_147480_a(this.xx, this.yy, this.zz, true);\n            if (this.theGolem.getUpgradeAmount(4) &gt; 0) {\n                final ArrayList&lt;ItemStack&gt; items = new ArrayList&lt;ItemStack&gt;();\n                final ArrayList&lt;Entity&gt; drops = (ArrayList&lt;Entity&gt;)EntityUtils.getEntitiesInRange(this.theWorld, this.theGolem.field_70165_t, this.theGolem.field_70163_u, this.theGolem.field_70161_v, (Entity)this.theGolem, (Class)EntityItem.class, 6.0);\n                if (drops.size() &gt; 0) {\n                    for (final Entity e : drops) {\n                        if (e instanceof EntityItem) {\n                            if (e.field_70173_aa &lt; 2) {\n                                Vec3 v = Vec3.func_72443_a(e.field_70165_t - this.theGolem.field_70165_t, e.field_70163_u - this.theGolem.field_70163_u, e.field_70161_v - this.theGolem.field_70161_v);\n                                v = v.func_72432_b();\n                                e.field_70159_w = -v.field_72450_a / 4.0;\n                                e.field_70181_x = 0.075;\n                                e.field_70179_y = -v.field_72449_c / 4.0;\n                            }\n                            boolean done = false;\n                            final EntityItem item = (EntityItem)e;\n                            final ItemStack st = item.func_92059_d();\n                            if (st.func_77973_b() != null &amp;&amp; st.func_77973_b() == Items.field_151100_aR &amp;&amp; st.func_77960_j() == 3) {\n                                final int var5 = BlockDirectional.func_149895_l(this.blockMd);\n                                final int par2 = this.xx + Direction.field_71583_a[var5];\n                                final int par3 = this.zz + Direction.field_71581_b[var5];\n                                final Block var6 = this.theWorld.func_147439_a(par2, this.yy, par3);\n                                if (var6 == Blocks.field_150364_r &amp;&amp; BlockLog.func_150165_c(this.theWorld.func_72805_g(par2, this.yy, par3)) == 3) {\n                                    final ItemStack itemStack = st;\n                                    --itemStack.field_77994_a;\n                                    this.theWorld.func_147465_d(this.xx, this.yy, this.zz, Blocks.field_150375_by, BlockDirectional.func_149895_l(this.blockMd), 3);\n                                }\n                                done = true;\n                            }\n                            else if (st.func_77973_b() != null &amp;&amp; st.func_77973_b() == ConfigItems.itemManaBean) {\n                                if (this.block.func_149707_d(this.theWorld, this.xx, this.yy, this.zz, 0)) {\n                                    final ItemStack itemStack2 = st;\n                                    --itemStack2.field_77994_a;\n                                    if (!st.func_77973_b().func_77648_a(st.func_77946_l(), (EntityPlayer)fp, this.theWorld, this.xx, this.yy + 1, this.zz, 0, 0.5f, 0.5f, 0.5f)) {\n                                        this.theWorld.func_147465_d(this.xx, this.yy, this.zz, ConfigBlocks.blockManaPod, 0, 3);\n                                    }\n                                }\n                                done = true;\n                            }\n                            else {\n                                final int[] xm = { 0, 0, 1, 1, -1, 0, -1, -1, 1 };\n                                final int[] zm = { 0, 1, 0, 1, 0, -1, -1, 1, -1 };\n                                for (int count = 0; st != null &amp;&amp; st.field_77994_a &gt; 0 &amp;&amp; count &lt; 9; ++count) {\n                                    if (st.func_77973_b() != null &amp;&amp; (st.func_77973_b() instanceof IPlantable || st.func_77973_b() instanceof ItemSeedFood) &amp;&amp; st.func_77973_b().func_77648_a(st.func_77946_l(), (EntityPlayer)fp, this.theWorld, this.xx + xm[count], this.yy - 1, this.zz + zm[count], ForgeDirection.UP.ordinal(), 0.5f, 0.5f, 0.5f)) {\n                                        final ItemStack itemStack3 = st;\n                                        --itemStack3.field_77994_a;\n                                    }\n                                }\n                            }\n                            if (st.field_77994_a &lt;= 0) {\n                                item.func_70106_y();\n                            }\n                            else {\n                                item.func_92058_a(st);\n                            }\n                            if (done) {\n                                break;\n                            }\n                            continue;\n                        }\n                    }\n                }\n            }\n        }\n        fp.func_70106_y();\n        this.theGolem.startActionTimer();\n    }\n</code></pre>\n<p>`</p>\n<p>The key is in first 'else' is starts with condition &quot;this.theGolem.getUpgradeAmount(4) &gt; 0&quot;. I've seen in the different file that upgrade with 4 ID is exactly an Ordo upgrade, but I'm not familiar with Java and I can't see what's going on here and how to fix my problem with &quot;beans shuffle&quot;. Is anybody have any clue how to override this logic or where actually in code is caused a problem? Preventively thanks for any answer</p>\n"},{"tags":["java","json","aws-sdk","amazon-dynamodb-streams"],"comments":[{"owner":{"account_id":3833354,"reputation":1068,"user_id":3178342,"accept_rate":68,"display_name":"Asanga Dewaguru"},"score":0,"creation_date":1466657721,"post_id":37655755,"comment_id":63410310,"body_markdown":"My real intention here was to send the data from Dynamodb to elastic search server when an item is inserted / updated /Deleted in Dynamodb . I&#39;ve managed to achieve that using the python lambda code template which is available on AWS user console (create new lambda function section). So without any concern about getting the pure json string out of the Dynamodb stream event, I&#39;ve been managed to send data directly from Dynamodb stream to Amazon Elastic search service using the above mentioned code template. Hope this helps for someone.","body":"My real intention here was to send the data from Dynamodb to elastic search server when an item is inserted / updated /Deleted in Dynamodb . I&#39;ve managed to achieve that using the python lambda code template which is available on AWS user console (create new lambda function section). So without any concern about getting the pure json string out of the Dynamodb stream event, I&#39;ve been managed to send data directly from Dynamodb stream to Amazon Elastic search service using the above mentioned code template. Hope this helps for someone."}],"answers":[{"tags":[],"owner":{"account_id":5537960,"reputation":31,"user_id":4395605,"display_name":"shailender arya"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1470636699,"creation_date":1470636699,"answer_id":38822308,"question_id":37655755,"body_markdown":"Found a way of doing it cleanly. Using InternalUtils from aws-java-sdk-dynamodb-1.11.15.jar\r\n\r\n\r\n\tcom.amazonaws.services.dynamodbv2.model.Record streamRecord = ((RecordAdapter) record).getInternalObject();\r\n\t\t\t\t// get order ready //\r\n\t\t\t\tOrderFinal order = Utils.mapO2Object(\r\n\t\t\t\t\t\tInternalUtils.toSimpleMapValue(streamRecord.getDynamodb().getNewImage().get(&quot;document&quot;).getM()), \r\n\t\t\t\t\t\tOrderFinal.class );","title":"How to get the pure Json string from DynamoDB stream new image?","body":"<p>Found a way of doing it cleanly. Using InternalUtils from aws-java-sdk-dynamodb-1.11.15.jar</p>\n\n<pre><code>com.amazonaws.services.dynamodbv2.model.Record streamRecord = ((RecordAdapter) record).getInternalObject();\n            // get order ready //\n            OrderFinal order = Utils.mapO2Object(\n                    InternalUtils.toSimpleMapValue(streamRecord.getDynamodb().getNewImage().get(\"document\").getM()), \n                    OrderFinal.class );\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1392562,"reputation":7482,"user_id":1323014,"accept_rate":81,"display_name":"Marckaraujo"},"down_vote_count":4,"up_vote_count":0,"is_accepted":false,"score":-4,"last_activity_date":1487795574,"creation_date":1487795574,"answer_id":42401695,"question_id":37655755,"body_markdown":"This library do the job: [dynamoDb-marshaler][1]\r\n\r\n    var unmarshalJson = require(&#39;dynamodb-marshaler&#39;).unmarshalJson;\r\n                    \r\n    console.log(&#39;jsonItem Record: %j&#39;, unmarshalJson(record.dynamodb.NewImage));\r\n\r\n\r\n  [1]: https://github.com/CascadeEnergy/dynamoDb-marshaler","title":"How to get the pure Json string from DynamoDB stream new image?","body":"<p>This library do the job: <a href=\"https://github.com/CascadeEnergy/dynamoDb-marshaler\" rel=\"nofollow noreferrer\">dynamoDb-marshaler</a></p>\n\n<pre><code>var unmarshalJson = require('dynamodb-marshaler').unmarshalJson;\n\nconsole.log('jsonItem Record: %j', unmarshalJson(record.dynamodb.NewImage));\n</code></pre>\n"},{"tags":[],"owner":{"account_id":7276753,"reputation":427,"user_id":5547938,"accept_rate":17,"display_name":"Himanshu Parmar"},"down_vote_count":0,"up_vote_count":9,"is_accepted":false,"score":9,"last_activity_date":1494514804,"creation_date":1494514494,"answer_id":43918963,"question_id":37655755,"body_markdown":"Below is the complete code for converting from Dynamo JSON to Standard JSON:\r\n\r\n    import com.amazonaws.services.dynamodbv2.document.Item;\r\n    import com.amazonaws.services.dynamodbv2.document.internal.InternalUtils;\r\n    import com.amazonaws.services.dynamodbv2.model.AttributeValue;\r\n    import com.amazonaws.services.lambda.runtime.Context;\r\n    import com.amazonaws.services.lambda.runtime.RequestHandler;\r\n    import com.amazonaws.services.lambda.runtime.events.DynamodbEvent;\r\n    import com.amazonaws.services.lambda.runtime.events.DynamodbEvent.DynamodbStreamRecord;\r\n    import com.google.gson.Gson;\r\n    \r\n    import java.util.ArrayList;\r\n    import java.util.List;\r\n    import java.util.Map;\r\n    \r\n    /**\r\n     * Main Lambda class to receive event stream, parse it to Survey\r\n     * and process them.\r\n     */\r\n    public class SurveyEventProcessor implements\r\n            RequestHandler&lt;DynamodbEvent, String&gt; {\r\n    \r\n        private static final String INSERT = &quot;INSERT&quot;;\r\n    \r\n        private static final String MODIFY = &quot;MODIFY&quot;;\r\n    \r\n        public String handleRequest(DynamodbEvent ddbEvent, Context context) {\r\n    \r\n            List&lt;Item&gt; listOfItem = new ArrayList&lt;&gt;();\r\n            List&lt;Map&lt;String, AttributeValue&gt;&gt; listOfMaps = null;\r\n            for (DynamodbStreamRecord record : ddbEvent.getRecords()) {\r\n    \r\n                if (INSERT.equals(record.getEventName()) || MODIFY.equals(record.getEventName())) {\r\n                    listOfMaps = new ArrayList&lt;Map&lt;String, AttributeValue&gt;&gt;();\r\n                    listOfMaps.add(record.getDynamodb().getNewImage());\r\n                    listOfItem = InternalUtils.toItemList(listOfMaps);\r\n                }\r\n    \r\n                System.out.println(listOfItem);\r\n                try {\r\n                   // String json = new ObjectMapper().writeValueAsString(listOfItem.get(0));\r\n                    Gson gson = new Gson();\r\n                    Item item = listOfItem.get(0);\r\n    \r\n                    String json = gson.toJson(item.asMap());\r\n                    System.out.println(&quot;JSON is &quot;);\r\n                    System.out.println(json);\r\n                }catch (Exception e){\r\n                    e.printStackTrace();\r\n                }\r\n            }\r\n    \r\n    \r\n            return &quot;Successfully processed &quot; + ddbEvent.getRecords().size() + &quot; records.&quot;;\r\n        }\r\n    } \r\n    \r\n       \r\n    \r\n     \r\n\r\n","title":"How to get the pure Json string from DynamoDB stream new image?","body":"<p>Below is the complete code for converting from Dynamo JSON to Standard JSON:</p>\n\n<pre><code>import com.amazonaws.services.dynamodbv2.document.Item;\nimport com.amazonaws.services.dynamodbv2.document.internal.InternalUtils;\nimport com.amazonaws.services.dynamodbv2.model.AttributeValue;\nimport com.amazonaws.services.lambda.runtime.Context;\nimport com.amazonaws.services.lambda.runtime.RequestHandler;\nimport com.amazonaws.services.lambda.runtime.events.DynamodbEvent;\nimport com.amazonaws.services.lambda.runtime.events.DynamodbEvent.DynamodbStreamRecord;\nimport com.google.gson.Gson;\n\nimport java.util.ArrayList;\nimport java.util.List;\nimport java.util.Map;\n\n/**\n * Main Lambda class to receive event stream, parse it to Survey\n * and process them.\n */\npublic class SurveyEventProcessor implements\n        RequestHandler&lt;DynamodbEvent, String&gt; {\n\n    private static final String INSERT = \"INSERT\";\n\n    private static final String MODIFY = \"MODIFY\";\n\n    public String handleRequest(DynamodbEvent ddbEvent, Context context) {\n\n        List&lt;Item&gt; listOfItem = new ArrayList&lt;&gt;();\n        List&lt;Map&lt;String, AttributeValue&gt;&gt; listOfMaps = null;\n        for (DynamodbStreamRecord record : ddbEvent.getRecords()) {\n\n            if (INSERT.equals(record.getEventName()) || MODIFY.equals(record.getEventName())) {\n                listOfMaps = new ArrayList&lt;Map&lt;String, AttributeValue&gt;&gt;();\n                listOfMaps.add(record.getDynamodb().getNewImage());\n                listOfItem = InternalUtils.toItemList(listOfMaps);\n            }\n\n            System.out.println(listOfItem);\n            try {\n               // String json = new ObjectMapper().writeValueAsString(listOfItem.get(0));\n                Gson gson = new Gson();\n                Item item = listOfItem.get(0);\n\n                String json = gson.toJson(item.asMap());\n                System.out.println(\"JSON is \");\n                System.out.println(json);\n            }catch (Exception e){\n                e.printStackTrace();\n            }\n        }\n\n\n        return \"Successfully processed \" + ddbEvent.getRecords().size() + \" records.\";\n    }\n} \n</code></pre>\n"},{"tags":[],"owner":{"account_id":2936879,"reputation":552,"user_id":2515587,"accept_rate":60,"display_name":"lost in binary"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1548256263,"creation_date":1496322414,"answer_id":44308410,"question_id":37655755,"body_markdown":"Just summarizing the answer of Himanshu Parmar:\r\n\r\n    Map&lt;String, AttributeValue&gt; newImage = record.getDynamodb().getNewImage();\r\n    List&lt;Map&lt;String, AttributeValue&gt;&gt; listOfMaps = new ArrayList&lt;Map&lt;String, AttributeValue&gt;&gt;();\r\n\tlistOfMaps.add(newImage);\r\n\tList&lt;Item&gt; itemList = ItemUtils.toItemList(listOfMaps);\r\n\tfor (Item item : itemList) {\r\n        String json = item.toJSON();\r\n\t}","title":"How to get the pure Json string from DynamoDB stream new image?","body":"<p>Just summarizing the answer of Himanshu Parmar:</p>\n\n<pre><code>Map&lt;String, AttributeValue&gt; newImage = record.getDynamodb().getNewImage();\nList&lt;Map&lt;String, AttributeValue&gt;&gt; listOfMaps = new ArrayList&lt;Map&lt;String, AttributeValue&gt;&gt;();\nlistOfMaps.add(newImage);\nList&lt;Item&gt; itemList = ItemUtils.toItemList(listOfMaps);\nfor (Item item : itemList) {\n    String json = item.toJSON();\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":10052349,"reputation":155,"user_id":7431757,"display_name":"Guru"},"down_vote_count":5,"up_vote_count":9,"is_accepted":false,"score":4,"last_activity_date":1534971720,"creation_date":1534971408,"answer_id":51975009,"question_id":37655755,"body_markdown":"In c# you can convert newImage to pure json by use of DynamoDB Document class\r\n\r\nusing Amazon.DynamoDBv2.DocumentModel;\r\n\r\n\r\nvar streamRecord = dynamoEvent.Records.First();\r\n\r\nvar  jsonResult=Document.FromAttributeMap(streamRecord.Dynamodb.NewImage).ToJson();\r\n\r\n-------\r\n\r\nand if you want to go further ahead to convert json to object you can use  Newtonsoft\r\n\r\nusing Newtonsoft.Json;\r\n\r\nTModel model = JsonConvert.DeserializeObject&lt;TModel&gt;(jsonResult);\r\n","title":"How to get the pure Json string from DynamoDB stream new image?","body":"<p>In c# you can convert newImage to pure json by use of DynamoDB Document class</p>\n\n<p>using Amazon.DynamoDBv2.DocumentModel;</p>\n\n<p>var streamRecord = dynamoEvent.Records.First();</p>\n\n<p>var  jsonResult=Document.FromAttributeMap(streamRecord.Dynamodb.NewImage).ToJson();</p>\n\n<hr>\n\n<p>and if you want to go further ahead to convert json to object you can use  Newtonsoft</p>\n\n<p>using Newtonsoft.Json;</p>\n\n<p>TModel model = JsonConvert.DeserializeObject(jsonResult);</p>\n"},{"tags":[],"owner":{"account_id":1546528,"reputation":2209,"user_id":1439964,"accept_rate":64,"display_name":"blacelle"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1627755026,"creation_date":1627755026,"answer_id":68604696,"question_id":37655755,"body_markdown":"For those stuck with a Map&lt;String, ?&gt; where objects are plain Map, but not Attributes value, you can do the following:\r\n\r\n    Map&lt;String, AttributeValue&gt; dynamoDbAttributes = \r\n        objectMapper.convertValue(dynamoDbMap, new TypeReference&lt;Map&lt;String, AttributeValue&gt;&gt;() {});\r\n\r\nand then convert this DynamoDB Map into a plain Map (equivalent to the json originally pushed into DynamoDb):\r\n\r\n    asMap = InternalUtils.toSimpleMapValue(dynamoDbAttributes);","title":"How to get the pure Json string from DynamoDB stream new image?","body":"<p>For those stuck with a Map&lt;String, ?&gt; where objects are plain Map, but not Attributes value, you can do the following:</p>\n<pre><code>Map&lt;String, AttributeValue&gt; dynamoDbAttributes = \n    objectMapper.convertValue(dynamoDbMap, new TypeReference&lt;Map&lt;String, AttributeValue&gt;&gt;() {});\n</code></pre>\n<p>and then convert this DynamoDB Map into a plain Map (equivalent to the json originally pushed into DynamoDb):</p>\n<pre><code>asMap = InternalUtils.toSimpleMapValue(dynamoDbAttributes);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":24514530,"reputation":11,"user_id":18428473,"display_name":"jthreja"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1646910896,"creation_date":1646910896,"answer_id":71423183,"question_id":37655755,"body_markdown":"For the ones facing issues with AttributeValue conversion refer the below code:\r\nhttps://github.com/aws/aws-lambda-java-libs/blob/master/aws-lambda-java-events-sdk-transformer/README.md\r\n\r\n    Map&lt;String, AttributeValue&gt; stringAttributeValueMap = DynamodbAttributeValueTransformer.toAttributeValueMapV1(dynamodb.getNewImage());\r\n\r\n                List stringAttributeValueMapList = new ArrayList();\r\n                stringAttributeValueMapList.add(stringAttributeValueMap);\r\n                List&lt;Item&gt; listOfItem = InternalUtils.toItemList(stringAttributeValueMapList);\r\n                Gson gson = new GsonBuilder().setPrettyPrinting().create();\r\n                String updatedJSON = gson.toJson(listOfItem.get(0).asMap());","title":"How to get the pure Json string from DynamoDB stream new image?","body":"<p>For the ones facing issues with AttributeValue conversion refer the below code:\n<a href=\"https://github.com/aws/aws-lambda-java-libs/blob/master/aws-lambda-java-events-sdk-transformer/README.md\" rel=\"nofollow noreferrer\">https://github.com/aws/aws-lambda-java-libs/blob/master/aws-lambda-java-events-sdk-transformer/README.md</a></p>\n<pre><code>Map&lt;String, AttributeValue&gt; stringAttributeValueMap = DynamodbAttributeValueTransformer.toAttributeValueMapV1(dynamodb.getNewImage());\n\n            List stringAttributeValueMapList = new ArrayList();\n            stringAttributeValueMapList.add(stringAttributeValueMap);\n            List&lt;Item&gt; listOfItem = InternalUtils.toItemList(stringAttributeValueMapList);\n            Gson gson = new GsonBuilder().setPrettyPrinting().create();\n            String updatedJSON = gson.toJson(listOfItem.get(0).asMap());\n</code></pre>\n"},{"tags":[],"owner":{"account_id":26798901,"reputation":1,"user_id":20391176,"display_name":"saiyam jain"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1667330111,"creation_date":1667330111,"answer_id":74280774,"question_id":37655755,"body_markdown":"Below is the Method which converts DynamoDB JSON to normal JSON\r\n\r\n\r\n\r\n&lt;!-- begin snippet: js hide: false console: true babel: false --&gt;\r\n\r\n&lt;!-- language: lang-html --&gt;\r\n\r\n/**\r\n * Converts DynamoDB JSON to normal JSON.\r\n *\r\n * @param map Input map of String to AttributeValue.\r\n * @return Returns an ObjectNode containing the normal JSON.\r\n */\r\n\r\n    public JsonObject toJsonObject(final Map&lt;String, AttributeValue&gt; map) {\r\n            final JsonNode result = mapToJsonObject(map);\r\n            final ObjectNode objectNode = (ObjectNode) result;\r\n            final ObjectMapper objectMapper = new ObjectMapper();\r\n            String recordObjectString;\r\n            try {\r\n                recordObjectString = objectMapper.writeValueAsString(objectNode);\r\n            } catch (JsonProcessingException e) {\r\n                throw new RuntimeException(e);\r\n            }\r\n            final JsonParser jsonParser = new JsonParser();\r\n            final JsonObject jsonObject = jsonParser.parse(recordObjectString)\r\n                                                    .getAsJsonObject();\r\n            return jsonObject;\r\n        }\r\n\r\n&lt;!-- end snippet --&gt;\r\n\r\nSo in your Case simple call below method like this\r\n\r\n&lt;!-- begin snippet: js hide: false console: true babel: false --&gt;\r\n\r\n&lt;!-- language: lang-html --&gt;\r\n\r\n// here record is of type DynamodbStreamRecord\r\n\r\n    toJsonObject(record.getDynamodb().getNewImage());\r\n\r\n&lt;!-- end snippet --&gt;\r\n\r\n\r\n\r\n\r\n\r\n","title":"How to get the pure Json string from DynamoDB stream new image?","body":"<p>Below is the Method which converts DynamoDB JSON to normal JSON</p>\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>/**\n * Converts DynamoDB JSON to normal JSON.\n *\n * @param map Input map of String to AttributeValue.\n * @return Returns an ObjectNode containing the normal JSON.\n */\n\npublic JsonObject toJsonObject(final Map&lt;String, AttributeValue&gt; map) {\n        final JsonNode result = mapToJsonObject(map);\n        final ObjectNode objectNode = (ObjectNode) result;\n        final ObjectMapper objectMapper = new ObjectMapper();\n        String recordObjectString;\n        try {\n            recordObjectString = objectMapper.writeValueAsString(objectNode);\n        } catch (JsonProcessingException e) {\n            throw new RuntimeException(e);\n        }\n        final JsonParser jsonParser = new JsonParser();\n        final JsonObject jsonObject = jsonParser.parse(recordObjectString)\n                                                .getAsJsonObject();\n        return jsonObject;\n    }</code></pre>\r\n</div>\r\n</div>\r\n</p>\n<p>So in your Case simple call below method like this</p>\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>// here record is of type DynamodbStreamRecord\n\ntoJsonObject(record.getDynamodb().getNewImage());</code></pre>\r\n</div>\r\n</div>\r\n</p>\n"}],"owner":{"account_id":3833354,"reputation":1068,"user_id":3178342,"accept_rate":68,"display_name":"Asanga Dewaguru"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":19864,"favorite_count":0,"down_vote_count":0,"up_vote_count":17,"answer_count":8,"score":17,"last_activity_date":1667330111,"creation_date":1465210975,"question_id":37655755,"body_markdown":"I&#39;ve a Dynamodb table with streaming enabled. Also I&#39;ve created a trigger for this table which calls an AWS Lambda function. Within this lambda function, I&#39;m trying read the new image (Dynamodb item after the modification) from the Dynamodb stream and trying to get the pure json string out of it. My Question is how can i get the pure json string of the DynamoDB item that&#39;s been sent over the stream? I&#39;m using the code snippet given below to get the new Image, but I&#39;ve no clue how to get the json string out of it. Appreciate your help.\r\n\r\n    public class LambdaFunctionHandler implements RequestHandler&lt;DynamodbEvent, Object&gt; {\r\n\r\n    @Override\r\n    public Object handleRequest(DynamodbEvent input, Context context) {\r\n        context.getLogger().log(&quot;Input: &quot; + input);\r\n\r\n        for (DynamodbStreamRecord record : input.getRecords()){\r\n        \t\r\n        \tcontext.getLogger().log(record.getEventID());\r\n        \tcontext.getLogger().log(record.getEventName());\r\n        \tcontext.getLogger().log(record.getDynamodb().toString());\r\n        \tMap&lt;String,AttributeValue&gt; currentRecord = record.getDynamodb().getNewImage();\r\n\r\n            //how to get the pure json string of the new image\r\n            //..............................................\r\n         }\r\n         return &quot;Successfully processed &quot; + input.getRecords().size() + &quot; records.&quot;;\r\n    }\r\n\r\n}","title":"How to get the pure Json string from DynamoDB stream new image?","body":"<p>I've a Dynamodb table with streaming enabled. Also I've created a trigger for this table which calls an AWS Lambda function. Within this lambda function, I'm trying read the new image (Dynamodb item after the modification) from the Dynamodb stream and trying to get the pure json string out of it. My Question is how can i get the pure json string of the DynamoDB item that's been sent over the stream? I'm using the code snippet given below to get the new Image, but I've no clue how to get the json string out of it. Appreciate your help.</p>\n\n<pre><code>public class LambdaFunctionHandler implements RequestHandler&lt;DynamodbEvent, Object&gt; {\n\n@Override\npublic Object handleRequest(DynamodbEvent input, Context context) {\n    context.getLogger().log(\"Input: \" + input);\n\n    for (DynamodbStreamRecord record : input.getRecords()){\n\n        context.getLogger().log(record.getEventID());\n        context.getLogger().log(record.getEventName());\n        context.getLogger().log(record.getDynamodb().toString());\n        Map&lt;String,AttributeValue&gt; currentRecord = record.getDynamodb().getNewImage();\n\n        //how to get the pure json string of the new image\n        //..............................................\n     }\n     return \"Successfully processed \" + input.getRecords().size() + \" records.\";\n}\n</code></pre>\n\n<p>}</p>\n"},{"tags":["java","authentication","jsp","servlets","jboss"],"answers":[{"tags":[],"owner":{"account_id":2146,"reputation":51871,"user_id":2959,"accept_rate":67,"display_name":"Steve McLeod"},"down_vote_count":0,"up_vote_count":12,"is_accepted":false,"score":12,"last_activity_date":1228490578,"creation_date":1228490578,"answer_id":344153,"question_id":344117,"body_markdown":"The answer is messy.\r\n\r\nFirst you need to find out what type request.getUserPrincipal() returns in your webapp.\r\n\r\n        System.out.println(&quot;type = &quot; + request.getUserPrincipal().getClass());\r\n\r\nLet&#39;s say that returns org.apache.catalina.realm.GenericPrincipal.\r\n\r\nThen cast the result of getUserPrincipal() to that type and use the methods it provides.\r\n\r\n        final Principal userPrincipal = request.getUserPrincipal();\r\n        GenericPrincipal genericPrincipal = (GenericPrincipal) userPrincipal;\r\n        final String[] roles = genericPrincipal.getRoles();\r\n\r\nI said it was going to be messy. It&#39;s not very portable either.\r\n\r\n","title":"How to get user roles in a JSP / Servlet","body":"<p>The answer is messy.</p>\n\n<p>First you need to find out what type request.getUserPrincipal() returns in your webapp.</p>\n\n<pre><code>    System.out.println(\"type = \" + request.getUserPrincipal().getClass());\n</code></pre>\n\n<p>Let's say that returns org.apache.catalina.realm.GenericPrincipal.</p>\n\n<p>Then cast the result of getUserPrincipal() to that type and use the methods it provides.</p>\n\n<pre><code>    final Principal userPrincipal = request.getUserPrincipal();\n    GenericPrincipal genericPrincipal = (GenericPrincipal) userPrincipal;\n    final String[] roles = genericPrincipal.getRoles();\n</code></pre>\n\n<p>I said it was going to be messy. It's not very portable either.</p>\n"},{"tags":[],"owner":{"account_id":9538,"reputation":18044,"user_id":2204759,"accept_rate":91,"display_name":"Josh"},"down_vote_count":2,"up_vote_count":9,"is_accepted":true,"score":7,"last_activity_date":1228491709,"creation_date":1228491709,"answer_id":344223,"question_id":344117,"body_markdown":"Read in all the possible roles, or hardcode a list. Then iterate over it running the isUserInRole and build a list of roles the user is in and then convert the list to an array.\r\n\r\n    String[] allRoles = {&quot;1&quot;,&quot;2&quot;,&quot;3&quot;};\r\n    HttpServletRequest request = ... (or from method argument)\r\n    List userRoles = new ArrayList(allRoles.length);\r\n    for(String role : allRoles) {\r\n     if(request.isUserInRole(role)) { \r\n      userRoles.add(role);\r\n     }\r\n    }\r\n    \r\n    // I forgot the exact syntax for list.toArray so this is prob wrong here\r\n    return userRoles.toArray(String[].class);\r\n\r\n","title":"How to get user roles in a JSP / Servlet","body":"<p>Read in all the possible roles, or hardcode a list. Then iterate over it running the isUserInRole and build a list of roles the user is in and then convert the list to an array.</p>\n\n<pre><code>String[] allRoles = {\"1\",\"2\",\"3\"};\nHttpServletRequest request = ... (or from method argument)\nList userRoles = new ArrayList(allRoles.length);\nfor(String role : allRoles) {\n if(request.isUserInRole(role)) { \n  userRoles.add(role);\n }\n}\n\n// I forgot the exact syntax for list.toArray so this is prob wrong here\nreturn userRoles.toArray(String[].class);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":8466707,"reputation":41,"user_id":6350660,"display_name":"SuperPiski"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1463570854,"creation_date":1463570854,"answer_id":37298248,"question_id":344117,"body_markdown":"In WebLogic you can do it with:\r\n \r\n    import weblogic.security.Security;\r\n    import weblogic.security.SubjectUtils;\r\n    ...\r\n    private List&lt;String&gt; getUserRoles()  {\r\n        return Arrays.asList(SubjectUtils.getPrincipalNames(Security.getCurrentSubject()).split(&quot;/&quot;));\r\n    }\r\n    \r\n\r\nNote that the first element on the list is the user name.","title":"How to get user roles in a JSP / Servlet","body":"<p>In WebLogic you can do it with:</p>\n\n<pre><code>import weblogic.security.Security;\nimport weblogic.security.SubjectUtils;\n...\nprivate List&lt;String&gt; getUserRoles()  {\n    return Arrays.asList(SubjectUtils.getPrincipalNames(Security.getCurrentSubject()).split(\"/\"));\n}\n</code></pre>\n\n<p>Note that the first element on the list is the user name.</p>\n"},{"tags":[],"owner":{"account_id":4952964,"reputation":1218,"user_id":3986374,"display_name":"Uux"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1527864519,"creation_date":1517224040,"answer_id":48499806,"question_id":344117,"body_markdown":"On JACC-compliant application servers -- in theory every Full Java EE Platform implementation -- the Java SE `Policy` can be interrogated for (almost) portable evaluation of any type of declarative security constraint specified by Servlet and EJB. I say *almost* because neither JACC nor the Javadoc spec of `Policy#getPermissions(ProtectionDomain)` actually requires that the implementation compute all permissions on the fly, presumably due to performance considerations, as well as to accommodate for providers whose rendering of authorization statements depends on additional context (remote address, value of a certain HTTP GET parameter, etc.). Nonetheless, `getPermissions` should normally be safe to use with the typical pre-installed JACC provider.\r\n\r\nThe following example demonstrates Servlet role assignment testing:\r\n\r\n    package com.example;\r\n    \r\n    import java.security.CodeSource;\r\n    import java.security.Permission;\r\n    import java.security.PermissionCollection;\r\n    import java.security.Policy;\r\n    import java.security.Principal;\r\n    import java.security.ProtectionDomain;\r\n    import java.security.cert.Certificate;\r\n    import java.util.Collections;\r\n    import java.util.Enumeration;\r\n    import java.util.HashSet;\r\n    import java.util.Set;\r\n    \r\n    import javax.security.auth.Subject;\r\n    import javax.security.jacc.PolicyContext;\r\n    import javax.security.jacc.PolicyContextException;\r\n    import javax.security.jacc.WebRoleRefPermission;\r\n    \r\n    public final class Util {\r\n    \r\n    \r\n        private static final Set&lt;String&gt; NO_ROLES = Collections.emptySet();\r\n        private static final Permission DUMMY_WEB_ROLE_REF_PERM = new WebRoleRefPermission(&quot;&quot;, &quot;dummy&quot;);\r\n    \r\n        /**\r\n         * Retrieves the declared Servlet security roles that have been mapped to the {@code Principal}s of\r\n         * the currently authenticated {@code Subject}, optionally limited to the scope of the Servlet\r\n         * referenced by {@code servletName}.\r\n         * \r\n         * @param servletName\r\n         *            The scope; {@code null} indicates Servlet-context-wide matching.\r\n         * @return the roles; empty {@code Set} iff:\r\n         *         &lt;ul&gt;\r\n         *         &lt;li&gt;the remote user is unauthenticated&lt;/li&gt;\r\n         *         &lt;li&gt;the remote user has not been associated with any roles declared within the search\r\n         *         scope&lt;/li&gt;\r\n         *         &lt;li&gt;the method has not been called within a Servlet invocation context&lt;/li&gt;\r\n         *         &lt;/ul&gt;\r\n         */\r\n        public static Set&lt;String&gt; getCallerWebRoles(String servletName) {\r\n            // get current subject\r\n            Subject subject = getSubject();\r\n            if (subject == null) {\r\n                // unauthenticated\r\n                return NO_ROLES;\r\n            }\r\n            Set&lt;Principal&gt; principals = subject.getPrincipals();\r\n            if (principals.isEmpty()) {\r\n                // unauthenticated?\r\n                return NO_ROLES;\r\n            }\r\n            // construct a domain for querying the policy; the code source shouldn&#39;t matter, as far as\r\n            // JACC permissions are concerned\r\n            ProtectionDomain domain = new ProtectionDomain(new CodeSource(null, (Certificate[]) null), null, null,\r\n                    principals.toArray(new Principal[principals.size()]));\r\n            // get all permissions accorded to those principals\r\n            PermissionCollection pc = Policy.getPolicy().getPermissions(domain);\r\n            // cause resolution of WebRoleRefPermissions, if any, in the collection, if still unresolved\r\n            pc.implies(DUMMY_WEB_ROLE_REF_PERM);\r\n            Enumeration&lt;Permission&gt; e = pc.elements();\r\n            if (!e.hasMoreElements()) {\r\n                // nothing granted, hence no roles\r\n                return NO_ROLES;\r\n            }\r\n            Set&lt;String&gt; roleNames = NO_ROLES;\r\n            // iterate over the collection and eliminate duplicates\r\n            while (e.hasMoreElements()) {\r\n                Permission p = e.nextElement();\r\n                // only interested in Servlet container security-role(-ref) permissions\r\n                if (p instanceof WebRoleRefPermission) {\r\n                    String candidateRoleName = p.getActions();\r\n                    // - ignore the &quot;any-authenticated-user&quot; role (only collect it if your\r\n                    // application has actually declared a role named &quot;**&quot;)\r\n                    // - also restrict to the scope of the Servlet identified by the servletName\r\n                    // argument, unless null\r\n                    if (!&quot;**&quot;.equals(candidateRoleName) &amp;&amp; ((servletName == null) || servletName.equals(p.getName()))\r\n                            &amp;&amp; ((roleNames == NO_ROLES) || !roleNames.contains(candidateRoleName))) {\r\n                        if (roleNames == NO_ROLES) {\r\n                            roleNames = new HashSet&lt;&gt;();\r\n                        }\r\n                        roleNames.add(candidateRoleName);\r\n                    }\r\n                }\r\n            }\r\n            return roleNames;\r\n        }\r\n    \r\n        private static Subject getSubject() {\r\n            return getFromJaccPolicyContext(&quot;javax.security.auth.Subject.container&quot;);\r\n        }\r\n    \r\n        @SuppressWarnings(&quot;unchecked&quot;)\r\n        private static &lt;T&gt; T getFromJaccPolicyContext(String key) {\r\n            try {\r\n                return (T) PolicyContext.getContext(key);\r\n            }\r\n            catch (PolicyContextException | IllegalArgumentException e) {\r\n                return null;\r\n            }\r\n        }\r\n    \r\n        private Util() {\r\n        }\r\n    \r\n    }\r\n\r\n-----\r\n\r\nReferences:\r\n\r\n- [JSR-115 / JACC specification](https://jcp.org/en/jsr/detail?id=115)\r\n- [Using JACC to determine a caller&#39;s roles](https://web.archive.org/web/20140620021252/https://blogs.oracle.com/monzillo/entry/using_jacc_to_determine_a)\r\n- [How Java EE translates web.xml constraints to Permission instances](http://arjan-tijms.omnifaces.org/2015/04/how-java-ee-translates-webxml.html)\r\n","title":"How to get user roles in a JSP / Servlet","body":"<p>On JACC-compliant application servers -- in theory every Full Java EE Platform implementation -- the Java SE <code>Policy</code> can be interrogated for (almost) portable evaluation of any type of declarative security constraint specified by Servlet and EJB. I say <em>almost</em> because neither JACC nor the Javadoc spec of <code>Policy#getPermissions(ProtectionDomain)</code> actually requires that the implementation compute all permissions on the fly, presumably due to performance considerations, as well as to accommodate for providers whose rendering of authorization statements depends on additional context (remote address, value of a certain HTTP GET parameter, etc.). Nonetheless, <code>getPermissions</code> should normally be safe to use with the typical pre-installed JACC provider.</p>\n\n<p>The following example demonstrates Servlet role assignment testing:</p>\n\n<pre><code>package com.example;\n\nimport java.security.CodeSource;\nimport java.security.Permission;\nimport java.security.PermissionCollection;\nimport java.security.Policy;\nimport java.security.Principal;\nimport java.security.ProtectionDomain;\nimport java.security.cert.Certificate;\nimport java.util.Collections;\nimport java.util.Enumeration;\nimport java.util.HashSet;\nimport java.util.Set;\n\nimport javax.security.auth.Subject;\nimport javax.security.jacc.PolicyContext;\nimport javax.security.jacc.PolicyContextException;\nimport javax.security.jacc.WebRoleRefPermission;\n\npublic final class Util {\n\n\n    private static final Set&lt;String&gt; NO_ROLES = Collections.emptySet();\n    private static final Permission DUMMY_WEB_ROLE_REF_PERM = new WebRoleRefPermission(\"\", \"dummy\");\n\n    /**\n     * Retrieves the declared Servlet security roles that have been mapped to the {@code Principal}s of\n     * the currently authenticated {@code Subject}, optionally limited to the scope of the Servlet\n     * referenced by {@code servletName}.\n     * \n     * @param servletName\n     *            The scope; {@code null} indicates Servlet-context-wide matching.\n     * @return the roles; empty {@code Set} iff:\n     *         &lt;ul&gt;\n     *         &lt;li&gt;the remote user is unauthenticated&lt;/li&gt;\n     *         &lt;li&gt;the remote user has not been associated with any roles declared within the search\n     *         scope&lt;/li&gt;\n     *         &lt;li&gt;the method has not been called within a Servlet invocation context&lt;/li&gt;\n     *         &lt;/ul&gt;\n     */\n    public static Set&lt;String&gt; getCallerWebRoles(String servletName) {\n        // get current subject\n        Subject subject = getSubject();\n        if (subject == null) {\n            // unauthenticated\n            return NO_ROLES;\n        }\n        Set&lt;Principal&gt; principals = subject.getPrincipals();\n        if (principals.isEmpty()) {\n            // unauthenticated?\n            return NO_ROLES;\n        }\n        // construct a domain for querying the policy; the code source shouldn't matter, as far as\n        // JACC permissions are concerned\n        ProtectionDomain domain = new ProtectionDomain(new CodeSource(null, (Certificate[]) null), null, null,\n                principals.toArray(new Principal[principals.size()]));\n        // get all permissions accorded to those principals\n        PermissionCollection pc = Policy.getPolicy().getPermissions(domain);\n        // cause resolution of WebRoleRefPermissions, if any, in the collection, if still unresolved\n        pc.implies(DUMMY_WEB_ROLE_REF_PERM);\n        Enumeration&lt;Permission&gt; e = pc.elements();\n        if (!e.hasMoreElements()) {\n            // nothing granted, hence no roles\n            return NO_ROLES;\n        }\n        Set&lt;String&gt; roleNames = NO_ROLES;\n        // iterate over the collection and eliminate duplicates\n        while (e.hasMoreElements()) {\n            Permission p = e.nextElement();\n            // only interested in Servlet container security-role(-ref) permissions\n            if (p instanceof WebRoleRefPermission) {\n                String candidateRoleName = p.getActions();\n                // - ignore the \"any-authenticated-user\" role (only collect it if your\n                // application has actually declared a role named \"**\")\n                // - also restrict to the scope of the Servlet identified by the servletName\n                // argument, unless null\n                if (!\"**\".equals(candidateRoleName) &amp;&amp; ((servletName == null) || servletName.equals(p.getName()))\n                        &amp;&amp; ((roleNames == NO_ROLES) || !roleNames.contains(candidateRoleName))) {\n                    if (roleNames == NO_ROLES) {\n                        roleNames = new HashSet&lt;&gt;();\n                    }\n                    roleNames.add(candidateRoleName);\n                }\n            }\n        }\n        return roleNames;\n    }\n\n    private static Subject getSubject() {\n        return getFromJaccPolicyContext(\"javax.security.auth.Subject.container\");\n    }\n\n    @SuppressWarnings(\"unchecked\")\n    private static &lt;T&gt; T getFromJaccPolicyContext(String key) {\n        try {\n            return (T) PolicyContext.getContext(key);\n        }\n        catch (PolicyContextException | IllegalArgumentException e) {\n            return null;\n        }\n    }\n\n    private Util() {\n    }\n\n}\n</code></pre>\n\n<hr>\n\n<p>References:</p>\n\n<ul>\n<li><a href=\"https://jcp.org/en/jsr/detail?id=115\" rel=\"nofollow noreferrer\">JSR-115 / JACC specification</a></li>\n<li><a href=\"https://web.archive.org/web/20140620021252/https://blogs.oracle.com/monzillo/entry/using_jacc_to_determine_a\" rel=\"nofollow noreferrer\">Using JACC to determine a caller's roles</a></li>\n<li><a href=\"http://arjan-tijms.omnifaces.org/2015/04/how-java-ee-translates-webxml.html\" rel=\"nofollow noreferrer\">How Java EE translates web.xml constraints to Permission instances</a></li>\n</ul>\n"},{"tags":[],"owner":{"account_id":13295192,"reputation":144,"user_id":9598447,"display_name":"Brian Akumah"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1667330110,"creation_date":1667330110,"answer_id":74280772,"question_id":344117,"body_markdown":"    import org.springframework.security.core.context.SecurityContextHolder;    \r\n        \r\n        \r\n    @GetMapping(&quot;/&quot;)\r\n    public String someEndpoint() {\r\n       System.out.println(SecurityContextHolder.getContext().getAuthentication().getAuthorities());\r\n    }","title":"How to get user roles in a JSP / Servlet","body":"<pre><code>import org.springframework.security.core.context.SecurityContextHolder;    \n    \n    \n@GetMapping(&quot;/&quot;)\npublic String someEndpoint() {\n   System.out.println(SecurityContextHolder.getContext().getAuthentication().getAuthorities());\n}\n</code></pre>\n"}],"owner":{"account_id":18862,"reputation":7557,"user_id":43671,"accept_rate":69,"display_name":"AlfaTeK"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":62672,"favorite_count":0,"down_vote_count":0,"up_vote_count":11,"accepted_answer_id":344223,"answer_count":5,"score":11,"last_activity_date":1667330110,"creation_date":1228490072,"question_id":344117,"body_markdown":"Is there any way to get a String[] with the roles a user has in the JSP or Servlet?\r\n\r\nI know about request.isUserInRole(&quot;role1&quot;) but I also want to know all the roles of the user.\r\n\r\nI searched the servlet source and it seems this is not possible, but this seems odd to me.\r\n\r\n\r\nSo... any ideas?","title":"How to get user roles in a JSP / Servlet","body":"<p>Is there any way to get a String[] with the roles a user has in the JSP or Servlet?</p>\n\n<p>I know about request.isUserInRole(\"role1\") but I also want to know all the roles of the user.</p>\n\n<p>I searched the servlet source and it seems this is not possible, but this seems odd to me.</p>\n\n<p>So... any ideas?</p>\n"},{"tags":["java","apache-camel","camel-ftp"],"comments":[{"owner":{"account_id":1832,"reputation":11572,"user_id":2517,"accept_rate":82,"display_name":"Jeremy Ross"},"score":1,"creation_date":1667314223,"post_id":74274171,"comment_id":131135637,"body_markdown":"Does this answer your question? [Apache Camel pollEnrich is not copying all the files](https://stackoverflow.com/questions/38103035/apache-camel-pollenrich-is-not-copying-all-the-files)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/38103035/apache-camel-pollenrich-is-not-copying-all-the-files\">Apache Camel pollEnrich is not copying all the files</a>"},{"owner":{"account_id":1832,"reputation":11572,"user_id":2517,"accept_rate":82,"display_name":"Jeremy Ross"},"score":0,"creation_date":1667314315,"post_id":74274171,"comment_id":131135665,"body_markdown":"completionFromBatchConsumer won&#39;t work because you&#39;re not using the file component as the consumer. The solution is to repeat the pollEnrich call until it returns a null body. See comment above with link to this question and answer.","body":"completionFromBatchConsumer won&#39;t work because you&#39;re not using the file component as the consumer. The solution is to repeat the pollEnrich call until it returns a null body. See comment above with link to this question and answer."}],"owner":{"account_id":16706565,"reputation":23,"user_id":12074940,"display_name":"Mahendranath"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":458,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1667329539,"creation_date":1667296661,"question_id":74274171,"body_markdown":"Is there any way or property in `pollEnrich` which helps us to consume all files at once? I can&#39;t use `from` because it&#39;s already being used for timer. 2 `from` are not allowed in a single route.\r\n\r\nHere is my code:\r\n\r\n\r\n```\r\nfrom(&quot;timer://foo&quot;)\r\n.pollEnrich(&quot;file:src&quot;)\r\n.aggregate(new ZipAggregationStrategy()).constant(false)\r\n.completionFromBatchConsumer().eagerCheckCompletion()\r\n.setHeader(Exchange.FILE_NAME, simple(&quot;file&quot;+&quot;.zip&quot;))\r\n.to(&quot;file:src/test/java/out&quot;);\r\n```\r\n\r\nI want the all files in src to be zipped in a folder. But `pollEnrich` is consuming file one at a time, which is causing problem.","title":"consume all files in Apache Camel pollEnrich","body":"<p>Is there any way or property in <code>pollEnrich</code> which helps us to consume all files at once? I can't use <code>from</code> because it's already being used for timer. 2 <code>from</code> are not allowed in a single route.</p>\n<p>Here is my code:</p>\n<pre><code>from(&quot;timer://foo&quot;)\n.pollEnrich(&quot;file:src&quot;)\n.aggregate(new ZipAggregationStrategy()).constant(false)\n.completionFromBatchConsumer().eagerCheckCompletion()\n.setHeader(Exchange.FILE_NAME, simple(&quot;file&quot;+&quot;.zip&quot;))\n.to(&quot;file:src/test/java/out&quot;);\n</code></pre>\n<p>I want the all files in src to be zipped in a folder. But <code>pollEnrich</code> is consuming file one at a time, which is causing problem.</p>\n"},{"tags":["java","android","android-overlay"],"comments":[{"owner":{"account_id":11873112,"reputation":1073,"user_id":8688810,"display_name":"Dan Baruch"},"score":0,"creation_date":1667326227,"post_id":74280026,"comment_id":131139875,"body_markdown":"How do you make it a system app? Are you working on your own Android source? There&#39;s no way to put your app as system unless you either root your device or building your own Android","body":"How do you make it a system app? Are you working on your own Android source? There&#39;s no way to put your app as system unless you either root your device or building your own Android"},{"owner":{"account_id":20605709,"reputation":97,"user_id":15126019,"display_name":"S. Ber Rosenberg"},"score":1,"creation_date":1667328828,"post_id":74280026,"comment_id":131140639,"body_markdown":"I have root access and its possible to build it with a system signature as well","body":"I have root access and its possible to build it with a system signature as well"}],"answers":[{"tags":[],"owner":{"account_id":11873112,"reputation":1073,"user_id":8688810,"display_name":"Dan Baruch"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1667329486,"creation_date":1667329486,"answer_id":74280670,"question_id":74280026,"body_markdown":"https://developer.android.com/reference/android/view/WindowManager.LayoutParams#TYPE_APPLICATION_OVERLAY\r\n\r\nYour TYPE_APPLICATION_OVERLAY requires \r\n\r\n&gt; Requires Manifest.permission.SYSTEM_ALERT_WINDOW permission.\r\n\r\nData can be found https://developer.android.com/reference/android/Manifest.permission#SYSTEM_ALERT_WINDOW\r\n\r\nDid you request that specific permission and did you grant it? (Even though if you are system app it&#39;s probably granted","title":"TYPE APPLICATION OVERLAY in android 11 permission denied","body":"<p><a href=\"https://developer.android.com/reference/android/view/WindowManager.LayoutParams#TYPE_APPLICATION_OVERLAY\" rel=\"nofollow noreferrer\">https://developer.android.com/reference/android/view/WindowManager.LayoutParams#TYPE_APPLICATION_OVERLAY</a></p>\n<p>Your TYPE_APPLICATION_OVERLAY requires</p>\n<blockquote>\n<p>Requires Manifest.permission.SYSTEM_ALERT_WINDOW permission.</p>\n</blockquote>\n<p>Data can be found <a href=\"https://developer.android.com/reference/android/Manifest.permission#SYSTEM_ALERT_WINDOW\" rel=\"nofollow noreferrer\">https://developer.android.com/reference/android/Manifest.permission#SYSTEM_ALERT_WINDOW</a></p>\n<p>Did you request that specific permission and did you grant it? (Even though if you are system app it's probably granted</p>\n"}],"owner":{"account_id":20605709,"reputation":97,"user_id":15126019,"display_name":"S. Ber Rosenberg"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":410,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":1,"score":0,"last_activity_date":1667329486,"creation_date":1667325804,"question_id":74280026,"body_markdown":"I tried to create a overlay app for android 11 and I see that I can&#39;t use the \r\n\r\n        &lt;uses-permission android:name=&quot;android.permission.TYPE_APPLICATION_OVERLAY&quot; /&gt;\r\nin android 11 only if this is a system app \r\nso I make it for a system app and I still not able to preform a system overlay \r\nI get this error\r\n\r\n         Caused by: android.view.WindowManager$BadTokenException: Unable to add window android.view.ViewRootImpl$W@10f390 -- permission denied for window type 2006\r\n","title":"TYPE APPLICATION OVERLAY in android 11 permission denied","body":"<p>I tried to create a overlay app for android 11 and I see that I can't use the</p>\n<pre><code>    &lt;uses-permission android:name=&quot;android.permission.TYPE_APPLICATION_OVERLAY&quot; /&gt;\n</code></pre>\n<p>in android 11 only if this is a system app\nso I make it for a system app and I still not able to preform a system overlay\nI get this error</p>\n<pre><code>     Caused by: android.view.WindowManager$BadTokenException: Unable to add window android.view.ViewRootImpl$W@10f390 -- permission denied for window type 2006\n</code></pre>\n"},{"tags":["java","spring-boot","annotations","spring-annotations"],"comments":[{"owner":{"account_id":401843,"reputation":89788,"user_id":768644,"display_name":"rzwitserloot"},"score":0,"creation_date":1662656625,"post_id":73652633,"comment_id":130062185,"body_markdown":"Some of those annotations are lombok, and lombok wouldn&#39;t support this. Not that any of the others do, either. There are plans to add meta annotation systems to lombok, though they won&#39;t be able to do anything other than what the lombok annotations do, and that feature is still in the &#39;design&#39; phase.","body":"Some of those annotations are lombok, and lombok wouldn&#39;t support this. Not that any of the others do, either. There are plans to add meta annotation systems to lombok, though they won&#39;t be able to do anything other than what the lombok annotations do, and that feature is still in the &#39;design&#39; phase."},{"owner":{"account_id":14501361,"reputation":103,"user_id":10474434,"display_name":"MuCh"},"score":0,"creation_date":1662661589,"post_id":73652633,"comment_id":130063700,"body_markdown":"@rzwitserloot Thanks. Yes, I also realized `@Data` and `@Slf4j` won&#39;t work. `@Configuration` works though.  However, I am more concerned about the `@PropertySource` and `@ConfigurationProperties` annotations as they are more annoying to type again and again. Any idea on these ? Especially getting the values out and setting it is something I am not able to do.","body":"@rzwitserloot Thanks. Yes, I also realized <code>@Data</code> and <code>@Slf4j</code> won&#39;t work. <code>@Configuration</code> works though.  However, I am more concerned about the <code>@PropertySource</code> and <code>@ConfigurationProperties</code> annotations as they are more annoying to type again and again. Any idea on these ? Especially getting the values out and setting it is something I am not able to do."},{"owner":{"account_id":320962,"reputation":31681,"user_id":639520,"accept_rate":72,"display_name":"E-Riz"},"score":0,"creation_date":1662669102,"post_id":73652633,"comment_id":130065821,"body_markdown":"Does this answer your question? [Is there something like Annotation Inheritance in java?](https://stackoverflow.com/questions/7761513/is-there-something-like-annotation-inheritance-in-java) (especially [this answer](https://stackoverflow.com/a/18585833/639520))","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/7761513/is-there-something-like-annotation-inheritance-in-java\">Is there something like Annotation Inheritance in java?</a> (especially <a href=\"https://stackoverflow.com/a/18585833/639520\">this answer</a>)"}],"answers":[{"tags":[],"owner":{"account_id":15539213,"reputation":346,"user_id":11210547,"display_name":"P&#233;ter Bar&#225;th"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1667329224,"creation_date":1667329224,"answer_id":74280626,"question_id":73652633,"body_markdown":"I faced similar problem and this solution works for me:\r\n\r\n**This is the case:**\r\n\r\n    package com.something.something;\r\n    \r\n    import org.springframework.context.annotation.Lazy;\r\n    import org.springframework.context.annotation.Primary;\r\n    import org.springframework.context.annotation.Scope;\r\n    import org.springframework.core.annotation.AliasFor;\r\n    import org.springframework.stereotype.Component;\r\n    import org.springframework.stereotype.Repository;\r\n    import org.springframework.stereotype.Service;\r\n    \r\n    import java.lang.annotation.ElementType;\r\n    import java.lang.annotation.Retention;\r\n    import java.lang.annotation.RetentionPolicy;\r\n    import java.lang.annotation.Target;\r\n    \r\n    import static org.springframework.beans.factory.config.BeanDefinition.SCOPE_PROTOTYPE;\r\n    \r\n    @Retention(RetentionPolicy.RUNTIME)\r\n    @Target(ElementType.TYPE)\r\n    @Primary\r\n    @Scope\r\n    @Component\r\n    @Lazy\r\n    public @interface CustomComponent{\r\n    \r\n            /**\r\n             * Setting the scope of the beans\r\n             * Means: @Scope(value = &quot;scope&quot;)\r\n             * @return\r\n             */\r\n            @AliasFor(\r\n                annotation = Scope.class,\r\n                attribute = &quot;value&quot;\r\n            )\r\n            String scope() default SCOPE_PROTOTYPE;\r\n    \r\n            /**\r\n             * Setting the name of the beans.\r\n             * I don&#39;t know why but if I renamed this, it didn&#39;t work. I could rename the others. \r\n             * Means: @Component(value = &quot;name&quot;)\r\n             * @return\r\n             */\r\n            @AliasFor(\r\n                annotation = Component.class,\r\n                attribute = &quot;value&quot;\r\n            )\r\n            String value() default &quot;&quot;;\r\n    \r\n            /**\r\n             * Setting the bean is lazy or not\r\n             * Means: @Lazy(value = true)\r\n             * @return\r\n             */\r\n            @AliasFor(\r\n                annotation = Lazy.class,\r\n                attribute = &quot;value&quot;\r\n            )\r\n            boolean isLazy() default false;\r\n    \r\n    \r\n    }\r\n\r\n\r\n**How to use:**\r\n\r\n    @CustomComponent( scope = &quot;SCOPE_SINGLETON&quot;, value = &quot;bean-name&quot;, isLazy = true);\r\n\r\nI hope you can transform it to your case. ","title":"Create a custom annotation to set a bunch of other annotation","body":"<p>I faced similar problem and this solution works for me:</p>\n<p><strong>This is the case:</strong></p>\n<pre><code>package com.something.something;\n\nimport org.springframework.context.annotation.Lazy;\nimport org.springframework.context.annotation.Primary;\nimport org.springframework.context.annotation.Scope;\nimport org.springframework.core.annotation.AliasFor;\nimport org.springframework.stereotype.Component;\nimport org.springframework.stereotype.Repository;\nimport org.springframework.stereotype.Service;\n\nimport java.lang.annotation.ElementType;\nimport java.lang.annotation.Retention;\nimport java.lang.annotation.RetentionPolicy;\nimport java.lang.annotation.Target;\n\nimport static org.springframework.beans.factory.config.BeanDefinition.SCOPE_PROTOTYPE;\n\n@Retention(RetentionPolicy.RUNTIME)\n@Target(ElementType.TYPE)\n@Primary\n@Scope\n@Component\n@Lazy\npublic @interface CustomComponent{\n\n        /**\n         * Setting the scope of the beans\n         * Means: @Scope(value = &quot;scope&quot;)\n         * @return\n         */\n        @AliasFor(\n            annotation = Scope.class,\n            attribute = &quot;value&quot;\n        )\n        String scope() default SCOPE_PROTOTYPE;\n\n        /**\n         * Setting the name of the beans.\n         * I don't know why but if I renamed this, it didn't work. I could rename the others. \n         * Means: @Component(value = &quot;name&quot;)\n         * @return\n         */\n        @AliasFor(\n            annotation = Component.class,\n            attribute = &quot;value&quot;\n        )\n        String value() default &quot;&quot;;\n\n        /**\n         * Setting the bean is lazy or not\n         * Means: @Lazy(value = true)\n         * @return\n         */\n        @AliasFor(\n            annotation = Lazy.class,\n            attribute = &quot;value&quot;\n        )\n        boolean isLazy() default false;\n\n\n}\n</code></pre>\n<p><strong>How to use:</strong></p>\n<pre><code>@CustomComponent( scope = &quot;SCOPE_SINGLETON&quot;, value = &quot;bean-name&quot;, isLazy = true);\n</code></pre>\n<p>I hope you can transform it to your case.</p>\n"}],"owner":{"account_id":14501361,"reputation":103,"user_id":10474434,"display_name":"MuCh"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1047,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1667329224,"creation_date":1662656106,"question_id":73652633,"body_markdown":"I have some repeated annotations in multiple classes. It looks like this -\r\n\r\n\r\n    @Configuration\r\n    @Data\r\n    @Slf4j\r\n    @ConfigurationProperties(prefix = &quot;hello&quot;)\r\n    @PropertySource(value = &quot;classpath:hello.yml&quot;, factory = YamlSourceFactory.class)`\r\n    \r\nI would like to combine and make a single Annotation class out of it.\r\nI want to write something like this -\r\n    \r\n    @Configuration\r\n    @Data\r\n    @Documented\r\n    @Target({ElementType.TYPE})\r\n    @Retention(RetentionPolicy.RUNTIME)\r\n    @PropertySource(value = this.value, factory = this.factory)\r\n    @ConfigurationProperties(prefix = this.key)\r\n    public @interface CustomAnnotation {\r\n        String name() default &quot;&quot;;\r\n        String[] key();\r\n        String[] value();\r\n        Class&lt;? extends PropertySourceFactory&gt; factory() default YamlSourceFactory.class;\r\n    }\r\n\r\nso that in all my other files I can write only one line and it is taken care of by my Custom Annotation -\r\n`@CustomAnnotation(key = &quot;hello&quot;, value = &quot;classpath:hello.yml&quot;)`\r\n\r\nIs this something possible to achieve ? ","title":"Create a custom annotation to set a bunch of other annotation","body":"<p>I have some repeated annotations in multiple classes. It looks like this -</p>\n<pre><code>@Configuration\n@Data\n@Slf4j\n@ConfigurationProperties(prefix = &quot;hello&quot;)\n@PropertySource(value = &quot;classpath:hello.yml&quot;, factory = YamlSourceFactory.class)`\n</code></pre>\n<p>I would like to combine and make a single Annotation class out of it.\nI want to write something like this -</p>\n<pre><code>@Configuration\n@Data\n@Documented\n@Target({ElementType.TYPE})\n@Retention(RetentionPolicy.RUNTIME)\n@PropertySource(value = this.value, factory = this.factory)\n@ConfigurationProperties(prefix = this.key)\npublic @interface CustomAnnotation {\n    String name() default &quot;&quot;;\n    String[] key();\n    String[] value();\n    Class&lt;? extends PropertySourceFactory&gt; factory() default YamlSourceFactory.class;\n}\n</code></pre>\n<p>so that in all my other files I can write only one line and it is taken care of by my Custom Annotation -\n<code>@CustomAnnotation(key = &quot;hello&quot;, value = &quot;classpath:hello.yml&quot;)</code></p>\n<p>Is this something possible to achieve ?</p>\n"},{"tags":["java","spring","intellij-idea","backend","updates"],"comments":[{"owner":{"account_id":5745621,"reputation":699,"user_id":4536931,"display_name":"Vincent C."},"score":2,"creation_date":1630933044,"post_id":69074895,"comment_id":122082033,"body_markdown":"What you are looking for is called &quot;hot swapping&quot;: https://docs.spring.io/spring-boot/docs/current/reference/html/using.html#using.running-your-application.hot-swapping, _and_ `LiveReload` in Spring Boot: https://docs.spring.io/spring-boot/docs/current/reference/html/using.html#using.devtools.livereload.","body":"What you are looking for is called &quot;hot swapping&quot;: <a href=\"https://docs.spring.io/spring-boot/docs/current/reference/html/using.html#using.running-your-application.hot-swapping\" rel=\"nofollow noreferrer\">docs.spring.io/spring-boot/docs/current/reference/html/&hellip;</a>, <i>and</i> <code>LiveReload</code> in Spring Boot: <a href=\"https://docs.spring.io/spring-boot/docs/current/reference/html/using.html#using.devtools.livereload\" rel=\"nofollow noreferrer\">docs.spring.io/spring-boot/docs/current/reference/html/&hellip;</a>."},{"owner":{"account_id":20633524,"reputation":11,"user_id":15147814,"display_name":"mdara"},"score":0,"creation_date":1630934340,"post_id":69074895,"comment_id":122082591,"body_markdown":"Perfect - Thank you","body":"Perfect - Thank you"}],"answers":[{"tags":[],"owner":{"account_id":8383036,"reputation":641,"user_id":6294316,"display_name":"mkkabi"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1667329145,"creation_date":1667329145,"answer_id":74280611,"question_id":69074895,"body_markdown":"If you&#39;re working in Inellij, adding spring-boot-devtools dependency is not enough. You also need to change the settings. Go to File-&gt;settings-&gt;Build, execution, deployment-&gt;Compiler and check Build project automatically\r\nthen go to Anvanced Settings and check Allow auto-make to start even if developed application is currently running","title":"Spring Boot - backend update without restarting the application","body":"<p>If you're working in Inellij, adding spring-boot-devtools dependency is not enough. You also need to change the settings. Go to File-&gt;settings-&gt;Build, execution, deployment-&gt;Compiler and check Build project automatically\nthen go to Anvanced Settings and check Allow auto-make to start even if developed application is currently running</p>\n"}],"owner":{"account_id":20633524,"reputation":11,"user_id":15147814,"display_name":"mdara"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":915,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1667329145,"creation_date":1630932857,"question_id":69074895,"body_markdown":"Is there a way to update changes (backend) automatically on the website without restarting the application? I&#39;m doing my first project in Spring Boot, some things are not working and to check if the problem was fixed I need to restart the application everytime I change the code.","title":"Spring Boot - backend update without restarting the application","body":"<p>Is there a way to update changes (backend) automatically on the website without restarting the application? I'm doing my first project in Spring Boot, some things are not working and to check if the problem was fixed I need to restart the application everytime I change the code.</p>\n"},{"tags":["java","spring","lambda","javac","method-reference"],"comments":[{"owner":{"account_id":195331,"reputation":275408,"user_id":438154,"accept_rate":98,"display_name":"Sotirios Delimanolis"},"score":1,"creation_date":1667328916,"post_id":74280524,"comment_id":131140657,"body_markdown":"What do you mean _is methodReference and they don&#39;t match_? Do you understand how method references are compiled? `FeignException errorStatus(String methodKey, Response response)` very much matches `ErrorDecoder`&#39;s single abstract method, `decode`.","body":"What do you mean <i>is methodReference and they don&#39;t match</i>? Do you understand how method references are compiled? <code>FeignException errorStatus(String methodKey, Response response)</code> very much matches <code>ErrorDecoder</code>&#39;s single abstract method, <code>decode</code>."}],"answers":[{"tags":[],"owner":{"account_id":5049794,"reputation":631,"user_id":4054720,"display_name":"Ben Borchard"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1667329115,"creation_date":1667329115,"answer_id":74280607,"question_id":74280524,"body_markdown":"`FeignException::errorStatus`\r\n\r\nis essentially equivalent to the lambda\r\n\r\n`(s, r) -&gt; FeignException.errorStatus(s, r)`\r\n\r\nWhere `s` is type `String` and `r` is type `Response`.  Because this lambda method matches the only method that needs to be implemented in the `ErrorDecoder` interface\r\n\r\n```\r\npublic Exception decode(String methodKey, Response response);\r\n```\r\n\r\nThe compiler is able to turn the statement `FeignException::errorStatus` into an object of an anonymous class that implements `ErrorDecoder` which can be returned successfully in the `streamHubErrorDecoder` method","title":"Return type mismatch and Java compiles","body":"<p><code>FeignException::errorStatus</code></p>\n<p>is essentially equivalent to the lambda</p>\n<p><code>(s, r) -&gt; FeignException.errorStatus(s, r)</code></p>\n<p>Where <code>s</code> is type <code>String</code> and <code>r</code> is type <code>Response</code>.  Because this lambda method matches the only method that needs to be implemented in the <code>ErrorDecoder</code> interface</p>\n<pre><code>public Exception decode(String methodKey, Response response);\n</code></pre>\n<p>The compiler is able to turn the statement <code>FeignException::errorStatus</code> into an object of an anonymous class that implements <code>ErrorDecoder</code> which can be returned successfully in the <code>streamHubErrorDecoder</code> method</p>\n"}],"owner":{"account_id":340612,"reputation":839,"user_id":670731,"accept_rate":46,"display_name":"Veeraraghavan N"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":87,"favorite_count":0,"down_vote_count":4,"up_vote_count":0,"answer_count":1,"score":-4,"last_activity_date":1667329115,"creation_date":1667328645,"question_id":74280524,"body_markdown":"I am curious as to how the below code compiles  \r\n   \r\n    @Bean(name = &quot;ErrorDecoder&quot;)\r\n    public ErrorDecoder streamHubErrorDecoder() {\r\n        return FeignException::errorStatus;\r\n    }\r\nThe type of ErrorDecoder https://github.com/OpenFeign/feign/blob/master/core/src/main/java/feign/codec/ErrorDecoder.java    \r\nFeignException is https://github.com/OpenFeign/feign/blob/master/core/src/main/java/feign/FeignException.java \r\n\r\nThe bean expect a type of ErrorDecoder and returnType is methodReference and they don&#39;t match . How is there no compile error?","title":"Return type mismatch and Java compiles","body":"<p>I am curious as to how the below code compiles</p>\n<pre><code>@Bean(name = &quot;ErrorDecoder&quot;)\npublic ErrorDecoder streamHubErrorDecoder() {\n    return FeignException::errorStatus;\n}\n</code></pre>\n<p>The type of ErrorDecoder <a href=\"https://github.com/OpenFeign/feign/blob/master/core/src/main/java/feign/codec/ErrorDecoder.java\" rel=\"nofollow noreferrer\">https://github.com/OpenFeign/feign/blob/master/core/src/main/java/feign/codec/ErrorDecoder.java</a><br />\nFeignException is <a href=\"https://github.com/OpenFeign/feign/blob/master/core/src/main/java/feign/FeignException.java\" rel=\"nofollow noreferrer\">https://github.com/OpenFeign/feign/blob/master/core/src/main/java/feign/FeignException.java</a></p>\n<p>The bean expect a type of ErrorDecoder and returnType is methodReference and they don't match . How is there no compile error?</p>\n"},{"tags":["java","eclipse"],"comments":[{"owner":{"account_id":1663234,"reputation":138406,"user_id":1531124,"accept_rate":96,"display_name":"GhostCat"},"score":2,"creation_date":1435567929,"post_id":31111263,"comment_id":50236713,"body_markdown":"Your question is not clear. Do you mean that A is actually some.package.A; and you want to use the fully qualified name within your source code? If so, I am sure that eclipse can be configured somewhere to do that; but probably it will then do that for all classes. You see, eclipse is trying to create syntactically correct java source code; and I don&#39;t see how you would want to use A and A.B without importing those class names upfront.","body":"Your question is not clear. Do you mean that A is actually some.package.A; and you want to use the fully qualified name within your source code? If so, I am sure that eclipse can be configured somewhere to do that; but probably it will then do that for all classes. You see, eclipse is trying to create syntactically correct java source code; and I don&#39;t see how you would want to use A and A.B without importing those class names upfront."},{"owner":{"account_id":106015,"reputation":13720,"user_id":282614,"accept_rate":85,"display_name":"Dacav"},"score":0,"creation_date":1435568269,"post_id":31111263,"comment_id":50236923,"body_markdown":"@J&#228;germeister, thanks for your comment. I fixed the question.","body":"@J&#228;germeister, thanks for your comment. I fixed the question."}],"answers":[{"tags":[],"owner":{"account_id":6189920,"reputation":2014,"user_id":4822884,"accept_rate":60,"display_name":"francesco foresti"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1435568436,"creation_date":1435568212,"answer_id":31111547,"question_id":31111263,"body_markdown":"try with\r\n\r\n    package my.pack;\r\n\r\n    public class A {\r\n\r\n      public static class B {}\r\n    }\r\n\r\n\r\nand then\r\n\r\n    package my.other.pack;\r\n\r\n    public class C {\r\n\r\n      my.pack.A.B myB = new my.pack.A.B();\r\n\r\n    }\r\n\r\nbut keep an eye on Eclipse, I think it will try to optimize your imports (I think you can disable it, but I don&#39;t know how).","title":"Eclipse, completion of inner classes","body":"<p>try with</p>\n\n<pre><code>package my.pack;\n\npublic class A {\n\n  public static class B {}\n}\n</code></pre>\n\n<p>and then</p>\n\n<pre><code>package my.other.pack;\n\npublic class C {\n\n  my.pack.A.B myB = new my.pack.A.B();\n\n}\n</code></pre>\n\n<p>but keep an eye on Eclipse, I think it will try to optimize your imports (I think you can disable it, but I don't know how).</p>\n"},{"tags":[],"owner":{"account_id":9098886,"reputation":499,"user_id":6771814,"display_name":"Hartmut Schorrig"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1667328886,"creation_date":1667328886,"answer_id":74280564,"question_id":31111263,"body_markdown":"I was also angry about that: I write in comment\r\n\r\n    see Outerclass.In\r\npress autocompletion, and then eclipse removes the &quot;Outerclass.&quot;, completes the inner class, make the link well \r\n\r\n    ... see {@link Innerclass}\r\n\r\nand adds automatically an import\r\n\r\n    import package.path.OuterClass.Innerclass;\r\n\r\nThat is against well code styles, as also many other people has written! I have to do the work, remove the dirty import, write again the &quot;Outerclass.&quot; manually without code completion. It is stupid, a helper will help me stupidly and I have do the work to remove. I have searched for a solution in eclipse and found https://bugs.eclipse.org/bugs/show_bug.cgi?id=305205 with last entry in 2018, nothing is done.\r\n\r\nThere may be a help: \r\nPreferences - Java - Editor - Content Assist: Uncheck the check box &quot;Add import instead of qualified names&quot;. But I guess, now, also on the autocompleted classes the import is not written automatically. But this may be a lesser disadvantage. The import is fast written manually by copying the &quot;packge.path&quot;, to to top, write &quot;import &quot; and paste. In the moment for me: get experience with. \r\n","title":"Eclipse, completion of inner classes","body":"<p>I was also angry about that: I write in comment</p>\n<pre><code>see Outerclass.In\n</code></pre>\n<p>press autocompletion, and then eclipse removes the &quot;Outerclass.&quot;, completes the inner class, make the link well</p>\n<pre><code>... see {@link Innerclass}\n</code></pre>\n<p>and adds automatically an import</p>\n<pre><code>import package.path.OuterClass.Innerclass;\n</code></pre>\n<p>That is against well code styles, as also many other people has written! I have to do the work, remove the dirty import, write again the &quot;Outerclass.&quot; manually without code completion. It is stupid, a helper will help me stupidly and I have do the work to remove. I have searched for a solution in eclipse and found <a href=\"https://bugs.eclipse.org/bugs/show_bug.cgi?id=305205\" rel=\"nofollow noreferrer\">https://bugs.eclipse.org/bugs/show_bug.cgi?id=305205</a> with last entry in 2018, nothing is done.</p>\n<p>There may be a help:\nPreferences - Java - Editor - Content Assist: Uncheck the check box &quot;Add import instead of qualified names&quot;. But I guess, now, also on the autocompleted classes the import is not written automatically. But this may be a lesser disadvantage. The import is fast written manually by copying the &quot;packge.path&quot;, to to top, write &quot;import &quot; and paste. In the moment for me: get experience with.</p>\n"}],"owner":{"account_id":106015,"reputation":13720,"user_id":282614,"accept_rate":85,"display_name":"Dacav"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":829,"favorite_count":0,"down_vote_count":1,"up_vote_count":3,"answer_count":2,"score":2,"last_activity_date":1667328886,"creation_date":1435567272,"question_id":31111263,"body_markdown":"I&#39;ve got a class `B` defined as inner class for `A`\r\n\r\n    package hello;\r\n\r\n    class A {\r\n        static class B {\r\n           // ...\r\n        }\r\n        // ...\r\n    }\r\n\r\nI&#39;m editing a third class `C`, and I need to declare a `A.B` object:\r\n\r\n    A.B something = new A.B(...);\r\n\r\nIf I use Eclipse&#39;s code completion, and I let Eclipse infer the type of the expression, I get something like this:\r\n\r\n    import hello.A;\r\n    import hello.A.B;\r\n    // ...\r\n    class C {\r\n        // ...\r\n        void foo() {\r\n            B something = new A.B(...);\r\n        }\r\n    }\r\n\r\nIs there a way to avoid this behavior and have eclipse using `A.B` instead of importing it?\r\n\r\nWhat I would like is this:\r\n\r\n    import hello.A;\r\n\r\n    class C {\r\n        void foo() {\r\n            A.B something = new A.B(...);\r\n        }\r\n    }","title":"Eclipse, completion of inner classes","body":"<p>I've got a class <code>B</code> defined as inner class for <code>A</code></p>\n\n<pre><code>package hello;\n\nclass A {\n    static class B {\n       // ...\n    }\n    // ...\n}\n</code></pre>\n\n<p>I'm editing a third class <code>C</code>, and I need to declare a <code>A.B</code> object:</p>\n\n<pre><code>A.B something = new A.B(...);\n</code></pre>\n\n<p>If I use Eclipse's code completion, and I let Eclipse infer the type of the expression, I get something like this:</p>\n\n<pre><code>import hello.A;\nimport hello.A.B;\n// ...\nclass C {\n    // ...\n    void foo() {\n        B something = new A.B(...);\n    }\n}\n</code></pre>\n\n<p>Is there a way to avoid this behavior and have eclipse using <code>A.B</code> instead of importing it?</p>\n\n<p>What I would like is this:</p>\n\n<pre><code>import hello.A;\n\nclass C {\n    void foo() {\n        A.B something = new A.B(...);\n    }\n}\n</code></pre>\n"},{"tags":["java","postgresql","spring-boot","hibernate","jpa"],"comments":[{"owner":{"account_id":4470050,"reputation":68258,"user_id":3636601,"accept_rate":75,"display_name":"Jens"},"score":3,"creation_date":1667328854,"post_id":74280497,"comment_id":131140646,"body_markdown":"`@OneToMany(mappedBy = &quot;address&quot;)` must be `@OneToMany(mappedBy = &quot;customer&quot;)`. You referenced the property in the Fk class","body":"<code>@OneToMany(mappedBy = &quot;address&quot;)</code> must be <code>@OneToMany(mappedBy = &quot;customer&quot;)</code>. You referenced the property in the Fk class"},{"owner":{"account_id":18044315,"reputation":1227,"user_id":13115701,"display_name":"Paul Marcelin Bejan"},"score":1,"creation_date":1667334386,"post_id":74280497,"comment_id":131142233,"body_markdown":"Guide on how to map One To Many (Vlad Mihalcea is a Java Champion and one of the top Hibernate ORM committers): https://vladmihalcea.com/the-best-way-to-map-a-onetomany-association-with-jpa-and-hibernate/","body":"Guide on how to map One To Many (Vlad Mihalcea is a Java Champion and one of the top Hibernate ORM committers): <a href=\"https://vladmihalcea.com/the-best-way-to-map-a-onetomany-association-with-jpa-and-hibernate/\" rel=\"nofollow noreferrer\">vladmihalcea.com/&hellip;</a>"}],"owner":{"account_id":14556289,"reputation":97,"user_id":10513727,"display_name":"devCodePro"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":20,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1667328547,"creation_date":1667328547,"question_id":74280497,"body_markdown":"Firstly, I have gone through multiple links to fix the problem, but still couldn&#39;t.\r\nI have 3 classes: Customer, Address and Subscription\r\nA customer can have multiple addresses.\r\nA customer can have multiple subscriptions.\r\n\r\n```\r\npackage com.ms.example.model;\r\n\r\nimport lombok.*;\r\n\r\nimport javax.persistence.*;\r\nimport java.time.*;\r\nimport java.util.*;\r\n\r\n@Getter\r\n@Setter\r\n@NoArgsConstructor\r\n@Entity\r\n@Table(name = &quot;customer&quot;)\r\npublic class Customer {\r\n    @Id\r\n    @Column(name = &quot;customer_id&quot;)\r\n    private String customerId;\r\n    @Column(name = &quot;first_name&quot;)\r\n    private String firstName;\r\n    @Column(name = &quot;last_name&quot;)\r\n    private String lastName;\r\n    @Column(name = &quot;email_id&quot;)\r\n    private String emailId;\r\n    @Column(name = &quot;phone_number&quot;)\r\n    private Long phoneNumber;\r\n    @Column(name = &quot;creation_date&quot;)\r\n    private LocalDate creationDate;\r\n    @OneToMany(mappedBy = &quot;address&quot;)\r\n    private List&lt;Address&gt; addresses;\r\n    @OneToMany(mappedBy = &quot;subscription&quot;)\r\n    private List&lt;Subscription&gt; subscriptions;\r\n\r\n\r\n}\r\npackage com.ms.example.model;\r\n\r\nimport lombok.*;\r\n\r\nimport javax.persistence.*;\r\nimport java.time.*;\r\n\r\n@Getter\r\n@Setter\r\n@NoArgsConstructor\r\n@Entity\r\n@Table(name = &quot;address&quot;)\r\npublic class Address {\r\n    @Id\r\n    @Column(name = &quot;address_id&quot;)\r\n    private String addressId;\r\n    @Column(name = &quot;address1&quot;)\r\n    private String address1;\r\n    @Column(name = &quot;address2&quot;)\r\n    private String address2;\r\n    @Column(name = &quot;city&quot;)\r\n    private String city;\r\n    @Column(name = &quot;state&quot;)\r\n    private String state;\r\n    @Column(name = &quot;postal_code&quot;)\r\n    private String postalCode;\r\n    @Column(name = &quot;last_update_date&quot;)\r\n    private LocalDate lastUpdateDate;\r\n    @ManyToOne\r\n    @JoinColumn(name = &quot;customer_id&quot;)\r\n    private Customer customer;\r\n\r\n}\r\n\r\npackage com.ms.example.model;\r\n\r\nimport lombok.*;\r\n\r\nimport javax.persistence.*;\r\nimport java.math.*;\r\nimport java.time.*;\r\n\r\n@Getter\r\n@Setter\r\n@NoArgsConstructor\r\n@Entity\r\n@Table(name = &quot;subscription&quot;)\r\npublic class Subscription {\r\n    @Id\r\n    @Column(name = &quot;subscription_id&quot;)\r\n    private String subscriptionId;\r\n    @Column(name = &quot;subscription_on_date&quot;)\r\n    private LocalDate subscriptionOnDate;\r\n    @Column(name = &quot;subscription_off_date&quot;)\r\n    private LocalDate subscriptionOffDate;\r\n    @Column(name = &quot;balance_pending&quot;)\r\n    private BigDecimal balancePending;\r\n    @ManyToOne\r\n    @JoinColumn(name = &quot;customer_id&quot;)\r\n    private Customer customer;\r\n}\r\n\r\n\r\n```\r\n\r\n\r\n\r\n\r\n\r\nWhile running I am getting this error:\r\n\r\nCan someone please help what am I missing or doing wrong?\r\n\r\n\r\n\r\n\r\n    Caused by: org.hibernate.AnnotationException: mappedBy reference an unknown target entity property: com.ms.example.customerdataservice.model.Address.address in com.ms.example.customerdataservice.model.Customer.addresses\r\n\tat org.hibernate.cfg.annotations.CollectionBinder.bindStarToManySecondPass(CollectionBinder.java:875) ~[hibernate-core-5.6.12.Final.jar:5.6.12.Final]\r\n\tat org.hibernate.cfg.annotations.CollectionBinder$1.secondPass(CollectionBinder.java:826) ~[hibernate-core-5.6.12.Final.jar:5.6.12.Final]\r\n\tat org.hibernate.cfg.CollectionSecondPass.doSecondPass(CollectionSecondPass.java:54) ~[hibernate-core-5.6.12.Final.jar:5.6.12.Final]\r\n\tat org.hibernate.boot.internal.InFlightMetadataCollectorImpl.processSecondPasses(InFlightMetadataCollectorImpl.java:1653) ~[hibernate-core-5.6.12.Final.jar:5.6.12.Final]\r\n\tat org.hibernate.boot.internal.InFlightMetadataCollectorImpl.processSecondPasses(InFlightMetadataCollectorImpl.java:1629) ~[hibernate-core-5.6.12.Final.jar:5.6.12.Final]\r\n\tat org.hibernate.boot.model.process.spi.MetadataBuildingProcess.complete(MetadataBuildingProcess.java:295) ~[hibernate-core-5.6.12.Final.jar:5.6.12.Final]\r\n\tat org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.metadata(EntityManagerFactoryBuilderImpl.java:1460) ~[hibernate-core-5.6.12.Final.jar:5.6.12.Final]\r\n\tat org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1494) ~[hibernate-core-5.6.12.Final.jar:5.6.12.Final]\r\n\tat org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:58) ~[spring-orm-5.3.23.jar:5.3.23]\r\n\tat org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:365) ~[spring-orm-5.3.23.jar:5.3.23]\r\n\tat org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:409) ~[spring-orm-5.3.23.jar:5.3.23]\r\n\tat org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:396) ~[spring-orm-5.3.23.jar:5.3.23]\r\n\tat org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:341) ~[spring-orm-5.3.23.jar:5.3.23]\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1863) ~[spring-beans-5.3.23.jar:5.3.23]\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1800) ~[spring-beans-5.3.23.jar:5.3.23]\r\n\t... 21 common frames omitted","title":"mappedBy reference an unknown target entity property: com.ms.example.model.Address.address in com.ms.example.model.Customer.addresses","body":"<p>Firstly, I have gone through multiple links to fix the problem, but still couldn't.\nI have 3 classes: Customer, Address and Subscription\nA customer can have multiple addresses.\nA customer can have multiple subscriptions.</p>\n<pre><code>package com.ms.example.model;\n\nimport lombok.*;\n\nimport javax.persistence.*;\nimport java.time.*;\nimport java.util.*;\n\n@Getter\n@Setter\n@NoArgsConstructor\n@Entity\n@Table(name = &quot;customer&quot;)\npublic class Customer {\n    @Id\n    @Column(name = &quot;customer_id&quot;)\n    private String customerId;\n    @Column(name = &quot;first_name&quot;)\n    private String firstName;\n    @Column(name = &quot;last_name&quot;)\n    private String lastName;\n    @Column(name = &quot;email_id&quot;)\n    private String emailId;\n    @Column(name = &quot;phone_number&quot;)\n    private Long phoneNumber;\n    @Column(name = &quot;creation_date&quot;)\n    private LocalDate creationDate;\n    @OneToMany(mappedBy = &quot;address&quot;)\n    private List&lt;Address&gt; addresses;\n    @OneToMany(mappedBy = &quot;subscription&quot;)\n    private List&lt;Subscription&gt; subscriptions;\n\n\n}\npackage com.ms.example.model;\n\nimport lombok.*;\n\nimport javax.persistence.*;\nimport java.time.*;\n\n@Getter\n@Setter\n@NoArgsConstructor\n@Entity\n@Table(name = &quot;address&quot;)\npublic class Address {\n    @Id\n    @Column(name = &quot;address_id&quot;)\n    private String addressId;\n    @Column(name = &quot;address1&quot;)\n    private String address1;\n    @Column(name = &quot;address2&quot;)\n    private String address2;\n    @Column(name = &quot;city&quot;)\n    private String city;\n    @Column(name = &quot;state&quot;)\n    private String state;\n    @Column(name = &quot;postal_code&quot;)\n    private String postalCode;\n    @Column(name = &quot;last_update_date&quot;)\n    private LocalDate lastUpdateDate;\n    @ManyToOne\n    @JoinColumn(name = &quot;customer_id&quot;)\n    private Customer customer;\n\n}\n\npackage com.ms.example.model;\n\nimport lombok.*;\n\nimport javax.persistence.*;\nimport java.math.*;\nimport java.time.*;\n\n@Getter\n@Setter\n@NoArgsConstructor\n@Entity\n@Table(name = &quot;subscription&quot;)\npublic class Subscription {\n    @Id\n    @Column(name = &quot;subscription_id&quot;)\n    private String subscriptionId;\n    @Column(name = &quot;subscription_on_date&quot;)\n    private LocalDate subscriptionOnDate;\n    @Column(name = &quot;subscription_off_date&quot;)\n    private LocalDate subscriptionOffDate;\n    @Column(name = &quot;balance_pending&quot;)\n    private BigDecimal balancePending;\n    @ManyToOne\n    @JoinColumn(name = &quot;customer_id&quot;)\n    private Customer customer;\n}\n\n\n</code></pre>\n<p>While running I am getting this error:</p>\n<p>Can someone please help what am I missing or doing wrong?</p>\n<pre><code>Caused by: org.hibernate.AnnotationException: mappedBy reference an unknown target entity property: com.ms.example.customerdataservice.model.Address.address in com.ms.example.customerdataservice.model.Customer.addresses\nat org.hibernate.cfg.annotations.CollectionBinder.bindStarToManySecondPass(CollectionBinder.java:875) ~[hibernate-core-5.6.12.Final.jar:5.6.12.Final]\nat org.hibernate.cfg.annotations.CollectionBinder$1.secondPass(CollectionBinder.java:826) ~[hibernate-core-5.6.12.Final.jar:5.6.12.Final]\nat org.hibernate.cfg.CollectionSecondPass.doSecondPass(CollectionSecondPass.java:54) ~[hibernate-core-5.6.12.Final.jar:5.6.12.Final]\nat org.hibernate.boot.internal.InFlightMetadataCollectorImpl.processSecondPasses(InFlightMetadataCollectorImpl.java:1653) ~[hibernate-core-5.6.12.Final.jar:5.6.12.Final]\nat org.hibernate.boot.internal.InFlightMetadataCollectorImpl.processSecondPasses(InFlightMetadataCollectorImpl.java:1629) ~[hibernate-core-5.6.12.Final.jar:5.6.12.Final]\nat org.hibernate.boot.model.process.spi.MetadataBuildingProcess.complete(MetadataBuildingProcess.java:295) ~[hibernate-core-5.6.12.Final.jar:5.6.12.Final]\nat org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.metadata(EntityManagerFactoryBuilderImpl.java:1460) ~[hibernate-core-5.6.12.Final.jar:5.6.12.Final]\nat org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1494) ~[hibernate-core-5.6.12.Final.jar:5.6.12.Final]\nat org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:58) ~[spring-orm-5.3.23.jar:5.3.23]\nat org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:365) ~[spring-orm-5.3.23.jar:5.3.23]\nat org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:409) ~[spring-orm-5.3.23.jar:5.3.23]\nat org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:396) ~[spring-orm-5.3.23.jar:5.3.23]\nat org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:341) ~[spring-orm-5.3.23.jar:5.3.23]\nat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1863) ~[spring-beans-5.3.23.jar:5.3.23]\nat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1800) ~[spring-beans-5.3.23.jar:5.3.23]\n... 21 common frames omitted\n</code></pre>\n"},{"tags":["java","visual-studio-code"],"comments":[{"owner":{"account_id":2139538,"reputation":42501,"user_id":1898563,"accept_rate":78,"display_name":"Michael"},"score":0,"creation_date":1595454197,"post_id":63043585,"comment_id":111484233,"body_markdown":"You would start by getting rid of all the config pointing to java 8, surely?","body":"You would start by getting rid of all the config pointing to java 8, surely?"},{"owner":{"account_id":3509196,"reputation":16483,"user_id":2933977,"display_name":"stdunbar"},"score":3,"creation_date":1595454863,"post_id":63043585,"comment_id":111484449,"body_markdown":"Please see [this post](https://devblogs.microsoft.com/java/java-on-visual-studio-code-update-june-2020/) - Java 11 is now a requirement.  It looks like you simply have to move everything about *running* VSCode to Java 11.  Note that you can still code for a lower version of Java.","body":"Please see <a href=\"https://devblogs.microsoft.com/java/java-on-visual-studio-code-update-june-2020/\" rel=\"nofollow noreferrer\">this post</a> - Java 11 is now a requirement.  It looks like you simply have to move everything about <i>running</i> VSCode to Java 11.  Note that you can still code for a lower version of Java."},{"owner":{"account_id":4526521,"reputation":3569,"user_id":3678157,"accept_rate":62,"display_name":"Chanaka Amarasinghe"},"score":1,"creation_date":1595651653,"post_id":63043585,"comment_id":111555186,"body_markdown":"How to open workspace settings on VSCode ??","body":"How to open workspace settings on VSCode ??"},{"owner":{"display_name":"user4987870"},"score":0,"creation_date":1597078955,"post_id":63043585,"comment_id":112010282,"body_markdown":"For people who do not want to install Java-11 and keep using java-8. You will have to install previous version of &#39;Language Support for Java(TM) by Red Hat\nredhat.java&quot; . \nhttps://stackoverflow.com/a/63287737/4987870","body":"For people who do not want to install Java-11 and keep using java-8. You will have to install previous version of &#39;Language Support for Java(TM) by Red Hat redhat.java&quot; .  <a href=\"https://stackoverflow.com/a/63287737/4987870\">stackoverflow.com/a/63287737/4987870</a>"}],"answers":[{"tags":[],"owner":{"account_id":16594769,"reputation":1401,"user_id":11991921,"display_name":"Xavier"},"down_vote_count":1,"up_vote_count":60,"is_accepted":true,"score":59,"last_activity_date":1595512623,"creation_date":1595456003,"answer_id":63043935,"question_id":63043585,"body_markdown":"Change from\r\n\r\n\r\n   `&quot;java.home&quot;: &quot;/Library/Java/JavaVirtualMachines/adoptopenjdk-8.jdk/Contents/Home&quot;`\r\n\r\nto \r\n\r\n   `&quot;java.home&quot;: &quot;/Library/Java/JavaVirtualMachines/adoptopenjdk-11.jdk/Contents/Home&quot;`\r\n\r\nand keep the rest of the settings as is.","title":"Visual Studio Code showing &quot;Java 11 or more recent is required to run. Please download and install a recent JDK&quot;","body":"<p>Change from</p>\n<p><code>&quot;java.home&quot;: &quot;/Library/Java/JavaVirtualMachines/adoptopenjdk-8.jdk/Contents/Home&quot;</code></p>\n<p>to</p>\n<p><code>&quot;java.home&quot;: &quot;/Library/Java/JavaVirtualMachines/adoptopenjdk-11.jdk/Contents/Home&quot;</code></p>\n<p>and keep the rest of the settings as is.</p>\n"},{"tags":[],"owner":{"account_id":19027296,"reputation":81,"user_id":13890094,"display_name":"Lzx4627"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1598469978,"creation_date":1595470026,"answer_id":63045780,"question_id":63043585,"body_markdown":"About the Java 11 requirement:\r\n\r\nThe Eclipse platform has decided to require Java 11 as the minimum requirement for its September 2020 release. See *[Upgrading the Eclipse SDK target environment for the *September* Eclipse release...][1]*.\r\n\r\nBecause *vscode-java* depends on the Eclipse JDT.LS server, that same requirement to *vscode-java*. But the timeline is be more aggressive: Indeed, *vscode-java* usually consumes JDT.LS builds that depend on bleeding edge JDT features, so effectively shipping pre-release versions of Eclipse Platform/JDT. As of July 22nd, 2020, Java 11 is now required for running *vscode-java*.\r\n\r\nThis is from：https://github.com/redhat-developer/vscode-java/wiki/JDK-Requirements#java.configuration.runtimes\r\n\r\n  [1]: https://www.eclipse.org/lists/eclipse-pmc/msg03821.html\r\n","title":"Visual Studio Code showing &quot;Java 11 or more recent is required to run. Please download and install a recent JDK&quot;","body":"<p>About the Java 11 requirement:</p>\n<p>The Eclipse platform has decided to require Java 11 as the minimum requirement for its September 2020 release. See <em><a href=\"https://www.eclipse.org/lists/eclipse-pmc/msg03821.html\" rel=\"nofollow noreferrer\">Upgrading the Eclipse SDK target environment for the <em>September</em> Eclipse release...</a></em>.</p>\n<p>Because <em>vscode-java</em> depends on the Eclipse JDT.LS server, that same requirement to <em>vscode-java</em>. But the timeline is be more aggressive: Indeed, <em>vscode-java</em> usually consumes JDT.LS builds that depend on bleeding edge JDT features, so effectively shipping pre-release versions of Eclipse Platform/JDT. As of July 22nd, 2020, Java 11 is now required for running <em>vscode-java</em>.</p>\n<p>This is from：https://github.com/redhat-developer/vscode-java/wiki/JDK-Requirements#java.configuration.runtimes</p>\n"},{"tags":[],"owner":{"account_id":8988706,"reputation":29,"user_id":6701415,"display_name":"Ayush Pratap"},"down_vote_count":1,"up_vote_count":3,"is_accepted":false,"score":2,"last_activity_date":1598470519,"creation_date":1595842925,"answer_id":63112617,"question_id":63043585,"body_markdown":" 1. Just uninstall all previous JDKs, i.e., less than or equal to JDK 11.\r\n\r\n 2. Re-install JDK 11 from https://www.oracle.com/java/technologies/javase-jdk11-downloads.html\r\n\r\n 3. Make sure your system variable JAVA_HOME points to the latest installed JDK like &quot;C:\\Program Files\\Java\\jdk-11.0.8&quot; (for Windows)\r\n\r\n 4. Restart Visual Studio Code\r\n\r\n 5. Go to *Workspace settings* &amp;rarr; *Java: Home*\r\n\r\n 6. Select &quot;Edit in settings.json&quot;\r\n\r\n 7. Your settings.json should look like:\r\n\r\n    [settings.json_image][1]\r\n\r\n        {\r\n            &quot;java.completion.favoriteStaticMembers&quot;: [\r\n        \r\n                &quot;org.junit.Assert.*&quot;,\r\n                &quot;org.junit.Assume.*&quot;,\r\n                &quot;org.junit.jupiter.api.Assertions.*&quot;,\r\n                &quot;org.junit.jupiter.api.Assumptions.*&quot;,\r\n                &quot;org.junit.jupiter.api.DynamicContainer.*&quot;,\r\n                &quot;org.junit.jupiter.api.DynamicTest.*&quot;,\r\n                &quot;org.mockito.Mockito.*&quot;,\r\n                &quot;org.mockito.ArgumentMatchers.*&quot;,\r\n                &quot;org.mockito.Answers.*&quot;\r\n            ],\r\n            &quot;java.home&quot;: &quot;C://Program Files//Java//jdk-11.0.8&quot;\r\n        }\r\n\r\n  [1]: https://i.stack.imgur.com/MS4BC.png\r\n\r\n","title":"Visual Studio Code showing &quot;Java 11 or more recent is required to run. Please download and install a recent JDK&quot;","body":"<ol>\n<li><p>Just uninstall all previous JDKs, i.e., less than or equal to JDK 11.</p>\n</li>\n<li><p>Re-install JDK 11 from <a href=\"https://www.oracle.com/java/technologies/javase-jdk11-downloads.html\" rel=\"nofollow noreferrer\">https://www.oracle.com/java/technologies/javase-jdk11-downloads.html</a></p>\n</li>\n<li><p>Make sure your system variable JAVA_HOME points to the latest installed JDK like &quot;C:\\Program Files\\Java\\jdk-11.0.8&quot; (for Windows)</p>\n</li>\n<li><p>Restart Visual Studio Code</p>\n</li>\n<li><p>Go to <em>Workspace settings</em> → <em>Java: Home</em></p>\n</li>\n<li><p>Select &quot;Edit in settings.json&quot;</p>\n</li>\n<li><p>Your settings.json should look like:</p>\n<p><a href=\"https://i.stack.imgur.com/MS4BC.png\" rel=\"nofollow noreferrer\">settings.json_image</a></p>\n<pre><code>{\n    &quot;java.completion.favoriteStaticMembers&quot;: [\n\n        &quot;org.junit.Assert.*&quot;,\n        &quot;org.junit.Assume.*&quot;,\n        &quot;org.junit.jupiter.api.Assertions.*&quot;,\n        &quot;org.junit.jupiter.api.Assumptions.*&quot;,\n        &quot;org.junit.jupiter.api.DynamicContainer.*&quot;,\n        &quot;org.junit.jupiter.api.DynamicTest.*&quot;,\n        &quot;org.mockito.Mockito.*&quot;,\n        &quot;org.mockito.ArgumentMatchers.*&quot;,\n        &quot;org.mockito.Answers.*&quot;\n    ],\n    &quot;java.home&quot;: &quot;C://Program Files//Java//jdk-11.0.8&quot;\n}\n</code></pre>\n</li>\n</ol>\n"},{"tags":[],"owner":{"account_id":15462527,"reputation":7553,"user_id":11154841,"display_name":"questionto42"},"down_vote_count":1,"up_vote_count":19,"is_accepted":false,"score":18,"last_activity_date":1622886351,"creation_date":1596730393,"answer_id":63287737,"question_id":63043585,"body_markdown":"## Not recommended workaround (not future-proof):\r\n\r\nOne workaround is to downgrade the extension &quot;Language Support for Java(TM) by Red Hat&quot; from the most recent version 0.65.0. back to\r\n\r\n**vscode-java version 0.64.1**.\r\n\r\n*(This is not recommended unless you have restrictions on the JDK version, it is just possible, see the remarks at the bottom. If you can, use the accepted answer of this thread instead.).*\r\n\r\nTaken from *[Java 11 or more recent is required to run. Please download and install a recent JDK&quot; #1543][1]*, this is how to install the earlier extension version (thanks go to the GitHub user who posted this):\r\n\r\n[![Enter image description here][2]][2]\r\n\r\nPlease mind:\r\n\r\nThis should be relevant only for those who cannot install JDK 11 or higher:\r\n\r\n- Due to a 32-bit system (and who by the same time are forced to use an Oracle JDK 8 as their last Oracle version for 32 bit, so that they are not allowed to use the recommended OpenJDK 14 - see *[JDK Requirements][3]* &amp;rarr; click at the top at the `Java Development Kit` link &amp;rarr; jump to https://adoptopenjdk.net/)\r\n- Due to restrictions on a 64-bit system:\r\n  - One plausible reason is that you are not allowed to update Gradle and you have a Gradle version below 4.7, see the [github discussion](https://github.com/redhat-developer/vscode-java/issues/1543#issuecomment-765448476) again.\r\n  - One &quot;not that plausible&quot; restriction could be some efficient laziness. You might simply not want to install a new JDK and change the Visual Studio Code settings back to your old JDK only because of a version change of the Java extension :).\r\n\r\nYou should not do this if you have no important restrictions. The most plausible restriction is that you use Windows 32 bit, which should be relevant only for those who have an old netbook lying around.\r\n\r\nIn the usual case: upgrade, and then you can still go back to using an older Java version by changing the settings according to *[JDK Requirements][3]*:\r\n\r\n&gt; Do I need to migrate my projects to Java 11?\r\n&gt;\r\n&gt; &quot;NO, you don&#39;t! Well, you should, be we&#39;re not here to judge. It is\r\n&gt; still possible to compile/run Java applications from Java 1.5 to 14,\r\n&gt; provided the proper java.configuration.runtimes are configured in the\r\n&gt; user&#39;s settings.json.&quot;\r\n\r\n--&gt; This means you can upgrade the extension, install at least Java 11 (JDK 11), and use the Java runtime of your choice &lt;= your installed Java version.\r\n\r\nSee detailed instructions for Windows 64bit at *[&quot;Java 11 or more recent is required to run. Please download and install a recent JDK&quot; #1543][4]*.\r\n\r\n  [1]: https://github.com/redhat-developer/vscode-java/issues/1543#issuecomment-669895753\r\n  [2]: https://i.stack.imgur.com/uvMmo.png\r\n  [3]: https://github.com/redhat-developer/vscode-java/wiki/JDK-Requirements#jdk11.requirement\r\n  [4]: https://github.com/redhat-developer/vscode-java/issues/1543#issuecomment-671106893\r\n\r\n","title":"Visual Studio Code showing &quot;Java 11 or more recent is required to run. Please download and install a recent JDK&quot;","body":"<h2>Not recommended workaround (not future-proof):</h2>\n<p>One workaround is to downgrade the extension &quot;Language Support for Java(TM) by Red Hat&quot; from the most recent version 0.65.0. back to</p>\n<p><strong>vscode-java version 0.64.1</strong>.</p>\n<p><em>(This is not recommended unless you have restrictions on the JDK version, it is just possible, see the remarks at the bottom. If you can, use the accepted answer of this thread instead.).</em></p>\n<p>Taken from <em><a href=\"https://github.com/redhat-developer/vscode-java/issues/1543#issuecomment-669895753\" rel=\"nofollow noreferrer\">Java 11 or more recent is required to run. Please download and install a recent JDK&quot; #1543</a></em>, this is how to install the earlier extension version (thanks go to the GitHub user who posted this):</p>\n<p><a href=\"https://i.stack.imgur.com/uvMmo.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/uvMmo.png\" alt=\"Enter image description here\" /></a></p>\n<p>Please mind:</p>\n<p>This should be relevant only for those who cannot install JDK 11 or higher:</p>\n<ul>\n<li>Due to a 32-bit system (and who by the same time are forced to use an Oracle JDK 8 as their last Oracle version for 32 bit, so that they are not allowed to use the recommended OpenJDK 14 - see <em><a href=\"https://github.com/redhat-developer/vscode-java/wiki/JDK-Requirements#jdk11.requirement\" rel=\"nofollow noreferrer\">JDK Requirements</a></em> → click at the top at the <code>Java Development Kit</code> link → jump to <a href=\"https://adoptopenjdk.net/\" rel=\"nofollow noreferrer\">https://adoptopenjdk.net/</a>)</li>\n<li>Due to restrictions on a 64-bit system:\n<ul>\n<li>One plausible reason is that you are not allowed to update Gradle and you have a Gradle version below 4.7, see the <a href=\"https://github.com/redhat-developer/vscode-java/issues/1543#issuecomment-765448476\" rel=\"nofollow noreferrer\">github discussion</a> again.</li>\n<li>One &quot;not that plausible&quot; restriction could be some efficient laziness. You might simply not want to install a new JDK and change the Visual Studio Code settings back to your old JDK only because of a version change of the Java extension :).</li>\n</ul>\n</li>\n</ul>\n<p>You should not do this if you have no important restrictions. The most plausible restriction is that you use Windows 32 bit, which should be relevant only for those who have an old netbook lying around.</p>\n<p>In the usual case: upgrade, and then you can still go back to using an older Java version by changing the settings according to <em><a href=\"https://github.com/redhat-developer/vscode-java/wiki/JDK-Requirements#jdk11.requirement\" rel=\"nofollow noreferrer\">JDK Requirements</a></em>:</p>\n<blockquote>\n<p>Do I need to migrate my projects to Java 11?</p>\n<p>&quot;NO, you don't! Well, you should, be we're not here to judge. It is\nstill possible to compile/run Java applications from Java 1.5 to 14,\nprovided the proper java.configuration.runtimes are configured in the\nuser's settings.json.&quot;</p>\n</blockquote>\n<p>--&gt; This means you can upgrade the extension, install at least Java 11 (JDK 11), and use the Java runtime of your choice &lt;= your installed Java version.</p>\n<p>See detailed instructions for Windows 64bit at <em><a href=\"https://github.com/redhat-developer/vscode-java/issues/1543#issuecomment-671106893\" rel=\"nofollow noreferrer\">&quot;Java 11 or more recent is required to run. Please download and install a recent JDK&quot; #1543</a></em>.</p>\n"},{"tags":[],"owner":{"display_name":"user4987870"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1598471056,"creation_date":1597079162,"answer_id":63344772,"question_id":63043585,"body_markdown":"For people who do not want to install [Java&amp;nbsp;11][1] and keep using [Java&amp;nbsp;8][2]. You will have to install previous version of extension &#39;Language Support for Java(TM) by Red Hat\r\nredhat.java&quot;. The extension version should be 0.64.1 for Java&amp;nbsp;8.\r\n\r\nPlease refer the answer in the post below - \r\n\r\n   *https://stackoverflow.com/questions/63043585/visual-studio-code-showing-java-11-or-more-recent-is-required-to-run-please-do/63287737#63287737*\r\n\r\n  [1]: https://en.wikipedia.org/wiki/Java_version_history#Java_SE_11\r\n  [2]: https://en.wikipedia.org/wiki/Java_version_history#Java_SE_8\r\n\r\n","title":"Visual Studio Code showing &quot;Java 11 or more recent is required to run. Please download and install a recent JDK&quot;","body":"<p>For people who do not want to install <a href=\"https://en.wikipedia.org/wiki/Java_version_history#Java_SE_11\" rel=\"nofollow noreferrer\">Java 11</a> and keep using <a href=\"https://en.wikipedia.org/wiki/Java_version_history#Java_SE_8\" rel=\"nofollow noreferrer\">Java 8</a>. You will have to install previous version of extension 'Language Support for Java(TM) by Red Hat\nredhat.java&quot;. The extension version should be 0.64.1 for Java 8.</p>\n<p>Please refer the answer in the post below -</p>\n<p><em><a href=\"https://stackoverflow.com/questions/63043585/visual-studio-code-showing-java-11-or-more-recent-is-required-to-run-please-do/63287737#63287737\">Visual Studio Code showing &quot;Java 11 or more recent is required to run. Please download and install a recent JDK&quot;</a></em></p>\n"},{"tags":[],"owner":{"account_id":3128339,"reputation":41,"user_id":2646801,"display_name":"Warren Clough"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1598471127,"creation_date":1598399267,"answer_id":63588613,"question_id":63043585,"body_markdown":"I was experiencing the same issue and the following change to my *setting.json* file resolved the issue. Big thanks to [this comment on patch notes][1].\r\n\r\n    &quot;java.home&quot;: &quot;C:/Program Files/AdoptOpenJDK/jdk-11.0.8.10-hotspot&quot;,\r\n    &quot;java.configuration.runtimes&quot;: [\r\n        {\r\n            &quot;name&quot;: &quot;JavaSE-1.8&quot;,\r\n            &quot;path&quot;: &quot;C:/Program Files/Java/jdk1.8.0_211&quot;,\r\n            &quot;default&quot;: true\r\n        },\r\n        {\r\n            &quot;name&quot;: &quot;JavaSE-11&quot;,\r\n            &quot;path&quot;: &quot;C:/Program Files/AdoptOpenJDK/jdk-11.0.8.10-hotspot&quot;,\r\n        }\r\n    ]\r\n\r\n  [1]: https://github.com/redhat-developer/vscode-java/pull/1524#issuecomment-663730482\r\n\r\n\r\n\r\n\r\n","title":"Visual Studio Code showing &quot;Java 11 or more recent is required to run. Please download and install a recent JDK&quot;","body":"<p>I was experiencing the same issue and the following change to my <em>setting.json</em> file resolved the issue. Big thanks to <a href=\"https://github.com/redhat-developer/vscode-java/pull/1524#issuecomment-663730482\" rel=\"nofollow noreferrer\">this comment on patch notes</a>.</p>\n<pre><code>&quot;java.home&quot;: &quot;C:/Program Files/AdoptOpenJDK/jdk-11.0.8.10-hotspot&quot;,\n&quot;java.configuration.runtimes&quot;: [\n    {\n        &quot;name&quot;: &quot;JavaSE-1.8&quot;,\n        &quot;path&quot;: &quot;C:/Program Files/Java/jdk1.8.0_211&quot;,\n        &quot;default&quot;: true\n    },\n    {\n        &quot;name&quot;: &quot;JavaSE-11&quot;,\n        &quot;path&quot;: &quot;C:/Program Files/AdoptOpenJDK/jdk-11.0.8.10-hotspot&quot;,\n    }\n]\n</code></pre>\n"},{"tags":[],"owner":{"account_id":7465632,"reputation":14579,"user_id":5675325,"accept_rate":85,"display_name":"Tiago Martins Peres"},"down_vote_count":0,"up_vote_count":14,"is_accepted":false,"score":14,"last_activity_date":1600077880,"creation_date":1600077555,"answer_id":63882102,"question_id":63043585,"body_markdown":"In Windows,\r\n\r\n1. Download and install JDK 11.\r\n\r\n[![Download and install JDK 11][1]][1]\r\n\r\n2. Once the installation is complete, in `C:\\Program Files\\Java` you&#39;ll see something like this\r\n\r\n[![C:\\Program Files\\Java][2]][2]\r\n\r\nAs you can see, we have JDK 11 in `C:/Program Files/Java/jdk-11.0.8`.\r\n\r\n3. Open VSC and go to Settings (CTRL + , or Manage icon (bottom left) &gt; Settings) and search for `javahome`\r\n\r\n[![VSC Settings Java Home][3]][3]\r\n\r\n4. Click in &quot;Edit in settings.json&quot;, add `C://Program Files//Java//jdk-11.0.8` to java.home and save the file. You should have something like this\r\n\r\n[![Java Home VS Code Settings][4]][4]\r\n\r\n    {\r\n        &quot;java.home&quot;: &quot;C://Program Files//Java//jdk-11.0.8&quot;\r\n    }\r\n\r\n5. Restart VS Code and you&#39;ll see something like this\r\n\r\n[![Security Warning][6]][6]\r\n\r\n&gt; Security Warning! Do you allow this workspace to set the java.home\r\n&gt; variable?   java.home: C://Program Files//Java//jdk-11.0.8\r\n\r\nClick allow and you&#39;re good to go.\r\n\r\n----------\r\n\r\n\r\n*Note*: If you get this error and are reliant on Java 8, [fbricon][5] mentions,\r\n\r\n&gt; you can still compile your projects with Java 8. JDK11 is only\r\n&gt; required to run vscode-java.\r\n\r\n  [1]: https://i.stack.imgur.com/Ejdbt.png\r\n  [2]: https://i.stack.imgur.com/FOcvo.png\r\n  [3]: https://i.stack.imgur.com/CKT5T.png\r\n  [4]: https://i.stack.imgur.com/eZ4Hs.png\r\n  [5]: https://github.com/redhat-developer/vscode-java/issues/1543#issuecomment-662582525\r\n  [6]: https://i.stack.imgur.com/ffgIt.png","title":"Visual Studio Code showing &quot;Java 11 or more recent is required to run. Please download and install a recent JDK&quot;","body":"<p>In Windows,</p>\n<ol>\n<li>Download and install JDK 11.</li>\n</ol>\n<p><a href=\"https://i.stack.imgur.com/Ejdbt.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/Ejdbt.png\" alt=\"Download and install JDK 11\" /></a></p>\n<ol start=\"2\">\n<li>Once the installation is complete, in <code>C:\\Program Files\\Java</code> you'll see something like this</li>\n</ol>\n<p><a href=\"https://i.stack.imgur.com/FOcvo.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/FOcvo.png\" alt=\"C:\\Program Files\\Java\" /></a></p>\n<p>As you can see, we have JDK 11 in <code>C:/Program Files/Java/jdk-11.0.8</code>.</p>\n<ol start=\"3\">\n<li>Open VSC and go to Settings (CTRL + , or Manage icon (bottom left) &gt; Settings) and search for <code>javahome</code></li>\n</ol>\n<p><a href=\"https://i.stack.imgur.com/CKT5T.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/CKT5T.png\" alt=\"VSC Settings Java Home\" /></a></p>\n<ol start=\"4\">\n<li>Click in &quot;Edit in settings.json&quot;, add <code>C://Program Files//Java//jdk-11.0.8</code> to java.home and save the file. You should have something like this</li>\n</ol>\n<p><a href=\"https://i.stack.imgur.com/eZ4Hs.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/eZ4Hs.png\" alt=\"Java Home VS Code Settings\" /></a></p>\n<pre><code>{\n    &quot;java.home&quot;: &quot;C://Program Files//Java//jdk-11.0.8&quot;\n}\n</code></pre>\n<ol start=\"5\">\n<li>Restart VS Code and you'll see something like this</li>\n</ol>\n<p><a href=\"https://i.stack.imgur.com/ffgIt.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/ffgIt.png\" alt=\"Security Warning\" /></a></p>\n<blockquote>\n<p>Security Warning! Do you allow this workspace to set the java.home\nvariable?   java.home: C://Program Files//Java//jdk-11.0.8</p>\n</blockquote>\n<p>Click allow and you're good to go.</p>\n<hr />\n<p><em>Note</em>: If you get this error and are reliant on Java 8, <a href=\"https://github.com/redhat-developer/vscode-java/issues/1543#issuecomment-662582525\" rel=\"noreferrer\">fbricon</a> mentions,</p>\n<blockquote>\n<p>you can still compile your projects with Java 8. JDK11 is only\nrequired to run vscode-java.</p>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":19380804,"reputation":311,"user_id":14172111,"display_name":"Victor Ramos"},"down_vote_count":0,"up_vote_count":21,"is_accepted":false,"score":21,"last_activity_date":1618335637,"creation_date":1618335637,"answer_id":67079837,"question_id":63043585,"body_markdown":"For future readers. If you are using the extension &quot;Spring Boot Tools&quot; you may get a similar error to this. I had my JAVA_HOME set to java 8 but required java 11 to use the Spring Boot Tools Language Server. It seems that Spring Boot Tools uses whatever your JAVA_HOME environment variable is or in the PATH environment variable, [Spring Project Issue][1]. To override your JAVA_HOME variable you&#39;ll need to modify the `spring-boot.ls.java.home` setting.\r\n\r\n 1. Open Visual Studio Code\r\n 2. `CRTL + ,` to open the settings\r\n 3. Search `spring-boot.ls.java.home`\r\n 4. Select &#39;Edit in settings.json&#39;\r\n 5. Your Java 11 installation → `&quot;spring-boot.ls.java.home&quot;: &quot;C:\\\\Program Files\\\\Java\\\\jdk-11.0.10&quot;`\r\n 6. Save and restart VS Code\r\n\r\nPrereq: Have a Java 11 installation\r\n\r\n  [1]: https://github.com/spring-projects/sts4/issues/612#issuecomment-807575359","title":"Visual Studio Code showing &quot;Java 11 or more recent is required to run. Please download and install a recent JDK&quot;","body":"<p>For future readers. If you are using the extension &quot;Spring Boot Tools&quot; you may get a similar error to this. I had my JAVA_HOME set to java 8 but required java 11 to use the Spring Boot Tools Language Server. It seems that Spring Boot Tools uses whatever your JAVA_HOME environment variable is or in the PATH environment variable, <a href=\"https://github.com/spring-projects/sts4/issues/612#issuecomment-807575359\" rel=\"noreferrer\">Spring Project Issue</a>. To override your JAVA_HOME variable you'll need to modify the <code>spring-boot.ls.java.home</code> setting.</p>\n<ol>\n<li>Open Visual Studio Code</li>\n<li><code>CRTL + ,</code> to open the settings</li>\n<li>Search <code>spring-boot.ls.java.home</code></li>\n<li>Select 'Edit in settings.json'</li>\n<li>Your Java 11 installation → <code>&quot;spring-boot.ls.java.home&quot;: &quot;C:\\\\Program Files\\\\Java\\\\jdk-11.0.10&quot;</code></li>\n<li>Save and restart VS Code</li>\n</ol>\n<p>Prereq: Have a Java 11 installation</p>\n"},{"tags":[],"owner":{"account_id":19178400,"reputation":155,"user_id":14574982,"display_name":"Neail"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1639069029,"creation_date":1639068662,"answer_id":70293690,"question_id":63043585,"body_markdown":"I have been using Adopt open JDK (Eclipse Temurin) for my Gradle builds and switching to VS Code from Android studio encountered with &#39;There is no valid JAVA_HOME setting to launch Gradle Language Server. Please check your &quot;java.home&quot; setting.&#39;.\r\n\r\nDelving into that issue I found **some JDK Installers don&#39;t even install Java_Home** by default.\r\n\r\nJust reinstalling with fields checked, solved the issue.\r\nDon&#39;t forget to restart VS Code. (no need to edit environment variables at least I didn&#39;t have to)\r\n\r\n[![error][1]][1]\r\n[![fixed][2]][2]\r\n\r\nhope it helped.\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/h2ii7.png\r\n  [2]: https://i.stack.imgur.com/2IfeP.png","title":"Visual Studio Code showing &quot;Java 11 or more recent is required to run. Please download and install a recent JDK&quot;","body":"<p>I have been using Adopt open JDK (Eclipse Temurin) for my Gradle builds and switching to VS Code from Android studio encountered with 'There is no valid JAVA_HOME setting to launch Gradle Language Server. Please check your &quot;java.home&quot; setting.'.</p>\n<p>Delving into that issue I found <strong>some JDK Installers don't even install Java_Home</strong> by default.</p>\n<p>Just reinstalling with fields checked, solved the issue.\nDon't forget to restart VS Code. (no need to edit environment variables at least I didn't have to)</p>\n<p><a href=\"https://i.stack.imgur.com/h2ii7.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/h2ii7.png\" alt=\"error\" /></a>\n<a href=\"https://i.stack.imgur.com/2IfeP.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/2IfeP.png\" alt=\"fixed\" /></a></p>\n<p>hope it helped.</p>\n"},{"tags":[],"owner":{"account_id":13306419,"reputation":11,"user_id":9607027,"display_name":"Manjunath Asundi"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1644663004,"creation_date":1644646304,"answer_id":71089420,"question_id":63043585,"body_markdown":"Add this variable in your `settings.json` file.\r\n```\r\n&quot;sonarlint.ls.javaHome&quot;: &quot;/Library/Java/JavaVirtualMachines/temurin-11.jdk/Contents/Home&quot;\r\n```","title":"Visual Studio Code showing &quot;Java 11 or more recent is required to run. Please download and install a recent JDK&quot;","body":"<p>Add this variable in your <code>settings.json</code> file.</p>\n<pre><code>&quot;sonarlint.ls.javaHome&quot;: &quot;/Library/Java/JavaVirtualMachines/temurin-11.jdk/Contents/Home&quot;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":297683,"reputation":551,"user_id":603324,"display_name":"Natta Wang"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1647995492,"creation_date":1647995492,"answer_id":71580496,"question_id":63043585,"body_markdown":"In 2022 March,\r\n\r\nI found the `java.home` was changed to be recommended to use `java.jdt.ls.java.home`, then just change it.\r\n\r\nAnd one another setting I did to get rid off that message, re-check the environment variables on your machine, does it set to proper Java 11 or above?\r\n\r\nAfter made those settings, restart VS Code and then go on your work.","title":"Visual Studio Code showing &quot;Java 11 or more recent is required to run. Please download and install a recent JDK&quot;","body":"<p>In 2022 March,</p>\n<p>I found the <code>java.home</code> was changed to be recommended to use <code>java.jdt.ls.java.home</code>, then just change it.</p>\n<p>And one another setting I did to get rid off that message, re-check the environment variables on your machine, does it set to proper Java 11 or above?</p>\n<p>After made those settings, restart VS Code and then go on your work.</p>\n"},{"tags":[],"owner":{"account_id":16670396,"reputation":714,"user_id":12048003,"display_name":"nativelectronic"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1667327846,"creation_date":1667327846,"answer_id":74280385,"question_id":63043585,"body_markdown":"If VisualSudioCode suggested to install **OpenJDK17U-jdk_x64_windows_hotspot_xxxx**, later You should select local folder where eEclipse Adptium was already installed.\r\nfor example in mine was in &quot;**C:\\Program Files\\Eclipse Adoptium\\jdk-17.0.5.8-hotspot**&quot;\r\nand re start VSC","title":"Visual Studio Code showing &quot;Java 11 or more recent is required to run. Please download and install a recent JDK&quot;","body":"<p>If VisualSudioCode suggested to install <strong>OpenJDK17U-jdk_x64_windows_hotspot_xxxx</strong>, later You should select local folder where eEclipse Adptium was already installed.\nfor example in mine was in &quot;<strong>C:\\Program Files\\Eclipse Adoptium\\jdk-17.0.5.8-hotspot</strong>&quot;\nand re start VSC</p>\n"}],"owner":{"account_id":4779872,"reputation":2056,"user_id":3861965,"accept_rate":47,"display_name":"mcansado"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":127008,"favorite_count":0,"down_vote_count":0,"up_vote_count":76,"accepted_answer_id":63043935,"answer_count":12,"score":76,"last_activity_date":1667327846,"creation_date":1595453892,"question_id":63043585,"body_markdown":"Today Visual Studio Code started showing me a pop-up saying:\r\n\r\n&gt; Java 11 or more recent is required to run. Please download and install a recent JDK.\r\n\r\n**I need to use the JDK 8** (working on Apache Beam and that&#39;s the last supported version). I have been working on that and haven&#39;t had any issues until this came up.\r\n\r\nI have read through [this article][1] and implemented the points mentioned there.\r\n\r\nHere is my workspace settings on Visual Studio Code (I have double-checked the paths)\r\n\r\n    {\r\n        &quot;java.configuration.updateBuildConfiguration&quot;: &quot;disabled&quot;,\r\n        &quot;java.home&quot;: &quot;/Library/Java/JavaVirtualMachines/adoptopenjdk-8.jdk/Contents/Home&quot;,\r\n        &quot;java.configuration.runtimes&quot;: [\r\n            {\r\n              &quot;name&quot;: &quot;JavaSE-1.8&quot;,\r\n              &quot;path&quot;: &quot;/Library/Java/JavaVirtualMachines/adoptopenjdk-8.jdk/Contents/Home&quot;,\r\n              &quot;default&quot;: true\r\n            },\r\n            {\r\n              &quot;name&quot;: &quot;JavaSE-11&quot;,\r\n              &quot;path&quot;: &quot;/Library/Java/JavaVirtualMachines/adoptopenjdk-11.jdk/Contents/Home&quot;,\r\n            }\r\n          ]\r\n    }\r\n\r\nOther helpful information:\r\n\r\n    ➜ echo $JAVA_HOME\r\n    /Library/Java/JavaVirtualMachines/adoptopenjdk-8.jdk/Contents/Home\r\n\r\nand\r\n\r\n    ➜ which java\r\n    /usr/bin/java\r\n\r\nThis started happening today even though I have been running JDK 8 on Visual Studio Code successfully for a while now. I don&#39;t remember updating Visual Studio Code, so I&#39;m not sure as to why this is being displayed now since apparently the pop-up has been displayed since mid-April (asked on the *vscode-java* Gitter channel).\r\n\r\n  [1]: https://github.com/redhat-developer/vscode-java/wiki/JDK-Requirements#setting-the-jdk\r\n\r\n","title":"Visual Studio Code showing &quot;Java 11 or more recent is required to run. Please download and install a recent JDK&quot;","body":"<p>Today Visual Studio Code started showing me a pop-up saying:</p>\n<blockquote>\n<p>Java 11 or more recent is required to run. Please download and install a recent JDK.</p>\n</blockquote>\n<p><strong>I need to use the JDK 8</strong> (working on Apache Beam and that's the last supported version). I have been working on that and haven't had any issues until this came up.</p>\n<p>I have read through <a href=\"https://github.com/redhat-developer/vscode-java/wiki/JDK-Requirements#setting-the-jdk\" rel=\"noreferrer\">this article</a> and implemented the points mentioned there.</p>\n<p>Here is my workspace settings on Visual Studio Code (I have double-checked the paths)</p>\n<pre><code>{\n    &quot;java.configuration.updateBuildConfiguration&quot;: &quot;disabled&quot;,\n    &quot;java.home&quot;: &quot;/Library/Java/JavaVirtualMachines/adoptopenjdk-8.jdk/Contents/Home&quot;,\n    &quot;java.configuration.runtimes&quot;: [\n        {\n          &quot;name&quot;: &quot;JavaSE-1.8&quot;,\n          &quot;path&quot;: &quot;/Library/Java/JavaVirtualMachines/adoptopenjdk-8.jdk/Contents/Home&quot;,\n          &quot;default&quot;: true\n        },\n        {\n          &quot;name&quot;: &quot;JavaSE-11&quot;,\n          &quot;path&quot;: &quot;/Library/Java/JavaVirtualMachines/adoptopenjdk-11.jdk/Contents/Home&quot;,\n        }\n      ]\n}\n</code></pre>\n<p>Other helpful information:</p>\n<pre><code>➜ echo $JAVA_HOME\n/Library/Java/JavaVirtualMachines/adoptopenjdk-8.jdk/Contents/Home\n</code></pre>\n<p>and</p>\n<pre><code>➜ which java\n/usr/bin/java\n</code></pre>\n<p>This started happening today even though I have been running JDK 8 on Visual Studio Code successfully for a while now. I don't remember updating Visual Studio Code, so I'm not sure as to why this is being displayed now since apparently the pop-up has been displayed since mid-April (asked on the <em>vscode-java</em> Gitter channel).</p>\n"},{"tags":["java","for-loop","memory-management","heap-memory","stack-memory"],"comments":[{"owner":{"account_id":465573,"reputation":192694,"user_id":869736,"accept_rate":82,"display_name":"Louis Wasserman"},"score":0,"creation_date":1666889865,"post_id":74225014,"comment_id":131047578,"body_markdown":"&quot;for objects from previous iterations there are no references and these objects should be removed from heap.&quot;  `orderItemList` has references to those previous items.","body":"&quot;for objects from previous iterations there are no references and these objects should be removed from heap.&quot;  <code>orderItemList</code> has references to those previous items."},{"owner":{"account_id":14280312,"reputation":35,"user_id":11580012,"display_name":"Дмитрий Каспорский"},"score":0,"creation_date":1666900976,"post_id":74225014,"comment_id":131050969,"body_markdown":"@Louis Wasserman So there is no difference where to declare object reference?","body":"@Louis Wasserman So there is no difference where to declare object reference?"}],"answers":[{"tags":[],"owner":{"account_id":26749788,"reputation":611,"user_id":20349343,"display_name":"radof"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1666889095,"creation_date":1666888003,"answer_id":74225335,"question_id":74225014,"body_markdown":"&gt; Will Java remove these objects from heap or keep them alive before\r\n&gt; method end because of there are (in stack area) will be several local\r\n&gt; variables of OrderItem type?\r\n\r\nI assume that your `orderItemList` is `ArrayList&lt;OrderItem&gt;` in which case adding an `OrderItem` to `orderItemList` should only add a reference pointing to the currently created `item` to your list rather than copying the whole object (as discussed in the linked post). \r\nThen as long as `orderItemList` is around its `OrderItem`s should stay in the heap.\r\n\r\nhttps://stackoverflow.com/questions/7080546/add-an-object-to-an-arraylist-and-modify-it-later#:~:text=The%20reference%20you%20added%20will,the%20reference%20to%20the%20object.\r\n\r\n&gt; After this loop i never used these objects again.\r\n\r\n \r\nIf you are using  `orderItemList` again, which I assume you do, since otherwise it is not clear why the list would be created in the first place, you should be using also `OrderItem`s added to it again. ","title":"Does Java remove objects from the heap after a for loop in which that object was created and never used again","body":"<blockquote>\n<p>Will Java remove these objects from heap or keep them alive before\nmethod end because of there are (in stack area) will be several local\nvariables of OrderItem type?</p>\n</blockquote>\n<p>I assume that your <code>orderItemList</code> is <code>ArrayList&lt;OrderItem&gt;</code> in which case adding an <code>OrderItem</code> to <code>orderItemList</code> should only add a reference pointing to the currently created <code>item</code> to your list rather than copying the whole object (as discussed in the linked post).\nThen as long as <code>orderItemList</code> is around its <code>OrderItem</code>s should stay in the heap.</p>\n<p><a href=\"https://stackoverflow.com/questions/7080546/add-an-object-to-an-arraylist-and-modify-it-later#:%7E:text=The%20reference%20you%20added%20will,the%20reference%20to%20the%20object\">https://stackoverflow.com/questions/7080546/add-an-object-to-an-arraylist-and-modify-it-later#:~:text=The%20reference%20you%20added%20will,the%20reference%20to%20the%20object</a>.</p>\n<blockquote>\n<p>After this loop i never used these objects again.</p>\n</blockquote>\n<p>If you are using  <code>orderItemList</code> again, which I assume you do, since otherwise it is not clear why the list would be created in the first place, you should be using also <code>OrderItem</code>s added to it again.</p>\n"}],"owner":{"account_id":14280312,"reputation":35,"user_id":11580012,"display_name":"Дмитрий Каспорский"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":217,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":74225335,"answer_count":1,"score":0,"last_activity_date":1667326206,"creation_date":1666886579,"question_id":74225014,"body_markdown":"I have a simple for loop in which I create new objects and save to list. After this loop I never used these objects again. Will Java remove these objects from heap or keep them alive before method end because of there are (in stack area) will be several local variables of OrderItem type?\r\n```\r\nfor (int i = 0; i &lt; arr.length; i++) {\r\n            OrderItem item = new OrderItem();\r\n            item.setProduct(product);\r\n            item.setQuantity(entry.getValue());\r\n            orderItemList.add(item);\r\n        }\r\n```\r\nOr these objects will live in heap until end of a method (method frame).\r\nBut what if move declaration of ```OrderItem item``` outside the loop.\r\n```\r\nOrderItem item;\r\nfor (int i = 0; i &lt; arr.length; i++) {\r\n            item = new OrderItem();\r\n            item.setProduct(someValue);\r\n            item.setQuantity(someValue);\r\n            orderItemList.add(item);\r\n        }\r\n```\r\nAs I understand correctly, in this case in stack area there is only one local variable of OrderItem type and on each loop iteration this variable will reference to new object. And for  objects from previous iterations there are no references and these objects should be removed from heap.","title":"Does Java remove objects from the heap after a for loop in which that object was created and never used again","body":"<p>I have a simple for loop in which I create new objects and save to list. After this loop I never used these objects again. Will Java remove these objects from heap or keep them alive before method end because of there are (in stack area) will be several local variables of OrderItem type?</p>\n<pre><code>for (int i = 0; i &lt; arr.length; i++) {\n            OrderItem item = new OrderItem();\n            item.setProduct(product);\n            item.setQuantity(entry.getValue());\n            orderItemList.add(item);\n        }\n</code></pre>\n<p>Or these objects will live in heap until end of a method (method frame).\nBut what if move declaration of <code>OrderItem item</code> outside the loop.</p>\n<pre><code>OrderItem item;\nfor (int i = 0; i &lt; arr.length; i++) {\n            item = new OrderItem();\n            item.setProduct(someValue);\n            item.setQuantity(someValue);\n            orderItemList.add(item);\n        }\n</code></pre>\n<p>As I understand correctly, in this case in stack area there is only one local variable of OrderItem type and on each loop iteration this variable will reference to new object. And for  objects from previous iterations there are no references and these objects should be removed from heap.</p>\n"},{"tags":["java","spring","spring-boot","messagebox"],"comments":[{"owner":{"account_id":10693447,"reputation":878,"user_id":7871511,"display_name":"Rohit Agarwal"},"score":0,"creation_date":1667311950,"post_id":74276772,"comment_id":131134719,"body_markdown":"Most of the time with log.level=INFO we got the exact error. If log.level=TRACE then you will definitely get lot of logs.","body":"Most of the time with log.level=INFO we got the exact error. If log.level=TRACE then you will definitely get lot of logs."},{"owner":{"account_id":10693447,"reputation":878,"user_id":7871511,"display_name":"Rohit Agarwal"},"score":0,"creation_date":1667311988,"post_id":74276772,"comment_id":131134733,"body_markdown":"Can you try once with INFO and see if that helps","body":"Can you try once with INFO and see if that helps"},{"owner":{"account_id":3411006,"reputation":853,"user_id":2864877,"display_name":"Techniquab"},"score":0,"creation_date":1667312962,"post_id":74276772,"comment_id":131135109,"body_markdown":"Yes, changing the log level can help a bit....I added some notes about running from shortcut and why I need a better mechanism than logging.","body":"Yes, changing the log level can help a bit....I added some notes about running from shortcut and why I need a better mechanism than logging."}],"answers":[{"tags":[],"owner":{"account_id":2861986,"reputation":365,"user_id":2457058,"display_name":"artild"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1667326073,"creation_date":1667326073,"answer_id":74280070,"question_id":74276772,"body_markdown":"Spring Boot app [is headless by default][1] - it means there is no GUI supposed.\r\nJOptionPane.showMessageDialog - is part of GUI Java Swing framework.\r\n\r\nSo to use this GUI feature, you need to make you Spring Boot not headless.\r\n\r\nExample (short version of code from [here][2]):\r\n\r\n    @SpringBootApplication\r\n    public class DemoSbSwingApplication extends JFrame {\r\n        public static void main(String[] args) {\r\n            var ctx = new SpringApplicationBuilder(DemoSbSwingApplication.class)\r\n                    .headless(false)\r\n                    .run(args);\r\n            EventQueue.invokeLater(() -&gt; {\r\n                var ex = ctx.getBean(DemoSbSwingApplication.class);\r\n                ex.setVisible(true);\r\n            });\r\n        }\r\n    \r\n        public DemoSbSwingApplication() {\r\n            var pane = getContentPane();\r\n    \r\n            JOptionPane.showMessageDialog(pane, &quot;TEST TEST TEST&quot;);\r\n        }\r\n    \r\n    }\r\n\r\n\r\n  [1]: https://docs.spring.io/spring-boot/docs/current/api/org/springframework/boot/builder/SpringApplicationBuilder.html#headless-boolean-\r\n  [2]: https://zetcode.com/articles/springbootswing/","title":"Reporting Errors In Spring Boot Startup","body":"<p>Spring Boot app <a href=\"https://docs.spring.io/spring-boot/docs/current/api/org/springframework/boot/builder/SpringApplicationBuilder.html#headless-boolean-\" rel=\"nofollow noreferrer\">is headless by default</a> - it means there is no GUI supposed.\nJOptionPane.showMessageDialog - is part of GUI Java Swing framework.</p>\n<p>So to use this GUI feature, you need to make you Spring Boot not headless.</p>\n<p>Example (short version of code from <a href=\"https://zetcode.com/articles/springbootswing/\" rel=\"nofollow noreferrer\">here</a>):</p>\n<pre><code>@SpringBootApplication\npublic class DemoSbSwingApplication extends JFrame {\n    public static void main(String[] args) {\n        var ctx = new SpringApplicationBuilder(DemoSbSwingApplication.class)\n                .headless(false)\n                .run(args);\n        EventQueue.invokeLater(() -&gt; {\n            var ex = ctx.getBean(DemoSbSwingApplication.class);\n            ex.setVisible(true);\n        });\n    }\n\n    public DemoSbSwingApplication() {\n        var pane = getContentPane();\n\n        JOptionPane.showMessageDialog(pane, &quot;TEST TEST TEST&quot;);\n    }\n\n}\n</code></pre>\n"}],"owner":{"account_id":3411006,"reputation":853,"user_id":2864877,"display_name":"Techniquab"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":290,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":74280070,"answer_count":1,"score":0,"last_activity_date":1667326073,"creation_date":1667309647,"question_id":74276772,"body_markdown":"When my application.yml does not match the database schema properly in my springboot application it will fail to start with a very verbose exception trace.\r\n\r\nThis trace is very difficult for a user to parse, even if I log the failure reason, it will be lost in a barrage of logs.\r\n\r\nWorse yet, if the user launcher the program from a shortcut it will disappear and they will need to dig up the log or run it from the command line.\r\n\r\nI would like to popup a message box right when I encounter the problem.\r\n\r\nI tried adding a ```JOptionPane.showMessageDialog``` but this throws a  java.awt.HeadlessException.\r\n\r\nIs there a more canonical way to provide user feedback when a spring boot application fails to start?","title":"Reporting Errors In Spring Boot Startup","body":"<p>When my application.yml does not match the database schema properly in my springboot application it will fail to start with a very verbose exception trace.</p>\n<p>This trace is very difficult for a user to parse, even if I log the failure reason, it will be lost in a barrage of logs.</p>\n<p>Worse yet, if the user launcher the program from a shortcut it will disappear and they will need to dig up the log or run it from the command line.</p>\n<p>I would like to popup a message box right when I encounter the problem.</p>\n<p>I tried adding a <code>JOptionPane.showMessageDialog</code> but this throws a  java.awt.HeadlessException.</p>\n<p>Is there a more canonical way to provide user feedback when a spring boot application fails to start?</p>\n"},{"tags":["java","javafx","datepicker","tableview","scenebuilder"],"comments":[{"owner":{"account_id":2518243,"reputation":203472,"user_id":2189127,"display_name":"James_D"},"score":2,"creation_date":1667325014,"post_id":74279769,"comment_id":131139448,"body_markdown":"You should be getting data from the model, not from the table columns. Create and post a [mre].","body":"You should be getting data from the model, not from the table columns. Create and post a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."},{"owner":{"account_id":2518243,"reputation":203472,"user_id":2189127,"display_name":"James_D"},"score":2,"creation_date":1667325090,"post_id":74279769,"comment_id":131139493,"body_markdown":"Surely `tableColDate` should be a `TableColumn&lt;Booking, LocalDate&gt;`?","body":"Surely <code>tableColDate</code> should be a <code>TableColumn&lt;Booking, LocalDate&gt;</code>?"},{"owner":{"account_id":21733462,"reputation":5,"user_id":16041815,"display_name":"Cicada3301"},"score":0,"creation_date":1667326147,"post_id":74279769,"comment_id":131139841,"body_markdown":"No, for some other reason I convert LocalDate to String when I send my Datepicker Value to the TableView","body":"No, for some other reason I convert LocalDate to String when I send my Datepicker Value to the TableView"},{"owner":{"account_id":2518243,"reputation":203472,"user_id":2189127,"display_name":"James_D"},"score":2,"creation_date":1667326961,"post_id":74279769,"comment_id":131140116,"body_markdown":"Why? That makes no sense. If it&#39;s a date, store it as a `LocalDate`.","body":"Why? That makes no sense. If it&#39;s a date, store it as a <code>LocalDate</code>."},{"owner":{"account_id":2518243,"reputation":203472,"user_id":2189127,"display_name":"James_D"},"score":2,"creation_date":1667327372,"post_id":74279769,"comment_id":131140219,"body_markdown":"This is just wrong. You create a model class, `Booking`, specifically to store the data for the rows in the table. It makes no sense at all to store the date as a string in a class specifically designed only for storing data.. You have no way of checking in that class that valid dates are stored, and as you&#39;re discovering here, you then have to parse them to use them as dates. What is the point of all this wasteful and error-prone parsing?","body":"This is just wrong. You create a model class, <code>Booking</code>, specifically to store the data for the rows in the table. It makes no sense at all to store the date as a string in a class specifically designed only for storing data.. You have no way of checking in that class that valid dates are stored, and as you&#39;re discovering here, you then have to parse them to use them as dates. What is the point of all this wasteful and error-prone parsing?"},{"owner":{"account_id":21733462,"reputation":5,"user_id":16041815,"display_name":"Cicada3301"},"score":0,"creation_date":1667329947,"post_id":74279769,"comment_id":131140943,"body_markdown":"it gives me this error  java.lang.reflect.InaccessibleObjectException: Unable to make field private final int java.time.LocalDate.year accessible: module java.base does not &quot;opens java.time&quot; to unnamed module @1d76e064. It has to something with my code that connect to the db. Right here \tBooking booking = gson.fromJson(responseObject.toString(), Booking.class); its the toString again. But its a whole another issue. I probably should figure it out but its a whole another problem","body":"it gives me this error  java.lang.reflect.InaccessibleObjectException: Unable to make field private final int java.time.LocalDate.year accessible: module java.base does not &quot;opens java.time&quot; to unnamed module @1d76e064. It has to something with my code that connect to the db. Right here \tBooking booking = gson.fromJson(responseObject.toString(), Booking.class); its the toString again. But its a whole another issue. I probably should figure it out but its a whole another problem"},{"owner":{"account_id":2819940,"reputation":12538,"user_id":2423906,"accept_rate":100,"display_name":"SedJ601"},"score":0,"creation_date":1667330699,"post_id":74279769,"comment_id":131141177,"body_markdown":"See if the ideas from [this](https://stackoverflow.com/questions/70302119/show-json-in-tableview/70302970#70302970) can help you solve your `gson` issue.","body":"See if the ideas from <a href=\"https://stackoverflow.com/questions/70302119/show-json-in-tableview/70302970#70302970\">this</a> can help you solve your <code>gson</code> issue."},{"owner":{"account_id":2518243,"reputation":203472,"user_id":2189127,"display_name":"James_D"},"score":0,"creation_date":1667331136,"post_id":74279769,"comment_id":131141332,"body_markdown":"Don&#39;t pollute your data model because you can&#39;t be bothered to make it work with your persistence engine. There are lots of resources on making GSON work with `LocalDate`, e.g. https://www.javaguides.net/2019/11/gson-localdatetime-localdate.html. (Generally I favor Jackson over GSON as I think it understands the whole concept of encapsulation better, but that is just a preference, I suppose.)","body":"Don&#39;t pollute your data model because you can&#39;t be bothered to make it work with your persistence engine. There are lots of resources on making GSON work with <code>LocalDate</code>, e.g. <a href=\"https://www.javaguides.net/2019/11/gson-localdatetime-localdate.html\" rel=\"nofollow noreferrer\">javaguides.net/2019/11/gson-localdatetime-localdate.html</a>. (Generally I favor Jackson over GSON as I think it understands the whole concept of encapsulation better, but that is just a preference, I suppose.)"},{"owner":{"account_id":21733462,"reputation":5,"user_id":16041815,"display_name":"Cicada3301"},"score":0,"creation_date":1667333348,"post_id":74279769,"comment_id":131141935,"body_markdown":"merci!! let me try :)","body":"merci!! let me try :)"}],"answers":[{"tags":[],"owner":{"account_id":14367834,"reputation":226,"user_id":10378322,"display_name":"Maran23"},"down_vote_count":1,"up_vote_count":0,"is_accepted":true,"score":-1,"last_activity_date":1667325885,"creation_date":1667325885,"answer_id":74280037,"question_id":74279769,"body_markdown":"You should either make the `tableColDate` be `TableColumn&lt;Booking, LocalDate&gt;`. Then you can remove the `toString()` call and everything works.\r\nThe reason is that `setValue()` expects a `LocalDate`, not a `String`.\r\n\r\nOr you parse the date when you are setting the `DatePicker`: `beginDate.setValue(LocalDate.parse(tableColDate.getCellData(index)))`.","title":"How to retrieve Datepicker Value from a selected cell in TableView","body":"<p>You should either make the <code>tableColDate</code> be <code>TableColumn&lt;Booking, LocalDate&gt;</code>. Then you can remove the <code>toString()</code> call and everything works.\nThe reason is that <code>setValue()</code> expects a <code>LocalDate</code>, not a <code>String</code>.</p>\n<p>Or you parse the date when you are setting the <code>DatePicker</code>: <code>beginDate.setValue(LocalDate.parse(tableColDate.getCellData(index)))</code>.</p>\n"}],"owner":{"account_id":21733462,"reputation":5,"user_id":16041815,"display_name":"Cicada3301"},"comment_count":9,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":133,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"accepted_answer_id":74280037,"answer_count":1,"score":-1,"last_activity_date":1667325885,"creation_date":1667324390,"question_id":74279769,"body_markdown":"Basically I have tableview and a FORM. I enter value in the form and they are displayed inside the table view via a database. It looks like this:  [FORM and TableView][1]\r\n\r\nWhen I click on the row to select it , I want to retrieve the DatePicker value from the column **Begin Datum** back to the Datepicker field.\r\n\r\nI have a onMouseClicked method like this to retrieve the text/vlaues from the selected row back to the FORM\r\n\r\n    @FXML\r\n    void getSelected(MouseEvent event) {\r\n\t\r\n\tindex = tableViewBooking.getSelectionModel().getSelectedIndex();\r\n\t\r\n\tif (index &lt;= -1) {\r\n\t\t\r\n\t\treturn;\r\n\t}\r\n\t\r\n\tbeginTime.setText(tableColSTime.getCellData(index).toString());\r\n\tendTime.setText(tableColETime.getCellData(index).toString());\r\n\tbeginDate.setValue(tableColDate.getCellData(index).toString()); // problem has somewith with `toString()?`\r\n\treminderDesc.setText(tableColName.getCellData(index).toString());\r\n\t\r\n\t\r\n    }\r\n\r\n Relevant primaryController code:\r\n\r\n    public class PrimaryController {\r\n        \r\n        ObservableList&lt;String&gt;  intervalList = \r\n\r\n    FXCollections.observableArrayList(&quot;T&#228;glich&quot;,&quot;Wochelich&quot;,&quot;Monatlich&quot;);\r\n            ObservableList&lt;String&gt;  projectTypeList = FXCollections.observableArrayList(&quot;ProjeKt Iot&quot;,&quot;Projekt Data &amp; Analytics&quot;,&quot;Projekt SAP Intelligent Enterprise&quot;,\r\n            \t\t&quot;Projekt Prozess &amp; Betrieb&quot;,&quot; Projekt Moderne Software Architekturen &quot;);\r\n            \r\n       \r\n    \r\n        @FXML\r\n        private DatePicker beginDate;\r\n    \r\n        @FXML\r\n        private TextField beginTime;\r\n    \r\n        @FXML\r\n        private Button clearButton;\r\n        \r\n        @FXML\r\n        private DatePicker endDate;\r\n    \r\n        @FXML\r\n        private TextField endTime;\r\n        \r\n        @FXML\r\n        private TextField reminderDesc;\r\n    \r\n        @FXML\r\n        private Button saveButton;\r\n        \r\n        @FXML\r\n        private ComboBox cycleComboBox;\r\n        \r\n        @FXML\r\n        private ComboBox projectComboBox;\r\n        \r\n        @FXML\r\n        private JFXListView&lt;String&gt; listofdata;\r\n        \r\n        @FXML\r\n        private Button modifyButton;\r\n        \r\n        @FXML\r\n        private ResourceBundle resources;\r\n    \r\n        @FXML\r\n        private URL url;\r\n        \r\n        // Table View\r\n        @FXML\r\n        public TableView&lt;Booking&gt; tableViewBooking;\r\n        \r\n        @FXML\r\n        public TableColumn&lt;Booking, String&gt; tableColName;\r\n        \r\n        @FXML\r\n        public TableColumn&lt;Booking, Double&gt; tableColHours;\r\n        \r\n        @FXML\r\n        public TableColumn&lt;Booking, String&gt; tableColType;\r\n        \r\n    //    @FXML\r\n    //    public TableColumn&lt;Booking, String&gt; tableColProj;\r\n        \r\n        @FXML\r\n        public TableColumn&lt;Booking, String&gt; tableColDate;\r\n        \r\n        @FXML\r\n        public TableColumn&lt;Booking, String&gt; tableColSTime;\r\n        \r\n        @FXML\r\n        public TableColumn&lt;Booking, String&gt; tableColETime;\r\n        \r\n        \r\n        \r\n        \r\n        int index = -1 ;\r\n        \r\n    \r\n        \r\n        \r\n        @FXML\r\n        public void initialize() throws IOException, ParseException {\r\n            cycleComboBox.setValue(&quot;T&#228;glich&quot;);\r\n            cycleComboBox.setItems(intervalList);\r\n            projectComboBox.setValue(&quot;Projekt Moderne Software Architekturen &quot;);\r\n            projectComboBox.setItems(projectTypeList);\r\n    \r\n           \r\n            \r\n            System.out.println(&quot;Inside initialize&quot;);\r\n            \r\n            tableColName.setCellValueFactory(new PropertyValueFactory&lt;&gt;(&quot;Name&quot;));\r\n            tableColDate.setCellValueFactory(new PropertyValueFactory&lt;&gt;(&quot;Date&quot;));\r\n            tableColSTime.setCellValueFactory(new PropertyValueFactory&lt;&gt;(&quot;startTime&quot;));\r\n            tableColETime.setCellValueFactory(new PropertyValueFactory&lt;&gt;(&quot;endTime&quot;));\r\n            tableColHours.setCellValueFactory(new PropertyValueFactory&lt;&gt;(&quot;Hours&quot;));\r\n            tableColType.setCellValueFactory(new PropertyValueFactory&lt;&gt;(&quot;Type&quot;));\r\n    \r\n            tableViewBooking.setItems(getTableBookings());\r\n            \r\n          \r\n            \r\n            \r\n        }\r\n\r\n\r\nthe problem here is that String is undefined type for Datepicker, it is LocalDate . So what to use here instead of .toString()?\r\n\r\n    beginDate.setValue(tableColDate.getCellData(index).toString());\r\n\r\n \r\n\r\n\r\n  [1]: https://i.stack.imgur.com/N3WAk.png","title":"How to retrieve Datepicker Value from a selected cell in TableView","body":"<p>Basically I have tableview and a FORM. I enter value in the form and they are displayed inside the table view via a database. It looks like this:  <a href=\"https://i.stack.imgur.com/N3WAk.png\" rel=\"nofollow noreferrer\">FORM and TableView</a></p>\n<p>When I click on the row to select it , I want to retrieve the DatePicker value from the column <strong>Begin Datum</strong> back to the Datepicker field.</p>\n<p>I have a onMouseClicked method like this to retrieve the text/vlaues from the selected row back to the FORM</p>\n<pre><code>@FXML\nvoid getSelected(MouseEvent event) {\n\nindex = tableViewBooking.getSelectionModel().getSelectedIndex();\n\nif (index &lt;= -1) {\n    \n    return;\n}\n\nbeginTime.setText(tableColSTime.getCellData(index).toString());\nendTime.setText(tableColETime.getCellData(index).toString());\nbeginDate.setValue(tableColDate.getCellData(index).toString()); // problem has somewith with `toString()?`\nreminderDesc.setText(tableColName.getCellData(index).toString());\n\n\n}\n</code></pre>\n<p>Relevant primaryController code:</p>\n<pre><code>public class PrimaryController {\n    \n    ObservableList&lt;String&gt;  intervalList = \n\nFXCollections.observableArrayList(&quot;Täglich&quot;,&quot;Wochelich&quot;,&quot;Monatlich&quot;);\n        ObservableList&lt;String&gt;  projectTypeList = FXCollections.observableArrayList(&quot;ProjeKt Iot&quot;,&quot;Projekt Data &amp; Analytics&quot;,&quot;Projekt SAP Intelligent Enterprise&quot;,\n                &quot;Projekt Prozess &amp; Betrieb&quot;,&quot; Projekt Moderne Software Architekturen &quot;);\n        \n   \n\n    @FXML\n    private DatePicker beginDate;\n\n    @FXML\n    private TextField beginTime;\n\n    @FXML\n    private Button clearButton;\n    \n    @FXML\n    private DatePicker endDate;\n\n    @FXML\n    private TextField endTime;\n    \n    @FXML\n    private TextField reminderDesc;\n\n    @FXML\n    private Button saveButton;\n    \n    @FXML\n    private ComboBox cycleComboBox;\n    \n    @FXML\n    private ComboBox projectComboBox;\n    \n    @FXML\n    private JFXListView&lt;String&gt; listofdata;\n    \n    @FXML\n    private Button modifyButton;\n    \n    @FXML\n    private ResourceBundle resources;\n\n    @FXML\n    private URL url;\n    \n    // Table View\n    @FXML\n    public TableView&lt;Booking&gt; tableViewBooking;\n    \n    @FXML\n    public TableColumn&lt;Booking, String&gt; tableColName;\n    \n    @FXML\n    public TableColumn&lt;Booking, Double&gt; tableColHours;\n    \n    @FXML\n    public TableColumn&lt;Booking, String&gt; tableColType;\n    \n//    @FXML\n//    public TableColumn&lt;Booking, String&gt; tableColProj;\n    \n    @FXML\n    public TableColumn&lt;Booking, String&gt; tableColDate;\n    \n    @FXML\n    public TableColumn&lt;Booking, String&gt; tableColSTime;\n    \n    @FXML\n    public TableColumn&lt;Booking, String&gt; tableColETime;\n    \n    \n    \n    \n    int index = -1 ;\n    \n\n    \n    \n    @FXML\n    public void initialize() throws IOException, ParseException {\n        cycleComboBox.setValue(&quot;Täglich&quot;);\n        cycleComboBox.setItems(intervalList);\n        projectComboBox.setValue(&quot;Projekt Moderne Software Architekturen &quot;);\n        projectComboBox.setItems(projectTypeList);\n\n       \n        \n        System.out.println(&quot;Inside initialize&quot;);\n        \n        tableColName.setCellValueFactory(new PropertyValueFactory&lt;&gt;(&quot;Name&quot;));\n        tableColDate.setCellValueFactory(new PropertyValueFactory&lt;&gt;(&quot;Date&quot;));\n        tableColSTime.setCellValueFactory(new PropertyValueFactory&lt;&gt;(&quot;startTime&quot;));\n        tableColETime.setCellValueFactory(new PropertyValueFactory&lt;&gt;(&quot;endTime&quot;));\n        tableColHours.setCellValueFactory(new PropertyValueFactory&lt;&gt;(&quot;Hours&quot;));\n        tableColType.setCellValueFactory(new PropertyValueFactory&lt;&gt;(&quot;Type&quot;));\n\n        tableViewBooking.setItems(getTableBookings());\n        \n      \n        \n        \n    }\n</code></pre>\n<p>the problem here is that String is undefined type for Datepicker, it is LocalDate . So what to use here instead of .toString()?</p>\n<pre><code>beginDate.setValue(tableColDate.getCellData(index).toString());\n</code></pre>\n"},{"tags":["java","arrays","class"],"comments":[{"owner":{"account_id":1622089,"reputation":17709,"user_id":1498427,"accept_rate":89,"display_name":"catch23"},"score":3,"creation_date":1667325239,"post_id":74279850,"comment_id":131139555,"body_markdown":"add some example of code with details what have you tried and what is expected result","body":"add some example of code with details what have you tried and what is expected result"}],"answers":[{"tags":[],"owner":{"account_id":5289146,"reputation":8128,"user_id":4222206,"display_name":"queeg"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1667325829,"creation_date":1667325829,"answer_id":74280029,"question_id":74279850,"body_markdown":"Just creating and populating an Array of Shape should not be too difficult.\r\nBe aware that Shape itself is abstract, so you need to populate the Array with concrete subclasses.\r\n\r\n    java.awt.Shape[] shapes = new java.awt.Shape[3];\r\n    shapes[0] =  new java.awt.Rectangle(0, 0, -1, -1);\r\n    shapes[1] = new java.awt.geom.Ellipse2D.Double(5, 3, 11, 11);\r\n    shapes[2] = new java.awt.geom.Line2D.Float(11, 5, 3, 7);","title":"create and fill an Shape type array in Java","body":"<p>Just creating and populating an Array of Shape should not be too difficult.\nBe aware that Shape itself is abstract, so you need to populate the Array with concrete subclasses.</p>\n<pre><code>java.awt.Shape[] shapes = new java.awt.Shape[3];\nshapes[0] =  new java.awt.Rectangle(0, 0, -1, -1);\nshapes[1] = new java.awt.geom.Ellipse2D.Double(5, 3, 11, 11);\nshapes[2] = new java.awt.geom.Line2D.Float(11, 5, 3, 7);\n</code></pre>\n"}],"owner":{"account_id":26798117,"reputation":21,"user_id":20390525,"display_name":"Alexandros Fourtounis"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":169,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1667325829,"creation_date":1667324869,"question_id":74279850,"body_markdown":"I want to create a Shape type array in a different class and fill the array with Shape objects\r\n\r\n\r\ntried to create a Sphere type of Shape but i cannot use the methods of the Sphere and Shape class","title":"create and fill an Shape type array in Java","body":"<p>I want to create a Shape type array in a different class and fill the array with Shape objects</p>\n<p>tried to create a Sphere type of Shape but i cannot use the methods of the Sphere and Shape class</p>\n"},{"tags":["java","groovy","cucumber","cucumber-java","cucumber-junit"],"answers":[{"tags":[],"owner":{"account_id":4895787,"reputation":10833,"user_id":3945473,"display_name":"M.P. Korstanje"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1660680797,"creation_date":1660680450,"answer_id":73379758,"question_id":73375212,"body_markdown":"Unfortunately what you&#39;re trying to do is not possible with JUnit 4. You can however use Cucumbers main method. The example below use the `maven-antrun-plugin`, but any other way to run a main method works.\r\n\r\nNote that the main method is a CLI application, so if you pass `--help` as an argument it will explain what it&#39;s options are.\r\n\r\nhttps://github.com/cucumber/cucumber-jvm/blob/main/examples/calculator-java-cli/pom.xml#L53\r\n\r\n```\r\n    &lt;build&gt;\r\n        &lt;plugins&gt;\r\n            &lt;plugin&gt;\r\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n                &lt;artifactId&gt;maven-antrun-plugin&lt;/artifactId&gt;\r\n                &lt;executions&gt;\r\n                    &lt;execution&gt;\r\n                        &lt;id&gt;cli-test&lt;/id&gt;\r\n                        &lt;phase&gt;test&lt;/phase&gt;\r\n                        &lt;goals&gt;\r\n                            &lt;goal&gt;run&lt;/goal&gt;\r\n                        &lt;/goals&gt;\r\n                        &lt;configuration&gt;\r\n                            &lt;target unless=&quot;maven.test.skip&quot;&gt;\r\n                                &lt;echo message=&quot;Running Cucumber through the CLI&quot; /&gt;\r\n                                &lt;java classname=&quot;io.cucumber.core.cli.Main&quot; fork=&quot;true&quot; failonerror=&quot;true&quot; newenvironment=&quot;true&quot; maxmemory=&quot;512m&quot; classpathref=&quot;maven.test.classpath&quot;&gt;\r\n                                    &lt;arg value=&quot;--plugin&quot; /&gt;\r\n                                    &lt;arg value=&quot;pretty&quot; /&gt;\r\n                                    &lt;arg value=&quot;--plugin&quot; /&gt;\r\n                                    &lt;arg value=&quot;html:target/results.html&quot; /&gt;\r\n                                    &lt;arg value=&quot;--plugin&quot; /&gt;\r\n                                    &lt;arg value=&quot;message:target/results.ndjson&quot; /&gt;\r\n                                &lt;/java&gt;\r\n                            &lt;/target&gt;\r\n                        &lt;/configuration&gt;\r\n                    &lt;/execution&gt;\r\n                &lt;/executions&gt;\r\n            &lt;/plugin&gt;\r\n        &lt;/plugins&gt;\r\n    &lt;/build&gt;\r\n```","title":"How to dynamically set cucumberOptions?","body":"<p>Unfortunately what you're trying to do is not possible with JUnit 4. You can however use Cucumbers main method. The example below use the <code>maven-antrun-plugin</code>, but any other way to run a main method works.</p>\n<p>Note that the main method is a CLI application, so if you pass <code>--help</code> as an argument it will explain what it's options are.</p>\n<p><a href=\"https://github.com/cucumber/cucumber-jvm/blob/main/examples/calculator-java-cli/pom.xml#L53\" rel=\"nofollow noreferrer\">https://github.com/cucumber/cucumber-jvm/blob/main/examples/calculator-java-cli/pom.xml#L53</a></p>\n<pre><code>    &lt;build&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                &lt;artifactId&gt;maven-antrun-plugin&lt;/artifactId&gt;\n                &lt;executions&gt;\n                    &lt;execution&gt;\n                        &lt;id&gt;cli-test&lt;/id&gt;\n                        &lt;phase&gt;test&lt;/phase&gt;\n                        &lt;goals&gt;\n                            &lt;goal&gt;run&lt;/goal&gt;\n                        &lt;/goals&gt;\n                        &lt;configuration&gt;\n                            &lt;target unless=&quot;maven.test.skip&quot;&gt;\n                                &lt;echo message=&quot;Running Cucumber through the CLI&quot; /&gt;\n                                &lt;java classname=&quot;io.cucumber.core.cli.Main&quot; fork=&quot;true&quot; failonerror=&quot;true&quot; newenvironment=&quot;true&quot; maxmemory=&quot;512m&quot; classpathref=&quot;maven.test.classpath&quot;&gt;\n                                    &lt;arg value=&quot;--plugin&quot; /&gt;\n                                    &lt;arg value=&quot;pretty&quot; /&gt;\n                                    &lt;arg value=&quot;--plugin&quot; /&gt;\n                                    &lt;arg value=&quot;html:target/results.html&quot; /&gt;\n                                    &lt;arg value=&quot;--plugin&quot; /&gt;\n                                    &lt;arg value=&quot;message:target/results.ndjson&quot; /&gt;\n                                &lt;/java&gt;\n                            &lt;/target&gt;\n                        &lt;/configuration&gt;\n                    &lt;/execution&gt;\n                &lt;/executions&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":14259806,"reputation":129,"user_id":10300966,"display_name":"Sachin G"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1667325804,"creation_date":1667325804,"answer_id":74280025,"question_id":73375212,"body_markdown":"You can remove the tags from your cucumber runner file and instead pass the tag from the command line `mvn clean test -Dcucumber.filter.tags=@myTest`. \r\n\r\nYou can find the examples here: \r\nhttps://cucumber.io/docs/cucumber/api/?lang=java#running-a-subset-of-scenarios\r\n","title":"How to dynamically set cucumberOptions?","body":"<p>You can remove the tags from your cucumber runner file and instead pass the tag from the command line <code>mvn clean test -Dcucumber.filter.tags=@myTest</code>.</p>\n<p>You can find the examples here:\n<a href=\"https://cucumber.io/docs/cucumber/api/?lang=java#running-a-subset-of-scenarios\" rel=\"nofollow noreferrer\">https://cucumber.io/docs/cucumber/api/?lang=java#running-a-subset-of-scenarios</a></p>\n"}],"owner":{"account_id":25898952,"reputation":21,"user_id":19625157,"display_name":"sb1234"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":482,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":2,"score":0,"last_activity_date":1667325804,"creation_date":1660658126,"question_id":73375212,"body_markdown":"I am trying to dynamically set the tags and the report locations so that I only need one testRunner. Note both are written in groovy, and I can only use up to JUnit 4.8 due to project constraints.\r\nThank you for any help in advance :)\r\n\r\n    //CucumberTestRunner\r\n        package cucumber\r\n        import io.cucumber.junit.Cucumber\r\n        import io.cucumber.junit.CucumberOptions\r\n        import org.junit.runner.RunWith\r\n        \r\n        @RunWith(Cucumber.class)\r\n        @CucumberOptions(\r\n                features = &quot;src/main/groovy/customFramework/dummyTests/cucumberTests/addDeal/&quot;,\r\n                glue = &quot;src/main/groovy/customFramework/testsPackage/cucumber/StepDefinitions/&quot;,\r\n                publish = false,\r\n                monochrome = true,\r\n                tags = &quot;${CucumberTestMaster.tag}&quot;,\r\n                plugin = [&quot;pretty&quot;, &quot;junit:target/JUNITReports/report.xml&quot;, &quot;html:target/HTMLReports/report.html&quot;,\r\n                        &quot;json:target/JSONReports/report.json&quot;]\r\n        )\r\n        class CucumberTestRunner {\r\n        }\r\n\r\n    //CucumberTestMasster\r\n    \r\n        package cucumber\r\n    \r\n    class CucumberTestMaster {\r\n        String tag=&quot;@Daily&quot;\r\n        static void main(String[] args) {\r\n            new CucumberTestRunner()\r\n        }\r\n    }\r\n\r\n","title":"How to dynamically set cucumberOptions?","body":"<p>I am trying to dynamically set the tags and the report locations so that I only need one testRunner. Note both are written in groovy, and I can only use up to JUnit 4.8 due to project constraints.\nThank you for any help in advance :)</p>\n<pre><code>//CucumberTestRunner\n    package cucumber\n    import io.cucumber.junit.Cucumber\n    import io.cucumber.junit.CucumberOptions\n    import org.junit.runner.RunWith\n    \n    @RunWith(Cucumber.class)\n    @CucumberOptions(\n            features = &quot;src/main/groovy/customFramework/dummyTests/cucumberTests/addDeal/&quot;,\n            glue = &quot;src/main/groovy/customFramework/testsPackage/cucumber/StepDefinitions/&quot;,\n            publish = false,\n            monochrome = true,\n            tags = &quot;${CucumberTestMaster.tag}&quot;,\n            plugin = [&quot;pretty&quot;, &quot;junit:target/JUNITReports/report.xml&quot;, &quot;html:target/HTMLReports/report.html&quot;,\n                    &quot;json:target/JSONReports/report.json&quot;]\n    )\n    class CucumberTestRunner {\n    }\n\n//CucumberTestMasster\n\n    package cucumber\n\nclass CucumberTestMaster {\n    String tag=&quot;@Daily&quot;\n    static void main(String[] args) {\n        new CucumberTestRunner()\n    }\n}\n</code></pre>\n"},{"tags":["java","spring-boot","maven","google-cloud-platform","google-cloud-logging"],"answers":[{"tags":[],"owner":{"account_id":9456016,"reputation":3926,"user_id":7031308,"display_name":"Donnald Cucharo"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1615430041,"creation_date":1615340934,"answer_id":66557274,"question_id":66555735,"body_markdown":"Configure Spring Cloud GCP Starter on your pom.xml:\r\n\r\n```\r\n&lt;dependencies&gt;\r\n  &lt;dependency&gt;\r\n    &lt;groupId&gt;com.google.cloud&lt;/groupId&gt;\r\n    &lt;artifactId&gt;spring-cloud-gcp-starter&lt;/artifactId&gt;\r\n  &lt;/dependency&gt;\r\n&lt;/dependencies&gt;\r\n\r\n...\r\n\r\n&lt;dependencyManagement&gt;\r\n  &lt;dependencies&gt;\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;com.google.cloud&lt;/groupId&gt;\r\n      &lt;artifactId&gt;spring-cloud-gcp-dependencies&lt;/artifactId&gt;\r\n      &lt;version&gt;2.0.1&lt;/version&gt;\r\n      &lt;type&gt;pom&lt;/type&gt;\r\n      &lt;scope&gt;import&lt;/scope&gt;\r\n    &lt;/dependency&gt;\r\n  &lt;/dependencies&gt;\r\n&lt;/dependencyManagement&gt;\r\n```\r\n\r\nThen you can set your credentials on **application.properties** using:\r\n```\r\nspring.cloud.gcp.project-id=[YOUR_GCP_PROJECT_ID]\r\nspring.cloud.gcp.credentials.location=file:[LOCAL_PRIVATE_KEY_FILE]\r\nspring.cloud.gcp.credentials.scopes=[SCOPE_1],[SCOPE_2],[SCOPE_3]\r\n```\r\n\r\n\r\n----------\r\nReference:\r\n\r\nhttps://github.com/GoogleCloudPlatform/spring-cloud-gcp","title":"Java Spring Boot don&#39;t connect with Google Cloud Logging, requires project ID","body":"<p>Configure Spring Cloud GCP Starter on your pom.xml:</p>\n<pre><code>&lt;dependencies&gt;\n  &lt;dependency&gt;\n    &lt;groupId&gt;com.google.cloud&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-cloud-gcp-starter&lt;/artifactId&gt;\n  &lt;/dependency&gt;\n&lt;/dependencies&gt;\n\n...\n\n&lt;dependencyManagement&gt;\n  &lt;dependencies&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;com.google.cloud&lt;/groupId&gt;\n      &lt;artifactId&gt;spring-cloud-gcp-dependencies&lt;/artifactId&gt;\n      &lt;version&gt;2.0.1&lt;/version&gt;\n      &lt;type&gt;pom&lt;/type&gt;\n      &lt;scope&gt;import&lt;/scope&gt;\n    &lt;/dependency&gt;\n  &lt;/dependencies&gt;\n&lt;/dependencyManagement&gt;\n</code></pre>\n<p>Then you can set your credentials on <strong>application.properties</strong> using:</p>\n<pre><code>spring.cloud.gcp.project-id=[YOUR_GCP_PROJECT_ID]\nspring.cloud.gcp.credentials.location=file:[LOCAL_PRIVATE_KEY_FILE]\nspring.cloud.gcp.credentials.scopes=[SCOPE_1],[SCOPE_2],[SCOPE_3]\n</code></pre>\n<hr />\n<p>Reference:</p>\n<p><a href=\"https://github.com/GoogleCloudPlatform/spring-cloud-gcp\" rel=\"nofollow noreferrer\">https://github.com/GoogleCloudPlatform/spring-cloud-gcp</a></p>\n"},{"tags":[],"owner":{"account_id":9754126,"reputation":1805,"user_id":7231449,"display_name":"acarlstein"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1667325650,"creation_date":1667325650,"answer_id":74280001,"question_id":66555735,"body_markdown":"I found an alternative solution that worked for me:\r\n\r\nFirst, make sure that the environment variable GOOGLE_CLOUD_PROJECT is setup, if it hasn&#39;t being setup.\r\n\r\nFor Spring Boot, you can do this by adding the line below, before `runApplication` is called:\r\n```kotlin\r\n System.setProperty(&quot;GOOGLE_CLOUD_PROJECT&quot;, &quot;your-project-id-goes-here&quot;)\r\n```\r\n\r\nThen, in the file `logback-spring.xml` you should add into your spring profile the following line:\r\n```xml\r\n&lt;property name=&quot;projectId&quot; value=&quot;${projectId:-${GOOGLE_CLOUD_PROJECT}}&quot;/&gt;\r\n```\r\n\r\nExample\r\n```xml\r\n&lt;configuration&gt;\r\n    &lt;springProfile name=&quot;cloud&quot;&gt;\r\n        &lt;property name=&quot;projectId&quot; value=&quot;${projectId:-${GOOGLE_CLOUD_PROJECT}}&quot;/&gt;\r\n        &lt;appender name=&quot;cloud&quot; class=&quot;com.google.cloud.logging.logback.LoggingAppender&quot;&gt;\r\n            &lt;redirectToStdout&gt;true&lt;/redirectToStdout&gt;\r\n        &lt;/appender&gt;\r\n        &lt;root level=&quot;debug&quot;&gt;\r\n            &lt;appender-ref ref=&quot;cloud&quot;/&gt;\r\n        &lt;/root&gt;\r\n    &lt;/springProfile&gt;\r\n    &lt;springProfile name=&quot;!cloud&quot;&gt;\r\n        &lt;!--- more configuration for non cloud profiles ---&gt;\r\n    &lt;/springProfile&gt;\r\n&lt;/configuration&gt;\r\n```\r\n\r\nIn this case, we use different profiles depending where our micro-service will run. So, I&#39;m only showing the cloud profile","title":"Java Spring Boot don&#39;t connect with Google Cloud Logging, requires project ID","body":"<p>I found an alternative solution that worked for me:</p>\n<p>First, make sure that the environment variable GOOGLE_CLOUD_PROJECT is setup, if it hasn't being setup.</p>\n<p>For Spring Boot, you can do this by adding the line below, before <code>runApplication</code> is called:</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code> System.setProperty(&quot;GOOGLE_CLOUD_PROJECT&quot;, &quot;your-project-id-goes-here&quot;)\n</code></pre>\n<p>Then, in the file <code>logback-spring.xml</code> you should add into your spring profile the following line:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;property name=&quot;projectId&quot; value=&quot;${projectId:-${GOOGLE_CLOUD_PROJECT}}&quot;/&gt;\n</code></pre>\n<p>Example</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;configuration&gt;\n    &lt;springProfile name=&quot;cloud&quot;&gt;\n        &lt;property name=&quot;projectId&quot; value=&quot;${projectId:-${GOOGLE_CLOUD_PROJECT}}&quot;/&gt;\n        &lt;appender name=&quot;cloud&quot; class=&quot;com.google.cloud.logging.logback.LoggingAppender&quot;&gt;\n            &lt;redirectToStdout&gt;true&lt;/redirectToStdout&gt;\n        &lt;/appender&gt;\n        &lt;root level=&quot;debug&quot;&gt;\n            &lt;appender-ref ref=&quot;cloud&quot;/&gt;\n        &lt;/root&gt;\n    &lt;/springProfile&gt;\n    &lt;springProfile name=&quot;!cloud&quot;&gt;\n        &lt;!--- more configuration for non cloud profiles ---&gt;\n    &lt;/springProfile&gt;\n&lt;/configuration&gt;\n</code></pre>\n<p>In this case, we use different profiles depending where our micro-service will run. So, I'm only showing the cloud profile</p>\n"}],"owner":{"account_id":20113567,"reputation":1,"user_id":14749501,"display_name":"Pablo Lievano Torres"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":2258,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1667325650,"creation_date":1615329057,"question_id":66555735,"body_markdown":"I try use Google Cloud Logging in my Spring Boot Java Project.\r\n\r\nI Include in the pom this dependencies:\r\n```\r\n&lt;dependency&gt;\r\n        &lt;groupId&gt;com.google.protobuf&lt;/groupId&gt;\r\n        &lt;artifactId&gt;protobuf-java&lt;/artifactId&gt;\r\n        &lt;version&gt;${google.protobuf.version}&lt;/version&gt;\r\n      &lt;/dependency&gt;\r\n      &lt;dependency&gt;\r\n        &lt;groupId&gt;com.google.cloud&lt;/groupId&gt;\r\n        &lt;artifactId&gt;google-cloud-logging-logback&lt;/artifactId&gt;\r\n        &lt;version&gt;${google.cloud.version}&lt;/version&gt;\r\n      &lt;/dependency&gt;\r\n      &lt;dependency&gt;\r\n        &lt;groupId&gt;ch.qos.logback&lt;/groupId&gt;\r\n        &lt;artifactId&gt;logback-core&lt;/artifactId&gt;\r\n        &lt;version&gt;${logback.version}&lt;/version&gt;\r\n      &lt;/dependency&gt;\r\n```\r\n\r\nWhen my project run, it obtain this error:\r\n```\r\nException in thread &quot;main&quot; java.lang.IllegalStateException: Logback configuration error detected: \r\nERROR in ch.qos.logback.core.joran.spi.Interpreter@12:16 - RuntimeException in Action for tag [appender] java.lang.IllegalArgumentException: A project ID is required for this service but could not be determined from the builder or the environment.  Please set a project ID using the builder.\r\n\tat org.springframework.boot.logging.logback.LogbackLoggingSystem.loadConfiguration(LogbackLoggingSystem.java:169)\r\n\tat org.springframework.boot.logging.logback.LogbackLoggingSystem.reinitialize(LogbackLoggingSystem.java:222)\r\n\tat org.springframework.boot.logging.AbstractLoggingSystem.initializeWithConventions(AbstractLoggingSystem.java:73)\r\n\tat org.springframework.boot.logging.AbstractLoggingSystem.initialize(AbstractLoggingSystem.java:60)\r\n\tat org.springframework.boot.logging.logback.LogbackLoggingSystem.initialize(LogbackLoggingSystem.java:118)\r\n\tat org.springframework.boot.context.logging.LoggingApplicationListener.initializeSystem(LoggingApplicationListener.java:313)\r\n\tat org.springframework.boot.context.logging.LoggingApplicationListener.initialize(LoggingApplicationListener.java:288)\r\n\tat org.springframework.boot.context.logging.LoggingApplicationListener.onApplicationEnvironmentPreparedEvent(LoggingApplicationListener.java:246)\r\n\tat org.springframework.boot.context.logging.LoggingApplicationListener.onApplicationEvent(LoggingApplicationListener.java:223)\r\n\tat org.springframework.context.event.SimpleApplicationEventMulticaster.doInvokeListener(SimpleApplicationEventMulticaster.java:172)\r\n\tat org.springframework.context.event.SimpleApplicationEventMulticaster.invokeListener(SimpleApplicationEventMulticaster.java:165)\r\n\tat org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:139)\r\n\tat org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:127)\r\n\tat org.springframework.boot.context.event.EventPublishingRunListener.environmentPrepared(EventPublishingRunListener.java:76)\r\n\tat org.springframework.boot.SpringApplicationRunListeners.environmentPrepared(SpringApplicationRunListeners.java:53)\r\n\tat org.springframework.boot.SpringApplication.prepareEnvironment(SpringApplication.java:345)\r\n\tat org.springframework.boot.SpringApplication.run(SpringApplication.java:308)\r\n\tat org.springframework.boot.builder.SpringApplicationBuilder.run(SpringApplicationBuilder.java:140)\r\n\tat org.springframework.cloud.bootstrap.BootstrapApplicationListener.bootstrapServiceContext(BootstrapApplicationListener.java:212)\r\n\tat org.springframework.cloud.bootstrap.BootstrapApplicationListener.onApplicationEvent(BootstrapApplicationListener.java:117)\r\n\tat org.springframework.cloud.bootstrap.BootstrapApplicationListener.onApplicationEvent(BootstrapApplicationListener.java:74)\r\n\tat org.springframework.context.event.SimpleApplicationEventMulticaster.doInvokeListener(SimpleApplicationEventMulticaster.java:172)\r\n\tat org.springframework.context.event.SimpleApplicationEventMulticaster.invokeListener(SimpleApplicationEventMulticaster.java:165)\r\n\tat org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:139)\r\n\tat org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:127)\r\n\tat org.springframework.boot.context.event.EventPublishingRunListener.environmentPrepared(EventPublishingRunListener.java:76)\r\n\tat org.springframework.boot.SpringApplicationRunListeners.environmentPrepared(SpringApplicationRunListeners.java:53)\r\n\tat org.springframework.boot.SpringApplication.prepareEnvironment(SpringApplication.java:345)\r\n\tat org.springframework.boot.SpringApplication.run(SpringApplication.java:308)\r\n\tat org.springframework.boot.SpringApplication.run(SpringApplication.java:1226)\r\n\tat org.springframework.boot.SpringApplication.run(SpringApplication.java:1215)\r\n\tat \r\n```\r\n\r\nI need to know how configure the Google credentials using the application.properties file.\r\n\r\nThanks.","title":"Java Spring Boot don&#39;t connect with Google Cloud Logging, requires project ID","body":"<p>I try use Google Cloud Logging in my Spring Boot Java Project.</p>\n<p>I Include in the pom this dependencies:</p>\n<pre><code>&lt;dependency&gt;\n        &lt;groupId&gt;com.google.protobuf&lt;/groupId&gt;\n        &lt;artifactId&gt;protobuf-java&lt;/artifactId&gt;\n        &lt;version&gt;${google.protobuf.version}&lt;/version&gt;\n      &lt;/dependency&gt;\n      &lt;dependency&gt;\n        &lt;groupId&gt;com.google.cloud&lt;/groupId&gt;\n        &lt;artifactId&gt;google-cloud-logging-logback&lt;/artifactId&gt;\n        &lt;version&gt;${google.cloud.version}&lt;/version&gt;\n      &lt;/dependency&gt;\n      &lt;dependency&gt;\n        &lt;groupId&gt;ch.qos.logback&lt;/groupId&gt;\n        &lt;artifactId&gt;logback-core&lt;/artifactId&gt;\n        &lt;version&gt;${logback.version}&lt;/version&gt;\n      &lt;/dependency&gt;\n</code></pre>\n<p>When my project run, it obtain this error:</p>\n<pre><code>Exception in thread &quot;main&quot; java.lang.IllegalStateException: Logback configuration error detected: \nERROR in ch.qos.logback.core.joran.spi.Interpreter@12:16 - RuntimeException in Action for tag [appender] java.lang.IllegalArgumentException: A project ID is required for this service but could not be determined from the builder or the environment.  Please set a project ID using the builder.\n    at org.springframework.boot.logging.logback.LogbackLoggingSystem.loadConfiguration(LogbackLoggingSystem.java:169)\n    at org.springframework.boot.logging.logback.LogbackLoggingSystem.reinitialize(LogbackLoggingSystem.java:222)\n    at org.springframework.boot.logging.AbstractLoggingSystem.initializeWithConventions(AbstractLoggingSystem.java:73)\n    at org.springframework.boot.logging.AbstractLoggingSystem.initialize(AbstractLoggingSystem.java:60)\n    at org.springframework.boot.logging.logback.LogbackLoggingSystem.initialize(LogbackLoggingSystem.java:118)\n    at org.springframework.boot.context.logging.LoggingApplicationListener.initializeSystem(LoggingApplicationListener.java:313)\n    at org.springframework.boot.context.logging.LoggingApplicationListener.initialize(LoggingApplicationListener.java:288)\n    at org.springframework.boot.context.logging.LoggingApplicationListener.onApplicationEnvironmentPreparedEvent(LoggingApplicationListener.java:246)\n    at org.springframework.boot.context.logging.LoggingApplicationListener.onApplicationEvent(LoggingApplicationListener.java:223)\n    at org.springframework.context.event.SimpleApplicationEventMulticaster.doInvokeListener(SimpleApplicationEventMulticaster.java:172)\n    at org.springframework.context.event.SimpleApplicationEventMulticaster.invokeListener(SimpleApplicationEventMulticaster.java:165)\n    at org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:139)\n    at org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:127)\n    at org.springframework.boot.context.event.EventPublishingRunListener.environmentPrepared(EventPublishingRunListener.java:76)\n    at org.springframework.boot.SpringApplicationRunListeners.environmentPrepared(SpringApplicationRunListeners.java:53)\n    at org.springframework.boot.SpringApplication.prepareEnvironment(SpringApplication.java:345)\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:308)\n    at org.springframework.boot.builder.SpringApplicationBuilder.run(SpringApplicationBuilder.java:140)\n    at org.springframework.cloud.bootstrap.BootstrapApplicationListener.bootstrapServiceContext(BootstrapApplicationListener.java:212)\n    at org.springframework.cloud.bootstrap.BootstrapApplicationListener.onApplicationEvent(BootstrapApplicationListener.java:117)\n    at org.springframework.cloud.bootstrap.BootstrapApplicationListener.onApplicationEvent(BootstrapApplicationListener.java:74)\n    at org.springframework.context.event.SimpleApplicationEventMulticaster.doInvokeListener(SimpleApplicationEventMulticaster.java:172)\n    at org.springframework.context.event.SimpleApplicationEventMulticaster.invokeListener(SimpleApplicationEventMulticaster.java:165)\n    at org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:139)\n    at org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:127)\n    at org.springframework.boot.context.event.EventPublishingRunListener.environmentPrepared(EventPublishingRunListener.java:76)\n    at org.springframework.boot.SpringApplicationRunListeners.environmentPrepared(SpringApplicationRunListeners.java:53)\n    at org.springframework.boot.SpringApplication.prepareEnvironment(SpringApplication.java:345)\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:308)\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:1226)\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:1215)\n    at \n</code></pre>\n<p>I need to know how configure the Google credentials using the application.properties file.</p>\n<p>Thanks.</p>\n"},{"tags":["java","resourcebundle"],"answers":[{"tags":[],"owner":{"account_id":794766,"reputation":158675,"user_id":871026,"accept_rate":76,"display_name":"Reimeus"},"down_vote_count":0,"up_vote_count":156,"is_accepted":true,"score":156,"last_activity_date":1448137187,"creation_date":1373456161,"answer_id":17569639,"question_id":17569608,"body_markdown":"Add an extra apostrophe `&#39;` to the `MessageFormat` pattern `String` to ensure the `&#39;` character is displayed\r\n\r\n    String text = \r\n         java.text.MessageFormat.format(&quot;You&#39;&#39;re about to delete {0} rows.&quot;, 5);\r\n                                             ^\r\n\r\nAn apostrophe (aka _single quote_) in a MessageFormat pattern starts a quoted string and is not interpreted on its own. From the [javadoc][1]\r\n\r\n&gt;  A single quote itself must be represented by doubled single quotes &#39;&#39; throughout a String.\r\n\r\nThe `String` `You\\\\&#39;re` is equivalent to adding a backslash character to the `String` so the only difference will be that `You\\re` will be produced rather than `Youre`. (before double quote solution `&#39;&#39;` applied)\r\n\r\n\r\n  [1]: http://docs.oracle.com/javase/7/docs/api/java/text/MessageFormat.html","title":"Format a message using MessageFormat.format() in Java","body":"<p>Add an extra apostrophe <code>'</code> to the <code>MessageFormat</code> pattern <code>String</code> to ensure the <code>'</code> character is displayed</p>\n\n<pre><code>String text = \n     java.text.MessageFormat.format(\"You''re about to delete {0} rows.\", 5);\n                                         ^\n</code></pre>\n\n<p>An apostrophe (aka <em>single quote</em>) in a MessageFormat pattern starts a quoted string and is not interpreted on its own. From the <a href=\"http://docs.oracle.com/javase/7/docs/api/java/text/MessageFormat.html\" rel=\"noreferrer\">javadoc</a></p>\n\n<blockquote>\n  <p>A single quote itself must be represented by doubled single quotes '' throughout a String.</p>\n</blockquote>\n\n<p>The <code>String</code> <code>You\\\\'re</code> is equivalent to adding a backslash character to the <code>String</code> so the only difference will be that <code>You\\re</code> will be produced rather than <code>Youre</code>. (before double quote solution <code>''</code> applied)</p>\n"},{"tags":[],"owner":{"account_id":42643,"reputation":426,"user_id":124288,"accept_rate":67,"display_name":"FOOM"},"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1373456713,"creation_date":1373456282,"answer_id":17569670,"question_id":17569608,"body_markdown":"You need to use double apostrophe instead of single in the &quot;You&#39;&#39;re&quot;, eg:\r\n\r\n    String text = java.text.MessageFormat.format(&quot;You&#39;&#39;re about to delete {0} rows.&quot;, 5);\r\n    System.out.println(text);","title":"Format a message using MessageFormat.format() in Java","body":"<p>You need to use double apostrophe instead of single in the \"You''re\", eg:</p>\n\n<pre><code>String text = java.text.MessageFormat.format(\"You''re about to delete {0} rows.\", 5);\nSystem.out.println(text);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2933165,"reputation":345,"user_id":2512788,"display_name":"Adhikari"},"down_vote_count":0,"up_vote_count":14,"is_accepted":false,"score":14,"last_activity_date":1373459980,"creation_date":1373457729,"answer_id":17570164,"question_id":17569608,"body_markdown":"Just be sure you have used double apostrophe  (&#39;&#39;)\r\n\r\n    String text = java.text.MessageFormat.format(&quot;You&#39;&#39;re about to delete {0} rows.&quot;, 5);\r\n    System.out.println(text);\r\n\r\n**Edit:**\r\n&gt; Within a String, a pair of single quotes can be used to quote any arbitrary characters except single quotes. For example, pattern string &quot;&#39;{0}&#39;&quot; represents string &quot;{0}&quot;, not a FormatElement.\r\n...\r\n\r\n&gt; Any unmatched quote is treated as closed at the end of the given pattern. For example, pattern string &quot;**&#39;**{0}&quot; is treated as pattern &quot;**&#39;**{0}**&#39;**&quot;.\r\n\r\nSource [http://docs.oracle.com/javase/7/docs/api/java/text/MessageFormat.html][1]\r\n\r\n\r\n  [1]: http://docs.oracle.com/javase/7/docs/api/java/text/MessageFormat.html","title":"Format a message using MessageFormat.format() in Java","body":"<p>Just be sure you have used double apostrophe  ('')</p>\n\n<pre><code>String text = java.text.MessageFormat.format(\"You''re about to delete {0} rows.\", 5);\nSystem.out.println(text);\n</code></pre>\n\n<p><strong>Edit:</strong></p>\n\n<blockquote>\n  <p>Within a String, a pair of single quotes can be used to quote any arbitrary characters except single quotes. For example, pattern string \"'{0}'\" represents string \"{0}\", not a FormatElement.\n  ...</p>\n  \n  <p>Any unmatched quote is treated as closed at the end of the given pattern. For example, pattern string \"<strong>'</strong>{0}\" is treated as pattern \"<strong>'</strong>{0}<strong>'</strong>\".</p>\n</blockquote>\n\n<p>Source <a href=\"http://docs.oracle.com/javase/7/docs/api/java/text/MessageFormat.html\" rel=\"noreferrer\">http://docs.oracle.com/javase/7/docs/api/java/text/MessageFormat.html</a></p>\n"},{"tags":[],"owner":{"account_id":288238,"reputation":14443,"user_id":588532,"accept_rate":88,"display_name":"Uriel Frankel"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1406713780,"creation_date":1406713780,"answer_id":25033725,"question_id":17569608,"body_markdown":"For everyone that has Android problems in the string.xml, use \\&#39;\\&#39; instead of single quote.","title":"Format a message using MessageFormat.format() in Java","body":"<p>For everyone that has Android problems in the string.xml, use \\'\\' instead of single quote.</p>\n"},{"tags":[],"owner":{"account_id":11176031,"reputation":51,"user_id":8201596,"display_name":"T Efron"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1513271274,"creation_date":1513270050,"answer_id":47818383,"question_id":17569608,"body_markdown":"Using an apostrophe `’` (Unicode: `\\u2019`) instead of a single quote `&#39;` fixed the issue without doubling the `\\&#39;`.\r\n","title":"Format a message using MessageFormat.format() in Java","body":"<p>Using an apostrophe <code>’</code> (Unicode: <code>\\u2019</code>) instead of a single quote <code>'</code> fixed the issue without doubling the <code>\\'</code>.</p>\n"},{"tags":[],"owner":{"account_id":5843862,"reputation":21,"user_id":5914293,"display_name":"Viktor Wellboy"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1602826760,"creation_date":1602826760,"answer_id":64383463,"question_id":17569608,"body_markdown":"Here is a method that does not require editing the code and works regardless of the number of characters.\r\n\r\n    String text = \r\n      java.text.MessageFormat.format(\r\n        &quot;You&#39;re about to delete {0} rows.&quot;.replaceAll(&quot;&#39;&quot;, &quot;&#39;&#39;&quot;), 5);","title":"Format a message using MessageFormat.format() in Java","body":"<p>Here is a method that does not require editing the code and works regardless of the number of characters.</p>\n<pre><code>String text = \n  java.text.MessageFormat.format(\n    &quot;You're about to delete {0} rows.&quot;.replaceAll(&quot;'&quot;, &quot;''&quot;), 5);\n</code></pre>\n"}],"owner":{"account_id":1482116,"reputation":27381,"user_id":1391249,"accept_rate":84,"display_name":"Tiny"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":163704,"favorite_count":0,"down_vote_count":1,"up_vote_count":98,"accepted_answer_id":17569639,"answer_count":6,"score":97,"last_activity_date":1667325552,"creation_date":1373456050,"question_id":17569608,"body_markdown":"I have stored some messages in a resource bundle. I&#39;m trying to format these messages as follows.\r\n\r\n    import java.text.MessageFormat;\r\n\r\n    String text = MessageFormat.format(&quot;You&#39;re about to delete {0} rows.&quot;, 5);\r\n    System.out.println(text);\r\n\r\nAssume that the first parameter i.e the actual message is stored in a property file which is somehow retrieved.\r\n\r\nThe second parameter i.e 5 is a dynamic value and should be placed in the placeholder `{0}` which doesn&#39;t happen. The next line prints,\r\n\r\n&gt; Youre about to delete {0} rows.\r\n\r\nThe placeholder is not replaced with the actual parameter.\r\n\r\n----------\r\n\r\nIt is the apostrophe here - `You&#39;re`. I have tried to escape it as usual like `You\\\\&#39;re` though it didn&#39;t work. What changes are needed to make it work? ","title":"Format a message using MessageFormat.format() in Java","body":"<p>I have stored some messages in a resource bundle. I'm trying to format these messages as follows.</p>\n\n<pre><code>import java.text.MessageFormat;\n\nString text = MessageFormat.format(\"You're about to delete {0} rows.\", 5);\nSystem.out.println(text);\n</code></pre>\n\n<p>Assume that the first parameter i.e the actual message is stored in a property file which is somehow retrieved.</p>\n\n<p>The second parameter i.e 5 is a dynamic value and should be placed in the placeholder <code>{0}</code> which doesn't happen. The next line prints,</p>\n\n<blockquote>\n  <p>Youre about to delete {0} rows.</p>\n</blockquote>\n\n<p>The placeholder is not replaced with the actual parameter.</p>\n\n<hr>\n\n<p>It is the apostrophe here - <code>You're</code>. I have tried to escape it as usual like <code>You\\\\'re</code> though it didn't work. What changes are needed to make it work? </p>\n"},{"tags":["java","automated-tests","cucumber","cucumber-junit"],"comments":[{"owner":{"account_id":4895787,"reputation":10833,"user_id":3945473,"display_name":"M.P. Korstanje"},"score":2,"creation_date":1662232063,"post_id":73584758,"comment_id":129960533,"body_markdown":"Short answer: This isn&#39;t possible.","body":"Short answer: This isn&#39;t possible."},{"owner":{"account_id":17048003,"reputation":358,"user_id":12334353,"display_name":"cdub"},"score":0,"creation_date":1662468854,"post_id":73584758,"comment_id":130008248,"body_markdown":"Darn, I was worried that would be the case","body":"Darn, I was worried that would be the case"}],"answers":[{"tags":[],"owner":{"account_id":14259806,"reputation":129,"user_id":10300966,"display_name":"Sachin G"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1667325437,"creation_date":1667325437,"answer_id":74279958,"question_id":73584758,"body_markdown":"I have a similar scenario where I intercept the Before and After calls to setup pre-requisites or to clean up the test environment. \r\nE.g. \r\n\r\n 1. If the cucumber scenario has @needsOktaUser tag, then before the test executes, the &#39;before hook&#39; creates an Okta user.\r\n 2. If the cucumber scenario has @deleteTenant tag, then after the test executes, the &#39;after hook&#39; deletes the newly created tenant.\r\n\r\nI hope this helps!\r\n\r\n    import io.cucumber.java.After;\r\n    import io.cucumber.java.Before;\r\n    \r\n    @Before(&quot;@needsOktaUser&quot;)\r\n        public void createUser() {\r\n            log.info(&quot;Creating user&quot;);\r\n            oktaAPISteps.createOktaUser(driver);\r\n        }\r\n    \r\n     @After(&quot;@deleteTenant&quot;)\r\n        public void deleteTenant() {\r\n            HaasAPICalls haasAPICalls = new HaasAPICalls();\r\n            haasAPICalls.deleteTenant(&quot;CreatedTenantId&quot;);\r\n        }","title":"Skip BeforeAll, Before, After Steps in Cucumber Conditionally","body":"<p>I have a similar scenario where I intercept the Before and After calls to setup pre-requisites or to clean up the test environment.\nE.g.</p>\n<ol>\n<li>If the cucumber scenario has @needsOktaUser tag, then before the test executes, the 'before hook' creates an Okta user.</li>\n<li>If the cucumber scenario has @deleteTenant tag, then after the test executes, the 'after hook' deletes the newly created tenant.</li>\n</ol>\n<p>I hope this helps!</p>\n<pre><code>import io.cucumber.java.After;\nimport io.cucumber.java.Before;\n\n@Before(&quot;@needsOktaUser&quot;)\n    public void createUser() {\n        log.info(&quot;Creating user&quot;);\n        oktaAPISteps.createOktaUser(driver);\n    }\n\n @After(&quot;@deleteTenant&quot;)\n    public void deleteTenant() {\n        HaasAPICalls haasAPICalls = new HaasAPICalls();\n        haasAPICalls.deleteTenant(&quot;CreatedTenantId&quot;);\n    }\n</code></pre>\n"}],"owner":{"account_id":17048003,"reputation":358,"user_id":12334353,"display_name":"cdub"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":602,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1667325437,"creation_date":1662131772,"question_id":73584758,"body_markdown":"I have a Cucumber feature that uses @BeforeAll, @Before, and @After Steps to connect and post data to a URL client. This is not necessary for the tests to actually run, just some book keeping on our end.\r\n\r\nRight now I have some try-catch blocks to make sure the client is running(it has a tendency to shutdown when we don&#39;t want it) and if an exception is thrown it just marks the Steps as PASSED and moves on to actually running the Scenarios.\r\n\r\nI would like to have the Step Status set to Skip instead of Passed and log a message so we can make note of the client being down again without failing the entire test suite, which is what it was doing before I added the try-catch to ignore the client failure.\r\n\r\nAnyway is this a really wordy way to ask.\r\nHow do I skip an @BeforeAll, @Before, and @After step based on a condition?\r\n\r\nStepDefs.java\r\n```java\r\nboolean isConnected = true;\r\n\r\n@BeforeAll()\r\npublic static void connectToClient(){\r\n    try{\r\n        client.Connect();\r\n    }\r\n    catch(Exception e){\r\n        isConnected = false;\r\n        System.out.println(e.getMessage());\r\n        //Skip @BeforeAll Step\r\n}\r\n\r\n@Before(order = 0)\r\npublic static void getBeforeData(Scenario scenario){\r\n    if(isConnected){ client.sendData(scenario); }\r\n    else { //Skip @Before Step }\r\n}\r\n\r\n@After(order = 0)\r\npublic static void legAfterData(Scenario scenario){\r\n    if(isConnected){ client.sendData(scenario) };\r\n    else { //Skip @After Step }\r\n\r\n}\r\n```","title":"Skip BeforeAll, Before, After Steps in Cucumber Conditionally","body":"<p>I have a Cucumber feature that uses @BeforeAll, @Before, and @After Steps to connect and post data to a URL client. This is not necessary for the tests to actually run, just some book keeping on our end.</p>\n<p>Right now I have some try-catch blocks to make sure the client is running(it has a tendency to shutdown when we don't want it) and if an exception is thrown it just marks the Steps as PASSED and moves on to actually running the Scenarios.</p>\n<p>I would like to have the Step Status set to Skip instead of Passed and log a message so we can make note of the client being down again without failing the entire test suite, which is what it was doing before I added the try-catch to ignore the client failure.</p>\n<p>Anyway is this a really wordy way to ask.\nHow do I skip an @BeforeAll, @Before, and @After step based on a condition?</p>\n<p>StepDefs.java</p>\n<pre class=\"lang-java prettyprint-override\"><code>boolean isConnected = true;\n\n@BeforeAll()\npublic static void connectToClient(){\n    try{\n        client.Connect();\n    }\n    catch(Exception e){\n        isConnected = false;\n        System.out.println(e.getMessage());\n        //Skip @BeforeAll Step\n}\n\n@Before(order = 0)\npublic static void getBeforeData(Scenario scenario){\n    if(isConnected){ client.sendData(scenario); }\n    else { //Skip @Before Step }\n}\n\n@After(order = 0)\npublic static void legAfterData(Scenario scenario){\n    if(isConnected){ client.sendData(scenario) };\n    else { //Skip @After Step }\n\n}\n</code></pre>\n"},{"tags":["java","apache-spark","apache-sedona"],"comments":[{"owner":{"account_id":4711512,"reputation":1278,"user_id":3811895,"display_name":"vinsce"},"score":0,"creation_date":1667323402,"post_id":74277710,"comment_id":131138900,"body_markdown":"Can you include the `StSafeUnionAggregator` class declaration and the exact error message?","body":"Can you include the <code>StSafeUnionAggregator</code> class declaration and the exact error message?"},{"owner":{"account_id":25345675,"reputation":33,"user_id":19589355,"display_name":"Glauber Dantas"},"score":0,"creation_date":1667325201,"post_id":74277710,"comment_id":131139539,"body_markdown":"I added the requested info; by the way, I created another question with more details but it got no comments or answers yet: https://stackoverflow.com/questions/74183571/how-to-register-a-new-user-defined-aggregate-function-with-custom-type-encoder-t","body":"I added the requested info; by the way, I created another question with more details but it got no comments or answers yet: <a href=\"https://stackoverflow.com/questions/74183571/how-to-register-a-new-user-defined-aggregate-function-with-custom-type-encoder-t\" title=\"how to register a new user defined aggregate function with custom type encoder t\">stackoverflow.com/questions/74183571/&hellip;</a>"}],"owner":{"account_id":25345675,"reputation":33,"user_id":19589355,"display_name":"Glauber Dantas"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":244,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1667325141,"creation_date":1667314077,"question_id":74277710,"body_markdown":"**I&#39;m using Java** and can register an UDF function, and it works:\r\n\r\n```\r\nUDF1&lt;Geometry, String&gt; stGetUTMZone = new StGetUTMZone();\r\nsparkSession.udf().register(&quot;ST_GetUTMZone&quot;, stGetUTMZone, DataTypes.StringType);\r\n```\r\n\r\nHowever, when I try registering an UDAF function, besides no compilation error is found, I get a runtime error due to datatype mismatch:\r\n\r\n```\r\nimport org.locationtech.jts.geom.Geometry;\r\nimport org.apache.spark.sql.Encoders;\r\n\r\nsparkSession.udf().register(&quot;ST_Safe_Union_Aggr&quot;,\r\n        functions.udaf(new StSafeUnionAggregator(), Encoders.javaSerialization(Geometry.class)));\r\n```\r\n\r\nI tried also using `Encoders.kryo()` and `Encoders.bean()` with no success.\r\n\r\nIs this the correct way for registering an UDAF function? I know Spark is written in Scala however I&#39;d like to avoid rewriting our jobs in Scala.\r\n\r\n\r\nI need to register an UDAF function in Java and tried using the `functions.udaf()` (Scala API) but it doesn&#39;t work as in Scala.\r\nIn Scala I would register the UDAF function using `functions.udaf(myFunc)` but in Java I cannot call it without passing 2 parameters.\r\n\r\nThis is the `StSafeUnionAggregator` definition:\r\n\r\n```\r\nimport org.apache.spark.sql.Encoder;\r\nimport org.apache.spark.sql.Encoders;\r\nimport org.apache.spark.sql.expressions.Aggregator;\r\nimport org.locationtech.jts.geom.Coordinate;\r\nimport org.locationtech.jts.geom.Geometry;\r\nimport org.locationtech.jts.geom.GeometryFactory;\r\n\r\n// An example of my UDAF (using Aggregator, not the deprecated UserDefinedFunction)\r\npublic class StSafeUnionAggregator extends Aggregator&lt;Geometry, Geometry, Geometry&gt; {\r\n    ...\r\n\r\n    // Specifies the Encoder for the intermediate value type\r\n    @Override\r\n    public Encoder&lt;Geometry&gt; bufferEncoder() {\r\n        return Encoders.javaSerialization(Geometry.class);\r\n    }\r\n\r\n    // Specifies the Encoder for the final output value type\r\n    @Override\r\n    public Encoder&lt;Geometry&gt; outputEncoder() {\r\n        return Encoders.javaSerialization(Geometry.class);\r\n    }\r\n\r\n    ...\r\n}\r\n```\r\n\r\nAnd this is the error message:\r\n\r\n```\r\nError: \r\ncannot resolve &#39;ST_Safe_Union_Aggr(geom_field)&#39; due to data type mismatch: \r\nargument 1 requires binary type, however, &#39;tmptableincomingdata.geom_field&#39; \r\nis of array&lt;tinyint&gt; type.; line 1 pos 79;\r\n```","title":"Spark Java: how to register a UDAF function using the new Aggregator&lt;IN, BUF, OUT&gt;","body":"<p><strong>I'm using Java</strong> and can register an UDF function, and it works:</p>\n<pre><code>UDF1&lt;Geometry, String&gt; stGetUTMZone = new StGetUTMZone();\nsparkSession.udf().register(&quot;ST_GetUTMZone&quot;, stGetUTMZone, DataTypes.StringType);\n</code></pre>\n<p>However, when I try registering an UDAF function, besides no compilation error is found, I get a runtime error due to datatype mismatch:</p>\n<pre><code>import org.locationtech.jts.geom.Geometry;\nimport org.apache.spark.sql.Encoders;\n\nsparkSession.udf().register(&quot;ST_Safe_Union_Aggr&quot;,\n        functions.udaf(new StSafeUnionAggregator(), Encoders.javaSerialization(Geometry.class)));\n</code></pre>\n<p>I tried also using <code>Encoders.kryo()</code> and <code>Encoders.bean()</code> with no success.</p>\n<p>Is this the correct way for registering an UDAF function? I know Spark is written in Scala however I'd like to avoid rewriting our jobs in Scala.</p>\n<p>I need to register an UDAF function in Java and tried using the <code>functions.udaf()</code> (Scala API) but it doesn't work as in Scala.\nIn Scala I would register the UDAF function using <code>functions.udaf(myFunc)</code> but in Java I cannot call it without passing 2 parameters.</p>\n<p>This is the <code>StSafeUnionAggregator</code> definition:</p>\n<pre><code>import org.apache.spark.sql.Encoder;\nimport org.apache.spark.sql.Encoders;\nimport org.apache.spark.sql.expressions.Aggregator;\nimport org.locationtech.jts.geom.Coordinate;\nimport org.locationtech.jts.geom.Geometry;\nimport org.locationtech.jts.geom.GeometryFactory;\n\n// An example of my UDAF (using Aggregator, not the deprecated UserDefinedFunction)\npublic class StSafeUnionAggregator extends Aggregator&lt;Geometry, Geometry, Geometry&gt; {\n    ...\n\n    // Specifies the Encoder for the intermediate value type\n    @Override\n    public Encoder&lt;Geometry&gt; bufferEncoder() {\n        return Encoders.javaSerialization(Geometry.class);\n    }\n\n    // Specifies the Encoder for the final output value type\n    @Override\n    public Encoder&lt;Geometry&gt; outputEncoder() {\n        return Encoders.javaSerialization(Geometry.class);\n    }\n\n    ...\n}\n</code></pre>\n<p>And this is the error message:</p>\n<pre><code>Error: \ncannot resolve 'ST_Safe_Union_Aggr(geom_field)' due to data type mismatch: \nargument 1 requires binary type, however, 'tmptableincomingdata.geom_field' \nis of array&lt;tinyint&gt; type.; line 1 pos 79;\n</code></pre>\n"},{"tags":["java","mongodb","reactor"],"answers":[{"tags":[],"owner":{"account_id":10010360,"reputation":21,"user_id":7403378,"display_name":"podolinsky.e"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1667325137,"creation_date":1667325137,"answer_id":74279892,"question_id":73907379,"body_markdown":"Finally, achieved right behaviour just with swap operators and use of Mono.defer:\r\n\r\n    return repo.findOneAndUpdateNotificationDate(moduleId, notificationFrequency)\r\n    .flatMap(module -&gt; notificationService.sendAlertEmail(module, moduleState))\r\n    .switchIfEmpty(Mono.defer(() -&gt; Mono.just(true)));\r\n\r\n","title":"should we use exceptions in reactor mono flow to match result typings?","body":"<p>Finally, achieved right behaviour just with swap operators and use of Mono.defer:</p>\n<pre><code>return repo.findOneAndUpdateNotificationDate(moduleId, notificationFrequency)\n.flatMap(module -&gt; notificationService.sendAlertEmail(module, moduleState))\n.switchIfEmpty(Mono.defer(() -&gt; Mono.just(true)));\n</code></pre>\n"}],"owner":{"account_id":10010360,"reputation":21,"user_id":7403378,"display_name":"podolinsky.e"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":67,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1667325137,"creation_date":1664533969,"question_id":73907379,"body_markdown":"I have a situation with strange(?) approach with mongo findOneAndUpdate:\r\nif filter matched - then update, if not - well ok:\r\n```\r\npublic Mono&lt;Module&gt; findOneAndUpdateNotificationDate(String moduleId, Duration frequency) {\r\n  Bson filter = and(\r\n    eq(ID, new ObjectId(moduleId)),\r\n    or(\r\n       exists(LAST_NOTIFICATION_DATE, false),\r\n       lt(LAST_NOTIFICATION_DATE, now.minus(frequency))\r\n    )\r\n  );\r\n  Bson updates = combine(\r\n    set(LAST_NOTIFICATION_DATE, now)\r\n  );\r\n  return Mono.from(collection.findOneAndUpdate(filter, updates));\r\n}\r\n```\r\nand service using it:\r\n```\r\nprivate Mono&lt;Boolean&gt; maybeSendNotification(String moduleId, ModuleState state) {\r\n  return repo.findOneAndUpdateNotificationDate(moduleId, notificationFrequency)\r\n    .switchIfEmpty(Mono.error(new NotFoundException()))\r\n    .flatMap(module -&gt; notificationService.sendAlertEmail(module, moduleState))\r\n    .onErrorResume(NotFoundException.class, e -&gt; Mono.just(true));\r\n  }\r\n```\r\nThe goal is to send email notification with some [frequency].\r\n\r\nWonder if the right way to use exceptions here? and how to do it correctly and not to break typings?","title":"should we use exceptions in reactor mono flow to match result typings?","body":"<p>I have a situation with strange(?) approach with mongo findOneAndUpdate:\nif filter matched - then update, if not - well ok:</p>\n<pre><code>public Mono&lt;Module&gt; findOneAndUpdateNotificationDate(String moduleId, Duration frequency) {\n  Bson filter = and(\n    eq(ID, new ObjectId(moduleId)),\n    or(\n       exists(LAST_NOTIFICATION_DATE, false),\n       lt(LAST_NOTIFICATION_DATE, now.minus(frequency))\n    )\n  );\n  Bson updates = combine(\n    set(LAST_NOTIFICATION_DATE, now)\n  );\n  return Mono.from(collection.findOneAndUpdate(filter, updates));\n}\n</code></pre>\n<p>and service using it:</p>\n<pre><code>private Mono&lt;Boolean&gt; maybeSendNotification(String moduleId, ModuleState state) {\n  return repo.findOneAndUpdateNotificationDate(moduleId, notificationFrequency)\n    .switchIfEmpty(Mono.error(new NotFoundException()))\n    .flatMap(module -&gt; notificationService.sendAlertEmail(module, moduleState))\n    .onErrorResume(NotFoundException.class, e -&gt; Mono.just(true));\n  }\n</code></pre>\n<p>The goal is to send email notification with some [frequency].</p>\n<p>Wonder if the right way to use exceptions here? and how to do it correctly and not to break typings?</p>\n"},{"tags":["java","algorithm"],"answers":[{"tags":[],"owner":{"account_id":26548593,"reputation":156,"user_id":20178298,"display_name":"kmeh"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1667325105,"creation_date":1667325105,"answer_id":74279887,"question_id":74279703,"body_markdown":"Why can&#39;t you subtract the first number from the total, and decrease count by 1?\r\n\r\n```\r\nimport java.util.*;\r\nimport java.math.*;\r\n\r\npublic class Main {\r\n    public static void main(String[] args) {\r\n        var count = 5;\r\n        var first = 50;\r\n        System.out.println(calc(first, count)); // [6.7, 13.3, 20.0, 26.7, 33.3]\r\n    }\r\n    private static List&lt;BigDecimal&gt; calc(double first, double count) {\r\n        double total = 100 - first; // Decrease total by first\r\n        count--; // Decrement\r\n        int multiplier = 0;\r\n        for (int i = 1; i &lt;= count; i++) {\r\n            multiplier+=i;\r\n        }\r\n        BigDecimal a = BigDecimal.valueOf(total / multiplier);\r\n        List&lt;BigDecimal&gt; list = new ArrayList&lt;&gt;();\r\n        list.add(BigDecimal.valueOf(first)); // Add first to list\r\n        BigDecimal b = BigDecimal.ZERO;\r\n        for (int i = 0; i &lt; count; i++) {\r\n            b = b.add(a);\r\n            list.add(b.setScale(1, RoundingMode.HALF_UP));\r\n        }\r\n        return list;\r\n    }\r\n}\r\n```","title":"Algorithm that shows n numbers whose sum is 100 with regression","body":"<p>Why can't you subtract the first number from the total, and decrease count by 1?</p>\n<pre><code>import java.util.*;\nimport java.math.*;\n\npublic class Main {\n    public static void main(String[] args) {\n        var count = 5;\n        var first = 50;\n        System.out.println(calc(first, count)); // [6.7, 13.3, 20.0, 26.7, 33.3]\n    }\n    private static List&lt;BigDecimal&gt; calc(double first, double count) {\n        double total = 100 - first; // Decrease total by first\n        count--; // Decrement\n        int multiplier = 0;\n        for (int i = 1; i &lt;= count; i++) {\n            multiplier+=i;\n        }\n        BigDecimal a = BigDecimal.valueOf(total / multiplier);\n        List&lt;BigDecimal&gt; list = new ArrayList&lt;&gt;();\n        list.add(BigDecimal.valueOf(first)); // Add first to list\n        BigDecimal b = BigDecimal.ZERO;\n        for (int i = 0; i &lt; count; i++) {\n            b = b.add(a);\n            list.add(b.setScale(1, RoundingMode.HALF_UP));\n        }\n        return list;\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":18370213,"reputation":25,"user_id":13380450,"display_name":"Евгений Малюков"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":40,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":74279887,"answer_count":1,"score":0,"last_activity_date":1667325105,"creation_date":1667323978,"question_id":74279703,"body_markdown":"I need an algorithm that accepts the total numbers count and the first number as input, where the sum of these numbers must be 100.\r\n\r\nExamples:\r\n\r\nInput:\r\ncount = 5,\r\nfirst = 50\r\n\r\nOutput must be something LIKE that:\r\n50, 30, 15, 3.5, 1.5\r\n\r\nInput:\r\ncount = 7,\r\nfirst = 30\r\n\r\nOutput must be something LIKE that:\r\n30, 25, 20, 10, 7.5, 5, 2.5\r\n\r\nit is not very important for me that the output is as I indicated it in the examples, it&#39;s all about\r\n\r\n\r\n\r\nI just do this code, and I can&#39;t figure out how to integrate the &quot;first&quot; variable to it:\r\n\r\n```\r\npublic class Main {\r\n    public static void main(String[] args) {\r\n        var count = 5;\r\n        var first = 50;\r\n        System.out.println(calc(first, count)); // [6.7, 13.3, 20.0, 26.7, 33.3]\r\n    }\r\n    private static List&lt;BigDecimal&gt; calc(double first, double count) {\r\n        double total = 100;\r\n        int multiplier = 0;\r\n        for (int i = 1; i &lt;= count; i++) {\r\n            multiplier+=i;\r\n        }\r\n        BigDecimal a = BigDecimal.valueOf(total / multiplier);\r\n        List&lt;BigDecimal&gt; list = new ArrayList&lt;&gt;();\r\n        BigDecimal b = BigDecimal.ZERO;\r\n        for (int i = 0; i &lt; count; i++) {\r\n            b = b.add(a);\r\n            list.add(b.setScale(1, RoundingMode.HALF_UP));\r\n        }\r\n        return list;\r\n    }\r\n}\r\n```\r\n","title":"Algorithm that shows n numbers whose sum is 100 with regression","body":"<p>I need an algorithm that accepts the total numbers count and the first number as input, where the sum of these numbers must be 100.</p>\n<p>Examples:</p>\n<p>Input:\ncount = 5,\nfirst = 50</p>\n<p>Output must be something LIKE that:\n50, 30, 15, 3.5, 1.5</p>\n<p>Input:\ncount = 7,\nfirst = 30</p>\n<p>Output must be something LIKE that:\n30, 25, 20, 10, 7.5, 5, 2.5</p>\n<p>it is not very important for me that the output is as I indicated it in the examples, it's all about</p>\n<p>I just do this code, and I can't figure out how to integrate the &quot;first&quot; variable to it:</p>\n<pre><code>public class Main {\n    public static void main(String[] args) {\n        var count = 5;\n        var first = 50;\n        System.out.println(calc(first, count)); // [6.7, 13.3, 20.0, 26.7, 33.3]\n    }\n    private static List&lt;BigDecimal&gt; calc(double first, double count) {\n        double total = 100;\n        int multiplier = 0;\n        for (int i = 1; i &lt;= count; i++) {\n            multiplier+=i;\n        }\n        BigDecimal a = BigDecimal.valueOf(total / multiplier);\n        List&lt;BigDecimal&gt; list = new ArrayList&lt;&gt;();\n        BigDecimal b = BigDecimal.ZERO;\n        for (int i = 0; i &lt; count; i++) {\n            b = b.add(a);\n            list.add(b.setScale(1, RoundingMode.HALF_UP));\n        }\n        return list;\n    }\n}\n</code></pre>\n"},{"tags":["java","android","2d","render","libgdx"],"comments":[{"owner":{"account_id":930575,"reputation":24689,"user_id":960524,"accept_rate":89,"display_name":"P.T."},"score":0,"creation_date":1343758283,"post_id":11737426,"comment_id":15591675,"body_markdown":"I&#39;ve seen a similar exception when I have messed up my mesh definitions (either forgetting to load verticies or setting the length to zero).  So, most likely something is incorrect with your tile map definition.  Check to see if there are size/scale requirements (like power of 2 or minimum of X, or something like that) that you are not meeting.","body":"I&#39;ve seen a similar exception when I have messed up my mesh definitions (either forgetting to load verticies or setting the length to zero).  So, most likely something is incorrect with your tile map definition.  Check to see if there are size/scale requirements (like power of 2 or minimum of X, or something like that) that you are not meeting."},{"owner":{"account_id":1332839,"reputation":9052,"user_id":1276306,"accept_rate":91,"display_name":"Mick&#228;el A."},"score":0,"creation_date":1343760705,"post_id":11737426,"comment_id":15592711,"body_markdown":"Thanks for your answer. I just checked and everything if a power of 2: the viewport of the camera, the size of every tile and the size of my level.png containing all the tiles packed in one image. Only the map size didn&#39;t fit, but changing it didn&#39;t solve my problem, anyway the tutorial use a map of 60*15 so the map which displays doesn&#39;t either.","body":"Thanks for your answer. I just checked and everything if a power of 2: the viewport of the camera, the size of every tile and the size of my level.png containing all the tiles packed in one image. Only the map size didn&#39;t fit, but changing it didn&#39;t solve my problem, anyway the tutorial use a map of 60*15 so the map which displays doesn&#39;t either."}],"answers":[{"tags":[],"owner":{"account_id":1332839,"reputation":9052,"user_id":1276306,"accept_rate":91,"display_name":"Mick&#228;el A."},"down_vote_count":0,"up_vote_count":9,"is_accepted":true,"score":9,"last_activity_date":1667324781,"creation_date":1343761752,"answer_id":11747244,"question_id":11737426,"body_markdown":"I found what caused the error :&lt;br /&gt;\r\n1) all the tiles in my &quot;packfile&quot; had -1 as their index&lt;br /&gt;\r\n2) all the tiles in my &quot;packfile&quot; had the same name as their original tile file name, but not the same name as the .png file containing all the tiles packed.&lt;br /&gt;\r\n\r\nCurrently my screen is black so I think no tile is draw (probably because I gave random indexes to the tiles in the packfile - **fixed, see the end of the post**) but no exceptions are thrown and that&#39;s the point.\r\n\r\nThose mistakes are due to the program I used to pack the tiles that was supposed to make me win time lol. So I will try different options or use something else.&lt;br /&gt;\r\nIf you want to know the program was &quot;TexturePacker GUI&quot; v3.1.0.&lt;br /&gt;\r\n\r\nIf you know what options I should/not use to avoid errors please let me know.&lt;br /&gt;\r\n\r\n**EDIT :** Found a usefull and working tool for packing tiles, here it is : &lt;s&gt;http://freigabe.philweb.de/bubblr/texturepacker_edited.jar&lt;/s&gt;  \r\n(link is dead ; use [this one][1] instead. or [another packing tool][2])\r\n\r\nTo use it open cmd and go to the directory where your downloaded the .jar file and then : \r\n\r\n    //You should create, in the same directory of the .jar file, two additionnal folders\r\n    //Call the first folder &#39;input&#39; and put in all your tiles (rename them &quot;level_1.png&quot;, &quot;level_..&quot;)\r\n    //Call the 2nd folder &#39;output&#39; and leave it empty\r\n    //Then just type in the command prompt : java -jar nameOfDownloadedJarFile.jar input output level\r\n    //Then rename the &quot;input1.png&quot; into &quot;level.png&quot;, and &quot;level.pack&quot; into &quot;level packfile&quot;\r\n    //Open &quot;level packfile&quot; with notepad and change &quot;input1.png&quot; into &quot;level.png&quot;\r\n    //Then draw your map using &quot;level.png&quot; in TiledMapEditor\r\n    //Then just follow dpk&#39; tutorial for rendering the map and it should work\r\n\r\nHere is dpk&#39;s tutorial I mentioned, just follow from here : http://dpk.net/2011/05/01/libgdx-box2d-tiled-maps-full-working-example-part-1/#p4\r\n\r\nIf application doesn&#39;t crashes but the screen is black, just increase camera&#39;s viewport&#39;s width &amp; height.\r\n\r\nHappy mapping :) !\r\n\r\n\r\n  [1]: https://dl.dropboxusercontent.com/u/69374102/texturepacker-gui-3.1.0.zip\r\n  [2]: https://dl.dropboxusercontent.com/u/69374102/TilePacker.jar","title":"LibGDX - Application crashes when call TiledMapRenderer.render()","body":"<p>I found what caused the error :<br /></p>\n<ol>\n<li>all the tiles in my &quot;packfile&quot; had -1 as their index<br /></li>\n<li>all the tiles in my &quot;packfile&quot; had the same name as their original tile file name, but not the same name as the .png file containing all the tiles packed.<br /></li>\n</ol>\n<p>Currently my screen is black so I think no tile is draw (probably because I gave random indexes to the tiles in the packfile - <strong>fixed, see the end of the post</strong>) but no exceptions are thrown and that's the point.</p>\n<p>Those mistakes are due to the program I used to pack the tiles that was supposed to make me win time lol. So I will try different options or use something else.<br />\nIf you want to know the program was &quot;TexturePacker GUI&quot; v3.1.0.<br /></p>\n<p>If you know what options I should/not use to avoid errors please let me know.<br /></p>\n<p><strong>EDIT :</strong> Found a usefull and working tool for packing tiles, here it is : <s>http://freigabe.philweb.de/bubblr/texturepacker_edited.jar</s><br />\n(link is dead ; use <a href=\"https://dl.dropboxusercontent.com/u/69374102/texturepacker-gui-3.1.0.zip\" rel=\"nofollow noreferrer\">this one</a> instead. or <a href=\"https://dl.dropboxusercontent.com/u/69374102/TilePacker.jar\" rel=\"nofollow noreferrer\">another packing tool</a>)</p>\n<p>To use it open cmd and go to the directory where your downloaded the .jar file and then :</p>\n<pre><code>//You should create, in the same directory of the .jar file, two additionnal folders\n//Call the first folder 'input' and put in all your tiles (rename them &quot;level_1.png&quot;, &quot;level_..&quot;)\n//Call the 2nd folder 'output' and leave it empty\n//Then just type in the command prompt : java -jar nameOfDownloadedJarFile.jar input output level\n//Then rename the &quot;input1.png&quot; into &quot;level.png&quot;, and &quot;level.pack&quot; into &quot;level packfile&quot;\n//Open &quot;level packfile&quot; with notepad and change &quot;input1.png&quot; into &quot;level.png&quot;\n//Then draw your map using &quot;level.png&quot; in TiledMapEditor\n//Then just follow dpk' tutorial for rendering the map and it should work\n</code></pre>\n<p>Here is dpk's tutorial I mentioned, just follow from here : <a href=\"http://dpk.net/2011/05/01/libgdx-box2d-tiled-maps-full-working-example-part-1/#p4\" rel=\"nofollow noreferrer\">http://dpk.net/2011/05/01/libgdx-box2d-tiled-maps-full-working-example-part-1/#p4</a></p>\n<p>If application doesn't crashes but the screen is black, just increase camera's viewport's width &amp; height.</p>\n<p>Happy mapping :) !</p>\n"}],"owner":{"account_id":1332839,"reputation":9052,"user_id":1276306,"accept_rate":91,"display_name":"Mick&#228;el A."},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":4283,"favorite_count":0,"down_vote_count":0,"up_vote_count":7,"accepted_answer_id":11747244,"answer_count":1,"score":7,"last_activity_date":1667324781,"creation_date":1343728291,"question_id":11737426,"body_markdown":"    @Override\r\n    public void render(float delta) {\r\n        Gdx.gl.glClear(GL10.GL_COLOR_BUFFER_BIT);\r\n\r\n        camera.update();\r\n        sprite.setProjectionMatrix(camera.combined);\r\n\t\t\r\n        mLevel.getTiledMapRenderer().getProjectionMatrix().set(camera.combined);\r\n        Vector3 tmp = new Vector3();\r\n        tmp.set(0, 0, 0);\r\n        camera.unproject(tmp);\r\n        mLevel.getTiledMapRenderer().render(tmp.x, tmp.y, camera.viewportWidth, camera.viewportHeight);\r\n\r\n        sprite.begin();\r\n        ...\r\n        sprite.end();\r\n    }\r\n\r\nHere is what I get when launching the desktop version :\r\n\r\n    Exception in thread &quot;LWJGL Application&quot; java.lang.IllegalArgumentException: Number of remaining buffer elements is 0, must be at least 1. Because at most 1 elements can be returned, a buffer with at least 1 elements is required, regardless of actual returned element count\r\n    \tat org.lwjgl.BufferChecks.throwBufferSizeException(BufferChecks.java:162)\r\n    \tat org.lwjgl.BufferChecks.checkBufferSize(BufferChecks.java:189)\r\n    \tat org.lwjgl.BufferChecks.checkBuffer(BufferChecks.java:230)\r\n    \tat org.lwjgl.opengl.GL15.glBufferData(GL15.java:141)\r\n    \tat com.badlogic.gdx.backends.lwjgl.LwjglGL20.glBufferData(LwjglGL20.java:93)\r\n    \tat com.badlogic.gdx.graphics.glutils.VertexBufferObject.bind(VertexBufferObject.java:208)\r\n    \tat com.badlogic.gdx.graphics.Mesh.bind(Mesh.java:268)\r\n    \tat com.badlogic.gdx.graphics.g2d.SpriteCache.begin(SpriteCache.java:868)\r\n    \tat com.badlogic.gdx.graphics.g2d.tiled.TileMapRenderer.render(TileMapRenderer.java:336)\r\n    \tat com.badlogic.gdx.graphics.g2d.tiled.TileMapRenderer.render(TileMapRenderer.java:286)\r\n    \tat com.crunsh.libgdx.screens.GameScreen.render(GameScreen.java:102)\r\n    \tat com.badlogic.gdx.Game.render(Game.java:46)\r\n    \tat com.badlogic.gdx.backends.lwjgl.LwjglApplication.mainLoop(LwjglApplication.java:202)\r\n    \tat com.badlogic.gdx.backends.lwjgl.LwjglApplication$1.run(LwjglApplication.java:131)\r\n\r\nI&#39;ve tried both [this tuto][1] and [this one][2], and I get the same error at the same line `mLevel.getTiledMapRenderer().render(tmp.x, tmp.y, camera.viewportWidth, camera.viewportHeight);`.\r\n\r\n\r\n  [1]: http://code.google.com/p/libgdx-users/wiki/Tiles#Render\r\n  [2]: http://dpk.net/2011/05/01/libgdx-box2d-tiled-maps-full-working-example-part-1/#p5\r\n\r\n**EDIT :** I just noticed that the data of my .tmx file was automatically encoded by Tiled Map Editor, so I just desactivated it, but still get the same error.&lt;br /&gt;\r\nIf I copy/paste [this project][2] (I mean the whole project, not only the render() method) it works but when I try to load my own map in my own project it just crashes ...&lt;br /&gt;\r\n\r\nSo after that I decided to simplify my `render()` method by just doing like the link I gave before and by using the `TiledMapHelper class` the author provide, so there is my `render()` method now:\r\n\r\n    mHelper.getCamera().update();\r\n    mHelper.render();\r\n\r\nStill crashiiiiiiiiiiiiiingg.....&lt;br /&gt;\r\nIf someone can please provide some help it would be greatly appreciated because atm i&#39;m really going mad !","title":"LibGDX - Application crashes when call TiledMapRenderer.render()","body":"<pre><code>@Override\npublic void render(float delta) {\n    Gdx.gl.glClear(GL10.GL_COLOR_BUFFER_BIT);\n\n    camera.update();\n    sprite.setProjectionMatrix(camera.combined);\n\n    mLevel.getTiledMapRenderer().getProjectionMatrix().set(camera.combined);\n    Vector3 tmp = new Vector3();\n    tmp.set(0, 0, 0);\n    camera.unproject(tmp);\n    mLevel.getTiledMapRenderer().render(tmp.x, tmp.y, camera.viewportWidth, camera.viewportHeight);\n\n    sprite.begin();\n    ...\n    sprite.end();\n}\n</code></pre>\n\n<p>Here is what I get when launching the desktop version :</p>\n\n<pre><code>Exception in thread \"LWJGL Application\" java.lang.IllegalArgumentException: Number of remaining buffer elements is 0, must be at least 1. Because at most 1 elements can be returned, a buffer with at least 1 elements is required, regardless of actual returned element count\n    at org.lwjgl.BufferChecks.throwBufferSizeException(BufferChecks.java:162)\n    at org.lwjgl.BufferChecks.checkBufferSize(BufferChecks.java:189)\n    at org.lwjgl.BufferChecks.checkBuffer(BufferChecks.java:230)\n    at org.lwjgl.opengl.GL15.glBufferData(GL15.java:141)\n    at com.badlogic.gdx.backends.lwjgl.LwjglGL20.glBufferData(LwjglGL20.java:93)\n    at com.badlogic.gdx.graphics.glutils.VertexBufferObject.bind(VertexBufferObject.java:208)\n    at com.badlogic.gdx.graphics.Mesh.bind(Mesh.java:268)\n    at com.badlogic.gdx.graphics.g2d.SpriteCache.begin(SpriteCache.java:868)\n    at com.badlogic.gdx.graphics.g2d.tiled.TileMapRenderer.render(TileMapRenderer.java:336)\n    at com.badlogic.gdx.graphics.g2d.tiled.TileMapRenderer.render(TileMapRenderer.java:286)\n    at com.crunsh.libgdx.screens.GameScreen.render(GameScreen.java:102)\n    at com.badlogic.gdx.Game.render(Game.java:46)\n    at com.badlogic.gdx.backends.lwjgl.LwjglApplication.mainLoop(LwjglApplication.java:202)\n    at com.badlogic.gdx.backends.lwjgl.LwjglApplication$1.run(LwjglApplication.java:131)\n</code></pre>\n\n<p>I've tried both <a href=\"http://code.google.com/p/libgdx-users/wiki/Tiles#Render\" rel=\"noreferrer\">this tuto</a> and <a href=\"http://dpk.net/2011/05/01/libgdx-box2d-tiled-maps-full-working-example-part-1/#p5\" rel=\"noreferrer\">this one</a>, and I get the same error at the same line <code>mLevel.getTiledMapRenderer().render(tmp.x, tmp.y, camera.viewportWidth, camera.viewportHeight);</code>.</p>\n\n<p><strong>EDIT :</strong> I just noticed that the data of my .tmx file was automatically encoded by Tiled Map Editor, so I just desactivated it, but still get the same error.<br />\nIf I copy/paste <a href=\"http://dpk.net/2011/05/01/libgdx-box2d-tiled-maps-full-working-example-part-1/#p5\" rel=\"noreferrer\">this project</a> (I mean the whole project, not only the render() method) it works but when I try to load my own map in my own project it just crashes ...<br /></p>\n\n<p>So after that I decided to simplify my <code>render()</code> method by just doing like the link I gave before and by using the <code>TiledMapHelper class</code> the author provide, so there is my <code>render()</code> method now:</p>\n\n<pre><code>mHelper.getCamera().update();\nmHelper.render();\n</code></pre>\n\n<p>Still crashiiiiiiiiiiiiiingg.....<br />\nIf someone can please provide some help it would be greatly appreciated because atm i'm really going mad !</p>\n"},{"tags":["java","arrays","object","inheritance","polymorphism"],"answers":[{"tags":[],"owner":{"account_id":5049794,"reputation":631,"user_id":4054720,"display_name":"Ben Borchard"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1667324484,"creation_date":1667313499,"answer_id":74277591,"question_id":74277485,"body_markdown":"Your `mostExpensive` and `leastExpensive` variables seem to be representing both the index of your max and min priced `Uav` objects in the array and the price of the max and min price of all `Uav` objects.\r\n\r\nYou should track the min/max price (type `double`) and index of min/max priced `Uav` object (type `int`) separately, perhaps in variables that look like these:\r\n\r\n```\r\nint maxPricedUavIndex;\r\nint minPricedUavIndex;\r\ndouble maxPrice = 0d;\r\ndouble minPrice = Double.MAX_VALUE;\r\n```\r\n\r\nYou would assign `maxPricedUavIndex` and `minPricedUavIndex` to the value of the index `i` where appropriate, and you would assign `maxPrice` and `minPrice` to `a.getPrice()` where appropriate","title":"How to display least and most expensive from array in Java","body":"<p>Your <code>mostExpensive</code> and <code>leastExpensive</code> variables seem to be representing both the index of your max and min priced <code>Uav</code> objects in the array and the price of the max and min price of all <code>Uav</code> objects.</p>\n<p>You should track the min/max price (type <code>double</code>) and index of min/max priced <code>Uav</code> object (type <code>int</code>) separately, perhaps in variables that look like these:</p>\n<pre><code>int maxPricedUavIndex;\nint minPricedUavIndex;\ndouble maxPrice = 0d;\ndouble minPrice = Double.MAX_VALUE;\n</code></pre>\n<p>You would assign <code>maxPricedUavIndex</code> and <code>minPricedUavIndex</code> to the value of the index <code>i</code> where appropriate, and you would assign <code>maxPrice</code> and <code>minPrice</code> to <code>a.getPrice()</code> where appropriate</p>\n"},{"tags":[],"owner":{"account_id":18911549,"reputation":600,"user_id":13797513,"display_name":"chptr-one"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1667315424,"creation_date":1667315424,"answer_id":74277993,"question_id":74277485,"body_markdown":"Another way using StreamAPI:\r\n\r\n```\r\nvar stat = Arrays.stream(flyingObjects)\r\n                .filter(o -&gt; o instanceof UAV)\r\n                .collect(Collectors.teeing(\r\n                        Collectors.minBy(Comparator.comparingDouble(FlyingObject::getPrice)),\r\n                        Collectors.maxBy(Comparator.comparingDouble(FlyingObject::getPrice)),\r\n                        (min, max) -&gt; new MinMaxStatistic&lt;&gt;(min.orElse(null), max.orElse(null))));\r\n\r\nFlyingObject min = stat.min;\r\nFlyingObject max = stat.max;\r\n```\r\nand you&#39;ll need a class to collect statistics\r\n```\r\nclass MinMaxStatistic&lt;T&gt; {\r\n    T min;\r\n    T max;\r\n\r\n    public MinMaxStatistic(T min, T max) {\r\n        this.min = min;\r\n        this.max = max;\r\n    }\r\n}\r\n```","title":"How to display least and most expensive from array in Java","body":"<p>Another way using StreamAPI:</p>\n<pre><code>var stat = Arrays.stream(flyingObjects)\n                .filter(o -&gt; o instanceof UAV)\n                .collect(Collectors.teeing(\n                        Collectors.minBy(Comparator.comparingDouble(FlyingObject::getPrice)),\n                        Collectors.maxBy(Comparator.comparingDouble(FlyingObject::getPrice)),\n                        (min, max) -&gt; new MinMaxStatistic&lt;&gt;(min.orElse(null), max.orElse(null))));\n\nFlyingObject min = stat.min;\nFlyingObject max = stat.max;\n</code></pre>\n<p>and you'll need a class to collect statistics</p>\n<pre><code>class MinMaxStatistic&lt;T&gt; {\n    T min;\n    T max;\n\n    public MinMaxStatistic(T min, T max) {\n        this.min = min;\n        this.max = max;\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":23243157,"reputation":17,"user_id":17332091,"display_name":"Aymane Aaquil"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":131,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":74277591,"answer_count":2,"score":1,"last_activity_date":1667324484,"creation_date":1667313027,"question_id":74277485,"body_markdown":"So I have an array of 15 Flying Objects, The flyingObjects class consists of 1 variable (Price: Double) with its getters and setters.\r\nI also have an airplane class that extends FlyingObjects, a helicopter class that extends Airplane and quadrotor and multirotor class that extends helicopter. On the other side of the tree I have a UAV class that extends FlyingObjects, a MAV class that extends UAV and a AD class that extends UAV.\r\n\r\nHere is the array: \r\n\r\n        FlyingObjects [] test = new FlyingObjects[7];\r\n\t\ttest[0] = new Uav(10,43);\r\n\t\ttest[1] = new AgriculturalDrone(8000,780000,&quot;Chase&quot;,2400);\r\n\t\ttest[2] = new Uav(10,5);\r\n\t\ttest[3] = new Mav(0.5,140000,&quot;trooper&quot;,10);\r\n\t\ttest[4] = new Multirotor(&quot;Hexa&quot;,140000,200,185,2021,1,4);\r\n\t\ttest[5] = new Helicopter(&quot;Robinson&quot;,199000,250,100,2018,7);\r\n\t\ttest[6] = new Airplane(&quot;Boeing&quot;,350000,450);\r\n\r\nNow I need to write a method that will get me the most expensive and least expensive UAV in my array (note that the price is always the second attribute in the UAV&#39;s constructors).\r\nfor some reason my method always return the first UAV in the array as the least expensive and the last UAV in the array as the most expensive.\r\nAny tip on how to fix this issue? \r\n\r\n        public static void findLeastAndMostExpensiveUAV(FlyingObjects[] flyingObjects) {\r\n\t\tint mostExpensive = -1;\r\n\t\tint leastExpensive =1000000000;\r\n\t\tboolean hasUav = false;\r\n\t\t\r\n\t\tif(flyingObjects == null) {\r\n\t\t\tSystem.out.println(&quot;There is no UAV&quot;);\r\n\t\t}\r\n\t\tfor(int i = 0;i&lt;flyingObjects.length;i++) {\r\n\t\t\tif (flyingObjects[i] instanceof Uav) {\r\n\t\t\t  Uav a = (Uav) flyingObjects[i];\r\n\t\t\t  if (a.getPrice() &gt;= mostExpensive) {\r\n\t\t\t\t  mostExpensive = i;\r\n\t\t\t  }if (a.getPrice() &lt;= leastExpensive){\r\n\t\t\t\t  leastExpensive = i;\r\n\t\r\n\t\t\t  }\r\n\t\t\t  if(!hasUav) {\r\n\t\t\t\t  hasUav = true;\r\n\t\t\t  }\r\n\t\t\t}\r\n\t\t}\r\n\t\tif(!hasUav) {\r\n\t\t\tSystem.out.println(&quot;There is no UAV&quot;);\r\n\t\t}\r\n\t\telse {\r\n\t\t\tSystem.out.println(&quot;\\nInformation about the most expensive UAV: \\n&quot;+ flyingObjects[mostExpensive]+&quot;\\n&quot;);\r\n\t\t\tSystem.out.println(&quot;Information about the least expensive UAV: \\n&quot;+flyingObjects[leastExpensive]);\r\n\t\t}\r\n\t}\r\n","title":"How to display least and most expensive from array in Java","body":"<p>So I have an array of 15 Flying Objects, The flyingObjects class consists of 1 variable (Price: Double) with its getters and setters.\nI also have an airplane class that extends FlyingObjects, a helicopter class that extends Airplane and quadrotor and multirotor class that extends helicopter. On the other side of the tree I have a UAV class that extends FlyingObjects, a MAV class that extends UAV and a AD class that extends UAV.</p>\n<p>Here is the array:</p>\n<pre><code>    FlyingObjects [] test = new FlyingObjects[7];\n    test[0] = new Uav(10,43);\n    test[1] = new AgriculturalDrone(8000,780000,&quot;Chase&quot;,2400);\n    test[2] = new Uav(10,5);\n    test[3] = new Mav(0.5,140000,&quot;trooper&quot;,10);\n    test[4] = new Multirotor(&quot;Hexa&quot;,140000,200,185,2021,1,4);\n    test[5] = new Helicopter(&quot;Robinson&quot;,199000,250,100,2018,7);\n    test[6] = new Airplane(&quot;Boeing&quot;,350000,450);\n</code></pre>\n<p>Now I need to write a method that will get me the most expensive and least expensive UAV in my array (note that the price is always the second attribute in the UAV's constructors).\nfor some reason my method always return the first UAV in the array as the least expensive and the last UAV in the array as the most expensive.\nAny tip on how to fix this issue?</p>\n<pre><code>    public static void findLeastAndMostExpensiveUAV(FlyingObjects[] flyingObjects) {\n    int mostExpensive = -1;\n    int leastExpensive =1000000000;\n    boolean hasUav = false;\n    \n    if(flyingObjects == null) {\n        System.out.println(&quot;There is no UAV&quot;);\n    }\n    for(int i = 0;i&lt;flyingObjects.length;i++) {\n        if (flyingObjects[i] instanceof Uav) {\n          Uav a = (Uav) flyingObjects[i];\n          if (a.getPrice() &gt;= mostExpensive) {\n              mostExpensive = i;\n          }if (a.getPrice() &lt;= leastExpensive){\n              leastExpensive = i;\n\n          }\n          if(!hasUav) {\n              hasUav = true;\n          }\n        }\n    }\n    if(!hasUav) {\n        System.out.println(&quot;There is no UAV&quot;);\n    }\n    else {\n        System.out.println(&quot;\\nInformation about the most expensive UAV: \\n&quot;+ flyingObjects[mostExpensive]+&quot;\\n&quot;);\n        System.out.println(&quot;Information about the least expensive UAV: \\n&quot;+flyingObjects[leastExpensive]);\n    }\n}\n</code></pre>\n"},{"tags":["java","maven","cucumber","junit5","cucumber-junit"],"comments":[{"owner":{"account_id":4895787,"reputation":10833,"user_id":3945473,"display_name":"M.P. Korstanje"},"score":0,"creation_date":1667009499,"post_id":74241695,"comment_id":131076013,"body_markdown":"Read carefully and rename your test class to follow the conventions https://maven.apache.org/surefire/maven-surefire-plugin/examples/inclusion-exclusion.html#","body":"Read carefully and rename your test class to follow the conventions <a href=\"https://maven.apache.org/surefire/maven-surefire-plugin/examples/inclusion-exclusion.html#\" rel=\"nofollow noreferrer\">maven.apache.org/surefire/maven-surefire-plugin/examples/&hellip;</a>"}],"answers":[{"tags":[],"owner":{"account_id":14259806,"reputation":129,"user_id":10300966,"display_name":"Sachin G"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1667324173,"creation_date":1667324173,"answer_id":74279741,"question_id":74241695,"body_markdown":"You don&#39;t need the `/` in @SelectClasspathResource annotation, the correct value should be `@SelectClasspathResource(&quot;pirate&quot;)`. \r\n\r\nRest all looks good in your runner file.","title":"Cucumber how to run cucumber tests via mvn test command Junit 5","body":"<p>You don't need the <code>/</code> in @SelectClasspathResource annotation, the correct value should be <code>@SelectClasspathResource(&quot;pirate&quot;)</code>.</p>\n<p>Rest all looks good in your runner file.</p>\n"}],"owner":{"account_id":17974901,"reputation":542,"user_id":13062745,"display_name":"zxcisnoias"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1612,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1667324173,"creation_date":1666998686,"question_id":74241695,"body_markdown":"I&#39;m developing a simple cucumber testing program in Intellij IDE, with Junit 5. &lt;br&gt;&lt;br&gt;\r\nI followed the steps, and installed the dependency as recommended in [cucumber-jvm](https://github.com/cucumber/cucumber-jvm/tree/main/cucumber-junit-platform-engine)&lt;br&gt;\r\nBut When I run ```mvn clean test```, the cucumber test cases are skipped\r\n```\r\n[INFO] --- maven-compiler-plugin:3.8.1:testCompile (default-testCompile) @ xxx ---\r\n[INFO] Nothing to compile - all classes are up to date\r\n[INFO] \r\n[INFO] --- maven-surefire-plugin:3.0.0-M5:test (default-test) @ xxx ---\r\n[INFO] ------------------------------------------------------------------------\r\n[INFO] BUILD SUCCESS\r\n[INFO] ------------------------------------------------------------------------\r\n[INFO] Total time:  1.052 s\r\n[INFO] Finished at: 2022-10-28T18:58:48-04:00\r\n[INFO] ------------------------------------------------------------------------\r\n```\r\n\r\nBut if I run the runner class directly through ```Run Runner.java``` (click run button on top-right), the tests are executed. &lt;br&gt;\r\nThis is my runner class:\r\n```\r\npackage pirate;\r\nimport org.junit.platform.suite.api.ConfigurationParameter;\r\nimport org.junit.platform.suite.api.IncludeEngines;\r\nimport org.junit.platform.suite.api.SelectClasspathResource;\r\nimport org.junit.platform.suite.api.Suite;\r\n\r\nimport static io.cucumber.junit.platform.engine.Constants.GLUE_PROPERTY_NAME;\r\nimport static io.cucumber.junit.platform.engine.Constants.PLUGIN_PROPERTY_NAME;\r\n\r\n@Suite\r\n@IncludeEngines(&quot;cucumber&quot;)\r\n@SelectClasspathResource(&quot;/pirate&quot;)\r\n@ConfigurationParameter(key = GLUE_PROPERTY_NAME, value = &quot;pirate&quot;)\r\n@ConfigurationParameter(key = PLUGIN_PROPERTY_NAME, value = &quot;pretty, html:target/cucumber-report/cucumber.html&quot;)\r\npublic class Runner {\r\n}\r\n```\r\n\r\nAnd this is my pom.xml\r\n```\r\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n  xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n  &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n\r\n  &lt;groupId&gt;org.example&lt;/groupId&gt;\r\n  &lt;artifactId&gt;xxx&lt;/artifactId&gt;\r\n  &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\r\n  &lt;packaging&gt;jar&lt;/packaging&gt;\r\n\r\n  &lt;name&gt;xxx&lt;/name&gt;\r\n  &lt;url&gt;http://maven.apache.org&lt;/url&gt;\r\n\r\n  &lt;properties&gt;\r\n    &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\r\n  &lt;/properties&gt;\r\n  &lt;build&gt;\r\n    &lt;testSourceDirectory&gt;src/test/java&lt;/testSourceDirectory&gt;\r\n    &lt;plugins&gt;\r\n      &lt;plugin&gt;\r\n        &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n        &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\r\n        &lt;version&gt;3.8.1&lt;/version&gt;\r\n        &lt;configuration&gt;\r\n          &lt;source&gt;11&lt;/source&gt;\r\n          &lt;target&gt;11&lt;/target&gt;\r\n        &lt;/configuration&gt;\r\n      &lt;/plugin&gt;\r\n      &lt;plugin&gt;\r\n        &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n        &lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;\r\n        &lt;version&gt;3.0.0-M5&lt;/version&gt;\r\n        &lt;configuration&gt;\r\n          &lt;properties&gt;\r\n            &lt;configurationParameters&gt;\r\n              cucumber.junit-platform.naming-strategy=long\r\n            &lt;/configurationParameters&gt;\r\n          &lt;/properties&gt;\r\n        &lt;/configuration&gt;\r\n      &lt;/plugin&gt;\r\n    &lt;/plugins&gt;\r\n  &lt;/build&gt;\r\n  &lt;dependencies&gt;\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;org.junit.jupiter&lt;/groupId&gt;\r\n      &lt;artifactId&gt;junit-jupiter&lt;/artifactId&gt;\r\n      &lt;version&gt;5.9.0&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;io.cucumber&lt;/groupId&gt;\r\n      &lt;artifactId&gt;cucumber-java&lt;/artifactId&gt;\r\n      &lt;version&gt;7.8.1&lt;/version&gt;\r\n      &lt;scope&gt;test&lt;/scope&gt;\r\n    &lt;/dependency&gt;\r\n\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;io.cucumber&lt;/groupId&gt;\r\n      &lt;artifactId&gt;cucumber-junit-platform-engine&lt;/artifactId&gt;\r\n      &lt;version&gt;7.8.1&lt;/version&gt;\r\n      &lt;scope&gt;test&lt;/scope&gt;\r\n    &lt;/dependency&gt;\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;org.junit.platform&lt;/groupId&gt;\r\n      &lt;artifactId&gt;junit-platform-suite&lt;/artifactId&gt;\r\n      &lt;version&gt;1.9.0&lt;/version&gt;\r\n      &lt;scope&gt;test&lt;/scope&gt;\r\n    &lt;/dependency&gt;\r\n  &lt;/dependencies&gt;\r\n&lt;/project&gt;\r\n\r\n```\r\nAnd this is my project test structure:\r\n[![enter image description here][1]][1]\r\nI want to execute all cucumber tests via ```mvn test``` or something similiar &lt;br&gt;\r\nWhat am I missing here?\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/gNaNr.png","title":"Cucumber how to run cucumber tests via mvn test command Junit 5","body":"<p>I'm developing a simple cucumber testing program in Intellij IDE, with Junit 5. <br><br>\nI followed the steps, and installed the dependency as recommended in <a href=\"https://github.com/cucumber/cucumber-jvm/tree/main/cucumber-junit-platform-engine\" rel=\"nofollow noreferrer\">cucumber-jvm</a><br>\nBut When I run <code>mvn clean test</code>, the cucumber test cases are skipped</p>\n<pre><code>[INFO] --- maven-compiler-plugin:3.8.1:testCompile (default-testCompile) @ xxx ---\n[INFO] Nothing to compile - all classes are up to date\n[INFO] \n[INFO] --- maven-surefire-plugin:3.0.0-M5:test (default-test) @ xxx ---\n[INFO] ------------------------------------------------------------------------\n[INFO] BUILD SUCCESS\n[INFO] ------------------------------------------------------------------------\n[INFO] Total time:  1.052 s\n[INFO] Finished at: 2022-10-28T18:58:48-04:00\n[INFO] ------------------------------------------------------------------------\n</code></pre>\n<p>But if I run the runner class directly through <code>Run Runner.java</code> (click run button on top-right), the tests are executed. <br>\nThis is my runner class:</p>\n<pre><code>package pirate;\nimport org.junit.platform.suite.api.ConfigurationParameter;\nimport org.junit.platform.suite.api.IncludeEngines;\nimport org.junit.platform.suite.api.SelectClasspathResource;\nimport org.junit.platform.suite.api.Suite;\n\nimport static io.cucumber.junit.platform.engine.Constants.GLUE_PROPERTY_NAME;\nimport static io.cucumber.junit.platform.engine.Constants.PLUGIN_PROPERTY_NAME;\n\n@Suite\n@IncludeEngines(&quot;cucumber&quot;)\n@SelectClasspathResource(&quot;/pirate&quot;)\n@ConfigurationParameter(key = GLUE_PROPERTY_NAME, value = &quot;pirate&quot;)\n@ConfigurationParameter(key = PLUGIN_PROPERTY_NAME, value = &quot;pretty, html:target/cucumber-report/cucumber.html&quot;)\npublic class Runner {\n}\n</code></pre>\n<p>And this is my pom.xml</p>\n<pre><code>&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n  xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n  &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n\n  &lt;groupId&gt;org.example&lt;/groupId&gt;\n  &lt;artifactId&gt;xxx&lt;/artifactId&gt;\n  &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\n  &lt;packaging&gt;jar&lt;/packaging&gt;\n\n  &lt;name&gt;xxx&lt;/name&gt;\n  &lt;url&gt;http://maven.apache.org&lt;/url&gt;\n\n  &lt;properties&gt;\n    &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\n  &lt;/properties&gt;\n  &lt;build&gt;\n    &lt;testSourceDirectory&gt;src/test/java&lt;/testSourceDirectory&gt;\n    &lt;plugins&gt;\n      &lt;plugin&gt;\n        &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n        &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n        &lt;version&gt;3.8.1&lt;/version&gt;\n        &lt;configuration&gt;\n          &lt;source&gt;11&lt;/source&gt;\n          &lt;target&gt;11&lt;/target&gt;\n        &lt;/configuration&gt;\n      &lt;/plugin&gt;\n      &lt;plugin&gt;\n        &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n        &lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;\n        &lt;version&gt;3.0.0-M5&lt;/version&gt;\n        &lt;configuration&gt;\n          &lt;properties&gt;\n            &lt;configurationParameters&gt;\n              cucumber.junit-platform.naming-strategy=long\n            &lt;/configurationParameters&gt;\n          &lt;/properties&gt;\n        &lt;/configuration&gt;\n      &lt;/plugin&gt;\n    &lt;/plugins&gt;\n  &lt;/build&gt;\n  &lt;dependencies&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;org.junit.jupiter&lt;/groupId&gt;\n      &lt;artifactId&gt;junit-jupiter&lt;/artifactId&gt;\n      &lt;version&gt;5.9.0&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;io.cucumber&lt;/groupId&gt;\n      &lt;artifactId&gt;cucumber-java&lt;/artifactId&gt;\n      &lt;version&gt;7.8.1&lt;/version&gt;\n      &lt;scope&gt;test&lt;/scope&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n      &lt;groupId&gt;io.cucumber&lt;/groupId&gt;\n      &lt;artifactId&gt;cucumber-junit-platform-engine&lt;/artifactId&gt;\n      &lt;version&gt;7.8.1&lt;/version&gt;\n      &lt;scope&gt;test&lt;/scope&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;org.junit.platform&lt;/groupId&gt;\n      &lt;artifactId&gt;junit-platform-suite&lt;/artifactId&gt;\n      &lt;version&gt;1.9.0&lt;/version&gt;\n      &lt;scope&gt;test&lt;/scope&gt;\n    &lt;/dependency&gt;\n  &lt;/dependencies&gt;\n&lt;/project&gt;\n\n</code></pre>\n<p>And this is my project test structure:\n<a href=\"https://i.stack.imgur.com/gNaNr.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/gNaNr.png\" alt=\"enter image description here\" /></a>\nI want to execute all cucumber tests via <code>mvn test</code> or something similiar <br>\nWhat am I missing here?</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":5281408,"reputation":18797,"user_id":4216641,"display_name":"Turing85"},"score":2,"creation_date":1667324255,"post_id":74279734,"comment_id":131139165,"body_markdown":"&quot;*...it doesn&#39;t work of course...*&quot; - Why not?","body":"&quot;<i>...it doesn&#39;t work of course...</i>&quot; - Why not?"},{"owner":{"account_id":204659,"reputation":37539,"user_id":453005,"accept_rate":100,"display_name":"DwB"},"score":1,"creation_date":1667326078,"post_id":74279734,"comment_id":131139820,"body_markdown":"Include more code.  The code you currently have is not java and may not compile.","body":"Include more code.  The code you currently have is not java and may not compile."}],"owner":{"account_id":26797888,"reputation":1,"user_id":20390333,"display_name":"Thomas DENEUX"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":33,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1667324144,"creation_date":1667324144,"question_id":74279734,"body_markdown":"Hello I&#39;m learning scocket and I have a small problem. I can create a socket and close them one by one. Then I put in an Arrylist. For the moment no problem, everything works correctly. But now I&#39;d like to close a socket and all the others will close as well (possibly with a 10 seconds delay but that&#39;s secondary).\r\n\r\n```\r\nif(sc.isClosed()){\r\n    System.out.println(&quot;Deconnexion all socket&quot;);\r\n    for(int i = 0; i&lt;tabsc.size();i++)\r\n        tabsc(i).close();\r\n    break;\r\n}\r\n```\r\n\r\nSomething like this (it doesn&#39;t work of course)\r\n\r\nif you have an idea I&#39;m interested. Thanks\r\n","title":"Close all socket into an arraylist","body":"<p>Hello I'm learning scocket and I have a small problem. I can create a socket and close them one by one. Then I put in an Arrylist. For the moment no problem, everything works correctly. But now I'd like to close a socket and all the others will close as well (possibly with a 10 seconds delay but that's secondary).</p>\n<pre><code>if(sc.isClosed()){\n    System.out.println(&quot;Deconnexion all socket&quot;);\n    for(int i = 0; i&lt;tabsc.size();i++)\n        tabsc(i).close();\n    break;\n}\n</code></pre>\n<p>Something like this (it doesn't work of course)</p>\n<p>if you have an idea I'm interested. Thanks</p>\n"},{"tags":["java","spring-boot","validation","http-request-parameters"],"comments":[{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1667324036,"post_id":74279685,"comment_id":131139091,"body_markdown":"Do you have a path parameter or request parameter as those are different things. Just write 2 handler methods each with a different parameter name and a `param` in the `@RequestMapping` annotation.","body":"Do you have a path parameter or request parameter as those are different things. Just write 2 handler methods each with a different parameter name and a <code>param</code> in the <code>@RequestMapping</code> annotation."},{"owner":{"account_id":5500627,"reputation":113,"user_id":4370074,"accept_rate":100,"display_name":"Amjad Aziz"},"score":0,"creation_date":1667324990,"post_id":74279685,"comment_id":131139434,"body_markdown":"@M.Deinum I am dealing with request parameter so I think I can not add two different handler methods as path is not changing.","body":"@M.Deinum I am dealing with request parameter so I think I can not add two different handler methods as path is not changing."},{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1667325037,"post_id":74279685,"comment_id":131139462,"body_markdown":"Yes you can, read my comment add the `param` argument to the `@RequestMapping` annotation.","body":"Yes you can, read my comment add the <code>param</code> argument to the <code>@RequestMapping</code> annotation."},{"owner":{"account_id":5500627,"reputation":113,"user_id":4370074,"accept_rate":100,"display_name":"Amjad Aziz"},"score":0,"creation_date":1667326246,"post_id":74279685,"comment_id":131139883,"body_markdown":"@M.Deinum I have added a different handlers for both parameters using `params` and it worked perfectly. It might be a noob question for you but I was not aware of this :) Thanks man!","body":"@M.Deinum I have added a different handlers for both parameters using <code>params</code> and it worked perfectly. It might be a noob question for you but I was not aware of this :) Thanks man!"},{"owner":{"account_id":5500627,"reputation":113,"user_id":4370074,"accept_rate":100,"display_name":"Amjad Aziz"},"score":0,"creation_date":1667326959,"post_id":74279685,"comment_id":131140112,"body_markdown":"@M.Deinum I have another case, I can receive both parameters. In this case I am getting an exception :) Ambiguous handler methods mapped","body":"@M.Deinum I have another case, I can receive both parameters. In this case I am getting an exception :) Ambiguous handler methods mapped"},{"owner":{"account_id":20027560,"reputation":838,"user_id":14681071,"display_name":"doc"},"score":0,"creation_date":1667328800,"post_id":74279685,"comment_id":131140635,"body_markdown":"Hey @AmjadAziz can you share a code snippet of your solution to have an overview? Will be helpful","body":"Hey @AmjadAziz can you share a code snippet of your solution to have an overview? Will be helpful"},{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1667372955,"post_id":74279685,"comment_id":131148906,"body_markdown":"If you do both parameters that won&#39;t be possible as, as you noticed, Spring cannot determine which method to call. Instead of using `@RequestParam` you can also manually extract the parameters from the `HttpServletRequest` and do the handling in the method.","body":"If you do both parameters that won&#39;t be possible as, as you noticed, Spring cannot determine which method to call. Instead of using <code>@RequestParam</code> you can also manually extract the parameters from the <code>HttpServletRequest</code> and do the handling in the method."}],"owner":{"account_id":5500627,"reputation":113,"user_id":4370074,"accept_rate":100,"display_name":"Amjad Aziz"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":107,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1667323883,"creation_date":1667323883,"question_id":74279685,"body_markdown":"I have a scenario where I have to rename one required request param. My application is already live. I want to deprecate the existing request param and want to add new request parameter. So my existing applications will be sending me the old request parameter and new application will start to send the new param. \r\nNow I want to add validation, either I can mark both params as required or optional. But my business logic is either of param is required. \r\n\r\nFor example I already have a path parameter `group` and now I want to rename it to `pageGroup`. So either `page` or `pageGroup` is required. \r\n\r\nHow can I achieve it in Spring Boot? Any suggestions are welcome :) ","title":"Dependent RequestParam validation in Spring boot","body":"<p>I have a scenario where I have to rename one required request param. My application is already live. I want to deprecate the existing request param and want to add new request parameter. So my existing applications will be sending me the old request parameter and new application will start to send the new param.\nNow I want to add validation, either I can mark both params as required or optional. But my business logic is either of param is required.</p>\n<p>For example I already have a path parameter <code>group</code> and now I want to rename it to <code>pageGroup</code>. So either <code>page</code> or <code>pageGroup</code> is required.</p>\n<p>How can I achieve it in Spring Boot? Any suggestions are welcome :)</p>\n"},{"tags":["java","android"],"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":1,"creation_date":1667325162,"post_id":74279163,"comment_id":131139526,"body_markdown":"Please trim your code to make it easier to find your problem. Follow these guidelines to create a [minimal reproducible example](https://stackoverflow.com/help/minimal-reproducible-example).","body":"Please trim your code to make it easier to find your problem. Follow these guidelines to create a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}],"answers":[{"tags":[],"owner":{"account_id":2786826,"reputation":2172,"user_id":2398000,"display_name":"avalerio"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1667323841,"creation_date":1667323841,"answer_id":74279677,"question_id":74279163,"body_markdown":"I don&#39;t know why you have them scoped to the class instead of scoped to the listener.\r\nI have cleaned up your code and added them as local variables to the listener.\r\n\r\n            shirtBTN.setOnClickListener(new View.OnClickListener() {\r\n                @Override\r\n                public void onClick(View view) {\r\n                    Chip chip = findViewById(colorCG.getCheckedChipId());\r\n                    String color = chip.getText().toString();\r\n                    int quantity = Integer.parseInt( quantityCOUNTER.getText().toString());\r\n                    float cost = quantity * 150;\r\n                    String type = &quot;SHIRT&quot;;\r\n\r\n                    checkoutSTRUCT.add(new listitem(quantity, color, type, cost));\r\n                    shirtCOUNTER.setText( String.valueOf( getQuantity_Sum(checkoutSTRUCT, type)));\r\n                }\r\n            });\r\n\r\nThis creates new local variables for every click instead of using the same one every time.\r\n\r\nAlso please refer to the java naming conventions, standardized code is very important. For example: &quot;quantityCOUNTER&quot;, &quot;item_cost&quot; &quot;listitem&quot; do not follow the convention.\r\n","title":"How can I reset variables to their default values?","body":"<p>I don't know why you have them scoped to the class instead of scoped to the listener.\nI have cleaned up your code and added them as local variables to the listener.</p>\n<pre><code>        shirtBTN.setOnClickListener(new View.OnClickListener() {\n            @Override\n            public void onClick(View view) {\n                Chip chip = findViewById(colorCG.getCheckedChipId());\n                String color = chip.getText().toString();\n                int quantity = Integer.parseInt( quantityCOUNTER.getText().toString());\n                float cost = quantity * 150;\n                String type = &quot;SHIRT&quot;;\n\n                checkoutSTRUCT.add(new listitem(quantity, color, type, cost));\n                shirtCOUNTER.setText( String.valueOf( getQuantity_Sum(checkoutSTRUCT, type)));\n            }\n        });\n</code></pre>\n<p>This creates new local variables for every click instead of using the same one every time.</p>\n<p>Also please refer to the java naming conventions, standardized code is very important. For example: &quot;quantityCOUNTER&quot;, &quot;item_cost&quot; &quot;listitem&quot; do not follow the convention.</p>\n"}],"owner":{"account_id":26787481,"reputation":9,"user_id":20381450,"display_name":"disarm9"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":58,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1667323841,"creation_date":1667321229,"question_id":74279163,"body_markdown":"I am an IT student in 2nd year. I am making a wholesale app.\r\n\r\nHow it works:\r\n\r\n&gt; First the user browses for an item in the store. The data of a selected item is used to create an object. The object is added to an ArrayList that acts as the user&#39;s cart. This ArrayList and its contemporary data can be seen in a Cart activity and a Receipt/Checkout activity.\r\n&gt;\r\n&gt; Pressing the OK button in the Receipt activity duplicates the arraylist, stores the duplicate in the Order History, finally it clears the original arraylist and goes back to the main menu.\r\n\r\n***Shopping Activity***\r\n\r\n```\r\npackage com.example.wearhouse;\r\n\r\nimport androidx.appcompat.app.AppCompatActivity;\r\nimport androidx.navigation.ui.AppBarConfiguration;\r\n\r\nimport android.annotation.SuppressLint;\r\nimport android.content.Intent;\r\n\r\nimport java.text.DecimalFormat;\r\nimport java.util.ArrayList;\r\nimport java.util.Locale;\r\n\r\nimport android.content.SharedPreferences;\r\nimport android.os.Bundle;\r\nimport android.view.View;\r\nimport android.widget.AdapterView;\r\nimport android.widget.ArrayAdapter;\r\nimport android.widget.Button;\r\nimport android.widget.EditText;\r\nimport android.widget.ImageButton;\r\nimport android.widget.RadioButton;\r\nimport android.widget.RadioGroup;\r\nimport android.widget.Spinner;\r\nimport android.widget.TextView;\r\nimport android.widget.Toast;\r\n\r\n\r\nimport com.google.android.material.chip.Chip;\r\nimport com.google.android.material.chip.ChipGroup;\r\n\r\npublic class encodeActivity extends AppCompatActivity implements AdapterView.OnItemSelectedListener {\r\n    // set defaults\r\n    private String empty_STR = &quot;&quot;;\r\n    private int empty_INT = 0;\r\n    private final static String DEFAULT_STR = null;\r\n    private final static int DEFAULT_INT = 0;\r\n\r\n    /*  For individual orders: These data will be passed to the listitem class  */\r\n    private volatile int item_quantity;\r\n    private volatile String item_type;\r\n    private volatile String item_color;\r\n    /*                                                    */\r\n\r\n\r\n    // represents items in bill\r\n    protected static ArrayList&lt;listitem&gt; checkoutSTRUCT = new ArrayList&lt;&gt;();\r\n\r\n    /* START */\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.layout_encode);\r\n\r\n        TextView shirtCOUNTER, shortsCOUNTER;\r\n        EditText notesENTRY, paymentENTRY, quantityCOUNTER;\r\n        ImageButton shirtBTN, shortsBTN;\r\n        Button decBTN, incBTN, billBTN;\r\n        ChipGroup colorCG;\r\n        RadioGroup sex, sizing;\r\n        Spinner paymodeSPIN, discountSPIN;\r\n\r\n        shirtCOUNTER = (TextView) findViewById(R.id.shirtCOUNTER);\r\n        shortsCOUNTER = (TextView) findViewById(R.id.shortsCOUNTER);\r\n        quantityCOUNTER = (EditText) findViewById(R.id.quantityENTRY);\r\n\r\n        paymentENTRY = (EditText) findViewById(R.id.received_paymentENTRY);\r\n\r\n        try {\r\n            this.getSupportActionBar().hide(); // hide Action bar\r\n            Integer.parseInt(quantityCOUNTER.getText().toString());\r\n\r\n        } catch (NullPointerException e) {\r\n        } catch (NumberFormatException e) {\r\n            quantityCOUNTER.setText(&quot;1&quot;); // set default quantity multiplier\r\n            paymentENTRY.setText( String.valueOf(DEFAULT_INT) );\r\n\r\n        }\r\n\r\n        // widgets\r\n        notesENTRY = (EditText) findViewById(R.id.notesENTRY);\r\n\r\n        decBTN = (Button) findViewById(R.id.decBTN);\r\n        incBTN = (Button) findViewById(R.id.incBTN);\r\n        billBTN = (Button) findViewById(R.id.billBTN);\r\n\r\n        shirtBTN = (ImageButton) findViewById(R.id.shirtBTN);\r\n        shortsBTN = (ImageButton) findViewById(R.id.shortsBTN);\r\n\r\n        sex = (RadioGroup) findViewById(R.id.sexRG);\r\n        sizing = (RadioGroup) findViewById(R.id.sizeRG);\r\n\r\n        colorCG = (ChipGroup) findViewById(R.id.colorCG);\r\n\r\n        paymodeSPIN = (Spinner) findViewById(R.id.paymode);\r\n        discountSPIN = (Spinner) findViewById(R.id.discountSPIN);\r\n\r\n        // mode of payment\r\n        ArrayAdapter&lt;CharSequence&gt; adapterPM = ArrayAdapter.createFromResource(this, R.array.payMode, android.R.layout.simple_spinner_dropdown_item);\r\n        adapterPM.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);\r\n        paymodeSPIN.setAdapter(adapterPM);\r\n\r\n        // discount\r\n        ArrayAdapter&lt;CharSequence&gt; adapterDS = ArrayAdapter.createFromResource(this, R.array.discountMode, android.R.layout.simple_spinner_dropdown_item);\r\n        adapterDS.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);\r\n        discountSPIN.setAdapter(adapterDS);\r\n\r\n        // listeners\r\n        {\r\n            sex.setOnCheckedChangeListener(new RadioGroup.OnCheckedChangeListener() {\r\n                @Override\r\n                public void onCheckedChanged(RadioGroup radioGroup, int checkedR) {\r\n                    checkedR = sex.getCheckedRadioButtonId();\r\n                    RadioButton temp = findViewById(checkedR);\r\n\r\n                    Toast.makeText(getApplicationContext(), &quot;Selected &quot; + temp.getText(), Toast.LENGTH_SHORT).show();\r\n\r\n                }\r\n            });\r\n\r\n            sizing.setOnCheckedChangeListener(new RadioGroup.OnCheckedChangeListener() {\r\n                @Override\r\n                public void onCheckedChanged(RadioGroup radioGroup, int checkedR) {\r\n                    checkedR = sizing.getCheckedRadioButtonId();\r\n                    RadioButton temp = findViewById(checkedR);\r\n\r\n                    Toast.makeText(getApplicationContext(), &quot;Size &quot; + temp.getText(), Toast.LENGTH_SHORT).show();\r\n                }\r\n            });\r\n\r\n            shirtBTN.setOnClickListener(new View.OnClickListener() {\r\n                @Override\r\n                public void onClick(View view) {\r\n                    final Chip tempCHIP;\r\n                    final int tempCOLOR;\r\n                    final float item_cost;\r\n\r\n                    // get selected color\r\n                    tempCOLOR = colorCG.getCheckedChipId();\r\n                    tempCHIP = findViewById(tempCOLOR);\r\n                    item_color = (String) tempCHIP.getText();\r\n\r\n                    // get selected quantity\r\n                    item_quantity = Integer.parseInt( quantityCOUNTER.getText().toString() );\r\n                    System.out.println(&quot;item_quantity: &quot; + item_quantity);\r\n\r\n                    // get cost based on quantity\r\n                    item_cost = item_quantity * 150;\r\n\r\n                    item_type = &quot;SHIRT&quot;;\r\n                    System.out.println(&quot;item_type: &quot; + item_type);\r\n\r\n                    // add to cart\r\n                    checkoutSTRUCT.add(new listitem(item_quantity, item_color, item_type, item_cost));\r\n                    Toast.makeText(getApplicationContext(), getCount(checkoutSTRUCT, item_type) + &quot; &quot; + item_type, Toast.LENGTH_SHORT).show();\r\n\r\n                    // update counter\r\n                    shirtCOUNTER.setText( String.valueOf( getQuantity_Sum(checkoutSTRUCT, item_type) ) );\r\n\r\n                    // reset values\r\n                    // FIXME this does not work; find another way to clear @item_quantity, @item_color, and @item_type\r\n                    item_quantity = empty_INT;\r\n                    item_color = empty_STR;\r\n                    item_type = empty_STR;\r\n                }\r\n            });\r\n\r\n            shortsBTN.setOnClickListener(new View.OnClickListener() {\r\n                @Override\r\n                public void onClick(View view) {\r\n                    final Chip tempCHIP;\r\n                    final int tempCOLOR;\r\n                    final float item_cost;\r\n\r\n\r\n                    System.out.println(&quot;item_color&quot; + item_color);\r\n\r\n                    // get selected color\r\n                    tempCOLOR = colorCG.getCheckedChipId();\r\n                    tempCHIP = findViewById(tempCOLOR);\r\n                    item_color = (String) tempCHIP.getText();\r\n\r\n                    // get selected quantity\r\n                    System.out.println(&quot;item_quantity: &quot; + item_quantity);\r\n                    item_quantity = Integer.parseInt( quantityCOUNTER.getText().toString() );\r\n\r\n                    // get cost based on quantity\r\n                    item_cost = item_quantity * 150;\r\n\r\n                    System.out.println(&quot;item_type: &quot; + item_type);\r\n                    item_type = &quot;SHORTS&quot;;\r\n\r\n                    // add to cart\r\n                    checkoutSTRUCT.add(new listitem(item_quantity, item_color, item_type, item_cost));\r\n                    System.out.println(&quot;expected: &quot;);\r\n                    System.out.println(&quot;item_color&quot; + item_color);\r\n                    System.out.println(&quot;item_quantity: &quot; + item_quantity);\r\n                    System.out.println(&quot;item_type: &quot; + item_type);\r\n\r\n                    Toast.makeText(getApplicationContext(), getCount(checkoutSTRUCT, item_type) + &quot; &quot; + item_type, Toast.LENGTH_SHORT).show();\r\n\r\n                    shortsCOUNTER.setText(String.valueOf( getQuantity_Sum(checkoutSTRUCT, item_type) ));\r\n\r\n                    // reset values\r\n                    item_quantity = empty_INT;\r\n                    item_color = empty_STR;\r\n                    item_type = empty_STR;\r\n                }\r\n            });\r\n\r\n            decBTN.setOnClickListener(new View.OnClickListener() {\r\n                @Override\r\n                public void onClick(View view) {\r\n                    try {\r\n\r\n                        String x = String.valueOf(quantityCOUNTER.getText());\r\n\r\n\r\n                        int value = Integer.parseInt(x);\r\n                        if (value &gt; 1)\r\n                            value--;\r\n\r\n                        String valueSTR = String.valueOf(value);\r\n                        quantityCOUNTER.setText(valueSTR);\r\n\r\n                    } catch (NumberFormatException e) {\r\n                        quantityCOUNTER.setText(&quot;1&quot;);\r\n                        decBTN.setEnabled(false);\r\n                    }\r\n                }\r\n            });\r\n\r\n            incBTN.setOnClickListener(new View.OnClickListener() {\r\n                @Override\r\n                public void onClick(View view) {\r\n                    try {\r\n                        String x = String.valueOf(quantityCOUNTER.getText());\r\n\r\n                        int value = Integer.parseInt(x);\r\n                        value++;\r\n\r\n                        String valueSTR = String.valueOf(value);\r\n                        quantityCOUNTER.setText(valueSTR);\r\n\r\n                    } catch (NumberFormatException e) {\r\n                        quantityCOUNTER.setText(&quot;1&quot;);\r\n                        decBTN.setEnabled(false);\r\n                    }\r\n                }\r\n            });\r\n\r\n            billBTN.setOnClickListener(new View.OnClickListener() {\r\n                @Override\r\n                public void onClick(View view) {\r\n                    String payment_mode = String.valueOf(paymodeSPIN.getSelectedItem());\r\n\r\n                    // open gcash app if GCash is selected\r\n                    if (payment_mode.equals(&quot;GCash&quot;)) {\r\n                        makeGCASH();\r\n                    }\r\n\r\n                    if (payment_mode.equals(&quot;In-person&quot;)) {\r\n                        makeBill();\r\n                    }\r\n                }\r\n            });\r\n\r\n            paymodeSPIN.setOnItemSelectedListener(this);\r\n\r\n            discountSPIN.setOnItemSelectedListener(new AdapterView.OnItemSelectedListener() {\r\n                // save and pass spinner ITEM SELECTED data\r\n                private final SharedPreferences dataLOCAL = getSharedPreferences(&quot;MySavedData&quot;, MODE_PRIVATE);\r\n                private final SharedPreferences.Editor dataEDIT = dataLOCAL.edit();\r\n\r\n                @Override\r\n                public void onItemSelected(AdapterView&lt;?&gt; adapterView, View view, int i, long l) {\r\n\r\n                    String discountSELECTED = String.valueOf(discountSPIN.getSelectedItem());\r\n                    float discountPERCENT;\r\n                    double toPERCENT = 0.01f;\r\n\r\n\r\n                    switch (discountSELECTED) {\r\n                        case &quot;SENIOR CITIZEN/PWD&quot;:\r\n                        case &quot;STUDENT&quot;:\r\n                            Toast.makeText(encodeActivity.this, &quot;20% OFF&quot;, Toast.LENGTH_SHORT).show();\r\n\r\n                            discountPERCENT = (float) (20 * toPERCENT);\r\n\r\n                            dataEDIT.putFloat(&quot;data_discount&quot;, discountPERCENT);\r\n                            dataEDIT.commit();\r\n\r\n                            break;\r\n\r\n                        case &quot;OFW/BALIKBAYAN&quot;:\r\n                            Toast.makeText(encodeActivity.this, &quot;10% OFF&quot;, Toast.LENGTH_SHORT).show();\r\n\r\n                            discountPERCENT = (float) (10 * toPERCENT);\r\n\r\n                            dataEDIT.putFloat(&quot;data_discount&quot;, discountPERCENT);\r\n                            dataEDIT.commit();\r\n\r\n                            break;\r\n\r\n                        case &quot;NONE&quot;:\r\n                            discountPERCENT = (0);\r\n                            dataEDIT.putFloat(&quot;data_discount&quot;, discountPERCENT);\r\n                            dataEDIT.commit();\r\n\r\n                            break;\r\n\r\n                        default:\r\n                            Toast.makeText(encodeActivity.this, &quot;!! discount NOT FOUND&quot;, Toast.LENGTH_SHORT).show();\r\n                            break;\r\n                    }\r\n                }\r\n\r\n                @Override\r\n                public void onNothingSelected(AdapterView&lt;?&gt; adapterView) {\r\n\r\n                }\r\n            });\r\n        }\r\n\r\n    }\r\n\r\n    /* Generic Listeners */\r\n    @Override\r\n    public void onItemSelected(AdapterView&lt;?&gt; parent, View view, int i, long l) {\r\n        String text = parent.getItemAtPosition(i).toString();\r\n        //Toast.makeText(parent.getContext(), text + &quot;DISCOUNT&quot;, Toast.LENGTH_SHORT).show();\r\n    }\r\n\r\n    public void onRadioButtonClicked(View v) {\r\n        // generic radiobutton listener\r\n    }\r\n\r\n    @Override\r\n    public void onNothingSelected(AdapterView&lt;?&gt; adapterView) {\r\n\r\n    }\r\n\r\n    /* Custom Methods */\r\n\r\n    // open another app to make cashless payment\r\n    private void makeGCASH() {\r\n        Toast.makeText(getApplicationContext(), &quot;Paying GCash&quot;, Toast.LENGTH_SHORT).show();\r\n        // com.globe.gcash.android\r\n        Intent my_intent = getPackageManager().getLaunchIntentForPackage(&quot;com.globe.gcash.android&quot;);\r\n        startActivity(my_intent);\r\n    }\r\n\r\n    // go to the bill\r\n    private void makeBill() {\r\n        float amt_received;\r\n        EditText paymentENTRY;\r\n\r\n        paymentENTRY = findViewById(R.id.received_paymentENTRY);\r\n        amt_received = Float.parseFloat(paymentENTRY.getText().toString());\r\n\r\n        Intent my_intent = new Intent(this, billActivity.class);\r\n        my_intent.putExtra(&quot;received_amt&quot;, amt_received);\r\n        startActivity(my_intent);\r\n    }\r\n\r\n    // get instances of object types\r\n    private int getCount(ArrayList&lt;listitem&gt; cart, String type){\r\n\r\n        int count = 0;\r\n        for (int i = 0; i &lt; cart.size(); i++) {\r\n            if ( cart.get(i).GETtype_listitem().equals( type ) )\r\n            { count++; }\r\n        }\r\n\r\n        return count;\r\n    }\r\n\r\n    private int getQuantity_Sum(ArrayList&lt;listitem&gt; cart, String type){\r\n\r\n        int tempSum= 0;\r\n        for (int i = 0;\r\n\r\n             i &lt; cart.size()\r\n             &amp;&amp;\r\n             cart.get(i).GETtype_listitem().equals( type );\r\n\r\n             i++\r\n        )\r\n        { tempSum = tempSum + cart.get(i).GETqty_listitem(); }\r\n\r\n        return tempSum;\r\n    }\r\n    \r\n}\r\n```\r\n\r\n----------\r\n\r\n[![enter image description here](https://i.stack.imgur.com/7IiAP.png)](https://i.stack.imgur.com/7IiAP.png)\r\n\r\nIn my first attempt, the onclick event will create duplicate orders if I change the color.\r\n\r\n![This was my first attempt at implementing functionality](https://i.stack.imgur.com/wMYaS.png &quot;Attempt #1&quot;)\r\n\r\nThe second attempt failed because it adds an item with 0 quantity attribute, and I need to click on the item button more than once to actually change its respective counter\r\n\r\nThis is what happens when I click once\r\n\r\n![This is what happens when I click once](https://i.stack.imgur.com/qwyf3.png &quot;Attempt #2 (1/3)&quot;)\r\n\r\nThis is what happen when I click 3 times.\r\n\r\n![This is what happen when I click 3 times.](https://i.stack.imgur.com/2d77R.png &quot;Attempt #2 (2/3)&quot;)\r\n\r\nResult:\r\n\r\n![This is the end result](https://i.stack.imgur.com/MRDgA.png &quot;Attempt #2 (3/3)&quot;)\r\n\r\nHow can I reset the `item_quantity`, `item_color`, and `item_type` variables so that a new object does not read the attributes of a previous object?","title":"How can I reset variables to their default values?","body":"<p>I am an IT student in 2nd year. I am making a wholesale app.</p>\n<p>How it works:</p>\n<blockquote>\n<p>First the user browses for an item in the store. The data of a selected item is used to create an object. The object is added to an ArrayList that acts as the user's cart. This ArrayList and its contemporary data can be seen in a Cart activity and a Receipt/Checkout activity.</p>\n<p>Pressing the OK button in the Receipt activity duplicates the arraylist, stores the duplicate in the Order History, finally it clears the original arraylist and goes back to the main menu.</p>\n</blockquote>\n<p><em><strong>Shopping Activity</strong></em></p>\n<pre><code>package com.example.wearhouse;\n\nimport androidx.appcompat.app.AppCompatActivity;\nimport androidx.navigation.ui.AppBarConfiguration;\n\nimport android.annotation.SuppressLint;\nimport android.content.Intent;\n\nimport java.text.DecimalFormat;\nimport java.util.ArrayList;\nimport java.util.Locale;\n\nimport android.content.SharedPreferences;\nimport android.os.Bundle;\nimport android.view.View;\nimport android.widget.AdapterView;\nimport android.widget.ArrayAdapter;\nimport android.widget.Button;\nimport android.widget.EditText;\nimport android.widget.ImageButton;\nimport android.widget.RadioButton;\nimport android.widget.RadioGroup;\nimport android.widget.Spinner;\nimport android.widget.TextView;\nimport android.widget.Toast;\n\n\nimport com.google.android.material.chip.Chip;\nimport com.google.android.material.chip.ChipGroup;\n\npublic class encodeActivity extends AppCompatActivity implements AdapterView.OnItemSelectedListener {\n    // set defaults\n    private String empty_STR = &quot;&quot;;\n    private int empty_INT = 0;\n    private final static String DEFAULT_STR = null;\n    private final static int DEFAULT_INT = 0;\n\n    /*  For individual orders: These data will be passed to the listitem class  */\n    private volatile int item_quantity;\n    private volatile String item_type;\n    private volatile String item_color;\n    /*                                                    */\n\n\n    // represents items in bill\n    protected static ArrayList&lt;listitem&gt; checkoutSTRUCT = new ArrayList&lt;&gt;();\n\n    /* START */\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.layout_encode);\n\n        TextView shirtCOUNTER, shortsCOUNTER;\n        EditText notesENTRY, paymentENTRY, quantityCOUNTER;\n        ImageButton shirtBTN, shortsBTN;\n        Button decBTN, incBTN, billBTN;\n        ChipGroup colorCG;\n        RadioGroup sex, sizing;\n        Spinner paymodeSPIN, discountSPIN;\n\n        shirtCOUNTER = (TextView) findViewById(R.id.shirtCOUNTER);\n        shortsCOUNTER = (TextView) findViewById(R.id.shortsCOUNTER);\n        quantityCOUNTER = (EditText) findViewById(R.id.quantityENTRY);\n\n        paymentENTRY = (EditText) findViewById(R.id.received_paymentENTRY);\n\n        try {\n            this.getSupportActionBar().hide(); // hide Action bar\n            Integer.parseInt(quantityCOUNTER.getText().toString());\n\n        } catch (NullPointerException e) {\n        } catch (NumberFormatException e) {\n            quantityCOUNTER.setText(&quot;1&quot;); // set default quantity multiplier\n            paymentENTRY.setText( String.valueOf(DEFAULT_INT) );\n\n        }\n\n        // widgets\n        notesENTRY = (EditText) findViewById(R.id.notesENTRY);\n\n        decBTN = (Button) findViewById(R.id.decBTN);\n        incBTN = (Button) findViewById(R.id.incBTN);\n        billBTN = (Button) findViewById(R.id.billBTN);\n\n        shirtBTN = (ImageButton) findViewById(R.id.shirtBTN);\n        shortsBTN = (ImageButton) findViewById(R.id.shortsBTN);\n\n        sex = (RadioGroup) findViewById(R.id.sexRG);\n        sizing = (RadioGroup) findViewById(R.id.sizeRG);\n\n        colorCG = (ChipGroup) findViewById(R.id.colorCG);\n\n        paymodeSPIN = (Spinner) findViewById(R.id.paymode);\n        discountSPIN = (Spinner) findViewById(R.id.discountSPIN);\n\n        // mode of payment\n        ArrayAdapter&lt;CharSequence&gt; adapterPM = ArrayAdapter.createFromResource(this, R.array.payMode, android.R.layout.simple_spinner_dropdown_item);\n        adapterPM.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);\n        paymodeSPIN.setAdapter(adapterPM);\n\n        // discount\n        ArrayAdapter&lt;CharSequence&gt; adapterDS = ArrayAdapter.createFromResource(this, R.array.discountMode, android.R.layout.simple_spinner_dropdown_item);\n        adapterDS.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);\n        discountSPIN.setAdapter(adapterDS);\n\n        // listeners\n        {\n            sex.setOnCheckedChangeListener(new RadioGroup.OnCheckedChangeListener() {\n                @Override\n                public void onCheckedChanged(RadioGroup radioGroup, int checkedR) {\n                    checkedR = sex.getCheckedRadioButtonId();\n                    RadioButton temp = findViewById(checkedR);\n\n                    Toast.makeText(getApplicationContext(), &quot;Selected &quot; + temp.getText(), Toast.LENGTH_SHORT).show();\n\n                }\n            });\n\n            sizing.setOnCheckedChangeListener(new RadioGroup.OnCheckedChangeListener() {\n                @Override\n                public void onCheckedChanged(RadioGroup radioGroup, int checkedR) {\n                    checkedR = sizing.getCheckedRadioButtonId();\n                    RadioButton temp = findViewById(checkedR);\n\n                    Toast.makeText(getApplicationContext(), &quot;Size &quot; + temp.getText(), Toast.LENGTH_SHORT).show();\n                }\n            });\n\n            shirtBTN.setOnClickListener(new View.OnClickListener() {\n                @Override\n                public void onClick(View view) {\n                    final Chip tempCHIP;\n                    final int tempCOLOR;\n                    final float item_cost;\n\n                    // get selected color\n                    tempCOLOR = colorCG.getCheckedChipId();\n                    tempCHIP = findViewById(tempCOLOR);\n                    item_color = (String) tempCHIP.getText();\n\n                    // get selected quantity\n                    item_quantity = Integer.parseInt( quantityCOUNTER.getText().toString() );\n                    System.out.println(&quot;item_quantity: &quot; + item_quantity);\n\n                    // get cost based on quantity\n                    item_cost = item_quantity * 150;\n\n                    item_type = &quot;SHIRT&quot;;\n                    System.out.println(&quot;item_type: &quot; + item_type);\n\n                    // add to cart\n                    checkoutSTRUCT.add(new listitem(item_quantity, item_color, item_type, item_cost));\n                    Toast.makeText(getApplicationContext(), getCount(checkoutSTRUCT, item_type) + &quot; &quot; + item_type, Toast.LENGTH_SHORT).show();\n\n                    // update counter\n                    shirtCOUNTER.setText( String.valueOf( getQuantity_Sum(checkoutSTRUCT, item_type) ) );\n\n                    // reset values\n                    // FIXME this does not work; find another way to clear @item_quantity, @item_color, and @item_type\n                    item_quantity = empty_INT;\n                    item_color = empty_STR;\n                    item_type = empty_STR;\n                }\n            });\n\n            shortsBTN.setOnClickListener(new View.OnClickListener() {\n                @Override\n                public void onClick(View view) {\n                    final Chip tempCHIP;\n                    final int tempCOLOR;\n                    final float item_cost;\n\n\n                    System.out.println(&quot;item_color&quot; + item_color);\n\n                    // get selected color\n                    tempCOLOR = colorCG.getCheckedChipId();\n                    tempCHIP = findViewById(tempCOLOR);\n                    item_color = (String) tempCHIP.getText();\n\n                    // get selected quantity\n                    System.out.println(&quot;item_quantity: &quot; + item_quantity);\n                    item_quantity = Integer.parseInt( quantityCOUNTER.getText().toString() );\n\n                    // get cost based on quantity\n                    item_cost = item_quantity * 150;\n\n                    System.out.println(&quot;item_type: &quot; + item_type);\n                    item_type = &quot;SHORTS&quot;;\n\n                    // add to cart\n                    checkoutSTRUCT.add(new listitem(item_quantity, item_color, item_type, item_cost));\n                    System.out.println(&quot;expected: &quot;);\n                    System.out.println(&quot;item_color&quot; + item_color);\n                    System.out.println(&quot;item_quantity: &quot; + item_quantity);\n                    System.out.println(&quot;item_type: &quot; + item_type);\n\n                    Toast.makeText(getApplicationContext(), getCount(checkoutSTRUCT, item_type) + &quot; &quot; + item_type, Toast.LENGTH_SHORT).show();\n\n                    shortsCOUNTER.setText(String.valueOf( getQuantity_Sum(checkoutSTRUCT, item_type) ));\n\n                    // reset values\n                    item_quantity = empty_INT;\n                    item_color = empty_STR;\n                    item_type = empty_STR;\n                }\n            });\n\n            decBTN.setOnClickListener(new View.OnClickListener() {\n                @Override\n                public void onClick(View view) {\n                    try {\n\n                        String x = String.valueOf(quantityCOUNTER.getText());\n\n\n                        int value = Integer.parseInt(x);\n                        if (value &gt; 1)\n                            value--;\n\n                        String valueSTR = String.valueOf(value);\n                        quantityCOUNTER.setText(valueSTR);\n\n                    } catch (NumberFormatException e) {\n                        quantityCOUNTER.setText(&quot;1&quot;);\n                        decBTN.setEnabled(false);\n                    }\n                }\n            });\n\n            incBTN.setOnClickListener(new View.OnClickListener() {\n                @Override\n                public void onClick(View view) {\n                    try {\n                        String x = String.valueOf(quantityCOUNTER.getText());\n\n                        int value = Integer.parseInt(x);\n                        value++;\n\n                        String valueSTR = String.valueOf(value);\n                        quantityCOUNTER.setText(valueSTR);\n\n                    } catch (NumberFormatException e) {\n                        quantityCOUNTER.setText(&quot;1&quot;);\n                        decBTN.setEnabled(false);\n                    }\n                }\n            });\n\n            billBTN.setOnClickListener(new View.OnClickListener() {\n                @Override\n                public void onClick(View view) {\n                    String payment_mode = String.valueOf(paymodeSPIN.getSelectedItem());\n\n                    // open gcash app if GCash is selected\n                    if (payment_mode.equals(&quot;GCash&quot;)) {\n                        makeGCASH();\n                    }\n\n                    if (payment_mode.equals(&quot;In-person&quot;)) {\n                        makeBill();\n                    }\n                }\n            });\n\n            paymodeSPIN.setOnItemSelectedListener(this);\n\n            discountSPIN.setOnItemSelectedListener(new AdapterView.OnItemSelectedListener() {\n                // save and pass spinner ITEM SELECTED data\n                private final SharedPreferences dataLOCAL = getSharedPreferences(&quot;MySavedData&quot;, MODE_PRIVATE);\n                private final SharedPreferences.Editor dataEDIT = dataLOCAL.edit();\n\n                @Override\n                public void onItemSelected(AdapterView&lt;?&gt; adapterView, View view, int i, long l) {\n\n                    String discountSELECTED = String.valueOf(discountSPIN.getSelectedItem());\n                    float discountPERCENT;\n                    double toPERCENT = 0.01f;\n\n\n                    switch (discountSELECTED) {\n                        case &quot;SENIOR CITIZEN/PWD&quot;:\n                        case &quot;STUDENT&quot;:\n                            Toast.makeText(encodeActivity.this, &quot;20% OFF&quot;, Toast.LENGTH_SHORT).show();\n\n                            discountPERCENT = (float) (20 * toPERCENT);\n\n                            dataEDIT.putFloat(&quot;data_discount&quot;, discountPERCENT);\n                            dataEDIT.commit();\n\n                            break;\n\n                        case &quot;OFW/BALIKBAYAN&quot;:\n                            Toast.makeText(encodeActivity.this, &quot;10% OFF&quot;, Toast.LENGTH_SHORT).show();\n\n                            discountPERCENT = (float) (10 * toPERCENT);\n\n                            dataEDIT.putFloat(&quot;data_discount&quot;, discountPERCENT);\n                            dataEDIT.commit();\n\n                            break;\n\n                        case &quot;NONE&quot;:\n                            discountPERCENT = (0);\n                            dataEDIT.putFloat(&quot;data_discount&quot;, discountPERCENT);\n                            dataEDIT.commit();\n\n                            break;\n\n                        default:\n                            Toast.makeText(encodeActivity.this, &quot;!! discount NOT FOUND&quot;, Toast.LENGTH_SHORT).show();\n                            break;\n                    }\n                }\n\n                @Override\n                public void onNothingSelected(AdapterView&lt;?&gt; adapterView) {\n\n                }\n            });\n        }\n\n    }\n\n    /* Generic Listeners */\n    @Override\n    public void onItemSelected(AdapterView&lt;?&gt; parent, View view, int i, long l) {\n        String text = parent.getItemAtPosition(i).toString();\n        //Toast.makeText(parent.getContext(), text + &quot;DISCOUNT&quot;, Toast.LENGTH_SHORT).show();\n    }\n\n    public void onRadioButtonClicked(View v) {\n        // generic radiobutton listener\n    }\n\n    @Override\n    public void onNothingSelected(AdapterView&lt;?&gt; adapterView) {\n\n    }\n\n    /* Custom Methods */\n\n    // open another app to make cashless payment\n    private void makeGCASH() {\n        Toast.makeText(getApplicationContext(), &quot;Paying GCash&quot;, Toast.LENGTH_SHORT).show();\n        // com.globe.gcash.android\n        Intent my_intent = getPackageManager().getLaunchIntentForPackage(&quot;com.globe.gcash.android&quot;);\n        startActivity(my_intent);\n    }\n\n    // go to the bill\n    private void makeBill() {\n        float amt_received;\n        EditText paymentENTRY;\n\n        paymentENTRY = findViewById(R.id.received_paymentENTRY);\n        amt_received = Float.parseFloat(paymentENTRY.getText().toString());\n\n        Intent my_intent = new Intent(this, billActivity.class);\n        my_intent.putExtra(&quot;received_amt&quot;, amt_received);\n        startActivity(my_intent);\n    }\n\n    // get instances of object types\n    private int getCount(ArrayList&lt;listitem&gt; cart, String type){\n\n        int count = 0;\n        for (int i = 0; i &lt; cart.size(); i++) {\n            if ( cart.get(i).GETtype_listitem().equals( type ) )\n            { count++; }\n        }\n\n        return count;\n    }\n\n    private int getQuantity_Sum(ArrayList&lt;listitem&gt; cart, String type){\n\n        int tempSum= 0;\n        for (int i = 0;\n\n             i &lt; cart.size()\n             &amp;&amp;\n             cart.get(i).GETtype_listitem().equals( type );\n\n             i++\n        )\n        { tempSum = tempSum + cart.get(i).GETqty_listitem(); }\n\n        return tempSum;\n    }\n    \n}\n</code></pre>\n<hr />\n<p><a href=\"https://i.stack.imgur.com/7IiAP.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/7IiAP.png\" alt=\"enter image description here\" /></a></p>\n<p>In my first attempt, the onclick event will create duplicate orders if I change the color.</p>\n<p><img src=\"https://i.stack.imgur.com/wMYaS.png\" alt=\"This was my first attempt at implementing functionality\" title=\"Attempt #1\" /></p>\n<p>The second attempt failed because it adds an item with 0 quantity attribute, and I need to click on the item button more than once to actually change its respective counter</p>\n<p>This is what happens when I click once</p>\n<p><img src=\"https://i.stack.imgur.com/qwyf3.png\" alt=\"This is what happens when I click once\" title=\"Attempt #2 (1/3)\" /></p>\n<p>This is what happen when I click 3 times.</p>\n<p><img src=\"https://i.stack.imgur.com/2d77R.png\" alt=\"This is what happen when I click 3 times.\" title=\"Attempt #2 (2/3)\" /></p>\n<p>Result:</p>\n<p><img src=\"https://i.stack.imgur.com/MRDgA.png\" alt=\"This is the end result\" title=\"Attempt #2 (3/3)\" /></p>\n<p>How can I reset the <code>item_quantity</code>, <code>item_color</code>, and <code>item_type</code> variables so that a new object does not read the attributes of a previous object?</p>\n"},{"tags":["java","oauth-2.0"],"answers":[{"tags":[],"owner":{"account_id":308139,"reputation":8199,"user_id":619830,"accept_rate":75,"display_name":"ch4mp"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1667323648,"creation_date":1667323648,"answer_id":74279642,"question_id":74276984,"body_markdown":"Why not using one of Spring REST clients which can handle OAuth2 out of the box?\r\n\r\nAll of `@FeignClient`, `RestTemplate` and `WebClient` expose configuration properties for acquiring access-token from OAuth2 authorization-server using client-credentials (or directly set authorization header if you are processing an authorized request and want to forward incoming access-token).\r\n\r\nChoose one of existing clients and read its manual. ","title":"O365 Modern authentication with Java Spring Context","body":"<p>Why not using one of Spring REST clients which can handle OAuth2 out of the box?</p>\n<p>All of <code>@FeignClient</code>, <code>RestTemplate</code> and <code>WebClient</code> expose configuration properties for acquiring access-token from OAuth2 authorization-server using client-credentials (or directly set authorization header if you are processing an authorized request and want to forward incoming access-token).</p>\n<p>Choose one of existing clients and read its manual.</p>\n"}],"owner":{"account_id":11080845,"reputation":11,"user_id":8136055,"display_name":"Dario"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":159,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1667323648,"creation_date":1667310714,"question_id":74276984,"body_markdown":"I have to use oAuth2 &quot;modern authentication&quot; in Java Spring Context and found [here](https://stackoverflow.com/questions/28424550/ews-java-apis-using-oauth2). Java code I could use.\r\n\r\nThe getAccessToken() method has however a parameter of type ```ManagedExecutorService``` and I don&#39;t have any idea, what kind of value it should be.\r\n\r\nHere is the code:\r\n\r\n```\r\n@Override\r\npublic String getAccessToken(final String clientId, final String clientSecret, final ManagedExecutorService service)\r\n        throws MalformedURLException, ExecutionException, InterruptedException, TimeoutException {\r\n    final long now = System.currentTimeMillis();\r\n    if (accessToken != null &amp;&amp; now &lt; expiryTimeMs - REFRESH_BEFORE_EXPIRY_MS) {\r\n\r\n        final AuthenticationContext context = new AuthenticationContext(AUTHORITY, false, service);\r\n        final AuthenticationCallback&lt;AuthenticationResult&gt; callback = new AuthenticationCallback&lt;&gt;() {\r\n\r\n            @Override\r\n            public void onSuccess(final AuthenticationResult result) {\r\n                log.info(&quot;received token&quot;);\r\n            }\r\n\r\n            @Override\r\n            public void onFailure(final Throwable exc) {\r\n                throw new RuntimeException(exc);\r\n            }\r\n        };\r\n\r\n        log.info(&quot;requesting token&quot;);\r\n        final Future&lt;AuthenticationResult&gt; future = context.acquireToken(RESOUCE,\r\n                new ClientCredential(clientId, clientSecret), callback);\r\n\r\n        // wait for access token\r\n        final AuthenticationResult result = future.get(30, TimeUnit.SECONDS);\r\n\r\n        // cache token and expiration\r\n        accessToken = result.getAccessToken();\r\n        expiryTimeMs = result.getExpiresAfter();\r\n    }\r\n\r\n    return accessToken;\r\n}\r\n```\r\n\r\n\r\n\r\n\r\nI put already all necessary dependencies into the project but can&#39;t test the method until I know what ```ManagedExecutorService```is and where do I get the parameter from.","title":"O365 Modern authentication with Java Spring Context","body":"<p>I have to use oAuth2 &quot;modern authentication&quot; in Java Spring Context and found <a href=\"https://stackoverflow.com/questions/28424550/ews-java-apis-using-oauth2\">here</a>. Java code I could use.</p>\n<p>The getAccessToken() method has however a parameter of type <code>ManagedExecutorService</code> and I don't have any idea, what kind of value it should be.</p>\n<p>Here is the code:</p>\n<pre><code>@Override\npublic String getAccessToken(final String clientId, final String clientSecret, final ManagedExecutorService service)\n        throws MalformedURLException, ExecutionException, InterruptedException, TimeoutException {\n    final long now = System.currentTimeMillis();\n    if (accessToken != null &amp;&amp; now &lt; expiryTimeMs - REFRESH_BEFORE_EXPIRY_MS) {\n\n        final AuthenticationContext context = new AuthenticationContext(AUTHORITY, false, service);\n        final AuthenticationCallback&lt;AuthenticationResult&gt; callback = new AuthenticationCallback&lt;&gt;() {\n\n            @Override\n            public void onSuccess(final AuthenticationResult result) {\n                log.info(&quot;received token&quot;);\n            }\n\n            @Override\n            public void onFailure(final Throwable exc) {\n                throw new RuntimeException(exc);\n            }\n        };\n\n        log.info(&quot;requesting token&quot;);\n        final Future&lt;AuthenticationResult&gt; future = context.acquireToken(RESOUCE,\n                new ClientCredential(clientId, clientSecret), callback);\n\n        // wait for access token\n        final AuthenticationResult result = future.get(30, TimeUnit.SECONDS);\n\n        // cache token and expiration\n        accessToken = result.getAccessToken();\n        expiryTimeMs = result.getExpiresAfter();\n    }\n\n    return accessToken;\n}\n</code></pre>\n<p>I put already all necessary dependencies into the project but can't test the method until I know what <code>ManagedExecutorService</code>is and where do I get the parameter from.</p>\n"},{"tags":["java","json","jackson","objectmapper"],"comments":[{"owner":{"account_id":2545112,"reputation":1873,"user_id":2210064,"accept_rate":80,"display_name":"Rajesh Hatwar"},"score":0,"creation_date":1477379466,"post_id":40233275,"comment_id":67729492,"body_markdown":"Have a look http://stackoverflow.com/questions/12583638/when-is-the-jsonproperty-property-used-and-what-is-it-used-for","body":"Have a look <a href=\"http://stackoverflow.com/questions/12583638/when-is-the-jsonproperty-property-used-and-what-is-it-used-for\" title=\"when is the jsonproperty property used and what is it used for\">stackoverflow.com/questions/12583638/&hellip;</a>"},{"owner":{"account_id":2545112,"reputation":1873,"user_id":2210064,"accept_rate":80,"display_name":"Rajesh Hatwar"},"score":0,"creation_date":1477379661,"post_id":40233275,"comment_id":67729603,"body_markdown":"this link might help you http://websystique.com/java/json/jackson-json-annotations-example/","body":"this link might help you <a href=\"http://websystique.com/java/json/jackson-json-annotations-example/\" rel=\"nofollow noreferrer\">websystique.com/java/json/jackson-json-annotations-example</a>"},{"owner":{"account_id":3963644,"reputation":589,"user_id":3270198,"accept_rate":67,"display_name":"Swaraj"},"score":0,"creation_date":1477379971,"post_id":40233275,"comment_id":67729763,"body_markdown":"The problem is that json can vary call to call so snakecase can be camelcase format","body":"The problem is that json can vary call to call so snakecase can be camelcase format"}],"answers":[{"tags":[],"owner":{"account_id":3920628,"reputation":1259,"user_id":3247467,"display_name":"kjsebastian"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1477379565,"creation_date":1477379565,"answer_id":40233582,"question_id":40233275,"body_markdown":"Use jackson-annotations library and add `@JsonProperty` as below.\r\n\r\n    class MyClass {\r\n      public String tableKey;\r\n      @JsonProperty(&quot;not_allowed_pwd&quot;)\r\n      public Integer notAllowedPwd;\r\n    }","title":"How to deserialize multiple cases with Jackson","body":"<p>Use jackson-annotations library and add <code>@JsonProperty</code> as below.</p>\n\n<pre><code>class MyClass {\n  public String tableKey;\n  @JsonProperty(\"not_allowed_pwd\")\n  public Integer notAllowedPwd;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4030439,"reputation":647,"user_id":3316764,"display_name":"Franjavi"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1477382000,"creation_date":1477382000,"answer_id":40234331,"question_id":40233275,"body_markdown":"You can have a second setter with a `@JsonProperty` annotation for the second field name:\r\n\r\n    class MyClass {\r\n        private String tableKey;\r\n        private Integer notAllowedPwd;\r\n\r\n        public String getTableKey() {\r\n            return tableKey;\r\n        }\r\n\r\n        public void setTableKey(String tableKey) {\r\n            this.tableKey = tableKey;\r\n        }\r\n\r\n        public Integer getNotAllowedPwd() {\r\n            return notAllowedPwd;\r\n        }\r\n\r\n        public void setNotAllowedPwd(Integer notAllowedPwd) {\r\n            this.notAllowedPwd = notAllowedPwd;\r\n        }\r\n\r\n        @JsonProperty(&quot;not_allowed_pwd&quot;)\r\n        public void setNotAllowedPwd2(Integer notAllowedPwd) {\r\n            this.notAllowedPwd = notAllowedPwd;\r\n        }\r\n    }\r\n\r\nTake into consideration that if the two properties are present in the json, they will be overwritten.","title":"How to deserialize multiple cases with Jackson","body":"<p>You can have a second setter with a <code>@JsonProperty</code> annotation for the second field name:</p>\n\n<pre><code>class MyClass {\n    private String tableKey;\n    private Integer notAllowedPwd;\n\n    public String getTableKey() {\n        return tableKey;\n    }\n\n    public void setTableKey(String tableKey) {\n        this.tableKey = tableKey;\n    }\n\n    public Integer getNotAllowedPwd() {\n        return notAllowedPwd;\n    }\n\n    public void setNotAllowedPwd(Integer notAllowedPwd) {\n        this.notAllowedPwd = notAllowedPwd;\n    }\n\n    @JsonProperty(\"not_allowed_pwd\")\n    public void setNotAllowedPwd2(Integer notAllowedPwd) {\n        this.notAllowedPwd = notAllowedPwd;\n    }\n}\n</code></pre>\n\n<p>Take into consideration that if the two properties are present in the json, they will be overwritten.</p>\n"},{"tags":[],"owner":{"account_id":13715019,"reputation":1,"user_id":9896324,"display_name":"Дмитрий Дедов"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1667323450,"creation_date":1667323450,"answer_id":74279610,"question_id":40233275,"body_markdown":"Use these annotations on field:\r\n```\r\n@JsonProperty(&quot;not_allowed_pwd&quot;)\r\n@JsonAlias(&quot;notAllowedPwd&quot;)\r\npublic Integer notAllowedPwd;\r\n```","title":"How to deserialize multiple cases with Jackson","body":"<p>Use these annotations on field:</p>\n<pre><code>@JsonProperty(&quot;not_allowed_pwd&quot;)\n@JsonAlias(&quot;notAllowedPwd&quot;)\npublic Integer notAllowedPwd;\n</code></pre>\n"}],"owner":{"account_id":3963644,"reputation":589,"user_id":3270198,"accept_rate":67,"display_name":"Swaraj"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":915,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":3,"score":1,"last_activity_date":1667323450,"creation_date":1477378512,"question_id":40233275,"body_markdown":"I am working with jackson-core-2.8.3 and I have a json which has element provided in multiple cases. I want to map it to my class but I am not able to do so because I can have only one type of PropertyNamingStratergy in my class.\r\n\r\nExample Json:- \r\n\r\n    {&quot;tableKey&quot;: &quot;1&quot;,&quot;not_allowed_pwd&quot;: 10}\r\n\r\nThere can be another json like \r\n\r\n    {&quot;tableKey&quot;: &quot;1&quot;,&quot;notAllowedPwd&quot;: 10}\r\n\r\nClassToMap :-\r\n\r\n    class MyClass {\r\n    public String tableKey;\r\n    public Integer notAllowedPwd;\r\n    }\r\n\r\nObjectMapper code :-\r\n\r\n    ObjectMapperobjectMapper=new ObjectMapper();\r\n    objectMapper.configure(DeserializationFeature.FAIL_ON_UNKNOWN_PROPERTIES,false);\r\n    objectMapper.configure(MapperFeature.ACCEPT_CASE_INSENSITIVE_PROPERTIES,true);\r\n    objectMapper.setSerializationInclusion(Include.NON_NULL);\r\n    objectMapper.setVisibility(PropertyAccessor.ALL,Visibility.NONE);\r\n    objectMapper.setVisibility(PropertyAccessor.FIELD,Visibility.ANY);\r\n    MyClass obj = objectMapper.readValue(s, MyClass.class);\r\n\r\n\r\nI am not finding any solution anywhere. It will be good if anyone can help how to proceed.","title":"How to deserialize multiple cases with Jackson","body":"<p>I am working with jackson-core-2.8.3 and I have a json which has element provided in multiple cases. I want to map it to my class but I am not able to do so because I can have only one type of PropertyNamingStratergy in my class.</p>\n\n<p>Example Json:- </p>\n\n<pre><code>{\"tableKey\": \"1\",\"not_allowed_pwd\": 10}\n</code></pre>\n\n<p>There can be another json like </p>\n\n<pre><code>{\"tableKey\": \"1\",\"notAllowedPwd\": 10}\n</code></pre>\n\n<p>ClassToMap :-</p>\n\n<pre><code>class MyClass {\npublic String tableKey;\npublic Integer notAllowedPwd;\n}\n</code></pre>\n\n<p>ObjectMapper code :-</p>\n\n<pre><code>ObjectMapperobjectMapper=new ObjectMapper();\nobjectMapper.configure(DeserializationFeature.FAIL_ON_UNKNOWN_PROPERTIES,false);\nobjectMapper.configure(MapperFeature.ACCEPT_CASE_INSENSITIVE_PROPERTIES,true);\nobjectMapper.setSerializationInclusion(Include.NON_NULL);\nobjectMapper.setVisibility(PropertyAccessor.ALL,Visibility.NONE);\nobjectMapper.setVisibility(PropertyAccessor.FIELD,Visibility.ANY);\nMyClass obj = objectMapper.readValue(s, MyClass.class);\n</code></pre>\n\n<p>I am not finding any solution anywhere. It will be good if anyone can help how to proceed.</p>\n"},{"tags":["java","lombok"],"comments":[{"owner":{"account_id":9571720,"reputation":6305,"user_id":7109162,"accept_rate":84,"display_name":"XtremeBaumer"},"score":0,"creation_date":1667202642,"post_id":74260132,"comment_id":131106190,"body_markdown":"[`@Builder`](https://projectlombok.org/features/Builder) can&#39;t be used to modify an existing instance as the builder is a different class than what it is building.","body":"<a href=\"https://projectlombok.org/features/Builder\" rel=\"nofollow noreferrer\"><code>@Builder</code></a> can&#39;t be used to modify an existing instance as the builder is a different class than what it is building."}],"answers":[{"tags":[],"owner":{"account_id":2150391,"reputation":435,"user_id":1906940,"display_name":"Gleb"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1667215541,"creation_date":1667215541,"answer_id":74262558,"question_id":74260132,"body_markdown":"Not exactly modify, but you can use it as sort of copy constructor, which creates a new object builder out of old one. Then you can modify only the specific fields. Annotate your object with `@Builder(toBuilder=true)` and then call `.toBuilder()` on the object instance.\r\n\r\nVery handy when dealing with immutable objects.\r\n\r\nExample:\r\n\r\n    @Value\r\n    @Builder(toBuilder = true)\r\n    public class A {\r\n        String name;\r\n        long value;\r\n    }\r\n\r\nThen code like this:\r\n\r\n    var a = A.builder().name(&quot;test-name&quot;).value(1234L).build();\r\n    System.out.println(a);\r\n    var b = a.toBuilder().value(4321L).build();\r\n    System.out.println(b);\r\n\r\nPrints out this:\r\n\r\n    A(name=test-name, value=1234)\r\n    A(name=test-name, value=4321)\r\n\r\n\r\nReferences:\r\n\r\nhttps://projectlombok.org/features/Builder\r\n\r\nhttps://projectlombok.org/features/Value","title":"Can @Builder be used for object creation as well as object modification?","body":"<p>Not exactly modify, but you can use it as sort of copy constructor, which creates a new object builder out of old one. Then you can modify only the specific fields. Annotate your object with <code>@Builder(toBuilder=true)</code> and then call <code>.toBuilder()</code> on the object instance.</p>\n<p>Very handy when dealing with immutable objects.</p>\n<p>Example:</p>\n<pre><code>@Value\n@Builder(toBuilder = true)\npublic class A {\n    String name;\n    long value;\n}\n</code></pre>\n<p>Then code like this:</p>\n<pre><code>var a = A.builder().name(&quot;test-name&quot;).value(1234L).build();\nSystem.out.println(a);\nvar b = a.toBuilder().value(4321L).build();\nSystem.out.println(b);\n</code></pre>\n<p>Prints out this:</p>\n<pre><code>A(name=test-name, value=1234)\nA(name=test-name, value=4321)\n</code></pre>\n<p>References:</p>\n<p><a href=\"https://projectlombok.org/features/Builder\" rel=\"nofollow noreferrer\">https://projectlombok.org/features/Builder</a></p>\n<p><a href=\"https://projectlombok.org/features/Value\" rel=\"nofollow noreferrer\">https://projectlombok.org/features/Value</a></p>\n"}],"owner":{"account_id":26714564,"reputation":3,"user_id":20319343,"display_name":"you88"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":168,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":74262558,"answer_count":1,"score":0,"last_activity_date":1667323355,"creation_date":1667202387,"question_id":74260132,"body_markdown":"I recently learned about object creation using @builder. But suddenly, I wonder if @Builder can be used to modify an object that has already been created.\r\n\r\nWhen I try to modify an object using @setter, the advantage of creating a constructor with @builder seems to disappear. So I tried to modify only some variables using @builder, but it seems to create a new object altogether.\r\n\r\nIs there a way to modify an object using @Builder?  \r\nOr should I just use a setter or create a separate function when modifying an object?","title":"Can @Builder be used for object creation as well as object modification?","body":"<p>I recently learned about object creation using @builder. But suddenly, I wonder if @Builder can be used to modify an object that has already been created.</p>\n<p>When I try to modify an object using @setter, the advantage of creating a constructor with @builder seems to disappear. So I tried to modify only some variables using @builder, but it seems to create a new object altogether.</p>\n<p>Is there a way to modify an object using @Builder?<br />\nOr should I just use a setter or create a separate function when modifying an object?</p>\n"},{"tags":["java","spring","spring-boot","maven","drools"],"comments":[{"owner":{"account_id":183966,"reputation":14606,"user_id":419705,"accept_rate":67,"display_name":"Roddy of the Frozen Peas"},"score":0,"creation_date":1666878999,"post_id":74217937,"comment_id":131043455,"body_markdown":"Your problem is not in how you fire the rules, it&#39;s in how you&#39;re creating your KieContainer bean. Instead of your &#39;fire rules&#39; method, can you share how you instantiate the KieContainer, and an example simple DRL that causes this issue when you try and load it?","body":"Your problem is not in how you fire the rules, it&#39;s in how you&#39;re creating your KieContainer bean. Instead of your &#39;fire rules&#39; method, can you share how you instantiate the KieContainer, and an example simple DRL that causes this issue when you try and load it?"},{"owner":{"account_id":183966,"reputation":14606,"user_id":419705,"accept_rate":67,"display_name":"Roddy of the Frozen Peas"},"score":0,"creation_date":1666879030,"post_id":74217937,"comment_id":131043471,"body_markdown":"Also if you could include the stack trace of the UnsupportedOperationException you mentioned in the comments on Esteban&#39;s answer, that would help.","body":"Also if you could include the stack trace of the UnsupportedOperationException you mentioned in the comments on Esteban&#39;s answer, that would help."}],"answers":[{"tags":[],"owner":{"account_id":1197384,"reputation":6314,"user_id":1168802,"display_name":"Esteban Aliverti"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1666860980,"creation_date":1666860980,"answer_id":74219303,"question_id":74217937,"body_markdown":"Hard to tell. It seems that one of your rules is using something inside an `eval()` that is no longer supported in `8.29.0`.\r\n\r\nYou will need to start removing DRLs from your KieBase or commenting out rules containing `eval()` until you find the problematic one.\r\n\r\nFrom the code, it could also be related to the `dialect` you are using. Are you specifying an explicit dialect for your rules?","title":"Spring boot drools integration not woking after drools updated from version 7.73.0.Final to 8.29.0.Final","body":"<p>Hard to tell. It seems that one of your rules is using something inside an <code>eval()</code> that is no longer supported in <code>8.29.0</code>.</p>\n<p>You will need to start removing DRLs from your KieBase or commenting out rules containing <code>eval()</code> until you find the problematic one.</p>\n<p>From the code, it could also be related to the <code>dialect</code> you are using. Are you specifying an explicit dialect for your rules?</p>\n"}],"owner":{"account_id":14123264,"reputation":101,"user_id":10203261,"display_name":"Akhil"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":822,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1667323280,"creation_date":1666853969,"question_id":74217937,"body_markdown":"We were using spring boot+ drools maven dependency+drl files for implementing certain business rules in our spring boot application.We used the following drools dependencies(drools-core, drools-compiler, drools-decisiontables) with the version 7.73.0.The integration is not woking after drools updated from version 7.73.0.Final  to 8.29.0.Final.Please find the implementation and error trace below.Can someone help to resolve the same\r\n\r\n\r\nMy Config Class\r\n\r\n    @Configuration\r\n    public class DroolsConfig {\r\n    \r\n        private static final String RULES_DRL = &quot;rules/rule-impl.drl&quot;;\r\n        private static final KieServices kieServices = KieServices.Factory.get();\r\n    \r\n        @Bean\r\n        public KieContainer kieContainer() {\r\n            KieFileSystem kieFileSystem = kieServices.newKieFileSystem();\r\n            kieFileSystem.write(ResourceFactory.newClassPathResource(RULES_DRL));\r\n            KieBuilder kb = kieServices.newKieBuilder(kieFileSystem);\r\n            kb.buildAll();\r\n            KieModule kieModule = kb.getKieModule();\r\n            return kieServices.newKieContainer(kieModule.getReleaseId());\r\n        }\r\n    \r\n    }\r\n\r\nCalling class\r\n\r\n   \r\n\r\n     @Autowired\r\n        private KieContainer kieContainer;\r\n    \r\n        public String applyCleansingRules(String name) {\r\n             /////////\r\n            KieSession kieSession = kieContainer.newKieSession();\r\n            /////\r\n            kieSession.insert(name);\r\n            kieSession.fireAllRules(1);\r\n            kieSession.dispose();\r\n            return /////\r\n        }\r\n\r\nError Message :\r\n\r\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:1295) ~[spring-boot-2.7.0.jar:2.7.0]\r\n    \tat com.rule.engine.RuleEngineApplication.main(RuleEngineApplication.java:10) ~[classes/:na]\r\n    Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;kieContainer&#39; defined in class path resource [com/rule/engine/config/DroolsConfig.class]: Bean instantiation via factory method failed; nested exception is org.springframework.beans.BeanInstantiationException: Failed to instantiate [org.kie.api.runtime.KieContainer]: Factory method &#39;kieContainer&#39; threw exception; nested exception is java.lang.NullPointerException\r\n    \tat org.springframework.beans.factory.support.ConstructorResolver.instantiate(ConstructorResolver.java:658) ~[spring-beans-5.3.20.jar:5.3.20]\r\n    \tat org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:486) ~[spring-beans-5.3.20.jar:5.3.20]\r\n    \tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1352) ~[spring-beans-5.3.20.jar:5.3.20]\r\n    \tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1195) ~[spring-beans-5.3.20.jar:5.3.20]\r\n    \tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:582) ~[spring-beans-5.3.20.jar:5.3.20]\r\n    \tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:542) ~[spring-beans-5.3.20.jar:5.3.20]\r\n    \tat org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:335) ~[spring-beans-5.3.20.jar:5.3.20]\r\n    \tat org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-5.3.20.jar:5.3.20]\r\n    \tat org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:333) ~[spring-beans-5.3.20.jar:5.3.20]\r\n    \tat org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:208) ~[spring-beans-5.3.20.jar:5.3.20]\r\n    \tat org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:276) ~[spring-beans-5.3.20.jar:5.3.20]\r\n    \tat org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1389) ~[spring-beans-5.3.20.jar:5.3.20]\r\n    \tat org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1309) ~[spring-beans-5.3.20.jar:5.3.20]\r\n    \tat org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.resolveFieldValue(AutowiredAnnotationBeanPostProcessor.java:656) ~[spring-beans-5.3.20.jar:5.3.20]\r\n    \t... 20 common frames omitted\r\n    Caused by: org.springframework.beans.BeanInstantiationException: Failed to instantiate [org.kie.api.runtime.KieContainer]: Factory method &#39;kieContainer&#39; threw exception; nested exception is java.lang.NullPointerException\r\n    \tat org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:185) ~[spring-beans-5.3.20.jar:5.3.20]\r\n    \tat org.springframework.beans.factory.support.ConstructorResolver.instantiate(ConstructorResolver.java:653) ~[spring-beans-5.3.20.jar:5.3.20]\r\n    \t... 33 common frames omitted\r\n    Caused by: java.lang.NullPointerException: null\r\n    \tat org.drools.compiler.rule.builder.PatternBuilder.buildAnalysis(PatternBuilder.java:1597) ~[drools-compiler-8.29.0.Final.jar:8.29.0.Final]\r\n    \tat org.drools.compiler.rule.builder.PatternBuilder.buildEval(PatternBuilder.java:1499) ~[drools-compiler-8.29.0.Final.jar:8.29.0.Final]\r\n\r\n\r\nTrace Junit Test :\r\n\r\n    Caused by: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name &#39;******Service&#39;: Unsatisfied dependency expressed through field &#39;kieContainer&#39;; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;kieContainer&#39; defined in class path resource [com/rule/engine/config/DroolsConfig.class]: Bean instantiation via factory method failed; nested exception is org.springframework.beans.BeanInstantiationException: Failed to instantiate [org.kie.api.runtime.KieContainer]: Factory method &#39;kieContainer&#39; threw exception; nested exception is java.lang.NullPointerException\r\n    Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;kieContainer&#39; defined in class path resource [com/rule/engine/config/DroolsConfig.class]: Bean instantiation via factory method failed; nested exception is org.springframework.beans.BeanInstantiationException: Failed to instantiate [org.kie.api.runtime.KieContainer]: Factory method &#39;kieContainer&#39; threw exception; nested exception is java.lang.NullPointerException\r\n    Caused by: org.springframework.beans.BeanInstantiationException: Failed to instantiate [org.kie.api.runtime.KieContainer]: Factory method &#39;kieContainer&#39; threw exception; nested exception is java.lang.NullPointerException\r\n    Caused by: java.lang.NullPointerException\r\n\r\n","title":"Spring boot drools integration not woking after drools updated from version 7.73.0.Final to 8.29.0.Final","body":"<p>We were using spring boot+ drools maven dependency+drl files for implementing certain business rules in our spring boot application.We used the following drools dependencies(drools-core, drools-compiler, drools-decisiontables) with the version 7.73.0.The integration is not woking after drools updated from version 7.73.0.Final  to 8.29.0.Final.Please find the implementation and error trace below.Can someone help to resolve the same</p>\n<p>My Config Class</p>\n<pre><code>@Configuration\npublic class DroolsConfig {\n\n    private static final String RULES_DRL = &quot;rules/rule-impl.drl&quot;;\n    private static final KieServices kieServices = KieServices.Factory.get();\n\n    @Bean\n    public KieContainer kieContainer() {\n        KieFileSystem kieFileSystem = kieServices.newKieFileSystem();\n        kieFileSystem.write(ResourceFactory.newClassPathResource(RULES_DRL));\n        KieBuilder kb = kieServices.newKieBuilder(kieFileSystem);\n        kb.buildAll();\n        KieModule kieModule = kb.getKieModule();\n        return kieServices.newKieContainer(kieModule.getReleaseId());\n    }\n\n}\n</code></pre>\n<p>Calling class</p>\n<pre><code> @Autowired\n    private KieContainer kieContainer;\n\n    public String applyCleansingRules(String name) {\n         /////////\n        KieSession kieSession = kieContainer.newKieSession();\n        /////\n        kieSession.insert(name);\n        kieSession.fireAllRules(1);\n        kieSession.dispose();\n        return /////\n    }\n</code></pre>\n<p>Error Message :</p>\n<pre><code>at org.springframework.boot.SpringApplication.run(SpringApplication.java:1295) ~[spring-boot-2.7.0.jar:2.7.0]\n    at com.rule.engine.RuleEngineApplication.main(RuleEngineApplication.java:10) ~[classes/:na]\nCaused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'kieContainer' defined in class path resource [com/rule/engine/config/DroolsConfig.class]: Bean instantiation via factory method failed; nested exception is org.springframework.beans.BeanInstantiationException: Failed to instantiate [org.kie.api.runtime.KieContainer]: Factory method 'kieContainer' threw exception; nested exception is java.lang.NullPointerException\n    at org.springframework.beans.factory.support.ConstructorResolver.instantiate(ConstructorResolver.java:658) ~[spring-beans-5.3.20.jar:5.3.20]\n    at org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:486) ~[spring-beans-5.3.20.jar:5.3.20]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1352) ~[spring-beans-5.3.20.jar:5.3.20]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1195) ~[spring-beans-5.3.20.jar:5.3.20]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:582) ~[spring-beans-5.3.20.jar:5.3.20]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:542) ~[spring-beans-5.3.20.jar:5.3.20]\n    at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:335) ~[spring-beans-5.3.20.jar:5.3.20]\n    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-5.3.20.jar:5.3.20]\n    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:333) ~[spring-beans-5.3.20.jar:5.3.20]\n    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:208) ~[spring-beans-5.3.20.jar:5.3.20]\n    at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:276) ~[spring-beans-5.3.20.jar:5.3.20]\n    at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1389) ~[spring-beans-5.3.20.jar:5.3.20]\n    at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1309) ~[spring-beans-5.3.20.jar:5.3.20]\n    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.resolveFieldValue(AutowiredAnnotationBeanPostProcessor.java:656) ~[spring-beans-5.3.20.jar:5.3.20]\n    ... 20 common frames omitted\nCaused by: org.springframework.beans.BeanInstantiationException: Failed to instantiate [org.kie.api.runtime.KieContainer]: Factory method 'kieContainer' threw exception; nested exception is java.lang.NullPointerException\n    at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:185) ~[spring-beans-5.3.20.jar:5.3.20]\n    at org.springframework.beans.factory.support.ConstructorResolver.instantiate(ConstructorResolver.java:653) ~[spring-beans-5.3.20.jar:5.3.20]\n    ... 33 common frames omitted\nCaused by: java.lang.NullPointerException: null\n    at org.drools.compiler.rule.builder.PatternBuilder.buildAnalysis(PatternBuilder.java:1597) ~[drools-compiler-8.29.0.Final.jar:8.29.0.Final]\n    at org.drools.compiler.rule.builder.PatternBuilder.buildEval(PatternBuilder.java:1499) ~[drools-compiler-8.29.0.Final.jar:8.29.0.Final]\n</code></pre>\n<p>Trace Junit Test :</p>\n<pre><code>Caused by: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name '******Service': Unsatisfied dependency expressed through field 'kieContainer'; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'kieContainer' defined in class path resource [com/rule/engine/config/DroolsConfig.class]: Bean instantiation via factory method failed; nested exception is org.springframework.beans.BeanInstantiationException: Failed to instantiate [org.kie.api.runtime.KieContainer]: Factory method 'kieContainer' threw exception; nested exception is java.lang.NullPointerException\nCaused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'kieContainer' defined in class path resource [com/rule/engine/config/DroolsConfig.class]: Bean instantiation via factory method failed; nested exception is org.springframework.beans.BeanInstantiationException: Failed to instantiate [org.kie.api.runtime.KieContainer]: Factory method 'kieContainer' threw exception; nested exception is java.lang.NullPointerException\nCaused by: org.springframework.beans.BeanInstantiationException: Failed to instantiate [org.kie.api.runtime.KieContainer]: Factory method 'kieContainer' threw exception; nested exception is java.lang.NullPointerException\nCaused by: java.lang.NullPointerException\n</code></pre>\n"},{"tags":["java","spring-boot","spring-data-jpa"],"comments":[{"owner":{"account_id":14706862,"reputation":917,"user_id":10621296,"display_name":"Jetto Mart&#237;nez"},"score":0,"creation_date":1666800473,"post_id":74206186,"comment_id":131023102,"body_markdown":"Did you tried manually defining `spring.jpa.database-platform`?","body":"Did you tried manually defining <code>spring.jpa.database-platform</code>?"}],"answers":[{"tags":[],"owner":{"account_id":308139,"reputation":8199,"user_id":619830,"accept_rate":75,"display_name":"ch4mp"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1666831269,"creation_date":1666805390,"answer_id":74211901,"question_id":74206186,"body_markdown":"In the properties file you provide, datasource is configured for Postgres, but according to pom file, H2 should be configured during tests (the Postgres driver and url should be in `src/main/resources/application.yaml` only).\r\n\r\nMaybe, you just need to override datasource properties in **test resources** (`src/test/resources/application.yaml`):\r\n```yaml\r\nspring:\r\n  datasource:\r\n    driver-class-name=org.h2.Driver\r\n    url=jdbc:h2:mem:sample;DB_CLOSE_DELAY=-1\r\n    username=sa\r\n    password=password\r\n```\r\n\r\n### Side note\r\n[Keycloak adapters for Spring are very deprecated][1]. Do not use it.\r\n\r\nSee [those tutorials][2] for alternatives to configure resource-servers.\r\n\r\nFor consuming admin API, just use one of Spring REST clients (`@FeignClient`, `RestTemplate` or `WebClient`)\r\n\r\n\r\n  [1]: https://github.com/keycloak/keycloak/discussions/10187\r\n  [2]: https://github.com/ch4mpy/spring-addons/tree/master/samples/tutorials","title":"Should Spring Boot Data JPA automatically create EntityManagerFactory bean?","body":"<p>In the properties file you provide, datasource is configured for Postgres, but according to pom file, H2 should be configured during tests (the Postgres driver and url should be in <code>src/main/resources/application.yaml</code> only).</p>\n<p>Maybe, you just need to override datasource properties in <strong>test resources</strong> (<code>src/test/resources/application.yaml</code>):</p>\n<pre class=\"lang-yaml prettyprint-override\"><code>spring:\n  datasource:\n    driver-class-name=org.h2.Driver\n    url=jdbc:h2:mem:sample;DB_CLOSE_DELAY=-1\n    username=sa\n    password=password\n</code></pre>\n<h3>Side note</h3>\n<p><a href=\"https://github.com/keycloak/keycloak/discussions/10187\" rel=\"nofollow noreferrer\">Keycloak adapters for Spring are very deprecated</a>. Do not use it.</p>\n<p>See <a href=\"https://github.com/ch4mpy/spring-addons/tree/master/samples/tutorials\" rel=\"nofollow noreferrer\">those tutorials</a> for alternatives to configure resource-servers.</p>\n<p>For consuming admin API, just use one of Spring REST clients (<code>@FeignClient</code>, <code>RestTemplate</code> or <code>WebClient</code>)</p>\n"},{"tags":[],"owner":{"account_id":5006112,"reputation":881,"user_id":4023726,"accept_rate":92,"display_name":"James Hutchinson"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1667323110,"creation_date":1667323110,"answer_id":74279537,"question_id":74206186,"body_markdown":"It turns out I was missing the hibernate jars in my pom.\r\n\r\n```\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.hibernate&lt;/groupId&gt;\r\n            &lt;artifactId&gt;hibernate-core&lt;/artifactId&gt;\r\n            &lt;version&gt;${hibernate.version}&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.hibernate&lt;/groupId&gt;\r\n            &lt;artifactId&gt;hibernate-entitymanager&lt;/artifactId&gt;\r\n            &lt;version&gt;${hibernate.version}&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n```\r\n\r\nAlso worth pointing out that hibernate 6 requires spring boot 3 and doesn&#39;t work with spring boot 2.","title":"Should Spring Boot Data JPA automatically create EntityManagerFactory bean?","body":"<p>It turns out I was missing the hibernate jars in my pom.</p>\n<pre><code>        &lt;dependency&gt;\n            &lt;groupId&gt;org.hibernate&lt;/groupId&gt;\n            &lt;artifactId&gt;hibernate-core&lt;/artifactId&gt;\n            &lt;version&gt;${hibernate.version}&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.hibernate&lt;/groupId&gt;\n            &lt;artifactId&gt;hibernate-entitymanager&lt;/artifactId&gt;\n            &lt;version&gt;${hibernate.version}&lt;/version&gt;\n        &lt;/dependency&gt;\n</code></pre>\n<p>Also worth pointing out that hibernate 6 requires spring boot 3 and doesn't work with spring boot 2.</p>\n"}],"owner":{"account_id":5006112,"reputation":881,"user_id":4023726,"accept_rate":92,"display_name":"James Hutchinson"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":660,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":74279537,"answer_count":2,"score":0,"last_activity_date":1667323110,"creation_date":1666779843,"question_id":74206186,"body_markdown":"Should Spring Boot Data JPA automatically create EntityManagerFactory bean?\r\n\r\n\r\nI have added a table using Liquibase called Fred to my code, and now I wish to add JPA support for this.\r\n\r\nUpon adding:\r\n```\r\npublic interface FredRepository extends JpaRepository&lt;Fred, Long&gt; {\r\n}\r\n```\r\n\r\nI get\r\n```\r\norg.springframework.beans.factory.NoSuchBeanDefinitionException: No bean named &#39;entityManagerFactory&#39; available\r\n```\r\n\r\nI understood that this bean should be created by spring. Can anyone explain when spring creates this bean for me? If it doesn&#39;t, why not?\r\n\r\nSpringBoot TRACE logs containing EntityManager\r\n```\r\no.s.b.a.condition.OnClassCondition       : Condition OnClassCondition on org.springframework.boot.autoconfigure.cache.CacheAutoConfiguration$CacheManagerEntityManagerFactoryDependsOnPostProcessor matched due to @ConditionalOnClass found required class &#39;org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean&#39;\r\nConfiguration$BootstrapExecutorCondition : Condition JpaRepositoriesAutoConfiguration.BootstrapExecutorCondition on org.springframework.boot.autoconfigure.data.jpa.JpaRepositoriesAutoConfiguration#entityManagerFactoryBootstrapExecutorCustomizer did not match due to AnyNestedCondition 0 matched 2 did not; NestedCondition on JpaRepositoriesAutoConfiguration.BootstrapExecutorCondition.LazyBootstrapMode @ConditionalOnProperty (spring.data.jpa.repositories.bootstrap-mode=lazy) did not find property &#39;bootstrap-mode&#39;; NestedCondition on JpaRepositoriesAutoConfiguration.BootstrapExecutorCondition.DeferredBootstrapMode @ConditionalOnProperty (spring.data.jpa.repositories.bootstrap-mode=deferred) did not find property &#39;bootstrap-mode&#39;\r\no.s.beans.CachedIntrospectionResults     : Found bean property &#39;entityManager&#39; of type [javax.persistence.EntityManager]\r\no.s.b.f.s.DefaultListableBeanFactory     : No bean named &#39;entityManagerFactory&#39; found in org.springframework.beans.factory.support.DefaultListableBeanFactory@4ba89729: defining beans (shortened for brevity)\r\nWARN 43335 --- [           main] ConfigServletWebServerApplicationContext : Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;fredRepository&#39; defined in org.xxx.jpa.FredRepository defined in @EnableJpaRepositories declared on JpaRepositoriesRegistrar.EnableJpaRepositoriesConfiguration: Cannot create inner bean &#39;(inner bean)#492d38a2&#39; of type [org.springframework.orm.jpa.SharedEntityManagerCreator] while setting bean property &#39;entityManager&#39;; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;(inner bean)#492d38a2&#39;: Cannot resolve reference to bean &#39;entityManagerFactory&#39; while setting constructor argument; nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: No bean named &#39;entityManagerFactory&#39; available\r\n   CacheAutoConfiguration.CacheManagerEntityManagerFactoryDependsOnPostProcessor:\r\n      Did not match:\r\n         - Ancestor org.springframework.boot.autoconfigure.cache.CacheAutoConfiguration did not match (ConditionEvaluationReport.AncestorsMatchedCondition)\r\n      Matched:\r\n         - @ConditionalOnClass found required class &#39;org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean&#39; (OnClassCondition)\r\n   JpaRepositoriesAutoConfiguration#entityManagerFactoryBootstrapExecutorCustomizer:\r\n      Did not match:\r\n         - AnyNestedCondition 0 matched 2 did not; NestedCondition on JpaRepositoriesAutoConfiguration.BootstrapExecutorCondition.LazyBootstrapMode @ConditionalOnProperty (spring.data.jpa.repositories.bootstrap-mode=lazy) did not find property &#39;bootstrap-mode&#39;; NestedCondition on JpaRepositoriesAutoConfiguration.BootstrapExecutorCondition.DeferredBootstrapMode @ConditionalOnProperty (spring.data.jpa.repositories.bootstrap-mode=deferred) did not find property &#39;bootstrap-mode&#39; (JpaRepositoriesAutoConfiguration.BootstrapExecutorCondition)\r\n\r\n```\r\n\r\nEntity class:\r\n```\r\n@Getter\r\n@Setter\r\n@RequiredArgsConstructor\r\n@Entity\r\npublic class Fred {\r\n    @Id\r\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n    private long id;\r\n\r\n    @NotNull\r\n    private String integrationkey;\r\n}\r\n```\r\npom.xml (recently added spring-boot-starter-data-jpa)\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n\r\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n\txsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n\t&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n    &lt;parent&gt;\r\n        &lt;groupId&gt;org.company&lt;/groupId&gt;\r\n        &lt;artifactId&gt;company-parent&lt;/artifactId&gt;\r\n        &lt;version&gt;0.1.0-SNAPSHOT&lt;/version&gt;\r\n        &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\r\n    &lt;/parent&gt;\r\n\t&lt;groupId&gt;org.company&lt;/groupId&gt;\r\n\t&lt;artifactId&gt;component&lt;/artifactId&gt;\r\n\t&lt;version&gt;0.1.0-SNAPSHOT&lt;/version&gt;\r\n    &lt;name&gt;company :: component&lt;/name&gt;\r\n\t&lt;description&gt;component&lt;/description&gt;\r\n    &lt;properties&gt;\r\n        &lt;maven.compiler.source&gt;11&lt;/maven.compiler.source&gt;\r\n        &lt;maven.compiler.target&gt;11&lt;/maven.compiler.target&gt;\r\n\t\t&lt;java.version&gt;11&lt;/java.version&gt;\r\n        &lt;company.shared.lib.version&gt;0.1.0-SNAPSHOT&lt;/company.shared.lib.version&gt;\r\n\t&lt;/properties&gt;\r\n\t&lt;dependencies&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\r\n            &lt;version&gt;${spring-boot.version}&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-starter-security&lt;/artifactId&gt;\r\n            &lt;version&gt;${spring-boot.version}&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n            &lt;version&gt;${spring-boot.version}&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.kafka&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-kafka&lt;/artifactId&gt;\r\n            &lt;version&gt;${spring-kafka.version}&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-starter-jdbc&lt;/artifactId&gt;\r\n            &lt;version&gt;${spring-boot.version}&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt;\r\n            &lt;version&gt;${spring-boot.version}&lt;/version&gt;\r\n\t\t\t&lt;scope&gt;runtime&lt;/scope&gt;\r\n\t\t\t&lt;optional&gt;true&lt;/optional&gt;\r\n\t\t&lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.liquibase&lt;/groupId&gt;\r\n            &lt;artifactId&gt;liquibase-core&lt;/artifactId&gt;\r\n            &lt;version&gt;${liquibaseVersion}&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;lombok&lt;/artifactId&gt;\r\n\t\t\t&lt;optional&gt;true&lt;/optional&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\r\n            &lt;version&gt;${spring-boot.version}&lt;/version&gt;\r\n\t\t\t&lt;scope&gt;test&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.security&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-security-test&lt;/artifactId&gt;\r\n            &lt;version&gt;${spring-security.version}&lt;/version&gt;\r\n            &lt;scope&gt;test&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.kafka&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-kafka-test&lt;/artifactId&gt;\r\n            &lt;version&gt;${spring-kafka.version}&lt;/version&gt;\r\n\t\t\t&lt;scope&gt;test&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.company.shared&lt;/groupId&gt;\r\n            &lt;artifactId&gt;dto-model&lt;/artifactId&gt;\r\n            &lt;version&gt;${company.shared.lib.version}&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;junit&lt;/groupId&gt;\r\n            &lt;artifactId&gt;junit&lt;/artifactId&gt;\r\n            &lt;scope&gt;test&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.mockito&lt;/groupId&gt;\r\n            &lt;artifactId&gt;mockito-core&lt;/artifactId&gt;\r\n            &lt;scope&gt;test&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.postgresql&lt;/groupId&gt;\r\n            &lt;artifactId&gt;postgresql&lt;/artifactId&gt;\r\n            &lt;scope&gt;runtime&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;com.h2database&lt;/groupId&gt;\r\n            &lt;artifactId&gt;h2&lt;/artifactId&gt;\r\n            &lt;version&gt;2.1.212&lt;/version&gt;\r\n            &lt;scope&gt;test&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.keycloak&lt;/groupId&gt;\r\n            &lt;artifactId&gt;keycloak-core&lt;/artifactId&gt;\r\n            &lt;version&gt;${keycloak.version}&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.keycloak&lt;/groupId&gt;\r\n            &lt;artifactId&gt;keycloak-adapter-core&lt;/artifactId&gt;\r\n            &lt;version&gt;${keycloak.version}&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;javax.annotation&lt;/groupId&gt;\r\n            &lt;artifactId&gt;javax.annotation-api&lt;/artifactId&gt;\r\n            &lt;version&gt;1.3.2&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.jboss.resteasy&lt;/groupId&gt;\r\n            &lt;artifactId&gt;resteasy-client&lt;/artifactId&gt;\r\n            &lt;version&gt;3.13.2.Final&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.keycloak&lt;/groupId&gt;\r\n            &lt;artifactId&gt;keycloak-admin-client&lt;/artifactId&gt;\r\n            &lt;version&gt;${keycloak.version}&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n    &lt;/dependencies&gt;\r\n\r\n\t&lt;build&gt;\r\n\t\t&lt;plugins&gt;\r\n\t\t\t&lt;plugin&gt;\r\n\t\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\r\n\t\t\t\t&lt;configuration&gt;\r\n\t\t\t\t\t&lt;excludes&gt;\r\n\t\t\t\t\t\t&lt;exclude&gt;\r\n\t\t\t\t\t\t\t&lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\r\n\t\t\t\t\t\t\t&lt;artifactId&gt;lombok&lt;/artifactId&gt;\r\n\t\t\t\t\t\t&lt;/exclude&gt;\r\n\t\t\t\t\t&lt;/excludes&gt;\r\n\t\t\t\t&lt;/configuration&gt;\r\n\t\t\t&lt;/plugin&gt;\r\n            &lt;plugin&gt;\r\n                &lt;groupId&gt;com.google.cloud.tools&lt;/groupId&gt;\r\n                &lt;artifactId&gt;jib-maven-plugin&lt;/artifactId&gt;\r\n                &lt;version&gt;3.2.1&lt;/version&gt;\r\n            &lt;/plugin&gt;\r\n        &lt;/plugins&gt;\r\n    &lt;/build&gt;\r\n\r\n&lt;/project&gt;\r\n```\r\nversion numbers from parent\r\n```\r\n    &lt;properties&gt;\r\n        &lt;dropwizard.metrics.version&gt;4.2.10&lt;/dropwizard.metrics.version&gt;\r\n        &lt;activemq.version&gt;5.17.1&lt;/activemq.version&gt;\r\n        &lt;aries.jax.rs.whiteboard.version&gt;2.0.1&lt;/aries.jax.rs.whiteboard.version&gt;\r\n        &lt;aries.jpa.api.version&gt;2.7.3&lt;/aries.jpa.api.version&gt;\r\n        &lt;bsf.version&gt;2.4.0&lt;/bsf.version&gt;\r\n        &lt;eclipselink.version&gt;2.5.1&lt;/eclipselink.version&gt;\r\n        &lt;camel.version&gt;3.15.0&lt;/camel.version&gt;\r\n        &lt;commons.io.version&gt;2.11.0&lt;/commons.io.version&gt;\r\n        &lt;commons.lang.version&gt;2.6&lt;/commons.lang.version&gt;\r\n        &lt;cucumber.version&gt;7.1.0&lt;/cucumber.version&gt;\r\n        &lt;cxf.version&gt;3.5.1&lt;/cxf.version&gt;\r\n        &lt;dhcp4java.version&gt;1.1.0&lt;/dhcp4java.version&gt;\r\n        &lt;drools.version&gt;7.31.0.Final&lt;/drools.version&gt;\r\n        &lt;geohash.version&gt;1.4.0&lt;/geohash.version&gt;\r\n        &lt;glassfish.jaxb.version&gt;2.3.2&lt;/glassfish.jaxb.version&gt;\r\n        &lt;grpc.version&gt;1.43.2&lt;/grpc.version&gt;\r\n        &lt;gson.version&gt;2.8.6&lt;/gson.version&gt;\r\n        &lt;guava.version&gt;31.0.1-jre&lt;/guava.version&gt;\r\n        &lt;hamcrest.version&gt;1.3&lt;/hamcrest.version&gt;\r\n        &lt;hibernate.version&gt;6.1.4.Final&lt;/hibernate.version&gt;\r\n        &lt;httpcore.version&gt;4.4.4&lt;/httpcore.version&gt;\r\n        &lt;httpclient.version&gt;4.5.13&lt;/httpclient.version&gt;\r\n        &lt;ignite.version&gt;2.14.0&lt;/ignite.version&gt;\r\n        &lt;jackson.version&gt;2.13.1&lt;/jackson.version&gt;\r\n        &lt;jaeger.version&gt;0.34.0&lt;/jaeger.version&gt;\r\n        &lt;jakarta.annotation.version&gt;1.3.5&lt;/jakarta.annotation.version&gt;\r\n        &lt;jakarta.xml.version&gt;2.3.3&lt;/jakarta.xml.version&gt;\r\n        &lt;jakarta.mail.version&gt;1.6.7&lt;/jakarta.mail.version&gt;\r\n        &lt;javax.validation.version&gt;2.0.1.Final&lt;/javax.validation.version&gt;\r\n        &lt;jaxrs.version&gt;2.1&lt;/jaxrs.version&gt;\r\n        &lt;jboss-logging.version&gt;3.4.1.Final&lt;/jboss-logging.version&gt;\r\n        &lt;jcifs.version&gt;2.1.6&lt;/jcifs.version&gt;\r\n        &lt;jexl.version&gt;2.1.1&lt;/jexl.version&gt;\r\n        &lt;jicmp.version&gt;3.0.0&lt;/jicmp.version&gt;\r\n        &lt;jicmp6.version&gt;2.0.1&lt;/jicmp6.version&gt;\r\n        &lt;jna.version&gt;4.4.0&lt;/jna.version&gt;\r\n        &lt;joda.time.version&gt;2.1&lt;/joda.time.version&gt;\r\n        &lt;junit.version&gt;4.13.2&lt;/junit.version&gt;\r\n        &lt;jsonPatch.version&gt;1.13&lt;/jsonPatch.version&gt;\r\n        &lt;jacksonCoreUtils.version&gt;2.0&lt;/jacksonCoreUtils.version&gt;\r\n        &lt;fgeMsgSimple.version&gt;1.2&lt;/fgeMsgSimple.version&gt;\r\n        &lt;fgeBtf.version&gt;1.3&lt;/fgeBtf.version&gt;\r\n        &lt;json.version&gt;20171018&lt;/json.version&gt;\r\n        &lt;jsr250.version&gt;1.0&lt;/jsr250.version&gt;\r\n        &lt;jsr305.version&gt;3.0.2&lt;/jsr305.version&gt;\r\n        &lt;karaf.version&gt;4.3.6&lt;/karaf.version&gt;\r\n        &lt;keycloak.version&gt;18.0.0&lt;/keycloak.version&gt;\r\n        &lt;liquibaseVersion&gt;4.17.0&lt;/liquibaseVersion&gt;\r\n        &lt;log4j2.version&gt;2.17.1&lt;/log4j2.version&gt;\r\n        &lt;mapstruct.version&gt;1.4.1.Final&lt;/mapstruct.version&gt;\r\n        &lt;mina.version&gt;2.1.5&lt;/mina.version&gt;\r\n        &lt;netty3.version&gt;3.10.6.Final&lt;/netty3.version&gt;\r\n        &lt;netty4.version&gt;4.1.78.Final&lt;/netty4.version&gt;\r\n        &lt;xxx.tracker.version&gt;0.7&lt;/xxx.tracker.version&gt;\r\n        &lt;opentracing.version&gt;0.31.0&lt;/opentracing.version&gt;\r\n        &lt;org.osgi.service.jdbc.version&gt;1.0.0&lt;/org.osgi.service.jdbc.version&gt;\r\n        &lt;osgi.version&gt;7.0.0&lt;/osgi.version&gt;\r\n        &lt;pax.jdbc.version&gt;1.5.2&lt;/pax.jdbc.version&gt;\r\n        &lt;postgresql.version&gt;42.5.0&lt;/postgresql.version&gt;\r\n        &lt;testcontainers.version&gt;1.17.4&lt;/testcontainers.version&gt;\r\n        &lt;prometheus.version&gt;0.16.0&lt;/prometheus.version&gt;\r\n        &lt;protobuf.version&gt;3.17.3&lt;/protobuf.version&gt;   &lt;!-- WARNING: this also controls the version of the protobuf compiler, change at your risk!--&gt;\r\n        &lt;rate.limitted.logger.version&gt;2.0.2&lt;/rate.limitted.logger.version&gt;\r\n        &lt;rest-assured.version&gt;4.3.3&lt;/rest-assured.version&gt;\r\n        &lt;slf4j.version&gt;1.7.33&lt;/slf4j.version&gt;\r\n        &lt;snmp4j.version&gt;2.5.5&lt;/snmp4j.version&gt;\r\n        &lt;snmp4j.agent.version&gt;2.5.3&lt;/snmp4j.agent.version&gt;\r\n        &lt;spring.version&gt;5.3.23&lt;/spring.version&gt;\r\n        &lt;spring-boot.version&gt;2.7.4&lt;/spring-boot.version&gt;\r\n        &lt;spring-security.version&gt;5.7.3&lt;/spring-security.version&gt;\r\n        &lt;spring-kafka.version&gt;2.8.6&lt;/spring-kafka.version&gt;\r\n        &lt;swagger.version&gt;2.1.1&lt;/swagger.version&gt;\r\n        &lt;xxx.shared.lib.version&gt;0.1.0-SNAPSHOT&lt;/xxx.shared.lib.version&gt;\r\n        &lt;testcontainers.version&gt;1.16.3&lt;/testcontainers.version&gt;\r\n        &lt;lombok.version&gt;1.18.24&lt;/lombok.version&gt;\r\n        &lt;lombok.binding.version&gt;0.2.0&lt;/lombok.binding.version&gt;\r\n        &lt;mockito.version&gt;4.8.0&lt;/mockito.version&gt;\r\n        &lt;jupiter.version&gt;5.9.0&lt;/jupiter.version&gt;\r\n        &lt;jib.version&gt;3.2.1&lt;/jib.version&gt;\r\n        &lt;surefire.version&gt;3.0.0-M5&lt;/surefire.version&gt;\r\n        &lt;failsafe.version&gt;3.0.0-M5&lt;/failsafe.version&gt;\r\n    &lt;/properties&gt;\r\n```\r\nstack trace\r\n```\r\njava.lang.IllegalStateException: Failed to load ApplicationContext\r\n\r\n\tat org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:98)\r\n\tat org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:124)\r\n\tat org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener.postProcessFields(MockitoTestExecutionListener.java:110)\r\n\tat org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener.injectFields(MockitoTestExecutionListener.java:94)\r\n\tat org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener.prepareTestInstance(MockitoTestExecutionListener.java:61)\r\n\tat org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:248)\r\n\tat org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:138)\r\n\tat org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$8(ClassBasedTestDescriptor.java:363)\r\n\tat org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:368)\r\n\tat org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$9(ClassBasedTestDescriptor.java:363)\r\n\tat java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:195)\r\n\tat java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:177)\r\n\tat java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1655)\r\n\tat java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:484)\r\n\tat java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:474)\r\n\tat java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:312)\r\n\tat java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735)\r\n\tat java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734)\r\n\tat java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:658)\r\n\tat org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:362)\r\n\tat org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:283)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:282)\r\n\tat org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:272)\r\n\tat java.base/java.util.Optional.orElseGet(Optional.java:369)\r\n\tat org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:271)\r\n\tat org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31)\r\n\tat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:102)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:101)\r\n\tat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:66)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:123)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:123)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:90)\r\n\tat java.base/java.util.ArrayList.forEach(ArrayList.java:1541)\r\n\tat org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)\r\n\tat org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)\r\n\tat java.base/java.util.ArrayList.forEach(ArrayList.java:1541)\r\n\tat org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)\r\n\tat org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)\r\n\tat org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)\r\n\tat org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)\r\n\tat org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)\r\n\tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:107)\r\n\tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:88)\r\n\tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:54)\r\n\tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:67)\r\n\tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:52)\r\n\tat org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:114)\r\n\tat org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:86)\r\n\tat org.junit.platform.launcher.core.DefaultLauncherSession$DelegatingLauncher.execute(DefaultLauncherSession.java:86)\r\n\tat org.junit.platform.launcher.core.SessionPerRequestLauncher.execute(SessionPerRequestLauncher.java:53)\r\n\tat com.intellij.junit5.JUnit5IdeaTestRunner.startRunnerWithArgs(JUnit5IdeaTestRunner.java:57)\r\n\tat com.intellij.rt.junit.IdeaTestRunner$Repeater$1.execute(IdeaTestRunner.java:38)\r\n\tat com.intellij.rt.execution.junit.TestsRepeater.repeat(TestsRepeater.java:11)\r\n\tat com.intellij.rt.junit.IdeaTestRunner$Repeater.startRunnerWithArgs(IdeaTestRunner.java:35)\r\n\tat com.intellij.rt.junit.JUnitStarter.prepareStreamsAndStart(JUnitStarter.java:235)\r\n\tat com.intellij.rt.junit.JUnitStarter.main(JUnitStarter.java:54)\r\nCaused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;fredRepository&#39; defined in org.xxx.jpa.FredRepository defined in @EnableJpaRepositories declared on JpaRepositoriesRegistrar.EnableJpaRepositoriesConfiguration: Cannot create inner bean &#39;(inner bean)#4c57ca10&#39; of type [org.springframework.orm.jpa.SharedEntityManagerCreator] while setting bean property &#39;entityManager&#39;; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;(inner bean)#4c57ca10&#39;: Cannot resolve reference to bean &#39;entityManagerFactory&#39; while setting constructor argument; nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: No bean named &#39;entityManagerFactory&#39; available\r\n\tat org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveInnerBean(BeanDefinitionValueResolver.java:389)\r\n\tat org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveValueIfNecessary(BeanDefinitionValueResolver.java:134)\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.applyPropertyValues(AbstractAutowireCapableBeanFactory.java:1707)\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1452)\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:619)\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:542)\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:335)\r\n\tat org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:333)\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:208)\r\n\tat org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:936)\r\n\tat org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:918)\r\n\tat org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:583)\r\n\tat org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:147)\r\n\tat org.springframework.boot.SpringApplication.refresh(SpringApplication.java:734)\r\n\tat org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:408)\r\n\tat org.springframework.boot.SpringApplication.run(SpringApplication.java:308)\r\n\tat org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:132)\r\n\tat org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:141)\r\n\tat org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:90)\r\n\t... 72 more\r\nCaused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;(inner bean)#4c57ca10&#39;: Cannot resolve reference to bean &#39;entityManagerFactory&#39; while setting constructor argument; nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: No bean named &#39;entityManagerFactory&#39; available\r\n\tat org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveReference(BeanDefinitionValueResolver.java:342)\r\n\tat org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveValueIfNecessary(BeanDefinitionValueResolver.java:113)\r\n\tat org.springframework.beans.factory.support.ConstructorResolver.resolveConstructorArguments(ConstructorResolver.java:693)\r\n\tat org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:510)\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1352)\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1195)\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:582)\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:542)\r\n\tat org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveInnerBean(BeanDefinitionValueResolver.java:374)\r\n\t... 91 more\r\nCaused by: org.springframework.beans.factory.NoSuchBeanDefinitionException: No bean named &#39;entityManagerFactory&#39; available\r\n\tat org.springframework.beans.factory.support.DefaultListableBeanFactory.getBeanDefinition(DefaultListableBeanFactory.java:874)\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.getMergedLocalBeanDefinition(AbstractBeanFactory.java:1344)\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:309)\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:208)\r\n\tat org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveReference(BeanDefinitionValueResolver.java:330)\r\n\t... 99 more\r\n\r\n```\r\napplication.yml\r\n```\r\nspring:\r\n  application:\r\n    name: xxx\r\n\r\n  datasource:\r\n    driver-class-name: org.postgresql.Driver\r\n    url: jdbc:postgresql://postgres:5432/xxx\r\n    username: xxx\r\n    password: xxx\r\n\r\n  jpa:\r\n    hibernate:\r\n      ddl-auto: validate\r\n\r\n  liquibase:\r\n    change-log: db/changelog/changelog.xml\r\n\r\n```\r\n\r\n","title":"Should Spring Boot Data JPA automatically create EntityManagerFactory bean?","body":"<p>Should Spring Boot Data JPA automatically create EntityManagerFactory bean?</p>\n<p>I have added a table using Liquibase called Fred to my code, and now I wish to add JPA support for this.</p>\n<p>Upon adding:</p>\n<pre><code>public interface FredRepository extends JpaRepository&lt;Fred, Long&gt; {\n}\n</code></pre>\n<p>I get</p>\n<pre><code>org.springframework.beans.factory.NoSuchBeanDefinitionException: No bean named 'entityManagerFactory' available\n</code></pre>\n<p>I understood that this bean should be created by spring. Can anyone explain when spring creates this bean for me? If it doesn't, why not?</p>\n<p>SpringBoot TRACE logs containing EntityManager</p>\n<pre><code>o.s.b.a.condition.OnClassCondition       : Condition OnClassCondition on org.springframework.boot.autoconfigure.cache.CacheAutoConfiguration$CacheManagerEntityManagerFactoryDependsOnPostProcessor matched due to @ConditionalOnClass found required class 'org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean'\nConfiguration$BootstrapExecutorCondition : Condition JpaRepositoriesAutoConfiguration.BootstrapExecutorCondition on org.springframework.boot.autoconfigure.data.jpa.JpaRepositoriesAutoConfiguration#entityManagerFactoryBootstrapExecutorCustomizer did not match due to AnyNestedCondition 0 matched 2 did not; NestedCondition on JpaRepositoriesAutoConfiguration.BootstrapExecutorCondition.LazyBootstrapMode @ConditionalOnProperty (spring.data.jpa.repositories.bootstrap-mode=lazy) did not find property 'bootstrap-mode'; NestedCondition on JpaRepositoriesAutoConfiguration.BootstrapExecutorCondition.DeferredBootstrapMode @ConditionalOnProperty (spring.data.jpa.repositories.bootstrap-mode=deferred) did not find property 'bootstrap-mode'\no.s.beans.CachedIntrospectionResults     : Found bean property 'entityManager' of type [javax.persistence.EntityManager]\no.s.b.f.s.DefaultListableBeanFactory     : No bean named 'entityManagerFactory' found in org.springframework.beans.factory.support.DefaultListableBeanFactory@4ba89729: defining beans (shortened for brevity)\nWARN 43335 --- [           main] ConfigServletWebServerApplicationContext : Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'fredRepository' defined in org.xxx.jpa.FredRepository defined in @EnableJpaRepositories declared on JpaRepositoriesRegistrar.EnableJpaRepositoriesConfiguration: Cannot create inner bean '(inner bean)#492d38a2' of type [org.springframework.orm.jpa.SharedEntityManagerCreator] while setting bean property 'entityManager'; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name '(inner bean)#492d38a2': Cannot resolve reference to bean 'entityManagerFactory' while setting constructor argument; nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: No bean named 'entityManagerFactory' available\n   CacheAutoConfiguration.CacheManagerEntityManagerFactoryDependsOnPostProcessor:\n      Did not match:\n         - Ancestor org.springframework.boot.autoconfigure.cache.CacheAutoConfiguration did not match (ConditionEvaluationReport.AncestorsMatchedCondition)\n      Matched:\n         - @ConditionalOnClass found required class 'org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean' (OnClassCondition)\n   JpaRepositoriesAutoConfiguration#entityManagerFactoryBootstrapExecutorCustomizer:\n      Did not match:\n         - AnyNestedCondition 0 matched 2 did not; NestedCondition on JpaRepositoriesAutoConfiguration.BootstrapExecutorCondition.LazyBootstrapMode @ConditionalOnProperty (spring.data.jpa.repositories.bootstrap-mode=lazy) did not find property 'bootstrap-mode'; NestedCondition on JpaRepositoriesAutoConfiguration.BootstrapExecutorCondition.DeferredBootstrapMode @ConditionalOnProperty (spring.data.jpa.repositories.bootstrap-mode=deferred) did not find property 'bootstrap-mode' (JpaRepositoriesAutoConfiguration.BootstrapExecutorCondition)\n\n</code></pre>\n<p>Entity class:</p>\n<pre><code>@Getter\n@Setter\n@RequiredArgsConstructor\n@Entity\npublic class Fred {\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    private long id;\n\n    @NotNull\n    private String integrationkey;\n}\n</code></pre>\n<p>pom.xml (recently added spring-boot-starter-data-jpa)</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n    xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n    &lt;parent&gt;\n        &lt;groupId&gt;org.company&lt;/groupId&gt;\n        &lt;artifactId&gt;company-parent&lt;/artifactId&gt;\n        &lt;version&gt;0.1.0-SNAPSHOT&lt;/version&gt;\n        &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\n    &lt;/parent&gt;\n    &lt;groupId&gt;org.company&lt;/groupId&gt;\n    &lt;artifactId&gt;component&lt;/artifactId&gt;\n    &lt;version&gt;0.1.0-SNAPSHOT&lt;/version&gt;\n    &lt;name&gt;company :: component&lt;/name&gt;\n    &lt;description&gt;component&lt;/description&gt;\n    &lt;properties&gt;\n        &lt;maven.compiler.source&gt;11&lt;/maven.compiler.source&gt;\n        &lt;maven.compiler.target&gt;11&lt;/maven.compiler.target&gt;\n        &lt;java.version&gt;11&lt;/java.version&gt;\n        &lt;company.shared.lib.version&gt;0.1.0-SNAPSHOT&lt;/company.shared.lib.version&gt;\n    &lt;/properties&gt;\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\n            &lt;version&gt;${spring-boot.version}&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-security&lt;/artifactId&gt;\n            &lt;version&gt;${spring-boot.version}&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n            &lt;version&gt;${spring-boot.version}&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.kafka&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-kafka&lt;/artifactId&gt;\n            &lt;version&gt;${spring-kafka.version}&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-jdbc&lt;/artifactId&gt;\n            &lt;version&gt;${spring-boot.version}&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt;\n            &lt;version&gt;${spring-boot.version}&lt;/version&gt;\n            &lt;scope&gt;runtime&lt;/scope&gt;\n            &lt;optional&gt;true&lt;/optional&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.liquibase&lt;/groupId&gt;\n            &lt;artifactId&gt;liquibase-core&lt;/artifactId&gt;\n            &lt;version&gt;${liquibaseVersion}&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\n            &lt;artifactId&gt;lombok&lt;/artifactId&gt;\n            &lt;optional&gt;true&lt;/optional&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n            &lt;version&gt;${spring-boot.version}&lt;/version&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.security&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-security-test&lt;/artifactId&gt;\n            &lt;version&gt;${spring-security.version}&lt;/version&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.kafka&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-kafka-test&lt;/artifactId&gt;\n            &lt;version&gt;${spring-kafka.version}&lt;/version&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.company.shared&lt;/groupId&gt;\n            &lt;artifactId&gt;dto-model&lt;/artifactId&gt;\n            &lt;version&gt;${company.shared.lib.version}&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;junit&lt;/groupId&gt;\n            &lt;artifactId&gt;junit&lt;/artifactId&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.mockito&lt;/groupId&gt;\n            &lt;artifactId&gt;mockito-core&lt;/artifactId&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.postgresql&lt;/groupId&gt;\n            &lt;artifactId&gt;postgresql&lt;/artifactId&gt;\n            &lt;scope&gt;runtime&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.h2database&lt;/groupId&gt;\n            &lt;artifactId&gt;h2&lt;/artifactId&gt;\n            &lt;version&gt;2.1.212&lt;/version&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.keycloak&lt;/groupId&gt;\n            &lt;artifactId&gt;keycloak-core&lt;/artifactId&gt;\n            &lt;version&gt;${keycloak.version}&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.keycloak&lt;/groupId&gt;\n            &lt;artifactId&gt;keycloak-adapter-core&lt;/artifactId&gt;\n            &lt;version&gt;${keycloak.version}&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;javax.annotation&lt;/groupId&gt;\n            &lt;artifactId&gt;javax.annotation-api&lt;/artifactId&gt;\n            &lt;version&gt;1.3.2&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.jboss.resteasy&lt;/groupId&gt;\n            &lt;artifactId&gt;resteasy-client&lt;/artifactId&gt;\n            &lt;version&gt;3.13.2.Final&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.keycloak&lt;/groupId&gt;\n            &lt;artifactId&gt;keycloak-admin-client&lt;/artifactId&gt;\n            &lt;version&gt;${keycloak.version}&lt;/version&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n\n    &lt;build&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n                &lt;configuration&gt;\n                    &lt;excludes&gt;\n                        &lt;exclude&gt;\n                            &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\n                            &lt;artifactId&gt;lombok&lt;/artifactId&gt;\n                        &lt;/exclude&gt;\n                    &lt;/excludes&gt;\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;com.google.cloud.tools&lt;/groupId&gt;\n                &lt;artifactId&gt;jib-maven-plugin&lt;/artifactId&gt;\n                &lt;version&gt;3.2.1&lt;/version&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n\n&lt;/project&gt;\n</code></pre>\n<p>version numbers from parent</p>\n<pre><code>    &lt;properties&gt;\n        &lt;dropwizard.metrics.version&gt;4.2.10&lt;/dropwizard.metrics.version&gt;\n        &lt;activemq.version&gt;5.17.1&lt;/activemq.version&gt;\n        &lt;aries.jax.rs.whiteboard.version&gt;2.0.1&lt;/aries.jax.rs.whiteboard.version&gt;\n        &lt;aries.jpa.api.version&gt;2.7.3&lt;/aries.jpa.api.version&gt;\n        &lt;bsf.version&gt;2.4.0&lt;/bsf.version&gt;\n        &lt;eclipselink.version&gt;2.5.1&lt;/eclipselink.version&gt;\n        &lt;camel.version&gt;3.15.0&lt;/camel.version&gt;\n        &lt;commons.io.version&gt;2.11.0&lt;/commons.io.version&gt;\n        &lt;commons.lang.version&gt;2.6&lt;/commons.lang.version&gt;\n        &lt;cucumber.version&gt;7.1.0&lt;/cucumber.version&gt;\n        &lt;cxf.version&gt;3.5.1&lt;/cxf.version&gt;\n        &lt;dhcp4java.version&gt;1.1.0&lt;/dhcp4java.version&gt;\n        &lt;drools.version&gt;7.31.0.Final&lt;/drools.version&gt;\n        &lt;geohash.version&gt;1.4.0&lt;/geohash.version&gt;\n        &lt;glassfish.jaxb.version&gt;2.3.2&lt;/glassfish.jaxb.version&gt;\n        &lt;grpc.version&gt;1.43.2&lt;/grpc.version&gt;\n        &lt;gson.version&gt;2.8.6&lt;/gson.version&gt;\n        &lt;guava.version&gt;31.0.1-jre&lt;/guava.version&gt;\n        &lt;hamcrest.version&gt;1.3&lt;/hamcrest.version&gt;\n        &lt;hibernate.version&gt;6.1.4.Final&lt;/hibernate.version&gt;\n        &lt;httpcore.version&gt;4.4.4&lt;/httpcore.version&gt;\n        &lt;httpclient.version&gt;4.5.13&lt;/httpclient.version&gt;\n        &lt;ignite.version&gt;2.14.0&lt;/ignite.version&gt;\n        &lt;jackson.version&gt;2.13.1&lt;/jackson.version&gt;\n        &lt;jaeger.version&gt;0.34.0&lt;/jaeger.version&gt;\n        &lt;jakarta.annotation.version&gt;1.3.5&lt;/jakarta.annotation.version&gt;\n        &lt;jakarta.xml.version&gt;2.3.3&lt;/jakarta.xml.version&gt;\n        &lt;jakarta.mail.version&gt;1.6.7&lt;/jakarta.mail.version&gt;\n        &lt;javax.validation.version&gt;2.0.1.Final&lt;/javax.validation.version&gt;\n        &lt;jaxrs.version&gt;2.1&lt;/jaxrs.version&gt;\n        &lt;jboss-logging.version&gt;3.4.1.Final&lt;/jboss-logging.version&gt;\n        &lt;jcifs.version&gt;2.1.6&lt;/jcifs.version&gt;\n        &lt;jexl.version&gt;2.1.1&lt;/jexl.version&gt;\n        &lt;jicmp.version&gt;3.0.0&lt;/jicmp.version&gt;\n        &lt;jicmp6.version&gt;2.0.1&lt;/jicmp6.version&gt;\n        &lt;jna.version&gt;4.4.0&lt;/jna.version&gt;\n        &lt;joda.time.version&gt;2.1&lt;/joda.time.version&gt;\n        &lt;junit.version&gt;4.13.2&lt;/junit.version&gt;\n        &lt;jsonPatch.version&gt;1.13&lt;/jsonPatch.version&gt;\n        &lt;jacksonCoreUtils.version&gt;2.0&lt;/jacksonCoreUtils.version&gt;\n        &lt;fgeMsgSimple.version&gt;1.2&lt;/fgeMsgSimple.version&gt;\n        &lt;fgeBtf.version&gt;1.3&lt;/fgeBtf.version&gt;\n        &lt;json.version&gt;20171018&lt;/json.version&gt;\n        &lt;jsr250.version&gt;1.0&lt;/jsr250.version&gt;\n        &lt;jsr305.version&gt;3.0.2&lt;/jsr305.version&gt;\n        &lt;karaf.version&gt;4.3.6&lt;/karaf.version&gt;\n        &lt;keycloak.version&gt;18.0.0&lt;/keycloak.version&gt;\n        &lt;liquibaseVersion&gt;4.17.0&lt;/liquibaseVersion&gt;\n        &lt;log4j2.version&gt;2.17.1&lt;/log4j2.version&gt;\n        &lt;mapstruct.version&gt;1.4.1.Final&lt;/mapstruct.version&gt;\n        &lt;mina.version&gt;2.1.5&lt;/mina.version&gt;\n        &lt;netty3.version&gt;3.10.6.Final&lt;/netty3.version&gt;\n        &lt;netty4.version&gt;4.1.78.Final&lt;/netty4.version&gt;\n        &lt;xxx.tracker.version&gt;0.7&lt;/xxx.tracker.version&gt;\n        &lt;opentracing.version&gt;0.31.0&lt;/opentracing.version&gt;\n        &lt;org.osgi.service.jdbc.version&gt;1.0.0&lt;/org.osgi.service.jdbc.version&gt;\n        &lt;osgi.version&gt;7.0.0&lt;/osgi.version&gt;\n        &lt;pax.jdbc.version&gt;1.5.2&lt;/pax.jdbc.version&gt;\n        &lt;postgresql.version&gt;42.5.0&lt;/postgresql.version&gt;\n        &lt;testcontainers.version&gt;1.17.4&lt;/testcontainers.version&gt;\n        &lt;prometheus.version&gt;0.16.0&lt;/prometheus.version&gt;\n        &lt;protobuf.version&gt;3.17.3&lt;/protobuf.version&gt;   &lt;!-- WARNING: this also controls the version of the protobuf compiler, change at your risk!--&gt;\n        &lt;rate.limitted.logger.version&gt;2.0.2&lt;/rate.limitted.logger.version&gt;\n        &lt;rest-assured.version&gt;4.3.3&lt;/rest-assured.version&gt;\n        &lt;slf4j.version&gt;1.7.33&lt;/slf4j.version&gt;\n        &lt;snmp4j.version&gt;2.5.5&lt;/snmp4j.version&gt;\n        &lt;snmp4j.agent.version&gt;2.5.3&lt;/snmp4j.agent.version&gt;\n        &lt;spring.version&gt;5.3.23&lt;/spring.version&gt;\n        &lt;spring-boot.version&gt;2.7.4&lt;/spring-boot.version&gt;\n        &lt;spring-security.version&gt;5.7.3&lt;/spring-security.version&gt;\n        &lt;spring-kafka.version&gt;2.8.6&lt;/spring-kafka.version&gt;\n        &lt;swagger.version&gt;2.1.1&lt;/swagger.version&gt;\n        &lt;xxx.shared.lib.version&gt;0.1.0-SNAPSHOT&lt;/xxx.shared.lib.version&gt;\n        &lt;testcontainers.version&gt;1.16.3&lt;/testcontainers.version&gt;\n        &lt;lombok.version&gt;1.18.24&lt;/lombok.version&gt;\n        &lt;lombok.binding.version&gt;0.2.0&lt;/lombok.binding.version&gt;\n        &lt;mockito.version&gt;4.8.0&lt;/mockito.version&gt;\n        &lt;jupiter.version&gt;5.9.0&lt;/jupiter.version&gt;\n        &lt;jib.version&gt;3.2.1&lt;/jib.version&gt;\n        &lt;surefire.version&gt;3.0.0-M5&lt;/surefire.version&gt;\n        &lt;failsafe.version&gt;3.0.0-M5&lt;/failsafe.version&gt;\n    &lt;/properties&gt;\n</code></pre>\n<p>stack trace</p>\n<pre><code>java.lang.IllegalStateException: Failed to load ApplicationContext\n\n    at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:98)\n    at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:124)\n    at org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener.postProcessFields(MockitoTestExecutionListener.java:110)\n    at org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener.injectFields(MockitoTestExecutionListener.java:94)\n    at org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener.prepareTestInstance(MockitoTestExecutionListener.java:61)\n    at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:248)\n    at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:138)\n    at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$8(ClassBasedTestDescriptor.java:363)\n    at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:368)\n    at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$9(ClassBasedTestDescriptor.java:363)\n    at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:195)\n    at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:177)\n    at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1655)\n    at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:484)\n    at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:474)\n    at java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:312)\n    at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735)\n    at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734)\n    at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:658)\n    at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:362)\n    at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:283)\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\n    at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:282)\n    at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:272)\n    at java.base/java.util.Optional.orElseGet(Optional.java:369)\n    at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:271)\n    at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31)\n    at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:102)\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\n    at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:101)\n    at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:66)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:123)\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:123)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:90)\n    at java.base/java.util.ArrayList.forEach(ArrayList.java:1541)\n    at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)\n    at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)\n    at java.base/java.util.ArrayList.forEach(ArrayList.java:1541)\n    at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)\n    at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)\n    at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)\n    at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)\n    at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)\n    at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:107)\n    at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:88)\n    at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:54)\n    at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:67)\n    at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:52)\n    at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:114)\n    at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:86)\n    at org.junit.platform.launcher.core.DefaultLauncherSession$DelegatingLauncher.execute(DefaultLauncherSession.java:86)\n    at org.junit.platform.launcher.core.SessionPerRequestLauncher.execute(SessionPerRequestLauncher.java:53)\n    at com.intellij.junit5.JUnit5IdeaTestRunner.startRunnerWithArgs(JUnit5IdeaTestRunner.java:57)\n    at com.intellij.rt.junit.IdeaTestRunner$Repeater$1.execute(IdeaTestRunner.java:38)\n    at com.intellij.rt.execution.junit.TestsRepeater.repeat(TestsRepeater.java:11)\n    at com.intellij.rt.junit.IdeaTestRunner$Repeater.startRunnerWithArgs(IdeaTestRunner.java:35)\n    at com.intellij.rt.junit.JUnitStarter.prepareStreamsAndStart(JUnitStarter.java:235)\n    at com.intellij.rt.junit.JUnitStarter.main(JUnitStarter.java:54)\nCaused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'fredRepository' defined in org.xxx.jpa.FredRepository defined in @EnableJpaRepositories declared on JpaRepositoriesRegistrar.EnableJpaRepositoriesConfiguration: Cannot create inner bean '(inner bean)#4c57ca10' of type [org.springframework.orm.jpa.SharedEntityManagerCreator] while setting bean property 'entityManager'; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name '(inner bean)#4c57ca10': Cannot resolve reference to bean 'entityManagerFactory' while setting constructor argument; nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: No bean named 'entityManagerFactory' available\n    at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveInnerBean(BeanDefinitionValueResolver.java:389)\n    at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveValueIfNecessary(BeanDefinitionValueResolver.java:134)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.applyPropertyValues(AbstractAutowireCapableBeanFactory.java:1707)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1452)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:619)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:542)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:335)\n    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:333)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:208)\n    at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:936)\n    at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:918)\n    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:583)\n    at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:147)\n    at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:734)\n    at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:408)\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:308)\n    at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:132)\n    at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:141)\n    at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:90)\n    ... 72 more\nCaused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name '(inner bean)#4c57ca10': Cannot resolve reference to bean 'entityManagerFactory' while setting constructor argument; nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: No bean named 'entityManagerFactory' available\n    at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveReference(BeanDefinitionValueResolver.java:342)\n    at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveValueIfNecessary(BeanDefinitionValueResolver.java:113)\n    at org.springframework.beans.factory.support.ConstructorResolver.resolveConstructorArguments(ConstructorResolver.java:693)\n    at org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:510)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1352)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1195)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:582)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:542)\n    at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveInnerBean(BeanDefinitionValueResolver.java:374)\n    ... 91 more\nCaused by: org.springframework.beans.factory.NoSuchBeanDefinitionException: No bean named 'entityManagerFactory' available\n    at org.springframework.beans.factory.support.DefaultListableBeanFactory.getBeanDefinition(DefaultListableBeanFactory.java:874)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.getMergedLocalBeanDefinition(AbstractBeanFactory.java:1344)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:309)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:208)\n    at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveReference(BeanDefinitionValueResolver.java:330)\n    ... 99 more\n\n</code></pre>\n<p>application.yml</p>\n<pre><code>spring:\n  application:\n    name: xxx\n\n  datasource:\n    driver-class-name: org.postgresql.Driver\n    url: jdbc:postgresql://postgres:5432/xxx\n    username: xxx\n    password: xxx\n\n  jpa:\n    hibernate:\n      ddl-auto: validate\n\n  liquibase:\n    change-log: db/changelog/changelog.xml\n\n</code></pre>\n"},{"tags":["java","android","random"],"comments":[{"owner":{"account_id":45213,"reputation":26348,"user_id":133203,"accept_rate":97,"display_name":"Federico klez Culloca"},"score":7,"creation_date":1529307099,"post_id":50904587,"comment_id":88808926,"body_markdown":"Numbers are numbers. Just generate them within the needed range and do the conversion when you display them.","body":"Numbers are numbers. Just generate them within the needed range and do the conversion when you display them."},{"owner":{"account_id":6446950,"reputation":476,"user_id":4995187,"display_name":"Grenther"},"score":0,"creation_date":1529307300,"post_id":50904587,"comment_id":88809011,"body_markdown":"Possible duplicate of [this](https://stackoverflow.com/questions/11094823/java-how-to-generate-a-random-hexadecimal-value-within-specified-range-of-value)","body":"Possible duplicate of <a href=\"https://stackoverflow.com/questions/11094823/java-how-to-generate-a-random-hexadecimal-value-within-specified-range-of-value\">this</a>"},{"owner":{"account_id":1485367,"reputation":122993,"user_id":1393766,"display_name":"Pshemo"},"score":1,"creation_date":1529307303,"post_id":50904587,"comment_id":88809014,"body_markdown":"Combine [How do I generate random integers within a specific range in Java?](https://stackoverflow.com/q/363681) with `Integer.toHexString(int)`","body":"Combine <a href=\"https://stackoverflow.com/q/363681\">How do I generate random integers within a specific range in Java?</a> with <code>Integer.toHexString(int)</code>"},{"owner":{"account_id":1710326,"reputation":10640,"user_id":1568530,"accept_rate":60,"display_name":"Vladyslav Matviienko"},"score":1,"creation_date":1529307486,"post_id":50904587,"comment_id":88809109,"body_markdown":"6 digit hexademical number is 3 bytes. 3 bytes is 0..16777215 integer. Just generate integer in that range, and then show it as hex.","body":"6 digit hexademical number is 3 bytes. 3 bytes is 0..16777215 integer. Just generate integer in that range, and then show it as hex."},{"owner":{"account_id":2444604,"reputation":897,"user_id":2132294,"display_name":"Eugen"},"score":0,"creation_date":1529307499,"post_id":50904587,"comment_id":88809114,"body_markdown":"Random rnd = new Random();\nint n = rnd.nextInt(999999);\nInteger.valueOf(String.valueOf(n), 16);","body":"Random rnd = new Random(); int n = rnd.nextInt(999999); Integer.valueOf(String.valueOf(n), 16);"}],"answers":[{"tags":[],"owner":{"account_id":11382286,"reputation":1591,"user_id":8344882,"display_name":"gagan singh"},"down_vote_count":0,"up_vote_count":9,"is_accepted":true,"score":9,"last_activity_date":1529308111,"creation_date":1529307448,"answer_id":50904683,"question_id":50904587,"body_markdown":"        String zeros = &quot;000000&quot;;\r\n        Random rnd = new Random();\r\n        String s = Integer.toString(rnd.nextInt(0X1000000), 16);\r\n        s = zeros.substring(s.length()) + s;\r\n        System.out.println(&quot;s = &quot; + s);\r\n","title":"java- how to generate a 6 digit random hexadecimal value","body":"<pre><code>    String zeros = \"000000\";\n    Random rnd = new Random();\n    String s = Integer.toString(rnd.nextInt(0X1000000), 16);\n    s = zeros.substring(s.length()) + s;\n    System.out.println(\"s = \" + s);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5863496,"reputation":8458,"user_id":4618331,"display_name":"Sam"},"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1529307784,"creation_date":1529307784,"answer_id":50904752,"question_id":50904587,"body_markdown":"You can use hex literals in your program the same way as decimal literals. A hex literal is prefixed with `0x`. Your max value is `FFFFFF`, so in your program you can write\r\n\r\n    int maxValue = 0xFFFFFF;\r\n\r\nThen you need to generate random numbers in that range. Use the `Random` class as you normally would.\r\n\r\n    Random r = new Random();\r\n    int myValue = r.nextInt(maxValue + 1);\r\n\r\nNote the use of `maxValue + 1`, because the upper bound for `nextInt()` is exclusive.\r\n\r\nThe final step is to print out your hex value.\r\n\r\n    System.out.printf(&quot;%06X&quot;, myValue);\r\n\r\n","title":"java- how to generate a 6 digit random hexadecimal value","body":"<p>You can use hex literals in your program the same way as decimal literals. A hex literal is prefixed with <code>0x</code>. Your max value is <code>FFFFFF</code>, so in your program you can write</p>\n\n<pre><code>int maxValue = 0xFFFFFF;\n</code></pre>\n\n<p>Then you need to generate random numbers in that range. Use the <code>Random</code> class as you normally would.</p>\n\n<pre><code>Random r = new Random();\nint myValue = r.nextInt(maxValue + 1);\n</code></pre>\n\n<p>Note the use of <code>maxValue + 1</code>, because the upper bound for <code>nextInt()</code> is exclusive.</p>\n\n<p>The final step is to print out your hex value.</p>\n\n<pre><code>System.out.printf(\"%06X\", myValue);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":13785918,"reputation":309,"user_id":9949857,"display_name":"Ravi Patel"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1619827782,"creation_date":1529308601,"answer_id":50904957,"question_id":50904587,"body_markdown":"    SecureRandom random = new SecureRandom();\r\n    int num = random.nextInt(0x1000000);\r\n    String formatted = String.format(&quot;%06x&quot;, num); \r\n    System.out.println(formatted);\r\n\r\n**Code Explain**\r\n\r\n 1. this random object use SecureRandom Class method. this class use for generate random number.\r\n\r\n        SecureRandom random = new SecureRandom();\r\n\r\n 2. next int num object store 6 hexadecimal digit random number\r\n\r\n        int num = random.nextInt(0x1000000);\r\n\r\n 3. then output num as 6 digit hexadecimal number\r\n\r\n        String formatted = String.format(&quot;%06x&quot;, num); ","title":"java- how to generate a 6 digit random hexadecimal value","body":"<pre><code>SecureRandom random = new SecureRandom();\nint num = random.nextInt(0x1000000);\nString formatted = String.format(&quot;%06x&quot;, num); \nSystem.out.println(formatted);\n</code></pre>\n<p><strong>Code Explain</strong></p>\n<ol>\n<li><p>this random object use SecureRandom Class method. this class use for generate random number.</p>\n<pre><code>SecureRandom random = new SecureRandom();\n</code></pre>\n</li>\n<li><p>next int num object store 6 hexadecimal digit random number</p>\n<pre><code>int num = random.nextInt(0x1000000);\n</code></pre>\n</li>\n<li><p>then output num as 6 digit hexadecimal number</p>\n<pre><code>String formatted = String.format(&quot;%06x&quot;, num); \n</code></pre>\n</li>\n</ol>\n"},{"tags":[],"owner":{"account_id":7433,"reputation":24739,"user_id":12916,"accept_rate":23,"display_name":"Jesse Glick"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1667322941,"creation_date":1667322941,"answer_id":74279501,"question_id":50904587,"body_markdown":"More generally:\r\n\r\n```\r\nint digits = 6;\r\nString hex = String.format(&quot;%0&quot; + digits + &quot;x&quot;, new BigInteger(digits * 4, new SecureRandom()));\r\n```","title":"java- how to generate a 6 digit random hexadecimal value","body":"<p>More generally:</p>\n<pre><code>int digits = 6;\nString hex = String.format(&quot;%0&quot; + digits + &quot;x&quot;, new BigInteger(digits * 4, new SecureRandom()));\n</code></pre>\n"}],"owner":{"account_id":2486673,"reputation":2184,"user_id":2164981,"accept_rate":36,"display_name":"kavie"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":9232,"favorite_count":0,"down_vote_count":1,"up_vote_count":3,"accepted_answer_id":50904683,"answer_count":4,"score":2,"last_activity_date":1667322941,"creation_date":1529307066,"question_id":50904587,"body_markdown":"\r\nI have a scenario in a Android app, where a random hexadecimal value has to be generated with 6 digits.  (The range of values can be hexadecimal or integer values).\r\n\r\nWhat is the most efficient way to do this?\r\nDo I have to generate a random decimal number, and then convert it to hexadecimal? Or\r\n can a value be directly generated?","title":"java- how to generate a 6 digit random hexadecimal value","body":"<p>I have a scenario in a Android app, where a random hexadecimal value has to be generated with 6 digits.  (The range of values can be hexadecimal or integer values).</p>\n\n<p>What is the most efficient way to do this?\nDo I have to generate a random decimal number, and then convert it to hexadecimal? Or\n can a value be directly generated?</p>\n"},{"tags":["java","hash","verification","password-encryption","pbkdf2"],"comments":[{"owner":{"account_id":85671,"reputation":40847,"user_id":238704,"display_name":"President James K. Polk"},"score":0,"creation_date":1667353996,"post_id":74279342,"comment_id":131146121,"body_markdown":"You authenticate by getting the original salt that is stored with the hashed password, take the proffered password and hash it with the salt. Compare the output of this with the saved hashed password and if they match then the user is authenticated.","body":"You authenticate by getting the original salt that is stored with the hashed password, take the proffered password and hash it with the salt. Compare the output of this with the saved hashed password and if they match then the user is authenticated."},{"owner":{"account_id":26673178,"reputation":15,"user_id":20284324,"display_name":"AnotherApple"},"score":0,"creation_date":1667550576,"post_id":74279342,"comment_id":131197188,"body_markdown":"That&#39;s interesting, i haven&#39;t really tried it yet, but i will give it a shot soon enough. \n\nA question: How does this affect &#39;security&#39;? \nDo we not need to &#39;store&#39; a variable with both the hash and salt? Couldn&#39;t someone get a hold of the &#39;salt&#39; this way?","body":"That&#39;s interesting, i haven&#39;t really tried it yet, but i will give it a shot soon enough.   A question: How does this affect &#39;security&#39;?  Do we not need to &#39;store&#39; a variable with both the hash and salt? Couldn&#39;t someone get a hold of the &#39;salt&#39; this way?"},{"owner":{"account_id":85671,"reputation":40847,"user_id":238704,"display_name":"President James K. Polk"},"score":0,"creation_date":1667594765,"post_id":74279342,"comment_id":131212043,"body_markdown":"The salt is not a secret and can be stored with the hash, or any other convenient place.","body":"The salt is not a secret and can be stored with the hash, or any other convenient place."}],"answers":[{"tags":[],"owner":{"account_id":24881693,"reputation":155,"user_id":18754816,"display_name":"Игорь Ходыко"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1667322828,"creation_date":1667322828,"answer_id":74279470,"question_id":74279342,"body_markdown":"Of course, you can&#39;t return value of password from hash.\r\nYou need to encode password from UI.\r\nIn the authentication method you compares saved &quot;unreadable&quot; password from DB(you got it now) with new password from UI making scripting of it.\r\n\r\nHash of identical passwords is equal.","title":"Verifying hash password PBKDF2 with Java","body":"<p>Of course, you can't return value of password from hash.\nYou need to encode password from UI.\nIn the authentication method you compares saved &quot;unreadable&quot; password from DB(you got it now) with new password from UI making scripting of it.</p>\n<p>Hash of identical passwords is equal.</p>\n"}],"owner":{"account_id":26673178,"reputation":15,"user_id":20284324,"display_name":"AnotherApple"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":587,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1667322828,"creation_date":1667322134,"question_id":74279342,"body_markdown":"I am currently following a tutorial: https://www.baeldung.com/java-password-hashing \r\nSection 5.2 \r\n\r\nHowever, now that the has has been created, a followup question to this tutorial was.. I just hashed a password and made it unreadable - how in the world will we verify it?!\r\n\r\n\r\n\r\n\r\nCurrently i have this easy method setup:\r\n\r\n\r\n```\r\npublic byte[] generateHash(String password) throws NoSuchAlgorithmException, InvalidKeySpecException {\r\n    \r\n    SecureRandom random = new SecureRandom();\r\n    byte[] salt = new byte[16];\r\n\r\n    random.nextBytes(salt);\r\n\r\n    KeySpec spec = new PBEKeySpec(password.toCharArray(), salt, 65536, 128);\r\n    SecretKeyFactory factory = SecretKeyFactory.getInstance(&quot;BPKDF2WithmacSHA1&quot;);\r\n\r\n    byte[] hash = factory.generateSecret(spec).getEncoded();\r\n\r\n    return hash;\r\n\r\n}\r\n```\r\n\r\nBut i&#39;m missing the actual authentication method...\r\n\r\n\r\n","title":"Verifying hash password PBKDF2 with Java","body":"<p>I am currently following a tutorial: <a href=\"https://www.baeldung.com/java-password-hashing\" rel=\"nofollow noreferrer\">https://www.baeldung.com/java-password-hashing</a>\nSection 5.2</p>\n<p>However, now that the has has been created, a followup question to this tutorial was.. I just hashed a password and made it unreadable - how in the world will we verify it?!</p>\n<p>Currently i have this easy method setup:</p>\n<pre><code>public byte[] generateHash(String password) throws NoSuchAlgorithmException, InvalidKeySpecException {\n    \n    SecureRandom random = new SecureRandom();\n    byte[] salt = new byte[16];\n\n    random.nextBytes(salt);\n\n    KeySpec spec = new PBEKeySpec(password.toCharArray(), salt, 65536, 128);\n    SecretKeyFactory factory = SecretKeyFactory.getInstance(&quot;BPKDF2WithmacSHA1&quot;);\n\n    byte[] hash = factory.generateSecret(spec).getEncoded();\n\n    return hash;\n\n}\n</code></pre>\n<p>But i'm missing the actual authentication method...</p>\n"},{"tags":["java","git","jgit"],"answers":[{"tags":[],"owner":{"account_id":175178,"reputation":20166,"user_id":405013,"accept_rate":100,"display_name":"caarlos0"},"down_vote_count":0,"up_vote_count":35,"is_accepted":true,"score":35,"last_activity_date":1667322565,"creation_date":1349789847,"answer_id":12801356,"question_id":12799573,"body_markdown":"Managed it to work that way:\r\n    \r\n    Git git = new Git(localRepository);\r\n    StoredConfig config = git.getRepository().getConfig();\r\n    config.setString(&quot;remote&quot;, &quot;origin&quot;, &quot;url&quot;, &quot;http://github.com/user/repo&quot;);\r\n    config.save();\r\n\r\n","title":"Add remote via JGit","body":"<p>Managed it to work that way:</p>\n<pre><code>Git git = new Git(localRepository);\nStoredConfig config = git.getRepository().getConfig();\nconfig.setString(&quot;remote&quot;, &quot;origin&quot;, &quot;url&quot;, &quot;http://github.com/user/repo&quot;);\nconfig.save();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":44775,"reputation":687,"user_id":131578,"accept_rate":75,"display_name":"Daniel Flower"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1514357502,"creation_date":1514357502,"answer_id":47987676,"question_id":12799573,"body_markdown":"There are classes to add new ones:\r\n\r\n        RemoteAddCommand remoteAddCommand = git.remoteAdd();\r\n        remoteAddCommand.setName(&quot;origin&quot;);\r\n        remoteAddCommand.setUri(new URIish(&quot;http://github.com/user/repo&quot;));\r\n        remoteAddCommand.call();\r\n\r\nThere is a `RemoteSetUrlCommand` too.","title":"Add remote via JGit","body":"<p>There are classes to add new ones:</p>\n\n<pre><code>    RemoteAddCommand remoteAddCommand = git.remoteAdd();\n    remoteAddCommand.setName(\"origin\");\n    remoteAddCommand.setUri(new URIish(\"http://github.com/user/repo\"));\n    remoteAddCommand.call();\n</code></pre>\n\n<p>There is a <code>RemoteSetUrlCommand</code> too.</p>\n"},{"tags":[],"owner":{"account_id":1535458,"reputation":6426,"user_id":1431641,"display_name":"Shijing Lv"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1600147262,"creation_date":1600147262,"answer_id":63895571,"question_id":12799573,"body_markdown":"You can direct manipulate remote object with [git24j][1]\r\n\r\n\r\n    Repository repo = Repository.open(&quot;your-repository&quot;);\r\n    Remote upstream = Remote.create(repo, &quot;upstream&quot;, URI.create(&quot;http://github.com/user/repo&quot;));\r\n\r\nand of cause you can also do the same thing through git-config APIs:\r\n\r\n    Config cfg = Config.openOndisk(&quot;my-git.config&quot;);\r\n    cfg.setString(&quot;remote.url&quot;, &quot;http://github.com/user/repo&quot;);\r\n\r\n\r\n  [1]: https://github.com/git24j","title":"Add remote via JGit","body":"<p>You can direct manipulate remote object with <a href=\"https://github.com/git24j\" rel=\"nofollow noreferrer\">git24j</a></p>\n<pre><code>Repository repo = Repository.open(&quot;your-repository&quot;);\nRemote upstream = Remote.create(repo, &quot;upstream&quot;, URI.create(&quot;http://github.com/user/repo&quot;));\n</code></pre>\n<p>and of cause you can also do the same thing through git-config APIs:</p>\n<pre><code>Config cfg = Config.openOndisk(&quot;my-git.config&quot;);\ncfg.setString(&quot;remote.url&quot;, &quot;http://github.com/user/repo&quot;);\n</code></pre>\n"}],"owner":{"account_id":175178,"reputation":20166,"user_id":405013,"accept_rate":100,"display_name":"caarlos0"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":8414,"favorite_count":0,"down_vote_count":0,"up_vote_count":20,"accepted_answer_id":12801356,"answer_count":3,"score":20,"last_activity_date":1667322565,"creation_date":1349784028,"question_id":12799573,"body_markdown":"I playing around JGit, I could successfully remove a remote from some repository (`git remote rm origin`), how can I do a `git remote add origin http://github.com/user/repo` ?\r\n\r\nTo remove I do the following:\r\n\r\n    StoredConfig config = git.getRepository().getConfig();\r\n    config.unsetSection(&quot;remote&quot;, &quot;origin&quot;);\r\n    config.save();\r\n\r\nBut there&#39;s no a option like `#setSection(String, String)`.\r\n\r\nThanks in advance.","title":"Add remote via JGit","body":"<p>I playing around JGit, I could successfully remove a remote from some repository (<code>git remote rm origin</code>), how can I do a <code>git remote add origin http://github.com/user/repo</code> ?</p>\n\n<p>To remove I do the following:</p>\n\n<pre><code>StoredConfig config = git.getRepository().getConfig();\nconfig.unsetSection(\"remote\", \"origin\");\nconfig.save();\n</code></pre>\n\n<p>But there's no a option like <code>#setSection(String, String)</code>.</p>\n\n<p>Thanks in advance.</p>\n"},{"tags":["java","maven","dependencies","pom.xml","rest-assured"],"answers":[{"tags":[],"owner":{"account_id":9455787,"reputation":644,"user_id":7031148,"display_name":"Alex Karamfilov"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1667322246,"creation_date":1667322246,"answer_id":74279364,"question_id":74277626,"body_markdown":"Using exactly the same pom file, I had no issues resolving the Rest Assured.\r\nIt must be something else. Network related issues.\r\nTry purging the local maven repository:\r\n```\r\nmvn dependency:purge-local-repository\r\n```\r\n```\r\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n    &lt;groupId&gt;DemoProject&lt;/groupId&gt;\r\n    &lt;artifactId&gt;DemoProject&lt;/artifactId&gt;\r\n    &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\r\n    &lt;build&gt;\r\n        &lt;sourceDirectory&gt;src&lt;/sourceDirectory&gt;\r\n        &lt;plugins&gt;\r\n\r\n        &lt;/plugins&gt;\r\n    &lt;/build&gt;\r\n    &lt;dependencies&gt;\r\n        &lt;!-- https://mvnrepository.com/artifact/io.rest-assured/rest-assured --&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;io.rest-assured&lt;/groupId&gt;\r\n            &lt;artifactId&gt;rest-assured&lt;/artifactId&gt;\r\n            &lt;version&gt;5.2.0&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;!-- https://mvnrepository.com/artifact/org.testng/testng --&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.testng&lt;/groupId&gt;\r\n            &lt;artifactId&gt;testng&lt;/artifactId&gt;\r\n            &lt;version&gt;7.6.1&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;!-- https://mvnrepository.com/artifact/org.hamcrest/hamcrest --&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.hamcrest&lt;/groupId&gt;\r\n            &lt;artifactId&gt;hamcrest&lt;/artifactId&gt;\r\n            &lt;version&gt;2.2&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n\r\n    &lt;/dependencies&gt;\r\n&lt;/project&gt;\r\n```","title":"import io.restassured.RestAssured cannot be resolved","body":"<p>Using exactly the same pom file, I had no issues resolving the Rest Assured.\nIt must be something else. Network related issues.\nTry purging the local maven repository:</p>\n<pre><code>mvn dependency:purge-local-repository\n</code></pre>\n<pre><code>&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n    &lt;groupId&gt;DemoProject&lt;/groupId&gt;\n    &lt;artifactId&gt;DemoProject&lt;/artifactId&gt;\n    &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n    &lt;build&gt;\n        &lt;sourceDirectory&gt;src&lt;/sourceDirectory&gt;\n        &lt;plugins&gt;\n\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n    &lt;dependencies&gt;\n        &lt;!-- https://mvnrepository.com/artifact/io.rest-assured/rest-assured --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;io.rest-assured&lt;/groupId&gt;\n            &lt;artifactId&gt;rest-assured&lt;/artifactId&gt;\n            &lt;version&gt;5.2.0&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;!-- https://mvnrepository.com/artifact/org.testng/testng --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.testng&lt;/groupId&gt;\n            &lt;artifactId&gt;testng&lt;/artifactId&gt;\n            &lt;version&gt;7.6.1&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;!-- https://mvnrepository.com/artifact/org.hamcrest/hamcrest --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.hamcrest&lt;/groupId&gt;\n            &lt;artifactId&gt;hamcrest&lt;/artifactId&gt;\n            &lt;version&gt;2.2&lt;/version&gt;\n        &lt;/dependency&gt;\n\n    &lt;/dependencies&gt;\n&lt;/project&gt;\n</code></pre>\n"}],"owner":{"account_id":26796279,"reputation":1,"user_id":20388975,"display_name":"abhi7394"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":749,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1667322246,"creation_date":1667313629,"question_id":74277626,"body_markdown":"I am not able to resolve the error in Eclipse IDE\r\nThe type io.restassured.RestAssured is not accessible. I recreated the project, cleaned it, create POM again but still the issue. Below is my POM.\r\n\r\n`\r\n```\r\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n  &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n  &lt;groupId&gt;DemoProject&lt;/groupId&gt;\r\n  &lt;artifactId&gt;DemoProject&lt;/artifactId&gt;\r\n  &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\r\n  &lt;build&gt;\r\n    &lt;sourceDirectory&gt;src&lt;/sourceDirectory&gt;\r\n    &lt;plugins&gt;\r\n      &lt;plugin&gt;\r\n        &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\r\n        &lt;version&gt;3.8.1&lt;/version&gt;\r\n        &lt;configuration&gt;\r\n          &lt;release&gt;18&lt;/release&gt;\r\n        &lt;/configuration&gt;\r\n      &lt;/plugin&gt;\r\n    &lt;/plugins&gt;\r\n  &lt;/build&gt;\r\n  &lt;dependencies&gt;\r\n  &lt;!-- https://mvnrepository.com/artifact/io.rest-assured/rest-assured --&gt;\r\n&lt;dependency&gt;\r\n    &lt;groupId&gt;io.rest-assured&lt;/groupId&gt;\r\n    &lt;artifactId&gt;rest-assured&lt;/artifactId&gt;\r\n    &lt;version&gt;5.2.0&lt;/version&gt;\r\n&lt;/dependency&gt;\r\n&lt;!-- https://mvnrepository.com/artifact/org.testng/testng --&gt;\r\n&lt;dependency&gt;\r\n    &lt;groupId&gt;org.testng&lt;/groupId&gt;\r\n    &lt;artifactId&gt;testng&lt;/artifactId&gt;\r\n    &lt;version&gt;7.6.1&lt;/version&gt;\r\n&lt;/dependency&gt;\r\n&lt;!-- https://mvnrepository.com/artifact/org.hamcrest/hamcrest --&gt;\r\n&lt;dependency&gt;\r\n    &lt;groupId&gt;org.hamcrest&lt;/groupId&gt;\r\n    &lt;artifactId&gt;hamcrest&lt;/artifactId&gt;\r\n    &lt;version&gt;2.2&lt;/version&gt;\r\n&lt;/dependency&gt;\r\n\r\n  &lt;/dependencies&gt;\r\n&lt;/project&gt;\r\n```\r\n\r\n```\r\ntype here\r\n```\r\n`\r\n\r\nI am using latest dependencies from maven. ","title":"import io.restassured.RestAssured cannot be resolved","body":"<p>I am not able to resolve the error in Eclipse IDE\nThe type io.restassured.RestAssured is not accessible. I recreated the project, cleaned it, create POM again but still the issue. Below is my POM.</p>\n<p>`</p>\n<pre><code>&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n  &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n  &lt;groupId&gt;DemoProject&lt;/groupId&gt;\n  &lt;artifactId&gt;DemoProject&lt;/artifactId&gt;\n  &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n  &lt;build&gt;\n    &lt;sourceDirectory&gt;src&lt;/sourceDirectory&gt;\n    &lt;plugins&gt;\n      &lt;plugin&gt;\n        &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n        &lt;version&gt;3.8.1&lt;/version&gt;\n        &lt;configuration&gt;\n          &lt;release&gt;18&lt;/release&gt;\n        &lt;/configuration&gt;\n      &lt;/plugin&gt;\n    &lt;/plugins&gt;\n  &lt;/build&gt;\n  &lt;dependencies&gt;\n  &lt;!-- https://mvnrepository.com/artifact/io.rest-assured/rest-assured --&gt;\n&lt;dependency&gt;\n    &lt;groupId&gt;io.rest-assured&lt;/groupId&gt;\n    &lt;artifactId&gt;rest-assured&lt;/artifactId&gt;\n    &lt;version&gt;5.2.0&lt;/version&gt;\n&lt;/dependency&gt;\n&lt;!-- https://mvnrepository.com/artifact/org.testng/testng --&gt;\n&lt;dependency&gt;\n    &lt;groupId&gt;org.testng&lt;/groupId&gt;\n    &lt;artifactId&gt;testng&lt;/artifactId&gt;\n    &lt;version&gt;7.6.1&lt;/version&gt;\n&lt;/dependency&gt;\n&lt;!-- https://mvnrepository.com/artifact/org.hamcrest/hamcrest --&gt;\n&lt;dependency&gt;\n    &lt;groupId&gt;org.hamcrest&lt;/groupId&gt;\n    &lt;artifactId&gt;hamcrest&lt;/artifactId&gt;\n    &lt;version&gt;2.2&lt;/version&gt;\n&lt;/dependency&gt;\n\n  &lt;/dependencies&gt;\n&lt;/project&gt;\n</code></pre>\n<pre><code>type here\n</code></pre>\n<p>`</p>\n<p>I am using latest dependencies from maven.</p>\n"},{"tags":["java","spring-boot","reactive","r2dbc"],"answers":[{"tags":[],"owner":{"account_id":17898206,"reputation":225,"user_id":13003044,"display_name":"cpigeon"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1666520452,"creation_date":1666229232,"answer_id":74133528,"question_id":74120410,"body_markdown":"First, to answer in a more general sense, the reactive stack is - unfortunately - not a one-size-fits-all shortcut to make applications perform better. One of the main benefits of using WebFlux is its ability to handle more **concurrent requests** when compared to servlet.\r\n\r\nNow to the problem at hand. I will assume that the latency values you have given are averages obtained from a fairly heavy load test.\r\n\r\nOne thing that comes to mind is that the first couple of requests served by a reactive application after its startup always take extra time - this can be attributed to Netty initialization. For this reason, in busy production environments, we have always had some form of automated warmup in place. Although I assume your load tests send so many requests that this should not be a factor.\r\n\r\nFor the above reason, I am inclined to believe that the cause of this slowdown could be simply down to excessive logging - setting the package `org.springframework.r2dbc` to `DEBUG` level logs every single SQL statement executed - and in the context of a load test, excessive logging wreaks havoc on performance and pollutes results.\r\n\r\n---\r\n\r\nEdit\r\n---\r\n\r\nFor reference, I have built two similar apps with postgres based on your post. One servlet with JPA, and one reactive with R2DBC.\r\n\r\nI have executed a 30-second Gatling load test on both, simulating 200 constant concurrent users. The actual request sent was either an insert or a get operation, both had equal weight when it came to choosing.\r\n\r\n\r\nThe load test in question:\r\n\r\n```java\r\npublic class ReactiveApplicationLoadTest extends Simulation {\r\n    private static final String BASE_URL = &quot;http://localhost:8083&quot;;\r\n    private static final String BOOK_URI = &quot;/book&quot;;\r\n\r\n    HttpProtocolBuilder httpProtocol = http\r\n        .baseUrl(BASE_URL);\r\n\r\n    ScenarioBuilder scenario = scenario(&quot;Get All Books&quot;).randomSwitch()\r\n        .on(\r\n            Choice.withWeight(1, exec(\r\n                http(&quot;GET_ONE&quot;)\r\n                    .get(BOOK_URI + &quot;/1&quot;)\r\n            )),\r\n            Choice.withWeight(1, exec(\r\n                http(&quot;INSERT&quot;)\r\n                    .post(BOOK_URI)\r\n                    .header(&quot;Content-Type&quot;, &quot;application/json&quot;)\r\n                    .body(StringBody(&quot;{\\&quot;name\\&quot;: \\&quot;book\\&quot;, \\&quot;author\\&quot;: \\&quot;author\\&quot;, \\&quot;text\\&quot;: \\&quot;text\\&quot;}&quot;))\r\n            ))\r\n        );\r\n\r\n    {\r\n        setUp(\r\n            scenario.injectClosed(constantConcurrentUsers(200).during(30)).protocols(httpProtocol)\r\n        );\r\n    }\r\n}\r\n```\r\n\r\nMy computer&#39;s relevant specifications:\r\n- CPU: intel i7 11700K\r\n- RAM: 32GB DDR4 @ 3600MHz\r\n\r\nThe source code of the two apps:\r\n- [GitHub][1]\r\n\r\nThe results:\r\n- [Reactive][2]\r\n- [Servlet][3]\r\n\r\nMy results lean heavily in the favor of the reactive application, both in response times and the number of KO&#39;d requests.\r\n\r\nYou might notice that I did not include a &quot;get all&quot; request in the load test. The reason for this is that the sheer amount of items created in the load test don&#39;t mix well with this broad query, especially in a reactive context - this might be the source of the results you are seeing.\r\n\r\nTakeaway\r\n---\r\n\r\nConsider adding some form of pagination to your &quot;get all&quot; endpoints in both apps OR omit these calls from your load test, and then try again.\r\n\r\n\r\n  [1]: https://github.com/claypigeon123/SO_74120410\r\n  [2]: https://cpigeon-public-temp.s3.eu-central-1.amazonaws.com/reactive/index.html\r\n  [3]: https://cpigeon-public-temp.s3.eu-central-1.amazonaws.com/servlet/index.html","title":"Spring Boot Reactive java app is slower simple spring boot app. Why?","body":"<p>First, to answer in a more general sense, the reactive stack is - unfortunately - not a one-size-fits-all shortcut to make applications perform better. One of the main benefits of using WebFlux is its ability to handle more <strong>concurrent requests</strong> when compared to servlet.</p>\n<p>Now to the problem at hand. I will assume that the latency values you have given are averages obtained from a fairly heavy load test.</p>\n<p>One thing that comes to mind is that the first couple of requests served by a reactive application after its startup always take extra time - this can be attributed to Netty initialization. For this reason, in busy production environments, we have always had some form of automated warmup in place. Although I assume your load tests send so many requests that this should not be a factor.</p>\n<p>For the above reason, I am inclined to believe that the cause of this slowdown could be simply down to excessive logging - setting the package <code>org.springframework.r2dbc</code> to <code>DEBUG</code> level logs every single SQL statement executed - and in the context of a load test, excessive logging wreaks havoc on performance and pollutes results.</p>\n<hr />\n<h2>Edit</h2>\n<p>For reference, I have built two similar apps with postgres based on your post. One servlet with JPA, and one reactive with R2DBC.</p>\n<p>I have executed a 30-second Gatling load test on both, simulating 200 constant concurrent users. The actual request sent was either an insert or a get operation, both had equal weight when it came to choosing.</p>\n<p>The load test in question:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class ReactiveApplicationLoadTest extends Simulation {\n    private static final String BASE_URL = &quot;http://localhost:8083&quot;;\n    private static final String BOOK_URI = &quot;/book&quot;;\n\n    HttpProtocolBuilder httpProtocol = http\n        .baseUrl(BASE_URL);\n\n    ScenarioBuilder scenario = scenario(&quot;Get All Books&quot;).randomSwitch()\n        .on(\n            Choice.withWeight(1, exec(\n                http(&quot;GET_ONE&quot;)\n                    .get(BOOK_URI + &quot;/1&quot;)\n            )),\n            Choice.withWeight(1, exec(\n                http(&quot;INSERT&quot;)\n                    .post(BOOK_URI)\n                    .header(&quot;Content-Type&quot;, &quot;application/json&quot;)\n                    .body(StringBody(&quot;{\\&quot;name\\&quot;: \\&quot;book\\&quot;, \\&quot;author\\&quot;: \\&quot;author\\&quot;, \\&quot;text\\&quot;: \\&quot;text\\&quot;}&quot;))\n            ))\n        );\n\n    {\n        setUp(\n            scenario.injectClosed(constantConcurrentUsers(200).during(30)).protocols(httpProtocol)\n        );\n    }\n}\n</code></pre>\n<p>My computer's relevant specifications:</p>\n<ul>\n<li>CPU: intel i7 11700K</li>\n<li>RAM: 32GB DDR4 @ 3600MHz</li>\n</ul>\n<p>The source code of the two apps:</p>\n<ul>\n<li><a href=\"https://github.com/claypigeon123/SO_74120410\" rel=\"nofollow noreferrer\">GitHub</a></li>\n</ul>\n<p>The results:</p>\n<ul>\n<li><a href=\"https://cpigeon-public-temp.s3.eu-central-1.amazonaws.com/reactive/index.html\" rel=\"nofollow noreferrer\">Reactive</a></li>\n<li><a href=\"https://cpigeon-public-temp.s3.eu-central-1.amazonaws.com/servlet/index.html\" rel=\"nofollow noreferrer\">Servlet</a></li>\n</ul>\n<p>My results lean heavily in the favor of the reactive application, both in response times and the number of KO'd requests.</p>\n<p>You might notice that I did not include a &quot;get all&quot; request in the load test. The reason for this is that the sheer amount of items created in the load test don't mix well with this broad query, especially in a reactive context - this might be the source of the results you are seeing.</p>\n<h2>Takeaway</h2>\n<p>Consider adding some form of pagination to your &quot;get all&quot; endpoints in both apps OR omit these calls from your load test, and then try again.</p>\n"},{"tags":[],"owner":{"account_id":24881693,"reputation":155,"user_id":18754816,"display_name":"Игорь Ходыко"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1667322157,"creation_date":1666634815,"answer_id":74185122,"question_id":74120410,"body_markdown":"This issue was solved by adding properties of thread-pool to \r\napplication.yml\r\n\r\n      spring:\r\n        r2dbc:  \r\n          pool:\r\n            initial-size: 10\r\n            max-size: 20\r\n\r\nAlso There is was used non-blocking subscription to repository\r\n\r\n    Mono.defer(()-&gt; Mono.from(bookRepository.findAllBookWithDelayById(id)\r\n                                 .subscribeOn(Schedulers.boundedElastic())));\r\n\r\nApplication became 1.8 times faster then non-reactive.\r\n\r\n","title":"Spring Boot Reactive java app is slower simple spring boot app. Why?","body":"<p>This issue was solved by adding properties of thread-pool to\napplication.yml</p>\n<pre><code>  spring:\n    r2dbc:  \n      pool:\n        initial-size: 10\n        max-size: 20\n</code></pre>\n<p>Also There is was used non-blocking subscription to repository</p>\n<pre><code>Mono.defer(()-&gt; Mono.from(bookRepository.findAllBookWithDelayById(id)\n                             .subscribeOn(Schedulers.boundedElastic())));\n</code></pre>\n<p>Application became 1.8 times faster then non-reactive.</p>\n"}],"owner":{"account_id":24881693,"reputation":155,"user_id":18754816,"display_name":"Игорь Ходыко"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1233,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"accepted_answer_id":74185122,"answer_count":2,"score":-1,"last_activity_date":1667322157,"creation_date":1666158257,"question_id":74120410,"body_markdown":"I made two apps with similar code on Spring Boot.\r\n1) Reactive Netty spring boot webflux r2dbc.\r\n2) Nonreactive Tomcat spring boot postgres.\r\n\r\n&lt;/br&gt;\r\nI expect reactive one is faster or has the same speed. But it is slower 6th time.\r\nI don&#39;t see any blocks there. In my opinion it is fully nonblocking app. Why so slowly?\r\nFor testing I have been using J-METER.\r\n200 threads 200 times\r\ngetAll 400 strings\r\nLatency of response nonreactive app - 190-240 ms.\r\nLatency of response reactive app - 1290-1350 ms.\r\n\r\nreactive pom\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n             xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n        &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n        &lt;parent&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n            &lt;version&gt;2.6.6&lt;/version&gt;\r\n            &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\r\n        &lt;/parent&gt;\r\n        &lt;groupId&gt;com.example&lt;/groupId&gt;\r\n        &lt;artifactId&gt;reactive&lt;/artifactId&gt;\r\n        &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\r\n        &lt;packaging&gt;war&lt;/packaging&gt;\r\n        &lt;name&gt;reactive&lt;/name&gt;\r\n        &lt;description&gt;reactive&lt;/description&gt;\r\n        &lt;properties&gt;\r\n            &lt;java.version&gt;1.8&lt;/java.version&gt;\r\n            &lt;mapstruct.version&gt;1.4.2.Final&lt;/mapstruct.version&gt;\r\n            &lt;lombok-mapstruct-binding.version&gt;0.2.0&lt;/lombok-mapstruct-binding.version&gt;\r\n        &lt;/properties&gt;\r\n        &lt;dependencies&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n                &lt;artifactId&gt;spring-boot-starter-data-r2dbc&lt;/artifactId&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n                &lt;artifactId&gt;spring-boot-starter-security&lt;/artifactId&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n                &lt;artifactId&gt;spring-boot-starter-webflux&lt;/artifactId&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n                &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;io.r2dbc&lt;/groupId&gt;\r\n                &lt;artifactId&gt;r2dbc-postgresql&lt;/artifactId&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\r\n                &lt;artifactId&gt;lombok&lt;/artifactId&gt;\r\n                &lt;scope&gt;provided&lt;/scope&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.mapstruct&lt;/groupId&gt;\r\n                &lt;artifactId&gt;mapstruct&lt;/artifactId&gt;\r\n                &lt;version&gt;${mapstruct.version}&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n        &lt;/dependencies&gt;\r\n        &lt;build&gt;\r\n            &lt;plugins&gt;\r\n                &lt;plugin&gt;\r\n                    &lt;artifactId&gt;maven-war-plugin&lt;/artifactId&gt;\r\n                    &lt;version&gt;2.4&lt;/version&gt;\r\n                    &lt;configuration&gt;\r\n                        &lt;failOnMissingWebXml&gt;false&lt;/failOnMissingWebXml&gt;\r\n                    &lt;/configuration&gt;\r\n                &lt;/plugin&gt;\r\n                &lt;plugin&gt;\r\n                    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n                    &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\r\n                    &lt;configuration&gt;\r\n                        &lt;excludes&gt;\r\n                            &lt;exclude&gt;\r\n                                &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\r\n                                &lt;artifactId&gt;lombok&lt;/artifactId&gt;\r\n                            &lt;/exclude&gt;\r\n                        &lt;/excludes&gt;\r\n                    &lt;/configuration&gt;\r\n                &lt;/plugin&gt;\r\n                &lt;plugin&gt;\r\n                    &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n                    &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\r\n                    &lt;version&gt;3.5.1&lt;/version&gt;\r\n                    &lt;configuration&gt;\r\n                        &lt;source&gt;1.8&lt;/source&gt;\r\n                        &lt;target&gt;1.8&lt;/target&gt;\r\n                        &lt;annotationProcessorPaths&gt;\r\n                            &lt;path&gt;\r\n                                &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\r\n                                &lt;artifactId&gt;lombok&lt;/artifactId&gt;\r\n                                &lt;version&gt;${lombok.version}&lt;/version&gt;\r\n                            &lt;/path&gt;\r\n                            &lt;path&gt;\r\n                                &lt;groupId&gt;org.mapstruct&lt;/groupId&gt;\r\n                                &lt;artifactId&gt;mapstruct-processor&lt;/artifactId&gt;\r\n                                &lt;version&gt;${mapstruct.version}&lt;/version&gt;\r\n                            &lt;/path&gt;\r\n                        &lt;/annotationProcessorPaths&gt;\r\n                    &lt;/configuration&gt;\r\n                &lt;/plugin&gt;\r\n            &lt;/plugins&gt;\r\n        &lt;/build&gt;\r\n        &lt;repositories&gt;\r\n            &lt;repository&gt;\r\n                &lt;id&gt;spring-milestones&lt;/id&gt;\r\n                &lt;name&gt;Spring Milestones&lt;/name&gt;\r\n                &lt;url&gt;https://repo.spring.io/milestone&lt;/url&gt;\r\n                &lt;snapshots&gt;\r\n                    &lt;enabled&gt;false&lt;/enabled&gt;\r\n                &lt;/snapshots&gt;\r\n            &lt;/repository&gt;\r\n            &lt;repository&gt;\r\n                &lt;id&gt;spring-snapshots&lt;/id&gt;\r\n                &lt;name&gt;Spring Snapshots&lt;/name&gt;\r\n                &lt;url&gt;https://repo.spring.io/snapshot&lt;/url&gt;\r\n                &lt;releases&gt;\r\n                    &lt;enabled&gt;false&lt;/enabled&gt;\r\n                &lt;/releases&gt;\r\n            &lt;/repository&gt;\r\n        &lt;/repositories&gt;\r\n        &lt;pluginRepositories&gt;\r\n            &lt;pluginRepository&gt;\r\n                &lt;id&gt;spring-milestones&lt;/id&gt;\r\n                &lt;name&gt;Spring Milestones&lt;/name&gt;\r\n                &lt;url&gt;https://repo.spring.io/milestone&lt;/url&gt;\r\n                &lt;snapshots&gt;\r\n                    &lt;enabled&gt;false&lt;/enabled&gt;\r\n                &lt;/snapshots&gt;\r\n            &lt;/pluginRepository&gt;\r\n            &lt;pluginRepository&gt;\r\n                &lt;id&gt;spring-snapshots&lt;/id&gt;\r\n                &lt;name&gt;Spring Snapshots&lt;/name&gt;\r\n                &lt;url&gt;https://repo.spring.io/snapshot&lt;/url&gt;\r\n                &lt;releases&gt;\r\n                    &lt;enabled&gt;false&lt;/enabled&gt;\r\n                &lt;/releases&gt;\r\n            &lt;/pluginRepository&gt;\r\n        &lt;/pluginRepositories&gt;\r\n    &lt;/project&gt;\r\nSpring boot entry point\r\n\r\n    @SpringBootApplication(exclude = {ReactiveSecurityAutoConfiguration.class})\r\n    @Configuration\r\n    @EnableR2dbcRepositories\r\n    public class ReactiveApplication {\r\n    \r\n        public static void main(String[] args) {\r\n            SpringApplication.run(ReactiveApplication.class, args);\r\n        }\r\n        \r\n    }\r\napplication.yml\r\n\r\n    server:\r\n      port : 8083\r\n    spring:\r\n      data:\r\n        r2dbc:\r\n          repositories:\r\n            enabled: true\r\n      r2dbc:\r\n        url: r2dbc:postgresql://localhost:5432/reactive\r\n        username: postgres\r\n        password: 12345\r\n        properties:\r\n          schema: bookshop\r\n    \r\n    logging:\r\n      level:\r\n        org:\r\n          springframework:\r\n            r2dbc: DEBUG\r\nController\r\n\r\n    package com.example.reactive.controller;\r\n    \r\n    import com.example.reactive.entity.Book;\r\n    import org.springframework.http.HttpStatus;\r\n    import org.springframework.http.MediaType;\r\n    import org.springframework.web.bind.annotation.*;\r\n    import reactor.core.publisher.Flux;\r\n    import reactor.core.publisher.Mono;\r\n    \r\n    @RequestMapping(&quot;/book&quot;)\r\n    public interface BookController {\r\n    \r\n        @ResponseStatus(code = HttpStatus.OK)\r\n        @PostMapping(consumes = MediaType.APPLICATION_JSON_VALUE)\r\n        Mono&lt;Book&gt; saveBook(@RequestBody Book book);\r\n    \r\n        @ResponseStatus(code = HttpStatus.OK)\r\n        @GetMapping(&quot;/{id}&quot;)\r\n        Mono&lt;Book&gt; getBookById(@PathVariable Long id);\r\n    \r\n        @ResponseStatus(code = HttpStatus.OK)\r\n        @GetMapping(&quot;/all&quot;)\r\n        Flux&lt;Book&gt; getAllBooks();\r\n    }\r\nControllerImpl\r\n\r\n    package com.example.reactive.controller.impl;\r\n    \r\n    import com.example.reactive.controller.BookController;\r\n    import com.example.reactive.entity.Book;\r\n    import com.example.reactive.repository.BookRepository;\r\n    import lombok.RequiredArgsConstructor;\r\n    import org.springframework.web.bind.annotation.RestController;\r\n    import reactor.core.publisher.Flux;\r\n    import reactor.core.publisher.Mono;\r\n    \r\n    @RestController\r\n    @RequiredArgsConstructor\r\n    public class BookControllerImpl implements BookController {\r\n    \r\n        private final BookRepository bookRepository;\r\n    \r\n        @Override\r\n        public Mono&lt;Book&gt; saveBook(Book book) {\r\n            return bookRepository.save(book);\r\n        }\r\n    \r\n        @Override\r\n        public Mono&lt;Book&gt; getBookById(Long id) {\r\n            return bookRepository.findById(id);\r\n        }\r\n    \r\n        @Override\r\n        public Flux&lt;Book&gt; getAllBooks() {\r\n            return bookRepository.findAll();\r\n        }\r\n    }\r\n\r\nEntity\r\n\r\n    package com.example.reactive.entity;\r\n    \r\n    import lombok.AllArgsConstructor;\r\n    import lombok.Builder;\r\n    import lombok.Data;\r\n    import lombok.NoArgsConstructor;\r\n    import org.springframework.data.annotation.Id;\r\n    @Data\r\n    @NoArgsConstructor\r\n    @AllArgsConstructor\r\n    @Builder\r\n    public class Book {\r\n        @Id\r\n        private Long id;\r\n        private String name;\r\n        private String author;\r\n        private String text;\r\n    }\r\nRepository\r\n\r\n    package com.example.reactive.repository;\r\n    \r\n    import com.example.reactive.entity.Book;\r\n    import org.springframework.data.repository.reactive.ReactiveCrudRepository;\r\n    \r\n    \r\n    public interface BookRepository extends ReactiveCrudRepository&lt;Book, Long&gt; {\r\n    }\r\n\r\nIf you need more information, feel free to write comments.\r\n\r\nEDITED\r\n\r\nAfter adding thread-pool parameters of min value 50 and max value 100, reactive app become faster.\r\nI don&#39;t use get All property to compare apps.\r\nFor testing I have been using J-METER.200 threads 200 times\r\n\r\n\r\nget 1 different string\r\n\r\nLatency of response nonreactive app - middle 6 ms.\r\nLatency of response reactive app - middle 10 ms.\r\n\r\npost 1 string\r\nLatency of response nonreactive app - middle 37 ms.\r\nLatency of response reactive app - middle 6 ms!!!!!!!!\r\n\r\n\r\nComputer parameters\r\nProcessor  Intel&#174; Core™ i 5-10400 CPU @ 2.90 GHz &#215; 12.\r\nRAM        16,0&#160;GB.\r\n","title":"Spring Boot Reactive java app is slower simple spring boot app. Why?","body":"<p>I made two apps with similar code on Spring Boot.</p>\n<ol>\n<li>Reactive Netty spring boot webflux r2dbc.</li>\n<li>Nonreactive Tomcat spring boot postgres.</li>\n</ol>\n\nI expect reactive one is faster or has the same speed. But it is slower 6th time.\nI don't see any blocks there. In my opinion it is fully nonblocking app. Why so slowly?\nFor testing I have been using J-METER.\n200 threads 200 times\ngetAll 400 strings\nLatency of response nonreactive app - 190-240 ms.\nLatency of response reactive app - 1290-1350 ms.\n<p>reactive pom</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n         xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n    &lt;parent&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n        &lt;version&gt;2.6.6&lt;/version&gt;\n        &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\n    &lt;/parent&gt;\n    &lt;groupId&gt;com.example&lt;/groupId&gt;\n    &lt;artifactId&gt;reactive&lt;/artifactId&gt;\n    &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n    &lt;packaging&gt;war&lt;/packaging&gt;\n    &lt;name&gt;reactive&lt;/name&gt;\n    &lt;description&gt;reactive&lt;/description&gt;\n    &lt;properties&gt;\n        &lt;java.version&gt;1.8&lt;/java.version&gt;\n        &lt;mapstruct.version&gt;1.4.2.Final&lt;/mapstruct.version&gt;\n        &lt;lombok-mapstruct-binding.version&gt;0.2.0&lt;/lombok-mapstruct-binding.version&gt;\n    &lt;/properties&gt;\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-data-r2dbc&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-security&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-webflux&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;io.r2dbc&lt;/groupId&gt;\n            &lt;artifactId&gt;r2dbc-postgresql&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\n            &lt;artifactId&gt;lombok&lt;/artifactId&gt;\n            &lt;scope&gt;provided&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.mapstruct&lt;/groupId&gt;\n            &lt;artifactId&gt;mapstruct&lt;/artifactId&gt;\n            &lt;version&gt;${mapstruct.version}&lt;/version&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n    &lt;build&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;artifactId&gt;maven-war-plugin&lt;/artifactId&gt;\n                &lt;version&gt;2.4&lt;/version&gt;\n                &lt;configuration&gt;\n                    &lt;failOnMissingWebXml&gt;false&lt;/failOnMissingWebXml&gt;\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n                &lt;configuration&gt;\n                    &lt;excludes&gt;\n                        &lt;exclude&gt;\n                            &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\n                            &lt;artifactId&gt;lombok&lt;/artifactId&gt;\n                        &lt;/exclude&gt;\n                    &lt;/excludes&gt;\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n                &lt;version&gt;3.5.1&lt;/version&gt;\n                &lt;configuration&gt;\n                    &lt;source&gt;1.8&lt;/source&gt;\n                    &lt;target&gt;1.8&lt;/target&gt;\n                    &lt;annotationProcessorPaths&gt;\n                        &lt;path&gt;\n                            &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\n                            &lt;artifactId&gt;lombok&lt;/artifactId&gt;\n                            &lt;version&gt;${lombok.version}&lt;/version&gt;\n                        &lt;/path&gt;\n                        &lt;path&gt;\n                            &lt;groupId&gt;org.mapstruct&lt;/groupId&gt;\n                            &lt;artifactId&gt;mapstruct-processor&lt;/artifactId&gt;\n                            &lt;version&gt;${mapstruct.version}&lt;/version&gt;\n                        &lt;/path&gt;\n                    &lt;/annotationProcessorPaths&gt;\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n    &lt;repositories&gt;\n        &lt;repository&gt;\n            &lt;id&gt;spring-milestones&lt;/id&gt;\n            &lt;name&gt;Spring Milestones&lt;/name&gt;\n            &lt;url&gt;https://repo.spring.io/milestone&lt;/url&gt;\n            &lt;snapshots&gt;\n                &lt;enabled&gt;false&lt;/enabled&gt;\n            &lt;/snapshots&gt;\n        &lt;/repository&gt;\n        &lt;repository&gt;\n            &lt;id&gt;spring-snapshots&lt;/id&gt;\n            &lt;name&gt;Spring Snapshots&lt;/name&gt;\n            &lt;url&gt;https://repo.spring.io/snapshot&lt;/url&gt;\n            &lt;releases&gt;\n                &lt;enabled&gt;false&lt;/enabled&gt;\n            &lt;/releases&gt;\n        &lt;/repository&gt;\n    &lt;/repositories&gt;\n    &lt;pluginRepositories&gt;\n        &lt;pluginRepository&gt;\n            &lt;id&gt;spring-milestones&lt;/id&gt;\n            &lt;name&gt;Spring Milestones&lt;/name&gt;\n            &lt;url&gt;https://repo.spring.io/milestone&lt;/url&gt;\n            &lt;snapshots&gt;\n                &lt;enabled&gt;false&lt;/enabled&gt;\n            &lt;/snapshots&gt;\n        &lt;/pluginRepository&gt;\n        &lt;pluginRepository&gt;\n            &lt;id&gt;spring-snapshots&lt;/id&gt;\n            &lt;name&gt;Spring Snapshots&lt;/name&gt;\n            &lt;url&gt;https://repo.spring.io/snapshot&lt;/url&gt;\n            &lt;releases&gt;\n                &lt;enabled&gt;false&lt;/enabled&gt;\n            &lt;/releases&gt;\n        &lt;/pluginRepository&gt;\n    &lt;/pluginRepositories&gt;\n&lt;/project&gt;\n</code></pre>\n<p>Spring boot entry point</p>\n<pre><code>@SpringBootApplication(exclude = {ReactiveSecurityAutoConfiguration.class})\n@Configuration\n@EnableR2dbcRepositories\npublic class ReactiveApplication {\n\n    public static void main(String[] args) {\n        SpringApplication.run(ReactiveApplication.class, args);\n    }\n    \n}\n</code></pre>\n<p>application.yml</p>\n<pre><code>server:\n  port : 8083\nspring:\n  data:\n    r2dbc:\n      repositories:\n        enabled: true\n  r2dbc:\n    url: r2dbc:postgresql://localhost:5432/reactive\n    username: postgres\n    password: 12345\n    properties:\n      schema: bookshop\n\nlogging:\n  level:\n    org:\n      springframework:\n        r2dbc: DEBUG\n</code></pre>\n<p>Controller</p>\n<pre><code>package com.example.reactive.controller;\n\nimport com.example.reactive.entity.Book;\nimport org.springframework.http.HttpStatus;\nimport org.springframework.http.MediaType;\nimport org.springframework.web.bind.annotation.*;\nimport reactor.core.publisher.Flux;\nimport reactor.core.publisher.Mono;\n\n@RequestMapping(&quot;/book&quot;)\npublic interface BookController {\n\n    @ResponseStatus(code = HttpStatus.OK)\n    @PostMapping(consumes = MediaType.APPLICATION_JSON_VALUE)\n    Mono&lt;Book&gt; saveBook(@RequestBody Book book);\n\n    @ResponseStatus(code = HttpStatus.OK)\n    @GetMapping(&quot;/{id}&quot;)\n    Mono&lt;Book&gt; getBookById(@PathVariable Long id);\n\n    @ResponseStatus(code = HttpStatus.OK)\n    @GetMapping(&quot;/all&quot;)\n    Flux&lt;Book&gt; getAllBooks();\n}\n</code></pre>\n<p>ControllerImpl</p>\n<pre><code>package com.example.reactive.controller.impl;\n\nimport com.example.reactive.controller.BookController;\nimport com.example.reactive.entity.Book;\nimport com.example.reactive.repository.BookRepository;\nimport lombok.RequiredArgsConstructor;\nimport org.springframework.web.bind.annotation.RestController;\nimport reactor.core.publisher.Flux;\nimport reactor.core.publisher.Mono;\n\n@RestController\n@RequiredArgsConstructor\npublic class BookControllerImpl implements BookController {\n\n    private final BookRepository bookRepository;\n\n    @Override\n    public Mono&lt;Book&gt; saveBook(Book book) {\n        return bookRepository.save(book);\n    }\n\n    @Override\n    public Mono&lt;Book&gt; getBookById(Long id) {\n        return bookRepository.findById(id);\n    }\n\n    @Override\n    public Flux&lt;Book&gt; getAllBooks() {\n        return bookRepository.findAll();\n    }\n}\n</code></pre>\n<p>Entity</p>\n<pre><code>package com.example.reactive.entity;\n\nimport lombok.AllArgsConstructor;\nimport lombok.Builder;\nimport lombok.Data;\nimport lombok.NoArgsConstructor;\nimport org.springframework.data.annotation.Id;\n@Data\n@NoArgsConstructor\n@AllArgsConstructor\n@Builder\npublic class Book {\n    @Id\n    private Long id;\n    private String name;\n    private String author;\n    private String text;\n}\n</code></pre>\n<p>Repository</p>\n<pre><code>package com.example.reactive.repository;\n\nimport com.example.reactive.entity.Book;\nimport org.springframework.data.repository.reactive.ReactiveCrudRepository;\n\n\npublic interface BookRepository extends ReactiveCrudRepository&lt;Book, Long&gt; {\n}\n</code></pre>\n<p>If you need more information, feel free to write comments.</p>\n<p>EDITED</p>\n<p>After adding thread-pool parameters of min value 50 and max value 100, reactive app become faster.\nI don't use get All property to compare apps.\nFor testing I have been using J-METER.200 threads 200 times</p>\n<p>get 1 different string</p>\n<p>Latency of response nonreactive app - middle 6 ms.\nLatency of response reactive app - middle 10 ms.</p>\n<p>post 1 string\nLatency of response nonreactive app - middle 37 ms.\nLatency of response reactive app - middle 6 ms!!!!!!!!</p>\n<p>Computer parameters\nProcessor  Intel® Core™ i 5-10400 CPU @ 2.90 GHz × 12.\nRAM        16,0 GB.</p>\n"},{"tags":["java","spring","mongodb","spring-boot","mongock"],"comments":[{"owner":{"account_id":22560169,"reputation":11,"user_id":16747918,"display_name":"Шатов Данил"},"score":0,"creation_date":1667321864,"post_id":74279263,"comment_id":131138363,"body_markdown":"i use mongock-spring-v5,mongodb-springdata-v3-driver.\nversion 4.3.8","body":"i use mongock-spring-v5,mongodb-springdata-v3-driver. version 4.3.8"},{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1667396312,"post_id":74279263,"comment_id":131156824,"body_markdown":"Please clarify your specific problem or provide additional details to highlight exactly what you need. As it&#39;s currently written, it&#39;s hard to tell exactly what you&#39;re asking.","body":"Please clarify your specific problem or provide additional details to highlight exactly what you need. As it&#39;s currently written, it&#39;s hard to tell exactly what you&#39;re asking."}],"owner":{"account_id":22560169,"reputation":11,"user_id":16747918,"display_name":"Шатов Данил"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":117,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1667321682,"creation_date":1667321682,"question_id":74279263,"body_markdown":"how to autowired MongockTemplate in SpringBootTest?\r\nMongockTemplate does not autowired in @SpringBootTest\r\nI try:\r\n\r\nfull exception:\r\norg.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name &#39;ru.fabit.visor.config.dbmigrations.MongoDBChangelog003PerfIndexesTest&#39;: Unsatisfied dependency expressed through field &#39;mongoTemplate&#39;; nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: No qualifying bean of type &#39;com.github.cloudyrock.mongock.driver.mongodb.springdata.v3.decorator.impl.MongockTemplate&#39; available: expected at least 1 bean which qualifies as autowire candidate. Dependency annotations: {@org.springframework.beans.factory.annotation.Autowired(required=true)}\r\n\r\nwhat i will need to do?","title":"MongockTemplate bean in integration test","body":"<p>how to autowired MongockTemplate in SpringBootTest?\nMongockTemplate does not autowired in @SpringBootTest\nI try:</p>\n<p>full exception:\norg.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'ru.fabit.visor.config.dbmigrations.MongoDBChangelog003PerfIndexesTest': Unsatisfied dependency expressed through field 'mongoTemplate'; nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: No qualifying bean of type 'com.github.cloudyrock.mongock.driver.mongodb.springdata.v3.decorator.impl.MongockTemplate' available: expected at least 1 bean which qualifies as autowire candidate. Dependency annotations: {@org.springframework.beans.factory.annotation.Autowired(required=true)}</p>\n<p>what i will need to do?</p>\n"},{"tags":["java","string","for-loop"],"comments":[{"owner":{"account_id":23667337,"reputation":1467,"user_id":17694626,"display_name":"Cheng Thao"},"score":0,"creation_date":1667317808,"post_id":74278022,"comment_id":131136908,"body_markdown":"You  need to break the loop when you see a vowel.","body":"You  need to break the loop when you see a vowel."},{"owner":{"account_id":26796583,"reputation":21,"user_id":20389234,"display_name":"Bibz"},"score":0,"creation_date":1667318425,"post_id":74278022,"comment_id":131137134,"body_markdown":"Where would you put the break though. I tried putting it inside the if statement but its telling me im out of bounds","body":"Where would you put the break though. I tried putting it inside the if statement but its telling me im out of bounds"},{"owner":{"account_id":23667337,"reputation":1467,"user_id":17694626,"display_name":"Cheng Thao"},"score":0,"creation_date":1667318550,"post_id":74278022,"comment_id":131137174,"body_markdown":"right after vowel1=true and vowel2=true.","body":"right after vowel1=true and vowel2=true."},{"owner":{"account_id":26796583,"reputation":21,"user_id":20389234,"display_name":"Bibz"},"score":0,"creation_date":1667320240,"post_id":74278022,"comment_id":131137793,"body_markdown":"I updated what i modified in my code but its still telling me this:Exception in thread &quot;main&quot; java.lang.StringIndexOutOfBoundsException: Range [111, 111) out of bounds for length 22","body":"I updated what i modified in my code but its still telling me this:Exception in thread &quot;main&quot; java.lang.StringIndexOutOfBoundsException: Range [111, 111) out of bounds for length 22"},{"owner":{"account_id":26796583,"reputation":21,"user_id":20389234,"display_name":"Bibz"},"score":0,"creation_date":1667320388,"post_id":74278022,"comment_id":131137855,"body_markdown":"i dont understand how i can be out of bounds when i specified that &#39;i&#39; is smaller then the length","body":"i dont understand how i can be out of bounds when i specified that &#39;i&#39; is smaller then the length"},{"owner":{"account_id":23667337,"reputation":1467,"user_id":17694626,"display_name":"Cheng Thao"},"score":0,"creation_date":1667320486,"post_id":74278022,"comment_id":131137902,"body_markdown":"you pos1 and ps2 should just be i and j.","body":"you pos1 and ps2 should just be i and j."},{"owner":{"account_id":23667337,"reputation":1467,"user_id":17694626,"display_name":"Cheng Thao"},"score":0,"creation_date":1667320549,"post_id":74278022,"comment_id":131137918,"body_markdown":"pos1 = s.charAt(i) would gives you the ascii code of the character at i. this is not what you want.  you just want i.","body":"pos1 = s.charAt(i) would gives you the ascii code of the character at i. this is not what you want.  you just want i."},{"owner":{"account_id":26796583,"reputation":21,"user_id":20389234,"display_name":"Bibz"},"score":0,"creation_date":1667321028,"post_id":74278022,"comment_id":131138068,"body_markdown":"it finally worked thank you so much","body":"it finally worked thank you so much"},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1667321205,"post_id":74278022,"comment_id":131138137,"body_markdown":"Your code would be a lot cleaner with a dedicated `isVowel(char c)` method, the body of which could be something like `return &quot;AEIOUY&quot;.indexOf(Character.toUpperCase(c)) &gt; -1;`","body":"Your code would be a lot cleaner with a dedicated <code>isVowel(char c)</code> method, the body of which could be something like <code>return &quot;AEIOUY&quot;.indexOf(Character.toUpperCase(c)) &gt; -1;</code>"}],"answers":[{"tags":[],"owner":{"account_id":22540249,"reputation":911,"user_id":16730900,"display_name":"jh316"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1667315966,"creation_date":1667315966,"answer_id":74278095,"question_id":74278022,"body_markdown":"After the first for loop, i will be str.length() no matter what. You may want to create another variable to hold I when it&#39;s found to remedy this.","title":"Vowel substring","body":"<p>After the first for loop, i will be str.length() no matter what. You may want to create another variable to hold I when it's found to remedy this.</p>\n"},{"tags":[],"owner":{"account_id":93689,"reputation":415931,"user_id":256196,"accept_rate":77,"display_name":"Bohemian"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1667321283,"creation_date":1667320712,"answer_id":74279051,"question_id":74278022,"body_markdown":"One way of looking at it is you have a lot of code to do a simple thing, which means more chances for bugs and errors.\r\n\r\nHere&#39;s a &quot;less code&quot; solution:\r\n\r\n    str = str.replaceAll(&quot;(?i)^[^aeiou]*|[^aeiou]*$&quot;, &quot;&quot;);\r\n\r\nSee [live demo][1].\r\n\r\nThis works by matching all leading and trailing non-vowels (if any) and replacing them with nothing, effectively deleting them.  \r\n`(?i)` makes the match case insensitive.\r\n\r\n\r\n  [1]: https://ideone.com/qKQgve","title":"Vowel substring","body":"<p>One way of looking at it is you have a lot of code to do a simple thing, which means more chances for bugs and errors.</p>\n<p>Here's a &quot;less code&quot; solution:</p>\n<pre><code>str = str.replaceAll(&quot;(?i)^[^aeiou]*|[^aeiou]*$&quot;, &quot;&quot;);\n</code></pre>\n<p>See <a href=\"https://ideone.com/qKQgve\" rel=\"nofollow noreferrer\">live demo</a>.</p>\n<p>This works by matching all leading and trailing non-vowels (if any) and replacing them with nothing, effectively deleting them.<br />\n<code>(?i)</code> makes the match case insensitive.</p>\n"}],"owner":{"account_id":26796583,"reputation":21,"user_id":20389234,"display_name":"Bibz"},"comment_count":9,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":853,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1667321283,"creation_date":1667315551,"question_id":74278022,"body_markdown":"I have to write a program that takes a String as user input and then prints a substring that starts with the first vowel of the String and ends with the last. So for instance if my String is : &quot;Hi I have a dog named Patch&quot;, the printed substring would be : &quot;i I have a dog named Pa&quot;\r\n\r\nThis is the code I have now: \r\n\r\n```\r\nimport java.util.Scanner;\r\nimport java.util.*;\r\npublic class SousChaineVoyelle {\r\n\tprivate static Scanner sc;\r\n\tpublic static void main (String[] args) {\r\n\t    \r\n\t\tsc = new Scanner(System.in);\r\n\t\t\r\n\t\tSystem.out.print(&quot;Enter a String: &quot;);\r\n\t\tString str = sc.nextLine();\r\n\t\t\r\n\t\tint pos1 = 0;\r\n\t\tint pos2 = 0;\r\n\t\tint i;\r\n\t\tint j;\r\n\t\t\r\n\t\tboolean isVowel1 = false;\r\n\t\t\r\n\t\tboolean isVowel2 = false;\r\n\t\t\r\n\t\t\r\n\t\tfor (i = 0; i &lt; str.length(); i++){\r\n\t\t\tif (str.charAt(i) == &#39;A&#39; || str.charAt(i) == &#39;a&#39; || \r\n\t\t\tchaine.charAt(i) == &#39;E&#39; || str.charAt(i) == &#39;e&#39; || \r\n\t\t\tstr.charAt(i) == &#39;I&#39; || str.charAt(i) == &#39;i&#39; || \r\n\t\t\tstr.charAt(i) == &#39;O&#39; || str.charAt(i) == &#39;o&#39; || \r\n\t\t\tstr.charAt(i) == &#39;U&#39; || str.charAt(i) == &#39;u&#39; || \r\n\t\t\tstr.charAt(i) == &#39;Y&#39; || str.charAt(i) == &#39;y&#39;){\r\n\t\t\tisVowel1 = true;\r\n            break;\r\n\t\t\t}\t\t\t\r\n\t\t}\r\n\t\tif (isVowel1){\r\n\t\t\tpos1 = str.charAt(i);\r\n\t\t}\r\n\t\t\r\n\t\tfor (j = str.length() - 1; j &gt; i; j--){\r\n\t\t\tif (str.charAt(j) == &#39;A&#39; || str.charAt(j) == &#39;a&#39; || \r\n\t\t\tstr.charAt(j) == &#39;E&#39; || str.charAt(j) == &#39;e&#39; || \r\n\t\t\tstr.charAt(j) == &#39;I&#39; || str.charAt(j) == &#39;i&#39; || \r\n\t\t\tstr.charAt(j) == &#39;O&#39; || str.charAt(j) == &#39;o&#39; || \r\n\t\t\tstr.charAt(j) == &#39;U&#39; || str.charAt(j) == &#39;u&#39; || \r\n\t\t\tstr.charAt(j) == &#39;Y&#39; || str.charAt(j) == &#39;y&#39;){\r\n\t\t\tisVowel2 = true;\r\n            break;\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (isVowel2){\r\n\t\t\t\tpos2 = str.charAt(j);\r\n\t\t}\r\n\t\t\r\n\t\t\r\n\t\t\t\t\r\n\t\tString sub = chaine.substring(pos1, pos2);\r\n\t\t\r\n\t\tSystem.out.print(The substring from the first vowel to the last is  &quot;\\&quot;&quot; + sub +&quot;\\&quot;&quot;);\r\n\t}\r\n}\r\n\r\nthis got me this: \r\n\r\n\r\n```\r\nException in thread &quot;main&quot; java.lang.StringIndexOutOfBoundsException: Index 22 out of bounds for length 22\r\n        at java.base/jdk.internal.util.Preconditions$1.apply(Preconditions.java:55)\r\n        at java.base/jdk.internal.util.Preconditions$1.apply(Preconditions.java:52)\r\n        at java.base/jdk.internal.util.Preconditions$4.apply(Preconditions.java:213)\r\n        at java.base/jdk.internal.util.Preconditions$4.apply(Preconditions.java:210)\r\n        at java.base/jdk.internal.util.Preconditions.outOfBounds(Preconditions.java:98)\r\n        at java.base/jdk.internal.util.Preconditions.outOfBoundsCheckIndex(Preconditions.java:106)\r\n        at java.base/jdk.internal.util.Preconditions.checkIndex(Preconditions.java:302)\r\n        at java.base/java.lang.String.checkIndex(String.java:4557)\r\n        at java.base/java.lang.StringLatin1.charAt(StringLatin1.java:46)\r\n        at java.base/java.lang.String.charAt(String.java:1515)\r\n        at SousChaineVoyelle.main(SousChaineVoyelle.java:33)\r\n```\r\n","title":"Vowel substring","body":"<p>I have to write a program that takes a String as user input and then prints a substring that starts with the first vowel of the String and ends with the last. So for instance if my String is : &quot;Hi I have a dog named Patch&quot;, the printed substring would be : &quot;i I have a dog named Pa&quot;</p>\n<p>This is the code I have now:</p>\n<pre><code>import java.util.Scanner;\nimport java.util.*;\npublic class SousChaineVoyelle {\n    private static Scanner sc;\n    public static void main (String[] args) {\n        \n        sc = new Scanner(System.in);\n        \n        System.out.print(&quot;Enter a String: &quot;);\n        String str = sc.nextLine();\n        \n        int pos1 = 0;\n        int pos2 = 0;\n        int i;\n        int j;\n        \n        boolean isVowel1 = false;\n        \n        boolean isVowel2 = false;\n        \n        \n        for (i = 0; i &lt; str.length(); i++){\n            if (str.charAt(i) == 'A' || str.charAt(i) == 'a' || \n            chaine.charAt(i) == 'E' || str.charAt(i) == 'e' || \n            str.charAt(i) == 'I' || str.charAt(i) == 'i' || \n            str.charAt(i) == 'O' || str.charAt(i) == 'o' || \n            str.charAt(i) == 'U' || str.charAt(i) == 'u' || \n            str.charAt(i) == 'Y' || str.charAt(i) == 'y'){\n            isVowel1 = true;\n            break;\n            }           \n        }\n        if (isVowel1){\n            pos1 = str.charAt(i);\n        }\n        \n        for (j = str.length() - 1; j &gt; i; j--){\n            if (str.charAt(j) == 'A' || str.charAt(j) == 'a' || \n            str.charAt(j) == 'E' || str.charAt(j) == 'e' || \n            str.charAt(j) == 'I' || str.charAt(j) == 'i' || \n            str.charAt(j) == 'O' || str.charAt(j) == 'o' || \n            str.charAt(j) == 'U' || str.charAt(j) == 'u' || \n            str.charAt(j) == 'Y' || str.charAt(j) == 'y'){\n            isVowel2 = true;\n            break;\n            }\n        }\n        if (isVowel2){\n                pos2 = str.charAt(j);\n        }\n        \n        \n                \n        String sub = chaine.substring(pos1, pos2);\n        \n        System.out.print(The substring from the first vowel to the last is  &quot;\\&quot;&quot; + sub +&quot;\\&quot;&quot;);\n    }\n}\n\nthis got me this: \n\n\n</code></pre>\n<p>Exception in thread &quot;main&quot; java.lang.StringIndexOutOfBoundsException: Index 22 out of bounds for length 22\nat java.base/jdk.internal.util.Preconditions$1.apply(Preconditions.java:55)\nat java.base/jdk.internal.util.Preconditions$1.apply(Preconditions.java:52)\nat java.base/jdk.internal.util.Preconditions$4.apply(Preconditions.java:213)\nat java.base/jdk.internal.util.Preconditions$4.apply(Preconditions.java:210)\nat java.base/jdk.internal.util.Preconditions.outOfBounds(Preconditions.java:98)\nat java.base/jdk.internal.util.Preconditions.outOfBoundsCheckIndex(Preconditions.java:106)\nat java.base/jdk.internal.util.Preconditions.checkIndex(Preconditions.java:302)\nat java.base/java.lang.String.checkIndex(String.java:4557)\nat java.base/java.lang.StringLatin1.charAt(StringLatin1.java:46)\nat java.base/java.lang.String.charAt(String.java:1515)\nat SousChaineVoyelle.main(SousChaineVoyelle.java:33)</p>\n<pre><code></code></pre>\n"},{"tags":["java","maven","intellij-idea"],"comments":[{"owner":{"account_id":36734,"reputation":392127,"user_id":104891,"display_name":"CrazyCoder"},"score":1,"creation_date":1667320734,"post_id":74279001,"comment_id":131137983,"body_markdown":"Make sure Run is not delegated to Maven: https://i.imgur.com/HpeUaUE.png. Use Application configuration to start your app per https://www.jetbrains.com/help/idea/running-applications.html.","body":"Make sure Run is not delegated to Maven: <a href=\"https://i.imgur.com/HpeUaUE.png\" rel=\"nofollow noreferrer\">i.imgur.com/HpeUaUE.png</a>. Use Application configuration to start your app per <a href=\"https://www.jetbrains.com/help/idea/running-applications.html\" rel=\"nofollow noreferrer\">jetbrains.com/help/idea/running-applications.html</a>."}],"answers":[{"tags":[],"owner":{"account_id":36734,"reputation":392127,"user_id":104891,"display_name":"CrazyCoder"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1667321117,"creation_date":1667321117,"answer_id":74279149,"question_id":74279001,"body_markdown":"Make sure Run is [not delegated to Maven](https://i.stack.imgur.com/emNsQ.png). \r\n\r\nUse [Application configuration to start your app](https://www.jetbrains.com/help/idea/running-applications.html).","title":"How to prevent console output mixed with maven output?","body":"<p>Make sure Run is <a href=\"https://i.stack.imgur.com/emNsQ.png\" rel=\"nofollow noreferrer\">not delegated to Maven</a>.</p>\n<p>Use <a href=\"https://www.jetbrains.com/help/idea/running-applications.html\" rel=\"nofollow noreferrer\">Application configuration to start your app</a>.</p>\n"}],"owner":{"account_id":12014098,"reputation":836,"user_id":8789802,"display_name":"CodingStudent"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":94,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":74279149,"answer_count":1,"score":0,"last_activity_date":1667321117,"creation_date":1667320455,"question_id":74279001,"body_markdown":"I don&#39;t know how to properly describe this problem. My output &quot;Hello World&quot; is mixed up with the maven build output. I marked it with **. Pls, look at codeblock. I am having a maven project with Java 19. My IDE is IntelliJ Ultimate 2022.3. And here are pictures of my settings. How can I make Intellij only do the output of the program? \r\n\r\n        &quot;C:\\Program Files\\Java\\jdk-19\\bin\\java.exe&quot; &quot;-Dmaven.multiModuleProjectDirectory=E:\\HDA\\Distributed Systems\\vs-projekt&quot; &quot;-Dmaven.home=C:\\Program Files\\JetBrains\\IntelliJ IDEA 2022.2.3\\plugins\\maven\\lib\\maven3&quot; &quot;-Dclassworlds.conf=C:\\Program Files\\JetBrains\\IntelliJ IDEA 2022.2.3\\plugins\\maven\\lib\\maven3\\bin\\m2.conf&quot; &quot;-Dmaven.ext.class.path=C:\\Program Files\\JetBrains\\IntelliJ IDEA 2022.2.3\\plugins\\maven\\lib\\maven-event-listener.jar&quot; &quot;-javaagent:C:\\Program Files\\JetBrains\\IntelliJ IDEA 2022.2.3\\lib\\idea_rt.jar=60937:C:\\Program Files\\JetBrains\\IntelliJ IDEA 2022.2.3\\bin&quot; -Dfile.encoding=UTF-8 -Dsun.stdout.encoding=UTF-8 -Dsun.stderr.encoding=UTF-8 -classpath &quot;C:\\Program Files\\JetBrains\\IntelliJ IDEA 2022.2.3\\plugins\\maven\\lib\\maven3\\boot\\plexus-classworlds-2.6.0.jar;C:\\Program Files\\JetBrains\\IntelliJ IDEA 2022.2.3\\plugins\\maven\\lib\\maven3\\boot\\plexus-classworlds.license&quot; org.codehaus.classworlds.Launcher -Didea.version=2022.2.3 &quot;-Dexec.workingdir=E:/HDA/Distributed Systems/vs-projekt&quot; &quot;-Dexec.args=-classpath %classpath Main&quot; &quot;-Dexec.executable=C:\\Program Files\\Java\\jdk-19\\bin\\java.exe&quot; exec:exec\r\n    [INFO] Scanning for projects...\r\n    [INFO] \r\n    [INFO] -----------------------&lt; org.hda:Mo5x-Burchard &gt;------------------------\r\n    [INFO] Building Mo5x-Burchard 1.0-SNAPSHOT\r\n    [INFO] --------------------------------[ jar ]---------------------------------\r\n    [INFO] \r\n    [INFO] --- exec-maven-plugin:3.1.0:exec (default-cli) @ Mo5x-Burchard ---\r\n    **Hello World**\r\n    [INFO] ------------------------------------------------------------------------\r\n    [INFO] BUILD SUCCESS\r\n    [INFO] ------------------------------------------------------------------------\r\n    [INFO] Total time:  0.514 s\r\n    [INFO] Finished at: 2022-11-01T16:50:37+01:00\r\n    [INFO] ------------------------------------------------------------------------\r\n    \r\n    Process finished with exit code 0\r\n\r\nDoes it maybe has something to do with my `pom.xml`?\r\n\r\n     &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n        &lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;\r\n                 xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n                 xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n            &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n        \r\n            &lt;groupId&gt;org.hda&lt;/groupId&gt;\r\n            &lt;artifactId&gt;Mo5x-Burchard&lt;/artifactId&gt;\r\n            &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\r\n        \r\n            &lt;properties&gt;\r\n                &lt;maven.compiler.source&gt;15&lt;/maven.compiler.source&gt;\r\n                &lt;maven.compiler.target&gt;15&lt;/maven.compiler.target&gt;\r\n            &lt;/properties&gt;\r\n        \r\n            &lt;build&gt;\r\n                &lt;defaultGoal&gt;compile&lt;/defaultGoal&gt;\r\n                &lt;pluginManagement&gt;&lt;!-- lock down plugins versions to avoid using Maven defaults (may be moved to parent pom) --&gt;\r\n                    &lt;plugins&gt;\r\n                        &lt;!-- clean lifecycle, see https://maven.apache.org/ref/current/maven-core/lifecycles.html#clean_Lifecycle --&gt;\r\n                        &lt;plugin&gt;\r\n                            &lt;artifactId&gt;maven-clean-plugin&lt;/artifactId&gt;\r\n                            &lt;version&gt;3.1.0&lt;/version&gt;\r\n                        &lt;/plugin&gt;\r\n                        &lt;!-- default lifecycle, jar packaging: see https://maven.apache.org/ref/current/maven-core/default-bindings.html#Plugin_bindings_for_jar_packaging --&gt;\r\n                        &lt;plugin&gt;\r\n                            &lt;artifactId&gt;maven-resources-plugin&lt;/artifactId&gt;\r\n                            &lt;version&gt;3.0.2&lt;/version&gt;\r\n                        &lt;/plugin&gt;\r\n                        &lt;plugin&gt;\r\n                            &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\r\n                            &lt;version&gt;3.8.0&lt;/version&gt;\r\n                        &lt;/plugin&gt;\r\n                        &lt;plugin&gt;\r\n                            &lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;\r\n                            &lt;version&gt;2.22.1&lt;/version&gt;\r\n                        &lt;/plugin&gt;\r\n                        &lt;plugin&gt;\r\n                            &lt;artifactId&gt;maven-jar-plugin&lt;/artifactId&gt;\r\n                            &lt;version&gt;3.0.2&lt;/version&gt;\r\n                        &lt;/plugin&gt;\r\n                        &lt;plugin&gt;\r\n                            &lt;artifactId&gt;maven-install-plugin&lt;/artifactId&gt;\r\n                            &lt;version&gt;2.5.2&lt;/version&gt;\r\n                        &lt;/plugin&gt;\r\n                        &lt;plugin&gt;\r\n                            &lt;artifactId&gt;maven-deploy-plugin&lt;/artifactId&gt;\r\n                            &lt;version&gt;2.8.2&lt;/version&gt;\r\n                        &lt;/plugin&gt;\r\n                        &lt;!-- site lifecycle, see https://maven.apache.org/ref/current/maven-core/lifecycles.html#site_Lifecycle --&gt;\r\n                        &lt;plugin&gt;\r\n                            &lt;artifactId&gt;maven-site-plugin&lt;/artifactId&gt;\r\n                            &lt;version&gt;3.7.1&lt;/version&gt;\r\n                        &lt;/plugin&gt;\r\n                        &lt;plugin&gt;\r\n                            &lt;artifactId&gt;maven-project-info-reports-plugin&lt;/artifactId&gt;\r\n                            &lt;version&gt;3.0.0&lt;/version&gt;\r\n                        &lt;/plugin&gt;\r\n                    &lt;/plugins&gt;\r\n                &lt;/pluginManagement&gt;\r\n            &lt;/build&gt;\r\n        \r\n        &lt;/project&gt;\r\n\r\n   \r\n[![Maven Build Setting][1]][1]\r\n[![Project Run Config][2]][2]\r\n[![Java Compiler Setting][3]][3]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/M8SoO.png\r\n  [2]: https://i.stack.imgur.com/YVHa0.png\r\n  [3]: https://i.stack.imgur.com/4ATrK.png\r\n","title":"How to prevent console output mixed with maven output?","body":"<p>I don't know how to properly describe this problem. My output &quot;Hello World&quot; is mixed up with the maven build output. I marked it with **. Pls, look at codeblock. I am having a maven project with Java 19. My IDE is IntelliJ Ultimate 2022.3. And here are pictures of my settings. How can I make Intellij only do the output of the program?</p>\n<pre><code>    &quot;C:\\Program Files\\Java\\jdk-19\\bin\\java.exe&quot; &quot;-Dmaven.multiModuleProjectDirectory=E:\\HDA\\Distributed Systems\\vs-projekt&quot; &quot;-Dmaven.home=C:\\Program Files\\JetBrains\\IntelliJ IDEA 2022.2.3\\plugins\\maven\\lib\\maven3&quot; &quot;-Dclassworlds.conf=C:\\Program Files\\JetBrains\\IntelliJ IDEA 2022.2.3\\plugins\\maven\\lib\\maven3\\bin\\m2.conf&quot; &quot;-Dmaven.ext.class.path=C:\\Program Files\\JetBrains\\IntelliJ IDEA 2022.2.3\\plugins\\maven\\lib\\maven-event-listener.jar&quot; &quot;-javaagent:C:\\Program Files\\JetBrains\\IntelliJ IDEA 2022.2.3\\lib\\idea_rt.jar=60937:C:\\Program Files\\JetBrains\\IntelliJ IDEA 2022.2.3\\bin&quot; -Dfile.encoding=UTF-8 -Dsun.stdout.encoding=UTF-8 -Dsun.stderr.encoding=UTF-8 -classpath &quot;C:\\Program Files\\JetBrains\\IntelliJ IDEA 2022.2.3\\plugins\\maven\\lib\\maven3\\boot\\plexus-classworlds-2.6.0.jar;C:\\Program Files\\JetBrains\\IntelliJ IDEA 2022.2.3\\plugins\\maven\\lib\\maven3\\boot\\plexus-classworlds.license&quot; org.codehaus.classworlds.Launcher -Didea.version=2022.2.3 &quot;-Dexec.workingdir=E:/HDA/Distributed Systems/vs-projekt&quot; &quot;-Dexec.args=-classpath %classpath Main&quot; &quot;-Dexec.executable=C:\\Program Files\\Java\\jdk-19\\bin\\java.exe&quot; exec:exec\n[INFO] Scanning for projects...\n[INFO] \n[INFO] -----------------------&lt; org.hda:Mo5x-Burchard &gt;------------------------\n[INFO] Building Mo5x-Burchard 1.0-SNAPSHOT\n[INFO] --------------------------------[ jar ]---------------------------------\n[INFO] \n[INFO] --- exec-maven-plugin:3.1.0:exec (default-cli) @ Mo5x-Burchard ---\n**Hello World**\n[INFO] ------------------------------------------------------------------------\n[INFO] BUILD SUCCESS\n[INFO] ------------------------------------------------------------------------\n[INFO] Total time:  0.514 s\n[INFO] Finished at: 2022-11-01T16:50:37+01:00\n[INFO] ------------------------------------------------------------------------\n\nProcess finished with exit code 0\n</code></pre>\n<p>Does it maybe has something to do with my <code>pom.xml</code>?</p>\n<pre><code> &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n    &lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;\n             xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n             xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n        &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n    \n        &lt;groupId&gt;org.hda&lt;/groupId&gt;\n        &lt;artifactId&gt;Mo5x-Burchard&lt;/artifactId&gt;\n        &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\n    \n        &lt;properties&gt;\n            &lt;maven.compiler.source&gt;15&lt;/maven.compiler.source&gt;\n            &lt;maven.compiler.target&gt;15&lt;/maven.compiler.target&gt;\n        &lt;/properties&gt;\n    \n        &lt;build&gt;\n            &lt;defaultGoal&gt;compile&lt;/defaultGoal&gt;\n            &lt;pluginManagement&gt;&lt;!-- lock down plugins versions to avoid using Maven defaults (may be moved to parent pom) --&gt;\n                &lt;plugins&gt;\n                    &lt;!-- clean lifecycle, see https://maven.apache.org/ref/current/maven-core/lifecycles.html#clean_Lifecycle --&gt;\n                    &lt;plugin&gt;\n                        &lt;artifactId&gt;maven-clean-plugin&lt;/artifactId&gt;\n                        &lt;version&gt;3.1.0&lt;/version&gt;\n                    &lt;/plugin&gt;\n                    &lt;!-- default lifecycle, jar packaging: see https://maven.apache.org/ref/current/maven-core/default-bindings.html#Plugin_bindings_for_jar_packaging --&gt;\n                    &lt;plugin&gt;\n                        &lt;artifactId&gt;maven-resources-plugin&lt;/artifactId&gt;\n                        &lt;version&gt;3.0.2&lt;/version&gt;\n                    &lt;/plugin&gt;\n                    &lt;plugin&gt;\n                        &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n                        &lt;version&gt;3.8.0&lt;/version&gt;\n                    &lt;/plugin&gt;\n                    &lt;plugin&gt;\n                        &lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;\n                        &lt;version&gt;2.22.1&lt;/version&gt;\n                    &lt;/plugin&gt;\n                    &lt;plugin&gt;\n                        &lt;artifactId&gt;maven-jar-plugin&lt;/artifactId&gt;\n                        &lt;version&gt;3.0.2&lt;/version&gt;\n                    &lt;/plugin&gt;\n                    &lt;plugin&gt;\n                        &lt;artifactId&gt;maven-install-plugin&lt;/artifactId&gt;\n                        &lt;version&gt;2.5.2&lt;/version&gt;\n                    &lt;/plugin&gt;\n                    &lt;plugin&gt;\n                        &lt;artifactId&gt;maven-deploy-plugin&lt;/artifactId&gt;\n                        &lt;version&gt;2.8.2&lt;/version&gt;\n                    &lt;/plugin&gt;\n                    &lt;!-- site lifecycle, see https://maven.apache.org/ref/current/maven-core/lifecycles.html#site_Lifecycle --&gt;\n                    &lt;plugin&gt;\n                        &lt;artifactId&gt;maven-site-plugin&lt;/artifactId&gt;\n                        &lt;version&gt;3.7.1&lt;/version&gt;\n                    &lt;/plugin&gt;\n                    &lt;plugin&gt;\n                        &lt;artifactId&gt;maven-project-info-reports-plugin&lt;/artifactId&gt;\n                        &lt;version&gt;3.0.0&lt;/version&gt;\n                    &lt;/plugin&gt;\n                &lt;/plugins&gt;\n            &lt;/pluginManagement&gt;\n        &lt;/build&gt;\n    \n    &lt;/project&gt;\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/M8SoO.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/M8SoO.png\" alt=\"Maven Build Setting\" /></a>\n<a href=\"https://i.stack.imgur.com/YVHa0.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/YVHa0.png\" alt=\"Project Run Config\" /></a>\n<a href=\"https://i.stack.imgur.com/4ATrK.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/4ATrK.png\" alt=\"Java Compiler Setting\" /></a></p>\n"},{"tags":["java","eclipse","scala","maven"],"comments":[{"owner":{"account_id":112317,"reputation":93939,"user_id":296328,"accept_rate":60,"display_name":"khmarbaise"},"score":1,"creation_date":1516304377,"post_id":48327960,"comment_id":83643821,"body_markdown":"First you should move you Scala into a different package than the `default`...","body":"First you should move you Scala into a different package than the <code>default</code>..."}],"answers":[{"tags":[],"owner":{"account_id":290886,"reputation":2324,"user_id":1825027,"accept_rate":100,"display_name":"Alex Savitsky"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1516300420,"creation_date":1516300420,"answer_id":48328099,"question_id":48327960,"body_markdown":"It seems from your code structure that your Scala classes depend on Java, not the other way around. Yet in your Maven config, Scala gets compiled first. Change it to compile after Java classes.\r\n\r\nThe following plugin sequence works in my project:\r\n\r\n\t&lt;build&gt;\r\n\t\t&lt;plugins&gt;\r\n\t\t\t&lt;plugin&gt;\r\n\t\t\t\t&lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\r\n\t\t\t\t&lt;configuration&gt;\r\n\t\t\t\t\t&lt;source&gt;1.8&lt;/source&gt;\r\n\t\t\t\t\t&lt;target&gt;1.8&lt;/target&gt;\r\n\t\t\t\t&lt;/configuration&gt;\r\n\t\t\t&lt;/plugin&gt;\r\n\t\t\t&lt;plugin&gt;\r\n\t\t\t\t&lt;groupId&gt;net.alchim31.maven&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;scala-maven-plugin&lt;/artifactId&gt;\r\n\t\t\t\t&lt;executions&gt;\r\n\t\t\t\t\t&lt;execution&gt;\r\n\t\t\t\t\t\t&lt;goals&gt;\r\n\t\t\t\t\t\t\t&lt;goal&gt;compile&lt;/goal&gt;\r\n\t\t\t\t\t\t&lt;/goals&gt;\r\n\t\t\t\t\t&lt;/execution&gt;\r\n\t\t\t\t&lt;/executions&gt;\r\n\t\t\t&lt;/plugin&gt;\r\n\t\t\t&lt;plugin&gt;\r\n\t\t\t\t&lt;artifactId&gt;maven-assembly-plugin&lt;/artifactId&gt;\r\n\t\t\t\t&lt;executions&gt;\r\n\t\t\t\t\t&lt;execution&gt;\r\n\t\t\t\t\t\t&lt;phase&gt;package&lt;/phase&gt;\r\n\t\t\t\t\t\t&lt;goals&gt;\r\n\t\t\t\t\t\t\t&lt;goal&gt;single&lt;/goal&gt;\r\n\t\t\t\t\t\t&lt;/goals&gt;\r\n\t\t\t\t\t&lt;/execution&gt;\r\n\t\t\t\t&lt;/executions&gt;\r\n\t\t\t&lt;/plugin&gt;\r\n\t\t&lt;/plugins&gt;\r\n\t&lt;/build&gt;\r\n","title":"maven project which has both java and scala","body":"<p>It seems from your code structure that your Scala classes depend on Java, not the other way around. Yet in your Maven config, Scala gets compiled first. Change it to compile after Java classes.</p>\n\n<p>The following plugin sequence works in my project:</p>\n\n<pre><code>&lt;build&gt;\n    &lt;plugins&gt;\n        &lt;plugin&gt;\n            &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n            &lt;configuration&gt;\n                &lt;source&gt;1.8&lt;/source&gt;\n                &lt;target&gt;1.8&lt;/target&gt;\n            &lt;/configuration&gt;\n        &lt;/plugin&gt;\n        &lt;plugin&gt;\n            &lt;groupId&gt;net.alchim31.maven&lt;/groupId&gt;\n            &lt;artifactId&gt;scala-maven-plugin&lt;/artifactId&gt;\n            &lt;executions&gt;\n                &lt;execution&gt;\n                    &lt;goals&gt;\n                        &lt;goal&gt;compile&lt;/goal&gt;\n                    &lt;/goals&gt;\n                &lt;/execution&gt;\n            &lt;/executions&gt;\n        &lt;/plugin&gt;\n        &lt;plugin&gt;\n            &lt;artifactId&gt;maven-assembly-plugin&lt;/artifactId&gt;\n            &lt;executions&gt;\n                &lt;execution&gt;\n                    &lt;phase&gt;package&lt;/phase&gt;\n                    &lt;goals&gt;\n                        &lt;goal&gt;single&lt;/goal&gt;\n                    &lt;/goals&gt;\n                &lt;/execution&gt;\n            &lt;/executions&gt;\n        &lt;/plugin&gt;\n    &lt;/plugins&gt;\n&lt;/build&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6960621,"reputation":623,"user_id":5340181,"display_name":"JMess"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1667320307,"creation_date":1667320307,"answer_id":74278969,"question_id":48327960,"body_markdown":"Its safest to go straight to the [page provided by the scala-maven-plugin docs][1] where you can find the current pom definition which supports dependencies in both directions\r\n\r\n\r\n  [1]: https://davidb.github.io/scala-maven-plugin/example_java.html","title":"maven project which has both java and scala","body":"<p>Its safest to go straight to the <a href=\"https://davidb.github.io/scala-maven-plugin/example_java.html\" rel=\"nofollow noreferrer\">page provided by the scala-maven-plugin docs</a> where you can find the current pom definition which supports dependencies in both directions</p>\n"}],"owner":{"account_id":3162598,"reputation":1052,"user_id":2673274,"accept_rate":84,"display_name":"Sameer Sarmah"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3283,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":2,"score":2,"last_activity_date":1667320307,"creation_date":1516299901,"question_id":48327960,"body_markdown":"I want to build a maven project which has both java and scala source code.\r\nI have installed scala IDE plugin in eclipse and added the **&quot;scala-maven-plugin&quot;**  in pom.xml but the imports of java classes in the scala files are giving compilation errors.\r\nWhich is the best IDE to build such mixed projects?\r\n\r\nThe project structure is \r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/sliqh.png\r\n\r\n\r\nThe pom.xml \r\n\r\n    &lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n      &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n      &lt;groupId&gt;org.apache.spark&lt;/groupId&gt;\r\n      &lt;artifactId&gt;spark-examples_2.11&lt;/artifactId&gt;\r\n      &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\r\n    \r\n    \r\n    &lt;dependencies&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.scala-lang&lt;/groupId&gt;\r\n            &lt;artifactId&gt;scala-library&lt;/artifactId&gt;\r\n            &lt;version&gt;2.11.7&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n    &lt;/dependencies&gt;\r\n    &lt;build&gt;\r\n    &lt;pluginManagement&gt;\r\n        &lt;plugins&gt;\r\n    &lt;!-- This plugin compiles Scala files --&gt;\r\n            &lt;plugin&gt;\r\n                &lt;groupId&gt;net.alchim31.maven&lt;/groupId&gt;\r\n                &lt;artifactId&gt;scala-maven-plugin&lt;/artifactId&gt;\r\n                &lt;executions&gt;\r\n                    &lt;execution&gt;\r\n                        &lt;id&gt;scala-compile-first&lt;/id&gt;\r\n                        &lt;phase&gt;process-resources&lt;/phase&gt;\r\n                        &lt;goals&gt;\r\n                            &lt;goal&gt;add-source&lt;/goal&gt;\r\n                            &lt;goal&gt;compile&lt;/goal&gt;\r\n                        &lt;/goals&gt;\r\n                    &lt;/execution&gt;\r\n                &lt;/executions&gt;\r\n            &lt;/plugin&gt;\r\n    &lt;!-- This plugin compiles Java files --&gt;\r\n            &lt;plugin&gt;\r\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n                &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\r\n                &lt;configuration&gt;\r\n                    &lt;source&gt;1.8&lt;/source&gt;\r\n                    &lt;target&gt;1.8&lt;/target&gt;\r\n                &lt;/configuration&gt;\r\n                &lt;executions&gt;\r\n                    &lt;execution&gt;\r\n                        &lt;phase&gt;compile&lt;/phase&gt;\r\n                        &lt;goals&gt;\r\n                            &lt;goal&gt;compile&lt;/goal&gt;\r\n                        &lt;/goals&gt;\r\n                    &lt;/execution&gt;\r\n                &lt;/executions&gt;\r\n            &lt;/plugin&gt;\r\n    &lt;!-- This plugin adds all dependencies to JAR file during &#39;package&#39; command.\r\n    Pay EXTRA attention to the &#39;mainClass&#39; tag. \r\n    You have to set name of class with entry point to program (&#39;main&#39; method) --&gt;\r\n            &lt;plugin&gt;\r\n                &lt;artifactId&gt;maven-assembly-plugin&lt;/artifactId&gt;\r\n                &lt;version&gt;2.5.3&lt;/version&gt;\r\n                &lt;configuration&gt;\r\n                    &lt;descriptorRefs&gt;\r\n                        &lt;descriptorRef&gt;jar-with-dependencies&lt;/descriptorRef&gt;\r\n                    &lt;/descriptorRefs&gt;\r\n                    &lt;archive&gt;\r\n                        &lt;manifest&gt;\r\n                            &lt;mainClass&gt;ScalaRunner&lt;/mainClass&gt;\r\n                        &lt;/manifest&gt;\r\n                    &lt;/archive&gt;\r\n                &lt;/configuration&gt;\r\n                &lt;executions&gt;\r\n                    &lt;execution&gt;\r\n                        &lt;phase&gt;package&lt;/phase&gt;\r\n                        &lt;goals&gt;\r\n                            &lt;goal&gt;single&lt;/goal&gt;\r\n                        &lt;/goals&gt;\r\n                    &lt;/execution&gt;\r\n                &lt;/executions&gt;\r\n            &lt;/plugin&gt;\r\n        &lt;/plugins&gt;\r\n      &lt;/pluginManagement&gt;  \r\n    &lt;/build&gt;\r\n    &lt;/project&gt;","title":"maven project which has both java and scala","body":"<p>I want to build a maven project which has both java and scala source code.\nI have installed scala IDE plugin in eclipse and added the <strong>\"scala-maven-plugin\"</strong>  in pom.xml but the imports of java classes in the scala files are giving compilation errors.\nWhich is the best IDE to build such mixed projects?</p>\n\n<p>The project structure is </p>\n\n<p><a href=\"https://i.stack.imgur.com/sliqh.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/sliqh.png\" alt=\"enter image description here\"></a></p>\n\n<p>The pom.xml </p>\n\n<pre><code>&lt;project xmlns=\"http://maven.apache.org/POM/4.0.0\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd\"&gt;\n  &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n  &lt;groupId&gt;org.apache.spark&lt;/groupId&gt;\n  &lt;artifactId&gt;spark-examples_2.11&lt;/artifactId&gt;\n  &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n\n\n&lt;dependencies&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.scala-lang&lt;/groupId&gt;\n        &lt;artifactId&gt;scala-library&lt;/artifactId&gt;\n        &lt;version&gt;2.11.7&lt;/version&gt;\n    &lt;/dependency&gt;\n&lt;/dependencies&gt;\n&lt;build&gt;\n&lt;pluginManagement&gt;\n    &lt;plugins&gt;\n&lt;!-- This plugin compiles Scala files --&gt;\n        &lt;plugin&gt;\n            &lt;groupId&gt;net.alchim31.maven&lt;/groupId&gt;\n            &lt;artifactId&gt;scala-maven-plugin&lt;/artifactId&gt;\n            &lt;executions&gt;\n                &lt;execution&gt;\n                    &lt;id&gt;scala-compile-first&lt;/id&gt;\n                    &lt;phase&gt;process-resources&lt;/phase&gt;\n                    &lt;goals&gt;\n                        &lt;goal&gt;add-source&lt;/goal&gt;\n                        &lt;goal&gt;compile&lt;/goal&gt;\n                    &lt;/goals&gt;\n                &lt;/execution&gt;\n            &lt;/executions&gt;\n        &lt;/plugin&gt;\n&lt;!-- This plugin compiles Java files --&gt;\n        &lt;plugin&gt;\n            &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n            &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n            &lt;configuration&gt;\n                &lt;source&gt;1.8&lt;/source&gt;\n                &lt;target&gt;1.8&lt;/target&gt;\n            &lt;/configuration&gt;\n            &lt;executions&gt;\n                &lt;execution&gt;\n                    &lt;phase&gt;compile&lt;/phase&gt;\n                    &lt;goals&gt;\n                        &lt;goal&gt;compile&lt;/goal&gt;\n                    &lt;/goals&gt;\n                &lt;/execution&gt;\n            &lt;/executions&gt;\n        &lt;/plugin&gt;\n&lt;!-- This plugin adds all dependencies to JAR file during 'package' command.\nPay EXTRA attention to the 'mainClass' tag. \nYou have to set name of class with entry point to program ('main' method) --&gt;\n        &lt;plugin&gt;\n            &lt;artifactId&gt;maven-assembly-plugin&lt;/artifactId&gt;\n            &lt;version&gt;2.5.3&lt;/version&gt;\n            &lt;configuration&gt;\n                &lt;descriptorRefs&gt;\n                    &lt;descriptorRef&gt;jar-with-dependencies&lt;/descriptorRef&gt;\n                &lt;/descriptorRefs&gt;\n                &lt;archive&gt;\n                    &lt;manifest&gt;\n                        &lt;mainClass&gt;ScalaRunner&lt;/mainClass&gt;\n                    &lt;/manifest&gt;\n                &lt;/archive&gt;\n            &lt;/configuration&gt;\n            &lt;executions&gt;\n                &lt;execution&gt;\n                    &lt;phase&gt;package&lt;/phase&gt;\n                    &lt;goals&gt;\n                        &lt;goal&gt;single&lt;/goal&gt;\n                    &lt;/goals&gt;\n                &lt;/execution&gt;\n            &lt;/executions&gt;\n        &lt;/plugin&gt;\n    &lt;/plugins&gt;\n  &lt;/pluginManagement&gt;  \n&lt;/build&gt;\n&lt;/project&gt;\n</code></pre>\n"},{"tags":["java","jvm","bytecode","signature","jvm-bytecode"],"comments":[{"owner":{"account_id":247613,"reputation":284089,"user_id":522444,"accept_rate":100,"display_name":"Hovercraft Full Of Eels"},"score":0,"creation_date":1667267493,"post_id":74270707,"comment_id":131124425,"body_markdown":"Thank you, now could you possibly explain your question in greater detail and clarity?","body":"Thank you, now could you possibly explain your question in greater detail and clarity?"},{"owner":{"account_id":8580730,"reputation":272,"user_id":6428439,"display_name":"Lyon"},"score":0,"creation_date":1667267653,"post_id":74270707,"comment_id":131124445,"body_markdown":"For e.g.,  a string would be Ljava.lang.String, but how would i represent the above argument in jvm form. \n\n[Ljava.lang.String;Lcom.this.location ?","body":"For e.g.,  a string would be Ljava.lang.String, but how would i represent the above argument in jvm form.   [Ljava.lang.String;Lcom.this.location ?"},{"owner":{"account_id":85671,"reputation":40847,"user_id":238704,"display_name":"President James K. Polk"},"score":0,"creation_date":1667267770,"post_id":74270707,"comment_id":131124461,"body_markdown":"Are you asking how something appears in a .class file?","body":"Are you asking how something appears in a .class file?"},{"owner":{"account_id":247613,"reputation":284089,"user_id":522444,"accept_rate":100,"display_name":"Hovercraft Full Of Eels"},"score":0,"creation_date":1667267804,"post_id":74270707,"comment_id":131124466,"body_markdown":"I&#39;ve not heard of &quot;JVM form&quot; although I&#39;ve seen these descriptors in toString representation from objects that have not overridden Object&#39;s toString. Where would you use such a form?","body":"I&#39;ve not heard of &quot;JVM form&quot; although I&#39;ve seen these descriptors in toString representation from objects that have not overridden Object&#39;s toString. Where would you use such a form?"},{"owner":{"account_id":8580730,"reputation":272,"user_id":6428439,"display_name":"Lyon"},"score":0,"creation_date":1667267946,"post_id":74270707,"comment_id":131124481,"body_markdown":"yes perhaps my phrasing is incorrect. but i would like to see how it looks like. i have added an image into the post from jvm field descriptors.","body":"yes perhaps my phrasing is incorrect. but i would like to see how it looks like. i have added an image into the post from jvm field descriptors."},{"owner":{"account_id":32581,"reputation":76091,"user_id":90527,"accept_rate":85,"display_name":"outis"},"score":1,"creation_date":1667309849,"post_id":74270707,"comment_id":131133977,"body_markdown":"[Images](//meta.stackoverflow.com/q/285551/90527) should not be used for textual data.","body":"<a href=\"//meta.stackoverflow.com/q/285551/90527\">Images</a> should not be used for textual data."}],"answers":[{"tags":[],"owner":{"account_id":465573,"reputation":192694,"user_id":869736,"accept_rate":82,"display_name":"Louis Wasserman"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1667279817,"creation_date":1667279817,"answer_id":74271804,"question_id":74270707,"body_markdown":"There are no arrays, and type erasure means generics don&#39;t matter.  So this is just `Ljava/lang/String;Lwhatever/package/ArrayMap;`.  `Task` doesn&#39;t show up at all.","title":"JVM field descriptor for array of multiple types","body":"<p>There are no arrays, and type erasure means generics don't matter.  So this is just <code>Ljava/lang/String;Lwhatever/package/ArrayMap;</code>.  <code>Task</code> doesn't show up at all.</p>\n"},{"tags":[],"owner":{"account_id":3211603,"reputation":289297,"user_id":2711488,"display_name":"Holger"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1667294958,"creation_date":1667294958,"answer_id":74273849,"question_id":74270707,"body_markdown":"There seems to be some confusion as you’re looking at a *field* descriptor but asking a question about a *method*. So you have to look at the [*method* descriptor documentation] just beneath the “Field Descriptors” section.\r\n\r\nA method descriptor has the form\r\n\r\n&gt; `(` ParameterDescriptor* `)` ReturnDescriptor\r\n\r\nwhere the parameter descriptors have the same form as field descriptors, concatenated without any separators and the return descriptor only differs from field descriptors in also allowing `V`, to denote a `void` method.\r\n\r\nSince your question doesn’t include the return type, and also doesn’t show the qualified name of the second parameter&#185; (we might assume the first one is `java.lang.String`), no complete answer can be given for this example. If the method has been declared like\r\n```java\r\nvoid callthismethod(java.lang.String a, some.location.ArrayMap&lt;String, Task&lt;String&gt;&gt; aa)\r\n```\r\nthe method descriptor would look like\r\n```\r\n(Ljava/lang/String;Lsome/location/ArrayMap;)V\r\n```\r\n\r\nNote that neither, field descriptors nor method descriptors, encode type arguments. [Generic signatures] are an entirely different thing, only used for Reflection and debugging, not for the normal execution of code.\r\n\r\nGetting the generic signature for your example is as problematic as getting the method descriptor, due to the missing information. Further, `com.this.location` is not a valid package name. Assuming `some.location` for `Task` as well, the generic signature would look like\r\n```\r\n(Ljava/lang/String;Lsome/location/ArrayMap&lt;Ljava/lang/String;Lsome/location/Task&lt;Ljava/lang/String;&gt;;&gt;;)V\r\n```\r\n\r\n---\r\n\r\n&#185; in fact, your declaration is entirely invalid as it tries to assign names to type arguments but not to the actual parameter.\r\n\r\n[*method* descriptor documentation]: https://docs.oracle.com/javase/specs/jvms/se7/html/jvms-4.html#jvms-4.3.3\r\n\r\n[Generic signatures]: https://docs.oracle.com/javase/specs/jvms/se7/html/jvms-4.html#jvms-4.3.4","title":"JVM field descriptor for array of multiple types","body":"<p>There seems to be some confusion as you’re looking at a <em>field</em> descriptor but asking a question about a <em>method</em>. So you have to look at the <a href=\"https://docs.oracle.com/javase/specs/jvms/se7/html/jvms-4.html#jvms-4.3.3\" rel=\"nofollow noreferrer\"><em>method</em> descriptor documentation</a> just beneath the “Field Descriptors” section.</p>\n<p>A method descriptor has the form</p>\n<blockquote>\n<p><code>(</code> ParameterDescriptor* <code>)</code> ReturnDescriptor</p>\n</blockquote>\n<p>where the parameter descriptors have the same form as field descriptors, concatenated without any separators and the return descriptor only differs from field descriptors in also allowing <code>V</code>, to denote a <code>void</code> method.</p>\n<p>Since your question doesn’t include the return type, and also doesn’t show the qualified name of the second parameter¹ (we might assume the first one is <code>java.lang.String</code>), no complete answer can be given for this example. If the method has been declared like</p>\n<pre class=\"lang-java prettyprint-override\"><code>void callthismethod(java.lang.String a, some.location.ArrayMap&lt;String, Task&lt;String&gt;&gt; aa)\n</code></pre>\n<p>the method descriptor would look like</p>\n<pre><code>(Ljava/lang/String;Lsome/location/ArrayMap;)V\n</code></pre>\n<p>Note that neither, field descriptors nor method descriptors, encode type arguments. <a href=\"https://docs.oracle.com/javase/specs/jvms/se7/html/jvms-4.html#jvms-4.3.4\" rel=\"nofollow noreferrer\">Generic signatures</a> are an entirely different thing, only used for Reflection and debugging, not for the normal execution of code.</p>\n<p>Getting the generic signature for your example is as problematic as getting the method descriptor, due to the missing information. Further, <code>com.this.location</code> is not a valid package name. Assuming <code>some.location</code> for <code>Task</code> as well, the generic signature would look like</p>\n<pre><code>(Ljava/lang/String;Lsome/location/ArrayMap&lt;Ljava/lang/String;Lsome/location/Task&lt;Ljava/lang/String;&gt;;&gt;;)V\n</code></pre>\n<hr />\n<p>¹ in fact, your declaration is entirely invalid as it tries to assign names to type arguments but not to the actual parameter.</p>\n"}],"owner":{"account_id":8580730,"reputation":272,"user_id":6428439,"display_name":"Lyon"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":263,"favorite_count":0,"down_vote_count":2,"up_vote_count":3,"accepted_answer_id":74273849,"answer_count":2,"score":1,"last_activity_date":1667320167,"creation_date":1667267337,"question_id":74270707,"body_markdown":"I am looking at https://docs.oracle.com/javase/specs/jvms/se7/html/jvms-4.html#jvms-4.3.2\r\nand i am wondering how does one display the correct form of a method that takes in 2 different types.\r\n\r\nE.g.\r\n\r\n    callthismethod(String a, ArrayMap&lt;String aa, Task&lt;String aaa&gt; &gt; )\r\n\r\nwhere Task is imported from com.this.location\r\n\r\n&gt; The field descriptor of an instance variable of type `int` is simply `I`.\r\n&gt; \r\n&gt; The field descriptor of an instance variable of type `Object` is `Ljava/lang/Object;`. Note that the internal form of the binary name for class `Object` is used.\r\n&gt; \r\n&gt; The field descriptor of an instance variable that is a multidimensional `double` array, `double d[][][]`, is `[[[D`.","title":"JVM field descriptor for array of multiple types","body":"<p>I am looking at <a href=\"https://docs.oracle.com/javase/specs/jvms/se7/html/jvms-4.html#jvms-4.3.2\" rel=\"nofollow noreferrer\">https://docs.oracle.com/javase/specs/jvms/se7/html/jvms-4.html#jvms-4.3.2</a>\nand i am wondering how does one display the correct form of a method that takes in 2 different types.</p>\n<p>E.g.</p>\n<pre><code>callthismethod(String a, ArrayMap&lt;String aa, Task&lt;String aaa&gt; &gt; )\n</code></pre>\n<p>where Task is imported from com.this.location</p>\n<blockquote>\n<p>The field descriptor of an instance variable of type <code>int</code> is simply <code>I</code>.</p>\n<p>The field descriptor of an instance variable of type <code>Object</code> is <code>Ljava/lang/Object;</code>. Note that the internal form of the binary name for class <code>Object</code> is used.</p>\n<p>The field descriptor of an instance variable that is a multidimensional <code>double</code> array, <code>double d[][][]</code>, is <code>[[[D</code>.</p>\n</blockquote>\n"},{"tags":["java","spring","gradle","logging","logback"],"answers":[{"tags":[],"owner":{"account_id":7719031,"reputation":2254,"user_id":5845802,"display_name":"PrasadU"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1667320106,"creation_date":1667320106,"answer_id":74278934,"question_id":74277581,"body_markdown":"you have not actually used the file appender with a real logger section - there may not be any loggers with exact name as &#39;weblogic&#39; in your runtime\r\n``` \r\n&lt;logger name=&quot;weblogic&quot; level=&quot;INFO&quot; additivity=&quot;false&quot;&gt;\r\n    &lt;appender-ref ref=&quot;LOGFILE&quot;/&gt;\r\n&lt;/logger&gt;\r\n```\r\nto test if it works try \r\n```\r\n&lt;root level=&quot;INFO&quot;&gt;\r\n    &lt;appender-ref ref=&quot;STDOUT&quot;/&gt;\r\n    &lt;appender-ref ref=&quot;LOGFILE&quot;/&gt;\r\n&lt;/root&gt;\r\n```","title":"logback not writing to log files","body":"<p>you have not actually used the file appender with a real logger section - there may not be any loggers with exact name as 'weblogic' in your runtime</p>\n<pre><code>&lt;logger name=&quot;weblogic&quot; level=&quot;INFO&quot; additivity=&quot;false&quot;&gt;\n    &lt;appender-ref ref=&quot;LOGFILE&quot;/&gt;\n&lt;/logger&gt;\n</code></pre>\n<p>to test if it works try</p>\n<pre><code>&lt;root level=&quot;INFO&quot;&gt;\n    &lt;appender-ref ref=&quot;STDOUT&quot;/&gt;\n    &lt;appender-ref ref=&quot;LOGFILE&quot;/&gt;\n&lt;/root&gt;\n</code></pre>\n"}],"owner":{"account_id":1073176,"reputation":3217,"user_id":1071967,"accept_rate":61,"display_name":"Geek"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":422,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1667320106,"creation_date":1667313461,"question_id":74277581,"body_markdown":"I have a logback xml as follows:\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;configuration debug=&quot;false&quot; scan=&quot;true&quot;&gt;\r\n        &lt;contextListener class=&quot;ch.qos.logback.classic.jul.LevelChangePropagator&quot; /&gt;\r\n    \t&lt;appender name=&quot;STDOUT&quot; class=&quot;ch.qos.logback.core.ConsoleAppender&quot;&gt;\r\n    \t\t&lt;encoder&gt;\r\n    \t\t\t&lt;pattern&gt;%d{yyyy-MM-dd HH:mm:ss} [%thread] %-5level %logger{50} - %msg%n&lt;/pattern&gt;\r\n    \t\t&lt;/encoder&gt;\r\n    \t&lt;/appender&gt;\r\n    \t&lt;appender name=&quot;LOGFILE&quot; class=&quot;ch.qos.logback.core.rolling.RollingFileAppender&quot;&gt;\r\n                &lt;file&gt;/mnt/test/testLog.log&lt;/file&gt;\r\n                &lt;rollingPolicy class=&quot;ch.qos.logback.core.rolling.FixedWindowRollingPolicy&quot;&gt;\r\n                    &lt;fileNamePattern&gt;/mnt/test/testLog_%i.log&lt;/fileNamePattern&gt;\r\n                    &lt;minIndex&gt;1&lt;/minIndex&gt;\r\n                    &lt;maxIndex&gt;10&lt;/maxIndex&gt;\r\n                &lt;/rollingPolicy&gt;\r\n    \r\n                &lt;triggeringPolicy class=&quot;ch.qos.logback.core.rolling.SizeBasedTriggeringPolicy&quot;&gt;\r\n                    &lt;maxFileSize&gt;10MB&lt;/maxFileSize&gt;\r\n                &lt;/triggeringPolicy&gt;\r\n    \r\n                &lt;encoder&gt;\r\n                    &lt;pattern&gt;%d{yyyy-MM-dd HH:mm:ss} [%thread] %-5level %logger{50} - %msg%n&lt;/pattern&gt;\r\n                &lt;/encoder&gt;\r\n            &lt;/appender&gt;\r\n    \t&lt;logger name=&quot;weblogic&quot; level=&quot;INFO&quot; additivity=&quot;false&quot;&gt;\r\n                &lt;appender-ref ref=&quot;LOGFILE&quot;/&gt;\r\n    \t&lt;/logger&gt;\r\n            &lt;logger name=&quot;org.apache&quot; level=&quot;ERROR&quot; /&gt;\r\n            &lt;logger name=&quot;httpclient&quot; level=&quot;ERROR&quot; /&gt;\r\n            &lt;logger name=&quot;org.test.abc&quot; level=&quot;INFO&quot; /&gt;\r\n            &lt;root level=&quot;INFO&quot;&gt;\r\n                &lt;appender-ref ref=&quot;STDOUT&quot; /&gt;\r\n            &lt;/root&gt;\r\n    \r\n    &lt;/configuration&gt;\r\n\r\n\r\nMy gradle entry is as follows:\r\n\r\nbuild.gradle dependencies is as follows:\r\n\r\n\r\n    dependencies {\r\n        compileOnly &#39;javax:javaee-api:8.0.1&#39;\r\n        // junit\r\n        implementation &#39;junit:junit:4.12&#39;\r\n        // logger\r\n        testImplementation &#39;ch.qos.logback:logback-classic:0.9.26&#39;\r\n        // jackson\r\n        implementation &#39;com.fasterxml.jackson.core:jackson-annotations:2.13.3&#39;\r\n        implementation &#39;com.fasterxml.jackson.core:jackson-databind:2.13.3&#39;\r\n        implementation &#39;com.fasterxml.jackson.datatype:jackson-datatype-hibernate5:2.13.3&#39;\r\n        // hibernate\r\n        implementation &#39;org.hibernate.common:hibernate-commons-annotations:5.0.1.Final&#39;\r\n        implementation &#39;org.hibernate:hibernate-core:5.2.10.Final&#39;\r\n        // apache\r\n        implementation &#39;org.apache.commons:commons-lang3:3.12.0&#39;\r\n        implementation &#39;commons-io:commons-io:2.2&#39;\r\n        implementation &#39;org.apache.poi:poi:3.16&#39;\r\n        implementation &#39;org.apache.poi:poi-ooxml:3.16&#39;\r\n        implementation &#39;org.apache.poi:poi-ooxml-schemas:3.16&#39;\r\n        implementation &#39;org.apache.poi:ooxml-schemas:1.1&#39;\r\n        //  lombok\r\n        implementation &#39;org.projectlombok:lombok:1.18.12&#39;\r\n        // swagger\r\n        implementation &#39;io.swagger.core.v3:swagger-annotations:2.2.2&#39;\r\n        implementation &#39;io.swagger.core.v3:swagger-core:2.2.2&#39;\r\n        implementation &#39;io.swagger.core.v3:swagger-integration:2.2.2&#39;\r\n        implementation &#39;io.swagger.core.v3:swagger-jaxrs2:2.2.2&#39;\r\n        implementation &#39;io.springfox:springfox-boot-starter:3.0.0&#39;\r\n        // guava\r\n        implementation &#39;com.google.guava:guava:27.0.1-android&#39;\r\n        // jjwt\r\n        implementation &#39;io.jsonwebtoken:jjwt:0.9.1&#39;\r\n        // spring\r\n        implementation &#39;org.springframework:spring-core:5.2.6.RELEASE&#39;\r\n        implementation &#39;org.springframework:spring-webmvc:5.2.6.RELEASE&#39;\r\n        implementation &#39;org.springframework:spring-jdbc:5.2.6.RELEASE&#39;\r\n        implementation &#39;org.springframework.data:spring-data-jpa:2.2.7.RELEASE&#39;\r\n        // Spring security\r\n        implementation &#39;org.springframework.security:spring-security-core:5.2.6.RELEASE&#39;\r\n        implementation &#39;org.springframework.security.oauth:spring-security-oauth2:2.5.0.RELEASE&#39;\r\n        // AWS S3 related Jars\r\n        implementation group: &#39;software.amazon.awssdk&#39;, name: &#39;s3&#39;, version: &#39;2.17.282&#39;\r\n    \r\n        deploy files(war)\r\n    }\r\n\r\nWhile I compile and deploy the loggers appears in the console output but nothing is written to the  /mnt/test/testLog.log file. The reason i have given the dependecies is to make sure there is no version mismatch. Can someone let me know where am i going wrong with the gradle implementation.\r\n\r\nAny input is highly appreciated.","title":"logback not writing to log files","body":"<p>I have a logback xml as follows:</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;configuration debug=&quot;false&quot; scan=&quot;true&quot;&gt;\n    &lt;contextListener class=&quot;ch.qos.logback.classic.jul.LevelChangePropagator&quot; /&gt;\n    &lt;appender name=&quot;STDOUT&quot; class=&quot;ch.qos.logback.core.ConsoleAppender&quot;&gt;\n        &lt;encoder&gt;\n            &lt;pattern&gt;%d{yyyy-MM-dd HH:mm:ss} [%thread] %-5level %logger{50} - %msg%n&lt;/pattern&gt;\n        &lt;/encoder&gt;\n    &lt;/appender&gt;\n    &lt;appender name=&quot;LOGFILE&quot; class=&quot;ch.qos.logback.core.rolling.RollingFileAppender&quot;&gt;\n            &lt;file&gt;/mnt/test/testLog.log&lt;/file&gt;\n            &lt;rollingPolicy class=&quot;ch.qos.logback.core.rolling.FixedWindowRollingPolicy&quot;&gt;\n                &lt;fileNamePattern&gt;/mnt/test/testLog_%i.log&lt;/fileNamePattern&gt;\n                &lt;minIndex&gt;1&lt;/minIndex&gt;\n                &lt;maxIndex&gt;10&lt;/maxIndex&gt;\n            &lt;/rollingPolicy&gt;\n\n            &lt;triggeringPolicy class=&quot;ch.qos.logback.core.rolling.SizeBasedTriggeringPolicy&quot;&gt;\n                &lt;maxFileSize&gt;10MB&lt;/maxFileSize&gt;\n            &lt;/triggeringPolicy&gt;\n\n            &lt;encoder&gt;\n                &lt;pattern&gt;%d{yyyy-MM-dd HH:mm:ss} [%thread] %-5level %logger{50} - %msg%n&lt;/pattern&gt;\n            &lt;/encoder&gt;\n        &lt;/appender&gt;\n    &lt;logger name=&quot;weblogic&quot; level=&quot;INFO&quot; additivity=&quot;false&quot;&gt;\n            &lt;appender-ref ref=&quot;LOGFILE&quot;/&gt;\n    &lt;/logger&gt;\n        &lt;logger name=&quot;org.apache&quot; level=&quot;ERROR&quot; /&gt;\n        &lt;logger name=&quot;httpclient&quot; level=&quot;ERROR&quot; /&gt;\n        &lt;logger name=&quot;org.test.abc&quot; level=&quot;INFO&quot; /&gt;\n        &lt;root level=&quot;INFO&quot;&gt;\n            &lt;appender-ref ref=&quot;STDOUT&quot; /&gt;\n        &lt;/root&gt;\n\n&lt;/configuration&gt;\n</code></pre>\n<p>My gradle entry is as follows:</p>\n<p>build.gradle dependencies is as follows:</p>\n<pre><code>dependencies {\n    compileOnly 'javax:javaee-api:8.0.1'\n    // junit\n    implementation 'junit:junit:4.12'\n    // logger\n    testImplementation 'ch.qos.logback:logback-classic:0.9.26'\n    // jackson\n    implementation 'com.fasterxml.jackson.core:jackson-annotations:2.13.3'\n    implementation 'com.fasterxml.jackson.core:jackson-databind:2.13.3'\n    implementation 'com.fasterxml.jackson.datatype:jackson-datatype-hibernate5:2.13.3'\n    // hibernate\n    implementation 'org.hibernate.common:hibernate-commons-annotations:5.0.1.Final'\n    implementation 'org.hibernate:hibernate-core:5.2.10.Final'\n    // apache\n    implementation 'org.apache.commons:commons-lang3:3.12.0'\n    implementation 'commons-io:commons-io:2.2'\n    implementation 'org.apache.poi:poi:3.16'\n    implementation 'org.apache.poi:poi-ooxml:3.16'\n    implementation 'org.apache.poi:poi-ooxml-schemas:3.16'\n    implementation 'org.apache.poi:ooxml-schemas:1.1'\n    //  lombok\n    implementation 'org.projectlombok:lombok:1.18.12'\n    // swagger\n    implementation 'io.swagger.core.v3:swagger-annotations:2.2.2'\n    implementation 'io.swagger.core.v3:swagger-core:2.2.2'\n    implementation 'io.swagger.core.v3:swagger-integration:2.2.2'\n    implementation 'io.swagger.core.v3:swagger-jaxrs2:2.2.2'\n    implementation 'io.springfox:springfox-boot-starter:3.0.0'\n    // guava\n    implementation 'com.google.guava:guava:27.0.1-android'\n    // jjwt\n    implementation 'io.jsonwebtoken:jjwt:0.9.1'\n    // spring\n    implementation 'org.springframework:spring-core:5.2.6.RELEASE'\n    implementation 'org.springframework:spring-webmvc:5.2.6.RELEASE'\n    implementation 'org.springframework:spring-jdbc:5.2.6.RELEASE'\n    implementation 'org.springframework.data:spring-data-jpa:2.2.7.RELEASE'\n    // Spring security\n    implementation 'org.springframework.security:spring-security-core:5.2.6.RELEASE'\n    implementation 'org.springframework.security.oauth:spring-security-oauth2:2.5.0.RELEASE'\n    // AWS S3 related Jars\n    implementation group: 'software.amazon.awssdk', name: 's3', version: '2.17.282'\n\n    deploy files(war)\n}\n</code></pre>\n<p>While I compile and deploy the loggers appears in the console output but nothing is written to the  /mnt/test/testLog.log file. The reason i have given the dependecies is to make sure there is no version mismatch. Can someone let me know where am i going wrong with the gradle implementation.</p>\n<p>Any input is highly appreciated.</p>\n"},{"tags":["java","json","spring","postman"],"answers":[{"tags":[],"owner":{"account_id":1223835,"reputation":75848,"user_id":1189885,"accept_rate":43,"display_name":"chrylis -cautiouslyoptimistic-"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1667319835,"creation_date":1667319835,"answer_id":74278879,"question_id":74278682,"body_markdown":"`firstname`, `firstName`, and `FirstName` are all different identifiers. They need to match.\r\n\r\nNote that following Java conventions will make your life much easier: The names of items that are not classes (variables, fields, methods) should start with lowercase letters. Additionally, following _REST_ conventions will make your life easier: POST already means &quot;add&quot;, so don&#39;t have an extra `/add` in the URL, just `POST /user`.","title":"Passing new object through postman raw json body gives null values","body":"<p><code>firstname</code>, <code>firstName</code>, and <code>FirstName</code> are all different identifiers. They need to match.</p>\n<p>Note that following Java conventions will make your life much easier: The names of items that are not classes (variables, fields, methods) should start with lowercase letters. Additionally, following <em>REST</em> conventions will make your life easier: POST already means &quot;add&quot;, so don't have an extra <code>/add</code> in the URL, just <code>POST /user</code>.</p>\n"}],"owner":{"account_id":23067229,"reputation":99,"user_id":17181501,"display_name":"Meadas"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":624,"favorite_count":0,"down_vote_count":2,"up_vote_count":0,"accepted_answer_id":74278879,"answer_count":1,"score":-2,"last_activity_date":1667319835,"creation_date":1667318934,"question_id":74278682,"body_markdown":"Im trying to post a new object(Nuser) through postman using raw body json. The birthdate and insertion come through, but the first and lastname come as null value. I can&#39;t seem to find the problem by myself hence im asking it here.\r\n[![Postman][1]][1]\r\n[![Database][2]][2]\r\n\r\n**My baseuser class:**\r\n```\r\n@Entity\r\npublic abstract class BaseUser {\r\n    @Id\r\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n    private int Id;\r\n\r\n    private String FirstName;\r\n\r\n    private String LastName;\r\n    private String Insertion;\r\n    private LocalDate Birthdate;\r\n\r\n    public BaseUser() {\r\n    }\r\n\r\n    public BaseUser(String firstName, String lastName, String insertion, LocalDate birthdate) {\r\n        FirstName = firstName;\r\n        LastName = lastName;\r\n        Insertion = insertion;\r\n        Birthdate = birthdate;\r\n    }\r\n\r\n    public BaseUser(int id, String firstName, String lastName, String insertion, LocalDate birthdate) {\r\n        Id = id;\r\n        FirstName = firstName;\r\n        LastName = lastName;\r\n        Insertion = insertion;\r\n        Birthdate = birthdate;\r\n    }\r\n\r\n```\r\n**My Nuser class**\r\n```\r\n@Entity\r\npublic class Nuser extends BaseUser\r\n{\r\n    public Nuser(String firstName, String lastName, String insertion, LocalDate birthdate) {\r\n        super(firstName, lastName, insertion, birthdate);\r\n    }\r\n\r\n    public Nuser() {\r\n\r\n    }\r\n}\r\n```\r\n**The Nuser Controller**\r\n```\r\n@RestController\r\n@RequestMapping(&quot;/user&quot;)\r\npublic class NuserController {\r\n\r\n    @Autowired\r\n    private NuserService nuserService;\r\n\r\n    @PostMapping(&quot;/add&quot;)\r\n    public String add(@RequestBody Nuser nuser)\r\n    {\r\n        nuserService.AddUser(nuser);\r\n        return &quot;New account has been made&quot;;\r\n    }\r\n\r\n}\r\n```\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/syhEU.png\r\n  [2]: https://i.stack.imgur.com/Wu7MY.png","title":"Passing new object through postman raw json body gives null values","body":"<p>Im trying to post a new object(Nuser) through postman using raw body json. The birthdate and insertion come through, but the first and lastname come as null value. I can't seem to find the problem by myself hence im asking it here.\n<a href=\"https://i.stack.imgur.com/syhEU.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/syhEU.png\" alt=\"Postman\" /></a>\n<a href=\"https://i.stack.imgur.com/Wu7MY.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Wu7MY.png\" alt=\"Database\" /></a></p>\n<p><strong>My baseuser class:</strong></p>\n<pre><code>@Entity\npublic abstract class BaseUser {\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    private int Id;\n\n    private String FirstName;\n\n    private String LastName;\n    private String Insertion;\n    private LocalDate Birthdate;\n\n    public BaseUser() {\n    }\n\n    public BaseUser(String firstName, String lastName, String insertion, LocalDate birthdate) {\n        FirstName = firstName;\n        LastName = lastName;\n        Insertion = insertion;\n        Birthdate = birthdate;\n    }\n\n    public BaseUser(int id, String firstName, String lastName, String insertion, LocalDate birthdate) {\n        Id = id;\n        FirstName = firstName;\n        LastName = lastName;\n        Insertion = insertion;\n        Birthdate = birthdate;\n    }\n\n</code></pre>\n<p><strong>My Nuser class</strong></p>\n<pre><code>@Entity\npublic class Nuser extends BaseUser\n{\n    public Nuser(String firstName, String lastName, String insertion, LocalDate birthdate) {\n        super(firstName, lastName, insertion, birthdate);\n    }\n\n    public Nuser() {\n\n    }\n}\n</code></pre>\n<p><strong>The Nuser Controller</strong></p>\n<pre><code>@RestController\n@RequestMapping(&quot;/user&quot;)\npublic class NuserController {\n\n    @Autowired\n    private NuserService nuserService;\n\n    @PostMapping(&quot;/add&quot;)\n    public String add(@RequestBody Nuser nuser)\n    {\n        nuserService.AddUser(nuser);\n        return &quot;New account has been made&quot;;\n    }\n\n}\n</code></pre>\n"},{"tags":["java","apache-kafka"],"comments":[{"owner":{"account_id":1540148,"reputation":1578,"user_id":1435014,"display_name":"Abhishek"},"score":0,"creation_date":1547466960,"post_id":54180946,"comment_id":95190281,"body_markdown":"Have you checked Kafka property `auto.offset.reset = latest` ?","body":"Have you checked Kafka property <code>auto.offset.reset = latest</code> ?"},{"owner":{"account_id":15120466,"reputation":87,"user_id":10911410,"display_name":"Ngoc Dinh Cong"},"score":0,"creation_date":1547467376,"post_id":54180946,"comment_id":95190506,"body_markdown":"@apandey846: Yes, i&#39;ve added, I use Spring cloud binding with these configs:\n`resetOffsets: true\nstartOffset: latest\n`","body":"@apandey846: Yes, i&#39;ve added, I use Spring cloud binding with these configs: <code>resetOffsets: true startOffset: latest </code>"}],"answers":[{"tags":[],"owner":{"account_id":1439802,"reputation":610,"user_id":1360276,"accept_rate":44,"display_name":"saabeilin"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1547499373,"creation_date":1547499373,"answer_id":54189051,"question_id":54180946,"body_markdown":"Your consumers store their offset (that is, the last read position). After restart, they continue reading from this point. This behavior is by design.\r\n\r\nThe offset reset properties are used when the offset for this particular consumer group is not yet known for some reason (say, it&#39;s a new consumer group or offsets have expired), but still, there are generally two options - a) reread all from the beginning b) start listening for new messages, forgetting everything that was before now.\r\n\r\nThere are _hacky_ ways to achieve what you&#39;ve described, but they are not straightforward and not recommended (a trivial one: consumer messages while just skipping them until you reach the partition EOF)\r\n\r\nMaybe just Kafka is not the right tool for this problem.","title":"How to retrieve lastest message from Kafka topic","body":"<p>Your consumers store their offset (that is, the last read position). After restart, they continue reading from this point. This behavior is by design.</p>\n\n<p>The offset reset properties are used when the offset for this particular consumer group is not yet known for some reason (say, it's a new consumer group or offsets have expired), but still, there are generally two options - a) reread all from the beginning b) start listening for new messages, forgetting everything that was before now.</p>\n\n<p>There are <em>hacky</em> ways to achieve what you've described, but they are not straightforward and not recommended (a trivial one: consumer messages while just skipping them until you reach the partition EOF)</p>\n\n<p>Maybe just Kafka is not the right tool for this problem.</p>\n"},{"tags":[],"owner":{"account_id":2770777,"reputation":3081,"user_id":2385424,"accept_rate":41,"display_name":"Vibhor Bhardwaj"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1667319588,"creation_date":1667319588,"answer_id":74278826,"question_id":54180946,"body_markdown":"The problem which you are mentioning is the Application Integration Problem. For this kind of Problem, we can use RabitMQ or IBM MQ.","title":"How to retrieve lastest message from Kafka topic","body":"<p>The problem which you are mentioning is the Application Integration Problem. For this kind of Problem, we can use RabitMQ or IBM MQ.</p>\n"}],"owner":{"account_id":15120466,"reputation":87,"user_id":10911410,"display_name":"Ngoc Dinh Cong"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1443,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":54189051,"answer_count":2,"score":0,"last_activity_date":1667319588,"creation_date":1547466472,"question_id":54180946,"body_markdown":"I&#39;m just a newbie of Kafka and I have a problem:\r\n\r\nI have topic &#39;A&#39; in Kafka, I start Spring boot app and use MessageChannel to send some message to topic &#39;A&#39;, then I stop app.\r\n\r\nIs there anyway to get the latest message I&#39;ve sent to topic &#39;A&#39; (not all message) when I start app again? I&#39;ve searched all solutions but they did not help me much, it always receive message immediately if I only sending new message. If you have runable code, pls share, I very much appreciated :(\r\n\r\n\r\n        // Start application\r\n\r\n\r\n        // Get latest message in topic &#39;A&#39; then do some LOGIC\r\n        if (exist latest message) {\r\n              //Print latest message\r\n        }\r\n\r\n\r\n       \r\n\r\n        \r\n\r\n","title":"How to retrieve lastest message from Kafka topic","body":"<p>I'm just a newbie of Kafka and I have a problem:</p>\n\n<p>I have topic 'A' in Kafka, I start Spring boot app and use MessageChannel to send some message to topic 'A', then I stop app.</p>\n\n<p>Is there anyway to get the latest message I've sent to topic 'A' (not all message) when I start app again? I've searched all solutions but they did not help me much, it always receive message immediately if I only sending new message. If you have runable code, pls share, I very much appreciated :(</p>\n\n<pre><code>    // Start application\n\n\n    // Get latest message in topic 'A' then do some LOGIC\n    if (exist latest message) {\n          //Print latest message\n    }\n</code></pre>\n"},{"tags":["java"],"answers":[{"tags":[],"owner":{"account_id":47283,"reputation":703817,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1667319558,"creation_date":1667318805,"answer_id":74278665,"question_id":74278066,"body_markdown":"The `jdk.dio.mmio` package is a Java ME package. It is not part of Java SE ... which is what OpenJDK Java 18 is.\r\n\r\nThere is nothing that is directly equivalent to the Java ME `jdk.dio.mmio` package in Java SE.\r\n\r\n\r\n----------------\r\n\r\nA DIO (device I/O) codebase is available in the java.net Mercurial repositories; see https://wiki.openjdk.org/display/dio/Getting+Started for more information.   \r\n\r\n  - It doesn&#39;t look like the source code on java.net corresponds to the Java ME javadocs that you found.\r\n  - I suspect that the Java ME version of the source code is only available to Java ME (source) license holders.  AFAIK, it is not open source.\r\n\r\n\r\n","title":"Can not find jdk.dio package","body":"<p>The <code>jdk.dio.mmio</code> package is a Java ME package. It is not part of Java SE ... which is what OpenJDK Java 18 is.</p>\n<p>There is nothing that is directly equivalent to the Java ME <code>jdk.dio.mmio</code> package in Java SE.</p>\n<hr />\n<p>A DIO (device I/O) codebase is available in the java.net Mercurial repositories; see <a href=\"https://wiki.openjdk.org/display/dio/Getting+Started\" rel=\"nofollow noreferrer\">https://wiki.openjdk.org/display/dio/Getting+Started</a> for more information.</p>\n<ul>\n<li>It doesn't look like the source code on java.net corresponds to the Java ME javadocs that you found.</li>\n<li>I suspect that the Java ME version of the source code is only available to Java ME (source) license holders.  AFAIK, it is not open source.</li>\n</ul>\n"}],"owner":{"account_id":24253326,"reputation":31,"user_id":19008587,"display_name":"lcwstudio"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":75,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1667319558,"creation_date":1667315793,"question_id":74278066,"body_markdown":"I use openjdk18. When I am importing jdk.dio.mmio, the IDE says cannot find jdk.dio package. I also find the jdk package only has few packages. This pages says jdk.* is existed.\r\nhttps://docs.oracle.com/javame/config/cldc/opt-pkgs/api/dio-jmee8/api/jdk/dio/mmio/package-summary.html","title":"Can not find jdk.dio package","body":"<p>I use openjdk18. When I am importing jdk.dio.mmio, the IDE says cannot find jdk.dio package. I also find the jdk package only has few packages. This pages says jdk.* is existed.\n<a href=\"https://docs.oracle.com/javame/config/cldc/opt-pkgs/api/dio-jmee8/api/jdk/dio/mmio/package-summary.html\" rel=\"nofollow noreferrer\">https://docs.oracle.com/javame/config/cldc/opt-pkgs/api/dio-jmee8/api/jdk/dio/mmio/package-summary.html</a></p>\n"},{"tags":["java","intellij-idea"],"comments":[{"owner":{"account_id":3391382,"reputation":3687,"user_id":2846138,"display_name":"cyberbrain"},"score":0,"creation_date":1667305462,"post_id":74275572,"comment_id":131132414,"body_markdown":"The first suspicious issue: why do you need to import the module again after you opened the existing project? Did you pick the wrong settings on the import there? Also: Do you have any repository or mirror configuration inside your local maven settings.xml? And please extend the first text error message with &quot;the following errors&quot; it refers to.","body":"The first suspicious issue: why do you need to import the module again after you opened the existing project? Did you pick the wrong settings on the import there? Also: Do you have any repository or mirror configuration inside your local maven settings.xml? And please extend the first text error message with &quot;the following errors&quot; it refers to."}],"answers":[{"tags":[],"owner":{"account_id":5083689,"reputation":1006,"user_id":4079056,"display_name":"sanurah"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1667317160,"creation_date":1667306802,"answer_id":74276184,"question_id":74275572,"body_markdown":"It&#39;s not clear what you are trying to achieve. You click &quot;open or import&quot; and add the existing project. After that you try to import the same project again. \r\n\r\nIf you want to load the maven dependancies right click on the &quot;pom.xml&quot; and select &quot;maven-&gt;reload project&quot;\r\n\r\n**Update:**\r\nThe issue seems to be on intelliJ IDE older versions which should be fixed by now.\r\nhttps://youtrack.jetbrains.com/issue/IDEA-290419/Maven-385-NoSuchMethodError-orgapachemavenmodelvalidationDefaultModelValidator-method-void-init-not-found","title":"ComponentLookupException when importing java project into intellij Idea","body":"<p>It's not clear what you are trying to achieve. You click &quot;open or import&quot; and add the existing project. After that you try to import the same project again.</p>\n<p>If you want to load the maven dependancies right click on the &quot;pom.xml&quot; and select &quot;maven-&gt;reload project&quot;</p>\n<p><strong>Update:</strong>\nThe issue seems to be on intelliJ IDE older versions which should be fixed by now.\n<a href=\"https://youtrack.jetbrains.com/issue/IDEA-290419/Maven-385-NoSuchMethodError-orgapachemavenmodelvalidationDefaultModelValidator-method-void-init-not-found\" rel=\"nofollow noreferrer\">https://youtrack.jetbrains.com/issue/IDEA-290419/Maven-385-NoSuchMethodError-orgapachemavenmodelvalidationDefaultModelValidator-method-void-init-not-found</a></p>\n"}],"owner":{"account_id":11655491,"reputation":361,"user_id":8543252,"accept_rate":100,"display_name":"IDK"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":207,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":74276184,"answer_count":1,"score":1,"last_activity_date":1667319399,"creation_date":1667303844,"question_id":74275572,"body_markdown":"I just download a spring boot project from https://start.spring.io/ and imported it into intellij idea, then I choose import module selecting the pom.xml file but when I click on Apply I get the error:\r\n\r\n```\r\njava.lang.RuntimeException: java.lang.RuntimeException: org.codehaus.plexus.component.repository.exception.ComponentLookupException: com.google.inject.ProvisionException: Unable to provision, see the following errors:\r\n```\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n[![enter image description here][2]][2]\r\n\r\n[![enter image description here][3]][3]\r\n\r\n[![enter image description here][4]][4]\r\n\r\n\r\n[![enter image description here][5]][5]\r\n\r\n[![enter image description here][6]][6]\r\n\r\nHere&#39;s the pom.xml\r\n\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n\txsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n\t&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n\t&lt;parent&gt;\r\n\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t&lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n\t\t&lt;version&gt;2.7.5&lt;/version&gt;\r\n\t\t&lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\r\n\t&lt;/parent&gt;\r\n\t&lt;groupId&gt;org.springframework.amqp.tutorials&lt;/groupId&gt;\r\n\t&lt;artifactId&gt;rabbitmq-amqp-tutorials&lt;/artifactId&gt;\r\n\t&lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\r\n\t&lt;name&gt;rabbitmq-amqp-tutorials&lt;/name&gt;\r\n\t&lt;description&gt;Demo project for Spring Boot&lt;/description&gt;\r\n\t&lt;properties&gt;\r\n\t\t&lt;java.version&gt;1.8&lt;/java.version&gt;\r\n\t&lt;/properties&gt;\r\n\t&lt;dependencies&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-amqp&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\r\n\t\t\t&lt;scope&gt;test&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.amqp&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-rabbit-test&lt;/artifactId&gt;\r\n\t\t\t&lt;scope&gt;test&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t&lt;/dependencies&gt;\r\n\r\n\t&lt;build&gt;\r\n\t\t&lt;plugins&gt;\r\n\t\t\t&lt;plugin&gt;\r\n\t\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\r\n\t\t\t&lt;/plugin&gt;\r\n\t\t&lt;/plugins&gt;\r\n\t&lt;/build&gt;\r\n\r\n&lt;/project&gt;\r\n\r\n```\r\n\r\n**EDIT:SOLUTION**\r\n\r\nAs pointed out by @Sanura Hettiarachchi there is a bug with the edition of intellij idea I was using, uninstalling and installing the latest version (Intellij Idea 2022.2.3 Community Edition) solved the problem. Now importing an existing project works nicely, no need to manually import modules.\r\n\r\n  [1]: https://i.stack.imgur.com/P41VH.png\r\n  [2]: https://i.stack.imgur.com/eKf02.png\r\n  [3]: https://i.stack.imgur.com/rOUvM.png\r\n  [4]: https://i.stack.imgur.com/W3BBU.png\r\n  [5]: https://i.stack.imgur.com/VQb4u.png\r\n  [6]: https://i.stack.imgur.com/CnahJ.png","title":"ComponentLookupException when importing java project into intellij Idea","body":"<p>I just download a spring boot project from <a href=\"https://start.spring.io/\" rel=\"nofollow noreferrer\">https://start.spring.io/</a> and imported it into intellij idea, then I choose import module selecting the pom.xml file but when I click on Apply I get the error:</p>\n<pre><code>java.lang.RuntimeException: java.lang.RuntimeException: org.codehaus.plexus.component.repository.exception.ComponentLookupException: com.google.inject.ProvisionException: Unable to provision, see the following errors:\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/P41VH.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/P41VH.png\" alt=\"enter image description here\" /></a></p>\n<p><a href=\"https://i.stack.imgur.com/eKf02.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/eKf02.png\" alt=\"enter image description here\" /></a></p>\n<p><a href=\"https://i.stack.imgur.com/rOUvM.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/rOUvM.png\" alt=\"enter image description here\" /></a></p>\n<p><a href=\"https://i.stack.imgur.com/W3BBU.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/W3BBU.png\" alt=\"enter image description here\" /></a></p>\n<p><a href=\"https://i.stack.imgur.com/VQb4u.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/VQb4u.png\" alt=\"enter image description here\" /></a></p>\n<p><a href=\"https://i.stack.imgur.com/CnahJ.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/CnahJ.png\" alt=\"enter image description here\" /></a></p>\n<p>Here's the pom.xml</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n    xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n    &lt;parent&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n        &lt;version&gt;2.7.5&lt;/version&gt;\n        &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\n    &lt;/parent&gt;\n    &lt;groupId&gt;org.springframework.amqp.tutorials&lt;/groupId&gt;\n    &lt;artifactId&gt;rabbitmq-amqp-tutorials&lt;/artifactId&gt;\n    &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n    &lt;name&gt;rabbitmq-amqp-tutorials&lt;/name&gt;\n    &lt;description&gt;Demo project for Spring Boot&lt;/description&gt;\n    &lt;properties&gt;\n        &lt;java.version&gt;1.8&lt;/java.version&gt;\n    &lt;/properties&gt;\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-amqp&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.amqp&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-rabbit-test&lt;/artifactId&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n\n    &lt;build&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n\n&lt;/project&gt;\n\n</code></pre>\n<p><strong>EDIT:SOLUTION</strong></p>\n<p>As pointed out by @Sanura Hettiarachchi there is a bug with the edition of intellij idea I was using, uninstalling and installing the latest version (Intellij Idea 2022.2.3 Community Edition) solved the problem. Now importing an existing project works nicely, no need to manually import modules.</p>\n"},{"tags":["java","hash"],"comments":[{"owner":{"account_id":93689,"reputation":415931,"user_id":256196,"accept_rate":77,"display_name":"Bohemian"},"score":0,"creation_date":1667319440,"post_id":74278671,"comment_id":131137494,"body_markdown":"You must rethink your entire approach: Using a random number (seeded or not) will not guarantee different results for every possible input.","body":"You must rethink your entire approach: Using a random number (seeded or not) will not guarantee different results for every possible input."},{"owner":{"account_id":26797184,"reputation":1,"user_id":20389746,"display_name":"Dipak K"},"score":0,"creation_date":1667319616,"post_id":74278671,"comment_id":131137561,"body_markdown":"I thought of one to one mapping between the numbers like change 1 to 4, 2 to 9 etc but that&#39;s something very basic. I am more interested in complex logic ,any thoughts will be highly appreciated","body":"I thought of one to one mapping between the numbers like change 1 to 4, 2 to 9 etc but that&#39;s something very basic. I am more interested in complex logic ,any thoughts will be highly appreciated"},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1667320024,"post_id":74278671,"comment_id":131137713,"body_markdown":"Why not transform as per the &#39;Caesar&#39; cipher?","body":"Why not transform as per the &#39;Caesar&#39; cipher?"},{"owner":{"account_id":93689,"reputation":415931,"user_id":256196,"accept_rate":77,"display_name":"Bohemian"},"score":0,"creation_date":1667320030,"post_id":74278671,"comment_id":131137717,"body_markdown":"I don&#39;t know what you are hoping to achieve. If it&#39;s a simple form of format preserving &quot;encryption&quot;, which is reversible, you should probably use a table as you suggest, perhaps ROT5 for each digit.","body":"I don&#39;t know what you are hoping to achieve. If it&#39;s a simple form of format preserving &quot;encryption&quot;, which is reversible, you should probably use a table as you suggest, perhaps ROT5 for each digit."}],"owner":{"account_id":26797184,"reputation":1,"user_id":20389746,"display_name":"Dipak K"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":38,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1667318837,"creation_date":1667318837,"question_id":74278671,"body_markdown":"Just after small help.\r\n\r\nIf a user input a single digit number, output should be single digit number.\r\nNo two unique ip number should result in same output\r\n\r\nHOwever, for my case ; i am getting same output (9) for two diff ip (4,5) when i tried for single digit number\r\n\r\nAlso, if the code is run multiple times; the output should always be same for same input\r\n\r\n\r\n```\r\npackage Try;\r\n\r\nimport java.util.Collections;\r\nimport java.util.Random;\r\n\r\npublic class Try1 {\r\n\r\n\tpublic static void main(String[] args) {\r\n\t\t// TODO Auto-generated method stub\r\n\t\tSystem.out.println(&quot;Output &quot; + transformNum(&quot;5&quot;));\r\n\t\t\r\n\t}\t\t\r\n\t\r\n\tprotected static long setSeed(String ip){\r\n\t\tlong hash=0;\r\n\t\tfor (char c : ip.toCharArray()) {\r\n\t\t\thash=31L*hash+c;\r\n\t\t}\r\n\t\treturn hash;\r\n\t}\r\n\t\r\n\tprotected static int transformNum(String ip) {\r\n\t\tint iplen=ip.length();\r\n\t\tint upperlmt=Integer.valueOf(String.join(&quot;&quot;, Collections.nCopies(iplen,&quot;9&quot;)))+1;\r\n\t\tint lowerlmt=Integer.valueOf(&quot;1&quot; + String.join(&quot;&quot;, Collections.nCopies(iplen-1,&quot;0&quot;)));\r\n\t\tRandom rand=new Random(setSeed(ip));\r\n\t\tint transformop = rand.nextInt(upperlmt - lowerlmt) + lowerlmt;\r\n\t\treturn transformop;\t\t\r\n\t}\r\n\r\n}\r\n```\r\n\r\n\r\n","title":"Java: Transform an input number of n length to diff output number of n length","body":"<p>Just after small help.</p>\n<p>If a user input a single digit number, output should be single digit number.\nNo two unique ip number should result in same output</p>\n<p>HOwever, for my case ; i am getting same output (9) for two diff ip (4,5) when i tried for single digit number</p>\n<p>Also, if the code is run multiple times; the output should always be same for same input</p>\n<pre><code>package Try;\n\nimport java.util.Collections;\nimport java.util.Random;\n\npublic class Try1 {\n\n    public static void main(String[] args) {\n        // TODO Auto-generated method stub\n        System.out.println(&quot;Output &quot; + transformNum(&quot;5&quot;));\n        \n    }       \n    \n    protected static long setSeed(String ip){\n        long hash=0;\n        for (char c : ip.toCharArray()) {\n            hash=31L*hash+c;\n        }\n        return hash;\n    }\n    \n    protected static int transformNum(String ip) {\n        int iplen=ip.length();\n        int upperlmt=Integer.valueOf(String.join(&quot;&quot;, Collections.nCopies(iplen,&quot;9&quot;)))+1;\n        int lowerlmt=Integer.valueOf(&quot;1&quot; + String.join(&quot;&quot;, Collections.nCopies(iplen-1,&quot;0&quot;)));\n        Random rand=new Random(setSeed(ip));\n        int transformop = rand.nextInt(upperlmt - lowerlmt) + lowerlmt;\n        return transformop;     \n    }\n\n}\n</code></pre>\n"},{"tags":["java","loops","for-loop","digits","charat"],"comments":[{"owner":{"account_id":1992310,"reputation":11172,"user_id":1786065,"accept_rate":91,"display_name":"Rogue"},"score":1,"creation_date":1667314819,"post_id":74277831,"comment_id":131135841,"body_markdown":"Show your attempt with the `for` loop, it would be a reasonable approach for this. However, I don&#39;t quite understand what you&#39;re attempting to do with this data (&quot;a char taking from digit of a number&quot; isn&#39;t very clear).","body":"Show your attempt with the <code>for</code> loop, it would be a reasonable approach for this. However, I don&#39;t quite understand what you&#39;re attempting to do with this data (&quot;a char taking from digit of a number&quot; isn&#39;t very clear)."},{"owner":{"account_id":26795925,"reputation":1,"user_id":20388675,"display_name":"Khadrok"},"score":0,"creation_date":1667318189,"post_id":74277831,"comment_id":131137062,"body_markdown":"My bad , its part of my hw actually.There are some inputs and ı need to write &quot;clean&quot; version that if first digit isnot 0 or 1 , the last digit must be changed.If its 0 ,it will be 1 or if its 1,it will be 0.If first digit is 0 or 1,nothing will be change.For that reasons,i thought , i have to define each digit to char.Actually i did it but its just for the one 2-digit numbers ı need to do for 6 2-digit numbers.Have a look.","body":"My bad , its part of my hw actually.There are some inputs and ı need to write &quot;clean&quot; version that if first digit isnot 0 or 1 , the last digit must be changed.If its 0 ,it will be 1 or if its 1,it will be 0.If first digit is 0 or 1,nothing will be change.For that reasons,i thought , i have to define each digit to char.Actually i did it but its just for the one 2-digit numbers ı need to do for 6 2-digit numbers.Have a look."},{"owner":{"account_id":1992310,"reputation":11172,"user_id":1786065,"accept_rate":91,"display_name":"Rogue"},"score":0,"creation_date":1667318248,"post_id":74277831,"comment_id":131137078,"body_markdown":"You can simply use `String#charAt` to evalulate those directly, no need for a variable.","body":"You can simply use <code>String#charAt</code> to evalulate those directly, no need for a variable."},{"owner":{"account_id":26795925,"reputation":1,"user_id":20388675,"display_name":"Khadrok"},"score":0,"creation_date":1667318671,"post_id":74277831,"comment_id":131137216,"body_markdown":"What do you think about the code ı wrote ?","body":"What do you think about the code ı wrote ?"}],"answers":[{"tags":[],"owner":{"account_id":465573,"reputation":192694,"user_id":869736,"accept_rate":82,"display_name":"Louis Wasserman"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1667315303,"creation_date":1667314850,"answer_id":74277874,"question_id":74277831,"body_markdown":"You can&#39;t do this with variables named `a`, `b`, `c`, etc.  You could only do it with an array, where you could index them by number, e.g. `char[] chars`, and use `chars[0]` instead of `a`, `chars[25]` instead of `z`, and so on.\r\n\r\nTo do that, you can just do `char[] chars = num.toCharArray()`, or even skip the array entirely and keep using `charAt`.","title":"How can ı define a char taking from digit of a number in Java?","body":"<p>You can't do this with variables named <code>a</code>, <code>b</code>, <code>c</code>, etc.  You could only do it with an array, where you could index them by number, e.g. <code>char[] chars</code>, and use <code>chars[0]</code> instead of <code>a</code>, <code>chars[25]</code> instead of <code>z</code>, and so on.</p>\n<p>To do that, you can just do <code>char[] chars = num.toCharArray()</code>, or even skip the array entirely and keep using <code>charAt</code>.</p>\n"}],"owner":{"account_id":26795925,"reputation":1,"user_id":20388675,"display_name":"Khadrok"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":63,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1667318552,"creation_date":1667314618,"question_id":74277831,"body_markdown":"```\r\n\r\nScanner s = new Scanner(System.in);\r\n        String num = s.next();\r\n\r\n        char a = num.charAt(0);\r\n        char b = num.charAt(1);\r\n        char c = num.charAt(2);\r\n        char d = num.charAt(3);\r\n```\r\n\r\nFor example , we can do it like this but i will enter long values ​​for input so how can i write it like loop or easier rather than write 20 line as ı wrote ?\r\n\r\nI thought , i can write it using &quot;for&quot; but i couldn&#39;t.I am new to java so if you can solve it using basic methods or codes and explain so , i would  be grateful.\r\n \r\n\r\n    Scanner inp = new Scanner(System.in);\r\n        System.out.println(&quot;Enter the number&quot;);\r\n        String num = inp.next();\r\n\r\n        char a = num.charAt(0);\r\n        char b = num.charAt(1);\r\n        char c = num.charAt(2);\r\n        char d = num.charAt(3);\r\n        char e = num.charAt(4);\r\n        char f = num.charAt(5);\r\n        char g = num.charAt(6);\r\n        char h = num.charAt(7);\r\n\r\n        if (a &lt; &#39;2&#39;) {\r\n            System.out.print(&quot;0&quot; + &quot;&quot; + b + &quot;&quot; + c + &quot;&quot; + d + &quot;&quot; + e + &quot;&quot; + f + &quot;&quot; + g + &quot;&quot; + h);\r\n        } else if (a &gt; &#39;2&#39; &amp; h == &#39;0&#39;) {\r\n            System.out.print(&quot;0&quot; + &quot;&quot; + b + &quot;&quot; + c + &quot;&quot; + d + &quot;&quot; + e + &quot;&quot; + f + &quot;&quot; + g + &quot;&quot; + &quot;1&quot;);\r\n        } else if (a &gt; &#39;2&#39; &amp;&amp; h == &#39;1&#39;) {\r\n            System.out.print(&quot;0&quot; + &quot;&quot; + b + &quot;&quot; + c + &quot;&quot; + d + &quot;&quot; + e + &quot;&quot; + f + &quot;&quot; + g + &quot;&quot; + &quot;0&quot;);\r\n        }\r\n\r\n  \r\n\r\n\r\n As well,Im trying for easier way of that.\r\n\r\nThanks in advance.","title":"How can ı define a char taking from digit of a number in Java?","body":"<pre><code>\nScanner s = new Scanner(System.in);\n        String num = s.next();\n\n        char a = num.charAt(0);\n        char b = num.charAt(1);\n        char c = num.charAt(2);\n        char d = num.charAt(3);\n</code></pre>\n<p>For example , we can do it like this but i will enter long values ​​for input so how can i write it like loop or easier rather than write 20 line as ı wrote ?</p>\n<p>I thought , i can write it using &quot;for&quot; but i couldn't.I am new to java so if you can solve it using basic methods or codes and explain so , i would  be grateful.</p>\n<pre><code>Scanner inp = new Scanner(System.in);\n    System.out.println(&quot;Enter the number&quot;);\n    String num = inp.next();\n\n    char a = num.charAt(0);\n    char b = num.charAt(1);\n    char c = num.charAt(2);\n    char d = num.charAt(3);\n    char e = num.charAt(4);\n    char f = num.charAt(5);\n    char g = num.charAt(6);\n    char h = num.charAt(7);\n\n    if (a &lt; '2') {\n        System.out.print(&quot;0&quot; + &quot;&quot; + b + &quot;&quot; + c + &quot;&quot; + d + &quot;&quot; + e + &quot;&quot; + f + &quot;&quot; + g + &quot;&quot; + h);\n    } else if (a &gt; '2' &amp; h == '0') {\n        System.out.print(&quot;0&quot; + &quot;&quot; + b + &quot;&quot; + c + &quot;&quot; + d + &quot;&quot; + e + &quot;&quot; + f + &quot;&quot; + g + &quot;&quot; + &quot;1&quot;);\n    } else if (a &gt; '2' &amp;&amp; h == '1') {\n        System.out.print(&quot;0&quot; + &quot;&quot; + b + &quot;&quot; + c + &quot;&quot; + d + &quot;&quot; + e + &quot;&quot; + f + &quot;&quot; + g + &quot;&quot; + &quot;0&quot;);\n    }\n</code></pre>\n<p>As well,Im trying for easier way of that.</p>\n<p>Thanks in advance.</p>\n"},{"tags":["java","neo4j"],"answers":[{"tags":[],"owner":{"account_id":321836,"reputation":1463,"user_id":640898,"accept_rate":50,"display_name":"RaduK"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1398411417,"creation_date":1398411417,"answer_id":23286937,"question_id":23281888,"body_markdown":"The ids are automatically assigned by Neo4j, you cannot change this. Try using a property on the node if this is what you need. \r\n\r\n      newno[i].setProperty(&quot;internal_id&quot;, i);","title":"How to set the node ID other than setProperty() in neo4j?","body":"<p>The ids are automatically assigned by Neo4j, you cannot change this. Try using a property on the node if this is what you need. </p>\n\n<pre><code>  newno[i].setProperty(\"internal_id\", i);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2057129,"reputation":7827,"user_id":1834562,"accept_rate":81,"display_name":"Rash"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1423991817,"creation_date":1423991817,"answer_id":28524651,"question_id":23281888,"body_markdown":"As pointed by @RaduK, neo4j sets the id of the node itself and does not allows the user to override this behaviour. Maybe something that they might do in future. However, if you are considering to use the neo4j generated id in your system, neo4j issued a warning on their page.\r\n\r\n&gt; A node&#39;s id is unique, but note the following: Neo4j reuses its\r\n&gt; internal ids when nodes and relationships are deleted, which means\r\n&gt; it&#39;s bad practice to refer to them this way. Instead, use application\r\n&gt; generated ids.\r\n\r\nSo don&#39;t use the neo4j&#39;s id in your system.\r\n\r\nThat being said, you are mostly concerned about the fact that using property every time will result in delays. With Neo4J 2.x, they give you the option to set an index on your property so that the traversal is fast. Here is how you do that. Inside your code where you have the object of GraphDatabaseService, insert this piece of code:\r\n\r\n    try(Transaction transaction = graphDatabaseService.beginTx())\r\n    \t\t{\r\n    \t\t\tSchema schema = graphDatabaseService.schema();\r\n    \t\t\tschema.indexFor(DynamicLabel.label(&quot;User&quot;)).on(&quot;internal_id&quot;).create();\r\n    \t\t\t\r\n    \t\t\ttransaction.success();\r\n    \t\t}\r\n\r\nThis code will tell neo4j that from now on, you have to make and maintain index on all nodes that are of type &quot;User&quot; on the property &quot;internal_id&quot;.\r\n\r\nMoreover, neo4j has an internal caching system which people usually refer to as warm cache. It means that your query will only take time the first time it runs. From then onwards, if you try the same query repeatedly, the query will be blazing fast.","title":"How to set the node ID other than setProperty() in neo4j?","body":"<p>As pointed by @RaduK, neo4j sets the id of the node itself and does not allows the user to override this behaviour. Maybe something that they might do in future. However, if you are considering to use the neo4j generated id in your system, neo4j issued a warning on their page.</p>\n\n<blockquote>\n  <p>A node's id is unique, but note the following: Neo4j reuses its\n  internal ids when nodes and relationships are deleted, which means\n  it's bad practice to refer to them this way. Instead, use application\n  generated ids.</p>\n</blockquote>\n\n<p>So don't use the neo4j's id in your system.</p>\n\n<p>That being said, you are mostly concerned about the fact that using property every time will result in delays. With Neo4J 2.x, they give you the option to set an index on your property so that the traversal is fast. Here is how you do that. Inside your code where you have the object of GraphDatabaseService, insert this piece of code:</p>\n\n<pre><code>try(Transaction transaction = graphDatabaseService.beginTx())\n        {\n            Schema schema = graphDatabaseService.schema();\n            schema.indexFor(DynamicLabel.label(\"User\")).on(\"internal_id\").create();\n\n            transaction.success();\n        }\n</code></pre>\n\n<p>This code will tell neo4j that from now on, you have to make and maintain index on all nodes that are of type \"User\" on the property \"internal_id\".</p>\n\n<p>Moreover, neo4j has an internal caching system which people usually refer to as warm cache. It means that your query will only take time the first time it runs. From then onwards, if you try the same query repeatedly, the query will be blazing fast.</p>\n"}],"owner":{"account_id":3003352,"reputation":245,"user_id":3382017,"accept_rate":45,"display_name":"user3382017"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":6156,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1667318505,"creation_date":1398383613,"question_id":23281888,"body_markdown":"I want to set the node ID like 0,1,2,3,.... instead of `setProperty()`.\r\n\r\n```java\r\nNode[] newno = new Node[265214];\r\nfor (int i = 0; i &lt; newno.length; i++) {\r\n     newno[i] = db.createNode();\r\n     System.out.println(newno[i].getId());\r\n}\r\n```\r\n\r\nIt shows the following big ID number:\r\n\r\n    996660\r\n    996661\r\n    996662\r\n    996663\r\n    996656\r\n    996657\r\n    996658\r\n    996659\r\n    996668\r\n    996669\r\n    996670\r\n\r\nWhile I want to make node for example the ID of `newno[i]` is just `i`. For large data sets, if every cycle calls `getProperty()` it will slow down execution. What is a more efficient method of accomplishing this?","title":"How to set the node ID other than setProperty() in neo4j?","body":"<p>I want to set the node ID like 0,1,2,3,.... instead of <code>setProperty()</code>.</p>\n<pre class=\"lang-java prettyprint-override\"><code>Node[] newno = new Node[265214];\nfor (int i = 0; i &lt; newno.length; i++) {\n     newno[i] = db.createNode();\n     System.out.println(newno[i].getId());\n}\n</code></pre>\n<p>It shows the following big ID number:</p>\n<pre><code>996660\n996661\n996662\n996663\n996656\n996657\n996658\n996659\n996668\n996669\n996670\n</code></pre>\n<p>While I want to make node for example the ID of <code>newno[i]</code> is just <code>i</code>. For large data sets, if every cycle calls <code>getProperty()</code> it will slow down execution. What is a more efficient method of accomplishing this?</p>\n"},{"tags":["java","arrays","multidimensional-array"],"comments":[{"owner":{"account_id":18911549,"reputation":600,"user_id":13797513,"display_name":"chptr-one"},"score":2,"creation_date":1667316784,"post_id":74278235,"comment_id":131136519,"body_markdown":"Hmmm... `grid.length`?","body":"Hmmm... <code>grid.length</code>?"},{"owner":{"account_id":1992310,"reputation":11172,"user_id":1786065,"accept_rate":91,"display_name":"Rogue"},"score":0,"creation_date":1667316845,"post_id":74278235,"comment_id":131136540,"body_markdown":"`grid.length` as @chptr-one suggested, and you can be extra-safe and iterate the nested arrays to ensure `grid[i].length` matches across the board.","body":"<code>grid.length</code> as @chptr-one suggested, and you can be extra-safe and iterate the nested arrays to ensure <code>grid[i].length</code> matches across the board."},{"owner":{"account_id":23959668,"reputation":26587,"user_id":17949945,"display_name":"Alexander Ivanchenko"},"score":0,"creation_date":1667319516,"post_id":74278235,"comment_id":131137521,"body_markdown":"Every question on StackOverflow is expected to demonstrate an effort, it doesn&#39;t matter whether you&#39;re a beginner or experienced developer.  See [How do I ask a good question?](https://stackoverflow.com/help/how-to-ask) and [Why is &quot;Can someone help me?&quot; not an actual question?](https://meta.stackoverflow.com/questions/284236/why-is-can-someone-help-me-not-an-actual-question)","body":"Every question on StackOverflow is expected to demonstrate an effort, it doesn&#39;t matter whether you&#39;re a beginner or experienced developer.  See <a href=\"https://stackoverflow.com/help/how-to-ask\">How do I ask a good question?</a> and <a href=\"https://meta.stackoverflow.com/questions/284236/why-is-can-someone-help-me-not-an-actual-question\">Why is &quot;Can someone help me?&quot; not an actual question?</a>"}],"answers":[{"tags":[],"owner":{"account_id":26789465,"reputation":1,"user_id":20383105,"display_name":"Eric Last"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1667317055,"creation_date":1667317055,"answer_id":74278302,"question_id":74278235,"body_markdown":"Understand matrices in Java more as an array of arrays. `grid` is an Array and will have a length, `grid.length`. Each entry of the grid is an Array with a length, so `grid[0].length` is the length of the first column. Assuming that every entry is of the same length, your matrix size will be `grid.length` x `grid[0].length`","title":"How to navigate thorugh a matrix without knowing its size","body":"<p>Understand matrices in Java more as an array of arrays. <code>grid</code> is an Array and will have a length, <code>grid.length</code>. Each entry of the grid is an Array with a length, so <code>grid[0].length</code> is the length of the first column. Assuming that every entry is of the same length, your matrix size will be <code>grid.length</code> x <code>grid[0].length</code></p>\n"},{"tags":[],"owner":{"account_id":26796759,"reputation":134,"user_id":20389385,"display_name":"Tarun Kumar Sao"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1667317794,"creation_date":1667317238,"answer_id":74278341,"question_id":74278235,"body_markdown":"If you are provided with an array and don&#39;t know its size, then you can also use its length with the Array property which is (&quot;array-Variable&quot;).length and it will give you the length of the array. If you are working with a 2-D array then for the no. of rows you can use (&quot;matrix-Variable&quot;).length and for the number of columns, you have to check the length of each row or 1st row by using (&quot;matrix-Variable&quot;)[i].length where i can be either 0 or any number given the number is in range of the total number of rows.","title":"How to navigate thorugh a matrix without knowing its size","body":"<p>If you are provided with an array and don't know its size, then you can also use its length with the Array property which is (&quot;array-Variable&quot;).length and it will give you the length of the array. If you are working with a 2-D array then for the no. of rows you can use (&quot;matrix-Variable&quot;).length and for the number of columns, you have to check the length of each row or 1st row by using (&quot;matrix-Variable&quot;)[i].length where i can be either 0 or any number given the number is in range of the total number of rows.</p>\n"}],"owner":{"account_id":25589575,"reputation":21,"user_id":19366635,"display_name":"Thay"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":101,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":2,"score":-1,"last_activity_date":1667317794,"creation_date":1667316687,"question_id":74278235,"body_markdown":"Let&#39;s say I have a main class in java that receives a matrix[][], like: `\r\n```\r\npublic main[] findBall(int[][] grid) {\r\n        \r\n    }\r\n```\r\n`\r\nAnd then the user enters the imput: \r\n```\r\n[[1,1,1,-1,-1],[1,1,1,-1,-1],[-1,-1,-1,1,1],[1,1,1,1,-1],[-1,-1,-1,-1,-1]]\r\n```\r\nI know it&#39;s a 5x5 but only because I saw what the user typed, how do I get the matrix size-&gt;(5x5) or any other size that they may type? or is there another way to navigate through it without knowing the size? \r\n\r\nI tried nothing, I&#39;m a beginner in Java so bear with me. ","title":"How to navigate thorugh a matrix without knowing its size","body":"<p>Let's say I have a main class in java that receives a matrix[][], like: `</p>\n<pre><code>public main[] findBall(int[][] grid) {\n        \n    }\n</code></pre>\n<p>`\nAnd then the user enters the imput:</p>\n<pre><code>[[1,1,1,-1,-1],[1,1,1,-1,-1],[-1,-1,-1,1,1],[1,1,1,1,-1],[-1,-1,-1,-1,-1]]\n</code></pre>\n<p>I know it's a 5x5 but only because I saw what the user typed, how do I get the matrix size-&gt;(5x5) or any other size that they may type? or is there another way to navigate through it without knowing the size?</p>\n<p>I tried nothing, I'm a beginner in Java so bear with me.</p>\n"},{"tags":["java","spring-boot","oop","lombok","spring-mongodb"],"comments":[{"owner":{"account_id":23667337,"reputation":1467,"user_id":17694626,"display_name":"Cheng Thao"},"score":0,"creation_date":1667316857,"post_id":74278220,"comment_id":131136546,"body_markdown":"where will surrogateId come from?","body":"where will surrogateId come from?"},{"owner":{"account_id":785560,"reputation":14879,"user_id":845414,"display_name":"Johannes Kuhn"},"score":0,"creation_date":1667316870,"post_id":74278220,"comment_id":131136552,"body_markdown":"Only provide a constructor that initializes the property.","body":"Only provide a constructor that initializes the property."},{"owner":{"account_id":24354665,"reputation":119,"user_id":18290052,"display_name":"Moussa ELaQ"},"score":0,"creation_date":1667317554,"post_id":74278220,"comment_id":131136805,"body_markdown":"@ChengThao surrogateId comes from a subclass, I want to provide it when I&#39;m creating the subclass or it can be static which means for a specific subclass I know the surrogateID to pass","body":"@ChengThao surrogateId comes from a subclass, I want to provide it when I&#39;m creating the subclass or it can be static which means for a specific subclass I know the surrogateID to pass"},{"owner":{"account_id":23667337,"reputation":1467,"user_id":17694626,"display_name":"Cheng Thao"},"score":0,"creation_date":1667317867,"post_id":74278220,"comment_id":131136924,"body_markdown":"Where does the subclass get surrogateId?  Through it&#39;s constructor?","body":"Where does the subclass get surrogateId?  Through it&#39;s constructor?"},{"owner":{"account_id":24354665,"reputation":119,"user_id":18290052,"display_name":"Moussa ELaQ"},"score":0,"creation_date":1667318021,"post_id":74278220,"comment_id":131136993,"body_markdown":"@ChengThao it&#39;s anothor field in the subclass that I want to make it unique between all subclasses. for example SubClass1 has a property  called installedResourceId that I want to map with the surrogateId , SubClass2 has property called installedOfferId that I want to map with surrogate in order to unify the name In the super class to perform operation on the surrogateId whatever the subclass id is","body":"@ChengThao it&#39;s anothor field in the subclass that I want to make it unique between all subclasses. for example SubClass1 has a property  called installedResourceId that I want to map with the surrogateId , SubClass2 has property called installedOfferId that I want to map with surrogate in order to unify the name In the super class to perform operation on the surrogateId whatever the subclass id is"},{"owner":{"account_id":23667337,"reputation":1467,"user_id":17694626,"display_name":"Cheng Thao"},"score":0,"creation_date":1667323291,"post_id":74278220,"comment_id":131138862,"body_markdown":"Where do SubClass1 and SubClass2 their their IDs?  Are they auto generated within the subclasses?","body":"Where do SubClass1 and SubClass2 their their IDs?  Are they auto generated within the subclasses?"}],"answers":[{"tags":[],"owner":{"account_id":401843,"reputation":89788,"user_id":768644,"display_name":"rzwitserloot"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1667317756,"creation_date":1667317756,"answer_id":74278455,"question_id":74278220,"body_markdown":"Lombok does not support generation of code that takes into account properties of the supertype. That&#39;s because doing that is way more complicated than it might sound, see [this wiki post on the lombok site](https://github.com/projectlombok/lombok/wiki/LOMBOK-CONCEPT:-Resolution) for details on why.\r\n\r\nHence, what you want (I want subclasses to set this property but also maximum boilerplate busting) is not currently possible and is unlikely to be possible in the near future.\r\n\r\nBest you can do is make the field final, use `@RequiredArgsConstructor` on the superclass, and handwrite your subclass&#39;s constructors.\r\n","title":"force sub classes to initialize a property of the super class","body":"<p>Lombok does not support generation of code that takes into account properties of the supertype. That's because doing that is way more complicated than it might sound, see <a href=\"https://github.com/projectlombok/lombok/wiki/LOMBOK-CONCEPT:-Resolution\" rel=\"nofollow noreferrer\">this wiki post on the lombok site</a> for details on why.</p>\n<p>Hence, what you want (I want subclasses to set this property but also maximum boilerplate busting) is not currently possible and is unlikely to be possible in the near future.</p>\n<p>Best you can do is make the field final, use <code>@RequiredArgsConstructor</code> on the superclass, and handwrite your subclass's constructors.</p>\n"}],"owner":{"account_id":24354665,"reputation":119,"user_id":18290052,"display_name":"Moussa ELaQ"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":61,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1667317756,"creation_date":1667316637,"question_id":74278220,"body_markdown":"I have an abstract calss Report : \r\n```java\r\n@NoArgsConstructor\r\n@Data\r\npublic abstract class Report {\r\n    private String surrogateId;\r\n.\r\n.\r\n.\r\n```\r\nand I need to force all subclasses to fill this surrogateId property. (to have a compilation error if the subclass doesn&#39;t fill the property)\r\n\r\n```java\r\n@Data\r\n@Document(collection = &quot;active_report&quot;)\r\n@NoArgsConstructor\r\npublic class ReportActiveDevicesNotLinkedWithIO extends Report {\r\n    private String active;\r\n.\r\n.\r\n.\r\n}\r\n\r\n```\r\n\r\n\r\n\r\nI&#39;ve tried to use final keyword that enforce me to introduce the value of this property in the constructor, \r\n**but** i&#39;ve to generate the constructor manually instead of using Lombok, so many boilerplate code.\r\nis there a way to acheive the same expectation without generating the construcor manually.","title":"force sub classes to initialize a property of the super class","body":"<p>I have an abstract calss Report :</p>\n<pre class=\"lang-java prettyprint-override\"><code>@NoArgsConstructor\n@Data\npublic abstract class Report {\n    private String surrogateId;\n.\n.\n.\n</code></pre>\n<p>and I need to force all subclasses to fill this surrogateId property. (to have a compilation error if the subclass doesn't fill the property)</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Data\n@Document(collection = &quot;active_report&quot;)\n@NoArgsConstructor\npublic class ReportActiveDevicesNotLinkedWithIO extends Report {\n    private String active;\n.\n.\n.\n}\n\n</code></pre>\n<p>I've tried to use final keyword that enforce me to introduce the value of this property in the constructor,\n<strong>but</strong> i've to generate the constructor manually instead of using Lombok, so many boilerplate code.\nis there a way to acheive the same expectation without generating the construcor manually.</p>\n"},{"tags":["java","string","performance","char","iteration"],"comments":[{"owner":{"account_id":134022,"reputation":717183,"user_id":335858,"accept_rate":81,"display_name":"Sergey Kalinichenko"},"score":24,"creation_date":1326801916,"post_id":8894258,"comment_id":11121371,"body_markdown":"What happened to `for (char c : chars)`?","body":"What happened to <code>for (char c : chars)</code>?"},{"owner":{"account_id":442960,"reputation":458,"user_id":833898,"accept_rate":100,"display_name":"Keagan Ladds"},"score":0,"creation_date":1326801963,"post_id":8894258,"comment_id":11121389,"body_markdown":"The first one should be faster, and anyway a string a char array, theoretically.","body":"The first one should be faster, and anyway a string a char array, theoretically."},{"owner":{"account_id":69149,"reputation":233552,"user_id":201359,"accept_rate":100,"display_name":"&#211;scar L&#243;pez"},"score":2,"creation_date":1326808417,"post_id":8894258,"comment_id":11123683,"body_markdown":"The question doesn&#39;t ask for the performance of using iterators, foreach. What I&#39;d like to know is if the cost of repeatedly calling `charAt` ends up being either less than or greater than the cost of performing a single call to `toCharArray`","body":"The question doesn&#39;t ask for the performance of using iterators, foreach. What I&#39;d like to know is if the cost of repeatedly calling <code>charAt</code> ends up being either less than or greater than the cost of performing a single call to <code>toCharArray</code>"},{"owner":{"account_id":69149,"reputation":233552,"user_id":201359,"accept_rate":100,"display_name":"&#211;scar L&#243;pez"},"score":0,"creation_date":1326808547,"post_id":8894258,"comment_id":11123733,"body_markdown":"@dasblinkenlight the second form in my question is equivalent to `for (char c : chars)`","body":"@dasblinkenlight the second form in my question is equivalent to <code>for (char c : chars)</code>"},{"owner":{"account_id":540681,"reputation":934,"user_id":908961,"accept_rate":75,"display_name":"bdrx"},"score":1,"creation_date":1410493756,"post_id":8894258,"comment_id":40356298,"body_markdown":"Has anyone done analysis with [StringCharacterIterator](http://docs.oracle.com/javase/7/docs/api/java/text/StringCharacterIterator.html)?","body":"Has anyone done analysis with <a href=\"http://docs.oracle.com/javase/7/docs/api/java/text/StringCharacterIterator.html\" rel=\"nofollow noreferrer\">StringCharacterIterator</a>?"}],"answers":[{"tags":[],"owner":{"account_id":138790,"reputation":61721,"user_id":343955,"accept_rate":85,"display_name":"adarshr"},"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1326802655,"creation_date":1326802162,"answer_id":8894348,"question_id":8894258,"body_markdown":"The first one using `str.charAt` should be faster.\r\n\r\nIf you dig inside the source code of `String` class, we can see that `charAt` is implemented as follows:\r\n\r\n    public char charAt(int index) {\r\n        if ((index &lt; 0) || (index &gt;= count)) {\r\n            throw new StringIndexOutOfBoundsException(index);\r\n        }\r\n        return value[index + offset];\r\n    }\r\n\r\nHere, all it does is index an array and return the value.\r\n\r\nNow, if we see the implementation of `toCharArray`, we will find the below:\r\n\r\n    public char[] toCharArray() {\r\n        char result[] = new char[count];\r\n        getChars(0, count, result, 0);\r\n        return result;\r\n    }\r\n\r\n    public void getChars(int srcBegin, int srcEnd, char dst[], int dstBegin) {\r\n        if (srcBegin &lt; 0) {\r\n            throw new StringIndexOutOfBoundsException(srcBegin);\r\n        }\r\n        if (srcEnd &gt; count) {\r\n            throw new StringIndexOutOfBoundsException(srcEnd);\r\n        }\r\n        if (srcBegin &gt; srcEnd) {\r\n            throw new StringIndexOutOfBoundsException(srcEnd - srcBegin);\r\n        }\r\n        System.arraycopy(value, offset + srcBegin, dst, dstBegin,\r\n             srcEnd - srcBegin);\r\n    }\r\n\r\nAs you see, it is doing a `System.arraycopy` which is definitely going to be a tad slower than not doing it.","title":"Fastest way to iterate over all the chars in a String","body":"<p>The first one using <code>str.charAt</code> should be faster.</p>\n\n<p>If you dig inside the source code of <code>String</code> class, we can see that <code>charAt</code> is implemented as follows:</p>\n\n<pre><code>public char charAt(int index) {\n    if ((index &lt; 0) || (index &gt;= count)) {\n        throw new StringIndexOutOfBoundsException(index);\n    }\n    return value[index + offset];\n}\n</code></pre>\n\n<p>Here, all it does is index an array and return the value.</p>\n\n<p>Now, if we see the implementation of <code>toCharArray</code>, we will find the below:</p>\n\n<pre><code>public char[] toCharArray() {\n    char result[] = new char[count];\n    getChars(0, count, result, 0);\n    return result;\n}\n\npublic void getChars(int srcBegin, int srcEnd, char dst[], int dstBegin) {\n    if (srcBegin &lt; 0) {\n        throw new StringIndexOutOfBoundsException(srcBegin);\n    }\n    if (srcEnd &gt; count) {\n        throw new StringIndexOutOfBoundsException(srcEnd);\n    }\n    if (srcBegin &gt; srcEnd) {\n        throw new StringIndexOutOfBoundsException(srcEnd - srcBegin);\n    }\n    System.arraycopy(value, offset + srcBegin, dst, dstBegin,\n         srcEnd - srcBegin);\n}\n</code></pre>\n\n<p>As you see, it is doing a <code>System.arraycopy</code> which is definitely going to be a tad slower than not doing it.</p>\n"},{"tags":[],"owner":{"account_id":277416,"reputation":681848,"user_id":571407,"accept_rate":100,"display_name":"JB Nizet"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1326802178,"creation_date":1326802178,"answer_id":8894354,"question_id":8894258,"body_markdown":"The second one causes a new char array to be created, and all chars from the String to be copied to this new char array, so I would guess that the first one is faster (and less memory-hungry).","title":"Fastest way to iterate over all the chars in a String","body":"<p>The second one causes a new char array to be created, and all chars from the String to be copied to this new char array, so I would guess that the first one is faster (and less memory-hungry).</p>\n"},{"tags":[],"owner":{"account_id":77857,"reputation":12130,"user_id":221951,"accept_rate":47,"display_name":"Piotr Gwiazda"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1326884840,"creation_date":1326802193,"answer_id":8894356,"question_id":8894258,"body_markdown":"Looks like niether is faster or slower\r\n\r\n\r\n\t\tpublic static void main(String arguments[]) {\r\n\t\t\t\r\n\t\t\t\r\n\t\t\t//Build a long string\r\n\t\t\tStringBuilder sb = new StringBuilder();\r\n\t\t\tfor(int j = 0; j &lt; 10000; j++) {\r\n\t\t\t\tsb.append(&quot;a really, really long string&quot;);\r\n\t\t\t}\r\n\t\t\tString str = sb.toString();\r\n\t\t\tfor (int testscount = 0; testscount &lt; 10; testscount ++) {\r\n\t\t\t\t\r\n\t\t\t\r\n\t\t\t\t//Test 1\r\n\t\t\t\tlong start = System.currentTimeMillis();\r\n\t\t\t\tfor(int c = 0; c &lt; 10000000; c++) {\r\n\t\t\t\t\tfor (int i = 0, n = str.length(); i &lt; n; i++) {\r\n\t\t\t\t\t    char chr = str.charAt(i);\r\n\t\t\t\t\t    doSomethingWithChar(chr);//To trick JIT optimistaion\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tSystem.out.println(&quot;1: &quot; + (System.currentTimeMillis() - start));\r\n\t\t\t\t\r\n\t\t\t\t//Test 2\r\n\t\t\t\tstart = System.currentTimeMillis();\r\n\t\t\t\tchar[] chars = str.toCharArray();\r\n\t\t\t\tfor(int c = 0; c &lt; 10000000; c++) {\r\n\t\t\t\t\tfor (int i = 0, n = chars.length; i &lt; n; i++) {\r\n\t\t\t\t\t    char chr = chars[i];\r\n\t\t\t\t\t    doSomethingWithChar(chr);//To trick JIT optimistaion\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tSystem.out.println(&quot;2: &quot; + (System.currentTimeMillis() - start));\r\n\t\t\t\tSystem.out.println();\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t\r\n\t\t}\r\n\t\r\n\t\t\r\n\t\tpublic static void doSomethingWithChar(char chr) {\r\n\t\t\tint newInt = chr &lt;&lt; 2;\r\n\t\t}\r\n\r\n\r\nFor long strings I&#39;ll chose the first one. Why copy around long strings?\r\nDocumentations says:\r\n&gt; public char[] toCharArray()\r\n&gt; Converts this string to a new character array. \r\n&gt; \r\n&gt; Returns:\r\n&gt; a newly allocated character array whose length is the length of this string and whose contents are initialized to contain the character sequence represented by this string.\r\n\r\n**//Edit 1** \r\n\r\nI&#39;ve changed the test to trick JIT optimisation.\r\n\r\n**//Edit 2**\r\n\r\nRepeat test 10 times to let JVM warm up.\r\n\r\n**//Edit 3**\r\n\r\nConclusions:\r\n\r\nFirst of all `str.toCharArray();` copies entire string in memory. It can be memory consuming for long strings. Method `String.charAt( )` looks up char in char array inside String class checking index before.\r\nIt looks like for short enough Strings first method (i.e. `chatAt` method) is a bit slower due to this index check. But if the String is long enough, copying whole char array gets slower, and the first method is faster. The longer the string is, the slower `toCharArray` performs. Try to change limit in `for(int j = 0; j &lt; 10000; j++)` loop to see it.\r\nIf we let JVM warm up code runs faster, but proportions are the same.\r\n\r\nAfter all it&#39;s just micro-optimisation.","title":"Fastest way to iterate over all the chars in a String","body":"<p>Looks like niether is faster or slower</p>\n\n<pre><code>    public static void main(String arguments[]) {\n\n\n        //Build a long string\n        StringBuilder sb = new StringBuilder();\n        for(int j = 0; j &lt; 10000; j++) {\n            sb.append(\"a really, really long string\");\n        }\n        String str = sb.toString();\n        for (int testscount = 0; testscount &lt; 10; testscount ++) {\n\n\n            //Test 1\n            long start = System.currentTimeMillis();\n            for(int c = 0; c &lt; 10000000; c++) {\n                for (int i = 0, n = str.length(); i &lt; n; i++) {\n                    char chr = str.charAt(i);\n                    doSomethingWithChar(chr);//To trick JIT optimistaion\n                }\n            }\n\n            System.out.println(\"1: \" + (System.currentTimeMillis() - start));\n\n            //Test 2\n            start = System.currentTimeMillis();\n            char[] chars = str.toCharArray();\n            for(int c = 0; c &lt; 10000000; c++) {\n                for (int i = 0, n = chars.length; i &lt; n; i++) {\n                    char chr = chars[i];\n                    doSomethingWithChar(chr);//To trick JIT optimistaion\n                }\n            }\n            System.out.println(\"2: \" + (System.currentTimeMillis() - start));\n            System.out.println();\n        }\n\n\n    }\n\n\n    public static void doSomethingWithChar(char chr) {\n        int newInt = chr &lt;&lt; 2;\n    }\n</code></pre>\n\n<p>For long strings I'll chose the first one. Why copy around long strings?\nDocumentations says:</p>\n\n<blockquote>\n  <p>public char[] toCharArray()\n  Converts this string to a new character array. </p>\n  \n  <p>Returns:\n  a newly allocated character array whose length is the length of this string and whose contents are initialized to contain the character sequence represented by this string.</p>\n</blockquote>\n\n<p><strong>//Edit 1</strong> </p>\n\n<p>I've changed the test to trick JIT optimisation.</p>\n\n<p><strong>//Edit 2</strong></p>\n\n<p>Repeat test 10 times to let JVM warm up.</p>\n\n<p><strong>//Edit 3</strong></p>\n\n<p>Conclusions:</p>\n\n<p>First of all <code>str.toCharArray();</code> copies entire string in memory. It can be memory consuming for long strings. Method <code>String.charAt( )</code> looks up char in char array inside String class checking index before.\nIt looks like for short enough Strings first method (i.e. <code>chatAt</code> method) is a bit slower due to this index check. But if the String is long enough, copying whole char array gets slower, and the first method is faster. The longer the string is, the slower <code>toCharArray</code> performs. Try to change limit in <code>for(int j = 0; j &lt; 10000; j++)</code> loop to see it.\nIf we let JVM warm up code runs faster, but proportions are the same.</p>\n\n<p>After all it's just micro-optimisation.</p>\n"},{"tags":[],"owner":{"account_id":91502,"reputation":88301,"user_id":251173,"accept_rate":86,"display_name":"Buhake Sindi"},"down_vote_count":3,"up_vote_count":18,"is_accepted":false,"score":15,"last_activity_date":1326804525,"creation_date":1326802310,"answer_id":8894384,"question_id":8894258,"body_markdown":"This is just micro-optimisation that you shouldn&#39;t worry about.\r\n\r\n    char[] chars = str.toCharArray();\r\n\r\nreturns you a copy of `str` character arrays (in JDK, it returns a copy of characters by calling `System.arrayCopy`).\r\n\r\nOther than that, `str.charAt()` only checks if the index is indeed in bounds and returns a character within the array index.\r\n\r\nThe first one doesn&#39;t create additional memory in JVM.","title":"Fastest way to iterate over all the chars in a String","body":"<p>This is just micro-optimisation that you shouldn't worry about.</p>\n\n<pre><code>char[] chars = str.toCharArray();\n</code></pre>\n\n<p>returns you a copy of <code>str</code> character arrays (in JDK, it returns a copy of characters by calling <code>System.arrayCopy</code>).</p>\n\n<p>Other than that, <code>str.charAt()</code> only checks if the index is indeed in bounds and returns a character within the array index.</p>\n\n<p>The first one doesn't create additional memory in JVM.</p>\n"},{"tags":[],"owner":{"account_id":1730551,"reputation":13017,"user_id":1584255,"accept_rate":65,"display_name":"The Coordinator"},"down_vote_count":0,"up_vote_count":387,"is_accepted":true,"score":387,"last_activity_date":1599480685,"creation_date":1344480430,"answer_id":11876086,"question_id":8894258,"body_markdown":"FIRST UPDATE: Before you try this ever in a production environment (not advised), read this first: http://www.javaspecialists.eu/archive/Issue237.html\r\nStarting from Java 9, the solution as described won&#39;t work anymore, because now Java will store strings as byte[] by default.\r\n\r\nSECOND UPDATE: As of 2016-10-25, on my AMDx64 8core and source 1.8, there is no difference between using &#39;charAt&#39; and field access. It appears that the jvm is sufficiently optimized to inline and streamline any &#39;string.charAt(n)&#39; calls.\r\n\r\nTHIRD UPDATE: As of 2020-09-07, on my Ryzen 1950-X 16 core and source 1.14, &#39;charAt1&#39; is 9 times slower than field access and &#39;charAt2&#39; is 4 times slower than field access. Field access is back as the clear winner. Note than the program will need to use byte[] access for Java 9+ version jvms.\r\n\r\nIt all depends on the length of the `String` being inspected. If, as the question says, it is for **long** strings, the fastest way to inspect the string is to use reflection to access the backing `char[]` of the string.\r\n\r\nA fully randomized benchmark with JDK 8 (win32 and win64) on an 64 AMD Phenom II 4 core 955 @ 3.2 GHZ (in both client mode and server mode) with 9 different techniques (see below!) shows that using `String.charAt(n)` is the fastest for small strings and that using `reflection` to access the String backing array is almost twice as fast for large strings.\r\n\r\nTHE EXPERIMENT\r\n==============\r\n\r\n - 9 different optimization techniques are tried.\r\n\r\n - All string contents are randomized\r\n\r\n - The test are done for string sizes in multiples of two starting with 0,1,2,4,8,16 etc.\r\n\r\n - The tests are done 1,000 times per string size\r\n\r\n - The tests are shuffled into random order each time. In other words, the tests are done in random order every time they are done, over 1000 times over.\r\n\r\n - The entire test suite is done forwards, and backwards, to show the effect of JVM warmup on optimization and times.\r\n\r\n - The entire suite is done twice, once in `-client` mode and the other in `-server` mode.\r\n\r\nCONCLUSIONS\r\n===========\r\n\r\n-client mode (32 bit)\r\n---------------------\r\n\r\nFor strings **1 to 256 characters in length**, calling `string.charAt(i)` wins with an average processing of 13.4 million to 588 million characters per second.\r\n\r\nAlso, it is overall 5.5% faster (client) and 13.9% (server) like this:\r\n\r\n        for (int i = 0; i &lt; data.length(); i++) {\r\n            if (data.charAt(i) &lt;= &#39; &#39;) {\r\n                doThrow();\r\n            }\r\n        }\r\n\r\n\r\nthan like this with a local final length variable:\r\n\r\n        final int len = data.length();\r\n        for (int i = 0; i &lt; len; i++) {\r\n            if (data.charAt(i) &lt;= &#39; &#39;) {\r\n                doThrow();\r\n            }\r\n        }\r\n\r\n\r\nFor long strings, **512 to 256K characters length**, using reflection to access the String&#39;s backing array is fastest. **This technique is almost twice as fast** as String.charAt(i) (178% faster). The average speed over this range was 1.111 billion characters per second.\r\n\r\nThe Field must be obtained ahead of time and then it can be re-used in the library on different strings. Interestingly, unlike the code above, with Field access, it is 9% faster to have a local final length variable than to use &#39;chars.length&#39; in the loop check. Here is how Field access can be setup as fastest:\r\n\r\n       final Field field = String.class.getDeclaredField(&quot;value&quot;);\r\n       field.setAccessible(true);\r\n    \r\n       try {\r\n           final char[] chars = (char[]) field.get(data);\r\n           final int len = chars.length;\r\n           for (int i = 0; i &lt; len; i++) {\r\n               if (chars[i] &lt;= &#39; &#39;) {\r\n                   doThrow();\r\n               }\r\n           }\r\n           return len;\r\n       } catch (Exception ex) {\r\n           throw new RuntimeException(ex);\r\n       }\r\n\r\n\r\n\r\nSpecial comments on -server mode\r\n--------------------------------\r\n\r\nField access starting winning after 32 character length strings in server mode on a 64 bit Java machine on my AMD 64 machine. That was not seen until 512 characters length in client mode.\r\n\r\nAlso worth noting I think, when I was running JDK 8 (32 bit build) in server mode, the overall performance was 7% slower for both large and small strings. This was with build 121 Dec 2013 of JDK 8 early release. So, for now, it seems that 32 bit server mode is slower than 32 bit client mode.\r\n\r\nThat being said ... it seems the only server mode that is worth invoking is on a 64 bit machine. Otherwise it actually hampers performance.\r\n\r\nFor 32 bit build running in `-server mode` on an AMD64, I can say this:\r\n\r\n 1. String.charAt(i) is the clear winner overall. Although between sizes 8 to 512 characters there were winners among &#39;new&#39; &#39;reuse&#39; and &#39;field&#39;.\r\n 2. String.charAt(i) is 45% faster in client mode\r\n 3. Field access is twice as fast for large Strings in client mode.\r\n \r\nAlso worth saying, String.chars() (Stream and the parallel version) are a bust. Way slower than any other way. The `Streams` API is a rather slow way to perform general string operations. \r\n\r\nWish List\r\n---------\r\n\r\nJava String could have predicate accepting optimized methods such as contains(predicate), forEach(consumer), forEachWithIndex(consumer). Thus, without the need for the user to know the length or repeat calls to String methods, these could help parsing libraries `beep-beep beep` speedup.\r\n\r\nKeep dreaming :)\r\n\r\nHappy Strings!\r\n\r\n~SH\r\n\r\n\r\nThe test used the following 9 methods of testing the string for the presence of whitespace:\r\n------------------------------------------------------------------------\r\n\r\n&quot;charAt1&quot; -- CHECK THE STRING CONTENTS THE USUAL WAY:\r\n\r\n    int charAtMethod1(final String data) {\r\n        final int len = data.length();\r\n        for (int i = 0; i &lt; len; i++) {\r\n            if (data.charAt(i) &lt;= &#39; &#39;) {\r\n                doThrow();\r\n            }\r\n        }\r\n        return len;\r\n    }\r\n\r\n&quot;charAt2&quot; -- SAME AS ABOVE BUT USE String.length() INSTEAD OF MAKING A FINAL LOCAL int FOR THE LENGTh\r\n \r\n    int charAtMethod2(final String data) {\r\n        for (int i = 0; i &lt; data.length(); i++) {\r\n            if (data.charAt(i) &lt;= &#39; &#39;) {\r\n                doThrow();\r\n            }\r\n        }\r\n        return data.length();\r\n    }\r\n\r\n\r\n&quot;stream&quot; -- USE THE NEW JAVA-8 String&#39;s IntStream AND PASS IT A PREDICATE TO DO THE CHECKING\r\n\r\n    int streamMethod(final String data, final IntPredicate predicate) {\r\n        if (data.chars().anyMatch(predicate)) {\r\n            doThrow();\r\n        }\r\n        return data.length();\r\n    }\r\n\r\n\r\n&quot;streamPara&quot; -- SAME AS ABOVE, BUT OH-LA-LA - GO PARALLEL!!!\r\n\r\n    // avoid this at all costs\r\n    int streamParallelMethod(final String data, IntPredicate predicate) {\r\n        if (data.chars().parallel().anyMatch(predicate)) {\r\n            doThrow();\r\n        }\r\n        return data.length();\r\n    }\r\n\r\n&quot;reuse&quot; -- REFILL A REUSABLE char[] WITH THE STRINGS CONTENTS\r\n\r\n    int reuseBuffMethod(final char[] reusable, final String data) {\r\n        final int len = data.length();\r\n        data.getChars(0, len, reusable, 0);\r\n        for (int i = 0; i &lt; len; i++) {\r\n            if (reusable[i] &lt;= &#39; &#39;) {\r\n                doThrow();\r\n            }\r\n        }\r\n        return len;\r\n    }\r\n\r\n&quot;new1&quot; -- OBTAIN A NEW COPY OF THE char[] FROM THE STRING\r\n\r\n    int newMethod1(final String data) {\r\n        final int len = data.length();\r\n        final char[] copy = data.toCharArray();\r\n        for (int i = 0; i &lt; len; i++) {\r\n            if (copy[i] &lt;= &#39; &#39;) {\r\n                doThrow();\r\n            }\r\n        }\r\n        return len;\r\n    }\r\n\r\n\r\n&quot;new2&quot; -- SAME AS ABOVE, BUT USE &quot;FOR-EACH&quot;\r\n\r\n    int newMethod2(final String data) {\r\n        for (final char c : data.toCharArray()) {\r\n            if (c &lt;= &#39; &#39;) {\r\n                doThrow();\r\n            }\r\n        }\r\n        return data.length();\r\n    }\r\n\r\n&quot;field1&quot; -- FANCY!! OBTAIN FIELD FOR ACCESS TO THE STRING&#39;S INTERNAL char[]\r\n\r\n    int fieldMethod1(final Field field, final String data) {\r\n        try {\r\n            final char[] chars = (char[]) field.get(data);\r\n            final int len = chars.length;\r\n            for (int i = 0; i &lt; len; i++) {\r\n                if (chars[i] &lt;= &#39; &#39;) {\r\n                    doThrow();\r\n                }\r\n            }\r\n            return len;\r\n        } catch (Exception ex) {\r\n            throw new RuntimeException(ex);\r\n        }\r\n    }\r\n\r\n&quot;field2&quot; -- SAME AS ABOVE, BUT USE &quot;FOR-EACH&quot;\r\n\r\n    int fieldMethod2(final Field field, final String data) {\r\n        final char[] chars;\r\n        try {\r\n            chars = (char[]) field.get(data);\r\n        } catch (Exception ex) {\r\n            throw new RuntimeException(ex);\r\n        }\r\n        for (final char c : chars) {\r\n            if (c &lt;= &#39; &#39;) {\r\n                doThrow();\r\n            }\r\n        }\r\n        return chars.length;\r\n    }\r\n\r\n\r\nCOMPOSITE RESULTS FOR CLIENT `-client` MODE (forwards and backwards tests combined)\r\n===================================================================================\r\n\r\nNote: that the -client mode with Java 32 bit and -server mode with Java 64 bit are the same as below on my AMD64 machine.\r\n\r\n    Size     WINNER  charAt1 charAt2  stream streamPar   reuse    new1    new2  field1  field2\r\n    1        charAt    77.0     72.0   462.0     584.0   127.5    89.5    86.0   159.5   165.0\r\n    2        charAt    38.0     36.5   284.0   32712.5    57.5    48.3    50.3    89.0    91.5\r\n    4        charAt    19.5     18.5   458.6    3169.0    33.0    26.8    27.5    54.1    52.6\r\n    8        charAt     9.8      9.9   100.5    1370.9    17.3    14.4    15.0    26.9    26.4\r\n    16       charAt     6.1      6.5    73.4     857.0     8.4     8.2     8.3    13.6    13.5\r\n    32       charAt     3.9      3.7    54.8     428.9     5.0     4.9     4.7     7.0     7.2\r\n    64       charAt     2.7      2.6    48.2     232.9     3.0     3.2     3.3     3.9     4.0\r\n    128      charAt     2.1      1.9    43.7     138.8     2.1     2.6     2.6     2.4     2.6\r\n    256      charAt     1.9      1.6    42.4      90.6     1.7     2.1     2.1     1.7     1.8\r\n    512      field1     1.7      1.4    40.6      60.5     1.4     1.9     1.9     1.3     1.4\r\n    1,024    field1     1.6      1.4    40.0      45.6     1.2     1.9     2.1     1.0     1.2\r\n    2,048    field1     1.6      1.3    40.0      36.2     1.2     1.8     1.7     0.9     1.1\r\n    4,096    field1     1.6      1.3    39.7      32.6     1.2     1.8     1.7     0.9     1.0\r\n    8,192    field1     1.6      1.3    39.6      30.5     1.2     1.8     1.7     0.9     1.0\r\n    16,384   field1     1.6      1.3    39.8      28.4     1.2     1.8     1.7     0.8     1.0\r\n    32,768   field1     1.6      1.3    40.0      26.7     1.3     1.8     1.7     0.8     1.0\r\n    65,536   field1     1.6      1.3    39.8      26.3     1.3     1.8     1.7     0.8     1.0\r\n    131,072  field1     1.6      1.3    40.1      25.4     1.4     1.9     1.8     0.8     1.0\r\n    262,144  field1     1.6      1.3    39.6      25.2     1.5     1.9     1.9     0.8     1.0\r\n\r\n\r\nCOMPOSITE RESULTS FOR SERVER `-server` MODE (forwards and backwards tests combined)\r\n===================================================================================\r\n\r\nNote: this is the test for Java 32 bit running in server mode on an AMD64. The server mode for Java 64 bit was the same as Java 32 bit in client mode except that Field access starting winning after 32 characters size.\r\n\r\n    Size     WINNER  charAt1 charAt2  stream streamPar   reuse    new1    new2  field1  field2\r\n    1        charAt     74.5    95.5   524.5     783.0    90.5   102.5    90.5   135.0   151.5\r\n    2        charAt     48.5    53.0   305.0   30851.3    59.3    57.5    52.0    88.5    91.8\r\n    4        charAt     28.8    32.1   132.8    2465.1    37.6    33.9    32.3    49.0    47.0\r\n    8          new2     18.0    18.6    63.4    1541.3    18.5    17.9    17.6    25.4    25.8\r\n    16         new2     14.0    14.7   129.4    1034.7    12.5    16.2    12.0    16.0    16.6\r\n    32         new2      7.8     9.1    19.3     431.5     8.1     7.0     6.7     7.9     8.7\r\n    64        reuse      6.1     7.5    11.7     204.7     3.5     3.9     4.3     4.2     4.1\r\n    128       reuse      6.8     6.8     9.0     101.0     2.6     3.0     3.0     2.6     2.7\r\n    256      field2      6.2     6.5     6.9      57.2     2.4     2.7     2.9     2.3     2.3\r\n    512       reuse      4.3     4.9     5.8      28.2     2.0     2.6     2.6     2.1     2.1\r\n    1,024    charAt      2.0     1.8     5.3      17.6     2.1     2.5     3.5     2.0     2.0\r\n    2,048    charAt      1.9     1.7     5.2      11.9     2.2     3.0     2.6     2.0     2.0\r\n    4,096    charAt      1.9     1.7     5.1       8.7     2.1     2.6     2.6     1.9     1.9\r\n    8,192    charAt      1.9     1.7     5.1       7.6     2.2     2.5     2.6     1.9     1.9\r\n    16,384   charAt      1.9     1.7     5.1       6.9     2.2     2.5     2.5     1.9     1.9\r\n    32,768   charAt      1.9     1.7     5.1       6.1     2.2     2.5     2.5     1.9     1.9\r\n    65,536   charAt      1.9     1.7     5.1       5.5     2.2     2.4     2.4     1.9     1.9\r\n    131,072  charAt      1.9     1.7     5.1       5.4     2.3     2.5     2.5     1.9     1.9\r\n    262,144  charAt      1.9     1.7     5.1       5.1     2.3     2.5     2.5     1.9     1.9\r\n\r\nFULL RUNNABLE PROGRAM CODE\r\n==========================\r\n\r\n(to test on Java 7 and earlier, remove the two streams tests)\r\n\r\n\r\n    import java.lang.reflect.Field;\r\n    import java.util.ArrayList;\r\n    import java.util.Collections;\r\n    import java.util.List;\r\n    import java.util.Random;\r\n    import java.util.function.IntPredicate;\r\n    \r\n    /**\r\n     * @author Saint Hill &lt;http://stackoverflow.com/users/1584255/saint-hill&gt;\r\n     */\r\n    public final class TestStrings {\r\n    \r\n        // we will not test strings longer than 512KM\r\n        final int MAX_STRING_SIZE = 1024 * 256;\r\n    \r\n        // for each string size, we will do all the tests\r\n        // this many times\r\n        final int TRIES_PER_STRING_SIZE = 1000;\r\n    \r\n        public static void main(String[] args) throws Exception {\r\n            new TestStrings().run();\r\n        }\r\n    \r\n        void run() throws Exception {\r\n    \r\n            // double the length of the data until it reaches MAX chars long\r\n            // 0,1,2,4,8,16,32,64,128,256 ... \r\n            final List&lt;Integer&gt; sizes = new ArrayList&lt;&gt;();\r\n            for (int n = 0; n &lt;= MAX_STRING_SIZE; n = (n == 0 ? 1 : n * 2)) {\r\n                sizes.add(n);\r\n            }\r\n    \r\n            // CREATE RANDOM (FOR SHUFFLING ORDER OF TESTS)\r\n            final Random random = new Random();\r\n    \r\n            System.out.println(&quot;Rate in nanoseconds per character inspected.&quot;);\r\n            System.out.printf(&quot;==== FORWARDS (tries per size: %s) ==== \\n&quot;, TRIES_PER_STRING_SIZE);\r\n    \r\n            printHeadings(TRIES_PER_STRING_SIZE, random);\r\n    \r\n            for (int size : sizes) {\r\n                reportResults(size, test(size, TRIES_PER_STRING_SIZE, random));\r\n            }\r\n    \r\n            // reverse order or string sizes\r\n            Collections.reverse(sizes);\r\n    \r\n            System.out.println(&quot;&quot;);\r\n            System.out.println(&quot;Rate in nanoseconds per character inspected.&quot;);\r\n            System.out.printf(&quot;==== BACKWARDS (tries per size: %s) ==== \\n&quot;, TRIES_PER_STRING_SIZE);\r\n    \r\n            printHeadings(TRIES_PER_STRING_SIZE, random);\r\n    \r\n            for (int size : sizes) {\r\n                reportResults(size, test(size, TRIES_PER_STRING_SIZE, random));\r\n    \r\n            }\r\n        }\r\n    \r\n        ///\r\n        ///\r\n        ///  METHODS OF CHECKING THE CONTENTS\r\n        ///  OF A STRING. ALWAYS CHECKING FOR\r\n        ///  WHITESPACE (CHAR &lt;=&#39; &#39;)\r\n        ///  \r\n        ///\r\n        // CHECK THE STRING CONTENTS\r\n        int charAtMethod1(final String data) {\r\n            final int len = data.length();\r\n            for (int i = 0; i &lt; len; i++) {\r\n                if (data.charAt(i) &lt;= &#39; &#39;) {\r\n                    doThrow();\r\n                }\r\n            }\r\n            return len;\r\n        }\r\n    \r\n        // SAME AS ABOVE BUT USE String.length()\r\n        // instead of making a new final local int \r\n        int charAtMethod2(final String data) {\r\n            for (int i = 0; i &lt; data.length(); i++) {\r\n                if (data.charAt(i) &lt;= &#39; &#39;) {\r\n                    doThrow();\r\n                }\r\n            }\r\n            return data.length();\r\n        }\r\n    \r\n        // USE new Java-8 String&#39;s IntStream\r\n        // pass it a PREDICATE to do the checking\r\n        int streamMethod(final String data, final IntPredicate predicate) {\r\n            if (data.chars().anyMatch(predicate)) {\r\n                doThrow();\r\n            }\r\n            return data.length();\r\n        }\r\n    \r\n        // OH LA LA - GO PARALLEL!!!\r\n        int streamParallelMethod(final String data, IntPredicate predicate) {\r\n            if (data.chars().parallel().anyMatch(predicate)) {\r\n                doThrow();\r\n            }\r\n            return data.length();\r\n        }\r\n    \r\n        // Re-fill a resuable char[] with the contents\r\n        // of the String&#39;s char[]\r\n        int reuseBuffMethod(final char[] reusable, final String data) {\r\n            final int len = data.length();\r\n            data.getChars(0, len, reusable, 0);\r\n            for (int i = 0; i &lt; len; i++) {\r\n                if (reusable[i] &lt;= &#39; &#39;) {\r\n                    doThrow();\r\n                }\r\n            }\r\n            return len;\r\n        }\r\n    \r\n        // Obtain a new copy of char[] from String\r\n        int newMethod1(final String data) {\r\n            final int len = data.length();\r\n            final char[] copy = data.toCharArray();\r\n            for (int i = 0; i &lt; len; i++) {\r\n                if (copy[i] &lt;= &#39; &#39;) {\r\n                    doThrow();\r\n                }\r\n            }\r\n            return len;\r\n        }\r\n    \r\n        // Obtain a new copy of char[] from String\r\n        // but use FOR-EACH\r\n        int newMethod2(final String data) {\r\n            for (final char c : data.toCharArray()) {\r\n                if (c &lt;= &#39; &#39;) {\r\n                    doThrow();\r\n                }\r\n            }\r\n            return data.length();\r\n        }\r\n    \r\n        // FANCY!\r\n        // OBTAIN FIELD FOR ACCESS TO THE STRING&#39;S\r\n        // INTERNAL CHAR[]\r\n        int fieldMethod1(final Field field, final String data) {\r\n            try {\r\n                final char[] chars = (char[]) field.get(data);\r\n                final int len = chars.length;\r\n                for (int i = 0; i &lt; len; i++) {\r\n                    if (chars[i] &lt;= &#39; &#39;) {\r\n                        doThrow();\r\n                    }\r\n                }\r\n                return len;\r\n            } catch (Exception ex) {\r\n                throw new RuntimeException(ex);\r\n            }\r\n        }\r\n    \r\n        // same as above but use FOR-EACH\r\n        int fieldMethod2(final Field field, final String data) {\r\n            final char[] chars;\r\n            try {\r\n                chars = (char[]) field.get(data);\r\n            } catch (Exception ex) {\r\n                throw new RuntimeException(ex);\r\n            }\r\n            for (final char c : chars) {\r\n                if (c &lt;= &#39; &#39;) {\r\n                    doThrow();\r\n                }\r\n            }\r\n            return chars.length;\r\n        }\r\n    \r\n        /**\r\n         *\r\n         * Make a list of tests. We will shuffle a copy of this list repeatedly\r\n         * while we repeat this test.\r\n         *\r\n         * @param data\r\n         * @return\r\n         */\r\n        List&lt;Jobber&gt; makeTests(String data) throws Exception {\r\n            // make a list of tests\r\n            final List&lt;Jobber&gt; tests = new ArrayList&lt;Jobber&gt;();\r\n    \r\n            tests.add(new Jobber(&quot;charAt1&quot;) {\r\n                int check() {\r\n                    return charAtMethod1(data);\r\n                }\r\n            });\r\n    \r\n            tests.add(new Jobber(&quot;charAt2&quot;) {\r\n                int check() {\r\n                    return charAtMethod2(data);\r\n                }\r\n            });\r\n    \r\n            tests.add(new Jobber(&quot;stream&quot;) {\r\n                final IntPredicate predicate = new IntPredicate() {\r\n                    public boolean test(int value) {\r\n                        return value &lt;= &#39; &#39;;\r\n                    }\r\n                };\r\n    \r\n                int check() {\r\n                    return streamMethod(data, predicate);\r\n                }\r\n            });\r\n    \r\n            tests.add(new Jobber(&quot;streamPar&quot;) {\r\n                final IntPredicate predicate = new IntPredicate() {\r\n                    public boolean test(int value) {\r\n                        return value &lt;= &#39; &#39;;\r\n                    }\r\n                };\r\n    \r\n                int check() {\r\n                    return streamParallelMethod(data, predicate);\r\n                }\r\n            });\r\n    \r\n            // Reusable char[] method\r\n            tests.add(new Jobber(&quot;reuse&quot;) {\r\n                final char[] cbuff = new char[MAX_STRING_SIZE];\r\n    \r\n                int check() {\r\n                    return reuseBuffMethod(cbuff, data);\r\n                }\r\n            });\r\n    \r\n            // New char[] from String\r\n            tests.add(new Jobber(&quot;new1&quot;) {\r\n                int check() {\r\n                    return newMethod1(data);\r\n                }\r\n            });\r\n    \r\n            // New char[] from String\r\n            tests.add(new Jobber(&quot;new2&quot;) {\r\n                int check() {\r\n                    return newMethod2(data);\r\n                }\r\n            });\r\n    \r\n            // Use reflection for field access\r\n            tests.add(new Jobber(&quot;field1&quot;) {\r\n                final Field field;\r\n    \r\n                {\r\n                    field = String.class.getDeclaredField(&quot;value&quot;);\r\n                    field.setAccessible(true);\r\n                }\r\n    \r\n                int check() {\r\n                    return fieldMethod1(field, data);\r\n                }\r\n            });\r\n    \r\n            // Use reflection for field access\r\n            tests.add(new Jobber(&quot;field2&quot;) {\r\n                final Field field;\r\n    \r\n                {\r\n                    field = String.class.getDeclaredField(&quot;value&quot;);\r\n                    field.setAccessible(true);\r\n                }\r\n    \r\n                int check() {\r\n                    return fieldMethod2(field, data);\r\n                }\r\n            });\r\n    \r\n            return tests;\r\n        }\r\n    \r\n        /**\r\n         * We use this class to keep track of test results\r\n         */\r\n        abstract class Jobber {\r\n    \r\n            final String name;\r\n            long nanos;\r\n            long chars;\r\n            long runs;\r\n    \r\n            Jobber(String name) {\r\n                this.name = name;\r\n            }\r\n    \r\n            abstract int check();\r\n    \r\n            final double nanosPerChar() {\r\n                double charsPerRun = chars / runs;\r\n                long nanosPerRun = nanos / runs;\r\n                return charsPerRun == 0 ? nanosPerRun : nanosPerRun / charsPerRun;\r\n            }\r\n    \r\n            final void run() {\r\n                runs++;\r\n                long time = System.nanoTime();\r\n                chars += check();\r\n                nanos += System.nanoTime() - time;\r\n            }\r\n        }\r\n    \r\n        // MAKE A TEST STRING OF RANDOM CHARACTERS A-Z\r\n        private String makeTestString(int testSize, char start, char end) {\r\n            Random r = new Random();\r\n            char[] data = new char[testSize];\r\n            for (int i = 0; i &lt; data.length; i++) {\r\n                data[i] = (char) (start + r.nextInt(end));\r\n            }\r\n            return new String(data);\r\n        }\r\n    \r\n        // WE DO THIS IF WE FIND AN ILLEGAL CHARACTER IN THE STRING\r\n        public void doThrow() {\r\n            throw new RuntimeException(&quot;Bzzzt -- Illegal Character!!&quot;);\r\n        }\r\n    \r\n        /**\r\n         * 1. get random string of correct length 2. get tests (List&lt;Jobber&gt;) 3.\r\n         * perform tests repeatedly, shuffling each time\r\n         */\r\n        List&lt;Jobber&gt; test(int size, int tries, Random random) throws Exception {\r\n            String data = makeTestString(size, &#39;A&#39;, &#39;Z&#39;);\r\n            List&lt;Jobber&gt; tests = makeTests(data);\r\n            List&lt;Jobber&gt; copy = new ArrayList&lt;&gt;(tests);\r\n            while (tries-- &gt; 0) {\r\n                Collections.shuffle(copy, random);\r\n                for (Jobber ti : copy) {\r\n                    ti.run();\r\n                }\r\n            }\r\n            // check to make sure all char counts the same\r\n            long runs = tests.get(0).runs;\r\n            long count = tests.get(0).chars;\r\n            for (Jobber ti : tests) {\r\n                if (ti.runs != runs &amp;&amp; ti.chars != count) {\r\n                    throw new Exception(&quot;Char counts should match if all correct algorithms&quot;);\r\n                }\r\n            }\r\n            return tests;\r\n        }\r\n    \r\n        private void printHeadings(final int TRIES_PER_STRING_SIZE, final Random random) throws Exception {\r\n            System.out.print(&quot;  Size&quot;);\r\n            for (Jobber ti : test(0, TRIES_PER_STRING_SIZE, random)) {\r\n                System.out.printf(&quot;%9s&quot;, ti.name);\r\n            }\r\n            System.out.println(&quot;&quot;);\r\n        }\r\n    \r\n        private void reportResults(int size, List&lt;Jobber&gt; tests) {\r\n            System.out.printf(&quot;%6d&quot;, size);\r\n            for (Jobber ti : tests) {\r\n                System.out.printf(&quot;%,9.2f&quot;, ti.nanosPerChar());\r\n            }\r\n            System.out.println(&quot;&quot;);\r\n        }\r\n    }","title":"Fastest way to iterate over all the chars in a String","body":"<p>FIRST UPDATE: Before you try this ever in a production environment (not advised), read this first: <a href=\"http://www.javaspecialists.eu/archive/Issue237.html\" rel=\"noreferrer\">http://www.javaspecialists.eu/archive/Issue237.html</a>\nStarting from Java 9, the solution as described won't work anymore, because now Java will store strings as byte[] by default.</p>\n<p>SECOND UPDATE: As of 2016-10-25, on my AMDx64 8core and source 1.8, there is no difference between using 'charAt' and field access. It appears that the jvm is sufficiently optimized to inline and streamline any 'string.charAt(n)' calls.</p>\n<p>THIRD UPDATE: As of 2020-09-07, on my Ryzen 1950-X 16 core and source 1.14, 'charAt1' is 9 times slower than field access and 'charAt2' is 4 times slower than field access. Field access is back as the clear winner. Note than the program will need to use byte[] access for Java 9+ version jvms.</p>\n<p>It all depends on the length of the <code>String</code> being inspected. If, as the question says, it is for <strong>long</strong> strings, the fastest way to inspect the string is to use reflection to access the backing <code>char[]</code> of the string.</p>\n<p>A fully randomized benchmark with JDK 8 (win32 and win64) on an 64 AMD Phenom II 4 core 955 @ 3.2 GHZ (in both client mode and server mode) with 9 different techniques (see below!) shows that using <code>String.charAt(n)</code> is the fastest for small strings and that using <code>reflection</code> to access the String backing array is almost twice as fast for large strings.</p>\n<h1>THE EXPERIMENT</h1>\n<ul>\n<li><p>9 different optimization techniques are tried.</p>\n</li>\n<li><p>All string contents are randomized</p>\n</li>\n<li><p>The test are done for string sizes in multiples of two starting with 0,1,2,4,8,16 etc.</p>\n</li>\n<li><p>The tests are done 1,000 times per string size</p>\n</li>\n<li><p>The tests are shuffled into random order each time. In other words, the tests are done in random order every time they are done, over 1000 times over.</p>\n</li>\n<li><p>The entire test suite is done forwards, and backwards, to show the effect of JVM warmup on optimization and times.</p>\n</li>\n<li><p>The entire suite is done twice, once in <code>-client</code> mode and the other in <code>-server</code> mode.</p>\n</li>\n</ul>\n<h1>CONCLUSIONS</h1>\n<h2>-client mode (32 bit)</h2>\n<p>For strings <strong>1 to 256 characters in length</strong>, calling <code>string.charAt(i)</code> wins with an average processing of 13.4 million to 588 million characters per second.</p>\n<p>Also, it is overall 5.5% faster (client) and 13.9% (server) like this:</p>\n<pre><code>    for (int i = 0; i &lt; data.length(); i++) {\n        if (data.charAt(i) &lt;= ' ') {\n            doThrow();\n        }\n    }\n</code></pre>\n<p>than like this with a local final length variable:</p>\n<pre><code>    final int len = data.length();\n    for (int i = 0; i &lt; len; i++) {\n        if (data.charAt(i) &lt;= ' ') {\n            doThrow();\n        }\n    }\n</code></pre>\n<p>For long strings, <strong>512 to 256K characters length</strong>, using reflection to access the String's backing array is fastest. <strong>This technique is almost twice as fast</strong> as String.charAt(i) (178% faster). The average speed over this range was 1.111 billion characters per second.</p>\n<p>The Field must be obtained ahead of time and then it can be re-used in the library on different strings. Interestingly, unlike the code above, with Field access, it is 9% faster to have a local final length variable than to use 'chars.length' in the loop check. Here is how Field access can be setup as fastest:</p>\n<pre><code>   final Field field = String.class.getDeclaredField(&quot;value&quot;);\n   field.setAccessible(true);\n\n   try {\n       final char[] chars = (char[]) field.get(data);\n       final int len = chars.length;\n       for (int i = 0; i &lt; len; i++) {\n           if (chars[i] &lt;= ' ') {\n               doThrow();\n           }\n       }\n       return len;\n   } catch (Exception ex) {\n       throw new RuntimeException(ex);\n   }\n</code></pre>\n<h2>Special comments on -server mode</h2>\n<p>Field access starting winning after 32 character length strings in server mode on a 64 bit Java machine on my AMD 64 machine. That was not seen until 512 characters length in client mode.</p>\n<p>Also worth noting I think, when I was running JDK 8 (32 bit build) in server mode, the overall performance was 7% slower for both large and small strings. This was with build 121 Dec 2013 of JDK 8 early release. So, for now, it seems that 32 bit server mode is slower than 32 bit client mode.</p>\n<p>That being said ... it seems the only server mode that is worth invoking is on a 64 bit machine. Otherwise it actually hampers performance.</p>\n<p>For 32 bit build running in <code>-server mode</code> on an AMD64, I can say this:</p>\n<ol>\n<li>String.charAt(i) is the clear winner overall. Although between sizes 8 to 512 characters there were winners among 'new' 'reuse' and 'field'.</li>\n<li>String.charAt(i) is 45% faster in client mode</li>\n<li>Field access is twice as fast for large Strings in client mode.</li>\n</ol>\n<p>Also worth saying, String.chars() (Stream and the parallel version) are a bust. Way slower than any other way. The <code>Streams</code> API is a rather slow way to perform general string operations.</p>\n<h2>Wish List</h2>\n<p>Java String could have predicate accepting optimized methods such as contains(predicate), forEach(consumer), forEachWithIndex(consumer). Thus, without the need for the user to know the length or repeat calls to String methods, these could help parsing libraries <code>beep-beep beep</code> speedup.</p>\n<p>Keep dreaming :)</p>\n<p>Happy Strings!</p>\n<p>~SH</p>\n<h2>The test used the following 9 methods of testing the string for the presence of whitespace:</h2>\n<p>&quot;charAt1&quot; -- CHECK THE STRING CONTENTS THE USUAL WAY:</p>\n<pre><code>int charAtMethod1(final String data) {\n    final int len = data.length();\n    for (int i = 0; i &lt; len; i++) {\n        if (data.charAt(i) &lt;= ' ') {\n            doThrow();\n        }\n    }\n    return len;\n}\n</code></pre>\n<p>&quot;charAt2&quot; -- SAME AS ABOVE BUT USE String.length() INSTEAD OF MAKING A FINAL LOCAL int FOR THE LENGTh</p>\n<pre><code>int charAtMethod2(final String data) {\n    for (int i = 0; i &lt; data.length(); i++) {\n        if (data.charAt(i) &lt;= ' ') {\n            doThrow();\n        }\n    }\n    return data.length();\n}\n</code></pre>\n<p>&quot;stream&quot; -- USE THE NEW JAVA-8 String's IntStream AND PASS IT A PREDICATE TO DO THE CHECKING</p>\n<pre><code>int streamMethod(final String data, final IntPredicate predicate) {\n    if (data.chars().anyMatch(predicate)) {\n        doThrow();\n    }\n    return data.length();\n}\n</code></pre>\n<p>&quot;streamPara&quot; -- SAME AS ABOVE, BUT OH-LA-LA - GO PARALLEL!!!</p>\n<pre><code>// avoid this at all costs\nint streamParallelMethod(final String data, IntPredicate predicate) {\n    if (data.chars().parallel().anyMatch(predicate)) {\n        doThrow();\n    }\n    return data.length();\n}\n</code></pre>\n<p>&quot;reuse&quot; -- REFILL A REUSABLE char[] WITH THE STRINGS CONTENTS</p>\n<pre><code>int reuseBuffMethod(final char[] reusable, final String data) {\n    final int len = data.length();\n    data.getChars(0, len, reusable, 0);\n    for (int i = 0; i &lt; len; i++) {\n        if (reusable[i] &lt;= ' ') {\n            doThrow();\n        }\n    }\n    return len;\n}\n</code></pre>\n<p>&quot;new1&quot; -- OBTAIN A NEW COPY OF THE char[] FROM THE STRING</p>\n<pre><code>int newMethod1(final String data) {\n    final int len = data.length();\n    final char[] copy = data.toCharArray();\n    for (int i = 0; i &lt; len; i++) {\n        if (copy[i] &lt;= ' ') {\n            doThrow();\n        }\n    }\n    return len;\n}\n</code></pre>\n<p>&quot;new2&quot; -- SAME AS ABOVE, BUT USE &quot;FOR-EACH&quot;</p>\n<pre><code>int newMethod2(final String data) {\n    for (final char c : data.toCharArray()) {\n        if (c &lt;= ' ') {\n            doThrow();\n        }\n    }\n    return data.length();\n}\n</code></pre>\n<p>&quot;field1&quot; -- FANCY!! OBTAIN FIELD FOR ACCESS TO THE STRING'S INTERNAL char[]</p>\n<pre><code>int fieldMethod1(final Field field, final String data) {\n    try {\n        final char[] chars = (char[]) field.get(data);\n        final int len = chars.length;\n        for (int i = 0; i &lt; len; i++) {\n            if (chars[i] &lt;= ' ') {\n                doThrow();\n            }\n        }\n        return len;\n    } catch (Exception ex) {\n        throw new RuntimeException(ex);\n    }\n}\n</code></pre>\n<p>&quot;field2&quot; -- SAME AS ABOVE, BUT USE &quot;FOR-EACH&quot;</p>\n<pre><code>int fieldMethod2(final Field field, final String data) {\n    final char[] chars;\n    try {\n        chars = (char[]) field.get(data);\n    } catch (Exception ex) {\n        throw new RuntimeException(ex);\n    }\n    for (final char c : chars) {\n        if (c &lt;= ' ') {\n            doThrow();\n        }\n    }\n    return chars.length;\n}\n</code></pre>\n<h1>COMPOSITE RESULTS FOR CLIENT <code>-client</code> MODE (forwards and backwards tests combined)</h1>\n<p>Note: that the -client mode with Java 32 bit and -server mode with Java 64 bit are the same as below on my AMD64 machine.</p>\n<pre><code>Size     WINNER  charAt1 charAt2  stream streamPar   reuse    new1    new2  field1  field2\n1        charAt    77.0     72.0   462.0     584.0   127.5    89.5    86.0   159.5   165.0\n2        charAt    38.0     36.5   284.0   32712.5    57.5    48.3    50.3    89.0    91.5\n4        charAt    19.5     18.5   458.6    3169.0    33.0    26.8    27.5    54.1    52.6\n8        charAt     9.8      9.9   100.5    1370.9    17.3    14.4    15.0    26.9    26.4\n16       charAt     6.1      6.5    73.4     857.0     8.4     8.2     8.3    13.6    13.5\n32       charAt     3.9      3.7    54.8     428.9     5.0     4.9     4.7     7.0     7.2\n64       charAt     2.7      2.6    48.2     232.9     3.0     3.2     3.3     3.9     4.0\n128      charAt     2.1      1.9    43.7     138.8     2.1     2.6     2.6     2.4     2.6\n256      charAt     1.9      1.6    42.4      90.6     1.7     2.1     2.1     1.7     1.8\n512      field1     1.7      1.4    40.6      60.5     1.4     1.9     1.9     1.3     1.4\n1,024    field1     1.6      1.4    40.0      45.6     1.2     1.9     2.1     1.0     1.2\n2,048    field1     1.6      1.3    40.0      36.2     1.2     1.8     1.7     0.9     1.1\n4,096    field1     1.6      1.3    39.7      32.6     1.2     1.8     1.7     0.9     1.0\n8,192    field1     1.6      1.3    39.6      30.5     1.2     1.8     1.7     0.9     1.0\n16,384   field1     1.6      1.3    39.8      28.4     1.2     1.8     1.7     0.8     1.0\n32,768   field1     1.6      1.3    40.0      26.7     1.3     1.8     1.7     0.8     1.0\n65,536   field1     1.6      1.3    39.8      26.3     1.3     1.8     1.7     0.8     1.0\n131,072  field1     1.6      1.3    40.1      25.4     1.4     1.9     1.8     0.8     1.0\n262,144  field1     1.6      1.3    39.6      25.2     1.5     1.9     1.9     0.8     1.0\n</code></pre>\n<h1>COMPOSITE RESULTS FOR SERVER <code>-server</code> MODE (forwards and backwards tests combined)</h1>\n<p>Note: this is the test for Java 32 bit running in server mode on an AMD64. The server mode for Java 64 bit was the same as Java 32 bit in client mode except that Field access starting winning after 32 characters size.</p>\n<pre><code>Size     WINNER  charAt1 charAt2  stream streamPar   reuse    new1    new2  field1  field2\n1        charAt     74.5    95.5   524.5     783.0    90.5   102.5    90.5   135.0   151.5\n2        charAt     48.5    53.0   305.0   30851.3    59.3    57.5    52.0    88.5    91.8\n4        charAt     28.8    32.1   132.8    2465.1    37.6    33.9    32.3    49.0    47.0\n8          new2     18.0    18.6    63.4    1541.3    18.5    17.9    17.6    25.4    25.8\n16         new2     14.0    14.7   129.4    1034.7    12.5    16.2    12.0    16.0    16.6\n32         new2      7.8     9.1    19.3     431.5     8.1     7.0     6.7     7.9     8.7\n64        reuse      6.1     7.5    11.7     204.7     3.5     3.9     4.3     4.2     4.1\n128       reuse      6.8     6.8     9.0     101.0     2.6     3.0     3.0     2.6     2.7\n256      field2      6.2     6.5     6.9      57.2     2.4     2.7     2.9     2.3     2.3\n512       reuse      4.3     4.9     5.8      28.2     2.0     2.6     2.6     2.1     2.1\n1,024    charAt      2.0     1.8     5.3      17.6     2.1     2.5     3.5     2.0     2.0\n2,048    charAt      1.9     1.7     5.2      11.9     2.2     3.0     2.6     2.0     2.0\n4,096    charAt      1.9     1.7     5.1       8.7     2.1     2.6     2.6     1.9     1.9\n8,192    charAt      1.9     1.7     5.1       7.6     2.2     2.5     2.6     1.9     1.9\n16,384   charAt      1.9     1.7     5.1       6.9     2.2     2.5     2.5     1.9     1.9\n32,768   charAt      1.9     1.7     5.1       6.1     2.2     2.5     2.5     1.9     1.9\n65,536   charAt      1.9     1.7     5.1       5.5     2.2     2.4     2.4     1.9     1.9\n131,072  charAt      1.9     1.7     5.1       5.4     2.3     2.5     2.5     1.9     1.9\n262,144  charAt      1.9     1.7     5.1       5.1     2.3     2.5     2.5     1.9     1.9\n</code></pre>\n<h1>FULL RUNNABLE PROGRAM CODE</h1>\n<p>(to test on Java 7 and earlier, remove the two streams tests)</p>\n<pre><code>import java.lang.reflect.Field;\nimport java.util.ArrayList;\nimport java.util.Collections;\nimport java.util.List;\nimport java.util.Random;\nimport java.util.function.IntPredicate;\n\n/**\n * @author Saint Hill &lt;http://stackoverflow.com/users/1584255/saint-hill&gt;\n */\npublic final class TestStrings {\n\n    // we will not test strings longer than 512KM\n    final int MAX_STRING_SIZE = 1024 * 256;\n\n    // for each string size, we will do all the tests\n    // this many times\n    final int TRIES_PER_STRING_SIZE = 1000;\n\n    public static void main(String[] args) throws Exception {\n        new TestStrings().run();\n    }\n\n    void run() throws Exception {\n\n        // double the length of the data until it reaches MAX chars long\n        // 0,1,2,4,8,16,32,64,128,256 ... \n        final List&lt;Integer&gt; sizes = new ArrayList&lt;&gt;();\n        for (int n = 0; n &lt;= MAX_STRING_SIZE; n = (n == 0 ? 1 : n * 2)) {\n            sizes.add(n);\n        }\n\n        // CREATE RANDOM (FOR SHUFFLING ORDER OF TESTS)\n        final Random random = new Random();\n\n        System.out.println(&quot;Rate in nanoseconds per character inspected.&quot;);\n        System.out.printf(&quot;==== FORWARDS (tries per size: %s) ==== \\n&quot;, TRIES_PER_STRING_SIZE);\n\n        printHeadings(TRIES_PER_STRING_SIZE, random);\n\n        for (int size : sizes) {\n            reportResults(size, test(size, TRIES_PER_STRING_SIZE, random));\n        }\n\n        // reverse order or string sizes\n        Collections.reverse(sizes);\n\n        System.out.println(&quot;&quot;);\n        System.out.println(&quot;Rate in nanoseconds per character inspected.&quot;);\n        System.out.printf(&quot;==== BACKWARDS (tries per size: %s) ==== \\n&quot;, TRIES_PER_STRING_SIZE);\n\n        printHeadings(TRIES_PER_STRING_SIZE, random);\n\n        for (int size : sizes) {\n            reportResults(size, test(size, TRIES_PER_STRING_SIZE, random));\n\n        }\n    }\n\n    ///\n    ///\n    ///  METHODS OF CHECKING THE CONTENTS\n    ///  OF A STRING. ALWAYS CHECKING FOR\n    ///  WHITESPACE (CHAR &lt;=' ')\n    ///  \n    ///\n    // CHECK THE STRING CONTENTS\n    int charAtMethod1(final String data) {\n        final int len = data.length();\n        for (int i = 0; i &lt; len; i++) {\n            if (data.charAt(i) &lt;= ' ') {\n                doThrow();\n            }\n        }\n        return len;\n    }\n\n    // SAME AS ABOVE BUT USE String.length()\n    // instead of making a new final local int \n    int charAtMethod2(final String data) {\n        for (int i = 0; i &lt; data.length(); i++) {\n            if (data.charAt(i) &lt;= ' ') {\n                doThrow();\n            }\n        }\n        return data.length();\n    }\n\n    // USE new Java-8 String's IntStream\n    // pass it a PREDICATE to do the checking\n    int streamMethod(final String data, final IntPredicate predicate) {\n        if (data.chars().anyMatch(predicate)) {\n            doThrow();\n        }\n        return data.length();\n    }\n\n    // OH LA LA - GO PARALLEL!!!\n    int streamParallelMethod(final String data, IntPredicate predicate) {\n        if (data.chars().parallel().anyMatch(predicate)) {\n            doThrow();\n        }\n        return data.length();\n    }\n\n    // Re-fill a resuable char[] with the contents\n    // of the String's char[]\n    int reuseBuffMethod(final char[] reusable, final String data) {\n        final int len = data.length();\n        data.getChars(0, len, reusable, 0);\n        for (int i = 0; i &lt; len; i++) {\n            if (reusable[i] &lt;= ' ') {\n                doThrow();\n            }\n        }\n        return len;\n    }\n\n    // Obtain a new copy of char[] from String\n    int newMethod1(final String data) {\n        final int len = data.length();\n        final char[] copy = data.toCharArray();\n        for (int i = 0; i &lt; len; i++) {\n            if (copy[i] &lt;= ' ') {\n                doThrow();\n            }\n        }\n        return len;\n    }\n\n    // Obtain a new copy of char[] from String\n    // but use FOR-EACH\n    int newMethod2(final String data) {\n        for (final char c : data.toCharArray()) {\n            if (c &lt;= ' ') {\n                doThrow();\n            }\n        }\n        return data.length();\n    }\n\n    // FANCY!\n    // OBTAIN FIELD FOR ACCESS TO THE STRING'S\n    // INTERNAL CHAR[]\n    int fieldMethod1(final Field field, final String data) {\n        try {\n            final char[] chars = (char[]) field.get(data);\n            final int len = chars.length;\n            for (int i = 0; i &lt; len; i++) {\n                if (chars[i] &lt;= ' ') {\n                    doThrow();\n                }\n            }\n            return len;\n        } catch (Exception ex) {\n            throw new RuntimeException(ex);\n        }\n    }\n\n    // same as above but use FOR-EACH\n    int fieldMethod2(final Field field, final String data) {\n        final char[] chars;\n        try {\n            chars = (char[]) field.get(data);\n        } catch (Exception ex) {\n            throw new RuntimeException(ex);\n        }\n        for (final char c : chars) {\n            if (c &lt;= ' ') {\n                doThrow();\n            }\n        }\n        return chars.length;\n    }\n\n    /**\n     *\n     * Make a list of tests. We will shuffle a copy of this list repeatedly\n     * while we repeat this test.\n     *\n     * @param data\n     * @return\n     */\n    List&lt;Jobber&gt; makeTests(String data) throws Exception {\n        // make a list of tests\n        final List&lt;Jobber&gt; tests = new ArrayList&lt;Jobber&gt;();\n\n        tests.add(new Jobber(&quot;charAt1&quot;) {\n            int check() {\n                return charAtMethod1(data);\n            }\n        });\n\n        tests.add(new Jobber(&quot;charAt2&quot;) {\n            int check() {\n                return charAtMethod2(data);\n            }\n        });\n\n        tests.add(new Jobber(&quot;stream&quot;) {\n            final IntPredicate predicate = new IntPredicate() {\n                public boolean test(int value) {\n                    return value &lt;= ' ';\n                }\n            };\n\n            int check() {\n                return streamMethod(data, predicate);\n            }\n        });\n\n        tests.add(new Jobber(&quot;streamPar&quot;) {\n            final IntPredicate predicate = new IntPredicate() {\n                public boolean test(int value) {\n                    return value &lt;= ' ';\n                }\n            };\n\n            int check() {\n                return streamParallelMethod(data, predicate);\n            }\n        });\n\n        // Reusable char[] method\n        tests.add(new Jobber(&quot;reuse&quot;) {\n            final char[] cbuff = new char[MAX_STRING_SIZE];\n\n            int check() {\n                return reuseBuffMethod(cbuff, data);\n            }\n        });\n\n        // New char[] from String\n        tests.add(new Jobber(&quot;new1&quot;) {\n            int check() {\n                return newMethod1(data);\n            }\n        });\n\n        // New char[] from String\n        tests.add(new Jobber(&quot;new2&quot;) {\n            int check() {\n                return newMethod2(data);\n            }\n        });\n\n        // Use reflection for field access\n        tests.add(new Jobber(&quot;field1&quot;) {\n            final Field field;\n\n            {\n                field = String.class.getDeclaredField(&quot;value&quot;);\n                field.setAccessible(true);\n            }\n\n            int check() {\n                return fieldMethod1(field, data);\n            }\n        });\n\n        // Use reflection for field access\n        tests.add(new Jobber(&quot;field2&quot;) {\n            final Field field;\n\n            {\n                field = String.class.getDeclaredField(&quot;value&quot;);\n                field.setAccessible(true);\n            }\n\n            int check() {\n                return fieldMethod2(field, data);\n            }\n        });\n\n        return tests;\n    }\n\n    /**\n     * We use this class to keep track of test results\n     */\n    abstract class Jobber {\n\n        final String name;\n        long nanos;\n        long chars;\n        long runs;\n\n        Jobber(String name) {\n            this.name = name;\n        }\n\n        abstract int check();\n\n        final double nanosPerChar() {\n            double charsPerRun = chars / runs;\n            long nanosPerRun = nanos / runs;\n            return charsPerRun == 0 ? nanosPerRun : nanosPerRun / charsPerRun;\n        }\n\n        final void run() {\n            runs++;\n            long time = System.nanoTime();\n            chars += check();\n            nanos += System.nanoTime() - time;\n        }\n    }\n\n    // MAKE A TEST STRING OF RANDOM CHARACTERS A-Z\n    private String makeTestString(int testSize, char start, char end) {\n        Random r = new Random();\n        char[] data = new char[testSize];\n        for (int i = 0; i &lt; data.length; i++) {\n            data[i] = (char) (start + r.nextInt(end));\n        }\n        return new String(data);\n    }\n\n    // WE DO THIS IF WE FIND AN ILLEGAL CHARACTER IN THE STRING\n    public void doThrow() {\n        throw new RuntimeException(&quot;Bzzzt -- Illegal Character!!&quot;);\n    }\n\n    /**\n     * 1. get random string of correct length 2. get tests (List&lt;Jobber&gt;) 3.\n     * perform tests repeatedly, shuffling each time\n     */\n    List&lt;Jobber&gt; test(int size, int tries, Random random) throws Exception {\n        String data = makeTestString(size, 'A', 'Z');\n        List&lt;Jobber&gt; tests = makeTests(data);\n        List&lt;Jobber&gt; copy = new ArrayList&lt;&gt;(tests);\n        while (tries-- &gt; 0) {\n            Collections.shuffle(copy, random);\n            for (Jobber ti : copy) {\n                ti.run();\n            }\n        }\n        // check to make sure all char counts the same\n        long runs = tests.get(0).runs;\n        long count = tests.get(0).chars;\n        for (Jobber ti : tests) {\n            if (ti.runs != runs &amp;&amp; ti.chars != count) {\n                throw new Exception(&quot;Char counts should match if all correct algorithms&quot;);\n            }\n        }\n        return tests;\n    }\n\n    private void printHeadings(final int TRIES_PER_STRING_SIZE, final Random random) throws Exception {\n        System.out.print(&quot;  Size&quot;);\n        for (Jobber ti : test(0, TRIES_PER_STRING_SIZE, random)) {\n            System.out.printf(&quot;%9s&quot;, ti.name);\n        }\n        System.out.println(&quot;&quot;);\n    }\n\n    private void reportResults(int size, List&lt;Jobber&gt; tests) {\n        System.out.printf(&quot;%6d&quot;, size);\n        for (Jobber ti : tests) {\n            System.out.printf(&quot;%,9.2f&quot;, ti.nanosPerChar());\n        }\n        System.out.println(&quot;&quot;);\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1448716,"reputation":6182,"user_id":1366353,"accept_rate":81,"display_name":"ceklock"},"down_vote_count":0,"up_vote_count":10,"is_accepted":false,"score":10,"last_activity_date":1383507275,"creation_date":1383506126,"answer_id":19756921,"question_id":8894258,"body_markdown":"*Just for curiosity and to compare with Saint Hill&#39;s answer.*\r\n\r\nIf you need to process heavy data you should not use JVM in client mode. Client mode is not made for optimizations. \r\n\r\nLet&#39;s compare results of @Saint Hill benchmarks using a JVM in Client mode and Server mode.\r\n\r\n    Core2Quad Q6600 G0 @ 2.4GHz\r\n    JavaSE 1.7.0_40\r\n\r\nSee also: https://stackoverflow.com/questions/198577/real-differences-between-java-server-and-java-client\r\n\r\n----------\r\n\r\n**CLIENT MODE:**\r\n\r\n    len =      2:    111k charAt(i),  105k cbuff[i],   62k new[i],   17k field access.   (chars/ms) \r\n    len =      4:    285k charAt(i),  166k cbuff[i],  114k new[i],   43k field access.   (chars/ms) \r\n    len =      6:    315k charAt(i),  230k cbuff[i],  162k new[i],   69k field access.   (chars/ms) \r\n    len =      8:    333k charAt(i),  275k cbuff[i],  181k new[i],   85k field access.   (chars/ms) \r\n    len =     12:    342k charAt(i),  342k cbuff[i],  222k new[i],  117k field access.   (chars/ms) \r\n    len =     16:    363k charAt(i),  347k cbuff[i],  275k new[i],  152k field access.   (chars/ms) \r\n    len =     20:    363k charAt(i),  392k cbuff[i],  289k new[i],  180k field access.   (chars/ms) \r\n    len =     24:    375k charAt(i),  428k cbuff[i],  311k new[i],  205k field access.   (chars/ms) \r\n    len =     28:    378k charAt(i),  474k cbuff[i],  341k new[i],  233k field access.   (chars/ms) \r\n    len =     32:    376k charAt(i),  492k cbuff[i],  340k new[i],  251k field access.   (chars/ms) \r\n    len =     64:    374k charAt(i),  551k cbuff[i],  374k new[i],  367k field access.   (chars/ms) \r\n    len =    128:    385k charAt(i),  624k cbuff[i],  415k new[i],  509k field access.   (chars/ms) \r\n    len =    256:    390k charAt(i),  675k cbuff[i],  436k new[i],  619k field access.   (chars/ms) \r\n    len =    512:    394k charAt(i),  703k cbuff[i],  439k new[i],  695k field access.   (chars/ms) \r\n    len =   1024:    395k charAt(i),  718k cbuff[i],  462k new[i],  742k field access.   (chars/ms) \r\n    len =   2048:    396k charAt(i),  725k cbuff[i],  471k new[i],  767k field access.   (chars/ms) \r\n    len =   4096:    396k charAt(i),  727k cbuff[i],  459k new[i],  780k field access.   (chars/ms) \r\n    len =   8192:    397k charAt(i),  712k cbuff[i],  446k new[i],  772k field access.   (chars/ms) \r\n\r\n----------\r\n\r\n**SERVER MODE:**\r\n\r\n    len =      2:     86k charAt(i),   41k cbuff[i],   46k new[i],   80k field access.   (chars/ms) \r\n    len =      4:    571k charAt(i),  250k cbuff[i],   97k new[i],  222k field access.   (chars/ms) \r\n    len =      6:    666k charAt(i),  333k cbuff[i],  125k new[i],  315k field access.   (chars/ms) \r\n    len =      8:    800k charAt(i),  400k cbuff[i],  181k new[i],  380k field access.   (chars/ms) \r\n    len =     12:    800k charAt(i),  521k cbuff[i],  260k new[i],  545k field access.   (chars/ms) \r\n    len =     16:    800k charAt(i),  592k cbuff[i],  296k new[i],  640k field access.   (chars/ms) \r\n    len =     20:    800k charAt(i),  666k cbuff[i],  408k new[i],  800k field access.   (chars/ms) \r\n    len =     24:    800k charAt(i),  705k cbuff[i],  452k new[i],  800k field access.   (chars/ms) \r\n    len =     28:    777k charAt(i),  736k cbuff[i],  368k new[i],  933k field access.   (chars/ms) \r\n    len =     32:    800k charAt(i),  780k cbuff[i],  571k new[i],  969k field access.   (chars/ms) \r\n    len =     64:    800k charAt(i),  901k cbuff[i],  800k new[i],  1306k field access.   (chars/ms) \r\n    len =    128:    1084k charAt(i),  888k cbuff[i],  633k new[i],  1620k field access.   (chars/ms) \r\n    len =    256:    1122k charAt(i),  966k cbuff[i],  729k new[i],  1790k field access.   (chars/ms) \r\n    len =    512:    1163k charAt(i),  1007k cbuff[i],  676k new[i],  1910k field access.   (chars/ms) \r\n    len =   1024:    1179k charAt(i),  1027k cbuff[i],  698k new[i],  1954k field access.   (chars/ms) \r\n    len =   2048:    1184k charAt(i),  1043k cbuff[i],  732k new[i],  2007k field access.   (chars/ms) \r\n    len =   4096:    1188k charAt(i),  1049k cbuff[i],  742k new[i],  2031k field access.   (chars/ms) \r\n    len =   8192:    1157k charAt(i),  1032k cbuff[i],  723k new[i],  2048k field access.   (chars/ms) \r\n\r\n\r\n----------\r\n\r\n\r\n**CONCLUSION:**\r\n\r\nAs you can see, server mode is much faster.","title":"Fastest way to iterate over all the chars in a String","body":"<p><em>Just for curiosity and to compare with Saint Hill's answer.</em></p>\n\n<p>If you need to process heavy data you should not use JVM in client mode. Client mode is not made for optimizations. </p>\n\n<p>Let's compare results of @Saint Hill benchmarks using a JVM in Client mode and Server mode.</p>\n\n<pre><code>Core2Quad Q6600 G0 @ 2.4GHz\nJavaSE 1.7.0_40\n</code></pre>\n\n<p>See also: <a href=\"https://stackoverflow.com/questions/198577/real-differences-between-java-server-and-java-client\">Real differences between &quot;java -server&quot; and &quot;java -client&quot;?</a></p>\n\n<hr>\n\n<p><strong>CLIENT MODE:</strong></p>\n\n<pre><code>len =      2:    111k charAt(i),  105k cbuff[i],   62k new[i],   17k field access.   (chars/ms) \nlen =      4:    285k charAt(i),  166k cbuff[i],  114k new[i],   43k field access.   (chars/ms) \nlen =      6:    315k charAt(i),  230k cbuff[i],  162k new[i],   69k field access.   (chars/ms) \nlen =      8:    333k charAt(i),  275k cbuff[i],  181k new[i],   85k field access.   (chars/ms) \nlen =     12:    342k charAt(i),  342k cbuff[i],  222k new[i],  117k field access.   (chars/ms) \nlen =     16:    363k charAt(i),  347k cbuff[i],  275k new[i],  152k field access.   (chars/ms) \nlen =     20:    363k charAt(i),  392k cbuff[i],  289k new[i],  180k field access.   (chars/ms) \nlen =     24:    375k charAt(i),  428k cbuff[i],  311k new[i],  205k field access.   (chars/ms) \nlen =     28:    378k charAt(i),  474k cbuff[i],  341k new[i],  233k field access.   (chars/ms) \nlen =     32:    376k charAt(i),  492k cbuff[i],  340k new[i],  251k field access.   (chars/ms) \nlen =     64:    374k charAt(i),  551k cbuff[i],  374k new[i],  367k field access.   (chars/ms) \nlen =    128:    385k charAt(i),  624k cbuff[i],  415k new[i],  509k field access.   (chars/ms) \nlen =    256:    390k charAt(i),  675k cbuff[i],  436k new[i],  619k field access.   (chars/ms) \nlen =    512:    394k charAt(i),  703k cbuff[i],  439k new[i],  695k field access.   (chars/ms) \nlen =   1024:    395k charAt(i),  718k cbuff[i],  462k new[i],  742k field access.   (chars/ms) \nlen =   2048:    396k charAt(i),  725k cbuff[i],  471k new[i],  767k field access.   (chars/ms) \nlen =   4096:    396k charAt(i),  727k cbuff[i],  459k new[i],  780k field access.   (chars/ms) \nlen =   8192:    397k charAt(i),  712k cbuff[i],  446k new[i],  772k field access.   (chars/ms) \n</code></pre>\n\n<hr>\n\n<p><strong>SERVER MODE:</strong></p>\n\n<pre><code>len =      2:     86k charAt(i),   41k cbuff[i],   46k new[i],   80k field access.   (chars/ms) \nlen =      4:    571k charAt(i),  250k cbuff[i],   97k new[i],  222k field access.   (chars/ms) \nlen =      6:    666k charAt(i),  333k cbuff[i],  125k new[i],  315k field access.   (chars/ms) \nlen =      8:    800k charAt(i),  400k cbuff[i],  181k new[i],  380k field access.   (chars/ms) \nlen =     12:    800k charAt(i),  521k cbuff[i],  260k new[i],  545k field access.   (chars/ms) \nlen =     16:    800k charAt(i),  592k cbuff[i],  296k new[i],  640k field access.   (chars/ms) \nlen =     20:    800k charAt(i),  666k cbuff[i],  408k new[i],  800k field access.   (chars/ms) \nlen =     24:    800k charAt(i),  705k cbuff[i],  452k new[i],  800k field access.   (chars/ms) \nlen =     28:    777k charAt(i),  736k cbuff[i],  368k new[i],  933k field access.   (chars/ms) \nlen =     32:    800k charAt(i),  780k cbuff[i],  571k new[i],  969k field access.   (chars/ms) \nlen =     64:    800k charAt(i),  901k cbuff[i],  800k new[i],  1306k field access.   (chars/ms) \nlen =    128:    1084k charAt(i),  888k cbuff[i],  633k new[i],  1620k field access.   (chars/ms) \nlen =    256:    1122k charAt(i),  966k cbuff[i],  729k new[i],  1790k field access.   (chars/ms) \nlen =    512:    1163k charAt(i),  1007k cbuff[i],  676k new[i],  1910k field access.   (chars/ms) \nlen =   1024:    1179k charAt(i),  1027k cbuff[i],  698k new[i],  1954k field access.   (chars/ms) \nlen =   2048:    1184k charAt(i),  1043k cbuff[i],  732k new[i],  2007k field access.   (chars/ms) \nlen =   4096:    1188k charAt(i),  1049k cbuff[i],  742k new[i],  2031k field access.   (chars/ms) \nlen =   8192:    1157k charAt(i),  1032k cbuff[i],  723k new[i],  2048k field access.   (chars/ms) \n</code></pre>\n\n<hr>\n\n<p><strong>CONCLUSION:</strong></p>\n\n<p>As you can see, server mode is much faster.</p>\n"},{"tags":[],"owner":{"account_id":734409,"reputation":7338,"user_id":699559,"accept_rate":61,"display_name":"C graphics"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1395885000,"creation_date":1395885000,"answer_id":22676782,"question_id":8894258,"body_markdown":"Despite @Saint Hill&#39;s answer if you consider the time complexity of **str.toCharArray()**, \r\n\r\nthe first one is faster even for very large strings. You can run the code below to see it for yourself.\r\n\r\n    \t\tchar [] ch = new char[1_000_000_00];\r\n\t\tString str = new String(ch); // to create a large string\r\n\r\n\t\t// ---&gt; from here\r\n\t\tlong currentTime = System.nanoTime();\r\n\t\tfor (int i = 0, n = str.length(); i &lt; n; i++) {\r\n\t\t\tchar c = str.charAt(i);\r\n\t\t}\r\n\t\t// ---&gt; to here\r\n\t\tSystem.out.println(&quot;str.charAt(i):&quot;+(System.nanoTime()-currentTime)/1000000.0 +&quot; (ms)&quot;);\r\n\r\n\t\t/**\r\n\t\t * \t ch = str.toCharArray() itself takes lots of time\t\r\n\t\t */\r\n\t\t// ---&gt; from here\r\n\t\tcurrentTime = System.nanoTime();\r\n\t\tch = str.toCharArray();\r\n\t\tfor (int i = 0, n = str.length(); i &lt; n; i++) {\r\n\t\t\tchar c = ch[i];\r\n\t\t}\r\n\t\t// ---&gt; to  here\r\n\t\tSystem.out.println(&quot;ch = str.toCharArray() + c = ch[i] :&quot;+(System.nanoTime()-currentTime)/1000000.0 +&quot; (ms)&quot;);\r\n\r\n\r\n\r\noutput:\r\n\r\n    str.charAt(i):5.492102 (ms)\r\n    ch = str.toCharArray() + c = ch[i] :79.400064 (ms)\r\n\r\n","title":"Fastest way to iterate over all the chars in a String","body":"<p>Despite @Saint Hill's answer if you consider the time complexity of <strong>str.toCharArray()</strong>, </p>\n\n<p>the first one is faster even for very large strings. You can run the code below to see it for yourself.</p>\n\n<pre><code>        char [] ch = new char[1_000_000_00];\n    String str = new String(ch); // to create a large string\n\n    // ---&gt; from here\n    long currentTime = System.nanoTime();\n    for (int i = 0, n = str.length(); i &lt; n; i++) {\n        char c = str.charAt(i);\n    }\n    // ---&gt; to here\n    System.out.println(\"str.charAt(i):\"+(System.nanoTime()-currentTime)/1000000.0 +\" (ms)\");\n\n    /**\n     *   ch = str.toCharArray() itself takes lots of time   \n     */\n    // ---&gt; from here\n    currentTime = System.nanoTime();\n    ch = str.toCharArray();\n    for (int i = 0, n = str.length(); i &lt; n; i++) {\n        char c = ch[i];\n    }\n    // ---&gt; to  here\n    System.out.println(\"ch = str.toCharArray() + c = ch[i] :\"+(System.nanoTime()-currentTime)/1000000.0 +\" (ms)\");\n</code></pre>\n\n<p>output:</p>\n\n<pre><code>str.charAt(i):5.492102 (ms)\nch = str.toCharArray() + c = ch[i] :79.400064 (ms)\n</code></pre>\n"},{"tags":[],"owner":{"account_id":7872510,"reputation":95,"user_id":5949290,"display_name":"viki s"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1501175846,"creation_date":1501175846,"answer_id":45357191,"question_id":8894258,"body_markdown":"`String.toCharArray()` creates new char array, means allocation of memory of string length, then copies original char array of string using `System.arraycopy()` and then returns this copy to caller.\r\n String.charAt() returns character at position `i` from original copy, that&#39;s why `String.charAt()` will be faster than `String.toCharArray()`.\r\nAlthough, `String.toCharArray()` returns copy and not char from original String array, where `String.charAt()` returns character from original char array.\r\nCode below returns value at the specified index of this string.\r\n\r\n    public char charAt(int index) {\r\n        if ((index &lt; 0) || (index &gt;= value.length)) {\r\n            throw new StringIndexOutOfBoundsException(index);\r\n        }\r\n        return value[index];\r\n    }\r\n   code below returns a newly allocated character array whose length is the length of this string\r\n\r\n    public char[] toCharArray() {\r\n        // Cannot use Arrays.copyOf because of class initialization order issues\r\n        char result[] = new char[value.length];\r\n        System.arraycopy(value, 0, result, 0, value.length);\r\n        return result;\r\n    }","title":"Fastest way to iterate over all the chars in a String","body":"<p><code>String.toCharArray()</code> creates new char array, means allocation of memory of string length, then copies original char array of string using <code>System.arraycopy()</code> and then returns this copy to caller.\n String.charAt() returns character at position <code>i</code> from original copy, that's why <code>String.charAt()</code> will be faster than <code>String.toCharArray()</code>.\nAlthough, <code>String.toCharArray()</code> returns copy and not char from original String array, where <code>String.charAt()</code> returns character from original char array.\nCode below returns value at the specified index of this string.</p>\n\n<pre><code>public char charAt(int index) {\n    if ((index &lt; 0) || (index &gt;= value.length)) {\n        throw new StringIndexOutOfBoundsException(index);\n    }\n    return value[index];\n}\n</code></pre>\n\n<p>code below returns a newly allocated character array whose length is the length of this string</p>\n\n<pre><code>public char[] toCharArray() {\n    // Cannot use Arrays.copyOf because of class initialization order issues\n    char result[] = new char[value.length];\n    System.arraycopy(value, 0, result, 0, value.length);\n    return result;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":23551,"reputation":30672,"user_id":59087,"accept_rate":99,"display_name":"Dave Jarvis"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1667317659,"creation_date":1660420057,"answer_id":73347224,"question_id":8894258,"body_markdown":"In many real-world scenarios, both the character value and the index into the original string are necessary. Here&#39;s another suite of `String` iteration benchmarks, tested using openjdk version &quot;19.0.1&quot; 2022-10-18 and JMH 1.35.\r\n\r\n## Source Code\r\n\r\n``` java\r\n/**\r\n * Iterates over a string, much like {@link CharacterIterator}, but faster.\r\n * &lt;p&gt;\r\n * &lt;strong&gt;Caution:&lt;/strong&gt; This class offers minimal bounds checking to eke\r\n * out some efficiency.\r\n * &lt;/p&gt;\r\n */\r\npublic final class FastCharacterIterator {\r\n\r\n  private final String mS;\r\n  private final int mLen;\r\n\r\n  /**\r\n   * Starts at 0, not guaranteed to be within bounds.\r\n   */\r\n  private int mPos;\r\n\r\n  /**\r\n   * Constructs a new iterator that can advance through the given string\r\n   * one character at a time.\r\n   *\r\n   * @param s The string to iterate.\r\n   */\r\n  public FastCharacterIterator( final String s ) {\r\n    assert s != null;\r\n\r\n    mS = s;\r\n    mLen = s.length();\r\n  }\r\n\r\n  /**\r\n   * Returns the iterated index. The return value is not guaranteed to be\r\n   * within the string bounds.\r\n   *\r\n   * @return The iterated index.\r\n   */\r\n  public int index() {\r\n    return mPos;\r\n  }\r\n\r\n  /**\r\n   * Returns the character at the currently iterated position in the string.\r\n   * This method performs bounds checking by catching an exception because\r\n   * usually parsing is complete when there are no more characters to iterate,\r\n   * meaning that 99.99% of the time, explicit bounds checking is superfluous.\r\n   *\r\n   * @return {@link CharacterIterator#DONE} if there are no more characters.\r\n   */\r\n  public char current() {\r\n    try {\r\n      return mS.charAt( mPos );\r\n    } catch( final Exception ex ) {\r\n      return DONE;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Returns the next character in the string and consumes it.\r\n   *\r\n   * @return {@link CharacterIterator#DONE} if there are no more characters.\r\n   */\r\n  public char advance() {\r\n    try {\r\n      return mS.charAt( ++mPos );\r\n    } catch( final Exception ex ) {\r\n      return DONE;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Returns the next character in the string without consuming it. Multiple\r\n   * consecutive calls to this method will return the same value.\r\n   *\r\n   * @return {@link CharacterIterator#DONE} if there are no more characters.\r\n   */\r\n  public char peek() {\r\n    try {\r\n      return mS.charAt( mPos + 1 );\r\n    } catch( final Exception ex ) {\r\n      return DONE;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Advances to the next character in the string, without bounds checking.\r\n   */\r\n  public void next() {\r\n    mPos++;\r\n  }\r\n\r\n  /**\r\n   * Advances to the previous character in the string, without bounds checking.\r\n   */\r\n  public void prev() {\r\n    mPos--;\r\n  }\r\n\r\n  /**\r\n   * Answers whether {@link #next()} followed by {@link #current()} is safe.\r\n   *\r\n   * @return {@code true} if there are more characters to be iterated.\r\n   */\r\n  public boolean hasNext() {\r\n    return mPos &lt; mLen;\r\n  }\r\n\r\n  /**\r\n   * Parse all characters that match a given function.\r\n   *\r\n   * @param f The function that determines when skipping stops.\r\n   */\r\n  @SuppressWarnings( &quot;StatementWithEmptyBody&quot; )\r\n  public void skip( final Function&lt;Character, Boolean&gt; f ) {\r\n    assert f != null;\r\n\r\n    while( f.apply( advance() ) ) ;\r\n\r\n    // The loop always overshoots by one character.\r\n    prev();\r\n  }\r\n\r\n  /**\r\n   * Creates a string from a subset of consecutive characters in the string\r\n   * being iterated. The calling class is responsible for bounds-checking.\r\n   *\r\n   * @param began The starting index, must be greater than or equal to zero\r\n   *              and less than or equal to {@code ended}.\r\n   * @param ended The ending index, must be less than the string length.\r\n   * @return A substring of the iterated string.\r\n   * @throws IndexOutOfBoundsException Either or both parameters exceed the\r\n   *                                   string&#39;s boundaries.\r\n   */\r\n  public String substring( final int began, final int ended ) {\r\n    assert began &gt;= 0;\r\n    assert began &lt;= ended;\r\n    assert ended &lt; mLen;\r\n\r\n    return mS.substring( began, ended );\r\n  }\r\n}\r\n\r\n```\r\n\r\n## Testing Code\r\n\r\nThe full source code used for testing:\r\n\r\n``` java\r\nimport com.whitemagicsoftware.keenquotes.util.FastCharacterIterator;\r\nimport org.openjdk.jmh.annotations.Benchmark;\r\n\r\nimport java.text.StringCharacterIterator;\r\nimport java.util.StringTokenizer;\r\nimport java.util.concurrent.atomic.AtomicInteger;\r\n\r\nimport static java.lang.Math.random;\r\nimport static java.text.CharacterIterator.DONE;\r\n\r\n/**\r\n * Higher scores mean faster code:\r\n *\r\n * &lt;pre&gt;\r\n * Benchmark                     Mode   Cnt    Score    Error  Units\r\n * test_CharArrayIterator        thrpt   25  753.960 &#177;  0.972  ops/s\r\n * test_CharAtIterator           thrpt   25  878.016 &#177;  0.884  ops/s\r\n * test_FastCharacterIterator    thrpt   25  803.041 &#177; 48.422  ops/s\r\n * test_StreamIterator           thrpt   25  101.416 &#177;  0.053  ops/s\r\n * test_StringCharacterIterator  thrpt   25  580.341 &#177;  0.432  ops/s\r\n * test_StringTokenizer          thrpt   25  174.121 &#177;  8.282  ops/s\r\n * &lt;/pre&gt;\r\n */\r\n@SuppressWarnings( &quot;unused&quot; )\r\npublic class StringIterationBenchmark {\r\n  private static final int STRLEN = 1024 * 1024;\r\n  private static final String CHARSET =\r\n    &quot;ABCDEFGHIJKLM NOPQRSTUVWXYZ abcdefghijklm nopqrstuvxyz 01234 5 6789&quot;;\r\n\r\n  private static final String sText;\r\n\r\n  static {\r\n    final var len = CHARSET.length();\r\n    final var buffer = new StringBuilder( STRLEN );\r\n\r\n    for( var i = 0; i &lt; STRLEN; i++ ) {\r\n      buffer.append( CHARSET.charAt( (int) (len * random()) ) );\r\n    }\r\n\r\n    sText = buffer.toString();\r\n  }\r\n\r\n  private static String getText() {\r\n    return sText;\r\n  }\r\n\r\n  @Benchmark\r\n  public void test_FastCharacterIterator() {\r\n    final var s = getText();\r\n    final var i = new FastCharacterIterator( s );\r\n    var spaces = 0;\r\n\r\n    char ch = &#39; &#39;;\r\n\r\n    while( (ch = i.advance()) != DONE ) {\r\n      if( ch == &#39; &#39; ) {\r\n        spaces++;\r\n      }\r\n    }\r\n\r\n    fail( i.index(), s.length() );\r\n  }\r\n\r\n  @Benchmark\r\n  public void test_CharAtIterator() {\r\n    final var s = getText();\r\n    final var length = s.length();\r\n    var index = 0;\r\n    var spaces = 0;\r\n\r\n    while( index &lt; length ) {\r\n      final var ch = s.charAt( index );\r\n\r\n      if( ch == &#39; &#39; ) {\r\n        spaces++;\r\n      }\r\n\r\n      index++;\r\n    }\r\n\r\n    fail( index, length );\r\n  }\r\n\r\n  @Benchmark\r\n  public void test_StringCharacterIterator() {\r\n    final var s = getText();\r\n    final var i = new StringCharacterIterator( s );\r\n    var index = 0;\r\n    var spaces = 0;\r\n\r\n    char ch = &#39; &#39;;\r\n\r\n    while( ch != DONE ) {\r\n      ch = i.next();\r\n\r\n      if( ch == &#39; &#39; ) {\r\n        spaces++;\r\n      }\r\n\r\n      index++;\r\n    }\r\n\r\n    fail( index, s.length() );\r\n  }\r\n\r\n  @Benchmark\r\n  public void test_CharArrayIterator() {\r\n    final var s = getText();\r\n    final var i = s.toCharArray();\r\n    var index = 0;\r\n    var spaces = 0;\r\n\r\n    for( final var ch : i ) {\r\n      if( ch == &#39; &#39; ) {\r\n        spaces++;\r\n      }\r\n\r\n      index++;\r\n    }\r\n\r\n    fail( index, s.length() );\r\n  }\r\n\r\n  @Benchmark\r\n  public void test_StringTokenizer() {\r\n    final var s = getText();\r\n    final var i = new StringTokenizer( s, &quot; &quot;, true );\r\n    var index = 0;\r\n    var spaces = 0;\r\n\r\n    while( i.hasMoreTokens() ) {\r\n      final var token = i.nextToken();\r\n\r\n      if( token.isBlank() ) {\r\n        spaces++;\r\n      }\r\n\r\n      index += token.length();\r\n    }\r\n\r\n    fail( index, s.length() );\r\n  }\r\n\r\n  @Benchmark\r\n  public void test_StreamIterator() {\r\n    final var s = getText();\r\n    final var index = new AtomicInteger();\r\n    final var spaces = new AtomicInteger();\r\n\r\n    s.chars().forEach( codepoint -&gt; {\r\n      final var ch = Character.valueOf( (char) codepoint );\r\n\r\n      if( ch == &#39; &#39; ) {\r\n        spaces.incrementAndGet();\r\n      }\r\n\r\n      index.incrementAndGet();\r\n    } );\r\n\r\n    fail( index.get(), s.length() );\r\n  }\r\n\r\n  private static void fail( final int index, final int length ) {\r\n    if( index != length ) {\r\n      throw new RuntimeException( &quot;Fail&quot; );\r\n    }\r\n  }\r\n}\r\n```\r\n\r\n## Comments\r\n\r\nFeel free to improve the code and re-run the benchmarks. Gripes will be sent to `/dev/null`. StackOverflow is a wiki.\r\n\r\n\r\n  [1]: https://github.com/DaveJarvis/keenquotes/blob/main/src/main/java/com/whitemagicsoftware/keenquotes/util/FastCharacterIterator.java","title":"Fastest way to iterate over all the chars in a String","body":"<p>In many real-world scenarios, both the character value and the index into the original string are necessary. Here's another suite of <code>String</code> iteration benchmarks, tested using openjdk version &quot;19.0.1&quot; 2022-10-18 and JMH 1.35.</p>\n<h2>Source Code</h2>\n<pre class=\"lang-java prettyprint-override\"><code>/**\n * Iterates over a string, much like {@link CharacterIterator}, but faster.\n * &lt;p&gt;\n * &lt;strong&gt;Caution:&lt;/strong&gt; This class offers minimal bounds checking to eke\n * out some efficiency.\n * &lt;/p&gt;\n */\npublic final class FastCharacterIterator {\n\n  private final String mS;\n  private final int mLen;\n\n  /**\n   * Starts at 0, not guaranteed to be within bounds.\n   */\n  private int mPos;\n\n  /**\n   * Constructs a new iterator that can advance through the given string\n   * one character at a time.\n   *\n   * @param s The string to iterate.\n   */\n  public FastCharacterIterator( final String s ) {\n    assert s != null;\n\n    mS = s;\n    mLen = s.length();\n  }\n\n  /**\n   * Returns the iterated index. The return value is not guaranteed to be\n   * within the string bounds.\n   *\n   * @return The iterated index.\n   */\n  public int index() {\n    return mPos;\n  }\n\n  /**\n   * Returns the character at the currently iterated position in the string.\n   * This method performs bounds checking by catching an exception because\n   * usually parsing is complete when there are no more characters to iterate,\n   * meaning that 99.99% of the time, explicit bounds checking is superfluous.\n   *\n   * @return {@link CharacterIterator#DONE} if there are no more characters.\n   */\n  public char current() {\n    try {\n      return mS.charAt( mPos );\n    } catch( final Exception ex ) {\n      return DONE;\n    }\n  }\n\n  /**\n   * Returns the next character in the string and consumes it.\n   *\n   * @return {@link CharacterIterator#DONE} if there are no more characters.\n   */\n  public char advance() {\n    try {\n      return mS.charAt( ++mPos );\n    } catch( final Exception ex ) {\n      return DONE;\n    }\n  }\n\n  /**\n   * Returns the next character in the string without consuming it. Multiple\n   * consecutive calls to this method will return the same value.\n   *\n   * @return {@link CharacterIterator#DONE} if there are no more characters.\n   */\n  public char peek() {\n    try {\n      return mS.charAt( mPos + 1 );\n    } catch( final Exception ex ) {\n      return DONE;\n    }\n  }\n\n  /**\n   * Advances to the next character in the string, without bounds checking.\n   */\n  public void next() {\n    mPos++;\n  }\n\n  /**\n   * Advances to the previous character in the string, without bounds checking.\n   */\n  public void prev() {\n    mPos--;\n  }\n\n  /**\n   * Answers whether {@link #next()} followed by {@link #current()} is safe.\n   *\n   * @return {@code true} if there are more characters to be iterated.\n   */\n  public boolean hasNext() {\n    return mPos &lt; mLen;\n  }\n\n  /**\n   * Parse all characters that match a given function.\n   *\n   * @param f The function that determines when skipping stops.\n   */\n  @SuppressWarnings( &quot;StatementWithEmptyBody&quot; )\n  public void skip( final Function&lt;Character, Boolean&gt; f ) {\n    assert f != null;\n\n    while( f.apply( advance() ) ) ;\n\n    // The loop always overshoots by one character.\n    prev();\n  }\n\n  /**\n   * Creates a string from a subset of consecutive characters in the string\n   * being iterated. The calling class is responsible for bounds-checking.\n   *\n   * @param began The starting index, must be greater than or equal to zero\n   *              and less than or equal to {@code ended}.\n   * @param ended The ending index, must be less than the string length.\n   * @return A substring of the iterated string.\n   * @throws IndexOutOfBoundsException Either or both parameters exceed the\n   *                                   string's boundaries.\n   */\n  public String substring( final int began, final int ended ) {\n    assert began &gt;= 0;\n    assert began &lt;= ended;\n    assert ended &lt; mLen;\n\n    return mS.substring( began, ended );\n  }\n}\n\n</code></pre>\n<h2>Testing Code</h2>\n<p>The full source code used for testing:</p>\n<pre class=\"lang-java prettyprint-override\"><code>import com.whitemagicsoftware.keenquotes.util.FastCharacterIterator;\nimport org.openjdk.jmh.annotations.Benchmark;\n\nimport java.text.StringCharacterIterator;\nimport java.util.StringTokenizer;\nimport java.util.concurrent.atomic.AtomicInteger;\n\nimport static java.lang.Math.random;\nimport static java.text.CharacterIterator.DONE;\n\n/**\n * Higher scores mean faster code:\n *\n * &lt;pre&gt;\n * Benchmark                     Mode   Cnt    Score    Error  Units\n * test_CharArrayIterator        thrpt   25  753.960 ±  0.972  ops/s\n * test_CharAtIterator           thrpt   25  878.016 ±  0.884  ops/s\n * test_FastCharacterIterator    thrpt   25  803.041 ± 48.422  ops/s\n * test_StreamIterator           thrpt   25  101.416 ±  0.053  ops/s\n * test_StringCharacterIterator  thrpt   25  580.341 ±  0.432  ops/s\n * test_StringTokenizer          thrpt   25  174.121 ±  8.282  ops/s\n * &lt;/pre&gt;\n */\n@SuppressWarnings( &quot;unused&quot; )\npublic class StringIterationBenchmark {\n  private static final int STRLEN = 1024 * 1024;\n  private static final String CHARSET =\n    &quot;ABCDEFGHIJKLM NOPQRSTUVWXYZ abcdefghijklm nopqrstuvxyz 01234 5 6789&quot;;\n\n  private static final String sText;\n\n  static {\n    final var len = CHARSET.length();\n    final var buffer = new StringBuilder( STRLEN );\n\n    for( var i = 0; i &lt; STRLEN; i++ ) {\n      buffer.append( CHARSET.charAt( (int) (len * random()) ) );\n    }\n\n    sText = buffer.toString();\n  }\n\n  private static String getText() {\n    return sText;\n  }\n\n  @Benchmark\n  public void test_FastCharacterIterator() {\n    final var s = getText();\n    final var i = new FastCharacterIterator( s );\n    var spaces = 0;\n\n    char ch = ' ';\n\n    while( (ch = i.advance()) != DONE ) {\n      if( ch == ' ' ) {\n        spaces++;\n      }\n    }\n\n    fail( i.index(), s.length() );\n  }\n\n  @Benchmark\n  public void test_CharAtIterator() {\n    final var s = getText();\n    final var length = s.length();\n    var index = 0;\n    var spaces = 0;\n\n    while( index &lt; length ) {\n      final var ch = s.charAt( index );\n\n      if( ch == ' ' ) {\n        spaces++;\n      }\n\n      index++;\n    }\n\n    fail( index, length );\n  }\n\n  @Benchmark\n  public void test_StringCharacterIterator() {\n    final var s = getText();\n    final var i = new StringCharacterIterator( s );\n    var index = 0;\n    var spaces = 0;\n\n    char ch = ' ';\n\n    while( ch != DONE ) {\n      ch = i.next();\n\n      if( ch == ' ' ) {\n        spaces++;\n      }\n\n      index++;\n    }\n\n    fail( index, s.length() );\n  }\n\n  @Benchmark\n  public void test_CharArrayIterator() {\n    final var s = getText();\n    final var i = s.toCharArray();\n    var index = 0;\n    var spaces = 0;\n\n    for( final var ch : i ) {\n      if( ch == ' ' ) {\n        spaces++;\n      }\n\n      index++;\n    }\n\n    fail( index, s.length() );\n  }\n\n  @Benchmark\n  public void test_StringTokenizer() {\n    final var s = getText();\n    final var i = new StringTokenizer( s, &quot; &quot;, true );\n    var index = 0;\n    var spaces = 0;\n\n    while( i.hasMoreTokens() ) {\n      final var token = i.nextToken();\n\n      if( token.isBlank() ) {\n        spaces++;\n      }\n\n      index += token.length();\n    }\n\n    fail( index, s.length() );\n  }\n\n  @Benchmark\n  public void test_StreamIterator() {\n    final var s = getText();\n    final var index = new AtomicInteger();\n    final var spaces = new AtomicInteger();\n\n    s.chars().forEach( codepoint -&gt; {\n      final var ch = Character.valueOf( (char) codepoint );\n\n      if( ch == ' ' ) {\n        spaces.incrementAndGet();\n      }\n\n      index.incrementAndGet();\n    } );\n\n    fail( index.get(), s.length() );\n  }\n\n  private static void fail( final int index, final int length ) {\n    if( index != length ) {\n      throw new RuntimeException( &quot;Fail&quot; );\n    }\n  }\n}\n</code></pre>\n<h2>Comments</h2>\n<p>Feel free to improve the code and re-run the benchmarks. Gripes will be sent to <code>/dev/null</code>. StackOverflow is a wiki.</p>\n"}],"owner":{"account_id":69149,"reputation":233552,"user_id":201359,"accept_rate":100,"display_name":"&#211;scar L&#243;pez"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":291195,"favorite_count":0,"down_vote_count":3,"up_vote_count":190,"accepted_answer_id":11876086,"answer_count":9,"score":187,"last_activity_date":1667317659,"creation_date":1326801733,"question_id":8894258,"body_markdown":"In Java, what would the fastest way to iterate over all the chars in a String, this:\r\n\r\n\tString str = &quot;a really, really long string&quot;;\r\n\tfor (int i = 0, n = str.length(); i &lt; n; i++) {\r\n\t\tchar c = str.charAt(i);\r\n\t}\r\n\r\n\r\nOr this:\r\n\r\n\tchar[] chars = str.toCharArray();\r\n\tfor (int i = 0, n = chars.length; i &lt; n; i++) {\r\n\t\tchar c = chars[i];\r\n\t}\r\n\r\n**EDIT :**\r\n\r\nWhat I&#39;d like to know is if the cost of repeatedly calling the `charAt` method during a long iteration ends up being either less than or greater than the cost of performing a single call to `toCharArray` at the beginning and then directly accessing the array during the iteration.\r\n\r\nIt&#39;d be great if someone could provide a robust benchmark for different string lengths, having in mind JIT warm-up time, JVM start-up time, etc. and not just the difference between two calls to `System.currentTimeMillis()`.","title":"Fastest way to iterate over all the chars in a String","body":"<p>In Java, what would the fastest way to iterate over all the chars in a String, this:</p>\n\n<pre><code>String str = \"a really, really long string\";\nfor (int i = 0, n = str.length(); i &lt; n; i++) {\n    char c = str.charAt(i);\n}\n</code></pre>\n\n<p>Or this:</p>\n\n<pre><code>char[] chars = str.toCharArray();\nfor (int i = 0, n = chars.length; i &lt; n; i++) {\n    char c = chars[i];\n}\n</code></pre>\n\n<p><strong>EDIT :</strong></p>\n\n<p>What I'd like to know is if the cost of repeatedly calling the <code>charAt</code> method during a long iteration ends up being either less than or greater than the cost of performing a single call to <code>toCharArray</code> at the beginning and then directly accessing the array during the iteration.</p>\n\n<p>It'd be great if someone could provide a robust benchmark for different string lengths, having in mind JIT warm-up time, JVM start-up time, etc. and not just the difference between two calls to <code>System.currentTimeMillis()</code>.</p>\n"},{"tags":["java","google-cloud-firestore","protocol-buffers","grpc"],"comments":[{"owner":{"account_id":301516,"reputation":34141,"user_id":609290,"accept_rate":62,"display_name":"DazWilkin"},"score":0,"creation_date":1667173523,"post_id":74246067,"comment_id":131101995,"body_markdown":"Google (increasingly) uses Protobuf to define the types for its APIs even though the majority of its services continue to expose REST endpoints (only a few are gRPC). Using Protobuf provides a mechanism for defining types one e.g. [`query.proto`](https://github.com/googleapis/googleapis/blob/master/google/firestore/v1/query.proto) and using these in any language (particularly those languages it supports in its SDKs). With the REST endpoints, the libraries marshal the protos are JSON and ship them to/from servers.","body":"Google (increasingly) uses Protobuf to define the types for its APIs even though the majority of its services continue to expose REST endpoints (only a few are gRPC). Using Protobuf provides a mechanism for defining types one e.g. <a href=\"https://github.com/googleapis/googleapis/blob/master/google/firestore/v1/query.proto\" rel=\"nofollow noreferrer\"><code>query.proto</code></a> and using these in any language (particularly those languages it supports in its SDKs). With the REST endpoints, the libraries marshal the protos are JSON and ship them to/from servers."},{"owner":{"account_id":301516,"reputation":34141,"user_id":609290,"accept_rate":62,"display_name":"DazWilkin"},"score":0,"creation_date":1667173595,"post_id":74246067,"comment_id":131102001,"body_markdown":"I was unaware of the [`toProto`](https://cloud.google.com/java/docs/reference/google-cloud-firestore/latest/com.google.cloud.firestore.Query#com_google_cloud_firestore_Query_toProto__) until your question and think this -- and related -- method(s) aren&#39;t surfaced in every Firestore language client (e.g. not in [Go](https://pkg.go.dev/cloud.google.com/go/firestore#Query) or [Python](https://cloud.google.com/python/docs/reference/firestore/latest/google.cloud.firestore_v1.query.Query#google_cloud_firestore_v1_query_Query_get)).","body":"I was unaware of the <a href=\"https://cloud.google.com/java/docs/reference/google-cloud-firestore/latest/com.google.cloud.firestore.Query#com_google_cloud_firestore_Query_toProto__\" rel=\"nofollow noreferrer\"><code>toProto</code></a> until your question and think this -- and related -- method(s) aren&#39;t surfaced in every Firestore language client (e.g. not in <a href=\"https://pkg.go.dev/cloud.google.com/go/firestore#Query\" rel=\"nofollow noreferrer\">Go</a> or <a href=\"https://cloud.google.com/python/docs/reference/firestore/latest/google.cloud.firestore_v1.query.Query#google_cloud_firestore_v1_query_Query_get\" rel=\"nofollow noreferrer\">Python</a>)."},{"owner":{"account_id":301516,"reputation":34141,"user_id":609290,"accept_rate":62,"display_name":"DazWilkin"},"score":0,"creation_date":1667174065,"post_id":74246067,"comment_id":131102067,"body_markdown":"I don&#39;t know the answer to your question, but you&#39;ve three options. Where not surfaced through the SDK, use the generated proto bindings to marshal|unmarshal queries as binary protos. Or, perhaps more simply JSON format the protos. The text format that you include in your questions isn&#39;t as common and may be more challenging to use.","body":"I don&#39;t know the answer to your question, but you&#39;ve three options. Where not surfaced through the SDK, use the generated proto bindings to marshal|unmarshal queries as binary protos. Or, perhaps more simply JSON format the protos. The text format that you include in your questions isn&#39;t as common and may be more challenging to use."},{"owner":{"account_id":301516,"reputation":34141,"user_id":609290,"accept_rate":62,"display_name":"DazWilkin"},"score":0,"creation_date":1667186911,"post_id":74246067,"comment_id":131103604,"body_markdown":"Actually, the Go library does include [`Deserialize`](https://pkg.go.dev/cloud.google.com/go/firestore#Query.Deserialize) and [`Serialize`](https://pkg.go.dev/cloud.google.com/go/firestore#Query.Serialize) methods described &quot;This could be useful, for instance, if executing a query formed in one process in another.&quot;","body":"Actually, the Go library does include <a href=\"https://pkg.go.dev/cloud.google.com/go/firestore#Query.Deserialize\" rel=\"nofollow noreferrer\"><code>Deserialize</code></a> and <a href=\"https://pkg.go.dev/cloud.google.com/go/firestore#Query.Serialize\" rel=\"nofollow noreferrer\"><code>Serialize</code></a> methods described &quot;This could be useful, for instance, if executing a query formed in one process in another.&quot;"}],"answers":[{"tags":[],"owner":{"account_id":17024750,"reputation":152,"user_id":12316314,"display_name":"garawaa garawaa"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1667317654,"creation_date":1667317654,"answer_id":74278431,"question_id":74246067,"body_markdown":"I solved this problem using java String.format and StructuredQuery class.\r\nThanks all for answer.","title":"How to generate languages query method codes for firestore query protos?","body":"<p>I solved this problem using java String.format and StructuredQuery class.\nThanks all for answer.</p>\n"}],"owner":{"account_id":17024750,"reputation":152,"user_id":12316314,"display_name":"garawaa garawaa"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":58,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1667317654,"creation_date":1667053164,"question_id":74246067,"body_markdown":"I&#39;m developing a desktop application with firestore database in java. \r\nI want to generate query method for specific programming languages that supports protobuf.\r\nMy question is is there any way to auto generate query function or methods using google protobuf framework?\r\n\r\nIn java \r\n\r\n    Query query= db.collection(&quot;col2&quot;).whereGreaterThanOrEqualTo(name, &quot;a&quot;).orderBy(name, Direction.ASCENDING).limit(50);\r\n    RunQueryRequest  runQueryRequest = query.toProto();\r\n    StructuredQuery structuredQuery = runQueryRequest.getStructuredQuery();\r\n    System.out.println(&quot;structuredQuery: &quot; + structuredQuery);\r\n\r\nThis code prints some proto formatted string like\r\n\r\n    from {\r\n      collection_id: &quot;col2&quot;\r\n    }\r\n    where {\r\n      field_filter {\r\n        field {\r\n          field_path: &quot;name&quot;\r\n        }\r\n        op: GREATER_THAN_OR_EQUAL\r\n        value {\r\n          string_value: &quot;a&quot;\r\n        }\r\n      }\r\n    }\r\n    order_by {\r\n      field {\r\n        field_path: &quot;name&quot;\r\n      }\r\n      direction: ASCENDING\r\n    }\r\n    limit {\r\n      value: 50\r\n    }\r\n\r\nI just want convert above java code to other languages using this proto string. But I don&#39;t know how to do it. Thank you for your answer.","title":"How to generate languages query method codes for firestore query protos?","body":"<p>I'm developing a desktop application with firestore database in java.\nI want to generate query method for specific programming languages that supports protobuf.\nMy question is is there any way to auto generate query function or methods using google protobuf framework?</p>\n<p>In java</p>\n<pre><code>Query query= db.collection(&quot;col2&quot;).whereGreaterThanOrEqualTo(name, &quot;a&quot;).orderBy(name, Direction.ASCENDING).limit(50);\nRunQueryRequest  runQueryRequest = query.toProto();\nStructuredQuery structuredQuery = runQueryRequest.getStructuredQuery();\nSystem.out.println(&quot;structuredQuery: &quot; + structuredQuery);\n</code></pre>\n<p>This code prints some proto formatted string like</p>\n<pre><code>from {\n  collection_id: &quot;col2&quot;\n}\nwhere {\n  field_filter {\n    field {\n      field_path: &quot;name&quot;\n    }\n    op: GREATER_THAN_OR_EQUAL\n    value {\n      string_value: &quot;a&quot;\n    }\n  }\n}\norder_by {\n  field {\n    field_path: &quot;name&quot;\n  }\n  direction: ASCENDING\n}\nlimit {\n  value: 50\n}\n</code></pre>\n<p>I just want convert above java code to other languages using this proto string. But I don't know how to do it. Thank you for your answer.</p>\n"},{"tags":["java","selenium","if-statement","dry","rest-assured"],"answers":[{"tags":[],"owner":{"account_id":10263942,"reputation":5676,"user_id":7574461,"display_name":"lucas-nguyen-17"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1667264242,"creation_date":1667264242,"answer_id":74270464,"question_id":74264934,"body_markdown":"You can refactor like this.\r\n\r\n```java\r\nRequestSpecification reSpec = given().queryParam(THING, theThing);\r\nif(condition){\r\n    reSpec.queryParam(SPECIAL_THING, anotherThing);\r\n}\r\nreSpec.get();\r\n```","title":"How can I write this conditional if statement without duplicating function calls?","body":"<p>You can refactor like this.</p>\n<pre class=\"lang-java prettyprint-override\"><code>RequestSpecification reSpec = given().queryParam(THING, theThing);\nif(condition){\n    reSpec.queryParam(SPECIAL_THING, anotherThing);\n}\nreSpec.get();\n</code></pre>\n"}],"owner":{"account_id":16642027,"reputation":25,"user_id":12027299,"display_name":"Andrew Walker"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":66,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":74270464,"answer_count":1,"score":0,"last_activity_date":1667317468,"creation_date":1667227028,"question_id":74264934,"body_markdown":"I&#39;d like to refactor this Java/RestAssured code to remove the if statement altogether\r\n\r\n    if (someCondition) {    \r\n        someRequestSpecification    \r\n            .given()    \r\n            .queryParam(THING, theThing)    \r\n            .queryParam(SPECIAL_THING, anotherThing)    \r\n            .get()\r\n    } else {    \r\n        someRequestSpecification    \r\n            .given()    \r\n            .queryParam(THING, theThing)    \r\n            .get()    \r\n    }\r\n\r\nIn other words I want to be able to omit the SPECIAL_THING param completely based on a condition but without having to duplicate the .given() code.\r\n\r\n\r\nCurrently I have the code working with the duplicated lines within an if statement but it&#39;s ugly.\r\n","title":"How can I write this conditional if statement without duplicating function calls?","body":"<p>I'd like to refactor this Java/RestAssured code to remove the if statement altogether</p>\n<pre><code>if (someCondition) {    \n    someRequestSpecification    \n        .given()    \n        .queryParam(THING, theThing)    \n        .queryParam(SPECIAL_THING, anotherThing)    \n        .get()\n} else {    \n    someRequestSpecification    \n        .given()    \n        .queryParam(THING, theThing)    \n        .get()    \n}\n</code></pre>\n<p>In other words I want to be able to omit the SPECIAL_THING param completely based on a condition but without having to duplicate the .given() code.</p>\n<p>Currently I have the code working with the duplicated lines within an if statement but it's ugly.</p>\n"},{"tags":["java","swing"],"comments":[{"owner":{"account_id":44852,"reputation":322224,"user_id":131872,"accept_rate":100,"display_name":"camickr"},"score":3,"creation_date":1667316864,"post_id":74278146,"comment_id":131136548,"body_markdown":"1) Don&#39;t use a while loop for animation. Instead, use a Swing Timer. 2) Don&#39;t override paint(). Instead override `paintComonent(...)`. 3) Don&#39;t invoke repaint() from a painting method. 4) The objects to be painted should be contained in the panel doing the paint, NOT the frame. 5) Don&#39;t call your class &quot;Panel&quot; and &quot;Frame&quot;. There are AWT components with that name and it is confusing. Class names should be more descriptive. 6) Check out: https://stackoverflow.com/a/54028681/131872 for an example that implements the above suggestions.","body":"1) Don&#39;t use a while loop for animation. Instead, use a Swing Timer. 2) Don&#39;t override paint(). Instead override <code>paintComonent(...)</code>. 3) Don&#39;t invoke repaint() from a painting method. 4) The objects to be painted should be contained in the panel doing the paint, NOT the frame. 5) Don&#39;t call your class &quot;Panel&quot; and &quot;Frame&quot;. There are AWT components with that name and it is confusing. Class names should be more descriptive. 6) Check out: <a href=\"https://stackoverflow.com/a/54028681/131872\">stackoverflow.com/a/54028681/131872</a> for an example that implements the above suggestions."},{"owner":{"account_id":114128,"reputation":50422,"user_id":300257,"accept_rate":89,"display_name":"Gilbert Le Blanc"},"score":1,"creation_date":1667318449,"post_id":74278146,"comment_id":131137141,"body_markdown":"Here&#39;s a detailed explanation of a `Ball` class in a [Java classic Pong game](https://stackoverflow.com/questions/66732003/how-to-add-smooth-movement-to-my-java-game/66734544#66734544).","body":"Here&#39;s a detailed explanation of a <code>Ball</code> class in a <a href=\"https://stackoverflow.com/questions/66732003/how-to-add-smooth-movement-to-my-java-game/66734544#66734544\">Java classic Pong game</a>."},{"owner":{"account_id":1689973,"reputation":37280,"user_id":1552534,"display_name":"WJS"},"score":0,"creation_date":1667321224,"post_id":74278146,"comment_id":131138145,"body_markdown":"Here&#39;s and example of smooth transitions. [Bouncing Balls](https://stackoverflow.com/a/66833594/1552534).  They only bounce off the sides.  This also uses a timer as suggested.","body":"Here&#39;s and example of smooth transitions. <a href=\"https://stackoverflow.com/a/66833594/1552534\">Bouncing Balls</a>.  They only bounce off the sides.  This also uses a timer as suggested."},{"owner":{"account_id":22931746,"reputation":1,"user_id":17065903,"display_name":"Tonda"},"score":0,"creation_date":1668709303,"post_id":74278146,"comment_id":131478057,"body_markdown":"First thing, thank to you all for the answers.\nSecond thing: I tried to improve the code by implementing camickr suggestions and by &quot;taking inspiration&quot; from @WJS &#39;s code. This said I would still like to ask two things:\n1] Is the &quot;crispy&quot; ball movement (at high velocity) fixable? &#39;Cause I tried Gilbert&#39;s pong code an it has the same problem, even if mine is a bit different due to physics being implemented (gravity :D)\n2] What&#39;s the best way to implement a frame per second control system (&#39;cause I noticed that sometimes stuff moves faster for no apparent reason)","body":"First thing, thank to you all for the answers. Second thing: I tried to improve the code by implementing camickr suggestions and by &quot;taking inspiration&quot; from @WJS &#39;s code. This said I would still like to ask two things: 1] Is the &quot;crispy&quot; ball movement (at high velocity) fixable? &#39;Cause I tried Gilbert&#39;s pong code an it has the same problem, even if mine is a bit different due to physics being implemented (gravity :D) 2] What&#39;s the best way to implement a frame per second control system (&#39;cause I noticed that sometimes stuff moves faster for no apparent reason)"},{"owner":{"account_id":22931746,"reputation":1,"user_id":17065903,"display_name":"Tonda"},"score":0,"creation_date":1668710055,"post_id":74278146,"comment_id":131478335,"body_markdown":"also @WJS what is &quot;slope&quot; for in your code?","body":"also @WJS what is &quot;slope&quot; for in your code?"},{"owner":{"account_id":1689973,"reputation":37280,"user_id":1552534,"display_name":"WJS"},"score":0,"creation_date":1668711106,"post_id":74278146,"comment_id":131478678,"body_markdown":"Each ball has a default slope generated at random.  It is used to create the standard path of each ball.  It is later used when the balls collide with a side to ensure the angle comes off each side appropriately.   It wouldn&#39;t make sense for a ball to bounce off the side coming in at a 45 degree angle but bounce away at 90.  It must come off at 45 degrees (unless &quot;English&quot; were to be applied as in pool).   The only thing that changes is the direction.  If you comment out the default slope in the Ball class you will see a boring display of balls moving back and forth at the top of the window.","body":"Each ball has a default slope generated at random.  It is used to create the standard path of each ball.  It is later used when the balls collide with a side to ensure the angle comes off each side appropriately.   It wouldn&#39;t make sense for a ball to bounce off the side coming in at a 45 degree angle but bounce away at 90.  It must come off at 45 degrees (unless &quot;English&quot; were to be applied as in pool).   The only thing that changes is the direction.  If you comment out the default slope in the Ball class you will see a boring display of balls moving back and forth at the top of the window."},{"owner":{"account_id":1689973,"reputation":37280,"user_id":1552534,"display_name":"WJS"},"score":0,"creation_date":1668712119,"post_id":74278146,"comment_id":131479021,"body_markdown":"BTW,  in main, I should be doing the following to start the app. `SwingUtilities.invokeLater(()-&gt; new Bounce(PANEL_WIDTH, PANEL_HEIGHT).start());`","body":"BTW,  in main, I should be doing the following to start the app. <code>SwingUtilities.invokeLater(()-&gt; new Bounce(PANEL_WIDTH, PANEL_HEIGHT).start());</code>"},{"owner":{"account_id":22931746,"reputation":1,"user_id":17065903,"display_name":"Tonda"},"score":0,"creation_date":1668716826,"post_id":74278146,"comment_id":131480533,"body_markdown":"Ok but considering that the x and y components are indipendent (if two x are different their respective ball direction should be different) doesn&#39;t the slope became useless?","body":"Ok but considering that the x and y components are indipendent (if two x are different their respective ball direction should be different) doesn&#39;t the slope became useless?"},{"owner":{"account_id":22931746,"reputation":1,"user_id":17065903,"display_name":"Tonda"},"score":0,"creation_date":1668717001,"post_id":74278146,"comment_id":131480583,"body_markdown":"@WJS how does `SwingUtilities.invokeLater(()-&gt; new Bounce(PANEL_WIDTH, PANEL_HEIGHT).start());` work and y would u use that? (sry if I ask a lot of stuff but these are a lot of useful info and imma take advantage of that &gt;:D)","body":"@WJS how does <code>SwingUtilities.invokeLater(()-&gt; new Bounce(PANEL_WIDTH, PANEL_HEIGHT).start());</code> work and y would u use that? (sry if I ask a lot of stuff but these are a lot of useful info and imma take advantage of that &gt;:D)"},{"owner":{"account_id":1689973,"reputation":37280,"user_id":1552534,"display_name":"WJS"},"score":0,"creation_date":1668721240,"post_id":74278146,"comment_id":131481867,"body_markdown":"Check out [SwingUtilities.invokeLater](https://stackoverflow.com/questions/7196889/swingutilities-invokelater)","body":"Check out <a href=\"https://stackoverflow.com/questions/7196889/swingutilities-invokelater\">SwingUtilities.invokeLater</a>"}],"owner":{"account_id":22931746,"reputation":1,"user_id":17065903,"display_name":"Tonda"},"comment_count":10,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":49,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1667317120,"creation_date":1667316317,"question_id":74278146,"body_markdown":"Basically when i update the ball in my flipper (an Oval created with Graphics2D) it teleports to his next location, which is what I want it to do, but I would much rather have a smooth animation (And I also fear the crispy movement is gonna be hard to deal with for collisions). \r\n\r\nSo is there a way to get smoother movement?\r\n\r\nThe main class:\r\n```\r\nimport Flipper.Ball;\r\nimport Flipper.Cabinet;\r\n\r\npublic class Main {\r\n\r\n    public static Cabinet cabinet;\r\n    public static Ball ball;\r\n\r\n    public static void main(String[] args) throws InterruptedException {\r\n        new Frame();\r\n        cabinet = new Cabinet();\r\n        ball = new Ball();\r\n\r\n        while (true)\r\n            update();\r\n    }\r\n\r\n    private static void update() throws InterruptedException {\r\n        ball.calcSpeed();\r\n        ball.move();\r\n    }\r\n}\r\n```\r\n\r\nFrame class:\r\n\r\n```\r\nimport javax.swing.*;\r\n\r\npublic class Frame extends JFrame {\r\n\r\n    Frame() {\r\n        this.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\r\n        this.add(new Panel());\r\n        this.pack();\r\n        this.setLocationRelativeTo(null);\r\n        this.setVisible(true);\r\n    }\r\n}\r\n```\r\n\r\nPanel class (I left out all of the useless KeyListener/MouseListener methods that i haven&#39;t used yet):\r\n\r\n```\r\nmport javax.swing.*;\r\nimport java.awt.*;\r\nimport java.awt.event.KeyEvent;\r\nimport java.awt.event.KeyListener;\r\nimport java.awt.event.MouseEvent;\r\nimport java.awt.event.MouseListener;\r\n\r\npublic class Panel extends JPanel implements KeyListener, MouseListener {\r\n\r\n    Panel() {\r\n        this.setPreferredSize(new Dimension(Constant.WIDTH, Constant.HEIGHT));\r\n        this.setFocusable(true);\r\n        this.addMouseListener(this);\r\n        this.addKeyListener(this);\r\n    }\r\n\r\n    @Override\r\n    public void paint(Graphics g) {\r\n        super.paint(g);\r\n        Graphics2D g2 = (Graphics2D) g;\r\n\r\n        g2.setColor(Color.BLACK);\r\n        g2.draw(Main.cabinet.getShape());\r\n\r\n        g2.setColor(Color.BLUE);\r\n        g2.fillOval(Main.ball.getX(), Main.ball.getY(), Constant.BALLSIZE, Constant.BALLSIZE);\r\n\r\n        repaint();\r\n    }\r\n}\r\n```\r\n\r\nFlipper classes:\r\n\r\n```\r\npackage Flipper;\r\n\r\nimport main.Constant;\r\n\r\nimport java.awt.*;\r\n\r\npublic class Cabinet {\r\n\r\n    private Rectangle shape;\r\n    public Cabinet() {\r\n        this.shape = new Rectangle(Constant.WIDTH, Constant.HEIGHT);\r\n    }\r\n\r\n    public Rectangle getShape() {\r\n        return shape;\r\n    }\r\n}\r\n```\r\n\r\n```\r\npackage Flipper;\r\n\r\nimport main.Constant;\r\n\r\nimport java.util.concurrent.TimeUnit;\r\n\r\npublic class Ball {\r\n\r\n    private int x;\r\n    private int y;\r\n    private int xSpeed = 1;\r\n    private int ySpeed = 10;\r\n\r\n    public Ball() {\r\n        this.x = 230;\r\n        this.y = 160;\r\n    }\r\n\r\n    public void calcSpeed() {\r\n        if (y &gt;= Constant.HEIGHT - Constant.BALLSIZE)\r\n            ySpeed = ySpeed * -1;\r\n        if (y &lt;= 0)\r\n            ySpeed = ySpeed * -1;\r\n    }\r\n\r\n    public void move() throws InterruptedException {\r\n        y += ySpeed;\r\n\r\n        TimeUnit.MILLISECONDS.sleep(50);\r\n    }\r\n\r\n    // Getters\r\n\r\n\r\n    public int getX() {\r\n        return x;\r\n    }\r\n\r\n    public int getY() {\r\n        return y;\r\n    }\r\n\r\n    public int getxSpeed() {\r\n        return xSpeed;\r\n    }\r\n\r\n    public int getySpeed() {\r\n        return ySpeed;\r\n    }\r\n\r\n\r\n    // Setters\r\n\r\n    public void setX(int x) {\r\n        this.x = x;\r\n    }\r\n\r\n    public void setY(int y) {\r\n        this.y = y;\r\n    }\r\n\r\n    public void setxSpeed(int xSpeed) {\r\n        this.xSpeed = xSpeed;\r\n    }\r\n\r\n    public void setySpeed(int ySpeed) {\r\n        this.ySpeed = ySpeed;\r\n    }\r\n}\r\n\r\n```\r\n\r\n","title":"How do I make the movement of an Graphics2D Oval smooth","body":"<p>Basically when i update the ball in my flipper (an Oval created with Graphics2D) it teleports to his next location, which is what I want it to do, but I would much rather have a smooth animation (And I also fear the crispy movement is gonna be hard to deal with for collisions).</p>\n<p>So is there a way to get smoother movement?</p>\n<p>The main class:</p>\n<pre><code>import Flipper.Ball;\nimport Flipper.Cabinet;\n\npublic class Main {\n\n    public static Cabinet cabinet;\n    public static Ball ball;\n\n    public static void main(String[] args) throws InterruptedException {\n        new Frame();\n        cabinet = new Cabinet();\n        ball = new Ball();\n\n        while (true)\n            update();\n    }\n\n    private static void update() throws InterruptedException {\n        ball.calcSpeed();\n        ball.move();\n    }\n}\n</code></pre>\n<p>Frame class:</p>\n<pre><code>import javax.swing.*;\n\npublic class Frame extends JFrame {\n\n    Frame() {\n        this.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\n        this.add(new Panel());\n        this.pack();\n        this.setLocationRelativeTo(null);\n        this.setVisible(true);\n    }\n}\n</code></pre>\n<p>Panel class (I left out all of the useless KeyListener/MouseListener methods that i haven't used yet):</p>\n<pre><code>mport javax.swing.*;\nimport java.awt.*;\nimport java.awt.event.KeyEvent;\nimport java.awt.event.KeyListener;\nimport java.awt.event.MouseEvent;\nimport java.awt.event.MouseListener;\n\npublic class Panel extends JPanel implements KeyListener, MouseListener {\n\n    Panel() {\n        this.setPreferredSize(new Dimension(Constant.WIDTH, Constant.HEIGHT));\n        this.setFocusable(true);\n        this.addMouseListener(this);\n        this.addKeyListener(this);\n    }\n\n    @Override\n    public void paint(Graphics g) {\n        super.paint(g);\n        Graphics2D g2 = (Graphics2D) g;\n\n        g2.setColor(Color.BLACK);\n        g2.draw(Main.cabinet.getShape());\n\n        g2.setColor(Color.BLUE);\n        g2.fillOval(Main.ball.getX(), Main.ball.getY(), Constant.BALLSIZE, Constant.BALLSIZE);\n\n        repaint();\n    }\n}\n</code></pre>\n<p>Flipper classes:</p>\n<pre><code>package Flipper;\n\nimport main.Constant;\n\nimport java.awt.*;\n\npublic class Cabinet {\n\n    private Rectangle shape;\n    public Cabinet() {\n        this.shape = new Rectangle(Constant.WIDTH, Constant.HEIGHT);\n    }\n\n    public Rectangle getShape() {\n        return shape;\n    }\n}\n</code></pre>\n<pre><code>package Flipper;\n\nimport main.Constant;\n\nimport java.util.concurrent.TimeUnit;\n\npublic class Ball {\n\n    private int x;\n    private int y;\n    private int xSpeed = 1;\n    private int ySpeed = 10;\n\n    public Ball() {\n        this.x = 230;\n        this.y = 160;\n    }\n\n    public void calcSpeed() {\n        if (y &gt;= Constant.HEIGHT - Constant.BALLSIZE)\n            ySpeed = ySpeed * -1;\n        if (y &lt;= 0)\n            ySpeed = ySpeed * -1;\n    }\n\n    public void move() throws InterruptedException {\n        y += ySpeed;\n\n        TimeUnit.MILLISECONDS.sleep(50);\n    }\n\n    // Getters\n\n\n    public int getX() {\n        return x;\n    }\n\n    public int getY() {\n        return y;\n    }\n\n    public int getxSpeed() {\n        return xSpeed;\n    }\n\n    public int getySpeed() {\n        return ySpeed;\n    }\n\n\n    // Setters\n\n    public void setX(int x) {\n        this.x = x;\n    }\n\n    public void setY(int y) {\n        this.y = y;\n    }\n\n    public void setxSpeed(int xSpeed) {\n        this.xSpeed = xSpeed;\n    }\n\n    public void setySpeed(int ySpeed) {\n        this.ySpeed = ySpeed;\n    }\n}\n\n</code></pre>\n"},{"tags":["java","spring","spring-security"],"answers":[{"tags":[],"owner":{"account_id":16380562,"reputation":882,"user_id":11831707,"display_name":"ekalin"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1659028225,"creation_date":1658946213,"answer_id":73142891,"question_id":73139343,"body_markdown":"I found the problem: the code for authentication in production was creating a `UserDetailsService` bean as well, so that there were two in the ApplicationContext. This must disable the Spring auto-configuration code that creates whatever is necessary for the in-memory authentication to work.\r\n\r\nThe solution was to disable the production bean when the local profile is selected. And it seems that&#39;s the only possible solution: neither adding `@Primary` nor adding `@Order` with a higher priority than the prodution bean worked.\r\n\r\n**Edit**: Indeed, configuration is done by the `InitializeUserDetailsBeanManagerConfigurer` class, and it checks that there is only one bean of type `UserDetailsService` (it&#39;s even documented in its Javadoc).\r\n\r\n----------\r\n\r\nAnother possibility is to create an `AuthenticationProvider` manually, pointing to the `InMemoryUserDetailsManager`. To do that, just register a `GlobalAuthenticationConfigurerAdapter` bean (this is a general way to configure the `AuthenticationManager` as it is being built):\r\n```java\r\n@Bean\r\nGlobalAuthenticationConfigurerAdapter adapter(InMemoryUserDetailsManager inMemoryUserDetails, PasswordEncoder passwordEncoder) {\r\n    return new GlobalAuthenticationConfigurerAdapter() {\r\n        @Override\r\n        public void configure(AuthenticationManagerBuilder auth) throws Exception {\r\n            DaoAuthenticationProvider provider = new DaoAuthenticationProvider();\r\n            provider.setUserDetailsService(inMemoryUserDetails);\r\n            provider.setUserDetailsPasswordService(inMemoryUserDetails);\r\n            provider.setPasswordEncoder(passwordEncoder);\r\n            auth.authenticationProvider(provider);\r\n        }\r\n    };\r\n}\r\n```","title":"Converting WebSecurityConfigurerAdapter to new 5.7.0 syntax using InMemoryUserDetailsManager, getting No AuthenticationProvider found","body":"<p>I found the problem: the code for authentication in production was creating a <code>UserDetailsService</code> bean as well, so that there were two in the ApplicationContext. This must disable the Spring auto-configuration code that creates whatever is necessary for the in-memory authentication to work.</p>\n<p>The solution was to disable the production bean when the local profile is selected. And it seems that's the only possible solution: neither adding <code>@Primary</code> nor adding <code>@Order</code> with a higher priority than the prodution bean worked.</p>\n<p><strong>Edit</strong>: Indeed, configuration is done by the <code>InitializeUserDetailsBeanManagerConfigurer</code> class, and it checks that there is only one bean of type <code>UserDetailsService</code> (it's even documented in its Javadoc).</p>\n<hr />\n<p>Another possibility is to create an <code>AuthenticationProvider</code> manually, pointing to the <code>InMemoryUserDetailsManager</code>. To do that, just register a <code>GlobalAuthenticationConfigurerAdapter</code> bean (this is a general way to configure the <code>AuthenticationManager</code> as it is being built):</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Bean\nGlobalAuthenticationConfigurerAdapter adapter(InMemoryUserDetailsManager inMemoryUserDetails, PasswordEncoder passwordEncoder) {\n    return new GlobalAuthenticationConfigurerAdapter() {\n        @Override\n        public void configure(AuthenticationManagerBuilder auth) throws Exception {\n            DaoAuthenticationProvider provider = new DaoAuthenticationProvider();\n            provider.setUserDetailsService(inMemoryUserDetails);\n            provider.setUserDetailsPasswordService(inMemoryUserDetails);\n            provider.setPasswordEncoder(passwordEncoder);\n            auth.authenticationProvider(provider);\n        }\n    };\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":260495,"reputation":984,"user_id":544084,"display_name":"Jim Cox"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1667316919,"creation_date":1667316919,"answer_id":74278276,"question_id":73139343,"body_markdown":"I&#39;ve had issues getting a handle to the authentication manager in non-WebSecurityConfigurerAdapter configurations unless I use the apply() with dsl.  But I think you can get this to work without the auth manager. Warning: this example does not use a password encoder which you should definitely use in any production environment.\r\n\r\n```java\r\n    @Bean\r\n    public UserDetailsService userDetailsService() {\r\n        UserDetails admin = User.builder()\r\n                                .username(&quot;admin&quot;)\r\n                                .password(&quot;{noop}&quot; + &quot;password&quot;)\r\n                               .roles(&quot;ADMIN&quot;)\r\n                               .build();\r\n        return new InMemoryUserDetailsManager(admin);\r\n    }\r\n\r\n    @Bean\r\n    public DaoAuthenticationProvider daoAuthenticationProvider(UserDetailsService userDetailsService) {\r\n\r\n        DaoAuthenticationProvider provider = new DaoAuthenticationProvider();\r\n        provider.setUserDetailsService(userDetailsService);\r\n\r\n        return provider;\r\n    }\r\n    \r\n    @Bean\r\n    public SecurityFilterChain configure(HttpSecurity http) throws Exception {\r\n\r\n        http.httpBasic(withDefaults())\r\n            .authenticationProvider(daoAuthenticationProvider(userDetailsService()));\r\n        \r\n        return http.build();    \r\n    }\r\n```","title":"Converting WebSecurityConfigurerAdapter to new 5.7.0 syntax using InMemoryUserDetailsManager, getting No AuthenticationProvider found","body":"<p>I've had issues getting a handle to the authentication manager in non-WebSecurityConfigurerAdapter configurations unless I use the apply() with dsl.  But I think you can get this to work without the auth manager. Warning: this example does not use a password encoder which you should definitely use in any production environment.</p>\n<pre class=\"lang-java prettyprint-override\"><code>    @Bean\n    public UserDetailsService userDetailsService() {\n        UserDetails admin = User.builder()\n                                .username(&quot;admin&quot;)\n                                .password(&quot;{noop}&quot; + &quot;password&quot;)\n                               .roles(&quot;ADMIN&quot;)\n                               .build();\n        return new InMemoryUserDetailsManager(admin);\n    }\n\n    @Bean\n    public DaoAuthenticationProvider daoAuthenticationProvider(UserDetailsService userDetailsService) {\n\n        DaoAuthenticationProvider provider = new DaoAuthenticationProvider();\n        provider.setUserDetailsService(userDetailsService);\n\n        return provider;\n    }\n    \n    @Bean\n    public SecurityFilterChain configure(HttpSecurity http) throws Exception {\n\n        http.httpBasic(withDefaults())\n            .authenticationProvider(daoAuthenticationProvider(userDetailsService()));\n        \n        return http.build();    \n    }\n</code></pre>\n"}],"owner":{"account_id":16380562,"reputation":882,"user_id":11831707,"display_name":"ekalin"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":634,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":73142891,"answer_count":2,"score":1,"last_activity_date":1667316919,"creation_date":1658930394,"question_id":73139343,"body_markdown":"I&#39;m trying to update an application to Spring Boot 2.7, which brings Spring Security to 5.7 and deprecates `WebSecurityConfigurerAdapter`.\r\n\r\nHere&#39;s a simplified version of the old code, that creates a single user, and works. Note that this code is used only for local development and testing, using a simple form login:\r\n```java\r\n@Configuration\r\n@Profile(&quot;local-auth&quot;)\r\nclass LocalAuth {\r\n    @Bean\r\n    public WebSecurityConfigurerAdapter webSecurityConfigurerAdapter(\r\n            PasswordEncoder passwordEncoder) {\r\n        return new WebSecurityConfigurerAdapter() {\r\n            @Override\r\n            public void configure(AuthenticationManagerBuilder auth) throws Exception {\r\n                auth.inMemoryAuthentication()\r\n                        .withUser(&quot;testuser&quot;)\r\n                        .password(passwordEncoder.encode(&quot;a&quot;))\r\n                        .authorities(toAuthorities(List.of(&quot;SOME_AUTHORITY&quot;)));\r\n            }\r\n\r\n            private List&lt;? extends GrantedAuthority&gt; toAuthorities(List&lt;String&gt; roles) {\r\n                return roles.stream().map(SimpleGrantedAuthority::new).collect(Collectors.toList());\r\n            }\r\n\r\n            @Override\r\n            protected void configure(HttpSecurity http) throws Exception {\r\n                http\r\n                        .authorizeRequests(authorizeRequests -&gt;\r\n                                authorizeRequests\r\n                                        .antMatchers(&quot;/login&quot;, &quot;/actuator/**&quot;, &quot;/publico/**&quot;).permitAll()\r\n                                        .anyRequest().authenticated()\r\n                        )\r\n                        .formLogin(formLogin -&gt; formLogin.defaultSuccessUrl(&quot;http://localhost:4200/app/&quot;).permitAll())\r\n                        .logout(logout -&gt; logout.logoutUrl(&quot;/logout&quot;))\r\n                        .csrf(AbstractHttpConfigurer::disable);\r\n            }\r\n        };\r\n    }\r\n\r\n    @Bean\r\n    public PasswordEncoder passwordEncoder() {\r\n        return new BCryptPasswordEncoder();\r\n    }\r\n}\r\n```\r\n\r\nFollowing the guide at https://spring.io/blog/2022/02/21/spring-security-without-the-websecurityconfigureradapter, I changed the code to\r\n```java\r\n@Configuration\r\n@Profile(&quot;local-auth&quot;)\r\nclass LocalAuth {\r\n    @Bean\r\n    public InMemoryUserDetailsManager userDetailService(PasswordEncoder passwordEncoder) {\r\n        UserDetails user = User.builder()\r\n                .username(&quot;testuser&quot;)\r\n                .password(passwordEncoder.encode(&quot;a&quot;))\r\n                .authorities(toAuthorities(List.of(&quot;SOME_AUTHORITY&quot;)))\r\n                .build();\r\n        return new InMemoryUserDetailsManager(user);\r\n    }\r\n\r\n    private List&lt;? extends GrantedAuthority&gt; toAuthorities(List&lt;String&gt; roles) {\r\n        return roles.stream().map(SimpleGrantedAuthority::new).collect(Collectors.toList());\r\n    }\r\n\r\n    @Bean\r\n    public SecurityFilterChain filterChain(HttpSecurity http) throws Exception {\r\n        http\r\n                .authorizeRequests(authorizeRequests -&gt;\r\n                        authorizeRequests\r\n                                .antMatchers(&quot;/login&quot;, &quot;/actuator/**&quot;, &quot;/publico/**&quot;).permitAll()\r\n                                .anyRequest().authenticated()\r\n                )\r\n                .formLogin(formLogin -&gt; formLogin.defaultSuccessUrl(&quot;http://localhost:4200/app/&quot;).permitAll())\r\n                .logout(logout -&gt; logout.logoutUrl(&quot;/logout&quot;))\r\n                .csrf(AbstractHttpConfigurer::disable);\r\n        return http.build();\r\n    }\r\n\r\n    @Bean\r\n    public PasswordEncoder passwordEncoder() {\r\n        return new BCryptPasswordEncoder();\r\n    }\r\n}\r\n```\r\n\r\nThe login form is displayed, but when I try to login, I get this error in the login page:\r\n**No AuthenticationProvider found for org.springframework.security.authentication.UsernamePasswordAuthenticationToken**. Strangely, nothing gets printed in the application log.\r\n\r\nI&#39;ve also tried to provide an `AuthenticationManager` replacing the first bean with\r\n```java\r\n    @Bean\r\n    public AuthenticationManager authenticationManager(AuthenticationManagerBuilder authBuilder,\r\n            PasswordEncoder passwordEncoder) throws Exception {\r\n        UserDetails user = User.builder()\r\n                .username(&quot;govbr.20821922459&quot;)\r\n                .password(passwordEncoder.encode(&quot;a&quot;))\r\n                .authorities(toAuthorities(List.of(&quot;LU_NVL_CONTA_BASICA&quot;)))\r\n                .build();\r\n        return authBuilder.inMemoryAuthentication().withUser(user).and().build();\r\n    }\r\n```\r\nbut then the application fails to start with\r\n**Cannot apply org.springframework.security.config.annotation.authentication.configuration.AuthenticationConfiguration$EnableGlobalAuthenticationAutowiredConfigurer@313c3cb to already built object**.\r\n\r\nDoes anyone know the proper way to convert the old `WebSecurityConfigurerAdapter`?\r\n\r\n**Edit**: Even increasing log level to DEBUG, all I get in a login attempt is\r\n```\r\n2022-07-27 14:22:26.012 [                    ] DEBUG o.s.security.web.FilterChainProxy             - Securing POST /login\r\n2022-07-27 14:22:26.013 [                    ] DEBUG o.s.s.w.c.SecurityContextPersistenceFilter    - Set SecurityContextHolder to empty SecurityContext\r\n2022-07-27 14:22:26.015 [                    ] DEBUG o.s.security.web.DefaultRedirectStrategy      - Redirecting to /svr/rest/login?error\r\n2022-07-27 14:22:26.015 [                    ] DEBUG .s.s.w.c.HttpSessionSecurityContextRepository - Did not store empty SecurityContext\r\n2022-07-27 14:22:26.015 [                    ] DEBUG .s.s.w.c.HttpSessionSecurityContextRepository - Did not store empty SecurityContext\r\n2022-07-27 14:22:26.015 [                    ] DEBUG o.s.s.w.c.SecurityContextPersistenceFilter    - Cleared SecurityContextHolder to complete request\r\n2022-07-27 14:22:26.041 [                    ] DEBUG o.s.security.web.FilterChainProxy             - Securing GET /login?error\r\n2022-07-27 14:22:26.041 [                    ] DEBUG o.s.s.w.c.SecurityContextPersistenceFilter    - Set SecurityContextHolder to empty SecurityContext\r\n2022-07-27 14:22:26.042 [                    ] DEBUG .s.s.w.c.HttpSessionSecurityContextRepository - Did not store empty SecurityContext\r\n2022-07-27 14:22:26.042 [                    ] DEBUG .s.s.w.c.HttpSessionSecurityContextRepository - Did not store empty SecurityContext\r\n2022-07-27 14:22:26.042 [                    ] DEBUG o.s.s.w.c.SecurityContextPersistenceFilter    - Cleared SecurityContextHolder to complete request\r\n```\r\nand the respose to the POST to `/login` is a 302 redirect to `/login?error`, with no reference to any specific error message or code (unless the error message is determined from the session).","title":"Converting WebSecurityConfigurerAdapter to new 5.7.0 syntax using InMemoryUserDetailsManager, getting No AuthenticationProvider found","body":"<p>I'm trying to update an application to Spring Boot 2.7, which brings Spring Security to 5.7 and deprecates <code>WebSecurityConfigurerAdapter</code>.</p>\n<p>Here's a simplified version of the old code, that creates a single user, and works. Note that this code is used only for local development and testing, using a simple form login:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Configuration\n@Profile(&quot;local-auth&quot;)\nclass LocalAuth {\n    @Bean\n    public WebSecurityConfigurerAdapter webSecurityConfigurerAdapter(\n            PasswordEncoder passwordEncoder) {\n        return new WebSecurityConfigurerAdapter() {\n            @Override\n            public void configure(AuthenticationManagerBuilder auth) throws Exception {\n                auth.inMemoryAuthentication()\n                        .withUser(&quot;testuser&quot;)\n                        .password(passwordEncoder.encode(&quot;a&quot;))\n                        .authorities(toAuthorities(List.of(&quot;SOME_AUTHORITY&quot;)));\n            }\n\n            private List&lt;? extends GrantedAuthority&gt; toAuthorities(List&lt;String&gt; roles) {\n                return roles.stream().map(SimpleGrantedAuthority::new).collect(Collectors.toList());\n            }\n\n            @Override\n            protected void configure(HttpSecurity http) throws Exception {\n                http\n                        .authorizeRequests(authorizeRequests -&gt;\n                                authorizeRequests\n                                        .antMatchers(&quot;/login&quot;, &quot;/actuator/**&quot;, &quot;/publico/**&quot;).permitAll()\n                                        .anyRequest().authenticated()\n                        )\n                        .formLogin(formLogin -&gt; formLogin.defaultSuccessUrl(&quot;http://localhost:4200/app/&quot;).permitAll())\n                        .logout(logout -&gt; logout.logoutUrl(&quot;/logout&quot;))\n                        .csrf(AbstractHttpConfigurer::disable);\n            }\n        };\n    }\n\n    @Bean\n    public PasswordEncoder passwordEncoder() {\n        return new BCryptPasswordEncoder();\n    }\n}\n</code></pre>\n<p>Following the guide at <a href=\"https://spring.io/blog/2022/02/21/spring-security-without-the-websecurityconfigureradapter\" rel=\"nofollow noreferrer\">https://spring.io/blog/2022/02/21/spring-security-without-the-websecurityconfigureradapter</a>, I changed the code to</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Configuration\n@Profile(&quot;local-auth&quot;)\nclass LocalAuth {\n    @Bean\n    public InMemoryUserDetailsManager userDetailService(PasswordEncoder passwordEncoder) {\n        UserDetails user = User.builder()\n                .username(&quot;testuser&quot;)\n                .password(passwordEncoder.encode(&quot;a&quot;))\n                .authorities(toAuthorities(List.of(&quot;SOME_AUTHORITY&quot;)))\n                .build();\n        return new InMemoryUserDetailsManager(user);\n    }\n\n    private List&lt;? extends GrantedAuthority&gt; toAuthorities(List&lt;String&gt; roles) {\n        return roles.stream().map(SimpleGrantedAuthority::new).collect(Collectors.toList());\n    }\n\n    @Bean\n    public SecurityFilterChain filterChain(HttpSecurity http) throws Exception {\n        http\n                .authorizeRequests(authorizeRequests -&gt;\n                        authorizeRequests\n                                .antMatchers(&quot;/login&quot;, &quot;/actuator/**&quot;, &quot;/publico/**&quot;).permitAll()\n                                .anyRequest().authenticated()\n                )\n                .formLogin(formLogin -&gt; formLogin.defaultSuccessUrl(&quot;http://localhost:4200/app/&quot;).permitAll())\n                .logout(logout -&gt; logout.logoutUrl(&quot;/logout&quot;))\n                .csrf(AbstractHttpConfigurer::disable);\n        return http.build();\n    }\n\n    @Bean\n    public PasswordEncoder passwordEncoder() {\n        return new BCryptPasswordEncoder();\n    }\n}\n</code></pre>\n<p>The login form is displayed, but when I try to login, I get this error in the login page:\n<strong>No AuthenticationProvider found for org.springframework.security.authentication.UsernamePasswordAuthenticationToken</strong>. Strangely, nothing gets printed in the application log.</p>\n<p>I've also tried to provide an <code>AuthenticationManager</code> replacing the first bean with</p>\n<pre class=\"lang-java prettyprint-override\"><code>    @Bean\n    public AuthenticationManager authenticationManager(AuthenticationManagerBuilder authBuilder,\n            PasswordEncoder passwordEncoder) throws Exception {\n        UserDetails user = User.builder()\n                .username(&quot;govbr.20821922459&quot;)\n                .password(passwordEncoder.encode(&quot;a&quot;))\n                .authorities(toAuthorities(List.of(&quot;LU_NVL_CONTA_BASICA&quot;)))\n                .build();\n        return authBuilder.inMemoryAuthentication().withUser(user).and().build();\n    }\n</code></pre>\n<p>but then the application fails to start with\n<strong>Cannot apply org.springframework.security.config.annotation.authentication.configuration.AuthenticationConfiguration$EnableGlobalAuthenticationAutowiredConfigurer@313c3cb to already built object</strong>.</p>\n<p>Does anyone know the proper way to convert the old <code>WebSecurityConfigurerAdapter</code>?</p>\n<p><strong>Edit</strong>: Even increasing log level to DEBUG, all I get in a login attempt is</p>\n<pre><code>2022-07-27 14:22:26.012 [                    ] DEBUG o.s.security.web.FilterChainProxy             - Securing POST /login\n2022-07-27 14:22:26.013 [                    ] DEBUG o.s.s.w.c.SecurityContextPersistenceFilter    - Set SecurityContextHolder to empty SecurityContext\n2022-07-27 14:22:26.015 [                    ] DEBUG o.s.security.web.DefaultRedirectStrategy      - Redirecting to /svr/rest/login?error\n2022-07-27 14:22:26.015 [                    ] DEBUG .s.s.w.c.HttpSessionSecurityContextRepository - Did not store empty SecurityContext\n2022-07-27 14:22:26.015 [                    ] DEBUG .s.s.w.c.HttpSessionSecurityContextRepository - Did not store empty SecurityContext\n2022-07-27 14:22:26.015 [                    ] DEBUG o.s.s.w.c.SecurityContextPersistenceFilter    - Cleared SecurityContextHolder to complete request\n2022-07-27 14:22:26.041 [                    ] DEBUG o.s.security.web.FilterChainProxy             - Securing GET /login?error\n2022-07-27 14:22:26.041 [                    ] DEBUG o.s.s.w.c.SecurityContextPersistenceFilter    - Set SecurityContextHolder to empty SecurityContext\n2022-07-27 14:22:26.042 [                    ] DEBUG .s.s.w.c.HttpSessionSecurityContextRepository - Did not store empty SecurityContext\n2022-07-27 14:22:26.042 [                    ] DEBUG .s.s.w.c.HttpSessionSecurityContextRepository - Did not store empty SecurityContext\n2022-07-27 14:22:26.042 [                    ] DEBUG o.s.s.w.c.SecurityContextPersistenceFilter    - Cleared SecurityContextHolder to complete request\n</code></pre>\n<p>and the respose to the POST to <code>/login</code> is a 302 redirect to <code>/login?error</code>, with no reference to any specific error message or code (unless the error message is determined from the session).</p>\n"},{"tags":["java","apache-httpclient-4.x","multipart"],"comments":[{"owner":{"account_id":10347632,"reputation":632,"user_id":7632058,"display_name":"Boschi"},"score":0,"creation_date":1488377886,"post_id":42533237,"comment_id":72203805,"body_markdown":"I believe this can help you: http://stackoverflow.com/questions/3337056/convenient-way-to-parse-incoming-multipart-form-data-parameters-in-a-servlet","body":"I believe this can help you: <a href=\"http://stackoverflow.com/questions/3337056/convenient-way-to-parse-incoming-multipart-form-data-parameters-in-a-servlet\" title=\"convenient way to parse incoming multipart form data parameters in a servlet\">stackoverflow.com/questions/3337056/&hellip;</a>"},{"owner":{"account_id":6804133,"reputation":1251,"user_id":5236494,"display_name":"kleash"},"score":0,"creation_date":1488432469,"post_id":42533237,"comment_id":72230454,"body_markdown":"@Boschi Fileupload API methods accept HTTPServletRequest which is not possible in my case as it&#39;s a response from the servlet. Please let me know if I am missing some point here.","body":"@Boschi Fileupload API methods accept HTTPServletRequest which is not possible in my case as it&#39;s a response from the servlet. Please let me know if I am missing some point here."},{"owner":{"account_id":6804133,"reputation":1251,"user_id":5236494,"display_name":"kleash"},"score":0,"creation_date":1488433379,"post_id":42533237,"comment_id":72230771,"body_markdown":"I have added a sample message response received at client..","body":"I have added a sample message response received at client.."}],"answers":[{"tags":[],"owner":{"account_id":418298,"reputation":368,"user_id":3759031,"display_name":"Vijayan Kani"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1667316753,"creation_date":1488378004,"answer_id":42534144,"question_id":42533237,"body_markdown":"Mime4j from Apache is one way to parse the responses from client-side. Its a common practice to  use a tool like this.\r\n\r\nYou can refer this link - http://www.programcreek.com/java-api-examples/index.php?api=org.apache.james.mime4j.MimeException\r\n\r\nYou can download the jar from this link -\r\nhttp://james.apache.org/download.cgi#Apache_Mime4J","title":"Receiving Multipart Response on client side (ClosableHttpResponse)","body":"<p>Mime4j from Apache is one way to parse the responses from client-side. Its a common practice to  use a tool like this.</p>\n<p>You can refer this link - <a href=\"http://www.programcreek.com/java-api-examples/index.php?api=org.apache.james.mime4j.MimeException\" rel=\"nofollow noreferrer\">http://www.programcreek.com/java-api-examples/index.php?api=org.apache.james.mime4j.MimeException</a></p>\n<p>You can download the jar from this link -\n<a href=\"http://james.apache.org/download.cgi#Apache_Mime4J\" rel=\"nofollow noreferrer\">http://james.apache.org/download.cgi#Apache_Mime4J</a></p>\n"},{"tags":[],"owner":{"account_id":6804133,"reputation":1251,"user_id":5236494,"display_name":"kleash"},"down_vote_count":0,"up_vote_count":22,"is_accepted":true,"score":22,"last_activity_date":1488437078,"creation_date":1488437078,"answer_id":42548549,"question_id":42533237,"body_markdown":"I have finally got a workaround for it.\r\n\r\nI will be using javax mail MimeMultipart.\r\n\r\nBelow is a code snipped for the solution:-\r\n\r\n        ByteArrayDataSource datasource = new ByteArrayDataSource(in, &quot;multipart/form-data&quot;);\r\n    \tMimeMultipart multipart = new MimeMultipart(datasource);\r\n\r\n\t\tint count = multipart.getCount();\r\n\t\tlog.debug(&quot;count &quot; + count);\r\n\t\tfor (int i = 0; i &lt; count; i++) {\r\n\t\t\tBodyPart bodyPart = multipart.getBodyPart(i);\r\n\t\t\tif (bodyPart.isMimeType(&quot;text/plain&quot;)) {\r\n\t\t\t\tlog.info(&quot;text/plain &quot; + bodyPart.getContentType());\r\n\t\t\t\tprocessTextData(bodyPart.getContent());\r\n\t\t\t} else if (bodyPart.isMimeType(&quot;application/octet-stream&quot;)) {\r\n\t\t\t\tlog.info(&quot;application/octet-stream &quot; + bodyPart.getContentType());\r\n\t\t\t\tprocessBinaryData(bodyPart.getInputStream()));\r\n\t\t\t} else {\r\n\t\t\t\tlog.warn(&quot;default &quot; + bodyPart.getContentType());\r\n\t\t\t}\r\n\t\t}\r\n\r\n\r\nPlease let me know if anybody else have any standard solution.","title":"Receiving Multipart Response on client side (ClosableHttpResponse)","body":"<p>I have finally got a workaround for it.</p>\n\n<p>I will be using javax mail MimeMultipart.</p>\n\n<p>Below is a code snipped for the solution:-</p>\n\n<pre><code>    ByteArrayDataSource datasource = new ByteArrayDataSource(in, \"multipart/form-data\");\n    MimeMultipart multipart = new MimeMultipart(datasource);\n\n    int count = multipart.getCount();\n    log.debug(\"count \" + count);\n    for (int i = 0; i &lt; count; i++) {\n        BodyPart bodyPart = multipart.getBodyPart(i);\n        if (bodyPart.isMimeType(\"text/plain\")) {\n            log.info(\"text/plain \" + bodyPart.getContentType());\n            processTextData(bodyPart.getContent());\n        } else if (bodyPart.isMimeType(\"application/octet-stream\")) {\n            log.info(\"application/octet-stream \" + bodyPart.getContentType());\n            processBinaryData(bodyPart.getInputStream()));\n        } else {\n            log.warn(\"default \" + bodyPart.getContentType());\n        }\n    }\n</code></pre>\n\n<p>Please let me know if anybody else have any standard solution.</p>\n"},{"tags":[],"owner":{"account_id":4564492,"reputation":2199,"user_id":3705861,"display_name":"Younes El Ouarti"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1661842309,"creation_date":1661807640,"answer_id":73534723,"question_id":42533237,"body_markdown":"## TL;DR ##\r\n 1. If you know what [`HttpMessageConverters`][1] are, then skip the &quot;In General&quot; part.\r\n 2. If your client is reactive, than you most likely don&#39;t have a big problem. Go to the part named &quot;Reactive Client (Spring Webflux)&quot; for details.\r\n 3. If your client is non-reactive i.e. you&#39;re using Spring MVC and `RestTemplate` then the last section is for you. In short, it is not possible out of the box and you need to write custom code.\r\n\r\n----------\r\n## In General ##\r\nWhen we want to read multipart data, then we are at the serialization/marshalling layer of our application. This is basically the same layer as when we transform a JSON or an XML document to a POJO via [Jackson][2] for example. What I want to emphasize here is that the logic for parsing multipart data should not take place in a service but rather much earlier. \r\n\r\nOur hook to transform multipart data comes as early, as to when an HTTP response enters our application in form of an [`HttpInputMessage`][3]. Out of the box, Spring provides a set of [`HttpMessageConverters`][1], that are able to transform our HTTP response to an object with which we can work. For example, the [MappingJackson2HttpMessageConverter][4] is used to read and write all request/responses that have the MediaType &quot;application/Json&quot;.\r\n\r\nIf the application is reactive, then Spring uses [`HttpMessageReader`][5] \r\n and [`HttpMessageWriter`][6] instead of [`HttpMessageConverters`][1]. They save the same purpose.\r\n\r\nThe following two sections show how to read (download) a multipart response via the two different paradigms. \r\n\r\n\r\n## Reactive Client (Spring Webflux) ##\r\nThis would be the easiest use case and the only thing we need, is already available in [Spring Webflux][7] out of the box.\r\n\r\nThe class [`MultipartHttpMessageReader`][8] would be doing all the heavy lifting. **In case** it does not behave exactly how you need it to, you can easily extend it and overwrite the methods to your liking. Your custom Reader can then be registered as a bean like so:\r\n\r\n```java\r\n@Configuration\r\npublic class MultipartMessageConverterConfiguration {\r\n\r\n  @Bean\r\n  public CodecCustomizer myCustomMultipartHttpMessageWriter() {\r\n      return configurer -&gt; configurer.customCodecs()\r\n                                     .register(new MyCustomMultipartHttpMessageWriter());\r\n    }\r\n}\r\n```\r\n\r\n## Non-Reactive Client (Spring MVC/RestTemplate) ##\r\nIf you have a &quot;classic&quot; application that uses `RestTemplate` to communicate via HTTP, then you need to rely on the aforementioned [`HttpMessageConverters`][1]. Unfortunately, the MessageConverter that is responsible for reading multipart data, does not support reading/downloading data:\r\n\r\n&gt; Implementation of HttpMessageConverter to read and write &#39;normal&#39; HTML forms and also to write **(but not read)** multipart data (e.g. file uploads)\r\n\r\nSource: [`FormHttpMessageConverter`][9] Documentation\r\n\r\nSo what we need to do, is write our own `MessageConverter`, which is able to download multipart data. An easy way to do that, would be to make use of the [`DefaultPartHttpMessageReader`][10] that is internally used by [`MultipartHttpMessageReader`][8]. We don&#39;t even need Webflux for that, as it is already shipped with spring-web. \r\n\r\nFirst let us define 2 classes in which we save the several parts the we read:\r\n```java\r\npublic class MyCustomPart  {\r\n\r\n    public MyCustomPart(byte[] content, String filename, MediaType contentType) {\r\n        //assign to corresponding member variables; here omitted\r\n    }\r\n}\r\n\r\n/**\r\n * Basically a container for a list of objects of the class above.\r\n */\r\npublic class MyCustomMultiParts {\r\n    public MyCustomMultiParts(List&lt;MyCustomPart&gt; parts){\r\n        //assign to corresponding member variable; here omitted\r\n    }\r\n}\r\n```\r\n\r\nLater on, you can always take each Part and convert it to whatever is appropriate. The `MyCustomPart` represents a single block of your multipart data response. The `MyCustomMultiParts` represent the whole multipart data.\r\n\r\nNow we come to the meaty stuff:\r\n\r\n```java\r\npublic class CustomMultipartHttpMessageConverter implements HttpMessageConverter&lt;MyCustomMultiParts&gt; {\r\n  \r\n    private final List&lt;MediaType&gt; supportedMediaTypes = new ArrayList&lt;&gt;();\r\n\r\n    private final DefaultPartHttpMessageReader defaultPartHttpMessageReader;\r\n\r\n    public CustomMultipartHttpMessageConverter() {\r\n        this.supportedMediaTypes.add(MediaType.MULTIPART_FORM_DATA);\r\n        this.defaultPartHttpMessageReader = new DefaultPartHttpMessageReader();\r\n    }\r\n\r\n    @Override\r\n    public boolean canRead(final Class&lt;?&gt; clazz, @Nullable final MediaType mediaType) {\r\n        if (!MyCustomMultiParts.class.isAssignableFrom(clazz)) { \r\n            return false;\r\n        }\r\n        if (mediaType == null) {\r\n            return true;\r\n        }\r\n        for (final MediaType supportedMediaType : getSupportedMediaTypes()) {\r\n            if (supportedMediaType.includes(mediaType) &amp;&amp; mediaType.getParameter(&quot;boundary&quot;) != null) {\r\n                return true;\r\n            }\r\n        }\r\n        return false;\r\n    }\r\n\r\n    /**\r\n     * This wraps the input message into a &quot;reactive&quot; input message, that the reactive DefaultPartHttpMessageReader uses.\r\n     */\r\n    private ReactiveHttpInputMessage wrapHttpInputMessage(final HttpInputMessage message) {\r\n        return new ReactiveHttpInputMessage() {\r\n            @Override\r\n            public HttpHeaders getHeaders() {\r\n                return message.getHeaders();\r\n            }\r\n\r\n            @SneakyThrows //Part of lombok. Just use a try catch block if you&#39;re not using it\r\n            @Override\r\n            public Flux&lt;DataBuffer&gt; getBody() {\r\n                final DefaultDataBuffer wrappedBody = new DefaultDataBufferFactory()\r\n                        .wrap(message.getBody().readAllBytes());\r\n                return Flux.just(wrappedBody);\r\n            }\r\n        };\r\n    }\r\n\r\n    @Override\r\n    public MyCustomMultiParts read(@Nullable final Class&lt;? extends MyCustomMultiParts&gt; clazz,\r\n                                           final HttpInputMessage message) throws IOException, HttpMessageNotReadableException {\r\n        final ReactiveHttpInputMessage wrappedMessage = wrapHttpInputMessage(message);\r\n        final ResolvableType resolvableType = ResolvableType.forClass(byte[].class); //plays no role\r\n        List&lt;Part&gt; rawParts = defaultPartHttpMessageReader.read(resolvableType, wrappedMessage, Map.of())//\r\n                .buffer()//\r\n                .blockFirst();\r\n        //You can check here whether the result exists or just continue\r\n        final List&lt;MyCustomPart&gt; customParts = rawParts.stream()// Now we convert to our customPart\r\n                .map(part -&gt; {\r\n                    //Part consists of a DataBuffer, we make a byte[] so we can convert it to whatever we want later\r\n                    final byte[] content = Optional.ofNullable(part.content().blockFirst())//\r\n                            .map(DataBuffer::asByteBuffer)//\r\n                            .map(ByteBuffer::array)//\r\n                            .orElse(new byte[]{});\r\n\r\n                    final HttpHeaders headers = part.headers();\r\n                    final String filename = headers.getContentDisposition().getFilename();\r\n                    final MediaType contentType = headers.getContentType();\r\n                    return new MyCustomPart(content, filename, contentType);\r\n                }).collect(Collectors.toList());\r\n        return new MyCustomMultiParts(customParts);\r\n    }\r\n\r\n    @Override\r\n    public void write(final MyCustomMultiParts parts, final MediaType contentType,\r\n                      final HttpOutputMessage outputMessage) {\r\n        // we&#39;re just interested in reading\r\n        throw new UnsupportedOperationException();\r\n    }\r\n\r\n\r\n    @Override\r\n    public boolean canWrite(final Class&lt;?&gt; clazz, final MediaType mediaType) {\r\n        // we&#39;re just interested in reading\r\n        return false;\r\n    }\r\n\r\n    @Override\r\n    public List&lt;MediaType&gt; getSupportedMediaTypes() {\r\n        return this.supportedMediaTypes;\r\n    }\r\n}\r\n```\r\n\r\nFrom here on, you should know better what to do with your &quot;CustomPart&quot;. Whether it is a JSON, a bitmap or a PDF. From the byte array you can convert it into anything.\r\n\r\nNow if you want to test it, you only have to add your CustomConverter to a `RestTemplate` and then &quot;await&quot; the `MyCustomMultiParts` that we defined:\r\n\r\n```java\r\n// This could also be inside your @Bean definition of RestTemplate of course\r\nfinal RestTemplate restTemplate = new RestTemplate();\r\nfinal List&lt;HttpMessageConverter&lt;?&gt;&gt; messageConverters = restTemplate.getMessageConverters();\r\nmessageConverters.add(new CustomMultipartHttpMessageConverter());\r\n\r\nString url = &quot;http://server.of.choice:8080/whatever-endpoint-that-sends-multiparts/&quot;;\r\nfinal HttpHeaders headers = new HttpHeaders();\r\nheaders.setAccept(List.of(MediaType.MULTIPART_FORM_DATA));\r\nfinal HttpEntity&lt;Void&gt; requestEntity = new HttpEntity&lt;&gt;(headers);\r\n//here we await our MyCustomMultiParts\r\nfinal MyCustomMultiParts entity = restTemplate.exchange(url, GET, requestEntity, MyCustomMultiParts.class);\r\n```\r\n\r\n\r\n  [1]: https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/http/converter/HttpMessageConverter.html\r\n  [2]: https://github.com/FasterXML/jackson\r\n  [3]: https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/http/HttpInputMessage.html\r\n  [4]: https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/http/converter/json/MappingJackson2HttpMessageConverter.html\r\n  [5]: https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/http/codec/HttpMessageReader.html\r\n  [6]: https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/http/codec/HttpMessageWriter.html\r\n  [7]: https://docs.spring.io/spring-integration/reference/html/webflux.html\r\n  [8]: https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/http/codec/multipart/MultipartHttpMessageReader.html\r\n  [9]: https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/http/converter/FormHttpMessageConverter.html\r\n  [10]: https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/http/codec/multipart/DefaultPartHttpMessageReader.html","title":"Receiving Multipart Response on client side (ClosableHttpResponse)","body":"<h2>TL;DR</h2>\n<ol>\n<li>If you know what <a href=\"https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/http/converter/HttpMessageConverter.html\" rel=\"nofollow noreferrer\"><code>HttpMessageConverters</code></a> are, then skip the &quot;In General&quot; part.</li>\n<li>If your client is reactive, than you most likely don't have a big problem. Go to the part named &quot;Reactive Client (Spring Webflux)&quot; for details.</li>\n<li>If your client is non-reactive i.e. you're using Spring MVC and <code>RestTemplate</code> then the last section is for you. In short, it is not possible out of the box and you need to write custom code.</li>\n</ol>\n<hr />\n<h2>In General</h2>\n<p>When we want to read multipart data, then we are at the serialization/marshalling layer of our application. This is basically the same layer as when we transform a JSON or an XML document to a POJO via <a href=\"https://github.com/FasterXML/jackson\" rel=\"nofollow noreferrer\">Jackson</a> for example. What I want to emphasize here is that the logic for parsing multipart data should not take place in a service but rather much earlier.</p>\n<p>Our hook to transform multipart data comes as early, as to when an HTTP response enters our application in form of an <a href=\"https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/http/HttpInputMessage.html\" rel=\"nofollow noreferrer\"><code>HttpInputMessage</code></a>. Out of the box, Spring provides a set of <a href=\"https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/http/converter/HttpMessageConverter.html\" rel=\"nofollow noreferrer\"><code>HttpMessageConverters</code></a>, that are able to transform our HTTP response to an object with which we can work. For example, the <a href=\"https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/http/converter/json/MappingJackson2HttpMessageConverter.html\" rel=\"nofollow noreferrer\">MappingJackson2HttpMessageConverter</a> is used to read and write all request/responses that have the MediaType &quot;application/Json&quot;.</p>\n<p>If the application is reactive, then Spring uses <a href=\"https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/http/codec/HttpMessageReader.html\" rel=\"nofollow noreferrer\"><code>HttpMessageReader</code></a>\nand <a href=\"https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/http/codec/HttpMessageWriter.html\" rel=\"nofollow noreferrer\"><code>HttpMessageWriter</code></a> instead of <a href=\"https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/http/converter/HttpMessageConverter.html\" rel=\"nofollow noreferrer\"><code>HttpMessageConverters</code></a>. They save the same purpose.</p>\n<p>The following two sections show how to read (download) a multipart response via the two different paradigms.</p>\n<h2>Reactive Client (Spring Webflux)</h2>\n<p>This would be the easiest use case and the only thing we need, is already available in <a href=\"https://docs.spring.io/spring-integration/reference/html/webflux.html\" rel=\"nofollow noreferrer\">Spring Webflux</a> out of the box.</p>\n<p>The class <a href=\"https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/http/codec/multipart/MultipartHttpMessageReader.html\" rel=\"nofollow noreferrer\"><code>MultipartHttpMessageReader</code></a> would be doing all the heavy lifting. <strong>In case</strong> it does not behave exactly how you need it to, you can easily extend it and overwrite the methods to your liking. Your custom Reader can then be registered as a bean like so:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Configuration\npublic class MultipartMessageConverterConfiguration {\n\n  @Bean\n  public CodecCustomizer myCustomMultipartHttpMessageWriter() {\n      return configurer -&gt; configurer.customCodecs()\n                                     .register(new MyCustomMultipartHttpMessageWriter());\n    }\n}\n</code></pre>\n<h2>Non-Reactive Client (Spring MVC/RestTemplate)</h2>\n<p>If you have a &quot;classic&quot; application that uses <code>RestTemplate</code> to communicate via HTTP, then you need to rely on the aforementioned <a href=\"https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/http/converter/HttpMessageConverter.html\" rel=\"nofollow noreferrer\"><code>HttpMessageConverters</code></a>. Unfortunately, the MessageConverter that is responsible for reading multipart data, does not support reading/downloading data:</p>\n<blockquote>\n<p>Implementation of HttpMessageConverter to read and write 'normal' HTML forms and also to write <strong>(but not read)</strong> multipart data (e.g. file uploads)</p>\n</blockquote>\n<p>Source: <a href=\"https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/http/converter/FormHttpMessageConverter.html\" rel=\"nofollow noreferrer\"><code>FormHttpMessageConverter</code></a> Documentation</p>\n<p>So what we need to do, is write our own <code>MessageConverter</code>, which is able to download multipart data. An easy way to do that, would be to make use of the <a href=\"https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/http/codec/multipart/DefaultPartHttpMessageReader.html\" rel=\"nofollow noreferrer\"><code>DefaultPartHttpMessageReader</code></a> that is internally used by <a href=\"https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/http/codec/multipart/MultipartHttpMessageReader.html\" rel=\"nofollow noreferrer\"><code>MultipartHttpMessageReader</code></a>. We don't even need Webflux for that, as it is already shipped with spring-web.</p>\n<p>First let us define 2 classes in which we save the several parts the we read:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class MyCustomPart  {\n\n    public MyCustomPart(byte[] content, String filename, MediaType contentType) {\n        //assign to corresponding member variables; here omitted\n    }\n}\n\n/**\n * Basically a container for a list of objects of the class above.\n */\npublic class MyCustomMultiParts {\n    public MyCustomMultiParts(List&lt;MyCustomPart&gt; parts){\n        //assign to corresponding member variable; here omitted\n    }\n}\n</code></pre>\n<p>Later on, you can always take each Part and convert it to whatever is appropriate. The <code>MyCustomPart</code> represents a single block of your multipart data response. The <code>MyCustomMultiParts</code> represent the whole multipart data.</p>\n<p>Now we come to the meaty stuff:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class CustomMultipartHttpMessageConverter implements HttpMessageConverter&lt;MyCustomMultiParts&gt; {\n  \n    private final List&lt;MediaType&gt; supportedMediaTypes = new ArrayList&lt;&gt;();\n\n    private final DefaultPartHttpMessageReader defaultPartHttpMessageReader;\n\n    public CustomMultipartHttpMessageConverter() {\n        this.supportedMediaTypes.add(MediaType.MULTIPART_FORM_DATA);\n        this.defaultPartHttpMessageReader = new DefaultPartHttpMessageReader();\n    }\n\n    @Override\n    public boolean canRead(final Class&lt;?&gt; clazz, @Nullable final MediaType mediaType) {\n        if (!MyCustomMultiParts.class.isAssignableFrom(clazz)) { \n            return false;\n        }\n        if (mediaType == null) {\n            return true;\n        }\n        for (final MediaType supportedMediaType : getSupportedMediaTypes()) {\n            if (supportedMediaType.includes(mediaType) &amp;&amp; mediaType.getParameter(&quot;boundary&quot;) != null) {\n                return true;\n            }\n        }\n        return false;\n    }\n\n    /**\n     * This wraps the input message into a &quot;reactive&quot; input message, that the reactive DefaultPartHttpMessageReader uses.\n     */\n    private ReactiveHttpInputMessage wrapHttpInputMessage(final HttpInputMessage message) {\n        return new ReactiveHttpInputMessage() {\n            @Override\n            public HttpHeaders getHeaders() {\n                return message.getHeaders();\n            }\n\n            @SneakyThrows //Part of lombok. Just use a try catch block if you're not using it\n            @Override\n            public Flux&lt;DataBuffer&gt; getBody() {\n                final DefaultDataBuffer wrappedBody = new DefaultDataBufferFactory()\n                        .wrap(message.getBody().readAllBytes());\n                return Flux.just(wrappedBody);\n            }\n        };\n    }\n\n    @Override\n    public MyCustomMultiParts read(@Nullable final Class&lt;? extends MyCustomMultiParts&gt; clazz,\n                                           final HttpInputMessage message) throws IOException, HttpMessageNotReadableException {\n        final ReactiveHttpInputMessage wrappedMessage = wrapHttpInputMessage(message);\n        final ResolvableType resolvableType = ResolvableType.forClass(byte[].class); //plays no role\n        List&lt;Part&gt; rawParts = defaultPartHttpMessageReader.read(resolvableType, wrappedMessage, Map.of())//\n                .buffer()//\n                .blockFirst();\n        //You can check here whether the result exists or just continue\n        final List&lt;MyCustomPart&gt; customParts = rawParts.stream()// Now we convert to our customPart\n                .map(part -&gt; {\n                    //Part consists of a DataBuffer, we make a byte[] so we can convert it to whatever we want later\n                    final byte[] content = Optional.ofNullable(part.content().blockFirst())//\n                            .map(DataBuffer::asByteBuffer)//\n                            .map(ByteBuffer::array)//\n                            .orElse(new byte[]{});\n\n                    final HttpHeaders headers = part.headers();\n                    final String filename = headers.getContentDisposition().getFilename();\n                    final MediaType contentType = headers.getContentType();\n                    return new MyCustomPart(content, filename, contentType);\n                }).collect(Collectors.toList());\n        return new MyCustomMultiParts(customParts);\n    }\n\n    @Override\n    public void write(final MyCustomMultiParts parts, final MediaType contentType,\n                      final HttpOutputMessage outputMessage) {\n        // we're just interested in reading\n        throw new UnsupportedOperationException();\n    }\n\n\n    @Override\n    public boolean canWrite(final Class&lt;?&gt; clazz, final MediaType mediaType) {\n        // we're just interested in reading\n        return false;\n    }\n\n    @Override\n    public List&lt;MediaType&gt; getSupportedMediaTypes() {\n        return this.supportedMediaTypes;\n    }\n}\n</code></pre>\n<p>From here on, you should know better what to do with your &quot;CustomPart&quot;. Whether it is a JSON, a bitmap or a PDF. From the byte array you can convert it into anything.</p>\n<p>Now if you want to test it, you only have to add your CustomConverter to a <code>RestTemplate</code> and then &quot;await&quot; the <code>MyCustomMultiParts</code> that we defined:</p>\n<pre class=\"lang-java prettyprint-override\"><code>// This could also be inside your @Bean definition of RestTemplate of course\nfinal RestTemplate restTemplate = new RestTemplate();\nfinal List&lt;HttpMessageConverter&lt;?&gt;&gt; messageConverters = restTemplate.getMessageConverters();\nmessageConverters.add(new CustomMultipartHttpMessageConverter());\n\nString url = &quot;http://server.of.choice:8080/whatever-endpoint-that-sends-multiparts/&quot;;\nfinal HttpHeaders headers = new HttpHeaders();\nheaders.setAccept(List.of(MediaType.MULTIPART_FORM_DATA));\nfinal HttpEntity&lt;Void&gt; requestEntity = new HttpEntity&lt;&gt;(headers);\n//here we await our MyCustomMultiParts\nfinal MyCustomMultiParts entity = restTemplate.exchange(url, GET, requestEntity, MyCustomMultiParts.class);\n</code></pre>\n"}],"owner":{"account_id":6804133,"reputation":1251,"user_id":5236494,"display_name":"kleash"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":13962,"favorite_count":0,"down_vote_count":0,"up_vote_count":9,"accepted_answer_id":42548549,"answer_count":3,"score":9,"last_activity_date":1667316753,"creation_date":1488375406,"question_id":42533237,"body_markdown":"I have a java controller which have to send me some text data and different byte arrays. So I am building n multipart request and writing it to stream from HttpServletResponse.\r\n\r\nNow my problem is how to parse the response at client side and extract the multiple parts.\r\n\r\nSERVER CODE SNIPPET:-\r\n\r\n\t\t\tMultipartEntityBuilder builder = MultipartEntityBuilder.create();\r\n\t\t\t// Prepare payload\r\n\t\t\tbuilder.addBinaryBody(&quot;document1&quot;, file);\r\n\t\t\tbuilder.addBinaryBody(&quot;document2&quot;, file2);\r\n\t\t\tbuilder.addPart(&quot;stringData&quot;, new StringBody(jsonData, ContentType.TEXT_PLAIN));\r\n\r\n\t\t\t// Set to request body\r\n\r\n\t\t\tHttpEntity entity = builder.build();\r\n\t\t\tpostRequest.setEntity(entity);\r\n\r\n\r\nCLIENT CODE SNIPPET:-\r\n\r\n\t\t\tHttpPost httpPost = new HttpPost(finalUrl);\r\n\r\n\t\t\tStringEntity entity = new StringEntity(json);\r\n\t\t\thttpPost.setEntity(entity);\r\n\t\t\thttpPost.setHeader(&quot;Content-type&quot;, APPLICATION_JSON_TYPE);\r\n\r\n\t\t\tByteArrayOutputStream baos = new ByteArrayOutputStream();\r\n\t\t\tCloseableHttpResponse response = httpClient.execute(httpPost);\r\n\t\t\tInputStream in = new BufferedInputStream(response.getEntity().getContent());\r\n\r\nI checked CloseableHttpResponse and HttpEntity but none of them is providing method to parse multipart request.\r\n\r\nEDIT 1:\r\nThis is my sample response I am receiving at client side stream:-\r\n\r\n    --bvRi5oZum37DUldtLgQGSbc5RRVZxKpjZMO4SYDe\r\n    Content-Disposition: form-data; name=&quot;numeric&quot;\r\n    Content-Type: text/plain; charset=ISO-8859-1\r\n    Content-Transfer-Encoding: 8bit\r\n    01010110\r\n    --bvRi5oZum37DUldtLgQGSbc5RRVZxKpjZMO4SYDe\r\n    Content-Disposition: form-data; name=&quot;stringmessage&quot;\r\n    Content-Type: text/plain; charset=ISO-8859-1\r\n    Content-Transfer-Encoding:8bit\r\n    testmessage\r\n    --bvRi5oZum37DUldtLgQGSbc5RRVZxKpjZMO4SYDe\r\n    Content-Disposition: form-data; name=&quot;binarydata&quot;; filename=&quot;file1&quot;\r\n    Content-Type: application/octet-stream\r\n    Content-Transfer-Encoding: binary\r\n    HI, THIS IS MY BINARY DATA\r\n    --bvRi5oZum37DUldtLgQGSbc5RRVZxKpjZMO4SYDe\r\n    Content-Disposition: form-data; name=&quot;ending&quot;\r\n    Content-Type: text/plain; charset=ISO-8859-1\r\n    Content-Transfer-Encoding: 8bit\r\n    ending\r\n    --bvRi5oZum37DUldtLgQGSbc5RRVZxKpjZMO4SYDe--","title":"Receiving Multipart Response on client side (ClosableHttpResponse)","body":"<p>I have a java controller which have to send me some text data and different byte arrays. So I am building n multipart request and writing it to stream from HttpServletResponse.</p>\n\n<p>Now my problem is how to parse the response at client side and extract the multiple parts.</p>\n\n<p>SERVER CODE SNIPPET:-</p>\n\n<pre><code>        MultipartEntityBuilder builder = MultipartEntityBuilder.create();\n        // Prepare payload\n        builder.addBinaryBody(\"document1\", file);\n        builder.addBinaryBody(\"document2\", file2);\n        builder.addPart(\"stringData\", new StringBody(jsonData, ContentType.TEXT_PLAIN));\n\n        // Set to request body\n\n        HttpEntity entity = builder.build();\n        postRequest.setEntity(entity);\n</code></pre>\n\n<p>CLIENT CODE SNIPPET:-</p>\n\n<pre><code>        HttpPost httpPost = new HttpPost(finalUrl);\n\n        StringEntity entity = new StringEntity(json);\n        httpPost.setEntity(entity);\n        httpPost.setHeader(\"Content-type\", APPLICATION_JSON_TYPE);\n\n        ByteArrayOutputStream baos = new ByteArrayOutputStream();\n        CloseableHttpResponse response = httpClient.execute(httpPost);\n        InputStream in = new BufferedInputStream(response.getEntity().getContent());\n</code></pre>\n\n<p>I checked CloseableHttpResponse and HttpEntity but none of them is providing method to parse multipart request.</p>\n\n<p>EDIT 1:\nThis is my sample response I am receiving at client side stream:-</p>\n\n<pre><code>--bvRi5oZum37DUldtLgQGSbc5RRVZxKpjZMO4SYDe\nContent-Disposition: form-data; name=\"numeric\"\nContent-Type: text/plain; charset=ISO-8859-1\nContent-Transfer-Encoding: 8bit\n01010110\n--bvRi5oZum37DUldtLgQGSbc5RRVZxKpjZMO4SYDe\nContent-Disposition: form-data; name=\"stringmessage\"\nContent-Type: text/plain; charset=ISO-8859-1\nContent-Transfer-Encoding:8bit\ntestmessage\n--bvRi5oZum37DUldtLgQGSbc5RRVZxKpjZMO4SYDe\nContent-Disposition: form-data; name=\"binarydata\"; filename=\"file1\"\nContent-Type: application/octet-stream\nContent-Transfer-Encoding: binary\nHI, THIS IS MY BINARY DATA\n--bvRi5oZum37DUldtLgQGSbc5RRVZxKpjZMO4SYDe\nContent-Disposition: form-data; name=\"ending\"\nContent-Type: text/plain; charset=ISO-8859-1\nContent-Transfer-Encoding: 8bit\nending\n--bvRi5oZum37DUldtLgQGSbc5RRVZxKpjZMO4SYDe--\n</code></pre>\n"},{"tags":["java","greedy"],"comments":[{"owner":{"account_id":7142980,"reputation":323243,"user_id":5459839,"display_name":"trincot"},"score":0,"creation_date":1667314059,"post_id":74277261,"comment_id":131135569,"body_markdown":"Has nothing to do with `dsa`. Tag removed.","body":"Has nothing to do with <code>dsa</code>. Tag removed."}],"answers":[{"tags":[],"owner":{"account_id":7142980,"reputation":323243,"user_id":5459839,"display_name":"trincot"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1667315619,"creation_date":1667315619,"answer_id":74278032,"question_id":74277261,"body_markdown":"The first code version has one issue in the line where -1 is returned:\r\n\r\n```\r\n            if(stepsCount == 0){\r\n                if(arr[start] == 0) return -1;\r\n                jumps++;\r\n                stepsCount = maxReach-start;\r\n```\r\n\r\nThis is not correct. It may well be that `arr[start]` is zero, but that at some previous index a large enough value was found to jump beyond this point. And in the example input you have given that is indeed the case. \r\n\r\nInstead, the -1 should be returned when none of the previous values would allow a jump beyond the current `start` index. That means you should check how `maxReach` relates to `start`, or in other words, we should check whether the updated `stepsCount` is strictly positive.\r\n\r\nHere is the correction for that section of code:\r\n\r\n```\r\n            if(stepsCount == 0){\r\n                jumps++;\r\n                stepsCount = maxReach-start;\r\n                if(stepsCount == 0) return -1;\r\n```\r\n  \r\n\r\n\r\n\r\n","title":"Minimum number of jumps II","body":"<p>The first code version has one issue in the line where -1 is returned:</p>\n<pre><code>            if(stepsCount == 0){\n                if(arr[start] == 0) return -1;\n                jumps++;\n                stepsCount = maxReach-start;\n</code></pre>\n<p>This is not correct. It may well be that <code>arr[start]</code> is zero, but that at some previous index a large enough value was found to jump beyond this point. And in the example input you have given that is indeed the case.</p>\n<p>Instead, the -1 should be returned when none of the previous values would allow a jump beyond the current <code>start</code> index. That means you should check how <code>maxReach</code> relates to <code>start</code>, or in other words, we should check whether the updated <code>stepsCount</code> is strictly positive.</p>\n<p>Here is the correction for that section of code:</p>\n<pre><code>            if(stepsCount == 0){\n                jumps++;\n                stepsCount = maxReach-start;\n                if(stepsCount == 0) return -1;\n</code></pre>\n"}],"owner":{"account_id":13820855,"reputation":23,"user_id":9976333,"display_name":"Ravi Khinchi"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":88,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":74278032,"answer_count":1,"score":2,"last_activity_date":1667316562,"creation_date":1667311954,"question_id":74277261,"body_markdown":"I am trying to solve the GeeksForGeeks problem [Minimum number of jumps](https://practice.geeksforgeeks.org/problems/minimum-number-of-jumps-1587115620/1):\r\n\r\n&gt; Given an array of `N` integers `arr[]` where each element represents the max length of the jump that can be made forward from that element. Find the minimum number of jumps to reach the end of the array (starting from the first element). If an element is 0, then you cannot move through that element.\r\n&gt; \r\n&gt; Note: Return -1 if you can&#39;t reach the end of the array.\r\n\r\nI couldn&#39;t solve this problem for O(n) time complexity, so I looked around and came across the following article\r\nlink: https://www.enjoyalgorithms.com/blog/minimum-number-of-jumps-to-reach-end\r\n\r\nI understood that we can apply a greedy algorithm to keep track of the the `maxPossibleStep` that we can take in the current range. But the algorithm suggested in that explanation fails to realize we can&#39;t really move forward when, after the current range is over and it&#39;s time to step into the next range, it finds that the current position contains zero.\r\n\r\nInstead, the algorithm suggested in that article then moves ahead assuming the `maxPossibleStep` encountered in previous range.\r\n\r\nHere is the initial algorithm that I found:\r\n\r\n```\r\nstatic int minJumps(int[] arr){\r\n    int n = arr.length; \r\n    if(n &lt;= 1) return 0;   \r\n    int maxReach = arr[0];\r\n    int stepsCount = arr[0];\r\n    int jumps = 0;\r\n    //   boolean isReachable = false;\r\n    int start = 1;\r\n    while(start &lt; n-1){\r\n        maxReach = Math.max(maxReach, start+arr[start]);\r\n        stepsCount--;\r\n        if(stepsCount == 0){\r\n            if(arr[start] == 0) return -1;\r\n            jumps++;\r\n            stepsCount = maxReach-start;\r\n        }\r\n        start++;\r\n    }\r\n    if(jumps == 0 &amp;&amp; stepsCount &gt; 0) return 1;  \r\n    return jumps==0?-1:jumps+1;         \r\n}\r\n```\r\n\r\nBut this code fails for the following input\r\n\r\n```\r\nN = 15\r\narr[] = 9 10 1 2 3 4 8 0 0 0 0 0 0 0 1\r\n```\r\n\r\n...because `stepsCount` will become zero at `i == 9` where `arr[start]` will be zero. Here I am simply returning -1 without considering the previous options, like I can reach element 8 then I can reach the end.\r\n\r\nBut it will pass for the following:\r\n \r\n```\r\nN = 4\r\narr[] = 2 1 0 3\r\n```\r\n\r\n... because here either from index 2 or 1 we can&#39;t reach index 3\r\n\r\nSo I came up with the following **modification**\r\n\r\n```\r\nstatic int minJumps(int[] arr){       \r\n    int n = arr.length;\r\n    if(n &lt;= 1) return 0;\r\n    int maxReach = arr[0];\r\n    int stepsCount = arr[0];\r\n    int jumps = 0;\r\n    int start = 0;\r\n    //   boolean isReachable = false;\r\n    int i = 1;\r\n    while(i &lt; n-1){\r\n        if(arr[i] != 0) maxReach = Math.max(maxReach, i+arr[i]);\r\n        stepsCount--;\r\n        if(stepsCount == 0){\r\n            // this block checks if we have prev option then try those\r\n            if(arr[i] == 0){\r\n                if(start == i) return -1;\r\n                i = start+2;\r\n                stepsCount = arr[start+1];\r\n                maxReach = arr[start+1];\r\n                //   stepsCount--;\r\n                continue;\r\n            }\r\n            jumps++;\r\n            start = i;\r\n            stepsCount = maxReach-i;\r\n        }\r\n        i++;\r\n    }\r\n    if(stepsCount &gt; 0 || jumps != 0) return jumps+1;  \r\n    return -1;\r\n}\r\n```\r\n\r\nHere I am keeping an additional variable called `start` (don&#39;t confuse it with the `start` in above code, apologies for confusion [above `start === i`])\r\n\r\nWhenever I find that the `stepsCount` is zero, and it&#39;s time to jump to next interval, I check if the current element is zero, I backtrack to `start+2` and reset `maxReach` and `stepsCount` accordingly.\r\n\r\nBut the problem with this modified algorithm, is it&#39;s not giving me O(n) time complexity. I am getting *Time Limit Exceeded*.\r\n\r\nI am also not very confident that the above approach is really correct.\r\n\r\nHow can I modify the original algorithm, so it returns the correct result, including for the test case I provided?","title":"Minimum number of jumps II","body":"<p>I am trying to solve the GeeksForGeeks problem <a href=\"https://practice.geeksforgeeks.org/problems/minimum-number-of-jumps-1587115620/1\" rel=\"nofollow noreferrer\">Minimum number of jumps</a>:</p>\n<blockquote>\n<p>Given an array of <code>N</code> integers <code>arr[]</code> where each element represents the max length of the jump that can be made forward from that element. Find the minimum number of jumps to reach the end of the array (starting from the first element). If an element is 0, then you cannot move through that element.</p>\n<p>Note: Return -1 if you can't reach the end of the array.</p>\n</blockquote>\n<p>I couldn't solve this problem for O(n) time complexity, so I looked around and came across the following article\nlink: <a href=\"https://www.enjoyalgorithms.com/blog/minimum-number-of-jumps-to-reach-end\" rel=\"nofollow noreferrer\">https://www.enjoyalgorithms.com/blog/minimum-number-of-jumps-to-reach-end</a></p>\n<p>I understood that we can apply a greedy algorithm to keep track of the the <code>maxPossibleStep</code> that we can take in the current range. But the algorithm suggested in that explanation fails to realize we can't really move forward when, after the current range is over and it's time to step into the next range, it finds that the current position contains zero.</p>\n<p>Instead, the algorithm suggested in that article then moves ahead assuming the <code>maxPossibleStep</code> encountered in previous range.</p>\n<p>Here is the initial algorithm that I found:</p>\n<pre><code>static int minJumps(int[] arr){\n    int n = arr.length; \n    if(n &lt;= 1) return 0;   \n    int maxReach = arr[0];\n    int stepsCount = arr[0];\n    int jumps = 0;\n    //   boolean isReachable = false;\n    int start = 1;\n    while(start &lt; n-1){\n        maxReach = Math.max(maxReach, start+arr[start]);\n        stepsCount--;\n        if(stepsCount == 0){\n            if(arr[start] == 0) return -1;\n            jumps++;\n            stepsCount = maxReach-start;\n        }\n        start++;\n    }\n    if(jumps == 0 &amp;&amp; stepsCount &gt; 0) return 1;  \n    return jumps==0?-1:jumps+1;         \n}\n</code></pre>\n<p>But this code fails for the following input</p>\n<pre><code>N = 15\narr[] = 9 10 1 2 3 4 8 0 0 0 0 0 0 0 1\n</code></pre>\n<p>...because <code>stepsCount</code> will become zero at <code>i == 9</code> where <code>arr[start]</code> will be zero. Here I am simply returning -1 without considering the previous options, like I can reach element 8 then I can reach the end.</p>\n<p>But it will pass for the following:</p>\n<pre><code>N = 4\narr[] = 2 1 0 3\n</code></pre>\n<p>... because here either from index 2 or 1 we can't reach index 3</p>\n<p>So I came up with the following <strong>modification</strong></p>\n<pre><code>static int minJumps(int[] arr){       \n    int n = arr.length;\n    if(n &lt;= 1) return 0;\n    int maxReach = arr[0];\n    int stepsCount = arr[0];\n    int jumps = 0;\n    int start = 0;\n    //   boolean isReachable = false;\n    int i = 1;\n    while(i &lt; n-1){\n        if(arr[i] != 0) maxReach = Math.max(maxReach, i+arr[i]);\n        stepsCount--;\n        if(stepsCount == 0){\n            // this block checks if we have prev option then try those\n            if(arr[i] == 0){\n                if(start == i) return -1;\n                i = start+2;\n                stepsCount = arr[start+1];\n                maxReach = arr[start+1];\n                //   stepsCount--;\n                continue;\n            }\n            jumps++;\n            start = i;\n            stepsCount = maxReach-i;\n        }\n        i++;\n    }\n    if(stepsCount &gt; 0 || jumps != 0) return jumps+1;  \n    return -1;\n}\n</code></pre>\n<p>Here I am keeping an additional variable called <code>start</code> (don't confuse it with the <code>start</code> in above code, apologies for confusion [above <code>start === i</code>])</p>\n<p>Whenever I find that the <code>stepsCount</code> is zero, and it's time to jump to next interval, I check if the current element is zero, I backtrack to <code>start+2</code> and reset <code>maxReach</code> and <code>stepsCount</code> accordingly.</p>\n<p>But the problem with this modified algorithm, is it's not giving me O(n) time complexity. I am getting <em>Time Limit Exceeded</em>.</p>\n<p>I am also not very confident that the above approach is really correct.</p>\n<p>How can I modify the original algorithm, so it returns the correct result, including for the test case I provided?</p>\n"},{"tags":["java","spring-boot"],"comments":[{"owner":{"display_name":"user6073886"},"score":6,"creation_date":1667315352,"post_id":74277956,"comment_id":131136023,"body_markdown":"Regex is needlessly complicated for such a simple case. a Simple `return &quot;true&quot;.equals(acceptanceValue) || &quot;false&quot;.equals(acceptanceValue);` is really all you need.","body":"Regex is needlessly complicated for such a simple case. a Simple <code>return &quot;true&quot;.equals(acceptanceValue) || &quot;false&quot;.equals(acceptanceValue);</code> is really all you need."},{"owner":{"account_id":1992310,"reputation":11172,"user_id":1786065,"accept_rate":91,"display_name":"Rogue"},"score":3,"creation_date":1667315455,"post_id":74277956,"comment_id":131136056,"body_markdown":"In fact, regex failed you here, as `.*true.*` would match _anything_ containing `true`, not equaling it. Your regex for an exact match would end up as `&quot;true&quot;`, which at that point you could simply compare the strings.","body":"In fact, regex failed you here, as <code>.*true.*</code> would match <i>anything</i> containing <code>true</code>, not equaling it. Your regex for an exact match would end up as <code>&quot;true&quot;</code>, which at that point you could simply compare the strings."},{"owner":{"account_id":22001181,"reputation":1,"user_id":16272892,"display_name":"GeekToLearn"},"score":0,"creation_date":1667315509,"post_id":74277956,"comment_id":131136074,"body_markdown":"I can&#39;t change the acceptanceValue field as Boolean. It should be a String.","body":"I can&#39;t change the acceptanceValue field as Boolean. It should be a String."},{"owner":{"display_name":"user6073886"},"score":1,"creation_date":1667315625,"post_id":74277956,"comment_id":131136113,"body_markdown":"@GeekToLearn I don&#39;t get what you are trying to say with that comment. No one ever suggested you change the type of that field. We simply suggested you do a simple String comparison via equals, which has nothing to do with changing the type of your method argument.","body":"@GeekToLearn I don&#39;t get what you are trying to say with that comment. No one ever suggested you change the type of that field. We simply suggested you do a simple String comparison via equals, which has nothing to do with changing the type of your method argument."}],"answers":[{"tags":[],"owner":{"account_id":465573,"reputation":192694,"user_id":869736,"accept_rate":82,"display_name":"Louis Wasserman"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1667316281,"creation_date":1667316281,"answer_id":74278137,"question_id":74277956,"body_markdown":"As suggested by OH GOD SPIDERS, the following is a complete, correct, and compiling implementation of the method you want.\r\n\r\n```\r\npublic static Boolean isValidAcceptanceField(String acceptanceValue){\r\n  return acceptanceValue.equals(&quot;true&quot;) || acceptanceValue.equals(&quot;false&quot;);\r\n}\r\n```\r\n\r\n(This version throws on null, as it should.)\r\n","title":"How to validate exact value of &quot;true&quot; and &quot;false&quot; accurately in Java using regular expression?","body":"<p>As suggested by OH GOD SPIDERS, the following is a complete, correct, and compiling implementation of the method you want.</p>\n<pre><code>public static Boolean isValidAcceptanceField(String acceptanceValue){\n  return acceptanceValue.equals(&quot;true&quot;) || acceptanceValue.equals(&quot;false&quot;);\n}\n</code></pre>\n<p>(This version throws on null, as it should.)</p>\n"}],"owner":{"account_id":22001181,"reputation":1,"user_id":16272892,"display_name":"GeekToLearn"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":75,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1667316281,"creation_date":1667315255,"question_id":74277956,"body_markdown":"I need to give **success** as output only if the user gives the input as true or false. Anything other than that should show **error**. I have used Regex in order to do that. But some of the scenarios are not getting validated as per the requirement.\r\n\r\nI have used Regex to check if the acceptance value given by the user is true or false. Anything other than true or false should show an error. If the user gives null value then also it should show error.\r\nMy code -\r\n``\r\n```\r\n...\r\npublic static Boolean isValidAcceptanceField(String acceptanceValue){\r\nBoolean flag= false;\r\nif(acceptanceValue!=null &amp;&amp; (acceptanceValue.matches(&quot;.*true.*&quot;) || acceptanceValue.matches(&quot;.*false*.&quot;))){\r\n flag=true;\r\n}\r\nreturn flag;\r\n}`\r\n....\r\n````\r\n\r\na)This code is validating perfectly the following scenarios-\r\n\r\n    acceptanceValue    Output\r\n    null               error\r\n    trrrrue            error\r\n    truuuuue           error\r\n    peter              error\r\n    faaalse            error\r\n    falllse            error\r\n    fal#se             error\r\n\r\nHere for the scenarios written in a) section the requirement is to get &quot;success&quot; as output and it is working fine.\r\n\r\nb)This code is not validating the following scenarios-\r\n\r\n    acceptanceValue    Output\r\n    tttrue             Success\r\n    trueeee            Success\r\n    ffffalse           Success\r\n    falseee            Success\r\n    true#              Success\r\n\r\nHere for the scenarios written in b) section the requirement is get &quot;error&quot; as output but it is giving success.So is not working fine.\r\n\r\nIt seems like the code is not validating the value if the typing mistake is being done at the beginning or the end of the acceptance field.\r\nWhat Regex should I use to validate true and false perfectly in all the scenarios?\r\n\r\n","title":"How to validate exact value of &quot;true&quot; and &quot;false&quot; accurately in Java using regular expression?","body":"<p>I need to give <strong>success</strong> as output only if the user gives the input as true or false. Anything other than that should show <strong>error</strong>. I have used Regex in order to do that. But some of the scenarios are not getting validated as per the requirement.</p>\n<p>I have used Regex to check if the acceptance value given by the user is true or false. Anything other than true or false should show an error. If the user gives null value then also it should show error.\nMy code -\n``</p>\n<pre><code>...\npublic static Boolean isValidAcceptanceField(String acceptanceValue){\nBoolean flag= false;\nif(acceptanceValue!=null &amp;&amp; (acceptanceValue.matches(&quot;.*true.*&quot;) || acceptanceValue.matches(&quot;.*false*.&quot;))){\n flag=true;\n}\nreturn flag;\n}`\n....\n</code></pre>\n<p>a)This code is validating perfectly the following scenarios-</p>\n<pre><code>acceptanceValue    Output\nnull               error\ntrrrrue            error\ntruuuuue           error\npeter              error\nfaaalse            error\nfalllse            error\nfal#se             error\n</code></pre>\n<p>Here for the scenarios written in a) section the requirement is to get &quot;success&quot; as output and it is working fine.</p>\n<p>b)This code is not validating the following scenarios-</p>\n<pre><code>acceptanceValue    Output\ntttrue             Success\ntrueeee            Success\nffffalse           Success\nfalseee            Success\ntrue#              Success\n</code></pre>\n<p>Here for the scenarios written in b) section the requirement is get &quot;error&quot; as output but it is giving success.So is not working fine.</p>\n<p>It seems like the code is not validating the value if the typing mistake is being done at the beginning or the end of the acceptance field.\nWhat Regex should I use to validate true and false perfectly in all the scenarios?</p>\n"},{"tags":["java","groovy","rest-assured","gpath"],"answers":[{"tags":[],"owner":{"account_id":171189,"reputation":38109,"user_id":398441,"accept_rate":87,"display_name":"Johan"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1407611854,"creation_date":1407611854,"answer_id":25222124,"question_id":25173821,"body_markdown":"Haven&#39;t tried it but from the top of my head this ought to work:\r\n\r\n    errors.find { it.field == &#39;firstName&#39; }.code","title":"How to find an object by a field value in Rest Assured?","body":"<p>Haven't tried it but from the top of my head this ought to work:</p>\n\n<pre><code>errors.find { it.field == 'firstName' }.code\n</code></pre>\n"},{"tags":[],"owner":{"account_id":25817194,"reputation":15,"user_id":19556951,"display_name":"Nikita Burak"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1667315986,"creation_date":1667315986,"answer_id":74278100,"question_id":25173821,"body_markdown":"`errors.find{e -&gt; e.field == &#39;firstName&#39;}.code`","title":"How to find an object by a field value in Rest Assured?","body":"<p><code>errors.find{e -&gt; e.field == 'firstName'}.code</code></p>\n"}],"owner":{"account_id":95375,"reputation":44603,"user_id":745188,"accept_rate":69,"display_name":"Elnur Abdurrakhimov"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1631,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":25222124,"answer_count":2,"score":1,"last_activity_date":1667315986,"creation_date":1407383505,"question_id":25173821,"body_markdown":"I need to get to `code` of an array element that has `field` == `firstName`:\r\n\r\n&lt;!-- language: lang-json --&gt;\r\n\r\n    {\r\n        &quot;errors&quot;: [\r\n            {\r\n                &quot;field&quot;: &quot;firstName&quot;,\r\n                &quot;code&quot;: &quot;NotBlank&quot;\r\n            },\r\n            {\r\n                &quot;field&quot;: &quot;lastName&quot;,\r\n                &quot;code&quot;: &quot;NotBlank&quot;\r\n            }\r\n        ]\r\n    }\r\n\r\nWith JsonPath, the way to do it is `$.errors[?(@.field == firstName)].code`. How do I do the same in Rest Assured with its GPath syntax?","title":"How to find an object by a field value in Rest Assured?","body":"<p>I need to get to <code>code</code> of an array element that has <code>field</code> == <code>firstName</code>:</p>\n\n<pre class=\"lang-json prettyprint-override\"><code>{\n    \"errors\": [\n        {\n            \"field\": \"firstName\",\n            \"code\": \"NotBlank\"\n        },\n        {\n            \"field\": \"lastName\",\n            \"code\": \"NotBlank\"\n        }\n    ]\n}\n</code></pre>\n\n<p>With JsonPath, the way to do it is <code>$.errors[?(@.field == firstName)].code</code>. How do I do the same in Rest Assured with its GPath syntax?</p>\n"},{"tags":["java","generics","instance","erasure"],"comments":[{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":1,"creation_date":1667217301,"post_id":74262753,"comment_id":131110499,"body_markdown":"Why not just give the methods different names?","body":"Why not just give the methods different names?"},{"owner":{"account_id":4947846,"reputation":9433,"user_id":3982755,"accept_rate":79,"display_name":"Bentaye"},"score":2,"creation_date":1667218537,"post_id":74262753,"comment_id":131110899,"body_markdown":"Aren&#39;t Integer, Float and Double final? you can&#39;t extend them, so you can just use them instead of a generic","body":"Aren&#39;t Integer, Float and Double final? you can&#39;t extend them, so you can just use them instead of a generic"},{"owner":{"account_id":238684,"reputation":22543,"user_id":507738,"accept_rate":71,"display_name":"MC Emperor"},"score":1,"creation_date":1667218702,"post_id":74262753,"comment_id":131110949,"body_markdown":"The difference between your code and the code in the linked post, is that the linked post uses `T` as parameter, wereas you use `List&lt;T&gt;` as parameter.","body":"The difference between your code and the code in the linked post, is that the linked post uses <code>T</code> as parameter, wereas you use <code>List&lt;T&gt;</code> as parameter."}],"answers":[{"tags":[],"owner":{"account_id":2682534,"reputation":864,"user_id":2317585,"display_name":"John Gilmer"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1667315048,"creation_date":1667315048,"answer_id":74277910,"question_id":74262753,"body_markdown":"You could use the Number superclass of Integer, Float, and Double as your bound.\r\n\r\n```java\r\npublic class Method&lt;T extends Number&gt; {\r\n  private final List&lt;T&gt; list;\r\n\r\n  public Method(List&lt;T&gt; list) {\r\n    this.list = list;\r\n  }\r\n\r\n  public static void main(String[] args) {\r\n    var mFloats = new Method(Arrays.asList(1.0f, 2.0f, 3.0f));\r\n    var mDoubles =  new Method(Arrays.asList(1.0,2.0,3.0));\r\n    var mInts = new Method(Arrays.asList(1,2,3));\r\n  }\r\n}\r\n```","title":"Java generic List name clash, has same erasure","body":"<p>You could use the Number superclass of Integer, Float, and Double as your bound.</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class Method&lt;T extends Number&gt; {\n  private final List&lt;T&gt; list;\n\n  public Method(List&lt;T&gt; list) {\n    this.list = list;\n  }\n\n  public static void main(String[] args) {\n    var mFloats = new Method(Arrays.asList(1.0f, 2.0f, 3.0f));\n    var mDoubles =  new Method(Arrays.asList(1.0,2.0,3.0));\n    var mInts = new Method(Arrays.asList(1,2,3));\n  }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2682534,"reputation":864,"user_id":2317585,"display_name":"John Gilmer"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1667315976,"creation_date":1667315976,"answer_id":74278098,"question_id":74262753,"body_markdown":"Type Erasure affects Generic Collections like List&lt;T&gt;, so each generic method is type erased into having a parameter signature with parameter type Obejct. See [Oracle Docs][1] To avoid this you can use arrays instead.\r\n\r\n```java\r\nimport java.util.Arrays;\r\nimport java.util.List;\r\n\r\npublic class Method&lt;T&gt; {\r\n  private final List&lt;T&gt; list;\r\n  private Method(List&lt;T&gt; list) {\r\n    this.list = list;\r\n  }\r\n\r\n  public static &lt;T extends Integer&gt; Method&lt;T&gt; create(T[] arr) {\r\n    return new Method&lt;&gt;(Arrays.asList(arr));\r\n  }\r\n\r\n  public static &lt;T extends Float&gt; Method&lt;T&gt; create(T[] arr) {\r\n    return new Method&lt;&gt;(Arrays.asList(arr));\r\n  }\r\n\r\n  public static &lt;T extends Double&gt; Method&lt;T&gt; create(T[] arr) {\r\n    return new Method&lt;&gt;(Arrays.asList(arr));\r\n  }\r\n\r\n  public static void main(String[] args) {\r\n    var floatMethod = Method.create(new Float[] {1.0f, 2.0f});\r\n    var doubleMethod = Method.create(new Double[] {1.0, 2.0});\r\n    var intMethod = Method.create(new Integer[] {1, 2});\r\n  }\r\n}\r\n```\r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/tutorial/java/generics/genTypes.html","title":"Java generic List name clash, has same erasure","body":"<p>Type Erasure affects Generic Collections like List, so each generic method is type erased into having a parameter signature with parameter type Obejct. See <a href=\"https://docs.oracle.com/javase/tutorial/java/generics/genTypes.html\" rel=\"nofollow noreferrer\">Oracle Docs</a> To avoid this you can use arrays instead.</p>\n<pre class=\"lang-java prettyprint-override\"><code>import java.util.Arrays;\nimport java.util.List;\n\npublic class Method&lt;T&gt; {\n  private final List&lt;T&gt; list;\n  private Method(List&lt;T&gt; list) {\n    this.list = list;\n  }\n\n  public static &lt;T extends Integer&gt; Method&lt;T&gt; create(T[] arr) {\n    return new Method&lt;&gt;(Arrays.asList(arr));\n  }\n\n  public static &lt;T extends Float&gt; Method&lt;T&gt; create(T[] arr) {\n    return new Method&lt;&gt;(Arrays.asList(arr));\n  }\n\n  public static &lt;T extends Double&gt; Method&lt;T&gt; create(T[] arr) {\n    return new Method&lt;&gt;(Arrays.asList(arr));\n  }\n\n  public static void main(String[] args) {\n    var floatMethod = Method.create(new Float[] {1.0f, 2.0f});\n    var doubleMethod = Method.create(new Double[] {1.0, 2.0});\n    var intMethod = Method.create(new Integer[] {1, 2});\n  }\n}\n</code></pre>\n"}],"owner":{"account_id":26784068,"reputation":21,"user_id":20378526,"display_name":"Justus Klausecker"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":152,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":2,"score":2,"last_activity_date":1667315976,"creation_date":1667216568,"question_id":74262753,"body_markdown":"I am writing a method with a generic List\\&lt;T\\&gt; as an argument. I want to limit T to Integer, Float and Double with this:\r\n\r\n\r\n```java\r\nprivate Method(List&lt;T&gt; list) {\r\n\tthis.list = list;\r\n}\r\n\r\npublic static &lt;T extends Integer&gt; Method&lt;T&gt; create(List&lt;T&gt; list) {\r\n\treturn new Method&lt;&gt;(list);\r\n}\r\n\r\npublic static &lt;T extends Float&gt; Method&lt;T&gt; create(List&lt;T&gt; list) {\r\n\treturn new Method&lt;&gt;(list);\r\n}\r\n\r\npublic static &lt;T extends Double&gt; Method&lt;T&gt; create(List&lt;T&gt; list) {\r\n\treturn new Method&lt;&gt;(list);\r\n}\r\n```\r\n\r\nBut I get this error:\r\n\r\n```\r\nerror: name clash: &lt;T#1&gt;create(List&lt;T#1&gt;) and &lt;T#2&gt;create(List&lt;T#2&gt;) have the same erasure                                                                                                                                 \r\n        public static &lt;T extends Float&gt; Method&lt;T&gt; create(List&lt;T&gt; list) {                                                             \r\n                                                      ^                                                                                    \r\n  where T#1,T#2 are type-variables:                                                                                                        \r\n    T#1 extends Float declared in method &lt;T#1&gt;create(List&lt;T#1&gt;)                                                                            \r\n    T#2 extends Integer declared in method &lt;T#2&gt;create(List&lt;T#2&gt;)\r\n```\r\n\r\nI get the same error for T#1 extends Double as well.\r\n\r\nThe code is based on [this](https://stackoverflow.com/a/48824392) answer, which works well. So I think the problem is related to the fact that I used a list of generics as an input instead of a single generic.\r\n\r\nHow can I fix this? Is there some way to give Java the ability to discern between the different instances?","title":"Java generic List name clash, has same erasure","body":"<p>I am writing a method with a generic List&lt;T&gt; as an argument. I want to limit T to Integer, Float and Double with this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>private Method(List&lt;T&gt; list) {\n    this.list = list;\n}\n\npublic static &lt;T extends Integer&gt; Method&lt;T&gt; create(List&lt;T&gt; list) {\n    return new Method&lt;&gt;(list);\n}\n\npublic static &lt;T extends Float&gt; Method&lt;T&gt; create(List&lt;T&gt; list) {\n    return new Method&lt;&gt;(list);\n}\n\npublic static &lt;T extends Double&gt; Method&lt;T&gt; create(List&lt;T&gt; list) {\n    return new Method&lt;&gt;(list);\n}\n</code></pre>\n<p>But I get this error:</p>\n<pre><code>error: name clash: &lt;T#1&gt;create(List&lt;T#1&gt;) and &lt;T#2&gt;create(List&lt;T#2&gt;) have the same erasure                                                                                                                                 \n        public static &lt;T extends Float&gt; Method&lt;T&gt; create(List&lt;T&gt; list) {                                                             \n                                                      ^                                                                                    \n  where T#1,T#2 are type-variables:                                                                                                        \n    T#1 extends Float declared in method &lt;T#1&gt;create(List&lt;T#1&gt;)                                                                            \n    T#2 extends Integer declared in method &lt;T#2&gt;create(List&lt;T#2&gt;)\n</code></pre>\n<p>I get the same error for T#1 extends Double as well.</p>\n<p>The code is based on <a href=\"https://stackoverflow.com/a/48824392\">this</a> answer, which works well. So I think the problem is related to the fact that I used a list of generics as an input instead of a single generic.</p>\n<p>How can I fix this? Is there some way to give Java the ability to discern between the different instances?</p>\n"},{"tags":["java","intellij-idea","jakarta-ee","tomcat9"],"comments":[{"owner":{"account_id":18911549,"reputation":600,"user_id":13797513,"display_name":"chptr-one"},"score":1,"creation_date":1667313608,"post_id":74277585,"comment_id":131135372,"body_markdown":"https://www.jetbrains.com/help/idea/java-ee.html","body":"<a href=\"https://www.jetbrains.com/help/idea/java-ee.html\" rel=\"nofollow noreferrer\">jetbrains.com/help/idea/java-ee.html</a>"}],"answers":[{"tags":[],"owner":{"account_id":12589825,"reputation":39,"user_id":12469675,"display_name":"bubbleblort"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1667315270,"creation_date":1667315270,"answer_id":74277960,"question_id":74277585,"body_markdown":"Fixed it - changed the version from Jakarta EE 9 to Java EE 8.\r\n\r\nWhen creating a new project on the second window where you choose dependencies there&#39;s a drop down menu for &quot;version&quot;. Choose Java EE 8 instead of Jakarta EE 9. ","title":"Can I still use Java EE on Intellij or do I have to use Jakarta EE?","body":"<p>Fixed it - changed the version from Jakarta EE 9 to Java EE 8.</p>\n<p>When creating a new project on the second window where you choose dependencies there's a drop down menu for &quot;version&quot;. Choose Java EE 8 instead of Jakarta EE 9.</p>\n"}],"owner":{"account_id":12589825,"reputation":39,"user_id":12469675,"display_name":"bubbleblort"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":370,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1667315270,"creation_date":1667313483,"question_id":74277585,"body_markdown":"Trying to work on a project that must use Tomcat 9 server but I&#39;ve discovered that this version of Tomcat doesn&#39;t work with Jakarta EE. \r\n\r\nIs it still possible to use Java EE for Intellij in 2022?","title":"Can I still use Java EE on Intellij or do I have to use Jakarta EE?","body":"<p>Trying to work on a project that must use Tomcat 9 server but I've discovered that this version of Tomcat doesn't work with Jakarta EE.</p>\n<p>Is it still possible to use Java EE for Intellij in 2022?</p>\n"},{"tags":["java","hibernate","jpa","join","spring-data-jpa"],"comments":[{"owner":{"account_id":5279068,"reputation":895,"user_id":4215032,"display_name":"Pp88"},"score":0,"creation_date":1667315753,"post_id":74277922,"comment_id":131136168,"body_markdown":"Have you tryed with a jpql query?  You can get rid of the mapping in the entities. You can also check with a criteria query making a cross join. In the worst scenario you can try with a native query","body":"Have you tryed with a jpql query?  You can get rid of the mapping in the entities. You can also check with a criteria query making a cross join. In the worst scenario you can try with a native query"},{"owner":{"account_id":231721,"reputation":20460,"user_id":496099,"display_name":"Chris"},"score":0,"creation_date":1667320410,"post_id":74277922,"comment_id":131137865,"body_markdown":"Is this really a OneToMany? In theory, it should have a clear FK that references a single row; but as the error states, the 4 columns you&#39;ve shown are only 4 of the 5 you&#39;ve marked as composites to uniquely identify Sftseb2, so it isn&#39;t complete. So it really is more of a ManyToMany. This mapping isn&#39;t good for JPA as it has no idea who controls that fk; what should happen if you try to change the reference, how can it save such a change? So what is the point of requiring this list in your model?","body":"Is this really a OneToMany? In theory, it should have a clear FK that references a single row; but as the error states, the 4 columns you&#39;ve shown are only 4 of the 5 you&#39;ve marked as composites to uniquely identify Sftseb2, so it isn&#39;t complete. So it really is more of a ManyToMany. This mapping isn&#39;t good for JPA as it has no idea who controls that fk; what should happen if you try to change the reference, how can it save such a change? So what is the point of requiring this list in your model?"},{"owner":{"account_id":26796356,"reputation":1,"user_id":20389043,"display_name":"Spe3do"},"score":0,"creation_date":1667321889,"post_id":74277922,"comment_id":131138376,"body_markdown":"My goal would be to fetch every related rows from various tables and send them as an xml structure for further processing.\n\nSo:\nFor-each row in SFTSEB2 fetch rows from SFTSEB3 where the empfkey, ebmsg, ebbord, ebsort equals what the actual row from SFTSEB2 has.\n\nThis should behave like a OneToMany because for each row of STFSEB2 there can be OneOrMore SFTSEB3. Although based on the limited set of columns I agree that this can&#39;t be unique so from that point of view this is more of a ManyToMany.... \n\nIsn&#39;t it solvable with Entity joins?","body":"My goal would be to fetch every related rows from various tables and send them as an xml structure for further processing.  So: For-each row in SFTSEB2 fetch rows from SFTSEB3 where the empfkey, ebmsg, ebbord, ebsort equals what the actual row from SFTSEB2 has.  This should behave like a OneToMany because for each row of STFSEB2 there can be OneOrMore SFTSEB3. Although based on the limited set of columns I agree that this can&#39;t be unique so from that point of view this is more of a ManyToMany....   Isn&#39;t it solvable with Entity joins?"},{"owner":{"account_id":231721,"reputation":20460,"user_id":496099,"display_name":"Chris"},"score":1,"creation_date":1667322527,"post_id":74277922,"comment_id":131138598,"body_markdown":"I more mean the purpose of your model. Joins are easy to do without requiring actual references in your object model. JPQL &quot;Select s3 from Sftseb2 s2 join Sftseb3 s3  on ( s2.empfkey = s3.empfkey AND s2.ebmsg = s3.ebmsg AND s2.ebbord = s3.ebbord AND s2.ebsort = s3.ebsort) where ...&quot; If your provider doesn&#39;t support the join on clause, you can add it to the where clause yourself. If you want the list fetched each time you fetch Sftseb2 instances, you&#39;ll have to resort to non-JPA mappings as JPA requires fks reference primary keys to allow for entity identity, lookups and caching.","body":"I more mean the purpose of your model. Joins are easy to do without requiring actual references in your object model. JPQL &quot;Select s3 from Sftseb2 s2 join Sftseb3 s3  on ( s2.empfkey = s3.empfkey AND s2.ebmsg = s3.ebmsg AND s2.ebbord = s3.ebbord AND s2.ebsort = s3.ebsort) where ...&quot; If your provider doesn&#39;t support the join on clause, you can add it to the where clause yourself. If you want the list fetched each time you fetch Sftseb2 instances, you&#39;ll have to resort to non-JPA mappings as JPA requires fks reference primary keys to allow for entity identity, lookups and caching."}],"owner":{"account_id":26796356,"reputation":1,"user_id":20389043,"display_name":"Spe3do"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":528,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1667315216,"creation_date":1667315093,"question_id":74277922,"body_markdown":"I have an old database where can&#39;t change the schema so I have to adapt my code to work.\r\n\r\nWithin that db I have two tables which I&#39;d like to join.\r\nThe main Table called SFTSEB2 has a 5 Column Composite primary key: empfkey, ebmsg, ebbord, ebsort, ebrefn only these will going to fulfill the uniqueness on that Table.\r\n\r\nI&#39;d like to join SFTSEB3 to SFTSEB2 but based on only 4 Columns: empfkey, ebmsg, ebbord, ebsort\r\n\r\nEntites:\r\n\r\n\r\n```\r\n@Entity\r\n@Table(name = &quot;SFTSEB2&quot;)\r\n@IdClass(Sftseb2ID.class)\r\n@Immutable\r\npublic class Sftseb2 {\r\n    @Id\r\n    private String empfkey;\r\n\t\r\n    @Id\r\n    private String ebmsg;\r\n\t\r\n    @Id\r\n    private String ebbord;\r\n\t\r\n    @Id\r\n    private int ebsort;\r\n\r\n    private int ebbpos;\r\n\r\n    private String ebsdgn;\r\n\t\r\n    @Id\r\n    private String ebrefn;\r\n\r\n    @OneToMany(fetch = FetchType.LAZY)\r\n    @JoinColumns({\r\n            @JoinColumn(name = &quot;empfkey&quot;, referencedColumnName = &quot;empfkey&quot;, insertable = false, updatable = false),\r\n            @JoinColumn(name = &quot;ebmsg&quot;, referencedColumnName = &quot;ebmsg&quot;, insertable = false, updatable = false),\r\n            @JoinColumn(name = &quot;ebbord&quot;, referencedColumnName = &quot;ebbord&quot;, insertable = false, updatable = false),\r\n            @JoinColumn(name = &quot;ebsort&quot;, referencedColumnName = &quot;ebsort&quot;, insertable = false, updatable = false)\r\n    })\r\n    List&lt;Sftseb3&gt; sftseb3;\r\n\t\r\n\t//GettersSetters\r\n\t...\r\n}\r\n```\r\n\r\n```\r\n@Entity\r\n@Table(name = &quot;SFTSEB3&quot;)\r\n@IdClass(Sftseb3ID.class)\r\n@Immutable\r\npublic class Sftseb3 {\r\n    @Id\r\n    private String empfkey;\r\n\t\r\n    @Id\r\n    private String ebmsg;\r\n\t\r\n    @Id\r\n    private String ebbord;\r\n\t\r\n    @Id\r\n    private int ebsort;\r\n\t\r\n    @Id\r\n    private int ebsrt2;\r\n\t\r\n\t@Id\r\n\tprivate String ebsdgn;\r\n   \r\n    private int ebbpos;\r\n\t\r\n\tprivate String ebstst;\r\n\t\r\n\tprivate String ebstsc;\r\n\t\r\n\t\r\n\t//GettersSetters\r\n\t//...\r\n}\r\n```\r\n\r\n\r\nUnfortunately I can get past this because hibernate is giving back:\r\n\r\n` A Foreign key refering Sftseb2 from Sftseb3 has the wrong number of column. should be 5` \r\n\r\nI tried to have a bi-directional mapping so the complete JoinColumns part went to Sftseb3 with a @ManyToOne and Sftseb2 would only contain the mappedBy at the @OneToMany but I got the same issue.\r\nAs I see there is no way to have different PK on an entity and Join another table to it based on part of the PK or even other columns? Why?\r\n\r\nIf I reduce the number of @Id columns to match in the two tables so Sftseb2&#39;s @Ids: empfkey, ebmsg, ebbord, ebsort then it starts to work, however because this is non-unique all instances of Sftseb2 will be the same... ","title":"Joining 2 tables with part of a Composite Primary key in JPA, Hibernate","body":"<p>I have an old database where can't change the schema so I have to adapt my code to work.</p>\n<p>Within that db I have two tables which I'd like to join.\nThe main Table called SFTSEB2 has a 5 Column Composite primary key: empfkey, ebmsg, ebbord, ebsort, ebrefn only these will going to fulfill the uniqueness on that Table.</p>\n<p>I'd like to join SFTSEB3 to SFTSEB2 but based on only 4 Columns: empfkey, ebmsg, ebbord, ebsort</p>\n<p>Entites:</p>\n<pre><code>@Entity\n@Table(name = &quot;SFTSEB2&quot;)\n@IdClass(Sftseb2ID.class)\n@Immutable\npublic class Sftseb2 {\n    @Id\n    private String empfkey;\n    \n    @Id\n    private String ebmsg;\n    \n    @Id\n    private String ebbord;\n    \n    @Id\n    private int ebsort;\n\n    private int ebbpos;\n\n    private String ebsdgn;\n    \n    @Id\n    private String ebrefn;\n\n    @OneToMany(fetch = FetchType.LAZY)\n    @JoinColumns({\n            @JoinColumn(name = &quot;empfkey&quot;, referencedColumnName = &quot;empfkey&quot;, insertable = false, updatable = false),\n            @JoinColumn(name = &quot;ebmsg&quot;, referencedColumnName = &quot;ebmsg&quot;, insertable = false, updatable = false),\n            @JoinColumn(name = &quot;ebbord&quot;, referencedColumnName = &quot;ebbord&quot;, insertable = false, updatable = false),\n            @JoinColumn(name = &quot;ebsort&quot;, referencedColumnName = &quot;ebsort&quot;, insertable = false, updatable = false)\n    })\n    List&lt;Sftseb3&gt; sftseb3;\n    \n    //GettersSetters\n    ...\n}\n</code></pre>\n<pre><code>@Entity\n@Table(name = &quot;SFTSEB3&quot;)\n@IdClass(Sftseb3ID.class)\n@Immutable\npublic class Sftseb3 {\n    @Id\n    private String empfkey;\n    \n    @Id\n    private String ebmsg;\n    \n    @Id\n    private String ebbord;\n    \n    @Id\n    private int ebsort;\n    \n    @Id\n    private int ebsrt2;\n    \n    @Id\n    private String ebsdgn;\n   \n    private int ebbpos;\n    \n    private String ebstst;\n    \n    private String ebstsc;\n    \n    \n    //GettersSetters\n    //...\n}\n</code></pre>\n<p>Unfortunately I can get past this because hibernate is giving back:</p>\n<p><code> A Foreign key refering Sftseb2 from Sftseb3 has the wrong number of column. should be 5</code></p>\n<p>I tried to have a bi-directional mapping so the complete JoinColumns part went to Sftseb3 with a @ManyToOne and Sftseb2 would only contain the mappedBy at the @OneToMany but I got the same issue.\nAs I see there is no way to have different PK on an entity and Join another table to it based on part of the PK or even other columns? Why?</p>\n<p>If I reduce the number of @Id columns to match in the two tables so Sftseb2's @Ids: empfkey, ebmsg, ebbord, ebsort then it starts to work, however because this is non-unique all instances of Sftseb2 will be the same...</p>\n"},{"tags":["java","arrays"],"comments":[{"owner":{"account_id":401843,"reputation":89788,"user_id":768644,"display_name":"rzwitserloot"},"score":3,"creation_date":1667312073,"post_id":74276350,"comment_id":131134769,"body_markdown":"This application requires that you provide 3 arguments - a key, an IV, and data. You give none, thus, `args[0]`, referring to &#39;the first argument&#39;, throws an exception - there _is no_ first argument.","body":"This application requires that you provide 3 arguments - a key, an IV, and data. You give none, thus, <code>args[0]</code>, referring to &#39;the first argument&#39;, throws an exception - there <i>is no</i> first argument."}],"answers":[{"tags":[],"owner":{"account_id":307264,"reputation":2065,"user_id":618465,"accept_rate":95,"display_name":"Navigatron"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1667315030,"creation_date":1667315030,"answer_id":74277907,"question_id":74276350,"body_markdown":"As @rzwitserloot pointed out, you need to check if there have been arguments passed into the application in the command line.\r\n\r\nYou should always be checking for null/empty/invalid values when a user can give input. A simple example on how to prevent the original error and throw a more meaningful error is below:\r\n\r\n```java\r\n public static void main(String[] args) {\r\n    if (null == args || args.length != 3) {\r\n        throw new IOException(&quot;Please add arguments key, iv and data&quot;);\r\n    }\r\n    String key  = args[0];\r\n    String iv   = args[1];\r\n    String data = args[2];\r\n    ...\r\n}\r\n```\r\n\r\nYou may want to be able to not have any inputs, or only input 1/2 out of the 3 arguments. For that you need to check if the argument value exists and then access it.\r\n\r\n","title":"AES with CBC Mode Block Cipher","body":"<p>As @rzwitserloot pointed out, you need to check if there have been arguments passed into the application in the command line.</p>\n<p>You should always be checking for null/empty/invalid values when a user can give input. A simple example on how to prevent the original error and throw a more meaningful error is below:</p>\n<pre class=\"lang-java prettyprint-override\"><code> public static void main(String[] args) {\n    if (null == args || args.length != 3) {\n        throw new IOException(&quot;Please add arguments key, iv and data&quot;);\n    }\n    String key  = args[0];\n    String iv   = args[1];\n    String data = args[2];\n    ...\n}\n</code></pre>\n<p>You may want to be able to not have any inputs, or only input 1/2 out of the 3 arguments. For that you need to check if the argument value exists and then access it.</p>\n"}],"owner":{"account_id":26795385,"reputation":1,"user_id":20388206,"display_name":"MAYO"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":79,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1667315030,"creation_date":1667307616,"question_id":74276350,"body_markdown":"```\r\nimport java.security.spec.AlgorithmParameterSpec;\r\nimport javax.crypto.Cipher;\r\nimport javax.crypto.spec.SecretKeySpec;\r\nimport javax.crypto.spec.IvParameterSpec;\r\n\r\nclass CryptAES {\r\n  static final String cipher_type = &quot;AES/CBC/PKCS5Padding&quot;;\r\n\r\n  public static void main(String[] args) {\r\n    String key  = args[0];\r\n    String iv   = args[1];\r\n    String data = args[2];\r\n\r\n    byte[] enc = encode(key, iv, data.getBytes());\r\n    byte[] dec = decode(key, iv, enc);\r\n\r\n    for (int i = 0; i &lt; enc.length; i++) {\r\n      System.out.printf(&quot;%02x&quot;, enc[i]);\r\n    }\r\n    System.out.println();\r\n        \r\n    System.out.println(new String(dec));\r\n  }\r\n\r\n  public static byte[] encode(String skey, String iv, byte[] data) {\r\n    return process(Cipher.ENCRYPT_MODE, skey, iv, data);\r\n  }\r\n\r\n  public static byte[] decode(String skey, String iv, byte[] data) {\r\n    return process(Cipher.DECRYPT_MODE, skey, iv, data);\r\n  }\r\n\r\n  private static byte[] process(int mode, String skey, String iv, byte[] data) {\r\n    SecretKeySpec key = new SecretKeySpec(skey.getBytes(), &quot;AES&quot;);\r\n    AlgorithmParameterSpec param = new IvParameterSpec(iv.getBytes());\r\n    try {\r\n      Cipher cipher = Cipher.getInstance(cipher_type);\r\n      cipher.init(mode, key, param);\r\n      return cipher.doFinal(data);\r\n    } catch (Exception e) {\r\n      System.err.println(e.getMessage());\r\n      throw new RuntimeException(e);\r\n    }\r\n  }\r\n\r\n}\r\n```\r\n\r\nexception in thread main java.lang.arrayindexoutofboundsexception index out of bounds for length 0[![enter image description here](https://i.stack.imgur.com/8OmQP.png)](https://i.stack.imgur.com/8OmQP.png)\r\n\r\n\r\nexception in thread main java.lang.arrayindexoutofboundsexception index out of bounds for length 0\r\n","title":"AES with CBC Mode Block Cipher","body":"<pre><code>import java.security.spec.AlgorithmParameterSpec;\nimport javax.crypto.Cipher;\nimport javax.crypto.spec.SecretKeySpec;\nimport javax.crypto.spec.IvParameterSpec;\n\nclass CryptAES {\n  static final String cipher_type = &quot;AES/CBC/PKCS5Padding&quot;;\n\n  public static void main(String[] args) {\n    String key  = args[0];\n    String iv   = args[1];\n    String data = args[2];\n\n    byte[] enc = encode(key, iv, data.getBytes());\n    byte[] dec = decode(key, iv, enc);\n\n    for (int i = 0; i &lt; enc.length; i++) {\n      System.out.printf(&quot;%02x&quot;, enc[i]);\n    }\n    System.out.println();\n        \n    System.out.println(new String(dec));\n  }\n\n  public static byte[] encode(String skey, String iv, byte[] data) {\n    return process(Cipher.ENCRYPT_MODE, skey, iv, data);\n  }\n\n  public static byte[] decode(String skey, String iv, byte[] data) {\n    return process(Cipher.DECRYPT_MODE, skey, iv, data);\n  }\n\n  private static byte[] process(int mode, String skey, String iv, byte[] data) {\n    SecretKeySpec key = new SecretKeySpec(skey.getBytes(), &quot;AES&quot;);\n    AlgorithmParameterSpec param = new IvParameterSpec(iv.getBytes());\n    try {\n      Cipher cipher = Cipher.getInstance(cipher_type);\n      cipher.init(mode, key, param);\n      return cipher.doFinal(data);\n    } catch (Exception e) {\n      System.err.println(e.getMessage());\n      throw new RuntimeException(e);\n    }\n  }\n\n}\n</code></pre>\n<p>exception in thread main java.lang.arrayindexoutofboundsexception index out of bounds for length 0<a href=\"https://i.stack.imgur.com/8OmQP.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/8OmQP.png\" alt=\"enter image description here\" /></a></p>\n<p>exception in thread main java.lang.arrayindexoutofboundsexception index out of bounds for length 0</p>\n"},{"tags":["java","eclipse","maven","maven-plugin"],"comments":[{"owner":{"account_id":2375368,"reputation":4423,"user_id":2078908,"display_name":"ursa"},"score":0,"creation_date":1412867015,"post_id":26281322,"comment_id":41235241,"body_markdown":"no pom.xml, no logs (except the tail). it&#39;s impossible to help you or reproduce an issue. read here: http://stackoverflow.com/help/how-to-ask","body":"no pom.xml, no logs (except the tail). it&#39;s impossible to help you or reproduce an issue. read here: <a href=\"http://stackoverflow.com/help/how-to-ask\">stackoverflow.com/help/how-to-ask</a>"},{"owner":{"account_id":112317,"reputation":93939,"user_id":296328,"accept_rate":60,"display_name":"khmarbaise"},"score":2,"creation_date":1412867949,"post_id":26281322,"comment_id":41235866,"body_markdown":"This looks like you are filtering some kind of files which you shouldn&#39;t. Make `mvn -X compiler | tee mvn.log` and check the log file for `[DEBUG] filtering`. There you can see which file is being filtered. My assumption is you have missed to add files to the `nonFilteredFileExtension`.","body":"This looks like you are filtering some kind of files which you shouldn&#39;t. Make <code>mvn -X compiler | tee mvn.log</code> and check the log file for <code>[DEBUG] filtering</code>. There you can see which file is being filtered. My assumption is you have missed to add files to the <code>nonFilteredFileExtension</code>."},{"owner":{"account_id":447294,"reputation":2224,"user_id":840842,"accept_rate":11,"display_name":"Avinash Reddy"},"score":0,"creation_date":1412935422,"post_id":26281322,"comment_id":41262818,"body_markdown":"@khmarbaise Thank you very much. You were my savior of the day.As suggested by you i ran the command and could see in the log the resources getting filtered. In my pom.xml i had the following piece of code","body":"@khmarbaise Thank you very much. You were my savior of the day.As suggested by you i ran the command and could see in the log the resources getting filtered. In my pom.xml i had the following piece of code"},{"owner":{"account_id":447294,"reputation":2224,"user_id":840842,"accept_rate":11,"display_name":"Avinash Reddy"},"score":0,"creation_date":1412936622,"post_id":26281322,"comment_id":41263450,"body_markdown":"&lt;resources&gt;\n&lt;resource&gt;\n&lt;directory&gt;src/main/resources&lt;/directory&gt;\n&lt;filtering&gt;true&lt;/filtering&gt;\n&lt;/resource&gt;\n&lt;/resources&gt; After commenting it the build was successful.The resources which are being filtered are not needed for the build. But not sure why the build does not work with that piece of code","body":"&lt;resources&gt; &lt;resource&gt; &lt;directory&gt;src/main/resources&lt;/directory&gt; &lt;filtering&gt;true&lt;/filtering&gt; &lt;/resource&gt; &lt;/resources&gt; After commenting it the build was successful.The resources which are being filtered are not needed for the build. But not sure why the build does not work with that piece of code"},{"owner":{"account_id":447294,"reputation":2224,"user_id":840842,"accept_rate":11,"display_name":"Avinash Reddy"},"score":0,"creation_date":1412938049,"post_id":26281322,"comment_id":41264242,"body_markdown":"My colleague got the same issue but the problem was with one of the file. Not sure what the problem is. We removed the file which was causing the problem and had the filtering code as is and ran the build.It was successful. I hope the problem is only with that specific file and that to the file was changed 3 months back and there were no recent code changes in it","body":"My colleague got the same issue but the problem was with one of the file. Not sure what the problem is. We removed the file which was causing the problem and had the filtering code as is and ran the build.It was successful. I hope the problem is only with that specific file and that to the file was changed 3 months back and there were no recent code changes in it"},{"owner":{"account_id":417955,"reputation":18564,"user_id":794242,"accept_rate":80,"display_name":"Wand Maker"},"score":0,"creation_date":1466351329,"post_id":26281322,"comment_id":63269995,"body_markdown":"@AvinashReddy  You should accept an answer if it worked for you.  I had similar issue, and below top ranked answer helped me resolve the issue.","body":"@AvinashReddy  You should accept an answer if it worked for you.  I had similar issue, and below top ranked answer helped me resolve the issue."}],"answers":[{"tags":[],"owner":{"account_id":2135127,"reputation":1100,"user_id":1895111,"accept_rate":43,"display_name":"Justin"},"down_vote_count":5,"up_vote_count":19,"is_accepted":false,"score":14,"last_activity_date":1412973920,"creation_date":1412973258,"answer_id":26307644,"question_id":26281322,"body_markdown":"remove this work for me:\r\n\r\n    &lt;filtering&gt;true&lt;/filtering&gt;\r\n\r\nI guess it is caused by [this filtering bug][1]\r\n\r\n\r\n  [1]: https://bugzilla.redhat.com/show_bug.cgi?id=1077375","title":"Maven:Failed to execute goal org.apache.maven.plugins:maven-resources-plugin:2.7:resources","body":"<p>remove this work for me:</p>\n\n<pre><code>&lt;filtering&gt;true&lt;/filtering&gt;\n</code></pre>\n\n<p>I guess it is caused by <a href=\"https://bugzilla.redhat.com/show_bug.cgi?id=1077375\" rel=\"noreferrer\">this filtering bug</a></p>\n"},{"tags":[],"owner":{"account_id":1033485,"reputation":1577,"user_id":1041319,"display_name":"arntg"},"down_vote_count":0,"up_vote_count":71,"is_accepted":false,"score":71,"last_activity_date":1438263263,"creation_date":1425502203,"answer_id":28864641,"question_id":26281322,"body_markdown":"With:\r\n\r\n            &lt;plugin&gt;\r\n              &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n             \t&lt;artifactId&gt;maven-resources-plugin&lt;/artifactId&gt;\r\n             \t&lt;version&gt;2.7&lt;/version&gt;\r\n            &lt;/plugin&gt;\r\n\r\nWas getting the following exception:\r\n\r\n    ...\r\n    Caused by: org.apache.maven.plugin.MojoExecutionException: Mark invalid\r\n    \tat org.apache.maven.plugin.resources.ResourcesMojo.execute(ResourcesMojo.java:306)\r\n    \tat org.apache.maven.plugin.DefaultBuildPluginManager.executeMojo(DefaultBuildPluginManager.java:132)\r\n    \tat org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:208)\r\n    \t... 25 more\r\n    Caused by: org.apache.maven.shared.filtering.MavenFilteringException: Mark invalid\r\n    \tat org.apache.maven.shared.filtering.DefaultMavenFileFilter.copyFile(DefaultMavenFileFilter.java:129)\r\n    \tat org.apache.maven.shared.filtering.DefaultMavenResourcesFiltering.filterResources(DefaultMavenResourcesFiltering.java:264)\r\n    \tat org.apache.maven.plugin.resources.ResourcesMojo.execute(ResourcesMojo.java:300)\r\n    \t... 27 more\r\n    Caused by: java.io.IOException: Mark invalid\r\n    \tat java.io.BufferedReader.reset(BufferedReader.java:505)\r\n    \tat org.apache.maven.shared.filtering.MultiDelimiterInterpolatorFilterReaderLineEnding.read(MultiDelimiterInterpolatorFilterReaderLineEnding.java:416)\r\n    \tat org.apache.maven.shared.filtering.MultiDelimiterInterpolatorFilterReaderLineEnding.read(MultiDelimiterInterpolatorFilterReaderLineEnding.java:205)\r\n    \tat java.io.Reader.read(Reader.java:140)\r\n    \tat org.apache.maven.shared.utils.io.IOUtil.copy(IOUtil.java:181)\r\n    \tat org.apache.maven.shared.utils.io.IOUtil.copy(IOUtil.java:168)\r\n    \tat org.apache.maven.shared.utils.io.FileUtils.copyFile(FileUtils.java:1856)\r\n    \tat org.apache.maven.shared.utils.io.FileUtils.copyFile(FileUtils.java:1804)\r\n    \tat org.apache.maven.shared.filtering.DefaultMavenFileFilter.copyFile(DefaultMavenFileFilter.java:114)\r\n    \t... 29 more\r\n&lt;br&gt;&lt;br&gt;\r\nThen it is gone after adding maven-filtering 1.3:\r\n\r\n            &lt;plugin&gt;\r\n              &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n             \t&lt;artifactId&gt;maven-resources-plugin&lt;/artifactId&gt;\r\n             \t&lt;version&gt;2.7&lt;/version&gt;\r\n              &lt;dependencies&gt;\r\n                &lt;dependency&gt;\r\n                \t&lt;groupId&gt;org.apache.maven.shared&lt;/groupId&gt;\r\n                \t&lt;artifactId&gt;maven-filtering&lt;/artifactId&gt;\r\n                \t&lt;version&gt;1.3&lt;/version&gt;\r\n                &lt;/dependency&gt;\r\n              &lt;/dependencies&gt;\r\n            &lt;/plugin&gt;\r\n\r\n","title":"Maven:Failed to execute goal org.apache.maven.plugins:maven-resources-plugin:2.7:resources","body":"<p>With:</p>\n\n<pre><code>        &lt;plugin&gt;\n          &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n            &lt;artifactId&gt;maven-resources-plugin&lt;/artifactId&gt;\n            &lt;version&gt;2.7&lt;/version&gt;\n        &lt;/plugin&gt;\n</code></pre>\n\n<p>Was getting the following exception:</p>\n\n<pre><code>...\nCaused by: org.apache.maven.plugin.MojoExecutionException: Mark invalid\n    at org.apache.maven.plugin.resources.ResourcesMojo.execute(ResourcesMojo.java:306)\n    at org.apache.maven.plugin.DefaultBuildPluginManager.executeMojo(DefaultBuildPluginManager.java:132)\n    at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:208)\n    ... 25 more\nCaused by: org.apache.maven.shared.filtering.MavenFilteringException: Mark invalid\n    at org.apache.maven.shared.filtering.DefaultMavenFileFilter.copyFile(DefaultMavenFileFilter.java:129)\n    at org.apache.maven.shared.filtering.DefaultMavenResourcesFiltering.filterResources(DefaultMavenResourcesFiltering.java:264)\n    at org.apache.maven.plugin.resources.ResourcesMojo.execute(ResourcesMojo.java:300)\n    ... 27 more\nCaused by: java.io.IOException: Mark invalid\n    at java.io.BufferedReader.reset(BufferedReader.java:505)\n    at org.apache.maven.shared.filtering.MultiDelimiterInterpolatorFilterReaderLineEnding.read(MultiDelimiterInterpolatorFilterReaderLineEnding.java:416)\n    at org.apache.maven.shared.filtering.MultiDelimiterInterpolatorFilterReaderLineEnding.read(MultiDelimiterInterpolatorFilterReaderLineEnding.java:205)\n    at java.io.Reader.read(Reader.java:140)\n    at org.apache.maven.shared.utils.io.IOUtil.copy(IOUtil.java:181)\n    at org.apache.maven.shared.utils.io.IOUtil.copy(IOUtil.java:168)\n    at org.apache.maven.shared.utils.io.FileUtils.copyFile(FileUtils.java:1856)\n    at org.apache.maven.shared.utils.io.FileUtils.copyFile(FileUtils.java:1804)\n    at org.apache.maven.shared.filtering.DefaultMavenFileFilter.copyFile(DefaultMavenFileFilter.java:114)\n    ... 29 more\n</code></pre>\n\n<p><br><br>\nThen it is gone after adding maven-filtering 1.3:</p>\n\n<pre><code>        &lt;plugin&gt;\n          &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n            &lt;artifactId&gt;maven-resources-plugin&lt;/artifactId&gt;\n            &lt;version&gt;2.7&lt;/version&gt;\n          &lt;dependencies&gt;\n            &lt;dependency&gt;\n                &lt;groupId&gt;org.apache.maven.shared&lt;/groupId&gt;\n                &lt;artifactId&gt;maven-filtering&lt;/artifactId&gt;\n                &lt;version&gt;1.3&lt;/version&gt;\n            &lt;/dependency&gt;\n          &lt;/dependencies&gt;\n        &lt;/plugin&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2612631,"reputation":81,"user_id":2262466,"display_name":"Dan"},"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1464062991,"creation_date":1464062991,"answer_id":37404239,"question_id":26281322,"body_markdown":"I had this issue too because I was filtering /src/main/resources and forgot I had added a keystore (*.jks) binary to this directory.  \r\n\r\nAdd a &quot;resource&quot; block with exclusions for binary files and your problem may be resolved.\r\n\r\n    &lt;build&gt;\r\n      &lt;finalName&gt;somename&lt;/finalName&gt;\r\n      &lt;testResources&gt;\r\n        &lt;testResource&gt;\r\n          &lt;directory&gt;src/test/resources&lt;/directory&gt;\r\n          &lt;filtering&gt;false&lt;/filtering&gt;\r\n        &lt;/testResource&gt;\r\n      &lt;/testResources&gt;\r\n      &lt;resources&gt;\r\n        &lt;resource&gt;\r\n          &lt;directory&gt;src/main/resources&lt;/directory&gt;\r\n          &lt;filtering&gt;true&lt;/filtering&gt;\r\n          &lt;excludes&gt;\r\n            &lt;exclude&gt;*.jks&lt;/exclude&gt;\r\n            &lt;exclude&gt;*.png&lt;/exclude&gt;\r\n          &lt;/excludes&gt;        \r\n        &lt;/resource&gt;\r\n      &lt;/resources&gt;\r\n    ...","title":"Maven:Failed to execute goal org.apache.maven.plugins:maven-resources-plugin:2.7:resources","body":"<p>I had this issue too because I was filtering /src/main/resources and forgot I had added a keystore (*.jks) binary to this directory.  </p>\n\n<p>Add a \"resource\" block with exclusions for binary files and your problem may be resolved.</p>\n\n<pre><code>&lt;build&gt;\n  &lt;finalName&gt;somename&lt;/finalName&gt;\n  &lt;testResources&gt;\n    &lt;testResource&gt;\n      &lt;directory&gt;src/test/resources&lt;/directory&gt;\n      &lt;filtering&gt;false&lt;/filtering&gt;\n    &lt;/testResource&gt;\n  &lt;/testResources&gt;\n  &lt;resources&gt;\n    &lt;resource&gt;\n      &lt;directory&gt;src/main/resources&lt;/directory&gt;\n      &lt;filtering&gt;true&lt;/filtering&gt;\n      &lt;excludes&gt;\n        &lt;exclude&gt;*.jks&lt;/exclude&gt;\n        &lt;exclude&gt;*.png&lt;/exclude&gt;\n      &lt;/excludes&gt;        \n    &lt;/resource&gt;\n  &lt;/resources&gt;\n...\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1111413,"reputation":141,"user_id":6238644,"display_name":"Sourabh Kanojiya"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1486731754,"creation_date":1486731540,"answer_id":42160004,"question_id":26281322,"body_markdown":"I faced the same problem and did the filtering false like below working for me.\r\nYou can try the same...\r\n\r\n    &lt;testResources&gt;\r\n        &lt;testResource&gt;\r\n            &lt;directory&gt;src/test/java&lt;/directory&gt;\r\n            &lt;filtering&gt;false&lt;/filtering&gt;\r\n        &lt;/testResource&gt;\r\n        &lt;testResource&gt;\r\n            &lt;directory&gt;src/test/resources&lt;/directory&gt;\r\n            &lt;filtering&gt;false&lt;/filtering&gt;\r\n        &lt;/testResource&gt;\r\n    &lt;/testResources&gt;","title":"Maven:Failed to execute goal org.apache.maven.plugins:maven-resources-plugin:2.7:resources","body":"<p>I faced the same problem and did the filtering false like below working for me.\nYou can try the same...</p>\n\n<pre><code>&lt;testResources&gt;\n    &lt;testResource&gt;\n        &lt;directory&gt;src/test/java&lt;/directory&gt;\n        &lt;filtering&gt;false&lt;/filtering&gt;\n    &lt;/testResource&gt;\n    &lt;testResource&gt;\n        &lt;directory&gt;src/test/resources&lt;/directory&gt;\n        &lt;filtering&gt;false&lt;/filtering&gt;\n    &lt;/testResource&gt;\n&lt;/testResources&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3068449,"reputation":2571,"user_id":2599657,"accept_rate":60,"display_name":"sashok_bg"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1487847117,"creation_date":1487847117,"answer_id":42413663,"question_id":26281322,"body_markdown":"What worked for me is to add **include** tag in order to specify exactly what I want to filter.\r\n\r\nIt seems the resource plugin has problems going through the whole **src/main/resource** folder, probably due to some specific files inside.\r\n\r\n        &lt;resources&gt;\r\n            &lt;resource&gt;\r\n                &lt;directory&gt;src/main/resources&lt;/directory&gt;\r\n                &lt;filtering&gt;true&lt;/filtering&gt;\r\n                &lt;includes&gt;\r\n                    &lt;include&gt;application.yml&lt;/include&gt;\r\n                &lt;/includes&gt;\r\n            &lt;/resource&gt;\r\n        &lt;/resources&gt;","title":"Maven:Failed to execute goal org.apache.maven.plugins:maven-resources-plugin:2.7:resources","body":"<p>What worked for me is to add <strong>include</strong> tag in order to specify exactly what I want to filter.</p>\n\n<p>It seems the resource plugin has problems going through the whole <strong>src/main/resource</strong> folder, probably due to some specific files inside.</p>\n\n<pre><code>    &lt;resources&gt;\n        &lt;resource&gt;\n            &lt;directory&gt;src/main/resources&lt;/directory&gt;\n            &lt;filtering&gt;true&lt;/filtering&gt;\n            &lt;includes&gt;\n                &lt;include&gt;application.yml&lt;/include&gt;\n            &lt;/includes&gt;\n        &lt;/resource&gt;\n    &lt;/resources&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2201964,"reputation":899,"user_id":1946145,"display_name":"Santosh Sindham"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1523001604,"creation_date":1523001604,"answer_id":49688089,"question_id":26281322,"body_markdown":"In my case the `targetPath` was not having any value it was blank in the `resources --&gt; resource` for the file `directory` with files that had issue.\r\nI had to update it to `global` as seen in the `Code Sample 2` and re-run build to fix the issue.\r\n\r\n**Code Sample 1 (with issue)**\r\n\r\n\t&lt;build&gt;\r\n\t\t&lt;resources&gt;\r\n\t\t\t&lt;resource&gt;\r\n\t\t\t\t&lt;directory&gt;src/main/locale&lt;/directory&gt;\r\n\t\t\t\t&lt;filtering&gt;true&lt;/filtering&gt;\r\n\t\t\t\t&lt;targetPath&gt;&lt;/targetPath&gt;\r\n\t\t\t\t&lt;includes&gt;\r\n\t\t\t\t\t&lt;include&gt;*.xml&lt;/include&gt;\r\n\t\t\t\t\t&lt;include&gt;*.config&lt;/include&gt;\r\n\t\t\t\t\t&lt;include&gt;*.properties&lt;/include&gt;\r\n\t\t\t\t&lt;/includes&gt;\r\n\t\t\t&lt;/resource&gt;\r\n\t\t&lt;/resources&gt;\r\n   &lt;/build&gt;\r\n\r\n**Code Sample 2 (fix applied)**\r\n\r\n    &lt;build&gt;\r\n\t\t&lt;resources&gt;\r\n\t\t\t&lt;resource&gt;\r\n\t\t\t\t&lt;directory&gt;src/main/locale&lt;/directory&gt;\r\n\t\t\t\t&lt;filtering&gt;true&lt;/filtering&gt;\r\n\t\t\t\t&lt;targetPath&gt;global&lt;/targetPath&gt;\r\n\t\t\t\t&lt;includes&gt;\r\n\t\t\t\t\t&lt;include&gt;*.xml&lt;/include&gt;\r\n\t\t\t\t\t&lt;include&gt;*.config&lt;/include&gt;\r\n\t\t\t\t\t&lt;include&gt;*.properties&lt;/include&gt;\r\n\t\t\t\t&lt;/includes&gt;\r\n\t\t\t&lt;/resource&gt;\r\n\t\t&lt;/resources&gt;\r\n   &lt;/build&gt;","title":"Maven:Failed to execute goal org.apache.maven.plugins:maven-resources-plugin:2.7:resources","body":"<p>In my case the <code>targetPath</code> was not having any value it was blank in the <code>resources --&gt; resource</code> for the file <code>directory</code> with files that had issue.\nI had to update it to <code>global</code> as seen in the <code>Code Sample 2</code> and re-run build to fix the issue.</p>\n\n<p><strong>Code Sample 1 (with issue)</strong></p>\n\n<pre><code>&lt;build&gt;\n    &lt;resources&gt;\n        &lt;resource&gt;\n            &lt;directory&gt;src/main/locale&lt;/directory&gt;\n            &lt;filtering&gt;true&lt;/filtering&gt;\n            &lt;targetPath&gt;&lt;/targetPath&gt;\n            &lt;includes&gt;\n                &lt;include&gt;*.xml&lt;/include&gt;\n                &lt;include&gt;*.config&lt;/include&gt;\n                &lt;include&gt;*.properties&lt;/include&gt;\n            &lt;/includes&gt;\n        &lt;/resource&gt;\n    &lt;/resources&gt;\n</code></pre>\n\n<p></p>\n\n<p><strong>Code Sample 2 (fix applied)</strong></p>\n\n<pre><code>&lt;build&gt;\n    &lt;resources&gt;\n        &lt;resource&gt;\n            &lt;directory&gt;src/main/locale&lt;/directory&gt;\n            &lt;filtering&gt;true&lt;/filtering&gt;\n            &lt;targetPath&gt;global&lt;/targetPath&gt;\n            &lt;includes&gt;\n                &lt;include&gt;*.xml&lt;/include&gt;\n                &lt;include&gt;*.config&lt;/include&gt;\n                &lt;include&gt;*.properties&lt;/include&gt;\n            &lt;/includes&gt;\n        &lt;/resource&gt;\n    &lt;/resources&gt;\n</code></pre>\n\n<p></p>\n"},{"tags":[],"owner":{"account_id":6649080,"reputation":10675,"user_id":5131937,"accept_rate":67,"display_name":"Radouane ROUFID"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1525330861,"creation_date":1525330861,"answer_id":50148772,"question_id":26281322,"body_markdown":"From official documentation \r\n\r\n&gt; Warning: Do not filter files with binary content like images! This\r\n&gt; will most likely result in corrupt output.\r\n&gt; \r\n&gt; If you have both text files and binary files as resources it is\r\n&gt; recommended to have two separated folders. One folder\r\n&gt; src/main/resources (default) for the resources which are not filtered\r\n&gt; and another folder src/main/resources-filtered for the resources which\r\n&gt; are filtered.\r\n\r\n    &lt;project&gt;\r\n      ...\r\n      &lt;build&gt;\r\n        ...\r\n        &lt;resources&gt;\r\n          &lt;resource&gt;\r\n            &lt;directory&gt;src/main/resources-filtered&lt;/directory&gt;\r\n            &lt;filtering&gt;true&lt;/filtering&gt;\r\n          &lt;/resource&gt;\r\n          ...\r\n        &lt;/resources&gt;\r\n        ...\r\n      &lt;/build&gt;\r\n      ...\r\n    &lt;/project&gt;\r\n\r\n&gt; Now you can put those files into src/main/resources which should not\r\n&gt; filtered and the other files into src/main/resources-filtered.\r\n&gt; \r\n&gt; **As already mentioned filtering binary files like images,pdf`s etc.**\r\n&gt; **could result in corrupted output.** To prevent such problems you can\r\n&gt; configure file extensions which will not being filtered.\r\n\r\nMost certainly, You have in your directory files that cannot be filtered. So you have to specify the extensions that has not be filtered. \r\n","title":"Maven:Failed to execute goal org.apache.maven.plugins:maven-resources-plugin:2.7:resources","body":"<p>From official documentation </p>\n\n<blockquote>\n  <p>Warning: Do not filter files with binary content like images! This\n  will most likely result in corrupt output.</p>\n  \n  <p>If you have both text files and binary files as resources it is\n  recommended to have two separated folders. One folder\n  src/main/resources (default) for the resources which are not filtered\n  and another folder src/main/resources-filtered for the resources which\n  are filtered.</p>\n</blockquote>\n\n<pre><code>&lt;project&gt;\n  ...\n  &lt;build&gt;\n    ...\n    &lt;resources&gt;\n      &lt;resource&gt;\n        &lt;directory&gt;src/main/resources-filtered&lt;/directory&gt;\n        &lt;filtering&gt;true&lt;/filtering&gt;\n      &lt;/resource&gt;\n      ...\n    &lt;/resources&gt;\n    ...\n  &lt;/build&gt;\n  ...\n&lt;/project&gt;\n</code></pre>\n\n<blockquote>\n  <p>Now you can put those files into src/main/resources which should not\n  filtered and the other files into src/main/resources-filtered.</p>\n  \n  <p><strong>As already mentioned filtering binary files like images,pdf`s etc.</strong>\n  <strong>could result in corrupted output.</strong> To prevent such problems you can\n  configure file extensions which will not being filtered.</p>\n</blockquote>\n\n<p>Most certainly, You have in your directory files that cannot be filtered. So you have to specify the extensions that has not be filtered. </p>\n"},{"tags":[],"owner":{"account_id":13613566,"reputation":75,"user_id":9820210,"display_name":"Soodabeh Neirizi"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1536653813,"creation_date":1536653458,"answer_id":52271489,"question_id":26281322,"body_markdown":"in my case, it was a confilict with IntelliJ , I&#39;ve resolved it by building the project from command line and it worked!","title":"Maven:Failed to execute goal org.apache.maven.plugins:maven-resources-plugin:2.7:resources","body":"<p>in my case, it was a confilict with IntelliJ , I've resolved it by building the project from command line and it worked!</p>\n"},{"tags":[],"owner":{"account_id":5373611,"reputation":17,"user_id":4281312,"display_name":"Georgee"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1582047736,"creation_date":1582047736,"answer_id":60286649,"question_id":26281322,"body_markdown":"I had the same error because of character &#39;@&#39; in my resources/application.properties. All I did was replacing the &#39;@&#39; for its unicode value: \r\n`eureka.client.serviceUrl.defaultZone=http://discUser:discPassword\\u0040localhost:8082/eureka/` and it worked like charm. I know the &#39;@&#39; is a perfectly valid character in .properties files and the file was in UTF-8 encoding and it makes me question my career till today but it&#39;s worth a shot if you delete content of your resource files to see if you can get pass this error.","title":"Maven:Failed to execute goal org.apache.maven.plugins:maven-resources-plugin:2.7:resources","body":"<p>I had the same error because of character '@' in my resources/application.properties. All I did was replacing the '@' for its unicode value: \n<code>eureka.client.serviceUrl.defaultZone=http://discUser:discPassword\\u0040localhost:8082/eureka/</code> and it worked like charm. I know the '@' is a perfectly valid character in .properties files and the file was in UTF-8 encoding and it makes me question my career till today but it's worth a shot if you delete content of your resource files to see if you can get pass this error.</p>\n"},{"tags":[],"owner":{"account_id":6168346,"reputation":1290,"user_id":4807443,"accept_rate":61,"display_name":"shamila"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1589544005,"creation_date":1589544005,"answer_id":61818700,"question_id":26281322,"body_markdown":"This could be a issue in mvn home path in IntellijIdea IDE. For me it worked out when I set the mvn home directory correctly.[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/kG2wQ.png","title":"Maven:Failed to execute goal org.apache.maven.plugins:maven-resources-plugin:2.7:resources","body":"<p>This could be a issue in mvn home path in IntellijIdea IDE. For me it worked out when I set the mvn home directory correctly.<a href=\"https://i.stack.imgur.com/kG2wQ.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/kG2wQ.png\" alt=\"enter image description here\"></a></p>\n"},{"tags":[],"owner":{"account_id":14198569,"reputation":11,"user_id":10257103,"display_name":"ZINE EL ABEDINE LOGDALI"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1616094732,"creation_date":1616094732,"answer_id":66697636,"question_id":26281322,"body_markdown":"I solved that by changing coding format of ressources files to UTF-8 ","title":"Maven:Failed to execute goal org.apache.maven.plugins:maven-resources-plugin:2.7:resources","body":"<p>I solved that by changing coding format of ressources files to UTF-8</p>\n"},{"tags":[],"owner":{"account_id":183306,"reputation":9428,"user_id":418599,"accept_rate":52,"display_name":"Antonio Petricca"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1620718330,"creation_date":1620718330,"answer_id":67482339,"question_id":26281322,"body_markdown":"I fixed the same issue by referencing the latest maven resource plugin release:\r\n\r\n```xml\r\n&lt;dependency&gt;\r\n    &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n    &lt;artifactId&gt;maven-resources-plugin&lt;/artifactId&gt;\r\n    &lt;version&gt;3.2.0&lt;/version&gt;\r\n&lt;/dependency&gt;\r\n```","title":"Maven:Failed to execute goal org.apache.maven.plugins:maven-resources-plugin:2.7:resources","body":"<p>I fixed the same issue by referencing the latest maven resource plugin release:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n    &lt;artifactId&gt;maven-resources-plugin&lt;/artifactId&gt;\n    &lt;version&gt;3.2.0&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2084596,"reputation":1166,"user_id":1855840,"display_name":"ranma2913"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1667314803,"creation_date":1667314803,"answer_id":74277863,"question_id":26281322,"body_markdown":"Thanks for all the suggestions. I&#39;m using temurin-11.jdk &amp; Spring-Boot 2.7.5 I opted to go the plugin upgrade route.\r\n\r\nMy Original error:\r\n```text\r\n[ERROR] Failed to execute goal org.apache.maven.plugins:maven-resources-plugin:2.7:resources \r\n(default-resources) on project my-app: Mark invalid -&gt; [Help 1]\r\n```\r\n\r\nAfter Upgrading my pom as follows:\r\n\r\nI&#39;ve got this resources bit in my build section:\r\n```xml\r\n&lt;resources&gt;\r\n  &lt;resource&gt;\r\n    &lt;directory&gt;src/main/resources&lt;/directory&gt;\r\n    &lt;filtering&gt;true&lt;/filtering&gt;\r\n  &lt;/resource&gt;\r\n&lt;/resources&gt;\r\n```\r\n\r\nAnd then this is my plugin definition:\r\n```xml\r\n&lt;plugin&gt;\r\n  &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n  &lt;artifactId&gt;maven-resources-plugin&lt;/artifactId&gt;\r\n  &lt;version&gt;3.3.0&lt;/version&gt;\r\n  &lt;configuration&gt;\r\n    &lt;delimiters&gt;\r\n      &lt;delimiter&gt;@&lt;/delimiter&gt;\r\n    &lt;/delimiters&gt;\r\n    &lt;useDefaultDelimiters&gt;false&lt;/useDefaultDelimiters&gt;\r\n  &lt;/configuration&gt;\r\n&lt;/plugin&gt;\r\n```\r\n\r\nI got a new error: \r\n```\r\n[ERROR] Failed to execute goal org.apache.maven.plugins:maven-resources-plugin:3.3.0:resources \r\n(default-resources) on project my-app: filtering /Users/me/IntelliJ_Workspace/my-app/my-app/src/main/resources/static/fonts/glyphicons-halflings-regular.woff \r\nto /Users/me/IntelliJ_Workspace/my-app/my-app/target/classes/static/fonts/glyphicons-halflings-regular.woff \r\nfailed with MalformedInputException: Input length = 1 -&gt; [Help 1]\r\n```\r\n\r\nAs you can see a .woff file extension contains at least 1 matching delimiter but fails to parse. In my case I don&#39;t want filtering on anything but `.properties` &amp; `.yaml` files. After reading the [maven-resources-plugin/resources docs](https://maven.apache.org/plugins/maven-resources-plugin/resources-mojo.html#nonFilteredFileExtensions) I found there&#39;s a config nonFilteredFileExtensions where we can exclude file extensions we don&#39;t want to filter. So my final plugin config looks like:\r\n\r\n```xml\r\n&lt;plugin&gt;\r\n  &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n  &lt;artifactId&gt;maven-resources-plugin&lt;/artifactId&gt;\r\n  &lt;version&gt;3.3.0&lt;/version&gt;\r\n  &lt;configuration&gt;\r\n    &lt;delimiters&gt;\r\n      &lt;delimiter&gt;@&lt;/delimiter&gt;\r\n    &lt;/delimiters&gt;\r\n    &lt;useDefaultDelimiters&gt;false&lt;/useDefaultDelimiters&gt;\r\n &lt;nonFilteredFileExtensions&gt;jpg,jpeg,gif,bmp,png,svg,ttf,woff,woff2&lt;/nonFilteredFileExtensions&gt;\r\n  &lt;/configuration&gt;\r\n&lt;/plugin&gt;\r\n```","title":"Maven:Failed to execute goal org.apache.maven.plugins:maven-resources-plugin:2.7:resources","body":"<p>Thanks for all the suggestions. I'm using temurin-11.jdk &amp; Spring-Boot 2.7.5 I opted to go the plugin upgrade route.</p>\n<p>My Original error:</p>\n<pre><code>[ERROR] Failed to execute goal org.apache.maven.plugins:maven-resources-plugin:2.7:resources \n(default-resources) on project my-app: Mark invalid -&gt; [Help 1]\n</code></pre>\n<p>After Upgrading my pom as follows:</p>\n<p>I've got this resources bit in my build section:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;resources&gt;\n  &lt;resource&gt;\n    &lt;directory&gt;src/main/resources&lt;/directory&gt;\n    &lt;filtering&gt;true&lt;/filtering&gt;\n  &lt;/resource&gt;\n&lt;/resources&gt;\n</code></pre>\n<p>And then this is my plugin definition:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;plugin&gt;\n  &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n  &lt;artifactId&gt;maven-resources-plugin&lt;/artifactId&gt;\n  &lt;version&gt;3.3.0&lt;/version&gt;\n  &lt;configuration&gt;\n    &lt;delimiters&gt;\n      &lt;delimiter&gt;@&lt;/delimiter&gt;\n    &lt;/delimiters&gt;\n    &lt;useDefaultDelimiters&gt;false&lt;/useDefaultDelimiters&gt;\n  &lt;/configuration&gt;\n&lt;/plugin&gt;\n</code></pre>\n<p>I got a new error:</p>\n<pre><code>[ERROR] Failed to execute goal org.apache.maven.plugins:maven-resources-plugin:3.3.0:resources \n(default-resources) on project my-app: filtering /Users/me/IntelliJ_Workspace/my-app/my-app/src/main/resources/static/fonts/glyphicons-halflings-regular.woff \nto /Users/me/IntelliJ_Workspace/my-app/my-app/target/classes/static/fonts/glyphicons-halflings-regular.woff \nfailed with MalformedInputException: Input length = 1 -&gt; [Help 1]\n</code></pre>\n<p>As you can see a .woff file extension contains at least 1 matching delimiter but fails to parse. In my case I don't want filtering on anything but <code>.properties</code> &amp; <code>.yaml</code> files. After reading the <a href=\"https://maven.apache.org/plugins/maven-resources-plugin/resources-mojo.html#nonFilteredFileExtensions\" rel=\"nofollow noreferrer\">maven-resources-plugin/resources docs</a> I found there's a config nonFilteredFileExtensions where we can exclude file extensions we don't want to filter. So my final plugin config looks like:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;plugin&gt;\n  &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n  &lt;artifactId&gt;maven-resources-plugin&lt;/artifactId&gt;\n  &lt;version&gt;3.3.0&lt;/version&gt;\n  &lt;configuration&gt;\n    &lt;delimiters&gt;\n      &lt;delimiter&gt;@&lt;/delimiter&gt;\n    &lt;/delimiters&gt;\n    &lt;useDefaultDelimiters&gt;false&lt;/useDefaultDelimiters&gt;\n &lt;nonFilteredFileExtensions&gt;jpg,jpeg,gif,bmp,png,svg,ttf,woff,woff2&lt;/nonFilteredFileExtensions&gt;\n  &lt;/configuration&gt;\n&lt;/plugin&gt;\n</code></pre>\n"}],"owner":{"account_id":447294,"reputation":2224,"user_id":840842,"accept_rate":11,"display_name":"Avinash Reddy"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":203254,"favorite_count":0,"down_vote_count":0,"up_vote_count":57,"answer_count":13,"score":57,"last_activity_date":1667314803,"creation_date":1412865685,"question_id":26281322,"body_markdown":"I am building my project using Maven. My maven version is apache-maven-3.0.4. I am using Eclipse Luna. When I try to build my project I get the following error\r\n\r\n&gt; [ERROR] Failed to execute goal org.apache.maven.plugins:maven-resources-plugin:2.7:resources (default-resources) on project OrionCommunity: Mark invalid -&gt; [Help 1].\r\n\r\nFollowing is the stack trace when I run mvn clean install `-X`:\r\n\r\n    [INFO] ------------------------------------------------------------------------\r\n    [INFO] BUILD FAILURE\r\n    [INFO] ------------------------------------------------------------------------\r\n    [INFO] Total time: 1:53.295s\r\n    [INFO] Finished at: Thu Oct 09 20:00:26 IST 2014\r\n    [INFO] Final Memory: 9M/25M\r\n    [INFO] ------------------------------------------------------------------------\r\n    [ERROR] Failed to execute goal org.apache.maven.plugins:maven-resources-plugin:2.7:resources (default-resources) on project OrionCommunity: Mark invalid -&gt; [Hel\r\n    p 1]\r\n    org.apache.maven.lifecycle.LifecycleExecutionException: Failed to execute goal org.apache.maven.plugins:maven-resources-plugin:2.7:resources (default-resources)\r\n     on project OrionCommunity: Mark invalid\r\n            at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:217)\r\n            at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:153)\r\n            at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:145)\r\n            at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(LifecycleModuleBuilder.java:84)\r\n            at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(LifecycleModuleBuilder.java:59)\r\n            at org.apache.maven.lifecycle.internal.LifecycleStarter.singleThreadedBuild(LifecycleStarter.java:183)\r\n            at org.apache.maven.lifecycle.internal.LifecycleStarter.execute(LifecycleStarter.java:161)\r\n            at org.apache.maven.DefaultMaven.doExecute(DefaultMaven.java:320)\r\n            at org.apache.maven.DefaultMaven.execute(DefaultMaven.java:156)\r\n            at org.apache.maven.cli.MavenCli.execute(MavenCli.java:537)\r\n            at org.apache.maven.cli.MavenCli.doMain(MavenCli.java:196)\r\n            at org.apache.maven.cli.MavenCli.main(MavenCli.java:141)\r\n            at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n            at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)\r\n            at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)\r\n            at java.lang.reflect.Method.invoke(Method.java:597)\r\n            at org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced(Launcher.java:290)\r\n            at org.codehaus.plexus.classworlds.launcher.Launcher.launch(Launcher.java:230)\r\n            at org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode(Launcher.java:409)\r\n            at org.codehaus.plexus.classworlds.launcher.Launcher.main(Launcher.java:352)\r\n    Caused by: org.apache.maven.plugin.MojoExecutionException: Mark invalid\r\n            at org.apache.maven.plugin.resources.ResourcesMojo.execute(ResourcesMojo.java:306)\r\n            at org.apache.maven.plugin.DefaultBuildPluginManager.executeMojo(DefaultBuildPluginManager.java:101)\r\n            at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:209)\r\n            ... 19 more\r\n    Caused by: org.apache.maven.shared.filtering.MavenFilteringException: Mark invalid\r\n            at org.apache.maven.shared.filtering.DefaultMavenFileFilter.copyFile(DefaultMavenFileFilter.java:129)\r\n            at org.apache.maven.shared.filtering.DefaultMavenResourcesFiltering.filterResources(DefaultMavenResourcesFiltering.java:264)\r\n            at org.apache.maven.plugin.resources.ResourcesMojo.execute(ResourcesMojo.java:300)\r\n            ... 21 more\r\n    Caused by: java.io.IOException: Mark invalid\r\n            at java.io.BufferedReader.reset(BufferedReader.java:485)\r\n            at org.apache.maven.shared.filtering.MultiDelimiterInterpolatorFilterReaderLineEnding.read(MultiDelimiterInterpolatorFilterReaderLineEnding.java:416)\r\n            at org.apache.maven.shared.filtering.MultiDelimiterInterpolatorFilterReaderLineEnding.read(MultiDelimiterInterpolatorFilterReaderLineEnding.java:205)\r\n            at java.io.Reader.read(Reader.java:123)\r\n            at org.apache.maven.shared.utils.io.IOUtil.copy(IOUtil.java:181)\r\n            at org.apache.maven.shared.utils.io.IOUtil.copy(IOUtil.java:168)\r\n            at org.apache.maven.shared.utils.io.FileUtils.copyFile(FileUtils.java:1856)\r\n            at org.apache.maven.shared.utils.io.FileUtils.copyFile(FileUtils.java:1804)\r\n            at org.apache.maven.shared.filtering.DefaultMavenFileFilter.copyFile(DefaultMavenFileFilter.java:114)\r\n            ... 23 more\r\n\r\nMy maven repository is under D:/mavenrepo. I have completely deleted all the jars present in the repo and did a clean install. But I still get this error.","title":"Maven:Failed to execute goal org.apache.maven.plugins:maven-resources-plugin:2.7:resources","body":"<p>I am building my project using Maven. My maven version is apache-maven-3.0.4. I am using Eclipse Luna. When I try to build my project I get the following error</p>\n\n<blockquote>\n  <p>[ERROR] Failed to execute goal org.apache.maven.plugins:maven-resources-plugin:2.7:resources (default-resources) on project OrionCommunity: Mark invalid -> [Help 1].</p>\n</blockquote>\n\n<p>Following is the stack trace when I run mvn clean install <code>-X</code>:</p>\n\n<pre><code>[INFO] ------------------------------------------------------------------------\n[INFO] BUILD FAILURE\n[INFO] ------------------------------------------------------------------------\n[INFO] Total time: 1:53.295s\n[INFO] Finished at: Thu Oct 09 20:00:26 IST 2014\n[INFO] Final Memory: 9M/25M\n[INFO] ------------------------------------------------------------------------\n[ERROR] Failed to execute goal org.apache.maven.plugins:maven-resources-plugin:2.7:resources (default-resources) on project OrionCommunity: Mark invalid -&gt; [Hel\np 1]\norg.apache.maven.lifecycle.LifecycleExecutionException: Failed to execute goal org.apache.maven.plugins:maven-resources-plugin:2.7:resources (default-resources)\n on project OrionCommunity: Mark invalid\n        at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:217)\n        at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:153)\n        at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:145)\n        at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(LifecycleModuleBuilder.java:84)\n        at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(LifecycleModuleBuilder.java:59)\n        at org.apache.maven.lifecycle.internal.LifecycleStarter.singleThreadedBuild(LifecycleStarter.java:183)\n        at org.apache.maven.lifecycle.internal.LifecycleStarter.execute(LifecycleStarter.java:161)\n        at org.apache.maven.DefaultMaven.doExecute(DefaultMaven.java:320)\n        at org.apache.maven.DefaultMaven.execute(DefaultMaven.java:156)\n        at org.apache.maven.cli.MavenCli.execute(MavenCli.java:537)\n        at org.apache.maven.cli.MavenCli.doMain(MavenCli.java:196)\n        at org.apache.maven.cli.MavenCli.main(MavenCli.java:141)\n        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)\n        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)\n        at java.lang.reflect.Method.invoke(Method.java:597)\n        at org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced(Launcher.java:290)\n        at org.codehaus.plexus.classworlds.launcher.Launcher.launch(Launcher.java:230)\n        at org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode(Launcher.java:409)\n        at org.codehaus.plexus.classworlds.launcher.Launcher.main(Launcher.java:352)\nCaused by: org.apache.maven.plugin.MojoExecutionException: Mark invalid\n        at org.apache.maven.plugin.resources.ResourcesMojo.execute(ResourcesMojo.java:306)\n        at org.apache.maven.plugin.DefaultBuildPluginManager.executeMojo(DefaultBuildPluginManager.java:101)\n        at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:209)\n        ... 19 more\nCaused by: org.apache.maven.shared.filtering.MavenFilteringException: Mark invalid\n        at org.apache.maven.shared.filtering.DefaultMavenFileFilter.copyFile(DefaultMavenFileFilter.java:129)\n        at org.apache.maven.shared.filtering.DefaultMavenResourcesFiltering.filterResources(DefaultMavenResourcesFiltering.java:264)\n        at org.apache.maven.plugin.resources.ResourcesMojo.execute(ResourcesMojo.java:300)\n        ... 21 more\nCaused by: java.io.IOException: Mark invalid\n        at java.io.BufferedReader.reset(BufferedReader.java:485)\n        at org.apache.maven.shared.filtering.MultiDelimiterInterpolatorFilterReaderLineEnding.read(MultiDelimiterInterpolatorFilterReaderLineEnding.java:416)\n        at org.apache.maven.shared.filtering.MultiDelimiterInterpolatorFilterReaderLineEnding.read(MultiDelimiterInterpolatorFilterReaderLineEnding.java:205)\n        at java.io.Reader.read(Reader.java:123)\n        at org.apache.maven.shared.utils.io.IOUtil.copy(IOUtil.java:181)\n        at org.apache.maven.shared.utils.io.IOUtil.copy(IOUtil.java:168)\n        at org.apache.maven.shared.utils.io.FileUtils.copyFile(FileUtils.java:1856)\n        at org.apache.maven.shared.utils.io.FileUtils.copyFile(FileUtils.java:1804)\n        at org.apache.maven.shared.filtering.DefaultMavenFileFilter.copyFile(DefaultMavenFileFilter.java:114)\n        ... 23 more\n</code></pre>\n\n<p>My maven repository is under D:/mavenrepo. I have completely deleted all the jars present in the repo and did a clean install. But I still get this error.</p>\n"},{"tags":["java","kotlin","openapi","vert.x"],"answers":[{"tags":[],"owner":{"account_id":5072840,"reputation":68,"user_id":4099380,"display_name":"Jonas Taulien"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1631877302,"creation_date":1631871791,"answer_id":69221195,"question_id":69200196,"body_markdown":"I know of no such library. Usually I would recommend to choose the reverse procedure which is to generate the model classes from your open api specification. For that, there is a really usefull library called [openapi-generator](https://github.com/OpenAPITools/openapi-generator).\r\n\r\nThe additional advantage of this approach would be, that you can use a fully api-first approach by also using the Vert.x extension called [Web OpenAPI](https://vertx.io/docs/vertx-web-openapi/java/)","title":"how to generate only openapi schemas from java/kotlin data classes? (for vert.x based application)","body":"<p>I know of no such library. Usually I would recommend to choose the reverse procedure which is to generate the model classes from your open api specification. For that, there is a really usefull library called <a href=\"https://github.com/OpenAPITools/openapi-generator\" rel=\"nofollow noreferrer\">openapi-generator</a>.</p>\n<p>The additional advantage of this approach would be, that you can use a fully api-first approach by also using the Vert.x extension called <a href=\"https://vertx.io/docs/vertx-web-openapi/java/\" rel=\"nofollow noreferrer\">Web OpenAPI</a></p>\n"},{"tags":[],"owner":{"account_id":919475,"reputation":11,"user_id":8562278,"display_name":"jzajic"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1667314618,"creation_date":1667314571,"answer_id":74277823,"question_id":69200196,"body_markdown":"You can use swagger java tools directly. Generation of swagger model from classes/annotations provides ***swagger-core*** library - see [github][1] or [maven][2] repo.\r\n\r\nIf you for example have annotated method:\r\n\r\n    public interface EndPoints {\r\n     @Operation(summary = &quot;Delete product by ID &quot;, method = &quot;DELETE&quot;, operationId = &quot;product/:deleteProductId&quot;,\r\n        tags = {\r\n          &quot;Product&quot;\r\n        },\r\n        parameters = {\r\n          @Parameter(in = ParameterIn.PATH, name = &quot;deleteProductId&quot;,\r\n            required = true, description = &quot;The ID for the Product&quot;, schema = @Schema(type = &quot;string&quot;))\r\n        },\r\n        responses = {\r\n          @ApiResponse(responseCode = &quot;404&quot;, description = &quot;Not found.&quot;),\r\n          @ApiResponse(responseCode = &quot;200&quot;, description = &quot;Product deleted.&quot;),\r\n          @ApiResponse(responseCode = &quot;500&quot;, description = &quot;Internal Server Error.&quot;)\r\n        }\r\n      )\r\n      void deleteProduct();\r\n    }\r\n\r\nyou can generate API doc using following code:\r\n\r\n    Reader openApiReader = new Reader();\r\n    Operation operation = openApiReader.parseMethod(EndPoints.class..getDeclaredMethod(&quot;deleteProduct&quot;), Lists.newArrayList(), null);\r\n\r\nAnd for your specific use-case, if you want to only generate Schema for given class (and use it for example as request body or return value), you can do for example:\r\n\r\n    public class ErrorApiResponse {\r\n      public String error;\r\n      public String severity;\r\n      public String message;\r\n    }\r\n    \r\n    ResolvedSchema resolvedSchema = ModelConverters.getInstance()\r\n        .resolveAsResolvedSchema(new AnnotatedType(ErrorApiResponse.class));\r\n\r\nYou can construct io.swagger.v3.oas.models.OpenAPI manually, add generated Schemas to respective places. To construct JSON version of this API model, you simple call:\r\n\r\n    io.swagger.v3.core.util.Json.pretty(openAPI)\r\n\r\n  [1]: https://github.com/swagger-api/swagger-core\r\n  [2]: https://mvnrepository.com/artifact/io.swagger.core.v3/swagger-core","title":"how to generate only openapi schemas from java/kotlin data classes? (for vert.x based application)","body":"<p>You can use swagger java tools directly. Generation of swagger model from classes/annotations provides <em><strong>swagger-core</strong></em> library - see <a href=\"https://github.com/swagger-api/swagger-core\" rel=\"nofollow noreferrer\">github</a> or <a href=\"https://mvnrepository.com/artifact/io.swagger.core.v3/swagger-core\" rel=\"nofollow noreferrer\">maven</a> repo.</p>\n<p>If you for example have annotated method:</p>\n<pre><code>public interface EndPoints {\n @Operation(summary = &quot;Delete product by ID &quot;, method = &quot;DELETE&quot;, operationId = &quot;product/:deleteProductId&quot;,\n    tags = {\n      &quot;Product&quot;\n    },\n    parameters = {\n      @Parameter(in = ParameterIn.PATH, name = &quot;deleteProductId&quot;,\n        required = true, description = &quot;The ID for the Product&quot;, schema = @Schema(type = &quot;string&quot;))\n    },\n    responses = {\n      @ApiResponse(responseCode = &quot;404&quot;, description = &quot;Not found.&quot;),\n      @ApiResponse(responseCode = &quot;200&quot;, description = &quot;Product deleted.&quot;),\n      @ApiResponse(responseCode = &quot;500&quot;, description = &quot;Internal Server Error.&quot;)\n    }\n  )\n  void deleteProduct();\n}\n</code></pre>\n<p>you can generate API doc using following code:</p>\n<pre><code>Reader openApiReader = new Reader();\nOperation operation = openApiReader.parseMethod(EndPoints.class..getDeclaredMethod(&quot;deleteProduct&quot;), Lists.newArrayList(), null);\n</code></pre>\n<p>And for your specific use-case, if you want to only generate Schema for given class (and use it for example as request body or return value), you can do for example:</p>\n<pre><code>public class ErrorApiResponse {\n  public String error;\n  public String severity;\n  public String message;\n}\n\nResolvedSchema resolvedSchema = ModelConverters.getInstance()\n    .resolveAsResolvedSchema(new AnnotatedType(ErrorApiResponse.class));\n</code></pre>\n<p>You can construct io.swagger.v3.oas.models.OpenAPI manually, add generated Schemas to respective places. To construct JSON version of this API model, you simple call:</p>\n<pre><code>io.swagger.v3.core.util.Json.pretty(openAPI)\n</code></pre>\n"}],"owner":{"account_id":10281983,"reputation":353,"user_id":7586739,"display_name":"younes elmorabit"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1238,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1667314618,"creation_date":1631742924,"question_id":69200196,"body_markdown":"I am trying to create an open API spec for an existing vert.x based application, and since there is no library to generate the open API spec automatically for vert.x based apis, I am wondering if there is a plugin or a tool that can help me generate at least the corresponding schemas for my data classes since I have a lot of them and it is really painful to manually create the corresponding schema for each one of them?\r\n\r\nI am using kotlin and Jackson for serialization/deserialization.","title":"how to generate only openapi schemas from java/kotlin data classes? (for vert.x based application)","body":"<p>I am trying to create an open API spec for an existing vert.x based application, and since there is no library to generate the open API spec automatically for vert.x based apis, I am wondering if there is a plugin or a tool that can help me generate at least the corresponding schemas for my data classes since I have a lot of them and it is really painful to manually create the corresponding schema for each one of them?</p>\n<p>I am using kotlin and Jackson for serialization/deserialization.</p>\n"},{"tags":["java","spring-boot","localhost","backend"],"comments":[{"owner":{"account_id":15248249,"reputation":400,"user_id":11002498,"display_name":"Skapis9999"},"score":0,"creation_date":1667314751,"post_id":74277513,"comment_id":131135818,"body_markdown":"Does this answer your question? [What is username and password when starting Spring Boot with Tomcat?](https://stackoverflow.com/questions/37285016/what-is-username-and-password-when-starting-spring-boot-with-tomcat)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/37285016/what-is-username-and-password-when-starting-spring-boot-with-tomcat\">What is username and password when starting Spring Boot with Tomcat?</a>"}],"answers":[{"tags":[],"owner":{"account_id":16316751,"reputation":94,"user_id":11783641,"display_name":"Chetan"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1667314402,"creation_date":1667314402,"answer_id":74277782,"question_id":74277513,"body_markdown":"When you start your application **password** got logged in console like this:\r\n\r\n    Using default security password: ce6c3d39-mf20-4w41-8e01-103166bb9nvc\r\nAnd the username is **user**.\r\nThanks.","title":"Having error in loading localhost page while working with spring boot","body":"<p>When you start your application <strong>password</strong> got logged in console like this:</p>\n<pre><code>Using default security password: ce6c3d39-mf20-4w41-8e01-103166bb9nvc\n</code></pre>\n<p>And the username is <strong>user</strong>.\nThanks.</p>\n"}],"owner":{"account_id":26796198,"reputation":11,"user_id":20388908,"display_name":"Nivetika Rajasekar"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":258,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":1,"score":0,"last_activity_date":1667314402,"creation_date":1667313177,"question_id":74277513,"body_markdown":"I am a newbie to web development, and I have started to learn the backend. I chose Java in the backend, so I started learning spring boot. I used IntelliJ ide. When I ran my first code, I got connected to port 8080. But when I opened the localhost:8080 page in the web browser, it shows a sign-in page or some other pages. But in some tutorials I followed, they were able to modify the localhost:8080 page. And even tried to change the port, like 8090, it opens the same sign-in page. [enter image description here][1]\r\nCan anyone help me to solve this problem?\r\n\r\nI expected that the localhost page will open, and I will be able to modify that page by modifying the code. But wha[enter image description here][2]t actually happened was, i was not able to access the page.\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/wmO3i.png\r\n  [2]: https://i.stack.imgur.com/3Nm0D.png","title":"Having error in loading localhost page while working with spring boot","body":"<p>I am a newbie to web development, and I have started to learn the backend. I chose Java in the backend, so I started learning spring boot. I used IntelliJ ide. When I ran my first code, I got connected to port 8080. But when I opened the localhost:8080 page in the web browser, it shows a sign-in page or some other pages. But in some tutorials I followed, they were able to modify the localhost:8080 page. And even tried to change the port, like 8090, it opens the same sign-in page. <a href=\"https://i.stack.imgur.com/wmO3i.png\" rel=\"nofollow noreferrer\">enter image description here</a>\nCan anyone help me to solve this problem?</p>\n<p>I expected that the localhost page will open, and I will be able to modify that page by modifying the code. But wha<a href=\"https://i.stack.imgur.com/3Nm0D.png\" rel=\"nofollow noreferrer\">enter image description here</a>t actually happened was, i was not able to access the page.</p>\n"},{"tags":["java","logging","log4j2"],"comments":[{"owner":{"account_id":25548,"reputation":5144,"user_id":65706,"accept_rate":93,"display_name":"Yordan Georgiev"},"score":1,"creation_date":1513849426,"post_id":21083834,"comment_id":82811656,"body_markdown":"with all the backward incompatible changes introduced to the configuration reloading in log4j2 it would make sense to specify which version of the log4j2 api and core you are using ...","body":"with all the backward incompatible changes introduced to the configuration reloading in log4j2 it would make sense to specify which version of the log4j2 api and core you are using ..."}],"answers":[{"tags":[],"owner":{"account_id":477780,"reputation":3813,"user_id":889475,"accept_rate":61,"display_name":"HashimR"},"down_vote_count":0,"up_vote_count":18,"is_accepted":true,"score":18,"last_activity_date":1389605821,"creation_date":1389605821,"answer_id":21087859,"question_id":21083834,"body_markdown":"Found the answer myself. Someone might find it useful.\r\n\r\n    ConfigurationSource source = new ConfigurationSource();\r\n    source.setLocation(logConfigurationFile);\r\n    source.setFile(new File(logConfigurationFile));\r\n    source.setInputStream(new FileInputStream(logConfigurationFile));\r\n    Configurator.initialize(null, source);","title":"Load Log4j2 configuration file programmatically","body":"<p>Found the answer myself. Someone might find it useful.</p>\n\n<pre><code>ConfigurationSource source = new ConfigurationSource();\nsource.setLocation(logConfigurationFile);\nsource.setFile(new File(logConfigurationFile));\nsource.setInputStream(new FileInputStream(logConfigurationFile));\nConfigurator.initialize(null, source);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":147944,"reputation":4762,"user_id":359396,"accept_rate":67,"display_name":"dcompiled"},"down_vote_count":0,"up_vote_count":25,"is_accepted":false,"score":25,"last_activity_date":1410922889,"creation_date":1410922889,"answer_id":25881592,"question_id":21083834,"body_markdown":"If you have a single main entry point, this code snippet might save you some trouble.  The set property call must fire before any loggers are created.  This approach works with files on the classpath.\r\n\r\n    public class TestProcess {\r\n    \tstatic {\r\n    \t\tSystem.setProperty(&quot;log4j.configurationFile&quot;, &quot;log4j-alternate.xml&quot;);\r\n    \t}\r\n    \r\n    \tprivate static final Logger log = LoggerFactory.getLogger(TestProcess.class);\r\n    \r\n    }","title":"Load Log4j2 configuration file programmatically","body":"<p>If you have a single main entry point, this code snippet might save you some trouble.  The set property call must fire before any loggers are created.  This approach works with files on the classpath.</p>\n\n<pre><code>public class TestProcess {\n    static {\n        System.setProperty(\"log4j.configurationFile\", \"log4j-alternate.xml\");\n    }\n\n    private static final Logger log = LoggerFactory.getLogger(TestProcess.class);\n\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5113716,"reputation":479,"user_id":4099584,"display_name":"switch_java3"},"down_vote_count":0,"up_vote_count":45,"is_accepted":false,"score":45,"last_activity_date":1424989668,"creation_date":1424795536,"answer_id":28701154,"question_id":21083834,"body_markdown":"For the newest version of log4j, here is what should work for loading an external `log4j2.xml`:\r\n\r\n    String log4jConfigFile = System.getProperty(&quot;user.dir&quot;) + File.separator + &quot;log4j2.xml&quot;;\r\n    ConfigurationSource source = new ConfigurationSource(new FileInputStream(log4jConfigFile));\r\n\tConfigurator.initialize(null, source);","title":"Load Log4j2 configuration file programmatically","body":"<p>For the newest version of log4j, here is what should work for loading an external <code>log4j2.xml</code>:</p>\n\n<pre><code>String log4jConfigFile = System.getProperty(\"user.dir\") + File.separator + \"log4j2.xml\";\nConfigurationSource source = new ConfigurationSource(new FileInputStream(log4jConfigFile));\nConfigurator.initialize(null, source);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":217966,"reputation":12429,"user_id":474034,"accept_rate":67,"display_name":"lanoxx"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1430514591,"creation_date":1430514591,"answer_id":29995192,"question_id":21083834,"body_markdown":"If you are using a **Servlet 3.0 Web Application** you can use the **[Log4jServletContextListener][1]** and do the following:\r\n\r\nWrite a custom `LogContextListener` which extends from `Log4jServletContextListener`, set it up in your `web.xml` and disable auto initialization:\r\n\r\n\r\n    &lt;listener&gt;\r\n        &lt;listener-class&gt;com.example.LogContextListener&lt;/listener-class&gt;\r\n    &lt;/listener&gt;\r\n    &lt;context-param&gt;\r\n        &lt;param-name&gt;isLog4jAutoInitializationDisabled&lt;/param-name&gt;\r\n        &lt;param-value&gt;true&lt;/param-value&gt;\r\n    &lt;/context-param&gt;\r\n\r\nIn your custom `LogContextListener` overwrite `contextInitialized` and set the config location\r\n\r\n    public void contextInitialized(ServletContextEvent event) { \r\n        /* Some logic to calculate where the config file is saved. For \r\n         * example you can read an environment variable.\r\n         */\r\n        String pathToConfigFile = ... + &quot;/log4j2.xml&quot;;\r\n        Configurator.initialize(null, pathToConfigFile);\r\n        super.contextInitialized(event);\r\n    }\r\n\r\nThe advantage over configuring the location directly in the `web.xml` is that\r\nyou can compute the path based on some additional information and access the log4j2.xml even if its outside of your classpath.\r\n\r\n[1]: http://logging.apache.org/log4j/2.x/manual/webapp.html#Servlet-3.0","title":"Load Log4j2 configuration file programmatically","body":"<p>If you are using a <strong>Servlet 3.0 Web Application</strong> you can use the <strong><a href=\"http://logging.apache.org/log4j/2.x/manual/webapp.html#Servlet-3.0\" rel=\"nofollow\">Log4jServletContextListener</a></strong> and do the following:</p>\n\n<p>Write a custom <code>LogContextListener</code> which extends from <code>Log4jServletContextListener</code>, set it up in your <code>web.xml</code> and disable auto initialization:</p>\n\n<pre><code>&lt;listener&gt;\n    &lt;listener-class&gt;com.example.LogContextListener&lt;/listener-class&gt;\n&lt;/listener&gt;\n&lt;context-param&gt;\n    &lt;param-name&gt;isLog4jAutoInitializationDisabled&lt;/param-name&gt;\n    &lt;param-value&gt;true&lt;/param-value&gt;\n&lt;/context-param&gt;\n</code></pre>\n\n<p>In your custom <code>LogContextListener</code> overwrite <code>contextInitialized</code> and set the config location</p>\n\n<pre><code>public void contextInitialized(ServletContextEvent event) { \n    /* Some logic to calculate where the config file is saved. For \n     * example you can read an environment variable.\n     */\n    String pathToConfigFile = ... + \"/log4j2.xml\";\n    Configurator.initialize(null, pathToConfigFile);\n    super.contextInitialized(event);\n}\n</code></pre>\n\n<p>The advantage over configuring the location directly in the <code>web.xml</code> is that\nyou can compute the path based on some additional information and access the log4j2.xml even if its outside of your classpath.</p>\n"},{"tags":[],"owner":{"account_id":562,"reputation":3657,"user_id":728,"accept_rate":91,"display_name":"TJR"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1488348587,"creation_date":1488348587,"answer_id":42524443,"question_id":21083834,"body_markdown":"    final URL log4j = Resources.getResource(&quot;log4j2-test.xml&quot;);\r\n    LoggerContext.getContext(false)\r\n      .start(new XmlConfiguration(new ConfigurationSource(\r\n        Resources.asByteSource(log4j).openStream(),\r\n        log4j)));\r\n\r\n","title":"Load Log4j2 configuration file programmatically","body":"<pre><code>final URL log4j = Resources.getResource(\"log4j2-test.xml\");\nLoggerContext.getContext(false)\n  .start(new XmlConfiguration(new ConfigurationSource(\n    Resources.asByteSource(log4j).openStream(),\n    log4j)));\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1215767,"reputation":1710,"user_id":1183404,"display_name":"Cristian Florescu"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1521279836,"creation_date":1521279836,"answer_id":49334573,"question_id":21083834,"body_markdown":"Considering - https://logging.apache.org/log4j/2.x/log4j-core/apidocs/org/apache/logging/log4j/core/config/Configurator.html\r\n\r\n\r\n    Configurator.initialize(null, &quot;classpath:conf/logger.xml&quot;);\r\n    or\r\n    Configurator.initialize(null, &quot;/full_path/conf/logger.xml&quot;);\r\n\r\nBe aware and does not use both at the same time.","title":"Load Log4j2 configuration file programmatically","body":"<p>Considering - <a href=\"https://logging.apache.org/log4j/2.x/log4j-core/apidocs/org/apache/logging/log4j/core/config/Configurator.html\" rel=\"nofollow noreferrer\">https://logging.apache.org/log4j/2.x/log4j-core/apidocs/org/apache/logging/log4j/core/config/Configurator.html</a></p>\n\n<pre><code>Configurator.initialize(null, \"classpath:conf/logger.xml\");\nor\nConfigurator.initialize(null, \"/full_path/conf/logger.xml\");\n</code></pre>\n\n<p>Be aware and does not use both at the same time.</p>\n"},{"tags":[],"owner":{"account_id":3340410,"reputation":5354,"user_id":2806819,"accept_rate":97,"display_name":"k_rollo"},"down_vote_count":0,"up_vote_count":11,"is_accepted":false,"score":11,"last_activity_date":1531035129,"creation_date":1530962381,"answer_id":51222665,"question_id":21083834,"body_markdown":"Below worked for me, Log4j2 with [SLF4J](https://www.slf4j.org/) wrapper:\r\n\r\nSolution 1:\r\n-----------\r\n\r\n    public class MyClass {\r\n    \t\r\n    \tstatic {\r\n    \t\ttry {\r\n    \t\t\tInputStream inputStream = new FileInputStream(&quot;C:/path/to/log4j2.xml&quot;);\r\n    \t\t\tConfigurationSource source = new ConfigurationSource(inputStream);\r\n    \t\t\tConfigurator.initialize(null, source);\r\n    \t\t} catch (Exception ex) {\r\n    \t\t\t// Handle here\r\n    \t\t}\r\n    \t}\r\n    \r\n    \tprivate static final Logger LOGGER = LoggerFactory.getLogger(MyClass.class); // LogManager if not using SLF4J\r\n    \r\n    \tpublic void doSomething() {\r\n    \t\tLOGGER.info(...)\r\n    \t}\r\n    \r\n    }\r\n\r\nSolution 2:\r\n-----------\r\n\r\n    static {\r\n    \tFile log4j2File = new File(&quot;C:/path/to/log4j2.xml&quot;);\r\n    \tSystem.setProperty(&quot;log4j2.configurationFile&quot;, log4j2File.toURI().toString());\r\n    }\r\nNeed `toURI()` to follow [File URI Scheme format](https://en.wikipedia.org/wiki/File_URI_scheme#Format), else it throws `MalformedURLException`.\r\n\r\n**Sources:**\r\n\r\n - https://stackoverflow.com/questions/23394041/proper-format-for-log4j2-xml-rollingfile-configuration\r\n - https://github.com/jprante/elasticsearch-jdbc/issues/562\r\n - https://www.codeproject.com/Questions/190269/MalformedURLException-unknown-protocol-c-How-to-ha\r\n - https://coderanch.com/t/633544/open-source/java-net-MalformedURLException-initialize-log","title":"Load Log4j2 configuration file programmatically","body":"<p>Below worked for me, Log4j2 with <a href=\"https://www.slf4j.org/\" rel=\"noreferrer\">SLF4J</a> wrapper:</p>\n\n<h2>Solution 1:</h2>\n\n<pre><code>public class MyClass {\n\n    static {\n        try {\n            InputStream inputStream = new FileInputStream(\"C:/path/to/log4j2.xml\");\n            ConfigurationSource source = new ConfigurationSource(inputStream);\n            Configurator.initialize(null, source);\n        } catch (Exception ex) {\n            // Handle here\n        }\n    }\n\n    private static final Logger LOGGER = LoggerFactory.getLogger(MyClass.class); // LogManager if not using SLF4J\n\n    public void doSomething() {\n        LOGGER.info(...)\n    }\n\n}\n</code></pre>\n\n<h2>Solution 2:</h2>\n\n<pre><code>static {\n    File log4j2File = new File(\"C:/path/to/log4j2.xml\");\n    System.setProperty(\"log4j2.configurationFile\", log4j2File.toURI().toString());\n}\n</code></pre>\n\n<p>Need <code>toURI()</code> to follow <a href=\"https://en.wikipedia.org/wiki/File_URI_scheme#Format\" rel=\"noreferrer\">File URI Scheme format</a>, else it throws <code>MalformedURLException</code>.</p>\n\n<p><strong>Sources:</strong></p>\n\n<ul>\n<li><a href=\"https://stackoverflow.com/questions/23394041/proper-format-for-log4j2-xml-rollingfile-configuration\">Proper format for log4j2.xml RollingFile configuration</a></li>\n<li><a href=\"https://github.com/jprante/elasticsearch-jdbc/issues/562\" rel=\"noreferrer\">https://github.com/jprante/elasticsearch-jdbc/issues/562</a></li>\n<li><a href=\"https://www.codeproject.com/Questions/190269/MalformedURLException-unknown-protocol-c-How-to-ha\" rel=\"noreferrer\">https://www.codeproject.com/Questions/190269/MalformedURLException-unknown-protocol-c-How-to-ha</a></li>\n<li><a href=\"https://coderanch.com/t/633544/open-source/java-net-MalformedURLException-initialize-log\" rel=\"noreferrer\">https://coderanch.com/t/633544/open-source/java-net-MalformedURLException-initialize-log</a></li>\n</ul>\n"},{"tags":[],"owner":{"account_id":104821,"reputation":8403,"user_id":280041,"accept_rate":84,"display_name":"zeroboo"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1573548759,"creation_date":1573548759,"answer_id":58815067,"question_id":21083834,"body_markdown":"If you config with .properties file: \r\n\r\n    String propertiesFile = &quot;./test/Configuration/log4j2.properties&quot;;  \r\n    ConfigurationSource source = new ConfigurationSource(new FileInputStream(propertiesFile), new File(propertiesFile));\r\n    Configurator.initialize(null, source);","title":"Load Log4j2 configuration file programmatically","body":"<p>If you config with .properties file: </p>\n\n<pre><code>String propertiesFile = \"./test/Configuration/log4j2.properties\";  \nConfigurationSource source = new ConfigurationSource(new FileInputStream(propertiesFile), new File(propertiesFile));\nConfigurator.initialize(null, source);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":11016894,"reputation":1,"user_id":8092480,"display_name":"Hanu Krishna Kumar Kadali"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1667314381,"creation_date":1667313558,"answer_id":74277604,"question_id":21083834,"body_markdown":"I tried all the other solutions nothing worked for me.\r\n\r\ntried Log4jServletContextListenerImpl extending Log4jServletContextListener @lonxx said able to write logs but not able to read environmental bean from spring context.\r\n\r\nAs log4j context is initializing before spring context initialization.\r\n\r\nSo Placed the below code in init(ServletConfig config) of InitServlet extends HttpServlet.\r\n   \r\n\r\n    LoggerContext context = (LoggerContext) \r\n    LogManager.getContext(false);\r\n    File file = new File(&quot;relativepath/log4j2/log4j2.xml&quot;);\r\n    context.setConfigLocation(file.toURI());\r\n\r\n**Now it&#39;s working.**\r\n\r\nusing spring 5.3.22 &amp; log4j2 2.17.2 and initservlet is configured in web.xml version =&quot;2.5&quot;","title":"Load Log4j2 configuration file programmatically","body":"<p>I tried all the other solutions nothing worked for me.</p>\n<p>tried Log4jServletContextListenerImpl extending Log4jServletContextListener @lonxx said able to write logs but not able to read environmental bean from spring context.</p>\n<p>As log4j context is initializing before spring context initialization.</p>\n<p>So Placed the below code in init(ServletConfig config) of InitServlet extends HttpServlet.</p>\n<pre><code>LoggerContext context = (LoggerContext) \nLogManager.getContext(false);\nFile file = new File(&quot;relativepath/log4j2/log4j2.xml&quot;);\ncontext.setConfigLocation(file.toURI());\n</code></pre>\n<p><strong>Now it's working.</strong></p>\n<p>using spring 5.3.22 &amp; log4j2 2.17.2 and initservlet is configured in web.xml version =&quot;2.5&quot;</p>\n"}],"owner":{"account_id":477780,"reputation":3813,"user_id":889475,"accept_rate":61,"display_name":"HashimR"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":69223,"favorite_count":0,"down_vote_count":0,"up_vote_count":50,"accepted_answer_id":21087859,"answer_count":9,"score":50,"last_activity_date":1667314381,"creation_date":1389586903,"question_id":21083834,"body_markdown":"I want to load Log4j2 XML configuration file programmatically from my application.\r\n\r\nTried this:\r\n\r\n    ConfigurationSource source = new ConfigurationSource();\r\n    source.setLocation(logConfigurationFile);\r\n    Configurator.initialize(null, source);\r\n\r\nand this:\r\n\r\n    ConfigurationSource source = new ConfigurationSource();\r\n    source.setLocation(logConfigurationFile);\r\n    ConfigurationFactory factory = (ConfigurationFactory) XMLConfigurationFactory.getInstance().getConfiguration(source);\r\n    ConfigurationFactory.setConfigurationFactory(factory);\r\n\r\nBut nothing works yet.","title":"Load Log4j2 configuration file programmatically","body":"<p>I want to load Log4j2 XML configuration file programmatically from my application.</p>\n\n<p>Tried this:</p>\n\n<pre><code>ConfigurationSource source = new ConfigurationSource();\nsource.setLocation(logConfigurationFile);\nConfigurator.initialize(null, source);\n</code></pre>\n\n<p>and this:</p>\n\n<pre><code>ConfigurationSource source = new ConfigurationSource();\nsource.setLocation(logConfigurationFile);\nConfigurationFactory factory = (ConfigurationFactory) XMLConfigurationFactory.getInstance().getConfiguration(source);\nConfigurationFactory.setConfigurationFactory(factory);\n</code></pre>\n\n<p>But nothing works yet.</p>\n"},{"tags":["java","angular","postgresql","spring-boot","google-chrome"],"answers":[{"tags":[],"owner":{"account_id":20713334,"reputation":109,"user_id":15209447,"display_name":"Isakots"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1667313372,"creation_date":1667313372,"answer_id":74277563,"question_id":74277437,"body_markdown":"It is a number because you defined it as a number here, in Country entity:\r\n```\r\n    @Column(name = &quot;nbr&quot;)\r\n    private int nbr;\r\n```\r\nThe best solution is to create another object which is used for HTTP communication. For example: `CountryDTO`.\r\nIn CountryDTO you can define `nbr` field as String.\r\nThen you just have to create a mapping between Country and CountryDTO objects.\r\n\r\nWhy you should always do like this:\r\n1. You should never send Entities directly to the client.\r\n2. It keeps your code clean and separated: One object is responsible for holding the database model, and another is responsible for communicating with the client. It is now the same, and it is just pure luck.","title":"Http Response parameter name incorrect using Spring Boot/Angular","body":"<p>It is a number because you defined it as a number here, in Country entity:</p>\n<pre><code>    @Column(name = &quot;nbr&quot;)\n    private int nbr;\n</code></pre>\n<p>The best solution is to create another object which is used for HTTP communication. For example: <code>CountryDTO</code>.\nIn CountryDTO you can define <code>nbr</code> field as String.\nThen you just have to create a mapping between Country and CountryDTO objects.</p>\n<p>Why you should always do like this:</p>\n<ol>\n<li>You should never send Entities directly to the client.</li>\n<li>It keeps your code clean and separated: One object is responsible for holding the database model, and another is responsible for communicating with the client. It is now the same, and it is just pure luck.</li>\n</ol>\n"},{"tags":[],"owner":{"account_id":10702514,"reputation":61,"user_id":7877351,"display_name":"Psi"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1667314091,"creation_date":1667314091,"answer_id":74277713,"question_id":74277437,"body_markdown":"Found out what happened, although I don&#39;t know the specifics.\r\n\r\nspring uses Jackson to serialize, and Jackson uses by default public getters to serialize and name data. \r\nSince I named the nbr getter/setters as getNumber() and setNumber, changing it to getNbr() and setNbr() respectively solved the issue.","title":"Http Response parameter name incorrect using Spring Boot/Angular","body":"<p>Found out what happened, although I don't know the specifics.</p>\n<p>spring uses Jackson to serialize, and Jackson uses by default public getters to serialize and name data.\nSince I named the nbr getter/setters as getNumber() and setNumber, changing it to getNbr() and setNbr() respectively solved the issue.</p>\n"}],"owner":{"account_id":10702514,"reputation":61,"user_id":7877351,"display_name":"Psi"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":56,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1667314091,"creation_date":1667312805,"question_id":74277437,"body_markdown":"I&#39;m trying to display a table listing the Country codes (iso3166) in a postgresql db onto an html page using Spring Boot and Angular, the parameter name in the http response lists &quot;number&quot; when instead I want it to list &quot;nbr&quot;. \r\n\r\nThe SQL table has 4 columns\r\n* name (varchar) unique\r\n* alpha2 (varchar) PK unique\r\n* alpha3 (varchar) unique\r\n* nbr (int4)\r\n\r\nMy Spring Boot Models is the following:\r\n```\r\n@Entity\r\n@Table(name = &quot;iso3166&quot;)\r\npublic class Country {\r\n\r\n\t@Id\r\n\t@GeneratedValue(strategy = GenerationType.AUTO)\r\n\tprivate String alpha2;\r\n\r\n    @Column(name = &quot;name&quot;)\r\n\tprivate String name;\r\n\r\n\t@Column(name = &quot;alpha3&quot;)\r\n\tprivate String alpha3;\r\n\r\n\t@Column(name = &quot;nbr&quot;)\r\n\tprivate int nbr;\r\n\r\n    public Country()\r\n    {\r\n    }\r\n\r\n    public Country(String name, String alpha2, String alpha3, int nbr)\r\n    {\r\n        this.name = name;\r\n        this.alpha2 = alpha2;\r\n        this.alpha3 = alpha3;\r\n        this.nbr = nbr;\r\n    }\r\n\r\n/*\r\ngetters and settings + toString()\r\n*/\r\n\r\n```\r\n\r\nThe repository uses JPARepository\r\n```\r\npublic interface ICountryRepository extends JpaRepository&lt;Country, String&gt; {\r\n}\r\n```\r\nAnd the Controller has only the findAll() method\r\n```\r\n@RestController\r\n@RequestMapping({&quot;/api&quot;})\r\npublic class CountryController {\r\n    \r\n    @Autowired\r\n    ICountryRepository countryRepository;\r\n\r\n    @GetMapping\r\n    public List&lt;Country&gt; findAll(){\r\n        List&lt;Country&gt; country = countryRepository.findAll();\r\n        return country;\r\n    }\r\n}\r\n```\r\nRunning spring-boot and opening localhost in chrome, the table shows up just fine.\r\n[![enter image description here][1]][1]\r\n\r\nHowever, looking at the Response tab under Network, it shows up like this\r\n[![enter image description here][2]][2]\r\nShows the same thing if I go to http://localhost:8080/api\r\n\r\n[{&quot;alpha2&quot;:&quot;AX&quot;,&quot;name&quot;:&quot;AALAND ISLANDS&quot;,&quot;alpha3&quot;:&quot;ALA&quot;,&quot;number&quot;:248},{&quot;alpha2&quot;:&quot;AF&quot;,&quot;name&quot;:&quot;AFGHANISTAN&quot;,&quot;alpha3&quot;:&quot;AFG&quot;,&quot;number&quot;:4},{&quot;alpha2&quot;:&quot;AL&quot;,&quot;name&quot;:&quot;ALBANIA&quot;,&quot;alpha3&quot;:&quot;ALB&quot;,&quot;number&quot;:8},{&quot;alpha2&quot;:&quot;DZ&quot;,&quot;name&quot;:&quot;ALGERIA&quot;,&quot;alpha3&quot;:&quot;DZA&quot;,&quot;number&quot;:12},{&quot;alpha2&quot;:&quot;AS&quot;,&quot;name&quot;:&quot;AMERICAN SAMOA&quot;,&quot;alpha3&quot;:&quot;ASM&quot;,&quot;number&quot;:16},{&quot;alpha2&quot;:&quot;AD&quot;,&quot;name&quot;:&quot;ANDORRA&quot;,&quot;alpha3&quot;:&quot;AND&quot;,&quot;number&quot;:20},{&quot;alpha2&quot;:&quot;AO&quot;,&quot;name&quot;:&quot;ANGOLA&quot;,&quot;alpha3&quot;:&quot;AGO&quot;,&quot;number&quot;:24},\r\n\r\nWhy does the Http Response return the &quot;nbr&quot; field as &quot;number&quot; instead? And how can I change it to show up as &quot;nbr&quot; in the Http response? Does something happen in the background in Spring Boot when formulating the http response that I can&#39;t control?\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/ecmNh.png\r\n  [2]: https://i.stack.imgur.com/Uyu67.png","title":"Http Response parameter name incorrect using Spring Boot/Angular","body":"<p>I'm trying to display a table listing the Country codes (iso3166) in a postgresql db onto an html page using Spring Boot and Angular, the parameter name in the http response lists &quot;number&quot; when instead I want it to list &quot;nbr&quot;.</p>\n<p>The SQL table has 4 columns</p>\n<ul>\n<li>name (varchar) unique</li>\n<li>alpha2 (varchar) PK unique</li>\n<li>alpha3 (varchar) unique</li>\n<li>nbr (int4)</li>\n</ul>\n<p>My Spring Boot Models is the following:</p>\n<pre><code>@Entity\n@Table(name = &quot;iso3166&quot;)\npublic class Country {\n\n    @Id\n    @GeneratedValue(strategy = GenerationType.AUTO)\n    private String alpha2;\n\n    @Column(name = &quot;name&quot;)\n    private String name;\n\n    @Column(name = &quot;alpha3&quot;)\n    private String alpha3;\n\n    @Column(name = &quot;nbr&quot;)\n    private int nbr;\n\n    public Country()\n    {\n    }\n\n    public Country(String name, String alpha2, String alpha3, int nbr)\n    {\n        this.name = name;\n        this.alpha2 = alpha2;\n        this.alpha3 = alpha3;\n        this.nbr = nbr;\n    }\n\n/*\ngetters and settings + toString()\n*/\n\n</code></pre>\n<p>The repository uses JPARepository</p>\n<pre><code>public interface ICountryRepository extends JpaRepository&lt;Country, String&gt; {\n}\n</code></pre>\n<p>And the Controller has only the findAll() method</p>\n<pre><code>@RestController\n@RequestMapping({&quot;/api&quot;})\npublic class CountryController {\n    \n    @Autowired\n    ICountryRepository countryRepository;\n\n    @GetMapping\n    public List&lt;Country&gt; findAll(){\n        List&lt;Country&gt; country = countryRepository.findAll();\n        return country;\n    }\n}\n</code></pre>\n<p>Running spring-boot and opening localhost in chrome, the table shows up just fine.\n<a href=\"https://i.stack.imgur.com/ecmNh.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ecmNh.png\" alt=\"enter image description here\" /></a></p>\n<p>However, looking at the Response tab under Network, it shows up like this\n<a href=\"https://i.stack.imgur.com/Uyu67.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Uyu67.png\" alt=\"enter image description here\" /></a>\nShows the same thing if I go to http://localhost:8080/api</p>\n<p>[{&quot;alpha2&quot;:&quot;AX&quot;,&quot;name&quot;:&quot;AALAND ISLANDS&quot;,&quot;alpha3&quot;:&quot;ALA&quot;,&quot;number&quot;:248},{&quot;alpha2&quot;:&quot;AF&quot;,&quot;name&quot;:&quot;AFGHANISTAN&quot;,&quot;alpha3&quot;:&quot;AFG&quot;,&quot;number&quot;:4},{&quot;alpha2&quot;:&quot;AL&quot;,&quot;name&quot;:&quot;ALBANIA&quot;,&quot;alpha3&quot;:&quot;ALB&quot;,&quot;number&quot;:8},{&quot;alpha2&quot;:&quot;DZ&quot;,&quot;name&quot;:&quot;ALGERIA&quot;,&quot;alpha3&quot;:&quot;DZA&quot;,&quot;number&quot;:12},{&quot;alpha2&quot;:&quot;AS&quot;,&quot;name&quot;:&quot;AMERICAN SAMOA&quot;,&quot;alpha3&quot;:&quot;ASM&quot;,&quot;number&quot;:16},{&quot;alpha2&quot;:&quot;AD&quot;,&quot;name&quot;:&quot;ANDORRA&quot;,&quot;alpha3&quot;:&quot;AND&quot;,&quot;number&quot;:20},{&quot;alpha2&quot;:&quot;AO&quot;,&quot;name&quot;:&quot;ANGOLA&quot;,&quot;alpha3&quot;:&quot;AGO&quot;,&quot;number&quot;:24},</p>\n<p>Why does the Http Response return the &quot;nbr&quot; field as &quot;number&quot; instead? And how can I change it to show up as &quot;nbr&quot; in the Http response? Does something happen in the background in Spring Boot when formulating the http response that I can't control?</p>\n"},{"tags":["java","selenium"],"comments":[{"owner":{"account_id":10404380,"reputation":2588,"user_id":7671727,"display_name":"AbiSaran"},"score":1,"creation_date":1667313718,"post_id":74277608,"comment_id":131135429,"body_markdown":"Post the code you&#39;ve tried so far.","body":"Post the code you&#39;ve tried so far."},{"owner":{"account_id":6077817,"reputation":1213,"user_id":4744568,"display_name":"pcalkins"},"score":0,"creation_date":1667332505,"post_id":74277608,"comment_id":131141690,"body_markdown":"the error suggests that the driver is in nomansland.  (The window/tab the driver is active in has been closed)","body":"the error suggests that the driver is in nomansland.  (The window/tab the driver is active in has been closed)"},{"owner":{"account_id":26150866,"reputation":1,"user_id":19838844,"display_name":"Megha Hadagali"},"score":0,"creation_date":1667364285,"post_id":74277608,"comment_id":131147358,"body_markdown":"How to make the 2 tabs as active tabs?","body":"How to make the 2 tabs as active tabs?"}],"owner":{"account_id":26150866,"reputation":1,"user_id":19838844,"display_name":"Megha Hadagali"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":80,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1667314065,"creation_date":1667313562,"question_id":74277608,"body_markdown":"I have opened 2 tabs and closed the main tab then again I want to open another tab to do some operations at that time I am getting above error\r\n\r\n1.My scripts will going to do the some operations in main tab\r\n2.Then it will going to open new tab\r\n3.Then it will switch back to main tab and it will close that \r\n4.After that I want to open another new tab with same url I have used in main tab at that time I am getting the above error in selenium using java\r\n","title":"org.openqa.selenium.NoSuchWindowException: no such window: target window already closed","body":"<p>I have opened 2 tabs and closed the main tab then again I want to open another tab to do some operations at that time I am getting above error</p>\n<p>1.My scripts will going to do the some operations in main tab\n2.Then it will going to open new tab\n3.Then it will switch back to main tab and it will close that\n4.After that I want to open another new tab with same url I have used in main tab at that time I am getting the above error in selenium using java</p>\n"},{"tags":["java","file","io"],"comments":[{"owner":{"account_id":960307,"reputation":107861,"user_id":984823,"display_name":"Joop Eggen"},"score":0,"creation_date":1667314364,"post_id":74277708,"comment_id":131135688,"body_markdown":"**`Path#toAbolutePath()`.** Relative paths are dangerous though, like different in IDE as stand-alone. The `resolve` methods are better.","body":"<b><code>Path#toAbolutePath()</code>.</b> Relative paths are dangerous though, like different in IDE as stand-alone. The <code>resolve</code> methods are better."},{"owner":{"account_id":4027676,"reputation":344,"user_id":3315164,"display_name":"Carson McManus"},"score":0,"creation_date":1667317017,"post_id":74277708,"comment_id":131136605,"body_markdown":"`Path#toAbolutePath()` prints out the entire absolute path, which is not what I want. I simply want to resolve the `..` into the actual folder&#39;s name.","body":"<code>Path#toAbolutePath()</code> prints out the entire absolute path, which is not what I want. I simply want to resolve the <code>..</code> into the actual folder&#39;s name."},{"owner":{"account_id":960307,"reputation":107861,"user_id":984823,"display_name":"Joop Eggen"},"score":0,"creation_date":1667317982,"post_id":74277708,"comment_id":131136971,"body_markdown":"You can use [**`relativize`**](https://docs.oracle.com/javase/10/docs/api/java/nio/file/Path.html#relativize(java.nio.file.Path)) for that.","body":"You can use <a href=\"https://docs.oracle.com/javase/10/docs/api/java/nio/file/Path.html#relativize(java.nio.file.Path)\" rel=\"nofollow noreferrer\"><b><code>relativize</code></b></a> for that."}],"owner":{"account_id":4027676,"reputation":344,"user_id":3315164,"display_name":"Carson McManus"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":15,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1667314063,"creation_date":1667314063,"question_id":74277708,"body_markdown":"Suppose I have the following directory structure:\r\n\r\n```\r\n| baz/\r\n|-- | foo/\r\n|   |-- bar.txt\r\n```\r\n\r\nAnd that I run my program so that the current directory is `baz/`. If I define a Path like this:\r\n\r\n```java\r\nvar foo = Path.of(&quot;../foo/bar.txt&quot;);\r\n```\r\n\r\nI want to present this path to the user, but when I just print the path out as is it includes the `..`, like this:\r\n\r\n```\r\n../foo/bar.txt\r\n```\r\n\r\nHow do I get it to present this path like this instead?\r\n\r\n```\r\nbaz/foo/bar.txt\r\n```","title":"java.nio.Path: How do I force java to resolve `..` when Path is relative to the current directory?","body":"<p>Suppose I have the following directory structure:</p>\n<pre><code>| baz/\n|-- | foo/\n|   |-- bar.txt\n</code></pre>\n<p>And that I run my program so that the current directory is <code>baz/</code>. If I define a Path like this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>var foo = Path.of(&quot;../foo/bar.txt&quot;);\n</code></pre>\n<p>I want to present this path to the user, but when I just print the path out as is it includes the <code>..</code>, like this:</p>\n<pre><code>../foo/bar.txt\n</code></pre>\n<p>How do I get it to present this path like this instead?</p>\n<pre><code>baz/foo/bar.txt\n</code></pre>\n"},{"tags":["java","oop","design-patterns","factory-method","chain-of-responsibility"],"comments":[{"owner":{"account_id":114128,"reputation":50422,"user_id":300257,"accept_rate":89,"display_name":"Gilbert Le Blanc"},"score":0,"creation_date":1666909763,"post_id":74227942,"comment_id":131053126,"body_markdown":"Your original solution works well as long as the concrete classes use the same parameters, as you say.  I&#39;d wait until I had a concrete example of an additional parameter before I&#39;d worry about a `Parameter` class.","body":"Your original solution works well as long as the concrete classes use the same parameters, as you say.  I&#39;d wait until I had a concrete example of an additional parameter before I&#39;d worry about a <code>Parameter</code> class."},{"owner":{"account_id":12434767,"reputation":3949,"user_id":9055634,"accept_rate":22,"display_name":"Jim"},"score":0,"creation_date":1666944956,"post_id":74227942,"comment_id":131058978,"body_markdown":"@GilbertLeBlanc: Is this &quot;flexibility&quot; not good to be considered early on in the design?","body":"@GilbertLeBlanc: Is this &quot;flexibility&quot; not good to be considered early on in the design?"},{"owner":{"account_id":114128,"reputation":50422,"user_id":300257,"accept_rate":89,"display_name":"Gilbert Le Blanc"},"score":0,"creation_date":1666958546,"post_id":74227942,"comment_id":131063366,"body_markdown":"Not in this case, no.  Your &quot;flexibility&quot; is over-engineering.","body":"Not in this case, no.  Your &quot;flexibility&quot; is over-engineering."},{"owner":{"account_id":12434767,"reputation":3949,"user_id":9055634,"accept_rate":22,"display_name":"Jim"},"score":1,"creation_date":1667311449,"post_id":74227942,"comment_id":131134545,"body_markdown":"@Michael: Typo, fixed. Thank you","body":"@Michael: Typo, fixed. Thank you"}],"owner":{"account_id":12434767,"reputation":3949,"user_id":9055634,"accept_rate":22,"display_name":"Jim"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":78,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1667313934,"creation_date":1666902434,"question_id":74227942,"body_markdown":"I have a case that I want return an object that is populated by multiple concrete classes.  \r\nSpecific example:   \r\n\r\n    public interface MovieHandler {\r\n        UserPreferences process(Context context, Customer customer, History customerHistory);\r\n    }\r\n\r\nConcrete implementations:  \r\n\r\n    public class AdventureMovieHandler implements MovieHandler\r\n    public class ComedyMovieHandler implements MovieHandler\r\n    public class MysteryMovieHandler implements MovieHandler\r\n    public class SciFiMovieHandler implements MovieHandler\r\n\r\nEach has their own logic so that based on the parameters passed in the `process` the create a list of recommendation for the specific category/genre.  \r\n\r\nThere is also:  \r\n\r\n   \r\n\r\n    public class Recommender {\r\n        private List&lt;UserPreferences&gt; handlers;\r\n    \r\n        public Recommender() {\r\n            handlers = new ArrayList&lt;&gt;();\r\n            handlers.add(new AdventureMovieHandler());\r\n            handlers.add(new ComedyMovieHandler());\r\n            handlers.add(new SciFiMovieHandler());\r\n            handlers.add(new MysteryMovieHandler());\r\n        }\r\n    \r\n        public UserPreferences getRecommendations(Context context, Customer customer, History customerHistory) {\r\n            UserPreferences preferences = new UserPreferences();\r\n            for(MovieHandler handler: handlers) {\r\n                UserPreferences r = handler.process(context, customer, customerHistory);\r\n                if(r.getMysteryInfo() != null) {\r\n                    preferences.setMysteryInfo(r.getMysteryInfo());\r\n                }\r\n                else if(r.getAdventureInfo() != null) {\r\n                    preferences.setAdventureInfo(r.getAdventureInfo());\r\n                }\r\n                else if(r.getComedyInfo() != null) {\r\n                    preferences.setComedyInfo(r.getComedyInfo());\r\n                }\r\n                else if(r.getSciFiInfo() != null) {\r\n                    preferences.setSciFiInfo(r.getSciFiInfo());\r\n                }\r\n                preferences.getMovies().addAll(r.getMovies());\r\n            }\r\n            return preferences;\r\n        }\r\n    }\r\n\r\n\r\n\r\nAnd the `UserPreferences`. \r\n\r\n\r\n    public class UserPreferences {\r\n        private MysteryGenre mysteryInfo;\r\n        private AdventureGenre adventureInfo;\r\n        private ComedyGenre comedyInfo;\r\n        private SciFiGenre sciFiInfo;\r\n    \r\n        List&lt;Movie&gt; movies;\r\n\r\nNow this works but I am not sure if the implementation of the `Recommender` could use some design pattern that helps avoiding checking for what is `null` per case in the series of `if/else`.  \r\nIs there something suited that can be used for this case?  \r\nPlease note that I need to return that `UserPreferences` in that format i.e. as a holder for all the various cases","title":"Handle class behaving like union","body":"<p>I have a case that I want return an object that is populated by multiple concrete classes.<br />\nSpecific example:</p>\n<pre><code>public interface MovieHandler {\n    UserPreferences process(Context context, Customer customer, History customerHistory);\n}\n</code></pre>\n<p>Concrete implementations:</p>\n<pre><code>public class AdventureMovieHandler implements MovieHandler\npublic class ComedyMovieHandler implements MovieHandler\npublic class MysteryMovieHandler implements MovieHandler\npublic class SciFiMovieHandler implements MovieHandler\n</code></pre>\n<p>Each has their own logic so that based on the parameters passed in the <code>process</code> the create a list of recommendation for the specific category/genre.</p>\n<p>There is also:</p>\n<pre><code>public class Recommender {\n    private List&lt;UserPreferences&gt; handlers;\n\n    public Recommender() {\n        handlers = new ArrayList&lt;&gt;();\n        handlers.add(new AdventureMovieHandler());\n        handlers.add(new ComedyMovieHandler());\n        handlers.add(new SciFiMovieHandler());\n        handlers.add(new MysteryMovieHandler());\n    }\n\n    public UserPreferences getRecommendations(Context context, Customer customer, History customerHistory) {\n        UserPreferences preferences = new UserPreferences();\n        for(MovieHandler handler: handlers) {\n            UserPreferences r = handler.process(context, customer, customerHistory);\n            if(r.getMysteryInfo() != null) {\n                preferences.setMysteryInfo(r.getMysteryInfo());\n            }\n            else if(r.getAdventureInfo() != null) {\n                preferences.setAdventureInfo(r.getAdventureInfo());\n            }\n            else if(r.getComedyInfo() != null) {\n                preferences.setComedyInfo(r.getComedyInfo());\n            }\n            else if(r.getSciFiInfo() != null) {\n                preferences.setSciFiInfo(r.getSciFiInfo());\n            }\n            preferences.getMovies().addAll(r.getMovies());\n        }\n        return preferences;\n    }\n}\n</code></pre>\n<p>And the <code>UserPreferences</code>.</p>\n<pre><code>public class UserPreferences {\n    private MysteryGenre mysteryInfo;\n    private AdventureGenre adventureInfo;\n    private ComedyGenre comedyInfo;\n    private SciFiGenre sciFiInfo;\n\n    List&lt;Movie&gt; movies;\n</code></pre>\n<p>Now this works but I am not sure if the implementation of the <code>Recommender</code> could use some design pattern that helps avoiding checking for what is <code>null</code> per case in the series of <code>if/else</code>.<br />\nIs there something suited that can be used for this case?<br />\nPlease note that I need to return that <code>UserPreferences</code> in that format i.e. as a holder for all the various cases</p>\n"},{"tags":["java","mysql","hibernate","jdbc"],"comments":[{"owner":{"account_id":2203408,"reputation":5012,"user_id":1947216,"display_name":"mentallurg"},"score":0,"creation_date":1593375777,"post_id":62627679,"comment_id":110752310,"body_markdown":"&quot;it was caused by the failure of creating tables&quot; - no, this is not true. The error message means that the codes attempts to read from a table, by this table is missing. What should you do? Create a table that is currently missing.","body":"&quot;it was caused by the failure of creating tables&quot; - no, this is not true. The error message means that the codes attempts to read from a table, by this table is missing. What should you do? Create a table that is currently missing."},{"owner":{"account_id":8026267,"reputation":4734,"user_id":6053084,"display_name":"Turo"},"score":0,"creation_date":1593375909,"post_id":62627679,"comment_id":110752350,"body_markdown":"You use hibernate 5? see https://stackoverf7low.com/questions/33449545/table-not-created-with-hbm2ddl-auto-update-in-hibernate-5 ... (answer with set dialect)","body":"You use hibernate 5? see <a href=\"https://stackoverf7low.com/questions/33449545/table-not-created-with-hbm2ddl-auto-update-in-hibernate-5\" rel=\"nofollow noreferrer\" title=\"table not created with hbm2ddl auto update in hibernate 5\">stackoverf7low.com/questions/33449545/&hellip;</a> ... (answer with set dialect)"}],"answers":[{"tags":[],"owner":{"account_id":2330823,"reputation":9304,"user_id":2044302,"accept_rate":74,"display_name":"Alexander Petrov"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1593376149,"creation_date":1593376149,"answer_id":62627881,"question_id":62627679,"body_markdown":"How about adding `&lt;property name=&quot;hbm2ddl.auto&quot; value=&quot;create&quot;/&gt;` to your hibernate configruation file. This will ensure your tables are created on startup and leave them intact.\r\n\r\n&gt; validate: validate the schema, makes no changes to the database.\r\n&gt; update: update the schema. create: creates the schema, destroying\r\n&gt; previous data. create-drop: drop the schema when the SessionFactory is\r\n&gt; closed explicitly, typically when the application is stopped. none:\r\n&gt; does nothing with the schema, makes no changes to the database\r\n\r\nA more extensive description of the possible values :\r\nhttps://stackoverflow.com/questions/438146/what-are-the-possible-values-of-the-hibernate-hbm2ddl-auto-configuration-and-wha\r\n","title":"hibernate: Could not execute JDBC batch update","body":"<p>How about adding <code>&lt;property name=&quot;hbm2ddl.auto&quot; value=&quot;create&quot;/&gt;</code> to your hibernate configruation file. This will ensure your tables are created on startup and leave them intact.</p>\n<blockquote>\n<p>validate: validate the schema, makes no changes to the database.\nupdate: update the schema. create: creates the schema, destroying\nprevious data. create-drop: drop the schema when the SessionFactory is\nclosed explicitly, typically when the application is stopped. none:\ndoes nothing with the schema, makes no changes to the database</p>\n</blockquote>\n<p>A more extensive description of the possible values :\n<a href=\"https://stackoverflow.com/questions/438146/what-are-the-possible-values-of-the-hibernate-hbm2ddl-auto-configuration-and-wha\">What are the possible values of the Hibernate hbm2ddl.auto configuration and what do they do</a></p>\n"},{"tags":[],"owner":{"account_id":8871846,"reputation":87,"user_id":7574010,"display_name":"Paul afk"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1667313897,"creation_date":1667305746,"answer_id":74275970,"question_id":62627679,"body_markdown":"It is a java error: Please disable/comment out recovery part from MySQL my.cnf file. \r\nAs now the MySQL is in a state where users cannot change/edit anything on the MySQL database.\r\n\r\n\r\n\r\n","title":"hibernate: Could not execute JDBC batch update","body":"<p>It is a java error: Please disable/comment out recovery part from MySQL my.cnf file.\nAs now the MySQL is in a state where users cannot change/edit anything on the MySQL database.</p>\n"}],"owner":{"account_id":15304949,"reputation":21,"user_id":11042045,"display_name":"Bryan Liu"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1073,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":2,"score":2,"last_activity_date":1667313897,"creation_date":1593374761,"question_id":62627679,"body_markdown":"When I want to create a one to one mapping by using hibernate, the error &quot;Could not execute JDBC batch update&quot; keeps raising and I noticed that it was caused by the failure of creating tables in the MySQL according to the error it showed. Would you please help me to find out the problems inside it? Thank you!\r\n\r\nHibernate Configuration File\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;!DOCTYPE hibernate-configuration PUBLIC\r\n\t&quot;-//Hibernate/Hibernate Configuration DTD 3.0//EN&quot;\r\n\t&quot;http://www.hibernate.org/dtd/hibernate-configuration-3.0.dtd&quot;&gt;\r\n&lt;hibernate-configuration&gt;\r\n&lt;session-factory&gt;\r\n&lt;property name=&quot;hibernate.hbm2ddl.auto&quot;&gt;update&lt;/property&gt;\r\n&lt;property name=&quot;show_sql&quot;&gt;true&lt;/property&gt;\r\n&lt;property name=&quot;dialect&quot;&gt;org.hibernate.dialect.MySQLDialect&lt;/property&gt;\r\n&lt;property name=&quot;connection.url&quot;&gt;jdbc:mysql://localhost/june13?serverTimezone=UTC&lt;/property&gt;\r\n&lt;property name=&quot;connection.username&quot;&gt;root&lt;/property&gt;\r\n&lt;property name=&quot;connection.password&quot;&gt;root&lt;/property&gt;\r\n&lt;property name=&quot;connection.driver_class&quot;&gt;com.mysql.cj.jdbc.Driver&lt;/property&gt;\r\n&lt;mapping resource=&quot;Emp-hbm.xml&quot;/&gt;\r\n&lt;/session-factory&gt;\r\n&lt;/hibernate-configuration&gt;\r\n```\r\nHibernate one-to-one mapping file:\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;!DOCTYPE hibernate-mapping PUBLIC \r\n    &quot;-//Hibernate/Hibernate Mapping DTD 3.0//EN&quot;\r\n    &quot;http://www.hibernate.org/dtd/hibernate-mapping-3.0.dtd&quot;&gt;\r\n&lt;hibernate-mapping&gt;\r\n\t&lt;class name=&quot;com.hibernate.one2one.Emp&quot; table=&quot;emp_906&quot;&gt;\r\n\t\t&lt;id name=&quot;id&quot; column=&quot;emp_id&quot;&gt;&lt;/id&gt;\r\n\t\t&lt;property name=&quot;name&quot; column=&quot;emp_name&quot; /&gt;\r\n\t\t&lt;one-to-one name=&quot;phoneno&quot; cascade=&quot;all&quot;&gt;&lt;/one-to-one&gt;\r\n\t&lt;/class&gt;\r\n\t&lt;class name=&quot;com.hibernate.one2one.PhoneNumber&quot; table=&quot;phone_906&quot;&gt;\r\n\t\t&lt;id name=&quot;pid&quot;&gt;&lt;/id&gt;\r\n\t\t&lt;property name=&quot;network&quot; /&gt;\r\n\t\t&lt;property name=&quot;phonenumber&quot; /&gt;\r\n\t\t&lt;one-to-one name=&quot;emp&quot;&gt;&lt;/one-to-one&gt;\r\n\t&lt;/class&gt;\r\n&lt;/hibernate-mapping&gt;\r\n```\r\nMain File:\r\n```\r\npackage com.hibernate.one2one;\r\n\r\nimport java.util.ArrayList;\r\nimport java.util.List;\r\n\r\nimport org.hibernate.SessionFactory;\r\nimport org.hibernate.Transaction;\r\nimport org.hibernate.cfg.Configuration;\r\nimport org.hibernate.classic.Session;\r\n\r\npublic class App \r\n{\r\n\tpublic static void main(String[] args) \r\n\t{\r\n\t\tConfiguration cfg=new Configuration();\r\n\t\tcfg.configure(&quot;Hibernate-cfg.xml&quot;);\r\n\t\tSystem.out.println(&quot;Configuration Object Created Successfully&quot;);\r\n\t\tSessionFactory sf=cfg.buildSessionFactory();\r\n\t\tSystem.out.println(&quot;Session Factory Object is Created&quot;);\r\n\t\tSession s=sf.openSession();\r\n\t\tTransaction t=s.beginTransaction();\r\n\t\tEmp e=new Emp();\r\n\t\te.setId(104);\r\n\t\te.setName(&quot;Lee Meng&quot;);\r\n\t\tPhoneNumber ph = new PhoneNumber();\r\n\t\tph.setPid(201);\r\n\t\tph.setNetwork(&quot;ATT&quot;);\r\n\t\tph.setPhonenumber(&quot;9900336611&quot;);\r\n\t\te.setPhoneno(ph);\r\n\t\tph.setEmp(e);\r\n\t\ts.persist(e);\r\n\t\tt.commit();\r\n\t\ts.close();\r\n\t\tsf.close();\r\n\t}\r\n}\r\n```\r\nThe error code:\r\n```\r\nException in thread &quot;main&quot; org.hibernate.exception.SQLGrammarException: Could not execute JDBC batch update\r\n\tat org.hibernate.exception.SQLStateConverter.convert(SQLStateConverter.java:92)\r\n\tat org.hibernate.exception.JDBCExceptionHelper.convert(JDBCExceptionHelper.java:66)\r\n\tat org.hibernate.jdbc.AbstractBatcher.executeBatch(AbstractBatcher.java:275)\r\n\tat org.hibernate.jdbc.AbstractBatcher.prepareStatement(AbstractBatcher.java:114)\r\n\tat org.hibernate.jdbc.AbstractBatcher.prepareStatement(AbstractBatcher.java:109)\r\n\tat org.hibernate.jdbc.AbstractBatcher.prepareBatchStatement(AbstractBatcher.java:244)\r\n\tat org.hibernate.persister.entity.AbstractEntityPersister.insert(AbstractEntityPersister.java:2411)\r\n\tat org.hibernate.persister.entity.AbstractEntityPersister.insert(AbstractEntityPersister.java:2874)\r\n\tat org.hibernate.action.EntityInsertAction.execute(EntityInsertAction.java:79)\r\n\tat org.hibernate.engine.ActionQueue.execute(ActionQueue.java:273)\r\n\tat org.hibernate.engine.ActionQueue.executeActions(ActionQueue.java:265)\r\n\tat org.hibernate.engine.ActionQueue.executeActions(ActionQueue.java:184)\r\n\tat org.hibernate.event.def.AbstractFlushingEventListener.performExecutions(AbstractFlushingEventListener.java:321)\r\n\tat org.hibernate.event.def.DefaultFlushEventListener.onFlush(DefaultFlushEventListener.java:51)\r\n\tat org.hibernate.impl.SessionImpl.flush(SessionImpl.java:1216)\r\n\tat org.hibernate.impl.SessionImpl.managedFlush(SessionImpl.java:383)\r\n\tat org.hibernate.transaction.JDBCTransaction.commit(JDBCTransaction.java:133)\r\n\tat com.hibernate.one2one.App.main(App.java:32)\r\nCaused by: java.sql.BatchUpdateException: Table &#39;june13.emp_906&#39; doesn&#39;t exist\r\n\tat sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)\r\n\tat sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:62)\r\n\tat sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)\r\n\tat java.lang.reflect.Constructor.newInstance(Constructor.java:423)\r\n\tat com.mysql.cj.util.Util.handleNewInstance(Util.java:192)\r\n\tat com.mysql.cj.util.Util.getInstance(Util.java:167)\r\n\tat com.mysql.cj.util.Util.getInstance(Util.java:174)\r\n\tat com.mysql.cj.jdbc.exceptions.SQLError.createBatchUpdateException(SQLError.java:224)\r\n\tat com.mysql.cj.jdbc.ClientPreparedStatement.executeBatchSerially(ClientPreparedStatement.java:853)\r\n\tat com.mysql.cj.jdbc.ClientPreparedStatement.executeBatchInternal(ClientPreparedStatement.java:435)\r\n\tat com.mysql.cj.jdbc.StatementImpl.executeBatch(StatementImpl.java:796)\r\n\tat org.hibernate.jdbc.BatchingBatcher.doExecuteBatch(BatchingBatcher.java:70)\r\n\tat org.hibernate.jdbc.AbstractBatcher.executeBatch(AbstractBatcher.java:268)\r\n\t... 15 more\r\nCaused by: java.sql.SQLSyntaxErrorException: Table &#39;june13.emp_906&#39; doesn&#39;t exist\r\n\tat com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:120)\r\n\tat com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:97)\r\n\tat com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:122)\r\n\tat com.mysql.cj.jdbc.ClientPreparedStatement.executeInternal(ClientPreparedStatement.java:953)\r\n\tat com.mysql.cj.jdbc.ClientPreparedStatement.executeUpdateInternal(ClientPreparedStatement.java:1092)\r\n\tat com.mysql.cj.jdbc.ClientPreparedStatement.executeBatchSerially(ClientPreparedStatement.java:832)\r\n\t... 19 more\r\n```","title":"hibernate: Could not execute JDBC batch update","body":"<p>When I want to create a one to one mapping by using hibernate, the error &quot;Could not execute JDBC batch update&quot; keeps raising and I noticed that it was caused by the failure of creating tables in the MySQL according to the error it showed. Would you please help me to find out the problems inside it? Thank you!</p>\n<p>Hibernate Configuration File</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;!DOCTYPE hibernate-configuration PUBLIC\n    &quot;-//Hibernate/Hibernate Configuration DTD 3.0//EN&quot;\n    &quot;http://www.hibernate.org/dtd/hibernate-configuration-3.0.dtd&quot;&gt;\n&lt;hibernate-configuration&gt;\n&lt;session-factory&gt;\n&lt;property name=&quot;hibernate.hbm2ddl.auto&quot;&gt;update&lt;/property&gt;\n&lt;property name=&quot;show_sql&quot;&gt;true&lt;/property&gt;\n&lt;property name=&quot;dialect&quot;&gt;org.hibernate.dialect.MySQLDialect&lt;/property&gt;\n&lt;property name=&quot;connection.url&quot;&gt;jdbc:mysql://localhost/june13?serverTimezone=UTC&lt;/property&gt;\n&lt;property name=&quot;connection.username&quot;&gt;root&lt;/property&gt;\n&lt;property name=&quot;connection.password&quot;&gt;root&lt;/property&gt;\n&lt;property name=&quot;connection.driver_class&quot;&gt;com.mysql.cj.jdbc.Driver&lt;/property&gt;\n&lt;mapping resource=&quot;Emp-hbm.xml&quot;/&gt;\n&lt;/session-factory&gt;\n&lt;/hibernate-configuration&gt;\n</code></pre>\n<p>Hibernate one-to-one mapping file:</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;!DOCTYPE hibernate-mapping PUBLIC \n    &quot;-//Hibernate/Hibernate Mapping DTD 3.0//EN&quot;\n    &quot;http://www.hibernate.org/dtd/hibernate-mapping-3.0.dtd&quot;&gt;\n&lt;hibernate-mapping&gt;\n    &lt;class name=&quot;com.hibernate.one2one.Emp&quot; table=&quot;emp_906&quot;&gt;\n        &lt;id name=&quot;id&quot; column=&quot;emp_id&quot;&gt;&lt;/id&gt;\n        &lt;property name=&quot;name&quot; column=&quot;emp_name&quot; /&gt;\n        &lt;one-to-one name=&quot;phoneno&quot; cascade=&quot;all&quot;&gt;&lt;/one-to-one&gt;\n    &lt;/class&gt;\n    &lt;class name=&quot;com.hibernate.one2one.PhoneNumber&quot; table=&quot;phone_906&quot;&gt;\n        &lt;id name=&quot;pid&quot;&gt;&lt;/id&gt;\n        &lt;property name=&quot;network&quot; /&gt;\n        &lt;property name=&quot;phonenumber&quot; /&gt;\n        &lt;one-to-one name=&quot;emp&quot;&gt;&lt;/one-to-one&gt;\n    &lt;/class&gt;\n&lt;/hibernate-mapping&gt;\n</code></pre>\n<p>Main File:</p>\n<pre><code>package com.hibernate.one2one;\n\nimport java.util.ArrayList;\nimport java.util.List;\n\nimport org.hibernate.SessionFactory;\nimport org.hibernate.Transaction;\nimport org.hibernate.cfg.Configuration;\nimport org.hibernate.classic.Session;\n\npublic class App \n{\n    public static void main(String[] args) \n    {\n        Configuration cfg=new Configuration();\n        cfg.configure(&quot;Hibernate-cfg.xml&quot;);\n        System.out.println(&quot;Configuration Object Created Successfully&quot;);\n        SessionFactory sf=cfg.buildSessionFactory();\n        System.out.println(&quot;Session Factory Object is Created&quot;);\n        Session s=sf.openSession();\n        Transaction t=s.beginTransaction();\n        Emp e=new Emp();\n        e.setId(104);\n        e.setName(&quot;Lee Meng&quot;);\n        PhoneNumber ph = new PhoneNumber();\n        ph.setPid(201);\n        ph.setNetwork(&quot;ATT&quot;);\n        ph.setPhonenumber(&quot;9900336611&quot;);\n        e.setPhoneno(ph);\n        ph.setEmp(e);\n        s.persist(e);\n        t.commit();\n        s.close();\n        sf.close();\n    }\n}\n</code></pre>\n<p>The error code:</p>\n<pre><code>Exception in thread &quot;main&quot; org.hibernate.exception.SQLGrammarException: Could not execute JDBC batch update\n    at org.hibernate.exception.SQLStateConverter.convert(SQLStateConverter.java:92)\n    at org.hibernate.exception.JDBCExceptionHelper.convert(JDBCExceptionHelper.java:66)\n    at org.hibernate.jdbc.AbstractBatcher.executeBatch(AbstractBatcher.java:275)\n    at org.hibernate.jdbc.AbstractBatcher.prepareStatement(AbstractBatcher.java:114)\n    at org.hibernate.jdbc.AbstractBatcher.prepareStatement(AbstractBatcher.java:109)\n    at org.hibernate.jdbc.AbstractBatcher.prepareBatchStatement(AbstractBatcher.java:244)\n    at org.hibernate.persister.entity.AbstractEntityPersister.insert(AbstractEntityPersister.java:2411)\n    at org.hibernate.persister.entity.AbstractEntityPersister.insert(AbstractEntityPersister.java:2874)\n    at org.hibernate.action.EntityInsertAction.execute(EntityInsertAction.java:79)\n    at org.hibernate.engine.ActionQueue.execute(ActionQueue.java:273)\n    at org.hibernate.engine.ActionQueue.executeActions(ActionQueue.java:265)\n    at org.hibernate.engine.ActionQueue.executeActions(ActionQueue.java:184)\n    at org.hibernate.event.def.AbstractFlushingEventListener.performExecutions(AbstractFlushingEventListener.java:321)\n    at org.hibernate.event.def.DefaultFlushEventListener.onFlush(DefaultFlushEventListener.java:51)\n    at org.hibernate.impl.SessionImpl.flush(SessionImpl.java:1216)\n    at org.hibernate.impl.SessionImpl.managedFlush(SessionImpl.java:383)\n    at org.hibernate.transaction.JDBCTransaction.commit(JDBCTransaction.java:133)\n    at com.hibernate.one2one.App.main(App.java:32)\nCaused by: java.sql.BatchUpdateException: Table 'june13.emp_906' doesn't exist\n    at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)\n    at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:62)\n    at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)\n    at java.lang.reflect.Constructor.newInstance(Constructor.java:423)\n    at com.mysql.cj.util.Util.handleNewInstance(Util.java:192)\n    at com.mysql.cj.util.Util.getInstance(Util.java:167)\n    at com.mysql.cj.util.Util.getInstance(Util.java:174)\n    at com.mysql.cj.jdbc.exceptions.SQLError.createBatchUpdateException(SQLError.java:224)\n    at com.mysql.cj.jdbc.ClientPreparedStatement.executeBatchSerially(ClientPreparedStatement.java:853)\n    at com.mysql.cj.jdbc.ClientPreparedStatement.executeBatchInternal(ClientPreparedStatement.java:435)\n    at com.mysql.cj.jdbc.StatementImpl.executeBatch(StatementImpl.java:796)\n    at org.hibernate.jdbc.BatchingBatcher.doExecuteBatch(BatchingBatcher.java:70)\n    at org.hibernate.jdbc.AbstractBatcher.executeBatch(AbstractBatcher.java:268)\n    ... 15 more\nCaused by: java.sql.SQLSyntaxErrorException: Table 'june13.emp_906' doesn't exist\n    at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:120)\n    at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:97)\n    at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:122)\n    at com.mysql.cj.jdbc.ClientPreparedStatement.executeInternal(ClientPreparedStatement.java:953)\n    at com.mysql.cj.jdbc.ClientPreparedStatement.executeUpdateInternal(ClientPreparedStatement.java:1092)\n    at com.mysql.cj.jdbc.ClientPreparedStatement.executeBatchSerially(ClientPreparedStatement.java:832)\n    ... 19 more\n</code></pre>\n"},{"tags":["java","stdout","stdin"],"owner":{"account_id":17781160,"reputation":29,"user_id":12912333,"display_name":"vlOd"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":37,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1667313878,"creation_date":1667313878,"question_id":74277669,"body_markdown":"In my program I have changed stdout using ```System.setOut();``` but after that, typing into the console no longer echoes the input back.\r\n\r\nI tried the following, with no avail:\r\n```\r\noriginalStdIn = System.in;\r\nstdIn = new InputStream() {\r\n\t@Override\r\n\tpublic int available() throws IOException {\r\n\t\treturn originalStdIn.available();\r\n\t}\r\n\t\r\n\t@Override\r\n    public int read() throws IOException {\r\n        int chr = originalStdIn.read();\r\n        stdOut.write(chr);\r\n        return chr;\r\n    }\r\n\t\r\n    @Override\r\n    public int read(byte[] buffer) throws IOException {\r\n    \treturn this.read(buffer, 0, buffer.length);\r\n    }\r\n\t\r\n    @Override\r\n    public int read(byte[] buffer, int off, int len) throws IOException {\r\n    \tint readResult = originalStdIn.read(buffer, off, len);\r\n        stdOut.write(buffer, off, readResult);\r\n        return readResult;\r\n    }\r\n};\r\nSystem.setIn(stdIn);\r\n```\r\n\r\nThis is how I read input:\r\n```\r\nprivate void handleThread_func() {\r\n\tLogging.didUpdateInWindow = true;\r\n\tSystem.out.print(this.consoleInputPrefix);\r\n\t\r\n\twhile (!this.isClosed) {\r\n\t\ttry {\r\n\t\t\tif (System.in.available() &gt; 0) {\r\n                String input = &quot;&quot;;\r\n                while (System.in.available() &gt; 0) {\r\n                \tinput += this.inputReader.readLine();\r\n                }\r\n                this.handleInput(input);\r\n                \r\n                Logging.didUpdateInWindow = true;\r\n                System.out.print(this.consoleInputPrefix);\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tThread.sleep(1);\r\n\t\t} catch (Exception ex) {\r\n\t\t\tif (ex instanceof InterruptedException) break;\r\n\tLogging.logSevere(&quot;Unable to handle console input: &quot; + \r\n\t\t\tUtils.getExceptionStackTraceAsStr(ex));\r\n\t\t}\r\n\t}\r\n}\r\n```\r\n\r\nI tried changing ```input += this.inputReader.readLine();``` to ```input += (char)this.inputReader.read()``` but while it did echo, the input was read in the incorrect order\r\n","title":"Console input no longer being echo&#39;d after changing stdout","body":"<p>In my program I have changed stdout using <code>System.setOut();</code> but after that, typing into the console no longer echoes the input back.</p>\n<p>I tried the following, with no avail:</p>\n<pre><code>originalStdIn = System.in;\nstdIn = new InputStream() {\n    @Override\n    public int available() throws IOException {\n        return originalStdIn.available();\n    }\n    \n    @Override\n    public int read() throws IOException {\n        int chr = originalStdIn.read();\n        stdOut.write(chr);\n        return chr;\n    }\n    \n    @Override\n    public int read(byte[] buffer) throws IOException {\n        return this.read(buffer, 0, buffer.length);\n    }\n    \n    @Override\n    public int read(byte[] buffer, int off, int len) throws IOException {\n        int readResult = originalStdIn.read(buffer, off, len);\n        stdOut.write(buffer, off, readResult);\n        return readResult;\n    }\n};\nSystem.setIn(stdIn);\n</code></pre>\n<p>This is how I read input:</p>\n<pre><code>private void handleThread_func() {\n    Logging.didUpdateInWindow = true;\n    System.out.print(this.consoleInputPrefix);\n    \n    while (!this.isClosed) {\n        try {\n            if (System.in.available() &gt; 0) {\n                String input = &quot;&quot;;\n                while (System.in.available() &gt; 0) {\n                    input += this.inputReader.readLine();\n                }\n                this.handleInput(input);\n                \n                Logging.didUpdateInWindow = true;\n                System.out.print(this.consoleInputPrefix);\n            }\n            \n            Thread.sleep(1);\n        } catch (Exception ex) {\n            if (ex instanceof InterruptedException) break;\n    Logging.logSevere(&quot;Unable to handle console input: &quot; + \n            Utils.getExceptionStackTraceAsStr(ex));\n        }\n    }\n}\n</code></pre>\n<p>I tried changing <code>input += this.inputReader.readLine();</code> to <code>input += (char)this.inputReader.read()</code> but while it did echo, the input was read in the incorrect order</p>\n"},{"tags":["java","comparable","compareto"],"comments":[{"owner":{"account_id":401843,"reputation":89788,"user_id":768644,"display_name":"rzwitserloot"},"score":0,"creation_date":1667312217,"post_id":74277248,"comment_id":131134829,"body_markdown":"Include the code of the superclass (the key element is the implements line. Is it `implements Comparator`, or `implements Comparable&lt;Foobar&gt;`, etc), and the code of your class: Both the `compareTo` line as well as your extends/implements line.","body":"Include the code of the superclass (the key element is the implements line. Is it <code>implements Comparator</code>, or <code>implements Comparable&lt;Foobar&gt;</code>, etc), and the code of your class: Both the <code>compareTo</code> line as well as your extends/implements line."},{"owner":{"account_id":1211967,"reputation":7024,"user_id":1180351,"display_name":"Rob Spoor"},"score":0,"creation_date":1667312858,"post_id":74277248,"comment_id":131135071,"body_markdown":"This is one of those cases where generics aren&#39;t going to prevent having to cast. See https://github.com/openjdk/jdk/blob/master/src/java.sql/share/classes/java/sql/Timestamp.java#L453 for an example how it was done in the JDK. An alternative is to just cast and let the JVM throw a `ClassCastException` if the type doesn&#39;t match.","body":"This is one of those cases where generics aren&#39;t going to prevent having to cast. See <a href=\"https://github.com/openjdk/jdk/blob/master/src/java.sql/share/classes/java/sql/Timestamp.java#L453\" rel=\"nofollow noreferrer\">github.com/openjdk/jdk/blob/master/src/java.sql/share/classe&zwnj;&#8203;s/&hellip;</a> for an example how it was done in the JDK. An alternative is to just cast and let the JVM throw a <code>ClassCastException</code> if the type doesn&#39;t match."},{"owner":{"account_id":401843,"reputation":89788,"user_id":768644,"display_name":"rzwitserloot"},"score":0,"creation_date":1667312933,"post_id":74277248,"comment_id":131135097,"body_markdown":"@RobSpoor that is most likely (the question needs more detail) misleading. Given the requirement that comparison impls are commutative, what OP wants is impossible, and generics-casting doesn&#39;t make the impossible possible.","body":"@RobSpoor that is most likely (the question needs more detail) misleading. Given the requirement that comparison impls are commutative, what OP wants is impossible, and generics-casting doesn&#39;t make the impossible possible."},{"owner":{"account_id":401843,"reputation":89788,"user_id":768644,"display_name":"rzwitserloot"},"score":0,"creation_date":1667313883,"post_id":74277248,"comment_id":131135508,"body_markdown":"@RobSpoor see my answer which shows why what OP wants is in fact impossible.","body":"@RobSpoor see my answer which shows why what OP wants is in fact impossible."},{"owner":{"account_id":1211967,"reputation":7024,"user_id":1180351,"display_name":"Rob Spoor"},"score":0,"creation_date":1667317943,"post_id":74277248,"comment_id":131136955,"body_markdown":"@rzwitserloot I disagree that it&#39;s impossible. However, the signature will indeed have to be `compareTo(Parent p)`, not `compareTo(Child c)`. The first line of that method could be `Child c = (Child) p`, which would give a `ClassCastException` if not provided with a `Child` instance. While you indeed lose commutativity when mixing `Parent` and `Child` instances, comparison would still work if only comparing `Child` instances.","body":"@rzwitserloot I disagree that it&#39;s impossible. However, the signature will indeed have to be <code>compareTo(Parent p)</code>, not <code>compareTo(Child c)</code>. The first line of that method could be <code>Child c = (Child) p</code>, which would give a <code>ClassCastException</code> if not provided with a <code>Child</code> instance. While you indeed lose commutativity when mixing <code>Parent</code> and <code>Child</code> instances, comparison would still work if only comparing <code>Child</code> instances."},{"owner":{"account_id":401843,"reputation":89788,"user_id":768644,"display_name":"rzwitserloot"},"score":0,"creation_date":1667320997,"post_id":74277248,"comment_id":131138059,"body_markdown":"You&#39;ve defined the word &#39;work&#39; differently. Your definition evidently does not include &#39;adheres to the contract&#39;, and means Child instances are no longer interchangible with Parent instances. In specific scenarios (namely, when you don&#39;t need this) then you could say it &#39;works&#39;, but it&#39;s a ticking timebomb; you have to put in the javadoc something like `&lt;strong&gt;NB: Do not use instances of Child as Parents in any context where natural order is relevant as they violate the Comparable contract - bugs that take DAYS to find let alone fix will ensue! Caveat Emptor!&lt;/strong&gt;`. You can, but, yich.","body":"You&#39;ve defined the word &#39;work&#39; differently. Your definition evidently does not include &#39;adheres to the contract&#39;, and means Child instances are no longer interchangible with Parent instances. In specific scenarios (namely, when you don&#39;t need this) then you could say it &#39;works&#39;, but it&#39;s a ticking timebomb; you have to put in the javadoc something like <code>&lt;strong&gt;NB: Do not use instances of Child as Parents in any context where natural order is relevant as they violate the Comparable contract - bugs that take DAYS to find let alone fix will ensue! Caveat Emptor!&lt;&#47;strong&gt;</code>. You can, but, yich."}],"answers":[{"tags":[],"owner":{"account_id":401843,"reputation":89788,"user_id":768644,"display_name":"rzwitserloot"},"down_vote_count":0,"up_vote_count":5,"is_accepted":true,"score":5,"last_activity_date":1667313870,"creation_date":1667313870,"answer_id":74277665,"question_id":74277248,"body_markdown":"&gt; I am creating subclass and have some class elements inside it.\r\n\r\nOkay.\r\n\r\n&gt; Now I want to override compareTo method from super class and use variables from subclass\r\n\r\nImpossible.\r\n\r\nComparable is a &#39;contract interface&#39; - you can&#39;t _just_ implement the methods; you aren&#39;t &quot;done&quot; when you have implemented every method and they compile and (appear to) run without throwing exceptions: The documentation states additional rules you need to adhere to that the compiler cannot check. The fact that the compiler cannot check that you adhere to these rules means your code compiles. However, your code is still broken. (&quot;It compiles&quot; does not mean &quot;It is correct&quot;, after all).\r\n\r\nOne of the rules in the contract is that comparison operations are commutative and associative: if `a.compareTo(b)` returns a negative number, then `b.compareTo(a)` __must__ return a positive number, (and if one returns `0` so must the other) and vice versa. If you fail to adhere to the contract, crazy stuff happens. For example, you create a `TreeSet` and things end up out of order and this kind of code can start printing `false`:\r\n\r\n```java\r\nTreeSet&lt;YourBrokenItem&gt; set = new TreeSet&lt;&gt;();\r\nset.add(a);\r\nset.add(b);\r\nSystem.out.println(set.contains(a)); // prints false?\r\n```\r\n\r\nHowever, adhering to the contract (the commutativity) rule __is not possible__ when you subclass and want to override definitions. Let&#39;s make it practical:\r\n\r\n```java\r\nclass Parent implements Comparable&lt;Parent&gt; {\r\n  int x;\r\n\r\n  /** Sort on x */\r\n  @Override public int compareTo(Parent other) {\r\n    return Integer.compare(x, other.x);\r\n  }\r\n}\r\n\r\nclass Child extends Parent implements Comparable&lt;Child&gt; {\r\n  int y;\r\n\r\n  /** Sort on x first; if those are equal, sort on y */\r\n  @Override public int compareTo(Child other) {\r\n    int c = Integer.compare(x, other.x);\r\n    if (c != 0) return c;\r\n    return Integer.compare(y, other.y);\r\n  }\r\n}\r\n```\r\n\r\nThe above code doesn&#39;t work for two reasons: [A] it can&#39;t be made to compile, and [B] even if you voodoo magic that away with generics casting, the code breaks the contract. And always will, you can&#39;t fix [B].\r\n\r\nSo instead of delving deep on generics and working around it (which you can), it is a moot point - B cannot be worked around, so what you want is impossible, therefore there is no point explaining how to hack around so that the compiler accepts it.\r\n\r\nThe reason it&#39;s not possible is the commutativity rule. Let&#39;s consider 3 instances:\r\n\r\n```\r\nParent p = new Parent(10);\r\nChild c = new Child(10, 5);\r\nChild d = new Child(10, 20);\r\n```\r\n\r\nYour intent is very clearly that this happens:\r\n\r\n```java\r\nSystem.out.println(c.compareTo(d)); // prints -1\r\nSystem.out.println(d.compareTo(c)); // prints +1\r\n```\r\n\r\nHowever, what happens when p is involved? Remember, `Child` says that it is a subtype of `Parent` which means an instance of Child __can do everything an instance of Parent can do, _and_ more__. One thing Parent can do, is compare itself to another instance of Parent. And instances of Child are also instances of Parent, so, you can compare a Parent to a Child and vice versa. Hence, `p.compareTo(a)` is valid. Similarly, you can make a `new TreeSet&lt;Parent&gt;()` and you can of course invoke `.add(new Child())` on that. After all, instances of Child are definitely also instances of Parent, that&#39;s what subclassing means.\r\n\r\nThus:\r\n\r\n```\r\np.compareTo(c); // This returns 0 - and you can&#39;t stop that from happening!\r\np.compareTo(d); // so does this\r\n\r\n// thus, given the above, this:\r\nc.compareTo(d);\r\n// MUST, BY CONTRACT, return 0!\r\n```\r\n\r\nHence, what you want? Impossible. The contract of comparable forbids it.\r\n\r\nEffectively, with Comparable, you &#39;pick a level&#39; and comparability is defined strictly on that level, and subclasses cannot change that. Whatever type in your type hierarchy decides to `implements Comparable`, that&#39;s the level. They set the baseline of the natural comparison for those things __and subclasses cannot modify how that works at all__ without breaking the contract.\r\n\r\nWhat you probably want is to forget about natural order and use comparators instead. Every system that works on natural order (such as `TreeSet`, or `list.sort(Comparator.naturalOrder())` or `Collections.sort(list)` or `Arrays.binarySearch`, and so on), _also_ has an overloaded variant that accepts a `Comparator&lt;T&gt;`.\r\n\r\nYou _CAN_ make a custom comparator that compares, specifically, children. You can even make a custom comparator that compares children _and_ parents if you define the comparison operation properly (meaning, there is a complete order). For example, by saying that given equal `x` values, any `new Parent()` instance will always sort before any `new Child()`, regardless of Child&#39;s y value:\r\n\r\n```\r\nComparator&lt;Parent&gt; myCustomComparator = (a, b) -&gt; {\r\n  int c = Integer.compare(a.x, b.x);\r\n  if (c != 0) return c; // x isn&#39;t equal so it controls.\r\n  if (a instanceof Child &amp;&amp; !(b instanceof Child)) return +1;\r\n  if (!(a instanceof Child) &amp;&amp; b instanceof Child) return -1;\r\n  if (!(a instanceof Child) &amp;&amp; !(b instanceof Child)) return 0;\r\n  int y1 = ((Child) a).y, y2 = ((Child) b).y;\r\n  return Integer.compare(y1, y2);\r\n};\r\n\r\nTreeSet&lt;Parent&gt; myAwesomeSelfSortingSet = new TreeSet&lt;Parent&gt;(myCustomComparator);\r\n// and voila.\r\n```\r\n","title":"Problem with overriding compareTo method in subclass","body":"<blockquote>\n<p>I am creating subclass and have some class elements inside it.</p>\n</blockquote>\n<p>Okay.</p>\n<blockquote>\n<p>Now I want to override compareTo method from super class and use variables from subclass</p>\n</blockquote>\n<p>Impossible.</p>\n<p>Comparable is a 'contract interface' - you can't <em>just</em> implement the methods; you aren't &quot;done&quot; when you have implemented every method and they compile and (appear to) run without throwing exceptions: The documentation states additional rules you need to adhere to that the compiler cannot check. The fact that the compiler cannot check that you adhere to these rules means your code compiles. However, your code is still broken. (&quot;It compiles&quot; does not mean &quot;It is correct&quot;, after all).</p>\n<p>One of the rules in the contract is that comparison operations are commutative and associative: if <code>a.compareTo(b)</code> returns a negative number, then <code>b.compareTo(a)</code> <strong>must</strong> return a positive number, (and if one returns <code>0</code> so must the other) and vice versa. If you fail to adhere to the contract, crazy stuff happens. For example, you create a <code>TreeSet</code> and things end up out of order and this kind of code can start printing <code>false</code>:</p>\n<pre class=\"lang-java prettyprint-override\"><code>TreeSet&lt;YourBrokenItem&gt; set = new TreeSet&lt;&gt;();\nset.add(a);\nset.add(b);\nSystem.out.println(set.contains(a)); // prints false?\n</code></pre>\n<p>However, adhering to the contract (the commutativity) rule <strong>is not possible</strong> when you subclass and want to override definitions. Let's make it practical:</p>\n<pre class=\"lang-java prettyprint-override\"><code>class Parent implements Comparable&lt;Parent&gt; {\n  int x;\n\n  /** Sort on x */\n  @Override public int compareTo(Parent other) {\n    return Integer.compare(x, other.x);\n  }\n}\n\nclass Child extends Parent implements Comparable&lt;Child&gt; {\n  int y;\n\n  /** Sort on x first; if those are equal, sort on y */\n  @Override public int compareTo(Child other) {\n    int c = Integer.compare(x, other.x);\n    if (c != 0) return c;\n    return Integer.compare(y, other.y);\n  }\n}\n</code></pre>\n<p>The above code doesn't work for two reasons: [A] it can't be made to compile, and [B] even if you voodoo magic that away with generics casting, the code breaks the contract. And always will, you can't fix [B].</p>\n<p>So instead of delving deep on generics and working around it (which you can), it is a moot point - B cannot be worked around, so what you want is impossible, therefore there is no point explaining how to hack around so that the compiler accepts it.</p>\n<p>The reason it's not possible is the commutativity rule. Let's consider 3 instances:</p>\n<pre><code>Parent p = new Parent(10);\nChild c = new Child(10, 5);\nChild d = new Child(10, 20);\n</code></pre>\n<p>Your intent is very clearly that this happens:</p>\n<pre class=\"lang-java prettyprint-override\"><code>System.out.println(c.compareTo(d)); // prints -1\nSystem.out.println(d.compareTo(c)); // prints +1\n</code></pre>\n<p>However, what happens when p is involved? Remember, <code>Child</code> says that it is a subtype of <code>Parent</code> which means an instance of Child <strong>can do everything an instance of Parent can do, <em>and</em> more</strong>. One thing Parent can do, is compare itself to another instance of Parent. And instances of Child are also instances of Parent, so, you can compare a Parent to a Child and vice versa. Hence, <code>p.compareTo(a)</code> is valid. Similarly, you can make a <code>new TreeSet&lt;Parent&gt;()</code> and you can of course invoke <code>.add(new Child())</code> on that. After all, instances of Child are definitely also instances of Parent, that's what subclassing means.</p>\n<p>Thus:</p>\n<pre><code>p.compareTo(c); // This returns 0 - and you can't stop that from happening!\np.compareTo(d); // so does this\n\n// thus, given the above, this:\nc.compareTo(d);\n// MUST, BY CONTRACT, return 0!\n</code></pre>\n<p>Hence, what you want? Impossible. The contract of comparable forbids it.</p>\n<p>Effectively, with Comparable, you 'pick a level' and comparability is defined strictly on that level, and subclasses cannot change that. Whatever type in your type hierarchy decides to <code>implements Comparable</code>, that's the level. They set the baseline of the natural comparison for those things <strong>and subclasses cannot modify how that works at all</strong> without breaking the contract.</p>\n<p>What you probably want is to forget about natural order and use comparators instead. Every system that works on natural order (such as <code>TreeSet</code>, or <code>list.sort(Comparator.naturalOrder())</code> or <code>Collections.sort(list)</code> or <code>Arrays.binarySearch</code>, and so on), <em>also</em> has an overloaded variant that accepts a <code>Comparator&lt;T&gt;</code>.</p>\n<p>You <em>CAN</em> make a custom comparator that compares, specifically, children. You can even make a custom comparator that compares children <em>and</em> parents if you define the comparison operation properly (meaning, there is a complete order). For example, by saying that given equal <code>x</code> values, any <code>new Parent()</code> instance will always sort before any <code>new Child()</code>, regardless of Child's y value:</p>\n<pre><code>Comparator&lt;Parent&gt; myCustomComparator = (a, b) -&gt; {\n  int c = Integer.compare(a.x, b.x);\n  if (c != 0) return c; // x isn't equal so it controls.\n  if (a instanceof Child &amp;&amp; !(b instanceof Child)) return +1;\n  if (!(a instanceof Child) &amp;&amp; b instanceof Child) return -1;\n  if (!(a instanceof Child) &amp;&amp; !(b instanceof Child)) return 0;\n  int y1 = ((Child) a).y, y2 = ((Child) b).y;\n  return Integer.compare(y1, y2);\n};\n\nTreeSet&lt;Parent&gt; myAwesomeSelfSortingSet = new TreeSet&lt;Parent&gt;(myCustomComparator);\n// and voila.\n</code></pre>\n"}],"owner":{"account_id":26782958,"reputation":3,"user_id":20377538,"display_name":"yowkarii_3"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":257,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":74277665,"answer_count":1,"score":0,"last_activity_date":1667313870,"creation_date":1667311898,"question_id":74277248,"body_markdown":"I am creating subclass and have some class elements inside it. Now I want to override compareTo method from super class and use variables from subclass as argument in new compareTo method but I get error saying that the argument for compareTo method must be the same as in the superclass. \r\n\r\nIs there any solution to this problem? \r\n\r\nThanks in advance! \r\n\r\nSolutions that I tried are: \r\n\r\n1)just simply to write new method in subclass (not to override method from super class)\r\n2) create new compareTo method in superclass with arguments I want\r\n\r\nthis way program is working but I feel like that is not the correct way to fix this problem\r\n\r\nAnyone can suggest something or give advice about this?","title":"Problem with overriding compareTo method in subclass","body":"<p>I am creating subclass and have some class elements inside it. Now I want to override compareTo method from super class and use variables from subclass as argument in new compareTo method but I get error saying that the argument for compareTo method must be the same as in the superclass.</p>\n<p>Is there any solution to this problem?</p>\n<p>Thanks in advance!</p>\n<p>Solutions that I tried are:</p>\n<p>1)just simply to write new method in subclass (not to override method from super class)\n2) create new compareTo method in superclass with arguments I want</p>\n<p>this way program is working but I feel like that is not the correct way to fix this problem</p>\n<p>Anyone can suggest something or give advice about this?</p>\n"},{"tags":["java","reactive-programming","spring-webflux","inputstream","ffprobe"],"comments":[{"owner":{"account_id":1198292,"reputation":671,"user_id":1169535,"accept_rate":58,"display_name":"Stefania"},"score":0,"creation_date":1697121360,"post_id":74254494,"comment_id":136242337,"body_markdown":"I&#39;m having the same problem. Did you find any solutions?","body":"I&#39;m having the same problem. Did you find any solutions?"}],"owner":{"account_id":26776662,"reputation":13,"user_id":20372189,"display_name":"Einfari"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":735,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1667313834,"creation_date":1667144967,"question_id":74254494,"body_markdown":"Bear with my noobness, I am learning web-flux. I had this simple application that takes a video and extract the audio using FFprobe and FFmpeg, so I thought of redoing it reactively, but I am failing miserably... \r\n\r\nController:\r\n```\r\n@PostMapping(&quot;/upload&quot;)\r\npublic String upload(@RequestPart(&quot;file&quot;) Mono&lt;FilePart&gt; filePartMono, final Model model) {\r\n    Flux&lt;String&gt; filenameList = mediaComponent.extractAudio(filePartMono);\r\n    model.addAttribute(&quot;filenameList&quot;, new ReactiveDataDriverContextVariable(filenameList));\r\n    return &quot;download&quot;;\r\n}\r\n```\r\n\r\nFunction to get audio streams out of the video:\r\n```\r\npublic Mono&lt;FFprobeResult&gt; getAudioStreams(InputStream inputStream) {\r\n    try {\r\n        return Mono.just(FFprobe.atPath(FFprobePath)\r\n                .setShowStreams(true)\r\n                .setSelectStreams(StreamType.AUDIO)\r\n                .setLogLevel(LogLevel.INFO)\r\n                .setInput(inputStream)\r\n                .execute());\r\n    } catch (JaffreeException e) {\r\n        log.error(e.getMessage(), e);\r\n        return Mono.error(new MediaException(&quot;Audio formats could not be identified.&quot;));\r\n    }\r\n}\r\n```\r\n\r\nAttempt 1:\r\n```\r\npublic Flux&lt;String&gt; extractAudio(Mono&lt;FilePart&gt; filePartMono) {\r\n    filePartMono.flatMapMany(Part::content)\r\n            .map(dataBuffer -&gt; dataBuffer.asInputStream(true))\r\n            .flatMap(this::getAudioStreams)\r\n            .subscribe(System.out::println);\r\n    ...\r\n}\r\n```\r\n\r\nAttempt 2:\r\n```\r\npublic Flux&lt;String&gt; extractAudio(Mono&lt;FilePart&gt; filePartMono) {\r\n    filePartMono.flatMapMany(Part::content)\r\n            .reduce(InputStream.nullInputStream(), (inputStream, dataBuffer) -&gt; new SequenceInputStream(\r\n                    inputStream, dataBuffer.asInputStream()\r\n            ))\r\n            .flatMap(this::getAudioStreams)\r\n            .subscribe(System.out::println);\r\n    ...\r\n}\r\n```\r\n\r\nAttempt 3:\r\n```\r\npublic Flux&lt;String&gt; extractAudio(Mono&lt;FilePart&gt; filePartMono) {\r\n    DataBufferUtils.write(filePartMono.flatMapMany(Part::content), OutputStream.nullOutputStream())\r\n            .map(dataBuffer -&gt; dataBuffer.asInputStream(true))\r\n            .flatMap(this::getAudioStreams)\r\n            .subscribe(System.out::println);\r\n    ...\r\n}\r\n```\r\n\r\nAttempt 1 and 3 seems to be the same in the end, FFprobe complains as follows:\r\n```\r\n2022-10-30 11:24:30.292  WARN 79049 --- [         StdErr] c.g.k.jaffree.process.BaseStdReader      : [mov,mp4,m4a,3gp,3g2,mj2 @ 0x7f9162702340] [warning] STSZ atom truncated\r\n2022-10-30 11:24:30.292 ERROR 79049 --- [         StdErr] c.g.k.jaffree.process.BaseStdReader      : [mov,mp4,m4a,3gp,3g2,mj2 @ 0x7f9162702340] [error] stream 0, contradictionary STSC and STCO\r\n2022-10-30 11:24:30.292 ERROR 79049 --- [         StdErr] c.g.k.jaffree.process.BaseStdReader      : [mov,mp4,m4a,3gp,3g2,mj2 @ 0x7f9162702340] [error] error reading header\r\n2022-10-30 11:24:30.294 ERROR 79049 --- [         StdErr] c.g.k.jaffree.process.BaseStdReader      : [error] tcp://127.0.0.1:51532: Invalid data found when processing input\r\n2022-10-30 11:24:30.295  INFO 79049 --- [oundedElastic-3] c.g.k.jaffree.process.ProcessHandler     : Process has finished with status: 1\r\n2022-10-30 11:24:30.409 ERROR 79049 --- [oundedElastic-3] c.e.s.application.MediaComponent         : Process execution has ended with non-zero status: 1. Check logs for detailed error message.\r\n```\r\n\r\nAttempt 2 produces multiple of these:\r\n```\r\nException in thread &quot;Runnable-0&quot; java.lang.StackOverflowError\r\n\tat java.base/java.io.SequenceInputStream.read(SequenceInputStream.java:198)\r\n```\r\n\r\nNow, after some more research, I had another fourth attempt:\r\n\r\n```\r\npublic Flux&lt;String&gt; extractAudio(Mono&lt;FilePart&gt; filePartMono) {\r\n    try {\r\n        FFprobeResult FFprobeResult = getAudioStreams(getInputStreamFromFluxDataBuffer(filePartMono.flatMapMany(Part::content))).subscribe(System.out::println);\r\n    return Flux.just(&quot;file &quot;, &quot;file2&quot;).delayElements(Duration.ofMinutes(1));\r\n    } catch (IOException e) {\r\n        log.error(e.getMessage(), e);\r\n        return Flux.error(new MediaException(&quot;Audio extraction failed&quot;));\r\n    }\r\n}\r\n\r\npublic InputStream getInputStreamFromFluxDataBuffer(Flux&lt;DataBuffer&gt; dataBuffer) throws IOException {\r\n    PipedOutputStream pipedOutputStream = new PipedOutputStream();\r\n    PipedInputStream pipedInputStream = new PipedInputStream(pipedOutputStream);\r\n    DataBufferUtils.write(dataBuffer, pipedOutputStream)\r\n        .subscribeOn(Schedulers.boundedElastic())\r\n        .doOnComplete(() -&gt; {\r\n            try {\r\n                pipedOutputStream.close();\r\n            } catch (IOException e) {\r\n                log.error(e.getMessage(), e);\r\n            }\r\n        })\r\n        .subscribe(DataBufferUtils.releaseConsumer());\r\n    return pipedInputStream;\r\n}\r\n\r\n```\r\n\r\nHowever, this time FFprobe starts and never ends, as if the InputStream was endless..\r\n\r\nCould anybody point me in the right direction? What am I doing wrong? By the way, I am outputting to console just to see a result, but in the end I need to take all the outputted streams and pass them as arguments to another function that will finally extract the audio, so I need to figure out that as well.\r\n\r\nThank you in advance.","title":"How do I get an InputStream out of a Mono&lt;FilePart&gt;?","body":"<p>Bear with my noobness, I am learning web-flux. I had this simple application that takes a video and extract the audio using FFprobe and FFmpeg, so I thought of redoing it reactively, but I am failing miserably...</p>\n<p>Controller:</p>\n<pre><code>@PostMapping(&quot;/upload&quot;)\npublic String upload(@RequestPart(&quot;file&quot;) Mono&lt;FilePart&gt; filePartMono, final Model model) {\n    Flux&lt;String&gt; filenameList = mediaComponent.extractAudio(filePartMono);\n    model.addAttribute(&quot;filenameList&quot;, new ReactiveDataDriverContextVariable(filenameList));\n    return &quot;download&quot;;\n}\n</code></pre>\n<p>Function to get audio streams out of the video:</p>\n<pre><code>public Mono&lt;FFprobeResult&gt; getAudioStreams(InputStream inputStream) {\n    try {\n        return Mono.just(FFprobe.atPath(FFprobePath)\n                .setShowStreams(true)\n                .setSelectStreams(StreamType.AUDIO)\n                .setLogLevel(LogLevel.INFO)\n                .setInput(inputStream)\n                .execute());\n    } catch (JaffreeException e) {\n        log.error(e.getMessage(), e);\n        return Mono.error(new MediaException(&quot;Audio formats could not be identified.&quot;));\n    }\n}\n</code></pre>\n<p>Attempt 1:</p>\n<pre><code>public Flux&lt;String&gt; extractAudio(Mono&lt;FilePart&gt; filePartMono) {\n    filePartMono.flatMapMany(Part::content)\n            .map(dataBuffer -&gt; dataBuffer.asInputStream(true))\n            .flatMap(this::getAudioStreams)\n            .subscribe(System.out::println);\n    ...\n}\n</code></pre>\n<p>Attempt 2:</p>\n<pre><code>public Flux&lt;String&gt; extractAudio(Mono&lt;FilePart&gt; filePartMono) {\n    filePartMono.flatMapMany(Part::content)\n            .reduce(InputStream.nullInputStream(), (inputStream, dataBuffer) -&gt; new SequenceInputStream(\n                    inputStream, dataBuffer.asInputStream()\n            ))\n            .flatMap(this::getAudioStreams)\n            .subscribe(System.out::println);\n    ...\n}\n</code></pre>\n<p>Attempt 3:</p>\n<pre><code>public Flux&lt;String&gt; extractAudio(Mono&lt;FilePart&gt; filePartMono) {\n    DataBufferUtils.write(filePartMono.flatMapMany(Part::content), OutputStream.nullOutputStream())\n            .map(dataBuffer -&gt; dataBuffer.asInputStream(true))\n            .flatMap(this::getAudioStreams)\n            .subscribe(System.out::println);\n    ...\n}\n</code></pre>\n<p>Attempt 1 and 3 seems to be the same in the end, FFprobe complains as follows:</p>\n<pre><code>2022-10-30 11:24:30.292  WARN 79049 --- [         StdErr] c.g.k.jaffree.process.BaseStdReader      : [mov,mp4,m4a,3gp,3g2,mj2 @ 0x7f9162702340] [warning] STSZ atom truncated\n2022-10-30 11:24:30.292 ERROR 79049 --- [         StdErr] c.g.k.jaffree.process.BaseStdReader      : [mov,mp4,m4a,3gp,3g2,mj2 @ 0x7f9162702340] [error] stream 0, contradictionary STSC and STCO\n2022-10-30 11:24:30.292 ERROR 79049 --- [         StdErr] c.g.k.jaffree.process.BaseStdReader      : [mov,mp4,m4a,3gp,3g2,mj2 @ 0x7f9162702340] [error] error reading header\n2022-10-30 11:24:30.294 ERROR 79049 --- [         StdErr] c.g.k.jaffree.process.BaseStdReader      : [error] tcp://127.0.0.1:51532: Invalid data found when processing input\n2022-10-30 11:24:30.295  INFO 79049 --- [oundedElastic-3] c.g.k.jaffree.process.ProcessHandler     : Process has finished with status: 1\n2022-10-30 11:24:30.409 ERROR 79049 --- [oundedElastic-3] c.e.s.application.MediaComponent         : Process execution has ended with non-zero status: 1. Check logs for detailed error message.\n</code></pre>\n<p>Attempt 2 produces multiple of these:</p>\n<pre><code>Exception in thread &quot;Runnable-0&quot; java.lang.StackOverflowError\n    at java.base/java.io.SequenceInputStream.read(SequenceInputStream.java:198)\n</code></pre>\n<p>Now, after some more research, I had another fourth attempt:</p>\n<pre><code>public Flux&lt;String&gt; extractAudio(Mono&lt;FilePart&gt; filePartMono) {\n    try {\n        FFprobeResult FFprobeResult = getAudioStreams(getInputStreamFromFluxDataBuffer(filePartMono.flatMapMany(Part::content))).subscribe(System.out::println);\n    return Flux.just(&quot;file &quot;, &quot;file2&quot;).delayElements(Duration.ofMinutes(1));\n    } catch (IOException e) {\n        log.error(e.getMessage(), e);\n        return Flux.error(new MediaException(&quot;Audio extraction failed&quot;));\n    }\n}\n\npublic InputStream getInputStreamFromFluxDataBuffer(Flux&lt;DataBuffer&gt; dataBuffer) throws IOException {\n    PipedOutputStream pipedOutputStream = new PipedOutputStream();\n    PipedInputStream pipedInputStream = new PipedInputStream(pipedOutputStream);\n    DataBufferUtils.write(dataBuffer, pipedOutputStream)\n        .subscribeOn(Schedulers.boundedElastic())\n        .doOnComplete(() -&gt; {\n            try {\n                pipedOutputStream.close();\n            } catch (IOException e) {\n                log.error(e.getMessage(), e);\n            }\n        })\n        .subscribe(DataBufferUtils.releaseConsumer());\n    return pipedInputStream;\n}\n\n</code></pre>\n<p>However, this time FFprobe starts and never ends, as if the InputStream was endless..</p>\n<p>Could anybody point me in the right direction? What am I doing wrong? By the way, I am outputting to console just to see a result, but in the end I need to take all the outputted streams and pass them as arguments to another function that will finally extract the audio, so I need to figure out that as well.</p>\n<p>Thank you in advance.</p>\n"}],"has_more":true,"quota_max":10000,"quota_remaining":9076,"page":916,"page_size":100}
