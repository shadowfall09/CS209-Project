{"items":[{"tags":["java"],"comments":[{"owner":{"account_id":63368,"reputation":443997,"user_id":187606,"accept_rate":90,"display_name":"Pekka"},"score":0,"creation_date":1307286333,"post_id":6243698,"comment_id":7279076,"body_markdown":"This will completely depend on the kind of machine  used. You will need to benchmark it.","body":"This will completely depend on the kind of machine  used. You will need to benchmark it."},{"owner":{"account_id":5847772,"reputation":8057,"user_id":5361412,"accept_rate":83,"display_name":"Kellen Stuart"},"score":1,"creation_date":1498587249,"post_id":6243698,"comment_id":76555050,"body_markdown":"Adding code to benchmark will add extra steps to your loop, making your benchmark inaccurate by design.","body":"Adding code to benchmark will add extra steps to your loop, making your benchmark inaccurate by design."}],"answers":[{"tags":[],"owner":{"account_id":269622,"reputation":58936,"user_id":559070,"accept_rate":74,"display_name":"Harry Joy"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1644473656,"creation_date":1307286338,"answer_id":6243709,"question_id":6243698,"body_markdown":"This depends on the operation inside the loop so what you should do is record the start time of the loop and end time of the loop and then calculate the difference. You will get the time the loop takes to finish. Example:- \r\n\r\n    long st = System.currentTimeMillis();\r\n\r\n    for(int i=0; i &lt; 1000000; i++) {\r\n        // --- loop operation\r\n    }\r\n\r\n    System.out.print(&quot;time to execute loop&quot;+\r\n                         ((System.currentTimeMillis() - st) /1000));","title":"How much time does it take to execute a loop?","body":"<p>This depends on the operation inside the loop so what you should do is record the start time of the loop and end time of the loop and then calculate the difference. You will get the time the loop takes to finish. Example:-</p>\n<pre><code>long st = System.currentTimeMillis();\n\nfor(int i=0; i &lt; 1000000; i++) {\n    // --- loop operation\n}\n\nSystem.out.print(&quot;time to execute loop&quot;+\n                     ((System.currentTimeMillis() - st) /1000));\n</code></pre>\n"},{"tags":[],"owner":{"account_id":304562,"reputation":12355,"user_id":614141,"accept_rate":96,"display_name":"javing"},"down_vote_count":0,"up_vote_count":15,"is_accepted":true,"score":15,"last_activity_date":1307286339,"creation_date":1307286339,"answer_id":6243710,"question_id":6243698,"body_markdown":"Here you can try this:\r\n\r\n    long startTime = System.currentTimeMillis();\r\n    long endTime = 0;\r\n    \r\n        for(int i=0; i &lt; 1000000; i++) {\r\n        \r\n        //Something\r\n        \r\n        }\r\n    \r\n    endTime = System.currentTimeMillis();\r\n    \r\n    long timeneeded =  ((startTime - endTime) /1000);","title":"How much time does it take to execute a loop?","body":"<p>Here you can try this:</p>\n\n<pre><code>long startTime = System.currentTimeMillis();\nlong endTime = 0;\n\n    for(int i=0; i &lt; 1000000; i++) {\n\n    //Something\n\n    }\n\nendTime = System.currentTimeMillis();\n\nlong timeneeded =  ((startTime - endTime) /1000);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":47283,"reputation":703817,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"down_vote_count":0,"up_vote_count":13,"is_accepted":false,"score":13,"last_activity_date":1372891470,"creation_date":1307287356,"answer_id":6243806,"question_id":6243698,"body_markdown":"You need to be very careful when writing micro-benchmarks in Java.  For instance:\r\n\r\n  - If the JIT compiler can figure out that the loop body doesn&#39;t affect the results of the code, it can optimize it away.  For instance:\r\n\r\n        for (int i = 0; i &lt; 1000000; i++) {\r\n           int j = i + 1;\r\n        }\r\n\r\n    is likely to &quot;run&quot; very fast.\r\n\r\n  - Code runs a lot faster after it has been JIT compiled.\r\n\r\n  - Code can *appear* to run a lot slower *while* it is being JIT compiled.\r\n\r\n  - If the code allocates objects, then you need to take account of potential variability of measured performance due to the GC running, the initial or maximum heap size being too small and so on.\r\n\r\nAnd of course, performance will depend on your hardware, your operating system, the version and patch level of your JVM, and your JVM launch options.\r\n  ","title":"How much time does it take to execute a loop?","body":"<p>You need to be very careful when writing micro-benchmarks in Java.  For instance:</p>\n\n<ul>\n<li><p>If the JIT compiler can figure out that the loop body doesn't affect the results of the code, it can optimize it away.  For instance:</p>\n\n<pre><code>for (int i = 0; i &lt; 1000000; i++) {\n   int j = i + 1;\n}\n</code></pre>\n\n<p>is likely to \"run\" very fast.</p></li>\n<li><p>Code runs a lot faster after it has been JIT compiled.</p></li>\n<li><p>Code can <em>appear</em> to run a lot slower <em>while</em> it is being JIT compiled.</p></li>\n<li><p>If the code allocates objects, then you need to take account of potential variability of measured performance due to the GC running, the initial or maximum heap size being too small and so on.</p></li>\n</ul>\n\n<p>And of course, performance will depend on your hardware, your operating system, the version and patch level of your JVM, and your JVM launch options.</p>\n"},{"tags":[],"owner":{"account_id":23121,"reputation":527346,"user_id":57695,"accept_rate":75,"display_name":"Peter Lawrey"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1307299914,"creation_date":1307299914,"answer_id":6245057,"question_id":6243698,"body_markdown":"One way to time an operation is to take an average with nanoTime() You may want to adjust the number of iterations and you will get less variation with an average.  nanoTime is better than currentTimeMillis in that it is more accurate and monotonically increasing (it won&#39;t go backwards while the application is running)\r\n\r\n    long start = System.nanoTime();\r\n    int runs = 1000*1000;\r\n    for(int i=0;i&lt;runs;i++) {\r\n       // do test\r\n    }\r\n    long time = System.nanoTime() - start;\r\n    System.out.printf(&quot;The average time taken was %.1f ns%n&quot;, (double) time / runs);\r\n\r\nUsing printf allows you to format the result.  You can divide by 1000 to get micro-seconds or 1000000 for micro-seconds.","title":"How much time does it take to execute a loop?","body":"<p>One way to time an operation is to take an average with nanoTime() You may want to adjust the number of iterations and you will get less variation with an average.  nanoTime is better than currentTimeMillis in that it is more accurate and monotonically increasing (it won't go backwards while the application is running)</p>\n\n<pre><code>long start = System.nanoTime();\nint runs = 1000*1000;\nfor(int i=0;i&lt;runs;i++) {\n   // do test\n}\nlong time = System.nanoTime() - start;\nSystem.out.printf(\"The average time taken was %.1f ns%n\", (double) time / runs);\n</code></pre>\n\n<p>Using printf allows you to format the result.  You can divide by 1000 to get micro-seconds or 1000000 for micro-seconds.</p>\n"},{"tags":[],"owner":{"account_id":16877594,"reputation":124,"user_id":12204594,"display_name":"Saykat"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1573127486,"creation_date":1573127486,"answer_id":58748180,"question_id":6243698,"body_markdown":"divide the number of iteration by 10^8 and you will get the answer in milliseconds\r\n.","title":"How much time does it take to execute a loop?","body":"<p>divide the number of iteration by 10^8 and you will get the answer in milliseconds\n.</p>\n"},{"tags":[],"owner":{"account_id":15717080,"reputation":49,"user_id":11341026,"display_name":"Shivam Anand"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1574348242,"creation_date":1574348242,"answer_id":58977806,"question_id":6243698,"body_markdown":"This java snippet will be very helpful to you.\r\nIt is a modified version of above answer\r\n\r\n    long startTime = System.currentTimeMillis ();\r\n        long startTime_2 = System.nanoTime ();\r\n        long endTime = 0;\r\n        int k = 0;\r\n    \r\n        for (int i = 0; i &lt; 387420489; i++)\r\n          {\r\n          }\r\n    \r\n        endTime = System.currentTimeMillis ();\r\n        long endTime_2 = System.nanoTime ();\r\n    \r\n        long timeneeded = (-1) * (startTime - endTime);\r\n        long timeneeded_2 = (-1) * (startTime_2 - endTime_2);\r\n        System.out.println (timeneeded + &quot; in milliseconds &quot; + timeneeded_2+&quot; time in nanoseconds &quot; );","title":"How much time does it take to execute a loop?","body":"<p>This java snippet will be very helpful to you.\nIt is a modified version of above answer</p>\n\n<pre><code>long startTime = System.currentTimeMillis ();\n    long startTime_2 = System.nanoTime ();\n    long endTime = 0;\n    int k = 0;\n\n    for (int i = 0; i &lt; 387420489; i++)\n      {\n      }\n\n    endTime = System.currentTimeMillis ();\n    long endTime_2 = System.nanoTime ();\n\n    long timeneeded = (-1) * (startTime - endTime);\n    long timeneeded_2 = (-1) * (startTime_2 - endTime_2);\n    System.out.println (timeneeded + \" in milliseconds \" + timeneeded_2+\" time in nanoseconds \" );\n</code></pre>\n"}],"owner":{"account_id":304562,"reputation":12355,"user_id":614141,"accept_rate":96,"display_name":"javing"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":43242,"favorite_count":0,"down_vote_count":0,"up_vote_count":15,"accepted_answer_id":6243710,"answer_count":6,"score":15,"last_activity_date":1644473656,"creation_date":1307286222,"question_id":6243698,"body_markdown":"Is there any way to know how many seconds does it take a loop to execute in java? \r\n\r\nFor example:\r\n\r\n    for(int i=0; i &lt; 1000000; i++) {\r\n    \r\n    //Do some difficult task goes in here\r\n    \r\n    }\r\n\r\nIt does not have to be accurate 100%, but its just to have an idea of how long it could take. The algorithm inside is some kind of key generator that writes to a .txt file. I expect it to take even a few mins, so for my first test i want to count the seconds.\r\n\r\n\r\n\r\n\r\n\r\n","title":"How much time does it take to execute a loop?","body":"<p>Is there any way to know how many seconds does it take a loop to execute in java? </p>\n\n<p>For example:</p>\n\n<pre><code>for(int i=0; i &lt; 1000000; i++) {\n\n//Do some difficult task goes in here\n\n}\n</code></pre>\n\n<p>It does not have to be accurate 100%, but its just to have an idea of how long it could take. The algorithm inside is some kind of key generator that writes to a .txt file. I expect it to take even a few mins, so for my first test i want to count the seconds.</p>\n"},{"tags":["java","spring","neo4j","cypher"],"answers":[{"tags":[],"owner":{"account_id":1924160,"reputation":5335,"user_id":1734996,"accept_rate":85,"display_name":"Graphileon"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1631256309,"creation_date":1631256309,"answer_id":69128263,"question_id":69127987,"body_markdown":"If you specify edge types the should have a colon, so \r\n[:STEPTAKER] and [:CONTACT]\r\n\r\nAlso , when returning multiple columns, separate them by a comma\r\n\r\nRETURN a.name AS name,  s.count AS count","title":"throws NoRootNodeMappingException while projecting/mapping neo4j query result to an interface or DTO class","body":"<p>If you specify edge types the should have a colon, so\n[:STEPTAKER] and [:CONTACT]</p>\n<p>Also , when returning multiple columns, separate them by a comma</p>\n<p>RETURN a.name AS name,  s.count AS count</p>\n"},{"tags":[],"owner":{"account_id":24211790,"reputation":1,"user_id":18168204,"display_name":"Huw G"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1644473304,"creation_date":1644473304,"answer_id":71060505,"question_id":69127987,"body_markdown":"https://docs.spring.io/spring-data/neo4j/docs/6.2.0/reference/html/#projections.interfaces\r\n\r\nFrom the above link:\r\n\r\n&quot;The important bit here is that the properties defined here exactly match properties in the aggregate root&quot;\r\n\r\nI think that means your StepList interface has to have a subset of properties from your root class (which I assume is User).","title":"throws NoRootNodeMappingException while projecting/mapping neo4j query result to an interface or DTO class","body":"<p><a href=\"https://docs.spring.io/spring-data/neo4j/docs/6.2.0/reference/html/#projections.interfaces\" rel=\"nofollow noreferrer\">https://docs.spring.io/spring-data/neo4j/docs/6.2.0/reference/html/#projections.interfaces</a></p>\n<p>From the above link:</p>\n<p>&quot;The important bit here is that the properties defined here exactly match properties in the aggregate root&quot;</p>\n<p>I think that means your StepList interface has to have a subset of properties from your root class (which I assume is User).</p>\n"}],"owner":{"account_id":7300708,"reputation":161,"user_id":5563585,"display_name":"Noor Khan"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":621,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1644473304,"creation_date":1631254376,"question_id":69127987,"body_markdown":"my query is very simple and the projection I am doing is following guidelines given in [https://docs.spring.io/spring-data/neo4j/docs/current/reference/html/#projections.interfaces](Spring Data Neo4J Projection) documentation.\r\nMy Code: \r\n```\r\n@Query(&quot;MATCH (User {mobile:$mobile})-[:CONTACT]-(n:User)-[:STEPTAKER]-(s:Step) RETURN n.name AS name, s.count AS count&quot;)\r\n    public List&lt;StepList&gt; findAllStepByMobile(String mobile);\r\n    \r\n\r\ninterface StepList{\r\n    String getName();\r\n    int getCount();\r\n}\r\n```\r\nThe error:\r\n2021-09-10 10:36:25.180 ERROR 18088 --- [nio-8080-exec-7] o.a.c.c.C.[.[.[/].[dispatcherServlet]    : Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed; nested exception is org.springframework.data.neo4j.core.mapping.NoRootNodeMappingException: Could not find mappable nodes or relationships inside Record&lt;{s.count: 400}&gt; for org.springframework.data.neo4j.core.mapping.DefaultNeo4jPersistentEntity@305b43ca] with root cause\r\n\r\n*org.springframework.data.neo4j.core.mapping.NoRootNodeMappingException: Could not find mappable nodes or relationships inside Record&lt;{s.count: 400}&gt; for org.springframework.data.neo4j.core.mapping.DefaultNeo4jPersistentEntity@305b43ca*","title":"throws NoRootNodeMappingException while projecting/mapping neo4j query result to an interface or DTO class","body":"<p>my query is very simple and the projection I am doing is following guidelines given in [https://docs.spring.io/spring-data/neo4j/docs/current/reference/html/#projections.interfaces](Spring Data Neo4J Projection) documentation.\nMy Code:</p>\n<pre><code>@Query(&quot;MATCH (User {mobile:$mobile})-[:CONTACT]-(n:User)-[:STEPTAKER]-(s:Step) RETURN n.name AS name, s.count AS count&quot;)\n    public List&lt;StepList&gt; findAllStepByMobile(String mobile);\n    \n\ninterface StepList{\n    String getName();\n    int getCount();\n}\n</code></pre>\n<p>The error:\n2021-09-10 10:36:25.180 ERROR 18088 --- [nio-8080-exec-7] o.a.c.c.C.[.[.[/].[dispatcherServlet]    : Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed; nested exception is org.springframework.data.neo4j.core.mapping.NoRootNodeMappingException: Could not find mappable nodes or relationships inside Record&lt;{s.count: 400}&gt; for org.springframework.data.neo4j.core.mapping.DefaultNeo4jPersistentEntity@305b43ca] with root cause</p>\n<p><em>org.springframework.data.neo4j.core.mapping.NoRootNodeMappingException: Could not find mappable nodes or relationships inside Record&lt;{s.count: 400}&gt; for org.springframework.data.neo4j.core.mapping.DefaultNeo4jPersistentEntity@305b43ca</em></p>\n"},{"tags":["java","spring","spring-boot","tomcat"],"comments":[{"owner":{"account_id":3192259,"reputation":117609,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1644312139,"post_id":71030712,"comment_id":125566607,"body_markdown":"You cannot &quot;just&quot; upgrade 2 parts of Tomcat you will need to update everything. Assuming maven add `&lt;tomcat.version&gt;9.0.58&lt;/tomcat.version&gt;` to the `&lt;properties&gt;` section of your `pom.xml` to properly manage the dependencies. I would also suggest not to use Tomcat DBCP but something like HikariCP for a connection pool.","body":"You cannot &quot;just&quot; upgrade 2 parts of Tomcat you will need to update everything. Assuming maven add <code>&lt;tomcat.version&gt;9.0.58&lt;&#47;tomcat.version&gt;</code> to the <code>&lt;properties&gt;</code> section of your <code>pom.xml</code> to properly manage the dependencies. I would also suggest not to use Tomcat DBCP but something like HikariCP for a connection pool."},{"owner":{"account_id":15069659,"reputation":11,"user_id":10875616,"display_name":"Harsh Palan"},"score":0,"creation_date":1644313990,"post_id":71030712,"comment_id":125567336,"body_markdown":"Yes, I have already added `&lt;tomcat.version&gt;9.0.58&lt;/tomcat.version&gt;` in pom.xml. During the build, there is a compilation error mentioned above.","body":"Yes, I have already added <code>&lt;tomcat.version&gt;9.0.58&lt;&#47;tomcat.version&gt;</code> in pom.xml. During the build, there is a compilation error mentioned above."},{"owner":{"account_id":3192259,"reputation":117609,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1644315351,"post_id":71030712,"comment_id":125567927,"body_markdown":"I doubt it is a compilation issue. Looking at the stack trace it is devtools that tries to restart things. This is probably the culprit as you are trying to change the dependencies while the app is already running.","body":"I doubt it is a compilation issue. Looking at the stack trace it is devtools that tries to restart things. This is probably the culprit as you are trying to change the dependencies while the app is already running."},{"owner":{"account_id":15069659,"reputation":11,"user_id":10875616,"display_name":"Harsh Palan"},"score":0,"creation_date":1644317289,"post_id":71030712,"comment_id":125568726,"body_markdown":"I had stopped the application, updated the `pom.xml`, and reloaded the maven the changes in Intellij Idea. After the changes got updated, I started the application.","body":"I had stopped the application, updated the <code>pom.xml</code>, and reloaded the maven the changes in Intellij Idea. After the changes got updated, I started the application."},{"owner":{"account_id":3192259,"reputation":117609,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1644317612,"post_id":71030712,"comment_id":125568853,"body_markdown":"What happens if you run without devtools? Please add your `pom.xml` to your question.","body":"What happens if you run without devtools? Please add your <code>pom.xml</code> to your question."},{"owner":{"account_id":16269349,"reputation":13452,"user_id":11748454,"display_name":"Piotr P. Karwasz"},"score":0,"creation_date":1644508226,"post_id":71030712,"comment_id":125630557,"body_markdown":"This is a bug, I [submitted a PR](https://github.com/apache/commons-dbcp/pull/167) to the `commons-dbcp` project.","body":"This is a bug, I <a href=\"https://github.com/apache/commons-dbcp/pull/167\" rel=\"nofollow noreferrer\">submitted a PR</a> to the <code>commons-dbcp</code> project."}],"answers":[{"tags":[],"owner":{"account_id":15069659,"reputation":11,"user_id":10875616,"display_name":"Harsh Palan"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1644473037,"creation_date":1644473037,"answer_id":71060464,"question_id":71030712,"body_markdown":"This issue was happening when we were trying to create a BasicDataSource \r\n`BasicDataSource dataSource = new BasicDataSource();` which was imported from `import org.apache.tomcat.dbcp.dbcp2.BasicDataSource;`\r\n\r\nSo we found a workaround to remove the tomcat dbcp dependency by excluding it from spring-boot starter tomcat and tomcat jdbc.\r\n\r\n```\r\n&lt;dependency&gt;\r\n\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t&lt;artifactId&gt;spring-boot-starter-tomcat&lt;/artifactId&gt;\r\n\t&lt;scope&gt;provided&lt;/scope&gt;\r\n\t&lt;exclusions&gt;\r\n\t\t&lt;exclusion&gt;\r\n\t\t\t&lt;groupId&gt;org.apache.tomcat&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;tomcat-dbcp&lt;/artifactId&gt;\r\n\t\t&lt;/exclusion&gt;\r\n\t&lt;/exclusions&gt;\r\n&lt;/dependency&gt;\r\n\r\n&lt;dependency&gt;\r\n\t&lt;groupId&gt;org.apache.tomcat&lt;/groupId&gt;\r\n\t&lt;artifactId&gt;tomcat-jdbc&lt;/artifactId&gt;\r\n&lt;/dependency&gt;\r\n```\r\n\r\nand Replacing the datasource to `org.apache.tomcat.jdbc.pool.DataSource dataSource = new org.apache.tomcat.jdbc.pool.DataSource();`\r\n","title":"Tomcat and Tomcat dbcp issue after upgrade to v9.0.58","body":"<p>This issue was happening when we were trying to create a BasicDataSource\n<code>BasicDataSource dataSource = new BasicDataSource();</code> which was imported from <code>import org.apache.tomcat.dbcp.dbcp2.BasicDataSource;</code></p>\n<p>So we found a workaround to remove the tomcat dbcp dependency by excluding it from spring-boot starter tomcat and tomcat jdbc.</p>\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-boot-starter-tomcat&lt;/artifactId&gt;\n    &lt;scope&gt;provided&lt;/scope&gt;\n    &lt;exclusions&gt;\n        &lt;exclusion&gt;\n            &lt;groupId&gt;org.apache.tomcat&lt;/groupId&gt;\n                &lt;artifactId&gt;tomcat-dbcp&lt;/artifactId&gt;\n        &lt;/exclusion&gt;\n    &lt;/exclusions&gt;\n&lt;/dependency&gt;\n\n&lt;dependency&gt;\n    &lt;groupId&gt;org.apache.tomcat&lt;/groupId&gt;\n    &lt;artifactId&gt;tomcat-jdbc&lt;/artifactId&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>and Replacing the datasource to <code>org.apache.tomcat.jdbc.pool.DataSource dataSource = new org.apache.tomcat.jdbc.pool.DataSource();</code></p>\n"}],"owner":{"account_id":15069659,"reputation":11,"user_id":10875616,"display_name":"Harsh Palan"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":945,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":71060464,"answer_count":1,"score":1,"last_activity_date":1644473037,"creation_date":1644309044,"question_id":71030712,"body_markdown":"I&#39;m getting this issue when upgrading Tomcat and Tomcat DBCP from v9.0.54 to v.9.0.58 with Java 11.\r\n```\r\nError starting ApplicationContext. To display the conditions report re-run your application with &#39;debug&#39; enabled.\r\n2022-02-08T08:24:15,900Z ERROR [tartedMain] SpringApplication [SpringApplication.java:854] Application run failed\r\norg.springframework.jmx.export.UnableToRegisterMBeanException: Unable to register MBean [org.apache.tomcat.dbcp.dbcp2.BasicDataSource@3b60547f] with key &#39;datasource&#39;; nested exception is javax.management.NotCompliantMBeanException: org.apache.tomcat.dbcp.dbcp2.BasicDataSourceMXBean: Method org.apache.tomcat.dbcp.dbcp2.DataSourceMXBean.getSoftMinEvictableIdleDuration has parameter or return type that cannot be translated into an open type\r\n\tat org.springframework.jmx.export.MBeanExporter.registerBeanNameOrInstance(MBeanExporter.java:626)\r\n\tat org.springframework.jmx.export.MBeanExporter.lambda$registerBeans$2(MBeanExporter.java:552)\r\n\tat java.base/java.util.HashMap.forEach(HashMap.java:1336)\r\n\tat org.springframework.jmx.export.MBeanExporter.registerBeans(MBeanExporter.java:552)\r\n\tat org.springframework.jmx.export.MBeanExporter.afterSingletonsInstantiated(MBeanExporter.java:435)\r\n\tat org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:972)\r\n\tat org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:918)\r\n\tat org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:583)\r\n\tat org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:145)\r\n\tat org.springframework.boot.SpringApplication.refresh(SpringApplication.java:765)\r\n\tat org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:445)\r\n\tat org.springframework.boot.SpringApplication.run(SpringApplication.java:338)\r\n\tat org.springframework.boot.SpringApplication.run(SpringApplication.java:1354)\r\n\tat org.springframework.boot.SpringApplication.run(SpringApplication.java:1343)\r\n\tat com.wk.gbs.intakeportal.IntakePortalWarApplication.main(IntakePortalWarApplication.java:30)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:566)\r\n\tat org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:49)\r\nCaused by: javax.management.NotCompliantMBeanException: org.apache.tomcat.dbcp.dbcp2.BasicDataSourceMXBean: Method org.apache.tomcat.dbcp.dbcp2.DataSourceMXBean.getSoftMinEvictableIdleDuration has parameter or return type that cannot be translated into an open type\r\n\tat java.management/com.sun.jmx.mbeanserver.Introspector.throwException(Introspector.java:467)\r\n\tat java.management/com.sun.jmx.mbeanserver.MBeanAnalyzer.&lt;init&gt;(MBeanAnalyzer.java:120)\r\n\tat java.management/com.sun.jmx.mbeanserver.MBeanAnalyzer.analyzer(MBeanAnalyzer.java:102)\r\n\tat java.management/com.sun.jmx.mbeanserver.MXBeanIntrospector.getAnalyzer(MXBeanIntrospector.java:74)\r\n\tat java.management/com.sun.jmx.mbeanserver.MBeanIntrospector.getPerInterface(MBeanIntrospector.java:192)\r\n\tat java.management/com.sun.jmx.mbeanserver.MBeanSupport.&lt;init&gt;(MBeanSupport.java:138)\r\n\tat java.management/com.sun.jmx.mbeanserver.MXBeanSupport.&lt;init&gt;(MXBeanSupport.java:66)\r\n\tat java.management/com.sun.jmx.mbeanserver.Introspector.makeDynamicMBean(Introspector.java:203)\r\n\tat java.management/com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.registerObject(DefaultMBeanServerInterceptor.java:888)\r\n\tat java.management/com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.registerMBean(DefaultMBeanServerInterceptor.java:320)\r\n\tat java.management/com.sun.jmx.mbeanserver.JmxMBeanServer.registerMBean(JmxMBeanServer.java:522)\r\n\tat org.springframework.jmx.support.MBeanRegistrationSupport.doRegister(MBeanRegistrationSupport.java:138)\r\n\tat org.springframework.jmx.export.MBeanExporter.registerBeanInstance(MBeanExporter.java:672)\r\n\tat org.springframework.jmx.export.MBeanExporter.registerBeanNameOrInstance(MBeanExporter.java:616)\r\n\t... 19 common frames omitted\r\nCaused by: java.lang.IllegalArgumentException: Method org.apache.tomcat.dbcp.dbcp2.DataSourceMXBean.getSoftMinEvictableIdleDuration has parameter or return type that cannot be translated into an open type\r\n\tat java.management/com.sun.jmx.mbeanserver.ConvertingMethod.from(ConvertingMethod.java:46)\r\n\tat java.management/com.sun.jmx.mbeanserver.MXBeanIntrospector.mFrom(MXBeanIntrospector.java:84)\r\n\tat java.management/com.sun.jmx.mbeanserver.MXBeanIntrospector.mFrom(MXBeanIntrospector.java:54)\r\n\tat java.management/com.sun.jmx.mbeanserver.MBeanAnalyzer.initMaps(MBeanAnalyzer.java:137)\r\n\tat java.management/com.sun.jmx.mbeanserver.MBeanAnalyzer.&lt;init&gt;(MBeanAnalyzer.java:118)\r\n\t... 31 common frames omitted\r\nCaused by: javax.management.openmbean.OpenDataException: Cannot convert type: java.time.Duration\r\n\tat java.management/com.sun.jmx.mbeanserver.DefaultMXBeanMappingFactory.openDataException(DefaultMXBeanMappingFactory.java:1445)\r\n\tat java.management/com.sun.jmx.mbeanserver.DefaultMXBeanMappingFactory.mappingForType(DefaultMXBeanMappingFactory.java:261)\r\n\tat java.management/com.sun.jmx.mbeanserver.ConvertingMethod.&lt;init&gt;(ConvertingMethod.java:212)\r\n\tat java.management/com.sun.jmx.mbeanserver.ConvertingMethod.from(ConvertingMethod.java:41)\r\n\t... 35 common frames omitted\r\nCaused by: javax.management.openmbean.OpenDataException: Cannot convert type: java.util.List&lt;java.time.temporal.TemporalUnit&gt;\r\n\tat java.management/com.sun.jmx.mbeanserver.DefaultMXBeanMappingFactory.openDataException(DefaultMXBeanMappingFactory.java:1445)\r\n\tat java.management/com.sun.jmx.mbeanserver.DefaultMXBeanMappingFactory.mappingForType(DefaultMXBeanMappingFactory.java:261)\r\n\tat java.management/com.sun.jmx.mbeanserver.DefaultMXBeanMappingFactory.makeCompositeMapping(DefaultMXBeanMappingFactory.java:473)\r\n\tat java.management/com.sun.jmx.mbeanserver.DefaultMXBeanMappingFactory.makeMapping(DefaultMXBeanMappingFactory.java:294)\r\n\tat java.management/com.sun.jmx.mbeanserver.DefaultMXBeanMappingFactory.mappingForType(DefaultMXBeanMappingFactory.java:259)\r\n\t... 37 common frames omitted\r\nCaused by: javax.management.openmbean.OpenDataException: Cannot convert type: java.time.temporal.TemporalUnit\r\n\tat java.management/com.sun.jmx.mbeanserver.DefaultMXBeanMappingFactory.openDataException(DefaultMXBeanMappingFactory.java:1445)\r\n\tat java.management/com.sun.jmx.mbeanserver.DefaultMXBeanMappingFactory.mappingForType(DefaultMXBeanMappingFactory.java:261)\r\n\tat java.management/com.sun.jmx.mbeanserver.DefaultMXBeanMappingFactory.makeArrayOrCollectionMapping(DefaultMXBeanMappingFactory.java:319)\r\n\tat java.management/com.sun.jmx.mbeanserver.DefaultMXBeanMappingFactory.makeParameterizedTypeMapping(DefaultMXBeanMappingFactory.java:398)\r\n\tat java.management/com.sun.jmx.mbeanserver.DefaultMXBeanMappingFactory.makeMapping(DefaultMXBeanMappingFactory.java:297)\r\n\tat java.management/com.sun.jmx.mbeanserver.DefaultMXBeanMappingFactory.mappingForType(DefaultMXBeanMappingFactory.java:259)\r\n\t... 40 common frames omitted\r\nCaused by: javax.management.openmbean.OpenDataException: Recursive data structure, including java.time.Duration\r\n\tat java.management/com.sun.jmx.mbeanserver.DefaultMXBeanMappingFactory.mappingForType(DefaultMXBeanMappingFactory.java:248)\r\n\tat java.management/com.sun.jmx.mbeanserver.DefaultMXBeanMappingFactory.makeCompositeMapping(DefaultMXBeanMappingFactory.java:473)\r\n\tat java.management/com.sun.jmx.mbeanserver.DefaultMXBeanMappingFactory.makeMapping(DefaultMXBeanMappingFactory.java:294)\r\n\tat java.management/com.sun.jmx.mbeanserver.DefaultMXBeanMappingFactory.mappingForType(DefaultMXBeanMappingFactory.java:259)\r\n\t... 44 common frames omitted\r\n```","title":"Tomcat and Tomcat dbcp issue after upgrade to v9.0.58","body":"<p>I'm getting this issue when upgrading Tomcat and Tomcat DBCP from v9.0.54 to v.9.0.58 with Java 11.</p>\n<pre><code>Error starting ApplicationContext. To display the conditions report re-run your application with 'debug' enabled.\n2022-02-08T08:24:15,900Z ERROR [tartedMain] SpringApplication [SpringApplication.java:854] Application run failed\norg.springframework.jmx.export.UnableToRegisterMBeanException: Unable to register MBean [org.apache.tomcat.dbcp.dbcp2.BasicDataSource@3b60547f] with key 'datasource'; nested exception is javax.management.NotCompliantMBeanException: org.apache.tomcat.dbcp.dbcp2.BasicDataSourceMXBean: Method org.apache.tomcat.dbcp.dbcp2.DataSourceMXBean.getSoftMinEvictableIdleDuration has parameter or return type that cannot be translated into an open type\n    at org.springframework.jmx.export.MBeanExporter.registerBeanNameOrInstance(MBeanExporter.java:626)\n    at org.springframework.jmx.export.MBeanExporter.lambda$registerBeans$2(MBeanExporter.java:552)\n    at java.base/java.util.HashMap.forEach(HashMap.java:1336)\n    at org.springframework.jmx.export.MBeanExporter.registerBeans(MBeanExporter.java:552)\n    at org.springframework.jmx.export.MBeanExporter.afterSingletonsInstantiated(MBeanExporter.java:435)\n    at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:972)\n    at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:918)\n    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:583)\n    at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:145)\n    at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:765)\n    at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:445)\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:338)\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:1354)\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:1343)\n    at com.wk.gbs.intakeportal.IntakePortalWarApplication.main(IntakePortalWarApplication.java:30)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n    at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.base/java.lang.reflect.Method.invoke(Method.java:566)\n    at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:49)\nCaused by: javax.management.NotCompliantMBeanException: org.apache.tomcat.dbcp.dbcp2.BasicDataSourceMXBean: Method org.apache.tomcat.dbcp.dbcp2.DataSourceMXBean.getSoftMinEvictableIdleDuration has parameter or return type that cannot be translated into an open type\n    at java.management/com.sun.jmx.mbeanserver.Introspector.throwException(Introspector.java:467)\n    at java.management/com.sun.jmx.mbeanserver.MBeanAnalyzer.&lt;init&gt;(MBeanAnalyzer.java:120)\n    at java.management/com.sun.jmx.mbeanserver.MBeanAnalyzer.analyzer(MBeanAnalyzer.java:102)\n    at java.management/com.sun.jmx.mbeanserver.MXBeanIntrospector.getAnalyzer(MXBeanIntrospector.java:74)\n    at java.management/com.sun.jmx.mbeanserver.MBeanIntrospector.getPerInterface(MBeanIntrospector.java:192)\n    at java.management/com.sun.jmx.mbeanserver.MBeanSupport.&lt;init&gt;(MBeanSupport.java:138)\n    at java.management/com.sun.jmx.mbeanserver.MXBeanSupport.&lt;init&gt;(MXBeanSupport.java:66)\n    at java.management/com.sun.jmx.mbeanserver.Introspector.makeDynamicMBean(Introspector.java:203)\n    at java.management/com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.registerObject(DefaultMBeanServerInterceptor.java:888)\n    at java.management/com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.registerMBean(DefaultMBeanServerInterceptor.java:320)\n    at java.management/com.sun.jmx.mbeanserver.JmxMBeanServer.registerMBean(JmxMBeanServer.java:522)\n    at org.springframework.jmx.support.MBeanRegistrationSupport.doRegister(MBeanRegistrationSupport.java:138)\n    at org.springframework.jmx.export.MBeanExporter.registerBeanInstance(MBeanExporter.java:672)\n    at org.springframework.jmx.export.MBeanExporter.registerBeanNameOrInstance(MBeanExporter.java:616)\n    ... 19 common frames omitted\nCaused by: java.lang.IllegalArgumentException: Method org.apache.tomcat.dbcp.dbcp2.DataSourceMXBean.getSoftMinEvictableIdleDuration has parameter or return type that cannot be translated into an open type\n    at java.management/com.sun.jmx.mbeanserver.ConvertingMethod.from(ConvertingMethod.java:46)\n    at java.management/com.sun.jmx.mbeanserver.MXBeanIntrospector.mFrom(MXBeanIntrospector.java:84)\n    at java.management/com.sun.jmx.mbeanserver.MXBeanIntrospector.mFrom(MXBeanIntrospector.java:54)\n    at java.management/com.sun.jmx.mbeanserver.MBeanAnalyzer.initMaps(MBeanAnalyzer.java:137)\n    at java.management/com.sun.jmx.mbeanserver.MBeanAnalyzer.&lt;init&gt;(MBeanAnalyzer.java:118)\n    ... 31 common frames omitted\nCaused by: javax.management.openmbean.OpenDataException: Cannot convert type: java.time.Duration\n    at java.management/com.sun.jmx.mbeanserver.DefaultMXBeanMappingFactory.openDataException(DefaultMXBeanMappingFactory.java:1445)\n    at java.management/com.sun.jmx.mbeanserver.DefaultMXBeanMappingFactory.mappingForType(DefaultMXBeanMappingFactory.java:261)\n    at java.management/com.sun.jmx.mbeanserver.ConvertingMethod.&lt;init&gt;(ConvertingMethod.java:212)\n    at java.management/com.sun.jmx.mbeanserver.ConvertingMethod.from(ConvertingMethod.java:41)\n    ... 35 common frames omitted\nCaused by: javax.management.openmbean.OpenDataException: Cannot convert type: java.util.List&lt;java.time.temporal.TemporalUnit&gt;\n    at java.management/com.sun.jmx.mbeanserver.DefaultMXBeanMappingFactory.openDataException(DefaultMXBeanMappingFactory.java:1445)\n    at java.management/com.sun.jmx.mbeanserver.DefaultMXBeanMappingFactory.mappingForType(DefaultMXBeanMappingFactory.java:261)\n    at java.management/com.sun.jmx.mbeanserver.DefaultMXBeanMappingFactory.makeCompositeMapping(DefaultMXBeanMappingFactory.java:473)\n    at java.management/com.sun.jmx.mbeanserver.DefaultMXBeanMappingFactory.makeMapping(DefaultMXBeanMappingFactory.java:294)\n    at java.management/com.sun.jmx.mbeanserver.DefaultMXBeanMappingFactory.mappingForType(DefaultMXBeanMappingFactory.java:259)\n    ... 37 common frames omitted\nCaused by: javax.management.openmbean.OpenDataException: Cannot convert type: java.time.temporal.TemporalUnit\n    at java.management/com.sun.jmx.mbeanserver.DefaultMXBeanMappingFactory.openDataException(DefaultMXBeanMappingFactory.java:1445)\n    at java.management/com.sun.jmx.mbeanserver.DefaultMXBeanMappingFactory.mappingForType(DefaultMXBeanMappingFactory.java:261)\n    at java.management/com.sun.jmx.mbeanserver.DefaultMXBeanMappingFactory.makeArrayOrCollectionMapping(DefaultMXBeanMappingFactory.java:319)\n    at java.management/com.sun.jmx.mbeanserver.DefaultMXBeanMappingFactory.makeParameterizedTypeMapping(DefaultMXBeanMappingFactory.java:398)\n    at java.management/com.sun.jmx.mbeanserver.DefaultMXBeanMappingFactory.makeMapping(DefaultMXBeanMappingFactory.java:297)\n    at java.management/com.sun.jmx.mbeanserver.DefaultMXBeanMappingFactory.mappingForType(DefaultMXBeanMappingFactory.java:259)\n    ... 40 common frames omitted\nCaused by: javax.management.openmbean.OpenDataException: Recursive data structure, including java.time.Duration\n    at java.management/com.sun.jmx.mbeanserver.DefaultMXBeanMappingFactory.mappingForType(DefaultMXBeanMappingFactory.java:248)\n    at java.management/com.sun.jmx.mbeanserver.DefaultMXBeanMappingFactory.makeCompositeMapping(DefaultMXBeanMappingFactory.java:473)\n    at java.management/com.sun.jmx.mbeanserver.DefaultMXBeanMappingFactory.makeMapping(DefaultMXBeanMappingFactory.java:294)\n    at java.management/com.sun.jmx.mbeanserver.DefaultMXBeanMappingFactory.mappingForType(DefaultMXBeanMappingFactory.java:259)\n    ... 44 common frames omitted\n</code></pre>\n"},{"tags":["java","eclipse"],"comments":[{"owner":{"account_id":552427,"reputation":11380,"user_id":917548,"display_name":"Roger Lindsj&#246;"},"score":2,"creation_date":1338828408,"post_id":10884867,"comment_id":14186695,"body_markdown":"Out of curiosity, if you use TDD, why create the getter before it is needed? But if you place the cursor after (or before) the set method, write get and then control-space you should get a suggestion for a getter (not exactly what you asked for).","body":"Out of curiosity, if you use TDD, why create the getter before it is needed? But if you place the cursor after (or before) the set method, write get and then control-space you should get a suggestion for a getter (not exactly what you asked for)."},{"owner":{"account_id":158125,"reputation":6731,"user_id":376527,"accept_rate":72,"display_name":"Sam Goldberg"},"score":0,"creation_date":1338830613,"post_id":10884867,"comment_id":14187425,"body_markdown":"@RogerLindsj&#246;: That&#39;s actually a good question. The main answer is: I added to my *Preferences/Save Actions* the action to &quot;Remove unused private types&quot;, so when I save (which happens when I run the unit test to see it fail), Eclipse will remove the field I just created (because it is not yet referenced), making me retype it again.  So it seems the best flow is to just create the getter at that moment.  Also - usually I find that if I create a setter, I usually need getter later on, so it also seems like a good convention that I create it at that moment when I create the setter in any case.","body":"@RogerLindsj&#246;: That&#39;s actually a good question. The main answer is: I added to my <i>Preferences/Save Actions</i> the action to &quot;Remove unused private types&quot;, so when I save (which happens when I run the unit test to see it fail), Eclipse will remove the field I just created (because it is not yet referenced), making me retype it again.  So it seems the best flow is to just create the getter at that moment.  Also - usually I find that if I create a setter, I usually need getter later on, so it also seems like a good convention that I create it at that moment when I create the setter in any case."},{"owner":{"account_id":552427,"reputation":11380,"user_id":917548,"display_name":"Roger Lindsj&#246;"},"score":0,"creation_date":1338876811,"post_id":10884867,"comment_id":14198666,"body_markdown":"That explains it then. Had that setting too, but didn&#39;t like it, so now I have unused private members as warnings and keep warnings at zero before committing (but accept them during work).","body":"That explains it then. Had that setting too, but didn&#39;t like it, so now I have unused private members as warnings and keep warnings at zero before committing (but accept them during work)."}],"answers":[{"tags":[],"owner":{"account_id":1200580,"reputation":968,"user_id":1171328,"accept_rate":75,"display_name":"CAA"},"down_vote_count":0,"up_vote_count":16,"is_accepted":true,"score":16,"last_activity_date":1338828298,"creation_date":1338828298,"answer_id":10884918,"question_id":10884867,"body_markdown":"When you move your mouse above the name of the variable, you can select &quot;Create getter and setter for varname&quot; in the popup menu. \r\n\r\nOr you can create yourself a shortcut to do so. Preferences -&gt; General -&gt; Keys. In the search box you enter &quot;getter&quot; and then you&#180;ll find it.","title":"Eclipse: How to automatically generate getter when adding a field?","body":"<p>When you move your mouse above the name of the variable, you can select \"Create getter and setter for varname\" in the popup menu. </p>\n\n<p>Or you can create yourself a shortcut to do so. Preferences -> General -> Keys. In the search box you enter \"getter\" and then you´ll find it.</p>\n"},{"tags":[],"owner":{"account_id":426969,"reputation":61751,"user_id":808486,"accept_rate":100,"display_name":"Tudor"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1338828438,"creation_date":1338828438,"answer_id":10884945,"question_id":10884867,"body_markdown":"Hmm... dunno if this is what you are looking for, but if I create a field in a class there is a warning that the field is unused. If I click on the warning sign the option to generate getter and setter for the field appears:\r\n\r\n![enter image description here][1]\r\n\r\n\r\n  [1]: http://i.stack.imgur.com/QoNff.jpg","title":"Eclipse: How to automatically generate getter when adding a field?","body":"<p>Hmm... dunno if this is what you are looking for, but if I create a field in a class there is a warning that the field is unused. If I click on the warning sign the option to generate getter and setter for the field appears:</p>\n\n<p><img src=\"https://i.stack.imgur.com/QoNff.jpg\" alt=\"enter image description here\"></p>\n"},{"tags":[],"owner":{"account_id":195854,"reputation":159194,"user_id":438992,"accept_rate":90,"display_name":"Dave Newton"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1338828505,"creation_date":1338828505,"answer_id":10884963,"question_id":10884867,"body_markdown":"I don&#39;t think that question implies that, since all answers gave a manual solution.\r\n\r\nAFAIK it&#39;s not possible to do automatically without a plugin, and I don&#39;t know of a plugin that does it.\r\n\r\nI use a template to create artifacts like that all at once, but I don&#39;t follow the same path--I&#39;m not sure a template solution would work if a getter or setter already existed, since I&#39;m not sure you can check for the presence of a method and make template decisions based on that. Maybe you can.\r\n","title":"Eclipse: How to automatically generate getter when adding a field?","body":"<p>I don't think that question implies that, since all answers gave a manual solution.</p>\n\n<p>AFAIK it's not possible to do automatically without a plugin, and I don't know of a plugin that does it.</p>\n\n<p>I use a template to create artifacts like that all at once, but I don't follow the same path--I'm not sure a template solution would work if a getter or setter already existed, since I'm not sure you can check for the presence of a method and make template decisions based on that. Maybe you can.</p>\n"},{"tags":[],"owner":{"account_id":1355206,"reputation":33312,"user_id":1293744,"accept_rate":44,"display_name":"Kumar Vivek Mitra"},"down_vote_count":0,"up_vote_count":10,"is_accepted":false,"score":10,"last_activity_date":1644472383,"creation_date":1338829365,"answer_id":10885155,"question_id":10884867,"body_markdown":"Try this, It works like butter\r\n\r\n    Go to Source --&gt; Generate Getter and Setter Methods\r\n    \r\n    Either select one instance variable, or all ---&gt; Ok","title":"Eclipse: How to automatically generate getter when adding a field?","body":"<p>Try this, It works like butter</p>\n<pre><code>Go to Source --&gt; Generate Getter and Setter Methods\n\nEither select one instance variable, or all ---&gt; Ok\n</code></pre>\n"},{"tags":[],"owner":{"account_id":90378,"reputation":2824,"user_id":248847,"accept_rate":85,"display_name":"KrishPrabakar"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1485411549,"creation_date":1448532300,"answer_id":33935692,"question_id":10884867,"body_markdown":"I do somewhat differently.\r\n\r\n - First create the variable: (say `private int threadsInPool = 3`).\r\n - Place the cursor on the variable name (say `threadsInPool`)\r\n - Apply this shortcut: &lt;kbd&gt;Alt&lt;/kbd&gt; + &lt;kbd&gt;Shift&lt;/kbd&gt; + &lt;kbd&gt;s&lt;/kbd&gt;, &lt;kbd&gt;r&lt;/kbd&gt; (&lt;i&gt;Press the last &lt;kbd&gt;r&lt;/kbd&gt; after a\r\n   slight delay&lt;/i&gt;)\r\n - Just press Enter when &lt;i&gt;Generate Getters and Setters&lt;/i&gt; dialog shows up and Voila!\r\n\r\n**EDIT :**\r\nYou can also try using [Lombok][1] annotations:\r\n\r\n    @Getter @Setter private String value;\r\n\r\n\r\n  [1]: https://projectlombok.org","title":"Eclipse: How to automatically generate getter when adding a field?","body":"<p>I do somewhat differently.</p>\n\n<ul>\n<li>First create the variable: (say <code>private int threadsInPool = 3</code>).</li>\n<li>Place the cursor on the variable name (say <code>threadsInPool</code>)</li>\n<li>Apply this shortcut: <kbd>Alt</kbd> + <kbd>Shift</kbd> + <kbd>s</kbd>, <kbd>r</kbd> (<i>Press the last <kbd>r</kbd> after a\nslight delay</i>)</li>\n<li>Just press Enter when <i>Generate Getters and Setters</i> dialog shows up and Voila!</li>\n</ul>\n\n<p><strong>EDIT :</strong>\nYou can also try using <a href=\"https://projectlombok.org\" rel=\"nofollow noreferrer\">Lombok</a> annotations:</p>\n\n<pre><code>@Getter @Setter private String value;\n</code></pre>\n"}],"owner":{"account_id":158125,"reputation":6731,"user_id":376527,"accept_rate":72,"display_name":"Sam Goldberg"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":46474,"favorite_count":0,"down_vote_count":0,"up_vote_count":8,"accepted_answer_id":10884918,"answer_count":5,"score":8,"last_activity_date":1644472383,"creation_date":1338828052,"question_id":10884867,"body_markdown":"I am using TDD, and have a very typical coding pattern, using Eclipse to autocreate methods and fields as I code the unit test. For example:\r\n\r\n1. type name of method that doesn&#39;t exist, e.g:\r\n\r\n    `myObj.setValue(someValue);`\r\n\r\n2.  Click on the little red error mark in the IDE to create the &quot;setValue&quot; method. \r\n\r\n3.  Type inside of setValue method:\r\n\r\n    `public void setValue(String value) {\r\n        this.value = value;\r\n    }`\r\n\r\n4. Click the red error mark to auto-create a private field (called &quot;value in this case&quot;);\r\n\r\nSo at this point, I would like Eclipse to auto-create the getter method, without having to do it using the *source -&gt; generate getters and setters* menu.\r\n\r\nI saw this question: [How do you force Eclipse to prompt you to create a getter and setter when it doesn&#39;t do it automatically][1] which seems to imply that Eclipse does this, but I couldn&#39;t find where to configure that.\r\n\r\nIs there some way to configure Eclipse to automatically add setter/getters when adding new private variable?  \r\n\r\n**UPDATE**: \r\nTo clarify further, I&#39;m looking for something like I saw in the [Spring Roo][2] documentation. If you take a look at the &quot;How It Works&quot; section, it describes how the framework automatically adds additional methods to your class, whenever you add a private variable. (My preference is not to run another process like that, however, and also not to get all the cruft that it seems to add).  I was hoping Eclipse had something similar.\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/3822687/how-do-you-force-eclipse-to-prompt-you-to-create-a-getter-and-setter-when-it-doe\r\n  [2]: http://www.springsource.org/spring-roo#documentation","title":"Eclipse: How to automatically generate getter when adding a field?","body":"<p>I am using TDD, and have a very typical coding pattern, using Eclipse to autocreate methods and fields as I code the unit test. For example:</p>\n\n<ol>\n<li><p>type name of method that doesn't exist, e.g:</p>\n\n<p><code>myObj.setValue(someValue);</code></p></li>\n<li><p>Click on the little red error mark in the IDE to create the \"setValue\" method. </p></li>\n<li><p>Type inside of setValue method:</p>\n\n<p><code>public void setValue(String value) {\n    this.value = value;\n}</code></p></li>\n<li><p>Click the red error mark to auto-create a private field (called \"value in this case\");</p></li>\n</ol>\n\n<p>So at this point, I would like Eclipse to auto-create the getter method, without having to do it using the <em>source -> generate getters and setters</em> menu.</p>\n\n<p>I saw this question: <a href=\"https://stackoverflow.com/questions/3822687/how-do-you-force-eclipse-to-prompt-you-to-create-a-getter-and-setter-when-it-doe\">How do you force Eclipse to prompt you to create a getter and setter when it doesn't do it automatically</a> which seems to imply that Eclipse does this, but I couldn't find where to configure that.</p>\n\n<p>Is there some way to configure Eclipse to automatically add setter/getters when adding new private variable?  </p>\n\n<p><strong>UPDATE</strong>: \nTo clarify further, I'm looking for something like I saw in the <a href=\"http://www.springsource.org/spring-roo#documentation\" rel=\"nofollow noreferrer\">Spring Roo</a> documentation. If you take a look at the \"How It Works\" section, it describes how the framework automatically adds additional methods to your class, whenever you add a private variable. (My preference is not to run another process like that, however, and also not to get all the cruft that it seems to add).  I was hoping Eclipse had something similar.</p>\n"},{"tags":["java","spring","spring-boot","httprequest","multipartform-data"],"comments":[{"owner":{"account_id":5916763,"reputation":3250,"user_id":4655324,"accept_rate":79,"display_name":"Mevl&#252;t&#214;zdemir"},"score":0,"creation_date":1644480904,"post_id":71059663,"comment_id":125619509,"body_markdown":"For the dynamicFields you could better make use of a &#39;HashMap&lt;String,Object&gt; dynamicFields&#39;. Where the key of the map will be like &quot;name&quot; and the value for that key will be &quot;John Doe&quot;. For multiple files you could use an array like &#39;@RequestParam(&quot;files&quot;) MultipartFile[] files&#39;","body":"For the dynamicFields you could better make use of a &#39;HashMap&lt;String,Object&gt; dynamicFields&#39;. Where the key of the map will be like &quot;name&quot; and the value for that key will be &quot;John Doe&quot;. For multiple files you could use an array like &#39;@RequestParam(&quot;files&quot;) MultipartFile[] files&#39;"},{"owner":{"account_id":19965141,"reputation":1690,"user_id":14631885,"display_name":"Dhana D."},"score":0,"creation_date":1644480982,"post_id":71059663,"comment_id":125619532,"body_markdown":"Can it handle the `multipart/form-data` request?","body":"Can it handle the <code>multipart&#47;form-data</code> request?"},{"owner":{"account_id":5916763,"reputation":3250,"user_id":4655324,"accept_rate":79,"display_name":"Mevl&#252;t&#214;zdemir"},"score":0,"creation_date":1644481156,"post_id":71059663,"comment_id":125619585,"body_markdown":"Haven&#39;t tried it, but I expect it to be.","body":"Haven&#39;t tried it, but I expect it to be."}],"owner":{"account_id":19965141,"reputation":1690,"user_id":14631885,"display_name":"Dhana D."},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":724,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1644468397,"creation_date":1644465797,"question_id":71059663,"body_markdown":"I am currently doing an experiment to build the API which users can submit freely at their own will without restriction, no boundary on field names and the contents as well. And the API would just print out the inputs in a key,value pairs. For the files, I would just print out the whole bytes of the base64 converted of it.\r\n\r\nFor example, I have the request A like this:\r\n```\r\n{\r\n   &quot;name&quot;: &quot;John Doe&quot;,\r\n   &quot;lucky_number&quot;: 75\r\n}\r\n```\r\n\r\nThen the API will get the output:\r\n\r\n```\r\nHello user, your first key is name and its value is John Doe, your next key is lucky_number and its value is 75. Thank you for using.\r\n```\r\n\r\nThen, I make another request with the fields below. The image actually was filled with actual `image/jpg` file.\r\n```\r\n&quot;pokemon&quot;: &quot;pikachu&quot;,\r\n&quot;image&quot;: &lt;File&gt;JFIFw9d1j3f0881ehfce0cn2e0f2\r\n```\r\n\r\nSo, it will print out most likely:\r\n```\r\nHello user, your first key is pokemon and its value is pikachi, your next key is image and its value is cApovnquGCaisa1b23IAbqxcaiFoPqR==. Thank you for using..\r\n```\r\n\r\nCan this actually be achieved? As for what I have known, I can make such dynamic request if the request body was formatted in JSON file that Spring can easily get it to the Java Object format. But what about this multipart? And as far as I know, I can get the multipart only with the defined fieldname, and this code below most likely can only handle one file with field `file`, but what if the user actually send 3 files or even more as there&#39;s no boundary as the expected behavior?\r\n\r\n```\r\n@PostMapping(&quot;/fun&quot;, consumes = { &quot;multipart/mixed&quot;, &quot;multipart/form-data&quot; }, produces = {&quot;text/plain&quot;}\r\npublic String postForFun(@RequestPart(&quot;file&quot;) MultipartFile file, @RequestBody Object dynamicFields) {\r\n\r\n}\r\n```\r\n","title":"Sending dynamic fieldnames for RequestBody multipart/form-data in spring","body":"<p>I am currently doing an experiment to build the API which users can submit freely at their own will without restriction, no boundary on field names and the contents as well. And the API would just print out the inputs in a key,value pairs. For the files, I would just print out the whole bytes of the base64 converted of it.</p>\n<p>For example, I have the request A like this:</p>\n<pre><code>{\n   &quot;name&quot;: &quot;John Doe&quot;,\n   &quot;lucky_number&quot;: 75\n}\n</code></pre>\n<p>Then the API will get the output:</p>\n<pre><code>Hello user, your first key is name and its value is John Doe, your next key is lucky_number and its value is 75. Thank you for using.\n</code></pre>\n<p>Then, I make another request with the fields below. The image actually was filled with actual <code>image/jpg</code> file.</p>\n<pre><code>&quot;pokemon&quot;: &quot;pikachu&quot;,\n&quot;image&quot;: &lt;File&gt;JFIFw9d1j3f0881ehfce0cn2e0f2\n</code></pre>\n<p>So, it will print out most likely:</p>\n<pre><code>Hello user, your first key is pokemon and its value is pikachi, your next key is image and its value is cApovnquGCaisa1b23IAbqxcaiFoPqR==. Thank you for using..\n</code></pre>\n<p>Can this actually be achieved? As for what I have known, I can make such dynamic request if the request body was formatted in JSON file that Spring can easily get it to the Java Object format. But what about this multipart? And as far as I know, I can get the multipart only with the defined fieldname, and this code below most likely can only handle one file with field <code>file</code>, but what if the user actually send 3 files or even more as there's no boundary as the expected behavior?</p>\n<pre><code>@PostMapping(&quot;/fun&quot;, consumes = { &quot;multipart/mixed&quot;, &quot;multipart/form-data&quot; }, produces = {&quot;text/plain&quot;}\npublic String postForFun(@RequestPart(&quot;file&quot;) MultipartFile file, @RequestBody Object dynamicFields) {\n\n}\n</code></pre>\n"},{"tags":["java","spring","mybatis"],"comments":[{"owner":{"account_id":11624106,"reputation":2811,"user_id":11808788,"display_name":"Charles"},"score":0,"creation_date":1644469157,"post_id":71059912,"comment_id":125616781,"body_markdown":"Why should this be slow, do you maybe select some very large columns?","body":"Why should this be slow, do you maybe select some very large columns?"},{"owner":{"account_id":13167846,"reputation":31,"user_id":9511333,"display_name":"user9511333"},"score":0,"creation_date":1644475626,"post_id":71059912,"comment_id":125617978,"body_markdown":"@Charles I would be glad if you can elaborate on very large columns, my Table contains 60000 entries and some column contains Text as well which contains description.","body":"@Charles I would be glad if you can elaborate on very large columns, my Table contains 60000 entries and some column contains Text as well which contains description."},{"owner":{"account_id":11624106,"reputation":2811,"user_id":11808788,"display_name":"Charles"},"score":0,"creation_date":1644477095,"post_id":71059912,"comment_id":125618365,"body_markdown":"Try to select only the columns you really need. Don&#39;t use &quot;select * from table&quot;","body":"Try to select only the columns you really need. Don&#39;t use &quot;select * from table&quot;"},{"owner":{"account_id":13167846,"reputation":31,"user_id":9511333,"display_name":"user9511333"},"score":0,"creation_date":1644477806,"post_id":71059912,"comment_id":125618556,"body_markdown":"@charles sure, but is there any other way to make it faster?","body":"@charles sure, but is there any other way to make it faster?"},{"owner":{"account_id":11624106,"reputation":2811,"user_id":11808788,"display_name":"Charles"},"score":1,"creation_date":1644477964,"post_id":71059912,"comment_id":125618601,"body_markdown":"There is mapping going on and some reflection to map the database records to objects. If you only need performance then don&#39;t use an ORM. Use raw SQL and for example a simple JDBC ResultSet.","body":"There is mapping going on and some reflection to map the database records to objects. If you only need performance then don&#39;t use an ORM. Use raw SQL and for example a simple JDBC ResultSet."}],"owner":{"account_id":13167846,"reputation":31,"user_id":9511333,"display_name":"user9511333"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":442,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1644468176,"creation_date":1644468176,"question_id":71059912,"body_markdown":"I have a table with almost 60000 data in it and I am running a select statement using myBatis mapper files, after analysing the code in debug mode I found that the data from the database was coming into DataSource fairly quickly, it was taking time while storing it in the List.\r\n\r\nDriver Code.\r\n\r\n    Map&lt;Long, Some_Custom_Class&gt; mp = new HashMap&lt;&gt;();\r\n    List&lt;Some_Custom_Class&gt; myVar = selectAllDataFromTable();\r\n    if(myVar != null){\r\n     for(Some_Custom_Class cs: myVar){\r\n        mp.put(cs.getId(), cs)\r\n     }\r\n    }\r\n\r\nMapper File\r\n\r\n    &lt;select id=&quot;selectAllDataFromTable&quot; resultMap=&quot;VariableMap&quot;&gt;\r\n       select  * from myTable\r\n    &lt;/select&gt;\r\n\r\n    &lt;resultMap id=&quot;VariableMap&quot; type=&quot;myPackage.Some_Custom_Class&quot;&gt;\r\n            &lt;id property=&quot;VariableID&quot; column=&quot;variable_id&quot; /&gt;\r\n    \t\t&lt;id property=&quot;SecondID&quot; column=&quot;Second_ID&quot; /&gt;\r\n    \t\t&lt;id property=&quot;Tag&quot; column=&quot;tag&quot; /&gt;\r\n    &lt;/resultMap&gt;\r\n\r\nI need to speed up the data insertion process in the list, is there any way to do it?\r\nI know a way that but I am not sure if it is correct.\r\nThe way is by using threads and maybe having 2-4views and letting those threads access those views in some range let&#39;s say 0-10000 and so on. The for loop doesn&#39;t take much time to loop through 60000 data, but speeding that up will be a secondary task.\r\nMy goal is to populate the list in the fastest way possible, can someone help me with that.","title":"Populating a list with data from database using myBatis takes up a lot of time","body":"<p>I have a table with almost 60000 data in it and I am running a select statement using myBatis mapper files, after analysing the code in debug mode I found that the data from the database was coming into DataSource fairly quickly, it was taking time while storing it in the List.</p>\n<p>Driver Code.</p>\n<pre><code>Map&lt;Long, Some_Custom_Class&gt; mp = new HashMap&lt;&gt;();\nList&lt;Some_Custom_Class&gt; myVar = selectAllDataFromTable();\nif(myVar != null){\n for(Some_Custom_Class cs: myVar){\n    mp.put(cs.getId(), cs)\n }\n}\n</code></pre>\n<p>Mapper File</p>\n<pre><code>&lt;select id=&quot;selectAllDataFromTable&quot; resultMap=&quot;VariableMap&quot;&gt;\n   select  * from myTable\n&lt;/select&gt;\n\n&lt;resultMap id=&quot;VariableMap&quot; type=&quot;myPackage.Some_Custom_Class&quot;&gt;\n        &lt;id property=&quot;VariableID&quot; column=&quot;variable_id&quot; /&gt;\n        &lt;id property=&quot;SecondID&quot; column=&quot;Second_ID&quot; /&gt;\n        &lt;id property=&quot;Tag&quot; column=&quot;tag&quot; /&gt;\n&lt;/resultMap&gt;\n</code></pre>\n<p>I need to speed up the data insertion process in the list, is there any way to do it?\nI know a way that but I am not sure if it is correct.\nThe way is by using threads and maybe having 2-4views and letting those threads access those views in some range let's say 0-10000 and so on. The for loop doesn't take much time to loop through 60000 data, but speeding that up will be a secondary task.\nMy goal is to populate the list in the fastest way possible, can someone help me with that.</p>\n"},{"tags":["java","android","nullpointerexception"],"comments":[{"owner":{"account_id":1677664,"reputation":4472,"user_id":1542796,"accept_rate":75,"display_name":"Nitin Misra"},"score":0,"creation_date":1418968548,"post_id":27560449,"comment_id":43546954,"body_markdown":"which one is your line number 80","body":"which one is your line number 80"},{"owner":{"account_id":899395,"reputation":2715,"user_id":935913,"accept_rate":79,"display_name":"JackyBoi"},"score":0,"creation_date":1418968596,"post_id":27560449,"comment_id":43546969,"body_markdown":"btn_newbet.setOnClickListener(new View.OnClickListener()  the log cat also says that is the code.","body":"btn_newbet.setOnClickListener(new View.OnClickListener()  the log cat also says that is the code."},{"owner":{"account_id":899395,"reputation":2715,"user_id":935913,"accept_rate":79,"display_name":"JackyBoi"},"score":0,"creation_date":1418968724,"post_id":27560449,"comment_id":43547015,"body_markdown":"What u mean? the code is executing as it is.","body":"What u mean? the code is executing as it is."},{"owner":{"account_id":4946647,"reputation":1191,"user_id":3981822,"display_name":"Shvet"},"score":2,"creation_date":1418968838,"post_id":27560449,"comment_id":43547048,"body_markdown":"post your xml file `newbet`","body":"post your xml file <code>newbet</code>"}],"answers":[{"tags":[],"owner":{"account_id":3456418,"reputation":520,"user_id":2894833,"accept_rate":40,"display_name":"hareesh J"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1418968913,"creation_date":1418968747,"answer_id":27560505,"question_id":27560449,"body_markdown":"placeBet is not yet initialized that&#39;s why it is giving null pointer exception \r\n\r\ncheck the following line\r\n\r\n     palceBet=findViewId(R.id.btn_newbet);","title":"Android Null Pointer Exception for onclick listener","body":"<p>placeBet is not yet initialized that's why it is giving null pointer exception </p>\n\n<p>check the following line</p>\n\n<pre><code> palceBet=findViewId(R.id.btn_newbet);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4708131,"reputation":374,"user_id":3809570,"display_name":"Vishwa Pratap"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1493180955,"creation_date":1493180955,"answer_id":43625057,"question_id":27560449,"body_markdown":"It seems that you did not create Button with id btn_newbet in the .xml file.\r\nso to find if you define this button in xml file or not you should take your cursor over btn_newbet in \r\n  placeBet = (Button) findViewById(R.id.btn_newbet);\r\nand if onclicking ,it will redirect to correct xml .","title":"Android Null Pointer Exception for onclick listener","body":"<p>It seems that you did not create Button with id btn_newbet in the .xml file.\nso to find if you define this button in xml file or not you should take your cursor over btn_newbet in \n  placeBet = (Button) findViewById(R.id.btn_newbet);\nand if onclicking ,it will redirect to correct xml .</p>\n"}],"owner":{"account_id":899395,"reputation":2715,"user_id":935913,"accept_rate":79,"display_name":"JackyBoi"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":8302,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":27560505,"answer_count":2,"score":0,"last_activity_date":1644468159,"creation_date":1418968444,"question_id":27560449,"body_markdown":"The following code is giving me null pointer exception even though I can&#39;t find anything wrong with the code. Tried commenting it out and it seems to be working. But still not able to find out what is wrong with the code? tried my own trouble shooting of commenting out the code and such and right now the code below is giving me nullpointer exception\r\n\r\n\r\nLog Cat\r\n\r\n&gt; 12-19 05:49:14.833: E/AndroidRuntime(3392): Caused by:\r\n&gt; java.lang.NullPointerException: Attempt to invoke virtual method &#39;void\r\n&gt; android.widget.Button.setOnClickListener(android.view.View$OnClickListener)&#39;\r\n&gt; on a null object reference 12-19 05:49:14.833: E/AndroidRuntime(3392):\r\n&gt; \tat\r\n&gt; com.techiequickie.bharath.boadraf.newBet_activity.onCreate(newBet_activity.java:80)\r\n\r\n\r\nCode:\r\n\r\n    package com.techiequickie.bhr.boadraf;\r\n    \r\n    import android.content.Intent;\r\n    import android.os.AsyncTask;\r\n    import android.os.Bundle;\r\n    import android.support.v7.app.ActionBarActivity;\r\n    import android.view.Gravity;\r\n    import android.view.View;\r\n    import android.widget.Button;\r\n    import android.widget.EditText;\r\n    import android.widget.SeekBar;\r\n    import android.widget.Toast;\r\n    \r\n    import org.json.JSONException;\r\n    import org.json.JSONObject;\r\n    \r\n    import databasehandler.DatabaseHandler;\r\n    import databasehandler.UserFunctions;\r\n    \r\n    /**\r\n     * Created by YP on 17-Nov-14.\r\n     */\r\n    public class newBet_activity extends ActionBarActivity\r\n    {\r\n        EditText inputBetname, inputBetbrief, inputBetdescription;\r\n        SeekBar valueSeekbar; //= null;\r\n        Button placeBet;\r\n    \r\n    \r\n        // JSON Response node names\r\n        private static String KEY_SUCCESS = &quot;success&quot;;\r\n        @SuppressWarnings(&quot;unused&quot;)\r\n        private static String KEY_ERROR = &quot;error&quot;;\r\n        @SuppressWarnings(&quot;unused&quot;)\r\n        private static String KEY_ERROR_MSG = &quot;error_msg&quot;;\r\n        //private static String KEY_UID = &quot;uid&quot;;\r\n        private static String KEY_BETNAME = &quot;bet_name&quot;;\r\n        private static String KEY_BETBRIEF = &quot;bet_brief&quot;;\r\n        private static String KEY_BETDESCRIPTION = &quot;bet_description&quot;;\r\n        private static String KEY_BETVALUE = &quot;bet_value&quot;;\r\n       // private static String KEY_CREATED_AT = &quot;created_at&quot;;\r\n    \r\n    \r\n        @Override\r\n        protected void onCreate(Bundle savedInstanceState)\r\n        {\r\n            super.onCreate(savedInstanceState);\r\n            setContentView(R.layout.newbet);\r\n            // Importing all assets like buttons, text fields\r\n            inputBetname = (EditText) findViewById(R.id.betName_et);\r\n            inputBetbrief = (EditText) findViewById(R.id.betBriefDescription_et);\r\n            inputBetdescription = (EditText) findViewById(R.id.betDescription_et);\r\n            placeBet = (Button) findViewById(R.id.btn_newbet);\r\n    \r\n            //valueSeekbar = (SeekBar) findViewById(R.id.betValue_bar);\r\n    \r\n            /*\r\n            valueSeekbar.setOnSeekBarChangeListener\r\n           (\r\n    \r\n             new SeekBar.OnSeekBarChangeListener()\r\n            {\r\n                int progressChanged = 0;\r\n    \r\n                public void onProgressChanged(SeekBar seekBar, int progress, boolean fromUser) {\r\n                    progressChanged = progress;\r\n                }\r\n    \r\n                public void onStartTrackingTouch(SeekBar seekBar) {\r\n                    // TODO Auto-generated method stub\r\n                }\r\n    \r\n                public void onStopTrackingTouch(SeekBar seekBar) {\r\n                    Toast.makeText(newBet_activity.this, &quot;seek bar progress:&quot; + progressChanged, Toast.LENGTH_SHORT).show();\r\n                }\r\n            }\r\n           );*/\r\n    \r\n    \r\n            placeBet.setOnClickListener(new View.OnClickListener()\r\n             {\r\n    \r\n                \r\n                public void onClick(View view)\r\n                {\r\n                    String betname = inputBetname.getText().toString();\r\n                    String betBrief = inputBetbrief.getText().toString();\r\n                    String betDescription = inputBetdescription.getText().toString();\r\n                    //StringBuilder betValue = ((toString()) valueSeekbar.getProgress());\r\n    \r\n                    //new BetRegisterTask().execute(betname,betBrief,betDescription);\r\n                }\r\n             }\r\n            );\r\n    \r\n    \r\n        }\r\n    \r\n    /*\r\n            class BetRegisterTask extends AsyncTask&lt;String, Void, String&gt;\r\n            {\r\n    \r\n                @Override\r\n                protected String doInBackground(String... params)\r\n                {\r\n    \r\n                    UserFunctions userFunction = new UserFunctions();\r\n                    JSONObject json = userFunction.createBet(params[0], params[1], params[2]);\r\n    \r\n                    // check for login response\r\n                    try\r\n                    {\r\n                        if (json.getString(KEY_SUCCESS) != null)\r\n                        {\r\n    \r\n                            String res = json.getString(KEY_SUCCESS);\r\n                            if (Integer.parseInt(res) == 1)\r\n                            {\r\n                                // user successfully registred\r\n                                // Store user details in SQLite Database\r\n                                DatabaseHandler db = new DatabaseHandler(getApplicationContext());\r\n                                JSONObject json_user = json.optJSONObject(&quot;user&quot;);\r\n    \r\n                                // Clear all previous data in database\r\n                                userFunction.logoutUser(getApplicationContext());\r\n                                db.newBet(json_user.getString(KEY_BETNAME), json_user.getString(KEY_BETBRIEF), json.getString(KEY_BETDESCRIPTION));\r\n                                return &quot;1&quot;;\r\n    \r\n                            }\r\n    \r\n                        }\r\n                    } catch (JSONException e)\r\n                    {\r\n                        e.printStackTrace();\r\n                    }\r\n    \r\n                    return &quot;0&quot;;\r\n                }\r\n    \r\n                @Override\r\n                protected void onPostExecute(String s)\r\n                {\r\n                    super.onPostExecute(s);\r\n                    if (s.equals(&quot;1&quot;))\r\n                    {\r\n    \r\n                        // Launch Dashboard Screen\r\n                        Intent dashboard = new Intent(getApplicationContext(), Loginactivity.class);\r\n                        // Close all views before launching Dashboard\r\n                        dashboard.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);\r\n                        startActivity(dashboard);\r\n                        // Close Registration Screen\r\n                        finish();\r\n                        showToastforSucessfulBetCreation();\r\n    \r\n                    }\r\n                    else\r\n                    {\r\n                        // Error in registration\r\n                        //registerErrorMsg.setText(&quot;Error occurred in registration&quot;);\r\n                        showToastforUnsucessfulBetCreation();\r\n                    }\r\n                }\r\n            }*/\r\n    \r\n        public void showToastforSucessfulBetCreation() {\r\n            Toast toast = Toast.makeText(this, &quot;Registration Sucessfull&quot;, Toast.LENGTH_LONG);\r\n            toast.setGravity(Gravity.BOTTOM, 0, 30);\r\n            toast.show();\r\n    \r\n        }\r\n    \r\n    \r\n        public void showToastforUnsucessfulBetCreation() {\r\n            Toast toast = Toast.makeText(this, &quot;Registration UnSucessfull&quot;, Toast.LENGTH_LONG);\r\n            toast.setGravity(Gravity.BOTTOM, 0, 30);\r\n            toast.show();\r\n    \r\n        }\r\n    \r\n    }\r\n","title":"Android Null Pointer Exception for onclick listener","body":"<p>The following code is giving me null pointer exception even though I can't find anything wrong with the code. Tried commenting it out and it seems to be working. But still not able to find out what is wrong with the code? tried my own trouble shooting of commenting out the code and such and right now the code below is giving me nullpointer exception</p>\n<p>Log Cat</p>\n<blockquote>\n<p>12-19 05:49:14.833: E/AndroidRuntime(3392): Caused by:\njava.lang.NullPointerException: Attempt to invoke virtual method 'void\nandroid.widget.Button.setOnClickListener(android.view.View$OnClickListener)'\non a null object reference 12-19 05:49:14.833: E/AndroidRuntime(3392):\nat\ncom.techiequickie.bharath.boadraf.newBet_activity.onCreate(newBet_activity.java:80)</p>\n</blockquote>\n<p>Code:</p>\n<pre><code>package com.techiequickie.bhr.boadraf;\n\nimport android.content.Intent;\nimport android.os.AsyncTask;\nimport android.os.Bundle;\nimport android.support.v7.app.ActionBarActivity;\nimport android.view.Gravity;\nimport android.view.View;\nimport android.widget.Button;\nimport android.widget.EditText;\nimport android.widget.SeekBar;\nimport android.widget.Toast;\n\nimport org.json.JSONException;\nimport org.json.JSONObject;\n\nimport databasehandler.DatabaseHandler;\nimport databasehandler.UserFunctions;\n\n/**\n * Created by YP on 17-Nov-14.\n */\npublic class newBet_activity extends ActionBarActivity\n{\n    EditText inputBetname, inputBetbrief, inputBetdescription;\n    SeekBar valueSeekbar; //= null;\n    Button placeBet;\n\n\n    // JSON Response node names\n    private static String KEY_SUCCESS = &quot;success&quot;;\n    @SuppressWarnings(&quot;unused&quot;)\n    private static String KEY_ERROR = &quot;error&quot;;\n    @SuppressWarnings(&quot;unused&quot;)\n    private static String KEY_ERROR_MSG = &quot;error_msg&quot;;\n    //private static String KEY_UID = &quot;uid&quot;;\n    private static String KEY_BETNAME = &quot;bet_name&quot;;\n    private static String KEY_BETBRIEF = &quot;bet_brief&quot;;\n    private static String KEY_BETDESCRIPTION = &quot;bet_description&quot;;\n    private static String KEY_BETVALUE = &quot;bet_value&quot;;\n   // private static String KEY_CREATED_AT = &quot;created_at&quot;;\n\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState)\n    {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.newbet);\n        // Importing all assets like buttons, text fields\n        inputBetname = (EditText) findViewById(R.id.betName_et);\n        inputBetbrief = (EditText) findViewById(R.id.betBriefDescription_et);\n        inputBetdescription = (EditText) findViewById(R.id.betDescription_et);\n        placeBet = (Button) findViewById(R.id.btn_newbet);\n\n        //valueSeekbar = (SeekBar) findViewById(R.id.betValue_bar);\n\n        /*\n        valueSeekbar.setOnSeekBarChangeListener\n       (\n\n         new SeekBar.OnSeekBarChangeListener()\n        {\n            int progressChanged = 0;\n\n            public void onProgressChanged(SeekBar seekBar, int progress, boolean fromUser) {\n                progressChanged = progress;\n            }\n\n            public void onStartTrackingTouch(SeekBar seekBar) {\n                // TODO Auto-generated method stub\n            }\n\n            public void onStopTrackingTouch(SeekBar seekBar) {\n                Toast.makeText(newBet_activity.this, &quot;seek bar progress:&quot; + progressChanged, Toast.LENGTH_SHORT).show();\n            }\n        }\n       );*/\n\n\n        placeBet.setOnClickListener(new View.OnClickListener()\n         {\n\n            \n            public void onClick(View view)\n            {\n                String betname = inputBetname.getText().toString();\n                String betBrief = inputBetbrief.getText().toString();\n                String betDescription = inputBetdescription.getText().toString();\n                //StringBuilder betValue = ((toString()) valueSeekbar.getProgress());\n\n                //new BetRegisterTask().execute(betname,betBrief,betDescription);\n            }\n         }\n        );\n\n\n    }\n\n/*\n        class BetRegisterTask extends AsyncTask&lt;String, Void, String&gt;\n        {\n\n            @Override\n            protected String doInBackground(String... params)\n            {\n\n                UserFunctions userFunction = new UserFunctions();\n                JSONObject json = userFunction.createBet(params[0], params[1], params[2]);\n\n                // check for login response\n                try\n                {\n                    if (json.getString(KEY_SUCCESS) != null)\n                    {\n\n                        String res = json.getString(KEY_SUCCESS);\n                        if (Integer.parseInt(res) == 1)\n                        {\n                            // user successfully registred\n                            // Store user details in SQLite Database\n                            DatabaseHandler db = new DatabaseHandler(getApplicationContext());\n                            JSONObject json_user = json.optJSONObject(&quot;user&quot;);\n\n                            // Clear all previous data in database\n                            userFunction.logoutUser(getApplicationContext());\n                            db.newBet(json_user.getString(KEY_BETNAME), json_user.getString(KEY_BETBRIEF), json.getString(KEY_BETDESCRIPTION));\n                            return &quot;1&quot;;\n\n                        }\n\n                    }\n                } catch (JSONException e)\n                {\n                    e.printStackTrace();\n                }\n\n                return &quot;0&quot;;\n            }\n\n            @Override\n            protected void onPostExecute(String s)\n            {\n                super.onPostExecute(s);\n                if (s.equals(&quot;1&quot;))\n                {\n\n                    // Launch Dashboard Screen\n                    Intent dashboard = new Intent(getApplicationContext(), Loginactivity.class);\n                    // Close all views before launching Dashboard\n                    dashboard.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);\n                    startActivity(dashboard);\n                    // Close Registration Screen\n                    finish();\n                    showToastforSucessfulBetCreation();\n\n                }\n                else\n                {\n                    // Error in registration\n                    //registerErrorMsg.setText(&quot;Error occurred in registration&quot;);\n                    showToastforUnsucessfulBetCreation();\n                }\n            }\n        }*/\n\n    public void showToastforSucessfulBetCreation() {\n        Toast toast = Toast.makeText(this, &quot;Registration Sucessfull&quot;, Toast.LENGTH_LONG);\n        toast.setGravity(Gravity.BOTTOM, 0, 30);\n        toast.show();\n\n    }\n\n\n    public void showToastforUnsucessfulBetCreation() {\n        Toast toast = Toast.makeText(this, &quot;Registration UnSucessfull&quot;, Toast.LENGTH_LONG);\n        toast.setGravity(Gravity.BOTTOM, 0, 30);\n        toast.show();\n\n    }\n\n}\n</code></pre>\n"},{"tags":["java","android-studio","insert","foreign-keys","android-sqlite"],"answers":[{"tags":[],"owner":{"account_id":6077735,"reputation":52951,"user_id":4744514,"accept_rate":96,"display_name":"MikeT"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1644468138,"creation_date":1644450863,"answer_id":71058252,"question_id":71055333,"body_markdown":"The method is the convenience insert method which simplifies the construction of INSERT SQL statements based upon a ContentValues. \r\n\r\nSQL does not allow the insertion of rows into multiple tables. So you cannot insert into both tables in a single use of the insert method. Furthermore the insertion into the **form_mvdrecinto** requires you to know the value of the foreign key.\r\n\r\nFirst you have various problems with the SQL.\r\n\r\n\r\nI believe that you need/want something like ():-\r\n\r\n    CREATE TABLE IF NOT EXISTS form /* TABLE NAME AFTER, NOT BEFORE THE CREATE KEYWORD/CLAUSE */(form_id int(11) PRIMARY KEY, dateCreation date NOT NULL);\r\n    CREATE TABLE IF NOT EXISTS form_mvdrecinto(\r\n    \tid_mvdrecinto INTEGER PRIMARY KEY AUTOINCREMENT,\r\n    \tfk_form_id int(11) not null,\r\n    \tlong varchar(20) not null,\r\n    \tFOREIGN KEY (fk_form_id /*&lt;&lt;&lt;&lt;&lt; MUST BE A COLUMN IN THE TABLE */) REFERENCES form(form_id /*&lt;&lt;&lt;&lt;&lt; pretty sureyou want to reference form_id column not the non-existent id_form column*/)\r\n    );\r\n\r\n\r\nAssuming What you would do as an example is to have a method based upon:-\r\n\r\n    void saveFormWithRelatedFormmvdrecinto(long formId, String date, String _long) {\r\n        ContentValues cv = new ContentValues();\r\n        cv.put(&quot;form_id,formId);\r\n        cv.put(&quot;date&quot;,date);\r\n        db.insert(&quot;form&quot;,null,cv);\r\n        cv.clear();\r\n        cv.put(&quot;fk_form_id&quot;,formId);\r\n        cv.put(&quot;long&quot;,_long);\r\n        db.insert(&quot;form_mvdrecinto&quot;,null,cv);\r\n    }\r\n\r\n- obviously db is an SQLiteDatabase.\r\n- due to the ForeignKey constraint the form must be inserted prior to the formmvdrecinto (or formmvdrecintos are inserted).\r\n\r\nAs the SQLiteDatabase **insert** Method uses `INSERT OR IGNORE ....`, the above could be used for an existing form, it would simply ignore inserting the duplicate form and then continue to insert the formmdvrecinto.\r\n\r\nIt appears that you may have the misconception that FOREIGN KEY builds relationships automatically. It DOES NOT (**it cannot**) you have to indicate the actual relationship. FOREIGN KEY is a constraint, a rule, that says that the column(s) in the table with the foreign key MUST contain a value that exists in the REFRENECED column(s) in the REFRENCED TABLE otherwise a conflict (failure) will result. INSERT OR IGNORE does not ignore such a conflict. \r\n\r\n**Demonstration**\r\n\r\nThe following is a working demonstration based upon the tables above. In addition to using a known form id for the insertion of form_mvdrecinto rows (it ads 2 such rows). It also demonstrates a more precarious insertion based upon the dateCreated (if not unique then the form_mvdrecinto inserted will be an arbritary row where the datecreated is matched).\r\n\r\nFirst most of the code is in the **DatabaseHelper** class it being :-\r\n\r\n    class DatabaseHelper extends SQLiteOpenHelper {\r\n    \r\n       public static final String DATABASE_NAME = &quot;the_database.db&quot;;\r\n       public static final int DATABASE_VERSION = 1;\r\n       public static final String FORM_TABLE = &quot;form&quot;;\r\n       public static final String COL_FORM_FORMID = &quot;form_id&quot;;\r\n       public static final String COL_FORM_DATECREATION = &quot;date_creation&quot;;\r\n       public static final String FORM_MVDRECINTO_TABLE = &quot;form_mvdrecinto&quot;;\r\n       public static final String COL_FORMMVDRECINTO_FORMMVDRECINTO_ID = &quot;id_mvdrecinto&quot;;\r\n       public static final String COL_FORMMVDRECINTO_FK_FORM_ID = &quot;fk_form_id&quot;;\r\n       public static final String COL_FORMMVDRECINTO_LONG = &quot;long&quot;;\r\n    \r\n       private static volatile DatabaseHelper instance = null;\r\n       private SQLiteDatabase db;\r\n    \r\n    \r\n       private DatabaseHelper(Context context) {\r\n          super(context, DATABASE_NAME,null, DATABASE_VERSION);\r\n          db = this.getWritableDatabase();\r\n          /* By defauly Foreign Keys are not turned no, so turn them on */\r\n          db.setForeignKeyConstraintsEnabled(true);\r\n       }\r\n    \r\n       public static DatabaseHelper getInstance(Context context) {\r\n          if (instance == null) {\r\n             instance = new DatabaseHelper(context);\r\n          }\r\n          return instance;\r\n       }\r\n    \r\n       @Override\r\n       public void onCreate(SQLiteDatabase db) {\r\n          db.execSQL(\r\n                  &quot;CREATE TABLE IF NOT EXISTS &quot; + FORM_TABLE + &quot; (&quot;\r\n                          + COL_FORM_FORMID + &quot; INTEGER PRIMARY KEY &quot;\r\n                          +&quot;,&quot; + COL_FORM_DATECREATION + &quot; date NOT NULL&quot;\r\n                          + &quot;);&quot;\r\n          );\r\n          db.execSQL(\r\n                  &quot;CREATE TABLE IF NOT EXISTS &quot; + FORM_MVDRECINTO_TABLE +&quot;(&quot;\r\n                          + COL_FORMMVDRECINTO_FORMMVDRECINTO_ID + &quot; INTEGER PRIMARY KEY&quot;\r\n                          + &quot;,&quot; + COL_FORMMVDRECINTO_FK_FORM_ID + &quot; INTEGER NOT NULL&quot;\r\n                          + &quot;,&quot; + COL_FORMMVDRECINTO_LONG + &quot; TEXT NOT NULL&quot;\r\n                          + &quot;, FOREIGN KEY (&quot; + COL_FORMMVDRECINTO_FK_FORM_ID + &quot;) REFERENCES &quot; + FORM_TABLE + &quot;(&quot; + COL_FORM_FORMID + &quot;)&quot;\r\n                          + &quot;);&quot;\r\n          );\r\n       }\r\n    \r\n       public long insertForm(Long id, String dateCreated) {\r\n          ContentValues cv = new ContentValues();\r\n          if (id != null &amp;&amp; id &gt; 0) {\r\n             cv.put(COL_FORM_FORMID,id);\r\n          }\r\n          cv.put(COL_FORM_DATECREATION,dateCreated);\r\n          return db.insert(FORM_TABLE,null,cv);\r\n       }\r\n    \r\n       public long insertForm(String dateCreated) {\r\n          return insertForm(null,dateCreated);\r\n       }\r\n    \r\n       public long insertFormMVDRecinto(Long id, long form_id, String _long) {\r\n          ContentValues cv = new ContentValues();\r\n          if (id != null &amp;&amp; id &gt; 0) {\r\n             cv.put(COL_FORMMVDRECINTO_FORMMVDRECINTO_ID,id);;\r\n          }\r\n          cv.put(COL_FORMMVDRECINTO_FK_FORM_ID,form_id);\r\n          cv.put(COL_FORMMVDRECINTO_LONG,_long);\r\n          return db.insert(FORM_MVDRECINTO_TABLE,null,cv);\r\n       }\r\n    \r\n       public long insertFormMVDRecinto(long form_id, String _long) {\r\n          return insertFormMVDRecinto(null,form_id,_long);\r\n       }\r\n    \r\n       @SuppressLint(&quot;Range&quot;)\r\n       public long insertFormMVDRecinto(Long id, String dateCreated, String _long) {\r\n          long rv = -1;\r\n          Cursor csr = db.query(FORM_TABLE,new String[]{COL_FORM_FORMID},COL_FORM_DATECREATION + &quot;=?&quot;,new String[]{dateCreated},null,null,null,&quot;1&quot;);\r\n          if (csr.moveToFirst()) {\r\n             rv = insertFormMVDRecinto(id,csr.getLong(csr.getColumnIndex(COL_FORM_FORMID)),_long);\r\n          }\r\n          return rv;\r\n       }\r\n    \r\n       @Override\r\n       public void onUpgrade(SQLiteDatabase db, int i, int i1) {\r\n    \r\n       }\r\n    }\r\n\r\nTo actually demonstrate the following **MainActivity** is an activity which :-\r\n\r\n- Adds 3 Form rows\r\n- Adds 3 Form_mvdrecinto rows\r\n    - The first two being added using the known form_id.\r\n    - The last is added according to a known **dateCreated** value.\r\n- Tries to add a 4th Form_mdvrecinto row BUT with a dateCreated that IS NOT in any rows *(due to the no row being extracted the attempt to insert a row which would result in a FK conflict is not attempted)*.\r\n\r\n:-\r\n\r\n    public class MainActivity extends AppCompatActivity {\r\n    \r\n        DatabaseHelper dbhelper;\r\n    \r\n        @Override\r\n        protected void onCreate(Bundle savedInstanceState) {\r\n            super.onCreate(savedInstanceState);\r\n            setContentView(R.layout.activity_main);\r\n            dbhelper = DatabaseHelper.getInstance(this);\r\n    \r\n            long f1 = dbhelper.insertForm(10L,&quot;2021-02-10 10:21:13&quot;); /* id will be 10 */\r\n            long f2 = dbhelper.insertForm(&quot;2021-02-10 11:13:55&quot;); /* id will probably be 11 */\r\n            long f3 = dbhelper.insertForm(1000l,&quot;2021-02-10 09:00:00&quot;);\r\n    \r\n            long fm1 = dbhelper.insertFormMVDRecinto(f1,&quot;Blah001&quot;);\r\n            long fm2 = dbhelper.insertFormMVDRecinto(100l,f1,&quot;Blah002&quot;);\r\n    \r\n            /* WARNING if more than 1 form with 2021-02-10 09:00:00 then could be related to any 1 */\r\n            long fm3 = dbhelper.insertFormMVDRecinto(null,&quot;2021-02-10 09:00:00&quot;,&quot;Blah003&quot;);\r\n            /* WILL NOT INSERT as no such dateCreated value in the Form table*/\r\n            /* does not attempt to insert into the Form_mdvrecinto because the row is not found/extracted */\r\n            long fm4 = dbhelper.insertFormMVDRecinto(null,&quot;NOT A DATE THAT WOULD EXIST&quot;,&quot;Blah004&quot;);\r\n        }\r\n    }\r\n\r\n","title":"How to insert records in related tables with the ContentValues ​method","body":"<p>The method is the convenience insert method which simplifies the construction of INSERT SQL statements based upon a ContentValues.</p>\n<p>SQL does not allow the insertion of rows into multiple tables. So you cannot insert into both tables in a single use of the insert method. Furthermore the insertion into the <strong>form_mvdrecinto</strong> requires you to know the value of the foreign key.</p>\n<p>First you have various problems with the SQL.</p>\n<p>I believe that you need/want something like ():-</p>\n<pre><code>CREATE TABLE IF NOT EXISTS form /* TABLE NAME AFTER, NOT BEFORE THE CREATE KEYWORD/CLAUSE */(form_id int(11) PRIMARY KEY, dateCreation date NOT NULL);\nCREATE TABLE IF NOT EXISTS form_mvdrecinto(\n    id_mvdrecinto INTEGER PRIMARY KEY AUTOINCREMENT,\n    fk_form_id int(11) not null,\n    long varchar(20) not null,\n    FOREIGN KEY (fk_form_id /*&lt;&lt;&lt;&lt;&lt; MUST BE A COLUMN IN THE TABLE */) REFERENCES form(form_id /*&lt;&lt;&lt;&lt;&lt; pretty sureyou want to reference form_id column not the non-existent id_form column*/)\n);\n</code></pre>\n<p>Assuming What you would do as an example is to have a method based upon:-</p>\n<pre><code>void saveFormWithRelatedFormmvdrecinto(long formId, String date, String _long) {\n    ContentValues cv = new ContentValues();\n    cv.put(&quot;form_id,formId);\n    cv.put(&quot;date&quot;,date);\n    db.insert(&quot;form&quot;,null,cv);\n    cv.clear();\n    cv.put(&quot;fk_form_id&quot;,formId);\n    cv.put(&quot;long&quot;,_long);\n    db.insert(&quot;form_mvdrecinto&quot;,null,cv);\n}\n</code></pre>\n<ul>\n<li>obviously db is an SQLiteDatabase.</li>\n<li>due to the ForeignKey constraint the form must be inserted prior to the formmvdrecinto (or formmvdrecintos are inserted).</li>\n</ul>\n<p>As the SQLiteDatabase <strong>insert</strong> Method uses <code>INSERT OR IGNORE ....</code>, the above could be used for an existing form, it would simply ignore inserting the duplicate form and then continue to insert the formmdvrecinto.</p>\n<p>It appears that you may have the misconception that FOREIGN KEY builds relationships automatically. It DOES NOT (<strong>it cannot</strong>) you have to indicate the actual relationship. FOREIGN KEY is a constraint, a rule, that says that the column(s) in the table with the foreign key MUST contain a value that exists in the REFRENECED column(s) in the REFRENCED TABLE otherwise a conflict (failure) will result. INSERT OR IGNORE does not ignore such a conflict.</p>\n<p><strong>Demonstration</strong></p>\n<p>The following is a working demonstration based upon the tables above. In addition to using a known form id for the insertion of form_mvdrecinto rows (it ads 2 such rows). It also demonstrates a more precarious insertion based upon the dateCreated (if not unique then the form_mvdrecinto inserted will be an arbritary row where the datecreated is matched).</p>\n<p>First most of the code is in the <strong>DatabaseHelper</strong> class it being :-</p>\n<pre><code>class DatabaseHelper extends SQLiteOpenHelper {\n\n   public static final String DATABASE_NAME = &quot;the_database.db&quot;;\n   public static final int DATABASE_VERSION = 1;\n   public static final String FORM_TABLE = &quot;form&quot;;\n   public static final String COL_FORM_FORMID = &quot;form_id&quot;;\n   public static final String COL_FORM_DATECREATION = &quot;date_creation&quot;;\n   public static final String FORM_MVDRECINTO_TABLE = &quot;form_mvdrecinto&quot;;\n   public static final String COL_FORMMVDRECINTO_FORMMVDRECINTO_ID = &quot;id_mvdrecinto&quot;;\n   public static final String COL_FORMMVDRECINTO_FK_FORM_ID = &quot;fk_form_id&quot;;\n   public static final String COL_FORMMVDRECINTO_LONG = &quot;long&quot;;\n\n   private static volatile DatabaseHelper instance = null;\n   private SQLiteDatabase db;\n\n\n   private DatabaseHelper(Context context) {\n      super(context, DATABASE_NAME,null, DATABASE_VERSION);\n      db = this.getWritableDatabase();\n      /* By defauly Foreign Keys are not turned no, so turn them on */\n      db.setForeignKeyConstraintsEnabled(true);\n   }\n\n   public static DatabaseHelper getInstance(Context context) {\n      if (instance == null) {\n         instance = new DatabaseHelper(context);\n      }\n      return instance;\n   }\n\n   @Override\n   public void onCreate(SQLiteDatabase db) {\n      db.execSQL(\n              &quot;CREATE TABLE IF NOT EXISTS &quot; + FORM_TABLE + &quot; (&quot;\n                      + COL_FORM_FORMID + &quot; INTEGER PRIMARY KEY &quot;\n                      +&quot;,&quot; + COL_FORM_DATECREATION + &quot; date NOT NULL&quot;\n                      + &quot;);&quot;\n      );\n      db.execSQL(\n              &quot;CREATE TABLE IF NOT EXISTS &quot; + FORM_MVDRECINTO_TABLE +&quot;(&quot;\n                      + COL_FORMMVDRECINTO_FORMMVDRECINTO_ID + &quot; INTEGER PRIMARY KEY&quot;\n                      + &quot;,&quot; + COL_FORMMVDRECINTO_FK_FORM_ID + &quot; INTEGER NOT NULL&quot;\n                      + &quot;,&quot; + COL_FORMMVDRECINTO_LONG + &quot; TEXT NOT NULL&quot;\n                      + &quot;, FOREIGN KEY (&quot; + COL_FORMMVDRECINTO_FK_FORM_ID + &quot;) REFERENCES &quot; + FORM_TABLE + &quot;(&quot; + COL_FORM_FORMID + &quot;)&quot;\n                      + &quot;);&quot;\n      );\n   }\n\n   public long insertForm(Long id, String dateCreated) {\n      ContentValues cv = new ContentValues();\n      if (id != null &amp;&amp; id &gt; 0) {\n         cv.put(COL_FORM_FORMID,id);\n      }\n      cv.put(COL_FORM_DATECREATION,dateCreated);\n      return db.insert(FORM_TABLE,null,cv);\n   }\n\n   public long insertForm(String dateCreated) {\n      return insertForm(null,dateCreated);\n   }\n\n   public long insertFormMVDRecinto(Long id, long form_id, String _long) {\n      ContentValues cv = new ContentValues();\n      if (id != null &amp;&amp; id &gt; 0) {\n         cv.put(COL_FORMMVDRECINTO_FORMMVDRECINTO_ID,id);;\n      }\n      cv.put(COL_FORMMVDRECINTO_FK_FORM_ID,form_id);\n      cv.put(COL_FORMMVDRECINTO_LONG,_long);\n      return db.insert(FORM_MVDRECINTO_TABLE,null,cv);\n   }\n\n   public long insertFormMVDRecinto(long form_id, String _long) {\n      return insertFormMVDRecinto(null,form_id,_long);\n   }\n\n   @SuppressLint(&quot;Range&quot;)\n   public long insertFormMVDRecinto(Long id, String dateCreated, String _long) {\n      long rv = -1;\n      Cursor csr = db.query(FORM_TABLE,new String[]{COL_FORM_FORMID},COL_FORM_DATECREATION + &quot;=?&quot;,new String[]{dateCreated},null,null,null,&quot;1&quot;);\n      if (csr.moveToFirst()) {\n         rv = insertFormMVDRecinto(id,csr.getLong(csr.getColumnIndex(COL_FORM_FORMID)),_long);\n      }\n      return rv;\n   }\n\n   @Override\n   public void onUpgrade(SQLiteDatabase db, int i, int i1) {\n\n   }\n}\n</code></pre>\n<p>To actually demonstrate the following <strong>MainActivity</strong> is an activity which :-</p>\n<ul>\n<li>Adds 3 Form rows</li>\n<li>Adds 3 Form_mvdrecinto rows\n<ul>\n<li>The first two being added using the known form_id.</li>\n<li>The last is added according to a known <strong>dateCreated</strong> value.</li>\n</ul>\n</li>\n<li>Tries to add a 4th Form_mdvrecinto row BUT with a dateCreated that IS NOT in any rows <em>(due to the no row being extracted the attempt to insert a row which would result in a FK conflict is not attempted)</em>.</li>\n</ul>\n<p>:-</p>\n<pre><code>public class MainActivity extends AppCompatActivity {\n\n    DatabaseHelper dbhelper;\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_main);\n        dbhelper = DatabaseHelper.getInstance(this);\n\n        long f1 = dbhelper.insertForm(10L,&quot;2021-02-10 10:21:13&quot;); /* id will be 10 */\n        long f2 = dbhelper.insertForm(&quot;2021-02-10 11:13:55&quot;); /* id will probably be 11 */\n        long f3 = dbhelper.insertForm(1000l,&quot;2021-02-10 09:00:00&quot;);\n\n        long fm1 = dbhelper.insertFormMVDRecinto(f1,&quot;Blah001&quot;);\n        long fm2 = dbhelper.insertFormMVDRecinto(100l,f1,&quot;Blah002&quot;);\n\n        /* WARNING if more than 1 form with 2021-02-10 09:00:00 then could be related to any 1 */\n        long fm3 = dbhelper.insertFormMVDRecinto(null,&quot;2021-02-10 09:00:00&quot;,&quot;Blah003&quot;);\n        /* WILL NOT INSERT as no such dateCreated value in the Form table*/\n        /* does not attempt to insert into the Form_mdvrecinto because the row is not found/extracted */\n        long fm4 = dbhelper.insertFormMVDRecinto(null,&quot;NOT A DATE THAT WOULD EXIST&quot;,&quot;Blah004&quot;);\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":24207207,"reputation":1,"user_id":18164233,"display_name":"Felipe Pipe"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":185,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1644468138,"creation_date":1644433714,"question_id":71055333,"body_markdown":"I&#39;m trying to insert data into related tables, but I&#39;ve searched many forums and no option works for me, I&#39;m just starting out with this.\r\n\r\nThe tables are the following:\r\n\r\nTable 1:\r\n\r\n    form CREATE TABLE(\r\n      form_id int(11) PRIMARY KEY,\r\n      dateCreation date NOT NULL);\r\n\r\ntables 2:\r\n\r\n    create table form_mvdrecinto(\r\n    id_mvdrecinto INTEGER PRIMARY KEY AUTOINCREMENT,\r\n    fk_form_id int(11) not null,\r\n    long varchar(20) not null,\r\n    FOREIGN KEY(id_formulario_fk) REFERENCES form(id_form));\r\n\r\nIn the save method is where I have the problem, specifically in the ContentValues, how the exact statement should be in my case to insert the data in both related tables.\r\n\r\nThank you.","title":"How to insert records in related tables with the ContentValues ​method","body":"<p>I'm trying to insert data into related tables, but I've searched many forums and no option works for me, I'm just starting out with this.</p>\n<p>The tables are the following:</p>\n<p>Table 1:</p>\n<pre><code>form CREATE TABLE(\n  form_id int(11) PRIMARY KEY,\n  dateCreation date NOT NULL);\n</code></pre>\n<p>tables 2:</p>\n<pre><code>create table form_mvdrecinto(\nid_mvdrecinto INTEGER PRIMARY KEY AUTOINCREMENT,\nfk_form_id int(11) not null,\nlong varchar(20) not null,\nFOREIGN KEY(id_formulario_fk) REFERENCES form(id_form));\n</code></pre>\n<p>In the save method is where I have the problem, specifically in the ContentValues, how the exact statement should be in my case to insert the data in both related tables.</p>\n<p>Thank you.</p>\n"},{"tags":["java","android","spinner"],"comments":[{"owner":{"account_id":7165321,"reputation":6023,"user_id":8244632,"accept_rate":100,"display_name":"Lalit Fauzdar"},"score":1,"creation_date":1593211965,"post_id":62603502,"comment_id":110710597,"body_markdown":"You&#39;re updating the `ArrayList` after assigning it to the adapter. By default, `Spinner` doesn&#39;t keep a reference to the original list added to the adapter so to retain the changes you should use what has been provided here in [this](https://stackoverflow.com/a/45192458/8244632) link.","body":"You&#39;re updating the <code>ArrayList</code> after assigning it to the adapter. By default, <code>Spinner</code> doesn&#39;t keep a reference to the original list added to the adapter so to retain the changes you should use what has been provided here in <a href=\"https://stackoverflow.com/a/45192458/8244632\">this</a> link."}],"answers":[{"tags":[],"owner":{"account_id":18549361,"reputation":248,"user_id":13515909,"display_name":"Chetan Khanna"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1593211945,"creation_date":1593211945,"answer_id":62603896,"question_id":62603502,"body_markdown":"What you are doing is you are changing your ArrayList after setting up the adapter.\r\nSo adapter doesn&#39;t know that the data is changed.\r\n\r\nYou can solve this in 2 ways :\r\n\r\n1) Add elements in the ArrayList before setting up the adapter\r\n\r\n2) Use  notifyDataSetChanged() at the end of the code or whenever you change the ArrayList\r\n\r\nLike this :  `spinnerAdapter.notifyDataSetChanged()`","title":"Spinner doesn&#39;t show array and texts","body":"<p>What you are doing is you are changing your ArrayList after setting up the adapter.\nSo adapter doesn't know that the data is changed.</p>\n<p>You can solve this in 2 ways :</p>\n<ol>\n<li><p>Add elements in the ArrayList before setting up the adapter</p>\n</li>\n<li><p>Use  notifyDataSetChanged() at the end of the code or whenever you change the ArrayList</p>\n</li>\n</ol>\n<p>Like this :  <code>spinnerAdapter.notifyDataSetChanged()</code></p>\n"},{"tags":[],"owner":{"account_id":14612757,"reputation":126,"user_id":10553764,"display_name":"Darkmoon Chief"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1593212733,"creation_date":1593212733,"answer_id":62604028,"question_id":62603502,"body_markdown":"There is no need to create `ArrayAdapter` to populate your spinner if the list you want to insert is static.\r\nI recommend using a way easier and direct method to avoid this hassle.\r\n\r\nIn  **strings.xml**:\r\n\r\n    &lt;string-array name=&quot;list_spinner&quot;&gt;\r\n    &lt;item&gt;Guitar&lt;/item&gt;\r\n    &lt;item&gt;Drums&lt;/item&gt;\r\n    &lt;item&gt;Keyboard&lt;/item&gt;\r\n    &lt;/string-array&gt;\r\nIn the layout that contains your spinner:\r\n\r\n    &lt;Spinner \r\n            android:id=&quot;@+id/spinner&quot;\r\n            android:layout_width=&quot;fill_parent&quot;\r\n            android:layout_height=&quot;wrap_content&quot;\r\n            android:entries=&quot;@array/list_spinner&quot;\r\n        /&gt;\r\nAnd You&#39;re Done!\r\n\r\n**EXTRA:**\r\nIf you want to make your spinner responsive to item selection in your spinner, add this code to the corresponding .java file of the layout containing the spinner in the `onCreate()` method:\r\n\r\n    final Spinner spin=findViewById(R.id.spinner);\r\n    spin.setOnItemSelectedListener(new OnItemSelectedListener() {\r\n    \r\n                @Override\r\n                public void onItemSelected(AdapterView&lt;?&gt; arg0, View arg1,\r\n                        int arg2, long arg3) {\r\n                    // TODO Auto-generated method stub\r\n                    String item_name=spin.getSelectedItem().toString();\r\n    \r\n                    Log.e(&quot;Selected item : &quot;,item_name);\r\n    }\r\n    \r\n                @Override\r\n                public void onNothingSelected(AdapterView&lt;?&gt; arg0) {\r\n                    // TODO Auto-generated method stub\r\n    \r\n                }\r\n        });","title":"Spinner doesn&#39;t show array and texts","body":"<p>There is no need to create <code>ArrayAdapter</code> to populate your spinner if the list you want to insert is static.\nI recommend using a way easier and direct method to avoid this hassle.</p>\n<p>In  <strong>strings.xml</strong>:</p>\n<pre><code>&lt;string-array name=&quot;list_spinner&quot;&gt;\n&lt;item&gt;Guitar&lt;/item&gt;\n&lt;item&gt;Drums&lt;/item&gt;\n&lt;item&gt;Keyboard&lt;/item&gt;\n&lt;/string-array&gt;\n</code></pre>\n<p>In the layout that contains your spinner:</p>\n<pre><code>&lt;Spinner \n        android:id=&quot;@+id/spinner&quot;\n        android:layout_width=&quot;fill_parent&quot;\n        android:layout_height=&quot;wrap_content&quot;\n        android:entries=&quot;@array/list_spinner&quot;\n    /&gt;\n</code></pre>\n<p>And You're Done!</p>\n<p><strong>EXTRA:</strong>\nIf you want to make your spinner responsive to item selection in your spinner, add this code to the corresponding .java file of the layout containing the spinner in the <code>onCreate()</code> method:</p>\n<pre><code>final Spinner spin=findViewById(R.id.spinner);\nspin.setOnItemSelectedListener(new OnItemSelectedListener() {\n\n            @Override\n            public void onItemSelected(AdapterView&lt;?&gt; arg0, View arg1,\n                    int arg2, long arg3) {\n                // TODO Auto-generated method stub\n                String item_name=spin.getSelectedItem().toString();\n\n                Log.e(&quot;Selected item : &quot;,item_name);\n}\n\n            @Override\n            public void onNothingSelected(AdapterView&lt;?&gt; arg0) {\n                // TODO Auto-generated method stub\n\n            }\n    });\n</code></pre>\n"}],"owner":{"account_id":18941877,"reputation":31,"user_id":13821723,"display_name":"Himenez"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":202,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":2,"score":3,"last_activity_date":1644468022,"creation_date":1593209602,"question_id":62603502,"body_markdown":"The spinner doesn&#39;t work.\r\nIt didn&#39;t use to show arrow when I was just playing with it in design mode, it&#39;s not showing text after I implemented it with some code somehow.\r\n\r\n```\r\n    &lt;Spinner\r\n        android:id=&quot;@+id/spinner&quot;\r\n        android:layout_width=&quot;match_parent&quot;\r\n        android:layout_height=&quot;wrap_content&quot;\r\n        /&gt;\r\n```\r\n\r\n    \r\n    Spinner spinner;\r\n    ArrayList spinnerArrayList;\r\n    ArrayAdapter spinnerAdapter;\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState)\r\n    {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_main);\r\n\r\n        spinner = findViewById(R.id.spinner);\r\n        spinnerArrayList = new ArrayList();\r\n        spinnerAdapter = new ArrayAdapter(this,android.R.layout.simple_spinner_item,spinnerArrayList);\r\n        spinnerAdapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);\r\n        spinner.setAdapter(spinnerAdapter);\r\n\r\n        spinnerArrayList.add(&quot;Guitar&quot;);\r\n        spinnerArrayList.add(&quot;Drums&quot;);\r\n        spinnerArrayList.add(&quot;Keyboard&quot;);\r\n\r\n    }","title":"Spinner doesn&#39;t show array and texts","body":"<p>The spinner doesn't work.\nIt didn't use to show arrow when I was just playing with it in design mode, it's not showing text after I implemented it with some code somehow.</p>\n<pre><code>    &lt;Spinner\n        android:id=&quot;@+id/spinner&quot;\n        android:layout_width=&quot;match_parent&quot;\n        android:layout_height=&quot;wrap_content&quot;\n        /&gt;\n</code></pre>\n<pre><code>Spinner spinner;\nArrayList spinnerArrayList;\nArrayAdapter spinnerAdapter;\n\n@Override\nprotected void onCreate(Bundle savedInstanceState)\n{\n    super.onCreate(savedInstanceState);\n    setContentView(R.layout.activity_main);\n\n    spinner = findViewById(R.id.spinner);\n    spinnerArrayList = new ArrayList();\n    spinnerAdapter = new ArrayAdapter(this,android.R.layout.simple_spinner_item,spinnerArrayList);\n    spinnerAdapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);\n    spinner.setAdapter(spinnerAdapter);\n\n    spinnerArrayList.add(&quot;Guitar&quot;);\n    spinnerArrayList.add(&quot;Drums&quot;);\n    spinnerArrayList.add(&quot;Keyboard&quot;);\n\n}\n</code></pre>\n"},{"tags":["java","memory-management","garbage-collection","hashmap","jvm"],"comments":[{"owner":{"account_id":78181,"reputation":46967,"user_id":222674,"accept_rate":97,"display_name":"Petar Minchev"},"score":6,"creation_date":1306528123,"post_id":6157363,"comment_id":7153238,"body_markdown":"It depends on what it contains...","body":"It depends on what it contains..."},{"owner":{"account_id":306110,"reputation":5678,"user_id":616666,"accept_rate":63,"display_name":"insomiac"},"score":0,"creation_date":1306528324,"post_id":6157363,"comment_id":7153279,"body_markdown":"@petar Minchev: it stores value in the map, they wanted me to calculate total memory usage.  This was confusing as it had one key and multiple values.","body":"@petar Minchev: it stores value in the map, they wanted me to calculate total memory usage.  This was confusing as it had one key and multiple values."},{"owner":{"account_id":266709,"reputation":11846,"user_id":554431,"display_name":"bestsss"},"score":0,"creation_date":1306528494,"post_id":6157363,"comment_id":7153324,"body_markdown":"@Petar, the hashmap memory allocation is *not* the entire rertained size, it&#39;s the overhead of using it (i.e. shallow size)","body":"@Petar, the hashmap memory allocation is <i>not</i> the entire rertained size, it&#39;s the overhead of using it (i.e. shallow size)"},{"owner":{"account_id":266709,"reputation":11846,"user_id":554431,"display_name":"bestsss"},"score":0,"creation_date":1306530822,"post_id":6157363,"comment_id":7153850,"body_markdown":"huh, now i notice the *multiple* values edition... the question has degraded so badly :(","body":"huh, now i notice the <i>multiple</i> values edition... the question has degraded so badly :("},{"owner":{"account_id":262968,"reputation":767120,"user_id":548225,"accept_rate":90,"display_name":"anubhava"},"score":0,"creation_date":1306531386,"post_id":6157363,"comment_id":7153947,"body_markdown":"Take a look at: http://www.roseindia.net/javatutorials/determining_memory_usage_in_java.shtml","body":"Take a look at: <a href=\"http://www.roseindia.net/javatutorials/determining_memory_usage_in_java.shtml\" rel=\"nofollow noreferrer\">roseindia.net/javatutorials/&hellip;</a>"},{"owner":{"account_id":104480,"reputation":6890,"user_id":279320,"accept_rate":76,"display_name":"Yohan Liyanage"},"score":0,"creation_date":1306567426,"post_id":6157363,"comment_id":7157479,"body_markdown":"I guess the idea behind the question was not to get an exact answer, but to see how you approach it and lay out the answer? Probably they were looking at something like explaining that Strings in Java are kept in a constant pool, so it is difficult to say without knowing whether there are duplicate strings, and whether those are mapped to one constant or a new object is created, and so on...","body":"I guess the idea behind the question was not to get an exact answer, but to see how you approach it and lay out the answer? Probably they were looking at something like explaining that Strings in Java are kept in a constant pool, so it is difficult to say without knowing whether there are duplicate strings, and whether those are mapped to one constant or a new object is created, and so on..."},{"owner":{"account_id":266709,"reputation":11846,"user_id":554431,"display_name":"bestsss"},"score":0,"creation_date":1306603193,"post_id":6157363,"comment_id":7161632,"body_markdown":"@Yohan, Strings in java are not kept in a constant pool but in the heap.The ones in the constant pool are in the perm-gen and they are literals only (class names are are also literals, for example)","body":"@Yohan, Strings in java are not kept in a constant pool but in the heap.The ones in the constant pool are in the perm-gen and they are literals only (class names are are also literals, for example)"},{"owner":{"account_id":104480,"reputation":6890,"user_id":279320,"accept_rate":76,"display_name":"Yohan Liyanage"},"score":0,"creation_date":1306604647,"post_id":6157363,"comment_id":7161884,"body_markdown":"@bestsss I know that the memory is allocated in the heap. But what happens is, when you say String s = &quot;abc&quot;, if &quot;abc&quot; is not in the constant pool, memory is allocated for it and the literal is added to the pool. Next time you say String x = &quot;abc&quot;, it refers to the same instance, and no new object is created (thus no memory allocation). But if you say new String(&quot;abc&quot;) then memory is allocated for the new instance. Therefore, unless you know how those Strings are created, you can&#39;t say this much of memory is used. And by the way, PermGen is also part of the heap.","body":"@bestsss I know that the memory is allocated in the heap. But what happens is, when you say String s = &quot;abc&quot;, if &quot;abc&quot; is not in the constant pool, memory is allocated for it and the literal is added to the pool. Next time you say String x = &quot;abc&quot;, it refers to the same instance, and no new object is created (thus no memory allocation). But if you say new String(&quot;abc&quot;) then memory is allocated for the new instance. Therefore, unless you know how those Strings are created, you can&#39;t say this much of memory is used. And by the way, PermGen is also part of the heap."},{"owner":{"account_id":280629,"reputation":5238,"user_id":576448,"accept_rate":40,"display_name":"peterk"},"score":0,"creation_date":1370377257,"post_id":6157363,"comment_id":24435868,"body_markdown":"I would interpret the question ( and ask the interviewer to clarify indicating you understand the ambiguity ) if he means how much memory the hashmap uses to reference the data and keys only as it only storing the handles and keys without the data) vs with the data and keys.  As they are both relevant parts of the same question.  I found this question because I wanted to know if someone had run and posted a set of benchmarks of what a hastable would use in this way given a perfect/typical/optimal/bad distribution in the table ( ie: table utilization )","body":"I would interpret the question ( and ask the interviewer to clarify indicating you understand the ambiguity ) if he means how much memory the hashmap uses to reference the data and keys only as it only storing the handles and keys without the data) vs with the data and keys.  As they are both relevant parts of the same question.  I found this question because I wanted to know if someone had run and posted a set of benchmarks of what a hastable would use in this way given a perfect/typical/optimal/bad distribution in the table ( ie: table utilization )"},{"owner":{"account_id":284109,"reputation":47153,"user_id":581994,"accept_rate":57,"display_name":"Hot Licks"},"score":0,"creation_date":1407272932,"post_id":6157363,"comment_id":39148691,"body_markdown":"Three approaches:  1) Look at the HashMap source, make an &quot;educated&quot; guess what each sub-object occupies (as well as the Strings and arrays), and add together.  2) Use a storage profiling tool.  3) Pull a number out of somewhere.","body":"Three approaches:  1) Look at the HashMap source, make an &quot;educated&quot; guess what each sub-object occupies (as well as the Strings and arrays), and add together.  2) Use a storage profiling tool.  3) Pull a number out of somewhere."}],"answers":[{"tags":[],"owner":{"account_id":7808,"reputation":24390,"user_id":13687,"display_name":"John Gardner"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1306528558,"creation_date":1306528558,"answer_id":6157432,"question_id":6157363,"body_markdown":"you can&#39;t know in advance without knowing what all the strings are, and how many items are in each list, or without knowing if the strings are all unique references.\r\n\r\nThe only way to know for sure, is to serialize the whole thing to a byte array (or temp file) and see exactly how many bytes that was.","title":"How to calculate HashMap memory usage in Java?","body":"<p>you can't know in advance without knowing what all the strings are, and how many items are in each list, or without knowing if the strings are all unique references.</p>\n\n<p>The only way to know for sure, is to serialize the whole thing to a byte array (or temp file) and see exactly how many bytes that was.</p>\n"},{"tags":[],"owner":{"account_id":23121,"reputation":527346,"user_id":57695,"accept_rate":75,"display_name":"Peter Lawrey"},"down_vote_count":1,"up_vote_count":26,"is_accepted":true,"score":25,"last_activity_date":1306570415,"creation_date":1306570415,"answer_id":6160485,"question_id":6157363,"body_markdown":"**The short answer**\r\n\r\nTo find out how large an object is, I would use a profiler. In YourKit, for example, you can search for the object and then get it to calculate its deep size.  This will give a you a fair idea of how much memory would be used if the object were stand alone and is a conservative size for the object.\r\n\r\n**The quibbles**\r\n\r\nIf parts of the object are re-used in other structures e.g. String literals, you won&#39;t free this much memory by discarding it. In fact discarding one reference to the HashMap might not free any memory at all.\r\n\r\n*What about Serialisation?*\r\n\r\nSerialising the object is one approach to getting an estimate, but it can be wildly off as the serialisation overhead and encoding is different in memory and to a byte stream.  How much memory is used depends on the JVM (and whether its using 32/64-bit references), but the Serialisation format is always the same.\r\n\r\ne.g.\r\n\r\nIn Sun/Oracle&#39;s JVM, an Integer can take 16 bytes for the header, 4 bytes for the number and 4 bytes padding (the objects are 8-byte aligned in memory), total 24 bytes.  However if you serialise one Integer, it takes 81 bytes, serialise two integers and they takes 91 bytes. i.e. the size of the first Integer is inflated and the second Integer is less than what is used in memory.\r\n\r\nString is a much more complex example. In the Sun/Oracle JVM, it contains 3 `int` values and a `char[]` reference.  So you might assume it uses 16 byte header plus 3 * 4 bytes for the `int`s, 4 bytes for the `char[]`, 16 bytes for the overhead of the `char[]` and then two bytes per char, aligned to 8-byte boundary...\r\n\r\n*What flags can change the size?*\r\n\r\nIf you have 64-bit references, the `char[]` reference is 8 bytes long resulting in 4 bytes of padding. If you have a 64-bit JVM, you can use `+XX:+UseCompressedOops` to use 32-bit references. (So look at the JVM bit size alone doesn&#39;t tell you the size of its references)\r\n\r\nIf you have `-XX:+UseCompressedStrings`, the JVM will use a byte[] instead of a char array when it can. This can slow down your application slightly but could improve you memory consumption dramatically.  When a byte[] in used, the memory consumed is 1 byte per char. ;)  Note: for a 4-char String, as in the example, the size used is the same due to the 8-byte boundary. \r\n\r\n**What do you mean by &quot;size&quot;?**\r\n\r\nAs has been pointed out, HashMap and List is more complex as many, if not all, the Strings can be reused, possibly String literals. What you mean by &quot;size&quot; depends on how it is used. i.e. How much memory would the structure use alone? How much would be freed if the structure were discarded? How much memory would be used if you copied the structure? These questions can have different answers.\r\n\r\n**What can you do without a profiler?**\r\n\r\nIf you can determine that the likely conservative size, is small enough, the exact size doesn&#39;t matter.  The conservative case is likely to where you construct every String and entry from scratch. (I only say likely as a HashMap can have capacity for 1 billion entries even though it is empty. Strings with a single char can be a sub-string of a String with 2 billion characters)\r\n\r\nYou can perform a System.gc(), take the free memory, create the objects, perform another System.gc() and see how much the free memory has reduced. You may need to create the object many times and take an average.  Repeat this exercise many times, but it can give you a fair idea.\r\n\r\n(BTW While System.gc() is only a hint, the Sun/Oracle JVM will perform a Full GC every time by default)\r\n\r\n","title":"How to calculate HashMap memory usage in Java?","body":"<p><strong>The short answer</strong></p>\n\n<p>To find out how large an object is, I would use a profiler. In YourKit, for example, you can search for the object and then get it to calculate its deep size.  This will give a you a fair idea of how much memory would be used if the object were stand alone and is a conservative size for the object.</p>\n\n<p><strong>The quibbles</strong></p>\n\n<p>If parts of the object are re-used in other structures e.g. String literals, you won't free this much memory by discarding it. In fact discarding one reference to the HashMap might not free any memory at all.</p>\n\n<p><em>What about Serialisation?</em></p>\n\n<p>Serialising the object is one approach to getting an estimate, but it can be wildly off as the serialisation overhead and encoding is different in memory and to a byte stream.  How much memory is used depends on the JVM (and whether its using 32/64-bit references), but the Serialisation format is always the same.</p>\n\n<p>e.g.</p>\n\n<p>In Sun/Oracle's JVM, an Integer can take 16 bytes for the header, 4 bytes for the number and 4 bytes padding (the objects are 8-byte aligned in memory), total 24 bytes.  However if you serialise one Integer, it takes 81 bytes, serialise two integers and they takes 91 bytes. i.e. the size of the first Integer is inflated and the second Integer is less than what is used in memory.</p>\n\n<p>String is a much more complex example. In the Sun/Oracle JVM, it contains 3 <code>int</code> values and a <code>char[]</code> reference.  So you might assume it uses 16 byte header plus 3 * 4 bytes for the <code>int</code>s, 4 bytes for the <code>char[]</code>, 16 bytes for the overhead of the <code>char[]</code> and then two bytes per char, aligned to 8-byte boundary...</p>\n\n<p><em>What flags can change the size?</em></p>\n\n<p>If you have 64-bit references, the <code>char[]</code> reference is 8 bytes long resulting in 4 bytes of padding. If you have a 64-bit JVM, you can use <code>+XX:+UseCompressedOops</code> to use 32-bit references. (So look at the JVM bit size alone doesn't tell you the size of its references)</p>\n\n<p>If you have <code>-XX:+UseCompressedStrings</code>, the JVM will use a byte[] instead of a char array when it can. This can slow down your application slightly but could improve you memory consumption dramatically.  When a byte[] in used, the memory consumed is 1 byte per char. ;)  Note: for a 4-char String, as in the example, the size used is the same due to the 8-byte boundary. </p>\n\n<p><strong>What do you mean by \"size\"?</strong></p>\n\n<p>As has been pointed out, HashMap and List is more complex as many, if not all, the Strings can be reused, possibly String literals. What you mean by \"size\" depends on how it is used. i.e. How much memory would the structure use alone? How much would be freed if the structure were discarded? How much memory would be used if you copied the structure? These questions can have different answers.</p>\n\n<p><strong>What can you do without a profiler?</strong></p>\n\n<p>If you can determine that the likely conservative size, is small enough, the exact size doesn't matter.  The conservative case is likely to where you construct every String and entry from scratch. (I only say likely as a HashMap can have capacity for 1 billion entries even though it is empty. Strings with a single char can be a sub-string of a String with 2 billion characters)</p>\n\n<p>You can perform a System.gc(), take the free memory, create the objects, perform another System.gc() and see how much the free memory has reduced. You may need to create the object many times and take an average.  Repeat this exercise many times, but it can give you a fair idea.</p>\n\n<p>(BTW While System.gc() is only a hint, the Sun/Oracle JVM will perform a Full GC every time by default)</p>\n"},{"tags":[],"owner":{"account_id":2680586,"reputation":384,"user_id":2316049,"accept_rate":75,"display_name":"J.M. Kenny"},"down_vote_count":1,"up_vote_count":6,"is_accepted":false,"score":5,"last_activity_date":1366814428,"creation_date":1366814428,"answer_id":16194915,"question_id":6157363,"body_markdown":"I think that the question should be clarified because there is a difference between the size of the HashMap and the size of HashMap + the objects contained by the HashMap.\r\n\r\nIf you consider the size of the HashMap, in the example you provided, the HashMap stores one reference to the String &quot;aby&quot; and one reference to the List. So the multiple elements in the list do not matter. Only the reference to the list is stored in the value.\r\n \r\nIn a 32 bits JVM, in one Map entry, you have 4 bytes for the &quot;aby&quot; reference + 4 bytes for the List reference + 4 bytes for the &quot;hashcode&quot; int property of Map entry + 4 bytes for the &quot;next&quot; property of Map entry. \r\n\r\nYou also add the 4*(X-1) bytes references where the &quot;X&quot; is the number of empty buckets that the HashMap has created when you called the constructor `new HashMap&lt;String,List&lt;String&gt;&gt;()`\r\n. According to [http://docs.oracle.com/javase/6/docs/api/java/util/HashMap.html][1], it should be 16.\r\n\r\nThere are also loadFactor, modCount, threshold and size which are all primitive int type (16 more bytes) and header (8bytes).\r\n\r\nSo in the end, the size of your above HashMap would be 4 + 4 + 1 + (4*15) + 16 + 8 = 93 bytes\r\n\r\nThis is an approximation based on data that are owned by the HashMap. I think that maybe the interviewer was interested in seeing if you were aware of the way HashMap works (the fact for example that the default constructor create and array of 16 buckets for Map entry, the fact that the sizes of the objects stored in the HashMap do not affect the HashMap size since it only store the references).\r\n\r\n\r\nHashMap are so widely used that under certain circumstances, it should be worth using the constructors with initial capacity and load factor.\r\n\r\n\r\n  [1]: http://docs.oracle.com/javase/6/docs/api/java/util/HashMap.html","title":"How to calculate HashMap memory usage in Java?","body":"<p>I think that the question should be clarified because there is a difference between the size of the HashMap and the size of HashMap + the objects contained by the HashMap.</p>\n\n<p>If you consider the size of the HashMap, in the example you provided, the HashMap stores one reference to the String \"aby\" and one reference to the List. So the multiple elements in the list do not matter. Only the reference to the list is stored in the value.</p>\n\n<p>In a 32 bits JVM, in one Map entry, you have 4 bytes for the \"aby\" reference + 4 bytes for the List reference + 4 bytes for the \"hashcode\" int property of Map entry + 4 bytes for the \"next\" property of Map entry. </p>\n\n<p>You also add the 4*(X-1) bytes references where the \"X\" is the number of empty buckets that the HashMap has created when you called the constructor <code>new HashMap&lt;String,List&lt;String&gt;&gt;()</code>\n. According to <a href=\"http://docs.oracle.com/javase/6/docs/api/java/util/HashMap.html\" rel=\"noreferrer\">http://docs.oracle.com/javase/6/docs/api/java/util/HashMap.html</a>, it should be 16.</p>\n\n<p>There are also loadFactor, modCount, threshold and size which are all primitive int type (16 more bytes) and header (8bytes).</p>\n\n<p>So in the end, the size of your above HashMap would be 4 + 4 + 1 + (4*15) + 16 + 8 = 93 bytes</p>\n\n<p>This is an approximation based on data that are owned by the HashMap. I think that maybe the interviewer was interested in seeing if you were aware of the way HashMap works (the fact for example that the default constructor create and array of 16 buckets for Map entry, the fact that the sizes of the objects stored in the HashMap do not affect the HashMap size since it only store the references).</p>\n\n<p>HashMap are so widely used that under certain circumstances, it should be worth using the constructors with initial capacity and load factor.</p>\n"},{"tags":[],"owner":{"account_id":455892,"reputation":6866,"user_id":854342,"accept_rate":17,"display_name":"Curtis Yallop"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1644467694,"creation_date":1644467694,"answer_id":71059858,"question_id":6157363,"body_markdown":"```\r\nSummary:\r\n\r\nmemory = hashmap_array_size*bucket_size\r\n+ n*chained_list_node_size\r\n+ sum(key string sizes)\r\n+ sum(list_string_size(string_list) for each hashmap List&lt;String&gt; value)\r\n\r\n= 254 MB\r\n(theoretical in-interview estimate)\r\n\r\nTest program total-memory-used-size for 2 million sample entries: (see below)\r\n= 640 MB\r\n(I recommend a simple test program like this for a quick true-total-size estimate)\r\n```\r\n\r\nA minimal estimate (actual implementation probably has a bit more overhead):\r\n\r\nAssumed data structure:\r\n\r\n```\r\nBucket: (Pointer to String key, Pointer to hash-chain-list first-node)\r\n\r\nChained List Node: (Pointer to List&lt;String&gt; value, Next-pointer)\r\n(HashMap is a chained hash - each bucket has a list/tree of values)\r\n(as of Java 8, the list switches to a tree after 8 items)\r\n\r\nList&lt;String&gt; instance: (Pointer to first node)\r\n\r\nList&lt;String&gt; Node: (Pointer to String value, Next-pointer)\r\n```\r\n\r\nAssumption to simplify this estimate: zero collisions, each bucket has max 1 value (ask interviewer if this is ok - to give a rough, initial answer)\r\n\r\nAssumption: 64-bit JVM so 64-bit pointers so pointer_size=8 bytes\r\n\r\nAssumption: HashMap underlying array is 50% full (by default, at 75% full, the hashmap is rehashed with double the size), so hashmap_array_size = 2*n\r\n\r\n```\r\nmemory = hashmap_array_size*bucket_size\r\n+ n*chained_list_node_size\r\n+ sum(key string sizes)\r\n+ sum(list_string_size(string_list) for each hashmap List&lt;String&gt; value)\r\n\r\nSo:\r\n\r\nmemory = (n*2)*(8*2)\r\n+ n*(8*2) + ((2 length_field + 3 string_length)*n)\r\n+ (n*(8 + 3*(8*2)\r\n+ 3*(2 length_field + 4 string_length))\r\n= 2000000*(2*8*2 + 8*2 + (2+3) + (8 + 3*8*2 + 3*(2+4)))\r\n= 254000000\r\n= 254 MB\r\n\r\nn = number of items in the hash map\r\n\r\nbucket_size = pointer_size*2\r\n\r\nchained_list_node_size = pointer_size*2\r\n\r\nlist_string_size(list) = pointer_size +\r\nlist.size()*list_string_node_size\r\n+ sum(string value sizes in this List&lt;String&gt; list)\r\n\r\nlist_string_node_size = pointer_size*2\r\n\r\nString length bytes = length_field_size + string_characters\r\n(UTF-8 is 1 byte per ascii character)\r\n(length_field_size = size of integer = 2)\r\n\r\nAssume all keys are length 3.\r\n(we have to assume something to calculate space used)\r\nso: sum(key string sizes) = (2 length_field + 3 string_length)*n\r\n\r\nAssume all value string-lists are length 3 and each string is of length 4. So:\r\nsum(list_string_size(string_list) for each hashmap List&lt;String&gt; value)\r\n= n*(8 + 3*(8*2) + 3*(2 length_field + 4 string_length))\r\n```\r\n\r\nA simple test program would give a better real answer:\r\n\r\n```\r\nimport java.util.*;\r\nclass TempTest {\r\n    public static void main(String[] args) {\r\n        HashMap&lt;String, List&lt;String&gt;&gt; map = new HashMap&lt;&gt;();\r\n        System.gc();\r\n        printMemory();\r\n        for (int i = 0; i &lt; 2000000; ++i) {\r\n            map.put(String.valueOf(i), Arrays.asList(String.valueOf(i), String.valueOf(i) + &quot;b&quot;, String.valueOf(i) + &quot;c&quot;));\r\n        }\r\n        System.gc();\r\n        printMemory();\r\n    }\r\n\r\n    private static void printMemory() {\r\n        Runtime runtime = Runtime.getRuntime();\r\n        long totalMemory = runtime.totalMemory();\r\n        long freeMemory = runtime.freeMemory();\r\n\r\n        System.out.println(&quot;Memory: Used=&quot; + (totalMemory - freeMemory) + &quot; Total=&quot; + totalMemory + &quot; Free=&quot; + freeMemory);\r\n    }\r\n}\r\n```\r\n\r\nFor me, this took 640MB (after.Used - before.Used).","title":"How to calculate HashMap memory usage in Java?","body":"<pre><code>Summary:\n\nmemory = hashmap_array_size*bucket_size\n+ n*chained_list_node_size\n+ sum(key string sizes)\n+ sum(list_string_size(string_list) for each hashmap List&lt;String&gt; value)\n\n= 254 MB\n(theoretical in-interview estimate)\n\nTest program total-memory-used-size for 2 million sample entries: (see below)\n= 640 MB\n(I recommend a simple test program like this for a quick true-total-size estimate)\n</code></pre>\n<p>A minimal estimate (actual implementation probably has a bit more overhead):</p>\n<p>Assumed data structure:</p>\n<pre><code>Bucket: (Pointer to String key, Pointer to hash-chain-list first-node)\n\nChained List Node: (Pointer to List&lt;String&gt; value, Next-pointer)\n(HashMap is a chained hash - each bucket has a list/tree of values)\n(as of Java 8, the list switches to a tree after 8 items)\n\nList&lt;String&gt; instance: (Pointer to first node)\n\nList&lt;String&gt; Node: (Pointer to String value, Next-pointer)\n</code></pre>\n<p>Assumption to simplify this estimate: zero collisions, each bucket has max 1 value (ask interviewer if this is ok - to give a rough, initial answer)</p>\n<p>Assumption: 64-bit JVM so 64-bit pointers so pointer_size=8 bytes</p>\n<p>Assumption: HashMap underlying array is 50% full (by default, at 75% full, the hashmap is rehashed with double the size), so hashmap_array_size = 2*n</p>\n<pre><code>memory = hashmap_array_size*bucket_size\n+ n*chained_list_node_size\n+ sum(key string sizes)\n+ sum(list_string_size(string_list) for each hashmap List&lt;String&gt; value)\n\nSo:\n\nmemory = (n*2)*(8*2)\n+ n*(8*2) + ((2 length_field + 3 string_length)*n)\n+ (n*(8 + 3*(8*2)\n+ 3*(2 length_field + 4 string_length))\n= 2000000*(2*8*2 + 8*2 + (2+3) + (8 + 3*8*2 + 3*(2+4)))\n= 254000000\n= 254 MB\n\nn = number of items in the hash map\n\nbucket_size = pointer_size*2\n\nchained_list_node_size = pointer_size*2\n\nlist_string_size(list) = pointer_size +\nlist.size()*list_string_node_size\n+ sum(string value sizes in this List&lt;String&gt; list)\n\nlist_string_node_size = pointer_size*2\n\nString length bytes = length_field_size + string_characters\n(UTF-8 is 1 byte per ascii character)\n(length_field_size = size of integer = 2)\n\nAssume all keys are length 3.\n(we have to assume something to calculate space used)\nso: sum(key string sizes) = (2 length_field + 3 string_length)*n\n\nAssume all value string-lists are length 3 and each string is of length 4. So:\nsum(list_string_size(string_list) for each hashmap List&lt;String&gt; value)\n= n*(8 + 3*(8*2) + 3*(2 length_field + 4 string_length))\n</code></pre>\n<p>A simple test program would give a better real answer:</p>\n<pre><code>import java.util.*;\nclass TempTest {\n    public static void main(String[] args) {\n        HashMap&lt;String, List&lt;String&gt;&gt; map = new HashMap&lt;&gt;();\n        System.gc();\n        printMemory();\n        for (int i = 0; i &lt; 2000000; ++i) {\n            map.put(String.valueOf(i), Arrays.asList(String.valueOf(i), String.valueOf(i) + &quot;b&quot;, String.valueOf(i) + &quot;c&quot;));\n        }\n        System.gc();\n        printMemory();\n    }\n\n    private static void printMemory() {\n        Runtime runtime = Runtime.getRuntime();\n        long totalMemory = runtime.totalMemory();\n        long freeMemory = runtime.freeMemory();\n\n        System.out.println(&quot;Memory: Used=&quot; + (totalMemory - freeMemory) + &quot; Total=&quot; + totalMemory + &quot; Free=&quot; + freeMemory);\n    }\n}\n</code></pre>\n<p>For me, this took 640MB (after.Used - before.Used).</p>\n"}],"owner":{"account_id":306110,"reputation":5678,"user_id":616666,"accept_rate":63,"display_name":"insomiac"},"comment_count":10,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":55338,"favorite_count":0,"down_vote_count":0,"up_vote_count":31,"accepted_answer_id":6160485,"answer_count":4,"score":31,"last_activity_date":1644467694,"creation_date":1306528032,"question_id":6157363,"body_markdown":"I was asked in an interview to calculate the memory usage for `HashMap` and how much estimated memory it will consume if you have 2 million items in it. \r\n  \r\nFor example:  \r\n\r\n    Map &lt;String,List&lt;String&gt;&gt; mp=new HashMap &lt;String,List&lt;String&gt;&gt;();\r\n  \r\nThe mapping is like this. \r\n\r\n\r\n    key   value\r\n    ----- ---------------------------\r\n    abc   [&#39;hello&#39;,&#39;how&#39;]\r\n    abz   [&#39;hello&#39;,&#39;how&#39;,&#39;are&#39;,&#39;you&#39;]\r\n\r\nHow would I estimate the memory usage of this HashMap Object in Java?","title":"How to calculate HashMap memory usage in Java?","body":"<p>I was asked in an interview to calculate the memory usage for <code>HashMap</code> and how much estimated memory it will consume if you have 2 million items in it. </p>\n\n<p>For example:  </p>\n\n<pre><code>Map &lt;String,List&lt;String&gt;&gt; mp=new HashMap &lt;String,List&lt;String&gt;&gt;();\n</code></pre>\n\n<p>The mapping is like this. </p>\n\n<pre><code>key   value\n----- ---------------------------\nabc   ['hello','how']\nabz   ['hello','how','are','you']\n</code></pre>\n\n<p>How would I estimate the memory usage of this HashMap Object in Java?</p>\n"},{"tags":["java","hashmap"],"comments":[{"owner":{"account_id":6539656,"reputation":11090,"user_id":5057736,"accept_rate":84,"display_name":"Pavel_K"},"score":0,"creation_date":1644145991,"post_id":71006498,"comment_id":125523437,"body_markdown":"If you don&#39;t know what API you should use, then take a look in java doc https://docs.oracle.com/javase/8/docs/api/java/util/Map.html#put-K-V- .","body":"If you don&#39;t know what API you should use, then take a look in java doc <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/Map.html#put-K-V-\" rel=\"nofollow noreferrer\">docs.oracle.com/javase/8/docs/api/java/util/Map.html#put-K-V&zwnj;&#8203;-</a> ."}],"answers":[{"tags":[],"owner":{"account_id":16886220,"reputation":11,"user_id":12210967,"display_name":"WeinSim"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1644146113,"creation_date":1644146113,"answer_id":71006578,"question_id":71006498,"body_markdown":"You could do it like this:\r\n```java\r\nArrayList&lt;Product&gt; products = new ArrayList&lt;&gt;();\r\n// add products to list\r\nmapProducts.put(/*String*/, products);\r\n```","title":"How to put Arraylist&lt;object&gt; as parameter in HashMap in Java?","body":"<p>You could do it like this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>ArrayList&lt;Product&gt; products = new ArrayList&lt;&gt;();\n// add products to list\nmapProducts.put(/*String*/, products);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":13459822,"reputation":1807,"user_id":9712270,"display_name":"magicmn"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1644147696,"creation_date":1644147696,"answer_id":71006785,"question_id":71006498,"body_markdown":"Instead of saving name and price in two separate list just create a product and place it directly into the map using `computeIfAbsent`.\r\n\r\n    System.out.println(&quot;Enter purchase name:&quot;);\r\n    String item = input.next();\r\n    System.out.println(&quot;Enter its price:&quot;);\r\n    try {\r\n        price = input.nextDouble();\r\n        balanceSubtractFromPurchasePrice(price);\r\n        // Lazy replacement for complicated switch case.\r\n       if(choice &gt;= 1 &amp;&amp; choice &lt;= 4) {\r\n           Product.Type productType = Product.Type.values()[choice - 1];\r\n           Product product = new Product(item, price);\r\n           List&lt;Product&gt; products = mapProducts.computeIfAbsent(productType, k -&gt; new ArrayList&lt;&gt;());\r\n           products.add(product);\r\n        } else {\r\n            System.out.println(&quot;Wrong input&quot;);\r\n        }\r\n        } catch (InputMismatchException  e) {\r\n            System.out.println(&quot;Wrong input&quot;);\r\n        }\r\n        System.out.println(&quot;&quot;);\r\n    }","title":"How to put Arraylist&lt;object&gt; as parameter in HashMap in Java?","body":"<p>Instead of saving name and price in two separate list just create a product and place it directly into the map using <code>computeIfAbsent</code>.</p>\n<pre><code>System.out.println(&quot;Enter purchase name:&quot;);\nString item = input.next();\nSystem.out.println(&quot;Enter its price:&quot;);\ntry {\n    price = input.nextDouble();\n    balanceSubtractFromPurchasePrice(price);\n    // Lazy replacement for complicated switch case.\n   if(choice &gt;= 1 &amp;&amp; choice &lt;= 4) {\n       Product.Type productType = Product.Type.values()[choice - 1];\n       Product product = new Product(item, price);\n       List&lt;Product&gt; products = mapProducts.computeIfAbsent(productType, k -&gt; new ArrayList&lt;&gt;());\n       products.add(product);\n    } else {\n        System.out.println(&quot;Wrong input&quot;);\n    }\n    } catch (InputMismatchException  e) {\n        System.out.println(&quot;Wrong input&quot;);\n    }\n    System.out.println(&quot;&quot;);\n}\n</code></pre>\n"}],"owner":{"account_id":20906908,"reputation":1,"user_id":15358611,"display_name":"RokB"},"comment_count":1,"delete_vote_count":1,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":428,"favorite_count":0,"down_vote_count":3,"up_vote_count":0,"closed_date":1644151970,"accepted_answer_id":71006785,"answer_count":2,"score":-3,"last_activity_date":1644467309,"creation_date":1644145480,"question_id":71006498,"body_markdown":"I am doing a Java project - Budget manager, which shows how I spend my money. \r\nFor that purpose, I used `Hashmap` to store the type of purchase with parameters of  String(enum), and `Arraylist&lt;Product&gt;`. Product is a new class where name and price are to be passed.\r\n\r\nHow can I put multiple values from `ArrayList` to the same key in `HashMap`?\r\n\r\n\r\n    switch (choice) {\r\n        case 1:\r\n            mapProducts.put(Product.Type.FOOD.name(),//add array);\r\n            break;\r\n        case 2:\r\n            mapProducts.put(Product.Type.CLOTHES.name(), );\r\n            break;\r\n        case 3:\r\n            mapProducts.put(Product.Type.ENTERTAINMENT.name(), );\r\n            break;\r\n        case 4:\r\n            mapProducts.put(Product.Type.OTHER.name(), );\r\n            break;\r\n    }\r\n\r\n-------------------\r\n```java\r\nimport java.util.*;\r\n\r\npublic class Account {\r\n    private ArrayList&lt;String&gt; listOfPurchases;\r\n    private ArrayList&lt;Double&gt; itemPrice;\r\n    private ArrayList&lt;Product&gt; products;\r\n    private double balance;\r\n    private Scanner input = new Scanner(System.in);\r\n    private Map&lt;String, ArrayList&lt;Product&gt;&gt; mapProducts = new HashMap&lt;&gt;();\r\n\r\n    public Account() {\r\n        this.listOfPurchases = new ArrayList&lt;&gt;();\r\n        this.itemPrice = new ArrayList&lt;&gt;();\r\n        this.balance = 0.00d;\r\n    }\r\n\r\n    public void mainMenuPrint() {\r\n        System.out.println(\r\n                &quot;Choose your action:\\n&quot; +\r\n                        &quot;1) Add income\\n&quot; +\r\n                        &quot;2) Add purchase\\n&quot; +\r\n                        &quot;3) Show list of purchases\\n&quot; +\r\n                        &quot;4) Balance\\n&quot; +\r\n                        &quot;0) Exit&quot;);\r\n    }\r\n\r\n    public void startMenu() {\r\n        Scanner input = new Scanner(System.in);\r\n        boolean isOn = true;\r\n        while (isOn) {\r\n            mainMenuPrint();\r\n            int choice = input.nextInt();\r\n            switch (choice) {\r\n                case 0:\r\n                    System.out.println(&quot;Bye!&quot;);\r\n                    isOn = false;\r\n                    break;\r\n                case 1:\r\n                    addIncome();\r\n                    break;\r\n                case 2:\r\n                    addPurchase();\r\n                    break;\r\n                case 3:\r\n                    showPurchases();\r\n                    break;\r\n                case 4:\r\n                    showBalance();\r\n                    break;\r\n            }\r\n        }\r\n    }\r\n\r\n    public void addIncome() {\r\n        double addMoney = 0.00d;\r\n        System.out.println(&quot;Enter income:&quot;);\r\n        addMoney = input.nextDouble();\r\n        setBalance(addMoney);\r\n        System.out.println(&quot;Income was added!&quot;);\r\n        System.out.println(&quot;&quot;);\r\n    }\r\n\r\n    public void addPurchase() {\r\n        System.out.println(\r\n                &quot;Choose the type of purchase\\n&quot; +\r\n                        &quot;1) Food\\n&quot; +\r\n                        &quot;2) Clothes\\n&quot; +\r\n                        &quot;3) Entertainment\\n&quot; +\r\n                        &quot;4) Other\\n&quot; +\r\n                        &quot;5) Back\\n&quot;);\r\n\r\n        int choice = input.nextInt();\r\n        double price = 0.0d;\r\n        if (choice == 5) {\r\n            startMenu();\r\n        } else {\r\n            System.out.println(&quot;Enter purchase name:&quot;);\r\n            String item = input.next();\r\n            setListOfPurchases(item);\r\n            System.out.println(&quot;Enter its price:&quot;);\r\n            try {\r\n                price = input.nextDouble();\r\n                setItemPrice(price);\r\n                balanceSubtractFromPurchasePrice(price);\r\n            } catch (\r\n                InputMismatchException e) {\r\n                System.out.println(&quot;Wrong input&quot;);\r\n            }\r\n            switch (choice) {\r\n                case 1:\r\n                    mapProducts.put(Product.Type.FOOD.name(),//add array);\r\n                    break;\r\n                case 2:\r\n                    mapProducts.put(Product.Type.CLOTHES.name(), );\r\n                    break;\r\n                case 3:\r\n                    mapProducts.put(Product.Type.ENTERTAINMENT.name(), );\r\n                    break;\r\n                case 4:\r\n                    mapProducts.put(Product.Type.OTHER.name(), );\r\n                    break;\r\n            }\r\n            System.out.println(&quot;&quot;);\r\n        }\r\n    }\r\n\r\n    public void showPurchases() {\r\n        double sum = 0.0d;\r\n        if (mapProducts.size() == 0) {\r\n            System.out.println(&quot;The purchase list is empty&quot;);\r\n        } else {\r\n            System.out.println(\r\n                    &quot;Choose the type of purchase\\n&quot; +\r\n                            &quot;1) Food\\n&quot; +\r\n                            &quot;2) Clothes\\n&quot; +\r\n                            &quot;3) Entertainment\\n&quot; +\r\n                            &quot;4) Other\\n&quot; +\r\n                            &quot;5) All\\n&quot; +\r\n                            &quot;6) Back\\n&quot;);\r\n\r\n            int choice = input.nextInt();\r\n            for (Map.Entry&lt;String, ArrayList&lt;Product&gt;&gt; entry : mapProducts.entrySet()) {\r\n                System.out.println(entry.getKey());\r\n                System.out.println(mapProducts.get(&quot;FOOD&quot;).get(0));\r\n            }\r\n            for (int i = 0; i &lt; listOfPurchases.size(); i++) {\r\n                sum += itemPrice.get(i);\r\n            }\r\n            System.out.println(&quot;Total sum: $&quot; + sum);\r\n        }\r\n        System.out.println(&quot;&quot;);\r\n    }\r\n\r\n    public void showBalance() {\r\n        System.out.printf(&quot;Balance: $%.2f&quot;, getBalance());\r\n        System.out.println(&quot;&quot;);\r\n        System.out.println(&quot;&quot;);\r\n    }\r\n\r\n    public void setBalance(double balanceAmount) {\r\n        this.balance += balanceAmount;\r\n    }\r\n\r\n    public void balanceSubtractFromPurchasePrice(double purchasePrice) {\r\n        this.balance -= purchasePrice;\r\n    }\r\n\r\n    public double getBalance() {\r\n        if (balance &lt; 0) {\r\n            System.out.println(&quot;Balance is negative &quot;);\r\n        }\r\n        return this.balance;\r\n    }\r\n\r\n    public void setListOfPurchases(String item) {\r\n        this.listOfPurchases.add(item);\r\n    }\r\n\r\n    public ArrayList&lt;String&gt; getListOfPurchases() {\r\n        return listOfPurchases;\r\n    }\r\n\r\n    public ArrayList&lt;Double&gt; getItemPrice() {\r\n        return itemPrice;\r\n    }\r\n\r\n    public void setItemPrice(double itemPrice) {\r\n        this.itemPrice.add(itemPrice);\r\n    }\r\n}\r\n```\r\n---------------------\r\n```\r\npublic class Product {\r\n    enum Type {\r\n        FOOD, CLOTHES, ENTERTAINMENT, OTHER;\r\n    }\r\n\r\n    private String name;\r\n    private double price;\r\n    private Scanner input = new Scanner(System.in);\r\n\r\n    public Product(String name, double price) {\r\n        this.name = name;\r\n        this.price = price;\r\n    }\r\n\r\n    public String getName() {\r\n        return name;\r\n    }\r\n\r\n    public double getPrice() {\r\n        return price;\r\n    }\r\n}\r\n```\r\nThanks for the help!\r\n","title":"How to put Arraylist&lt;object&gt; as parameter in HashMap in Java?","body":"<p>I am doing a Java project - Budget manager, which shows how I spend my money.\nFor that purpose, I used <code>Hashmap</code> to store the type of purchase with parameters of  String(enum), and <code>Arraylist&lt;Product&gt;</code>. Product is a new class where name and price are to be passed.</p>\n<p>How can I put multiple values from <code>ArrayList</code> to the same key in <code>HashMap</code>?</p>\n<pre><code>switch (choice) {\n    case 1:\n        mapProducts.put(Product.Type.FOOD.name(),//add array);\n        break;\n    case 2:\n        mapProducts.put(Product.Type.CLOTHES.name(), );\n        break;\n    case 3:\n        mapProducts.put(Product.Type.ENTERTAINMENT.name(), );\n        break;\n    case 4:\n        mapProducts.put(Product.Type.OTHER.name(), );\n        break;\n}\n</code></pre>\n<hr />\n<pre class=\"lang-java prettyprint-override\"><code>import java.util.*;\n\npublic class Account {\n    private ArrayList&lt;String&gt; listOfPurchases;\n    private ArrayList&lt;Double&gt; itemPrice;\n    private ArrayList&lt;Product&gt; products;\n    private double balance;\n    private Scanner input = new Scanner(System.in);\n    private Map&lt;String, ArrayList&lt;Product&gt;&gt; mapProducts = new HashMap&lt;&gt;();\n\n    public Account() {\n        this.listOfPurchases = new ArrayList&lt;&gt;();\n        this.itemPrice = new ArrayList&lt;&gt;();\n        this.balance = 0.00d;\n    }\n\n    public void mainMenuPrint() {\n        System.out.println(\n                &quot;Choose your action:\\n&quot; +\n                        &quot;1) Add income\\n&quot; +\n                        &quot;2) Add purchase\\n&quot; +\n                        &quot;3) Show list of purchases\\n&quot; +\n                        &quot;4) Balance\\n&quot; +\n                        &quot;0) Exit&quot;);\n    }\n\n    public void startMenu() {\n        Scanner input = new Scanner(System.in);\n        boolean isOn = true;\n        while (isOn) {\n            mainMenuPrint();\n            int choice = input.nextInt();\n            switch (choice) {\n                case 0:\n                    System.out.println(&quot;Bye!&quot;);\n                    isOn = false;\n                    break;\n                case 1:\n                    addIncome();\n                    break;\n                case 2:\n                    addPurchase();\n                    break;\n                case 3:\n                    showPurchases();\n                    break;\n                case 4:\n                    showBalance();\n                    break;\n            }\n        }\n    }\n\n    public void addIncome() {\n        double addMoney = 0.00d;\n        System.out.println(&quot;Enter income:&quot;);\n        addMoney = input.nextDouble();\n        setBalance(addMoney);\n        System.out.println(&quot;Income was added!&quot;);\n        System.out.println(&quot;&quot;);\n    }\n\n    public void addPurchase() {\n        System.out.println(\n                &quot;Choose the type of purchase\\n&quot; +\n                        &quot;1) Food\\n&quot; +\n                        &quot;2) Clothes\\n&quot; +\n                        &quot;3) Entertainment\\n&quot; +\n                        &quot;4) Other\\n&quot; +\n                        &quot;5) Back\\n&quot;);\n\n        int choice = input.nextInt();\n        double price = 0.0d;\n        if (choice == 5) {\n            startMenu();\n        } else {\n            System.out.println(&quot;Enter purchase name:&quot;);\n            String item = input.next();\n            setListOfPurchases(item);\n            System.out.println(&quot;Enter its price:&quot;);\n            try {\n                price = input.nextDouble();\n                setItemPrice(price);\n                balanceSubtractFromPurchasePrice(price);\n            } catch (\n                InputMismatchException e) {\n                System.out.println(&quot;Wrong input&quot;);\n            }\n            switch (choice) {\n                case 1:\n                    mapProducts.put(Product.Type.FOOD.name(),//add array);\n                    break;\n                case 2:\n                    mapProducts.put(Product.Type.CLOTHES.name(), );\n                    break;\n                case 3:\n                    mapProducts.put(Product.Type.ENTERTAINMENT.name(), );\n                    break;\n                case 4:\n                    mapProducts.put(Product.Type.OTHER.name(), );\n                    break;\n            }\n            System.out.println(&quot;&quot;);\n        }\n    }\n\n    public void showPurchases() {\n        double sum = 0.0d;\n        if (mapProducts.size() == 0) {\n            System.out.println(&quot;The purchase list is empty&quot;);\n        } else {\n            System.out.println(\n                    &quot;Choose the type of purchase\\n&quot; +\n                            &quot;1) Food\\n&quot; +\n                            &quot;2) Clothes\\n&quot; +\n                            &quot;3) Entertainment\\n&quot; +\n                            &quot;4) Other\\n&quot; +\n                            &quot;5) All\\n&quot; +\n                            &quot;6) Back\\n&quot;);\n\n            int choice = input.nextInt();\n            for (Map.Entry&lt;String, ArrayList&lt;Product&gt;&gt; entry : mapProducts.entrySet()) {\n                System.out.println(entry.getKey());\n                System.out.println(mapProducts.get(&quot;FOOD&quot;).get(0));\n            }\n            for (int i = 0; i &lt; listOfPurchases.size(); i++) {\n                sum += itemPrice.get(i);\n            }\n            System.out.println(&quot;Total sum: $&quot; + sum);\n        }\n        System.out.println(&quot;&quot;);\n    }\n\n    public void showBalance() {\n        System.out.printf(&quot;Balance: $%.2f&quot;, getBalance());\n        System.out.println(&quot;&quot;);\n        System.out.println(&quot;&quot;);\n    }\n\n    public void setBalance(double balanceAmount) {\n        this.balance += balanceAmount;\n    }\n\n    public void balanceSubtractFromPurchasePrice(double purchasePrice) {\n        this.balance -= purchasePrice;\n    }\n\n    public double getBalance() {\n        if (balance &lt; 0) {\n            System.out.println(&quot;Balance is negative &quot;);\n        }\n        return this.balance;\n    }\n\n    public void setListOfPurchases(String item) {\n        this.listOfPurchases.add(item);\n    }\n\n    public ArrayList&lt;String&gt; getListOfPurchases() {\n        return listOfPurchases;\n    }\n\n    public ArrayList&lt;Double&gt; getItemPrice() {\n        return itemPrice;\n    }\n\n    public void setItemPrice(double itemPrice) {\n        this.itemPrice.add(itemPrice);\n    }\n}\n</code></pre>\n<hr />\n<pre><code>public class Product {\n    enum Type {\n        FOOD, CLOTHES, ENTERTAINMENT, OTHER;\n    }\n\n    private String name;\n    private double price;\n    private Scanner input = new Scanner(System.in);\n\n    public Product(String name, double price) {\n        this.name = name;\n        this.price = price;\n    }\n\n    public String getName() {\n        return name;\n    }\n\n    public double getPrice() {\n        return price;\n    }\n}\n</code></pre>\n<p>Thanks for the help!</p>\n"},{"tags":["java","spring-boot"],"owner":{"account_id":23373138,"reputation":35,"user_id":17443634,"display_name":"jujil lokoko"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":365,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1644467158,"creation_date":1644467158,"question_id":71059806,"body_markdown":"i have set on my properties like this\r\n\r\n    gcp.storage.json-path=${GOOGLE_APPLICATION_CREDENTIALS}\r\n\r\nand have code like this\r\n\r\n    public CloudStorageService(\r\n                @Value(&quot;${gcp.storage.bucket-name-file}&quot;) String fileBucketName,\r\n                @Value(&quot;${gcp.storage.bucket-name}&quot;) String bucketName,\r\n                @Value(&quot;${gcp.storage.json-path}&quot;) String jsonPath\r\n        ) {\r\n            this.fileBucketName = fileBucketName;\r\n            this.bucketName = bucketName;\r\n            this.jsonPath = jsonPath;\r\n    \r\n            log.info(&quot;fileBuckerName: {}&quot;, fileBucketName);\r\n            log.info(&quot;bucketName: {}&quot;, bucketName);\r\n            log.info(&quot;jsonPath: {}&quot;, jsonPath);\r\n        }\r\n    \r\n        @PostConstruct\r\n        void init() {\r\n            try {\r\n                GoogleCredentials credentials = GoogleCredentials.fromStream(new FileInputStream(jsonPath))\r\n                        .createScoped(Lists.newArrayList(&quot;https://www.googleapis.com/auth/cloud-platform&quot;, &quot;https://www.googleapis.com/auth/devstorage.read_write&quot;));\r\n               // storage = StorageOptions.getDefaultInstance().getService();\r\n\r\nbut when i deploy my code on kubernetes i cannot upload my file to GCS. my question is how to read data from my kubernetes workload identity using java ?","title":"how to use google credential on workload identity use on java","body":"<p>i have set on my properties like this</p>\n<pre><code>gcp.storage.json-path=${GOOGLE_APPLICATION_CREDENTIALS}\n</code></pre>\n<p>and have code like this</p>\n<pre><code>public CloudStorageService(\n            @Value(&quot;${gcp.storage.bucket-name-file}&quot;) String fileBucketName,\n            @Value(&quot;${gcp.storage.bucket-name}&quot;) String bucketName,\n            @Value(&quot;${gcp.storage.json-path}&quot;) String jsonPath\n    ) {\n        this.fileBucketName = fileBucketName;\n        this.bucketName = bucketName;\n        this.jsonPath = jsonPath;\n\n        log.info(&quot;fileBuckerName: {}&quot;, fileBucketName);\n        log.info(&quot;bucketName: {}&quot;, bucketName);\n        log.info(&quot;jsonPath: {}&quot;, jsonPath);\n    }\n\n    @PostConstruct\n    void init() {\n        try {\n            GoogleCredentials credentials = GoogleCredentials.fromStream(new FileInputStream(jsonPath))\n                    .createScoped(Lists.newArrayList(&quot;https://www.googleapis.com/auth/cloud-platform&quot;, &quot;https://www.googleapis.com/auth/devstorage.read_write&quot;));\n           // storage = StorageOptions.getDefaultInstance().getService();\n</code></pre>\n<p>but when i deploy my code on kubernetes i cannot upload my file to GCS. my question is how to read data from my kubernetes workload identity using java ?</p>\n"},{"tags":["java","android","xml","size","limit"],"comments":[{"owner":{"account_id":11400684,"reputation":300,"user_id":8357735,"display_name":"farid"},"score":0,"creation_date":1644999103,"post_id":71057257,"comment_id":125750911,"body_markdown":"try this : `editText.setFilters(new InputFilter[]{new InputFilter.LengthFilter(15)});`","body":"try this : <code>editText.setFilters(new InputFilter[]{new InputFilter.LengthFilter(15)});</code>"}],"answers":[{"tags":[],"owner":{"account_id":7787481,"reputation":9066,"user_id":5891747,"display_name":"Android Geek"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1644465691,"creation_date":1644465691,"answer_id":71059655,"question_id":71057257,"body_markdown":"Add `android:maxLength` in xml \r\n\r\nExample Code:\r\n\r\n    &lt;EditText\r\n         android:layout_width=&quot;wrap_content&quot;\r\n         android:layout_height=&quot;wrap_content&quot;\r\n         android:maxLength=&quot;20&quot;/&gt;","title":"How do you limit the number of characters used for that username for java android?","body":"<p>Add <code>android:maxLength</code> in xml</p>\n<p>Example Code:</p>\n<pre><code>&lt;EditText\n     android:layout_width=&quot;wrap_content&quot;\n     android:layout_height=&quot;wrap_content&quot;\n     android:maxLength=&quot;20&quot;/&gt;\n</code></pre>\n"}],"owner":{"account_id":23869656,"reputation":21,"user_id":17871530,"display_name":"Kasun M.Weerasekara"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":83,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1644465691,"creation_date":1644443784,"question_id":71057257,"body_markdown":"When adding value to a username in an Android app, how do you limit the number of characters used for that username?","title":"How do you limit the number of characters used for that username for java android?","body":"<p>When adding value to a username in an Android app, how do you limit the number of characters used for that username?</p>\n"},{"tags":["java","recursion","queue"],"comments":[{"owner":{"account_id":24209919,"reputation":21,"user_id":18166592,"display_name":"Jerome"},"score":0,"creation_date":1644470222,"post_id":71059628,"comment_id":125616934,"body_markdown":"anyone need any clarifications","body":"anyone need any clarifications"},{"owner":{"account_id":9852035,"reputation":174,"user_id":11472856,"display_name":"Moshe Levy"},"score":0,"creation_date":1644491934,"post_id":71059628,"comment_id":125623622,"body_markdown":"please produce some examples of the input and the output","body":"please produce some examples of the input and the output"},{"owner":{"account_id":7142980,"reputation":323253,"user_id":5459839,"display_name":"trincot"},"score":0,"creation_date":1644504680,"post_id":71059628,"comment_id":125628950,"body_markdown":"What is that `int x` doing at the end of the block?","body":"What is that <code>int x</code> doing at the end of the block?"}],"owner":{"account_id":24209919,"reputation":21,"user_id":18166592,"display_name":"Jerome"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":71,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1644465421,"creation_date":1644465421,"question_id":71059628,"body_markdown":"I&#39;m trying to write a recursive function that evaluates a Queue&lt;Character&gt; as a mathematical expression. The queue can have any of the following characters: { &#39;(&#39;, &#39;)&#39;, &#39;+&#39;, &#39;*&#39;} or any single-digit number. I want to evaluate this expression and return the result. I can not use any\r\nloops or any data structures besides the q passed in as a parameter. This is what I have but I&#39;m not quite sure why it&#39;s not working and I can&#39;t figure out how to add recursion. \r\n\r\n\tpublic static int evaluate(Queue&lt;Character&gt; q) {\r\n\t\tif (q.peek().equals(&quot;(&quot;) || q.peek().equals(&quot;)&quot;)) {\r\n\t\t\tq.remove();\r\n\t\t}\r\n\t\tif (!(q.peek().equals(&quot;+&quot;) || q.peek().equals(&quot;*&quot;))) {\r\n\t\t\tint i = q.poll();\r\n\t\t\tif (q.poll().equals(&quot;+&quot;)) {\r\n\t\t\t\tint x = q.poll();\r\n\t\t\t\tchar d = (char)(i+x);\r\n\t\t\t\tq.add(d);\r\n\t\t\t}\r\n\t\t\tint x;\r\n\t\t}\r\n\t\treturn 1;\r\n\t}","title":"Recursive Method that Evaluates a Mathematical Expression from a Queue","body":"<p>I'm trying to write a recursive function that evaluates a Queue as a mathematical expression. The queue can have any of the following characters: { '(', ')', '+', '*'} or any single-digit number. I want to evaluate this expression and return the result. I can not use any\nloops or any data structures besides the q passed in as a parameter. This is what I have but I'm not quite sure why it's not working and I can't figure out how to add recursion.</p>\n<pre><code>public static int evaluate(Queue&lt;Character&gt; q) {\n    if (q.peek().equals(&quot;(&quot;) || q.peek().equals(&quot;)&quot;)) {\n        q.remove();\n    }\n    if (!(q.peek().equals(&quot;+&quot;) || q.peek().equals(&quot;*&quot;))) {\n        int i = q.poll();\n        if (q.poll().equals(&quot;+&quot;)) {\n            int x = q.poll();\n            char d = (char)(i+x);\n            q.add(d);\n        }\n        int x;\n    }\n    return 1;\n}\n</code></pre>\n"},{"tags":["java","gradle"],"comments":[{"owner":{"account_id":5863496,"reputation":8458,"user_id":4618331,"display_name":"Sam"},"score":0,"creation_date":1644409056,"post_id":71049445,"comment_id":125597942,"body_markdown":"exmple -&gt; example","body":"exmple -&gt; example"},{"owner":{"account_id":15663576,"reputation":2342,"user_id":11301941,"display_name":"George"},"score":0,"creation_date":1644409398,"post_id":71049445,"comment_id":125598058,"body_markdown":"I think your missing the application plugin , https://docs.gradle.org/current/userguide/application_plugin.html","body":"I think your missing the application plugin , <a href=\"https://docs.gradle.org/current/userguide/application_plugin.html\" rel=\"nofollow noreferrer\">docs.gradle.org/current/userguide/application_plugin.html</a>"}],"answers":[{"tags":[],"owner":{"account_id":21809086,"reputation":45,"user_id":16106896,"display_name":"AdrianMirica"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1644409223,"creation_date":1644409223,"answer_id":71049511,"question_id":71049445,"body_markdown":"It is looking like you have a typo in the path that you are passing:\r\n\r\nError: Could not find or load main class com.**exmple**.helloWorld\r\nCaused by: java.lang.ClassNotFoundException: com.**exmple**.helloWorld&quot; \r\n\r\n\r\nAn **A** is missing from *example* package","title":"Gradle jar not running. Could not find or load main class","body":"<p>It is looking like you have a typo in the path that you are passing:</p>\n<p>Error: Could not find or load main class com.<strong>exmple</strong>.helloWorld\nCaused by: java.lang.ClassNotFoundException: com.<strong>exmple</strong>.helloWorld&quot;</p>\n<p>An <strong>A</strong> is missing from <em>example</em> package</p>\n"},{"tags":[],"owner":{"account_id":47283,"reputation":703817,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1644465166,"creation_date":1644414804,"answer_id":71050831,"question_id":71049445,"body_markdown":"If the full classname is `com.exmpl.helloWorld`, then the source directory structure should be: \r\n\r\n    |-src\r\n     |-main\r\n      |-java\r\n       |-com\r\n        |-exmpl\r\n         |-helloWorld.java\r\n\r\nnot\r\n\r\n    |-src\r\n     |-main\r\n      |-java\r\n       |-com.exmple\r\n        |-helloWorld\r\n\r\nPlease read https://stackoverflow.com/questions/18093928 for more information.  (It explains in depth the **many** things that can cause this problem.)","title":"Gradle jar not running. Could not find or load main class","body":"<p>If the full classname is <code>com.exmpl.helloWorld</code>, then the source directory structure should be:</p>\n<pre><code>|-src\n |-main\n  |-java\n   |-com\n    |-exmpl\n     |-helloWorld.java\n</code></pre>\n<p>not</p>\n<pre><code>|-src\n |-main\n  |-java\n   |-com.exmple\n    |-helloWorld\n</code></pre>\n<p>Please read <a href=\"https://stackoverflow.com/questions/18093928\">What does &quot;Could not find or load main class&quot; mean?</a> for more information.  (It explains in depth the <strong>many</strong> things that can cause this problem.)</p>\n"}],"owner":{"account_id":16914410,"reputation":17,"user_id":12232754,"display_name":"Jane"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1425,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":71050831,"answer_count":2,"score":0,"last_activity_date":1644465166,"creation_date":1644408938,"question_id":71049445,"body_markdown":"I have created a very basic gradle java project that prints &quot;Hello Word&quot;. The main class builds and runs fine. When i try to run `java -jar out\\artifacts\\helloWorld_jar\\helloWorld.jar` on the command line it gives me this error\r\n\r\n    Error: Could not find or load main class com.exmple.helloWorld\r\n    Caused by: java.lang.ClassNotFoundException: com.exmple.helloWorld\r\n\r\n\r\nhere is how my directory looks\r\n``` \r\n|-gradle\r\n|-.idea\r\n|-build\r\n|-gradle\r\n|-META-INF\r\n|-out\r\n | -artifacts\r\n | -helloWorld_jar\r\n | -helloWorld.jar\r\n|-src\r\n |-main\r\n  |-java\r\n   |- com.exmple\r\n    |-helloWorld\r\n |-test\r\n|build.gradle\r\netc...\r\n```\r\n\r\n\r\nMy build.gradle file looks like this:\r\n\r\n``` \r\nplugins {\r\n    id &#39;java&#39;\r\n}\r\n\r\ngroup &#39;org.example&#39;\r\nversion &#39;1.0-SNAPSHOT&#39;\r\n\r\nrepositories {\r\n    mavenCentral()\r\n}\r\njar{\r\n    manifest{\r\n        attributes &quot;Main-Class&quot;: &quot;com.exmple.helloWorld&quot;\r\n    }\r\n\r\n}\r\ndependencies {\r\n    testImplementation &#39;org.junit.jupiter:junit-jupiter-api:5.8.1&#39;\r\n    testRuntimeOnly &#39;org.junit.jupiter:junit-jupiter-engine:5.8.1&#39;\r\n}\r\n\r\ntest {\r\n    useJUnitPlatform()\r\n}\r\n\r\n```\r\n\r\nI have tried both single quotes and double quotes and it still runs an error. Any ideas on how to fix this? I have been trying for a few days now.\r\n\r\nPS. example is spelt wrong, but its spelt exmple throughout","title":"Gradle jar not running. Could not find or load main class","body":"<p>I have created a very basic gradle java project that prints &quot;Hello Word&quot;. The main class builds and runs fine. When i try to run <code>java -jar out\\artifacts\\helloWorld_jar\\helloWorld.jar</code> on the command line it gives me this error</p>\n<pre><code>Error: Could not find or load main class com.exmple.helloWorld\nCaused by: java.lang.ClassNotFoundException: com.exmple.helloWorld\n</code></pre>\n<p>here is how my directory looks</p>\n<pre><code>|-gradle\n|-.idea\n|-build\n|-gradle\n|-META-INF\n|-out\n | -artifacts\n | -helloWorld_jar\n | -helloWorld.jar\n|-src\n |-main\n  |-java\n   |- com.exmple\n    |-helloWorld\n |-test\n|build.gradle\netc...\n</code></pre>\n<p>My build.gradle file looks like this:</p>\n<pre><code>plugins {\n    id 'java'\n}\n\ngroup 'org.example'\nversion '1.0-SNAPSHOT'\n\nrepositories {\n    mavenCentral()\n}\njar{\n    manifest{\n        attributes &quot;Main-Class&quot;: &quot;com.exmple.helloWorld&quot;\n    }\n\n}\ndependencies {\n    testImplementation 'org.junit.jupiter:junit-jupiter-api:5.8.1'\n    testRuntimeOnly 'org.junit.jupiter:junit-jupiter-engine:5.8.1'\n}\n\ntest {\n    useJUnitPlatform()\n}\n\n</code></pre>\n<p>I have tried both single quotes and double quotes and it still runs an error. Any ideas on how to fix this? I have been trying for a few days now.</p>\n<p>PS. example is spelt wrong, but its spelt exmple throughout</p>\n"},{"tags":["java","eclipse","tomcat","locked-files"],"answers":[{"tags":[],"owner":{"account_id":3216203,"reputation":95,"user_id":2714830,"display_name":"Abhi Urs"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1389700622,"creation_date":1389700622,"answer_id":21112995,"question_id":21112703,"body_markdown":"i don know the exact reason for this problem but i was clear the same issue by restarting my system. so restart your system once, it may gives solution for your problem.","title":"Could not delete /.metadata/.plugins/org.eclipse.wst.server.core/tmp0/wtpwebapps/appname/WEB-INF/lib. May be locked by another process","body":"<p>i don know the exact reason for this problem but i was clear the same issue by restarting my system. so restart your system once, it may gives solution for your problem.</p>\n"},{"tags":[],"owner":{"account_id":268020,"reputation":3637,"user_id":556540,"accept_rate":76,"display_name":"Shams"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1389704451,"creation_date":1389704451,"answer_id":21114227,"question_id":21112703,"body_markdown":"It may be because you are using C driver and you may need Administration rights to perform operation on this directory, try after change the C drive, in any other drive like D: or E:","title":"Could not delete /.metadata/.plugins/org.eclipse.wst.server.core/tmp0/wtpwebapps/appname/WEB-INF/lib. May be locked by another process","body":"<p>It may be because you are using C driver and you may need Administration rights to perform operation on this directory, try after change the C drive, in any other drive like D: or E:</p>\n"},{"tags":[],"owner":{"account_id":1317825,"reputation":12193,"user_id":1264321,"accept_rate":92,"display_name":"Stefan"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1389707931,"creation_date":1389707931,"answer_id":21115388,"question_id":21112703,"body_markdown":"Some of your jars are still loaded into memory, therefor their parent directories cannot be deleted. Check if there are running processes accessing any jars or restart Eclipse.","title":"Could not delete /.metadata/.plugins/org.eclipse.wst.server.core/tmp0/wtpwebapps/appname/WEB-INF/lib. May be locked by another process","body":"<p>Some of your jars are still loaded into memory, therefor their parent directories cannot be deleted. Check if there are running processes accessing any jars or restart Eclipse.</p>\n"},{"tags":[],"owner":{"account_id":5568221,"reputation":181,"user_id":4414598,"display_name":"vikash mudliar"},"down_vote_count":0,"up_vote_count":18,"is_accepted":false,"score":18,"last_activity_date":1420275093,"creation_date":1420275093,"answer_id":27753178,"question_id":21112703,"body_markdown":"Simply delete the server and then add it again,then restart your eclipse.It worked for me.\r\n","title":"Could not delete /.metadata/.plugins/org.eclipse.wst.server.core/tmp0/wtpwebapps/appname/WEB-INF/lib. May be locked by another process","body":"<p>Simply delete the server and then add it again,then restart your eclipse.It worked for me.</p>\n"},{"tags":[],"owner":{"account_id":3949865,"reputation":41,"user_id":3260758,"display_name":"SwadeWorx"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1453316389,"creation_date":1453316389,"answer_id":34908268,"question_id":21112703,"body_markdown":"Eclipse Juno running Tomcat 7 on Win7; kept getting the publish error on a javascript file. Tried renaming the file but that did not work. \r\n\r\nI deleted my existing Tomcat server, as recommended by Vikash Mudliar, and added a new server instance. That worked and I was able to publish successfully.","title":"Could not delete /.metadata/.plugins/org.eclipse.wst.server.core/tmp0/wtpwebapps/appname/WEB-INF/lib. May be locked by another process","body":"<p>Eclipse Juno running Tomcat 7 on Win7; kept getting the publish error on a javascript file. Tried renaming the file but that did not work. </p>\n\n<p>I deleted my existing Tomcat server, as recommended by Vikash Mudliar, and added a new server instance. That worked and I was able to publish successfully.</p>\n"},{"tags":[],"owner":{"account_id":5726510,"reputation":91,"user_id":4523338,"display_name":"Sachin Kumar"},"down_vote_count":0,"up_vote_count":9,"is_accepted":false,"score":9,"last_activity_date":1469693013,"creation_date":1469693013,"answer_id":38630464,"question_id":21112703,"body_markdown":"Close the eclipse and go to below location(depends on your system locaiton) \r\n\r\n    C:/Users/maniceto/Documents/workspace/.metadata/.plugins/org.eclipse.wst.server.core/\r\n\r\n  \r\nand delete `tmp0` directory  now start eclipse and it will work fine. \r\n\r\n","title":"Could not delete /.metadata/.plugins/org.eclipse.wst.server.core/tmp0/wtpwebapps/appname/WEB-INF/lib. May be locked by another process","body":"<p>Close the eclipse and go to below location(depends on your system locaiton) </p>\n\n<pre><code>C:/Users/maniceto/Documents/workspace/.metadata/.plugins/org.eclipse.wst.server.core/\n</code></pre>\n\n<p>and delete <code>tmp0</code> directory  now start eclipse and it will work fine. </p>\n"},{"tags":[],"owner":{"account_id":1651105,"reputation":752,"user_id":1521710,"display_name":"Igor Vuković"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1475663170,"creation_date":1475663170,"answer_id":39871477,"question_id":21112703,"body_markdown":"In my case this happens only when I trigger Update Maven Project (ALT+F5) in Eclipse and the server instance is running with my app attached.\r\n\r\nSo You have to remove the app from the server ,turn of the server and the n do the Update Maven Project . If the problem persists Clean helps","title":"Could not delete /.metadata/.plugins/org.eclipse.wst.server.core/tmp0/wtpwebapps/appname/WEB-INF/lib. May be locked by another process","body":"<p>In my case this happens only when I trigger Update Maven Project (ALT+F5) in Eclipse and the server instance is running with my app attached.</p>\n\n<p>So You have to remove the app from the server ,turn of the server and the n do the Update Maven Project . If the problem persists Clean helps</p>\n"},{"tags":[],"owner":{"account_id":1472305,"reputation":7002,"user_id":1383538,"accept_rate":67,"display_name":"Hayi"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1492591199,"creation_date":1492591199,"answer_id":43490617,"question_id":21112703,"body_markdown":"If you close a project and it still in Apache Tomcat resources this issue occurs.","title":"Could not delete /.metadata/.plugins/org.eclipse.wst.server.core/tmp0/wtpwebapps/appname/WEB-INF/lib. May be locked by another process","body":"<p>If you close a project and it still in Apache Tomcat resources this issue occurs.</p>\n"},{"tags":[],"owner":{"account_id":9708109,"reputation":539,"user_id":7200943,"display_name":"Greko2015 GuFn"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1510928998,"creation_date":1510918483,"answer_id":47349728,"question_id":21112703,"body_markdown":"there is already a post which answer this question you need to:\r\n\r\n 1. Clean Server\r\n 2. Clean Tomcat Work Directory\r\n\r\nlink to the page:  https://stackoverflow.com/questions/9632880/why-is-my-publishing-failing-in-tomcat-v7-0-server-because-of-locks-by-another-p\r\n\r\n  [1]: https://stackoverflow.com/questions/9632880/why-is-my-publishing-failing-in-tomcat-v7-0-server-because-of-locks-by-another-p","title":"Could not delete /.metadata/.plugins/org.eclipse.wst.server.core/tmp0/wtpwebapps/appname/WEB-INF/lib. May be locked by another process","body":"<p>there is already a post which answer this question you need to:</p>\n\n<ol>\n<li>Clean Server</li>\n<li>Clean Tomcat Work Directory</li>\n</ol>\n\n<p>link to the page:  <a href=\"https://stackoverflow.com/questions/9632880/why-is-my-publishing-failing-in-tomcat-v7-0-server-because-of-locks-by-another-p\">Why is my publishing failing in Tomcat v7.0 Server because of locks by another process?</a></p>\n"},{"tags":[],"owner":{"account_id":4610588,"reputation":4137,"user_id":3738831,"accept_rate":50,"display_name":"Tadele Ayelegn"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1526140067,"creation_date":1526140067,"answer_id":50308044,"question_id":21112703,"body_markdown":"Faced this issue after adding a new dependency to pom,\r\n\r\nSOLUTION:\r\n\r\n    Add maven dependencies to &#39;deployment assembly&#39;. To do that\r\n    right click on the project &gt; Build Path &gt; Configure Build Path &gt; Deployment Assembly &gt; Add &gt; Java Build Path Entries &gt; Maven Dependencies","title":"Could not delete /.metadata/.plugins/org.eclipse.wst.server.core/tmp0/wtpwebapps/appname/WEB-INF/lib. May be locked by another process","body":"<p>Faced this issue after adding a new dependency to pom,</p>\n\n<p>SOLUTION:</p>\n\n<pre><code>Add maven dependencies to 'deployment assembly'. To do that\nright click on the project &gt; Build Path &gt; Configure Build Path &gt; Deployment Assembly &gt; Add &gt; Java Build Path Entries &gt; Maven Dependencies\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4610287,"reputation":377,"user_id":3738598,"accept_rate":82,"display_name":"Boo"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1544739673,"creation_date":1544739673,"answer_id":53770910,"question_id":21112703,"body_markdown":"For my issue I just had a process that was hung.\r\n\r\nOn Windows, open the Task Manager and shut down your hung Java process.  On linux run: ps -ef | grep tomcat, then kill the hung process.","title":"Could not delete /.metadata/.plugins/org.eclipse.wst.server.core/tmp0/wtpwebapps/appname/WEB-INF/lib. May be locked by another process","body":"<p>For my issue I just had a process that was hung.</p>\n\n<p>On Windows, open the Task Manager and shut down your hung Java process.  On linux run: ps -ef | grep tomcat, then kill the hung process.</p>\n"},{"tags":[],"owner":{"account_id":6915561,"reputation":11,"user_id":7091797,"display_name":"Vlad Garaba"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1551015305,"creation_date":1551015305,"answer_id":54852431,"question_id":21112703,"body_markdown":" I had this issue too.\r\n\r\n I tried to clean the server, delete server and reinstall it, delete the `tmp0` folder. I tried even to copy and paste same project and change other settings. Nothing really worked for me.\r\n\r\nThe only thing that worked for me, was to create a new project and copy all the files from the broken project to the new one.\r\n My solution also fixed [this][1] issue too.\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/43931383/the-origin-server-did-not-find-a-current-representation-for-the-target-resource?rq=1","title":"Could not delete /.metadata/.plugins/org.eclipse.wst.server.core/tmp0/wtpwebapps/appname/WEB-INF/lib. May be locked by another process","body":"<p>I had this issue too.</p>\n\n<p>I tried to clean the server, delete server and reinstall it, delete the <code>tmp0</code> folder. I tried even to copy and paste same project and change other settings. Nothing really worked for me.</p>\n\n<p>The only thing that worked for me, was to create a new project and copy all the files from the broken project to the new one.\n My solution also fixed <a href=\"https://stackoverflow.com/questions/43931383/the-origin-server-did-not-find-a-current-representation-for-the-target-resource?rq=1\">this</a> issue too.</p>\n"},{"tags":[],"owner":{"account_id":8153553,"reputation":53,"user_id":6139854,"accept_rate":60,"display_name":"Srinivas_N"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1565332991,"creation_date":1565332991,"answer_id":57424681,"question_id":21112703,"body_markdown":"Delete the Tomcat server and reconfigure it, It works fine","title":"Could not delete /.metadata/.plugins/org.eclipse.wst.server.core/tmp0/wtpwebapps/appname/WEB-INF/lib. May be locked by another process","body":"<p>Delete the Tomcat server and reconfigure it, It works fine</p>\n"},{"tags":[],"owner":{"account_id":14027252,"reputation":149,"user_id":10131983,"display_name":"Why So Serious"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1565723089,"creation_date":1565723089,"answer_id":57483920,"question_id":21112703,"body_markdown":"Go to the servers tab-&gt; click on the dropdown menu.It contains all the projects related to that server\r\nNow simply right click on the project name you don&#39;t want to run right now and select remove","title":"Could not delete /.metadata/.plugins/org.eclipse.wst.server.core/tmp0/wtpwebapps/appname/WEB-INF/lib. May be locked by another process","body":"<p>Go to the servers tab-> click on the dropdown menu.It contains all the projects related to that server\nNow simply right click on the project name you don't want to run right now and select remove</p>\n"},{"tags":[],"owner":{"account_id":23616121,"reputation":43,"user_id":17650203,"display_name":"mc_wendy"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1644464816,"creation_date":1644464816,"answer_id":71059562,"question_id":21112703,"body_markdown":"When you have multiple projects in the workspace, the run button will record the run history, so you should press the triangle button to select the correct run option.\r\nFor example, when I choose to run &quot;AjaxAdms&quot; directly, an error will be reported, but if I choose to &quot;run tomcat on the localhost&quot; option, no error will be reported.[![enter image description here][1]][1]\r\nAlso, as shown in Figure 2 and 3, you should remove unnecessary projects from the Tomcat server.[![enter image description here][2]][2][![enter image description here][3]][3]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/VksgB.png\r\n  [2]: https://i.stack.imgur.com/6KoH3.png\r\n  [3]: https://i.stack.imgur.com/nQlCU.png","title":"Could not delete /.metadata/.plugins/org.eclipse.wst.server.core/tmp0/wtpwebapps/appname/WEB-INF/lib. May be locked by another process","body":"<p>When you have multiple projects in the workspace, the run button will record the run history, so you should press the triangle button to select the correct run option.\nFor example, when I choose to run &quot;AjaxAdms&quot; directly, an error will be reported, but if I choose to &quot;run tomcat on the localhost&quot; option, no error will be reported.<a href=\"https://i.stack.imgur.com/VksgB.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/VksgB.png\" alt=\"enter image description here\" /></a>\nAlso, as shown in Figure 2 and 3, you should remove unnecessary projects from the Tomcat server.<a href=\"https://i.stack.imgur.com/6KoH3.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/6KoH3.png\" alt=\"enter image description here\" /></a><a href=\"https://i.stack.imgur.com/nQlCU.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/nQlCU.png\" alt=\"enter image description here\" /></a></p>\n"}],"owner":{"account_id":3518520,"reputation":4473,"user_id":2941390,"accept_rate":48,"display_name":"Murilo"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":48113,"favorite_count":0,"down_vote_count":1,"up_vote_count":14,"answer_count":15,"score":13,"last_activity_date":1644464816,"creation_date":1389699780,"question_id":21112703,"body_markdown":"I am trying to run an web app. In the beginning it was going well, but I had to delete some jars from the project folder. I didn&#39;t delete the jars using eclipse. So, I started to get these errors:\r\n\r\n    Publishing failed with multiple errors\r\n    Could not delete C:/Users/maniceto/Documents/workspace/.metadata/.plugins/org.eclipse.wst.server.core/tmp0/wtpwebapps/fj21-tarefas/WEB-INF/lib. May be locked by another process.\r\n    Could not delete C:/Users/maniceto/Documents/workspace/.metadata/.plugins/org.eclipse.wst.server.core/tmp0/wtpwebapps/fj21-tarefas/WEB-INF. May be locked by another process.\r\n\r\nI tried to delete my whole project and code it again. But it doesn&#39;t work. I also deleted the Tomcat server but again it doesn&#39;t work. Then I realized that to &quot;fix&quot; this problem I have to delete this folder: \r\n\r\n***C:/Users/maniceto/Documents/workspace/.metadata/.plugins/org.eclipse.wst.server.core/tmp0/wtpwebapps/fj21-tarefas/WEB-INF***. \r\n\r\nAnd **clean** the server and the project. But when I close eclipse and open again I get the same error, then I have to do this process.\r\n\r\nAnyone here knows how to fix this kind of tomcat bug? ","title":"Could not delete /.metadata/.plugins/org.eclipse.wst.server.core/tmp0/wtpwebapps/appname/WEB-INF/lib. May be locked by another process","body":"<p>I am trying to run an web app. In the beginning it was going well, but I had to delete some jars from the project folder. I didn't delete the jars using eclipse. So, I started to get these errors:</p>\n\n<pre><code>Publishing failed with multiple errors\nCould not delete C:/Users/maniceto/Documents/workspace/.metadata/.plugins/org.eclipse.wst.server.core/tmp0/wtpwebapps/fj21-tarefas/WEB-INF/lib. May be locked by another process.\nCould not delete C:/Users/maniceto/Documents/workspace/.metadata/.plugins/org.eclipse.wst.server.core/tmp0/wtpwebapps/fj21-tarefas/WEB-INF. May be locked by another process.\n</code></pre>\n\n<p>I tried to delete my whole project and code it again. But it doesn't work. I also deleted the Tomcat server but again it doesn't work. Then I realized that to \"fix\" this problem I have to delete this folder: </p>\n\n<p><strong><em>C:/Users/maniceto/Documents/workspace/.metadata/.plugins/org.eclipse.wst.server.core/tmp0/wtpwebapps/fj21-tarefas/WEB-INF</em></strong>. </p>\n\n<p>And <strong>clean</strong> the server and the project. But when I close eclipse and open again I get the same error, then I have to do this process.</p>\n\n<p>Anyone here knows how to fix this kind of tomcat bug? </p>\n"},{"tags":["java","spring-boot","spring-security","spring-security-oauth2"],"answers":[{"tags":[],"owner":{"account_id":384402,"reputation":1902,"user_id":740888,"display_name":"httPants"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1644464712,"creation_date":1644464712,"answer_id":71059551,"question_id":71058665,"body_markdown":"Spring Security provides an exchange filter function called `ServletOAuth2AuthorizedClientExchangeFilterFunction`.  \r\n\r\n&gt; The ServletOAuth2AuthorizedClientExchangeFilterFunction provides a\r\n&gt; simple mechanism for requesting protected resources by using an\r\n&gt; OAuth2AuthorizedClient and including the associated OAuth2AccessToken\r\n&gt; as a Bearer Token. It directly uses an OAuth2AuthorizedClientManager\r\n&gt; and therefore inherits the following capabilities:\r\n&gt; \r\n&gt; An OAuth2AccessToken will be requested if the client has not yet been\r\n&gt; authorized.\r\n&gt; \r\n&gt; authorization_code - triggers the Authorization Request redirect to\r\n&gt; initiate the flow\r\n&gt; \r\n&gt; client_credentials - the access token is obtained directly from the\r\n&gt; Token Endpoint\r\n&gt; \r\n&gt; password - the access token is obtained directly from the Token\r\n&gt; Endpoint\r\n&gt; \r\n&gt; If the OAuth2AccessToken is expired, it will be refreshed (or renewed)\r\n&gt; if an OAuth2AuthorizedClientProvider is available to perform the\r\n&gt; authorization\r\n\r\nSee https://docs.spring.io/spring-security/reference/servlet/oauth2/client/authorized-clients.html#oauth2Client-webclient-servlet for details.","title":"What is the correct way of retrieving an OAuth2 Bearer token in Spring","body":"<p>Spring Security provides an exchange filter function called <code>ServletOAuth2AuthorizedClientExchangeFilterFunction</code>.</p>\n<blockquote>\n<p>The ServletOAuth2AuthorizedClientExchangeFilterFunction provides a\nsimple mechanism for requesting protected resources by using an\nOAuth2AuthorizedClient and including the associated OAuth2AccessToken\nas a Bearer Token. It directly uses an OAuth2AuthorizedClientManager\nand therefore inherits the following capabilities:</p>\n<p>An OAuth2AccessToken will be requested if the client has not yet been\nauthorized.</p>\n<p>authorization_code - triggers the Authorization Request redirect to\ninitiate the flow</p>\n<p>client_credentials - the access token is obtained directly from the\nToken Endpoint</p>\n<p>password - the access token is obtained directly from the Token\nEndpoint</p>\n<p>If the OAuth2AccessToken is expired, it will be refreshed (or renewed)\nif an OAuth2AuthorizedClientProvider is available to perform the\nauthorization</p>\n</blockquote>\n<p>See <a href=\"https://docs.spring.io/spring-security/reference/servlet/oauth2/client/authorized-clients.html#oauth2Client-webclient-servlet\" rel=\"nofollow noreferrer\">https://docs.spring.io/spring-security/reference/servlet/oauth2/client/authorized-clients.html#oauth2Client-webclient-servlet</a> for details.</p>\n"}],"owner":{"account_id":3335118,"reputation":149,"user_id":2802914,"display_name":"Sean"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1319,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1644464712,"creation_date":1644455389,"question_id":71058665,"body_markdown":"I am making service to service requests using Spring&#39;s `WebClient` that require an `OAuth2` bearer token to be added as a header to the request.  I Can do this relatively easily by creating an `ExchangeFilterFunction` that intercepts the request, retrieves an access token, adds it to the header, and continues on.  Since this is not a user request, the `SecurityContextHolder` does not contain an Authentication that would hold an access token for me, so instead of retrieving from that, I would like to get an access token based on my Spring security configuration (currently defined in the `spring.security.oauth2.client.registration` and provider properties).  \r\n\r\nThe way I&#39;m doing this now is by `Autowiring` an `OAuth2ClientContext` and then getting the `AccessToken` from it.  Reducing the code only to what I care about for this question, I have:\r\n\r\n```\r\n@Component\r\npublic class OAuth2WebClientFilter implements ExchangeFilterFunction {\r\n\r\n    @Autowired\r\n    private OAuth2ClientContext oAuth2ClientContext;\r\n\r\n    public Mono&lt;ClientResponse&gt; filter(ClientRequest request, ExchangeFunction next) {\r\n        // simple retrieval of the token\r\n        String oAuth2Token = oAuth2ClientContext.getAccessToken().getValue();\r\n\r\n        // adding the token to the header of the request\r\n        request = ClientRequest.from(request).header(HttpHeaders.AUTHORIZATION, &quot;Bearer &quot; + oAuth2Token).build();\r\n    \r\n        return next.exchange(request);\r\n    }\r\n}\r\n\r\n```\r\nThis does exactly what I want it to.  However, I have recently upgraded `spring-security-oauth2` to `2.5.0.RELEASE`, and it is saying the `OAuth2ClientContext` is deprecated, but I haven&#39;t found a simple replacement for this process.  So is there still a way to get an access token in a relatively simple fashion like above, and if so, how?\r\n\r\nAlso note: this concept is used elsewhere in the project and not just for the `WebClient`, so I&#39;m looking to see how to properly replace an injected `OAuth2ClientContext`. Thanks! ","title":"What is the correct way of retrieving an OAuth2 Bearer token in Spring","body":"<p>I am making service to service requests using Spring's <code>WebClient</code> that require an <code>OAuth2</code> bearer token to be added as a header to the request.  I Can do this relatively easily by creating an <code>ExchangeFilterFunction</code> that intercepts the request, retrieves an access token, adds it to the header, and continues on.  Since this is not a user request, the <code>SecurityContextHolder</code> does not contain an Authentication that would hold an access token for me, so instead of retrieving from that, I would like to get an access token based on my Spring security configuration (currently defined in the <code>spring.security.oauth2.client.registration</code> and provider properties).</p>\n<p>The way I'm doing this now is by <code>Autowiring</code> an <code>OAuth2ClientContext</code> and then getting the <code>AccessToken</code> from it.  Reducing the code only to what I care about for this question, I have:</p>\n<pre><code>@Component\npublic class OAuth2WebClientFilter implements ExchangeFilterFunction {\n\n    @Autowired\n    private OAuth2ClientContext oAuth2ClientContext;\n\n    public Mono&lt;ClientResponse&gt; filter(ClientRequest request, ExchangeFunction next) {\n        // simple retrieval of the token\n        String oAuth2Token = oAuth2ClientContext.getAccessToken().getValue();\n\n        // adding the token to the header of the request\n        request = ClientRequest.from(request).header(HttpHeaders.AUTHORIZATION, &quot;Bearer &quot; + oAuth2Token).build();\n    \n        return next.exchange(request);\n    }\n}\n\n</code></pre>\n<p>This does exactly what I want it to.  However, I have recently upgraded <code>spring-security-oauth2</code> to <code>2.5.0.RELEASE</code>, and it is saying the <code>OAuth2ClientContext</code> is deprecated, but I haven't found a simple replacement for this process.  So is there still a way to get an access token in a relatively simple fashion like above, and if so, how?</p>\n<p>Also note: this concept is used elsewhere in the project and not just for the <code>WebClient</code>, so I'm looking to see how to properly replace an injected <code>OAuth2ClientContext</code>. Thanks!</p>\n"},{"tags":["java","spring","unit-testing","junit5"],"comments":[{"owner":{"account_id":9763630,"reputation":16595,"user_id":7237884,"display_name":"Panagiotis Bougioukos"},"score":0,"creation_date":1644326543,"post_id":71034394,"comment_id":125572365,"body_markdown":"Where is your entity `transactionToSave` defined? I can quess that the entity contains some fields which are lazily fetched. You try to writeToBytes outside of transaction and so it can be that the lazy fields remain null and so the serializer fails","body":"Where is your entity <code>transactionToSave</code> defined? I can quess that the entity contains some fields which are lazily fetched. You try to writeToBytes outside of transaction and so it can be that the lazy fields remain null and so the serializer fails"},{"owner":{"account_id":9763630,"reputation":16595,"user_id":7237884,"display_name":"Panagiotis Bougioukos"},"score":0,"creation_date":1644326638,"post_id":71034394,"comment_id":125572398,"body_markdown":"Try to mark your test with `@Transactional` to see if ^ is the  case","body":"Try to mark your test with <code>@Transactional</code> to see if ^ is the  case"},{"owner":{"account_id":1405071,"reputation":5124,"user_id":1333012,"accept_rate":56,"display_name":"sineverba"},"score":0,"creation_date":1644326869,"post_id":71034394,"comment_id":125572483,"body_markdown":"It is defined here: https://github.com/sineverba/online-banking-backend/blob/69d643eb81748656200f007bedf213d9352b079a/src/test/java/com/bitbank/test/controllers/v1/BankAccountTransactionsControllerTest.java See at bottom of file","body":"It is defined here: <a href=\"https://github.com/sineverba/online-banking-backend/blob/69d643eb81748656200f007bedf213d9352b079a/src/test/java/com/bitbank/test/controllers/v1/BankAccountTransactionsControllerTest.java\" rel=\"nofollow noreferrer\">github.com/sineverba/online-banking-backend/blob/&hellip;</a> See at bottom of file"},{"owner":{"account_id":1405071,"reputation":5124,"user_id":1333012,"accept_rate":56,"display_name":"sineverba"},"score":0,"creation_date":1644327270,"post_id":71034394,"comment_id":125572659,"body_markdown":"Btw, with `@Transactional` I have another error: `java.lang.IllegalStateException: Failed to retrieve PlatformTransactionManager for @Transactional test: [DefaultTestContext@64b73e7a testClass = BankAccountTransactionsControllerTest, testInstance = `","body":"Btw, with <code>@Transactional</code> I have another error: <code>java.lang.IllegalStateException: Failed to retrieve PlatformTransactionManager for @Transactional test: [DefaultTestContext@64b73e7a testClass = BankAccountTransactionsControllerTest, testInstance = </code>"},{"owner":{"account_id":3508935,"reputation":159,"user_id":2933780,"display_name":"galaxy"},"score":1,"creation_date":1644327639,"post_id":71034394,"comment_id":125572814,"body_markdown":"Try to remove the `Double getAmount()` method from your `BankAccountTransactionsDTO`","body":"Try to remove the <code>Double getAmount()</code> method from your <code>BankAccountTransactionsDTO</code>"},{"owner":{"account_id":1405071,"reputation":5124,"user_id":1333012,"accept_rate":56,"display_name":"sineverba"},"score":0,"creation_date":1644327887,"post_id":71034394,"comment_id":125572920,"body_markdown":"Yes, the test without the getAmount() works. But why? And overall, I have other troubles in the test without the converting value...\n\nOverall, with Postman my controller worked.","body":"Yes, the test without the getAmount() works. But why? And overall, I have other troubles in the test without the converting value...  Overall, with Postman my controller worked."},{"owner":{"account_id":1405071,"reputation":5124,"user_id":1333012,"accept_rate":56,"display_name":"sineverba"},"score":0,"creation_date":1644409869,"post_id":71034394,"comment_id":125598262,"body_markdown":"@galaxy please, can you explain me why without the getAmount method it works?","body":"@galaxy please, can you explain me why without the getAmount method it works?"}],"answers":[{"tags":[],"owner":{"account_id":3508935,"reputation":159,"user_id":2933780,"display_name":"galaxy"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1644464706,"creation_date":1644464706,"answer_id":71059548,"question_id":71034394,"body_markdown":"The reason why you got this error is beacuse your `Double getAmount()` method overrides your default Lombok&#39;s getter and when the mapper tries to map your entity&#39;s `BigDecimal amount` with your DTO&#39;s `amount` the mapper does not find a `BigDecimal` property with `amount` as its name. ","title":"Jackson ObjectMapper in JunitTest5 returns source cannot be null","body":"<p>The reason why you got this error is beacuse your <code>Double getAmount()</code> method overrides your default Lombok's getter and when the mapper tries to map your entity's <code>BigDecimal amount</code> with your DTO's <code>amount</code> the mapper does not find a <code>BigDecimal</code> property with <code>amount</code> as its name.</p>\n"}],"owner":{"account_id":1405071,"reputation":5124,"user_id":1333012,"accept_rate":56,"display_name":"sineverba"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1200,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":71059548,"answer_count":1,"score":0,"last_activity_date":1644464706,"creation_date":1644325402,"question_id":71034394,"body_markdown":"Preamble: I&#39;m learning Java (Spring) with TDD. I have a work-in-progress project here:\r\n\r\nBranch: https://github.com/sineverba/online-banking-backend/tree/add-controller\r\n\r\nLast commit: https://github.com/sineverba/online-banking-backend/commit/69d643eb81748656200f007bedf213d9352b079a\r\n\r\nI&#39;m introducing test for POST call (see `add-controller` branch to get current state of work).\r\n\r\nSo, in new controller I added the post call and in the test I wrote:\r\n\r\n```java\r\n        var id = 1L;\r\n    \tvar transactionToSave = validBankAccountTransactionsEntity(new BigDecimal(99.99), &quot;First Transaction&quot;);\r\n    \tvar savedTransaction = validBankAccountTransactionsEntity(id, new BigDecimal(99.99), &quot;First Transaction&quot;);\r\n    \t\r\n    \twhen(bankAccountTransactionsService.post(transactionToSave))\r\n    \t.thenReturn(savedTransaction);\r\n    \t\r\n    \tmvc.perform(\r\n    \t\t\tpost(&quot;/api/v1/bank-account-transactions/&quot;)\r\n    \t\t\t.contentType(MediaType.APPLICATION_JSON)\r\n    \t\t\t.content(objectMapper.writeValueAsBytes(transactionToSave))\r\n    \t\t\t)\r\n    \t.andExpect(status().isCreated())\r\n    \t.andExpect(jsonPath(&quot;$.id&quot;, is((int) id)))\r\n    \t.andExpect(jsonPath(&quot;$.amount&quot;, is(transactionToSave.getAmount())));\r\n```\r\n\r\nI got the error\r\n\r\n```java\r\norg.springframework.web.util.NestedServletException: Request processing failed; nested exception is java.lang.IllegalArgumentException: source cannot be null\r\n```\r\nAnd the issue is with \r\n\r\n```java\r\n[...]\r\nobjectMapper.writeValueAsBytes(transactionToSave)\r\n[...]\r\n```\r\n\r\nAnd in particular the error is\r\n\r\n```java\r\nCaused by: java.lang.IllegalArgumentException: source cannot be null\r\n\tat org.modelmapper.internal.util.Assert.notNull(Assert.java:53)\r\n\tat org.modelmapper.ModelMapper.map(ModelMapper.java:404)\r\n    at com.bitbank.controllers.v1.BankAccountTransactionsController.convertToDto(BankAccountTransactionsController.java:54)\r\n```\r\n\r\nSo, at the end, seems error caused by `convertToDto` method called by post method of controller: `return convertToDto(savedBankAccountTransactionsEntity);`.\r\n\r\nCannot explain my issue, I don&#39;t know how resolve it.\r\n\r\nI&#39;m following a guide: https://www.mattianatali.it/come-sviluppare-rest-api-in-tdd-con-spring-boot/\r\n\r\nYou can see the author wrote same code (of course different example), about at half of page, you can see:\r\n\r\n```java\r\n@Test\r\n    void create_shouldSaveTheVehicle() throws Exception {\r\n        var vehicleId = 1L;\r\n        var vehicleToSave = aValidVehicle();\r\n\r\n        when(vehicleService.save(vehicleToSave))\r\n                .thenReturn(\r\n                        vehicleToSave\r\n                                .toBuilder()\r\n                                .id(vehicleId)\r\n                                .build()\r\n                );\r\n\r\n        mvc.perform(\r\n                post(&quot;/api/v1/vehicles&quot;)\r\n                .contentType(MediaType.APPLICATION_JSON)\r\n                .content(objectMapper.writeValueAsBytes(vehicleToSave))\r\n        )\r\n                .andExpect(status().isCreated())\r\n                .andExpect(jsonPath(&quot;$.id&quot;, is((int) vehicleId)))\r\n                .andExpect(jsonPath(&quot;$.brand&quot;, is(vehicleToSave.getBrand())))\r\n                .andExpect(jsonPath(&quot;$.model&quot;, is(vehicleToSave.getModel())))\r\n                .andExpect(jsonPath(&quot;$.year&quot;, is(vehicleToSave.getYear())));\r\n    }\r\n```\r\n\r\nWhere is my issue? :(\r\n\r\nThank you.\r\n\r\n==================\r\n\r\n### 1 - Add: if I use Postman and I make the call with body\r\n\r\n```json\r\n{\r\n    &quot;amount&quot;: 100,\r\n    &quot;purpose&quot;: &quot;Postman test&quot;\r\n}\r\n```\r\n\r\nit works.\r\n","title":"Jackson ObjectMapper in JunitTest5 returns source cannot be null","body":"<p>Preamble: I'm learning Java (Spring) with TDD. I have a work-in-progress project here:</p>\n<p>Branch: <a href=\"https://github.com/sineverba/online-banking-backend/tree/add-controller\" rel=\"nofollow noreferrer\">https://github.com/sineverba/online-banking-backend/tree/add-controller</a></p>\n<p>Last commit: <a href=\"https://github.com/sineverba/online-banking-backend/commit/69d643eb81748656200f007bedf213d9352b079a\" rel=\"nofollow noreferrer\">https://github.com/sineverba/online-banking-backend/commit/69d643eb81748656200f007bedf213d9352b079a</a></p>\n<p>I'm introducing test for POST call (see <code>add-controller</code> branch to get current state of work).</p>\n<p>So, in new controller I added the post call and in the test I wrote:</p>\n<pre class=\"lang-java prettyprint-override\"><code>        var id = 1L;\n        var transactionToSave = validBankAccountTransactionsEntity(new BigDecimal(99.99), &quot;First Transaction&quot;);\n        var savedTransaction = validBankAccountTransactionsEntity(id, new BigDecimal(99.99), &quot;First Transaction&quot;);\n        \n        when(bankAccountTransactionsService.post(transactionToSave))\n        .thenReturn(savedTransaction);\n        \n        mvc.perform(\n                post(&quot;/api/v1/bank-account-transactions/&quot;)\n                .contentType(MediaType.APPLICATION_JSON)\n                .content(objectMapper.writeValueAsBytes(transactionToSave))\n                )\n        .andExpect(status().isCreated())\n        .andExpect(jsonPath(&quot;$.id&quot;, is((int) id)))\n        .andExpect(jsonPath(&quot;$.amount&quot;, is(transactionToSave.getAmount())));\n</code></pre>\n<p>I got the error</p>\n<pre class=\"lang-java prettyprint-override\"><code>org.springframework.web.util.NestedServletException: Request processing failed; nested exception is java.lang.IllegalArgumentException: source cannot be null\n</code></pre>\n<p>And the issue is with</p>\n<pre class=\"lang-java prettyprint-override\"><code>[...]\nobjectMapper.writeValueAsBytes(transactionToSave)\n[...]\n</code></pre>\n<p>And in particular the error is</p>\n<pre class=\"lang-java prettyprint-override\"><code>Caused by: java.lang.IllegalArgumentException: source cannot be null\n    at org.modelmapper.internal.util.Assert.notNull(Assert.java:53)\n    at org.modelmapper.ModelMapper.map(ModelMapper.java:404)\n    at com.bitbank.controllers.v1.BankAccountTransactionsController.convertToDto(BankAccountTransactionsController.java:54)\n</code></pre>\n<p>So, at the end, seems error caused by <code>convertToDto</code> method called by post method of controller: <code>return convertToDto(savedBankAccountTransactionsEntity);</code>.</p>\n<p>Cannot explain my issue, I don't know how resolve it.</p>\n<p>I'm following a guide: <a href=\"https://www.mattianatali.it/come-sviluppare-rest-api-in-tdd-con-spring-boot/\" rel=\"nofollow noreferrer\">https://www.mattianatali.it/come-sviluppare-rest-api-in-tdd-con-spring-boot/</a></p>\n<p>You can see the author wrote same code (of course different example), about at half of page, you can see:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Test\n    void create_shouldSaveTheVehicle() throws Exception {\n        var vehicleId = 1L;\n        var vehicleToSave = aValidVehicle();\n\n        when(vehicleService.save(vehicleToSave))\n                .thenReturn(\n                        vehicleToSave\n                                .toBuilder()\n                                .id(vehicleId)\n                                .build()\n                );\n\n        mvc.perform(\n                post(&quot;/api/v1/vehicles&quot;)\n                .contentType(MediaType.APPLICATION_JSON)\n                .content(objectMapper.writeValueAsBytes(vehicleToSave))\n        )\n                .andExpect(status().isCreated())\n                .andExpect(jsonPath(&quot;$.id&quot;, is((int) vehicleId)))\n                .andExpect(jsonPath(&quot;$.brand&quot;, is(vehicleToSave.getBrand())))\n                .andExpect(jsonPath(&quot;$.model&quot;, is(vehicleToSave.getModel())))\n                .andExpect(jsonPath(&quot;$.year&quot;, is(vehicleToSave.getYear())));\n    }\n</code></pre>\n<p>Where is my issue? :(</p>\n<p>Thank you.</p>\n<p>==================</p>\n<h3>1 - Add: if I use Postman and I make the call with body</h3>\n<pre class=\"lang-json prettyprint-override\"><code>{\n    &quot;amount&quot;: 100,\n    &quot;purpose&quot;: &quot;Postman test&quot;\n}\n</code></pre>\n<p>it works.</p>\n"},{"tags":["java","java-9","java-module","java-platform-module-system","modularization"],"answers":[{"tags":[],"owner":{"account_id":4714434,"reputation":41866,"user_id":3814029,"accept_rate":67,"display_name":"Andy Guibert"},"down_vote_count":0,"up_vote_count":9,"is_accepted":false,"score":9,"last_activity_date":1534183764,"creation_date":1534183764,"answer_id":51828213,"question_id":51828014,"body_markdown":"The Java module system resolves the split package problem by rejecting this sort of scenario at JVM startup time.  When the JVM starts it will immediately begin resolving the module graph, and when it encounters two modules in `test.myapp`&#39;s module path, the JVM will throw an error indicating `test.module1` and `test.module2` are attempting to export the same package.","title":"How split packages are avoided in Java 9","body":"<p>The Java module system resolves the split package problem by rejecting this sort of scenario at JVM startup time.  When the JVM starts it will immediately begin resolving the module graph, and when it encounters two modules in <code>test.myapp</code>'s module path, the JVM will throw an error indicating <code>test.module1</code> and <code>test.module2</code> are attempting to export the same package.</p>\n"},{"tags":[],"owner":{"account_id":1939636,"reputation":28457,"user_id":1746118,"accept_rate":95,"display_name":"Naman"},"down_vote_count":0,"up_vote_count":11,"is_accepted":true,"score":11,"last_activity_date":1534187007,"creation_date":1534186688,"answer_id":51828900,"question_id":51828014,"body_markdown":"With the scenario described in the question, you&#39;ll start facing an error reading :\r\n\r\n&gt; Module `test.myapp` reads package from both `test.module1` and `test.module2`\r\n\r\n***Readability*** of the Modules from [The State of the Module System](http://openjdk.java.net/projects/jigsaw/spec/sotms/#readability) elaborates over the use of Modules as follows and shall interest your use-case(emphasis mine):\r\n\r\n&gt; The readability relationships defined in a module graph are the basis\r\n&gt; of *reliable configuration*: The module system ensures\r\n\r\n&gt; - that every dependence is fulfilled by precisely one other module\r\n&gt; - that the module graph is acyclic\r\n&gt; - that every module reads at most one module defining a given package\r\n&gt; - *and that modules defining identically-named packages do not interfere with each other*.\r\n\r\nthe benefit of implying the same in the module system is detailed as well\r\n\r\n&gt; Reliable configuration is not just more reliable; *it can also be\r\n&gt; faster*. When code in a module refers to a type in a package then that\r\n&gt; package is guaranteed to be defined either in that module or in\r\n&gt; precisely one of the modules read by that module. \r\n\r\n&gt; When looking for the\r\n&gt; definition of a specific type there is, therefore, no need to search\r\n&gt; for it in multiple modules or, *worse, along the entire class path*.\r\n\r\n----------\r\n\r\nThat said, the current solution to your implementation is \r\n\r\n- if the modules `test.module1` and `test.module2` are *explicit modules*, you can choose to implement the package `abc.pqr.xyz` in *either one of them*\r\n OR you pull it out from both into a separate module `test.mergeModule` of your own which can thereafter be used as an independent module across its clients.\r\n\r\n- if these(or any one of them) are *automatic modules*, you can make use of the [bridge extended to the classpath](http://openjdk.java.net/projects/jigsaw/spec/sotms/#bridges-to-the-class-path) and let such jar remain on the classpath and be treated as the unnamed module, which shall by default export all of its packages. At the same time, any automatic module while reading every other *named module* is also made to read the *[unnamed module](http://openjdk.java.net/projects/jigsaw/spec/sotms/#the-unnamed-module)*. \r\n\r\n Quoting the document again and to illustrate with an example, so that you can correlate to your question : \r\n\r\n &gt; If code in the explicit module com.foo.app refers to a public type in\r\n&gt; `com.foo.bar`, e.g., and the signature of that type refers to a type in\r\n&gt; one of the JAR files still on the class path, then the code in\r\n&gt; `com.foo.app` will not be able to access that type since `com.foo.app`\r\n&gt; cannot depend upon the unnamed module.\r\n\r\n &gt; This can be remedied by treating `com.foo.app` as an automatic module temporarily, so that its\r\n&gt; code can access types from the class path, until such time as the\r\n&gt; relevant JAR file on the class path can be treated as an automatic\r\n&gt; module or converted into an explicit module.","title":"How split packages are avoided in Java 9","body":"<p>With the scenario described in the question, you'll start facing an error reading :</p>\n\n<blockquote>\n  <p>Module <code>test.myapp</code> reads package from both <code>test.module1</code> and <code>test.module2</code></p>\n</blockquote>\n\n<p><strong><em>Readability</em></strong> of the Modules from <a href=\"http://openjdk.java.net/projects/jigsaw/spec/sotms/#readability\" rel=\"noreferrer\">The State of the Module System</a> elaborates over the use of Modules as follows and shall interest your use-case(emphasis mine):</p>\n\n<blockquote>\n  <p>The readability relationships defined in a module graph are the basis\n  of <em>reliable configuration</em>: The module system ensures</p>\n  \n  <ul>\n  <li>that every dependence is fulfilled by precisely one other module</li>\n  <li>that the module graph is acyclic</li>\n  <li>that every module reads at most one module defining a given package</li>\n  <li><em>and that modules defining identically-named packages do not interfere with each other</em>.</li>\n  </ul>\n</blockquote>\n\n<p>the benefit of implying the same in the module system is detailed as well</p>\n\n<blockquote>\n  <p>Reliable configuration is not just more reliable; <em>it can also be\n  faster</em>. When code in a module refers to a type in a package then that\n  package is guaranteed to be defined either in that module or in\n  precisely one of the modules read by that module. </p>\n  \n  <p>When looking for the\n  definition of a specific type there is, therefore, no need to search\n  for it in multiple modules or, <em>worse, along the entire class path</em>.</p>\n</blockquote>\n\n<hr>\n\n<p>That said, the current solution to your implementation is </p>\n\n<ul>\n<li><p>if the modules <code>test.module1</code> and <code>test.module2</code> are <em>explicit modules</em>, you can choose to implement the package <code>abc.pqr.xyz</code> in <em>either one of them</em>\nOR you pull it out from both into a separate module <code>test.mergeModule</code> of your own which can thereafter be used as an independent module across its clients.</p></li>\n<li><p>if these(or any one of them) are <em>automatic modules</em>, you can make use of the <a href=\"http://openjdk.java.net/projects/jigsaw/spec/sotms/#bridges-to-the-class-path\" rel=\"noreferrer\">bridge extended to the classpath</a> and let such jar remain on the classpath and be treated as the unnamed module, which shall by default export all of its packages. At the same time, any automatic module while reading every other <em>named module</em> is also made to read the <em><a href=\"http://openjdk.java.net/projects/jigsaw/spec/sotms/#the-unnamed-module\" rel=\"noreferrer\">unnamed module</a></em>. </p>\n\n<p>Quoting the document again and to illustrate with an example, so that you can correlate to your question : </p>\n\n<blockquote>\n  <p>If code in the explicit module com.foo.app refers to a public type in\n  <code>com.foo.bar</code>, e.g., and the signature of that type refers to a type in\n  one of the JAR files still on the class path, then the code in\n  <code>com.foo.app</code> will not be able to access that type since <code>com.foo.app</code>\n  cannot depend upon the unnamed module.</p>\n  \n  <p>This can be remedied by treating <code>com.foo.app</code> as an automatic module temporarily, so that its\n  code can access types from the class path, until such time as the\n  relevant JAR file on the class path can be treated as an automatic\n  module or converted into an explicit module.</p>\n</blockquote></li>\n</ul>\n"}],"owner":{"account_id":5199414,"reputation":1366,"user_id":4159389,"accept_rate":0,"display_name":"Rahul Vedpathak"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":5395,"favorite_count":0,"down_vote_count":0,"up_vote_count":14,"accepted_answer_id":51828900,"answer_count":2,"score":14,"last_activity_date":1644464281,"creation_date":1534182953,"question_id":51828014,"body_markdown":"I am new to Java 9 and was going though the modular video lectures by Java on YouTube.\r\nThey mentioned 3 benefits of modularization-\r\n1. No missing dependencies\r\n2. No cyclic dependnpcies\r\n3. No split packages.\r\n \r\nAs far as I understand about split packages is that let&#39;s say an application is dependant on multiple dependncies and let&#39;s say package abc.pqr.xyz is present in more that 1 jar.\r\nThen there is a chance that some of the classes in that package will be used from jar1 while other classes from jar2.\r\nThis might lead to some problems at runtime which will be hard to debug.\r\n\r\nVideo says modularization solves this issue.\r\nBut how that&#39;s what I am trying to understand?\r\n\r\nLet&#39;s say there is test.module1 which has below module info -\r\n\r\n    module test.module1{\r\n    exports abc.pqr.xyz;\r\n    }\r\n\r\nAnother module2 with below module info-\r\n\r\n    module test.module2{\r\n     exports abc.pqr.xyz;\r\n    }\r\n\r\nNow let&#39;s say in my application I added dependencies of both of these modules-\r\n\r\n    module test.myapp{\r\n     requires test.module1;\r\n     requires test.module2;\r\n    }\r\n\r\n\r\nNow again I have 2 modular dependencies where there is a chance that some of the classes will be present in both of these modules.\r\nSo at runtime how it will be resolved from which module to pick up the class definitions?\r\nHow Java 9 will avoid split packages problem?\r\n","title":"How split packages are avoided in Java 9","body":"<p>I am new to Java 9 and was going though the modular video lectures by Java on YouTube.\nThey mentioned 3 benefits of modularization-\n1. No missing dependencies\n2. No cyclic dependnpcies\n3. No split packages.</p>\n\n<p>As far as I understand about split packages is that let's say an application is dependant on multiple dependncies and let's say package abc.pqr.xyz is present in more that 1 jar.\nThen there is a chance that some of the classes in that package will be used from jar1 while other classes from jar2.\nThis might lead to some problems at runtime which will be hard to debug.</p>\n\n<p>Video says modularization solves this issue.\nBut how that's what I am trying to understand?</p>\n\n<p>Let's say there is test.module1 which has below module info -</p>\n\n<pre><code>module test.module1{\nexports abc.pqr.xyz;\n}\n</code></pre>\n\n<p>Another module2 with below module info-</p>\n\n<pre><code>module test.module2{\n exports abc.pqr.xyz;\n}\n</code></pre>\n\n<p>Now let's say in my application I added dependencies of both of these modules-</p>\n\n<pre><code>module test.myapp{\n requires test.module1;\n requires test.module2;\n}\n</code></pre>\n\n<p>Now again I have 2 modular dependencies where there is a chance that some of the classes will be present in both of these modules.\nSo at runtime how it will be resolved from which module to pick up the class definitions?\nHow Java 9 will avoid split packages problem?</p>\n"},{"tags":["java","testing","reflection","java-record"],"comments":[{"owner":{"account_id":785560,"reputation":14879,"user_id":845414,"display_name":"Johannes Kuhn"},"score":2,"creation_date":1644392298,"post_id":71040780,"comment_id":125591566,"body_markdown":"It&#39;s a limitation of these utilities. Record fields are final, that means that they can not be modified after they have been set. If you need a record with different values, create a new record.","body":"It&#39;s a limitation of these utilities. Record fields are final, that means that they can not be modified after they have been set. If you need a record with different values, create a new record."}],"answers":[{"tags":[],"owner":{"account_id":3211603,"reputation":289297,"user_id":2711488,"display_name":"Holger"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1644418125,"creation_date":1644418125,"answer_id":71051688,"question_id":71040780,"body_markdown":"Since modifying the `private final` fields of a `record` is intentionally unsupported, it’s not a limitation of the JVM or Java execution environment, so relying on the ability to modify such fields is a limitation of these utilities.\r\n\r\nThe [documentation of `setAccessible`] says:\r\n\r\n&gt; This method cannot be used to enable *write* access to a *non-modifiable* final field. The following fields are non-modifiable:\r\n&gt; - static final fields declared in any class or interface\r\n&gt; - final fields declared in a hidden class\r\n&gt; - final fields declared in a record\r\n\r\nThe original intent of supporting to write a `final` instance field via access override, was to allow fixing the object state after cloning or deserializing. Neither is necessary for a `record`.\r\n\r\n - Deserializing a `record` instance will invoke its constructor, so the constructor can apply all necessary validation and fixes before the final fields are assigned.\r\n\r\n - Creating a shallow clone of a `record` has no point at all. For all other copying purposes, you can read all of its components, as each field has a corresponding accessor method, adapt them, and pass the adapted values to the always existing canonical constructor.\r\n\r\n[documentation of `setAccessible`]: https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/reflect/AccessibleObject.html#setAccessible(boolean)","title":"Java Record - Tests - Modify Fields","body":"<p>Since modifying the <code>private final</code> fields of a <code>record</code> is intentionally unsupported, it’s not a limitation of the JVM or Java execution environment, so relying on the ability to modify such fields is a limitation of these utilities.</p>\n<p>The <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/reflect/AccessibleObject.html#setAccessible(boolean)\" rel=\"noreferrer\">documentation of <code>setAccessible</code></a> says:</p>\n<blockquote>\n<p>This method cannot be used to enable <em>write</em> access to a <em>non-modifiable</em> final field. The following fields are non-modifiable:</p>\n<ul>\n<li>static final fields declared in any class or interface</li>\n<li>final fields declared in a hidden class</li>\n<li>final fields declared in a record</li>\n</ul>\n</blockquote>\n<p>The original intent of supporting to write a <code>final</code> instance field via access override, was to allow fixing the object state after cloning or deserializing. Neither is necessary for a <code>record</code>.</p>\n<ul>\n<li><p>Deserializing a <code>record</code> instance will invoke its constructor, so the constructor can apply all necessary validation and fixes before the final fields are assigned.</p>\n</li>\n<li><p>Creating a shallow clone of a <code>record</code> has no point at all. For all other copying purposes, you can read all of its components, as each field has a corresponding accessor method, adapt them, and pass the adapted values to the always existing canonical constructor.</p>\n</li>\n</ul>\n"}],"owner":{"account_id":5477283,"reputation":4713,"user_id":4354956,"accept_rate":38,"display_name":"Joseph K. Strauss"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1255,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1644464207,"creation_date":1644353767,"question_id":71040780,"body_markdown":"I have a framework used exclusively for testing that sets fields at runtime. The purpose is to set up test cases. Looking forward to upgrading to Java 14+ records I am noticing that existing utilities such as `ReflectionTestUtils.setField` and `PropertyAccessorFactory.forDirectFieldAccess` which work on normal private final fields, do not work for record fields.\r\n\r\nIs this a limitation of the JVM, or is a limitation of these utilities?","title":"Java Record - Tests - Modify Fields","body":"<p>I have a framework used exclusively for testing that sets fields at runtime. The purpose is to set up test cases. Looking forward to upgrading to Java 14+ records I am noticing that existing utilities such as <code>ReflectionTestUtils.setField</code> and <code>PropertyAccessorFactory.forDirectFieldAccess</code> which work on normal private final fields, do not work for record fields.</p>\n<p>Is this a limitation of the JVM, or is a limitation of these utilities?</p>\n"},{"tags":["java","spring","multithreading","spring-batch"],"comments":[{"owner":{"account_id":60171,"reputation":115485,"user_id":179850,"accept_rate":100,"display_name":"Gray"},"score":1,"creation_date":1644616096,"post_id":71054610,"comment_id":125662846,"body_markdown":"Welcome to SO.  Can you reduce the size of your question?  See: https://stackoverflow.com/help/minimal-reproducible-example","body":"Welcome to SO.  Can you reduce the size of your question?  See: <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">stackoverflow.com/help/minimal-reproducible-example</a>"}],"answers":[{"tags":[],"owner":{"account_id":22194538,"reputation":11,"user_id":16436125,"display_name":"神韵499"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1644463100,"creation_date":1644463100,"answer_id":71059384,"question_id":71054610,"body_markdown":"I guess you want to use this mode of Multi-threaded Step to resolve read slowly problem. more details is available from [spring batch office - Multi-threaded Step][1] about it. \r\n\r\nHope to help you.\r\n\r\n\r\n  [1]: https://docs.spring.io/spring-batch/docs/4.3.x/reference/html/scalability.html#multithreadedStep","title":"Threading a variable number of heterogeneous input files, process the input and output to a single file","body":"<p>I guess you want to use this mode of Multi-threaded Step to resolve read slowly problem. more details is available from <a href=\"https://docs.spring.io/spring-batch/docs/4.3.x/reference/html/scalability.html#multithreadedStep\" rel=\"nofollow noreferrer\">spring batch office - Multi-threaded Step</a> about it.</p>\n<p>Hope to help you.</p>\n"}],"owner":{"account_id":21759357,"reputation":1,"user_id":16064153,"display_name":"Craig Kemple"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":59,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1644463100,"creation_date":1644430085,"question_id":71054610,"body_markdown":"I am trying improve the performance of the job listed below.  As is, without threading, it runs successfully.  But is runs very slow.  I would like to thread step 2 where 95% of the work happens in the reading, filtering and transforming the input data read from very large heterogeneous files.  The job: \r\n\r\n•\tStep1 gets some job parameters that are passed into Step2.\r\n\r\n•\tStep2 will read in X number of files.  Each file is heterogenous, i.e., contains several different record formats.  The records are filtered, transformed and sent to a single output file.\r\n\r\n\r\nDoes Spring Batch have a built-in way to thread Step2 in this scenario?  For example, can I add some type of executor to step2?  I’ve tried SimpleAsyncTaskExecutor and ThreadPoolTaskExecutor.  Neither work.  Adding SimpleAsyncTaskExecutor throws an exception. (See https://stackoverflow.com/questions/60883344/can-we-process-the-multiple-files-sequentially-using-spring-batch-while-multiple.)  \r\n\r\nHere is the batch configuration:\r\n\r\n```                 @Bean\r\n                public Job job() {\r\n                                return jobBuilderFactory.get(&quot;MyJob&quot;)\r\n                                                                .start(step1())\r\n                                                                .next(step2())\r\n                                                                .build();\r\n                }              \r\n\r\n                @Bean\r\n                public Step step1()  {\r\n                                return stepBuilderFactory.get(&quot;Step1GetJobParams&quot;)\r\n                                                                .tasklet(MyParamsTasklet)\r\n                                                                .build();\r\n                }\r\n                \r\n                @Bean\r\n                public Step step2() {\r\n                                return stepBuilderFactory.get(&quot;Step2&quot;)\r\n                                                                .&lt;InputDO, OutputDO&gt;chunk(1000)\r\n                                                                .reader(myMultiResourceReader())\r\n                                                                .processor(myStep2ItemProcessor)\r\n                                                                .writer(myStep2FileWriter())\r\n                                                                .taskExecutor(???)                                          line #23\r\n                            .build();\r\n                }\r\n                \r\n                @Bean\r\n                public MultiResourceItemReader&lt;InputDO&gt; myMultiResourceReader(){\r\n                                MultiResourceItemReader&lt;InputDO&gt; multiResourceItemReader = new MultiResourceItemReader&lt;InputDO&gt;();\r\n                                multiResourceItemReader.setResources(resourceManager.getResources());\r\n                                multiResourceItemReader.setDelegate(myStep2FileReader());\r\n                                multiResourceItemReader.setSaveState(false);\r\n                                return multiResourceItemReader;\r\n                }\r\n                \r\n                @Bean\r\n                public FlatFileItemReader&lt;InputDO&gt; myStep2FileReader() {\r\n                                return new FlatFileItemReaderBuilder&lt;InputDO&gt;()\r\n                                                               .name(&quot;MyStep2FileReader&quot;)\r\n                                                               .lineMapper(myCompositeLineMapper())\r\n                                                               .build();\r\n                }\r\n                \r\n                @Bean \r\n                 public PatternMatchingCompositeLineMapper&lt;InputDO&gt; myCompositeLineMapper() {\r\n                                PatternMatchingCompositeLineMapper&lt;InputDO&gt; lineMapper = new PatternMatchingCompositeLineMapper&lt;InputDO&gt;();\r\n                                Map&lt;String, LineTokenizer&gt; tokenizers = new HashMap&lt;String, LineTokenizer&gt;();\r\n                                tokenizers.put(&quot;A&quot;, InputDOTokenizer.getInputDOTokenizer());\r\n                                tokenizers.put(&quot;*&quot;, InputDOFillerTokenizer.getInputDOFillerTokenizer());\r\n                                lineMapper.setTokenizers(tokenizers);\r\n                                Map&lt;String, FieldSetMapper&lt;InputDO&gt;&gt; mappers = new HashMap&lt;String, FieldSetMapper&lt;InputDO&gt;&gt;();\r\n                                mappers.put(&quot;A&quot;, new InputDOFieldSetMapper());\r\n                                mappers.put(&quot;*&quot;, new InputDOFillerFieldSetMapper());\r\n                                lineMapper.setFieldSetMappers(mappers);\r\n                                return lineMapper; \r\n                 }\r\n                \r\n                @Bean\r\n                public FlatFileItemWriter&lt;OutputDO&gt; myOutputDOFileWriter() {\r\n                                return  new FlatFileItemWriterBuilder&lt;OutputDO&gt;()\r\n                                               .name(&quot;MyOutputDOFileWriter&quot;)\r\n                                               .resource(resourceManager.getFileSystemResource(&quot;myOutputDOFileName&quot;))\r\n                                               .lineAggregator(new DelimitedLineAggregator&lt;OutputDO&gt;() {\r\n                                                               {\r\n                                                                                                setDelimiter(&quot;&quot;);\r\n                                                                                                setFieldExtractor(outputDOFieldExtractor.getOutputDOFieldExtractor());\r\n                                                                                };\r\n                                               })\r\n                                               .lineSeparator(&quot;\\r\\n&quot;)\r\n                                               .build();\r\n                }\r\n ```\r\n\r\nAny/all guidance is much appreciated!\r\n","title":"Threading a variable number of heterogeneous input files, process the input and output to a single file","body":"<p>I am trying improve the performance of the job listed below.  As is, without threading, it runs successfully.  But is runs very slow.  I would like to thread step 2 where 95% of the work happens in the reading, filtering and transforming the input data read from very large heterogeneous files.  The job:</p>\n<p>•   Step1 gets some job parameters that are passed into Step2.</p>\n<p>•   Step2 will read in X number of files.  Each file is heterogenous, i.e., contains several different record formats.  The records are filtered, transformed and sent to a single output file.</p>\n<p>Does Spring Batch have a built-in way to thread Step2 in this scenario?  For example, can I add some type of executor to step2?  I’ve tried SimpleAsyncTaskExecutor and ThreadPoolTaskExecutor.  Neither work.  Adding SimpleAsyncTaskExecutor throws an exception. (See <a href=\"https://stackoverflow.com/questions/60883344/can-we-process-the-multiple-files-sequentially-using-spring-batch-while-multiple.\">can we process the multiple files sequentially using spring Batch while multiple threads used to process individual files data..?</a>)</p>\n<p>Here is the batch configuration:</p>\n<pre><code>                public Job job() {\n                                return jobBuilderFactory.get(&quot;MyJob&quot;)\n                                                                .start(step1())\n                                                                .next(step2())\n                                                                .build();\n                }              \n\n                @Bean\n                public Step step1()  {\n                                return stepBuilderFactory.get(&quot;Step1GetJobParams&quot;)\n                                                                .tasklet(MyParamsTasklet)\n                                                                .build();\n                }\n                \n                @Bean\n                public Step step2() {\n                                return stepBuilderFactory.get(&quot;Step2&quot;)\n                                                                .&lt;InputDO, OutputDO&gt;chunk(1000)\n                                                                .reader(myMultiResourceReader())\n                                                                .processor(myStep2ItemProcessor)\n                                                                .writer(myStep2FileWriter())\n                                                                .taskExecutor(???)                                          line #23\n                            .build();\n                }\n                \n                @Bean\n                public MultiResourceItemReader&lt;InputDO&gt; myMultiResourceReader(){\n                                MultiResourceItemReader&lt;InputDO&gt; multiResourceItemReader = new MultiResourceItemReader&lt;InputDO&gt;();\n                                multiResourceItemReader.setResources(resourceManager.getResources());\n                                multiResourceItemReader.setDelegate(myStep2FileReader());\n                                multiResourceItemReader.setSaveState(false);\n                                return multiResourceItemReader;\n                }\n                \n                @Bean\n                public FlatFileItemReader&lt;InputDO&gt; myStep2FileReader() {\n                                return new FlatFileItemReaderBuilder&lt;InputDO&gt;()\n                                                               .name(&quot;MyStep2FileReader&quot;)\n                                                               .lineMapper(myCompositeLineMapper())\n                                                               .build();\n                }\n                \n                @Bean \n                 public PatternMatchingCompositeLineMapper&lt;InputDO&gt; myCompositeLineMapper() {\n                                PatternMatchingCompositeLineMapper&lt;InputDO&gt; lineMapper = new PatternMatchingCompositeLineMapper&lt;InputDO&gt;();\n                                Map&lt;String, LineTokenizer&gt; tokenizers = new HashMap&lt;String, LineTokenizer&gt;();\n                                tokenizers.put(&quot;A&quot;, InputDOTokenizer.getInputDOTokenizer());\n                                tokenizers.put(&quot;*&quot;, InputDOFillerTokenizer.getInputDOFillerTokenizer());\n                                lineMapper.setTokenizers(tokenizers);\n                                Map&lt;String, FieldSetMapper&lt;InputDO&gt;&gt; mappers = new HashMap&lt;String, FieldSetMapper&lt;InputDO&gt;&gt;();\n                                mappers.put(&quot;A&quot;, new InputDOFieldSetMapper());\n                                mappers.put(&quot;*&quot;, new InputDOFillerFieldSetMapper());\n                                lineMapper.setFieldSetMappers(mappers);\n                                return lineMapper; \n                 }\n                \n                @Bean\n                public FlatFileItemWriter&lt;OutputDO&gt; myOutputDOFileWriter() {\n                                return  new FlatFileItemWriterBuilder&lt;OutputDO&gt;()\n                                               .name(&quot;MyOutputDOFileWriter&quot;)\n                                               .resource(resourceManager.getFileSystemResource(&quot;myOutputDOFileName&quot;))\n                                               .lineAggregator(new DelimitedLineAggregator&lt;OutputDO&gt;() {\n                                                               {\n                                                                                                setDelimiter(&quot;&quot;);\n                                                                                                setFieldExtractor(outputDOFieldExtractor.getOutputDOFieldExtractor());\n                                                                                };\n                                               })\n                                               .lineSeparator(&quot;\\r\\n&quot;)\n                                               .build();\n                }\n</code></pre>\n<p>Any/all guidance is much appreciated!</p>\n"},{"tags":["java","apache-spark","jdbc"],"answers":[{"tags":[],"owner":{"account_id":24199438,"reputation":1,"user_id":18157474,"display_name":"Lyhao"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1644462568,"creation_date":1644462568,"answer_id":71059330,"question_id":71044908,"body_markdown":"I resolve it by change the url from mariadb to mysql，\r\nalthough i did use the mariadb.\r\n\r\n    \r\n        options.put(&quot;url&quot;, &quot;jdbc:mysql://localhost:3306/spark&quot;);","title":"Caused by: java.sql.SQLException: Out of range value for column &#39;age&#39; : value age","body":"<p>I resolve it by change the url from mariadb to mysql，\nalthough i did use the mariadb.</p>\n<pre><code>    options.put(&quot;url&quot;, &quot;jdbc:mysql://localhost:3306/spark&quot;);\n</code></pre>\n"}],"owner":{"account_id":24199438,"reputation":1,"user_id":18157474,"display_name":"Lyhao"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":379,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1644462568,"creation_date":1644388034,"question_id":71044908,"body_markdown":"I keep getting SQLException but I suspect that it is not the problem. Table is :\r\n\r\n    create table person (first varchar(30) DEFAULT NULL, last varchar(30)      DEFAULT NULL, gender char(1) DEFAULT NULL, age int(4) DEFAULT NULL);\r\n\r\nInsert statements:\r\n\r\n    insert into person values(&#39;Barack&#39;,&#39;Obama&#39;,&#39;M&#39;,54);\r\n    insert into person values(&#39;Hillary&#39;,&#39;Clinton&#39;,&#39;f&#39;,34);\r\n\r\nSpark code:\r\n\r\n    public void test3() {\r\n        // SparkConf conf = new SparkConf().setAppName(&quot;Stackoverflow&quot;).setMaster(&quot;local[4]&quot;);\r\n        // JavaSparkContext sc = new JavaSparkContext(conf);\r\n        // SQLContext sqlContext = new SQLContext(sc);\r\n        SparkSession spark = \r\n        SparkSession.builder().appName(&quot;JavaALS&quot;).master(&quot;local[1]&quot;).getOrCreate();\r\n        SQLContext context = spark.sqlContext();\r\n        Map&lt;String, String&gt; options = new HashMap&lt;&gt;();\r\n        options.put(&quot;url&quot;, &quot;jdbc:mariadb://localhost:3306/test&quot;);\r\n        options.put(&quot;user&quot;, &quot;root&quot;);\r\n        options.put(&quot;password&quot;, &quot;lyhao1999&quot;);\r\n        options.put(&quot;dbtable&quot;, &quot;(select * from person where gender = &#39;M&#39;) as someone&quot;);\r\n\r\n        Dataset&lt;Row&gt; jdbcDF = context.read().format(&quot;jdbc&quot;).options(options).load();\r\n        jdbcDF.show();\r\n    }\r\n\r\nError:\r\n\r\n    Caused by: java.sql.SQLException: Out of range value for column &#39;age&#39; : value age\r\n\tat org.mariadb.jdbc.internal.com.read.resultset.rowprotocol.TextRowProtocol.getInternalLong(TextRowProtocol.java:348)\r\n\tat org.mariadb.jdbc.internal.com.read.resultset.rowprotocol.TextRowProtocol.getInternalInt(TextRowProtocol.java:254)\r\n\tat org.mariadb.jdbc.internal.com.read.resultset.SelectResultSet.getInt(SelectResultSet.java:985)\r\n\tat org.apache.spark.sql.execution.datasources.jdbc.JdbcUtils$.$anonfun$makeGetter$7(JdbcUtils.scala:431)\r\n\tat org.apache.spark.sql.execution.datasources.jdbc.JdbcUtils$.$anonfun$makeGetter$7$adapted(JdbcUtils.scala:430)\r\n\tat org.apache.spark.sql.execution.datasources.jdbc.JdbcUtils$$anon$1.getNext(JdbcUtils.scala:367)\r\n\tat org.apache.spark.sql.execution.datasources.jdbc.JdbcUtils$$anon$1.getNext(JdbcUtils.scala:349)\r\n\tat org.apache.spark.util.NextIterator.hasNext(NextIterator.scala:73)\r\n\tat org.apache.spark.InterruptibleIterator.hasNext(InterruptibleIterator.scala:37)\r\n\tat org.apache.spark.util.CompletionIterator.hasNext(CompletionIterator.scala:31)\r\n\tat org.apache.spark.sql.catalyst.expressions.GeneratedClass$GeneratedIteratorForCodegenStage1.processNext(Unknown Source)\r\n\tat org.apache.spark.sql.execution.BufferedRowIterator.hasNext(BufferedRowIterator.java:43)\r\n\tat org.apache.spark.sql.execution.WholeStageCodegenExec$$anon$1.hasNext(WholeStageCodegenExec.scala:759)\r\n\tat org.apache.spark.sql.execution.SparkPlan.$anonfun$getByteArrayRdd$1(SparkPlan.scala:349)\r\n\tat org.apache.spark.rdd.RDD.$anonfun$mapPartitionsInternal$2(RDD.scala:898)\r\n\tat org.apache.spark.rdd.RDD.$anonfun$mapPartitionsInternal$2$adapted(RDD.scala:898)\r\n\tat org.apache.spark.rdd.MapPartitionsRDD.compute(MapPartitionsRDD.scala:52)\r\n\tat org.apache.spark.rdd.RDD.computeOrReadCheckpoint(RDD.scala:373)\r\n\tat org.apache.spark.rdd.RDD.iterator(RDD.scala:337)\r\n\tat org.apache.spark.scheduler.ResultTask.runTask(ResultTask.scala:90)\r\n\tat org.apache.spark.scheduler.Task.run(Task.scala:131)\r\n\tat org.apache.spark.executor.Executor$TaskRunner.$anonfun$run$3(Executor.scala:506)\r\n\tat org.apache.spark.util.Utils$.tryWithSafeFinally(Utils.scala:1462)\r\n\tat org.apache.spark.executor.Executor$TaskRunner.run(Executor.scala:509)\r\n\tat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)\r\n\tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)\r\n\tat java.lang.Thread.run(Thread.java:748)\r\n\r\nI saw it during debugging：\r\n\r\n    java.lang.NumberFormatException: For input string: &quot;age&quot;\r\n\r\nThis is a code example I found on the web, and if it is an empty table, it will not be reported as an error; I tried to change the field property to varchar, but the result of the query became the field name.\r\n\r\n|first|last|gender|age|\r\n|-----|----|------|---|\r\n|first|last|gender|age|\r\n\r\n\r\n\r\n","title":"Caused by: java.sql.SQLException: Out of range value for column &#39;age&#39; : value age","body":"<p>I keep getting SQLException but I suspect that it is not the problem. Table is :</p>\n<pre><code>create table person (first varchar(30) DEFAULT NULL, last varchar(30)      DEFAULT NULL, gender char(1) DEFAULT NULL, age int(4) DEFAULT NULL);\n</code></pre>\n<p>Insert statements:</p>\n<pre><code>insert into person values('Barack','Obama','M',54);\ninsert into person values('Hillary','Clinton','f',34);\n</code></pre>\n<p>Spark code:</p>\n<pre><code>public void test3() {\n    // SparkConf conf = new SparkConf().setAppName(&quot;Stackoverflow&quot;).setMaster(&quot;local[4]&quot;);\n    // JavaSparkContext sc = new JavaSparkContext(conf);\n    // SQLContext sqlContext = new SQLContext(sc);\n    SparkSession spark = \n    SparkSession.builder().appName(&quot;JavaALS&quot;).master(&quot;local[1]&quot;).getOrCreate();\n    SQLContext context = spark.sqlContext();\n    Map&lt;String, String&gt; options = new HashMap&lt;&gt;();\n    options.put(&quot;url&quot;, &quot;jdbc:mariadb://localhost:3306/test&quot;);\n    options.put(&quot;user&quot;, &quot;root&quot;);\n    options.put(&quot;password&quot;, &quot;lyhao1999&quot;);\n    options.put(&quot;dbtable&quot;, &quot;(select * from person where gender = 'M') as someone&quot;);\n\n    Dataset&lt;Row&gt; jdbcDF = context.read().format(&quot;jdbc&quot;).options(options).load();\n    jdbcDF.show();\n}\n</code></pre>\n<p>Error:</p>\n<pre><code>Caused by: java.sql.SQLException: Out of range value for column 'age' : value age\nat org.mariadb.jdbc.internal.com.read.resultset.rowprotocol.TextRowProtocol.getInternalLong(TextRowProtocol.java:348)\nat org.mariadb.jdbc.internal.com.read.resultset.rowprotocol.TextRowProtocol.getInternalInt(TextRowProtocol.java:254)\nat org.mariadb.jdbc.internal.com.read.resultset.SelectResultSet.getInt(SelectResultSet.java:985)\nat org.apache.spark.sql.execution.datasources.jdbc.JdbcUtils$.$anonfun$makeGetter$7(JdbcUtils.scala:431)\nat org.apache.spark.sql.execution.datasources.jdbc.JdbcUtils$.$anonfun$makeGetter$7$adapted(JdbcUtils.scala:430)\nat org.apache.spark.sql.execution.datasources.jdbc.JdbcUtils$$anon$1.getNext(JdbcUtils.scala:367)\nat org.apache.spark.sql.execution.datasources.jdbc.JdbcUtils$$anon$1.getNext(JdbcUtils.scala:349)\nat org.apache.spark.util.NextIterator.hasNext(NextIterator.scala:73)\nat org.apache.spark.InterruptibleIterator.hasNext(InterruptibleIterator.scala:37)\nat org.apache.spark.util.CompletionIterator.hasNext(CompletionIterator.scala:31)\nat org.apache.spark.sql.catalyst.expressions.GeneratedClass$GeneratedIteratorForCodegenStage1.processNext(Unknown Source)\nat org.apache.spark.sql.execution.BufferedRowIterator.hasNext(BufferedRowIterator.java:43)\nat org.apache.spark.sql.execution.WholeStageCodegenExec$$anon$1.hasNext(WholeStageCodegenExec.scala:759)\nat org.apache.spark.sql.execution.SparkPlan.$anonfun$getByteArrayRdd$1(SparkPlan.scala:349)\nat org.apache.spark.rdd.RDD.$anonfun$mapPartitionsInternal$2(RDD.scala:898)\nat org.apache.spark.rdd.RDD.$anonfun$mapPartitionsInternal$2$adapted(RDD.scala:898)\nat org.apache.spark.rdd.MapPartitionsRDD.compute(MapPartitionsRDD.scala:52)\nat org.apache.spark.rdd.RDD.computeOrReadCheckpoint(RDD.scala:373)\nat org.apache.spark.rdd.RDD.iterator(RDD.scala:337)\nat org.apache.spark.scheduler.ResultTask.runTask(ResultTask.scala:90)\nat org.apache.spark.scheduler.Task.run(Task.scala:131)\nat org.apache.spark.executor.Executor$TaskRunner.$anonfun$run$3(Executor.scala:506)\nat org.apache.spark.util.Utils$.tryWithSafeFinally(Utils.scala:1462)\nat org.apache.spark.executor.Executor$TaskRunner.run(Executor.scala:509)\nat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)\nat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)\nat java.lang.Thread.run(Thread.java:748)\n</code></pre>\n<p>I saw it during debugging：</p>\n<pre><code>java.lang.NumberFormatException: For input string: &quot;age&quot;\n</code></pre>\n<p>This is a code example I found on the web, and if it is an empty table, it will not be reported as an error; I tried to change the field property to varchar, but the result of the query became the field name.</p>\n<div class=\"s-table-container\">\n<table class=\"s-table\">\n<thead>\n<tr>\n<th>first</th>\n<th>last</th>\n<th>gender</th>\n<th>age</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>first</td>\n<td>last</td>\n<td>gender</td>\n<td>age</td>\n</tr>\n</tbody>\n</table>\n</div>"},{"tags":["java","user-interface","model-view-controller","javafx"],"comments":[{"owner":{"account_id":112735,"reputation":1572,"user_id":297216,"accept_rate":80,"display_name":"Cobusve"},"score":1,"creation_date":1441158625,"post_id":32342864,"comment_id":52561195,"body_markdown":"This PAQ was insightful http://stackoverflow.com/questions/23187932/mvc-with-javafx?rq=1","body":"This PAQ was insightful <a href=\"http://stackoverflow.com/questions/23187932/mvc-with-javafx?rq=1\">stackoverflow.com/questions/23187932/mvc-with-javafx?rq=1</a>"},{"owner":{"account_id":4688180,"reputation":2484,"user_id":3795043,"accept_rate":90,"display_name":"findusl"},"score":0,"creation_date":1505388860,"post_id":32342864,"comment_id":79398402,"body_markdown":"You might want to take a look at the MVVM pattern which is a variation of the MVC pattern that works very well with JavaFX imho.","body":"You might want to take a look at the MVVM pattern which is a variation of the MVC pattern that works very well with JavaFX imho."}],"answers":[{"tags":[],"owner":{"account_id":2518243,"reputation":203472,"user_id":2189127,"display_name":"James_D"},"down_vote_count":0,"up_vote_count":117,"is_accepted":true,"score":117,"last_activity_date":1644462254,"creation_date":1441157675,"answer_id":32343342,"question_id":32342864,"body_markdown":"There are many different variations of this pattern. In particular, &quot;MVC&quot; in the context of a web application is interpreted somewhat differently to &quot;MVC&quot; in the context of a thick client (e.g. desktop) application (because a web application has to sit atop the request-response cycle). This is just one approach to implementing MVC in the context of a thick client application, using JavaFX.\r\n\r\nYour `Person` class is not really the model, unless you have a very simple application: this is typically what we call a domain object, and the model will contain references to it, along with other data. In a narrow context, such as when you are *just* thinking about the `ListView`, you can think of the `Person` as your data model (it models the data in each element of the `ListView`), but in the wider context of the application, there is more data and state to consider.\r\n\r\nIf you are displaying a `ListView&lt;Person&gt;` the data you need, as a minimum, is an `ObservableList&lt;Person&gt;`. You might also want a property such as `currentPerson`, that might represent the selected item in the list.\r\n\r\nIf the *only* view you have is the `ListView`, then creating a separate class to store this would be overkill, but any real application will usually end up with multiple views. At this point, having the data shared in a model becomes a very useful way for different controllers to communicate with each other.\r\n\r\nSo, for example, you might have something like this:\r\n\r\n    public class DataModel {\r\n    \r\n        private final ObservableList&lt;Person&gt; personList = FXCollections.observableArrayList();\r\n        \r\n        private final ObjectProperty&lt;Person&gt; currentPerson = new SimpleObjectPropery&lt;&gt;(null);\r\n    \r\n        public ObjectProperty&lt;Person&gt; currentPersonProperty() {\r\n            return currentPerson ;\r\n        }\r\n    \r\n        public final Person getCurrentPerson() {\r\n            return currentPerson().get();\r\n        }\r\n    \r\n        public final void setCurrentPerson(Person person) {\r\n            currentPerson().set(person);\r\n        }\r\n    \r\n        public ObservableList&lt;Person&gt; getPersonList() {\r\n            return personList ;\r\n        }\r\n    }\r\n\r\nNow you might have a controller for the `ListView` display that looks like this:\r\n\r\n    public class ListController {\r\n    \r\n        @FXML\r\n        private ListView&lt;Person&gt; listView ;\r\n    \r\n        private DataModel model ;\r\n    \r\n        public void initModel(DataModel model) {\r\n            // ensure model is only set once:\r\n            if (this.model != null) {\r\n                throw new IllegalStateException(&quot;Model can only be initialized once&quot;);\r\n            }\r\n    \r\n            this.model = model ;\r\n            listView.setItems(model.getPersonList());\r\n    \r\n            listView.getSelectionModel().selectedItemProperty().addListener((obs, oldSelection, newSelection) -&gt; \r\n                model.setCurrentPerson(newSelection));\r\n    \r\n            model.currentPersonProperty().addListener((obs, oldPerson, newPerson) -&gt; {\r\n                if (newPerson == null) {\r\n                    listView.getSelectionModel().clearSelection();\r\n                } else {\r\n                    listView.getSelectionModel().select(newPerson);\r\n                }\r\n            });\r\n        }\r\n    }\r\n\r\nThis controller essentially just binds the data displayed in the list to the data in the model, and ensures the model&#39;s `currentPerson` is always the selected item in the list view.\r\n\r\nNow you might have another view, say an editor, with three text fields for the `firstName`, `lastName`, and `email` properties of a person. It&#39;s controller might look like:\r\n\r\n    public class EditorController {\r\n    \r\n        @FXML\r\n        private TextField firstNameField ;\r\n        @FXML\r\n        private TextField lastNameField ;\r\n        @FXML\r\n        private TextField emailField ;\r\n    \r\n        private DataModel model ;\r\n    \r\n        public void initModel(DataModel model) {\r\n            if (this.model != null) {\r\n                throw new IllegalStateException(&quot;Model can only be initialized once&quot;);\r\n            }\r\n            this.model = model ;\r\n            model.currentPersonProperty().addListener((obs, oldPerson, newPerson) -&gt; {\r\n                if (oldPerson != null) {\r\n                    firstNameField.textProperty().unbindBidirectional(oldPerson.firstNameProperty());\r\n                    lastNameField.textProperty().unbindBidirectional(oldPerson.lastNameProperty());\r\n                    emailField.textProperty().unbindBidirectional(oldPerson.emailProperty());\r\n                }\r\n                if (newPerson == null) {\r\n                    firstNameField.setText(&quot;&quot;);\r\n                    lastNameField.setText(&quot;&quot;);\r\n                    emailField.setText(&quot;&quot;);\r\n                } else {\r\n                    firstNameField.textProperty().bindBidirectional(newPerson.firstNameProperty());\r\n                    lastNameField.textProperty().bindBidirectional(newPerson.lastNameProperty());\r\n                    emailField.textProperty().bindBidirectional(newPerson.emailProperty());\r\n                }\r\n            });\r\n        }\r\n    }\r\n\r\nNow if you set things up so both these controllers are sharing the same model, the editor will edit the currently selected item in the list.\r\n\r\nLoading and saving data should be done via the model. Sometimes you will even factor this out into a separate class to which the model has a reference (allowing you to easily switch between a file-based data loader and a database data loader, or an implementation that accesses a web service, for example). In the simple case you might do\r\n\r\n    public class DataModel {\r\n    \r\n        // other code as before...\r\n    \r\n        public void loadData(File file) throws IOException {\r\n    \r\n            // load data from file and store in personList...\r\n    \r\n        }\r\n    \r\n        public void saveData(File file) throws IOException {\r\n     \r\n            // save contents of personList to file ...\r\n        }\r\n    }\r\n\r\nThen you might have a controller that provides access to this functionality:\r\n\r\n    public class MenuController {\r\n    \r\n        private DataModel model ;\r\n    \r\n        @FXML\r\n        private MenuBar menuBar ;\r\n    \r\n        public void initModel(DataModel model) {\r\n            if (this.model != null) {\r\n                throw new IllegalStateException(&quot;Model can only be initialized once&quot;);\r\n            }\r\n            this.model = model ;\r\n        }\r\n    \r\n        @FXML\r\n        public void load() {\r\n            FileChooser chooser = new FileChooser();\r\n            File file = chooser.showOpenDialog(menuBar.getScene().getWindow());\r\n            if (file != null) {\r\n                try {\r\n                    model.loadData(file);\r\n                } catch (IOException exc) {\r\n                    // handle exception...\r\n                }\r\n            }\r\n        }\r\n    \r\n        @FXML\r\n        public void save() {\r\n    \r\n            // similar to load...\r\n    \r\n        }\r\n    }\r\n\r\nNow you can easily assemble an application:\r\n\r\n    public class ContactApp extends Application {\r\n    \r\n        @Override\r\n        public void start(Stage primaryStage) throws Exception {\r\n    \r\n            BorderPane root = new BorderPane();\r\n            FXMLLoader listLoader = new FXMLLoader(getClass().getResource(&quot;list.fxml&quot;));\r\n            root.setCenter(listLoader.load());\r\n            ListController listController = listLoader.getController();\r\n    \r\n            FXMLLoader editorLoader = new FXMLLoader(getClass().getResource(&quot;editor.fxml&quot;));\r\n            root.setRight(editorLoader.load());\r\n            EditorController editorController = editorLoader.getController();\r\n    \r\n            FXMLLoader menuLoader = new FXMLLoader(getClass().getResource(&quot;menu.fxml&quot;));\r\n            root.setTop(menuLoader.load());\r\n            MenuController menuController = menuLoader.getController();\r\n    \r\n            DataModel model = new DataModel();\r\n            listController.initModel(model);\r\n            editorController.initModel(model);\r\n            menuController.initModel(model);\r\n    \r\n            Scene scene = new Scene(root, 800, 600);\r\n            primaryStage.setScene(scene);\r\n            primaryStage.show();\r\n        }\r\n    }\r\n\r\nAs I said, there are many variations of this pattern (and this is probably more a model-view-presenter, or &quot;passive view&quot; variation), but that&#39;s one approach (one I basically favor). It&#39;s a bit more natural to provide the model to the controllers via their constructor, but then it&#39;s a lot harder to define the controller class with a `fx:controller` attribute. This pattern also lends itself strongly to dependency injection frameworks.\r\n\r\n**Update:** full code for this example is [here](https://github.com/james-d/SimpleMVP).\r\n\r\nIf you are interested in a tutorial on MVC in JavaFX, see:\r\n\r\n * The Eden Coding tutorial: [How to apply MVC in JavaFX][1]\r\n\r\n\r\n  [1]: https://edencoding.com/mvc-in-javafx/","title":"Applying MVC With JavaFx","body":"<p>There are many different variations of this pattern. In particular, &quot;MVC&quot; in the context of a web application is interpreted somewhat differently to &quot;MVC&quot; in the context of a thick client (e.g. desktop) application (because a web application has to sit atop the request-response cycle). This is just one approach to implementing MVC in the context of a thick client application, using JavaFX.</p>\n<p>Your <code>Person</code> class is not really the model, unless you have a very simple application: this is typically what we call a domain object, and the model will contain references to it, along with other data. In a narrow context, such as when you are <em>just</em> thinking about the <code>ListView</code>, you can think of the <code>Person</code> as your data model (it models the data in each element of the <code>ListView</code>), but in the wider context of the application, there is more data and state to consider.</p>\n<p>If you are displaying a <code>ListView&lt;Person&gt;</code> the data you need, as a minimum, is an <code>ObservableList&lt;Person&gt;</code>. You might also want a property such as <code>currentPerson</code>, that might represent the selected item in the list.</p>\n<p>If the <em>only</em> view you have is the <code>ListView</code>, then creating a separate class to store this would be overkill, but any real application will usually end up with multiple views. At this point, having the data shared in a model becomes a very useful way for different controllers to communicate with each other.</p>\n<p>So, for example, you might have something like this:</p>\n<pre><code>public class DataModel {\n\n    private final ObservableList&lt;Person&gt; personList = FXCollections.observableArrayList();\n    \n    private final ObjectProperty&lt;Person&gt; currentPerson = new SimpleObjectPropery&lt;&gt;(null);\n\n    public ObjectProperty&lt;Person&gt; currentPersonProperty() {\n        return currentPerson ;\n    }\n\n    public final Person getCurrentPerson() {\n        return currentPerson().get();\n    }\n\n    public final void setCurrentPerson(Person person) {\n        currentPerson().set(person);\n    }\n\n    public ObservableList&lt;Person&gt; getPersonList() {\n        return personList ;\n    }\n}\n</code></pre>\n<p>Now you might have a controller for the <code>ListView</code> display that looks like this:</p>\n<pre><code>public class ListController {\n\n    @FXML\n    private ListView&lt;Person&gt; listView ;\n\n    private DataModel model ;\n\n    public void initModel(DataModel model) {\n        // ensure model is only set once:\n        if (this.model != null) {\n            throw new IllegalStateException(&quot;Model can only be initialized once&quot;);\n        }\n\n        this.model = model ;\n        listView.setItems(model.getPersonList());\n\n        listView.getSelectionModel().selectedItemProperty().addListener((obs, oldSelection, newSelection) -&gt; \n            model.setCurrentPerson(newSelection));\n\n        model.currentPersonProperty().addListener((obs, oldPerson, newPerson) -&gt; {\n            if (newPerson == null) {\n                listView.getSelectionModel().clearSelection();\n            } else {\n                listView.getSelectionModel().select(newPerson);\n            }\n        });\n    }\n}\n</code></pre>\n<p>This controller essentially just binds the data displayed in the list to the data in the model, and ensures the model's <code>currentPerson</code> is always the selected item in the list view.</p>\n<p>Now you might have another view, say an editor, with three text fields for the <code>firstName</code>, <code>lastName</code>, and <code>email</code> properties of a person. It's controller might look like:</p>\n<pre><code>public class EditorController {\n\n    @FXML\n    private TextField firstNameField ;\n    @FXML\n    private TextField lastNameField ;\n    @FXML\n    private TextField emailField ;\n\n    private DataModel model ;\n\n    public void initModel(DataModel model) {\n        if (this.model != null) {\n            throw new IllegalStateException(&quot;Model can only be initialized once&quot;);\n        }\n        this.model = model ;\n        model.currentPersonProperty().addListener((obs, oldPerson, newPerson) -&gt; {\n            if (oldPerson != null) {\n                firstNameField.textProperty().unbindBidirectional(oldPerson.firstNameProperty());\n                lastNameField.textProperty().unbindBidirectional(oldPerson.lastNameProperty());\n                emailField.textProperty().unbindBidirectional(oldPerson.emailProperty());\n            }\n            if (newPerson == null) {\n                firstNameField.setText(&quot;&quot;);\n                lastNameField.setText(&quot;&quot;);\n                emailField.setText(&quot;&quot;);\n            } else {\n                firstNameField.textProperty().bindBidirectional(newPerson.firstNameProperty());\n                lastNameField.textProperty().bindBidirectional(newPerson.lastNameProperty());\n                emailField.textProperty().bindBidirectional(newPerson.emailProperty());\n            }\n        });\n    }\n}\n</code></pre>\n<p>Now if you set things up so both these controllers are sharing the same model, the editor will edit the currently selected item in the list.</p>\n<p>Loading and saving data should be done via the model. Sometimes you will even factor this out into a separate class to which the model has a reference (allowing you to easily switch between a file-based data loader and a database data loader, or an implementation that accesses a web service, for example). In the simple case you might do</p>\n<pre><code>public class DataModel {\n\n    // other code as before...\n\n    public void loadData(File file) throws IOException {\n\n        // load data from file and store in personList...\n\n    }\n\n    public void saveData(File file) throws IOException {\n \n        // save contents of personList to file ...\n    }\n}\n</code></pre>\n<p>Then you might have a controller that provides access to this functionality:</p>\n<pre><code>public class MenuController {\n\n    private DataModel model ;\n\n    @FXML\n    private MenuBar menuBar ;\n\n    public void initModel(DataModel model) {\n        if (this.model != null) {\n            throw new IllegalStateException(&quot;Model can only be initialized once&quot;);\n        }\n        this.model = model ;\n    }\n\n    @FXML\n    public void load() {\n        FileChooser chooser = new FileChooser();\n        File file = chooser.showOpenDialog(menuBar.getScene().getWindow());\n        if (file != null) {\n            try {\n                model.loadData(file);\n            } catch (IOException exc) {\n                // handle exception...\n            }\n        }\n    }\n\n    @FXML\n    public void save() {\n\n        // similar to load...\n\n    }\n}\n</code></pre>\n<p>Now you can easily assemble an application:</p>\n<pre><code>public class ContactApp extends Application {\n\n    @Override\n    public void start(Stage primaryStage) throws Exception {\n\n        BorderPane root = new BorderPane();\n        FXMLLoader listLoader = new FXMLLoader(getClass().getResource(&quot;list.fxml&quot;));\n        root.setCenter(listLoader.load());\n        ListController listController = listLoader.getController();\n\n        FXMLLoader editorLoader = new FXMLLoader(getClass().getResource(&quot;editor.fxml&quot;));\n        root.setRight(editorLoader.load());\n        EditorController editorController = editorLoader.getController();\n\n        FXMLLoader menuLoader = new FXMLLoader(getClass().getResource(&quot;menu.fxml&quot;));\n        root.setTop(menuLoader.load());\n        MenuController menuController = menuLoader.getController();\n\n        DataModel model = new DataModel();\n        listController.initModel(model);\n        editorController.initModel(model);\n        menuController.initModel(model);\n\n        Scene scene = new Scene(root, 800, 600);\n        primaryStage.setScene(scene);\n        primaryStage.show();\n    }\n}\n</code></pre>\n<p>As I said, there are many variations of this pattern (and this is probably more a model-view-presenter, or &quot;passive view&quot; variation), but that's one approach (one I basically favor). It's a bit more natural to provide the model to the controllers via their constructor, but then it's a lot harder to define the controller class with a <code>fx:controller</code> attribute. This pattern also lends itself strongly to dependency injection frameworks.</p>\n<p><strong>Update:</strong> full code for this example is <a href=\"https://github.com/james-d/SimpleMVP\" rel=\"noreferrer\">here</a>.</p>\n<p>If you are interested in a tutorial on MVC in JavaFX, see:</p>\n<ul>\n<li>The Eden Coding tutorial: <a href=\"https://edencoding.com/mvc-in-javafx/\" rel=\"noreferrer\">How to apply MVC in JavaFX</a></li>\n</ul>\n"},{"tags":[],"owner":{"account_id":2092189,"reputation":452,"user_id":1861742,"display_name":"alvaro"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1623744477,"creation_date":1496660829,"answer_id":44367581,"question_id":32342864,"body_markdown":"&gt; What i want to know is that if loading the data from a file is the responsibility of the Controller Or the model?\r\n\r\nFor me the model is only responsible of bringing the required data structures that represent the business logic of the application.\r\n\r\nThe action of loading that data from any source should be done by the Controller Layer. You could also use the [repository pattern](https://stackoverflow.com/questions/31305199/repository-pattern-how-to-understand-it-and-how-does-it-work-with-complex-en), which can help you in abstracting from the type of source when you are acessing the data from the view. With this implemented you should not care if the Repository implementation is loading the data from file, SQL, NoSQL, Web service ...\r\n\r\n&gt; And the ObservableList of the names will be stored in the controller or the model?\r\n\r\nFor me the `ObservableList` is part of the View. It is the kind of data structure you can bind to JavaFX controls. So for example a `ObservableList&lt;String&gt;` could be populated with Strings from the model but the `ObservableList` reference should be an attribute of some View&#180;s class.\r\nIn JavaFX it&#39;s very pleasant to bind JavaFX controls with Observable Properties backed by domain objects from the model.\r\n\r\nYou could also have a look to [viewmodel concept](https://stackoverflow.com/questions/5421874/basic-concepts-of-mvvm-what-should-a-viewmodel-do). For me a JavaFX bean backed by a POJO could be considered as a view-model, you could see it as a model object ready to be presented in the view. So for example if your view needs to show some total value calculated from 2 model attributes, this total value could be an attribute of the view-model. This attribute would not be persisted and it would be calculated any time you show the view.","title":"Applying MVC With JavaFx","body":"<blockquote>\n<p>What i want to know is that if loading the data from a file is the responsibility of the Controller Or the model?</p>\n</blockquote>\n<p>For me the model is only responsible of bringing the required data structures that represent the business logic of the application.</p>\n<p>The action of loading that data from any source should be done by the Controller Layer. You could also use the <a href=\"https://stackoverflow.com/questions/31305199/repository-pattern-how-to-understand-it-and-how-does-it-work-with-complex-en\">repository pattern</a>, which can help you in abstracting from the type of source when you are acessing the data from the view. With this implemented you should not care if the Repository implementation is loading the data from file, SQL, NoSQL, Web service ...</p>\n<blockquote>\n<p>And the ObservableList of the names will be stored in the controller or the model?</p>\n</blockquote>\n<p>For me the <code>ObservableList</code> is part of the View. It is the kind of data structure you can bind to JavaFX controls. So for example a <code>ObservableList&lt;String&gt;</code> could be populated with Strings from the model but the <code>ObservableList</code> reference should be an attribute of some View´s class.\nIn JavaFX it's very pleasant to bind JavaFX controls with Observable Properties backed by domain objects from the model.</p>\n<p>You could also have a look to <a href=\"https://stackoverflow.com/questions/5421874/basic-concepts-of-mvvm-what-should-a-viewmodel-do\">viewmodel concept</a>. For me a JavaFX bean backed by a POJO could be considered as a view-model, you could see it as a model object ready to be presented in the view. So for example if your view needs to show some total value calculated from 2 model attributes, this total value could be an attribute of the view-model. This attribute would not be persisted and it would be calculated any time you show the view.</p>\n"}],"owner":{"account_id":3876039,"reputation":3842,"user_id":3210059,"accept_rate":70,"display_name":"KarimS"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":82506,"favorite_count":0,"down_vote_count":0,"up_vote_count":53,"accepted_answer_id":32343342,"answer_count":2,"score":53,"last_activity_date":1644462254,"creation_date":1441153519,"question_id":32342864,"body_markdown":"I&#39;m new to the GUI world/OO design pattern and I want to use MVC pattern for my GUI application, I have read a little tutorial about MVC pattern, the Model will contain the data, the View will contain the visual element and the Controller will tie between the View and the Model.\r\n\r\nI have a View that contains a ListView node, and the ListView will be filled with names, from a Person Class (Model). But I&#39;m a little confused about one thing. \r\n\r\nWhat I want to know is if loading the data from a file is the responsibility of the Controller or the Model?? And the ObservableList&lt;String&gt; of the names: should it be stored in the Controller or the Model?","title":"Applying MVC With JavaFx","body":"<p>I'm new to the GUI world/OO design pattern and I want to use MVC pattern for my GUI application, I have read a little tutorial about MVC pattern, the Model will contain the data, the View will contain the visual element and the Controller will tie between the View and the Model.</p>\n\n<p>I have a View that contains a ListView node, and the ListView will be filled with names, from a Person Class (Model). But I'm a little confused about one thing. </p>\n\n<p>What I want to know is if loading the data from a file is the responsibility of the Controller or the Model?? And the ObservableList of the names: should it be stored in the Controller or the Model?</p>\n"},{"tags":["java","parsing","antlr","antlr4"],"answers":[{"tags":[],"owner":{"account_id":24059439,"reputation":282,"user_id":18036868,"display_name":"HUTUTU"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1644462141,"creation_date":1644462141,"answer_id":71059287,"question_id":71059200,"body_markdown":"The alias is valid only in the current session. You may need to write the first command to ~/.bashrc (depending on your system).","title":"antlr alias not working in other directories","body":"<p>The alias is valid only in the current session. You may need to write the first command to ~/.bashrc (depending on your system).</p>\n"}],"owner":{"account_id":19856479,"reputation":37,"user_id":14545805,"display_name":"user14545805"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":67,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":71059287,"answer_count":1,"score":0,"last_activity_date":1644462141,"creation_date":1644461290,"question_id":71059200,"body_markdown":"I am trying to get started with antlr4.  \r\nI followed the installation tutorial from their website step by step including writing the following command:\r\n```\r\nalias antlr4=&#39;java -Xmx500M -cp &quot;/usr/local/lib/antlr-4.9.2-complete.jar:$CLASSPATH&quot; org.antlr.v4.Tool&#39;\r\n```\r\nI created two Hello.g4 files, one in usr/local/lib and one in my Desktop. When I run \r\n```\r\nantlr4 Hello.g4 \r\n```\r\nin lib, it works just fine. However, when I run it in the Desktop, I get\r\n``` \r\nantlr4: command not found\r\n```","title":"antlr alias not working in other directories","body":"<p>I am trying to get started with antlr4.<br />\nI followed the installation tutorial from their website step by step including writing the following command:</p>\n<pre><code>alias antlr4='java -Xmx500M -cp &quot;/usr/local/lib/antlr-4.9.2-complete.jar:$CLASSPATH&quot; org.antlr.v4.Tool'\n</code></pre>\n<p>I created two Hello.g4 files, one in usr/local/lib and one in my Desktop. When I run</p>\n<pre><code>antlr4 Hello.g4 \n</code></pre>\n<p>in lib, it works just fine. However, when I run it in the Desktop, I get</p>\n<pre><code>antlr4: command not found\n</code></pre>\n"},{"tags":["java","sql","database","oracle"],"comments":[{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":1,"creation_date":1644460615,"post_id":71059137,"comment_id":125615329,"body_markdown":"Normalise your schema.","body":"Normalise your schema."},{"owner":{"account_id":11782811,"reputation":1,"user_id":13993047,"display_name":"the Jay"},"score":0,"creation_date":1644464328,"post_id":71059137,"comment_id":125615981,"body_markdown":"@tgdavies solved. many thanks!","body":"@tgdavies solved. many thanks!"}],"owner":{"account_id":11782811,"reputation":1,"user_id":13993047,"display_name":"the Jay"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":36,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1644460539,"creation_date":1644460539,"question_id":71059137,"body_markdown":"The table below is a Member Table.\r\n\r\n&lt;pre&gt;\r\n+----------+-----------------+\r\n| memberId |   watchlists    |\r\n+----------+-----------------+\r\n| userId1  | 1,30,2,40,9,19, |\r\n| userId2  | 9,99,999,       |\r\n+----------+-----------------+\r\n&lt;/pre&gt;\r\n\r\nand this is the Product Table.\r\n&lt;pre&gt;\r\n+-----------+-------------+\r\n| productId | productName |\r\n+-----------+-------------+\r\n| 1         | tv          |\r\n| 2         | laptop      |\r\n| 9         | mouse       |\r\n| 19        | phone       |\r\n+-----------+-------------+\r\n... and more products\r\n&lt;/pre&gt;\r\n\r\nThe watchlists column of the Member Table stores the IDs of certain products separated by commas.\r\n\r\nIf a specific object is deleted from the Product Table, it must be deleted from the watchlists column of the Member Table because the product no longer exists on the Product Table.\r\n\r\n\r\nThe way I tried:\r\n\r\nI was simply trying to use the update statement in the Java DAO class as follows.\r\nBut there is a problem.\r\n\r\n&lt;pre&gt;\r\n&lt;code&gt;\r\n\r\n    update Member \r\n    set watchlists = replace(Member.watchlists, &#39;9,&#39;, &#39;&#39;);\r\n\r\n&lt;/code&gt;\r\n&lt;/pre&gt;\r\n\r\nIf I try to delete an product with an ID of &#39;9&#39; , what I wanted was only &#39;9,&#39; should be deleted (replaced by a space &#39;&#39;).\r\nHowever, the IDs of other products that contain &#39;9&#39; are also affected.\r\n\r\n\r\nThe result I want: \r\n&lt;pre&gt;\r\n+----------+---------------+\r\n| memberId |  watchlists   |\r\n+----------+---------------+\r\n| userId1  | 1,30,2,40,19, |\r\n| userId2  | 99,999,       |\r\n+----------+---------------+\r\n&lt;/pre&gt;\r\nOnly one item with product ID &#39;9&#39; is deleted.\r\n&lt;br /&gt;&lt;br /&gt;\r\n\r\n\r\n\r\nResult when executing the update statement written above: (result that is different from what I expected.)\r\n&lt;pre&gt;\r\n+----------+-------------+\r\n| memberId | watchlists  |\r\n+----------+-------------+\r\n| userId1  | 1,30,2,40,1 |\r\n| userId2  | 999         |\r\n+----------+-------------+\r\n&lt;/pre&gt;\r\n\r\nI&#39;m not sure how to solve it. \r\nIt doesn&#39;t matter if you use a trigger, or solve it in a DAO class in Java.\r\n","title":"Oracle 11g, delete a specific product ID from the Watchlists column of the Member Table","body":"<p>The table below is a Member Table.</p>\n<pre>\n+----------+-----------------+\n| memberId |   watchlists    |\n+----------+-----------------+\n| userId1  | 1,30,2,40,9,19, |\n| userId2  | 9,99,999,       |\n+----------+-----------------+\n</pre>\n<p>and this is the Product Table.</p>\n<pre>\n+-----------+-------------+\n| productId | productName |\n+-----------+-------------+\n| 1         | tv          |\n| 2         | laptop      |\n| 9         | mouse       |\n| 19        | phone       |\n+-----------+-------------+\n... and more products\n</pre>\n<p>The watchlists column of the Member Table stores the IDs of certain products separated by commas.</p>\n<p>If a specific object is deleted from the Product Table, it must be deleted from the watchlists column of the Member Table because the product no longer exists on the Product Table.</p>\n<p>The way I tried:</p>\n<p>I was simply trying to use the update statement in the Java DAO class as follows.\nBut there is a problem.</p>\n<pre>\n<code>\n\n    update Member \n    set watchlists = replace(Member.watchlists, '9,', '');\n\n</code>\n</pre>\n<p>If I try to delete an product with an ID of '9' , what I wanted was only '9,' should be deleted (replaced by a space '').\nHowever, the IDs of other products that contain '9' are also affected.</p>\n<p>The result I want:</p>\n<pre>\n+----------+---------------+\n| memberId |  watchlists   |\n+----------+---------------+\n| userId1  | 1,30,2,40,19, |\n| userId2  | 99,999,       |\n+----------+---------------+\n</pre>\n<p>Only one item with product ID '9' is deleted.\n<br /><br /></p>\n<p>Result when executing the update statement written above: (result that is different from what I expected.)</p>\n<pre>\n+----------+-------------+\n| memberId | watchlists  |\n+----------+-------------+\n| userId1  | 1,30,2,40,1 |\n| userId2  | 999         |\n+----------+-------------+\n</pre>\n<p>I'm not sure how to solve it.\nIt doesn't matter if you use a trigger, or solve it in a DAO class in Java.</p>\n"},{"tags":["java","timer"],"comments":[{"owner":{"account_id":1021726,"reputation":4542,"user_id":1031888,"accept_rate":90,"display_name":"Rafi Kamal"},"score":0,"creation_date":1379672280,"post_id":18914260,"comment_id":27922828,"body_markdown":"Why not `java.util.Timer`?","body":"Why not <code>java.util.Timer</code>?"},{"owner":{"account_id":1836786,"reputation":20603,"user_id":1667004,"display_name":"ppeterka"},"score":0,"creation_date":1379672292,"post_id":18914260,"comment_id":27922840,"body_markdown":"Where do you call the said update() function?","body":"Where do you call the said update() function?"},{"owner":{"account_id":3150686,"reputation":13778,"user_id":2664200,"accept_rate":71,"display_name":"SpringLearner"},"score":1,"creation_date":1379672353,"post_id":18914260,"comment_id":27922869,"body_markdown":"see this link http://www.javaprogrammingforums.com/java-se-api-tutorials/883-how-use-timer-java.html","body":"see this link <a href=\"http://www.javaprogrammingforums.com/java-se-api-tutorials/883-how-use-timer-java.html\" rel=\"nofollow noreferrer\">javaprogrammingforums.com/java-se-api-tutorials/&hellip;</a>"},{"owner":{"account_id":307760,"reputation":13890,"user_id":619252,"display_name":"Gabriel Negut"},"score":0,"creation_date":1379672392,"post_id":18914260,"comment_id":27922894,"body_markdown":"Call `setChanged()` before `notifyObservers()`.","body":"Call <code>setChanged()</code> before <code>notifyObservers()</code>."},{"owner":{"account_id":1852520,"reputation":2797,"user_id":1678760,"accept_rate":85,"display_name":"fatma.ekici"},"score":0,"creation_date":1379673100,"post_id":18914260,"comment_id":27923300,"body_markdown":"@ppeterka66 I added the update function above. Main class implements the Observer interface.","body":"@ppeterka66 I added the update function above. Main class implements the Observer interface."}],"answers":[{"tags":[],"owner":{"account_id":1692169,"reputation":5294,"user_id":1554314,"accept_rate":100,"display_name":"Taky"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1379674514,"creation_date":1379674514,"answer_id":18915026,"question_id":18914260,"body_markdown":"This example print `update` end finish execution.\r\n\r\n    public static void main(String[] args){\r\n        //scheduler executor is a lot more sophisticated solution\r\n        final ScheduledExecutorService sheduler = Executors.newScheduledThreadPool(1);\r\n        class MyO extends Observable {\r\n            public void trackChanged(){\r\n                setChanged(); //this method is protected in super class\r\n            }\r\n        };\r\n        //must be final because it used in nested class\r\n        final MyO o = new MyO();\r\n        o.addObserver(new Observer() {\r\n            @Override\r\n            public void update(Observable o, Object arg) {\r\n                //your processing here\r\n                System.out.println(&quot;update&quot;);\r\n                sheduler.shutdown();\r\n            }\r\n        });\r\n        sheduler.schedule(new Runnable() {\r\n            @Override\r\n            public void run() {\r\n                o.trackChanged();\r\n                o.notifyObservers();\r\n            }\r\n        }, 3, TimeUnit.SECONDS); //set any timout\r\n    }","title":"Java one shot timer to terminate main function","body":"<p>This example print <code>update</code> end finish execution.</p>\n\n<pre><code>public static void main(String[] args){\n    //scheduler executor is a lot more sophisticated solution\n    final ScheduledExecutorService sheduler = Executors.newScheduledThreadPool(1);\n    class MyO extends Observable {\n        public void trackChanged(){\n            setChanged(); //this method is protected in super class\n        }\n    };\n    //must be final because it used in nested class\n    final MyO o = new MyO();\n    o.addObserver(new Observer() {\n        @Override\n        public void update(Observable o, Object arg) {\n            //your processing here\n            System.out.println(\"update\");\n            sheduler.shutdown();\n        }\n    });\n    sheduler.schedule(new Runnable() {\n        @Override\n        public void run() {\n            o.trackChanged();\n            o.notifyObservers();\n        }\n    }, 3, TimeUnit.SECONDS); //set any timout\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":12328133,"reputation":4037,"user_id":8994998,"display_name":"Brett Sutton"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1644460408,"creation_date":1644460408,"answer_id":71059126,"question_id":18914260,"body_markdown":"Here is a reusable OneShotTimer.\r\n\r\n```java\r\n\tnew OneShotTimer(3, () -&gt; setChange());\r\n```\r\n\r\n\r\n```java\r\nimport java.util.concurrent.Executors;\r\nimport java.util.concurrent.ScheduledExecutorService;\r\nimport java.util.concurrent.TimeUnit;\r\n\r\npublic class OneShotTimer\r\n{\r\n\r\n\tfinal ScheduledExecutorService sheduler = Executors.newScheduledThreadPool(1);\r\n\r\n\t/// Call [callback] after [duration] seconds.\r\n\tpublic OneShotTimer(int duration, OneShotCallback callback)\r\n\t{\r\n\t\tsheduler.schedule(() -&gt; _callback(callback), duration, TimeUnit.SECONDS);\r\n\t}\r\n\r\n\tvoid _callback(OneShotCallback callback)\r\n\t{\r\n\t\tsheduler.shutdown();\r\n\t\tcallback.callback();\r\n\t}\r\n\r\n\tpublic interface OneShotCallback\r\n\t{\r\n\t\tvoid callback();\r\n\t}\r\n\r\n}\r\n\r\n```","title":"Java one shot timer to terminate main function","body":"<p>Here is a reusable OneShotTimer.</p>\n<pre class=\"lang-java prettyprint-override\"><code>    new OneShotTimer(3, () -&gt; setChange());\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>import java.util.concurrent.Executors;\nimport java.util.concurrent.ScheduledExecutorService;\nimport java.util.concurrent.TimeUnit;\n\npublic class OneShotTimer\n{\n\n    final ScheduledExecutorService sheduler = Executors.newScheduledThreadPool(1);\n\n    /// Call [callback] after [duration] seconds.\n    public OneShotTimer(int duration, OneShotCallback callback)\n    {\n        sheduler.schedule(() -&gt; _callback(callback), duration, TimeUnit.SECONDS);\n    }\n\n    void _callback(OneShotCallback callback)\n    {\n        sheduler.shutdown();\n        callback.callback();\n    }\n\n    public interface OneShotCallback\n    {\n        void callback();\n    }\n\n}\n\n</code></pre>\n"}],"owner":{"account_id":1852520,"reputation":2797,"user_id":1678760,"accept_rate":85,"display_name":"fatma.ekici"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2568,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":18915026,"answer_count":2,"score":1,"last_activity_date":1644460408,"creation_date":1379672100,"question_id":18914260,"body_markdown":"I implemented a simple timer with Observer pattern. I wanted to terminate the main function when 5 minutes passes while it is running. Basically what I need is a simple one shot timeout functionality. How can I achieve this? My code is not working. Below is the timer class\r\n\r\n\r\n    public class OneShotTimer  extends Observable implements Runnable{\r\n\r\n    @Override\r\n    public void run() {\r\n        // TODO Auto-generated method stub\r\n        try {\r\n            Thread.sleep(30);\r\n        } catch (Exception e) {\r\n            // TODO: handle exception\r\n            System.out.println(&quot;Exception in timer&quot;);\r\n        }\r\n        notifyObservers();\r\n    }\r\n\r\nIn main class&#39;s constructor I initialize that timer.\r\n\r\n    public GreenOverlayMain(){\r\n        timer = new OneShotTimer();\r\n        timer.addObserver(this);\r\n        Thread t = new Thread(timer, &quot;mythread&quot;);\r\n        t.start();\r\n    }\r\n\r\nHowever the update() function of main class is never executed because timeout never happens. MainClass implements Observer interface. Below is the update function.\r\n\r\n    @Override\r\n    public void update(Observable o, Object arg) {\r\n        // TODO Auto-generated method stub\r\n        System.gc();\r\n        System.exit(0);\r\n    }\r\n\r\n ","title":"Java one shot timer to terminate main function","body":"<p>I implemented a simple timer with Observer pattern. I wanted to terminate the main function when 5 minutes passes while it is running. Basically what I need is a simple one shot timeout functionality. How can I achieve this? My code is not working. Below is the timer class</p>\n\n<pre><code>public class OneShotTimer  extends Observable implements Runnable{\n\n@Override\npublic void run() {\n    // TODO Auto-generated method stub\n    try {\n        Thread.sleep(30);\n    } catch (Exception e) {\n        // TODO: handle exception\n        System.out.println(\"Exception in timer\");\n    }\n    notifyObservers();\n}\n</code></pre>\n\n<p>In main class's constructor I initialize that timer.</p>\n\n<pre><code>public GreenOverlayMain(){\n    timer = new OneShotTimer();\n    timer.addObserver(this);\n    Thread t = new Thread(timer, \"mythread\");\n    t.start();\n}\n</code></pre>\n\n<p>However the update() function of main class is never executed because timeout never happens. MainClass implements Observer interface. Below is the update function.</p>\n\n<pre><code>@Override\npublic void update(Observable o, Object arg) {\n    // TODO Auto-generated method stub\n    System.gc();\n    System.exit(0);\n}\n</code></pre>\n"},{"tags":["java","grid","row","multiple-columns","qr-code"],"comments":[{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":0,"creation_date":1644460179,"post_id":71059059,"comment_id":125615254,"body_markdown":"Hard to tell from the snippet of code, but presumably `grid` is `null`. Where do you initialise it when `pattern` isn&#39;t `null`?","body":"Hard to tell from the snippet of code, but presumably <code>grid</code> is <code>null</code>. Where do you initialise it when <code>pattern</code> isn&#39;t <code>null</code>?"},{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":0,"creation_date":1644460500,"post_id":71059059,"comment_id":125615313,"body_markdown":"If you learn to indent your code correctly (or learn how to ask your IDE to do it) you&#39;ll find the code you write becomes easier to understand.","body":"If you learn to indent your code correctly (or learn how to ask your IDE to do it) you&#39;ll find the code you write becomes easier to understand."}],"owner":{"account_id":24210226,"reputation":1,"user_id":18166851,"display_name":"kmouse"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":15,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1644460136,"creation_date":1644459743,"question_id":71059059,"body_markdown":"Whenever I try to compile this code that sets the grid for a QR code I get an error: Cannot load from object array because &quot;QRCode.grid&quot; is null at QRCode.setGrid(QRCode.java:76). I think there is an error in the last line.\r\n\r\n```java\r\npublic void setGrid(int dim, int [] pattern) {\r\n\t\tif(pattern==null)\r\n\t\t\t \r\n\t\t grid=new int[dim][dim];\r\n\t\t \r\n\t\t for(int row=0;row&lt;dim;row++) {\r\n\t\t\t for(int col = 0; col &lt; dim; col++) {\r\n\t\t\t\t \r\n\t\t\t\t grid[i][j]=pattern[row*dim+col];\r\n\t\t\t\r\n\t\t        } \r\n\t\t    }\r\n\t\r\n\t}\r\n```\r\n\r\n\r\n","title":"How do I create a grid filled row by row from the pattern provided by the one-dimensional pattern passed in","body":"<p>Whenever I try to compile this code that sets the grid for a QR code I get an error: Cannot load from object array because &quot;QRCode.grid&quot; is null at QRCode.setGrid(QRCode.java:76). I think there is an error in the last line.</p>\n<pre class=\"lang-java prettyprint-override\"><code>public void setGrid(int dim, int [] pattern) {\n        if(pattern==null)\n             \n         grid=new int[dim][dim];\n         \n         for(int row=0;row&lt;dim;row++) {\n             for(int col = 0; col &lt; dim; col++) {\n                 \n                 grid[i][j]=pattern[row*dim+col];\n            \n                } \n            }\n    \n    }\n</code></pre>\n"},{"tags":["java","user-interface","javafx"],"comments":[{"owner":{"account_id":2518243,"reputation":203472,"user_id":2189127,"display_name":"James_D"},"score":0,"creation_date":1644460629,"post_id":71059050,"comment_id":125615331,"body_markdown":"Move `close.setOnAction(…)` to after the point in the code where you have created (but not shown) the window and call `newWindow.close()` from the event handler.","body":"Move <code>close.setOnAction(…)</code> to after the point in the code where you have created (but not shown) the window and call <code>newWindow.close()</code> from the event handler."},{"owner":{"account_id":18790328,"reputation":1,"user_id":13702930,"display_name":"Blake"},"score":0,"creation_date":1644460972,"post_id":71059050,"comment_id":125615395,"body_markdown":"That worked, thank you","body":"That worked, thank you"}],"owner":{"account_id":18790328,"reputation":1,"user_id":13702930,"display_name":"Blake"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":141,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1644459659,"creation_date":1644459659,"question_id":71059050,"body_markdown":"I am learning JavaFX, and creating a scene that will be created and displayed to get user input. I created a VBox that holds different textfields and a button that I want to use to close the scene that was created and then store that information to use elsewhere. I can&#39;t seem to figure out how to add functionality to the button that will close the scene.\r\n\r\nI&#39;ve tried adding a EventHandler that will do it, but I can&#39;t seem to get the program to work.\r\n\r\n**part of Controller**\r\n```\r\npublic void drawNewClass(ActionEvent actionEvent) throws IOException {\r\n        ClassInstance classInstance = new ClassInstance();\r\n        TextField classDescription = new TextField(&quot;Enter      Description&quot;);\r\n        TextField className = new TextField(&quot;Enter Class Name&quot;);\r\n        Button close = new Button(&quot;Submit&quot;);\r\n        close.setOnAction(new EventHandler&lt;ActionEvent&gt;() {\r\n            @Override\r\n            public void handle(ActionEvent event) {\r\n                \r\n            }\r\n        });\r\n        TextField attributes = new TextField(&quot;Enter Variables (privacy type name, format)&quot;);\r\n        VBox secondaryLayout = new VBox();\r\n        secondaryLayout.getChildren().addAll(classDescription, className, attributes, close);\r\n        Scene secondScene = new Scene(secondaryLayout, 230, 100);\r\n\r\n        // New window (Stage)\r\n        Stage newWindow = new Stage();\r\n        newWindow.setTitle(&quot;Add Class&quot;);\r\n        newWindow.setScene(secondScene);\r\n\r\n        // Set position of second window, related to primary window.\r\n        newWindow.setX(canvas.getLayoutX() + 200);\r\n        newWindow.setY(canvas.getLayoutY() + 100);\r\n\r\n        newWindow.showAndWait();\r\n```\r\n\r\n**.FXML**\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n\r\n&lt;?import javafx.scene.layout.VBox?&gt;\r\n&lt;?import javafx.scene.layout.BorderPane?&gt;\r\n&lt;?import javafx.scene.layout.HBox?&gt;\r\n&lt;?import javafx.scene.control.Button?&gt;\r\n&lt;?import javafx.scene.control.ScrollPane?&gt;\r\n&lt;?import javafx.scene.canvas.Canvas?&gt;\r\n&lt;?import javafx.scene.layout.StackPane?&gt;\r\n&lt;BorderPane xmlns=&quot;http://javafx.com/javafx/17&quot;\r\n            xmlns:fx=&quot;http://javafx.com/fxml/1&quot;\r\n            fx:controller=&quot;com.diagrambuilder.csc260w2022project2.diagramBuilderController&quot;\r\n            prefHeight=&quot;500.0&quot; prefWidth=&quot;500.0&quot;\r\n            fx:id=&quot;root&quot;&gt;\r\n    &lt;top&gt;\r\n        &lt;HBox&gt;\r\n            &lt;Button text=&quot;Close&quot; fx:id=&quot;closeButton&quot; onAction=&quot;#closeApplication&quot;/&gt;\r\n            &lt;Button text=&quot;New&quot; onAction=&quot;#newCanvas&quot;/&gt;\r\n            &lt;Button text=&quot;Save&quot; onAction=&quot;#saveCanvas&quot;/&gt;\r\n            &lt;Button text=&quot;Save As&quot; onAction=&quot;#saveAsCanvas&quot;/&gt;\r\n            &lt;Button text=&quot;Load&quot; onAction=&quot;#loadCanvas&quot;/&gt;\r\n            &lt;Button text=&quot;Export as Image&quot; onAction=&quot;#exportCanvas&quot;/&gt;\r\n        &lt;/HBox&gt;\r\n    &lt;/top&gt;\r\n    &lt;left&gt;\r\n        &lt;VBox&gt;\r\n            &lt;Button text=&quot;Draw New Class&quot; fx:id=&quot;newClass&quot; onAction=&quot;#drawNewClass&quot;/&gt;\r\n            &lt;Button text=&quot;Add New Relationship&quot; onAction=&quot;#drawNewRelationship&quot;/&gt;\r\n        &lt;/VBox&gt;\r\n    &lt;/left&gt;\r\n    &lt;center&gt;\r\n        &lt;StackPane fx:id=&quot;stackPane&quot; style=&quot;-fx-border-color: #000; -fx-border-width: 1px&quot;\r\n                    maxWidth=&quot;500&quot; maxHeight=&quot;500&quot;&gt;\r\n            &lt;Canvas fx:id=&quot;canvas&quot; width=&quot;${stackPane.width}&quot; height=&quot;${stackPane.height}&quot;/&gt;\r\n        &lt;/StackPane&gt;\r\n    &lt;/center&gt;\r\n&lt;/BorderPane&gt;\r\n\r\n```\r\n\r\n[Image of GUI][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/BVZIm.png","title":"Creating a JavaFX Scene from Button click; Close the created Scene","body":"<p>I am learning JavaFX, and creating a scene that will be created and displayed to get user input. I created a VBox that holds different textfields and a button that I want to use to close the scene that was created and then store that information to use elsewhere. I can't seem to figure out how to add functionality to the button that will close the scene.</p>\n<p>I've tried adding a EventHandler that will do it, but I can't seem to get the program to work.</p>\n<p><strong>part of Controller</strong></p>\n<pre><code>public void drawNewClass(ActionEvent actionEvent) throws IOException {\n        ClassInstance classInstance = new ClassInstance();\n        TextField classDescription = new TextField(&quot;Enter      Description&quot;);\n        TextField className = new TextField(&quot;Enter Class Name&quot;);\n        Button close = new Button(&quot;Submit&quot;);\n        close.setOnAction(new EventHandler&lt;ActionEvent&gt;() {\n            @Override\n            public void handle(ActionEvent event) {\n                \n            }\n        });\n        TextField attributes = new TextField(&quot;Enter Variables (privacy type name, format)&quot;);\n        VBox secondaryLayout = new VBox();\n        secondaryLayout.getChildren().addAll(classDescription, className, attributes, close);\n        Scene secondScene = new Scene(secondaryLayout, 230, 100);\n\n        // New window (Stage)\n        Stage newWindow = new Stage();\n        newWindow.setTitle(&quot;Add Class&quot;);\n        newWindow.setScene(secondScene);\n\n        // Set position of second window, related to primary window.\n        newWindow.setX(canvas.getLayoutX() + 200);\n        newWindow.setY(canvas.getLayoutY() + 100);\n\n        newWindow.showAndWait();\n</code></pre>\n<p><strong>.FXML</strong></p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n\n&lt;?import javafx.scene.layout.VBox?&gt;\n&lt;?import javafx.scene.layout.BorderPane?&gt;\n&lt;?import javafx.scene.layout.HBox?&gt;\n&lt;?import javafx.scene.control.Button?&gt;\n&lt;?import javafx.scene.control.ScrollPane?&gt;\n&lt;?import javafx.scene.canvas.Canvas?&gt;\n&lt;?import javafx.scene.layout.StackPane?&gt;\n&lt;BorderPane xmlns=&quot;http://javafx.com/javafx/17&quot;\n            xmlns:fx=&quot;http://javafx.com/fxml/1&quot;\n            fx:controller=&quot;com.diagrambuilder.csc260w2022project2.diagramBuilderController&quot;\n            prefHeight=&quot;500.0&quot; prefWidth=&quot;500.0&quot;\n            fx:id=&quot;root&quot;&gt;\n    &lt;top&gt;\n        &lt;HBox&gt;\n            &lt;Button text=&quot;Close&quot; fx:id=&quot;closeButton&quot; onAction=&quot;#closeApplication&quot;/&gt;\n            &lt;Button text=&quot;New&quot; onAction=&quot;#newCanvas&quot;/&gt;\n            &lt;Button text=&quot;Save&quot; onAction=&quot;#saveCanvas&quot;/&gt;\n            &lt;Button text=&quot;Save As&quot; onAction=&quot;#saveAsCanvas&quot;/&gt;\n            &lt;Button text=&quot;Load&quot; onAction=&quot;#loadCanvas&quot;/&gt;\n            &lt;Button text=&quot;Export as Image&quot; onAction=&quot;#exportCanvas&quot;/&gt;\n        &lt;/HBox&gt;\n    &lt;/top&gt;\n    &lt;left&gt;\n        &lt;VBox&gt;\n            &lt;Button text=&quot;Draw New Class&quot; fx:id=&quot;newClass&quot; onAction=&quot;#drawNewClass&quot;/&gt;\n            &lt;Button text=&quot;Add New Relationship&quot; onAction=&quot;#drawNewRelationship&quot;/&gt;\n        &lt;/VBox&gt;\n    &lt;/left&gt;\n    &lt;center&gt;\n        &lt;StackPane fx:id=&quot;stackPane&quot; style=&quot;-fx-border-color: #000; -fx-border-width: 1px&quot;\n                    maxWidth=&quot;500&quot; maxHeight=&quot;500&quot;&gt;\n            &lt;Canvas fx:id=&quot;canvas&quot; width=&quot;${stackPane.width}&quot; height=&quot;${stackPane.height}&quot;/&gt;\n        &lt;/StackPane&gt;\n    &lt;/center&gt;\n&lt;/BorderPane&gt;\n\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/BVZIm.png\" rel=\"nofollow noreferrer\">Image of GUI</a></p>\n"},{"tags":["java","nio","socketchannel"],"comments":[{"owner":{"account_id":71739,"reputation":307142,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":1,"creation_date":1644460496,"post_id":71059047,"comment_id":125615311,"body_markdown":"No, but you should deregister for the `OP_CONNECT` event, via `key.interestOps(key.interestOps() &amp; ~OP_CONNECT);` You are certainly going to want to register this channel later for `OP_READ`, and at suitable times for `OP_WRITE`.","body":"No, but you should deregister for the <code>OP_CONNECT</code> event, via <code>key.interestOps(key.interestOps() &amp; ~OP_CONNECT);</code> You are certainly going to want to register this channel later for <code>OP_READ</code>, and at suitable times for <code>OP_WRITE</code>."},{"owner":{"account_id":130873,"reputation":20683,"user_id":330457,"accept_rate":82,"display_name":"Jin Kwon"},"score":0,"creation_date":1644464114,"post_id":71059047,"comment_id":125615944,"body_markdown":"@user207421 Wonderful! You might wanna spend some minutes to put your comment as an answer. Thank you.","body":"@user207421 Wonderful! You might wanna spend some minutes to put your comment as an answer. Thank you."}],"owner":{"account_id":130873,"reputation":20683,"user_id":330457,"accept_rate":82,"display_name":"Jin Kwon"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":36,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1644459618,"creation_date":1644459618,"question_id":71059047,"body_markdown":"When `SocketChannel#connect` returns a `true` for a selector-registered `SocketChannel`, should I cancel the `SelectionKey`?\r\n\r\n```java\r\n                final var client = SocketChannel.open();\r\n                client.configureBlocking(false);\r\n                final var key = client.register(selector, OP_CONNECT);\r\n\r\n                if (client.connect(endpoint)) { // connected, immediately\r\n                    key.cancel(); // Should I do this?\r\n                    ...\r\n                }\r\n\r\n```","title":"Should I cancel the key when SocketChannel#connect returns true?","body":"<p>When <code>SocketChannel#connect</code> returns a <code>true</code> for a selector-registered <code>SocketChannel</code>, should I cancel the <code>SelectionKey</code>?</p>\n<pre class=\"lang-java prettyprint-override\"><code>                final var client = SocketChannel.open();\n                client.configureBlocking(false);\n                final var key = client.register(selector, OP_CONNECT);\n\n                if (client.connect(endpoint)) { // connected, immediately\n                    key.cancel(); // Should I do this?\n                    ...\n                }\n\n</code></pre>\n"},{"tags":["java","reverse","tostring","doubly-linked-list"],"comments":[{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":1,"creation_date":1644450877,"post_id":71058207,"comment_id":125613635,"body_markdown":"Step through your code with the debugger. Presumably you are not correctly assigning endMarker somewhere. Use a smaller list to make debugging simpler.","body":"Step through your code with the debugger. Presumably you are not correctly assigning endMarker somewhere. Use a smaller list to make debugging simpler."},{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":1,"creation_date":1644450915,"post_id":71058207,"comment_id":125613646,"body_markdown":"And see https://ericlippert.com/2014/03/05/how-to-debug-small-programs/","body":"And see <a href=\"https://ericlippert.com/2014/03/05/how-to-debug-small-programs/\" rel=\"nofollow noreferrer\">ericlippert.com/2014/03/05/how-to-debug-small-programs</a>"},{"owner":{"account_id":11624106,"reputation":2811,"user_id":11808788,"display_name":"Charles"},"score":1,"creation_date":1644457953,"post_id":71058207,"comment_id":125614858,"body_markdown":"It&#39;s most likely the `while` loop that never ends. Can you check that?","body":"It&#39;s most likely the <code>while</code> loop that never ends. Can you check that?"},{"owner":{"display_name":"user12207727"},"score":0,"creation_date":1644458213,"post_id":71058207,"comment_id":125614903,"body_markdown":"@Charles The entire program runs, including the print statements below the while loop, so I don&#39;t think this is the issue. Please let me know if I&#39;m missing something, though!","body":"@Charles The entire program runs, including the print statements below the while loop, so I don&#39;t think this is the issue. Please let me know if I&#39;m missing something, though!"},{"owner":{"account_id":11624106,"reputation":2811,"user_id":11808788,"display_name":"Charles"},"score":1,"creation_date":1644458794,"post_id":71058207,"comment_id":125615014,"body_markdown":"Sooo the iterator is broken? Debug the iterator why its not stopping. `hasNext()` probably always returns true.","body":"Sooo the iterator is broken? Debug the iterator why its not stopping. <code>hasNext()</code> probably always returns true."}],"answers":[{"tags":[],"owner":{"account_id":24059439,"reputation":282,"user_id":18036868,"display_name":"HUTUTU"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1644459052,"creation_date":1644459052,"answer_id":71058988,"question_id":71058207,"body_markdown":"```\r\npublic void reverse() {\r\n\r\n        Node current = beginMarker.next;\r\n        Node temp = null;\r\n\r\n        while (current != endMarker) {\r\n            temp = current.next; // store reference to next node\r\n            if (current == beginMarker.next) {\r\n                current.next = endMarker;\r\n            } else {\r\n                current.next = current.prev; // next points to previous node\r\n            }\r\n            current.prev = temp; // prev points to next node\r\n            current = temp; // current references temp (next node).\r\n        }\r\n\r\n        // changing references of beginning and end nodes\r\n        temp = beginMarker.next;\r\n        beginMarker.next = endMarker.prev;\r\n        endMarker.prev = temp;\r\n\r\n        /* TESTING THE PROGRAM, THIS PRINTS THE REVERSED LIST &#39;PROPERLY&#39; BUT THE TESTER METHOD DOESN&#39;T WORK */\r\n        current = beginMarker;\r\n        for (int i = 0; i &lt;= size() + 1; i++) {\r\n            System.out.println(current.data);\r\n            current = current.next;\r\n\r\n            /* END TEST */\r\n        }\r\n    }\r\n```","title":"Encountering out of memory error while reversing a short doubly linked list in java","body":"<pre><code>public void reverse() {\n\n        Node current = beginMarker.next;\n        Node temp = null;\n\n        while (current != endMarker) {\n            temp = current.next; // store reference to next node\n            if (current == beginMarker.next) {\n                current.next = endMarker;\n            } else {\n                current.next = current.prev; // next points to previous node\n            }\n            current.prev = temp; // prev points to next node\n            current = temp; // current references temp (next node).\n        }\n\n        // changing references of beginning and end nodes\n        temp = beginMarker.next;\n        beginMarker.next = endMarker.prev;\n        endMarker.prev = temp;\n\n        /* TESTING THE PROGRAM, THIS PRINTS THE REVERSED LIST 'PROPERLY' BUT THE TESTER METHOD DOESN'T WORK */\n        current = beginMarker;\n        for (int i = 0; i &lt;= size() + 1; i++) {\n            System.out.println(current.data);\n            current = current.next;\n\n            /* END TEST */\n        }\n    }\n</code></pre>\n"}],"owner":{"display_name":"user12207727"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":139,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"accepted_answer_id":71058988,"answer_count":1,"score":-1,"last_activity_date":1644459052,"creation_date":1644450456,"question_id":71058207,"body_markdown":"I am trying to reverse a doubly-linked list and print it by overriding the toString method. I used a template for the implementation of a doubly-linked list in java, and only added one method: reverse().\r\n\r\nI&#39;ve spent quite some time debugging, and was able to print out the entire reversed list properly. However, when the testReverse() function runs and calls the overridden toString() method on the new reversed list, I get a `java.lang.outofmemoryerror java heap space` error thrown at me. I&#39;ve included the entire implementation of the doubly-linked list I used below, but I&#39;m almost certain the issue concerns my algorithm.\r\n\r\nAny and all insight or advice would be greatly appreciated. Thank you!\r\n\r\n    public class LinkedList&lt;T&gt; implements Iterable&lt;T&gt; {\r\n    \r\n    \tprivate int size;\r\n    \tprivate Node&lt;T&gt; beginMarker;\r\n    \tprivate Node&lt;T&gt; endMarker;\r\n    \r\n    \tprivate class Node&lt;NodeT&gt; {\r\n    \t\tpublic Node(NodeT d, Node&lt;NodeT&gt; p, Node&lt;NodeT&gt; n) {\r\n    \t\t\tdata = d;\r\n    \t\t\tprev = p;\r\n    \t\t\tnext = n;\r\n    \t\t}\r\n    \r\n    \t\tpublic NodeT data;\r\n    \t\tpublic Node&lt;NodeT&gt; prev;\r\n    \t\tpublic Node&lt;NodeT&gt; next;\r\n    \t}\r\n    \r\n    \tpublic LinkedList() {\r\n    \t\tdoClear();\r\n    \t}\r\n    \r\n    \tpublic void doClear() {\r\n    \t\tbeginMarker = new Node&lt;&gt;(null, null, null);\r\n    \t\tendMarker = new Node&lt;&gt;(null, beginMarker, null);\r\n    \t\tbeginMarker.next = endMarker;\r\n    \t\tsize = 0;\r\n    \t}\r\n    \r\n    \tpublic int size() {\r\n    \t\treturn size;\r\n    \t}\r\n    \r\n    \tpublic boolean isEmpty() {\r\n    \t\treturn size() == 0;\r\n    \t}\r\n    \r\n    \tprivate Node&lt;T&gt; getNode(int idx, int lower, int upper) {\r\n    \t\tNode&lt;T&gt; p;\r\n    \r\n    \t\tif (idx &lt; lower || idx &gt; upper)\r\n    \t\t\tthrow new IndexOutOfBoundsException(&quot;getNode index: &quot; + idx + &quot;; size: &quot;+ size());\r\n    \r\n    \t\tif (idx &lt; size() / 2) { // Search through list from the beginning\r\n    \t\t\tp = beginMarker.next;\r\n    \t\t\tfor (int i = 0; i &lt; idx; i++)\r\n    \t\t\t\tp = p.next;\r\n    \t\t} else { // serch through the list from the end\r\n    \t\t\tp = endMarker;\r\n    \t\t\tfor (int i = size(); i &gt; idx; i--)\r\n    \t\t\t\tp = p.prev;\r\n    \t\t}\r\n    \t\treturn p;\r\n    \t}\r\n    \r\n    \tprivate Node&lt;T&gt; getNode(int idx) {\r\n    \t\treturn getNode(idx, 0, size() - 1);\r\n    \t}\r\n    \r\n    \tpublic T get(int idx) {\r\n    \t\treturn getNode(idx).data;\r\n    \t}\r\n    \r\n    \tpublic T set(int idx, T newVal) {\r\n    \t\tNode&lt;T&gt; p = getNode(idx);\r\n    \t\tT oldVal = p.data;\r\n    \r\n    \t\tp.data = newVal;\r\n    \t\treturn oldVal;\r\n    \t}\r\n    \r\n    \tprivate void addBefore(Node&lt;T&gt; p, T x) {\r\n    \t\tNode&lt;T&gt; newNode = new Node&lt;&gt;(x, p.prev, p);\r\n    \t\tnewNode.prev.next = newNode;\r\n    \t\tp.prev = newNode;\r\n    \t\tsize++;\r\n    \t}\r\n    \r\n    \tpublic void add(int idx, T x) {\r\n    \t\taddBefore(getNode(idx, 0, size()), x);\r\n    \t}\r\n    \r\n    \tpublic void add(T x) {\r\n    \t\tadd(size(), x);\r\n    \t}\r\n    \r\n    \tprivate T remove(Node&lt;T&gt; p) {\r\n    \t\tp.next.prev = p.prev;\r\n    \t\tp.prev.next = p.next;\r\n    \t\tsize--;\r\n    \t\treturn p.data;\r\n    \t}\r\n    \r\n    \tpublic T remove(int idx) {\r\n    \t\treturn remove(getNode(idx));\r\n    \t}\r\n      \r\n        public void reverse() {\r\n    \r\n    \t\tNode current = beginMarker.next;\r\n    \t\tNode temp = null;\r\n    \r\n    \t\twhile (current != endMarker) {\r\n    \t\t\ttemp = current.next; // store reference to next node\r\n    \t\t\tcurrent.next = current.prev; // next points to previous node\r\n    \t\t\tcurrent.prev = temp; // prev points to next node\r\n    \t\t\tcurrent = temp; // current references temp (next node).\r\n    \t\t}\r\n    \r\n    \t\t// changing references of beginning and end nodes\r\n    \t\ttemp = beginMarker.next;\r\n    \t\tbeginMarker.next = endMarker.prev;\r\n    \t\tendMarker.prev = temp;\r\n    \r\n    \t\t/* TESTING THE PROGRAM, THIS PRINTS THE REVERSED LIST &#39;PROPERLY&#39; BUT THE TESTER METHOD DOESN&#39;T WORK */\r\n    \t\tcurrent = beginMarker;\r\n    \t\tfor (int i = 0; i &lt;= size() + 1; i++) {\r\n    \t\t\tSystem.out.println(current.data);\r\n    \t\t\tcurrent = current.next;\r\n    \r\n    \t\t\t/* END TEST */\r\n    \t\t}\r\n    \t}\r\n    \r\n    \tpublic String toString() {\r\n    \t\tStringBuilder sb = new StringBuilder(&quot;[ &quot;);\r\n    \t\tfor (T x : this) {\r\n    \t\t\tsb.append(x + &quot; &quot;);\r\n    \t\t}\r\n    \t\tsb.append(&quot;]&quot;);\r\n    \t\treturn new String(sb);\r\n    \t}\r\n    \r\n    \tpublic java.util.Iterator&lt;T&gt; iterator() {\r\n    \t\treturn new LinkedListIterator();\r\n    \t}\r\n    \r\n    \tprivate class LinkedListIterator implements java.util.Iterator&lt;T&gt; {\r\n    \t\tprivate Node&lt;T&gt; current = beginMarker.next;\r\n    \t\tprivate boolean okToRemove = false;\r\n    \r\n    \t\tpublic boolean hasNext() {\r\n    \t\t\treturn current != endMarker;\r\n    \t\t}\r\n    \r\n    \t\tpublic T next() {\r\n    \t\t\tif (!hasNext())\r\n    \t\t\t\tthrow new java.util.NoSuchElementException();\r\n    \r\n    \t\t\tT nextItem = current.data;\r\n    \t\t\tcurrent = current.next;\r\n    \t\t\tokToRemove = true;\r\n    \t\t\treturn nextItem;\r\n    \t\t}\r\n    \r\n    \t\tpublic void remove() {\r\n    \t\t\tif (!okToRemove)\r\n    \t\t\t\tthrow new IllegalStateException();\r\n    \r\n    \t\t\tLinkedList.this.remove(current.prev);\r\n    \t\t\tokToRemove = false;\r\n    \t\t}\r\n    \t}\r\n    \r\n      public static void testReverse(){\r\n        \r\n        LinkedList&lt;Integer&gt; lst = new LinkedList&lt;&gt;();\r\n    \r\n    \t\tfor (int i = 0; i &lt; 10; i++)\r\n    \t\t\tlst.add(i);\r\n    \t\tfor (int i = 20; i &lt; 30; i++)\r\n    \t\t\tlst.add(0, i);\r\n        \r\n        System.out.println(&quot;Testing reverse:&quot;);\r\n        System.out.println(&quot;Original list:&quot;);\r\n        // Should print [ 29 28 27 26 25 24 23 22 21 20 0 1 2 3 4 5 6 7 8 9 ] \r\n    \t\tSystem.out.println(lst);\r\n        lst.reverse();\r\n        System.out.println(&quot;After reversal:&quot;);\r\n        // Should print [ 9 8 7 6 5 4 3 2 1 0 20 21 22 23 24 25 26 27 28 29 ] \r\n    \t\tSystem.out.println(lst);\r\n        \r\n      }\r\n    \tpublic static void main(String[] args) {\r\n    \t\ttestReverse();\r\n    \t}\r\n    }\r\n\r\n","title":"Encountering out of memory error while reversing a short doubly linked list in java","body":"<p>I am trying to reverse a doubly-linked list and print it by overriding the toString method. I used a template for the implementation of a doubly-linked list in java, and only added one method: reverse().</p>\n<p>I've spent quite some time debugging, and was able to print out the entire reversed list properly. However, when the testReverse() function runs and calls the overridden toString() method on the new reversed list, I get a <code>java.lang.outofmemoryerror java heap space</code> error thrown at me. I've included the entire implementation of the doubly-linked list I used below, but I'm almost certain the issue concerns my algorithm.</p>\n<p>Any and all insight or advice would be greatly appreciated. Thank you!</p>\n<pre><code>public class LinkedList&lt;T&gt; implements Iterable&lt;T&gt; {\n\n    private int size;\n    private Node&lt;T&gt; beginMarker;\n    private Node&lt;T&gt; endMarker;\n\n    private class Node&lt;NodeT&gt; {\n        public Node(NodeT d, Node&lt;NodeT&gt; p, Node&lt;NodeT&gt; n) {\n            data = d;\n            prev = p;\n            next = n;\n        }\n\n        public NodeT data;\n        public Node&lt;NodeT&gt; prev;\n        public Node&lt;NodeT&gt; next;\n    }\n\n    public LinkedList() {\n        doClear();\n    }\n\n    public void doClear() {\n        beginMarker = new Node&lt;&gt;(null, null, null);\n        endMarker = new Node&lt;&gt;(null, beginMarker, null);\n        beginMarker.next = endMarker;\n        size = 0;\n    }\n\n    public int size() {\n        return size;\n    }\n\n    public boolean isEmpty() {\n        return size() == 0;\n    }\n\n    private Node&lt;T&gt; getNode(int idx, int lower, int upper) {\n        Node&lt;T&gt; p;\n\n        if (idx &lt; lower || idx &gt; upper)\n            throw new IndexOutOfBoundsException(&quot;getNode index: &quot; + idx + &quot;; size: &quot;+ size());\n\n        if (idx &lt; size() / 2) { // Search through list from the beginning\n            p = beginMarker.next;\n            for (int i = 0; i &lt; idx; i++)\n                p = p.next;\n        } else { // serch through the list from the end\n            p = endMarker;\n            for (int i = size(); i &gt; idx; i--)\n                p = p.prev;\n        }\n        return p;\n    }\n\n    private Node&lt;T&gt; getNode(int idx) {\n        return getNode(idx, 0, size() - 1);\n    }\n\n    public T get(int idx) {\n        return getNode(idx).data;\n    }\n\n    public T set(int idx, T newVal) {\n        Node&lt;T&gt; p = getNode(idx);\n        T oldVal = p.data;\n\n        p.data = newVal;\n        return oldVal;\n    }\n\n    private void addBefore(Node&lt;T&gt; p, T x) {\n        Node&lt;T&gt; newNode = new Node&lt;&gt;(x, p.prev, p);\n        newNode.prev.next = newNode;\n        p.prev = newNode;\n        size++;\n    }\n\n    public void add(int idx, T x) {\n        addBefore(getNode(idx, 0, size()), x);\n    }\n\n    public void add(T x) {\n        add(size(), x);\n    }\n\n    private T remove(Node&lt;T&gt; p) {\n        p.next.prev = p.prev;\n        p.prev.next = p.next;\n        size--;\n        return p.data;\n    }\n\n    public T remove(int idx) {\n        return remove(getNode(idx));\n    }\n  \n    public void reverse() {\n\n        Node current = beginMarker.next;\n        Node temp = null;\n\n        while (current != endMarker) {\n            temp = current.next; // store reference to next node\n            current.next = current.prev; // next points to previous node\n            current.prev = temp; // prev points to next node\n            current = temp; // current references temp (next node).\n        }\n\n        // changing references of beginning and end nodes\n        temp = beginMarker.next;\n        beginMarker.next = endMarker.prev;\n        endMarker.prev = temp;\n\n        /* TESTING THE PROGRAM, THIS PRINTS THE REVERSED LIST 'PROPERLY' BUT THE TESTER METHOD DOESN'T WORK */\n        current = beginMarker;\n        for (int i = 0; i &lt;= size() + 1; i++) {\n            System.out.println(current.data);\n            current = current.next;\n\n            /* END TEST */\n        }\n    }\n\n    public String toString() {\n        StringBuilder sb = new StringBuilder(&quot;[ &quot;);\n        for (T x : this) {\n            sb.append(x + &quot; &quot;);\n        }\n        sb.append(&quot;]&quot;);\n        return new String(sb);\n    }\n\n    public java.util.Iterator&lt;T&gt; iterator() {\n        return new LinkedListIterator();\n    }\n\n    private class LinkedListIterator implements java.util.Iterator&lt;T&gt; {\n        private Node&lt;T&gt; current = beginMarker.next;\n        private boolean okToRemove = false;\n\n        public boolean hasNext() {\n            return current != endMarker;\n        }\n\n        public T next() {\n            if (!hasNext())\n                throw new java.util.NoSuchElementException();\n\n            T nextItem = current.data;\n            current = current.next;\n            okToRemove = true;\n            return nextItem;\n        }\n\n        public void remove() {\n            if (!okToRemove)\n                throw new IllegalStateException();\n\n            LinkedList.this.remove(current.prev);\n            okToRemove = false;\n        }\n    }\n\n  public static void testReverse(){\n    \n    LinkedList&lt;Integer&gt; lst = new LinkedList&lt;&gt;();\n\n        for (int i = 0; i &lt; 10; i++)\n            lst.add(i);\n        for (int i = 20; i &lt; 30; i++)\n            lst.add(0, i);\n    \n    System.out.println(&quot;Testing reverse:&quot;);\n    System.out.println(&quot;Original list:&quot;);\n    // Should print [ 29 28 27 26 25 24 23 22 21 20 0 1 2 3 4 5 6 7 8 9 ] \n        System.out.println(lst);\n    lst.reverse();\n    System.out.println(&quot;After reversal:&quot;);\n    // Should print [ 9 8 7 6 5 4 3 2 1 0 20 21 22 23 24 25 26 27 28 29 ] \n        System.out.println(lst);\n    \n  }\n    public static void main(String[] args) {\n        testReverse();\n    }\n}\n</code></pre>\n"},{"tags":["java","rest","events","event-driven"],"comments":[{"owner":{"account_id":11624106,"reputation":2811,"user_id":11808788,"display_name":"Charles"},"score":0,"creation_date":1644459964,"post_id":71058968,"comment_id":125615205,"body_markdown":"Are you constantly making Rest requests with Java? Then its possible just remember the last body and compare it. If you&#39;re talking about frontend then you probably need to use WebSocket.","body":"Are you constantly making Rest requests with Java? Then its possible just remember the last body and compare it. If you&#39;re talking about frontend then you probably need to use WebSocket."},{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":0,"creation_date":1644460358,"post_id":71058968,"comment_id":125615286,"body_markdown":"You&#39;ll need to poll the REST endpoint, unless whatever you&#39;re talking to allows you to register a webhook which it will call when something changes.","body":"You&#39;ll need to poll the REST endpoint, unless whatever you&#39;re talking to allows you to register a webhook which it will call when something changes."},{"owner":{"account_id":17063139,"reputation":5,"user_id":12346053,"display_name":"Jack Stockley"},"score":0,"creation_date":1644464355,"post_id":71058968,"comment_id":125615986,"body_markdown":"@tgdavies that sounds like what I want to do. I have a program that every minute makes a REST API call to the YouTube and Twitch API. I still have more research to do but does anyone know if either of these services offers webhooks, or something similar so I don’t have to make a call every minute? Thanks for the help so far.","body":"@tgdavies that sounds like what I want to do. I have a program that every minute makes a REST API call to the YouTube and Twitch API. I still have more research to do but does anyone know if either of these services offers webhooks, or something similar so I don’t have to make a call every minute? Thanks for the help so far."}],"owner":{"account_id":17063139,"reputation":5,"user_id":12346053,"display_name":"Jack Stockley"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":101,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1644458800,"creation_date":1644458800,"question_id":71058968,"body_markdown":"Sorry if this is a very general question or if I don&#39;t sound like I know what I&#39;m talking about since I am not 100% sure on how to phrase this question.\r\n\r\nI am trying to run a Java program whenever there is a change in the response body of a REST request. My questions are:\r\n1. Is this possible.\r\n2. If it&#39;s possible, what&#39;s the best way to go about doing this.\r\n\r\nSorry again if this is a stupid question or doesn&#39;t make any sense.","title":"Event-driven programming in Java wit REST API","body":"<p>Sorry if this is a very general question or if I don't sound like I know what I'm talking about since I am not 100% sure on how to phrase this question.</p>\n<p>I am trying to run a Java program whenever there is a change in the response body of a REST request. My questions are:</p>\n<ol>\n<li>Is this possible.</li>\n<li>If it's possible, what's the best way to go about doing this.</li>\n</ol>\n<p>Sorry again if this is a stupid question or doesn't make any sense.</p>\n"},{"tags":["java","arraylist","queue"],"comments":[{"owner":{"account_id":23667337,"reputation":1467,"user_id":17694626,"display_name":"Cheng Thao"},"score":0,"creation_date":1644426909,"post_id":71053152,"comment_id":125605765,"body_markdown":"The problem is not the code above but the toString method of the object.  You need to modify the toString method to include a comma between each value.","body":"The problem is not the code above but the toString method of the object.  You need to modify the toString method to include a comma between each value."}],"answers":[{"tags":[],"owner":{"account_id":7369804,"reputation":1147,"user_id":5610358,"display_name":"rhowell"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1644424574,"creation_date":1644424095,"answer_id":71053232,"question_id":71053152,"body_markdown":"You can use the `String.join()` method.\r\n```\r\nSystem.out.println(String.join(&quot;,&quot;, listaOfQueues.get(i))+&quot;\\n&quot;);\r\n```\r\n\r\nIn fact you can use `String.join()` on any class that implements the `Iterable` interface.","title":"Print arraylist of queues separated by commas","body":"<p>You can use the <code>String.join()</code> method.</p>\n<pre><code>System.out.println(String.join(&quot;,&quot;, listaOfQueues.get(i))+&quot;\\n&quot;);\n</code></pre>\n<p>In fact you can use <code>String.join()</code> on any class that implements the <code>Iterable</code> interface.</p>\n"},{"tags":[],"owner":{"account_id":7844722,"reputation":116,"user_id":5930157,"display_name":"douglas"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1644458459,"creation_date":1644458459,"answer_id":71058944,"question_id":71053152,"body_markdown":"You could also use collector transformations and mappings\r\n\r\n    listOfQueues.stream().map(a -&gt;\r\n                a.stream().map(String::valueOf).collect(\r\n                        Collectors.joining(&quot;,&quot;))\r\n        ).collect(Collectors.reducing((a, b) -&gt; a + &quot;\\n&quot; + b)).get().toString()","title":"Print arraylist of queues separated by commas","body":"<p>You could also use collector transformations and mappings</p>\n<pre><code>listOfQueues.stream().map(a -&gt;\n            a.stream().map(String::valueOf).collect(\n                    Collectors.joining(&quot;,&quot;))\n    ).collect(Collectors.reducing((a, b) -&gt; a + &quot;\\n&quot; + b)).get().toString()\n</code></pre>\n"}],"owner":{"account_id":18363680,"reputation":11,"user_id":13375228,"display_name":"Anthony Ortega"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":172,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":2,"score":0,"last_activity_date":1644458459,"creation_date":1644423724,"question_id":71053152,"body_markdown":"I want to print the values of an arraylist that&#39;s filled with queues, but i want to do it separated by a comma.\r\n\r\nThis is what i&#39;m doing to print the list:\r\n\r\n    for(int i=1;i&lt;listaOfQueues.size();i++){\r\n          System.out.println(listaOfQueues.get(i).toString()+&quot;\\n&quot;);\r\n        }\r\n\r\nThis is my current output:\r\n\r\n&gt; 242424242424242525252525252526262626262626  \r\n&gt;\r\n&gt; 272727272727272828282828282829292929292929\r\n&gt; \r\n&gt; 303030303030303131313131313132323232323232\r\n&gt; \r\n&gt; 333333333333333434343434343435353535353535\r\n&gt; \r\n&gt; 363636363636363737373737373738383838383838\r\n&gt; \r\n&gt; 393939393939394040404040404041414141414141\r\n\r\nMy desired output:\r\n&gt; 24,24,24,24,24,24,24,25,25,25,25,25,25,25,26,26,26,26,26,26,26  \r\n&gt;\r\n&gt; 27,27,27,27,27,27,27,28,28,28,28,28,28,28,29,29,29,29,29,29,29\r\n&gt; \r\n&gt; 30,30,30,30,30,30,30,31,31,31,31,31,31,31,32,32,32,32,32,32,32\r\n&gt; \r\n&gt; 33,33,33,33,33,33,33,34,34,34,34,34,34,34,35,35,35,35,35,35,35\r\n&gt; \r\n&gt; 36,36,36,36,36,36,36,37,37,37,37,37,37,37,38,38,38,38,38,38,38\r\n&gt; \r\n&gt; 39,39,39,39,39,39,39,40,40,40,40,40,40,40,41,41,41,41,41,41,41\r\n\r\n\r\nAny suggestions? Thanks","title":"Print arraylist of queues separated by commas","body":"<p>I want to print the values of an arraylist that's filled with queues, but i want to do it separated by a comma.</p>\n<p>This is what i'm doing to print the list:</p>\n<pre><code>for(int i=1;i&lt;listaOfQueues.size();i++){\n      System.out.println(listaOfQueues.get(i).toString()+&quot;\\n&quot;);\n    }\n</code></pre>\n<p>This is my current output:</p>\n<blockquote>\n<p>242424242424242525252525252526262626262626</p>\n<p>272727272727272828282828282829292929292929</p>\n<p>303030303030303131313131313132323232323232</p>\n<p>333333333333333434343434343435353535353535</p>\n<p>363636363636363737373737373738383838383838</p>\n<p>393939393939394040404040404041414141414141</p>\n</blockquote>\n<p>My desired output:</p>\n<blockquote>\n<p>24,24,24,24,24,24,24,25,25,25,25,25,25,25,26,26,26,26,26,26,26</p>\n<p>27,27,27,27,27,27,27,28,28,28,28,28,28,28,29,29,29,29,29,29,29</p>\n<p>30,30,30,30,30,30,30,31,31,31,31,31,31,31,32,32,32,32,32,32,32</p>\n<p>33,33,33,33,33,33,33,34,34,34,34,34,34,34,35,35,35,35,35,35,35</p>\n<p>36,36,36,36,36,36,36,37,37,37,37,37,37,37,38,38,38,38,38,38,38</p>\n<p>39,39,39,39,39,39,39,40,40,40,40,40,40,40,41,41,41,41,41,41,41</p>\n</blockquote>\n<p>Any suggestions? Thanks</p>\n"},{"tags":["java","java-stream"],"comments":[{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":0,"creation_date":1644456582,"post_id":71058735,"comment_id":125614627,"body_markdown":"You&#39;re creating 8 identical new `Data3` instances for each `Data3` instance you are starting with. You are not doing any processing involving the `listOfCompanies`.","body":"You&#39;re creating 8 identical new <code>Data3</code> instances for each <code>Data3</code> instance you are starting with. You are not doing any processing involving the <code>listOfCompanies</code>."},{"owner":{"account_id":24137475,"reputation":59,"user_id":18104162,"display_name":"Rishi Kumar"},"score":0,"creation_date":1644457402,"post_id":71058735,"comment_id":125614761,"body_markdown":"@tgdavies Thanks for suggestion, update to my new code, tried with new code but still not working, any hint?","body":"@tgdavies Thanks for suggestion, update to my new code, tried with new code but still not working, any hint?"},{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":0,"creation_date":1644457535,"post_id":71058735,"comment_id":125614785,"body_markdown":"What happens when you call `value.getListOfCompanies().get(index).isEmpty()` when index is larger than `value.getListOfCompanies().size()`? Can you think of another condition you could use instead?","body":"What happens when you call <code>value.getListOfCompanies().get(index).isEmpty()</code> when index is larger than <code>value.getListOfCompanies().size()</code>? Can you think of another condition you could use instead?"}],"answers":[{"tags":[],"owner":{"account_id":3788650,"reputation":176,"user_id":3145830,"display_name":"vince"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1644457543,"creation_date":1644457543,"answer_id":71058857,"question_id":71058735,"body_markdown":"    listOfDataValues.stream().forEach(value -&gt; {\r\n        return IntStream.range(1, 8).mapToObj(new Data3(value.getId(), value.getYear(), value.getListOfCompanies(), value.getValue()));\r\n    });\r\n\r\nThe code snippet is wrong for:\r\n\r\n1.in forEach you don&#39;t need to return anything\r\n\r\n2.mapToObj needs IntFunction, so you need to take an Integer as input\r\n\r\nActually you need to complement &quot;&quot; according to the size of listOfCompanies, so getting the quantity to be complemented is the key:\r\n\r\n    listOfDataValues.stream().forEach(value -&gt; {\r\n                int size = value.getListOfCompanies().size();\r\n                IntStream.range(0, 8 - size).forEach(index-&gt;value.getListOfCompanies().add(&quot;&quot;));\r\n            });","title":"How to use forEach() method in Java 8 loop n+1 time but my list size is random like n, n-1, n-2","body":"<pre><code>listOfDataValues.stream().forEach(value -&gt; {\n    return IntStream.range(1, 8).mapToObj(new Data3(value.getId(), value.getYear(), value.getListOfCompanies(), value.getValue()));\n});\n</code></pre>\n<p>The code snippet is wrong for:</p>\n<p>1.in forEach you don't need to return anything</p>\n<p>2.mapToObj needs IntFunction, so you need to take an Integer as input</p>\n<p>Actually you need to complement &quot;&quot; according to the size of listOfCompanies, so getting the quantity to be complemented is the key:</p>\n<pre><code>listOfDataValues.stream().forEach(value -&gt; {\n            int size = value.getListOfCompanies().size();\n            IntStream.range(0, 8 - size).forEach(index-&gt;value.getListOfCompanies().add(&quot;&quot;));\n        });\n</code></pre>\n"}],"owner":{"account_id":24137475,"reputation":59,"user_id":18104162,"display_name":"Rishi Kumar"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1482,"favorite_count":0,"down_vote_count":4,"up_vote_count":0,"closed_date":1644457729,"accepted_answer_id":71058857,"answer_count":1,"score":-4,"last_activity_date":1644458358,"creation_date":1644456307,"question_id":71058735,"body_markdown":"How to use forEach() method in Java 8 loop `n` time but my list size is always random like `n-1, n-2, etc...`. If list size is less then n number then rest value would be zero/empty of each object value.\r\n\r\nBelow example I have Data3 object which have ID, year, `listOfCompanies` and value as per below code  in the end I have list of Data3 object which I want to loop using for each java8 but I want to loop 8 times for list of companies if no value then put Empty value for each object.\r\n\r\nI try using `IntStream.range` function but its not working for me. \r\n\r\n    @lombok.Data\r\n    @AllArgsConstructor\r\n    static class Data3{\r\n        int id;\r\n        int year;\r\n        List&lt;String&gt; listOfCompanies;\r\n        double value;\r\n    }\r\n\r\n    List&lt;String&gt; list1 = new ArrayList&lt;&gt;();\r\n    list1.add(&quot;TCS&quot;); list1.add(&quot;Cognizant&quot;);list1.add(&quot;Wipro&quot;);list1.add(&quot;Zensar&quot;);\r\n    list1.add(&quot;IBM&quot;);list1.add(&quot;Amdocs&quot;);\r\n    List&lt;String&gt; list2 = new ArrayList&lt;&gt;();\r\n    list2.add(&quot;TCS&quot;);list2.add(&quot;Cognizant&quot;);list2.add(&quot;Wipro&quot;);\r\n    List&lt;String&gt; list3 = new ArrayList&lt;&gt;();\r\n    list3.add(&quot;TCS&quot;);list3.add(&quot;Cognizant&quot;);list3.add(&quot;Wipro&quot;);list3.add(&quot;Zensar&quot;);\r\n    list3.add(&quot;IBM&quot;);\r\n    List&lt;String&gt; list4 = new ArrayList&lt;&gt;();\r\n    list4.add(&quot;TCS&quot;);list4.add(&quot;Cognizant&quot;);\r\n    Data3 d1 = new Data3(1, 1990, list1, 10);\r\n    Data3 d2 = new Data3(2, 1991, list2, 20);\r\n    Data3 d3 = new Data3(3, 1992, list3, 30);\r\n    Data3 d4 = new Data3(4, 1993, list4, 40);\r\n\r\n    List&lt;Data3&gt; listOfDataValues = new ArrayList&lt;&gt;();\r\n    listOfDataValues.add(d1);\r\n    listOfDataValues.add(d2);\r\n    listOfDataValues.add(d3);\r\n    listOfDataValues.add(d4);\r\n\r\n\r\n    listOfDataValues.stream().map(value -&gt; new Data3(value.getId(), value.getYear(), IntStream.range(1, 8).mapToObj(index -&gt; value.getListOfCompanies().get(index).isEmpty() ? &quot;&quot; : value.getListOfCompanies().get(index)), value.getValue()));\r\n\r\n\r\n\r\n&gt; Expected OP: (result required to loop 8 times list of companies if no\r\n&gt; value then put Empty value )\r\n\r\n    [Test.Data3(id=1, year=1990, listOfCompanies=[TCS, Cognizant, Wipro, Zensar, IBM, Amdocs,&quot;&quot;,&quot;&quot;], value=10.0), \r\n    Test.Data3(id=2, year=1991, listOfCompanies=[TCS, Cognizant, Wipro,&quot;&quot;,&quot;&quot;,&quot;&quot;,&quot;&quot;,&quot;&quot;], value=20.0), \r\n    Test.Data3(id=3, year=1992, listOfCompanies=[TCS, Cognizant, Wipro, Zensar, IBM,&quot;&quot;,&quot;&quot;,&quot;&quot;], value=30.0),` \r\n    Test.Data3(id=4, year=1993, listOfCompanies=[TCS, Cognizant,&quot;&quot;,&quot;&quot;,&quot;&quot;,&quot;&quot;,&quot;&quot;,&quot;&quot;], value=40.0)]\r\n\r\n\r\n\r\n\r\n   ","title":"How to use forEach() method in Java 8 loop n+1 time but my list size is random like n, n-1, n-2","body":"<p>How to use forEach() method in Java 8 loop <code>n</code> time but my list size is always random like <code>n-1, n-2, etc...</code>. If list size is less then n number then rest value would be zero/empty of each object value.</p>\n<p>Below example I have Data3 object which have ID, year, <code>listOfCompanies</code> and value as per below code  in the end I have list of Data3 object which I want to loop using for each java8 but I want to loop 8 times for list of companies if no value then put Empty value for each object.</p>\n<p>I try using <code>IntStream.range</code> function but its not working for me.</p>\n<pre><code>@lombok.Data\n@AllArgsConstructor\nstatic class Data3{\n    int id;\n    int year;\n    List&lt;String&gt; listOfCompanies;\n    double value;\n}\n\nList&lt;String&gt; list1 = new ArrayList&lt;&gt;();\nlist1.add(&quot;TCS&quot;); list1.add(&quot;Cognizant&quot;);list1.add(&quot;Wipro&quot;);list1.add(&quot;Zensar&quot;);\nlist1.add(&quot;IBM&quot;);list1.add(&quot;Amdocs&quot;);\nList&lt;String&gt; list2 = new ArrayList&lt;&gt;();\nlist2.add(&quot;TCS&quot;);list2.add(&quot;Cognizant&quot;);list2.add(&quot;Wipro&quot;);\nList&lt;String&gt; list3 = new ArrayList&lt;&gt;();\nlist3.add(&quot;TCS&quot;);list3.add(&quot;Cognizant&quot;);list3.add(&quot;Wipro&quot;);list3.add(&quot;Zensar&quot;);\nlist3.add(&quot;IBM&quot;);\nList&lt;String&gt; list4 = new ArrayList&lt;&gt;();\nlist4.add(&quot;TCS&quot;);list4.add(&quot;Cognizant&quot;);\nData3 d1 = new Data3(1, 1990, list1, 10);\nData3 d2 = new Data3(2, 1991, list2, 20);\nData3 d3 = new Data3(3, 1992, list3, 30);\nData3 d4 = new Data3(4, 1993, list4, 40);\n\nList&lt;Data3&gt; listOfDataValues = new ArrayList&lt;&gt;();\nlistOfDataValues.add(d1);\nlistOfDataValues.add(d2);\nlistOfDataValues.add(d3);\nlistOfDataValues.add(d4);\n\n\nlistOfDataValues.stream().map(value -&gt; new Data3(value.getId(), value.getYear(), IntStream.range(1, 8).mapToObj(index -&gt; value.getListOfCompanies().get(index).isEmpty() ? &quot;&quot; : value.getListOfCompanies().get(index)), value.getValue()));\n</code></pre>\n<blockquote>\n<p>Expected OP: (result required to loop 8 times list of companies if no\nvalue then put Empty value )</p>\n</blockquote>\n<pre><code>[Test.Data3(id=1, year=1990, listOfCompanies=[TCS, Cognizant, Wipro, Zensar, IBM, Amdocs,&quot;&quot;,&quot;&quot;], value=10.0), \nTest.Data3(id=2, year=1991, listOfCompanies=[TCS, Cognizant, Wipro,&quot;&quot;,&quot;&quot;,&quot;&quot;,&quot;&quot;,&quot;&quot;], value=20.0), \nTest.Data3(id=3, year=1992, listOfCompanies=[TCS, Cognizant, Wipro, Zensar, IBM,&quot;&quot;,&quot;&quot;,&quot;&quot;], value=30.0),` \nTest.Data3(id=4, year=1993, listOfCompanies=[TCS, Cognizant,&quot;&quot;,&quot;&quot;,&quot;&quot;,&quot;&quot;,&quot;&quot;,&quot;&quot;], value=40.0)]\n</code></pre>\n"},{"tags":["java","selenium","selenium-webdriver"],"comments":[{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":1,"creation_date":1644461046,"post_id":71058828,"comment_id":125615416,"body_markdown":"You may be able to change the location with the `java.io.tmpdir` system property.","body":"You may be able to change the location with the <code>java.io.tmpdir</code> system property."},{"owner":{"account_id":7073901,"reputation":558,"user_id":5414637,"accept_rate":50,"display_name":"AutoTester999"},"score":0,"creation_date":1644528132,"post_id":71058828,"comment_id":125637877,"body_markdown":"Can this be configured via Maven?","body":"Can this be configured via Maven?"},{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":1,"creation_date":1644528479,"post_id":71058828,"comment_id":125637985,"body_markdown":"If you are running via the failsafe plugin you should be able to use `systemPropertyVariables`.","body":"If you are running via the failsafe plugin you should be able to use <code>systemPropertyVariables</code>."}],"owner":{"account_id":7073901,"reputation":558,"user_id":5414637,"accept_rate":50,"display_name":"AutoTester999"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":24,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1644457240,"creation_date":1644457240,"question_id":71058828,"body_markdown":"Based on my observations, I understand that Selenium WebDriver creates files (created during execution) in `/tmp` folder and then deletes them when `driver.quit()` is called.\r\n\r\nIs there any official Selenium WebDriver documentation that mentions this and throws more details around it?\r\n\r\nI want to learn:\r\n1) Is the `/tmp` location configurable by the developer in the code?\r\n2) Can this be turned off?\r\n\r\n","title":"Is there any official documentation that mentions the creation of files in /tmp folder by Selenium WebDriver?","body":"<p>Based on my observations, I understand that Selenium WebDriver creates files (created during execution) in <code>/tmp</code> folder and then deletes them when <code>driver.quit()</code> is called.</p>\n<p>Is there any official Selenium WebDriver documentation that mentions this and throws more details around it?</p>\n<p>I want to learn:</p>\n<ol>\n<li>Is the <code>/tmp</code> location configurable by the developer in the code?</li>\n<li>Can this be turned off?</li>\n</ol>\n"},{"tags":["java","corruption","ogg"],"answers":[{"tags":[],"owner":{"account_id":47283,"reputation":703817,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1428031638,"creation_date":1428031638,"answer_id":29425790,"question_id":29425705,"body_markdown":"There is a Linux command called `oggz-validate`; see [manual entry][1].\r\n\r\nI suggest that you install and use it for validating your OGG files.  Using the results to trigger deletion of a file is some trivial shell scripting. \r\n\r\nIf you *really* need to do this from Java, then use `Process.exec(...)` to launch it, etcetera.\r\n\r\n\r\n  [1]: http://linux.die.net/man/1/oggz-validate","title":"Detecting corrupted OGG files","body":"<p>There is a Linux command called <code>oggz-validate</code>; see <a href=\"http://linux.die.net/man/1/oggz-validate\" rel=\"nofollow\">manual entry</a>.</p>\n\n<p>I suggest that you install and use it for validating your OGG files.  Using the results to trigger deletion of a file is some trivial shell scripting. </p>\n\n<p>If you <em>really</em> need to do this from Java, then use <code>Process.exec(...)</code> to launch it, etcetera.</p>\n"},{"tags":[],"owner":{"account_id":6025163,"reputation":46,"user_id":4731110,"display_name":"bmargoat"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1634829501,"creation_date":1634829501,"answer_id":69664596,"question_id":29425705,"body_markdown":"For Windows, oggzvalidate.exe is available from liboggz (https://github.com/kfish/liboggz). Even though the latest Visual Studio project is for 2008, I could migrate it to 2019 and compile it with no issue.\r\n\r\nIt would appear to be the same program/project Stephen C answered with, but working on windows, so the rest of his answer applies.\r\n\r\nI&#39;ll also add for completeness, you could interface with liboggz using Java.lang.Runtime.loadLibrary() and implement oggzvalidate in java based on the available C source code. But that&#39;s probably way more complicated than you want.","title":"Detecting corrupted OGG files","body":"<p>For Windows, oggzvalidate.exe is available from liboggz (<a href=\"https://github.com/kfish/liboggz\" rel=\"nofollow noreferrer\">https://github.com/kfish/liboggz</a>). Even though the latest Visual Studio project is for 2008, I could migrate it to 2019 and compile it with no issue.</p>\n<p>It would appear to be the same program/project Stephen C answered with, but working on windows, so the rest of his answer applies.</p>\n<p>I'll also add for completeness, you could interface with liboggz using Java.lang.Runtime.loadLibrary() and implement oggzvalidate in java based on the available C source code. But that's probably way more complicated than you want.</p>\n"},{"tags":[],"owner":{"account_id":91856,"reputation":6963,"user_id":252025,"accept_rate":46,"display_name":"Mitar"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1644456872,"creation_date":1644456872,"answer_id":71058787,"question_id":29425705,"body_markdown":"`oggz-validate` validates only the container, but it does not try to decode contents. You can try instead:\r\n\r\n```\r\nffmpeg -i file.ogg -f null -err_detect +crccheck+bitstream+buffer+explode+careful+compliant+aggressive -v error -xerror -\r\n```","title":"Detecting corrupted OGG files","body":"<p><code>oggz-validate</code> validates only the container, but it does not try to decode contents. You can try instead:</p>\n<pre><code>ffmpeg -i file.ogg -f null -err_detect +crccheck+bitstream+buffer+explode+careful+compliant+aggressive -v error -xerror -\n</code></pre>\n"}],"owner":{"account_id":3650306,"reputation":59,"user_id":3042660,"display_name":"BlueMustache"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1003,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":3,"score":2,"last_activity_date":1644456872,"creation_date":1428030937,"question_id":29425705,"body_markdown":"I have recently been converting large batches of WEM files, from a video game.\r\nWhen I use a tool to convert them, it converts them into an OGG file. I then use Audacity to convert them into a WAV file so I can use it practically. When I do batch converting in Audacity, it works, but every once in a while Audacity freezes. This is because Audacity is trying to read a corrupt OGG file, and crashes. This wouldn&#39;t be so hard to weed out the corrupt files, if they weren&#39;t named after numbers! (e.g. 3147685.ogg) I am used to programming in Java. Is their any program, script, or website I can use to delete the corrupt ogg files, so I can convert the rest to WAVs easily.\r\nPlease help.\r\nThank You,\r\n-Blue","title":"Detecting corrupted OGG files","body":"<p>I have recently been converting large batches of WEM files, from a video game.\nWhen I use a tool to convert them, it converts them into an OGG file. I then use Audacity to convert them into a WAV file so I can use it practically. When I do batch converting in Audacity, it works, but every once in a while Audacity freezes. This is because Audacity is trying to read a corrupt OGG file, and crashes. This wouldn't be so hard to weed out the corrupt files, if they weren't named after numbers! (e.g. 3147685.ogg) I am used to programming in Java. Is their any program, script, or website I can use to delete the corrupt ogg files, so I can convert the rest to WAVs easily.\nPlease help.\nThank You,\n-Blue</p>\n"},{"tags":["java","hibernate"],"comments":[{"owner":{"account_id":179640,"reputation":15442,"user_id":412446,"accept_rate":41,"display_name":"Christian Beikov"},"score":0,"creation_date":1487599745,"post_id":42333311,"comment_id":71844679,"body_markdown":"What hibernate version?","body":"What hibernate version?"},{"owner":{"account_id":179640,"reputation":15442,"user_id":412446,"accept_rate":41,"display_name":"Christian Beikov"},"score":0,"creation_date":1487600229,"post_id":42333311,"comment_id":71845034,"body_markdown":"Regardless of the hibernate version, you would have to map the relation in your entity model i.e. the `Order` entity needs a one-to-many relation to `Product`. You can use hibernates `WITH` clause for the restriction on the `accountId` like `FROM Order o LEFT JOIN o.products p WITH p.accountId = 3`","body":"Regardless of the hibernate version, you would have to map the relation in your entity model i.e. the <code>Order</code> entity needs a one-to-many relation to <code>Product</code>. You can use hibernates <code>WITH</code> clause for the restriction on the <code>accountId</code> like <code>FROM Order o LEFT JOIN o.products p WITH p.accountId = 3</code>"},{"owner":{"account_id":2023688,"reputation":536,"user_id":1809290,"accept_rate":69,"display_name":"Jakob"},"score":0,"creation_date":1487628260,"post_id":42333311,"comment_id":71860728,"body_markdown":"@ChristianBeikov I have that and also I am able to do with `p.accountId = 3`. However if the subquery contains a join, that does not work. I have solved this with a in clause... But I would like to know if this is possible...","body":"@ChristianBeikov I have that and also I am able to do with <code>p.accountId = 3</code>. However if the subquery contains a join, that does not work. I have solved this with a in clause... But I would like to know if this is possible..."},{"owner":{"account_id":179640,"reputation":15442,"user_id":412446,"accept_rate":41,"display_name":"Christian Beikov"},"score":0,"creation_date":1487668709,"post_id":42333311,"comment_id":71876247,"body_markdown":"Hibernate does not support subqueries in the FROM clause if that is what you want to know. You can almost always reformulate the subquery to a relation join, but you&#39;d have to adapt the model for that. You shouldn&#39;t use the Hibernate Criteria API anymore as it got deprecated in 5 and might be removed in 6.","body":"Hibernate does not support subqueries in the FROM clause if that is what you want to know. You can almost always reformulate the subquery to a relation join, but you&#39;d have to adapt the model for that. You shouldn&#39;t use the Hibernate Criteria API anymore as it got deprecated in 5 and might be removed in 6."},{"owner":{"account_id":2023688,"reputation":536,"user_id":1809290,"accept_rate":69,"display_name":"Jakob"},"score":0,"creation_date":1487715586,"post_id":42333311,"comment_id":71907448,"body_markdown":"@ChristianBeikov Yes I want to use it in the FROM clause. It will simplify my query a lot. But thank you for the answer and the information. I just adjusted my query without the FROM clause...","body":"@ChristianBeikov Yes I want to use it in the FROM clause. It will simplify my query a lot. But thank you for the answer and the information. I just adjusted my query without the FROM clause..."}],"answers":[{"tags":[],"owner":{"account_id":1281523,"reputation":1546,"user_id":1235535,"accept_rate":71,"display_name":"Atul"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1487541986,"creation_date":1487541986,"answer_id":42333473,"question_id":42333311,"body_markdown":"You can use createAlias API of Criteria class and specify join type.\r\nRefer [this][1] documentation for more details.\r\n\r\n\r\n  [1]: https://docs.jboss.org/hibernate/orm/3.5/api/org/hibernate/Criteria.html#createAlias(java.lang.String,%20java.lang.String,%20int)\r\n\r\n        Criteria createAlias(String associationPath,\r\n                     String alias,\r\n                     int joinType)\r\n                     throws HibernateException\r\n    Join an association using the specified join-type, assigning an alias to the joined association.\r\n    The joinType is expected to be one of CriteriaSpecification.INNER_JOIN (the default), CriteriaSpecification.FULL_JOIN, or CriteriaSpecification.LEFT_JOIN.","title":"How can I left join a subquery in hibernate with criteria?","body":"<p>You can use createAlias API of Criteria class and specify join type.\nRefer <a href=\"https://docs.jboss.org/hibernate/orm/3.5/api/org/hibernate/Criteria.html#createAlias(java.lang.String,%20java.lang.String,%20int)\" rel=\"nofollow noreferrer\">this</a> documentation for more details.</p>\n\n<pre><code>    Criteria createAlias(String associationPath,\n                 String alias,\n                 int joinType)\n                 throws HibernateException\nJoin an association using the specified join-type, assigning an alias to the joined association.\nThe joinType is expected to be one of CriteriaSpecification.INNER_JOIN (the default), CriteriaSpecification.FULL_JOIN, or CriteriaSpecification.LEFT_JOIN.\n</code></pre>\n"},{"tags":[],"owner":{"account_id":11119792,"reputation":2581,"user_id":8163025,"display_name":"saver"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1644456604,"creation_date":1644456604,"answer_id":71058759,"question_id":42333311,"body_markdown":"You can use the following ```Criteria``` method to use subquery in joins.\r\n```\r\npublic Criteria createAlias(String associationPath, String alias, JoinType joinType, Criterion withClause) throws HibernateException;\r\n```\r\nand a ```Criterion``` parameter, which you can create with the ```Subqueries``` factory class, will generate a subquery in the join condition.\r\n\r\nYou will end up with something like this:\r\n```\r\nCriteria criteria = session.createCriteria(Order.class);\r\n\r\nDetachedCriteria productCriteria = DetachedCriteria.forClass(Product.class)\r\n                .setProjection(property(&quot;id&quot;))\r\n                .add(Restrictions.eq(&quot;accountId&quot;, 3));\r\n\r\ncriteria.createAlias(&quot;product&quot;, &quot;p&quot;, JoinType.LEFT_OUTER_JOIN, Subqueries.propertyEq(&quot;id&quot;, productCriteria));\r\n...\r\n```\r\n\r\n","title":"How can I left join a subquery in hibernate with criteria?","body":"<p>You can use the following <code>Criteria</code> method to use subquery in joins.</p>\n<pre><code>public Criteria createAlias(String associationPath, String alias, JoinType joinType, Criterion withClause) throws HibernateException;\n</code></pre>\n<p>and a <code>Criterion</code> parameter, which you can create with the <code>Subqueries</code> factory class, will generate a subquery in the join condition.</p>\n<p>You will end up with something like this:</p>\n<pre><code>Criteria criteria = session.createCriteria(Order.class);\n\nDetachedCriteria productCriteria = DetachedCriteria.forClass(Product.class)\n                .setProjection(property(&quot;id&quot;))\n                .add(Restrictions.eq(&quot;accountId&quot;, 3));\n\ncriteria.createAlias(&quot;product&quot;, &quot;p&quot;, JoinType.LEFT_OUTER_JOIN, Subqueries.propertyEq(&quot;id&quot;, productCriteria));\n...\n</code></pre>\n"}],"owner":{"account_id":2023688,"reputation":536,"user_id":1809290,"accept_rate":69,"display_name":"Jakob"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2123,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"answer_count":2,"score":4,"last_activity_date":1644456604,"creation_date":1487540866,"question_id":42333311,"body_markdown":"I want to be able to left join a subquery in hibernate with criteria.\r\n\r\nHere is sample query:\r\n\r\n    Select * From Order o\r\n    Left Join (Select * From Product p Where p.accountId = 3) p\r\n    On p.id = o.productId\r\n    Where (p.category is not null and p.category = &#39;clothes&#39;) or \r\n    (p.category is null and o.category = &#39;clothes&#39;)\r\n\r\nNote this is a sample query, mine is more complex and I need to be able to left join a subquery.\r\n\r\nHow could you generate this query with the hibernate criteria syntax?\r\n---\r\nI would like to do something similar to this:\r\n\r\n    Session session = sessionFactory.getCurrentSession();\r\n    Criteria criteria = session.createCriteria(Order.class);\r\n\r\n    DetachedCriteria productCriteria = DetachedCriteria.forClass(Product.class);\r\n    productCriteria.add(Restrictions.eq(&quot;accountId&quot;, 3));\r\n\r\n    criteria.createAlias(&quot;productCriteria&quot;, &quot;p&quot;, JoinType.LEFT_OUTER_JOIN, productCriteria);\r\n\r\n    criteria.add(Restrictions.or(\r\n            Restrictions.and(Restrictions.isNotNull(&quot;p.category&quot;), Restrictions.eq(&quot;p.category&quot;, &quot;clothes&quot;)),\r\n       Restrictions.and(Restrictions.isNull(&quot;p.category&quot;), Restrictions.eq(&quot;category&quot;, &quot;clothes&quot;))\r\n    ));\r\n\r\n    List list = criteria.list();\r\n\r\nEdit\r\n---\r\nIn my real problem the subquery consists of two tables.\r\n","title":"How can I left join a subquery in hibernate with criteria?","body":"<p>I want to be able to left join a subquery in hibernate with criteria.</p>\n\n<p>Here is sample query:</p>\n\n<pre><code>Select * From Order o\nLeft Join (Select * From Product p Where p.accountId = 3) p\nOn p.id = o.productId\nWhere (p.category is not null and p.category = 'clothes') or \n(p.category is null and o.category = 'clothes')\n</code></pre>\n\n<p>Note this is a sample query, mine is more complex and I need to be able to left join a subquery.</p>\n\n<h2>How could you generate this query with the hibernate criteria syntax?</h2>\n\n<p>I would like to do something similar to this:</p>\n\n<pre><code>Session session = sessionFactory.getCurrentSession();\nCriteria criteria = session.createCriteria(Order.class);\n\nDetachedCriteria productCriteria = DetachedCriteria.forClass(Product.class);\nproductCriteria.add(Restrictions.eq(\"accountId\", 3));\n\ncriteria.createAlias(\"productCriteria\", \"p\", JoinType.LEFT_OUTER_JOIN, productCriteria);\n\ncriteria.add(Restrictions.or(\n        Restrictions.and(Restrictions.isNotNull(\"p.category\"), Restrictions.eq(\"p.category\", \"clothes\")),\n   Restrictions.and(Restrictions.isNull(\"p.category\"), Restrictions.eq(\"category\", \"clothes\"))\n));\n\nList list = criteria.list();\n</code></pre>\n\n<h2>Edit</h2>\n\n<p>In my real problem the subquery consists of two tables.</p>\n"},{"tags":["java","opencv","libjpeg"],"answers":[{"tags":[],"owner":{"account_id":15881354,"reputation":11,"user_id":11459027,"display_name":"Wojciech D"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1644455232,"creation_date":1644455232,"answer_id":71058644,"question_id":71049854,"body_markdown":"I managed to build and use the opencv on Ubuntu 20.04.03 LTS, so it seems like PopOS or Ubuntu 21.10 has something to do with the issue. For now I installed Ubuntu and everything works fine.","title":"OpenCV java libjpeg.so.8: cannot open shared object file: No such file or directory","body":"<p>I managed to build and use the opencv on Ubuntu 20.04.03 LTS, so it seems like PopOS or Ubuntu 21.10 has something to do with the issue. For now I installed Ubuntu and everything works fine.</p>\n"}],"owner":{"account_id":15881354,"reputation":11,"user_id":11459027,"display_name":"Wojciech D"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":600,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1644455232,"creation_date":1644410629,"question_id":71049854,"body_markdown":"I have built the OpenCV 4.5.5 package with contrib modules using instructions from the OpenCV website. Everything went well, except now when I&#39;m trying to load the OpenCV libraries in my java app i get the following error:\r\n\r\n    Exception in thread &quot;main&quot; java.lang.UnsatisfiedLinkError: /home/wojciech/Downloads/opencv-4.5.5/build/lib/libopencv_java455.so: libjpeg.so.8: cannot open shared object file: No such file or directory\r\n\r\nThis is the line of code that causes the issue:\r\n\r\n    System.loadLibrary(Core.NATIVE_LIBRARY_NAME);\r\nI have of course set VM options in IntelliJ to:\r\n\r\n   -Djava.library.path=/home/wojciech/Downloads/opencv-4.5.5/build/lib\r\n\r\nAnd here is how i&#39;m loading the library in gradle:\r\n\r\n    dependencies {\r\n\r\n    testImplementation(&quot;org.junit.jupiter:junit-jupiter-api:${junitVersion}&quot;)\r\n    testRuntimeOnly(&quot;org.junit.jupiter:junit-jupiter-engine:${junitVersion}&quot;)\r\n    implementation files(&#39;/home/wojciech/Downloads/opencv-4.5.5/build/bin/opencv-455.jar&#39;)\r\n    }\r\n\r\n\r\nI have libjpeg.so.8 installed on my system, I have also tried copying it to the lib folder of OpenCV but it didn&#39;t help. I am really stuck. My os is PopOS 21.10","title":"OpenCV java libjpeg.so.8: cannot open shared object file: No such file or directory","body":"<p>I have built the OpenCV 4.5.5 package with contrib modules using instructions from the OpenCV website. Everything went well, except now when I'm trying to load the OpenCV libraries in my java app i get the following error:</p>\n<pre><code>Exception in thread &quot;main&quot; java.lang.UnsatisfiedLinkError: /home/wojciech/Downloads/opencv-4.5.5/build/lib/libopencv_java455.so: libjpeg.so.8: cannot open shared object file: No such file or directory\n</code></pre>\n<p>This is the line of code that causes the issue:</p>\n<pre><code>System.loadLibrary(Core.NATIVE_LIBRARY_NAME);\n</code></pre>\n<p>I have of course set VM options in IntelliJ to:</p>\n<p>-Djava.library.path=/home/wojciech/Downloads/opencv-4.5.5/build/lib</p>\n<p>And here is how i'm loading the library in gradle:</p>\n<pre><code>dependencies {\n\ntestImplementation(&quot;org.junit.jupiter:junit-jupiter-api:${junitVersion}&quot;)\ntestRuntimeOnly(&quot;org.junit.jupiter:junit-jupiter-engine:${junitVersion}&quot;)\nimplementation files('/home/wojciech/Downloads/opencv-4.5.5/build/bin/opencv-455.jar')\n}\n</code></pre>\n<p>I have libjpeg.so.8 installed on my system, I have also tried copying it to the lib folder of OpenCV but it didn't help. I am really stuck. My os is PopOS 21.10</p>\n"},{"tags":["java","recursion","stack"],"answers":[{"tags":[],"owner":{"account_id":17922454,"reputation":99,"user_id":13021900,"display_name":"Maickeen"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1644455002,"creation_date":1644455002,"answer_id":71058616,"question_id":71058487,"body_markdown":"You aren&#39;t verifying **K** after removing a element, so if you just removed a element with `K = 1`, then you should stop.\r\n\r\n    public static int removeEvenNumbers(Stack&lt;Integer&gt; stack, int k) {\r\n        if (k &lt;= 0 || stack.empty()) {\r\n            return 0;\r\n        }\r\n        if (stack.peek() % 2 == 0) {\r\n            stack.pop();\r\n            return k &gt; 1 ? removeEvenNumbers(stack, k - 1) : 1;\r\n        } else {\r\n            int removed = stack.pop();\r\n            int returns = removeEvenNumbers(stack, k);\r\n            stack.push(removed);\r\n            return returns;\r\n        }\r\n    }","title":"Remove Even numbers from stack up to int k","body":"<p>You aren't verifying <strong>K</strong> after removing a element, so if you just removed a element with <code>K = 1</code>, then you should stop.</p>\n<pre><code>public static int removeEvenNumbers(Stack&lt;Integer&gt; stack, int k) {\n    if (k &lt;= 0 || stack.empty()) {\n        return 0;\n    }\n    if (stack.peek() % 2 == 0) {\n        stack.pop();\n        return k &gt; 1 ? removeEvenNumbers(stack, k - 1) : 1;\n    } else {\n        int removed = stack.pop();\n        int returns = removeEvenNumbers(stack, k);\n        stack.push(removed);\n        return returns;\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":24041169,"reputation":33,"user_id":18020806,"display_name":"carrie brown"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":150,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"accepted_answer_id":71058616,"answer_count":1,"score":-1,"last_activity_date":1644455002,"creation_date":1644453338,"question_id":71058487,"body_markdown":"I&#39;m trying to write a recursive function that removes the first k even numbers from the stack. If there are less than k even elements in the stack, just remove all even elements by not using any loops or data structures other than the stack passed in as a parameter. I have this but I can&#39;t figure out how to incorporate k correctly\r\n\r\n\tpublic static int removeEvenNumbers(Stack&lt;Integer&gt; stack, int k) {\r\n\t\tif (k &lt;= 0 || stack.empty()) {\r\n\t\t\treturn 0;\r\n\t\t}\r\n\t\tif (stack.peek() % 2 == 0) {\r\n\t\t\tstack.pop();\r\n\t\t\treturn 1 + removeEvenNumbers(stack, k - 1);\r\n\t\t} else {\r\n\t\t\tint removed = stack.pop();\r\n\t\t\tint returns = removeEvenNumbers(stack, k);\r\n\t\t\tstack.push(removed);\r\n\t\t\treturn returns;\r\n\t\t}\r\n\t}","title":"Remove Even numbers from stack up to int k","body":"<p>I'm trying to write a recursive function that removes the first k even numbers from the stack. If there are less than k even elements in the stack, just remove all even elements by not using any loops or data structures other than the stack passed in as a parameter. I have this but I can't figure out how to incorporate k correctly</p>\n<pre><code>public static int removeEvenNumbers(Stack&lt;Integer&gt; stack, int k) {\n    if (k &lt;= 0 || stack.empty()) {\n        return 0;\n    }\n    if (stack.peek() % 2 == 0) {\n        stack.pop();\n        return 1 + removeEvenNumbers(stack, k - 1);\n    } else {\n        int removed = stack.pop();\n        int returns = removeEvenNumbers(stack, k);\n        stack.push(removed);\n        return returns;\n    }\n}\n</code></pre>\n"},{"tags":["java","spring"],"comments":[{"owner":{"account_id":1082858,"reputation":104688,"user_id":1079354,"accept_rate":93,"display_name":"Makoto"},"score":0,"creation_date":1464371641,"post_id":37489594,"comment_id":62475539,"body_markdown":"Out of morbid curiosity, what happens if you change the scope to singleton?","body":"Out of morbid curiosity, what happens if you change the scope to singleton?"},{"owner":{"account_id":2076676,"reputation":12739,"user_id":1849837,"accept_rate":88,"display_name":"Bartosz Bilicki"},"score":0,"creation_date":1464371711,"post_id":37489594,"comment_id":62475563,"body_markdown":"isnt democlassBean autowired by or created into InitHelloWorld?\nIt is easiest to check by debuging into constructor. In the debuger, you will see stack trace, which should give a hint why bean is constructed.","body":"isnt democlassBean autowired by or created into InitHelloWorld? It is easiest to check by debuging into constructor. In the debuger, you will see stack trace, which should give a hint why bean is constructed."},{"owner":{"display_name":"user6360619"},"score":0,"creation_date":1464371740,"post_id":37489594,"comment_id":62475583,"body_markdown":"@Makoto Constructor called once. But also it is called earlier than the Contextstarted event, is that right?","body":"@Makoto Constructor called once. But also it is called earlier than the Contextstarted event, is that right?"},{"owner":{"account_id":1082858,"reputation":104688,"user_id":1079354,"accept_rate":93,"display_name":"Makoto"},"score":0,"creation_date":1464371786,"post_id":37489594,"comment_id":62475615,"body_markdown":"So my immediate *hunch* here is that it&#39;s being invoked multiple times because it&#39;s eligible to be; if you wired that bean as a singleton I would only ever expect it to be instantiated once.","body":"So my immediate <i>hunch</i> here is that it&#39;s being invoked multiple times because it&#39;s eligible to be; if you wired that bean as a singleton I would only ever expect it to be instantiated once."},{"owner":{"display_name":"user6360619"},"score":0,"creation_date":1464371804,"post_id":37489594,"comment_id":62475632,"body_markdown":"@BartoszBilicki No No, here is code for inithelloworld, http://codepad.org/OZAgT5M3, it does nothing basically, just pringint","body":"@BartoszBilicki No No, here is code for inithelloworld, <a href=\"http://codepad.org/OZAgT5M3\" rel=\"nofollow noreferrer\">codepad.org/OZAgT5M3</a>, it does nothing basically, just pringint"},{"owner":{"display_name":"user6360619"},"score":0,"creation_date":1464371852,"post_id":37489594,"comment_id":62475651,"body_markdown":"@Makoto Yeah but come on I requested only single instance of it in main......","body":"@Makoto Yeah but come on I requested only single instance of it in main......"},{"owner":{"account_id":2076676,"reputation":12739,"user_id":1849837,"accept_rate":88,"display_name":"Bartosz Bilicki"},"score":4,"creation_date":1464371937,"post_id":37489594,"comment_id":62475687,"body_markdown":"I think it is because DemoClass  is ApplicationListener.\nfirst instance is created for listner sake, and another one as bean. what will happen if you remove ApplicationListener from this bean?","body":"I think it is because DemoClass  is ApplicationListener. first instance is created for listner sake, and another one as bean. what will happen if you remove ApplicationListener from this bean?"},{"owner":{"account_id":1082858,"reputation":104688,"user_id":1079354,"accept_rate":93,"display_name":"Makoto"},"score":1,"creation_date":1464371960,"post_id":37489594,"comment_id":62475698,"body_markdown":"You&#39;re misunderstanding IoC:  Spring is managing the bean (so it can instantiate it however many times it feels it&#39;s necessary, or however it&#39;s configured).  You&#39;re asking for whatever Spring can give you for that bean.","body":"You&#39;re misunderstanding IoC:  Spring is managing the bean (so it can instantiate it however many times it feels it&#39;s necessary, or however it&#39;s configured).  You&#39;re asking for whatever Spring can give you for that bean."},{"owner":{"display_name":"user6360619"},"score":0,"creation_date":1464372094,"post_id":37489594,"comment_id":62475759,"body_markdown":"@BartoszBilicki Yes if I remove listener part it gets called once.............so, there is no problem?","body":"@BartoszBilicki Yes if I remove listener part it gets called once.............so, there is no problem?"},{"owner":{"display_name":"user6360619"},"score":0,"creation_date":1464372109,"post_id":37489594,"comment_id":62475768,"body_markdown":"@Makoto If I remove implements listener it gets called once ....","body":"@Makoto If I remove implements listener it gets called once ...."},{"owner":{"display_name":"user6360619"},"score":0,"creation_date":1464372301,"post_id":37489594,"comment_id":62475849,"body_markdown":"@BartoszBilicki  you can even see first call precedes the ContextStartedEvent","body":"@BartoszBilicki  you can even see first call precedes the ContextStartedEvent"},{"owner":{"account_id":3192259,"reputation":117609,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1464431011,"post_id":37489594,"comment_id":62490818,"body_markdown":"Well of course because the bean first needs to be created and initialized before it can handle the event...","body":"Well of course because the bean first needs to be created and initialized before it can handle the event..."}],"answers":[{"tags":[],"owner":{"account_id":2076676,"reputation":12739,"user_id":1849837,"accept_rate":88,"display_name":"Bartosz Bilicki"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1464375705,"creation_date":1464375705,"answer_id":37490621,"question_id":37489594,"body_markdown":"It seems, it is not good idea to have prototype bean to act as ApplicationListener. \r\nCheck http://forum.spring.io/forum/spring-projects/container/35965-applicationlistener-interface-makes-beans-eagerly-instantiated\r\nfor details.\r\n\r\nYou can make it work, but with some exta steps are required (described in lined post). Note that linked post is somewhat old (year 2007) and it is likely that some of the implementation details covered there are not valid anymore.\r\n\r\nIf you really care about number of instances being created- what about creating two classes- one as prototype, and another (singlelton) that acts as ApplicationListener?","title":"Two objects created in spring why?","body":"<p>It seems, it is not good idea to have prototype bean to act as ApplicationListener. \nCheck <a href=\"http://forum.spring.io/forum/spring-projects/container/35965-applicationlistener-interface-makes-beans-eagerly-instantiated\" rel=\"nofollow\">http://forum.spring.io/forum/spring-projects/container/35965-applicationlistener-interface-makes-beans-eagerly-instantiated</a>\nfor details.</p>\n\n<p>You can make it work, but with some exta steps are required (described in lined post). Note that linked post is somewhat old (year 2007) and it is likely that some of the implementation details covered there are not valid anymore.</p>\n\n<p>If you really care about number of instances being created- what about creating two classes- one as prototype, and another (singlelton) that acts as ApplicationListener?</p>\n"}],"owner":{"display_name":"user6360619"},"comment_count":12,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":106,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1644454447,"creation_date":1464371505,"question_id":37489594,"body_markdown":"I am getting familiar with Spring. Strangely code below invokes constructor twice whereas I expected it to be called once. Can someone help?\r\n\r\n    package com.tutorialspoint;\r\n    \r\n    import java.util.List;\r\n    import org.springframework.context.event.ContextStartedEvent;\r\n    import org.springframework.context.ApplicationListener;\r\n    \r\n    public class DemoClass implements ApplicationListener&lt;ContextStartedEvent&gt; {\r\n    \r\n    \tprivate String message;\r\n    \tprivate int nrOfMessages;\r\n    \r\n    \t\r\n    \t\r\n    \tpublic DemoClass(String mes, int nr) {\r\n    \t\tmessage = mes;\r\n    \t\tnrOfMessages = nr;\r\n    \t\tSystem.out.println(&quot;Demo class constructor. Parameters: &quot; + mes + &quot; &quot; + nr);\r\n    \t}\r\n    \r\n    \t// a setter method to set List\r\n    \tpublic void setNrOfMessages(int nr) {\r\n    \t\tthis.nrOfMessages = nr;\r\n    \t}\r\n    \r\n    \t\r\n    \t// Message setter\r\n    \tpublic void setMessage(String message) {\r\n    \t\tthis.message = message;\r\n    \t}\r\n    \t\r\n    \t// prints and returns all the elements of the list.\r\n    \tpublic void dumpContents() {\r\n    \t\t\tSystem.out.println(&quot;Message: &quot; + message + &quot; Nr of messages: &quot; + nrOfMessages);\r\n    \t\t}\r\n    \t\r\n    \tpublic void onApplicationEvent(ContextStartedEvent event) {\r\n    \t      System.out.println(&quot;ContextStartedEvent Received&quot;);\r\n    \t   }\r\n    \t \r\n    \r\n    }\r\n\r\nThe bean and main:\r\n\r\n    package com.tutorialspoint;\r\n    \r\n    import java.io.FileNotFoundException;\r\n    import java.util.List;\r\n    import org.springframework.context.support.AbstractApplicationContext;\r\n    import org.springframework.context.support.ClassPathXmlApplicationContext;\r\n    import org.springframework.context.ConfigurableApplicationContext;\r\n    \r\n    public class MainApp {\r\n    \t \r\n    \r\n    \tpublic static void main(String[] args) {\r\n    \t\t\r\n    \t\tConfigurableApplicationContext  context = new ClassPathXmlApplicationContext(&quot;Beans.xml&quot;);\r\n    \r\n    \t\tcontext.start();\r\n    \t\t\r\n    \t\t// Create an object\r\n    \t\tDemoClass obj = (DemoClass) context.getBean(&quot;democlassBean&quot;);\r\n    \t\t\r\n    \t\t// Dump contents\r\n    \t\tobj.dumpContents();\r\n\r\n    \t}\r\n    }\r\n\r\nbean\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    \r\n    &lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;\r\n        xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n        xmlns:context=&quot;http://www.springframework.org/schema/context&quot;\r\n        xsi:schemaLocation=&quot;http://www.springframework.org/schema/beans\r\n        http://www.springframework.org/schema/beans/spring-beans-3.0.xsd\r\n        http://www.springframework.org/schema/context\r\n        http://www.springframework.org/schema/context/spring-context-3.0.xsd&quot;&gt;\r\n        \r\n   \r\n       &lt;bean id=&quot;democlassBean&quot; class=&quot;com.tutorialspoint.DemoClass&quot;\r\n       \tscope=&quot;prototype&quot;&gt;\r\n          &lt;constructor-arg value=&quot;Hello world beans.&quot;/&gt;\r\n          &lt;constructor-arg value=&quot;300&quot;/&gt;  \t\t\r\n       &lt;/bean&gt;\r\n       \r\n       &lt;bean class=&quot;com.tutorialspoint.InitHelloWorld&quot;&gt;&lt;/bean&gt;\r\n      \r\n    \r\n    &lt;/beans&gt;\r\n\r\nThis is the output:\r\n\r\n    Demo class constructor. Parameters: Hello world beans. 300\r\n    BeforeInitialization : democlassBean\r\n    AfterInitialization : democlassBean\r\n    ContextStartedEvent Received \r\n    Demo class constructor. Parameters: Hello world beans. 300    \r\n    BeforeInitialization : democlassBean\r\n    AfterInitialization : democlassBean\r\n    Message: Hello world beans. Nr of messages: 300\r\n\r\nYou can see constructor is being called **twice** - why???\r\n\r\n\r\n---\r\n\r\nHere is also code for initHelloWorld:\r\n\r\n    package com.tutorialspoint;\r\n    \r\n    import org.springframework.beans.factory.config.BeanPostProcessor;\r\n    import org.springframework.beans.BeansException;\r\n    \r\n    public class InitHelloWorld implements BeanPostProcessor {\r\n     \r\n       public Object postProcessBeforeInitialization(Object bean, String beanName) throws BeansException {\r\n          System.out.println(&quot;BeforeInitialization : &quot; + beanName);\r\n          return bean;  // you can return any other object as well\r\n       }\r\n    \r\n       public Object postProcessAfterInitialization(Object bean, String beanName) throws BeansException {\r\n          System.out.println(&quot;AfterInitialization : &quot; + beanName);\r\n          return bean;  // you can return any other object as well\r\n       }\r\n    \r\n    }","title":"Two objects created in spring why?","body":"<p>I am getting familiar with Spring. Strangely code below invokes constructor twice whereas I expected it to be called once. Can someone help?</p>\n\n<pre><code>package com.tutorialspoint;\n\nimport java.util.List;\nimport org.springframework.context.event.ContextStartedEvent;\nimport org.springframework.context.ApplicationListener;\n\npublic class DemoClass implements ApplicationListener&lt;ContextStartedEvent&gt; {\n\n    private String message;\n    private int nrOfMessages;\n\n\n\n    public DemoClass(String mes, int nr) {\n        message = mes;\n        nrOfMessages = nr;\n        System.out.println(\"Demo class constructor. Parameters: \" + mes + \" \" + nr);\n    }\n\n    // a setter method to set List\n    public void setNrOfMessages(int nr) {\n        this.nrOfMessages = nr;\n    }\n\n\n    // Message setter\n    public void setMessage(String message) {\n        this.message = message;\n    }\n\n    // prints and returns all the elements of the list.\n    public void dumpContents() {\n            System.out.println(\"Message: \" + message + \" Nr of messages: \" + nrOfMessages);\n        }\n\n    public void onApplicationEvent(ContextStartedEvent event) {\n          System.out.println(\"ContextStartedEvent Received\");\n       }\n\n\n}\n</code></pre>\n\n<p>The bean and main:</p>\n\n<pre><code>package com.tutorialspoint;\n\nimport java.io.FileNotFoundException;\nimport java.util.List;\nimport org.springframework.context.support.AbstractApplicationContext;\nimport org.springframework.context.support.ClassPathXmlApplicationContext;\nimport org.springframework.context.ConfigurableApplicationContext;\n\npublic class MainApp {\n\n\n    public static void main(String[] args) {\n\n        ConfigurableApplicationContext  context = new ClassPathXmlApplicationContext(\"Beans.xml\");\n\n        context.start();\n\n        // Create an object\n        DemoClass obj = (DemoClass) context.getBean(\"democlassBean\");\n\n        // Dump contents\n        obj.dumpContents();\n\n    }\n}\n</code></pre>\n\n<p>bean</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n\n&lt;beans xmlns=\"http://www.springframework.org/schema/beans\"\n    xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n    xmlns:context=\"http://www.springframework.org/schema/context\"\n    xsi:schemaLocation=\"http://www.springframework.org/schema/beans\n    http://www.springframework.org/schema/beans/spring-beans-3.0.xsd\n    http://www.springframework.org/schema/context\n    http://www.springframework.org/schema/context/spring-context-3.0.xsd\"&gt;\n\n\n   &lt;bean id=\"democlassBean\" class=\"com.tutorialspoint.DemoClass\"\n    scope=\"prototype\"&gt;\n      &lt;constructor-arg value=\"Hello world beans.\"/&gt;\n      &lt;constructor-arg value=\"300\"/&gt;        \n   &lt;/bean&gt;\n\n   &lt;bean class=\"com.tutorialspoint.InitHelloWorld\"&gt;&lt;/bean&gt;\n\n\n&lt;/beans&gt;\n</code></pre>\n\n<p>This is the output:</p>\n\n<pre><code>Demo class constructor. Parameters: Hello world beans. 300\nBeforeInitialization : democlassBean\nAfterInitialization : democlassBean\nContextStartedEvent Received \nDemo class constructor. Parameters: Hello world beans. 300    \nBeforeInitialization : democlassBean\nAfterInitialization : democlassBean\nMessage: Hello world beans. Nr of messages: 300\n</code></pre>\n\n<p>You can see constructor is being called <strong>twice</strong> - why???</p>\n\n<hr>\n\n<p>Here is also code for initHelloWorld:</p>\n\n<pre><code>package com.tutorialspoint;\n\nimport org.springframework.beans.factory.config.BeanPostProcessor;\nimport org.springframework.beans.BeansException;\n\npublic class InitHelloWorld implements BeanPostProcessor {\n\n   public Object postProcessBeforeInitialization(Object bean, String beanName) throws BeansException {\n      System.out.println(\"BeforeInitialization : \" + beanName);\n      return bean;  // you can return any other object as well\n   }\n\n   public Object postProcessAfterInitialization(Object bean, String beanName) throws BeansException {\n      System.out.println(\"AfterInitialization : \" + beanName);\n      return bean;  // you can return any other object as well\n   }\n\n}\n</code></pre>\n"},{"tags":["java","arrays","swing","jbutton","mouselistener"],"answers":[{"tags":[],"owner":{"account_id":247613,"reputation":284090,"user_id":522444,"accept_rate":100,"display_name":"Hovercraft Full Of Eels"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1395506366,"creation_date":1395505525,"answer_id":22580258,"question_id":22580243,"body_markdown":"1. Never add a MouseListener on a JButton for that purpose. Use an ActionListener instead.\r\n2. Why not create an array or ArrayList of JButton and then simply iterate through the list to find the proper one?\r\n\r\ni.e.,\r\n\r\n    private JButton[][] buttonGrid = new JButton[ROWS][COLS];\r\n    \r\nElsewhere you will need to fill the grid with viable JButton objects and place those JButtons into your GUI.\r\n\r\nThen later in program use a nested for loop iterating through the grid comparing the grid button with the `getSource()` JButton.\r\n\r\ni.e. in the JButton&#39;s ActionListener\r\n\r\n    public void actionPerformed(ActionEvent e) {\r\n      for (int row = 0; row &lt; ROWS; row++) {\r\n        for (int col = 0; col &lt; COLS; col++) {\r\n           if buttonGrid[row][col] == e.getSource();\r\n           // here you have your row and column\r\n        }\r\n      }\r\n    }\r\n\r\n____________________\r\n**Edit**  \r\nYou ask:\r\n&gt; 1. why?\r\n\r\nBecause it won&#39;t work correctly in many situations. ActionListeners have been built to work specifically with JButtons and JMenuItems and have mechanisms that make this function work well l and easily. For example, say you decide to have a JButton that is only enabled once the user has filled two JTextFields, and you use the JButton&#39;s `setEnabled(boolean enabled)` method to do this, disabling the JButton will not stop the MouseListener from working, but it will stop the ActionListener.\r\n\r\n___________________\r\n**Edit 2**  \r\n\r\nFor example,\r\n\r\n    import java.awt.GridLayout;\r\n    import java.awt.event.ActionEvent;\r\n    import java.awt.event.ActionListener;\r\n    import javax.swing.*;\r\n    \r\n    public class ButtonGridEg extends JPanel {\r\n       private static final int ROWS = 8;\r\n       private static final int COLS = ROWS;\r\n       private static final int GAP = 5;\r\n       private JButton[][] buttonGrid = new JButton[ROWS][COLS];\r\n    \r\n       public ButtonGridEg() {\r\n          setLayout(new GridLayout(ROWS, COLS, GAP, GAP));\r\n          \r\n          ActionListener buttonListener = new ActionListener() {\r\n             \r\n             @Override\r\n             public void actionPerformed(ActionEvent evt) {\r\n                JButton selectedBtn = (JButton) evt.getSource();\r\n                for (int row = 0; row &lt; buttonGrid.length; row++) {\r\n                   for (int col = 0; col &lt; buttonGrid[row].length; col++) {\r\n                      if (buttonGrid[row][col] == selectedBtn) {\r\n                         System.out.printf(&quot;Selected row and column: %d %d%n&quot;, row, col);\r\n                      }\r\n                   }\r\n                }\r\n             }\r\n          };\r\n          for (int row = 0; row &lt; buttonGrid.length; row++) {\r\n             for (int col = 0; col &lt; buttonGrid[row].length; col++) {\r\n                String text = String.format(&quot;Button [%d, %d]&quot;, row, col);\r\n                buttonGrid[row][col] = new JButton(text);\r\n                buttonGrid[row][col].addActionListener(buttonListener);\r\n                add(buttonGrid[row][col]);\r\n             }\r\n          }\r\n       }\r\n    \r\n       private static void createAndShowGui() {\r\n          ButtonGridEg mainPanel = new ButtonGridEg();\r\n    \r\n          JFrame frame = new JFrame(&quot;ButtonGridEg&quot;);\r\n          frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\r\n          frame.getContentPane().add(mainPanel);\r\n          frame.pack();\r\n          frame.setLocationByPlatform(true);\r\n          frame.setVisible(true);\r\n       }\r\n    \r\n       public static void main(String[] args) {\r\n          SwingUtilities.invokeLater(new Runnable() {\r\n             public void run() {\r\n                createAndShowGui();\r\n             }\r\n          });\r\n       }\r\n    }","title":"get position of the button on gridlayout","body":"<ol>\n<li>Never add a MouseListener on a JButton for that purpose. Use an ActionListener instead.</li>\n<li>Why not create an array or ArrayList of JButton and then simply iterate through the list to find the proper one?</li>\n</ol>\n\n<p>i.e.,</p>\n\n<pre><code>private JButton[][] buttonGrid = new JButton[ROWS][COLS];\n</code></pre>\n\n<p>Elsewhere you will need to fill the grid with viable JButton objects and place those JButtons into your GUI.</p>\n\n<p>Then later in program use a nested for loop iterating through the grid comparing the grid button with the <code>getSource()</code> JButton.</p>\n\n<p>i.e. in the JButton's ActionListener</p>\n\n<pre><code>public void actionPerformed(ActionEvent e) {\n  for (int row = 0; row &lt; ROWS; row++) {\n    for (int col = 0; col &lt; COLS; col++) {\n       if buttonGrid[row][col] == e.getSource();\n       // here you have your row and column\n    }\n  }\n}\n</code></pre>\n\n<hr>\n\n<p><strong>Edit</strong><br>\nYou ask:</p>\n\n<blockquote>\n  <ol>\n  <li>why?</li>\n  </ol>\n</blockquote>\n\n<p>Because it won't work correctly in many situations. ActionListeners have been built to work specifically with JButtons and JMenuItems and have mechanisms that make this function work well l and easily. For example, say you decide to have a JButton that is only enabled once the user has filled two JTextFields, and you use the JButton's <code>setEnabled(boolean enabled)</code> method to do this, disabling the JButton will not stop the MouseListener from working, but it will stop the ActionListener.</p>\n\n<hr>\n\n<p><strong>Edit 2</strong>  </p>\n\n<p>For example,</p>\n\n<pre><code>import java.awt.GridLayout;\nimport java.awt.event.ActionEvent;\nimport java.awt.event.ActionListener;\nimport javax.swing.*;\n\npublic class ButtonGridEg extends JPanel {\n   private static final int ROWS = 8;\n   private static final int COLS = ROWS;\n   private static final int GAP = 5;\n   private JButton[][] buttonGrid = new JButton[ROWS][COLS];\n\n   public ButtonGridEg() {\n      setLayout(new GridLayout(ROWS, COLS, GAP, GAP));\n\n      ActionListener buttonListener = new ActionListener() {\n\n         @Override\n         public void actionPerformed(ActionEvent evt) {\n            JButton selectedBtn = (JButton) evt.getSource();\n            for (int row = 0; row &lt; buttonGrid.length; row++) {\n               for (int col = 0; col &lt; buttonGrid[row].length; col++) {\n                  if (buttonGrid[row][col] == selectedBtn) {\n                     System.out.printf(\"Selected row and column: %d %d%n\", row, col);\n                  }\n               }\n            }\n         }\n      };\n      for (int row = 0; row &lt; buttonGrid.length; row++) {\n         for (int col = 0; col &lt; buttonGrid[row].length; col++) {\n            String text = String.format(\"Button [%d, %d]\", row, col);\n            buttonGrid[row][col] = new JButton(text);\n            buttonGrid[row][col].addActionListener(buttonListener);\n            add(buttonGrid[row][col]);\n         }\n      }\n   }\n\n   private static void createAndShowGui() {\n      ButtonGridEg mainPanel = new ButtonGridEg();\n\n      JFrame frame = new JFrame(\"ButtonGridEg\");\n      frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\n      frame.getContentPane().add(mainPanel);\n      frame.pack();\n      frame.setLocationByPlatform(true);\n      frame.setVisible(true);\n   }\n\n   public static void main(String[] args) {\n      SwingUtilities.invokeLater(new Runnable() {\n         public void run() {\n            createAndShowGui();\n         }\n      });\n   }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3093821,"reputation":53931,"user_id":3182664,"accept_rate":55,"display_name":"Marco13"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1395505784,"creation_date":1395505784,"answer_id":22580309,"question_id":22580243,"body_markdown":"In this case, you don&#39;t even have to search for the indices, because you know them when the button is created:\r\n\r\n    for (int i = 0; i &lt; puzzle.getSize(); i++) {\r\n        int k = puzzle.getListItem(i);\r\n        if (k == puzzle.getEmptyFlag())\r\n            controls.add(new JLabel(&quot;&quot;));\r\n        else {\r\n            JButton jb = new JButton(String.valueOf(k));\r\n\r\n            final int rowIndex = i / size;\r\n            final int columnIndex = i % size;\r\n\r\n            // Using an ActionListener, as Hovercraft Full Of Eels already told you:\r\n            jb.addActionListener(new ActionListener() {\r\n\r\n                @Override\r\n                public void actionPerformed(ActionEvent e) {\r\n                    System.out.println(&quot;rowIndex &quot;+rowIndex+&quot; columnIndex &quot;+columnIndex);\r\n                }\r\n\r\n            });\r\n            controls.add(jb);\r\n        }\r\n    }\r\n\r\n\r\n","title":"get position of the button on gridlayout","body":"<p>In this case, you don't even have to search for the indices, because you know them when the button is created:</p>\n\n<pre><code>for (int i = 0; i &lt; puzzle.getSize(); i++) {\n    int k = puzzle.getListItem(i);\n    if (k == puzzle.getEmptyFlag())\n        controls.add(new JLabel(\"\"));\n    else {\n        JButton jb = new JButton(String.valueOf(k));\n\n        final int rowIndex = i / size;\n        final int columnIndex = i % size;\n\n        // Using an ActionListener, as Hovercraft Full Of Eels already told you:\n        jb.addActionListener(new ActionListener() {\n\n            @Override\n            public void actionPerformed(ActionEvent e) {\n                System.out.println(\"rowIndex \"+rowIndex+\" columnIndex \"+columnIndex);\n            }\n\n        });\n        controls.add(jb);\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":1537344,"reputation":12765,"user_id":1432980,"accept_rate":73,"display_name":"lapots"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":11390,"favorite_count":0,"down_vote_count":1,"up_vote_count":2,"accepted_answer_id":22580258,"answer_count":2,"score":1,"last_activity_date":1644453755,"creation_date":1395505431,"question_id":22580243,"body_markdown":"How to get position(I mean row and column) of the clicked button with gridlayout? \r\n\r\n    public void init(final Container pane) {\r\n\t\tJPanel controls = new JPanel();\r\n\t\tint size = (int) Math.sqrt(puzzle.getSize() + 1);\r\n\t\tcontrols.setLayout(new GridLayout(size, size));\r\n\t\tfor (int i = 0; i &lt; puzzle.getSize(); i++) {\r\n\t\t\tint k = puzzle.getListItem(i);\r\n\t\t\tif (k == puzzle.getEmptyFlag())\r\n\t\t\t\tcontrols.add(new JLabel(&quot;&quot;));\r\n\t\t\telse {\r\n\t\t\t\tJButton jb = new JButton(String.valueOf(k));\r\n\t\t\t\tjb.addMouseListener(new MouseAdapter() {\r\n\r\n\t\t\t\t\t@Override\r\n\t\t\t\t\tpublic void mouseClicked(MouseEvent e) {\r\n\t\t\t\t\t\t//get row and column\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t});\r\n\t\t\t\tcontrols.add(jb);\r\n\t\t\t}\r\n\t\t}\r\n\t\tpane.add(controls);\r\n\t}\r\n","title":"get position of the button on gridlayout","body":"<p>How to get position(I mean row and column) of the clicked button with gridlayout? </p>\n\n<pre><code>public void init(final Container pane) {\n    JPanel controls = new JPanel();\n    int size = (int) Math.sqrt(puzzle.getSize() + 1);\n    controls.setLayout(new GridLayout(size, size));\n    for (int i = 0; i &lt; puzzle.getSize(); i++) {\n        int k = puzzle.getListItem(i);\n        if (k == puzzle.getEmptyFlag())\n            controls.add(new JLabel(\"\"));\n        else {\n            JButton jb = new JButton(String.valueOf(k));\n            jb.addMouseListener(new MouseAdapter() {\n\n                @Override\n                public void mouseClicked(MouseEvent e) {\n                    //get row and column\n                }\n\n            });\n            controls.add(jb);\n        }\n    }\n    pane.add(controls);\n}\n</code></pre>\n"},{"tags":["java","swing","timer","graphics2d"],"comments":[{"owner":{"account_id":247613,"reputation":284090,"user_id":522444,"accept_rate":100,"display_name":"Hovercraft Full Of Eels"},"score":2,"creation_date":1644450851,"post_id":71058127,"comment_id":125613629,"body_markdown":"I don&#39;t see immediately why things slow, but that is a strange for loop, `for (int count = 1; count &lt;= 1; count++)`, and you are disposing of a Graphics object given by the JVM, which is dangerous to do.","body":"I don&#39;t see immediately why things slow, but that is a strange for loop, <code>for (int count = 1; count &lt;= 1; count++)</code>, and you are disposing of a Graphics object given by the JVM, which is dangerous to do."},{"owner":{"account_id":1689973,"reputation":37280,"user_id":1552534,"display_name":"WJS"},"score":1,"creation_date":1644453091,"post_id":71058127,"comment_id":125614050,"body_markdown":"Completely unrelated question.   Do you realize you can put all those classes in the same file?  Only one should then be `public`.  The one with `static main`.  The others can just be added at the end.","body":"Completely unrelated question.   Do you realize you can put all those classes in the same file?  Only one should then be <code>public</code>.  The one with <code>static main</code>.  The others can just be added at the end."},{"owner":{"account_id":247613,"reputation":284090,"user_id":522444,"accept_rate":100,"display_name":"Hovercraft Full Of Eels"},"score":1,"creation_date":1644453598,"post_id":71058127,"comment_id":125614127,"body_markdown":"Also unrelated, but too many code comments can distract those reading the code, reducing the ability of others to quickly read and understand it. It&#39;s a fine line between helping and hindering.","body":"Also unrelated, but too many code comments can distract those reading the code, reducing the ability of others to quickly read and understand it. It&#39;s a fine line between helping and hindering."},{"owner":{"account_id":1689973,"reputation":37280,"user_id":1552534,"display_name":"WJS"},"score":2,"creation_date":1644455666,"post_id":71058127,"comment_id":125614476,"body_markdown":"Also, check out this.  [should I extend JFrame](https://stackoverflow.com/questions/10442665/extending-a-jframe).  One of those who answered should be somewhat familiar.","body":"Also, check out this.  <a href=\"https://stackoverflow.com/questions/10442665/extending-a-jframe\">should I extend JFrame</a>.  One of those who answered should be somewhat familiar."}],"answers":[{"tags":[],"owner":{"account_id":969721,"reputation":344518,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1644451800,"creation_date":1644451800,"answer_id":71058344,"question_id":71058127,"body_markdown":"Your &quot;core&quot; problem is right here...\r\n\r\n    public void drawStar(GeneralPath path) {\r\n        path.moveTo(starXPoints[0], starYPoints[0]);\r\n        \r\n        for(int i=0; i&lt;10; i++)\r\n           path.lineTo(starXPoints[i], starYPoints[i]);\r\n        \r\n        path.closePath();\r\n    }\r\n\r\nThis gets called each time you re-draw the component, which means, you&#39;re adding new points to the shape, making it infinitely more complex on each paint pass.\r\n\r\nInstead, just create the shape in the constructor...\r\n\r\n    public StarPainter() {\r\n        starDesign.moveTo(starXPoints[0], starYPoints[0]);\r\n\r\n        for (int i = 0; i &lt; 10; i++) {\r\n            starDesign.lineTo(starXPoints[i], starYPoints[i]);\r\n        }\r\n\r\n        starDesign.closePath();\r\n    }\r\n\r\nAs has already been pointed out, you&#39;re disposing of a `Graphics` context which you did not create.\r\n\r\nIf your going to change the transformation of the context, you should always create a copy of your own, for example...\r\n\r\n    public void starActions(Graphics2D g) {\r\n        int startAngle = 360;\r\n        // For Random Color\r\n        SecureRandom random = new SecureRandom();\r\n\r\n        g = (Graphics2D) g.create();\r\n        // rotate around origin and draw stars in random colors\r\n        //for (int count = 1; count &lt;= 1; count++) {\r\n            double angle = startAngle - 90;\r\n            // rotate coordinate system\r\n            g.rotate(angleOfStarRotation * Math.PI / angle); //rotates as per the rotated angle    // \r\n            // set random drawing color\r\n            g.setColor(new Color(random.nextInt(256), random.nextInt(256), random.nextInt(256)));\r\n            // draw filled star\r\n            g.fill(starDesign);\r\n            // dispose the star\r\n            g.dispose();\r\n        //}\r\n    }\r\n\r\n    @Override\r\n    public void paintComponent(Graphics g) {\r\n        super.paintComponent(g);\r\n\r\n        Graphics2D g2d = (Graphics2D) g.create();\r\n        g2d.translate(250, 150);\r\n        starActions(g2d);\r\n        g2d.dispose();\r\n\r\n    }\r\n\r\nAlso, passing a reference of the `JFrame` to the component...\r\n\r\n    public StarGraphics(JFrame frame) {\r\n        \r\n        setPreferredSize(new Dimension(500, 470));\r\n        setBackground(Color.BLACK);\r\n        setLayout(new BorderLayout());\r\n        frame.add(this, BorderLayout.CENTER);\r\n        \r\n        startTimer();\r\n    }\r\n\r\nis a bad idea.  The component has no need for, nor is it its responsibility too, interact with the frame.  You&#39;re just exposing implementation detail unnecessarily.\r\n\r\n# Runnable example\r\n\r\n\r\n    import java.awt.BorderLayout;\r\n    import java.awt.Color;\r\n    import java.awt.Dimension;\r\n    import java.awt.EventQueue;\r\n    import java.awt.Graphics;\r\n    import java.awt.Graphics2D;\r\n    import java.awt.event.ActionEvent;\r\n    import java.awt.event.ActionListener;\r\n    import java.awt.geom.GeneralPath;\r\n    import java.security.SecureRandom;\r\n    import javax.swing.JButton;\r\n    import javax.swing.JFrame;\r\n    import javax.swing.JLabel;\r\n    import javax.swing.JPanel;\r\n    import javax.swing.JSlider;\r\n    import javax.swing.Timer;\r\n    import javax.swing.event.ChangeEvent;\r\n    import javax.swing.event.ChangeListener;\r\n\r\n    public class Main {\r\n\r\n        public static void main(String[] args) {\r\n            new Main();\r\n        }\r\n\r\n        public Main() {\r\n            EventQueue.invokeLater(new Runnable() {\r\n                @Override\r\n                public void run() {\r\n                    MainFrame frame = new MainFrame();\r\n                    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\r\n                    frame.setSize(500, 500);\r\n                    frame.setVisible(true);\r\n                }\r\n            });\r\n        }\r\n\r\n        public class MainFrame extends JFrame {\r\n\r\n            private StarGraphics frameStar;\r\n            private JButton starToggle;\r\n            public JSlider starSpeed;\r\n\r\n            public MainFrame() {\r\n                //      Setting some properties of the frame\r\n                setTitle(&quot;Star Moving with Internal Events&quot;);\r\n                setLayout(new BorderLayout());\r\n\r\n                //      Initializing the panel which has rotating star\r\n                frameStar = new StarPainter();\r\n                add(frameStar);\r\n\r\n                //      Adding the bottom toggle button and slider\r\n                addToggler();\r\n            }\r\n\r\n            //  Getter for the slider value\r\n            public int sliderSpeed() {\r\n                return starSpeed.getValue();\r\n            }\r\n\r\n            //  Adds Button to change the direction of the star\r\n            private void addToggler() {\r\n                //      Adding another jpanel which has layout set to null so i can add button of my size\r\n                JPanel panel = new JPanel();\r\n                panel.setLayout(null);\r\n                panel.setPreferredSize(new Dimension(20, 80));\r\n                panel.setBackground(Color.WHITE);\r\n\r\n                //      Initializing button and its action listener to change star direction\r\n                starToggle = new JButton(&quot;Toggle&quot;);\r\n                starToggle.setBounds(190, 0, 80, 20);\r\n                starToggle.addActionListener(new ActionListener() {\r\n                    @Override\r\n                    public void actionPerformed(ActionEvent e) {\r\n                        if (e.getSource() == starToggle) {\r\n                            frameStar.ChangeDirections();\r\n                        }\r\n                    }\r\n                });\r\n\r\n                //      Adding button to panel\r\n                panel.add(starToggle);\r\n\r\n                //      Adding slider to the panel\r\n                addSlider(panel);\r\n\r\n                //      Adding panel to the main Panel at the bottom\r\n                add(panel, BorderLayout.SOUTH);\r\n            }\r\n\r\n            private void addSlider(JPanel panel) {\r\n                //      Adding Slider and it&#39;s properties\r\n                starSpeed = new JSlider(JSlider.HORIZONTAL, 0, 20, 5);\r\n                starSpeed.setMajorTickSpacing(10);\r\n                starSpeed.setMinorTickSpacing(1);\r\n                starSpeed.setPaintTicks(true);\r\n                starSpeed.setPaintLabels(true);\r\n                starSpeed.setBounds(70, 30, 400, 45);\r\n\r\n                //      Adding Slider-ChangeListener to change the rotation speed of the star\r\n                starSpeed.addChangeListener(new ChangeListener() { // anonymous inner class  \r\n                    // handle change in slider value\r\n                    @Override\r\n                    public void stateChanged(ChangeEvent e) {\r\n                        frameStar.ChangeSpeed(starSpeed.getValue());\r\n                    }\r\n                }\r\n                );\r\n\r\n                //      Adding label besides the slider\r\n                JLabel label = new JLabel(&quot;Speed : &quot;);\r\n                label.setBounds(10, 10, 80, 80);\r\n                panel.add(label);\r\n                panel.add(starSpeed);\r\n            }\r\n        }\r\n\r\n        public class StarGraphics extends JPanel {\r\n\r\n            private boolean toggleDir = false;\r\n            private int speed = 10;\r\n            private Timer timer;\r\n            protected double angleOfStarRotation = 0;\r\n\r\n            public StarGraphics() {\r\n                setPreferredSize(new Dimension(500, 470));\r\n                setBackground(Color.BLACK);\r\n                setLayout(new BorderLayout());\r\n                startTimer();\r\n            }\r\n\r\n            public void startTimer() {\r\n                timer = new Timer(speed, new ActionListener() {\r\n                    public void actionPerformed(ActionEvent e) {\r\n                        //              System.out.println(angleOfStarRotation);\r\n                        if (!toggleDir) //rotates clockwise\r\n                        {\r\n                            angleOfStarRotation = angleOfStarRotation + 1;\r\n                        } else //rotates counterclockwise\r\n                        {\r\n                            angleOfStarRotation = angleOfStarRotation - 1;\r\n                        }\r\n\r\n                        System.out.println(&quot;tick&quot;);\r\n                        //                if (angleOfStarRotation == 360 || angleOfStarRotation == -360)  // If there is a full circle, it will reset the angle to zero\r\n                        //                    angleOfStarRotation = 0;\r\n                        repaint();\r\n                    }\r\n                });\r\n                timer.start();\r\n            }\r\n\r\n            public void ChangeSpeed(int newSpeed) {\r\n                this.speed = newSpeed;\r\n                timer.setDelay(speed);\r\n            }\r\n\r\n            public void ChangeDirections() {\r\n                toggleDir = !toggleDir;\r\n            }\r\n\r\n        }\r\n\r\n        public class StarPainter extends StarGraphics {\r\n\r\n            private int[] starXPoints = {55, 67, 109, 73, 83, 55, 27, 37, 1, 43};\r\n            private int[] starYPoints = {0, 36, 36, 54, 96, 72, 96, 54, 36, 36};\r\n            GeneralPath starDesign = new GeneralPath();\r\n\r\n            public StarPainter() {\r\n                starDesign.moveTo(starXPoints[0], starYPoints[0]);\r\n\r\n                for (int i = 0; i &lt; 10; i++) {\r\n                    starDesign.lineTo(starXPoints[i], starYPoints[i]);\r\n                }\r\n\r\n                starDesign.closePath();\r\n            }\r\n\r\n            public void starActions(Graphics2D g) {\r\n                int startAngle = 360;\r\n                // For Random Color\r\n                SecureRandom random = new SecureRandom();\r\n\r\n                g = (Graphics2D) g.create();\r\n                // rotate around origin and draw stars in random colors\r\n                //for (int count = 1; count &lt;= 1; count++) {\r\n                double angle = startAngle - 90;\r\n                // rotate coordinate system\r\n                g.rotate(angleOfStarRotation * Math.PI / angle); //rotates as per the rotated angle    // \r\n                // set random drawing color\r\n                g.setColor(new Color(random.nextInt(256), random.nextInt(256), random.nextInt(256)));\r\n                // draw filled star\r\n                g.fill(starDesign);\r\n                // dispose the star\r\n                g.dispose();\r\n                //}\r\n            }\r\n\r\n            @Override\r\n            public void paintComponent(Graphics g) {\r\n                super.paintComponent(g);\r\n\r\n                Graphics2D g2d = (Graphics2D) g.create();\r\n                g2d.translate(250, 150);\r\n                starActions(g2d);\r\n                g2d.dispose();\r\n\r\n            }\r\n        }\r\n    }\r\n","title":"Why does the star rotation slows down automatically after some time","body":"<p>Your &quot;core&quot; problem is right here...</p>\n<pre><code>public void drawStar(GeneralPath path) {\n    path.moveTo(starXPoints[0], starYPoints[0]);\n    \n    for(int i=0; i&lt;10; i++)\n       path.lineTo(starXPoints[i], starYPoints[i]);\n    \n    path.closePath();\n}\n</code></pre>\n<p>This gets called each time you re-draw the component, which means, you're adding new points to the shape, making it infinitely more complex on each paint pass.</p>\n<p>Instead, just create the shape in the constructor...</p>\n<pre><code>public StarPainter() {\n    starDesign.moveTo(starXPoints[0], starYPoints[0]);\n\n    for (int i = 0; i &lt; 10; i++) {\n        starDesign.lineTo(starXPoints[i], starYPoints[i]);\n    }\n\n    starDesign.closePath();\n}\n</code></pre>\n<p>As has already been pointed out, you're disposing of a <code>Graphics</code> context which you did not create.</p>\n<p>If your going to change the transformation of the context, you should always create a copy of your own, for example...</p>\n<pre><code>public void starActions(Graphics2D g) {\n    int startAngle = 360;\n    // For Random Color\n    SecureRandom random = new SecureRandom();\n\n    g = (Graphics2D) g.create();\n    // rotate around origin and draw stars in random colors\n    //for (int count = 1; count &lt;= 1; count++) {\n        double angle = startAngle - 90;\n        // rotate coordinate system\n        g.rotate(angleOfStarRotation * Math.PI / angle); //rotates as per the rotated angle    // \n        // set random drawing color\n        g.setColor(new Color(random.nextInt(256), random.nextInt(256), random.nextInt(256)));\n        // draw filled star\n        g.fill(starDesign);\n        // dispose the star\n        g.dispose();\n    //}\n}\n\n@Override\npublic void paintComponent(Graphics g) {\n    super.paintComponent(g);\n\n    Graphics2D g2d = (Graphics2D) g.create();\n    g2d.translate(250, 150);\n    starActions(g2d);\n    g2d.dispose();\n\n}\n</code></pre>\n<p>Also, passing a reference of the <code>JFrame</code> to the component...</p>\n<pre><code>public StarGraphics(JFrame frame) {\n    \n    setPreferredSize(new Dimension(500, 470));\n    setBackground(Color.BLACK);\n    setLayout(new BorderLayout());\n    frame.add(this, BorderLayout.CENTER);\n    \n    startTimer();\n}\n</code></pre>\n<p>is a bad idea.  The component has no need for, nor is it its responsibility too, interact with the frame.  You're just exposing implementation detail unnecessarily.</p>\n<h1>Runnable example</h1>\n<pre><code>import java.awt.BorderLayout;\nimport java.awt.Color;\nimport java.awt.Dimension;\nimport java.awt.EventQueue;\nimport java.awt.Graphics;\nimport java.awt.Graphics2D;\nimport java.awt.event.ActionEvent;\nimport java.awt.event.ActionListener;\nimport java.awt.geom.GeneralPath;\nimport java.security.SecureRandom;\nimport javax.swing.JButton;\nimport javax.swing.JFrame;\nimport javax.swing.JLabel;\nimport javax.swing.JPanel;\nimport javax.swing.JSlider;\nimport javax.swing.Timer;\nimport javax.swing.event.ChangeEvent;\nimport javax.swing.event.ChangeListener;\n\npublic class Main {\n\n    public static void main(String[] args) {\n        new Main();\n    }\n\n    public Main() {\n        EventQueue.invokeLater(new Runnable() {\n            @Override\n            public void run() {\n                MainFrame frame = new MainFrame();\n                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\n                frame.setSize(500, 500);\n                frame.setVisible(true);\n            }\n        });\n    }\n\n    public class MainFrame extends JFrame {\n\n        private StarGraphics frameStar;\n        private JButton starToggle;\n        public JSlider starSpeed;\n\n        public MainFrame() {\n            //      Setting some properties of the frame\n            setTitle(&quot;Star Moving with Internal Events&quot;);\n            setLayout(new BorderLayout());\n\n            //      Initializing the panel which has rotating star\n            frameStar = new StarPainter();\n            add(frameStar);\n\n            //      Adding the bottom toggle button and slider\n            addToggler();\n        }\n\n        //  Getter for the slider value\n        public int sliderSpeed() {\n            return starSpeed.getValue();\n        }\n\n        //  Adds Button to change the direction of the star\n        private void addToggler() {\n            //      Adding another jpanel which has layout set to null so i can add button of my size\n            JPanel panel = new JPanel();\n            panel.setLayout(null);\n            panel.setPreferredSize(new Dimension(20, 80));\n            panel.setBackground(Color.WHITE);\n\n            //      Initializing button and its action listener to change star direction\n            starToggle = new JButton(&quot;Toggle&quot;);\n            starToggle.setBounds(190, 0, 80, 20);\n            starToggle.addActionListener(new ActionListener() {\n                @Override\n                public void actionPerformed(ActionEvent e) {\n                    if (e.getSource() == starToggle) {\n                        frameStar.ChangeDirections();\n                    }\n                }\n            });\n\n            //      Adding button to panel\n            panel.add(starToggle);\n\n            //      Adding slider to the panel\n            addSlider(panel);\n\n            //      Adding panel to the main Panel at the bottom\n            add(panel, BorderLayout.SOUTH);\n        }\n\n        private void addSlider(JPanel panel) {\n            //      Adding Slider and it's properties\n            starSpeed = new JSlider(JSlider.HORIZONTAL, 0, 20, 5);\n            starSpeed.setMajorTickSpacing(10);\n            starSpeed.setMinorTickSpacing(1);\n            starSpeed.setPaintTicks(true);\n            starSpeed.setPaintLabels(true);\n            starSpeed.setBounds(70, 30, 400, 45);\n\n            //      Adding Slider-ChangeListener to change the rotation speed of the star\n            starSpeed.addChangeListener(new ChangeListener() { // anonymous inner class  \n                // handle change in slider value\n                @Override\n                public void stateChanged(ChangeEvent e) {\n                    frameStar.ChangeSpeed(starSpeed.getValue());\n                }\n            }\n            );\n\n            //      Adding label besides the slider\n            JLabel label = new JLabel(&quot;Speed : &quot;);\n            label.setBounds(10, 10, 80, 80);\n            panel.add(label);\n            panel.add(starSpeed);\n        }\n    }\n\n    public class StarGraphics extends JPanel {\n\n        private boolean toggleDir = false;\n        private int speed = 10;\n        private Timer timer;\n        protected double angleOfStarRotation = 0;\n\n        public StarGraphics() {\n            setPreferredSize(new Dimension(500, 470));\n            setBackground(Color.BLACK);\n            setLayout(new BorderLayout());\n            startTimer();\n        }\n\n        public void startTimer() {\n            timer = new Timer(speed, new ActionListener() {\n                public void actionPerformed(ActionEvent e) {\n                    //              System.out.println(angleOfStarRotation);\n                    if (!toggleDir) //rotates clockwise\n                    {\n                        angleOfStarRotation = angleOfStarRotation + 1;\n                    } else //rotates counterclockwise\n                    {\n                        angleOfStarRotation = angleOfStarRotation - 1;\n                    }\n\n                    System.out.println(&quot;tick&quot;);\n                    //                if (angleOfStarRotation == 360 || angleOfStarRotation == -360)  // If there is a full circle, it will reset the angle to zero\n                    //                    angleOfStarRotation = 0;\n                    repaint();\n                }\n            });\n            timer.start();\n        }\n\n        public void ChangeSpeed(int newSpeed) {\n            this.speed = newSpeed;\n            timer.setDelay(speed);\n        }\n\n        public void ChangeDirections() {\n            toggleDir = !toggleDir;\n        }\n\n    }\n\n    public class StarPainter extends StarGraphics {\n\n        private int[] starXPoints = {55, 67, 109, 73, 83, 55, 27, 37, 1, 43};\n        private int[] starYPoints = {0, 36, 36, 54, 96, 72, 96, 54, 36, 36};\n        GeneralPath starDesign = new GeneralPath();\n\n        public StarPainter() {\n            starDesign.moveTo(starXPoints[0], starYPoints[0]);\n\n            for (int i = 0; i &lt; 10; i++) {\n                starDesign.lineTo(starXPoints[i], starYPoints[i]);\n            }\n\n            starDesign.closePath();\n        }\n\n        public void starActions(Graphics2D g) {\n            int startAngle = 360;\n            // For Random Color\n            SecureRandom random = new SecureRandom();\n\n            g = (Graphics2D) g.create();\n            // rotate around origin and draw stars in random colors\n            //for (int count = 1; count &lt;= 1; count++) {\n            double angle = startAngle - 90;\n            // rotate coordinate system\n            g.rotate(angleOfStarRotation * Math.PI / angle); //rotates as per the rotated angle    // \n            // set random drawing color\n            g.setColor(new Color(random.nextInt(256), random.nextInt(256), random.nextInt(256)));\n            // draw filled star\n            g.fill(starDesign);\n            // dispose the star\n            g.dispose();\n            //}\n        }\n\n        @Override\n        public void paintComponent(Graphics g) {\n            super.paintComponent(g);\n\n            Graphics2D g2d = (Graphics2D) g.create();\n            g2d.translate(250, 150);\n            starActions(g2d);\n            g2d.dispose();\n\n        }\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":24169456,"reputation":3,"user_id":18131719,"display_name":"Ravi Trivedi"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":44,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":71058344,"answer_count":1,"score":0,"last_activity_date":1644451800,"creation_date":1644449722,"question_id":71058127,"body_markdown":"I have a program where I have to use internal Timer event to rotate a star in circular motion. There is a button in the frame that changes the direction of the star and a slider which changes the speed of the star rotation. \r\n\r\nThis is my Main Class\r\n```\r\nimport javax.swing.JFrame;\r\n\r\npublic class Main {\r\n\tpublic static void main(String args[]) {\r\n//\t\tMaking an instance of the class that makes the frame\r\n\t\tMainFrame frame = new MainFrame();\r\n\t\tframe.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\r\n\t\tframe.setSize(500, 500);\r\n\t\tframe.setVisible(true);\r\n\t}\r\n}\r\n```\r\nMainFrame Class that makes the frame.\r\n```\r\nimport java.awt.event.ActionEvent;\r\nimport java.awt.event.ActionListener;\r\n\r\nimport java.awt.BorderLayout;\r\nimport java.awt.Color;\r\nimport java.awt.Dimension;\r\n\r\nimport javax.swing.*;\r\nimport javax.swing.event.ChangeEvent;\r\nimport javax.swing.event.ChangeListener;\r\n\r\n\r\n@SuppressWarnings(&quot;serial&quot;)\r\npublic class MainFrame extends JFrame{\r\n\tprivate StarGraphics frameStar;\r\n\tprivate JButton starToggle;\r\n\tpublic JSlider starSpeed;\r\n\t\r\n\t\r\n\tpublic MainFrame() {\r\n//\t\tSetting some properties of the frame\r\n\t\tsetTitle(&quot;Star Moving with Internal Events&quot;);\r\n\t\tsetLayout(new BorderLayout());\r\n\t\t\r\n//\t\tInitializing the panel which has rotating star\r\n\t\tframeStar = new StarPainter(this);\r\n\t\t\r\n//\t\tAdding the bottom toggle button and slider\r\n\t\taddToggler();\t\r\n\t}\r\n\t\r\n//\tGetter for the slider value\r\n\tpublic int sliderSpeed() {\r\n\t\treturn starSpeed.getValue();\r\n\t}\r\n\t\r\n\t\r\n//\tAdds Button to change the direction of the star\r\n\tprivate void addToggler() {\r\n//\t\tAdding another jpanel which has layout set to null so i can add button of my size\r\n\t\tJPanel panel = new JPanel();\r\n\t\tpanel.setLayout(null);\r\n\t\tpanel.setPreferredSize(new Dimension(20,80));\r\n\t\tpanel.setBackground(Color.WHITE);\r\n\t\t\r\n//\t\tInitializing button and its action listener to change star direction\r\n\t\tstarToggle = new JButton(&quot;Toggle&quot;);\r\n\t\tstarToggle.setBounds(190, 0, 80, 20);\r\n\t\tstarToggle.addActionListener(new ActionListener() {\r\n\t\t\t@Override\r\n\t\t\tpublic void actionPerformed(ActionEvent e) {\r\n\t\t\t\tif(e.getSource() == starToggle) {\r\n\t\t\t\t\tframeStar.ChangeDirections();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t\t\r\n//\t\tAdding button to panel\r\n\t\tpanel.add(starToggle);\r\n\t\t\r\n//\t\tAdding slider to the panel\r\n\t\taddSlider(panel);\r\n\t\t\r\n//\t\tAdding panel to the main Panel at the bottom\r\n\t\tadd(panel, BorderLayout.SOUTH);\r\n\t}\r\n\t\r\n\tprivate void addSlider(JPanel panel) {\r\n//\t\tAdding Slider and it&#39;s properties\r\n\t\tstarSpeed = new JSlider(JSlider.HORIZONTAL, 0, 20, 5);\r\n\t\tstarSpeed.setMajorTickSpacing(10);\r\n\t\tstarSpeed.setMinorTickSpacing(1);\r\n\t\tstarSpeed.setPaintTicks(true);\r\n\t\tstarSpeed.setPaintLabels(true);\r\n\t\tstarSpeed.setBounds(70,30,400, 45);\r\n\t\t\r\n//\t\tAdding Slider-ChangeListener to change the rotation speed of the star\r\n\t\tstarSpeed.addChangeListener(new ChangeListener() { // anonymous inner class  \r\n            // handle change in slider value\r\n            @Override\r\n            public void stateChanged(ChangeEvent e) {\r\n            \tframeStar.ChangeSpeed(starSpeed.getValue());\r\n            }\r\n         } \r\n      );\r\n\t\t\r\n//\t\tAdding label besides the slider\r\n\t\tJLabel label = new JLabel(&quot;Speed : &quot;);\r\n\t\tlabel.setBounds(10 , 10, 80, 80);\r\n\t\tpanel.add(label);\r\n\t\tpanel.add(starSpeed);\r\n\t}\r\n}\r\n```\r\nClass to create the panel that has star rotation\r\n```\r\nimport java.awt.BorderLayout;\r\nimport java.awt.Color;\r\nimport java.awt.Dimension;\r\nimport java.awt.event.ActionEvent;\r\nimport java.awt.event.ActionListener;\r\n\r\nimport javax.swing.*;\r\n\r\n@SuppressWarnings(&quot;serial&quot;)\r\npublic class StarGraphics extends JPanel{\r\n\tprivate boolean toggleDir = false;\r\n\tprivate int speed = 10;\r\n\tprivate Timer timer;\r\n\tprotected double angleOfStarRotation = 0;\r\n\t\r\n\tpublic StarGraphics(JFrame frame) {\r\n\t\t\r\n\t\tsetPreferredSize(new Dimension(500, 470));\r\n\t\tsetBackground(Color.BLACK);\r\n\t\tsetLayout(new BorderLayout());\r\n\t\tframe.add(this, BorderLayout.CENTER);\r\n\t\t\r\n\t\tstartTimer();\r\n\t}\r\n\t\r\n\tpublic void startTimer() {\r\n\t\ttimer = new Timer(speed, new ActionListener() {\r\n\t\t\tpublic void actionPerformed(ActionEvent e){\r\n//\t\t\t\tSystem.out.println(angleOfStarRotation);\r\n\t\t\t\tif(!toggleDir)\t//rotates clockwise\r\n\t\t\t\t\tangleOfStarRotation = angleOfStarRotation + 1;\r\n\t\t\t\telse\t\t//rotates counterclockwise\r\n\t\t\t\t\tangleOfStarRotation = angleOfStarRotation - 1;\r\n                  \r\n//                if (angleOfStarRotation == 360 || angleOfStarRotation == -360)  // If there is a full circle, it will reset the angle to zero\r\n//                    angleOfStarRotation = 0;\r\n                  \r\n                repaint();\r\n\t\t\t}});\r\n        timer.start();\r\n\t}\r\n\t\r\n\tpublic void ChangeSpeed(int newSpeed) {\t\r\n\t\tthis.speed = newSpeed;\r\n\t\ttimer.setDelay(speed);\r\n\t}\t\r\n\tpublic void ChangeDirections() {toggleDir = !toggleDir;\t}\r\n\r\n}\r\n\r\n```\r\nAnd a class that paints the star into the panel\r\n```\r\nimport java.awt.Color;\r\nimport java.awt.Graphics;\r\nimport java.awt.Graphics2D;\r\nimport java.awt.geom.GeneralPath;\r\nimport java.security.SecureRandom;\r\n\r\nimport javax.swing.JFrame;\r\n\r\n@SuppressWarnings(&quot;serial&quot;)\r\npublic class StarPainter extends StarGraphics{\r\n\tprivate int[] starXPoints = {55, 67, 109, 73, 83, 55, 27, 37, 1, 43};\r\n    private int[] starYPoints = {0, 36, 36, 54, 96, 72, 96, 54, 36, 36};\r\n    GeneralPath starDesign = new GeneralPath();\r\n    \r\n    public StarPainter(JFrame frame) {\r\n\t\tsuper(frame);\r\n\t}\r\n    \r\n    public void drawStar(GeneralPath path) {\r\n    \tpath.moveTo(starXPoints[0], starYPoints[0]);\r\n        \r\n        for(int i=0; i&lt;10; i++)\r\n     \t   path.lineTo(starXPoints[i], starYPoints[i]);\r\n        \r\n        path.closePath();\r\n    }\r\n    \r\n    public void starActions(Graphics2D g) {\r\n    \tint startAngle = 360;\r\n    \t// For Random Color\r\n        SecureRandom random = new SecureRandom(); \r\n    \t   \r\n        // rotate around origin and draw stars in random colors\r\n        for (int count = 1; count &lt;= 1; count++) \r\n        {\r\n            double angle = startAngle - 90;\r\n            // rotate coordinate system\r\n            g.rotate(angleOfStarRotation * Math.PI / angle); //rotates as per the rotated angle    // \r\n           // set random drawing color\r\n            g.setColor(new Color(random.nextInt(256), random.nextInt(256), random.nextInt(256)));\r\n          // draw filled star\r\n            g.fill(starDesign);\r\n          // dispose the star\r\n            g.dispose();\r\n        }\r\n    }\r\n    \r\n    @Override\r\n    public void paintComponent(Graphics g)\r\n    {\r\n       super.paintComponent(g);\r\n       \r\n       Graphics2D g2d = (Graphics2D) g;\r\n      \r\n       drawStar(starDesign);\r\n       \r\n       g2d.translate(250,150);\r\n       \r\n       starActions(g2d);\r\n       \r\n    }\r\n}\r\n```\r\n\r\n&gt;After running the code, the output will show a frame with coloring star rotating around the panel in circular motion, but after 2 full rotation, the star rotation slow down automatically. **Does anyone know why that happens?** ","title":"Why does the star rotation slows down automatically after some time","body":"<p>I have a program where I have to use internal Timer event to rotate a star in circular motion. There is a button in the frame that changes the direction of the star and a slider which changes the speed of the star rotation.</p>\n<p>This is my Main Class</p>\n<pre><code>import javax.swing.JFrame;\n\npublic class Main {\n    public static void main(String args[]) {\n//      Making an instance of the class that makes the frame\n        MainFrame frame = new MainFrame();\n        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\n        frame.setSize(500, 500);\n        frame.setVisible(true);\n    }\n}\n</code></pre>\n<p>MainFrame Class that makes the frame.</p>\n<pre><code>import java.awt.event.ActionEvent;\nimport java.awt.event.ActionListener;\n\nimport java.awt.BorderLayout;\nimport java.awt.Color;\nimport java.awt.Dimension;\n\nimport javax.swing.*;\nimport javax.swing.event.ChangeEvent;\nimport javax.swing.event.ChangeListener;\n\n\n@SuppressWarnings(&quot;serial&quot;)\npublic class MainFrame extends JFrame{\n    private StarGraphics frameStar;\n    private JButton starToggle;\n    public JSlider starSpeed;\n    \n    \n    public MainFrame() {\n//      Setting some properties of the frame\n        setTitle(&quot;Star Moving with Internal Events&quot;);\n        setLayout(new BorderLayout());\n        \n//      Initializing the panel which has rotating star\n        frameStar = new StarPainter(this);\n        \n//      Adding the bottom toggle button and slider\n        addToggler();   \n    }\n    \n//  Getter for the slider value\n    public int sliderSpeed() {\n        return starSpeed.getValue();\n    }\n    \n    \n//  Adds Button to change the direction of the star\n    private void addToggler() {\n//      Adding another jpanel which has layout set to null so i can add button of my size\n        JPanel panel = new JPanel();\n        panel.setLayout(null);\n        panel.setPreferredSize(new Dimension(20,80));\n        panel.setBackground(Color.WHITE);\n        \n//      Initializing button and its action listener to change star direction\n        starToggle = new JButton(&quot;Toggle&quot;);\n        starToggle.setBounds(190, 0, 80, 20);\n        starToggle.addActionListener(new ActionListener() {\n            @Override\n            public void actionPerformed(ActionEvent e) {\n                if(e.getSource() == starToggle) {\n                    frameStar.ChangeDirections();\n                }\n            }\n        });\n        \n//      Adding button to panel\n        panel.add(starToggle);\n        \n//      Adding slider to the panel\n        addSlider(panel);\n        \n//      Adding panel to the main Panel at the bottom\n        add(panel, BorderLayout.SOUTH);\n    }\n    \n    private void addSlider(JPanel panel) {\n//      Adding Slider and it's properties\n        starSpeed = new JSlider(JSlider.HORIZONTAL, 0, 20, 5);\n        starSpeed.setMajorTickSpacing(10);\n        starSpeed.setMinorTickSpacing(1);\n        starSpeed.setPaintTicks(true);\n        starSpeed.setPaintLabels(true);\n        starSpeed.setBounds(70,30,400, 45);\n        \n//      Adding Slider-ChangeListener to change the rotation speed of the star\n        starSpeed.addChangeListener(new ChangeListener() { // anonymous inner class  \n            // handle change in slider value\n            @Override\n            public void stateChanged(ChangeEvent e) {\n                frameStar.ChangeSpeed(starSpeed.getValue());\n            }\n         } \n      );\n        \n//      Adding label besides the slider\n        JLabel label = new JLabel(&quot;Speed : &quot;);\n        label.setBounds(10 , 10, 80, 80);\n        panel.add(label);\n        panel.add(starSpeed);\n    }\n}\n</code></pre>\n<p>Class to create the panel that has star rotation</p>\n<pre><code>import java.awt.BorderLayout;\nimport java.awt.Color;\nimport java.awt.Dimension;\nimport java.awt.event.ActionEvent;\nimport java.awt.event.ActionListener;\n\nimport javax.swing.*;\n\n@SuppressWarnings(&quot;serial&quot;)\npublic class StarGraphics extends JPanel{\n    private boolean toggleDir = false;\n    private int speed = 10;\n    private Timer timer;\n    protected double angleOfStarRotation = 0;\n    \n    public StarGraphics(JFrame frame) {\n        \n        setPreferredSize(new Dimension(500, 470));\n        setBackground(Color.BLACK);\n        setLayout(new BorderLayout());\n        frame.add(this, BorderLayout.CENTER);\n        \n        startTimer();\n    }\n    \n    public void startTimer() {\n        timer = new Timer(speed, new ActionListener() {\n            public void actionPerformed(ActionEvent e){\n//              System.out.println(angleOfStarRotation);\n                if(!toggleDir)  //rotates clockwise\n                    angleOfStarRotation = angleOfStarRotation + 1;\n                else        //rotates counterclockwise\n                    angleOfStarRotation = angleOfStarRotation - 1;\n                  \n//                if (angleOfStarRotation == 360 || angleOfStarRotation == -360)  // If there is a full circle, it will reset the angle to zero\n//                    angleOfStarRotation = 0;\n                  \n                repaint();\n            }});\n        timer.start();\n    }\n    \n    public void ChangeSpeed(int newSpeed) { \n        this.speed = newSpeed;\n        timer.setDelay(speed);\n    }   \n    public void ChangeDirections() {toggleDir = !toggleDir; }\n\n}\n\n</code></pre>\n<p>And a class that paints the star into the panel</p>\n<pre><code>import java.awt.Color;\nimport java.awt.Graphics;\nimport java.awt.Graphics2D;\nimport java.awt.geom.GeneralPath;\nimport java.security.SecureRandom;\n\nimport javax.swing.JFrame;\n\n@SuppressWarnings(&quot;serial&quot;)\npublic class StarPainter extends StarGraphics{\n    private int[] starXPoints = {55, 67, 109, 73, 83, 55, 27, 37, 1, 43};\n    private int[] starYPoints = {0, 36, 36, 54, 96, 72, 96, 54, 36, 36};\n    GeneralPath starDesign = new GeneralPath();\n    \n    public StarPainter(JFrame frame) {\n        super(frame);\n    }\n    \n    public void drawStar(GeneralPath path) {\n        path.moveTo(starXPoints[0], starYPoints[0]);\n        \n        for(int i=0; i&lt;10; i++)\n           path.lineTo(starXPoints[i], starYPoints[i]);\n        \n        path.closePath();\n    }\n    \n    public void starActions(Graphics2D g) {\n        int startAngle = 360;\n        // For Random Color\n        SecureRandom random = new SecureRandom(); \n           \n        // rotate around origin and draw stars in random colors\n        for (int count = 1; count &lt;= 1; count++) \n        {\n            double angle = startAngle - 90;\n            // rotate coordinate system\n            g.rotate(angleOfStarRotation * Math.PI / angle); //rotates as per the rotated angle    // \n           // set random drawing color\n            g.setColor(new Color(random.nextInt(256), random.nextInt(256), random.nextInt(256)));\n          // draw filled star\n            g.fill(starDesign);\n          // dispose the star\n            g.dispose();\n        }\n    }\n    \n    @Override\n    public void paintComponent(Graphics g)\n    {\n       super.paintComponent(g);\n       \n       Graphics2D g2d = (Graphics2D) g;\n      \n       drawStar(starDesign);\n       \n       g2d.translate(250,150);\n       \n       starActions(g2d);\n       \n    }\n}\n</code></pre>\n<blockquote>\n<p>After running the code, the output will show a frame with coloring star rotating around the panel in circular motion, but after 2 full rotation, the star rotation slow down automatically. <strong>Does anyone know why that happens?</strong></p>\n</blockquote>\n"},{"tags":["java","android","textview"],"answers":[{"tags":[],"owner":{"account_id":6920902,"reputation":994,"user_id":5313608,"accept_rate":100,"display_name":"Tal Mantelmakher"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1597441217,"creation_date":1597438780,"answer_id":63419961,"question_id":63417966,"body_markdown":"It looks like you are setting the text of matchTime to a TextView. \r\nsetText is a method that should receive a String, not a TextView object. \r\n\r\nBut, if you simply return a String in getPlayTime(), updatePlay() wont work because playTime.setText() wont affect matchTime at all.\r\n\r\nTo solve this you pass matchTime to Play&#39;s constructor, and then update it directly:\r\n\r\n    public class Play{\r\n        \r\n        private TextView matchTime;\r\n\r\n        public Play(TextView matchTime){\r\n            this.matchTime = matchTime;\r\n        }\r\n\r\n         private void updatePlay() {\r\n           int minutes = (int) (timeUntilEnd/ 1000) / 60;\r\n           int seconds = (int) (timeUntilEnd/ 1000) % 60;\r\n\r\n           timeUntilEndFormated= String.format(Locale.getDefault(),&quot;%02d:%02d&quot;, minutes, seconds);\r\n           matchTime.setText(timeUntilEndFormated);\r\n         }\r\n    }\r\n\r\n\r\nAnd then you only need to do this in your main method:\r\n\r\n    playTime = new Play(matchTime);\r\n    playTime.updatePlay();\r\n\r\n\r\nBe careful with passing TextView&#39;s to other objects. This can create a memory leak, since TextView holds an instance of your Context. To avoid memory leaks you have to release the object in your activity&#39;s onDestroy() method:\r\n\r\n     public void onDestroy() {\r\n        super.onDestroy();\r\n        playTime = null;\r\n     }","title":"Get TextView from another class for countdown","body":"<p>It looks like you are setting the text of matchTime to a TextView.\nsetText is a method that should receive a String, not a TextView object.</p>\n<p>But, if you simply return a String in getPlayTime(), updatePlay() wont work because playTime.setText() wont affect matchTime at all.</p>\n<p>To solve this you pass matchTime to Play's constructor, and then update it directly:</p>\n<pre><code>public class Play{\n    \n    private TextView matchTime;\n\n    public Play(TextView matchTime){\n        this.matchTime = matchTime;\n    }\n\n     private void updatePlay() {\n       int minutes = (int) (timeUntilEnd/ 1000) / 60;\n       int seconds = (int) (timeUntilEnd/ 1000) % 60;\n\n       timeUntilEndFormated= String.format(Locale.getDefault(),&quot;%02d:%02d&quot;, minutes, seconds);\n       matchTime.setText(timeUntilEndFormated);\n     }\n}\n</code></pre>\n<p>And then you only need to do this in your main method:</p>\n<pre><code>playTime = new Play(matchTime);\nplayTime.updatePlay();\n</code></pre>\n<p>Be careful with passing TextView's to other objects. This can create a memory leak, since TextView holds an instance of your Context. To avoid memory leaks you have to release the object in your activity's onDestroy() method:</p>\n<pre><code> public void onDestroy() {\n    super.onDestroy();\n    playTime = null;\n }\n</code></pre>\n"}],"owner":{"account_id":19296273,"reputation":3,"user_id":14106429,"display_name":"Eduardo Bonatelli"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":49,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":63419961,"answer_count":1,"score":0,"last_activity_date":1644451500,"creation_date":1597428470,"question_id":63417966,"body_markdown":"I&#39;ve created a class to make a countdown and used it to return the formated time as a TextView. However, I&#39;m not beeing able to get the time to be exibed on in place. When, instead of calling the method getTime() I use a string, it shows fine. \r\n\r\n\r\nThe main method is like this:\r\n```\r\nsetContentView(R.layout.activity_main);\r\n\r\nmatchTime = findViewById(R.id.match_Time);\r\n\r\nplayTime = new Play();\r\nmatchTime.setText(playTime.getPlayTime());\r\n```\r\n\r\nWhile my class Play goes like this:\r\n\r\n``` \r\n//Other implementations\r\n\r\n    private void updatePlay() {\r\n          int minutes = (int) (timeUntilEnd/ 1000) / 60;\r\n          int seconds = (int) (timeUntilEnd/ 1000) % 60;\r\n\r\n         timeUntilEndFormated= String.format(Locale.getDefault(),&quot;%02d:%02d&quot;, minutes, seconds);\r\n         playTime.setText(timeUntilEndFormated);\r\n    }\r\n\r\n    public TextView getPlayTime() {\r\n        return playTime;\r\n    }\r\n\r\n\r\n```","title":"Get TextView from another class for countdown","body":"<p>I've created a class to make a countdown and used it to return the formated time as a TextView. However, I'm not beeing able to get the time to be exibed on in place. When, instead of calling the method getTime() I use a string, it shows fine.</p>\n<p>The main method is like this:</p>\n<pre><code>setContentView(R.layout.activity_main);\n\nmatchTime = findViewById(R.id.match_Time);\n\nplayTime = new Play();\nmatchTime.setText(playTime.getPlayTime());\n</code></pre>\n<p>While my class Play goes like this:</p>\n<pre><code>//Other implementations\n\n    private void updatePlay() {\n          int minutes = (int) (timeUntilEnd/ 1000) / 60;\n          int seconds = (int) (timeUntilEnd/ 1000) % 60;\n\n         timeUntilEndFormated= String.format(Locale.getDefault(),&quot;%02d:%02d&quot;, minutes, seconds);\n         playTime.setText(timeUntilEndFormated);\n    }\n\n    public TextView getPlayTime() {\n        return playTime;\n    }\n\n\n</code></pre>\n"},{"tags":["java","gradle","gradle-plugin"],"answers":[{"tags":[],"owner":{"account_id":2115970,"reputation":13,"user_id":1880280,"display_name":"gego"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1644450694,"creation_date":1644450694,"answer_id":71058235,"question_id":70870810,"body_markdown":"I finally got the solution myself. I&#39;m sharing it here for the everyone.\r\n\r\n    import org.gradle.api.Plugin;\r\n    import org.gradle.api.Project;\r\n    import org.gradle.api.file.CopySpec;\r\n    import org.gradle.api.plugins.JavaPlugin;\r\n    import org.gradle.api.tasks.bundling.Zip;\r\n    \r\n    public class ZipTaskPlugin implements Plugin&lt;Project&gt; {\r\n        @Override\r\n        public void apply(Project project) {\r\n    \r\n            Zip task= project.getTasks().create( &quot;HelloZipWorld&quot;, Zip.class );\r\n    \r\n            task.into(task.getArchiveFileName().get(), (CopySpec copySpec) -&gt;{\r\n                        copySpec.into(&quot;lib&quot;)\r\n                                .from(project.getConfigurations().getByName(JavaPlugin.RUNTIME_CLASSPATH_CONFIGURATION_NAME))\r\n                                .from(&quot;build.properties&quot;);\r\n                    })\r\n                    .from(project.getTasks().getByName(JavaPlugin.COMPILE_JAVA_TASK_NAME))\r\n                    .from(project.getTasks().getByName(JavaPlugin.PROCESS_RESOURCES_TASK_NAME))\r\n            ;\r\n        }\r\n    }\r\n\r\n","title":"Custom Gradle Plugin based ZipTask in Java","body":"<p>I finally got the solution myself. I'm sharing it here for the everyone.</p>\n<pre><code>import org.gradle.api.Plugin;\nimport org.gradle.api.Project;\nimport org.gradle.api.file.CopySpec;\nimport org.gradle.api.plugins.JavaPlugin;\nimport org.gradle.api.tasks.bundling.Zip;\n\npublic class ZipTaskPlugin implements Plugin&lt;Project&gt; {\n    @Override\n    public void apply(Project project) {\n\n        Zip task= project.getTasks().create( &quot;HelloZipWorld&quot;, Zip.class );\n\n        task.into(task.getArchiveFileName().get(), (CopySpec copySpec) -&gt;{\n                    copySpec.into(&quot;lib&quot;)\n                            .from(project.getConfigurations().getByName(JavaPlugin.RUNTIME_CLASSPATH_CONFIGURATION_NAME))\n                            .from(&quot;build.properties&quot;);\n                })\n                .from(project.getTasks().getByName(JavaPlugin.COMPILE_JAVA_TASK_NAME))\n                .from(project.getTasks().getByName(JavaPlugin.PROCESS_RESOURCES_TASK_NAME))\n        ;\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":2115970,"reputation":13,"user_id":1880280,"display_name":"gego"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":134,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":71058235,"answer_count":1,"score":0,"last_activity_date":1644450694,"creation_date":1643234397,"question_id":70870810,"body_markdown":"I want to create a custom Gradle Plugin in Java which will only create a Zip task.\r\n\r\nThe DSL version is as follow:\r\n\r\n    task _3_buildZip(type: Zip) {\r\n       from compileJava\r\n       from processResources\r\n       into(&#39;lib&#39;) {\r\n          from configurations.runtimeClasspath\r\n          from(&#39;build.properties&#39;)\r\n       }\r\n    }\r\n\r\nSo far I&#39;ve created the following code which is not working :-(\r\n\r\n    import org.gradle.api.Plugin;\r\n    import org.gradle.api.Project;\r\n    import org.gradle.api.tasks.bundling.Zip;\r\n    \r\n    public class ZipTaskPlugin implements Plugin&lt;Project&gt; {\r\n        @Override\r\n        public void apply(Project project) {\r\n    \r\n            Zip zipTask = project.getTasks().create(&quot;HelloZipWorld&quot;,Zip.class);\r\n            zipTask.from(project.getComponents().getByName(&quot;java&quot;));\r\n            zipTask.from(project.getComponents().getByName(&quot;resources&quot;));\r\n            zipTask.into(&quot;lib&quot;).from(project.getConfigurations());\r\n    \r\n        }\r\n    }\r\n\r\nPlease advise","title":"Custom Gradle Plugin based ZipTask in Java","body":"<p>I want to create a custom Gradle Plugin in Java which will only create a Zip task.</p>\n<p>The DSL version is as follow:</p>\n<pre><code>task _3_buildZip(type: Zip) {\n   from compileJava\n   from processResources\n   into('lib') {\n      from configurations.runtimeClasspath\n      from('build.properties')\n   }\n}\n</code></pre>\n<p>So far I've created the following code which is not working :-(</p>\n<pre><code>import org.gradle.api.Plugin;\nimport org.gradle.api.Project;\nimport org.gradle.api.tasks.bundling.Zip;\n\npublic class ZipTaskPlugin implements Plugin&lt;Project&gt; {\n    @Override\n    public void apply(Project project) {\n\n        Zip zipTask = project.getTasks().create(&quot;HelloZipWorld&quot;,Zip.class);\n        zipTask.from(project.getComponents().getByName(&quot;java&quot;));\n        zipTask.from(project.getComponents().getByName(&quot;resources&quot;));\n        zipTask.into(&quot;lib&quot;).from(project.getConfigurations());\n\n    }\n}\n</code></pre>\n<p>Please advise</p>\n"},{"tags":["java","maven","github-actions","jib","maven-jib"],"answers":[{"tags":[],"owner":{"account_id":1881220,"reputation":4005,"user_id":1701388,"display_name":"Chanseok Oh"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1644450412,"creation_date":1644425776,"answer_id":71053641,"question_id":71045302,"body_markdown":"Everything looks good. Jib retrieved credentials from `-Dto.auth.{username|password}`.\r\n\r\n```\r\nUsing credentials from &lt;to&gt;&lt;auth&gt; for gcr.io/mathieusoysal/codingame-puzzles-stats-saver:v1.0.2.5\r\n```\r\n\r\nI suspect that you are just not passing the right &quot;username&quot; and &quot;password&quot; for `gcr.io` (Google Container Registry, which is different from `ghcr.io`). From this [doc][1],\r\n\r\n&gt;  **Note:** This method of authentication should be used only as a last resort, as it is insecure to make your password visible in plain text. Note that often cloud registries (for example, Google GCR, Amazon ECR, and Azure ACR) do not accept &quot;user credentials&quot; (such as Gmail account name and password) but require different forms of credentials. For example, you may use [`oauth2accesstoken` or `_json_key`](https://cloud.google.com/container-registry/docs/advanced-authentication) as the username for GCR, and [`AWS`](https://serverfault.com/questions/1004915/what-is-the-proper-way-to-log-in-to-ecr) for ECR. For ACR, you may use a [_service principle_](https://learn.microsoft.com/en-us/azure/container-registry/container-registry-auth-service-principal).\r\n\r\nAFAICT, for GCR, `to.auth.username` would be either `oath2accesstoken` or `_json_key` literally. It doesn&#39;t make sense that the username is `${{ github.actor }}`.\r\n\r\n---\r\n\r\nAside, you should make sure that the auth arguments you pass on the command-line is not logged or shown for security. Take a look at this [Stack Overflow answer](https://stackoverflow.com/a/64105567/1701388) to understand general registry authentication.\r\n\r\nAlso, typically you&#39;ll want auth for both the &quot;from&quot; image and &quot;to&quot; image.\r\n\r\n  [1]: https://github.com/GoogleContainerTools/jib/tree/master/jib-maven-plugin#using-specific-credentials","title":"GitHub Actions: Error 401 Unauthorized in JIB maven plugin","body":"<p>Everything looks good. Jib retrieved credentials from <code>-Dto.auth.{username|password}</code>.</p>\n<pre><code>Using credentials from &lt;to&gt;&lt;auth&gt; for gcr.io/mathieusoysal/codingame-puzzles-stats-saver:v1.0.2.5\n</code></pre>\n<p>I suspect that you are just not passing the right &quot;username&quot; and &quot;password&quot; for <code>gcr.io</code> (Google Container Registry, which is different from <code>ghcr.io</code>). From this <a href=\"https://github.com/GoogleContainerTools/jib/tree/master/jib-maven-plugin#using-specific-credentials\" rel=\"nofollow noreferrer\">doc</a>,</p>\n<blockquote>\n<p><strong>Note:</strong> This method of authentication should be used only as a last resort, as it is insecure to make your password visible in plain text. Note that often cloud registries (for example, Google GCR, Amazon ECR, and Azure ACR) do not accept &quot;user credentials&quot; (such as Gmail account name and password) but require different forms of credentials. For example, you may use <a href=\"https://cloud.google.com/container-registry/docs/advanced-authentication\" rel=\"nofollow noreferrer\"><code>oauth2accesstoken</code> or <code>_json_key</code></a> as the username for GCR, and <a href=\"https://serverfault.com/questions/1004915/what-is-the-proper-way-to-log-in-to-ecr\"><code>AWS</code></a> for ECR. For ACR, you may use a <a href=\"https://learn.microsoft.com/en-us/azure/container-registry/container-registry-auth-service-principal\" rel=\"nofollow noreferrer\"><em>service principle</em></a>.</p>\n</blockquote>\n<p>AFAICT, for GCR, <code>to.auth.username</code> would be either <code>oath2accesstoken</code> or <code>_json_key</code> literally. It doesn't make sense that the username is <code>${{ github.actor }}</code>.</p>\n<hr />\n<p>Aside, you should make sure that the auth arguments you pass on the command-line is not logged or shown for security. Take a look at this <a href=\"https://stackoverflow.com/a/64105567/1701388\">Stack Overflow answer</a> to understand general registry authentication.</p>\n<p>Also, typically you'll want auth for both the &quot;from&quot; image and &quot;to&quot; image.</p>\n"}],"owner":{"account_id":20683611,"reputation":1177,"user_id":15186569,"display_name":"ThrowsError"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2751,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":71053641,"answer_count":1,"score":1,"last_activity_date":1644450412,"creation_date":1644390612,"question_id":71045302,"body_markdown":"## Introduction\r\nI am currently to create a composite GitHub Actions that build a container from Java project with JIB and publish it automatically to a GitHub Packages and Maven Central.\r\n\r\n## Problematic\r\n\r\nBut I got this error when I try to run it:\r\n\r\n```log\r\n[INFO] \r\n[INFO] Containerizing application to gcr.io/mathieusoysal/codingame-puzzles-stats-saver:v1.0.2.5...\r\nWarning:  Base image &#39;eclipse-temurin:17-jre&#39; does not use a specific image digest - build may not be reproducible\r\n[INFO] Using credentials from &lt;to&gt;&lt;auth&gt; for gcr.io/mathieusoysal/codingame-puzzles-stats-saver:v1.0.2.5\r\n[INFO] Getting manifest for base image eclipse-temurin:17-jre...\r\n[INFO] Building dependencies layer...\r\n[INFO] Building resources layer...\r\n[INFO] Building classes layer...\r\n[INFO] Building jvm arg files layer...\r\n[INFO] The base image requires auth. Trying again for eclipse-temurin:17-jre...\r\n[INFO] Using credentials from Docker config (/home/runner/.docker/config.json) for eclipse-temurin:17-jre\r\n[INFO] Using base image with digest: sha256:e7a4a45b88525250e668cc6149b95b3952a8e9cba8c341b70c4d34c4e4d5eed5\r\n[INFO] \r\n[INFO] ------------------------------------------------------------------------\r\n[INFO] BUILD FAILURE\r\n[INFO] ------------------------------------------------------------------------\r\n[INFO] Total time:  10.272 s\r\n[INFO] Finished at: 2022-02-09T00:37:22Z\r\n[INFO] ------------------------------------------------------------------------\r\nError:  Failed to execute goal com.google.cloud.tools:jib-maven-plugin:3.2.0:build (default-cli) on project codingame-puzzles-stats-saver: Build image failed, perhaps you should make sure your credentials for &#39;gcr.io/mathieusoysal/codingame-puzzles-stats-saver&#39; are set up correctly. See https://github.com/GoogleContainerTools/jib/blob/master/docs/faq.md#what-should-i-do-when-the-registry-responds-with-unauthorized for help: Unauthorized for gcr.io/mathieusoysal/codingame-puzzles-stats-saver: 401 Unauthorized\r\nError:  {&quot;errors&quot;:[{&quot;code&quot;:&quot;UNAUTHORIZED&quot;,&quot;message&quot;:&quot;Not Authorized.&quot;}]}\r\nError:  -&gt; [Help 1]\r\nError:  \r\nError:  To see the full stack trace of the errors, re-run Maven with the -e switch.\r\nError:  Re-run Maven using the -X switch to enable full debug logging.\r\nError:  \r\nError:  For more information about the errors and possible solutions, please read the following articles:\r\nError:  [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/MojoExecutionException\r\nError: Process completed with exit code 1.\r\n```\r\n\r\n## Affected code:\r\n\r\n```yaml\r\nname: JIB container publish\r\ndescription: &quot;Build automatically container with JIB and publish it to GitHub Packages.&quot;\r\nbranding:\r\n  icon: &quot;package&quot;\r\n  color: &quot;gray-dark&quot;\r\n\r\ninputs:\r\n  # Use docker.io for Docker Hub if empty\r\n  REGISTRY:\r\n    description: &quot;Registry of the image to publish&quot;\r\n    required: true\r\n    default: ghcr.io\r\n  # github.repository as &lt;account&gt;/&lt;repo&gt;\r\n  IMAGE_NAME:\r\n    description: &quot;Name of the image to publish&quot;\r\n    required: true\r\n    default: ${{ github.repository }}\r\n  # Username to login to registry\r\n  USERNAME:\r\n    description: &quot;Username to login to registry&quot;\r\n    required: true\r\n    default: ${{ github.actor }}\r\n  # Password to login to registry\r\n  PASSWORD:\r\n    description: &quot;Password to login to registry&quot;\r\n    required: true\r\n  # Name of the tag to publish\r\n  tag-name:\r\n    description: &quot;Tag name of the image to publish&quot;\r\n    required: true\r\n    default: &quot;latest&quot;\r\n  # Java version to use\r\n  java-version:\r\n    description: &quot;Java version to use&quot;\r\n    required: true\r\n    default: &quot;17&quot;\r\n\r\nruns:\r\n  using: &quot;composite&quot;\r\n  steps:\r\n    - id: downcase\r\n      uses: ASzc/change-string-case-action@v2\r\n      with:\r\n        string: ${{ inputs.IMAGE_NAME }}\r\n\r\n    - uses: actions/checkout@v2\r\n    - name: Set up JDK 17\r\n      uses: actions/setup-java@v2\r\n      with:\r\n        distribution: &quot;adopt&quot;\r\n        java-version: ${{ inputs.java-version }}\r\n\r\n    - name: Buil JIB container and publish to GitHub Packages\r\n      run: |\r\n        mvn compile com.google.cloud.tools:jib-maven-plugin:3.2.0:build \\\r\n        -Djib.to.image=${{ inputs.REGISTRY }}/${{ steps.downcase.outputs.lowercase }}:${{ inputs.tag-name }} \\\r\n        -Djib.to.auth.username=${{ inputs.USERNAME }} \\\r\n        -Djib.to.auth.password=${{ inputs.PASSWORD }}\r\n      shell: bash\r\n```\r\n\r\n## Code that execute the GitHub Actions in question:\r\n```yaml\r\nname: Deploy Javadoc\r\n\r\non:\r\nname: JIB container publish\r\n\r\non:\r\n  release:\r\n    types: [created]\r\n\r\njobs:\r\n  publish:\r\n    runs-on: ubuntu-latest\r\n    steps:\r\n      - name: JIB container build and publish\r\n        uses: MathieuSoysal/jib-container-publish.yml@v2.0.7\r\n        with:\r\n          # Use docker.io for Docker Hub if empty\r\n          REGISTRY: gcr.io\r\n          # github.repository as &lt;your-account&gt;/&lt;your-repo&gt;\r\n          IMAGE_NAME: ${{ github.repository }}\r\n          # Tag name of the image to publish\r\n          tag-name: ${{ github.event.release.tag_name }}\r\n          # Username to login to registry\r\n          USERNAME: ${{ github.actor }}\r\n          # Password to login to registry\r\n          PASSWORD: ${{ secrets.GITHUB_TOKEN }}\r\n          java-version: 17\r\n```\r\n\r\n## Question\r\n\r\nAnyone have an idea to solve this problem?\r\n\r\nLink of the repo: https://github.com/MathieuSoysal/jib-container-publish.yml","title":"GitHub Actions: Error 401 Unauthorized in JIB maven plugin","body":"<h2>Introduction</h2>\n<p>I am currently to create a composite GitHub Actions that build a container from Java project with JIB and publish it automatically to a GitHub Packages and Maven Central.</p>\n<h2>Problematic</h2>\n<p>But I got this error when I try to run it:</p>\n<pre><code>[INFO] \n[INFO] Containerizing application to gcr.io/mathieusoysal/codingame-puzzles-stats-saver:v1.0.2.5...\nWarning:  Base image 'eclipse-temurin:17-jre' does not use a specific image digest - build may not be reproducible\n[INFO] Using credentials from &lt;to&gt;&lt;auth&gt; for gcr.io/mathieusoysal/codingame-puzzles-stats-saver:v1.0.2.5\n[INFO] Getting manifest for base image eclipse-temurin:17-jre...\n[INFO] Building dependencies layer...\n[INFO] Building resources layer...\n[INFO] Building classes layer...\n[INFO] Building jvm arg files layer...\n[INFO] The base image requires auth. Trying again for eclipse-temurin:17-jre...\n[INFO] Using credentials from Docker config (/home/runner/.docker/config.json) for eclipse-temurin:17-jre\n[INFO] Using base image with digest: sha256:e7a4a45b88525250e668cc6149b95b3952a8e9cba8c341b70c4d34c4e4d5eed5\n[INFO] \n[INFO] ------------------------------------------------------------------------\n[INFO] BUILD FAILURE\n[INFO] ------------------------------------------------------------------------\n[INFO] Total time:  10.272 s\n[INFO] Finished at: 2022-02-09T00:37:22Z\n[INFO] ------------------------------------------------------------------------\nError:  Failed to execute goal com.google.cloud.tools:jib-maven-plugin:3.2.0:build (default-cli) on project codingame-puzzles-stats-saver: Build image failed, perhaps you should make sure your credentials for 'gcr.io/mathieusoysal/codingame-puzzles-stats-saver' are set up correctly. See https://github.com/GoogleContainerTools/jib/blob/master/docs/faq.md#what-should-i-do-when-the-registry-responds-with-unauthorized for help: Unauthorized for gcr.io/mathieusoysal/codingame-puzzles-stats-saver: 401 Unauthorized\nError:  {&quot;errors&quot;:[{&quot;code&quot;:&quot;UNAUTHORIZED&quot;,&quot;message&quot;:&quot;Not Authorized.&quot;}]}\nError:  -&gt; [Help 1]\nError:  \nError:  To see the full stack trace of the errors, re-run Maven with the -e switch.\nError:  Re-run Maven using the -X switch to enable full debug logging.\nError:  \nError:  For more information about the errors and possible solutions, please read the following articles:\nError:  [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/MojoExecutionException\nError: Process completed with exit code 1.\n</code></pre>\n<h2>Affected code:</h2>\n<pre class=\"lang-yaml prettyprint-override\"><code>name: JIB container publish\ndescription: &quot;Build automatically container with JIB and publish it to GitHub Packages.&quot;\nbranding:\n  icon: &quot;package&quot;\n  color: &quot;gray-dark&quot;\n\ninputs:\n  # Use docker.io for Docker Hub if empty\n  REGISTRY:\n    description: &quot;Registry of the image to publish&quot;\n    required: true\n    default: ghcr.io\n  # github.repository as &lt;account&gt;/&lt;repo&gt;\n  IMAGE_NAME:\n    description: &quot;Name of the image to publish&quot;\n    required: true\n    default: ${{ github.repository }}\n  # Username to login to registry\n  USERNAME:\n    description: &quot;Username to login to registry&quot;\n    required: true\n    default: ${{ github.actor }}\n  # Password to login to registry\n  PASSWORD:\n    description: &quot;Password to login to registry&quot;\n    required: true\n  # Name of the tag to publish\n  tag-name:\n    description: &quot;Tag name of the image to publish&quot;\n    required: true\n    default: &quot;latest&quot;\n  # Java version to use\n  java-version:\n    description: &quot;Java version to use&quot;\n    required: true\n    default: &quot;17&quot;\n\nruns:\n  using: &quot;composite&quot;\n  steps:\n    - id: downcase\n      uses: ASzc/change-string-case-action@v2\n      with:\n        string: ${{ inputs.IMAGE_NAME }}\n\n    - uses: actions/checkout@v2\n    - name: Set up JDK 17\n      uses: actions/setup-java@v2\n      with:\n        distribution: &quot;adopt&quot;\n        java-version: ${{ inputs.java-version }}\n\n    - name: Buil JIB container and publish to GitHub Packages\n      run: |\n        mvn compile com.google.cloud.tools:jib-maven-plugin:3.2.0:build \\\n        -Djib.to.image=${{ inputs.REGISTRY }}/${{ steps.downcase.outputs.lowercase }}:${{ inputs.tag-name }} \\\n        -Djib.to.auth.username=${{ inputs.USERNAME }} \\\n        -Djib.to.auth.password=${{ inputs.PASSWORD }}\n      shell: bash\n</code></pre>\n<h2>Code that execute the GitHub Actions in question:</h2>\n<pre class=\"lang-yaml prettyprint-override\"><code>name: Deploy Javadoc\n\non:\nname: JIB container publish\n\non:\n  release:\n    types: [created]\n\njobs:\n  publish:\n    runs-on: ubuntu-latest\n    steps:\n      - name: JIB container build and publish\n        uses: MathieuSoysal/jib-container-publish.yml@v2.0.7\n        with:\n          # Use docker.io for Docker Hub if empty\n          REGISTRY: gcr.io\n          # github.repository as &lt;your-account&gt;/&lt;your-repo&gt;\n          IMAGE_NAME: ${{ github.repository }}\n          # Tag name of the image to publish\n          tag-name: ${{ github.event.release.tag_name }}\n          # Username to login to registry\n          USERNAME: ${{ github.actor }}\n          # Password to login to registry\n          PASSWORD: ${{ secrets.GITHUB_TOKEN }}\n          java-version: 17\n</code></pre>\n<h2>Question</h2>\n<p>Anyone have an idea to solve this problem?</p>\n<p>Link of the repo: <a href=\"https://github.com/MathieuSoysal/jib-container-publish.yml\" rel=\"nofollow noreferrer\">https://github.com/MathieuSoysal/jib-container-publish.yml</a></p>\n"},{"tags":["java","maven","junit","sonarqube","jacoco"],"comments":[{"owner":{"account_id":112317,"reputation":93939,"user_id":296328,"accept_rate":60,"display_name":"khmarbaise"},"score":0,"creation_date":1644299593,"post_id":71026783,"comment_id":125562794,"body_markdown":"You should remove the sonar-maven-plugin dependency because it is a maven plugin. Second you should define the sonar-maven-plugin in the plugins section instead...Furthermore the interaction between Eclipse/JUnit is working..also for other IDE&#39;s (like IntelliJ).","body":"You should remove the sonar-maven-plugin dependency because it is a maven plugin. Second you should define the sonar-maven-plugin in the plugins section instead...Furthermore the interaction between Eclipse/JUnit is working..also for other IDE&#39;s (like IntelliJ)."},{"owner":{"account_id":19496816,"reputation":893,"user_id":14263818,"display_name":"Steven"},"score":0,"creation_date":1644376432,"post_id":71026783,"comment_id":125588531,"body_markdown":"Thanks @khmarbaise for the suggestion about moving the sonar-maven-plugin from the &lt;dependency&gt; section to the &lt;plugin&gt; section. Unfortunately, that hasn&#39;t done the trick yet.","body":"Thanks @khmarbaise for the suggestion about moving the sonar-maven-plugin from the &lt;dependency&gt; section to the &lt;plugin&gt; section. Unfortunately, that hasn&#39;t done the trick yet."}],"answers":[{"tags":[],"owner":{"account_id":19496816,"reputation":893,"user_id":14263818,"display_name":"Steven"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1644449834,"creation_date":1644449834,"answer_id":71058142,"question_id":71026783,"body_markdown":"I was able to finally answer the question based upon a similar example I just found on this GitHub project: \r\nhttps://github.com/SonarSource/sonar-scanning-examples/tree/master/sonarqube-scanner-maven/maven-basic\r\n\r\nIn short, they used &quot;clean verify sonar:sonar&quot; rather than &quot;clean test sonar:sonar&quot; Maven build targets. The change triggered the code coverage plugin that I was looking for to publish code coverage scores in the Sonarqube dashboard.\r\n\r\nAs an aside, the warning message I also shared regarding ```&lt;systemPropertyVariables&gt;``` was not critical to solving the problem, and I decided to go without that part of the code, and still get all the reports in the Sonarqube dashboard I was looking for.","title":"Getting Sonarqube to show a code Coverage score for a simple Java/JUnit/Maven project with Jacoco plugin","body":"<p>I was able to finally answer the question based upon a similar example I just found on this GitHub project:\n<a href=\"https://github.com/SonarSource/sonar-scanning-examples/tree/master/sonarqube-scanner-maven/maven-basic\" rel=\"nofollow noreferrer\">https://github.com/SonarSource/sonar-scanning-examples/tree/master/sonarqube-scanner-maven/maven-basic</a></p>\n<p>In short, they used &quot;clean verify sonar:sonar&quot; rather than &quot;clean test sonar:sonar&quot; Maven build targets. The change triggered the code coverage plugin that I was looking for to publish code coverage scores in the Sonarqube dashboard.</p>\n<p>As an aside, the warning message I also shared regarding <code>&lt;systemPropertyVariables&gt;</code> was not critical to solving the problem, and I decided to go without that part of the code, and still get all the reports in the Sonarqube dashboard I was looking for.</p>\n"}],"owner":{"account_id":19496816,"reputation":893,"user_id":14263818,"display_name":"Steven"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":4108,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":71058142,"answer_count":1,"score":1,"last_activity_date":1644449834,"creation_date":1644276939,"question_id":71026783,"body_markdown":"I&#39;m practicing on a very small Java/JUnit/Maven project with the Jacoco plugin to practice with the Code Coverage feature of Sonarqube.\r\n\r\nThe core code for the example is small. Here is the class under test:\r\n\r\n```\r\npackage com.somebody.sonarqube;\r\n\r\npublic class Calculator {\r\n\t\r\n\t// Method to add two numbers\r\n\tpublic int addNumbers(int one, int two) {\r\n\t\treturn one + two;\r\n\t}\r\n\t\r\n\t// Method to subtract two numbers\r\n\tpublic int subtractNumbers(int one, int two) {\r\n\t\treturn one - two;\r\n\t}\r\n}\r\n```\r\n\r\nAnd here are the unit tests:\r\n\r\n```\r\npackage com.somebody.sonarqube;\r\n\r\nimport static org.junit.Assert.*;\r\n\r\nimport org.junit.Test;\r\n\r\npublic class CalculatorTest {\r\n\r\n\t@Test\r\n\tpublic void testAddNumbers() {\r\n\t\tCalculator myCalc = new Calculator();\r\n\t\tassertEquals(10, myCalc.addNumbers(5, 5));\r\n\t}\r\n\r\n\t@Test\r\n\tpublic void testSubtractNumbers() {\r\n\t\tCalculator myCalc = new Calculator();\r\n\t\tassertEquals(5, myCalc.subtractNumbers(10, 5));\r\n\t}\r\n\r\n}\r\n```\r\n\r\nThe two methods in the class under test are covered by the two unit tests respectively, so as far as &quot;Code Coverage&quot; is concerned, that Sonarqube score should be 100%.\r\n\r\nWhen trying to get this score after running my &quot;clean test sonar:sonar&quot; Maven build targets, I&#39;m getting 0% instead:\r\n\r\n[![Sonarqube score][1]][1]\r\n\r\n  [1]: https://i.stack.imgur.com/XLfsF.png\r\n\r\nSo the part I&#39;m having the most trouble with is getting the various components in the pom.xml file working together. At this time there&#39;s a warning at the ```&lt;systemPropertyVariables&gt;``` block at the bottom that reports ```Invalid plugin configuration: systemPropertyVariables```. Here&#39;s the full pom.xml file:\r\n\r\n```\r\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;\r\n   xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n   xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n   &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n   &lt;groupId&gt;com.somebody.sonarqube&lt;/groupId&gt;\r\n   &lt;artifactId&gt;HelloSonarqube&lt;/artifactId&gt;\r\n   &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\r\n   &lt;name&gt;HelloSonarqube&lt;/name&gt;\r\n   &lt;description&gt;Small example of Sonarqube and JUnit tests.&lt;/description&gt;\r\n   \r\n   &lt;properties&gt;\r\n      &lt;maven.compiler.source&gt;11&lt;/maven.compiler.source&gt;\r\n      &lt;maven.compiler.target&gt;11&lt;/maven.compiler.target&gt;\r\n   &lt;/properties&gt;\r\n   \r\n   &lt;dependencies&gt;\r\n      &lt;dependency&gt;\r\n         &lt;groupId&gt;junit&lt;/groupId&gt;\r\n         &lt;artifactId&gt;junit&lt;/artifactId&gt;\r\n         &lt;version&gt;4.13.2&lt;/version&gt;\r\n         &lt;scope&gt;test&lt;/scope&gt;\r\n      &lt;/dependency&gt;\r\n      &lt;dependency&gt;\r\n         &lt;groupId&gt;org.sonarsource.scanner.maven&lt;/groupId&gt;\r\n         &lt;artifactId&gt;sonar-maven-plugin&lt;/artifactId&gt;\r\n         &lt;version&gt;3.9.1.2184&lt;/version&gt;\r\n      &lt;/dependency&gt;\r\n   &lt;/dependencies&gt;\r\n   \r\n   &lt;build&gt;\r\n      &lt;plugins&gt;\r\n         &lt;plugin&gt;\r\n            &lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;\r\n            &lt;version&gt;2.22.2&lt;/version&gt;\r\n         &lt;/plugin&gt;\r\n         &lt;plugin&gt;\r\n            &lt;artifactId&gt;maven-failsafe-plugin&lt;/artifactId&gt;\r\n            &lt;version&gt;2.22.2&lt;/version&gt;\r\n         &lt;/plugin&gt;\r\n         &lt;plugin&gt;\r\n            &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n            &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\r\n            &lt;version&gt;3.9.0&lt;/version&gt;\r\n            &lt;configuration&gt;\r\n               &lt;release&gt;11&lt;/release&gt;\r\n            &lt;/configuration&gt;\r\n         &lt;/plugin&gt;\r\n         &lt;plugin&gt;\r\n            &lt;groupId&gt;org.jacoco&lt;/groupId&gt;\r\n            &lt;artifactId&gt;jacoco-maven-plugin&lt;/artifactId&gt;\r\n            &lt;version&gt;0.8.7&lt;/version&gt;\r\n            &lt;executions&gt;\r\n               &lt;execution&gt;\r\n                  &lt;id&gt;prepare-agent&lt;/id&gt;\r\n                  &lt;goals&gt;\r\n                     &lt;goal&gt;prepare-agent&lt;/goal&gt;\r\n                  &lt;/goals&gt;\r\n               &lt;/execution&gt;\r\n               &lt;execution&gt;\r\n                  &lt;id&gt;report&lt;/id&gt;\r\n                  &lt;phase&gt;prepare-package&lt;/phase&gt;\r\n                  &lt;goals&gt;\r\n                     &lt;goal&gt;report&lt;/goal&gt;\r\n                  &lt;/goals&gt;\r\n               &lt;/execution&gt;\r\n               &lt;execution&gt;\r\n                  &lt;id&gt;post-unit-test&lt;/id&gt;\r\n                  &lt;phase&gt;test&lt;/phase&gt;\r\n                  &lt;goals&gt;\r\n                     &lt;goal&gt;report&lt;/goal&gt;\r\n                  &lt;/goals&gt;\r\n                  &lt;configuration&gt;\r\n                     &lt;dataFile&gt;target/jacoco.exec&lt;/dataFile&gt;\r\n                     &lt;outputDirectory&gt;target/jacoco-ut&lt;/outputDirectory&gt;\r\n                  &lt;/configuration&gt;\r\n               &lt;/execution&gt;\r\n            &lt;/executions&gt;\r\n\t\t\t&lt;configuration&gt;\r\n\t\t\t   &lt;systemPropertyVariables&gt;\r\n\t\t\t\t  &lt;jacoco-agent.destfile&gt;target/jacoco.exec&lt;/jacoco-agent.destfile&gt;\r\n\t\t\t   &lt;/systemPropertyVariables&gt;\r\n\t\t\t&lt;/configuration&gt;\r\n         &lt;/plugin&gt;\r\n      &lt;/plugins&gt;\r\n   &lt;/build&gt;\r\n&lt;/project&gt;\r\n```\r\n\r\nI&#39;ve tried a lot of variations to this, including changing JUnit 4 to version 5 (I&#39;d be interested to hear about issues on this too). From my reading I generally understand that the Eclipse/JUnit lifecycle is not fully working harmoniously with the Maven lifecycle by default, hence it&#39;s missing something. The solutions I&#39;ve seen/tried are quite specific to certain project setups, and  I have tried manually setting &quot;arguments&quot; and other changes. Would be really thrilled to see your opinions on this having spent a number of hours playing with different versions.","title":"Getting Sonarqube to show a code Coverage score for a simple Java/JUnit/Maven project with Jacoco plugin","body":"<p>I'm practicing on a very small Java/JUnit/Maven project with the Jacoco plugin to practice with the Code Coverage feature of Sonarqube.</p>\n<p>The core code for the example is small. Here is the class under test:</p>\n<pre><code>package com.somebody.sonarqube;\n\npublic class Calculator {\n    \n    // Method to add two numbers\n    public int addNumbers(int one, int two) {\n        return one + two;\n    }\n    \n    // Method to subtract two numbers\n    public int subtractNumbers(int one, int two) {\n        return one - two;\n    }\n}\n</code></pre>\n<p>And here are the unit tests:</p>\n<pre><code>package com.somebody.sonarqube;\n\nimport static org.junit.Assert.*;\n\nimport org.junit.Test;\n\npublic class CalculatorTest {\n\n    @Test\n    public void testAddNumbers() {\n        Calculator myCalc = new Calculator();\n        assertEquals(10, myCalc.addNumbers(5, 5));\n    }\n\n    @Test\n    public void testSubtractNumbers() {\n        Calculator myCalc = new Calculator();\n        assertEquals(5, myCalc.subtractNumbers(10, 5));\n    }\n\n}\n</code></pre>\n<p>The two methods in the class under test are covered by the two unit tests respectively, so as far as &quot;Code Coverage&quot; is concerned, that Sonarqube score should be 100%.</p>\n<p>When trying to get this score after running my &quot;clean test sonar:sonar&quot; Maven build targets, I'm getting 0% instead:</p>\n<p><a href=\"https://i.stack.imgur.com/XLfsF.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/XLfsF.png\" alt=\"Sonarqube score\" /></a></p>\n<p>So the part I'm having the most trouble with is getting the various components in the pom.xml file working together. At this time there's a warning at the <code>&lt;systemPropertyVariables&gt;</code> block at the bottom that reports <code>Invalid plugin configuration: systemPropertyVariables</code>. Here's the full pom.xml file:</p>\n<pre><code>&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;\n   xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n   xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n   &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n   &lt;groupId&gt;com.somebody.sonarqube&lt;/groupId&gt;\n   &lt;artifactId&gt;HelloSonarqube&lt;/artifactId&gt;\n   &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n   &lt;name&gt;HelloSonarqube&lt;/name&gt;\n   &lt;description&gt;Small example of Sonarqube and JUnit tests.&lt;/description&gt;\n   \n   &lt;properties&gt;\n      &lt;maven.compiler.source&gt;11&lt;/maven.compiler.source&gt;\n      &lt;maven.compiler.target&gt;11&lt;/maven.compiler.target&gt;\n   &lt;/properties&gt;\n   \n   &lt;dependencies&gt;\n      &lt;dependency&gt;\n         &lt;groupId&gt;junit&lt;/groupId&gt;\n         &lt;artifactId&gt;junit&lt;/artifactId&gt;\n         &lt;version&gt;4.13.2&lt;/version&gt;\n         &lt;scope&gt;test&lt;/scope&gt;\n      &lt;/dependency&gt;\n      &lt;dependency&gt;\n         &lt;groupId&gt;org.sonarsource.scanner.maven&lt;/groupId&gt;\n         &lt;artifactId&gt;sonar-maven-plugin&lt;/artifactId&gt;\n         &lt;version&gt;3.9.1.2184&lt;/version&gt;\n      &lt;/dependency&gt;\n   &lt;/dependencies&gt;\n   \n   &lt;build&gt;\n      &lt;plugins&gt;\n         &lt;plugin&gt;\n            &lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;\n            &lt;version&gt;2.22.2&lt;/version&gt;\n         &lt;/plugin&gt;\n         &lt;plugin&gt;\n            &lt;artifactId&gt;maven-failsafe-plugin&lt;/artifactId&gt;\n            &lt;version&gt;2.22.2&lt;/version&gt;\n         &lt;/plugin&gt;\n         &lt;plugin&gt;\n            &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n            &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n            &lt;version&gt;3.9.0&lt;/version&gt;\n            &lt;configuration&gt;\n               &lt;release&gt;11&lt;/release&gt;\n            &lt;/configuration&gt;\n         &lt;/plugin&gt;\n         &lt;plugin&gt;\n            &lt;groupId&gt;org.jacoco&lt;/groupId&gt;\n            &lt;artifactId&gt;jacoco-maven-plugin&lt;/artifactId&gt;\n            &lt;version&gt;0.8.7&lt;/version&gt;\n            &lt;executions&gt;\n               &lt;execution&gt;\n                  &lt;id&gt;prepare-agent&lt;/id&gt;\n                  &lt;goals&gt;\n                     &lt;goal&gt;prepare-agent&lt;/goal&gt;\n                  &lt;/goals&gt;\n               &lt;/execution&gt;\n               &lt;execution&gt;\n                  &lt;id&gt;report&lt;/id&gt;\n                  &lt;phase&gt;prepare-package&lt;/phase&gt;\n                  &lt;goals&gt;\n                     &lt;goal&gt;report&lt;/goal&gt;\n                  &lt;/goals&gt;\n               &lt;/execution&gt;\n               &lt;execution&gt;\n                  &lt;id&gt;post-unit-test&lt;/id&gt;\n                  &lt;phase&gt;test&lt;/phase&gt;\n                  &lt;goals&gt;\n                     &lt;goal&gt;report&lt;/goal&gt;\n                  &lt;/goals&gt;\n                  &lt;configuration&gt;\n                     &lt;dataFile&gt;target/jacoco.exec&lt;/dataFile&gt;\n                     &lt;outputDirectory&gt;target/jacoco-ut&lt;/outputDirectory&gt;\n                  &lt;/configuration&gt;\n               &lt;/execution&gt;\n            &lt;/executions&gt;\n            &lt;configuration&gt;\n               &lt;systemPropertyVariables&gt;\n                  &lt;jacoco-agent.destfile&gt;target/jacoco.exec&lt;/jacoco-agent.destfile&gt;\n               &lt;/systemPropertyVariables&gt;\n            &lt;/configuration&gt;\n         &lt;/plugin&gt;\n      &lt;/plugins&gt;\n   &lt;/build&gt;\n&lt;/project&gt;\n</code></pre>\n<p>I've tried a lot of variations to this, including changing JUnit 4 to version 5 (I'd be interested to hear about issues on this too). From my reading I generally understand that the Eclipse/JUnit lifecycle is not fully working harmoniously with the Maven lifecycle by default, hence it's missing something. The solutions I've seen/tried are quite specific to certain project setups, and  I have tried manually setting &quot;arguments&quot; and other changes. Would be really thrilled to see your opinions on this having spent a number of hours playing with different versions.</p>\n"},{"tags":["java","binaryfiles","binary-data"],"comments":[{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":0,"creation_date":1644449100,"post_id":71058026,"comment_id":125613301,"body_markdown":"That&#39;s what the write method does. Can you explain what you want to do in more detail.","body":"That&#39;s what the write method does. Can you explain what you want to do in more detail."},{"owner":{"account_id":16710196,"reputation":11,"user_id":12077584,"display_name":"Jacob E"},"score":0,"creation_date":1644449196,"post_id":71058026,"comment_id":125613323,"body_markdown":"My understanding was that write inserts an array of bytes rather than replacing them. For example &lt;byte0&gt;&lt;byte1&gt; would become &lt;byte0&gt;&lt;newByte&gt;&lt;byte1&gt; rather than &lt;byte0&gt;&lt;newByte&gt;","body":"My understanding was that write inserts an array of bytes rather than replacing them. For example &lt;byte0&gt;&lt;byte1&gt; would become &lt;byte0&gt;&lt;newByte&gt;&lt;byte1&gt; rather than &lt;byte0&gt;&lt;newByte&gt;"},{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":0,"creation_date":1644449490,"post_id":71058026,"comment_id":125613389,"body_markdown":"Read the Javadoc https://docs.oracle.com/javase/7/docs/api/java/io/RandomAccessFile.html and you can write a small program to check.","body":"Read the Javadoc <a href=\"https://docs.oracle.com/javase/7/docs/api/java/io/RandomAccessFile.html\" rel=\"nofollow noreferrer\">docs.oracle.com/javase/7/docs/api/java/io/RandomAccessFile.h&zwnj;&#8203;tml</a> and you can write a small program to check."},{"owner":{"account_id":14357,"reputation":9128,"user_id":29470,"display_name":"Tim Moore"},"score":0,"creation_date":1644452147,"post_id":71058026,"comment_id":125613890,"body_markdown":"I don&#39;t think your understanding is correct. The documentation says &quot;If the random access file is created in read/write mode, then output operations are also available; output operations write bytes starting at the file pointer and advance the file pointer past the bytes written. Output operations that write past the current end of the implied array cause the array to be extended.&quot; This implies that output operations that do not write past the end will not change the size.","body":"I don&#39;t think your understanding is correct. The documentation says &quot;If the random access file is created in read/write mode, then output operations are also available; output operations write bytes starting at the file pointer and advance the file pointer past the bytes written. Output operations that write past the current end of the implied array cause the array to be extended.&quot; This implies that output operations that do not write past the end will not change the size."}],"owner":{"account_id":16710196,"reputation":11,"user_id":12077584,"display_name":"Jacob E"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":75,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1644449640,"creation_date":1644448863,"question_id":71058026,"body_markdown":"Is there a way in Java to replace a sequence of bytes in a binary file?\r\nI know there are the ```write``` methods in ```RandomAccessFile```, but I&#39;m looking for a way to replace the next N bytes in the file.\r\n\r\nEdit: my understanding is that ```write``` will insert an array of bytes rather than replacing them.\r\n\r\nFor example:\r\n\r\nStarting file: \\&lt;byte0&gt;\\&lt;byte1&gt;\\&lt;byte2&gt;...\r\n\r\nWhat I want: \\&lt;byte0&gt;\\&lt;insertedByte&gt;\\&lt;byte2&gt;...\r\n\r\nMy understanding of how  ```write``` works: \\&lt;byte0&gt;\\&lt;insertedByte&gt;\\&lt;byte1&gt;\\&lt;byte2&gt;","title":"Replace sequence of bytes in binary file Java","body":"<p>Is there a way in Java to replace a sequence of bytes in a binary file?\nI know there are the <code>write</code> methods in <code>RandomAccessFile</code>, but I'm looking for a way to replace the next N bytes in the file.</p>\n<p>Edit: my understanding is that <code>write</code> will insert an array of bytes rather than replacing them.</p>\n<p>For example:</p>\n<p>Starting file: &lt;byte0&gt;&lt;byte1&gt;&lt;byte2&gt;...</p>\n<p>What I want: &lt;byte0&gt;&lt;insertedByte&gt;&lt;byte2&gt;...</p>\n<p>My understanding of how  <code>write</code> works: &lt;byte0&gt;&lt;insertedByte&gt;&lt;byte1&gt;&lt;byte2&gt;</p>\n"},{"tags":["java","geotools","wms"],"answers":[{"tags":[],"owner":{"account_id":195980,"reputation":10228,"user_id":439194,"accept_rate":100,"display_name":"Ian Turton"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1644397774,"creation_date":1644397774,"answer_id":71046707,"question_id":71040542,"body_markdown":"From a quick check (and a google of the [error message][1]) it looks like the XML document returned by that server is &quot;invalid&quot; as it has no `systemId` set.\r\n\r\nI&#39;ve not seen this error before so it might be due to a recent upgrade of the XML parser used by GeoTools or some other change, or a change in MapServer behaviour.  Technically, this isn&#39;t a GeoTools bug, but it would be nice to find a way to fix it so we can continue to use MapServer WMS.\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/67270505/error-white-spaces-are-required-between-publicid-and-systemid","title":"Request image from WMS to local storage in Java","body":"<p>From a quick check (and a google of the <a href=\"https://stackoverflow.com/questions/67270505/error-white-spaces-are-required-between-publicid-and-systemid\">error message</a>) it looks like the XML document returned by that server is &quot;invalid&quot; as it has no <code>systemId</code> set.</p>\n<p>I've not seen this error before so it might be due to a recent upgrade of the XML parser used by GeoTools or some other change, or a change in MapServer behaviour.  Technically, this isn't a GeoTools bug, but it would be nice to find a way to fix it so we can continue to use MapServer WMS.</p>\n"},{"tags":[],"owner":{"account_id":466160,"reputation":3576,"user_id":870743,"accept_rate":100,"display_name":"Brett Walker"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1644448772,"creation_date":1644448772,"answer_id":71058016,"question_id":71040542,"body_markdown":"I think the problem is as the error message indicates.\r\n\r\nIn the code snippet below the \r\n&lt;&lt; LF &gt;&gt; character sequence is to indicate a LF character. And any white space present is white space. Between the DTD URL string and the VendorSpecificCapabilities element there is no white space. Unless the LF character is considered white space; which I think is an edge case in an implementation. It is this that could be the cause of the problem.\r\n\r\n\r\n    &lt;?xml version=&quot;1.0&quot;?&gt;&lt;&lt;LF&gt;&gt;\r\n    &lt;!DOCTYPE WMT_MS_Capabilities SYSTEM \r\n    &quot;http://schemas.opengis.net/wms/1.1.0/capabilities_1_1_0.dtd&quot;&lt;&lt;LF&gt;&gt;\r\n    [&lt;&lt;LF&gt;&gt;\r\n     &lt;!ELEMENT VendorSpecificCapabilities EMPTY&gt;&lt;&lt;LF&gt;&gt;\r\n     ]&gt;  &lt;!-- end of DOCTYPE declaration --&gt;&lt;&lt;LF&gt;&gt;\r\n    &lt;WMT_MS_Capabilities version=&quot;1.1.0&quot;&gt;&lt;&lt;LF&gt;&gt;\r\n    &lt;Service&gt;&lt;&lt;LF&gt;&gt;\r\n    ...\r\n\r\nThe line wrapping between the SYSTEM word and the DTD URL string is an artifact of stackoverflow","title":"Request image from WMS to local storage in Java","body":"<p>I think the problem is as the error message indicates.</p>\n<p>In the code snippet below the\n&lt;&lt; LF &gt;&gt; character sequence is to indicate a LF character. And any white space present is white space. Between the DTD URL string and the VendorSpecificCapabilities element there is no white space. Unless the LF character is considered white space; which I think is an edge case in an implementation. It is this that could be the cause of the problem.</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot;?&gt;&lt;&lt;LF&gt;&gt;\n&lt;!DOCTYPE WMT_MS_Capabilities SYSTEM \n&quot;http://schemas.opengis.net/wms/1.1.0/capabilities_1_1_0.dtd&quot;&lt;&lt;LF&gt;&gt;\n[&lt;&lt;LF&gt;&gt;\n &lt;!ELEMENT VendorSpecificCapabilities EMPTY&gt;&lt;&lt;LF&gt;&gt;\n ]&gt;  &lt;!-- end of DOCTYPE declaration --&gt;&lt;&lt;LF&gt;&gt;\n&lt;WMT_MS_Capabilities version=&quot;1.1.0&quot;&gt;&lt;&lt;LF&gt;&gt;\n&lt;Service&gt;&lt;&lt;LF&gt;&gt;\n...\n</code></pre>\n<p>The line wrapping between the SYSTEM word and the DTD URL string is an artifact of stackoverflow</p>\n"}],"owner":{"account_id":24185973,"reputation":1,"user_id":18145854,"display_name":"weltweit"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":332,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1644448772,"creation_date":1644352521,"question_id":71040542,"body_markdown":"I have been trying to retrieve image from WMS in Java using the Geotools and save the image locally. I have simply followed this link https://gitlab.com/-/snippets/1883964 by Ian Turton and from the official documentation https://docs.geotools.org/latest/userguide/extension/wms/wms.html\r\n\r\nMy code is \r\n\r\n    package wmsexplore;\r\n    import java.awt.image.BufferedImage;\r\n    import java.io.File;\r\n    import java.io.IOException;\r\n    import java.io.StringWriter;\r\n    import java.net.MalformedURLException;\r\n    import java.net.URL;\r\n\r\n    import javax.imageio.ImageIO;\r\n    \r\n    import org.apache.commons.io.IOUtils;\r\n    import org.geotools.ows.ServiceException;\r\n    import org.geotools.ows.wms.WebMapServer;\r\n    import org.geotools.ows.wms.request.GetMapRequest;\r\n    import org.geotools.ows.wms.response.GetMapResponse;\r\n\r\n    public class WMSConnector {\r\n      public static void main(String[] args) {\r\n    \r\n    \r\n        URL url = null;\r\n        try {\r\n          url = new URL(&quot;http://maps.heigit.org/osm-wms/service?service=WMS&amp;request=GetCapabilities&amp;version=1.1.0&quot;);\r\n        } catch (MalformedURLException e) {\r\n          // will not happen\r\n        }\r\n    \r\n        WebMapServer wms = null;\r\n        try {\r\n          wms = new WebMapServer(url);\r\n          GetMapRequest request = wms.createGetMapRequest();\r\n          request.addLayer(&quot;osm_auto:all&quot;, &quot;&quot;);\r\n          String format = &quot;image/png&quot;;\r\n          request.setFormat(format);\r\n          request.setDimensions(&quot;1000&quot;, &quot;1000&quot;); // sets the dimensions of the image\r\n                                               // to be returned from the server\r\n          request.setTransparent(true);\r\n          request.setSRS(&quot;EPSG:4326&quot;);\r\n          request.setBBox(&quot;-71.13,42.32,-71.03,42.42&quot;);\r\n    \r\n          try {\r\n            GetMapResponse response = (GetMapResponse) wms.issueRequest(request);\r\n            if (response.getContentType().equalsIgnoreCase(format)) {\r\n              BufferedImage image = ImageIO.read(response.getInputStream());\r\n              File outputfile = new File(&quot;saved.png&quot;);\r\n              ImageIO.write(image, &quot;png&quot;, outputfile);\r\n            } else {\r\n              StringWriter writer = new StringWriter();\r\n              IOUtils.copy(response.getInputStream(), writer);\r\n              String error = writer.toString();\r\n              System.out.println(error);\r\n    \r\n            }\r\n          } catch (ServiceException | IOException e) {\r\n            // TODO Auto-generated catch block\r\n            e.printStackTrace();\r\n    \r\n          }\r\n        } catch (IOException e) {\r\n          // There was an error communicating with the server\r\n          // For example, the server is down\r\n        } catch (ServiceException e) {\r\n          // The server returned a ServiceException (unusual in this case)\r\n        }\r\n    \r\n      }\r\n    }\r\n\r\nThe error I have been getting is :\r\n\r\n    Feb 09, 2022 2:09:36 AM org.geotools.xml.XMLSAXHandler fatalError\r\n    SEVERE: FATAL White spaces are required between publicId and systemId.\r\n    Feb 09, 2022 2:09:36 AM org.geotools.xml.XMLSAXHandler fatalError\r\n    SEVERE: col 50, line 1\r\n    Feb 09, 2022 2:09:36 AM org.geotools.data.ows.AbstractOpenWebService internalIssueRequest\r\n    SEVERE: Failed to execute request http://maps.heigit.org/osm-wms/service?REQUEST=GetCapabilities&amp;VERSION=1.1.0&amp;SERVICE=WMS\r\n    Feb 09, 2022 2:09:36 AM org.geotools.xml.XMLSAXHandler fatalError\r\n    SEVERE: FATAL White spaces are required between publicId and systemId.\r\n    Feb 09, 2022 2:09:36 AM org.geotools.xml.XMLSAXHandler fatalError\r\n    SEVERE: col 50, line 1\r\n    Feb 09, 2022 2:09:36 AM org.geotools.data.ows.AbstractOpenWebService internalIssueRequest\r\n    SEVERE: Failed to execute request http://maps.heigit.org/osm-wms/service?request=capabilities&amp;service=WMS&amp;wmtver=1.0.0\r\n\r\n***What might have gone wrong here?*** Thanks for the help in advance !! ","title":"Request image from WMS to local storage in Java","body":"<p>I have been trying to retrieve image from WMS in Java using the Geotools and save the image locally. I have simply followed this link <a href=\"https://gitlab.com/-/snippets/1883964\" rel=\"nofollow noreferrer\">https://gitlab.com/-/snippets/1883964</a> by Ian Turton and from the official documentation <a href=\"https://docs.geotools.org/latest/userguide/extension/wms/wms.html\" rel=\"nofollow noreferrer\">https://docs.geotools.org/latest/userguide/extension/wms/wms.html</a></p>\n<p>My code is</p>\n<pre><code>package wmsexplore;\nimport java.awt.image.BufferedImage;\nimport java.io.File;\nimport java.io.IOException;\nimport java.io.StringWriter;\nimport java.net.MalformedURLException;\nimport java.net.URL;\n\nimport javax.imageio.ImageIO;\n\nimport org.apache.commons.io.IOUtils;\nimport org.geotools.ows.ServiceException;\nimport org.geotools.ows.wms.WebMapServer;\nimport org.geotools.ows.wms.request.GetMapRequest;\nimport org.geotools.ows.wms.response.GetMapResponse;\n\npublic class WMSConnector {\n  public static void main(String[] args) {\n\n\n    URL url = null;\n    try {\n      url = new URL(&quot;http://maps.heigit.org/osm-wms/service?service=WMS&amp;request=GetCapabilities&amp;version=1.1.0&quot;);\n    } catch (MalformedURLException e) {\n      // will not happen\n    }\n\n    WebMapServer wms = null;\n    try {\n      wms = new WebMapServer(url);\n      GetMapRequest request = wms.createGetMapRequest();\n      request.addLayer(&quot;osm_auto:all&quot;, &quot;&quot;);\n      String format = &quot;image/png&quot;;\n      request.setFormat(format);\n      request.setDimensions(&quot;1000&quot;, &quot;1000&quot;); // sets the dimensions of the image\n                                           // to be returned from the server\n      request.setTransparent(true);\n      request.setSRS(&quot;EPSG:4326&quot;);\n      request.setBBox(&quot;-71.13,42.32,-71.03,42.42&quot;);\n\n      try {\n        GetMapResponse response = (GetMapResponse) wms.issueRequest(request);\n        if (response.getContentType().equalsIgnoreCase(format)) {\n          BufferedImage image = ImageIO.read(response.getInputStream());\n          File outputfile = new File(&quot;saved.png&quot;);\n          ImageIO.write(image, &quot;png&quot;, outputfile);\n        } else {\n          StringWriter writer = new StringWriter();\n          IOUtils.copy(response.getInputStream(), writer);\n          String error = writer.toString();\n          System.out.println(error);\n\n        }\n      } catch (ServiceException | IOException e) {\n        // TODO Auto-generated catch block\n        e.printStackTrace();\n\n      }\n    } catch (IOException e) {\n      // There was an error communicating with the server\n      // For example, the server is down\n    } catch (ServiceException e) {\n      // The server returned a ServiceException (unusual in this case)\n    }\n\n  }\n}\n</code></pre>\n<p>The error I have been getting is :</p>\n<pre><code>Feb 09, 2022 2:09:36 AM org.geotools.xml.XMLSAXHandler fatalError\nSEVERE: FATAL White spaces are required between publicId and systemId.\nFeb 09, 2022 2:09:36 AM org.geotools.xml.XMLSAXHandler fatalError\nSEVERE: col 50, line 1\nFeb 09, 2022 2:09:36 AM org.geotools.data.ows.AbstractOpenWebService internalIssueRequest\nSEVERE: Failed to execute request http://maps.heigit.org/osm-wms/service?REQUEST=GetCapabilities&amp;VERSION=1.1.0&amp;SERVICE=WMS\nFeb 09, 2022 2:09:36 AM org.geotools.xml.XMLSAXHandler fatalError\nSEVERE: FATAL White spaces are required between publicId and systemId.\nFeb 09, 2022 2:09:36 AM org.geotools.xml.XMLSAXHandler fatalError\nSEVERE: col 50, line 1\nFeb 09, 2022 2:09:36 AM org.geotools.data.ows.AbstractOpenWebService internalIssueRequest\nSEVERE: Failed to execute request http://maps.heigit.org/osm-wms/service?request=capabilities&amp;service=WMS&amp;wmtver=1.0.0\n</code></pre>\n<p><em><strong>What might have gone wrong here?</strong></em> Thanks for the help in advance !!</p>\n"},{"tags":["java","unit-testing","jhipster"],"comments":[{"owner":{"account_id":33534,"reputation":16098,"user_id":93960,"display_name":"Ga&#235;l Marziou"},"score":0,"creation_date":1644488254,"post_id":71058008,"comment_id":125622243,"body_markdown":"gradle or maven?","body":"gradle or maven?"},{"owner":{"account_id":441129,"reputation":2872,"user_id":831061,"accept_rate":75,"display_name":"luso"},"score":0,"creation_date":1644512422,"post_id":71058008,"comment_id":125632390,"body_markdown":"Gradle, of course ;)","body":"Gradle, of course ;)"},{"owner":{"account_id":2469136,"reputation":641,"user_id":2151471,"display_name":"atomfrede"},"score":0,"creation_date":1644512497,"post_id":71058008,"comment_id":125632424,"body_markdown":"Are you running the tests from intellij and forward all actions to gradle?","body":"Are you running the tests from intellij and forward all actions to gradle?"},{"owner":{"account_id":441129,"reputation":2872,"user_id":831061,"accept_rate":75,"display_name":"luso"},"score":0,"creation_date":1644514637,"post_id":71058008,"comment_id":125633248,"body_markdown":"I do use IntelliJ and tried to launch the tests through it, I also tried using the gradle with “gradle test” but then I expect it to run all the tests. I didn’t try however to do a gradle test to specific tests. I wanted to know why that happens using IntelliJ","body":"I do use IntelliJ and tried to launch the tests through it, I also tried using the gradle with “gradle test” but then I expect it to run all the tests. I didn’t try however to do a gradle test to specific tests. I wanted to know why that happens using IntelliJ"},{"owner":{"account_id":441129,"reputation":2872,"user_id":831061,"accept_rate":75,"display_name":"luso"},"score":0,"creation_date":1644514710,"post_id":71058008,"comment_id":125633280,"body_markdown":"Or if there’s a flag such as gradle test -x webapp","body":"Or if there’s a flag such as gradle test -x webapp"},{"owner":{"account_id":441129,"reputation":2872,"user_id":831061,"accept_rate":75,"display_name":"luso"},"score":0,"creation_date":1644616664,"post_id":71058008,"comment_id":125663000,"body_markdown":"@atomfrede I did check and yes, I was using using Gradle to run test. I did change the setting to &quot;Run tests using IntelliJ&quot; and now I can run tests one by one. But this is the first time I see such a behavior. I usually leave the default setting and do use Gradle","body":"@atomfrede I did check and yes, I was using using Gradle to run test. I did change the setting to &quot;Run tests using IntelliJ&quot; and now I can run tests one by one. But this is the first time I see such a behavior. I usually leave the default setting and do use Gradle"},{"owner":{"account_id":2469136,"reputation":641,"user_id":2151471,"display_name":"atomfrede"},"score":0,"creation_date":1645649697,"post_id":71058008,"comment_id":125931963,"body_markdown":"Yes totally agree. Using gradle as the test runner is usually working much better","body":"Yes totally agree. Using gradle as the test runner is usually working much better"}],"owner":{"account_id":441129,"reputation":2872,"user_id":831061,"accept_rate":75,"display_name":"luso"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":288,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1644448681,"creation_date":1644448681,"question_id":71058008,"body_markdown":"I would like to frequently run the tests I&#39;m working on, UT or IT but, whatever I try, I see npm messages passing by,  `npm run webapp:build:dev`, `npm_install`, `webapp_test`, and of course a bunch of `.spec.ts` tests being executed.\r\n\r\nRight clicking/run even in a single JUnit test starts all this, which takes a while to execute.\r\n\r\nSo, what&#39;s the way, in a monolithic JHipster application, to run tests ignoring the frontend?\r\n","title":"Running tests in JHipster application","body":"<p>I would like to frequently run the tests I'm working on, UT or IT but, whatever I try, I see npm messages passing by,  <code>npm run webapp:build:dev</code>, <code>npm_install</code>, <code>webapp_test</code>, and of course a bunch of <code>.spec.ts</code> tests being executed.</p>\n<p>Right clicking/run even in a single JUnit test starts all this, which takes a while to execute.</p>\n<p>So, what's the way, in a monolithic JHipster application, to run tests ignoring the frontend?</p>\n"},{"tags":["java","android","android-manifest","android-espresso"],"comments":[{"owner":{"account_id":19355220,"reputation":725,"user_id":14151698,"display_name":"Manjeet deswal"},"score":0,"creation_date":1644448837,"post_id":71057985,"comment_id":125613242,"body_markdown":"it is in bottom &lt;uses-permission\n        android:name=&quot;android.permission.ACCESS_BACKGROUND_LOCATION&quot;\n        tools:node=&quot;remove&quot; /&gt;     remove this","body":"it is in bottom &lt;uses-permission         android:name=&quot;android.permission.ACCESS_BACKGROUND_LOCATION&quot;         tools:node=&quot;remove&quot; /&gt;     remove this"},{"owner":{"account_id":15792710,"reputation":33,"user_id":11395500,"display_name":"Amrita Sapkota"},"score":0,"creation_date":1644449073,"post_id":71057985,"comment_id":125613292,"body_markdown":"What is the problem with that?My apps uses location in background.","body":"What is the problem with that?My apps uses location in background."},{"owner":{"account_id":19355220,"reputation":725,"user_id":14151698,"display_name":"Manjeet deswal"},"score":1,"creation_date":1644451074,"post_id":71057985,"comment_id":125613674,"body_markdown":"click here[https://stackoverflow.com/questions/54577588/replace-other-declarations-but-no-other-declaration-present]","body":"click here[<a href=\"https://stackoverflow.com/questions/54577588/replace-other-declarations-but-no-other-declaration-present]\" title=\"replace other declarations but no other declaration present%5d\">stackoverflow.com/questions/54577588/&hellip;</a>"}],"owner":{"account_id":15792710,"reputation":33,"user_id":11395500,"display_name":"Amrita Sapkota"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":275,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1644448458,"creation_date":1644448458,"question_id":71057985,"body_markdown":"Warning uses-permission#android.permission.ACCESS_BACKGROUND_LOCATION was tagged at AndroidManifest.xml:16 to remove other declarations but no other declaration present\r\n  \r\n\r\n      &lt;uses-permission android:name=&quot;android.permission.ACCESS_COARSE_LOCATION&quot; /&gt;\r\n        &lt;uses-permission android:name=&quot;android.permission.ACCESS_FINE_LOCATION&quot; /&gt;\r\n        &lt;uses-permission android:name=&quot;android.permission.INTERNET&quot; /&gt;\r\n        &lt;uses-permission android:name=&quot;android.permission.ACCESS_NETWORK_STATE&quot; /&gt;\r\n        &lt;uses-permission android:name=&quot;android.permission.VIBRATE&quot; /&gt;\r\n        &lt;uses-permission android:name=&quot;android.permission.READ_EXTERNAL_STORAGE&quot; /&gt;\r\n        &lt;uses-permission android:name=&quot;android.permission.CALL_PHONE&quot; /&gt;\r\n        &lt;uses-permission android:name=&quot;android.permission.FOREGROUND_SERVICE&quot; /&gt;\r\n        &lt;uses-permission android:name=&quot;android.permission.WRITE_EXTERNAL_STORAGE&quot;/&gt;\r\n        &lt;uses-permission\r\n            android:name=&quot;android.permission.ACCESS_BACKGROUND_LOCATION&quot;\r\n            tools:node=&quot;remove&quot; /&gt;\r\n    \r\n    \r\n    \r\n    here is my buildgradle:\r\n    android {\r\n        compileSdkVersion 28\r\n        buildToolsVersion &#39;28.0.3&#39;\r\n        defaultConfig {\r\n            applicationId &quot;xxx&quot;\r\n            minSdkVersion 19\r\n            targetSdkVersion 28\r\n            versionCode 56\r\n            versionName &quot;1.1.6&quot;\r\n            testInstrumentationRunner &quot;androidx.test.runner.AndroidJUnitRunner&quot;\r\n            multiDexEnabled true\r\n        }\r\n    }","title":"Having issues Manifest merger failed with multiple errors","body":"<p>Warning uses-permission#android.permission.ACCESS_BACKGROUND_LOCATION was tagged at AndroidManifest.xml:16 to remove other declarations but no other declaration present</p>\n<pre><code>  &lt;uses-permission android:name=&quot;android.permission.ACCESS_COARSE_LOCATION&quot; /&gt;\n    &lt;uses-permission android:name=&quot;android.permission.ACCESS_FINE_LOCATION&quot; /&gt;\n    &lt;uses-permission android:name=&quot;android.permission.INTERNET&quot; /&gt;\n    &lt;uses-permission android:name=&quot;android.permission.ACCESS_NETWORK_STATE&quot; /&gt;\n    &lt;uses-permission android:name=&quot;android.permission.VIBRATE&quot; /&gt;\n    &lt;uses-permission android:name=&quot;android.permission.READ_EXTERNAL_STORAGE&quot; /&gt;\n    &lt;uses-permission android:name=&quot;android.permission.CALL_PHONE&quot; /&gt;\n    &lt;uses-permission android:name=&quot;android.permission.FOREGROUND_SERVICE&quot; /&gt;\n    &lt;uses-permission android:name=&quot;android.permission.WRITE_EXTERNAL_STORAGE&quot;/&gt;\n    &lt;uses-permission\n        android:name=&quot;android.permission.ACCESS_BACKGROUND_LOCATION&quot;\n        tools:node=&quot;remove&quot; /&gt;\n\n\n\nhere is my buildgradle:\nandroid {\n    compileSdkVersion 28\n    buildToolsVersion '28.0.3'\n    defaultConfig {\n        applicationId &quot;xxx&quot;\n        minSdkVersion 19\n        targetSdkVersion 28\n        versionCode 56\n        versionName &quot;1.1.6&quot;\n        testInstrumentationRunner &quot;androidx.test.runner.AndroidJUnitRunner&quot;\n        multiDexEnabled true\n    }\n}\n</code></pre>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":36137,"reputation":178789,"user_id":102937,"accept_rate":90,"display_name":"Robert Harvey"},"score":0,"creation_date":1644418094,"post_id":71051580,"comment_id":125601859,"body_markdown":"Your edit makes your question a little better, but what is your objective? Your code example doesn&#39;t make it clear exactly what you&#39;re after.","body":"Your edit makes your question a little better, but what is your objective? Your code example doesn&#39;t make it clear exactly what you&#39;re after."},{"owner":{"account_id":36137,"reputation":178789,"user_id":102937,"accept_rate":90,"display_name":"Robert Harvey"},"score":0,"creation_date":1644418132,"post_id":71051580,"comment_id":125601883,"body_markdown":"The obvious answer to your edited question appears to be [this](https://www.baeldung.com/java-merge-streams).","body":"The obvious answer to your edited question appears to be <a href=\"https://www.baeldung.com/java-merge-streams\" rel=\"nofollow noreferrer\">this</a>."},{"owner":{"account_id":22491103,"reputation":5310,"user_id":16688813,"display_name":"Tom"},"score":1,"creation_date":1644418160,"post_id":71051580,"comment_id":125601891,"body_markdown":"Does this answer your question? [Finding the longest string in an array of Strings](https://stackoverflow.com/questions/26725296/finding-the-longest-string-in-an-array-of-strings)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/26725296/finding-the-longest-string-in-an-array-of-strings\">Finding the longest string in an array of Strings</a>"},{"owner":{"account_id":36137,"reputation":178789,"user_id":102937,"accept_rate":90,"display_name":"Robert Harvey"},"score":0,"creation_date":1644418353,"post_id":71051580,"comment_id":125601978,"body_markdown":"Has @Tom divined what you&#39;re looking for?  Note that the verbal description of your problem appears to be missing one or two words, which is why I mentally glossed over it and reverted to your question title.","body":"Has @Tom divined what you&#39;re looking for?  Note that the verbal description of your problem appears to be missing one or two words, which is why I mentally glossed over it and reverted to your question title."},{"owner":{"account_id":1268556,"reputation":48088,"user_id":1225328,"accept_rate":93,"display_name":"sp00m"},"score":0,"creation_date":1644418435,"post_id":71051580,"comment_id":125602019,"body_markdown":"I would collect the words into a `Map&lt;Integer, List&lt;String&gt;&gt;` directly with something like `.collect(groupingBy(String::length, TreeMap::new, toList()))`, where the last `Map.Entry` would then store the longest words.","body":"I would collect the words into a <code>Map&lt;Integer, List&lt;String&gt;&gt;</code> directly with something like <code>.collect(groupingBy(String::length, TreeMap::new, toList()))</code>, where the last <code>Map.Entry</code> would then store the longest words."},{"owner":{"account_id":21286579,"reputation":7,"user_id":17326167,"display_name":"Good York"},"score":0,"creation_date":1644418508,"post_id":71051580,"comment_id":125602064,"body_markdown":"I wanted to ask if it is possible to combine these streams into one long one","body":"I wanted to ask if it is possible to combine these streams into one long one"},{"owner":{"account_id":2053598,"reputation":41316,"user_id":1831987,"display_name":"VGR"},"score":0,"creation_date":1644425545,"post_id":71051580,"comment_id":125605198,"body_markdown":"Do you have to use Streams?  How about `Collections.max(maxLengthWords, Comparator.comparingInt(String::length))`?  Or, if you must use Streams, `maxLengthWords.stream().max(Comparator.comparingInt(String::length))`.","body":"Do you have to use Streams?  How about <code>Collections.max(maxLengthWords, Comparator.comparingInt(String::length))</code>?  Or, if you must use Streams, <code>maxLengthWords.stream().max(Comparator.comparingInt(String::&zwnj;&#8203;length))</code>."}],"answers":[{"tags":[],"owner":{"account_id":12593956,"reputation":279,"user_id":9159407,"display_name":"omer blechman"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1644418725,"creation_date":1644418725,"answer_id":71051888,"question_id":71051580,"body_markdown":"You can take all collection and connect them with `Stream.of(...)` fucntion.\r\n\r\nI couldn&#39;t understand what do you want to combime from your code but you can combine streams in the following way: \r\n\r\n    Stream.of(collectionA.stream(),collectionB.stream())\r\n\r\nTake a look on:\r\nhttps://docs.oracle.com/javase/8/docs/api/java/util/stream/Stream.html#of-T...-\r\n","title":"Is it possible to combine streams?","body":"<p>You can take all collection and connect them with <code>Stream.of(...)</code> fucntion.</p>\n<p>I couldn't understand what do you want to combime from your code but you can combine streams in the following way:</p>\n<pre><code>Stream.of(collectionA.stream(),collectionB.stream())\n</code></pre>\n<p>Take a look on:\n<a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/stream/Stream.html#of-T...-\" rel=\"nofollow noreferrer\">https://docs.oracle.com/javase/8/docs/api/java/util/stream/Stream.html#of-T...-</a></p>\n"}],"owner":{"account_id":21286579,"reputation":7,"user_id":17326167,"display_name":"Good York"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":157,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"closed_date":1645267871,"answer_count":1,"score":-1,"last_activity_date":1644447965,"creation_date":1644417750,"question_id":71051580,"body_markdown":"I have this code, the task of which is to determine the words of the longest, I made through several streams. How to combine them?\r\n\r\n    List&lt;String&gt; maxLengthWords = ForkJoinTask.invokeAll(createSubtasks()).stream()\r\n            .flatMap(maxLengthWord -&gt; maxLengthWord.join().stream())\r\n            .collect(Collectors.toList());\r\n\r\n    int longest = maxLengthWords.stream()\r\n            .mapToInt(String::length)\r\n            .max()\r\n            .orElse(-1);\r\n\r\n    return maxLengthWords.stream()\r\n            .filter(s -&gt; s.length() == longest)\r\n            .collect(Collectors.toList());","title":"Is it possible to combine streams?","body":"<p>I have this code, the task of which is to determine the words of the longest, I made through several streams. How to combine them?</p>\n<pre><code>List&lt;String&gt; maxLengthWords = ForkJoinTask.invokeAll(createSubtasks()).stream()\n        .flatMap(maxLengthWord -&gt; maxLengthWord.join().stream())\n        .collect(Collectors.toList());\n\nint longest = maxLengthWords.stream()\n        .mapToInt(String::length)\n        .max()\n        .orElse(-1);\n\nreturn maxLengthWords.stream()\n        .filter(s -&gt; s.length() == longest)\n        .collect(Collectors.toList());\n</code></pre>\n"},{"tags":["java","spring-boot","rest","mockmvc"],"comments":[{"owner":{"account_id":231683,"reputation":4218,"user_id":496038,"display_name":"pringi"},"score":0,"creation_date":1644332365,"post_id":71035031,"comment_id":125575105,"body_markdown":"What is your Utils doing? How it creates MockMultipartFile?","body":"What is your Utils doing? How it creates MockMultipartFile?"},{"owner":{"account_id":13136641,"reputation":63,"user_id":9489409,"display_name":"rhl mngl"},"score":0,"creation_date":1644393079,"post_id":71035031,"comment_id":125591796,"body_markdown":"I have updated code, please check now","body":"I have updated code, please check now"}],"answers":[{"tags":[],"owner":{"account_id":231683,"reputation":4218,"user_id":496038,"display_name":"pringi"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1644400573,"creation_date":1644400573,"answer_id":71047411,"question_id":71035031,"body_markdown":"In your `MockMultipartFile` the first parameter (*name*) must match the request parameter property (in this case *document*).\r\n\r\nSo if you change your code to:\r\n\r\n     MockMultipartFile file = new MockMultipartFile(&quot;document&quot;, &quot;test.pdf&quot;, DEFAULT_BINARY.toString(), fi2);\r\n\r\nThe problem should be resolved.","title":"Multipart file with document name not found","body":"<p>In your <code>MockMultipartFile</code> the first parameter (<em>name</em>) must match the request parameter property (in this case <em>document</em>).</p>\n<p>So if you change your code to:</p>\n<pre><code> MockMultipartFile file = new MockMultipartFile(&quot;document&quot;, &quot;test.pdf&quot;, DEFAULT_BINARY.toString(), fi2);\n</code></pre>\n<p>The problem should be resolved.</p>\n"}],"owner":{"account_id":13136641,"reputation":63,"user_id":9489409,"display_name":"rhl mngl"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":286,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1644446963,"creation_date":1644328218,"question_id":71035031,"body_markdown":"I am getting this error in test case for following api.\r\n\r\n&gt; Required request part &#39;document&#39; is not present\r\n\r\n    @PostMapping(value = &quot;/testModel/{modelName}&quot;, consumes = {\r\n    \t\t\tMediaType.MULTIPART_FORM_DATA_VALUE })\r\n    \tpublic ResponseEntity&lt;Object&gt; testModel(@PathVariable(&quot;modelName&quot;) String modelName,\r\n    \t\t\t@RequestPart MultipartFile document) {\r\n    \t\t\r\n    \t}\r\n\r\nfollowing is the test case for above api\r\n\r\n    @Test\r\n    @Transactional\r\n    void testModel() throws Exception {\r\n    \tservice.save(domainModelDTo);\r\n    \r\n    \tFileInputStream fi2 = new FileInputStream(new File(&quot;test.pdf&quot;));\r\n    \tMockMultipartFile file = new MockMultipartFile(&quot;file&quot;, &quot;test.pdf&quot;, DEFAULT_BINARY.toString(), fi2);\r\n    \tlog.debug(&quot;file name {}&quot;, file.getOriginalFilename()); // test.pdf print in log\r\n    \tlog.debug(&quot;file length {}&quot;, file.getBytes().length); // 44782 print in log\r\n    \tmockMvc.perform(multipart(ENTITY_API_URL, domainModelDTo.getName()).file(file)).andExpect(status().isOk());\r\n    }\r\n\r\n \r\nI have implemented this from the following link as it is:\r\n\r\nhttps://www.baeldung.com/sprint-boot-multipart-requests","title":"Multipart file with document name not found","body":"<p>I am getting this error in test case for following api.</p>\n<blockquote>\n<p>Required request part 'document' is not present</p>\n</blockquote>\n<pre><code>@PostMapping(value = &quot;/testModel/{modelName}&quot;, consumes = {\n            MediaType.MULTIPART_FORM_DATA_VALUE })\n    public ResponseEntity&lt;Object&gt; testModel(@PathVariable(&quot;modelName&quot;) String modelName,\n            @RequestPart MultipartFile document) {\n        \n    }\n</code></pre>\n<p>following is the test case for above api</p>\n<pre><code>@Test\n@Transactional\nvoid testModel() throws Exception {\n    service.save(domainModelDTo);\n\n    FileInputStream fi2 = new FileInputStream(new File(&quot;test.pdf&quot;));\n    MockMultipartFile file = new MockMultipartFile(&quot;file&quot;, &quot;test.pdf&quot;, DEFAULT_BINARY.toString(), fi2);\n    log.debug(&quot;file name {}&quot;, file.getOriginalFilename()); // test.pdf print in log\n    log.debug(&quot;file length {}&quot;, file.getBytes().length); // 44782 print in log\n    mockMvc.perform(multipart(ENTITY_API_URL, domainModelDTo.getName()).file(file)).andExpect(status().isOk());\n}\n</code></pre>\n<p>I have implemented this from the following link as it is:</p>\n<p><a href=\"https://www.baeldung.com/sprint-boot-multipart-requests\" rel=\"nofollow noreferrer\">https://www.baeldung.com/sprint-boot-multipart-requests</a></p>\n"},{"tags":["java","android","kotlin"],"answers":[{"tags":[],"owner":{"account_id":202054,"reputation":23899,"user_id":448875,"display_name":"broot"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1644446871,"creation_date":1644446871,"answer_id":71057772,"question_id":71057225,"body_markdown":"Error message basically explains what is happening here. `whoIfollow` property is mutable, so after you checked it is not null, some other thread might change it to null and then `whoIfollow.nome` would result in `NullPointerException`.\r\n\r\nFirst example works, because `?.` operator passes not-null value to the next step. It does not access the property twice. It acquires the property value, checks this value for null and if it is not null then it invokes `name` on exactly the same value it already checked.\r\n\r\nSecond example works, because local variable `whoIfollow2` can&#39;t be modified by anyone, so if it was checked for null already, then it can&#39;t change.\r\n\r\nThird example would work if you would use `it.name` instead of `whoIfollow.nome`. It would be similar to the first example: it acquires the property once and if it is not null, then use the same value again to acquire `name`.\r\n\r\nFourth can&#39;t work. Value of `whoIfollow` property may change between `hoIfollow!=null` check and `whoIfollow.name`.","title":"Smart cast to &#39;USER&#39; is impossible, because &#39;whoIfollow&#39; is a mutable property that could have been changed by this time","body":"<p>Error message basically explains what is happening here. <code>whoIfollow</code> property is mutable, so after you checked it is not null, some other thread might change it to null and then <code>whoIfollow.nome</code> would result in <code>NullPointerException</code>.</p>\n<p>First example works, because <code>?.</code> operator passes not-null value to the next step. It does not access the property twice. It acquires the property value, checks this value for null and if it is not null then it invokes <code>name</code> on exactly the same value it already checked.</p>\n<p>Second example works, because local variable <code>whoIfollow2</code> can't be modified by anyone, so if it was checked for null already, then it can't change.</p>\n<p>Third example would work if you would use <code>it.name</code> instead of <code>whoIfollow.nome</code>. It would be similar to the first example: it acquires the property once and if it is not null, then use the same value again to acquire <code>name</code>.</p>\n<p>Fourth can't work. Value of <code>whoIfollow</code> property may change between <code>hoIfollow!=null</code> check and <code>whoIfollow.name</code>.</p>\n"}],"owner":{"account_id":23806861,"reputation":11,"user_id":17816250,"display_name":"fenix22"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":52,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1644446871,"creation_date":1644443634,"question_id":71057225,"body_markdown":"So I am learnign kotlin, classes.\r\nI get this error in the title.\r\nI create a class called USER, within this class there is the field whoIfollow, and his type is USER. Within the USER class there is the whoHeFollows() function, which checks if whoIfollow is null or not.\r\n\r\nI did it in 4 different ways, and in two of them it worked, in two of them I got the error. I would like to understand why this is, the theory that explains it. Thanks.\r\n\r\nWhat I found strange is that in my opinion the first and third way should be identical(alsop the others.. but idk i have the feeling these 2 are more similar ), however one generates the error and the other does not... please someone clarify this for me. Thanks in advance. \r\n\r\nThe code:\r\n\r\n```\r\nfun main(){\r\n\r\n    \r\n    class USER(var name: String, val age: Int, var whoIfollow: USER? = null){     \r\n        \r\n        \r\n/*            \r\n               These 2 ways work:\r\n==========================================\r\n         fun whoHeFollows(): String{\r\n           val x =  whoIfollow?.nome ?: &quot;nobody&quot;\r\n           return &quot;$name follows $x&quot;\r\n           }\r\n==========================================\r\n          fun whoHeFollows(): String{\r\n          val whoIfollow2 = quemEuSigo\r\n          if(whoIfollow2!=null){\r\n          val x = whoIfollow2.nome\r\n          return &quot;$name follows $x&quot;\r\n           }\r\n           else{return &quot;$name follows nobody&quot;}     \r\n          }\r\n          }\r\n           \r\n           \r\n             These 2 does not work:\r\n==========================================\r\n             fun whoHeFollows(): String{\r\n             whoIfollow?.let{\r\n                val x = whoIfollow.nome\r\n                return &quot;$name follows nobody&quot;\r\n            }\r\n            }\r\n==========================================    \r\n            fun whoHeFollows(): String{\r\n            if(whoIfollow!=null){\r\n               val x = whoIfollow.name\r\n               return &quot;$name segue $x&quot;\r\n           }\r\n           else{return &quot;$name follows nobody&quot;}     \r\n          }\r\n          \r\n==========================================\r\n                  WHY?\r\n*/\r\n        \r\n                                                    }\r\n    \r\n    \r\n    val x = USER(&quot;luiz&quot;,25)\r\n    val y = USER(&quot;joao&quot;, 15)\r\n    //x.whoIfollow = y\r\n    y.whoIfollow = x\r\n    \r\n    println(x.whoHeFollows())\r\n    println(y.whoHeFollows())\r\n    \r\n}\r\n```","title":"Smart cast to &#39;USER&#39; is impossible, because &#39;whoIfollow&#39; is a mutable property that could have been changed by this time","body":"<p>So I am learnign kotlin, classes.\nI get this error in the title.\nI create a class called USER, within this class there is the field whoIfollow, and his type is USER. Within the USER class there is the whoHeFollows() function, which checks if whoIfollow is null or not.</p>\n<p>I did it in 4 different ways, and in two of them it worked, in two of them I got the error. I would like to understand why this is, the theory that explains it. Thanks.</p>\n<p>What I found strange is that in my opinion the first and third way should be identical(alsop the others.. but idk i have the feeling these 2 are more similar ), however one generates the error and the other does not... please someone clarify this for me. Thanks in advance.</p>\n<p>The code:</p>\n<pre><code>fun main(){\n\n    \n    class USER(var name: String, val age: Int, var whoIfollow: USER? = null){     \n        \n        \n/*            \n               These 2 ways work:\n==========================================\n         fun whoHeFollows(): String{\n           val x =  whoIfollow?.nome ?: &quot;nobody&quot;\n           return &quot;$name follows $x&quot;\n           }\n==========================================\n          fun whoHeFollows(): String{\n          val whoIfollow2 = quemEuSigo\n          if(whoIfollow2!=null){\n          val x = whoIfollow2.nome\n          return &quot;$name follows $x&quot;\n           }\n           else{return &quot;$name follows nobody&quot;}     \n          }\n          }\n           \n           \n             These 2 does not work:\n==========================================\n             fun whoHeFollows(): String{\n             whoIfollow?.let{\n                val x = whoIfollow.nome\n                return &quot;$name follows nobody&quot;\n            }\n            }\n==========================================    \n            fun whoHeFollows(): String{\n            if(whoIfollow!=null){\n               val x = whoIfollow.name\n               return &quot;$name segue $x&quot;\n           }\n           else{return &quot;$name follows nobody&quot;}     \n          }\n          \n==========================================\n                  WHY?\n*/\n        \n                                                    }\n    \n    \n    val x = USER(&quot;luiz&quot;,25)\n    val y = USER(&quot;joao&quot;, 15)\n    //x.whoIfollow = y\n    y.whoIfollow = x\n    \n    println(x.whoHeFollows())\n    println(y.whoHeFollows())\n    \n}\n</code></pre>\n"},{"tags":["java","mongodb","nosql","mongodb-java"],"comments":[{"owner":{"account_id":11688295,"reputation":395,"user_id":8557336,"display_name":"Orr Benyamini"},"score":0,"creation_date":1644274560,"post_id":71025819,"comment_id":125558038,"body_markdown":"Did you check what is the value stored in the mongoDB for `entity_id` ? you can use  the [MongoDB compass](https://www.mongodb.com/products/compass) app to access the DB through friendly UI. Maybe you stored the value as UUID and trying to retrieve it as String ?","body":"Did you check what is the value stored in the mongoDB for <code>entity_id</code> ? you can use  the <a href=\"https://www.mongodb.com/products/compass\" rel=\"nofollow noreferrer\">MongoDB compass</a> app to access the DB through friendly UI. Maybe you stored the value as UUID and trying to retrieve it as String ?"},{"owner":{"account_id":5951494,"reputation":12969,"user_id":4679320,"accept_rate":67,"display_name":"prasad_"},"score":0,"creation_date":1644297926,"post_id":71025819,"comment_id":125562491,"body_markdown":"What is the Entity POJO class you are mapping the MongoDB document to?","body":"What is the Entity POJO class you are mapping the MongoDB document to?"},{"owner":{"account_id":24185576,"reputation":11,"user_id":18145537,"display_name":"cbilke1994"},"score":0,"creation_date":1644338425,"post_id":71025819,"comment_id":125577924,"body_markdown":"@OrrBenyamini it&#39;s stored as String in the DB actually,","body":"@OrrBenyamini it&#39;s stored as String in the DB actually,"},{"owner":{"account_id":24185576,"reputation":11,"user_id":18145537,"display_name":"cbilke1994"},"score":0,"creation_date":1644338433,"post_id":71025819,"comment_id":125577930,"body_markdown":"@prasad_ The entity pojo is a builder pattern, I&#39;ll copy it into the main post under an edit","body":"@prasad_ The entity pojo is a builder pattern, I&#39;ll copy it into the main post under an edit"},{"owner":{"account_id":5951494,"reputation":12969,"user_id":4679320,"accept_rate":67,"display_name":"prasad_"},"score":0,"creation_date":1644340010,"post_id":71025819,"comment_id":125578684,"body_markdown":"It is unconventional to use field names in Java like `entityID` and have a get method like `getID()` for that field. A field name like `entityId` and a get method for it as `getEntityId` sounds more appropriate.","body":"It is unconventional to use field names in Java like <code>entityID</code> and have a get method like <code>getID()</code> for that field. A field name like <code>entityId</code> and a get method for it as <code>getEntityId</code> sounds more appropriate."},{"owner":{"account_id":24185576,"reputation":11,"user_id":18145537,"display_name":"cbilke1994"},"score":0,"creation_date":1644357510,"post_id":71025819,"comment_id":125584894,"body_markdown":"Right, there is some on the fly abstraction happening but my issue with the id being returned as null still remains. Hopefully the naming convention doesn&#39;t get in the way too much","body":"Right, there is some on the fly abstraction happening but my issue with the id being returned as null still remains. Hopefully the naming convention doesn&#39;t get in the way too much"}],"answers":[{"tags":[],"owner":{"account_id":24185576,"reputation":11,"user_id":18145537,"display_name":"cbilke1994"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1644446536,"creation_date":1644446536,"answer_id":71057720,"question_id":71025819,"body_markdown":"So update for anyone watching this, it appears to have been an issue with my Eclipse IDE. \r\n\r\nI reimported the project into IntelliJ Community Edition and rebuilt the Maven project, etc... After doing so, the test cases passed and my entityID returns in the query. Hopefully if anyone else runs into this issue they can do something similar. ","title":"MongoDB returning field as null","body":"<p>So update for anyone watching this, it appears to have been an issue with my Eclipse IDE.</p>\n<p>I reimported the project into IntelliJ Community Edition and rebuilt the Maven project, etc... After doing so, the test cases passed and my entityID returns in the query. Hopefully if anyone else runs into this issue they can do something similar.</p>\n"}],"owner":{"account_id":24185576,"reputation":11,"user_id":18145537,"display_name":"cbilke1994"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1197,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":71057720,"answer_count":1,"score":0,"last_activity_date":1644446536,"creation_date":1644270340,"question_id":71025819,"body_markdown":"I am currently working on an application connected to a MongoDB instance. I am having trouble where the &#39;id&#39; field of my object is not being returned to me within the application but is being returned as null. \r\n\r\nThe schema has an &#39;entity&#39; as defined below: \r\n\r\n    {\r\n            &quot;entity_id&quot;: String,\r\n            &quot;parent&quot;: String,\r\n            &quot;relevance&quot;: boolean\r\n    }\r\n\r\nI&#39;m querying the collection using the Java Sync Driver (4.4.1) like so: \r\n\r\n    try {\r\n\t\tEntity testDoc = collection.find(eq(&quot;entity_id&quot;, entity_id)).first(); \r\n\t\tif (testDoc != null) {\r\n\t\t\t//add entity to a list\r\n\t\t}\r\n\t} catch (Exception e) {\r\n\t\tLOGGER.log(Level.SEVERE, &quot;Failed to get Entity&quot;, e);\r\n\t}\r\n\r\nFor some reason this will give me every field in the object when I query EXCEPT the entity_id. I keep getting this returned as: \r\n\r\nentity_id= null\r\n\r\nTwo things stick out to me. The first being that every other field is a String (originally the Id was a UUID object but I simplified while troubleshooting) and they still return if it&#39;s other fields. The second being that there is a whitespace before this null value as if it&#39;s being formatted. Other null values return as field=null instead of field= null\r\n\r\nI was looking to see if there is some security setting preventing things from being labeled as *_id or *id from being returned but I have found no such instance. \r\n\r\nEdit: Here is the Entity Pojo for clarity\r\n\r\n    public class Entity {\r\n\r\n\t@BsonProperty(value = &quot;entity_id&quot;)\r\n\tprivate String entityID;\r\n\t@BsonProperty(value = &quot;parent&quot;)\r\n\tprivate String parent;\r\n\t@Deprecated\r\n\t@BsonProperty(value = &quot;relevance&quot;)\r\n\tprivate boolean relevance;\r\n\t\r\n\tpublic Entity() {}\r\n\t\r\n\tpublic Entity(String entityID, String parent, Boolean relevance) {\r\n\t\tthis.entityID = entityID;\r\n\t\tthis.parent = parent;\r\n\t\tthis.relevance = relevance;\r\n\t}\r\n\r\n\tpublic String getEntityID() {\r\n\t\treturn entityID;\r\n\t}\r\n\r\n\tpublic void setEntityID(String entityID) {\r\n\t\tthis.entityID = entityID;\r\n\t}\r\n\r\n\tpublic String getParent() {\r\n\t\treturn parent;\r\n\t}\r\n\r\n\tpublic void setParent(String parent) {\r\n\t\tthis.parent = parent;\r\n\t}\r\n\r\n\tpublic boolean isRelevant() {\r\n\t\treturn relevance;\r\n\t}\r\n\r\n\tpublic void relevance(boolean relevance) {\r\n\t\tthis.relevance = relevance;\r\n\t}\r\n}","title":"MongoDB returning field as null","body":"<p>I am currently working on an application connected to a MongoDB instance. I am having trouble where the 'id' field of my object is not being returned to me within the application but is being returned as null.</p>\n<p>The schema has an 'entity' as defined below:</p>\n<pre><code>{\n        &quot;entity_id&quot;: String,\n        &quot;parent&quot;: String,\n        &quot;relevance&quot;: boolean\n}\n</code></pre>\n<p>I'm querying the collection using the Java Sync Driver (4.4.1) like so:</p>\n<pre><code>try {\n    Entity testDoc = collection.find(eq(&quot;entity_id&quot;, entity_id)).first(); \n    if (testDoc != null) {\n        //add entity to a list\n    }\n} catch (Exception e) {\n    LOGGER.log(Level.SEVERE, &quot;Failed to get Entity&quot;, e);\n}\n</code></pre>\n<p>For some reason this will give me every field in the object when I query EXCEPT the entity_id. I keep getting this returned as:</p>\n<p>entity_id= null</p>\n<p>Two things stick out to me. The first being that every other field is a String (originally the Id was a UUID object but I simplified while troubleshooting) and they still return if it's other fields. The second being that there is a whitespace before this null value as if it's being formatted. Other null values return as field=null instead of field= null</p>\n<p>I was looking to see if there is some security setting preventing things from being labeled as *_id or *id from being returned but I have found no such instance.</p>\n<p>Edit: Here is the Entity Pojo for clarity</p>\n<pre><code>public class Entity {\n\n@BsonProperty(value = &quot;entity_id&quot;)\nprivate String entityID;\n@BsonProperty(value = &quot;parent&quot;)\nprivate String parent;\n@Deprecated\n@BsonProperty(value = &quot;relevance&quot;)\nprivate boolean relevance;\n\npublic Entity() {}\n\npublic Entity(String entityID, String parent, Boolean relevance) {\n    this.entityID = entityID;\n    this.parent = parent;\n    this.relevance = relevance;\n}\n\npublic String getEntityID() {\n    return entityID;\n}\n\npublic void setEntityID(String entityID) {\n    this.entityID = entityID;\n}\n\npublic String getParent() {\n    return parent;\n}\n\npublic void setParent(String parent) {\n    this.parent = parent;\n}\n\npublic boolean isRelevant() {\n    return relevance;\n}\n\npublic void relevance(boolean relevance) {\n    this.relevance = relevance;\n}\n</code></pre>\n<p>}</p>\n"},{"tags":["java","groovy","javac","groovy-eclipse"],"comments":[{"owner":{"account_id":1223835,"reputation":75848,"user_id":1189885,"accept_rate":43,"display_name":"chrylis -cautiouslyoptimistic-"},"score":0,"creation_date":1599826584,"post_id":63846102,"comment_id":112902440,"body_markdown":"I&#39;ll note that if you&#39;ll refactor your code to be cleaner (by making the `SharedResourceHelper` non-static and implementing an interface that you can mock), this is a non-problem. Also, if you&#39;re using Groovy already, I highly recommend Spock for writing tests.","body":"I&#39;ll note that if you&#39;ll refactor your code to be cleaner (by making the <code>SharedResourceHelper</code> non-static and implementing an interface that you can mock), this is a non-problem. Also, if you&#39;re using Groovy already, I highly recommend Spock for writing tests."},{"owner":{"account_id":11454057,"reputation":1114,"user_id":8395666,"display_name":"emilles"},"score":1,"creation_date":1599872147,"post_id":63846102,"comment_id":112918793,"body_markdown":"You are using very old versions of groovy-eclipse-batch and groovy-eclipse-compiler. Do the latest versions produce the compiler error you are looking for?","body":"You are using very old versions of groovy-eclipse-batch and groovy-eclipse-compiler. Do the latest versions produce the compiler error you are looking for?"},{"owner":{"account_id":1228814,"reputation":665,"user_id":1193826,"accept_rate":20,"display_name":"Kaushal"},"score":0,"creation_date":1599897991,"post_id":63846102,"comment_id":112922561,"body_markdown":"@emilles - Thanks for your suggestion. I missed to do check different versions of jars. When we upgrade groovy-eclipse-batch jar to 2.4.16-02 then we get expected error. It seems that the fix was done in this version. I tried to locate the issue on https://github.com/groovy/groovy-eclipse, but was not able to identify it. Perhaps this was fixed via some other ticket. Anyways, I think that this is a reasonable finding. Thanks a lot. Cheers","body":"@emilles - Thanks for your suggestion. I missed to do check different versions of jars. When we upgrade groovy-eclipse-batch jar to 2.4.16-02 then we get expected error. It seems that the fix was done in this version. I tried to locate the issue on <a href=\"https://github.com/groovy/groovy-eclipse\" rel=\"nofollow noreferrer\">github.com/groovy/groovy-eclipse</a>, but was not able to identify it. Perhaps this was fixed via some other ticket. Anyways, I think that this is a reasonable finding. Thanks a lot. Cheers"}],"answers":[{"tags":[],"owner":{"account_id":11454057,"reputation":1114,"user_id":8395666,"display_name":"emilles"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1599844042,"creation_date":1599844042,"answer_id":63851461,"question_id":63846102,"body_markdown":"You reference &quot;SharedResourceHelper.getFileResource(EasyMock.anyString(), EasyMock.anyObject())&quot; is indeed ambiguous.  If you add a typecast before &quot;EasyMock.anyObject()&quot; you could disambiguate.  And EasyMock probably provides an &quot;any&quot; method that you can pass a type into as well.\r\n\r\ngroovy-eclipse-compiler is based upon ecj (eclipse compiler for java) and not javac, so there are bound to be differences.  It may also be that ecj has a different default error/warning level for this particular case.  If you feel this should be an error, you can file a JDT bug at bugs.eclipse.org.","title":"groovy-eclipse-compiler compiles but javac compilation fails","body":"<p>You reference &quot;SharedResourceHelper.getFileResource(EasyMock.anyString(), EasyMock.anyObject())&quot; is indeed ambiguous.  If you add a typecast before &quot;EasyMock.anyObject()&quot; you could disambiguate.  And EasyMock probably provides an &quot;any&quot; method that you can pass a type into as well.</p>\n<p>groovy-eclipse-compiler is based upon ecj (eclipse compiler for java) and not javac, so there are bound to be differences.  It may also be that ecj has a different default error/warning level for this particular case.  If you feel this should be an error, you can file a JDT bug at bugs.eclipse.org.</p>\n"},{"tags":[],"owner":{"account_id":1228814,"reputation":665,"user_id":1193826,"accept_rate":20,"display_name":"Kaushal"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1600175044,"creation_date":1600071643,"answer_id":63880599,"question_id":63846102,"body_markdown":"[eric-milles][1] gave some direction to further explore this. His input is available at https://github.com/groovy/groovy-eclipse/issues/1157.\r\n\r\nBased on his comment, we explored the history of https://github.com/groovy/groovy-eclipse/blob/master/extras/groovy-eclipse-batch-builder/build.properties and found that the compilation issue was between 2.4.12-01 (compilation works) and 2.4.12-02 (compilation breaks- as expected), which was part of release 2.9.2.\r\n\r\nThe change happened on Aug 10, 2017 (13c1c2a#diff-c8c111c3afb6080ae6b32148caaf6a0a), with comment as &quot;Remove codehaus references&quot;. The jdt.patch.target was targeted for e44 which is Luna. This was same for both the files.\r\n\r\nI invested some time in exploring https://github.com/eclipse/eclipse.jdt.core, to figure out how compiler behaviour could have altered, but could not get much. Though I am not very sure, but I feel that change in groovy-eclipse-batch (between 2.4.12-01 and 2.4.12-02) might be the cause of this.\r\n\r\nHaving invested this much time, I feel that it is not worth to further debug on this to figure out the root cause as the issue is already fixed in next version(s) [2.4.12-02 and beyond].\r\n\r\n\r\n\r\n  [1]: https://github.com/eric-milles","title":"groovy-eclipse-compiler compiles but javac compilation fails","body":"<p><a href=\"https://github.com/eric-milles\" rel=\"nofollow noreferrer\">eric-milles</a> gave some direction to further explore this. His input is available at <a href=\"https://github.com/groovy/groovy-eclipse/issues/1157\" rel=\"nofollow noreferrer\">https://github.com/groovy/groovy-eclipse/issues/1157</a>.</p>\n<p>Based on his comment, we explored the history of <a href=\"https://github.com/groovy/groovy-eclipse/blob/master/extras/groovy-eclipse-batch-builder/build.properties\" rel=\"nofollow noreferrer\">https://github.com/groovy/groovy-eclipse/blob/master/extras/groovy-eclipse-batch-builder/build.properties</a> and found that the compilation issue was between 2.4.12-01 (compilation works) and 2.4.12-02 (compilation breaks- as expected), which was part of release 2.9.2.</p>\n<p>The change happened on Aug 10, 2017 (13c1c2a#diff-c8c111c3afb6080ae6b32148caaf6a0a), with comment as &quot;Remove codehaus references&quot;. The jdt.patch.target was targeted for e44 which is Luna. This was same for both the files.</p>\n<p>I invested some time in exploring <a href=\"https://github.com/eclipse/eclipse.jdt.core\" rel=\"nofollow noreferrer\">https://github.com/eclipse/eclipse.jdt.core</a>, to figure out how compiler behaviour could have altered, but could not get much. Though I am not very sure, but I feel that change in groovy-eclipse-batch (between 2.4.12-01 and 2.4.12-02) might be the cause of this.</p>\n<p>Having invested this much time, I feel that it is not worth to further debug on this to figure out the root cause as the issue is already fixed in next version(s) [2.4.12-02 and beyond].</p>\n"}],"owner":{"account_id":1228814,"reputation":665,"user_id":1193826,"accept_rate":20,"display_name":"Kaushal"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":673,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1644445784,"creation_date":1599823404,"question_id":63846102,"body_markdown":"My project builds successfully with groovy-eclipse-compiler, but fails without groovy-eclipse-compiler (using just javac). The build fails with an error message as given below (reported in a test class, while mocking an invocation)\r\n\r\n\tjava: reference to getFileResource is ambiguous\r\n\r\nIn order to debug the issue, I created a project with minimal files (given below). Though in project we have groovy source also, but I have not included them here to keep the code minimal.\r\nThe code is also pushed to git and is available at https://github.com/kaushalkumar/project-debug\r\n\r\n**My Doubt**: The reported issue looks to be legitimate and I feel that groovy-eclipse-compiler must also fail, but it seems that the error is ignored. I am trying to understand what make groovy compiler to ignore it. Is it an issue in groovy compiler?\r\n\r\n*src/main/java/pkg1/IStrategy.java*\r\n    package pkg1;\r\n    \r\n    import java.util.Map;\r\n    \r\n    public interface IStrategy {\r\n    \tMap&lt;String, Object&gt; getEnvMap();\r\n    }\r\n\r\n*src/main/java/pkg1/SharedResourceHelper.java*\r\n    package pkg1;\r\n    \r\n    import java.io.File;\r\n    import java.io.IOException;\r\n    import java.util.Map;\r\n    \r\n    public class SharedResourceHelper {\r\n    \tpublic static File getFileResource(final String resourceName, final IStrategy strategy) throws IOException {\r\n          return getFileResource(resourceName, strategy.getEnvMap());\r\n    \t}\r\n    \tpublic static File getFileResource(final String resourceName, final Map&lt;String, Object&gt; envConfig) throws IOException {\r\n          return null;\r\n    \t}\r\n    }\r\n\r\n*src/test/java/pkg1/StrategyTest.java*\r\n    package pkg1;\r\n    \r\n    import pkg1.SharedResourceHelper;\r\n    import org.easymock.EasyMock;\r\n    import org.powermock.api.easymock.PowerMock;\r\n    import org.powermock.core.classloader.annotations.PrepareForTest;\r\n    import org.junit.Test;\r\n    import org.powermock.modules.junit4.PowerMockRunner;\r\n    import org.junit.runner.RunWith;\r\n    import java.io.File;\r\n    \r\n    @PrepareForTest({SharedResourceHelper.class})\r\n    @RunWith(PowerMockRunner.class)\r\n    public class StrategyTest {\r\n    \t@Test\r\n    \t@PrepareForTest({SharedResourceHelper.class})\r\n    \tpublic void testGetFileResource() throws Exception {\r\n          PowerMock.mockStatic(SharedResourceHelper.class);\r\n          EasyMock.expect(SharedResourceHelper.getFileResource(EasyMock.anyString(), EasyMock.anyObject())).andReturn(File.createTempFile(&quot;tmp&quot;, &quot;s&quot;));\r\n    //      EasyMock.expect(SharedResourceHelper.getFileResource(&quot;test&quot;, null)).andReturn(File.createTempFile(&quot;tmp&quot;, &quot;s&quot;));\r\n          \r\n    \t}\r\n    }\r\n\r\n*/pom.xml*\r\n\r\n    &lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n      &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n      &lt;groupId&gt;project.debug&lt;/groupId&gt;\r\n      &lt;artifactId&gt;project&lt;/artifactId&gt;\r\n      &lt;packaging&gt;jar&lt;/packaging&gt;\r\n      &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\r\n      &lt;dependencies&gt;\r\n        &lt;dependency&gt;\r\n          &lt;groupId&gt;org.powermock&lt;/groupId&gt;\r\n          &lt;artifactId&gt;powermock-api-easymock&lt;/artifactId&gt;\r\n          &lt;version&gt;2.0.7&lt;/version&gt;\r\n          &lt;scope&gt;test&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n          &lt;groupId&gt;org.powermock&lt;/groupId&gt;\r\n          &lt;artifactId&gt;powermock-module-junit4&lt;/artifactId&gt;\r\n          &lt;version&gt;2.0.7&lt;/version&gt;\r\n          &lt;scope&gt;test&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n      &lt;/dependencies&gt;\r\n      &lt;build&gt;\r\n        &lt;plugins&gt;\r\n          &lt;plugin&gt;\r\n            &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n            &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\r\n            &lt;version&gt;3.3&lt;/version&gt;\r\n            &lt;configuration&gt;\r\n              &lt;compilerId&gt;groovy-eclipse-compiler&lt;/compilerId&gt;\r\n              &lt;source&gt;1.8&lt;/source&gt;\r\n              &lt;target&gt;1.8&lt;/target&gt;\r\n            &lt;/configuration&gt;\r\n            &lt;dependencies&gt;\r\n              &lt;dependency&gt;\r\n                &lt;groupId&gt;org.codehaus.groovy&lt;/groupId&gt;\r\n                &lt;artifactId&gt;groovy-eclipse-compiler&lt;/artifactId&gt;\r\n                &lt;version&gt;2.9.2-01&lt;/version&gt;\r\n              &lt;/dependency&gt;\r\n              &lt;dependency&gt;\r\n                &lt;groupId&gt;org.codehaus.groovy&lt;/groupId&gt;\r\n                &lt;artifactId&gt;groovy-eclipse-batch&lt;/artifactId&gt;\r\n                &lt;version&gt;2.4.3-01&lt;/version&gt;\r\n              &lt;/dependency&gt;\r\n            &lt;/dependencies&gt;\r\n          &lt;/plugin&gt;\r\n        &lt;/plugins&gt;\r\n      &lt;/build&gt;\r\n    &lt;/project&gt;\r\n\r\n - Java version - 1.8.0_231 \r\n - Maven - 3.6.2 \r\n - OS - Mac 10.15.6\r\n - groovy-eclipse-compiler - 2.9.2-01\r\n - groovy-eclipse-batch - 2.4.3-01","title":"groovy-eclipse-compiler compiles but javac compilation fails","body":"<p>My project builds successfully with groovy-eclipse-compiler, but fails without groovy-eclipse-compiler (using just javac). The build fails with an error message as given below (reported in a test class, while mocking an invocation)</p>\n<pre><code>java: reference to getFileResource is ambiguous\n</code></pre>\n<p>In order to debug the issue, I created a project with minimal files (given below). Though in project we have groovy source also, but I have not included them here to keep the code minimal.\nThe code is also pushed to git and is available at <a href=\"https://github.com/kaushalkumar/project-debug\" rel=\"nofollow noreferrer\">https://github.com/kaushalkumar/project-debug</a></p>\n<p><strong>My Doubt</strong>: The reported issue looks to be legitimate and I feel that groovy-eclipse-compiler must also fail, but it seems that the error is ignored. I am trying to understand what make groovy compiler to ignore it. Is it an issue in groovy compiler?</p>\n<p><em>src/main/java/pkg1/IStrategy.java</em>\npackage pkg1;</p>\n<pre><code>import java.util.Map;\n\npublic interface IStrategy {\n    Map&lt;String, Object&gt; getEnvMap();\n}\n</code></pre>\n<p><em>src/main/java/pkg1/SharedResourceHelper.java</em>\npackage pkg1;</p>\n<pre><code>import java.io.File;\nimport java.io.IOException;\nimport java.util.Map;\n\npublic class SharedResourceHelper {\n    public static File getFileResource(final String resourceName, final IStrategy strategy) throws IOException {\n      return getFileResource(resourceName, strategy.getEnvMap());\n    }\n    public static File getFileResource(final String resourceName, final Map&lt;String, Object&gt; envConfig) throws IOException {\n      return null;\n    }\n}\n</code></pre>\n<p><em>src/test/java/pkg1/StrategyTest.java</em>\npackage pkg1;</p>\n<pre><code>import pkg1.SharedResourceHelper;\nimport org.easymock.EasyMock;\nimport org.powermock.api.easymock.PowerMock;\nimport org.powermock.core.classloader.annotations.PrepareForTest;\nimport org.junit.Test;\nimport org.powermock.modules.junit4.PowerMockRunner;\nimport org.junit.runner.RunWith;\nimport java.io.File;\n\n@PrepareForTest({SharedResourceHelper.class})\n@RunWith(PowerMockRunner.class)\npublic class StrategyTest {\n    @Test\n    @PrepareForTest({SharedResourceHelper.class})\n    public void testGetFileResource() throws Exception {\n      PowerMock.mockStatic(SharedResourceHelper.class);\n      EasyMock.expect(SharedResourceHelper.getFileResource(EasyMock.anyString(), EasyMock.anyObject())).andReturn(File.createTempFile(&quot;tmp&quot;, &quot;s&quot;));\n//      EasyMock.expect(SharedResourceHelper.getFileResource(&quot;test&quot;, null)).andReturn(File.createTempFile(&quot;tmp&quot;, &quot;s&quot;));\n      \n    }\n}\n</code></pre>\n<p><em>/pom.xml</em></p>\n<pre><code>&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n  &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n  &lt;groupId&gt;project.debug&lt;/groupId&gt;\n  &lt;artifactId&gt;project&lt;/artifactId&gt;\n  &lt;packaging&gt;jar&lt;/packaging&gt;\n  &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\n  &lt;dependencies&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;org.powermock&lt;/groupId&gt;\n      &lt;artifactId&gt;powermock-api-easymock&lt;/artifactId&gt;\n      &lt;version&gt;2.0.7&lt;/version&gt;\n      &lt;scope&gt;test&lt;/scope&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;org.powermock&lt;/groupId&gt;\n      &lt;artifactId&gt;powermock-module-junit4&lt;/artifactId&gt;\n      &lt;version&gt;2.0.7&lt;/version&gt;\n      &lt;scope&gt;test&lt;/scope&gt;\n    &lt;/dependency&gt;\n  &lt;/dependencies&gt;\n  &lt;build&gt;\n    &lt;plugins&gt;\n      &lt;plugin&gt;\n        &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n        &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n        &lt;version&gt;3.3&lt;/version&gt;\n        &lt;configuration&gt;\n          &lt;compilerId&gt;groovy-eclipse-compiler&lt;/compilerId&gt;\n          &lt;source&gt;1.8&lt;/source&gt;\n          &lt;target&gt;1.8&lt;/target&gt;\n        &lt;/configuration&gt;\n        &lt;dependencies&gt;\n          &lt;dependency&gt;\n            &lt;groupId&gt;org.codehaus.groovy&lt;/groupId&gt;\n            &lt;artifactId&gt;groovy-eclipse-compiler&lt;/artifactId&gt;\n            &lt;version&gt;2.9.2-01&lt;/version&gt;\n          &lt;/dependency&gt;\n          &lt;dependency&gt;\n            &lt;groupId&gt;org.codehaus.groovy&lt;/groupId&gt;\n            &lt;artifactId&gt;groovy-eclipse-batch&lt;/artifactId&gt;\n            &lt;version&gt;2.4.3-01&lt;/version&gt;\n          &lt;/dependency&gt;\n        &lt;/dependencies&gt;\n      &lt;/plugin&gt;\n    &lt;/plugins&gt;\n  &lt;/build&gt;\n&lt;/project&gt;\n</code></pre>\n<ul>\n<li>Java version - 1.8.0_231</li>\n<li>Maven - 3.6.2</li>\n<li>OS - Mac 10.15.6</li>\n<li>groovy-eclipse-compiler - 2.9.2-01</li>\n<li>groovy-eclipse-batch - 2.4.3-01</li>\n</ul>\n"},{"tags":["java","inheritance"],"comments":[{"owner":{"account_id":785560,"reputation":14879,"user_id":845414,"display_name":"Johannes Kuhn"},"score":0,"creation_date":1644445381,"post_id":71057473,"comment_id":125612308,"body_markdown":"Add an `protected abstract Map&lt;String, String&gt; getKeyset()` method to your superclass, use `String key = ISOUtil.hex2byte(getKeyset().get(&quot;zcmk_&quot; + side)` in your superclass. Or better: Pass the Map to the superclass constructor.","body":"Add an <code>protected abstract Map&lt;String, String&gt; getKeyset()</code> method to your superclass, use <code>String key = ISOUtil.hex2byte(getKeyset().get(&quot;zcmk_&quot; + side)</code> in your superclass. Or better: Pass the Map to the superclass constructor."},{"owner":{"account_id":969721,"reputation":344518,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"score":0,"creation_date":1644445414,"post_id":71057473,"comment_id":125612325,"body_markdown":"To me, inheritance would seem like the way to go.  I&#39;d seed the `keyset` information into the `super` class from the child (personally).  Alternatively, you could use some kind of dependency injection workflow, but in this case, it&#39;s kind of the same thing","body":"To me, inheritance would seem like the way to go.  I&#39;d seed the <code>keyset</code> information into the <code>super</code> class from the child (personally).  Alternatively, you could use some kind of dependency injection workflow, but in this case, it&#39;s kind of the same thing"},{"owner":{"account_id":13949520,"reputation":27,"user_id":10073380,"display_name":"tytyty"},"score":0,"creation_date":1644446142,"post_id":71057473,"comment_id":125612556,"body_markdown":"Ah thank you two! I didn&#39;t even realize I could seed the keyset to the parent class to use there","body":"Ah thank you two! I didn&#39;t even realize I could seed the keyset to the parent class to use there"}],"answers":[{"tags":[],"owner":{"account_id":22977171,"reputation":315,"user_id":17104620,"display_name":"Nicholas Zolton"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1644445659,"creation_date":1644445659,"answer_id":71057601,"question_id":71057473,"body_markdown":"Generally as a rule of thumb, if you are copying code and pasting it into subclasses, that code should be in a parent class. The only thing that should be in the subclasses are unique attributes to them, so in your case this would only be the unique function in each of them.\r\n\r\nFor the KEYSET map, if it is hard coded you&#39;ll want to use the [protected][1] keyword. This will allow each of the subclasses to have their own maps, and all you&#39;ll need to do is place the actual data into the maps during their instantiation.\r\n\r\nBasically, if you&#39;re copy and pasting anything between multiple subclasses, the correct way to handle this in OOP would be to have a shared parent class between subclasses with the same code (the code you are copy and pasting).\r\n\r\nAlso, if you end up needing something like multiple inheritance, you may need to resort to using [interfaces][2].\r\n\r\nIn terms of alternatives to inheritance, you could use [delegation][3], but I believe in your case it may be easier to simply use more inheritance.\r\n\r\n\r\n  [1]: https://www.geeksforgeeks.org/protected-keyword-in-java-with-examples/#:~:text=Protected%20keyword%20in%20Java%20refers,Different%20classes%20of%20same%20packages.\r\n  [2]: https://www.geeksforgeeks.org/java-and-multiple-inheritance/\r\n  [3]: https://www.geeksforgeeks.org/delegation-vs-inheritance-java/#:~:text=Delegation%20can%20be%20an%20alternative,forward%20messages%20to%20the%20instance.","title":"I find myself pasting code into subclasses. Is there something else I can do besides inheritance?","body":"<p>Generally as a rule of thumb, if you are copying code and pasting it into subclasses, that code should be in a parent class. The only thing that should be in the subclasses are unique attributes to them, so in your case this would only be the unique function in each of them.</p>\n<p>For the KEYSET map, if it is hard coded you'll want to use the <a href=\"https://www.geeksforgeeks.org/protected-keyword-in-java-with-examples/#:%7E:text=Protected%20keyword%20in%20Java%20refers,Different%20classes%20of%20same%20packages.\" rel=\"nofollow noreferrer\">protected</a> keyword. This will allow each of the subclasses to have their own maps, and all you'll need to do is place the actual data into the maps during their instantiation.</p>\n<p>Basically, if you're copy and pasting anything between multiple subclasses, the correct way to handle this in OOP would be to have a shared parent class between subclasses with the same code (the code you are copy and pasting).</p>\n<p>Also, if you end up needing something like multiple inheritance, you may need to resort to using <a href=\"https://www.geeksforgeeks.org/java-and-multiple-inheritance/\" rel=\"nofollow noreferrer\">interfaces</a>.</p>\n<p>In terms of alternatives to inheritance, you could use <a href=\"https://www.geeksforgeeks.org/delegation-vs-inheritance-java/#:%7E:text=Delegation%20can%20be%20an%20alternative,forward%20messages%20to%20the%20instance.\" rel=\"nofollow noreferrer\">delegation</a>, but I believe in your case it may be easier to simply use more inheritance.</p>\n"}],"owner":{"account_id":13949520,"reputation":27,"user_id":10073380,"display_name":"tytyty"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":48,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":71057601,"answer_count":1,"score":0,"last_activity_date":1644445659,"creation_date":1644444887,"question_id":71057473,"body_markdown":"I have the parent class Encryption.java, which is mainly just a bunch of functions for encryption. Then I have 5 subclasses that extend that class. They all look mostly the same, except for two things: Each subclass needs a different KEYSET map, and there is also one unique function to each subclass. I&#39;m not sure if I need inheritance or something else, the only thing changing is the KEYSET and one function\r\n\r\nHere is an example of the subclasses\r\n\r\n    public class Keyset_1 extends Encryption{\r\n    \r\n        private byte variant;\r\n        private String side;\r\n    \r\n        private final Map&lt;String,String&gt; KEYSET = new HashMap&lt;String,String&gt;(){\r\n            {\r\n                put(&quot;awk_1_acq&quot;, &quot;0123456789ABCDEF0123456789ABCDEF&quot;);\r\n                put(&quot;awk_2_acq&quot;, &quot;0123456789ABCDEF0123456789ABCDEF&quot;);\r\n                ...\r\n            }\r\n        };\r\n    \r\n        //constructor is same in each subclass\r\n        public Keyset_1(byte b, String side) throws NoSuchPaddingException, NoSuchAlgorithmException, InvalidKeyException, NoSuchProviderException {\r\n            super();\r\n            this.variant = b;\r\n            this.side = side;\r\n        }\r\n    \r\n        //Empty method in parent class, overridden here\r\n        @Override\r\n        public byte[] getZCMKVariant(){\r\n            byte[] key;\r\n            if (side.equalsIgnoreCase(&quot;acq&quot;))\r\n                key = ISOUtil.hex2byte(KEYSET.get(&quot;zcmk_acq&quot;));\r\n            else\r\n                key = ISOUtil.hex2byte(KEYSET.get(&quot;zcmk_iss&quot;));\r\n            applyVariant(key, variant);\r\n            return key;\r\n        }\r\n    }\r\n\r\n","title":"I find myself pasting code into subclasses. Is there something else I can do besides inheritance?","body":"<p>I have the parent class Encryption.java, which is mainly just a bunch of functions for encryption. Then I have 5 subclasses that extend that class. They all look mostly the same, except for two things: Each subclass needs a different KEYSET map, and there is also one unique function to each subclass. I'm not sure if I need inheritance or something else, the only thing changing is the KEYSET and one function</p>\n<p>Here is an example of the subclasses</p>\n<pre><code>public class Keyset_1 extends Encryption{\n\n    private byte variant;\n    private String side;\n\n    private final Map&lt;String,String&gt; KEYSET = new HashMap&lt;String,String&gt;(){\n        {\n            put(&quot;awk_1_acq&quot;, &quot;0123456789ABCDEF0123456789ABCDEF&quot;);\n            put(&quot;awk_2_acq&quot;, &quot;0123456789ABCDEF0123456789ABCDEF&quot;);\n            ...\n        }\n    };\n\n    //constructor is same in each subclass\n    public Keyset_1(byte b, String side) throws NoSuchPaddingException, NoSuchAlgorithmException, InvalidKeyException, NoSuchProviderException {\n        super();\n        this.variant = b;\n        this.side = side;\n    }\n\n    //Empty method in parent class, overridden here\n    @Override\n    public byte[] getZCMKVariant(){\n        byte[] key;\n        if (side.equalsIgnoreCase(&quot;acq&quot;))\n            key = ISOUtil.hex2byte(KEYSET.get(&quot;zcmk_acq&quot;));\n        else\n            key = ISOUtil.hex2byte(KEYSET.get(&quot;zcmk_iss&quot;));\n        applyVariant(key, variant);\n        return key;\n    }\n}\n</code></pre>\n"},{"tags":["java","simulation","anylogic","jexcelapi"],"comments":[{"owner":{"account_id":12969774,"reputation":1616,"user_id":9375979,"display_name":"Yashar Ahmadov"},"score":0,"creation_date":1644427218,"post_id":71053799,"comment_id":125605882,"body_markdown":"What is your text inside that function?","body":"What is your text inside that function?"},{"owner":{"account_id":4999683,"reputation":3818,"user_id":4019094,"display_name":"Jaco-Ben Vosloo"},"score":0,"creation_date":1644434812,"post_id":71053799,"comment_id":125608773,"body_markdown":"Can you add the reason why you want this to be static.. more often than not it is not needed in simulation models and there are ways around it... like e.g. putting the Excel sheet on Main and referencing it from there.","body":"Can you add the reason why you want this to be static.. more often than not it is not needed in simulation models and there are ways around it... like e.g. putting the Excel sheet on Main and referencing it from there."},{"owner":{"account_id":24154416,"reputation":63,"user_id":18118831,"display_name":"DynamiX"},"score":0,"creation_date":1644482110,"post_id":71053799,"comment_id":125619928,"body_markdown":"I put the Excel sheet on Main. Within my class I want to call the function &quot;readExcelFIle&quot;. This function just calls the Excel File &quot;produktionssystem&quot; in Main and returns a double[] array. \nWhen I want to call the function &quot;readExcelFile&quot; via main.readExcelFile(...) it says &quot;main cannot be resolved&quot;. Therefore I thougt I could call it via Main.readExcelFIle(..), but then the method has to be static and the ExcelFile produktionssystem as well.\nI do not want to initialize a new agent in my class, but I want to call the actual main agent. Where is my mistake?","body":"I put the Excel sheet on Main. Within my class I want to call the function &quot;readExcelFIle&quot;. This function just calls the Excel File &quot;produktionssystem&quot; in Main and returns a double[] array.  When I want to call the function &quot;readExcelFile&quot; via main.readExcelFile(...) it says &quot;main cannot be resolved&quot;. Therefore I thougt I could call it via Main.readExcelFIle(..), but then the method has to be static and the ExcelFile produktionssystem as well. I do not want to initialize a new agent in my class, but I want to call the actual main agent. Where is my mistake?"}],"answers":[{"tags":[],"owner":{"account_id":24207014,"reputation":295,"user_id":18164056,"display_name":"Ryan Marizza"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1644430205,"creation_date":1644430205,"answer_id":71054641,"question_id":71053799,"body_markdown":"It&#39;s tough to understand what is causing the error here, because I can&#39;t see inside your function.\r\n\r\nThere is no inherent issue with read/write to Excel files from within another class (i.e. within another agent, custom class, etc...). \r\n\r\nHere is a link to a public model on the AnyLogic cloud that I found very helpful when I first started working with Excel files within AnyLogic:\r\nhttps://cloud.anylogic.com/model/99d9f196-17e7-47c3-9b28-63a6f23b0dad?mode=SETTINGS","title":"Is it possible to make a static reference to an excel sheet in AnyLogic?","body":"<p>It's tough to understand what is causing the error here, because I can't see inside your function.</p>\n<p>There is no inherent issue with read/write to Excel files from within another class (i.e. within another agent, custom class, etc...).</p>\n<p>Here is a link to a public model on the AnyLogic cloud that I found very helpful when I first started working with Excel files within AnyLogic:\n<a href=\"https://cloud.anylogic.com/model/99d9f196-17e7-47c3-9b28-63a6f23b0dad?mode=SETTINGS\" rel=\"nofollow noreferrer\">https://cloud.anylogic.com/model/99d9f196-17e7-47c3-9b28-63a6f23b0dad?mode=SETTINGS</a></p>\n"},{"tags":[],"owner":{"account_id":62246,"reputation":2442,"user_id":185055,"accept_rate":40,"display_name":"Stuart Rossiter"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1644445370,"creation_date":1644445370,"answer_id":71057557,"question_id":71053799,"body_markdown":"The error is because the Excel element `produktionssystem` can only ever be a (non-static) element in whatever agent type your function is also in (Main from the screenshot). By definition a static function cannot see any elements (Java fields) inside agent *instances*.\r\n\r\nBut you should *never* need a static function unless you need to share it across *runs* (which can have dangerous side effects if you&#39;re not careful). Your agents that need to call it just need a reference to an agent instance that does have the function.\r\n\r\nIf the calling agent is a &#39;child&#39; of the function-declaring agent, you&#39;ve already got the &quot;Link to upper level agent&quot; `main` provided by AnyLogic (and this will always exist if the calling agent is anywhere in the model&#39;s hierarchy of agents). Otherwise your calling agent will need something like a parameter of type `Main` which is set by whoever creates it.","title":"Is it possible to make a static reference to an excel sheet in AnyLogic?","body":"<p>The error is because the Excel element <code>produktionssystem</code> can only ever be a (non-static) element in whatever agent type your function is also in (Main from the screenshot). By definition a static function cannot see any elements (Java fields) inside agent <em>instances</em>.</p>\n<p>But you should <em>never</em> need a static function unless you need to share it across <em>runs</em> (which can have dangerous side effects if you're not careful). Your agents that need to call it just need a reference to an agent instance that does have the function.</p>\n<p>If the calling agent is a 'child' of the function-declaring agent, you've already got the &quot;Link to upper level agent&quot; <code>main</code> provided by AnyLogic (and this will always exist if the calling agent is anywhere in the model's hierarchy of agents). Otherwise your calling agent will need something like a parameter of type <code>Main</code> which is set by whoever creates it.</p>\n"}],"owner":{"account_id":24154416,"reputation":63,"user_id":18118831,"display_name":"DynamiX"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":127,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":71057557,"answer_count":2,"score":1,"last_activity_date":1644445370,"creation_date":1644426448,"question_id":71053799,"body_markdown":"I want to call an Excel with a static java function within an AnyLogic Model as shown in the picture. The function &quot;readExcelFile&quot; has to be static, because I want to call it from another class within my AnyLogic Project.\r\nHowever, when I call the function, an error occurs: &quot;Cannot make a static reference to the non-static field produktionssystem&quot;.\r\nIs there a solution for this problem?\r\n\r\n![enter image description here][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/lSzcd.png","title":"Is it possible to make a static reference to an excel sheet in AnyLogic?","body":"<p>I want to call an Excel with a static java function within an AnyLogic Model as shown in the picture. The function &quot;readExcelFile&quot; has to be static, because I want to call it from another class within my AnyLogic Project.\nHowever, when I call the function, an error occurs: &quot;Cannot make a static reference to the non-static field produktionssystem&quot;.\nIs there a solution for this problem?</p>\n<p><img src=\"https://i.stack.imgur.com/lSzcd.png\" alt=\"enter image description here\" /></p>\n"},{"tags":["java","spring-boot","keycloak"],"comments":[{"owner":{"account_id":5669165,"reputation":41,"user_id":4484422,"display_name":"Jonathan Crowe"},"score":0,"creation_date":1567614611,"post_id":57787768,"comment_id":112227820,"body_markdown":"I don&#39;t have an actual answer to solve this, but I do see there is a similar bug on the Keycloak issue tracker for another quickstart. [https://issues.jboss.org/browse/KEYCLOAK-11218](https://issues.jboss.org/browse/KEYCLOAK-11218) I was also able to reproduce the same failure you see by cloning that project and trying to run it. You may want to create a ticket for this quickstart project, in case they have missed that the issue affects multiple quickstarts. I did try defining a bean of that type, but that leads to other runtime errors about other unsatisfied dependencies.","body":"I don&#39;t have an actual answer to solve this, but I do see there is a similar bug on the Keycloak issue tracker for another quickstart. <a href=\"https://issues.jboss.org/browse/KEYCLOAK-11218\" rel=\"nofollow noreferrer\">https://issues.jboss.org/browse/KEYCLOAK-11218</a> I was also able to reproduce the same failure you see by cloning that project and trying to run it. You may want to create a ticket for this quickstart project, in case they have missed that the issue affects multiple quickstarts. I did try defining a bean of that type, but that leads to other runtime errors about other unsatisfied dependencies."}],"answers":[{"tags":[],"owner":{"account_id":12111866,"reputation":1698,"user_id":8848246,"display_name":"Thomas Vitale"},"down_vote_count":0,"up_vote_count":42,"is_accepted":true,"score":42,"last_activity_date":1577437968,"creation_date":1567637427,"answer_id":57796450,"question_id":57787768,"body_markdown":"I don&#39;t have a solution at the moment, but I can see that the exact same issue has been registered on the Keycloak Jira a couple of months ago: https://issues.jboss.org/browse/KEYCLOAK-10595. The problem seems to be caused by the code delivered with this PR: https://github.com/keycloak/keycloak/pull/6075.\r\n\r\nThe author of the PR described the problem in this way:\r\n&quot;The only remaining problem is, that the resolver is usually contained in the configuration using the KeycloakAutoConfiguration (in my example the SharedConfiguration) so you are trying to access the bean while the configuration is stil being created. This can be solved by moving the resolver bean into another configuration which has to be loaded before the KeycloakAutoConfiguration.&quot;\r\n(source: https://issues.jboss.org/browse/KEYCLOAK-10334?focusedCommentId=13738518&amp;page=com.atlassian.jira.plugin.system.issuetabpanels%3Acomment-tabpanel#comment-13738518)\r\n\r\n----------\r\n**UPDATE (OLD)**\r\n\r\nOn the issue from the Keycloak Jira (https://issues.jboss.org/browse/KEYCLOAK-11282), a temporary workaround has been suggested.\r\n\r\n    @Configuration\r\n    public class MyKeycloakSpringBootConfigResolver extends KeycloakSpringBootConfigResolver {\r\n        private final KeycloakDeployment keycloakDeployment;\r\n    \r\n        public MyKeycloakSpringBootConfigResolver(KeycloakSpringBootProperties properties) {\r\n            keycloakDeployment = KeycloakDeploymentBuilder.build(properties);\r\n        }\r\n    \r\n        @Override\r\n        public KeycloakDeployment resolve(HttpFacade.Request facade) {\r\n            return keycloakDeployment;\r\n        }\r\n    }\r\n\r\n\r\n----------\r\n**LATEST UPDATE**\r\n\r\nA simpler way to solve the problem is to declare a `KeycloakSpringBootConfigResolver` in a separate configuration class. This option will fix issues with both Spring Boot and Spring Security.\r\n\r\n    @Configuration\r\n    public class KeycloakConfig {\r\n    \r\n        @Bean\r\n        public KeycloakSpringBootConfigResolver keycloakConfigResolver() {\r\n            return new KeycloakSpringBootConfigResolver();\r\n        }\r\n    }","title":"Example keycloak spring-boot app fails to find bean KeycloakSpringBootConfigResolver","body":"<p>I don't have a solution at the moment, but I can see that the exact same issue has been registered on the Keycloak Jira a couple of months ago: <a href=\"https://issues.jboss.org/browse/KEYCLOAK-10595\" rel=\"noreferrer\">https://issues.jboss.org/browse/KEYCLOAK-10595</a>. The problem seems to be caused by the code delivered with this PR: <a href=\"https://github.com/keycloak/keycloak/pull/6075\" rel=\"noreferrer\">https://github.com/keycloak/keycloak/pull/6075</a>.</p>\n\n<p>The author of the PR described the problem in this way:\n\"The only remaining problem is, that the resolver is usually contained in the configuration using the KeycloakAutoConfiguration (in my example the SharedConfiguration) so you are trying to access the bean while the configuration is stil being created. This can be solved by moving the resolver bean into another configuration which has to be loaded before the KeycloakAutoConfiguration.\"\n(source: <a href=\"https://issues.jboss.org/browse/KEYCLOAK-10334?focusedCommentId=13738518&amp;page=com.atlassian.jira.plugin.system.issuetabpanels%3Acomment-tabpanel#comment-13738518\" rel=\"noreferrer\">https://issues.jboss.org/browse/KEYCLOAK-10334?focusedCommentId=13738518&amp;page=com.atlassian.jira.plugin.system.issuetabpanels%3Acomment-tabpanel#comment-13738518</a>)</p>\n\n<hr>\n\n<p><strong>UPDATE (OLD)</strong></p>\n\n<p>On the issue from the Keycloak Jira (<a href=\"https://issues.jboss.org/browse/KEYCLOAK-11282\" rel=\"noreferrer\">https://issues.jboss.org/browse/KEYCLOAK-11282</a>), a temporary workaround has been suggested.</p>\n\n<pre><code>@Configuration\npublic class MyKeycloakSpringBootConfigResolver extends KeycloakSpringBootConfigResolver {\n    private final KeycloakDeployment keycloakDeployment;\n\n    public MyKeycloakSpringBootConfigResolver(KeycloakSpringBootProperties properties) {\n        keycloakDeployment = KeycloakDeploymentBuilder.build(properties);\n    }\n\n    @Override\n    public KeycloakDeployment resolve(HttpFacade.Request facade) {\n        return keycloakDeployment;\n    }\n}\n</code></pre>\n\n<hr>\n\n<p><strong>LATEST UPDATE</strong></p>\n\n<p>A simpler way to solve the problem is to declare a <code>KeycloakSpringBootConfigResolver</code> in a separate configuration class. This option will fix issues with both Spring Boot and Spring Security.</p>\n\n<pre><code>@Configuration\npublic class KeycloakConfig {\n\n    @Bean\n    public KeycloakSpringBootConfigResolver keycloakConfigResolver() {\n        return new KeycloakSpringBootConfigResolver();\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":15520337,"reputation":365,"user_id":11196726,"display_name":"Tamim"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1581336306,"creation_date":1581336306,"answer_id":60150077,"question_id":57787768,"body_markdown":"[Thomas answer](https://stackoverflow.com/a/57796450/11196726) did work for me. The keycloak spring boot properties class had to be enabled manually though, by annotating the Application class like this:\r\n```\r\n@EnableConfigurationProperties(KeycloakSpringBootProperties.class)\r\n```\r\nFurthermore the custom keycloak spring boot config resolver bean must be overriden explicitly.\r\n```\r\n@Bean\r\n@Primary\r\npublic KeycloakConfigResolver keycloakConfigResolver(KeycloakSpringBootProperties properties) {\r\n      return new MyKeycloakSpringBootConfigResolver(properties);\r\n}\r\n```","title":"Example keycloak spring-boot app fails to find bean KeycloakSpringBootConfigResolver","body":"<p><a href=\"https://stackoverflow.com/a/57796450/11196726\">Thomas answer</a> did work for me. The keycloak spring boot properties class had to be enabled manually though, by annotating the Application class like this:</p>\n\n<pre><code>@EnableConfigurationProperties(KeycloakSpringBootProperties.class)\n</code></pre>\n\n<p>Furthermore the custom keycloak spring boot config resolver bean must be overriden explicitly.</p>\n\n<pre><code>@Bean\n@Primary\npublic KeycloakConfigResolver keycloakConfigResolver(KeycloakSpringBootProperties properties) {\n      return new MyKeycloakSpringBootConfigResolver(properties);\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6753883,"reputation":11,"user_id":5203053,"display_name":"Expedito J&#250;nior"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1644445341,"creation_date":1644445341,"answer_id":71057548,"question_id":57787768,"body_markdown":"I could solve this problem by adding some annotations in the KeycloakConfig class declaration:\r\n\r\n    @EnableWebSecurity\r\n    @ComponentScan(basePackageClasses = KeycloakSecurityComponents.class,\r\n                   excludeFilters = @ComponentScan.Filter(type = FilterType.REGEX, \r\n                   pattern = &quot;org.keycloak.adapters.springsecurity.management.HttpSessionManager&quot;))\r\n    public class KeycloakSecurityConfig extends KeycloakWebSecurityConfigurerAdapter \r\n    {\r\n    }\r\n\r\n","title":"Example keycloak spring-boot app fails to find bean KeycloakSpringBootConfigResolver","body":"<p>I could solve this problem by adding some annotations in the KeycloakConfig class declaration:</p>\n<pre><code>@EnableWebSecurity\n@ComponentScan(basePackageClasses = KeycloakSecurityComponents.class,\n               excludeFilters = @ComponentScan.Filter(type = FilterType.REGEX, \n               pattern = &quot;org.keycloak.adapters.springsecurity.management.HttpSessionManager&quot;))\npublic class KeycloakSecurityConfig extends KeycloakWebSecurityConfigurerAdapter \n{\n}\n</code></pre>\n"}],"owner":{"account_id":3347305,"reputation":488,"user_id":2812219,"display_name":"Krzysztof Tkacz"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":20565,"favorite_count":0,"down_vote_count":0,"up_vote_count":27,"accepted_answer_id":57796450,"answer_count":3,"score":27,"last_activity_date":1644445341,"creation_date":1567597721,"question_id":57787768,"body_markdown":"I&#39;m trying to run example app from:\r\n\r\nhttps://github.com/keycloak/keycloak-quickstarts/tree/latest/app-springboot\r\n\r\nI&#39;m getting error:\r\n\r\n    ***************************\r\n    APPLICATION FAILED TO START\r\n    ***************************\r\n\r\n    Description:\r\n\r\n    Parameter 1 of method setKeycloakSpringBootProperties in org.keycloak.adapters.springboot.KeycloakBaseSpringBootConfiguration required a bean of type &#39;org.keycloak.adapters.springboot.KeycloakSpringBootConfigResolver&#39; that could not be found.\r\n\r\n\r\n    Action:\r\n\r\n    Consider defining a bean of type &#39;org.keycloak.adapters.springboot.KeycloakSpringBootConfigResolver&#39; in your configuration.\r\n\r\n\r\n    Process finished with exit code 1","title":"Example keycloak spring-boot app fails to find bean KeycloakSpringBootConfigResolver","body":"<p>I'm trying to run example app from:</p>\n\n<p><a href=\"https://github.com/keycloak/keycloak-quickstarts/tree/latest/app-springboot\" rel=\"noreferrer\">https://github.com/keycloak/keycloak-quickstarts/tree/latest/app-springboot</a></p>\n\n<p>I'm getting error:</p>\n\n<pre><code>***************************\nAPPLICATION FAILED TO START\n***************************\n\nDescription:\n\nParameter 1 of method setKeycloakSpringBootProperties in org.keycloak.adapters.springboot.KeycloakBaseSpringBootConfiguration required a bean of type 'org.keycloak.adapters.springboot.KeycloakSpringBootConfigResolver' that could not be found.\n\n\nAction:\n\nConsider defining a bean of type 'org.keycloak.adapters.springboot.KeycloakSpringBootConfigResolver' in your configuration.\n\n\nProcess finished with exit code 1\n</code></pre>\n"},{"tags":["java","mongodb","nosql","mongotemplate"],"comments":[{"owner":{"account_id":14802184,"reputation":1060,"user_id":10690138,"display_name":"Mahesh Bhatnagar"},"score":0,"creation_date":1638338088,"post_id":70178664,"comment_id":124058916,"body_markdown":"You can use insertMany functionality in mongodb","body":"You can use insertMany functionality in mongodb"}],"answers":[{"tags":[],"owner":{"account_id":17683082,"reputation":55,"user_id":12836503,"display_name":"Thanh Hiếu Nguyễn"},"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1638936583,"creation_date":1638936583,"answer_id":70269842,"question_id":70178664,"body_markdown":"i figured out myself by using BulkOperations you can stack multiple Update into bulks and then execute it at the same time!\r\nMy code:\r\n\r\n    BulkOperations bulkOperations = mongoTemplate.bulkOps(BulkOperations.BulkMode.UNORDERED, Foo.class);\r\n    \r\n            List&lt;Foo&gt; fooList = FooRepository.findAllByIdIn(Arrays.asList(id));\r\n            for (Foo foo : fooList) {\r\n                Query query = new Query().addCriteria(new Criteria(&quot;...&quot;).is(...));\r\n                Update update = new Update().set(..., ...);\r\n                bulkOperations.updateOne(query, update);\r\n            }\r\n            bulkOperations.execute();","title":"MongoTemplate update multiple Document with at once without using saveAll() or loops","body":"<p>i figured out myself by using BulkOperations you can stack multiple Update into bulks and then execute it at the same time!\nMy code:</p>\n<pre><code>BulkOperations bulkOperations = mongoTemplate.bulkOps(BulkOperations.BulkMode.UNORDERED, Foo.class);\n\n        List&lt;Foo&gt; fooList = FooRepository.findAllByIdIn(Arrays.asList(id));\n        for (Foo foo : fooList) {\n            Query query = new Query().addCriteria(new Criteria(&quot;...&quot;).is(...));\n            Update update = new Update().set(..., ...);\n            bulkOperations.updateOne(query, update);\n        }\n        bulkOperations.execute();\n</code></pre>\n"}],"owner":{"account_id":17683082,"reputation":55,"user_id":12836503,"display_name":"Thanh Hiếu Nguyễn"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":966,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":70269842,"answer_count":1,"score":1,"last_activity_date":1644445240,"creation_date":1638327945,"question_id":70178664,"body_markdown":"I&#39;m having trouble saving multiple document at once, my need is that while update multiple document it updates only the targeted field:\r\nWhat i&#39;m trying to do : \r\n\r\n    Update1 (&quot;field Name&quot; , &quot; AB&quot; ) ;\r\n    Update2 (&quot;field Name&quot;, &quot;ABC&quot;);\r\n    Query query = mongoTemplate.Aggr(...)\r\n\r\n    mongoTemplate.multipleUpdate(..,Update1, Update 2);\r\n\r\nIs there any way possible to do this?\r\n\r\n","title":"MongoTemplate update multiple Document with at once without using saveAll() or loops","body":"<p>I'm having trouble saving multiple document at once, my need is that while update multiple document it updates only the targeted field:\nWhat i'm trying to do :</p>\n<pre><code>Update1 (&quot;field Name&quot; , &quot; AB&quot; ) ;\nUpdate2 (&quot;field Name&quot;, &quot;ABC&quot;);\nQuery query = mongoTemplate.Aggr(...)\n\nmongoTemplate.multipleUpdate(..,Update1, Update 2);\n</code></pre>\n<p>Is there any way possible to do this?</p>\n"},{"tags":["java","licensing"],"comments":[{"owner":{"account_id":2366187,"reputation":60152,"user_id":2071828,"accept_rate":88,"display_name":"Boris the Spider"},"score":1,"creation_date":1510394094,"post_id":47236543,"comment_id":81423380,"body_markdown":"There is no difference any more. [OpenJDK is OracleJDK since Java 9 GA](https://blogs.oracle.com/java-platform-group/faster-and-easier-use-and-redistribution-of-java-se).","body":"There is no difference any more. <a href=\"https://blogs.oracle.com/java-platform-group/faster-and-easier-use-and-redistribution-of-java-se\" rel=\"nofollow noreferrer\">OpenJDK is OracleJDK since Java 9 GA</a>."},{"owner":{"account_id":8921462,"reputation":865,"user_id":6657837,"accept_rate":83,"display_name":"Turkhan Badalov"},"score":0,"creation_date":1510394722,"post_id":47236543,"comment_id":81423549,"body_markdown":"@BoristheSpider, thank you very much for the article. I understood that Oracle tries to eliminate technical differences. But I still don&#39;t understand what cases prevent me from using Oracle JDK? Or the reason to use Open JDK instead Oracle JDK. If they provide same features and completely same, then what is the reason to separate implementations? Oracle could just make its code open and available.","body":"@BoristheSpider, thank you very much for the article. I understood that Oracle tries to eliminate technical differences. But I still don&#39;t understand what cases prevent me from using Oracle JDK? Or the reason to use Open JDK instead Oracle JDK. If they provide same features and completely same, then what is the reason to separate implementations? Oracle could just make its code open and available."},{"owner":{"account_id":2366187,"reputation":60152,"user_id":2071828,"accept_rate":88,"display_name":"Boris the Spider"},"score":0,"creation_date":1510394756,"post_id":47236543,"comment_id":81423561,"body_markdown":"They have done exactly that. That is what the article says.","body":"They have done exactly that. That is what the article says."},{"owner":{"account_id":8921462,"reputation":865,"user_id":6657837,"accept_rate":83,"display_name":"Turkhan Badalov"},"score":2,"creation_date":1510394984,"post_id":47236543,"comment_id":81423630,"body_markdown":"@BoristheSpider, where did you see this? The article just states: &quot;Starting with JDK 9 GA Oracle plans to ship OpenJDK builds under the GPL&quot; and &quot;Oracle will also open source commercial features such as Java Flight Recorder previously only available in the Oracle JDK&quot;. But it doesn&#39;t state that Oracle JDK is now open source. What am I missing?","body":"@BoristheSpider, where did you see this? The article just states: &quot;Starting with JDK 9 GA Oracle plans to ship OpenJDK builds under the GPL&quot; and &quot;Oracle will also open source commercial features such as Java Flight Recorder previously only available in the Oracle JDK&quot;. But it doesn&#39;t state that Oracle JDK is now open source. What am I missing?"},{"owner":{"account_id":322981,"reputation":310745,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":0,"creation_date":1574729718,"post_id":47236543,"comment_id":104326702,"body_markdown":"@TurkhanBadalov Oracle releases two products, both based on OpenJDK source code: (a) their commercial product *Oracle JDK* which may vary from OpenJDK such as having rapidly updated patches, and (b) their freebie built directly from OpenJDK codebase. See [my Answer](https://stackoverflow.com/a/59041992/642706) for more details.","body":"@TurkhanBadalov Oracle releases two products, both based on OpenJDK source code: (a) their commercial product <i>Oracle JDK</i> which may vary from OpenJDK such as having rapidly updated patches, and (b) their freebie built directly from OpenJDK codebase. See <a href=\"https://stackoverflow.com/a/59041992/642706\">my Answer</a> for more details."}],"answers":[{"tags":[],"owner":{"account_id":11342861,"reputation":32560,"user_id":8316315,"display_name":"Florian Weimer"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1510403282,"creation_date":1510394826,"answer_id":47236710,"question_id":47236543,"body_markdown":"OpenJDK comes tightly integrated with the distribution update process.  For example, on Fedora, this means that you simply can run\r\n\r\n    dnf update\r\n\r\nwithout activating third-party repositories, and you will get the latest OpenJDK version with all relevant fixes.\r\n\r\nOpenJDK is tested by the distribution vendor on this particular distribution.  Oracle has different reference platforms for testing of OpenJDK.  In the case of Fedora, software written in Java is tested with the OpenJDK version provided by the distribution, while the combination of that software with Oracle JDK receives much less testing.\r\n\r\nOracle also bundles their Java downloads with additional software such as browser toolbars, performance measurement and monitoring tools.","title":"What is the reason to use OpenJDK?","body":"<p>OpenJDK comes tightly integrated with the distribution update process.  For example, on Fedora, this means that you simply can run</p>\n\n<pre><code>dnf update\n</code></pre>\n\n<p>without activating third-party repositories, and you will get the latest OpenJDK version with all relevant fixes.</p>\n\n<p>OpenJDK is tested by the distribution vendor on this particular distribution.  Oracle has different reference platforms for testing of OpenJDK.  In the case of Fedora, software written in Java is tested with the OpenJDK version provided by the distribution, while the combination of that software with Oracle JDK receives much less testing.</p>\n\n<p>Oracle also bundles their Java downloads with additional software such as browser toolbars, performance measurement and monitoring tools.</p>\n"},{"tags":[],"owner":{"account_id":47283,"reputation":703817,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"down_vote_count":1,"up_vote_count":15,"is_accepted":true,"score":14,"last_activity_date":1630353797,"creation_date":1510398500,"answer_id":47237222,"question_id":47236543,"body_markdown":"**November 2017:** *At the time this question was asked*, the reasons for choosing between OpenJDK and Oracle JDK include:\r\n\r\n  - Availability of builds / installers for specific platforms.  For example, last time I checked there were no Oracle JDK distros in &quot;.deb&quot; format for Debian / Ubuntu.  And no OpenJDK builds for Windows. \r\n\r\n  - Oracle JDK has some commercial features that can be enabled by people who have paid.  They are not present on OpenJDK.\r\n\r\n  - Oracle JDK has an annoying click-through license.  This is a pain if you are trying to automate deployment; e.g. to cloud VMs.  By contrast, OpenJDK on Linux (at least) can be installed and updated using the platform&#39;s package manager.\r\n\r\n  - There may be issues if you wanted commercial support for OpenJDK.\r\n\r\nThere **were** no *substantive* license differences between Oracle JDK and OpenJDK if you just plan to use the software.  (There are some constraints on binary redistribution for Oracle JDK, but they are about shipping non-standard or stripped-down versions of the Java platform.)\r\n\r\nIn the future, some of these differences will go away, according to this blog page:\r\n\r\n  - [Faster and Easier Use and Redistribution of Java SE][1]\r\n\r\n------------\r\n\r\n**Update in December 2018:**\r\n\r\n  - As of January 2019, Oracle JDK Java 8 will be EOL for commercial uses.  (But free support will continue until January 2020 for personal use.)\r\n&lt;sup&gt;1&lt;/sup&gt;\r\n\r\n  - Java 9 and Java 10 are EOL.\r\n\r\n  - Commercial uses of Oracle JDK Java 11 and later require a support contract or a subscription from Oracle.  OpenJDK Java builds do not have this requirement.\r\n  \r\n  - Oracle do not provide support for OpenJDK Java builds, but support is available from 3rd parties.  Third parties will also port Oracle security fixes to OpenJDK builds.\r\n\r\nFurther reading:\r\n\r\n  - [Java Is Still Free][2]\r\n  - [OpenJDK Life Cycle and Support Policy (RedHat)][3]\r\n  - [The future of Java and OpenJDK updates without Oracle support][4]\r\n  - [What has changed in Java Release and Update Availability? (Azul Systems)][5]\r\n  - [AdoptOpenJDK Support][6]\r\n\r\n---\r\n\r\n&lt;sup&gt;1&lt;/sup&gt;\r\nEOL stands for end-of-life.\r\n[An end-of-life (EOL) product is a product that does not receive continuing support][7], either because existing marketing, support and other processes are terminated, or it is at the end of its useful life.\r\n\r\n  [1]: https://blogs.oracle.com/java-platform-group/faster-and-easier-use-and-redistribution-of-java-se\r\n  [2]: https://medium.com/@javachampions/java-is-still-free-c02aef8c9e04\r\n  [3]: https://access.redhat.com/articles/1299013\r\n  [4]: https://developers.redhat.com/blog/2018/09/24/the-future-of-java-and-openjdk-updates-without-oracle-support/\r\n  [5]: https://www.azul.com/products/zulu-and-zulu-enterprise/zulu-enterprise-java-support-options/\r\n  [6]: https://adoptopenjdk.net/support.html\r\n  [7]: https://www.techopedia.com/definition/30051/end-of-life-product-eol-product","title":"What is the reason to use OpenJDK?","body":"<p><strong>November 2017:</strong> <em>At the time this question was asked</em>, the reasons for choosing between OpenJDK and Oracle JDK include:</p>\n<ul>\n<li><p>Availability of builds / installers for specific platforms.  For example, last time I checked there were no Oracle JDK distros in &quot;.deb&quot; format for Debian / Ubuntu.  And no OpenJDK builds for Windows.</p>\n</li>\n<li><p>Oracle JDK has some commercial features that can be enabled by people who have paid.  They are not present on OpenJDK.</p>\n</li>\n<li><p>Oracle JDK has an annoying click-through license.  This is a pain if you are trying to automate deployment; e.g. to cloud VMs.  By contrast, OpenJDK on Linux (at least) can be installed and updated using the platform's package manager.</p>\n</li>\n<li><p>There may be issues if you wanted commercial support for OpenJDK.</p>\n</li>\n</ul>\n<p>There <strong>were</strong> no <em>substantive</em> license differences between Oracle JDK and OpenJDK if you just plan to use the software.  (There are some constraints on binary redistribution for Oracle JDK, but they are about shipping non-standard or stripped-down versions of the Java platform.)</p>\n<p>In the future, some of these differences will go away, according to this blog page:</p>\n<ul>\n<li><a href=\"https://blogs.oracle.com/java-platform-group/faster-and-easier-use-and-redistribution-of-java-se\" rel=\"nofollow noreferrer\">Faster and Easier Use and Redistribution of Java SE</a></li>\n</ul>\n<hr />\n<p><strong>Update in December 2018:</strong></p>\n<ul>\n<li><p>As of January 2019, Oracle JDK Java 8 will be EOL for commercial uses.  (But free support will continue until January 2020 for personal use.)\n<sup>1</sup></p>\n</li>\n<li><p>Java 9 and Java 10 are EOL.</p>\n</li>\n<li><p>Commercial uses of Oracle JDK Java 11 and later require a support contract or a subscription from Oracle.  OpenJDK Java builds do not have this requirement.</p>\n</li>\n<li><p>Oracle do not provide support for OpenJDK Java builds, but support is available from 3rd parties.  Third parties will also port Oracle security fixes to OpenJDK builds.</p>\n</li>\n</ul>\n<p>Further reading:</p>\n<ul>\n<li><a href=\"https://medium.com/@javachampions/java-is-still-free-c02aef8c9e04\" rel=\"nofollow noreferrer\">Java Is Still Free</a></li>\n<li><a href=\"https://access.redhat.com/articles/1299013\" rel=\"nofollow noreferrer\">OpenJDK Life Cycle and Support Policy (RedHat)</a></li>\n<li><a href=\"https://developers.redhat.com/blog/2018/09/24/the-future-of-java-and-openjdk-updates-without-oracle-support/\" rel=\"nofollow noreferrer\">The future of Java and OpenJDK updates without Oracle support</a></li>\n<li><a href=\"https://www.azul.com/products/zulu-and-zulu-enterprise/zulu-enterprise-java-support-options/\" rel=\"nofollow noreferrer\">What has changed in Java Release and Update Availability? (Azul Systems)</a></li>\n<li><a href=\"https://adoptopenjdk.net/support.html\" rel=\"nofollow noreferrer\">AdoptOpenJDK Support</a></li>\n</ul>\n<hr />\n<p><sup>1</sup>\nEOL stands for end-of-life.\n<a href=\"https://www.techopedia.com/definition/30051/end-of-life-product-eol-product\" rel=\"nofollow noreferrer\">An end-of-life (EOL) product is a product that does not receive continuing support</a>, either because existing marketing, support and other processes are terminated, or it is at the end of its useful life.</p>\n"},{"tags":[],"owner":{"account_id":390441,"reputation":32048,"user_id":750510,"accept_rate":98,"display_name":"madhead"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1546089789,"creation_date":1546089789,"answer_id":53969960,"question_id":47236543,"body_markdown":"For those, who read this in 2019.\r\n\r\n&gt;Java SE 8 is the last Java SE release targeting Desktop deployment (eg, Java Web Start and a stand-alone system JRE).  Java SE 8 will be end of public updates in January 2019, after which commercial users need to either transition to other technologies, or purchase a [Java SE Subscription](https://www.oracle.com/technetwork/java/javaseproducts/overview/javasesubscriptionfaq-4891443.html).\r\n\r\nSo, another reason to use OpenJDK (in addition to what [Stephen C](https://stackoverflow.com/users/139985/stephen-c) [said](https://stackoverflow.com/a/47237222/750510)): it&#39;s free of charge for all purposes.","title":"What is the reason to use OpenJDK?","body":"<p>For those, who read this in 2019.</p>\n\n<blockquote>\n  <p>Java SE 8 is the last Java SE release targeting Desktop deployment (eg, Java Web Start and a stand-alone system JRE).  Java SE 8 will be end of public updates in January 2019, after which commercial users need to either transition to other technologies, or purchase a <a href=\"https://www.oracle.com/technetwork/java/javaseproducts/overview/javasesubscriptionfaq-4891443.html\" rel=\"nofollow noreferrer\">Java SE Subscription</a>.</p>\n</blockquote>\n\n<p>So, another reason to use OpenJDK (in addition to what <a href=\"https://stackoverflow.com/users/139985/stephen-c\">Stephen C</a> <a href=\"https://stackoverflow.com/a/47237222/750510\">said</a>): it's free of charge for all purposes.</p>\n"},{"tags":[],"owner":{"account_id":322981,"reputation":310745,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"down_vote_count":0,"up_vote_count":46,"is_accepted":false,"score":46,"last_activity_date":1644445116,"creation_date":1574728024,"answer_id":59041992,"question_id":47236543,"body_markdown":"Other Answers are correct. Here is some other information as well, including vital changes as of early 2021.\r\n\r\n# Source-code versus Binaries/installers\r\n\r\n&gt;understand the differences between Oracle JDK and Open JDK.\r\n\r\nTo sum it up: **source-code** versus **binaries/installers**.\r\n\r\n - [*OpenJDK*][1] is an open-source project, implementing the [Java Specifications][2], [JSRs][3], and [JEPs][4] that define the [Java platform][5]. This project publishes **only source-code**, not binaries or installers to get Java running on your computer (except for some early-access builds). Oracle is the principal participant in the OpenJDK project, alongside IBM &amp; Red Hat, Apple, SAP, Azul Systems, Microsoft, and others.\r\n - Many companies provide distributions of OpenJDK for installation, as **binaries or installers**. Oracle is one such company. \r\n\r\nOracle actually provides two such products:\r\n\r\n - *Oracle JDK*&lt;br /&gt;A commercial product, with paid support plans. (Free-of-cost only for development &amp; testing, not deployment. Read their terms.)\r\n - *jdk.java.net*&lt;br /&gt;A build of the OpenJDK source-code, freely available, unsupported.\r\n\r\nOracle has declared their intention to keep their commercial product *Oracle JDK* at feature-parity with OpenJDK. Oracle even went so far as to open-source and make available at no cost their formerly commercial tools *Mission Control* and *Flight Recorder*, both now a part of *OpenJDK*. So there is nearly no practical difference. One significant difference is that the Oracle company reserves the right to rapidly supply their paid support customer base with urgent patches not currently found in OpenJDK. Ditto for other vendors selling support.\r\n\r\n[And for the record, Oracle offers a third implementation of Java, [*GraalVM*][6], which is a very specialized product.]\r\n\r\nHere is a flowchart graphic I made to help guide you in selecting a provider of a Java implementation.\r\n\r\n\r\n\r\n\r\n[![Flowchart guiding you in choosing a vendor for a Java 11 implementation][7]][7]\r\n\r\nAnd here is a list of motivations you might consider in choosing a distribution.\r\n\r\n\r\n[![Motivations in choosing a vendor for Java][9]][9]\r\n\r\n\r\n\r\n  [1]: https://en.wikipedia.org/wiki/OpenJDK\r\n  [2]: https://docs.oracle.com/javase/specs/\r\n  [3]: https://jcp.org/en/jsr/all\r\n  [4]: https://openjdk.java.net/jeps/0\r\n  [5]: https://en.wikipedia.org/wiki/Java_(software_platform)\r\n  [6]: https://en.wikipedia.org/wiki/GraalVM\r\n  [7]: https://i.stack.imgur.com/2k5u8.png\r\n  [8]: https://i.stack.imgur.com/0hM8N.png\r\n  [9]: https://i.stack.imgur.com/unKsY.png","title":"What is the reason to use OpenJDK?","body":"<p>Other Answers are correct. Here is some other information as well, including vital changes as of early 2021.</p>\n<h1>Source-code versus Binaries/installers</h1>\n<blockquote>\n<p>understand the differences between Oracle JDK and Open JDK.</p>\n</blockquote>\n<p>To sum it up: <strong>source-code</strong> versus <strong>binaries/installers</strong>.</p>\n<ul>\n<li><a href=\"https://en.wikipedia.org/wiki/OpenJDK\" rel=\"noreferrer\"><em>OpenJDK</em></a> is an open-source project, implementing the <a href=\"https://docs.oracle.com/javase/specs/\" rel=\"noreferrer\">Java Specifications</a>, <a href=\"https://jcp.org/en/jsr/all\" rel=\"noreferrer\">JSRs</a>, and <a href=\"https://openjdk.java.net/jeps/0\" rel=\"noreferrer\">JEPs</a> that define the <a href=\"https://en.wikipedia.org/wiki/Java_(software_platform)\" rel=\"noreferrer\">Java platform</a>. This project publishes <strong>only source-code</strong>, not binaries or installers to get Java running on your computer (except for some early-access builds). Oracle is the principal participant in the OpenJDK project, alongside IBM &amp; Red Hat, Apple, SAP, Azul Systems, Microsoft, and others.</li>\n<li>Many companies provide distributions of OpenJDK for installation, as <strong>binaries or installers</strong>. Oracle is one such company.</li>\n</ul>\n<p>Oracle actually provides two such products:</p>\n<ul>\n<li><em>Oracle JDK</em><br />A commercial product, with paid support plans. (Free-of-cost only for development &amp; testing, not deployment. Read their terms.)</li>\n<li><em>jdk.java.net</em><br />A build of the OpenJDK source-code, freely available, unsupported.</li>\n</ul>\n<p>Oracle has declared their intention to keep their commercial product <em>Oracle JDK</em> at feature-parity with OpenJDK. Oracle even went so far as to open-source and make available at no cost their formerly commercial tools <em>Mission Control</em> and <em>Flight Recorder</em>, both now a part of <em>OpenJDK</em>. So there is nearly no practical difference. One significant difference is that the Oracle company reserves the right to rapidly supply their paid support customer base with urgent patches not currently found in OpenJDK. Ditto for other vendors selling support.</p>\n<p>[And for the record, Oracle offers a third implementation of Java, <a href=\"https://en.wikipedia.org/wiki/GraalVM\" rel=\"noreferrer\"><em>GraalVM</em></a>, which is a very specialized product.]</p>\n<p>Here is a flowchart graphic I made to help guide you in selecting a provider of a Java implementation.</p>\n<p><a href=\"https://i.stack.imgur.com/2k5u8.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/2k5u8.png\" alt=\"Flowchart guiding you in choosing a vendor for a Java 11 implementation\" /></a></p>\n<p>And here is a list of motivations you might consider in choosing a distribution.</p>\n<p><a href=\"https://i.stack.imgur.com/unKsY.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/unKsY.png\" alt=\"Motivations in choosing a vendor for Java\" /></a></p>\n"}],"owner":{"account_id":8921462,"reputation":865,"user_id":6657837,"accept_rate":83,"display_name":"Turkhan Badalov"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":27039,"favorite_count":0,"down_vote_count":1,"up_vote_count":28,"accepted_answer_id":47237222,"answer_count":4,"score":27,"last_activity_date":1644445116,"creation_date":1510393803,"question_id":47236543,"body_markdown":"I somehow understand the differences between `Oracle JDK` and `Open JDK`.  \r\nBut I can&#39;t find reasons to use `Open JDK`.  \r\nBecause `Oracle JDK` already has everything one would need and sometimes faster than `Open JDK`.\r\n\r\nIn which cases should someone use `Open JDK`?  \r\nIs it just for legality issues?  \r\nIf yes, then what are issues?   \r\nThat because I have been still develop all my projects using `Oracle JDK`","title":"What is the reason to use OpenJDK?","body":"<p>I somehow understand the differences between <code>Oracle JDK</code> and <code>Open JDK</code>.<br>\nBut I can't find reasons to use <code>Open JDK</code>.<br>\nBecause <code>Oracle JDK</code> already has everything one would need and sometimes faster than <code>Open JDK</code>.</p>\n\n<p>In which cases should someone use <code>Open JDK</code>?<br>\nIs it just for legality issues?<br>\nIf yes, then what are issues?<br>\nThat because I have been still develop all my projects using <code>Oracle JDK</code></p>\n"},{"tags":["java","amazon-web-services","amazon-dynamodb","aws-sdk"],"answers":[{"tags":[],"owner":{"account_id":11890894,"reputation":143,"user_id":8701784,"display_name":"Yakim"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1632659082,"creation_date":1632659082,"answer_id":69334898,"question_id":69334690,"body_markdown":"try to use `key.equals(tableColumn)` instaed of `key == tableColumn`","title":"How do i prevent java args[] from returning an empty list from a dynamodb table?","body":"<p>try to use <code>key.equals(tableColumn)</code> instaed of <code>key == tableColumn</code></p>\n"}],"owner":{"account_id":15193140,"reputation":621,"user_id":10963322,"display_name":"TheWalkingMalteser"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":46,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":69334898,"answer_count":1,"score":0,"last_activity_date":1644445062,"creation_date":1632657566,"question_id":69334690,"body_markdown":"I have a dynamodb table called ```environments``` and a column within that table called ```env_name```\r\nWhen running the class in the command line:\r\n```\r\njava -cp target/sharedlibraries.jar com.mimo.sharedlibraries.fetchCMDBtable environments env_name\r\n```\r\n**i get an empty list instead of a list full of environment names.** \r\n\r\nHere is my class i am using:\r\n```\r\npublic class fetchCMDBtable {\r\n    \r\n    public static void main(String[] args)throws Exception {\r\n        //default values\r\n\r\n        if (args.length != 2) {\r\n            System.out.println(&quot;Not enough args!&quot;);\r\n            System.exit(1);\r\n        }\r\n        String tableName = args[0]; //environments\r\n        String tableColumn = args[1]; //env_name\r\n\r\n        DynamoDbClient client = DynamoDbClient.builder()\r\n                .region(Region.EU_WEST_1)\r\n                .build();\r\n            \r\n        CMDB(client,tableName,tableColumn);\r\n        System.out.println(CMDB(client, tableName, tableColumn));\r\n        \r\n        client.close();\r\n    }\r\n\r\n    public static List&lt;String&gt; CMDB(DynamoDbClient client,String tableName, String tableColumn) throws Exception {\r\n\r\n        List&lt;String&gt; ListValues = new ArrayList&lt;&gt;();\r\n\r\n        try {\r\n            \r\n            ScanRequest scanRequest = ScanRequest.builder()\r\n                        .tableName(tableName)\r\n                        .build();\r\n            ScanResponse response = client.scan(scanRequest);\r\n\r\n            for (Map&lt;String, AttributeValue&gt; item : response.items()){\r\n                Set&lt;String&gt; keys = item.keySet();\r\n                for (String key : keys) {\r\n                    \r\n                    if (key == tableColumn) {\r\n                        ListValues.add(item.get(key).s()) ;\r\n                    }\r\n                }\r\n            }\r\n            \r\n        } catch (DynamoDbException e){\r\n            e.printStackTrace();\r\n            System.exit(1);\r\n        }\r\n        return ListValues;\r\n        \r\n    }\r\n}\r\n```\r\n","title":"How do i prevent java args[] from returning an empty list from a dynamodb table?","body":"<p>I have a dynamodb table called <code>environments</code> and a column within that table called <code>env_name</code>\nWhen running the class in the command line:</p>\n<pre><code>java -cp target/sharedlibraries.jar com.mimo.sharedlibraries.fetchCMDBtable environments env_name\n</code></pre>\n<p><strong>i get an empty list instead of a list full of environment names.</strong></p>\n<p>Here is my class i am using:</p>\n<pre><code>public class fetchCMDBtable {\n    \n    public static void main(String[] args)throws Exception {\n        //default values\n\n        if (args.length != 2) {\n            System.out.println(&quot;Not enough args!&quot;);\n            System.exit(1);\n        }\n        String tableName = args[0]; //environments\n        String tableColumn = args[1]; //env_name\n\n        DynamoDbClient client = DynamoDbClient.builder()\n                .region(Region.EU_WEST_1)\n                .build();\n            \n        CMDB(client,tableName,tableColumn);\n        System.out.println(CMDB(client, tableName, tableColumn));\n        \n        client.close();\n    }\n\n    public static List&lt;String&gt; CMDB(DynamoDbClient client,String tableName, String tableColumn) throws Exception {\n\n        List&lt;String&gt; ListValues = new ArrayList&lt;&gt;();\n\n        try {\n            \n            ScanRequest scanRequest = ScanRequest.builder()\n                        .tableName(tableName)\n                        .build();\n            ScanResponse response = client.scan(scanRequest);\n\n            for (Map&lt;String, AttributeValue&gt; item : response.items()){\n                Set&lt;String&gt; keys = item.keySet();\n                for (String key : keys) {\n                    \n                    if (key == tableColumn) {\n                        ListValues.add(item.get(key).s()) ;\n                    }\n                }\n            }\n            \n        } catch (DynamoDbException e){\n            e.printStackTrace();\n            System.exit(1);\n        }\n        return ListValues;\n        \n    }\n}\n</code></pre>\n"},{"tags":["java","hibernate"],"owner":{"account_id":8468157,"reputation":6871,"user_id":6351733,"accept_rate":22,"display_name":"Maurice"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":434,"favorite_count":0,"down_vote_count":0,"up_vote_count":7,"answer_count":0,"score":7,"last_activity_date":1644444973,"creation_date":1513692489,"question_id":47888764,"body_markdown":"Can i use @CreationTimestamp on an @Embeddable pojo? I&#39;ve noticed that the date remains null after adding this class:\r\n\r\n    @Embeddable\r\n    public class LaborPeriodChange implements Serializable {\r\n    \r\n        //@PrePersist\r\n    \r\n        @Temporal(TemporalType.TIMESTAMP)\r\n        @Column(updatable = false)\r\n        @CreationTimestamp\r\n        private Date dateChanged;\r\n\r\nto the elementcollection in `LaborPeriod`.\r\n\r\n    @ElementCollection\r\n    @CollectionTable(name=&quot;laborPeriod_change&quot;, joinColumns=@JoinColumn(name=&quot;FK_LaborPeriod&quot;))\r\n    @Column(name=&quot;laborPeriod_change&quot;)\r\n    @JsonIgnore\r\n    private List&lt;LaborPeriodChange&gt; laborPeriodChanges = new ArrayList&lt;&gt;();\r\n\r\nSo can @CreationTimestamp only be used on @Entity pojo&#39;s?","title":"Can i use @CreationTimestamp on an @Embeddable pojo?","body":"<p>Can i use @CreationTimestamp on an @Embeddable pojo? I've noticed that the date remains null after adding this class:</p>\n<pre><code>@Embeddable\npublic class LaborPeriodChange implements Serializable {\n\n    //@PrePersist\n\n    @Temporal(TemporalType.TIMESTAMP)\n    @Column(updatable = false)\n    @CreationTimestamp\n    private Date dateChanged;\n</code></pre>\n<p>to the elementcollection in <code>LaborPeriod</code>.</p>\n<pre><code>@ElementCollection\n@CollectionTable(name=&quot;laborPeriod_change&quot;, joinColumns=@JoinColumn(name=&quot;FK_LaborPeriod&quot;))\n@Column(name=&quot;laborPeriod_change&quot;)\n@JsonIgnore\nprivate List&lt;LaborPeriodChange&gt; laborPeriodChanges = new ArrayList&lt;&gt;();\n</code></pre>\n<p>So can @CreationTimestamp only be used on @Entity pojo's?</p>\n"},{"tags":["java","spring","stream","java-stream"],"answers":[{"tags":[],"owner":{"account_id":24059439,"reputation":282,"user_id":18036868,"display_name":"HUTUTU"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1644287975,"creation_date":1644286779,"answer_id":71027848,"question_id":71027366,"body_markdown":"Streams can be used for filtering, transformation, or some other operation. Generally, one or more collections are converted to other collections, or the size of a collection is changed. However, in your example, there is no collection conversion or size change. At most, replace the for loop in your example with forEach, but it doesn&#39;t make sense.\r\n\r\nWhen the number of Builders and AdminUsers is large, the complexity of this code is O(n^2). You can use hash to reduce complexity.\r\n```\r\nMap&lt;String, String&gt; emailAuthMap = adminUsers.stream()\r\n                .collect(Collectors.toMap(AdminUser::getEmail, u -&gt; u.getAuthorities().size() &gt; 0 ? u.getAuthorities().get(0).getAuthority() : null));\r\nfor (Builder builder : builders) {\r\n    String auth = emailAuthMap.get(builder.getUserRole());\r\n    builder.setUserRole(auth != null ? UserRole.valueOf(auth) : null);\r\n}\r\n```","title":"How to fill in a property in a collection with help of stream operators?","body":"<p>Streams can be used for filtering, transformation, or some other operation. Generally, one or more collections are converted to other collections, or the size of a collection is changed. However, in your example, there is no collection conversion or size change. At most, replace the for loop in your example with forEach, but it doesn't make sense.</p>\n<p>When the number of Builders and AdminUsers is large, the complexity of this code is O(n^2). You can use hash to reduce complexity.</p>\n<pre><code>Map&lt;String, String&gt; emailAuthMap = adminUsers.stream()\n                .collect(Collectors.toMap(AdminUser::getEmail, u -&gt; u.getAuthorities().size() &gt; 0 ? u.getAuthorities().get(0).getAuthority() : null));\nfor (Builder builder : builders) {\n    String auth = emailAuthMap.get(builder.getUserRole());\n    builder.setUserRole(auth != null ? UserRole.valueOf(auth) : null);\n}\n</code></pre>\n"}],"owner":{"account_id":1067937,"reputation":13238,"user_id":1067943,"accept_rate":65,"display_name":"Michael"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":60,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"closed_date":1645474562,"answer_count":1,"score":0,"last_activity_date":1644444658,"creation_date":1644282329,"question_id":71027366,"body_markdown":"I have two lists of objects builders of type Builder and adminUsers of type AdminUser.\r\n\r\nHere are type defenitions of the classes:\r\n\r\n    public class Builder {\r\n        @Id\r\n        private String id;\r\n        private String name;\r\n        @Field(&quot;company_name&quot;)\r\n        private String companyName;\r\n        @Indexed(unique=true)\r\n        private String email;\r\n        private UserRole userRole;\r\n    }\r\n\r\n    public class AdminUser {\r\n        @Id\r\n        private String id;\r\n        @Indexed(unique=true)\r\n        private String email;\r\n        private List&lt;GrantedAuthority&gt; authorities;\r\n    }\r\n\r\n    public enum UserRole {\r\n        ROLE_ADMIN,\r\n        ROLE_DATA,\r\n        ROLE_BUILDER\r\n    }\r\n\r\nI try to fill property which is called UserRole of the builders collection \r\nwith a UserRole property from adminUser collection of each item in builders collection. \r\n\r\nHere is how I am doing it in imperative attitude: \r\n\r\n\r\n    List&lt;Builder&gt; builders = builderRepository.findAllBy();\r\n    List&lt;AdminUser&gt; adminUsers = adminUserRepository.findAllBy();\r\n    \r\n    for (Builder builder : builders) {\r\n        for (AdminUser adminUser : adminUsers) {\r\n    \r\n            if (builder.getEmail().equals(adminUser.getEmail()))\r\n                builder.setUserRole(UserRole.valueOf(adminUser.getAuthorities().get(0).getAuthority()));\r\n        }\r\n    }\r\n\r\nThe code above works.\r\n\t\t\r\nI tried to achieve the same with a declarative attitude with streams operators.\r\nBut I got confused and ended up writing it the good old imperative way.\r\nCould you help me and show me an example of how the code above can be written with help of streams and intermediate operators, in a declarative way?   \t\t\r\n\r\n","title":"How to fill in a property in a collection with help of stream operators?","body":"<p>I have two lists of objects builders of type Builder and adminUsers of type AdminUser.</p>\n<p>Here are type defenitions of the classes:</p>\n<pre><code>public class Builder {\n    @Id\n    private String id;\n    private String name;\n    @Field(&quot;company_name&quot;)\n    private String companyName;\n    @Indexed(unique=true)\n    private String email;\n    private UserRole userRole;\n}\n\npublic class AdminUser {\n    @Id\n    private String id;\n    @Indexed(unique=true)\n    private String email;\n    private List&lt;GrantedAuthority&gt; authorities;\n}\n\npublic enum UserRole {\n    ROLE_ADMIN,\n    ROLE_DATA,\n    ROLE_BUILDER\n}\n</code></pre>\n<p>I try to fill property which is called UserRole of the builders collection\nwith a UserRole property from adminUser collection of each item in builders collection.</p>\n<p>Here is how I am doing it in imperative attitude:</p>\n<pre><code>List&lt;Builder&gt; builders = builderRepository.findAllBy();\nList&lt;AdminUser&gt; adminUsers = adminUserRepository.findAllBy();\n\nfor (Builder builder : builders) {\n    for (AdminUser adminUser : adminUsers) {\n\n        if (builder.getEmail().equals(adminUser.getEmail()))\n            builder.setUserRole(UserRole.valueOf(adminUser.getAuthorities().get(0).getAuthority()));\n    }\n}\n</code></pre>\n<p>The code above works.</p>\n<p>I tried to achieve the same with a declarative attitude with streams operators.\nBut I got confused and ended up writing it the good old imperative way.\nCould you help me and show me an example of how the code above can be written with help of streams and intermediate operators, in a declarative way?</p>\n"},{"tags":["java","apache-kafka","log4j","avro","confluent-schema-registry"],"comments":[{"owner":{"account_id":2671330,"reputation":183376,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"score":1,"creation_date":1644260502,"post_id":71022670,"comment_id":125553514,"body_markdown":"If you want to use Avro, then you shouldn&#39;t need `ObjectOutputStream` or `Serializable`. To get bytes from an Avro object, you&#39;d use an `EncoderFactory`","body":"If you want to use Avro, then you shouldn&#39;t need <code>ObjectOutputStream</code> or <code>Serializable</code>. To get bytes from an Avro object, you&#39;d use an <code>EncoderFactory</code>"},{"owner":{"account_id":14191133,"reputation":222,"user_id":10251749,"display_name":"beanwa"},"score":0,"creation_date":1644333231,"post_id":71022670,"comment_id":125575482,"body_markdown":"I did switch to using the GenericRecordBuilder and using the `EncoderFactory` as well, however with this I get the same error listed above. it appears the `magic byte` is missing because this was not serialized by the schema-registry, however log4j requires it to be serialized there so I am not certain how to resolve this","body":"I did switch to using the GenericRecordBuilder and using the <code>EncoderFactory</code> as well, however with this I get the same error listed above. it appears the <code>magic byte</code> is missing because this was not serialized by the schema-registry, however log4j requires it to be serialized there so I am not certain how to resolve this"},{"owner":{"account_id":2671330,"reputation":183376,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"score":1,"creation_date":1644333682,"post_id":71022670,"comment_id":125575663,"body_markdown":"You said you wanted Avro, not the Confluent wire format wrapper for Avro. In that case, you&#39;re better off just creating an instance of `KafkaAvroSerializer` and calling its serialize function manually, assuming you cannot set `value.serializer` property somewhere else. Also, I&#39;d recommend not doing all this in log4j because it limits your clients to only Java, or what if they want to use logback and haven&#39;t upgraded log4j2, etc. You can use logstash, for example, to read any file on disk, then parse those into Kafka events, and there&#39;s a logstash schema registry plugin","body":"You said you wanted Avro, not the Confluent wire format wrapper for Avro. In that case, you&#39;re better off just creating an instance of <code>KafkaAvroSerializer</code> and calling its serialize function manually, assuming you cannot set <code>value.serializer</code> property somewhere else. Also, I&#39;d recommend not doing all this in log4j because it limits your clients to only Java, or what if they want to use logback and haven&#39;t upgraded log4j2, etc. You can use logstash, for example, to read any file on disk, then parse those into Kafka events, and there&#39;s a logstash schema registry plugin"}],"answers":[{"tags":[],"owner":{"account_id":14191133,"reputation":222,"user_id":10251749,"display_name":"beanwa"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1644444108,"creation_date":1644444108,"answer_id":71057325,"question_id":71022670,"body_markdown":"OneCricketeer had the right idea, here is the implementation:\r\n\r\n```@Plugin(name=&quot;ServiceLogLayout&quot;, category= Node.CATEGORY, elementType = Layout.ELEMENT_TYPE, printObject = true)\r\npublic class ServiceLogLayout extends AbstractLayout&lt;byte[]&gt; {\r\n    Schema record;\r\n    SchemaRegistryClient client;\r\n    Schema.Parser parser;\r\n\r\n    public ServiceLogLayout() {\r\n        // maybe set these for avro\r\n        super(null, null, null);\r\n        Schema timestampMilliType = LogicalTypes.timestampMillis().addToSchema(Schema.create(Schema.Type.LONG));\r\n\r\n        // CREATE SCHEMA\r\n        Schema.Field service = new Schema.Field(&quot;service&quot;, SchemaBuilder.builder().stringType(), &quot;Name of service sending this message&quot;);\r\n        Schema.Field environment = new Schema.Field(&quot;environment&quot;, SchemaBuilder.builder().enumeration(&quot;environment_type&quot;).symbols(&quot;local&quot;, &quot;dev&quot;, &quot;staging&quot;, &quot;prod&quot;, &quot;shared_services&quot;, &quot;testing&quot;, &quot;security&quot;));\r\n        Schema.Field level = new Schema.Field(&quot;level&quot;, SchemaBuilder.builder().enumeration(&quot;level_type&quot;).symbols(&quot;debug&quot;, &quot;info&quot;, &quot;notice&quot;, &quot;warning&quot;, &quot;error&quot;, &quot;critical&quot;, &quot;alert&quot;, &quot;emergency&quot;), &quot;logging level&quot;);\r\n        Schema.Field msg = new Schema.Field(&quot;msg&quot;, SchemaBuilder.builder().stringType(), &quot;Required log message&quot;);\r\n        Schema.Field data = new Schema.Field(&quot;data&quot;, SchemaBuilder.builder().nullable().stringType(), &quot;Optional extra data, such as stack frames&quot;);\r\n        Schema.Field timestamp = new Schema.Field(&quot;timestamp&quot;, SchemaBuilder.builder().type(timestampMilliType));\r\n\r\n        List&lt;Schema.Field&gt; fields = new ArrayList&lt;&gt;();\r\n        fields.add(service);\r\n        fields.add(environment);\r\n        fields.add(level);\r\n        fields.add(msg);\r\n        fields.add(data);\r\n        fields.add(timestamp);\r\n        this.record = Schema.createRecord(&quot;service_logs&quot;, &quot;&quot;, &quot;com.test.avro&quot;, false, fields);\r\n\r\n        client = new CachedSchemaRegistryClient(&quot;http://schema-registry:8081&quot;, 10000);\r\n        parser = new Schema.Parser();\r\n    }\r\n\r\n    @Override\r\n    public byte[] toByteArray(LogEvent event) {\r\n\r\n        String env = System.getenv(&quot;ENVIRONMENT&quot;) != null ? System.getenv(&quot;ENVIRONMENT&quot;).toLowerCase() : &quot;local&quot;;\r\n        // FILL IN RECORD\r\n        GenericRecordBuilder schemaBuilder = new GenericRecordBuilder(this.record);\r\n        schemaBuilder.set(&quot;service&quot;, &quot;testService&quot;);\r\n        schemaBuilder.set(&quot;environment&quot;, new GenericData.EnumSymbol(this.record.getField(&quot;environment&quot;).schema(), env));\r\n        schemaBuilder.set(&quot;level&quot;, new GenericData.EnumSymbol(this.record.getField(&quot;level&quot;).schema(), event.getLevel().name()));\r\n        schemaBuilder.set(&quot;msg&quot;, event.getMessage().getFormattedMessage());\r\n        schemaBuilder.set(&quot;data&quot;, null);\r\n        schemaBuilder.set(&quot;timestamp&quot;, event.getTimeMillis());\r\n\r\n        // SERIALIZE\r\n        byte[] data;\r\n        KafkaAvroSerializer kafkaAvroSerializer = new KafkaAvroSerializer(client);\r\n        data = kafkaAvroSerializer.serialize(&quot;service_logs&quot;, schemaBuilder.build());\r\n\r\n        return data;\r\n    }\r\n\r\n    @Override\r\n    public byte[] toSerializable(LogEvent event) {\r\n        return toByteArray(event);\r\n    }\r\n\r\n    @Override\r\n    public String getContentType() {\r\n        return null;\r\n    }\r\n\r\n    @PluginFactory\r\n    public static Layout&lt;?&gt; createLayout() {\r\n        return new ServiceLogLayout();\r\n    }\r\n\r\n    private static class PrivateObjectOutputStream extends ObjectOutputStream {\r\n\r\n        public PrivateObjectOutputStream(final OutputStream os) throws IOException {\r\n            super(os);\r\n        }\r\n\r\n        @Override\r\n        protected void writeStreamHeader() {\r\n            // do nothing\r\n        }\r\n    }\r\n\r\n}\r\n```\r\n\r\nIt is worth noting that using logstash might be a good solution to this as well","title":"How to transform a log4j message to fit an avro schema and post to kafka","body":"<p>OneCricketeer had the right idea, here is the implementation:</p>\n<pre><code>public class ServiceLogLayout extends AbstractLayout&lt;byte[]&gt; {\n    Schema record;\n    SchemaRegistryClient client;\n    Schema.Parser parser;\n\n    public ServiceLogLayout() {\n        // maybe set these for avro\n        super(null, null, null);\n        Schema timestampMilliType = LogicalTypes.timestampMillis().addToSchema(Schema.create(Schema.Type.LONG));\n\n        // CREATE SCHEMA\n        Schema.Field service = new Schema.Field(&quot;service&quot;, SchemaBuilder.builder().stringType(), &quot;Name of service sending this message&quot;);\n        Schema.Field environment = new Schema.Field(&quot;environment&quot;, SchemaBuilder.builder().enumeration(&quot;environment_type&quot;).symbols(&quot;local&quot;, &quot;dev&quot;, &quot;staging&quot;, &quot;prod&quot;, &quot;shared_services&quot;, &quot;testing&quot;, &quot;security&quot;));\n        Schema.Field level = new Schema.Field(&quot;level&quot;, SchemaBuilder.builder().enumeration(&quot;level_type&quot;).symbols(&quot;debug&quot;, &quot;info&quot;, &quot;notice&quot;, &quot;warning&quot;, &quot;error&quot;, &quot;critical&quot;, &quot;alert&quot;, &quot;emergency&quot;), &quot;logging level&quot;);\n        Schema.Field msg = new Schema.Field(&quot;msg&quot;, SchemaBuilder.builder().stringType(), &quot;Required log message&quot;);\n        Schema.Field data = new Schema.Field(&quot;data&quot;, SchemaBuilder.builder().nullable().stringType(), &quot;Optional extra data, such as stack frames&quot;);\n        Schema.Field timestamp = new Schema.Field(&quot;timestamp&quot;, SchemaBuilder.builder().type(timestampMilliType));\n\n        List&lt;Schema.Field&gt; fields = new ArrayList&lt;&gt;();\n        fields.add(service);\n        fields.add(environment);\n        fields.add(level);\n        fields.add(msg);\n        fields.add(data);\n        fields.add(timestamp);\n        this.record = Schema.createRecord(&quot;service_logs&quot;, &quot;&quot;, &quot;com.test.avro&quot;, false, fields);\n\n        client = new CachedSchemaRegistryClient(&quot;http://schema-registry:8081&quot;, 10000);\n        parser = new Schema.Parser();\n    }\n\n    @Override\n    public byte[] toByteArray(LogEvent event) {\n\n        String env = System.getenv(&quot;ENVIRONMENT&quot;) != null ? System.getenv(&quot;ENVIRONMENT&quot;).toLowerCase() : &quot;local&quot;;\n        // FILL IN RECORD\n        GenericRecordBuilder schemaBuilder = new GenericRecordBuilder(this.record);\n        schemaBuilder.set(&quot;service&quot;, &quot;testService&quot;);\n        schemaBuilder.set(&quot;environment&quot;, new GenericData.EnumSymbol(this.record.getField(&quot;environment&quot;).schema(), env));\n        schemaBuilder.set(&quot;level&quot;, new GenericData.EnumSymbol(this.record.getField(&quot;level&quot;).schema(), event.getLevel().name()));\n        schemaBuilder.set(&quot;msg&quot;, event.getMessage().getFormattedMessage());\n        schemaBuilder.set(&quot;data&quot;, null);\n        schemaBuilder.set(&quot;timestamp&quot;, event.getTimeMillis());\n\n        // SERIALIZE\n        byte[] data;\n        KafkaAvroSerializer kafkaAvroSerializer = new KafkaAvroSerializer(client);\n        data = kafkaAvroSerializer.serialize(&quot;service_logs&quot;, schemaBuilder.build());\n\n        return data;\n    }\n\n    @Override\n    public byte[] toSerializable(LogEvent event) {\n        return toByteArray(event);\n    }\n\n    @Override\n    public String getContentType() {\n        return null;\n    }\n\n    @PluginFactory\n    public static Layout&lt;?&gt; createLayout() {\n        return new ServiceLogLayout();\n    }\n\n    private static class PrivateObjectOutputStream extends ObjectOutputStream {\n\n        public PrivateObjectOutputStream(final OutputStream os) throws IOException {\n            super(os);\n        }\n\n        @Override\n        protected void writeStreamHeader() {\n            // do nothing\n        }\n    }\n\n}\n</code></pre>\n<p>It is worth noting that using logstash might be a good solution to this as well</p>\n"}],"owner":{"account_id":14191133,"reputation":222,"user_id":10251749,"display_name":"beanwa"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":485,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":71057325,"answer_count":1,"score":0,"last_activity_date":1644444108,"creation_date":1644254421,"question_id":71022670,"body_markdown":"I am working on a system that sends all logs for all microservices to a single topic apache kafka. Most services are in python but we are now forwarding logs from a Streams app. All other services use the same Schema defined in avro and managed by confluent&#39;s Schema Registry. I can get data posting to kafka fine as a string but cannot figure out how to upload a valid avro object linked to a schema registry schema. I am currently attempting to do this via a custom log4j plugin. For testing purposes I am writing these logs to their own topic and reading them out using `kcat -b localhost:9092 -s value=avro -r localhost:8081 -t new_logs -f &#39;key: %k value: %s Partition: %p\\n\\n&#39;`, but I get \r\n\r\n`ERROR: Failed to format message in new_logs [0] at offset 0: Avro/Schema-registry message deserialization: Invalid CP1 magic byte 115, expected 0: message not produced with Schema-Registry Avro framing: terminating`\r\n\r\nwhen doing this (that kcat command does work for my actual service logs topic and all other topics that use valid avro). Originally I tried using the [org.apache.avro.generic.GenericData.Record][1] class but could not figure out how to make it work in the methods `toSerializable` and `toByteArray` required by the AbstractLayout Interface since that class does not implement the serializable class. Below is the Plugin, class definition, log4j config\r\n\r\n**ServiceLogLayout.java**\r\n```\r\n@Plugin(name=&quot;ServiceLogLayout&quot;, category= Node.CATEGORY, elementType = Layout.ELEMENT_TYPE, printObject = true)\r\npublic class ServiceLogLayout extends AbstractLayout&lt;byte[]&gt; {\r\n    Schema record;\r\n    DatumWriter&lt;GenericData.Record&gt; serviceLogDatumWriter;\r\n\r\n    public ServiceLogLayout() {\r\n        // maybe set these for avro\r\n        super(null, null, null);\r\n        Schema timestampMilliType = LogicalTypes.timestampMillis().addToSchema(Schema.create(Schema.Type.LONG));\r\n\r\n        // CREATE SCHEMA\r\n        Schema.Field service = new Schema.Field(&quot;service&quot;, SchemaBuilder.builder().stringType(), &quot;Name of service sending this message&quot;);\r\n        Schema.Field environment = new Schema.Field(&quot;environment&quot;, SchemaBuilder.builder().enumeration(&quot;environment_type&quot;).symbols(&quot;local&quot;, &quot;dev&quot;, &quot;staging&quot;, &quot;prod&quot;, &quot;shared_services&quot;, &quot;testing&quot;, &quot;security&quot;));\r\n        Schema.Field level = new Schema.Field(&quot;level&quot;, SchemaBuilder.builder().enumeration(&quot;level_type&quot;).symbols(&quot;debug&quot;, &quot;info&quot;, &quot;notice&quot;, &quot;warning&quot;, &quot;error&quot;, &quot;critical&quot;, &quot;alert&quot;, &quot;emergency&quot;), &quot;logging level&quot;);\r\n        Schema.Field msg = new Schema.Field(&quot;msg&quot;, SchemaBuilder.builder().stringType(), &quot;Required log message&quot;);\r\n\r\n        List&lt;Schema.Field&gt; fields = new ArrayList&lt;&gt;();\r\n        fields.add(service);\r\n        fields.add(environment);\r\n        fields.add(level);\r\n        fields.add(msg);\r\n        this.record = Schema.createRecord(&quot;service_logs&quot;, &quot;&quot;, &quot;com.test.avro&quot;, false, fields);\r\n        this.serviceLogDatumWriter = new GenericDatumWriter&lt;&gt;(this.record);\r\n    }\r\n\r\n    @Override\r\n    public byte[] toByteArray(LogEvent event) {\r\n        LOGGER.warn(&quot;toByteArray&quot;);\r\n\r\n        String env = System.getenv(&quot;ENVIRONMENT&quot;) != null ? System.getenv(&quot;ENVIRONMENT&quot;).toLowerCase() : &quot;local&quot;;\r\n        // FILL IN RECORD\r\n        GenericRecordBuilder schemaBuilder = new GenericRecordBuilder(this.record);\r\n        schemaBuilder.set(&quot;service&quot;, &quot;testService&quot;);\r\n        schemaBuilder.set(&quot;environment&quot;, new GenericData.EnumSymbol(this.record.getField(&quot;environment&quot;).schema(), env));\r\n        schemaBuilder.set(&quot;level&quot;, new GenericData.EnumSymbol(this.record.getField(&quot;level&quot;).schema(), event.getLevel().name().toLowerCase()));\r\n        schemaBuilder.set(&quot;msg&quot;, event.getMessage().getFormattedMessage());\r\n        \r\n        // SERIALIZE\r\n        byte[] data = new byte[0];\r\n        ByteArrayOutputStream stream = new ByteArrayOutputStream();\r\n        Encoder jsonEncoder = null;\r\n        try {\r\n            jsonEncoder = EncoderFactory.get().jsonEncoder(\r\n                    this.record, stream);\r\n            this.serviceLogDatumWriter.write(schemaBuilder.build(), jsonEncoder);\r\n            jsonEncoder.flush();\r\n            data = stream.toByteArray();\r\n        } catch (IOException e) {\r\n            LOGGER.error(&quot;Serialization error:&quot; + e.getMessage());\r\n        }\r\n        return data;\r\n    }\r\n\r\n    @Override\r\n    public byte[] toSerializable(LogEvent event) {\r\n        return toByteArray(event);\r\n    }\r\n\r\n    @Override\r\n    public String getContentType() {\r\n        return null;\r\n    }\r\n\r\n    @PluginFactory\r\n    public static Layout&lt;?&gt; createLayout() {\r\n        return new ServiceLogLayout();\r\n    }\r\n\r\n    private static class PrivateObjectOutputStream extends ObjectOutputStream {\r\n\r\n        public PrivateObjectOutputStream(final OutputStream os) throws IOException {\r\n            super(os);\r\n        }\r\n\r\n        @Override\r\n        protected void writeStreamHeader() {\r\n            // do nothing\r\n        }\r\n    }\r\n\r\n}\r\n```\r\n\r\n**log4j2.xml**\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;Configuration status=&quot;WARN&quot; packages=&quot;logging.log4j.custom.plugins&quot;&gt;\r\n    &lt;Appenders&gt;\r\n        &lt;Console name=&quot;Console&quot; target=&quot;SYSTEM_OUT&quot;&gt;\r\n            &lt;ServiceLogLayout /&gt;\r\n\r\n        &lt;/Console&gt;\r\n        &lt;Kafka name=&quot;Kafka&quot; topic=&quot;new_logs&quot;&gt;\r\n            &lt;ServiceLogLayout /&gt;\r\n            &lt;Property name=&quot;bootstrap.servers&quot;&gt;${env:BOOTSTRAP_SERVERS}&lt;/Property&gt;\r\n        &lt;/Kafka&gt;\r\n    &lt;/Appenders&gt;\r\n    &lt;Loggers&gt;\r\n        &lt;Root level=&quot;INFO&quot;&gt;\r\n            &lt;AppenderRef ref=&quot;Console&quot;/&gt;\r\n            &lt;AppenderRef ref=&quot;Kafka&quot;/&gt;\r\n        &lt;/Root&gt;\r\n        &lt;Logger name=&quot;org.apache.kafka&quot; level=&quot;WARN&quot;/&gt;\r\n    &lt;/Loggers&gt;\r\n&lt;/Configuration&gt;\r\n```\r\n\r\n\r\n\r\n  [1]: https://avro.apache.org/docs/1.8.2/api/java/org/apache/avro/generic/GenericData.Record.html","title":"How to transform a log4j message to fit an avro schema and post to kafka","body":"<p>I am working on a system that sends all logs for all microservices to a single topic apache kafka. Most services are in python but we are now forwarding logs from a Streams app. All other services use the same Schema defined in avro and managed by confluent's Schema Registry. I can get data posting to kafka fine as a string but cannot figure out how to upload a valid avro object linked to a schema registry schema. I am currently attempting to do this via a custom log4j plugin. For testing purposes I am writing these logs to their own topic and reading them out using <code>kcat -b localhost:9092 -s value=avro -r localhost:8081 -t new_logs -f 'key: %k value: %s Partition: %p\\n\\n'</code>, but I get</p>\n<p><code>ERROR: Failed to format message in new_logs [0] at offset 0: Avro/Schema-registry message deserialization: Invalid CP1 magic byte 115, expected 0: message not produced with Schema-Registry Avro framing: terminating</code></p>\n<p>when doing this (that kcat command does work for my actual service logs topic and all other topics that use valid avro). Originally I tried using the <a href=\"https://avro.apache.org/docs/1.8.2/api/java/org/apache/avro/generic/GenericData.Record.html\" rel=\"nofollow noreferrer\">org.apache.avro.generic.GenericData.Record</a> class but could not figure out how to make it work in the methods <code>toSerializable</code> and <code>toByteArray</code> required by the AbstractLayout Interface since that class does not implement the serializable class. Below is the Plugin, class definition, log4j config</p>\n<p><strong>ServiceLogLayout.java</strong></p>\n<pre><code>@Plugin(name=&quot;ServiceLogLayout&quot;, category= Node.CATEGORY, elementType = Layout.ELEMENT_TYPE, printObject = true)\npublic class ServiceLogLayout extends AbstractLayout&lt;byte[]&gt; {\n    Schema record;\n    DatumWriter&lt;GenericData.Record&gt; serviceLogDatumWriter;\n\n    public ServiceLogLayout() {\n        // maybe set these for avro\n        super(null, null, null);\n        Schema timestampMilliType = LogicalTypes.timestampMillis().addToSchema(Schema.create(Schema.Type.LONG));\n\n        // CREATE SCHEMA\n        Schema.Field service = new Schema.Field(&quot;service&quot;, SchemaBuilder.builder().stringType(), &quot;Name of service sending this message&quot;);\n        Schema.Field environment = new Schema.Field(&quot;environment&quot;, SchemaBuilder.builder().enumeration(&quot;environment_type&quot;).symbols(&quot;local&quot;, &quot;dev&quot;, &quot;staging&quot;, &quot;prod&quot;, &quot;shared_services&quot;, &quot;testing&quot;, &quot;security&quot;));\n        Schema.Field level = new Schema.Field(&quot;level&quot;, SchemaBuilder.builder().enumeration(&quot;level_type&quot;).symbols(&quot;debug&quot;, &quot;info&quot;, &quot;notice&quot;, &quot;warning&quot;, &quot;error&quot;, &quot;critical&quot;, &quot;alert&quot;, &quot;emergency&quot;), &quot;logging level&quot;);\n        Schema.Field msg = new Schema.Field(&quot;msg&quot;, SchemaBuilder.builder().stringType(), &quot;Required log message&quot;);\n\n        List&lt;Schema.Field&gt; fields = new ArrayList&lt;&gt;();\n        fields.add(service);\n        fields.add(environment);\n        fields.add(level);\n        fields.add(msg);\n        this.record = Schema.createRecord(&quot;service_logs&quot;, &quot;&quot;, &quot;com.test.avro&quot;, false, fields);\n        this.serviceLogDatumWriter = new GenericDatumWriter&lt;&gt;(this.record);\n    }\n\n    @Override\n    public byte[] toByteArray(LogEvent event) {\n        LOGGER.warn(&quot;toByteArray&quot;);\n\n        String env = System.getenv(&quot;ENVIRONMENT&quot;) != null ? System.getenv(&quot;ENVIRONMENT&quot;).toLowerCase() : &quot;local&quot;;\n        // FILL IN RECORD\n        GenericRecordBuilder schemaBuilder = new GenericRecordBuilder(this.record);\n        schemaBuilder.set(&quot;service&quot;, &quot;testService&quot;);\n        schemaBuilder.set(&quot;environment&quot;, new GenericData.EnumSymbol(this.record.getField(&quot;environment&quot;).schema(), env));\n        schemaBuilder.set(&quot;level&quot;, new GenericData.EnumSymbol(this.record.getField(&quot;level&quot;).schema(), event.getLevel().name().toLowerCase()));\n        schemaBuilder.set(&quot;msg&quot;, event.getMessage().getFormattedMessage());\n        \n        // SERIALIZE\n        byte[] data = new byte[0];\n        ByteArrayOutputStream stream = new ByteArrayOutputStream();\n        Encoder jsonEncoder = null;\n        try {\n            jsonEncoder = EncoderFactory.get().jsonEncoder(\n                    this.record, stream);\n            this.serviceLogDatumWriter.write(schemaBuilder.build(), jsonEncoder);\n            jsonEncoder.flush();\n            data = stream.toByteArray();\n        } catch (IOException e) {\n            LOGGER.error(&quot;Serialization error:&quot; + e.getMessage());\n        }\n        return data;\n    }\n\n    @Override\n    public byte[] toSerializable(LogEvent event) {\n        return toByteArray(event);\n    }\n\n    @Override\n    public String getContentType() {\n        return null;\n    }\n\n    @PluginFactory\n    public static Layout&lt;?&gt; createLayout() {\n        return new ServiceLogLayout();\n    }\n\n    private static class PrivateObjectOutputStream extends ObjectOutputStream {\n\n        public PrivateObjectOutputStream(final OutputStream os) throws IOException {\n            super(os);\n        }\n\n        @Override\n        protected void writeStreamHeader() {\n            // do nothing\n        }\n    }\n\n}\n</code></pre>\n<p><strong>log4j2.xml</strong></p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;Configuration status=&quot;WARN&quot; packages=&quot;logging.log4j.custom.plugins&quot;&gt;\n    &lt;Appenders&gt;\n        &lt;Console name=&quot;Console&quot; target=&quot;SYSTEM_OUT&quot;&gt;\n            &lt;ServiceLogLayout /&gt;\n\n        &lt;/Console&gt;\n        &lt;Kafka name=&quot;Kafka&quot; topic=&quot;new_logs&quot;&gt;\n            &lt;ServiceLogLayout /&gt;\n            &lt;Property name=&quot;bootstrap.servers&quot;&gt;${env:BOOTSTRAP_SERVERS}&lt;/Property&gt;\n        &lt;/Kafka&gt;\n    &lt;/Appenders&gt;\n    &lt;Loggers&gt;\n        &lt;Root level=&quot;INFO&quot;&gt;\n            &lt;AppenderRef ref=&quot;Console&quot;/&gt;\n            &lt;AppenderRef ref=&quot;Kafka&quot;/&gt;\n        &lt;/Root&gt;\n        &lt;Logger name=&quot;org.apache.kafka&quot; level=&quot;WARN&quot;/&gt;\n    &lt;/Loggers&gt;\n&lt;/Configuration&gt;\n</code></pre>\n"},{"tags":["java","postgresql","google-cloud-sql","hikaricp","cloud-sql-proxy"],"comments":[{"owner":{"account_id":19092422,"reputation":51311,"user_id":13942448,"display_name":"jccampanero"},"score":0,"creation_date":1644529380,"post_id":70932562,"comment_id":125638283,"body_markdown":"Please, consider review [this GCP documentation](https://cloud.google.com/sql/docs/postgres/add-manage-iam-users), especially the section labeled [Troubleshoot a login failure](https://cloud.google.com/sql/docs/postgres/add-manage-iam-users#troubleshooting-a-login-failure), and check the [Postgres logs](https://cloud.google.com/sql/docs/postgres/logging), they may show details about the error that could be of help. I hope it helps.","body":"Please, consider review <a href=\"https://cloud.google.com/sql/docs/postgres/add-manage-iam-users\" rel=\"nofollow noreferrer\">this GCP documentation</a>, especially the section labeled <a href=\"https://cloud.google.com/sql/docs/postgres/add-manage-iam-users#troubleshooting-a-login-failure\" rel=\"nofollow noreferrer\">Troubleshoot a login failure</a>, and check the <a href=\"https://cloud.google.com/sql/docs/postgres/logging\" rel=\"nofollow noreferrer\">Postgres logs</a>, they may show details about the error that could be of help. I hope it helps."}],"answers":[{"tags":[],"owner":{"account_id":888738,"reputation":1531,"user_id":927514,"display_name":"enocom"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1643731974,"creation_date":1643731974,"answer_id":70943799,"question_id":70932562,"body_markdown":"Answering this here in addition to the issue.\r\n\r\nThe dev artifact is a typo in the README. 1.4.2 is the latest public artifact.\r\n\r\nAlso, your user name should be `XXXXXX-compute@developer` (leaving off the `gserviceaccount.com`).","title":"Authentication failure for Iam Authentication on Postgres Cloud SQL through jdbc Hikari","body":"<p>Answering this here in addition to the issue.</p>\n<p>The dev artifact is a typo in the README. 1.4.2 is the latest public artifact.</p>\n<p>Also, your user name should be <code>XXXXXX-compute@developer</code> (leaving off the <code>gserviceaccount.com</code>).</p>\n"}],"owner":{"account_id":2796434,"reputation":901,"user_id":2405589,"accept_rate":50,"display_name":"user2405589"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1760,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1644444084,"creation_date":1643661701,"question_id":70932562,"body_markdown":"I am trying to connect to a Postgres Cloud SQL instance using JDBC SocketFactory per the documentation here : https://github.com/GoogleCloudPlatform/cloud-sql-jdbc-socket-factory/blob/main/docs/jdbc-postgres.md\r\n\r\n    HikariDataSource pool = null;\r\n    HikariConfig config = new HikariConfig();\r\n\r\n    //String jdbcURL = String.format(&quot;jdbc:postgresql:///%s&quot;, DBNAME);\r\n    String jdbcURL = String.format(&quot;jdbc:postgresql:///%s?cloudSqlInstance=%s&amp;socketFactory=com.google.cloud.sql.postgres.SocketFactory&amp;user=%s&amp;password=%s&amp;enableIamAuth=true&amp;sslmode=disable&quot;,DBNAME,CLOUDSQLINSTANCE,USER,PASSWORD);\r\n    Properties connProps = new Properties();\r\n    connProps.setProperty(&quot;user&quot;, USER);\r\n    connProps.setProperty(&quot;password&quot;, PASSWORD);\r\n    connProps.setProperty(&quot;sslmode&quot;, SSLMODE);\r\n    connProps.setProperty(&quot;socketFactory&quot;, SOCKETFACTORY);\r\n    connProps.setProperty(&quot;cloudSqlInstance&quot;, CLOUDSQLINSTANCE);\r\n    connProps.setProperty(&quot;enableIamAuth&quot;, ENABLEIAMAUTH);\r\n    connProps.setProperty(&quot;ipTypes&quot;,&quot;PRIVATE&quot;);\r\n    System.out.println(&quot;jdbcurl: &quot; + jdbcURL);\r\n    config.setJdbcUrl(jdbcURL);\r\n    config.setDataSourceProperties(connProps);\r\n    config.setConnectionTimeout(10000); // 10s\r\n    try {\r\n         pool = new HikariDataSource(config);\r\n    }\r\n    catch (Exception e){\r\n        System.out.println(e.getMessage() + e.getMessage() );\r\n        e.printStackTrace();\r\n    }\r\n\r\nThe error I get is:\r\n\r\n&gt; com.zaxxer.hikari.pool.HikariPool$PoolInitializationException: Failed\r\n&gt; to initialize pool: FATAL: password authentication failed for user\r\n&gt; &quot;XXXXXX-compute@developer.gserviceaccount.com&quot; \tat\r\n&gt; com.zaxxer.hikari.pool.HikariPool.throwPoolInitializationException(HikariPool.java:596)\r\n&gt; \tat\r\n&gt; com.zaxxer.hikari.pool.HikariPool.checkFailFast(HikariPool.java:582)\r\n&gt; \tat com.zaxxer.hikari.pool.HikariPool.&lt;init&gt;(HikariPool.java:100) \tat\r\n&gt; com.zaxxer.hikari.HikariDataSource.&lt;init&gt;(HikariDataSource.java:81)\r\n&gt; \tat\r\n&gt; com.aexp.ngbd.mdm.util.ConnectionUtil.createConnectionPool(ConnectionUtil.java:49)\r\n&gt; \tat\r\n&gt; com.aexp.ngbd.mdm.avro.AvroToSQLInsert.createSQLFile(AvroToSQLInsert.java:84)\r\n&gt; \tat\r\n&gt; com.aexp.ngbd.mdm.avro.ReadFromPubSub.lambda$subscribeWithAvroSchemaExample$0(ReadFromPubSub.java:48)\r\n&gt; \tat\r\n&gt; com.google.cloud.pubsub.v1.MessageDispatcher$4.run(MessageDispatcher.java:396)\r\n&gt; \tat\r\n&gt; java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:515)\r\n&gt; \tat java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)\r\n&gt; \tat\r\n&gt; java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:304)\r\n&gt; \tat\r\n&gt; java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)\r\n&gt; \tat\r\n&gt; java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)\r\n&gt; \tat java.base/java.lang.Thread.run(Thread.java:829) Caused by:\r\n&gt; org.postgresql.util.PSQLException: FATAL: password authentication\r\n&gt; failed for user &quot;XXXXXXXX-compute@developer.gserviceaccount.com&quot;\r\n&gt; \tat\r\n&gt; org.postgresql.core.v3.ConnectionFactoryImpl.doAuthentication(ConnectionFactoryImpl.java:623)\r\n&gt; \tat\r\n&gt; org.postgresql.core.v3.ConnectionFactoryImpl.tryConnect(ConnectionFactoryImpl.java:163)\r\n&gt; \tat\r\n&gt; org.postgresql.core.v3.ConnectionFactoryImpl.openConnectionImpl(ConnectionFactoryImpl.java:215)\r\n&gt; \tat\r\n&gt; org.postgresql.core.ConnectionFactory.openConnection(ConnectionFactory.java:51)\r\n&gt; \tat org.postgresql.jdbc.PgConnection.&lt;init&gt;(PgConnection.java:225) \tat\r\n&gt; org.postgresql.Driver.makeConnection(Driver.java:466) \tat\r\n&gt; org.postgresql.Driver.connect(Driver.java:265) \tat\r\n&gt; com.zaxxer.hikari.util.DriverDataSource.getConnection(DriverDataSource.java:121)\r\n&gt; \tat com.zaxxer.hikari.pool.PoolBase.newConnection(PoolBase.java:359)\r\n&gt; \tat com.zaxxer.hikari.pool.PoolBase.newPoolEntry(PoolBase.java:201)\r\n&gt; \tat\r\n&gt; com.zaxxer.hikari.pool.HikariPool.createPoolEntry(HikariPool.java:470)\r\n&gt; \tat\r\n&gt; com.zaxxer.hikari.pool.HikariPool.checkFailFast(HikariPool.java:561)\r\n&gt; \t... 12 more\r\n\r\n\r\n\r\n\r\nI am running the jar on a compute engine. I am able to use psql to connect to the PostgreSQL instance using the same ServiceAccount which has been enabled for IAM authentication. I am connecting through the cloud SQL auth proxy below:\r\n\r\n&gt;     satish@XXXX-load:~$ psql &quot;host=127.0.0.1 sslmode=disable dbname=mdm user=XXXXXXX-compute@developer port=1234&quot;\r\n&gt;     psql (11.14 (Debian 11.14-0+deb10u1), server 13.4)\r\n&gt;     WARNING: psql major version 11, server major version 13.\r\n&gt;              Some psql features might not work.\r\n&gt;     Type &quot;help&quot; for help.\r\n&gt;     \r\n&gt;     mdm=&gt; \\dt\r\n\r\n\r\nMy question is, how can I connect to the Postgres instance using only the ServiceAccount in Java?  \r\n\r\nBelow is my pom.xml dependencies:\r\n\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;com.google.cloud.sql&lt;/groupId&gt;\r\n        &lt;artifactId&gt;postgres-socket-factory&lt;/artifactId&gt;\r\n        &lt;version&gt;1.4.2&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;org.postgresql&lt;/groupId&gt;\r\n        &lt;artifactId&gt;postgresql&lt;/artifactId&gt;\r\n        &lt;version&gt;42.3.1&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n\r\n`com.google.cloud.sql:postgres-socket-factory:1.4.2-dev` does not seem to be available in the maven central. Is this the problem? The latest version I was able to find is `1.4.2`\r\n\r\nEven if I use the `XXXXXXX-compute@developer` user, i still get the below error. \r\n\r\n\r\n&gt; Failed to initialize pool: FATAL: Cloud SQL IAM service account\r\n&gt; authentication failed for user &quot;470754621570-compute@developer&quot;Failed\r\n&gt; to initialize pool: FATAL: Cloud SQL IAM service account\r\n&gt; authentication failed for user &quot;470754621570-compute@developer&quot;\r\n&gt; com.zaxxer.hikari.pool.HikariPool$PoolInitializationException: Failed\r\n&gt; to initialize pool: FATAL: Cloud SQL IAM service account\r\n&gt; authentication failed for user &quot;470754621570-compute@developer&quot; \tat\r\n&gt; com.zaxxer.hikari.pool.HikariPool.throwPoolInitializationException(HikariPool.java:596)\r\n&gt; \tat\r\n&gt; com.zaxxer.hikari.pool.HikariPool.checkFailFast(HikariPool.java:582)\r\n&gt; \tat com.zaxxer.hikari.pool.HikariPool.&lt;init&gt;(HikariPool.java:100) \tat\r\n&gt; com.zaxxer.hikari.HikariDataSource.&lt;init&gt;(HikariDataSource.java:81)\r\n&gt; \tat\r\n&gt; com.aexp.ngbd.mdm.util.ConnectionUtil.createConnectionPool(ConnectionUtil.java:52)\r\n&gt; \tat\r\n&gt; com.aexp.ngbd.mdm.avro.AvroToSQLInsert.convertAvroToPostgres(AvroToSQLInsert.java:37)\r\n&gt; \tat\r\n&gt; com.aexp.ngbd.mdm.avro.AvroToSQLInsert.createSQLFile(AvroToSQLInsert.java:163)\r\n&gt; \tat\r\n&gt; com.aexp.ngbd.mdm.avro.ReadFromPubSub.lambda$subscribeWithAvroSchemaExample$0(ReadFromPubSub.java:51)\r\n&gt; \tat\r\n&gt; com.google.cloud.pubsub.v1.MessageDispatcher$4.run(MessageDispatcher.java:396)\r\n&gt; \tat\r\n&gt; java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:515)\r\n&gt; \tat java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)\r\n&gt; \tat\r\n&gt; java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:304)\r\n&gt; \tat\r\n&gt; java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)\r\n&gt; \tat\r\n&gt; java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)\r\n&gt; \tat java.base/java.lang.Thread.run(Thread.java:834) Caused by:\r\n&gt; org.postgresql.util.PSQLException: FATAL: Cloud SQL IAM service\r\n&gt; account authentication failed for user\r\n&gt; &quot;470754621570-compute@developer&quot; \tat\r\n&gt; org.postgresql.core.v3.ConnectionFactoryImpl.doAuthentication(ConnectionFactoryImpl.java:623)\r\n&gt; \tat\r\n&gt; org.postgresql.core.v3.ConnectionFactoryImpl.tryConnect(ConnectionFactoryImpl.java:163)\r\n&gt; \tat\r\n&gt; org.postgresql.core.v3.ConnectionFactoryImpl.openConnectionImpl(ConnectionFactoryImpl.java:215)\r\n&gt; \tat\r\n&gt; org.postgresql.core.ConnectionFactory.openConnection(ConnectionFactory.java:51)\r\n&gt; \tat org.postgresql.jdbc.PgConnection.&lt;init&gt;(PgConnection.java:225) \tat\r\n&gt; org.postgresql.Driver.makeConnection(Driver.java:466) \tat\r\n&gt; org.postgresql.Driver.connect(Driver.java:265) \tat\r\n&gt; com.zaxxer.hikari.util.DriverDataSource.getConnection(DriverDataSource.java:121)\r\n&gt; \tat com.zaxxer.hikari.pool.PoolBase.newConnection(PoolBase.java:359)\r\n&gt; \tat com.zaxxer.hikari.pool.PoolBase.newPoolEntry(PoolBase.java:201)\r\n&gt; \tat\r\n&gt; com.zaxxer.hikari.pool.HikariPool.createPoolEntry(HikariPool.java:470)\r\n&gt; \tat\r\n&gt; com.zaxxer.hikari.pool.HikariPool.checkFailFast(HikariPool.java:561)\r\n&gt; \t... 13 more\r\n\r\n","title":"Authentication failure for Iam Authentication on Postgres Cloud SQL through jdbc Hikari","body":"<p>I am trying to connect to a Postgres Cloud SQL instance using JDBC SocketFactory per the documentation here : <a href=\"https://github.com/GoogleCloudPlatform/cloud-sql-jdbc-socket-factory/blob/main/docs/jdbc-postgres.md\" rel=\"nofollow noreferrer\">https://github.com/GoogleCloudPlatform/cloud-sql-jdbc-socket-factory/blob/main/docs/jdbc-postgres.md</a></p>\n<pre><code>HikariDataSource pool = null;\nHikariConfig config = new HikariConfig();\n\n//String jdbcURL = String.format(&quot;jdbc:postgresql:///%s&quot;, DBNAME);\nString jdbcURL = String.format(&quot;jdbc:postgresql:///%s?cloudSqlInstance=%s&amp;socketFactory=com.google.cloud.sql.postgres.SocketFactory&amp;user=%s&amp;password=%s&amp;enableIamAuth=true&amp;sslmode=disable&quot;,DBNAME,CLOUDSQLINSTANCE,USER,PASSWORD);\nProperties connProps = new Properties();\nconnProps.setProperty(&quot;user&quot;, USER);\nconnProps.setProperty(&quot;password&quot;, PASSWORD);\nconnProps.setProperty(&quot;sslmode&quot;, SSLMODE);\nconnProps.setProperty(&quot;socketFactory&quot;, SOCKETFACTORY);\nconnProps.setProperty(&quot;cloudSqlInstance&quot;, CLOUDSQLINSTANCE);\nconnProps.setProperty(&quot;enableIamAuth&quot;, ENABLEIAMAUTH);\nconnProps.setProperty(&quot;ipTypes&quot;,&quot;PRIVATE&quot;);\nSystem.out.println(&quot;jdbcurl: &quot; + jdbcURL);\nconfig.setJdbcUrl(jdbcURL);\nconfig.setDataSourceProperties(connProps);\nconfig.setConnectionTimeout(10000); // 10s\ntry {\n     pool = new HikariDataSource(config);\n}\ncatch (Exception e){\n    System.out.println(e.getMessage() + e.getMessage() );\n    e.printStackTrace();\n}\n</code></pre>\n<p>The error I get is:</p>\n<blockquote>\n<p>com.zaxxer.hikari.pool.HikariPool$PoolInitializationException: Failed\nto initialize pool: FATAL: password authentication failed for user\n&quot;XXXXXX-compute@developer.gserviceaccount.com&quot;    at\ncom.zaxxer.hikari.pool.HikariPool.throwPoolInitializationException(HikariPool.java:596)\nat\ncom.zaxxer.hikari.pool.HikariPool.checkFailFast(HikariPool.java:582)\nat com.zaxxer.hikari.pool.HikariPool.(HikariPool.java:100)    at\ncom.zaxxer.hikari.HikariDataSource.(HikariDataSource.java:81)\nat\ncom.aexp.ngbd.mdm.util.ConnectionUtil.createConnectionPool(ConnectionUtil.java:49)\nat\ncom.aexp.ngbd.mdm.avro.AvroToSQLInsert.createSQLFile(AvroToSQLInsert.java:84)\nat\ncom.aexp.ngbd.mdm.avro.ReadFromPubSub.lambda$subscribeWithAvroSchemaExample$0(ReadFromPubSub.java:48)\nat\ncom.google.cloud.pubsub.v1.MessageDispatcher$4.run(MessageDispatcher.java:396)\nat\njava.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:515)\nat java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)\nat\njava.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:304)\nat\njava.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)\nat\njava.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)\nat java.base/java.lang.Thread.run(Thread.java:829) Caused by:\norg.postgresql.util.PSQLException: FATAL: password authentication\nfailed for user &quot;XXXXXXXX-compute@developer.gserviceaccount.com&quot;\nat\norg.postgresql.core.v3.ConnectionFactoryImpl.doAuthentication(ConnectionFactoryImpl.java:623)\nat\norg.postgresql.core.v3.ConnectionFactoryImpl.tryConnect(ConnectionFactoryImpl.java:163)\nat\norg.postgresql.core.v3.ConnectionFactoryImpl.openConnectionImpl(ConnectionFactoryImpl.java:215)\nat\norg.postgresql.core.ConnectionFactory.openConnection(ConnectionFactory.java:51)\nat org.postgresql.jdbc.PgConnection.(PgConnection.java:225)   at\norg.postgresql.Driver.makeConnection(Driver.java:466)     at\norg.postgresql.Driver.connect(Driver.java:265)    at\ncom.zaxxer.hikari.util.DriverDataSource.getConnection(DriverDataSource.java:121)\nat com.zaxxer.hikari.pool.PoolBase.newConnection(PoolBase.java:359)\nat com.zaxxer.hikari.pool.PoolBase.newPoolEntry(PoolBase.java:201)\nat\ncom.zaxxer.hikari.pool.HikariPool.createPoolEntry(HikariPool.java:470)\nat\ncom.zaxxer.hikari.pool.HikariPool.checkFailFast(HikariPool.java:561)\n... 12 more</p>\n</blockquote>\n<p>I am running the jar on a compute engine. I am able to use psql to connect to the PostgreSQL instance using the same ServiceAccount which has been enabled for IAM authentication. I am connecting through the cloud SQL auth proxy below:</p>\n<blockquote>\n<pre><code>satish@XXXX-load:~$ psql &quot;host=127.0.0.1 sslmode=disable dbname=mdm user=XXXXXXX-compute@developer port=1234&quot;\npsql (11.14 (Debian 11.14-0+deb10u1), server 13.4)\nWARNING: psql major version 11, server major version 13.\n         Some psql features might not work.\nType &quot;help&quot; for help.\n\nmdm=&gt; \\dt\n</code></pre>\n</blockquote>\n<p>My question is, how can I connect to the Postgres instance using only the ServiceAccount in Java?</p>\n<p>Below is my pom.xml dependencies:</p>\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;com.google.cloud.sql&lt;/groupId&gt;\n    &lt;artifactId&gt;postgres-socket-factory&lt;/artifactId&gt;\n    &lt;version&gt;1.4.2&lt;/version&gt;\n&lt;/dependency&gt;\n&lt;dependency&gt;\n    &lt;groupId&gt;org.postgresql&lt;/groupId&gt;\n    &lt;artifactId&gt;postgresql&lt;/artifactId&gt;\n    &lt;version&gt;42.3.1&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p><code>com.google.cloud.sql:postgres-socket-factory:1.4.2-dev</code> does not seem to be available in the maven central. Is this the problem? The latest version I was able to find is <code>1.4.2</code></p>\n<p>Even if I use the <code>XXXXXXX-compute@developer</code> user, i still get the below error.</p>\n<blockquote>\n<p>Failed to initialize pool: FATAL: Cloud SQL IAM service account\nauthentication failed for user &quot;470754621570-compute@developer&quot;Failed\nto initialize pool: FATAL: Cloud SQL IAM service account\nauthentication failed for user &quot;470754621570-compute@developer&quot;\ncom.zaxxer.hikari.pool.HikariPool$PoolInitializationException: Failed\nto initialize pool: FATAL: Cloud SQL IAM service account\nauthentication failed for user &quot;470754621570-compute@developer&quot;   at\ncom.zaxxer.hikari.pool.HikariPool.throwPoolInitializationException(HikariPool.java:596)\nat\ncom.zaxxer.hikari.pool.HikariPool.checkFailFast(HikariPool.java:582)\nat com.zaxxer.hikari.pool.HikariPool.(HikariPool.java:100)    at\ncom.zaxxer.hikari.HikariDataSource.(HikariDataSource.java:81)\nat\ncom.aexp.ngbd.mdm.util.ConnectionUtil.createConnectionPool(ConnectionUtil.java:52)\nat\ncom.aexp.ngbd.mdm.avro.AvroToSQLInsert.convertAvroToPostgres(AvroToSQLInsert.java:37)\nat\ncom.aexp.ngbd.mdm.avro.AvroToSQLInsert.createSQLFile(AvroToSQLInsert.java:163)\nat\ncom.aexp.ngbd.mdm.avro.ReadFromPubSub.lambda$subscribeWithAvroSchemaExample$0(ReadFromPubSub.java:51)\nat\ncom.google.cloud.pubsub.v1.MessageDispatcher$4.run(MessageDispatcher.java:396)\nat\njava.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:515)\nat java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)\nat\njava.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:304)\nat\njava.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)\nat\njava.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)\nat java.base/java.lang.Thread.run(Thread.java:834) Caused by:\norg.postgresql.util.PSQLException: FATAL: Cloud SQL IAM service\naccount authentication failed for user\n&quot;470754621570-compute@developer&quot;  at\norg.postgresql.core.v3.ConnectionFactoryImpl.doAuthentication(ConnectionFactoryImpl.java:623)\nat\norg.postgresql.core.v3.ConnectionFactoryImpl.tryConnect(ConnectionFactoryImpl.java:163)\nat\norg.postgresql.core.v3.ConnectionFactoryImpl.openConnectionImpl(ConnectionFactoryImpl.java:215)\nat\norg.postgresql.core.ConnectionFactory.openConnection(ConnectionFactory.java:51)\nat org.postgresql.jdbc.PgConnection.(PgConnection.java:225)   at\norg.postgresql.Driver.makeConnection(Driver.java:466)     at\norg.postgresql.Driver.connect(Driver.java:265)    at\ncom.zaxxer.hikari.util.DriverDataSource.getConnection(DriverDataSource.java:121)\nat com.zaxxer.hikari.pool.PoolBase.newConnection(PoolBase.java:359)\nat com.zaxxer.hikari.pool.PoolBase.newPoolEntry(PoolBase.java:201)\nat\ncom.zaxxer.hikari.pool.HikariPool.createPoolEntry(HikariPool.java:470)\nat\ncom.zaxxer.hikari.pool.HikariPool.checkFailFast(HikariPool.java:561)\n... 13 more</p>\n</blockquote>\n"},{"tags":["java","hibernate","jpa"],"comments":[{"owner":{"account_id":6484184,"reputation":2035,"user_id":5020294,"display_name":"Andriy Slobodyanyk"},"score":1,"creation_date":1644489824,"post_id":71057086,"comment_id":125622878,"body_markdown":"I&#39;ve recently answered the similar question, please have a look https://stackoverflow.com/questions/70184043/how-to-create-relationships-in-entities-correctly/70184988#70184988","body":"I&#39;ve recently answered the similar question, please have a look <a href=\"https://stackoverflow.com/questions/70184043/how-to-create-relationships-in-entities-correctly/70184988#70184988\" title=\"how to create relationships in entities correctly\">stackoverflow.com/questions/70184043/&hellip;</a>"},{"owner":{"account_id":3299361,"reputation":57,"user_id":3881582,"accept_rate":62,"display_name":"Ceriana"},"score":0,"creation_date":1644509563,"post_id":71057086,"comment_id":125631156,"body_markdown":"Thank you, this works pretty good.","body":"Thank you, this works pretty good."}],"answers":[{"tags":[],"owner":{"account_id":12272729,"reputation":51,"user_id":9021108,"display_name":"maik"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1644444069,"creation_date":1644444069,"answer_id":71057319,"question_id":71057086,"body_markdown":"Personally, always I create the foreign keys directly in the database with the CASCADE option. Not be if it is a valid option for you.","title":"Hibernate: CascadeType on ManyToMany relation with extra column","body":"<p>Personally, always I create the foreign keys directly in the database with the CASCADE option. Not be if it is a valid option for you.</p>\n"}],"owner":{"account_id":3299361,"reputation":57,"user_id":3881582,"accept_rate":62,"display_name":"Ceriana"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":238,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1644444069,"creation_date":1644442796,"question_id":71057086,"body_markdown":"So I got two entities, `Student` and `Course`. One `Student` can have many `Course` and one `Course` can have many `Student`. Normally, I would have Hibernate generate a jointable like this:\r\n\r\n```java\r\n@ManyToMany\r\n@JoinTable(\r\n\t\t\tname=&quot;studentCourseJoinTable&quot;, \r\n\t\t\tjoinColumns= {\r\n\t\t\t\t\t@JoinColumn(\r\n\t\t\t\t\t\t\tname=&quot;studentId&quot;, \r\n\t\t\t\t\t\t\treferencedColumnName=&quot;studentId&quot;\r\n\t\t\t\t\t\t\t) }, \r\n\t\t\tinverseJoinColumns= {\r\n\t\t\t\t\t@JoinColumn(\r\n\t\t\t\t\t\t\tname=&quot;courseId&quot;, \r\n\t\t\t\t\t\t\treferencedColumnName=&quot;courseId&quot;)\r\n\t\t\t\t\t}\r\n\t\t\t)\r\nprivate List&lt;Course&gt; courses = new ArrayList&lt;Course&gt;();\r\n```\r\nProblem is, that I need to store the *grade* of the student in this course. For the sake of simplicity, lets say it is just a normal integer value. Without Hibernate, I&#39;d build a simple jointable with a extra column for the grade value, something like this:\r\n```\r\n+-----------+----------+-------+\r\n| studentId | courseId | grade |\r\n+-----------+----------+-------+\r\n|         1 |        1 |     1 |\r\n|         1 |        2 |     2 |\r\n|         2 |        1 |     5 |\r\n|         2 |        3 |     6 |\r\n+-----------+----------+-------+\r\n```\r\n\r\nSo I followed [this guide in the JPA Wikibook](https://en.wikibooks.org/wiki/Java_Persistence/ManyToMany#Mapping_a_Join_Table_with_Additional_Columns) and set it up like this:\r\n\r\n```java\r\n@Entity\r\npublic class Student implements Serializable\r\n{\r\n    ...\r\n\t@OneToMany(mappedBy=&quot;student&quot;)\r\n\tprivate List&lt;StudentCourse&gt; courses = new ArrayList&lt;StudentCourse&gt;();\r\n    ...\r\n}\r\n```\r\n```java\r\n@Entity\r\npublic class Course implements Serializable\r\n{\r\n    ...\r\n\t@OneToMany(mappedBy=&quot;course&quot;)\r\n\tprivate List&lt;StudentCourse&gt; courses = new ArrayList&lt;StudentCourse&gt;();\r\n    ...\r\n}\r\n```\r\n```java\r\n@Entity\r\n@IdClass(StudentCourse.class)\r\npublic class StudentCourse implements Serializable\r\n{\r\n\t@Id\r\n\tprivate int studentId;\r\n\t\r\n\t@Id\r\n\tprivate int courseId;\r\n\t\r\n\tprivate int grade;\r\n\t\r\n\t@ManyToOne\r\n\t@PrimaryKeyJoinColumn(name=&quot;studentId&quot;, referencedColumnName=&quot;studentId&quot;)\r\n\tprivate Student student;\r\n\t\r\n\t@ManyToOne\r\n\t@PrimaryKeyJoinColumn(name=&quot;courseId&quot;, referencedColumnName=&quot;courseId&quot;)\r\n\tprivate Course course;\r\n    ...\r\n}\r\n```\r\n\r\nIt is ugly, but it works how it should work.\r\n\r\nNow, the problem: Cascading. It&#39;s no problem with the `@ManyToMany` relation in the first example (I got another relation within `Student`, but it doesn&#39;t matter for this problem).\r\n\r\nWhat I want is that if I delete a `Student`, the corresponding rows in the `StudentCourse` table gets also dropped, and the other way around: If I delete a `Course`, the corresponding rows should also get dropped. But I don&#39;t get\r\n\r\n 1. where to put the `cascade = CascadeType.XY`\r\n 2. *which* type of the cascade\r\n\r\nI tried to use `cascade = CascadeType.MERGE` on both the `Student` and the `Course`, but this just leads to this if I delete a Student:\r\n\r\n```\r\n2022-02-09T22:33:59.222+0100  ERROR  integrity constraint violation: foreign key no action; FKD0KC5NKFVH9A0DIFGUI129HFC table: STUDENTCOURSES\r\n```","title":"Hibernate: CascadeType on ManyToMany relation with extra column","body":"<p>So I got two entities, <code>Student</code> and <code>Course</code>. One <code>Student</code> can have many <code>Course</code> and one <code>Course</code> can have many <code>Student</code>. Normally, I would have Hibernate generate a jointable like this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@ManyToMany\n@JoinTable(\n            name=&quot;studentCourseJoinTable&quot;, \n            joinColumns= {\n                    @JoinColumn(\n                            name=&quot;studentId&quot;, \n                            referencedColumnName=&quot;studentId&quot;\n                            ) }, \n            inverseJoinColumns= {\n                    @JoinColumn(\n                            name=&quot;courseId&quot;, \n                            referencedColumnName=&quot;courseId&quot;)\n                    }\n            )\nprivate List&lt;Course&gt; courses = new ArrayList&lt;Course&gt;();\n</code></pre>\n<p>Problem is, that I need to store the <em>grade</em> of the student in this course. For the sake of simplicity, lets say it is just a normal integer value. Without Hibernate, I'd build a simple jointable with a extra column for the grade value, something like this:</p>\n<pre><code>+-----------+----------+-------+\n| studentId | courseId | grade |\n+-----------+----------+-------+\n|         1 |        1 |     1 |\n|         1 |        2 |     2 |\n|         2 |        1 |     5 |\n|         2 |        3 |     6 |\n+-----------+----------+-------+\n</code></pre>\n<p>So I followed <a href=\"https://en.wikibooks.org/wiki/Java_Persistence/ManyToMany#Mapping_a_Join_Table_with_Additional_Columns\" rel=\"nofollow noreferrer\">this guide in the JPA Wikibook</a> and set it up like this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Entity\npublic class Student implements Serializable\n{\n    ...\n    @OneToMany(mappedBy=&quot;student&quot;)\n    private List&lt;StudentCourse&gt; courses = new ArrayList&lt;StudentCourse&gt;();\n    ...\n}\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>@Entity\npublic class Course implements Serializable\n{\n    ...\n    @OneToMany(mappedBy=&quot;course&quot;)\n    private List&lt;StudentCourse&gt; courses = new ArrayList&lt;StudentCourse&gt;();\n    ...\n}\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>@Entity\n@IdClass(StudentCourse.class)\npublic class StudentCourse implements Serializable\n{\n    @Id\n    private int studentId;\n    \n    @Id\n    private int courseId;\n    \n    private int grade;\n    \n    @ManyToOne\n    @PrimaryKeyJoinColumn(name=&quot;studentId&quot;, referencedColumnName=&quot;studentId&quot;)\n    private Student student;\n    \n    @ManyToOne\n    @PrimaryKeyJoinColumn(name=&quot;courseId&quot;, referencedColumnName=&quot;courseId&quot;)\n    private Course course;\n    ...\n}\n</code></pre>\n<p>It is ugly, but it works how it should work.</p>\n<p>Now, the problem: Cascading. It's no problem with the <code>@ManyToMany</code> relation in the first example (I got another relation within <code>Student</code>, but it doesn't matter for this problem).</p>\n<p>What I want is that if I delete a <code>Student</code>, the corresponding rows in the <code>StudentCourse</code> table gets also dropped, and the other way around: If I delete a <code>Course</code>, the corresponding rows should also get dropped. But I don't get</p>\n<ol>\n<li>where to put the <code>cascade = CascadeType.XY</code></li>\n<li><em>which</em> type of the cascade</li>\n</ol>\n<p>I tried to use <code>cascade = CascadeType.MERGE</code> on both the <code>Student</code> and the <code>Course</code>, but this just leads to this if I delete a Student:</p>\n<pre><code>2022-02-09T22:33:59.222+0100  ERROR  integrity constraint violation: foreign key no action; FKD0KC5NKFVH9A0DIFGUI129HFC table: STUDENTCOURSES\n</code></pre>\n"},{"tags":["java","maven"],"comments":[{"owner":{"account_id":112317,"reputation":93939,"user_id":296328,"accept_rate":60,"display_name":"khmarbaise"},"score":0,"creation_date":1641811796,"post_id":70651192,"comment_id":124895600,"body_markdown":"What kind of vulnerability? Furthermore what have you tried so far?","body":"What kind of vulnerability? Furthermore what have you tried so far?"},{"owner":{"account_id":17639838,"reputation":139,"user_id":12802324,"display_name":"Charles"},"score":0,"creation_date":1641811927,"post_id":70651192,"comment_id":124895655,"body_markdown":"CVE-2020-15250 https://mvnrepository.com/artifact/org.codehaus.mojo/versions-maven-plugin/2.8.1","body":"CVE-2020-15250 <a href=\"https://mvnrepository.com/artifact/org.codehaus.mojo/versions-maven-plugin/2.8.1\" rel=\"nofollow noreferrer\">mvnrepository.com/artifact/org.codehaus.mojo/&hellip;</a>"},{"owner":{"account_id":112317,"reputation":93939,"user_id":296328,"accept_rate":60,"display_name":"khmarbaise"},"score":0,"creation_date":1641812094,"post_id":70651192,"comment_id":124895719,"body_markdown":"And where is the relationship to the plugin ?","body":"And where is the relationship to the plugin ?"}],"answers":[{"tags":[],"owner":{"account_id":15241422,"reputation":607,"user_id":10997589,"display_name":"Joe"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1641835775,"creation_date":1641835775,"answer_id":70656552,"question_id":70651192,"body_markdown":"You can use [maven version ranges][1] to achieve this.  For the equivalent of `1.0.*`, use a version range of `[1.0.1,1.1-SNAPSHOT)`.  That being said, I&#39;d use this somewhat sparingly with dependencies that you don&#39;t control, as they may change version scheme and/or functionality in ways you don&#39;t expect.  Something like [renovate][2] or [dependabot][3] may do what you need in a safer way by automating upgrade PRs that you can test before blindly accepting upgrades.\r\n\r\n\r\n  [1]: https://docs.oracle.com/middleware/1212/core/MAVEN/maven_version.htm#MAVEN402\r\n  [2]: https://docs.renovatebot.com/\r\n  [3]: https://docs.github.com/en/code-security/supply-chain-security/keeping-your-dependencies-updated-automatically/about-dependabot-version-updates","title":"automatic library update in the project","body":"<p>You can use <a href=\"https://docs.oracle.com/middleware/1212/core/MAVEN/maven_version.htm#MAVEN402\" rel=\"nofollow noreferrer\">maven version ranges</a> to achieve this.  For the equivalent of <code>1.0.*</code>, use a version range of <code>[1.0.1,1.1-SNAPSHOT)</code>.  That being said, I'd use this somewhat sparingly with dependencies that you don't control, as they may change version scheme and/or functionality in ways you don't expect.  Something like <a href=\"https://docs.renovatebot.com/\" rel=\"nofollow noreferrer\">renovate</a> or <a href=\"https://docs.github.com/en/code-security/supply-chain-security/keeping-your-dependencies-updated-automatically/about-dependabot-version-updates\" rel=\"nofollow noreferrer\">dependabot</a> may do what you need in a safer way by automating upgrade PRs that you can test before blindly accepting upgrades.</p>\n"}],"owner":{"account_id":17639838,"reputation":139,"user_id":12802324,"display_name":"Charles"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":286,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1644443678,"creation_date":1641811650,"question_id":70651192,"body_markdown":"I am using Maven in the project and there was a need for one of the libraries to update automatically. I am using [this plugin][1], unfortunately it has a vulnerability, so I am looking for an alternative.\r\n\r\nFor example, what I want to achieve:\r\n\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt; abcd &lt;/groupId&gt;\r\n        &lt;artifactId&gt; xyz &lt;/artifactId&gt;\r\n        &lt;version&gt; 1.0.1 &lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n\r\nI would like it to update automatically only when the last digit is raised. e.g. up to 1.0.2, 1.0.3 etc.\r\nIf you upgrade to version 1.1.0, the automatic update will not be performed.\r\n\r\n\r\n  [1]: http://www.mojohaus.org/versions-maven-plugin/","title":"automatic library update in the project","body":"<p>I am using Maven in the project and there was a need for one of the libraries to update automatically. I am using <a href=\"http://www.mojohaus.org/versions-maven-plugin/\" rel=\"nofollow noreferrer\">this plugin</a>, unfortunately it has a vulnerability, so I am looking for an alternative.</p>\n<p>For example, what I want to achieve:</p>\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt; abcd &lt;/groupId&gt;\n    &lt;artifactId&gt; xyz &lt;/artifactId&gt;\n    &lt;version&gt; 1.0.1 &lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>I would like it to update automatically only when the last digit is raised. e.g. up to 1.0.2, 1.0.3 etc.\nIf you upgrade to version 1.1.0, the automatic update will not be performed.</p>\n"},{"tags":["java","mysql","jpa","sqlexception"],"comments":[{"owner":{"account_id":2235373,"reputation":8473,"user_id":1971902,"display_name":"Meherzad"},"score":1,"creation_date":1361784373,"post_id":15063635,"comment_id":21180789,"body_markdown":"Check this link http://stackoverflow.com/questions/13653712/java-sql-sqlexception-incorrect-string-value-xf0-x9f-x91-xbd-xf0-x9f","body":"Check this link <a href=\"http://stackoverflow.com/questions/13653712/java-sql-sqlexception-incorrect-string-value-xf0-x9f-x91-xbd-xf0-x9f\" title=\"java sql sqlexception incorrect string value xf0 x9f x91 xbd xf0 x9f\">stackoverflow.com/questions/13653712/&hellip;</a>"},{"owner":{"account_id":1241689,"reputation":172569,"user_id":1204143,"accept_rate":64,"display_name":"nneonneo"},"score":0,"creation_date":1361784406,"post_id":15063635,"comment_id":21180804,"body_markdown":"You need to show what you are adding to the column.","body":"You need to show what you are adding to the column."},{"owner":{"account_id":2235373,"reputation":8473,"user_id":1971902,"display_name":"Meherzad"},"score":0,"creation_date":1361784801,"post_id":15063635,"comment_id":21181011,"body_markdown":"Add the table structure that you have created, show COLUMN_DESCRIPTION information the error is there you have to specify proeper keywords there","body":"Add the table structure that you have created, show COLUMN_DESCRIPTION information the error is there you have to specify proeper keywords there"}],"answers":[{"tags":[],"owner":{"account_id":2409679,"reputation":195,"user_id":2105104,"display_name":"Anurag Shukla"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1361784214,"creation_date":1361784214,"answer_id":15063692,"question_id":15063635,"body_markdown":"Surely it is a MYSQL Bug ... More can be seen at http://bugs.mysql.com/bug.php?id=59456","title":"java.sql.SQLException: Incorrect string value: &#39;\\xAC\\xED\\x00\\x05sr...&#39;","body":"<p>Surely it is a MYSQL Bug ... More can be seen at <a href=\"http://bugs.mysql.com/bug.php?id=59456\" rel=\"nofollow\">http://bugs.mysql.com/bug.php?id=59456</a></p>\n"},{"tags":[],"owner":{"account_id":2131532,"reputation":1592,"user_id":1892267,"accept_rate":83,"display_name":"akuzma"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1361785598,"creation_date":1361785598,"answer_id":15064092,"question_id":15063635,"body_markdown":"I&#39;ve solved it so here it is, maybe someone find it useful:\r\n\r\nI tried to use `columnDefinition = &quot;LONGTEXT&quot;` in wrong place. There&#39;s only reference to table `ProductLocalization`, where mulitilingual descriptions are stored. When I used \r\n\r\n    @ManyToOne\r\n    @JoinColumn(name = AbstractLocalizingEntity.COLUMN_RELATED_ENTITY, nullable = false)\r\n    private Product entity;\r\n    \r\n    @Column(name = Product.COLUMN_DESCRIPTION, columnDefinition = &quot;LONGTEXT&quot;)\r\n    private String description;\r\n\r\nin `ProductLocalization` class it started working fine. Thanks all for your help.\r\n\r\n","title":"java.sql.SQLException: Incorrect string value: &#39;\\xAC\\xED\\x00\\x05sr...&#39;","body":"<p>I've solved it so here it is, maybe someone find it useful:</p>\n\n<p>I tried to use <code>columnDefinition = \"LONGTEXT\"</code> in wrong place. There's only reference to table <code>ProductLocalization</code>, where mulitilingual descriptions are stored. When I used </p>\n\n<pre><code>@ManyToOne\n@JoinColumn(name = AbstractLocalizingEntity.COLUMN_RELATED_ENTITY, nullable = false)\nprivate Product entity;\n\n@Column(name = Product.COLUMN_DESCRIPTION, columnDefinition = \"LONGTEXT\")\nprivate String description;\n</code></pre>\n\n<p>in <code>ProductLocalization</code> class it started working fine. Thanks all for your help.</p>\n"},{"tags":[],"owner":{"account_id":14328088,"reputation":770,"user_id":10349610,"display_name":"wwww"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1644443657,"creation_date":1644443657,"answer_id":71057229,"question_id":15063635,"body_markdown":"It is not necessary a bug. You may try store this object as a blob. Which is a data type in e.g. mysql","title":"java.sql.SQLException: Incorrect string value: &#39;\\xAC\\xED\\x00\\x05sr...&#39;","body":"<p>It is not necessary a bug. You may try store this object as a blob. Which is a data type in e.g. mysql</p>\n"}],"owner":{"account_id":2131532,"reputation":1592,"user_id":1892267,"accept_rate":83,"display_name":"akuzma"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":16917,"favorite_count":0,"down_vote_count":1,"up_vote_count":5,"accepted_answer_id":15064092,"answer_count":3,"score":4,"last_activity_date":1644443657,"creation_date":1361783996,"question_id":15063635,"body_markdown":"I have code looking like that:\r\n\r\n        @Column(name = COLUMN_DESCRIPTION, columnDefinition = &quot;LONGTEXT&quot;)\r\n    private Map&lt;Locale, String&gt; description = new HashMap&lt;&gt;();\r\n\r\nafter trying to add something to column i got \r\n\r\n    java.sql.SQLException: Incorrect string value: &#39;\\xAC\\xED\\x00\\x05sr...&#39; for column &#39;description&#39; at row 1\r\n\r\nWhere&#39;s the problem?","title":"java.sql.SQLException: Incorrect string value: &#39;\\xAC\\xED\\x00\\x05sr...&#39;","body":"<p>I have code looking like that:</p>\n\n<pre><code>    @Column(name = COLUMN_DESCRIPTION, columnDefinition = \"LONGTEXT\")\nprivate Map&lt;Locale, String&gt; description = new HashMap&lt;&gt;();\n</code></pre>\n\n<p>after trying to add something to column i got </p>\n\n<pre><code>java.sql.SQLException: Incorrect string value: '\\xAC\\xED\\x00\\x05sr...' for column 'description' at row 1\n</code></pre>\n\n<p>Where's the problem?</p>\n"},{"tags":["java","selenium","xpath","drop-down-menu","css-selectors"],"answers":[{"tags":[],"owner":{"account_id":6990353,"reputation":1340,"user_id":5359846,"accept_rate":23,"display_name":"Tal Angel"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1644418512,"creation_date":1644418512,"answer_id":71051804,"question_id":71051526,"body_markdown":"That is because the element you are trying to cast is a `link` tag and not a `select` tag.\r\nYou need to give the Xpath or CSS of the correct Select element and then cast it from WebElement into a Select ojbect.\r\n\r\nIn the example you are using there is not real selector, you first need to click on the buttons that says &quot;Categories&quot; and later take the options that appear:\r\n\r\n    WebElement button = driver.findElementByCSS(&quot;div[class=&#39;mui-dropdown&#39;]&quot;);\r\n    button.click();\r\n    WebElement SelectObj = driver.findElementByCSS(&quot;ul[class*=&#39;mui--is-open&#39;]&quot;);\r\n    Select s = new Select(SelectObj);\r\n\r\n\r\n\r\n","title":"UnexpectedTagNameException: Element should have been &quot;select&quot; but was &quot;a&quot; while trying to get the texts of dropdown menu using Selenium and Java","body":"<p>That is because the element you are trying to cast is a <code>link</code> tag and not a <code>select</code> tag.\nYou need to give the Xpath or CSS of the correct Select element and then cast it from WebElement into a Select ojbect.</p>\n<p>In the example you are using there is not real selector, you first need to click on the buttons that says &quot;Categories&quot; and later take the options that appear:</p>\n<pre><code>WebElement button = driver.findElementByCSS(&quot;div[class='mui-dropdown']&quot;);\nbutton.click();\nWebElement SelectObj = driver.findElementByCSS(&quot;ul[class*='mui--is-open']&quot;);\nSelect s = new Select(SelectObj);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":10049107,"reputation":186627,"user_id":7429447,"accept_rate":86,"display_name":"undetected Selenium"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1644443597,"creation_date":1644443059,"answer_id":71057122,"question_id":71051526,"body_markdown":"The desired element is not a `&lt;select&gt;` element but a `&lt;ul&gt;` element. Once you click on the `&lt;a&gt;` element then only the _classname_ _`mui--is-open`_ is appended to the desired `&lt;ul&gt;` element.\r\n\r\n![tutorialspoint](https://i.stack.imgur.com/uZQ9x.png)\r\n\r\n\r\n----------\r\n\r\n\r\nSolution\r\n--------\r\nSo to get the contents of the dropdown menu you need to induce [WebDriverWait](https://stackoverflow.com/a/48990165/7429447) for the [visibilityOfAllElementsLocatedBy()](https://stackoverflow.com/a/65686528/7429447) and you can use _Java8_ [`stream()`](https://docs.oracle.com/javase/8/docs/api/java/util/stream/package-summary.html) and [`map()`](https://docs.oracle.com/javase/8/docs/api/java/util/Map.html) and you can use either of the following [Locator Strategies](https://stackoverflow.com/a/48376890/7429447):\r\n\r\n- Using _cssSelector_:\r\n\r\n\t  new WebDriverWait(driver, 20).until(ExpectedConditions.elementToBeClickable(By.cssSelector(&quot;a.mui-btn.mui-btn--primary.categories&quot;))).click();\r\n\t  System.out.println(new WebDriverWait(driver, 20).until(ExpectedConditions.visibilityOfAllElementsLocatedBy(By.cssSelector(&quot;ul.mui-dropdown__menu.cat-menu.mui--is-open a&quot;))).stream().map(element-&gt;element.getText()).collect(Collectors.toList()));\r\n\t\r\n- Using _xpath_:\r\n\r\n\t  new WebDriverWait(driver, 20).until(ExpectedConditions.elementToBeClickable(By.xpath(&quot;//a[@class=&#39;mui-btn mui-btn--primary categories&#39;]&quot;))).click();\r\n\t  System.out.println(new WebDriverWait(driver, 20).until(ExpectedConditions.visibilityOfAllElementsLocatedBy(By.xpath(&quot;//ul[@class=&#39;mui-dropdown__menu cat-menu mui--is-open&#39;]//a&quot;))).stream().map(element-&gt;element.getText()).collect(Collectors.toList()));\r\n\r\n\r\n----------\r\n\r\n\r\nReferences\r\n----------\r\nYou can find a couple of relevant detailed discussions in:\r\n\r\n- [How to extract the text iterating specific rows within a table using XPath with Selenium and Java](https://stackoverflow.com/a/62636671/7429447)\r\n- [How to extract the dynamic values of the id attributes of the table elements using Selenium and Java](https://stackoverflow.com/a/55707593/7429447)\r\n- [How to print runs scored by a batsmen in a scoreboard format webelements through CSS selector using Selenium and Java](https://stackoverflow.com/a/62123047/7429447)","title":"UnexpectedTagNameException: Element should have been &quot;select&quot; but was &quot;a&quot; while trying to get the texts of dropdown menu using Selenium and Java","body":"<p>The desired element is not a <code>&lt;select&gt;</code> element but a <code>&lt;ul&gt;</code> element. Once you click on the <code>&lt;a&gt;</code> element then only the <em>classname</em> <em><code>mui--is-open</code></em> is appended to the desired <code>&lt;ul&gt;</code> element.</p>\n<p><img src=\"https://i.stack.imgur.com/uZQ9x.png\" alt=\"tutorialspoint\" /></p>\n<hr />\n<h2>Solution</h2>\n<p>So to get the contents of the dropdown menu you need to induce <a href=\"https://stackoverflow.com/a/48990165/7429447\">WebDriverWait</a> for the <a href=\"https://stackoverflow.com/a/65686528/7429447\">visibilityOfAllElementsLocatedBy()</a> and you can use <em>Java8</em> <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/stream/package-summary.html\" rel=\"nofollow noreferrer\"><code>stream()</code></a> and <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/Map.html\" rel=\"nofollow noreferrer\"><code>map()</code></a> and you can use either of the following <a href=\"https://stackoverflow.com/a/48376890/7429447\">Locator Strategies</a>:</p>\n<ul>\n<li><p>Using <em>cssSelector</em>:</p>\n<pre><code>new WebDriverWait(driver, 20).until(ExpectedConditions.elementToBeClickable(By.cssSelector(&quot;a.mui-btn.mui-btn--primary.categories&quot;))).click();\nSystem.out.println(new WebDriverWait(driver, 20).until(ExpectedConditions.visibilityOfAllElementsLocatedBy(By.cssSelector(&quot;ul.mui-dropdown__menu.cat-menu.mui--is-open a&quot;))).stream().map(element-&gt;element.getText()).collect(Collectors.toList()));\n</code></pre>\n</li>\n<li><p>Using <em>xpath</em>:</p>\n<pre><code>new WebDriverWait(driver, 20).until(ExpectedConditions.elementToBeClickable(By.xpath(&quot;//a[@class='mui-btn mui-btn--primary categories']&quot;))).click();\nSystem.out.println(new WebDriverWait(driver, 20).until(ExpectedConditions.visibilityOfAllElementsLocatedBy(By.xpath(&quot;//ul[@class='mui-dropdown__menu cat-menu mui--is-open']//a&quot;))).stream().map(element-&gt;element.getText()).collect(Collectors.toList()));\n</code></pre>\n</li>\n</ul>\n<hr />\n<h2>References</h2>\n<p>You can find a couple of relevant detailed discussions in:</p>\n<ul>\n<li><a href=\"https://stackoverflow.com/a/62636671/7429447\">How to extract the text iterating specific rows within a table using XPath with Selenium and Java</a></li>\n<li><a href=\"https://stackoverflow.com/a/55707593/7429447\">How to extract the dynamic values of the id attributes of the table elements using Selenium and Java</a></li>\n<li><a href=\"https://stackoverflow.com/a/62123047/7429447\">How to print runs scored by a batsmen in a scoreboard format webelements through CSS selector using Selenium and Java</a></li>\n</ul>\n"}],"owner":{"account_id":16027360,"reputation":13,"user_id":11567278,"display_name":"Prashant Kumar"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":701,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1644443597,"creation_date":1644417554,"question_id":71051526,"body_markdown":"While trying to get the menu list, I&#39;m getting this error message: \r\n```\r\nException in thread &quot;main&quot; org.openqa.selenium.support.ui.UnexpectedTagNameException: Element should have been &quot;select&quot; but was &quot;a&quot;.\r\n```\r\nHere below is the code:\r\n\r\n    public static void main(String[] args) {\r\n    \t\t// TODO Auto-generated method stub\r\n    \r\n    \t\tSystem.setProperty(&quot;webdriver.chrome.driver&quot;, &quot;D:\\\\selenium files\\\\chromedriver_win32_new\\\\chromedriver.exe&quot;);\r\n    \t\tWebDriver driver = new ChromeDriver();\r\n    \t\tdriver.manage().window().maximize();\r\n    \t\tdriver.get(&quot;https://www.tutorialspoint.com/tutor_connect/index.php&quot;);\r\n    \t\t\r\n    \t\tdriver.manage().timeouts().implicitlyWait(10, TimeUnit.SECONDS);\t\r\n    \t\t\r\n    \t\tWebElement ele = driver.findElement(By.xpath(&quot;//*[@id=\\&quot;logo-menu\\&quot;]/div/div[1]/div/a&quot;));\r\n    \t\t\r\n    \t\tSelect s = new Select(ele);\r\n    \t\t\r\n    \t//getting list of menu\r\n    \t\t List &lt;WebElement&gt; op = s.getOptions();\r\n    \t      int size = op.size();\r\n    \t      for(int i =0; i&lt;size ; i++){\r\n    \t         String options = op.get(i).getText();\r\n    \t         System.out.println(options);\r\n    \t      }\r\n    \t}\r\n    }\r\n\r\n\r\n\r\n","title":"UnexpectedTagNameException: Element should have been &quot;select&quot; but was &quot;a&quot; while trying to get the texts of dropdown menu using Selenium and Java","body":"<p>While trying to get the menu list, I'm getting this error message:</p>\n<pre><code>Exception in thread &quot;main&quot; org.openqa.selenium.support.ui.UnexpectedTagNameException: Element should have been &quot;select&quot; but was &quot;a&quot;.\n</code></pre>\n<p>Here below is the code:</p>\n<pre><code>public static void main(String[] args) {\n        // TODO Auto-generated method stub\n\n        System.setProperty(&quot;webdriver.chrome.driver&quot;, &quot;D:\\\\selenium files\\\\chromedriver_win32_new\\\\chromedriver.exe&quot;);\n        WebDriver driver = new ChromeDriver();\n        driver.manage().window().maximize();\n        driver.get(&quot;https://www.tutorialspoint.com/tutor_connect/index.php&quot;);\n        \n        driver.manage().timeouts().implicitlyWait(10, TimeUnit.SECONDS);    \n        \n        WebElement ele = driver.findElement(By.xpath(&quot;//*[@id=\\&quot;logo-menu\\&quot;]/div/div[1]/div/a&quot;));\n        \n        Select s = new Select(ele);\n        \n    //getting list of menu\n         List &lt;WebElement&gt; op = s.getOptions();\n          int size = op.size();\n          for(int i =0; i&lt;size ; i++){\n             String options = op.get(i).getText();\n             System.out.println(options);\n          }\n    }\n}\n</code></pre>\n"},{"tags":["java","eclipse","egit"],"answers":[{"tags":[],"owner":{"account_id":9833952,"reputation":445,"user_id":7284907,"display_name":"Brishna Batool"},"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1644443238,"creation_date":1568963572,"answer_id":58023463,"question_id":58022769,"body_markdown":"Looks like you somehow marked it as `assume-valid`. Check [the documentation][1] and try [this fix][2] to mark it as `No Assume unchanged`:\r\n\r\n&gt; This setting can be switched on with the menu action Team &gt; Assume unchanged and switched back with the menu action Team &gt; No Assume unchanged.\r\n\r\n\r\n  [1]: http://wiki.eclipse.org/EGit/User_Guide\r\n  [2]: http://wiki.eclipse.org/EGit/User_Guide#Menu_Actions","title":"Eclipse file doesn&#39;t appear in commit","body":"<p>Looks like you somehow marked it as <code>assume-valid</code>. Check <a href=\"http://wiki.eclipse.org/EGit/User_Guide\" rel=\"nofollow noreferrer\">the documentation</a> and try <a href=\"http://wiki.eclipse.org/EGit/User_Guide#Menu_Actions\" rel=\"nofollow noreferrer\">this fix</a> to mark it as <code>No Assume unchanged</code>:</p>\n<blockquote>\n<p>This setting can be switched on with the menu action Team &gt; Assume unchanged and switched back with the menu action Team &gt; No Assume unchanged.</p>\n</blockquote>\n"}],"owner":{"account_id":14023733,"reputation":289,"user_id":10718749,"display_name":"Oscar Sj&#246;stedt"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":794,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":58023463,"answer_count":1,"score":1,"last_activity_date":1644443238,"creation_date":1568960456,"question_id":58022769,"body_markdown":"I have a large Eclipse project with a git repository and with multiple files, and today a class stopped behaving properly: when edited the &gt; sign doesn&#39;t appear in front of the file&#39;s name, and the file&#39;s icon has this blue tick I never saw before. I also tried deleting the file and recreating it (and then pasting all the code it had), but to  no avail.\r\n\r\nHere&#39;s what the file looks like:\r\n[![The screenshot of the problem.][1]][1]\r\n\r\nDid I accidentally press a hotkey that did this? I also recently started using Eclipse&#39;s task system, so maybe it is linked?\r\n\r\nThanks for any help\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/KFDPO.png","title":"Eclipse file doesn&#39;t appear in commit","body":"<p>I have a large Eclipse project with a git repository and with multiple files, and today a class stopped behaving properly: when edited the > sign doesn't appear in front of the file's name, and the file's icon has this blue tick I never saw before. I also tried deleting the file and recreating it (and then pasting all the code it had), but to  no avail.</p>\n\n<p>Here's what the file looks like:\n<a href=\"https://i.stack.imgur.com/KFDPO.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/KFDPO.png\" alt=\"The screenshot of the problem.\"></a></p>\n\n<p>Did I accidentally press a hotkey that did this? I also recently started using Eclipse's task system, so maybe it is linked?</p>\n\n<p>Thanks for any help</p>\n"},{"tags":["java","android","gson","sharedpreferences"],"comments":[{"owner":{"account_id":72095,"reputation":18817,"user_id":208273,"display_name":"Ryan M"},"score":1,"creation_date":1644470639,"post_id":71054706,"comment_id":125617005,"body_markdown":"Close voters:  How exactly does this need more focus?  It is asking how to do a single thing.  The fact that that thing is impossible does not make it lack focus.  &quot;You can&#39;t&quot; is an answer.","body":"Close voters:  How exactly does this need more focus?  It is asking how to do a single thing.  The fact that that thing is impossible does not make it lack focus.  &quot;You can&#39;t&quot; is an answer."}],"answers":[{"tags":[],"owner":{"account_id":72095,"reputation":18817,"user_id":208273,"display_name":"Ryan M"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1644438833,"creation_date":1644438833,"answer_id":71056346,"question_id":71054706,"body_markdown":"You can&#39;t.\r\n\r\nButtons are an interactive UI element.  They have behaviors and code (what happens on click) associated with them.  You can&#39;t save a Button to shared preferences any more than you can print one out on your printer: what you get would not be a Button, just an image of one that couldn&#39;t be pressed.\r\n\r\nConsider what you&#39;re *actually* trying to save: is it some information about the state of the system?  Some text?  Save *that* to shared preferences, then rebuild your UI from that data when you read it back out.","title":"How to save an ArrayList of Buttons in SharedPreferences","body":"<p>You can't.</p>\n<p>Buttons are an interactive UI element.  They have behaviors and code (what happens on click) associated with them.  You can't save a Button to shared preferences any more than you can print one out on your printer: what you get would not be a Button, just an image of one that couldn't be pressed.</p>\n<p>Consider what you're <em>actually</em> trying to save: is it some information about the state of the system?  Some text?  Save <em>that</em> to shared preferences, then rebuild your UI from that data when you read it back out.</p>\n"}],"owner":{"account_id":22304009,"reputation":51,"user_id":16528911,"display_name":"Simba"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":117,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"closed_date":1644479575,"answer_count":1,"score":-1,"last_activity_date":1644443130,"creation_date":1644430496,"question_id":71054706,"body_markdown":"I&#39;d like to save a list of buttons in SharedPreferences but it doesn&#39;t work.\r\nThe error message that occurs is &quot;java.lang.IllegalArgumentException: class android.graphics.drawable.InsetDrawable declares multiple JSON fields named mState&quot;\r\n\r\n\r\n``` \r\n\r\npublic boolean writeToSharedPreferences(Context context, ArrayList&lt;Button&gt; arrayList) {\r\n\r\n   \r\n    String file = &quot;list&quot;;\r\n    SharedPreferences mPrefs = context.getSharedPreferences(file, Context.MODE_PRIVATE);\r\n\r\n    SharedPreferences.Editor prefsEditor = mPrefs.edit();\r\n    Gson gson = new Gson();\r\n    String json = gson.toJson(arrayList);\r\n    prefsEditor.putString(&quot;list&quot;, json);\r\n    prefsEditor.commit();\r\n\r\n    return true;\r\n} \r\n\r\npublic ArrayList&lt;Button&gt; readFromSharedPreferences(Context context) {\r\n\r\n   \r\n    String file = &quot;list&quot;;\r\n    SharedPreferences mPrefs = context.getSharedPreferences(file, Context.MODE_PRIVATE);\r\n    Gson gson = new Gson();\r\n    String json = mPrefs.getString(&quot;list&quot;, &quot;&quot;);\r\n    Type type = new TypeToken&lt;List&lt;Button&gt;&gt;(){}.getType();\r\n    ArrayList&lt;Button&gt; arrayList= gson.fromJson(json, type);\r\n    return arrayList;\r\n}\r\n\r\n\r\n``` \r\nCan someone help me pls?\r\n","title":"How to save an ArrayList of Buttons in SharedPreferences","body":"<p>I'd like to save a list of buttons in SharedPreferences but it doesn't work.\nThe error message that occurs is &quot;java.lang.IllegalArgumentException: class android.graphics.drawable.InsetDrawable declares multiple JSON fields named mState&quot;</p>\n<pre><code>\npublic boolean writeToSharedPreferences(Context context, ArrayList&lt;Button&gt; arrayList) {\n\n   \n    String file = &quot;list&quot;;\n    SharedPreferences mPrefs = context.getSharedPreferences(file, Context.MODE_PRIVATE);\n\n    SharedPreferences.Editor prefsEditor = mPrefs.edit();\n    Gson gson = new Gson();\n    String json = gson.toJson(arrayList);\n    prefsEditor.putString(&quot;list&quot;, json);\n    prefsEditor.commit();\n\n    return true;\n} \n\npublic ArrayList&lt;Button&gt; readFromSharedPreferences(Context context) {\n\n   \n    String file = &quot;list&quot;;\n    SharedPreferences mPrefs = context.getSharedPreferences(file, Context.MODE_PRIVATE);\n    Gson gson = new Gson();\n    String json = mPrefs.getString(&quot;list&quot;, &quot;&quot;);\n    Type type = new TypeToken&lt;List&lt;Button&gt;&gt;(){}.getType();\n    ArrayList&lt;Button&gt; arrayList= gson.fromJson(json, type);\n    return arrayList;\n}\n\n\n</code></pre>\n<p>Can someone help me pls?</p>\n"},{"tags":["java","spring","caching","hazelcast","spring-cache"],"answers":[{"tags":[],"owner":{"account_id":4133097,"reputation":7506,"user_id":3390417,"display_name":"John Blum"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1644443095,"creation_date":1644443095,"answer_id":71057130,"question_id":70569928,"body_markdown":"See my [answer][1] to this similar SO question and specifically have a look at this [answer][2] (#2 from my previous answer).\r\n\r\nMy answers also share example code on how to implement such logic with *Spring&#39;s Cache Abstraction*, see [here][3].\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/67784020/how-to-cache-a-listobject-in-java-such-that-the-elements-in-list-are-cached-as\r\n  [2]: https://stackoverflow.com/questions/44529029/spring-cache-with-collection-of-items-entities\r\n  [3]: https://github.com/jxblum/spring-gemfire-tests/blob/master/src/test/java/org/spring/cache/CachingCollectionElementsIndividuallyWithConcurrentMapTest.java","title":"Get separate elements with @Cacheable List","body":"<p>See my <a href=\"https://stackoverflow.com/questions/67784020/how-to-cache-a-listobject-in-java-such-that-the-elements-in-list-are-cached-as\">answer</a> to this similar SO question and specifically have a look at this <a href=\"https://stackoverflow.com/questions/44529029/spring-cache-with-collection-of-items-entities\">answer</a> (#2 from my previous answer).</p>\n<p>My answers also share example code on how to implement such logic with <em>Spring's Cache Abstraction</em>, see <a href=\"https://github.com/jxblum/spring-gemfire-tests/blob/master/src/test/java/org/spring/cache/CachingCollectionElementsIndividuallyWithConcurrentMapTest.java\" rel=\"nofollow noreferrer\">here</a>.</p>\n"}],"owner":{"account_id":18797333,"reputation":67,"user_id":13708493,"display_name":"ajms"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1266,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1644443095,"creation_date":1641234201,"question_id":70569928,"body_markdown":"I&#39;m using spring cache integration with hazelcast.&lt;br&gt;&lt;br&gt;\r\nI need to get/set(1st call) all the movies list from/to a hazelcast cache map.\r\nI also need to be able to get a specific movie from the cache map.\r\n&lt;br&gt;&lt;br&gt;\r\nMy problem is that by using List&lt;Object&gt; with `@Cacheable`, it returns a single key (`SimpleKey[]`) which holds all the movies objects, instead of adding the key/values individually, so I can then use `@Cacheable` with a key to get a specific map object.\r\n\r\n\r\n    @Cacheable(value = MOVIES_CACHE_NAME, unless = &quot;#result==null or #result.isEmpty()&quot;)\r\n    public List&lt;Movie&gt; getAllMoviesFromCache() {\r\n        log.debug(&quot;Going to call getAllMoviesFromCache&quot;);\r\n\r\n        List&lt;Movie&gt; movies = null;\r\n        MovieListDetailResponse response = getAllMovies(); //gets from db\r\n\r\n        if (response != null &amp;&amp; response.getMovies() != null) {\r\n            movies = convertMovieListResponseToMovie(response.getMovies());\r\n        }\r\n\r\n        log.debug(String.format(&quot;Finished getAllMoviesFromCache, got Response %s&quot;, response));\r\n\r\n        return movies;\r\n    }\r\n\r\n\r\n&lt;br&gt;\r\n\r\n\r\n    @Cacheable(value = MOVIES_CACHE_NAME, key = &quot;{#movieId}&quot;, unless = &quot;#result==null&quot;)\r\n    public Movie getMovieDetailsFromCache(String movieId) {\r\n        Movie movie = null;\r\n        MovieDetailResponse response = getMovie(movieId); //gets from db\r\n\r\n        if (response != null &amp;&amp; response.getMovie() != null) {\r\n            movie = convertMovieDetailResponseToMovie(response.getMovie());\r\n        }\r\n\r\n        log.info(String.format(&quot;Movie by MovieId: &#39;%s&#39;. Response: %s&quot;, movieId, movie));\r\n        return movie;\r\n    }\r\n\r\n","title":"Get separate elements with @Cacheable List","body":"<p>I'm using spring cache integration with hazelcast.<br><br>\nI need to get/set(1st call) all the movies list from/to a hazelcast cache map.\nI also need to be able to get a specific movie from the cache map.\n<br><br>\nMy problem is that by using List with <code>@Cacheable</code>, it returns a single key (<code>SimpleKey[]</code>) which holds all the movies objects, instead of adding the key/values individually, so I can then use <code>@Cacheable</code> with a key to get a specific map object.</p>\n<pre><code>@Cacheable(value = MOVIES_CACHE_NAME, unless = &quot;#result==null or #result.isEmpty()&quot;)\npublic List&lt;Movie&gt; getAllMoviesFromCache() {\n    log.debug(&quot;Going to call getAllMoviesFromCache&quot;);\n\n    List&lt;Movie&gt; movies = null;\n    MovieListDetailResponse response = getAllMovies(); //gets from db\n\n    if (response != null &amp;&amp; response.getMovies() != null) {\n        movies = convertMovieListResponseToMovie(response.getMovies());\n    }\n\n    log.debug(String.format(&quot;Finished getAllMoviesFromCache, got Response %s&quot;, response));\n\n    return movies;\n}\n</code></pre>\n<br>\n<pre><code>@Cacheable(value = MOVIES_CACHE_NAME, key = &quot;{#movieId}&quot;, unless = &quot;#result==null&quot;)\npublic Movie getMovieDetailsFromCache(String movieId) {\n    Movie movie = null;\n    MovieDetailResponse response = getMovie(movieId); //gets from db\n\n    if (response != null &amp;&amp; response.getMovie() != null) {\n        movie = convertMovieDetailResponseToMovie(response.getMovie());\n    }\n\n    log.info(String.format(&quot;Movie by MovieId: '%s'. Response: %s&quot;, movieId, movie));\n    return movie;\n}\n</code></pre>\n"},{"tags":["java","eclipse","junit"],"comments":[{"owner":{"account_id":5582693,"reputation":587,"user_id":4424117,"display_name":"newuserua_ext"},"score":1,"creation_date":1428570891,"post_id":29534204,"comment_id":47221664,"body_markdown":"Here is something about it http://stackoverflow.com/questions/1119385/junit-test-for-system-out-println","body":"Here is something about it <a href=\"http://stackoverflow.com/questions/1119385/junit-test-for-system-out-println\" title=\"junit test for system out println\">stackoverflow.com/questions/1119385/&hellip;</a>"},{"owner":{"account_id":1442283,"reputation":1843,"user_id":1362037,"accept_rate":80,"display_name":"Stephan"},"score":0,"creation_date":1428571147,"post_id":29534204,"comment_id":47221808,"body_markdown":"@newuserua_ext Maybe I misunderstood this thread but I don&#39;t want to test the console output. I just want to see JUnit log output in the console.","body":"@newuserua_ext Maybe I misunderstood this thread but I don&#39;t want to test the console output. I just want to see JUnit log output in the console."}],"answers":[{"tags":[],"owner":{"account_id":6101189,"reputation":2090,"user_id":4760164,"display_name":"flafoux"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1644254114,"creation_date":1428572610,"answer_id":29535016,"question_id":29534204,"body_markdown":"You can try catch ComparisonFailure :\r\n\r\n    @Test\r\n    public void someSimpleTest() {\r\n        try {\r\n          Assert.assertEquals(&quot;123&quot;, &quot;456&quot;);\r\n        } catch(ComparisonFailure e) {\r\n          System.out.println(e.getMessage());\r\n        }\r\n    }\r\nYou can also use getActual() and getExpected(). More doc [here][1]\r\n\r\n\r\n  [1]: http://junit.sourceforge.net/javadoc/org/junit/ComparisonFailure.html","title":"Show result of failed JUnit tests in the console","body":"<p>You can try catch ComparisonFailure :</p>\n<pre><code>@Test\npublic void someSimpleTest() {\n    try {\n      Assert.assertEquals(&quot;123&quot;, &quot;456&quot;);\n    } catch(ComparisonFailure e) {\n      System.out.println(e.getMessage());\n    }\n}\n</code></pre>\n<p>You can also use getActual() and getExpected(). More doc <a href=\"http://junit.sourceforge.net/javadoc/org/junit/ComparisonFailure.html\" rel=\"nofollow noreferrer\">here</a></p>\n"},{"tags":[],"owner":{"account_id":1535573,"reputation":7025,"user_id":1431728,"accept_rate":49,"display_name":"JohnK"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1644443080,"creation_date":1644443080,"answer_id":71057128,"question_id":29534204,"body_markdown":"According to the [JUnit 4 documentation](https://junit.org/junit4/javadoc/4.8/org/junit/Assert.html#assertEquals(java.lang.String,%20java.lang.Object,%20java.lang.Object)), there are other versions of assertEquals that take a message to be printed if the assertion fails:\r\n\r\n````\r\npublic static void assertEquals(String message,\r\n                                Object expected,\r\n                                Object actual)\r\n\r\nAsserts that two objects are equal. If they are not, an AssertionError is thrown with the given message. If expected and actual are null, they are considered equal.\r\nParameters:\r\nmessage - the identifying message for the AssertionError (null okay)\r\nexpected - expected value\r\nactual - actual value\r\n````\r\n\r\nUnfortunately I don&#39;t see a way to add the expected and actual values into that message, since it&#39;s just a predetermined string.","title":"Show result of failed JUnit tests in the console","body":"<p>According to the <a href=\"https://junit.org/junit4/javadoc/4.8/org/junit/Assert.html#assertEquals(java.lang.String,%20java.lang.Object,%20java.lang.Object)\" rel=\"nofollow noreferrer\">JUnit 4 documentation</a>, there are other versions of assertEquals that take a message to be printed if the assertion fails:</p>\n<pre><code>public static void assertEquals(String message,\n                                Object expected,\n                                Object actual)\n\nAsserts that two objects are equal. If they are not, an AssertionError is thrown with the given message. If expected and actual are null, they are considered equal.\nParameters:\nmessage - the identifying message for the AssertionError (null okay)\nexpected - expected value\nactual - actual value\n</code></pre>\n<p>Unfortunately I don't see a way to add the expected and actual values into that message, since it's just a predetermined string.</p>\n"}],"owner":{"account_id":1442283,"reputation":1843,"user_id":1362037,"accept_rate":80,"display_name":"Stephan"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":5004,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":2,"score":2,"last_activity_date":1644443080,"creation_date":1428570292,"question_id":29534204,"body_markdown":"In a JUnit (4.x) test case I want to get some log information in case one of the assertion fails. Assume this is the test class:\r\n\r\n    package a.b.c.d;\r\n    \r\n    import org.junit.Assert;\r\n    import org.junit.Test;\r\n    \r\n    public class SomeTestClass {\r\n    \t\r\n    \t@Test\r\n    \tpublic void someSimpleTest() {\r\n    \t\tAssert.assertEquals(&quot;123&quot;, &quot;456&quot;);\r\n    \t}\r\n    }\r\n\r\nObviously, `Assert.assertEquals(&quot;123&quot;, &quot;456&quot;);` will fail. When I run this test from within Eclipse I only get the Failure Trace with an exception. I would like to have some info printed onto the console about what actually failed, e.g.:\r\n\r\n    Expected Value: &quot;123&quot;; Actual Value &quot;456&quot;;\r\n\r\nSearching the internet I stumbled upon this example here that provides the information that I need. However, I&#39;m not able to get this log output in the console.\r\n\r\n    org.junit.ComparisonFailure: expected:&lt;gradle is gr[8]&gt; but was:&lt;gradle is gr[eat]&gt;\r\n        at org.junit.Assert.assertEquals(Assert.java:115)\r\n        at org.junit.Assert.assertEquals(Assert.java:144)\r\n        at com.mrhaki.gradle.SampleTest.sample(SampleTest.java:8)\r\n\r\nWhat I tried so far is something like below, which didn&#39;t help.\r\n\r\n    -Djava.util.logging.ConsoleHandler.level=FINEST\r\n\r\n    static {\r\n\t\tLogger.getGlobal().setLevel(Level.FINEST);\r\n\t}\r\n","title":"Show result of failed JUnit tests in the console","body":"<p>In a JUnit (4.x) test case I want to get some log information in case one of the assertion fails. Assume this is the test class:</p>\n\n<pre><code>package a.b.c.d;\n\nimport org.junit.Assert;\nimport org.junit.Test;\n\npublic class SomeTestClass {\n\n    @Test\n    public void someSimpleTest() {\n        Assert.assertEquals(\"123\", \"456\");\n    }\n}\n</code></pre>\n\n<p>Obviously, <code>Assert.assertEquals(\"123\", \"456\");</code> will fail. When I run this test from within Eclipse I only get the Failure Trace with an exception. I would like to have some info printed onto the console about what actually failed, e.g.:</p>\n\n<pre><code>Expected Value: \"123\"; Actual Value \"456\";\n</code></pre>\n\n<p>Searching the internet I stumbled upon this example here that provides the information that I need. However, I'm not able to get this log output in the console.</p>\n\n<pre><code>org.junit.ComparisonFailure: expected:&lt;gradle is gr[8]&gt; but was:&lt;gradle is gr[eat]&gt;\n    at org.junit.Assert.assertEquals(Assert.java:115)\n    at org.junit.Assert.assertEquals(Assert.java:144)\n    at com.mrhaki.gradle.SampleTest.sample(SampleTest.java:8)\n</code></pre>\n\n<p>What I tried so far is something like below, which didn't help.</p>\n\n<pre><code>-Djava.util.logging.ConsoleHandler.level=FINEST\n\nstatic {\n    Logger.getGlobal().setLevel(Level.FINEST);\n}\n</code></pre>\n"},{"tags":["java","aws-lambda","amazon-sns"],"answers":[{"tags":[],"owner":{"account_id":3509196,"reputation":16483,"user_id":2933977,"display_name":"stdunbar"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1644351111,"creation_date":1644350768,"answer_id":71040233,"question_id":71039880,"body_markdown":"You&#39;re using the ARN of the topic, not the ARN of the subscription.  Each subscription has an ARN too.  For example, if I create a topic named `generic-topic` the ARN for it looks like:\r\n\r\n    arn:aws:sns:us-west-2:1234567890:generic-topic\r\n\r\nThen, when I create a subscription (in this case an SQS queue) the *subscription* ARN looks like:\r\n\r\n    arn:aws:sns:us-west-2:1234567890:generic-topic:dc1580a7-1234-4b3d-12340-abcd12345678\r\n\r\nIf you&#39;re using the CLI you can see the subscriptions for a topic with something like:\r\n\r\n    aws sns list-subscriptions-by-topic --topic-arn arn:aws:sns:us-west-2:1234567890:generic-topic\r\n\r\nto get an output like:\r\n\r\n    {\r\n        &quot;Subscriptions&quot;: [\r\n            {\r\n                &quot;SubscriptionArn&quot;: &quot;arn:aws:sns:us-west-2:1234567890:generic-topic:dc1580a7-1234-4b3d-12340-abcd12345678&quot;,\r\n                &quot;Owner&quot;: &quot;1234567890&quot;,\r\n                &quot;Protocol&quot;: &quot;sqs&quot;,\r\n                &quot;Endpoint&quot;: &quot;arn:aws:sqs:us-west-2:1234567890:generic-queue&quot;,\r\n                &quot;TopicArn&quot;: &quot;arn:aws:sns:us-west-2:1234567890:generic-topic&quot;\r\n            }\r\n        ]\r\n    }\r\n\r\n","title":"Why snsClient.unsubscribe(request) did give me a error on snsClient.unsubscribe(request)?","body":"<p>You're using the ARN of the topic, not the ARN of the subscription.  Each subscription has an ARN too.  For example, if I create a topic named <code>generic-topic</code> the ARN for it looks like:</p>\n<pre><code>arn:aws:sns:us-west-2:1234567890:generic-topic\n</code></pre>\n<p>Then, when I create a subscription (in this case an SQS queue) the <em>subscription</em> ARN looks like:</p>\n<pre><code>arn:aws:sns:us-west-2:1234567890:generic-topic:dc1580a7-1234-4b3d-12340-abcd12345678\n</code></pre>\n<p>If you're using the CLI you can see the subscriptions for a topic with something like:</p>\n<pre><code>aws sns list-subscriptions-by-topic --topic-arn arn:aws:sns:us-west-2:1234567890:generic-topic\n</code></pre>\n<p>to get an output like:</p>\n<pre><code>{\n    &quot;Subscriptions&quot;: [\n        {\n            &quot;SubscriptionArn&quot;: &quot;arn:aws:sns:us-west-2:1234567890:generic-topic:dc1580a7-1234-4b3d-12340-abcd12345678&quot;,\n            &quot;Owner&quot;: &quot;1234567890&quot;,\n            &quot;Protocol&quot;: &quot;sqs&quot;,\n            &quot;Endpoint&quot;: &quot;arn:aws:sqs:us-west-2:1234567890:generic-queue&quot;,\n            &quot;TopicArn&quot;: &quot;arn:aws:sns:us-west-2:1234567890:generic-topic&quot;\n        }\n    ]\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":24144022,"reputation":11,"user_id":18109901,"display_name":"Andr&#233; Meira"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1644442991,"creation_date":1644442991,"answer_id":71057109,"question_id":71039880,"body_markdown":"To solve my problem I just get the subcription Id like this:\r\n\r\n\tpublic String retornaSubscriptionArnSNS(String arnSns)  {\r\n\t\t\r\n\t\tString resultado = &quot;&quot;;\r\n\t\t\r\n\t    try {\r\n\t        ListSubscriptionsRequest request = ListSubscriptionsRequest.builder()\r\n\t                .build();\r\n\t\r\n\t        ListSubscriptionsResponse result = snsClient.listSubscriptions(request);\r\n\t        \r\n            int intSize = result.subscriptions().size(); \r\n            \r\n            if (intSize &gt; 0) {\r\n            \t\r\n                for (int i = 0; i &lt; intSize-1; i++) {\r\n                \t\r\n                \tif (result.subscriptions().get(0).topicArn().equals(arnSns)) {\r\n                \t\t\r\n                \t\tresultado = result.subscriptions().get(i).subscriptionArn();\r\n                        System.out.println(&quot;I found my topic: &quot;+resultado);\r\n                        break; \r\n                \t}\r\n                \t\r\n                }  \r\n\r\n            \t\r\n            } else {\r\n                System.out.println(&quot;No one subscription found&quot;);\r\n            }\r\n\r\n            if (resultado == &quot;&quot;) {\r\n                System.out.println(&quot;Topic not found&quot;);\r\n            }\r\n            \r\n            \r\n\t    } catch (SnsException e) {\r\n\t\r\n\t        System.err.println(e.awsErrorDetails().errorMessage());\r\n\t        System.exit(1);\r\n\t    }\r\n\t\treturn resultado;\r\n\t    \r\n\t}\r\n\r\n\r\n   Then you can call this method like this:\r\n\r\n\t\tretornaSubscriptionArnSNS(&quot;arn:aws:sns:us-east-1:9999999999:myTopic&quot;);\r\n\r\nIf the topic exists with subscription , then will print:\r\n\r\nI found my topic: : arn:aws:sns:us-east-1:9999999999:myTopic:3e32b1c0-d3b7-40a6-8000-99220be49445\r\n\r\nElse: \r\n\r\nNo one subscription found\r\n\r\n\r\nI hope that code can be useful for you! \r\n","title":"Why snsClient.unsubscribe(request) did give me a error on snsClient.unsubscribe(request)?","body":"<p>To solve my problem I just get the subcription Id like this:</p>\n<pre><code>public String retornaSubscriptionArnSNS(String arnSns)  {\n    \n    String resultado = &quot;&quot;;\n    \n    try {\n        ListSubscriptionsRequest request = ListSubscriptionsRequest.builder()\n                .build();\n\n        ListSubscriptionsResponse result = snsClient.listSubscriptions(request);\n        \n        int intSize = result.subscriptions().size(); \n        \n        if (intSize &gt; 0) {\n            \n            for (int i = 0; i &lt; intSize-1; i++) {\n                \n                if (result.subscriptions().get(0).topicArn().equals(arnSns)) {\n                    \n                    resultado = result.subscriptions().get(i).subscriptionArn();\n                    System.out.println(&quot;I found my topic: &quot;+resultado);\n                    break; \n                }\n                \n            }  \n\n            \n        } else {\n            System.out.println(&quot;No one subscription found&quot;);\n        }\n\n        if (resultado == &quot;&quot;) {\n            System.out.println(&quot;Topic not found&quot;);\n        }\n        \n        \n    } catch (SnsException e) {\n\n        System.err.println(e.awsErrorDetails().errorMessage());\n        System.exit(1);\n    }\n    return resultado;\n    \n}\n</code></pre>\n<p>Then you can call this method like this:</p>\n<pre><code>    retornaSubscriptionArnSNS(&quot;arn:aws:sns:us-east-1:9999999999:myTopic&quot;);\n</code></pre>\n<p>If the topic exists with subscription , then will print:</p>\n<p>I found my topic: : arn:aws:sns:us-east-1:9999999999:myTopic:3e32b1c0-d3b7-40a6-8000-99220be49445</p>\n<p>Else:</p>\n<p>No one subscription found</p>\n<p>I hope that code can be useful for you!</p>\n"}],"owner":{"account_id":24144022,"reputation":11,"user_id":18109901,"display_name":"Andr&#233; Meira"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":225,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1644442991,"creation_date":1644348936,"question_id":71039880,"body_markdown":"I&#39;m trying to use:\r\n\r\n      UnsubscribeRequest request = UnsubscribeRequest.builder()\r\n                    .subscriptionArn(&quot;arn:aws:sns:us-east-1:9999999999:myTopic&quot;)\r\n                    .build();\r\n\r\n      UnsubscribeResponse result = snsClient.unsubscribe(request);\r\n\r\nBut I received an error:\r\n\r\nsoftware.amazon.awssdk.services.sns.model.InvalidParameterException: Invalid parameter: SubscriptionId (Service: Sns, Status Code: 400, Request ID: 08d4fa07-be89-5b3d-bd81-a07bcf09de7a, Extended Request ID: null)\r\n\tat software.amazon.awssdk.core.internal.http.CombinedResponseHandler.handleErrorResponse(CombinedResponseHandler.java:123) ~[sdk-core-2.17.46.jar:na]\r\n\r\n   Can you help me to solve this problem? \r\n \r\n","title":"Why snsClient.unsubscribe(request) did give me a error on snsClient.unsubscribe(request)?","body":"<p>I'm trying to use:</p>\n<pre><code>  UnsubscribeRequest request = UnsubscribeRequest.builder()\n                .subscriptionArn(&quot;arn:aws:sns:us-east-1:9999999999:myTopic&quot;)\n                .build();\n\n  UnsubscribeResponse result = snsClient.unsubscribe(request);\n</code></pre>\n<p>But I received an error:</p>\n<p>software.amazon.awssdk.services.sns.model.InvalidParameterException: Invalid parameter: SubscriptionId (Service: Sns, Status Code: 400, Request ID: 08d4fa07-be89-5b3d-bd81-a07bcf09de7a, Extended Request ID: null)\nat software.amazon.awssdk.core.internal.http.CombinedResponseHandler.handleErrorResponse(CombinedResponseHandler.java:123) ~[sdk-core-2.17.46.jar:na]</p>\n<p>Can you help me to solve this problem?</p>\n"},{"tags":["java","xml","kotlin","jackson","xml-deserialization"],"answers":[{"tags":[],"owner":{"account_id":2185225,"reputation":123,"user_id":1933771,"display_name":"Justin Grant"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1644442736,"creation_date":1644442736,"answer_id":71057070,"question_id":71046282,"body_markdown":"I&#39;m not as well versed in Kotlin, so I wrote up the Java that should be cover this.  Basically, you need to accept the ObjectNode in the mutator so that you can serialize it back to XML using a XML Mapper.\r\n\r\n```\r\npublic class TestMe3 {\r\n    public static void main(String[] args) throws IOException, XMLStreamException {\r\n        var inputString =\r\n                &quot;&lt;ItemList&gt;\\n&quot; +\r\n                        &quot;   &lt;Item ID=\\&quot;1\\&quot;&gt;\\n&quot; +\r\n                        &quot;       &lt;Description&gt;\\n&quot; +\r\n                        &quot;           &lt;p&gt;\\n&quot; +\r\n                        &quot;               &lt;span&gt;This is a HTML Description&lt;/span&gt;\\n&quot; +\r\n                        &quot;           &lt;/p&gt;\\n&quot; +\r\n                        &quot;           &lt;p&gt;\\n&quot; +\r\n                        &quot;               With undefined number of subnodes\\n&quot; +\r\n                        &quot;           &lt;/p&gt;\\n&quot; +\r\n                        &quot;       &lt;/Description&gt;\\n&quot; +\r\n                        &quot;   &lt;/Item&gt;\\n&quot; +\r\n                        &quot;   &lt;Item ID =\\&quot;2\\&quot;&gt;\\n&quot; +\r\n                        &quot;       &lt;Description&gt;\\n&quot; +\r\n                        &quot;           &lt;p&gt;\\n&quot; +\r\n                        &quot;               &lt;span&gt; This is a HTML Description&lt;/span&gt;\\n&quot; +\r\n                        &quot;           &lt;/p&gt;\\n&quot; +\r\n                        &quot;           &lt;ul&gt;\\n&quot; +\r\n                        &quot;               &lt;li&gt;Some Other Nodes&lt;/li&gt;\\n&quot; +\r\n                        &quot;           &lt;/ul&gt;\\n&quot; +\r\n                        &quot;       &lt;/Description&gt;\\n&quot; +\r\n                        &quot;   &lt;/Item&gt;\\n&quot; +\r\n                        &quot;&lt;/ItemList&gt;&quot;;\r\n        Reader reader = new StringReader(inputString);\r\n        XMLInputFactory factory = XMLInputFactory.newInstance(); // Or newFactory()\r\n        XMLStreamReader xmlReader = factory.createXMLStreamReader(reader);\r\n\r\n        XmlMapper xmlMapper = new XmlMapper();\r\n        xmlMapper.configure(DeserializationFeature.FAIL_ON_UNKNOWN_PROPERTIES, false);\r\n        ItemList returnObj = xmlMapper.readValue(xmlReader, ItemList.class);\r\n        System.out.println(returnObj.items.get(0).description);\r\n        System.out.println(returnObj.items.get(1).description);\r\n    }\r\n\r\n\r\n    @JacksonXmlRootElement(localName = &quot;ItemList&quot;)\r\n    static class ItemList {\r\n        @JacksonXmlProperty(localName = &quot;Item&quot;)\r\n        @JacksonXmlElementWrapper(useWrapping = false)\r\n        List&lt;Item&gt; items;\r\n    }\r\n\r\n    @JacksonXmlRootElement(localName = &quot;Item&quot;)\r\n    static class Item {\r\n        @JacksonXmlProperty(localName = &quot;ID&quot;, isAttribute = true)\r\n        String id;\r\n\r\n        @JacksonXmlElementWrapper(localName = &quot;Description&quot;)\r\n        String description;\r\n\r\n        public void setDescription(ObjectNode xml) throws JsonProcessingException {\r\n            XmlMapper xmlMapper = new XmlMapper();\r\n            description = xmlMapper.writer().withRootName(&quot;Description&quot;).writeValueAsString(xml);\r\n        }\r\n    }\r\n\r\n}\r\n```","title":"Jackson XML deserialize Sub-Nodes as Plain String","body":"<p>I'm not as well versed in Kotlin, so I wrote up the Java that should be cover this.  Basically, you need to accept the ObjectNode in the mutator so that you can serialize it back to XML using a XML Mapper.</p>\n<pre><code>public class TestMe3 {\n    public static void main(String[] args) throws IOException, XMLStreamException {\n        var inputString =\n                &quot;&lt;ItemList&gt;\\n&quot; +\n                        &quot;   &lt;Item ID=\\&quot;1\\&quot;&gt;\\n&quot; +\n                        &quot;       &lt;Description&gt;\\n&quot; +\n                        &quot;           &lt;p&gt;\\n&quot; +\n                        &quot;               &lt;span&gt;This is a HTML Description&lt;/span&gt;\\n&quot; +\n                        &quot;           &lt;/p&gt;\\n&quot; +\n                        &quot;           &lt;p&gt;\\n&quot; +\n                        &quot;               With undefined number of subnodes\\n&quot; +\n                        &quot;           &lt;/p&gt;\\n&quot; +\n                        &quot;       &lt;/Description&gt;\\n&quot; +\n                        &quot;   &lt;/Item&gt;\\n&quot; +\n                        &quot;   &lt;Item ID =\\&quot;2\\&quot;&gt;\\n&quot; +\n                        &quot;       &lt;Description&gt;\\n&quot; +\n                        &quot;           &lt;p&gt;\\n&quot; +\n                        &quot;               &lt;span&gt; This is a HTML Description&lt;/span&gt;\\n&quot; +\n                        &quot;           &lt;/p&gt;\\n&quot; +\n                        &quot;           &lt;ul&gt;\\n&quot; +\n                        &quot;               &lt;li&gt;Some Other Nodes&lt;/li&gt;\\n&quot; +\n                        &quot;           &lt;/ul&gt;\\n&quot; +\n                        &quot;       &lt;/Description&gt;\\n&quot; +\n                        &quot;   &lt;/Item&gt;\\n&quot; +\n                        &quot;&lt;/ItemList&gt;&quot;;\n        Reader reader = new StringReader(inputString);\n        XMLInputFactory factory = XMLInputFactory.newInstance(); // Or newFactory()\n        XMLStreamReader xmlReader = factory.createXMLStreamReader(reader);\n\n        XmlMapper xmlMapper = new XmlMapper();\n        xmlMapper.configure(DeserializationFeature.FAIL_ON_UNKNOWN_PROPERTIES, false);\n        ItemList returnObj = xmlMapper.readValue(xmlReader, ItemList.class);\n        System.out.println(returnObj.items.get(0).description);\n        System.out.println(returnObj.items.get(1).description);\n    }\n\n\n    @JacksonXmlRootElement(localName = &quot;ItemList&quot;)\n    static class ItemList {\n        @JacksonXmlProperty(localName = &quot;Item&quot;)\n        @JacksonXmlElementWrapper(useWrapping = false)\n        List&lt;Item&gt; items;\n    }\n\n    @JacksonXmlRootElement(localName = &quot;Item&quot;)\n    static class Item {\n        @JacksonXmlProperty(localName = &quot;ID&quot;, isAttribute = true)\n        String id;\n\n        @JacksonXmlElementWrapper(localName = &quot;Description&quot;)\n        String description;\n\n        public void setDescription(ObjectNode xml) throws JsonProcessingException {\n            XmlMapper xmlMapper = new XmlMapper();\n            description = xmlMapper.writer().withRootName(&quot;Description&quot;).writeValueAsString(xml);\n        }\n    }\n\n}\n</code></pre>\n"}],"owner":{"account_id":9240273,"reputation":51,"user_id":6863763,"display_name":"Moritz Gro&#223;mann"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1702,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":1,"score":3,"last_activity_date":1644442736,"creation_date":1644395714,"question_id":71046282,"body_markdown":"I have an XML Sttructure and want to Deserialize this to an Object with a Property Description as a Plain HTML-String\r\n```xml\r\n&lt;ItemList&gt;\r\n  &lt;Item ID=&quot;1&quot;&gt;\r\n    &lt;Description&gt;\r\n      &lt;p&gt;\r\n        &lt;span&gt;This is a HTML Description&lt;/span&gt;\r\n      &lt;/p&gt;\r\n      &lt;p&gt;\r\n        With undefined number of subnodes\r\n      &lt;/p&gt;\r\n    &lt;/Description&gt;\r\n  &lt;/Item&gt;\r\n  &lt;Item ID=&quot;2&quot;&gt;\r\n    &lt;Description&gt;\r\n      &lt;p&gt;\r\n        &lt;span&gt;This is a HTML Description&lt;/span&gt;\r\n      &lt;/p&gt;\r\n      &lt;ul&gt;\r\n        &lt;li&gt;Some Other Nodes&lt;/li&gt;\r\n      &lt;/ul&gt;\r\n    &lt;/Description&gt;\r\n  &lt;/Item&gt;\r\n&lt;/ItemList&gt;\r\n```\r\n\r\nThe description tag contains only HTML text and i don&#39;t want to define classes for all possible HTML-Tags. Is there a solution, for example with a custom Deserializer, to parse the Tags inside Description as Plain Html-Text?\r\n\r\nMy classes look like this\r\n\r\n```kotlin\r\ndata class ItemList(\r\n  @JacksonXmlProperty(localName = &quot;Item&quot;)\r\n  @JacksonXmlElementWrapper(useWrapping = false)\r\n  val items: List&lt;Item&gt; = listOf()\r\n)\r\n\r\ndata class Item(\r\n  @JacksonXmlProperty(localName = &quot;ID&quot;, isAttribute = true)\r\n  val id: String? = null,\r\n\r\n\r\n  @JacksonXmlProperty(localName = &quot;Description&quot;)\r\n  val description: HtmlText? = null\r\n)\r\n\r\ndata class HtmlText(\r\n  val text: String? // This should be the Plain HTML-String\r\n)\r\n```\r\n\r\n\r\n```kotlin\r\nprivate val xmlMapper = XmlMapper()\r\n    .registerKotlinModule()\r\n    .configure(DeserializationFeature.FAIL_ON_UNKNOWN_PROPERTIES, false)\r\n\r\nval itemlist = xmlMapper.readValue&lt;ItemList&gt;(stream) // stream is the XML file described above\r\n```","title":"Jackson XML deserialize Sub-Nodes as Plain String","body":"<p>I have an XML Sttructure and want to Deserialize this to an Object with a Property Description as a Plain HTML-String</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;ItemList&gt;\n  &lt;Item ID=&quot;1&quot;&gt;\n    &lt;Description&gt;\n      &lt;p&gt;\n        &lt;span&gt;This is a HTML Description&lt;/span&gt;\n      &lt;/p&gt;\n      &lt;p&gt;\n        With undefined number of subnodes\n      &lt;/p&gt;\n    &lt;/Description&gt;\n  &lt;/Item&gt;\n  &lt;Item ID=&quot;2&quot;&gt;\n    &lt;Description&gt;\n      &lt;p&gt;\n        &lt;span&gt;This is a HTML Description&lt;/span&gt;\n      &lt;/p&gt;\n      &lt;ul&gt;\n        &lt;li&gt;Some Other Nodes&lt;/li&gt;\n      &lt;/ul&gt;\n    &lt;/Description&gt;\n  &lt;/Item&gt;\n&lt;/ItemList&gt;\n</code></pre>\n<p>The description tag contains only HTML text and i don't want to define classes for all possible HTML-Tags. Is there a solution, for example with a custom Deserializer, to parse the Tags inside Description as Plain Html-Text?</p>\n<p>My classes look like this</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>data class ItemList(\n  @JacksonXmlProperty(localName = &quot;Item&quot;)\n  @JacksonXmlElementWrapper(useWrapping = false)\n  val items: List&lt;Item&gt; = listOf()\n)\n\ndata class Item(\n  @JacksonXmlProperty(localName = &quot;ID&quot;, isAttribute = true)\n  val id: String? = null,\n\n\n  @JacksonXmlProperty(localName = &quot;Description&quot;)\n  val description: HtmlText? = null\n)\n\ndata class HtmlText(\n  val text: String? // This should be the Plain HTML-String\n)\n</code></pre>\n<pre class=\"lang-kotlin prettyprint-override\"><code>private val xmlMapper = XmlMapper()\n    .registerKotlinModule()\n    .configure(DeserializationFeature.FAIL_ON_UNKNOWN_PROPERTIES, false)\n\nval itemlist = xmlMapper.readValue&lt;ItemList&gt;(stream) // stream is the XML file described above\n</code></pre>\n"},{"tags":["java","spring","spring-boot","redis","spring-cache"],"answers":[{"tags":[],"owner":{"account_id":4133097,"reputation":7506,"user_id":3390417,"display_name":"John Blum"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1644442546,"creation_date":1644441995,"answer_id":71056934,"question_id":71052483,"body_markdown":"The core *Spring Framework&#39;s* [Cache Abstraction][1] is much more than a collection of annotations for caching, and specifically, *Look-Aside*, or *Cache-Aside*, caching as it&#39;s commonly referred. The *Cache-Aside* pattern is the pattern of caching on which Spring&#39;s Cache Abstraction is based.\r\n\r\nSpring&#39;s Cache Abstraction is a general purpose caching framework (and facade) with an API allowing users to plugin different &quot;*caching provider*&quot; implementations (e.g. *Redis*, or [Apache Geode][2] using the following [bits][3]). For all intents and purposes, it is a proper *Service Provider Interface* (SPI) with implementations adhering to the interfaces defined by the SPI.\r\n\r\nThe **2 main interfaces** in Spring&#39;s Cache Abstraction include the [`CacheManager`][4] and [`Cache`][5].\r\n\r\nThese are the primary interfaces and APIs that must be implemented when adding support for a new *caching provider* that can be used to apply caching to Spring managed application services (components, or beans declared in the Spring container). Under-the-hood, Spring&#39;s Cache Abstraction is implemented with [Spring AOP][6].\r\n\r\nYou can either use the APIs from the `CacheManager` and `Cache` interfaces directly in your Spring managed application components (beans), or you can more commonly use the caching annotations (e.g. `@Cacheable`), which are less invasive, and easier to disable, if applicable (e.g. simply remove the `@EnableCaching` annotation, or in *Spring Boot&#39;s* case, set the `spring.cache.type` property to `none`; see [here][7]).\r\n\r\nThe `Cache` interface ([Javadoc][5]) only provides basic and essential data access operations (e.g. querying) that are relevant for caching. It does **not** provide &quot;low-level&quot; data access operations that are possibly provided by the underlying *caching provider* (e.g. Redis).\r\n\r\nThis is primarily due to the fact that not all *caching providers* are equal. Some caching providers far exceed others in terms of functionality and capabilities, functionality and capabilities that fall outside of the &quot;general concern of caching&quot;. In fact, things like querying or distributed compute, replication, eviction/expiration policies (hence [this][8]), consistency guarantees, etc, all vary from 1 caching provider to the next.  The *caching provider* is often chosen based on your application use case and requirements.\r\n\r\nHowever, Spring does not prevent you from getting access to the low-level functionality if you need it, even from the Cache Abstraction.\r\n\r\nFor instance, the [`Cache.getNativeCache()`][9] method returns the underlying implementation of the `Cache` interface for your *caching provider* implementation.  In Spring for Apache Geode, that is a cache [`Region`][10].  In Spring for Redis, that is a `HASH`, I believe (?).\r\n\r\nRegarding the &quot;*limitations*&quot;, as you say, for example, &quot;*Caching a collection of POJO...*&quot;, this is not entirely true.\r\n\r\nIndeed Spring&#39;s Cache Abstraction is intentionally and deliberately designed for general purpose caching, which involves &quot;lookup&quot;, not querying or handling complex object hierarchies, or even arrays/collections of objects.\r\n\r\nWhile Spring does not handle these type of concerns out of the box, it does not mean they are not possible. Spring is designed to the [Open/Closed principle][11], being &quot;closed&quot; for modification, but &quot;open&quot; to extension.\r\n\r\nIt is possible to extend Spring&#39;s Cache Abstraction to, for example, cache the individual elements in an array or *Collection* (e.g. `List`) returned by a `@Cacheable` service method.\r\n\r\nSee my answer (2nd, or bottom one) to this *StackOverflow* [question][12]. Specifically, see this SO [post][13].\r\n\r\nThe thing is, while Spring may not have an immediate answer out-of-the-box, there is usually always an answer, but might involve a bit of work (code).\r\n\r\nIf you understand the underlying design principles, then you can begin to plugin and customize all aspects of the caching behavior as needed, such as how `Caches` are [resolved][14] (from a provider), [key generation][15], or [conditional caching][16]. Spring provides &quot;default&quot; behavior (for [example][17]), but nearly every aspect can be customized in some way.\r\n\r\nStill, somethings will be very provider specific (like &quot;Expiration&quot;) and so you are not completely void from having to understand your underlying provider.  No technology can completely shield from having to understand the underlying infrastructure, for example not even JPA for databases, especially when you need to create indexes.\r\n\r\nHope this makes sense.\r\n\r\n\r\n  [1]: https://docs.spring.io/spring-framework/docs/current/reference/html/integration.html#cache\r\n  [2]: https://geode.apache.org/\r\n  [3]: https://docs.spring.io/spring-boot-data-geode-build/current/reference/html5/#geode-caching-provider\r\n  [4]: https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/cache/CacheManager.html\r\n  [5]: https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/cache/Cache.html\r\n  [6]: https://docs.spring.io/spring-framework/docs/current/reference/html/core.html#aop\r\n  [7]: https://docs.spring.io/spring-boot/docs/current/reference/html/io.html#io.caching.provider.none\r\n  [8]: https://docs.spring.io/spring-framework/docs/current/reference/html/integration.html#cache-specific-config\r\n  [9]: https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/cache/Cache.html#getNativeCache--\r\n  [10]: https://geode.apache.org/releases/latest/javadoc/org/apache/geode/cache/Region.html\r\n  [11]: https://en.wikipedia.org/wiki/Open%E2%80%93closed_principle\r\n  [12]: https://stackoverflow.com/questions/67784020/how-to-cache-a-listobject-in-java-such-that-the-elements-in-list-are-cached-as\r\n  [13]: https://stackoverflow.com/questions/44529029/spring-cache-with-collection-of-items-entities\r\n  [14]: https://docs.spring.io/spring-framework/docs/current/reference/html/integration.html#cache-annotations-cacheable-cache-resolver\r\n  [15]: https://docs.spring.io/spring-framework/docs/current/reference/html/integration.html#cache-annotations-cacheable-key\r\n  [16]: https://docs.spring.io/spring-framework/docs/current/reference/html/integration.html#cache-annotations-cacheable-condition\r\n  [17]: https://docs.spring.io/spring-framework/docs/current/reference/html/integration.html#cache-annotations-cacheable-default-key","title":"Spring with Redis: cache manager, resolver and key generator","body":"<p>The core <em>Spring Framework's</em> <a href=\"https://docs.spring.io/spring-framework/docs/current/reference/html/integration.html#cache\" rel=\"nofollow noreferrer\">Cache Abstraction</a> is much more than a collection of annotations for caching, and specifically, <em>Look-Aside</em>, or <em>Cache-Aside</em>, caching as it's commonly referred. The <em>Cache-Aside</em> pattern is the pattern of caching on which Spring's Cache Abstraction is based.</p>\n<p>Spring's Cache Abstraction is a general purpose caching framework (and facade) with an API allowing users to plugin different &quot;<em>caching provider</em>&quot; implementations (e.g. <em>Redis</em>, or <a href=\"https://geode.apache.org/\" rel=\"nofollow noreferrer\">Apache Geode</a> using the following <a href=\"https://docs.spring.io/spring-boot-data-geode-build/current/reference/html5/#geode-caching-provider\" rel=\"nofollow noreferrer\">bits</a>). For all intents and purposes, it is a proper <em>Service Provider Interface</em> (SPI) with implementations adhering to the interfaces defined by the SPI.</p>\n<p>The <strong>2 main interfaces</strong> in Spring's Cache Abstraction include the <a href=\"https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/cache/CacheManager.html\" rel=\"nofollow noreferrer\"><code>CacheManager</code></a> and <a href=\"https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/cache/Cache.html\" rel=\"nofollow noreferrer\"><code>Cache</code></a>.</p>\n<p>These are the primary interfaces and APIs that must be implemented when adding support for a new <em>caching provider</em> that can be used to apply caching to Spring managed application services (components, or beans declared in the Spring container). Under-the-hood, Spring's Cache Abstraction is implemented with <a href=\"https://docs.spring.io/spring-framework/docs/current/reference/html/core.html#aop\" rel=\"nofollow noreferrer\">Spring AOP</a>.</p>\n<p>You can either use the APIs from the <code>CacheManager</code> and <code>Cache</code> interfaces directly in your Spring managed application components (beans), or you can more commonly use the caching annotations (e.g. <code>@Cacheable</code>), which are less invasive, and easier to disable, if applicable (e.g. simply remove the <code>@EnableCaching</code> annotation, or in <em>Spring Boot's</em> case, set the <code>spring.cache.type</code> property to <code>none</code>; see <a href=\"https://docs.spring.io/spring-boot/docs/current/reference/html/io.html#io.caching.provider.none\" rel=\"nofollow noreferrer\">here</a>).</p>\n<p>The <code>Cache</code> interface (<a href=\"https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/cache/Cache.html\" rel=\"nofollow noreferrer\">Javadoc</a>) only provides basic and essential data access operations (e.g. querying) that are relevant for caching. It does <strong>not</strong> provide &quot;low-level&quot; data access operations that are possibly provided by the underlying <em>caching provider</em> (e.g. Redis).</p>\n<p>This is primarily due to the fact that not all <em>caching providers</em> are equal. Some caching providers far exceed others in terms of functionality and capabilities, functionality and capabilities that fall outside of the &quot;general concern of caching&quot;. In fact, things like querying or distributed compute, replication, eviction/expiration policies (hence <a href=\"https://docs.spring.io/spring-framework/docs/current/reference/html/integration.html#cache-specific-config\" rel=\"nofollow noreferrer\">this</a>), consistency guarantees, etc, all vary from 1 caching provider to the next.  The <em>caching provider</em> is often chosen based on your application use case and requirements.</p>\n<p>However, Spring does not prevent you from getting access to the low-level functionality if you need it, even from the Cache Abstraction.</p>\n<p>For instance, the <a href=\"https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/cache/Cache.html#getNativeCache--\" rel=\"nofollow noreferrer\"><code>Cache.getNativeCache()</code></a> method returns the underlying implementation of the <code>Cache</code> interface for your <em>caching provider</em> implementation.  In Spring for Apache Geode, that is a cache <a href=\"https://geode.apache.org/releases/latest/javadoc/org/apache/geode/cache/Region.html\" rel=\"nofollow noreferrer\"><code>Region</code></a>.  In Spring for Redis, that is a <code>HASH</code>, I believe (?).</p>\n<p>Regarding the &quot;<em>limitations</em>&quot;, as you say, for example, &quot;<em>Caching a collection of POJO...</em>&quot;, this is not entirely true.</p>\n<p>Indeed Spring's Cache Abstraction is intentionally and deliberately designed for general purpose caching, which involves &quot;lookup&quot;, not querying or handling complex object hierarchies, or even arrays/collections of objects.</p>\n<p>While Spring does not handle these type of concerns out of the box, it does not mean they are not possible. Spring is designed to the <a href=\"https://en.wikipedia.org/wiki/Open%E2%80%93closed_principle\" rel=\"nofollow noreferrer\">Open/Closed principle</a>, being &quot;closed&quot; for modification, but &quot;open&quot; to extension.</p>\n<p>It is possible to extend Spring's Cache Abstraction to, for example, cache the individual elements in an array or <em>Collection</em> (e.g. <code>List</code>) returned by a <code>@Cacheable</code> service method.</p>\n<p>See my answer (2nd, or bottom one) to this <em>StackOverflow</em> <a href=\"https://stackoverflow.com/questions/67784020/how-to-cache-a-listobject-in-java-such-that-the-elements-in-list-are-cached-as\">question</a>. Specifically, see this SO <a href=\"https://stackoverflow.com/questions/44529029/spring-cache-with-collection-of-items-entities\">post</a>.</p>\n<p>The thing is, while Spring may not have an immediate answer out-of-the-box, there is usually always an answer, but might involve a bit of work (code).</p>\n<p>If you understand the underlying design principles, then you can begin to plugin and customize all aspects of the caching behavior as needed, such as how <code>Caches</code> are <a href=\"https://docs.spring.io/spring-framework/docs/current/reference/html/integration.html#cache-annotations-cacheable-cache-resolver\" rel=\"nofollow noreferrer\">resolved</a> (from a provider), <a href=\"https://docs.spring.io/spring-framework/docs/current/reference/html/integration.html#cache-annotations-cacheable-key\" rel=\"nofollow noreferrer\">key generation</a>, or <a href=\"https://docs.spring.io/spring-framework/docs/current/reference/html/integration.html#cache-annotations-cacheable-condition\" rel=\"nofollow noreferrer\">conditional caching</a>. Spring provides &quot;default&quot; behavior (for <a href=\"https://docs.spring.io/spring-framework/docs/current/reference/html/integration.html#cache-annotations-cacheable-default-key\" rel=\"nofollow noreferrer\">example</a>), but nearly every aspect can be customized in some way.</p>\n<p>Still, somethings will be very provider specific (like &quot;Expiration&quot;) and so you are not completely void from having to understand your underlying provider.  No technology can completely shield from having to understand the underlying infrastructure, for example not even JPA for databases, especially when you need to create indexes.</p>\n<p>Hope this makes sense.</p>\n"}],"owner":{"account_id":2730377,"reputation":1843,"user_id":2354302,"accept_rate":65,"display_name":"user2354302"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1501,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1644442546,"creation_date":1644421044,"question_id":71052483,"body_markdown":"Spring provides a caching abstraction package `spring-boot-starter-cache` which basically provides method level annotations to cache data with `@Cacheable`, `@Cacheput` and other annotations. I feel there are limitations to this: Caching a collection of POJO against a property (for example: `Person.getId()` as the key from `List&lt;Person&gt;` as a return type). And the other limitation is searching. How do I query and search data in the cache provider?\r\n\r\nI&#39;m assuming I&#39;d need to use `CacheManager`, `CacheResolver` and `KeyGenerator` along with `RedisCacheManager` to cache a collection of objects and also to lookup caches. So far the documentation hasn&#39;t been helpful at all. And most of the articles don&#39;t even touch up on these items. Can someone please explain how to use these or direct me towards some documentation. ","title":"Spring with Redis: cache manager, resolver and key generator","body":"<p>Spring provides a caching abstraction package <code>spring-boot-starter-cache</code> which basically provides method level annotations to cache data with <code>@Cacheable</code>, <code>@Cacheput</code> and other annotations. I feel there are limitations to this: Caching a collection of POJO against a property (for example: <code>Person.getId()</code> as the key from <code>List&lt;Person&gt;</code> as a return type). And the other limitation is searching. How do I query and search data in the cache provider?</p>\n<p>I'm assuming I'd need to use <code>CacheManager</code>, <code>CacheResolver</code> and <code>KeyGenerator</code> along with <code>RedisCacheManager</code> to cache a collection of objects and also to lookup caches. So far the documentation hasn't been helpful at all. And most of the articles don't even touch up on these items. Can someone please explain how to use these or direct me towards some documentation.</p>\n"},{"tags":["java","hibernate"],"comments":[{"owner":{"account_id":4339560,"reputation":1742,"user_id":3543182,"accept_rate":25,"display_name":"M. Shaw"},"score":0,"creation_date":1441099253,"post_id":32327789,"comment_id":52530124,"body_markdown":"Are you removing objects from the HashMap somewhere?","body":"Are you removing objects from the HashMap somewhere?"},{"owner":{"account_id":4695899,"reputation":68,"user_id":3800776,"display_name":"Stanley Paul"},"score":1,"creation_date":1441099530,"post_id":32327789,"comment_id":52530302,"body_markdown":"No I am just calling next() of the `org.hibernate.internal.util.collections.LazyIterator` provided by the method and it is throwing the exception.","body":"No I am just calling next() of the <code>org.hibernate.internal.util.collections.LazyIterator</code> provided by the method and it is throwing the exception."}],"answers":[{"tags":[],"owner":{"account_id":6739555,"reputation":2184,"user_id":5193194,"display_name":"karim mohsen"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1441100298,"creation_date":1441100298,"answer_id":32328239,"question_id":32327789,"body_markdown":"If it&#39;s synchronization issue try using a `ConcurrentHashMap` instead of a plain HashMap\r\n\r\n\r\nSee also [this][1] answer i think it might help\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/602636/concurrentmodificationexception-and-a-hashmap","title":"Iterator provided by the Hibernate Interceptor post flush method throws ConcurrentModificationException","body":"<p>If it's synchronization issue try using a <code>ConcurrentHashMap</code> instead of a plain HashMap</p>\n\n<p>See also <a href=\"https://stackoverflow.com/questions/602636/concurrentmodificationexception-and-a-hashmap\">this</a> answer i think it might help</p>\n"},{"tags":[],"owner":{"account_id":6892763,"reputation":24,"user_id":5295641,"display_name":"NzoP"},"down_vote_count":1,"up_vote_count":0,"is_accepted":true,"score":-1,"last_activity_date":1441265700,"creation_date":1441265700,"answer_id":32369586,"question_id":32327789,"body_markdown":"Copying iterator into a list via org.apache.commons.collections.IteratorUtils before iterating worked for me :\r\n     \r\n     @Override\r\n     public void preFlush(Iterator entities) {\r\n        List list= IteratorUtils.toList(entities); \r\n        for(Object o : list){...}\r\n\r\n     }\r\nHowever i can&#39;t explain why it is working when using IteratorUtils...","title":"Iterator provided by the Hibernate Interceptor post flush method throws ConcurrentModificationException","body":"<p>Copying iterator into a list via org.apache.commons.collections.IteratorUtils before iterating worked for me :</p>\n\n<pre><code> @Override\n public void preFlush(Iterator entities) {\n    List list= IteratorUtils.toList(entities); \n    for(Object o : list){...}\n\n }\n</code></pre>\n\n<p>However i can't explain why it is working when using IteratorUtils...</p>\n"},{"tags":[],"owner":{"account_id":318313,"reputation":4457,"user_id":635473,"accept_rate":55,"display_name":"Nik Kashi"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1455965752,"creation_date":1455965752,"answer_id":35522227,"question_id":32327789,"body_markdown":"Manually copy it in a `List`\r\n\r\n        @Override\r\n            public void postFlush(Iterator entities) {\r\n                super.postFlush(entities);\r\n                List&lt;Object&gt; objects = new ArrayList&lt;&gt;();\r\n                while (entities.hasNext()) {\r\n                    objects.add(entities.next());\r\n                }\r\n    .\r\n    .\r\n    .\r\n\r\nnow you can use `objects` list","title":"Iterator provided by the Hibernate Interceptor post flush method throws ConcurrentModificationException","body":"<p>Manually copy it in a <code>List</code></p>\n\n<pre><code>    @Override\n        public void postFlush(Iterator entities) {\n            super.postFlush(entities);\n            List&lt;Object&gt; objects = new ArrayList&lt;&gt;();\n            while (entities.hasNext()) {\n                objects.add(entities.next());\n            }\n.\n.\n.\n</code></pre>\n\n<p>now you can use <code>objects</code> list</p>\n"},{"tags":[],"owner":{"account_id":24208558,"reputation":1,"user_id":18165415,"display_name":"Ken Larson"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1644442354,"creation_date":1644442354,"answer_id":71057005,"question_id":32327789,"body_markdown":"If you look at the implementation of IteratorUtils.toList, it just does:\r\n\r\n        List list = new ArrayList(estimatedSize);\r\n        while (iterator.hasNext()) {\r\n            list.add(iterator.next());\r\n        }\r\n\r\nwhich isn&#39;t any faster than doing it that way, except... perhaps by allocating the list with an estimated size of 10, it is faster because it isn&#39;t necessarily having to re-allocate...","title":"Iterator provided by the Hibernate Interceptor post flush method throws ConcurrentModificationException","body":"<p>If you look at the implementation of IteratorUtils.toList, it just does:</p>\n<pre><code>    List list = new ArrayList(estimatedSize);\n    while (iterator.hasNext()) {\n        list.add(iterator.next());\n    }\n</code></pre>\n<p>which isn't any faster than doing it that way, except... perhaps by allocating the list with an estimated size of 10, it is faster because it isn't necessarily having to re-allocate...</p>\n"}],"owner":{"account_id":4695899,"reputation":68,"user_id":3800776,"display_name":"Stanley Paul"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1694,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":32369586,"answer_count":4,"score":1,"last_activity_date":1644442354,"creation_date":1441098984,"question_id":32327789,"body_markdown":"I have extended the `EmptyInterceptor` provided by hibernate to perform some logic on post flush. The overwritten post flush method is provided with an iterator. When I tried to iterate, I received `ConcurrentModificationException`. \r\n\r\nBelow is my code snippet,\r\n\r\n    @Override\r\n    public void postFlush(Iterator entities) throws CallbackException\r\n    {\r\n        while (entities.hasNext())\r\n        {\r\n            Object entity;\r\n\r\n            try\r\n            {\r\n                entity = entities.next();\r\n            }\r\n            catch(ConcurrentModificationException e)\r\n            {\r\n                // I get concurrent modification exception while iterating.\r\n\r\n                return;\r\n            }\r\n\r\n        }\r\n    }\r\n\r\nI am getting the below exception,\r\n\r\n&gt; java.util.ConcurrentModificationException\r\n\tat java.util.HashMap$HashIterator.nextEntry(HashMap.java:922)\r\n\tat java.util.HashMap$ValueIterator.next(HashMap.java:950)\r\n\tat org.hibernate.internal.util.collections.LazyIterator.next(LazyIterator.java:51)\r\n\tat com.mycompany.MyInterceptor.postFlush(MyInterceptor.java:55)\r\n\tat org.hibernate.event.internal.AbstractFlushingEventListener.postPostFlush(AbstractFlushingEventListener.java:401)\r\n\tat org.hibernate.event.internal.DefaultAutoFlushEventListener.onAutoFlush(DefaultAutoFlushEventListener.java:70)\r\n\tat org.hibernate.internal.SessionImpl.autoFlushIfRequired(SessionImpl.java:1130)\r\n\tat org.hibernate.internal.SessionImpl.list(SessionImpl.java:1580)\r\n\tat org.hibernate.internal.CriteriaImpl.list(CriteriaImpl.java:374)\r\n\r\nFrom [Hibernate Forum][1] we can understand that the iterator passed to the postFlush() method is not thread safe causing ConcurrentModificationException. \r\n\r\nSuggestions and solution to avoid the exception is appreciated.\r\n\r\n\r\n  [1]: https://forum.hibernate.org/viewtopic.php?f=1&amp;t=966619&amp;view=next","title":"Iterator provided by the Hibernate Interceptor post flush method throws ConcurrentModificationException","body":"<p>I have extended the <code>EmptyInterceptor</code> provided by hibernate to perform some logic on post flush. The overwritten post flush method is provided with an iterator. When I tried to iterate, I received <code>ConcurrentModificationException</code>. </p>\n\n<p>Below is my code snippet,</p>\n\n<pre><code>@Override\npublic void postFlush(Iterator entities) throws CallbackException\n{\n    while (entities.hasNext())\n    {\n        Object entity;\n\n        try\n        {\n            entity = entities.next();\n        }\n        catch(ConcurrentModificationException e)\n        {\n            // I get concurrent modification exception while iterating.\n\n            return;\n        }\n\n    }\n}\n</code></pre>\n\n<p>I am getting the below exception,</p>\n\n<blockquote>\n  <p>java.util.ConcurrentModificationException\n      at java.util.HashMap$HashIterator.nextEntry(HashMap.java:922)\n      at java.util.HashMap$ValueIterator.next(HashMap.java:950)\n      at org.hibernate.internal.util.collections.LazyIterator.next(LazyIterator.java:51)\n      at com.mycompany.MyInterceptor.postFlush(MyInterceptor.java:55)\n      at org.hibernate.event.internal.AbstractFlushingEventListener.postPostFlush(AbstractFlushingEventListener.java:401)\n      at org.hibernate.event.internal.DefaultAutoFlushEventListener.onAutoFlush(DefaultAutoFlushEventListener.java:70)\n      at org.hibernate.internal.SessionImpl.autoFlushIfRequired(SessionImpl.java:1130)\n      at org.hibernate.internal.SessionImpl.list(SessionImpl.java:1580)\n      at org.hibernate.internal.CriteriaImpl.list(CriteriaImpl.java:374)</p>\n</blockquote>\n\n<p>From <a href=\"https://forum.hibernate.org/viewtopic.php?f=1&amp;t=966619&amp;view=next\" rel=\"nofollow\">Hibernate Forum</a> we can understand that the iterator passed to the postFlush() method is not thread safe causing ConcurrentModificationException. </p>\n\n<p>Suggestions and solution to avoid the exception is appreciated.</p>\n"},{"tags":["java","html","webclient"],"answers":[{"tags":[],"owner":{"account_id":7171362,"reputation":66,"user_id":5478702,"display_name":"Jose"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1644442193,"creation_date":1644442193,"answer_id":71056976,"question_id":71054486,"body_markdown":"There is no element with ID tsf anymore. Best way to check it out is to go to the site and use Web Developer Tools of your browser (f12) mostly on every browsers. You can see the whole HTML document from there.","title":"page.getHtmlElementById(&quot;tsf&quot;) wont work: com.gargoylesoftware.htmlunit.ElementNotFoundException:tsf","body":"<p>There is no element with ID tsf anymore. Best way to check it out is to go to the site and use Web Developer Tools of your browser (f12) mostly on every browsers. You can see the whole HTML document from there.</p>\n"}],"owner":{"account_id":17143579,"reputation":55,"user_id":12407018,"display_name":"Ollowain"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":70,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1644442193,"creation_date":1644429551,"question_id":71054486,"body_markdown":"I am trying to run the tutorial on [here](https://bridgei2i.github.io/java/crawler/2015/04/20/Extracting-Data-from-Webpages-in-Java-with-help-of-HtmlUnit.html). The code looks like this:\r\n```java\r\npublic class Test {\r\n\r\n\tpublic static void main(String[] args) throws FailingHttpStatusCodeException, MalformedURLException, IOException {\r\n\t\tWebClient client = new WebClient(BrowserVersion.FIREFOX);\r\n\t\tHtmlPage page = client.getPage(&quot;https://google.com/&quot;);\r\n\t\t\r\n\t\t\r\n\t\t// Getting Form from google home page. tsf is the form name \r\n\t\tHtmlForm form = page.getHtmlElementById(&quot;tsf&quot;); // Error occurs here\r\n\t\t\r\n\t\tform.getInputByName(&quot;q&quot;).setValueAttribute(&quot;test&quot;);\r\n\t\r\n\t\t// Creating a virtual submit button\r\n\t\tHtmlButton submitButton = (HtmlButton)page.createElement(&quot;button&quot;);\r\n\t\tsubmitButton.setAttribute(&quot;type&quot;, &quot;submit&quot;);\r\n\t\tform.appendChild(submitButton);\r\n\t\t\r\n\t\t  // Submitting the form and getting the result \r\n\t\tHtmlPage newPage = submitButton.click();\r\n\t\r\n\t\t  // Getting the result as text\r\n\r\n\t\tString text = page.asNormalizedText();\r\n\t\tSystem.out.println(text);\r\n\t}\r\n}\r\n```\r\nBut I am getting error message:\r\n```\r\nException in thread &quot;main&quot; com.gargoylesoftware.htmlunit.ElementNotFoundException: elementName=[*] attributeName=[id] attributeValue=[tsf]\r\n\tat com.gargoylesoftware.htmlunit.html.HtmlPage.getHtmlElementById(HtmlPage.java:1670)\r\n\tat Test.main(Test.java:20)\r\n```\r\n\r\nSince this tutorial is relatively old, the ID `tsf` might be outdated. However, if I check the form name from the google home page, I cant figure it out. Maybe I dont understand the meaning of the whole HtmlForm object. (I am completely new to this topic)","title":"page.getHtmlElementById(&quot;tsf&quot;) wont work: com.gargoylesoftware.htmlunit.ElementNotFoundException:tsf","body":"<p>I am trying to run the tutorial on <a href=\"https://bridgei2i.github.io/java/crawler/2015/04/20/Extracting-Data-from-Webpages-in-Java-with-help-of-HtmlUnit.html\" rel=\"nofollow noreferrer\">here</a>. The code looks like this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class Test {\n\n    public static void main(String[] args) throws FailingHttpStatusCodeException, MalformedURLException, IOException {\n        WebClient client = new WebClient(BrowserVersion.FIREFOX);\n        HtmlPage page = client.getPage(&quot;https://google.com/&quot;);\n        \n        \n        // Getting Form from google home page. tsf is the form name \n        HtmlForm form = page.getHtmlElementById(&quot;tsf&quot;); // Error occurs here\n        \n        form.getInputByName(&quot;q&quot;).setValueAttribute(&quot;test&quot;);\n    \n        // Creating a virtual submit button\n        HtmlButton submitButton = (HtmlButton)page.createElement(&quot;button&quot;);\n        submitButton.setAttribute(&quot;type&quot;, &quot;submit&quot;);\n        form.appendChild(submitButton);\n        \n          // Submitting the form and getting the result \n        HtmlPage newPage = submitButton.click();\n    \n          // Getting the result as text\n\n        String text = page.asNormalizedText();\n        System.out.println(text);\n    }\n}\n</code></pre>\n<p>But I am getting error message:</p>\n<pre><code>Exception in thread &quot;main&quot; com.gargoylesoftware.htmlunit.ElementNotFoundException: elementName=[*] attributeName=[id] attributeValue=[tsf]\n    at com.gargoylesoftware.htmlunit.html.HtmlPage.getHtmlElementById(HtmlPage.java:1670)\n    at Test.main(Test.java:20)\n</code></pre>\n<p>Since this tutorial is relatively old, the ID <code>tsf</code> might be outdated. However, if I check the form name from the google home page, I cant figure it out. Maybe I dont understand the meaning of the whole HtmlForm object. (I am completely new to this topic)</p>\n"},{"tags":["java","zoneddatetime"],"comments":[{"owner":{"account_id":7291967,"reputation":57515,"user_id":5558072,"accept_rate":100,"display_name":"Youcef LAIDANI"},"score":4,"creation_date":1608321662,"post_id":65363205,"comment_id":115557581,"body_markdown":"try to specify the Locale: `DateTimeFormatter.ofPattern(rfc1123Pattern, Locale.UK)`","body":"try to specify the Locale: <code>DateTimeFormatter.ofPattern(rfc1123Pattern, Locale.UK)</code>"},{"owner":{"account_id":5384013,"reputation":6035,"user_id":4288506,"accept_rate":77,"display_name":"Marcono1234"},"score":3,"creation_date":1608324847,"post_id":65363205,"comment_id":115558667,"body_markdown":"Adding to @YCF_L&#39;s comment [`DateTimeFormatter.ofPattern(String)`](https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/time/format/DateTimeFormatter.html#ofPattern(java.lang.String)) uses &quot;the default FORMAT locale.&quot; which is based on the one you specified in your OS, therefore if your Windows machine and your Mac or Linux machine have a different locale the formatter will produce different results.","body":"Adding to @YCF_L&#39;s comment <a href=\"https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/time/format/DateTimeFormatter.html#ofPattern(java.lang.String)\" rel=\"nofollow noreferrer\"><code>DateTimeFormatter.ofPattern(String)</code></a> uses &quot;the default FORMAT locale.&quot; which is based on the one you specified in your OS, therefore if your Windows machine and your Mac or Linux machine have a different locale the formatter will produce different results."},{"owner":{"account_id":1692034,"reputation":3196,"user_id":1554195,"display_name":"tquadrat"},"score":3,"creation_date":1608328020,"post_id":65363205,"comment_id":115559627,"body_markdown":"@YCF_L – for tests, in most cases `Locale.ROOT` would be the better choice, unless you test real locale specific stuff. But `Locale.UK` would be a good starting point for this issue …","body":"@YCF_L – for tests, in most cases <code>Locale.ROOT</code> would be the better choice, unless you test real locale specific stuff. But <code>Locale.UK</code> would be a good starting point for this issue …"},{"owner":{"account_id":20251468,"reputation":23,"user_id":14852457,"display_name":"Ariel Vazquez"},"score":0,"creation_date":1608551444,"post_id":65363205,"comment_id":115609788,"body_markdown":"Thank you guys for the responses. Locale.ENGLISH solved the issue.","body":"Thank you guys for the responses. Locale.ENGLISH solved the issue."}],"answers":[{"tags":[],"owner":{"account_id":2179728,"reputation":73047,"user_id":10819573,"display_name":"Arvind Kumar Avinash"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1608510303,"creation_date":1608508844,"answer_id":65386030,"question_id":65363205,"body_markdown":"## Never use `DateTimeFormatter` without a `Locale`.\r\n\r\nSince the given date-time is in English, you should use the `DateTimeFormatter` with `Locale.ENGLISH`.\r\n\r\n    import java.time.ZonedDateTime;\r\n    import java.time.format.DateTimeFormatter;\r\n    import java.util.Locale;\r\n    \r\n    public class Main {\r\n    \tpublic static void main(String[] args) {\r\n    \t\tfinal String responseTimeStamp = &quot;Mon, 14 Dec 2020 20:34:37 GMT&quot;;\r\n    \t\tDateTimeFormatter dtf = DateTimeFormatter.ofPattern(&quot;EEE, dd MMM yyyy HH:mm:ss z&quot;, Locale.ENGLISH);\r\n    \t\tZonedDateTime zdt = ZonedDateTime.parse(responseTimeStamp, dtf);\r\n    \t\tSystem.out.println(zdt);\r\n    \t}\r\n    }\r\n**Output:**\r\n\r\n    2020-12-14T20:34:37Z[GMT]\r\nBy default, [`DateTimeFormatter#ofPattern`][1] uses the [default FORMAT locale][2] which the JVM sets during startup based on the host environment. I have tried to illustrate the problem through the following demo:\r\n\r\n    import java.time.ZonedDateTime;\r\n    import java.time.format.DateTimeFormatter;\r\n    import java.util.Locale;\r\n    \r\n    public class Main {\r\n    \tpublic static void main(String[] args) {\r\n    \t\tfinal String responseTimeStamp = &quot;Mon, 14 Dec 2020 20:34:37 GMT&quot;;\r\n    \t\tDateTimeFormatter dtfWithDefaultLocale = null;\r\n    \r\n    \t\tSystem.out.println(&quot;JVM&#39;s Locale: &quot; + Locale.getDefault());\r\n    \t\t// DateTimeFormatter with the default Locale\r\n    \t\tdtfWithDefaultLocale = DateTimeFormatter.ofPattern(&quot;EEE, dd MMM yyyy HH:mm:ss z&quot;);\r\n    \t\tSystem.out.println(&quot;DateTimeFormatter&#39;s Locale: &quot; + dtfWithDefaultLocale.getLocale());\r\n    \t\tSystem.out.println(\r\n    \t\t\t\t&quot;Parsed with JVM&#39;s default locale: &quot; + ZonedDateTime.parse(responseTimeStamp, dtfWithDefaultLocale));\r\n    \r\n    \t\t// DateTimeFormatter with Locale.ENGLISH explicitly (recommended)\r\n    \t\tDateTimeFormatter dtf = DateTimeFormatter.ofPattern(&quot;EEE, dd MMM yyyy HH:mm:ss z&quot;, Locale.ENGLISH);\r\n    \t\tZonedDateTime zdt = ZonedDateTime.parse(responseTimeStamp, dtf);\r\n    \t\tSystem.out.println(&quot;Parsed with Locale.ENGLISH: &quot; + zdt);\r\n    \r\n    \t\t// Setting the JVM&#39;s default locale to Locale.FRANCE\r\n    \t\tLocale.setDefault(Locale.FRANCE);\r\n    \t\tSystem.out.println(&quot;JVM&#39;s Locale: &quot; + Locale.getDefault());\r\n    \t\t// DateTimeFormatter with the default Locale\r\n    \t\tdtfWithDefaultLocale = DateTimeFormatter.ofPattern(&quot;EEE, dd MMM yyyy HH:mm:ss z&quot;);\r\n    \t\tSystem.out.println(&quot;DateTimeFormatter&#39;s Locale: &quot; + dtfWithDefaultLocale.getLocale());\r\n    \t\tSystem.out.println(\r\n    \t\t\t\t&quot;Parsed with JVM&#39;s default locale: &quot; + ZonedDateTime.parse(responseTimeStamp, dtfWithDefaultLocale));\r\n    \t}\r\n    }\r\n\r\n**Output:**\r\n\r\n    JVM&#39;s Locale: en_GB\r\n    DateTimeFormatter&#39;s Locale: en_GB\r\n    Parsed with JVM&#39;s default locale: 2020-12-14T20:34:37Z[GMT]\r\n    Parsed with Locale.ENGLISH: 2020-12-14T20:34:37Z[GMT]\r\n    JVM&#39;s Locale: fr_FR\r\n    DateTimeFormatter&#39;s Locale: fr_FR\r\n    Exception in thread &quot;main&quot; java.time.format.DateTimeParseException: Text &#39;Mon, 14 Dec 2020 20:34:37 GMT&#39; could not be parsed at index 0\r\n    \tat java.base/java.time.format.DateTimeFormatter.parseResolved0(DateTimeFormatter.java:2046)\r\n    \tat java.base/java.time.format.DateTimeFormatter.parse(DateTimeFormatter.java:1948)\r\n    \tat java.base/java.time.ZonedDateTime.parse(ZonedDateTime.java:598)\r\n    \tat Main.main(Main.java:29)\r\n\r\n  [1]: https://docs.oracle.com/javase/8/docs/api/java/time/format/DateTimeFormatter.html#ofPattern-java.lang.String-\r\n  [2]: https://docs.oracle.com/javase/8/docs/api/java/util/Locale.html#getDefault-java.util.Locale.Category-\r\n\r\n\r\n","title":"ZonedDateTime.parse() fails for exact the same string in Windows but works in Mac and Linux","body":"<h2>Never use <code>DateTimeFormatter</code> without a <code>Locale</code>.</h2>\n<p>Since the given date-time is in English, you should use the <code>DateTimeFormatter</code> with <code>Locale.ENGLISH</code>.</p>\n<pre><code>import java.time.ZonedDateTime;\nimport java.time.format.DateTimeFormatter;\nimport java.util.Locale;\n\npublic class Main {\n    public static void main(String[] args) {\n        final String responseTimeStamp = &quot;Mon, 14 Dec 2020 20:34:37 GMT&quot;;\n        DateTimeFormatter dtf = DateTimeFormatter.ofPattern(&quot;EEE, dd MMM yyyy HH:mm:ss z&quot;, Locale.ENGLISH);\n        ZonedDateTime zdt = ZonedDateTime.parse(responseTimeStamp, dtf);\n        System.out.println(zdt);\n    }\n}\n</code></pre>\n<p><strong>Output:</strong></p>\n<pre><code>2020-12-14T20:34:37Z[GMT]\n</code></pre>\n<p>By default, <a href=\"https://docs.oracle.com/javase/8/docs/api/java/time/format/DateTimeFormatter.html#ofPattern-java.lang.String-\" rel=\"nofollow noreferrer\"><code>DateTimeFormatter#ofPattern</code></a> uses the <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/Locale.html#getDefault-java.util.Locale.Category-\" rel=\"nofollow noreferrer\">default FORMAT locale</a> which the JVM sets during startup based on the host environment. I have tried to illustrate the problem through the following demo:</p>\n<pre><code>import java.time.ZonedDateTime;\nimport java.time.format.DateTimeFormatter;\nimport java.util.Locale;\n\npublic class Main {\n    public static void main(String[] args) {\n        final String responseTimeStamp = &quot;Mon, 14 Dec 2020 20:34:37 GMT&quot;;\n        DateTimeFormatter dtfWithDefaultLocale = null;\n\n        System.out.println(&quot;JVM's Locale: &quot; + Locale.getDefault());\n        // DateTimeFormatter with the default Locale\n        dtfWithDefaultLocale = DateTimeFormatter.ofPattern(&quot;EEE, dd MMM yyyy HH:mm:ss z&quot;);\n        System.out.println(&quot;DateTimeFormatter's Locale: &quot; + dtfWithDefaultLocale.getLocale());\n        System.out.println(\n                &quot;Parsed with JVM's default locale: &quot; + ZonedDateTime.parse(responseTimeStamp, dtfWithDefaultLocale));\n\n        // DateTimeFormatter with Locale.ENGLISH explicitly (recommended)\n        DateTimeFormatter dtf = DateTimeFormatter.ofPattern(&quot;EEE, dd MMM yyyy HH:mm:ss z&quot;, Locale.ENGLISH);\n        ZonedDateTime zdt = ZonedDateTime.parse(responseTimeStamp, dtf);\n        System.out.println(&quot;Parsed with Locale.ENGLISH: &quot; + zdt);\n\n        // Setting the JVM's default locale to Locale.FRANCE\n        Locale.setDefault(Locale.FRANCE);\n        System.out.println(&quot;JVM's Locale: &quot; + Locale.getDefault());\n        // DateTimeFormatter with the default Locale\n        dtfWithDefaultLocale = DateTimeFormatter.ofPattern(&quot;EEE, dd MMM yyyy HH:mm:ss z&quot;);\n        System.out.println(&quot;DateTimeFormatter's Locale: &quot; + dtfWithDefaultLocale.getLocale());\n        System.out.println(\n                &quot;Parsed with JVM's default locale: &quot; + ZonedDateTime.parse(responseTimeStamp, dtfWithDefaultLocale));\n    }\n}\n</code></pre>\n<p><strong>Output:</strong></p>\n<pre><code>JVM's Locale: en_GB\nDateTimeFormatter's Locale: en_GB\nParsed with JVM's default locale: 2020-12-14T20:34:37Z[GMT]\nParsed with Locale.ENGLISH: 2020-12-14T20:34:37Z[GMT]\nJVM's Locale: fr_FR\nDateTimeFormatter's Locale: fr_FR\nException in thread &quot;main&quot; java.time.format.DateTimeParseException: Text 'Mon, 14 Dec 2020 20:34:37 GMT' could not be parsed at index 0\n    at java.base/java.time.format.DateTimeFormatter.parseResolved0(DateTimeFormatter.java:2046)\n    at java.base/java.time.format.DateTimeFormatter.parse(DateTimeFormatter.java:1948)\n    at java.base/java.time.ZonedDateTime.parse(ZonedDateTime.java:598)\n    at Main.main(Main.java:29)\n</code></pre>\n"}],"owner":{"account_id":20251468,"reputation":23,"user_id":14852457,"display_name":"Ariel Vazquez"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":588,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":65386030,"answer_count":1,"score":2,"last_activity_date":1644442183,"creation_date":1608321517,"question_id":65363205,"body_markdown":"The following UnitTest is failing when being executed through IntelliJ IDE in a Windows machine (Java 11.0.9) but passes when executed in a Mac or Linux machine with the same version of Java. \r\n\r\n    @Test\r\n    public void rfc1123JaveTimeUtilParsing(){\r\n        final String rfc1123Pattern = &quot;EEE, dd MMM yyyy HH:mm:ss z&quot;;\r\n        final String responseTimeStamp = &quot;Mon, 14 Dec 2020 20:34:37 GMT&quot;;\r\n\r\n        DateTimeFormatter javaTimeDateTimeFormatter = DateTimeFormatter.ofPattern(rfc1123Pattern);\r\n        ZonedDateTime javaFinalTime = ZonedDateTime.parse(responseTimeStamp, javaTimeDateTimeFormatter);\r\n        Assert.assertNotNull(javaFinalTime);\r\n    }\r\n\r\nFor windows the result is the following exception:\r\n\r\n*java.time.format.DateTimeParseException: Text &#39;Mon, 14 Dec 2020 20:34:37 GMT&#39; could not be parsed at index 0*","title":"ZonedDateTime.parse() fails for exact the same string in Windows but works in Mac and Linux","body":"<p>The following UnitTest is failing when being executed through IntelliJ IDE in a Windows machine (Java 11.0.9) but passes when executed in a Mac or Linux machine with the same version of Java.</p>\n<pre><code>@Test\npublic void rfc1123JaveTimeUtilParsing(){\n    final String rfc1123Pattern = &quot;EEE, dd MMM yyyy HH:mm:ss z&quot;;\n    final String responseTimeStamp = &quot;Mon, 14 Dec 2020 20:34:37 GMT&quot;;\n\n    DateTimeFormatter javaTimeDateTimeFormatter = DateTimeFormatter.ofPattern(rfc1123Pattern);\n    ZonedDateTime javaFinalTime = ZonedDateTime.parse(responseTimeStamp, javaTimeDateTimeFormatter);\n    Assert.assertNotNull(javaFinalTime);\n}\n</code></pre>\n<p>For windows the result is the following exception:</p>\n<p><em>java.time.format.DateTimeParseException: Text 'Mon, 14 Dec 2020 20:34:37 GMT' could not be parsed at index 0</em></p>\n"},{"tags":["java","android","android-internal-storage"],"comments":[{"owner":{"account_id":420575,"reputation":5030,"user_id":798346,"accept_rate":56,"display_name":"Jim Rhodes"},"score":1,"creation_date":1644441709,"post_id":71056752,"comment_id":125611190,"body_markdown":"What is the value of `path` from your first example? You probably need to prepend `file://`.","body":"What is the value of <code>path</code> from your first example? You probably need to prepend <code>file:&#47;&#47;</code>."},{"owner":{"account_id":19778685,"reputation":169,"user_id":14484121,"display_name":"Akshaya Amar"},"score":0,"creation_date":1644499901,"post_id":71056752,"comment_id":125626732,"body_markdown":"Value of path is `/storage/emulated/0/TestingPurpose/index.html`. I have added prefix as you mentioned, but this time it&#39;s displaying `Webpage not available` and  `file:///storage/emulated/0/TestingPurpose/index.html` could not be loaded because: `net:ERR_ACCESS_DENIED`","body":"Value of path is <code>&#47;storage&#47;emulated&#47;0&#47;TestingPurpose&#47;index.html</code>. I have added prefix as you mentioned, but this time it&#39;s displaying <code>Webpage not available</code> and  <code>file:&#47;&#47;&#47;storage&#47;emulated&#47;0&#47;TestingPurpose&#47;index.html</code> could not be loaded because: <code>net:ERR_ACCESS_DENIED</code>"}],"answers":[{"tags":[],"owner":{"account_id":420575,"reputation":5030,"user_id":798346,"accept_rate":56,"display_name":"Jim Rhodes"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1644441979,"creation_date":1644441979,"answer_id":71056932,"question_id":71056752,"body_markdown":"Try this:\r\n\r\n    String path = Environment.getExternalStorageDirectory().getAbsolutePath() + &quot;/TestingPurpose/index.html&quot;;\r\n    String url = &quot;file://&quot; + path;\r\n    webView.loadUrl(url);","title":"Now able to load html page in web view when trying to load it from internal storage of device","body":"<p>Try this:</p>\n<pre><code>String path = Environment.getExternalStorageDirectory().getAbsolutePath() + &quot;/TestingPurpose/index.html&quot;;\nString url = &quot;file://&quot; + path;\nwebView.loadUrl(url);\n</code></pre>\n"}],"owner":{"account_id":19778685,"reputation":169,"user_id":14484121,"display_name":"Akshaya Amar"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":349,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":71056932,"answer_count":1,"score":0,"last_activity_date":1644441979,"creation_date":1644440988,"question_id":71056752,"body_markdown":"I have created an index.html inside a directory, named as &quot;TestingPurpose&quot;, of my internal storage of device.\r\n\r\nI was trying to load the html page which is inside internal storage of device, but not able to load it\r\n\r\n    String path = Environment.getExternalStorageDirectory().getAbsolutePath() + &quot;/TestingPurpose/index.html&quot;;\r\n    webView.loadUrl(path);\r\n\r\nBut working if I try to load from assets directory\r\n\r\n    String path = &quot;file:///android_asset/index.html&quot;;\r\n    webView.loadUrl(path);\r\n\r\nHow I can make the URL load in web view from the file which is inside the internal storage of device?\r\n","title":"Now able to load html page in web view when trying to load it from internal storage of device","body":"<p>I have created an index.html inside a directory, named as &quot;TestingPurpose&quot;, of my internal storage of device.</p>\n<p>I was trying to load the html page which is inside internal storage of device, but not able to load it</p>\n<pre><code>String path = Environment.getExternalStorageDirectory().getAbsolutePath() + &quot;/TestingPurpose/index.html&quot;;\nwebView.loadUrl(path);\n</code></pre>\n<p>But working if I try to load from assets directory</p>\n<pre><code>String path = &quot;file:///android_asset/index.html&quot;;\nwebView.loadUrl(path);\n</code></pre>\n<p>How I can make the URL load in web view from the file which is inside the internal storage of device?</p>\n"},{"tags":["java","casting","unboxing"],"comments":[{"owner":{"account_id":277416,"reputation":681848,"user_id":571407,"accept_rate":100,"display_name":"JB Nizet"},"score":2,"creation_date":1569221281,"post_id":58056944,"comment_id":102511173,"body_markdown":"What&#39;s the type of `obj`? How is it created and populated?","body":"What&#39;s the type of <code>obj</code>? How is it created and populated?"},{"owner":{"account_id":7410307,"reputation":319,"user_id":5637846,"display_name":"Sherwin Obciana"},"score":1,"creation_date":1569221388,"post_id":58056944,"comment_id":102511234,"body_markdown":"Instead of casting the `int` value try using `Long.parseLong(int)`","body":"Instead of casting the <code>int</code> value try using <code>Long.parseLong(int)</code>"},{"owner":{"account_id":11683,"reputation":1438179,"user_id":22656,"accept_rate":86,"display_name":"Jon Skeet"},"score":1,"creation_date":1569221413,"post_id":58056944,"comment_id":102511244,"body_markdown":"@SherwinObciana: Given that `obj.get(&quot;ipInt&quot;)` apparently returns `Integer`, I can&#39;t see how that would work.","body":"@SherwinObciana: Given that <code>obj.get(&quot;ipInt&quot;)</code> apparently returns <code>Integer</code>, I can&#39;t see how that would work."},{"owner":{"account_id":7595189,"reputation":44576,"user_id":5761558,"display_name":"ernest_k"},"score":1,"creation_date":1569222192,"post_id":58056944,"comment_id":102511565,"body_markdown":"Some JSON libs allow you to force integer numbers to be parsed as `long`, which would solve your issue altogether. [Here is a solution for jackson](https://stackoverflow.com/a/31564232/5761558) (if that&#39;s what you&#39;re using)","body":"Some JSON libs allow you to force integer numbers to be parsed as <code>long</code>, which would solve your issue altogether. <a href=\"https://stackoverflow.com/a/31564232/5761558\">Here is a solution for jackson</a> (if that&#39;s what you&#39;re using)"}],"answers":[{"tags":[],"owner":{"account_id":11683,"reputation":1438179,"user_id":22656,"accept_rate":86,"display_name":"Jon Skeet"},"down_vote_count":0,"up_vote_count":56,"is_accepted":true,"score":56,"last_activity_date":1569221338,"creation_date":1569221338,"answer_id":58056989,"question_id":58056944,"body_markdown":"Both `Integer` and `Long` are subclasses of `Number`, so I suspect you can use:\r\n\r\n    long ipInt = ((Number) obj.get(&quot;ipInt&quot;)).longValue();\r\n\r\nThat should work whether the value returned by `obj.get(&quot;ipInt&quot;)` is an `Integer` reference or a `Long` reference. It has the downside that it will *also* silently continue if `ipInt` has been specified as a floating point number (e.g. `&quot;ipInt&quot;: 1.5`) in the JSON, where you might want to throw an exception instead.\r\n\r\nYou *could* use `instanceof` instead to check for `Long` and `Integer` specifically, but it would be pretty ugly.    ","title":"java.lang.Integer cannot be cast to java.lang.Long","body":"<p>Both <code>Integer</code> and <code>Long</code> are subclasses of <code>Number</code>, so I suspect you can use:</p>\n\n<pre><code>long ipInt = ((Number) obj.get(\"ipInt\")).longValue();\n</code></pre>\n\n<p>That should work whether the value returned by <code>obj.get(\"ipInt\")</code> is an <code>Integer</code> reference or a <code>Long</code> reference. It has the downside that it will <em>also</em> silently continue if <code>ipInt</code> has been specified as a floating point number (e.g. <code>\"ipInt\": 1.5</code>) in the JSON, where you might want to throw an exception instead.</p>\n\n<p>You <em>could</em> use <code>instanceof</code> instead to check for <code>Long</code> and <code>Integer</code> specifically, but it would be pretty ugly.    </p>\n"},{"tags":[],"owner":{"account_id":3557625,"reputation":198996,"user_id":2970947,"display_name":"Elliott Frisch"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1569221704,"creation_date":1569221704,"answer_id":58057083,"question_id":58056944,"body_markdown":"You mention the current approach works when you provide a value outside the range of integer, but fails when you are within the integer range. That is an odd behavior for an API, because it seems you *need* to check the return type yourself. You *can* do that. The usual way is with `instanceof`. Something like,\r\n\r\n\tlong ipInt;\r\n\tObject o = obj.get(&quot;ipInt&quot;);\r\n\tif (o instanceof Integer) {\r\n\t\tipInt = ((Integer) o).intValue();\r\n\t} else if (o instanceof Long) {\r\n\t\tipInt = ((Long) o).longValue();\r\n\t}\r\n\r\n","title":"java.lang.Integer cannot be cast to java.lang.Long","body":"<p>You mention the current approach works when you provide a value outside the range of integer, but fails when you are within the integer range. That is an odd behavior for an API, because it seems you <em>need</em> to check the return type yourself. You <em>can</em> do that. The usual way is with <code>instanceof</code>. Something like,</p>\n\n<pre><code>long ipInt;\nObject o = obj.get(\"ipInt\");\nif (o instanceof Integer) {\n    ipInt = ((Integer) o).intValue();\n} else if (o instanceof Long) {\n    ipInt = ((Long) o).longValue();\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1107482,"reputation":2870,"user_id":1098603,"accept_rate":94,"display_name":"Matthieu"},"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1569221765,"creation_date":1569221765,"answer_id":58057100,"question_id":58056944,"body_markdown":"We don&#39;t know what `obj.get()` returns so it&#39;s hard to say precisely, but when I use such methods that return `Number` subclasses, I find it safer to cast it to `Number` and call the appropriate `xxxValue()`, rather than letting the auto-unboxing throw the `ClassCastException`:\r\n\r\n    long ipInt = ((Number)obj.get(&quot;ipInt&quot;)).longValue();\r\n\r\nThat way, you&#39;re doing explicit unboxing to a `long`, and are able to cope with data that could include a `.`, which would return a `Float` or `Double` instead.","title":"java.lang.Integer cannot be cast to java.lang.Long","body":"<p>We don't know what <code>obj.get()</code> returns so it's hard to say precisely, but when I use such methods that return <code>Number</code> subclasses, I find it safer to cast it to <code>Number</code> and call the appropriate <code>xxxValue()</code>, rather than letting the auto-unboxing throw the <code>ClassCastException</code>:</p>\n\n<pre><code>long ipInt = ((Number)obj.get(\"ipInt\")).longValue();\n</code></pre>\n\n<p>That way, you're doing explicit unboxing to a <code>long</code>, and are able to cope with data that could include a <code>.</code>, which would return a <code>Float</code> or <code>Double</code> instead.</p>\n"},{"tags":[],"owner":{"account_id":18964188,"reputation":41,"user_id":13838991,"display_name":"user13838991"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1593512811,"creation_date":1593499845,"answer_id":62651769,"question_id":58056944,"body_markdown":"```java\r\nLong.valueOf(jo.get(&quot;ipInt&quot;).toString());\r\n```\r\n\r\nIs ok.","title":"java.lang.Integer cannot be cast to java.lang.Long","body":"<pre class=\"lang-java prettyprint-override\"><code>Long.valueOf(jo.get(&quot;ipInt&quot;).toString());\n</code></pre>\n<p>Is ok.</p>\n"},{"tags":[],"owner":{"account_id":18964188,"reputation":41,"user_id":13838991,"display_name":"user13838991"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1593500239,"creation_date":1593500239,"answer_id":62651860,"question_id":58056944,"body_markdown":"    public static void main(String[] args) {\r\n        JSONObject jo = JSON.parseObject(\r\n            &quot;{    \\&quot;uuID\\&quot;: \\&quot;user001\\&quot;,    \\&quot;ipInt\\&quot;: 16744168,    \\&quot;latiTude\\&quot;: 0,    \\&quot;longiTude\\&quot;: 0}&quot;);\r\n        System.out.println(jo);\r\n        long sellerId1 =  Long.valueOf(jo.get(&quot;ipInt&quot;).toString());\r\n        //Long sellerId1 = (long)jo.get(&quot;ipInt&quot;);\r\n        System.out.println(sellerId1);\r\n    }","title":"java.lang.Integer cannot be cast to java.lang.Long","body":"<pre><code>public static void main(String[] args) {\n    JSONObject jo = JSON.parseObject(\n        &quot;{    \\&quot;uuID\\&quot;: \\&quot;user001\\&quot;,    \\&quot;ipInt\\&quot;: 16744168,    \\&quot;latiTude\\&quot;: 0,    \\&quot;longiTude\\&quot;: 0}&quot;);\n    System.out.println(jo);\n    long sellerId1 =  Long.valueOf(jo.get(&quot;ipInt&quot;).toString());\n    //Long sellerId1 = (long)jo.get(&quot;ipInt&quot;);\n    System.out.println(sellerId1);\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":7729698,"reputation":2121,"user_id":5853262,"display_name":"Mahdi Moqadasi"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1603699280,"creation_date":1603699280,"answer_id":64533337,"question_id":58056944,"body_markdown":"in kotlin I simply use this:\r\n\r\n    val myInt: Int = 10\r\n    val myLong = myInt.toLong()","title":"java.lang.Integer cannot be cast to java.lang.Long","body":"<p>in kotlin I simply use this:</p>\n<pre><code>val myInt: Int = 10\nval myLong = myInt.toLong()\n</code></pre>\n"}],"owner":{"account_id":2043223,"reputation":469,"user_id":10965038,"display_name":"inayzi"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":65415,"favorite_count":0,"down_vote_count":0,"up_vote_count":34,"accepted_answer_id":58056989,"answer_count":6,"score":34,"last_activity_date":1644441949,"creation_date":1569221164,"question_id":58056944,"body_markdown":"I&#39;m supposed to receive long integer in my web service.\r\n\r\n```java\r\nlong ipInt = (long) obj.get(&quot;ipInt&quot;);\r\n```\r\n\r\nWhen I test my program and put ipInt value = 2886872928, it give me success.\r\nHowever, when I test my program and put ipInt value = 167844168, it give me error : \r\n\r\njava.lang.ClassCastException: java.lang.Integer cannot be cast to java.lang.Long\r\n\r\nThe error is point to the above code.\r\n\r\nFYI, my data is in JSON format :\r\n\r\n```json\r\n{\r\n    &quot;uuID&quot;: &quot;user001&quot;,\r\n    &quot;ipInt&quot;: 16744168,\r\n    &quot;latiTude&quot;: 0,\r\n    &quot;longiTude&quot;: 0,\r\n}\r\n```\r\n\r\nIs there any suggestion so that I can ensure my code able to receive both ipInteger value?\r\n","title":"java.lang.Integer cannot be cast to java.lang.Long","body":"<p>I'm supposed to receive long integer in my web service.</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>long ipInt = (long) obj.get(\"ipInt\");\n</code></pre>\n\n<p>When I test my program and put ipInt value = 2886872928, it give me success.\nHowever, when I test my program and put ipInt value = 167844168, it give me error : </p>\n\n<p>java.lang.ClassCastException: java.lang.Integer cannot be cast to java.lang.Long</p>\n\n<p>The error is point to the above code.</p>\n\n<p>FYI, my data is in JSON format :</p>\n\n<pre><code>{\n    \"uuID\": \"user001\",\n    \"ipInt\": 16744168,\n    \"latiTude\": 0,\n    \"longiTude\": 0,\n}\n</code></pre>\n\n<p>Is there any suggestion so that I can ensure my code able to receive both ipInteger value?</p>\n"},{"tags":["java","postgresql","spring-boot","spring-data-jpa","haversine"],"answers":[{"tags":[],"owner":{"account_id":957259,"reputation":29625,"user_id":982341,"display_name":"GreyBeardedGeek"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1644370817,"creation_date":1644364623,"answer_id":71042404,"question_id":71041649,"body_markdown":"The following worked for me:\r\n\r\nfirst, run:\r\n\r\n     create extension cube;\r\n    \r\n     create extension earthdistance; \r\n\r\n   This installs extensions that enable, among other things, location-based queries without installing PostGIS \r\n\r\nThen, Instead of storing your lat and long in separate columns, store them together in a &#39;point&#39; type column, keeping in mind that the longitude comes first, not the latitude as you would expect, e.g. \r\n\r\n      create table Entity (city varchar(100), location point);\r\n\r\nand store your data, e.g.\r\n\r\n    insert into places(name, location) values (&#39;lambertville&#39;, point((74.9429,40.3659)));\r\n        \r\n    insert into places(name, location) values (&#39;ny&#39;, point(74.0060, 40.7128));\r\n        \r\n    insert into places(name, location) values (&#39;phila&#39;, point( 75.1652, 39.9526));\r\n\r\n(note that Lambertville, NJ is somewhere around half-way between Philly and New York).\r\n\r\nThen, if, for example, you want to select Entities that are less than a certain distance from another entity, you can do something like:\r\n\r\n    select * from places \r\n     where \r\n    location &lt;@&gt; (select location from places where name = &#39;ny&#39;) &lt; 70  \r\n      and name != &#39;ny&#39;;\r\n\r\nor, if you have the coordinates already, and want to find entities withing a certain distance, \r\n\r\n\r\n    select * from places \r\n     where \r\n    location &lt;@&gt; point(74.0060, 40.7128) &lt; 70    \r\n      and name != &#39;ny&#39;;\r\n\r\n \r\n\r\nI have not checked whether these queries can be adapted to work with JPA @Query annotations, YMMV.","title":"Get nearest position with Haversine Formula in Spring","body":"<p>The following worked for me:</p>\n<p>first, run:</p>\n<pre><code> create extension cube;\n\n create extension earthdistance; \n</code></pre>\n<p>This installs extensions that enable, among other things, location-based queries without installing PostGIS</p>\n<p>Then, Instead of storing your lat and long in separate columns, store them together in a 'point' type column, keeping in mind that the longitude comes first, not the latitude as you would expect, e.g.</p>\n<pre><code>  create table Entity (city varchar(100), location point);\n</code></pre>\n<p>and store your data, e.g.</p>\n<pre><code>insert into places(name, location) values ('lambertville', point((74.9429,40.3659)));\n    \ninsert into places(name, location) values ('ny', point(74.0060, 40.7128));\n    \ninsert into places(name, location) values ('phila', point( 75.1652, 39.9526));\n</code></pre>\n<p>(note that Lambertville, NJ is somewhere around half-way between Philly and New York).</p>\n<p>Then, if, for example, you want to select Entities that are less than a certain distance from another entity, you can do something like:</p>\n<pre><code>select * from places \n where \nlocation &lt;@&gt; (select location from places where name = 'ny') &lt; 70  \n  and name != 'ny';\n</code></pre>\n<p>or, if you have the coordinates already, and want to find entities withing a certain distance,</p>\n<pre><code>select * from places \n where \nlocation &lt;@&gt; point(74.0060, 40.7128) &lt; 70    \n  and name != 'ny';\n</code></pre>\n<p>I have not checked whether these queries can be adapted to work with JPA @Query annotations, YMMV.</p>\n"},{"tags":[],"owner":{"account_id":19982380,"reputation":85,"user_id":14645205,"display_name":"Okabe"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1644441630,"creation_date":1644441630,"answer_id":71056864,"question_id":71041649,"body_markdown":"I got it working changing a few things: \r\n\r\n\r\n \r\n\r\n\r\n\r\n\r\n\r\n     @Query(value = &quot;SELECT * FROM Entity s WHERE &quot; + HAVERSINE_PART + &quot; &lt; :distance ORDER BY &quot;+ HAVERSINE_PART + &quot; DESC&quot;,nativeQuery = true)\r\n    List&lt;Entity&gt; findEntityWithInDistance(\r\n    @Param(&quot;latitude&quot;) double latitude,\r\n     @Param(&quot;longitude&quot;) double longitude,\r\n     @Param(&quot;distance&quot;) double distanceWithInKM );","title":"Get nearest position with Haversine Formula in Spring","body":"<p>I got it working changing a few things:</p>\n<pre><code> @Query(value = &quot;SELECT * FROM Entity s WHERE &quot; + HAVERSINE_PART + &quot; &lt; :distance ORDER BY &quot;+ HAVERSINE_PART + &quot; DESC&quot;,nativeQuery = true)\nList&lt;Entity&gt; findEntityWithInDistance(\n@Param(&quot;latitude&quot;) double latitude,\n @Param(&quot;longitude&quot;) double longitude,\n @Param(&quot;distance&quot;) double distanceWithInKM );\n</code></pre>\n"}],"owner":{"account_id":19982380,"reputation":85,"user_id":14645205,"display_name":"Okabe"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1365,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":71056864,"answer_count":2,"score":3,"last_activity_date":1644441630,"creation_date":1644359064,"question_id":71041649,"body_markdown":"I have an entitiy which has two columns in the database like this:\r\n\r\n    @Column(name = &quot;latitude&quot;, nullable = false)\r\n    private float currentPositionLatitude;\r\n\r\n    @Column(name = &quot;longitude&quot;, nullable = false)\r\n    private float currentPositionLongitude;\r\n\r\nAnd I have multiple entrys in my database(PostgresQl) for the entity with different latitudes and longitudes for all of them. Now I want to give a point (lat,lon) and a radius and show all entitys which are near the point.\r\nI first tried it with the Harversine formula like this in Spring Jpa :\r\n\r\n\r\n \r\n\r\n       String HAVERSINE_PART = &quot;(6371 * acos(cos(radians(:latitude)) * cos(radians(s.latitude)) *&quot; +\r\n            &quot; cos(radians(s.longitude) - radians(:longitude)) + sin(radians(:latitude)) * sin(radians(s.latitude))))&quot;;\r\n    \r\n        @Query(&quot;SELECT currentPositionLatitude,currentPositionLongitude FROM Entity WHERE  &#39;%:HAVERSINE_PART%&#39; &lt; :distance ORDER BY &#39;%:HAVERSINE_PART%&#39; DESC&quot;)\r\n          public List&lt;Entity&gt; findEntiryWithLocation(\r\n          @Param(&quot;currentPositionLatitude&quot;) final float latitude,\r\n          @Param(&quot;currentPositionLongitude&quot;) final float longitude, @Param(&quot;distance&quot;) final double distance )\r\n\r\n\r\nthis didnt work so I tried:\r\n\r\n        @Query(&quot;SELECT s FROM Entity s WHERE &quot; + HAVERSINE_PART + &quot; &lt; :distance ORDER BY &quot;+ HAVERSINE_PART + &quot; DESC&quot;)\r\n    List&lt;Entity&gt; findEntityWithInDistance(\r\n    @Param(&quot;latitude&quot;) double latitude,\r\n     @Param(&quot;longitude&quot;) double longitude,\r\n     @Param(&quot;distance&quot;) double distanceWithInKM );\r\n\r\n\r\nthis also didnt work so then I tried: \r\n\r\n\r\n\r\n    @Query(value = &quot;SELECT *, earth_distance(ll_to_earth(:latitude, :longitude), ll_to_earth(latitude, longitude)) as distance FROM Car WHERE  (earth_box(ll_to_earth(:latitude, :longitude), :radiusInMeters) @&gt; ll_to_earth(latitude, longitude))ORDER BY distance ASC&quot;,\r\n    nativeQuery = true)\r\n    List&lt;Entity&gt; getPlacesNear ( @Param(&quot;latitude&quot;) float latitude,\r\n                                 @Param(&quot;longitude&quot;)float longitude,\r\n                                 @Param(&quot;radiusInMeters&quot;) float radiusInMeters);\r\n\r\n\r\nThis compiled but when I tried to put in values in my controller I got the error: jdbc error :2022 no dialect mapping \r\n\r\nHere my methods for the service and the controller(the datatypes have changed maybe):\r\n\r\n    public List&lt;Entity&gt;showNearestEntityByDistances(float latitude, float longitude, float distance){\r\n            return EntityRepository.getPlacesNear(latitude,longitude,distance);\r\n        }\r\n\r\nand the endpoint:\r\n\r\n    @GetMapping(&quot;/location&quot;)\r\n    public List&lt;Entity&gt;showEntityNearby(@RequestParam float latitude,@RequestParam float longitude,@RequestParam float distance){\r\n      \r\n\r\n        return carService.showNearestEntitysByDistances(latitude,longitude,distance);\r\n    }\r\n\r\nI already looked at :\r\nhttps://www.postgresql.org/docs/current/earthdistance.html\r\nand \r\nhttps://stackoverflow.com/questions/39044322/postgresql-jpa-earth-distance-query/62339030#62339030\r\n\r\nbut it didnt worked. Has anyone an idea what Im doing wrong ?\r\nThanks in regard.\r\n\r\n   \r\n\r\n","title":"Get nearest position with Haversine Formula in Spring","body":"<p>I have an entitiy which has two columns in the database like this:</p>\n<pre><code>@Column(name = &quot;latitude&quot;, nullable = false)\nprivate float currentPositionLatitude;\n\n@Column(name = &quot;longitude&quot;, nullable = false)\nprivate float currentPositionLongitude;\n</code></pre>\n<p>And I have multiple entrys in my database(PostgresQl) for the entity with different latitudes and longitudes for all of them. Now I want to give a point (lat,lon) and a radius and show all entitys which are near the point.\nI first tried it with the Harversine formula like this in Spring Jpa :</p>\n<pre><code>   String HAVERSINE_PART = &quot;(6371 * acos(cos(radians(:latitude)) * cos(radians(s.latitude)) *&quot; +\n        &quot; cos(radians(s.longitude) - radians(:longitude)) + sin(radians(:latitude)) * sin(radians(s.latitude))))&quot;;\n\n    @Query(&quot;SELECT currentPositionLatitude,currentPositionLongitude FROM Entity WHERE  '%:HAVERSINE_PART%' &lt; :distance ORDER BY '%:HAVERSINE_PART%' DESC&quot;)\n      public List&lt;Entity&gt; findEntiryWithLocation(\n      @Param(&quot;currentPositionLatitude&quot;) final float latitude,\n      @Param(&quot;currentPositionLongitude&quot;) final float longitude, @Param(&quot;distance&quot;) final double distance )\n</code></pre>\n<p>this didnt work so I tried:</p>\n<pre><code>    @Query(&quot;SELECT s FROM Entity s WHERE &quot; + HAVERSINE_PART + &quot; &lt; :distance ORDER BY &quot;+ HAVERSINE_PART + &quot; DESC&quot;)\nList&lt;Entity&gt; findEntityWithInDistance(\n@Param(&quot;latitude&quot;) double latitude,\n @Param(&quot;longitude&quot;) double longitude,\n @Param(&quot;distance&quot;) double distanceWithInKM );\n</code></pre>\n<p>this also didnt work so then I tried:</p>\n<pre><code>@Query(value = &quot;SELECT *, earth_distance(ll_to_earth(:latitude, :longitude), ll_to_earth(latitude, longitude)) as distance FROM Car WHERE  (earth_box(ll_to_earth(:latitude, :longitude), :radiusInMeters) @&gt; ll_to_earth(latitude, longitude))ORDER BY distance ASC&quot;,\nnativeQuery = true)\nList&lt;Entity&gt; getPlacesNear ( @Param(&quot;latitude&quot;) float latitude,\n                             @Param(&quot;longitude&quot;)float longitude,\n                             @Param(&quot;radiusInMeters&quot;) float radiusInMeters);\n</code></pre>\n<p>This compiled but when I tried to put in values in my controller I got the error: jdbc error :2022 no dialect mapping</p>\n<p>Here my methods for the service and the controller(the datatypes have changed maybe):</p>\n<pre><code>public List&lt;Entity&gt;showNearestEntityByDistances(float latitude, float longitude, float distance){\n        return EntityRepository.getPlacesNear(latitude,longitude,distance);\n    }\n</code></pre>\n<p>and the endpoint:</p>\n<pre><code>@GetMapping(&quot;/location&quot;)\npublic List&lt;Entity&gt;showEntityNearby(@RequestParam float latitude,@RequestParam float longitude,@RequestParam float distance){\n  \n\n    return carService.showNearestEntitysByDistances(latitude,longitude,distance);\n}\n</code></pre>\n<p>I already looked at :\n<a href=\"https://www.postgresql.org/docs/current/earthdistance.html\" rel=\"nofollow noreferrer\">https://www.postgresql.org/docs/current/earthdistance.html</a>\nand\n<a href=\"https://stackoverflow.com/questions/39044322/postgresql-jpa-earth-distance-query/62339030#62339030\">postgresql jpa earth_distance query</a></p>\n<p>but it didnt worked. Has anyone an idea what Im doing wrong ?\nThanks in regard.</p>\n"},{"tags":["java","string","utf-8","rsa"],"comments":[{"owner":{"account_id":2053598,"reputation":41316,"user_id":1831987,"display_name":"VGR"},"score":0,"creation_date":1644422955,"post_id":71052822,"comment_id":125604015,"body_markdown":"`result.getBytes(StandardCharsets.UTF_8)`?  Don’t expect it to be shorter, though.  UTF-8 is not a form of compression.","body":"<code>result.getBytes(StandardCharsets.UTF_8)</code>?  Don’t expect it to be shorter, though.  UTF-8 is not a form of compression."},{"owner":{"account_id":3211603,"reputation":289297,"user_id":2711488,"display_name":"Holger"},"score":1,"creation_date":1644423699,"post_id":71052822,"comment_id":125604379,"body_markdown":"How about not using base64 in the first place? Just use `cipherBytes`.","body":"How about not using base64 in the first place? Just use <code>cipherBytes</code>."},{"owner":{"account_id":13729295,"reputation":867,"user_id":9907182,"display_name":"Justin"},"score":0,"creation_date":1644423726,"post_id":71052822,"comment_id":125604393,"body_markdown":"Hi @VGR\nThanks for your response, i&#39;m just looking for something that compress RSA Encoded Value to shorten, Could you please help me on this?","body":"Hi @VGR Thanks for your response, i&#39;m just looking for something that compress RSA Encoded Value to shorten, Could you please help me on this?"},{"owner":{"account_id":288696,"reputation":91230,"user_id":589259,"accept_rate":82,"display_name":"Maarten Bodewes"},"score":5,"creation_date":1644424521,"post_id":71052822,"comment_id":125604766,"body_markdown":"RSA bytes themselves cannot really be distinguished from random. So at that point no compression is feasible.","body":"RSA bytes themselves cannot really be distinguished from random. So at that point no compression is feasible."},{"owner":{"account_id":13729295,"reputation":867,"user_id":9907182,"display_name":"Justin"},"score":0,"creation_date":1644425258,"post_id":71052822,"comment_id":125605091,"body_markdown":"@Holger\n\nThanks for your suggestion, I hope this line needs to be changed &quot;String encrypted = Base64.getEncoder().encodeToString(cipherBytes);&quot;. right? if yes, kindly share me what kinda change i need to make here?","body":"@Holger  Thanks for your suggestion, I hope this line needs to be changed &quot;String encrypted = Base64.getEncoder().encodeToString(cipherBytes);&quot;. right? if yes, kindly share me what kinda change i need to make here?"},{"owner":{"account_id":3211603,"reputation":289297,"user_id":2711488,"display_name":"Holger"},"score":1,"creation_date":1644427361,"post_id":71052822,"comment_id":125605931,"body_markdown":"This heavily depends on what you actually want to do with the `String`.","body":"This heavily depends on what you actually want to do with the <code>String</code>."},{"owner":{"account_id":899926,"reputation":5112,"user_id":1820553,"display_name":"kelalaka"},"score":0,"creation_date":1644440765,"post_id":71052822,"comment_id":125610843,"body_markdown":"Why do you encrypt with RSA and why this size is not suitable for you?","body":"Why do you encrypt with RSA and why this size is not suitable for you?"}],"answers":[{"tags":[],"owner":{"account_id":2496,"reputation":266234,"user_id":3474,"accept_rate":83,"display_name":"erickson"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1644423661,"creation_date":1644423288,"answer_id":71053053,"question_id":71052822,"body_markdown":"Your cipher text appears to be already UTF-8&amp;ndash;encoded. It&#39;s base-64&amp;ndash;encoded; base-64 uses only US-ASCII characters, and US-ASCII encoding is a subset of UTF-8 encoding.\r\n\r\nI believe you are not asking for what you want. Do you want shorter cipher text? If so, UTF-8 has nothing to do with that.\r\n\r\nRSA cipher text has a length equal to the modulus of the RSA key. (This also imposes an upper bound on the plain text length.) The key size is chosen according to security requirements. Nowadays 3072 bits or maybe 2048 bits is typical. With those key lengths, the shortest text encoding generally supported is 512 or 342 characters, respectively. (There are some less common binary-to-text encodings that could get it down to 480 or 320 characters, respectively, but they will cause problems in URLs and other contexts because they use more symbols.)\r\n\r\nIf you want a shorter cipher text, use a different encryption algorithm. For public key cryptography, elliptic curve algorithms give the same level of security with shorter keys (as far as we know, anyway). This means your plain text and cipher text will be shorter. Or, perhaps a symmetric algorithm might work in your scheme. Depending on the mode, these can output cipher text the same length as the plain text (although that leaks information about the plain text and might compromise security).\r\n\r\nCryptographic operations result in strings bytes that can have any value in any sequence. I&#39;m not aware of any single-byte character encodings that map every value to a character, and there isn&#39;t a multi-byte character encoding that maps every byte sequence to a character. Taking these facts together, you&#39;ll always require something like base-64 encoding to convert your cipher text to actual characters. So your text will be 33% longer on average.","title":"Compress RSA Encoded value in java","body":"<p>Your cipher text appears to be already UTF-8–encoded. It's base-64–encoded; base-64 uses only US-ASCII characters, and US-ASCII encoding is a subset of UTF-8 encoding.</p>\n<p>I believe you are not asking for what you want. Do you want shorter cipher text? If so, UTF-8 has nothing to do with that.</p>\n<p>RSA cipher text has a length equal to the modulus of the RSA key. (This also imposes an upper bound on the plain text length.) The key size is chosen according to security requirements. Nowadays 3072 bits or maybe 2048 bits is typical. With those key lengths, the shortest text encoding generally supported is 512 or 342 characters, respectively. (There are some less common binary-to-text encodings that could get it down to 480 or 320 characters, respectively, but they will cause problems in URLs and other contexts because they use more symbols.)</p>\n<p>If you want a shorter cipher text, use a different encryption algorithm. For public key cryptography, elliptic curve algorithms give the same level of security with shorter keys (as far as we know, anyway). This means your plain text and cipher text will be shorter. Or, perhaps a symmetric algorithm might work in your scheme. Depending on the mode, these can output cipher text the same length as the plain text (although that leaks information about the plain text and might compromise security).</p>\n<p>Cryptographic operations result in strings bytes that can have any value in any sequence. I'm not aware of any single-byte character encodings that map every value to a character, and there isn't a multi-byte character encoding that maps every byte sequence to a character. Taking these facts together, you'll always require something like base-64 encoding to convert your cipher text to actual characters. So your text will be 33% longer on average.</p>\n"},{"tags":[],"owner":{"account_id":288696,"reputation":91230,"user_id":589259,"accept_rate":82,"display_name":"Maarten Bodewes"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1644441565,"creation_date":1644423779,"answer_id":71053167,"question_id":71052822,"body_markdown":"To remain largely compatible with US-ASCII, a 7 bit character code, UTF-8 only encodes single byte characters using the lower 7 bits as well. That means that the same 95 printable characters are present using a single byte in UTF-8 and ASCII. Moving to two or higher byte UTF-8 encoding takes **more** space, so that&#39;s not useful at all.\r\n\r\nSo basically you can use any text encoding for ASCII  that exists. You are already using base 64 which is already pretty dense. However, you could e.g. also use [Z85](https://rfc.zeromq.org/spec/32/) which can contain more binary data, with the disadvantage that it is not a power of two, so the encoding / decoding (or base conversion) will be somewhat trickier and costly. Furthermore, a base 85 encoding only encodes around 6.41 bits per character over 6 bits for base 64, so the return is minimal (around 6.82%).\r\n\r\nYou should always indicate the encoding when performing conversion. However,UTF-8 is fully compatible to ASCII for base 64 and Z85 as mentioned before. So I&#39;d indicate encoding `StandardCharsets.US_ASCII`, not `UTF_8` as others no doubt will propose.\r\n\r\nJust to be sure: if you are able to handle bytes then *no encoding* is always better than performing some conversion to a less efficient representation.\r\n\r\n---\r\n\r\nThe only real way of creating smaller ciphertext is to look at hybrid encryption. Just encrypting or deriving a symmetric key with RSA and use that to encrypt a small string such as a password is not really feasible. An RSA ciphertext consist of (largely) random bytes, so at least on average is not possible to compress these bytes any further.\r\n\r\nHowever, you could take a look at ECIES, possibly with a *compressed* ephemeral public key. Then you could use 33 bytes for the public key (of e.g. curve type P256, for a 128 bit strength) and a specific maximum password size for the password itself, encrypted with e.g. AES-CTR. You should use a static sized encoding for the passwords, or you could leak the password size.","title":"Compress RSA Encoded value in java","body":"<p>To remain largely compatible with US-ASCII, a 7 bit character code, UTF-8 only encodes single byte characters using the lower 7 bits as well. That means that the same 95 printable characters are present using a single byte in UTF-8 and ASCII. Moving to two or higher byte UTF-8 encoding takes <strong>more</strong> space, so that's not useful at all.</p>\n<p>So basically you can use any text encoding for ASCII  that exists. You are already using base 64 which is already pretty dense. However, you could e.g. also use <a href=\"https://rfc.zeromq.org/spec/32/\" rel=\"nofollow noreferrer\">Z85</a> which can contain more binary data, with the disadvantage that it is not a power of two, so the encoding / decoding (or base conversion) will be somewhat trickier and costly. Furthermore, a base 85 encoding only encodes around 6.41 bits per character over 6 bits for base 64, so the return is minimal (around 6.82%).</p>\n<p>You should always indicate the encoding when performing conversion. However,UTF-8 is fully compatible to ASCII for base 64 and Z85 as mentioned before. So I'd indicate encoding <code>StandardCharsets.US_ASCII</code>, not <code>UTF_8</code> as others no doubt will propose.</p>\n<p>Just to be sure: if you are able to handle bytes then <em>no encoding</em> is always better than performing some conversion to a less efficient representation.</p>\n<hr />\n<p>The only real way of creating smaller ciphertext is to look at hybrid encryption. Just encrypting or deriving a symmetric key with RSA and use that to encrypt a small string such as a password is not really feasible. An RSA ciphertext consist of (largely) random bytes, so at least on average is not possible to compress these bytes any further.</p>\n<p>However, you could take a look at ECIES, possibly with a <em>compressed</em> ephemeral public key. Then you could use 33 bytes for the public key (of e.g. curve type P256, for a 128 bit strength) and a specific maximum password size for the password itself, encrypted with e.g. AES-CTR. You should use a static sized encoding for the passwords, or you could leak the password size.</p>\n"}],"owner":{"account_id":13729295,"reputation":867,"user_id":9907182,"display_name":"Justin"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":505,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":71053167,"answer_count":2,"score":0,"last_activity_date":1644441565,"creation_date":1644422425,"question_id":71052822,"body_markdown":"I am having a java class in which `RSA Encryption` is performed for the passed `String` value. getting encoded value as lengthy.\r\n\r\nInput String: `justin`\r\n\r\nRSA Encoded value as output: `.eJwdy00OwiAQBtC7zFqS4Ufg8zLNUIaGDZjaxoXx7ja-_fvQc751X3qlB2Wp4kKCU47BZy4A7pa9uuitqNKN5t63PuToY1vO87-wri02gSlSiwloMKhcDZxoSClDAl-zj9exjHkFy0zfH5pUI3w.YfvMdQ.GcmMQuY3BN33JATAfFB3ZyeXO8U`\r\n\r\nRSA Encryption Code:\r\n\r\n    String username=&quot;justin&quot;;\r\n    String encrypteduser=getEncryptedPassword(username);\r\n    System.out.println(&quot;encrypteduser! &quot; + encrypteduser); \r\n    public String getEncryptedPassword(String plainTextPassword)\r\n    \t{\r\n    \t\tString result=&quot;&quot;;\r\n    \t\t\r\n    \t\ttry {\r\n    \t\t\tresult= getEncryptedPasswd(plainTextPassword);\r\n    \t\t\tlog.info(&quot;result:   &quot; + result);\r\n    \t\t} catch (Exception e) {\r\n    \t\t\t// TODO Auto-generated catch block\r\n    \t\t\te.printStackTrace();\r\n    \t\t}\r\n    \t\treturn result;\r\n    \t}\r\n    \t\r\n     protected String getEncryptedPasswd(String plain) throws Exception {\r\n    \t        try {\r\n    \t            InputStream is = new ByteArrayInputStream(getCertificate().getBytes());\r\n    \t            CertificateFactory cf = CertificateFactory.getInstance(&quot;X.509&quot;);\r\n    \t            X509Certificate cert = (X509Certificate) cf.generateCertificate(is);\r\n    \r\n    \t            PublicKey pubKey = cert.getPublicKey();\r\n    \t            Cipher cipher = Cipher.getInstance(&quot;RSA/ECB/PKCS1Padding&quot;);\r\n    \t            cipher.init(Cipher.ENCRYPT_MODE, pubKey);\r\n    \r\n    \t            byte cipherBytes[] = cipher.doFinal(plain.getBytes());\r\n    \t            String encrypted = Base64.getEncoder().encodeToString(cipherBytes);\r\n    \t            return encrypted;\r\n    \t        } catch (Exception ex) {\r\n    \t            ex.printStackTrace();\r\n    \t            return null;\r\n    \t        }\r\n    \t    }\r\n    \t\t\r\n    \t\t\r\n    \t\tprivate String getCertificate() {\r\n    \t\t\r\n            String certStr = &quot;-----BEGIN CERTIFICATE-----\\n&quot;\r\n                    + &quot;MIIGgDCCBWigAwIBAgIKMvrulAAAAARG5DANBgkqhkiG9w0BAQsFADBbMRMwEQYK&quot;\r\n                    + &quot;CZImiZPyLGQBGRYDbmV0MRkwFwYKCZIm&quot;\r\n                    + &quot;-----END CERTIFICATE-----&quot;;\r\n    \r\n            return certStr;\r\n        }\r\n\r\n\r\n\r\nand my goal here is that wanna compress RSA Encoded value into shorten one.\r\n\r\nI hope after conversion(`RSA` to `UTF-8`) will get some shortened value.\r\n\r\nNote: looking for some compression to the Encoded value if `UTF-8` conversion not helps.\r\n\r\nIs there any way to achieve this in java 8?","title":"Compress RSA Encoded value in java","body":"<p>I am having a java class in which <code>RSA Encryption</code> is performed for the passed <code>String</code> value. getting encoded value as lengthy.</p>\n<p>Input String: <code>justin</code></p>\n<p>RSA Encoded value as output: <code>.eJwdy00OwiAQBtC7zFqS4Ufg8zLNUIaGDZjaxoXx7ja-_fvQc751X3qlB2Wp4kKCU47BZy4A7pa9uuitqNKN5t63PuToY1vO87-wri02gSlSiwloMKhcDZxoSClDAl-zj9exjHkFy0zfH5pUI3w.YfvMdQ.GcmMQuY3BN33JATAfFB3ZyeXO8U</code></p>\n<p>RSA Encryption Code:</p>\n<pre><code>String username=&quot;justin&quot;;\nString encrypteduser=getEncryptedPassword(username);\nSystem.out.println(&quot;encrypteduser! &quot; + encrypteduser); \npublic String getEncryptedPassword(String plainTextPassword)\n    {\n        String result=&quot;&quot;;\n        \n        try {\n            result= getEncryptedPasswd(plainTextPassword);\n            log.info(&quot;result:   &quot; + result);\n        } catch (Exception e) {\n            // TODO Auto-generated catch block\n            e.printStackTrace();\n        }\n        return result;\n    }\n    \n protected String getEncryptedPasswd(String plain) throws Exception {\n            try {\n                InputStream is = new ByteArrayInputStream(getCertificate().getBytes());\n                CertificateFactory cf = CertificateFactory.getInstance(&quot;X.509&quot;);\n                X509Certificate cert = (X509Certificate) cf.generateCertificate(is);\n\n                PublicKey pubKey = cert.getPublicKey();\n                Cipher cipher = Cipher.getInstance(&quot;RSA/ECB/PKCS1Padding&quot;);\n                cipher.init(Cipher.ENCRYPT_MODE, pubKey);\n\n                byte cipherBytes[] = cipher.doFinal(plain.getBytes());\n                String encrypted = Base64.getEncoder().encodeToString(cipherBytes);\n                return encrypted;\n            } catch (Exception ex) {\n                ex.printStackTrace();\n                return null;\n            }\n        }\n        \n        \n        private String getCertificate() {\n        \n        String certStr = &quot;-----BEGIN CERTIFICATE-----\\n&quot;\n                + &quot;MIIGgDCCBWigAwIBAgIKMvrulAAAAARG5DANBgkqhkiG9w0BAQsFADBbMRMwEQYK&quot;\n                + &quot;CZImiZPyLGQBGRYDbmV0MRkwFwYKCZIm&quot;\n                + &quot;-----END CERTIFICATE-----&quot;;\n\n        return certStr;\n    }\n</code></pre>\n<p>and my goal here is that wanna compress RSA Encoded value into shorten one.</p>\n<p>I hope after conversion(<code>RSA</code> to <code>UTF-8</code>) will get some shortened value.</p>\n<p>Note: looking for some compression to the Encoded value if <code>UTF-8</code> conversion not helps.</p>\n<p>Is there any way to achieve this in java 8?</p>\n"},{"tags":["java","android","react-native"],"comments":[{"owner":{"account_id":289882,"reputation":1401,"user_id":591115,"accept_rate":50,"display_name":"Robel Robel Lingstuyl"},"score":1,"creation_date":1666208602,"post_id":71056452,"comment_id":130884174,"body_markdown":"Hi, were you able to resolve or find out any more information about this issue?  We too are seeing it and not sure what is happening/causing it.","body":"Hi, were you able to resolve or find out any more information about this issue?  We too are seeing it and not sure what is happening/causing it."},{"owner":{"account_id":125694,"reputation":1251,"user_id":321629,"accept_rate":41,"display_name":"CyberMew"},"score":0,"creation_date":1680598118,"post_id":71056452,"comment_id":133921165,"body_markdown":"I get those warnings right after I did something that caused an &quot;Exception in native call\n                                                                                                  kotlin.UninitializedPropertyAccessException: lateinit property someVar has not been initialized&quot;. (supposed to crash in Native Android but didn&#39;t in React Native for me)","body":"I get those warnings right after I did something that caused an &quot;Exception in native call                                                                                                   kotlin.UninitializedPropertyAccessException: lateinit property someVar has not been initialized&quot;. (supposed to crash in Native Android but didn&#39;t in React Native for me)"},{"owner":{"account_id":2072951,"reputation":4883,"user_id":1846993,"accept_rate":72,"display_name":"chenop"},"score":0,"creation_date":1683620166,"post_id":71056452,"comment_id":134390410,"body_markdown":"Got the same issue - RN 0.71, hermes enabled, using react-native-firebase packages as well - any idea?","body":"Got the same issue - RN 0.71, hermes enabled, using react-native-firebase packages as well - any idea?"}],"owner":{"account_id":20078053,"reputation":753,"user_id":14721356,"display_name":"Ardalan"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":2188,"favorite_count":0,"down_vote_count":0,"up_vote_count":5,"answer_count":0,"score":5,"last_activity_date":1644441287,"creation_date":1644439408,"question_id":71056452,"body_markdown":"My app was working fine on development mode.\r\nAnd it used to work even in production mode a week ago.\r\nBut today when i built my app using `gradlew assembleRelease` and installed it on my android device, it gives me the error mentioned in title. Here is a log from `adb logcat`:\r\n```\r\n02-09 23:48:02.175 28030 28075 E unknown:ReactContextBaseJavaModule: Unhandled SoftException\r\n02-09 23:48:02.175 28030 28075 E unknown:ReactContextBaseJavaModule: java.lang.RuntimeException: Catalyst Instance has already disappeared: requested by DeviceInfo\r\n02-09 23:48:02.175 28030 28075 E unknown:ReactContextBaseJavaModule: \tat com.facebook.react.bridge.ReactContextBaseJavaModule.getReactApplicationContextIfActiveOrWarn(ReactContextBaseJavaModule.java:66)\r\n02-09 23:48:02.175 28030 28075 E unknown:ReactContextBaseJavaModule: \tat com.facebook.react.modules.deviceinfo.DeviceInfoModule.invalidate(DeviceInfoModule.java:114)\r\n02-09 23:48:02.175 28030 28075 E unknown:ReactContextBaseJavaModule: \tat com.facebook.react.bridge.ModuleHolder.destroy(ModuleHolder.java:110)\r\n02-09 23:48:02.175 28030 28075 E unknown:ReactContextBaseJavaModule: \tat com.facebook.react.bridge.NativeModuleRegistry.notifyJSInstanceDestroy(NativeModuleRegistry.java:108)\r\n02-09 23:48:02.175 28030 28075 E unknown:ReactContextBaseJavaModule: \tat com.facebook.react.bridge.CatalystInstanceImpl$1.run(CatalystInstanceImpl.java:359)\r\n02-09 23:48:02.175 28030 28075 E unknown:ReactContextBaseJavaModule: \tat android.os.Handler.handleCallback(Handler.java:883)\r\n02-09 23:48:02.175 28030 28075 E unknown:ReactContextBaseJavaModule: \tat android.os.Handler.dispatchMessage(Handler.java:100)\r\n02-09 23:48:02.175 28030 28075 E unknown:ReactContextBaseJavaModule: \tat com.facebook.react.bridge.queue.MessageQueueThreadHandler.dispatchMessage(MessageQueueThreadHandler.java:27)\r\n02-09 23:48:02.175 28030 28075 E unknown:ReactContextBaseJavaModule: \tat android.os.Looper.loop(Looper.java:224)\r\n02-09 23:48:02.175 28030 28075 E unknown:ReactContextBaseJavaModule: \tat com.facebook.react.bridge.queue.MessageQueueThreadImpl$4.run(MessageQueueThreadImpl.java:226)\r\n02-09 23:48:02.175 28030 28075 E unknown:ReactContextBaseJavaModule: \tat java.lang.Thread.run(Thread.java:919)\r\n02-09 23:48:02.175 28030 28075 E unknown:ReactContextBaseJavaModule: Unhandled SoftException\r\n02-09 23:48:02.175 28030 28075 E unknown:ReactContextBaseJavaModule: java.lang.RuntimeException: Catalyst Instance has already disappeared: requested by NativeAnimatedModule\r\n02-09 23:48:02.175 28030 28075 E unknown:ReactContextBaseJavaModule: \tat com.facebook.react.bridge.ReactContextBaseJavaModule.getReactApplicationContextIfActiveOrWarn(ReactContextBaseJavaModule.java:66)\r\n02-09 23:48:02.175 28030 28075 E unknown:ReactContextBaseJavaModule: \tat com.facebook.react.animated.NativeAnimatedModule.invalidate(NativeAnimatedModule.java:897)\r\n02-09 23:48:02.175 28030 28075 E unknown:ReactContextBaseJavaModule: \tat com.facebook.react.bridge.ModuleHolder.destroy(ModuleHolder.java:110)\r\n02-09 23:48:02.175 28030 28075 E unknown:ReactContextBaseJavaModule: \tat com.facebook.react.bridge.NativeModuleRegistry.notifyJSInstanceDestroy(NativeModuleRegistry.java:108)\r\n02-09 23:48:02.175 28030 28075 E unknown:ReactContextBaseJavaModule: \tat com.facebook.react.bridge.CatalystInstanceImpl$1.run(CatalystInstanceImpl.java:359)\r\n02-09 23:48:02.175 28030 28075 E unknown:ReactContextBaseJavaModule: \tat android.os.Handler.handleCallback(Handler.java:883)\r\n02-09 23:48:02.175 28030 28075 E unknown:ReactContextBaseJavaModule: \tat android.os.Handler.dispatchMessage(Handler.java:100)\r\n02-09 23:48:02.175 28030 28075 E unknown:ReactContextBaseJavaModule: \tat com.facebook.react.bridge.queue.MessageQueueThreadHandler.dispatchMessage(MessageQueueThreadHandler.java:27)\r\n02-09 23:48:02.175 28030 28075 E unknown:ReactContextBaseJavaModule: \tat android.os.Looper.loop(Looper.java:224)\r\n02-09 23:48:02.175 28030 28075 E unknown:ReactContextBaseJavaModule: \tat com.facebook.react.bridge.queue.MessageQueueThreadImpl$4.run(MessageQueueThreadImpl.java:226)\r\n02-09 23:48:02.175 28030 28075 E unknown:ReactContextBaseJavaModule: \tat java.lang.Thread.run(Thread.java:919)\r\n02-09 23:48:02.175 28030 28075 E unknown:ReactContextBaseJavaModule: Unhandled SoftException\r\n02-09 23:48:02.175 28030 28075 E unknown:ReactContextBaseJavaModule: java.lang.RuntimeException: Catalyst Instance has already disappeared: requested by FrescoModule\r\n02-09 23:48:02.175 28030 28075 E unknown:ReactContextBaseJavaModule: \tat com.facebook.react.bridge.ReactContextBaseJavaModule.getReactApplicationContextIfActiveOrWarn(ReactContextBaseJavaModule.java:66)\r\n02-09 23:48:02.175 28030 28075 E unknown:ReactContextBaseJavaModule: \tat com.facebook.react.modules.fresco.FrescoModule.invalidate(FrescoModule.java:202)\r\n02-09 23:48:02.175 28030 28075 E unknown:ReactContextBaseJavaModule: \tat com.facebook.react.bridge.ModuleHolder.destroy(ModuleHolder.java:110)\r\n02-09 23:48:02.175 28030 28075 E unknown:ReactContextBaseJavaModule: \tat com.facebook.react.bridge.NativeModuleRegistry.notifyJSInstanceDestroy(NativeModuleRegistry.java:108)\r\n02-09 23:48:02.175 28030 28075 E unknown:ReactContextBaseJavaModule: \tat com.facebook.react.bridge.CatalystInstanceImpl$1.run(CatalystInstanceImpl.java:359)\r\n02-09 23:48:02.175 28030 28075 E unknown:ReactContextBaseJavaModule: \tat android.os.Handler.handleCallback(Handler.java:883)\r\n02-09 23:48:02.175 28030 28075 E unknown:ReactContextBaseJavaModule: \tat android.os.Handler.dispatchMessage(Handler.java:100)\r\n02-09 23:48:02.175 28030 28075 E unknown:ReactContextBaseJavaModule: \tat com.facebook.react.bridge.queue.MessageQueueThreadHandler.dispatchMessage(MessageQueueThreadHandler.java:27)\r\n02-09 23:48:02.175 28030 28075 E unknown:ReactContextBaseJavaModule: \tat android.os.Looper.loop(Looper.java:224)\r\n02-09 23:48:02.175 28030 28075 E unknown:ReactContextBaseJavaModule: \tat com.facebook.react.bridge.queue.MessageQueueThreadImpl$4.run(MessageQueueThreadImpl.java:226)\r\n02-09 23:48:02.175 28030 28075 E unknown:ReactContextBaseJavaModule: \tat java.lang.Thread.run(Thread.java:919)\r\n02-09 23:48:02.177 28030 28085 W unknown:ReactNative: Invoking JS callback after bridge has been destroyed.\r\n02-09 23:48:02.177 28030 28084 W unknown:ReactNative: Invoking JS callback after bridge has been destroyed.\r\n02-09 23:48:02.183 28030 28074 W unknown:ReactNative: Calling JS function after bridge has been destroyed: RCTEventEmitter.receiveEvent([7,&quot;topLayout&quot;,{&quot;target&quot;:7,&quot;layout&quot;:{&quot;width&quot;:392.7272644042969,&quot;y&quot;:0,&quot;height&quot;:60,&quot;x&quot;:0}}])\r\n02-09 23:48:02.188 28030 28030 W unknown:ViewManagerPropertyUpdater: Could not find generated setter for class com.facebook.react.views.view.ReactViewManager\r\n02-09 23:48:02.192 28030 28030 E unknown:ReactNative: Unable to handle Exception - catalystInstanceVariableExists: true - isCatalystInstanceAlive: true - hasExceptionHandler: true\r\n02-09 23:48:02.192 28030 28030 E unknown:ReactNative: java.lang.NullPointerException: Attempt to invoke interface method &#39;boolean com.swmansion.reanimated.layoutReanimation.NativeMethodsHolder.isLayoutAnimationEnabled()&#39; on a null object reference\r\n02-09 23:48:02.192 28030 28030 E unknown:ReactNative: \tat com.swmansion.reanimated.layoutReanimation.AnimationsManager.isLayoutAnimationEnabled(AnimationsManager.java:507)\r\n02-09 23:48:02.192 28030 28030 E unknown:ReactNative: \tat com.swmansion.reanimated.layoutReanimation.ReaLayoutAnimator.isLayoutAnimationEnabled(ReanimatedNativeHierarchyManager.java:191)\r\n02-09 23:48:02.192 28030 28030 E unknown:ReactNative: \tat com.swmansion.reanimated.layoutReanimation.ReanimatedNativeHierarchyManager.manageChildren(ReanimatedNativeHierarchyManager.java:266)\r\n02-09 23:48:02.192 28030 28030 E unknown:ReactNative: \tat com.facebook.react.uimanager.UIViewOperationQueue$ManageChildrenOperation.execute(UIViewOperationQueue.java:217)\r\n02-09 23:48:02.192 28030 28030 E unknown:ReactNative: \tat com.facebook.react.uimanager.UIViewOperationQueue$1.run(UIViewOperationQueue.java:915)\r\n02-09 23:48:02.192 28030 28030 E unknown:ReactNative: \tat com.facebook.react.uimanager.UIViewOperationQueue.flushPendingBatches(UIViewOperationQueue.java:1026)\r\n02-09 23:48:02.192 28030 28030 E unknown:ReactNative: \tat com.facebook.react.uimanager.UIViewOperationQueue.access$2600(UIViewOperationQueue.java:47)\r\n02-09 23:48:02.192 28030 28030 E unknown:ReactNative: \tat com.facebook.react.uimanager.UIViewOperationQueue$2.runGuarded(UIViewOperationQueue.java:984)\r\n02-09 23:48:02.192 28030 28030 E unknown:ReactNative: \tat com.facebook.react.bridge.GuardedRunnable.run(GuardedRunnable.java:31)\r\n02-09 23:48:02.192 28030 28030 E unknown:ReactNative: \tat android.os.Handler.handleCallback(Handler.java:883)\r\n02-09 23:48:02.192 28030 28030 E unknown:ReactNative: \tat android.os.Handler.dispatchMessage(Handler.java:100)\r\n02-09 23:48:02.192 28030 28030 E unknown:ReactNative: \tat android.os.Looper.loop(Looper.java:224)\r\n02-09 23:48:02.192 28030 28030 E unknown:ReactNative: \tat android.app.ActivityThread.main(ActivityThread.java:7562)\r\n02-09 23:48:02.192 28030 28030 E unknown:ReactNative: \tat java.lang.reflect.Method.invoke(Native Method)\r\n02-09 23:48:02.192 28030 28030 E unknown:ReactNative: \tat com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:539)\r\n02-09 23:48:02.192 28030 28030 E unknown:ReactNative: \tat com.android.internal.os.ZygoteInit.main(ZygoteInit.java:950)\r\n02-09 23:48:02.193 28030 28086 W unknown:ViewManagerPropertyUpdater: Could not find generated setter for class com.facebook.react.views.drawer.ReactDrawerLayoutManager\r\n02-09 23:48:02.193 28030 28030 D AndroidRuntime: Shutting down VM\r\n02-09 23:48:02.193 28030 28030 E AndroidRuntime: FATAL EXCEPTION: main\r\n02-09 23:48:02.193 28030 28030 E AndroidRuntime: Process: com.wallet, PID: 28030\r\n02-09 23:48:02.193 28030 28030 E AndroidRuntime: java.lang.IllegalStateException: java.lang.NullPointerException: Attempt to invoke interface method &#39;boolean com.swmansion.reanimated.layoutReanimation.NativeMethodsHolder.isLayoutAnimationEnabled()&#39; on a null object reference\r\n02-09 23:48:02.193 28030 28030 E AndroidRuntime: \tat com.facebook.react.bridge.ReactContext.handleException(ReactContext.java:425)\r\n02-09 23:48:02.193 28030 28030 E AndroidRuntime: \tat com.facebook.react.bridge.ReactContext$ExceptionHandlerWrapper.handleException(ReactContext.java:432)\r\n02-09 23:48:02.193 28030 28030 E AndroidRuntime: \tat com.facebook.react.bridge.GuardedRunnable.run(GuardedRunnable.java:33)\r\n02-09 23:48:02.193 28030 28030 E AndroidRuntime: \tat android.os.Handler.handleCallback(Handler.java:883)\r\n02-09 23:48:02.193 28030 28030 E AndroidRuntime: \tat android.os.Handler.dispatchMessage(Handler.java:100)\r\n02-09 23:48:02.193 28030 28030 E AndroidRuntime: \tat android.os.Looper.loop(Looper.java:224)\r\n02-09 23:48:02.193 28030 28030 E AndroidRuntime: \tat android.app.ActivityThread.main(ActivityThread.java:7562)\r\n02-09 23:48:02.193 28030 28030 E AndroidRuntime: \tat java.lang.reflect.Method.invoke(Native Method)\r\n02-09 23:48:02.193 28030 28030 E AndroidRuntime: \tat com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:539)\r\n02-09 23:48:02.193 28030 28030 E AndroidRuntime: \tat com.android.internal.os.ZygoteInit.main(ZygoteInit.java:950)\r\n02-09 23:48:02.193 28030 28030 E AndroidRuntime: Caused by: java.lang.NullPointerException: Attempt to invoke interface method &#39;boolean com.swmansion.reanimated.layoutReanimation.NativeMethodsHolder.isLayoutAnimationEnabled()&#39; on a null object reference\r\n02-09 23:48:02.193 28030 28030 E AndroidRuntime: \tat com.swmansion.reanimated.layoutReanimation.AnimationsManager.isLayoutAnimationEnabled(AnimationsManager.java:507)\r\n02-09 23:48:02.193 28030 28030 E AndroidRuntime: \tat com.swmansion.reanimated.layoutReanimation.ReaLayoutAnimator.isLayoutAnimationEnabled(ReanimatedNativeHierarchyManager.java:191)\r\n02-09 23:48:02.193 28030 28030 E AndroidRuntime: \tat com.swmansion.reanimated.layoutReanimation.ReanimatedNativeHierarchyManager.manageChildren(ReanimatedNativeHierarchyManager.java:266)\r\n02-09 23:48:02.193 28030 28030 E AndroidRuntime: \tat com.facebook.react.uimanager.UIViewOperationQueue$ManageChildrenOperation.execute(UIViewOperationQueue.java:217)\r\n02-09 23:48:02.193 28030 28030 E AndroidRuntime: \tat com.facebook.react.uimanager.UIViewOperationQueue$1.run(UIViewOperationQueue.java:915)\r\n02-09 23:48:02.193 28030 28030 E AndroidRuntime: \tat com.facebook.react.uimanager.UIViewOperationQueue.flushPendingBatches(UIViewOperationQueue.java:1026)\r\n02-09 23:48:02.193 28030 28030 E AndroidRuntime: \tat com.facebook.react.uimanager.UIViewOperationQueue.access$2600(UIViewOperationQueue.java:47)\r\n02-09 23:48:02.193 28030 28030 E AndroidRuntime: \tat com.facebook.react.uimanager.UIViewOperationQueue$2.runGuarded(UIViewOperationQueue.java:984)\r\n02-09 23:48:02.193 28030 28030 E AndroidRuntime: \tat com.facebook.react.bridge.GuardedRunnable.run(GuardedRunnable.java:31)\r\n02-09 23:48:02.193 28030 28030 E AndroidRuntime: \t... 7 more\r\n```\r\nAnd here is my package.json:\r\n```\r\n{\r\n  &quot;name&quot;: &quot;wallet&quot;,\r\n  &quot;version&quot;: &quot;0.0.1&quot;,\r\n  &quot;private&quot;: true,\r\n  &quot;scripts&quot;: {\r\n    &quot;android&quot;: &quot;react-native run-android&quot;,\r\n    &quot;ios&quot;: &quot;react-native run-ios&quot;,\r\n    &quot;start&quot;: &quot;react-native start&quot;,\r\n    &quot;test&quot;: &quot;jest&quot;,\r\n    &quot;lint&quot;: &quot;eslint .&quot;\r\n  },\r\n  &quot;dependencies&quot;: {\r\n    &quot;@react-native-async-storage/async-storage&quot;: &quot;^1.15.14&quot;,\r\n    &quot;@react-native-clipboard/clipboard&quot;: &quot;^1.8.5&quot;,\r\n    &quot;@react-native-community/blur&quot;: &quot;^3.6.0&quot;,\r\n    &quot;@react-native-community/masked-view&quot;: &quot;^0.1.11&quot;,\r\n    &quot;@react-native-community/slider&quot;: &quot;^4.1.12&quot;,\r\n    &quot;@react-native-firebase/app&quot;: &quot;^14.2.4&quot;,\r\n    &quot;@react-native-firebase/messaging&quot;: &quot;^14.2.4&quot;,\r\n    &quot;@react-navigation/bottom-tabs&quot;: &quot;^6.0.9&quot;,\r\n    &quot;@react-navigation/native&quot;: &quot;^6.0.6&quot;,\r\n    &quot;@react-navigation/stack&quot;: &quot;^6.0.11&quot;,\r\n    &quot;axios&quot;: &quot;^0.24.0&quot;,\r\n    &quot;d3-shape&quot;: &quot;^3.1.0&quot;,\r\n    &quot;moment&quot;: &quot;^2.29.1&quot;,\r\n    &quot;moment-jalaali&quot;: &quot;^0.9.4&quot;,\r\n    &quot;moment-timezone&quot;: &quot;^0.5.34&quot;,\r\n    &quot;react&quot;: &quot;17.0.2&quot;,\r\n    &quot;react-freeze&quot;: &quot;^1.0.0&quot;,\r\n    &quot;react-native&quot;: &quot;0.66.4&quot;,\r\n    &quot;react-native-animatable&quot;: &quot;^1.3.3&quot;,\r\n    &quot;react-native-camera&quot;: &quot;^4.2.1&quot;,\r\n    &quot;react-native-contacts&quot;: &quot;^7.0.3&quot;,\r\n    &quot;react-native-device-info&quot;: &quot;^8.4.8&quot;,\r\n    &quot;react-native-elements&quot;: &quot;^3.4.2&quot;,\r\n    &quot;react-native-flags&quot;: &quot;^1.0.0&quot;,\r\n    &quot;react-native-gesture-handler&quot;: &quot;^2.1.0&quot;,\r\n    &quot;react-native-keyboard-aware-scroll-view&quot;: &quot;^0.9.5&quot;,\r\n    &quot;react-native-linear-gradient&quot;: &quot;^2.5.6&quot;,\r\n    &quot;react-native-network-info&quot;: &quot;^5.2.1&quot;,\r\n    &quot;react-native-permissions&quot;: &quot;^3.2.0&quot;,\r\n    &quot;react-native-qrcode-scanner&quot;: &quot;^1.5.4&quot;,\r\n    &quot;react-native-reanimated&quot;: &quot;^2.3.1&quot;,\r\n    &quot;react-native-restart&quot;: &quot;^0.0.23&quot;,\r\n    &quot;react-native-safe-area-context&quot;: &quot;^3.3.2&quot;,\r\n    &quot;react-native-screens&quot;: &quot;^3.10.1&quot;,\r\n    &quot;react-native-splash-screen&quot;: &quot;^3.3.0&quot;,\r\n    &quot;react-native-svg&quot;: &quot;^12.1.1&quot;,\r\n    &quot;react-native-svg-charts&quot;: &quot;^5.4.0&quot;,\r\n    &quot;react-native-toast-message&quot;: &quot;^2.1.1&quot;,\r\n    &quot;react-native-touch-id&quot;: &quot;^4.4.1&quot;,\r\n    &quot;react-native-vector-icons&quot;: &quot;^9.0.0&quot;,\r\n    &quot;react-redux&quot;: &quot;^7.2.6&quot;,\r\n    &quot;redux&quot;: &quot;^4.1.2&quot;,\r\n    &quot;redux-persist&quot;: &quot;^6.0.0&quot;,\r\n    &quot;redux-thunk&quot;: &quot;^2.4.1&quot;,\r\n    &quot;reselect&quot;: &quot;^4.1.5&quot;\r\n  },\r\n  &quot;devDependencies&quot;: {\r\n    &quot;@babel/core&quot;: &quot;^7.12.9&quot;,\r\n    &quot;@babel/runtime&quot;: &quot;^7.12.5&quot;,\r\n    &quot;@react-native-community/eslint-config&quot;: &quot;^2.0.0&quot;,\r\n    &quot;babel-jest&quot;: &quot;^26.6.3&quot;,\r\n    &quot;eslint&quot;: &quot;7.14.0&quot;,\r\n    &quot;jest&quot;: &quot;^26.6.3&quot;,\r\n    &quot;metro-react-native-babel-preset&quot;: &quot;^0.66.2&quot;,\r\n    &quot;react-test-renderer&quot;: &quot;17.0.2&quot;\r\n  },\r\n  &quot;jest&quot;: {\r\n    &quot;preset&quot;: &quot;react-native&quot;\r\n  }\r\n}\r\n\r\n```\r\n\r\n**Note:**  \r\nThe only new thing that i added recently was `react-native-firebase` package and FCM related packages. But i don&#39;t see any traces of them in the log from `logcat`","title":"Unhandled soft exception. java.lang.RuntimeException: Catalyst Instance has already disappeared: requested by DeviceInfo","body":"<p>My app was working fine on development mode.\nAnd it used to work even in production mode a week ago.\nBut today when i built my app using <code>gradlew assembleRelease</code> and installed it on my android device, it gives me the error mentioned in title. Here is a log from <code>adb logcat</code>:</p>\n<pre><code>02-09 23:48:02.175 28030 28075 E unknown:ReactContextBaseJavaModule: Unhandled SoftException\n02-09 23:48:02.175 28030 28075 E unknown:ReactContextBaseJavaModule: java.lang.RuntimeException: Catalyst Instance has already disappeared: requested by DeviceInfo\n02-09 23:48:02.175 28030 28075 E unknown:ReactContextBaseJavaModule:    at com.facebook.react.bridge.ReactContextBaseJavaModule.getReactApplicationContextIfActiveOrWarn(ReactContextBaseJavaModule.java:66)\n02-09 23:48:02.175 28030 28075 E unknown:ReactContextBaseJavaModule:    at com.facebook.react.modules.deviceinfo.DeviceInfoModule.invalidate(DeviceInfoModule.java:114)\n02-09 23:48:02.175 28030 28075 E unknown:ReactContextBaseJavaModule:    at com.facebook.react.bridge.ModuleHolder.destroy(ModuleHolder.java:110)\n02-09 23:48:02.175 28030 28075 E unknown:ReactContextBaseJavaModule:    at com.facebook.react.bridge.NativeModuleRegistry.notifyJSInstanceDestroy(NativeModuleRegistry.java:108)\n02-09 23:48:02.175 28030 28075 E unknown:ReactContextBaseJavaModule:    at com.facebook.react.bridge.CatalystInstanceImpl$1.run(CatalystInstanceImpl.java:359)\n02-09 23:48:02.175 28030 28075 E unknown:ReactContextBaseJavaModule:    at android.os.Handler.handleCallback(Handler.java:883)\n02-09 23:48:02.175 28030 28075 E unknown:ReactContextBaseJavaModule:    at android.os.Handler.dispatchMessage(Handler.java:100)\n02-09 23:48:02.175 28030 28075 E unknown:ReactContextBaseJavaModule:    at com.facebook.react.bridge.queue.MessageQueueThreadHandler.dispatchMessage(MessageQueueThreadHandler.java:27)\n02-09 23:48:02.175 28030 28075 E unknown:ReactContextBaseJavaModule:    at android.os.Looper.loop(Looper.java:224)\n02-09 23:48:02.175 28030 28075 E unknown:ReactContextBaseJavaModule:    at com.facebook.react.bridge.queue.MessageQueueThreadImpl$4.run(MessageQueueThreadImpl.java:226)\n02-09 23:48:02.175 28030 28075 E unknown:ReactContextBaseJavaModule:    at java.lang.Thread.run(Thread.java:919)\n02-09 23:48:02.175 28030 28075 E unknown:ReactContextBaseJavaModule: Unhandled SoftException\n02-09 23:48:02.175 28030 28075 E unknown:ReactContextBaseJavaModule: java.lang.RuntimeException: Catalyst Instance has already disappeared: requested by NativeAnimatedModule\n02-09 23:48:02.175 28030 28075 E unknown:ReactContextBaseJavaModule:    at com.facebook.react.bridge.ReactContextBaseJavaModule.getReactApplicationContextIfActiveOrWarn(ReactContextBaseJavaModule.java:66)\n02-09 23:48:02.175 28030 28075 E unknown:ReactContextBaseJavaModule:    at com.facebook.react.animated.NativeAnimatedModule.invalidate(NativeAnimatedModule.java:897)\n02-09 23:48:02.175 28030 28075 E unknown:ReactContextBaseJavaModule:    at com.facebook.react.bridge.ModuleHolder.destroy(ModuleHolder.java:110)\n02-09 23:48:02.175 28030 28075 E unknown:ReactContextBaseJavaModule:    at com.facebook.react.bridge.NativeModuleRegistry.notifyJSInstanceDestroy(NativeModuleRegistry.java:108)\n02-09 23:48:02.175 28030 28075 E unknown:ReactContextBaseJavaModule:    at com.facebook.react.bridge.CatalystInstanceImpl$1.run(CatalystInstanceImpl.java:359)\n02-09 23:48:02.175 28030 28075 E unknown:ReactContextBaseJavaModule:    at android.os.Handler.handleCallback(Handler.java:883)\n02-09 23:48:02.175 28030 28075 E unknown:ReactContextBaseJavaModule:    at android.os.Handler.dispatchMessage(Handler.java:100)\n02-09 23:48:02.175 28030 28075 E unknown:ReactContextBaseJavaModule:    at com.facebook.react.bridge.queue.MessageQueueThreadHandler.dispatchMessage(MessageQueueThreadHandler.java:27)\n02-09 23:48:02.175 28030 28075 E unknown:ReactContextBaseJavaModule:    at android.os.Looper.loop(Looper.java:224)\n02-09 23:48:02.175 28030 28075 E unknown:ReactContextBaseJavaModule:    at com.facebook.react.bridge.queue.MessageQueueThreadImpl$4.run(MessageQueueThreadImpl.java:226)\n02-09 23:48:02.175 28030 28075 E unknown:ReactContextBaseJavaModule:    at java.lang.Thread.run(Thread.java:919)\n02-09 23:48:02.175 28030 28075 E unknown:ReactContextBaseJavaModule: Unhandled SoftException\n02-09 23:48:02.175 28030 28075 E unknown:ReactContextBaseJavaModule: java.lang.RuntimeException: Catalyst Instance has already disappeared: requested by FrescoModule\n02-09 23:48:02.175 28030 28075 E unknown:ReactContextBaseJavaModule:    at com.facebook.react.bridge.ReactContextBaseJavaModule.getReactApplicationContextIfActiveOrWarn(ReactContextBaseJavaModule.java:66)\n02-09 23:48:02.175 28030 28075 E unknown:ReactContextBaseJavaModule:    at com.facebook.react.modules.fresco.FrescoModule.invalidate(FrescoModule.java:202)\n02-09 23:48:02.175 28030 28075 E unknown:ReactContextBaseJavaModule:    at com.facebook.react.bridge.ModuleHolder.destroy(ModuleHolder.java:110)\n02-09 23:48:02.175 28030 28075 E unknown:ReactContextBaseJavaModule:    at com.facebook.react.bridge.NativeModuleRegistry.notifyJSInstanceDestroy(NativeModuleRegistry.java:108)\n02-09 23:48:02.175 28030 28075 E unknown:ReactContextBaseJavaModule:    at com.facebook.react.bridge.CatalystInstanceImpl$1.run(CatalystInstanceImpl.java:359)\n02-09 23:48:02.175 28030 28075 E unknown:ReactContextBaseJavaModule:    at android.os.Handler.handleCallback(Handler.java:883)\n02-09 23:48:02.175 28030 28075 E unknown:ReactContextBaseJavaModule:    at android.os.Handler.dispatchMessage(Handler.java:100)\n02-09 23:48:02.175 28030 28075 E unknown:ReactContextBaseJavaModule:    at com.facebook.react.bridge.queue.MessageQueueThreadHandler.dispatchMessage(MessageQueueThreadHandler.java:27)\n02-09 23:48:02.175 28030 28075 E unknown:ReactContextBaseJavaModule:    at android.os.Looper.loop(Looper.java:224)\n02-09 23:48:02.175 28030 28075 E unknown:ReactContextBaseJavaModule:    at com.facebook.react.bridge.queue.MessageQueueThreadImpl$4.run(MessageQueueThreadImpl.java:226)\n02-09 23:48:02.175 28030 28075 E unknown:ReactContextBaseJavaModule:    at java.lang.Thread.run(Thread.java:919)\n02-09 23:48:02.177 28030 28085 W unknown:ReactNative: Invoking JS callback after bridge has been destroyed.\n02-09 23:48:02.177 28030 28084 W unknown:ReactNative: Invoking JS callback after bridge has been destroyed.\n02-09 23:48:02.183 28030 28074 W unknown:ReactNative: Calling JS function after bridge has been destroyed: RCTEventEmitter.receiveEvent([7,&quot;topLayout&quot;,{&quot;target&quot;:7,&quot;layout&quot;:{&quot;width&quot;:392.7272644042969,&quot;y&quot;:0,&quot;height&quot;:60,&quot;x&quot;:0}}])\n02-09 23:48:02.188 28030 28030 W unknown:ViewManagerPropertyUpdater: Could not find generated setter for class com.facebook.react.views.view.ReactViewManager\n02-09 23:48:02.192 28030 28030 E unknown:ReactNative: Unable to handle Exception - catalystInstanceVariableExists: true - isCatalystInstanceAlive: true - hasExceptionHandler: true\n02-09 23:48:02.192 28030 28030 E unknown:ReactNative: java.lang.NullPointerException: Attempt to invoke interface method 'boolean com.swmansion.reanimated.layoutReanimation.NativeMethodsHolder.isLayoutAnimationEnabled()' on a null object reference\n02-09 23:48:02.192 28030 28030 E unknown:ReactNative:   at com.swmansion.reanimated.layoutReanimation.AnimationsManager.isLayoutAnimationEnabled(AnimationsManager.java:507)\n02-09 23:48:02.192 28030 28030 E unknown:ReactNative:   at com.swmansion.reanimated.layoutReanimation.ReaLayoutAnimator.isLayoutAnimationEnabled(ReanimatedNativeHierarchyManager.java:191)\n02-09 23:48:02.192 28030 28030 E unknown:ReactNative:   at com.swmansion.reanimated.layoutReanimation.ReanimatedNativeHierarchyManager.manageChildren(ReanimatedNativeHierarchyManager.java:266)\n02-09 23:48:02.192 28030 28030 E unknown:ReactNative:   at com.facebook.react.uimanager.UIViewOperationQueue$ManageChildrenOperation.execute(UIViewOperationQueue.java:217)\n02-09 23:48:02.192 28030 28030 E unknown:ReactNative:   at com.facebook.react.uimanager.UIViewOperationQueue$1.run(UIViewOperationQueue.java:915)\n02-09 23:48:02.192 28030 28030 E unknown:ReactNative:   at com.facebook.react.uimanager.UIViewOperationQueue.flushPendingBatches(UIViewOperationQueue.java:1026)\n02-09 23:48:02.192 28030 28030 E unknown:ReactNative:   at com.facebook.react.uimanager.UIViewOperationQueue.access$2600(UIViewOperationQueue.java:47)\n02-09 23:48:02.192 28030 28030 E unknown:ReactNative:   at com.facebook.react.uimanager.UIViewOperationQueue$2.runGuarded(UIViewOperationQueue.java:984)\n02-09 23:48:02.192 28030 28030 E unknown:ReactNative:   at com.facebook.react.bridge.GuardedRunnable.run(GuardedRunnable.java:31)\n02-09 23:48:02.192 28030 28030 E unknown:ReactNative:   at android.os.Handler.handleCallback(Handler.java:883)\n02-09 23:48:02.192 28030 28030 E unknown:ReactNative:   at android.os.Handler.dispatchMessage(Handler.java:100)\n02-09 23:48:02.192 28030 28030 E unknown:ReactNative:   at android.os.Looper.loop(Looper.java:224)\n02-09 23:48:02.192 28030 28030 E unknown:ReactNative:   at android.app.ActivityThread.main(ActivityThread.java:7562)\n02-09 23:48:02.192 28030 28030 E unknown:ReactNative:   at java.lang.reflect.Method.invoke(Native Method)\n02-09 23:48:02.192 28030 28030 E unknown:ReactNative:   at com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:539)\n02-09 23:48:02.192 28030 28030 E unknown:ReactNative:   at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:950)\n02-09 23:48:02.193 28030 28086 W unknown:ViewManagerPropertyUpdater: Could not find generated setter for class com.facebook.react.views.drawer.ReactDrawerLayoutManager\n02-09 23:48:02.193 28030 28030 D AndroidRuntime: Shutting down VM\n02-09 23:48:02.193 28030 28030 E AndroidRuntime: FATAL EXCEPTION: main\n02-09 23:48:02.193 28030 28030 E AndroidRuntime: Process: com.wallet, PID: 28030\n02-09 23:48:02.193 28030 28030 E AndroidRuntime: java.lang.IllegalStateException: java.lang.NullPointerException: Attempt to invoke interface method 'boolean com.swmansion.reanimated.layoutReanimation.NativeMethodsHolder.isLayoutAnimationEnabled()' on a null object reference\n02-09 23:48:02.193 28030 28030 E AndroidRuntime:    at com.facebook.react.bridge.ReactContext.handleException(ReactContext.java:425)\n02-09 23:48:02.193 28030 28030 E AndroidRuntime:    at com.facebook.react.bridge.ReactContext$ExceptionHandlerWrapper.handleException(ReactContext.java:432)\n02-09 23:48:02.193 28030 28030 E AndroidRuntime:    at com.facebook.react.bridge.GuardedRunnable.run(GuardedRunnable.java:33)\n02-09 23:48:02.193 28030 28030 E AndroidRuntime:    at android.os.Handler.handleCallback(Handler.java:883)\n02-09 23:48:02.193 28030 28030 E AndroidRuntime:    at android.os.Handler.dispatchMessage(Handler.java:100)\n02-09 23:48:02.193 28030 28030 E AndroidRuntime:    at android.os.Looper.loop(Looper.java:224)\n02-09 23:48:02.193 28030 28030 E AndroidRuntime:    at android.app.ActivityThread.main(ActivityThread.java:7562)\n02-09 23:48:02.193 28030 28030 E AndroidRuntime:    at java.lang.reflect.Method.invoke(Native Method)\n02-09 23:48:02.193 28030 28030 E AndroidRuntime:    at com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:539)\n02-09 23:48:02.193 28030 28030 E AndroidRuntime:    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:950)\n02-09 23:48:02.193 28030 28030 E AndroidRuntime: Caused by: java.lang.NullPointerException: Attempt to invoke interface method 'boolean com.swmansion.reanimated.layoutReanimation.NativeMethodsHolder.isLayoutAnimationEnabled()' on a null object reference\n02-09 23:48:02.193 28030 28030 E AndroidRuntime:    at com.swmansion.reanimated.layoutReanimation.AnimationsManager.isLayoutAnimationEnabled(AnimationsManager.java:507)\n02-09 23:48:02.193 28030 28030 E AndroidRuntime:    at com.swmansion.reanimated.layoutReanimation.ReaLayoutAnimator.isLayoutAnimationEnabled(ReanimatedNativeHierarchyManager.java:191)\n02-09 23:48:02.193 28030 28030 E AndroidRuntime:    at com.swmansion.reanimated.layoutReanimation.ReanimatedNativeHierarchyManager.manageChildren(ReanimatedNativeHierarchyManager.java:266)\n02-09 23:48:02.193 28030 28030 E AndroidRuntime:    at com.facebook.react.uimanager.UIViewOperationQueue$ManageChildrenOperation.execute(UIViewOperationQueue.java:217)\n02-09 23:48:02.193 28030 28030 E AndroidRuntime:    at com.facebook.react.uimanager.UIViewOperationQueue$1.run(UIViewOperationQueue.java:915)\n02-09 23:48:02.193 28030 28030 E AndroidRuntime:    at com.facebook.react.uimanager.UIViewOperationQueue.flushPendingBatches(UIViewOperationQueue.java:1026)\n02-09 23:48:02.193 28030 28030 E AndroidRuntime:    at com.facebook.react.uimanager.UIViewOperationQueue.access$2600(UIViewOperationQueue.java:47)\n02-09 23:48:02.193 28030 28030 E AndroidRuntime:    at com.facebook.react.uimanager.UIViewOperationQueue$2.runGuarded(UIViewOperationQueue.java:984)\n02-09 23:48:02.193 28030 28030 E AndroidRuntime:    at com.facebook.react.bridge.GuardedRunnable.run(GuardedRunnable.java:31)\n02-09 23:48:02.193 28030 28030 E AndroidRuntime:    ... 7 more\n</code></pre>\n<p>And here is my package.json:</p>\n<pre><code>{\n  &quot;name&quot;: &quot;wallet&quot;,\n  &quot;version&quot;: &quot;0.0.1&quot;,\n  &quot;private&quot;: true,\n  &quot;scripts&quot;: {\n    &quot;android&quot;: &quot;react-native run-android&quot;,\n    &quot;ios&quot;: &quot;react-native run-ios&quot;,\n    &quot;start&quot;: &quot;react-native start&quot;,\n    &quot;test&quot;: &quot;jest&quot;,\n    &quot;lint&quot;: &quot;eslint .&quot;\n  },\n  &quot;dependencies&quot;: {\n    &quot;@react-native-async-storage/async-storage&quot;: &quot;^1.15.14&quot;,\n    &quot;@react-native-clipboard/clipboard&quot;: &quot;^1.8.5&quot;,\n    &quot;@react-native-community/blur&quot;: &quot;^3.6.0&quot;,\n    &quot;@react-native-community/masked-view&quot;: &quot;^0.1.11&quot;,\n    &quot;@react-native-community/slider&quot;: &quot;^4.1.12&quot;,\n    &quot;@react-native-firebase/app&quot;: &quot;^14.2.4&quot;,\n    &quot;@react-native-firebase/messaging&quot;: &quot;^14.2.4&quot;,\n    &quot;@react-navigation/bottom-tabs&quot;: &quot;^6.0.9&quot;,\n    &quot;@react-navigation/native&quot;: &quot;^6.0.6&quot;,\n    &quot;@react-navigation/stack&quot;: &quot;^6.0.11&quot;,\n    &quot;axios&quot;: &quot;^0.24.0&quot;,\n    &quot;d3-shape&quot;: &quot;^3.1.0&quot;,\n    &quot;moment&quot;: &quot;^2.29.1&quot;,\n    &quot;moment-jalaali&quot;: &quot;^0.9.4&quot;,\n    &quot;moment-timezone&quot;: &quot;^0.5.34&quot;,\n    &quot;react&quot;: &quot;17.0.2&quot;,\n    &quot;react-freeze&quot;: &quot;^1.0.0&quot;,\n    &quot;react-native&quot;: &quot;0.66.4&quot;,\n    &quot;react-native-animatable&quot;: &quot;^1.3.3&quot;,\n    &quot;react-native-camera&quot;: &quot;^4.2.1&quot;,\n    &quot;react-native-contacts&quot;: &quot;^7.0.3&quot;,\n    &quot;react-native-device-info&quot;: &quot;^8.4.8&quot;,\n    &quot;react-native-elements&quot;: &quot;^3.4.2&quot;,\n    &quot;react-native-flags&quot;: &quot;^1.0.0&quot;,\n    &quot;react-native-gesture-handler&quot;: &quot;^2.1.0&quot;,\n    &quot;react-native-keyboard-aware-scroll-view&quot;: &quot;^0.9.5&quot;,\n    &quot;react-native-linear-gradient&quot;: &quot;^2.5.6&quot;,\n    &quot;react-native-network-info&quot;: &quot;^5.2.1&quot;,\n    &quot;react-native-permissions&quot;: &quot;^3.2.0&quot;,\n    &quot;react-native-qrcode-scanner&quot;: &quot;^1.5.4&quot;,\n    &quot;react-native-reanimated&quot;: &quot;^2.3.1&quot;,\n    &quot;react-native-restart&quot;: &quot;^0.0.23&quot;,\n    &quot;react-native-safe-area-context&quot;: &quot;^3.3.2&quot;,\n    &quot;react-native-screens&quot;: &quot;^3.10.1&quot;,\n    &quot;react-native-splash-screen&quot;: &quot;^3.3.0&quot;,\n    &quot;react-native-svg&quot;: &quot;^12.1.1&quot;,\n    &quot;react-native-svg-charts&quot;: &quot;^5.4.0&quot;,\n    &quot;react-native-toast-message&quot;: &quot;^2.1.1&quot;,\n    &quot;react-native-touch-id&quot;: &quot;^4.4.1&quot;,\n    &quot;react-native-vector-icons&quot;: &quot;^9.0.0&quot;,\n    &quot;react-redux&quot;: &quot;^7.2.6&quot;,\n    &quot;redux&quot;: &quot;^4.1.2&quot;,\n    &quot;redux-persist&quot;: &quot;^6.0.0&quot;,\n    &quot;redux-thunk&quot;: &quot;^2.4.1&quot;,\n    &quot;reselect&quot;: &quot;^4.1.5&quot;\n  },\n  &quot;devDependencies&quot;: {\n    &quot;@babel/core&quot;: &quot;^7.12.9&quot;,\n    &quot;@babel/runtime&quot;: &quot;^7.12.5&quot;,\n    &quot;@react-native-community/eslint-config&quot;: &quot;^2.0.0&quot;,\n    &quot;babel-jest&quot;: &quot;^26.6.3&quot;,\n    &quot;eslint&quot;: &quot;7.14.0&quot;,\n    &quot;jest&quot;: &quot;^26.6.3&quot;,\n    &quot;metro-react-native-babel-preset&quot;: &quot;^0.66.2&quot;,\n    &quot;react-test-renderer&quot;: &quot;17.0.2&quot;\n  },\n  &quot;jest&quot;: {\n    &quot;preset&quot;: &quot;react-native&quot;\n  }\n}\n\n</code></pre>\n<p><strong>Note:</strong><br />\nThe only new thing that i added recently was <code>react-native-firebase</code> package and FCM related packages. But i don't see any traces of them in the log from <code>logcat</code></p>\n"},{"tags":["java","arraylist","casting"],"answers":[{"tags":[],"owner":{"account_id":8803777,"reputation":2946,"user_id":6579116,"accept_rate":27,"display_name":"Pirate"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1644435384,"creation_date":1644434929,"answer_id":71055601,"question_id":71055514,"body_markdown":"    List&lt;Long&gt; longList =  arr.stream().map(Long::valueOf).collect(Collectors.toList());","title":"List&lt;Integer&gt; to List&lt;Long&gt; conversion in Java 11 using Streams","body":"<pre><code>List&lt;Long&gt; longList =  arr.stream().map(Long::valueOf).collect(Collectors.toList());\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1674243,"reputation":10043,"user_id":1553537,"accept_rate":29,"display_name":"Giorgi Tsiklauri"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1644436149,"creation_date":1644435695,"answer_id":71055749,"question_id":71055514,"body_markdown":"Use:\r\n```java\r\nList&lt;Long&gt; longList = arr.stream()\r\n    .map(Long::valueOf) //or map to any other type/objects with &quot;e -&gt; new...&quot;\r\n    .collect(Collectors.toList());\r\n```","title":"List&lt;Integer&gt; to List&lt;Long&gt; conversion in Java 11 using Streams","body":"<p>Use:</p>\n<pre class=\"lang-java prettyprint-override\"><code>List&lt;Long&gt; longList = arr.stream()\n    .map(Long::valueOf) //or map to any other type/objects with &quot;e -&gt; new...&quot;\n    .collect(Collectors.toList());\n</code></pre>\n"},{"tags":[],"owner":{"account_id":960307,"reputation":107861,"user_id":984823,"display_name":"Joop Eggen"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1644441018,"creation_date":1644441018,"answer_id":71056759,"question_id":71055514,"body_markdown":"    List&lt;Integer&gt; arr = new ArrayList&lt;&gt;();\r\n    ...\r\n\r\n    List&lt;Long&gt; longs = arr.stream()    // Stream&lt;Integer&gt;\r\n        .mapToLong(Integer::longValue) // LongStream\r\n        .boxed()                       // Stream&lt;Long&gt;\r\n        .collect(Collectors.toList());\r\n\r\n    List&lt;Long&gt; longs = arr.stream()            // Stream&lt;Integer&gt;\r\n        .map(n -&gt; Long.valueOf(n.longValue())) // Stream&lt;Long&gt;\r\n        .collect(Collectors.toList());\r\n\r\nThe latter uses Integer.longValue(), though Integer.intValue() would have done also.\r\nRelying on Integer to int unboxing and then Long.valueOf widening int to long, is too convoluted. Not sure whether there is a speed/memory difference. Should not.\r\n\r\nAlternatively with a different data structure for `arr`:\r\n    \r\n    IntStream arr = IntStream.of(1, 3, 5, 7, 9);\r\n    List&lt;Long&gt; longs = arr.asLongStream() // LongStream\r\n        .boxed()                          // Stream&lt;Long&gt;\r\n        .collect(Collectors.toList());\r\n\r\nBasically you have to map an Integer to a Long.","title":"List&lt;Integer&gt; to List&lt;Long&gt; conversion in Java 11 using Streams","body":"<pre><code>List&lt;Integer&gt; arr = new ArrayList&lt;&gt;();\n...\n\nList&lt;Long&gt; longs = arr.stream()    // Stream&lt;Integer&gt;\n    .mapToLong(Integer::longValue) // LongStream\n    .boxed()                       // Stream&lt;Long&gt;\n    .collect(Collectors.toList());\n\nList&lt;Long&gt; longs = arr.stream()            // Stream&lt;Integer&gt;\n    .map(n -&gt; Long.valueOf(n.longValue())) // Stream&lt;Long&gt;\n    .collect(Collectors.toList());\n</code></pre>\n<p>The latter uses Integer.longValue(), though Integer.intValue() would have done also.\nRelying on Integer to int unboxing and then Long.valueOf widening int to long, is too convoluted. Not sure whether there is a speed/memory difference. Should not.</p>\n<p>Alternatively with a different data structure for <code>arr</code>:</p>\n<pre><code>IntStream arr = IntStream.of(1, 3, 5, 7, 9);\nList&lt;Long&gt; longs = arr.asLongStream() // LongStream\n    .boxed()                          // Stream&lt;Long&gt;\n    .collect(Collectors.toList());\n</code></pre>\n<p>Basically you have to map an Integer to a Long.</p>\n"}],"owner":{"account_id":2390845,"reputation":1641,"user_id":2090764,"accept_rate":39,"display_name":"avafab"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2536,"favorite_count":0,"down_vote_count":5,"up_vote_count":4,"answer_count":3,"score":-1,"last_activity_date":1644441018,"creation_date":1644434598,"question_id":71055514,"body_markdown":"I have a list of Integer and would like to convert into a list of Long (or any other type) by using Streams. I tried multiple options but all failed. How do I do that?\r\n\r\n    List&lt;Integer&gt; arr = new ArrayList&lt;Integer&gt;();\r\n        arr.add(1);\r\n        arr.add(3);\r\n        arr.add(5);\r\n        arr.add(7);\r\n        arr.add(9);\r\n\r\n","title":"List&lt;Integer&gt; to List&lt;Long&gt; conversion in Java 11 using Streams","body":"<p>I have a list of Integer and would like to convert into a list of Long (or any other type) by using Streams. I tried multiple options but all failed. How do I do that?</p>\n<pre><code>List&lt;Integer&gt; arr = new ArrayList&lt;Integer&gt;();\n    arr.add(1);\n    arr.add(3);\n    arr.add(5);\n    arr.add(7);\n    arr.add(9);\n</code></pre>\n"},{"tags":["java","spring","spring-boot","jwt","lombok"],"answers":[{"tags":[],"owner":{"account_id":20973049,"reputation":3,"user_id":15409762,"display_name":"Othmane Zarai"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1644424199,"creation_date":1644424199,"answer_id":71053262,"question_id":71051459,"body_markdown":"First try to call your api with Postman, else i think you need to add authorization jwt header to every api request after you login.\r\n\r\n        export default function authHeader() {\r\n      const user = JSON.parse(localStorage.getItem(&#39;user&#39;));\r\n      if (user &amp;&amp; user.accessToken) {\r\n        return { Authorization: &#39;Bearer &#39; + user.accessToken };\r\n      } else {\r\n        return {};\r\n      }\r\n    }\r\nand then call your api like this:\r\n\r\n    return axios.get(API_URL + &#39;user&#39;, { headers: authHeader() });\r\n\r\nfor more informations try to visit: https://www.bezkoder.com/react-jwt-auth/","title":"Spring API doesn&#39;t login and send infos (get&amp;set) to React with JWT with same code","body":"<p>First try to call your api with Postman, else i think you need to add authorization jwt header to every api request after you login.</p>\n<pre><code>    export default function authHeader() {\n  const user = JSON.parse(localStorage.getItem('user'));\n  if (user &amp;&amp; user.accessToken) {\n    return { Authorization: 'Bearer ' + user.accessToken };\n  } else {\n    return {};\n  }\n}\n</code></pre>\n<p>and then call your api like this:</p>\n<pre><code>return axios.get(API_URL + 'user', { headers: authHeader() });\n</code></pre>\n<p>for more informations try to visit: <a href=\"https://www.bezkoder.com/react-jwt-auth/\" rel=\"nofollow noreferrer\">https://www.bezkoder.com/react-jwt-auth/</a></p>\n"},{"tags":[],"owner":{"account_id":22754101,"reputation":11,"user_id":16913814,"display_name":"Guilherme Gusman"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1644440516,"creation_date":1644440516,"answer_id":71056672,"question_id":71051459,"body_markdown":"I just fixed using this global cors\r\n\r\n```\r\n@Bean\r\n\tpublic CorsConfigurationSource corsConfigurationSource() {\r\n\t\tUrlBasedCorsConfigurationSource source = new UrlBasedCorsConfigurationSource();\r\n        source.registerCorsConfiguration(&quot;/**&quot;, new CorsConfiguration().applyPermitDefaultValues());\r\n        return source;\r\n\t\t}\r\n```","title":"Spring API doesn&#39;t login and send infos (get&amp;set) to React with JWT with same code","body":"<p>I just fixed using this global cors</p>\n<pre><code>@Bean\n    public CorsConfigurationSource corsConfigurationSource() {\n        UrlBasedCorsConfigurationSource source = new UrlBasedCorsConfigurationSource();\n        source.registerCorsConfiguration(&quot;/**&quot;, new CorsConfiguration().applyPermitDefaultValues());\n        return source;\n        }\n</code></pre>\n"}],"owner":{"account_id":22754101,"reputation":11,"user_id":16913814,"display_name":"Guilherme Gusman"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":218,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1644440516,"creation_date":1644417304,"question_id":71051459,"body_markdown":"The title is self explanatory, I have this API made in Spring, and after JWT implementation I can login, but the *gets* doesn&#39;t work anymore.\r\n\r\nBut if I comment the the **CorsConfigurationSource corsConfigurationSource()** and the Lombok annotation **@RequiredArgsConstructor** in SecurityConfig, the login stop to work, but all the *gets* work beautifully.\r\n\r\nI&#39;ll post the class SecurityConfig, AuthorizationFilter and the AuthenticationFilter respectively for you guys try to see whats going wrong.\r\n\r\n```\r\nimport org.alterdata.shopback.app.security.AuthenticationFilter;\r\nimport org.alterdata.shopback.app.security.AuthorizationFilter;\r\nimport org.springframework.beans.factory.annotation.Autowired;\r\nimport org.springframework.context.annotation.Bean;\r\nimport org.springframework.context.annotation.Configuration;\r\nimport org.springframework.security.authentication.AuthenticationManager;\r\nimport org.springframework.security.config.annotation.authentication.builders.AuthenticationManagerBuilder;\r\nimport org.springframework.security.config.annotation.web.builders.HttpSecurity;\r\nimport org.springframework.security.config.annotation.web.configuration.EnableWebSecurity;\r\nimport org.springframework.security.config.annotation.web.configuration.WebSecurityConfigurerAdapter;\r\nimport org.springframework.security.config.http.SessionCreationPolicy;\r\nimport org.springframework.security.core.userdetails.UserDetailsService;\r\nimport org.springframework.security.crypto.bcrypt.BCryptPasswordEncoder;\r\nimport org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter;\r\n\r\nimport lombok.RequiredArgsConstructor;\r\nimport org.springframework.web.cors.CorsConfiguration;\r\nimport org.springframework.web.cors.CorsConfigurationSource;\r\nimport org.springframework.web.cors.UrlBasedCorsConfigurationSource;\r\n\r\nimport java.util.Arrays;\r\n\r\n@Configuration\r\n@EnableWebSecurity\r\n@RequiredArgsConstructor\r\npublic class SecurityConfig extends WebSecurityConfigurerAdapter{\r\n\r\n\r\n\t@Autowired\r\n\tUserDetailsService userDetailsService;\r\n\r\n\t@Autowired\r\n\tBCryptPasswordEncoder bCryptPasswordEncoder;\r\n\r\n\r\n\t@Override\r\n\tprotected void configure(HttpSecurity http) throws Exception {\r\n\t\tAuthenticationFilter authenticationFilter = new AuthenticationFilter(authenticationManagerBean());\r\n\t\thttp.cors().and().csrf().disable();\r\n\t\thttp.sessionManagement().sessionCreationPolicy(SessionCreationPolicy.STATELESS);\r\n\t\thttp.authorizeRequests().antMatchers(&quot;/login&quot;).permitAll()\r\n\t\t.antMatchers(&quot;/cadastrar/**&quot;).hasAnyAuthority(&quot;ADMIN&quot;)\r\n\t\t.antMatchers(&quot;/cadastro/**&quot;).hasAnyAuthority(&quot;ADMIN&quot;)\r\n\t\t.anyRequest().authenticated();\r\n\t\thttp.addFilter(authenticationFilter);\r\n\t\thttp.addFilterBefore(new AuthorizationFilter(), UsernamePasswordAuthenticationFilter.class);\r\n\t}\r\n\r\n\r\n\t@Override\r\n\tpublic void configure(AuthenticationManagerBuilder auth) throws Exception {\r\n\t\tauth.userDetailsService(userDetailsService).passwordEncoder(bCryptPasswordEncoder);\r\n\t}\r\n\r\n\t@Bean\r\n\t@Override\r\n\tpublic AuthenticationManager authenticationManager()throws Exception{\r\n\t\treturn super.authenticationManager();\r\n\t}\r\n\r\n\r\n\t@Bean\r\n\tpublic CorsConfigurationSource corsConfigurationSource() {\r\n\t\tCorsConfiguration configuration = new CorsConfiguration();\r\n\t\tconfiguration.setAllowedOrigins(Arrays.asList(&quot;http://localhost:3000&quot;));\r\n\t\tconfiguration.setAllowedMethods(Arrays.asList(&quot;GET&quot;, &quot;POST&quot;, &quot;PUT&quot;, &quot;DELETE&quot;,&quot;OPTIONS&quot;, &quot;HEAD&quot;));\r\n\t\tUrlBasedCorsConfigurationSource source = new UrlBasedCorsConfigurationSource();\r\n\t\tsource.registerCorsConfiguration(&quot;/**&quot;, configuration);\r\n\t\t\treturn source;\r\n\t\t}\r\n}\r\n\r\n```\r\n\r\n```\r\nimport java.io.IOException;\r\nimport java.util.ArrayList;\r\nimport java.util.Collection;\r\nimport java.util.HashMap;\r\nimport java.util.Map;\r\nimport java.util.Arrays;\r\n\r\nimport javax.servlet.FilterChain;\r\nimport javax.servlet.ServletException;\r\nimport javax.servlet.http.HttpServletRequest;\r\nimport javax.servlet.http.HttpServletResponse;\r\n\r\nimport com.auth0.jwt.exceptions.JWTVerificationException;\r\nimport io.jsonwebtoken.JwtException;\r\nimport lombok.extern.slf4j.Slf4j;\r\nimport org.springframework.http.HttpHeaders;\r\nimport org.springframework.security.authentication.UsernamePasswordAuthenticationToken;\r\nimport org.springframework.security.core.authority.SimpleGrantedAuthority;\r\nimport org.springframework.security.core.context.SecurityContextHolder;\r\nimport org.springframework.web.filter.OncePerRequestFilter;\r\n\r\nimport com.auth0.jwt.JWT;\r\nimport com.auth0.jwt.algorithms.Algorithm;\r\nimport com.auth0.jwt.interfaces.DecodedJWT;\r\nimport com.auth0.jwt.interfaces.JWTVerifier;\r\nimport com.fasterxml.jackson.databind.ObjectMapper;\r\n\r\nimport net.bytebuddy.implementation.bind.annotation.IgnoreForBinding.Verifier;\r\n\r\nimport static org.springframework.util.MimeTypeUtils.APPLICATION_JSON_VALUE;\r\n\r\n@Slf4j\r\npublic class AuthorizationFilter extends OncePerRequestFilter {\r\n\r\n\t@Override\r\n\tprotected void doFilterInternal(HttpServletRequest request, HttpServletResponse response, FilterChain filterChain)\r\n\t\t\tthrows ServletException, IOException {\r\n\t\tif(request.getServletPath().equals(&quot;/login&quot;)) {\r\n\t\t\tfilterChain.doFilter(request, response);\r\n\t\t}else {\r\n\t\t\tString authorizationHeader = request.getHeader(HttpHeaders.AUTHORIZATION);\r\n\t\t\tif(authorizationHeader != null &amp;&amp; authorizationHeader.startsWith(&quot;Bearer &quot;)) {\r\n\t\t\t\ttry {\r\n\t\t\t\tString token = authorizationHeader.substring(&quot;Bearer &quot;.length());\r\n\t\t\t\tAlgorithm algorithm = Algorithm.HMAC256(&quot;segredinho&quot;.getBytes());\r\n\t\t\t\tJWTVerifier jwtVerifier = JWT.require(algorithm).build();\r\n\t\t\t\tDecodedJWT decodedJWT = jwtVerifier.verify(token);\r\n\t\t\t\tString user = decodedJWT.getSubject();\r\n\t\t\t\tString [] roles = decodedJWT.getClaim(&quot;roles&quot;).asArray(String.class);\r\n\t\t\t\tCollection&lt;SimpleGrantedAuthority&gt; authorities = new ArrayList&lt;&gt;();\r\n\t\t\t\tArrays.stream(roles).forEach(role -&gt;{\r\n\t\t\t\t\tauthorities.add(new SimpleGrantedAuthority(role));\r\n\t\t\t\t});\r\n\t\t\t\tUsernamePasswordAuthenticationToken authenticationToken = new UsernamePasswordAuthenticationToken(user,null, authorities);\r\n\t\t\t\tSecurityContextHolder.getContext().setAuthentication(authenticationToken);\r\n\t\t\t\tfilterChain.doFilter(request, response);\r\n\t\t\t\t\r\n\t\t\t}catch(Exception e){\r\n\t\t\t\t\tlog.error(&quot;erro ao realizar o login! {}&quot;, e.getMessage());\r\n\t\t\t\t\tresponse.setHeader(&quot;erro&quot;, e.getMessage());\r\n\t\t\t\t\tresponse.setStatus(401);\r\n\t\t\t\t\tMap&lt;String, String&gt; error = new HashMap&lt;&gt;();\r\n\t\t\t\t\terror.put(&quot;mensagem de erro&quot;, e.getMessage());\r\n\t\t\t\t\tresponse.setContentType(APPLICATION_JSON_VALUE);\r\n\t\t\t\t\tnew ObjectMapper().writeValue(response.getOutputStream(), error);\r\n\t\t\t\t}\r\n\t\t\t}else {\r\n\t\t\t\tfilterChain.doFilter(request, response);\r\n\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\r\n\r\n```\r\n\r\n```\r\nimport java.io.IOException;\r\nimport java.util.Date;\r\nimport java.util.HashMap;\r\nimport java.util.Map;\r\nimport java.util.stream.Collectors;\r\n\r\nimport javax.servlet.FilterChain;\r\nimport javax.servlet.ServletException;\r\nimport javax.servlet.http.HttpServletRequest;\r\nimport javax.servlet.http.HttpServletResponse;\r\n\r\nimport com.fasterxml.jackson.databind.ObjectMapper;\r\nimport org.springframework.http.MediaType;\r\nimport org.springframework.security.authentication.AuthenticationManager;\r\nimport org.springframework.security.authentication.UsernamePasswordAuthenticationToken;\r\nimport org.springframework.security.core.Authentication;\r\nimport org.springframework.security.core.AuthenticationException;\r\nimport org.springframework.security.core.GrantedAuthority;\r\nimport org.springframework.security.core.userdetails.User;\r\nimport org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter;\r\n\r\nimport com.auth0.jwt.JWT;\r\nimport com.auth0.jwt.algorithms.Algorithm;\r\nimport org.springframework.web.bind.annotation.CrossOrigin;\r\n\r\nimport static org.springframework.http.MediaType.APPLICATION_JSON_VALUE;\r\n\r\n\r\n@CrossOrigin(origins = {&quot;*&quot;})\r\npublic class AuthenticationFilter extends UsernamePasswordAuthenticationFilter {\r\n\r\n\tprivate final AuthenticationManager authenticationManager;\r\n\t\r\n\tpublic AuthenticationFilter (AuthenticationManager authenticationManager) {\r\n\t\tthis.authenticationManager = authenticationManager;\r\n\t}\r\n\t\r\n\t@Override\r\n\tpublic Authentication attemptAuthentication(HttpServletRequest request, HttpServletResponse response)\r\n\t\t\tthrows AuthenticationException {\r\n\t\ttry{\r\n\t\t\tString nome = request.getParameter(&quot;nome&quot;);\r\n\t\t\tString senha = request.getParameter(&quot;senha&quot;);\r\n\t\t\tUsernamePasswordAuthenticationToken uspsToken = new UsernamePasswordAuthenticationToken(nome, senha);\r\n\t\t\t//response.setHeader(&quot;teste&quot;, String.valueOf(uspsToken));\r\n\t\t\treturn authenticationManager.authenticate(uspsToken);\r\n\t\t}catch (Exception e){\r\n\t\t\tthrow new  RuntimeException();\r\n\t\t}\r\n\r\n\t}\r\n\r\n//\t@Override\r\n//\tpublic Authentication attemptAuthentication(HttpServletRequest request, HttpServletResponse response)\r\n//\t\t\tthrows AuthenticationException {\r\n//\t\ttry{\r\n//\tUserPasswordAuthRequest userPasswordAuthRequest = new ObjectMapper()\r\n//\t\t\t\t.readValue(request.getInputStream(), UserPasswordAuthRequest.class);\r\n//\r\n//\t\t\tAuthentication authentication = new UsernamePasswordAuthenticationToken(\r\n//\t\t\t\t\tuserPasswordAuthRequest.getNome(),\r\n//\t\t\t\t\tuserPasswordAuthRequest.getSenha()\r\n//\t\t\t);\r\n//\t\t\treturn authenticationManager.authenticate(authentication);\r\n//\t\t}catch (IOException e){\r\n//\t\t\tthrow new  RuntimeException();\r\n//\t\t}\r\n//\t}\r\n\r\n\t@Override\r\n\tprotected void successfulAuthentication(HttpServletRequest request, HttpServletResponse response, FilterChain chain,\r\n\t\t\tAuthentication authResult) throws IOException, ServletException {\r\n\t\tUser user = (User) authResult.getPrincipal();\r\n\t\tAlgorithm algorithm = Algorithm.HMAC256(&quot;segredinho&quot;.getBytes());\r\n\t\tString tokenAcesso = JWT.create().withSubject(user.getUsername())\r\n\t\t\t\t.withExpiresAt(new Date(System.currentTimeMillis() + 10*60*1000*60))\r\n\t\t\t\t.withIssuer(request.getRequestURL()\r\n\t\t\t\t\t\t.toString()).withClaim(&quot;roles&quot;, user.getAuthorities()\r\n\t\t\t\t\t\t\t\t.stream().map(GrantedAuthority::getAuthority).collect(Collectors.toList()))\r\n\t\t\t\t.sign(algorithm);\r\n\t\tString tokenRefresh = JWT.create().withSubject(user.getUsername())\r\n\t\t\t\t.withExpiresAt(new Date(System.currentTimeMillis() + 10*60*1000*60))\r\n\t\t\t\t.withIssuer(request.getRequestURL()\r\n\t\t\t\t\t\t.toString()).withClaim(&quot;roles&quot;, user.getAuthorities()\r\n\t\t\t\t\t\t\t\t.stream().map(GrantedAuthority::getAuthority).collect(Collectors.toList()))\r\n\t\t\t\t.sign(algorithm);\r\n\t\tMap&lt;String, String&gt; tokens = new HashMap&lt;&gt;();\r\n\t\ttokens.put(&quot;tokenacesso&quot;, tokenAcesso);\r\n\t\ttokens.put(&quot;tokenrefresh&quot;, tokenRefresh);\r\n\t\tresponse.setContentType(APPLICATION_JSON_VALUE);\r\n\t\tnew ObjectMapper().writeValue(response.getOutputStream(),tokens);\r\n\t}\r\n\t\r\n\r\n\t\r\n}\r\n\r\n```","title":"Spring API doesn&#39;t login and send infos (get&amp;set) to React with JWT with same code","body":"<p>The title is self explanatory, I have this API made in Spring, and after JWT implementation I can login, but the <em>gets</em> doesn't work anymore.</p>\n<p>But if I comment the the <strong>CorsConfigurationSource corsConfigurationSource()</strong> and the Lombok annotation <strong>@RequiredArgsConstructor</strong> in SecurityConfig, the login stop to work, but all the <em>gets</em> work beautifully.</p>\n<p>I'll post the class SecurityConfig, AuthorizationFilter and the AuthenticationFilter respectively for you guys try to see whats going wrong.</p>\n<pre><code>import org.alterdata.shopback.app.security.AuthenticationFilter;\nimport org.alterdata.shopback.app.security.AuthorizationFilter;\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.context.annotation.Bean;\nimport org.springframework.context.annotation.Configuration;\nimport org.springframework.security.authentication.AuthenticationManager;\nimport org.springframework.security.config.annotation.authentication.builders.AuthenticationManagerBuilder;\nimport org.springframework.security.config.annotation.web.builders.HttpSecurity;\nimport org.springframework.security.config.annotation.web.configuration.EnableWebSecurity;\nimport org.springframework.security.config.annotation.web.configuration.WebSecurityConfigurerAdapter;\nimport org.springframework.security.config.http.SessionCreationPolicy;\nimport org.springframework.security.core.userdetails.UserDetailsService;\nimport org.springframework.security.crypto.bcrypt.BCryptPasswordEncoder;\nimport org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter;\n\nimport lombok.RequiredArgsConstructor;\nimport org.springframework.web.cors.CorsConfiguration;\nimport org.springframework.web.cors.CorsConfigurationSource;\nimport org.springframework.web.cors.UrlBasedCorsConfigurationSource;\n\nimport java.util.Arrays;\n\n@Configuration\n@EnableWebSecurity\n@RequiredArgsConstructor\npublic class SecurityConfig extends WebSecurityConfigurerAdapter{\n\n\n    @Autowired\n    UserDetailsService userDetailsService;\n\n    @Autowired\n    BCryptPasswordEncoder bCryptPasswordEncoder;\n\n\n    @Override\n    protected void configure(HttpSecurity http) throws Exception {\n        AuthenticationFilter authenticationFilter = new AuthenticationFilter(authenticationManagerBean());\n        http.cors().and().csrf().disable();\n        http.sessionManagement().sessionCreationPolicy(SessionCreationPolicy.STATELESS);\n        http.authorizeRequests().antMatchers(&quot;/login&quot;).permitAll()\n        .antMatchers(&quot;/cadastrar/**&quot;).hasAnyAuthority(&quot;ADMIN&quot;)\n        .antMatchers(&quot;/cadastro/**&quot;).hasAnyAuthority(&quot;ADMIN&quot;)\n        .anyRequest().authenticated();\n        http.addFilter(authenticationFilter);\n        http.addFilterBefore(new AuthorizationFilter(), UsernamePasswordAuthenticationFilter.class);\n    }\n\n\n    @Override\n    public void configure(AuthenticationManagerBuilder auth) throws Exception {\n        auth.userDetailsService(userDetailsService).passwordEncoder(bCryptPasswordEncoder);\n    }\n\n    @Bean\n    @Override\n    public AuthenticationManager authenticationManager()throws Exception{\n        return super.authenticationManager();\n    }\n\n\n    @Bean\n    public CorsConfigurationSource corsConfigurationSource() {\n        CorsConfiguration configuration = new CorsConfiguration();\n        configuration.setAllowedOrigins(Arrays.asList(&quot;http://localhost:3000&quot;));\n        configuration.setAllowedMethods(Arrays.asList(&quot;GET&quot;, &quot;POST&quot;, &quot;PUT&quot;, &quot;DELETE&quot;,&quot;OPTIONS&quot;, &quot;HEAD&quot;));\n        UrlBasedCorsConfigurationSource source = new UrlBasedCorsConfigurationSource();\n        source.registerCorsConfiguration(&quot;/**&quot;, configuration);\n            return source;\n        }\n}\n\n</code></pre>\n<pre><code>import java.io.IOException;\nimport java.util.ArrayList;\nimport java.util.Collection;\nimport java.util.HashMap;\nimport java.util.Map;\nimport java.util.Arrays;\n\nimport javax.servlet.FilterChain;\nimport javax.servlet.ServletException;\nimport javax.servlet.http.HttpServletRequest;\nimport javax.servlet.http.HttpServletResponse;\n\nimport com.auth0.jwt.exceptions.JWTVerificationException;\nimport io.jsonwebtoken.JwtException;\nimport lombok.extern.slf4j.Slf4j;\nimport org.springframework.http.HttpHeaders;\nimport org.springframework.security.authentication.UsernamePasswordAuthenticationToken;\nimport org.springframework.security.core.authority.SimpleGrantedAuthority;\nimport org.springframework.security.core.context.SecurityContextHolder;\nimport org.springframework.web.filter.OncePerRequestFilter;\n\nimport com.auth0.jwt.JWT;\nimport com.auth0.jwt.algorithms.Algorithm;\nimport com.auth0.jwt.interfaces.DecodedJWT;\nimport com.auth0.jwt.interfaces.JWTVerifier;\nimport com.fasterxml.jackson.databind.ObjectMapper;\n\nimport net.bytebuddy.implementation.bind.annotation.IgnoreForBinding.Verifier;\n\nimport static org.springframework.util.MimeTypeUtils.APPLICATION_JSON_VALUE;\n\n@Slf4j\npublic class AuthorizationFilter extends OncePerRequestFilter {\n\n    @Override\n    protected void doFilterInternal(HttpServletRequest request, HttpServletResponse response, FilterChain filterChain)\n            throws ServletException, IOException {\n        if(request.getServletPath().equals(&quot;/login&quot;)) {\n            filterChain.doFilter(request, response);\n        }else {\n            String authorizationHeader = request.getHeader(HttpHeaders.AUTHORIZATION);\n            if(authorizationHeader != null &amp;&amp; authorizationHeader.startsWith(&quot;Bearer &quot;)) {\n                try {\n                String token = authorizationHeader.substring(&quot;Bearer &quot;.length());\n                Algorithm algorithm = Algorithm.HMAC256(&quot;segredinho&quot;.getBytes());\n                JWTVerifier jwtVerifier = JWT.require(algorithm).build();\n                DecodedJWT decodedJWT = jwtVerifier.verify(token);\n                String user = decodedJWT.getSubject();\n                String [] roles = decodedJWT.getClaim(&quot;roles&quot;).asArray(String.class);\n                Collection&lt;SimpleGrantedAuthority&gt; authorities = new ArrayList&lt;&gt;();\n                Arrays.stream(roles).forEach(role -&gt;{\n                    authorities.add(new SimpleGrantedAuthority(role));\n                });\n                UsernamePasswordAuthenticationToken authenticationToken = new UsernamePasswordAuthenticationToken(user,null, authorities);\n                SecurityContextHolder.getContext().setAuthentication(authenticationToken);\n                filterChain.doFilter(request, response);\n                \n            }catch(Exception e){\n                    log.error(&quot;erro ao realizar o login! {}&quot;, e.getMessage());\n                    response.setHeader(&quot;erro&quot;, e.getMessage());\n                    response.setStatus(401);\n                    Map&lt;String, String&gt; error = new HashMap&lt;&gt;();\n                    error.put(&quot;mensagem de erro&quot;, e.getMessage());\n                    response.setContentType(APPLICATION_JSON_VALUE);\n                    new ObjectMapper().writeValue(response.getOutputStream(), error);\n                }\n            }else {\n                filterChain.doFilter(request, response);\n            }\n            }\n        }\n    }\n\n\n\n</code></pre>\n<pre><code>import java.io.IOException;\nimport java.util.Date;\nimport java.util.HashMap;\nimport java.util.Map;\nimport java.util.stream.Collectors;\n\nimport javax.servlet.FilterChain;\nimport javax.servlet.ServletException;\nimport javax.servlet.http.HttpServletRequest;\nimport javax.servlet.http.HttpServletResponse;\n\nimport com.fasterxml.jackson.databind.ObjectMapper;\nimport org.springframework.http.MediaType;\nimport org.springframework.security.authentication.AuthenticationManager;\nimport org.springframework.security.authentication.UsernamePasswordAuthenticationToken;\nimport org.springframework.security.core.Authentication;\nimport org.springframework.security.core.AuthenticationException;\nimport org.springframework.security.core.GrantedAuthority;\nimport org.springframework.security.core.userdetails.User;\nimport org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter;\n\nimport com.auth0.jwt.JWT;\nimport com.auth0.jwt.algorithms.Algorithm;\nimport org.springframework.web.bind.annotation.CrossOrigin;\n\nimport static org.springframework.http.MediaType.APPLICATION_JSON_VALUE;\n\n\n@CrossOrigin(origins = {&quot;*&quot;})\npublic class AuthenticationFilter extends UsernamePasswordAuthenticationFilter {\n\n    private final AuthenticationManager authenticationManager;\n    \n    public AuthenticationFilter (AuthenticationManager authenticationManager) {\n        this.authenticationManager = authenticationManager;\n    }\n    \n    @Override\n    public Authentication attemptAuthentication(HttpServletRequest request, HttpServletResponse response)\n            throws AuthenticationException {\n        try{\n            String nome = request.getParameter(&quot;nome&quot;);\n            String senha = request.getParameter(&quot;senha&quot;);\n            UsernamePasswordAuthenticationToken uspsToken = new UsernamePasswordAuthenticationToken(nome, senha);\n            //response.setHeader(&quot;teste&quot;, String.valueOf(uspsToken));\n            return authenticationManager.authenticate(uspsToken);\n        }catch (Exception e){\n            throw new  RuntimeException();\n        }\n\n    }\n\n//  @Override\n//  public Authentication attemptAuthentication(HttpServletRequest request, HttpServletResponse response)\n//          throws AuthenticationException {\n//      try{\n//  UserPasswordAuthRequest userPasswordAuthRequest = new ObjectMapper()\n//              .readValue(request.getInputStream(), UserPasswordAuthRequest.class);\n//\n//          Authentication authentication = new UsernamePasswordAuthenticationToken(\n//                  userPasswordAuthRequest.getNome(),\n//                  userPasswordAuthRequest.getSenha()\n//          );\n//          return authenticationManager.authenticate(authentication);\n//      }catch (IOException e){\n//          throw new  RuntimeException();\n//      }\n//  }\n\n    @Override\n    protected void successfulAuthentication(HttpServletRequest request, HttpServletResponse response, FilterChain chain,\n            Authentication authResult) throws IOException, ServletException {\n        User user = (User) authResult.getPrincipal();\n        Algorithm algorithm = Algorithm.HMAC256(&quot;segredinho&quot;.getBytes());\n        String tokenAcesso = JWT.create().withSubject(user.getUsername())\n                .withExpiresAt(new Date(System.currentTimeMillis() + 10*60*1000*60))\n                .withIssuer(request.getRequestURL()\n                        .toString()).withClaim(&quot;roles&quot;, user.getAuthorities()\n                                .stream().map(GrantedAuthority::getAuthority).collect(Collectors.toList()))\n                .sign(algorithm);\n        String tokenRefresh = JWT.create().withSubject(user.getUsername())\n                .withExpiresAt(new Date(System.currentTimeMillis() + 10*60*1000*60))\n                .withIssuer(request.getRequestURL()\n                        .toString()).withClaim(&quot;roles&quot;, user.getAuthorities()\n                                .stream().map(GrantedAuthority::getAuthority).collect(Collectors.toList()))\n                .sign(algorithm);\n        Map&lt;String, String&gt; tokens = new HashMap&lt;&gt;();\n        tokens.put(&quot;tokenacesso&quot;, tokenAcesso);\n        tokens.put(&quot;tokenrefresh&quot;, tokenRefresh);\n        response.setContentType(APPLICATION_JSON_VALUE);\n        new ObjectMapper().writeValue(response.getOutputStream(),tokens);\n    }\n    \n\n    \n}\n\n</code></pre>\n"},{"tags":["java","ssl","aws-sdk","aws-iot","self-signed-certificate"],"comments":[{"owner":{"account_id":6390592,"reputation":16008,"user_id":4956907,"display_name":"Michał Krzywański"},"score":0,"creation_date":1555701543,"post_id":55766750,"comment_id":98207822,"body_markdown":"have you considered using other tools, like `openssl`?","body":"have you considered using other tools, like <code>openssl</code>?"},{"owner":{"account_id":6113106,"reputation":3719,"user_id":4768946,"accept_rate":14,"display_name":"Engineer999"},"score":0,"creation_date":1555702057,"post_id":55766750,"comment_id":98207994,"body_markdown":"@michalk, I have, and also using bouncycastle, but how to then activate the certificate on the AWS IoT cloud ?","body":"@michalk, I have, and also using bouncycastle, but how to then activate the certificate on the AWS IoT cloud ?"},{"owner":{"account_id":6390592,"reputation":16008,"user_id":4956907,"display_name":"Michał Krzywański"},"score":0,"creation_date":1555702412,"post_id":55766750,"comment_id":98208126,"body_markdown":"As you said you have your CA private key and CA certificate in PEM format, that contains public key of certificate. With those files, you could try to generate a certificate signed with CA cert. [Here](https://gist.github.com/fntlnz/cf14feb5a46b2eda428e000157447309) is an example of doing it with `openssl`. The second step of generating CSR based on CA key and PEM is most important for you.","body":"As you said you have your CA private key and CA certificate in PEM format, that contains public key of certificate. With those files, you could try to generate a certificate signed with CA cert. <a href=\"https://gist.github.com/fntlnz/cf14feb5a46b2eda428e000157447309\" rel=\"nofollow noreferrer\">Here</a> is an example of doing it with <code>openssl</code>. The second step of generating CSR based on CA key and PEM is most important for you."},{"owner":{"account_id":6113106,"reputation":3719,"user_id":4768946,"accept_rate":14,"display_name":"Engineer999"},"score":0,"creation_date":1555704069,"post_id":55766750,"comment_id":98208699,"body_markdown":"@michalk . I have done this already thanks. (I should have mentioned in the question) . I need to do all this in Java tho and then register the resulting signed certificate on the cloud. Even doing that part in bash, to generate the signed certificate would be fine, but I still can&#39;t find any Java API to then register and activate the certificate on the AWS IoT platform.","body":"@michalk . I have done this already thanks. (I should have mentioned in the question) . I need to do all this in Java tho and then register the resulting signed certificate on the cloud. Even doing that part in bash, to generate the signed certificate would be fine, but I still can&#39;t find any Java API to then register and activate the certificate on the AWS IoT platform."},{"owner":{"account_id":7894007,"reputation":978,"user_id":5963300,"display_name":"AI_ROBOT"},"score":0,"creation_date":1590116516,"post_id":55766750,"comment_id":109564774,"body_markdown":"Have you figured out how to sign the certificate with CAs in java yet?","body":"Have you figured out how to sign the certificate with CAs in java yet?"}],"answers":[{"tags":[],"owner":{"account_id":5734487,"reputation":11,"user_id":4529079,"display_name":"Kris Unnikannan"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1602004571,"creation_date":1602001840,"answer_id":64230071,"question_id":55766750,"body_markdown":"So the documentation is pretty vague on AWS. I had the same issue. Here is how I fixed it. Assuming you registered your CA with AWS IoT,\r\neven if you enable auto registration for the CA you uploaded, AWS IoT will not allow devices to connect. The Certs will have a couple of options for JiT(Just in Time) registration.\r\n\r\n 1. Create Lamba to activate devices with certain conditions;\r\n 2. List to Event on MQTT to activate the cert;\r\n 3. Register the Public key.\r\n\r\nOptions 1 and 2 are described in AWS Docs \r\nhttps://docs.aws.amazon.com/iot/latest/developerguide/auto-register-device-cert.html\r\n\r\nSteps to do option 3:\r\n \r\n\r\n1. Register the Thing\r\n```\r\nsoftware.amazon.awssdk.services.iot.IotClient iotClient = IotClient.create()\r\n//This allows AWS Credentials to be picked up using DefaultAWSCredentialsProviderChain\r\nCreateThingRequest thingToBeCreated =\r\nCreateThingRequest.builder().thingName(&quot;Unique Id of Device&quot;).build();\r\niotClient.createThing(thingToBeCreated);\r\n```\r\n2. Register and activate the Public Key of the device. \r\n```\r\nRegisterCertificateRequest registerCertificateRequest = RegisterCertificateRequest.builder()\r\n.caCertificatePem(&quot;CA Pem as String&quot;)\r\n.certificatePem(&quot;Device Public Key in Pem as String&quot;)\r\n.setAsActive(true)\r\n.build();\r\nfinal RegisterCertificateResponse registerCertificateResponse = iotClient.registerCertificate(registerCertificateRequest);\r\n\r\n```\r\n\r\n 3. Attach the Cert to the thing.\r\n ```\r\nAttachThingPrincipalRequest attachThingPrincipalRequest = AttachThingPrincipalRequest.builder()\r\n.thingName(&quot;Unique Id of Device&quot;)\r\n.principal(registerCertificateResponse.certificateArn())\r\n.build();\r\niotClient.attachThingPrincipal(attachThingPrincipalRequest);\r\n```\r\n 4. Optional, attach policies to the thing so it can connect. \r\n ```\r\nAttachPolicyRequest attachPolicyRequest = AttachPolicyRequest.builder()\r\n.policyName(&quot;policy_that_allow_device_connections&quot;)\r\n.target(registerCertificateResponse.certificateArn())\r\n.build();\r\niotClient.attachPolicy(attachPolicyRequest);\r\n```","title":"Create a self-signed certificate in Java for AWS IoT","body":"<p>So the documentation is pretty vague on AWS. I had the same issue. Here is how I fixed it. Assuming you registered your CA with AWS IoT,\neven if you enable auto registration for the CA you uploaded, AWS IoT will not allow devices to connect. The Certs will have a couple of options for JiT(Just in Time) registration.</p>\n<ol>\n<li>Create Lamba to activate devices with certain conditions;</li>\n<li>List to Event on MQTT to activate the cert;</li>\n<li>Register the Public key.</li>\n</ol>\n<p>Options 1 and 2 are described in AWS Docs\n<a href=\"https://docs.aws.amazon.com/iot/latest/developerguide/auto-register-device-cert.html\" rel=\"nofollow noreferrer\">https://docs.aws.amazon.com/iot/latest/developerguide/auto-register-device-cert.html</a></p>\n<p>Steps to do option 3:</p>\n<ol>\n<li>Register the Thing</li>\n</ol>\n<pre><code>software.amazon.awssdk.services.iot.IotClient iotClient = IotClient.create()\n//This allows AWS Credentials to be picked up using DefaultAWSCredentialsProviderChain\nCreateThingRequest thingToBeCreated =\nCreateThingRequest.builder().thingName(&quot;Unique Id of Device&quot;).build();\niotClient.createThing(thingToBeCreated);\n</code></pre>\n<ol start=\"2\">\n<li>Register and activate the Public Key of the device.</li>\n</ol>\n<pre><code>RegisterCertificateRequest registerCertificateRequest = RegisterCertificateRequest.builder()\n.caCertificatePem(&quot;CA Pem as String&quot;)\n.certificatePem(&quot;Device Public Key in Pem as String&quot;)\n.setAsActive(true)\n.build();\nfinal RegisterCertificateResponse registerCertificateResponse = iotClient.registerCertificate(registerCertificateRequest);\n\n</code></pre>\n<ol start=\"3\">\n<li>Attach the Cert to the thing.</li>\n</ol>\n<pre><code>AttachThingPrincipalRequest attachThingPrincipalRequest = AttachThingPrincipalRequest.builder()\n.thingName(&quot;Unique Id of Device&quot;)\n.principal(registerCertificateResponse.certificateArn())\n.build();\niotClient.attachThingPrincipal(attachThingPrincipalRequest);\n</code></pre>\n<ol start=\"4\">\n<li>Optional, attach policies to the thing so it can connect.</li>\n</ol>\n<pre><code>AttachPolicyRequest attachPolicyRequest = AttachPolicyRequest.builder()\n.policyName(&quot;policy_that_allow_device_connections&quot;)\n.target(registerCertificateResponse.certificateArn())\n.build();\niotClient.attachPolicy(attachPolicyRequest);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2185999,"reputation":11,"user_id":3139101,"display_name":"Sarojkanta"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1644440478,"creation_date":1644438940,"answer_id":71056363,"question_id":55766750,"body_markdown":"Thanks!!! \r\nabove steps are working for me and code requires below dependency,\r\n\r\n    &lt;dependency&gt;\r\n\t\t&lt;groupId&gt;software.amazon.awssdk&lt;/groupId&gt;\r\n\t\t&lt;artifactId&gt;iot&lt;/artifactId&gt;\r\n\t\t&lt;version&gt;2.17.121&lt;/version&gt;\r\n\t&lt;/dependency&gt;\r\n\r\nAlso here I used another library for the same process.\r\nSteps are,\r\n\r\n&gt; 1. Register the RootCA with Verification certificate in AWS IoT core\r\n&gt; 2. Create the thing and attach device certificate and policy to connect programatically\r\n\r\nSo now in detail:\r\n1. Register the RootCA with Verification certificate in AWS IoT core\r\n\t\r\n\tFollow the link\r\n\t\thttps://docs.aws.amazon.com/iot/latest/developerguide/register-CA-cert.html\r\n\r\n2. Create the thing and attach device certificate and policy to connect programatically\r\n\r\nBelow steps needed to do the process programatically,\r\n\r\nDependencies needed:\r\n\r\n    &lt;dependency&gt;\r\n\t\t&lt;groupId&gt;com.amazonaws&lt;/groupId&gt;\r\n\t\t&lt;artifactId&gt;aws-iot-device-sdk-java&lt;/artifactId&gt;\r\n\t\t&lt;version&gt;1.3.9&lt;/version&gt;\r\n\t&lt;/dependency&gt;\r\n\r\n\t&lt;dependency&gt;\r\n\t\t&lt;groupId&gt;com.amazonaws&lt;/groupId&gt;\r\n\t\t&lt;artifactId&gt;aws-java-sdk-core&lt;/artifactId&gt;\r\n\t\t&lt;version&gt;1.12.150&lt;/version&gt;\r\n\t&lt;/dependency&gt;\r\n\r\n\t&lt;dependency&gt;\r\n\t\t&lt;groupId&gt;com.amazonaws&lt;/groupId&gt;\r\n\t\t&lt;artifactId&gt;aws-java-sdk-iot&lt;/artifactId&gt;\r\n\t\t&lt;version&gt;1.12.150&lt;/version&gt;\r\n\t&lt;/dependency&gt;\r\n\r\n Aws config class:\r\n\r\n    public class AwsConfig {\r\n\t\r\n\t\t@Bean\r\n\t\tpublic AWSIot getIotClient() {\r\n\t\t\treturn AWSIotClientBuilder.standard()\r\n\t\t\t\t\t.withCredentials(new AWSStaticCredentialsProvider(new BasicAWSCredentials(&quot;users_aws_access_key&quot;, &quot;users_aws_secret_key&quot;)))\r\n\t\t\t\t\t.withRegion(&quot;users_aws_region&quot;).build();\r\n\t\t}\t\r\n\t}\r\n\r\nService class:\r\n\r\n    import org.springframework.beans.factory.annotation.Autowired;\r\n    import org.springframework.stereotype.Service;\r\n    import com.amazonaws.services.iot.model.AttachPolicyRequest;\r\n    import com.amazonaws.services.iot.model.AttachPolicyResult;\r\n    import com.amazonaws.services.iot.model.AttachThingPrincipalRequest;\r\n    import com.amazonaws.services.iot.model.AttachThingPrincipalResult;\r\n    import com.amazonaws.services.iot.model.CertificateStatus;\r\n    import com.amazonaws.services.iot.model.CreateThingRequest;\r\n    import com.amazonaws.services.iot.model.CreateThingResult;\r\n    import com.amazonaws.services.iot.model.DescribeThingRequest;\r\n    import com.amazonaws.services.iot.model.DescribeThingResult;\r\n    import com.amazonaws.services.iot.model.RegisterCertificateRequest;\r\n    import com.amazonaws.services.iot.model.RegisterCertificateResult;\r\n    import com.amazonaws.services.iot.model.ResourceNotFoundException;\r\n    \r\n    @Service\r\n    public class RegisterService {\r\n    \r\n    \t@Autowired\r\n    \tprivate AwsConfig iotClient;\r\n    \r\n    \tpublic String RegisterDevice() {\r\n    \r\n    \t\t// check if thing Already exists\r\n    \t\tif (!describeThing(&quot;Unique Id of Device&quot;)) {\r\n    \r\n    \t\t\t// Thing Creation\r\n    \t\t\tCreateThingResult response = iotClient.getIotClient()\r\n    \t\t\t\t\t.createThing(new CreateThingRequest().withThingName(&quot;Unique Id of Device/Thing&quot;));\r\n    \r\n    \t\t\t// Register and activate the Public Key of the device\r\n    \t\t\tRegisterCertificateResult registerCert = iotClient.getIotClient()\r\n    \t\t\t\t\t.registerCertificate(new RegisterCertificateRequest().withCaCertificatePem(&quot;CA Pem as String&quot;)\r\n    \t\t\t\t\t\t\t.withCertificatePem(&quot;Device Public Key in Pem as String&quot;).withStatus(CertificateStatus.ACTIVE));\r\n    \r\n    \t\t\t// Attach the Cert to the thing\r\n    \t\t\tAttachThingPrincipalResult attachThingPrincipalResult = iotClient.getIotClient().attachThingPrincipal(\r\n    \t\t\t\t\tnew AttachThingPrincipalRequest()\r\n    \t\t\t\t\t\t.withThingName(&quot;Unique Id of Device/Thing&quot;).withPrincipal(registerCert.getCertificateArn()));\r\n    \r\n    \t\t\t// Attach policies to the thing so it can connect\r\n    \t\t\tAttachPolicyResult policyResult = iotClient.getIotClient()\r\n    \t\t\t\t\t.attachPolicy(new AttachPolicyRequest()\r\n    \t\t\t\t\t\t.withPolicyName(&quot;policy_that_allow_device_connections&quot;).withTarget(registerCert.getCertificateArn()));\r\n    \r\n    \t\t\treturn &quot;Thing Created Successfully&quot;;\r\n    \t\t}\t\r\n    \t\t\r\n    \t\t// Thing exists\r\n    \t\treturn &quot;Thing Already Exists on IoT Console&quot;;\r\n    \t}\r\n    \r\n    \tprivate boolean describeThing(String thingName) {\r\n    \t\tif (thingName == null) {\r\n    \t\t\treturn false;\r\n    \t\t}\r\n    \t\ttry {\r\n    \t\t\tdescribeThingResponse(thingName);\r\n    \t\t\treturn true;\r\n    \t\t} catch (ResourceNotFoundException e) {\r\n    \t\t\t// e.printStackTrace();\r\n    \t\t\treturn false;\r\n    \t\t}\r\n    \t}\r\n    \r\n    \tprivate DescribeThingResult describeThingResponse(String thingName) {\r\n    \t\tDescribeThingRequest describeThingRequest = new DescribeThingRequest();\r\n    \t\tdescribeThingRequest.setThingName(thingName);\r\n    \t\treturn iotClient.getIotClient().describeThing(describeThingRequest);\r\n    \t}\r\n    \t\r\n    }","title":"Create a self-signed certificate in Java for AWS IoT","body":"<p>Thanks!!!\nabove steps are working for me and code requires below dependency,</p>\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;software.amazon.awssdk&lt;/groupId&gt;\n    &lt;artifactId&gt;iot&lt;/artifactId&gt;\n    &lt;version&gt;2.17.121&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>Also here I used another library for the same process.\nSteps are,</p>\n<blockquote>\n<ol>\n<li>Register the RootCA with Verification certificate in AWS IoT core</li>\n<li>Create the thing and attach device certificate and policy to connect programatically</li>\n</ol>\n</blockquote>\n<p>So now in detail:</p>\n<ol>\n<li><p>Register the RootCA with Verification certificate in AWS IoT core</p>\n<p>Follow the link\n<a href=\"https://docs.aws.amazon.com/iot/latest/developerguide/register-CA-cert.html\" rel=\"nofollow noreferrer\">https://docs.aws.amazon.com/iot/latest/developerguide/register-CA-cert.html</a></p>\n</li>\n<li><p>Create the thing and attach device certificate and policy to connect programatically</p>\n</li>\n</ol>\n<p>Below steps needed to do the process programatically,</p>\n<p>Dependencies needed:</p>\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;com.amazonaws&lt;/groupId&gt;\n    &lt;artifactId&gt;aws-iot-device-sdk-java&lt;/artifactId&gt;\n    &lt;version&gt;1.3.9&lt;/version&gt;\n&lt;/dependency&gt;\n\n&lt;dependency&gt;\n    &lt;groupId&gt;com.amazonaws&lt;/groupId&gt;\n    &lt;artifactId&gt;aws-java-sdk-core&lt;/artifactId&gt;\n    &lt;version&gt;1.12.150&lt;/version&gt;\n&lt;/dependency&gt;\n\n&lt;dependency&gt;\n    &lt;groupId&gt;com.amazonaws&lt;/groupId&gt;\n    &lt;artifactId&gt;aws-java-sdk-iot&lt;/artifactId&gt;\n    &lt;version&gt;1.12.150&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>Aws config class:</p>\n<pre><code>public class AwsConfig {\n\n    @Bean\n    public AWSIot getIotClient() {\n        return AWSIotClientBuilder.standard()\n                .withCredentials(new AWSStaticCredentialsProvider(new BasicAWSCredentials(&quot;users_aws_access_key&quot;, &quot;users_aws_secret_key&quot;)))\n                .withRegion(&quot;users_aws_region&quot;).build();\n    }   \n}\n</code></pre>\n<p>Service class:</p>\n<pre><code>import org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.stereotype.Service;\nimport com.amazonaws.services.iot.model.AttachPolicyRequest;\nimport com.amazonaws.services.iot.model.AttachPolicyResult;\nimport com.amazonaws.services.iot.model.AttachThingPrincipalRequest;\nimport com.amazonaws.services.iot.model.AttachThingPrincipalResult;\nimport com.amazonaws.services.iot.model.CertificateStatus;\nimport com.amazonaws.services.iot.model.CreateThingRequest;\nimport com.amazonaws.services.iot.model.CreateThingResult;\nimport com.amazonaws.services.iot.model.DescribeThingRequest;\nimport com.amazonaws.services.iot.model.DescribeThingResult;\nimport com.amazonaws.services.iot.model.RegisterCertificateRequest;\nimport com.amazonaws.services.iot.model.RegisterCertificateResult;\nimport com.amazonaws.services.iot.model.ResourceNotFoundException;\n\n@Service\npublic class RegisterService {\n\n    @Autowired\n    private AwsConfig iotClient;\n\n    public String RegisterDevice() {\n\n        // check if thing Already exists\n        if (!describeThing(&quot;Unique Id of Device&quot;)) {\n\n            // Thing Creation\n            CreateThingResult response = iotClient.getIotClient()\n                    .createThing(new CreateThingRequest().withThingName(&quot;Unique Id of Device/Thing&quot;));\n\n            // Register and activate the Public Key of the device\n            RegisterCertificateResult registerCert = iotClient.getIotClient()\n                    .registerCertificate(new RegisterCertificateRequest().withCaCertificatePem(&quot;CA Pem as String&quot;)\n                            .withCertificatePem(&quot;Device Public Key in Pem as String&quot;).withStatus(CertificateStatus.ACTIVE));\n\n            // Attach the Cert to the thing\n            AttachThingPrincipalResult attachThingPrincipalResult = iotClient.getIotClient().attachThingPrincipal(\n                    new AttachThingPrincipalRequest()\n                        .withThingName(&quot;Unique Id of Device/Thing&quot;).withPrincipal(registerCert.getCertificateArn()));\n\n            // Attach policies to the thing so it can connect\n            AttachPolicyResult policyResult = iotClient.getIotClient()\n                    .attachPolicy(new AttachPolicyRequest()\n                        .withPolicyName(&quot;policy_that_allow_device_connections&quot;).withTarget(registerCert.getCertificateArn()));\n\n            return &quot;Thing Created Successfully&quot;;\n        }   \n        \n        // Thing exists\n        return &quot;Thing Already Exists on IoT Console&quot;;\n    }\n\n    private boolean describeThing(String thingName) {\n        if (thingName == null) {\n            return false;\n        }\n        try {\n            describeThingResponse(thingName);\n            return true;\n        } catch (ResourceNotFoundException e) {\n            // e.printStackTrace();\n            return false;\n        }\n    }\n\n    private DescribeThingResult describeThingResponse(String thingName) {\n        DescribeThingRequest describeThingRequest = new DescribeThingRequest();\n        describeThingRequest.setThingName(thingName);\n        return iotClient.getIotClient().describeThing(describeThingRequest);\n    }\n    \n}\n</code></pre>\n"}],"owner":{"account_id":6113106,"reputation":3719,"user_id":4768946,"accept_rate":14,"display_name":"Engineer999"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1112,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1644440478,"creation_date":1555701297,"question_id":55766750,"body_markdown":"I have a root CA certificate along with its private key (CAcert.pem and CApvtkey.key). \r\n\r\nThe root CA certificate has been registered on the AWS IoT core. This will be used to self-sign and validate other certificates for authentication.\r\n\r\nI am trying to create certificates signed by my root CA certificate using Java, but not much luck. \r\n\r\nThe AWS IoT Java SDK provides functions to generate certificates, and to register/activate them on AWS, but I can&#39;t figure out how to sign them with my root CA certificate and activate them.\r\n\r\nWhat I have is this only :\r\n\r\n      //Previous code sets up thing name etc...\r\n\r\n      CreateThingResult resp1 = client.createThing(thingRequest);\r\n                \r\n      CreateKeysAndCertificateRequest req = new CreateKeysAndCertificateRequest();\r\n      req.setSetAsActive(true);\r\n      CreateKeysAndCertificateResult resp2 = client.createKeysAndCertificate(req);\r\n           \r\n      client.attachThingPrincipal(new AttachThingPrincipalRequest().\r\n\t\t\t\twithPrincipal(resp2.getCertificateArn()).withThingName(&quot;Java-App_Thing&quot;));\r\n      \r\n\r\nWould anybody have an idea how I can create my certificates which will be signed by my CA certificate?","title":"Create a self-signed certificate in Java for AWS IoT","body":"<p>I have a root CA certificate along with its private key (CAcert.pem and CApvtkey.key). </p>\n\n<p>The root CA certificate has been registered on the AWS IoT core. This will be used to self-sign and validate other certificates for authentication.</p>\n\n<p>I am trying to create certificates signed by my root CA certificate using Java, but not much luck. </p>\n\n<p>The AWS IoT Java SDK provides functions to generate certificates, and to register/activate them on AWS, but I can't figure out how to sign them with my root CA certificate and activate them.</p>\n\n<p>What I have is this only :</p>\n\n<pre><code>  //Previous code sets up thing name etc...\n\n  CreateThingResult resp1 = client.createThing(thingRequest);\n\n  CreateKeysAndCertificateRequest req = new CreateKeysAndCertificateRequest();\n  req.setSetAsActive(true);\n  CreateKeysAndCertificateResult resp2 = client.createKeysAndCertificate(req);\n\n  client.attachThingPrincipal(new AttachThingPrincipalRequest().\n            withPrincipal(resp2.getCertificateArn()).withThingName(\"Java-App_Thing\"));\n</code></pre>\n\n<p>Would anybody have an idea how I can create my certificates which will be signed by my CA certificate?</p>\n"},{"tags":["java","java.util.scanner"],"comments":[{"owner":{"account_id":7423601,"reputation":18712,"user_id":5646962,"display_name":"Thomas Kl&#228;ger"},"score":1,"creation_date":1644440800,"post_id":71056660,"comment_id":125610854,"body_markdown":"Does this answer your question? [Scanner NoSuchElementException](https://stackoverflow.com/questions/15443383/scanner-nosuchelementexception)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/15443383/scanner-nosuchelementexception\">Scanner NoSuchElementException</a>"},{"owner":{"account_id":7423601,"reputation":18712,"user_id":5646962,"display_name":"Thomas Kl&#228;ger"},"score":1,"creation_date":1644440927,"post_id":71056660,"comment_id":125610907,"body_markdown":"Your `QuerybyloanID(List&lt;Loan&gt; data)` creates a `Scanner` over `System.in` and closes it, thereby closing `System.in` too. After that you can no longer read anything from `System.in`, not even in the Scanner that you created in the main method. It&#39;s better to create only one `new Scanner(System.in)` and either pass it around or store it in a global variable.","body":"Your <code>QuerybyloanID(List&lt;Loan&gt; data)</code> creates a <code>Scanner</code> over <code>System.in</code> and closes it, thereby closing <code>System.in</code> too. After that you can no longer read anything from <code>System.in</code>, not even in the Scanner that you created in the main method. It&#39;s better to create only one <code>new Scanner(System.in)</code> and either pass it around or store it in a global variable."},{"owner":{"account_id":2562742,"reputation":5917,"user_id":2851311,"display_name":"hfontanez"},"score":0,"creation_date":1644441162,"post_id":71056660,"comment_id":125610987,"body_markdown":"@foodsr, don&#39;t feel bad. This is a very common mistake made by many; even experienced developers. Thomas Kl&#228;ger&#39;s comment is correct.","body":"@foodsr, don&#39;t feel bad. This is a very common mistake made by many; even experienced developers. Thomas Kl&#228;ger&#39;s comment is correct."},{"owner":{"account_id":22119891,"reputation":11,"user_id":16373329,"display_name":"foodsr"},"score":1,"creation_date":1644776270,"post_id":71056660,"comment_id":125690304,"body_markdown":"@ThomasKlager. Thanks for the support I&#39;ve been able to resolve the issue.","body":"@ThomasKlager. Thanks for the support I&#39;ve been able to resolve the issue."}],"owner":{"account_id":22119891,"reputation":11,"user_id":16373329,"display_name":"foodsr"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":40,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1644440466,"creation_date":1644440466,"question_id":71056660,"body_markdown":"   Query by loan ID\r\n\r\n // Method that allows the user to query by loan ID\r\n\r\n    public static void QuerybyloanID(List&lt;Loan&gt; data) {\r\n        try (Scanner entry = new Scanner(System.in)) {\r\n            System.out.print(&quot;Please, enter the loan ID: &quot;);\r\n            String userentry = entry.next();\r\n\r\n   // For loop is used to locate the loan ID within the list of loans \r\n\r\n            for (int i = 0; i &lt; data.size(); i++) {\r\n                String loanID = data.get(i).getLoanID();\r\n                \r\n                if (loanID.equals(userentry)) {\r\n                    boolean pass = true;\r\n                    String loanPassword = data.get(i).getPasscode();\r\n    \r\n                    // Three possible character from the loan password\r\n                    int one;\r\n                    int two;\r\n                    int three;\r\n    \r\n                    int [] randomCharacters = randomUniqueGenerator(3, loanPassword.length());\r\n                    \r\n                    one = randomCharacters[0];\r\n                    two = randomCharacters[1];\r\n                    three = randomCharacters[2];\r\n    \r\n   // Check to see if the random numbers are the same or different. -&gt; Implement a Hash Map. \r\n\r\n    \r\n                    char entry_one = loanPassword.charAt(one);\r\n                    char entry_two = loanPassword.charAt(two);\r\n                    char entry_three = loanPassword.charAt(three);\r\n    \r\n                    String entry_one_modify = Character.toString(entry_one);\r\n                    String entry_two_modify = Character.toString(entry_two);\r\n                    String entry_three_modify = Character.toString(entry_three);\r\n    \r\n                    String [] entriesmain = {entry_one_modify, entry_two_modify, entry_three_modify};\r\n                    \r\n                    try (Scanner entrytwo = new Scanner(System.in)) {\r\n                        for (int k = 0; k &lt; 3; k ++) {\r\n                            System.out.print(&quot;Enter character &quot; + randomCharacters[k] + &quot; of the loan pass code: &quot;);\r\n                            String userentrytwo = entrytwo.next();\r\n                            entrytwo.nextLine();\r\n    \r\n                            if (userentrytwo.equals(entriesmain[k])) {\r\n                                continue;\r\n                            } else {\r\n                                pass = false;\r\n                                continue;\r\n                            }\r\n                        }\r\n                    }\r\n                    \r\n    \r\n   // Check to see if pass is true or false then take the appropriate action \r\n    \r\n                    if (pass) {\r\n                        System.out.println(&quot;Customer Name: &quot; + data.get(i).getFirstName() + &quot; &quot; + data.get(i).getLastName());\r\n                        System.out.println(&quot;Branch Code: &quot; + data.get(i).getBrachCode());\r\n                        System.out.println(&quot;Gender: &quot; + data.get(i).getGender());\r\n                        System.out.println(&quot;Date of Birth: &quot; + data.get(i).getDOB());\r\n                        System.out.println(&quot;Loan Amount: &quot; + data.get(i).getLoanAmount());\r\n                        System.out.println(&quot;Customer Phone Number: &quot; + data.get(i).getPhoneNumber());\r\n                        MainMenu.options();\r\n                    } else { \r\n                        System.out.println(&quot;Wrong Passcode !&quot;); \r\n                        MainMenu.options();\r\n                    } \r\n    \r\n    \r\n                }","title":"I am unsure of why my code is resulting in an Exception in thread &quot;main&quot; java.util.NoSuchElementException error and how I should resolve it","body":"<p>Query by loan ID</p>\n<p>// Method that allows the user to query by loan ID</p>\n<pre><code>public static void QuerybyloanID(List&lt;Loan&gt; data) {\n    try (Scanner entry = new Scanner(System.in)) {\n        System.out.print(&quot;Please, enter the loan ID: &quot;);\n        String userentry = entry.next();\n</code></pre>\n<p>// For loop is used to locate the loan ID within the list of loans</p>\n<pre><code>        for (int i = 0; i &lt; data.size(); i++) {\n            String loanID = data.get(i).getLoanID();\n            \n            if (loanID.equals(userentry)) {\n                boolean pass = true;\n                String loanPassword = data.get(i).getPasscode();\n\n                // Three possible character from the loan password\n                int one;\n                int two;\n                int three;\n\n                int [] randomCharacters = randomUniqueGenerator(3, loanPassword.length());\n                \n                one = randomCharacters[0];\n                two = randomCharacters[1];\n                three = randomCharacters[2];\n</code></pre>\n<p>// Check to see if the random numbers are the same or different. -&gt; Implement a Hash Map.</p>\n<pre><code>                char entry_one = loanPassword.charAt(one);\n                char entry_two = loanPassword.charAt(two);\n                char entry_three = loanPassword.charAt(three);\n\n                String entry_one_modify = Character.toString(entry_one);\n                String entry_two_modify = Character.toString(entry_two);\n                String entry_three_modify = Character.toString(entry_three);\n\n                String [] entriesmain = {entry_one_modify, entry_two_modify, entry_three_modify};\n                \n                try (Scanner entrytwo = new Scanner(System.in)) {\n                    for (int k = 0; k &lt; 3; k ++) {\n                        System.out.print(&quot;Enter character &quot; + randomCharacters[k] + &quot; of the loan pass code: &quot;);\n                        String userentrytwo = entrytwo.next();\n                        entrytwo.nextLine();\n\n                        if (userentrytwo.equals(entriesmain[k])) {\n                            continue;\n                        } else {\n                            pass = false;\n                            continue;\n                        }\n                    }\n                }\n                \n</code></pre>\n<p>// Check to see if pass is true or false then take the appropriate action</p>\n<pre><code>                if (pass) {\n                    System.out.println(&quot;Customer Name: &quot; + data.get(i).getFirstName() + &quot; &quot; + data.get(i).getLastName());\n                    System.out.println(&quot;Branch Code: &quot; + data.get(i).getBrachCode());\n                    System.out.println(&quot;Gender: &quot; + data.get(i).getGender());\n                    System.out.println(&quot;Date of Birth: &quot; + data.get(i).getDOB());\n                    System.out.println(&quot;Loan Amount: &quot; + data.get(i).getLoanAmount());\n                    System.out.println(&quot;Customer Phone Number: &quot; + data.get(i).getPhoneNumber());\n                    MainMenu.options();\n                } else { \n                    System.out.println(&quot;Wrong Passcode !&quot;); \n                    MainMenu.options();\n                } \n\n\n            }\n</code></pre>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":1228795,"reputation":8221,"user_id":1193808,"display_name":"Subir Kumar Sao"},"score":1,"creation_date":1644439653,"post_id":71056479,"comment_id":125610468,"body_markdown":"What does this return `return gameEvaluation(board);` ?","body":"What does this return <code>return gameEvaluation(board);</code> ?"},{"owner":{"account_id":14183035,"reputation":3277,"user_id":10245948,"display_name":"Hero Wanders"},"score":5,"creation_date":1644439931,"post_id":71056479,"comment_id":125610567,"body_markdown":"It does not define what should be returned if there is no element in the board equal to &quot; &quot;. Every possible execution path (even if you are never calling your function which will go those paths) has to end in a return statement.","body":"It does not define what should be returned if there is no element in the board equal to &quot; &quot;. Every possible execution path (even if you are never calling your function which will go those paths) has to end in a return statement."},{"owner":{"account_id":18460896,"reputation":505,"user_id":13448436,"display_name":"Lazar Đorđević"},"score":1,"creation_date":1644439971,"post_id":71056479,"comment_id":125610577,"body_markdown":"If `gameEvaluation` returns `int` maybe it will return `int` every time. But you must write `return` on every possible execution path (compiler doesn&#39;t know if `for` will always hit `return`) so just store evaluation in local variable and return it on the end of function.","body":"If <code>gameEvaluation</code> returns <code>int</code> maybe it will return <code>int</code> every time. But you must write <code>return</code> on every possible execution path (compiler doesn&#39;t know if <code>for</code> will always hit <code>return</code>) so just store evaluation in local variable and return it on the end of function."}],"answers":[{"tags":[],"owner":{"account_id":15777655,"reputation":1762,"user_id":11385052,"display_name":"Ryan"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1644440289,"creation_date":1644440289,"answer_id":71056631,"question_id":71056479,"body_markdown":"1) You need to break up your logic in smaller methods.  For started, everything in your second if{} should go into one method and everything your else{} should go in another method. Then you can unit test each one independently for debugging.\r\n\r\n2) if a method has a return value, ALWAYS have the last line in that method to either return a known value or throw an exception.  This is your problem. Whatever use case you have isn&#39;t hitting your other return statements so the method reaches the end with no return and throws the exception.","title":"Why is my code is not working? This method must return a result of type int","body":"<ol>\n<li><p>You need to break up your logic in smaller methods.  For started, everything in your second if{} should go into one method and everything your else{} should go in another method. Then you can unit test each one independently for debugging.</p>\n</li>\n<li><p>if a method has a return value, ALWAYS have the last line in that method to either return a known value or throw an exception.  This is your problem. Whatever use case you have isn't hitting your other return statements so the method reaches the end with no return and throws the exception.</p>\n</li>\n</ol>\n"}],"owner":{"account_id":24208148,"reputation":11,"user_id":18165054,"display_name":"Santy820"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":61,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":1,"score":0,"last_activity_date":1644440289,"creation_date":1644439523,"question_id":71056479,"body_markdown":"**Im trying to code a tic tac toe game using the minimax algorithm. but the method failing, it always says &quot;This method must return a result of type int&quot;**\r\n\r\nthe method is allways is going to return a result of type int \r\n\r\n\r\n```java\r\n static int minimax(String[][] board, int depth, boolean maxPlayer) \r\n    {\r\n      if (depth == 0 || gameOver(board) == true)\r\n      {\r\n        return gameEvaluation(board);\r\n      }\r\n      if (maxPlayer == true)\r\n      {\r\n        int maxEval = -100; \r\n        for (int x = 0; x &lt; 3; x++)\r\n        {\r\n          for (int y = 0; y &lt; 3; y++)\r\n          {\r\n            if (board[x][y].equals(&quot; &quot;))\r\n            {          \r\n              board[x][y] = &quot;x&quot;;\r\n              int eval = minimax(board, (depth - 1), false); \r\n              maxEval = Math.max(maxEval, eval); \r\n              board[x][y] = &quot; &quot;; \r\n              return maxEval; \r\n            }\r\n           \r\n          }\r\n        }\r\n      }\r\n      else\r\n      {\r\n        int minEval = 100; \r\n        for (int x = 0; x &lt; 3; x++)\r\n        {\r\n          for (int y = 0; y &lt; 3; y++)\r\n          {\r\n            if (board[x][y].equals(&quot; &quot;))\r\n            {\r\n              String[][] tempBoard = board; \r\n              tempBoard[x][y] = &quot;o&quot;;\r\n              int eval = minimax(tempBoard, (depth - 1), true); \r\n              minEval = Math.max(minEval, eval); \r\n              return minEval; \r\n            }\r\n          \r\n          }\r\n        }\r\n      }\r\n    }\r\n   ```","title":"Why is my code is not working? This method must return a result of type int","body":"<p><strong>Im trying to code a tic tac toe game using the minimax algorithm. but the method failing, it always says &quot;This method must return a result of type int&quot;</strong></p>\n<p>the method is allways is going to return a result of type int</p>\n<pre class=\"lang-java prettyprint-override\"><code> static int minimax(String[][] board, int depth, boolean maxPlayer) \n    {\n      if (depth == 0 || gameOver(board) == true)\n      {\n        return gameEvaluation(board);\n      }\n      if (maxPlayer == true)\n      {\n        int maxEval = -100; \n        for (int x = 0; x &lt; 3; x++)\n        {\n          for (int y = 0; y &lt; 3; y++)\n          {\n            if (board[x][y].equals(&quot; &quot;))\n            {          \n              board[x][y] = &quot;x&quot;;\n              int eval = minimax(board, (depth - 1), false); \n              maxEval = Math.max(maxEval, eval); \n              board[x][y] = &quot; &quot;; \n              return maxEval; \n            }\n           \n          }\n        }\n      }\n      else\n      {\n        int minEval = 100; \n        for (int x = 0; x &lt; 3; x++)\n        {\n          for (int y = 0; y &lt; 3; y++)\n          {\n            if (board[x][y].equals(&quot; &quot;))\n            {\n              String[][] tempBoard = board; \n              tempBoard[x][y] = &quot;o&quot;;\n              int eval = minimax(tempBoard, (depth - 1), true); \n              minEval = Math.max(minEval, eval); \n              return minEval; \n            }\n          \n          }\n        }\n      }\n    }\n</code></pre>\n"},{"tags":["java","postgresql"],"comments":[{"owner":{"account_id":16657879,"reputation":2625,"user_id":12038714,"display_name":"J Asgarov"},"score":0,"creation_date":1644402076,"post_id":71047728,"comment_id":125595248,"body_markdown":"take a look here https://stackoverflow.com/questions/2757549/org-postgresql-util-psqlexception-fatal-sorry-too-many-clients-already. In any case you haven&#39;t show us your java code so can&#39;T do much for you","body":"take a look here <a href=\"https://stackoverflow.com/questions/2757549/org-postgresql-util-psqlexception-fatal-sorry-too-many-clients-already\" title=\"org postgresql util psqlexception fatal sorry too many clients already\">stackoverflow.com/questions/2757549/&hellip;</a>. In any case you haven&#39;t show us your java code so can&#39;T do much for you"},{"owner":{"account_id":23983674,"reputation":47,"user_id":17970750,"display_name":"Shelton"},"score":0,"creation_date":1644402316,"post_id":71047728,"comment_id":125595352,"body_markdown":"@JAsgarov I&#39;ve edited the question. Please verify","body":"@JAsgarov I&#39;ve edited the question. Please verify"},{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":3,"creation_date":1644402755,"post_id":71047728,"comment_id":125595542,"body_markdown":"You&#39;re creating a new pool every time you request a connection.","body":"You&#39;re creating a new pool every time you request a connection."},{"owner":{"account_id":23983674,"reputation":47,"user_id":17970750,"display_name":"Shelton"},"score":0,"creation_date":1644402971,"post_id":71047728,"comment_id":125595626,"body_markdown":"@tgdavies I&#39;m kinda new in this. What should I change here? And how can I free all the connections. Is there any way to do that?","body":"@tgdavies I&#39;m kinda new in this. What should I change here? And how can I free all the connections. Is there any way to do that?"},{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":2,"creation_date":1644403125,"post_id":71047728,"comment_id":125595676,"body_markdown":"Create a static field in MyConnection to hold a ComboPooledDataSource  instance, and set it up in a static initialiser. See https://www.mchange.com/projects/c3p0/#using_combopooleddatasource for more information about the class.","body":"Create a static field in MyConnection to hold a ComboPooledDataSource  instance, and set it up in a static initialiser. See <a href=\"https://www.mchange.com/projects/c3p0/#using_combopooleddatasource\" rel=\"nofollow noreferrer\">mchange.com/projects/c3p0/#using_combopooleddatasource</a> for more information about the class."},{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":2,"creation_date":1644403151,"post_id":71047728,"comment_id":125595686,"body_markdown":"To free the connections restart your java process","body":"To free the connections restart your java process"},{"owner":{"account_id":23983674,"reputation":47,"user_id":17970750,"display_name":"Shelton"},"score":0,"creation_date":1644403685,"post_id":71047728,"comment_id":125595876,"body_markdown":"@tgdavies restarting the java process? Would you mind to elaborate","body":"@tgdavies restarting the java process? Would you mind to elaborate"},{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":1,"creation_date":1644403986,"post_id":71047728,"comment_id":125595993,"body_markdown":"Stop your server process (the servlet engine) and start it again.","body":"Stop your server process (the servlet engine) and start it again."},{"owner":{"account_id":23983674,"reputation":47,"user_id":17970750,"display_name":"Shelton"},"score":0,"creation_date":1644404035,"post_id":71047728,"comment_id":125596010,"body_markdown":"@tgdavies I did. But it still says &quot;too many clients already in postgres&quot;","body":"@tgdavies I did. But it still says &quot;too many clients already in postgres&quot;"},{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":1,"creation_date":1644404109,"post_id":71047728,"comment_id":125596046,"body_markdown":"I would have expected that to fix it. You can also restart Postgres","body":"I would have expected that to fix it. You can also restart Postgres"},{"owner":{"account_id":23983674,"reputation":47,"user_id":17970750,"display_name":"Shelton"},"score":0,"creation_date":1644404358,"post_id":71047728,"comment_id":125596159,"body_markdown":"@tgdavies Thanks a lot!! It worked.. You have no idea how happy I am TT","body":"@tgdavies Thanks a lot!! It worked.. You have no idea how happy I am TT"},{"owner":{"account_id":23983674,"reputation":47,"user_id":17970750,"display_name":"Shelton"},"score":0,"creation_date":1644404586,"post_id":71047728,"comment_id":125596248,"body_markdown":"Let us [continue this discussion in chat](https://chat.stackoverflow.com/rooms/241861/discussion-between-shelton-and-tgdavies).","body":"Let us <a href=\"https://chat.stackoverflow.com/rooms/241861/discussion-between-shelton-and-tgdavies\">continue this discussion in chat</a>."},{"owner":{"account_id":23983674,"reputation":47,"user_id":17970750,"display_name":"Shelton"},"score":0,"creation_date":1644405643,"post_id":71047728,"comment_id":125596642,"body_markdown":"@tgdavies I&#39;ve added my modified code in the chat. Can you please verify if that&#39;s proper?","body":"@tgdavies I&#39;ve added my modified code in the chat. Can you please verify if that&#39;s proper?"}],"answers":[{"tags":[],"owner":{"account_id":23201300,"reputation":3123,"user_id":17296084,"display_name":"Ramin Faracov"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1644440256,"creation_date":1644440256,"answer_id":71056623,"question_id":71047728,"body_markdown":"Usually, DB Admins are using pooling technologies on Databases. For PostgreSQL one of the more popularly is a `PGBOUNCER`. We used `PGBOUNCER` in our large project, the result is excellent. I recommend it to you. To get more information about the pooling system you can read this link. [For About Pooling][1]\r\n\r\n\r\n  [1]: https://www.ashnik.com/everything-you-need-to-know-about-connection-pooling-in-postgres/","title":"too many clients already in postgres","body":"<p>Usually, DB Admins are using pooling technologies on Databases. For PostgreSQL one of the more popularly is a <code>PGBOUNCER</code>. We used <code>PGBOUNCER</code> in our large project, the result is excellent. I recommend it to you. To get more information about the pooling system you can read this link. <a href=\"https://www.ashnik.com/everything-you-need-to-know-about-connection-pooling-in-postgres/\" rel=\"nofollow noreferrer\">For About Pooling</a></p>\n"}],"owner":{"account_id":23983674,"reputation":47,"user_id":17970750,"display_name":"Shelton"},"comment_count":13,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":781,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1644440256,"creation_date":1644401740,"question_id":71047728,"body_markdown":"[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/eQdKb.jpg\r\nI was working on a java project and it was working just fine. I was able to make connections. I closed all the connections properly in finally block. Now I am not able to make connections or even open psql in my terminal. How can I make it work as before. Much much appreciated\r\n\r\n```\r\nimport java.sql.Connection;\r\nimport com.mchange.v2.c3p0.*;\r\n\r\npublic class MyConnection {\r\n\tpublic static Connection getConnection(){\r\n\t\tComboPooledDataSource cpds1 = new ComboPooledDataSource(); \r\n\t\tString dbDriver = &quot;org.postgresql.Driver&quot;;\r\n\t\tString dbName = &quot;jdbc:postgresql://localhost/postgres&quot;;\r\n\t\tcpds1.setJdbcUrl(dbName);\r\n        String userName = &quot;user_1&quot;;\r\n        cpds1.setUser(userName);\r\n        String password = &quot;mypass&quot;;\r\n        cpds1.setPassword(password);\r\n        cpds1.setMaxStatements( 180 );  \r\n\t\ttry \r\n\t\t{\r\n\t\t\tcpds1.setDriverClass(dbDriver);\r\n\t        return cpds1.getConnection();\r\n\t\t} \r\n\t\tcatch (Exception e) {\r\n\t\t\t// TODO Auto-generated catch block\r\n\t\t\te.printStackTrace();\r\n\t\t\treturn null;\r\n\t\t}\r\n\t}\r\n}\r\n```\r\nThis is where I&#39;m calling it\r\n```\r\npublic void doPost(HttpServletRequest request, HttpServletResponse response) throws IOException\r\n    {\r\n\t\tPrintWriter writer = response.getWriter();\r\n\t\tJSONObject jo = new JSONObject();\r\n\t    JSONObject jObj;\r\n\t    Statement stmt = null;\r\n\t\tConnection con = null;\r\n\t\tPreparedStatement ps;\r\n        ResultSet rs = null;\r\n\t    try\r\n\t    {\r\n\t    \tjObj = UtilityClass.getJSON(request);\r\n\t\t\tString uname = ((String) jObj.get(&quot;uname&quot;));\r\n\t\t\tString pass = ((String) jObj.get(&quot;pass&quot;));\r\n            String sql = &quot;SELECT * FROM users WHERE username = ?&quot;;\r\n\t    \ttry\r\n\t    \t{\r\n\t            con = MyConnection.getConnection();\r\n\t            System.out.println(&quot;Got Connection&quot;);      \r\n\t            stmt = con.createStatement();\r\n\t            ps = con.prepareStatement(sql);\r\n\t            ps.setString(1, uname);\r\n\t            rs = ps.executeQuery();\r\n\t            if(rs.next())\r\n\t            {\r\n\t            \tif(BCrypt.checkpw(pass,rs.getString(&quot;password&quot;)))\r\n\t            \t{\r\n\t            \t\tHttpSession session = request.getSession();\r\n\t            \t\tsession.setAttribute(&quot;uname&quot;, uname);\r\n\t            \t\tif(session.isNew())\r\n\t            \t\t{\r\n\t            \t\t\tSystem.out.println(&quot;new&quot;);\r\n\t            \t\t}\r\n\t            \t\tif(uname.equals(&quot;admin&quot;))\r\n\t            \t\t{\r\n\t            \t\t\tsession.setAttribute(&quot;role&quot;, &quot;admin&quot;);\r\n\t            \t\t\tjo.put(&quot;status&quot;, &quot;admin&quot;);\r\n\t            \t\t}\r\n\t            \t\telse\r\n\t            \t\t{\r\n\t            \t\t\tsession.setAttribute(&quot;role&quot;, &quot;user&quot;);\r\n\t            \t\t\tjo.put(&quot;status&quot;, &quot;authenticate&quot;);\r\n\t            \t\t}\r\n\t            \t}\r\n\t            }\r\n\t            writer.print(jo);\r\n\t    \t}\r\n\t    \tcatch (Exception e) \r\n            {\r\n\t    \t\te.printStackTrace();\r\n\t    \t\tSystem.out.println(&quot;Not Connected&quot;);\r\n\t\t\t}\r\n\t    \tfinally \r\n            {\r\n\t    \t\tif(rs != null)\r\n\t    \t\t{\r\n\t    \t\t\trs.close();\r\n\t    \t\t}\r\n\t    \t\tif(stmt != null)\r\n\t    \t\t{\r\n\t    \t\t\tstmt.close();\r\n\t    \t\t}\r\n\t            if(con != null)\r\n\t            {\r\n\t            \tcon.close();\r\n\t            }\r\n\t\t\t}\r\n\t    }\r\n\t    catch(Exception e)\r\n\t    {\r\n\t    \tSystem.out.print(&quot;JSON Exception&quot;);\r\n\t    }\r\n\t}","title":"too many clients already in postgres","body":"<p><a href=\"https://i.stack.imgur.com/eQdKb.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/eQdKb.jpg\" alt=\"enter image description here\" /></a></p>\n<p>I was working on a java project and it was working just fine. I was able to make connections. I closed all the connections properly in finally block. Now I am not able to make connections or even open psql in my terminal. How can I make it work as before. Much much appreciated</p>\n<pre><code>import java.sql.Connection;\nimport com.mchange.v2.c3p0.*;\n\npublic class MyConnection {\n    public static Connection getConnection(){\n        ComboPooledDataSource cpds1 = new ComboPooledDataSource(); \n        String dbDriver = &quot;org.postgresql.Driver&quot;;\n        String dbName = &quot;jdbc:postgresql://localhost/postgres&quot;;\n        cpds1.setJdbcUrl(dbName);\n        String userName = &quot;user_1&quot;;\n        cpds1.setUser(userName);\n        String password = &quot;mypass&quot;;\n        cpds1.setPassword(password);\n        cpds1.setMaxStatements( 180 );  \n        try \n        {\n            cpds1.setDriverClass(dbDriver);\n            return cpds1.getConnection();\n        } \n        catch (Exception e) {\n            // TODO Auto-generated catch block\n            e.printStackTrace();\n            return null;\n        }\n    }\n}\n</code></pre>\n<p>This is where I'm calling it</p>\n<pre><code>public void doPost(HttpServletRequest request, HttpServletResponse response) throws IOException\n    {\n        PrintWriter writer = response.getWriter();\n        JSONObject jo = new JSONObject();\n        JSONObject jObj;\n        Statement stmt = null;\n        Connection con = null;\n        PreparedStatement ps;\n        ResultSet rs = null;\n        try\n        {\n            jObj = UtilityClass.getJSON(request);\n            String uname = ((String) jObj.get(&quot;uname&quot;));\n            String pass = ((String) jObj.get(&quot;pass&quot;));\n            String sql = &quot;SELECT * FROM users WHERE username = ?&quot;;\n            try\n            {\n                con = MyConnection.getConnection();\n                System.out.println(&quot;Got Connection&quot;);      \n                stmt = con.createStatement();\n                ps = con.prepareStatement(sql);\n                ps.setString(1, uname);\n                rs = ps.executeQuery();\n                if(rs.next())\n                {\n                    if(BCrypt.checkpw(pass,rs.getString(&quot;password&quot;)))\n                    {\n                        HttpSession session = request.getSession();\n                        session.setAttribute(&quot;uname&quot;, uname);\n                        if(session.isNew())\n                        {\n                            System.out.println(&quot;new&quot;);\n                        }\n                        if(uname.equals(&quot;admin&quot;))\n                        {\n                            session.setAttribute(&quot;role&quot;, &quot;admin&quot;);\n                            jo.put(&quot;status&quot;, &quot;admin&quot;);\n                        }\n                        else\n                        {\n                            session.setAttribute(&quot;role&quot;, &quot;user&quot;);\n                            jo.put(&quot;status&quot;, &quot;authenticate&quot;);\n                        }\n                    }\n                }\n                writer.print(jo);\n            }\n            catch (Exception e) \n            {\n                e.printStackTrace();\n                System.out.println(&quot;Not Connected&quot;);\n            }\n            finally \n            {\n                if(rs != null)\n                {\n                    rs.close();\n                }\n                if(stmt != null)\n                {\n                    stmt.close();\n                }\n                if(con != null)\n                {\n                    con.close();\n                }\n            }\n        }\n        catch(Exception e)\n        {\n            System.out.print(&quot;JSON Exception&quot;);\n        }\n    }\n</code></pre>\n"},{"tags":["java","gradle","jar","code-generation","dependency-management"],"comments":[{"owner":{"account_id":17592368,"reputation":13891,"user_id":12763954,"display_name":"Olivier"},"score":1,"creation_date":1644138815,"post_id":70976694,"comment_id":125522011,"body_markdown":"Why don&#39;t you just use a compiled jar?","body":"Why don&#39;t you just use a compiled jar?"},{"owner":{"account_id":23551,"reputation":30672,"user_id":59087,"accept_rate":99,"display_name":"Dave Jarvis"},"score":0,"creation_date":1644168434,"post_id":70976694,"comment_id":125528697,"body_markdown":"The generated source code is from a different project and cannot be compiled separately because of circular dependencies. The projects cannot be merged. (If we could merge the projects, then we would add a task to build.gradle as a precondition to building.) We can also use a git submodule, but we&#39;d like to avoid that rabbit hole as well.","body":"The generated source code is from a different project and cannot be compiled separately because of circular dependencies. The projects cannot be merged. (If we could merge the projects, then we would add a task to build.gradle as a precondition to building.) We can also use a git submodule, but we&#39;d like to avoid that rabbit hole as well."}],"answers":[{"tags":[],"owner":{"account_id":2008878,"reputation":15778,"user_id":1797912,"accept_rate":60,"display_name":"Chriki"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1644272919,"creation_date":1644268792,"answer_id":71025540,"question_id":70976694,"body_markdown":"## Working Solution\r\n\r\nI first believed it wasn’t possible to use a JAR file containing uncompiled Java code as additional sources in IntelliJ. After a few tries I could eventually configure it in the UI, though, thanks to the pointer from your “Content Root” section. A bit of fiddling with the [IDEA plugin](https://docs.gradle.org/7.3.1/userguide/idea_plugin.html) later, I could finally come up with a fully working solution:\r\n\r\n```lang-groovy\r\nplugins {\r\n    id &#39;java&#39;\r\n    id &#39;idea&#39;\r\n}\r\n\r\ntasks.withType(JavaCompile) {\r\n    source(zipTree(&quot;${projectDir}/sources.jar&quot;))\r\n}\r\n\r\nidea.module.iml {\r\n    withXml {\r\n        def baseUrl = &#39;jar://$MODULE_DIR$/sources.jar!/&#39;\r\n        def component = it.asNode().component[0]\r\n        def jarContent = component.appendNode(&#39;content&#39;, [url: baseUrl])\r\n        jarContent.appendNode(&#39;sourceFolder&#39;, [\r\n                url: &quot;${baseUrl}com&quot;,\r\n                isTestSource: false,\r\n            ])\r\n    }\r\n}\r\n```\r\n\r\nBefore opening the project in IntelliJ, you’ll have to run `./gradlew idea` and then open the generated `.ipr` file with IntelliJ. If IntelliJ says “Gradle build scripts found”, then _don’t_ attempt to load the Gradle project but instead “Skip” this. You now have an IntelliJ project which is generated by Gradle but which is still independent of Gradle – and hence you can safely call `./gradlew clean` without affecting IntelliJ.\r\n\r\n## Other Thoughts\r\n\r\nHere’s another approach of configuring the compiler from Gradle, using the (rarely used) [`-sourcepath` option](https://docs.oracle.com/en/java/javase/11/tools/javac.html#GUID-AEEC9F07-CB49-4E96-8BC7-BCC2C7F725C9) of `javac`:\r\n\r\n```lang-groovy\r\ntasks.withType(JavaCompile) {\r\n    options.sourcepath = files(&quot;${projectDir}/sources.jar&quot;)\r\n}\r\n```\r\n\r\nI personally would still prefer an approach where I don’t have to let Gradle generate an IntelliJ project but instead to let IntelliJ work with Gradle. However, that’ll require extracting the JAR file. A good Gradle solution for this would be the following:\r\n\r\n```lang-groovy\r\nplugins {\r\n    id &#39;java&#39;\r\n}\r\n\r\ndef unzipAlice = tasks.register(&#39;unzipAlice&#39;, Sync) {\r\n    from(zipTree(&quot;${projectDir}/sources.jar&quot;))\r\n    into(temporaryDir)\r\n}\r\n\r\nsourceSets.main.java.srcDir(unzipAlice)\r\n```\r\n\r\nThis solution at least solves the “synchronization” problem mentioned in your question: the [`Sync` task](https://docs.gradle.org/7.3.1/javadoc/org/gradle/api/tasks/Sync.html) makes sure that no updates to `sources.jar` are ignored (including deletions).\r\n\r\nAbout the “editable” problem, I wonder why you don’t trust your developers here? They could produce all kind of nonsense in the rest of the code anyway. Or even if the JAR isn’t extracted, they could still replace the files in the JAR. With this extraction solution, IntelliJ at least warns if the sources are edited:\r\n\r\n&gt; Generated source files should not be edited. The changes will be lost when sources are regenerated.\r\n\r\nOk, if you run `./gradlew clean` then IntelliJ will indeed not find the sources anymore.  But this can easily be fixed by either calling “Build” → “Build Project” in the UI or by running “./gradlew unzipAlice”. If the “./gradlew clean” issue should really be a dealbreaker for the extracting approach, then you could still consider extracting the sources outside of the `build` directory …","title":"Use zipTree as source set for building and static compiling","body":"<h2>Working Solution</h2>\n<p>I first believed it wasn’t possible to use a JAR file containing uncompiled Java code as additional sources in IntelliJ. After a few tries I could eventually configure it in the UI, though, thanks to the pointer from your “Content Root” section. A bit of fiddling with the <a href=\"https://docs.gradle.org/7.3.1/userguide/idea_plugin.html\" rel=\"nofollow noreferrer\">IDEA plugin</a> later, I could finally come up with a fully working solution:</p>\n<pre class=\"lang-groovy prettyprint-override\"><code>plugins {\n    id 'java'\n    id 'idea'\n}\n\ntasks.withType(JavaCompile) {\n    source(zipTree(&quot;${projectDir}/sources.jar&quot;))\n}\n\nidea.module.iml {\n    withXml {\n        def baseUrl = 'jar://$MODULE_DIR$/sources.jar!/'\n        def component = it.asNode().component[0]\n        def jarContent = component.appendNode('content', [url: baseUrl])\n        jarContent.appendNode('sourceFolder', [\n                url: &quot;${baseUrl}com&quot;,\n                isTestSource: false,\n            ])\n    }\n}\n</code></pre>\n<p>Before opening the project in IntelliJ, you’ll have to run <code>./gradlew idea</code> and then open the generated <code>.ipr</code> file with IntelliJ. If IntelliJ says “Gradle build scripts found”, then <em>don’t</em> attempt to load the Gradle project but instead “Skip” this. You now have an IntelliJ project which is generated by Gradle but which is still independent of Gradle – and hence you can safely call <code>./gradlew clean</code> without affecting IntelliJ.</p>\n<h2>Other Thoughts</h2>\n<p>Here’s another approach of configuring the compiler from Gradle, using the (rarely used) <a href=\"https://docs.oracle.com/en/java/javase/11/tools/javac.html#GUID-AEEC9F07-CB49-4E96-8BC7-BCC2C7F725C9\" rel=\"nofollow noreferrer\"><code>-sourcepath</code> option</a> of <code>javac</code>:</p>\n<pre class=\"lang-groovy prettyprint-override\"><code>tasks.withType(JavaCompile) {\n    options.sourcepath = files(&quot;${projectDir}/sources.jar&quot;)\n}\n</code></pre>\n<p>I personally would still prefer an approach where I don’t have to let Gradle generate an IntelliJ project but instead to let IntelliJ work with Gradle. However, that’ll require extracting the JAR file. A good Gradle solution for this would be the following:</p>\n<pre class=\"lang-groovy prettyprint-override\"><code>plugins {\n    id 'java'\n}\n\ndef unzipAlice = tasks.register('unzipAlice', Sync) {\n    from(zipTree(&quot;${projectDir}/sources.jar&quot;))\n    into(temporaryDir)\n}\n\nsourceSets.main.java.srcDir(unzipAlice)\n</code></pre>\n<p>This solution at least solves the “synchronization” problem mentioned in your question: the <a href=\"https://docs.gradle.org/7.3.1/javadoc/org/gradle/api/tasks/Sync.html\" rel=\"nofollow noreferrer\"><code>Sync</code> task</a> makes sure that no updates to <code>sources.jar</code> are ignored (including deletions).</p>\n<p>About the “editable” problem, I wonder why you don’t trust your developers here? They could produce all kind of nonsense in the rest of the code anyway. Or even if the JAR isn’t extracted, they could still replace the files in the JAR. With this extraction solution, IntelliJ at least warns if the sources are edited:</p>\n<blockquote>\n<p>Generated source files should not be edited. The changes will be lost when sources are regenerated.</p>\n</blockquote>\n<p>Ok, if you run <code>./gradlew clean</code> then IntelliJ will indeed not find the sources anymore.  But this can easily be fixed by either calling “Build” → “Build Project” in the UI or by running “./gradlew unzipAlice”. If the “./gradlew clean” issue should really be a dealbreaker for the extracting approach, then you could still consider extracting the sources outside of the <code>build</code> directory …</p>\n"},{"tags":[],"owner":{"account_id":23551,"reputation":30672,"user_id":59087,"accept_rate":99,"display_name":"Dave Jarvis"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1644440126,"creation_date":1644363104,"answer_id":71042227,"question_id":70976694,"body_markdown":"We decided that extracting the `jar` file would be the best approach after all:\r\n\r\n``` groovy\r\napply plugin: &#39;idea&#39;\r\n\r\nfinal GENERATED_JAR = &quot;${projectDir}/sources.jar&quot;\r\nfinal GENERATED_DIR = &quot;${buildDir}/generated/sources&quot;\r\n\r\ntask extractSources(type: Sync) {\r\n  from zipTree(GENERATED_JAR)\r\n  into GENERATED_DIR\r\n}\r\n\r\nsourceSets.main.java.srcDir extractSources\r\nclean.finalizedBy extractSources\r\n\r\nidea.module.generatedSourceDirs += file(GENERATED_DIR)\r\n```\r\n\r\nThis:\r\n\r\n* Retains the generated sources after `clean`\r\n* Issues a warning in the IDE when modifying generated sources\r\n* Couples the build process to extracting source files\r\n* Reuses the `build/generated/sources` path\r\n* Keeps `.jar` file and `.java` files in synchronization\r\n\r\nIn effect, the following behaviours work as expected:\r\n\r\n* `./gradlew clean` -- leaves the extracted `.java` files intact, effectively\r\n* `./gradlew build` -- re-synchronizes `.java` files with `.jar` contents\r\n","title":"Use zipTree as source set for building and static compiling","body":"<p>We decided that extracting the <code>jar</code> file would be the best approach after all:</p>\n<pre><code>apply plugin: 'idea'\n\nfinal GENERATED_JAR = &quot;${projectDir}/sources.jar&quot;\nfinal GENERATED_DIR = &quot;${buildDir}/generated/sources&quot;\n\ntask extractSources(type: Sync) {\n  from zipTree(GENERATED_JAR)\n  into GENERATED_DIR\n}\n\nsourceSets.main.java.srcDir extractSources\nclean.finalizedBy extractSources\n\nidea.module.generatedSourceDirs += file(GENERATED_DIR)\n</code></pre>\n<p>This:</p>\n<ul>\n<li>Retains the generated sources after <code>clean</code></li>\n<li>Issues a warning in the IDE when modifying generated sources</li>\n<li>Couples the build process to extracting source files</li>\n<li>Reuses the <code>build/generated/sources</code> path</li>\n<li>Keeps <code>.jar</code> file and <code>.java</code> files in synchronization</li>\n</ul>\n<p>In effect, the following behaviours work as expected:</p>\n<ul>\n<li><code>./gradlew clean</code> -- leaves the extracted <code>.java</code> files intact, effectively</li>\n<li><code>./gradlew build</code> -- re-synchronizes <code>.java</code> files with <code>.jar</code> contents</li>\n</ul>\n"}],"owner":{"account_id":23551,"reputation":30672,"user_id":59087,"accept_rate":99,"display_name":"Dave Jarvis"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":608,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"accepted_answer_id":71025540,"answer_count":2,"score":4,"last_activity_date":1644440126,"creation_date":1643914010,"question_id":70976694,"body_markdown":"# Background\r\n\r\nProject Alice generates Java source code, stores it in `sources.jar`, then uploads it to a Maven repository. Project Bob pulls `sources.jar` down and needs to use it when compiling. Bob does not know that Alice exists, only where to find `sources.jar`.\r\n\r\nVersions: JDK 11, Gradle 7.3.1, IntelliJ IDEA 2021.3.1\r\n\r\n# Problem\r\n\r\nMaking gradle (and IntelliJ&#39;s IDEA) build using source files embedded in a JAR file. To be clear, the JAR file contents resemble:\r\n\r\n``` bash\r\n$ jar -tvf sources.jar \r\n     0 Thu Feb 03 08:38:56 PST 2022 META-INF/\r\n    52 Thu Feb 03 08:38:56 PST 2022 META-INF/MANIFEST.MF\r\n     0 Thu Feb 03 08:38:30 PST 2022 com/\r\n     0 Thu Feb 03 08:38:32 PST 2022 com/domain/\r\n     0 Thu Feb 03 08:38:30 PST 2022 com/domain/package/\r\n   938 Thu Feb 03 08:38:32 PST 2022 com/domain/package/SourceCode.java\r\n```\r\n\r\nSolutions that extract the `.java` files from the `.jar` file introduce knock-on effects we&#39;d like to avoid, including:\r\n\r\n* **Editable.** Extracted source files can be edited in the IDE. We&#39;d like them to be read-only. We could add a task that sets the files read-only, but that feels like solving the wrong problem (added complexity).\r\n* **Synchronization.** When a newly generated `sources.jar` is pulled down, we&#39;ll have to delete the extraction directory to remove any stale .java files that were preserved. If there was a way to avoid extraction, then the act of pulling down the new `sources.jar` file would ensure correctness (no added complexity). By unarchiving the .java files, it&#39;s possible to enter an inconsistent state:\r\n\r\n``` bash\r\n$ jar -tvf sources.jar | grep java$ | wc -l\r\n61\r\n$ find src/gen -name &quot;*java&quot; | wc -l\r\n65\r\n```\r\n\r\nIf there was a way to treat `sources.jar` as a source directory without extracting the files, these knock-on effects disappear.\r\n\r\n# Attempts\r\n\r\nA number of approaches have failed.\r\n\r\n## sourceSets\r\n\r\nChanging `sourceSets` doesn&#39;t work:\r\n\r\n``` groovy\r\nsourceSets.main.java.srcDirs += &quot;jar:${projectDir}/sources.jar!/&quot;\r\n```\r\n\r\nThe error is:\r\n\r\n&gt; Cannot convert URL &#39;jar:/home/user/dev/project/sources.jar!/&#39; to a file.\r\n\r\nUsing a zipTree with `sourceSets` doesn&#39;t work, although the error message is telling:\r\n\r\n``` groovy\r\nsourceSets.main.java.srcDirs += zipTree(file: &quot;${projectDir}/sources.jar&quot;)\r\n```\r\n\r\nError:\r\n\r\n&gt; Cannot convert the provided notation to a File or URI.\r\n&gt;\r\n&gt; The following types/formats are supported:\r\n&gt; \r\n&gt; - A URI or URL instance.\r\n\r\nThis was expected. What was unexpected was that URL instances are allowed, but seemingly not if embedded within a JAR file.\r\n\r\nThe following allows building Bob, but the IDE is unable to find `SourceCode.java`:\r\n\r\n``` groovy\r\nsourceSets.main.java.srcDirs += zipTree(&quot;${projectDir}/sources.jar&quot;).matching {\r\n  include &quot;com&quot;\r\n}\r\n```\r\n\r\n## build task\r\n\r\nModifying the build task to extract the generated code first partially works:\r\n\r\n``` groovy\r\ntask codeGen {\r\n  copy {\r\n    from( zipTree( &quot;${projectDir}/sources.jar&quot; ) )\r\n    into( &quot;${buildDir}/src/gen/java&quot; )\r\n  }\r\n\r\n  sourceSets.main.java.srcDirs += [&quot;${buildDir}/src/gen/java&quot;]\r\n}\r\n\r\nbuild { doFirst { codeGen } }\r\n```\r\n\r\nThe issue is that removing the `build` directory then prevents static compiles (because IDEA cannot find the generated source files). In any case, we don&#39;t want to extract the source files because of all the knock-on problems.\r\n\r\n## compile task\r\n\r\nThe following snippet also does not compile:\r\n\r\n``` groovy\r\ntasks.withType(JavaCompile) {\r\n  source = zipTree(file: &quot;${projectDir}/sources.jar&quot;)\r\n}\r\n```\r\n\r\nNot updating `sourceSets` means that the IDE cannot discover the source files.\r\n\r\n## sync task\r\n\r\nWe could extract the files into the main source directory, instead, such as:\r\n\r\n``` groovy\r\ndef syncTask = task sync(type: Sync) {\r\n    from zipTree(&quot;${projectDir}/sources.jar&quot;)\r\n    into &quot;${projectDir}/src/gen/java&quot;\r\n\r\n    preserve {\r\n        include &#39;com/**&#39;\r\n        exclude &#39;META-INF/**&#39;\r\n    }\r\n}\r\n\r\nsourceSets.main.java.srcDir(syncTask)\r\n```\r\n\r\nWhile that addresses the clean issue, we’re left with the original problems that we’d like to avoid.\r\n\r\n## Content Root\r\n\r\nSetting the Content Root and marking the Source Folder from within IntelliJ IDEA works. The IDE updates `.idea/misc.xml` to include:\r\n\r\n``` xml\r\n  &lt;component name=&quot;FrameworkDetectionExcludesConfiguration&quot;&gt;\r\n    &lt;file type=&quot;web&quot; url=&quot;file://$PROJECT_DIR$&quot; /&gt;\r\n    &lt;file type=&quot;web&quot; url=&quot;jar://$PROJECT_DIR$/project/sources.jar!/&quot; /&gt;\r\n  &lt;/component&gt;\r\n```\r\n\r\nIn theory, the `idea` plugin may have the ability to set this value.\r\n\r\n# Question\r\n\r\nHow would you instruct Gradle to reference and build using source files that are stored in an external Java archive file when compiling a project (*without* extracting the archive) such that IDEA can statically resolve the source files, as well?\r\n","title":"Use zipTree as source set for building and static compiling","body":"<h1>Background</h1>\n<p>Project Alice generates Java source code, stores it in <code>sources.jar</code>, then uploads it to a Maven repository. Project Bob pulls <code>sources.jar</code> down and needs to use it when compiling. Bob does not know that Alice exists, only where to find <code>sources.jar</code>.</p>\n<p>Versions: JDK 11, Gradle 7.3.1, IntelliJ IDEA 2021.3.1</p>\n<h1>Problem</h1>\n<p>Making gradle (and IntelliJ's IDEA) build using source files embedded in a JAR file. To be clear, the JAR file contents resemble:</p>\n<pre class=\"lang-sh prettyprint-override\"><code>$ jar -tvf sources.jar \n     0 Thu Feb 03 08:38:56 PST 2022 META-INF/\n    52 Thu Feb 03 08:38:56 PST 2022 META-INF/MANIFEST.MF\n     0 Thu Feb 03 08:38:30 PST 2022 com/\n     0 Thu Feb 03 08:38:32 PST 2022 com/domain/\n     0 Thu Feb 03 08:38:30 PST 2022 com/domain/package/\n   938 Thu Feb 03 08:38:32 PST 2022 com/domain/package/SourceCode.java\n</code></pre>\n<p>Solutions that extract the <code>.java</code> files from the <code>.jar</code> file introduce knock-on effects we'd like to avoid, including:</p>\n<ul>\n<li><strong>Editable.</strong> Extracted source files can be edited in the IDE. We'd like them to be read-only. We could add a task that sets the files read-only, but that feels like solving the wrong problem (added complexity).</li>\n<li><strong>Synchronization.</strong> When a newly generated <code>sources.jar</code> is pulled down, we'll have to delete the extraction directory to remove any stale .java files that were preserved. If there was a way to avoid extraction, then the act of pulling down the new <code>sources.jar</code> file would ensure correctness (no added complexity). By unarchiving the .java files, it's possible to enter an inconsistent state:</li>\n</ul>\n<pre class=\"lang-sh prettyprint-override\"><code>$ jar -tvf sources.jar | grep java$ | wc -l\n61\n$ find src/gen -name &quot;*java&quot; | wc -l\n65\n</code></pre>\n<p>If there was a way to treat <code>sources.jar</code> as a source directory without extracting the files, these knock-on effects disappear.</p>\n<h1>Attempts</h1>\n<p>A number of approaches have failed.</p>\n<h2>sourceSets</h2>\n<p>Changing <code>sourceSets</code> doesn't work:</p>\n<pre><code>sourceSets.main.java.srcDirs += &quot;jar:${projectDir}/sources.jar!/&quot;\n</code></pre>\n<p>The error is:</p>\n<blockquote>\n<p>Cannot convert URL 'jar:/home/user/dev/project/sources.jar!/' to a file.</p>\n</blockquote>\n<p>Using a zipTree with <code>sourceSets</code> doesn't work, although the error message is telling:</p>\n<pre><code>sourceSets.main.java.srcDirs += zipTree(file: &quot;${projectDir}/sources.jar&quot;)\n</code></pre>\n<p>Error:</p>\n<blockquote>\n<p>Cannot convert the provided notation to a File or URI.</p>\n<p>The following types/formats are supported:</p>\n<ul>\n<li>A URI or URL instance.</li>\n</ul>\n</blockquote>\n<p>This was expected. What was unexpected was that URL instances are allowed, but seemingly not if embedded within a JAR file.</p>\n<p>The following allows building Bob, but the IDE is unable to find <code>SourceCode.java</code>:</p>\n<pre><code>sourceSets.main.java.srcDirs += zipTree(&quot;${projectDir}/sources.jar&quot;).matching {\n  include &quot;com&quot;\n}\n</code></pre>\n<h2>build task</h2>\n<p>Modifying the build task to extract the generated code first partially works:</p>\n<pre><code>task codeGen {\n  copy {\n    from( zipTree( &quot;${projectDir}/sources.jar&quot; ) )\n    into( &quot;${buildDir}/src/gen/java&quot; )\n  }\n\n  sourceSets.main.java.srcDirs += [&quot;${buildDir}/src/gen/java&quot;]\n}\n\nbuild { doFirst { codeGen } }\n</code></pre>\n<p>The issue is that removing the <code>build</code> directory then prevents static compiles (because IDEA cannot find the generated source files). In any case, we don't want to extract the source files because of all the knock-on problems.</p>\n<h2>compile task</h2>\n<p>The following snippet also does not compile:</p>\n<pre><code>tasks.withType(JavaCompile) {\n  source = zipTree(file: &quot;${projectDir}/sources.jar&quot;)\n}\n</code></pre>\n<p>Not updating <code>sourceSets</code> means that the IDE cannot discover the source files.</p>\n<h2>sync task</h2>\n<p>We could extract the files into the main source directory, instead, such as:</p>\n<pre><code>def syncTask = task sync(type: Sync) {\n    from zipTree(&quot;${projectDir}/sources.jar&quot;)\n    into &quot;${projectDir}/src/gen/java&quot;\n\n    preserve {\n        include 'com/**'\n        exclude 'META-INF/**'\n    }\n}\n\nsourceSets.main.java.srcDir(syncTask)\n</code></pre>\n<p>While that addresses the clean issue, we’re left with the original problems that we’d like to avoid.</p>\n<h2>Content Root</h2>\n<p>Setting the Content Root and marking the Source Folder from within IntelliJ IDEA works. The IDE updates <code>.idea/misc.xml</code> to include:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>  &lt;component name=&quot;FrameworkDetectionExcludesConfiguration&quot;&gt;\n    &lt;file type=&quot;web&quot; url=&quot;file://$PROJECT_DIR$&quot; /&gt;\n    &lt;file type=&quot;web&quot; url=&quot;jar://$PROJECT_DIR$/project/sources.jar!/&quot; /&gt;\n  &lt;/component&gt;\n</code></pre>\n<p>In theory, the <code>idea</code> plugin may have the ability to set this value.</p>\n<h1>Question</h1>\n<p>How would you instruct Gradle to reference and build using source files that are stored in an external Java archive file when compiling a project (<em>without</em> extracting the archive) such that IDEA can statically resolve the source files, as well?</p>\n"},{"tags":["java","android","hashmap"],"comments":[{"owner":{"account_id":7363801,"reputation":1298,"user_id":5606222,"display_name":"Matt"},"score":1,"creation_date":1449586240,"post_id":34158839,"comment_id":56064398,"body_markdown":"What does it mean &#39;pozisyon.put(&quot;SKale&quot;, &quot;a8&quot;);][1]][1]&#39; ?","body":"What does it mean &#39;pozisyon.put(&quot;SKale&quot;, &quot;a8&quot;);][1]][1]&#39; ?"},{"owner":{"account_id":5496908,"reputation":193,"user_id":4367708,"accept_rate":70,"display_name":"Aziz S. Kural"},"score":0,"creation_date":1449586375,"post_id":34158839,"comment_id":56064488,"body_markdown":"They came to my question out of nowhere, they don&#39;t exist. Regards and Thank you","body":"They came to my question out of nowhere, they don&#39;t exist. Regards and Thank you"},{"owner":{"account_id":5496908,"reputation":193,"user_id":4367708,"accept_rate":70,"display_name":"Aziz S. Kural"},"score":0,"creation_date":1449586532,"post_id":34158839,"comment_id":56064616,"body_markdown":"pozisyon the name of the HashMap put is the command and (&quot;SKale&quot; (key) and&quot;a8&quot; is value)...","body":"pozisyon the name of the HashMap put is the command and (&quot;SKale&quot; (key) and&quot;a8&quot; is value)..."},{"owner":{"account_id":7363801,"reputation":1298,"user_id":5606222,"display_name":"Matt"},"score":0,"creation_date":1449587866,"post_id":34158839,"comment_id":56065628,"body_markdown":"Now, please make sure you have &#39;put&#39; word between dot and left parenthesis.","body":"Now, please make sure you have &#39;put&#39; word between dot and left parenthesis."},{"owner":{"account_id":5496908,"reputation":193,"user_id":4367708,"accept_rate":70,"display_name":"Aziz S. Kural"},"score":0,"creation_date":1449588109,"post_id":34158839,"comment_id":56065818,"body_markdown":"Dear friend I just checked that Hashmap works under MainActivity but does not work (at least in my Studio) under Class formation. I want to use the Hashmap in a class. Is there something wrong with this approach?","body":"Dear friend I just checked that Hashmap works under MainActivity but does not work (at least in my Studio) under Class formation. I want to use the Hashmap in a class. Is there something wrong with this approach?"}],"answers":[{"tags":[],"owner":{"account_id":6784603,"reputation":480,"user_id":5223814,"display_name":"Lubo Kanev"},"down_vote_count":0,"up_vote_count":23,"is_accepted":true,"score":23,"last_activity_date":1644326350,"creation_date":1449587546,"answer_id":34159373,"question_id":34158839,"body_markdown":"You cannot add elements in HashMap fields outside of methods. Things like this won’t work:\r\n\r\n    public class Class {\r\n        HashMap&lt;String, String&gt; hashMap = new HashMap&lt;String, String&gt;();\r\n        hashMap.put(&quot;one&quot;, &quot;two&quot;);\r\n    }\r\n\r\nIf you want to achieve that, put it in the constructors, like so:\r\n\r\n    public class Class {\r\n        HashMap&lt;String, String&gt; hashMap = new HashMap&lt;String, String&gt;();\r\n\r\n        public Class() {\r\n            hashMap.put(&quot;one&quot;, &quot;two&quot;);\r\n        }\r\n    }\r\n\r\nAnother way you can do it is in a `static` block.\r\n\r\n\r\n","title":"How to add keys and values to a Hashmap while getting &#39;cannot resolve put symbol&#39; error","body":"<p>You cannot add elements in HashMap fields outside of methods. Things like this won’t work:</p>\n<pre><code>public class Class {\n    HashMap&lt;String, String&gt; hashMap = new HashMap&lt;String, String&gt;();\n    hashMap.put(&quot;one&quot;, &quot;two&quot;);\n}\n</code></pre>\n<p>If you want to achieve that, put it in the constructors, like so:</p>\n<pre><code>public class Class {\n    HashMap&lt;String, String&gt; hashMap = new HashMap&lt;String, String&gt;();\n\n    public Class() {\n        hashMap.put(&quot;one&quot;, &quot;two&quot;);\n    }\n}\n</code></pre>\n<p>Another way you can do it is in a <code>static</code> block.</p>\n"},{"tags":[],"owner":{"account_id":12854009,"reputation":696,"user_id":9297922,"display_name":"Arman Hakim Sagar"},"down_vote_count":2,"up_vote_count":1,"is_accepted":false,"score":-1,"last_activity_date":1644439818,"creation_date":1590473063,"answer_id":62015655,"question_id":34158839,"body_markdown":"Try this:\r\n\r\n    public class Class {\r\n        HashMap arrayList1 = new HashMap&lt;&gt;();;\r\n        arrayList1.put(&quot;32&quot;, &quot;Bangalore&quot;);\r\n        arrayList1.put(&quot;32&quot;, &quot;India&quot;);\r\n    }\r\n","title":"How to add keys and values to a Hashmap while getting &#39;cannot resolve put symbol&#39; error","body":"<p>Try this:</p>\n<pre><code>public class Class {\n    HashMap arrayList1 = new HashMap&lt;&gt;();;\n    arrayList1.put(&quot;32&quot;, &quot;Bangalore&quot;);\n    arrayList1.put(&quot;32&quot;, &quot;India&quot;);\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5990212,"reputation":199,"user_id":4706487,"display_name":"Toukea Tatsi"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1644440026,"creation_date":1643964688,"answer_id":70983639,"question_id":34158839,"body_markdown":"Assuming that you are wishing to put a value to a HashMap at the same time you initialize it. I will suggest you this &quot;**magic**&quot; Java syntax:\r\n\r\nTry this:\r\n\r\n     public class ClassName {\r\n        HashMap&lt;String, String&gt; hashMap = new HashMap&lt;String, String&gt;(){\r\n            {\r\n                put(&quot;one&quot;, &quot;two&quot;);\r\n                put(&quot;two&quot;, &quot;three&quot;);\r\n            }\r\n        };\r\n        /*\r\n            Other code and constructor can go here.\r\n            ....\r\n            ....\r\n         */\r\n    }\r\n\r\nIndeed, from Java anywhere even on a non-function code section, you can immediately call the object instance function and properties by following the pattern shown above;-)\r\n\r\n","title":"How to add keys and values to a Hashmap while getting &#39;cannot resolve put symbol&#39; error","body":"<p>Assuming that you are wishing to put a value to a HashMap at the same time you initialize it. I will suggest you this &quot;<strong>magic</strong>&quot; Java syntax:</p>\n<p>Try this:</p>\n<pre><code> public class ClassName {\n    HashMap&lt;String, String&gt; hashMap = new HashMap&lt;String, String&gt;(){\n        {\n            put(&quot;one&quot;, &quot;two&quot;);\n            put(&quot;two&quot;, &quot;three&quot;);\n        }\n    };\n    /*\n        Other code and constructor can go here.\n        ....\n        ....\n     */\n}\n</code></pre>\n<p>Indeed, from Java anywhere even on a non-function code section, you can immediately call the object instance function and properties by following the pattern shown above;-)</p>\n"}],"owner":{"account_id":5496908,"reputation":193,"user_id":4367708,"accept_rate":70,"display_name":"Aziz S. Kural"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":21937,"favorite_count":0,"down_vote_count":3,"up_vote_count":10,"accepted_answer_id":34159373,"answer_count":3,"score":7,"last_activity_date":1644440026,"creation_date":1449586117,"question_id":34158839,"body_markdown":"I am working with [Android Studio][1] 1.4.1. I had just created a Hashmap and was following a tutorial (in Java) on how to populate and manipulate it.\r\n\r\nHowever, I get a &#39;cannot resolve symbol put&#39; error and the &quot;put&quot; command is in red.\r\n\r\nThe image I added shows the auto complete snapshot and although *java.util.HashMap* is imported, there isn&#39;t any &quot;put&quot; command that is available in autocomplete. The available commands also are showing in red. I tried to use them instead of the &quot;put&quot; command. I keep having this type of problem all along. How can I fix it?\r\n\r\n[![Image][2]][2]\r\n\r\n    import java.util.HashMap;\r\n\r\n    HashMap&lt;String, String&gt; pozisyon = new HashMap&lt;String, String&gt;();\r\n    pozisyon.put(&quot;SKale&quot;, &quot;a8&quot;);\r\n\r\n  [1]: https://en.wikipedia.org/wiki/Android_Studio\r\n  [2]: http://i.stack.imgur.com/H60L1.png\r\n\r\n\r\n\r\n\r\n","title":"How to add keys and values to a Hashmap while getting &#39;cannot resolve put symbol&#39; error","body":"<p>I am working with <a href=\"https://en.wikipedia.org/wiki/Android_Studio\" rel=\"nofollow noreferrer\">Android Studio</a> 1.4.1. I had just created a Hashmap and was following a tutorial (in Java) on how to populate and manipulate it.</p>\n<p>However, I get a 'cannot resolve symbol put' error and the &quot;put&quot; command is in red.</p>\n<p>The image I added shows the auto complete snapshot and although <em>java.util.HashMap</em> is imported, there isn't any &quot;put&quot; command that is available in autocomplete. The available commands also are showing in red. I tried to use them instead of the &quot;put&quot; command. I keep having this type of problem all along. How can I fix it?</p>\n<p><a href=\"https://i.stack.imgur.com/H60L1.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/H60L1.png\" alt=\"Image\" /></a></p>\n<pre><code>import java.util.HashMap;\n\nHashMap&lt;String, String&gt; pozisyon = new HashMap&lt;String, String&gt;();\npozisyon.put(&quot;SKale&quot;, &quot;a8&quot;);\n</code></pre>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":2698782,"reputation":38625,"user_id":2330053,"display_name":"Idle_Mind"},"score":0,"creation_date":1643752432,"post_id":70947856,"comment_id":125422481,"body_markdown":"If you MUST use simple arrays (not a dynamic ArrayList)  then you typically would declare an array of some pre-determined &quot;maximum size&quot;, then create a separate variable that tracks how many things are actually placed into the array. If this is not an option then you could accumulate the names in a single string separated by some kind of delimiter, then parse it when the &quot;alldone&quot; is received to determine the exact size of your arrays.","body":"If you MUST use simple arrays (not a dynamic ArrayList)  then you typically would declare an array of some pre-determined &quot;maximum size&quot;, then create a separate variable that tracks how many things are actually placed into the array. If this is not an option then you could accumulate the names in a single string separated by some kind of delimiter, then parse it when the &quot;alldone&quot; is received to determine the exact size of your arrays."},{"owner":{"account_id":1689973,"reputation":37280,"user_id":1552534,"display_name":"WJS"},"score":0,"creation_date":1643814796,"post_id":70947856,"comment_id":125439886,"body_markdown":"Are you supposed to write your own sort routine or may you use ones supplied by the API?  Also, are you supposed to sort on the names or the scores?  And in what order (ascending or descending).  And it doesn&#39;t make sense that you enter the number of entries but are required to stop taking input when `alldone` is entered.  Only one is needed, not both.  You omitted this type of information from you question so we would be guessing as to what is required.","body":"Are you supposed to write your own sort routine or may you use ones supplied by the API?  Also, are you supposed to sort on the names or the scores?  And in what order (ascending or descending).  And it doesn&#39;t make sense that you enter the number of entries but are required to stop taking input when <code>alldone</code> is entered.  Only one is needed, not both.  You omitted this type of information from you question so we would be guessing as to what is required."}],"answers":[{"tags":[],"owner":{"account_id":15777655,"reputation":1762,"user_id":11385052,"display_name":"Ryan"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1643755949,"creation_date":1643755949,"answer_id":70948607,"question_id":70947856,"body_markdown":"You should create a class and implement the Comparable interface like this.  The way I have it set up here, it sorts by name. If you want to sort by the score, just comment out the name compare and uncomment the grade compare.\r\n\r\n    public class Student implements Comparable&lt;Student&gt; {\r\n\tprivate String name;\r\n\tprivate int grade;\r\n\t\r\n\tpublic Student(String name, int grade) {\r\n\t\tthis.name = name;\r\n\t\tthis.grade = grade;\r\n\t}\r\n\t\r\n\tpublic String getName() {\r\n\t\treturn name;\r\n\t}\r\n\t\r\n\tpublic int getGrade() {\r\n\t\treturn grade;\r\n\t}\r\n\t\r\n\t@Override\r\n\tpublic int compareTo(Student o) {\r\n\t\t//sorting by name\r\n\t\treturn name.compareTo(o.name);\r\n\t\t//Compare by grade -- reversed so it&#39;s highest first\r\n\t\t//return Integer.compare(o.grade, grade);\r\n\t}\r\n\t\r\n\t@Override\r\n\tpublic String toString() {\r\n\t\treturn &quot;Student [name=&quot; + name + &quot;, grade=&quot; + grade + &quot;]&quot;;\r\n\t}\r\n\r\n\tpublic static void main(String[] args) {\r\n\t\ttry (Scanner input = new Scanner(System.in)) {\r\n\t\t\tStudent [] students = new Student[0];\r\n\t\t\t\r\n\t\t\twhile(true) {\r\n\t\t\t\tSystem.out.println(&quot;Please enter the name of the student or \\&quot;alldone\\&quot; if complete: &quot;);\r\n\t\t\t\tString name = input.next();\r\n\t\t\t\tif (name.contentEquals(&quot;alldone&quot;)) {\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t\tSystem.out.println(String.format(&quot;Please enter %s&#39;s grade: &quot;, name));\r\n\t\t\t\tint grade = input.nextInt();\r\n\t\t\t\tinput.reset();\r\n\t\t\t\t\r\n\t\t\t\tstudents = Arrays.copyOf(students, students.length+1);\r\n\t\t\t\tstudents[students.length-1] = new Student(name, grade);\r\n\t\t\t}\r\n\t\r\n\t\t\tArrays.sort(students);\r\n\t\r\n\t\t\tfor (Student student : students) {\r\n\t\t\t\tSystem.out.println(student);\r\n\t\t\t}\r\n\t\t} catch (Exception e) {\r\n\t\t\te.printStackTrace();\r\n\t\t}\r\n\t}\r\n}","title":"Questions about one dimensional arrays and sorting in Java","body":"<p>You should create a class and implement the Comparable interface like this.  The way I have it set up here, it sorts by name. If you want to sort by the score, just comment out the name compare and uncomment the grade compare.</p>\n<pre><code>public class Student implements Comparable&lt;Student&gt; {\nprivate String name;\nprivate int grade;\n\npublic Student(String name, int grade) {\n    this.name = name;\n    this.grade = grade;\n}\n\npublic String getName() {\n    return name;\n}\n\npublic int getGrade() {\n    return grade;\n}\n\n@Override\npublic int compareTo(Student o) {\n    //sorting by name\n    return name.compareTo(o.name);\n    //Compare by grade -- reversed so it's highest first\n    //return Integer.compare(o.grade, grade);\n}\n\n@Override\npublic String toString() {\n    return &quot;Student [name=&quot; + name + &quot;, grade=&quot; + grade + &quot;]&quot;;\n}\n\npublic static void main(String[] args) {\n    try (Scanner input = new Scanner(System.in)) {\n        Student [] students = new Student[0];\n        \n        while(true) {\n            System.out.println(&quot;Please enter the name of the student or \\&quot;alldone\\&quot; if complete: &quot;);\n            String name = input.next();\n            if (name.contentEquals(&quot;alldone&quot;)) {\n                break;\n            }\n            System.out.println(String.format(&quot;Please enter %s's grade: &quot;, name));\n            int grade = input.nextInt();\n            input.reset();\n            \n            students = Arrays.copyOf(students, students.length+1);\n            students[students.length-1] = new Student(name, grade);\n        }\n\n        Arrays.sort(students);\n\n        for (Student student : students) {\n            System.out.println(student);\n        }\n    } catch (Exception e) {\n        e.printStackTrace();\n    }\n}\n</code></pre>\n<p>}</p>\n"},{"tags":[],"owner":{"account_id":1689973,"reputation":37280,"user_id":1552534,"display_name":"WJS"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1644439887,"creation_date":1643816784,"answer_id":70958602,"question_id":70947856,"body_markdown":"It doesn&#39;t make sense to enter the number of students and also signal the end of input with a keyword.  Since you must key in on `&quot;alldone&quot;` to stop taking input, it is implied (to me) you must initially over allocate you arrays.   I chose `3` for demo purposes.  If more input is required the arrays can be adjusted as demonstrated.  This example simply explains how to take in the data and populate the arrays.  It does not deal with the mechanics of sorting as that was not part of your question.\r\n```\r\nint studentCount = 0;\r\nScanner input = new Scanner(System.in);\r\n\r\n// allocate space for three students\r\nString[] names = new String[3];\r\nint[] grades = new int[3];\r\n\r\nint maxInput = names.length;\r\nSystem.out.println(\r\n\t\t&quot;Please enter name and grade of student (e.g. john 23)\\non each line.&quot;);\r\n\r\n// now enter the student and their grade\r\nfor (int i = 0; i &lt; maxInput; i++) {\r\n\t\r\n\tString name = input.next();\r\n\r\n    // this is where you check for the keyword to signal\r\n    // end of input\r\n\tif (name.equals(&quot;alldone&quot;)) {\r\n\t\tbreak;\r\n\t}\r\n\tnames[studentCount] = name;\r\n\tgrades[studentCount++] = input.nextInt();\r\n\r\n    // if you have maxed out your arrays you need to copy\r\n    // the contents to a larger array\r\n\tif (studentCount == maxInput) {\r\n\t\t// increase array size\r\n\t\tmaxInput += 3;  // increase by 3.\r\n\t\tnames = Arrays.copyOf(names, maxInput);\r\n\t\tgrades = Arrays.copyOf(grades, maxInput);\r\n\t}\r\n}\r\n\r\n// once here, the input part is over.  This displays the entered data\r\nfor (int i = 0; i &lt; studentCount; i++) {\r\n\tSystem.out.println(names[i] + &quot; &quot; + grades[i]);\r\n}\r\n```\r\nNote, at this point it is possible that your arrays will contain extra spaces that could affect your sort (and possibly cause an error).  You can trim the excess space using `Arrays.copyOf` as before, specifying the number of students.\r\n\r\nOr if you sort using your own routine, you can ignore the excess spaces by using `studentCount` instead of the length of the arrays.\r\n","title":"Questions about one dimensional arrays and sorting in Java","body":"<p>It doesn't make sense to enter the number of students and also signal the end of input with a keyword.  Since you must key in on <code>&quot;alldone&quot;</code> to stop taking input, it is implied (to me) you must initially over allocate you arrays.   I chose <code>3</code> for demo purposes.  If more input is required the arrays can be adjusted as demonstrated.  This example simply explains how to take in the data and populate the arrays.  It does not deal with the mechanics of sorting as that was not part of your question.</p>\n<pre><code>int studentCount = 0;\nScanner input = new Scanner(System.in);\n\n// allocate space for three students\nString[] names = new String[3];\nint[] grades = new int[3];\n\nint maxInput = names.length;\nSystem.out.println(\n        &quot;Please enter name and grade of student (e.g. john 23)\\non each line.&quot;);\n\n// now enter the student and their grade\nfor (int i = 0; i &lt; maxInput; i++) {\n    \n    String name = input.next();\n\n    // this is where you check for the keyword to signal\n    // end of input\n    if (name.equals(&quot;alldone&quot;)) {\n        break;\n    }\n    names[studentCount] = name;\n    grades[studentCount++] = input.nextInt();\n\n    // if you have maxed out your arrays you need to copy\n    // the contents to a larger array\n    if (studentCount == maxInput) {\n        // increase array size\n        maxInput += 3;  // increase by 3.\n        names = Arrays.copyOf(names, maxInput);\n        grades = Arrays.copyOf(grades, maxInput);\n    }\n}\n\n// once here, the input part is over.  This displays the entered data\nfor (int i = 0; i &lt; studentCount; i++) {\n    System.out.println(names[i] + &quot; &quot; + grades[i]);\n}\n</code></pre>\n<p>Note, at this point it is possible that your arrays will contain extra spaces that could affect your sort (and possibly cause an error).  You can trim the excess space using <code>Arrays.copyOf</code> as before, specifying the number of students.</p>\n<p>Or if you sort using your own routine, you can ignore the excess spaces by using <code>studentCount</code> instead of the length of the arrays.</p>\n"}],"owner":{"account_id":24126169,"reputation":3,"user_id":18094458,"display_name":"Binsht"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":416,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":70958602,"answer_count":2,"score":0,"last_activity_date":1644439887,"creation_date":1643751375,"question_id":70947856,"body_markdown":"I&#39;m currently in the second half of a computer science class but I wasn&#39;t able to take the second one right after the first one. So I&#39;ve forgot a large portion of my coding knowledge. I&#39;m trying to re learn it all but it&#39;s quite tough without just going all the way back to the basics. \r\n\r\nAn assignment I&#39;m working on currently is asking me to do the following: \r\n\r\n&gt; Design a solution that requests and receives student names and an exam score for each. Use one-dimensional arrays to solve this.\r\nThe program should continue to accept names and scores until the user inputs a student whose name is “alldone”.\r\nAfter the inputs are complete determine which student has the highest score and display that student’s name and score.\r\nFinally sort the list of names and corresponding scores in ascending order.\r\n\r\nI wasn&#39;t really sure how to organize and start this but I went ahead and just started writing some code to at least make some progress and maybe figure something out.\r\n\r\nThe way I&#39;ve set up my program doesn&#39;t exactly respond to the prompt as I was experimenting with array lengths and for loops to get reacquainted.\r\n\r\n**SO MY QUESTION IS**, How would I make it so when users type &quot;alldone&quot; the program stops taking inputs and calculates the highest grade with the person who had it only using 1D Arrays. \r\n\r\nIs it possible to take the names as a string and then insert the strings into an array?\r\n\r\nHere is my code so far, It&#39;s not what the assignment is looking for but I just want to get some inspiration on some things I could do:\r\n\r\n\tpublic static void main(String[] args) {\r\n\t\tint studentcount;\r\n\t\tScanner input = new Scanner(System.in);\r\n\t\tScanner sc= new Scanner(System.in);\r\n\t\t\r\n\t\t//Input to set array length\r\n\t\tSystem.out.println(&quot;How many students are you grading? &quot;);\r\n\t\tstudentcount=sc.nextInt();\r\n\t\r\n\t\t//One dimensional array to hold student names/grades\r\n\t\tString [] names = new String [studentcount+1];\r\n\t\tint [] grades = new int [studentcount];\r\n\t\t\r\n\t\t//Input to record student names/grades\r\n\t\tSystem.out.println(&quot;Please enter the name of the students &quot;);\r\n\t\tfor (int i = 0; i &lt; names.length; i++) {\r\n\t\t\tnames[i] = sc.nextLine();\r\n\t\t}\r\n\t\tSystem.out.println(&quot;Please enter the grades of the students &quot;);\r\n\t\tfor (int i = 0; i &lt; grades.length; i++) {\r\n\t\t\tgrades[i] = sc.nextInt();\r\n\t\t}\r\n\t\t\r\n\t\t// For loop to display student names and grades\r\n\t\tfor (int i = 0; i &lt; studentcount; i++) {\r\n\t\tSystem.out.println(names[i+1] + &quot; &quot; + grades[i]);\r\n\t}}}\r\n\r\nThe output looks like this:\r\n\r\n&lt;!-- language: none --&gt;\r\n\r\n    How many students are you grading? \r\n    3\r\n    Please enter the name of the students \r\n    John\r\n    Brett\r\n    Wendy\r\n    Please enter the grades of the students \r\n    10\r\n    20\r\n    30\r\n    John 10\r\n    Brett 20\r\n    Wendy 30\r\n\r\n\r\n\r\n","title":"Questions about one dimensional arrays and sorting in Java","body":"<p>I'm currently in the second half of a computer science class but I wasn't able to take the second one right after the first one. So I've forgot a large portion of my coding knowledge. I'm trying to re learn it all but it's quite tough without just going all the way back to the basics.</p>\n<p>An assignment I'm working on currently is asking me to do the following:</p>\n<blockquote>\n<p>Design a solution that requests and receives student names and an exam score for each. Use one-dimensional arrays to solve this.\nThe program should continue to accept names and scores until the user inputs a student whose name is “alldone”.\nAfter the inputs are complete determine which student has the highest score and display that student’s name and score.\nFinally sort the list of names and corresponding scores in ascending order.</p>\n</blockquote>\n<p>I wasn't really sure how to organize and start this but I went ahead and just started writing some code to at least make some progress and maybe figure something out.</p>\n<p>The way I've set up my program doesn't exactly respond to the prompt as I was experimenting with array lengths and for loops to get reacquainted.</p>\n<p><strong>SO MY QUESTION IS</strong>, How would I make it so when users type &quot;alldone&quot; the program stops taking inputs and calculates the highest grade with the person who had it only using 1D Arrays.</p>\n<p>Is it possible to take the names as a string and then insert the strings into an array?</p>\n<p>Here is my code so far, It's not what the assignment is looking for but I just want to get some inspiration on some things I could do:</p>\n<pre><code>public static void main(String[] args) {\n    int studentcount;\n    Scanner input = new Scanner(System.in);\n    Scanner sc= new Scanner(System.in);\n    \n    //Input to set array length\n    System.out.println(&quot;How many students are you grading? &quot;);\n    studentcount=sc.nextInt();\n\n    //One dimensional array to hold student names/grades\n    String [] names = new String [studentcount+1];\n    int [] grades = new int [studentcount];\n    \n    //Input to record student names/grades\n    System.out.println(&quot;Please enter the name of the students &quot;);\n    for (int i = 0; i &lt; names.length; i++) {\n        names[i] = sc.nextLine();\n    }\n    System.out.println(&quot;Please enter the grades of the students &quot;);\n    for (int i = 0; i &lt; grades.length; i++) {\n        grades[i] = sc.nextInt();\n    }\n    \n    // For loop to display student names and grades\n    for (int i = 0; i &lt; studentcount; i++) {\n    System.out.println(names[i+1] + &quot; &quot; + grades[i]);\n}}}\n</code></pre>\n<p>The output looks like this:</p>\n<pre class=\"lang-none prettyprint-override\"><code>How many students are you grading? \n3\nPlease enter the name of the students \nJohn\nBrett\nWendy\nPlease enter the grades of the students \n10\n20\n30\nJohn 10\nBrett 20\nWendy 30\n</code></pre>\n"},{"tags":["java","int","double","divide"],"comments":[{"owner":{"account_id":2764833,"reputation":232372,"user_id":2380830,"accept_rate":89,"display_name":"Bathsheba"},"score":2,"creation_date":1380532717,"post_id":19090526,"comment_id":28222275,"body_markdown":"Google: integer division. It will give you an integer result with truncation. Write d = (double)w[L]  /v[L];","body":"Google: integer division. It will give you an integer result with truncation. Write d = (double)w[L]  /v[L];"},{"owner":{"account_id":3583958,"reputation":80987,"user_id":2991525,"display_name":"fabian"},"score":0,"creation_date":1457296452,"post_id":19090526,"comment_id":59331250,"body_markdown":"Possible duplicate of [Why is the result of 1/3 == 0?](http://stackoverflow.com/questions/4685450/why-is-the-result-of-1-3-0)","body":"Possible duplicate of <a href=\"http://stackoverflow.com/questions/4685450/why-is-the-result-of-1-3-0\">Why is the result of 1/3 == 0?</a>"},{"owner":{"account_id":2562742,"reputation":5917,"user_id":2851311,"display_name":"hfontanez"},"score":0,"creation_date":1644439896,"post_id":19090526,"comment_id":125610555,"body_markdown":"If precision is needed, do not use primitive double or its wrapper class. Use `BigDecimal` instead.","body":"If precision is needed, do not use primitive double or its wrapper class. Use <code>BigDecimal</code> instead."}],"answers":[{"tags":[],"owner":{"account_id":72575,"reputation":40794,"user_id":209513,"accept_rate":100,"display_name":"Subhrajyoti Majumder"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1644439671,"creation_date":1380532742,"answer_id":19090550,"question_id":19090526,"body_markdown":"Actaully `w[L]/v[L]` here both are integers. On the division operation it lost precision and truncated to `integer` value. Then the truncated `integer` is converted to `double`. \r\n\r\nThe solution would be convert the operand or the divisor or both to a double. Then the division operation would produce a double.\r\n\r\n    d = w[L]/(double)v[L];","title":"Dividing two integers to a double in java","body":"<p>Actaully <code>w[L]/v[L]</code> here both are integers. On the division operation it lost precision and truncated to <code>integer</code> value. Then the truncated <code>integer</code> is converted to <code>double</code>.</p>\n<p>The solution would be convert the operand or the divisor or both to a double. Then the division operation would produce a double.</p>\n<pre><code>d = w[L]/(double)v[L];\n</code></pre>\n"},{"tags":[],"owner":{"account_id":297962,"reputation":54236,"user_id":603742,"accept_rate":33,"display_name":"stinepike"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1380532776,"creation_date":1380532776,"answer_id":19090563,"question_id":19090526,"body_markdown":"use like following\r\n\r\n        d = (double) w[L]  /v[L];","title":"Dividing two integers to a double in java","body":"<p>use like following</p>\n\n<pre><code>    d = (double) w[L]  /v[L];\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2515499,"reputation":16966,"user_id":2187042,"accept_rate":53,"display_name":"Richard Tingle"},"down_vote_count":0,"up_vote_count":38,"is_accepted":true,"score":38,"last_activity_date":1380532819,"creation_date":1380532819,"answer_id":19090582,"question_id":19090526,"body_markdown":"This line here `d = w[L]  /v[L];` takes place over several steps\r\n\r\n    d = (int)w[L]  / (int)v[L]\r\n    d=(int)(w[L]/v[L])            //the integer result is calculated\r\n    d=(double)(int)(w[L]/v[L])    //the integer result is cast to double\r\n\r\nIn other words the precision is already gone before you cast to double, you need to cast to double first, so\r\n\r\n    d = ((double)w[L])  / (int)v[L];\r\n\r\nThis forces java to use double maths the whole way through rather than use integer maths and then cast to double at the end","title":"Dividing two integers to a double in java","body":"<p>This line here <code>d = w[L]  /v[L];</code> takes place over several steps</p>\n\n<pre><code>d = (int)w[L]  / (int)v[L]\nd=(int)(w[L]/v[L])            //the integer result is calculated\nd=(double)(int)(w[L]/v[L])    //the integer result is cast to double\n</code></pre>\n\n<p>In other words the precision is already gone before you cast to double, you need to cast to double first, so</p>\n\n<pre><code>d = ((double)w[L])  / (int)v[L];\n</code></pre>\n\n<p>This forces java to use double maths the whole way through rather than use integer maths and then cast to double at the end</p>\n"}],"owner":{"account_id":2720176,"reputation":269,"user_id":2346636,"accept_rate":100,"display_name":"roarknuppel"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":60103,"favorite_count":0,"down_vote_count":0,"up_vote_count":21,"accepted_answer_id":19090582,"answer_count":3,"score":21,"last_activity_date":1644439671,"creation_date":1380532682,"question_id":19090526,"body_markdown":"I can see this is a common problem for new programmers, however I didn&#39;t succeed in implementing any of the solution to my code. Basically I want to divide w and v, which must be saved to a double variable. But it prints [0.0, 0.0, ... , 0.0]\r\n\r\n    public static double density(int[] w, int[] v){\r\n    double d = 0;\r\n    \tfor(L = 0; L &lt; w.length; L++){\r\n    \t\td = w[L]  /v[L];\r\n    \t}\r\n    \treturn d;\r\n    }\r\n\r\n","title":"Dividing two integers to a double in java","body":"<p>I can see this is a common problem for new programmers, however I didn't succeed in implementing any of the solution to my code. Basically I want to divide w and v, which must be saved to a double variable. But it prints [0.0, 0.0, ... , 0.0]</p>\n\n<pre><code>public static double density(int[] w, int[] v){\ndouble d = 0;\n    for(L = 0; L &lt; w.length; L++){\n        d = w[L]  /v[L];\n    }\n    return d;\n}\n</code></pre>\n"},{"tags":["java","maven","google-cloud-platform","google-artifact-registry"],"comments":[{"owner":{"account_id":11963593,"reputation":3542,"user_id":8753991,"display_name":"JM Gelilio"},"score":0,"creation_date":1639725367,"post_id":70386229,"comment_id":124426736,"body_markdown":"It seems you want to deploy your children POM to Artifacts Registry but it will fail because the parent POM is excluded in deployment, Am I correct?","body":"It seems you want to deploy your children POM to Artifacts Registry but it will fail because the parent POM is excluded in deployment, Am I correct?"},{"owner":{"account_id":1092127,"reputation":10061,"user_id":1086540,"accept_rate":86,"display_name":"Hilikus"},"score":0,"creation_date":1639771003,"post_id":70386229,"comment_id":124442470,"body_markdown":"no. building the child fails because it references the parent, which lives in Artifact Registry. The parent was deployed successfully. The problem is that every child (every project) references the one and only parent POM, which is in AR, but the configuration of the AR repository is in the parent POM. So catch-22, i can&#39;t bootstrap other children projects","body":"no. building the child fails because it references the parent, which lives in Artifact Registry. The parent was deployed successfully. The problem is that every child (every project) references the one and only parent POM, which is in AR, but the configuration of the AR repository is in the parent POM. So catch-22, i can&#39;t bootstrap other children projects"},{"owner":{"account_id":11963593,"reputation":3542,"user_id":8753991,"display_name":"JM Gelilio"},"score":0,"creation_date":1640059009,"post_id":70386229,"comment_id":124499737,"body_markdown":"I have a little bit knowledge about java, can you show how can we reproduce this issue? and what is the exactly error that you encountered? It can help us to replicate the issue.","body":"I have a little bit knowledge about java, can you show how can we reproduce this issue? and what is the exactly error that you encountered? It can help us to replicate the issue."},{"owner":{"account_id":13964421,"reputation":173,"user_id":10084642,"display_name":"Daniel Alvarez"},"score":0,"creation_date":1643737502,"post_id":70386229,"comment_id":125417490,"body_markdown":"Hi! Same probleme here. Did you find some solution??","body":"Hi! Same probleme here. Did you find some solution??"},{"owner":{"account_id":1092127,"reputation":10061,"user_id":1086540,"accept_rate":86,"display_name":"Hilikus"},"score":0,"creation_date":1643759583,"post_id":70386229,"comment_id":125424135,"body_markdown":"Kind of: using a .mvn folder with settings.xml and configuring the repository there. But i haven&#39;t tried it with a private repo and the weird AR authentication","body":"Kind of: using a .mvn folder with settings.xml and configuring the repository there. But i haven&#39;t tried it with a private repo and the weird AR authentication"}],"answers":[{"tags":[],"owner":{"account_id":3225674,"reputation":216,"user_id":2722118,"display_name":"Ken Kania"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1644439617,"creation_date":1644436846,"answer_id":71055955,"question_id":70386229,"body_markdown":"Assuming your child and parent share a common .mvn/ folder, you can add:\r\n\r\n.mvn/extensions.xml:\r\n```xml\r\n&lt;extensions xmlns=&quot;http://maven.apache.org/EXTENSIONS/1.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:schemaLocation=&quot;http://maven.apache.org/EXTENSIONS/1.0.0 http://maven.apache.org/xsd/core-extensions-1.0.0.xsd&quot;&gt;\r\n    &lt;!--This has to be declared here in order to allow child modules to be able to fetch older parent POMs.--&gt;\r\n    &lt;extension&gt;\r\n        &lt;groupId&gt;com.google.cloud.artifactregistry&lt;/groupId&gt;\r\n        &lt;artifactId&gt;artifactregistry-maven-wagon&lt;/artifactId&gt;\r\n        &lt;version&gt;2.1.1&lt;/version&gt;\r\n    &lt;/extension&gt;\r\n    &lt;!--project-settings-extension allows using project-specific .mvn/settings.xml--&gt;\r\n    &lt;extension&gt;\r\n        &lt;groupId&gt;com.github.gzm55.maven&lt;/groupId&gt;\r\n        &lt;artifactId&gt;project-settings-extension&lt;/artifactId&gt;\r\n        &lt;version&gt;0.1.1&lt;/version&gt;\r\n    &lt;/extension&gt;\r\n&lt;/extensions&gt;\r\n```\r\n\r\n.mvn/settings.xml (don&#39;t forget to use your actual artifactregistry URL):\r\n```xml\r\n&lt;settings xmlns=&quot;http://maven.apache.org/SETTINGS/1.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:schemaLocation=&quot;http://maven.apache.org/SETTINGS/1.0.0 https://maven.apache.org/xsd/settings-1.0.0.xsd&quot;&gt;\r\n  &lt;profiles&gt;\r\n    &lt;profile&gt;\r\n      &lt;id&gt;default&lt;/id&gt;\r\n      &lt;activation&gt;\r\n        &lt;activeByDefault&gt;true&lt;/activeByDefault&gt;\r\n      &lt;/activation&gt;\r\n      &lt;repositories&gt;\r\n        &lt;!--This has to be declared here in order to allow child modules to be able to fetch older parent POMs.--&gt;\r\n        &lt;repository&gt;\r\n          &lt;id&gt;cloud-artifacts&lt;/id&gt;\r\n          &lt;url&gt;artifactregistry://...&lt;/url&gt; &lt;!--use actual full URL here--&gt;\r\n          &lt;releases&gt;\r\n            &lt;enabled&gt;true&lt;/enabled&gt;\r\n          &lt;/releases&gt;\r\n          &lt;snapshots&gt;\r\n            &lt;enabled&gt;true&lt;/enabled&gt;\r\n            &lt;updatePolicy&gt;always&lt;/updatePolicy&gt;\r\n          &lt;/snapshots&gt;\r\n        &lt;/repository&gt;\r\n      &lt;/repositories&gt;\r\n    &lt;/profile&gt;\r\n  &lt;/profiles&gt;\r\n&lt;/settings&gt;\r\n```\r\n\r\nThe repository in settings.xml informs Maven to consider that location when searching for artifacts. The artifactregistry-maven-wagon extension allows Maven to access artifacts via the artifactregistry:// protocol.\r\n\r\nThe other extension (com.github.gzm55.maven) causes Maven to look at the project-specific settings.xml file (you could also just pass --settings=\\&lt;*path to file*\\&gt;, perhaps in .mvn/maven.config, but that would override any user settings).","title":"How to &quot;bootstrap&quot; parent POM in GCP Artifact Registry","body":"<p>Assuming your child and parent share a common .mvn/ folder, you can add:</p>\n<p>.mvn/extensions.xml:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;extensions xmlns=&quot;http://maven.apache.org/EXTENSIONS/1.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:schemaLocation=&quot;http://maven.apache.org/EXTENSIONS/1.0.0 http://maven.apache.org/xsd/core-extensions-1.0.0.xsd&quot;&gt;\n    &lt;!--This has to be declared here in order to allow child modules to be able to fetch older parent POMs.--&gt;\n    &lt;extension&gt;\n        &lt;groupId&gt;com.google.cloud.artifactregistry&lt;/groupId&gt;\n        &lt;artifactId&gt;artifactregistry-maven-wagon&lt;/artifactId&gt;\n        &lt;version&gt;2.1.1&lt;/version&gt;\n    &lt;/extension&gt;\n    &lt;!--project-settings-extension allows using project-specific .mvn/settings.xml--&gt;\n    &lt;extension&gt;\n        &lt;groupId&gt;com.github.gzm55.maven&lt;/groupId&gt;\n        &lt;artifactId&gt;project-settings-extension&lt;/artifactId&gt;\n        &lt;version&gt;0.1.1&lt;/version&gt;\n    &lt;/extension&gt;\n&lt;/extensions&gt;\n</code></pre>\n<p>.mvn/settings.xml (don't forget to use your actual artifactregistry URL):</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;settings xmlns=&quot;http://maven.apache.org/SETTINGS/1.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:schemaLocation=&quot;http://maven.apache.org/SETTINGS/1.0.0 https://maven.apache.org/xsd/settings-1.0.0.xsd&quot;&gt;\n  &lt;profiles&gt;\n    &lt;profile&gt;\n      &lt;id&gt;default&lt;/id&gt;\n      &lt;activation&gt;\n        &lt;activeByDefault&gt;true&lt;/activeByDefault&gt;\n      &lt;/activation&gt;\n      &lt;repositories&gt;\n        &lt;!--This has to be declared here in order to allow child modules to be able to fetch older parent POMs.--&gt;\n        &lt;repository&gt;\n          &lt;id&gt;cloud-artifacts&lt;/id&gt;\n          &lt;url&gt;artifactregistry://...&lt;/url&gt; &lt;!--use actual full URL here--&gt;\n          &lt;releases&gt;\n            &lt;enabled&gt;true&lt;/enabled&gt;\n          &lt;/releases&gt;\n          &lt;snapshots&gt;\n            &lt;enabled&gt;true&lt;/enabled&gt;\n            &lt;updatePolicy&gt;always&lt;/updatePolicy&gt;\n          &lt;/snapshots&gt;\n        &lt;/repository&gt;\n      &lt;/repositories&gt;\n    &lt;/profile&gt;\n  &lt;/profiles&gt;\n&lt;/settings&gt;\n</code></pre>\n<p>The repository in settings.xml informs Maven to consider that location when searching for artifacts. The artifactregistry-maven-wagon extension allows Maven to access artifacts via the artifactregistry:// protocol.</p>\n<p>The other extension (com.github.gzm55.maven) causes Maven to look at the project-specific settings.xml file (you could also just pass --settings=&lt;<em>path to file</em>&gt;, perhaps in .mvn/maven.config, but that would override any user settings).</p>\n"}],"owner":{"account_id":1092127,"reputation":10061,"user_id":1086540,"accept_rate":86,"display_name":"Hilikus"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":576,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1644439617,"creation_date":1639692634,"question_id":70386229,"body_markdown":"I followed the [instructions][1] to configure a maven client to use an Artifact Registry. I was able to deploy my root pom to it successfully; however, when I have a separate project that inherits from that root pom, it fails to build because it doesn&#39;t know where to find the root pom. This makes sense: the child project has no way of knowing that the parent pom is to be found in a random Artifact Registry repo. What is the standard practice for this?\r\n\r\nWhat i&#39;ve done before is in every programmer&#39;s computer, configure the `&lt;repository&gt;` in their `settings.xml` but this doesn&#39;t scale well + it needs human intervention + it&#39;s very cumbersome when dealing with CI since now you need to configure the settings.xml of the build robot. Considering there&#39;s so many CI systems nowadays I imagine there&#39;s a convention by now. Is there a better way to accomplish this? some way that&#39;s committed in the repo and where everything works right out of the box? git clone... mvn package... done. I ask specifically about Artifact Registry because it doesn&#39;t use a static username/password but uses the maven wagon to authenticate\r\n\r\nOne potential solution is to not put the `&lt;repository&gt;` in the root pom but in every project&#39;s pom but that leads to a lot of duplication since the config + the wagon is pretty verbose\r\n\r\n\r\n  [1]: https://cloud.google.com/artifact-registry/docs/java/authentication","title":"How to &quot;bootstrap&quot; parent POM in GCP Artifact Registry","body":"<p>I followed the <a href=\"https://cloud.google.com/artifact-registry/docs/java/authentication\" rel=\"nofollow noreferrer\">instructions</a> to configure a maven client to use an Artifact Registry. I was able to deploy my root pom to it successfully; however, when I have a separate project that inherits from that root pom, it fails to build because it doesn't know where to find the root pom. This makes sense: the child project has no way of knowing that the parent pom is to be found in a random Artifact Registry repo. What is the standard practice for this?</p>\n<p>What i've done before is in every programmer's computer, configure the <code>&lt;repository&gt;</code> in their <code>settings.xml</code> but this doesn't scale well + it needs human intervention + it's very cumbersome when dealing with CI since now you need to configure the settings.xml of the build robot. Considering there's so many CI systems nowadays I imagine there's a convention by now. Is there a better way to accomplish this? some way that's committed in the repo and where everything works right out of the box? git clone... mvn package... done. I ask specifically about Artifact Registry because it doesn't use a static username/password but uses the maven wagon to authenticate</p>\n<p>One potential solution is to not put the <code>&lt;repository&gt;</code> in the root pom but in every project's pom but that leads to a lot of duplication since the config + the wagon is pretty verbose</p>\n"},{"tags":["java","string","unicode","escaping","presto"],"comments":[{"owner":{"account_id":5289146,"reputation":8128,"user_id":4222206,"display_name":"queeg"},"score":0,"creation_date":1644439600,"post_id":71056039,"comment_id":125610446,"body_markdown":"When parsing and validting, you actually do not change the query. Do you really have to serialize and come back to the original string? You should still have that available anyway...","body":"When parsing and validting, you actually do not change the query. Do you really have to serialize and come back to the original string? You should still have that available anyway..."},{"owner":{"account_id":3576533,"reputation":16716,"user_id":2985643,"accept_rate":40,"display_name":"skomisa"},"score":0,"creation_date":1644474145,"post_id":71056039,"comment_id":125617647,"body_markdown":"[1] The conversion is correct with the exception of the pairs of asterisks, which I can&#39;t explain. If those are possibly typos in your question, please correct. Otherwise, the returned string is a valid Unicode string literal for Presto (aka Trino). See [this SO answer](https://stackoverflow.com/a/59049533/2985643) and the issue [Document unicode varchar literals #2113](https://github.com/trinodb/trino/issues/2113). [2] Are you asking if there&#39;s an API that will handle the conversion of the string, or just how to do it in Java?","body":"[1] The conversion is correct with the exception of the pairs of asterisks, which I can&#39;t explain. If those are possibly typos in your question, please correct. Otherwise, the returned string is a valid Unicode string literal for Presto (aka Trino). See <a href=\"https://stackoverflow.com/a/59049533/2985643\">this SO answer</a> and the issue <a href=\"https://github.com/trinodb/trino/issues/2113\" rel=\"nofollow noreferrer\">Document unicode varchar literals #2113</a>. [2] Are you asking if there&#39;s an API that will handle the conversion of the string, or just how to do it in Java?"}],"answers":[{"tags":[],"owner":{"account_id":5289146,"reputation":8128,"user_id":4222206,"display_name":"queeg"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1644439545,"creation_date":1644439545,"answer_id":71056481,"question_id":71056039,"body_markdown":"It seems the presto serializer does something different than you expect. I&#39;d try to search for a solution within the presto library. \r\n\r\nIf that does not work, you could translate the string by stripping off the leading and trailing asterisks, then replace every `\\` with `\\u` and are back to your assumed result.","title":"Valid Representation of unicode Sequence in Java","body":"<p>It seems the presto serializer does something different than you expect. I'd try to search for a solution within the presto library.</p>\n<p>If that does not work, you could translate the string by stripping off the leading and trailing asterisks, then replace every <code>\\</code> with <code>\\u</code> and are back to your assumed result.</p>\n"}],"owner":{"account_id":2607637,"reputation":81,"user_id":2258459,"display_name":"Vidya Shree"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":165,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1644439545,"creation_date":1644437290,"question_id":71056039,"body_markdown":" I have presto query that contains some Japanese characters in where clause \r\n\r\n    select col1  from xyz where col = &#39;自社在庫&#39; // example\r\nfor some reason i need to interpret this query  and do some validations, for this i am using the facebook presto sql parser . \r\nBut when i use `com.facebook.presto.sql.SqlFormatter.formatSql(sqlParsed, null);`\r\nThe returned String looks like this : \r\n\r\n    SELECT col1 FROM xyz WHERE (colr = **U&amp;&#39;\\81EA\\793E\\5728\\5EAB&#39;**)\r\nShould it not convert it as `select col1 from xyz where colr = &#39;\\u81EA\\u793E\\u5728\\u5EAB&#39;`\r\n\r\nAny way i can convert U&amp;&#39;\\81EA\\793E\\5728\\5EAB&#39; back to &#39;自社在庫&#39; ? \r\n\r\n","title":"Valid Representation of unicode Sequence in Java","body":"<p>I have presto query that contains some Japanese characters in where clause</p>\n<pre><code>select col1  from xyz where col = '自社在庫' // example\n</code></pre>\n<p>for some reason i need to interpret this query  and do some validations, for this i am using the facebook presto sql parser .\nBut when i use <code>com.facebook.presto.sql.SqlFormatter.formatSql(sqlParsed, null);</code>\nThe returned String looks like this :</p>\n<pre><code>SELECT col1 FROM xyz WHERE (colr = **U&amp;'\\81EA\\793E\\5728\\5EAB'**)\n</code></pre>\n<p>Should it not convert it as <code>select col1 from xyz where colr = '\\u81EA\\u793E\\u5728\\u5EAB'</code></p>\n<p>Any way i can convert U&amp;'\\81EA\\793E\\5728\\5EAB' back to '自社在庫' ?</p>\n"},{"tags":["java","sql-server","hibernate","triggers","hibernate-mapping"],"comments":[{"owner":{"account_id":166167,"reputation":8075,"user_id":390122,"accept_rate":75,"display_name":"AlwaysLearning"},"score":0,"creation_date":1644444090,"post_id":71056446,"comment_id":125611918,"body_markdown":"Aside... comma-delimited lists of tables went out when ANSI SQL-92 added `JOIN` keywords.","body":"Aside... comma-delimited lists of tables went out when ANSI SQL-92 added <code>JOIN</code> keywords."},{"owner":{"account_id":166167,"reputation":8075,"user_id":390122,"accept_rate":75,"display_name":"AlwaysLearning"},"score":0,"creation_date":1644444162,"post_id":71056446,"comment_id":125611950,"body_markdown":"Try setting a breakpoint on `session.saveOrUpdate(p);` - is p&#39;s identity value valid? If it&#39;s `null` it will be trying to insert a new parent record.","body":"Try setting a breakpoint on <code>session.saveOrUpdate(p);</code> - is p&#39;s identity value valid? If it&#39;s <code>null</code> it will be trying to insert a new parent record."}],"owner":{"account_id":1000006,"reputation":605,"user_id":1015102,"accept_rate":74,"display_name":"fandang"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":266,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1644439369,"creation_date":1644439369,"question_id":71056446,"body_markdown":"I&#39;ve got a parent and child relation (many actually in the application).  I have to call flush() upon every save/update (don&#39;t ask why).  I&#39;ve got history triggers that record every update.  When the child object is saved and flushed(), it forces the save on the parent and thus executes the parent&#39;s history trigger prematurely. What hibernate table settings or trigger adjusments will make the &quot;After&quot; show up in the history table instead of the &quot;Before&quot;? THANK YOU!\r\n\r\nParent:\r\n\r\n    &lt;hibernate-mapping&gt;\r\n       &lt;class lazy=&quot;false&quot; name=&quot;com.sample.Parent&quot; table=&quot;PARENT&quot;&gt;\r\n           &lt;id name=&quot;id&quot; type=&quot;long&quot; unsaved-value=&quot;null&quot;&gt;\r\n               &lt;column name=&quot;PARENT_ID&quot; not-null=&quot;true&quot;/&gt;\r\n               &lt;generator class=&quot;increment&quot; /&gt;\r\n           &lt;/id&gt;\r\n           &lt;property name=&quot;lastName&quot; column=&quot;last_name&quot; type=&quot;string&quot;  /&gt;\r\n\t\t\t&lt;set name=&quot;children&quot; inverse=&quot;true&quot;&gt;\r\n\t\t\t\t&lt;key column=&quot;PARENT_ID&quot; /&gt;\r\n\t\t\t\t&lt;one-to-many class=&quot;com.sample.Child&quot; /&gt;\r\n\t\t\t&lt;/set&gt;\r\n\t\t&lt;/class&gt;\r\n    &lt;/hibernate-mapping&gt;\r\n\r\nChild:\r\n\r\n    &lt;hibernate-mapping&gt;\r\n       &lt;class lazy=&quot;false&quot; name=&quot;com.sample.Child&quot; table=&quot;PARENT&quot;&gt;\r\n           &lt;id name=&quot;id&quot; type=&quot;long&quot; unsaved-value=&quot;null&quot;&gt;\r\n               &lt;column name=&quot;CHILD_ID&quot; not-null=&quot;true&quot;/&gt;\r\n               &lt;generator class=&quot;increment&quot; /&gt;\r\n           &lt;/id&gt;\r\n           &lt;property name=&quot;age&quot; column=&quot;age&quot; type=&quot;int&quot;  /&gt;\r\n       \t&lt;many-to-one name=&quot;parent&quot; class=&quot;com.sample.Parent&quot; column=&quot;PARENT_ID&quot; insert=&quot;false&quot; update=&quot;false&quot;/&gt;\t\r\n\t\t&lt;/class&gt;\r\n    &lt;/hibernate-mapping&gt;\r\n\r\nSome java code:\r\n\r\n    Transaction txn = session.beginTransaction();\r\n    \r\n    Parent p = (Parent) session.load(Parent.class, 58);\r\n    // Before DOES show up in the history, so it got flushed by Child save\r\n    p.setLastName(&quot;Before&quot;)\r\n    \r\n    Child c = new Child();\r\n    c.setAge(12);\r\n    p.getChildren().add(c)\r\n    c.setParent(p);\r\n    \r\n    session.save(c);\r\n    session.flush()\r\n    // After does NOT show up in the history\r\n    p.setLastName(&quot;After&quot;)\r\n\r\n    session.saveOrUpdate(p);\r\n    session.flush();\r\n    \r\n    txn.commit();\r\n\r\nSQL Server Trigger Code:\r\n\r\n    CREATE TRIGGER [parent_update] ON [dbo].[parent] FOR UPDATE AS Begin\r\n    \tInsert into parent_audit_trail(column_value_old,column_value_new,changed_by) select d.last_name,i.last_name,SYSDATETIME() from Deleted d, Inserted i where d.parent_id = i.parent_id and i.first_name != d.first_name\r\n    END\r\n\r\n","title":"Hibernate many-to-one parent object getting saved prematurely when child is saved and flushed","body":"<p>I've got a parent and child relation (many actually in the application).  I have to call flush() upon every save/update (don't ask why).  I've got history triggers that record every update.  When the child object is saved and flushed(), it forces the save on the parent and thus executes the parent's history trigger prematurely. What hibernate table settings or trigger adjusments will make the &quot;After&quot; show up in the history table instead of the &quot;Before&quot;? THANK YOU!</p>\n<p>Parent:</p>\n<pre><code>&lt;hibernate-mapping&gt;\n   &lt;class lazy=&quot;false&quot; name=&quot;com.sample.Parent&quot; table=&quot;PARENT&quot;&gt;\n       &lt;id name=&quot;id&quot; type=&quot;long&quot; unsaved-value=&quot;null&quot;&gt;\n           &lt;column name=&quot;PARENT_ID&quot; not-null=&quot;true&quot;/&gt;\n           &lt;generator class=&quot;increment&quot; /&gt;\n       &lt;/id&gt;\n       &lt;property name=&quot;lastName&quot; column=&quot;last_name&quot; type=&quot;string&quot;  /&gt;\n        &lt;set name=&quot;children&quot; inverse=&quot;true&quot;&gt;\n            &lt;key column=&quot;PARENT_ID&quot; /&gt;\n            &lt;one-to-many class=&quot;com.sample.Child&quot; /&gt;\n        &lt;/set&gt;\n    &lt;/class&gt;\n&lt;/hibernate-mapping&gt;\n</code></pre>\n<p>Child:</p>\n<pre><code>&lt;hibernate-mapping&gt;\n   &lt;class lazy=&quot;false&quot; name=&quot;com.sample.Child&quot; table=&quot;PARENT&quot;&gt;\n       &lt;id name=&quot;id&quot; type=&quot;long&quot; unsaved-value=&quot;null&quot;&gt;\n           &lt;column name=&quot;CHILD_ID&quot; not-null=&quot;true&quot;/&gt;\n           &lt;generator class=&quot;increment&quot; /&gt;\n       &lt;/id&gt;\n       &lt;property name=&quot;age&quot; column=&quot;age&quot; type=&quot;int&quot;  /&gt;\n    &lt;many-to-one name=&quot;parent&quot; class=&quot;com.sample.Parent&quot; column=&quot;PARENT_ID&quot; insert=&quot;false&quot; update=&quot;false&quot;/&gt; \n    &lt;/class&gt;\n&lt;/hibernate-mapping&gt;\n</code></pre>\n<p>Some java code:</p>\n<pre><code>Transaction txn = session.beginTransaction();\n\nParent p = (Parent) session.load(Parent.class, 58);\n// Before DOES show up in the history, so it got flushed by Child save\np.setLastName(&quot;Before&quot;)\n\nChild c = new Child();\nc.setAge(12);\np.getChildren().add(c)\nc.setParent(p);\n\nsession.save(c);\nsession.flush()\n// After does NOT show up in the history\np.setLastName(&quot;After&quot;)\n\nsession.saveOrUpdate(p);\nsession.flush();\n\ntxn.commit();\n</code></pre>\n<p>SQL Server Trigger Code:</p>\n<pre><code>CREATE TRIGGER [parent_update] ON [dbo].[parent] FOR UPDATE AS Begin\n    Insert into parent_audit_trail(column_value_old,column_value_new,changed_by) select d.last_name,i.last_name,SYSDATETIME() from Deleted d, Inserted i where d.parent_id = i.parent_id and i.first_name != d.first_name\nEND\n</code></pre>\n"},{"tags":["java","spring-boot","api","backend"],"comments":[{"owner":{"account_id":231683,"reputation":4218,"user_id":496038,"display_name":"pringi"},"score":0,"creation_date":1644337059,"post_id":71035816,"comment_id":125577280,"body_markdown":"Does this answer your question? [How to Create JSONArray for a List&lt;Class name&gt;](https://stackoverflow.com/questions/10796881/how-to-create-jsonarray-for-a-listclass-name)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/10796881/how-to-create-jsonarray-for-a-listclass-name\">How to Create JSONArray for a List&lt;Class name&gt;</a>"},{"owner":{"account_id":7806709,"reputation":21,"user_id":14488165,"display_name":"dlemp"},"score":0,"creation_date":1644338101,"post_id":71035816,"comment_id":125577771,"body_markdown":"Hmm, I don&#39;t think so?  I think the part that&#39;s really throwing me off is that I already have a Json, but I need to pull out the list that is a level deep within the Json.","body":"Hmm, I don&#39;t think so?  I think the part that&#39;s really throwing me off is that I already have a Json, but I need to pull out the list that is a level deep within the Json."},{"owner":{"account_id":7806709,"reputation":21,"user_id":14488165,"display_name":"dlemp"},"score":0,"creation_date":1644427046,"post_id":71035816,"comment_id":125605812,"body_markdown":"I really think I need to update the line = String value = newCollegeSchoolCode.getValue(); \n\nThat line doesn&#39;t know that I should be looking at college_school_code(i), but I really can&#39;t figure out how to accomplish that.  Any help?","body":"I really think I need to update the line = String value = newCollegeSchoolCode.getValue();   That line doesn&#39;t know that I should be looking at college_school_code(i), but I really can&#39;t figure out how to accomplish that.  Any help?"}],"answers":[{"tags":[],"owner":{"account_id":7806709,"reputation":21,"user_id":14488165,"display_name":"dlemp"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1644439369,"creation_date":1644439369,"answer_id":71056445,"question_id":71035816,"body_markdown":"Well, I figured it out, and it was a simple one!  I updated the value string to:\r\n\r\n\r\n    String value = college_school_code.get(i).getValue();\r\n\r\nI didn&#39;t actually need to add the newCollegeSchoolCode piece like I though, it&#39;s always the simple solutions.","title":"Spring Boot API Post Mapping to read in Array","body":"<p>Well, I figured it out, and it was a simple one!  I updated the value string to:</p>\n<pre><code>String value = college_school_code.get(i).getValue();\n</code></pre>\n<p>I didn't actually need to add the newCollegeSchoolCode piece like I though, it's always the simple solutions.</p>\n"}],"owner":{"account_id":7806709,"reputation":21,"user_id":14488165,"display_name":"dlemp"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":435,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1644439369,"creation_date":1644331406,"question_id":71035816,"body_markdown":"I currently have an API that has this payload (from a react-select using isMulti):\r\n\r\n     {\r\n    \t&quot;college_school_code&quot;: [\r\n    \t\t{\r\n    \t\t\t&quot;label&quot;: &quot;College Name - College Address&quot;,\r\n    \t\t\t&quot;value&quot;: &quot;1234&quot;\r\n    \t\t},\r\n    \t\t{\r\n    \t\t\t&quot;label&quot;: &quot;College Name - College Address&quot;,\r\n    \t\t\t&quot;value&quot;: &quot;5678&quot;\r\n    \t\t}\r\n    \t],\r\n    \t&quot;userid&quot;: &quot;email@email.com&quot;\r\n    }\r\n\r\nI need to read that API in, and write the userid and value of each college_school_codes to a database (so this call would write out two rows, both with the same userid, but different college_school_codes).  \r\n\r\nHere&#39;s some more code that clearly doesn&#39;t work.  It should looks to see if there&#39;s any current rows for the user, remove those, then add the new rows:\r\n\r\n   { @Entity\r\npublic class CollegeSchoolCode {\r\n\r\n    @Id\r\n    private String label;\r\n    private String value;\r\n\r\n    public String getLabel() {\r\n        return label;\r\n    }\r\n\r\n    public void setLabel(String label) {\r\n        this.label = label;\r\n    }\r\n\r\n    public String getValue() {\r\n        return value;\r\n    }\r\n\r\n    public void setValue(String value) {\r\n        this.value = value;\r\n    }\r\n}\r\n}\r\n\r\n\r\n    @Entity\r\npublic class CollegeSchoolCode {\r\n\r\n    @Id\r\n    private String label;\r\n    private String value;\r\n\r\n    public String getLabel() {\r\n        return label;\r\n    }\r\n\r\n    public void setLabel(String label) {\r\n        this.label = label;\r\n    }\r\n\r\n    public String getValue() {\r\n        return value;\r\n    }\r\n\r\n    public void setValue(String value) {\r\n        this.value = value;\r\n    }\r\n}\r\n\r\n     public void insertColleges(@RequestBody CollegesInfo newCollegesInfo, CollegeSchoolCode newCollegeSchoolCode){\r\n\r\n        String userid = newCollegesInfo.getUserid();\r\n        List college_school_code  = newCollegesInfo.getCollege_school_code();\r\n\r\n        System.out.println(&quot;colleges=&quot;+college_school_code);\r\n\r\n        int rowCount = insertCollegesRepository.getRowCount(userid);\r\n\r\n        if (rowCount &gt; 0){\r\n            insertCollegesRepository.deleteColleges(userid);\r\n        }\r\n\r\n        for (int i = 0; i &lt; college_school_code.size(); i++) {\r\n            String value = newCollegeSchoolCode.getValue();\r\n            insertCollegesRepository.insertColleges(userid, value);\r\n        }\r\n    }\r\n\r\n\r\nAt this point, the app is stepping through my college_school_code list and inserting into the database as expected, but the value for the school code is always null, so there&#39;s a disconnect there somewhere that I cannot figure out.\r\n\r\nThanks for any help!","title":"Spring Boot API Post Mapping to read in Array","body":"<p>I currently have an API that has this payload (from a react-select using isMulti):</p>\n<pre><code> {\n    &quot;college_school_code&quot;: [\n        {\n            &quot;label&quot;: &quot;College Name - College Address&quot;,\n            &quot;value&quot;: &quot;1234&quot;\n        },\n        {\n            &quot;label&quot;: &quot;College Name - College Address&quot;,\n            &quot;value&quot;: &quot;5678&quot;\n        }\n    ],\n    &quot;userid&quot;: &quot;email@email.com&quot;\n}\n</code></pre>\n<p>I need to read that API in, and write the userid and value of each college_school_codes to a database (so this call would write out two rows, both with the same userid, but different college_school_codes).</p>\n<p>Here's some more code that clearly doesn't work.  It should looks to see if there's any current rows for the user, remove those, then add the new rows:</p>\n<p>{ @Entity\npublic class CollegeSchoolCode {</p>\n<pre><code>@Id\nprivate String label;\nprivate String value;\n\npublic String getLabel() {\n    return label;\n}\n\npublic void setLabel(String label) {\n    this.label = label;\n}\n\npublic String getValue() {\n    return value;\n}\n\npublic void setValue(String value) {\n    this.value = value;\n}\n</code></pre>\n<p>}\n}</p>\n<pre><code>@Entity\n</code></pre>\n<p>public class CollegeSchoolCode {</p>\n<pre><code>@Id\nprivate String label;\nprivate String value;\n\npublic String getLabel() {\n    return label;\n}\n\npublic void setLabel(String label) {\n    this.label = label;\n}\n\npublic String getValue() {\n    return value;\n}\n\npublic void setValue(String value) {\n    this.value = value;\n}\n</code></pre>\n<p>}</p>\n<pre><code> public void insertColleges(@RequestBody CollegesInfo newCollegesInfo, CollegeSchoolCode newCollegeSchoolCode){\n\n    String userid = newCollegesInfo.getUserid();\n    List college_school_code  = newCollegesInfo.getCollege_school_code();\n\n    System.out.println(&quot;colleges=&quot;+college_school_code);\n\n    int rowCount = insertCollegesRepository.getRowCount(userid);\n\n    if (rowCount &gt; 0){\n        insertCollegesRepository.deleteColleges(userid);\n    }\n\n    for (int i = 0; i &lt; college_school_code.size(); i++) {\n        String value = newCollegeSchoolCode.getValue();\n        insertCollegesRepository.insertColleges(userid, value);\n    }\n}\n</code></pre>\n<p>At this point, the app is stepping through my college_school_code list and inserting into the database as expected, but the value for the school code is always null, so there's a disconnect there somewhere that I cannot figure out.</p>\n<p>Thanks for any help!</p>\n"},{"tags":["java","spring","sorting","aggregation-framework","spring-webflux"],"answers":[{"tags":[],"owner":{"account_id":10801575,"reputation":1614,"user_id":7945344,"display_name":"Lucas Declercq"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1644439259,"creation_date":1644439259,"answer_id":71056427,"question_id":71056111,"body_markdown":"Aggregation.newAggregation() can take a list of AggregationOperation.\r\n\r\nYou could do something like this :\r\n\r\n        List&lt;AggregationOperation&gt; aggregationOperations = new ArrayList&lt;&gt;();\r\n        aggregationOperations.add(Aggregation.match(criteria));\r\n        aggregationOperations.add(Aggregation.skip((long) (pageableRequest.getPageNumber() * pageableRequest.getPageSize())));\r\n        aggregationOperations.add(Aggregation.limit(pageableRequest.getPageSize()));\r\n        aggregationOperations.add(Aggregation.limit(pageableRequest.getPageSize()));\r\n        aggregationOperations.add(Aggregation.addFields().addField(&quot;isFav&quot;).withValue(condition).build());\r\n\r\n        if (sort.equals(&quot;asc&quot;)) {\r\n            aggregationOperations.add(Aggregation.sort(Sort.Direction.ASC, sortField));\r\n        }else{\r\n            aggregationOperations.add(Aggregation.sort(Sort.Direction.DESC, sortField));\r\n        }\r\n\r\n        Aggregation aggregation = Aggregation.newAggregation(aggregationOperations);\r\n        filterResponse.setListExample(\r\n                mongo.aggregate(aggregation, mongo.getCollectionName(ExampleClass.class), ExampleClass.class).collectList().share().block()\r\n        );","title":"Spring - Sort Aggregation","body":"<p>Aggregation.newAggregation() can take a list of AggregationOperation.</p>\n<p>You could do something like this :</p>\n<pre><code>    List&lt;AggregationOperation&gt; aggregationOperations = new ArrayList&lt;&gt;();\n    aggregationOperations.add(Aggregation.match(criteria));\n    aggregationOperations.add(Aggregation.skip((long) (pageableRequest.getPageNumber() * pageableRequest.getPageSize())));\n    aggregationOperations.add(Aggregation.limit(pageableRequest.getPageSize()));\n    aggregationOperations.add(Aggregation.limit(pageableRequest.getPageSize()));\n    aggregationOperations.add(Aggregation.addFields().addField(&quot;isFav&quot;).withValue(condition).build());\n\n    if (sort.equals(&quot;asc&quot;)) {\n        aggregationOperations.add(Aggregation.sort(Sort.Direction.ASC, sortField));\n    }else{\n        aggregationOperations.add(Aggregation.sort(Sort.Direction.DESC, sortField));\n    }\n\n    Aggregation aggregation = Aggregation.newAggregation(aggregationOperations);\n    filterResponse.setListExample(\n            mongo.aggregate(aggregation, mongo.getCollectionName(ExampleClass.class), ExampleClass.class).collectList().share().block()\n    );\n</code></pre>\n"}],"owner":{"account_id":24207922,"reputation":76,"user_id":18164852,"display_name":"Jonathan Luke"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1163,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":71056427,"answer_count":1,"score":1,"last_activity_date":1644439259,"creation_date":1644437667,"question_id":71056111,"body_markdown":"I have an aggregation similar to this one:\r\n\r\n    public Flux&lt;Example&gt; listWithFilters (int pageNumber, int size , String sortField, String sort, String userName) {\r\n        \r\n        Criteria criteria = new Criteria();\r\n        criteria = criteria.where(&quot;orgId&quot;).is(orgId).and(&quot;category&quot;).all(category);\r\n        criteria = criteria.orOperator(Criteria.where(DELETED).isNull(), Criteria.where(DELETED).is(false));\r\n\r\n        AggregationExpression condition = ConditionalOperators.when(ArrayOperators.arrayOf(ConditionalOperators\r\n                        .ifNull(&quot;favourite&quot;).then(Collections.emptyList())).containsValue(userName))\r\n                .then(true)\r\n                .otherwise(false);\r\n\r\n        Pageable pageableRequest = PageRequest.of(pageNumber, size);\r\n        Aggregation aggregation = Aggregation.newAggregation(\r\n                Aggregation.match(criteria),\r\n                Aggregation.skip((long) (pageableRequest.getPageNumber() * pageableRequest.getPageSize())),\r\n                Aggregation.limit(pageableRequest.getPageSize()),\r\n                Aggregation.addFields().addField(&quot;isFav&quot;).withValue(condition).build());\r\n\r\n        filterResponse.setListExample(\r\n                mongo.aggregate(aggregation, mongo.getCollectionName(ExampleClass.class), ExampleClass.class).collectList().share().block()\r\n        );\r\n        return Flux.just(Example);\r\n    }\r\n\r\nI would like to be able to sort it with variable data (sortField and Sort), but I don&#39;t know how to add it to the aggregation. To get an idea I would like something like:\r\n\r\n    if(sort.equals(&quot;asc&quot;)){\r\n    Aggregation.sort(Sort.Direction.ASC, sortField));\r\n\t}else{\r\n    Aggregation.sort(Sort.Direction.DESC, sortField));}\r\n\r\nDoes anyone have any idea how to do it?","title":"Spring - Sort Aggregation","body":"<p>I have an aggregation similar to this one:</p>\n<pre><code>public Flux&lt;Example&gt; listWithFilters (int pageNumber, int size , String sortField, String sort, String userName) {\n    \n    Criteria criteria = new Criteria();\n    criteria = criteria.where(&quot;orgId&quot;).is(orgId).and(&quot;category&quot;).all(category);\n    criteria = criteria.orOperator(Criteria.where(DELETED).isNull(), Criteria.where(DELETED).is(false));\n\n    AggregationExpression condition = ConditionalOperators.when(ArrayOperators.arrayOf(ConditionalOperators\n                    .ifNull(&quot;favourite&quot;).then(Collections.emptyList())).containsValue(userName))\n            .then(true)\n            .otherwise(false);\n\n    Pageable pageableRequest = PageRequest.of(pageNumber, size);\n    Aggregation aggregation = Aggregation.newAggregation(\n            Aggregation.match(criteria),\n            Aggregation.skip((long) (pageableRequest.getPageNumber() * pageableRequest.getPageSize())),\n            Aggregation.limit(pageableRequest.getPageSize()),\n            Aggregation.addFields().addField(&quot;isFav&quot;).withValue(condition).build());\n\n    filterResponse.setListExample(\n            mongo.aggregate(aggregation, mongo.getCollectionName(ExampleClass.class), ExampleClass.class).collectList().share().block()\n    );\n    return Flux.just(Example);\n}\n</code></pre>\n<p>I would like to be able to sort it with variable data (sortField and Sort), but I don't know how to add it to the aggregation. To get an idea I would like something like:</p>\n<pre><code>if(sort.equals(&quot;asc&quot;)){\nAggregation.sort(Sort.Direction.ASC, sortField));\n}else{\nAggregation.sort(Sort.Direction.DESC, sortField));}\n</code></pre>\n<p>Does anyone have any idea how to do it?</p>\n"},{"tags":["java","spring","user-interface","layout","vaadin"],"answers":[{"tags":[],"owner":{"account_id":295692,"reputation":41,"user_id":600230,"display_name":"WaTho"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1644274574,"creation_date":1644274574,"answer_id":71026468,"question_id":70777989,"body_markdown":"Could it be that your `Label infoText` takes more vertical space than your `HorizontalLayout textFields` in the second case and therefore the `buttonLayout` is just out of view? \r\n\r\nI know that this is no real answer. I tried to add this as comment, but i don&#39;t have enough reputation.","title":"Vaadin Layout dont Diaply Buttons","body":"<p>Could it be that your <code>Label infoText</code> takes more vertical space than your <code>HorizontalLayout textFields</code> in the second case and therefore the <code>buttonLayout</code> is just out of view?</p>\n<p>I know that this is no real answer. I tried to add this as comment, but i don't have enough reputation.</p>\n"},{"tags":[],"owner":{"account_id":23592032,"reputation":51,"user_id":17629671,"display_name":"Zakon"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1644439140,"creation_date":1644439140,"answer_id":71056401,"question_id":70777989,"body_markdown":"After long debugging finally the solution.\r\nA button can only be on one slide at a time. If buttons are added to multiple slides, the button is only displayed on the last one. I did not find out why.\r\nTemporarily I will create a new button for each slide. Not nice to read but it works for now.\r\n\r\n","title":"Vaadin Layout dont Diaply Buttons","body":"<p>After long debugging finally the solution.\nA button can only be on one slide at a time. If buttons are added to multiple slides, the button is only displayed on the last one. I did not find out why.\nTemporarily I will create a new button for each slide. Not nice to read but it works for now.</p>\n"}],"owner":{"account_id":23592032,"reputation":51,"user_id":17629671,"display_name":"Zakon"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":59,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":71056401,"answer_count":2,"score":0,"last_activity_date":1644439140,"creation_date":1642627880,"question_id":70777989,"body_markdown":"Hi am usin Vaadin to code an WebApplication.\r\nI use this Vaadin Addon:\r\nhttps://vaadin.com/directory/component/carousel-addon\r\n\r\nMy Problem is that my Button layout only display on the 3rd Carousel Slide and i dont know why. \r\n\r\n    private Component crateCarouselSlides(Image iconimage, H1 header, Label infoText) {\r\n        HorizontalLayout buttonLayout = new HorizontalLayout(previousSlideButton,nextSlideButton);\r\n        if(infoText != null){\r\n            VerticalLayout slideLayout = new VerticalLayout(iconimage,header,infoText,buttonLayout);\r\n            slideLayout.setClassName(&quot;slideLayout&quot;);\r\n            iconimage.setClassName(&quot;iconImage&quot;);\r\n            return slideLayout;\r\n        }else{\r\n            HorizontalLayout textFields = new HorizontalLayout(new TextField(&quot;Name&quot;),new TextField(&quot;Playlist&quot;));\r\n            VerticalLayout slideLayout = new VerticalLayout(iconimage,header,textFields,buttonLayout);\r\n            slideLayout.setClassName(&quot;slideLayout&quot;);\r\n            iconimage.setClassName(&quot;iconImage&quot;);\r\n            return slideLayout;\r\n        }\r\n    }\r\n\r\nThanks for your Help. :)\r\n\r\n[Slide1][1]\r\n[Slide3][2]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/swfNo.jpg\r\n  [2]: https://i.stack.imgur.com/BWMg3.jpg","title":"Vaadin Layout dont Diaply Buttons","body":"<p>Hi am usin Vaadin to code an WebApplication.\nI use this Vaadin Addon:\n<a href=\"https://vaadin.com/directory/component/carousel-addon\" rel=\"nofollow noreferrer\">https://vaadin.com/directory/component/carousel-addon</a></p>\n<p>My Problem is that my Button layout only display on the 3rd Carousel Slide and i dont know why.</p>\n<pre><code>private Component crateCarouselSlides(Image iconimage, H1 header, Label infoText) {\n    HorizontalLayout buttonLayout = new HorizontalLayout(previousSlideButton,nextSlideButton);\n    if(infoText != null){\n        VerticalLayout slideLayout = new VerticalLayout(iconimage,header,infoText,buttonLayout);\n        slideLayout.setClassName(&quot;slideLayout&quot;);\n        iconimage.setClassName(&quot;iconImage&quot;);\n        return slideLayout;\n    }else{\n        HorizontalLayout textFields = new HorizontalLayout(new TextField(&quot;Name&quot;),new TextField(&quot;Playlist&quot;));\n        VerticalLayout slideLayout = new VerticalLayout(iconimage,header,textFields,buttonLayout);\n        slideLayout.setClassName(&quot;slideLayout&quot;);\n        iconimage.setClassName(&quot;iconImage&quot;);\n        return slideLayout;\n    }\n}\n</code></pre>\n<p>Thanks for your Help. :)</p>\n<p><a href=\"https://i.stack.imgur.com/swfNo.jpg\" rel=\"nofollow noreferrer\">Slide1</a>\n<a href=\"https://i.stack.imgur.com/BWMg3.jpg\" rel=\"nofollow noreferrer\">Slide3</a></p>\n"},{"tags":["java","log4j2"],"comments":[{"owner":{"account_id":16269349,"reputation":13452,"user_id":11748454,"display_name":"Piotr P. Karwasz"},"score":0,"creation_date":1644359773,"post_id":71041329,"comment_id":125585537,"body_markdown":"The `app` after `logger.` must be a unique identifier for that logger, otherwise one property overrides the other. You can use `logger.1`, `logger.2` or whatever you want (as long as it does not contain a dot).","body":"The <code>app</code> after <code>logger.</code> must be a unique identifier for that logger, otherwise one property overrides the other. You can use <code>logger.1</code>, <code>logger.2</code> or whatever you want (as long as it does not contain a dot)."},{"owner":{"account_id":1476933,"reputation":529,"user_id":1387115,"display_name":"Alain D&#233;silets"},"score":0,"creation_date":1644433270,"post_id":71041329,"comment_id":125608206,"body_markdown":"Hum, this works, but it is incredibly painful for my use case. I Now have to make sure that: (1) I choose a unique id  in the &#39;logger.someid.name=&#39; line (2) make sure I use that exact same unique  id in the &#39;logger.someid.level=&#39; line then (3) type the name of the logger (the one referenced in my java code) as the value for the &#39;logger.someid.name=&#39; line. I may have to write an Emacs macro to generate the &#39;someid&#39; from the name of the logger.","body":"Hum, this works, but it is incredibly painful for my use case. I Now have to make sure that: (1) I choose a unique id  in the &#39;logger.someid.name=&#39; line (2) make sure I use that exact same unique  id in the &#39;logger.someid.level=&#39; line then (3) type the name of the logger (the one referenced in my java code) as the value for the &#39;logger.someid.name=&#39; line. I may have to write an Emacs macro to generate the &#39;someid&#39; from the name of the logger."},{"owner":{"account_id":16269349,"reputation":13452,"user_id":11748454,"display_name":"Piotr P. Karwasz"},"score":0,"creation_date":1644433563,"post_id":71041329,"comment_id":125608318,"body_markdown":"That is why the properties format is not the default one in Log4j 2.x. Use the XML or JSON format, which are less verbose.","body":"That is why the properties format is not the default one in Log4j 2.x. Use the XML or JSON format, which are less verbose."},{"owner":{"account_id":1476933,"reputation":529,"user_id":1387115,"display_name":"Alain D&#233;silets"},"score":0,"creation_date":1644434308,"post_id":71041329,"comment_id":125608603,"body_markdown":"I tried the .yml syntax, but I am having the same problem. See the bit I added at the end of my question.","body":"I tried the .yml syntax, but I am having the same problem. See the bit I added at the end of my question."},{"owner":{"account_id":16269349,"reputation":13452,"user_id":11748454,"display_name":"Piotr P. Karwasz"},"score":0,"creation_date":1644438551,"post_id":71041329,"comment_id":125610086,"body_markdown":"YAML also does not accept multiple keys with the same name (`logger`).","body":"YAML also does not accept multiple keys with the same name (<code>logger</code>)."}],"answers":[{"tags":[],"owner":{"account_id":16269349,"reputation":13452,"user_id":11748454,"display_name":"Piotr P. Karwasz"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1644438469,"creation_date":1644438469,"answer_id":71056274,"question_id":71041329,"body_markdown":"As you remarked the properties format is not the easiest one to use, since it requires at least to lines per logger and plenty useless identifiers to generate. By comparison you have:\r\n\r\n - in the properties format:\r\n   ```\r\n   logger.&lt;id1&gt;.name=org.example.foo\r\n   logger.&lt;id1&gt;.level=INFO\r\n   logger.&lt;id2&gt;.name=org.example.bar\r\n   logger.&lt;id2&gt;.level=DEBUG\r\n   ```\r\n - in the XML format:\r\n   ```lang-xml\r\n   &lt;Loggers&gt;\r\n       &lt;Logger name=&quot;org.example.foo&quot; level=&quot;INFO&quot;/&gt;\r\n       &lt;Logger name=&quot;org.example.bar&quot; level=&quot;DEBUG&quot;/&gt;\r\n   &lt;/Loggers&gt;\r\n   ```\r\n - in the YAML format:\r\n   ```lang-yaml\r\n   Loggers:\r\n       logger:\r\n           - name: org.example.foo\r\n             level: INFO\r\n           - name: org.example.bar\r\n             level: DEBUG\r\n   ```\r\n - in the JSON format:\r\n   ```lang-json\r\n   &quot;loggers&quot;: {\r\n       &quot;logger&quot;: [\r\n           { &quot;name&quot;: &quot;org.example.foo&quot;, &quot;level&quot;: &quot;INFO&quot; },\r\n           { &quot;name&quot;: &quot;org.example.bar&quot;, &quot;level&quot;: &quot;DEBUG&quot; }\r\n       ]\r\n   }\r\n   ```\r\n\r\nThere has been some propositions recently aimed at shortening the properties format: see [LOG4J2-3341](https://issues.apache.org/jira/browse/LOG4J2-3341), [LOG4J2-3394](https://issues.apache.org/jira/browse/LOG4J2-3394) or my own [PR #735](https://github.com/apache/logging-log4j2/pull/735).\r\n","title":"Separate loggers for different methods","body":"<p>As you remarked the properties format is not the easiest one to use, since it requires at least to lines per logger and plenty useless identifiers to generate. By comparison you have:</p>\n<ul>\n<li>in the properties format:\n<pre><code>logger.&lt;id1&gt;.name=org.example.foo\nlogger.&lt;id1&gt;.level=INFO\nlogger.&lt;id2&gt;.name=org.example.bar\nlogger.&lt;id2&gt;.level=DEBUG\n</code></pre>\n</li>\n<li>in the XML format:\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;Loggers&gt;\n    &lt;Logger name=&quot;org.example.foo&quot; level=&quot;INFO&quot;/&gt;\n    &lt;Logger name=&quot;org.example.bar&quot; level=&quot;DEBUG&quot;/&gt;\n&lt;/Loggers&gt;\n</code></pre>\n</li>\n<li>in the YAML format:\n<pre class=\"lang-yaml prettyprint-override\"><code>Loggers:\n    logger:\n        - name: org.example.foo\n          level: INFO\n        - name: org.example.bar\n          level: DEBUG\n</code></pre>\n</li>\n<li>in the JSON format:\n<pre class=\"lang-json prettyprint-override\"><code>&quot;loggers&quot;: {\n    &quot;logger&quot;: [\n        { &quot;name&quot;: &quot;org.example.foo&quot;, &quot;level&quot;: &quot;INFO&quot; },\n        { &quot;name&quot;: &quot;org.example.bar&quot;, &quot;level&quot;: &quot;DEBUG&quot; }\n    ]\n}\n</code></pre>\n</li>\n</ul>\n<p>There has been some propositions recently aimed at shortening the properties format: see <a href=\"https://issues.apache.org/jira/browse/LOG4J2-3341\" rel=\"nofollow noreferrer\">LOG4J2-3341</a>, <a href=\"https://issues.apache.org/jira/browse/LOG4J2-3394\" rel=\"nofollow noreferrer\">LOG4J2-3394</a> or my own <a href=\"https://github.com/apache/logging-log4j2/pull/735\" rel=\"nofollow noreferrer\">PR #735</a>.</p>\n"}],"owner":{"account_id":1476933,"reputation":529,"user_id":1387115,"display_name":"Alain D&#233;silets"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":56,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1644439047,"creation_date":1644357129,"question_id":71041329,"body_markdown":"I use loggers to print traces that are specific to certain methods. That way when I want to debug my code I can activate traces in only those methods I care about.\r\n\r\nI used to be able to do that with log4j v1. I would instrument selected methods with loggers like this:\r\n\r\n```\r\nprivate static void method1() {\r\n  Logger logger = Logger.getLogger(&quot;org.examples.method1&quot;);\r\n  logger.debug(&quot;Hello from method1&quot;);\r\n  etc...\r\n}\r\nprivate static void method2() {\r\n  Logger logger = Logger.getLogger(&quot;org.examples.method2&quot;);\r\n  logger.debug(&quot;Hello from method2&quot;);\r\n  etc...\r\n}\r\n```\r\n\r\nThen in my log4j.properties file, I would activate the traces like this:\r\n\r\n```\r\nlog4j.logger.org.examples.method1=debug\r\nlog4j.logger.org.examples.method2=debug\r\netc...\r\n```\r\n\r\nI am trying to replicate that behavior in log4j v2, but am having problems with it.\r\n\r\nAs far as instrumenting methods with loggers, I am doing OK. I do it the same way as with v1, except that I use LogManager.getLogger() instead of Logger.getLogger() (which does not exist in v2). \r\n\r\nFor activating the loggers, I need to use the v2 syntax, so I now do this:\r\n\r\n```\r\nlogger.app.name = org.examples.method1\r\nlogger.app.level = debug\r\n\r\nlogger.app.name = org.examples.method2\r\nlogger.app.level = debug\r\n```\r\n\r\nThe problem is that when I run code that invokes both method1 and method2, only the method2 traces appear. In order to see the method1 traces, I have to comment out the method2 properties. Note that I have tried adding the additivity = true to both loggers, to no effect.\r\n\r\nPiotr (see answer below) says that I need to have a different value for the &#39;.app&#39; bit in the above code. So instead I should write something like this:\r\n\r\n```\r\nlogger.1.name = org.examples.method1\r\nlogger.1.level = debug\r\n\r\nlogger.2.name = org.examples.method2\r\nlogger.2.level = debug\r\n```\r\nBut this is really inconvenient for my use case because I have to:\r\n- Make sure I use the same number on all lines that pertain to a given logger\r\n- Make sure that I never use the same number for a different logger\r\n\r\nOne solution would be for me to write a macro that would automatically generate the two lines from the name of the logger. So, for a logger called org.examples.method1, it might generate:\r\n\r\n```\r\nlogger.org_examples_method1.name = org.examples.method1\r\nlogger.org_examples_method1.level = debug\r\n```\r\n\r\nPietr also suggested that I might use the .yml or .json syntax instead of .properties. But when I tried the .yml syntax, I had the same problem, namely, if I write this:\r\n\r\n```\r\n  Loggers:\r\n    logger:\r\n        - name: org.examples.method1\r\n          level: debug\r\n    logger:\r\n        - name: org.examples.method2\r\n          level: debug\r\n```\r\n\r\nThen only the method2 traces are being printed. And here, there does not seem to be a &quot;second id&quot; involved, so I am not sure how to fix it.\r\n","title":"Separate loggers for different methods","body":"<p>I use loggers to print traces that are specific to certain methods. That way when I want to debug my code I can activate traces in only those methods I care about.</p>\n<p>I used to be able to do that with log4j v1. I would instrument selected methods with loggers like this:</p>\n<pre><code>private static void method1() {\n  Logger logger = Logger.getLogger(&quot;org.examples.method1&quot;);\n  logger.debug(&quot;Hello from method1&quot;);\n  etc...\n}\nprivate static void method2() {\n  Logger logger = Logger.getLogger(&quot;org.examples.method2&quot;);\n  logger.debug(&quot;Hello from method2&quot;);\n  etc...\n}\n</code></pre>\n<p>Then in my log4j.properties file, I would activate the traces like this:</p>\n<pre><code>log4j.logger.org.examples.method1=debug\nlog4j.logger.org.examples.method2=debug\netc...\n</code></pre>\n<p>I am trying to replicate that behavior in log4j v2, but am having problems with it.</p>\n<p>As far as instrumenting methods with loggers, I am doing OK. I do it the same way as with v1, except that I use LogManager.getLogger() instead of Logger.getLogger() (which does not exist in v2).</p>\n<p>For activating the loggers, I need to use the v2 syntax, so I now do this:</p>\n<pre><code>logger.app.name = org.examples.method1\nlogger.app.level = debug\n\nlogger.app.name = org.examples.method2\nlogger.app.level = debug\n</code></pre>\n<p>The problem is that when I run code that invokes both method1 and method2, only the method2 traces appear. In order to see the method1 traces, I have to comment out the method2 properties. Note that I have tried adding the additivity = true to both loggers, to no effect.</p>\n<p>Piotr (see answer below) says that I need to have a different value for the '.app' bit in the above code. So instead I should write something like this:</p>\n<pre><code>logger.1.name = org.examples.method1\nlogger.1.level = debug\n\nlogger.2.name = org.examples.method2\nlogger.2.level = debug\n</code></pre>\n<p>But this is really inconvenient for my use case because I have to:</p>\n<ul>\n<li>Make sure I use the same number on all lines that pertain to a given logger</li>\n<li>Make sure that I never use the same number for a different logger</li>\n</ul>\n<p>One solution would be for me to write a macro that would automatically generate the two lines from the name of the logger. So, for a logger called org.examples.method1, it might generate:</p>\n<pre><code>logger.org_examples_method1.name = org.examples.method1\nlogger.org_examples_method1.level = debug\n</code></pre>\n<p>Pietr also suggested that I might use the .yml or .json syntax instead of .properties. But when I tried the .yml syntax, I had the same problem, namely, if I write this:</p>\n<pre><code>  Loggers:\n    logger:\n        - name: org.examples.method1\n          level: debug\n    logger:\n        - name: org.examples.method2\n          level: debug\n</code></pre>\n<p>Then only the method2 traces are being printed. And here, there does not seem to be a &quot;second id&quot; involved, so I am not sure how to fix it.</p>\n"}],"has_more":true,"quota_max":10000,"quota_remaining":8387,"page":1605,"page_size":100}
