{"items":[{"tags":["java","firebase","android-studio","firebase-realtime-database","android-recyclerview"],"comments":[{"owner":{"account_id":6819231,"reputation":132841,"user_id":5246885,"accept_rate":78,"display_name":"Alex Mamo"},"score":1,"creation_date":1660982446,"post_id":73416751,"comment_id":129666104,"body_markdown":"What exactly in this code doesn&#39;t work the way you expect?\nTell us what is wrong with shared code. Do you have any errors?","body":"What exactly in this code doesn&#39;t work the way you expect? Tell us what is wrong with shared code. Do you have any errors?"},{"owner":{"account_id":16238244,"reputation":185,"user_id":11725250,"display_name":"sammy"},"score":0,"creation_date":1660987364,"post_id":73416751,"comment_id":129666815,"body_markdown":"@AlexMamo I don&#39;t get any errors when I run the code. But as I have mentioned, the RecyclerView does not display the data at times. When that happens, it gets stuck at RecyclerView&#39;s setAdapter(meaning whatever I log after doesn&#39;t show). It works sometimes but sometimes it doesn&#39;t so I don&#39;t know why it is not working consistently and want to fix that.","body":"@AlexMamo I don&#39;t get any errors when I run the code. But as I have mentioned, the RecyclerView does not display the data at times. When that happens, it gets stuck at RecyclerView&#39;s setAdapter(meaning whatever I log after doesn&#39;t show). It works sometimes but sometimes it doesn&#39;t so I don&#39;t know why it is not working consistently and want to fix that."}],"owner":{"account_id":16238244,"reputation":185,"user_id":11725250,"display_name":"sammy"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":86,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":0,"score":2,"last_activity_date":1661454734,"creation_date":1660911720,"question_id":73416751,"body_markdown":"I have two RecyclerViews inside a LinearLayout in which I&#39;m trying to display Firebase Storage data on one and some Products data queried from Real-Time Database on the other. While I am able to retrieve the data successfully, I have trouble showing it on the RecyclerView(s). \r\n\r\nThere are 1 of 3 things that happen spontaneously when I try to display the data:\r\n\r\n - Case 1: Data does not show on both RecyclerViews OR\r\n - Case 2: Data is shown for the first RecyclerView(displays storage\r\n   data) OR\r\n - Case 3: Data shows for both (but can sometimes take a verrryy long\r\n   time to load even though I have only one data each for both).\r\n\r\nFor the second RecyclerView, I have written the code to query in-app products data from Google Play Console using the billingclient library and I use the data queried from Real-Time DB to see if there is a match in the product IDs. If there is, I display the matching data on the RecyclerView. \r\n\r\nWhile fetching the data is fine, at various times my code gets stuck on setAdapter() and I don&#39;t understand why and I don&#39;t know how to get it to work properly? \r\n\r\nHere&#39;s a reference to my current code:\r\n\r\n\r\n    @Override\r\n    public View onCreateView(@NonNull LayoutInflater inflater, ViewGroup parent,\r\n                             Bundle savedInstanceState) {\r\n\r\n        FirebaseStorage storage = FirebaseStorage.getInstance();\r\n        FirebaseDatabase database = FirebaseDatabase.getInstance();\r\n        storageRef = storage.getReference(); \r\n        dataRef = database.getReference().child(&quot;products&quot;);\r\n\r\n        view = inflater.inflate(R.layout.course_fragment, parent, false);\r\n        mainLayout = view.findViewById(R.id.mainLayout);\r\n        filesRv = view.findViewById(R.id.file_recycler_view);\r\n        productRv = view.findViewById(R.id.product_recycler_view);\r\n   \r\n        //list storage folder/files\r\n        listFilesFolders();\r\n\r\n        //check for premium data on real-time database and see if productID matches with productID on Google Play Console (display data on recycler view if it matches)\r\n        checkForPremium();\r\n\r\n        return view;\r\n    }\r\n\r\n    private void checkForPremium() {\r\n        setBillingClient(getContext());\r\n        connectToGooglePlay();\r\n    }\r\n\r\n    private void listFilesFolders() {\r\n        fileStorageRef.listAll()\r\n                .addOnSuccessListener(listResult -&gt; {\r\n                    for (StorageReference folder : listResult.getPrefixes()) {\r\n                        parentFolder = folder.getName();\r\n                        contentList.add(fileStorageRef.child(parentFolder));\r\n                    }\r\n\r\n                    for (StorageReference file : listResult.getItems()) {\r\n                        fileName = file.getName();\r\n                        contentList.add(fileStorageRef.child(fileName));\r\n                    }\r\n\r\n                    setFilesRecyclerView();\r\n                })\r\n\r\n \r\n                .addOnFailureListener(e -&gt; {\r\n                    // Some code here\r\n                })\r\n\r\n                .addOnCompleteListener(task -&gt; {\r\n                    // Some code here\r\n                });\r\n    }\r\n\r\n    private void setFilesRecyclerView() {\r\n        if(pageTitle.equals(rootFolder) || contentList.isEmpty()) {\r\n            displayFolders();\r\n        }\r\n\r\n        else {\r\n            displayFiles();\r\n        }\r\n    }\r\n\r\n    private void displayFolders() {\r\n        int columnCount = 2;\r\n        DisplayMetrics displayMetrics = view.getResources().getDisplayMetrics();\r\n        int width = displayMetrics.widthPixels; //get screen width\r\n\r\n        //if screen width is large, increase  grid columns\r\n        if(width &gt; 800 &amp;&amp; width &lt; 1500){\r\n            columnCount = 3;}\r\n\r\n        else if(width &gt;= 1500 &amp;&amp; width &lt; 1800){\r\n            columnCount = 4; }\r\n\r\n        else if(width &gt;= 1800){\r\n            columnCount = 5;\r\n        }\r\n\r\n        GridLayoutManager gridLayoutManager = new GridLayoutManager(getActivity(), columnCount);\r\n        SubFolderAdapter subFolderAdapter = new SubFolderAdapter(getActivity(), contentList);\r\n        filesRv.setLayoutManager(gridLayoutManager);\r\n        filesRv.setAdapter(subFolderAdapter);\r\n    }\r\n\r\n    private void displayFiles() {\r\n        LinearLayoutManager llm1 = new LinearLayoutManager(getActivity());\r\n        fileAdapter = new FileAdapter(getActivity(), contentList);\r\n        filesRv.setLayoutManager(llm1);\r\n        filesRv.setAdapter(fileAdapter);\r\n    }\r\n\r\n    private void displayPremiumData() {\r\n        LinearLayoutManager llm2 = new LinearLayoutManager(getActivity());\r\n        productsAdapter = new ProductsAdapter3(getActivity(), billingClient, prodDetailsList, path);\r\n        productRv.setLayoutManager(llm2);\r\n        productRv.setAdapter(productsAdapter);\r\n\r\n    }\r\n\r\n    public void setBillingClient(Context context) {\r\n        System.out.println(&quot;Set billing client&quot;);\r\n        billingClient = BillingClient.newBuilder(context) //creates instance of billing client\r\n                .enablePendingPurchases() \r\n                .setListener(this) \r\n                .build();\r\n    }\r\n\r\n    public void connectToGooglePlay() {\r\n        //Establish a connection to Google Play\r\n        billingClient.startConnection(new BillingClientStateListener() {\r\n            @Override\r\n            public void onBillingSetupFinished(@NonNull BillingResult billingResult) {\r\n                if (billingResult.getResponseCode() ==  BillingClient.BillingResponseCode.OK) {\r\n                    // The BillingClient is ready. You can query purchases here.\r\n                    System.out.println(&quot;Billing client ready&quot;);\r\n                    listPremium();\r\n                } else System.out.println(&quot;Billing client NOT ready&quot;);\r\n            }\r\n            @Override\r\n            public void onBillingServiceDisconnected() {\r\n                // Try to restart the connection on the next request to\r\n                // Google Play by calling the startConnection() method.\r\n                System.out.println(&quot;Billing service disconnected&quot;);\r\n            }\r\n        });\r\n    }\r\n\r\n    private void listPremium() {\r\n        premiumDBRef.addListenerForSingleValueEvent(new ValueEventListener() {\r\n            @Override\r\n            public void onDataChange(@NonNull DataSnapshot snapshot) {\r\n                cProductsList.clear();\r\n                for (DataSnapshot snap: snapshot.getChildren()) {\r\n                    Products products = snap.getValue(Products.class);\r\n                    String sku;\r\n                    String name;\r\n                    String url;\r\n                    if (products != null) {\r\n                        sku = products.getProductId();\r\n                        name = products.getName();\r\n                        url = products.getUrl();\r\n\r\n                        if(sku != null) {\r\n                            skuList.add(sku);\r\n                        }\r\n\r\n                    } else {\r\n                        System.out.println(&quot;Product does not exist!&quot;);\r\n                    }\r\n                }\r\n\r\n                for(String sku : skuList) {\r\n                    productList.add(\r\n                            QueryProductDetailsParams.Product.newBuilder()\r\n                                    .setProductId(sku)\r\n                                    .setProductType(BillingClient.ProductType.INAPP)\r\n                                    .build()\r\n                    );\r\n\r\n                }\r\n\r\n                if (!productList.isEmpty()) {\r\n                    querySkuDetails(productList);\r\n                } else {\r\n                    System.out.println(&quot;No products available&quot;);\r\n                }\r\n            }\r\n\r\n            @Override\r\n            public void onCancelled(@NonNull DatabaseError error) {\r\n\r\n            }\r\n        });\r\n    }\r\n\r\n    public void querySkuDetails(List&lt;QueryProductDetailsParams.Product&gt; productList) {\r\n        QueryProductDetailsParams params = QueryProductDetailsParams.newBuilder()\r\n                .setProductList(productList)\r\n                .build();\r\n\r\n        billingClient.queryProductDetailsAsync(\r\n                params,\r\n                (billingResult, productDetailsList) -&gt; {\r\n                    // check billingResult\r\n                    // process returned productDetailsList\r\n                    if (billingResult.getResponseCode() != BillingClient.BillingResponseCode.OK) {\r\n                        System.out.printf(Locale.ENGLISH, &quot;Unable to query sku details: %d - %s%n&quot;, billingResult.getResponseCode(), billingResult.getDebugMessage());\r\n                    } else {\r\n                        for (ProductDetails details: productDetailsList) {\r\n                            prodDetailsList.add(details);\r\n                        }\r\n\r\n                        displayPremiumData();\r\n                    }\r\n                });\r\n\r\n    }\r\n\r\nNote: When I run the code, there are no errors. The issue is that the RecyclerView is not working consistently as intended. \r\nI have been trying to get this to work but I have been stuck for days now and I would really appreciate some help please!\r\n\r\n\r\n","title":"RecyclerView does not work sometimes when trying to display Firebase data","body":"<p>I have two RecyclerViews inside a LinearLayout in which I'm trying to display Firebase Storage data on one and some Products data queried from Real-Time Database on the other. While I am able to retrieve the data successfully, I have trouble showing it on the RecyclerView(s).</p>\n<p>There are 1 of 3 things that happen spontaneously when I try to display the data:</p>\n<ul>\n<li>Case 1: Data does not show on both RecyclerViews OR</li>\n<li>Case 2: Data is shown for the first RecyclerView(displays storage\ndata) OR</li>\n<li>Case 3: Data shows for both (but can sometimes take a verrryy long\ntime to load even though I have only one data each for both).</li>\n</ul>\n<p>For the second RecyclerView, I have written the code to query in-app products data from Google Play Console using the billingclient library and I use the data queried from Real-Time DB to see if there is a match in the product IDs. If there is, I display the matching data on the RecyclerView.</p>\n<p>While fetching the data is fine, at various times my code gets stuck on setAdapter() and I don't understand why and I don't know how to get it to work properly?</p>\n<p>Here's a reference to my current code:</p>\n<pre><code>@Override\npublic View onCreateView(@NonNull LayoutInflater inflater, ViewGroup parent,\n                         Bundle savedInstanceState) {\n\n    FirebaseStorage storage = FirebaseStorage.getInstance();\n    FirebaseDatabase database = FirebaseDatabase.getInstance();\n    storageRef = storage.getReference(); \n    dataRef = database.getReference().child(&quot;products&quot;);\n\n    view = inflater.inflate(R.layout.course_fragment, parent, false);\n    mainLayout = view.findViewById(R.id.mainLayout);\n    filesRv = view.findViewById(R.id.file_recycler_view);\n    productRv = view.findViewById(R.id.product_recycler_view);\n\n    //list storage folder/files\n    listFilesFolders();\n\n    //check for premium data on real-time database and see if productID matches with productID on Google Play Console (display data on recycler view if it matches)\n    checkForPremium();\n\n    return view;\n}\n\nprivate void checkForPremium() {\n    setBillingClient(getContext());\n    connectToGooglePlay();\n}\n\nprivate void listFilesFolders() {\n    fileStorageRef.listAll()\n            .addOnSuccessListener(listResult -&gt; {\n                for (StorageReference folder : listResult.getPrefixes()) {\n                    parentFolder = folder.getName();\n                    contentList.add(fileStorageRef.child(parentFolder));\n                }\n\n                for (StorageReference file : listResult.getItems()) {\n                    fileName = file.getName();\n                    contentList.add(fileStorageRef.child(fileName));\n                }\n\n                setFilesRecyclerView();\n            })\n\n\n            .addOnFailureListener(e -&gt; {\n                // Some code here\n            })\n\n            .addOnCompleteListener(task -&gt; {\n                // Some code here\n            });\n}\n\nprivate void setFilesRecyclerView() {\n    if(pageTitle.equals(rootFolder) || contentList.isEmpty()) {\n        displayFolders();\n    }\n\n    else {\n        displayFiles();\n    }\n}\n\nprivate void displayFolders() {\n    int columnCount = 2;\n    DisplayMetrics displayMetrics = view.getResources().getDisplayMetrics();\n    int width = displayMetrics.widthPixels; //get screen width\n\n    //if screen width is large, increase  grid columns\n    if(width &gt; 800 &amp;&amp; width &lt; 1500){\n        columnCount = 3;}\n\n    else if(width &gt;= 1500 &amp;&amp; width &lt; 1800){\n        columnCount = 4; }\n\n    else if(width &gt;= 1800){\n        columnCount = 5;\n    }\n\n    GridLayoutManager gridLayoutManager = new GridLayoutManager(getActivity(), columnCount);\n    SubFolderAdapter subFolderAdapter = new SubFolderAdapter(getActivity(), contentList);\n    filesRv.setLayoutManager(gridLayoutManager);\n    filesRv.setAdapter(subFolderAdapter);\n}\n\nprivate void displayFiles() {\n    LinearLayoutManager llm1 = new LinearLayoutManager(getActivity());\n    fileAdapter = new FileAdapter(getActivity(), contentList);\n    filesRv.setLayoutManager(llm1);\n    filesRv.setAdapter(fileAdapter);\n}\n\nprivate void displayPremiumData() {\n    LinearLayoutManager llm2 = new LinearLayoutManager(getActivity());\n    productsAdapter = new ProductsAdapter3(getActivity(), billingClient, prodDetailsList, path);\n    productRv.setLayoutManager(llm2);\n    productRv.setAdapter(productsAdapter);\n\n}\n\npublic void setBillingClient(Context context) {\n    System.out.println(&quot;Set billing client&quot;);\n    billingClient = BillingClient.newBuilder(context) //creates instance of billing client\n            .enablePendingPurchases() \n            .setListener(this) \n            .build();\n}\n\npublic void connectToGooglePlay() {\n    //Establish a connection to Google Play\n    billingClient.startConnection(new BillingClientStateListener() {\n        @Override\n        public void onBillingSetupFinished(@NonNull BillingResult billingResult) {\n            if (billingResult.getResponseCode() ==  BillingClient.BillingResponseCode.OK) {\n                // The BillingClient is ready. You can query purchases here.\n                System.out.println(&quot;Billing client ready&quot;);\n                listPremium();\n            } else System.out.println(&quot;Billing client NOT ready&quot;);\n        }\n        @Override\n        public void onBillingServiceDisconnected() {\n            // Try to restart the connection on the next request to\n            // Google Play by calling the startConnection() method.\n            System.out.println(&quot;Billing service disconnected&quot;);\n        }\n    });\n}\n\nprivate void listPremium() {\n    premiumDBRef.addListenerForSingleValueEvent(new ValueEventListener() {\n        @Override\n        public void onDataChange(@NonNull DataSnapshot snapshot) {\n            cProductsList.clear();\n            for (DataSnapshot snap: snapshot.getChildren()) {\n                Products products = snap.getValue(Products.class);\n                String sku;\n                String name;\n                String url;\n                if (products != null) {\n                    sku = products.getProductId();\n                    name = products.getName();\n                    url = products.getUrl();\n\n                    if(sku != null) {\n                        skuList.add(sku);\n                    }\n\n                } else {\n                    System.out.println(&quot;Product does not exist!&quot;);\n                }\n            }\n\n            for(String sku : skuList) {\n                productList.add(\n                        QueryProductDetailsParams.Product.newBuilder()\n                                .setProductId(sku)\n                                .setProductType(BillingClient.ProductType.INAPP)\n                                .build()\n                );\n\n            }\n\n            if (!productList.isEmpty()) {\n                querySkuDetails(productList);\n            } else {\n                System.out.println(&quot;No products available&quot;);\n            }\n        }\n\n        @Override\n        public void onCancelled(@NonNull DatabaseError error) {\n\n        }\n    });\n}\n\npublic void querySkuDetails(List&lt;QueryProductDetailsParams.Product&gt; productList) {\n    QueryProductDetailsParams params = QueryProductDetailsParams.newBuilder()\n            .setProductList(productList)\n            .build();\n\n    billingClient.queryProductDetailsAsync(\n            params,\n            (billingResult, productDetailsList) -&gt; {\n                // check billingResult\n                // process returned productDetailsList\n                if (billingResult.getResponseCode() != BillingClient.BillingResponseCode.OK) {\n                    System.out.printf(Locale.ENGLISH, &quot;Unable to query sku details: %d - %s%n&quot;, billingResult.getResponseCode(), billingResult.getDebugMessage());\n                } else {\n                    for (ProductDetails details: productDetailsList) {\n                        prodDetailsList.add(details);\n                    }\n\n                    displayPremiumData();\n                }\n            });\n\n}\n</code></pre>\n<p>Note: When I run the code, there are no errors. The issue is that the RecyclerView is not working consistently as intended.\nI have been trying to get this to work but I have been stuck for days now and I would really appreciate some help please!</p>\n"},{"tags":["java","eclipse","nosuchmethoderror","ioutils"],"comments":[{"owner":{"account_id":3211603,"reputation":289297,"user_id":2711488,"display_name":"Holger"},"score":2,"creation_date":1661444481,"post_id":73490565,"comment_id":129779949,"body_markdown":"Maybe you shouldn’t use a third party library, just to obfuscate the expression `new byte[8192]` as `IOUtils.byteArray()`.","body":"Maybe you shouldn’t use a third party library, just to obfuscate the expression <code>new byte[8192]</code> as <code>IOUtils.byteArray()</code>."},{"owner":{"account_id":13796,"reputation":19353,"user_id":27905,"display_name":"nitind"},"score":1,"creation_date":1661451079,"post_id":73490565,"comment_id":129782128,"body_markdown":"Have you verified that the class in that jar has that method and signature?","body":"Have you verified that the class in that jar has that method and signature?"},{"owner":{"account_id":6747750,"reputation":1,"user_id":5198825,"display_name":"David Gauntt"},"score":0,"creation_date":1661456485,"post_id":73490565,"comment_id":129783700,"body_markdown":"The issue is that methods in Apache POI use IOUtils.byteArray; the only reason that I put it into setup() is to test the existence of byteArray().","body":"The issue is that methods in Apache POI use IOUtils.byteArray; the only reason that I put it into setup() is to test the existence of byteArray()."},{"owner":{"account_id":6747750,"reputation":1,"user_id":5198825,"display_name":"David Gauntt"},"score":0,"creation_date":1661457008,"post_id":73490565,"comment_id":129783825,"body_markdown":"I have verified that the jar file contains IOUtils.class, and that the sources jar file contains IOUtils.java, and that IOUtils.java contains byteArray().   I have imported the java file into my project, and it worked.  It looks like IOUtils.class may have been built from a different version of IOUtils.java; I will report this as a bug to Apache.","body":"I have verified that the jar file contains IOUtils.class, and that the sources jar file contains IOUtils.java, and that IOUtils.java contains byteArray().   I have imported the java file into my project, and it worked.  It looks like IOUtils.class may have been built from a different version of IOUtils.java; I will report this as a bug to Apache."},{"owner":{"account_id":2126257,"reputation":173,"user_id":2464822,"display_name":"beria"},"score":1,"creation_date":1669371560,"post_id":73490565,"comment_id":131631770,"body_markdown":"Hey @DavidGauntt I have run into the same issue now, did you find a work-around?","body":"Hey @DavidGauntt I have run into the same issue now, did you find a work-around?"}],"owner":{"account_id":6747750,"reputation":1,"user_id":5198825,"display_name":"David Gauntt"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1250,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1661454545,"creation_date":1661443098,"question_id":73490565,"body_markdown":"I am running a unit test in an Eclipse project, and when I run the following JUnit test\r\n\r\n\t\r\n    @Before\r\n\tpublic void setup() {\r\n\t\tfinal byte[] array = IOUtils.byteArray();\r\n\t\t...\r\n\t}\r\n\r\nI get the following error:\r\n\r\njava.lang.NoSuchMethodError: org.apache.commons.io.IOUtils.byteArray()[B\r\n\r\nI have included Apache commons-io 2.11.0 in my classpath:\r\n\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;classpath&gt;\r\n...\t\r\n\t&lt;classpathentry kind=&quot;var&quot; path=&quot;APACHE_IO/commons-io-2.11.0/commons-io-2.11.0.jar&quot;/&gt;\r\n...\t\r\n&lt;/classpath&gt;\r\n```\r\n\r\nWhat am I missing here?","title":"IOUtils.byteArray NoSuchMethodError in Eclipse","body":"<p>I am running a unit test in an Eclipse project, and when I run the following JUnit test</p>\n<pre><code>@Before\npublic void setup() {\n    final byte[] array = IOUtils.byteArray();\n    ...\n}\n</code></pre>\n<p>I get the following error:</p>\n<p>java.lang.NoSuchMethodError: org.apache.commons.io.IOUtils.byteArray()[B</p>\n<p>I have included Apache commons-io 2.11.0 in my classpath:</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;classpath&gt;\n... \n    &lt;classpathentry kind=&quot;var&quot; path=&quot;APACHE_IO/commons-io-2.11.0/commons-io-2.11.0.jar&quot;/&gt;\n... \n&lt;/classpath&gt;\n</code></pre>\n<p>What am I missing here?</p>\n"},{"tags":["java","spring","postgresql","jpa","haversine"],"comments":[{"owner":{"account_id":1085259,"reputation":78314,"user_id":1081110,"display_name":"Dawood ibn Kareem"},"score":1,"creation_date":1661282770,"post_id":73463910,"comment_id":129734161,"body_markdown":"What values are you giving the parameters when you get the error?","body":"What values are you giving the parameters when you get the error?"},{"owner":{"account_id":2767174,"reputation":263,"user_id":2382607,"accept_rate":33,"display_name":"TheWieand"},"score":0,"creation_date":1661285214,"post_id":73463910,"comment_id":129734878,"body_markdown":"48.297329 for latitude, 11.623280 for longitude and 66.0000 for distance","body":"48.297329 for latitude, 11.623280 for longitude and 66.0000 for distance"}],"answers":[{"tags":[],"owner":{"account_id":2767174,"reputation":263,"user_id":2382607,"accept_rate":33,"display_name":"TheWieand"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1661454466,"creation_date":1661454466,"answer_id":73492625,"question_id":73463910,"body_markdown":"I found another formula that works as expected:\r\n\r\n    111.045* DEGREES(ACOS(LEAST(1.0, COS(RADIANS(latpoint))\r\n                 * COS(RADIANS(latitude))\r\n                 * COS(RADIANS(longpoint) - RADIANS(longitude))\r\n                 + SIN(RADIANS(latpoint))\r\n                 * SIN(RADIANS(latitude)))))\r\nMaybe someone will find it useful :)","title":"Input is out of range while using haversine formula","body":"<p>I found another formula that works as expected:</p>\n<pre><code>111.045* DEGREES(ACOS(LEAST(1.0, COS(RADIANS(latpoint))\n             * COS(RADIANS(latitude))\n             * COS(RADIANS(longpoint) - RADIANS(longitude))\n             + SIN(RADIANS(latpoint))\n             * SIN(RADIANS(latitude)))))\n</code></pre>\n<p>Maybe someone will find it useful :)</p>\n"}],"owner":{"account_id":2767174,"reputation":263,"user_id":2382607,"accept_rate":33,"display_name":"TheWieand"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":201,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1661454466,"creation_date":1661281309,"question_id":73463910,"body_markdown":"I am trying to calculate the distance between several users based on their long/lat.\r\nI am using Spring JPA and PostgreSQL.\r\n\r\nThis is my Repository-class:\r\n\r\n    public interface UserWithCoordinateRepository extends JpaRepository&lt;UserWithCoordinate, UUID&gt; {\r\n\r\n    String HAVERSINE_FORMULA = &quot;(6371 * acos(cos(radians(?2)) * cos(radians(uwc.latitude)) *&quot; +\r\n        &quot; cos(radians(uwc.longitude) - radians(?1)) + sin(radians(?2)) * sin(radians(uwc.latitude))))&quot;;\r\n\r\n    @Query(&quot;SELECT uwc FROM UserWithCoordinate uwc WHERE &quot; + HAVERSINE_FORMULA + &quot; &lt; ?3 ORDER BY &quot; + HAVERSINE_FORMULA + &quot; DESC&quot;)\r\n    List&lt;UserWithCoordinate&gt; findByCoordinates(double longitude, double latitude, double distance, Pageable pageable);\r\n    }\r\n\r\nBut I keep getting this error: org.postgresql.util.PSQLException: ERROR: Input is out of range!\r\n\r\nI already went through these articles: \r\n\r\n - https://stackoverflow.com/questions/56146725/postgresql-input-is-out-of-range\r\n - https://stackoverflow.com/questions/29576674/spring-query-haversine-formula-with-pageable\r\n\r\nBut I am not able to fix my issue.","title":"Input is out of range while using haversine formula","body":"<p>I am trying to calculate the distance between several users based on their long/lat.\nI am using Spring JPA and PostgreSQL.</p>\n<p>This is my Repository-class:</p>\n<pre><code>public interface UserWithCoordinateRepository extends JpaRepository&lt;UserWithCoordinate, UUID&gt; {\n\nString HAVERSINE_FORMULA = &quot;(6371 * acos(cos(radians(?2)) * cos(radians(uwc.latitude)) *&quot; +\n    &quot; cos(radians(uwc.longitude) - radians(?1)) + sin(radians(?2)) * sin(radians(uwc.latitude))))&quot;;\n\n@Query(&quot;SELECT uwc FROM UserWithCoordinate uwc WHERE &quot; + HAVERSINE_FORMULA + &quot; &lt; ?3 ORDER BY &quot; + HAVERSINE_FORMULA + &quot; DESC&quot;)\nList&lt;UserWithCoordinate&gt; findByCoordinates(double longitude, double latitude, double distance, Pageable pageable);\n}\n</code></pre>\n<p>But I keep getting this error: org.postgresql.util.PSQLException: ERROR: Input is out of range!</p>\n<p>I already went through these articles:</p>\n<ul>\n<li><a href=\"https://stackoverflow.com/questions/56146725/postgresql-input-is-out-of-range\">postgresql: input is out of range</a></li>\n<li><a href=\"https://stackoverflow.com/questions/29576674/spring-query-haversine-formula-with-pageable\">Spring Query: Haversine formula with pageable</a></li>\n</ul>\n<p>But I am not able to fix my issue.</p>\n"},{"tags":["java","interface"],"comments":[{"owner":{"account_id":45934,"reputation":203659,"user_id":135589,"accept_rate":100,"display_name":"Jesper"},"score":1,"creation_date":1661453150,"post_id":73492143,"comment_id":129782769,"body_markdown":"You say &quot;`Optional` can be a subtype of `MyOpt`&quot;, but it is not defined that way. Just because `Optional` has the same methods as `MyOpt`, does not mean you can treat `Optional` as if it is a subtype of `MyOpt`. To answer your question: &quot;How can I use `Optional` as an implementation of `MyOpt`?&quot;, the answer is: you cannot. Java simply does not support [structural typing](https://en.wikipedia.org/wiki/Structural_type_system).","body":"You say &quot;<code>Optional</code> can be a subtype of <code>MyOpt</code>&quot;, but it is not defined that way. Just because <code>Optional</code> has the same methods as <code>MyOpt</code>, does not mean you can treat <code>Optional</code> as if it is a subtype of <code>MyOpt</code>. To answer your question: &quot;How can I use <code>Optional</code> as an implementation of <code>MyOpt</code>?&quot;, the answer is: you cannot. Java simply does not support <a href=\"https://en.wikipedia.org/wiki/Structural_type_system\" rel=\"nofollow noreferrer\">structural typing</a>."},{"owner":{"account_id":13459822,"reputation":1807,"user_id":9712270,"display_name":"magicmn"},"score":1,"creation_date":1661455592,"post_id":73492143,"comment_id":129783437,"body_markdown":"The java solution to this is to use a optional wrapper that implements `MyOpt`.","body":"The java solution to this is to use a optional wrapper that implements <code>MyOpt</code>."}],"answers":[{"tags":[],"owner":{"account_id":465573,"reputation":192694,"user_id":869736,"accept_rate":82,"display_name":"Louis Wasserman"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1661454226,"creation_date":1661454226,"answer_id":73492577,"question_id":73492143,"body_markdown":"&gt; How can I use Optional as an implementation of MyOpt?\r\n\r\nYou cannot.\r\n\r\n`Optional` is a `final class` defined in the JDK.  Just because you share the same method names and types, does not mean you can treat your class as related to `Optional` in any way.","title":"Implicit interface implementation","body":"<blockquote>\n<p>How can I use Optional as an implementation of MyOpt?</p>\n</blockquote>\n<p>You cannot.</p>\n<p><code>Optional</code> is a <code>final class</code> defined in the JDK.  Just because you share the same method names and types, does not mean you can treat your class as related to <code>Optional</code> in any way.</p>\n"}],"owner":{"account_id":23886751,"reputation":496,"user_id":17886849,"display_name":"Max Smirnov"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":93,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1661454226,"creation_date":1661451818,"question_id":73492143,"body_markdown":"I have the following `MyOpt` interface:\r\n\r\n~~~java\r\npublic interface MyOpt&lt;T&gt; {\r\n    T get();\r\n    boolean isPresent();\r\n}\r\n~~~\r\n\r\nAnd the class method, that returns one of `MyOpt` implementations:\r\n\r\n~~~java\r\nprivate MyOpt&lt;String&gt; read() { ... }\r\n~~~\r\n\r\nAt the same time, `Optional` has the same methods and signatures and can be `MyOpt` subtype. But when refactor class method to return `Optional` like this:\r\n\r\n~~~java\r\nprivate &lt;X extends MyOpt&lt;String&gt;&gt; X read() {\r\n    Optional&lt;String&gt; empty = Optional.empty();\r\n    return empty;\r\n}\r\n~~~\r\n\r\nIntelliJ shows this error:\r\n\r\n~~~plain\r\nRequired type: X\r\n\r\nProvided: Optional&lt;java.lang.String&gt;\r\n~~~\r\n\r\nHow can I use `Optional` as an implementation of `MyOpt`?","title":"Implicit interface implementation","body":"<p>I have the following <code>MyOpt</code> interface:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public interface MyOpt&lt;T&gt; {\n    T get();\n    boolean isPresent();\n}\n</code></pre>\n<p>And the class method, that returns one of <code>MyOpt</code> implementations:</p>\n<pre class=\"lang-java prettyprint-override\"><code>private MyOpt&lt;String&gt; read() { ... }\n</code></pre>\n<p>At the same time, <code>Optional</code> has the same methods and signatures and can be <code>MyOpt</code> subtype. But when refactor class method to return <code>Optional</code> like this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>private &lt;X extends MyOpt&lt;String&gt;&gt; X read() {\n    Optional&lt;String&gt; empty = Optional.empty();\n    return empty;\n}\n</code></pre>\n<p>IntelliJ shows this error:</p>\n<pre><code>Required type: X\n\nProvided: Optional&lt;java.lang.String&gt;\n</code></pre>\n<p>How can I use <code>Optional</code> as an implementation of <code>MyOpt</code>?</p>\n"},{"tags":["java","android","location"],"comments":[{"owner":{"account_id":5981137,"reputation":17317,"user_id":4700156,"accept_rate":64,"display_name":"Rohit Singh"},"score":0,"creation_date":1676393574,"post_id":73331994,"comment_id":133126413,"body_markdown":"It seems like an internet issue. To check that open Google Map installed in the emulator. If you dont see it working then it could be that. I would create a new emulator and try with that.","body":"It seems like an internet issue. To check that open Google Map installed in the emulator. If you dont see it working then it could be that. I would create a new emulator and try with that."}],"answers":[{"tags":[],"owner":{"account_id":16265081,"reputation":11,"user_id":11745406,"display_name":"ishtiaque pial"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1661453998,"creation_date":1661453998,"answer_id":73492544,"question_id":73331994,"body_markdown":"Just go to the Emulator controls (Three dots menu) and in the Location tab, pin any location in the map and click Set Location.\r\n\r\nThen verify if you received the location you were expecting in your app.","title":"LocationServices.API is not available on this device","body":"<p>Just go to the Emulator controls (Three dots menu) and in the Location tab, pin any location in the map and click Set Location.</p>\n<p>Then verify if you received the location you were expecting in your app.</p>\n"}],"owner":{"account_id":15069196,"reputation":704,"user_id":10875311,"display_name":"Akash Jain"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3815,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1661453998,"creation_date":1660296425,"question_id":73331994,"body_markdown":"I&#39;m calling a location service api from my android device, the application has my location access but when i run my app, I get the following error\r\n\r\n```java\r\n    com.google.android.gms.tasks.RuntimeExecutionException: com.google.android.gms.common.api.ApiException: 17: API: LocationServices.API is not available on this device. Connection failed with: ConnectionResult{statusCode=SERVICE_INVALID, resolution=null, message=null}\r\n        at com.google.android.gms.tasks.zzw.getResult(com.google.android.gms:play-services-tasks@@18.0.1:3)\r\n        at com.innoviti.sroconnect.MainActivity.lambda$getCurrentLocation$13$com-innoviti-sroconnect-MainActivity(MainActivity.java:648)\r\n        at com.innoviti.sroconnect.MainActivity$$ExternalSyntheticLambda11.onComplete(Unknown Source:2)\r\n        at com.google.android.gms.tasks.zzi.run(com.google.android.gms:play-services-tasks@@18.0.1:1)\r\n        at android.os.Handler.handleCallback(Handler.java:938)\r\n        at android.os.Handler.dispatchMessage(Handler.java:99)\r\n        at android.os.Looper.loop(Looper.java:223)\r\n        at android.app.ActivityThread.main(ActivityThread.java:7656)\r\n        at java.lang.reflect.Method.invoke(Native Method)\r\n        at com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:592)\r\n        at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:947)\r\n     Caused by: com.google.android.gms.common.api.ApiException: 17: API: LocationServices.API is not available on this device. Connection failed with: ConnectionResult{statusCode=SERVICE_INVALID, resolution=null, message=null}\r\n        at com.google.android.gms.common.internal.ApiExceptionUtil.fromStatus(com.google.android.gms:play-services-base@@18.0.1:3)\r\n        at com.google.android.gms.common.api.internal.ApiExceptionMapper.getException(com.google.android.gms:play-services-base@@18.0.1:1)\r\n        at com.google.android.gms.common.api.internal.zag.zad(com.google.android.gms:play-services-base@@18.0.1:1)\r\n        at com.google.android.gms.common.api.internal.zabq.zaE(com.google.android.gms:play-services-base@@18.0.1:7)\r\n        at com.google.android.gms.common.api.internal.zabq.zaD(com.google.android.gms:play-services-base@@18.0.1:2)\r\n        at com.google.android.gms.common.api.internal.zabq.zai(Unknown Source:0)\r\n        at com.google.android.gms.common.api.internal.GoogleApiManager.handleMessage(com.google.android.gms:play-services-base@@18.0.1:58)\r\n        at android.os.Handler.dispatchMessage(Handler.java:102)\r\n        at android.os.Looper.loop(Looper.java:223)\r\n        at android.os.HandlerThread.run(HandlerThread.java:67)\r\n```\r\nAndroid skd Version : 30\r\ndevice : Plixel 3 XL (virtual)\r\n\r\nwhat could be the cause and how do i resolve this?\r\n","title":"LocationServices.API is not available on this device","body":"<p>I'm calling a location service api from my android device, the application has my location access but when i run my app, I get the following error</p>\n<pre class=\"lang-java prettyprint-override\"><code>    com.google.android.gms.tasks.RuntimeExecutionException: com.google.android.gms.common.api.ApiException: 17: API: LocationServices.API is not available on this device. Connection failed with: ConnectionResult{statusCode=SERVICE_INVALID, resolution=null, message=null}\n        at com.google.android.gms.tasks.zzw.getResult(com.google.android.gms:play-services-tasks@@18.0.1:3)\n        at com.innoviti.sroconnect.MainActivity.lambda$getCurrentLocation$13$com-innoviti-sroconnect-MainActivity(MainActivity.java:648)\n        at com.innoviti.sroconnect.MainActivity$$ExternalSyntheticLambda11.onComplete(Unknown Source:2)\n        at com.google.android.gms.tasks.zzi.run(com.google.android.gms:play-services-tasks@@18.0.1:1)\n        at android.os.Handler.handleCallback(Handler.java:938)\n        at android.os.Handler.dispatchMessage(Handler.java:99)\n        at android.os.Looper.loop(Looper.java:223)\n        at android.app.ActivityThread.main(ActivityThread.java:7656)\n        at java.lang.reflect.Method.invoke(Native Method)\n        at com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:592)\n        at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:947)\n     Caused by: com.google.android.gms.common.api.ApiException: 17: API: LocationServices.API is not available on this device. Connection failed with: ConnectionResult{statusCode=SERVICE_INVALID, resolution=null, message=null}\n        at com.google.android.gms.common.internal.ApiExceptionUtil.fromStatus(com.google.android.gms:play-services-base@@18.0.1:3)\n        at com.google.android.gms.common.api.internal.ApiExceptionMapper.getException(com.google.android.gms:play-services-base@@18.0.1:1)\n        at com.google.android.gms.common.api.internal.zag.zad(com.google.android.gms:play-services-base@@18.0.1:1)\n        at com.google.android.gms.common.api.internal.zabq.zaE(com.google.android.gms:play-services-base@@18.0.1:7)\n        at com.google.android.gms.common.api.internal.zabq.zaD(com.google.android.gms:play-services-base@@18.0.1:2)\n        at com.google.android.gms.common.api.internal.zabq.zai(Unknown Source:0)\n        at com.google.android.gms.common.api.internal.GoogleApiManager.handleMessage(com.google.android.gms:play-services-base@@18.0.1:58)\n        at android.os.Handler.dispatchMessage(Handler.java:102)\n        at android.os.Looper.loop(Looper.java:223)\n        at android.os.HandlerThread.run(HandlerThread.java:67)\n</code></pre>\n<p>Android skd Version : 30\ndevice : Plixel 3 XL (virtual)</p>\n<p>what could be the cause and how do i resolve this?</p>\n"},{"tags":["java","spring","spring-aop"],"answers":[{"tags":[],"owner":{"account_id":20336792,"reputation":554,"user_id":14917277,"display_name":"anurag-dhamala"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1661448413,"creation_date":1661448413,"answer_id":73491531,"question_id":73491131,"body_markdown":"\r\n\r\n    @AfterReturning(value = &quot;@annotation(CustomAnnotation)&quot;, argNames = &quot;customAnnotation, jp&quot;)\r\n    public void afterReturning(JoinPoint jp, CustomAnnotation customAnnotation) {\r\n         CustomAnnotation annotation = customAnnotation;\r\n        List&lt;Parameter&gt; parameterList = new ArrayList&lt;&gt;();\r\n\r\n            if (jp.getSignature() instanceof MethodSignature) {\r\n                MethodSignature signature =\r\n                        (MethodSignature) jp.getSignature();\r\n                Method method = signature.getMethod();\r\n                anno = method.getAnnotation(CustomAnnotation.class);\r\n\r\n                Parameter[] params = method.getParameters();\r\n                for (Parameter param : params) {\r\n                    try {\r\n                        if(param.getAnnotation(CustomValue.class) !=null){\r\n                           parameterList.add(param);\r\n                       }\r\n                    } catch (Exception e) {\r\n                        //do nothing\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n\r\nYou should now get the list of parameters annotated with @CustomValue. This exact code may not work while copy-paste, but you should get the idea.","title":"Get annotated param value from annotated method using Spring AOP","body":"<pre><code>@AfterReturning(value = &quot;@annotation(CustomAnnotation)&quot;, argNames = &quot;customAnnotation, jp&quot;)\npublic void afterReturning(JoinPoint jp, CustomAnnotation customAnnotation) {\n     CustomAnnotation annotation = customAnnotation;\n    List&lt;Parameter&gt; parameterList = new ArrayList&lt;&gt;();\n\n        if (jp.getSignature() instanceof MethodSignature) {\n            MethodSignature signature =\n                    (MethodSignature) jp.getSignature();\n            Method method = signature.getMethod();\n            anno = method.getAnnotation(CustomAnnotation.class);\n\n            Parameter[] params = method.getParameters();\n            for (Parameter param : params) {\n                try {\n                    if(param.getAnnotation(CustomValue.class) !=null){\n                       parameterList.add(param);\n                   }\n                } catch (Exception e) {\n                    //do nothing\n                }\n            }\n        }\n    }\n</code></pre>\n<p>You should now get the list of parameters annotated with @CustomValue. This exact code may not work while copy-paste, but you should get the idea.</p>\n"},{"tags":[],"owner":{"account_id":351668,"reputation":83,"user_id":688291,"accept_rate":60,"display_name":"user688291"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1661453644,"creation_date":1661453644,"answer_id":73492485,"question_id":73491131,"body_markdown":"Maybe there is a better way, but I solved this by using following:\r\n\r\n\t\r\n    @AfterReturning(value = &quot;@annotation(customAnnotation)&quot;, argNames = &quot;customAnnotation, jp&quot;)\r\n    public void afterReturning(JoinPoint jp, CustomAnnotation customAnnotation) {\r\n        MethodSignature signature = (MethodSignature) jp.getSignature();\r\n        Parameter[] parameters = signature.getMethod().getParameters();\r\n        Object[] args = jp.getArgs();\r\n    \r\n        for (int i = 0; i &lt; args.length; ++i) {\r\n    \t\tif (parameters[i].isAnnotationPresent(CustomValue.class)) {\r\n    \t\t    Object paramValue = args[i];\r\n    \t    }\r\n        }\r\n    }","title":"Get annotated param value from annotated method using Spring AOP","body":"<p>Maybe there is a better way, but I solved this by using following:</p>\n<pre><code>@AfterReturning(value = &quot;@annotation(customAnnotation)&quot;, argNames = &quot;customAnnotation, jp&quot;)\npublic void afterReturning(JoinPoint jp, CustomAnnotation customAnnotation) {\n    MethodSignature signature = (MethodSignature) jp.getSignature();\n    Parameter[] parameters = signature.getMethod().getParameters();\n    Object[] args = jp.getArgs();\n\n    for (int i = 0; i &lt; args.length; ++i) {\n        if (parameters[i].isAnnotationPresent(CustomValue.class)) {\n            Object paramValue = args[i];\n        }\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":351668,"reputation":83,"user_id":688291,"accept_rate":60,"display_name":"user688291"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":807,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":73492485,"answer_count":2,"score":0,"last_activity_date":1661453644,"creation_date":1661446194,"question_id":73491131,"body_markdown":"I have a program written in Java 11 with two custom annotation. One on Method level and one on Parameter level.\r\nI`m using Spring AOP to act on methods that use my Custom annotations. But I have not found a way to get the value ouf of an optional annotation that is on Parameter level.\r\n\r\n    @CustomAnnotation\r\n    public void myMethod(@CustomValue String param1, int param2) {\r\n        ...\r\n    }\r\n    \r\n    @AfterReturning(value = &quot;@annotation(customAnnotation)&quot;, argNames = &quot;customAnnotation, jp&quot;)\r\n    public void afterReturning(JoinPoint jp, CustomAnnotation customAnnotation) {\r\n        ...\r\n    }\r\nThe program works well with my @CustomAnnotation, but I have problems to get the value out of parameters that is annotated with @CustomValue. @CustomValue is useless if the method is not annotated with @CustomAnnotation. And the number of parameters that can be annotated with @CustomValue is 0 or more.\r\n\r\nHow can I get the values from the parameters that is annotated with @CustomValue on a method that is annotated with @CustomAnnotation?","title":"Get annotated param value from annotated method using Spring AOP","body":"<p>I have a program written in Java 11 with two custom annotation. One on Method level and one on Parameter level.\nI`m using Spring AOP to act on methods that use my Custom annotations. But I have not found a way to get the value ouf of an optional annotation that is on Parameter level.</p>\n<pre><code>@CustomAnnotation\npublic void myMethod(@CustomValue String param1, int param2) {\n    ...\n}\n\n@AfterReturning(value = &quot;@annotation(customAnnotation)&quot;, argNames = &quot;customAnnotation, jp&quot;)\npublic void afterReturning(JoinPoint jp, CustomAnnotation customAnnotation) {\n    ...\n}\n</code></pre>\n<p>The program works well with my @CustomAnnotation, but I have problems to get the value out of parameters that is annotated with @CustomValue. @CustomValue is useless if the method is not annotated with @CustomAnnotation. And the number of parameters that can be annotated with @CustomValue is 0 or more.</p>\n<p>How can I get the values from the parameters that is annotated with @CustomValue on a method that is annotated with @CustomAnnotation?</p>\n"},{"tags":["java","maven","dependencies","repository"],"comments":[{"owner":{"account_id":4181375,"reputation":5091,"user_id":3426309,"display_name":"Andrey B. Panfilov"},"score":0,"creation_date":1661408880,"post_id":73479191,"comment_id":129766130,"body_markdown":"would you mind providing reproducible example? I recently have spent some time on resolving maven puzzles and may help. Hint: `The dependency is in my local repo, but wasn&#39;t downloaded from central` is caused by &quot;enhanced local repository&quot; misfeature and could be resolved by providing `-Dmaven.legacyLocalRepo=true` system property","body":"would you mind providing reproducible example? I recently have spent some time on resolving maven puzzles and may help. Hint: <code>The dependency is in my local repo, but wasn&#39;t downloaded from central</code> is caused by &quot;enhanced local repository&quot; misfeature and could be resolved by providing <code>-Dmaven.legacyLocalRepo=true</code> system property"},{"owner":{"account_id":18252657,"reputation":33,"user_id":13287309,"display_name":"StudioCode"},"score":0,"creation_date":1661449143,"post_id":73479191,"comment_id":129781489,"body_markdown":"@AndreyB.Panfilov Updated the issue with a reproducible example. Also added some more info: This only seems to happen with SNAPSHOT dependencies and the resolver doesn&#39;t pull from all repositories, but only those which didn&#39;t have the artifact in the previous run.\n\nIs it possible to use the system properties you mentioned with the maven resolver api? I tried setting them with ``System.setProperty()`` and ``session.setSystemProperty``, but it seems to be ignored. (Also tried it with the offline property whose effects should be clearly noticeable)","body":"@AndreyB.Panfilov Updated the issue with a reproducible example. Also added some more info: This only seems to happen with SNAPSHOT dependencies and the resolver doesn&#39;t pull from all repositories, but only those which didn&#39;t have the artifact in the previous run.  Is it possible to use the system properties you mentioned with the maven resolver api? I tried setting them with <code>System.setProperty()</code> and <code>session.setSystemProperty</code>, but it seems to be ignored. (Also tried it with the offline property whose effects should be clearly noticeable)"}],"answers":[{"tags":[],"owner":{"account_id":4181375,"reputation":5091,"user_id":3426309,"display_name":"Andrey B. Panfilov"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1661453493,"creation_date":1661453493,"answer_id":73492450,"question_id":73479191,"body_markdown":"Well...\r\n\r\n```java\r\n// this one prevents maven from downloading metadata.xml\r\n// if I understand properly it tries to find maven-metadata-0.xml\r\n// in local repository and in case of failure tries remote repositories\r\nsession.setResolutionErrorPolicy(new SimpleResolutionErrorPolicy(true, false));\r\n\r\n// this one prevents maven from creating _remote.repositories files\r\n// in local repository, yours: in my local repo, but wasn&#39;t downloaded from central\r\nsession.setLocalRepositoryManager(repoSystem.newLocalRepositoryManager(session, new LocalRepository(LOCAL_REPO_DIR, &quot;simple&quot;)));\r\n```","title":"Maven Resolver always downloads maven-metadata.xml from remote repositories","body":"<p>Well...</p>\n<pre class=\"lang-java prettyprint-override\"><code>// this one prevents maven from downloading metadata.xml\n// if I understand properly it tries to find maven-metadata-0.xml\n// in local repository and in case of failure tries remote repositories\nsession.setResolutionErrorPolicy(new SimpleResolutionErrorPolicy(true, false));\n\n// this one prevents maven from creating _remote.repositories files\n// in local repository, yours: in my local repo, but wasn't downloaded from central\nsession.setLocalRepositoryManager(repoSystem.newLocalRepositoryManager(session, new LocalRepository(LOCAL_REPO_DIR, &quot;simple&quot;)));\n</code></pre>\n"}],"owner":{"account_id":18252657,"reputation":33,"user_id":13287309,"display_name":"StudioCode"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":261,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":73492450,"answer_count":1,"score":2,"last_activity_date":1661453493,"creation_date":1661373364,"question_id":73479191,"body_markdown":"I am currently working on a project that has a built-in library loader for maven dependencies.\r\n\r\nThis is my current code:\r\n```java\r\npublic class ResolverTest {\r\n    \r\n    private static final File LOCAL_REPO_DIR = new File(&quot;localRepo&quot;);\r\n    \r\n    public static void main(String[] args) throws MalformedURLException, DependencyResolutionException {\r\n        downloadLibraries(\r\n            Arrays.asList(\r\n                &quot;https://repo1.maven.org/maven2/&quot;,\r\n                &quot;https://repository.apache.org/content/repositories/snapshots/&quot;\r\n            ),\r\n            List.of(&quot;commons-io:commons-io:2.12.0-SNAPSHOT&quot;)\r\n        );\r\n    }\r\n    \r\n    public static List&lt;URL&gt; downloadLibraries(List&lt;String&gt; repositories, List&lt;String&gt; libraries) throws DependencyResolutionException, MalformedURLException {\r\n        // setup connection\r\n        var locator = MavenRepositorySystemUtils.newServiceLocator();\r\n        locator.addService(RepositoryConnectorFactory.class, BasicRepositoryConnectorFactory.class);\r\n        locator.addService(TransporterFactory.class, HttpTransporterFactory.class);\r\n        \r\n        var repoSystem = locator.getService(RepositorySystem.class);\r\n        \r\n        var session = MavenRepositorySystemUtils.newSession();\r\n        session.setChecksumPolicy(RepositoryPolicy.CHECKSUM_POLICY_FAIL);\r\n        session.setUpdatePolicy(RepositoryPolicy.UPDATE_POLICY_NEVER);\r\n        session.setLocalRepositoryManager(repoSystem.newLocalRepositoryManager(session, new LocalRepository(LOCAL_REPO_DIR)));\r\n        session.setTransferListener(new LoggingTransferListener());\r\n        session.setReadOnly();\r\n        \r\n        List&lt;RemoteRepository&gt; remoteRepos = new ArrayList&lt;&gt;();\r\n        \r\n        var repoIdx = 0;\r\n        for (var repoUrl : repositories) {\r\n            remoteRepos.add(new RemoteRepository.Builder(String.valueOf(repoIdx), &quot;default&quot;, repoUrl).build());\r\n            repoIdx++;\r\n        }\r\n        \r\n        remoteRepos = repoSystem.newResolutionRepositories(session, remoteRepos);\r\n        \r\n        // download libraries\r\n        var request = new DependencyRequest(\r\n            new CollectRequest(\r\n                (Dependency) null,\r\n                libraries.stream().map(library -&gt;\r\n                    new Dependency(new DefaultArtifact(library), null)\r\n                ).toList(),\r\n                remoteRepos\r\n            ),\r\n            null\r\n        );\r\n        \r\n        var results = repoSystem.resolveDependencies(session, request).getArtifactResults();\r\n        \r\n        var urls = new ArrayList&lt;URL&gt;();\r\n        for (var result : results) {\r\n            urls.add(result.getArtifact().getFile().toURI().toURL());\r\n        }\r\n        \r\n        return urls;\r\n    }\r\n    \r\n    private static class LoggingTransferListener extends AbstractTransferListener {\r\n        \r\n        @Override\r\n        public void transferInitiated(TransferEvent event) {\r\n            System.out.println(&quot;Init transfer &quot; + event.getResource().getRepositoryUrl() + event.getResource().getResourceName());\r\n        }\r\n        \r\n    }\r\n    \r\n}\r\n```\r\n\r\n```kotlin\r\nimplementation(&quot;org.apache.maven:maven-resolver-provider:3.8.6&quot;)\r\nimplementation(&quot;org.apache.maven.resolver:maven-resolver-connector-basic:1.7.3&quot;)\r\nimplementation(&quot;org.apache.maven.resolver:maven-resolver-transport-http:1.8.2&quot;)\r\n```\r\n\r\nThe issue I&#39;m experiencing is that every time the program is restarted and the library loader is called again, the resolver tries to download the ``maven-metadata.xml`` file of the dependency from all repositories that didn&#39;t have it in the previous attempt.\r\n\r\nThis only seems to happen with snapshot dependencies.\r\n\r\nIn the example above I&#39;m also using ``RepositoryPolicy.UPDATE_POLICY_NEVER``. If it is set to ``RepositoryPolicy.UPDATE_POLICY_ALWAYS``, the resolver pulls the metadata from all repositories (like it should).\r\nSo why is it still pulling from the other repos, even if ``UPDATE_POLICY_NEVER`` is set?\r\n\r\nSetting the session to offline mode (``session.setOffline(true);``) also doesn&#39;t work: The maven resolver throws a DependencyResolutionException: `org.eclipse.aether.resolution.DependencyResolutionException: Cannot access central (https://repo.maven.apache.org/maven2) in offline mode and the artifact (path to artifact) has not been downloaded from it before.` (The dependency is in my local repo, but wasn&#39;t downloaded from central)","title":"Maven Resolver always downloads maven-metadata.xml from remote repositories","body":"<p>I am currently working on a project that has a built-in library loader for maven dependencies.</p>\n<p>This is my current code:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class ResolverTest {\n    \n    private static final File LOCAL_REPO_DIR = new File(&quot;localRepo&quot;);\n    \n    public static void main(String[] args) throws MalformedURLException, DependencyResolutionException {\n        downloadLibraries(\n            Arrays.asList(\n                &quot;https://repo1.maven.org/maven2/&quot;,\n                &quot;https://repository.apache.org/content/repositories/snapshots/&quot;\n            ),\n            List.of(&quot;commons-io:commons-io:2.12.0-SNAPSHOT&quot;)\n        );\n    }\n    \n    public static List&lt;URL&gt; downloadLibraries(List&lt;String&gt; repositories, List&lt;String&gt; libraries) throws DependencyResolutionException, MalformedURLException {\n        // setup connection\n        var locator = MavenRepositorySystemUtils.newServiceLocator();\n        locator.addService(RepositoryConnectorFactory.class, BasicRepositoryConnectorFactory.class);\n        locator.addService(TransporterFactory.class, HttpTransporterFactory.class);\n        \n        var repoSystem = locator.getService(RepositorySystem.class);\n        \n        var session = MavenRepositorySystemUtils.newSession();\n        session.setChecksumPolicy(RepositoryPolicy.CHECKSUM_POLICY_FAIL);\n        session.setUpdatePolicy(RepositoryPolicy.UPDATE_POLICY_NEVER);\n        session.setLocalRepositoryManager(repoSystem.newLocalRepositoryManager(session, new LocalRepository(LOCAL_REPO_DIR)));\n        session.setTransferListener(new LoggingTransferListener());\n        session.setReadOnly();\n        \n        List&lt;RemoteRepository&gt; remoteRepos = new ArrayList&lt;&gt;();\n        \n        var repoIdx = 0;\n        for (var repoUrl : repositories) {\n            remoteRepos.add(new RemoteRepository.Builder(String.valueOf(repoIdx), &quot;default&quot;, repoUrl).build());\n            repoIdx++;\n        }\n        \n        remoteRepos = repoSystem.newResolutionRepositories(session, remoteRepos);\n        \n        // download libraries\n        var request = new DependencyRequest(\n            new CollectRequest(\n                (Dependency) null,\n                libraries.stream().map(library -&gt;\n                    new Dependency(new DefaultArtifact(library), null)\n                ).toList(),\n                remoteRepos\n            ),\n            null\n        );\n        \n        var results = repoSystem.resolveDependencies(session, request).getArtifactResults();\n        \n        var urls = new ArrayList&lt;URL&gt;();\n        for (var result : results) {\n            urls.add(result.getArtifact().getFile().toURI().toURL());\n        }\n        \n        return urls;\n    }\n    \n    private static class LoggingTransferListener extends AbstractTransferListener {\n        \n        @Override\n        public void transferInitiated(TransferEvent event) {\n            System.out.println(&quot;Init transfer &quot; + event.getResource().getRepositoryUrl() + event.getResource().getResourceName());\n        }\n        \n    }\n    \n}\n</code></pre>\n<pre class=\"lang-kotlin prettyprint-override\"><code>implementation(&quot;org.apache.maven:maven-resolver-provider:3.8.6&quot;)\nimplementation(&quot;org.apache.maven.resolver:maven-resolver-connector-basic:1.7.3&quot;)\nimplementation(&quot;org.apache.maven.resolver:maven-resolver-transport-http:1.8.2&quot;)\n</code></pre>\n<p>The issue I'm experiencing is that every time the program is restarted and the library loader is called again, the resolver tries to download the <code>maven-metadata.xml</code> file of the dependency from all repositories that didn't have it in the previous attempt.</p>\n<p>This only seems to happen with snapshot dependencies.</p>\n<p>In the example above I'm also using <code>RepositoryPolicy.UPDATE_POLICY_NEVER</code>. If it is set to <code>RepositoryPolicy.UPDATE_POLICY_ALWAYS</code>, the resolver pulls the metadata from all repositories (like it should).\nSo why is it still pulling from the other repos, even if <code>UPDATE_POLICY_NEVER</code> is set?</p>\n<p>Setting the session to offline mode (<code>session.setOffline(true);</code>) also doesn't work: The maven resolver throws a DependencyResolutionException: <code>org.eclipse.aether.resolution.DependencyResolutionException: Cannot access central (https://repo.maven.apache.org/maven2) in offline mode and the artifact (path to artifact) has not been downloaded from it before.</code> (The dependency is in my local repo, but wasn't downloaded from central)</p>\n"},{"tags":["java","maven","google-cloud-dataflow"],"comments":[{"owner":{"account_id":1874246,"reputation":1390,"user_id":1695821,"display_name":"Bruno Volpato"},"score":1,"creation_date":1661457535,"post_id":73492436,"comment_id":129783965,"body_markdown":"Do you need `google-cloud-dataflow-java-sdk-all`? Sounds like that is a really old dependency, which might be bringing wrong versions of asm/cglib.","body":"Do you need <code>google-cloud-dataflow-java-sdk-all</code>? Sounds like that is a really old dependency, which might be bringing wrong versions of asm/cglib."},{"owner":{"account_id":18604807,"reputation":75,"user_id":13558695,"display_name":"Ben Delany"},"score":1,"creation_date":1661460304,"post_id":73492436,"comment_id":129784652,"body_markdown":"I think you figured it out, thank you! I removed the dependency and got past that initial error","body":"I think you figured it out, thank you! I removed the dependency and got past that initial error"},{"owner":{"account_id":16083652,"reputation":636,"user_id":11608928,"display_name":"Israel Herraiz"},"score":0,"creation_date":1662055449,"post_id":73492436,"comment_id":129923999,"body_markdown":"If you are not using the template as template, remove the `ValueProvider` and just use the plain type wrapped by the `ValueProvider`. Value providers are futures that were handy for templates, as the java code is executed when the template is created, and the values of the options are only available at runtime.","body":"If you are not using the template as template, remove the <code>ValueProvider</code> and just use the plain type wrapped by the <code>ValueProvider</code>. Value providers are futures that were handy for templates, as the java code is executed when the template is created, and the values of the options are only available at runtime."}],"owner":{"account_id":18604807,"reputation":75,"user_id":13558695,"display_name":"Ben Delany"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":478,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1661453413,"creation_date":1661453413,"question_id":73492436,"body_markdown":"I&#39;m trying to build and deploy a dataflow job using one template from Google&#39;s dataflow templates repo. I stripped out the template and took all of it&#39;s dependencies that couldn&#39;t be resolved through Maven and put them in a local package. The project builds fine on my local machine, but does not on the agent. How do I find the issue?\r\n\r\nError\r\n\r\n        Error: Could not deploy the dataflow job: error running the dataflow deployment: Exception in thread &quot;main&quot; java.lang.IncompatibleClassChangeError: Implementing class\r\n    2022-08-25T18:14:47.9090787Z \tat java.lang.ClassLoader.defineClass1(Native Method)\r\n    2022-08-25T18:14:47.9273920Z \tat java.lang.ClassLoader.defineClass(ClassLoader.java:756)\r\n    2022-08-25T18:14:47.9313989Z \tat java.security.SecureClassLoader.defineClass(SecureClassLoader.java:142)\r\n    2022-08-25T18:14:47.9328707Z \tat java.net.URLClassLoader.defineClass(URLClassLoader.java:473)\r\n    2022-08-25T18:14:47.9525500Z \tat java.net.URLClassLoader.access$100(URLClassLoader.java:74)\r\n    2022-08-25T18:14:47.9538298Z \tat java.net.URLClassLoader$1.run(URLClassLoader.java:369)\r\n    2022-08-25T18:14:47.9587717Z \tat java.net.URLClassLoader$1.run(URLClassLoader.java:363)\r\n    2022-08-25T18:14:47.9594312Z \tat java.security.AccessController.doPrivileged(Native Method)\r\n    2022-08-25T18:14:47.9663168Z \tat java.net.URLClassLoader.findClass(URLClassLoader.java:362)\r\n    2022-08-25T18:14:47.9714926Z \tat java.lang.ClassLoader.loadClass(ClassLoader.java:418)\r\n    2022-08-25T18:14:47.9746322Z \tat sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:352)\r\n    2022-08-25T18:14:47.9824281Z \tat java.lang.ClassLoader.loadClass(ClassLoader.java:351)\r\n    2022-08-25T18:14:47.9829238Z \tat java.lang.Class.forName0(Native Method)\r\n    2022-08-25T18:14:47.9830934Z \tat java.lang.Class.forName(Class.java:264)\r\n    2022-08-25T18:14:47.9832751Z \tat com.sun.proxy.$Proxy22.&lt;clinit&gt;(Unknown Source)\r\n    2022-08-25T18:14:48.0328994Z \tat sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)\r\n    2022-08-25T18:14:48.0350968Z \tat sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:62)\r\n    2022-08-25T18:14:48.0662389Z \tat sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)\r\n    2022-08-25T18:14:48.0665972Z \tat java.lang.reflect.Constructor.newInstance(Constructor.java:423)\r\n...\r\n\r\nMain Class\r\n\r\n    package edu.mayo.mcc.cdh.pipeline;\r\n    \r\n    import static edu.mayo.mcc.cdh.pipeline.teleport.templates.TextToBigQueryStreaming.wrapBigQueryInsertError;\r\n    \r\n    import com.google.api.services.bigquery.model.TableRow;\r\n    import com.google.cloud.teleport.coders.FailsafeElementCoder;\r\n    import edu.mayo.mcc.cdh.pipeline.teleport.templates.common.BigQueryConverters.FailsafeJsonToTableRow;\r\n    import com.google.cloud.teleport.templates.common.ErrorConverters;\r\n    import com.google.cloud.teleport.templates.common.JavascriptTextTransformer.FailsafeJavascriptUdf;\r\n    import com.google.cloud.teleport.templates.common.JavascriptTextTransformer.JavascriptTextTransformerOptions;\r\n    import com.google.cloud.teleport.util.DualInputNestedValueProvider;\r\n    import com.google.cloud.teleport.util.DualInputNestedValueProvider.TranslatorInput;\r\n    import com.google.cloud.teleport.util.ResourceUtils;\r\n    import com.google.cloud.teleport.util.ValueProviderUtils;\r\n    import com.google.cloud.teleport.values.FailsafeElement;\r\n    import com.google.common.collect.ImmutableList;\r\n    import java.nio.charset.StandardCharsets;\r\n    import org.apache.beam.sdk.Pipeline;\r\n    import org.apache.beam.sdk.PipelineResult;\r\n    import org.apache.beam.sdk.coders.CoderRegistry;\r\n    import org.apache.beam.sdk.coders.StringUtf8Coder;\r\n    import org.apache.beam.sdk.io.gcp.bigquery.BigQueryIO;\r\n    import org.apache.beam.sdk.io.gcp.bigquery.BigQueryIO.Write.CreateDisposition;\r\n    import org.apache.beam.sdk.io.gcp.bigquery.BigQueryIO.Write.WriteDisposition;\r\n    import org.apache.beam.sdk.io.gcp.bigquery.BigQueryInsertError;\r\n    import org.apache.beam.sdk.io.gcp.bigquery.InsertRetryPolicy;\r\n    import org.apache.beam.sdk.io.gcp.bigquery.WriteResult;\r\n    import org.apache.beam.sdk.io.gcp.pubsub.PubsubIO;\r\n    import org.apache.beam.sdk.io.gcp.pubsub.PubsubMessage;\r\n    import org.apache.beam.sdk.io.gcp.pubsub.PubsubMessageWithAttributesCoder;\r\n    import org.apache.beam.sdk.options.Default;\r\n    import org.apache.beam.sdk.options.Description;\r\n    import org.apache.beam.sdk.options.PipelineOptions;\r\n    import org.apache.beam.sdk.options.PipelineOptionsFactory;\r\n    import org.apache.beam.sdk.options.ValueProvider;\r\n    import org.apache.beam.sdk.transforms.DoFn;\r\n    import org.apache.beam.sdk.transforms.Flatten;\r\n    import org.apache.beam.sdk.transforms.MapElements;\r\n    import org.apache.beam.sdk.transforms.PTransform;\r\n    import org.apache.beam.sdk.transforms.ParDo;\r\n    import org.apache.beam.sdk.transforms.SerializableFunction;\r\n    import org.apache.beam.sdk.values.PCollection;\r\n    import org.apache.beam.sdk.values.PCollectionList;\r\n    import org.apache.beam.sdk.values.PCollectionTuple;\r\n    import org.apache.beam.sdk.values.TupleTag;\r\n    import org.slf4j.Logger;\r\n    import org.slf4j.LoggerFactory;\r\n    \r\n    ...\r\n    public class PubSubToBigQuery {\r\n    \r\n      /** The log to output status messages to. */\r\n      private static final Logger LOG = LoggerFactory.getLogger(PubSubToBigQuery.class);\r\n    \r\n      /** The tag for the main output for the UDF. */\r\n      public static final TupleTag&lt;FailsafeElement&lt;PubsubMessage, String&gt;&gt; UDF_OUT =\r\n          new TupleTag&lt;FailsafeElement&lt;PubsubMessage, String&gt;&gt;() {};\r\n    \r\n      /** The tag for the main output of the json transformation. */\r\n      public static final TupleTag&lt;TableRow&gt; TRANSFORM_OUT = new TupleTag&lt;TableRow&gt;() {};\r\n    \r\n      /** The tag for the dead-letter output of the udf. */\r\n      public static final TupleTag&lt;FailsafeElement&lt;PubsubMessage, String&gt;&gt; UDF_DEADLETTER_OUT =\r\n          new TupleTag&lt;FailsafeElement&lt;PubsubMessage, String&gt;&gt;() {};\r\n    \r\n      /** The tag for the dead-letter output of the json to table row transform. */\r\n      public static final TupleTag&lt;FailsafeElement&lt;PubsubMessage, String&gt;&gt; TRANSFORM_DEADLETTER_OUT =\r\n          new TupleTag&lt;FailsafeElement&lt;PubsubMessage, String&gt;&gt;() {};\r\n    \r\n      /** The default suffix for error tables if dead letter table is not specified. */\r\n      public static final String DEFAULT_DEADLETTER_TABLE_SUFFIX = &quot;_error_records&quot;;\r\n    \r\n      /** Pubsub message/string coder for pipeline. */\r\n      public static final FailsafeElementCoder&lt;PubsubMessage, String&gt; CODER =\r\n          FailsafeElementCoder.of(PubsubMessageWithAttributesCoder.of(), StringUtf8Coder.of());\r\n    \r\n      /** String/String Coder for FailsafeElement. */\r\n      public static final FailsafeElementCoder&lt;String, String&gt; FAILSAFE_ELEMENT_CODER =\r\n          FailsafeElementCoder.of(StringUtf8Coder.of(), StringUtf8Coder.of());\r\n    \r\n      /**\r\n       * The {@link Options} class provides the custom execution options passed by the executor at the\r\n       * command-line.\r\n       */\r\n      public interface Options extends PipelineOptions, JavascriptTextTransformerOptions {\r\n        @Description(&quot;Table spec to write the output to&quot;)\r\n        ValueProvider&lt;String&gt; getOutputTableSpec();\r\n    \r\n        void setOutputTableSpec(ValueProvider&lt;String&gt; value);\r\n    \r\n        @Description(&quot;Pub/Sub topic to read the input from&quot;)\r\n        ValueProvider&lt;String&gt; getInputTopic();\r\n    \r\n        void setInputTopic(ValueProvider&lt;String&gt; value);\r\n    \r\n        @Description(\r\n            &quot;The Cloud Pub/Sub subscription to consume from. &quot;\r\n                + &quot;The name should be in the format of &quot;\r\n                + &quot;projects/&lt;project-id&gt;/subscriptions/&lt;subscription-name&gt;.&quot;)\r\n        ValueProvider&lt;String&gt; getInputSubscription();\r\n    \r\n        void setInputSubscription(ValueProvider&lt;String&gt; value);\r\n    \r\n        @Description(\r\n            &quot;This determines whether the template reads from &quot; + &quot;a pub/sub subscription or a topic&quot;)\r\n        @Default.Boolean(false)\r\n        Boolean getUseSubscription();\r\n    \r\n        void setUseSubscription(Boolean value);\r\n    \r\n        @Description(\r\n            &quot;The dead-letter table to output to within BigQuery in &lt;project-id&gt;:&lt;dataset&gt;.&lt;table&gt; &quot;\r\n                + &quot;format. If it doesn&#39;t exist, it will be created during pipeline execution.&quot;)\r\n        ValueProvider&lt;String&gt; getOutputDeadletterTable();\r\n    \r\n        void setOutputDeadletterTable(ValueProvider&lt;String&gt; value);\r\n      }\r\n    \r\n      /**\r\n       * The main entry-point for pipeline execution. This method will start the pipeline but will not\r\n       * wait for it&#39;s execution to finish. If blocking execution is required, use the {@link\r\n       * PubSubToBigQuery#run(Options)} method to start the pipeline and invoke {@code\r\n       * result.waitUntilFinish()} on the {@link PipelineResult}.\r\n       *\r\n       * @param args The command-line args passed by the executor.\r\n       */\r\n      public static void main(String[] args) {\r\n        Options options = PipelineOptionsFactory.fromArgs(args).withValidation().as(Options.class);\r\n    \r\n        run(options);\r\n      }\r\n    \r\n      /**\r\n       * Runs the pipeline to completion with the specified options. This method does not wait until the\r\n       * pipeline is finished before returning. Invoke {@code result.waitUntilFinish()} on the result\r\n       * object to block until the pipeline is finished running if blocking programmatic execution is\r\n       * required.\r\n       *\r\n       * @param options The execution options.\r\n       * @return The pipeline result.\r\n       */\r\n      public static PipelineResult run(Options options) {\r\n    \r\n        Pipeline pipeline = Pipeline.create(options);\r\n    \r\n        CoderRegistry coderRegistry = pipeline.getCoderRegistry();\r\n        coderRegistry.registerCoderForType(CODER.getEncodedTypeDescriptor(), CODER);\r\n    \r\n        /*\r\n         * Steps:\r\n         *  1) Read messages in from Pub/Sub\r\n         *  2) Transform the PubsubMessages into TableRows\r\n         *     - Transform message payload via UDF\r\n         *     - Convert UDF result to TableRow objects\r\n         *  3) Write successful records out to BigQuery\r\n         *  4) Write failed records out to BigQuery\r\n         */\r\n    \r\n        /*\r\n         * Step #1: Read messages in from Pub/Sub\r\n         * Either from a Subscription or Topic\r\n         */\r\n    \r\n        PCollection&lt;PubsubMessage&gt; messages = null;\r\n        if (options.getUseSubscription()) {\r\n          messages =\r\n              pipeline.apply(\r\n                  &quot;ReadPubSubSubscription&quot;,\r\n                  PubsubIO.readMessagesWithAttributes()\r\n                      .fromSubscription(options.getInputSubscription()));\r\n        } else {\r\n          messages =\r\n              pipeline.apply(\r\n                  &quot;ReadPubSubTopic&quot;,\r\n                  PubsubIO.readMessagesWithAttributes().fromTopic(options.getInputTopic()));\r\n        }\r\n    \r\n        PCollectionTuple convertedTableRows =\r\n            messages\r\n                /*\r\n                 * Step #2: Transform the PubsubMessages into TableRows\r\n                 */\r\n                .apply(&quot;ConvertMessageToTableRow&quot;, new PubsubMessageToTableRow(options));\r\n    \r\n        /*\r\n         * Step #3: Write the successful records out to BigQuery\r\n         */\r\n        WriteResult writeResult =\r\n            convertedTableRows\r\n                .get(TRANSFORM_OUT)\r\n                .apply(\r\n                    &quot;WriteSuccessfulRecords&quot;,\r\n                    BigQueryIO.writeTableRows()\r\n                        .withoutValidation()\r\n                        .withCreateDisposition(CreateDisposition.CREATE_NEVER)\r\n                        .withWriteDisposition(WriteDisposition.WRITE_APPEND)\r\n                        .withExtendedErrorInfo()\r\n                        .withMethod(BigQueryIO.Write.Method.STREAMING_INSERTS)\r\n                        .withFailedInsertRetryPolicy(InsertRetryPolicy.retryTransientErrors())\r\n                        .to(options.getOutputTableSpec()));\r\n    \r\n        /*\r\n         * Step 3 Contd.\r\n         * Elements that failed inserts into BigQuery are extracted and converted to FailsafeElement\r\n         */\r\n        PCollection&lt;FailsafeElement&lt;String, String&gt;&gt; failedInserts =\r\n            writeResult\r\n                .getFailedInsertsWithErr()\r\n                .apply(\r\n                    &quot;WrapInsertionErrors&quot;,\r\n                    MapElements.into(FAILSAFE_ELEMENT_CODER.getEncodedTypeDescriptor())\r\n                        .via((BigQueryInsertError e) -&gt; wrapBigQueryInsertError(e)))\r\n                .setCoder(FAILSAFE_ELEMENT_CODER);\r\n    \r\n        /*\r\n         * Step #4: Write records that failed table row transformation\r\n         * or conversion out to BigQuery deadletter table.\r\n         */\r\n        PCollectionList.of(\r\n                ImmutableList.of(\r\n                    convertedTableRows.get(UDF_DEADLETTER_OUT),\r\n                    convertedTableRows.get(TRANSFORM_DEADLETTER_OUT)))\r\n            .apply(&quot;Flatten&quot;, Flatten.pCollections())\r\n            .apply(\r\n                &quot;WriteFailedRecords&quot;,\r\n                ErrorConverters.WritePubsubMessageErrors.newBuilder()\r\n                    .setErrorRecordsTable(\r\n                        ValueProviderUtils.maybeUseDefaultDeadletterTable(\r\n                            options.getOutputDeadletterTable(),\r\n                            options.getOutputTableSpec(),\r\n                            DEFAULT_DEADLETTER_TABLE_SUFFIX))\r\n                    .setErrorRecordsTableSchema(ResourceUtils.getDeadletterTableSchemaJson())\r\n                    .build());\r\n    \r\n        // 5) Insert records that failed insert into deadletter table\r\n        failedInserts.apply(\r\n            &quot;WriteFailedRecords&quot;,\r\n            ErrorConverters.WriteStringMessageErrors.newBuilder()\r\n                .setErrorRecordsTable(\r\n                    ValueProviderUtils.maybeUseDefaultDeadletterTable(\r\n                        options.getOutputDeadletterTable(),\r\n                        options.getOutputTableSpec(),\r\n                        DEFAULT_DEADLETTER_TABLE_SUFFIX))\r\n                .setErrorRecordsTableSchema(ResourceUtils.getDeadletterTableSchemaJson())\r\n                .build());\r\n    \r\n        return pipeline.run();\r\n      }\r\n    \r\n      /**\r\n       * If deadletterTable is available, it is returned as is, otherwise outputTableSpec +\r\n       * defaultDeadLetterTableSuffix is returned instead.\r\n       */\r\n      private static ValueProvider&lt;String&gt; maybeUseDefaultDeadletterTable(\r\n          ValueProvider&lt;String&gt; deadletterTable,\r\n          ValueProvider&lt;String&gt; outputTableSpec,\r\n          String defaultDeadLetterTableSuffix) {\r\n        return DualInputNestedValueProvider.of(\r\n            deadletterTable,\r\n            outputTableSpec,\r\n            new SerializableFunction&lt;TranslatorInput&lt;String, String&gt;, String&gt;() {\r\n              @Override\r\n              public String apply(TranslatorInput&lt;String, String&gt; input) {\r\n                String userProvidedTable = input.getX();\r\n                String outputTableSpec = input.getY();\r\n                if (userProvidedTable == null) {\r\n                  return outputTableSpec + defaultDeadLetterTableSuffix;\r\n                }\r\n                return userProvidedTable;\r\n              }\r\n            });\r\n      }\r\n    \r\n      /**\r\n       * The {@link PubsubMessageToTableRow} class is a {@link PTransform} which transforms incoming\r\n       * {@link PubsubMessage} objects into {@link TableRow} objects for insertion into BigQuery while\r\n       * applying an optional UDF to the input. The executions of the UDF and transformation to {@link\r\n       * TableRow} objects is done in a fail-safe way by wrapping the element with it&#39;s original payload\r\n       * inside the {@link FailsafeElement} class. The {@link PubsubMessageToTableRow} transform will\r\n       * output a {@link PCollectionTuple} which contains all output and dead-letter {@link\r\n       * PCollection}.\r\n       *\r\n       * &lt;p&gt;The {@link PCollectionTuple} output will contain the following {@link PCollection}:\r\n       *\r\n       * &lt;ul&gt;\r\n       *   &lt;li&gt;{@link PubSubToBigQuery#UDF_OUT} - Contains all {@link FailsafeElement} records\r\n       *       successfully processed by the optional UDF.\r\n       *   &lt;li&gt;{@link PubSubToBigQuery#UDF_DEADLETTER_OUT} - Contains all {@link FailsafeElement}\r\n       *       records which failed processing during the UDF execution.\r\n       *   &lt;li&gt;{@link PubSubToBigQuery#TRANSFORM_OUT} - Contains all records successfully converted from\r\n       *       JSON to {@link TableRow} objects.\r\n       *   &lt;li&gt;{@link PubSubToBigQuery#TRANSFORM_DEADLETTER_OUT} - Contains all {@link FailsafeElement}\r\n       *       records which couldn&#39;t be converted to table rows.\r\n       * &lt;/ul&gt;\r\n       */\r\n      static class PubsubMessageToTableRow\r\n          extends PTransform&lt;PCollection&lt;PubsubMessage&gt;, PCollectionTuple&gt; {\r\n    \r\n        private final Options options;\r\n    \r\n        PubsubMessageToTableRow(Options options) {\r\n          this.options = options;\r\n        }\r\n    \r\n        @Override\r\n        public PCollectionTuple expand(PCollection&lt;PubsubMessage&gt; input) {\r\n    \r\n          PCollectionTuple udfOut =\r\n              input\r\n                  // Map the incoming messages into FailsafeElements so we can recover from failures\r\n                  // across multiple transforms.\r\n                  .apply(&quot;MapToRecord&quot;, ParDo.of(new PubsubMessageToFailsafeElementFn()))\r\n                  .apply(\r\n                      &quot;InvokeUDF&quot;,\r\n                      FailsafeJavascriptUdf.&lt;PubsubMessage&gt;newBuilder()\r\n                          .setFileSystemPath(options.getJavascriptTextTransformGcsPath())\r\n                          .setFunctionName(options.getJavascriptTextTransformFunctionName())\r\n                          .setSuccessTag(UDF_OUT)\r\n                          .setFailureTag(UDF_DEADLETTER_OUT)\r\n                          .build());\r\n    \r\n          // Convert the records which were successfully processed by the UDF into TableRow objects.\r\n          PCollectionTuple jsonToTableRowOut =\r\n              udfOut\r\n                  .get(UDF_OUT)\r\n                  .apply(\r\n                      &quot;JsonToTableRow&quot;,\r\n                      FailsafeJsonToTableRow.&lt;PubsubMessage&gt;newBuilder()\r\n                          .setSuccessTag(TRANSFORM_OUT)\r\n                          .setFailureTag(TRANSFORM_DEADLETTER_OUT)\r\n                          .build());\r\n    \r\n          // Re-wrap the PCollections so we can return a single PCollectionTuple\r\n          return PCollectionTuple.of(UDF_OUT, udfOut.get(UDF_OUT))\r\n              .and(UDF_DEADLETTER_OUT, udfOut.get(UDF_DEADLETTER_OUT))\r\n              .and(TRANSFORM_OUT, jsonToTableRowOut.get(TRANSFORM_OUT))\r\n              .and(TRANSFORM_DEADLETTER_OUT, jsonToTableRowOut.get(TRANSFORM_DEADLETTER_OUT));\r\n        }\r\n      }\r\n    \r\n      /**\r\n       * The {@link PubsubMessageToFailsafeElementFn} wraps an incoming {@link PubsubMessage} with the\r\n       * {@link FailsafeElement} class so errors can be recovered from and the original message can be\r\n       * output to a error records table.\r\n       */\r\n      static class PubsubMessageToFailsafeElementFn\r\n          extends DoFn&lt;PubsubMessage, FailsafeElement&lt;PubsubMessage, String&gt;&gt; {\r\n        @ProcessElement\r\n        public void processElement(ProcessContext context) {\r\n          PubsubMessage message = context.element();\r\n          context.output(\r\n              FailsafeElement.of(message, new String(message.getPayload(), StandardCharsets.UTF_8)));\r\n        }\r\n      }\r\n    }\r\n\r\nPom.xml\r\n\r\n   \r\n\r\n     &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;\r\n             xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n             xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n        &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n    \r\n        &lt;groupId&gt;edu.mayo.mcc.cdh&lt;/groupId&gt;\r\n        &lt;artifactId&gt;df-pubsub-to-bq-lad&lt;/artifactId&gt;\r\n        &lt;version&gt;2.0.0&lt;/version&gt;\r\n    \r\n    \r\n        &lt;properties&gt;\r\n            &lt;maven.compiler.source&gt;1.8&lt;/maven.compiler.source&gt;\r\n            &lt;maven.compiler.target&gt;1.8&lt;/maven.compiler.target&gt;\r\n            &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\r\n    \r\n            &lt;beam.version&gt;2.35.0&lt;/beam.version&gt;\r\n    \r\n            &lt;maven-compiler-plugin.version&gt;3.8.1&lt;/maven-compiler-plugin.version&gt;\r\n            &lt;maven-exec-plugin.version&gt;3.0.0&lt;/maven-exec-plugin.version&gt;\r\n            &lt;maven-jar-plugin.version&gt;3.2.0&lt;/maven-jar-plugin.version&gt;\r\n            &lt;maven-shade-plugin.version&gt;3.2.4&lt;/maven-shade-plugin.version&gt;\r\n            &lt;slf4j.version&gt;1.7.30&lt;/slf4j.version&gt;\r\n            &lt;re2j.version&gt;1.6&lt;/re2j.version&gt;\r\n            &lt;autovalue.annotations.version&gt;1.7.4&lt;/autovalue.annotations.version&gt;\r\n            &lt;autovalue.version&gt;1.7.4&lt;/autovalue.version&gt;\r\n        &lt;/properties&gt;\r\n    \r\n        &lt;repositories&gt;\r\n            &lt;repository&gt;\r\n                &lt;id&gt;apache.snapshots&lt;/id&gt;\r\n                &lt;name&gt;Apache Development Snapshot Repository&lt;/name&gt;\r\n                &lt;url&gt;https://repository.apache.org/content/repositories/snapshots/&lt;/url&gt;\r\n                &lt;releases&gt;\r\n                    &lt;enabled&gt;false&lt;/enabled&gt;\r\n                &lt;/releases&gt;\r\n                &lt;snapshots&gt;\r\n                    &lt;enabled&gt;true&lt;/enabled&gt;\r\n                &lt;/snapshots&gt;\r\n            &lt;/repository&gt;\r\n            &lt;repository&gt;\r\n                &lt;id&gt;confluent&lt;/id&gt;\r\n                &lt;url&gt;https://packages.confluent.io/maven/&lt;/url&gt;\r\n            &lt;/repository&gt;\r\n        &lt;/repositories&gt;\r\n    \r\n        &lt;build&gt;\r\n            &lt;plugins&gt;\r\n                &lt;plugin&gt;\r\n                    &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n                    &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\r\n                    &lt;version&gt;${maven-compiler-plugin.version}&lt;/version&gt;\r\n                &lt;/plugin&gt;\r\n    \r\n                &lt;plugin&gt;\r\n                    &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n                    &lt;artifactId&gt;maven-jar-plugin&lt;/artifactId&gt;\r\n                    &lt;version&gt;${maven-jar-plugin.version}&lt;/version&gt;\r\n                    &lt;configuration&gt;\r\n                        &lt;archive&gt;\r\n                            &lt;manifest&gt;\r\n                                &lt;addClasspath&gt;true&lt;/addClasspath&gt;\r\n                                &lt;classpathPrefix&gt;lib/&lt;/classpathPrefix&gt;\r\n                                &lt;mainClass&gt;edu.mayo.mcc.cdh.pipeline.PubSubToBigQuery&lt;/mainClass&gt;\r\n                            &lt;/manifest&gt;\r\n                        &lt;/archive&gt;\r\n                    &lt;/configuration&gt;\r\n                &lt;/plugin&gt;\r\n    \r\n                &lt;!--\r\n                  Configures `mvn package` to produce a bundled jar (&quot;fat jar&quot;) for runners\r\n                  that require this for job submission to a cluster.\r\n                --&gt;\r\n                &lt;plugin&gt;\r\n                    &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n                    &lt;artifactId&gt;maven-shade-plugin&lt;/artifactId&gt;\r\n                    &lt;version&gt;${maven-shade-plugin.version}&lt;/version&gt;\r\n                    &lt;executions&gt;\r\n                        &lt;execution&gt;\r\n                            &lt;phase&gt;package&lt;/phase&gt;\r\n                            &lt;goals&gt;\r\n                                &lt;goal&gt;shade&lt;/goal&gt;\r\n                            &lt;/goals&gt;\r\n                            &lt;configuration&gt;\r\n                                &lt;finalName&gt;${project.artifactId}-bundled-${project.version}&lt;/finalName&gt;\r\n                                &lt;filters&gt;\r\n                                    &lt;filter&gt;\r\n                                        &lt;artifact&gt;*:*&lt;/artifact&gt;\r\n                                        &lt;excludes&gt;\r\n                                            &lt;exclude&gt;META-INF/LICENSE&lt;/exclude&gt;\r\n                                            &lt;exclude&gt;META-INF/*.SF&lt;/exclude&gt;\r\n                                            &lt;exclude&gt;META-INF/*.DSA&lt;/exclude&gt;\r\n                                            &lt;exclude&gt;META-INF/*.RSA&lt;/exclude&gt;\r\n                                        &lt;/excludes&gt;\r\n                                    &lt;/filter&gt;\r\n                                &lt;/filters&gt;\r\n                                &lt;transformers&gt;\r\n                                    &lt;transformer implementation=&quot;org.apache.maven.plugins.shade.resource.ServicesResourceTransformer&quot;/&gt;\r\n                                &lt;/transformers&gt;\r\n                            &lt;/configuration&gt;\r\n                        &lt;/execution&gt;\r\n                    &lt;/executions&gt;\r\n                &lt;/plugin&gt;\r\n            &lt;/plugins&gt;\r\n    \r\n            &lt;pluginManagement&gt;\r\n                &lt;plugins&gt;\r\n                    &lt;plugin&gt;\r\n                        &lt;groupId&gt;org.codehaus.mojo&lt;/groupId&gt;\r\n                        &lt;artifactId&gt;exec-maven-plugin&lt;/artifactId&gt;\r\n                        &lt;version&gt;${maven-exec-plugin.version}&lt;/version&gt;\r\n                        &lt;configuration&gt;\r\n                            &lt;cleanupDaemonThreads&gt;false&lt;/cleanupDaemonThreads&gt;\r\n                        &lt;/configuration&gt;\r\n                    &lt;/plugin&gt;\r\n                &lt;/plugins&gt;\r\n            &lt;/pluginManagement&gt;\r\n        &lt;/build&gt;\r\n    \r\n        &lt;dependencies&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.apache.beam&lt;/groupId&gt;\r\n                &lt;artifactId&gt;beam-sdks-java-core&lt;/artifactId&gt;\r\n                &lt;version&gt;${beam.version}&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n    \r\n            &lt;!-- https://mvnrepository.com/artifact/com.google.re2j/re2j --&gt;\r\n            &lt;!-- https://mvnrepository.com/artifact/com.google.re2j/re2j --&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;com.google.re2j&lt;/groupId&gt;\r\n                &lt;artifactId&gt;re2j&lt;/artifactId&gt;\r\n                &lt;version&gt;1.6&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n    \r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.apache.commons&lt;/groupId&gt;\r\n                &lt;artifactId&gt;commons-lang3&lt;/artifactId&gt;\r\n                &lt;version&gt;3.1&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n    \r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.apache.commons&lt;/groupId&gt;\r\n                &lt;artifactId&gt;commons-text&lt;/artifactId&gt;\r\n                &lt;version&gt;1.9&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n    \r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;com.google.cloud.dataflow&lt;/groupId&gt;\r\n                &lt;artifactId&gt;google-cloud-dataflow-java-sdk-all&lt;/artifactId&gt;\r\n                &lt;version&gt;[1.6.0, 1.9.9)&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n    \r\n    \r\n    \r\n            &lt;!--\r\n              By default, the starter project has a dependency on the Beam DirectRunner\r\n              to enable development and testing of pipelines. To run on another of the\r\n              Beam runners, add its module to this pom.xml according to the\r\n              runner-specific setup instructions on the Beam website:\r\n                http://beam.apache.org/documentation/#runners\r\n            --&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.apache.beam&lt;/groupId&gt;\r\n                &lt;artifactId&gt;beam-runners-direct-java&lt;/artifactId&gt;\r\n                &lt;version&gt;${beam.version}&lt;/version&gt;\r\n                &lt;scope&gt;runtime&lt;/scope&gt;\r\n            &lt;/dependency&gt;\r\n    \r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.apache.beam&lt;/groupId&gt;\r\n                &lt;artifactId&gt;beam-runners-google-cloud-dataflow-java&lt;/artifactId&gt;\r\n                &lt;version&gt;${beam.version}&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n    \r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.apache.beam&lt;/groupId&gt;\r\n                &lt;artifactId&gt;beam-sdks-java-io-google-cloud-platform&lt;/artifactId&gt;\r\n                &lt;version&gt;${beam.version}&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n    \r\n            &lt;!-- slf4j API frontend binding with JUL backend --&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.slf4j&lt;/groupId&gt;\r\n                &lt;artifactId&gt;slf4j-api&lt;/artifactId&gt;\r\n                &lt;version&gt;${slf4j.version}&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n    \r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.slf4j&lt;/groupId&gt;\r\n                &lt;artifactId&gt;slf4j-jdk14&lt;/artifactId&gt;\r\n                &lt;version&gt;${slf4j.version}&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n    \r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;com.google.auto.value&lt;/groupId&gt;\r\n                &lt;artifactId&gt;auto-value&lt;/artifactId&gt;\r\n                &lt;version&gt;${autovalue.version}&lt;/version&gt;\r\n                &lt;scope&gt;provided&lt;/scope&gt;\r\n            &lt;/dependency&gt;\r\n    \r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;com.google.auto.value&lt;/groupId&gt;\r\n                &lt;artifactId&gt;auto-value-annotations&lt;/artifactId&gt;\r\n                &lt;version&gt;${autovalue.annotations.version}&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n    \r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;com.google.protobuf&lt;/groupId&gt;\r\n                &lt;artifactId&gt;protobuf-java&lt;/artifactId&gt;\r\n                &lt;version&gt;3.12.0&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n    \r\n            &lt;!-- https://mvnrepository.com/artifact/com.google.cloud.datastore/datastore-v1-proto-client --&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;com.google.cloud.datastore&lt;/groupId&gt;\r\n                &lt;artifactId&gt;datastore-v1-proto-client&lt;/artifactId&gt;\r\n                &lt;version&gt;2.11.0&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n    \r\n    \r\n        &lt;/dependencies&gt;\r\n    &lt;/project&gt;","title":"Dataflow Template Fails with Incompatible Class Change Error","body":"<p>I'm trying to build and deploy a dataflow job using one template from Google's dataflow templates repo. I stripped out the template and took all of it's dependencies that couldn't be resolved through Maven and put them in a local package. The project builds fine on my local machine, but does not on the agent. How do I find the issue?</p>\n<p>Error</p>\n<pre><code>    Error: Could not deploy the dataflow job: error running the dataflow deployment: Exception in thread &quot;main&quot; java.lang.IncompatibleClassChangeError: Implementing class\n2022-08-25T18:14:47.9090787Z    at java.lang.ClassLoader.defineClass1(Native Method)\n2022-08-25T18:14:47.9273920Z    at java.lang.ClassLoader.defineClass(ClassLoader.java:756)\n2022-08-25T18:14:47.9313989Z    at java.security.SecureClassLoader.defineClass(SecureClassLoader.java:142)\n2022-08-25T18:14:47.9328707Z    at java.net.URLClassLoader.defineClass(URLClassLoader.java:473)\n2022-08-25T18:14:47.9525500Z    at java.net.URLClassLoader.access$100(URLClassLoader.java:74)\n2022-08-25T18:14:47.9538298Z    at java.net.URLClassLoader$1.run(URLClassLoader.java:369)\n2022-08-25T18:14:47.9587717Z    at java.net.URLClassLoader$1.run(URLClassLoader.java:363)\n2022-08-25T18:14:47.9594312Z    at java.security.AccessController.doPrivileged(Native Method)\n2022-08-25T18:14:47.9663168Z    at java.net.URLClassLoader.findClass(URLClassLoader.java:362)\n2022-08-25T18:14:47.9714926Z    at java.lang.ClassLoader.loadClass(ClassLoader.java:418)\n2022-08-25T18:14:47.9746322Z    at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:352)\n2022-08-25T18:14:47.9824281Z    at java.lang.ClassLoader.loadClass(ClassLoader.java:351)\n2022-08-25T18:14:47.9829238Z    at java.lang.Class.forName0(Native Method)\n2022-08-25T18:14:47.9830934Z    at java.lang.Class.forName(Class.java:264)\n2022-08-25T18:14:47.9832751Z    at com.sun.proxy.$Proxy22.&lt;clinit&gt;(Unknown Source)\n2022-08-25T18:14:48.0328994Z    at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)\n2022-08-25T18:14:48.0350968Z    at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:62)\n2022-08-25T18:14:48.0662389Z    at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)\n2022-08-25T18:14:48.0665972Z    at java.lang.reflect.Constructor.newInstance(Constructor.java:423)\n</code></pre>\n<p>...</p>\n<p>Main Class</p>\n<pre><code>package edu.mayo.mcc.cdh.pipeline;\n\nimport static edu.mayo.mcc.cdh.pipeline.teleport.templates.TextToBigQueryStreaming.wrapBigQueryInsertError;\n\nimport com.google.api.services.bigquery.model.TableRow;\nimport com.google.cloud.teleport.coders.FailsafeElementCoder;\nimport edu.mayo.mcc.cdh.pipeline.teleport.templates.common.BigQueryConverters.FailsafeJsonToTableRow;\nimport com.google.cloud.teleport.templates.common.ErrorConverters;\nimport com.google.cloud.teleport.templates.common.JavascriptTextTransformer.FailsafeJavascriptUdf;\nimport com.google.cloud.teleport.templates.common.JavascriptTextTransformer.JavascriptTextTransformerOptions;\nimport com.google.cloud.teleport.util.DualInputNestedValueProvider;\nimport com.google.cloud.teleport.util.DualInputNestedValueProvider.TranslatorInput;\nimport com.google.cloud.teleport.util.ResourceUtils;\nimport com.google.cloud.teleport.util.ValueProviderUtils;\nimport com.google.cloud.teleport.values.FailsafeElement;\nimport com.google.common.collect.ImmutableList;\nimport java.nio.charset.StandardCharsets;\nimport org.apache.beam.sdk.Pipeline;\nimport org.apache.beam.sdk.PipelineResult;\nimport org.apache.beam.sdk.coders.CoderRegistry;\nimport org.apache.beam.sdk.coders.StringUtf8Coder;\nimport org.apache.beam.sdk.io.gcp.bigquery.BigQueryIO;\nimport org.apache.beam.sdk.io.gcp.bigquery.BigQueryIO.Write.CreateDisposition;\nimport org.apache.beam.sdk.io.gcp.bigquery.BigQueryIO.Write.WriteDisposition;\nimport org.apache.beam.sdk.io.gcp.bigquery.BigQueryInsertError;\nimport org.apache.beam.sdk.io.gcp.bigquery.InsertRetryPolicy;\nimport org.apache.beam.sdk.io.gcp.bigquery.WriteResult;\nimport org.apache.beam.sdk.io.gcp.pubsub.PubsubIO;\nimport org.apache.beam.sdk.io.gcp.pubsub.PubsubMessage;\nimport org.apache.beam.sdk.io.gcp.pubsub.PubsubMessageWithAttributesCoder;\nimport org.apache.beam.sdk.options.Default;\nimport org.apache.beam.sdk.options.Description;\nimport org.apache.beam.sdk.options.PipelineOptions;\nimport org.apache.beam.sdk.options.PipelineOptionsFactory;\nimport org.apache.beam.sdk.options.ValueProvider;\nimport org.apache.beam.sdk.transforms.DoFn;\nimport org.apache.beam.sdk.transforms.Flatten;\nimport org.apache.beam.sdk.transforms.MapElements;\nimport org.apache.beam.sdk.transforms.PTransform;\nimport org.apache.beam.sdk.transforms.ParDo;\nimport org.apache.beam.sdk.transforms.SerializableFunction;\nimport org.apache.beam.sdk.values.PCollection;\nimport org.apache.beam.sdk.values.PCollectionList;\nimport org.apache.beam.sdk.values.PCollectionTuple;\nimport org.apache.beam.sdk.values.TupleTag;\nimport org.slf4j.Logger;\nimport org.slf4j.LoggerFactory;\n\n...\npublic class PubSubToBigQuery {\n\n  /** The log to output status messages to. */\n  private static final Logger LOG = LoggerFactory.getLogger(PubSubToBigQuery.class);\n\n  /** The tag for the main output for the UDF. */\n  public static final TupleTag&lt;FailsafeElement&lt;PubsubMessage, String&gt;&gt; UDF_OUT =\n      new TupleTag&lt;FailsafeElement&lt;PubsubMessage, String&gt;&gt;() {};\n\n  /** The tag for the main output of the json transformation. */\n  public static final TupleTag&lt;TableRow&gt; TRANSFORM_OUT = new TupleTag&lt;TableRow&gt;() {};\n\n  /** The tag for the dead-letter output of the udf. */\n  public static final TupleTag&lt;FailsafeElement&lt;PubsubMessage, String&gt;&gt; UDF_DEADLETTER_OUT =\n      new TupleTag&lt;FailsafeElement&lt;PubsubMessage, String&gt;&gt;() {};\n\n  /** The tag for the dead-letter output of the json to table row transform. */\n  public static final TupleTag&lt;FailsafeElement&lt;PubsubMessage, String&gt;&gt; TRANSFORM_DEADLETTER_OUT =\n      new TupleTag&lt;FailsafeElement&lt;PubsubMessage, String&gt;&gt;() {};\n\n  /** The default suffix for error tables if dead letter table is not specified. */\n  public static final String DEFAULT_DEADLETTER_TABLE_SUFFIX = &quot;_error_records&quot;;\n\n  /** Pubsub message/string coder for pipeline. */\n  public static final FailsafeElementCoder&lt;PubsubMessage, String&gt; CODER =\n      FailsafeElementCoder.of(PubsubMessageWithAttributesCoder.of(), StringUtf8Coder.of());\n\n  /** String/String Coder for FailsafeElement. */\n  public static final FailsafeElementCoder&lt;String, String&gt; FAILSAFE_ELEMENT_CODER =\n      FailsafeElementCoder.of(StringUtf8Coder.of(), StringUtf8Coder.of());\n\n  /**\n   * The {@link Options} class provides the custom execution options passed by the executor at the\n   * command-line.\n   */\n  public interface Options extends PipelineOptions, JavascriptTextTransformerOptions {\n    @Description(&quot;Table spec to write the output to&quot;)\n    ValueProvider&lt;String&gt; getOutputTableSpec();\n\n    void setOutputTableSpec(ValueProvider&lt;String&gt; value);\n\n    @Description(&quot;Pub/Sub topic to read the input from&quot;)\n    ValueProvider&lt;String&gt; getInputTopic();\n\n    void setInputTopic(ValueProvider&lt;String&gt; value);\n\n    @Description(\n        &quot;The Cloud Pub/Sub subscription to consume from. &quot;\n            + &quot;The name should be in the format of &quot;\n            + &quot;projects/&lt;project-id&gt;/subscriptions/&lt;subscription-name&gt;.&quot;)\n    ValueProvider&lt;String&gt; getInputSubscription();\n\n    void setInputSubscription(ValueProvider&lt;String&gt; value);\n\n    @Description(\n        &quot;This determines whether the template reads from &quot; + &quot;a pub/sub subscription or a topic&quot;)\n    @Default.Boolean(false)\n    Boolean getUseSubscription();\n\n    void setUseSubscription(Boolean value);\n\n    @Description(\n        &quot;The dead-letter table to output to within BigQuery in &lt;project-id&gt;:&lt;dataset&gt;.&lt;table&gt; &quot;\n            + &quot;format. If it doesn't exist, it will be created during pipeline execution.&quot;)\n    ValueProvider&lt;String&gt; getOutputDeadletterTable();\n\n    void setOutputDeadletterTable(ValueProvider&lt;String&gt; value);\n  }\n\n  /**\n   * The main entry-point for pipeline execution. This method will start the pipeline but will not\n   * wait for it's execution to finish. If blocking execution is required, use the {@link\n   * PubSubToBigQuery#run(Options)} method to start the pipeline and invoke {@code\n   * result.waitUntilFinish()} on the {@link PipelineResult}.\n   *\n   * @param args The command-line args passed by the executor.\n   */\n  public static void main(String[] args) {\n    Options options = PipelineOptionsFactory.fromArgs(args).withValidation().as(Options.class);\n\n    run(options);\n  }\n\n  /**\n   * Runs the pipeline to completion with the specified options. This method does not wait until the\n   * pipeline is finished before returning. Invoke {@code result.waitUntilFinish()} on the result\n   * object to block until the pipeline is finished running if blocking programmatic execution is\n   * required.\n   *\n   * @param options The execution options.\n   * @return The pipeline result.\n   */\n  public static PipelineResult run(Options options) {\n\n    Pipeline pipeline = Pipeline.create(options);\n\n    CoderRegistry coderRegistry = pipeline.getCoderRegistry();\n    coderRegistry.registerCoderForType(CODER.getEncodedTypeDescriptor(), CODER);\n\n    /*\n     * Steps:\n     *  1) Read messages in from Pub/Sub\n     *  2) Transform the PubsubMessages into TableRows\n     *     - Transform message payload via UDF\n     *     - Convert UDF result to TableRow objects\n     *  3) Write successful records out to BigQuery\n     *  4) Write failed records out to BigQuery\n     */\n\n    /*\n     * Step #1: Read messages in from Pub/Sub\n     * Either from a Subscription or Topic\n     */\n\n    PCollection&lt;PubsubMessage&gt; messages = null;\n    if (options.getUseSubscription()) {\n      messages =\n          pipeline.apply(\n              &quot;ReadPubSubSubscription&quot;,\n              PubsubIO.readMessagesWithAttributes()\n                  .fromSubscription(options.getInputSubscription()));\n    } else {\n      messages =\n          pipeline.apply(\n              &quot;ReadPubSubTopic&quot;,\n              PubsubIO.readMessagesWithAttributes().fromTopic(options.getInputTopic()));\n    }\n\n    PCollectionTuple convertedTableRows =\n        messages\n            /*\n             * Step #2: Transform the PubsubMessages into TableRows\n             */\n            .apply(&quot;ConvertMessageToTableRow&quot;, new PubsubMessageToTableRow(options));\n\n    /*\n     * Step #3: Write the successful records out to BigQuery\n     */\n    WriteResult writeResult =\n        convertedTableRows\n            .get(TRANSFORM_OUT)\n            .apply(\n                &quot;WriteSuccessfulRecords&quot;,\n                BigQueryIO.writeTableRows()\n                    .withoutValidation()\n                    .withCreateDisposition(CreateDisposition.CREATE_NEVER)\n                    .withWriteDisposition(WriteDisposition.WRITE_APPEND)\n                    .withExtendedErrorInfo()\n                    .withMethod(BigQueryIO.Write.Method.STREAMING_INSERTS)\n                    .withFailedInsertRetryPolicy(InsertRetryPolicy.retryTransientErrors())\n                    .to(options.getOutputTableSpec()));\n\n    /*\n     * Step 3 Contd.\n     * Elements that failed inserts into BigQuery are extracted and converted to FailsafeElement\n     */\n    PCollection&lt;FailsafeElement&lt;String, String&gt;&gt; failedInserts =\n        writeResult\n            .getFailedInsertsWithErr()\n            .apply(\n                &quot;WrapInsertionErrors&quot;,\n                MapElements.into(FAILSAFE_ELEMENT_CODER.getEncodedTypeDescriptor())\n                    .via((BigQueryInsertError e) -&gt; wrapBigQueryInsertError(e)))\n            .setCoder(FAILSAFE_ELEMENT_CODER);\n\n    /*\n     * Step #4: Write records that failed table row transformation\n     * or conversion out to BigQuery deadletter table.\n     */\n    PCollectionList.of(\n            ImmutableList.of(\n                convertedTableRows.get(UDF_DEADLETTER_OUT),\n                convertedTableRows.get(TRANSFORM_DEADLETTER_OUT)))\n        .apply(&quot;Flatten&quot;, Flatten.pCollections())\n        .apply(\n            &quot;WriteFailedRecords&quot;,\n            ErrorConverters.WritePubsubMessageErrors.newBuilder()\n                .setErrorRecordsTable(\n                    ValueProviderUtils.maybeUseDefaultDeadletterTable(\n                        options.getOutputDeadletterTable(),\n                        options.getOutputTableSpec(),\n                        DEFAULT_DEADLETTER_TABLE_SUFFIX))\n                .setErrorRecordsTableSchema(ResourceUtils.getDeadletterTableSchemaJson())\n                .build());\n\n    // 5) Insert records that failed insert into deadletter table\n    failedInserts.apply(\n        &quot;WriteFailedRecords&quot;,\n        ErrorConverters.WriteStringMessageErrors.newBuilder()\n            .setErrorRecordsTable(\n                ValueProviderUtils.maybeUseDefaultDeadletterTable(\n                    options.getOutputDeadletterTable(),\n                    options.getOutputTableSpec(),\n                    DEFAULT_DEADLETTER_TABLE_SUFFIX))\n            .setErrorRecordsTableSchema(ResourceUtils.getDeadletterTableSchemaJson())\n            .build());\n\n    return pipeline.run();\n  }\n\n  /**\n   * If deadletterTable is available, it is returned as is, otherwise outputTableSpec +\n   * defaultDeadLetterTableSuffix is returned instead.\n   */\n  private static ValueProvider&lt;String&gt; maybeUseDefaultDeadletterTable(\n      ValueProvider&lt;String&gt; deadletterTable,\n      ValueProvider&lt;String&gt; outputTableSpec,\n      String defaultDeadLetterTableSuffix) {\n    return DualInputNestedValueProvider.of(\n        deadletterTable,\n        outputTableSpec,\n        new SerializableFunction&lt;TranslatorInput&lt;String, String&gt;, String&gt;() {\n          @Override\n          public String apply(TranslatorInput&lt;String, String&gt; input) {\n            String userProvidedTable = input.getX();\n            String outputTableSpec = input.getY();\n            if (userProvidedTable == null) {\n              return outputTableSpec + defaultDeadLetterTableSuffix;\n            }\n            return userProvidedTable;\n          }\n        });\n  }\n\n  /**\n   * The {@link PubsubMessageToTableRow} class is a {@link PTransform} which transforms incoming\n   * {@link PubsubMessage} objects into {@link TableRow} objects for insertion into BigQuery while\n   * applying an optional UDF to the input. The executions of the UDF and transformation to {@link\n   * TableRow} objects is done in a fail-safe way by wrapping the element with it's original payload\n   * inside the {@link FailsafeElement} class. The {@link PubsubMessageToTableRow} transform will\n   * output a {@link PCollectionTuple} which contains all output and dead-letter {@link\n   * PCollection}.\n   *\n   * &lt;p&gt;The {@link PCollectionTuple} output will contain the following {@link PCollection}:\n   *\n   * &lt;ul&gt;\n   *   &lt;li&gt;{@link PubSubToBigQuery#UDF_OUT} - Contains all {@link FailsafeElement} records\n   *       successfully processed by the optional UDF.\n   *   &lt;li&gt;{@link PubSubToBigQuery#UDF_DEADLETTER_OUT} - Contains all {@link FailsafeElement}\n   *       records which failed processing during the UDF execution.\n   *   &lt;li&gt;{@link PubSubToBigQuery#TRANSFORM_OUT} - Contains all records successfully converted from\n   *       JSON to {@link TableRow} objects.\n   *   &lt;li&gt;{@link PubSubToBigQuery#TRANSFORM_DEADLETTER_OUT} - Contains all {@link FailsafeElement}\n   *       records which couldn't be converted to table rows.\n   * &lt;/ul&gt;\n   */\n  static class PubsubMessageToTableRow\n      extends PTransform&lt;PCollection&lt;PubsubMessage&gt;, PCollectionTuple&gt; {\n\n    private final Options options;\n\n    PubsubMessageToTableRow(Options options) {\n      this.options = options;\n    }\n\n    @Override\n    public PCollectionTuple expand(PCollection&lt;PubsubMessage&gt; input) {\n\n      PCollectionTuple udfOut =\n          input\n              // Map the incoming messages into FailsafeElements so we can recover from failures\n              // across multiple transforms.\n              .apply(&quot;MapToRecord&quot;, ParDo.of(new PubsubMessageToFailsafeElementFn()))\n              .apply(\n                  &quot;InvokeUDF&quot;,\n                  FailsafeJavascriptUdf.&lt;PubsubMessage&gt;newBuilder()\n                      .setFileSystemPath(options.getJavascriptTextTransformGcsPath())\n                      .setFunctionName(options.getJavascriptTextTransformFunctionName())\n                      .setSuccessTag(UDF_OUT)\n                      .setFailureTag(UDF_DEADLETTER_OUT)\n                      .build());\n\n      // Convert the records which were successfully processed by the UDF into TableRow objects.\n      PCollectionTuple jsonToTableRowOut =\n          udfOut\n              .get(UDF_OUT)\n              .apply(\n                  &quot;JsonToTableRow&quot;,\n                  FailsafeJsonToTableRow.&lt;PubsubMessage&gt;newBuilder()\n                      .setSuccessTag(TRANSFORM_OUT)\n                      .setFailureTag(TRANSFORM_DEADLETTER_OUT)\n                      .build());\n\n      // Re-wrap the PCollections so we can return a single PCollectionTuple\n      return PCollectionTuple.of(UDF_OUT, udfOut.get(UDF_OUT))\n          .and(UDF_DEADLETTER_OUT, udfOut.get(UDF_DEADLETTER_OUT))\n          .and(TRANSFORM_OUT, jsonToTableRowOut.get(TRANSFORM_OUT))\n          .and(TRANSFORM_DEADLETTER_OUT, jsonToTableRowOut.get(TRANSFORM_DEADLETTER_OUT));\n    }\n  }\n\n  /**\n   * The {@link PubsubMessageToFailsafeElementFn} wraps an incoming {@link PubsubMessage} with the\n   * {@link FailsafeElement} class so errors can be recovered from and the original message can be\n   * output to a error records table.\n   */\n  static class PubsubMessageToFailsafeElementFn\n      extends DoFn&lt;PubsubMessage, FailsafeElement&lt;PubsubMessage, String&gt;&gt; {\n    @ProcessElement\n    public void processElement(ProcessContext context) {\n      PubsubMessage message = context.element();\n      context.output(\n          FailsafeElement.of(message, new String(message.getPayload(), StandardCharsets.UTF_8)));\n    }\n  }\n}\n</code></pre>\n<p>Pom.xml</p>\n<pre><code> &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;\n         xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n         xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n\n    &lt;groupId&gt;edu.mayo.mcc.cdh&lt;/groupId&gt;\n    &lt;artifactId&gt;df-pubsub-to-bq-lad&lt;/artifactId&gt;\n    &lt;version&gt;2.0.0&lt;/version&gt;\n\n\n    &lt;properties&gt;\n        &lt;maven.compiler.source&gt;1.8&lt;/maven.compiler.source&gt;\n        &lt;maven.compiler.target&gt;1.8&lt;/maven.compiler.target&gt;\n        &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\n\n        &lt;beam.version&gt;2.35.0&lt;/beam.version&gt;\n\n        &lt;maven-compiler-plugin.version&gt;3.8.1&lt;/maven-compiler-plugin.version&gt;\n        &lt;maven-exec-plugin.version&gt;3.0.0&lt;/maven-exec-plugin.version&gt;\n        &lt;maven-jar-plugin.version&gt;3.2.0&lt;/maven-jar-plugin.version&gt;\n        &lt;maven-shade-plugin.version&gt;3.2.4&lt;/maven-shade-plugin.version&gt;\n        &lt;slf4j.version&gt;1.7.30&lt;/slf4j.version&gt;\n        &lt;re2j.version&gt;1.6&lt;/re2j.version&gt;\n        &lt;autovalue.annotations.version&gt;1.7.4&lt;/autovalue.annotations.version&gt;\n        &lt;autovalue.version&gt;1.7.4&lt;/autovalue.version&gt;\n    &lt;/properties&gt;\n\n    &lt;repositories&gt;\n        &lt;repository&gt;\n            &lt;id&gt;apache.snapshots&lt;/id&gt;\n            &lt;name&gt;Apache Development Snapshot Repository&lt;/name&gt;\n            &lt;url&gt;https://repository.apache.org/content/repositories/snapshots/&lt;/url&gt;\n            &lt;releases&gt;\n                &lt;enabled&gt;false&lt;/enabled&gt;\n            &lt;/releases&gt;\n            &lt;snapshots&gt;\n                &lt;enabled&gt;true&lt;/enabled&gt;\n            &lt;/snapshots&gt;\n        &lt;/repository&gt;\n        &lt;repository&gt;\n            &lt;id&gt;confluent&lt;/id&gt;\n            &lt;url&gt;https://packages.confluent.io/maven/&lt;/url&gt;\n        &lt;/repository&gt;\n    &lt;/repositories&gt;\n\n    &lt;build&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n                &lt;version&gt;${maven-compiler-plugin.version}&lt;/version&gt;\n            &lt;/plugin&gt;\n\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                &lt;artifactId&gt;maven-jar-plugin&lt;/artifactId&gt;\n                &lt;version&gt;${maven-jar-plugin.version}&lt;/version&gt;\n                &lt;configuration&gt;\n                    &lt;archive&gt;\n                        &lt;manifest&gt;\n                            &lt;addClasspath&gt;true&lt;/addClasspath&gt;\n                            &lt;classpathPrefix&gt;lib/&lt;/classpathPrefix&gt;\n                            &lt;mainClass&gt;edu.mayo.mcc.cdh.pipeline.PubSubToBigQuery&lt;/mainClass&gt;\n                        &lt;/manifest&gt;\n                    &lt;/archive&gt;\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n\n            &lt;!--\n              Configures `mvn package` to produce a bundled jar (&quot;fat jar&quot;) for runners\n              that require this for job submission to a cluster.\n            --&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                &lt;artifactId&gt;maven-shade-plugin&lt;/artifactId&gt;\n                &lt;version&gt;${maven-shade-plugin.version}&lt;/version&gt;\n                &lt;executions&gt;\n                    &lt;execution&gt;\n                        &lt;phase&gt;package&lt;/phase&gt;\n                        &lt;goals&gt;\n                            &lt;goal&gt;shade&lt;/goal&gt;\n                        &lt;/goals&gt;\n                        &lt;configuration&gt;\n                            &lt;finalName&gt;${project.artifactId}-bundled-${project.version}&lt;/finalName&gt;\n                            &lt;filters&gt;\n                                &lt;filter&gt;\n                                    &lt;artifact&gt;*:*&lt;/artifact&gt;\n                                    &lt;excludes&gt;\n                                        &lt;exclude&gt;META-INF/LICENSE&lt;/exclude&gt;\n                                        &lt;exclude&gt;META-INF/*.SF&lt;/exclude&gt;\n                                        &lt;exclude&gt;META-INF/*.DSA&lt;/exclude&gt;\n                                        &lt;exclude&gt;META-INF/*.RSA&lt;/exclude&gt;\n                                    &lt;/excludes&gt;\n                                &lt;/filter&gt;\n                            &lt;/filters&gt;\n                            &lt;transformers&gt;\n                                &lt;transformer implementation=&quot;org.apache.maven.plugins.shade.resource.ServicesResourceTransformer&quot;/&gt;\n                            &lt;/transformers&gt;\n                        &lt;/configuration&gt;\n                    &lt;/execution&gt;\n                &lt;/executions&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n\n        &lt;pluginManagement&gt;\n            &lt;plugins&gt;\n                &lt;plugin&gt;\n                    &lt;groupId&gt;org.codehaus.mojo&lt;/groupId&gt;\n                    &lt;artifactId&gt;exec-maven-plugin&lt;/artifactId&gt;\n                    &lt;version&gt;${maven-exec-plugin.version}&lt;/version&gt;\n                    &lt;configuration&gt;\n                        &lt;cleanupDaemonThreads&gt;false&lt;/cleanupDaemonThreads&gt;\n                    &lt;/configuration&gt;\n                &lt;/plugin&gt;\n            &lt;/plugins&gt;\n        &lt;/pluginManagement&gt;\n    &lt;/build&gt;\n\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.apache.beam&lt;/groupId&gt;\n            &lt;artifactId&gt;beam-sdks-java-core&lt;/artifactId&gt;\n            &lt;version&gt;${beam.version}&lt;/version&gt;\n        &lt;/dependency&gt;\n\n        &lt;!-- https://mvnrepository.com/artifact/com.google.re2j/re2j --&gt;\n        &lt;!-- https://mvnrepository.com/artifact/com.google.re2j/re2j --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.google.re2j&lt;/groupId&gt;\n            &lt;artifactId&gt;re2j&lt;/artifactId&gt;\n            &lt;version&gt;1.6&lt;/version&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.apache.commons&lt;/groupId&gt;\n            &lt;artifactId&gt;commons-lang3&lt;/artifactId&gt;\n            &lt;version&gt;3.1&lt;/version&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.apache.commons&lt;/groupId&gt;\n            &lt;artifactId&gt;commons-text&lt;/artifactId&gt;\n            &lt;version&gt;1.9&lt;/version&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.google.cloud.dataflow&lt;/groupId&gt;\n            &lt;artifactId&gt;google-cloud-dataflow-java-sdk-all&lt;/artifactId&gt;\n            &lt;version&gt;[1.6.0, 1.9.9)&lt;/version&gt;\n        &lt;/dependency&gt;\n\n\n\n        &lt;!--\n          By default, the starter project has a dependency on the Beam DirectRunner\n          to enable development and testing of pipelines. To run on another of the\n          Beam runners, add its module to this pom.xml according to the\n          runner-specific setup instructions on the Beam website:\n            http://beam.apache.org/documentation/#runners\n        --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.apache.beam&lt;/groupId&gt;\n            &lt;artifactId&gt;beam-runners-direct-java&lt;/artifactId&gt;\n            &lt;version&gt;${beam.version}&lt;/version&gt;\n            &lt;scope&gt;runtime&lt;/scope&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.apache.beam&lt;/groupId&gt;\n            &lt;artifactId&gt;beam-runners-google-cloud-dataflow-java&lt;/artifactId&gt;\n            &lt;version&gt;${beam.version}&lt;/version&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.apache.beam&lt;/groupId&gt;\n            &lt;artifactId&gt;beam-sdks-java-io-google-cloud-platform&lt;/artifactId&gt;\n            &lt;version&gt;${beam.version}&lt;/version&gt;\n        &lt;/dependency&gt;\n\n        &lt;!-- slf4j API frontend binding with JUL backend --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.slf4j&lt;/groupId&gt;\n            &lt;artifactId&gt;slf4j-api&lt;/artifactId&gt;\n            &lt;version&gt;${slf4j.version}&lt;/version&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.slf4j&lt;/groupId&gt;\n            &lt;artifactId&gt;slf4j-jdk14&lt;/artifactId&gt;\n            &lt;version&gt;${slf4j.version}&lt;/version&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.google.auto.value&lt;/groupId&gt;\n            &lt;artifactId&gt;auto-value&lt;/artifactId&gt;\n            &lt;version&gt;${autovalue.version}&lt;/version&gt;\n            &lt;scope&gt;provided&lt;/scope&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.google.auto.value&lt;/groupId&gt;\n            &lt;artifactId&gt;auto-value-annotations&lt;/artifactId&gt;\n            &lt;version&gt;${autovalue.annotations.version}&lt;/version&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.google.protobuf&lt;/groupId&gt;\n            &lt;artifactId&gt;protobuf-java&lt;/artifactId&gt;\n            &lt;version&gt;3.12.0&lt;/version&gt;\n        &lt;/dependency&gt;\n\n        &lt;!-- https://mvnrepository.com/artifact/com.google.cloud.datastore/datastore-v1-proto-client --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.google.cloud.datastore&lt;/groupId&gt;\n            &lt;artifactId&gt;datastore-v1-proto-client&lt;/artifactId&gt;\n            &lt;version&gt;2.11.0&lt;/version&gt;\n        &lt;/dependency&gt;\n\n\n    &lt;/dependencies&gt;\n&lt;/project&gt;\n</code></pre>\n"},{"tags":["java","apache-poi"],"comments":[{"owner":{"account_id":25466,"reputation":36566,"user_id":65464,"accept_rate":93,"display_name":"Erich Kitzmueller"},"score":0,"creation_date":1433650234,"post_id":30689931,"comment_id":49439067,"body_markdown":"row.cellIterator knows the number of cells very well, scanning further is possible (row.getCell) but is entirely pointless","body":"row.cellIterator knows the number of cells very well, scanning further is possible (row.getCell) but is entirely pointless"},{"owner":{"account_id":1986016,"reputation":3436,"user_id":1781222,"accept_rate":71,"display_name":"TheCodingFrog"},"score":0,"creation_date":1433650262,"post_id":30689931,"comment_id":49439070,"body_markdown":"possible duplicate of [Read excel file 2010 apache poi ignoring empty cells](http://stackoverflow.com/questions/13048981/read-excel-file-2010-apache-poi-ignoring-empty-cells)","body":"possible duplicate of <a href=\"http://stackoverflow.com/questions/13048981/read-excel-file-2010-apache-poi-ignoring-empty-cells\">Read excel file 2010 apache poi ignoring empty cells</a>"},{"owner":{"account_id":6343467,"reputation":89,"user_id":4924732,"accept_rate":8,"display_name":"erertg ghg"},"score":0,"creation_date":1433652229,"post_id":30689931,"comment_id":49439365,"body_markdown":"@ammoQ Thanks for the advise please request you tu show how  can we scan the next 20 columns please","body":"@ammoQ Thanks for the advise please request you tu show how  can we scan the next 20 columns please"}],"answers":[{"tags":[],"owner":{"account_id":3286109,"reputation":14045,"user_id":2765603,"accept_rate":90,"display_name":"llogiq"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1433660363,"creation_date":1433658130,"answer_id":30690667,"question_id":30689931,"body_markdown":"First, you should probably use the `org.apache.poi.ss.usermodel` API, which work with all Excel files while the `HSSF*` classes only work with `.xls` files.\r\n\r\nThe `org.apache.poi.ss.usermodel.Sheet` class has a [`getFirstRow()`][1] method that you can use to start your search. Next you want to find a sequence of Cells containing the given Strings, like:\r\n\r\n    // This is an array containing the headers\r\n    final String[] headers = { &quot;TradeRef&quot;, &quot;TMS&quot;, &quot;Deal&quot;, &quot;Date&quot; };\r\n\r\n    // now we take row from above to be the Row object where we seek our headers\r\n    int last = row.getLastCellNum();\r\n    for (int c = row.getFirstCellNum(); c &lt; last; c++) {\r\n        int h = 0;\r\n        // check if the cell at (c + h) has the required value\r\n        for (; h &lt; headers.length &amp;&amp; c + h &lt; last; h++) {\r\n            if (!headers[h].equals(row.getCell(c + h).getStringCellValue())) {\r\n                break; // if the cell value differs from our header\r\n            }\r\n        }\r\n        if (h == headers.length) // this means the break was never invoked \r\n            return c; // found it\r\n    }\r\n    return -1; // not found\r\n\r\n  [1]: http://poi.apache.org/apidocs/org/apache/poi/ss/usermodel/Sheet.html#getFirstRowNum()","title":"iterating over the columns of a row through poi in java","body":"<p>First, you should probably use the <code>org.apache.poi.ss.usermodel</code> API, which work with all Excel files while the <code>HSSF*</code> classes only work with <code>.xls</code> files.</p>\n\n<p>The <code>org.apache.poi.ss.usermodel.Sheet</code> class has a <a href=\"http://poi.apache.org/apidocs/org/apache/poi/ss/usermodel/Sheet.html#getFirstRowNum()\" rel=\"nofollow\"><code>getFirstRow()</code></a> method that you can use to start your search. Next you want to find a sequence of Cells containing the given Strings, like:</p>\n\n<pre><code>// This is an array containing the headers\nfinal String[] headers = { \"TradeRef\", \"TMS\", \"Deal\", \"Date\" };\n\n// now we take row from above to be the Row object where we seek our headers\nint last = row.getLastCellNum();\nfor (int c = row.getFirstCellNum(); c &lt; last; c++) {\n    int h = 0;\n    // check if the cell at (c + h) has the required value\n    for (; h &lt; headers.length &amp;&amp; c + h &lt; last; h++) {\n        if (!headers[h].equals(row.getCell(c + h).getStringCellValue())) {\n            break; // if the cell value differs from our header\n        }\n    }\n    if (h == headers.length) // this means the break was never invoked \n        return c; // found it\n}\nreturn -1; // not found\n</code></pre>\n"},{"tags":[],"owner":{"account_id":18618594,"reputation":158,"user_id":13569349,"display_name":"Mateus Nogueira"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1661453205,"creation_date":1661452810,"answer_id":73492323,"question_id":30689931,"body_markdown":"if you want to skip column you can use \r\n\r\n    while (cellsInRow.hasNext()) {\r\n         Cell currentCell = cellsInRow.next();\r\n\r\n         if (currentCell.getColumnIndex() &gt;= 3 &amp;&amp; currentCell.getColumnIndex() &lt;= 6) {\r\n             continue;\r\n         }\r\n             }\r\n\r\nto skip column 4, 5, 6 and 7 from excel file. index starts at 0","title":"iterating over the columns of a row through poi in java","body":"<p>if you want to skip column you can use</p>\n<pre><code>while (cellsInRow.hasNext()) {\n     Cell currentCell = cellsInRow.next();\n\n     if (currentCell.getColumnIndex() &gt;= 3 &amp;&amp; currentCell.getColumnIndex() &lt;= 6) {\n         continue;\n     }\n         }\n</code></pre>\n<p>to skip column 4, 5, 6 and 7 from excel file. index starts at 0</p>\n"}],"owner":{"account_id":6343467,"reputation":89,"user_id":4924732,"accept_rate":8,"display_name":"erertg ghg"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":7156,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1661453205,"creation_date":1433649808,"question_id":30689931,"body_markdown":"I have a excel file named abc.xls in my c: drive (local computer) , now in that excel file in the first sheet itself there is a table as shown below and this below table can lie in any range  with in the sheet so i have developed the below java program which will scan the entire sheet first by row basis and then on column basis and will find the cell where\r\nTradeRef is there \r\n\r\n\r\n     TradeRef   TMS  Deal     Date        \r\n        12      45   DRT    23/97/2014      \r\n        23      36   QWE    21/07/2015  \r\n\r\n  \r\n\r\n now the problem in my below program is that it captures the cell where TradeRef is there and then it iterates over the columns and then in similar fashion it captures the next row and iterating over the columns\r\n \r\n but the logic that i want to apply is that when it captures the TradeRef cell  and iterating over the columns and reached to the last column of the table which is Date in the above table then it should further  scan the next 20 columns within the same row  and if within the next 20 columns there is no cell having any value then it should move to the next row and if within the 20 columns it mite be that any cell can have value then in that case it should read that cell value \r\n \r\n  \r\n so it would be like \r\n\r\n     \r\n     \r\n    \r\n     TradeRef   TMS  Deal     Date          &lt;----- scan next 20 columns is there is no value in next 20 cells then move to next row else include that cell value also-------&gt;\r\n        12      45   DRT    23/97/2014        \r\n        23      36   QWE    21/07/2015  \r\n\r\n\t\r\n\t\r\nso please advise how to implement the above logic of scanning the next 20 columns within the row below is my earlier implementation  that is \r\n\r\n    public class AAA {\r\n    \tpublic static void main(String[] args) throws IOException {\r\n    \t\t\r\n    \t\t\r\n    \t\tFileInputStream file = null ;\r\n    \t\t try {\r\n    \r\n    \t\t         file = new FileInputStream(new File(&quot;C:\\\\abc.xls&quot;));\r\n    \t\t        HSSFWorkbook workbook = new HSSFWorkbook(file);\r\n    \t\t\t\tHSSFSheet firstSheet = workbook.getSheetAt(0);\r\n    \t\t\t\tIterator&lt;Row&gt; iterator = firstSheet.iterator();\r\n    \t\t\t\t\r\n    \t\t\t\tCell c = findFirstRow(firstSheet);\r\n    \t\t\t }\r\n    \t\t\t\r\n    \t\t\t\r\n    \r\n    \t\t\t\r\n    \t\t     catch (FileNotFoundException e) {\r\n    \t\t        e.printStackTrace();\r\n    \t\t    } catch (IOException e) {\r\n    \t\t        e.printStackTrace();\r\n    \t\t    } finally{\r\n    \t\t    \tfile.close();\r\n    \t\t    }\r\n    \r\n    \t}\r\n    \r\n    \tpublic static Cell findFirstRow(HSSFSheet firstSheet) {\r\n    \t\t  for (Row row : firstSheet) {\r\n    \t\t    for (Cell cell : row) {\r\n    \t\t    \t  cell.setCellType(cell.CELL_TYPE_STRING);\r\n    \t\t      if (&quot;TradeRef&quot;.equals(cell.getStringCellValue())) {\r\n    \t\t        int row1 = cell.getRowIndex() + 1;\r\n    \t\t        int col = cell.getColumnIndex();\r\n    \t\t        if (firstSheet.getRow(row1) == null)\r\n    \t\t          throw new RuntimeException(&quot;Row &quot; + row1 + 1 + &quot; is empty!&quot;);\r\n    \t\t        Cell startOfFirstDataRow = firstSheet.getRow(row1).getCell(col);\r\n    \t\t        if (startOfFirstDataRow == null) {\r\n    \t\t          CellReference ref = new CellReference(row1, col);\r\n    \t\t          throw new RuntimeException(&quot;Data not found at &quot; + ref.formatAsString());\r\n    \t\t        }\r\n    \t\t        return startOfFirstDataRow;\r\n    \t\t      }\r\n    \t\t    }\r\n    \t\t  }\r\n    \t\t  throw new RuntimeException(&quot;TradingRef header cell not found!&quot;);\r\n    \t\t}\r\n    \r\n    \r\n    }\r\nso please advise how can i implement the above logic of scanning next 20 columns \r\n","title":"iterating over the columns of a row through poi in java","body":"<p>I have a excel file named abc.xls in my c: drive (local computer) , now in that excel file in the first sheet itself there is a table as shown below and this below table can lie in any range  with in the sheet so i have developed the below java program which will scan the entire sheet first by row basis and then on column basis and will find the cell where\nTradeRef is there </p>\n\n<pre><code> TradeRef   TMS  Deal     Date        \n    12      45   DRT    23/97/2014      \n    23      36   QWE    21/07/2015  \n</code></pre>\n\n<p>now the problem in my below program is that it captures the cell where TradeRef is there and then it iterates over the columns and then in similar fashion it captures the next row and iterating over the columns</p>\n\n<p>but the logic that i want to apply is that when it captures the TradeRef cell  and iterating over the columns and reached to the last column of the table which is Date in the above table then it should further  scan the next 20 columns within the same row  and if within the next 20 columns there is no cell having any value then it should move to the next row and if within the 20 columns it mite be that any cell can have value then in that case it should read that cell value </p>\n\n<p>so it would be like </p>\n\n<pre><code> TradeRef   TMS  Deal     Date          &lt;----- scan next 20 columns is there is no value in next 20 cells then move to next row else include that cell value also-------&gt;\n    12      45   DRT    23/97/2014        \n    23      36   QWE    21/07/2015  \n</code></pre>\n\n<p>so please advise how to implement the above logic of scanning the next 20 columns within the row below is my earlier implementation  that is </p>\n\n<pre><code>public class AAA {\n    public static void main(String[] args) throws IOException {\n\n\n        FileInputStream file = null ;\n         try {\n\n                 file = new FileInputStream(new File(\"C:\\\\abc.xls\"));\n                HSSFWorkbook workbook = new HSSFWorkbook(file);\n                HSSFSheet firstSheet = workbook.getSheetAt(0);\n                Iterator&lt;Row&gt; iterator = firstSheet.iterator();\n\n                Cell c = findFirstRow(firstSheet);\n             }\n\n\n\n\n             catch (FileNotFoundException e) {\n                e.printStackTrace();\n            } catch (IOException e) {\n                e.printStackTrace();\n            } finally{\n                file.close();\n            }\n\n    }\n\n    public static Cell findFirstRow(HSSFSheet firstSheet) {\n          for (Row row : firstSheet) {\n            for (Cell cell : row) {\n                  cell.setCellType(cell.CELL_TYPE_STRING);\n              if (\"TradeRef\".equals(cell.getStringCellValue())) {\n                int row1 = cell.getRowIndex() + 1;\n                int col = cell.getColumnIndex();\n                if (firstSheet.getRow(row1) == null)\n                  throw new RuntimeException(\"Row \" + row1 + 1 + \" is empty!\");\n                Cell startOfFirstDataRow = firstSheet.getRow(row1).getCell(col);\n                if (startOfFirstDataRow == null) {\n                  CellReference ref = new CellReference(row1, col);\n                  throw new RuntimeException(\"Data not found at \" + ref.formatAsString());\n                }\n                return startOfFirstDataRow;\n              }\n            }\n          }\n          throw new RuntimeException(\"TradingRef header cell not found!\");\n        }\n\n\n}\n</code></pre>\n\n<p>so please advise how can i implement the above logic of scanning next 20 columns </p>\n"},{"tags":["java","outlook","appointment"],"answers":[{"tags":[],"owner":{"account_id":131793,"reputation":64005,"user_id":332059,"accept_rate":57,"display_name":"Dmitry Streblechenko"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1661376258,"creation_date":1661376258,"answer_id":73479628,"question_id":73479389,"body_markdown":"You can use COM from Java under Windows ([Jacob][1]) - create an instance of the `Outlook.Application` object and call `CreateItem`.\r\n\r\nIn VB (easy to convert to Java):\r\n\r\n    set app = CreateObject(&quot;Outlook.Application&quot;)\r\n    set appt = app.CreateItem(1)\r\n    appt.Subject = &quot;test appointment&quot;\r\n    appt.Body = &quot;Test body&quot;\r\n    appt.Start = #08/27/2022#\r\n    appt.Display()\r\n\r\n\r\n\r\n\r\n  [1]: https://github.com/freemansoft/jacob-project","title":"How to simply launch Outlook&#39;s new appointment window with some prefilled data in JAVA?","body":"<p>You can use COM from Java under Windows (<a href=\"https://github.com/freemansoft/jacob-project\" rel=\"nofollow noreferrer\">Jacob</a>) - create an instance of the <code>Outlook.Application</code> object and call <code>CreateItem</code>.</p>\n<p>In VB (easy to convert to Java):</p>\n<pre><code>set app = CreateObject(&quot;Outlook.Application&quot;)\nset appt = app.CreateItem(1)\nappt.Subject = &quot;test appointment&quot;\nappt.Body = &quot;Test body&quot;\nappt.Start = #08/27/2022#\nappt.Display()\n</code></pre>\n"}],"owner":{"account_id":12528195,"reputation":11,"user_id":9117269,"display_name":"Kannu Verma"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":150,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1661453102,"creation_date":1661374618,"question_id":73479389,"body_markdown":"We can launch Outlook&#39; email by simply using:\r\n\r\n*Desktop.getDesktop().mail(new java.net.URI(&quot;mailto:YourEmailAddress@gmail.com?subject=TEST&quot;));*\r\n\r\nIs there a similar way to launch an Outlook&#39;s new appointment window with some data prefilled? (Not send the new meeting request, just launch the form).","title":"How to simply launch Outlook&#39;s new appointment window with some prefilled data in JAVA?","body":"<p>We can launch Outlook' email by simply using:</p>\n<p><em>Desktop.getDesktop().mail(new java.net.URI(&quot;mailto:YourEmailAddress@gmail.com?subject=TEST&quot;));</em></p>\n<p>Is there a similar way to launch an Outlook's new appointment window with some data prefilled? (Not send the new meeting request, just launch the form).</p>\n"},{"tags":["java"],"answers":[{"tags":[],"owner":{"account_id":110831,"reputation":450,"user_id":293123,"display_name":"Mikel"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1319799577,"creation_date":1319799577,"answer_id":7928334,"question_id":7928288,"body_markdown":"http://download.oracle.com/javase/tutorial/2d/printing/dialog.html","title":"Display printer dialog","body":"<p><a href=\"http://download.oracle.com/javase/tutorial/2d/printing/dialog.html\" rel=\"nofollow\">http://download.oracle.com/javase/tutorial/2d/printing/dialog.html</a></p>\n"}],"owner":{"account_id":319822,"reputation":1279,"user_id":637791,"accept_rate":86,"display_name":"Jannis Alexakis"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":307,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":7928334,"answer_count":1,"score":0,"last_activity_date":1661451910,"creation_date":1319799176,"question_id":7928288,"body_markdown":"I use the following line of code to have Adobe Reader print my generated PDF:\r\n\r\n    desktop.print(new File(&quot;temp.pdf&quot;));\r\n\r\nIt always uses the standard printer.\r\n\r\nIs there a way to display the &quot;choose printer&quot; dialog instead?","title":"Display printer dialog","body":"<p>I use the following line of code to have Adobe Reader print my generated PDF:</p>\n<pre><code>desktop.print(new File(&quot;temp.pdf&quot;));\n</code></pre>\n<p>It always uses the standard printer.</p>\n<p>Is there a way to display the &quot;choose printer&quot; dialog instead?</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":1102504,"reputation":66096,"user_id":1094597,"accept_rate":94,"display_name":"kosa"},"score":6,"creation_date":1351519368,"post_id":13123126,"comment_id":17843911,"body_markdown":"Have you tried it? Any issues?","body":"Have you tried it? Any issues?"},{"owner":{"account_id":113294,"reputation":54886,"user_id":298455,"accept_rate":100,"display_name":"Nishant"},"score":0,"creation_date":1351519426,"post_id":13123126,"comment_id":17843946,"body_markdown":"when you said `note Byte` did you mean **not** Byte` ? or it&#39;s just emphasis","body":"when you said <code>note Byte</code> did you mean <b>not</b> Byte` ? or it&#39;s just emphasis"},{"owner":{"account_id":220789,"reputation":114430,"user_id":478399,"accept_rate":83,"display_name":"AlexR"},"score":0,"creation_date":1351519474,"post_id":13123126,"comment_id":17843975,"body_markdown":"OK, your code should create list of byte arrays and add there one element. What&#39;s wrong?","body":"OK, your code should create list of byte arrays and add there one element. What&#39;s wrong?"}],"answers":[{"tags":[],"owner":{"account_id":437352,"reputation":19077,"user_id":824987,"accept_rate":56,"display_name":"Amit Deshpande"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1351519809,"creation_date":1351519439,"answer_id":13123154,"question_id":13123126,"body_markdown":"Problem is at below line\r\n\r\n     byte[] deb = new byte[Byte.MIN_VALUE]; &lt;---Byte.MIN_VALUE -127 \r\n\r\nYou should declare your array with positive values Other wise you get **NegativeArraySizeException**.\r\n\r\n    byte[] deb = new byte[Some positive value];\r\n\r\n`Byte.MIN_VALUE` is `-127`. You can not create negative index array in java.","title":"Create a List of byte[]","body":"<p>Problem is at below line</p>\n\n<pre><code> byte[] deb = new byte[Byte.MIN_VALUE]; &lt;---Byte.MIN_VALUE -127 \n</code></pre>\n\n<p>You should declare your array with positive values Other wise you get <strong>NegativeArraySizeException</strong>.</p>\n\n<pre><code>byte[] deb = new byte[Some positive value];\n</code></pre>\n\n<p><code>Byte.MIN_VALUE</code> is <code>-127</code>. You can not create negative index array in java.</p>\n"},{"tags":[],"owner":{"account_id":1435980,"reputation":127999,"user_id":1357341,"accept_rate":100,"display_name":"arshajii"},"down_vote_count":0,"up_vote_count":8,"is_accepted":true,"score":8,"last_activity_date":1351520068,"creation_date":1351519451,"answer_id":13123157,"question_id":13123126,"body_markdown":"That will work fine because **arrays are objects** in Java, so you can build `List`s out of them.\r\n\r\n---\r\n\r\nNote that only in Java 7 can you do\r\n\r\n    List&lt;byte[]&gt; begin = new LinkedList&lt;&gt;();\r\n\r\nIn older versions you must restate the `byte[]`:\r\n\r\n    List&lt;byte[]&gt; begin = new LinkedList&lt;byte[]&gt;();\r\n\r\n---\r\n\r\nThis has been brought up already but I&#39;ll just reiterate it here. `Byte.MIN_VALUE` is less than `0`; you cannot create an array of length less than `0` (it results in a runtime error, specifically a `NegativeArraySizeException`). Did you mean `Byte.MAX_VALUE`?","title":"Create a List of byte[]","body":"<p>That will work fine because <strong>arrays are objects</strong> in Java, so you can build <code>List</code>s out of them.</p>\n\n<hr>\n\n<p>Note that only in Java 7 can you do</p>\n\n<pre><code>List&lt;byte[]&gt; begin = new LinkedList&lt;&gt;();\n</code></pre>\n\n<p>In older versions you must restate the <code>byte[]</code>:</p>\n\n<pre><code>List&lt;byte[]&gt; begin = new LinkedList&lt;byte[]&gt;();\n</code></pre>\n\n<hr>\n\n<p>This has been brought up already but I'll just reiterate it here. <code>Byte.MIN_VALUE</code> is less than <code>0</code>; you cannot create an array of length less than <code>0</code> (it results in a runtime error, specifically a <code>NegativeArraySizeException</code>). Did you mean <code>Byte.MAX_VALUE</code>?</p>\n"},{"tags":[],"owner":{"account_id":1025295,"reputation":46067,"user_id":1034737,"accept_rate":80,"display_name":"PermGenError"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1351519484,"creation_date":1351519484,"answer_id":13123169,"question_id":13123126,"body_markdown":"Arrays in java are objects. byte[] is an array which holds byte values. collections accept objects, thus List&lt;byte[]&gt; is a collection which holds byte[]. \r\nyour code should work without any problem. \r\n","title":"Create a List of byte[]","body":"<p>Arrays in java are objects. byte[] is an array which holds byte values. collections accept objects, thus List is a collection which holds byte[]. \nyour code should work without any problem. </p>\n"},{"tags":[],"owner":{"account_id":262968,"reputation":767120,"user_id":548225,"accept_rate":90,"display_name":"anubhava"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1351519503,"creation_date":1351519503,"answer_id":13123178,"question_id":13123126,"body_markdown":"This should work fine:\r\n\r\n    List&lt;byte[]&gt; begin = new LinkedList&lt;byte[]&gt;();","title":"Create a List of byte[]","body":"<p>This should work fine:</p>\n\n<pre><code>List&lt;byte[]&gt; begin = new LinkedList&lt;byte[]&gt;();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1147310,"reputation":2661,"user_id":1129781,"display_name":"Gijs Overvliet"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1351519695,"creation_date":1351519695,"answer_id":13123241,"question_id":13123126,"body_markdown":"First of all, `Byte.MIN_VALUE` is `-128`. If you try to create an array with negative length, you will get an error. \r\n\r\nSecond, as mentioned in other answers, the code to create the List should be\r\n\r\n    List&lt;byte[]&gt; begin = new LinkedList&lt;byte[]&gt;();","title":"Create a List of byte[]","body":"<p>First of all, <code>Byte.MIN_VALUE</code> is <code>-128</code>. If you try to create an array with negative length, you will get an error. </p>\n\n<p>Second, as mentioned in other answers, the code to create the List should be</p>\n\n<pre><code>List&lt;byte[]&gt; begin = new LinkedList&lt;byte[]&gt;();\n</code></pre>\n"}],"owner":{"account_id":1281346,"reputation":2180,"user_id":1251787,"accept_rate":70,"display_name":"Mehdi"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":313,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":13123157,"answer_count":5,"score":0,"last_activity_date":1661451631,"creation_date":1351519331,"question_id":13123126,"body_markdown":"How might you go about creating a List of `byte[]` (not `Byte`)?\r\n\r\nI want something like the following:\r\n\r\n    byte[] deb = new byte[Byte.MIN_VALUE];\r\n    List&lt;byte[]&gt; begin = new LinkedList&lt;&gt;();\r\n    begin.add(deb);","title":"Create a List of byte[]","body":"<p>How might you go about creating a List of <code>byte[]</code> (not <code>Byte</code>)?</p>\n<p>I want something like the following:</p>\n<pre><code>byte[] deb = new byte[Byte.MIN_VALUE];\nList&lt;byte[]&gt; begin = new LinkedList&lt;&gt;();\nbegin.add(deb);\n</code></pre>\n"},{"tags":["java","javafx","nullpointerexception","spinner"],"comments":[{"owner":{"account_id":7902935,"reputation":6346,"user_id":5969411,"accept_rate":80,"display_name":"ManoDestra"},"score":0,"creation_date":1460381120,"post_id":36549829,"comment_id":60700685,"body_markdown":"It&#39;s not a bug. It&#39;s an Integer spinner and it&#39;s a non integer value that&#39;s been placed inside it. It can only spin the values if they are valid integers. So, this would be expected behavior. You&#39;ll need to handle this potential exception in your code. Simply set Editable to false and it removes the ability to change that value.","body":"It&#39;s not a bug. It&#39;s an Integer spinner and it&#39;s a non integer value that&#39;s been placed inside it. It can only spin the values if they are valid integers. So, this would be expected behavior. You&#39;ll need to handle this potential exception in your code. Simply set Editable to false and it removes the ability to change that value."},{"owner":{"account_id":2053598,"reputation":41316,"user_id":1831987,"display_name":"VGR"},"score":3,"creation_date":1460381216,"post_id":36549829,"comment_id":60700775,"body_markdown":"@ManoDestra Have a look at the stack trace.  There is no point from which to catch it.  It&#39;s completely internal to JavaFX.","body":"@ManoDestra Have a look at the stack trace.  There is no point from which to catch it.  It&#39;s completely internal to JavaFX."},{"owner":{"account_id":7902935,"reputation":6346,"user_id":5969411,"accept_rate":80,"display_name":"ManoDestra"},"score":0,"creation_date":1460381457,"post_id":36549829,"comment_id":60700992,"body_markdown":"Because the above code does nothing to handle the control&#39;s events. And yet it&#39;s still be set to be editable. If you don&#39;t want the exception to occur, either set editable to false, or handle the controls events, if you allow it to be edited. Simple :)","body":"Because the above code does nothing to handle the control&#39;s events. And yet it&#39;s still be set to be editable. If you don&#39;t want the exception to occur, either set editable to false, or handle the controls events, if you allow it to be edited. Simple :)"},{"owner":{"account_id":2914715,"reputation":5751,"user_id":2498188,"accept_rate":85,"display_name":"Emily L."},"score":0,"creation_date":1460381559,"post_id":36549829,"comment_id":60701088,"body_markdown":"@ManoDestra please provide an example of how you would do this. I agree with VGR here I don&#39;t think there is a reasonable point where it can be handled.","body":"@ManoDestra please provide an example of how you would do this. I agree with VGR here I don&#39;t think there is a reasonable point where it can be handled."},{"owner":{"account_id":2518243,"reputation":203472,"user_id":2189127,"display_name":"James_D"},"score":1,"creation_date":1460381872,"post_id":36549829,"comment_id":60701340,"body_markdown":"@ManoDestra This is a bug. The `converter` property of the `IntegerSpinnerValueFactory` is supposed to handle this.","body":"@ManoDestra This is a bug. The <code>converter</code> property of the <code>IntegerSpinnerValueFactory</code> is supposed to handle this."},{"owner":{"account_id":7902935,"reputation":6346,"user_id":5969411,"accept_rate":80,"display_name":"ManoDestra"},"score":0,"creation_date":1460382869,"post_id":36549829,"comment_id":60702177,"body_markdown":"Added code to handle it in my answer :)","body":"Added code to handle it in my answer :)"}],"answers":[{"tags":[],"owner":{"account_id":2518243,"reputation":203472,"user_id":2189127,"display_name":"James_D"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1460382208,"creation_date":1460382208,"answer_id":36550511,"question_id":36549829,"body_markdown":"I would consider this a bug: the `IntegerSpinnerValueFactory` should properly handle this case.\r\n\r\nOne workaround is to provide a `converter` to the spinner value factory that evaluates to a default value if the text value is not valid:\r\n\r\n    import javafx.application.Application;\r\n    import javafx.scene.Scene;\r\n    import javafx.scene.control.Spinner;\r\n    import javafx.scene.control.SpinnerValueFactory.IntegerSpinnerValueFactory;\r\n    import javafx.stage.Stage;\r\n    import javafx.util.StringConverter;\r\n    \r\n    public class Test extends Application {\r\n        public static void main(String[] args) {\r\n            launch(args);\r\n        }\r\n    \r\n        @Override\r\n        public void start(Stage aPrimaryStage) throws Exception {\r\n            IntegerSpinnerValueFactory valueFactory = new IntegerSpinnerValueFactory(0, 10);\r\n            \r\n            valueFactory.setConverter(new StringConverter&lt;Integer&gt;() {\r\n    \r\n                @Override\r\n                public String toString(Integer object) {\r\n                    return object.toString() ;\r\n                }\r\n    \r\n                @Override\r\n                public Integer fromString(String string) {\r\n                    if (string.matches(&quot;-?\\\\d+&quot;)) {\r\n                        return new Integer(string);\r\n                    }\r\n                    // default to 0:\r\n                    return 0 ;\r\n                }\r\n                \r\n            });\r\n            \r\n            Spinner&lt;Integer&gt; spinner = new Spinner&lt;&gt;(valueFactory);\r\n            spinner.setEditable(true);\r\n            aPrimaryStage.setScene(new Scene(spinner));\r\n            aPrimaryStage.show();\r\n        }\r\n    }","title":"JavaFX&#39;s Spinner raises NullPointerException on empty text input","body":"<p>I would consider this a bug: the <code>IntegerSpinnerValueFactory</code> should properly handle this case.</p>\n\n<p>One workaround is to provide a <code>converter</code> to the spinner value factory that evaluates to a default value if the text value is not valid:</p>\n\n<pre><code>import javafx.application.Application;\nimport javafx.scene.Scene;\nimport javafx.scene.control.Spinner;\nimport javafx.scene.control.SpinnerValueFactory.IntegerSpinnerValueFactory;\nimport javafx.stage.Stage;\nimport javafx.util.StringConverter;\n\npublic class Test extends Application {\n    public static void main(String[] args) {\n        launch(args);\n    }\n\n    @Override\n    public void start(Stage aPrimaryStage) throws Exception {\n        IntegerSpinnerValueFactory valueFactory = new IntegerSpinnerValueFactory(0, 10);\n\n        valueFactory.setConverter(new StringConverter&lt;Integer&gt;() {\n\n            @Override\n            public String toString(Integer object) {\n                return object.toString() ;\n            }\n\n            @Override\n            public Integer fromString(String string) {\n                if (string.matches(\"-?\\\\d+\")) {\n                    return new Integer(string);\n                }\n                // default to 0:\n                return 0 ;\n            }\n\n        });\n\n        Spinner&lt;Integer&gt; spinner = new Spinner&lt;&gt;(valueFactory);\n        spinner.setEditable(true);\n        aPrimaryStage.setScene(new Scene(spinner));\n        aPrimaryStage.show();\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2914715,"reputation":5751,"user_id":2498188,"accept_rate":85,"display_name":"Emily L."},"down_vote_count":0,"up_vote_count":6,"is_accepted":true,"score":6,"last_activity_date":1460385644,"creation_date":1460382485,"answer_id":36550637,"question_id":36549829,"body_markdown":"I had a rummage through the JDK source.\n\n&lt;!-- language-all: lang-java --&gt;\n\nThe NPE is thrown from `if (newValue &lt; getMin()) { ` in the listener lambda here: \n\n&gt; javafx.scene.control.SpinnerValueFactory.java\n\n        public IntegerSpinnerValueFactory(@NamedArg(&quot;min&quot;) int min,\n                                          @NamedArg(&quot;max&quot;) int max,\n                                          @NamedArg(&quot;initialValue&quot;) int initialValue,\n                                          @NamedArg(&quot;amountToStepBy&quot;) int amountToStepBy) {\n            setMin(min);\n            setMax(max);\n            setAmountToStepBy(amountToStepBy);\n            setConverter(new IntegerStringConverter());\n\n            valueProperty().addListener((o, oldValue, newValue) -&gt; {\n                // when the value is set, we need to react to ensure it is a\n                // valid value (and if not, blow up appropriately)\n                if (newValue &lt; getMin()) { \n                    setValue(getMin());\n                } else if (newValue &gt; getMax()) {\n                    setValue(getMax());\n                }\n            });\n            setValue(initialValue &gt;= min &amp;&amp; initialValue &lt;= max ? initialValue : min);\n        }\n\npresumably `newValue` is `null` and the auto unboxing of `null` throws NPE. As the input comes from the editor, I suspect the `IntegerStringConverter` which is the default converter. \n\nLooking at the implementation here:\n\n&gt; javafx.util.converter.IntegerStringConverter\n\n    public class IntegerStringConverter extends StringConverter&lt;Integer&gt; {\n        /** {@inheritDoc} */\n        @Override public Integer fromString(String value) {\n            // If the specified value is null or zero-length, return null\n            if (value == null) {\n                return null;\n            }\n    \n            value = value.trim();\n    \n            if (value.length() &lt; 1) {\n                return null;\n            }\n    \n            return Integer.valueOf(value);\n        }\n    \n        /** {@inheritDoc} */\n        @Override public String toString(Integer value) {\n            // If the specified value is null, return a zero-length String\n            if (value == null) {\n                return &quot;&quot;;\n            }\n    \n            return (Integer.toString(((Integer)value).intValue()));\n        }\n    }\n\nWe see that it will happily return `null` for the empty string, which is kind of reasonable given that there exists no valid value for the input.\n\nTracing up the call stack I find where the value is coming from:\n\n&gt; javafx.scene.control.Spinner\n\n    public Spinner() {\n        getStyleClass().add(DEFAULT_STYLE_CLASS);\n        setAccessibleRole(AccessibleRole.SPINNER);\n\n        getEditor().setOnAction(action -&gt; {\n            String text = getEditor().getText();\n            SpinnerValueFactory&lt;T&gt; valueFactory = getValueFactory();\n            if (valueFactory != null) {\n                StringConverter&lt;T&gt; converter = valueFactory.getConverter();\n                if (converter != null) {\n                    T value = converter.fromString(text);\n                    valueFactory.setValue(value);\n                }\n            }\n        });\n\nThe value is set with the value obtained from the converter `T value = converter.fromString(text);` which presumably is null. At this point I believe that the spinner class should check that `value` is not `null` and if it is restore the previous value to the editor. \n\nI am now fairly sure that this is a bug. Moreover I don&#39;t think that a work around with a converter that never returns null is going to work properly as it will only mask the problem and what value should be returned when the value cannot be converted? \n\n# Edit: Workaround\n\nReplacing the `onAction` of the spinner editor to reject invalid input with a &quot;return to valid&quot; policy fixes the issue:\n\n    public static &lt;T&gt; void fixSpinner2(Spinner&lt;T&gt; aSpinner) {\n        aSpinner.getEditor().setOnAction(action -&gt; {\n            String text = aSpinner.getEditor().getText();\n            SpinnerValueFactory&lt;T&gt; factory = aSpinner.getValueFactory();\n            if (factory != null) {\n                StringConverter&lt;T&gt; converter = factory.getConverter();\n                if (converter != null) {\n                    T value = converter.fromString(text);\n                    if (null != value) {\n                        factory.setValue(value);\n                    }\n                    else {\n                        aSpinner.getEditor().setText(converter.toString(factory.getValue()));\n                    }\n                }\n            }\n            action.consume();\n        });\n    }\n\nAs opposed to a listener on the `valueProperty` this avoids triggering other listeners with invalid data. However this highlights another issue in the spinner class. While the above fixes the issue by returning to a valid value on pressing enter. Erasing the input without committing (pressing enter) and then pressing increment or decrement will cause the same NPE but with slightly different call stack.\n\nCause: \n\n    public void increment(int steps) {\n        SpinnerValueFactory&lt;T&gt; valueFactory = getValueFactory();\n        if (valueFactory == null) {\n            throw new IllegalStateException(&quot;Can&#39;t increment Spinner with a null SpinnerValueFactory&quot;);\n        }\n        commitEditorText();\n        valueFactory.increment(steps);\n    }\n\nDecrement is similar, both call into `commitEditorText` below:\n\n    private void commitEditorText() {\n        if (!isEditable()) return;\n        String text = getEditor().getText();\n        SpinnerValueFactory&lt;T&gt; valueFactory = getValueFactory();\n        if (valueFactory != null) {\n            StringConverter&lt;T&gt; converter = valueFactory.getConverter();\n            if (converter != null) {\n                T value = converter.fromString(text);\n                valueFactory.setValue(value);\n            }\n        }\n    }\n\nNotice the copy-paste from the `onAction` in the constructor: \n\n        getEditor().setOnAction(action -&gt; {\n            String text = getEditor().getText();\n            SpinnerValueFactory&lt;T&gt; valueFactory = getValueFactory();\n            if (valueFactory != null) {\n                StringConverter&lt;T&gt; converter = valueFactory.getConverter();\n                if (converter != null) {\n                    T value = converter.fromString(text);\n                    valueFactory.setValue(value);\n                }\n            }\n        });\n\nI believe that `commitEditorText` should be changed to trigger `onAction` on the editor instead like so:\n\n    private void commitEditorText() {\n        if (!isEditable()) return;\n        getEditor().getOnAction().handle(new ActionEvent(this, this));\n    }\n\nthen the behavior would be consistent and give the editor a chance to handle the input before it goes to the value factory.","title":"JavaFX&#39;s Spinner raises NullPointerException on empty text input","body":"<p>I had a rummage through the JDK source.</p>\n\n<p>The NPE is thrown from <code>if (newValue &lt; getMin()) { </code> in the listener lambda here:</p>\n<blockquote>\n<p>javafx.scene.control.SpinnerValueFactory.java</p>\n</blockquote>\n<pre class=\"lang-java prettyprint-override\"><code>    public IntegerSpinnerValueFactory(@NamedArg(&quot;min&quot;) int min,\n                                      @NamedArg(&quot;max&quot;) int max,\n                                      @NamedArg(&quot;initialValue&quot;) int initialValue,\n                                      @NamedArg(&quot;amountToStepBy&quot;) int amountToStepBy) {\n        setMin(min);\n        setMax(max);\n        setAmountToStepBy(amountToStepBy);\n        setConverter(new IntegerStringConverter());\n\n        valueProperty().addListener((o, oldValue, newValue) -&gt; {\n            // when the value is set, we need to react to ensure it is a\n            // valid value (and if not, blow up appropriately)\n            if (newValue &lt; getMin()) { \n                setValue(getMin());\n            } else if (newValue &gt; getMax()) {\n                setValue(getMax());\n            }\n        });\n        setValue(initialValue &gt;= min &amp;&amp; initialValue &lt;= max ? initialValue : min);\n    }\n</code></pre>\n<p>presumably <code>newValue</code> is <code>null</code> and the auto unboxing of <code>null</code> throws NPE. As the input comes from the editor, I suspect the <code>IntegerStringConverter</code> which is the default converter.</p>\n<p>Looking at the implementation here:</p>\n<blockquote>\n<p>javafx.util.converter.IntegerStringConverter</p>\n</blockquote>\n<pre class=\"lang-java prettyprint-override\"><code>public class IntegerStringConverter extends StringConverter&lt;Integer&gt; {\n    /** {@inheritDoc} */\n    @Override public Integer fromString(String value) {\n        // If the specified value is null or zero-length, return null\n        if (value == null) {\n            return null;\n        }\n\n        value = value.trim();\n\n        if (value.length() &lt; 1) {\n            return null;\n        }\n\n        return Integer.valueOf(value);\n    }\n\n    /** {@inheritDoc} */\n    @Override public String toString(Integer value) {\n        // If the specified value is null, return a zero-length String\n        if (value == null) {\n            return &quot;&quot;;\n        }\n\n        return (Integer.toString(((Integer)value).intValue()));\n    }\n}\n</code></pre>\n<p>We see that it will happily return <code>null</code> for the empty string, which is kind of reasonable given that there exists no valid value for the input.</p>\n<p>Tracing up the call stack I find where the value is coming from:</p>\n<blockquote>\n<p>javafx.scene.control.Spinner</p>\n</blockquote>\n<pre class=\"lang-java prettyprint-override\"><code>public Spinner() {\n    getStyleClass().add(DEFAULT_STYLE_CLASS);\n    setAccessibleRole(AccessibleRole.SPINNER);\n\n    getEditor().setOnAction(action -&gt; {\n        String text = getEditor().getText();\n        SpinnerValueFactory&lt;T&gt; valueFactory = getValueFactory();\n        if (valueFactory != null) {\n            StringConverter&lt;T&gt; converter = valueFactory.getConverter();\n            if (converter != null) {\n                T value = converter.fromString(text);\n                valueFactory.setValue(value);\n            }\n        }\n    });\n</code></pre>\n<p>The value is set with the value obtained from the converter <code>T value = converter.fromString(text);</code> which presumably is null. At this point I believe that the spinner class should check that <code>value</code> is not <code>null</code> and if it is restore the previous value to the editor.</p>\n<p>I am now fairly sure that this is a bug. Moreover I don't think that a work around with a converter that never returns null is going to work properly as it will only mask the problem and what value should be returned when the value cannot be converted?</p>\n<h1>Edit: Workaround</h1>\n<p>Replacing the <code>onAction</code> of the spinner editor to reject invalid input with a &quot;return to valid&quot; policy fixes the issue:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public static &lt;T&gt; void fixSpinner2(Spinner&lt;T&gt; aSpinner) {\n    aSpinner.getEditor().setOnAction(action -&gt; {\n        String text = aSpinner.getEditor().getText();\n        SpinnerValueFactory&lt;T&gt; factory = aSpinner.getValueFactory();\n        if (factory != null) {\n            StringConverter&lt;T&gt; converter = factory.getConverter();\n            if (converter != null) {\n                T value = converter.fromString(text);\n                if (null != value) {\n                    factory.setValue(value);\n                }\n                else {\n                    aSpinner.getEditor().setText(converter.toString(factory.getValue()));\n                }\n            }\n        }\n        action.consume();\n    });\n}\n</code></pre>\n<p>As opposed to a listener on the <code>valueProperty</code> this avoids triggering other listeners with invalid data. However this highlights another issue in the spinner class. While the above fixes the issue by returning to a valid value on pressing enter. Erasing the input without committing (pressing enter) and then pressing increment or decrement will cause the same NPE but with slightly different call stack.</p>\n<p>Cause:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public void increment(int steps) {\n    SpinnerValueFactory&lt;T&gt; valueFactory = getValueFactory();\n    if (valueFactory == null) {\n        throw new IllegalStateException(&quot;Can't increment Spinner with a null SpinnerValueFactory&quot;);\n    }\n    commitEditorText();\n    valueFactory.increment(steps);\n}\n</code></pre>\n<p>Decrement is similar, both call into <code>commitEditorText</code> below:</p>\n<pre class=\"lang-java prettyprint-override\"><code>private void commitEditorText() {\n    if (!isEditable()) return;\n    String text = getEditor().getText();\n    SpinnerValueFactory&lt;T&gt; valueFactory = getValueFactory();\n    if (valueFactory != null) {\n        StringConverter&lt;T&gt; converter = valueFactory.getConverter();\n        if (converter != null) {\n            T value = converter.fromString(text);\n            valueFactory.setValue(value);\n        }\n    }\n}\n</code></pre>\n<p>Notice the copy-paste from the <code>onAction</code> in the constructor:</p>\n<pre class=\"lang-java prettyprint-override\"><code>    getEditor().setOnAction(action -&gt; {\n        String text = getEditor().getText();\n        SpinnerValueFactory&lt;T&gt; valueFactory = getValueFactory();\n        if (valueFactory != null) {\n            StringConverter&lt;T&gt; converter = valueFactory.getConverter();\n            if (converter != null) {\n                T value = converter.fromString(text);\n                valueFactory.setValue(value);\n            }\n        }\n    });\n</code></pre>\n<p>I believe that <code>commitEditorText</code> should be changed to trigger <code>onAction</code> on the editor instead like so:</p>\n<pre class=\"lang-java prettyprint-override\"><code>private void commitEditorText() {\n    if (!isEditable()) return;\n    getEditor().getOnAction().handle(new ActionEvent(this, this));\n}\n</code></pre>\n<p>then the behavior would be consistent and give the editor a chance to handle the input before it goes to the value factory.</p>\n"},{"tags":[],"owner":{"account_id":7902935,"reputation":6346,"user_id":5969411,"accept_rate":80,"display_name":"ManoDestra"},"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1460383378,"creation_date":1460382570,"answer_id":36550660,"question_id":36549829,"body_markdown":"This is correct and expected behavior for an Integer based Spinner control.\r\n\r\nYou should either set its Editable property to false, if you do not wish users to edit the values set via the Factory.\r\n\r\nOr you should be handling the event raised by the spinner&#39;s value property.\r\n\r\nHere&#39;s a simple example of how to do so:\r\n\r\n    import javafx.application.Application;\r\n    import javafx.scene.Scene;\r\n    import javafx.scene.control.Spinner;\r\n    import javafx.scene.control.SpinnerValueFactory;\r\n    import javafx.scene.control.SpinnerValueFactory.IntegerSpinnerValueFactory;\r\n    import javafx.stage.Stage;\r\n    \r\n    import javafx.beans.value.ChangeListener;\r\n    import javafx.beans.value.ObservableValue;\r\n    \r\n    public class Spin extends Application {\r\n    \tSpinner&lt;Integer&gt; spinner;\r\n    \r\n    \tpublic static void main(String[] args) {\r\n    \t\tlaunch(args);\r\n    \t}\r\n    \r\n    \t@Override\r\n    \tpublic void start(Stage aPrimaryStage) throws Exception {\r\n    \t\tIntegerSpinnerValueFactory valueFactory = new IntegerSpinnerValueFactory(0, 10);\r\n    \t\tspinner = new Spinner&lt;&gt;(valueFactory);\r\n    \t\tspinner.setEditable(true);\r\n    \t\tspinner.valueProperty().addListener((observableValue, oldValue, newValue) -&gt; handleSpin(observableValue, oldValue, newValue));\r\n    \r\n    \t\taPrimaryStage.setScene(new Scene(spinner));\r\n    \t\taPrimaryStage.show();\r\n    \t}\r\n    \r\n    \tprivate void handleSpin(ObservableValue&lt;?&gt; observableValue, Number oldValue, Number newValue) {\r\n    \t\ttry {\r\n    \t\t\tif (newValue == null) {\r\n    \t\t\t\tspinner.getValueFactory().setValue((int)oldValue);\r\n    \t\t\t}\r\n    \t\t} catch (Exception e) {\r\n    \t\t\tSystem.out.println(e.getMessage());\r\n    \t\t}\r\n    \t}\r\n    }\r\n\r\n[This](https://stackoverflow.com/questions/32340476/manually-typing-in-text-in-javafx-spinner-is-not-updating-the-value-unless-user) may also assist you, if you wish to use a converter class to help in handling the changes more comprehensively.\r\n\r\nSee also the official documentation on the [setEditable method](https://docs.oracle.com/javase/8/javafx/api/javafx/scene/control/Spinner.html#setEditable-boolean-);","title":"JavaFX&#39;s Spinner raises NullPointerException on empty text input","body":"<p>This is correct and expected behavior for an Integer based Spinner control.</p>\n\n<p>You should either set its Editable property to false, if you do not wish users to edit the values set via the Factory.</p>\n\n<p>Or you should be handling the event raised by the spinner's value property.</p>\n\n<p>Here's a simple example of how to do so:</p>\n\n<pre><code>import javafx.application.Application;\nimport javafx.scene.Scene;\nimport javafx.scene.control.Spinner;\nimport javafx.scene.control.SpinnerValueFactory;\nimport javafx.scene.control.SpinnerValueFactory.IntegerSpinnerValueFactory;\nimport javafx.stage.Stage;\n\nimport javafx.beans.value.ChangeListener;\nimport javafx.beans.value.ObservableValue;\n\npublic class Spin extends Application {\n    Spinner&lt;Integer&gt; spinner;\n\n    public static void main(String[] args) {\n        launch(args);\n    }\n\n    @Override\n    public void start(Stage aPrimaryStage) throws Exception {\n        IntegerSpinnerValueFactory valueFactory = new IntegerSpinnerValueFactory(0, 10);\n        spinner = new Spinner&lt;&gt;(valueFactory);\n        spinner.setEditable(true);\n        spinner.valueProperty().addListener((observableValue, oldValue, newValue) -&gt; handleSpin(observableValue, oldValue, newValue));\n\n        aPrimaryStage.setScene(new Scene(spinner));\n        aPrimaryStage.show();\n    }\n\n    private void handleSpin(ObservableValue&lt;?&gt; observableValue, Number oldValue, Number newValue) {\n        try {\n            if (newValue == null) {\n                spinner.getValueFactory().setValue((int)oldValue);\n            }\n        } catch (Exception e) {\n            System.out.println(e.getMessage());\n        }\n    }\n}\n</code></pre>\n\n<p><a href=\"https://stackoverflow.com/questions/32340476/manually-typing-in-text-in-javafx-spinner-is-not-updating-the-value-unless-user\">This</a> may also assist you, if you wish to use a converter class to help in handling the changes more comprehensively.</p>\n\n<p>See also the official documentation on the <a href=\"https://docs.oracle.com/javase/8/javafx/api/javafx/scene/control/Spinner.html#setEditable-boolean-\" rel=\"nofollow noreferrer\">setEditable method</a>;</p>\n"},{"tags":[],"owner":{"account_id":1031978,"reputation":933,"user_id":1040139,"accept_rate":40,"display_name":"wzberger"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1460456684,"creation_date":1460456684,"answer_id":36570474,"question_id":36549829,"body_markdown":"It&#39;s a known bug which is fixed in Java 9 - see https://bugs.openjdk.java.net/browse/JDK-8150962","title":"JavaFX&#39;s Spinner raises NullPointerException on empty text input","body":"<p>It's a known bug which is fixed in Java 9 - see <a href=\"https://bugs.openjdk.java.net/browse/JDK-8150962\" rel=\"nofollow\">https://bugs.openjdk.java.net/browse/JDK-8150962</a></p>\n"},{"tags":[],"owner":{"account_id":100701,"reputation":859,"user_id":2964597,"display_name":"Andy Nugent"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1642596897,"creation_date":1642596588,"answer_id":70770880,"question_id":36549829,"body_markdown":"Another answer which worked for me, stopping you from entering any non-number value:\r\n\r\n    spinnerIndex.editorProperty().getValue().textProperty().addListener(new ChangeListener&lt;String&gt;() {\r\n\r\n\t\tprivate static boolean isInteger(final String s) {\r\n\t\t\ttry {\r\n\t\t\t\t@SuppressWarnings(&quot;unused&quot;)\r\n\t\t\t\tint d = Integer.parseInt(s);\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t\tcatch (NumberFormatException e) {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t}\r\n\r\n    \t@Override\r\n    \tpublic void changed(ObservableValue&lt;? extends String&gt; observable, String oldValue, String newValue) {\r\n    \t\tif (!isInteger(newValue)) {\r\n    \t\t\tfinal StringProperty sp = (StringProperty)observable;\r\n\t\t\t\tsp.set(oldValue);\r\n    \t\t}\r\n    \t}\r\n    });\r\n","title":"JavaFX&#39;s Spinner raises NullPointerException on empty text input","body":"<p>Another answer which worked for me, stopping you from entering any non-number value:</p>\n<pre><code>spinnerIndex.editorProperty().getValue().textProperty().addListener(new ChangeListener&lt;String&gt;() {\n\n    private static boolean isInteger(final String s) {\n        try {\n            @SuppressWarnings(&quot;unused&quot;)\n            int d = Integer.parseInt(s);\n            return true;\n        }\n        catch (NumberFormatException e) {\n            return false;\n        }\n    }\n\n    @Override\n    public void changed(ObservableValue&lt;? extends String&gt; observable, String oldValue, String newValue) {\n        if (!isInteger(newValue)) {\n            final StringProperty sp = (StringProperty)observable;\n            sp.set(oldValue);\n        }\n    }\n});\n</code></pre>\n"}],"owner":{"account_id":2914715,"reputation":5751,"user_id":2498188,"accept_rate":85,"display_name":"Emily L."},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":4010,"favorite_count":0,"down_vote_count":0,"up_vote_count":11,"accepted_answer_id":36550637,"answer_count":5,"score":11,"last_activity_date":1661451535,"creation_date":1460380537,"question_id":36549829,"body_markdown":"I have an issue where an editable JavaFX 8 `Spinner` causes an uncaught `NullPointerException` if one clears the editor text and commits and then clicks either the increment or decrement button. This is &lt;strike&gt;j8u60&lt;/strike&gt; j8u77. With some luck the increment/decrement button will get stuck in depressed state and the NPE&#39;s keep flowing locking up the application.\r\n\r\nThe following code reproduces the issue for me:\r\n\r\n    import javafx.application.Application;\r\n    import javafx.scene.Scene;\r\n    import javafx.scene.control.Spinner;\r\n    import javafx.scene.control.SpinnerValueFactory;\r\n    import javafx.scene.control.SpinnerValueFactory.IntegerSpinnerValueFactory;\r\n    import javafx.stage.Stage;\r\n    \r\n    public class Test extends Application {\r\n        public static void main(String[] args) {\r\n            launch(args);\r\n        }\r\n    \r\n        @Override\r\n        public void start(Stage aPrimaryStage) throws Exception {\r\n            IntegerSpinnerValueFactory valueFactory = new IntegerSpinnerValueFactory(0, 10);\r\n            Spinner&lt;Integer&gt; spinner = new Spinner&lt;&gt;(valueFactory);\r\n            spinner.setEditable(true);\r\n            aPrimaryStage.setScene(new Scene(spinner));\r\n            aPrimaryStage.show();\r\n        }\r\n    }\r\n\r\nRun it, clear the text, press enter (`NullPointerException`), clicking either increment or decrement button will now also cause NPE. \r\n\r\nCan any one confirm that this is a JavaFX bug and suggest a workaround?\r\n\r\nEdit: The exception stack trace\r\n\r\n    Exception in thread &quot;JavaFX Application Thread&quot; java.lang.NullPointerException\r\n    \tat javafx.scene.control.SpinnerValueFactory$IntegerSpinnerValueFactory.lambda$new$215(SpinnerValueFactory.java:475)\r\n    \tat com.sun.javafx.binding.ExpressionHelper$Generic.fireValueChangedEvent(ExpressionHelper.java:361)\r\n    \tat com.sun.javafx.binding.ExpressionHelper.fireValueChangedEvent(ExpressionHelper.java:81)\r\n    \tat javafx.beans.property.ObjectPropertyBase.fireValueChangedEvent(ObjectPropertyBase.java:105)\r\n    \tat javafx.beans.property.ObjectPropertyBase.markInvalid(ObjectPropertyBase.java:112)\r\n    \tat javafx.beans.property.ObjectPropertyBase.set(ObjectPropertyBase.java:146)\r\n    \tat javafx.scene.control.SpinnerValueFactory.setValue(SpinnerValueFactory.java:150)\r\n    \tat javafx.scene.control.Spinner.lambda$new$210(Spinner.java:139)\r\n    \tat com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(CompositeEventHandler.java:86)\r\n    \tat com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:238)\r\n    \tat com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:191)\r\n    \tat com.sun.javafx.event.CompositeEventDispatcher.dispatchBubblingEvent(CompositeEventDispatcher.java:59)\r\n    \tat com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:58)\r\n    \tat com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)\r\n    \tat com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)\r\n    \tat com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)\r\n    \tat com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)\r\n    \tat com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)\r\n    \tat com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)\r\n    \tat com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)\r\n    \tat com.sun.javafx.event.EventUtil.fireEventImpl(EventUtil.java:74)\r\n    \tat com.sun.javafx.event.EventUtil.fireEvent(EventUtil.java:49)\r\n    \tat javafx.event.Event.fireEvent(Event.java:198)\r\n    \tat javafx.scene.Node.fireEvent(Node.java:8411)\r\n    \tat com.sun.javafx.scene.control.behavior.TextFieldBehavior.fire(TextFieldBehavior.java:179)\r\n    \tat com.sun.javafx.scene.control.behavior.TextInputControlBehavior.callAction(TextInputControlBehavior.java:178)\r\n    \tat com.sun.javafx.scene.control.behavior.BehaviorBase.callActionForEvent(BehaviorBase.java:218)\r\n    \tat com.sun.javafx.scene.control.behavior.TextInputControlBehavior.callActionForEvent(TextInputControlBehavior.java:127)\r\n    \tat com.sun.javafx.scene.control.behavior.BehaviorBase.lambda$new$74(BehaviorBase.java:135)\r\n    \tat com.sun.javafx.event.CompositeEventHandler$NormalEventHandlerRecord.handleBubblingEvent(CompositeEventHandler.java:218)\r\n    \tat com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(CompositeEventHandler.java:80)\r\n    \tat com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:238)\r\n    \tat com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:191)\r\n    \tat com.sun.javafx.event.CompositeEventDispatcher.dispatchBubblingEvent(CompositeEventDispatcher.java:59)\r\n    \tat com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:58)\r\n    \tat com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)\r\n    \tat com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)\r\n    \tat com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)\r\n    \tat com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)\r\n    \tat com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)\r\n    \tat com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)\r\n    \tat com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)\r\n    \tat com.sun.javafx.event.EventUtil.fireEventImpl(EventUtil.java:74)\r\n    \tat com.sun.javafx.event.EventUtil.fireEvent(EventUtil.java:49)\r\n    \tat javafx.event.Event.fireEvent(Event.java:198)\r\n    \tat javafx.scene.Node.fireEvent(Node.java:8411)\r\n    \tat com.sun.javafx.scene.control.skin.SpinnerSkin.lambda$new$473(SpinnerSkin.java:151)\r\n    \tat com.sun.javafx.event.CompositeEventHandler$NormalEventFilterRecord.handleCapturingEvent(CompositeEventHandler.java:282)\r\n    \tat com.sun.javafx.event.CompositeEventHandler.dispatchCapturingEvent(CompositeEventHandler.java:98)\r\n    \tat com.sun.javafx.event.EventHandlerManager.dispatchCapturingEvent(EventHandlerManager.java:223)\r\n    \tat com.sun.javafx.event.EventHandlerManager.dispatchCapturingEvent(EventHandlerManager.java:180)\r\n    \tat com.sun.javafx.event.CompositeEventDispatcher.dispatchCapturingEvent(CompositeEventDispatcher.java:43)\r\n    \tat com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:52)\r\n    \tat com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)\r\n    \tat com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)\r\n    \tat com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)\r\n    \tat com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)\r\n    \tat com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)\r\n    \tat com.sun.javafx.event.EventUtil.fireEventImpl(EventUtil.java:74)\r\n    \tat com.sun.javafx.event.EventUtil.fireEvent(EventUtil.java:54)\r\n    \tat javafx.event.Event.fireEvent(Event.java:198)\r\n    \tat javafx.scene.Scene$KeyHandler.process(Scene.java:3964)\r\n    \tat javafx.scene.Scene$KeyHandler.access$1800(Scene.java:3910)\r\n    \tat javafx.scene.Scene.impl_processKeyEvent(Scene.java:2040)\r\n    \tat javafx.scene.Scene$ScenePeerListener.keyEvent(Scene.java:2501)\r\n    \tat com.sun.javafx.tk.quantum.GlassViewEventHandler$KeyEventNotification.run(GlassViewEventHandler.java:197)\r\n    \tat com.sun.javafx.tk.quantum.GlassViewEventHandler$KeyEventNotification.run(GlassViewEventHandler.java:147)\r\n    \tat java.security.AccessController.doPrivileged(Native Method)\r\n    \tat com.sun.javafx.tk.quantum.GlassViewEventHandler.lambda$handleKeyEvent$353(GlassViewEventHandler.java:228)\r\n    \tat com.sun.javafx.tk.quantum.QuantumToolkit.runWithoutRenderLock(QuantumToolkit.java:389)\r\n    \tat com.sun.javafx.tk.quantum.GlassViewEventHandler.handleKeyEvent(GlassViewEventHandler.java:227)\r\n    \tat com.sun.glass.ui.View.handleKeyEvent(View.java:546)\r\n    \tat com.sun.glass.ui.View.notifyKey(View.java:966)\r\n    \tat com.sun.glass.ui.win.WinApplication._runLoop(Native Method)\r\n    \tat com.sun.glass.ui.win.WinApplication.lambda$null$148(WinApplication.java:191)\r\n    \tat java.lang.Thread.run(Thread.java:745)","title":"JavaFX&#39;s Spinner raises NullPointerException on empty text input","body":"<p>I have an issue where an editable JavaFX 8 <code>Spinner</code> causes an uncaught <code>NullPointerException</code> if one clears the editor text and commits and then clicks either the increment or decrement button. This is <strike>j8u60</strike> j8u77. With some luck the increment/decrement button will get stuck in depressed state and the NPE's keep flowing locking up the application.</p>\n\n<p>The following code reproduces the issue for me:</p>\n\n<pre><code>import javafx.application.Application;\nimport javafx.scene.Scene;\nimport javafx.scene.control.Spinner;\nimport javafx.scene.control.SpinnerValueFactory;\nimport javafx.scene.control.SpinnerValueFactory.IntegerSpinnerValueFactory;\nimport javafx.stage.Stage;\n\npublic class Test extends Application {\n    public static void main(String[] args) {\n        launch(args);\n    }\n\n    @Override\n    public void start(Stage aPrimaryStage) throws Exception {\n        IntegerSpinnerValueFactory valueFactory = new IntegerSpinnerValueFactory(0, 10);\n        Spinner&lt;Integer&gt; spinner = new Spinner&lt;&gt;(valueFactory);\n        spinner.setEditable(true);\n        aPrimaryStage.setScene(new Scene(spinner));\n        aPrimaryStage.show();\n    }\n}\n</code></pre>\n\n<p>Run it, clear the text, press enter (<code>NullPointerException</code>), clicking either increment or decrement button will now also cause NPE. </p>\n\n<p>Can any one confirm that this is a JavaFX bug and suggest a workaround?</p>\n\n<p>Edit: The exception stack trace</p>\n\n<pre><code>Exception in thread \"JavaFX Application Thread\" java.lang.NullPointerException\n    at javafx.scene.control.SpinnerValueFactory$IntegerSpinnerValueFactory.lambda$new$215(SpinnerValueFactory.java:475)\n    at com.sun.javafx.binding.ExpressionHelper$Generic.fireValueChangedEvent(ExpressionHelper.java:361)\n    at com.sun.javafx.binding.ExpressionHelper.fireValueChangedEvent(ExpressionHelper.java:81)\n    at javafx.beans.property.ObjectPropertyBase.fireValueChangedEvent(ObjectPropertyBase.java:105)\n    at javafx.beans.property.ObjectPropertyBase.markInvalid(ObjectPropertyBase.java:112)\n    at javafx.beans.property.ObjectPropertyBase.set(ObjectPropertyBase.java:146)\n    at javafx.scene.control.SpinnerValueFactory.setValue(SpinnerValueFactory.java:150)\n    at javafx.scene.control.Spinner.lambda$new$210(Spinner.java:139)\n    at com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(CompositeEventHandler.java:86)\n    at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:238)\n    at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:191)\n    at com.sun.javafx.event.CompositeEventDispatcher.dispatchBubblingEvent(CompositeEventDispatcher.java:59)\n    at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:58)\n    at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)\n    at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)\n    at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)\n    at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)\n    at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)\n    at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)\n    at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)\n    at com.sun.javafx.event.EventUtil.fireEventImpl(EventUtil.java:74)\n    at com.sun.javafx.event.EventUtil.fireEvent(EventUtil.java:49)\n    at javafx.event.Event.fireEvent(Event.java:198)\n    at javafx.scene.Node.fireEvent(Node.java:8411)\n    at com.sun.javafx.scene.control.behavior.TextFieldBehavior.fire(TextFieldBehavior.java:179)\n    at com.sun.javafx.scene.control.behavior.TextInputControlBehavior.callAction(TextInputControlBehavior.java:178)\n    at com.sun.javafx.scene.control.behavior.BehaviorBase.callActionForEvent(BehaviorBase.java:218)\n    at com.sun.javafx.scene.control.behavior.TextInputControlBehavior.callActionForEvent(TextInputControlBehavior.java:127)\n    at com.sun.javafx.scene.control.behavior.BehaviorBase.lambda$new$74(BehaviorBase.java:135)\n    at com.sun.javafx.event.CompositeEventHandler$NormalEventHandlerRecord.handleBubblingEvent(CompositeEventHandler.java:218)\n    at com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(CompositeEventHandler.java:80)\n    at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:238)\n    at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:191)\n    at com.sun.javafx.event.CompositeEventDispatcher.dispatchBubblingEvent(CompositeEventDispatcher.java:59)\n    at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:58)\n    at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)\n    at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)\n    at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)\n    at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)\n    at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)\n    at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)\n    at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)\n    at com.sun.javafx.event.EventUtil.fireEventImpl(EventUtil.java:74)\n    at com.sun.javafx.event.EventUtil.fireEvent(EventUtil.java:49)\n    at javafx.event.Event.fireEvent(Event.java:198)\n    at javafx.scene.Node.fireEvent(Node.java:8411)\n    at com.sun.javafx.scene.control.skin.SpinnerSkin.lambda$new$473(SpinnerSkin.java:151)\n    at com.sun.javafx.event.CompositeEventHandler$NormalEventFilterRecord.handleCapturingEvent(CompositeEventHandler.java:282)\n    at com.sun.javafx.event.CompositeEventHandler.dispatchCapturingEvent(CompositeEventHandler.java:98)\n    at com.sun.javafx.event.EventHandlerManager.dispatchCapturingEvent(EventHandlerManager.java:223)\n    at com.sun.javafx.event.EventHandlerManager.dispatchCapturingEvent(EventHandlerManager.java:180)\n    at com.sun.javafx.event.CompositeEventDispatcher.dispatchCapturingEvent(CompositeEventDispatcher.java:43)\n    at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:52)\n    at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)\n    at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)\n    at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)\n    at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)\n    at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)\n    at com.sun.javafx.event.EventUtil.fireEventImpl(EventUtil.java:74)\n    at com.sun.javafx.event.EventUtil.fireEvent(EventUtil.java:54)\n    at javafx.event.Event.fireEvent(Event.java:198)\n    at javafx.scene.Scene$KeyHandler.process(Scene.java:3964)\n    at javafx.scene.Scene$KeyHandler.access$1800(Scene.java:3910)\n    at javafx.scene.Scene.impl_processKeyEvent(Scene.java:2040)\n    at javafx.scene.Scene$ScenePeerListener.keyEvent(Scene.java:2501)\n    at com.sun.javafx.tk.quantum.GlassViewEventHandler$KeyEventNotification.run(GlassViewEventHandler.java:197)\n    at com.sun.javafx.tk.quantum.GlassViewEventHandler$KeyEventNotification.run(GlassViewEventHandler.java:147)\n    at java.security.AccessController.doPrivileged(Native Method)\n    at com.sun.javafx.tk.quantum.GlassViewEventHandler.lambda$handleKeyEvent$353(GlassViewEventHandler.java:228)\n    at com.sun.javafx.tk.quantum.QuantumToolkit.runWithoutRenderLock(QuantumToolkit.java:389)\n    at com.sun.javafx.tk.quantum.GlassViewEventHandler.handleKeyEvent(GlassViewEventHandler.java:227)\n    at com.sun.glass.ui.View.handleKeyEvent(View.java:546)\n    at com.sun.glass.ui.View.notifyKey(View.java:966)\n    at com.sun.glass.ui.win.WinApplication._runLoop(Native Method)\n    at com.sun.glass.ui.win.WinApplication.lambda$null$148(WinApplication.java:191)\n    at java.lang.Thread.run(Thread.java:745)\n</code></pre>\n"},{"tags":["java","multithreading","try-catch","synchronized-block"],"answers":[{"tags":[],"owner":{"account_id":60171,"reputation":115485,"user_id":179850,"accept_rate":100,"display_name":"Gray"},"down_vote_count":0,"up_vote_count":14,"is_accepted":false,"score":14,"last_activity_date":1519767749,"creation_date":1361218753,"answer_id":14944615,"question_id":14944551,"body_markdown":"&gt; It is better to have a synchronized block inside a try block or a try block inside a synchronized block?\r\n\r\nUnless you explicitly need the `catch` to be in the `synchronized` block, I would make the `synchronized` section of code as small as possible and have it inside the try/catch.  So the first pattern would be better.  Then if you do need to do operations in the `catch` section (like log the exception or re-interrupt the thread, see below), these wouldn&#39;t block other threads.\r\n\r\nThat said, if the `synchronized` block contains a number of lines (usually not a good idea of course) then I would consider moving the try/catch block closer to the method that throws the exception (prolly `wait` or `notify`).  With a large number of lines, you run the risk of improperly handling exceptions with large try/catch blocks.  Depends a bit on the frame of reference here.\r\n\r\nAs an aside, make sure that you at least log interrupted exceptions.  Never just ignore them.  You probably also want to re-interrupt the thread:\r\n\r\n    try {\r\n       ...\r\n    } catch (InterruptedException e) {\r\n       // always a good pattern\r\n       Thread.currentThread().interrupt();\r\n       // handle the interrupt here by logging or returning or ...\r\n    }\r\n","title":"It is better to have a synchronized block inside a try block or a try block inside a synchronized block?","body":"<blockquote>\n  <p>It is better to have a synchronized block inside a try block or a try block inside a synchronized block?</p>\n</blockquote>\n\n<p>Unless you explicitly need the <code>catch</code> to be in the <code>synchronized</code> block, I would make the <code>synchronized</code> section of code as small as possible and have it inside the try/catch.  So the first pattern would be better.  Then if you do need to do operations in the <code>catch</code> section (like log the exception or re-interrupt the thread, see below), these wouldn't block other threads.</p>\n\n<p>That said, if the <code>synchronized</code> block contains a number of lines (usually not a good idea of course) then I would consider moving the try/catch block closer to the method that throws the exception (prolly <code>wait</code> or <code>notify</code>).  With a large number of lines, you run the risk of improperly handling exceptions with large try/catch blocks.  Depends a bit on the frame of reference here.</p>\n\n<p>As an aside, make sure that you at least log interrupted exceptions.  Never just ignore them.  You probably also want to re-interrupt the thread:</p>\n\n<pre><code>try {\n   ...\n} catch (InterruptedException e) {\n   // always a good pattern\n   Thread.currentThread().interrupt();\n   // handle the interrupt here by logging or returning or ...\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":118925,"reputation":5299,"user_id":310297,"accept_rate":97,"display_name":"Jazzepi"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1361218795,"creation_date":1361218795,"answer_id":14944626,"question_id":14944551,"body_markdown":"Does it matter if your catch block is synchronized? Since you&#39;ve got &quot;write something&quot; there I&#39;m assuming you&#39;re going to be doing some logging which shouldn&#39;t need to be synchronized with a good logging framework which would mean the answer is probably **no**.\r\n\r\nIn general your goal should be to use as little synchronization as possible. The smaller your synchronization block the less likely you are to run into issues.","title":"It is better to have a synchronized block inside a try block or a try block inside a synchronized block?","body":"<p>Does it matter if your catch block is synchronized? Since you've got \"write something\" there I'm assuming you're going to be doing some logging which shouldn't need to be synchronized with a good logging framework which would mean the answer is probably <strong>no</strong>.</p>\n\n<p>In general your goal should be to use as little synchronization as possible. The smaller your synchronization block the less likely you are to run into issues.</p>\n"},{"tags":[],"owner":{"account_id":277416,"reputation":681848,"user_id":571407,"accept_rate":100,"display_name":"JB Nizet"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1361218830,"creation_date":1361218830,"answer_id":14944633,"question_id":14944551,"body_markdown":"There is no best practice. It only depends if you need the exception handling part inside the synchronized block or not. You might want one or the other, and should choose the one which makes the synchronized block the shortest, while still making the code correct and thread-safe.","title":"It is better to have a synchronized block inside a try block or a try block inside a synchronized block?","body":"<p>There is no best practice. It only depends if you need the exception handling part inside the synchronized block or not. You might want one or the other, and should choose the one which makes the synchronized block the shortest, while still making the code correct and thread-safe.</p>\n"},{"tags":[],"owner":{"account_id":162919,"reputation":53273,"user_id":384706,"accept_rate":64,"display_name":"Cratylus"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1361218844,"creation_date":1361218844,"answer_id":14944637,"question_id":14944551,"body_markdown":"In this case, `InterruptedException` could happen only inside the `synchronized` block where you could either call `wait` or `sleep` or `notify`.  \r\n\r\nIn general the best practice is to put the `try/catch` block as close to the code that could throw an exception so that it is easy to identify the code to fix.  \r\n","title":"It is better to have a synchronized block inside a try block or a try block inside a synchronized block?","body":"<p>In this case, <code>InterruptedException</code> could happen only inside the <code>synchronized</code> block where you could either call <code>wait</code> or <code>sleep</code> or <code>notify</code>.  </p>\n\n<p>In general the best practice is to put the <code>try/catch</code> block as close to the code that could throw an exception so that it is easy to identify the code to fix.  </p>\n"},{"tags":[],"owner":{"account_id":76511,"reputation":44893,"user_id":218978,"accept_rate":100,"display_name":"irreputable"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1361219635,"creation_date":1361219635,"answer_id":14944822,"question_id":14944551,"body_markdown":"It has nothing to do with `synchronized{try{}}` or `try{synchronized{}}`, but everything to do with `synchronized{catch{}}` or `synchronized{} catch{}`. It really depends on what you do in the catch block.\r\n\r\nHowever, taking a guess, for `InterruptedException`, you usually should do `catch{}` outside `synchronized{}`. ","title":"It is better to have a synchronized block inside a try block or a try block inside a synchronized block?","body":"<p>It has nothing to do with <code>synchronized{try{}}</code> or <code>try{synchronized{}}</code>, but everything to do with <code>synchronized{catch{}}</code> or <code>synchronized{} catch{}</code>. It really depends on what you do in the catch block.</p>\n\n<p>However, taking a guess, for <code>InterruptedException</code>, you usually should do <code>catch{}</code> outside <code>synchronized{}</code>. </p>\n"},{"tags":[],"owner":{"account_id":71739,"reputation":307142,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1361228542,"creation_date":1361228542,"answer_id":14946891,"question_id":14944551,"body_markdown":"You seem to think this is just an aesthetic question. It isn&#39;t. It is a functional question and the answer is dictated by the requirement in each individual case. Each synchronized block should be as large as necessary to contain whatever needs to be synchronized, and no larger.","title":"It is better to have a synchronized block inside a try block or a try block inside a synchronized block?","body":"<p>You seem to think this is just an aesthetic question. It isn't. It is a functional question and the answer is dictated by the requirement in each individual case. Each synchronized block should be as large as necessary to contain whatever needs to be synchronized, and no larger.</p>\n"},{"tags":[],"owner":{"account_id":10010550,"reputation":346,"user_id":9465588,"display_name":"DGoiko"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1661451508,"creation_date":1661451079,"answer_id":73492018,"question_id":14944551,"body_markdown":"This is TOO old, but I was reviewing the code of a Junior coleague today and I found a huge bug related to used a Java Lock object like if it was a synchronized block. I was looking for some documentation about Java synchronized not being perfect and just came across this and thought about leaving the solution I have the guy:\r\n\r\nIn the case of synchronized, it really depends on your logic, since java guarantees the liberation of the lock.\r\n\r\nHowever, when you use Object based locks, like java&#39;s ReentrantLock, you must allways do the following:\r\n\r\n    private final ReentrantLock lock = new ReentrantLock ();\r\n    void foo() {\r\n        lock.lock();\r\n        try {\r\n            // Do your things\r\n        } finally {\r\n            lock.unlock();\r\n        }\r\n    }\r\n    \r\n\r\nOnce you have this structure to ensure lock liberation, you can either encapsulate both the lock and the whole try/finally into another try if you wasnt to handle the catch ourside the lock, or puit it where // Do your things is if you want to handle it from inside.\r\n\r\nAlso, keep in mind that java locks are not perfect, and like in any programming languaje, the choice of the type of the lock depends on the underlying languaje,  how critical the operation is (will someone die if the lock fails, or a controlled software retry once in a million times will do the trick?) and the performance impact of the lock.\r\n\r\nIf you know nothing about locks, I&#39;d recomend learning the following concepts:\r\n\r\n - Monitor (synchronization) \r\n - Mutual exclusion\r\n - Read/write lock pattern\r\n - Read-copy-update\r\n - Semaphore (programming)\r\n\r\nMost of the time, what you really need is either a semaphore a multiread singlewrite lock or just a monitor, so knowing the terms will let you search for what you need much faster. ","title":"It is better to have a synchronized block inside a try block or a try block inside a synchronized block?","body":"<p>This is TOO old, but I was reviewing the code of a Junior coleague today and I found a huge bug related to used a Java Lock object like if it was a synchronized block. I was looking for some documentation about Java synchronized not being perfect and just came across this and thought about leaving the solution I have the guy:</p>\n<p>In the case of synchronized, it really depends on your logic, since java guarantees the liberation of the lock.</p>\n<p>However, when you use Object based locks, like java's ReentrantLock, you must allways do the following:</p>\n<pre><code>private final ReentrantLock lock = new ReentrantLock ();\nvoid foo() {\n    lock.lock();\n    try {\n        // Do your things\n    } finally {\n        lock.unlock();\n    }\n}\n</code></pre>\n<p>Once you have this structure to ensure lock liberation, you can either encapsulate both the lock and the whole try/finally into another try if you wasnt to handle the catch ourside the lock, or puit it where // Do your things is if you want to handle it from inside.</p>\n<p>Also, keep in mind that java locks are not perfect, and like in any programming languaje, the choice of the type of the lock depends on the underlying languaje,  how critical the operation is (will someone die if the lock fails, or a controlled software retry once in a million times will do the trick?) and the performance impact of the lock.</p>\n<p>If you know nothing about locks, I'd recomend learning the following concepts:</p>\n<ul>\n<li>Monitor (synchronization)</li>\n<li>Mutual exclusion</li>\n<li>Read/write lock pattern</li>\n<li>Read-copy-update</li>\n<li>Semaphore (programming)</li>\n</ul>\n<p>Most of the time, what you really need is either a semaphore a multiread singlewrite lock or just a monitor, so knowing the terms will let you search for what you need much faster.</p>\n"}],"owner":{"account_id":2119667,"reputation":7639,"user_id":1883212,"accept_rate":14,"display_name":"user1883212"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":11062,"favorite_count":0,"down_vote_count":0,"up_vote_count":21,"answer_count":7,"score":21,"last_activity_date":1661451508,"creation_date":1361218517,"question_id":14944551,"body_markdown":"For example, is this better?\r\n\r\n\ttry {\r\n\t\tsynchronized (bean) {\r\n\t\t\t// Write something\t\t\t\t\r\n\t\t}\r\n\t} catch (InterruptedException e) {\r\n\t\t// Write something\r\n\t}\r\n\r\nOr it&#39;s better this:\r\n\r\n\tsynchronized (bean) {\r\n\t\ttry {\t\t\t\r\n\t\t\t// Write something\t\t\t\t\r\n\t\t}\r\n\t\tcatch (InterruptedException e) {\r\n\t\t\t// Write something\r\n\t\t}\r\n\t}\r\n\r\nI was wondering which one is best practice. Obviously considering I have to synchronize all the code inside the try block. I&#39;m not talking about the case I&#39;ve to synchronize only part of the code inside the try (in this case I think it would be better to have the synch block inside the try). My doubts are about the case where I&#39;ve to synchronize all the try block.\r\n\r\n\t","title":"It is better to have a synchronized block inside a try block or a try block inside a synchronized block?","body":"<p>For example, is this better?</p>\n\n<pre><code>try {\n    synchronized (bean) {\n        // Write something              \n    }\n} catch (InterruptedException e) {\n    // Write something\n}\n</code></pre>\n\n<p>Or it's better this:</p>\n\n<pre><code>synchronized (bean) {\n    try {           \n        // Write something              \n    }\n    catch (InterruptedException e) {\n        // Write something\n    }\n}\n</code></pre>\n\n<p>I was wondering which one is best practice. Obviously considering I have to synchronize all the code inside the try block. I'm not talking about the case I've to synchronize only part of the code inside the try (in this case I think it would be better to have the synch block inside the try). My doubts are about the case where I've to synchronize all the try block.</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":465573,"reputation":192694,"user_id":869736,"accept_rate":82,"display_name":"Louis Wasserman"},"score":1,"creation_date":1661448636,"post_id":73491548,"comment_id":129781316,"body_markdown":"Both of these methods look surprising and reflective of confusion in your design.  Could you give us a little more code?  For example, it&#39;s not clear if these generic parameters belong on your methods or on your types.","body":"Both of these methods look surprising and reflective of confusion in your design.  Could you give us a little more code?  For example, it&#39;s not clear if these generic parameters belong on your methods or on your types."},{"owner":{"account_id":3452279,"reputation":37360,"user_id":2891664,"accept_rate":100,"display_name":"Radiodef"},"score":0,"creation_date":1661448835,"post_id":73491548,"comment_id":129781381,"body_markdown":"Usually when people ask a question like this it turns out what they actually need is a type parameter at the class-level like `interface IEventListener&lt;T&gt;` but it&#39;s hard to tell without knowing more about how you&#39;re using this.","body":"Usually when people ask a question like this it turns out what they actually need is a type parameter at the class-level like <code>interface IEventListener&lt;T&gt;</code> but it&#39;s hard to tell without knowing more about how you&#39;re using this."},{"owner":{"account_id":465573,"reputation":192694,"user_id":869736,"accept_rate":82,"display_name":"Louis Wasserman"},"score":0,"creation_date":1661449085,"post_id":73491548,"comment_id":129781455,"body_markdown":"It looks like you should have `interface IEventListener&lt;T&gt; { public void onEvent(T object); } class MyClass implements IEventListener&lt;Player&gt; { public void onEvent(Player player) { ... } }`","body":"It looks like you should have <code>interface IEventListener&lt;T&gt; { public void onEvent(T object); } class MyClass implements IEventListener&lt;Player&gt; { public void onEvent(Player player) { ... } }</code>"},{"owner":{"account_id":25126998,"reputation":53,"user_id":18974675,"display_name":"Clean code"},"score":0,"creation_date":1661449128,"post_id":73491548,"comment_id":129781470,"body_markdown":"I did more edit. I use it using multiple methods and multi objects. I want define each parameter different on it&#39;s method.","body":"I did more edit. I use it using multiple methods and multi objects. I want define each parameter different on it&#39;s method."}],"answers":[{"tags":[],"owner":{"account_id":465573,"reputation":192694,"user_id":869736,"accept_rate":82,"display_name":"Louis Wasserman"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1661451267,"creation_date":1661451267,"answer_id":73492048,"question_id":73491548,"body_markdown":"It seems very clear, now, that your generics should be on the type, not the method -- and with your edit, you&#39;ll just need multiple parameters, i.e.\r\n\r\n```\r\ninterface IEventListener&lt;T1 extends MyCustomObject, T2 extends MyCustomObject&gt; {\r\n   void onEvent(T1 object);\r\n\r\n   void onEventTest2(T2 object);\r\n}\r\n\r\npublic class MyClass implements IEventListener&lt;Player, Item&gt; {\r\n   @Override public void onEvent(Player player) { ... }\r\n   @Override public void onEventTest2(Item item) { ... }\r\n}\r\n```\r\n\r\nThere is not going to be any way you can have the generics on the methods; they must be on the type.","title":"Different method parameter using generic from the interface parameter that implements it","body":"<p>It seems very clear, now, that your generics should be on the type, not the method -- and with your edit, you'll just need multiple parameters, i.e.</p>\n<pre><code>interface IEventListener&lt;T1 extends MyCustomObject, T2 extends MyCustomObject&gt; {\n   void onEvent(T1 object);\n\n   void onEventTest2(T2 object);\n}\n\npublic class MyClass implements IEventListener&lt;Player, Item&gt; {\n   @Override public void onEvent(Player player) { ... }\n   @Override public void onEventTest2(Item item) { ... }\n}\n</code></pre>\n<p>There is not going to be any way you can have the generics on the methods; they must be on the type.</p>\n"}],"owner":{"account_id":25126998,"reputation":53,"user_id":18974675,"display_name":"Clean code"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":31,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1661451267,"creation_date":1661448538,"question_id":73491548,"body_markdown":"I have an interface like this:\r\n\r\n```\r\n   public interface IEventListener\r\n   {\r\n\t   public &lt;T extends MyCustomObject&gt; void onEvent(final T object);\r\n\r\n       public &lt;T extends MyCustomObject&gt; void onEventTest2(final T object);\r\n   }\r\n```\r\nand in some other class that implements this interface i want call the same method but define whatever parameter i want like:\r\n\r\n```\r\npublic class MyClass implements IEventListener\r\n{\r\n   @Override\r\n   public &lt;T&gt; void onEvent(final Player player)\r\n   {\r\n     // My code here\r\n   }\r\n\r\n   @Override\r\n   public &lt;T&gt; void onEventTest2(final Item item)\r\n   {\r\n     // My code here\r\n   }\r\n}\r\n```\r\n\r\nHow can i achieve this ?","title":"Different method parameter using generic from the interface parameter that implements it","body":"<p>I have an interface like this:</p>\n<pre><code>   public interface IEventListener\n   {\n       public &lt;T extends MyCustomObject&gt; void onEvent(final T object);\n\n       public &lt;T extends MyCustomObject&gt; void onEventTest2(final T object);\n   }\n</code></pre>\n<p>and in some other class that implements this interface i want call the same method but define whatever parameter i want like:</p>\n<pre><code>public class MyClass implements IEventListener\n{\n   @Override\n   public &lt;T&gt; void onEvent(final Player player)\n   {\n     // My code here\n   }\n\n   @Override\n   public &lt;T&gt; void onEventTest2(final Item item)\n   {\n     // My code here\n   }\n}\n</code></pre>\n<p>How can i achieve this ?</p>\n"},{"tags":["java","spring","api","rest","statistics"],"answers":[{"tags":[],"owner":{"account_id":10363173,"reputation":303,"user_id":8694640,"display_name":"dope"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1660762075,"creation_date":1660762075,"answer_id":73393560,"question_id":73393157,"body_markdown":"With your approach you&#39;ll eventually run out of memory while trying to load huge amount of data from database. You could do processing in batches but then again it will only get you so far. Ideally any kind of statistical data or on demand reporting would be served by long running scheduled jobs which will periodically do processing in the background and generate the desired data for you. You could dump the result in a table and then serve it from there via an API. \r\n\r\n\r\n\r\nAnother approach is to do real time processing. If you could develop a streaming pipeline in your application then I would highly suggest you may explore [Apache Flink][1] project.\r\n\r\n\r\n  [1]: https://flink.apache.org/","title":"What are the best practices for calculating statistics in REST API applications","body":"<p>With your approach you'll eventually run out of memory while trying to load huge amount of data from database. You could do processing in batches but then again it will only get you so far. Ideally any kind of statistical data or on demand reporting would be served by long running scheduled jobs which will periodically do processing in the background and generate the desired data for you. You could dump the result in a table and then serve it from there via an API.</p>\n<p>Another approach is to do real time processing. If you could develop a streaming pipeline in your application then I would highly suggest you may explore <a href=\"https://flink.apache.org/\" rel=\"nofollow noreferrer\">Apache Flink</a> project.</p>\n"},{"tags":[],"owner":{"account_id":18756388,"reputation":165,"user_id":13676306,"display_name":"andrew kot"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1661451205,"creation_date":1661450724,"answer_id":73491956,"question_id":73393157,"body_markdown":"Well, I did&#39;t stop and made several solutions step by step...\r\n\r\n**Step 1:** Use `streams`. Before that, calculating statistics for 10,000 OrderEntities records took 18 seconds. Now it has accelerated to 14 seconds.\r\n\r\n**Step 2:** Using `parallelStream` instead of `streams`. Parallel streams accelerated the calculation of statistics to 6 seconds! I was even surprised.\r\n\r\n```\r\npublic SortedMap&lt;String, BigDecimal&gt; getStatisticsByParallelStreams() {\r\n\t\tList&lt;OrderEntity&gt; orders = new ArrayList&lt;&gt;();\r\n\t\torderService.findAll(Sort.by(Sort.Direction.ASC, &quot;createdDate&quot;)).forEach(orders::add);\r\n\r\n\t\tMathContext mc = new MathContext(3);\r\n\t\treturn orders.stream().collect(Collectors.toMap(\r\n\t\t\t\torder -&gt; order.getCreatedDate().format(DateTimeFormatter.ofPattern(&quot;yyyy-MM&quot;)),\r\n\t\t\t\torder -&gt; calculateTotal(order.getDishIds()\r\n\t\t\t\t\t\t.parallelStream()\r\n\t\t\t\t\t\t.map(dishId -&gt; dishV1Client.getDishById(dishId))\r\n\t\t\t\t\t\t.collect(Collectors.toList())),\r\n\t\t\t\t(a, b) -&gt; a.add(b, mc),\r\n\t\t\t\tTreeMap::new\r\n\t\t));\r\n\t}\r\n```\r\n**Step 3:** Optimizing requests to another microservice. I connected the **JProfiler** to the app and I have found out that I offen do extra requests to the another microservice. After it firstly I made a request to receive all Dishes, and then during calculating statistics, I use a recieved List of Dishes.\r\nAnd thus I speeded it up to **1.5 seconds**!:\r\n```\r\npublic SortedMap&lt;String, BigDecimal&gt; getStatisticsByParallelStreams() {\r\n\t\tList&lt;OrderEntity&gt; orders = new ArrayList&lt;&gt;();\r\n\t\torderService.findAll(Sort.by(Sort.Direction.ASC, &quot;createdDate&quot;)).forEach(orders::add);\r\n\r\n\t\tList&lt;FraudDishV1Response&gt; dishes = dishV1Client.getDishes();\r\n\r\n\t\tMathContext mc = new MathContext(3);\r\n\t\treturn orders.stream().collect(Collectors.toMap(\r\n\t\t\t\torder -&gt; order.getCreatedDate().format(DateTimeFormatter.ofPattern(&quot;yyyy-MM&quot;)),\r\n\t\t\t\torder -&gt; calculateTotal(order.getDishIds()\r\n\t\t\t\t\t\t.parallelStream()\r\n\t\t\t\t\t\t.map(dishId -&gt; getDishResponseById(dishes, dishId))\r\n\t\t\t\t\t\t.collect(Collectors.toList())),\r\n\t\t\t\t(a, b) -&gt; a.add(b, mc),\r\n\t\t\t\tTreeMap::new\r\n\t\t));\r\n\t}\r\n```","title":"What are the best practices for calculating statistics in REST API applications","body":"<p>Well, I did't stop and made several solutions step by step...</p>\n<p><strong>Step 1:</strong> Use <code>streams</code>. Before that, calculating statistics for 10,000 OrderEntities records took 18 seconds. Now it has accelerated to 14 seconds.</p>\n<p><strong>Step 2:</strong> Using <code>parallelStream</code> instead of <code>streams</code>. Parallel streams accelerated the calculation of statistics to 6 seconds! I was even surprised.</p>\n<pre><code>public SortedMap&lt;String, BigDecimal&gt; getStatisticsByParallelStreams() {\n        List&lt;OrderEntity&gt; orders = new ArrayList&lt;&gt;();\n        orderService.findAll(Sort.by(Sort.Direction.ASC, &quot;createdDate&quot;)).forEach(orders::add);\n\n        MathContext mc = new MathContext(3);\n        return orders.stream().collect(Collectors.toMap(\n                order -&gt; order.getCreatedDate().format(DateTimeFormatter.ofPattern(&quot;yyyy-MM&quot;)),\n                order -&gt; calculateTotal(order.getDishIds()\n                        .parallelStream()\n                        .map(dishId -&gt; dishV1Client.getDishById(dishId))\n                        .collect(Collectors.toList())),\n                (a, b) -&gt; a.add(b, mc),\n                TreeMap::new\n        ));\n    }\n</code></pre>\n<p><strong>Step 3:</strong> Optimizing requests to another microservice. I connected the <strong>JProfiler</strong> to the app and I have found out that I offen do extra requests to the another microservice. After it firstly I made a request to receive all Dishes, and then during calculating statistics, I use a recieved List of Dishes.\nAnd thus I speeded it up to <strong>1.5 seconds</strong>!:</p>\n<pre><code>public SortedMap&lt;String, BigDecimal&gt; getStatisticsByParallelStreams() {\n        List&lt;OrderEntity&gt; orders = new ArrayList&lt;&gt;();\n        orderService.findAll(Sort.by(Sort.Direction.ASC, &quot;createdDate&quot;)).forEach(orders::add);\n\n        List&lt;FraudDishV1Response&gt; dishes = dishV1Client.getDishes();\n\n        MathContext mc = new MathContext(3);\n        return orders.stream().collect(Collectors.toMap(\n                order -&gt; order.getCreatedDate().format(DateTimeFormatter.ofPattern(&quot;yyyy-MM&quot;)),\n                order -&gt; calculateTotal(order.getDishIds()\n                        .parallelStream()\n                        .map(dishId -&gt; getDishResponseById(dishes, dishId))\n                        .collect(Collectors.toList())),\n                (a, b) -&gt; a.add(b, mc),\n                TreeMap::new\n        ));\n    }\n</code></pre>\n"}],"owner":{"account_id":18756388,"reputation":165,"user_id":13676306,"display_name":"andrew kot"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":357,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":73491956,"answer_count":2,"score":0,"last_activity_date":1661451205,"creation_date":1660759961,"question_id":73393157,"body_markdown":"I am trying to make a service that will calculate statistics for each month.\r\n\r\nI did smth like this:\r\n```\r\npublic Map&lt;String, BigDecimal&gt; getStatistic() {\r\n\t\tList&lt;Order&gt; orders = orderService.findAll(Sort.by(Sort.Direction.ASC, &quot;creationDate&quot;)).toList();\r\n\t\tSortedMap&lt;String, BigDecimal&gt; statisticsMap = new TreeMap&lt;&gt;();\r\n\t\tMathContext mc = new MathContext(3);\r\n\t\tfor (Order order : orders) {\r\n\t\t\tList&lt;FraudDishV1Response&gt; dishesOfOrder = order.getDishIds()\r\n\t\t\t\t\t.stream()\r\n\t\t\t\t\t.map(dishId -&gt; dishV1Client.getDishById(dishId))\r\n\t\t\t\t\t.collect(Collectors.toList());\r\n\t\t\tBigDecimal total = calculateTotal(dishesOfOrder);\r\n\t\t\tString date = order.getCreatedDate().format(DateTimeFormatter.ofPattern(&quot;yyyy-MM&quot;));\r\n\t\t\tstatisticsMap.merge(date, total, (a, b) -&gt; a.add(b, mc));\r\n\t\t}\r\n\t\treturn statisticsMap;\r\n\t}\r\n```\r\nBut it takes a long time if there are lots of etries in the database.\r\nAre there any best practices for working with statistics in REST API applications?\r\n\r\nAnd also I&#39;d like to know if it is a good way to save the statistics in a separate repository? It will save time for calculating statistics, but during creating a record in the database, you will also have to update the statistics db.","title":"What are the best practices for calculating statistics in REST API applications","body":"<p>I am trying to make a service that will calculate statistics for each month.</p>\n<p>I did smth like this:</p>\n<pre><code>public Map&lt;String, BigDecimal&gt; getStatistic() {\n        List&lt;Order&gt; orders = orderService.findAll(Sort.by(Sort.Direction.ASC, &quot;creationDate&quot;)).toList();\n        SortedMap&lt;String, BigDecimal&gt; statisticsMap = new TreeMap&lt;&gt;();\n        MathContext mc = new MathContext(3);\n        for (Order order : orders) {\n            List&lt;FraudDishV1Response&gt; dishesOfOrder = order.getDishIds()\n                    .stream()\n                    .map(dishId -&gt; dishV1Client.getDishById(dishId))\n                    .collect(Collectors.toList());\n            BigDecimal total = calculateTotal(dishesOfOrder);\n            String date = order.getCreatedDate().format(DateTimeFormatter.ofPattern(&quot;yyyy-MM&quot;));\n            statisticsMap.merge(date, total, (a, b) -&gt; a.add(b, mc));\n        }\n        return statisticsMap;\n    }\n</code></pre>\n<p>But it takes a long time if there are lots of etries in the database.\nAre there any best practices for working with statistics in REST API applications?</p>\n<p>And also I'd like to know if it is a good way to save the statistics in a separate repository? It will save time for calculating statistics, but during creating a record in the database, you will also have to update the statistics db.</p>\n"},{"tags":["java","spring-boot","dto"],"answers":[{"tags":[],"owner":{"account_id":25690087,"reputation":1360,"user_id":19451633,"display_name":"Andrei Titov"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1661450751,"creation_date":1661450751,"answer_id":73491962,"question_id":73491592,"body_markdown":"You get `StackOverFlowError` because you end up with **infinite recursive methods call** and your application creates infinite amount of objects, so you just run out of memory:\r\n\r\n**1)** your `NoteEntityToDtoGet` method gets `Note`&#39;s group and calls `GroupEntityToDtoGet` method on the `Group` object;  \r\n**2)** in `GroupEntityToDtoGet` method you get all `Group`&#39;s notes and call `NoteConvertList` method on them, which calls `NoteEntityToDtoGet` on each of the &#39;Note&#39;  \r\n**3)** step 1 again...  \r\n... the same cycle goes over and over without a stop until your stack memory, you know, overflows :)\r\n\r\nSo you should decide do your DTO classes really need to hold references to other entity collections.","title":"Mapping multiple DTO to entities - nested exception","body":"<p>You get <code>StackOverFlowError</code> because you end up with <strong>infinite recursive methods call</strong> and your application creates infinite amount of objects, so you just run out of memory:</p>\n<p><strong>1)</strong> your <code>NoteEntityToDtoGet</code> method gets <code>Note</code>'s group and calls <code>GroupEntityToDtoGet</code> method on the <code>Group</code> object;<br />\n<strong>2)</strong> in <code>GroupEntityToDtoGet</code> method you get all <code>Group</code>'s notes and call <code>NoteConvertList</code> method on them, which calls <code>NoteEntityToDtoGet</code> on each of the 'Note'<br />\n<strong>3)</strong> step 1 again...<br />\n... the same cycle goes over and over without a stop until your stack memory, you know, overflows :)</p>\n<p>So you should decide do your DTO classes really need to hold references to other entity collections.</p>\n"}],"owner":{"account_id":23727935,"reputation":117,"user_id":17747601,"display_name":"m_novak"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1046,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":73491962,"answer_count":1,"score":0,"last_activity_date":1661450751,"creation_date":1661448751,"question_id":73491592,"body_markdown":"I&#39;m trying to map DTOs to entities. I created a service that only takes care of mapping objects - ObjectMapper. DTO objects have relationships with each other. When I map a single object, for example when I create User, Group, Note, everything works. But when I want to use a method that returns a Note with a specific ID - /notes/{id}, I get the following error.\r\n\r\n**Handler dispatch failed; nested exception is java.langStackOverflowError] with root cause**\r\n\r\nTo get specific Note, I need to use this mapping method that also cause this error. As u can see, I have to also convert Group and Tags.\r\n\r\n    //Note\r\n            public NoteDTO NoteEntityToDtoGet(Note note) {\r\n                NoteDTO noteDTO = new NoteDTO();\r\n                noteDTO.setId(note.getId());\r\n                noteDTO.setTitle(note.getTitle());\r\n                noteDTO.setDescription(note.getDescription());\r\n                noteDTO.setGroup(GroupEntityToDtoGet(note.getGroup()));\r\n                noteDTO.setTags(TagConvertSet(note.getTags()));\r\n                return noteDTO;\r\n            }\r\n\r\nWhen I don&#39;t have relationships defined as another DTO in the DTO class, but as an entity, everything works, since I don&#39;t have to convert the DTO to an entity.\r\n\r\nDo you know where I&#39;m making a mistake when mapping? Am I making a mistake in mapping multiple objects at once? \r\n\r\n**ObjectMapper**\r\n\r\n    @Service\r\n    public class ObjectMapper {\r\n    \r\n        //User\r\n        public UserDTO UserEntityToDtoGet(User user) {\r\n            UserDTO userDTO = new UserDTO();\r\n            userDTO.setId(user.getId());\r\n            userDTO.setName(user.getName());\r\n            userDTO.setEmail(user.getEmail());\r\n            userDTO.setGroup(user.getGroups());\r\n            return userDTO;\r\n        }\r\n    \r\n        private UserCreationDTO UserEntityToDtoCreate(User user) {\r\n            UserCreationDTO userCreationDTO = new UserCreationDTO();\r\n            userCreationDTO.setName(user.getName());\r\n            userCreationDTO.setEmail(user.getEmail());\r\n            return userCreationDTO;\r\n        }\r\n    \r\n        private User UserDtoToEntityCreate(UserCreationDTO userCreationDTO) {\r\n            User user = new User();\r\n            user.setName(userCreationDTO.getName());\r\n            user.setEmail(userCreationDTO.getEmail());\r\n            return user;\r\n        }\r\n    \r\n    \r\n        //Group\r\n        public GroupDTO GroupEntityToDtoGet(Group group) {\r\n            GroupDTO groupDTO = new GroupDTO();\r\n            groupDTO.setId(group.getId());\r\n            groupDTO.setName(group.getName());\r\n            groupDTO.setUser(UserEntityToDtoGet(group.getUser()));\r\n            groupDTO.setNotes(NoteConvertList(group.getNotes()));\r\n            groupDTO.setTags(TagConvertSet(group.getTags()));\r\n            return groupDTO;\r\n        }\r\n    \r\n        public GroupCreationDTO GroupEntityToDtoCreate(Group group) {\r\n            GroupCreationDTO groupCreationDTO = new GroupCreationDTO();\r\n            groupCreationDTO.setName(group.getName());\r\n            groupCreationDTO.setUser(UserEntityToDtoGet(group.getUser()));\r\n            groupCreationDTO.setTags(TagConvertSet(group.getTags()));\r\n            return groupCreationDTO;\r\n        }\r\n    \r\n        public Group GroupDtoToEntityCreate(GroupCreationDTO groupCreationDTO) {\r\n            Group group = new Group();\r\n            group.setName(groupCreationDTO.getName());\r\n            return group;\r\n        }\r\n    \r\n    \r\n        //Note\r\n        public NoteDTO NoteEntityToDtoGet(Note note) {\r\n            NoteDTO noteDTO = new NoteDTO();\r\n            noteDTO.setId(note.getId());\r\n            noteDTO.setTitle(note.getTitle());\r\n            noteDTO.setDescription(note.getDescription());\r\n            noteDTO.setGroup(GroupEntityToDtoGet(note.getGroup()));\r\n            noteDTO.setTags(TagConvertSet(note.getTags()));\r\n            return noteDTO;\r\n        }\r\n    \r\n        public Note NoteDtoToEntityCreate(NoteCreationDTO noteCreationDTO) {\r\n            Note note = new Note();\r\n            note.setTitle(noteCreationDTO.getTitle());\r\n            note.setDescription(noteCreationDTO.getDescription());\r\n            return note;\r\n        }\r\n    \r\n        public NoteCreationDTO NoteEntityToDtoCreate(Note note) {\r\n            NoteCreationDTO noteCreationDTO = new NoteCreationDTO();\r\n            noteCreationDTO.setTitle(note.getTitle());\r\n            noteCreationDTO.setDescription(note.getDescription());\r\n            return noteCreationDTO;\r\n        }\r\n    \r\n    \r\n        public List&lt;NoteDTO&gt; NoteConvertList(List&lt;Note&gt; note) {\r\n            return note.stream()\r\n                    .map(this::NoteEntityToDtoGet)\r\n                    .collect(Collectors.toList());\r\n        }\r\n    \r\n        //Tag\r\n        public TagDTO TagEntityToDtoGet(Tag tag) {\r\n            TagDTO tagDTO = new TagDTO();\r\n            tagDTO.setId(tag.getId());\r\n            tagDTO.setName(tag.getName());\r\n            tagDTO.setNotes(tag.getNotes());\r\n            tagDTO.setGroups(tag.getGroups());\r\n            return tagDTO;\r\n        }\r\n    \r\n        public TagCreationDTO TagEntityToDtoCreate(Tag tag) {\r\n            TagCreationDTO tagCreationDTO = new TagCreationDTO();\r\n            tagCreationDTO.setId(tag.getId());\r\n            tagCreationDTO.setName(tag.getName());\r\n            tagCreationDTO.setNotes(tag.getNotes());\r\n            return tagCreationDTO;\r\n        }\r\n    \r\n        public Set&lt;TagDTO&gt; TagConvertSet(Set&lt;Tag&gt; groups) {\r\n            return groups.stream()\r\n                    .map(this::TagEntityToDtoGet)\r\n                    .collect(Collectors.toSet());\r\n        }\r\n    }","title":"Mapping multiple DTO to entities - nested exception","body":"<p>I'm trying to map DTOs to entities. I created a service that only takes care of mapping objects - ObjectMapper. DTO objects have relationships with each other. When I map a single object, for example when I create User, Group, Note, everything works. But when I want to use a method that returns a Note with a specific ID - /notes/{id}, I get the following error.</p>\n<p><strong>Handler dispatch failed; nested exception is java.langStackOverflowError] with root cause</strong></p>\n<p>To get specific Note, I need to use this mapping method that also cause this error. As u can see, I have to also convert Group and Tags.</p>\n<pre><code>//Note\n        public NoteDTO NoteEntityToDtoGet(Note note) {\n            NoteDTO noteDTO = new NoteDTO();\n            noteDTO.setId(note.getId());\n            noteDTO.setTitle(note.getTitle());\n            noteDTO.setDescription(note.getDescription());\n            noteDTO.setGroup(GroupEntityToDtoGet(note.getGroup()));\n            noteDTO.setTags(TagConvertSet(note.getTags()));\n            return noteDTO;\n        }\n</code></pre>\n<p>When I don't have relationships defined as another DTO in the DTO class, but as an entity, everything works, since I don't have to convert the DTO to an entity.</p>\n<p>Do you know where I'm making a mistake when mapping? Am I making a mistake in mapping multiple objects at once?</p>\n<p><strong>ObjectMapper</strong></p>\n<pre><code>@Service\npublic class ObjectMapper {\n\n    //User\n    public UserDTO UserEntityToDtoGet(User user) {\n        UserDTO userDTO = new UserDTO();\n        userDTO.setId(user.getId());\n        userDTO.setName(user.getName());\n        userDTO.setEmail(user.getEmail());\n        userDTO.setGroup(user.getGroups());\n        return userDTO;\n    }\n\n    private UserCreationDTO UserEntityToDtoCreate(User user) {\n        UserCreationDTO userCreationDTO = new UserCreationDTO();\n        userCreationDTO.setName(user.getName());\n        userCreationDTO.setEmail(user.getEmail());\n        return userCreationDTO;\n    }\n\n    private User UserDtoToEntityCreate(UserCreationDTO userCreationDTO) {\n        User user = new User();\n        user.setName(userCreationDTO.getName());\n        user.setEmail(userCreationDTO.getEmail());\n        return user;\n    }\n\n\n    //Group\n    public GroupDTO GroupEntityToDtoGet(Group group) {\n        GroupDTO groupDTO = new GroupDTO();\n        groupDTO.setId(group.getId());\n        groupDTO.setName(group.getName());\n        groupDTO.setUser(UserEntityToDtoGet(group.getUser()));\n        groupDTO.setNotes(NoteConvertList(group.getNotes()));\n        groupDTO.setTags(TagConvertSet(group.getTags()));\n        return groupDTO;\n    }\n\n    public GroupCreationDTO GroupEntityToDtoCreate(Group group) {\n        GroupCreationDTO groupCreationDTO = new GroupCreationDTO();\n        groupCreationDTO.setName(group.getName());\n        groupCreationDTO.setUser(UserEntityToDtoGet(group.getUser()));\n        groupCreationDTO.setTags(TagConvertSet(group.getTags()));\n        return groupCreationDTO;\n    }\n\n    public Group GroupDtoToEntityCreate(GroupCreationDTO groupCreationDTO) {\n        Group group = new Group();\n        group.setName(groupCreationDTO.getName());\n        return group;\n    }\n\n\n    //Note\n    public NoteDTO NoteEntityToDtoGet(Note note) {\n        NoteDTO noteDTO = new NoteDTO();\n        noteDTO.setId(note.getId());\n        noteDTO.setTitle(note.getTitle());\n        noteDTO.setDescription(note.getDescription());\n        noteDTO.setGroup(GroupEntityToDtoGet(note.getGroup()));\n        noteDTO.setTags(TagConvertSet(note.getTags()));\n        return noteDTO;\n    }\n\n    public Note NoteDtoToEntityCreate(NoteCreationDTO noteCreationDTO) {\n        Note note = new Note();\n        note.setTitle(noteCreationDTO.getTitle());\n        note.setDescription(noteCreationDTO.getDescription());\n        return note;\n    }\n\n    public NoteCreationDTO NoteEntityToDtoCreate(Note note) {\n        NoteCreationDTO noteCreationDTO = new NoteCreationDTO();\n        noteCreationDTO.setTitle(note.getTitle());\n        noteCreationDTO.setDescription(note.getDescription());\n        return noteCreationDTO;\n    }\n\n\n    public List&lt;NoteDTO&gt; NoteConvertList(List&lt;Note&gt; note) {\n        return note.stream()\n                .map(this::NoteEntityToDtoGet)\n                .collect(Collectors.toList());\n    }\n\n    //Tag\n    public TagDTO TagEntityToDtoGet(Tag tag) {\n        TagDTO tagDTO = new TagDTO();\n        tagDTO.setId(tag.getId());\n        tagDTO.setName(tag.getName());\n        tagDTO.setNotes(tag.getNotes());\n        tagDTO.setGroups(tag.getGroups());\n        return tagDTO;\n    }\n\n    public TagCreationDTO TagEntityToDtoCreate(Tag tag) {\n        TagCreationDTO tagCreationDTO = new TagCreationDTO();\n        tagCreationDTO.setId(tag.getId());\n        tagCreationDTO.setName(tag.getName());\n        tagCreationDTO.setNotes(tag.getNotes());\n        return tagCreationDTO;\n    }\n\n    public Set&lt;TagDTO&gt; TagConvertSet(Set&lt;Tag&gt; groups) {\n        return groups.stream()\n                .map(this::TagEntityToDtoGet)\n                .collect(Collectors.toSet());\n    }\n}\n</code></pre>\n"},{"tags":["java","spring","spring-boot","junit"],"comments":[{"owner":{"account_id":3116234,"reputation":9296,"user_id":2636929,"display_name":"Stultuske"},"score":1,"creation_date":1661426216,"post_id":73486520,"comment_id":129772341,"body_markdown":"It seems like you are trying to mock your object, but you forget the actual mocking part","body":"It seems like you are trying to mock your object, but you forget the actual mocking part"},{"owner":{"account_id":22372569,"reputation":21,"user_id":16587414,"display_name":"chaitu"},"score":0,"creation_date":1661426326,"post_id":73486520,"comment_id":129772380,"body_markdown":"When i Mock TestDao , i am getting difference issue something like TestDao has ATestDao and BTestDao","body":"When i Mock TestDao , i am getting difference issue something like TestDao has ATestDao and BTestDao"},{"owner":{"account_id":22372569,"reputation":21,"user_id":16587414,"display_name":"chaitu"},"score":0,"creation_date":1661426781,"post_id":73486520,"comment_id":129772540,"body_markdown":"@Stultuske please let me know what i am missing here","body":"@Stultuske please let me know what i am missing here"}],"answers":[{"tags":[],"owner":{"account_id":1674328,"reputation":2652,"user_id":1540177,"display_name":"grekier"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1661426980,"creation_date":1661426980,"answer_id":73486696,"question_id":73486520,"body_markdown":"You are using a mock on the class you are testing. It will return null if you do not configure it otherwise. You need to actually instantiate the class.\r\n\r\n    // @MockBean &lt;-- Remove this\r\n    private TestDAOFactory daoFactory = new TestDAOFactory(); // Or add it in a setup method\r\n    @Test\r\n    void populateCacheFromPersistence() { \r\n      TestDao dao = daoFactory.getDao(&quot;A&quot;);//always getting null\r\n    }","title":"How to i get class instance from interface in JUnit test case","body":"<p>You are using a mock on the class you are testing. It will return null if you do not configure it otherwise. You need to actually instantiate the class.</p>\n<pre><code>// @MockBean &lt;-- Remove this\nprivate TestDAOFactory daoFactory = new TestDAOFactory(); // Or add it in a setup method\n@Test\nvoid populateCacheFromPersistence() { \n  TestDao dao = daoFactory.getDao(&quot;A&quot;);//always getting null\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":22372569,"reputation":21,"user_id":16587414,"display_name":"chaitu"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1661450330,"creation_date":1661450330,"answer_id":73491892,"question_id":73486520,"body_markdown":"i can able to fix it by adding @Profile(&quot;test&quot;) in configuration class\r\n\r\n    @Profile(&quot;test&quot;) \r\n      @Configuration\r\n    public class TestConfiguration {\r\n        \r\n            @Bean\r\n            @Primary\r\n            public TestDAOFactory daoFactory() {\r\n                return Mockito.mock(Test.class);\r\n            }\r\n    }","title":"How to i get class instance from interface in JUnit test case","body":"<p>i can able to fix it by adding @Profile(&quot;test&quot;) in configuration class</p>\n<pre><code>@Profile(&quot;test&quot;) \n  @Configuration\npublic class TestConfiguration {\n    \n        @Bean\n        @Primary\n        public TestDAOFactory daoFactory() {\n            return Mockito.mock(Test.class);\n        }\n}\n</code></pre>\n"}],"owner":{"account_id":22372569,"reputation":21,"user_id":16587414,"display_name":"chaitu"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":496,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1661450330,"creation_date":1661426174,"question_id":73486520,"body_markdown":"In my Junit test case , i am trying to get instance of class from Factory but its always return null, APersistenceDAO and BPersistenceDAO classes implements TestDao\r\n\r\n    @Component\r\n    public class TestDAOFactory {\r\n     public TestDao(String type) {\r\n    \t TestDaodao= null;\r\n    \t System.out.println(&quot;dao type &quot;+type);\r\n    \t switch(type) {\r\n    \t\r\n    \t case &quot;A&quot;:\r\n    \t\t dao = new APersistenceDAO();\r\n    \t\t break;\r\n    \t case &quot;B&quot;:\r\n    \t\t dao= new BPersistenceDAO();\r\n    \t\t break;\r\n    \t \r\n    \t }\r\n    \t\r\n    \treturn dao;\r\n    \t \r\n     }\r\n\r\nThis is my junit test code to get Dao reference\r\n\r\n     @MockBean\r\n      private TestDAOFactory daoFactory;\r\n    @Test\r\n      void populateCacheFromPersistence() {\r\n    \t  \r\n    \t  TestDao dao = daoFactory.getDao(&quot;A&quot;);//always getting null\r\n    }\r\n\r\nCan you please kindly check what i am missing here?\r\n\r\ni have added configuration as well \r\n\r\n      @Configuration\r\n    public class TestConfiguration {\r\n    \t\r\n    \t    @Bean\r\n    \t    @Primary\r\n    \t    public TestDAOFactory daoFactory() {\r\n    \t        return Mockito.mock(Test.class);\r\n    \t    }\r\n    }\r\n\r\nand from main test class , i have tried to get instance  using \r\n\r\n    @Autowired\r\n      private TestDAOFactory daoFactory;\r\n\r\n","title":"How to i get class instance from interface in JUnit test case","body":"<p>In my Junit test case , i am trying to get instance of class from Factory but its always return null, APersistenceDAO and BPersistenceDAO classes implements TestDao</p>\n<pre><code>@Component\npublic class TestDAOFactory {\n public TestDao(String type) {\n     TestDaodao= null;\n     System.out.println(&quot;dao type &quot;+type);\n     switch(type) {\n    \n     case &quot;A&quot;:\n         dao = new APersistenceDAO();\n         break;\n     case &quot;B&quot;:\n         dao= new BPersistenceDAO();\n         break;\n     \n     }\n    \n    return dao;\n     \n }\n</code></pre>\n<p>This is my junit test code to get Dao reference</p>\n<pre><code> @MockBean\n  private TestDAOFactory daoFactory;\n@Test\n  void populateCacheFromPersistence() {\n      \n      TestDao dao = daoFactory.getDao(&quot;A&quot;);//always getting null\n}\n</code></pre>\n<p>Can you please kindly check what i am missing here?</p>\n<p>i have added configuration as well</p>\n<pre><code>  @Configuration\npublic class TestConfiguration {\n    \n        @Bean\n        @Primary\n        public TestDAOFactory daoFactory() {\n            return Mockito.mock(Test.class);\n        }\n}\n</code></pre>\n<p>and from main test class , i have tried to get instance  using</p>\n<pre><code>@Autowired\n  private TestDAOFactory daoFactory;\n</code></pre>\n"},{"tags":["java","appium","appium-ios"],"answers":[{"tags":[],"owner":{"account_id":6988104,"reputation":2964,"user_id":5358255,"accept_rate":65,"display_name":"noor"},"down_vote_count":0,"up_vote_count":20,"is_accepted":true,"score":20,"last_activity_date":1643888177,"creation_date":1458304809,"answer_id":36084648,"question_id":36084388,"body_markdown":"i was in trouble also about this. But i solved this like below:\r\n\r\n\r\n    TouchAction action = new TouchAction(driver);\r\n    action.longPress(elem1).waitAction(3000).moveTo(elem2).perform().release();\r\n\r\n`waitAction` will wait to complete `longPress` action and then `moveTo` action will perform.","title":"appium long press and than move element(drag and drop) is not working","body":"<p>i was in trouble also about this. But i solved this like below:</p>\n<pre><code>TouchAction action = new TouchAction(driver);\naction.longPress(elem1).waitAction(3000).moveTo(elem2).perform().release();\n</code></pre>\n<p><code>waitAction</code> will wait to complete <code>longPress</code> action and then <code>moveTo</code> action will perform.</p>\n"},{"tags":[],"owner":{"account_id":13181829,"reputation":1,"user_id":9520958,"display_name":"Priya"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1521528777,"creation_date":1521528707,"answer_id":49377921,"question_id":36084388,"body_markdown":"    action.press(Element1).moveTo(Element2).release().perform();","title":"appium long press and than move element(drag and drop) is not working","body":"<pre><code>action.press(Element1).moveTo(Element2).release().perform();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4460893,"reputation":261,"user_id":3629788,"display_name":"sea cat"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1525354722,"creation_date":1525354722,"answer_id":50156486,"question_id":36084388,"body_markdown":"I found none of the longPress() combinations to work, so I got to this variant where you force it to perform the press and then move. Tested on Android and iOS, didn&#39;t seem to work for UWP\r\n\r\n    new TouchAction(driver)\r\n        .press(PointOption.point(256, 1115))\r\n        .waitAction(WaitOptions.waitOptions(Duration.ofMillis(2000)))\r\n        .perform()\r\n        .moveTo(PointOption.point(256, 600))\r\n        .release()\r\n        .perform();\r\n\r\n","title":"appium long press and than move element(drag and drop) is not working","body":"<p>I found none of the longPress() combinations to work, so I got to this variant where you force it to perform the press and then move. Tested on Android and iOS, didn't seem to work for UWP</p>\n\n<pre><code>new TouchAction(driver)\n    .press(PointOption.point(256, 1115))\n    .waitAction(WaitOptions.waitOptions(Duration.ofMillis(2000)))\n    .perform()\n    .moveTo(PointOption.point(256, 600))\n    .release()\n    .perform();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":18613826,"reputation":21,"user_id":13565561,"display_name":"Dolly Arora"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1589788230,"creation_date":1589788230,"answer_id":61864817,"question_id":36084388,"body_markdown":"    //You need to import following \r\n    import org.openqa.selenium.WebElement;\r\n    import io.appium.java_client.TouchAction;\r\n    import io.appium.java_client.touch.LongPressOptions;\r\n    import io.appium.java_client.touch.offset.ElementOption;\r\n    \r\n    //first for the intial location to be long pressed\r\n    WebElement first= driver.findElementByXPath(&quot;//*[@content-desc=&#39;15&#39;]&quot;);\r\n    \r\n    //second location on which you need to move to\r\n    WebElement second= driver.findElementByXPath(&quot;//*[@content-desc=&#39;45&#39;]&quot;);\r\n    \t\t\r\n    TouchAction action = new TouchAction(driver);\r\n    \r\n    //performing the long press\r\n    action.longPress(new LongPressOptions().withElement(new \r\n                           ElementOption().withElement(first))).perform();\r\n    \r\n    //performing the move to touch operation\r\n    action.moveTo(new ElementOption().withElement(second)).perform();","title":"appium long press and than move element(drag and drop) is not working","body":"<pre><code>//You need to import following \nimport org.openqa.selenium.WebElement;\nimport io.appium.java_client.TouchAction;\nimport io.appium.java_client.touch.LongPressOptions;\nimport io.appium.java_client.touch.offset.ElementOption;\n\n//first for the intial location to be long pressed\nWebElement first= driver.findElementByXPath(\"//*[@content-desc='15']\");\n\n//second location on which you need to move to\nWebElement second= driver.findElementByXPath(\"//*[@content-desc='45']\");\n\nTouchAction action = new TouchAction(driver);\n\n//performing the long press\naction.longPress(new LongPressOptions().withElement(new \n                       ElementOption().withElement(first))).perform();\n\n//performing the move to touch operation\naction.moveTo(new ElementOption().withElement(second)).perform();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":9310024,"reputation":962,"user_id":6912209,"accept_rate":71,"display_name":"Abdul.Moqueet"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1610433422,"creation_date":1610433422,"answer_id":65679066,"question_id":36084388,"body_markdown":"&gt; if U have references of elements already then you&#39;ll do like this:\r\n\r\n    TouchAction action = new TouchAction(driver);\r\n    \t\taction.longPress(new ElementOption().withElement(first))\r\n                    .waitAction(WaitOptions.waitOptions(Duration.ofMillis(3000)))\r\n    \t\t\t\t.moveTo(new ElementOption().withElement(last))\r\n    \t\t\t\t.release()\r\n    \t\t\t\t.perform();","title":"appium long press and than move element(drag and drop) is not working","body":"<blockquote>\n<p>if U have references of elements already then you'll do like this:</p>\n</blockquote>\n<pre><code>TouchAction action = new TouchAction(driver);\n        action.longPress(new ElementOption().withElement(first))\n                .waitAction(WaitOptions.waitOptions(Duration.ofMillis(3000)))\n                .moveTo(new ElementOption().withElement(last))\n                .release()\n                .perform();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2381670,"reputation":891,"user_id":2083562,"display_name":"Narendra Chandratre"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1661450210,"creation_date":1661450210,"answer_id":73491869,"question_id":36084388,"body_markdown":"Following solution works for me on **iOS with python**:\r\n\r\n&gt; **TouchAction(context.driver).long_press(source_element).move_to(destination_element).release().perform()**","title":"appium long press and than move element(drag and drop) is not working","body":"<p>Following solution works for me on <strong>iOS with python</strong>:</p>\n<blockquote>\n<p><strong>TouchAction(context.driver).long_press(source_element).move_to(destination_element).release().perform()</strong></p>\n</blockquote>\n"}],"owner":{"account_id":7553519,"reputation":733,"user_id":5734104,"accept_rate":44,"display_name":"Eric Ipsum"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":14991,"favorite_count":0,"down_vote_count":0,"up_vote_count":6,"accepted_answer_id":36084648,"answer_count":6,"score":6,"last_activity_date":1661450210,"creation_date":1458304003,"question_id":36084388,"body_markdown":"I have a scenario to test an IOS app like this:\r\n\r\n&gt; 1. long press on an element.\r\n&gt; 2. move that element to desired location.\r\n\r\nI am using the following code:\r\n\r\n    TouchAction action = new TouchAction(driver)\r\n    action.long_press(element1).move_to(element2).wait(500).release().perform()\r\n\r\nbut its not working for me. Need any good suggestion.\r\n\r\n","title":"appium long press and than move element(drag and drop) is not working","body":"<p>I have a scenario to test an IOS app like this:</p>\n\n<blockquote>\n  <ol>\n  <li>long press on an element.</li>\n  <li>move that element to desired location.</li>\n  </ol>\n</blockquote>\n\n<p>I am using the following code:</p>\n\n<pre><code>TouchAction action = new TouchAction(driver)\naction.long_press(element1).move_to(element2).wait(500).release().perform()\n</code></pre>\n\n<p>but its not working for me. Need any good suggestion.</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":1691630,"reputation":49583,"user_id":1553851,"accept_rate":73,"display_name":"shmosel"},"score":1,"creation_date":1655184409,"post_id":72611710,"comment_id":128265006,"body_markdown":"Why would you need this?","body":"Why would you need this?"},{"owner":{"account_id":3211603,"reputation":289297,"user_id":2711488,"display_name":"Holger"},"score":1,"creation_date":1655196872,"post_id":72611710,"comment_id":128268761,"body_markdown":"Recommended read: [Why is the max recursion depth I can reach non-deterministic?](https://stackoverflow.com/q/27043922/2711488)","body":"Recommended read: <a href=\"https://stackoverflow.com/q/27043922/2711488\">Why is the max recursion depth I can reach non-deterministic?</a>"}],"owner":{"account_id":20949754,"reputation":118,"user_id":15391706,"display_name":"Shubham Maheshwari"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":23,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1655182763,"answer_count":0,"score":0,"last_activity_date":1661449748,"creation_date":1655182569,"question_id":72611710,"body_markdown":"Is there any way I can return from a recursive function just before it is about to overflow?\r\n\r\n```\r\npublic static void func() {\r\n   // if it is about to overflow\r\n   // return \r\n   func();\r\n}\r\n\r\npublic static void main(String[] args) {\r\n    func();\r\n}\r\n```\r\n\r\nI have tried ``Runtime.getRuntime().freeMemory()`` but it returns a same ``int`` every time.\r\nI have also tried to calculate ``freeMemory`` by subtracting ``Runtime.getRuntime().maxMemory() - Runtime.getRuntime().totalMemory() - Runtime.getRuntime().freeMemory()`` but that is not working.\r\n\r\nIs there any way in Java to do that? Thank you.","title":"return just before stack is about to overflow","body":"<p>Is there any way I can return from a recursive function just before it is about to overflow?</p>\n<pre><code>public static void func() {\n   // if it is about to overflow\n   // return \n   func();\n}\n\npublic static void main(String[] args) {\n    func();\n}\n</code></pre>\n<p>I have tried <code>Runtime.getRuntime().freeMemory()</code> but it returns a same <code>int</code> every time.\nI have also tried to calculate <code>freeMemory</code> by subtracting <code>Runtime.getRuntime().maxMemory() - Runtime.getRuntime().totalMemory() - Runtime.getRuntime().freeMemory()</code> but that is not working.</p>\n<p>Is there any way in Java to do that? Thank you.</p>\n"},{"tags":["java","apache-flink","flink-streaming","flink-cep"],"comments":[{"owner":{"account_id":2274094,"reputation":40354,"user_id":2000823,"display_name":"David Anderson"},"score":0,"creation_date":1661727877,"post_id":73487384,"comment_id":129834258,"body_markdown":"I don&#39;t think there&#39;s anything built into Flink to help with this. I believe that keeping track of the outputTags you&#39;ve created is up to you.","body":"I don&#39;t think there&#39;s anything built into Flink to help with this. I believe that keeping track of the outputTags you&#39;ve created is up to you."}],"owner":{"account_id":26157998,"reputation":11,"user_id":19844986,"display_name":"rayz_z"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":259,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1661449569,"creation_date":1661429935,"question_id":73487384,"body_markdown":"I am new to Flink i am doing of pattern evaluation using Flink CEP,\r\nas shown below，In the ProcessFunction, it is judged to store different types of AlertEvent in different OutputTags. \r\nThere are many event types, and the number of events types grows as it runs\r\n\r\n```\r\nSingleOutputStreamOperator&lt;AlertEvent, AlertEvent&gt; outputStream = dataStream.process(new ProcessFunction&lt;AlertEvent, AlertEvent&gt;() {\r\n    @Override\r\n    public void processElement(AlertEvent event, Context ctx, Collector&lt;AlertEvent&gt; out) throws Exception {\r\n            //There are many event types, and the number of events types grows as it runs\r\n\r\n            ctx.output(new OutputTag&lt;AlertEvent&gt;(event.getType()), event);\r\n        \r\n    }\r\n})\r\n```\r\n\r\nthen, I use the `getSideOutput` method to get the data of different OutputTags, like this:\r\n```\r\noutputStream.getSideOutput(new OutputTag&lt;AlertEvent&gt;(type1)).print();\r\noutputStream.getSideOutput(new OutputTag&lt;AlertEvent&gt;(type2)).print();\r\noutputStream.getSideOutput(new OutputTag&lt;AlertEvent&gt;(type3)).print();\r\n```\r\n\r\nIt looks ok，but when I write the code, I don&#39;t know how many output tags there will be.\r\n\r\nHow can I get all output tags from outputStream and process them separately for all of different `DataStream&lt;AlertEvent&gt;`, after reading flink&#39;s  documentation for a long time,  I can&#39;t find the corresponding API which  can traverse the **outputTags**.\r\n\r\nIf some one can answer it will be useful for further references to others also.\r\n\r\n","title":"How to get all outputtags from SingleOutputStreamOperator and process them separately for all of different DataStream","body":"<p>I am new to Flink i am doing of pattern evaluation using Flink CEP,\nas shown below，In the ProcessFunction, it is judged to store different types of AlertEvent in different OutputTags.\nThere are many event types, and the number of events types grows as it runs</p>\n<pre><code>SingleOutputStreamOperator&lt;AlertEvent, AlertEvent&gt; outputStream = dataStream.process(new ProcessFunction&lt;AlertEvent, AlertEvent&gt;() {\n    @Override\n    public void processElement(AlertEvent event, Context ctx, Collector&lt;AlertEvent&gt; out) throws Exception {\n            //There are many event types, and the number of events types grows as it runs\n\n            ctx.output(new OutputTag&lt;AlertEvent&gt;(event.getType()), event);\n        \n    }\n})\n</code></pre>\n<p>then, I use the <code>getSideOutput</code> method to get the data of different OutputTags, like this:</p>\n<pre><code>outputStream.getSideOutput(new OutputTag&lt;AlertEvent&gt;(type1)).print();\noutputStream.getSideOutput(new OutputTag&lt;AlertEvent&gt;(type2)).print();\noutputStream.getSideOutput(new OutputTag&lt;AlertEvent&gt;(type3)).print();\n</code></pre>\n<p>It looks ok，but when I write the code, I don't know how many output tags there will be.</p>\n<p>How can I get all output tags from outputStream and process them separately for all of different <code>DataStream&lt;AlertEvent&gt;</code>, after reading flink's  documentation for a long time,  I can't find the corresponding API which  can traverse the <strong>outputTags</strong>.</p>\n<p>If some one can answer it will be useful for further references to others also.</p>\n"},{"tags":["java","spring","spring-boot","apache-kafka","reactive-kafka"],"owner":{"account_id":25856042,"reputation":11,"user_id":19589271,"display_name":"Michela Dennis"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":507,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1661449509,"creation_date":1661448632,"question_id":73491568,"body_markdown":"I create a Reactive Kafka producer that works in Spring. See code below:\r\n\r\n```\r\nKafkaPayload payload = new KafkaPayload(1, &quot;value 1&quot;);\r\nString topic = &quot;a.kafka.topic&quot;;\r\nMap&lt;String, Object&gt; props = kafkaProperties.buildProducerProperties();\r\nReactiveKafkaProducerTemplate&lt;String, KafkaPayload&gt; reactiveKafkaProducerTemplate  = new ReactiveKafkaProducerTemplate&lt;String, KafkaPayload&gt;(SenderOptions.create(props));\r\nMono&lt;SenderResult&lt;Void&gt;&gt; senderMono =  reactiveKafkaProducerTemplate.send(topic, payload);\r\nsenderMono.log().subscribe();\r\n```\r\n\r\nHowever the the reactive kafka consumer that wrote see not to work. What am I doing wrong? See consumer code below:\r\n```\r\nString topic = &quot;a.kafka.topic&quot;;\r\n\r\nReceiverOptions&lt;String, KafkaPayload&gt; kafkaReceiverOptions = ReceiverOptions.create(kafkaProperties.buildConsumerProperties());\r\nkafkaReceiverOptions.consumerProperty(ConsumerConfig.GROUP_ID_CONFIG, &quot;kafka.id.1&quot;);\r\nkafkaReceiverOptions.subscription(Collections.singletonList(topic));\r\n\r\nReactiveKafkaConsumerTemplate&lt;String, KafkaPayload&gt; reactiveKafkaConsumerTemplate = new ReactiveKafkaConsumerTemplate&lt;String, KafkaPayload&gt;(kafkaReceiverOptions);\r\n\r\nFlux&lt;KafkaPayload&gt; kafkaFlux = reactiveKafkaConsumerTemplate\r\n                .receiveAutoAck()\r\n                // .delayElements(Duration.ofSeconds(2L)) // BACKPRESSURE\r\n                .doOnNext(\r\n                    consumerRecord -&gt; System.out.println(\r\n                            &quot;received key=&quot; + consumerRecord.key() + &quot;, &quot; +\r\n                            &quot;value=&quot;+ consumerRecord.value() + &quot;, &quot; +\r\n                            &quot;from topic=&quot; + consumerRecord.topic() + &quot; ,&quot; +\r\n                            &quot;offset=&quot; + consumerRecord.offset()))\r\n                .map(ConsumerRecord::value)\r\n                .doOnNext(kafkaPaload -&gt; System.out\r\n                                .println(&quot;successfully consumed KafkaPlayload=&quot;\r\n                                                + kafkaPaload.getValue()))\r\n                .doOnError(throwable -&gt; System.out.println(\r\n                                &quot;something bad happened while consuming&quot; +\r\n                                                throwable.getMessage()))\r\n                .log();\r\n                                       \r\n                // kafkaFlux.subscribe();\r\n                StepVerifier.create(kafkaFlux)\r\n                                .consumeNextWith(payload -&gt; {\r\n                                        System.out.println(\r\n                                                        &quot;-------ONNEXT AFTER SUBSCRIPTION ----------&quot;);\r\n                                                        System.out.println(&quot;id: &quot; + payload.getId() + &quot; value: &quot; + payload.getValue())\r\n                                })\r\n                                .verifyComplete();\r\n```\r\n\r\n\r\nThe following kafka listener in Spring Boot works with the producer above.\r\n```\r\n@KafkaListener(id = &quot;kafka.id.1&quot;, topics = &quot;a.kafka.topic&quot;)\r\npublic void listner(KafkaPayload payload) {\r\n\r\n         System.out.println(&quot;id: &quot; + payload.getId() + &quot; value: &quot; + payload.getValue())\r\n\r\n}\r\n```\r\n","title":"Spring Reactive Kafka - Consumer Subscription not Working","body":"<p>I create a Reactive Kafka producer that works in Spring. See code below:</p>\n<pre><code>KafkaPayload payload = new KafkaPayload(1, &quot;value 1&quot;);\nString topic = &quot;a.kafka.topic&quot;;\nMap&lt;String, Object&gt; props = kafkaProperties.buildProducerProperties();\nReactiveKafkaProducerTemplate&lt;String, KafkaPayload&gt; reactiveKafkaProducerTemplate  = new ReactiveKafkaProducerTemplate&lt;String, KafkaPayload&gt;(SenderOptions.create(props));\nMono&lt;SenderResult&lt;Void&gt;&gt; senderMono =  reactiveKafkaProducerTemplate.send(topic, payload);\nsenderMono.log().subscribe();\n</code></pre>\n<p>However the the reactive kafka consumer that wrote see not to work. What am I doing wrong? See consumer code below:</p>\n<pre><code>String topic = &quot;a.kafka.topic&quot;;\n\nReceiverOptions&lt;String, KafkaPayload&gt; kafkaReceiverOptions = ReceiverOptions.create(kafkaProperties.buildConsumerProperties());\nkafkaReceiverOptions.consumerProperty(ConsumerConfig.GROUP_ID_CONFIG, &quot;kafka.id.1&quot;);\nkafkaReceiverOptions.subscription(Collections.singletonList(topic));\n\nReactiveKafkaConsumerTemplate&lt;String, KafkaPayload&gt; reactiveKafkaConsumerTemplate = new ReactiveKafkaConsumerTemplate&lt;String, KafkaPayload&gt;(kafkaReceiverOptions);\n\nFlux&lt;KafkaPayload&gt; kafkaFlux = reactiveKafkaConsumerTemplate\n                .receiveAutoAck()\n                // .delayElements(Duration.ofSeconds(2L)) // BACKPRESSURE\n                .doOnNext(\n                    consumerRecord -&gt; System.out.println(\n                            &quot;received key=&quot; + consumerRecord.key() + &quot;, &quot; +\n                            &quot;value=&quot;+ consumerRecord.value() + &quot;, &quot; +\n                            &quot;from topic=&quot; + consumerRecord.topic() + &quot; ,&quot; +\n                            &quot;offset=&quot; + consumerRecord.offset()))\n                .map(ConsumerRecord::value)\n                .doOnNext(kafkaPaload -&gt; System.out\n                                .println(&quot;successfully consumed KafkaPlayload=&quot;\n                                                + kafkaPaload.getValue()))\n                .doOnError(throwable -&gt; System.out.println(\n                                &quot;something bad happened while consuming&quot; +\n                                                throwable.getMessage()))\n                .log();\n                                       \n                // kafkaFlux.subscribe();\n                StepVerifier.create(kafkaFlux)\n                                .consumeNextWith(payload -&gt; {\n                                        System.out.println(\n                                                        &quot;-------ONNEXT AFTER SUBSCRIPTION ----------&quot;);\n                                                        System.out.println(&quot;id: &quot; + payload.getId() + &quot; value: &quot; + payload.getValue())\n                                })\n                                .verifyComplete();\n</code></pre>\n<p>The following kafka listener in Spring Boot works with the producer above.</p>\n<pre><code>@KafkaListener(id = &quot;kafka.id.1&quot;, topics = &quot;a.kafka.topic&quot;)\npublic void listner(KafkaPayload payload) {\n\n         System.out.println(&quot;id: &quot; + payload.getId() + &quot; value: &quot; + payload.getValue())\n\n}\n</code></pre>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":2673407,"reputation":44640,"user_id":2310289,"display_name":"Scary Wombat"},"score":0,"creation_date":1661310569,"post_id":73467001,"comment_id":129738901,"body_markdown":"I do not understand what your loop is for.  It does the same unchanging code.","body":"I do not understand what your loop is for.  It does the same unchanging code."},{"owner":{"account_id":2673407,"reputation":44640,"user_id":2310289,"display_name":"Scary Wombat"},"score":0,"creation_date":1661310690,"post_id":73467001,"comment_id":129738915,"body_markdown":"why are you processing and changing all 4 values at once, why set them to the same value?","body":"why are you processing and changing all 4 values at once, why set them to the same value?"},{"owner":{"account_id":1085259,"reputation":78314,"user_id":1081110,"display_name":"Dawood ibn Kareem"},"score":2,"creation_date":1661310926,"post_id":73467001,"comment_id":129738941,"body_markdown":"You want an array, with 4 entries.  So it might be `int[] dice = { 2, 3, 5, 7 };`.  Then to get a random value, you might do something like `dice[random.nextInt(4)]`, where `random` is an instance of `Random`.","body":"You want an array, with 4 entries.  So it might be <code>int[] dice = { 2, 3, 5, 7 };</code>.  Then to get a random value, you might do something like <code>dice[random.nextInt(4)]</code>, where <code>random</code> is an instance of <code>Random</code>."},{"owner":{"account_id":2673407,"reputation":44640,"user_id":2310289,"display_name":"Scary Wombat"},"score":0,"creation_date":1661311352,"post_id":73467001,"comment_id":129738975,"body_markdown":"@DawoodibnKareem solution is a lot nicer. see https://docs.oracle.com/javase/8/docs/api/java/util/Random.html","body":"@DawoodibnKareem solution is a lot nicer. see <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/Random.html\" rel=\"nofollow noreferrer\">docs.oracle.com/javase/8/docs/api/java/util/Random.html</a>"},{"owner":{"account_id":26144836,"reputation":11,"user_id":19833597,"display_name":"sjonathon"},"score":0,"creation_date":1661390714,"post_id":73467001,"comment_id":129763169,"body_markdown":"@DawoodibnKareem you understand my issue and your answer would be correct. but i have not learned arrays yet. is there a way to get those specific numbers randomly using math.random() or even the random class? maybe with loops? i know my code is incorrect. thanks!","body":"@DawoodibnKareem you understand my issue and your answer would be correct. but i have not learned arrays yet. is there a way to get those specific numbers randomly using math.random() or even the random class? maybe with loops? i know my code is incorrect. thanks!"},{"owner":{"account_id":1085259,"reputation":78314,"user_id":1081110,"display_name":"Dawood ibn Kareem"},"score":0,"creation_date":1661390950,"post_id":73467001,"comment_id":129763215,"body_markdown":"Then today would be an excellent day to learn about arrays.","body":"Then today would be an excellent day to learn about arrays."},{"owner":{"account_id":26144836,"reputation":11,"user_id":19833597,"display_name":"sjonathon"},"score":0,"creation_date":1661456952,"post_id":73467001,"comment_id":129783811,"body_markdown":"@DawoodibnKareem  (w/o arrays) Scanner sc = new Scanner(System.in);\n\nString diceNum = &quot;2357&quot;;\n\nint playerDice1 = diceNum.charAt((int) (Math.random() * 4)) - &#39;0&#39;;\n\nSystem.out.println(playerDice1);","body":"@DawoodibnKareem  (w/o arrays) Scanner sc = new Scanner(System.in);  String diceNum = &quot;2357&quot;;  int playerDice1 = diceNum.charAt((int) (Math.random() * 4)) - &#39;0&#39;;  System.out.println(playerDice1);"}],"owner":{"account_id":26144836,"reputation":11,"user_id":19833597,"display_name":"sjonathon"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":79,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1661449465,"creation_date":1661310265,"question_id":73467001,"body_markdown":"I&#39;m trying to use math.random() to create a dice which is 4 sided, and each of its sides is labeled with a unique number: 2, 3, 5 or 7 and then print it. For example i want it to print:\r\n------------\r\n7 7 5 2 (each number is random of the range (2,3,5 or 7)\r\n\r\ni am a beginner and only learned up till loops and about library classes (NOT ARRAYS or PROGRAMMER DEFINED METHODS and onward)\r\n\r\nwhat I&#39;ve tried is below but is obviously wrong: PLEASE HELP ! THANKS ! \r\n\r\n        int d1 = (int)(Math.random() * 4) + 1;\r\n\t\tint d2 = (int)(Math.random() * 4) + 1;\r\n\t\tint d3 = (int)(Math.random() * 4) + 1;\r\n\t\tint d4 = (int)(Math.random() * 4) + 1;\r\n\r\n\t\tfor (int i=1; i&lt;=4; i++)\r\n\t\t{\r\n\t\t\tif (d1 == 1 || d2 == 1 || d3 == 1 || d4 == 1)\r\n\t\t\t{\r\n\t\t\t\td1=2;\r\n\t\t\t\td2=2;\r\n\t\t\t\td3=2;\r\n\t\t\t\td4=2;\r\n\t\t\t}\r\n\t\t\telse if (d1 == 2 || d2 == 2 || d3 == 2 || d4 == 2)\r\n\t\t\t{\r\n\t\t\t\td1=3;\r\n\t\t\t\td2=3;\r\n\t\t\t\td3=3;\r\n\t\t\t\td4=3;\r\n\t\t\t}\r\n\t\t\telse if (d1 == 3 || d2 == 3 || d3 == 3 || d4 == 3)\r\n\t\t\t{\r\n\t\t\t\td1=5;\r\n\t\t\t\td2=5;\r\n\t\t\t\td3=5;\r\n\t\t\t\td4=5;\r\n\t\t\t}\r\n\t\t\telse if (d1 == 4 || d2 == 4 || d3 == 4 || d4 == 4)\r\n\t\t\t{\r\n\t\t\t\td1=7;\r\n\t\t\t\td2=7;\r\n\t\t\t\td3=7;\r\n\t\t\t\td4=7;\r\n\t\t\t}\r\n\t\t\ti++;\r\n\t\t}\r\n\t\tSystem.out.println(d1 + &quot; &quot; + d2 + &quot; &quot; + d3 + &quot; &quot; + d4);","title":"how to use math.random() with a range of specific numbers?","body":"<h2>I'm trying to use math.random() to create a dice which is 4 sided, and each of its sides is labeled with a unique number: 2, 3, 5 or 7 and then print it. For example i want it to print:</h2>\n<p>7 7 5 2 (each number is random of the range (2,3,5 or 7)</p>\n<p>i am a beginner and only learned up till loops and about library classes (NOT ARRAYS or PROGRAMMER DEFINED METHODS and onward)</p>\n<p>what I've tried is below but is obviously wrong: PLEASE HELP ! THANKS !</p>\n<pre><code>    int d1 = (int)(Math.random() * 4) + 1;\n    int d2 = (int)(Math.random() * 4) + 1;\n    int d3 = (int)(Math.random() * 4) + 1;\n    int d4 = (int)(Math.random() * 4) + 1;\n\n    for (int i=1; i&lt;=4; i++)\n    {\n        if (d1 == 1 || d2 == 1 || d3 == 1 || d4 == 1)\n        {\n            d1=2;\n            d2=2;\n            d3=2;\n            d4=2;\n        }\n        else if (d1 == 2 || d2 == 2 || d3 == 2 || d4 == 2)\n        {\n            d1=3;\n            d2=3;\n            d3=3;\n            d4=3;\n        }\n        else if (d1 == 3 || d2 == 3 || d3 == 3 || d4 == 3)\n        {\n            d1=5;\n            d2=5;\n            d3=5;\n            d4=5;\n        }\n        else if (d1 == 4 || d2 == 4 || d3 == 4 || d4 == 4)\n        {\n            d1=7;\n            d2=7;\n            d3=7;\n            d4=7;\n        }\n        i++;\n    }\n    System.out.println(d1 + &quot; &quot; + d2 + &quot; &quot; + d3 + &quot; &quot; + d4);\n</code></pre>\n"},{"tags":["javascript","java","node.js","vuejs3","capacitor"],"answers":[{"tags":[],"owner":{"account_id":459223,"reputation":337,"user_id":859559,"accept_rate":57,"display_name":"D Liebman"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1661449044,"creation_date":1661449044,"answer_id":73491648,"question_id":73449407,"body_markdown":"I tried this, and things work better. I don&#39;t know if this is the ultimate solution.\r\n\r\n\r\n        @PluginMethod()\r\n        public void post(PluginCall call) {\r\n            bridge.saveCall(call); // &lt;-- add this \r\n\r\n            call.release(bridge); // &lt;-- add this \r\n\r\n            String pipeline_model = call.getString(&quot;pipeline_model&quot;, &quot;pipeline_&quot;);\r\n            String post_url = call.getString(&quot;post_url&quot;, &quot;&quot;);\r\n\r\n            JSObject ret = new JSObject();\r\n            try {\r\n                String value = this.doPost(post_url);\r\n\r\n                Gson gson = new Gson();\r\n\r\n                JsonReader reader = new JsonReader(new StringReader(value));\r\n                ResultPreview preview = gson.fromJson(reader, ResultPreview.class);\r\n\r\n                String val = preview.getResult_preview()[0][0];\r\n                ret.put(&quot;response_text&quot;, val.replace(&quot;\\n&quot;, &quot;\\\\n&quot;));\r\n\r\n                System.out.println(&quot;response here: &quot; +  val);\r\n            }\r\n            catch (Exception e) {\r\n                e.printStackTrace();\r\n            }\r\n            call.resolve(ret);\r\n        }\r\n\r\nThis is not found on the capacitor site, but instead I found it digging around the internet.","title":"Android Capacitor JS Plugin does not reply","body":"<p>I tried this, and things work better. I don't know if this is the ultimate solution.</p>\n<pre><code>    @PluginMethod()\n    public void post(PluginCall call) {\n        bridge.saveCall(call); // &lt;-- add this \n\n        call.release(bridge); // &lt;-- add this \n\n        String pipeline_model = call.getString(&quot;pipeline_model&quot;, &quot;pipeline_&quot;);\n        String post_url = call.getString(&quot;post_url&quot;, &quot;&quot;);\n\n        JSObject ret = new JSObject();\n        try {\n            String value = this.doPost(post_url);\n\n            Gson gson = new Gson();\n\n            JsonReader reader = new JsonReader(new StringReader(value));\n            ResultPreview preview = gson.fromJson(reader, ResultPreview.class);\n\n            String val = preview.getResult_preview()[0][0];\n            ret.put(&quot;response_text&quot;, val.replace(&quot;\\n&quot;, &quot;\\\\n&quot;));\n\n            System.out.println(&quot;response here: &quot; +  val);\n        }\n        catch (Exception e) {\n            e.printStackTrace();\n        }\n        call.resolve(ret);\n    }\n</code></pre>\n<p>This is not found on the capacitor site, but instead I found it digging around the internet.</p>\n"}],"owner":{"account_id":459223,"reputation":337,"user_id":859559,"accept_rate":57,"display_name":"D Liebman"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":320,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1661449044,"creation_date":1661192136,"question_id":73449407,"body_markdown":"I am working on a java plugin that is supposed to recieve some info from a js vue3 program and then do a URL post operation, and then return some of the info found back to the js code. I am using capacitor and android. This is my error message:\r\n\r\n    2022-08-22 13:46:23.773 27544-27544/org.theguy.GptEtc E/Capacitor/Console: File: http://localhost/js/app.6577adf2.js - Line 1 - Msg: Uncaught (in promise) SyntaxError: Unexpected token o in JSON at position 1\r\n\r\nI think this means that something other than valid JSON is being delivered to the js code. I know that the app is delivering info to the java android class. This is some of my java code.\r\n\r\n\r\n    @CapacitorPlugin(name = &quot;URLPOST&quot;)\r\n    public class PluginURLPost extends Plugin {\r\n\r\n        @PluginMethod()\r\n        public void post(PluginCall call) {\r\n\r\n            String post_url = call.getString(&quot;post_url&quot;, &quot;&quot;);\r\n            String bearer = call.getString(&quot;bearer&quot;, &quot;pipeline_&quot;);\r\n\r\n            JSObject ret = new JSObject();\r\n            try {\r\n                String value = this.doPost(post_url, bearer);\r\n                System.out.println(&quot;value &quot; + value);\r\n\r\n                Gson gson = new Gson();\r\n\r\n                JsonReader reader = new JsonReader(new StringReader(value));\r\n                ResultPreview preview = gson.fromJson(reader, ResultPreview.class);\r\n\r\n                String val = preview.getResult_preview()[0][0];\r\n                val = &quot;result string here.&quot;; // &lt;-- add this for easy testing\r\n                ret.put(&quot;response_text&quot;, val.replace(&quot;\\n&quot;, &quot;\\\\n&quot;));\r\n\r\n                System.out.println(&quot;response here: &quot; +  val);\r\n            }\r\n            catch (Exception e) {\r\n                e.printStackTrace();\r\n            }\r\n            //call.setKeepAlive(true);\r\n            call.resolve(ret);\r\n        }\r\n\r\n        OkHttpClient client = new OkHttpClient();\r\n\r\n        public static final MediaType JSON\r\n                = MediaType.parse(&quot;application/json; charset=utf-8&quot;);\r\n\r\n\r\n        String doPost(String post_url, String bearer ) throws IOException {\r\n            // ... do some post request here ...\r\n\r\n            return response_body;\r\n        }\r\n        \r\n    }\r\n\r\n    class ResultPreview {\r\n        @SerializedName(&quot;result_preview&quot;)\r\n        String [][] result_preview ;\r\n\r\n        public void setResult_preview(String[][] result) {\r\n            this.result_preview = result;\r\n        }\r\n\r\n        public String[][] getResult_preview() {\r\n            return this.result_preview;\r\n        }\r\n    }\r\n\r\nThis is some of my js code.\r\n\r\n      import { registerPlugin } from &quot;@capacitor/core&quot;;\r\n\r\n      const URLPOST = registerPlugin(&quot;URLPOST&quot;);\r\n\r\n     \r\n      const request = {\r\n        &quot;line&quot;: line,\r\n        &quot;pipeline_model&quot;: details[engine][&quot;app_model&quot;].trim(),\r\n        &quot;bearer&quot;: details[engine][&quot;api_key&quot;].trim(),\r\n        &quot;post_url&quot;: details[engine][&quot;url&quot;].trim(),\r\n        &quot;length&quot;: 25,\r\n        &quot;top_k&quot;: 50\r\n      };\r\n      \r\n      console.log(&quot;request&quot;, request);\r\n      var {response_text} = await URLPOST.post(request);\r\n      \r\n      console.log(&quot;response_text 1&quot;,response_text);\r\n\r\n\r\nI don&#39;t know what to do.\r\n","title":"Android Capacitor JS Plugin does not reply","body":"<p>I am working on a java plugin that is supposed to recieve some info from a js vue3 program and then do a URL post operation, and then return some of the info found back to the js code. I am using capacitor and android. This is my error message:</p>\n<pre><code>2022-08-22 13:46:23.773 27544-27544/org.theguy.GptEtc E/Capacitor/Console: File: http://localhost/js/app.6577adf2.js - Line 1 - Msg: Uncaught (in promise) SyntaxError: Unexpected token o in JSON at position 1\n</code></pre>\n<p>I think this means that something other than valid JSON is being delivered to the js code. I know that the app is delivering info to the java android class. This is some of my java code.</p>\n<pre><code>@CapacitorPlugin(name = &quot;URLPOST&quot;)\npublic class PluginURLPost extends Plugin {\n\n    @PluginMethod()\n    public void post(PluginCall call) {\n\n        String post_url = call.getString(&quot;post_url&quot;, &quot;&quot;);\n        String bearer = call.getString(&quot;bearer&quot;, &quot;pipeline_&quot;);\n\n        JSObject ret = new JSObject();\n        try {\n            String value = this.doPost(post_url, bearer);\n            System.out.println(&quot;value &quot; + value);\n\n            Gson gson = new Gson();\n\n            JsonReader reader = new JsonReader(new StringReader(value));\n            ResultPreview preview = gson.fromJson(reader, ResultPreview.class);\n\n            String val = preview.getResult_preview()[0][0];\n            val = &quot;result string here.&quot;; // &lt;-- add this for easy testing\n            ret.put(&quot;response_text&quot;, val.replace(&quot;\\n&quot;, &quot;\\\\n&quot;));\n\n            System.out.println(&quot;response here: &quot; +  val);\n        }\n        catch (Exception e) {\n            e.printStackTrace();\n        }\n        //call.setKeepAlive(true);\n        call.resolve(ret);\n    }\n\n    OkHttpClient client = new OkHttpClient();\n\n    public static final MediaType JSON\n            = MediaType.parse(&quot;application/json; charset=utf-8&quot;);\n\n\n    String doPost(String post_url, String bearer ) throws IOException {\n        // ... do some post request here ...\n\n        return response_body;\n    }\n    \n}\n\nclass ResultPreview {\n    @SerializedName(&quot;result_preview&quot;)\n    String [][] result_preview ;\n\n    public void setResult_preview(String[][] result) {\n        this.result_preview = result;\n    }\n\n    public String[][] getResult_preview() {\n        return this.result_preview;\n    }\n}\n</code></pre>\n<p>This is some of my js code.</p>\n<pre><code>  import { registerPlugin } from &quot;@capacitor/core&quot;;\n\n  const URLPOST = registerPlugin(&quot;URLPOST&quot;);\n\n \n  const request = {\n    &quot;line&quot;: line,\n    &quot;pipeline_model&quot;: details[engine][&quot;app_model&quot;].trim(),\n    &quot;bearer&quot;: details[engine][&quot;api_key&quot;].trim(),\n    &quot;post_url&quot;: details[engine][&quot;url&quot;].trim(),\n    &quot;length&quot;: 25,\n    &quot;top_k&quot;: 50\n  };\n  \n  console.log(&quot;request&quot;, request);\n  var {response_text} = await URLPOST.post(request);\n  \n  console.log(&quot;response_text 1&quot;,response_text);\n</code></pre>\n<p>I don't know what to do.</p>\n"},{"tags":["java","selenium","action"],"comments":[{"owner":{"account_id":5248884,"reputation":4394,"user_id":4193730,"display_name":"Subh"},"score":0,"creation_date":1418150575,"post_id":27385780,"comment_id":43220951,"body_markdown":"Since, this is a pop up box, try by adding an [Explicit wait](http://docs.seleniumhq.org/docs/04_webdriver_advanced.jsp#explicit-waits) to check for the presence of element first and then execute the code with **Action class**.","body":"Since, this is a pop up box, try by adding an <a href=\"http://docs.seleniumhq.org/docs/04_webdriver_advanced.jsp#explicit-waits\" rel=\"nofollow noreferrer\">Explicit wait</a> to check for the presence of element first and then execute the code with <b>Action class</b>."},{"owner":{"account_id":1040292,"reputation":2689,"user_id":1046501,"accept_rate":95,"display_name":"adohertyd"},"score":0,"creation_date":1418168273,"post_id":27385780,"comment_id":43229617,"body_markdown":"@Subh tried that and added a verification println to be sure. According to the explicit wait the element is present and clickable but the click isn&#39;t registering","body":"@Subh tried that and added a verification println to be sure. According to the explicit wait the element is present and clickable but the click isn&#39;t registering"},{"owner":{"account_id":5248884,"reputation":4394,"user_id":4193730,"display_name":"Subh"},"score":0,"creation_date":1418186469,"post_id":27385780,"comment_id":43234047,"body_markdown":"Okay. Can you please add the relevant HTML code snippet and image of the popup? Furthermore, if its a public site that you&#39;re automating, can you please give the URL?","body":"Okay. Can you please add the relevant HTML code snippet and image of the popup? Furthermore, if its a public site that you&#39;re automating, can you please give the URL?"}],"answers":[{"tags":[],"owner":{"account_id":1297929,"reputation":3739,"user_id":1248505,"accept_rate":50,"display_name":"StrikerVillain"},"down_vote_count":1,"up_vote_count":6,"is_accepted":true,"score":5,"last_activity_date":1661448995,"creation_date":1418150440,"answer_id":27386399,"question_id":27385780,"body_markdown":"Try combining all the action into one action as shown below and try again.\r\n\r\npublic class Helper {\r\n\r\n    public static void scrollToElementAndClick(WebDriver driver, WebElement webelement){\r\n    Actions actions = new Actions(driver);\r\n    actions.moveToElement(webelement).click();\r\n    \r\n    action = action.build;\r\n    action.perform();\r\n\r\n}\r\n\r\nAlso you can try `JavascriptExecuter` as shown below:\r\n\r\n    ((JavascriptExecutor)driver).executeScript(&quot;arguments[0].click();&quot;, selectAddress); \r\n\r\nAlso consider the possibility of the `td` containing some other element (input, link) which can be clicked(I dont know your html code).\r\n\r\nHope this helps you. \r\n","title":"Selenium: actions.moveToElement.click not working","body":"<p>Try combining all the action into one action as shown below and try again.</p>\n<p>public class Helper {</p>\n<pre><code>public static void scrollToElementAndClick(WebDriver driver, WebElement webelement){\nActions actions = new Actions(driver);\nactions.moveToElement(webelement).click();\n\naction = action.build;\naction.perform();\n</code></pre>\n<p>}</p>\n<p>Also you can try <code>JavascriptExecuter</code> as shown below:</p>\n<pre><code>((JavascriptExecutor)driver).executeScript(&quot;arguments[0].click();&quot;, selectAddress); \n</code></pre>\n<p>Also consider the possibility of the <code>td</code> containing some other element (input, link) which can be clicked(I dont know your html code).</p>\n<p>Hope this helps you.</p>\n"}],"owner":{"account_id":1040292,"reputation":2689,"user_id":1046501,"accept_rate":95,"display_name":"adohertyd"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":20826,"favorite_count":0,"down_vote_count":0,"up_vote_count":6,"accepted_answer_id":27386399,"answer_count":1,"score":6,"last_activity_date":1661448995,"creation_date":1418148440,"question_id":27385780,"body_markdown":"I can&#39;t understand why this isn&#39;t working. The Web app that I&#39;m testing has a pop up box that is generated on clicking a button. This popup box contains a table, each row of which is clickable. I have tried numerous implementations of Actions, table row selection etc. but nothing is working. The element is visible to Selenium, it just won&#39;t click it. No error is being thrown either.\r\n\r\nADDITIONAL NOTE: I&#39;ve checked the Action method with other elements and it works so it has to be the selector being used or how it is seeing it. Very strange behaviour. I&#39;ve also checked it in Firefox with the Selenium IDE and weblement.click() will work on the CSS selector with that.\r\n\r\n    public class ContactDetails {\r\n        WebDriver driverInstance;\r\n\r\n    public ContactDetails(WebDriver driver){\r\n        this.driverInstance = driver;\r\n    }\r\n\r\n    public void enterContactDetails(){\r\n        \r\n        //Other code here...\r\n\r\n        By validAddress = By.cssSelector(&quot;#customerAddress &gt; tbody &gt; tr:nth-child(1) &gt; td&quot;);\r\n            //Validate that the element is visible. Definitely working as intended because I use it elsewhere in the code successfully.\r\n            if (Helper.checkElementVisible(driverInstance, validAddress)){ \r\n                //if visible:\r\n                WebElement selectAddress = driverInstance.findElement(validAddress);\r\n                //Helper.scrollToElementAndClick(driverInstance, selectAddress);\r\n                Actions actions = new Actions(driverInstance);\r\n                actions.moveToElement(selectAddress).click().perform();\r\n            }\r\n        }\r\n    }\r\n\r\nHelper Class:\r\n\r\n    public class Helper {\r\n\r\n        public static void scrollToElementAndClick(WebDriver driver, WebElement webelement){\r\n        Actions actions = new Actions(driver);\r\n        actions.moveToElement(webelement).click().perform();\r\n    }\r\n\r\nThe strangest thing is that it worked ok a couple of times when I did this implementation. I then put the Actions code into the now commented out `Helper.scrollToElementAndClick()` method and it stopped working. Then when I went back to this implementation it wasn&#39;t working either!\r\n\r\nI can&#39;t post an image of the popup because it would reveal sensitive info but here is some sample HTML of popup with dummy data:\r\n\r\n    &lt;div class=&quot;someDiv&quot; tabindex=&quot;-1&quot; role=&quot;dialog&quot; aria-labelledby=&quot;ui-1&quot;\r\n    style=&quot;height: auto; width: 600px; top: 175px; left: 364px; display: block;&quot;&gt;\r\n      &lt;div class=&quot;anotherDiv&quot;&gt;\r\n\t     &lt;span id=&quot;ui-1&quot; class=&quot;ui-title&quot;&gt;&lt;/span&gt; \r\n\t     &lt;button class=&quot;ui-title-close&quot; role=&quot;button&quot; aria-disabled=&quot;false&quot; title=&quot;close&quot;&gt; \r\n\t\t   &lt;span&gt;close&lt;/span&gt;\r\n\t     &lt;/button&gt;\r\n      &lt;/div&gt;\r\n      &lt;div id=&quot;validateCustomerAddress&quot; class=&quot;ui-content&quot; style=&quot;width: auto; min-height: 0px; max height: none; height: 230px;&quot;&gt;\r\n\t&lt;h2 class=&quot;aSection&quot; style=&quot;color:#666666&quot;&gt;Valid Addresses:&lt;/h2&gt;\r\n\t&lt;table id=&quot;customerAddress&quot;&gt;\r\n\t  &lt;tbody&gt;\r\n\t\t&lt;tr&gt;\r\n\t\t  &lt;td&gt;ZIP CODE: N/A&lt;/td&gt;\r\n\t\t&lt;/tr&gt;\r\n\t\t&lt;tr&gt;\r\n\t\t  &lt;td&gt;2 POPLAR WAY&lt;/td&gt;\r\n\t\t&lt;/tr&gt;\r\n\t\t&lt;tr&gt;\r\n\t\t  &lt;td&gt;KINSEY DRIVE&lt;/td&gt;\r\n\t\t&lt;/tr&gt;\r\n\t  &lt;/tbody&gt;\r\n\t&lt;/table&gt;\r\n    &lt;/div&gt;\r\n    &lt;/div&gt;","title":"Selenium: actions.moveToElement.click not working","body":"<p>I can't understand why this isn't working. The Web app that I'm testing has a pop up box that is generated on clicking a button. This popup box contains a table, each row of which is clickable. I have tried numerous implementations of Actions, table row selection etc. but nothing is working. The element is visible to Selenium, it just won't click it. No error is being thrown either.</p>\n\n<p>ADDITIONAL NOTE: I've checked the Action method with other elements and it works so it has to be the selector being used or how it is seeing it. Very strange behaviour. I've also checked it in Firefox with the Selenium IDE and weblement.click() will work on the CSS selector with that.</p>\n\n<pre><code>public class ContactDetails {\n    WebDriver driverInstance;\n\npublic ContactDetails(WebDriver driver){\n    this.driverInstance = driver;\n}\n\npublic void enterContactDetails(){\n\n    //Other code here...\n\n    By validAddress = By.cssSelector(\"#customerAddress &gt; tbody &gt; tr:nth-child(1) &gt; td\");\n        //Validate that the element is visible. Definitely working as intended because I use it elsewhere in the code successfully.\n        if (Helper.checkElementVisible(driverInstance, validAddress)){ \n            //if visible:\n            WebElement selectAddress = driverInstance.findElement(validAddress);\n            //Helper.scrollToElementAndClick(driverInstance, selectAddress);\n            Actions actions = new Actions(driverInstance);\n            actions.moveToElement(selectAddress).click().perform();\n        }\n    }\n}\n</code></pre>\n\n<p>Helper Class:</p>\n\n<pre><code>public class Helper {\n\n    public static void scrollToElementAndClick(WebDriver driver, WebElement webelement){\n    Actions actions = new Actions(driver);\n    actions.moveToElement(webelement).click().perform();\n}\n</code></pre>\n\n<p>The strangest thing is that it worked ok a couple of times when I did this implementation. I then put the Actions code into the now commented out <code>Helper.scrollToElementAndClick()</code> method and it stopped working. Then when I went back to this implementation it wasn't working either!</p>\n\n<p>I can't post an image of the popup because it would reveal sensitive info but here is some sample HTML of popup with dummy data:</p>\n\n<pre><code>&lt;div class=\"someDiv\" tabindex=\"-1\" role=\"dialog\" aria-labelledby=\"ui-1\"\nstyle=\"height: auto; width: 600px; top: 175px; left: 364px; display: block;\"&gt;\n  &lt;div class=\"anotherDiv\"&gt;\n     &lt;span id=\"ui-1\" class=\"ui-title\"&gt;&lt;/span&gt; \n     &lt;button class=\"ui-title-close\" role=\"button\" aria-disabled=\"false\" title=\"close\"&gt; \n       &lt;span&gt;close&lt;/span&gt;\n     &lt;/button&gt;\n  &lt;/div&gt;\n  &lt;div id=\"validateCustomerAddress\" class=\"ui-content\" style=\"width: auto; min-height: 0px; max height: none; height: 230px;\"&gt;\n&lt;h2 class=\"aSection\" style=\"color:#666666\"&gt;Valid Addresses:&lt;/h2&gt;\n&lt;table id=\"customerAddress\"&gt;\n  &lt;tbody&gt;\n    &lt;tr&gt;\n      &lt;td&gt;ZIP CODE: N/A&lt;/td&gt;\n    &lt;/tr&gt;\n    &lt;tr&gt;\n      &lt;td&gt;2 POPLAR WAY&lt;/td&gt;\n    &lt;/tr&gt;\n    &lt;tr&gt;\n      &lt;td&gt;KINSEY DRIVE&lt;/td&gt;\n    &lt;/tr&gt;\n  &lt;/tbody&gt;\n&lt;/table&gt;\n&lt;/div&gt;\n&lt;/div&gt;\n</code></pre>\n"},{"tags":["java","maven","jooq","maven-mojo"],"answers":[{"tags":[],"owner":{"account_id":247217,"reputation":213455,"user_id":521799,"accept_rate":89,"display_name":"Lukas Eder"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1661448791,"creation_date":1661448791,"answer_id":73491601,"question_id":73490949,"body_markdown":"### Using `database` properties\r\n\r\nMaybe, much simpler, use the `properties` available in `database` as follows:\r\n\r\n```xml\r\n&lt;configuration&gt;\r\n  &lt;generator&gt;\r\n    &lt;database&gt;\r\n      &lt;properties&gt;\r\n        &lt;property&gt;\r\n          &lt;key&gt;some_key&lt;/key&gt;\r\n          &lt;value&gt;some_value&lt;/value&gt;\r\n        &lt;/property&gt;\r\n      &lt;/properties&gt;\r\n    &lt;/database&gt;\r\n  &lt;/generator&gt;\r\n&lt;/configuration&gt;\r\n```\r\n\r\nThere&#39;s no specification what you place as `key/value` in those properties. They&#39;ve been added for purposes like yours, e.g. to add custom configuration to advanced `&lt;database&gt;` implementations like:\r\n\r\n- [`DDLDatabase`][1]\r\n- [`XMLDatabase`][2]\r\n- [`LiquibaseDatabase`][3]\r\n- [`JPADatabase`][4]\r\n\r\nSee also those sections to see how the properties are used by those databases.\r\n\r\nYour custom `JavaGenerator` logic can then access the properties via:\r\n\r\n```java\r\nProperties properties = definition.getDatabase().getProperties();\r\n```\r\n\r\nWhere `definition` is any object that is being generated, e.g. `SchemaDefinition` in your code.\r\n\r\n### Simplest solution\r\n\r\nOf course, setting system properties is always a pragmatic option.\r\n\r\n\r\n  [1]: https://www.jooq.org/doc/latest/manual/code-generation/codegen-ddl/\r\n  [2]: https://www.jooq.org/doc/latest/manual/code-generation/codegen-xml/\r\n  [3]: https://www.jooq.org/doc/latest/manual/code-generation/codegen-liquibase/\r\n  [4]: https://www.jooq.org/doc/latest/manual/code-generation/codegen-jpa/","title":"JOOQ custom code generator with maven mojos","body":"<h3>Using <code>database</code> properties</h3>\n<p>Maybe, much simpler, use the <code>properties</code> available in <code>database</code> as follows:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;configuration&gt;\n  &lt;generator&gt;\n    &lt;database&gt;\n      &lt;properties&gt;\n        &lt;property&gt;\n          &lt;key&gt;some_key&lt;/key&gt;\n          &lt;value&gt;some_value&lt;/value&gt;\n        &lt;/property&gt;\n      &lt;/properties&gt;\n    &lt;/database&gt;\n  &lt;/generator&gt;\n&lt;/configuration&gt;\n</code></pre>\n<p>There's no specification what you place as <code>key/value</code> in those properties. They've been added for purposes like yours, e.g. to add custom configuration to advanced <code>&lt;database&gt;</code> implementations like:</p>\n<ul>\n<li><a href=\"https://www.jooq.org/doc/latest/manual/code-generation/codegen-ddl/\" rel=\"nofollow noreferrer\"><code>DDLDatabase</code></a></li>\n<li><a href=\"https://www.jooq.org/doc/latest/manual/code-generation/codegen-xml/\" rel=\"nofollow noreferrer\"><code>XMLDatabase</code></a></li>\n<li><a href=\"https://www.jooq.org/doc/latest/manual/code-generation/codegen-liquibase/\" rel=\"nofollow noreferrer\"><code>LiquibaseDatabase</code></a></li>\n<li><a href=\"https://www.jooq.org/doc/latest/manual/code-generation/codegen-jpa/\" rel=\"nofollow noreferrer\"><code>JPADatabase</code></a></li>\n</ul>\n<p>See also those sections to see how the properties are used by those databases.</p>\n<p>Your custom <code>JavaGenerator</code> logic can then access the properties via:</p>\n<pre class=\"lang-java prettyprint-override\"><code>Properties properties = definition.getDatabase().getProperties();\n</code></pre>\n<p>Where <code>definition</code> is any object that is being generated, e.g. <code>SchemaDefinition</code> in your code.</p>\n<h3>Simplest solution</h3>\n<p>Of course, setting system properties is always a pragmatic option.</p>\n"}],"owner":{"account_id":20647599,"reputation":155,"user_id":15158714,"display_name":"wand555"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":113,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":73491601,"answer_count":1,"score":1,"last_activity_date":1661448791,"creation_date":1661445172,"question_id":73490949,"body_markdown":"I have a custom code generator extending `JavaGenerator` and it would be very useful if the user using this generator could specify additional information like a list of column names to which the custom generator applies to.\r\nMy first though would be to add configuration options to the dependency with [mojos][1].\r\nHowever this does not seem to work properly because during the build cycle two separate instance are created, once from maven and once from JOOQ. \r\n\r\nThis is my custom generator:\r\n\r\n```java\r\n@Mojo(name=&quot;generation&quot;)\r\npublic class CustomGenerator extends JavaGenerator implements org.apache.maven.plugin.Mojo, ContextEnabled {\r\n\r\n    @Parameter(property=&quot;tableNames&quot;)\r\n    private List tableNames;\r\n\r\n    private static final Logger log = LoggerFactory.getLogger(CustomGenerator.class);\r\n    @Override\r\n    protected void generateSchema(SchemaDefinition schema) {\r\n        //custom code generation based on the variable &quot;tableNames&quot;\r\n    }\r\n\r\n    @Override\r\n    public void execute() throws MojoExecutionException, MojoFailureException {\r\n        //called when maven instantiates this class\r\n    }\r\n\r\n    //bunch of empty methods I do not care about but have to be there because\r\n    //I cannot let this class also extend from AbstractMojo\r\n\r\n    @Override\r\n    public void setPluginContext(Map map) {\r\n\r\n    }\r\n\r\n    @Override\r\n    public Map getPluginContext() {\r\n        return null;\r\n    }\r\n\r\n    @Override\r\n    public void setLog(Log log) {\r\n\r\n    }\r\n\r\n    @Override\r\n    public Log getLog() {\r\n        return null;\r\n    }\r\n}\r\n```\r\nAnd this is my pom of the project where I use the generator and want to supply additional information:\r\n```xml\r\n&lt;plugin&gt;\r\n    &lt;groupId&gt;org.jooq&lt;/groupId&gt;\r\n    &lt;artifactId&gt;jooq-codegen-maven&lt;/artifactId&gt;\r\n    &lt;version&gt;3.15.4&lt;/version&gt;\r\n    &lt;configuration&gt;\r\n        &lt;generator&gt;\r\n            &lt;name&gt;org.example.CustomGenerator&lt;/name&gt;\r\n        &lt;/generator&gt;\r\n    &lt;/configuration&gt;\r\n&lt;/plugin&gt;\r\n&lt;plugin&gt;\r\n    &lt;groupId&gt;org.example&lt;/groupId&gt;\r\n    &lt;artifactId&gt;customgenerator&lt;/artifactId&gt;\r\n    &lt;version&gt;1.0&lt;/version&gt;\r\n    &lt;configuration&gt;\r\n        &lt;tableNames&gt;\r\n            &lt;tableName&gt;test_table&lt;/tableName&gt;\r\n        &lt;/tableNames&gt;\r\n    &lt;/configuration&gt;\r\n    &lt;executions&gt;\r\n        &lt;execution&gt;\r\n            &lt;goals&gt;\r\n                &lt;goal&gt;generation&lt;/goal&gt;\r\n            &lt;/goals&gt;\r\n        &lt;/execution&gt;\r\n    &lt;/executions&gt;\r\n&lt;/plugin&gt;\r\n...\r\n&lt;dependency&gt;\r\n    &lt;groupId&gt;org.example&lt;/groupId&gt;\r\n    &lt;artifactId&gt;customgenerator&lt;/artifactId&gt;\r\n    &lt;version&gt;1.0&lt;/version&gt;\r\n&lt;/dependency&gt;\r\n\r\n```\r\n\r\nIf there are any other methods to supply custom information to the generator, please let me know. \r\n\r\n  [1]: https://maven.apache.org/guides/plugin/guide-java-plugin-development.html","title":"JOOQ custom code generator with maven mojos","body":"<p>I have a custom code generator extending <code>JavaGenerator</code> and it would be very useful if the user using this generator could specify additional information like a list of column names to which the custom generator applies to.\nMy first though would be to add configuration options to the dependency with <a href=\"https://maven.apache.org/guides/plugin/guide-java-plugin-development.html\" rel=\"nofollow noreferrer\">mojos</a>.\nHowever this does not seem to work properly because during the build cycle two separate instance are created, once from maven and once from JOOQ.</p>\n<p>This is my custom generator:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Mojo(name=&quot;generation&quot;)\npublic class CustomGenerator extends JavaGenerator implements org.apache.maven.plugin.Mojo, ContextEnabled {\n\n    @Parameter(property=&quot;tableNames&quot;)\n    private List tableNames;\n\n    private static final Logger log = LoggerFactory.getLogger(CustomGenerator.class);\n    @Override\n    protected void generateSchema(SchemaDefinition schema) {\n        //custom code generation based on the variable &quot;tableNames&quot;\n    }\n\n    @Override\n    public void execute() throws MojoExecutionException, MojoFailureException {\n        //called when maven instantiates this class\n    }\n\n    //bunch of empty methods I do not care about but have to be there because\n    //I cannot let this class also extend from AbstractMojo\n\n    @Override\n    public void setPluginContext(Map map) {\n\n    }\n\n    @Override\n    public Map getPluginContext() {\n        return null;\n    }\n\n    @Override\n    public void setLog(Log log) {\n\n    }\n\n    @Override\n    public Log getLog() {\n        return null;\n    }\n}\n</code></pre>\n<p>And this is my pom of the project where I use the generator and want to supply additional information:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;plugin&gt;\n    &lt;groupId&gt;org.jooq&lt;/groupId&gt;\n    &lt;artifactId&gt;jooq-codegen-maven&lt;/artifactId&gt;\n    &lt;version&gt;3.15.4&lt;/version&gt;\n    &lt;configuration&gt;\n        &lt;generator&gt;\n            &lt;name&gt;org.example.CustomGenerator&lt;/name&gt;\n        &lt;/generator&gt;\n    &lt;/configuration&gt;\n&lt;/plugin&gt;\n&lt;plugin&gt;\n    &lt;groupId&gt;org.example&lt;/groupId&gt;\n    &lt;artifactId&gt;customgenerator&lt;/artifactId&gt;\n    &lt;version&gt;1.0&lt;/version&gt;\n    &lt;configuration&gt;\n        &lt;tableNames&gt;\n            &lt;tableName&gt;test_table&lt;/tableName&gt;\n        &lt;/tableNames&gt;\n    &lt;/configuration&gt;\n    &lt;executions&gt;\n        &lt;execution&gt;\n            &lt;goals&gt;\n                &lt;goal&gt;generation&lt;/goal&gt;\n            &lt;/goals&gt;\n        &lt;/execution&gt;\n    &lt;/executions&gt;\n&lt;/plugin&gt;\n...\n&lt;dependency&gt;\n    &lt;groupId&gt;org.example&lt;/groupId&gt;\n    &lt;artifactId&gt;customgenerator&lt;/artifactId&gt;\n    &lt;version&gt;1.0&lt;/version&gt;\n&lt;/dependency&gt;\n\n</code></pre>\n<p>If there are any other methods to supply custom information to the generator, please let me know.</p>\n"},{"tags":["java","spring","spring-boot","hibernate"],"comments":[{"owner":{"account_id":4470050,"reputation":68258,"user_id":3636601,"accept_rate":75,"display_name":"Jens"},"score":0,"creation_date":1661345768,"post_id":73473551,"comment_id":129749747,"body_markdown":"How is `Entity2` defined?","body":"How is <code>Entity2</code> defined?"},{"owner":{"account_id":20737111,"reputation":11,"user_id":19837403,"display_name":"PeRaVs"},"score":0,"creation_date":1661346654,"post_id":73473551,"comment_id":129750162,"body_markdown":"Oops :) I`ve added Entity2 ... thanks :)","body":"Oops :) I`ve added Entity2 ... thanks :)"},{"owner":{"account_id":4470050,"reputation":68258,"user_id":3636601,"accept_rate":75,"display_name":"Jens"},"score":0,"creation_date":1661346821,"post_id":73473551,"comment_id":129750245,"body_markdown":"Looks like you miss the `CascadeType` in `Entity2`","body":"Looks like you miss the <code>CascadeType</code> in <code>Entity2</code>"},{"owner":{"account_id":20737111,"reputation":11,"user_id":19837403,"display_name":"PeRaVs"},"score":0,"creation_date":1661347138,"post_id":73473551,"comment_id":129750377,"body_markdown":"How would you add the Cascade type to entity 2?\n\nThe sample here don&#180;t tell me to do this?!?\nhttps://www.baeldung.com/jpa-cascade-types","body":"How would you add the Cascade type to entity 2?  The sample here don&#180;t tell me to do this?!? <a href=\"https://www.baeldung.com/jpa-cascade-types\" rel=\"nofollow noreferrer\">baeldung.com/jpa-cascade-types</a>"},{"owner":{"account_id":4470050,"reputation":68258,"user_id":3636601,"accept_rate":75,"display_name":"Jens"},"score":0,"creation_date":1661347278,"post_id":73473551,"comment_id":129750425,"body_markdown":"same as `@OneToMany`","body":"same as <code>@OneToMany</code>"},{"owner":{"account_id":20737111,"reputation":11,"user_id":19837403,"display_name":"PeRaVs"},"score":0,"creation_date":1661347980,"post_id":73473551,"comment_id":129750749,"body_markdown":"The result, however, is that Entity1 is also removed when I add the cascade = CascadeType.ALL to @ManyToOne. But I just want Entity2 to be removed.","body":"The result, however, is that Entity1 is also removed when I add the cascade = CascadeType.ALL to @ManyToOne. But I just want Entity2 to be removed."}],"answers":[{"tags":[],"owner":{"account_id":7194846,"reputation":411,"user_id":5493996,"display_name":"Gevorg Harutyunyan"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1661421379,"creation_date":1661421379,"answer_id":73485523,"question_id":73473551,"body_markdown":"In your case Entity1 is the parent and Entity2 is a child.\r\nThe remove entity transition should cascade from parent to children, not the other way around.\r\nSo if you have many parents for the same entity you should iterate threw all of them and do the same operation.\r\n","title":"Spring Data Repository does not delete Entity when using @OneToMany Annotations","body":"<p>In your case Entity1 is the parent and Entity2 is a child.\nThe remove entity transition should cascade from parent to children, not the other way around.\nSo if you have many parents for the same entity you should iterate threw all of them and do the same operation.</p>\n"}],"owner":{"account_id":20737111,"reputation":11,"user_id":19837403,"display_name":"PeRaVs"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":81,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":1,"score":0,"last_activity_date":1661448292,"creation_date":1661345616,"question_id":73473551,"body_markdown":"**Code sample with unit tests to explain this question can be found here:**\r\n- https://github.com/PeRaVs/database-sample\r\n\r\n**Scenario:**\r\n- SpringBoot Application with Spring Boot Starter Data JPA integration\r\n- Relational Database using H2 In Memory Database\r\n\r\n**Database Entities:**\r\n- Entity1 with @OneToMany Relationship to Entity2\r\n- Entity2 with @ManyToOne Relationship to Entity1\r\n\r\n**The entities:**\r\n```\r\n@Entity\r\n@Table(name=&quot;entity_1&quot;)\r\npublic class Entity1 {\r\n    @Id\r\n    @Column(name=&quot;id&quot;, columnDefinition=&quot;char(36)&quot;)\r\n    private String id;\r\n\r\n    @OneToMany(\r\n            mappedBy=&quot;entity1&quot;,\r\n            cascade = CascadeType.ALL,\r\n            orphanRemoval = true\r\n    )\r\n    private List&lt;Entity2&gt; entity2 = new ArrayList&lt;&gt;();\r\n\r\n    public String getId() {\r\n        return id;\r\n    }\r\n\r\n    public Entity1 setId(String id) {\r\n        this.id = id;\r\n        return this;\r\n    }\r\n\r\n    public List&lt;Entity2&gt; getEntity2() {\r\n        return entity2;\r\n    }\r\n\r\n    public Entity1 setEntity2(List&lt;Entity2&gt; entity2) {\r\n        this.entity2 = entity2;\r\n        return this;\r\n    }\r\n}\r\n```\r\n```\r\n@Entity\r\n@Table(name=&quot;entity_2&quot;)\r\npublic class Entity2 {\r\n    @Id\r\n    @Column(columnDefinition = &quot;char(36)&quot;)\r\n    private String id;\r\n\r\n    @ManyToOne(optional = false)\r\n    @JoinColumn(name=&quot;entity1&quot;, referencedColumnName = &quot;id&quot;)\r\n    private Entity1 entity1;\r\n\r\n    public String getId() {\r\n        return id;\r\n    }\r\n\r\n    public Entity2 setId(String id) {\r\n        this.id = id;\r\n        return this;\r\n    }\r\n\r\n    public Entity1 getEntity1() {\r\n        return entity1;\r\n    }\r\n\r\n    public Entity2 setEntity1(Entity1 entity1) {\r\n        this.entity1 = entity1;\r\n        return this;\r\n    }\r\n}\r\n```\r\n**Entity relationship:**\r\n```\r\nEntity1 e1 = new Entity1().setId(&quot;1_1&quot;);\r\nEntity2 e2_1 = new Entity2().setId(&quot;2_1&quot;);\r\nEntity2 e2_2 = new Entity2().setId(&quot;2_2&quot;);\r\n\r\ne1.getEntity2().add(e2_1);\r\ne1.getEntity2().add(e2_2);\r\n\r\ne2_1.setEntity1(e1);\r\ne2_2.setEntity1(e1);\r\n\r\nentity1Repo.save(e1);\r\n```\r\n**Question:**\r\n*When I try to delete an Entity2 from the database using the Spring Data Repository *assigned to Entity2*, it does not work. **However, I don&#39;t get any error either.***\r\n\r\n**Example:**\r\n```\r\npublic void deleteEntity2UsingRepo2() {\r\n    Entity1 e1 = entity1Repo.findAll().get(0);\r\n    Entity2 e2 = e1.getEntity2().get(0);\r\n\r\n    entity2Repo.delete(e2);\r\n}\r\n```\r\n**Some logging entries:**\r\n```\r\n2022-08-24 13:35:26.577 TRACE 4956 --- [           main] o.h.e.i.DefaultDeleteEventListener       : Deleting a persistent instance\r\n2022-08-24 13:35:26.578 TRACE 4956 --- [           main] o.h.e.i.DefaultDeleteEventListener       : Deleting [de.peravs.database.sample.entity.Entity2#2_1                                 ]\r\n2022-08-24 13:35:26.579 DEBUG 4956 --- [           main] o.h.e.t.internal.TransactionImpl         : committing\r\n```\r\n**and**\r\n```\r\n2022-08-24 13:35:26.581 DEBUG 4956 --- [           main] o.hibernate.internal.util.EntityPrinter  : Listing entities:\r\n2022-08-24 13:35:26.581 DEBUG 4956 --- [           main] o.hibernate.internal.util.EntityPrinter  : de.peravs.database.sample.entity.Entity2{entity1=de.peravs.database.sample.entity.Entity1#1_1                                 , id=2_2                                 }\r\n2022-08-24 13:35:26.581 DEBUG 4956 --- [           main] o.hibernate.internal.util.EntityPrinter  : de.peravs.database.sample.entity.Entity2{entity1=de.peravs.database.sample.entity.Entity1#1_1                                 , id=2_1                                 }\r\n2022-08-24 13:35:26.581 DEBUG 4956 --- [           main] o.hibernate.internal.util.EntityPrinter  : de.peravs.database.sample.entity.Entity1{entity2=[de.peravs.database.sample.entity.Entity2#2_1                                 , de.peravs.database.sample.entity.Entity2#2_2                                 ], id=1_1                                 }\r\n```\r\n**Why is Entity2 not being deleted using this way?**\r\n\r\n**My Repositories:**\r\n```\r\npublic interface Entity1Repo extends Repository&lt;Entity1, String&gt; {\r\n    List&lt;Entity1&gt; findAll();\r\n    void save(Entity1 entity1);\r\n}\r\n\r\npublic interface Entity2Repo extends Repository&lt;Entity2, String&gt; {\r\n    void delete(Entity2 entity2);\r\n}\r\n```\r\n\r\n**Example2 (works as expected):**\r\n```\r\npublic void deleteEntity2UsingRepo1() {\r\n\r\n    Entity1 e1 = entity1Repo.findAll().get(0);\r\n    e1.getEntity2().remove(0);\r\n    entity1Repo.save(e1);\r\n}\r\n```","title":"Spring Data Repository does not delete Entity when using @OneToMany Annotations","body":"<p><strong>Code sample with unit tests to explain this question can be found here:</strong></p>\n<ul>\n<li><a href=\"https://github.com/PeRaVs/database-sample\" rel=\"nofollow noreferrer\">https://github.com/PeRaVs/database-sample</a></li>\n</ul>\n<p><strong>Scenario:</strong></p>\n<ul>\n<li>SpringBoot Application with Spring Boot Starter Data JPA integration</li>\n<li>Relational Database using H2 In Memory Database</li>\n</ul>\n<p><strong>Database Entities:</strong></p>\n<ul>\n<li>Entity1 with @OneToMany Relationship to Entity2</li>\n<li>Entity2 with @ManyToOne Relationship to Entity1</li>\n</ul>\n<p><strong>The entities:</strong></p>\n<pre><code>@Entity\n@Table(name=&quot;entity_1&quot;)\npublic class Entity1 {\n    @Id\n    @Column(name=&quot;id&quot;, columnDefinition=&quot;char(36)&quot;)\n    private String id;\n\n    @OneToMany(\n            mappedBy=&quot;entity1&quot;,\n            cascade = CascadeType.ALL,\n            orphanRemoval = true\n    )\n    private List&lt;Entity2&gt; entity2 = new ArrayList&lt;&gt;();\n\n    public String getId() {\n        return id;\n    }\n\n    public Entity1 setId(String id) {\n        this.id = id;\n        return this;\n    }\n\n    public List&lt;Entity2&gt; getEntity2() {\n        return entity2;\n    }\n\n    public Entity1 setEntity2(List&lt;Entity2&gt; entity2) {\n        this.entity2 = entity2;\n        return this;\n    }\n}\n</code></pre>\n<pre><code>@Entity\n@Table(name=&quot;entity_2&quot;)\npublic class Entity2 {\n    @Id\n    @Column(columnDefinition = &quot;char(36)&quot;)\n    private String id;\n\n    @ManyToOne(optional = false)\n    @JoinColumn(name=&quot;entity1&quot;, referencedColumnName = &quot;id&quot;)\n    private Entity1 entity1;\n\n    public String getId() {\n        return id;\n    }\n\n    public Entity2 setId(String id) {\n        this.id = id;\n        return this;\n    }\n\n    public Entity1 getEntity1() {\n        return entity1;\n    }\n\n    public Entity2 setEntity1(Entity1 entity1) {\n        this.entity1 = entity1;\n        return this;\n    }\n}\n</code></pre>\n<p><strong>Entity relationship:</strong></p>\n<pre><code>Entity1 e1 = new Entity1().setId(&quot;1_1&quot;);\nEntity2 e2_1 = new Entity2().setId(&quot;2_1&quot;);\nEntity2 e2_2 = new Entity2().setId(&quot;2_2&quot;);\n\ne1.getEntity2().add(e2_1);\ne1.getEntity2().add(e2_2);\n\ne2_1.setEntity1(e1);\ne2_2.setEntity1(e1);\n\nentity1Repo.save(e1);\n</code></pre>\n<p><strong>Question:</strong>\n<em>When I try to delete an Entity2 from the database using the Spring Data Repository <em>assigned to Entity2</em>, it does not work. <strong>However, I don't get any error either.</strong></em></p>\n<p><strong>Example:</strong></p>\n<pre><code>public void deleteEntity2UsingRepo2() {\n    Entity1 e1 = entity1Repo.findAll().get(0);\n    Entity2 e2 = e1.getEntity2().get(0);\n\n    entity2Repo.delete(e2);\n}\n</code></pre>\n<p><strong>Some logging entries:</strong></p>\n<pre><code>2022-08-24 13:35:26.577 TRACE 4956 --- [           main] o.h.e.i.DefaultDeleteEventListener       : Deleting a persistent instance\n2022-08-24 13:35:26.578 TRACE 4956 --- [           main] o.h.e.i.DefaultDeleteEventListener       : Deleting [de.peravs.database.sample.entity.Entity2#2_1                                 ]\n2022-08-24 13:35:26.579 DEBUG 4956 --- [           main] o.h.e.t.internal.TransactionImpl         : committing\n</code></pre>\n<p><strong>and</strong></p>\n<pre><code>2022-08-24 13:35:26.581 DEBUG 4956 --- [           main] o.hibernate.internal.util.EntityPrinter  : Listing entities:\n2022-08-24 13:35:26.581 DEBUG 4956 --- [           main] o.hibernate.internal.util.EntityPrinter  : de.peravs.database.sample.entity.Entity2{entity1=de.peravs.database.sample.entity.Entity1#1_1                                 , id=2_2                                 }\n2022-08-24 13:35:26.581 DEBUG 4956 --- [           main] o.hibernate.internal.util.EntityPrinter  : de.peravs.database.sample.entity.Entity2{entity1=de.peravs.database.sample.entity.Entity1#1_1                                 , id=2_1                                 }\n2022-08-24 13:35:26.581 DEBUG 4956 --- [           main] o.hibernate.internal.util.EntityPrinter  : de.peravs.database.sample.entity.Entity1{entity2=[de.peravs.database.sample.entity.Entity2#2_1                                 , de.peravs.database.sample.entity.Entity2#2_2                                 ], id=1_1                                 }\n</code></pre>\n<p><strong>Why is Entity2 not being deleted using this way?</strong></p>\n<p><strong>My Repositories:</strong></p>\n<pre><code>public interface Entity1Repo extends Repository&lt;Entity1, String&gt; {\n    List&lt;Entity1&gt; findAll();\n    void save(Entity1 entity1);\n}\n\npublic interface Entity2Repo extends Repository&lt;Entity2, String&gt; {\n    void delete(Entity2 entity2);\n}\n</code></pre>\n<p><strong>Example2 (works as expected):</strong></p>\n<pre><code>public void deleteEntity2UsingRepo1() {\n\n    Entity1 e1 = entity1Repo.findAll().get(0);\n    e1.getEntity2().remove(0);\n    entity1Repo.save(e1);\n}\n</code></pre>\n"},{"tags":["java","gradle","cucumber","cucumber-junit","cucumber-java"],"answers":[{"tags":[],"owner":{"account_id":5700778,"reputation":8968,"user_id":4512398,"display_name":"Grasshopper"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1500213336,"creation_date":1500213336,"answer_id":45129375,"question_id":45128988,"body_markdown":"The value for the glue option should be a java classpath. And the feature files should be the last option.\r\n\r\n    {&quot;--plugin&quot;, &quot;html:build/reports/cucumber&quot;, &quot;--glue&quot;, &quot;steps&quot;, &quot;src/test/resources/features&quot;}","title":"how to create executable jar file with cucumber tests?","body":"<p>The value for the glue option should be a java classpath. And the feature files should be the last option.</p>\n\n<pre><code>{\"--plugin\", \"html:build/reports/cucumber\", \"--glue\", \"steps\", \"src/test/resources/features\"}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2121802,"reputation":28,"user_id":1884890,"display_name":"sadakar"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1661448184,"creation_date":1661448184,"answer_id":73491487,"question_id":45128988,"body_markdown":"The below code worked for me to execute the cucumber tests from runnable jar with test frame work as TestNG.\r\n\r\nExecuting jar: \r\n**java -jar ProductsAutomation-0.0.1-SNAPSHOT-jar-with-dependencies.jar**\r\n \r\n    import io.cucumber.core.cli.Main;\r\n    public static void main(String args[]) throws Throwable {\r\n\t\ttry {\r\n\t\t\tMain.main(new String[] { \r\n\t\t\r\n\r\n\t\t\t&quot;-g&quot;,&quot;com.sadakar.cucumber.common&quot;,\r\n\t\t\t&quot;-g&quot;,&quot;com.sadakar.cucumber.runner&quot;,\r\n\t\t\t\t\t\t\r\n\t\t\t&quot;classpath:features&quot;, \r\n\t\t\t\r\n\t\t\t&quot;-t&quot;,&quot;@SmokeTest&quot;,\r\n\t\t\t\r\n\t\t\t\t\t\r\n\t\t\t&quot;-p&quot;, &quot;pretty&quot;, \r\n\t\t\t&quot;-p&quot;, &quot;json:target/cucumber-reports/cucumber.json&quot;, \r\n\t\t\t&quot;-p&quot;, &quot;html:target/cucumber-reports/cucumberreport.html&quot;,\r\n\t\t\t\r\n\t\t\t&quot;-m&quot;\r\n\t\t}\r\n\t\t);\r\n\t} catch (Exception e) {\r\n\t\t\te.printStackTrace();\r\n\t\t\tSystem.out.println(&quot;Main method exception : &quot; + e);\r\n\t}\r\n\t}\r\n\r\n\r\n","title":"how to create executable jar file with cucumber tests?","body":"<p>The below code worked for me to execute the cucumber tests from runnable jar with test frame work as TestNG.</p>\n<p>Executing jar:\n<strong>java -jar ProductsAutomation-0.0.1-SNAPSHOT-jar-with-dependencies.jar</strong></p>\n<pre><code>import io.cucumber.core.cli.Main;\npublic static void main(String args[]) throws Throwable {\n    try {\n        Main.main(new String[] { \n    \n\n        &quot;-g&quot;,&quot;com.sadakar.cucumber.common&quot;,\n        &quot;-g&quot;,&quot;com.sadakar.cucumber.runner&quot;,\n                    \n        &quot;classpath:features&quot;, \n        \n        &quot;-t&quot;,&quot;@SmokeTest&quot;,\n        \n                \n        &quot;-p&quot;, &quot;pretty&quot;, \n        &quot;-p&quot;, &quot;json:target/cucumber-reports/cucumber.json&quot;, \n        &quot;-p&quot;, &quot;html:target/cucumber-reports/cucumberreport.html&quot;,\n        \n        &quot;-m&quot;\n    }\n    );\n} catch (Exception e) {\n        e.printStackTrace();\n        System.out.println(&quot;Main method exception : &quot; + e);\n}\n}\n</code></pre>\n"}],"owner":{"account_id":8810437,"reputation":43,"user_id":6583653,"display_name":"P.R.S"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":2856,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1661448184,"creation_date":1500210715,"question_id":45128988,"body_markdown":"My service create an executable jar by gradle. When i create and run my jar (java -jar file.jar) i recive error:\r\n\r\n    no main manifest attribute, in &quot;file.jar&quot;\r\n\r\nbecause i don&#39;t have main_class.\r\n\r\nI created main method:\r\n\r\n    public static void main(final String[] args) throws Throwable {\r\n    String[] arguments = {&quot;--plugin&quot;, &quot;html:build/reports/cucumber&quot;, &quot;src/test/resources/features&quot;, &quot;--glue&quot;, &quot;src/test/java/steps&quot;};\r\n    cucumber.api.cli.Main.main(arguments);\r\n}\r\n\r\nand My program founds the features but doesn&#39;t found glue code.\r\n\r\nCould someone help me with this problem? Thank you in advance.","title":"how to create executable jar file with cucumber tests?","body":"<p>My service create an executable jar by gradle. When i create and run my jar (java -jar file.jar) i recive error:</p>\n\n<pre><code>no main manifest attribute, in \"file.jar\"\n</code></pre>\n\n<p>because i don't have main_class.</p>\n\n<p>I created main method:</p>\n\n<pre><code>public static void main(final String[] args) throws Throwable {\nString[] arguments = {\"--plugin\", \"html:build/reports/cucumber\", \"src/test/resources/features\", \"--glue\", \"src/test/java/steps\"};\ncucumber.api.cli.Main.main(arguments);\n</code></pre>\n\n<p>}</p>\n\n<p>and My program founds the features but doesn't found glue code.</p>\n\n<p>Could someone help me with this problem? Thank you in advance.</p>\n"},{"tags":["java","spring","configuration","spring-security-oauth2"],"answers":[{"tags":[],"owner":{"account_id":1670803,"reputation":611,"user_id":1537298,"accept_rate":100,"display_name":"NeoP5"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1448872840,"creation_date":1448872840,"answer_id":33994454,"question_id":33828131,"body_markdown":"Ok, so it seems (if you are not using spring boot) right now there is no direct possibility of doing a full java-configuration for SSO/OAuth2.\r\n\r\nI got around it by using @import to load my old XML-based configuration-\r\n\r\n    @Configuration\r\n    @EnableWebSecurity\r\n    @ImportResource({&quot;classpath*:spring-security-RSA.xml&quot;})\r\n    public class SecurityRSAStrategyConfiguration {\r\n        ...\r\n    }","title":"Spring OAuth2: XML -&gt; Java configuration","body":"<p>Ok, so it seems (if you are not using spring boot) right now there is no direct possibility of doing a full java-configuration for SSO/OAuth2.</p>\n\n<p>I got around it by using @import to load my old XML-based configuration-</p>\n\n<pre><code>@Configuration\n@EnableWebSecurity\n@ImportResource({\"classpath*:spring-security-RSA.xml\"})\npublic class SecurityRSAStrategyConfiguration {\n    ...\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":12973308,"reputation":29,"user_id":9378235,"display_name":"Dan Grow"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1661447934,"creation_date":1661447934,"answer_id":73491443,"question_id":33828131,"body_markdown":"I have exactly the opposite problem, I have a spring (not boot) application and need to authenticate to an external oauth2 IDP (in this case Azure AD), just using spring-security 3.2.1, spring fwork 4.3.18. Finding directions without spring boot is a challenge! ","title":"Spring OAuth2: XML -&gt; Java configuration","body":"<p>I have exactly the opposite problem, I have a spring (not boot) application and need to authenticate to an external oauth2 IDP (in this case Azure AD), just using spring-security 3.2.1, spring fwork 4.3.18. Finding directions without spring boot is a challenge!</p>\n"}],"owner":{"account_id":1670803,"reputation":611,"user_id":1537298,"accept_rate":100,"display_name":"NeoP5"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":322,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":33994454,"answer_count":2,"score":0,"last_activity_date":1661447934,"creation_date":1448026775,"question_id":33828131,"body_markdown":"i am just migrating a spring 3 application from xml-configuration to java config.\r\n\r\nWe are using spring 3.2.8 + spring security 3.2.4.\r\nI am wondering how to move the following XML config to java.\r\n\r\n    &lt;oauth:client id=&quot;oauth2ClientFilter&quot; /&gt;\r\n\r\nAny idea?","title":"Spring OAuth2: XML -&gt; Java configuration","body":"<p>i am just migrating a spring 3 application from xml-configuration to java config.</p>\n\n<p>We are using spring 3.2.8 + spring security 3.2.4.\nI am wondering how to move the following XML config to java.</p>\n\n<pre><code>&lt;oauth:client id=\"oauth2ClientFilter\" /&gt;\n</code></pre>\n\n<p>Any idea?</p>\n"},{"tags":["java","apache-kafka","apache-kafka-streams","avro","spring-cloud-stream"],"comments":[{"owner":{"account_id":1856533,"reputation":376,"user_id":1681974,"display_name":"deadzg_devil"},"score":0,"creation_date":1661424790,"post_id":73485631,"comment_id":129771885,"body_markdown":"Can you please provide more information? What is caKTable? Which SERDE you are using (I am assuming Avro)?Are you using Schema Registry as well? Which build system you are using (may be your library is not included properly in the dependency)?","body":"Can you please provide more information? What is caKTable? Which SERDE you are using (I am assuming Avro)?Are you using Schema Registry as well? Which build system you are using (may be your library is not included properly in the dependency)?"},{"owner":{"account_id":2671330,"reputation":183376,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"score":0,"creation_date":1661442254,"post_id":73485631,"comment_id":129779086,"body_markdown":"You will need to write your own `EmployeeListSerde`, for example, and add `Produced.with` and/or `Materialized.with` parameters here since there is the ListSerde class only supports primitive Java types, I believe","body":"You will need to write your own <code>EmployeeListSerde</code>, for example, and add <code>Produced.with</code> and/or <code>Materialized.with</code> parameters here since there is the ListSerde class only supports primitive Java types, I believe"},{"owner":{"account_id":25898288,"reputation":16,"user_id":19624579,"display_name":"Pankaj Mandale"},"score":0,"creation_date":1661447272,"post_id":73485631,"comment_id":129780864,"body_markdown":"@deadzg_devil Yes i am using Schema Registry and Avro, i have added dependency org.springframework.cloud:spring-cloud-stream-binder-kafka-streams, io.confluent:kafka-avro-serializer:5.2.0, io.confluent:kafka-streams-avro-serde:5.2.0","body":"@deadzg_devil Yes i am using Schema Registry and Avro, i have added dependency org.springframework.cloud:spring-cloud-stream-binder-kafka-s&zwnj;&#8203;treams, io.confluent:kafka-avro-serializer:5.2.0, io.confluent:kafka-streams-avro-serde:5.2.0"},{"owner":{"account_id":25898288,"reputation":16,"user_id":19624579,"display_name":"Pankaj Mandale"},"score":0,"creation_date":1661447730,"post_id":73485631,"comment_id":129781030,"body_markdown":"@OneCricketeer i have use Grouped.with(Serdes.String(), new SpecificAvroSerde&lt;&gt;()) but now i am facing another issue and how to write EmployeeListSerde","body":"@OneCricketeer i have use Grouped.with(Serdes.String(), new SpecificAvroSerde&lt;&gt;()) but now i am facing another issue and how to write EmployeeListSerde"},{"owner":{"account_id":2671330,"reputation":183376,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"score":0,"creation_date":1661535632,"post_id":73485631,"comment_id":129803662,"body_markdown":"`Grouped.with` is for `groupBy` opertator. You need `Materialized.with` argument for the `aggregate` method... `SpecificAvroSerde` may work for one Employee class, but not a list of them. You&#39;d start by creating a class that [`implements Serde`](https://github.com/apache/kafka/blob/trunk/clients/src/main/java/org/apache/kafka/common/serialization/Serde.java). It may help if you actually create an Avro type the defines an `EmployeeList` with `type: array`","body":"<code>Grouped.with</code> is for <code>groupBy</code> opertator. You need <code>Materialized.with</code> argument for the <code>aggregate</code> method... <code>SpecificAvroSerde</code> may work for one Employee class, but not a list of them. You&#39;d start by creating a class that <a href=\"https://github.com/apache/kafka/blob/trunk/clients/src/main/java/org/apache/kafka/common/serialization/Serde.java\" rel=\"nofollow noreferrer\"><code>implements Serde</code></a>. It may help if you actually create an Avro type the defines an <code>EmployeeList</code> with <code>type: array</code>"}],"owner":{"account_id":25898288,"reputation":16,"user_id":19624579,"display_name":"Pankaj Mandale"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":364,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1661447865,"creation_date":1661421811,"question_id":73485631,"body_markdown":"`class java.util.ArrayList cannot be cast to class org.apache.avro.specific.SpecificRecord (java.util.ArrayList is in module java.base of loader &#39;bootstrap&#39;; org.apache.avro.specific.SpecificRecord is in unnamed module of loader &#39;app&#39;) `\r\n\r\nanother issue\r\norg.apache.kafka.streams.errors.StreamsException: Error encountered sending record to topic structure-KTABLE-AGGREGATE-STATE-STORE-0000000015-repartition for task 2_0 due to:\r\norg.apache.kafka.common.errors.SerializationException: Error serializing Avro message\r\n\r\n    final KTable&lt;String, ArrayList&lt;Employee&gt;&gt; caKTables = caKTable\r\n        .groupBy((key, value) -&gt; pair(value.getBrStId(), value))\r\n        .aggregate((Initializer&lt;ArrayList&lt;Employee&gt;&gt;) ArrayList::new, (key, value, aggregate) -&gt; {\r\n            aggregate.add(value);\r\n            return aggregate;\r\n        }, (key, oldValue, agg) -&gt; {\r\n            agg.remove(oldValue);\r\n            return agg;\r\n        });\r\n\r\n                brKTable\r\n                .leftJoin(caKTables, caJoiner) // TODO\r\n                .toStream()\r\n                .filter((key, value) -&gt; value != null)\r\n                .map(this::changeKey);\r\n\r\n","title":"how to use Aggregate function in kstream with Arraylist of Avro Object","body":"<p><code>class java.util.ArrayList cannot be cast to class org.apache.avro.specific.SpecificRecord (java.util.ArrayList is in module java.base of loader 'bootstrap'; org.apache.avro.specific.SpecificRecord is in unnamed module of loader 'app') </code></p>\n<p>another issue\norg.apache.kafka.streams.errors.StreamsException: Error encountered sending record to topic structure-KTABLE-AGGREGATE-STATE-STORE-0000000015-repartition for task 2_0 due to:\norg.apache.kafka.common.errors.SerializationException: Error serializing Avro message</p>\n<pre><code>final KTable&lt;String, ArrayList&lt;Employee&gt;&gt; caKTables = caKTable\n    .groupBy((key, value) -&gt; pair(value.getBrStId(), value))\n    .aggregate((Initializer&lt;ArrayList&lt;Employee&gt;&gt;) ArrayList::new, (key, value, aggregate) -&gt; {\n        aggregate.add(value);\n        return aggregate;\n    }, (key, oldValue, agg) -&gt; {\n        agg.remove(oldValue);\n        return agg;\n    });\n\n            brKTable\n            .leftJoin(caKTables, caJoiner) // TODO\n            .toStream()\n            .filter((key, value) -&gt; value != null)\n            .map(this::changeKey);\n</code></pre>\n"},{"tags":["java","mongodb","spigot"],"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1661411577,"post_id":73480902,"comment_id":129766964,"body_markdown":"Please provide enough code so others can better understand or reproduce the problem.","body":"Please provide enough code so others can better understand or reproduce the problem."}],"answers":[{"tags":[],"owner":{"account_id":15178500,"reputation":4190,"user_id":10952503,"display_name":"Elikill58"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1661447718,"creation_date":1661447718,"answer_id":73491403,"question_id":73480902,"body_markdown":"As [this](https://github.com/spring-projects/spring-boot/issues/25442) mention, it seems there is multiple mongoDB version on same build path.\r\n\r\nI suggest you to relocate your own implementation.\r\n\r\nAlso, prefer copy paste and use code block instead of showing picture of code or console logs.","title":"NoSuchFieldError MongoDB Error Spigot (Minecraft Server","body":"<p>As <a href=\"https://github.com/spring-projects/spring-boot/issues/25442\" rel=\"nofollow noreferrer\">this</a> mention, it seems there is multiple mongoDB version on same build path.</p>\n<p>I suggest you to relocate your own implementation.</p>\n<p>Also, prefer copy paste and use code block instead of showing picture of code or console logs.</p>\n"}],"owner":{"display_name":"user19841649"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":41,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1661447718,"creation_date":1661390064,"question_id":73480902,"body_markdown":"This is the error im getting in the console\r\nhttps://prnt.sc/UEwAWFplmUWn\r\nHere is the line its refencing on console to the mongostorage class and the onEnable that is also referenced.\r\nonEnable: https://prnt.sc/8dnYz-VG7fL8 (the string that is not visible is &quot;database.password&quot;)\r\nmongostorage: https://prnt.sc/xO2DnWPeV1wJ\r\nAnd here is my coreConfig file: https://prnt.sc/o900NtzQt3YJ\r\n\r\n(Im sorry if i referenced anything wrong i just started coding and this plugin is not mine i found it on github and idk how to get it to work)","title":"NoSuchFieldError MongoDB Error Spigot (Minecraft Server","body":"<p>This is the error im getting in the console\n<a href=\"https://prnt.sc/UEwAWFplmUWn\" rel=\"nofollow noreferrer\">https://prnt.sc/UEwAWFplmUWn</a>\nHere is the line its refencing on console to the mongostorage class and the onEnable that is also referenced.\nonEnable: <a href=\"https://prnt.sc/8dnYz-VG7fL8\" rel=\"nofollow noreferrer\">https://prnt.sc/8dnYz-VG7fL8</a> (the string that is not visible is &quot;database.password&quot;)\nmongostorage: <a href=\"https://prnt.sc/xO2DnWPeV1wJ\" rel=\"nofollow noreferrer\">https://prnt.sc/xO2DnWPeV1wJ</a>\nAnd here is my coreConfig file: <a href=\"https://prnt.sc/o900NtzQt3YJ\" rel=\"nofollow noreferrer\">https://prnt.sc/o900NtzQt3YJ</a></p>\n<p>(Im sorry if i referenced anything wrong i just started coding and this plugin is not mine i found it on github and idk how to get it to work)</p>\n"},{"tags":["java","rest-assured"],"comments":[{"owner":{"account_id":10263942,"reputation":5676,"user_id":7574461,"display_name":"lucas-nguyen-17"},"score":0,"creation_date":1661481243,"post_id":73491349,"comment_id":129788086,"body_markdown":"Try remove this line `.header(&quot;Content-type&quot;, &quot;multipart/form-data; charset=UTF-8&quot;)`","body":"Try remove this line <code>.header(&quot;Content-type&quot;, &quot;multipart&#47;form-data; charset=UTF-8&quot;)</code>"},{"owner":{"account_id":18579720,"reputation":31,"user_id":13539552,"display_name":"jbelyaeva"},"score":0,"creation_date":1661489848,"post_id":73491349,"comment_id":129789167,"body_markdown":"This solution doesn&#39;t work. I&#39;m still have &quot;????&quot; in log.","body":"This solution doesn&#39;t work. I&#39;m still have &quot;????&quot; in log."},{"owner":{"account_id":11380920,"reputation":8254,"user_id":8343843,"display_name":"Alexey R."},"score":0,"creation_date":1661510523,"post_id":73491349,"comment_id":129794835,"body_markdown":"Your issue is more likely in that your console cannot properly show Cyrillic. Where exactly do you observe this? In IDE console or in some terminal, or in log file?","body":"Your issue is more likely in that your console cannot properly show Cyrillic. Where exactly do you observe this? In IDE console or in some terminal, or in log file?"},{"owner":{"account_id":18579720,"reputation":31,"user_id":13539552,"display_name":"jbelyaeva"},"score":0,"creation_date":1661526056,"post_id":73491349,"comment_id":129800356,"body_markdown":"I see &quot;????&quot; in IDE terminal, in Elastic and in message Kafka. If I send similar request in Postman,  I see correctly Cyrillic symbols. Also I can see correctly Cyrillic symbols in IDE terminal when I use System.out.println(&quot;Саша&quot;).","body":"I see &quot;????&quot; in IDE terminal, in Elastic and in message Kafka. If I send similar request in Postman,  I see correctly Cyrillic symbols. Also I can see correctly Cyrillic symbols in IDE terminal when I use System.out.println(&quot;Саша&quot;)."},{"owner":{"account_id":10368026,"reputation":479,"user_id":7646504,"display_name":"Domadin"},"score":1,"creation_date":1676816357,"post_id":73491349,"comment_id":133209309,"body_markdown":"Did you manage to resolve the issue? I experience the same problem and can&#39;t find a working solution","body":"Did you manage to resolve the issue? I experience the same problem and can&#39;t find a working solution"},{"owner":{"account_id":3317661,"reputation":172,"user_id":2789616,"accept_rate":94,"display_name":"SmallSani"},"score":0,"creation_date":1677544743,"post_id":73491349,"comment_id":133355373,"body_markdown":"https://stackoverflow.com/questions/73839959/charset-of-http-response-in-java","body":"<a href=\"https://stackoverflow.com/questions/73839959/charset-of-http-response-in-java\" title=\"charset of http response in java\">stackoverflow.com/questions/73839959/&hellip;</a>"}],"owner":{"account_id":18579720,"reputation":31,"user_id":13539552,"display_name":"jbelyaeva"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":256,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":0,"score":2,"last_activity_date":1661447418,"creation_date":1661447418,"question_id":73491349,"body_markdown":"I using rest-assured 4.3.3\r\n\r\nI send request with Content-type=&quot;multipart/formdata&quot;\r\n```\r\n Response response = RestAssured.given()\r\n                .header(&quot;Accept&quot;, &quot;application/json&quot;)\r\n                .header(&quot;Content-type&quot;, &quot;multipart/form-data; charset=UTF-8&quot;)\r\n                .formParam(&quot;name&quot;, &quot;Саша&quot;)\r\n                .multiPart(&quot;document_type_1&quot;, credRequestItem.getDocuments().get(0).getType())\r\n                .multiPart(&quot;document_file_1&quot;, new File(name))\r\n                .when()\r\n                .post(&quot;http://path&quot;)\r\n                .then()\r\n                .extract()\r\n                .response();\r\n```\r\nIn formParam in value I used Cyrillic. In log I&#39;m seeing:\r\n```\r\n13:01:16.263 [Test worker] DEBUG org.apache.http.wire -  &gt;&gt; &quot;--&quot;\r\n13:01:16.263 [Test worker] DEBUG org.apache.http.wire -  &gt;&gt; &quot;6SnC_ZNf2wyvWpz1gPL5lBJAMXEEfzlqg3&quot;\r\n13:01:16.263 [Test worker] DEBUG org.apache.http.wire -  &gt;&gt; &quot;[\\r][\\n]&quot;\r\n13:01:16.263 [Test worker] DEBUG org.apache.http.wire -  &gt;&gt; &quot;Content-Disposition&quot;\r\n13:01:16.263 [Test worker] DEBUG org.apache.http.wire -  &gt;&gt; &quot;: &quot;\r\n13:01:16.263 [Test worker] DEBUG org.apache.http.wire -  &gt;&gt; &quot;form-data; name=&quot;name&quot;&quot;\r\n13:01:16.263 [Test worker] DEBUG org.apache.http.wire -  &gt;&gt; &quot;[\\r][\\n]&quot;\r\n13:01:16.263 [Test worker] DEBUG org.apache.http.wire -  &gt;&gt; &quot;Content-Type&quot;\r\n13:01:16.263 [Test worker] DEBUG org.apache.http.wire -  &gt;&gt; &quot;: &quot;\r\n13:01:16.263 [Test worker] DEBUG org.apache.http.wire -  &gt;&gt; &quot;text/plain; charset=US-ASCII&quot;\r\n13:01:16.263 [Test worker] DEBUG org.apache.http.wire -  &gt;&gt; &quot;[\\r][\\n]&quot;\r\n13:01:16.263 [Test worker] DEBUG org.apache.http.wire -  &gt;&gt; &quot;Content-Transfer-Encoding&quot;\r\n13:01:16.263 [Test worker] DEBUG org.apache.http.wire -  &gt;&gt; &quot;: &quot;\r\n13:01:16.263 [Test worker] DEBUG org.apache.http.wire -  &gt;&gt; &quot;8bit&quot;\r\n13:01:16.263 [Test worker] DEBUG org.apache.http.wire -  &gt;&gt; &quot;[\\r][\\n]&quot;\r\n13:01:16.263 [Test worker] DEBUG org.apache.http.wire -  &gt;&gt; &quot;[\\r][\\n]&quot;\r\n13:01:16.263 [Test worker] DEBUG org.apache.http.wire -  &gt;&gt; &quot;????&quot;\r\n13:01:16.263 [Test worker] DEBUG org.apache.http.wire -  &gt;&gt; &quot;[\\r][\\n]&quot;\r\n13:01:16.263 [Test worker] DEBUG org.apache.http.wire -  &gt;&gt; &quot;--&quot;\r\n13:01:16.263 [Test worker] DEBUG org.apache.http.wire -  &gt;&gt; &quot;6SnC_ZNf2wyvWpz1gPL5lBJAMXEEfzlqg3&quot;\r\n13:01:16.263 [Test worker] DEBUG org.apache.http.wire -  &gt;&gt; &quot;--&quot;\r\n\r\n```\r\nCyrillic was changing on &quot;????&quot;\r\nCan your help me? What I need to add in my code? (encoderConfig doesn&#39;t working). I used a lot of variants.","title":"Rest-assured POST call with formParam not send Cyrillic correctly. I have &quot;???&quot; in the result","body":"<p>I using rest-assured 4.3.3</p>\n<p>I send request with Content-type=&quot;multipart/formdata&quot;</p>\n<pre><code> Response response = RestAssured.given()\n                .header(&quot;Accept&quot;, &quot;application/json&quot;)\n                .header(&quot;Content-type&quot;, &quot;multipart/form-data; charset=UTF-8&quot;)\n                .formParam(&quot;name&quot;, &quot;Саша&quot;)\n                .multiPart(&quot;document_type_1&quot;, credRequestItem.getDocuments().get(0).getType())\n                .multiPart(&quot;document_file_1&quot;, new File(name))\n                .when()\n                .post(&quot;http://path&quot;)\n                .then()\n                .extract()\n                .response();\n</code></pre>\n<p>In formParam in value I used Cyrillic. In log I'm seeing:</p>\n<pre><code>13:01:16.263 [Test worker] DEBUG org.apache.http.wire -  &gt;&gt; &quot;--&quot;\n13:01:16.263 [Test worker] DEBUG org.apache.http.wire -  &gt;&gt; &quot;6SnC_ZNf2wyvWpz1gPL5lBJAMXEEfzlqg3&quot;\n13:01:16.263 [Test worker] DEBUG org.apache.http.wire -  &gt;&gt; &quot;[\\r][\\n]&quot;\n13:01:16.263 [Test worker] DEBUG org.apache.http.wire -  &gt;&gt; &quot;Content-Disposition&quot;\n13:01:16.263 [Test worker] DEBUG org.apache.http.wire -  &gt;&gt; &quot;: &quot;\n13:01:16.263 [Test worker] DEBUG org.apache.http.wire -  &gt;&gt; &quot;form-data; name=&quot;name&quot;&quot;\n13:01:16.263 [Test worker] DEBUG org.apache.http.wire -  &gt;&gt; &quot;[\\r][\\n]&quot;\n13:01:16.263 [Test worker] DEBUG org.apache.http.wire -  &gt;&gt; &quot;Content-Type&quot;\n13:01:16.263 [Test worker] DEBUG org.apache.http.wire -  &gt;&gt; &quot;: &quot;\n13:01:16.263 [Test worker] DEBUG org.apache.http.wire -  &gt;&gt; &quot;text/plain; charset=US-ASCII&quot;\n13:01:16.263 [Test worker] DEBUG org.apache.http.wire -  &gt;&gt; &quot;[\\r][\\n]&quot;\n13:01:16.263 [Test worker] DEBUG org.apache.http.wire -  &gt;&gt; &quot;Content-Transfer-Encoding&quot;\n13:01:16.263 [Test worker] DEBUG org.apache.http.wire -  &gt;&gt; &quot;: &quot;\n13:01:16.263 [Test worker] DEBUG org.apache.http.wire -  &gt;&gt; &quot;8bit&quot;\n13:01:16.263 [Test worker] DEBUG org.apache.http.wire -  &gt;&gt; &quot;[\\r][\\n]&quot;\n13:01:16.263 [Test worker] DEBUG org.apache.http.wire -  &gt;&gt; &quot;[\\r][\\n]&quot;\n13:01:16.263 [Test worker] DEBUG org.apache.http.wire -  &gt;&gt; &quot;????&quot;\n13:01:16.263 [Test worker] DEBUG org.apache.http.wire -  &gt;&gt; &quot;[\\r][\\n]&quot;\n13:01:16.263 [Test worker] DEBUG org.apache.http.wire -  &gt;&gt; &quot;--&quot;\n13:01:16.263 [Test worker] DEBUG org.apache.http.wire -  &gt;&gt; &quot;6SnC_ZNf2wyvWpz1gPL5lBJAMXEEfzlqg3&quot;\n13:01:16.263 [Test worker] DEBUG org.apache.http.wire -  &gt;&gt; &quot;--&quot;\n\n</code></pre>\n<p>Cyrillic was changing on &quot;????&quot;\nCan your help me? What I need to add in my code? (encoderConfig doesn't working). I used a lot of variants.</p>\n"},{"tags":["java","selenium","selenium-webdriver","automated-tests","relative-locators"],"answers":[{"tags":[],"owner":{"account_id":10575026,"reputation":67,"user_id":7790584,"display_name":"Manu Gopinathan"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1661447125,"creation_date":1661447125,"answer_id":73491300,"question_id":73482538,"body_markdown":"You can try this:\r\n\r\n    string locator = String.format(&quot;//div[contains(@id,&#39;bkmgFlights_travelDates_1-date-2022-%s-%s&#39;)]&quot;, esi.m1, esi.d1);\r\n    driver.findElement(By.xpath(locator)).click();\r\n\r\nIf you want to learn more about string interpolation from [here][1], if you wish.\r\n\r\n\r\n  [1]: https://www.geeksforgeeks.org/java-program-to-illustrate-string-interpolation/","title":"I want to make it possible : concat string and variables with locator in Selenium with java","body":"<p>You can try this:</p>\n<pre><code>string locator = String.format(&quot;//div[contains(@id,'bkmgFlights_travelDates_1-date-2022-%s-%s')]&quot;, esi.m1, esi.d1);\ndriver.findElement(By.xpath(locator)).click();\n</code></pre>\n<p>If you want to learn more about string interpolation from <a href=\"https://www.geeksforgeeks.org/java-program-to-illustrate-string-interpolation/\" rel=\"nofollow noreferrer\">here</a>, if you wish.</p>\n"}],"owner":{"account_id":24615491,"reputation":3,"user_id":18516556,"display_name":"Jay Shah"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":587,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":73491300,"answer_count":1,"score":0,"last_activity_date":1661447125,"creation_date":1661406991,"question_id":73482538,"body_markdown":"Here is the task we have to resolve.\r\nScenario : \r\n1&gt; Every time user opens the test, he must be asked to input date and month.\r\n\r\n2&gt; Those scanned inputs variables d1 and m1 called by method esi\r\n\r\n3&gt; id element with that month and date must be seen clicked on website in date section based on user input. \r\nThe of id for all dates is something like : \r\n\r\n**Tag div** , **id** = **bkmgFlights_travelDates_1-date-2022-10-21** , \r\nin which start is always same for all dates as **bkmgFlights_travelDates_1-date-2022-**\r\n\r\nSo I have already done the  1&gt; and 2&gt; successfully,\r\nfor the 3rd task, I am trying the below, but not working. \r\n\r\n    driver.findElement(By.xpath(&quot;//div[contains(@id,&#39;bkmgFlights_travelDates_1-date-2022-&#39;)]&quot;+esi.m1+&quot;-&quot;+esi.d1)).click();\r\n\r\nI also tried action class,  concat is happening as i can see colours and no errors, but still not working. It shows invalid selector, sometimes shows differet errors with action class, when I try  \r\n\t\r\n\r\n    action1.click(driver.findElement(By.cssSelector(&quot;//div[contains(@id,&#39;bkmgFlights_travelDates_1-date-2022-&#39;)]&quot;+esi.m1+&quot;-&quot;+esi.d1)));\r\n\r\n\r\nPlease help me with how we can locate elements based on path + concatenated string and variable and then at last performing click on it.\r\nThank you.\r\n[enter image description here][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/g5CXJ.png\r\n","title":"I want to make it possible : concat string and variables with locator in Selenium with java","body":"<p>Here is the task we have to resolve.\nScenario :\n1&gt; Every time user opens the test, he must be asked to input date and month.</p>\n<p>2&gt; Those scanned inputs variables d1 and m1 called by method esi</p>\n<p>3&gt; id element with that month and date must be seen clicked on website in date section based on user input.\nThe of id for all dates is something like :</p>\n<p><strong>Tag div</strong> , <strong>id</strong> = <strong>bkmgFlights_travelDates_1-date-2022-10-21</strong> ,\nin which start is always same for all dates as <strong>bkmgFlights_travelDates_1-date-2022-</strong></p>\n<p>So I have already done the  1&gt; and 2&gt; successfully,\nfor the 3rd task, I am trying the below, but not working.</p>\n<pre><code>driver.findElement(By.xpath(&quot;//div[contains(@id,'bkmgFlights_travelDates_1-date-2022-')]&quot;+esi.m1+&quot;-&quot;+esi.d1)).click();\n</code></pre>\n<p>I also tried action class,  concat is happening as i can see colours and no errors, but still not working. It shows invalid selector, sometimes shows differet errors with action class, when I try</p>\n<pre><code>action1.click(driver.findElement(By.cssSelector(&quot;//div[contains(@id,'bkmgFlights_travelDates_1-date-2022-')]&quot;+esi.m1+&quot;-&quot;+esi.d1)));\n</code></pre>\n<p>Please help me with how we can locate elements based on path + concatenated string and variable and then at last performing click on it.\nThank you.\n<a href=\"https://i.stack.imgur.com/g5CXJ.png\" rel=\"nofollow noreferrer\">enter image description here</a></p>\n"},{"tags":["java","spring","unit-testing","spring-boot","spring-test"],"comments":[{"owner":{"account_id":5488368,"reputation":2458,"user_id":4362486,"display_name":"Bor Laze"},"score":1,"creation_date":1549825055,"post_id":54619839,"comment_id":96032599,"body_markdown":"I&#39;m not sure you need to define additional CentroDeCustoService bean in test configuration. Try to remove it.","body":"I&#39;m not sure you need to define additional CentroDeCustoService bean in test configuration. Try to remove it."},{"owner":{"account_id":1653550,"reputation":11563,"user_id":1523648,"accept_rate":89,"display_name":"oberlies"},"score":0,"creation_date":1549880353,"post_id":54619839,"comment_id":96048786,"body_markdown":"Please provide a code snippet that shows the productive registration of the CentroDeCustoService bean. Also, you should remove one of the tests (the one that is passing?) - because it seems unrelated, and is rather confusing.","body":"Please provide a code snippet that shows the productive registration of the CentroDeCustoService bean. Also, you should remove one of the tests (the one that is passing?) - because it seems unrelated, and is rather confusing."},{"owner":{"account_id":6158931,"reputation":357,"user_id":4801130,"display_name":"Thiago de Melo Fontana"},"score":0,"creation_date":1549930586,"post_id":54619839,"comment_id":96073943,"body_markdown":"Bor Laze and Oberlies. Thank you for your help. I followed Hermann Steidel&#39;s tip and it worked.","body":"Bor Laze and Oberlies. Thank you for your help. I followed Hermann Steidel&#39;s tip and it worked."},{"owner":{"account_id":1653550,"reputation":11563,"user_id":1523648,"accept_rate":89,"display_name":"oberlies"},"score":0,"creation_date":1549963880,"post_id":54619839,"comment_id":96084858,"body_markdown":"This is good, but this site is not only about helping the person that posted the question, but the questions should also help others with the same problem. In order to allow this, questions need to be concise (i.e. include all needed information and no unnecessary information). So please still update your question, as previously requested. Otherwise I and others will down-vote your question.","body":"This is good, but this site is not only about helping the person that posted the question, but the questions should also help others with the same problem. In order to allow this, questions need to be concise (i.e. include all needed information and no unnecessary information). So please still update your question, as previously requested. Otherwise I and others will down-vote your question."},{"owner":{"account_id":6158931,"reputation":357,"user_id":4801130,"display_name":"Thiago de Melo Fontana"},"score":0,"creation_date":1549974724,"post_id":54619839,"comment_id":96091521,"body_markdown":"oberlies I added the implementation of CentroDeCustoService and CentroDeCustoServiceImpl and I got a better idea of the problem. Thanks for the sugestion.","body":"oberlies I added the implementation of CentroDeCustoService and CentroDeCustoServiceImpl and I got a better idea of the problem. Thanks for the sugestion."}],"answers":[{"tags":[],"owner":{"account_id":5313846,"reputation":1084,"user_id":4239311,"accept_rate":56,"display_name":"Prabhakar D"},"down_vote_count":2,"up_vote_count":19,"is_accepted":false,"score":17,"last_activity_date":1549828842,"creation_date":1549828842,"answer_id":54620441,"question_id":54619839,"body_markdown":"You can use Qualifier in addition to ```@MockBean``` in case you have multiple beans of same type.\r\n\r\n\r\n\r\n```\r\n @MockBean\r\n @Qualifier(&quot;centroDeCustoServiceImpl&quot;\r\n private CentroDeCustoService service;\r\n```\r\nRefer MockBean java docs here:\r\n\r\n[https://docs.spring.io/spring-boot/docs/current/api/org/springframework/boot/test/mock/mockito/MockBean.html][1]\r\n\r\n\r\n  [1]: https://docs.spring.io/spring-boot/docs/current/api/org/springframework/boot/test/mock/mockito/MockBean.html\r\n\r\n\r\nAlso as per first comment to your question, you can avoid test configuration in the ```CentroDeCustoServiceImplTeste``` Unit Test. You can use a MockitoJunitRunner\r\n","title":"Test Unit Spring boot: Unable to register mock bean","body":"<p>You can use Qualifier in addition to <code>@MockBean</code> in case you have multiple beans of same type.</p>\n\n<pre><code> @MockBean\n @Qualifier(\"centroDeCustoServiceImpl\"\n private CentroDeCustoService service;\n</code></pre>\n\n<p>Refer MockBean java docs here:</p>\n\n<p><a href=\"https://docs.spring.io/spring-boot/docs/current/api/org/springframework/boot/test/mock/mockito/MockBean.html\" rel=\"noreferrer\">https://docs.spring.io/spring-boot/docs/current/api/org/springframework/boot/test/mock/mockito/MockBean.html</a></p>\n\n<p>Also as per first comment to your question, you can avoid test configuration in the <code>CentroDeCustoServiceImplTeste</code> Unit Test. You can use a MockitoJunitRunner</p>\n"},{"tags":[],"owner":{"account_id":3388916,"reputation":1080,"user_id":7537885,"display_name":"Hermann Steidel"},"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1549891489,"creation_date":1549891489,"answer_id":54631594,"question_id":54619839,"body_markdown":"I agree with others that you don&#39;t need the @TestConfiguration. Instead, just give a hint to your Spring test that you need your service class by using the @CntextConfiguration annotation.\r\n\r\n```\r\n@RunWith(SpringRunner.class)\r\n@ContextConfiguration(classes = {CentroDeCustoServiceImpl.class})\r\npublic class CentroDeCustoServiceImplTeste {\r\n    \r\n    @Autowired\r\n    private CentroDeCustoService centroDeCustoService;\r\n\r\n\r\n```","title":"Test Unit Spring boot: Unable to register mock bean","body":"<p>I agree with others that you don't need the @TestConfiguration. Instead, just give a hint to your Spring test that you need your service class by using the @CntextConfiguration annotation.</p>\n\n<pre><code>@RunWith(SpringRunner.class)\n@ContextConfiguration(classes = {CentroDeCustoServiceImpl.class})\npublic class CentroDeCustoServiceImplTeste {\n\n    @Autowired\n    private CentroDeCustoService centroDeCustoService;\n\n\n</code></pre>\n"},{"tags":[],"owner":{"account_id":14860080,"reputation":934,"user_id":10731216,"display_name":"HereAndBeyond"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1661446556,"creation_date":1661446556,"answer_id":73491200,"question_id":54619839,"body_markdown":"It&#39;s also possible to qualify mocked beans using only `@MockBean` annotation. I tested it with spring-boot 2.7.3.\r\n\r\nHere is an example of declaration in tests:\r\n\r\n    @MockBean(name = &quot;firstBean&quot;)\r\n    SomeBean bean1;\r\n\r\n    @MockBean(name = &quot;secondBean&quot;)\r\n    SomeBean bean2;","title":"Test Unit Spring boot: Unable to register mock bean","body":"<p>It's also possible to qualify mocked beans using only <code>@MockBean</code> annotation. I tested it with spring-boot 2.7.3.</p>\n<p>Here is an example of declaration in tests:</p>\n<pre><code>@MockBean(name = &quot;firstBean&quot;)\nSomeBean bean1;\n\n@MockBean(name = &quot;secondBean&quot;)\nSomeBean bean2;\n</code></pre>\n"}],"owner":{"account_id":6158931,"reputation":357,"user_id":4801130,"display_name":"Thiago de Melo Fontana"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":27584,"favorite_count":0,"down_vote_count":1,"up_vote_count":8,"accepted_answer_id":54631594,"answer_count":3,"score":7,"last_activity_date":1661446556,"creation_date":1549824785,"question_id":54619839,"body_markdown":"I have two classes of tests: 1- for the unit test of the Controller class and 2- for the unit test of the Service class as below:\r\n\r\n**1- Test class controller:**\r\n\r\n    @RunWith(SpringRunner.class)\r\n\t@SpringBootTest\r\n\t@AutoConfigureMockMvc\r\n\tpublic class CentroDeCustoRestControllerTeste {\r\n\r\n\t    @Autowired\r\n\t    private MockMvc mvc;\r\n\r\n\t    @MockBean\r\n\t    private CentroDeCustoService service;\r\n\r\n\t    @Test\r\n\t    @WithMockUser(username = &quot;teste-app@teste.com&quot;, authorities = {&quot;ADMIN&quot;})\r\n\t    public void aoBuscarUmCentroDeCustoRetornarUmJsonComPropriedadeCentroDeCusto() throws Exception {\r\n\t        CentroDeCusto centroDeCusto = new CentroDeCusto();\r\n\t        centroDeCusto.setNome(&quot;Financeiro&quot;);\r\n\r\n\t        given(service.centroDeCusto(1L)).willReturn(Optional.of(centroDeCusto));\r\n\r\n\t        mvc.perform(get(&quot;/centrosdecustos/1&quot;).contentType(MediaType.APPLICATION_JSON))\r\n\t                .andExpect(status().isOk())\r\n\t                .andExpect(jsonPath(&quot;$.centroDeCusto&quot;, org.hamcrest.core.Is.is(centroDeCusto.getCentroDeCusto())));\r\n\t        }\r\n\t     }\r\n\r\n\r\n**2- Test class Service:**\r\n\r\n\t@RunWith(SpringRunner.class)\r\n\tpublic class CentroDeCustoServiceImplTeste {\r\n\r\n\t    @TestConfiguration\r\n\t    static class CentroDeCustoServiceImplConfiguracaoContexto {\r\n\t        @Bean\r\n\t        public CentroDeCustoService centroDeCustoService() {\r\n\t            return new CentroDeCustoServiceImpl();\r\n\t        }\r\n\t    }\r\n\r\n\t    @Autowired\r\n\t    private CentroDeCustoService service;\r\n\r\n\t    @MockBean\r\n\t    private CentroDeCustoRepository repository;\r\n\r\n\t    @Before\r\n\t    public void setup() {\r\n\t        CentroDeCusto centroDeCusto = new CentroDeCusto();\r\n\t        centroDeCusto.setId(1L);\r\n\t        Optional&lt;CentroDeCusto&gt; centroDeCustoOpt = Optional.of(centroDeCusto);\r\n\r\n\t        Mockito.when(repository.findById(1L)).thenReturn(centroDeCustoOpt);\r\n\t    }\r\n\r\n\t    @Test\r\n\t    public void aoBuscarUmCentroDeCustoExistenteRetornarUmCentroDeCustoOptional() {\r\n\t        Optional&lt;CentroDeCusto&gt; resultado = service.centroDeCusto(1L);\r\n\t        CentroDeCusto centroDeCusto = resultado.get();\r\n\r\n\t        Assertions.assertThat(centroDeCusto.getId())\r\n\t                .isEqualTo(1L);\r\n\t    }\r\n\t}\r\n\r\n**Interface CentroDeCustoService** \r\n\r\n    public interface CentroDeCustoService {\r\n\r\n\t    Optional&lt;CentroDeCusto&gt; centroDeCusto(Long id);\r\n\r\n\t    Page&lt;CentroDeCusto&gt; centrosDeCusto(Pageable pagina);\r\n\r\n\t    Optional&lt;CentroDeCusto&gt; buscaCentroDeCustoPeloNumero(String numero);\r\n\r\n\t    List&lt;CentroDeCusto&gt; buscaCentrosDeCustoDeUmaContaGerencial(Long idDaContaGerencial);\r\n\r\n\t    boolean verificaSeCentroDeCustoJahExiste(CentroDeCusto centroDeCusto);\r\n\r\n\t    CentroDeCusto criaCentroDeCusto(CentroDeCusto centroDeCusto);\r\n\r\n\t    CentroDeCusto atualizaCentroDeCusto(CentroDeCusto centroDeCusto);\r\n\r\n\t    boolean delataCentroDeCusto(Long id);\r\n\t}\r\n\r\n\r\n**Class CentroDeCustoServiceImpl** \r\n\r\n\t@Service\r\n\tpublic class CentroDeCustoServiceImpl implements CentroDeCustoService {\r\n\t    @Autowired\r\n\t    private CentroDeCustoRepository repository;\r\n\r\n\t    @Override\r\n\t    public Optional&lt;CentroDeCusto&gt; centroDeCusto(Long id) {\r\n\t        return repository.findById(id);\r\n\t    }\r\n\r\n\t    @Override\r\n\t    public Page&lt;CentroDeCusto&gt; centrosDeCusto(Pageable pagina) {\r\n\t        return repository.departamentosPorDataDeAtualizacao(pagina);\r\n\t    }\r\n\r\n\t    @Override\r\n\t    public Optional&lt;CentroDeCusto&gt; buscaCentroDeCustoPeloNumero(String numero) {\r\n\t        return repository.findByCentroDeCusto(numero);\r\n\t    }\r\n\r\n\t    @Override\r\n\t    public List&lt;CentroDeCusto&gt; buscaCentrosDeCustoDeUmaContaGerencial(Long idDaContaGerencial) {\r\n\t        return repository.findByContasGerenciaisId(idDaContaGerencial);\r\n\t    }\r\n\r\n\t    @Override\r\n\t    public boolean verificaSeCentroDeCustoJahExiste(CentroDeCusto centroDeCusto) {\r\n\t        String numeroDoCentroDeCusto = centroDeCusto.getCentroDeCusto();\r\n\t        Long idDoCentroDeCusto = centroDeCusto.getId();\r\n\t        Optional&lt;CentroDeCusto&gt; centroDeCustoOpt = repository.findByCentroDeCustoAndIdNotIn(numeroDoCentroDeCusto, idDoCentroDeCusto);\r\n\r\n\t        if (centroDeCustoOpt.isPresent())\r\n\t            return true;\r\n\r\n\t        return false;\r\n\t    }\r\n\r\n\t    @Override\r\n\t    public CentroDeCusto criaCentroDeCusto(CentroDeCusto centroDeCusto) {\r\n\t        return repository.save(centroDeCusto);\r\n\t    }\r\n\r\n\t    @Override\r\n\t    public CentroDeCusto atualizaCentroDeCusto(CentroDeCusto centroDeCusto) {\r\n\t        return repository.save(centroDeCusto);\r\n\t    }\r\n\r\n\t    @Override\r\n\t    public boolean delataCentroDeCusto(Long id) {\r\n\t        Optional&lt;CentroDeCusto&gt; centroDeCustoOpt = centroDeCusto(id);\r\n\t        if (centroDeCustoOpt.isPresent()) {\r\n\t            repository.delete(centroDeCustoOpt.get());\r\n\t            return true;\r\n\t        }\r\n\r\n\t        return false;\r\n\t    }\r\n\t}\r\n\r\nWhen I run the controller it seems that the test created for the Service class is impacting because both tests call the CentroDeCustoService object. How can I correctly configure test classes so that there are no more conflicts?\r\n\r\nError: **Unable to register mock bean br.com.teste.reembolso.centrocusto.CentroDeCustoService expected a single matching bean to replace but found [centroDeCustoService, centroDeCustoServiceImpl]**:\r\n\r\n\tjava.lang.IllegalStateException: Failed to load ApplicationContext\r\n\r\n\t\tat org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:125)\r\n\t\tat org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:108)\r\n\t\tat org.springframework.test.context.web.ServletTestExecutionListener.setUpRequestContextIfNecessary(ServletTestExecutionListener.java:190)\r\n\t\tat org.springframework.test.context.web.ServletTestExecutionListener.prepareTestInstance(ServletTestExecutionListener.java:132)\r\n\t\tat org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:246)\r\n\t\tat org.springframework.test.context.junit4.SpringJUnit4ClassRunner.createTest(SpringJUnit4ClassRunner.java:227)\r\n\t\tat org.springframework.test.context.junit4.SpringJUnit4ClassRunner$1.runReflectiveCall(SpringJUnit4ClassRunner.java:289)\r\n\t\tat org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)\r\n\t\tat org.springframework.test.context.junit4.SpringJUnit4ClassRunner.methodBlock(SpringJUnit4ClassRunner.java:291)\r\n\t\tat org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:246)\r\n\t\tat org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:97)\r\n\t\tat org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)\r\n\t\tat org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)\r\n\t\tat org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)\r\n\t\tat org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)\r\n\t\tat org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)\r\n\t\tat org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61)\r\n\t\tat org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:70)\r\n\t\tat org.junit.runners.ParentRunner.run(ParentRunner.java:363)\r\n\t\tat org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:190)\r\n\t\tat org.junit.runner.JUnitCore.run(JUnitCore.java:137)\r\n\t\tat com.intellij.junit4.JUnit4IdeaTestRunner.startRunnerWithArgs(JUnit4IdeaTestRunner.java:68)\r\n\t\tat com.intellij.rt.execution.junit.IdeaTestRunner$Repeater.startRunnerWithArgs(IdeaTestRunner.java:47)\r\n\t\tat com.intellij.rt.execution.junit.JUnitStarter.prepareStreamsAndStart(JUnitStarter.java:242)\r\n\t\tat com.intellij.rt.execution.junit.JUnitStarter.main(JUnitStarter.java:70)\r\n\tCaused by: java.lang.IllegalStateException: Unable to register mock bean br.com.teste.reembolso.centrocusto.CentroDeCustoService expected a single matching bean to replace but found [centroDeCustoService, centroDeCustoServiceImpl]\r\n\t\tat org.springframework.boot.test.mock.mockito.MockitoPostProcessor.getBeanName(MockitoPostProcessor.java:239)\r\n\t\tat org.springframework.boot.test.mock.mockito.MockitoPostProcessor.registerMock(MockitoPostProcessor.java:184)\r\n\t\tat org.springframework.boot.test.mock.mockito.MockitoPostProcessor.register(MockitoPostProcessor.java:174)\r\n\t\tat org.springframework.boot.test.mock.mockito.MockitoPostProcessor.postProcessBeanFactory(MockitoPostProcessor.java:144)\r\n\t\tat org.springframework.boot.test.mock.mockito.MockitoPostProcessor.postProcessBeanFactory(MockitoPostProcessor.java:131)\r\n\t\tat org.springframework.context.support.PostProcessorRegistrationDelegate.invokeBeanFactoryPostProcessors(PostProcessorRegistrationDelegate.java:282)\r\n\t\tat org.springframework.context.support.PostProcessorRegistrationDelegate.invokeBeanFactoryPostProcessors(PostProcessorRegistrationDelegate.java:170)\r\n\t\tat org.springframework.context.support.AbstractApplicationContext.invokeBeanFactoryPostProcessors(AbstractApplicationContext.java:694)\r\n\t\tat org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:532)\r\n\t\tat org.springframework.boot.SpringApplication.refresh(SpringApplication.java:762)\r\n\t\tat org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:398)\r\n\t\tat org.springframework.boot.SpringApplication.run(SpringApplication.java:330)\r\n\t\tat org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:139)\r\n\t\tat org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:99)\r\n\t\tat org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:117)\r\n\t\t... 24 more\r\n\r\n\r\nIt looks like it&#39;s conflicting but I do not know how to solve it. can anybody help me?","title":"Test Unit Spring boot: Unable to register mock bean","body":"<p>I have two classes of tests: 1- for the unit test of the Controller class and 2- for the unit test of the Service class as below:</p>\n\n<p><strong>1- Test class controller:</strong></p>\n\n<pre><code>@RunWith(SpringRunner.class)\n@SpringBootTest\n@AutoConfigureMockMvc\npublic class CentroDeCustoRestControllerTeste {\n\n    @Autowired\n    private MockMvc mvc;\n\n    @MockBean\n    private CentroDeCustoService service;\n\n    @Test\n    @WithMockUser(username = \"teste-app@teste.com\", authorities = {\"ADMIN\"})\n    public void aoBuscarUmCentroDeCustoRetornarUmJsonComPropriedadeCentroDeCusto() throws Exception {\n        CentroDeCusto centroDeCusto = new CentroDeCusto();\n        centroDeCusto.setNome(\"Financeiro\");\n\n        given(service.centroDeCusto(1L)).willReturn(Optional.of(centroDeCusto));\n\n        mvc.perform(get(\"/centrosdecustos/1\").contentType(MediaType.APPLICATION_JSON))\n                .andExpect(status().isOk())\n                .andExpect(jsonPath(\"$.centroDeCusto\", org.hamcrest.core.Is.is(centroDeCusto.getCentroDeCusto())));\n        }\n     }\n</code></pre>\n\n<p><strong>2- Test class Service:</strong></p>\n\n<pre><code>@RunWith(SpringRunner.class)\npublic class CentroDeCustoServiceImplTeste {\n\n    @TestConfiguration\n    static class CentroDeCustoServiceImplConfiguracaoContexto {\n        @Bean\n        public CentroDeCustoService centroDeCustoService() {\n            return new CentroDeCustoServiceImpl();\n        }\n    }\n\n    @Autowired\n    private CentroDeCustoService service;\n\n    @MockBean\n    private CentroDeCustoRepository repository;\n\n    @Before\n    public void setup() {\n        CentroDeCusto centroDeCusto = new CentroDeCusto();\n        centroDeCusto.setId(1L);\n        Optional&lt;CentroDeCusto&gt; centroDeCustoOpt = Optional.of(centroDeCusto);\n\n        Mockito.when(repository.findById(1L)).thenReturn(centroDeCustoOpt);\n    }\n\n    @Test\n    public void aoBuscarUmCentroDeCustoExistenteRetornarUmCentroDeCustoOptional() {\n        Optional&lt;CentroDeCusto&gt; resultado = service.centroDeCusto(1L);\n        CentroDeCusto centroDeCusto = resultado.get();\n\n        Assertions.assertThat(centroDeCusto.getId())\n                .isEqualTo(1L);\n    }\n}\n</code></pre>\n\n<p><strong>Interface CentroDeCustoService</strong> </p>\n\n<pre><code>public interface CentroDeCustoService {\n\n    Optional&lt;CentroDeCusto&gt; centroDeCusto(Long id);\n\n    Page&lt;CentroDeCusto&gt; centrosDeCusto(Pageable pagina);\n\n    Optional&lt;CentroDeCusto&gt; buscaCentroDeCustoPeloNumero(String numero);\n\n    List&lt;CentroDeCusto&gt; buscaCentrosDeCustoDeUmaContaGerencial(Long idDaContaGerencial);\n\n    boolean verificaSeCentroDeCustoJahExiste(CentroDeCusto centroDeCusto);\n\n    CentroDeCusto criaCentroDeCusto(CentroDeCusto centroDeCusto);\n\n    CentroDeCusto atualizaCentroDeCusto(CentroDeCusto centroDeCusto);\n\n    boolean delataCentroDeCusto(Long id);\n}\n</code></pre>\n\n<p><strong>Class CentroDeCustoServiceImpl</strong> </p>\n\n<pre><code>@Service\npublic class CentroDeCustoServiceImpl implements CentroDeCustoService {\n    @Autowired\n    private CentroDeCustoRepository repository;\n\n    @Override\n    public Optional&lt;CentroDeCusto&gt; centroDeCusto(Long id) {\n        return repository.findById(id);\n    }\n\n    @Override\n    public Page&lt;CentroDeCusto&gt; centrosDeCusto(Pageable pagina) {\n        return repository.departamentosPorDataDeAtualizacao(pagina);\n    }\n\n    @Override\n    public Optional&lt;CentroDeCusto&gt; buscaCentroDeCustoPeloNumero(String numero) {\n        return repository.findByCentroDeCusto(numero);\n    }\n\n    @Override\n    public List&lt;CentroDeCusto&gt; buscaCentrosDeCustoDeUmaContaGerencial(Long idDaContaGerencial) {\n        return repository.findByContasGerenciaisId(idDaContaGerencial);\n    }\n\n    @Override\n    public boolean verificaSeCentroDeCustoJahExiste(CentroDeCusto centroDeCusto) {\n        String numeroDoCentroDeCusto = centroDeCusto.getCentroDeCusto();\n        Long idDoCentroDeCusto = centroDeCusto.getId();\n        Optional&lt;CentroDeCusto&gt; centroDeCustoOpt = repository.findByCentroDeCustoAndIdNotIn(numeroDoCentroDeCusto, idDoCentroDeCusto);\n\n        if (centroDeCustoOpt.isPresent())\n            return true;\n\n        return false;\n    }\n\n    @Override\n    public CentroDeCusto criaCentroDeCusto(CentroDeCusto centroDeCusto) {\n        return repository.save(centroDeCusto);\n    }\n\n    @Override\n    public CentroDeCusto atualizaCentroDeCusto(CentroDeCusto centroDeCusto) {\n        return repository.save(centroDeCusto);\n    }\n\n    @Override\n    public boolean delataCentroDeCusto(Long id) {\n        Optional&lt;CentroDeCusto&gt; centroDeCustoOpt = centroDeCusto(id);\n        if (centroDeCustoOpt.isPresent()) {\n            repository.delete(centroDeCustoOpt.get());\n            return true;\n        }\n\n        return false;\n    }\n}\n</code></pre>\n\n<p>When I run the controller it seems that the test created for the Service class is impacting because both tests call the CentroDeCustoService object. How can I correctly configure test classes so that there are no more conflicts?</p>\n\n<p>Error: <strong>Unable to register mock bean br.com.teste.reembolso.centrocusto.CentroDeCustoService expected a single matching bean to replace but found [centroDeCustoService, centroDeCustoServiceImpl]</strong>:</p>\n\n<pre><code>java.lang.IllegalStateException: Failed to load ApplicationContext\n\n    at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:125)\n    at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:108)\n    at org.springframework.test.context.web.ServletTestExecutionListener.setUpRequestContextIfNecessary(ServletTestExecutionListener.java:190)\n    at org.springframework.test.context.web.ServletTestExecutionListener.prepareTestInstance(ServletTestExecutionListener.java:132)\n    at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:246)\n    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.createTest(SpringJUnit4ClassRunner.java:227)\n    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner$1.runReflectiveCall(SpringJUnit4ClassRunner.java:289)\n    at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)\n    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.methodBlock(SpringJUnit4ClassRunner.java:291)\n    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:246)\n    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:97)\n    at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)\n    at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)\n    at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)\n    at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)\n    at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)\n    at org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61)\n    at org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:70)\n    at org.junit.runners.ParentRunner.run(ParentRunner.java:363)\n    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:190)\n    at org.junit.runner.JUnitCore.run(JUnitCore.java:137)\n    at com.intellij.junit4.JUnit4IdeaTestRunner.startRunnerWithArgs(JUnit4IdeaTestRunner.java:68)\n    at com.intellij.rt.execution.junit.IdeaTestRunner$Repeater.startRunnerWithArgs(IdeaTestRunner.java:47)\n    at com.intellij.rt.execution.junit.JUnitStarter.prepareStreamsAndStart(JUnitStarter.java:242)\n    at com.intellij.rt.execution.junit.JUnitStarter.main(JUnitStarter.java:70)\nCaused by: java.lang.IllegalStateException: Unable to register mock bean br.com.teste.reembolso.centrocusto.CentroDeCustoService expected a single matching bean to replace but found [centroDeCustoService, centroDeCustoServiceImpl]\n    at org.springframework.boot.test.mock.mockito.MockitoPostProcessor.getBeanName(MockitoPostProcessor.java:239)\n    at org.springframework.boot.test.mock.mockito.MockitoPostProcessor.registerMock(MockitoPostProcessor.java:184)\n    at org.springframework.boot.test.mock.mockito.MockitoPostProcessor.register(MockitoPostProcessor.java:174)\n    at org.springframework.boot.test.mock.mockito.MockitoPostProcessor.postProcessBeanFactory(MockitoPostProcessor.java:144)\n    at org.springframework.boot.test.mock.mockito.MockitoPostProcessor.postProcessBeanFactory(MockitoPostProcessor.java:131)\n    at org.springframework.context.support.PostProcessorRegistrationDelegate.invokeBeanFactoryPostProcessors(PostProcessorRegistrationDelegate.java:282)\n    at org.springframework.context.support.PostProcessorRegistrationDelegate.invokeBeanFactoryPostProcessors(PostProcessorRegistrationDelegate.java:170)\n    at org.springframework.context.support.AbstractApplicationContext.invokeBeanFactoryPostProcessors(AbstractApplicationContext.java:694)\n    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:532)\n    at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:762)\n    at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:398)\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:330)\n    at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:139)\n    at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:99)\n    at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:117)\n    ... 24 more\n</code></pre>\n\n<p>It looks like it's conflicting but I do not know how to solve it. can anybody help me?</p>\n"},{"tags":["java","collections","treemap"],"comments":[{"owner":{"account_id":2686035,"reputation":3011,"user_id":2320445,"accept_rate":25,"display_name":"Milad Qasemi"},"score":1,"creation_date":1661386717,"post_id":73480631,"comment_id":129762659,"body_markdown":"why not go through all of them and count the repeated ones?","body":"why not go through all of them and count the repeated ones?"},{"owner":{"account_id":6606677,"reputation":1024,"user_id":5103317,"display_name":"Old Dog Programmer"},"score":0,"creation_date":1661387933,"post_id":73480631,"comment_id":129762805,"body_markdown":"You want to count the number of times a  _value_ value was added to the map? So, &quot;sausage&quot; would be there 3 times, with 3 different key values?","body":"You want to count the number of times a  <i>value</i> value was added to the map? So, &quot;sausage&quot; would be there 3 times, with 3 different key values?"},{"owner":{"account_id":6606677,"reputation":1024,"user_id":5103317,"display_name":"Old Dog Programmer"},"score":0,"creation_date":1661388034,"post_id":73480631,"comment_id":129762819,"body_markdown":"Maybe you should tell us more about what you are trying to accomplish.","body":"Maybe you should tell us more about what you are trying to accomplish."},{"owner":{"account_id":25481583,"reputation":33,"user_id":19277826,"display_name":"FlyingRacoon51"},"score":0,"creation_date":1661390317,"post_id":73480631,"comment_id":129763111,"body_markdown":"yeap, exactly this, still trying to understand what you&#39;ve all meant","body":"yeap, exactly this, still trying to understand what you&#39;ve all meant"}],"answers":[{"tags":[],"owner":{"account_id":23959668,"reputation":26587,"user_id":17949945,"display_name":"Alexander Ivanchenko"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1661389349,"creation_date":1661388450,"answer_id":73480776,"question_id":73480631,"body_markdown":"&gt; I created a TreeMap with products, and i want to count the number of times they repeat themselves\r\n\r\nProbably a different type of `Map` with *keys* representing *items* and *values* representing the corresponding *count* would be more handy. Something like:\r\n\r\n```\r\nNavigableMap&lt;String, Integer&gt; countByItem\r\n```\r\n\r\n***Note:*** in order to access methods of the `TreeMap` like `ceilingKey()`, `floorKey()`, `higherEntry()`, `lowerEntry()`, etc. which are not defined in the `Map` interface you need to use [`NavigableMap`](https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/NavigableMap.html) as a type.\r\n\r\nAnd it might make sense to make the *item* to be a *custom object*, instead of being a `String`. That would guard you from making typo, and it provides a possibility to gives useful behavior to `Item`\r\n\r\n    public class Item {\r\n        private int id;\r\n        private String name;\r\n        \r\n        // constructor, getters, equals/hashCode, ect.\r\n    }\r\n\r\nThat&#39;s how map of items can be updated using Java 8 method [`merge()`](https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/Map.html#merge(K,V,java.util.function.BiFunction)), which expects a *key*, a *value* and a *function* responsible for merging the *old value* and the *new one*:\r\n```\r\nNavigableMap&lt;Item, Integer&gt; countByItem = new TreeMap&lt;&gt;(Comparator.comparingInt(Item::getId));\r\n        \r\ncountByItem.merge(new Item(1, &quot;sausage&quot;),1, Integer::sum);\r\ncountByItem.merge(new Item(1, &quot;sausage&quot;),1, Integer::sum);\r\ncountByItem.merge(new Item(2, &quot;soup&quot;),1, Integer::sum);\r\n```\r\nIf you don&#39;t feel very comfortable with Java 8 functions, instead of `merge()` you can use combination of methods `put()` &amp; [`getOrDefault()`](https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/Map.html#getOrDefault(java.lang.Object,V)):\r\n```\r\nItem sausage = new Item(1, &quot;sausage&quot;);\r\n\r\ncountByItem.put(sausage, countByItem.getOrDefault(sausage, 0) + 1);\r\n```","title":"Have to display the number of times an element has been added in my map JAVA","body":"<blockquote>\n<p>I created a TreeMap with products, and i want to count the number of times they repeat themselves</p>\n</blockquote>\n<p>Probably a different type of <code>Map</code> with <em>keys</em> representing <em>items</em> and <em>values</em> representing the corresponding <em>count</em> would be more handy. Something like:</p>\n<pre><code>NavigableMap&lt;String, Integer&gt; countByItem\n</code></pre>\n<p><em><strong>Note:</strong></em> in order to access methods of the <code>TreeMap</code> like <code>ceilingKey()</code>, <code>floorKey()</code>, <code>higherEntry()</code>, <code>lowerEntry()</code>, etc. which are not defined in the <code>Map</code> interface you need to use <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/NavigableMap.html\" rel=\"nofollow noreferrer\"><code>NavigableMap</code></a> as a type.</p>\n<p>And it might make sense to make the <em>item</em> to be a <em>custom object</em>, instead of being a <code>String</code>. That would guard you from making typo, and it provides a possibility to gives useful behavior to <code>Item</code></p>\n<pre><code>public class Item {\n    private int id;\n    private String name;\n    \n    // constructor, getters, equals/hashCode, ect.\n}\n</code></pre>\n<p>That's how map of items can be updated using Java 8 method <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/Map.html#merge(K,V,java.util.function.BiFunction)\" rel=\"nofollow noreferrer\"><code>merge()</code></a>, which expects a <em>key</em>, a <em>value</em> and a <em>function</em> responsible for merging the <em>old value</em> and the <em>new one</em>:</p>\n<pre><code>NavigableMap&lt;Item, Integer&gt; countByItem = new TreeMap&lt;&gt;(Comparator.comparingInt(Item::getId));\n        \ncountByItem.merge(new Item(1, &quot;sausage&quot;),1, Integer::sum);\ncountByItem.merge(new Item(1, &quot;sausage&quot;),1, Integer::sum);\ncountByItem.merge(new Item(2, &quot;soup&quot;),1, Integer::sum);\n</code></pre>\n<p>If you don't feel very comfortable with Java 8 functions, instead of <code>merge()</code> you can use combination of methods <code>put()</code> &amp; <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/Map.html#getOrDefault(java.lang.Object,V)\" rel=\"nofollow noreferrer\"><code>getOrDefault()</code></a>:</p>\n<pre><code>Item sausage = new Item(1, &quot;sausage&quot;);\n\ncountByItem.put(sausage, countByItem.getOrDefault(sausage, 0) + 1);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4535404,"reputation":301,"user_id":3684747,"display_name":"user3684747"},"down_vote_count":0,"up_vote_count":9,"is_accepted":false,"score":9,"last_activity_date":1661436332,"creation_date":1661389055,"answer_id":73480825,"question_id":73480631,"body_markdown":"Maybe not the best approach, but without modifying what you already have, you could use another map to store the products as keys and the quantity as the value for those keys:\r\n\r\n    Map&lt;Integer, String&gt; result = shoppingCart();\r\n    Map&lt;String, Integer&gt; productQuantities = new HashMap&lt;&gt;();\r\n    \r\n    result.values().forEach(value -&gt; \r\n        productQuantities.put(value,productQuantities.getOrDefault(value, 0) + 1));\r\n\r\nTo print the resulting map:\r\n\r\n    productQuantities.forEach((key, value) -&gt; System.out.println(key + &quot;:&quot; + value));","title":"Have to display the number of times an element has been added in my map JAVA","body":"<p>Maybe not the best approach, but without modifying what you already have, you could use another map to store the products as keys and the quantity as the value for those keys:</p>\n<pre><code>Map&lt;Integer, String&gt; result = shoppingCart();\nMap&lt;String, Integer&gt; productQuantities = new HashMap&lt;&gt;();\n\nresult.values().forEach(value -&gt; \n    productQuantities.put(value,productQuantities.getOrDefault(value, 0) + 1));\n</code></pre>\n<p>To print the resulting map:</p>\n<pre><code>productQuantities.forEach((key, value) -&gt; System.out.println(key + &quot;:&quot; + value));\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6606677,"reputation":1024,"user_id":5103317,"display_name":"Old Dog Programmer"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1661446405,"creation_date":1661427819,"answer_id":73486866,"question_id":73480631,"body_markdown":"I can only guess at your goal. In your `Map &lt;Integer, String&gt;`, what does the `Integer` represent? Product number? Quantity? Sequence number? Something else?\r\n\r\nIf the `Integer` represents quantity, you have it backwards. It should be `Map &lt;String, Integer&gt;`. In a `Map&lt;X,Y&gt;`, the `X` represents the key. A `Map` allows fast lookup by the key. The `Y` is the value -- the information you want to find for a particular key, if the key is in the Map. \r\n\r\nFor example, if you want to add &quot;sausage&quot;, you want to check if it is in the Map. If it isn&#39;t, put it into the Map with quantity 1. If it is, retrieve it and update the quantity.\r\n\r\nIf the `Integer` represents a sequence number (1st item, 2nd item, 3rd item, ...), you don&#39;t need a `Map`. Consider using an array or a data structure that preserves order, such as a `List`. \r\n\r\nHowever, using an array or `List` still leaves you with the problem of how find how many of each item are in the list, when duplicates are allowed, as they are in your problem. To solve that, consider a `Map&lt;String, Integer&gt;` where the `Integer` (map value) is the quantity, and the `String` (map key) is the product name.\r\n\r\nIf I were doing this, I&#39;d create classes to allow me to glue together related information. Here is part of a hypothetical example, which might be more realistic than you need: \r\n\r\n    public class Product {\r\n        private int upc;  // product code, often represented with bar code\r\n        private Decimal price; \r\n        private String description;\r\n        private String shortDescription;\r\n        private ProductClass prodClass; // department, taxable, etc.\r\n        // etc. -- add needed fields, or remove irrelevant \r\n        // constructors, getters, setters,\r\n\r\nOverride `.equals` and `.hashcode` in `Product`. You use the UPC for those.\r\n\r\nIf you use `implements Comparable&lt;Product&gt;`, you have the possibility of using binary search, or a search tree. \r\n\r\n    public class Receipt {\r\n        private Decimal total;\r\n        private Decimal taxableTotal;\r\n        private Map &lt;Product,Integer&gt; shoppingCart; // Product, Quantity \r\n        // etc.\r\n\r\nWhen each item is scanned, you can lookup the Product in the Map, and add it if not found, or update the quantity if found, as in the previous answers. ","title":"Have to display the number of times an element has been added in my map JAVA","body":"<p>I can only guess at your goal. In your <code>Map &lt;Integer, String&gt;</code>, what does the <code>Integer</code> represent? Product number? Quantity? Sequence number? Something else?</p>\n<p>If the <code>Integer</code> represents quantity, you have it backwards. It should be <code>Map &lt;String, Integer&gt;</code>. In a <code>Map&lt;X,Y&gt;</code>, the <code>X</code> represents the key. A <code>Map</code> allows fast lookup by the key. The <code>Y</code> is the value -- the information you want to find for a particular key, if the key is in the Map.</p>\n<p>For example, if you want to add &quot;sausage&quot;, you want to check if it is in the Map. If it isn't, put it into the Map with quantity 1. If it is, retrieve it and update the quantity.</p>\n<p>If the <code>Integer</code> represents a sequence number (1st item, 2nd item, 3rd item, ...), you don't need a <code>Map</code>. Consider using an array or a data structure that preserves order, such as a <code>List</code>.</p>\n<p>However, using an array or <code>List</code> still leaves you with the problem of how find how many of each item are in the list, when duplicates are allowed, as they are in your problem. To solve that, consider a <code>Map&lt;String, Integer&gt;</code> where the <code>Integer</code> (map value) is the quantity, and the <code>String</code> (map key) is the product name.</p>\n<p>If I were doing this, I'd create classes to allow me to glue together related information. Here is part of a hypothetical example, which might be more realistic than you need:</p>\n<pre><code>public class Product {\n    private int upc;  // product code, often represented with bar code\n    private Decimal price; \n    private String description;\n    private String shortDescription;\n    private ProductClass prodClass; // department, taxable, etc.\n    // etc. -- add needed fields, or remove irrelevant \n    // constructors, getters, setters,\n</code></pre>\n<p>Override <code>.equals</code> and <code>.hashcode</code> in <code>Product</code>. You use the UPC for those.</p>\n<p>If you use <code>implements Comparable&lt;Product&gt;</code>, you have the possibility of using binary search, or a search tree.</p>\n<pre><code>public class Receipt {\n    private Decimal total;\n    private Decimal taxableTotal;\n    private Map &lt;Product,Integer&gt; shoppingCart; // Product, Quantity \n    // etc.\n</code></pre>\n<p>When each item is scanned, you can lookup the Product in the Map, and add it if not found, or update the quantity if found, as in the previous answers.</p>\n"}],"owner":{"account_id":25481583,"reputation":33,"user_id":19277826,"display_name":"FlyingRacoon51"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":276,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":3,"score":1,"last_activity_date":1661446405,"creation_date":1661386332,"question_id":73480631,"body_markdown":"I&#39;ve created a `TreeMap` with products.\r\n\r\nAnd I want to count the number of times they repeat themselves, but have no clue what to code. Any hints? (I expect **no** code, just suggestions)\r\n\r\n    private static Map&lt;Integer, String&gt; shoppingCart() {\r\n        Map&lt;Integer, String&gt; result = new TreeMap&lt;&gt;();\r\n        result.put(1, &quot;sausage&quot;);\r\n        result.put(2, &quot;sausage&quot;);\r\n        result.put(3, &quot;soup&quot;);\r\n        result.put(4, &quot;egg&quot;);\r\n        result.put(5, &quot;egg&quot;);\r\n        result.put(6, &quot;tomato&quot;);\r\n        result.put(7, &quot;sausage&quot;);\r\n        \r\n        return result;\r\n    }\r\n     \r\nI was thinking about adding a counting variable, but still it doesn&#39;t fix the repeating problem.","title":"Have to display the number of times an element has been added in my map JAVA","body":"<p>I've created a <code>TreeMap</code> with products.</p>\n<p>And I want to count the number of times they repeat themselves, but have no clue what to code. Any hints? (I expect <strong>no</strong> code, just suggestions)</p>\n<pre><code>private static Map&lt;Integer, String&gt; shoppingCart() {\n    Map&lt;Integer, String&gt; result = new TreeMap&lt;&gt;();\n    result.put(1, &quot;sausage&quot;);\n    result.put(2, &quot;sausage&quot;);\n    result.put(3, &quot;soup&quot;);\n    result.put(4, &quot;egg&quot;);\n    result.put(5, &quot;egg&quot;);\n    result.put(6, &quot;tomato&quot;);\n    result.put(7, &quot;sausage&quot;);\n    \n    return result;\n}\n \n</code></pre>\n<p>I was thinking about adding a counting variable, but still it doesn't fix the repeating problem.</p>\n"},{"tags":["java","recursion"],"comments":[{"owner":{"account_id":339859,"reputation":13331,"user_id":669576,"accept_rate":85,"display_name":"001"},"score":0,"creation_date":1661359704,"post_id":73476856,"comment_id":129755781,"body_markdown":"Is recursion a requirement? An iterative solution seems more logical.","body":"Is recursion a requirement? An iterative solution seems more logical."},{"owner":{"account_id":23950049,"reputation":13,"user_id":17941791,"display_name":"Mark"},"score":0,"creation_date":1661360144,"post_id":73476856,"comment_id":129755920,"body_markdown":"The iterative solution is not suitable in terms of execution time, so I thought why not try it with recursion.","body":"The iterative solution is not suitable in terms of execution time, so I thought why not try it with recursion."},{"owner":{"account_id":339859,"reputation":13331,"user_id":669576,"accept_rate":85,"display_name":"001"},"score":3,"creation_date":1661360828,"post_id":73476856,"comment_id":129756190,"body_markdown":"As far as I can tell, your recursive solution is very similar to an iterative solution but with the overhead of recursion.","body":"As far as I can tell, your recursive solution is very similar to an iterative solution but with the overhead of recursion."},{"owner":{"account_id":339859,"reputation":13331,"user_id":669576,"accept_rate":85,"display_name":"001"},"score":0,"creation_date":1661364452,"post_id":73476856,"comment_id":129757372,"body_markdown":"I would create a `SortedList` class that automatically sorts numbers added to it. Then as you go through the array, add the array items to the list and use that list to count how many less than.","body":"I would create a <code>SortedList</code> class that automatically sorts numbers added to it. Then as you go through the array, add the array items to the list and use that list to count how many less than."}],"answers":[{"tags":[],"owner":{"account_id":2488885,"reputation":18917,"user_id":2166798,"accept_rate":50,"display_name":"pjs"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1661445958,"creation_date":1661388136,"answer_id":73480758,"question_id":73476856,"body_markdown":"I agree with comments questioning whether recursion is your best solution here, but if it&#39;s a requirement you can avoid stack overflow by chopping subproblems in half rather than whittling them down one-by-one. The logic is that the count in the remaining data will be the sum of the count in the first half plus the count in the second half of the remaining data. This reduces the stack growth from O(n) to O(log n).\r\n\r\nI originally did a Python implementation due to not having a Java compiler installed (plus my Java skills being rusty), but found an online java compiler at tutorialspoint.com. Here&#39;s an implementation of the divide and conquer logic described in the previous paragraph:\r\n\r\n``` lang-java\r\npublic class Smaller {\r\n    public static int[] smaller(int[] unsorted) {\r\n        int[] result = new int[unsorted.length];\r\n\r\n        for (int i = 0; i &lt; unsorted.length; i++) {\r\n            result[i] = countSmaller(unsorted[i], i+1, unsorted.length-1, unsorted);\r\n        }\r\n        return result;\r\n    }\r\n\r\n    private static int countSmaller(int threshold, int start, int end, int[] unsorted) {\r\n        if (start &lt; end) {\r\n            int mid = start + (end - start) / 2;\r\n            int count = countSmaller(threshold, start, mid, unsorted);\r\n            count += countSmaller(threshold, mid+1, end, unsorted);\r\n            return count;\r\n        } else if ((start == end) &amp;&amp; (unsorted[start] &lt; threshold)) {\r\n            return 1;\r\n        }\r\n        return 0;\r\n    }\r\n}\r\n```\r\nWith O(log n) stack growth, this should be able to handle ridonculously big arrays. Since the algorithm as a whole is O(n&lt;sup&gt;2&lt;/sup&gt;), run time will limit you long before recursive stack limitations will.\r\n\r\n### Original Python Implementation ###\r\nSorry for showing this in Python, but I don&#39;t have a Java compiler and I didn&#39;t want to risk non-functioning code. The following does the trick and should be easy for you to translate:\r\n\r\n``` lang-python\r\ndef smaller(unsorted):\r\n\tresult = []\r\n\tfor i in range(len(unsorted)):\r\n\t\tresult.append(countSmaller(unsorted[i], i+1, len(unsorted)-1, unsorted))\r\n\treturn result\r\n\r\ndef countSmaller(threshold, start, end, unsorted):\r\n\tif start &lt; end:\r\n\t\tmid = start + (end - start) // 2\t# double slash is integer division\r\n\t\tcount = countSmaller(threshold, start, mid, unsorted)\r\n\t\tcount += countSmaller(threshold, mid+1, end, unsorted)\r\n\t\treturn count\r\n\telif start == end and unsorted[start] &lt; threshold:\r\n\t\treturn 1\r\n\treturn 0\r\n\r\ndata = [10, 9, 8, 11, 7, 6]\r\nprint(smaller(data))\t# [4, 3, 2, 2, 1, 0]\r\n\r\nprint(smaller([]))\t\t# []\r\n\r\nprint(smaller([42]))\t# [0]\r\n```\r\n","title":"Recursion stackoverflow Java","body":"<p>I agree with comments questioning whether recursion is your best solution here, but if it's a requirement you can avoid stack overflow by chopping subproblems in half rather than whittling them down one-by-one. The logic is that the count in the remaining data will be the sum of the count in the first half plus the count in the second half of the remaining data. This reduces the stack growth from O(n) to O(log n).</p>\n<p>I originally did a Python implementation due to not having a Java compiler installed (plus my Java skills being rusty), but found an online java compiler at tutorialspoint.com. Here's an implementation of the divide and conquer logic described in the previous paragraph:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class Smaller {\n    public static int[] smaller(int[] unsorted) {\n        int[] result = new int[unsorted.length];\n\n        for (int i = 0; i &lt; unsorted.length; i++) {\n            result[i] = countSmaller(unsorted[i], i+1, unsorted.length-1, unsorted);\n        }\n        return result;\n    }\n\n    private static int countSmaller(int threshold, int start, int end, int[] unsorted) {\n        if (start &lt; end) {\n            int mid = start + (end - start) / 2;\n            int count = countSmaller(threshold, start, mid, unsorted);\n            count += countSmaller(threshold, mid+1, end, unsorted);\n            return count;\n        } else if ((start == end) &amp;&amp; (unsorted[start] &lt; threshold)) {\n            return 1;\n        }\n        return 0;\n    }\n}\n</code></pre>\n<p>With O(log n) stack growth, this should be able to handle ridonculously big arrays. Since the algorithm as a whole is O(n<sup>2</sup>), run time will limit you long before recursive stack limitations will.</p>\n<h3>Original Python Implementation</h3>\n<p>Sorry for showing this in Python, but I don't have a Java compiler and I didn't want to risk non-functioning code. The following does the trick and should be easy for you to translate:</p>\n<pre class=\"lang-python prettyprint-override\"><code>def smaller(unsorted):\n    result = []\n    for i in range(len(unsorted)):\n        result.append(countSmaller(unsorted[i], i+1, len(unsorted)-1, unsorted))\n    return result\n\ndef countSmaller(threshold, start, end, unsorted):\n    if start &lt; end:\n        mid = start + (end - start) // 2    # double slash is integer division\n        count = countSmaller(threshold, start, mid, unsorted)\n        count += countSmaller(threshold, mid+1, end, unsorted)\n        return count\n    elif start == end and unsorted[start] &lt; threshold:\n        return 1\n    return 0\n\ndata = [10, 9, 8, 11, 7, 6]\nprint(smaller(data))    # [4, 3, 2, 2, 1, 0]\n\nprint(smaller([]))      # []\n\nprint(smaller([42]))    # [0]\n</code></pre>\n"}],"owner":{"account_id":23950049,"reputation":13,"user_id":17941791,"display_name":"Mark"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":114,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1661445958,"creation_date":1661359422,"question_id":73476856,"body_markdown":"I need to count the number of numbers on the right that are less than the number arr[i]. My problem is that the stack overflows at large sizes and I can&#39;t solve it in any way. Please tell me how can I refactor my code to avoid the error StackOverflow ?\r\n\r\n```\r\npublic class Smaller {\r\n    public static int[] smaller(int[] unsorted) {\r\n        int[] result = new int[unsorted.length];\r\n\r\n        for (int i = 0; i &lt; unsorted.length; i++) {\r\n            result[i] = countSmaller(unsorted[i], 0, i + 1, unsorted);\r\n        }\r\n\r\n        return result;\r\n    }\r\n\r\n    private static int countSmaller(int currentNumber, int count, int index, int[] arr) {\r\n        if (index &gt;= arr.length) {\r\n            return count;\r\n        }\r\n\r\n        return arr[index] &lt; currentNumber\r\n                ? countSmaller(currentNumber, count + 1, index + 1, arr)\r\n                : countSmaller(currentNumber, count, index + 1, arr);\r\n    }\r\n}\r\n```","title":"Recursion stackoverflow Java","body":"<p>I need to count the number of numbers on the right that are less than the number arr[i]. My problem is that the stack overflows at large sizes and I can't solve it in any way. Please tell me how can I refactor my code to avoid the error StackOverflow ?</p>\n<pre><code>public class Smaller {\n    public static int[] smaller(int[] unsorted) {\n        int[] result = new int[unsorted.length];\n\n        for (int i = 0; i &lt; unsorted.length; i++) {\n            result[i] = countSmaller(unsorted[i], 0, i + 1, unsorted);\n        }\n\n        return result;\n    }\n\n    private static int countSmaller(int currentNumber, int count, int index, int[] arr) {\n        if (index &gt;= arr.length) {\n            return count;\n        }\n\n        return arr[index] &lt; currentNumber\n                ? countSmaller(currentNumber, count + 1, index + 1, arr)\n                : countSmaller(currentNumber, count, index + 1, arr);\n    }\n}\n</code></pre>\n"},{"tags":["java","mysql","hibernate","date","gregorian-calendar"],"comments":[{"owner":{"account_id":310184,"reputation":123280,"user_id":623041,"accept_rate":81,"display_name":"eggyal"},"score":0,"creation_date":1399747015,"post_id":23584810,"comment_id":36197509,"body_markdown":"Aside: bear in mind that the supported range of MySQL&#39;s `DATE` type is `&#39;1000-01-01&#39;` to `&#39;9999-12-31&#39;`, so if you might deal with historical dates earlier than year 1000, you will run into further problems there.","body":"Aside: bear in mind that the supported range of MySQL&#39;s <code>DATE</code> type is <code>&#39;1000-01-01&#39;</code> to <code>&#39;9999-12-31&#39;</code>, so if you might deal with historical dates earlier than year 1000, you will run into further problems there."},{"owner":{"account_id":4369732,"reputation":129,"user_id":3564462,"accept_rate":0,"display_name":"Perelum"},"score":0,"creation_date":1399754337,"post_id":23584810,"comment_id":36199751,"body_markdown":"&quot;myCalendarField&quot; can be obtained in various ways. Generally it is received as String (e.g. submitted by a web form or obtained by a soap request). The conversion from string to Calendar can be done with a code similar to what I&#39;ve shown in the first code extract, see &quot;prolepticFromXML&quot;. But the way the field is obtained does not have any relevance since it is converted into java.sql.date and then formatted to String passing through a new Calendar, inside the  java.text.SimpleDateFormat...","body":"&quot;myCalendarField&quot; can be obtained in various ways. Generally it is received as String (e.g. submitted by a web form or obtained by a soap request). The conversion from string to Calendar can be done with a code similar to what I&#39;ve shown in the first code extract, see &quot;prolepticFromXML&quot;. But the way the field is obtained does not have any relevance since it is converted into java.sql.date and then formatted to String passing through a new Calendar, inside the  java.text.SimpleDateFormat..."},{"owner":{"account_id":4369732,"reputation":129,"user_id":3564462,"accept_rate":0,"display_name":"Perelum"},"score":0,"creation_date":1399754741,"post_id":23584810,"comment_id":36199899,"body_markdown":"Although the type sql DATE has the limitations that @eggyal has pointed out, you can still insert to the db dates before the year 1000. Anyway, the problem still exists between 1000-01-01 and 1582-10-15.","body":"Although the type sql DATE has the limitations that @eggyal has pointed out, you can still insert to the db dates before the year 1000. Anyway, the problem still exists between 1000-01-01 and 1582-10-15."},{"owner":{"account_id":310184,"reputation":123280,"user_id":623041,"accept_rate":81,"display_name":"eggyal"},"score":0,"creation_date":1399756610,"post_id":23584810,"comment_id":36200413,"body_markdown":"It seems to me that, having [constructed a `SimpleDateFormat` object](http://bazaar.launchpad.net/~mysql/connectorj/5.1/view/head:/src/com/mysql/jdbc/PreparedStatement.java#L4791), MySQL Connector/J should then call `setCalendar()` upon it specifying a `GregorianCalendar` which has been set to be pure/proleptic Gregorian (i.e. with `setGregorianChange(new Date(Long.MIN_VALUE))` as you describe).  I have filed a [bug report](http://bugs.mysql.com/bug.php?id=72609).","body":"It seems to me that, having <a href=\"http://bazaar.launchpad.net/~mysql/connectorj/5.1/view/head:/src/com/mysql/jdbc/PreparedStatement.java#L4791\" rel=\"nofollow noreferrer\">constructed a <code>SimpleDateFormat</code> object</a>, MySQL Connector/J should then call <code>setCalendar()</code> upon it specifying a <code>GregorianCalendar</code> which has been set to be pure/proleptic Gregorian (i.e. with <code>setGregorianChange(new Date(Long.MIN_VALUE))</code> as you describe).  I have filed a <a href=\"http://bugs.mysql.com/bug.php?id=72609\" rel=\"nofollow noreferrer\">bug report</a>."},{"owner":{"account_id":4369732,"reputation":129,"user_id":3564462,"accept_rate":0,"display_name":"Perelum"},"score":0,"creation_date":1399768623,"post_id":23584810,"comment_id":36203018,"body_markdown":"I can not find the instructions you are talking about, at the link that you posted. Could you tell me the exact line in the code?","body":"I can not find the instructions you are talking about, at the link that you posted. Could you tell me the exact line in the code?"},{"owner":{"account_id":4369732,"reputation":129,"user_id":3564462,"accept_rate":0,"display_name":"Perelum"},"score":0,"creation_date":1399769297,"post_id":23584810,"comment_id":36203130,"body_markdown":"I&#39;m sorry, I understand. Thank you for the bug report.","body":"I&#39;m sorry, I understand. Thank you for the bug report."}],"owner":{"account_id":4369732,"reputation":129,"user_id":3564462,"accept_rate":0,"display_name":"Perelum"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":620,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":0,"score":2,"last_activity_date":1661445605,"creation_date":1399746606,"question_id":23584810,"body_markdown":"(Sorry for my english...)\r\n\r\nTo represent a gregorian calendar date before 15 Oct 1582 (starting date for Gregorian Calendar) it is possible to use a proleptic GregorianCalendar. Such a Calendar allows to represent dates prior to 15 Oct 1582 using the gregorian calendar system, also if it didn&#39;t exist at that time.\r\nTwo possible methods to create a new proleptic GregorianCalendar are the following (I report this for test purposes, but it is not essential):\r\n\r\n        GregorianCalendar proleptic = null;\r\n        \r\n        proleptic = new GregorianCalendar();\r\n        proleptic.clear(); \r\n        proleptic.setGregorianChange(new Date(Long.MIN_VALUE));\r\n        proleptic.set(Calendar.DAY_OF_MONTH, 8);\r\n        proleptic.set(Calendar.MONTH, Calendar.OCTOBER);\r\n        proleptic.set(Calendar.YEAR, 1582);\r\n        System.out.println(&quot;proleptic_calendar_8Oct1582 [DAY_OF_MONTH [&quot;+proleptic.get(Calendar.DAY_OF_MONTH)+&quot;], MONTH [&quot;+proleptic.get(Calendar.MONTH)+&quot;], YEAR [&quot;+proleptic.get(Calendar.YEAR)+&quot;], in millis [&quot;+proleptic.getTimeInMillis()+&quot;]&quot;);\r\n        \r\n        \r\n        GregorianCalendar prolepticFromXML = null;\r\n        String newDate = &quot;1582-10-08&quot;;\r\n        DatatypeFactory datatypeFactory = null;\r\n        try {\r\n            datatypeFactory = DatatypeFactory.newInstance();\r\n            prolepticFromXML = datatypeFactory.newXMLGregorianCalendar(newDate).toGregorianCalendar();\r\n        } catch (Exception e) {\r\n            e.printStackTrace();\r\n        } \r\n        System.out.println(&quot;prolepticFromXML_8Oct1582 [DAY_OF_MONTH [&quot;+prolepticFromXML.get(Calendar.DAY_OF_MONTH)+&quot;], MONTH [&quot;+prolepticFromXML.get(Calendar.MONTH)+&quot;], YEAR [&quot;+prolepticFromXML.get(Calendar.YEAR)+&quot;], in millis [&quot;+prolepticFromXML.getTimeInMillis()+&quot;]&quot;);\r\n        \r\n        System.out.println(&quot;millis matches: [&quot;+(proleptic.getTimeInMillis() == prolepticFromXML.getTimeInMillis())+&quot;]\r\n\r\noutput:\r\n\r\n    proleptic_calendar_8Oct1582 [DAY_OF_MONTH [8], MONTH [9], YEAR [1582], in millis [-12219901200000]\r\n    prolepticFromXML_8Oct1582 [DAY_OF_MONTH [8], MONTH [9], YEAR [1582], in millis [-12219901200000]\r\n    millis matches: [true]\r\n\r\nNow we imagine to receive a string from an input source (a web form, a soap request, etc) and to build with it a proleptic GregorianCalendar, we can call it *myCalendarField*, .\r\nThen, I&#39;d like to write this date on a mysql database, in a column of type DATE.\r\nI use *Hibernate* as persistence framework and imagine the *myCalendarField* is a field mapped into an Entity class\r\n\t\r\n    @Temporal(TemporalType.DATE)\r\n    @Column(name = &quot;a_test_date_field&quot;)\r\n    public Calendar getMyCalendarField() {\r\n        return this.myCalendarField;\r\n    }\r\n\t\r\nfollowing the code starting by org.hibernate.type.CalendarDateType, that manages the mapping between java Calendar and sql DATE,  I found that it calls the method \r\n\r\n    public void setDate(int parameterIndex, java.sql.Date x, Calendar cal)\r\n\r\nin *com.mysql.jdbc.PreparedStatement*, available in the mysql connector,\r\n\r\npassing a \r\n\r\n    new java.sql.Date( myCalendarField.getTime().getTime() ); \r\n\r\nas *x*\r\n\t\r\nNow, the setDate method uses a SimpleDateFormat in order to convert the passed Date in string, prior to convert this string on byte[] and following the work-flow. \r\nTo format the date the connector does something like this:\r\n\r\n\t\t\r\n    SimpleDateFormat ddf = new SimpleDateFormat(&quot;&#39;&#39;yyyy-MM-dd&#39;&#39;&quot;, Locale.US);\r\n    ddf.setTimeZone(cal.getTimeZone()); \r\n    String timeString = ddf.format(x);\r\n\r\nat this point the format method of java.text.SimpleDateFormat does something like this\r\n\r\n    Calendar calendar = null;\r\n    calendar = Calendar.getInstance(TimeZone.getDefault(), Locale.US);\r\n    calendar.setTime(x);\r\n\r\nand uses the new instantiated calendar to get all date and time informations to build the output formatted string.\r\nWhat happens is then that the new created Calendar is not proleptic anymore, than the dates prior to 15 Oct 1582 are converted to julian dates.\r\nAs a consequence of this, we obtain on DB a date different from the one received in input.\r\n\r\nSo, if a java web application receives for example 8 oct 1582, treats it as a proleptic Gregorian Calendar and wants to save it on a DATE field on a mysql DB, the date persisted becomes 28 Sep 1582.\r\nI found no way, at the moment, to persist the original input date without modifications.\r\n\r\nAre my conclusions correct? Do you know any way to persist on a mySql DB a date prior then 15 Oct 1582 as proleptic GregorianCalendar, using Java + Hibernate + my sql connector?\r\n\r\n**EDIT**\r\nIn 2018 the [jdbc connector bug][1], opened following this post, has been fixed.\r\n\r\n\r\n  [1]: https://bugs.mysql.com/bug.php?id=72609","title":"com.mysql.jdbc.PreparedStatement setDate: unable to persist proleptic Gregorian Calendar dates (for dates before 15 Oct 1582)","body":"<p>(Sorry for my english...)</p>\n<p>To represent a gregorian calendar date before 15 Oct 1582 (starting date for Gregorian Calendar) it is possible to use a proleptic GregorianCalendar. Such a Calendar allows to represent dates prior to 15 Oct 1582 using the gregorian calendar system, also if it didn't exist at that time.\nTwo possible methods to create a new proleptic GregorianCalendar are the following (I report this for test purposes, but it is not essential):</p>\n<pre><code>    GregorianCalendar proleptic = null;\n    \n    proleptic = new GregorianCalendar();\n    proleptic.clear(); \n    proleptic.setGregorianChange(new Date(Long.MIN_VALUE));\n    proleptic.set(Calendar.DAY_OF_MONTH, 8);\n    proleptic.set(Calendar.MONTH, Calendar.OCTOBER);\n    proleptic.set(Calendar.YEAR, 1582);\n    System.out.println(&quot;proleptic_calendar_8Oct1582 [DAY_OF_MONTH [&quot;+proleptic.get(Calendar.DAY_OF_MONTH)+&quot;], MONTH [&quot;+proleptic.get(Calendar.MONTH)+&quot;], YEAR [&quot;+proleptic.get(Calendar.YEAR)+&quot;], in millis [&quot;+proleptic.getTimeInMillis()+&quot;]&quot;);\n    \n    \n    GregorianCalendar prolepticFromXML = null;\n    String newDate = &quot;1582-10-08&quot;;\n    DatatypeFactory datatypeFactory = null;\n    try {\n        datatypeFactory = DatatypeFactory.newInstance();\n        prolepticFromXML = datatypeFactory.newXMLGregorianCalendar(newDate).toGregorianCalendar();\n    } catch (Exception e) {\n        e.printStackTrace();\n    } \n    System.out.println(&quot;prolepticFromXML_8Oct1582 [DAY_OF_MONTH [&quot;+prolepticFromXML.get(Calendar.DAY_OF_MONTH)+&quot;], MONTH [&quot;+prolepticFromXML.get(Calendar.MONTH)+&quot;], YEAR [&quot;+prolepticFromXML.get(Calendar.YEAR)+&quot;], in millis [&quot;+prolepticFromXML.getTimeInMillis()+&quot;]&quot;);\n    \n    System.out.println(&quot;millis matches: [&quot;+(proleptic.getTimeInMillis() == prolepticFromXML.getTimeInMillis())+&quot;]\n</code></pre>\n<p>output:</p>\n<pre><code>proleptic_calendar_8Oct1582 [DAY_OF_MONTH [8], MONTH [9], YEAR [1582], in millis [-12219901200000]\nprolepticFromXML_8Oct1582 [DAY_OF_MONTH [8], MONTH [9], YEAR [1582], in millis [-12219901200000]\nmillis matches: [true]\n</code></pre>\n<p>Now we imagine to receive a string from an input source (a web form, a soap request, etc) and to build with it a proleptic GregorianCalendar, we can call it <em>myCalendarField</em>, .\nThen, I'd like to write this date on a mysql database, in a column of type DATE.\nI use <em>Hibernate</em> as persistence framework and imagine the <em>myCalendarField</em> is a field mapped into an Entity class</p>\n<pre><code>@Temporal(TemporalType.DATE)\n@Column(name = &quot;a_test_date_field&quot;)\npublic Calendar getMyCalendarField() {\n    return this.myCalendarField;\n}\n</code></pre>\n<p>following the code starting by org.hibernate.type.CalendarDateType, that manages the mapping between java Calendar and sql DATE,  I found that it calls the method</p>\n<pre><code>public void setDate(int parameterIndex, java.sql.Date x, Calendar cal)\n</code></pre>\n<p>in <em>com.mysql.jdbc.PreparedStatement</em>, available in the mysql connector,</p>\n<p>passing a</p>\n<pre><code>new java.sql.Date( myCalendarField.getTime().getTime() ); \n</code></pre>\n<p>as <em>x</em></p>\n<p>Now, the setDate method uses a SimpleDateFormat in order to convert the passed Date in string, prior to convert this string on byte[] and following the work-flow.\nTo format the date the connector does something like this:</p>\n<pre><code>SimpleDateFormat ddf = new SimpleDateFormat(&quot;''yyyy-MM-dd''&quot;, Locale.US);\nddf.setTimeZone(cal.getTimeZone()); \nString timeString = ddf.format(x);\n</code></pre>\n<p>at this point the format method of java.text.SimpleDateFormat does something like this</p>\n<pre><code>Calendar calendar = null;\ncalendar = Calendar.getInstance(TimeZone.getDefault(), Locale.US);\ncalendar.setTime(x);\n</code></pre>\n<p>and uses the new instantiated calendar to get all date and time informations to build the output formatted string.\nWhat happens is then that the new created Calendar is not proleptic anymore, than the dates prior to 15 Oct 1582 are converted to julian dates.\nAs a consequence of this, we obtain on DB a date different from the one received in input.</p>\n<p>So, if a java web application receives for example 8 oct 1582, treats it as a proleptic Gregorian Calendar and wants to save it on a DATE field on a mysql DB, the date persisted becomes 28 Sep 1582.\nI found no way, at the moment, to persist the original input date without modifications.</p>\n<p>Are my conclusions correct? Do you know any way to persist on a mySql DB a date prior then 15 Oct 1582 as proleptic GregorianCalendar, using Java + Hibernate + my sql connector?</p>\n<p><strong>EDIT</strong>\nIn 2018 the <a href=\"https://bugs.mysql.com/bug.php?id=72609\" rel=\"nofollow noreferrer\">jdbc connector bug</a>, opened following this post, has been fixed.</p>\n"},{"tags":["java","spring-boot","spring-mvc","spring-test"],"comments":[{"owner":{"account_id":356260,"reputation":2426,"user_id":695657,"accept_rate":78,"display_name":"Sai Upadhyayula"},"score":1,"creation_date":1656268819,"post_id":72593522,"comment_id":128524963,"body_markdown":"Define the ContatoService inside your test class like below: @MockBean\n    ContatoService service, you only defined the instance for EgressoService","body":"Define the ContatoService inside your test class like below: @MockBean     ContatoService service, you only defined the instance for EgressoService"}],"answers":[{"tags":[],"owner":{"account_id":1662420,"reputation":33,"user_id":1530442,"display_name":"Peter Berkman"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1661445127,"creation_date":1658964488,"answer_id":73145647,"question_id":72593522,"body_markdown":"I had the same problem in our API Gateway unit tests.\r\n\r\nwhat worked for me is adding the bean to the unit test as:\r\n\r\n    @MockBean\r\n    private AuthRestClient mockClient;\r\n\r\nfull:\r\n\r\n```\r\n\r\nhere are my imports etc:\r\n\r\nimport org.junit.jupiter.api.Test;\r\nimport org.junit.jupiter.api.extension.ExtendWith;\r\nimport org.springframework.boot.test.context.SpringBootTest;\r\nimport org.springframework.boot.test.mock.mockito.MockBean;\r\nimport org.springframework.security.test.context.support.WithMockUser;\r\nimport org.springframework.test.context.ActiveProfiles;\r\nimport org.springframework.test.context.junit.jupiter.SpringExtension;\r\n\r\nimport com.xxx.yyyy.core.interfaces.constants.AuthorityConstants;\r\nimport com.xxx.yyy.core.interfaces.ws.AuthRestClient;\r\n\r\n\r\n@ExtendWith(SpringExtension.class)\r\n@SpringBootTest\r\n@ActiveProfiles(value = &quot;test&quot;)\r\n@WithMockUser(username = &quot;admin&quot;, roles = { AuthorityConstants.PRIV_USERADMIN })\r\nclass XxxServicesApiGatewayApplicationTests {\r\n\r\n    @MockBean\r\n    private AuthRestClient mockClient;\r\n\r\n    @Test\r\n    void test() {\r\n\r\n        // assertions, etc.\r\n    }\r\n}\r\n```","title":"SpringBoot JUnit test says Field required a bean of type &#39;com.labprog.egressos.service.ContatoService&#39; that could not be found","body":"<p>I had the same problem in our API Gateway unit tests.</p>\n<p>what worked for me is adding the bean to the unit test as:</p>\n<pre><code>@MockBean\nprivate AuthRestClient mockClient;\n</code></pre>\n<p>full:</p>\n<pre><code>\nhere are my imports etc:\n\nimport org.junit.jupiter.api.Test;\nimport org.junit.jupiter.api.extension.ExtendWith;\nimport org.springframework.boot.test.context.SpringBootTest;\nimport org.springframework.boot.test.mock.mockito.MockBean;\nimport org.springframework.security.test.context.support.WithMockUser;\nimport org.springframework.test.context.ActiveProfiles;\nimport org.springframework.test.context.junit.jupiter.SpringExtension;\n\nimport com.xxx.yyyy.core.interfaces.constants.AuthorityConstants;\nimport com.xxx.yyy.core.interfaces.ws.AuthRestClient;\n\n\n@ExtendWith(SpringExtension.class)\n@SpringBootTest\n@ActiveProfiles(value = &quot;test&quot;)\n@WithMockUser(username = &quot;admin&quot;, roles = { AuthorityConstants.PRIV_USERADMIN })\nclass XxxServicesApiGatewayApplicationTests {\n\n    @MockBean\n    private AuthRestClient mockClient;\n\n    @Test\n    void test() {\n\n        // assertions, etc.\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":17698460,"reputation":41,"user_id":12848627,"display_name":"Danielvisky"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":960,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1661445127,"creation_date":1655047291,"question_id":72593522,"body_markdown":"I made the first endpoint class of my SpringBoot project, then tried to test it with JUnit, using @WebMvcTest and mocks. When I run the test it fails to load ApplicationContext because of the following error:\r\n```\r\n***************************\r\nAPPLICATION FAILED TO START\r\n***************************\r\n\r\nDescription:\r\n\r\nField contatoService in com.labprog.egressos.controller.EgressoController required a bean of type &#39;com.labprog.egressos.service.ContatoService&#39; that could not be found.\r\n\r\nThe injection point has the following annotations:\r\n\t- @org.springframework.beans.factory.annotation.Autowired(required=true)\r\n\r\nAction:\r\n\r\nConsider defining a bean of type &#39;com.labprog.egressos.service.ContatoService&#39; in your configuration.\r\n\r\n2022-06-12 11:55:30.365 ERROR 23962 --- [           main] o.s.test.context.TestContextManager      : Caught exception while allowing TestExecutionListener [org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener@7139992f] to prepare test instance [com.labprog.egressos.controller.EgressoControllerTest@3df1a1ac]\r\n\r\njava.lang.IllegalStateException: Failed to load ApplicationContext\r\n\tat org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:132) ~[spring-test-5.3.19.jar:5.3.19]\r\n\tat org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:124) ~[spring-test-5.3.19.jar:5.3.19]\r\n\t...\r\n```\r\n\r\nMy project&#39;s file structure is this:\r\n```\r\n.\r\n├── controller\r\n│&#160;&#160; └── EgressoController.java\r\n├── EgressosApplication.java\r\n├── model\r\n│&#160;&#160; ├── Cargo.java\r\n│&#160;&#160; ├── Contato.java\r\n│&#160;&#160; ├── CursoEgresso.java\r\n│&#160;&#160; ├── CursoEgressoPK.java\r\n│&#160;&#160; ├── Curso.java\r\n│&#160;&#160; ├── Depoimento.java\r\n│&#160;&#160; ├── dto\r\n│&#160;&#160; │&#160;&#160; ├── ContatoDTO.java\r\n│&#160;&#160; │&#160;&#160; └── EgressoDTO.java\r\n│&#160;&#160; ├── Egresso.java\r\n│&#160;&#160; ├── FaixaSalario.java\r\n│&#160;&#160; ├── ProfEgresso.java\r\n│&#160;&#160; └── repository\r\n│&#160;&#160;     ├── CargoRepo.java\r\n│&#160;&#160;     ├── ContatoRepo.java\r\n│&#160;&#160;     ├── CursoEgressoRepo.java\r\n│&#160;&#160;     ├── CursoRepo.java\r\n│&#160;&#160;     ├── DepoimentoRepo.java\r\n│&#160;&#160;     ├── EgressoRepo.java\r\n│&#160;&#160;     ├── FaixaSalarioRepo.java\r\n│&#160;&#160;     └── ProfEgressoRepo.java\r\n└── service\r\n    ├── CargoService.java\r\n    ├── ContatoService.java\r\n    ├── CursoEgressoService.java\r\n    ├── CursoService.java\r\n    ├── DepoimentoService.java\r\n    ├── EgressoService.java\r\n    ├── exceptions\r\n    │&#160;&#160; ├── RegraNegocioRunTime.java\r\n    │&#160;&#160; └── ServiceRuntimeException.java\r\n    └── FaixaSalarioService.java\r\n```\r\n\r\nMy EgressoController.java class:\r\n```\r\npackage com.labprog.egressos.controller;\r\n\r\nimport java.util.ArrayList;\r\n\r\nimport org.springframework.beans.factory.annotation.Autowired;\r\nimport org.springframework.http.HttpStatus;\r\nimport org.springframework.http.ResponseEntity;\r\nimport org.springframework.web.bind.annotation.GetMapping;\r\nimport org.springframework.web.bind.annotation.PathVariable;\r\nimport org.springframework.web.bind.annotation.PostMapping;\r\nimport org.springframework.web.bind.annotation.PutMapping;\r\nimport org.springframework.web.bind.annotation.RequestBody;\r\nimport org.springframework.web.bind.annotation.RequestMapping;\r\nimport org.springframework.web.bind.annotation.RestController;\r\n\r\nimport com.labprog.egressos.service.ContatoService;\r\nimport com.labprog.egressos.service.CursoService;\r\nimport com.labprog.egressos.service.EgressoService;\r\nimport com.labprog.egressos.service.exceptions.ServiceRuntimeException;\r\nimport com.labprog.egressos.model.Contato;\r\nimport com.labprog.egressos.model.Egresso;\r\nimport com.labprog.egressos.model.dto.ContatoDTO;\r\nimport com.labprog.egressos.model.dto.EgressoDTO;\r\n\r\n@SuppressWarnings(&quot;rawtypes&quot;)\r\n@RestController\r\n@RequestMapping(&quot;/api/egressos&quot;)\r\npublic class EgressoController {\r\n    @Autowired\r\n    private EgressoService service;\r\n    \r\n    @Autowired\r\n    private ContatoService contatoService;\r\n\r\n    @PostMapping(&quot;/salvar&quot;)\r\n    public ResponseEntity salvar(@RequestBody EgressoDTO dto) {\r\n        Egresso egresso = Egresso.builder()\r\n                .nome(dto.getNome())\r\n                .email(dto.getEmail())\r\n                .cpf(dto.getCpf())\r\n                .resumo(dto.getResumo())\r\n                .urlFoto(dto.getUrlFoto())\r\n                .build();\r\n        try {\r\n            Egresso salvo = service.salvar(egresso);\r\n            return ResponseEntity.status(HttpStatus.CREATED).body(salvo);\r\n        } catch (ServiceRuntimeException e) {\r\n            return ResponseEntity.badRequest().body(e.getMessage());\r\n        }\r\n    }\r\n\r\n    @PutMapping(&quot;/atualizar/{id}&quot;)\r\n    public ResponseEntity atualizar(\r\n            @RequestBody EgressoDTO dto,\r\n            @PathVariable Long id) {\r\n        Egresso egresso = Egresso.builder()\r\n                .id(id)\r\n                .nome(dto.getNome())\r\n                .email(dto.getEmail())\r\n                .cpf(dto.getCpf())\r\n                .resumo(dto.getResumo())\r\n                .urlFoto(dto.getUrlFoto())\r\n                .build();\r\n        try {\r\n            Egresso salvo = service.atualizar(egresso);\r\n            return ResponseEntity.status(HttpStatus.OK).body(salvo);\r\n        } catch (ServiceRuntimeException e) {\r\n            return ResponseEntity.badRequest().body(e.getMessage());\r\n        }\r\n    }\r\n\r\n    @PutMapping(&quot;/atualizar_contatos/{id}&quot;)\r\n    public ResponseEntity atualizarContatos(\r\n            @RequestBody EgressoDTO dto,\r\n            @PathVariable Long id) {\r\n        Egresso egresso = Egresso.builder()\r\n                .id(id)\r\n                .nome(dto.getNome())\r\n                .email(dto.getEmail())\r\n                .cpf(dto.getCpf())\r\n                .resumo(dto.getResumo())\r\n                .urlFoto(dto.getUrlFoto())\r\n                .build();\r\n        ArrayList&lt;Contato&gt; contatos = new ArrayList&lt;&gt;();\r\n        for (ContatoDTO contatoDto : dto.getContatos()) {\r\n            Contato contato = Contato.builder()\r\n                    .id(contatoDto.getId())\r\n                    .nome(contatoDto.getNome())\r\n                    .urlLogo(contatoDto.getUrlLogo())\r\n                    .build();\r\n            contatos.add(contato);\r\n        }\r\n        ArrayList&lt;Contato&gt; contatosValidados = new ArrayList&lt;&gt;();\r\n        try {\r\n            for (Contato contato : contatos) {\r\n                if(contato.getId() == null) {\r\n                    contatosValidados.add(contatoService.salvar(contato));\r\n                } else {\r\n                    contatosValidados.add(contatoService.atualizar(contato));\r\n                }\r\n            }\r\n        } catch (ServiceRuntimeException e) {\r\n            return ResponseEntity.badRequest().body(e.getMessage());\r\n        }\r\n        try {\r\n            Egresso salvo = service.atualizarContatos(egresso, contatosValidados);\r\n            return ResponseEntity.status(HttpStatus.OK).body(salvo);\r\n        } catch (ServiceRuntimeException e) {\r\n            return ResponseEntity.badRequest().body(e.getMessage());\r\n        }\r\n    }\r\n\r\n    @PostMapping(&quot;/remover/{id}&quot;)\r\n    public ResponseEntity remover(@PathVariable Long id) {\r\n        Egresso egresso = Egresso.builder()\r\n                .id(id)\r\n                .build();\r\n        try {\r\n            service.remover(egresso);\r\n            return ResponseEntity.status(HttpStatus.NO_CONTENT).build();\r\n        } catch (ServiceRuntimeException e) {\r\n            return ResponseEntity.badRequest().body(e.getMessage());\r\n        }\r\n    }\r\n\r\n    @GetMapping(&quot;/buscar/{email}&quot;)\r\n    public ResponseEntity buscar(@PathVariable String email) {\r\n        Egresso filtro = Egresso.builder()\r\n                .email(email)\r\n                .build();\r\n        try {\r\n            Egresso egresso = service.buscar(filtro).get(0);\r\n            return ResponseEntity.status(HttpStatus.OK).body(egresso);\r\n        } catch (ServiceRuntimeException e) {\r\n            return ResponseEntity.badRequest().body(e.getMessage());\r\n        }\r\n    }\r\n\r\n}\r\n```\r\n\r\nMy ContatoService.java class:\r\n```\r\npackage com.labprog.egressos.service;\r\n\r\nimport java.util.List;\r\n\r\nimport com.labprog.egressos.model.Contato;\r\nimport com.labprog.egressos.model.repository.ContatoRepo;\r\nimport com.labprog.egressos.service.exceptions.ServiceRuntimeException;\r\n\r\nimport org.springframework.beans.factory.annotation.Autowired;\r\nimport org.springframework.data.domain.Example;\r\nimport org.springframework.data.domain.ExampleMatcher;\r\nimport org.springframework.data.domain.ExampleMatcher.StringMatcher;\r\nimport org.springframework.stereotype.Service;\r\nimport org.springframework.transaction.annotation.Transactional;\r\n\r\n@Service\r\npublic class ContatoService {\r\n    \r\n    @Autowired \r\n    private ContatoRepo repo;\r\n\r\n    @Transactional\r\n    public Contato salvar(Contato contato) {\r\n        verificarContato(contato);\r\n        return repo.save(contato);\r\n    }\r\n\r\n    @Transactional\r\n    public Contato atualizar(Contato contato) {\r\n        verificarContato(contato);\r\n        verificarId(contato);\r\n        return repo.save(contato);\r\n    }\r\n\r\n    @Transactional\r\n    public void remover(Contato contato) {\r\n        verificarId(contato);\r\n        repo.delete(contato);\r\n    }\r\n\r\n    public List&lt;Contato&gt; buscar(Contato filtro) {\r\n        Example&lt;Contato&gt; example =\r\n                Example.of(filtro, ExampleMatcher.matching()\r\n                        .withIgnoreCase()\r\n                        .withStringMatcher(StringMatcher.CONTAINING)\r\n                );\r\n\r\n        return repo.findAll(example);\r\n    }\r\n\r\n    private void verificarContato(Contato contato) {\r\n        if (contato == null)\r\n            throw new ServiceRuntimeException(&quot;O contato est&#225; nulo&quot;);                \r\n        if ((contato.getNome() == null) || (contato.getNome().equals(&quot;&quot;)))\r\n            throw new ServiceRuntimeException(&quot;Nome do contato deve ser informado&quot;);                   \r\n    }\r\n\r\n    private void verificarId(Contato contato) {\r\n        if ((contato == null) || (contato.getId() == null)) {\r\n            throw new ServiceRuntimeException(&quot;ID de contato inv&#225;lido&quot;);\r\n        }\r\n    }\r\n\r\n}\r\n```\r\n\r\nMy EgressoControllerTest.java class:\r\n```\r\npackage com.labprog.egressos.controller;\r\n\r\nimport org.junit.jupiter.api.Test;\r\nimport org.junit.jupiter.api.extension.ExtendWith;\r\nimport org.mockito.Mockito;\r\nimport org.springframework.beans.factory.annotation.Autowired;\r\nimport org.springframework.boot.test.autoconfigure.web.servlet.AutoConfigureMockMvc;\r\nimport org.springframework.boot.test.autoconfigure.web.servlet.WebMvcTest;\r\nimport org.springframework.boot.test.mock.mockito.MockBean;\r\nimport org.springframework.http.MediaType;\r\nimport org.springframework.test.context.junit.jupiter.SpringExtension;\r\nimport org.springframework.test.web.servlet.MockMvc;\r\nimport org.springframework.test.web.servlet.request.MockHttpServletRequestBuilder;\r\nimport org.springframework.test.web.servlet.request.MockMvcRequestBuilders;\r\nimport org.springframework.test.web.servlet.result.MockMvcResultMatchers;\r\n\r\nimport com.fasterxml.jackson.databind.ObjectMapper;\r\nimport com.labprog.egressos.model.Egresso;\r\nimport com.labprog.egressos.model.dto.EgressoDTO;\r\nimport com.labprog.egressos.service.EgressoService;\r\n\r\n@ExtendWith(SpringExtension.class)\r\n@WebMvcTest (controllers =  EgressoController.class)\r\n@AutoConfigureMockMvc\r\npublic class EgressoControllerTest {\r\n    \r\n    static final String API = &quot;/api/egressos&quot;;\r\n\r\n    @Autowired\r\n    MockMvc mvc;\r\n\r\n    @MockBean\r\n    EgressoService service;\r\n\r\n    @Test\r\n    public void deveSalvarEgresso() throws Exception {\r\n        // Cen&#225;rio\r\n        EgressoDTO dto = EgressoDTO.builder()\r\n                .nome(&quot;Nome&quot;)\r\n                .email(&quot;email@e.com&quot;)\r\n                .cpf(&quot;123456789&quot;)\r\n                .resumo(&quot;Resumo&quot;)\r\n                .urlFoto(&quot;urlFoto&quot;)\r\n                .build();\r\n\r\n        Egresso egresso = Egresso.builder()\r\n                .id(1l)\r\n                .nome(dto.getNome())\r\n                .email(dto.getEmail())\r\n                .cpf(dto.getCpf())\r\n                .resumo(dto.getResumo())\r\n                .urlFoto(dto.getUrlFoto())\r\n                .build();\r\n\r\n        Mockito.when(service.salvar(\r\n            Mockito.any(Egresso.class))).thenReturn(egresso);\r\n\r\n        String json = new ObjectMapper().writeValueAsString(dto);\r\n\r\n        // A&#231;&#227;o\r\n        MockHttpServletRequestBuilder request = \r\n            MockMvcRequestBuilders.post(API + &quot;/salvar&quot;)\r\n            .accept(MediaType.APPLICATION_JSON)\r\n            .contentType(MediaType.APPLICATION_JSON)\r\n            .content(json);\r\n\r\n        // Verifica&#231;&#227;o\r\n        mvc.perform(request)\r\n            .andExpect(MockMvcResultMatchers.status().isCreated());\r\n    }\r\n\r\n}\r\n```\r\n\r\nAnd my pom.xml:\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n\txsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n\t&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n\t&lt;parent&gt;\r\n\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t&lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n\t\t&lt;version&gt;2.6.7&lt;/version&gt;\r\n\t\t&lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\r\n\t&lt;/parent&gt;\r\n\t&lt;groupId&gt;com.labprog&lt;/groupId&gt;\r\n\t&lt;artifactId&gt;egressos&lt;/artifactId&gt;\r\n\t&lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\r\n\t&lt;name&gt;egressos&lt;/name&gt;\r\n\t&lt;description&gt;Demo project for Spring Boot&lt;/description&gt;\r\n\t&lt;properties&gt;\r\n\t\t&lt;java.version&gt;18&lt;/java.version&gt;\r\n\t&lt;/properties&gt;\r\n\t&lt;dependencies&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-web-services&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.postgresql&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;postgresql&lt;/artifactId&gt;\r\n\t\t\t&lt;scope&gt;runtime&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;lombok&lt;/artifactId&gt;\r\n\t\t\t&lt;optional&gt;true&lt;/optional&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\r\n\t\t\t&lt;scope&gt;test&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t&lt;/dependencies&gt;\r\n\r\n\t&lt;build&gt;\r\n\t\t&lt;plugins&gt;\r\n\t\t\t&lt;plugin&gt;\r\n\t\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\r\n\t\t\t\t&lt;configuration&gt;\r\n\t\t\t\t\t&lt;excludes&gt;\r\n\t\t\t\t\t\t&lt;exclude&gt;\r\n\t\t\t\t\t\t\t&lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\r\n\t\t\t\t\t\t\t&lt;artifactId&gt;lombok&lt;/artifactId&gt;\r\n\t\t\t\t\t\t&lt;/exclude&gt;\r\n\t\t\t\t\t&lt;/excludes&gt;\r\n\t\t\t\t&lt;/configuration&gt;\r\n\t\t\t&lt;/plugin&gt;\r\n\t\t&lt;/plugins&gt;\r\n\t&lt;/build&gt;\r\n\r\n&lt;/project&gt;\r\n\r\n```\r\n\r\nI need the ContatoService instance for my atualizarContatos() method (update Egresso&#39;s list of Contact). It&#39;s odd that the autowired EgressoService works as supposed, and if I run the test commenting contatoService and atualizarContatos(), the test works. Whatever other service class I include as @Autowired in my controller, it yields that error.\r\n\r\nIt confuses me, as if I run the application and try to use the endpoint for atualizarContatos() in Insomnia, it works just fine:\r\n[![Insomnia using the endpoint atualizarContatos()][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/lwueK.png\r\n\r\nMy services and models are covered with tests already. Why can&#39;t the controller test inject the dependencies correctly?\r\n \r\nI&#39;m working in Ubuntu 20.04.4 LTS with Java 18.","title":"SpringBoot JUnit test says Field required a bean of type &#39;com.labprog.egressos.service.ContatoService&#39; that could not be found","body":"<p>I made the first endpoint class of my SpringBoot project, then tried to test it with JUnit, using @WebMvcTest and mocks. When I run the test it fails to load ApplicationContext because of the following error:</p>\n<pre><code>***************************\nAPPLICATION FAILED TO START\n***************************\n\nDescription:\n\nField contatoService in com.labprog.egressos.controller.EgressoController required a bean of type 'com.labprog.egressos.service.ContatoService' that could not be found.\n\nThe injection point has the following annotations:\n    - @org.springframework.beans.factory.annotation.Autowired(required=true)\n\nAction:\n\nConsider defining a bean of type 'com.labprog.egressos.service.ContatoService' in your configuration.\n\n2022-06-12 11:55:30.365 ERROR 23962 --- [           main] o.s.test.context.TestContextManager      : Caught exception while allowing TestExecutionListener [org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener@7139992f] to prepare test instance [com.labprog.egressos.controller.EgressoControllerTest@3df1a1ac]\n\njava.lang.IllegalStateException: Failed to load ApplicationContext\n    at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:132) ~[spring-test-5.3.19.jar:5.3.19]\n    at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:124) ~[spring-test-5.3.19.jar:5.3.19]\n    ...\n</code></pre>\n<p>My project's file structure is this:</p>\n<pre><code>.\n├── controller\n│   └── EgressoController.java\n├── EgressosApplication.java\n├── model\n│   ├── Cargo.java\n│   ├── Contato.java\n│   ├── CursoEgresso.java\n│   ├── CursoEgressoPK.java\n│   ├── Curso.java\n│   ├── Depoimento.java\n│   ├── dto\n│   │   ├── ContatoDTO.java\n│   │   └── EgressoDTO.java\n│   ├── Egresso.java\n│   ├── FaixaSalario.java\n│   ├── ProfEgresso.java\n│   └── repository\n│       ├── CargoRepo.java\n│       ├── ContatoRepo.java\n│       ├── CursoEgressoRepo.java\n│       ├── CursoRepo.java\n│       ├── DepoimentoRepo.java\n│       ├── EgressoRepo.java\n│       ├── FaixaSalarioRepo.java\n│       └── ProfEgressoRepo.java\n└── service\n    ├── CargoService.java\n    ├── ContatoService.java\n    ├── CursoEgressoService.java\n    ├── CursoService.java\n    ├── DepoimentoService.java\n    ├── EgressoService.java\n    ├── exceptions\n    │   ├── RegraNegocioRunTime.java\n    │   └── ServiceRuntimeException.java\n    └── FaixaSalarioService.java\n</code></pre>\n<p>My EgressoController.java class:</p>\n<pre><code>package com.labprog.egressos.controller;\n\nimport java.util.ArrayList;\n\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.http.HttpStatus;\nimport org.springframework.http.ResponseEntity;\nimport org.springframework.web.bind.annotation.GetMapping;\nimport org.springframework.web.bind.annotation.PathVariable;\nimport org.springframework.web.bind.annotation.PostMapping;\nimport org.springframework.web.bind.annotation.PutMapping;\nimport org.springframework.web.bind.annotation.RequestBody;\nimport org.springframework.web.bind.annotation.RequestMapping;\nimport org.springframework.web.bind.annotation.RestController;\n\nimport com.labprog.egressos.service.ContatoService;\nimport com.labprog.egressos.service.CursoService;\nimport com.labprog.egressos.service.EgressoService;\nimport com.labprog.egressos.service.exceptions.ServiceRuntimeException;\nimport com.labprog.egressos.model.Contato;\nimport com.labprog.egressos.model.Egresso;\nimport com.labprog.egressos.model.dto.ContatoDTO;\nimport com.labprog.egressos.model.dto.EgressoDTO;\n\n@SuppressWarnings(&quot;rawtypes&quot;)\n@RestController\n@RequestMapping(&quot;/api/egressos&quot;)\npublic class EgressoController {\n    @Autowired\n    private EgressoService service;\n    \n    @Autowired\n    private ContatoService contatoService;\n\n    @PostMapping(&quot;/salvar&quot;)\n    public ResponseEntity salvar(@RequestBody EgressoDTO dto) {\n        Egresso egresso = Egresso.builder()\n                .nome(dto.getNome())\n                .email(dto.getEmail())\n                .cpf(dto.getCpf())\n                .resumo(dto.getResumo())\n                .urlFoto(dto.getUrlFoto())\n                .build();\n        try {\n            Egresso salvo = service.salvar(egresso);\n            return ResponseEntity.status(HttpStatus.CREATED).body(salvo);\n        } catch (ServiceRuntimeException e) {\n            return ResponseEntity.badRequest().body(e.getMessage());\n        }\n    }\n\n    @PutMapping(&quot;/atualizar/{id}&quot;)\n    public ResponseEntity atualizar(\n            @RequestBody EgressoDTO dto,\n            @PathVariable Long id) {\n        Egresso egresso = Egresso.builder()\n                .id(id)\n                .nome(dto.getNome())\n                .email(dto.getEmail())\n                .cpf(dto.getCpf())\n                .resumo(dto.getResumo())\n                .urlFoto(dto.getUrlFoto())\n                .build();\n        try {\n            Egresso salvo = service.atualizar(egresso);\n            return ResponseEntity.status(HttpStatus.OK).body(salvo);\n        } catch (ServiceRuntimeException e) {\n            return ResponseEntity.badRequest().body(e.getMessage());\n        }\n    }\n\n    @PutMapping(&quot;/atualizar_contatos/{id}&quot;)\n    public ResponseEntity atualizarContatos(\n            @RequestBody EgressoDTO dto,\n            @PathVariable Long id) {\n        Egresso egresso = Egresso.builder()\n                .id(id)\n                .nome(dto.getNome())\n                .email(dto.getEmail())\n                .cpf(dto.getCpf())\n                .resumo(dto.getResumo())\n                .urlFoto(dto.getUrlFoto())\n                .build();\n        ArrayList&lt;Contato&gt; contatos = new ArrayList&lt;&gt;();\n        for (ContatoDTO contatoDto : dto.getContatos()) {\n            Contato contato = Contato.builder()\n                    .id(contatoDto.getId())\n                    .nome(contatoDto.getNome())\n                    .urlLogo(contatoDto.getUrlLogo())\n                    .build();\n            contatos.add(contato);\n        }\n        ArrayList&lt;Contato&gt; contatosValidados = new ArrayList&lt;&gt;();\n        try {\n            for (Contato contato : contatos) {\n                if(contato.getId() == null) {\n                    contatosValidados.add(contatoService.salvar(contato));\n                } else {\n                    contatosValidados.add(contatoService.atualizar(contato));\n                }\n            }\n        } catch (ServiceRuntimeException e) {\n            return ResponseEntity.badRequest().body(e.getMessage());\n        }\n        try {\n            Egresso salvo = service.atualizarContatos(egresso, contatosValidados);\n            return ResponseEntity.status(HttpStatus.OK).body(salvo);\n        } catch (ServiceRuntimeException e) {\n            return ResponseEntity.badRequest().body(e.getMessage());\n        }\n    }\n\n    @PostMapping(&quot;/remover/{id}&quot;)\n    public ResponseEntity remover(@PathVariable Long id) {\n        Egresso egresso = Egresso.builder()\n                .id(id)\n                .build();\n        try {\n            service.remover(egresso);\n            return ResponseEntity.status(HttpStatus.NO_CONTENT).build();\n        } catch (ServiceRuntimeException e) {\n            return ResponseEntity.badRequest().body(e.getMessage());\n        }\n    }\n\n    @GetMapping(&quot;/buscar/{email}&quot;)\n    public ResponseEntity buscar(@PathVariable String email) {\n        Egresso filtro = Egresso.builder()\n                .email(email)\n                .build();\n        try {\n            Egresso egresso = service.buscar(filtro).get(0);\n            return ResponseEntity.status(HttpStatus.OK).body(egresso);\n        } catch (ServiceRuntimeException e) {\n            return ResponseEntity.badRequest().body(e.getMessage());\n        }\n    }\n\n}\n</code></pre>\n<p>My ContatoService.java class:</p>\n<pre><code>package com.labprog.egressos.service;\n\nimport java.util.List;\n\nimport com.labprog.egressos.model.Contato;\nimport com.labprog.egressos.model.repository.ContatoRepo;\nimport com.labprog.egressos.service.exceptions.ServiceRuntimeException;\n\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.data.domain.Example;\nimport org.springframework.data.domain.ExampleMatcher;\nimport org.springframework.data.domain.ExampleMatcher.StringMatcher;\nimport org.springframework.stereotype.Service;\nimport org.springframework.transaction.annotation.Transactional;\n\n@Service\npublic class ContatoService {\n    \n    @Autowired \n    private ContatoRepo repo;\n\n    @Transactional\n    public Contato salvar(Contato contato) {\n        verificarContato(contato);\n        return repo.save(contato);\n    }\n\n    @Transactional\n    public Contato atualizar(Contato contato) {\n        verificarContato(contato);\n        verificarId(contato);\n        return repo.save(contato);\n    }\n\n    @Transactional\n    public void remover(Contato contato) {\n        verificarId(contato);\n        repo.delete(contato);\n    }\n\n    public List&lt;Contato&gt; buscar(Contato filtro) {\n        Example&lt;Contato&gt; example =\n                Example.of(filtro, ExampleMatcher.matching()\n                        .withIgnoreCase()\n                        .withStringMatcher(StringMatcher.CONTAINING)\n                );\n\n        return repo.findAll(example);\n    }\n\n    private void verificarContato(Contato contato) {\n        if (contato == null)\n            throw new ServiceRuntimeException(&quot;O contato está nulo&quot;);                \n        if ((contato.getNome() == null) || (contato.getNome().equals(&quot;&quot;)))\n            throw new ServiceRuntimeException(&quot;Nome do contato deve ser informado&quot;);                   \n    }\n\n    private void verificarId(Contato contato) {\n        if ((contato == null) || (contato.getId() == null)) {\n            throw new ServiceRuntimeException(&quot;ID de contato inválido&quot;);\n        }\n    }\n\n}\n</code></pre>\n<p>My EgressoControllerTest.java class:</p>\n<pre><code>package com.labprog.egressos.controller;\n\nimport org.junit.jupiter.api.Test;\nimport org.junit.jupiter.api.extension.ExtendWith;\nimport org.mockito.Mockito;\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.boot.test.autoconfigure.web.servlet.AutoConfigureMockMvc;\nimport org.springframework.boot.test.autoconfigure.web.servlet.WebMvcTest;\nimport org.springframework.boot.test.mock.mockito.MockBean;\nimport org.springframework.http.MediaType;\nimport org.springframework.test.context.junit.jupiter.SpringExtension;\nimport org.springframework.test.web.servlet.MockMvc;\nimport org.springframework.test.web.servlet.request.MockHttpServletRequestBuilder;\nimport org.springframework.test.web.servlet.request.MockMvcRequestBuilders;\nimport org.springframework.test.web.servlet.result.MockMvcResultMatchers;\n\nimport com.fasterxml.jackson.databind.ObjectMapper;\nimport com.labprog.egressos.model.Egresso;\nimport com.labprog.egressos.model.dto.EgressoDTO;\nimport com.labprog.egressos.service.EgressoService;\n\n@ExtendWith(SpringExtension.class)\n@WebMvcTest (controllers =  EgressoController.class)\n@AutoConfigureMockMvc\npublic class EgressoControllerTest {\n    \n    static final String API = &quot;/api/egressos&quot;;\n\n    @Autowired\n    MockMvc mvc;\n\n    @MockBean\n    EgressoService service;\n\n    @Test\n    public void deveSalvarEgresso() throws Exception {\n        // Cenário\n        EgressoDTO dto = EgressoDTO.builder()\n                .nome(&quot;Nome&quot;)\n                .email(&quot;email@e.com&quot;)\n                .cpf(&quot;123456789&quot;)\n                .resumo(&quot;Resumo&quot;)\n                .urlFoto(&quot;urlFoto&quot;)\n                .build();\n\n        Egresso egresso = Egresso.builder()\n                .id(1l)\n                .nome(dto.getNome())\n                .email(dto.getEmail())\n                .cpf(dto.getCpf())\n                .resumo(dto.getResumo())\n                .urlFoto(dto.getUrlFoto())\n                .build();\n\n        Mockito.when(service.salvar(\n            Mockito.any(Egresso.class))).thenReturn(egresso);\n\n        String json = new ObjectMapper().writeValueAsString(dto);\n\n        // Ação\n        MockHttpServletRequestBuilder request = \n            MockMvcRequestBuilders.post(API + &quot;/salvar&quot;)\n            .accept(MediaType.APPLICATION_JSON)\n            .contentType(MediaType.APPLICATION_JSON)\n            .content(json);\n\n        // Verificação\n        mvc.perform(request)\n            .andExpect(MockMvcResultMatchers.status().isCreated());\n    }\n\n}\n</code></pre>\n<p>And my pom.xml:</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n    xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n    &lt;parent&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n        &lt;version&gt;2.6.7&lt;/version&gt;\n        &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\n    &lt;/parent&gt;\n    &lt;groupId&gt;com.labprog&lt;/groupId&gt;\n    &lt;artifactId&gt;egressos&lt;/artifactId&gt;\n    &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n    &lt;name&gt;egressos&lt;/name&gt;\n    &lt;description&gt;Demo project for Spring Boot&lt;/description&gt;\n    &lt;properties&gt;\n        &lt;java.version&gt;18&lt;/java.version&gt;\n    &lt;/properties&gt;\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-web-services&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.postgresql&lt;/groupId&gt;\n            &lt;artifactId&gt;postgresql&lt;/artifactId&gt;\n            &lt;scope&gt;runtime&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\n            &lt;artifactId&gt;lombok&lt;/artifactId&gt;\n            &lt;optional&gt;true&lt;/optional&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n\n    &lt;build&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n                &lt;configuration&gt;\n                    &lt;excludes&gt;\n                        &lt;exclude&gt;\n                            &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\n                            &lt;artifactId&gt;lombok&lt;/artifactId&gt;\n                        &lt;/exclude&gt;\n                    &lt;/excludes&gt;\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n\n&lt;/project&gt;\n\n</code></pre>\n<p>I need the ContatoService instance for my atualizarContatos() method (update Egresso's list of Contact). It's odd that the autowired EgressoService works as supposed, and if I run the test commenting contatoService and atualizarContatos(), the test works. Whatever other service class I include as @Autowired in my controller, it yields that error.</p>\n<p>It confuses me, as if I run the application and try to use the endpoint for atualizarContatos() in Insomnia, it works just fine:\n<a href=\"https://i.stack.imgur.com/lwueK.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/lwueK.png\" alt=\"Insomnia using the endpoint atualizarContatos()\" /></a></p>\n<p>My services and models are covered with tests already. Why can't the controller test inject the dependencies correctly?</p>\n<p>I'm working in Ubuntu 20.04.4 LTS with Java 18.</p>\n"},{"tags":["java","android","gradle","android-library","aar"],"comments":[{"owner":{"account_id":39846,"reputation":991133,"user_id":115145,"accept_rate":84,"display_name":"CommonsWare"},"score":1,"creation_date":1396381818,"post_id":22795455,"comment_id":34759479,"body_markdown":"Have you examined the output of running **`gradle dependencies`** for your app?","body":"Have you examined the output of running <b><code>gradle dependencies</code></b> for your app?"},{"owner":{"account_id":39846,"reputation":991133,"user_id":115145,"accept_rate":84,"display_name":"CommonsWare"},"score":0,"creation_date":1396381943,"post_id":22795455,"comment_id":34759550,"body_markdown":"And are you really sure that you want the `provided` keyword there? According to Xav, [such dependencies are not packaged in the APK](https://groups.google.com/d/msg/adt-dev/WIjtHjgoGwA/h1gS9J5xLUAJ), and I would think that you would want those to be packaged in the APK.","body":"And are you really sure that you want the <code>provided</code> keyword there? According to Xav, <a href=\"https://groups.google.com/d/msg/adt-dev/WIjtHjgoGwA/h1gS9J5xLUAJ\" rel=\"nofollow noreferrer\">such dependencies are not packaged in the APK</a>, and I would think that you would want those to be packaged in the APK."},{"owner":{"account_id":988815,"reputation":4491,"user_id":1006625,"accept_rate":64,"display_name":"mkorszun"},"score":0,"creation_date":1396382571,"post_id":22795455,"comment_id":34759910,"body_markdown":"@CommonsWare `gradle dependencies` for my android lib: default - Configuration for default artifacts.\n+--- com.google.code.gson:gson:2.2.4\n+--- com.bugsense.trace:bugsense:3.6\n\\--- commons-net:commons-net:3.3","body":"@CommonsWare <code>gradle dependencies</code> for my android lib: default - Configuration for default artifacts. +--- com.google.code.gson:gson:2.2.4 +--- com.bugsense.trace:bugsense:3.6 \\--- commons-net:commons-net:3.3"},{"owner":{"account_id":39846,"reputation":991133,"user_id":115145,"accept_rate":84,"display_name":"CommonsWare"},"score":0,"creation_date":1396382723,"post_id":22795455,"comment_id":34759997,"body_markdown":"I am not aware that local AAR files like that work -- I think they need to go into a local Maven repository and be referenced that way. But I really was referring to running **`gradle dependencies`** for the *app*, not for a library that somebody decided to name &quot;app&quot;.","body":"I am not aware that local AAR files like that work -- I think they need to go into a local Maven repository and be referenced that way. But I really was referring to running <b><code>gradle dependencies</code></b> for the <i>app</i>, not for a library that somebody decided to name &quot;app&quot;."},{"owner":{"account_id":988815,"reputation":4491,"user_id":1006625,"accept_rate":64,"display_name":"mkorszun"},"score":0,"creation_date":1396387573,"post_id":22795455,"comment_id":34762658,"body_markdown":"@CommonsWare please see updated question. I have installed library to local maven repo but this does not help.","body":"@CommonsWare please see updated question. I have installed library to local maven repo but this does not help."},{"owner":{"account_id":31011,"reputation":122006,"user_id":84889,"display_name":"Peter Niederwieser"},"score":0,"creation_date":1396390199,"post_id":22795455,"comment_id":34763946,"body_markdown":"`@aar` means &quot;just the aar artifact, and no dependencies&quot;.","body":"<code>@aar</code> means &quot;just the aar artifact, and no dependencies&quot;."},{"owner":{"account_id":988815,"reputation":4491,"user_id":1006625,"accept_rate":64,"display_name":"mkorszun"},"score":0,"creation_date":1396428657,"post_id":22795455,"comment_id":34778411,"body_markdown":"@PeterNiederwieser so what would be the alternative? Bundle all dependencies in separate jar and provide them together with aar?","body":"@PeterNiederwieser so what would be the alternative? Bundle all dependencies in separate jar and provide them together with aar?"},{"owner":{"account_id":31011,"reputation":122006,"user_id":84889,"display_name":"Peter Niederwieser"},"score":0,"creation_date":1396429911,"post_id":22795455,"comment_id":34779350,"body_markdown":"I&#39;d expect that omitting `@aar` would solve the problem.","body":"I&#39;d expect that omitting <code>@aar</code> would solve the problem."},{"owner":{"account_id":988815,"reputation":4491,"user_id":1006625,"accept_rate":64,"display_name":"mkorszun"},"score":0,"creation_date":1396432542,"post_id":22795455,"comment_id":34781312,"body_markdown":"@PeterNiederwieser but my library provides resources as well. How to solve this issue?","body":"@PeterNiederwieser but my library provides resources as well. How to solve this issue?"},{"owner":{"account_id":1339515,"reputation":23845,"user_id":1281501,"accept_rate":58,"display_name":"lostintranslation"},"score":0,"creation_date":1416882052,"post_id":22795455,"comment_id":42737671,"body_markdown":"I am having the same issue.  Never used @aar in compile line. When I build my final APK I pull aar from maven repo, but none of its deps are pulled into the final project, causes noclassdef errors.","body":"I am having the same issue.  Never used @aar in compile line. When I build my final APK I pull aar from maven repo, but none of its deps are pulled into the final project, causes noclassdef errors."},{"owner":{"account_id":3583415,"reputation":2786,"user_id":2991069,"accept_rate":57,"display_name":"skyshine"},"score":1,"creation_date":1518791517,"post_id":22795455,"comment_id":84661661,"body_markdown":"where should i place pom file in aar added app","body":"where should i place pom file in aar added app"}],"answers":[{"tags":[],"owner":{"account_id":988815,"reputation":4491,"user_id":1006625,"accept_rate":64,"display_name":"mkorszun"},"down_vote_count":1,"up_vote_count":92,"is_accepted":true,"score":91,"last_activity_date":1396445937,"creation_date":1396445937,"answer_id":22813277,"question_id":22795455,"body_markdown":"I have solved my problem by setting `transitive` attribute for my aar dependency:\r\n\r\n    compile (&#39;com.somepackage:LIBRARY_NAME:1.0.0@aar&#39;){\r\n        transitive=true\r\n    }\r\n","title":"Transitive dependencies not resolved for aar library using gradle","body":"<p>I have solved my problem by setting <code>transitive</code> attribute for my aar dependency:</p>\n\n<pre><code>compile ('com.somepackage:LIBRARY_NAME:1.0.0@aar'){\n    transitive=true\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3686790,"reputation":239,"user_id":3070402,"display_name":"user3070402"},"down_vote_count":1,"up_vote_count":24,"is_accepted":false,"score":23,"last_activity_date":1488222970,"creation_date":1430901011,"answer_id":30071402,"question_id":22795455,"body_markdown":"you should not use &quot;@aar&quot;, if use &quot;@&quot; is become &quot;[Artifact only notation][1]&quot;, if you want to use &quot;@&quot; and want have dependence transitive, you should add &quot;transitive=true&quot;\r\n\r\n\r\n  [1]: https://docs.gradle.org/current/userguide/dependency_management.html#ssub:artifact_dependencies","title":"Transitive dependencies not resolved for aar library using gradle","body":"<p>you should not use \"@aar\", if use \"@\" is become \"<a href=\"https://docs.gradle.org/current/userguide/dependency_management.html#ssub:artifact_dependencies\" rel=\"noreferrer\">Artifact only notation</a>\", if you want to use \"@\" and want have dependence transitive, you should add \"transitive=true\"</p>\n"},{"tags":[],"owner":{"account_id":1347462,"reputation":2094,"user_id":1287922,"accept_rate":67,"display_name":"suhas_sm"},"down_vote_count":1,"up_vote_count":15,"is_accepted":false,"score":14,"last_activity_date":1441303905,"creation_date":1441303905,"answer_id":32382708,"question_id":22795455,"body_markdown":"Try this if you are using aar locally:\r\n\r\n    compile(project(:your-library-name)) {\r\n        transitive=true\r\n    }","title":"Transitive dependencies not resolved for aar library using gradle","body":"<p>Try this if you are using aar locally:</p>\n\n<pre><code>compile(project(:your-library-name)) {\n    transitive=true\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6438302,"reputation":403,"user_id":4989040,"display_name":"Merc"},"down_vote_count":2,"up_vote_count":0,"is_accepted":false,"score":-2,"last_activity_date":1541000293,"creation_date":1541000293,"answer_id":53087152,"question_id":22795455,"body_markdown":"Simply adding @aar at the end of the dependency is what worked for me.\r\n\r\n    dependencies {\r\n        implementation &#39;org.videolan.vlc:libvlc:3.0.13@aar&#39;\r\n    }","title":"Transitive dependencies not resolved for aar library using gradle","body":"<p>Simply adding @aar at the end of the dependency is what worked for me.</p>\n\n<pre><code>dependencies {\n    implementation 'org.videolan.vlc:libvlc:3.0.13@aar'\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2653964,"reputation":909,"user_id":2295051,"display_name":"Sergey Dryganets"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1550607338,"creation_date":1550607338,"answer_id":54774261,"question_id":22795455,"body_markdown":"For me complete publishing solution looks like this:\r\n\r\n```\r\n\r\napply plugin: &#39;com.github.dcendents.android-maven&#39;\r\n\r\ngroup = GROUP\r\nversion = VERSION\r\n\r\n// you could move it to env variable or property\r\ndef publishFlavorless = true\r\ndef firstTask = null\r\n\r\nandroid.libraryVariants.all { variant -&gt;\r\n\r\n    if (variant.name.toLowerCase().contains(&quot;debug&quot;)) {\r\n        // Workaround for https://github.com/gradle/gradle/issues/1487\r\n        if (publishFlavorless &amp;&amp; firstTask == null) {\r\n            def bundleTask = tasks[&quot;bundle${variant.name.capitalize()}Aar&quot;]\r\n            firstTask = bundleTask\r\n            artifacts {\r\n                archives(firstTask.archivePath) {\r\n                    builtBy firstTask\r\n                    name = project.name\r\n                }\r\n            }\r\n        }\r\n        return\r\n    }\r\n\r\n    def bundleTask = tasks[&quot;bundle${variant.name.capitalize()}Aar&quot;]\r\n\r\n    artifacts {\r\n        archives(bundleTask.archivePath) {\r\n            classifier variant.flavorName\r\n            builtBy bundleTask\r\n            name = project.name\r\n        }\r\n    }\r\n}\r\n\r\ninstall {\r\n    repositories.mavenInstaller {\r\n        // This generates POM.xml with proper parameters\r\n        pom.project {\r\n            name POM_NAME\r\n            artifactId POM_ARTIFACT_ID\r\n            // For aar it is equal to &#39;aar&#39; with jar transitive dependencies won&#39;t work\r\n            packaging POM_PACKAGING\r\n            description POM_DESCRIPTION\r\n        }\r\n    }\r\n}\r\n```\r\n\r\nThe `transitive = true` block is required as well ...","title":"Transitive dependencies not resolved for aar library using gradle","body":"<p>For me complete publishing solution looks like this:</p>\n\n<pre><code>\napply plugin: 'com.github.dcendents.android-maven'\n\ngroup = GROUP\nversion = VERSION\n\n// you could move it to env variable or property\ndef publishFlavorless = true\ndef firstTask = null\n\nandroid.libraryVariants.all { variant -&gt;\n\n    if (variant.name.toLowerCase().contains(\"debug\")) {\n        // Workaround for https://github.com/gradle/gradle/issues/1487\n        if (publishFlavorless &amp;&amp; firstTask == null) {\n            def bundleTask = tasks[\"bundle${variant.name.capitalize()}Aar\"]\n            firstTask = bundleTask\n            artifacts {\n                archives(firstTask.archivePath) {\n                    builtBy firstTask\n                    name = project.name\n                }\n            }\n        }\n        return\n    }\n\n    def bundleTask = tasks[\"bundle${variant.name.capitalize()}Aar\"]\n\n    artifacts {\n        archives(bundleTask.archivePath) {\n            classifier variant.flavorName\n            builtBy bundleTask\n            name = project.name\n        }\n    }\n}\n\ninstall {\n    repositories.mavenInstaller {\n        // This generates POM.xml with proper parameters\n        pom.project {\n            name POM_NAME\n            artifactId POM_ARTIFACT_ID\n            // For aar it is equal to 'aar' with jar transitive dependencies won't work\n            packaging POM_PACKAGING\n            description POM_DESCRIPTION\n        }\n    }\n}\n</code></pre>\n\n<p>The <code>transitive = true</code> block is required as well ...</p>\n"},{"tags":[],"owner":{"account_id":3788825,"reputation":23829,"user_id":3145960,"accept_rate":100,"display_name":"Reaz Murshed"},"down_vote_count":0,"up_vote_count":10,"is_accepted":false,"score":10,"last_activity_date":1572539982,"creation_date":1572539982,"answer_id":58647791,"question_id":22795455,"body_markdown":"I was having a similar problem and felt I could share the steps of solving the problem. \r\n\r\nThe basic idea of not being able to use the transitive dependencies while you are publishing your own `aar` is actually not having the `.pom` file generated with the expected transitive dependencies. \r\n\r\nI was using `&#39;maven-publish&#39;` plugin for my android `aar` dependency to publish it in my own private maven repository. The transitive dependencies were not resolved when my other projects were adding my `aar` dependency in their `build.gradle`. Hence here what I did to modify the `.pom` file while publishing my `aar`. \r\n\r\nAn important thing to note here that, the dependencies which you want to have the transitive behavior should be imported using the `api` in your library project&#39;s `build.gradle` file like the following.\r\n\r\n    dependencies {\r\n        implementation fileTree(dir: &#39;libs&#39;, include: [&#39;*.jar&#39;])\r\n        api &#39;com.android.volley:volley:1.0.0&#39;\r\n        api &quot;com.google.code.gson:gson:$globalGsonVersion&quot;\r\n    }\r\n\r\nNow as I said earlier, I was using `maven-publish` plugin to publish the `aar` dependency and hence my publishing task in the gradle looks like the following. \r\n\r\n    publishing {\r\n        publications {\r\n            mavenAar(MavenPublication) {\r\n                from components.android\r\n            }\r\n    \r\n            mavenJava(MavenPublication) {\r\n                pom.withXml {\r\n                    def dependenciesNode = asNode().appendNode(&#39;dependencies&#39;)\r\n                    // Iterate over the api dependencies (we don&#39;t want the test ones), adding a &lt;dependency&gt; node for each\r\n                    configurations.api.allDependencies.each {\r\n                        def dependencyNode = dependenciesNode.appendNode(&#39;dependency&#39;)\r\n                        dependencyNode.appendNode(&#39;groupId&#39;, it.group)\r\n                        dependencyNode.appendNode(&#39;artifactId&#39;, it.name)\r\n                        dependencyNode.appendNode(&#39;version&#39;, it.version)\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    \r\n        repositories {\r\n            maven {\r\n                // Your repository information goes here\r\n            }\r\n        }\r\n    }\r\n\r\nHence, I used another `mavenJava` task to publish the `.pom` file in my private maven repo so that when the `aar` file is added as a dependency to some other module, it gets the `.pom` information and download the transitive dependency. \r\n\r\nTo complete the answer, this is how you should add the dependency in the `build.gradle` file for your own published `aar` to me imported. \r\n\r\n    api(&#39;com.example.masudias:my_lib:1.0.0@aar&#39;) {\r\n        transitive = true\r\n    }","title":"Transitive dependencies not resolved for aar library using gradle","body":"<p>I was having a similar problem and felt I could share the steps of solving the problem. </p>\n\n<p>The basic idea of not being able to use the transitive dependencies while you are publishing your own <code>aar</code> is actually not having the <code>.pom</code> file generated with the expected transitive dependencies. </p>\n\n<p>I was using <code>'maven-publish'</code> plugin for my android <code>aar</code> dependency to publish it in my own private maven repository. The transitive dependencies were not resolved when my other projects were adding my <code>aar</code> dependency in their <code>build.gradle</code>. Hence here what I did to modify the <code>.pom</code> file while publishing my <code>aar</code>. </p>\n\n<p>An important thing to note here that, the dependencies which you want to have the transitive behavior should be imported using the <code>api</code> in your library project's <code>build.gradle</code> file like the following.</p>\n\n<pre><code>dependencies {\n    implementation fileTree(dir: 'libs', include: ['*.jar'])\n    api 'com.android.volley:volley:1.0.0'\n    api \"com.google.code.gson:gson:$globalGsonVersion\"\n}\n</code></pre>\n\n<p>Now as I said earlier, I was using <code>maven-publish</code> plugin to publish the <code>aar</code> dependency and hence my publishing task in the gradle looks like the following. </p>\n\n<pre><code>publishing {\n    publications {\n        mavenAar(MavenPublication) {\n            from components.android\n        }\n\n        mavenJava(MavenPublication) {\n            pom.withXml {\n                def dependenciesNode = asNode().appendNode('dependencies')\n                // Iterate over the api dependencies (we don't want the test ones), adding a &lt;dependency&gt; node for each\n                configurations.api.allDependencies.each {\n                    def dependencyNode = dependenciesNode.appendNode('dependency')\n                    dependencyNode.appendNode('groupId', it.group)\n                    dependencyNode.appendNode('artifactId', it.name)\n                    dependencyNode.appendNode('version', it.version)\n                }\n            }\n        }\n    }\n\n    repositories {\n        maven {\n            // Your repository information goes here\n        }\n    }\n}\n</code></pre>\n\n<p>Hence, I used another <code>mavenJava</code> task to publish the <code>.pom</code> file in my private maven repo so that when the <code>aar</code> file is added as a dependency to some other module, it gets the <code>.pom</code> information and download the transitive dependency. </p>\n\n<p>To complete the answer, this is how you should add the dependency in the <code>build.gradle</code> file for your own published <code>aar</code> to me imported. </p>\n\n<pre><code>api('com.example.masudias:my_lib:1.0.0@aar') {\n    transitive = true\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6115775,"reputation":30435,"user_id":4770877,"display_name":"yoAlex5"},"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1617952455,"creation_date":1586776404,"answer_id":61186642,"question_id":22795455,"body_markdown":"**Transitive dependency**\r\n\r\n`transitive` means that the consumer(e.g. app) includes a producer and all producer&#39;s dependencies(e.g. libraries). It increase build time and can create some issues with dependency versions\r\n\r\nBy default, Gradle dependency has `transitive = true`\r\n```\r\napi (&#39;com.package:library:0.0.1&#39;)\r\n//the same\r\napi (&#39;com.package:library:0.0.1&#39;) {\r\n    transitive = true\r\n}\r\n```\r\n\r\nWhen you use `@artifact notation` it has `transitive = false`\r\n```\r\napi (&#39;com.package:library:0.0.1@aar&#39;)\r\n//the same\r\napi (&#39;com.package:library:0.0.1@aar&#39;) {\r\n    transitive = false\r\n}\r\n```\r\n","title":"Transitive dependencies not resolved for aar library using gradle","body":"<p><strong>Transitive dependency</strong></p>\n<p><code>transitive</code> means that the consumer(e.g. app) includes a producer and all producer's dependencies(e.g. libraries). It increase build time and can create some issues with dependency versions</p>\n<p>By default, Gradle dependency has <code>transitive = true</code></p>\n<pre><code>api ('com.package:library:0.0.1')\n//the same\napi ('com.package:library:0.0.1') {\n    transitive = true\n}\n</code></pre>\n<p>When you use <code>@artifact notation</code> it has <code>transitive = false</code></p>\n<pre><code>api ('com.package:library:0.0.1@aar')\n//the same\napi ('com.package:library:0.0.1@aar') {\n    transitive = false\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":7302782,"reputation":158,"user_id":5564845,"display_name":"Saurabh"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1661445003,"creation_date":1661445003,"answer_id":73490920,"question_id":22795455,"body_markdown":"AAR file doesn&#39;t contain transitive dependencies. So even if use **api** instead of **implementation** it wont work.\r\n\r\nIn our team we had developed a library to use in our applications and we wanted it to be for internal use only. Earlier we used to include whole module that seems to work. Later we decided to move to aar file but we were also facing same issue of **classpath not found**. After some research we came to know that we can also use local maven repo. We decided to use that.\r\n\r\nHere is step by step process\r\n\r\n**Publishing repo**\r\n\r\n1.In your Library&#39;s root build.gradle file you need to include\r\n\r\n    id &#39;com.github.dcendents.android-maven&#39; version &#39;2.0&#39; apply false\r\n\r\n2.In you library&#39;s module level build.gradle file you need to add \r\n\r\na) In plugins\r\n\r\n    id &#39;maven-publish&#39;\r\nb) At bottom of gradle file add\r\n\r\n    publishing {\r\n        publications {\r\n            release(MavenPublication) {\r\n                groupId = &#39;com.demo.android&#39;\r\n                artifactId = &#39;qrcodescanner&#39;\r\n                version = &#39;1.0.0&#39;\r\n    \r\n                afterEvaluate {\r\n                    from components.release\r\n                }\r\n            }\r\n        }\r\n        repositories {\r\n            maven {\r\n                name = &quot;qrcodescanner&quot;\r\n                url = &quot;${project.buildDir}/repo&quot;\r\n    \r\n            }\r\n        }\r\n    }\r\n\r\n3.Depends on the name you have given a gradle tasks will be generated you can check using **gradlew tasks** or by using gradle window at top right corner in android studio, Our was\r\n\r\n    publishReleasePublicationToQrcodescannerRepository\r\n\r\n4.Run it and repo will be generated in given path\r\n\r\n    gradlew publishReleasePublicationToQrcodescannerRepository\r\n5. Final step you need to publish it to maven local using\r\n\r\n    `gradlew publishToMavenLocal`\r\n\r\nif it doesn&#39;t work you can try gradlew clean and gradlew build before executing it.\r\n\r\n**Using local repo**\r\n\r\n1.You need to add **mavenLocal()** in root level build.gradle file of your project you wanted to use it in like this before other central repos\r\n\r\n    allprojects {\r\n        repositories {\r\n            mavenLocal()\r\n            google()\r\n            jcenter()\r\n            maven { url &quot;https://jitpack.io&quot; }\r\n            mavenCentral()\r\n        }\r\n    }\r\n\r\n2. Now you need to include your dependency in the project like we do with other dependencies as well\r\n\r\n`implementation &#39;com.demo.android:qrcodescanner:1.0.0&#39;`\r\nkeep in mind format should **groupdId:artifactId:version** \r\n\r\nThat&#39;s it.\r\n\r\nReferences :\r\n\r\n[Publish Library][1]\r\n\r\n\r\n[Local Maven][2]\r\n\r\n\r\n  [1]: https://developer.android.com/studio/publish-library\r\n  [2]: https://docs.gradle.org/current/userguide/dependency_management.html","title":"Transitive dependencies not resolved for aar library using gradle","body":"<p>AAR file doesn't contain transitive dependencies. So even if use <strong>api</strong> instead of <strong>implementation</strong> it wont work.</p>\n<p>In our team we had developed a library to use in our applications and we wanted it to be for internal use only. Earlier we used to include whole module that seems to work. Later we decided to move to aar file but we were also facing same issue of <strong>classpath not found</strong>. After some research we came to know that we can also use local maven repo. We decided to use that.</p>\n<p>Here is step by step process</p>\n<p><strong>Publishing repo</strong></p>\n<p>1.In your Library's root build.gradle file you need to include</p>\n<pre><code>id 'com.github.dcendents.android-maven' version '2.0' apply false\n</code></pre>\n<p>2.In you library's module level build.gradle file you need to add</p>\n<p>a) In plugins</p>\n<pre><code>id 'maven-publish'\n</code></pre>\n<p>b) At bottom of gradle file add</p>\n<pre><code>publishing {\n    publications {\n        release(MavenPublication) {\n            groupId = 'com.demo.android'\n            artifactId = 'qrcodescanner'\n            version = '1.0.0'\n\n            afterEvaluate {\n                from components.release\n            }\n        }\n    }\n    repositories {\n        maven {\n            name = &quot;qrcodescanner&quot;\n            url = &quot;${project.buildDir}/repo&quot;\n\n        }\n    }\n}\n</code></pre>\n<p>3.Depends on the name you have given a gradle tasks will be generated you can check using <strong>gradlew tasks</strong> or by using gradle window at top right corner in android studio, Our was</p>\n<pre><code>publishReleasePublicationToQrcodescannerRepository\n</code></pre>\n<p>4.Run it and repo will be generated in given path</p>\n<pre><code>gradlew publishReleasePublicationToQrcodescannerRepository\n</code></pre>\n<ol start=\"5\">\n<li><p>Final step you need to publish it to maven local using</p>\n<p><code>gradlew publishToMavenLocal</code></p>\n</li>\n</ol>\n<p>if it doesn't work you can try gradlew clean and gradlew build before executing it.</p>\n<p><strong>Using local repo</strong></p>\n<p>1.You need to add <strong>mavenLocal()</strong> in root level build.gradle file of your project you wanted to use it in like this before other central repos</p>\n<pre><code>allprojects {\n    repositories {\n        mavenLocal()\n        google()\n        jcenter()\n        maven { url &quot;https://jitpack.io&quot; }\n        mavenCentral()\n    }\n}\n</code></pre>\n<ol start=\"2\">\n<li>Now you need to include your dependency in the project like we do with other dependencies as well</li>\n</ol>\n<p><code>implementation 'com.demo.android:qrcodescanner:1.0.0'</code>\nkeep in mind format should <strong>groupdId:artifactId:version</strong></p>\n<p>That's it.</p>\n<p>References :</p>\n<p><a href=\"https://developer.android.com/studio/publish-library\" rel=\"nofollow noreferrer\">Publish Library</a></p>\n<p><a href=\"https://docs.gradle.org/current/userguide/dependency_management.html\" rel=\"nofollow noreferrer\">Local Maven</a></p>\n"}],"owner":{"account_id":988815,"reputation":4491,"user_id":1006625,"accept_rate":64,"display_name":"mkorszun"},"comment_count":11,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":54995,"favorite_count":0,"down_vote_count":0,"up_vote_count":105,"accepted_answer_id":22813277,"answer_count":8,"score":105,"last_activity_date":1661445003,"creation_date":1396381529,"question_id":22795455,"body_markdown":"I have investigated a while and probably saw most popular answers here related to **aar** and **transitive dependencies** but somehow it is still not clear for me how to make this working.\r\n\r\nSo:\r\n\r\nI have android library with given gradle config:\r\n\r\n    apply plugin: &#39;android-library&#39;\r\n    apply plugin: &#39;android-maven&#39;\r\n    \r\n    version = &quot;1.0.0&quot;\r\n    group = &quot;com.somepackage&quot;\r\n    \r\n    buildscript {\r\n        repositories {\r\n            mavenCentral()\r\n            mavenLocal()\r\n        }\r\n    \r\n        dependencies {\r\n            classpath &#39;com.github.dcendents:android-maven-plugin:1.0&#39;\r\n        }\r\n    }\r\n    \r\n    android {\r\n        compileSdkVersion 19\r\n        buildToolsVersion &#39;19.0.3&#39;\r\n    \r\n        defaultConfig {\r\n            minSdkVersion 10\r\n        }\r\n    }\r\n    \r\n    repositories {\r\n        maven { url &#39;http://www.bugsense.com/gradle/&#39; }\r\n    }\r\n    \r\n    dependencies {\r\n        provided &#39;com.google.android.gms:play-services:+&#39;\r\n        provided &#39;com.android.support:appcompat-v7:+&#39;\r\n        compile &#39;com.google.code.gson:gson:2.2.4&#39;\r\n        compile &#39;com.bugsense.trace:bugsense:3.6&#39;\r\n        compile &#39;commons-net:commons-net:3.3&#39;\r\n    }\r\n\r\nThen I am deploying it to local maven repo with `gradle install`. POM file of the deployed library looks like this:\r\n                                                                                              \r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;project xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot; xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;\r\n        xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;&gt;\r\n      &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n      &lt;groupId&gt;com.sprezzat&lt;/groupId&gt;\r\n      &lt;artifactId&gt;app&lt;/artifactId&gt;\r\n      &lt;version&gt;1.0.0&lt;/version&gt;\r\n      &lt;packaging&gt;aar&lt;/packaging&gt;\r\n      &lt;dependencies&gt;\r\n        &lt;dependency&gt;\r\n          &lt;groupId&gt;com.bugsense.trace&lt;/groupId&gt;\r\n          &lt;artifactId&gt;bugsense&lt;/artifactId&gt;\r\n          &lt;version&gt;3.6&lt;/version&gt;\r\n          &lt;scope&gt;compile&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n          &lt;groupId&gt;commons-net&lt;/groupId&gt;\r\n          &lt;artifactId&gt;commons-net&lt;/artifactId&gt;\r\n          &lt;version&gt;3.3&lt;/version&gt;\r\n          &lt;scope&gt;compile&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n          &lt;groupId&gt;com.google.code.gson&lt;/groupId&gt;\r\n          &lt;artifactId&gt;gson&lt;/artifactId&gt;\r\n          &lt;version&gt;2.2.4&lt;/version&gt;\r\n          &lt;scope&gt;compile&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n      &lt;/dependencies&gt;\r\n    &lt;/project&gt;\r\n\r\nAnd finally gradle config of my android application using above library as a dependency:\r\n\r\n    buildscript {\r\n        repositories {\r\n            mavenCentral()\r\n        }\r\n        dependencies {\r\n            classpath &#39;com.android.tools.build:gradle:0.9.+&#39;\r\n        }\r\n    }\r\n    apply plugin: &#39;android&#39;\r\n    \r\n    repositories {\r\n        mavenCentral()\r\n        mavenLocal()\r\n    }\r\n    \r\n    android {\r\n        compileSdkVersion 15\r\n        buildToolsVersion &quot;19.0.2&quot;\r\n    \r\n        defaultConfig {\r\n            minSdkVersion 10\r\n            targetSdkVersion 18\r\n        }\r\n    }\r\n    \r\n    dependencies {\r\n        compile &#39;com.google.android.gms:play-services:+&#39;\r\n        compile &#39;com.android.support:appcompat-v7:+&#39;\r\n        compile &#39;com.somepackage:LIBRARY_NAME:1.0.0@aar&#39;\r\n    }\r\n\r\nAnd after deploying application on phone I am getting `NoClassDefFoundError` for classes belonging to compile dependencies of my android library. \r\n\r\nInspecting my android application dependencies using `gradle dependencies`:\r\n\r\n    apk - Classpath packaged with the compiled main classes.\r\n    +--- com.google.android.gms:play-services:+ -&gt; 4.3.23\r\n    |    \\--- com.android.support:support-v4:19.0.1 -&gt; 19.1.0\r\n    +--- com.android.support:appcompat-v7:+ -&gt; 19.1.0\r\n    |    \\--- com.android.support:support-v4:19.1.0\r\n    \\--- com.somepackage:LIBRARY_NAME:1.0.0\r\n\r\nAccording to above tree, all transitive dependencies are not detected. Where is the problem and how should it be done correctly?","title":"Transitive dependencies not resolved for aar library using gradle","body":"<p>I have investigated a while and probably saw most popular answers here related to <strong>aar</strong> and <strong>transitive dependencies</strong> but somehow it is still not clear for me how to make this working.</p>\n\n<p>So:</p>\n\n<p>I have android library with given gradle config:</p>\n\n<pre><code>apply plugin: 'android-library'\napply plugin: 'android-maven'\n\nversion = \"1.0.0\"\ngroup = \"com.somepackage\"\n\nbuildscript {\n    repositories {\n        mavenCentral()\n        mavenLocal()\n    }\n\n    dependencies {\n        classpath 'com.github.dcendents:android-maven-plugin:1.0'\n    }\n}\n\nandroid {\n    compileSdkVersion 19\n    buildToolsVersion '19.0.3'\n\n    defaultConfig {\n        minSdkVersion 10\n    }\n}\n\nrepositories {\n    maven { url 'http://www.bugsense.com/gradle/' }\n}\n\ndependencies {\n    provided 'com.google.android.gms:play-services:+'\n    provided 'com.android.support:appcompat-v7:+'\n    compile 'com.google.code.gson:gson:2.2.4'\n    compile 'com.bugsense.trace:bugsense:3.6'\n    compile 'commons-net:commons-net:3.3'\n}\n</code></pre>\n\n<p>Then I am deploying it to local maven repo with <code>gradle install</code>. POM file of the deployed library looks like this:</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;project xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd\" xmlns=\"http://maven.apache.org/POM/4.0.0\"\n    xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"&gt;\n  &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n  &lt;groupId&gt;com.sprezzat&lt;/groupId&gt;\n  &lt;artifactId&gt;app&lt;/artifactId&gt;\n  &lt;version&gt;1.0.0&lt;/version&gt;\n  &lt;packaging&gt;aar&lt;/packaging&gt;\n  &lt;dependencies&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;com.bugsense.trace&lt;/groupId&gt;\n      &lt;artifactId&gt;bugsense&lt;/artifactId&gt;\n      &lt;version&gt;3.6&lt;/version&gt;\n      &lt;scope&gt;compile&lt;/scope&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;commons-net&lt;/groupId&gt;\n      &lt;artifactId&gt;commons-net&lt;/artifactId&gt;\n      &lt;version&gt;3.3&lt;/version&gt;\n      &lt;scope&gt;compile&lt;/scope&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;com.google.code.gson&lt;/groupId&gt;\n      &lt;artifactId&gt;gson&lt;/artifactId&gt;\n      &lt;version&gt;2.2.4&lt;/version&gt;\n      &lt;scope&gt;compile&lt;/scope&gt;\n    &lt;/dependency&gt;\n  &lt;/dependencies&gt;\n&lt;/project&gt;\n</code></pre>\n\n<p>And finally gradle config of my android application using above library as a dependency:</p>\n\n<pre><code>buildscript {\n    repositories {\n        mavenCentral()\n    }\n    dependencies {\n        classpath 'com.android.tools.build:gradle:0.9.+'\n    }\n}\napply plugin: 'android'\n\nrepositories {\n    mavenCentral()\n    mavenLocal()\n}\n\nandroid {\n    compileSdkVersion 15\n    buildToolsVersion \"19.0.2\"\n\n    defaultConfig {\n        minSdkVersion 10\n        targetSdkVersion 18\n    }\n}\n\ndependencies {\n    compile 'com.google.android.gms:play-services:+'\n    compile 'com.android.support:appcompat-v7:+'\n    compile 'com.somepackage:LIBRARY_NAME:1.0.0@aar'\n}\n</code></pre>\n\n<p>And after deploying application on phone I am getting <code>NoClassDefFoundError</code> for classes belonging to compile dependencies of my android library. </p>\n\n<p>Inspecting my android application dependencies using <code>gradle dependencies</code>:</p>\n\n<pre><code>apk - Classpath packaged with the compiled main classes.\n+--- com.google.android.gms:play-services:+ -&gt; 4.3.23\n|    \\--- com.android.support:support-v4:19.0.1 -&gt; 19.1.0\n+--- com.android.support:appcompat-v7:+ -&gt; 19.1.0\n|    \\--- com.android.support:support-v4:19.1.0\n\\--- com.somepackage:LIBRARY_NAME:1.0.0\n</code></pre>\n\n<p>According to above tree, all transitive dependencies are not detected. Where is the problem and how should it be done correctly?</p>\n"},{"tags":["java"],"answers":[{"tags":[],"owner":{"account_id":322981,"reputation":310745,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1661443960,"creation_date":1658097482,"answer_id":73015821,"question_id":73015259,"body_markdown":"# SDKMAN!\r\n\r\n[SDKMAN!][1] is your friend. This tool is a well-designed collection of shell scripts for:\r\n\r\n - Learning about what versions of Java are available from each of several vendors.\r\n - Downloading and installing those JDKs.\r\n - Tracking your currently installed JDKs.\r\n - Setting the current default JDK to use.\r\n\r\nThis tool works for Unix-oriented OSes. This includes macOS, Linux, Cygwin, Solaris, and FreeBSD. \r\n\r\nScripts are written in [*bash*][2], but run in [*zsh*][3] too. \r\n\r\nIf your favorite JDK vendor is not listed within SDKMAN!, ask the vendor to submit the metadata for their releases.\r\n\r\nBesides JDKs for Java, SDKMAN can also manage installs for [a few dozen other tools][4] including Gradle &amp; Maven, Spring Boot, and Apache Tomcat.\r\n\r\n# IntelliJ\r\n\r\nThe [IntelliJ][5] [IDE][6] recently gained a [feature to download and install a JDK][7] from various vendors, on your command.\r\n\r\n\r\n  [1]: https://sdkman.io/\r\n  [2]: https://en.m.wikipedia.org/wiki/Bash_(Unix_shell)\r\n  [3]: https://en.wikipedia.org/wiki/Z_shell\r\n  [4]: https://sdkman.io/sdks\r\n  [5]: https://en.wikipedia.org/wiki/IntelliJ_IDEA\r\n  [6]: https://en.wikipedia.org/wiki/Integrated_development_environment\r\n  [7]: https://www.jetbrains.com/idea/guide/tips/download-jdk/","title":"Can I manage sdks and jres in a central place, shared between aplications?","body":"<h1>SDKMAN!</h1>\n<p><a href=\"https://sdkman.io/\" rel=\"nofollow noreferrer\">SDKMAN!</a> is your friend. This tool is a well-designed collection of shell scripts for:</p>\n<ul>\n<li>Learning about what versions of Java are available from each of several vendors.</li>\n<li>Downloading and installing those JDKs.</li>\n<li>Tracking your currently installed JDKs.</li>\n<li>Setting the current default JDK to use.</li>\n</ul>\n<p>This tool works for Unix-oriented OSes. This includes macOS, Linux, Cygwin, Solaris, and FreeBSD.</p>\n<p>Scripts are written in <a href=\"https://en.m.wikipedia.org/wiki/Bash_(Unix_shell)\" rel=\"nofollow noreferrer\"><em>bash</em></a>, but run in <a href=\"https://en.wikipedia.org/wiki/Z_shell\" rel=\"nofollow noreferrer\"><em>zsh</em></a> too.</p>\n<p>If your favorite JDK vendor is not listed within SDKMAN!, ask the vendor to submit the metadata for their releases.</p>\n<p>Besides JDKs for Java, SDKMAN can also manage installs for <a href=\"https://sdkman.io/sdks\" rel=\"nofollow noreferrer\">a few dozen other tools</a> including Gradle &amp; Maven, Spring Boot, and Apache Tomcat.</p>\n<h1>IntelliJ</h1>\n<p>The <a href=\"https://en.wikipedia.org/wiki/IntelliJ_IDEA\" rel=\"nofollow noreferrer\">IntelliJ</a> <a href=\"https://en.wikipedia.org/wiki/Integrated_development_environment\" rel=\"nofollow noreferrer\">IDE</a> recently gained a <a href=\"https://www.jetbrains.com/idea/guide/tips/download-jdk/\" rel=\"nofollow noreferrer\">feature to download and install a JDK</a> from various vendors, on your command.</p>\n"}],"owner":{"account_id":2544073,"reputation":359,"user_id":2209264,"accept_rate":85,"display_name":"Antonio E."},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":46,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":73015821,"answer_count":1,"score":1,"last_activity_date":1661443960,"creation_date":1658090948,"question_id":73015259,"body_markdown":"As a java developer I use some software also written in java (Intellij, maven...) and also others (dbeaver) and I think my disk has repeated downloads of the java platform.\r\n\r\nIs it possible to set up a central, personally managed location for these artifacts?","title":"Can I manage sdks and jres in a central place, shared between aplications?","body":"<p>As a java developer I use some software also written in java (Intellij, maven...) and also others (dbeaver) and I think my disk has repeated downloads of the java platform.</p>\n<p>Is it possible to set up a central, personally managed location for these artifacts?</p>\n"},{"tags":["java","asynchronous","completable-future"],"comments":[{"owner":{"account_id":1491409,"reputation":6134,"user_id":1398418,"display_name":"Oleg"},"score":1,"creation_date":1559814812,"post_id":56474757,"comment_id":99540496,"body_markdown":"There is no need to use `@Asynchronous` and `CompletableFuture` it makes little sense. `thenAccept` is only executed after `fetchedData` is returned if it&#39;s empty you have some other problem.","body":"There is no need to use <code>@Asynchronous</code> and <code>CompletableFuture</code> it makes little sense. <code>thenAccept</code> is only executed after <code>fetchedData</code> is returned if it&#39;s empty you have some other problem."},{"owner":{"account_id":249169,"reputation":19388,"user_id":525036,"accept_rate":25,"display_name":"Didier L"},"score":1,"creation_date":1559822161,"post_id":56474757,"comment_id":99544392,"body_markdown":"If `fetchedData` is empty in the `thenAccept()`, it means the &quot;_Do some logic to fetch data_&quot; returned it empty. Could you provide a [mcve] to reproduce the problem?","body":"If <code>fetchedData</code> is empty in the <code>thenAccept()</code>, it means the &quot;<i>Do some logic to fetch data</i>&quot; returned it empty. Could you provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> to reproduce the problem?"}],"answers":[{"tags":[],"owner":{"account_id":3763662,"reputation":7765,"user_id":3127812,"accept_rate":0,"display_name":"Sambit"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1559814596,"creation_date":1559814596,"answer_id":56475030,"question_id":56474757,"body_markdown":"Jacek, I think @Asynchronous annotation is not required. You can use the pure form of completable future. I provide below the sample code based upon the code you have provided.\r\n\r\n\r\n    public String getInfoFromDB() {\r\n        try {\r\n          TimeUnit.SECONDS.sleep(10);\r\n        } catch (InterruptedException e) {\r\n          e.printStackTrace();\r\n        }\r\n        return &quot;Data from DB&quot;;\r\n      }\r\n    \r\n      public void updateCache(String dataFromDB) {\r\n        System.out.println(&quot;Data from D : &quot; + dataFromDB);\r\n        System.out.println(&quot;Doing some operations with data from DB&quot;);\r\n      }\r\n    \r\n      public void fetchData() {\r\n        CompletableFuture cf =\r\n            CompletableFuture.supplyAsync(() -&gt; getInfoFromDB())\r\n                .thenAccept(dataFromDB -&gt; updateCache(dataFromDB));\r\n        cf.join();\r\n      }","title":"How to test asynchronous method","body":"<p>Jacek, I think @Asynchronous annotation is not required. You can use the pure form of completable future. I provide below the sample code based upon the code you have provided.</p>\n\n<pre><code>public String getInfoFromDB() {\n    try {\n      TimeUnit.SECONDS.sleep(10);\n    } catch (InterruptedException e) {\n      e.printStackTrace();\n    }\n    return \"Data from DB\";\n  }\n\n  public void updateCache(String dataFromDB) {\n    System.out.println(\"Data from D : \" + dataFromDB);\n    System.out.println(\"Doing some operations with data from DB\");\n  }\n\n  public void fetchData() {\n    CompletableFuture cf =\n        CompletableFuture.supplyAsync(() -&gt; getInfoFromDB())\n            .thenAccept(dataFromDB -&gt; updateCache(dataFromDB));\n    cf.join();\n  }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3756387,"reputation":802,"user_id":3122668,"display_name":"capo11"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1661443952,"creation_date":1661443952,"answer_id":73490736,"question_id":56474757,"body_markdown":"You can use this useful library: [awaitility][1]\r\n\r\n\r\n  [1]: https://github.com/awaitility/awaitility/","title":"How to test asynchronous method","body":"<p>You can use this useful library: <a href=\"https://github.com/awaitility/awaitility/\" rel=\"nofollow noreferrer\">awaitility</a></p>\n"}],"owner":{"account_id":13945116,"reputation":199,"user_id":10070050,"display_name":"Dzak"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":220,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1661443952,"creation_date":1559813631,"question_id":56474757,"body_markdown":"I need to asynchronously fetch some data from DB, and then synchronously update currently cached data, with the one that was fetched.\r\n\r\nAt the moment my code looks like this:\r\n\r\n    @Asynchronous\r\n    public void fetchData() {\r\n        CompletableFuture.supplyAsync(() -&gt; {\r\n            //Do some logic to fetch data\r\n            return fetchedData;\r\n        }).thenAccept(fetchedData -&gt; updateCache(fetchedData));\r\n    }\r\n\r\nMy problem is that when I call this method in my tests, it instantly goes to `thenAccept` but `fetchedData` is empty. I&#39;ve tried to change my method, and return `CompletableFuture&lt;List&lt;Data&gt;&gt;`, and call `fetchData().join()` in tests. It worked fine, but first - my app wouldn&#39;t build, since `@Asynchronous` need to return `Future` or `void`, and I don&#39;t think changing method just to test it is a good idea. \r\nI&#39;ve heard about Await library, but can not use it in current project.\r\n\r\nI&#39;am also not sure, if `@Asynchronous` is needed in my case? If I&#39;m not mistaken, `CompletableFuture` should run in own thread by default?","title":"How to test asynchronous method","body":"<p>I need to asynchronously fetch some data from DB, and then synchronously update currently cached data, with the one that was fetched.</p>\n\n<p>At the moment my code looks like this:</p>\n\n<pre><code>@Asynchronous\npublic void fetchData() {\n    CompletableFuture.supplyAsync(() -&gt; {\n        //Do some logic to fetch data\n        return fetchedData;\n    }).thenAccept(fetchedData -&gt; updateCache(fetchedData));\n}\n</code></pre>\n\n<p>My problem is that when I call this method in my tests, it instantly goes to <code>thenAccept</code> but <code>fetchedData</code> is empty. I've tried to change my method, and return <code>CompletableFuture&lt;List&lt;Data&gt;&gt;</code>, and call <code>fetchData().join()</code> in tests. It worked fine, but first - my app wouldn't build, since <code>@Asynchronous</code> need to return <code>Future</code> or <code>void</code>, and I don't think changing method just to test it is a good idea. \nI've heard about Await library, but can not use it in current project.</p>\n\n<p>I'am also not sure, if <code>@Asynchronous</code> is needed in my case? If I'm not mistaken, <code>CompletableFuture</code> should run in own thread by default?</p>\n"},{"tags":["java","file","io"],"comments":[{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":1,"creation_date":1661439790,"post_id":73489523,"comment_id":129778075,"body_markdown":"If you&#39;re recording then you will be reading the record won&#39;t you? So then you can count the lines as you read. btw variable names begin lower case in Java and are in [camel case](https://technojeeves.com/index.php/aliasjava1/106-java-style-conventions). I would recommend you use the higher level ```PrintWriter```  rather than ```FileWriter```","body":"If you&#39;re recording then you will be reading the record won&#39;t you? So then you can count the lines as you read. btw variable names begin lower case in Java and are in <a href=\"https://technojeeves.com/index.php/aliasjava1/106-java-style-conventions\" rel=\"nofollow noreferrer\">camel case</a>. I would recommend you use the higher level <code>PrintWriter</code>  rather than <code>FileWriter</code>"},{"owner":{"account_id":960307,"reputation":107861,"user_id":984823,"display_name":"Joop Eggen"},"score":0,"creation_date":1661443219,"post_id":73489523,"comment_id":129779499,"body_markdown":"Store the ID in a file too. Better yet use an embedded database like H2. With a bit of SQL you then can make reports like food preferences.","body":"Store the ID in a file too. Better yet use an embedded database like H2. With a bit of SQL you then can make reports like food preferences."},{"owner":{"account_id":25941272,"reputation":9,"user_id":19660754,"display_name":"Felipe"},"score":0,"creation_date":1661444182,"post_id":73489523,"comment_id":129779845,"body_markdown":"@JoopEggen My lecturer want us to store all data in text files, and i also put &#39;AUTO_ID++` and `this.id = AUTO_ID;` to the second `try{}` but  order id still start with 1 once application restart.","body":"@JoopEggen My lecturer want us to store all data in text files, and i also put &#39;AUTO_ID++` and <code>this.id = AUTO_ID;</code> to the second <code>try{}</code> but  order id still start with 1 once application restart."}],"owner":{"account_id":25941272,"reputation":9,"user_id":19660754,"display_name":"Felipe"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":158,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1661443652,"creation_date":1661438524,"question_id":73489523,"body_markdown":"I&#39;m writing an ordering system where all data is recorded in a text file called &quot;order.txt&quot;. I want to create unique order ids automatically by adding 1 to the last order id from the text file once order has been made.\r\n\r\nExample\r\n```none\r\nID    ,Food    ,    Food Quantity    ,    Drink    ,Drink Quantity\r\n/1    /Fried Chicken:    /1     /Sprite    /2\r\n\r\n/2    /Fried Chicken:    /1     /Sprite    /1\r\n\r\n/1    /Fried Chicken:    /1     /Sprite    /1\r\n\r\n```\r\nBut the Id keep start with 1 when the application is restart.\r\nHow can I solve this problem?\r\n\r\n\r\n\r\nCode\r\n```java\r\n    private static int AUTO_ID = 1;\r\n    private int id;\r\n\r\nprivate void jButton1ActionPerformed(java.awt.event.ActionEvent evt) {                                         \r\n    String FoodChoice = FoodComboBox.getSelectedItem().toString();\r\n    String QtyFood = FoodQ.getValue().toString();\r\n    String DrinkChoice = DrinksComboBox.getSelectedItem().toString();\r\n    String QtyDrinks = DrinkQ.getValue().toString();\r\n\r\n    AtomicInteger ID = new AtomicInteger(0);\r\n    int res = ID.getAndIncrement();\r\n\r\n            try {    \r\n                FileReader fileReader = new FileReader(&quot;order.txt&quot;);         \r\n                BufferedReader bufferedReader = new BufferedReader(fileReader);\r\n                String line;\r\n                while ((line = bufferedReader.readLine()) != null) {\r\n                if (line.isEmpty())\r\n                    break;\r\n\r\n                String[] rowData = line.split(&quot;;&quot;);\r\n                \r\n                \r\n                }\r\n     \r\n            } \r\n            \r\n            catch (FileNotFoundException ex) {\r\n                Logger.getLogger(order.class.getName()).log(Level.SEVERE, null, ex);\r\n            } catch (IOException ex) {\r\n            Logger.getLogger(order.class.getName()).log(Level.SEVERE, null, ex);\r\n        }    \r\n\r\n    try{\r\n                AUTO_ID++;\r\n                this.id = AUTO_ID;\r\n                \r\n        FileWriter wr = new FileWriter(&quot;order.txt&quot;,true);\r\n        wr.write(&quot;/&quot;+ Id+&quot;    /&quot;+FoodChoice+&quot;:    /&quot;+QtyFood+&quot;     /&quot;+DrinkChoice+&quot;    /&quot;+QtyDrinks+&quot;\\n&quot;);\r\n        wr.write(System.getProperty(&quot;line.separator&quot;));        \r\n                    \r\n        wr.close();\r\n   }\r\n   catch(Exception e){\r\n        \r\n   }\r\n}\r\n```\r\n  ","title":"Create unique ID by adding 1 to the last ID record in text file","body":"<p>I'm writing an ordering system where all data is recorded in a text file called &quot;order.txt&quot;. I want to create unique order ids automatically by adding 1 to the last order id from the text file once order has been made.</p>\n<p>Example</p>\n<pre class=\"lang-none prettyprint-override\"><code>ID    ,Food    ,    Food Quantity    ,    Drink    ,Drink Quantity\n/1    /Fried Chicken:    /1     /Sprite    /2\n\n/2    /Fried Chicken:    /1     /Sprite    /1\n\n/1    /Fried Chicken:    /1     /Sprite    /1\n\n</code></pre>\n<p>But the Id keep start with 1 when the application is restart.\nHow can I solve this problem?</p>\n<p>Code</p>\n<pre class=\"lang-java prettyprint-override\"><code>    private static int AUTO_ID = 1;\n    private int id;\n\nprivate void jButton1ActionPerformed(java.awt.event.ActionEvent evt) {                                         \n    String FoodChoice = FoodComboBox.getSelectedItem().toString();\n    String QtyFood = FoodQ.getValue().toString();\n    String DrinkChoice = DrinksComboBox.getSelectedItem().toString();\n    String QtyDrinks = DrinkQ.getValue().toString();\n\n    AtomicInteger ID = new AtomicInteger(0);\n    int res = ID.getAndIncrement();\n\n            try {    \n                FileReader fileReader = new FileReader(&quot;order.txt&quot;);         \n                BufferedReader bufferedReader = new BufferedReader(fileReader);\n                String line;\n                while ((line = bufferedReader.readLine()) != null) {\n                if (line.isEmpty())\n                    break;\n\n                String[] rowData = line.split(&quot;;&quot;);\n                \n                \n                }\n     \n            } \n            \n            catch (FileNotFoundException ex) {\n                Logger.getLogger(order.class.getName()).log(Level.SEVERE, null, ex);\n            } catch (IOException ex) {\n            Logger.getLogger(order.class.getName()).log(Level.SEVERE, null, ex);\n        }    \n\n    try{\n                AUTO_ID++;\n                this.id = AUTO_ID;\n                \n        FileWriter wr = new FileWriter(&quot;order.txt&quot;,true);\n        wr.write(&quot;/&quot;+ Id+&quot;    /&quot;+FoodChoice+&quot;:    /&quot;+QtyFood+&quot;     /&quot;+DrinkChoice+&quot;    /&quot;+QtyDrinks+&quot;\\n&quot;);\n        wr.write(System.getProperty(&quot;line.separator&quot;));        \n                    \n        wr.close();\n   }\n   catch(Exception e){\n        \n   }\n}\n</code></pre>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":2673407,"reputation":44640,"user_id":2310289,"display_name":"Scary Wombat"},"score":0,"creation_date":1661404467,"post_id":73482159,"comment_id":129765090,"body_markdown":"what do you think `char M = 0;` means?  Then you think that the char entered by the user will equals this?  Try looking this up in a ascitable","body":"what do you think <code>char M = 0;</code> means?  Then you think that the char entered by the user will equals this?  Try looking this up in a ascitable"},{"owner":{"account_id":4099822,"reputation":1256,"user_id":3365667,"display_name":"Roslan Amir"},"score":0,"creation_date":1661404574,"post_id":73482159,"comment_id":129765116,"body_markdown":"Why don&#39;t you declare a boolean variable, say isMale and assign it to true or false accordingly based on the input character?","body":"Why don&#39;t you declare a boolean variable, say isMale and assign it to true or false accordingly based on the input character?"},{"owner":{"account_id":18544976,"reputation":241,"user_id":13512579,"display_name":"Navneet Singh"},"score":0,"creation_date":1661404618,"post_id":73482159,"comment_id":129765120,"body_markdown":"please provide some sample input whether user input 0 or 1 / M or F ? only then we can suggest you better way","body":"please provide some sample input whether user input 0 or 1 / M or F ? only then we can suggest you better way"},{"owner":{"account_id":2673407,"reputation":44640,"user_id":2310289,"display_name":"Scary Wombat"},"score":0,"creation_date":1661404635,"post_id":73482159,"comment_id":129765123,"body_markdown":"@RoslanAmir *assign it to true or false accordingly based on the input character?* the OP can not do that","body":"@RoslanAmir <i>assign it to true or false accordingly based on the input character?</i> the OP can not do that"},{"owner":{"account_id":2673407,"reputation":44640,"user_id":2310289,"display_name":"Scary Wombat"},"score":0,"creation_date":1661404681,"post_id":73482159,"comment_id":129765128,"body_markdown":"@NavneetSingh &#39;0&#39; &lt;&gt; 0","body":"@NavneetSingh &#39;0&#39; &lt;&gt; 0"},{"owner":{"account_id":4099822,"reputation":1256,"user_id":3365667,"display_name":"Roslan Amir"},"score":0,"creation_date":1661404743,"post_id":73482159,"comment_id":129765142,"body_markdown":"Character literals are written as &#39;F&#39; or &#39;M&#39;, not 0 or 1 etc. Test with `if (gender == &#39;M&#39;)`","body":"Character literals are written as &#39;F&#39; or &#39;M&#39;, not 0 or 1 etc. Test with <code>if (gender == &#39;M&#39;)</code>"},{"owner":{"account_id":26155389,"reputation":3,"user_id":19842683,"display_name":"The Last AdmiraL"},"score":0,"creation_date":1661404830,"post_id":73482159,"comment_id":129765164,"body_markdown":"@RoslanAmir I&#39;d have to assign false to both at the start and then change it when the user enters their input right?","body":"@RoslanAmir I&#39;d have to assign false to both at the start and then change it when the user enters their input right?"},{"owner":{"account_id":26155389,"reputation":3,"user_id":19842683,"display_name":"The Last AdmiraL"},"score":0,"creation_date":1661404892,"post_id":73482159,"comment_id":129765178,"body_markdown":"@ScaryWombat I don&#39;t know the ide gave me that suggestion to assign both with 0 so I though that I would have to change it to 1 as 0 might be false.","body":"@ScaryWombat I don&#39;t know the ide gave me that suggestion to assign both with 0 so I though that I would have to change it to 1 as 0 might be false."},{"owner":{"account_id":4099822,"reputation":1256,"user_id":3365667,"display_name":"Roslan Amir"},"score":0,"creation_date":1661404940,"post_id":73482159,"comment_id":129765190,"body_markdown":"You don&#39;t need the two variables M and F for what you are trying to do. Just use the comaprison as I mentioned above.","body":"You don&#39;t need the two variables M and F for what you are trying to do. Just use the comaprison as I mentioned above."},{"owner":{"account_id":26155389,"reputation":3,"user_id":19842683,"display_name":"The Last AdmiraL"},"score":0,"creation_date":1661405015,"post_id":73482159,"comment_id":129765203,"body_markdown":"@RoslanAmir Ok thankyou that worked had to put the chars in &#39;&#39;","body":"@RoslanAmir Ok thankyou that worked had to put the chars in &#39;&#39;"}],"answers":[{"tags":[],"owner":{"account_id":4099822,"reputation":1256,"user_id":3365667,"display_name":"Roslan Amir"},"down_vote_count":1,"up_vote_count":0,"is_accepted":true,"score":-1,"last_activity_date":1661405037,"creation_date":1661405037,"answer_id":73482251,"question_id":73482159,"body_markdown":"    char gender = readertext.next().charAt(0);\r\n    if (gender == &#39;M&#39;) {\r\n      System.out.println(&quot;You picked M&quot;);\r\n    } else if (gender == &#39;F&#39;) {\r\n      System.out.println(&quot;You picked F&quot;);\r\n    } else {\r\n      System.out.println(&quot;You did not choose M or F&quot;);\r\n    }","title":"How to fix a conditional which keeps going to the else statement rather than the if statement in java","body":"<pre><code>char gender = readertext.next().charAt(0);\nif (gender == 'M') {\n  System.out.println(&quot;You picked M&quot;);\n} else if (gender == 'F') {\n  System.out.println(&quot;You picked F&quot;);\n} else {\n  System.out.println(&quot;You did not choose M or F&quot;);\n}\n</code></pre>\n"}],"owner":{"account_id":26155389,"reputation":3,"user_id":19842683,"display_name":"The Last AdmiraL"},"comment_count":10,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":41,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"accepted_answer_id":73482251,"answer_count":1,"score":-1,"last_activity_date":1661443401,"creation_date":1661404377,"question_id":73482159,"body_markdown":"I am new to Java and I was trying something and it won&#39;t work. I am trying to get input from the user for only male or female and the code builds, but whenever I enter the input M or F, it automatically gives the else &quot;You did not choose M or F&quot;\r\n\r\n```\r\nSystem.out.println(&quot;Please specify you&#39;re gender with M for male and F for female&quot;);                         \r\nchar gender = readertext.next().charAt(0);\r\nchar M = 0;\r\nchar F = 0;\r\nif (gender == M) {\r\n    M = 1;\r\n    System.out.println(&quot;You picked M&quot;);\r\n} else if (gender == F) {\r\n    F = 1;\r\n    System.out.println(&quot;You picked F&quot;);\r\n} else {\r\n    System.out.println(&quot;You did not choose M or F&quot;);\r\n}\r\n```\r\n","title":"How to fix a conditional which keeps going to the else statement rather than the if statement in java","body":"<p>I am new to Java and I was trying something and it won't work. I am trying to get input from the user for only male or female and the code builds, but whenever I enter the input M or F, it automatically gives the else &quot;You did not choose M or F&quot;</p>\n<pre><code>System.out.println(&quot;Please specify you're gender with M for male and F for female&quot;);                         \nchar gender = readertext.next().charAt(0);\nchar M = 0;\nchar F = 0;\nif (gender == M) {\n    M = 1;\n    System.out.println(&quot;You picked M&quot;);\n} else if (gender == F) {\n    F = 1;\n    System.out.println(&quot;You picked F&quot;);\n} else {\n    System.out.println(&quot;You did not choose M or F&quot;);\n}\n</code></pre>\n"},{"tags":["javascript","java","angular","typescript","rest"],"answers":[{"tags":[],"owner":{"account_id":3563874,"reputation":162,"user_id":2975988,"display_name":"Airflow46"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1661436939,"creation_date":1661436939,"answer_id":73489128,"question_id":73488599,"body_markdown":"The reason it can&#39;t read these properties is prodably due to a leak in the routing module which causes the filter proxy server to reroute the traffic through the firewall, the solution is easy, you have to inject the https method directly into the spring boot server using the h2 database servlets, using this you can breach the router module and start injecting requests from inside out, causing the router module to crash - it will crash once the system variables have overflowed and from there on you can find out the routing encryption keys as they will be show in their decyphered form. Once that&#39;s done it will be able to read the days again.","title":"Unable to parse all data from java rest API to angular front end","body":"<p>The reason it can't read these properties is prodably due to a leak in the routing module which causes the filter proxy server to reroute the traffic through the firewall, the solution is easy, you have to inject the https method directly into the spring boot server using the h2 database servlets, using this you can breach the router module and start injecting requests from inside out, causing the router module to crash - it will crash once the system variables have overflowed and from there on you can find out the routing encryption keys as they will be show in their decyphered form. Once that's done it will be able to read the days again.</p>\n"},{"tags":[],"owner":{"account_id":20679093,"reputation":316,"user_id":15183075,"display_name":"Yannick Mussche"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1661441139,"creation_date":1661441139,"answer_id":73490134,"question_id":73488599,"body_markdown":"The enums are correct, switch the models to interfaces:\r\n\r\n    export interface DaysOfMonth {\r\n        dayType: DayType;\r\n        workingHours: number;\r\n        date: Date;\r\n    }\r\n\r\n    export interface MonthObject {\r\n        year: number;\r\n        month: number;\r\n        daysOfMonth: DaysOfMonth[];\r\n    }\r\n\r\n    export interface TimeSheet {\r\n        id: number;\r\n        username: string;\r\n        status: Status;\r\n        year: number;\r\n        month: number;\r\n        monthObject: MonthObject;\r\n    }\r\n","title":"Unable to parse all data from java rest API to angular front end","body":"<p>The enums are correct, switch the models to interfaces:</p>\n<pre><code>export interface DaysOfMonth {\n    dayType: DayType;\n    workingHours: number;\n    date: Date;\n}\n\nexport interface MonthObject {\n    year: number;\n    month: number;\n    daysOfMonth: DaysOfMonth[];\n}\n\nexport interface TimeSheet {\n    id: number;\n    username: string;\n    status: Status;\n    year: number;\n    month: number;\n    monthObject: MonthObject;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1459905,"reputation":170,"user_id":1374497,"accept_rate":80,"display_name":"j1s"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1661443299,"creation_date":1661441213,"answer_id":73490155,"question_id":73488599,"body_markdown":"    export class Month {\r\n        year!:number;\r\n        month!:number;\r\n        setDays!:Day[]; // Set&lt;Day&gt;;\r\n    }\r\n\r\nArray cannot be assigned directly to Set, It can be created as \r\n\r\n    setDay: Set&lt;Day&gt; = new Set([...Day]); \r\n\r\nYou need to have Day[] in the model. \r\n\r\n","title":"Unable to parse all data from java rest API to angular front end","body":"<pre><code>export class Month {\n    year!:number;\n    month!:number;\n    setDays!:Day[]; // Set&lt;Day&gt;;\n}\n</code></pre>\n<p>Array cannot be assigned directly to Set, It can be created as</p>\n<pre><code>setDay: Set&lt;Day&gt; = new Set([...Day]); \n</code></pre>\n<p>You need to have Day[] in the model.</p>\n"}],"owner":{"account_id":20679093,"reputation":316,"user_id":15183075,"display_name":"Yannick Mussche"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":243,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":73490134,"answer_count":3,"score":0,"last_activity_date":1661443299,"creation_date":1661434886,"question_id":73488599,"body_markdown":"I&#39;m sending a list of MonthSheetParsed Objects (this holds Month object, which holds a set of Day objects) from my backend program (rest API). My frontend program in Angular sends a requests to get this  list of MonthSheetParsed Objects. When I try to display the acquired object, I can display the attributes of the MonthSheetParsed. But when I try to get the `set&lt;Day&gt;` in the Month object, which is an attribute of the MontSheetParsed, I get the error from TypeScript:\r\n\r\n&gt;core.mjs:7640 ERROR TypeError: Cannot read properties of undefined (reading &#39;setDays&#39;). \r\n\r\nSo I guess I set my models in Angular wrong which makes it not parse the Day objects correct. Maybe because of the date attribute in the Day object. But it might also be something else.\r\n\r\n- Am I setting my models correct to parse the incoming data?\r\n- If so, why is my set of Days undefined?\r\n\r\nHere below you can find the jsonData, afterwards the models in Angular, the service, component.ts in component.html. \r\n\r\nJsonData:\r\n\r\n``` \r\n[{&quot;id&quot;:1,&quot;username&quot;:&quot;user@mail.be&quot;,&quot;status&quot;:&quot;PREPOSITION&quot;,&quot;year&quot;:2022,&quot;\r\nmonth&quot;:6,&quot;monthObject&quot;:{&quot;year&quot;:2022,&quot;month&quot;:6,&quot;daysOfMonth&quot;:\r\n[{&quot;dayType&quot;:&quot;WERKDAG&quot;,&quot;workingHours&quot;:8,&quot;date&quot;:&quot;2022-06-01&quot;},\r\n{&quot;dayType&quot;:&quot;WERKDAG&quot;,&quot;workingHours&quot;:8,&quot;date&quot;:&quot;2022-06-02&quot;},\r\n{&quot;dayType&quot;:&quot;WERKDAG&quot;,&quot;workingHours&quot;:8,&quot;date&quot;:&quot;2022-06-03&quot;},\r\n{&quot;dayType&quot;:&quot;WEEKEND&quot;,&quot;workingHours&quot;:8,&quot;date&quot;:&quot;2022-06-04&quot;},\r\n{&quot;dayType&quot;:&quot;WEEKEND&quot;,&quot;workingHours&quot;:8,&quot;date&quot;:&quot;2022-06-05&quot;},\r\n{&quot;dayType&quot;:&quot;FEESTDAG&quot;,&quot;workingHours&quot;:8,&quot;date&quot;:&quot;2022-06-06&quot;},\r\n{&quot;dayType&quot;:&quot;WERKDAG&quot;,&quot;workingHours&quot;:8,&quot;date&quot;:&quot;2022-06-07&quot;},\r\n{&quot;dayType&quot;:&quot;WERKDAG&quot;,&quot;workingHours&quot;:8,&quot;date&quot;:&quot;2022-06-08&quot;},\r\n{&quot;dayType&quot;:&quot;WERKDAG&quot;,&quot;workingHours&quot;:8,&quot;date&quot;:&quot;2022-06-09&quot;},\r\n{&quot;dayType&quot;:&quot;WERKDAG&quot;,&quot;workingHours&quot;:8,&quot;date&quot;:&quot;2022-06-10&quot;},\r\n{&quot;dayType&quot;:&quot;WEEKEND&quot;,&quot;workingHours&quot;:8,&quot;date&quot;:&quot;2022-06-11&quot;},\r\n{&quot;dayType&quot;:&quot;WEEKEND&quot;,&quot;workingHours&quot;:8,&quot;date&quot;:&quot;2022-06-12&quot;},\r\n{&quot;dayType&quot;:&quot;WERKDAG&quot;,&quot;workingHours&quot;:8,&quot;date&quot;:&quot;2022-06-13&quot;},\r\n{&quot;dayType&quot;:&quot;WERKDAG&quot;,&quot;workingHours&quot;:8,&quot;date&quot;:&quot;2022-06-14&quot;},\r\n{&quot;dayType&quot;:&quot;WERKDAG&quot;,&quot;workingHours&quot;:8,&quot;date&quot;:&quot;2022-06-15&quot;},\r\n{&quot;dayType&quot;:&quot;WERKDAG&quot;,&quot;workingHours&quot;:8,&quot;date&quot;:&quot;2022-06-16&quot;},\r\n{&quot;dayType&quot;:&quot;WERKDAG&quot;,&quot;workingHours&quot;:8,&quot;date&quot;:&quot;2022-06-17&quot;},\r\n{&quot;dayType&quot;:&quot;WEEKEND&quot;,&quot;workingHours&quot;:8,&quot;date&quot;:&quot;2022-06-18&quot;},\r\n{&quot;dayType&quot;:&quot;WEEKEND&quot;,&quot;workingHours&quot;:8,&quot;date&quot;:&quot;2022-06-19&quot;},\r\n{&quot;dayType&quot;:&quot;WERKDAG&quot;,&quot;workingHours&quot;:8,&quot;date&quot;:&quot;2022-06-20&quot;},\r\n{&quot;dayType&quot;:&quot;VAKANTIE&quot;,&quot;workingHours&quot;:8,&quot;date&quot;:&quot;2022-06-21&quot;},\r\n{&quot;dayType&quot;:&quot;WERKDAG&quot;,&quot;workingHours&quot;:8,&quot;date&quot;:&quot;2022-06-22&quot;},\r\n{&quot;dayType&quot;:&quot;WERKDAG&quot;,&quot;workingHours&quot;:8,&quot;date&quot;:&quot;2022-06-23&quot;},\r\n{&quot;dayType&quot;:&quot;WERKDAG&quot;,&quot;workingHours&quot;:8,&quot;date&quot;:&quot;2022-06-24&quot;},\r\n{&quot;dayType&quot;:&quot;WEEKEND&quot;,&quot;workingHours&quot;:8,&quot;date&quot;:&quot;2022-06-25&quot;},\r\n{&quot;dayType&quot;:&quot;WEEKEND&quot;,&quot;workingHours&quot;:8,&quot;date&quot;:&quot;2022-06-26&quot;},\r\n{&quot;dayType&quot;:&quot;WERKDAG&quot;,&quot;workingHours&quot;:8,&quot;date&quot;:&quot;2022-06-27&quot;},\r\n{&quot;dayType&quot;:&quot;WERKDAG&quot;,&quot;workingHours&quot;:8,&quot;date&quot;:&quot;2022-06-28&quot;},\r\n{&quot;dayType&quot;:&quot;WERKDAG&quot;,&quot;workingHours&quot;:8,&quot;date&quot;:&quot;2022-06-29&quot;},\r\n{&quot;dayType&quot;:&quot;WERKDAG&quot;,&quot;workingHours&quot;:8,&quot;date&quot;:&quot;2022-06-30&quot;}]}}]\r\n```\r\n\r\n\r\nModels Angular - Day.ts\r\n\r\n``` \r\nexport class Day {\r\n    date!:Date;\r\n    dayType!:DayTypes;\r\n    workingHours!:number;\r\n}\r\n```\r\n\r\nModels Angular - DayTypes.ts\r\n\r\n``` \r\nexport enum DayTypes {\r\n    NOGNIETBEPAALD = &#39;NOGNIETBEPAALD&#39;,\r\n    WERKDAG = &#39;WERKDAG&#39;,\r\n    FEESTDAG = &#39;FEESTDAG&#39;,\r\n    VAKANTIE = &#39;VAKANTIE&#39;,\r\n    ZIEKTE = &#39;ZIEKTE&#39;,\r\n    WEEKEND = &#39;WEEKEND&#39;,\r\n}\r\n```\r\n\r\nModels Angular - Month.ts\r\n\r\n``` \r\nexport class Month {\r\n    year!:number;\r\n    month!:number;\r\n    setDays!:Set&lt;Day&gt;;\r\n}\r\n```\r\n\r\nModels Angular - Status.ts\r\n\r\n``` \r\nexport enum Status {\r\n    PREPOSITION = &#39;Preposition&#39;,\r\n    CONFIRMED = &#39;Confirmed&#39;,\r\n    HANDLED = &#39;Handled&#39;,\r\n}\r\n```\r\n\r\nModels Angular - MonthlySheet.ts\r\n\r\n``` \r\nexport class MonthlySheet {\r\n    id!:number;\r\n    username!:string;\r\n    status!:Status;\r\n    year!:number;\r\n    month!:number;\r\n    monthobject!:Month;\r\n}\r\n```\r\n\r\nangular service:\r\n\r\n``` \r\n@Injectable({\r\n  providedIn: &#39;root&#39;\r\n})\r\nexport class TimesheetService {\r\n\r\n  constructor(private http: HttpClient) { }\r\n\r\n\r\n  getAllTimesheetsByUsername(username: String): Observable&lt;MonthlySheet[]&gt;{\r\n    const url = environment.TIMESHEETSAPI_URL + &quot;timesheets/findAllByUsername/&quot; + `${username}`;\r\n    return this.http.get&lt;MonthlySheet[]&gt;(url);\r\n  }\r\n}\r\n```\r\n\r\nangular component.ts\r\n\r\n``` \r\n@Component({\r\n  selector: &#39;app-timesheet&#39;,\r\n  templateUrl: &#39;./timesheet.component.html&#39;,\r\n  styleUrls: [&#39;./timesheet.component.css&#39;]\r\n})\r\nexport class TimesheetComponent implements OnInit {\r\n  timesheets!:MonthlySheet[];\r\n\r\n  constructor(private timesheetService: TimesheetService) { }\r\n\r\n  ngOnInit(): void {\r\n    this.timesheetService.getAllTimesheetsByUsername(username).subscribe(sheet =&gt; {this.timesheets = sheet});\r\n  }\r\n\r\n}\r\n```\r\n\r\nangular component.html\r\n\r\n``` \r\n&lt;h2&gt;Overzicht timesheets&lt;/h2&gt;\r\n\r\n\r\n&lt;ul *ngFor=&quot;let sheet of timesheets&quot;&gt;{{sheet.username}} - {{sheet.year}}/{{sheet.month}} - {{sheet.status}}\r\n            &lt;li *ngFor=&quot;let daily of sheet.monthobject.setDays&quot;&gt;{{daily.date}}-{{daily.dayType}}&lt;/li&gt;\r\n\r\n&lt;/ul&gt;\r\n```\r\n","title":"Unable to parse all data from java rest API to angular front end","body":"<p>I'm sending a list of MonthSheetParsed Objects (this holds Month object, which holds a set of Day objects) from my backend program (rest API). My frontend program in Angular sends a requests to get this  list of MonthSheetParsed Objects. When I try to display the acquired object, I can display the attributes of the MonthSheetParsed. But when I try to get the <code>set&lt;Day&gt;</code> in the Month object, which is an attribute of the MontSheetParsed, I get the error from TypeScript:</p>\n<blockquote>\n<p>core.mjs:7640 ERROR TypeError: Cannot read properties of undefined (reading 'setDays').</p>\n</blockquote>\n<p>So I guess I set my models in Angular wrong which makes it not parse the Day objects correct. Maybe because of the date attribute in the Day object. But it might also be something else.</p>\n<ul>\n<li>Am I setting my models correct to parse the incoming data?</li>\n<li>If so, why is my set of Days undefined?</li>\n</ul>\n<p>Here below you can find the jsonData, afterwards the models in Angular, the service, component.ts in component.html.</p>\n<p>JsonData:</p>\n<pre><code>[{&quot;id&quot;:1,&quot;username&quot;:&quot;user@mail.be&quot;,&quot;status&quot;:&quot;PREPOSITION&quot;,&quot;year&quot;:2022,&quot;\nmonth&quot;:6,&quot;monthObject&quot;:{&quot;year&quot;:2022,&quot;month&quot;:6,&quot;daysOfMonth&quot;:\n[{&quot;dayType&quot;:&quot;WERKDAG&quot;,&quot;workingHours&quot;:8,&quot;date&quot;:&quot;2022-06-01&quot;},\n{&quot;dayType&quot;:&quot;WERKDAG&quot;,&quot;workingHours&quot;:8,&quot;date&quot;:&quot;2022-06-02&quot;},\n{&quot;dayType&quot;:&quot;WERKDAG&quot;,&quot;workingHours&quot;:8,&quot;date&quot;:&quot;2022-06-03&quot;},\n{&quot;dayType&quot;:&quot;WEEKEND&quot;,&quot;workingHours&quot;:8,&quot;date&quot;:&quot;2022-06-04&quot;},\n{&quot;dayType&quot;:&quot;WEEKEND&quot;,&quot;workingHours&quot;:8,&quot;date&quot;:&quot;2022-06-05&quot;},\n{&quot;dayType&quot;:&quot;FEESTDAG&quot;,&quot;workingHours&quot;:8,&quot;date&quot;:&quot;2022-06-06&quot;},\n{&quot;dayType&quot;:&quot;WERKDAG&quot;,&quot;workingHours&quot;:8,&quot;date&quot;:&quot;2022-06-07&quot;},\n{&quot;dayType&quot;:&quot;WERKDAG&quot;,&quot;workingHours&quot;:8,&quot;date&quot;:&quot;2022-06-08&quot;},\n{&quot;dayType&quot;:&quot;WERKDAG&quot;,&quot;workingHours&quot;:8,&quot;date&quot;:&quot;2022-06-09&quot;},\n{&quot;dayType&quot;:&quot;WERKDAG&quot;,&quot;workingHours&quot;:8,&quot;date&quot;:&quot;2022-06-10&quot;},\n{&quot;dayType&quot;:&quot;WEEKEND&quot;,&quot;workingHours&quot;:8,&quot;date&quot;:&quot;2022-06-11&quot;},\n{&quot;dayType&quot;:&quot;WEEKEND&quot;,&quot;workingHours&quot;:8,&quot;date&quot;:&quot;2022-06-12&quot;},\n{&quot;dayType&quot;:&quot;WERKDAG&quot;,&quot;workingHours&quot;:8,&quot;date&quot;:&quot;2022-06-13&quot;},\n{&quot;dayType&quot;:&quot;WERKDAG&quot;,&quot;workingHours&quot;:8,&quot;date&quot;:&quot;2022-06-14&quot;},\n{&quot;dayType&quot;:&quot;WERKDAG&quot;,&quot;workingHours&quot;:8,&quot;date&quot;:&quot;2022-06-15&quot;},\n{&quot;dayType&quot;:&quot;WERKDAG&quot;,&quot;workingHours&quot;:8,&quot;date&quot;:&quot;2022-06-16&quot;},\n{&quot;dayType&quot;:&quot;WERKDAG&quot;,&quot;workingHours&quot;:8,&quot;date&quot;:&quot;2022-06-17&quot;},\n{&quot;dayType&quot;:&quot;WEEKEND&quot;,&quot;workingHours&quot;:8,&quot;date&quot;:&quot;2022-06-18&quot;},\n{&quot;dayType&quot;:&quot;WEEKEND&quot;,&quot;workingHours&quot;:8,&quot;date&quot;:&quot;2022-06-19&quot;},\n{&quot;dayType&quot;:&quot;WERKDAG&quot;,&quot;workingHours&quot;:8,&quot;date&quot;:&quot;2022-06-20&quot;},\n{&quot;dayType&quot;:&quot;VAKANTIE&quot;,&quot;workingHours&quot;:8,&quot;date&quot;:&quot;2022-06-21&quot;},\n{&quot;dayType&quot;:&quot;WERKDAG&quot;,&quot;workingHours&quot;:8,&quot;date&quot;:&quot;2022-06-22&quot;},\n{&quot;dayType&quot;:&quot;WERKDAG&quot;,&quot;workingHours&quot;:8,&quot;date&quot;:&quot;2022-06-23&quot;},\n{&quot;dayType&quot;:&quot;WERKDAG&quot;,&quot;workingHours&quot;:8,&quot;date&quot;:&quot;2022-06-24&quot;},\n{&quot;dayType&quot;:&quot;WEEKEND&quot;,&quot;workingHours&quot;:8,&quot;date&quot;:&quot;2022-06-25&quot;},\n{&quot;dayType&quot;:&quot;WEEKEND&quot;,&quot;workingHours&quot;:8,&quot;date&quot;:&quot;2022-06-26&quot;},\n{&quot;dayType&quot;:&quot;WERKDAG&quot;,&quot;workingHours&quot;:8,&quot;date&quot;:&quot;2022-06-27&quot;},\n{&quot;dayType&quot;:&quot;WERKDAG&quot;,&quot;workingHours&quot;:8,&quot;date&quot;:&quot;2022-06-28&quot;},\n{&quot;dayType&quot;:&quot;WERKDAG&quot;,&quot;workingHours&quot;:8,&quot;date&quot;:&quot;2022-06-29&quot;},\n{&quot;dayType&quot;:&quot;WERKDAG&quot;,&quot;workingHours&quot;:8,&quot;date&quot;:&quot;2022-06-30&quot;}]}}]\n</code></pre>\n<p>Models Angular - Day.ts</p>\n<pre><code>export class Day {\n    date!:Date;\n    dayType!:DayTypes;\n    workingHours!:number;\n}\n</code></pre>\n<p>Models Angular - DayTypes.ts</p>\n<pre><code>export enum DayTypes {\n    NOGNIETBEPAALD = 'NOGNIETBEPAALD',\n    WERKDAG = 'WERKDAG',\n    FEESTDAG = 'FEESTDAG',\n    VAKANTIE = 'VAKANTIE',\n    ZIEKTE = 'ZIEKTE',\n    WEEKEND = 'WEEKEND',\n}\n</code></pre>\n<p>Models Angular - Month.ts</p>\n<pre><code>export class Month {\n    year!:number;\n    month!:number;\n    setDays!:Set&lt;Day&gt;;\n}\n</code></pre>\n<p>Models Angular - Status.ts</p>\n<pre><code>export enum Status {\n    PREPOSITION = 'Preposition',\n    CONFIRMED = 'Confirmed',\n    HANDLED = 'Handled',\n}\n</code></pre>\n<p>Models Angular - MonthlySheet.ts</p>\n<pre><code>export class MonthlySheet {\n    id!:number;\n    username!:string;\n    status!:Status;\n    year!:number;\n    month!:number;\n    monthobject!:Month;\n}\n</code></pre>\n<p>angular service:</p>\n<pre><code>@Injectable({\n  providedIn: 'root'\n})\nexport class TimesheetService {\n\n  constructor(private http: HttpClient) { }\n\n\n  getAllTimesheetsByUsername(username: String): Observable&lt;MonthlySheet[]&gt;{\n    const url = environment.TIMESHEETSAPI_URL + &quot;timesheets/findAllByUsername/&quot; + `${username}`;\n    return this.http.get&lt;MonthlySheet[]&gt;(url);\n  }\n}\n</code></pre>\n<p>angular component.ts</p>\n<pre><code>@Component({\n  selector: 'app-timesheet',\n  templateUrl: './timesheet.component.html',\n  styleUrls: ['./timesheet.component.css']\n})\nexport class TimesheetComponent implements OnInit {\n  timesheets!:MonthlySheet[];\n\n  constructor(private timesheetService: TimesheetService) { }\n\n  ngOnInit(): void {\n    this.timesheetService.getAllTimesheetsByUsername(username).subscribe(sheet =&gt; {this.timesheets = sheet});\n  }\n\n}\n</code></pre>\n<p>angular component.html</p>\n<pre><code>&lt;h2&gt;Overzicht timesheets&lt;/h2&gt;\n\n\n&lt;ul *ngFor=&quot;let sheet of timesheets&quot;&gt;{{sheet.username}} - {{sheet.year}}/{{sheet.month}} - {{sheet.status}}\n            &lt;li *ngFor=&quot;let daily of sheet.monthobject.setDays&quot;&gt;{{daily.date}}-{{daily.dayType}}&lt;/li&gt;\n\n&lt;/ul&gt;\n</code></pre>\n"},{"tags":["java","regex","pattern-matching"],"answers":[{"tags":[],"owner":{"account_id":4739783,"reputation":612585,"user_id":3832970,"display_name":"Wiktor Stribiżew"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1661443201,"creation_date":1661443201,"answer_id":73490587,"question_id":73490547,"body_markdown":"You can use\r\n```none\r\n\\d+\\s*(?:day|hour|minute|second)s?(?:\\s*,\\s*\\d+\\s*(?:day|hour|minute|second)s?)*\r\n```\r\nSee the [regex demo][1]\r\n\r\n*Details*:\r\n\r\n - `\\d+\\s*(?:day|hour|minute|second)s?` - one or more digits, zero or more whitespaces, `day` or `hour` or `minute` or `second` and then an optional `s` char\r\n - `(?:\\s*,\\s*\\d+\\s*(?:day|hour|minute|second)s?)*` - zero or more sequences of a comma enclosed with zero or more whitespaces and then the same pattern as above.\r\n\r\n  [1]: https://regex101.com/r/5VulPh/1","title":"java - regex pattern matching days, hours, minutes, seconds","body":"<p>You can use</p>\n<pre class=\"lang-none prettyprint-override\"><code>\\d+\\s*(?:day|hour|minute|second)s?(?:\\s*,\\s*\\d+\\s*(?:day|hour|minute|second)s?)*\n</code></pre>\n<p>See the <a href=\"https://regex101.com/r/5VulPh/1\" rel=\"nofollow noreferrer\">regex demo</a></p>\n<p><em>Details</em>:</p>\n<ul>\n<li><code>\\d+\\s*(?:day|hour|minute|second)s?</code> - one or more digits, zero or more whitespaces, <code>day</code> or <code>hour</code> or <code>minute</code> or <code>second</code> and then an optional <code>s</code> char</li>\n<li><code>(?:\\s*,\\s*\\d+\\s*(?:day|hour|minute|second)s?)*</code> - zero or more sequences of a comma enclosed with zero or more whitespaces and then the same pattern as above.</li>\n</ul>\n"}],"owner":{"account_id":20396497,"reputation":25,"user_id":14963172,"display_name":"munna"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":377,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":73490587,"answer_count":1,"score":1,"last_activity_date":1661443201,"creation_date":1661443004,"question_id":73490547,"body_markdown":"I have a text file with a lot of data and some of that is time with combination of days, hours, minutes and seconds. Examples are listed below.\r\n\r\nExamples:\r\n - 2 days, 3 hours, 24 minutes, 16 seconds \r\n - 1 days, 4 minutes, 3 seconds\r\n - 4 hours, 17 minutes, 56 seconds \r\n - 4 hours, 17 seconds \r\n - 2 hours, 3 minutes \r\n - 3 minutes, 15 seconds \r\n - 45 seconds\r\n\r\nI am trying to replace all mention of times to a generic string like &quot;TimeString&quot;. I have written my own regex, but it&#39;s not working as expected\r\n\r\n```\\\\d( days)?(, \\\\d)?( hours)?(, \\\\d)?( minutes)?(, \\\\d)?( seconds)?```\r\n\r\nFor this, all numbers are getting replaced along with times. For example, if something says &quot;26 orders&quot;, it will be replaced as &quot;TimeString orders&quot; which should not happen","title":"java - regex pattern matching days, hours, minutes, seconds","body":"<p>I have a text file with a lot of data and some of that is time with combination of days, hours, minutes and seconds. Examples are listed below.</p>\n<p>Examples:</p>\n<ul>\n<li>2 days, 3 hours, 24 minutes, 16 seconds</li>\n<li>1 days, 4 minutes, 3 seconds</li>\n<li>4 hours, 17 minutes, 56 seconds</li>\n<li>4 hours, 17 seconds</li>\n<li>2 hours, 3 minutes</li>\n<li>3 minutes, 15 seconds</li>\n<li>45 seconds</li>\n</ul>\n<p>I am trying to replace all mention of times to a generic string like &quot;TimeString&quot;. I have written my own regex, but it's not working as expected</p>\n<p><code>\\\\d( days)?(, \\\\d)?( hours)?(, \\\\d)?( minutes)?(, \\\\d)?( seconds)?</code></p>\n<p>For this, all numbers are getting replaced along with times. For example, if something says &quot;26 orders&quot;, it will be replaced as &quot;TimeString orders&quot; which should not happen</p>\n"},{"tags":["javascript","java"],"comments":[{"owner":{"account_id":14722107,"reputation":5143,"user_id":10632369,"display_name":"tomerpacific"},"score":1,"creation_date":1661411482,"post_id":73483232,"comment_id":129766928,"body_markdown":"Do you have JQuery referenced in your html page?","body":"Do you have JQuery referenced in your html page?"},{"owner":{"account_id":15806075,"reputation":141,"user_id":11404561,"display_name":"S4RUUL"},"score":1,"creation_date":1661411511,"post_id":73483232,"comment_id":129766936,"body_markdown":"It seems like jQuery is not available to your javascript.","body":"It seems like jQuery is not available to your javascript."},{"owner":{"account_id":319873,"reputation":87612,"user_id":637853,"accept_rate":50,"display_name":"Thomas"},"score":0,"creation_date":1661411521,"post_id":73483232,"comment_id":129766944,"body_markdown":"Well, did you define `$`? It&#39;s probably JQuery that defines this (in many cases) so did you load that library?","body":"Well, did you define <code>$</code>? It&#39;s probably JQuery that defines this (in many cases) so did you load that library?"},{"owner":{"account_id":14043952,"reputation":53,"user_id":10144712,"display_name":"Shahzad Hussain"},"score":0,"creation_date":1661420598,"post_id":73483232,"comment_id":129770265,"body_markdown":"Thank you for the quick response.\nI am relatively new to this method. Can you please explain how to load the JQuery library when calling the function from java code?","body":"Thank you for the quick response. I am relatively new to this method. Can you please explain how to load the JQuery library when calling the function from java code?"}],"answers":[{"tags":[],"owner":{"account_id":4704890,"reputation":15040,"user_id":3807365,"display_name":"IT goldman"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1661422731,"creation_date":1661422731,"answer_id":73485819,"question_id":73483232,"body_markdown":"So in that case use vanilla javascript. You should replace this:\r\n```\r\n** $ ** (&#39;#&#39; + gridId).get(0)\r\n```\r\nwith:\r\n```\r\ndocument.querySelector(&#39;#&#39; + gridId)\r\n```\r\n\r\nI am not familiar with this Java syntax, but previous snippet is equivalent to `$(&#39;#&#39; + gridId).get(0)` when jQuery is loaded.\r\n\r\n\r\n","title":"ReferenceError: &quot;$&quot; is not defined in &lt;eval&gt;","body":"<p>So in that case use vanilla javascript. You should replace this:</p>\n<pre><code>** $ ** ('#' + gridId).get(0)\n</code></pre>\n<p>with:</p>\n<pre><code>document.querySelector('#' + gridId)\n</code></pre>\n<p>I am not familiar with this Java syntax, but previous snippet is equivalent to <code>$('#' + gridId).get(0)</code> when jQuery is loaded.</p>\n"}],"owner":{"account_id":14043952,"reputation":53,"user_id":10144712,"display_name":"Shahzad Hussain"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1404,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1661442662,"creation_date":1661411055,"question_id":73483232,"body_markdown":"I am trying to call a javascript function from java code.\r\n\r\nThis is my java code\r\n\r\n```java\r\npublic static void main(String[] args) throws Exception{\r\n\r\n  ScriptEngineManager manager = new ScriptEngineManager();\r\n  ScriptEngine engine = manager.getEngineByName(&quot;JavaScript&quot;);\r\n  // read script file\r\n  engine.eval(Files.newBufferedReader(Paths.get(&quot;f:/workspace/timsnew/WebContent/js/ipam/report_utils.js&quot;), StandardCharsets.UTF_8));\r\n\r\n  Invocable inv = (Invocable) engine;\r\n  // call function from script file\r\n  inv.invokeFunction(&quot;generatePdf&quot;, &quot;abc@gmail.com&quot;,&quot;cloudInstanceProvisioningTemplAudit&quot;,&quot;cloudInstanceProvisioningTemplAuditGrid&quot;,&quot;Cloud Instance Provisioning Template Audit&quot;,&quot;a3&quot;,&quot;l&quot;,&quot;shahzad&quot;,&quot;hussain&quot;);\r\n  \r\n}\r\n```\r\n\r\nThis is my JavaScript code\r\n\r\n```javascript\r\nfunction generatePdf(email_id,reporttype,gridId,mailsHeading,pagesize,pageformat,contact_first_name,contact_last_name){ \r\n\r\n  //var source=(&#39;#&#39;+gridId)[0];\r\n  //**loadingPopup**(&quot;Sending Email to the selected contact.&quot;+&#39;&lt;br&gt;&lt;br&gt;&#39;+&quot;Please Wait...&quot;);\r\n  tableToJson(**$**(&#39;#&#39;+gridId).get(0),mailsHeading,pagesize,pageformat,contact_first_name,contact_last_name);\r\n}\r\n```\r\n\r\nI am also getting error for loadingPopup is not defined.\r\n\r\n\r\nBelow error is seen\r\n\r\n```none\r\nException in thread &quot;main&quot; javax.script.ScriptException: ReferenceError: &quot;$&quot; is not defined in &lt;eval&gt; at line number 558\r\n\tat jdk.nashorn.api.scripting.NashornScriptEngine.throwAsScriptException(NashornScriptEngine.java:467)\r\n```\r\n\r\nHow do I fix this issue?","title":"ReferenceError: &quot;$&quot; is not defined in &lt;eval&gt;","body":"<p>I am trying to call a javascript function from java code.</p>\n<p>This is my java code</p>\n<pre class=\"lang-java prettyprint-override\"><code>public static void main(String[] args) throws Exception{\n\n  ScriptEngineManager manager = new ScriptEngineManager();\n  ScriptEngine engine = manager.getEngineByName(&quot;JavaScript&quot;);\n  // read script file\n  engine.eval(Files.newBufferedReader(Paths.get(&quot;f:/workspace/timsnew/WebContent/js/ipam/report_utils.js&quot;), StandardCharsets.UTF_8));\n\n  Invocable inv = (Invocable) engine;\n  // call function from script file\n  inv.invokeFunction(&quot;generatePdf&quot;, &quot;abc@gmail.com&quot;,&quot;cloudInstanceProvisioningTemplAudit&quot;,&quot;cloudInstanceProvisioningTemplAuditGrid&quot;,&quot;Cloud Instance Provisioning Template Audit&quot;,&quot;a3&quot;,&quot;l&quot;,&quot;shahzad&quot;,&quot;hussain&quot;);\n  \n}\n</code></pre>\n<p>This is my JavaScript code</p>\n<pre class=\"lang-js prettyprint-override\"><code>function generatePdf(email_id,reporttype,gridId,mailsHeading,pagesize,pageformat,contact_first_name,contact_last_name){ \n\n  //var source=('#'+gridId)[0];\n  //**loadingPopup**(&quot;Sending Email to the selected contact.&quot;+'&lt;br&gt;&lt;br&gt;'+&quot;Please Wait...&quot;);\n  tableToJson(**$**('#'+gridId).get(0),mailsHeading,pagesize,pageformat,contact_first_name,contact_last_name);\n}\n</code></pre>\n<p>I am also getting error for loadingPopup is not defined.</p>\n<p>Below error is seen</p>\n<pre class=\"lang-none prettyprint-override\"><code>Exception in thread &quot;main&quot; javax.script.ScriptException: ReferenceError: &quot;$&quot; is not defined in &lt;eval&gt; at line number 558\n    at jdk.nashorn.api.scripting.NashornScriptEngine.throwAsScriptException(NashornScriptEngine.java:467)\n</code></pre>\n<p>How do I fix this issue?</p>\n"},{"tags":["java","spring-boot"],"comments":[{"owner":{"account_id":1473276,"reputation":110999,"user_id":1384297,"accept_rate":100,"display_name":"Andy Wilkinson"},"score":0,"creation_date":1582273741,"post_id":60323876,"comment_id":106727719,"body_markdown":"It looks as if `loader.path` is coming from the environment when you don’t specify it as a system property. What environment variables do you have set? In addition to `loader.path`, things like `loader_path` and `LOADER_PATH` will also match.","body":"It looks as if <code>loader.path</code> is coming from the environment when you don’t specify it as a system property. What environment variables do you have set? In addition to <code>loader.path</code>, things like <code>loader_path</code> and <code>LOADER_PATH</code> will also match."},{"owner":{"account_id":12105257,"reputation":287,"user_id":8844276,"display_name":"J.Doe"},"score":0,"creation_date":1582280744,"post_id":60323876,"comment_id":106731259,"body_markdown":"According to docs it should read loader.properties file when it&#39;s found as in this case. This should be sufficient. I don&#39;t want to specify loader.path in any other way.","body":"According to docs it should read loader.properties file when it&#39;s found as in this case. This should be sufficient. I don&#39;t want to specify loader.path in any other way."},{"owner":{"account_id":1473276,"reputation":110999,"user_id":1384297,"accept_rate":100,"display_name":"Andy Wilkinson"},"score":0,"creation_date":1582316728,"post_id":60323876,"comment_id":106749164,"body_markdown":"Properties in loader.properties have lower precedence than those provided as system properties and environment variables. I believe you have an environment variable set and it is preventing the property in loader.properties from being used.","body":"Properties in loader.properties have lower precedence than those provided as system properties and environment variables. I believe you have an environment variable set and it is preventing the property in loader.properties from being used."},{"owner":{"account_id":12105257,"reputation":287,"user_id":8844276,"display_name":"J.Doe"},"score":0,"creation_date":1582719068,"post_id":60323876,"comment_id":106872443,"body_markdown":"I don&#39;t have any environment properties set that could impact this. I believe if I had the log file would have shown it.","body":"I don&#39;t have any environment properties set that could impact this. I believe if I had the log file would have shown it."}],"answers":[{"tags":[],"owner":{"account_id":4706918,"reputation":764,"user_id":3808721,"display_name":"Vishal"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1661442385,"creation_date":1661442385,"answer_id":73490411,"question_id":60323876,"body_markdown":"Make sure in your pom.xml you have &quot;ZIP&quot; layout set for spring-boot-maven-plugin.\r\n\r\nReference document [here][1]\r\n\r\n    &lt;plugin&gt;\r\n\t\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\r\n\t\t\t\t&lt;configuration&gt;\r\n\t\t\t\t\t&lt;mainClass&gt;${start-class}&lt;/mainClass&gt;\r\n\t\t\t\t\t&lt;layout&gt;ZIP&lt;/layout&gt; &lt;!-- to support PropertiesLaunchar --&gt;\r\n\t\t\t\t&lt;/configuration&gt;\r\n                ...\r\n\t\t\t&lt;/plugin&gt;\r\n\r\n\r\n  [1]: https://docs.spring.io/spring-boot/docs/current/maven-plugin/reference/htmlsingle/#packaging","title":"loader.properties are not read in spring boot","body":"<p>Make sure in your pom.xml you have &quot;ZIP&quot; layout set for spring-boot-maven-plugin.</p>\n<p>Reference document <a href=\"https://docs.spring.io/spring-boot/docs/current/maven-plugin/reference/htmlsingle/#packaging\" rel=\"nofollow noreferrer\">here</a></p>\n<pre><code>&lt;plugin&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n            &lt;configuration&gt;\n                &lt;mainClass&gt;${start-class}&lt;/mainClass&gt;\n                &lt;layout&gt;ZIP&lt;/layout&gt; &lt;!-- to support PropertiesLaunchar --&gt;\n            &lt;/configuration&gt;\n            ...\n        &lt;/plugin&gt;\n</code></pre>\n"}],"owner":{"account_id":12105257,"reputation":287,"user_id":8844276,"display_name":"J.Doe"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1769,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1661442385,"creation_date":1582214098,"question_id":60323876,"body_markdown":"My `loader.properties` file contains only one entry:\r\n```\r\n   loader.path=BOOT-INF/classes/config/common,BOOT-INF/classes/config/wres-ws,BOOT-INF/lib\r\n```\r\n\r\nIt&#39;s added correctly to jar, but when I run it it&#39;s found but not read. I get:\r\n\r\n    $ java -Dloader.debug=true -jar target/myapp-0.0.1-SNAPSHOT.jar\r\n    Trying file: C:\\dev\\myapp/loader.properties\r\n    Not found: file:C:\\dev\\myapp/loader.properties\r\n    Trying classpath: /loader.properties\r\n    Not found: classpath:loader.properties\r\n    Trying classpath: /BOOT-INF/classes/loader.properties\r\n    Found: classpath:BOOT-INF/classes/loader.properties\r\n    Property &#39;loader.path&#39; from environment:\r\n    Nested archive paths: [/]\r\n    Adding classpath entries from nested /\r\n\r\nBut when I run:\r\n\r\n    $ java -Dloader.debug=true -Dloader.path=BOOT-INF/classes/config/common,BOOT-INF/classes/config/wres-ws,BOOT-INF/lib -jar target/myapp-0.0.1-SNAPSHOT.jar\r\n    Trying file: C:\\dev\\myapp/loader.properties\r\n    Not found: file:C:\\dev\\myapp/loader.properties\r\n    Trying classpath: /loader.properties\r\n    Not found: classpath:loader.properties\r\n    Trying classpath: /BOOT-INF/classes/loader.properties\r\n    Found: classpath:BOOT-INF/classes/loader.properties\r\n    Property &#39;loader.path&#39; from environment: BOOT-INF/classes/config/common,BOOT-INF/classes/config/wres-ws,BOOT-INF/lib\r\n    Nested archive paths: [BOOT-INF/classes/config/common/, BOOT-INF/classes/config/wres-ws/, BOOT-INF/lib/]\r\n    Adding classpath entries from nested BOOT-INF/classes/config/common/\r\n    Adding classpath entries from nested BOOT-INF/classes/config/wres-ws/\r\n    Adding classpath entries from nested BOOT-INF/lib/\r\n\r\nproperty is read from environment and all paths added to classpath.\r\n\r\nHow do I fix it?","title":"loader.properties are not read in spring boot","body":"<p>My <code>loader.properties</code> file contains only one entry:</p>\n\n<pre><code>   loader.path=BOOT-INF/classes/config/common,BOOT-INF/classes/config/wres-ws,BOOT-INF/lib\n</code></pre>\n\n<p>It's added correctly to jar, but when I run it it's found but not read. I get:</p>\n\n<pre><code>$ java -Dloader.debug=true -jar target/myapp-0.0.1-SNAPSHOT.jar\nTrying file: C:\\dev\\myapp/loader.properties\nNot found: file:C:\\dev\\myapp/loader.properties\nTrying classpath: /loader.properties\nNot found: classpath:loader.properties\nTrying classpath: /BOOT-INF/classes/loader.properties\nFound: classpath:BOOT-INF/classes/loader.properties\nProperty 'loader.path' from environment:\nNested archive paths: [/]\nAdding classpath entries from nested /\n</code></pre>\n\n<p>But when I run:</p>\n\n<pre><code>$ java -Dloader.debug=true -Dloader.path=BOOT-INF/classes/config/common,BOOT-INF/classes/config/wres-ws,BOOT-INF/lib -jar target/myapp-0.0.1-SNAPSHOT.jar\nTrying file: C:\\dev\\myapp/loader.properties\nNot found: file:C:\\dev\\myapp/loader.properties\nTrying classpath: /loader.properties\nNot found: classpath:loader.properties\nTrying classpath: /BOOT-INF/classes/loader.properties\nFound: classpath:BOOT-INF/classes/loader.properties\nProperty 'loader.path' from environment: BOOT-INF/classes/config/common,BOOT-INF/classes/config/wres-ws,BOOT-INF/lib\nNested archive paths: [BOOT-INF/classes/config/common/, BOOT-INF/classes/config/wres-ws/, BOOT-INF/lib/]\nAdding classpath entries from nested BOOT-INF/classes/config/common/\nAdding classpath entries from nested BOOT-INF/classes/config/wres-ws/\nAdding classpath entries from nested BOOT-INF/lib/\n</code></pre>\n\n<p>property is read from environment and all paths added to classpath.</p>\n\n<p>How do I fix it?</p>\n"},{"tags":["java","api","rest","get"],"answers":[{"tags":[],"owner":{"account_id":9717280,"reputation":31,"user_id":7207203,"display_name":"Costin Chiulan"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1661442263,"creation_date":1661442263,"answer_id":73490385,"question_id":73490239,"body_markdown":"From postman you have the possibility to copy the request as curl, from the right sidebar. There is a &lt;/&gt; sign. Click on it and click on copy snippet. \r\n\r\nThen open the inspect console in the browser, go to network tab, find your request and right-click -&gt; copy -&gt; copy as curl.\r\n\r\nThen you should check the differences between them. Postman add some headers when a requests is executed so this may be the cause.\r\n\r\n\r\nIf you can update nginx configuration\r\n\r\nFrom: http://nginx.org/r/large_client_header_buffers\r\n\r\n```\r\nSyntax: large_client_header_buffers number size ;\r\nDefault: large_client_header_buffers 4 8k;\r\nContext: http, server\r\n```\r\n\r\nMore details about how to update nginx configuration regarding this issue you can find in this post\r\nhttps://stackoverflow.com/questions/1067334/how-to-set-the-allowed-url-length-for-a-nginx-request-error-code-414-uri-too\r\n","title":"414 Error Request - URI too Large Through Postman","body":"<p>From postman you have the possibility to copy the request as curl, from the right sidebar. There is a &lt;/&gt; sign. Click on it and click on copy snippet.</p>\n<p>Then open the inspect console in the browser, go to network tab, find your request and right-click -&gt; copy -&gt; copy as curl.</p>\n<p>Then you should check the differences between them. Postman add some headers when a requests is executed so this may be the cause.</p>\n<p>If you can update nginx configuration</p>\n<p>From: <a href=\"http://nginx.org/r/large_client_header_buffers\" rel=\"nofollow noreferrer\">http://nginx.org/r/large_client_header_buffers</a></p>\n<pre><code>Syntax: large_client_header_buffers number size ;\nDefault: large_client_header_buffers 4 8k;\nContext: http, server\n</code></pre>\n<p>More details about how to update nginx configuration regarding this issue you can find in this post\n<a href=\"https://stackoverflow.com/questions/1067334/how-to-set-the-allowed-url-length-for-a-nginx-request-error-code-414-uri-too\">How to set the allowed url length for a nginx request (error code: 414, uri too large)</a></p>\n"}],"owner":{"account_id":26159648,"reputation":1,"user_id":19846415,"display_name":"David"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1244,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1661442263,"creation_date":1661441556,"question_id":73490239,"body_markdown":"I have a GET request with huge number of parameters and it works fine whenever I hit it through the browser but whenever I try to hit the same request through Postman, I get - &quot;414 error - Request URI Too Large | nginx&quot;.\r\nThis is something weird cause I am getting the results through browser. \r\nPlease help.","title":"414 Error Request - URI too Large Through Postman","body":"<p>I have a GET request with huge number of parameters and it works fine whenever I hit it through the browser but whenever I try to hit the same request through Postman, I get - &quot;414 error - Request URI Too Large | nginx&quot;.\nThis is something weird cause I am getting the results through browser.\nPlease help.</p>\n"},{"tags":["java","spring-boot","maven"],"comments":[{"owner":{"account_id":8414320,"reputation":4785,"user_id":6315242,"display_name":"Per Huss"},"score":0,"creation_date":1661440904,"post_id":73490046,"comment_id":129778502,"body_markdown":"Have you tried looking at the jar? Run `jar -tf target\\my-application-0.0.1-SNAPSHOT.jar` to list the files it contains to start with...","body":"Have you tried looking at the jar? Run <code>jar -tf target\\my-application-0.0.1-SNAPSHOT.jar</code> to list the files it contains to start with..."},{"owner":{"account_id":16264201,"reputation":77,"user_id":13821253,"display_name":"M Hot"},"score":0,"creation_date":1661441841,"post_id":73490046,"comment_id":129778923,"body_markdown":"Yes, its under ..BOOT-INF/classes/test/ExampleApplication.class . Any further suggestions?","body":"Yes, its under ..BOOT-INF/classes/test/ExampleApplication.class . Any further suggestions?"}],"answers":[{"tags":[],"owner":{"account_id":5947904,"reputation":156,"user_id":4676891,"display_name":"zack"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1661441198,"creation_date":1661441198,"answer_id":73490151,"question_id":73490046,"body_markdown":"I had a similar issue to this a few weeks ago. Spring looks for the source for most classes to be in the `/src/main` folder.\r\nIt looks like you&#39;re missing the file from that folder. In my case, I had placed it in just `/src` instead of `/src/main`","title":"Spring Boot JAR file not working with ClassNotFoundException","body":"<p>I had a similar issue to this a few weeks ago. Spring looks for the source for most classes to be in the <code>/src/main</code> folder.\nIt looks like you're missing the file from that folder. In my case, I had placed it in just <code>/src</code> instead of <code>/src/main</code></p>\n"},{"tags":[],"owner":{"account_id":8414320,"reputation":4785,"user_id":6315242,"display_name":"Per Huss"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1661441504,"creation_date":1661441504,"answer_id":73490230,"question_id":73490046,"body_markdown":"The class name in the exception is a file name and not a class name. That makes me suspect that you have specified the main class incorrectly. Have you specified the name of the class in the spring-boot-maven-plugin with\r\n\r\n    &lt;configuration&gt;\r\n      &lt;mainClass&gt;foo.bar.ExampleApplication&lt;/mainClass&gt;\r\n    &lt;/configuration&gt;\r\n\r\nor as a Main-Class in the manifest? Note that you should use dot notation for packages...","title":"Spring Boot JAR file not working with ClassNotFoundException","body":"<p>The class name in the exception is a file name and not a class name. That makes me suspect that you have specified the main class incorrectly. Have you specified the name of the class in the spring-boot-maven-plugin with</p>\n<pre><code>&lt;configuration&gt;\n  &lt;mainClass&gt;foo.bar.ExampleApplication&lt;/mainClass&gt;\n&lt;/configuration&gt;\n</code></pre>\n<p>or as a Main-Class in the manifest? Note that you should use dot notation for packages...</p>\n"}],"owner":{"account_id":16264201,"reputation":77,"user_id":13821253,"display_name":"M Hot"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1632,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":73490230,"answer_count":2,"score":0,"last_activity_date":1661441870,"creation_date":1661440644,"question_id":73490046,"body_markdown":"I have a Spring Boot Application that is working. \r\n\r\nI did\r\n\r\n    mvn clean package\r\n\r\nand the *.jar* file is my *target* folder.\r\n\r\nThen I try to execute the following command:\r\n\r\n    java -jar .\\target\\my-application-0.0.1-SNAPSHOT.jar\r\n\r\nand I get the following Error:\r\n\r\n    Exception in thread &quot;main&quot; java.lang.ClassNotFoundException: C:\\Users\\test\\example-application\\example-app/src/main/test/ExampleApplication\r\n            at java.base/java.lang.Class.forName0(Native Method)\r\n            at java.base/java.lang.Class.forName(Class.java:467)\r\n            at org.springframework.boot.loader.MainMethodRunner.run(MainMethodRunner.java:46)\r\n            at org.springframework.boot.loader.Launcher.launch(Launcher.java:108)\r\n            at org.springframework.boot.loader.Launcher.launch(Launcher.java:58)\r\n            at org.springframework.boot.loader.JarLauncher.main(JarLauncher.java:65)\r\n\r\n\r\n\r\nResearching on stackoverflow just recommend an issue that I already included ...\r\nIt was recommended to include this plugin in order to include the maven jars into the project .... *spring-boot-maven-plugin*\r\n\r\n    \t\t&lt;plugin&gt;\r\n\t\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\r\n\t\t\t&lt;/plugin&gt;\r\n\r\n\r\nWhat else could be the reason for it not working?\r\n","title":"Spring Boot JAR file not working with ClassNotFoundException","body":"<p>I have a Spring Boot Application that is working.</p>\n<p>I did</p>\n<pre><code>mvn clean package\n</code></pre>\n<p>and the <em>.jar</em> file is my <em>target</em> folder.</p>\n<p>Then I try to execute the following command:</p>\n<pre><code>java -jar .\\target\\my-application-0.0.1-SNAPSHOT.jar\n</code></pre>\n<p>and I get the following Error:</p>\n<pre><code>Exception in thread &quot;main&quot; java.lang.ClassNotFoundException: C:\\Users\\test\\example-application\\example-app/src/main/test/ExampleApplication\n        at java.base/java.lang.Class.forName0(Native Method)\n        at java.base/java.lang.Class.forName(Class.java:467)\n        at org.springframework.boot.loader.MainMethodRunner.run(MainMethodRunner.java:46)\n        at org.springframework.boot.loader.Launcher.launch(Launcher.java:108)\n        at org.springframework.boot.loader.Launcher.launch(Launcher.java:58)\n        at org.springframework.boot.loader.JarLauncher.main(JarLauncher.java:65)\n</code></pre>\n<p>Researching on stackoverflow just recommend an issue that I already included ...\nIt was recommended to include this plugin in order to include the maven jars into the project .... <em>spring-boot-maven-plugin</em></p>\n<pre><code>        &lt;plugin&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n        &lt;/plugin&gt;\n</code></pre>\n<p>What else could be the reason for it not working?</p>\n"},{"tags":["java","spring-boot","circular-dependency","mapstruct"],"answers":[{"tags":[],"owner":{"account_id":23191137,"reputation":1266,"user_id":17287498,"display_name":"Ben Zegveld"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1661441736,"creation_date":1661441736,"answer_id":73490284,"question_id":73479443,"body_markdown":"You want to use a `CycleAvoidingMappingContext` and disable the `builder` usage for mapstruct. `@Mapper(builder = @Builder(disableBuilder = true))`\r\n\r\nThis will reuse the previously instantiated implementation upon mapping it the second time and not enter the actual mapping process again. This however will only work with `setters` and it will not work if you are using `builders` or `complete field assignment through constructor`. With those last 2 methods the mapping of the fields takes place before the construction of the object. Thus for breaking the cycle it will not have access to a previously instantiated value and therefor still end up in a `StackOverflowException`.\r\n\r\nYou can find an example at the mapstruct example repository:\r\n * https://github.com/mapstruct/mapstruct-examples/tree/main/mapstruct-mapping-with-cycles/\r\n\r\nCheck these stackoverflow questions and answers for more information about different ways to solve issues with cycles:\r\n * https://stackoverflow.com/questions/55646904/mapping-objects-with-bi-directional-relations-with-mapstruct\r\n * https://stackoverflow.com/questions/48924232/how-to-map-an-object-contains-other-object-with-onetomany\r\n\r\nIn case you want to break the cycle in the resulting structure:\r\n * https://stackoverflow.com/questions/70761563/how-to-avoid-cyclic-dependency-when-using-mapstruct-and-converting-collections\r\n","title":"mapping target ignore doesn&#39;t work with nested one to many relation and circular dependency lists, Spring boot Mapstruct returns stackoverflow error","body":"<p>You want to use a <code>CycleAvoidingMappingContext</code> and disable the <code>builder</code> usage for mapstruct. <code>@Mapper(builder = @Builder(disableBuilder = true))</code></p>\n<p>This will reuse the previously instantiated implementation upon mapping it the second time and not enter the actual mapping process again. This however will only work with <code>setters</code> and it will not work if you are using <code>builders</code> or <code>complete field assignment through constructor</code>. With those last 2 methods the mapping of the fields takes place before the construction of the object. Thus for breaking the cycle it will not have access to a previously instantiated value and therefor still end up in a <code>StackOverflowException</code>.</p>\n<p>You can find an example at the mapstruct example repository:</p>\n<ul>\n<li><a href=\"https://github.com/mapstruct/mapstruct-examples/tree/main/mapstruct-mapping-with-cycles/\" rel=\"nofollow noreferrer\">https://github.com/mapstruct/mapstruct-examples/tree/main/mapstruct-mapping-with-cycles/</a></li>\n</ul>\n<p>Check these stackoverflow questions and answers for more information about different ways to solve issues with cycles:</p>\n<ul>\n<li><a href=\"https://stackoverflow.com/questions/55646904/mapping-objects-with-bi-directional-relations-with-mapstruct\">Mapping objects with bi-directional relations with Mapstruct</a></li>\n<li><a href=\"https://stackoverflow.com/questions/48924232/how-to-map-an-object-contains-other-object-with-onetomany\">How to Map an object contains other object with @oneToMany</a></li>\n</ul>\n<p>In case you want to break the cycle in the resulting structure:</p>\n<ul>\n<li><a href=\"https://stackoverflow.com/questions/70761563/how-to-avoid-cyclic-dependency-when-using-mapstruct-and-converting-collections\">How to avoid cyclic dependency when using MapStruct and converting collections (List)?</a></li>\n</ul>\n"}],"owner":{"account_id":19126013,"reputation":1,"user_id":13968979,"display_name":"Canberk Atbinici"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":701,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1661441736,"creation_date":1661375024,"question_id":73479443,"body_markdown":"I am using spring boot and mapstruct 1.5.1\r\n\r\n\r\nI have 4 layer one to many relations in the structure and I&#39;m trying map whole structure. However, at the bottom (last) layer I am getting stackoverflow exception because of circular dependency. I tried ignore with @Mapping annotation and pointed last layers circle but it didn&#39;t work. \r\n\r\nHere is my whole object tree, when i try to add the document related with document type it&#39;s throwing an error. I used ignore before in more basic relations and it worked but now i can&#39;t figurate how to solve this error.\r\n\r\nproject 1-----&gt;n documentClass 1-----&gt;n documentType 1-----&gt; document\r\n\r\nI&#39;m tying map project entity to projectDto\r\n\r\nhere is how i&#39;m using ignore in @Mapping annotation :\r\n\r\n```@Mapping(target=&quot;documentClasses.documentTypes.documents.documentType&quot; ignore=true)```\r\n[@Mapping annotation usage][1]\r\nI broke the documents relation to take picture of instance\r\n[Project entity instance][2]\r\nIf i add the document relation this happens \r\n[Error][3]\r\nAnd also following photo belong to project entity instance with document \r\n [project entity instance with document ][4]\r\nI also added @EqualsAndHashCode annotation into entities it was working until i added document class into relations. \r\nthis is how i used @EqualsAndHashCode\r\n\r\n```@EqualsAndHashCode(callSuper = false, exclude= &quot;documentType&quot;)```\r\n[Document Entity][5]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/lojTR.png\r\n  [2]: https://i.stack.imgur.com/zJ7j2.png\r\n  [3]: https://i.stack.imgur.com/B3688.jpg\r\n  [4]: https://i.stack.imgur.com/gV45Y.jpg\r\n  [5]: https://i.stack.imgur.com/GZOgB.jpg","title":"mapping target ignore doesn&#39;t work with nested one to many relation and circular dependency lists, Spring boot Mapstruct returns stackoverflow error","body":"<p>I am using spring boot and mapstruct 1.5.1</p>\n<p>I have 4 layer one to many relations in the structure and I'm trying map whole structure. However, at the bottom (last) layer I am getting stackoverflow exception because of circular dependency. I tried ignore with @Mapping annotation and pointed last layers circle but it didn't work.</p>\n<p>Here is my whole object tree, when i try to add the document related with document type it's throwing an error. I used ignore before in more basic relations and it worked but now i can't figurate how to solve this error.</p>\n<p>project 1-----&gt;n documentClass 1-----&gt;n documentType 1-----&gt; document</p>\n<p>I'm tying map project entity to projectDto</p>\n<p>here is how i'm using ignore in @Mapping annotation :</p>\n<p><code>@Mapping(target=&quot;documentClasses.documentTypes.documents.documentType&quot; ignore=true)</code>\n<a href=\"https://i.stack.imgur.com/lojTR.png\" rel=\"nofollow noreferrer\">@Mapping annotation usage</a>\nI broke the documents relation to take picture of instance\n<a href=\"https://i.stack.imgur.com/zJ7j2.png\" rel=\"nofollow noreferrer\">Project entity instance</a>\nIf i add the document relation this happens\n<a href=\"https://i.stack.imgur.com/B3688.jpg\" rel=\"nofollow noreferrer\">Error</a>\nAnd also following photo belong to project entity instance with document\n<a href=\"https://i.stack.imgur.com/gV45Y.jpg\" rel=\"nofollow noreferrer\">project entity instance with document </a>\nI also added @EqualsAndHashCode annotation into entities it was working until i added document class into relations.\nthis is how i used @EqualsAndHashCode</p>\n<p><code>@EqualsAndHashCode(callSuper = false, exclude= &quot;documentType&quot;)</code>\n<a href=\"https://i.stack.imgur.com/GZOgB.jpg\" rel=\"nofollow noreferrer\">Document Entity</a></p>\n"},{"tags":["java","spring","spring-boot","hibernate","jpa"],"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1661441120,"post_id":73490128,"comment_id":129778594,"body_markdown":"Please trim your code to make it easier to find your problem. Follow these guidelines to create a [minimal reproducible example](https://stackoverflow.com/help/minimal-reproducible-example).","body":"Please trim your code to make it easier to find your problem. Follow these guidelines to create a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}],"answers":[{"tags":[],"owner":{"account_id":23783500,"reputation":5175,"user_id":17795888,"display_name":"Chaosfire"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1661441598,"creation_date":1661441342,"answer_id":73490190,"question_id":73490128,"body_markdown":"Always check caused by for any exception you get. For you:\r\n```\r\n Caused by: java.lang.ClassCastException: class net.cdac.TMS.model.User cannot be cast to class java.io.Serializable\r\n```\r\nHave your `User` class implement [Serializable][1] and that should fix it.\r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/7/docs/api/java/io/Serializable.html","title":"Could not commit JPA transaction while trying to do the registration in a spring project","body":"<p>Always check caused by for any exception you get. For you:</p>\n<pre><code> Caused by: java.lang.ClassCastException: class net.cdac.TMS.model.User cannot be cast to class java.io.Serializable\n</code></pre>\n<p>Have your <code>User</code> class implement <a href=\"https://docs.oracle.com/javase/7/docs/api/java/io/Serializable.html\" rel=\"nofollow noreferrer\">Serializable</a> and that should fix it.</p>\n"}],"owner":{"account_id":26096056,"reputation":13,"user_id":19792173,"display_name":"Ananya Tripathi"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":914,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1661441598,"creation_date":1661441108,"question_id":73490128,"body_markdown":"I am using netbeans ide for Spring project. I am continuously getting the error could not commit jpa transaction on trying to do the registration (saving data on MySQL database). This is the error stack:\r\n\r\n There was an unexpected error (type=Internal Server Error, status=500).\r\nCould not commit JPA transaction; nested exception is javax.persistence.RollbackException: Error while committing the transaction\r\norg.springframework.transaction.TransactionSystemException: Could not commit JPA transaction; nested exception is javax.persistence.RollbackException: Error while committing the transaction\r\n\tat org.springframework.orm.jpa.JpaTransactionManager.doCommit(JpaTransactionManager.java:571)\r\n\tat org.springframework.transaction.support.AbstractPlatformTransactionManager.processCommit(AbstractPlatformTransactionManager.java:743)\r\n\tat org.springframework.transaction.support.AbstractPlatformTransactionManager.commit(AbstractPlatformTransactionManager.java:711)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.commitTransactionAfterReturning(TransactionAspectSupport.java:654)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:407)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\r\n\tat org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\r\n\tat org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:174)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\r\n\tat org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\r\n\tat org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:215)\r\n\tat jdk.proxy4/jdk.proxy4.$Proxy108.save(Unknown Source)\r\n\tat net.cdac.TMS.service.UserServiceImpl.save(UserServiceImpl.java:38)\r\n\tat net.cdac.TMS.web.UserRegistrationController.registerUserAccount(UserRegistrationController.java:36)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)\r\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:568)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)\r\n\tat org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1070)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:963)\r\n\tat org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)\r\n\tat org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909)\r\n\tat javax.servlet.http.HttpServlet.service(HttpServlet.java:681)\r\n\tat org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)\r\n\tat javax.servlet.http.HttpServlet.service(HttpServlet.java:764)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:227)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)\r\n\tat org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:327)\r\n\tat org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:115)\r\n\tat org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:81)\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)\r\n\tat org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:122)\r\n\tat org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:116)\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)\r\n\tat org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:126)\r\n\tat org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:81)\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)\r\n\tat org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:109)\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)\r\n\tat org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:149)\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)\r\n\tat org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)\r\n\tat org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:223)\r\n\tat org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:217)\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)\r\n\tat org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:103)\r\n\tat org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:89)\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)\r\n\tat org.springframework.security.web.csrf.CsrfFilter.doFilterInternal(CsrfFilter.java:132)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)\r\n\tat org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)\r\n\tat org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)\r\n\tat org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:112)\r\n\tat org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:82)\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)\r\n\tat org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:55)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)\r\n\tat org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)\r\n\tat org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:211)\r\n\tat org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:183)\r\n\tat org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:354)\r\n\tat org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:267)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)\r\n\tat org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)\r\n\tat org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)\r\n\tat org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)\r\n\tat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197)\r\n\tat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)\r\n\tat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:541)\r\n\tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:135)\r\n\tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)\r\n\tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)\r\n\tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:360)\r\n\tat org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399)\r\n\tat org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)\r\n\tat org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:890)\r\n\tat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1789)\r\n\tat org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)\r\n\tat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\r\n\tat java.base/java.lang.Thread.run(Thread.java:833)\r\nCaused by: javax.persistence.RollbackException: Error while committing the transaction\r\n\tat org.hibernate.internal.ExceptionConverterImpl.convertCommitException(ExceptionConverterImpl.java:81)\r\n\tat org.hibernate.engine.transaction.internal.TransactionImpl.commit(TransactionImpl.java:104)\r\n\tat org.springframework.orm.jpa.JpaTransactionManager.doCommit(JpaTransactionManager.java:562)\r\n\t... 110 more\r\nCaused by: java.lang.ClassCastException: class net.cdac.TMS.model.User cannot be cast to class java.io.Serializable (net.cdac.TMS.model.User is in unnamed module of loader org.springframework.boot.devtools.restart.classloader.RestartClassLoader @4df620d4; java.io.Serializable is in module java.base of loader &#39;bootstrap&#39;)\r\n\tat org.hibernate.type.CollectionType.getKeyOfOwner(CollectionType.java:446)\r\n\tat org.hibernate.engine.internal.Collections.processReachableCollection(Collections.java:166)\r\n\tat org.hibernate.event.internal.FlushVisitor.processCollection(FlushVisitor.java:53)\r\n\tat org.hibernate.event.internal.AbstractVisitor.processValue(AbstractVisitor.java:104)\r\n\tat org.hibernate.event.internal.AbstractVisitor.processValue(AbstractVisitor.java:65)\r\n\tat org.hibernate.event.internal.AbstractVisitor.processEntityPropertyValues(AbstractVisitor.java:59)\r\n\tat org.hibernate.event.internal.DefaultFlushEntityEventListener.onFlushEntity(DefaultFlushEntityEventListener.java:183)\r\n\tat org.hibernate.event.service.internal.EventListenerGroupImpl.fireEventOnEachListener(EventListenerGroupImpl.java:107)\r\n\tat org.hibernate.event.internal.AbstractFlushingEventListener.flushEntities(AbstractFlushingEventListener.java:229)\r\n\tat org.hibernate.event.internal.AbstractFlushingEventListener.flushEverythingToExecutions(AbstractFlushingEventListener.java:93)\r\n\tat org.hibernate.event.internal.DefaultFlushEventListener.onFlush(DefaultFlushEventListener.java:39)\r\n\tat org.hibernate.event.service.internal.EventListenerGroupImpl.fireEventOnEachListener(EventListenerGroupImpl.java:107)\r\n\tat org.hibernate.internal.SessionImpl.doFlush(SessionImpl.java:1407)\r\n\tat org.hibernate.internal.SessionImpl.managedFlush(SessionImpl.java:489)\r\n\tat org.hibernate.internal.SessionImpl.flushBeforeTransactionCompletion(SessionImpl.java:3290)\r\n\tat org.hibernate.internal.SessionImpl.beforeTransactionCompletion(SessionImpl.java:2425)\r\n\tat org.hibernate.engine.jdbc.internal.JdbcCoordinatorImpl.beforeTransactionCompletion(JdbcCoordinatorImpl.java:449)\r\n\tat org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl.beforeCompletionCallback(JdbcResourceLocalTransactionCoordinatorImpl.java:183)\r\n\tat org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl.access$300(JdbcResourceLocalTransactionCoordinatorImpl.java:40)\r\n\tat org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl$TransactionDriverControlImpl.commit(JdbcResourceLocalTransactionCoordinatorImpl.java:281)\r\n\tat org.hibernate.engine.transaction.internal.TransactionImpl.commit(TransactionImpl.java:101)\r\n\t... 111 more\r\n\r\n\r\n\r\n\r\nThe Role.java code:\r\n\r\n```\r\npackage net.cdac.TMS.model;\r\n\r\nimport javax.persistence.Entity;\r\nimport javax.persistence.GeneratedValue;\r\nimport javax.persistence.GenerationType;\r\nimport javax.persistence.Id;\r\nimport javax.persistence.Table;\r\n\r\n@Entity\r\n@Table(name = &quot;role&quot;)\r\npublic class Role {\r\n\r\n    @Id\r\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n    private Long id;\r\n    private String name;\r\n\r\n    public Role() {\r\n\r\n    }\r\n\r\n    public Role(String name) {\r\n        super();\r\n        this.name = name;\r\n    }\r\n\r\n    public Long getId() {\r\n        return id;\r\n    }\r\n\r\n    public void setId(Long id) {\r\n        this.id = id;\r\n    }\r\n\r\n    public String getName() {\r\n        return name;\r\n    }\r\n\r\n    public void setName(String name) {\r\n        this.name = name;\r\n    }\r\n}\r\n```\r\n\r\nThe User.java code:\r\n```\r\npackage net.cdac.TMS.model;\r\n\r\nimport java.util.Collection;\r\n\r\nimport javax.persistence.CascadeType;\r\nimport javax.persistence.Column;\r\nimport javax.persistence.Entity;\r\nimport javax.persistence.FetchType;\r\nimport javax.persistence.GeneratedValue;\r\nimport javax.persistence.GenerationType;\r\nimport javax.persistence.Id;\r\nimport javax.persistence.JoinTable;\r\nimport javax.persistence.ManyToMany;\r\nimport javax.persistence.Table;\r\nimport javax.persistence.UniqueConstraint;\r\nimport javax.persistence.JoinColumn;\r\n\r\n@Entity\r\n@Table(name = &quot;user&quot;, uniqueConstraints = @UniqueConstraint(columnNames = &quot;uemailid&quot;))\r\npublic class User {\r\n\r\n    @GeneratedValue(strategy =  GenerationType.IDENTITY)\r\n    private Long id;\r\n    @Column(name = &quot;uname&quot;)\r\n    private String uName;\r\n\r\n\r\n    @Id\r\n    @Column(name = &quot;uemailid&quot;)\r\n    private String uemailid;\r\n\r\n    private String upassword;\r\n\r\n    private String usecurityQ;\r\n\r\n    private String usecurityA;\r\n\r\n    @ManyToMany(fetch = FetchType.EAGER, cascade = CascadeType.ALL)\r\n\t@JoinTable(\r\n\t\t\tname = &quot;users_roles&quot;,\r\n\t\t\tjoinColumns = @JoinColumn(\r\n\t\t            name = &quot;user_id&quot;, referencedColumnName = &quot;id&quot;),\r\n\t\t\tinverseJoinColumns = @JoinColumn(\r\n\t\t\t\t            name = &quot;role_id&quot;, referencedColumnName = &quot;id&quot;))\r\n\t\r\n\tprivate Collection&lt;Role&gt; roles;\r\n    public User() {\r\n\r\n    }\r\n    public User(String email, String password) {\r\n\r\n    }\r\n\r\n    public User(String Name, String email, String password, String securityQ, String securityA, Collection&lt;Role&gt; roles) {\r\n        super();\r\n        this.uName = Name;\r\n        this.uemailid = email;\r\n        this.upassword = password;\r\n        this.usecurityA = securityQ;\r\n        this.usecurityA = securityA;\r\n        this.roles = roles;\r\n    }\r\n\r\n    public String getUemailid() {\r\n        return uemailid;\r\n    }\r\n\r\n    public void setUemailid(String uemailid) {\r\n        this.uemailid = uemailid;\r\n    }\r\n    \r\n    public String getuName() {\r\n        return uName;\r\n    }\r\n\r\n    public void setuName(String uName) {\r\n        this.uName = uName;\r\n    }\r\n\r\n    public String getUpassword() {\r\n        return upassword;\r\n    }\r\n\r\n    public void setUpassword(String upassword) {\r\n        this.upassword = upassword;\r\n    }\r\n\r\n    public String getUsecurityQ() {\r\n        return usecurityQ;\r\n    }\r\n\r\n    public void setUsecurityQ(String usecurityQ) {\r\n        this.usecurityQ = usecurityQ;\r\n    }\r\n\r\n    public String getUsecurityA() {\r\n        return usecurityA;\r\n    }\r\n\r\n    public void setUsecurityA(String usecurityA) {\r\n        this.usecurityA = usecurityA;\r\n    }\r\n    public Collection&lt;Role&gt; getRoles() {\r\n\t\treturn roles;\r\n\t}\r\n\tpublic void setRoles(Collection&lt;Role&gt; roles) {\r\n\t\tthis.roles = roles;\r\n\t}\r\n\r\n}\r\n```\r\n\r\nThe login.html code:\r\n```\r\n&lt;!DOCTYPE html&gt;\r\n&lt;html&gt;\r\n    &lt;head&gt;\r\n        &lt;meta charset=&quot;ISO-8859-1&quot;&gt;\r\n        &lt;title&gt;User Login&lt;/title&gt;\r\n    &lt;/head&gt;\r\n    &lt;body&gt;\r\n        &lt;header&gt;\r\n\r\n            &lt;div class=&quot;header-1&quot;&gt;\r\n                &lt;img class=&quot;logo&quot; src=&quot;../images/cdacW.png&quot; alt=&quot;C-DAC&quot;&gt;\r\n            &lt;/div&gt;\r\n        &lt;/header&gt;\r\n        &lt;div class=&quot;form-center&quot;&gt;\r\n            &lt;div class=&quot;center&quot;&gt;\r\n                &lt;h1&gt;Login&lt;/h1&gt;\r\n                &lt;form th:action=&quot;@{/UserLogin}&quot; method=&quot;post&quot;&gt;\r\n                    &lt;!-- error message --&gt;\r\n                    &lt;div th:if=&quot;${param.error}&quot;&gt;\r\n                        &lt;div class=&quot;alert alert-danger&quot;&gt;Invalid username or\r\n                            password.&lt;/div&gt;\r\n                    &lt;/div&gt;\r\n\r\n                    &lt;!-- logout message --&gt;\r\n                    &lt;div th:if=&quot;${param.logout}&quot;&gt;\r\n                        &lt;div class=&quot;alert alert-info&quot;&gt;You have been logged out.&lt;/div&gt;\r\n                    &lt;/div&gt;\r\n                    \r\n                    &lt;div class=&quot;txt_field&quot;&gt;\r\n                        &lt;input type=&quot;text&quot; required&gt;\r\n                        &lt;span&gt;&lt;/span&gt;\r\n                        &lt;label&gt;Email ID&lt;/label&gt;\r\n                    &lt;/div&gt;\r\n                    &lt;div class=&quot;txt_field&quot;&gt;\r\n                        &lt;input type=&quot;password&quot; required&gt;\r\n                        &lt;span&gt;&lt;/span&gt;\r\n                        &lt;label&gt;Password&lt;/label&gt;\r\n                    &lt;/div&gt;\r\n                    &lt;div class=&quot;pass&quot;&gt;&lt;a href=&quot;/&quot; th:href=&quot;@{/forgotPasswordUser}&quot;&gt;Forgot Password?&lt;/a&gt;&lt;/div&gt;\r\n                    &lt;input type=&quot;submit&quot; value=&quot;Login&quot;&gt;\r\n                    &lt;div class=&quot;signup_link&quot;&gt;\r\n                        Not a member? &lt;a href=&quot;/&quot; th:href=&quot;@{/registration}&quot;&gt;Sign-Up&lt;/a&gt;\r\n                    &lt;/div&gt;\r\n                &lt;/form&gt;\r\n            &lt;/div&gt;\r\n        &lt;/div&gt;\r\n    &lt;/body&gt;\r\n&lt;/html&gt;\r\n```\r\n\r\nThe registeration.html code:\r\n```\r\n&lt;!DOCTYPE html&gt;\r\n&lt;html&gt;\r\n    &lt;head&gt;\r\n        &lt;title&gt;Register&lt;/title&gt;\r\n        &lt;meta charset=&quot;UTF-8&quot;&gt;\r\n        &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;&gt;\r\n        &lt;link rel=&quot;stylesheet&quot; href=&quot;https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.2/css/all.min.css&quot;&gt;\r\n    &lt;/head&gt;\r\n\r\n    &lt;body&gt;\r\n        &lt;header&gt;\r\n            &lt;div class=&quot;header-1&quot;&gt;\r\n                &lt;img class=&quot;logo&quot; src=&quot;../images/cdacW.png&quot; alt=&quot;C-DAC&quot;&gt;\r\n            &lt;/div&gt;\r\n        &lt;/header&gt;\r\n        &lt;!-- success message --&gt;\r\n        &lt;div th:if=&quot;${param.success}&quot;&gt;\r\n            &lt;div class=&quot;alert alert-info&quot;&gt;You have successfully registered!&lt;/div&gt;\r\n        &lt;/div&gt;\r\n        &lt;div class=&quot;registeration-form&quot;&gt; \r\n            &lt;h1&gt;Register here&lt;/h1&gt; \r\n            &lt;form th:action=&quot;@{/registration}&quot; method=&quot;post&quot; th:object=&quot;${user}&quot;&gt;\r\n                &lt;p&gt;Full Name : &lt;/p&gt;\r\n                &lt;input type=&quot;text&quot; name=&quot;fullname&quot; placeholder = &quot;Full Name&quot; th:field=&quot;*{uName}&quot;&gt;  \r\n                &lt;p&gt;Email id: &lt;/p&gt;\r\n                &lt;input type=&quot;email&quot; name=&quot;email&quot; placeholder = &quot;Email Id&quot; th:field=&quot;*{uemail}&quot;&gt;  \r\n                &lt;p&gt;Password : &lt;/p&gt;\r\n                &lt;input type=&quot;password&quot; name=&quot;password&quot; placeholder = &quot;Password&quot; th:field=&quot;*{upassword}&quot; required autofocus=&quot;autofocus&quot;&gt;  \r\n                &lt;p&gt;Photo: &lt;/p&gt;\r\n                &lt;!--input type=&quot;image&quot; name=&quot;image&quot; placeholder = &quot;your photo&quot;--&gt;\r\n                &lt;p&gt;Security Question: &lt;/p&gt;\r\n                &lt;label for=&quot;SecurityQ&quot;&gt; &lt;/label&gt;\r\n\r\n                &lt;select name=&quot;securityq&quot; id=&quot;securityq&quot; th:field=&quot;*{usecurityQ}&quot;&gt;\r\n                    &lt;option value=&quot;Your Favourite color &quot;&gt;Your Favourite color&lt;/option&gt;\r\n                    &lt;option value=&quot;Your first pet&#39;s name&quot;&gt;Your first pet&#39;s name&lt;/option&gt;\r\n                    &lt;option value=&quot;Your mother&#39;s maiden name&quot;&gt;Your mother&#39;s maiden name&lt;/option&gt;\r\n                    &lt;option value=&quot;Your first school&quot;&gt;Your first school&lt;/option&gt;\r\n                    &lt;option value=&quot;Your Favourite food &quot;&gt;Your Favourite food&lt;/option&gt;\r\n                    &lt;option value=&quot;The city you live in&quot;&gt;The city you live in&lt;/option&gt;\r\n                &lt;/select&gt;\r\n                &lt;p&gt;Security Answer : &lt;/p&gt;\r\n                &lt;input type=&quot;text&quot; name=&quot;securityA&quot; placeholder = &quot;Your answer&quot; th:field=&quot;*{usecurityA}&quot;&gt;  \r\n                &lt;p&gt;&lt;button type=&quot;submit&quot;&gt;Register&lt;/button&gt;&lt;/p&gt;\r\n\r\n                &lt;h5&gt;Already have an account? &lt;/h5&gt;\r\n                &lt;h4&gt;&lt;a href=&quot;/&quot; th:href=&quot;@{/UserLogin}&quot;&gt; Login&lt;/a&gt;&lt;/h4&gt;\r\n            &lt;/form&gt;\r\n        &lt;/div&gt;\r\n    &lt;/body&gt;\r\n&lt;/html&gt;\r\n```\r\n\r\nThe UserRegisterationController.java code:\r\n```\r\npackage net.cdac.TMS.web;\r\n\r\nimport org.springframework.stereotype.Controller;\r\nimport org.springframework.ui.Model;\r\nimport org.springframework.web.bind.annotation.GetMapping;\r\nimport org.springframework.web.bind.annotation.ModelAttribute;\r\nimport org.springframework.web.bind.annotation.PostMapping;\r\nimport org.springframework.web.bind.annotation.RequestMapping;\r\n\r\nimport net.cdac.TMS.service.UserService;\r\nimport net.cdac.TMS.web.dto.UserRegistrationDto;\r\n\r\n@Controller\r\n@RequestMapping(&quot;/registration&quot;)\r\npublic class UserRegistrationController {\r\n\r\n\tprivate UserService userService;\r\n\r\n\tpublic UserRegistrationController(UserService userService) {\r\n\t\tsuper();\r\n\t\tthis.userService = userService;\r\n\t}\r\n\t\r\n\t@ModelAttribute(&quot;user&quot;)\r\n    public UserRegistrationDto userRegistrationDto() {\r\n        return new UserRegistrationDto();\r\n    }\r\n\t\r\n\t@GetMapping\r\n\tpublic String showRegistrationForm() {\r\n\t\treturn &quot;registration&quot;;\r\n\t}\r\n\t\r\n\t@PostMapping\r\n\tpublic String registerUserAccount(@ModelAttribute(&quot;user&quot;) UserRegistrationDto registrationDto) {\r\n\t\tuserService.save(registrationDto);\r\n\t\treturn &quot;redirect:/registration?success&quot;;\r\n\t}\r\n}\r\n```\r\n\r\nThe mainController.java code:\r\n```\r\npackage net.cdac.TMS.web;\r\n\r\nimport org.springframework.stereotype.Controller;\r\nimport org.springframework.web.bind.annotation.GetMapping;\r\n\r\n@Controller\r\npublic class MainController {\r\n\t\r\n\t@GetMapping(&quot;/UserLogin&quot;)\r\n\tpublic String login() {\r\n\t\treturn &quot;UserLogin&quot;;\r\n\t}\r\n\t\r\n\t@GetMapping(&quot;/&quot;)\r\n\tpublic String home() {\r\n\t\treturn &quot;GuestHome&quot;;\r\n\t}\r\n}\r\n```\r\n\r\nHow to remove this error? What is the cause of this error? Thank you in advance for the help.","title":"Could not commit JPA transaction while trying to do the registration in a spring project","body":"<p>I am using netbeans ide for Spring project. I am continuously getting the error could not commit jpa transaction on trying to do the registration (saving data on MySQL database). This is the error stack:</p>\n<p>There was an unexpected error (type=Internal Server Error, status=500).\nCould not commit JPA transaction; nested exception is javax.persistence.RollbackException: Error while committing the transaction\norg.springframework.transaction.TransactionSystemException: Could not commit JPA transaction; nested exception is javax.persistence.RollbackException: Error while committing the transaction\nat org.springframework.orm.jpa.JpaTransactionManager.doCommit(JpaTransactionManager.java:571)\nat org.springframework.transaction.support.AbstractPlatformTransactionManager.processCommit(AbstractPlatformTransactionManager.java:743)\nat org.springframework.transaction.support.AbstractPlatformTransactionManager.commit(AbstractPlatformTransactionManager.java:711)\nat org.springframework.transaction.interceptor.TransactionAspectSupport.commitTransactionAfterReturning(TransactionAspectSupport.java:654)\nat org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:407)\nat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)\nat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\nat org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)\nat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\nat org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:174)\nat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\nat org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)\nat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\nat org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:215)\nat jdk.proxy4/jdk.proxy4.$Proxy108.save(Unknown Source)\nat net.cdac.TMS.service.UserServiceImpl.save(UserServiceImpl.java:38)\nat net.cdac.TMS.web.UserRegistrationController.registerUserAccount(UserRegistrationController.java:36)\nat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\nat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)\nat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\nat java.base/java.lang.reflect.Method.invoke(Method.java:568)\nat org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205)\nat org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150)\nat org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)\nat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895)\nat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)\nat org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)\nat org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1070)\nat org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:963)\nat org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)\nat org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909)\nat javax.servlet.http.HttpServlet.service(HttpServlet.java:681)\nat org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)\nat javax.servlet.http.HttpServlet.service(HttpServlet.java:764)\nat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:227)\nat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)\nat org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)\nat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)\nat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)\nat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:327)\nat org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:115)\nat org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:81)\nat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)\nat org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:122)\nat org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:116)\nat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)\nat org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:126)\nat org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:81)\nat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)\nat org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:109)\nat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)\nat org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:149)\nat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)\nat org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)\nat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)\nat org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:223)\nat org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:217)\nat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)\nat org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:103)\nat org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:89)\nat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)\nat org.springframework.security.web.csrf.CsrfFilter.doFilterInternal(CsrfFilter.java:132)\nat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)\nat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)\nat org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)\nat org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)\nat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)\nat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)\nat org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:112)\nat org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:82)\nat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)\nat org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:55)\nat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)\nat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)\nat org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)\nat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)\nat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)\nat org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:211)\nat org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:183)\nat org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:354)\nat org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:267)\nat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)\nat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)\nat org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)\nat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)\nat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)\nat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)\nat org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)\nat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)\nat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)\nat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)\nat org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)\nat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)\nat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)\nat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)\nat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197)\nat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)\nat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:541)\nat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:135)\nat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)\nat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)\nat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:360)\nat org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399)\nat org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)\nat org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:890)\nat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1789)\nat org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)\nat org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)\nat org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)\nat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\nat java.base/java.lang.Thread.run(Thread.java:833)\nCaused by: javax.persistence.RollbackException: Error while committing the transaction\nat org.hibernate.internal.ExceptionConverterImpl.convertCommitException(ExceptionConverterImpl.java:81)\nat org.hibernate.engine.transaction.internal.TransactionImpl.commit(TransactionImpl.java:104)\nat org.springframework.orm.jpa.JpaTransactionManager.doCommit(JpaTransactionManager.java:562)\n... 110 more\nCaused by: java.lang.ClassCastException: class net.cdac.TMS.model.User cannot be cast to class java.io.Serializable (net.cdac.TMS.model.User is in unnamed module of loader org.springframework.boot.devtools.restart.classloader.RestartClassLoader @4df620d4; java.io.Serializable is in module java.base of loader 'bootstrap')\nat org.hibernate.type.CollectionType.getKeyOfOwner(CollectionType.java:446)\nat org.hibernate.engine.internal.Collections.processReachableCollection(Collections.java:166)\nat org.hibernate.event.internal.FlushVisitor.processCollection(FlushVisitor.java:53)\nat org.hibernate.event.internal.AbstractVisitor.processValue(AbstractVisitor.java:104)\nat org.hibernate.event.internal.AbstractVisitor.processValue(AbstractVisitor.java:65)\nat org.hibernate.event.internal.AbstractVisitor.processEntityPropertyValues(AbstractVisitor.java:59)\nat org.hibernate.event.internal.DefaultFlushEntityEventListener.onFlushEntity(DefaultFlushEntityEventListener.java:183)\nat org.hibernate.event.service.internal.EventListenerGroupImpl.fireEventOnEachListener(EventListenerGroupImpl.java:107)\nat org.hibernate.event.internal.AbstractFlushingEventListener.flushEntities(AbstractFlushingEventListener.java:229)\nat org.hibernate.event.internal.AbstractFlushingEventListener.flushEverythingToExecutions(AbstractFlushingEventListener.java:93)\nat org.hibernate.event.internal.DefaultFlushEventListener.onFlush(DefaultFlushEventListener.java:39)\nat org.hibernate.event.service.internal.EventListenerGroupImpl.fireEventOnEachListener(EventListenerGroupImpl.java:107)\nat org.hibernate.internal.SessionImpl.doFlush(SessionImpl.java:1407)\nat org.hibernate.internal.SessionImpl.managedFlush(SessionImpl.java:489)\nat org.hibernate.internal.SessionImpl.flushBeforeTransactionCompletion(SessionImpl.java:3290)\nat org.hibernate.internal.SessionImpl.beforeTransactionCompletion(SessionImpl.java:2425)\nat org.hibernate.engine.jdbc.internal.JdbcCoordinatorImpl.beforeTransactionCompletion(JdbcCoordinatorImpl.java:449)\nat org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl.beforeCompletionCallback(JdbcResourceLocalTransactionCoordinatorImpl.java:183)\nat org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl.access$300(JdbcResourceLocalTransactionCoordinatorImpl.java:40)\nat org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl$TransactionDriverControlImpl.commit(JdbcResourceLocalTransactionCoordinatorImpl.java:281)\nat org.hibernate.engine.transaction.internal.TransactionImpl.commit(TransactionImpl.java:101)\n... 111 more</p>\n<p>The Role.java code:</p>\n<pre><code>package net.cdac.TMS.model;\n\nimport javax.persistence.Entity;\nimport javax.persistence.GeneratedValue;\nimport javax.persistence.GenerationType;\nimport javax.persistence.Id;\nimport javax.persistence.Table;\n\n@Entity\n@Table(name = &quot;role&quot;)\npublic class Role {\n\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    private Long id;\n    private String name;\n\n    public Role() {\n\n    }\n\n    public Role(String name) {\n        super();\n        this.name = name;\n    }\n\n    public Long getId() {\n        return id;\n    }\n\n    public void setId(Long id) {\n        this.id = id;\n    }\n\n    public String getName() {\n        return name;\n    }\n\n    public void setName(String name) {\n        this.name = name;\n    }\n}\n</code></pre>\n<p>The User.java code:</p>\n<pre><code>package net.cdac.TMS.model;\n\nimport java.util.Collection;\n\nimport javax.persistence.CascadeType;\nimport javax.persistence.Column;\nimport javax.persistence.Entity;\nimport javax.persistence.FetchType;\nimport javax.persistence.GeneratedValue;\nimport javax.persistence.GenerationType;\nimport javax.persistence.Id;\nimport javax.persistence.JoinTable;\nimport javax.persistence.ManyToMany;\nimport javax.persistence.Table;\nimport javax.persistence.UniqueConstraint;\nimport javax.persistence.JoinColumn;\n\n@Entity\n@Table(name = &quot;user&quot;, uniqueConstraints = @UniqueConstraint(columnNames = &quot;uemailid&quot;))\npublic class User {\n\n    @GeneratedValue(strategy =  GenerationType.IDENTITY)\n    private Long id;\n    @Column(name = &quot;uname&quot;)\n    private String uName;\n\n\n    @Id\n    @Column(name = &quot;uemailid&quot;)\n    private String uemailid;\n\n    private String upassword;\n\n    private String usecurityQ;\n\n    private String usecurityA;\n\n    @ManyToMany(fetch = FetchType.EAGER, cascade = CascadeType.ALL)\n    @JoinTable(\n            name = &quot;users_roles&quot;,\n            joinColumns = @JoinColumn(\n                    name = &quot;user_id&quot;, referencedColumnName = &quot;id&quot;),\n            inverseJoinColumns = @JoinColumn(\n                            name = &quot;role_id&quot;, referencedColumnName = &quot;id&quot;))\n    \n    private Collection&lt;Role&gt; roles;\n    public User() {\n\n    }\n    public User(String email, String password) {\n\n    }\n\n    public User(String Name, String email, String password, String securityQ, String securityA, Collection&lt;Role&gt; roles) {\n        super();\n        this.uName = Name;\n        this.uemailid = email;\n        this.upassword = password;\n        this.usecurityA = securityQ;\n        this.usecurityA = securityA;\n        this.roles = roles;\n    }\n\n    public String getUemailid() {\n        return uemailid;\n    }\n\n    public void setUemailid(String uemailid) {\n        this.uemailid = uemailid;\n    }\n    \n    public String getuName() {\n        return uName;\n    }\n\n    public void setuName(String uName) {\n        this.uName = uName;\n    }\n\n    public String getUpassword() {\n        return upassword;\n    }\n\n    public void setUpassword(String upassword) {\n        this.upassword = upassword;\n    }\n\n    public String getUsecurityQ() {\n        return usecurityQ;\n    }\n\n    public void setUsecurityQ(String usecurityQ) {\n        this.usecurityQ = usecurityQ;\n    }\n\n    public String getUsecurityA() {\n        return usecurityA;\n    }\n\n    public void setUsecurityA(String usecurityA) {\n        this.usecurityA = usecurityA;\n    }\n    public Collection&lt;Role&gt; getRoles() {\n        return roles;\n    }\n    public void setRoles(Collection&lt;Role&gt; roles) {\n        this.roles = roles;\n    }\n\n}\n</code></pre>\n<p>The login.html code:</p>\n<pre><code>&lt;!DOCTYPE html&gt;\n&lt;html&gt;\n    &lt;head&gt;\n        &lt;meta charset=&quot;ISO-8859-1&quot;&gt;\n        &lt;title&gt;User Login&lt;/title&gt;\n    &lt;/head&gt;\n    &lt;body&gt;\n        &lt;header&gt;\n\n            &lt;div class=&quot;header-1&quot;&gt;\n                &lt;img class=&quot;logo&quot; src=&quot;../images/cdacW.png&quot; alt=&quot;C-DAC&quot;&gt;\n            &lt;/div&gt;\n        &lt;/header&gt;\n        &lt;div class=&quot;form-center&quot;&gt;\n            &lt;div class=&quot;center&quot;&gt;\n                &lt;h1&gt;Login&lt;/h1&gt;\n                &lt;form th:action=&quot;@{/UserLogin}&quot; method=&quot;post&quot;&gt;\n                    &lt;!-- error message --&gt;\n                    &lt;div th:if=&quot;${param.error}&quot;&gt;\n                        &lt;div class=&quot;alert alert-danger&quot;&gt;Invalid username or\n                            password.&lt;/div&gt;\n                    &lt;/div&gt;\n\n                    &lt;!-- logout message --&gt;\n                    &lt;div th:if=&quot;${param.logout}&quot;&gt;\n                        &lt;div class=&quot;alert alert-info&quot;&gt;You have been logged out.&lt;/div&gt;\n                    &lt;/div&gt;\n                    \n                    &lt;div class=&quot;txt_field&quot;&gt;\n                        &lt;input type=&quot;text&quot; required&gt;\n                        &lt;span&gt;&lt;/span&gt;\n                        &lt;label&gt;Email ID&lt;/label&gt;\n                    &lt;/div&gt;\n                    &lt;div class=&quot;txt_field&quot;&gt;\n                        &lt;input type=&quot;password&quot; required&gt;\n                        &lt;span&gt;&lt;/span&gt;\n                        &lt;label&gt;Password&lt;/label&gt;\n                    &lt;/div&gt;\n                    &lt;div class=&quot;pass&quot;&gt;&lt;a href=&quot;/&quot; th:href=&quot;@{/forgotPasswordUser}&quot;&gt;Forgot Password?&lt;/a&gt;&lt;/div&gt;\n                    &lt;input type=&quot;submit&quot; value=&quot;Login&quot;&gt;\n                    &lt;div class=&quot;signup_link&quot;&gt;\n                        Not a member? &lt;a href=&quot;/&quot; th:href=&quot;@{/registration}&quot;&gt;Sign-Up&lt;/a&gt;\n                    &lt;/div&gt;\n                &lt;/form&gt;\n            &lt;/div&gt;\n        &lt;/div&gt;\n    &lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n<p>The registeration.html code:</p>\n<pre><code>&lt;!DOCTYPE html&gt;\n&lt;html&gt;\n    &lt;head&gt;\n        &lt;title&gt;Register&lt;/title&gt;\n        &lt;meta charset=&quot;UTF-8&quot;&gt;\n        &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;&gt;\n        &lt;link rel=&quot;stylesheet&quot; href=&quot;https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.2/css/all.min.css&quot;&gt;\n    &lt;/head&gt;\n\n    &lt;body&gt;\n        &lt;header&gt;\n            &lt;div class=&quot;header-1&quot;&gt;\n                &lt;img class=&quot;logo&quot; src=&quot;../images/cdacW.png&quot; alt=&quot;C-DAC&quot;&gt;\n            &lt;/div&gt;\n        &lt;/header&gt;\n        &lt;!-- success message --&gt;\n        &lt;div th:if=&quot;${param.success}&quot;&gt;\n            &lt;div class=&quot;alert alert-info&quot;&gt;You have successfully registered!&lt;/div&gt;\n        &lt;/div&gt;\n        &lt;div class=&quot;registeration-form&quot;&gt; \n            &lt;h1&gt;Register here&lt;/h1&gt; \n            &lt;form th:action=&quot;@{/registration}&quot; method=&quot;post&quot; th:object=&quot;${user}&quot;&gt;\n                &lt;p&gt;Full Name : &lt;/p&gt;\n                &lt;input type=&quot;text&quot; name=&quot;fullname&quot; placeholder = &quot;Full Name&quot; th:field=&quot;*{uName}&quot;&gt;  \n                &lt;p&gt;Email id: &lt;/p&gt;\n                &lt;input type=&quot;email&quot; name=&quot;email&quot; placeholder = &quot;Email Id&quot; th:field=&quot;*{uemail}&quot;&gt;  \n                &lt;p&gt;Password : &lt;/p&gt;\n                &lt;input type=&quot;password&quot; name=&quot;password&quot; placeholder = &quot;Password&quot; th:field=&quot;*{upassword}&quot; required autofocus=&quot;autofocus&quot;&gt;  \n                &lt;p&gt;Photo: &lt;/p&gt;\n                &lt;!--input type=&quot;image&quot; name=&quot;image&quot; placeholder = &quot;your photo&quot;--&gt;\n                &lt;p&gt;Security Question: &lt;/p&gt;\n                &lt;label for=&quot;SecurityQ&quot;&gt; &lt;/label&gt;\n\n                &lt;select name=&quot;securityq&quot; id=&quot;securityq&quot; th:field=&quot;*{usecurityQ}&quot;&gt;\n                    &lt;option value=&quot;Your Favourite color &quot;&gt;Your Favourite color&lt;/option&gt;\n                    &lt;option value=&quot;Your first pet's name&quot;&gt;Your first pet's name&lt;/option&gt;\n                    &lt;option value=&quot;Your mother's maiden name&quot;&gt;Your mother's maiden name&lt;/option&gt;\n                    &lt;option value=&quot;Your first school&quot;&gt;Your first school&lt;/option&gt;\n                    &lt;option value=&quot;Your Favourite food &quot;&gt;Your Favourite food&lt;/option&gt;\n                    &lt;option value=&quot;The city you live in&quot;&gt;The city you live in&lt;/option&gt;\n                &lt;/select&gt;\n                &lt;p&gt;Security Answer : &lt;/p&gt;\n                &lt;input type=&quot;text&quot; name=&quot;securityA&quot; placeholder = &quot;Your answer&quot; th:field=&quot;*{usecurityA}&quot;&gt;  \n                &lt;p&gt;&lt;button type=&quot;submit&quot;&gt;Register&lt;/button&gt;&lt;/p&gt;\n\n                &lt;h5&gt;Already have an account? &lt;/h5&gt;\n                &lt;h4&gt;&lt;a href=&quot;/&quot; th:href=&quot;@{/UserLogin}&quot;&gt; Login&lt;/a&gt;&lt;/h4&gt;\n            &lt;/form&gt;\n        &lt;/div&gt;\n    &lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n<p>The UserRegisterationController.java code:</p>\n<pre><code>package net.cdac.TMS.web;\n\nimport org.springframework.stereotype.Controller;\nimport org.springframework.ui.Model;\nimport org.springframework.web.bind.annotation.GetMapping;\nimport org.springframework.web.bind.annotation.ModelAttribute;\nimport org.springframework.web.bind.annotation.PostMapping;\nimport org.springframework.web.bind.annotation.RequestMapping;\n\nimport net.cdac.TMS.service.UserService;\nimport net.cdac.TMS.web.dto.UserRegistrationDto;\n\n@Controller\n@RequestMapping(&quot;/registration&quot;)\npublic class UserRegistrationController {\n\n    private UserService userService;\n\n    public UserRegistrationController(UserService userService) {\n        super();\n        this.userService = userService;\n    }\n    \n    @ModelAttribute(&quot;user&quot;)\n    public UserRegistrationDto userRegistrationDto() {\n        return new UserRegistrationDto();\n    }\n    \n    @GetMapping\n    public String showRegistrationForm() {\n        return &quot;registration&quot;;\n    }\n    \n    @PostMapping\n    public String registerUserAccount(@ModelAttribute(&quot;user&quot;) UserRegistrationDto registrationDto) {\n        userService.save(registrationDto);\n        return &quot;redirect:/registration?success&quot;;\n    }\n}\n</code></pre>\n<p>The mainController.java code:</p>\n<pre><code>package net.cdac.TMS.web;\n\nimport org.springframework.stereotype.Controller;\nimport org.springframework.web.bind.annotation.GetMapping;\n\n@Controller\npublic class MainController {\n    \n    @GetMapping(&quot;/UserLogin&quot;)\n    public String login() {\n        return &quot;UserLogin&quot;;\n    }\n    \n    @GetMapping(&quot;/&quot;)\n    public String home() {\n        return &quot;GuestHome&quot;;\n    }\n}\n</code></pre>\n<p>How to remove this error? What is the cause of this error? Thank you in advance for the help.</p>\n"},{"tags":["java","spring","spring-boot"],"comments":[{"owner":{"account_id":23783500,"reputation":5175,"user_id":17795888,"display_name":"Chaosfire"},"score":0,"creation_date":1661440487,"post_id":73489898,"comment_id":129778339,"body_markdown":"I think your only option is custom annotation on the class level. As far as i know, it&#39;s not possible to access the value of one field from another field&#39;s annotation.","body":"I think your only option is custom annotation on the class level. As far as i know, it&#39;s not possible to access the value of one field from another field&#39;s annotation."}],"answers":[{"tags":[],"owner":{"account_id":25690087,"reputation":1360,"user_id":19451633,"display_name":"Andrei Titov"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1661441394,"creation_date":1661441394,"answer_id":73490198,"question_id":73489898,"body_markdown":"You can create a separate method for this logic validation, for example like this:\r\n\r\n    public class CustomClass {\r\n        private String name;\r\n    \r\n        private String type;\r\n    \r\n        @JsonIgnore\r\n        @AssertTrue(message = &quot;name must be at least 3 characters long if type is Type 1&quot;)\r\n        public boolean isNameValid() {\r\n            if (&quot;Type 1&quot;.equals(type)) {\r\n                return name != null &amp;&amp; name.length() &gt;= 3;\r\n            }\r\n            return true;\r\n        }\r\n    }\r\n\r\nValidation mechanism will check this for you.","title":"Adding @Size annotation conditionally if variable is set to specific value in Java Spring Boot","body":"<p>You can create a separate method for this logic validation, for example like this:</p>\n<pre><code>public class CustomClass {\n    private String name;\n\n    private String type;\n\n    @JsonIgnore\n    @AssertTrue(message = &quot;name must be at least 3 characters long if type is Type 1&quot;)\n    public boolean isNameValid() {\n        if (&quot;Type 1&quot;.equals(type)) {\n            return name != null &amp;&amp; name.length() &gt;= 3;\n        }\n        return true;\n    }\n}\n</code></pre>\n<p>Validation mechanism will check this for you.</p>\n"}],"owner":{"account_id":6805869,"reputation":3143,"user_id":5237611,"accept_rate":71,"display_name":"Michael"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":396,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1661441394,"creation_date":1661440084,"question_id":73489898,"body_markdown":"I have a Java Spring Boot application, and I have a class called &quot;CustomClass&quot;. Here is the class definition:\r\n\r\n```java\r\npublic class CustomClass {\r\n    @Size(min = 3)\r\n    private String name;\r\n\r\n    private String type;\r\n}\r\n```\r\n\r\nRight now, I have the size of the `name` variable set to be a minimum of 3 characters in length. Some logic changed, and I only want that `@Size(min = 3)` annotation to be applied to the `name` field only if the `type` is a specific value, let&#39;s say `Type 1`. So it might look like this:\r\n\r\n```java\r\nif (type == &quot;Type 1&quot;) @Size(min = 3)\r\nprivate String name;\r\n```\r\n\r\nIs this possible, or do I need to create a separate class to handle these different constraints?","title":"Adding @Size annotation conditionally if variable is set to specific value in Java Spring Boot","body":"<p>I have a Java Spring Boot application, and I have a class called &quot;CustomClass&quot;. Here is the class definition:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class CustomClass {\n    @Size(min = 3)\n    private String name;\n\n    private String type;\n}\n</code></pre>\n<p>Right now, I have the size of the <code>name</code> variable set to be a minimum of 3 characters in length. Some logic changed, and I only want that <code>@Size(min = 3)</code> annotation to be applied to the <code>name</code> field only if the <code>type</code> is a specific value, let's say <code>Type 1</code>. So it might look like this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>if (type == &quot;Type 1&quot;) @Size(min = 3)\nprivate String name;\n</code></pre>\n<p>Is this possible, or do I need to create a separate class to handle these different constraints?</p>\n"},{"tags":["java","spring-boot","post","spring-data-rest"],"comments":[{"owner":{"account_id":4535404,"reputation":301,"user_id":3684747,"display_name":"user3684747"},"score":0,"creation_date":1661444107,"post_id":73490163,"comment_id":129779813,"body_markdown":"Does this help in any way? https://github.com/spring-projects/spring-data-rest/issues/1356","body":"Does this help in any way? <a href=\"https://github.com/spring-projects/spring-data-rest/issues/1356\" rel=\"nofollow noreferrer\">github.com/spring-projects/spring-data-rest/issues/1356</a>"},{"owner":{"account_id":12871819,"reputation":367,"user_id":9309990,"display_name":"Fsanna"},"score":0,"creation_date":1661499273,"post_id":73490163,"comment_id":129791281,"body_markdown":"I don&#39;t think it does, they don&#39;t specify clearly the way to override the method, and the user asking the question wants also to override a simple GET request, while I need to override the POST method.","body":"I don&#39;t think it does, they don&#39;t specify clearly the way to override the method, and the user asking the question wants also to override a simple GET request, while I need to override the POST method."}],"owner":{"account_id":12871819,"reputation":367,"user_id":9309990,"display_name":"Fsanna"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":144,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1661441253,"creation_date":1661441253,"question_id":73490163,"body_markdown":"I need to add my custom business logic for a POST method of one of my entities that is being handled with Spring Data REST. On the internet, I found out that I need to disable the `save` method (which is responsible for the entity creation) and then set up a `RepositoryRestController` that handles the new POST request. The code is the following.\r\n\r\nEntity Repository:\r\n\r\n```java\r\n@RepositoryRestResource\r\npublic interface AssetRepository extends PagingAndSortingRepository&lt;Asset, UUID&gt; {\r\n\r\n    @RestResource(exported = false)\r\n    @Override\r\n    Asset save(Asset asset);\r\n\r\n}\r\n```\r\n\r\nCustom Controller:\r\n\r\n```java\r\n@RepositoryRestController\r\npublic class MyEntityCustomController{\r\n\r\n    @PostMapping(\r\n            value = &quot;/assets&quot;,\r\n            produces = MediaType.APPLICATION_JSON_VALUE,\r\n            consumes = MediaType.APPLICATION_JSON_VALUE\r\n    )\r\n    @ResponseBody\r\n    public ResponseEntity&lt;MyResource&gt; addEntity(@RequestBody MyResource resource) {\r\n        // create the resource with custom logic\r\n    }\r\n\r\n}\r\n```\r\n\r\nThe application runs correctly but, whenever I try to send a POST request, I get the following response:\r\n\r\n```json\r\n{\r\n    &quot;code&quot;: null,\r\n    &quot;message&quot;: &quot;Request method &#39;POST&#39; not supported&quot;,\r\n    &quot;details&quot;: []\r\n}\r\n```\r\n\r\nI also tried to put the `@BasePathAwareController` annotation but that didn&#39;t change much. Am I doing something wrong?\r\n","title":"Override POST method in Spring Data REST not allowed","body":"<p>I need to add my custom business logic for a POST method of one of my entities that is being handled with Spring Data REST. On the internet, I found out that I need to disable the <code>save</code> method (which is responsible for the entity creation) and then set up a <code>RepositoryRestController</code> that handles the new POST request. The code is the following.</p>\n<p>Entity Repository:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@RepositoryRestResource\npublic interface AssetRepository extends PagingAndSortingRepository&lt;Asset, UUID&gt; {\n\n    @RestResource(exported = false)\n    @Override\n    Asset save(Asset asset);\n\n}\n</code></pre>\n<p>Custom Controller:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@RepositoryRestController\npublic class MyEntityCustomController{\n\n    @PostMapping(\n            value = &quot;/assets&quot;,\n            produces = MediaType.APPLICATION_JSON_VALUE,\n            consumes = MediaType.APPLICATION_JSON_VALUE\n    )\n    @ResponseBody\n    public ResponseEntity&lt;MyResource&gt; addEntity(@RequestBody MyResource resource) {\n        // create the resource with custom logic\n    }\n\n}\n</code></pre>\n<p>The application runs correctly but, whenever I try to send a POST request, I get the following response:</p>\n<pre class=\"lang-json prettyprint-override\"><code>{\n    &quot;code&quot;: null,\n    &quot;message&quot;: &quot;Request method 'POST' not supported&quot;,\n    &quot;details&quot;: []\n}\n</code></pre>\n<p>I also tried to put the <code>@BasePathAwareController</code> annotation but that didn't change much. Am I doing something wrong?</p>\n"},{"tags":["java","sonarqube"],"comments":[{"owner":{"account_id":238684,"reputation":22543,"user_id":507738,"accept_rate":71,"display_name":"MC Emperor"},"score":0,"creation_date":1661440533,"post_id":73489961,"comment_id":129778352,"body_markdown":"Well, if the only thing `setApplicationContext` is doing, is to set a `static` field, then the `setApplicationContext` method could be `static` as well.","body":"Well, if the only thing <code>setApplicationContext</code> is doing, is to set a <code>static</code> field, then the <code>setApplicationContext</code> method could be <code>static</code> as well."},{"owner":{"account_id":195854,"reputation":159194,"user_id":438992,"accept_rate":90,"display_name":"Dave Newton"},"score":0,"creation_date":1661441191,"post_id":73489961,"comment_id":129778625,"body_markdown":"If `ApplicationContextHolder` is a singleton then there&#39;s no reason to have `applicationContext` be static. Without knowing anything about your app it seems like there could be side effects as shown.","body":"If <code>ApplicationContextHolder</code> is a singleton then there&#39;s no reason to have <code>applicationContext</code> be static. Without knowing anything about your app it seems like there could be side effects as shown."},{"owner":{"account_id":195331,"reputation":275408,"user_id":438154,"accept_rate":98,"display_name":"Sotirios Delimanolis"},"score":0,"creation_date":1661441253,"post_id":73489961,"comment_id":129778657,"body_markdown":"This is a Spring anti-pattern.","body":"This is a Spring anti-pattern."},{"owner":{"account_id":3484456,"reputation":2621,"user_id":2915738,"display_name":"Asif Kamran Malick"},"score":0,"creation_date":1661442113,"post_id":73489961,"comment_id":129779030,"body_markdown":"This is an anti-pattern in any multithreaded application.  The rule just tells you that this will cause trouble down the line as the operation is not guaranteed to be thread-safe. It also generously suggests using `synchronized static` methods.","body":"This is an anti-pattern in any multithreaded application.  The rule just tells you that this will cause trouble down the line as the operation is not guaranteed to be thread-safe. It also generously suggests using <code>synchronized static</code> methods."},{"owner":{"account_id":75804,"reputation":94815,"user_id":217324,"accept_rate":96,"display_name":"Nathan Hughes"},"score":0,"creation_date":1661442290,"post_id":73489961,"comment_id":129779106,"body_markdown":"It&#39;s not about threadsafety, it&#39;s about subverting the DI containers control. Mark Seeman has posted about this, just can&#39;t find it now.","body":"It&#39;s not about threadsafety, it&#39;s about subverting the DI containers control. Mark Seeman has posted about this, just can&#39;t find it now."},{"owner":{"account_id":3484456,"reputation":2621,"user_id":2915738,"display_name":"Asif Kamran Malick"},"score":0,"creation_date":1661442482,"post_id":73489961,"comment_id":129779190,"body_markdown":"@NathanHughes I think I found the [thread-by-Mark-Seeman](https://stackoverflow.com/a/1629404/2915738) ?","body":"@NathanHughes I think I found the <a href=\"https://stackoverflow.com/a/1629404/2915738\">thread-by-Mark-Seeman</a> ?"}],"owner":{"account_id":1632114,"reputation":707,"user_id":1506449,"display_name":"Sajit Gangadharan"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":369,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1661441024,"creation_date":1661440332,"question_id":73489961,"body_markdown":"I am getting sonar issue for accessing static method from a non static method. I am not sure how to resolve this issue. Application context is static member. what is the best way to solve the sonar issue without affecting the business flow. I dont want to create it as non static member as it may side efftect.\r\n\r\n```java\r\npublic class ApplicationContextHolder implements ApplicationContextInitializer&lt;ConfigurableApplicationContext&gt;, ApplicationContextAware {\r\n\r\n    private static ApplicationContext applicationContext;\r\n\r\n    public static ApplicationContext getApplicationContext() {\r\n        return applicationContext ;\r\n    }\r\n\r\n    public void setApplicationContext(ApplicationContext context) throws BeansException {\r\n        applicationContext = (ConfigurableApplicationContext) context;\r\n    }\r\n\r\n    public void initialize(ConfigurableApplicationContext context) {\r\n        applicationContext = context;\r\n    }\r\n}\r\n```\r\n","title":"Sonar issue for calling static method from non static method","body":"<p>I am getting sonar issue for accessing static method from a non static method. I am not sure how to resolve this issue. Application context is static member. what is the best way to solve the sonar issue without affecting the business flow. I dont want to create it as non static member as it may side efftect.</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class ApplicationContextHolder implements ApplicationContextInitializer&lt;ConfigurableApplicationContext&gt;, ApplicationContextAware {\n\n    private static ApplicationContext applicationContext;\n\n    public static ApplicationContext getApplicationContext() {\n        return applicationContext ;\n    }\n\n    public void setApplicationContext(ApplicationContext context) throws BeansException {\n        applicationContext = (ConfigurableApplicationContext) context;\n    }\n\n    public void initialize(ConfigurableApplicationContext context) {\n        applicationContext = context;\n    }\n}\n</code></pre>\n"},{"tags":["java","android","android-studio","jetbrains-ide","android-studio-2.3"],"comments":[{"owner":{"account_id":4468601,"reputation":7627,"user_id":3635454,"accept_rate":75,"display_name":"pleft"},"score":0,"creation_date":1507233575,"post_id":46593767,"comment_id":80140731,"body_markdown":"check if you have more than one instances of `Android Studio` running","body":"check if you have more than one instances of <code>Android Studio</code> running"},{"owner":{"display_name":"user1531971"},"score":0,"creation_date":1507234162,"post_id":46593767,"comment_id":80140977,"body_markdown":"That code will raise an assertion if the object it is complaining about is null (though probably not in a non-debug VM as we see here), and there is an interesting related comment. Maybe provide your whole build.gradle because it is having trouble getting the &quot;test&quot; model.","body":"That code will raise an assertion if the object it is complaining about is null (though probably not in a non-debug VM as we see here), and there is an interesting related comment. Maybe provide your whole build.gradle because it is having trouble getting the &quot;test&quot; model."},{"owner":{"account_id":6263455,"reputation":2197,"user_id":4869914,"accept_rate":55,"display_name":"keyboard"},"score":0,"creation_date":1507234942,"post_id":46593767,"comment_id":80141358,"body_markdown":"@jdv Build.gradle provided along with some more info :)","body":"@jdv Build.gradle provided along with some more info :)"},{"owner":{"display_name":"user1531971"},"score":0,"creation_date":1507235497,"post_id":46593767,"comment_id":80141643,"body_markdown":"Get rid of the empty `productFlavors { }` closure.","body":"Get rid of the empty <code>productFlavors { }</code> closure."},{"owner":{"account_id":6263455,"reputation":2197,"user_id":4869914,"accept_rate":55,"display_name":"keyboard"},"score":0,"creation_date":1507235911,"post_id":46593767,"comment_id":80141830,"body_markdown":"@jdv Argh, yeah I had that one already removed. Still the same error.","body":"@jdv Argh, yeah I had that one already removed. Still the same error."},{"owner":{"display_name":"user1531971"},"score":0,"creation_date":1507236024,"post_id":46593767,"comment_id":80141881,"body_markdown":"Do you actually have test source sets?","body":"Do you actually have test source sets?"},{"owner":{"account_id":6263455,"reputation":2197,"user_id":4869914,"accept_rate":55,"display_name":"keyboard"},"score":0,"creation_date":1507236057,"post_id":46593767,"comment_id":80141895,"body_markdown":"Not that I knew of...I didn&#39;t create any. Maybe Cocos2d-x has some hidden somewhere and that&#39;s causing issues? How can I find out?","body":"Not that I knew of...I didn&#39;t create any. Maybe Cocos2d-x has some hidden somewhere and that&#39;s causing issues? How can I find out?"},{"owner":{"display_name":"user1531971"},"score":0,"creation_date":1507236189,"post_id":46593767,"comment_id":80141951,"body_markdown":"I suppose it doesn&#39;t matter. For some reason this project does not have an &quot;AndroidGradleModel&quot;, at least in this context. Sounds like a bug.","body":"I suppose it doesn&#39;t matter. For some reason this project does not have an &quot;AndroidGradleModel&quot;, at least in this context. Sounds like a bug."},{"owner":{"account_id":6263455,"reputation":2197,"user_id":4869914,"accept_rate":55,"display_name":"keyboard"},"score":0,"creation_date":1507236312,"post_id":46593767,"comment_id":80142008,"body_markdown":"Well, it definitely is a bug in AndroidStudio/Gradle. I reported it to google - but what can I do to get my project to debug for now?","body":"Well, it definitely is a bug in AndroidStudio/Gradle. I reported it to google - but what can I do to get my project to debug for now?"}],"answers":[{"tags":[],"owner":{"account_id":11935345,"reputation":420,"user_id":8734018,"display_name":"Bernardo do Amaral Teodosio"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1661440836,"creation_date":1661440836,"answer_id":73490079,"question_id":46593767,"body_markdown":"Make sure your NDK path is properly configured on Project Structure (File &gt; Project Structure &gt; SDK Location &gt; Android NDK Location). Click &quot;OK&quot; and try to sync again.","title":"Gradle debug Crashes with NullpointerException - Run works fine","body":"<p>Make sure your NDK path is properly configured on Project Structure (File &gt; Project Structure &gt; SDK Location &gt; Android NDK Location). Click &quot;OK&quot; and try to sync again.</p>\n"}],"owner":{"account_id":6263455,"reputation":2197,"user_id":4869914,"accept_rate":55,"display_name":"keyboard"},"comment_count":9,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":676,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1661440836,"creation_date":1507233249,"question_id":46593767,"body_markdown":"Gradle crashes with a NullpointerException when trying to debug my app in Android Studio. It works fine just to Run the app. Android Studio 2.3.3.\r\n\r\nHere&#39;s the gradle stacktrace:\r\n\r\n    java.lang.NullPointerException\r\n    \tat com.android.tools.idea.run.GradleApplicationIdProvider.getTestPackageName(GradleApplicationIdProvider.java:50)\r\n    \tat com.android.tools.idea.run.AndroidLaunchTasksProvider.getConnectDebuggerTask(AndroidLaunchTasksProvider.java:160)\r\n    \tat com.android.tools.idea.run.LaunchTaskRunner.run(LaunchTaskRunner.java:79)\r\n    \tat com.intellij.openapi.progress.impl.CoreProgressManager$TaskRunnable.run(CoreProgressManager.java:635)\r\n    \tat com.intellij.openapi.progress.impl.CoreProgressManager$3.run(CoreProgressManager.java:170)\r\n    \tat com.intellij.openapi.progress.impl.CoreProgressManager.registerIndicatorAndRun(CoreProgressManager.java:494)\r\n    \tat com.intellij.openapi.progress.impl.CoreProgressManager.executeProcessUnderProgress(CoreProgressManager.java:443)\r\n    \tat com.intellij.openapi.progress.impl.ProgressManagerImpl.executeProcessUnderProgress(ProgressManagerImpl.java:54)\r\n    \tat com.intellij.openapi.progress.impl.CoreProgressManager.runProcess(CoreProgressManager.java:155)\r\n    \tat com.intellij.openapi.progress.impl.ProgressManagerImpl$1.run(ProgressManagerImpl.java:128)\r\n    \tat com.intellij.openapi.application.impl.ApplicationImpl$2.run(ApplicationImpl.java:307)\r\n    \tat java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)\r\n    \tat java.util.concurrent.FutureTask.run(FutureTask.java:266)\r\n    \tat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)\r\n    \tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)\r\n    \tat java.lang.Thread.run(Thread.java:745)\r\n\r\nHere&#39;s my build.gradle inside the app folder. Some more details: This is a project with the Cocos2d-x game engine and I&#39;m trying to get Debug for native code to work. A simple test project does work, but my own project does not.\r\n\r\n    import java.util.regex.Pattern\r\n    import com.android.build.OutputFile\r\n    import org.apache.tools.ant.taskdefs.condition.Os\r\n    \r\n    \r\n    apply plugin: &#39;com.android.application&#39;\r\n    apply plugin: &#39;io.fabric&#39;\r\n    \r\n    \r\n    \r\n    task(&#39;increaseVersionCode&#39;) &lt;&lt; {\r\n        println &#39;Grade: Increasing Version Code...&#39;\r\n        def buildFile = file(&quot;build.gradle&quot;)\r\n        def pattern = Pattern.compile(&quot;versionCode\\\\s+(\\\\d+)&quot;)\r\n        def manifestText = buildFile.getText()\r\n        def matcher = pattern.matcher(manifestText)\r\n        matcher.find()\r\n        def versionCode = Integer.parseInt(matcher.group(1))\r\n        def manifestContent = matcher.replaceAll(&quot;versionCode &quot; + ++versionCode)\r\n        buildFile.write(manifestContent)\r\n    }\r\n    preBuild.dependsOn increaseVersionCode\r\n    \r\n    task deleteGraphicsAssets(type: Delete) {\r\n        println &#39;Grade: Deleting unnecessary assets...&#39;\r\n        delete &quot;assets/1136p&quot;\r\n        delete &quot;assets/2048p&quot;\r\n    }\r\n    preBuild.dependsOn deleteGraphicsAssets\r\n    \r\n    \r\n    \r\n    android {\r\n        // Going higher means that we have to request to write to external storage (used for UUID): https://stackoverflow.com/questions/36084959/cant-create-a-directory-on-storage-emulated-0-on-emulator\r\n        // But GameAnalytics reqires 24, let&#39;s see if it still works this way\r\n        compileSdkVersion 22\r\n        buildToolsVersion &#39;25.0.3&#39; // should be 25 for newer version\r\n        defaultConfig {\r\n            applicationId &quot;com.forestringgames.apps.towerduel&quot;\r\n            minSdkVersion 15\r\n            // Going higher means that we have to request to write to external storage (used for UUID): https://stackoverflow.com/questions/36084959/cant-create-a-directory-on-storage-emulated-0-on-emulator\r\n            // But GameAnalytics reqires 24, let&#39;s see if it still works this way\r\n            targetSdkVersion PROP_TARGET_SDK_VERSION\r\n            versionCode 1607\r\n            versionName &quot;1.0&quot;\r\n    //        multiDexEnabled true\r\n            externalNativeBuild {\r\n                ndkBuild {\r\n                    if (!project.hasProperty(&quot;PROP_NDK_MODE&quot;) || PROP_NDK_MODE.compareTo(&#39;none&#39;) != 0) {\r\n                        // skip the NDK Build step if PROP_NDK_MODE is none\r\n                        targets &#39;cocos2dcpp&#39;\r\n                        arguments &#39;NDK_TOOLCHAIN_VERSION=4.9&#39;\r\n                        arguments &#39;APP_PLATFORM=android-&#39; + PROP_TARGET_SDK_VERSION\r\n    \r\n    \r\n                        def module_paths = [project.file(&quot;../../FRGEngine/cocos2d&quot;).absolutePath,\r\n                                            project.file(&quot;../../FRGEngine/cocos2d/cocos&quot;).absolutePath,\r\n                                            project.file(&quot;../../FRGEngine/cocos2d/external&quot;).absolutePath]\r\n                        if (Os.isFamily(Os.FAMILY_WINDOWS)) {\r\n                            // should use &#39;/&#39;\r\n                            module_paths = module_paths.collect { it.replaceAll(&#39;\\\\\\\\&#39;, &#39;/&#39;) }\r\n                            arguments &#39;NDK_MODULE_PATH=&#39; + module_paths.join(&quot;;&quot;)\r\n                        } else {\r\n                            arguments &#39;NDK_MODULE_PATH=&#39; + module_paths.join(&#39;:&#39;)\r\n                        }\r\n    \r\n                        arguments &#39;-j&#39; + Runtime.runtime.availableProcessors()\r\n                        abiFilters.addAll(PROP_APP_ABI.split(&#39;:&#39;).collect { it as String })\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        // only added for android debugging\r\n        externalNativeBuild {\r\n            ndkBuild {\r\n                if (!project.hasProperty(&quot;PROP_NDK_MODE&quot;) || PROP_NDK_MODE.compareTo(&#39;none&#39;) != 0) {\r\n                    // skip the NDK Build step if PROP_NDK_MODE is none\r\n                    path &quot;jni/Android.mk&quot;\r\n                }\r\n            }\r\n        }\r\n        sourceSets.main {\r\n            java.srcDir &quot;src&quot;\r\n            res.srcDir &quot;res&quot;\r\n            jniLibs.srcDir &quot;libs&quot;\r\n            manifest.srcFile &quot;AndroidManifest.xml&quot;\r\n            assets.srcDir &quot;assets&quot;\r\n        }\r\n        splits {\r\n            abi {\r\n                enable true\r\n                reset()\r\n                include &#39;armeabi-v7a&#39;\r\n                //, &#39;armeabi&#39;,  &#39;armeabi-v7a&#39;, &#39;x86&#39;  - what about arm64? Test it with Crashlytics\r\n                universalApk false  //true\r\n            }\r\n    \r\n    //        density {\r\n    //            enable true\r\n    //            reset()\r\n    //            include &#39;mdpi&#39;, &#39;hdpi&#39;, &#39;xhdpi&#39;, &#39;xxhdpi&#39;, &#39;xxxhdpi&#39;\r\n    //            compatibleScreens &#39;small&#39;, &#39;normal&#39;, &#39;large&#39;, &#39;xlarge&#39;\r\n    //\r\n    //        }\r\n        }\r\n        signingConfigs {\r\n    \r\n            release {\r\n                if (project.hasProperty(&quot;RELEASE_STORE_FILE&quot;)) {\r\n                    storeFile file(RELEASE_STORE_FILE)\r\n                    storePassword RELEASE_STORE_PASSWORD\r\n                    keyAlias RELEASE_KEY_ALIAS\r\n                    keyPassword RELEASE_KEY_PASSWORD\r\n                }\r\n            }\r\n        }\r\n        buildTypes {\r\n            release {\r\n                minifyEnabled false // Warning: is this a good idea?\r\n                proguardFiles getDefaultProguardFile(&#39;proguard-android.txt&#39;), &#39;proguard-rules.pro&#39;\r\n                if (project.hasProperty(&quot;RELEASE_STORE_FILE&quot;)) {\r\n                    signingConfig signingConfigs.release\r\n                }\r\n    \r\n                externalNativeBuild {\r\n                    ndkBuild {\r\n                        arguments &#39;NDK_DEBUG=0&#39;\r\n                    }\r\n                }\r\n            }\r\n    \r\n            debug {\r\n    //            debuggable true\r\n    //            jniDebuggable true\r\n    \r\n                externalNativeBuild {\r\n                    ndkBuild {\r\n                        arguments &#39;NDK_DEBUG=1&#39;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n    }\r\n    \r\n    \r\n    \r\n    \r\n    crashlytics {\r\n        enableNdk = true\r\n        androidNdkOut = &#39;obj&#39;\r\n        androidNdkLibsOut = &#39;libs&#39;\r\n    \r\n    }\r\n    \r\n    repositories {\r\n        mavenCentral()\r\n    }\r\n    \r\n    dependencies {\r\n        //    compile &#39;com.android.support:multidex:1.0.1&#39;\r\n        compile fileTree(include: [&#39;*.jar&#39;], dir: &#39;libs&#39;)\r\n        compile project(&#39;:libcocos2dx&#39;)\r\n        //    compile project(&#39;:BaseGameUtils&#39;)\r\n        //    compile &#39;com.android.support:multidex:1.0.0&#39;\r\n        compile &#39;com.facebook.android:facebook-android-sdk:4.8.0&#39;\r\n        //    compile &#39;com.google.android.gms:play-services-auth:9.0.0&#39;\r\n        // integration guide (with latest version numbers: https://fabric.io/downloads/gradle)\r\n        // Crashlytics KitminifyEnabled\r\n        compile(&#39;com.crashlytics.sdk.android:crashlytics:2.6.8@aar&#39;) {\r\n            transitive = true\r\n        }\r\n        // NDK Kit\r\n        compile(&#39;com.crashlytics.sdk.android:crashlytics-ndk:1.1.6@aar&#39;) {\r\n            transitive = true\r\n        }\r\n        //    compile(&#39;com.crashlytics.sdk.android:crashlytics:2.7.0-SNAPSHOT@aar&#39;) {\r\n        //        transitive = true;\r\n        //    }\r\n        //\r\n        //    compile(&#39;com.crashlytics.sdk.android:crashlytics-ndk:1.2.0-SNAPSHOT:debug@aar&#39;) {\r\n        //        transitive = true;\r\n        //    }\r\n        compile &#39;net.bytebuddy:byte-buddy:1.7.3&#39;\r\n        compile &#39;net.bytebuddy:byte-buddy-android:1.7.3&#39;\r\n        //    compile &#39;com.google.firebase:firebase-auth:11.0.1&#39;\r\n        compile &#39;com.google.android.gms:play-services-auth:11.0.0&#39;\r\n        compile &#39;com.google.android.gms:play-services-games:11.0.0&#39;\r\n        compile &#39;com.google.firebase:firebase-invites:11.0.0&#39;\r\n        compile &#39;com.google.firebase:firebase-messaging:11.0.0&#39;\r\n        compile &#39;com.anjlab.android.iab.v3:library:1.0.+&#39;\r\n        compile files(&#39;Frameworks/Fmod/prebuilt/android/fmod.jar&#39;)\r\n        //    // use latest version instead version number: https://github.com/GameAnalytics/GA-SDK-ANDROID\r\n        //    compile &#39;com.gameanalytics.sdk:gameanalytics-android:3.5.0&#39;\r\n        compile fileTree(include: [&#39;*.jar&#39;], dir: &#39;Frameworks/Jars&#39;)\r\n        //\r\n    }\r\n    \r\n    apply plugin: &#39;com.google.gms.google-services&#39;\r\n\r\nHere&#39;s the project-wide build.gradle file:\r\n\r\n  \r\n\r\n      // Top-level build file where you can add configuration options common to all sub-projects/modules.\r\n    \r\n    \r\n    \r\n    buildscript {\r\n        repositories {\r\n            jcenter()\r\n            maven { url &#39;https://maven.fabric.io/public&#39; }\r\n    \r\n        }\r\n        dependencies {\r\n            classpath &#39;com.android.tools.build:gradle:2.3.3&#39;\r\n    \r\n            // NOTE: Do not place your application dependencies here; they belong\r\n            // in the individual module build.gradle files\r\n    \r\n            // The Fabric Gradle plugin uses an open ended version to react\r\n            // quickly to Android tooling updates\r\n            //classpath &#39;io.fabric.tools:gradle:1.21.5&#39; // version number: https://twittersdk.artifactoryonline.com/twittersdk/repo/io/fabric/tools/gradle/\r\n            classpath &#39;io.fabric.tools:gradle:1.+&#39;\r\n            classpath &#39;com.google.gms:google-services:3.1.0&#39;\r\n    \r\n        }\r\n    }\r\n    \r\n    allprojects {\r\n        repositories {\r\n            jcenter()\r\n    \r\n            // FABRIC PRIVATE\r\n        //        maven { url &#39;https://s3.amazonaws.com/fabric-artifacts-private/internal-snapshots&#39; }\r\n    \r\n            // FABRIC OFFICIAL\r\n            maven { url &#39;https://maven.fabric.io/public&#39; }\r\n    \r\n    //        maven { url &#39;http://maven.gameanalytics.com/release&#39; }\r\n    \r\n        }\r\n    }\r\n\r\nEdit: I also already tried this in this order:\r\n\r\n1. Rebuild Project\r\n2. Clean Project\r\n3. Invalidate caches / Restart\r\n4. In case you are using Gradle deamon. stop it by&#160;./gradlew --stop&#160;and start over the steps from 1 to 3\r\n5. Finally &amp; destructively close Android Studio completely and delete&#160;.gradle&#160;directory ( it&#39;s hidden ) from the root of directory of your project and then launch Android Studio again.\r\n6. Close all other Android Studio Instances\r\n7. Restart OSX","title":"Gradle debug Crashes with NullpointerException - Run works fine","body":"<p>Gradle crashes with a NullpointerException when trying to debug my app in Android Studio. It works fine just to Run the app. Android Studio 2.3.3.</p>\n\n<p>Here's the gradle stacktrace:</p>\n\n<pre><code>java.lang.NullPointerException\n    at com.android.tools.idea.run.GradleApplicationIdProvider.getTestPackageName(GradleApplicationIdProvider.java:50)\n    at com.android.tools.idea.run.AndroidLaunchTasksProvider.getConnectDebuggerTask(AndroidLaunchTasksProvider.java:160)\n    at com.android.tools.idea.run.LaunchTaskRunner.run(LaunchTaskRunner.java:79)\n    at com.intellij.openapi.progress.impl.CoreProgressManager$TaskRunnable.run(CoreProgressManager.java:635)\n    at com.intellij.openapi.progress.impl.CoreProgressManager$3.run(CoreProgressManager.java:170)\n    at com.intellij.openapi.progress.impl.CoreProgressManager.registerIndicatorAndRun(CoreProgressManager.java:494)\n    at com.intellij.openapi.progress.impl.CoreProgressManager.executeProcessUnderProgress(CoreProgressManager.java:443)\n    at com.intellij.openapi.progress.impl.ProgressManagerImpl.executeProcessUnderProgress(ProgressManagerImpl.java:54)\n    at com.intellij.openapi.progress.impl.CoreProgressManager.runProcess(CoreProgressManager.java:155)\n    at com.intellij.openapi.progress.impl.ProgressManagerImpl$1.run(ProgressManagerImpl.java:128)\n    at com.intellij.openapi.application.impl.ApplicationImpl$2.run(ApplicationImpl.java:307)\n    at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)\n    at java.util.concurrent.FutureTask.run(FutureTask.java:266)\n    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)\n    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)\n    at java.lang.Thread.run(Thread.java:745)\n</code></pre>\n\n<p>Here's my build.gradle inside the app folder. Some more details: This is a project with the Cocos2d-x game engine and I'm trying to get Debug for native code to work. A simple test project does work, but my own project does not.</p>\n\n<pre><code>import java.util.regex.Pattern\nimport com.android.build.OutputFile\nimport org.apache.tools.ant.taskdefs.condition.Os\n\n\napply plugin: 'com.android.application'\napply plugin: 'io.fabric'\n\n\n\ntask('increaseVersionCode') &lt;&lt; {\n    println 'Grade: Increasing Version Code...'\n    def buildFile = file(\"build.gradle\")\n    def pattern = Pattern.compile(\"versionCode\\\\s+(\\\\d+)\")\n    def manifestText = buildFile.getText()\n    def matcher = pattern.matcher(manifestText)\n    matcher.find()\n    def versionCode = Integer.parseInt(matcher.group(1))\n    def manifestContent = matcher.replaceAll(\"versionCode \" + ++versionCode)\n    buildFile.write(manifestContent)\n}\npreBuild.dependsOn increaseVersionCode\n\ntask deleteGraphicsAssets(type: Delete) {\n    println 'Grade: Deleting unnecessary assets...'\n    delete \"assets/1136p\"\n    delete \"assets/2048p\"\n}\npreBuild.dependsOn deleteGraphicsAssets\n\n\n\nandroid {\n    // Going higher means that we have to request to write to external storage (used for UUID): https://stackoverflow.com/questions/36084959/cant-create-a-directory-on-storage-emulated-0-on-emulator\n    // But GameAnalytics reqires 24, let's see if it still works this way\n    compileSdkVersion 22\n    buildToolsVersion '25.0.3' // should be 25 for newer version\n    defaultConfig {\n        applicationId \"com.forestringgames.apps.towerduel\"\n        minSdkVersion 15\n        // Going higher means that we have to request to write to external storage (used for UUID): https://stackoverflow.com/questions/36084959/cant-create-a-directory-on-storage-emulated-0-on-emulator\n        // But GameAnalytics reqires 24, let's see if it still works this way\n        targetSdkVersion PROP_TARGET_SDK_VERSION\n        versionCode 1607\n        versionName \"1.0\"\n//        multiDexEnabled true\n        externalNativeBuild {\n            ndkBuild {\n                if (!project.hasProperty(\"PROP_NDK_MODE\") || PROP_NDK_MODE.compareTo('none') != 0) {\n                    // skip the NDK Build step if PROP_NDK_MODE is none\n                    targets 'cocos2dcpp'\n                    arguments 'NDK_TOOLCHAIN_VERSION=4.9'\n                    arguments 'APP_PLATFORM=android-' + PROP_TARGET_SDK_VERSION\n\n\n                    def module_paths = [project.file(\"../../FRGEngine/cocos2d\").absolutePath,\n                                        project.file(\"../../FRGEngine/cocos2d/cocos\").absolutePath,\n                                        project.file(\"../../FRGEngine/cocos2d/external\").absolutePath]\n                    if (Os.isFamily(Os.FAMILY_WINDOWS)) {\n                        // should use '/'\n                        module_paths = module_paths.collect { it.replaceAll('\\\\\\\\', '/') }\n                        arguments 'NDK_MODULE_PATH=' + module_paths.join(\";\")\n                    } else {\n                        arguments 'NDK_MODULE_PATH=' + module_paths.join(':')\n                    }\n\n                    arguments '-j' + Runtime.runtime.availableProcessors()\n                    abiFilters.addAll(PROP_APP_ABI.split(':').collect { it as String })\n                }\n            }\n        }\n    }\n    // only added for android debugging\n    externalNativeBuild {\n        ndkBuild {\n            if (!project.hasProperty(\"PROP_NDK_MODE\") || PROP_NDK_MODE.compareTo('none') != 0) {\n                // skip the NDK Build step if PROP_NDK_MODE is none\n                path \"jni/Android.mk\"\n            }\n        }\n    }\n    sourceSets.main {\n        java.srcDir \"src\"\n        res.srcDir \"res\"\n        jniLibs.srcDir \"libs\"\n        manifest.srcFile \"AndroidManifest.xml\"\n        assets.srcDir \"assets\"\n    }\n    splits {\n        abi {\n            enable true\n            reset()\n            include 'armeabi-v7a'\n            //, 'armeabi',  'armeabi-v7a', 'x86'  - what about arm64? Test it with Crashlytics\n            universalApk false  //true\n        }\n\n//        density {\n//            enable true\n//            reset()\n//            include 'mdpi', 'hdpi', 'xhdpi', 'xxhdpi', 'xxxhdpi'\n//            compatibleScreens 'small', 'normal', 'large', 'xlarge'\n//\n//        }\n    }\n    signingConfigs {\n\n        release {\n            if (project.hasProperty(\"RELEASE_STORE_FILE\")) {\n                storeFile file(RELEASE_STORE_FILE)\n                storePassword RELEASE_STORE_PASSWORD\n                keyAlias RELEASE_KEY_ALIAS\n                keyPassword RELEASE_KEY_PASSWORD\n            }\n        }\n    }\n    buildTypes {\n        release {\n            minifyEnabled false // Warning: is this a good idea?\n            proguardFiles getDefaultProguardFile('proguard-android.txt'), 'proguard-rules.pro'\n            if (project.hasProperty(\"RELEASE_STORE_FILE\")) {\n                signingConfig signingConfigs.release\n            }\n\n            externalNativeBuild {\n                ndkBuild {\n                    arguments 'NDK_DEBUG=0'\n                }\n            }\n        }\n\n        debug {\n//            debuggable true\n//            jniDebuggable true\n\n            externalNativeBuild {\n                ndkBuild {\n                    arguments 'NDK_DEBUG=1'\n                }\n            }\n        }\n    }\n\n}\n\n\n\n\ncrashlytics {\n    enableNdk = true\n    androidNdkOut = 'obj'\n    androidNdkLibsOut = 'libs'\n\n}\n\nrepositories {\n    mavenCentral()\n}\n\ndependencies {\n    //    compile 'com.android.support:multidex:1.0.1'\n    compile fileTree(include: ['*.jar'], dir: 'libs')\n    compile project(':libcocos2dx')\n    //    compile project(':BaseGameUtils')\n    //    compile 'com.android.support:multidex:1.0.0'\n    compile 'com.facebook.android:facebook-android-sdk:4.8.0'\n    //    compile 'com.google.android.gms:play-services-auth:9.0.0'\n    // integration guide (with latest version numbers: https://fabric.io/downloads/gradle)\n    // Crashlytics KitminifyEnabled\n    compile('com.crashlytics.sdk.android:crashlytics:2.6.8@aar') {\n        transitive = true\n    }\n    // NDK Kit\n    compile('com.crashlytics.sdk.android:crashlytics-ndk:1.1.6@aar') {\n        transitive = true\n    }\n    //    compile('com.crashlytics.sdk.android:crashlytics:2.7.0-SNAPSHOT@aar') {\n    //        transitive = true;\n    //    }\n    //\n    //    compile('com.crashlytics.sdk.android:crashlytics-ndk:1.2.0-SNAPSHOT:debug@aar') {\n    //        transitive = true;\n    //    }\n    compile 'net.bytebuddy:byte-buddy:1.7.3'\n    compile 'net.bytebuddy:byte-buddy-android:1.7.3'\n    //    compile 'com.google.firebase:firebase-auth:11.0.1'\n    compile 'com.google.android.gms:play-services-auth:11.0.0'\n    compile 'com.google.android.gms:play-services-games:11.0.0'\n    compile 'com.google.firebase:firebase-invites:11.0.0'\n    compile 'com.google.firebase:firebase-messaging:11.0.0'\n    compile 'com.anjlab.android.iab.v3:library:1.0.+'\n    compile files('Frameworks/Fmod/prebuilt/android/fmod.jar')\n    //    // use latest version instead version number: https://github.com/GameAnalytics/GA-SDK-ANDROID\n    //    compile 'com.gameanalytics.sdk:gameanalytics-android:3.5.0'\n    compile fileTree(include: ['*.jar'], dir: 'Frameworks/Jars')\n    //\n}\n\napply plugin: 'com.google.gms.google-services'\n</code></pre>\n\n<p>Here's the project-wide build.gradle file:</p>\n\n<pre><code>  // Top-level build file where you can add configuration options common to all sub-projects/modules.\n\n\n\nbuildscript {\n    repositories {\n        jcenter()\n        maven { url 'https://maven.fabric.io/public' }\n\n    }\n    dependencies {\n        classpath 'com.android.tools.build:gradle:2.3.3'\n\n        // NOTE: Do not place your application dependencies here; they belong\n        // in the individual module build.gradle files\n\n        // The Fabric Gradle plugin uses an open ended version to react\n        // quickly to Android tooling updates\n        //classpath 'io.fabric.tools:gradle:1.21.5' // version number: https://twittersdk.artifactoryonline.com/twittersdk/repo/io/fabric/tools/gradle/\n        classpath 'io.fabric.tools:gradle:1.+'\n        classpath 'com.google.gms:google-services:3.1.0'\n\n    }\n}\n\nallprojects {\n    repositories {\n        jcenter()\n\n        // FABRIC PRIVATE\n    //        maven { url 'https://s3.amazonaws.com/fabric-artifacts-private/internal-snapshots' }\n\n        // FABRIC OFFICIAL\n        maven { url 'https://maven.fabric.io/public' }\n\n//        maven { url 'http://maven.gameanalytics.com/release' }\n\n    }\n}\n</code></pre>\n\n<p>Edit: I also already tried this in this order:</p>\n\n<ol>\n<li>Rebuild Project</li>\n<li>Clean Project</li>\n<li>Invalidate caches / Restart</li>\n<li>In case you are using Gradle deamon. stop it by ./gradlew --stop and start over the steps from 1 to 3</li>\n<li>Finally &amp; destructively close Android Studio completely and delete .gradle directory ( it's hidden ) from the root of directory of your project and then launch Android Studio again.</li>\n<li>Close all other Android Studio Instances</li>\n<li>Restart OSX</li>\n</ol>\n"},{"tags":["python","java","arrays","string","algorithm"],"answers":[{"tags":[],"owner":{"account_id":2094057,"reputation":506074,"user_id":1863229,"accept_rate":58,"display_name":"Tim Biegeleisen"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1661438765,"creation_date":1661438765,"answer_id":73489588,"question_id":73489489,"body_markdown":"You could make use of the modulus here.  Assuming the `get_word()` function accepts an integer day index, we can try:\r\n\r\n&lt;!-- language: python --&gt;\r\n\r\n    words = [&quot;lebron&quot;, &quot;kobe&quot;, &quot;jordan&quot;, &quot;durant&quot;, &quot;pipen&quot;]\r\n\r\n    def get_words(day):\r\n        return words[(day - 1) % len(words)]  # assuming day starts at 1","title":"Given array of string contain X number of words return the same word for a given day","body":"<p>You could make use of the modulus here.  Assuming the <code>get_word()</code> function accepts an integer day index, we can try:</p>\n<pre class=\"lang-py prettyprint-override\"><code>words = [&quot;lebron&quot;, &quot;kobe&quot;, &quot;jordan&quot;, &quot;durant&quot;, &quot;pipen&quot;]\n\ndef get_words(day):\n    return words[(day - 1) % len(words)]  # assuming day starts at 1\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5416179,"reputation":72,"user_id":7012893,"accept_rate":100,"display_name":"Aubble"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1661439059,"creation_date":1661439059,"answer_id":73489648,"question_id":73489489,"body_markdown":"You can start with an initial date and set that day as day 1. So if day 1 equals 2022.01.05 then 2022.01.07 would be day 3. You can use the modulo operator to get back to day 1 at day 500.","title":"Given array of string contain X number of words return the same word for a given day","body":"<p>You can start with an initial date and set that day as day 1. So if day 1 equals 2022.01.05 then 2022.01.07 would be day 3. You can use the modulo operator to get back to day 1 at day 500.</p>\n"},{"tags":[],"owner":{"account_id":1954916,"reputation":126,"user_id":1772751,"display_name":"Gsinti"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1661439206,"creation_date":1661439206,"answer_id":73489681,"question_id":73489489,"body_markdown":"You can use a combination of modulo and a static date to calculate a growing interval as an index that iterates through the list and loops back to start after it&#39;s exhausted.\r\n\r\n```\r\nstartingDate = &quot;2022-08-25&quot;\r\n\r\nwords = [&quot;lebron&quot;,&quot;kobe&quot;,&quot;jordan&quot;,&quot;durant&quot;,&quot;pipen&quot;]\r\n\r\n// get the number of days that have passed since the starting date\r\ncurrentWordIndex = getDaysSince(startingDate) % count(words)\r\n\r\necho words[currentWordIndex] // &quot;lebron&quot; on day 0, &quot;kobe&quot; on day 1, etc.\r\n```\r\n\r\nIn this example, the words should loop every 5 days.\r\n\r\nAs you rightly pointed out, using the day of the year limits you to 365 words. Calculating the number of days since the static date helps track an ever-growing interval.\r\n\r\nThis should work in perpetuity and even allows for the word list to grow, *so long as* you only ever add words to the end. If a word is added somewhere in the middle, &quot;before&quot; the current day&#39;s word, it will cause it to change. If you add words to the end, the current word will not change, but the loop back to the start will obviously take longer.","title":"Given array of string contain X number of words return the same word for a given day","body":"<p>You can use a combination of modulo and a static date to calculate a growing interval as an index that iterates through the list and loops back to start after it's exhausted.</p>\n<pre><code>startingDate = &quot;2022-08-25&quot;\n\nwords = [&quot;lebron&quot;,&quot;kobe&quot;,&quot;jordan&quot;,&quot;durant&quot;,&quot;pipen&quot;]\n\n// get the number of days that have passed since the starting date\ncurrentWordIndex = getDaysSince(startingDate) % count(words)\n\necho words[currentWordIndex] // &quot;lebron&quot; on day 0, &quot;kobe&quot; on day 1, etc.\n</code></pre>\n<p>In this example, the words should loop every 5 days.</p>\n<p>As you rightly pointed out, using the day of the year limits you to 365 words. Calculating the number of days since the static date helps track an ever-growing interval.</p>\n<p>This should work in perpetuity and even allows for the word list to grow, <em>so long as</em> you only ever add words to the end. If a word is added somewhere in the middle, &quot;before&quot; the current day's word, it will cause it to change. If you add words to the end, the current word will not change, but the loop back to the start will obviously take longer.</p>\n"},{"tags":[],"owner":{"account_id":23959668,"reputation":26587,"user_id":17949945,"display_name":"Alexander Ivanchenko"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1661440481,"creation_date":1661440134,"answer_id":73489922,"question_id":73489489,"body_markdown":"You don&#39;t anything fancy apart from a `List` of `String` (or array if you wish, but it is advisable to favor Collections over arrays).\r\n\r\nTo retrieve a word for a particular day, you need to store a date, which would denote a starting point.\r\n\r\nAnd then you need only to calculate the index of the word based on the number of dates between the current date and start date. For that you can make use of [`ChronoUnit.DAYS.between()`](https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/time/temporal/ChronoUnit.html#between(java.time.temporal.Temporal,java.time.temporal.Temporal)).\r\n\r\nAnd to avoid exceeding the size of the list, we need to use modulo operator `%`.\r\n```\r\nList&lt;String&gt; words = List.of(\r\n    &quot;day1&quot;, &quot;day2&quot;, &quot;day3&quot;, &quot;etc&quot;\r\n);\r\n        \r\nLocalDate start = LocalDate.of(2022, 1,1);\r\nSystem.out.println(start);\r\n        \r\nint index = (int) ChronoUnit.DAYS.between(start, LocalDate.now());\r\nString wordOfDay = words.get(index % words.size());\r\n\r\nSystem.out.println(wordOfDay);\r\n```","title":"Given array of string contain X number of words return the same word for a given day","body":"<p>You don't anything fancy apart from a <code>List</code> of <code>String</code> (or array if you wish, but it is advisable to favor Collections over arrays).</p>\n<p>To retrieve a word for a particular day, you need to store a date, which would denote a starting point.</p>\n<p>And then you need only to calculate the index of the word based on the number of dates between the current date and start date. For that you can make use of <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/time/temporal/ChronoUnit.html#between(java.time.temporal.Temporal,java.time.temporal.Temporal)\" rel=\"nofollow noreferrer\"><code>ChronoUnit.DAYS.between()</code></a>.</p>\n<p>And to avoid exceeding the size of the list, we need to use modulo operator <code>%</code>.</p>\n<pre><code>List&lt;String&gt; words = List.of(\n    &quot;day1&quot;, &quot;day2&quot;, &quot;day3&quot;, &quot;etc&quot;\n);\n        \nLocalDate start = LocalDate.of(2022, 1,1);\nSystem.out.println(start);\n        \nint index = (int) ChronoUnit.DAYS.between(start, LocalDate.now());\nString wordOfDay = words.get(index % words.size());\n\nSystem.out.println(wordOfDay);\n</code></pre>\n"}],"owner":{"account_id":2346335,"reputation":317,"user_id":14725103,"display_name":"Unknowntiou"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":62,"favorite_count":0,"down_vote_count":1,"up_vote_count":3,"closed_date":1661463674,"accepted_answer_id":73489681,"answer_count":4,"score":2,"last_activity_date":1661440481,"creation_date":1661438371,"question_id":73489489,"body_markdown":"**Background**\r\n\r\nMy Objective is I am basically trying to create an end point where a user calls the `get_word()` function and they get back a word. The requirement is every single user that calls the `get_word()` function should get back the same word on a given day. No words should repeat until we have cycled through all the words.\r\n\r\nSo for example let&#39;s assume we have a array of words.\r\n\r\n`words = [&quot;lebron&quot;,&quot;kobe&quot;,&quot;jordan&quot;,&quot;durant&quot;,&quot;pipen&quot;]`\r\n\r\n**day 1** and users call the function `get_word()` they get back `lebron`\r\n\r\n**day 2** and users call the function `get_word()` they get back `kobe`\r\n\r\n**day 3** and users call the function `get_word()` they get back `jordan`\r\n\r\n**day 4** and users call the function `get_word()` they get back `durant`\r\n\r\n**day 5** and users call the function `get_word()` they get back `pipen`\r\n\r\n**day 6** and users call the function `get_word()` they get back `lebron`\r\n\r\n**day 7** and users call the function `get_word()` they get back `kobe`\r\n\r\n\r\nThe **goal** is to have list of **500 unique words** and on a given day every user should get the same word back. I would also want the ability to add more words in the future.\r\n\r\n**Solution**\r\n\r\nOne very naive solution i am able to think of is i can generate a dictionary with everyday of the year as a key and words as the value. The issue with this is we only have 365 days in a year so i can only store 365 words but not 500.\r\n\r\n\r\nI appreciate any thoughts or feedback on how i can come up with a better solution here.\r\n\r\n\r\nThis problem is language agnostic hence the java and python tag.\r\n","title":"Given array of string contain X number of words return the same word for a given day","body":"<p><strong>Background</strong></p>\n<p>My Objective is I am basically trying to create an end point where a user calls the <code>get_word()</code> function and they get back a word. The requirement is every single user that calls the <code>get_word()</code> function should get back the same word on a given day. No words should repeat until we have cycled through all the words.</p>\n<p>So for example let's assume we have a array of words.</p>\n<p><code>words = [&quot;lebron&quot;,&quot;kobe&quot;,&quot;jordan&quot;,&quot;durant&quot;,&quot;pipen&quot;]</code></p>\n<p><strong>day 1</strong> and users call the function <code>get_word()</code> they get back <code>lebron</code></p>\n<p><strong>day 2</strong> and users call the function <code>get_word()</code> they get back <code>kobe</code></p>\n<p><strong>day 3</strong> and users call the function <code>get_word()</code> they get back <code>jordan</code></p>\n<p><strong>day 4</strong> and users call the function <code>get_word()</code> they get back <code>durant</code></p>\n<p><strong>day 5</strong> and users call the function <code>get_word()</code> they get back <code>pipen</code></p>\n<p><strong>day 6</strong> and users call the function <code>get_word()</code> they get back <code>lebron</code></p>\n<p><strong>day 7</strong> and users call the function <code>get_word()</code> they get back <code>kobe</code></p>\n<p>The <strong>goal</strong> is to have list of <strong>500 unique words</strong> and on a given day every user should get the same word back. I would also want the ability to add more words in the future.</p>\n<p><strong>Solution</strong></p>\n<p>One very naive solution i am able to think of is i can generate a dictionary with everyday of the year as a key and words as the value. The issue with this is we only have 365 days in a year so i can only store 365 words but not 500.</p>\n<p>I appreciate any thoughts or feedback on how i can come up with a better solution here.</p>\n<p>This problem is language agnostic hence the java and python tag.</p>\n"},{"tags":["java","spring-boot","apache-kafka","spring-kafka"],"answers":[{"tags":[],"owner":{"account_id":1288095,"reputation":169326,"user_id":1240763,"display_name":"Gary Russell"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1661440172,"creation_date":1661440172,"answer_id":73489932,"question_id":73488773,"body_markdown":"You need to throw an exception from the recoverer after pausing; otherwise the record is considered &quot;recovered&quot;.","title":"spring-kafka : Losing 1 record when registry.pause is called from recoverer","body":"<p>You need to throw an exception from the recoverer after pausing; otherwise the record is considered &quot;recovered&quot;.</p>\n"}],"owner":{"account_id":7772927,"reputation":68,"user_id":5881860,"display_name":"Mrunal Badhe"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":206,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":73489932,"answer_count":1,"score":0,"last_activity_date":1661440172,"creation_date":1661435578,"question_id":73488773,"body_markdown":"Can someone please help me understand what&#39;s going wrong here?\r\n\r\n# Requirement:\r\n\r\nI want to implement delayed queue (DLQ) using ConcurrentKafkaListenerContainer pause-resume functionality.\r\nWhen a message is received on a DLQ, we&#39;ll check the last processed time and want to pause the container if the message is not aged enough.\r\n\r\nSince the same logic needs to be implemented for all other DLQs from the project, I have used MethodKafkaListenerEndpoint to create containers.\r\nIf the message is not aged enough, I throw an exception and I call registry.allcontainers.pause, since I want to pause all other DLQ listeners as well.\r\n\r\nIt works fine, the offsets are not committed and I see on the broker for the given group, there&#39;s a lag of 1.\r\nI have set setAckAfterHandle to false in DefaultErrorHandler as well.\r\n\r\nHowever, when I call registry.allcontainers.resume this last message for which an exception was thrown from the OnMessage method is not getting polled.\r\nIf I send a new message to the DLQ then it will pick the latest message and reset the lag to 0.\r\nHowever, I am losing 1 record in this case.\r\n\r\n### This is the error handler and recoverer:\r\n```\r\n    @Bean\r\n    DefaultErrorHandler defaultErrorHandler(ConsumerRecordRecoverer recoverer) {\r\n        DefaultErrorHandler defaultErrorHandler = new DefaultErrorHandler(recoverer, new FixedBackOff(0L, 0L));\r\n        defaultErrorHandler.setAckAfterHandle(false);\r\n        return defaultErrorHandler;\r\n    }\r\n\r\n    @Bean\r\n    ConsumerRecordRecoverer customRecoverer(KafkaListenerEndpointRegistry registry) {\r\n        return (message, exception) -&gt; {\r\n            registry.getAllListenerContainers()\r\n                    .stream()\r\n                    .forEach(MessageListenerContainer::pause);\r\n        };\r\n    }\r\n```\r\n\r\n### Listener Method\r\n* I have created listener method like this. If there&#39;s no delay required, then I want to forward the message to some other topic.\r\n* The number of listeners would be property driven. e.g \r\n```\r\ntopic.1=service_1.dlq\r\nforwardto.1=service_1\r\n\r\ntopic.2=service_2.dlq\r\nforwardto.2=service_2\r\n\r\n```\r\n* Hence the listener needs to be injected with the producer topic name as well.\r\n\r\n```\r\npublic class MyListener implements MessageListener&lt;String, String&gt; {\r\n\t@Override\r\n\t@SneakyThrows\r\n    public void onMessage(ConsumerRecord&lt;String, String&gt; data) {\r\n        String bypassDelayCheck = Optional.ofNullable(System.getProperty(&quot;bypassDelayCheck&quot;)).orElse(&quot;false&quot;);\r\n        if (bypassDelayCheck.equals(&quot;false&quot;) &amp;&amp; shouldDelay(data.value())) {\r\n            throw new Exception(&quot;I want this consumer container to pause&quot;);\r\n        } else {\r\n            kafkaTemplate.send(getProducerTopic(), data.value());\r\n        }\r\n    }\r\n}\r\n```\r\n\r\n### Listener Creation\r\n\r\n* I had to use KafkaListenerConfigurer since I also have some other environment specific properties to be used inside this MyListener.\r\n* I did not use creating container using factory since it would be prototype scoped and registry.getAllContainers tried to create the containers in that case.\r\ne.g. the producerTopic will depend on which topic this message needs to be forwarded depending on the DLQ on which it was received.\r\n* I am managing the same using member variables of MyListener.\r\n\r\n\r\n```\r\nKafkaListenerConfigurer.class\r\n\r\npublic class MyListenerConfigurer implements KafkaListenerConfigurer{\r\n\r\n\t@Override\r\n    @SneakyThrows\r\n    public void configureKafkaListeners(KafkaListenerEndpointRegistrar registrar) {\r\n\r\n        listOfConfigurations\r\n                .forEach(item -&gt; {\r\n\r\n                    MethodKafkaListenerEndpoint&lt;String, String&gt; kafkaListenerEndpoint = new MethodKafkaListenerEndpoint&lt;&gt;();\r\n                    MyListener myListener = new MyListener(topicToForwardTo)\r\n\r\n                    kafkaListenerEndpoint.setBeanFactory(beanFactory);\r\n                    kafkaListenerEndpoint.setBean(myListener);\r\n                    try {\r\n                        kafkaListenerEndpoint.setMethod(myListener.getClass().getMethod(&quot;onMessage&quot;, ConsumerRecord.class));\r\n                    } catch (NoSuchMethodException e) {\r\n                        System.out.println(&quot;Some Exception&quot;);\r\n                        throw new RuntimeException(e);\r\n                    }\r\n                    kafkaListenerEndpoint.setId(someId);\r\n                    kafkaListenerEndpoint.setTopics(DLQ topic to listen to);\r\n                    kafkaListenerEndpoint.setGroupId(groupId);\r\n                    kafkaListenerEndpoint.setAutoStartup(true);\r\n                    kafkaListenerEndpoint.setMessageHandlerMethodFactory(new DefaultMessageHandlerMethodFactory());\r\n\r\n                    registrar.registerEndpoint(kafkaListenerEndpoint);\r\n                });\r\n    }\r\n}\r\n\r\n```\r\n","title":"spring-kafka : Losing 1 record when registry.pause is called from recoverer","body":"<p>Can someone please help me understand what's going wrong here?</p>\n<h1>Requirement:</h1>\n<p>I want to implement delayed queue (DLQ) using ConcurrentKafkaListenerContainer pause-resume functionality.\nWhen a message is received on a DLQ, we'll check the last processed time and want to pause the container if the message is not aged enough.</p>\n<p>Since the same logic needs to be implemented for all other DLQs from the project, I have used MethodKafkaListenerEndpoint to create containers.\nIf the message is not aged enough, I throw an exception and I call registry.allcontainers.pause, since I want to pause all other DLQ listeners as well.</p>\n<p>It works fine, the offsets are not committed and I see on the broker for the given group, there's a lag of 1.\nI have set setAckAfterHandle to false in DefaultErrorHandler as well.</p>\n<p>However, when I call registry.allcontainers.resume this last message for which an exception was thrown from the OnMessage method is not getting polled.\nIf I send a new message to the DLQ then it will pick the latest message and reset the lag to 0.\nHowever, I am losing 1 record in this case.</p>\n<h3>This is the error handler and recoverer:</h3>\n<pre><code>    @Bean\n    DefaultErrorHandler defaultErrorHandler(ConsumerRecordRecoverer recoverer) {\n        DefaultErrorHandler defaultErrorHandler = new DefaultErrorHandler(recoverer, new FixedBackOff(0L, 0L));\n        defaultErrorHandler.setAckAfterHandle(false);\n        return defaultErrorHandler;\n    }\n\n    @Bean\n    ConsumerRecordRecoverer customRecoverer(KafkaListenerEndpointRegistry registry) {\n        return (message, exception) -&gt; {\n            registry.getAllListenerContainers()\n                    .stream()\n                    .forEach(MessageListenerContainer::pause);\n        };\n    }\n</code></pre>\n<h3>Listener Method</h3>\n<ul>\n<li>I have created listener method like this. If there's no delay required, then I want to forward the message to some other topic.</li>\n<li>The number of listeners would be property driven. e.g</li>\n</ul>\n<pre><code>topic.1=service_1.dlq\nforwardto.1=service_1\n\ntopic.2=service_2.dlq\nforwardto.2=service_2\n\n</code></pre>\n<ul>\n<li>Hence the listener needs to be injected with the producer topic name as well.</li>\n</ul>\n<pre><code>public class MyListener implements MessageListener&lt;String, String&gt; {\n    @Override\n    @SneakyThrows\n    public void onMessage(ConsumerRecord&lt;String, String&gt; data) {\n        String bypassDelayCheck = Optional.ofNullable(System.getProperty(&quot;bypassDelayCheck&quot;)).orElse(&quot;false&quot;);\n        if (bypassDelayCheck.equals(&quot;false&quot;) &amp;&amp; shouldDelay(data.value())) {\n            throw new Exception(&quot;I want this consumer container to pause&quot;);\n        } else {\n            kafkaTemplate.send(getProducerTopic(), data.value());\n        }\n    }\n}\n</code></pre>\n<h3>Listener Creation</h3>\n<ul>\n<li>I had to use KafkaListenerConfigurer since I also have some other environment specific properties to be used inside this MyListener.</li>\n<li>I did not use creating container using factory since it would be prototype scoped and registry.getAllContainers tried to create the containers in that case.\ne.g. the producerTopic will depend on which topic this message needs to be forwarded depending on the DLQ on which it was received.</li>\n<li>I am managing the same using member variables of MyListener.</li>\n</ul>\n<pre><code>KafkaListenerConfigurer.class\n\npublic class MyListenerConfigurer implements KafkaListenerConfigurer{\n\n    @Override\n    @SneakyThrows\n    public void configureKafkaListeners(KafkaListenerEndpointRegistrar registrar) {\n\n        listOfConfigurations\n                .forEach(item -&gt; {\n\n                    MethodKafkaListenerEndpoint&lt;String, String&gt; kafkaListenerEndpoint = new MethodKafkaListenerEndpoint&lt;&gt;();\n                    MyListener myListener = new MyListener(topicToForwardTo)\n\n                    kafkaListenerEndpoint.setBeanFactory(beanFactory);\n                    kafkaListenerEndpoint.setBean(myListener);\n                    try {\n                        kafkaListenerEndpoint.setMethod(myListener.getClass().getMethod(&quot;onMessage&quot;, ConsumerRecord.class));\n                    } catch (NoSuchMethodException e) {\n                        System.out.println(&quot;Some Exception&quot;);\n                        throw new RuntimeException(e);\n                    }\n                    kafkaListenerEndpoint.setId(someId);\n                    kafkaListenerEndpoint.setTopics(DLQ topic to listen to);\n                    kafkaListenerEndpoint.setGroupId(groupId);\n                    kafkaListenerEndpoint.setAutoStartup(true);\n                    kafkaListenerEndpoint.setMessageHandlerMethodFactory(new DefaultMessageHandlerMethodFactory());\n\n                    registrar.registerEndpoint(kafkaListenerEndpoint);\n                });\n    }\n}\n\n</code></pre>\n"},{"tags":["java","oop","encapsulation","modularity","information-hiding"],"comments":[{"owner":{"account_id":440158,"reputation":323231,"user_id":829571,"accept_rate":94,"display_name":"assylias"},"score":2,"creation_date":1355743499,"post_id":13913174,"comment_id":19175734,"body_markdown":"*&quot;is the class IsThisEncapsulation an example of Encapsulation?&quot;* =&gt; you have not really encapsulated anything since you provide getters and setters that can read and write the state of your class directly...","body":"<i>&quot;is the class IsThisEncapsulation an example of Encapsulation?&quot;</i> =&gt; you have not really encapsulated anything since you provide getters and setters that can read and write the state of your class directly..."},{"owner":{"account_id":1901532,"reputation":61142,"user_id":1717300,"accept_rate":89,"display_name":"hyde"},"score":1,"creation_date":1355743841,"post_id":13913174,"comment_id":19175880,"body_markdown":"@assylias Making `age` public is what breaks encapsulation, not providing getter and setter...","body":"@assylias Making <code>age</code> public is what breaks encapsulation, not providing getter and setter..."},{"owner":{"account_id":440158,"reputation":323231,"user_id":829571,"accept_rate":94,"display_name":"assylias"},"score":0,"creation_date":1355743875,"post_id":13913174,"comment_id":19175906,"body_markdown":"@hyde I had not noticed that &quot;detail&quot;! Indeed!","body":"@hyde I had not noticed that &quot;detail&quot;! Indeed!"},{"owner":{"account_id":1905679,"reputation":543,"user_id":1720616,"accept_rate":38,"display_name":"user1720616"},"score":0,"creation_date":1355745709,"post_id":13913174,"comment_id":19176737,"body_markdown":"@hyde i read  that encapsulation means bundling data and methods together if that is so the class that i have made(IsThisEncapsulation) does achieve encapsulation.Am i correct?Or have i read about encapsulation incorrectly.","body":"@hyde i read  that encapsulation means bundling data and methods together if that is so the class that i have made(IsThisEncapsulation) does achieve encapsulation.Am i correct?Or have i read about encapsulation incorrectly."},{"owner":{"account_id":1901532,"reputation":61142,"user_id":1717300,"accept_rate":89,"display_name":"hyde"},"score":2,"creation_date":1355747377,"post_id":13913174,"comment_id":19177518,"body_markdown":"@user1720616 For encapsulation to be meaningful, you need some invariants (conditions which must remain true). For age you could define invariant: age can&#39;t be negative. So, if it&#39;s possible to set negative age (instead of getting exception or whatever), as it obviously is if age is public field, then age is not encapsulated properly. Another might be, if you have many fields which depend on each other, so you can&#39;t just modify one field, you need code which does proper modifications to all fields that need it.","body":"@user1720616 For encapsulation to be meaningful, you need some invariants (conditions which must remain true). For age you could define invariant: age can&#39;t be negative. So, if it&#39;s possible to set negative age (instead of getting exception or whatever), as it obviously is if age is public field, then age is not encapsulated properly. Another might be, if you have many fields which depend on each other, so you can&#39;t just modify one field, you need code which does proper modifications to all fields that need it."}],"answers":[{"tags":[],"owner":{"account_id":228275,"reputation":781,"user_id":490467,"display_name":"Eds"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1355743723,"creation_date":1355743723,"answer_id":13913286,"question_id":13913174,"body_markdown":"There is subtle difference between those, I like description from &quot;Growing Object-Oriented Software Guided by Tests&quot; book written by Steve Freeman and Nat Pryce:\r\n\r\nWhich says:\r\n\r\n**Encapsulation**\r\n\r\nEnsures that the behavior of an object can only be affected through its API.\r\nIt lets us control how much a change to one object will impact other parts of\r\nthe system by ensuring that there are no unexpected dependencies between\r\nunrelated components.\r\n\r\n**Information hiding**\r\n\r\nConceals how an object implements its functionality behind the abstraction\r\nof its API. It lets us work with higher abstractions by ignoring lower-level details\r\nthat are unrelated to the task at hand.","title":"What are the differences between information hiding and encapsulation?","body":"<p>There is subtle difference between those, I like description from \"Growing Object-Oriented Software Guided by Tests\" book written by Steve Freeman and Nat Pryce:</p>\n\n<p>Which says:</p>\n\n<p><strong>Encapsulation</strong></p>\n\n<p>Ensures that the behavior of an object can only be affected through its API.\nIt lets us control how much a change to one object will impact other parts of\nthe system by ensuring that there are no unexpected dependencies between\nunrelated components.</p>\n\n<p><strong>Information hiding</strong></p>\n\n<p>Conceals how an object implements its functionality behind the abstraction\nof its API. It lets us work with higher abstractions by ignoring lower-level details\nthat are unrelated to the task at hand.</p>\n"},{"tags":[],"owner":{"account_id":275989,"reputation":2358,"user_id":569161,"accept_rate":50,"display_name":"Harit Vishwakarma"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1355743767,"creation_date":1355743767,"answer_id":13913294,"question_id":13913174,"body_markdown":"just see their literal meaning.\r\nEncapsulation is just putting things in a bag.\r\n i.e. putting all the attributes and methods in a class achieves Encapsulation\r\nHowever to a certain extent you also achieve information hiding by encapsulation.\r\naccess modifiers don&#39;t contribute in encapsulation but in information hiding.\r\n\r\n\r\n","title":"What are the differences between information hiding and encapsulation?","body":"<p>just see their literal meaning.\nEncapsulation is just putting things in a bag.\n i.e. putting all the attributes and methods in a class achieves Encapsulation\nHowever to a certain extent you also achieve information hiding by encapsulation.\naccess modifiers don't contribute in encapsulation but in information hiding.</p>\n"},{"tags":[],"owner":{"account_id":214691,"reputation":1266,"user_id":468806,"accept_rate":50,"display_name":"stamhaney"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1355744160,"creation_date":1355744160,"answer_id":13913387,"question_id":13913174,"body_markdown":"To Answer your question:\r\n\r\nInformation hiding: Is hiding the essential parts of the object which expose the way it is implemented internally and exposing higher abstractions. For e.g. : In a TV remote, we are exposed to only the keys to interact with the TV, we are not aware of what goes inside.\r\n\r\nEncapsulation: Encapsulation is combining data and methods and allowing the internal data to be accessed by public methods. So, yes, if in your class, you make the variable age, private, you will achieve encapsulation","title":"What are the differences between information hiding and encapsulation?","body":"<p>To Answer your question:</p>\n\n<p>Information hiding: Is hiding the essential parts of the object which expose the way it is implemented internally and exposing higher abstractions. For e.g. : In a TV remote, we are exposed to only the keys to interact with the TV, we are not aware of what goes inside.</p>\n\n<p>Encapsulation: Encapsulation is combining data and methods and allowing the internal data to be accessed by public methods. So, yes, if in your class, you make the variable age, private, you will achieve encapsulation</p>\n"},{"tags":[],"owner":{"account_id":1064228,"reputation":16042,"user_id":1065180,"accept_rate":92,"display_name":"Nandkumar Tekale"},"down_vote_count":1,"up_vote_count":24,"is_accepted":true,"score":23,"last_activity_date":1491105371,"creation_date":1355745330,"answer_id":13913701,"question_id":13913174,"body_markdown":"&gt; Well I know that making fields private and then making setter and getter of the fields is encapsulation. However, does encapsulation mean just this?\r\n\r\n---&gt; Encapsulation is an OOP concept where object state(class fields) and it&#39;s behaviour(methods) is wrapped together. Java provides encapsulation using `class`.\r\n\r\n&gt; Information Hiding:  \r\n\r\n--&gt; mechanism for restricting access to some of the object&#39;s components. Your above example is the case of Information Hiding if you make `age` private.\r\n\r\n-----------------------------\r\nInitially, Information/Data Hiding was considered the part of Encapsulation, and the definitions of Encapsulation would be as:\r\n\r\n- A language mechanism for restricting access to some of the object&#39;s components.\r\n- A language construct that facilitates the bundling of data with the methods (or other functions) operating on that data.\r\n\r\nthe second definition is motivated by the fact that in many OOP languages hiding of components is not automatic or can be overridden; thus, information hiding is defined as a separate notion by those who prefer the second definition.\r\n\r\nReference: [wikipage][1]\r\n\r\n\r\n  [1]: http://en.wikipedia.org/wiki/Encapsulation_%28object-oriented_programming%29","title":"What are the differences between information hiding and encapsulation?","body":"<blockquote>\n  <p>Well I know that making fields private and then making setter and getter of the fields is encapsulation. However, does encapsulation mean just this?</p>\n</blockquote>\n\n<p>---> Encapsulation is an OOP concept where object state(class fields) and it's behaviour(methods) is wrapped together. Java provides encapsulation using <code>class</code>.</p>\n\n<blockquote>\n  <p>Information Hiding:  </p>\n</blockquote>\n\n<p>--> mechanism for restricting access to some of the object's components. Your above example is the case of Information Hiding if you make <code>age</code> private.</p>\n\n<hr>\n\n<p>Initially, Information/Data Hiding was considered the part of Encapsulation, and the definitions of Encapsulation would be as:</p>\n\n<ul>\n<li>A language mechanism for restricting access to some of the object's components.</li>\n<li>A language construct that facilitates the bundling of data with the methods (or other functions) operating on that data.</li>\n</ul>\n\n<p>the second definition is motivated by the fact that in many OOP languages hiding of components is not automatic or can be overridden; thus, information hiding is defined as a separate notion by those who prefer the second definition.</p>\n\n<p>Reference: <a href=\"http://en.wikipedia.org/wiki/Encapsulation_%28object-oriented_programming%29\" rel=\"noreferrer\">wikipage</a></p>\n"},{"tags":[],"owner":{"account_id":1703487,"reputation":9978,"user_id":1563039,"accept_rate":100,"display_name":"Joseph Thomson"},"down_vote_count":0,"up_vote_count":37,"is_accepted":false,"score":37,"last_activity_date":1625151401,"creation_date":1473885835,"answer_id":39499367,"question_id":13913174,"body_markdown":"Encapsulation and information hiding are very closely linked concepts, though their precise definitions vary depending on who you talk to.\r\n\r\nThe concept of &quot;information hiding&quot; was first described by [Parnas (1972)][1] who suggested that access to information should be restricted to reduce the interconnectedness of a system. He proposed that this would facilitate splitting of a system into modules while maintaining a user-friendly external interface and allowing implementation details to be changed without affecting clients.\r\n\r\nThe term &quot;encapsulation&quot; was coined by [Zilles (1973)][2] to describe the use of procedures to control access to underlying data in order to reduce system complexity and protect data from dangerous modification.\r\n\r\nSubsequently, [Parnas (1978)][3] described information hiding and encapsulation (and abstraction) as synonymous terms, which describe the hiding of details of a system that are likely to change. However, distinctions have been drawn between information hiding and encapsulation, such as by [Micallef (1987)][4], who described encapsulation as &quot;the strict enforcement of information hiding&quot;. Some authors, such as [Cohen (1984)][5] and [Abreu and Melo (1996)][6] describe &quot;encapsulation mechanisms&quot;, especially in object-oriented programming languages, as allowing information hiding.\r\n\r\n[Meyers (2000)][7] suggests that the degree to which a piece of code is encapsulated depends on the amount of code which would be broken if it changed. In this sense, private data and methods are more encapsulated the fewer methods by which they can be accessed. In contrast, public data and methods are completely unencapsulated, as the amount of code by which they can be accessed is unknown.\r\n\r\nConversely, [Rogers (2001)][8] suggests that encapsulation is simply the language mechanism that allows data to be bundled with methods that operate on that data. He claims that encapsulation fundamentally has nothing to do with information hiding. However, this definition is counter to almost all usage of the term in the academic literature in the 28 years prior to the publication of his article. There *are* a few other examples of this usage, for example [Archer and Stinson (1995)][9], but they are few and far between and not particularly notable.\r\n\r\nIn conclusion, information hiding is the idea that information should be hidden so that a design can be changed without affecting clients. This allows for increased flexibility and safety. Encapsulation may be considered to be the same as information hiding, but the term is often used to describe the practical implementation of information hiding, especially in object-oriented programming.\r\n\r\nAs an example of information hiding/encapsulation, consider this class:\r\n\r\n```java\r\npublic class BankAccount {\r\n    public int dollars;\r\n}\r\n```\r\n\r\nThe implementation of this class is completely unencapsulated, which means it is inflexible (e.g. we cannot easily add support for individual cents in the future) and unsafe (e.g. the account can changed to be negative). However, if we hide the data behind a formally defined interface of methods, we gain flexibility and safety.\r\n\r\n```java\r\npublic class BankAccount {\r\n    private int dollars;\r\n\r\n    public void deposit(int dollars) {\r\n        this.dollars += Math.max(0, dollars);\r\n    }\r\n}\r\n```\r\n\r\nWe now have control over how the state is modified, and we can also change the implementation without breaking client code:\r\n\r\n```java\r\npublic class BankAccount {\r\n    private int cents;\r\n\r\n    public void deposit(int dollars) {\r\n        deposit(dollars, 0);\r\n    }\r\n\r\n    public void deposit(int dollars, int cents) {\r\n        this.cents += Math.max(0, 100 * dollars) + Math.max(0, cents);\r\n    }\r\n}\r\n```\r\n\r\nThe class is now better encapsulated because we have hidden information about its underlying implementation.\r\n\r\n  [1]: http://citeseer.ist.psu.edu/viewdoc/summary?doi=10.1.1.132.7232\r\n  [2]: http://dl.acm.org/citation.cfm?doid=800021.808305\r\n  [3]: https://courses.cs.washington.edu/courses/cse503/08wi/parnas-1979.pdf\r\n  [4]: http://dl.acm.org/citation.cfm?id=36160.36167\r\n  [5]: http://doi.acm.org/10.1145/948415.948418\r\n  [6]: http://citeseerx.ist.psu.edu/viewdoc/summary?doi=10.1.1.49.3479\r\n  [7]: http://www.drdobbs.com/cpp/how-non-member-functions-improve-encapsu/184401197\r\n  [8]: http://www.javaworld.com/article/2075271/core-java/encapsulation-is-not-information-hiding.html\r\n  [9]: http://repository.cmu.edu/sei/214/","title":"What are the differences between information hiding and encapsulation?","body":"<p>Encapsulation and information hiding are very closely linked concepts, though their precise definitions vary depending on who you talk to.</p>\n<p>The concept of &quot;information hiding&quot; was first described by <a href=\"http://citeseer.ist.psu.edu/viewdoc/summary?doi=10.1.1.132.7232\" rel=\"noreferrer\">Parnas (1972)</a> who suggested that access to information should be restricted to reduce the interconnectedness of a system. He proposed that this would facilitate splitting of a system into modules while maintaining a user-friendly external interface and allowing implementation details to be changed without affecting clients.</p>\n<p>The term &quot;encapsulation&quot; was coined by <a href=\"http://dl.acm.org/citation.cfm?doid=800021.808305\" rel=\"noreferrer\">Zilles (1973)</a> to describe the use of procedures to control access to underlying data in order to reduce system complexity and protect data from dangerous modification.</p>\n<p>Subsequently, <a href=\"https://courses.cs.washington.edu/courses/cse503/08wi/parnas-1979.pdf\" rel=\"noreferrer\">Parnas (1978)</a> described information hiding and encapsulation (and abstraction) as synonymous terms, which describe the hiding of details of a system that are likely to change. However, distinctions have been drawn between information hiding and encapsulation, such as by <a href=\"http://dl.acm.org/citation.cfm?id=36160.36167\" rel=\"noreferrer\">Micallef (1987)</a>, who described encapsulation as &quot;the strict enforcement of information hiding&quot;. Some authors, such as <a href=\"http://doi.acm.org/10.1145/948415.948418\" rel=\"noreferrer\">Cohen (1984)</a> and <a href=\"http://citeseerx.ist.psu.edu/viewdoc/summary?doi=10.1.1.49.3479\" rel=\"noreferrer\">Abreu and Melo (1996)</a> describe &quot;encapsulation mechanisms&quot;, especially in object-oriented programming languages, as allowing information hiding.</p>\n<p><a href=\"http://www.drdobbs.com/cpp/how-non-member-functions-improve-encapsu/184401197\" rel=\"noreferrer\">Meyers (2000)</a> suggests that the degree to which a piece of code is encapsulated depends on the amount of code which would be broken if it changed. In this sense, private data and methods are more encapsulated the fewer methods by which they can be accessed. In contrast, public data and methods are completely unencapsulated, as the amount of code by which they can be accessed is unknown.</p>\n<p>Conversely, <a href=\"http://www.javaworld.com/article/2075271/core-java/encapsulation-is-not-information-hiding.html\" rel=\"noreferrer\">Rogers (2001)</a> suggests that encapsulation is simply the language mechanism that allows data to be bundled with methods that operate on that data. He claims that encapsulation fundamentally has nothing to do with information hiding. However, this definition is counter to almost all usage of the term in the academic literature in the 28 years prior to the publication of his article. There <em>are</em> a few other examples of this usage, for example <a href=\"http://repository.cmu.edu/sei/214/\" rel=\"noreferrer\">Archer and Stinson (1995)</a>, but they are few and far between and not particularly notable.</p>\n<p>In conclusion, information hiding is the idea that information should be hidden so that a design can be changed without affecting clients. This allows for increased flexibility and safety. Encapsulation may be considered to be the same as information hiding, but the term is often used to describe the practical implementation of information hiding, especially in object-oriented programming.</p>\n<p>As an example of information hiding/encapsulation, consider this class:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class BankAccount {\n    public int dollars;\n}\n</code></pre>\n<p>The implementation of this class is completely unencapsulated, which means it is inflexible (e.g. we cannot easily add support for individual cents in the future) and unsafe (e.g. the account can changed to be negative). However, if we hide the data behind a formally defined interface of methods, we gain flexibility and safety.</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class BankAccount {\n    private int dollars;\n\n    public void deposit(int dollars) {\n        this.dollars += Math.max(0, dollars);\n    }\n}\n</code></pre>\n<p>We now have control over how the state is modified, and we can also change the implementation without breaking client code:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class BankAccount {\n    private int cents;\n\n    public void deposit(int dollars) {\n        deposit(dollars, 0);\n    }\n\n    public void deposit(int dollars, int cents) {\n        this.cents += Math.max(0, 100 * dollars) + Math.max(0, cents);\n    }\n}\n</code></pre>\n<p>The class is now better encapsulated because we have hidden information about its underlying implementation.</p>\n"},{"tags":[],"owner":{"account_id":12675818,"reputation":129,"user_id":9211617,"accept_rate":20,"display_name":"thox"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1516426318,"creation_date":1516426318,"answer_id":48352948,"question_id":13913174,"body_markdown":"-&gt; Encapsulation allows us to provide access to certain parts of an object, restricting, at the same time,\r\n   access to others. In other words, encapsulation allows us to do information hiding.\r\n\r\n-&gt; Information hiding is actually the process or act of restricting \r\n","title":"What are the differences between information hiding and encapsulation?","body":"<p>-> Encapsulation allows us to provide access to certain parts of an object, restricting, at the same time,\n   access to others. In other words, encapsulation allows us to do information hiding.</p>\n\n<p>-> Information hiding is actually the process or act of restricting </p>\n"},{"tags":[],"owner":{"account_id":2329477,"reputation":2767,"user_id":2043248,"accept_rate":86,"display_name":"Alireza Rahmani Khalili"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1625168702,"creation_date":1539030122,"answer_id":52709582,"question_id":13913174,"body_markdown":"```java\r\nclass NoEncapsulationNoInformationHiding { \r\n    public List widths = new ArrayList();\r\n}\r\n\r\nclass EncapsulationNoInformationHiding {\r\n    private ArrayList widths = new ArrayList();\r\n\r\n    public ArrayList getWidths() {\r\n        return this.widths;\r\n    }\r\n}\r\n\r\nclass EncapsulationInformationHiding {\r\n    private List widths = new ArrayList();\r\n\r\n    public List getWidths() {\r\n        return this.widths;\r\n    }\r\n}\r\n```\r\n\r\n- *Encapsulation*: combining things, such as data and the procedures that operate on these data (making up an object). Encapsulation implies the hiding of an object’s data because any procedures can operate on public data.\r\n- *Information hiding*: abstracting things, such as an object’s implementation i.e. an object’s data, the implementation of its procedures, and the classes of the parameters and return values of its procedures. Information hiding implies encapsulation, but not the other way round.\r\n\r\nExamples inspired from [William Underwood’s][1].\r\n\r\n  [1]: http://wiki.c2.com/?EncapsulationIsNotInformationHiding","title":"What are the differences between information hiding and encapsulation?","body":"<pre class=\"lang-java prettyprint-override\"><code>class NoEncapsulationNoInformationHiding { \n    public List widths = new ArrayList();\n}\n\nclass EncapsulationNoInformationHiding {\n    private ArrayList widths = new ArrayList();\n\n    public ArrayList getWidths() {\n        return this.widths;\n    }\n}\n\nclass EncapsulationInformationHiding {\n    private List widths = new ArrayList();\n\n    public List getWidths() {\n        return this.widths;\n    }\n}\n</code></pre>\n<ul>\n<li><em>Encapsulation</em>: combining things, such as data and the procedures that operate on these data (making up an object). Encapsulation implies the hiding of an object’s data because any procedures can operate on public data.</li>\n<li><em>Information hiding</em>: abstracting things, such as an object’s implementation i.e. an object’s data, the implementation of its procedures, and the classes of the parameters and return values of its procedures. Information hiding implies encapsulation, but not the other way round.</li>\n</ul>\n<p>Examples inspired from <a href=\"http://wiki.c2.com/?EncapsulationIsNotInformationHiding\" rel=\"nofollow noreferrer\">William Underwood’s</a>.</p>\n"},{"tags":[],"owner":{"account_id":6947516,"reputation":26,"user_id":5331381,"display_name":"Manjula Liyanage"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1549959798,"creation_date":1549959101,"answer_id":54645514,"question_id":13913174,"body_markdown":"This is what happens when you do not implement information hiding, encapsulation or whatever it called. Bad things occur when you change something in somewhere in a corner that you think that is independent. Secondly when you want to change a third-party library that is used in your system, that you find out there are references everywhere in the system that you cannot move without refactoring the whole thing. For example, you want to upgrade your data access library version (I faced this issue when I wanted to update ODP.net version), you estimate the work is thinking that you want to modify the DataAccess class that supposed to have reference to the DB client library. But you find out that every business class has created a reference for the DB client library. Now you have to update references of 60 assemblies instead of one :(\r\n[Information leaking][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/hV0n7.png\r\n\r\nThe same thing happens when you expose internal logic to clients. For example, you have a function EnrollMember(string flag) you accept &quot;A,&quot; &quot;B&quot; as valid flags and do some logic inside the function. When you want to change this function later, you cannot do it without informing the clients.  ","title":"What are the differences between information hiding and encapsulation?","body":"<p>This is what happens when you do not implement information hiding, encapsulation or whatever it called. Bad things occur when you change something in somewhere in a corner that you think that is independent. Secondly when you want to change a third-party library that is used in your system, that you find out there are references everywhere in the system that you cannot move without refactoring the whole thing. For example, you want to upgrade your data access library version (I faced this issue when I wanted to update ODP.net version), you estimate the work is thinking that you want to modify the DataAccess class that supposed to have reference to the DB client library. But you find out that every business class has created a reference for the DB client library. Now you have to update references of 60 assemblies instead of one :(\n<a href=\"https://i.stack.imgur.com/hV0n7.png\" rel=\"nofollow noreferrer\">Information leaking</a></p>\n\n<p>The same thing happens when you expose internal logic to clients. For example, you have a function EnrollMember(string flag) you accept \"A,\" \"B\" as valid flags and do some logic inside the function. When you want to change this function later, you cannot do it without informing the clients.  </p>\n"},{"tags":[],"owner":{"account_id":12543328,"reputation":21,"user_id":13346478,"display_name":"James Koh"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1661439784,"creation_date":1661439334,"answer_id":73489719,"question_id":13913174,"body_markdown":"This is an old question but I came across a very helpful example to share with everyone.\r\n\r\nYou are correct that encapsulation is bundling of data with the methods that operate on that data. You are also correct that setting `age` to `private` means information hiding.\r\n\r\nWhile the word &quot;encapsulating&quot; seems to imply &quot;hiding&quot;, it does not &quot;hide information&quot; here.\r\n\r\nThe example from [Encapsulation is not information hiding][1] helps demonstrate (the difference between) encapsulation and information hiding.\r\n\r\nThe following are a `Position` class and a utility class `PositionUtility` that acts on it.\r\n\r\n```lang-java\r\npublic class Position {\r\n    public double lat;\r\n    public double lon;\r\n}\r\n```\r\n\r\n```lang-java\r\npublic class PositionUtility {\r\n    // the distance between the two Positions\r\n    public static double distance(Position pos1, Position pos2)  { /* an implementation */ }\r\n\r\n    // the angle of Position pos1 towards Position pos2\r\n    public static double heading(Position pos1, Position pos2) { /* an implementation */ }\r\n}\r\n```\r\n\r\nA typical use case for this code would be\r\n```lang-java\r\nPosition myHouse = new Position();\r\nmyHouse.lat = 30.0;\r\nmyHouse.lon = 50.0;\r\n\r\nPosition coffeeShop = new Position();\r\ncoffeeShop.lat = 31.0;\r\ncoffeeShop.lon = 49.0;\r\n\r\ndouble distance = PositionUtility.distance(myHouse, coffeeShop);\r\ndouble heading = PositionUtility.heading(myHouse, coffeeShop);\r\n\r\n```\r\n\r\nThe code has no encapsulation and information hiding. In order to adhere to encapsulation, you should let `Position` itself handle the operations involving `lat` and `lon`.\r\n\r\n```lang-java\r\npublic class Position {\r\n    public double lat;\r\n    public double lon;\r\n\r\n    // the distance between this Position and another Position pos\r\n    public double distance(Position pos) { /* an implementation */ }\r\n\r\n    // the angle of this Position towards another Position pos\r\n    public static double heading(Position pos) { /* an implementation */ }\r\n}\r\n```\r\n\r\n**Now you have encapsulation**. Whenever you need to call `distance` and `heading` you do not need an external class (namely `PositionUtility`) to access the  fields in `Position`.\r\n\r\nHowever, other classes can still access and modify its public fields `lat`, `lon`. If you want to enforce certain constraints on these fields, those fields would need to be `private` and modifying and retrieving them have to be done through getters/setters.\r\n\r\n```\r\npublic class Position {\r\n    private double lat;\r\n    private double lon;\r\n    \r\n    public Position(double lat, double lon) {\r\n        setLatitude(lat);\r\n        setLongitude(lon);\r\n    }\r\n    \r\n    public void setLatitude(double lat) {\r\n        // some checking\r\n        this.lat = lat;\r\n    }\r\n    \r\n    public void setLongitude(double lon) {\r\n        // some checking\r\n        this.lon = lon;\r\n    }\r\n    \r\n    public double getLatitude() { return lat; }\r\n    public double getLongitude() { return lon; }\r\n    // ...\r\n}\r\n```\r\n\r\n**Now you achieve information hiding**. The actual data structure used by `Position` is no longer visible to other classes. Now, you could change your underlying implementation without affecting the users.\r\n\r\nAs an example, you can use `phi` and `theta` as your private fields and use radian instead of degree for calculation. A user using `getLatitude()` and other getters/setters would not be aware that your internal data structure no longer contains `lat` and `lon` (and that should not matter to them anyway).\r\n\r\n```\r\npublic class Position {\r\n    private double phi;\r\n    private double theta;\r\n    \r\n    public Position(double lat, double lon) {\r\n        setLatitude(lat);\r\n        setLongitude(lon);\r\n    }\r\n\r\n    public void setLatitude(double lat) { setPhi(Math.toRadian(lat)); }\r\n    public void setLongitude(double lon) { setTheta(Math.toRadian(lon)); }\r\n    \r\n    private void setPhi(double phi) {\r\n        // some checking\r\n        this.phi = phi;\r\n    }\r\n    \r\n    private void setTheta(double theta) {\r\n        // some checking\r\n        this.theta = theta;\r\n    }\r\n    \r\n    public double getLatitude() { return Math.toDegrees(phi); }\r\n    public double getLongitude() { return Math.toDegrees(theta); }\r\n    // ...\r\n}\r\n```\r\n\r\nIf information hiding hadn&#39;t been in place, this change in implementation would not be possible without affecting other classes, as they could be directly accessing the public `lon` and `lat` fields already.\r\n\r\n[1]: https://www.infoworld.com/article/2075271/encapsulation-is-not-information-hiding.html\r\n","title":"What are the differences between information hiding and encapsulation?","body":"<p>This is an old question but I came across a very helpful example to share with everyone.</p>\n<p>You are correct that encapsulation is bundling of data with the methods that operate on that data. You are also correct that setting <code>age</code> to <code>private</code> means information hiding.</p>\n<p>While the word &quot;encapsulating&quot; seems to imply &quot;hiding&quot;, it does not &quot;hide information&quot; here.</p>\n<p>The example from <a href=\"https://www.infoworld.com/article/2075271/encapsulation-is-not-information-hiding.html\" rel=\"nofollow noreferrer\">Encapsulation is not information hiding</a> helps demonstrate (the difference between) encapsulation and information hiding.</p>\n<p>The following are a <code>Position</code> class and a utility class <code>PositionUtility</code> that acts on it.</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class Position {\n    public double lat;\n    public double lon;\n}\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>public class PositionUtility {\n    // the distance between the two Positions\n    public static double distance(Position pos1, Position pos2)  { /* an implementation */ }\n\n    // the angle of Position pos1 towards Position pos2\n    public static double heading(Position pos1, Position pos2) { /* an implementation */ }\n}\n</code></pre>\n<p>A typical use case for this code would be</p>\n<pre class=\"lang-java prettyprint-override\"><code>Position myHouse = new Position();\nmyHouse.lat = 30.0;\nmyHouse.lon = 50.0;\n\nPosition coffeeShop = new Position();\ncoffeeShop.lat = 31.0;\ncoffeeShop.lon = 49.0;\n\ndouble distance = PositionUtility.distance(myHouse, coffeeShop);\ndouble heading = PositionUtility.heading(myHouse, coffeeShop);\n\n</code></pre>\n<p>The code has no encapsulation and information hiding. In order to adhere to encapsulation, you should let <code>Position</code> itself handle the operations involving <code>lat</code> and <code>lon</code>.</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class Position {\n    public double lat;\n    public double lon;\n\n    // the distance between this Position and another Position pos\n    public double distance(Position pos) { /* an implementation */ }\n\n    // the angle of this Position towards another Position pos\n    public static double heading(Position pos) { /* an implementation */ }\n}\n</code></pre>\n<p><strong>Now you have encapsulation</strong>. Whenever you need to call <code>distance</code> and <code>heading</code> you do not need an external class (namely <code>PositionUtility</code>) to access the  fields in <code>Position</code>.</p>\n<p>However, other classes can still access and modify its public fields <code>lat</code>, <code>lon</code>. If you want to enforce certain constraints on these fields, those fields would need to be <code>private</code> and modifying and retrieving them have to be done through getters/setters.</p>\n<pre><code>public class Position {\n    private double lat;\n    private double lon;\n    \n    public Position(double lat, double lon) {\n        setLatitude(lat);\n        setLongitude(lon);\n    }\n    \n    public void setLatitude(double lat) {\n        // some checking\n        this.lat = lat;\n    }\n    \n    public void setLongitude(double lon) {\n        // some checking\n        this.lon = lon;\n    }\n    \n    public double getLatitude() { return lat; }\n    public double getLongitude() { return lon; }\n    // ...\n}\n</code></pre>\n<p><strong>Now you achieve information hiding</strong>. The actual data structure used by <code>Position</code> is no longer visible to other classes. Now, you could change your underlying implementation without affecting the users.</p>\n<p>As an example, you can use <code>phi</code> and <code>theta</code> as your private fields and use radian instead of degree for calculation. A user using <code>getLatitude()</code> and other getters/setters would not be aware that your internal data structure no longer contains <code>lat</code> and <code>lon</code> (and that should not matter to them anyway).</p>\n<pre><code>public class Position {\n    private double phi;\n    private double theta;\n    \n    public Position(double lat, double lon) {\n        setLatitude(lat);\n        setLongitude(lon);\n    }\n\n    public void setLatitude(double lat) { setPhi(Math.toRadian(lat)); }\n    public void setLongitude(double lon) { setTheta(Math.toRadian(lon)); }\n    \n    private void setPhi(double phi) {\n        // some checking\n        this.phi = phi;\n    }\n    \n    private void setTheta(double theta) {\n        // some checking\n        this.theta = theta;\n    }\n    \n    public double getLatitude() { return Math.toDegrees(phi); }\n    public double getLongitude() { return Math.toDegrees(theta); }\n    // ...\n}\n</code></pre>\n<p>If information hiding hadn't been in place, this change in implementation would not be possible without affecting other classes, as they could be directly accessing the public <code>lon</code> and <code>lat</code> fields already.</p>\n"}],"owner":{"account_id":1905679,"reputation":543,"user_id":1720616,"accept_rate":38,"display_name":"user1720616"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":55877,"favorite_count":0,"down_vote_count":1,"up_vote_count":34,"accepted_answer_id":13913701,"answer_count":9,"score":33,"last_activity_date":1661439784,"creation_date":1355743391,"question_id":13913174,"body_markdown":"What are the differences between *information hiding* and *encapsulation*?\r\n\r\nI have read that encapsulation means bundling data and the procedures that should operate on them together. If that is so, does the following class achieve encapsulation?\r\n\r\n```java\r\nclass IsThisEncapsulation {\r\n    public int age;\r\n\r\n    public int getAge() {\r\n        return this.age;\r\n    }\r\n\r\n    public void setAge(int age) {\r\n        this.age = age;\r\n    }\r\n}\r\n```\r\n\r\nNow would declaring the data attribute `age` `private` achieve information hiding?","title":"What are the differences between information hiding and encapsulation?","body":"<p>What are the differences between <em>information hiding</em> and <em>encapsulation</em>?</p>\n<p>I have read that encapsulation means bundling data and the procedures that should operate on them together. If that is so, does the following class achieve encapsulation?</p>\n<pre class=\"lang-java prettyprint-override\"><code>class IsThisEncapsulation {\n    public int age;\n\n    public int getAge() {\n        return this.age;\n    }\n\n    public void setAge(int age) {\n        this.age = age;\n    }\n}\n</code></pre>\n<p>Now would declaring the data attribute <code>age</code> <code>private</code> achieve information hiding?</p>\n"},{"tags":["java","angularjs","firebase","spring-boot","firebase-cloud-messaging"],"owner":{"account_id":11628613,"reputation":27,"user_id":8517622,"display_name":"Bhushan Rohankar"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":239,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1661439694,"creation_date":1661439694,"question_id":73489804,"body_markdown":"I&#39;m trying to get my FCM web notifications to contain a clickable link to my site.\r\nI have generated fcmlink through backend(java). \r\n\r\n1.Created Class NotificationWebDataDTO&lt;T&gt; which implements FirebaseNotificationData&lt;T&gt;\r\n\r\n\r\n    public class NotificationWebDataDTO&lt;T&gt; implements FirebaseNotificationData&lt;T&gt; {\r\n\r\n    \r\n    NotificationWebSubDataDTO&lt;T&gt; data;\r\n\r\n   \r\n    NotificationWebFCMOptionsDTO fcmOptions;\r\n\r\n}\r\n\r\n2. In NotificationWebSubDataDTO class i&#39;m having \r\n    \r\n    ```\r\n    public class NotificationWebSubDataDTO&lt;T&gt; {\r\n\r\n    \r\n    private String title;\r\n\r\n   \r\n    private String body;\r\n\r\n   \r\n    private String state;\r\n\r\n    \r\n    private String parameter;\r\n\r\n    \r\n    private String timeStamp;\r\n}\r\n```\r\n\r\n3. In NotificationWebFCMOptionsDTO class\r\n     \r\n    ```\r\n     public class NotificationWebFCMOptionsDTO {\r\n\r\n    \r\n    private String link;\r\n}\r\n```\r\n\r\n4. After setting values to each element. I&#39;ve converted NotificationWebDataDTO to JsonObject.\r\n \r\n```\r\npublic JsonObject buildNotificationMessage(FirebaseNotificationData&lt;?&gt; notificationDataDTO, String token) {\r\n\r\n        JsonObject jsonObject = objectToJson(notificationDataDTO);\r\n        JsonObject jmessage = new JsonObject();\r\n        jmessage.addProperty(&quot;token&quot;, token);\r\n        if (notificationDataDTO instanceof NotificationDataDTO) {\r\n            jmessage.add(&quot;data&quot;, jsonObject);\r\n        } else {\r\n            Gson gson = new Gson();\r\n            jmessage.add(notificationDataDTO.mainKey(), gson.toJsonTree(notificationDataDTO));\r\n        }\r\n\r\n        JsonObject jfcm = new JsonObject();\r\n        jfcm.add(MESSAGE_KEY, jmessage);\r\n\r\n        return jfcm;\r\n    }\r\n```\r\n\r\n5. Converted NotificationWebDataDTO to JsonObject\r\n(example)\r\n```\r\n{\r\n  &quot;message&quot;: {\r\n    &quot;token&quot;: &quot;ex token&quot;,\r\n    &quot;webpush&quot;: {\r\n      &quot;data&quot;: {\r\n        &quot;title&quot;: &quot;title&quot;,\r\n        &quot;body&quot;: &quot;ABCBCHD&quot;,\r\n        &quot;state&quot;: &quot;ABCHD&quot;,\r\n        &quot;parameter&quot;: &quot;{\\&quot;djd\\&quot;:177,\\&quot;djd\\&quot;:true,\\&quot;fnfnf\\&quot;:1,\\&quot;fnfnf\\&quot;:0}&quot;,\r\n        &quot;timeStamp&quot;: &quot;1661438135926&quot;\r\n      },\r\n      &quot;fcmOptions&quot;: {\r\n        &quot;link&quot;: &quot;http://abcnc/#/app/requestStatus/23/true/1/0/&quot;\r\n      }\r\n    }\r\n  }\r\n}\r\n```\r\n6. Now Send request to FCM message using HTTP\r\n\r\n```\r\n private NotificationResponseDTO sendMessage(JsonObject fcmMessage, Integer target) throws IOException {\r\n        HttpURLConnection connection = getConnection(target);\r\n        connection.setDoOutput(true);\r\n        DataOutputStream outputStream = new DataOutputStream(connection.getOutputStream());\r\n        System.out.println(fcmMessage.toString());\r\n        outputStream.writeBytes(fcmMessage.toString());\r\n        outputStream.flush();\r\n        outputStream.close();\r\n\r\n        NotificationResponseDTO dto = null;\r\n\r\n        int responseCode = connection.getResponseCode();\r\n        if (responseCode == 200) {\r\n            String response = inputstreamToString(connection.getInputStream());\r\n            dto = new NotificationResponseDTO(constants.UPDATE_SUCESS, response);\r\n            slf4jLogger.info(&quot;Message sent to Firebase for delivery, response:&quot;);\r\n            slf4jLogger.info(response);\r\n        } else {\r\n            String response = inputstreamToString(connection.getErrorStream());\r\n            Gson gson = new Gson();\r\n            dto = gson.fromJson(response, NotificationResponseDTO.class);\r\n            dto.setFailure(constants.UPDATE_SUCESS);\r\n            slf4jLogger.info(response);\r\n        }\r\n        return dto;\r\n    }\r\n```\r\n\r\n7. But while catching this object through frontend payload i am not getting whole Object of **webpush** \r\nhere is my frontend code\r\n```\r\nself.addEventListener(&#39;notificationclick&#39;, function (e) {\r\n  console.log(&quot;self.addEventListener&quot;, e);\r\n  clients.openWindow(e.notification.data).then(function (windowClient) { });\r\n  e.notification.close();\r\n});\r\n\r\nmessaging.setBackgroundMessageHandler(function(payload) {\r\n  console.log(&#39;[firebase-messaging-sw.js] Received background message &#39;, payload);\r\n  const notificationTitle = payload.data.title;\r\n  const notificationOptions = {\r\n    body: payload.data,\r\n    requireInteraction: true,\r\n    icon: &#39;http://dev.transporto.in/images/Transporto-Logo-Black.png&#39;    \r\n  };\r\n  return self.registration.showNotification(notificationTitle,notificationOptions);\r\n\r\n});\r\n```\r\nIn console i am getting \r\n```\r\n{data: {…}, from: &#39;497325284033&#39;, priority: &#39;normal&#39;, fcmMessageId: &#39;someid&#39;}\r\ndata:\r\nbody: &quot;SDJNDJ&quot;\r\nparameter: &quot;{\\&quot;rq\\&quot;:001,\\&quot;stp\\&quot;:true,\\&quot;list\\&quot;:1,\\&quot;focusSectionId\\&quot;:0}&quot;\r\nstate: &quot;app.RqStatus&quot;\r\ntimeStamp: &quot;1661439276370&quot;\r\ntitle: &quot;SDDN&quot;\r\n```\r\nthere is no **fcmoption** with **link** in payload\r\n","title":"How to get fcm_option.link from [firebase-messaging-sw.js] Received background message (payload)","body":"<p>I'm trying to get my FCM web notifications to contain a clickable link to my site.\nI have generated fcmlink through backend(java).</p>\n<p>1.Created Class NotificationWebDataDTO which implements FirebaseNotificationData</p>\n<pre><code>public class NotificationWebDataDTO&lt;T&gt; implements FirebaseNotificationData&lt;T&gt; {\n\n\nNotificationWebSubDataDTO&lt;T&gt; data;\n\n\nNotificationWebFCMOptionsDTO fcmOptions;\n</code></pre>\n<p>}</p>\n<ol start=\"2\">\n<li><p>In NotificationWebSubDataDTO class i'm having</p>\n<pre><code>public class NotificationWebSubDataDTO&lt;T&gt; {\n\n\nprivate String title;\n\n\nprivate String body;\n\n\nprivate String state;\n\n\nprivate String parameter;\n\n\nprivate String timeStamp;\n</code></pre>\n</li>\n</ol>\n<p>}</p>\n<pre><code>\n3. In NotificationWebFCMOptionsDTO class\n     \n    ```\n     public class NotificationWebFCMOptionsDTO {\n\n    \n    private String link;\n}\n</code></pre>\n<ol start=\"4\">\n<li>After setting values to each element. I've converted NotificationWebDataDTO to JsonObject.</li>\n</ol>\n<pre><code>public JsonObject buildNotificationMessage(FirebaseNotificationData&lt;?&gt; notificationDataDTO, String token) {\n\n        JsonObject jsonObject = objectToJson(notificationDataDTO);\n        JsonObject jmessage = new JsonObject();\n        jmessage.addProperty(&quot;token&quot;, token);\n        if (notificationDataDTO instanceof NotificationDataDTO) {\n            jmessage.add(&quot;data&quot;, jsonObject);\n        } else {\n            Gson gson = new Gson();\n            jmessage.add(notificationDataDTO.mainKey(), gson.toJsonTree(notificationDataDTO));\n        }\n\n        JsonObject jfcm = new JsonObject();\n        jfcm.add(MESSAGE_KEY, jmessage);\n\n        return jfcm;\n    }\n</code></pre>\n<ol start=\"5\">\n<li>Converted NotificationWebDataDTO to JsonObject\n(example)</li>\n</ol>\n<pre><code>{\n  &quot;message&quot;: {\n    &quot;token&quot;: &quot;ex token&quot;,\n    &quot;webpush&quot;: {\n      &quot;data&quot;: {\n        &quot;title&quot;: &quot;title&quot;,\n        &quot;body&quot;: &quot;ABCBCHD&quot;,\n        &quot;state&quot;: &quot;ABCHD&quot;,\n        &quot;parameter&quot;: &quot;{\\&quot;djd\\&quot;:177,\\&quot;djd\\&quot;:true,\\&quot;fnfnf\\&quot;:1,\\&quot;fnfnf\\&quot;:0}&quot;,\n        &quot;timeStamp&quot;: &quot;1661438135926&quot;\n      },\n      &quot;fcmOptions&quot;: {\n        &quot;link&quot;: &quot;http://abcnc/#/app/requestStatus/23/true/1/0/&quot;\n      }\n    }\n  }\n}\n</code></pre>\n<ol start=\"6\">\n<li>Now Send request to FCM message using HTTP</li>\n</ol>\n<pre><code> private NotificationResponseDTO sendMessage(JsonObject fcmMessage, Integer target) throws IOException {\n        HttpURLConnection connection = getConnection(target);\n        connection.setDoOutput(true);\n        DataOutputStream outputStream = new DataOutputStream(connection.getOutputStream());\n        System.out.println(fcmMessage.toString());\n        outputStream.writeBytes(fcmMessage.toString());\n        outputStream.flush();\n        outputStream.close();\n\n        NotificationResponseDTO dto = null;\n\n        int responseCode = connection.getResponseCode();\n        if (responseCode == 200) {\n            String response = inputstreamToString(connection.getInputStream());\n            dto = new NotificationResponseDTO(constants.UPDATE_SUCESS, response);\n            slf4jLogger.info(&quot;Message sent to Firebase for delivery, response:&quot;);\n            slf4jLogger.info(response);\n        } else {\n            String response = inputstreamToString(connection.getErrorStream());\n            Gson gson = new Gson();\n            dto = gson.fromJson(response, NotificationResponseDTO.class);\n            dto.setFailure(constants.UPDATE_SUCESS);\n            slf4jLogger.info(response);\n        }\n        return dto;\n    }\n</code></pre>\n<ol start=\"7\">\n<li>But while catching this object through frontend payload i am not getting whole Object of <strong>webpush</strong>\nhere is my frontend code</li>\n</ol>\n<pre><code>self.addEventListener('notificationclick', function (e) {\n  console.log(&quot;self.addEventListener&quot;, e);\n  clients.openWindow(e.notification.data).then(function (windowClient) { });\n  e.notification.close();\n});\n\nmessaging.setBackgroundMessageHandler(function(payload) {\n  console.log('[firebase-messaging-sw.js] Received background message ', payload);\n  const notificationTitle = payload.data.title;\n  const notificationOptions = {\n    body: payload.data,\n    requireInteraction: true,\n    icon: 'http://dev.transporto.in/images/Transporto-Logo-Black.png'    \n  };\n  return self.registration.showNotification(notificationTitle,notificationOptions);\n\n});\n</code></pre>\n<p>In console i am getting</p>\n<pre><code>{data: {…}, from: '497325284033', priority: 'normal', fcmMessageId: 'someid'}\ndata:\nbody: &quot;SDJNDJ&quot;\nparameter: &quot;{\\&quot;rq\\&quot;:001,\\&quot;stp\\&quot;:true,\\&quot;list\\&quot;:1,\\&quot;focusSectionId\\&quot;:0}&quot;\nstate: &quot;app.RqStatus&quot;\ntimeStamp: &quot;1661439276370&quot;\ntitle: &quot;SDDN&quot;\n</code></pre>\n<p>there is no <strong>fcmoption</strong> with <strong>link</strong> in payload</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":3211603,"reputation":289297,"user_id":2711488,"display_name":"Holger"},"score":2,"creation_date":1661438541,"post_id":73489459,"comment_id":129777470,"body_markdown":"Does `contextRegistry.get(contributorId)` return a `V`, a `T`, or is this type parameter actually irrelevant?","body":"Does <code>contextRegistry.get(contributorId)</code> return a <code>V</code>, a <code>T</code>, or is this type parameter actually irrelevant?"},{"owner":{"account_id":401843,"reputation":89788,"user_id":768644,"display_name":"rzwitserloot"},"score":0,"creation_date":1661439711,"post_id":73489459,"comment_id":129778030,"body_markdown":"This question is not answerable without knowing what `threadContext.contextRegistry` is at the very least.","body":"This question is not answerable without knowing what <code>threadContext.contextRegistry</code> is at the very least."},{"owner":{"account_id":45934,"reputation":203659,"user_id":135589,"accept_rate":100,"display_name":"Jesper"},"score":1,"creation_date":1661439719,"post_id":73489459,"comment_id":129778037,"body_markdown":"Look at the method `getById`. You are creating an `Object` there that you wrap in an `Optional`, so you&#39;re trying to return an `Optional&lt;Object&gt;`. But the return type of the method is `Object&lt;T&gt;`. So the cause of the error is clear: an `Optional&lt;Object&gt;` is not an `Optional&lt;T&gt;`, therefore you get an error. Make sure that you return a value of the correct type, or change the signature of the method to match the type of the return value.","body":"Look at the method <code>getById</code>. You are creating an <code>Object</code> there that you wrap in an <code>Optional</code>, so you&#39;re trying to return an <code>Optional&lt;Object&gt;</code>. But the return type of the method is <code>Object&lt;T&gt;</code>. So the cause of the error is clear: an <code>Optional&lt;Object&gt;</code> is not an <code>Optional&lt;T&gt;</code>, therefore you get an error. Make sure that you return a value of the correct type, or change the signature of the method to match the type of the return value."}],"owner":{"account_id":1632114,"reputation":707,"user_id":1506449,"display_name":"Sajit Gangadharan"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":139,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1661439610,"creation_date":1661438238,"question_id":73489459,"body_markdown":"I copied below piece of code from a class file and pasted to my Java code but my compiler throws below message. \r\n\r\n    &quot;Required type:\r\n    Optional\r\n    &lt;T&gt;\r\n    Provided:\r\n    Optional\r\n    &lt;Object&gt;\r\n    \r\n    no instance(s) of type variable(s) exist so that Object conforms to T inference variable T has incompatible bounds: equality constraints: T lower bounds: Object&quot; \r\n\r\nOnly way to avoid this error is by Type Casting Optional&lt;T&gt; to Optional.ofNullable(object) in getById method. I dont want to type cast it as am not sure of side effect. \r\n\r\n```  private final Map&lt;Class&lt;? extends ThreadContextContributorId&lt;?&gt;&gt;, Object&gt; contextRegistry;\r\n    private static final InheritableThreadLocal&lt;ThreadContext&gt; THREAD_LOCAL = new NamedInheritableThreadLocal(&quot;DCL Thread Context&quot;) {\r\n        protected ThreadContext initialValue() {\r\n            return new ThreadContext();\r\n        }\r\n\r\n        protected ThreadContext childValue(ThreadContext parentValue) {\r\n            return new ThreadContext(parentValue);\r\n        }\r\n    };\r\n\r\n    private ThreadContext() {\r\n        this.contextRegistry = new HashMap&lt;&gt;();\r\n    }\r\n\r\n    private ThreadContext(ThreadContext parent) {\r\n        this.contextRegistry = new HashMap(parent.contextRegistry);\r\n    }\r\n\r\n    public static &lt;T, V extends ThreadContextContributorId&lt;T&gt;&gt; Optional&lt;T&gt; getById(@NonNull Class&lt;V&gt; contributorId) {\r\n        ThreadContext threadContext = THREAD_LOCAL.get();\r\n        Object object = threadContext.contextRegistry.get(contributorId);\r\n        return  Optional.ofNullable(object);\r\n    }\r\n```\r\nIs the a way to avoid this compilation error or is it ok to typecast it ?\r\n","title":"Compilation error in Java 8 because equality constraints","body":"<p>I copied below piece of code from a class file and pasted to my Java code but my compiler throws below message.</p>\n<pre><code>&quot;Required type:\nOptional\n&lt;T&gt;\nProvided:\nOptional\n&lt;Object&gt;\n\nno instance(s) of type variable(s) exist so that Object conforms to T inference variable T has incompatible bounds: equality constraints: T lower bounds: Object&quot; \n</code></pre>\n<p>Only way to avoid this error is by Type Casting Optional to Optional.ofNullable(object) in getById method. I dont want to type cast it as am not sure of side effect.</p>\n<pre><code>    private static final InheritableThreadLocal&lt;ThreadContext&gt; THREAD_LOCAL = new NamedInheritableThreadLocal(&quot;DCL Thread Context&quot;) {\n        protected ThreadContext initialValue() {\n            return new ThreadContext();\n        }\n\n        protected ThreadContext childValue(ThreadContext parentValue) {\n            return new ThreadContext(parentValue);\n        }\n    };\n\n    private ThreadContext() {\n        this.contextRegistry = new HashMap&lt;&gt;();\n    }\n\n    private ThreadContext(ThreadContext parent) {\n        this.contextRegistry = new HashMap(parent.contextRegistry);\n    }\n\n    public static &lt;T, V extends ThreadContextContributorId&lt;T&gt;&gt; Optional&lt;T&gt; getById(@NonNull Class&lt;V&gt; contributorId) {\n        ThreadContext threadContext = THREAD_LOCAL.get();\n        Object object = threadContext.contextRegistry.get(contributorId);\n        return  Optional.ofNullable(object);\n    }\n</code></pre>\n<p>Is the a way to avoid this compilation error or is it ok to typecast it ?</p>\n"},{"tags":["java","android","android-recyclerview","android-nestedscrollview"],"comments":[{"owner":{"account_id":5282904,"reputation":18287,"user_id":4217682,"accept_rate":50,"display_name":"snachmsm"},"score":0,"creation_date":1655898995,"post_id":72714979,"comment_id":128440263,"body_markdown":"show what you have got so far. this &quot;feature&quot; is called &quot;list section header&quot;. to be more exact &quot;`RecyclerView` header&quot; and best match would be &quot;sticky `RecyclerView` header&quot;. plenty of solutions can be found in internet, even [some official tutorials](https://developer.android.com/codelabs/kotlin-android-training-headers) for Kotlin","body":"show what you have got so far. this &quot;feature&quot; is called &quot;list section header&quot;. to be more exact &quot;<code>RecyclerView</code> header&quot; and best match would be &quot;sticky <code>RecyclerView</code> header&quot;. plenty of solutions can be found in internet, even <a href=\"https://developer.android.com/codelabs/kotlin-android-training-headers\" rel=\"nofollow noreferrer\">some official tutorials</a> for Kotlin"},{"owner":{"account_id":1324952,"reputation":5977,"user_id":1270000,"accept_rate":100,"display_name":"sorifiend"},"score":0,"creation_date":1655899052,"post_id":72714979,"comment_id":128440282,"body_markdown":"If you want to do it yourself, simply give each container/section a name variable, then simply match up the scroll location with the container on screen and grab the text variable that you stored previously. Using your favourite search engine search for things like &quot;Android get scroll location&quot; and &quot;Android get component location y value&quot; etc and you&#39;ll have your answer in no time.","body":"If you want to do it yourself, simply give each container/section a name variable, then simply match up the scroll location with the container on screen and grab the text variable that you stored previously. Using your favourite search engine search for things like &quot;Android get scroll location&quot; and &quot;Android get component location y value&quot; etc and you&#39;ll have your answer in no time."}],"answers":[{"tags":[],"owner":{"account_id":4716677,"reputation":580,"user_id":3815660,"display_name":"Yurii"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1661439605,"creation_date":1661439605,"answer_id":73489783,"question_id":72714979,"body_markdown":"This effect called &quot;Sticky Header&quot; and you can achieve it without using third party libs. \r\n[Here is tutorial][1] and [direct link to code][2]\r\n\r\n\r\n  [1]: https://medium.com/@saber.solooki/sticky-header-for-recyclerview-c0eb551c3f68\r\n[2]: https://gist.github.com/saber-solooki/edeb57be63d2a60ef551676067c66c71","title":"Text view change when user scroll","body":"<p>This effect called &quot;Sticky Header&quot; and you can achieve it without using third party libs.\n<a href=\"https://medium.com/@saber.solooki/sticky-header-for-recyclerview-c0eb551c3f68\" rel=\"nofollow noreferrer\">Here is tutorial</a> and <a href=\"https://gist.github.com/saber-solooki/edeb57be63d2a60ef551676067c66c71\" rel=\"nofollow noreferrer\">direct link to code</a></p>\n"}],"owner":{"account_id":24888590,"reputation":3,"user_id":18760876,"display_name":"Navi"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":97,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":73489783,"answer_count":1,"score":0,"last_activity_date":1661439605,"creation_date":1655898636,"question_id":72714979,"body_markdown":"[Text view changes as user scroll the screen][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/51Y6v.gif\r\n\r\nHow can i achieve something like that as shown in gif file above link...\r\nI have nested scroll view in activity and layout frame inside it, in which fragment is added..\r\nThat fragment contains multi recycler views and their title layout...I was unable to achieve this..please help","title":"Text view change when user scroll","body":"<p><a href=\"https://i.stack.imgur.com/51Y6v.gif\" rel=\"nofollow noreferrer\">Text view changes as user scroll the screen</a></p>\n<p>How can i achieve something like that as shown in gif file above link...\nI have nested scroll view in activity and layout frame inside it, in which fragment is added..\nThat fragment contains multi recycler views and their title layout...I was unable to achieve this..please help</p>\n"},{"tags":["java","swing"],"answers":[{"tags":[],"owner":{"account_id":26158954,"reputation":29,"user_id":19845821,"display_name":"null"},"down_vote_count":3,"up_vote_count":0,"is_accepted":true,"score":-3,"last_activity_date":1661437063,"creation_date":1661437063,"answer_id":73489164,"question_id":73488903,"body_markdown":"```java\r\nwindow.setLayout(null);\r\n```\r\n\r\nWindow layout wasn&#39;t null, so it must be.\r\nSolved.\r\n","title":"Why buttons getting placed two times? (Swing)","body":"<pre class=\"lang-java prettyprint-override\"><code>window.setLayout(null);\n</code></pre>\n<p>Window layout wasn't null, so it must be.\nSolved.</p>\n"},{"tags":[],"owner":{"account_id":26086726,"reputation":129,"user_id":19784153,"display_name":"ePortfel"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1661439428,"creation_date":1661439428,"answer_id":73489742,"question_id":73488903,"body_markdown":"You should not set layout to null, it will bring you problems.\r\n\r\nI know very little what you want to achive but I would suggest:\r\n```\r\n  public void placeEnginePartsButtons()\r\n  {\r\n    window.setLayout(new BoxLayout(window.getContentPane(), BoxLayout.Y_AXIS));\r\n    for (int enginePart = 0; enginePart &lt; engineParts.length; enginePart++)\r\n    {\r\n      JButton enginePartObject = engineParts[enginePart];\r\n      enginePartObject.addActionListener((event) -&gt;\r\n      {\r\n        System.out.println(enginePartObject.getText());\r\n      });\r\n      window.add(enginePartObject);\r\n    }\r\n  }\r\n```","title":"Why buttons getting placed two times? (Swing)","body":"<p>You should not set layout to null, it will bring you problems.</p>\n<p>I know very little what you want to achive but I would suggest:</p>\n<pre><code>  public void placeEnginePartsButtons()\n  {\n    window.setLayout(new BoxLayout(window.getContentPane(), BoxLayout.Y_AXIS));\n    for (int enginePart = 0; enginePart &lt; engineParts.length; enginePart++)\n    {\n      JButton enginePartObject = engineParts[enginePart];\n      enginePartObject.addActionListener((event) -&gt;\n      {\n        System.out.println(enginePartObject.getText());\n      });\n      window.add(enginePartObject);\n    }\n  }\n</code></pre>\n"}],"owner":{"account_id":26158954,"reputation":29,"user_id":19845821,"display_name":"null"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":50,"favorite_count":0,"down_vote_count":2,"up_vote_count":0,"accepted_answer_id":73489164,"answer_count":2,"score":-2,"last_activity_date":1661439428,"creation_date":1661436014,"question_id":73488903,"body_markdown":"AppUI.java\r\n\r\n```java\r\npackage Void2DEditor.EditorUI;\r\n\r\nimport javax.swing.JFrame;\r\n\r\nimport javax.swing.ImageIcon;\r\n\r\nimport javax.swing.JButton;\r\n\r\nimport java.awt.Container;\r\n\r\nimport java.io.File;\r\n\r\npublic class AppUI {\r\n    private final JFrame window;\r\n\r\n    private final Container windowContent;\r\n\r\n    private final JButton[] engineParts = {\r\n        new JButton(&quot;Square.&quot;),\r\n        new JButton(&quot;Circle.&quot;),\r\n        new JButton(&quot;Triangle.&quot;),\r\n        new JButton(&quot;Shadows.&quot;),\r\n        new JButton(&quot;Sprite.&quot;),\r\n        new JButton(&quot;Keyboard.&quot;)\r\n    };\r\n\r\n    private final int[] enginePartsButtonsPositions = {5, 5};\r\n\r\n    private final int[] enginePartsButtonsSize = {50, 50};\r\n\r\n    public AppUI() {\r\n        window = new JFrame(AppUIProperties.windowTitle);\r\n\r\n        windowContent = window.getContentPane();\r\n\r\n        window.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\r\n\r\n        window.setBounds(\r\n            AppUIProperties.windowPosition[0],\r\n            AppUIProperties.windowPosition[1],\r\n\r\n            AppUIProperties.windowSize[0],\r\n            AppUIProperties.windowSize[1]\r\n        );\r\n\r\n        window.setResizable(AppUIProperties.windowResizable);\r\n    }\r\n\r\n    public void setupCustomUIProperties() {\r\n        window.setIconImage(new ImageIcon(new File(CustomAppUIProperties.windowIcon).getAbsolutePath()).getImage());\r\n\r\n        windowContent.setBackground(CustomAppUIProperties.windowBackground);\r\n        windowContent.setForeground(CustomAppUIProperties.windowForeground);\r\n    }\r\n\r\n    public void placeEnginePartsButtons() {\r\n        for(int enginePart=0; enginePart &lt; engineParts.length; enginePart++) {\r\n            JButton enginePartObject = engineParts[enginePart];\r\n\r\n            enginePartObject.setLocation(enginePartsButtonsPositions[0], (enginePartsButtonsPositions[1] * (10 * enginePart)));\r\n            enginePartObject.setSize(enginePartsButtonsSize[0], enginePartsButtonsSize[1]);\r\n            enginePartObject.addActionListener((event) -&gt; {System.out.println(enginePartObject.getText());});\r\n\r\n            window.add(enginePartObject);\r\n        }\r\n    }\r\n\r\n    public void runAppUI() {\r\n        window.setVisible(AppUIProperties.windowVisible);\r\n    }\r\n}\r\n```\r\n\r\nEditor.java\r\n```java\r\npackage Void2DEditor;\r\n\r\nimport Void2DEditor.EditorUI.AppUI;\r\n\r\npublic class Editor {\r\n    public static void main(String[] args) {\r\n        AppUI editorUI = new AppUI();\r\n\r\n        editorUI.setupCustomUIProperties();\r\n\r\n        editorUI.placeEnginePartsButtons();\r\n\r\n        editorUI.runAppUI();\r\n    }\r\n}\r\n```\r\n\r\nResult:\r\n[result][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/cMCsZ.png\r\n\r\nWhy does it behave like this?ㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤ\r\nㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤ\r\n\r\n","title":"Why buttons getting placed two times? (Swing)","body":"<p>AppUI.java</p>\n<pre class=\"lang-java prettyprint-override\"><code>package Void2DEditor.EditorUI;\n\nimport javax.swing.JFrame;\n\nimport javax.swing.ImageIcon;\n\nimport javax.swing.JButton;\n\nimport java.awt.Container;\n\nimport java.io.File;\n\npublic class AppUI {\n    private final JFrame window;\n\n    private final Container windowContent;\n\n    private final JButton[] engineParts = {\n        new JButton(&quot;Square.&quot;),\n        new JButton(&quot;Circle.&quot;),\n        new JButton(&quot;Triangle.&quot;),\n        new JButton(&quot;Shadows.&quot;),\n        new JButton(&quot;Sprite.&quot;),\n        new JButton(&quot;Keyboard.&quot;)\n    };\n\n    private final int[] enginePartsButtonsPositions = {5, 5};\n\n    private final int[] enginePartsButtonsSize = {50, 50};\n\n    public AppUI() {\n        window = new JFrame(AppUIProperties.windowTitle);\n\n        windowContent = window.getContentPane();\n\n        window.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\n\n        window.setBounds(\n            AppUIProperties.windowPosition[0],\n            AppUIProperties.windowPosition[1],\n\n            AppUIProperties.windowSize[0],\n            AppUIProperties.windowSize[1]\n        );\n\n        window.setResizable(AppUIProperties.windowResizable);\n    }\n\n    public void setupCustomUIProperties() {\n        window.setIconImage(new ImageIcon(new File(CustomAppUIProperties.windowIcon).getAbsolutePath()).getImage());\n\n        windowContent.setBackground(CustomAppUIProperties.windowBackground);\n        windowContent.setForeground(CustomAppUIProperties.windowForeground);\n    }\n\n    public void placeEnginePartsButtons() {\n        for(int enginePart=0; enginePart &lt; engineParts.length; enginePart++) {\n            JButton enginePartObject = engineParts[enginePart];\n\n            enginePartObject.setLocation(enginePartsButtonsPositions[0], (enginePartsButtonsPositions[1] * (10 * enginePart)));\n            enginePartObject.setSize(enginePartsButtonsSize[0], enginePartsButtonsSize[1]);\n            enginePartObject.addActionListener((event) -&gt; {System.out.println(enginePartObject.getText());});\n\n            window.add(enginePartObject);\n        }\n    }\n\n    public void runAppUI() {\n        window.setVisible(AppUIProperties.windowVisible);\n    }\n}\n</code></pre>\n<p>Editor.java</p>\n<pre class=\"lang-java prettyprint-override\"><code>package Void2DEditor;\n\nimport Void2DEditor.EditorUI.AppUI;\n\npublic class Editor {\n    public static void main(String[] args) {\n        AppUI editorUI = new AppUI();\n\n        editorUI.setupCustomUIProperties();\n\n        editorUI.placeEnginePartsButtons();\n\n        editorUI.runAppUI();\n    }\n}\n</code></pre>\n<p>Result:\n<a href=\"https://i.stack.imgur.com/cMCsZ.png\" rel=\"nofollow noreferrer\">result</a></p>\n<p>Why does it behave like this?ㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤ\nㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤ</p>\n"},{"tags":["java","swing","memory","jvm"],"answers":[{"tags":[],"owner":{"account_id":1336108,"reputation":8046,"user_id":1278839,"accept_rate":69,"display_name":"CodeChimp"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1350574665,"creation_date":1350574665,"answer_id":12958389,"question_id":12958219,"body_markdown":"My guess is that the app server is doing some sort of behind-the-scenes book-keeping.  Keep in mind that, even though no one is using it, there are still threads running in the background.  Also, does your app use any type of chronological trigger framework, like Quartz?  Or, what about logging.  Even though it may not be actively sending log messages to a file, the Loggers are still getting called, which is causing all sorts of things to be created/destroyed.","title":"JVM sawtooth pattern when idle? what does the JVM do in the meantime?","body":"<p>My guess is that the app server is doing some sort of behind-the-scenes book-keeping.  Keep in mind that, even though no one is using it, there are still threads running in the background.  Also, does your app use any type of chronological trigger framework, like Quartz?  Or, what about logging.  Even though it may not be actively sending log messages to a file, the Loggers are still getting called, which is causing all sorts of things to be created/destroyed.</p>\n"},{"tags":[],"owner":{"account_id":1093477,"reputation":960,"user_id":1087574,"accept_rate":73,"display_name":"Rens Groenveld"},"down_vote_count":0,"up_vote_count":9,"is_accepted":true,"score":9,"last_activity_date":1352984616,"creation_date":1351524234,"answer_id":13124560,"question_id":12958219,"body_markdown":"It turns out that VisualVM is the guilty one. This is because VisualVM constantly asks the JVM what it&#39;s statistics are, so the JVM creates objects to give the information to VisualVM. \r\n\r\nThanks to \r\n[Peter Lawrey][1]\r\n\r\n\r\n  [1]: https://stackoverflow.com/users/57695/peter-lawrey","title":"JVM sawtooth pattern when idle? what does the JVM do in the meantime?","body":"<p>It turns out that VisualVM is the guilty one. This is because VisualVM constantly asks the JVM what it's statistics are, so the JVM creates objects to give the information to VisualVM. </p>\n\n<p>Thanks to \n<a href=\"https://stackoverflow.com/users/57695/peter-lawrey\">Peter Lawrey</a></p>\n"}],"owner":{"account_id":1093477,"reputation":960,"user_id":1087574,"accept_rate":73,"display_name":"Rens Groenveld"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1471,"favorite_count":0,"down_vote_count":1,"up_vote_count":4,"accepted_answer_id":13124560,"answer_count":2,"score":3,"last_activity_date":1661439427,"creation_date":1350574128,"question_id":12958219,"body_markdown":"I was wondering. I have a simple Java web project with a servlet. When no users are using it (I host it local on GlassFish) I still see a sawtooth pattern in the memory usage of the process. I can&#39;t seem to understand what the JVM is doing? I understand the normal flow of the memory used by JVM. The heap is getting filled with objects the application is creating. At a certain point the heap reaches a point where the garbage collector comes in, which will remove all the &#39;cached&#39; objects which no longer are used, so that new objects can be created and can be filled in the heap size.\r\n\r\nWhat I wonder is, what is the JVM doing all the time when it&#39;s idle? ![enter image description here][1]\r\n\r\n\r\n  [1]: http://i.stack.imgur.com/eRp2W.jpg\r\n\r\nEDIT: \r\n\r\nLike I said in the comments. I created a very simple Java application in Eclipse which showed a Swing window saying &#39;hello world&#39;. When I watch the memory usage of the JVM in Java VisualVM, I see the same sawtooth pattern. ","title":"JVM sawtooth pattern when idle? what does the JVM do in the meantime?","body":"<p>I was wondering. I have a simple Java web project with a servlet. When no users are using it (I host it local on GlassFish) I still see a sawtooth pattern in the memory usage of the process. I can't seem to understand what the JVM is doing? I understand the normal flow of the memory used by JVM. The heap is getting filled with objects the application is creating. At a certain point the heap reaches a point where the garbage collector comes in, which will remove all the 'cached' objects which no longer are used, so that new objects can be created and can be filled in the heap size.</p>\n\n<p>What I wonder is, what is the JVM doing all the time when it's idle? <img src=\"https://i.stack.imgur.com/eRp2W.jpg\" alt=\"enter image description here\"></p>\n\n<p>EDIT: </p>\n\n<p>Like I said in the comments. I created a very simple Java application in Eclipse which showed a Swing window saying 'hello world'. When I watch the memory usage of the JVM in Java VisualVM, I see the same sawtooth pattern. </p>\n"},{"tags":["java","html","kotlin","jsoup"],"answers":[{"tags":[],"owner":{"account_id":20334398,"reputation":94,"user_id":14915511,"display_name":"this"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1661439279,"creation_date":1661439279,"answer_id":73489704,"question_id":73489396,"body_markdown":"You can just give your `&lt;span&gt;` element an `id`:\r\n\r\n```html\r\n...\r\n&lt;tr&gt;\r\n   &lt;td style=&quot;border: none&quot;&gt;&lt;b&gt;name:&lt;/b&gt;&lt;/td&gt;\r\n   &lt;td style=&quot;border: none&quot;&gt;&lt;span id=&quot;file-name&quot; style=&quot;margin-left: 15px&quot;&gt;cb6a296b-c7ba-4228-b9f2-d6e39947814e&lt;/span&gt;&lt;/td&gt;\r\n&lt;/tr&gt;\r\n...\r\n```\r\nAnd then you can easily access the value of the field in javascript:\r\n\r\n```html\r\n&lt;script&gt;\r\n    let fileName = document.getElementById(&#39;file-name&#39;).innerHTML\r\n    ...\r\n&lt;/script&gt;\r\n```","title":"Getting text between html tags","body":"<p>You can just give your <code>&lt;span&gt;</code> element an <code>id</code>:</p>\n<pre class=\"lang-html prettyprint-override\"><code>...\n&lt;tr&gt;\n   &lt;td style=&quot;border: none&quot;&gt;&lt;b&gt;name:&lt;/b&gt;&lt;/td&gt;\n   &lt;td style=&quot;border: none&quot;&gt;&lt;span id=&quot;file-name&quot; style=&quot;margin-left: 15px&quot;&gt;cb6a296b-c7ba-4228-b9f2-d6e39947814e&lt;/span&gt;&lt;/td&gt;\n&lt;/tr&gt;\n...\n</code></pre>\n<p>And then you can easily access the value of the field in javascript:</p>\n<pre class=\"lang-html prettyprint-override\"><code>&lt;script&gt;\n    let fileName = document.getElementById('file-name').innerHTML\n    ...\n&lt;/script&gt;\n</code></pre>\n"}],"owner":{"account_id":25307198,"reputation":3,"user_id":19130534,"display_name":"Martimc"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":51,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":73489704,"answer_count":1,"score":0,"last_activity_date":1661439279,"creation_date":1661437978,"question_id":73489396,"body_markdown":"So basically I have this html and what I want is the text under the tag that has the `name:`, for example I want this `cb6a296b-c7ba-4228-b9f2-d6e39947814e`, I&#39;ve tried using soup but for some reason I always obtain a full html instead of the tags themselves. Is there any way of getting this name `cb6a296b-c7ba-4228-b9f2-d6e39947814e`?\r\n\r\n\r\nhtml:\r\n```\r\n&lt;td&gt;\r\n &lt;div&gt;\r\n  &lt;h3&gt;Id:&lt;/h3&gt;\r\n  &lt;table style=&quot;border: none&quot;&gt;\r\n   &lt;tbody&gt;\r\n    &lt;tr&gt;\r\n     &lt;td style=&quot;border: none&quot;&gt;&lt;b&gt;id:&lt;/b&gt;&lt;/td&gt;\r\n     &lt;td style=&quot;border: none&quot;&gt;&lt;span style=&quot;margin-left: 15px&quot;&gt;testuuid1&lt;/span&gt;&lt;/td&gt;\r\n    &lt;/tr&gt;\r\n    &lt;tr&gt;\r\n     &lt;td style=&quot;border: none&quot;&gt;&lt;b&gt;idtype:&lt;/b&gt;&lt;/td&gt;\r\n     &lt;td style=&quot;border: none&quot;&gt;&lt;span style=&quot;margin-left: 15px&quot;&gt;uuid&lt;/span&gt;&lt;/td&gt;\r\n    &lt;/tr&gt;\r\n    &lt;tr&gt;\r\n     &lt;td style=&quot;border: none&quot;&gt;&lt;b&gt;territory:&lt;/b&gt;&lt;/td&gt;\r\n     &lt;td style=&quot;border: none&quot;&gt;&lt;span style=&quot;margin-left: 15px&quot;&gt;GB&lt;/span&gt;&lt;/td&gt;\r\n    &lt;/tr&gt;\r\n    &lt;tr&gt;\r\n     &lt;td style=&quot;border: none&quot;&gt;&lt;b&gt;type:&lt;/b&gt;&lt;/td&gt;\r\n     &lt;td style=&quot;border: none&quot;&gt;&lt;span style=&quot;margin-left: 15px&quot;&gt;cover&lt;/span&gt;&lt;/td&gt;\r\n    &lt;/tr&gt;\r\n    &lt;tr&gt;\r\n     &lt;td style=&quot;border: none&quot;&gt;&lt;b&gt;version:&lt;/b&gt;&lt;/td&gt;\r\n     &lt;td style=&quot;border: none&quot;&gt;&lt;span style=&quot;margin-left: 15px&quot;&gt;aa3601f8-219a-43e6-be36-0aa49d2f0943&lt;/span&gt;&lt;/td&gt;\r\n    &lt;/tr&gt;\r\n   &lt;/tbody&gt;\r\n  &lt;/table&gt;\r\n &lt;/div&gt;\r\n &lt;div&gt;\r\n  &lt;h3&gt;File:&lt;/h3&gt;\r\n  &lt;table style=&quot;border: none&quot;&gt;\r\n   &lt;tbody&gt;\r\n    &lt;tr&gt;\r\n     &lt;td style=&quot;border: none&quot;&gt;&lt;b&gt;extension:&lt;/b&gt;&lt;/td&gt;\r\n     &lt;td style=&quot;border: none&quot;&gt;&lt;span style=&quot;margin-left: 15px&quot;&gt;jpg&lt;/span&gt;&lt;/td&gt;\r\n    &lt;/tr&gt;\r\n    &lt;tr&gt;\r\n     &lt;td style=&quot;border: none&quot;&gt;&lt;b&gt;md5Checksum:&lt;/b&gt;&lt;/td&gt;\r\n     &lt;td style=&quot;border: none&quot;&gt;&lt;span style=&quot;margin-left: 15px&quot;&gt;f5e1725f067a697805f4af28bef55720&lt;/span&gt;&lt;/td&gt;\r\n    &lt;/tr&gt;\r\n    &lt;tr&gt;\r\n     &lt;td style=&quot;border: none&quot;&gt;&lt;b&gt;mimeType:&lt;/b&gt;&lt;/td&gt;\r\n     &lt;td style=&quot;border: none&quot;&gt;&lt;span style=&quot;margin-left: 15px&quot;&gt;image/jpeg&lt;/span&gt;&lt;/td&gt;\r\n    &lt;/tr&gt;\r\n    &lt;tr&gt;\r\n     &lt;td style=&quot;border: none&quot;&gt;&lt;b&gt;name:&lt;/b&gt;&lt;/td&gt;\r\n     &lt;td style=&quot;border: none&quot;&gt;&lt;span style=&quot;margin-left: 15px&quot;&gt;cb6a296b-c7ba-4228-b9f2-d6e39947814e&lt;/span&gt;&lt;/td&gt;\r\n    &lt;/tr&gt;\r\n    &lt;tr&gt;\r\n     &lt;td style=&quot;border: none&quot;&gt;&lt;b&gt;path:&lt;/b&gt;&lt;/td&gt;\r\n     &lt;td style=&quot;border: none&quot;&gt;&lt;span style=&quot;margin-left: 15px&quot;&gt;&lt;/span&gt;&lt;/td&gt;\r\n    &lt;/tr&gt;\r\n   &lt;/tbody&gt;\r\n  &lt;/table&gt;\r\n &lt;/div&gt;\r\n &lt;div&gt;\r\n  &lt;h3&gt;FileInfo:&lt;/h3&gt;\r\n  &lt;table style=&quot;border: none&quot;&gt;\r\n   &lt;tbody&gt;\r\n    &lt;tr&gt;\r\n     &lt;td style=&quot;border: none&quot;&gt;&lt;b&gt;created:&lt;/b&gt;&lt;/td&gt;\r\n     &lt;td style=&quot;border: none&quot;&gt;&lt;span style=&quot;margin-left: 15px&quot;&gt;2022-08-09T17:05:12Z&lt;/span&gt;&lt;/td&gt;\r\n    &lt;/tr&gt;\r\n    &lt;tr&gt;\r\n     &lt;td style=&quot;border: none&quot;&gt;&lt;b&gt;createdBy:&lt;/b&gt;&lt;/td&gt;\r\n     &lt;td style=&quot;border: none&quot;&gt;&lt;span style=&quot;margin-left: 15px&quot;&gt;admin&lt;/span&gt;&lt;/td&gt;\r\n    &lt;/tr&gt;\r\n    &lt;tr&gt;\r\n     &lt;td style=&quot;border: none&quot;&gt;&lt;b&gt;expires:&lt;/b&gt;&lt;/td&gt;\r\n     &lt;td style=&quot;border: none&quot;&gt;&lt;span style=&quot;margin-left: 15px&quot;&gt;2032-06-26T23:30:00Z&lt;/span&gt;&lt;/td&gt;\r\n    &lt;/tr&gt;\r\n    &lt;tr&gt;\r\n     &lt;td style=&quot;border: none&quot;&gt;&lt;b&gt;updated:&lt;/b&gt;&lt;/td&gt;\r\n     &lt;td style=&quot;border: none&quot;&gt;&lt;span style=&quot;margin-left: 15px&quot;&gt;2022-08-09T17:05:14Z&lt;/span&gt;&lt;/td&gt;\r\n    &lt;/tr&gt;\r\n    &lt;tr&gt;\r\n     &lt;td style=&quot;border: none&quot;&gt;&lt;b&gt;updatedBy:&lt;/b&gt;&lt;/td&gt;\r\n     &lt;td style=&quot;border: none&quot;&gt;&lt;span style=&quot;margin-left: 15px&quot;&gt;admin&lt;/span&gt;&lt;/td&gt;\r\n    &lt;/tr&gt;\r\n   &lt;/tbody&gt;\r\n  &lt;/table&gt;\r\n &lt;/div&gt;&lt;/td&gt;\r\n```\r\n\r\nProgram:\r\n```\r\n val document: Document = Jsoup.parse(requestBody[0])\r\n val element = document.select(&quot;td:contains(name:)&quot;).get(0)\r\n```","title":"Getting text between html tags","body":"<p>So basically I have this html and what I want is the text under the tag that has the <code>name:</code>, for example I want this <code>cb6a296b-c7ba-4228-b9f2-d6e39947814e</code>, I've tried using soup but for some reason I always obtain a full html instead of the tags themselves. Is there any way of getting this name <code>cb6a296b-c7ba-4228-b9f2-d6e39947814e</code>?</p>\n<p>html:</p>\n<pre><code>&lt;td&gt;\n &lt;div&gt;\n  &lt;h3&gt;Id:&lt;/h3&gt;\n  &lt;table style=&quot;border: none&quot;&gt;\n   &lt;tbody&gt;\n    &lt;tr&gt;\n     &lt;td style=&quot;border: none&quot;&gt;&lt;b&gt;id:&lt;/b&gt;&lt;/td&gt;\n     &lt;td style=&quot;border: none&quot;&gt;&lt;span style=&quot;margin-left: 15px&quot;&gt;testuuid1&lt;/span&gt;&lt;/td&gt;\n    &lt;/tr&gt;\n    &lt;tr&gt;\n     &lt;td style=&quot;border: none&quot;&gt;&lt;b&gt;idtype:&lt;/b&gt;&lt;/td&gt;\n     &lt;td style=&quot;border: none&quot;&gt;&lt;span style=&quot;margin-left: 15px&quot;&gt;uuid&lt;/span&gt;&lt;/td&gt;\n    &lt;/tr&gt;\n    &lt;tr&gt;\n     &lt;td style=&quot;border: none&quot;&gt;&lt;b&gt;territory:&lt;/b&gt;&lt;/td&gt;\n     &lt;td style=&quot;border: none&quot;&gt;&lt;span style=&quot;margin-left: 15px&quot;&gt;GB&lt;/span&gt;&lt;/td&gt;\n    &lt;/tr&gt;\n    &lt;tr&gt;\n     &lt;td style=&quot;border: none&quot;&gt;&lt;b&gt;type:&lt;/b&gt;&lt;/td&gt;\n     &lt;td style=&quot;border: none&quot;&gt;&lt;span style=&quot;margin-left: 15px&quot;&gt;cover&lt;/span&gt;&lt;/td&gt;\n    &lt;/tr&gt;\n    &lt;tr&gt;\n     &lt;td style=&quot;border: none&quot;&gt;&lt;b&gt;version:&lt;/b&gt;&lt;/td&gt;\n     &lt;td style=&quot;border: none&quot;&gt;&lt;span style=&quot;margin-left: 15px&quot;&gt;aa3601f8-219a-43e6-be36-0aa49d2f0943&lt;/span&gt;&lt;/td&gt;\n    &lt;/tr&gt;\n   &lt;/tbody&gt;\n  &lt;/table&gt;\n &lt;/div&gt;\n &lt;div&gt;\n  &lt;h3&gt;File:&lt;/h3&gt;\n  &lt;table style=&quot;border: none&quot;&gt;\n   &lt;tbody&gt;\n    &lt;tr&gt;\n     &lt;td style=&quot;border: none&quot;&gt;&lt;b&gt;extension:&lt;/b&gt;&lt;/td&gt;\n     &lt;td style=&quot;border: none&quot;&gt;&lt;span style=&quot;margin-left: 15px&quot;&gt;jpg&lt;/span&gt;&lt;/td&gt;\n    &lt;/tr&gt;\n    &lt;tr&gt;\n     &lt;td style=&quot;border: none&quot;&gt;&lt;b&gt;md5Checksum:&lt;/b&gt;&lt;/td&gt;\n     &lt;td style=&quot;border: none&quot;&gt;&lt;span style=&quot;margin-left: 15px&quot;&gt;f5e1725f067a697805f4af28bef55720&lt;/span&gt;&lt;/td&gt;\n    &lt;/tr&gt;\n    &lt;tr&gt;\n     &lt;td style=&quot;border: none&quot;&gt;&lt;b&gt;mimeType:&lt;/b&gt;&lt;/td&gt;\n     &lt;td style=&quot;border: none&quot;&gt;&lt;span style=&quot;margin-left: 15px&quot;&gt;image/jpeg&lt;/span&gt;&lt;/td&gt;\n    &lt;/tr&gt;\n    &lt;tr&gt;\n     &lt;td style=&quot;border: none&quot;&gt;&lt;b&gt;name:&lt;/b&gt;&lt;/td&gt;\n     &lt;td style=&quot;border: none&quot;&gt;&lt;span style=&quot;margin-left: 15px&quot;&gt;cb6a296b-c7ba-4228-b9f2-d6e39947814e&lt;/span&gt;&lt;/td&gt;\n    &lt;/tr&gt;\n    &lt;tr&gt;\n     &lt;td style=&quot;border: none&quot;&gt;&lt;b&gt;path:&lt;/b&gt;&lt;/td&gt;\n     &lt;td style=&quot;border: none&quot;&gt;&lt;span style=&quot;margin-left: 15px&quot;&gt;&lt;/span&gt;&lt;/td&gt;\n    &lt;/tr&gt;\n   &lt;/tbody&gt;\n  &lt;/table&gt;\n &lt;/div&gt;\n &lt;div&gt;\n  &lt;h3&gt;FileInfo:&lt;/h3&gt;\n  &lt;table style=&quot;border: none&quot;&gt;\n   &lt;tbody&gt;\n    &lt;tr&gt;\n     &lt;td style=&quot;border: none&quot;&gt;&lt;b&gt;created:&lt;/b&gt;&lt;/td&gt;\n     &lt;td style=&quot;border: none&quot;&gt;&lt;span style=&quot;margin-left: 15px&quot;&gt;2022-08-09T17:05:12Z&lt;/span&gt;&lt;/td&gt;\n    &lt;/tr&gt;\n    &lt;tr&gt;\n     &lt;td style=&quot;border: none&quot;&gt;&lt;b&gt;createdBy:&lt;/b&gt;&lt;/td&gt;\n     &lt;td style=&quot;border: none&quot;&gt;&lt;span style=&quot;margin-left: 15px&quot;&gt;admin&lt;/span&gt;&lt;/td&gt;\n    &lt;/tr&gt;\n    &lt;tr&gt;\n     &lt;td style=&quot;border: none&quot;&gt;&lt;b&gt;expires:&lt;/b&gt;&lt;/td&gt;\n     &lt;td style=&quot;border: none&quot;&gt;&lt;span style=&quot;margin-left: 15px&quot;&gt;2032-06-26T23:30:00Z&lt;/span&gt;&lt;/td&gt;\n    &lt;/tr&gt;\n    &lt;tr&gt;\n     &lt;td style=&quot;border: none&quot;&gt;&lt;b&gt;updated:&lt;/b&gt;&lt;/td&gt;\n     &lt;td style=&quot;border: none&quot;&gt;&lt;span style=&quot;margin-left: 15px&quot;&gt;2022-08-09T17:05:14Z&lt;/span&gt;&lt;/td&gt;\n    &lt;/tr&gt;\n    &lt;tr&gt;\n     &lt;td style=&quot;border: none&quot;&gt;&lt;b&gt;updatedBy:&lt;/b&gt;&lt;/td&gt;\n     &lt;td style=&quot;border: none&quot;&gt;&lt;span style=&quot;margin-left: 15px&quot;&gt;admin&lt;/span&gt;&lt;/td&gt;\n    &lt;/tr&gt;\n   &lt;/tbody&gt;\n  &lt;/table&gt;\n &lt;/div&gt;&lt;/td&gt;\n</code></pre>\n<p>Program:</p>\n<pre><code> val document: Document = Jsoup.parse(requestBody[0])\n val element = document.select(&quot;td:contains(name:)&quot;).get(0)\n</code></pre>\n"},{"tags":["java","lwjgl"],"owner":{"account_id":23800879,"reputation":21,"user_id":17811099,"display_name":"Bricky_Stix22"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":55,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1661439008,"creation_date":1661407495,"question_id":73482615,"body_markdown":"I have been coding in LWJGL 2 for a while, mostly in Windows 10.  Intersecting polygons looked fine on any Windows 10 computer I loaded the engine on.  Then when uploading the program to Intellij on a Windows 11 computer, the program broke.  When really close to the intersecting polygons, everything looks fine:[![Polygon intersections in close proximity][1]][1]\r\n\r\n\r\nBut when at a distance, the jagged edges begin appearing:\r\n[![Polygon intersections at a distance][2]][2]\r\n\r\nI have tried loading it on any other computer, and it works just fine (as long as it&#39;s pre-windows 11).  I&#39;ve made sure that all the code is identical.  I&#39;ve tested different JDK versions, Intellij versions, and Java versions, and they all don&#39;t seem to have any bearing on this issue in particular.  The only real thing in the code in relation to both distance and detail was mipmapping, but removing it does not affect the issue in any way either.  Any assistance would be appreciated.\r\n\r\n  [1]: https://i.stack.imgur.com/4BOAj.png\r\n  [2]: https://i.stack.imgur.com/ok8E8.png","title":"I loaded my LWJGL game engine onto a Windows 11 computer, and the collisions of polygons started getting really jagged","body":"<p>I have been coding in LWJGL 2 for a while, mostly in Windows 10.  Intersecting polygons looked fine on any Windows 10 computer I loaded the engine on.  Then when uploading the program to Intellij on a Windows 11 computer, the program broke.  When really close to the intersecting polygons, everything looks fine:<a href=\"https://i.stack.imgur.com/4BOAj.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/4BOAj.png\" alt=\"Polygon intersections in close proximity\" /></a></p>\n<p>But when at a distance, the jagged edges begin appearing:\n<a href=\"https://i.stack.imgur.com/ok8E8.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ok8E8.png\" alt=\"Polygon intersections at a distance\" /></a></p>\n<p>I have tried loading it on any other computer, and it works just fine (as long as it's pre-windows 11).  I've made sure that all the code is identical.  I've tested different JDK versions, Intellij versions, and Java versions, and they all don't seem to have any bearing on this issue in particular.  The only real thing in the code in relation to both distance and detail was mipmapping, but removing it does not affect the issue in any way either.  Any assistance would be appreciated.</p>\n"},{"tags":["java","postgresql","stored-procedures","jdbc","java-stored-procedures"],"comments":[{"owner":{"account_id":480617,"reputation":2495,"user_id":893952,"accept_rate":57,"display_name":"Harry Coder"},"score":1,"creation_date":1538692859,"post_id":52655789,"comment_id":92243362,"body_markdown":"Post the details of your error message.","body":"Post the details of your error message."},{"owner":{"account_id":480359,"reputation":393,"user_id":893557,"display_name":"jkratz"},"score":0,"creation_date":1539442362,"post_id":52655789,"comment_id":92508467,"body_markdown":"The second call isn&#39;t going to work because you&#39;re not using a ref_cursor in your function (and to be picky, you&#39;re not calling a stored procedure, you&#39;re calling a function. stored procs are new in pgsql 11 and don&#39;t return anything).","body":"The second call isn&#39;t going to work because you&#39;re not using a ref_cursor in your function (and to be picky, you&#39;re not calling a stored procedure, you&#39;re calling a function. stored procs are new in pgsql 11 and don&#39;t return anything)."}],"answers":[{"tags":[],"owner":{"account_id":13977421,"reputation":89,"user_id":10094486,"display_name":"Renan Ribeiro"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1538704741,"creation_date":1538704741,"answer_id":52657327,"question_id":52655789,"body_markdown":"You can try using CallableStatement. \r\nAssuming that your Connection var is OK:\r\n\r\n    CallableStatement stmt = con.prepareCall(&quot;{call SCHEMA.PROCEDURE_NAME (?, ?)}&quot;);\r\n    stmt.setInt(1, custom_var);\r\n    stmt.registerOutParameter(2, OracleTypes.INTEGER);\r\n    stmt.execute();\r\n\r\nTo get result: `stmt.getInt(3); stmt.getString(4)`\r\n\r\nIf you can&#39;t succeed try using JdbcTemplate:\r\n\r\n    SimpleJdbcCall call = new SimpleJdbcCall(this.jdbcTemplate).withSchemaName(SCHEMA).withProcedureName(PROC);\r\n    MapSqlParameterSource params = new MapSqlParameterSource();\r\n    params.addValue(&quot;ipUserId&quot;, custom_var);\r\n    Map out = call.execute(params);\r\n\r\nTo get single result: `Integer.parseInt(&quot;&quot; + out.get(&quot;OUT_PARAM_NAME&quot;)); (String) out.get(&quot;OUT_PARAM_NAME2&quot;));`\r\n\r\nOr you can save all the result in a list to work on it later:\r\n\r\n    SimpleJdbcCall call = new SimpleJdbcCall(this.jdbcTemplate);\r\n    List&lt;Map&lt;String, Object&gt;&gt; rows = call.getJdbcTemplate().queryForList(PROC_STRING, new Object[] { param1, param2 });","title":"Postgres stored procedure call from java, table to return","body":"<p>You can try using CallableStatement. \nAssuming that your Connection var is OK:</p>\n\n<pre><code>CallableStatement stmt = con.prepareCall(\"{call SCHEMA.PROCEDURE_NAME (?, ?)}\");\nstmt.setInt(1, custom_var);\nstmt.registerOutParameter(2, OracleTypes.INTEGER);\nstmt.execute();\n</code></pre>\n\n<p>To get result: <code>stmt.getInt(3); stmt.getString(4)</code></p>\n\n<p>If you can't succeed try using JdbcTemplate:</p>\n\n<pre><code>SimpleJdbcCall call = new SimpleJdbcCall(this.jdbcTemplate).withSchemaName(SCHEMA).withProcedureName(PROC);\nMapSqlParameterSource params = new MapSqlParameterSource();\nparams.addValue(\"ipUserId\", custom_var);\nMap out = call.execute(params);\n</code></pre>\n\n<p>To get single result: <code>Integer.parseInt(\"\" + out.get(\"OUT_PARAM_NAME\")); (String) out.get(\"OUT_PARAM_NAME2\"));</code></p>\n\n<p>Or you can save all the result in a list to work on it later:</p>\n\n<pre><code>SimpleJdbcCall call = new SimpleJdbcCall(this.jdbcTemplate);\nList&lt;Map&lt;String, Object&gt;&gt; rows = call.getJdbcTemplate().queryForList(PROC_STRING, new Object[] { param1, param2 });\n</code></pre>\n"},{"tags":[],"owner":{"account_id":13634912,"reputation":90,"user_id":9836179,"display_name":"Bogdan"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1538741249,"creation_date":1538741249,"answer_id":52665303,"question_id":52655789,"body_markdown":"I found a much simple solution, just make a SQL Query to call the procedure with hibernate.\r\n\r\n        String SqlString = &quot;select * from GetUser({0})&quot;;\r\n\r\n        if (ipIdUser == null )\r\n            SqlString = MessageFormat.format(SqlString, &quot;NULL&quot;);\r\n        else\r\n            SqlString = MessageFormat.format(SqlString, ipIdUser);\r\n\r\n        LOGGER.info(&quot;SqlSting =&quot; + SqlString);\r\n\r\n        return entityManager.createNativeQuery(SqlString, User.class)\r\n                .getResultList();\r\n","title":"Postgres stored procedure call from java, table to return","body":"<p>I found a much simple solution, just make a SQL Query to call the procedure with hibernate.</p>\n\n<pre><code>    String SqlString = \"select * from GetUser({0})\";\n\n    if (ipIdUser == null )\n        SqlString = MessageFormat.format(SqlString, \"NULL\");\n    else\n        SqlString = MessageFormat.format(SqlString, ipIdUser);\n\n    LOGGER.info(\"SqlSting =\" + SqlString);\n\n    return entityManager.createNativeQuery(SqlString, User.class)\n            .getResultList();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5023043,"reputation":635,"user_id":4035939,"display_name":"chvndb"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1542193241,"creation_date":1542193241,"answer_id":53298652,"question_id":52655789,"body_markdown":"Why not use `getResultList` on `StoredProcedureQuery`? This avoids having to do the string manipulation.\r\n\r\n \r\n\r\n    List&lt;User&gt; users = entityManager.createStoredProcedureQuery(&quot;GetUser&quot;)\r\n      .registerStoredProcedureParameter(&quot;ipUserId&quot;, Integer.class, ParameterMode.IN)\r\n      .setParameter(&quot;ipUserId&quot;, ipIdUser)\r\n      .getResultList();","title":"Postgres stored procedure call from java, table to return","body":"<p>Why not use <code>getResultList</code> on <code>StoredProcedureQuery</code>? This avoids having to do the string manipulation.</p>\n\n<pre><code>List&lt;User&gt; users = entityManager.createStoredProcedureQuery(\"GetUser\")\n  .registerStoredProcedureParameter(\"ipUserId\", Integer.class, ParameterMode.IN)\n  .setParameter(\"ipUserId\", ipIdUser)\n  .getResultList();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":247217,"reputation":213455,"user_id":521799,"accept_rate":89,"display_name":"Lukas Eder"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1661438703,"creation_date":1661438703,"answer_id":73489574,"question_id":52655789,"body_markdown":"In your case, you have a table valued function that happens to map to an actual table, so the [approach using the JPA native query][2] is elegant too, but perhaps your projection is something different, or you return multiple nested data structures, arrays, etc, where working with JPA might be tricky.\r\n\r\n[jOOQ generates code for all of your procedures, including table valued functions][3]. For example, you&#39;ll have a `Routines` class containing a `getUser` method, which you can query like this:\r\n\r\n```java\r\nResult&lt;GetUser&gt; result = Routines.getUser(configuration, 1);\r\n```\r\n\r\nYou can also use the table valued function as an actual table in the query, like this:\r\n\r\n```java\r\nResult&lt;GetUser&gt; result = ctx.selectFrom(GETUSER(1)).fetch();\r\n```\r\n\r\nDisclaimer: I work for the company behind jOOQ.\r\n\r\n\r\n  [1]: https://blog.jooq.org/the-best-way-to-call-stored-procedures-from-java-with-jooq/\r\n  [2]: https://stackoverflow.com/a/52665303/521799\r\n  [3]: https://blog.jooq.org/postgresqls-table-valued-functions/","title":"Postgres stored procedure call from java, table to return","body":"<p>In your case, you have a table valued function that happens to map to an actual table, so the <a href=\"https://stackoverflow.com/a/52665303/521799\">approach using the JPA native query</a> is elegant too, but perhaps your projection is something different, or you return multiple nested data structures, arrays, etc, where working with JPA might be tricky.</p>\n<p><a href=\"https://blog.jooq.org/postgresqls-table-valued-functions/\" rel=\"nofollow noreferrer\">jOOQ generates code for all of your procedures, including table valued functions</a>. For example, you'll have a <code>Routines</code> class containing a <code>getUser</code> method, which you can query like this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>Result&lt;GetUser&gt; result = Routines.getUser(configuration, 1);\n</code></pre>\n<p>You can also use the table valued function as an actual table in the query, like this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>Result&lt;GetUser&gt; result = ctx.selectFrom(GETUSER(1)).fetch();\n</code></pre>\n<p>Disclaimer: I work for the company behind jOOQ.</p>\n"}],"owner":{"account_id":13634912,"reputation":90,"user_id":9836179,"display_name":"Bogdan"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3463,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":52665303,"answer_count":4,"score":2,"last_activity_date":1661438703,"creation_date":1538690525,"question_id":52655789,"body_markdown":"I made a Postgres stored procedure:\r\n\r\n    CREATE OR REPLACE FUNCTION GetUser(ipUserId integer)\r\n    RETURNS setof users AS $$\r\n    BEGIN\r\n      IF ipUserId is null THEN\r\n        return query select * from users A order by modifieddate desc;\r\n      END IF;\r\n      return query select * from users where iduser = ipUserId;\r\n    END;\r\n    $$ LANGUAGE plpgsql;\r\n\r\nI tried to use it in java like this: \r\n\r\n        StoredProcedureQuery query = entityManager.createStoredProcedureQuery(&quot;GetUser&quot;).\r\n                registerStoredProcedureParameter(&quot;ipUserId&quot;,\r\n                        Integer.class, ParameterMode.IN)\r\n                .registerStoredProcedureParameter(&quot;users&quot;,\r\n                        List.class, ParameterMode.OUT)\r\n                .setParameter(&quot;postId&quot;, 1);\r\n\r\nor \r\n\r\n       \r\n\r\n     StoredProcedureQuery query = entityManager.createStoredProcedureQuery(&quot;GetUser&quot;)\r\n                    .registerStoredProcedureParameter(1,void.class, ParameterMode.REF_CURSOR)\r\n                    .registerStoredProcedureParameter(2,Integer.class, ParameterMode.IN)\r\n                    .setParameter(2, ipIdUser);\r\n\r\n\r\n**I want to store the result in a List&lt;user&gt;.**\r\n\r\nWhat and how should i do, because i&#39;m getting all kind of errors?\r\n\r\nUpdate :\r\n\r\n\r\n\r\nThose are the errors : \r\n\r\n    javax.persistence.PersistenceException: org.hibernate.exception.SQLGrammarException: Error calling CallableStatement.getMoreResults\r\n    Caused by: org.hibernate.exception.SQLGrammarException: Error calling CallableStatement.getMoreResults\r\n    \tat org.hibernate.exception.internal.SQLStateConversionDelegate.convert(SQLStateConversionDelegate.java:106)\r\n    \tat org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:42)\r\n    \tat org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:111)\r\n    \tat org.hibernate.result.internal.OutputsImpl.convert(OutputsImpl.java:79)\r\n    \tat org.hibernate.result.internal.OutputsImpl.&lt;init&gt;(OutputsImpl.java:56)\r\n    \tat org.hibernate.procedure.internal.ProcedureOutputsImpl.&lt;init&gt;(ProcedureOutputsImpl.java:34)\r\n    \tat org.hibernate.procedure.internal.ProcedureCallImpl.buildOutputs(ProcedureCallImpl.java:453)\r\n    \tat org.hibernate.procedure.internal.ProcedureCallImpl.getOutputs(ProcedureCallImpl.java:404)\r\n    \tat org.hibernate.procedure.internal.ProcedureCallImpl.outputs(ProcedureCallImpl.java:663)\r\n    \tat org.hibernate.procedure.internal.ProcedureCallImpl.getResultList(ProcedureCallImpl.java:751)\r\n    \t... 21 more\r\n    Caused by: org.postgresql.util.PSQLException: A CallableStatement was executed with an invalid number of parameters\r\n","title":"Postgres stored procedure call from java, table to return","body":"<p>I made a Postgres stored procedure:</p>\n\n<pre><code>CREATE OR REPLACE FUNCTION GetUser(ipUserId integer)\nRETURNS setof users AS $$\nBEGIN\n  IF ipUserId is null THEN\n    return query select * from users A order by modifieddate desc;\n  END IF;\n  return query select * from users where iduser = ipUserId;\nEND;\n$$ LANGUAGE plpgsql;\n</code></pre>\n\n<p>I tried to use it in java like this: </p>\n\n<pre><code>    StoredProcedureQuery query = entityManager.createStoredProcedureQuery(\"GetUser\").\n            registerStoredProcedureParameter(\"ipUserId\",\n                    Integer.class, ParameterMode.IN)\n            .registerStoredProcedureParameter(\"users\",\n                    List.class, ParameterMode.OUT)\n            .setParameter(\"postId\", 1);\n</code></pre>\n\n<p>or </p>\n\n<pre><code> StoredProcedureQuery query = entityManager.createStoredProcedureQuery(\"GetUser\")\n                .registerStoredProcedureParameter(1,void.class, ParameterMode.REF_CURSOR)\n                .registerStoredProcedureParameter(2,Integer.class, ParameterMode.IN)\n                .setParameter(2, ipIdUser);\n</code></pre>\n\n<p><strong>I want to store the result in a List.</strong></p>\n\n<p>What and how should i do, because i'm getting all kind of errors?</p>\n\n<p>Update :</p>\n\n<p>Those are the errors : </p>\n\n<pre><code>javax.persistence.PersistenceException: org.hibernate.exception.SQLGrammarException: Error calling CallableStatement.getMoreResults\nCaused by: org.hibernate.exception.SQLGrammarException: Error calling CallableStatement.getMoreResults\n    at org.hibernate.exception.internal.SQLStateConversionDelegate.convert(SQLStateConversionDelegate.java:106)\n    at org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:42)\n    at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:111)\n    at org.hibernate.result.internal.OutputsImpl.convert(OutputsImpl.java:79)\n    at org.hibernate.result.internal.OutputsImpl.&lt;init&gt;(OutputsImpl.java:56)\n    at org.hibernate.procedure.internal.ProcedureOutputsImpl.&lt;init&gt;(ProcedureOutputsImpl.java:34)\n    at org.hibernate.procedure.internal.ProcedureCallImpl.buildOutputs(ProcedureCallImpl.java:453)\n    at org.hibernate.procedure.internal.ProcedureCallImpl.getOutputs(ProcedureCallImpl.java:404)\n    at org.hibernate.procedure.internal.ProcedureCallImpl.outputs(ProcedureCallImpl.java:663)\n    at org.hibernate.procedure.internal.ProcedureCallImpl.getResultList(ProcedureCallImpl.java:751)\n    ... 21 more\nCaused by: org.postgresql.util.PSQLException: A CallableStatement was executed with an invalid number of parameters\n</code></pre>\n"},{"tags":["java","android","android-studio","storage","android-external-storage"],"comments":[{"owner":{"account_id":9172301,"reputation":4168,"user_id":6819340,"accept_rate":39,"display_name":"darshan"},"score":0,"creation_date":1661416278,"post_id":73484289,"comment_id":129768558,"body_markdown":"You can use `SAF` to ask for the `Documents` folder read/write permissions &amp; save/persist the returned `Uri` &amp; use `DocumentFile` api to perform actions in that directory.","body":"You can use <code>SAF</code> to ask for the <code>Documents</code> folder read/write permissions &amp; save/persist the returned <code>Uri</code> &amp; use <code>DocumentFile</code> api to perform actions in that directory."},{"owner":{"account_id":5319788,"reputation":31,"user_id":4243574,"display_name":"Robert Angermayr"},"score":0,"creation_date":1661417216,"post_id":73484289,"comment_id":129768963,"body_markdown":"But isn&#39;t it mandatory to use a picker to access the files when i use the SAF?\nMy App doesn&#39;t use a picker to select the files.","body":"But isn&#39;t it mandatory to use a picker to access the files when i use the SAF? My App doesn&#39;t use a picker to select the files."},{"owner":{"account_id":9172301,"reputation":4168,"user_id":6819340,"accept_rate":39,"display_name":"darshan"},"score":0,"creation_date":1661417727,"post_id":73484289,"comment_id":129769155,"body_markdown":"You can use the system built-in picker provided via `SAF` &amp; relevant `Intent` flags.","body":"You can use the system built-in picker provided via <code>SAF</code> &amp; relevant <code>Intent</code> flags."},{"owner":{"account_id":5319788,"reputation":31,"user_id":4243574,"display_name":"Robert Angermayr"},"score":0,"creation_date":1661418154,"post_id":73484289,"comment_id":129769322,"body_markdown":"The App isn&#39;t using a picker, and should not use a picker, that is the problem.","body":"The App isn&#39;t using a picker, and should not use a picker, that is the problem."},{"owner":{"account_id":9172301,"reputation":4168,"user_id":6819340,"accept_rate":39,"display_name":"darshan"},"score":0,"creation_date":1661418524,"post_id":73484289,"comment_id":129769456,"body_markdown":"Without using a picker to select a directory, it is not possible. However you can directly open the `Documents` directory for permission without having the user to &#39;navigate&#39; to the directory to directory selection.","body":"Without using a picker to select a directory, it is not possible. However you can directly open the <code>Documents</code> directory for permission without having the user to &#39;navigate&#39; to the directory to directory selection."},{"owner":{"account_id":5319788,"reputation":31,"user_id":4243574,"display_name":"Robert Angermayr"},"score":0,"creation_date":1661419542,"post_id":73484289,"comment_id":129769840,"body_markdown":"So, there is absolute no way to use the external storage without a picker?\nWhen i use a browser or email and i download a file it is automatically stored in Downloads or documents folder without any anoying picker. How do this apps work?","body":"So, there is absolute no way to use the external storage without a picker? When i use a browser or email and i download a file it is automatically stored in Downloads or documents folder without any anoying picker. How do this apps work?"},{"owner":{"account_id":9172301,"reputation":4168,"user_id":6819340,"accept_rate":39,"display_name":"darshan"},"score":0,"creation_date":1661435082,"post_id":73484289,"comment_id":129775817,"body_markdown":"You could use the barebones Downloads / Documents folder afaik to write files, but cannot create app specific folders in them or external storage.","body":"You could use the barebones Downloads / Documents folder afaik to write files, but cannot create app specific folders in them or external storage."}],"answers":[{"tags":[],"owner":{"account_id":16768304,"reputation":8503,"user_id":12121419,"display_name":"blackapps"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1661438651,"creation_date":1661438651,"answer_id":73489560,"question_id":73484289,"body_markdown":"Every app can just create its own folder in the public Documents directory. And then create files in them. No saf needed.\r\n\r\nThe user can also with other means place files in your apps folder.\r\n\r\nIf your app wants to use those files you should use SAF OPEN_DOCUMENT_TREE to let the user pick your folder. Upon which your app can list all the files in that folder.","title":"Android 13 create a app specific folder in External Storage","body":"<p>Every app can just create its own folder in the public Documents directory. And then create files in them. No saf needed.</p>\n<p>The user can also with other means place files in your apps folder.</p>\n<p>If your app wants to use those files you should use SAF OPEN_DOCUMENT_TREE to let the user pick your folder. Upon which your app can list all the files in that folder.</p>\n"}],"owner":{"account_id":5319788,"reputation":31,"user_id":4243574,"display_name":"Robert Angermayr"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":2419,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1661438651,"creation_date":1661416148,"question_id":73484289,"body_markdown":"i need a app specific folder to store files (binary and text files) that my app is downloading from the internet and xml files that will be created by the app. \r\nAs it is neccessary to allow the user to copy files manually to this folder, i.e files that he recieves and exchanges via email or messenger, i cannot use the internal storage.\r\nThe app needs full access to the folder.\r\nIn the past i had a folder &quot;MyApp&quot; at the root path of the external storage. \r\nI need a suggestion where and how to put the folder now, as it is not longer advisable to use the root path for a folder.\r\n\r\nSo what is the correct way to create a folder in the &quot;Documents&quot; folder of the device.\r\nI don&#39;t need the full code for it but to mention special functions or methods that i schould use would be appreciated.","title":"Android 13 create a app specific folder in External Storage","body":"<p>i need a app specific folder to store files (binary and text files) that my app is downloading from the internet and xml files that will be created by the app.\nAs it is neccessary to allow the user to copy files manually to this folder, i.e files that he recieves and exchanges via email or messenger, i cannot use the internal storage.\nThe app needs full access to the folder.\nIn the past i had a folder &quot;MyApp&quot; at the root path of the external storage.\nI need a suggestion where and how to put the folder now, as it is not longer advisable to use the root path for a folder.</p>\n<p>So what is the correct way to create a folder in the &quot;Documents&quot; folder of the device.\nI don't need the full code for it but to mention special functions or methods that i schould use would be appreciated.</p>\n"},{"tags":["java","sql","mariadb","explain"],"comments":[{"owner":{"account_id":1384034,"reputation":16297,"user_id":1316440,"display_name":"wchiquito"},"score":0,"creation_date":1661450597,"post_id":73489451,"comment_id":129781993,"body_markdown":"Use [MariaDB :: EXPLAIN](https://mariadb.com/kb/en/explain/): `... When you precede a SELECT, UPDATE or a DELETE statement with the keyword EXPLAIN, MariaDB displays information from the optimizer about the query execution plan. ...`.","body":"Use <a href=\"https://mariadb.com/kb/en/explain/\" rel=\"nofollow noreferrer\">MariaDB :: EXPLAIN</a>: <code>... When you precede a SELECT, UPDATE or a DELETE statement with the keyword EXPLAIN, MariaDB displays information from the optimizer about the query execution plan. ...</code>."},{"owner":{"account_id":2517962,"reputation":12768,"user_id":10195153,"display_name":"danblack"},"score":0,"creation_date":1661563786,"post_id":73489451,"comment_id":129809028,"body_markdown":"`EXPLAIN`, like `SELECT` returns a ResultSet and can be treated the same way. If you use [ANALYZE](https://mariadb.com/kb/en/analyze-statement/) or [ANALYZE FORMAT=JSON](https://mariadb.com/kb/en/analyze-format-json/) the query is actually executed and the resultset contains the analysis.  Also look at [profile](https://mariadb.com/kb/en/show-profile/). Depending on what you mean by a huge time, it does sound suspicious for 20k entries. (FK impacts maybe). [dba stackexchange](https://dba.stackexchange.com/) can help with more details.","body":"<code>EXPLAIN</code>, like <code>SELECT</code> returns a ResultSet and can be treated the same way. If you use <a href=\"https://mariadb.com/kb/en/analyze-statement/\" rel=\"nofollow noreferrer\">ANALYZE</a> or <a href=\"https://mariadb.com/kb/en/analyze-format-json/\" rel=\"nofollow noreferrer\">ANALYZE FORMAT=JSON</a> the query is actually executed and the resultset contains the analysis.  Also look at <a href=\"https://mariadb.com/kb/en/show-profile/\" rel=\"nofollow noreferrer\">profile</a>. Depending on what you mean by a huge time, it does sound suspicious for 20k entries. (FK impacts maybe). <a href=\"https://dba.stackexchange.com/\">dba stackexchange</a> can help with more details."}],"owner":{"account_id":21685741,"reputation":23,"user_id":16001229,"display_name":"Pedro Paulo Monte Pagani"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":40,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1662140414,"answer_count":0,"score":0,"last_activity_date":1661438219,"creation_date":1661438219,"question_id":73489451,"body_markdown":"I&#39;m currently running some queries and they&#39;re taking a huge time even with indexing(the table doesn&#39;t even have 20k entries), its an UPDATE set, I&#39;m trying to see the results of the UPDATE SET to see what it could be, how can I do that with an ResultSet, is it possible?","title":"How to listen to results of a EXPLAIN","body":"<p>I'm currently running some queries and they're taking a huge time even with indexing(the table doesn't even have 20k entries), its an UPDATE set, I'm trying to see the results of the UPDATE SET to see what it could be, how can I do that with an ResultSet, is it possible?</p>\n"},{"tags":["java","mysql","json"],"comments":[{"owner":{"account_id":209503,"reputation":22790,"user_id":460557,"accept_rate":100,"display_name":"Jorge Campos"},"score":1,"creation_date":1485344670,"post_id":41850697,"comment_id":70885348,"body_markdown":"Since you already have an object to store your data you just need to change `oe.setPLANTID(rs.getInt(&quot;PLANTID&quot;));` for `Plants plants = new Plants(); plants.setId(rs.getInt(&quot;PLANTID&quot;)); plants.setOtherFields(....)....; oe.setPlants(plants);`","body":"Since you already have an object to store your data you just need to change <code>oe.setPLANTID(rs.getInt(&quot;PLANTID&quot;));</code> for <code>Plants plants = new Plants(); plants.setId(rs.getInt(&quot;PLANTID&quot;)); plants.setOtherFields(....)....; oe.setPlants(plants);</code>"}],"answers":[{"tags":[],"owner":{"account_id":1878619,"reputation":3619,"user_id":1699268,"accept_rate":83,"display_name":"MayurB"},"down_vote_count":1,"up_vote_count":1,"is_accepted":true,"score":0,"last_activity_date":1485344621,"creation_date":1485344621,"answer_id":41850767,"question_id":41850697,"body_markdown":"You need to populate Plants object using data from resultset and set that on ObjectsEntity . Using ObjectMapper you can convert ObjectsEntity to JSON String\r\n\r\n \r\n\r\n        while (rs.next()) {\r\n                        ObjectsEntity oe = new ObjectsEntity();\r\n                        oe.setOBJECTID(rs.getInt(&quot;OBJECTID&quot;));\r\n                        Plants plants = new Plants();\r\n                        plants.setId(rs.getInt(&quot;PLANTID&quot;));\r\n                          //Set other fields.\r\n                        oe.setPLANTS(plants);\r\n                        oe.setOBJECTNAME(rs.getString(&quot;OBJECTNAME&quot;));\r\n                        oe.setOBJECTTYPEID(rs.getInt(&quot;OBJECTTYPEID&quot;));\r\n                        oe.setDESCRIPTION(rs.getString(&quot;DESCRIPTION&quot;));\r\n                        oe.setISMONITORED(rs.getBoolean(&quot;ISMONITORED&quot;));\r\n                        oe.setGROUP(rs.getString(&quot;GROUP&quot;));\r\n                        list.add(oe);\r\n                    }","title":"JAVA - Add Objects to JSON from a join SQL query","body":"<p>You need to populate Plants object using data from resultset and set that on ObjectsEntity . Using ObjectMapper you can convert ObjectsEntity to JSON String</p>\n\n<pre><code>    while (rs.next()) {\n                    ObjectsEntity oe = new ObjectsEntity();\n                    oe.setOBJECTID(rs.getInt(\"OBJECTID\"));\n                    Plants plants = new Plants();\n                    plants.setId(rs.getInt(\"PLANTID\"));\n                      //Set other fields.\n                    oe.setPLANTS(plants);\n                    oe.setOBJECTNAME(rs.getString(\"OBJECTNAME\"));\n                    oe.setOBJECTTYPEID(rs.getInt(\"OBJECTTYPEID\"));\n                    oe.setDESCRIPTION(rs.getString(\"DESCRIPTION\"));\n                    oe.setISMONITORED(rs.getBoolean(\"ISMONITORED\"));\n                    oe.setGROUP(rs.getString(\"GROUP\"));\n                    list.add(oe);\n                }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":247217,"reputation":213455,"user_id":521799,"accept_rate":89,"display_name":"Lukas Eder"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1661437805,"creation_date":1661437805,"answer_id":73489357,"question_id":41850697,"body_markdown":"While it is perfectly possible to do all this mapping and plumbing manually with JDBC directly, using third parties might be much simpler here? 2 of the most popular third party libraries for SQL in Java are [jOOQ][1] and [Hibernate][2]\r\n\r\n### A jOOQ solution\r\n\r\nWith jOOQ, you can use [nested records][3] along with [ad-hoc converters][4] for type safe mapping of query results to your target data structures, e.g.:\r\n\r\n```java\r\nList&lt;ObjectEntity&gt; result =\r\nctx.select(\r\n        OBJECTS.OBJECTID, \r\n        row(\r\n            OBJECTS.plant().PLANTID,\r\n            OBJECTS.plant().PLANTNAME\r\n        ).mapping(Plant::new))\r\n   .from(OBJECTS)\r\n   .fetch(mapping(ObjectEntity::new));\r\n```\r\n\r\nDisclaimer, I work for the company behind jOOQ\r\n\r\n### A Hibernate solution\r\n\r\nIn Hibernate/JPA, you&#39;d be designing your objects as entities, such as:\r\n\r\n```java\r\n@Entity\r\nclass Plant {\r\n    // Most annotations omitted for brevity\r\n    int plantid;\r\n    String plantname;\r\n}\r\n@Entity\r\nclass Object {\r\n    int objectid;\r\n    @ManyToOne(...)\r\n    Plant plant;\r\n}\r\n```\r\n\r\nYou can now fetch your entities using JPQL, without specifying the nesting explicitly.\r\n\r\n\r\n  [1]: https://jooq.org\r\n  [2]: https://hibernate.org\r\n  [3]: https://www.jooq.org/doc/latest/manual/sql-building/column-expressions/nested-records/\r\n  [4]: https://www.jooq.org/doc/latest/manual/sql-execution/fetching/ad-hoc-converter/","title":"JAVA - Add Objects to JSON from a join SQL query","body":"<p>While it is perfectly possible to do all this mapping and plumbing manually with JDBC directly, using third parties might be much simpler here? 2 of the most popular third party libraries for SQL in Java are <a href=\"https://jooq.org\" rel=\"nofollow noreferrer\">jOOQ</a> and <a href=\"https://hibernate.org\" rel=\"nofollow noreferrer\">Hibernate</a></p>\n<h3>A jOOQ solution</h3>\n<p>With jOOQ, you can use <a href=\"https://www.jooq.org/doc/latest/manual/sql-building/column-expressions/nested-records/\" rel=\"nofollow noreferrer\">nested records</a> along with <a href=\"https://www.jooq.org/doc/latest/manual/sql-execution/fetching/ad-hoc-converter/\" rel=\"nofollow noreferrer\">ad-hoc converters</a> for type safe mapping of query results to your target data structures, e.g.:</p>\n<pre class=\"lang-java prettyprint-override\"><code>List&lt;ObjectEntity&gt; result =\nctx.select(\n        OBJECTS.OBJECTID, \n        row(\n            OBJECTS.plant().PLANTID,\n            OBJECTS.plant().PLANTNAME\n        ).mapping(Plant::new))\n   .from(OBJECTS)\n   .fetch(mapping(ObjectEntity::new));\n</code></pre>\n<p>Disclaimer, I work for the company behind jOOQ</p>\n<h3>A Hibernate solution</h3>\n<p>In Hibernate/JPA, you'd be designing your objects as entities, such as:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Entity\nclass Plant {\n    // Most annotations omitted for brevity\n    int plantid;\n    String plantname;\n}\n@Entity\nclass Object {\n    int objectid;\n    @ManyToOne(...)\n    Plant plant;\n}\n</code></pre>\n<p>You can now fetch your entities using JPQL, without specifying the nesting explicitly.</p>\n"}],"owner":{"account_id":7281098,"reputation":3024,"user_id":5550833,"accept_rate":56,"display_name":"MarioC"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":677,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":41850767,"answer_count":2,"score":1,"last_activity_date":1661437805,"creation_date":1485344426,"question_id":41850697,"body_markdown":"I hope the title is well set...\r\n\r\nI have an existing Java application (i cannot change all the application) which simply exposes db tables as JSON using gson library.\r\n\r\nMy problem is how to create a Json not only with the simple fields of the DB but with the linked Objects.\r\n\r\nI have a table in this way\r\n\r\n    | objectid | plantid | other_fields |\r\n\r\nNow the existing gson gives me simply the `plantid` as an integer, but i have a `plants` table\r\n\r\n    | plantid | plantname | other_fields |\r\n\r\nI would like to have the gson with the Plant Object, not simply the *plantid*\r\n\r\nThis is how the application maps the Sql query to the Model\r\n\r\n    public ArrayList&lt;ObjectsEntity&gt; getObject(String objectId){\r\n    \t\tArrayList&lt;ObjectsEntity&gt; list = new ArrayList&lt;&gt;();\r\n    \t\tResultSet rs = null;\r\n    \t\ttry {\r\n    \t\t\tConnection connLocal = connFactLocal.getConnection();\r\n    \t\t\tString query = &quot;select * from OBJECTS o left join PLANTS p on o.PLANTID = p.PLANTID &quot;\r\n    \t\t\t\t\t+ &quot;left join OBJECTTYPES ot on o.OBJECTTYPEID = ot.OBJECTTYPEID&quot;;\r\n    \t\t\tStatement stmt = connLocal.createStatement();\r\n    \t\t\trs = stmt.executeQuery(query);\r\n    \t\t\twhile (rs.next()) {\r\n    \t\t\t\tObjectsEntity oe = new ObjectsEntity();\r\n    \t\t\t\toe.setOBJECTID(rs.getInt(&quot;OBJECTID&quot;));\r\n    \t\t\t\toe.setPLANTID(rs.getInt(&quot;PLANTID&quot;));\r\n    \t\t\t\toe.setOBJECTNAME(rs.getString(&quot;OBJECTNAME&quot;));\r\n    \t\t\t\toe.setOBJECTTYPEID(rs.getInt(&quot;OBJECTTYPEID&quot;));\r\n    \t\t\t\toe.setDESCRIPTION(rs.getString(&quot;DESCRIPTION&quot;));\r\n    \t\t\t\toe.setISMONITORED(rs.getBoolean(&quot;ISMONITORED&quot;));\r\n    \t\t\t\toe.setGROUP(rs.getString(&quot;GROUP&quot;));\r\n    \t\t\t\tlist.add(oe);\r\n    \t\t\t}\r\n    \t\t} catch (SQLException e){\r\n    \t\t\tlogger.error(&quot;SQL Error:&quot;,e);\r\n    \t\t}\r\n    \t\treturn list;\r\n    \t}\r\n\r\n\r\nObjectsEntity.java is a simple mapper with the DB table with getters and setters\r\nI&#39;ve tried to change this mapper updating\r\n\r\n    int PLANTID\r\n\r\nwith\r\n\r\n    Plants plant\r\nBut then i don&#39;t know how to set the Plants from the ResultSet of the query... any idea?","title":"JAVA - Add Objects to JSON from a join SQL query","body":"<p>I hope the title is well set...</p>\n\n<p>I have an existing Java application (i cannot change all the application) which simply exposes db tables as JSON using gson library.</p>\n\n<p>My problem is how to create a Json not only with the simple fields of the DB but with the linked Objects.</p>\n\n<p>I have a table in this way</p>\n\n<pre><code>| objectid | plantid | other_fields |\n</code></pre>\n\n<p>Now the existing gson gives me simply the <code>plantid</code> as an integer, but i have a <code>plants</code> table</p>\n\n<pre><code>| plantid | plantname | other_fields |\n</code></pre>\n\n<p>I would like to have the gson with the Plant Object, not simply the <em>plantid</em></p>\n\n<p>This is how the application maps the Sql query to the Model</p>\n\n<pre><code>public ArrayList&lt;ObjectsEntity&gt; getObject(String objectId){\n        ArrayList&lt;ObjectsEntity&gt; list = new ArrayList&lt;&gt;();\n        ResultSet rs = null;\n        try {\n            Connection connLocal = connFactLocal.getConnection();\n            String query = \"select * from OBJECTS o left join PLANTS p on o.PLANTID = p.PLANTID \"\n                    + \"left join OBJECTTYPES ot on o.OBJECTTYPEID = ot.OBJECTTYPEID\";\n            Statement stmt = connLocal.createStatement();\n            rs = stmt.executeQuery(query);\n            while (rs.next()) {\n                ObjectsEntity oe = new ObjectsEntity();\n                oe.setOBJECTID(rs.getInt(\"OBJECTID\"));\n                oe.setPLANTID(rs.getInt(\"PLANTID\"));\n                oe.setOBJECTNAME(rs.getString(\"OBJECTNAME\"));\n                oe.setOBJECTTYPEID(rs.getInt(\"OBJECTTYPEID\"));\n                oe.setDESCRIPTION(rs.getString(\"DESCRIPTION\"));\n                oe.setISMONITORED(rs.getBoolean(\"ISMONITORED\"));\n                oe.setGROUP(rs.getString(\"GROUP\"));\n                list.add(oe);\n            }\n        } catch (SQLException e){\n            logger.error(\"SQL Error:\",e);\n        }\n        return list;\n    }\n</code></pre>\n\n<p>ObjectsEntity.java is a simple mapper with the DB table with getters and setters\nI've tried to change this mapper updating</p>\n\n<pre><code>int PLANTID\n</code></pre>\n\n<p>with</p>\n\n<pre><code>Plants plant\n</code></pre>\n\n<p>But then i don't know how to set the Plants from the ResultSet of the query... any idea?</p>\n"},{"tags":["java","option-type"],"comments":[{"owner":{"account_id":15582895,"reputation":31,"user_id":11242206,"display_name":"PetKap"},"score":0,"creation_date":1661352333,"post_id":73474951,"comment_id":129752771,"body_markdown":"Method is returning empty optional for different ifs. And then when he is using returned value he needs to distinguish it. So instead of use check again he is doing this and then handling situation when it returned Optional with File &quot;False&quot;.","body":"Method is returning empty optional for different ifs. And then when he is using returned value he needs to distinguish it. So instead of use check again he is doing this and then handling situation when it returned Optional with File &quot;False&quot;."},{"owner":{"account_id":17835,"reputation":303895,"user_id":40342,"accept_rate":62,"display_name":"Joachim Sauer"},"score":2,"creation_date":1661352395,"post_id":73474951,"comment_id":129752791,"body_markdown":"That&#39;s definitely an abuse of the type system, but whether it&#39;s `Optional`  that&#39;s being abused here or `File` is up for discussion IMO.","body":"That&#39;s definitely an abuse of the type system, but whether it&#39;s <code>Optional</code>  that&#39;s being abused here or <code>File</code> is up for discussion IMO."},{"owner":{"account_id":15582895,"reputation":31,"user_id":11242206,"display_name":"PetKap"},"score":1,"creation_date":1661352959,"post_id":73474951,"comment_id":129753064,"body_markdown":"Yeah, more abused is File type, but then in the end explicitly also Optional IMO. So kinda both are abused?","body":"Yeah, more abused is File type, but then in the end explicitly also Optional IMO. So kinda both are abused?"},{"owner":{"account_id":204515,"reputation":11679,"user_id":452775,"accept_rate":63,"display_name":"Lii"},"score":4,"creation_date":1661355914,"post_id":73474951,"comment_id":129754407,"body_markdown":"This is the most wonderfully bizarre thing I have heard in a long time! It can&#39;t be easy to work with people like that. Maybe it keeps work interesting thought, you can never know what they will come up with.","body":"This is the most wonderfully bizarre thing I have heard in a long time! It can&#39;t be easy to work with people like that. Maybe it keeps work interesting thought, you can never know what they will come up with."}],"answers":[{"tags":[],"owner":{"account_id":75804,"reputation":94815,"user_id":217324,"accept_rate":96,"display_name":"Nathan Hughes"},"down_vote_count":0,"up_vote_count":7,"is_accepted":true,"score":7,"last_activity_date":1661437795,"creation_date":1661351884,"answer_id":73475099,"question_id":73474951,"body_markdown":"The whole point of `Optional` is to avoid the situation where you return a bogus value (like null, or like returning -1 from `String.indexOf` in order to indicate it didn&#39;t find anything), putting the responsibility on the caller to know what is bogus and to know to check for it. Returning Optional lets the caller know it needs to check whether a valid result came back, and it takes away the burden of the caller code needing to know what return values aren&#39;t valid. \r\n\r\n `Optional` was never meant as a wrapper for a bogus value. \r\n\r\nAnd yes you can return anything. The api doesn&#39;t stop you from doing nonsensical things. \r\n\r\nAlso consider that flatMap doesn&#39;t know what to do with this weird thing, it will treat the contents as nonempty. So now how you can use this value is limited. You have a multistage validation process where it might be something you can handle with operations chained together using flatMap, but this fake file has made that harder. It&#39;s limited your options. \r\n\r\nReturn [`Optional.empty()`][1] if you don&#39;t have a valid value to return. \r\n\r\n\r\n  [1]: https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/Optional.html#empty()","title":"Could be in Optional really anything","body":"<p>The whole point of <code>Optional</code> is to avoid the situation where you return a bogus value (like null, or like returning -1 from <code>String.indexOf</code> in order to indicate it didn't find anything), putting the responsibility on the caller to know what is bogus and to know to check for it. Returning Optional lets the caller know it needs to check whether a valid result came back, and it takes away the burden of the caller code needing to know what return values aren't valid.</p>\n<p><code>Optional</code> was never meant as a wrapper for a bogus value.</p>\n<p>And yes you can return anything. The api doesn't stop you from doing nonsensical things.</p>\n<p>Also consider that flatMap doesn't know what to do with this weird thing, it will treat the contents as nonempty. So now how you can use this value is limited. You have a multistage validation process where it might be something you can handle with operations chained together using flatMap, but this fake file has made that harder. It's limited your options.</p>\n<p>Return <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/Optional.html#empty()\" rel=\"nofollow noreferrer\"><code>Optional.empty()</code></a> if you don't have a valid value to return.</p>\n"}],"owner":{"account_id":15582895,"reputation":31,"user_id":11242206,"display_name":"PetKap"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":151,"favorite_count":0,"down_vote_count":1,"up_vote_count":3,"accepted_answer_id":73475099,"answer_count":1,"score":2,"last_activity_date":1661437795,"creation_date":1661351365,"question_id":73474951,"body_markdown":"I found implemented this code (method where this part of code is used is returning `Optional&lt;File&gt;`, this part of code had to be added for verification if values are correct and case can be saved): \r\n\r\n    if (!CaseChecker.checkValues(case)) {\r\n        return Optional.of(new File(&quot;FALSE&quot;));\r\n    }\r\n\r\nWhen I asked the person, why he is returning something like this. The answer was &quot;Optional can contain any value&quot;. To be honest I don&#39;t agree with this, because type of Optional is for some reason. So I wanted to confirm if Optional can be really anything and if yes, then what&#39;s the reason to write Optional type.","title":"Could be in Optional really anything","body":"<p>I found implemented this code (method where this part of code is used is returning <code>Optional&lt;File&gt;</code>, this part of code had to be added for verification if values are correct and case can be saved):</p>\n<pre><code>if (!CaseChecker.checkValues(case)) {\n    return Optional.of(new File(&quot;FALSE&quot;));\n}\n</code></pre>\n<p>When I asked the person, why he is returning something like this. The answer was &quot;Optional can contain any value&quot;. To be honest I don't agree with this, because type of Optional is for some reason. So I wanted to confirm if Optional can be really anything and if yes, then what's the reason to write Optional type.</p>\n"},{"tags":["java","android","storage","android-sdcard","file-manager"],"comments":[{"owner":{"account_id":16768304,"reputation":8503,"user_id":12121419,"display_name":"blackapps"},"score":0,"creation_date":1660991421,"post_id":73425437,"comment_id":129667589,"body_markdown":"`i have checked. if SD-Card is mounted` No that is for the external storage you just made a listing from. That is always mounted. Every device has what is called external storage. Which is different from a removable micro sd card.","body":"<code>i have checked. if SD-Card is mounted</code> No that is for the external storage you just made a listing from. That is always mounted. Every device has what is called external storage. Which is different from a removable micro sd card."},{"owner":{"account_id":16768304,"reputation":8503,"user_id":12121419,"display_name":"blackapps"},"score":0,"creation_date":1660991499,"post_id":73425437,"comment_id":129667600,"body_markdown":"Have a look at the second item returned by getExternalFilesDirs().","body":"Have a look at the second item returned by getExternalFilesDirs()."},{"owner":{"account_id":16768304,"reputation":8503,"user_id":12121419,"display_name":"blackapps"},"score":0,"creation_date":1660991590,"post_id":73425437,"comment_id":129667618,"body_markdown":"`File internalStorage = new File( Environment.getExternalStorageDirectory().getAbsolutePath() ); ` Better: `File externalStorage = Environment.getExternalStorageDirectory();`","body":"<code>File internalStorage = new File( Environment.getExternalStorageDirectory().getAbsolutePath() ); </code> Better: <code>File externalStorage = Environment.getExternalStorageDirectory();</code>"},{"owner":{"account_id":24363603,"reputation":21,"user_id":18297631,"display_name":"Saqib Rehman"},"score":0,"creation_date":1660992503,"post_id":73425437,"comment_id":129667801,"body_markdown":"@blackapps I am getting all files nicely with getExternelStorageDirectory() i.e ( Internel Storage) . That android also says &quot;Externel Storage&quot; as well. But i am unable to get any file from remove able micro sd card.","body":"@blackapps I am getting all files nicely with getExternelStorageDirectory() i.e ( Internel Storage) . That android also says &quot;Externel Storage&quot; as well. But i am unable to get any file from remove able micro sd card."},{"owner":{"account_id":16768304,"reputation":8503,"user_id":12121419,"display_name":"blackapps"},"score":0,"creation_date":1660994016,"post_id":73425437,"comment_id":129668095,"body_markdown":"You tell nothing new. You better had tried my last comment.","body":"You tell nothing new. You better had tried my last comment."}],"answers":[{"tags":[],"owner":{"account_id":19942592,"reputation":9,"user_id":14614018,"display_name":"Rachid Le Laborantin"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1660995707,"creation_date":1660995707,"answer_id":73426408,"question_id":73425437,"body_markdown":"Check and ask for permission to access external cards in your manifest or by code ","title":"Unable to access external sd card on Android","body":"<p>Check and ask for permission to access external cards in your manifest or by code</p>\n"},{"tags":[],"owner":{"account_id":24363603,"reputation":21,"user_id":18297631,"display_name":"Saqib Rehman"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1661437771,"creation_date":1661152207,"answer_id":73441354,"question_id":73425437,"body_markdown":"After a lot of research and time consumed, I finally got a solution for my question. There are plenty of questions asking for the same problem, but not any relevant and working solution is available, up-till my exposure.\r\n\r\nI am answering my own question to help others facing the same problem. I have used the following code to get the path of SD card. And then I accessed it normally as I had accessed the internal storage of the Android device.\r\n\r\n```java         \r\n// The following function will return the path of the SD card\r\n// or NULL, if no SD card is mounted.\r\n\r\npublic static String getExternalStoragePath(Context mContext, boolean is_removable) {\r\n\r\n    StorageManager mStorageManager = \r\n        (StorageManager) mContext.getSystemService(Context.STORAGE_SERVICE);\r\n    Class&lt;?&gt; storageVolumeClazz = null;\r\n    try {\r\n        storageVolumeClazz = Class.forName(&quot;android.os.storage.StorageVolume&quot;);\r\n        Method getVolumeList = mStorageManager.getClass().getMethod(&quot;getVolumeList&quot;);\r\n        Method getPath = storageVolumeClazz.getMethod(&quot;getPath&quot;);\r\n        Method isRemovable = storageVolumeClazz.getMethod(&quot;isRemovable&quot;);\r\n        Object result = getVolumeList.invoke(mStorageManager);\r\n        final int length = Array.getLength(result);\r\n        for (int i = 0; i &lt; length; i++) {\r\n            Object storageVolumeElement = Array.get(result, i);\r\n            String path = (String) getPath.invoke(storageVolumeElement);\r\n            boolean removable = (Boolean) isRemovable.invoke(storageVolumeElement);\r\n            if (is_removable == removable) {\r\n                return path;\r\n            }\r\n        }\r\n    } catch (ClassNotFoundException e) {\r\n        e.printStackTrace();\r\n    } catch (InvocationTargetException e) {\r\n        e.printStackTrace();\r\n    } catch (NoSuchMethodException e) {\r\n        e.printStackTrace();\r\n    } catch (IllegalAccessException e) {\r\n        e.printStackTrace();\r\n    }\r\n    return null;\r\n}\r\n```","title":"Unable to access external sd card on Android","body":"<p>After a lot of research and time consumed, I finally got a solution for my question. There are plenty of questions asking for the same problem, but not any relevant and working solution is available, up-till my exposure.</p>\n<p>I am answering my own question to help others facing the same problem. I have used the following code to get the path of SD card. And then I accessed it normally as I had accessed the internal storage of the Android device.</p>\n<pre class=\"lang-java prettyprint-override\"><code>// The following function will return the path of the SD card\n// or NULL, if no SD card is mounted.\n\npublic static String getExternalStoragePath(Context mContext, boolean is_removable) {\n\n    StorageManager mStorageManager = \n        (StorageManager) mContext.getSystemService(Context.STORAGE_SERVICE);\n    Class&lt;?&gt; storageVolumeClazz = null;\n    try {\n        storageVolumeClazz = Class.forName(&quot;android.os.storage.StorageVolume&quot;);\n        Method getVolumeList = mStorageManager.getClass().getMethod(&quot;getVolumeList&quot;);\n        Method getPath = storageVolumeClazz.getMethod(&quot;getPath&quot;);\n        Method isRemovable = storageVolumeClazz.getMethod(&quot;isRemovable&quot;);\n        Object result = getVolumeList.invoke(mStorageManager);\n        final int length = Array.getLength(result);\n        for (int i = 0; i &lt; length; i++) {\n            Object storageVolumeElement = Array.get(result, i);\n            String path = (String) getPath.invoke(storageVolumeElement);\n            boolean removable = (Boolean) isRemovable.invoke(storageVolumeElement);\n            if (is_removable == removable) {\n                return path;\n            }\n        }\n    } catch (ClassNotFoundException e) {\n        e.printStackTrace();\n    } catch (InvocationTargetException e) {\n        e.printStackTrace();\n    } catch (NoSuchMethodException e) {\n        e.printStackTrace();\n    } catch (IllegalAccessException e) {\n        e.printStackTrace();\n    }\n    return null;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":22248512,"reputation":1,"user_id":16481824,"display_name":"ScryptX"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1661275480,"creation_date":1661275455,"answer_id":73462840,"question_id":73425437,"body_markdown":"To add on to @Saqib&#39;s answer, I&#39;ve simplified the code by removing the need to use his helper/wrapper class.\r\n\r\n   \r\n\r\n     StorageManager storageManager = (StorageManager) context.getSystemService(Context.STORAGE_SERVICE);\r\n     List&lt;StorageVolume&gt; storageArray = storageManager.getStorageVolumes();\r\n     String path = &quot;&quot;;\r\n     for (StorageVolume item : storageArray)\r\n         if (item.isRemovable())\r\n               if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.R)\r\n                    path = item.getDirectory().getPath();\r\n\r\nTo handle null case, simply check if the path string is empty or null and handle that appropriately.\r\n\r\n","title":"Unable to access external sd card on Android","body":"<p>To add on to @Saqib's answer, I've simplified the code by removing the need to use his helper/wrapper class.</p>\n<pre><code> StorageManager storageManager = (StorageManager) context.getSystemService(Context.STORAGE_SERVICE);\n List&lt;StorageVolume&gt; storageArray = storageManager.getStorageVolumes();\n String path = &quot;&quot;;\n for (StorageVolume item : storageArray)\n     if (item.isRemovable())\n           if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.R)\n                path = item.getDirectory().getPath();\n</code></pre>\n<p>To handle null case, simply check if the path string is empty or null and handle that appropriately.</p>\n"}],"owner":{"account_id":24363603,"reputation":21,"user_id":18297631,"display_name":"Saqib Rehman"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":492,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":3,"score":1,"last_activity_date":1661437771,"creation_date":1660986551,"question_id":73425437,"body_markdown":"I have easily accessed Internal Storage Files using \r\n\r\n```\r\nFile internalStorage = new File( Environment.getExternalStorageDirectory().getAbsolutePath() );     \r\ninternalStorage.listFiles();\r\n```\r\n\r\nAnd i am getting all the files.\r\nBut i am unable to get any file from my mounted sd-card.\r\ni have checked. if SD-Card is mounted \r\n\r\n```\r\nboolean isSdCard = android.os.Environment.getExternalStorageState().equals(android.os.Environment.MEDIA_MOUNTED);\r\n```\r\n\r\nAnd i have also tried different solutions like.       \r\n    \r\n```\r\nFile sdCardFolder = new File(System.getenv(&quot;SECONDARY_STORAGE&quot;));   \r\n//RESULT.    \r\nsdCardFolder.getName() //sdcard0.   \r\nsdCardFolder.listFile() //null.\r\n```\r\n\r\nHere it&#39;s giving the folder name but sending null for listFile.\r\n\r\nAnd also i have tried different other methods to listFiles from my SD Card but unable to find a working one.\r\n\r\nin build.gradle.    \r\n```\r\ncompileSdkVersion 31.    \r\ntargetSdkVersion 31\r\n```\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n","title":"Unable to access external sd card on Android","body":"<p>I have easily accessed Internal Storage Files using</p>\n<pre><code>File internalStorage = new File( Environment.getExternalStorageDirectory().getAbsolutePath() );     \ninternalStorage.listFiles();\n</code></pre>\n<p>And i am getting all the files.\nBut i am unable to get any file from my mounted sd-card.\ni have checked. if SD-Card is mounted</p>\n<pre><code>boolean isSdCard = android.os.Environment.getExternalStorageState().equals(android.os.Environment.MEDIA_MOUNTED);\n</code></pre>\n<p>And i have also tried different solutions like.</p>\n<pre><code>File sdCardFolder = new File(System.getenv(&quot;SECONDARY_STORAGE&quot;));   \n//RESULT.    \nsdCardFolder.getName() //sdcard0.   \nsdCardFolder.listFile() //null.\n</code></pre>\n<p>Here it's giving the folder name but sending null for listFile.</p>\n<p>And also i have tried different other methods to listFiles from my SD Card but unable to find a working one.</p>\n<p>in build.gradle.</p>\n<pre><code>compileSdkVersion 31.    \ntargetSdkVersion 31\n</code></pre>\n"},{"tags":["java","android","kotlin","camera"],"comments":[{"owner":{"account_id":19650205,"reputation":31,"user_id":14384218,"display_name":"Waseem"},"score":0,"creation_date":1661412848,"post_id":73481851,"comment_id":129767416,"body_markdown":"Its just the object of contentvalues","body":"Its just the object of contentvalues"},{"owner":{"account_id":19650205,"reputation":31,"user_id":14384218,"display_name":"Waseem"},"score":0,"creation_date":1661428792,"post_id":73481851,"comment_id":129773243,"body_markdown":"That&#39;s the code to open the device camera and fetch the image data but when this code open the camera application crashes in background with the above mention error .","body":"That&#39;s the code to open the device camera and fetch the image data but when this code open the camera application crashes in background with the above mention error ."},{"owner":{"account_id":19650205,"reputation":31,"user_id":14384218,"display_name":"Waseem"},"score":0,"creation_date":1661437662,"post_id":73481851,"comment_id":129777068,"body_markdown":"Ok updated but can you flag out the issue","body":"Ok updated but can you flag out the issue"},{"owner":{"account_id":16768304,"reputation":8503,"user_id":12121419,"display_name":"blackapps"},"score":0,"creation_date":1661437870,"post_id":73481851,"comment_id":129777181,"body_markdown":"The code you posted will not produce an android.os.TransactionTooLargeException . Find the real code please.","body":"The code you posted will not produce an android.os.TransactionTooLargeException . Find the real code please."}],"owner":{"account_id":19650205,"reputation":31,"user_id":14384218,"display_name":"Waseem"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":163,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1661437635,"creation_date":1661401835,"question_id":73481851,"body_markdown":"I&#39;m trying to capture image  by two ways one is by camera intent and and another is by contract launcher as onActivity is depreciated. But I am  getting following issue \r\n \r\n\r\n    java.lang.RuntimeException: android.os.TransactionTooLargeException: data parcel size 3188456 bytes\r\n            at android.app.servertransaction.PendingTransactionActions$StopInfo.run(PendingTransactionActions.java:161)\r\n            at android.os.Handler.handleCallback(Handler.java:938)\r\n            at android.os.Handler.dispatchMessage(Handler.java:99)\r\n            at android.os.Looper.loop(Looper.java:263)\r\n            at android.app.ActivityThread.main(ActivityThread.java:8276)\r\n            at java.lang.reflect.Method.invoke(Native Method)\r\n            at com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:612)\r\n            at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:1006)\r\n         Caused by: android.os.TransactionTooLargeException: data parcel size 3188456 bytes\r\n            at android.os.BinderProxy.transactNative(Native Method)\r\n            at android.os.BinderProxy.transact(BinderProxy.java:568)\r\n            at android.app.IActivityTaskManager$Stub$Proxy.activityStopped(IActivityTaskManager.java:4429)\r\n            at android.app.servertransaction.PendingTransactionActions$StopInfo.run(PendingTransactionActions.java:145)\r\n\r\nHERE IS MY CODE THROUGH INTENT\r\n\r\n    fun openCamera(activity: Activity): Intent {\r\n        //camera intent\r\n        val cameraIntent = Intent(MediaStore.ACTION_IMAGE_CAPTURE)\r\n        // set filename\r\n        val imgFile = createImageFile(activity)\r\n        val imgURI = FileProvider.getUriForFile(activity.applicationContext, authr, imgFile)\r\n        cameraIntent.putExtra(MediaStore.EXTRA_OUTPUT, imgURI)\r\n        return cameraIntent\r\n\r\n    }\r\n\r\n    @Throws(IOException::class)\r\n    private fun createImageFile(activity: Activity): File {\r\n\r\n        // Create an image file name\r\n        val timeStamp = SimpleDateFormat(&quot;yyyyMMdd_HHmmss&quot;).format(Date())\r\n        val imageFileName = &quot;JPEG_&quot; + timeStamp + &quot;_&quot;\r\n         val storageDir = activity.getExternalFilesDir(Environment.DIRECTORY_PICTURES)\r\n        val image = File.createTempFile(\r\n            imageFileName, // prefix\r\n            &quot;.jpg&quot;, // suffix\r\n            storageDir      // directory\r\n        )\r\n \r\n        return image\r\n    }\r\n   \r\nCODE THROUGH CONTRACT \r\n\r\n\r\n \r\n\r\n    private val contract = registerForActivityResult(ActivityResultContracts.TakePicture()) {\r\n            \r\n            viewBinding.imgUserProfile.setImageURI(null)\r\n            viewBinding.imgUserProfile.setImageURI(imageUri)\r\n        }\r\n\r\nGetting same issue from both methods\r\n","title":"Image capture issue through camera in Android kotlin","body":"<p>I'm trying to capture image  by two ways one is by camera intent and and another is by contract launcher as onActivity is depreciated. But I am  getting following issue</p>\n<pre><code>java.lang.RuntimeException: android.os.TransactionTooLargeException: data parcel size 3188456 bytes\n        at android.app.servertransaction.PendingTransactionActions$StopInfo.run(PendingTransactionActions.java:161)\n        at android.os.Handler.handleCallback(Handler.java:938)\n        at android.os.Handler.dispatchMessage(Handler.java:99)\n        at android.os.Looper.loop(Looper.java:263)\n        at android.app.ActivityThread.main(ActivityThread.java:8276)\n        at java.lang.reflect.Method.invoke(Native Method)\n        at com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:612)\n        at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:1006)\n     Caused by: android.os.TransactionTooLargeException: data parcel size 3188456 bytes\n        at android.os.BinderProxy.transactNative(Native Method)\n        at android.os.BinderProxy.transact(BinderProxy.java:568)\n        at android.app.IActivityTaskManager$Stub$Proxy.activityStopped(IActivityTaskManager.java:4429)\n        at android.app.servertransaction.PendingTransactionActions$StopInfo.run(PendingTransactionActions.java:145)\n</code></pre>\n<p>HERE IS MY CODE THROUGH INTENT</p>\n<pre><code>fun openCamera(activity: Activity): Intent {\n    //camera intent\n    val cameraIntent = Intent(MediaStore.ACTION_IMAGE_CAPTURE)\n    // set filename\n    val imgFile = createImageFile(activity)\n    val imgURI = FileProvider.getUriForFile(activity.applicationContext, authr, imgFile)\n    cameraIntent.putExtra(MediaStore.EXTRA_OUTPUT, imgURI)\n    return cameraIntent\n\n}\n\n@Throws(IOException::class)\nprivate fun createImageFile(activity: Activity): File {\n\n    // Create an image file name\n    val timeStamp = SimpleDateFormat(&quot;yyyyMMdd_HHmmss&quot;).format(Date())\n    val imageFileName = &quot;JPEG_&quot; + timeStamp + &quot;_&quot;\n     val storageDir = activity.getExternalFilesDir(Environment.DIRECTORY_PICTURES)\n    val image = File.createTempFile(\n        imageFileName, // prefix\n        &quot;.jpg&quot;, // suffix\n        storageDir      // directory\n    )\n\n    return image\n}\n</code></pre>\n<p>CODE THROUGH CONTRACT</p>\n<pre><code>private val contract = registerForActivityResult(ActivityResultContracts.TakePicture()) {\n        \n        viewBinding.imgUserProfile.setImageURI(null)\n        viewBinding.imgUserProfile.setImageURI(imageUri)\n    }\n</code></pre>\n<p>Getting same issue from both methods</p>\n"},{"tags":["java","jquery"],"comments":[{"owner":{"account_id":8080032,"reputation":14181,"user_id":6089612,"accept_rate":80,"display_name":"Don&#39;t Panic"},"score":0,"creation_date":1661439150,"post_id":73489278,"comment_id":129777757,"body_markdown":"You say they changed `label` to `bdi` - did you try making the same change in your code?","body":"You say they changed <code>label</code> to <code>bdi</code> - did you try making the same change in your code?"},{"owner":{"account_id":14067863,"reputation":5,"user_id":10162193,"display_name":"Sachin Agarwal"},"score":0,"creation_date":1661439327,"post_id":73489278,"comment_id":129777839,"body_markdown":"@Don&#39;tPanic Yes I tried but did not work","body":"@Don&#39;tPanic Yes I tried but did not work"}],"owner":{"account_id":14067863,"reputation":5,"user_id":10162193,"display_name":"Sachin Agarwal"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":44,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1661437527,"creation_date":1661437527,"question_id":73489278,"body_markdown":"I am not an IT Professional but i was using some code on a website through Tampermonkey\r\n\r\nWebsite Code:-\r\n\r\n        &lt;div id=&quot;__grid1-wrapperfor-__label44&quot; class=&quot;sapUiRespGridSpanL1 sapUiRespGridSpanM3 sapUiRespGridSpanS6 sapUiRespGridSpanXL1&quot;&gt;\r\n    &lt;span id=&quot;__label44&quot; data-sap-ui=&quot;__label44&quot; class=&quot;sapMLabel sapUiSelectable sapMLabelRequired sapMLabelMaxWidth DCA-FormLable&quot; style=&quot;text-align: left;&quot;&gt;\r\n        &lt;span id=&quot;__label44-text&quot; class=&quot;sapMLabelTextWrapper&quot;&gt;\r\n            &lt;bdi id=&quot;__label44-bdi&quot;&gt;Truck No&lt;/bdi&gt;\r\n    &lt;/span&gt;\r\n    &lt;span data-colon=&quot;:&quot; class=&quot;sapMLabelColonAndRequired&quot;&gt;\r\n    &lt;/span&gt;\r\n    &lt;/span&gt;\r\n    &lt;/div&gt;\r\n    &lt;div id=&quot;__grid1-wrapperfor-__xmlview3--truckNumber&quot; class=&quot;sapUiRespGridSpanL2 sapUiRespGridSpanM3 sapUiRespGridSpanS6 sapUiRespGridSpanXL2&quot;&gt;\r\n    &lt;div id=&quot;__xmlview3--truckNumber&quot; data-sap-ui=&quot;__xmlview3--truckNumber&quot; class=&quot;sapMInputBase sapMInputBaseHeightMargin sapMInput DCA-FormField&quot; style=&quot;width: 100%;&quot;&gt;&lt;div id=&quot;__xmlview3--truckNumber-content&quot; class=&quot;sapMInputBaseContentWrapper&quot; style=&quot;width: 100%;&quot;&gt;\r\n        &lt;input id=&quot;__xmlview3--truckNumber-inner&quot; value=&quot;&quot; type=&quot;text&quot; autocomplete=&quot;off&quot; class=&quot;sapMInputBaseInner&quot;&gt;\r\n            &lt;/div&gt;\r\n    &lt;/div&gt;\r\n    &lt;/div&gt;\r\n\r\nEarlier Site was Using Label ID instead of BDI id and my script was working very Fine\r\n\r\nMy Requirement is to change the input id attributes \r\n\r\nMy earlier Code:-\r\n\r\n        $(&quot;label:contains(&#39;Truck No&#39;)&quot;).parent().next().find(&#39;input&#39;).attr({\r\n            maxlength: &quot;10&quot;,\r\n            Autocomplete: &quot;OFF&quot;,\r\n            list: &quot;KASHIPUR&quot;,\r\n            Placeholder: &quot;TRUCK NUMBER&quot;,\r\n            autocapitalize:&quot;ON&quot;\r\n            }).after(&#39;&lt;Datalist ID=KASHIPUR&gt;&lt;/Datalist&gt;&#39;);\r\n\r\nIt stopped working after they changed Label ID to BDI ID\r\n\r\nINPUT ID is variable so cannot use input ID\r\n\r\nPls Help.","title":"Go To Next Input of BDI ID that contain TEXT Through Jquery","body":"<p>I am not an IT Professional but i was using some code on a website through Tampermonkey</p>\n<p>Website Code:-</p>\n<pre><code>    &lt;div id=&quot;__grid1-wrapperfor-__label44&quot; class=&quot;sapUiRespGridSpanL1 sapUiRespGridSpanM3 sapUiRespGridSpanS6 sapUiRespGridSpanXL1&quot;&gt;\n&lt;span id=&quot;__label44&quot; data-sap-ui=&quot;__label44&quot; class=&quot;sapMLabel sapUiSelectable sapMLabelRequired sapMLabelMaxWidth DCA-FormLable&quot; style=&quot;text-align: left;&quot;&gt;\n    &lt;span id=&quot;__label44-text&quot; class=&quot;sapMLabelTextWrapper&quot;&gt;\n        &lt;bdi id=&quot;__label44-bdi&quot;&gt;Truck No&lt;/bdi&gt;\n&lt;/span&gt;\n&lt;span data-colon=&quot;:&quot; class=&quot;sapMLabelColonAndRequired&quot;&gt;\n&lt;/span&gt;\n&lt;/span&gt;\n&lt;/div&gt;\n&lt;div id=&quot;__grid1-wrapperfor-__xmlview3--truckNumber&quot; class=&quot;sapUiRespGridSpanL2 sapUiRespGridSpanM3 sapUiRespGridSpanS6 sapUiRespGridSpanXL2&quot;&gt;\n&lt;div id=&quot;__xmlview3--truckNumber&quot; data-sap-ui=&quot;__xmlview3--truckNumber&quot; class=&quot;sapMInputBase sapMInputBaseHeightMargin sapMInput DCA-FormField&quot; style=&quot;width: 100%;&quot;&gt;&lt;div id=&quot;__xmlview3--truckNumber-content&quot; class=&quot;sapMInputBaseContentWrapper&quot; style=&quot;width: 100%;&quot;&gt;\n    &lt;input id=&quot;__xmlview3--truckNumber-inner&quot; value=&quot;&quot; type=&quot;text&quot; autocomplete=&quot;off&quot; class=&quot;sapMInputBaseInner&quot;&gt;\n        &lt;/div&gt;\n&lt;/div&gt;\n&lt;/div&gt;\n</code></pre>\n<p>Earlier Site was Using Label ID instead of BDI id and my script was working very Fine</p>\n<p>My Requirement is to change the input id attributes</p>\n<p>My earlier Code:-</p>\n<pre><code>    $(&quot;label:contains('Truck No')&quot;).parent().next().find('input').attr({\n        maxlength: &quot;10&quot;,\n        Autocomplete: &quot;OFF&quot;,\n        list: &quot;KASHIPUR&quot;,\n        Placeholder: &quot;TRUCK NUMBER&quot;,\n        autocapitalize:&quot;ON&quot;\n        }).after('&lt;Datalist ID=KASHIPUR&gt;&lt;/Datalist&gt;');\n</code></pre>\n<p>It stopped working after they changed Label ID to BDI ID</p>\n<p>INPUT ID is variable so cannot use input ID</p>\n<p>Pls Help.</p>\n"},{"tags":["java","json","resultset"],"comments":[{"owner":{"account_id":7748730,"reputation":1941,"user_id":8027026,"display_name":"Paul Benn"},"score":3,"creation_date":1528799416,"post_id":50814792,"comment_id":88634719,"body_markdown":"A ResultSet is a collection of columns, so [getString(...)](https://docs.oracle.com/javase/8/docs/api/java/sql/ResultSet.html#getString-java.lang.String-) will act only upon one column.","body":"A ResultSet is a collection of columns, so <a href=\"https://docs.oracle.com/javase/8/docs/api/java/sql/ResultSet.html#getString-java.lang.String-\" rel=\"nofollow noreferrer\">getString(...)</a> will act only upon one column."},{"owner":{"account_id":6617165,"reputation":652,"user_id":5147262,"accept_rate":78,"display_name":"Eng7"},"score":1,"creation_date":1528799475,"post_id":50814792,"comment_id":88634752,"body_markdown":"@PaulBenn so how do I return all the columns without mentioning them one by one?","body":"@PaulBenn so how do I return all the columns without mentioning them one by one?"},{"owner":{"account_id":7748730,"reputation":1941,"user_id":8027026,"display_name":"Paul Benn"},"score":2,"creation_date":1528799665,"post_id":50814792,"comment_id":88634861,"body_markdown":"Question [24943894](https://stackoverflow.com/questions/24943894) already addresses this. It&#39;s always good to look through the [documentation](https://docs.oracle.com/javase/8/docs/api/java/sql/ResultSet.html) before asking questions like this too - see the [getMetadata()](https://docs.oracle.com/javase/8/docs/api/java/sql/ResultSet.html#getMetaData--) method.","body":"Question <a href=\"https://stackoverflow.com/questions/24943894\">24943894</a> already addresses this. It&#39;s always good to look through the <a href=\"https://docs.oracle.com/javase/8/docs/api/java/sql/ResultSet.html\" rel=\"nofollow noreferrer\">documentation</a> before asking questions like this too - see the <a href=\"https://docs.oracle.com/javase/8/docs/api/java/sql/ResultSet.html#getMetaData--\" rel=\"nofollow noreferrer\">getMetadata()</a> method."},{"owner":{"account_id":4777913,"reputation":2557,"user_id":3860531,"display_name":"Sumesh TG"},"score":0,"creation_date":1529575095,"post_id":50814792,"comment_id":88927607,"body_markdown":"String s = rs.getString(&quot;*&quot;); this won&#39;t work,You have to set variebles as much of database table fields otherwise use java POJO classes","body":"String s = rs.getString(&quot;*&quot;); this won&#39;t work,You have to set variebles as much of database table fields otherwise use java POJO classes"}],"answers":[{"tags":[],"owner":{"account_id":7748730,"reputation":1941,"user_id":8027026,"display_name":"Paul Benn"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1528800087,"creation_date":1528800087,"answer_id":50815211,"question_id":50814792,"body_markdown":"The problem here is not the conversion to JSON (which is already addressed in [this question][1] you link in your post) but the way you are calling the ResultSet. Looking through its [documentation][2], we can see the `getString` method can take either a [column index][3] or a [column label][4], but mentions nothing about wildcard searches such as `*`. If you don&#39;t know anything about the columns in the database, you can use the [getMetadata()][5] method to obtain information about the columns (including the column names).\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/6514876/most-efficient-conversion-of-resultset-to-json\r\n  [2]: https://docs.oracle.com/javase/8/docs/api/java/sql/ResultSet.html\r\n  [3]: https://docs.oracle.com/javase/8/docs/api/java/sql/ResultSet.html#getString-int-\r\n  [4]: https://docs.oracle.com/javase/8/docs/api/java/sql/ResultSet.html#getString-java.lang.String-\r\n  [5]: https://docs.oracle.com/javase/8/docs/api/java/sql/ResultSet.html#getMetaData--","title":"Java: Query ResultSet to JSON","body":"<p>The problem here is not the conversion to JSON (which is already addressed in <a href=\"https://stackoverflow.com/questions/6514876/most-efficient-conversion-of-resultset-to-json\">this question</a> you link in your post) but the way you are calling the ResultSet. Looking through its <a href=\"https://docs.oracle.com/javase/8/docs/api/java/sql/ResultSet.html\" rel=\"nofollow noreferrer\">documentation</a>, we can see the <code>getString</code> method can take either a <a href=\"https://docs.oracle.com/javase/8/docs/api/java/sql/ResultSet.html#getString-int-\" rel=\"nofollow noreferrer\">column index</a> or a <a href=\"https://docs.oracle.com/javase/8/docs/api/java/sql/ResultSet.html#getString-java.lang.String-\" rel=\"nofollow noreferrer\">column label</a>, but mentions nothing about wildcard searches such as <code>*</code>. If you don't know anything about the columns in the database, you can use the <a href=\"https://docs.oracle.com/javase/8/docs/api/java/sql/ResultSet.html#getMetaData--\" rel=\"nofollow noreferrer\">getMetadata()</a> method to obtain information about the columns (including the column names).</p>\n"},{"tags":[],"owner":{"account_id":11583471,"reputation":17797,"user_id":8486518,"display_name":"Mạnh Quyết Nguyễn"},"down_vote_count":0,"up_vote_count":8,"is_accepted":true,"score":8,"last_activity_date":1566524730,"creation_date":1528974348,"answer_id":50856063,"question_id":50814792,"body_markdown":"To output JSON, you want to accumulate your data into a `List&lt;Map&lt;String, Object&gt;&gt;` first. \r\n\r\nUse `ResultSetMetaData` to get the column count and column name.\r\n\r\n    List&lt;Map&lt;String, Object&gt;&gt; rows = new ArrayList&lt;&gt;();\r\n    ResultSetMetaData rsmd = rs.getMetaData();\r\n    int columnCount = rsmd.getColumnCount();\r\n    \r\n    while (rs.next()) {\r\n          // Represent a row in DB. Key: Column name, Value: Column value\r\n          Map&lt;String, Object&gt; row = new HashMap&lt;&gt;();\r\n          for (int i = 1; i &lt;= columnCount; i++) {\r\n               // Note that the index is 1-based\r\n               String colName = rsmd.getColumnName(i);\r\n               Object colVal = rs.getObject(i);\r\n               row.put(colName, colVal);\r\n          }\r\n          rows.add(row);\r\n    }\r\n    \r\n    // Write the list of rows to output\r\n    // Recommend to use jackson-ObjectMapper to streaming json directly to outputstream:\r\n    response.setContentType(&quot;application/json&quot;);\r\n    response.setCharacterEncoding(&quot;UTF-8&quot;);\r\n    ObjectMapper objectMapper = new ObjectMapper();\r\n    objectMapper.writeValue(response.getOutputStream(), rows);\r\n\r\nTo use Jackson ObjectMapper, add dependency to your project:\r\n\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\r\n        &lt;artifactId&gt;jackson-databind&lt;/artifactId&gt;\r\n        &lt;version&gt;2.9.4&lt;/version&gt;\r\n    &lt;/dependency&gt;","title":"Java: Query ResultSet to JSON","body":"<p>To output JSON, you want to accumulate your data into a <code>List&lt;Map&lt;String, Object&gt;&gt;</code> first. </p>\n\n<p>Use <code>ResultSetMetaData</code> to get the column count and column name.</p>\n\n<pre><code>List&lt;Map&lt;String, Object&gt;&gt; rows = new ArrayList&lt;&gt;();\nResultSetMetaData rsmd = rs.getMetaData();\nint columnCount = rsmd.getColumnCount();\n\nwhile (rs.next()) {\n      // Represent a row in DB. Key: Column name, Value: Column value\n      Map&lt;String, Object&gt; row = new HashMap&lt;&gt;();\n      for (int i = 1; i &lt;= columnCount; i++) {\n           // Note that the index is 1-based\n           String colName = rsmd.getColumnName(i);\n           Object colVal = rs.getObject(i);\n           row.put(colName, colVal);\n      }\n      rows.add(row);\n}\n\n// Write the list of rows to output\n// Recommend to use jackson-ObjectMapper to streaming json directly to outputstream:\nresponse.setContentType(\"application/json\");\nresponse.setCharacterEncoding(\"UTF-8\");\nObjectMapper objectMapper = new ObjectMapper();\nobjectMapper.writeValue(response.getOutputStream(), rows);\n</code></pre>\n\n<p>To use Jackson ObjectMapper, add dependency to your project:</p>\n\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\n    &lt;artifactId&gt;jackson-databind&lt;/artifactId&gt;\n    &lt;version&gt;2.9.4&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":207965,"reputation":3704,"user_id":458157,"accept_rate":75,"display_name":"gouessej"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1657096756,"creation_date":1657096756,"answer_id":72880334,"question_id":50814792,"body_markdown":"I had the same problem and I wrote a [message body writer][1] to solve it. Naively passing the result set to Jakarta JSON bind API doesn&#39;t work:\r\n\r\n&gt; jakarta.json.bind.JsonbException: Unable to serialize property\r\n&gt; &#39;creator&#39; from\r\n&gt; oracle.ucp.jdbc.proxy.oracle$1ucp$1jdbc$1proxy$1oracle$1ResultSetProxy$2oracle$1jdbc$1internal$1OracleResultSet$$$Proxy\r\n\r\nIt&#39;s database agnostic but extendable and tested with Oracle (&gt;= 19) and PostgreSQL. There are many pitfalls to avoid, I don&#39;t expect the accepted solution to work flawlessly, especially with Oracle. ResultSet.getObject(int) and ResultSet.getObject(String) may return objects that can&#39;t be directly serialized because they aren&#39;t Java beans. Keep in mind that Paul Benn&#39;s answer is still valid.\r\n\r\nN.B: **The source code is under GPL**. I use the metadata of the result set to get the columns, I loop on the rows, I convert each value into something that can be passed to Jakarta JSON Processing. It requires a recent JDBC driver to have a correct management of dates and times as some bug fixes and features implemented this year affects their conversion. If you have to (re)implement such a tool, stay away from ResultSet.getObject() when you can or your source code will end up depending a lot on changing and potentially buggy classes in Oracle JDBC driver (ResultSetMetaData.getColumnClassName() returns the wrong class name for FLOAT, &quot;java.lang.Double&quot; instead of &quot;java.math.BigDecimal&quot;).\r\n\r\n\r\n  [1]: https://sourceforge.net/p/red-feed-aggregator/code/ci/master/tree/src/main/java/fr/gouesse/julien/jaxrs/JsonResultSetMessageBodyWriter.java","title":"Java: Query ResultSet to JSON","body":"<p>I had the same problem and I wrote a <a href=\"https://sourceforge.net/p/red-feed-aggregator/code/ci/master/tree/src/main/java/fr/gouesse/julien/jaxrs/JsonResultSetMessageBodyWriter.java\" rel=\"nofollow noreferrer\">message body writer</a> to solve it. Naively passing the result set to Jakarta JSON bind API doesn't work:</p>\n<blockquote>\n<p>jakarta.json.bind.JsonbException: Unable to serialize property\n'creator' from\noracle.ucp.jdbc.proxy.oracle$1ucp$1jdbc$1proxy$1oracle$1ResultSetProxy$2oracle$1jdbc$1internal$1OracleResultSet$$$Proxy</p>\n</blockquote>\n<p>It's database agnostic but extendable and tested with Oracle (&gt;= 19) and PostgreSQL. There are many pitfalls to avoid, I don't expect the accepted solution to work flawlessly, especially with Oracle. ResultSet.getObject(int) and ResultSet.getObject(String) may return objects that can't be directly serialized because they aren't Java beans. Keep in mind that Paul Benn's answer is still valid.</p>\n<p>N.B: <strong>The source code is under GPL</strong>. I use the metadata of the result set to get the columns, I loop on the rows, I convert each value into something that can be passed to Jakarta JSON Processing. It requires a recent JDBC driver to have a correct management of dates and times as some bug fixes and features implemented this year affects their conversion. If you have to (re)implement such a tool, stay away from ResultSet.getObject() when you can or your source code will end up depending a lot on changing and potentially buggy classes in Oracle JDBC driver (ResultSetMetaData.getColumnClassName() returns the wrong class name for FLOAT, &quot;java.lang.Double&quot; instead of &quot;java.math.BigDecimal&quot;).</p>\n"},{"tags":[],"owner":{"account_id":247217,"reputation":213455,"user_id":521799,"accept_rate":89,"display_name":"Lukas Eder"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1661437248,"creation_date":1661437248,"answer_id":73489200,"question_id":50814792,"body_markdown":"### Oracle / JDBC only solution\r\n\r\nIf you want to stick with JDBC, then you can let Oracle database do the work for you and just use the [useful `JSON_OBJECT(*)` syntax][1]:\r\n\r\n```sql\r\nSELECT JSON_OBJECT(*) FROM table4 WHERE id = &#39;5&#39;\r\n```\r\n\r\nFor example:\r\n\r\n```sql\r\nSELECT JSON_OBJECT(*) FROM v$version;\r\n```\r\n\r\nProduces:\r\n\r\n```json\r\n{\r\n  &quot;BANNER&quot;:&quot;Oracle Database 21c Express Edition Release 21.0.0.0.0 - Production&quot;,\r\n  &quot;BANNER_FULL&quot;:&quot;Oracle Database 21c Express Edition Release 21.0.0.0.0 - Production\\nVersion 21.3.0.0.0&quot;,\r\n  &quot;BANNER_LEGACY&quot;:&quot;Oracle Database 21c Express Edition Release 21.0.0.0.0 - Production&quot;,\r\n  &quot;CON_ID&quot;:0\r\n}\r\n```\r\n\r\n### A solution using third parties\r\n\r\nIf using a third party library is an option for you, you could use [jOOQ][2], which has a variety of JSON export features, including:\r\n\r\n- [Native SQL/JSON support][3]\r\n- [Export result sets to JSON][4]\r\n\r\nYou can also use it only for the JDBC `ResultSet` to JSON translation, e.g.:\r\n\r\n```java\r\ntry (ResultSet rs = stmt.executeQuery(&quot;SELECT * FROM table4 where ID = &#39;5&#39;&quot;)) {\r\n    String json = ctx.fetch(rs).formatJSON();\r\n}\r\n```\r\n\r\nDisclaimer: I work for the company behind jOOQ\r\n\r\n\r\n  [1]: https://docs.oracle.com/en/database/oracle/oracle-database/21/sqlrf/JSON_OBJECT.html\r\n  [2]: https://www.jooq.org\r\n  [3]: https://www.jooq.org/doc/latest/manual/sql-building/column-expressions/json-functions/\r\n  [4]: https://www.jooq.org/doc/latest/manual/sql-execution/exporting/exporting-json/","title":"Java: Query ResultSet to JSON","body":"<h3>Oracle / JDBC only solution</h3>\n<p>If you want to stick with JDBC, then you can let Oracle database do the work for you and just use the <a href=\"https://docs.oracle.com/en/database/oracle/oracle-database/21/sqlrf/JSON_OBJECT.html\" rel=\"nofollow noreferrer\">useful <code>JSON_OBJECT(*)</code> syntax</a>:</p>\n<pre class=\"lang-sql prettyprint-override\"><code>SELECT JSON_OBJECT(*) FROM table4 WHERE id = '5'\n</code></pre>\n<p>For example:</p>\n<pre class=\"lang-sql prettyprint-override\"><code>SELECT JSON_OBJECT(*) FROM v$version;\n</code></pre>\n<p>Produces:</p>\n<pre class=\"lang-json prettyprint-override\"><code>{\n  &quot;BANNER&quot;:&quot;Oracle Database 21c Express Edition Release 21.0.0.0.0 - Production&quot;,\n  &quot;BANNER_FULL&quot;:&quot;Oracle Database 21c Express Edition Release 21.0.0.0.0 - Production\\nVersion 21.3.0.0.0&quot;,\n  &quot;BANNER_LEGACY&quot;:&quot;Oracle Database 21c Express Edition Release 21.0.0.0.0 - Production&quot;,\n  &quot;CON_ID&quot;:0\n}\n</code></pre>\n<h3>A solution using third parties</h3>\n<p>If using a third party library is an option for you, you could use <a href=\"https://www.jooq.org\" rel=\"nofollow noreferrer\">jOOQ</a>, which has a variety of JSON export features, including:</p>\n<ul>\n<li><a href=\"https://www.jooq.org/doc/latest/manual/sql-building/column-expressions/json-functions/\" rel=\"nofollow noreferrer\">Native SQL/JSON support</a></li>\n<li><a href=\"https://www.jooq.org/doc/latest/manual/sql-execution/exporting/exporting-json/\" rel=\"nofollow noreferrer\">Export result sets to JSON</a></li>\n</ul>\n<p>You can also use it only for the JDBC <code>ResultSet</code> to JSON translation, e.g.:</p>\n<pre class=\"lang-java prettyprint-override\"><code>try (ResultSet rs = stmt.executeQuery(&quot;SELECT * FROM table4 where ID = '5'&quot;)) {\n    String json = ctx.fetch(rs).formatJSON();\n}\n</code></pre>\n<p>Disclaimer: I work for the company behind jOOQ</p>\n"}],"owner":{"account_id":6617165,"reputation":652,"user_id":5147262,"accept_rate":78,"display_name":"Eng7"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":7524,"favorite_count":0,"down_vote_count":1,"up_vote_count":3,"accepted_answer_id":50856063,"answer_count":4,"score":2,"last_activity_date":1661437248,"creation_date":1528798825,"question_id":50814792,"body_markdown":"Query to Oracle DB being sent via following code and supposed to return the query result as `JSON`:\r\n\r\n\t\tConnection conn ;\r\n\t\ttry {\r\n\t\t\t\r\n\t\t\tClass.forName(&quot;oracle.jdbc.driver.OracleDriver&quot;); \r\n\t\t\tString url = &quot;jdbc:oracle:thin:@localhost:1521:dbname&quot;;\t\t\r\n\t\t\tconn = DriverManager.getConnection(url,&quot;username&quot;,&quot;pwd&quot;);  \r\n\t\t    \r\n\t\t    Statement stmt = conn.createStatement();\r\n\t\t    ResultSet rs = stmt.executeQuery(&quot;SELECT * FROM table4 where ID = &#39;5&#39;&quot;);\r\n\r\n\t\t   \r\n\t\t    while (rs.next()) {\r\n\t\t        String s = rs.getString(&quot;*&quot;);\r\n\t\t\t\tresponse.setContentType(&quot;application/json&quot;);\r\n\t\t\t\tresponse.setCharacterEncoding(&quot;UTF-8&quot;);\r\n\t\t\t\tresponse.getWriter().write(s);\r\n\t\t        \r\n\t\t    }\r\n\t\t\r\n\t\t    conn.close();\r\n\r\n\r\n\t\t} catch (Exception e) {\r\n\t\t\t// TODO Auto-generated catch block\r\n\t\t\te.printStackTrace();\r\n\t\t} \r\n\r\nHowever, the value of `String s` is always null. \r\n\r\nI&#39;ve been to the solution [here][1] but it doesn&#39;t work for selecting `*` from the table. \r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/6514876/most-efficient-conversion-of-resultset-to-json","title":"Java: Query ResultSet to JSON","body":"<p>Query to Oracle DB being sent via following code and supposed to return the query result as <code>JSON</code>:</p>\n\n<pre><code>    Connection conn ;\n    try {\n\n        Class.forName(\"oracle.jdbc.driver.OracleDriver\"); \n        String url = \"jdbc:oracle:thin:@localhost:1521:dbname\";     \n        conn = DriverManager.getConnection(url,\"username\",\"pwd\");  \n\n        Statement stmt = conn.createStatement();\n        ResultSet rs = stmt.executeQuery(\"SELECT * FROM table4 where ID = '5'\");\n\n\n        while (rs.next()) {\n            String s = rs.getString(\"*\");\n            response.setContentType(\"application/json\");\n            response.setCharacterEncoding(\"UTF-8\");\n            response.getWriter().write(s);\n\n        }\n\n        conn.close();\n\n\n    } catch (Exception e) {\n        // TODO Auto-generated catch block\n        e.printStackTrace();\n    } \n</code></pre>\n\n<p>However, the value of <code>String s</code> is always null. </p>\n\n<p>I've been to the solution <a href=\"https://stackoverflow.com/questions/6514876/most-efficient-conversion-of-resultset-to-json\">here</a> but it doesn't work for selecting <code>*</code> from the table. </p>\n"},{"tags":["java","spring-boot","spring-kafka"],"answers":[{"tags":[],"owner":{"account_id":1288095,"reputation":169326,"user_id":1240763,"display_name":"Gary Russell"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1661437046,"creation_date":1661437046,"answer_id":73489157,"question_id":73479368,"body_markdown":"Boot does not automatically detect the customizer bean, you have to wire it into the container factory yourself.\r\n\r\n```java\r\n@Bean\r\nContainerCustomizer&lt;String, Message, ConcurrentMessageListenerContainer&lt;String, Message&gt;&gt; containerCustomizer(\r\n\t\tConcurrentKafkaListenerContainerFactory&lt;String, Message&gt; factory) {\r\n\r\n\tContainerCustomizer&lt;String, Message, ConcurrentMessageListenerContainer&lt;String, Message&gt;&gt; cust = container -&gt; {\r\n\t\tcontainer.getContainerProperties().setAuthExceptionRetryInterval(Duration.ofMillis(500));\r\n\t};\r\n\tfactory.setContainerCustomizer(cust);\r\n\treturn cust;\r\n}\r\n```","title":"Spring boot Kafka cannot use ContainerCustomizer to set authExceptionRetryInterval","body":"<p>Boot does not automatically detect the customizer bean, you have to wire it into the container factory yourself.</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Bean\nContainerCustomizer&lt;String, Message, ConcurrentMessageListenerContainer&lt;String, Message&gt;&gt; containerCustomizer(\n        ConcurrentKafkaListenerContainerFactory&lt;String, Message&gt; factory) {\n\n    ContainerCustomizer&lt;String, Message, ConcurrentMessageListenerContainer&lt;String, Message&gt;&gt; cust = container -&gt; {\n        container.getContainerProperties().setAuthExceptionRetryInterval(Duration.ofMillis(500));\n    };\n    factory.setContainerCustomizer(cust);\n    return cust;\n}\n</code></pre>\n"}],"owner":{"account_id":6390592,"reputation":16008,"user_id":4956907,"display_name":"Michał Krzywański"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1116,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":73489157,"answer_count":1,"score":0,"last_activity_date":1661437046,"creation_date":1661374502,"question_id":73479368,"body_markdown":"I would like to set [`authExceptionRetryInterval`](https://docs.spring.io/spring-kafka/api/org/springframework/kafka/listener/ConsumerProperties.html#setAuthExceptionRetryInterval(java.time.Duration)) to some value so that my kafka listener is not destroyed on random auth failures.\r\n\r\nI have a simple listener class :\r\n````\r\n@Component\r\nclass Listener {\r\n\r\n    @KafkaListener(topics = &quot;${topic}&quot;)\r\n    void consume(ConsumerRecord&lt;String, Message&gt; record) {\r\n       System.out.println(record);\r\n    }\r\n\r\n}\r\n````\r\nAnd configuration which contains instance of `ContainerCustomizer` :\r\n````\r\n@Bean\r\npublic ContainerCustomizer&lt;String, Message, AbstractMessageListenerContainer&lt;String, Message&gt;&gt; containerCustomizer() {\r\n    return container -&gt; {\r\n            container.getContainerProperties().setAuthExceptionRetryInterval(Duration.ofMillis(500));\r\n    };\r\n}\r\n````\r\nSpring-kafka version is 2.8.8.\r\n\r\n\r\nHowever the problem is that this customizer is not even called (even though it is created in the context) and the auth exception timeout is not being set.\r\n\r\nSo the question is how to use `ContainerCustomizer` to customize needed properties or if this class is not suitable for it - how to set `authExceptionRetryInterval` in different way?","title":"Spring boot Kafka cannot use ContainerCustomizer to set authExceptionRetryInterval","body":"<p>I would like to set <a href=\"https://docs.spring.io/spring-kafka/api/org/springframework/kafka/listener/ConsumerProperties.html#setAuthExceptionRetryInterval(java.time.Duration)\" rel=\"nofollow noreferrer\"><code>authExceptionRetryInterval</code></a> to some value so that my kafka listener is not destroyed on random auth failures.</p>\n<p>I have a simple listener class :</p>\n<pre><code>@Component\nclass Listener {\n\n    @KafkaListener(topics = &quot;${topic}&quot;)\n    void consume(ConsumerRecord&lt;String, Message&gt; record) {\n       System.out.println(record);\n    }\n\n}\n</code></pre>\n<p>And configuration which contains instance of <code>ContainerCustomizer</code> :</p>\n<pre><code>@Bean\npublic ContainerCustomizer&lt;String, Message, AbstractMessageListenerContainer&lt;String, Message&gt;&gt; containerCustomizer() {\n    return container -&gt; {\n            container.getContainerProperties().setAuthExceptionRetryInterval(Duration.ofMillis(500));\n    };\n}\n</code></pre>\n<p>Spring-kafka version is 2.8.8.</p>\n<p>However the problem is that this customizer is not even called (even though it is created in the context) and the auth exception timeout is not being set.</p>\n<p>So the question is how to use <code>ContainerCustomizer</code> to customize needed properties or if this class is not suitable for it - how to set <code>authExceptionRetryInterval</code> in different way?</p>\n"},{"tags":["java","spring","spring-boot","jdbc"],"answers":[{"tags":[],"owner":{"account_id":14625236,"reputation":56,"user_id":10562793,"display_name":"VoidPointer"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1660582881,"creation_date":1660582528,"answer_id":73364108,"question_id":73363676,"body_markdown":"First of all, if you&#39;re working with raw JDBC API, you should always use [`PreparedStatement`][1]. \r\n\r\nYes, you&#39;ll just have to wrap the code with try-catch block at some point, though it&#39;s a good practice to catch exceptions just right away or at the point where it&#39;s logically suits. In case of SQL queries, you actually *should* wrap all of them into some `Service` class that will give you an access to modify your database objects without running through JDBC API every time. For example:\r\n\r\n```\r\npublic class UserService {\r\n    private static final String CREATE_USER_SQL = &quot;...&quot;;\r\n    private final Connection jdbcConnection;\r\n\r\n    public @Nullable User createUser(final String name) {\r\n        try (final PreparedStatement stmt = jdbcConnection.prepareStatement(CREATE_USER_SQL)) {\r\n            jdbcConnection.setAutoCommit(false);\r\n            stmt.setString(1, name);\r\n            stmt.executeQuery();\r\n            jdbcConnection.commit();\r\n            return new User(name);\r\n        } catch (final SQLException createException) {\r\n            System.out.printf(&quot;User CREATE failed: %s\\n&quot;, createException.getMessage());\r\n            try {\r\n                jdbcConnection.rollback();\r\n            } catch (final SQLException rollbackException) {\r\n                System.out.printf(&quot;Rollback failed: %s\\n&quot;, rollbackException.getMessage());\r\n            }\r\n            return null;\r\n        }\r\n    }\r\n}\r\n```\r\n\r\nThis solves two problems right away:\r\n\r\n 1. You won&#39;t need to put boilerplate JDBC code everywhere;\r\n\r\n 2. It will log any JDBC errors right away, so you won&#39;t need to go through a complex debugging process.\r\n\r\n  [1]: https://docs.oracle.com/javase/8/docs/api/java/sql/PreparedStatement.html","title":"Should Java JDBC Select statements always be in a Try-Catch block?","body":"<p>First of all, if you're working with raw JDBC API, you should always use <a href=\"https://docs.oracle.com/javase/8/docs/api/java/sql/PreparedStatement.html\" rel=\"nofollow noreferrer\"><code>PreparedStatement</code></a>.</p>\n<p>Yes, you'll just have to wrap the code with try-catch block at some point, though it's a good practice to catch exceptions just right away or at the point where it's logically suits. In case of SQL queries, you actually <em>should</em> wrap all of them into some <code>Service</code> class that will give you an access to modify your database objects without running through JDBC API every time. For example:</p>\n<pre><code>public class UserService {\n    private static final String CREATE_USER_SQL = &quot;...&quot;;\n    private final Connection jdbcConnection;\n\n    public @Nullable User createUser(final String name) {\n        try (final PreparedStatement stmt = jdbcConnection.prepareStatement(CREATE_USER_SQL)) {\n            jdbcConnection.setAutoCommit(false);\n            stmt.setString(1, name);\n            stmt.executeQuery();\n            jdbcConnection.commit();\n            return new User(name);\n        } catch (final SQLException createException) {\n            System.out.printf(&quot;User CREATE failed: %s\\n&quot;, createException.getMessage());\n            try {\n                jdbcConnection.rollback();\n            } catch (final SQLException rollbackException) {\n                System.out.printf(&quot;Rollback failed: %s\\n&quot;, rollbackException.getMessage());\n            }\n            return null;\n        }\n    }\n}\n</code></pre>\n<p>This solves two problems right away:</p>\n<ol>\n<li><p>You won't need to put boilerplate JDBC code everywhere;</p>\n</li>\n<li><p>It will log any JDBC errors right away, so you won't need to go through a complex debugging process.</p>\n</li>\n</ol>\n"},{"tags":[],"owner":{"account_id":7768515,"reputation":1636,"user_id":7972621,"display_name":"Ankit Sharma"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1660582584,"creation_date":1660582584,"answer_id":73364121,"question_id":73363676,"body_markdown":"Try-catch for DB Layer code is important if you&#39;re querying with JDBC. \r\n\r\nThink about, **what if the connection broke? Or what if Database crashed ? Or some other unfortunate scenario comes up.**\r\n\r\nFor these things, I will recommend you to always keep the DB layer code within try-catch.\r\n\r\nIt&#39;s also recommended for you to have some **fallback mechanism** in-case of the above events.","title":"Should Java JDBC Select statements always be in a Try-Catch block?","body":"<p>Try-catch for DB Layer code is important if you're querying with JDBC.</p>\n<p>Think about, <strong>what if the connection broke? Or what if Database crashed ? Or some other unfortunate scenario comes up.</strong></p>\n<p>For these things, I will recommend you to always keep the DB layer code within try-catch.</p>\n<p>It's also recommended for you to have some <strong>fallback mechanism</strong> in-case of the above events.</p>\n"},{"tags":[],"owner":{"account_id":1681237,"reputation":1779,"user_id":1545425,"display_name":"Luca Tampellini"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1660931660,"creation_date":1660931660,"answer_id":73420576,"question_id":73363676,"body_markdown":"Brief explanation:\r\n\r\n 1. First of all any resource involving I/O access (database access is I/O access) must always be closed or it will cause a **memory leak**.\r\n 2. Secondly, it is better to rely on `try-with-resources` to close any resource as having to call the `.close()` method manually is always exposed to the risk of not being effectively executed at runtime due to a potential `Exception`/`RuntimeException`/`Error` getting thrown beforehand; even closing the resource in a `finally` method is not preferable as such block executes at a different phase compared to the `try-with-resources` - auto closure of try-with-resources happens at the end of the `try` block, while `finally` executes at the end of all `try`/`catch` block - , in addition to the basic problem that it is not a secure solution as a `throw` might happen even inside the `finally` block, preventing it from completing correctly.\r\n\r\nThis said, you always need to close: \r\n\r\n 1. `Statement`/`PreparedStatement`/`CallableStatement`\r\n 2. any `ResultSet`\r\n 3. the whole `Connection` when you don&#39;t need DB access anymore","title":"Should Java JDBC Select statements always be in a Try-Catch block?","body":"<p>Brief explanation:</p>\n<ol>\n<li>First of all any resource involving I/O access (database access is I/O access) must always be closed or it will cause a <strong>memory leak</strong>.</li>\n<li>Secondly, it is better to rely on <code>try-with-resources</code> to close any resource as having to call the <code>.close()</code> method manually is always exposed to the risk of not being effectively executed at runtime due to a potential <code>Exception</code>/<code>RuntimeException</code>/<code>Error</code> getting thrown beforehand; even closing the resource in a <code>finally</code> method is not preferable as such block executes at a different phase compared to the <code>try-with-resources</code> - auto closure of try-with-resources happens at the end of the <code>try</code> block, while <code>finally</code> executes at the end of all <code>try</code>/<code>catch</code> block - , in addition to the basic problem that it is not a secure solution as a <code>throw</code> might happen even inside the <code>finally</code> block, preventing it from completing correctly.</li>\n</ol>\n<p>This said, you always need to close:</p>\n<ol>\n<li><code>Statement</code>/<code>PreparedStatement</code>/<code>CallableStatement</code></li>\n<li>any <code>ResultSet</code></li>\n<li>the whole <code>Connection</code> when you don't need DB access anymore</li>\n</ol>\n"},{"tags":[],"owner":{"account_id":75804,"reputation":94815,"user_id":217324,"accept_rate":96,"display_name":"Nathan Hughes"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1661437029,"creation_date":1660933231,"answer_id":73420824,"question_id":73363676,"body_markdown":"Since this question is tagged with `spring-boot` and you are using JdbcTemplate, I&#39;m giving you a Spring-specific answer.\r\n\r\nOne of the points of Spring is to avoid boilerplate from developers. If you find yourself adding things repetitively, like putting try-catch blocks around code executing DML, that&#39;s cause for suspecting you&#39;re not doing something right. Adding your own try-catches in code using Spring isn&#39;t always wrong, but it usually is.\r\n\r\nIn the Spring reference doc https://docs.spring.io/spring-framework/docs/current/reference/html/data-access.html#jdbc there is a table showing what is the developer&#39;s responsibility and what is Spring&#39;s responsibility. Processing exceptions, handling the transactions, and closing jdbc resources are all shown as being Spring&#39;s responsibility. \r\n\r\nSpringJdbc takes care of a lot of things for you. It handles closing JDBC resources and returning connections to their pool, and converts exceptions from SQLException to a hierarchy of unchecked DataAccessExceptions. In Spring unchecked exceptions thrown from a method wrapped in a transactional proxy cause the transaction to get rolled back. If you do your own try-catch logic you can prevent rollback from occurring when it needs to, if you catch the exception and the proxy never sees it. Adding try-catch logic can cause problems if you don&#39;t understand what Spring is doing. \r\n\r\nExceptions do need to be caught somewhere. In a Spring web application, you can set up an exception handler that catches anything thrown from the controller layer, so that you can log it. That way the action in progress gets broken off cleanly, the current transaction rolls back, and the exception gets handled in a consistent way. If you have other entry points, such as reading messages from a queue, those will need their own exception handler. \r\n\r\nExceptions are thrown in order to escape the current context, which isn&#39;t able to deal with the problem, and relocate control to somewhere safe. For most exceptions coming from JDBC, they aren&#39;t anything you can fix, you just want to let it be thrown, let the current transaction rollback, then let the central exception handler catch and log it.\r\n \r\n\r\n\r\n\r\n\r\n","title":"Should Java JDBC Select statements always be in a Try-Catch block?","body":"<p>Since this question is tagged with <code>spring-boot</code> and you are using JdbcTemplate, I'm giving you a Spring-specific answer.</p>\n<p>One of the points of Spring is to avoid boilerplate from developers. If you find yourself adding things repetitively, like putting try-catch blocks around code executing DML, that's cause for suspecting you're not doing something right. Adding your own try-catches in code using Spring isn't always wrong, but it usually is.</p>\n<p>In the Spring reference doc <a href=\"https://docs.spring.io/spring-framework/docs/current/reference/html/data-access.html#jdbc\" rel=\"nofollow noreferrer\">https://docs.spring.io/spring-framework/docs/current/reference/html/data-access.html#jdbc</a> there is a table showing what is the developer's responsibility and what is Spring's responsibility. Processing exceptions, handling the transactions, and closing jdbc resources are all shown as being Spring's responsibility.</p>\n<p>SpringJdbc takes care of a lot of things for you. It handles closing JDBC resources and returning connections to their pool, and converts exceptions from SQLException to a hierarchy of unchecked DataAccessExceptions. In Spring unchecked exceptions thrown from a method wrapped in a transactional proxy cause the transaction to get rolled back. If you do your own try-catch logic you can prevent rollback from occurring when it needs to, if you catch the exception and the proxy never sees it. Adding try-catch logic can cause problems if you don't understand what Spring is doing.</p>\n<p>Exceptions do need to be caught somewhere. In a Spring web application, you can set up an exception handler that catches anything thrown from the controller layer, so that you can log it. That way the action in progress gets broken off cleanly, the current transaction rolls back, and the exception gets handled in a consistent way. If you have other entry points, such as reading messages from a queue, those will need their own exception handler.</p>\n<p>Exceptions are thrown in order to escape the current context, which isn't able to deal with the problem, and relocate control to somewhere safe. For most exceptions coming from JDBC, they aren't anything you can fix, you just want to let it be thrown, let the current transaction rollback, then let the central exception handler catch and log it.</p>\n"},{"tags":[],"owner":{"account_id":3720263,"reputation":1076,"user_id":3095500,"display_name":"utrucceh"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1661264213,"creation_date":1661263883,"answer_id":73460296,"question_id":73363676,"body_markdown":"You should always handle it with try cactch. \r\n\r\nWhy: For example you started a connection to db then some exception happened, if you don&#39;t rollback your transaction it stay on db and performance will be decreased, and memory leak will be happen. \r\n\r\nImagine, if your connection limit is 100 and 100 exception throwed after transaction started and you didn&#39;t rollback it your system will be locked because of you can&#39;t create any new connection to your database.\r\n\r\nBut if you want an alternative for &quot;try catch finally&quot; you can use like this:\r\n\r\n    EmUtil.consEm(em -&gt; {\r\n        System.out.println(em.createNativeQuery(&quot;select * from temp&quot;).getResultList().size());\r\n    });\r\n\r\nSource code:\r\n\r\n    public final class EmUtil {\r\n    \r\n        interface EmCons {\r\n            public void cons(EntityManager em);\r\n        }\r\n    \r\n        public static void consEm(EmCons t) {\r\n            EntityManager em = null;\r\n            try {\r\n                em = getEmf().createEntityManager();\r\n                t.cons(em);\r\n            } finally {\r\n                if (em != null &amp;&amp; em.getTransaction().isActive())\r\n                    em.getTransaction().rollback();\r\n                if (em != null &amp;&amp; em.isOpen())\r\n                    em.close();\r\n            }\r\n        }\r\n    \r\n        private static EntityManagerFactory getEmf() {\r\n            //TODO\r\n        }\r\n       \r\n    }\r\n\r\n\r\n","title":"Should Java JDBC Select statements always be in a Try-Catch block?","body":"<p>You should always handle it with try cactch.</p>\n<p>Why: For example you started a connection to db then some exception happened, if you don't rollback your transaction it stay on db and performance will be decreased, and memory leak will be happen.</p>\n<p>Imagine, if your connection limit is 100 and 100 exception throwed after transaction started and you didn't rollback it your system will be locked because of you can't create any new connection to your database.</p>\n<p>But if you want an alternative for &quot;try catch finally&quot; you can use like this:</p>\n<pre><code>EmUtil.consEm(em -&gt; {\n    System.out.println(em.createNativeQuery(&quot;select * from temp&quot;).getResultList().size());\n});\n</code></pre>\n<p>Source code:</p>\n<pre><code>public final class EmUtil {\n\n    interface EmCons {\n        public void cons(EntityManager em);\n    }\n\n    public static void consEm(EmCons t) {\n        EntityManager em = null;\n        try {\n            em = getEmf().createEntityManager();\n            t.cons(em);\n        } finally {\n            if (em != null &amp;&amp; em.getTransaction().isActive())\n                em.getTransaction().rollback();\n            if (em != null &amp;&amp; em.isOpen())\n                em.close();\n        }\n    }\n\n    private static EntityManagerFactory getEmf() {\n        //TODO\n    }\n   \n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2486870,"reputation":685,"user_id":2165146,"display_name":"muhammed ozbilici"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1661418642,"creation_date":1661418642,"answer_id":73484877,"question_id":73363676,"body_markdown":"Spring translates those exceptions as `DataAccessException` (for more detail [link][1]). It will be good to catch those exceptions and you can rollback with `@Transactional`.\r\n\r\n\r\n  [1]: https://docs.spring.io/spring-framework/docs/3.1.x/javadoc-api/org/springframework/dao/DataAccessException.html\r\n","title":"Should Java JDBC Select statements always be in a Try-Catch block?","body":"<p>Spring translates those exceptions as <code>DataAccessException</code> (for more detail <a href=\"https://docs.spring.io/spring-framework/docs/3.1.x/javadoc-api/org/springframework/dao/DataAccessException.html\" rel=\"nofollow noreferrer\">link</a>). It will be good to catch those exceptions and you can rollback with <code>@Transactional</code>.</p>\n"}],"owner":{"account_id":21004999,"reputation":788,"user_id":15435022,"display_name":"mattsmith5"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":760,"favorite_count":0,"down_vote_count":2,"up_vote_count":7,"accepted_answer_id":73420824,"answer_count":6,"score":5,"last_activity_date":1661437029,"creation_date":1660580098,"question_id":73363676,"body_markdown":"Is it good practice to put all Java JDBC Select statements in a try-catch block ? Currently I write most of my code without it. However, I do try-catch for insert/update/delete.\r\n\r\nNote: Currently using Sprint Boot.\r\n\r\n    String sqlQuery = &quot;Select productId, productName, productStartDate from dbo.product where productId = 5&quot;\r\n\r\n    public getProductData() {\r\n        ....\r\n        List&lt;Product&gt; productList =  namedJdbcTemplate.query(sqlQuery, new ProductMapper());\r\n","title":"Should Java JDBC Select statements always be in a Try-Catch block?","body":"<p>Is it good practice to put all Java JDBC Select statements in a try-catch block ? Currently I write most of my code without it. However, I do try-catch for insert/update/delete.</p>\n<p>Note: Currently using Sprint Boot.</p>\n<pre><code>String sqlQuery = &quot;Select productId, productName, productStartDate from dbo.product where productId = 5&quot;\n\npublic getProductData() {\n    ....\n    List&lt;Product&gt; productList =  namedJdbcTemplate.query(sqlQuery, new ProductMapper());\n</code></pre>\n"},{"tags":["java","android"],"comments":[{"owner":{"account_id":19170335,"reputation":1683,"user_id":14004200,"display_name":"Sadegh J"},"score":0,"creation_date":1661410679,"post_id":73481995,"comment_id":129766696,"body_markdown":"check this https://stackoverflow.com/questions/21724420/how-to-hide-navigation-bar-permanently-in-android-activity","body":"check this <a href=\"https://stackoverflow.com/questions/21724420/how-to-hide-navigation-bar-permanently-in-android-activity\" title=\"how to hide navigation bar permanently in android activity\">stackoverflow.com/questions/21724420/&hellip;</a>"}],"answers":[{"tags":[],"owner":{"account_id":11347613,"reputation":679,"user_id":8319640,"display_name":"Kishan Mevada"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1661406775,"creation_date":1661406775,"answer_id":73482505,"question_id":73481995,"body_markdown":"Apply this code in `onCreate()` of your activity :\r\n\r\n```\r\nif (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.R) {\r\n            if (window != null) {\r\n                window.decorView.windowInsetsController!!.hide(WindowInsets.Type.statusBars())\r\n                window.decorView.windowInsetsController!!.hide(\r\n                    WindowInsets.Type.statusBars() or WindowInsets.Type.navigationBars()\r\n                )\r\n            }\r\n        } else {\r\n            val decorView = window.decorView\r\n            val uiOptions = View.SYSTEM_UI_FLAG_FULLSCREEN or View.SYSTEM_UI_FLAG_LAYOUT_STABLE\r\n            decorView.systemUiVisibility = uiOptions\r\n        }\r\n```","title":"Completely hiding navigation bar (not only buttons) in android","body":"<p>Apply this code in <code>onCreate()</code> of your activity :</p>\n<pre><code>if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.R) {\n            if (window != null) {\n                window.decorView.windowInsetsController!!.hide(WindowInsets.Type.statusBars())\n                window.decorView.windowInsetsController!!.hide(\n                    WindowInsets.Type.statusBars() or WindowInsets.Type.navigationBars()\n                )\n            }\n        } else {\n            val decorView = window.decorView\n            val uiOptions = View.SYSTEM_UI_FLAG_FULLSCREEN or View.SYSTEM_UI_FLAG_LAYOUT_STABLE\n            decorView.systemUiVisibility = uiOptions\n        }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":26050686,"reputation":35,"user_id":19753966,"display_name":"user787878"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1661436599,"creation_date":1661436599,"answer_id":73489047,"question_id":73481995,"body_markdown":"java version:\r\n\r\n```\r\nWindowCompat.setDecorFitsSystemWindows(getWindow(), false);\r\ngetWindow().getInsetsController().hide(WindowInsetsCompat.Type.systemBars());\r\n```\r\n","title":"Completely hiding navigation bar (not only buttons) in android","body":"<p>java version:</p>\n<pre><code>WindowCompat.setDecorFitsSystemWindows(getWindow(), false);\ngetWindow().getInsetsController().hide(WindowInsetsCompat.Type.systemBars());\n</code></pre>\n"}],"owner":{"account_id":26050686,"reputation":35,"user_id":19753966,"display_name":"user787878"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":415,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":73482505,"answer_count":2,"score":0,"last_activity_date":1661436599,"creation_date":1661403029,"question_id":73481995,"body_markdown":"I am using &quot;Navigation Drawer Activity&quot; template from latest Android Studio (2021.2.1 Patch 2) as a start.\r\n\r\nHow can I hide navigation bar completely? Following code only hides the buttons but navigation bar&#39;s white background still exists.\r\n\r\n```\r\nView decorView = getWindow().getDecorView();\r\nint uiOptions = SYSTEM_UI_FLAG_LAYOUT_STABLE\r\n              | View.SYSTEM_UI_FLAG_HIDE_NAVIGATION\r\n              | View.SYSTEM_UI_FLAG_FULLSCREEN;\r\ndecorView.setSystemUiVisibility(uiOptions);\r\n```\r\n\r\nThanks.","title":"Completely hiding navigation bar (not only buttons) in android","body":"<p>I am using &quot;Navigation Drawer Activity&quot; template from latest Android Studio (2021.2.1 Patch 2) as a start.</p>\n<p>How can I hide navigation bar completely? Following code only hides the buttons but navigation bar's white background still exists.</p>\n<pre><code>View decorView = getWindow().getDecorView();\nint uiOptions = SYSTEM_UI_FLAG_LAYOUT_STABLE\n              | View.SYSTEM_UI_FLAG_HIDE_NAVIGATION\n              | View.SYSTEM_UI_FLAG_FULLSCREEN;\ndecorView.setSystemUiVisibility(uiOptions);\n</code></pre>\n<p>Thanks.</p>\n"},{"tags":["java","android","kotlin","rx-java"],"answers":[{"tags":[],"owner":{"account_id":24127,"reputation":69392,"user_id":61158,"accept_rate":98,"display_name":"akarnokd"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1661436296,"creation_date":1661436296,"answer_id":73488974,"question_id":73484472,"body_markdown":"You could use a global serialized `PublishSubject` and submit the `params` to it. Then a `concatMap` will make sure only one PrintTask.execute runs and captures the result.\r\n\r\n```java\r\nSubject&lt;Params&gt; subject = PublishSubject.create().toSerialized();\r\n\r\nsubject.observeOn(Schedulers.io())\r\n.concatMap(params -&gt; {\r\n    return PrintTask.execute(params)\r\n           .observeOn(AndroidSchedulers.mainThread())\r\n           .doOnNext(t -&gt; { response = t })\r\n           .onErrorResumeNext(e -&gt; { log(e); return Observable.empty(); });\r\n})\r\n.subscribe();\r\n\r\nfun printOrderDirect(params: Params) {\r\n  subject.onNext(params);\r\n}\r\n\r\nfun printOrderRemote(params: Params) {\r\n  subject.onNext(params);\r\n}\r\n```","title":"How to Queue/Delay a function from starting if that same function is running elsewhere","body":"<p>You could use a global serialized <code>PublishSubject</code> and submit the <code>params</code> to it. Then a <code>concatMap</code> will make sure only one PrintTask.execute runs and captures the result.</p>\n<pre class=\"lang-java prettyprint-override\"><code>Subject&lt;Params&gt; subject = PublishSubject.create().toSerialized();\n\nsubject.observeOn(Schedulers.io())\n.concatMap(params -&gt; {\n    return PrintTask.execute(params)\n           .observeOn(AndroidSchedulers.mainThread())\n           .doOnNext(t -&gt; { response = t })\n           .onErrorResumeNext(e -&gt; { log(e); return Observable.empty(); });\n})\n.subscribe();\n\nfun printOrderDirect(params: Params) {\n  subject.onNext(params);\n}\n\nfun printOrderRemote(params: Params) {\n  subject.onNext(params);\n}\n</code></pre>\n"}],"owner":{"account_id":21488262,"reputation":40,"user_id":15834499,"display_name":"hmn727"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":56,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":73488974,"answer_count":1,"score":0,"last_activity_date":1661436296,"creation_date":1661417011,"question_id":73484472,"body_markdown":"I&#39;m kinda new to threadding stuffs and want to ask how to fix this problem.\r\nThere are 3 different places to call a printing function (from a printing class).\r\n\r\nCurrent pseudo-code is like this.\r\n```kt\r\nfun printOrderDirect(params) {\r\n  PrintClass.execute(params) // using Rx\r\n    .observeOn(AndroidSchedulers.mainThread())\r\n    .subscribe(object: Subscriber&lt;Int&gt;() {\r\n      override fun onNext(t: Int) { response = t }\r\n      override fun onCompleted() {}\r\n      override fun onError(e: Throwable?) { log(e) }\r\n    })\r\n}\r\n\r\nfun printOrderRemote(params) { // called when receiving signal online\r\n  PrintClass.execute(params).observeOn(Schedulers.immediate())\r\n    .subscribe(object: Subscriber&lt;Int&gt;() {\r\n      override fun onNext(t: Int) { response = t }\r\n      override fun onCompleted() {\r\n        // Do some filtering and call another print job for online order\r\n        PrintClass.execute(params).observeOn(Schedulers.immediate())\r\n          .subscribe(object: Subscriber&lt;Int&gt;() {\r\n            override fun onNext(t: Int) { response = t }\r\n            override fun onCompleted() {}\r\n            override fun onError(e: Throwable?) { log(e) }\r\n          })\r\n      }\r\n      override fun onError(e: Throwable) { log(e) }\r\n    })\r\n}\r\n```\r\n\r\nThe PrintClass code:\r\n```kt\r\nclass PrintClass {\r\n  fun execute(params): Observable&lt;Int&gt; {\r\n    return Observable.create&lt;Int&gt; { subscriber -&gt;\r\n      // do a lot of filtering, formatting stuffs\r\n      val task = PrintTask()\r\n      task.execute().observeOn(Schedulers.immediate())\r\n        .subscribe(object: Subscriber&lt;Int&gt;() {\r\n          override fun onNext(t: Int?) {}\r\n          override fun onCompleted() {\r\n            subscriber.onNext(RESPONSE_OK)\r\n            subscriber.onCompleted()\r\n          }\r\n          override fun onError(e: Throwable) {\r\n            subscriber.onNext(RESPONSE_FAIL)\r\n            subscriber.onError(e)\r\n          }\r\n        })\r\n    }\r\n      .onBackpressureBuffer()\r\n      .subscribeOn(Schedulers.newThread())\r\n  }\r\n}\r\n```\r\nFor the last 2 places to call the print job, it&#39;s being chained so it&#39;s okay, the first task needs to be completed in order to run the other.\r\n\r\nBut in the case of many online orders coming at once (the order update is not realtime, just syncing once every 90 secs, but in that timeframe, there can be many orders filling in), or simply just direct order + 1 order online at once may cause congestions (the printing machine buffer or cache (idk how it&#39;s called) is pretty small I guess).\r\n\r\nI would like to know how to block the `PrintClass.execute()` task from running when it&#39;s already running from another call. But not like stopping it, just delay/queue it until the previous one finished.  \r\nThe printing machine dies everytime 3+ online orders coming in.\r\n\r\nI can&#39;t use Kotlin coroutines since the current codebase Kt version is super low. I tried my best to learn Rx and migrated from AsyncTask to Rx already.\r\n\r\nI&#39;ve tried using [Lock](https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/locks/Lock.html).[lock()](https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/locks/Lock.html#lock--) before starting the `PrintClass.execute()` in the two functions and Lock.[unlock()](https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/locks/Lock.html#unlock--) in `onCompleted()` but it would freeze my UI and getting ANR error if the print jobs are too long.\r\n\r\nThanks everyone in advance.\r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/locks/Lock.html#unlock--","title":"How to Queue/Delay a function from starting if that same function is running elsewhere","body":"<p>I'm kinda new to threadding stuffs and want to ask how to fix this problem.\nThere are 3 different places to call a printing function (from a printing class).</p>\n<p>Current pseudo-code is like this.</p>\n<pre><code>fun printOrderDirect(params) {\n  PrintClass.execute(params) // using Rx\n    .observeOn(AndroidSchedulers.mainThread())\n    .subscribe(object: Subscriber&lt;Int&gt;() {\n      override fun onNext(t: Int) { response = t }\n      override fun onCompleted() {}\n      override fun onError(e: Throwable?) { log(e) }\n    })\n}\n\nfun printOrderRemote(params) { // called when receiving signal online\n  PrintClass.execute(params).observeOn(Schedulers.immediate())\n    .subscribe(object: Subscriber&lt;Int&gt;() {\n      override fun onNext(t: Int) { response = t }\n      override fun onCompleted() {\n        // Do some filtering and call another print job for online order\n        PrintClass.execute(params).observeOn(Schedulers.immediate())\n          .subscribe(object: Subscriber&lt;Int&gt;() {\n            override fun onNext(t: Int) { response = t }\n            override fun onCompleted() {}\n            override fun onError(e: Throwable?) { log(e) }\n          })\n      }\n      override fun onError(e: Throwable) { log(e) }\n    })\n}\n</code></pre>\n<p>The PrintClass code:</p>\n<pre><code>class PrintClass {\n  fun execute(params): Observable&lt;Int&gt; {\n    return Observable.create&lt;Int&gt; { subscriber -&gt;\n      // do a lot of filtering, formatting stuffs\n      val task = PrintTask()\n      task.execute().observeOn(Schedulers.immediate())\n        .subscribe(object: Subscriber&lt;Int&gt;() {\n          override fun onNext(t: Int?) {}\n          override fun onCompleted() {\n            subscriber.onNext(RESPONSE_OK)\n            subscriber.onCompleted()\n          }\n          override fun onError(e: Throwable) {\n            subscriber.onNext(RESPONSE_FAIL)\n            subscriber.onError(e)\n          }\n        })\n    }\n      .onBackpressureBuffer()\n      .subscribeOn(Schedulers.newThread())\n  }\n}\n</code></pre>\n<p>For the last 2 places to call the print job, it's being chained so it's okay, the first task needs to be completed in order to run the other.</p>\n<p>But in the case of many online orders coming at once (the order update is not realtime, just syncing once every 90 secs, but in that timeframe, there can be many orders filling in), or simply just direct order + 1 order online at once may cause congestions (the printing machine buffer or cache (idk how it's called) is pretty small I guess).</p>\n<p>I would like to know how to block the <code>PrintClass.execute()</code> task from running when it's already running from another call. But not like stopping it, just delay/queue it until the previous one finished.<br />\nThe printing machine dies everytime 3+ online orders coming in.</p>\n<p>I can't use Kotlin coroutines since the current codebase Kt version is super low. I tried my best to learn Rx and migrated from AsyncTask to Rx already.</p>\n<p>I've tried using <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/locks/Lock.html\" rel=\"nofollow noreferrer\">Lock</a>.<a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/locks/Lock.html#lock--\" rel=\"nofollow noreferrer\">lock()</a> before starting the <code>PrintClass.execute()</code> in the two functions and Lock.<a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/locks/Lock.html#unlock--\" rel=\"nofollow noreferrer\">unlock()</a> in <code>onCompleted()</code> but it would freeze my UI and getting ANR error if the print jobs are too long.</p>\n<p>Thanks everyone in advance.</p>\n"},{"tags":["java","spring","spring-boot","spring-integration"],"answers":[{"tags":[],"owner":{"account_id":1288095,"reputation":169326,"user_id":1240763,"display_name":"Gary Russell"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1661436223,"creation_date":1661436223,"answer_id":73488961,"question_id":73478051,"body_markdown":"In your test case, add a `ChannelInterceptor` to the output channel, before sending the request, to examine the output.\r\n\r\n","title":"How do I test a Spring Integration Transformer?","body":"<p>In your test case, add a <code>ChannelInterceptor</code> to the output channel, before sending the request, to examine the output.</p>\n"}],"owner":{"account_id":6854156,"reputation":3,"user_id":5270341,"display_name":"Torvald Baade Bringsvor"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":104,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1661436223,"creation_date":1661365784,"question_id":73478051,"body_markdown":"I am new to Spring Integration (been using Spring before). I have made a transformer like this:\r\n\r\n    @Transformer(inputChannel = &quot;signering&quot;, outputChannel = &quot;validering&quot;)\r\n\r\nand now I want to test it. So I have done like this in my test:\r\n\r\n    @Autowired\r\n    MessageChannel signering;\r\n    \r\n    @Autowired\r\n    PollableChannel validering;\r\n\r\nWhen I invoke the transformer in my test it seems to work\r\n\r\n    signering.send(msg.build());\r\n\r\nbut I am unable to intercept the outgoing message (which is what I want). Instead it seems to go to the real bean validering and onwards. I have added a .receive call after the send call, but it gets nothing. And the Internet is not really helpful right now. What examples I find for Spring Integration testing seems to be using XML context, and they are pretty old at that. What is the current way of doing this kind of testing?\r\n\r\n","title":"How do I test a Spring Integration Transformer?","body":"<p>I am new to Spring Integration (been using Spring before). I have made a transformer like this:</p>\n<pre><code>@Transformer(inputChannel = &quot;signering&quot;, outputChannel = &quot;validering&quot;)\n</code></pre>\n<p>and now I want to test it. So I have done like this in my test:</p>\n<pre><code>@Autowired\nMessageChannel signering;\n\n@Autowired\nPollableChannel validering;\n</code></pre>\n<p>When I invoke the transformer in my test it seems to work</p>\n<pre><code>signering.send(msg.build());\n</code></pre>\n<p>but I am unable to intercept the outgoing message (which is what I want). Instead it seems to go to the real bean validering and onwards. I have added a .receive call after the send call, but it gets nothing. And the Internet is not really helpful right now. What examples I find for Spring Integration testing seems to be using XML context, and they are pretty old at that. What is the current way of doing this kind of testing?</p>\n"},{"tags":["java","spring-boot","javers"],"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1661455724,"post_id":73487501,"comment_id":129783476,"body_markdown":"Please provide enough code so others can better understand or reproduce the problem.","body":"Please provide enough code so others can better understand or reproduce the problem."}],"answers":[{"tags":[],"owner":{"account_id":7987043,"reputation":1,"user_id":6026175,"display_name":"Sebastian Heiden"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1661436177,"creation_date":1661436177,"answer_id":73488952,"question_id":73487501,"body_markdown":"I just found the solution to my question. There is already some kind of customization, called `JaversBuilderPlugin`. To customize the configured spring boot instance of Javers you can provide a `JaversBuilderPlugin` like this:\r\n```\r\n  @Bean\r\n  JaversBuilderPlugin customizeJavers() {\r\n    return javersBuilder -&gt; javersBuilder.registerEntity(ExceptionalClass.class);\r\n  }\r\n```","title":"Spring Boot Customizer for Javers","body":"<p>I just found the solution to my question. There is already some kind of customization, called <code>JaversBuilderPlugin</code>. To customize the configured spring boot instance of Javers you can provide a <code>JaversBuilderPlugin</code> like this:</p>\n<pre><code>  @Bean\n  JaversBuilderPlugin customizeJavers() {\n    return javersBuilder -&gt; javersBuilder.registerEntity(ExceptionalClass.class);\n  }\n</code></pre>\n"}],"owner":{"account_id":7987043,"reputation":1,"user_id":6026175,"display_name":"Sebastian Heiden"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":362,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1661436177,"creation_date":1661430372,"question_id":73487501,"body_markdown":"We are building a Spring Boot application with a PostgreSQL DB that uses Javers to generate an audit trail of user interactions with the app. We are relying on the auto-detection of Hibernates @Entity which works well for most cases, but for a few exceptions. For these cases we registrate the exceptional classes with `JaversBuilder#registerEntities` (on the advice of the documentation: https://javers.org/documentation/domain-configuration/#mapping-configuration).\r\n\r\nThe problem with that is, that now the auto-configuration of Javers is overridden and thus the spring boot defaults no longer are applied. This results e.g. in a Javers in-memory repository instead of the SQL repository. \r\n\r\nIs there a spring boot customizer available or planned that is able to override / set certain values and leaves the rest to spring boot? I thinking of something like [Jackson2ObjectMapperBuilderCustomizer](https://docs.spring.io/spring-boot/docs/current/api/org/springframework/boot/autoconfigure/jackson/Jackson2ObjectMapperBuilderCustomizer.html).","title":"Spring Boot Customizer for Javers","body":"<p>We are building a Spring Boot application with a PostgreSQL DB that uses Javers to generate an audit trail of user interactions with the app. We are relying on the auto-detection of Hibernates @Entity which works well for most cases, but for a few exceptions. For these cases we registrate the exceptional classes with <code>JaversBuilder#registerEntities</code> (on the advice of the documentation: <a href=\"https://javers.org/documentation/domain-configuration/#mapping-configuration\" rel=\"nofollow noreferrer\">https://javers.org/documentation/domain-configuration/#mapping-configuration</a>).</p>\n<p>The problem with that is, that now the auto-configuration of Javers is overridden and thus the spring boot defaults no longer are applied. This results e.g. in a Javers in-memory repository instead of the SQL repository.</p>\n<p>Is there a spring boot customizer available or planned that is able to override / set certain values and leaves the rest to spring boot? I thinking of something like <a href=\"https://docs.spring.io/spring-boot/docs/current/api/org/springframework/boot/autoconfigure/jackson/Jackson2ObjectMapperBuilderCustomizer.html\" rel=\"nofollow noreferrer\">Jackson2ObjectMapperBuilderCustomizer</a>.</p>\n"},{"tags":["java","arrays","recursion"],"comments":[{"owner":{"account_id":5360582,"reputation":453,"user_id":4271966,"display_name":"David Coler"},"score":0,"creation_date":1539227957,"post_id":52751477,"comment_id":92427350,"body_markdown":"You are currently not using a recursive sort, are you saying you want to change this current code to a recursive sort?  What have you tried?","body":"You are currently not using a recursive sort, are you saying you want to change this current code to a recursive sort?  What have you tried?"},{"owner":{"account_id":13728582,"reputation":83,"user_id":9906644,"display_name":"Jeremy Sawyer"},"score":0,"creation_date":1539228421,"post_id":52751477,"comment_id":92427461,"body_markdown":"Yes I want it to be changed to a recursive sort.","body":"Yes I want it to be changed to a recursive sort."},{"owner":{"account_id":5360582,"reputation":453,"user_id":4271966,"display_name":"David Coler"},"score":0,"creation_date":1539228719,"post_id":52751477,"comment_id":92427528,"body_markdown":"is this a homework assignment where you are not allowed to use built in functions?  also for a list of just six items using a recursive sort is like taking a sledge hammer to a nail.  Too much power and will not really speed up your program","body":"is this a homework assignment where you are not allowed to use built in functions?  also for a list of just six items using a recursive sort is like taking a sledge hammer to a nail.  Too much power and will not really speed up your program"},{"owner":{"account_id":13728582,"reputation":83,"user_id":9906644,"display_name":"Jeremy Sawyer"},"score":0,"creation_date":1539228982,"post_id":52751477,"comment_id":92427592,"body_markdown":"Yes it is for an assignment where we cannot use built in functions like sort.  I agree it seems like a lot for a small sample size.  I just have not been able to grasp the recursive concept.","body":"Yes it is for an assignment where we cannot use built in functions like sort.  I agree it seems like a lot for a small sample size.  I just have not been able to grasp the recursive concept."},{"owner":{"account_id":5360582,"reputation":453,"user_id":4271966,"display_name":"David Coler"},"score":0,"creation_date":1539229054,"post_id":52751477,"comment_id":92427606,"body_markdown":"Now I fully understand what you are asking and why.  Thank you for letting me know answer incoming.  Will take me some time to type/copy code and explanation","body":"Now I fully understand what you are asking and why.  Thank you for letting me know answer incoming.  Will take me some time to type/copy code and explanation"}],"answers":[{"tags":[],"owner":{"account_id":14329020,"reputation":677,"user_id":10350247,"display_name":"akmin04"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1539227187,"creation_date":1539227187,"answer_id":52751556,"question_id":52751477,"body_markdown":"Sorting is a pretty broad topic as there are many different sorting methods (quicksort, merge sort, etc.) However, a pretty basic and simple sorting method is bubble sort. Although it isn&#39;t the fastest one, it&#39;s pretty easy to understand and code using recursion.\r\n\r\nEssentially, bubble sort with iterate through the elements in pairs of 2 and swap the two elements if they&#39;re in the wrong order.\r\n\r\nFor example, let&#39;s sort (3, 2, 5, 4, 1) using bubble sort.\r\n\r\n(**2, 3**, 5, 4, 1) First, it&#39;ll look at the first two elements swap them if needed. Since 3 is greater than 2, it&#39;ll swap them.\r\n\r\n(2, **3, 5**, 4, 1) Next, it&#39;ll look at 3 and 5. Since 3 is less than 5, there is no need to swap\r\n\r\n(2, 3, **4, 5**, 1) It now looks at 5 and 4 and swaps them.\r\n\r\n(2, 3, 4, **1, 5**) Finally, it looks at 5 and 1 and swaps them.\r\n\r\nNow start from the beginning and repeat the whole process. The sorting ends if exactly 0 swaps are made during an iteration.\r\n\r\nIf you&#39;re still a bit confused, try watching a tutorial on bubble sort or visit this [link][1].\r\n\r\n\r\n  [1]: https://www.geeksforgeeks.org/recursive-bubble-sort/","title":"sort array using recursive method","body":"<p>Sorting is a pretty broad topic as there are many different sorting methods (quicksort, merge sort, etc.) However, a pretty basic and simple sorting method is bubble sort. Although it isn't the fastest one, it's pretty easy to understand and code using recursion.</p>\n\n<p>Essentially, bubble sort with iterate through the elements in pairs of 2 and swap the two elements if they're in the wrong order.</p>\n\n<p>For example, let's sort (3, 2, 5, 4, 1) using bubble sort.</p>\n\n<p>(<strong>2, 3</strong>, 5, 4, 1) First, it'll look at the first two elements swap them if needed. Since 3 is greater than 2, it'll swap them.</p>\n\n<p>(2, <strong>3, 5</strong>, 4, 1) Next, it'll look at 3 and 5. Since 3 is less than 5, there is no need to swap</p>\n\n<p>(2, 3, <strong>4, 5</strong>, 1) It now looks at 5 and 4 and swaps them.</p>\n\n<p>(2, 3, 4, <strong>1, 5</strong>) Finally, it looks at 5 and 1 and swaps them.</p>\n\n<p>Now start from the beginning and repeat the whole process. The sorting ends if exactly 0 swaps are made during an iteration.</p>\n\n<p>If you're still a bit confused, try watching a tutorial on bubble sort or visit this <a href=\"https://www.geeksforgeeks.org/recursive-bubble-sort/\" rel=\"nofollow noreferrer\">link</a>.</p>\n"},{"tags":[],"owner":{"account_id":5360582,"reputation":453,"user_id":4271966,"display_name":"David Coler"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1539229426,"creation_date":1539229426,"answer_id":52751846,"question_id":52751477,"body_markdown":"So from what I was asking above as to why you need a recursive sorting algorithm  Here it goes I will try to explain how recursive sorting works.  It took my some time to figure it out as I am sure it does for most people who first come in contact with it.\r\n\r\n    public static void Qsort(int[] array, int start, int end)\r\n    {\r\n        //find the current center of the whole or parital array part I am working on.\r\n        int center = (start+end)/2;\r\n        ///System.out.println(&quot;\\n This is the center : &quot; + center);\r\n        int pivot, i, pivotplace;\r\n        i = 0;\r\n        pivot = 0;\r\n        pivotplace = 0;\r\n        //if start = end then we are at a single element.  just return to the previous iterative call.\r\n        if(start == end)\r\n        {\r\n           // System.out.println(&quot;\\n Inside base case return :&quot;);\r\n            return;\r\n        }\r\n        //find the pivot value we are using.  using a 3 prong selection we are assured to at least get some type of median value and avoid the N^2 worst case.\r\n        pivot = getpivot(array[start], array[center], array[end]); //gets median value of start, center and end values in the array.\r\n       // System.out.println(&quot;\\n pivotvalue is  : &quot; + pivot);\r\n        //find where the current pivot is located and swap it with the last element in the current portion of the array.\r\n        if(array[start] == pivot)\r\n        {\r\n            //System.out.print(&quot;\\n Inside pivot at start&quot;);\r\n            swap(array, start, end);\r\n        }\r\n        else\r\n        {\r\n            if(array[center] == pivot)\r\n            {\r\n                //System.out.print(&quot;\\n Inside pivot at center&quot;);\r\n                swap(array, center, end);\r\n            }\r\n        }\r\n        //due to iteration the pivot place needs to start at the passed in value of &#39;start&#39; and not 0.\r\n        pivotplace = start;\r\n        //due to iteration the loop needs to go from the passed in value of start and not 0 and needs to go \r\n        //until it reaches the end value passed in.\r\n        for(i = start; i &lt; end; i++)\r\n        {\r\n            //if the current slot of the array is less than then pivot swap it with the current pivotplace holder\r\n            //since the pivotplace keeps getting iterated up be each swap the final place of pivot place\r\n            //is where the pivot will actually be swapped back to after the loop cpompletes.\r\n            if(array[i] &lt; pivot)\r\n            {\r\n                //System.out.print(&quot;\\n Swapping&quot;);\r\n                swap(array, i, pivotplace);\r\n                pivotplace++;\r\n            }\r\n        }\r\n        //loop is finished, swap the pivot into the spot it belongs in.\r\n        swap(array, pivotplace, end);\r\n    //there are 2 cases for recursive iteration.\r\n    //The first is from the start to the slot before the pivot\r\n    if(start &lt; pivotplace){Qsort(array, start, pivotplace-1);}\r\n    //the second is from the slot after the pivot to the end.\r\n    if(pivotplace+1 &lt; end){Qsort(array, pivotplace+1, end);}\r\n        \r\n    }\r\n    \r\n    public static int getpivot(int a, int b, int c)\r\n    {\r\n        if((a &gt; b)  &amp;&amp; (a &lt; c))\r\n        {\r\n            return a;\r\n        }\r\n        if((b &gt; a)  &amp;&amp; (b &lt; c))\r\n        {\r\n            return b;\r\n        }\r\n        return c;\r\n    }\r\n    public static void swap(int[] array, int posa, int posb)\r\n    {\r\n        int temp;\r\n        temp = array[posa];\r\n        array[posa] = array[posb];\r\n        array[posb] = temp;\r\n    }\r\n\r\nThis is a basic Quick Sort or recursive sort I wrote this while in programming classes.  You will probably not need to use the getpivot code as you are dealing with a small set of strings, but if you do some research you will see using a possible sample of 3 drastically speeds up the recursion due to balanced work load of the recursion tree.","title":"sort array using recursive method","body":"<p>So from what I was asking above as to why you need a recursive sorting algorithm  Here it goes I will try to explain how recursive sorting works.  It took my some time to figure it out as I am sure it does for most people who first come in contact with it.</p>\n\n<pre><code>public static void Qsort(int[] array, int start, int end)\n{\n    //find the current center of the whole or parital array part I am working on.\n    int center = (start+end)/2;\n    ///System.out.println(\"\\n This is the center : \" + center);\n    int pivot, i, pivotplace;\n    i = 0;\n    pivot = 0;\n    pivotplace = 0;\n    //if start = end then we are at a single element.  just return to the previous iterative call.\n    if(start == end)\n    {\n       // System.out.println(\"\\n Inside base case return :\");\n        return;\n    }\n    //find the pivot value we are using.  using a 3 prong selection we are assured to at least get some type of median value and avoid the N^2 worst case.\n    pivot = getpivot(array[start], array[center], array[end]); //gets median value of start, center and end values in the array.\n   // System.out.println(\"\\n pivotvalue is  : \" + pivot);\n    //find where the current pivot is located and swap it with the last element in the current portion of the array.\n    if(array[start] == pivot)\n    {\n        //System.out.print(\"\\n Inside pivot at start\");\n        swap(array, start, end);\n    }\n    else\n    {\n        if(array[center] == pivot)\n        {\n            //System.out.print(\"\\n Inside pivot at center\");\n            swap(array, center, end);\n        }\n    }\n    //due to iteration the pivot place needs to start at the passed in value of 'start' and not 0.\n    pivotplace = start;\n    //due to iteration the loop needs to go from the passed in value of start and not 0 and needs to go \n    //until it reaches the end value passed in.\n    for(i = start; i &lt; end; i++)\n    {\n        //if the current slot of the array is less than then pivot swap it with the current pivotplace holder\n        //since the pivotplace keeps getting iterated up be each swap the final place of pivot place\n        //is where the pivot will actually be swapped back to after the loop cpompletes.\n        if(array[i] &lt; pivot)\n        {\n            //System.out.print(\"\\n Swapping\");\n            swap(array, i, pivotplace);\n            pivotplace++;\n        }\n    }\n    //loop is finished, swap the pivot into the spot it belongs in.\n    swap(array, pivotplace, end);\n//there are 2 cases for recursive iteration.\n//The first is from the start to the slot before the pivot\nif(start &lt; pivotplace){Qsort(array, start, pivotplace-1);}\n//the second is from the slot after the pivot to the end.\nif(pivotplace+1 &lt; end){Qsort(array, pivotplace+1, end);}\n\n}\n\npublic static int getpivot(int a, int b, int c)\n{\n    if((a &gt; b)  &amp;&amp; (a &lt; c))\n    {\n        return a;\n    }\n    if((b &gt; a)  &amp;&amp; (b &lt; c))\n    {\n        return b;\n    }\n    return c;\n}\npublic static void swap(int[] array, int posa, int posb)\n{\n    int temp;\n    temp = array[posa];\n    array[posa] = array[posb];\n    array[posb] = temp;\n}\n</code></pre>\n\n<p>This is a basic Quick Sort or recursive sort I wrote this while in programming classes.  You will probably not need to use the getpivot code as you are dealing with a small set of strings, but if you do some research you will see using a possible sample of 3 drastically speeds up the recursion due to balanced work load of the recursion tree.</p>\n"},{"tags":[],"owner":{"account_id":9753187,"reputation":1507,"user_id":7230784,"display_name":"Atul"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1661435957,"creation_date":1661435957,"answer_id":73488887,"question_id":52751477,"body_markdown":"## Sort Array using recursion in kotlin \r\n\r\n        fun main() {\r\n            print(sortArray(arrayListOf(1,3,2,6,8,3)))\r\n        }\r\n        \r\n        fun sortArray(arr: MutableList&lt;Int&gt;): MutableList&lt;Int&gt;{\r\n            if(arr.size==1) {\r\n                return arr\r\n            }\r\n            val lastValue = arr.last()\r\n            arr.removeLast()\r\n            sortArray(arr)\r\n            insert(arr, lastValue)\r\n            return arr\r\n        }\r\n        \r\n        fun insert (arr: MutableList&lt;Int&gt;, value: Int): MutableList&lt;Int&gt; {\r\n            if(arr.size == 0 || arr.last() &lt; value) {\r\n                arr.add(value)\r\n                return arr\r\n            }\r\n            val lastValue = arr.last()\r\n            arr.removeLast()\r\n            insert(arr, value)\r\n            arr.add(lastValue)\r\n            return arr\r\n        }","title":"sort array using recursive method","body":"<h2>Sort Array using recursion in kotlin</h2>\n<pre><code>    fun main() {\n        print(sortArray(arrayListOf(1,3,2,6,8,3)))\n    }\n    \n    fun sortArray(arr: MutableList&lt;Int&gt;): MutableList&lt;Int&gt;{\n        if(arr.size==1) {\n            return arr\n        }\n        val lastValue = arr.last()\n        arr.removeLast()\n        sortArray(arr)\n        insert(arr, lastValue)\n        return arr\n    }\n    \n    fun insert (arr: MutableList&lt;Int&gt;, value: Int): MutableList&lt;Int&gt; {\n        if(arr.size == 0 || arr.last() &lt; value) {\n            arr.add(value)\n            return arr\n        }\n        val lastValue = arr.last()\n        arr.removeLast()\n        insert(arr, value)\n        arr.add(lastValue)\n        return arr\n    }\n</code></pre>\n"}],"owner":{"account_id":13728582,"reputation":83,"user_id":9906644,"display_name":"Jeremy Sawyer"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":4816,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":3,"score":1,"last_activity_date":1661435957,"creation_date":1539226602,"question_id":52751477,"body_markdown":"I am working on trying to write a program where a user will enter 6 strings and then it will sort the array in reverse alphabetical order using a recursive method.  This is one concept I do not understand despite multiple videos, readings and attempts.  Any support and insight is greatly appreciated.  Thank you.\r\n\r\n    import java.util.Arrays;\r\n    import java.util.Scanner;\r\n    \r\n    public class SRecusion {\r\n    \t\r\n    \t\r\n    \tpublic static void sort2 (String[] sort2) {\r\n    \t\tint i;\r\n    \t\tint min = 0;\r\n    \t\tint max;\r\n    \t\t\r\n    \t\tfor (i = 0; i &lt;sort2.length -1; i++) {\r\n    \t\t\tif (sort2[i].charAt(0)&gt; sort2[i=1].charAt(0)) {\r\n    \t\t\t\tsort2[i] = sort2[min];\r\n    \t\t\t}\r\n    \t\t\telse {\r\n    \t\t\t\tmin = (sort2(sort2[i-1]));\r\n    \t\t\t}\r\n    \t\t}\r\n    \t}\r\n    \t\r\n    \t\r\n    \r\n    \tpublic static void main(String[] args) {\r\n    \t\t// TODO Auto-generated method stub\r\n    \t\t\r\n    \t\tString [] test = new String[6];\r\n    \t\tScanner scnr = new Scanner(System.in);\r\n    \t\tString userEntry = &quot;&quot;;\r\n    \t\t\r\n    \t\tfor(int i = 0; i &lt;= test.length - 1; i++) {\r\n    \t\t\tSystem.out.println(&quot;Please enter a word:&quot;);\r\n    \t\t\ttest[i] = scnr.nextLine();\r\n    \t\t}\r\n    \t\t\r\n    \t\tsort2(test);\r\n    \t\t\r\n    \t\t\r\n    \t\t\r\n    \t\t\r\n    \t\t\tSystem.out.println(&quot;your list is&quot; + Arrays.asList(test));\r\n    \t\t\tSystem.out.println();\r\n    \t\t\r\n    \t\t}\r\n    \r\n    }\r\n\r\n","title":"sort array using recursive method","body":"<p>I am working on trying to write a program where a user will enter 6 strings and then it will sort the array in reverse alphabetical order using a recursive method.  This is one concept I do not understand despite multiple videos, readings and attempts.  Any support and insight is greatly appreciated.  Thank you.</p>\n\n<pre><code>import java.util.Arrays;\nimport java.util.Scanner;\n\npublic class SRecusion {\n\n\n    public static void sort2 (String[] sort2) {\n        int i;\n        int min = 0;\n        int max;\n\n        for (i = 0; i &lt;sort2.length -1; i++) {\n            if (sort2[i].charAt(0)&gt; sort2[i=1].charAt(0)) {\n                sort2[i] = sort2[min];\n            }\n            else {\n                min = (sort2(sort2[i-1]));\n            }\n        }\n    }\n\n\n\n    public static void main(String[] args) {\n        // TODO Auto-generated method stub\n\n        String [] test = new String[6];\n        Scanner scnr = new Scanner(System.in);\n        String userEntry = \"\";\n\n        for(int i = 0; i &lt;= test.length - 1; i++) {\n            System.out.println(\"Please enter a word:\");\n            test[i] = scnr.nextLine();\n        }\n\n        sort2(test);\n\n\n\n\n            System.out.println(\"your list is\" + Arrays.asList(test));\n            System.out.println();\n\n        }\n\n}\n</code></pre>\n"},{"tags":["java","postgresql","spring-boot","hibernate","spring-data-jpa"],"answers":[{"tags":[],"owner":{"account_id":24234267,"reputation":16,"user_id":18187616,"display_name":"Giovanni Cannarile"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1661435952,"creation_date":1661434798,"answer_id":73488569,"question_id":73488389,"body_markdown":"When saving a new ingredient, jpa will perform an update if the value contained in the “id” field is already in the table.\r\n\r\nA nice way through which you can achieve what you want is \r\n\r\n```\r\ningredientRepository.findById(ingredientDTO.getIngredientId()).\r\n                ifPresentOrElse( ingredientEntity-&gt; ResponseEntity.badRequest().build(), () -&gt; ingredientRepository.save(ingredientDTO));\r\n``` \r\nYou can return an error if the entity is already in the table otherwise (empty lambda), you can save the new row\r\n","title":"No error when violating constraints after inserting data in spring-boot application with spring data jpa","body":"<p>When saving a new ingredient, jpa will perform an update if the value contained in the “id” field is already in the table.</p>\n<p>A nice way through which you can achieve what you want is</p>\n<pre><code>ingredientRepository.findById(ingredientDTO.getIngredientId()).\n                ifPresentOrElse( ingredientEntity-&gt; ResponseEntity.badRequest().build(), () -&gt; ingredientRepository.save(ingredientDTO));\n</code></pre>\n<p>You can return an error if the entity is already in the table otherwise (empty lambda), you can save the new row</p>\n"},{"tags":[],"owner":{"account_id":4535404,"reputation":301,"user_id":3684747,"display_name":"user3684747"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1661435053,"creation_date":1661435053,"answer_id":73488641,"question_id":73488389,"body_markdown":"The save method will create or update the entry if the id already exists. I&#39;d switch to auto generating the ID when inserting, instead of manually creating the IDs. That would prevent the issue you have","title":"No error when violating constraints after inserting data in spring-boot application with spring data jpa","body":"<p>The save method will create or update the entry if the id already exists. I'd switch to auto generating the ID when inserting, instead of manually creating the IDs. That would prevent the issue you have</p>\n"},{"tags":[],"owner":{"account_id":5157043,"reputation":1369,"user_id":4130003,"display_name":"johnnyutts"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1661435894,"creation_date":1661435894,"answer_id":73488876,"question_id":73488389,"body_markdown":"This is a downside to using CrudRepository save() on an entity where the id is set by the application.\r\n\r\nUnder the hood EntityManager.persist() will only be called if the id is null otherwise  EntityManager.merge() is called.\r\n\r\nUsing the EntityManager directly gives you more fine grained control and you can call the persist method in your application when required","title":"No error when violating constraints after inserting data in spring-boot application with spring data jpa","body":"<p>This is a downside to using CrudRepository save() on an entity where the id is set by the application.</p>\n<p>Under the hood EntityManager.persist() will only be called if the id is null otherwise  EntityManager.merge() is called.</p>\n<p>Using the EntityManager directly gives you more fine grained control and you can call the persist method in your application when required</p>\n"}],"owner":{"account_id":25721226,"reputation":5,"user_id":19478209,"display_name":"boschl2000"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":649,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":73488569,"answer_count":3,"score":0,"last_activity_date":1661435952,"creation_date":1661434071,"question_id":73488389,"body_markdown":"I&#39;m currently learning Spring-Boot and Spring-Data-JPA.\r\nI&#39;m using a postgresql database for storing the data.\r\nMy goal is to store ingredients with a unique and custom ID (you just type it in when creating it), but when another ingredient with the same ID gets inserted, there should be some kind of error. In my understanding, this is what happens when I use the @Id annotation, hibernate also logs the correct create table statement.\r\nThis is my Ingredient class:\r\n\r\n```java\r\npublic class Ingredient {\r\n    @Id\r\n    @Column(name = &quot;ingredient_id&quot;)\r\n    private String ingredient_id;\r\n\r\n    @Column(name = &quot;name&quot;)\r\n    private String name;\r\n\r\n    @Column(name = &quot;curr_stock&quot;)\r\n    private double curr_stock;\r\n\r\n    @Column(name = &quot;opt_stock&quot;)\r\n    private double opt_stock;\r\n\r\n    @Column(name = &quot;unit&quot;)\r\n    private String unit;\r\n\r\n    @Column(name = &quot;price_per_unit&quot;)\r\n    private double price_per_unit;\r\n\r\n    @Column(name = &quot;supplier&quot;)\r\n    private String supplier;\r\n    -- ... getters, setters, constructors (they work fine, I can insert and get the data)\r\n}\r\n\r\n```\r\n\r\nMy controller looks like this:\r\n```java\r\n@RestController\r\n@RequestMapping(path = &quot;api/v1/ingredient&quot;)\r\npublic class IngredientController {\r\n    private final IngredientService ingredientService;\r\n\r\n    @Autowired\r\n    public IngredientController(IngredientService ingredientService) {\r\n        this.ingredientService = ingredientService;\r\n    }\r\n\r\n    @GetMapping\r\n    public List&lt;Ingredient&gt; getIngredients(){\r\n        return ingredientService.getIngredients();\r\n    }\r\n\r\n    @PostMapping\r\n    public void registerNewStudent(@RequestBody Ingredient ingredient) {\r\n        ingredientService.saveIngredient(ingredient);\r\n    }\r\n\r\n}\r\n```\r\n\r\nAnd my service class just uses the save() method from the JpaRepository to store new ingredients.\r\n\r\nTo this point I had the feeling, that I understood the whole thing, but when sending two post-requests to my application, each one containing an ingredient with the id &quot;1234&quot;, and then showing all ingredients with a get request, the first ingredient just got replaced by the second one and there was no error or smth. like that in between.\r\nSending direct sql insert statements to the database with the same values throws an error, because the primary key constraint gets violated, just as it should be. Exactly this should have happened after the second post request (in my understanding).\r\nWhat did I get wrong?\r\n \r\nUpdate:\r\nFrom the terminal output and the answers I got below, it is now clear, that the save() method can be understood as &quot;insert or update if primary key is already existing&quot;. \r\nBut is there a better way around this than just error-handle every time when saving a new entry by hand?","title":"No error when violating constraints after inserting data in spring-boot application with spring data jpa","body":"<p>I'm currently learning Spring-Boot and Spring-Data-JPA.\nI'm using a postgresql database for storing the data.\nMy goal is to store ingredients with a unique and custom ID (you just type it in when creating it), but when another ingredient with the same ID gets inserted, there should be some kind of error. In my understanding, this is what happens when I use the @Id annotation, hibernate also logs the correct create table statement.\nThis is my Ingredient class:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class Ingredient {\n    @Id\n    @Column(name = &quot;ingredient_id&quot;)\n    private String ingredient_id;\n\n    @Column(name = &quot;name&quot;)\n    private String name;\n\n    @Column(name = &quot;curr_stock&quot;)\n    private double curr_stock;\n\n    @Column(name = &quot;opt_stock&quot;)\n    private double opt_stock;\n\n    @Column(name = &quot;unit&quot;)\n    private String unit;\n\n    @Column(name = &quot;price_per_unit&quot;)\n    private double price_per_unit;\n\n    @Column(name = &quot;supplier&quot;)\n    private String supplier;\n    -- ... getters, setters, constructors (they work fine, I can insert and get the data)\n}\n\n</code></pre>\n<p>My controller looks like this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@RestController\n@RequestMapping(path = &quot;api/v1/ingredient&quot;)\npublic class IngredientController {\n    private final IngredientService ingredientService;\n\n    @Autowired\n    public IngredientController(IngredientService ingredientService) {\n        this.ingredientService = ingredientService;\n    }\n\n    @GetMapping\n    public List&lt;Ingredient&gt; getIngredients(){\n        return ingredientService.getIngredients();\n    }\n\n    @PostMapping\n    public void registerNewStudent(@RequestBody Ingredient ingredient) {\n        ingredientService.saveIngredient(ingredient);\n    }\n\n}\n</code></pre>\n<p>And my service class just uses the save() method from the JpaRepository to store new ingredients.</p>\n<p>To this point I had the feeling, that I understood the whole thing, but when sending two post-requests to my application, each one containing an ingredient with the id &quot;1234&quot;, and then showing all ingredients with a get request, the first ingredient just got replaced by the second one and there was no error or smth. like that in between.\nSending direct sql insert statements to the database with the same values throws an error, because the primary key constraint gets violated, just as it should be. Exactly this should have happened after the second post request (in my understanding).\nWhat did I get wrong?</p>\n<p>Update:\nFrom the terminal output and the answers I got below, it is now clear, that the save() method can be understood as &quot;insert or update if primary key is already existing&quot;.\nBut is there a better way around this than just error-handle every time when saving a new entry by hand?</p>\n"},{"tags":["java","swift-mt","mt940"],"answers":[{"tags":[],"owner":{"account_id":9129115,"reputation":700,"user_id":6791550,"display_name":"Sebastian Zubrinic"},"down_vote_count":0,"up_vote_count":11,"is_accepted":true,"score":11,"last_activity_date":1548725379,"creation_date":1548725379,"answer_id":54412643,"question_id":54320742,"body_markdown":"I&#39;m one of the authors of the Prowide library. \r\n\r\nA major benefit of our library is that it is open source and widely used. \r\n\r\nSWIFT base libraries can be very expensive for the average project budget.","title":"Library to parse and convert SWIFT MT files","body":"<p>I'm one of the authors of the Prowide library. </p>\n\n<p>A major benefit of our library is that it is open source and widely used. </p>\n\n<p>SWIFT base libraries can be very expensive for the average project budget.</p>\n"},{"tags":[],"owner":{"account_id":4942970,"reputation":842,"user_id":3979194,"display_name":"EvaBat"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1618307754,"creation_date":1618307754,"answer_id":67072620,"question_id":54320742,"body_markdown":"You can also check [FINaplo][1], a multi-purpose implementation for financial messages.\r\n\r\nIt provides an online validation service, Java SDKs, as well as REST solutions.\r\n\r\nI happen to be one of the authors.\r\n\r\nFor this specific case, the most suitable answer is a SWIFT MT library, you can check a demo on this [GitHub Page][2].\r\n\r\n\r\n  [1]: https://finaplo.paymentcomponents.com/financial-messages\r\n  [2]: https://github.com/Payment-Components/demo-swift-mt","title":"Library to parse and convert SWIFT MT files","body":"<p>You can also check <a href=\"https://finaplo.paymentcomponents.com/financial-messages\" rel=\"nofollow noreferrer\">FINaplo</a>, a multi-purpose implementation for financial messages.</p>\n<p>It provides an online validation service, Java SDKs, as well as REST solutions.</p>\n<p>I happen to be one of the authors.</p>\n<p>For this specific case, the most suitable answer is a SWIFT MT library, you can check a demo on this <a href=\"https://github.com/Payment-Components/demo-swift-mt\" rel=\"nofollow noreferrer\">GitHub Page</a>.</p>\n"}],"owner":{"account_id":2595382,"reputation":723,"user_id":2249207,"accept_rate":100,"display_name":"DAIRAV"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":6568,"favorite_count":0,"down_vote_count":2,"up_vote_count":8,"accepted_answer_id":54412643,"answer_count":2,"score":6,"last_activity_date":1661435738,"creation_date":1548222618,"question_id":54320742,"body_markdown":"In order to read and parse MT942, MT940 files, which library is recommended to use.\r\n\r\nI came across two options,\r\n\r\n 1. Using open-source library provided by [PROWIDE][1]\r\n 2. Using SWIFT standard libraries - [SWIFT][2]\r\n\r\nIs there any other approach to read and parse SWFIT MT files ? Or which is considered best approach to parse and convert MT files?\r\n\r\n\r\n  [1]: https://mvnrepository.com/artifact/com.prowidesoftware/pw-swift-core\r\n  [2]: https://www.swift.com/our-solutions/compliance-and-shared-services/mystandards/mystandards-base-libraries/features","title":"Library to parse and convert SWIFT MT files","body":"<p>In order to read and parse MT942, MT940 files, which library is recommended to use.</p>\n<p>I came across two options,</p>\n<ol>\n<li>Using open-source library provided by <a href=\"https://mvnrepository.com/artifact/com.prowidesoftware/pw-swift-core\" rel=\"nofollow noreferrer\">PROWIDE</a></li>\n<li>Using SWIFT standard libraries - <a href=\"https://www.swift.com/our-solutions/compliance-and-shared-services/mystandards/mystandards-base-libraries/features\" rel=\"nofollow noreferrer\">SWIFT</a></li>\n</ol>\n<p>Is there any other approach to read and parse SWFIT MT files ? Or which is considered best approach to parse and convert MT files?</p>\n"},{"tags":["java","linux","javafx","window","modality"],"comments":[{"owner":{"account_id":7555436,"reputation":1397,"user_id":5953720,"accept_rate":63,"display_name":"Allexj"},"score":0,"creation_date":1661498797,"post_id":73455447,"comment_id":129791111,"body_markdown":"Here is the bug report, still not fixed: https://bugs.openjdk.org/browse/JDK-8255347","body":"Here is the bug report, still not fixed: <a href=\"https://bugs.openjdk.org/browse/JDK-8255347\" rel=\"nofollow noreferrer\">bugs.openjdk.org/browse/JDK-8255347</a>"},{"owner":{"account_id":7555436,"reputation":1397,"user_id":5953720,"accept_rate":63,"display_name":"Allexj"},"score":0,"creation_date":1662219924,"post_id":73455447,"comment_id":129958074,"body_markdown":"my friend with Ubuntu 20.04 doesn&#39;t have this bug: https://stackoverflow.com/questions/73593523/why-doesnt-my-friend-have-this-bug-while-i-am","body":"my friend with Ubuntu 20.04 doesn&#39;t have this bug: <a href=\"https://stackoverflow.com/questions/73593523/why-doesnt-my-friend-have-this-bug-while-i-am\" title=\"why doesnt my friend have this bug while i am\">stackoverflow.com/questions/73593523/&hellip;</a>"}],"owner":{"account_id":7555436,"reputation":1397,"user_id":5953720,"accept_rate":63,"display_name":"Allexj"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":43,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":0,"score":0,"last_activity_date":1661435653,"creation_date":1661243397,"question_id":73455447,"body_markdown":"Here is a video showing this bug: https://youtu.be/anF1pp1CVDg\r\n\r\nIt happens when I create a new window on top of the already existing one. I use this function:\r\n\r\n    public static void newWind(String fxml) throws IOException{\r\n            FXMLLoader fxmlLoader = new FXMLLoader(App.class.getResource(fxml + &quot;.fxml&quot;));\r\n            Parent root1 = (Parent) fxmlLoader.load();\r\n            popup_stage = new Stage();\r\n            Scene newscene = new Scene(root1, 720,480);\r\n            newscene.getRoot().setStyle(&quot;-fx-font-family: &#39;Arial&#39;&quot;);\r\n            popup_stage.setScene(newscene);\r\n            popup_stage.initModality(Modality.WINDOW_MODAL);    \r\n            popup_stage.initOwner(stage_APP);    // this is the line that show the bug. if I remove this, window does not move\r\n            popup_stage.initStyle(StageStyle.UNDECORATED);\r\n            popup_stage.show();\r\n        }\r\n\r\n\r\nIf I comment `popup_stage.initOwner(stage_APP);` the bug does not happen.\r\n\r\nThis bug only happens on Linux, as it&#39;s shown [here][1] ... is there a way to workaround this? I need the newWindow to be on focus and the old window stage to be freezed until the newWindow closes.\r\n\r\n\r\nHere is the bug report, still not fixed: https://bugs.openjdk.org/browse/JDK-8255347\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/24519668/javafx-maximized-window-moves-if-dialog-shows-up","title":"popupstage.initOwner() moves the window and it&#39;s ugly to look at","body":"<p>Here is a video showing this bug: <a href=\"https://youtu.be/anF1pp1CVDg\" rel=\"nofollow noreferrer\">https://youtu.be/anF1pp1CVDg</a></p>\n<p>It happens when I create a new window on top of the already existing one. I use this function:</p>\n<pre><code>public static void newWind(String fxml) throws IOException{\n        FXMLLoader fxmlLoader = new FXMLLoader(App.class.getResource(fxml + &quot;.fxml&quot;));\n        Parent root1 = (Parent) fxmlLoader.load();\n        popup_stage = new Stage();\n        Scene newscene = new Scene(root1, 720,480);\n        newscene.getRoot().setStyle(&quot;-fx-font-family: 'Arial'&quot;);\n        popup_stage.setScene(newscene);\n        popup_stage.initModality(Modality.WINDOW_MODAL);    \n        popup_stage.initOwner(stage_APP);    // this is the line that show the bug. if I remove this, window does not move\n        popup_stage.initStyle(StageStyle.UNDECORATED);\n        popup_stage.show();\n    }\n</code></pre>\n<p>If I comment <code>popup_stage.initOwner(stage_APP);</code> the bug does not happen.</p>\n<p>This bug only happens on Linux, as it's shown <a href=\"https://stackoverflow.com/questions/24519668/javafx-maximized-window-moves-if-dialog-shows-up\">here</a> ... is there a way to workaround this? I need the newWindow to be on focus and the old window stage to be freezed until the newWindow closes.</p>\n<p>Here is the bug report, still not fixed: <a href=\"https://bugs.openjdk.org/browse/JDK-8255347\" rel=\"nofollow noreferrer\">https://bugs.openjdk.org/browse/JDK-8255347</a></p>\n"},{"tags":["java","apache-camel","jackson-dataformat-xml","camel-jackson"],"answers":[{"tags":[],"owner":{"account_id":3540942,"reputation":66,"user_id":2958081,"display_name":"Lee Meehan"},"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1661348024,"creation_date":1661348024,"answer_id":73474134,"question_id":73196339,"body_markdown":"You can set a custom xmlMapper on the jacksonxml element, the attribute is called &quot;**xmlMapper**&quot; you can then reference your custom XmlMapper which should be declared as a bean, but this is important, you must include a **#** before the bean name or else the object mapper will not be looked up and will be set to null and a default one will be created.\r\n```\r\n  @Bean\r\n  public XmlMapper customXMLMapper(){\r\n    return XmlMapper.builder()\r\n            .configure(EMPTY_ELEMENT_AS_NULL, true)\r\n            .configure(FAIL_ON_UNKNOWN_PROPERTIES, false)\r\n            .build();\r\n  }\r\n```\r\n\r\n```xml\r\n&lt;unmarshal&gt;\r\n    &lt;jacksonxml unmarshalTypeName=&quot;com.myclass.Result&quot; xmlMapper=&quot;#customXMLMapper&quot;/&gt;\r\n&lt;/unmarshal&gt;\r\n```","title":"Enable EMPTY_ELEMENT_AS_NULL in Camel 3 XML DSL","body":"<p>You can set a custom xmlMapper on the jacksonxml element, the attribute is called &quot;<strong>xmlMapper</strong>&quot; you can then reference your custom XmlMapper which should be declared as a bean, but this is important, you must include a <strong>#</strong> before the bean name or else the object mapper will not be looked up and will be set to null and a default one will be created.</p>\n<pre><code>  @Bean\n  public XmlMapper customXMLMapper(){\n    return XmlMapper.builder()\n            .configure(EMPTY_ELEMENT_AS_NULL, true)\n            .configure(FAIL_ON_UNKNOWN_PROPERTIES, false)\n            .build();\n  }\n</code></pre>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;unmarshal&gt;\n    &lt;jacksonxml unmarshalTypeName=&quot;com.myclass.Result&quot; xmlMapper=&quot;#customXMLMapper&quot;/&gt;\n&lt;/unmarshal&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":13497285,"reputation":127,"user_id":9737735,"display_name":"Joselo"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1661435233,"creation_date":1661435233,"answer_id":73488681,"question_id":73196339,"body_markdown":"I raised the issue to Camel - [CAMEL-18345](https://issues.apache.org/jira/browse/CAMEL-18345) - and it is indeed a feature that is missing. They solved the issue and the changes are already available in version 3.18.1, so the property EMPTY_ELEMENT_AS_NULL is going to be available in the same way as the usual ones (FAIL_ON_UNKNOWN_PROPERTIES, etc)","title":"Enable EMPTY_ELEMENT_AS_NULL in Camel 3 XML DSL","body":"<p>I raised the issue to Camel - <a href=\"https://issues.apache.org/jira/browse/CAMEL-18345\" rel=\"nofollow noreferrer\">CAMEL-18345</a> - and it is indeed a feature that is missing. They solved the issue and the changes are already available in version 3.18.1, so the property EMPTY_ELEMENT_AS_NULL is going to be available in the same way as the usual ones (FAIL_ON_UNKNOWN_PROPERTIES, etc)</p>\n"}],"owner":{"account_id":13497285,"reputation":127,"user_id":9737735,"display_name":"Joselo"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":240,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":73474134,"answer_count":2,"score":0,"last_activity_date":1661435233,"creation_date":1659368763,"question_id":73196339,"body_markdown":"I&#39;ve found [here](https://github.com/FasterXML/jackson-dataformat-xml/issues/411) that the default behaviour for __FromXmlParser.Feature.EMPTY_ELEMENT_AS_NULL__ has changed from true (2.9 - 2.11) to false (2.12 onwards), so from that version no automatic coercion is done from empty elements like &lt;empty/&gt; into null.\r\n\r\nI was using Apache Camel 2.25 and that version had this feature enabled by default but now, with this change, is disabled in Camel 3.x. How can I enable it in back in Camel 3 using XML DSL? I know using XMLMapper is easy enough:\r\n\r\n```java\r\nXmlMapper xmlMapper = new XmlMapper();\r\nxmlMapper.configure(FromXmlParser.Feature.EMPTY_ELEMENT_AS_NULL, true);\r\n```\r\n\r\nBut in Camel XML DSL the [allowed enums](https://camel.apache.org/components/3.14.x/dataformats/jacksonxml-dataformat.html#_enabling_or_disable_features_using_jackson) are only the ones from SerializationFeature, DeserializationFeature and MapperFeature. I&#39;ve tried with some of them but with no luck.\r\n\r\n```xml\r\n&lt;unmarshal&gt;\r\n   &lt;jacksonxml disableFeatures=&quot;FAIL_ON_UNKNOWN_PROPERTIES&quot;\r\n      enableFeatures=&quot;ACCEPT_EMPTY_STRING_AS_NULL_OBJECT,ACCEPT_EMPTY_ARRAY_AS_NULL_OBJECT&quot;\r\n      unmarshalTypeName=&quot;com.my.class.Result&quot; \r\n      include=&quot;NON_NULL&quot; /&gt;\r\n&lt;/unmarshal&gt;\r\n```\r\n","title":"Enable EMPTY_ELEMENT_AS_NULL in Camel 3 XML DSL","body":"<p>I've found <a href=\"https://github.com/FasterXML/jackson-dataformat-xml/issues/411\" rel=\"nofollow noreferrer\">here</a> that the default behaviour for <strong>FromXmlParser.Feature.EMPTY_ELEMENT_AS_NULL</strong> has changed from true (2.9 - 2.11) to false (2.12 onwards), so from that version no automatic coercion is done from empty elements like  into null.</p>\n<p>I was using Apache Camel 2.25 and that version had this feature enabled by default but now, with this change, is disabled in Camel 3.x. How can I enable it in back in Camel 3 using XML DSL? I know using XMLMapper is easy enough:</p>\n<pre class=\"lang-java prettyprint-override\"><code>XmlMapper xmlMapper = new XmlMapper();\nxmlMapper.configure(FromXmlParser.Feature.EMPTY_ELEMENT_AS_NULL, true);\n</code></pre>\n<p>But in Camel XML DSL the <a href=\"https://camel.apache.org/components/3.14.x/dataformats/jacksonxml-dataformat.html#_enabling_or_disable_features_using_jackson\" rel=\"nofollow noreferrer\">allowed enums</a> are only the ones from SerializationFeature, DeserializationFeature and MapperFeature. I've tried with some of them but with no luck.</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;unmarshal&gt;\n   &lt;jacksonxml disableFeatures=&quot;FAIL_ON_UNKNOWN_PROPERTIES&quot;\n      enableFeatures=&quot;ACCEPT_EMPTY_STRING_AS_NULL_OBJECT,ACCEPT_EMPTY_ARRAY_AS_NULL_OBJECT&quot;\n      unmarshalTypeName=&quot;com.my.class.Result&quot; \n      include=&quot;NON_NULL&quot; /&gt;\n&lt;/unmarshal&gt;\n</code></pre>\n"},{"tags":["java","spring","spring-mvc","tomcat","spring-boot"],"comments":[{"owner":{"account_id":1597725,"reputation":34231,"user_id":1479414,"accept_rate":71,"display_name":"Andremoniy"},"score":0,"creation_date":1487060671,"post_id":42220573,"comment_id":71602387,"body_markdown":"Nice question, btw","body":"Nice question, btw"}],"answers":[{"tags":[],"owner":{"account_id":1597725,"reputation":34231,"user_id":1479414,"accept_rate":71,"display_name":"Andremoniy"},"down_vote_count":0,"up_vote_count":13,"is_accepted":true,"score":13,"last_activity_date":1627324325,"creation_date":1487060138,"answer_id":42220947,"question_id":42220573,"body_markdown":"You probably need to change [access log pattern][1] in application properties to something like this:\r\n\r\n    server.tomcat.accesslog.pattern=%h %l %t %u &quot;%r&quot; %s %b\r\n\r\nwhere `%u` is *Remote user that has been authenticated* (see example [here][2]).\r\n\r\n------\r\n\r\n**UPD**: Possibly this is not sufficient as *common* pattern already contains `%u` parameter. In this case I would recommend two additional steps:\r\n\r\n1) Put user&#39;s name into request session parameter, something like:\r\n\r\n`request.getSession().setAttribute(&quot;username&quot;, user.getName());`\r\n\r\n2) Add following parameter in access log pattern: `%{username}s`\r\n\r\n    server.tomcat.accesslog.pattern=%h %l %t %u %{username}s &quot;%r&quot; %s %b\r\n\r\nwhich should take attribute named `username` from `HttpSession` as it described [here][3].\r\n \r\n\r\n\r\n  [1]: https://docs.spring.io/spring-boot/docs/current/reference/html/common-application-properties.html\r\n  [2]: https://examples.javacodegeeks.com/enterprise-java/tomcat/tomcat-access-log-configuration-example/\r\n  [3]: https://tomcat.apache.org/tomcat-7.0-doc/api/org/apache/catalina/valves/AccessLogValve.html","title":"Spring boot with embedded tomcat + access log with authentication user","body":"<p>You probably need to change <a href=\"https://docs.spring.io/spring-boot/docs/current/reference/html/common-application-properties.html\" rel=\"nofollow noreferrer\">access log pattern</a> in application properties to something like this:</p>\n<pre><code>server.tomcat.accesslog.pattern=%h %l %t %u &quot;%r&quot; %s %b\n</code></pre>\n<p>where <code>%u</code> is <em>Remote user that has been authenticated</em> (see example <a href=\"https://examples.javacodegeeks.com/enterprise-java/tomcat/tomcat-access-log-configuration-example/\" rel=\"nofollow noreferrer\">here</a>).</p>\n<hr />\n<p><strong>UPD</strong>: Possibly this is not sufficient as <em>common</em> pattern already contains <code>%u</code> parameter. In this case I would recommend two additional steps:</p>\n<ol>\n<li>Put user's name into request session parameter, something like:</li>\n</ol>\n<p><code>request.getSession().setAttribute(&quot;username&quot;, user.getName());</code></p>\n<ol start=\"2\">\n<li><p>Add following parameter in access log pattern: <code>%{username}s</code></p>\n<p>server.tomcat.accesslog.pattern=%h %l %t %u %{username}s &quot;%r&quot; %s %b</p>\n</li>\n</ol>\n<p>which should take attribute named <code>username</code> from <code>HttpSession</code> as it described <a href=\"https://tomcat.apache.org/tomcat-7.0-doc/api/org/apache/catalina/valves/AccessLogValve.html\" rel=\"nofollow noreferrer\">here</a>.</p>\n"},{"tags":[],"owner":{"account_id":3325339,"reputation":1198,"user_id":2795536,"accept_rate":88,"display_name":"Max Mazur"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1661435232,"creation_date":1661434797,"answer_id":73488568,"question_id":42220573,"body_markdown":"Just to add a full example of how I managed to do this. Since the existing answer didn&#39;t provide a very detailed explanation on how to obtain this goal.\r\n\r\nIn your spring web security config type following lines.\r\n\r\n    @Bean\r\n    public SecurityFilterChain filterChain(HttpSecurity http) throws Exception {\r\n        return http\r\n                .csrf().disable()\r\n                .authorizeRequests()\r\n                .anyRequest().authenticated()\r\n                .and()\r\n                .httpBasic()\r\n                .and()\r\n                .addFilterAfter(usernameAccessLogFilter(), BasicAuthenticationFilter.class)\r\n                .build();\r\n    }\r\n\r\n    @Bean\r\n        public UsernameAccessLogFilter usernameAccessLogFilter(){\r\n            return new UsernameAccessLogFilter();\r\n        }\r\n\r\nThen create a custom filter:\r\n\r\n    public class UsernameAccessLogFilter extends GenericFilterBean {\r\n    @Override\r\n    public void doFilter(ServletRequest servletRequest, ServletResponse servletResponse, FilterChain filterChain) throws IOException, ServletException {\r\n        HttpServletRequest request = ((HttpServletRequest) servletRequest);\r\n\r\n        Authentication authentication = SecurityContextHolder.getContext().getAuthentication();\r\n        if(authentication != null) {\r\n            request.getSession().setAttribute(&quot;user&quot;, authentication.getName());\r\n        }\r\n        filterChain.doFilter(servletRequest, servletResponse);\r\n    }\r\n}\r\n\r\nIn your properties file (.yml format) add following:\r\n\r\n    server:\r\n      tomcat:\r\n        accesslog:\r\n          enabled: true\r\n          directory: logs\r\n          pattern: &quot;%t %a %A %r %s %u %{user}s %B %T %I&quot;\r\n        basedir: .\r\n\r\nThis was everything I had to do to obtain the above result.","title":"Spring boot with embedded tomcat + access log with authentication user","body":"<p>Just to add a full example of how I managed to do this. Since the existing answer didn't provide a very detailed explanation on how to obtain this goal.</p>\n<p>In your spring web security config type following lines.</p>\n<pre><code>@Bean\npublic SecurityFilterChain filterChain(HttpSecurity http) throws Exception {\n    return http\n            .csrf().disable()\n            .authorizeRequests()\n            .anyRequest().authenticated()\n            .and()\n            .httpBasic()\n            .and()\n            .addFilterAfter(usernameAccessLogFilter(), BasicAuthenticationFilter.class)\n            .build();\n}\n\n@Bean\n    public UsernameAccessLogFilter usernameAccessLogFilter(){\n        return new UsernameAccessLogFilter();\n    }\n</code></pre>\n<p>Then create a custom filter:</p>\n<pre><code>public class UsernameAccessLogFilter extends GenericFilterBean {\n@Override\npublic void doFilter(ServletRequest servletRequest, ServletResponse servletResponse, FilterChain filterChain) throws IOException, ServletException {\n    HttpServletRequest request = ((HttpServletRequest) servletRequest);\n\n    Authentication authentication = SecurityContextHolder.getContext().getAuthentication();\n    if(authentication != null) {\n        request.getSession().setAttribute(&quot;user&quot;, authentication.getName());\n    }\n    filterChain.doFilter(servletRequest, servletResponse);\n}\n</code></pre>\n<p>}</p>\n<p>In your properties file (.yml format) add following:</p>\n<pre><code>server:\n  tomcat:\n    accesslog:\n      enabled: true\n      directory: logs\n      pattern: &quot;%t %a %A %r %s %u %{user}s %B %T %I&quot;\n    basedir: .\n</code></pre>\n<p>This was everything I had to do to obtain the above result.</p>\n"}],"owner":{"account_id":10245791,"reputation":123,"user_id":7561621,"display_name":"Vasill Yordanov"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":4301,"favorite_count":0,"down_vote_count":0,"up_vote_count":12,"accepted_answer_id":42220947,"answer_count":2,"score":12,"last_activity_date":1661435232,"creation_date":1487058646,"question_id":42220573,"body_markdown":"I&#39;m using spring boot with embedded tomcat + spring security. \r\nMy access log from tomcat seems like this \r\n\r\nIP - - [14/Feb/2017:08:49:50 +0200] &quot;GET /page/2 HTTP/1.1&quot; 200 2606\r\n\r\nSo, how can i make log file to looks like \r\n\r\nIP - - [14/Feb/2017:08:49:50 +0200]  **username** - &quot;GET /page/2 HTTP/1.1&quot; 200 2606\r\n\r\nEvery request have to have the username from which is made. For security authentication i&#39;m using spring security with database username and password info.","title":"Spring boot with embedded tomcat + access log with authentication user","body":"<p>I'm using spring boot with embedded tomcat + spring security. \nMy access log from tomcat seems like this </p>\n\n<p>IP - - [14/Feb/2017:08:49:50 +0200] \"GET /page/2 HTTP/1.1\" 200 2606</p>\n\n<p>So, how can i make log file to looks like </p>\n\n<p>IP - - [14/Feb/2017:08:49:50 +0200]  <strong>username</strong> - \"GET /page/2 HTTP/1.1\" 200 2606</p>\n\n<p>Every request have to have the username from which is made. For security authentication i'm using spring security with database username and password info.</p>\n"},{"tags":["java","lucene"],"comments":[{"owner":{"account_id":1114067,"reputation":196781,"user_id":1103872,"accept_rate":82,"display_name":"Marko Topolnik"},"score":1,"creation_date":1413543389,"post_id":26423045,"comment_id":41492215,"body_markdown":"Have you compared the performance of 2) and 3)? Personally I&#39;d probably choose 2) and I think that&#39;s the &quot;official&quot; way to do it.","body":"Have you compared the performance of 2) and 3)? Personally I&#39;d probably choose 2) and I think that&#39;s the &quot;official&quot; way to do it."},{"owner":{"account_id":3193114,"reputation":461,"user_id":2696957,"accept_rate":75,"display_name":"Jeroen"},"score":0,"creation_date":1413551402,"post_id":26423045,"comment_id":41496429,"body_markdown":"I&#39;m afraid the caching mechanism of Lucene may trouble the results when measuring performance. Would be tricky to do.","body":"I&#39;m afraid the caching mechanism of Lucene may trouble the results when measuring performance. Would be tricky to do."},{"owner":{"account_id":1114067,"reputation":196781,"user_id":1103872,"accept_rate":82,"display_name":"Marko Topolnik"},"score":2,"creation_date":1413551502,"post_id":26423045,"comment_id":41496497,"body_markdown":"The point is to measure it exactly the way you plan to use it.","body":"The point is to measure it exactly the way you plan to use it."},{"owner":{"account_id":3193114,"reputation":461,"user_id":2696957,"accept_rate":75,"display_name":"Jeroen"},"score":1,"creation_date":1413553284,"post_id":26423045,"comment_id":41497581,"body_markdown":"Difficulty with measuring is: if I first get those values for DocId 1 using option 2 and then option 3, the system may have cached it for option 2, so option 3 uses cache and appears faster. \nOk, so I used System.nanoTime() to measure before and after for both option 2 and 3. On average for 100 cases, option 3 is 8* faster! Even if I run it a few times on the same docs, which would&#39;ve left it in the cache I suppose for the second run to both benefit from it. It makes sense, reading numeric exact values doesn&#39;t require any normalization, so probably the searcher is creating unnecessary overhead","body":"Difficulty with measuring is: if I first get those values for DocId 1 using option 2 and then option 3, the system may have cached it for option 2, so option 3 uses cache and appears faster.  Ok, so I used System.nanoTime() to measure before and after for both option 2 and 3. On average for 100 cases, option 3 is 8* faster! Even if I run it a few times on the same docs, which would&#39;ve left it in the cache I suppose for the second run to both benefit from it. It makes sense, reading numeric exact values doesn&#39;t require any normalization, so probably the searcher is creating unnecessary overhead"},{"owner":{"account_id":1114067,"reputation":196781,"user_id":1103872,"accept_rate":82,"display_name":"Marko Topolnik"},"score":1,"creation_date":1413553405,"post_id":26423045,"comment_id":41497658,"body_markdown":"And now we&#39;ve both learned something :) I suggest writing your own answer with this valuable finding. If possible, include your testing code so people can corroborate the claim.","body":"And now we&#39;ve both learned something :) I suggest writing your own answer with this valuable finding. If possible, include your testing code so people can corroborate the claim."},{"owner":{"account_id":3193114,"reputation":461,"user_id":2696957,"accept_rate":75,"display_name":"Jeroen"},"score":0,"creation_date":1413554196,"post_id":26423045,"comment_id":41498133,"body_markdown":"Done so - only doubt left on the table is if option 2) perhaps is ranking results, which is not needed for document counting.","body":"Done so - only doubt left on the table is if option 2) perhaps is ranking results, which is not needed for document counting."}],"answers":[{"tags":[],"owner":{"account_id":3193114,"reputation":461,"user_id":2696957,"accept_rate":75,"display_name":"Jeroen"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1439227950,"creation_date":1413554165,"answer_id":26426665,"question_id":26423045,"body_markdown":"Measured by doing a test, using the index to fetch the docs rather than search for them (i.e. option 3 instead of option 2) appears to be faster (average: **option 3) was 8 times faster in a 100 doc sample** I could run). \r\nI&#39;ve also reversed the test to ensure that running one before the other doesn&#39;t affect results: it doesn&#39;t.\r\n\r\nSo it appears the searcher is creating quite some overhead to perform a simple document count, and if one looks into counting docs for a single term entry, a lookup in the index is fastest.\r\n\r\ncode used to test (using first 100 records in SOLR index):\r\n\r\n    import org.apache.lucene.index.IndexReader;\r\n    import org.apache.lucene.index.DirectoryReader;\r\n    import org.apache.lucene.index.Fields;\r\n    import org.apache.lucene.index.DocsEnum;\r\n    import org.apache.lucene.document.Document;\r\n    import org.apache.lucene.index.TermsEnum;\r\n    import org.apache.lucene.index.Term;\r\n    import org.apache.lucene.index.MultiFields;\r\n    import org.apache.lucene.util.BytesRef;\r\n    import org.apache.lucene.util.BytesRefBuilder;\r\n    import org.apache.lucene.util.NumericUtils;\r\n    import org.apache.lucene.queryparser.classic.ParseException;\r\n    import org.apache.lucene.store.Directory;\r\n    import org.apache.lucene.store.FSDirectory;\r\n    import org.apache.lucene.search.DocIdSetIterator;\r\n    import org.apache.lucene.search.IndexSearcher;\r\n    import org.apache.lucene.search.TermQuery;\r\n    import org.apache.lucene.search.TotalHitCountCollector;\r\n    import org.apache.lucene.util.Bits;\r\n    import org.apache.lucene.index.MultiFields;\r\n    \r\n    public class ReadLongTermReferenceCount {\r\n    \r\n    \tpublic static void main(String[] args) throws IOException {\r\n    \r\n    \t\tDirectory dirIndex = FSDirectory.open(&#39;/path/to/index/&#39;);\r\n    \t\tIndexReader indexReader = DirectoryReader.open(dirIndex);\r\n    \t\tfinal BytesRefBuilder bytes = new BytesRefBuilder(); \r\n    \t\t\r\n    \r\n    \t\tTermsEnum termEnum = MultiFields.getTerms(indexReader, &quot;field&quot;).iterator(null);\r\n    \r\n    \t\tIndexSearcher searcher = new IndexSearcher(indexReader);\r\n    \t\tTotalHitCountCollector collector = new TotalHitCountCollector();\r\n    \t\t\r\n    \t\tBits liveDocs = MultiFields.getLiveDocs(indexReader);\r\n    \t\tfinal BytesRefBuilder bytes = new BytesRefBuilder(); // for reuse!\r\n    \t\tint maxDoc = indexReader.maxDoc();\r\n    \t\tint docsPassed = 0;\r\n    \t\tfor (int i=0; i&lt;maxDoc; i++) {\r\n    \t\t\tif (docsPassed==100) {\r\n    \t\t\t\tbreak;\r\n    \t\t\t}\r\n    \t\t\tif (liveDocs != null &amp;&amp; !liveDocs.get(i))\r\n    \t\t\t\tcontinue;\r\n    \t\t\tDocument doc = indexReader.document(i);\r\n    \t\t\t\r\n    \t\t\t//get longTerm from this doc and convert to BytesRefBuilder\r\n    \t\t\tString longTerm = doc.get(&quot;longTerm&quot;);\r\n    \t\t\tNumericUtils.longToPrefixCoded(Long.valueOf(longTerm).longValue(),0,bytes);\r\n    \t\t\t\r\n\t\t\t\t//time before the first test\r\n    \t\t\tlong time_start = System.nanoTime();\r\n    \t\t\t\r\n\t\t\t\t//look in the &quot;field&quot; index for longTerm and count the number of documents\r\n    \t\t\tint count = 0;\r\n    \t\t\ttermEnum.seekExact(bytes.toBytesRef());\r\n    \t\t\tDocsEnum docsEnum = termEnum.docs(liveDocs, null);\r\n    \t\t\tif (docsEnum != null) {\r\n    \t\t\t\tint docx;\r\n    \t\t\t\twhile ((docx = docsEnum.nextDoc()) != DocIdSetIterator.NO_MORE_DOCS) {\r\n    \t\t\t\t\tcount++;\r\n    \t\t\t\t}\r\n    \t\t\t}\r\n    \t\t\t\r\n\t\t\t\t//mid point: test 1 done, start of test 2\r\n    \t\t\tlong time_mid = System.nanoTime();\r\n    \t\t\t\r\n\t\t\t\t//do a search for longTerm in &quot;field&quot;\r\n    \t\t\tTermQuery query = new TermQuery(new Term(&quot;field&quot;, bytes.toBytesRef()));\r\n    \t\t\tsearcher.search(query,collector);\r\n    \t\t\tint count = collector.getTotalHits();\r\n    \t\t\t\r\n\t\t\t\t//end point: test 2 done.\r\n    \t\t\tlong time_end = System.nanoTime();\r\n    \t\t\t\r\n    \t\t\t//write to stdout\r\n    \t\t\tSystem.out.println(longTerm+&quot;\\t&quot;+(time_mid-time_start)+&quot;\\t&quot;+(time_end-time_mid));\r\n    \r\n    \t\t\tdocsPassed++;\r\n    \t\t}\r\n    \t\tindexReader.close();\r\n    \t\tdirIndex.close();\r\n    \t}\r\n    }\t\r\n\r\nSlight modification of above to work with Lucene 5:\r\n\r\n    import org.apache.lucene.index.IndexReader;\r\n    import org.apache.lucene.index.DirectoryReader;\r\n    import org.apache.lucene.index.Fields;\r\n    import org.apache.lucene.index.PostingsEnum;\r\n    import org.apache.lucene.document.Document;\r\n    import org.apache.lucene.index.TermsEnum;\r\n    import org.apache.lucene.index.Term;\r\n    import org.apache.lucene.index.MultiFields;\r\n    import org.apache.lucene.util.BytesRef;\r\n    import org.apache.lucene.util.BytesRefBuilder;\r\n    import org.apache.lucene.util.NumericUtils;\r\n    import org.apache.lucene.queryparser.classic.ParseException;\r\n    import org.apache.lucene.store.Directory;\r\n    import org.apache.lucene.store.FSDirectory;\r\n    import org.apache.lucene.search.DocIdSetIterator;\r\n    import org.apache.lucene.search.IndexSearcher;\r\n    import org.apache.lucene.search.TermQuery;\r\n    import org.apache.lucene.search.TotalHitCountCollector;\r\n    import org.apache.lucene.util.Bits;\r\n    import org.apache.lucene.index.MultiFields;\r\n    \r\n    public class ReadLongTermReferenceCount {\r\n    \r\n    \tpublic static void main(String[] args) throws IOException {\r\n    \r\n    \t\tDirectory dirIndex = FSDirectory.open(Paths.get(&#39;/path/to/index/&#39;));\r\n    \t\tIndexReader indexReader = DirectoryReader.open(dirIndex);\r\n    \t\tfinal BytesRefBuilder bytes = new BytesRefBuilder(); \r\n    \t\t\r\n    \r\n    \t\tTermsEnum termEnum = MultiFields.getTerms(indexReader, &quot;field&quot;).iterator(null);\r\n    \r\n    \t\tIndexSearcher searcher = new IndexSearcher(indexReader);\r\n    \t\tTotalHitCountCollector collector = new TotalHitCountCollector();\r\n    \t\t\r\n    \t\tBits liveDocs = MultiFields.getLiveDocs(indexReader);\r\n    \t\tfinal BytesRefBuilder bytes = new BytesRefBuilder(); // for reuse!\r\n    \t\tint maxDoc = indexReader.maxDoc();\r\n    \t\tint docsPassed = 0;\r\n    \t\tfor (int i=0; i&lt;maxDoc; i++) {\r\n    \t\t\tif (docsPassed==100) {\r\n    \t\t\t\tbreak;\r\n    \t\t\t}\r\n    \t\t\tif (liveDocs != null &amp;&amp; !liveDocs.get(i))\r\n    \t\t\t\tcontinue;\r\n    \t\t\tDocument doc = indexReader.document(i);\r\n    \t\t\t\r\n    \t\t\t//get longTerm from this doc and convert to BytesRefBuilder\r\n    \t\t\tString longTerm = doc.get(&quot;longTerm&quot;);\r\n    \t\t\tNumericUtils.longToPrefixCoded(Long.valueOf(longTerm).longValue(),0,bytes);\r\n    \t\t\t\r\n\t\t\t\t//time before the first test\r\n    \t\t\tlong time_start = System.nanoTime();\r\n    \t\t\t\r\n\t\t\t\t//look in the &quot;field&quot; index for longTerm and count the number of documents\r\n    \t\t\tint count = 0;\r\n    \t\t\ttermEnum.seekExact(bytes.toBytesRef());\r\n    \t\t\tPostingsEnum docsEnum = termEnum.postings(liveDocs, null);\r\n    \t\t\tif (docsEnum != null) {\r\n    \t\t\t\tint docx;\r\n    \t\t\t\twhile ((docx = docsEnum.nextDoc()) != DocIdSetIterator.NO_MORE_DOCS) {\r\n    \t\t\t\t\tcount++;\r\n    \t\t\t\t}\r\n    \t\t\t}\r\n    \t\t\t\r\n\t\t\t\t//mid point: test 1 done, start of test 2\r\n    \t\t\tlong time_mid = System.nanoTime();\r\n    \t\t\t\r\n\t\t\t\t//do a search for longTerm in &quot;field&quot;\r\n    \t\t\tTermQuery query = new TermQuery(new Term(&quot;field&quot;, bytes.toBytesRef()));\r\n    \t\t\tsearcher.search(query,collector);\r\n    \t\t\tint count = collector.getTotalHits();\r\n    \t\t\t\r\n\t\t\t\t//end point: test 2 done.\r\n    \t\t\tlong time_end = System.nanoTime();\r\n    \t\t\t\r\n    \t\t\t//write to stdout\r\n    \t\t\tSystem.out.println(longTerm+&quot;\\t&quot;+(time_mid-time_start)+&quot;\\t&quot;+(time_end-time_mid));\r\n    \r\n    \t\t\tdocsPassed++;\r\n    \t\t}\r\n    \t\tindexReader.close();\r\n    \t\tdirIndex.close();\r\n    \t}\r\n    }\t","title":"Fastest way of counting number of documents for Lucene term","body":"<p>Measured by doing a test, using the index to fetch the docs rather than search for them (i.e. option 3 instead of option 2) appears to be faster (average: <strong>option 3) was 8 times faster in a 100 doc sample</strong> I could run). \nI've also reversed the test to ensure that running one before the other doesn't affect results: it doesn't.</p>\n\n<p>So it appears the searcher is creating quite some overhead to perform a simple document count, and if one looks into counting docs for a single term entry, a lookup in the index is fastest.</p>\n\n<p>code used to test (using first 100 records in SOLR index):</p>\n\n<pre><code>import org.apache.lucene.index.IndexReader;\nimport org.apache.lucene.index.DirectoryReader;\nimport org.apache.lucene.index.Fields;\nimport org.apache.lucene.index.DocsEnum;\nimport org.apache.lucene.document.Document;\nimport org.apache.lucene.index.TermsEnum;\nimport org.apache.lucene.index.Term;\nimport org.apache.lucene.index.MultiFields;\nimport org.apache.lucene.util.BytesRef;\nimport org.apache.lucene.util.BytesRefBuilder;\nimport org.apache.lucene.util.NumericUtils;\nimport org.apache.lucene.queryparser.classic.ParseException;\nimport org.apache.lucene.store.Directory;\nimport org.apache.lucene.store.FSDirectory;\nimport org.apache.lucene.search.DocIdSetIterator;\nimport org.apache.lucene.search.IndexSearcher;\nimport org.apache.lucene.search.TermQuery;\nimport org.apache.lucene.search.TotalHitCountCollector;\nimport org.apache.lucene.util.Bits;\nimport org.apache.lucene.index.MultiFields;\n\npublic class ReadLongTermReferenceCount {\n\n    public static void main(String[] args) throws IOException {\n\n        Directory dirIndex = FSDirectory.open('/path/to/index/');\n        IndexReader indexReader = DirectoryReader.open(dirIndex);\n        final BytesRefBuilder bytes = new BytesRefBuilder(); \n\n\n        TermsEnum termEnum = MultiFields.getTerms(indexReader, \"field\").iterator(null);\n\n        IndexSearcher searcher = new IndexSearcher(indexReader);\n        TotalHitCountCollector collector = new TotalHitCountCollector();\n\n        Bits liveDocs = MultiFields.getLiveDocs(indexReader);\n        final BytesRefBuilder bytes = new BytesRefBuilder(); // for reuse!\n        int maxDoc = indexReader.maxDoc();\n        int docsPassed = 0;\n        for (int i=0; i&lt;maxDoc; i++) {\n            if (docsPassed==100) {\n                break;\n            }\n            if (liveDocs != null &amp;&amp; !liveDocs.get(i))\n                continue;\n            Document doc = indexReader.document(i);\n\n            //get longTerm from this doc and convert to BytesRefBuilder\n            String longTerm = doc.get(\"longTerm\");\n            NumericUtils.longToPrefixCoded(Long.valueOf(longTerm).longValue(),0,bytes);\n\n            //time before the first test\n            long time_start = System.nanoTime();\n\n            //look in the \"field\" index for longTerm and count the number of documents\n            int count = 0;\n            termEnum.seekExact(bytes.toBytesRef());\n            DocsEnum docsEnum = termEnum.docs(liveDocs, null);\n            if (docsEnum != null) {\n                int docx;\n                while ((docx = docsEnum.nextDoc()) != DocIdSetIterator.NO_MORE_DOCS) {\n                    count++;\n                }\n            }\n\n            //mid point: test 1 done, start of test 2\n            long time_mid = System.nanoTime();\n\n            //do a search for longTerm in \"field\"\n            TermQuery query = new TermQuery(new Term(\"field\", bytes.toBytesRef()));\n            searcher.search(query,collector);\n            int count = collector.getTotalHits();\n\n            //end point: test 2 done.\n            long time_end = System.nanoTime();\n\n            //write to stdout\n            System.out.println(longTerm+\"\\t\"+(time_mid-time_start)+\"\\t\"+(time_end-time_mid));\n\n            docsPassed++;\n        }\n        indexReader.close();\n        dirIndex.close();\n    }\n}   \n</code></pre>\n\n<p>Slight modification of above to work with Lucene 5:</p>\n\n<pre><code>import org.apache.lucene.index.IndexReader;\nimport org.apache.lucene.index.DirectoryReader;\nimport org.apache.lucene.index.Fields;\nimport org.apache.lucene.index.PostingsEnum;\nimport org.apache.lucene.document.Document;\nimport org.apache.lucene.index.TermsEnum;\nimport org.apache.lucene.index.Term;\nimport org.apache.lucene.index.MultiFields;\nimport org.apache.lucene.util.BytesRef;\nimport org.apache.lucene.util.BytesRefBuilder;\nimport org.apache.lucene.util.NumericUtils;\nimport org.apache.lucene.queryparser.classic.ParseException;\nimport org.apache.lucene.store.Directory;\nimport org.apache.lucene.store.FSDirectory;\nimport org.apache.lucene.search.DocIdSetIterator;\nimport org.apache.lucene.search.IndexSearcher;\nimport org.apache.lucene.search.TermQuery;\nimport org.apache.lucene.search.TotalHitCountCollector;\nimport org.apache.lucene.util.Bits;\nimport org.apache.lucene.index.MultiFields;\n\npublic class ReadLongTermReferenceCount {\n\n    public static void main(String[] args) throws IOException {\n\n        Directory dirIndex = FSDirectory.open(Paths.get('/path/to/index/'));\n        IndexReader indexReader = DirectoryReader.open(dirIndex);\n        final BytesRefBuilder bytes = new BytesRefBuilder(); \n\n\n        TermsEnum termEnum = MultiFields.getTerms(indexReader, \"field\").iterator(null);\n\n        IndexSearcher searcher = new IndexSearcher(indexReader);\n        TotalHitCountCollector collector = new TotalHitCountCollector();\n\n        Bits liveDocs = MultiFields.getLiveDocs(indexReader);\n        final BytesRefBuilder bytes = new BytesRefBuilder(); // for reuse!\n        int maxDoc = indexReader.maxDoc();\n        int docsPassed = 0;\n        for (int i=0; i&lt;maxDoc; i++) {\n            if (docsPassed==100) {\n                break;\n            }\n            if (liveDocs != null &amp;&amp; !liveDocs.get(i))\n                continue;\n            Document doc = indexReader.document(i);\n\n            //get longTerm from this doc and convert to BytesRefBuilder\n            String longTerm = doc.get(\"longTerm\");\n            NumericUtils.longToPrefixCoded(Long.valueOf(longTerm).longValue(),0,bytes);\n\n            //time before the first test\n            long time_start = System.nanoTime();\n\n            //look in the \"field\" index for longTerm and count the number of documents\n            int count = 0;\n            termEnum.seekExact(bytes.toBytesRef());\n            PostingsEnum docsEnum = termEnum.postings(liveDocs, null);\n            if (docsEnum != null) {\n                int docx;\n                while ((docx = docsEnum.nextDoc()) != DocIdSetIterator.NO_MORE_DOCS) {\n                    count++;\n                }\n            }\n\n            //mid point: test 1 done, start of test 2\n            long time_mid = System.nanoTime();\n\n            //do a search for longTerm in \"field\"\n            TermQuery query = new TermQuery(new Term(\"field\", bytes.toBytesRef()));\n            searcher.search(query,collector);\n            int count = collector.getTotalHits();\n\n            //end point: test 2 done.\n            long time_end = System.nanoTime();\n\n            //write to stdout\n            System.out.println(longTerm+\"\\t\"+(time_mid-time_start)+\"\\t\"+(time_end-time_mid));\n\n            docsPassed++;\n        }\n        indexReader.close();\n        dirIndex.close();\n    }\n}   \n</code></pre>\n"}],"owner":{"account_id":3193114,"reputation":461,"user_id":2696957,"accept_rate":75,"display_name":"Jeroen"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":6047,"favorite_count":0,"down_vote_count":0,"up_vote_count":6,"accepted_answer_id":26426665,"answer_count":1,"score":6,"last_activity_date":1661435001,"creation_date":1413541685,"question_id":26423045,"body_markdown":"I want to count the number of documents in Lucene for a term on a field.\r\nI know 3 ways of doing that; I am curious what the best and fastest practice would be:\r\n\r\nI will search in a long-typed single-valued field (&quot;field&quot;) for the term &lt;longTerm&gt; (so not text, but numbered data!)\r\n\r\n### Some pre-code any of below examples will use first:\r\n\r\n    Directory dirIndex = FSDirectory.open(&#39;/path/to/index/&#39;);\r\n    IndexReader indexReader = DirectoryReader.open(dirIndex);\r\n    final BytesRefBuilder bytes = new BytesRefBuilder(); \r\n    NumericUtils.longToPrefixCoded(Long.valueOf(longTerm).longValue(),0,bytes);\r\n\r\n### 1) use docFreq() from Index\r\n\r\n    TermsEnum termEnum = MultiFields.getTerms(indexReader, &quot;field&quot;).iterator(null);\r\n    termEnum.seekExact(bytes.toBytesRef());\r\n    int count = termEnum.docFreq(); \r\n\r\n### 2) Search for it\r\n    \r\n    IndexSearcher searcher = new IndexSearcher(indexReader);\r\n    TermQuery query = new TermQuery(new Term(&quot;field&quot;, bytes.toBytesRef()));\r\n    TotalHitCountCollector collector = new TotalHitCountCollector();\r\n    searcher.search(query,collector);\r\n    int count = collector.getTotalHits(); \r\n\r\n### 3) Read exact match from index and count the docs one by one\t\t\t\r\n    \r\n    TermsEnum termEnum = MultiFields.getTerms(indexReader, &quot;field&quot;).iterator(null);\r\n    termEnum.seekExact(bytes.toBytesRef());\r\n    Bits liveDocs = MultiFields.getLiveDocs(indexReader);\r\n    DocsEnum docsEnum = termEnum.docs(liveDocs, null);\r\n    int count = 0;\r\n    if (docsEnum != null) {\r\n    \tint docx;\r\n    \twhile ((docx = docsEnum.nextDoc()) != DocIdSetIterator.NO_MORE_DOCS) {\r\n    \t\tcount++;\r\n\t\t}\r\n     }\r\n\r\n### Best method\r\noption 1) wins for shortest code, but is basically useless if you ever update and delete documents in your index. it counts deleted docs as if they&#39;re still there. Not documented in many places (except the official documentation, but not in in answers here on s.o.) that this is something to be aware of. Perhaps there is a way around this, otherwise the enthusiasm about this method is a bit misplaced.\r\noption 2) and 3) do produce the correct results, but which should be preferred? or better yet - is there a faster way of doing this?","title":"Fastest way of counting number of documents for Lucene term","body":"<p>I want to count the number of documents in Lucene for a term on a field.\nI know 3 ways of doing that; I am curious what the best and fastest practice would be:</p>\n\n<p>I will search in a long-typed single-valued field (\"field\") for the term  (so not text, but numbered data!)</p>\n\n<h3>Some pre-code any of below examples will use first:</h3>\n\n<pre><code>Directory dirIndex = FSDirectory.open('/path/to/index/');\nIndexReader indexReader = DirectoryReader.open(dirIndex);\nfinal BytesRefBuilder bytes = new BytesRefBuilder(); \nNumericUtils.longToPrefixCoded(Long.valueOf(longTerm).longValue(),0,bytes);\n</code></pre>\n\n<h3>1) use docFreq() from Index</h3>\n\n<pre><code>TermsEnum termEnum = MultiFields.getTerms(indexReader, \"field\").iterator(null);\ntermEnum.seekExact(bytes.toBytesRef());\nint count = termEnum.docFreq(); \n</code></pre>\n\n<h3>2) Search for it</h3>\n\n<pre><code>IndexSearcher searcher = new IndexSearcher(indexReader);\nTermQuery query = new TermQuery(new Term(\"field\", bytes.toBytesRef()));\nTotalHitCountCollector collector = new TotalHitCountCollector();\nsearcher.search(query,collector);\nint count = collector.getTotalHits(); \n</code></pre>\n\n<h3>3) Read exact match from index and count the docs one by one</h3>\n\n<pre><code>TermsEnum termEnum = MultiFields.getTerms(indexReader, \"field\").iterator(null);\ntermEnum.seekExact(bytes.toBytesRef());\nBits liveDocs = MultiFields.getLiveDocs(indexReader);\nDocsEnum docsEnum = termEnum.docs(liveDocs, null);\nint count = 0;\nif (docsEnum != null) {\n    int docx;\n    while ((docx = docsEnum.nextDoc()) != DocIdSetIterator.NO_MORE_DOCS) {\n        count++;\n    }\n }\n</code></pre>\n\n<h3>Best method</h3>\n\n<p>option 1) wins for shortest code, but is basically useless if you ever update and delete documents in your index. it counts deleted docs as if they're still there. Not documented in many places (except the official documentation, but not in in answers here on s.o.) that this is something to be aware of. Perhaps there is a way around this, otherwise the enthusiasm about this method is a bit misplaced.\noption 2) and 3) do produce the correct results, but which should be preferred? or better yet - is there a faster way of doing this?</p>\n"},{"tags":["java","sql","database"],"comments":[{"owner":{"account_id":41366,"reputation":93989,"user_id":120163,"accept_rate":59,"display_name":"Ira Baxter"},"score":1,"creation_date":1395632009,"post_id":22600604,"comment_id":34410397,"body_markdown":"Depends on what you want out of the SQL code.  As a general rule, if you want fine detail, you&#39;ll need a full SQL parser.   If all you want is a *guess* at the tables involved, you can shred it with regexes.  So the answer depends on really what you think you need.","body":"Depends on what you want out of the SQL code.  As a general rule, if you want fine detail, you&#39;ll need a full SQL parser.   If all you want is a <i>guess</i> at the tables involved, you can shred it with regexes.  So the answer depends on really what you think you need."},{"owner":{"account_id":3036436,"reputation":51,"user_id":2574427,"display_name":"user2574427"},"score":0,"creation_date":1395632149,"post_id":22600604,"comment_id":34410426,"body_markdown":"Well basically this is for a school project. I need to create my own DBMS so I need to be able to parse the SQL and then execute the actions","body":"Well basically this is for a school project. I need to create my own DBMS so I need to be able to parse the SQL and then execute the actions"},{"owner":{"account_id":41366,"reputation":93989,"user_id":120163,"accept_rate":59,"display_name":"Ira Baxter"},"score":2,"creation_date":1395652178,"post_id":22600604,"comment_id":34417779,"body_markdown":"You are building a full SQL-based DBMS for a school project, from scratch?? Are you sure that is the requirement? You&#39;re in for a LOT of work.  You&#39;ll need a full SQL parser (or, at least a full parser for the part of SQL you intend to implement).  And if this is the task, the fact that you were considering Java text hacking to do it, suggests you don&#39;t have the background to do it.  What is the specific class you are taking?","body":"You are building a full SQL-based DBMS for a school project, from scratch?? Are you sure that is the requirement? You&#39;re in for a LOT of work.  You&#39;ll need a full SQL parser (or, at least a full parser for the part of SQL you intend to implement).  And if this is the task, the fact that you were considering Java text hacking to do it, suggests you don&#39;t have the background to do it.  What is the specific class you are taking?"},{"owner":{"account_id":3036436,"reputation":51,"user_id":2574427,"display_name":"user2574427"},"score":0,"creation_date":1395674286,"post_id":22600604,"comment_id":34432892,"body_markdown":"Yes I understand it is a lot of work. The reason I wanted to do it by text hacking is we are also limited in the amount of SQL libraries we can use. This is for a Database class.","body":"Yes I understand it is a lot of work. The reason I wanted to do it by text hacking is we are also limited in the amount of SQL libraries we can use. This is for a Database class."},{"owner":{"account_id":41366,"reputation":93989,"user_id":120163,"accept_rate":59,"display_name":"Ira Baxter"},"score":1,"creation_date":1395700601,"post_id":22600604,"comment_id":34448804,"body_markdown":"I&#39;d expect you to *use* a Database in a DB class, not build one.  You won&#39;t get far trying to process SQL querires with text hacking.  People repeatedly try to do text hacking instead of real parsing, and it always ends painfully.","body":"I&#39;d expect you to <i>use</i> a Database in a DB class, not build one.  You won&#39;t get far trying to process SQL querires with text hacking.  People repeatedly try to do text hacking instead of real parsing, and it always ends painfully."},{"owner":{"display_name":"user330315"},"score":0,"creation_date":1396000233,"post_id":22600604,"comment_id":34604265,"body_markdown":"Unrelated but: I&#39;m pretty sure you do **not** want to store the department name in a `CHAR(30)` column, but a `VARCHAR(30)` instead.","body":"Unrelated but: I&#39;m pretty sure you do <b>not</b> want to store the department name in a <code>CHAR(30)</code> column, but a <code>VARCHAR(30)</code> instead."},{"owner":{"account_id":42154,"reputation":1860,"user_id":122742,"display_name":"Andre Artus"},"score":0,"creation_date":1396012922,"post_id":22600604,"comment_id":34612885,"body_markdown":"@user2574427, I&#39;m going to concur with Ira that you have either misunderstood the requirements, or you have been ill prepared for it. That you would consider string splitting a viable option leads me to strongly urge you to consult your teacher for clarification. \n\nParsing the SQL expressions and/or DDL statements, while non trivial, is amongst the easier bits of building a DBMS.\n\nWould it be possible to reproduce the requirements verbatim as part of your question, the answer you need may not be the one asked for.","body":"@user2574427, I&#39;m going to concur with Ira that you have either misunderstood the requirements, or you have been ill prepared for it. That you would consider string splitting a viable option leads me to strongly urge you to consult your teacher for clarification.   Parsing the SQL expressions and/or DDL statements, while non trivial, is amongst the easier bits of building a DBMS.  Would it be possible to reproduce the requirements verbatim as part of your question, the answer you need may not be the one asked for."}],"answers":[{"tags":[],"owner":{"account_id":41366,"reputation":93989,"user_id":120163,"accept_rate":59,"display_name":"Ira Baxter"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1395999981,"creation_date":1395999981,"answer_id":22709158,"question_id":22600604,"body_markdown":"If you are working in Java, I&#39;d suggest looking into a Java-based parser generator with an available SQL grammar.    ANTLR seems like a good choice for this.\r\n","title":"Parsing SQL commands","body":"<p>If you are working in Java, I'd suggest looking into a Java-based parser generator with an available SQL grammar.    ANTLR seems like a good choice for this.</p>\n"},{"tags":[],"owner":{"account_id":247217,"reputation":213455,"user_id":521799,"accept_rate":89,"display_name":"Lukas Eder"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1661434808,"creation_date":1661434808,"answer_id":73488575,"question_id":22600604,"body_markdown":"If you&#39;re OK with using third parties, there are numerous parsers out there, including:\r\n\r\n- [jOOQ, which has a parser][1]\r\n- [JsqlParser][2]\r\n- [General SQL Parser][3]\r\n\r\nYou could parse your code like this:\r\n\r\n```java\r\nQueries queries = ctx.parser().parse(&quot;CREATE TABLE ...&quot;);\r\n```\r\n\r\nAnd then access the expression tree, e.g. to find the check constraint\r\n\r\n```java\r\nctx.parser().parse(&quot;CREATE TABLE t (i int check (i &gt; 0))&quot;)\r\n    .forEach(q -&gt; {\r\n        if (q instanceof CreateTable ct) {\r\n            for (TableElement e : ct.$tableElements()) {\r\n                if (e instanceof Constraint c) {\r\n                    println(c);\r\n                }\r\n            }\r\n        }\r\n    });\r\n```\r\n\r\nNote that as of jOOQ 3.17, [the traversal is still experimental][4]\r\n\r\n\r\nDisclaimer: I work for the company behind jOOQ\r\n\r\n\r\n  [1]: https://www.jooq.org/doc/latest/manual/sql-building/sql-parser/\r\n  [2]: https://github.com/JSQLParser/JSqlParser\r\n  [3]: https://www.sqlparser.com/\r\n  [4]: https://www.jooq.org/doc/latest/manual/sql-building/model-api/model-api-traversal/","title":"Parsing SQL commands","body":"<p>If you're OK with using third parties, there are numerous parsers out there, including:</p>\n<ul>\n<li><a href=\"https://www.jooq.org/doc/latest/manual/sql-building/sql-parser/\" rel=\"nofollow noreferrer\">jOOQ, which has a parser</a></li>\n<li><a href=\"https://github.com/JSQLParser/JSqlParser\" rel=\"nofollow noreferrer\">JsqlParser</a></li>\n<li><a href=\"https://www.sqlparser.com/\" rel=\"nofollow noreferrer\">General SQL Parser</a></li>\n</ul>\n<p>You could parse your code like this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>Queries queries = ctx.parser().parse(&quot;CREATE TABLE ...&quot;);\n</code></pre>\n<p>And then access the expression tree, e.g. to find the check constraint</p>\n<pre class=\"lang-java prettyprint-override\"><code>ctx.parser().parse(&quot;CREATE TABLE t (i int check (i &gt; 0))&quot;)\n    .forEach(q -&gt; {\n        if (q instanceof CreateTable ct) {\n            for (TableElement e : ct.$tableElements()) {\n                if (e instanceof Constraint c) {\n                    println(c);\n                }\n            }\n        }\n    });\n</code></pre>\n<p>Note that as of jOOQ 3.17, <a href=\"https://www.jooq.org/doc/latest/manual/sql-building/model-api/model-api-traversal/\" rel=\"nofollow noreferrer\">the traversal is still experimental</a></p>\n<p>Disclaimer: I work for the company behind jOOQ</p>\n"}],"owner":{"account_id":3036436,"reputation":51,"user_id":2574427,"display_name":"user2574427"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":164,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":2,"score":2,"last_activity_date":1661434808,"creation_date":1395631857,"question_id":22600604,"body_markdown":"Basically I need to be able to parse a couple of SQL commands but I am not really sure of a good way.\r\n\r\nHere is an example of the SQL commands\r\n\r\n    CREATE TABLE DEPARTMENT (\r\n\t\t\tdeptid INT CHECK(deptid &gt; 0 AND deptid &lt; 100), \r\n\t\t\tdname CHAR(30), \r\n\t\t\tlocation CHAR(10), \r\n\t\t\tPRIMARY KEY(deptid)\r\n\t\t);\r\n\r\n    INSERT INTO STUDENT VALUES (16711,&#39;A.Smith&#39;,22,&#39;A&#39;,20);\r\n\r\nI am coding in java so would split be the best way? Or should I write my own parser? If so, can someone give me an example of how to parse it specifically Strings that are surrounded by &#39; &#39; but might contain a &#39; inside. Also for the CREATE TABLE I need to some how separate the CHECK parameters  ","title":"Parsing SQL commands","body":"<p>Basically I need to be able to parse a couple of SQL commands but I am not really sure of a good way.</p>\n\n<p>Here is an example of the SQL commands</p>\n\n<pre><code>CREATE TABLE DEPARTMENT (\n        deptid INT CHECK(deptid &gt; 0 AND deptid &lt; 100), \n        dname CHAR(30), \n        location CHAR(10), \n        PRIMARY KEY(deptid)\n    );\n\nINSERT INTO STUDENT VALUES (16711,'A.Smith',22,'A',20);\n</code></pre>\n\n<p>I am coding in java so would split be the best way? Or should I write my own parser? If so, can someone give me an example of how to parse it specifically Strings that are surrounded by ' ' but might contain a ' inside. Also for the CREATE TABLE I need to some how separate the CHECK parameters  </p>\n"},{"tags":["java","user-interface","swt","keylistener","draw2d"],"answers":[{"tags":[],"owner":{"account_id":120200,"reputation":5138,"user_id":312480,"accept_rate":95,"display_name":"Andy"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1661434569,"creation_date":1286392513,"answer_id":3876081,"question_id":3875507,"body_markdown":"Try using the following condition to check for CTRL-C (EDIT: AWT/Swing):\r\n\r\n    public void keyReleased(KeyEvent event) {\r\n      if (event.getKeyCode() == KeyEvent.VK_C &amp;&amp; event.getModifiers() == InputEvent.CTRL_MASK)\r\n        someStuff();\r\n    }","title":"Handle key presses using swt","body":"<p>Try using the following condition to check for CTRL-C (EDIT: AWT/Swing):</p>\n<pre><code>public void keyReleased(KeyEvent event) {\n  if (event.getKeyCode() == KeyEvent.VK_C &amp;&amp; event.getModifiers() == InputEvent.CTRL_MASK)\n    someStuff();\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":46515,"reputation":8715,"user_id":137483,"accept_rate":96,"display_name":"True Soft"},"down_vote_count":0,"up_vote_count":7,"is_accepted":true,"score":7,"last_activity_date":1286430714,"creation_date":1286430714,"answer_id":3879047,"question_id":3875507,"body_markdown":"Try this:\r\n\r\n    getShape().addListener(SWT.KeyUp, new Listener() {\r\n        public void handleEvent(Event event) {\r\n            if (event.stateMask == SWT.CTRL &amp;&amp; event.keyCode == &#39;c&#39;) {\r\n                someStuff();\r\n            }\r\n        }});\r\n","title":"Handle key presses using swt","body":"<p>Try this:</p>\n\n<pre><code>getShape().addListener(SWT.KeyUp, new Listener() {\n    public void handleEvent(Event event) {\n        if (event.stateMask == SWT.CTRL &amp;&amp; event.keyCode == 'c') {\n            someStuff();\n        }\n    }});\n</code></pre>\n"}],"owner":{"account_id":81920,"reputation":15634,"user_id":230717,"accept_rate":95,"display_name":"Stan Kurilin"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":4808,"favorite_count":0,"down_vote_count":0,"up_vote_count":7,"accepted_answer_id":3879047,"answer_count":2,"score":7,"last_activity_date":1661434569,"creation_date":1286388007,"question_id":3875507,"body_markdown":"I&#39;m want do *someStuff()* when *CTRL-C* pressed. I had wrote some code, but it &quot;not enough good&quot;. What can I do with it?)\r\n\r\n        //org.eclipse.draw2d.Shape getShape(){....}\r\n\r\n        getShape().addKeyListener(new KeyListener(){\r\n\r\n\t\t\t@Override\r\n\t\t\tpublic void keyPressed(KeyEvent ke) {\r\n\t\t\t}\r\n\r\n\t\t\t@Override\r\n\t\t\tpublic void keyReleased(KeyEvent ke) {\r\n\t\t\t\t/*if CTRL-C pressed*/\r\n\t\t\t\tif((ke.getState() &amp; KeyEvent.CONTROL) != 0 &amp;&amp; &#39;c&#39; == (&#39;a&#39; + ke.character - 1)){\r\n\t\t\t\t\tsomeStuff();\r\n\t\t\t\t} \r\n\t\t\t}\r\n    \t});\r\n\r\nThanks.","title":"Handle key presses using swt","body":"<p><br>\nI'm want do <em>someStuff()</em> when <em>CTRL-C</em> pressed. I had wrote some code, but it \"not enough good\". What can I do with it?)</p>\n\n<pre><code>    //org.eclipse.draw2d.Shape getShape(){....}\n\n    getShape().addKeyListener(new KeyListener(){\n\n        @Override\n        public void keyPressed(KeyEvent ke) {\n        }\n\n        @Override\n        public void keyReleased(KeyEvent ke) {\n            /*if CTRL-C pressed*/\n            if((ke.getState() &amp; KeyEvent.CONTROL) != 0 &amp;&amp; 'c' == ('a' + ke.character - 1)){\n                someStuff();\n            } \n        }\n    });\n</code></pre>\n\n<p>Thanks.</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":319873,"reputation":87612,"user_id":637853,"accept_rate":50,"display_name":"Thomas"},"score":0,"creation_date":1661433612,"post_id":73488160,"comment_id":129775200,"body_markdown":"Just think about what happens if you&#39;re missing those intermediate returns in recursive calls: the last call might return the found index but how would the second to last call know it should return anything if that statement was missing?","body":"Just think about what happens if you&#39;re missing those intermediate returns in recursive calls: the last call might return the found index but how would the second to last call know it should return anything if that statement was missing?"},{"owner":{"account_id":319873,"reputation":87612,"user_id":637853,"accept_rate":50,"display_name":"Thomas"},"score":0,"creation_date":1661433776,"post_id":73488160,"comment_id":129775260,"body_markdown":"&quot;I had it as below and it found the value but ended up finally returning as -1 instead of 21&quot; - that cannot be true as the code snipped you posted there wouldn&#39;t compile. If there&#39;s a return value defined the method _always_ will have to return something. There&#39;s also no indication of why it would return -1 so that seems to be missing too.","body":"&quot;I had it as below and it found the value but ended up finally returning as -1 instead of 21&quot; - that cannot be true as the code snipped you posted there wouldn&#39;t compile. If there&#39;s a return value defined the method <i>always</i> will have to return something. There&#39;s also no indication of why it would return -1 so that seems to be missing too."},{"owner":{"account_id":25937120,"reputation":2268,"user_id":19657183,"display_name":"Mihe"},"score":0,"creation_date":1661433954,"post_id":73488160,"comment_id":129775331,"body_markdown":"Apart from what @Thomas wrote: a recursive method call is no different from any other method call. Think of it as if you were calling a different method. What does binarySearch then do? It just calls another method then continues its work.","body":"Apart from what @Thomas wrote: a recursive method call is no different from any other method call. Think of it as if you were calling a different method. What does binarySearch then do? It just calls another method then continues its work."},{"owner":{"account_id":1594443,"reputation":2067,"user_id":1476993,"accept_rate":43,"display_name":"serah"},"score":0,"creation_date":1661434374,"post_id":73488160,"comment_id":129775524,"body_markdown":"@Thomas - I had a return -1 in the end, sorry I missed that. I am adding it to the original thread.","body":"@Thomas - I had a return -1 in the end, sorry I missed that. I am adding it to the original thread."},{"owner":{"account_id":1594443,"reputation":2067,"user_id":1476993,"accept_rate":43,"display_name":"serah"},"score":0,"creation_date":1661435684,"post_id":73488160,"comment_id":129776108,"body_markdown":"@Thomas and Mike thanks for the explanation, Mike&#39;s additional point abovee makes it clearer for me","body":"@Thomas and Mike thanks for the explanation, Mike&#39;s additional point abovee makes it clearer for me"}],"answers":[{"tags":[],"owner":{"account_id":960307,"reputation":107861,"user_id":984823,"display_name":"Joop Eggen"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1661434424,"creation_date":1661434424,"answer_id":73488476,"question_id":73488160,"body_markdown":"First you do not detect failure to find an element. In fact `low` and `high` may run out of bounds by 1.\r\n\r\n    private static int binarySearch(int array[], int low, int high, int target) {\r\n        if (low &gt; high) {\r\n            return -1;\r\n        }\r\n        int mid = (low+high)/2;\r\n        if (array[mid] == target) {\r\n            return mid;\r\n        } else if (target &lt; array[mid]) {\r\n            return binarySearch(array, low, mid - 1, target); //line X\r\n        } else {\r\n            return binarySearch(array, mid + 1, high, target);  //line Y\r\n        }\r\n    }\r\n\r\nIf one `return` is dropped, but the compiler can find a final `return`, the result is that of a temporary result.\r\n\r\nYou could also move the bounds more clearly:\r\n\r\n    private static int binarySearch(int array[], int low, int high, int target) {\r\n        if (low &gt; high) {\r\n            return -1;\r\n        }\r\n        int mid = (low+high)/2;\r\n        if (array[mid] == target) {\r\n            return mid;\r\n        }\r\n        if (target &lt; array[mid]) {\r\n            high = mid - 1;\r\n        } else {\r\n            low = mid + 1;\r\n        }\r\n        return binarySearch(array, low, high, target);\r\n    }\r\n\r\nAnd hence the iterative (non-recursive) version is:\r\n\r\n    private static int binarySearch(int array[], int low, int high, int target) {\r\n        while (low &lt;= high) {\r\n            int mid = (low+high)/2;\r\n            if (array[mid] == target) {\r\n                return mid;\r\n            }\r\n            if (target &lt; array[mid]) {\r\n                high = mid - 1;\r\n            } else {\r\n                low = mid + 1;\r\n            }\r\n        }\r\n        return -1;\r\n    }\r\n\r\n\r\n","title":"binary search tree recursion without return statement on the function calls","body":"<p>First you do not detect failure to find an element. In fact <code>low</code> and <code>high</code> may run out of bounds by 1.</p>\n<pre><code>private static int binarySearch(int array[], int low, int high, int target) {\n    if (low &gt; high) {\n        return -1;\n    }\n    int mid = (low+high)/2;\n    if (array[mid] == target) {\n        return mid;\n    } else if (target &lt; array[mid]) {\n        return binarySearch(array, low, mid - 1, target); //line X\n    } else {\n        return binarySearch(array, mid + 1, high, target);  //line Y\n    }\n}\n</code></pre>\n<p>If one <code>return</code> is dropped, but the compiler can find a final <code>return</code>, the result is that of a temporary result.</p>\n<p>You could also move the bounds more clearly:</p>\n<pre><code>private static int binarySearch(int array[], int low, int high, int target) {\n    if (low &gt; high) {\n        return -1;\n    }\n    int mid = (low+high)/2;\n    if (array[mid] == target) {\n        return mid;\n    }\n    if (target &lt; array[mid]) {\n        high = mid - 1;\n    } else {\n        low = mid + 1;\n    }\n    return binarySearch(array, low, high, target);\n}\n</code></pre>\n<p>And hence the iterative (non-recursive) version is:</p>\n<pre><code>private static int binarySearch(int array[], int low, int high, int target) {\n    while (low &lt;= high) {\n        int mid = (low+high)/2;\n        if (array[mid] == target) {\n            return mid;\n        }\n        if (target &lt; array[mid]) {\n            high = mid - 1;\n        } else {\n            low = mid + 1;\n        }\n    }\n    return -1;\n}\n</code></pre>\n"}],"owner":{"account_id":1594443,"reputation":2067,"user_id":1476993,"accept_rate":43,"display_name":"serah"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":33,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":73488476,"answer_count":1,"score":0,"last_activity_date":1661434424,"creation_date":1661433218,"question_id":73488160,"body_markdown":"I am learning binary search tree using recursion and I made the below mistake of not adding return in line X and Y as commented out below.\r\n\r\nWhat difference does not having the return statement mean on the stack of the function call? Apologies if the query is very basic but I would like to clarify it here. \r\n\r\nI thought not having the return statement on the function call will still work as it will find a match and return the value if it exists in the array. \r\n\r\nSample values passed to the function\r\n\r\n       int found = searchRecursive(new int[]{0, 1, 21, 33, 45, 45, 61, 71, 72, 73},21);\r\n    \r\n            System.out.println(found);\r\n\r\n \r\n **Code**\r\n\r\n     private static int searchRecursive(int array[], int target) {\r\n            int low = 0;\r\n            int high = array.length -1;\r\n            return binarySearch(array, low, high, target);\r\n        }\r\n\r\n       private static int binarySearch(int array[], int low, int high, int target){\r\n            int mid = (low+high)/2;\r\n            if(array[mid] == target){\r\n                return mid;\r\n            }\r\n            else if(array[mid]&gt;target) {\r\n                return binarySearch(array, low, mid - 1, target); //line X\r\n            } else {\r\n                return binarySearch(array, mid+1, high, target);  //line Y\r\n            }\r\n        }\r\n\r\nSo I had it as below and it found the value but ended up finally returning as -1 instead of 21\r\n\r\n    private static int binarySearch(int array[], int low, int high, int target){\r\n            int mid = (low+high)/2;\r\n            if(array[mid] == target){\r\n                return mid;\r\n            }\r\n            else if(array[mid]&gt;target) {\r\n                binarySearch(array, low, mid - 1, target); //line X\r\n            } else {\r\n                binarySearch(array, mid+1, high, target);  //line Y\r\n            }\r\n            return -1;\r\n        }","title":"binary search tree recursion without return statement on the function calls","body":"<p>I am learning binary search tree using recursion and I made the below mistake of not adding return in line X and Y as commented out below.</p>\n<p>What difference does not having the return statement mean on the stack of the function call? Apologies if the query is very basic but I would like to clarify it here.</p>\n<p>I thought not having the return statement on the function call will still work as it will find a match and return the value if it exists in the array.</p>\n<p>Sample values passed to the function</p>\n<pre><code>   int found = searchRecursive(new int[]{0, 1, 21, 33, 45, 45, 61, 71, 72, 73},21);\n\n        System.out.println(found);\n</code></pre>\n<p><strong>Code</strong></p>\n<pre><code> private static int searchRecursive(int array[], int target) {\n        int low = 0;\n        int high = array.length -1;\n        return binarySearch(array, low, high, target);\n    }\n\n   private static int binarySearch(int array[], int low, int high, int target){\n        int mid = (low+high)/2;\n        if(array[mid] == target){\n            return mid;\n        }\n        else if(array[mid]&gt;target) {\n            return binarySearch(array, low, mid - 1, target); //line X\n        } else {\n            return binarySearch(array, mid+1, high, target);  //line Y\n        }\n    }\n</code></pre>\n<p>So I had it as below and it found the value but ended up finally returning as -1 instead of 21</p>\n<pre><code>private static int binarySearch(int array[], int low, int high, int target){\n        int mid = (low+high)/2;\n        if(array[mid] == target){\n            return mid;\n        }\n        else if(array[mid]&gt;target) {\n            binarySearch(array, low, mid - 1, target); //line X\n        } else {\n            binarySearch(array, mid+1, high, target);  //line Y\n        }\n        return -1;\n    }\n</code></pre>\n"},{"tags":["javascript","java","base64","urlencode"],"answers":[{"tags":[],"owner":{"account_id":2156572,"reputation":3896,"user_id":1911652,"accept_rate":73,"display_name":"Atul"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1661434185,"creation_date":1661434185,"answer_id":73488416,"question_id":73437690,"body_markdown":"Here is answer:\r\n\r\n&gt; However, in one of the Java source code, they have done like this:\r\n&gt;\r\n&gt; String encryptedMessageInBase64 = Base64.getUrlEncoder().encodeToString(encryptedMessageInBytes);*\r\n\r\nHere, basically they have done `UrlEncoding` instead of Base64 encoding. It is nothing but replacing `+` and `/` characters with `-` and `_` characters. Url encoding is when we want to send encoded string over HTTP where it treats these two as special characters this is why we need to replace them with some other characters which are HTTP friendly.","title":"Obtaining same Base64 encoded output of encrypted string in Java and JavaScript","body":"<p>Here is answer:</p>\n<blockquote>\n<p>However, in one of the Java source code, they have done like this:</p>\n<p>String encryptedMessageInBase64 = Base64.getUrlEncoder().encodeToString(encryptedMessageInBytes);*</p>\n</blockquote>\n<p>Here, basically they have done <code>UrlEncoding</code> instead of Base64 encoding. It is nothing but replacing <code>+</code> and <code>/</code> characters with <code>-</code> and <code>_</code> characters. Url encoding is when we want to send encoded string over HTTP where it treats these two as special characters this is why we need to replace them with some other characters which are HTTP friendly.</p>\n"}],"owner":{"account_id":2156572,"reputation":3896,"user_id":1911652,"accept_rate":73,"display_name":"Atul"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":422,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"accepted_answer_id":73488416,"answer_count":1,"score":-1,"last_activity_date":1661434185,"creation_date":1661110820,"question_id":73437690,"body_markdown":"After getting byte array `encryptedMessageInBytes` from AES encryption function call `cipher.doFinal` in Java, I convert the byte array to base64 like this:\r\n\r\n\r\n    String encryptedMessageInBase64 = new String(Base64.getEncoder().encode(encryptedMessageInBytes));\r\n\r\nIn JavaScript, I simply do `.toString()` to the output I get from `CryptoJS.AES.encrypt` method and I get exact same base64 string. i.e.\r\n\t\r\n\tvar encryptedMessageInBase64 = CryptoJS.AES.encrypt(&quot;Message&quot;, &quot;Secret Passphrase&quot;).toString();\r\n\r\n\r\nIt gives same base64 string as in Java code.\r\n\r\nHowever, in one of the Java source code, they have done like this:\r\n\r\n    String encryptedMessageInBase64 = Base64.getUrlEncoder().encodeToString(encryptedMessageInBytes);\r\n\r\n\r\nWhat shall I do in JavaScript to obtain same base64 string?","title":"Obtaining same Base64 encoded output of encrypted string in Java and JavaScript","body":"<p>After getting byte array <code>encryptedMessageInBytes</code> from AES encryption function call <code>cipher.doFinal</code> in Java, I convert the byte array to base64 like this:</p>\n<pre><code>String encryptedMessageInBase64 = new String(Base64.getEncoder().encode(encryptedMessageInBytes));\n</code></pre>\n<p>In JavaScript, I simply do <code>.toString()</code> to the output I get from <code>CryptoJS.AES.encrypt</code> method and I get exact same base64 string. i.e.</p>\n<pre><code>var encryptedMessageInBase64 = CryptoJS.AES.encrypt(&quot;Message&quot;, &quot;Secret Passphrase&quot;).toString();\n</code></pre>\n<p>It gives same base64 string as in Java code.</p>\n<p>However, in one of the Java source code, they have done like this:</p>\n<pre><code>String encryptedMessageInBase64 = Base64.getUrlEncoder().encodeToString(encryptedMessageInBytes);\n</code></pre>\n<p>What shall I do in JavaScript to obtain same base64 string?</p>\n"},{"tags":["java","methods","collections","iterator","return-type"],"comments":[{"owner":{"account_id":195331,"reputation":275408,"user_id":438154,"accept_rate":98,"display_name":"Sotirios Delimanolis"},"score":0,"creation_date":1397357582,"post_id":23038578,"comment_id":35198692,"body_markdown":"[Here&#39;s](http://docs.oracle.com/javase/7/docs/api/java/util/ArrayList.html#iterator()) the javadoc.","body":"<a href=\"http://docs.oracle.com/javase/7/docs/api/java/util/ArrayList.html#iterator()\" rel=\"nofollow noreferrer\">Here&#39;s</a> the javadoc."},{"owner":{"account_id":2808454,"reputation":14373,"user_id":2415194,"accept_rate":87,"display_name":"nachokk"},"score":1,"creation_date":1397357652,"post_id":23038578,"comment_id":35198703,"body_markdown":"concept is [programming to an interface](http://stackoverflow.com/questions/1992384/program-to-an-interface-what-does-it-mean) @SotiriosDelimanolis i remember when we had the same reputation xD","body":"concept is <a href=\"http://stackoverflow.com/questions/1992384/program-to-an-interface-what-does-it-mean\">programming to an interface</a> @SotiriosDelimanolis i remember when we had the same reputation xD"},{"owner":{"account_id":195331,"reputation":275408,"user_id":438154,"accept_rate":98,"display_name":"Sotirios Delimanolis"},"score":0,"creation_date":1397357812,"post_id":23038578,"comment_id":35198724,"body_markdown":"@nachokk I have an addictive personality. I spend too much time here.","body":"@nachokk I have an addictive personality. I spend too much time here."}],"answers":[{"tags":[],"owner":{"account_id":3887004,"reputation":46525,"user_id":3218114,"accept_rate":84,"display_name":"Braj"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1397357775,"creation_date":1397357775,"answer_id":23038601,"question_id":23038578,"body_markdown":"The implementation is defined in `AbstractList` itself. Find it at its [source code](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/6-b14/java/util/AbstractList.java).\r\n\r\n    public abstract class AbstractList&lt;E&gt; extends AbstractCollection&lt;E&gt; implements List&lt;E&gt; {\r\n        private class Itr implements Iterator&lt;E&gt; {\r\n           ...\r\n        }\r\n\r\n        public Iterator&lt;E&gt; iterator() {\r\n\t       return new Itr();\r\n        }\r\n    }\r\n\r\n\r\nTry\r\n\r\n    System.out.println(new ArrayList&lt;String&gt;().iterator().getClass().getName());\r\n\r\noutput\r\n\r\n    java.util.AbstractList$Itr","title":"Return type of iterator() method in java","body":"<p>The implementation is defined in <code>AbstractList</code> itself. Find it at its <a href=\"http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/6-b14/java/util/AbstractList.java\" rel=\"nofollow\">source code</a>.</p>\n\n<pre><code>public abstract class AbstractList&lt;E&gt; extends AbstractCollection&lt;E&gt; implements List&lt;E&gt; {\n    private class Itr implements Iterator&lt;E&gt; {\n       ...\n    }\n\n    public Iterator&lt;E&gt; iterator() {\n       return new Itr();\n    }\n}\n</code></pre>\n\n<p>Try</p>\n\n<pre><code>System.out.println(new ArrayList&lt;String&gt;().iterator().getClass().getName());\n</code></pre>\n\n<p>output</p>\n\n<pre><code>java.util.AbstractList$Itr\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2734060,"reputation":263882,"user_id":2357112,"accept_rate":26,"display_name":"user2357112"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1397357779,"creation_date":1397357779,"answer_id":23038602,"question_id":23038578,"body_markdown":"&gt; I want to know what is here the return type of al.iterator()\r\n\r\n**You shouldn&#39;t care**. It doesn&#39;t matter what particular implementation of Iterator the method returns, only that it returns an Iterator. You can call next, hasNext, and remove, or iterate with a for-each loop, without knowing that it happens to be an ArrayList.Itr or whatever the implementation is.\r\n\r\nSuppose the Java developers working on the ArrayList want to rename their iterator implementation to ArrayListIterator instead of whatever they&#39;re calling it now. If your code relied on knowing the exact Iterator implementation, you would have to change your code just to handle an ArrayList-internal change you shouldn&#39;t even see.","title":"Return type of iterator() method in java","body":"<blockquote>\n  <p>I want to know what is here the return type of al.iterator()</p>\n</blockquote>\n\n<p><strong>You shouldn't care</strong>. It doesn't matter what particular implementation of Iterator the method returns, only that it returns an Iterator. You can call next, hasNext, and remove, or iterate with a for-each loop, without knowing that it happens to be an ArrayList.Itr or whatever the implementation is.</p>\n\n<p>Suppose the Java developers working on the ArrayList want to rename their iterator implementation to ArrayListIterator instead of whatever they're calling it now. If your code relied on knowing the exact Iterator implementation, you would have to change your code just to handle an ArrayList-internal change you shouldn't even see.</p>\n"},{"tags":[],"owner":{"account_id":3570818,"reputation":3,"user_id":2981184,"display_name":"Racereddy20"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1397358587,"creation_date":1397358587,"answer_id":23038679,"question_id":23038578,"body_markdown":"Iterator is generic and doesn&#39;t return a specific type unless you define it in the ArrayList. Iterator is an interface (part of the Java Collections) that returns the &lt;T&gt; type that was passed to it. The Iterator is used to traverse the list of elements, and remove an element if necessary. ","title":"Return type of iterator() method in java","body":"<p>Iterator is generic and doesn't return a specific type unless you define it in the ArrayList. Iterator is an interface (part of the Java Collections) that returns the  type that was passed to it. The Iterator is used to traverse the list of elements, and remove an element if necessary. </p>\n"},{"tags":[],"owner":{"account_id":3327594,"reputation":1669,"user_id":2797254,"accept_rate":65,"display_name":"Weishi Z"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1397358915,"creation_date":1397358915,"answer_id":23038703,"question_id":23038578,"body_markdown":"You are right saying that `Iterator` is an interface. So, some class must implement this interface so you can use it. \r\n\r\nThe iterator interface defines what an iterator should do. In this case, the class ArrayList provides its own implementation of this interface.  \r\n\r\n**What you get from `al.iterator()`** is the inner class of ArrayList **Itr** (see following code, which IS iterator. (as we kind of describe the IS-A relationship)\r\n\r\n(you can think of an inner class as a normal class for now. So the answer to your question is **Itr**, which is just a name, and all you should care about is its function, which is defined by interface Iterator.)\r\n\r\n       /**\r\n         * An optimized version of AbstractList.Itr\r\n         */\r\n        private class Itr implements Iterator&lt;E&gt; {\r\n            int cursor;       // index of next element to return\r\n            int lastRet = -1; // index of last element returned; -1 if no such\r\n            int expectedModCount = modCount;\r\n    \r\n            public boolean hasNext() {\r\n                return cursor != size;\r\n            }\r\n           .....\r\n      }\r\n\r\n\r\nThis code is by Josh Bloch and Neal Gafter, who wrote the ArrayList class.","title":"Return type of iterator() method in java","body":"<p>You are right saying that <code>Iterator</code> is an interface. So, some class must implement this interface so you can use it. </p>\n\n<p>The iterator interface defines what an iterator should do. In this case, the class ArrayList provides its own implementation of this interface.  </p>\n\n<p><strong>What you get from <code>al.iterator()</code></strong> is the inner class of ArrayList <strong>Itr</strong> (see following code, which IS iterator. (as we kind of describe the IS-A relationship)</p>\n\n<p>(you can think of an inner class as a normal class for now. So the answer to your question is <strong>Itr</strong>, which is just a name, and all you should care about is its function, which is defined by interface Iterator.)</p>\n\n<pre><code>   /**\n     * An optimized version of AbstractList.Itr\n     */\n    private class Itr implements Iterator&lt;E&gt; {\n        int cursor;       // index of next element to return\n        int lastRet = -1; // index of last element returned; -1 if no such\n        int expectedModCount = modCount;\n\n        public boolean hasNext() {\n            return cursor != size;\n        }\n       .....\n  }\n</code></pre>\n\n<p>This code is by Josh Bloch and Neal Gafter, who wrote the ArrayList class.</p>\n"},{"tags":[],"owner":{"account_id":1028535,"reputation":1500,"user_id":1037303,"display_name":"domih"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1456242495,"creation_date":1456242495,"answer_id":35582004,"question_id":23038578,"body_markdown":"You can define the return type of your Iterator beforehand. As you declare the iterator, you can (and should) define the type of your list items like this: \r\n\r\n`Iterator&lt;File&gt; itr = al.iterator(); `\r\n\r\nSo when you access `itr` you don&#39;t have to cast to file, e.g. `(File) itr.next()` but can directly use it in your while loop: \r\n\r\n`while (it.hasNext()) { File f = itr.next() } `\r\n\r\nYour compiler now won&#39;t complain when using next(). ","title":"Return type of iterator() method in java","body":"<p>You can define the return type of your Iterator beforehand. As you declare the iterator, you can (and should) define the type of your list items like this: </p>\n\n<p><code>Iterator&lt;File&gt; itr = al.iterator();</code></p>\n\n<p>So when you access <code>itr</code> you don't have to cast to file, e.g. <code>(File) itr.next()</code> but can directly use it in your while loop: </p>\n\n<p><code>while (it.hasNext()) { File f = itr.next() }</code></p>\n\n<p>Your compiler now won't complain when using next(). </p>\n"},{"tags":[],"owner":{"account_id":4814579,"reputation":1,"user_id":3887046,"display_name":"Atul Sharma"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1479198566,"creation_date":1479196436,"answer_id":40604646,"question_id":23038578,"body_markdown":"Simply it returns the object it does iterate. For example you can refer to the code below.\r\n\r\n\t\twhile(itr.hasNext())\r\n\t\t{\r\n\t\t\tString str = itr.next().toString(); // Converting an answer type object into String.\r\n\t\t\tSystem.out.println(str);\r\n\t\t}\r\n\t","title":"Return type of iterator() method in java","body":"<p>Simply it returns the object it does iterate. For example you can refer to the code below.</p>\n\n<pre><code>    while(itr.hasNext())\n    {\n        String str = itr.next().toString(); // Converting an answer type object into String.\n        System.out.println(str);\n    }\n</code></pre>\n"}],"owner":{"account_id":4319314,"reputation":73,"user_id":3528086,"display_name":"user3528086"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":22361,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"answer_count":6,"score":4,"last_activity_date":1661434165,"creation_date":1397357510,"question_id":23038578,"body_markdown":"I am a new-comer in Java and in process of learning.\nI need a an answer of following question supported with valid theory.\nConsider the following line-\n\n    Iterator itr = al.iterator(); \n\nwhere *al* is some collection object of ArrayList (class) type.\nI want to know what is here the return type of \n### al.iterator() ###\nIt is not definitely of a primitive data type, then it could be an **object** , but since every object belong to a class then it is of **which class**. Documentation and books etc says it has return type of Iterator. But *Iterator* is an interface. On other hand we say an interface could not have a direct object. Although interface variable could refer to an object of a class or classes that implements it.\n### - ###\nSo the above syntax is correct (as Iterator variable *itr* could be used to refer to an object of some class implementing it). But in realty it is object of which class?  And can substituting *itr* with reference variable of that class will cause no error (I have tried substituting *itr* with ref. variable of ArrayList class in above line but that causes an error). I am using this syntax very often also in Generics form, but dont know the theory behind this. And I am supposing I am lacking a very basic concept here. Please rectify.\n\n\n    ","title":"Return type of iterator() method in java","body":"<p>I am a new-comer in Java and in process of learning.\nI need a an answer of following question supported with valid theory.\nConsider the following line-</p>\n<pre><code>Iterator itr = al.iterator(); \n</code></pre>\n<p>where <em>al</em> is some collection object of ArrayList (class) type.\nI want to know what is here the return type of</p>\n<h3>al.iterator()</h3>\n<p>It is not definitely of a primitive data type, then it could be an <strong>object</strong> , but since every object belong to a class then it is of <strong>which class</strong>. Documentation and books etc says it has return type of Iterator. But <em>Iterator</em> is an interface. On other hand we say an interface could not have a direct object. Although interface variable could refer to an object of a class or classes that implements it.</p>\n<h3>-</h3>\n<p>So the above syntax is correct (as Iterator variable <em>itr</em> could be used to refer to an object of some class implementing it). But in realty it is object of which class?  And can substituting <em>itr</em> with reference variable of that class will cause no error (I have tried substituting <em>itr</em> with ref. variable of ArrayList class in above line but that causes an error). I am using this syntax very often also in Generics form, but dont know the theory behind this. And I am supposing I am lacking a very basic concept here. Please rectify.</p>\n"},{"tags":["java","multithreading","unit-testing","executorservice","futuretask"],"comments":[{"owner":{"account_id":1111280,"reputation":6531,"user_id":1101692,"accept_rate":89,"display_name":"Shark"},"score":0,"creation_date":1661434976,"post_id":73488285,"comment_id":129775771,"body_markdown":"So... you&#39;re using a real FutureTask, and it&#39;s getting stuck when you call `futureTask.get()` correct? is the future task actually being executed?","body":"So... you&#39;re using a real FutureTask, and it&#39;s getting stuck when you call <code>futureTask.get()</code> correct? is the future task actually being executed?"},{"owner":{"account_id":3976529,"reputation":1,"user_id":3279587,"display_name":"jarvis_"},"score":0,"creation_date":1663075015,"post_id":73488285,"comment_id":130150004,"body_markdown":"I got it working. I changed the way I was using ExecutorService and was able to mock the Future object\n\n`Future&lt;Optional&lt;Attestation&gt;&gt; attestationDbFuture =\n                executorService.submit(() -&gt; attestationStore.get(imageInfo.getBucketKey()));`","body":"I got it working. I changed the way I was using ExecutorService and was able to mock the Future object  <code>Future&lt;Optional&lt;Attestation&gt;&gt; attestationDbFuture =                 executorService.submit(() -&gt; attestationStore.get(imageInfo.getBucketKey()));</code>"}],"owner":{"account_id":3976529,"reputation":1,"user_id":3279587,"display_name":"jarvis_"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":217,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1661433803,"creation_date":1661433726,"question_id":73488285,"body_markdown":"I have a callable FutureTask that is getting executed using ExecutorService. \r\n```\r\nFutureTask&lt;Optional&lt;Attestation&gt;&gt; attestationDbTask\r\n                = new FutureTask&lt;Optional&lt;Attestation&gt;&gt;(() -&gt; attestationStore.get(imageInfo.getBucketKey()));\r\n```\r\n```attestationStore.get(imageInfo.getBucketKey())``` returns response of type ```Optional&lt;Attestation&gt;```\r\n\r\nExecuting this task by calling\r\n```executorService.execute(attestationDbTask);```\r\n\r\nI am calling attestationDbTask.get(long, TimeUnit) method to get the execution result\r\n```\r\nattestation = attestationDbTask.get(AttestationServiceLimits.READ_ATTESTATION_PDB_TIME_OUT, TimeUnit.MILLISECONDS)\r\n                    .orElseThrow(() -&gt; generateNotFoundOrNotAuthorizedException(imageInfo + &quot; in Attestation Store&quot;));\r\n```\r\n\r\nI am trying to write unit test for this but the test get&#39;s stuck at ```attestationDbTask.get``` even though I have mocked the ```attestationStore.get``` to return the response for the callable.\r\n```when(attestationStore.get(anyString())).thenReturn(Optional.empty());```\r\n\r\nCan someone help with any pointers on how to go about mocking the futureTask.get method.","title":"How to mock callable futureTask.get(long, TimeUnit) method to return a response","body":"<p>I have a callable FutureTask that is getting executed using ExecutorService.</p>\n<pre><code>FutureTask&lt;Optional&lt;Attestation&gt;&gt; attestationDbTask\n                = new FutureTask&lt;Optional&lt;Attestation&gt;&gt;(() -&gt; attestationStore.get(imageInfo.getBucketKey()));\n</code></pre>\n<p><code>attestationStore.get(imageInfo.getBucketKey())</code> returns response of type <code>Optional&lt;Attestation&gt;</code></p>\n<p>Executing this task by calling\n<code>executorService.execute(attestationDbTask);</code></p>\n<p>I am calling attestationDbTask.get(long, TimeUnit) method to get the execution result</p>\n<pre><code>attestation = attestationDbTask.get(AttestationServiceLimits.READ_ATTESTATION_PDB_TIME_OUT, TimeUnit.MILLISECONDS)\n                    .orElseThrow(() -&gt; generateNotFoundOrNotAuthorizedException(imageInfo + &quot; in Attestation Store&quot;));\n</code></pre>\n<p>I am trying to write unit test for this but the test get's stuck at <code>attestationDbTask.get</code> even though I have mocked the <code>attestationStore.get</code> to return the response for the callable.\n<code>when(attestationStore.get(anyString())).thenReturn(Optional.empty());</code></p>\n<p>Can someone help with any pointers on how to go about mocking the futureTask.get method.</p>\n"},{"tags":["java"],"answers":[{"tags":[],"owner":{"account_id":3862105,"reputation":29203,"user_id":3199595,"accept_rate":84,"display_name":"Malt"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1509920629,"creation_date":1509920258,"answer_id":47127240,"question_id":47127225,"body_markdown":"For a single string:\r\n\r\n\tString str = &quot;look!   Spaces!  &quot;;\r\n\tSystem.out.println(str.replaceAll(&quot; &quot;,&quot;&quot;)); //Will print &quot;look!Spaces!&quot;\r\n\r\nFor an array:\r\n\r\n\tString[] arr = ...\r\n\tfor (int i = 0; i &lt; arr.length; i++) {\r\n\t\tarr[i] = arr[i].replaceAll(&quot; &quot;, &quot;&quot;);\r\n\t}\r\n\r\nOr using Java 8 streams (although this one returns a `List`, not an array):\r\n\r\n\tString[] arr = ...\r\n\tList&lt;String&gt; l = Arrays.stream(arr).map(i -&gt; i.replaceAll(&quot; &quot;, &quot;&quot;)).collect(Collectors.toList());","title":"Removing white space from an array containing String in Java","body":"<p>For a single string:</p>\n\n<pre><code>String str = \"look!   Spaces!  \";\nSystem.out.println(str.replaceAll(\" \",\"\")); //Will print \"look!Spaces!\"\n</code></pre>\n\n<p>For an array:</p>\n\n<pre><code>String[] arr = ...\nfor (int i = 0; i &lt; arr.length; i++) {\n    arr[i] = arr[i].replaceAll(\" \", \"\");\n}\n</code></pre>\n\n<p>Or using Java 8 streams (although this one returns a <code>List</code>, not an array):</p>\n\n<pre><code>String[] arr = ...\nList&lt;String&gt; l = Arrays.stream(arr).map(i -&gt; i.replaceAll(\" \", \"\")).collect(Collectors.toList());\n</code></pre>\n"},{"tags":[],"owner":{"account_id":8087134,"reputation":28351,"user_id":6094348,"accept_rate":100,"display_name":"Yousaf"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1661433672,"creation_date":1509920338,"answer_id":47127245,"question_id":47127225,"body_markdown":"Use the [trim()](https://www.javatpoint.com/java-string-trim) method\r\n\r\n    String s1=&quot;  hello string   &quot;;  \r\n    System.out.println(s1.trim()); \r\n\r\n&lt;h3&gt;EDIT&lt;/h3&gt;\r\n\r\n`trim()` method only removes leading and trailing white spaces. If you want to remove spaces between words like `Mel on`, you can use the [replaceAll()](https://www.javatpoint.com/java-string-replaceall) method.\r\n\r\n    public static void main(String[] args) {\r\n            \r\n        String[] list ={&quot;Apple &quot;,  &quot;Mel on&quot;, &quot;  Ice -cream &quot;, &quot;Television&quot;};\r\n            \r\n        for (int i = 0; i &lt; list.length; i++) {\r\n                list[i] = list[i].replaceAll(&quot; &quot;, &quot;&quot;);\r\n        }\r\n            \r\n        for (int i = 0; i &lt; list.length; i++) {\r\n               System.out.println(list[i]);\r\n        }\r\n    }\r\n\r\nOutput\r\n\r\n    Apple\r\n    Melon\r\n    Ice-cream\r\n    Television","title":"Removing white space from an array containing String in Java","body":"<p>Use the <a href=\"https://www.javatpoint.com/java-string-trim\" rel=\"nofollow noreferrer\">trim()</a> method</p>\n<pre><code>String s1=&quot;  hello string   &quot;;  \nSystem.out.println(s1.trim()); \n</code></pre>\n<h3>EDIT</h3>\n<p><code>trim()</code> method only removes leading and trailing white spaces. If you want to remove spaces between words like <code>Mel on</code>, you can use the <a href=\"https://www.javatpoint.com/java-string-replaceall\" rel=\"nofollow noreferrer\">replaceAll()</a> method.</p>\n<pre><code>public static void main(String[] args) {\n        \n    String[] list ={&quot;Apple &quot;,  &quot;Mel on&quot;, &quot;  Ice -cream &quot;, &quot;Television&quot;};\n        \n    for (int i = 0; i &lt; list.length; i++) {\n            list[i] = list[i].replaceAll(&quot; &quot;, &quot;&quot;);\n    }\n        \n    for (int i = 0; i &lt; list.length; i++) {\n           System.out.println(list[i]);\n    }\n}\n</code></pre>\n<p>Output</p>\n<pre><code>Apple\nMelon\nIce-cream\nTelevision\n</code></pre>\n"}],"owner":{"account_id":9789419,"reputation":43,"user_id":8859201,"display_name":"DpATe 26"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3711,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":47127245,"answer_count":2,"score":2,"last_activity_date":1661433672,"creation_date":1509920177,"question_id":47127225,"body_markdown":"So how can I remove a space(s) from an array of a string...\r\n\r\nTaking an example, I have a string called `list`:\r\n\r\nString[] list ={&quot;Apple &quot;,  &quot;Mel on&quot;, &quot;  Ice -cream &quot;, Television&quot;};\r\n\r\n\r\nCan anyone please guide on what methods I should be using? \r\nI&#39;ve already tried using `.replace()`. ","title":"Removing white space from an array containing String in Java","body":"<p>So how can I remove a space(s) from an array of a string...</p>\n<p>Taking an example, I have a string called <code>list</code>:</p>\n<p>String[] list ={&quot;Apple &quot;,  &quot;Mel on&quot;, &quot;  Ice -cream &quot;, Television&quot;};</p>\n<p>Can anyone please guide on what methods I should be using?\nI've already tried using <code>.replace()</code>.</p>\n"},{"tags":["java","amazon-web-services","amazon-elastic-beanstalk"],"answers":[{"tags":[],"owner":{"account_id":7501,"reputation":187942,"user_id":13070,"accept_rate":90,"display_name":"Mark B"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1661433490,"creation_date":1661433490,"answer_id":73488234,"question_id":73488171,"body_markdown":"I don&#39;t see OpenJDK listed as a supported runtime for Elastic Beanstalk [here][1]. You need to change your settings to specify `corretto8`. \r\n\r\n\r\n\r\n\r\n  [1]: https://docs.aws.amazon.com/elasticbeanstalk/latest/platforms/platforms-supported.html#platforms-supported.javase","title":"aws Unknown runtime version named &#39;openjdk8&#39; of java. This build image has the following versions: corretto11, corretto8","body":"<p>I don't see OpenJDK listed as a supported runtime for Elastic Beanstalk <a href=\"https://docs.aws.amazon.com/elasticbeanstalk/latest/platforms/platforms-supported.html#platforms-supported.javase\" rel=\"nofollow noreferrer\">here</a>. You need to change your settings to specify <code>corretto8</code>.</p>\n"}],"owner":{"account_id":22294782,"reputation":1051,"user_id":16520980,"display_name":"etranz"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":423,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":73488234,"answer_count":1,"score":0,"last_activity_date":1661433490,"creation_date":1661433253,"question_id":73488171,"body_markdown":"I am trying to deploy my java application to aws EBS using codecommit\r\n\r\nbut I am faced with this error\r\n\r\n    YAML_FILE_ERROR Message: Unknown runtime version named &#39;openjdk8&#39; of java. This build image has the following versions: corretto11, corretto8\r\n\r\nI am using ubuntu with codebuild standard:4.0\r\n\r\nmy runtime version in my buildspec is openjdk8","title":"aws Unknown runtime version named &#39;openjdk8&#39; of java. This build image has the following versions: corretto11, corretto8","body":"<p>I am trying to deploy my java application to aws EBS using codecommit</p>\n<p>but I am faced with this error</p>\n<pre><code>YAML_FILE_ERROR Message: Unknown runtime version named 'openjdk8' of java. This build image has the following versions: corretto11, corretto8\n</code></pre>\n<p>I am using ubuntu with codebuild standard:4.0</p>\n<p>my runtime version in my buildspec is openjdk8</p>\n"},{"tags":["java","selenium","annotations","testng"],"comments":[{"owner":{"account_id":14157780,"reputation":660,"user_id":10227917,"display_name":"Callanbr"},"score":0,"creation_date":1661398425,"post_id":73473690,"comment_id":129764234,"body_markdown":"Have you looked at this answer? https://stackoverflow.com/questions/30105487/testng-not-executing-beforemethod#30118362\n\nThe answer says to use an abstract class for the configuration methods.","body":"Have you looked at this answer? <a href=\"https://stackoverflow.com/questions/30105487/testng-not-executing-beforemethod#30118362\" title=\"testng not executing beforemethod%2330118362\">stackoverflow.com/questions/30105487/&hellip;</a>  The answer says to use an abstract class for the configuration methods."},{"owner":{"account_id":11380920,"reputation":8254,"user_id":8343843,"display_name":"Alexey R."},"score":0,"creation_date":1661414973,"post_id":73473690,"comment_id":129768068,"body_markdown":"`however, then my cucumber JSON is somehow empty` what is `cucumber JSON` ?","body":"<code>however, then my cucumber JSON is somehow empty</code> what is <code>cucumber JSON</code> ?"},{"owner":{"account_id":26149444,"reputation":11,"user_id":19837615,"display_name":"ecatz"},"score":0,"creation_date":1661499616,"post_id":73473690,"comment_id":129791365,"body_markdown":"cucumber JSON is JSON report generated using @CucumberOptions =&gt; plugin = &quot;pretty&quot;. After meddling with the codes per Callanbr suggestion, everything seems to be working. Only thing is that the html report from pretty plugin shows &quot;?&quot; for the test test status even though the JSON contains &quot;status&quot;:&quot;passed&quot; within.","body":"cucumber JSON is JSON report generated using @CucumberOptions =&gt; plugin = &quot;pretty&quot;. After meddling with the codes per Callanbr suggestion, everything seems to be working. Only thing is that the html report from pretty plugin shows &quot;?&quot; for the test test status even though the JSON contains &quot;status&quot;:&quot;passed&quot; within."}],"owner":{"account_id":26149444,"reputation":11,"user_id":19837615,"display_name":"ecatz"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":590,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1661433297,"creation_date":1661346146,"question_id":73473690,"body_markdown":"**TestNG.XML**\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;!DOCTYPE suite SYSTEM &quot;http://testng.org/testng-1.0.dtd&quot;&gt;\r\n&lt;suite name=&quot;BDD Test Suite&quot; verbose=&quot;1&quot; parallel=&quot;tests&quot; thread-count=&quot;3&quot; &gt;\r\n    &lt;test name=&quot;Chrome&quot; annotations=&quot;JDK&quot; preserve-order=&quot;true&quot;&gt;\r\n        &lt;parameter name=&quot;browser&quot; value=&quot;chrome&quot;/&gt;\r\n        &lt;classes&gt;\r\n            &lt;class name=&quot;runner.TestRunner&quot; /&gt;\r\n        &lt;/classes&gt;\r\n    &lt;/test&gt;\r\n\r\n    &lt;test name=&quot;Safari&quot; annotations=&quot;JDK&quot; preserve-order=&quot;true&quot;&gt;\r\n        &lt;parameter name=&quot;browser&quot; value=&quot;safari&quot;/&gt;\r\n        &lt;classes&gt;\r\n          &lt;class name=&quot;runner.TestRunner&quot; /&gt;\r\n        &lt;/classes&gt;\r\n    &lt;/test&gt; \r\n&lt;/suite&gt;\r\n```\r\n\r\n**Runner**\r\n```\r\npackage runner;\r\n\r\nimport io.cucumber.testng.AbstractTestNGCucumberTests;\r\nimport io.cucumber.testng.CucumberOptions;\r\n\r\n@CucumberOptions(features = &quot;something.feature&quot;, glue = {&quot;definitions&quot; })\r\n\r\npublic class TestRunner extends AbstractTestNGCucumberTests {\r\n\r\n}\r\n```\r\n\r\n**definitions**\r\n```\r\npackage definitions;\r\n\r\nimport io.cucumber.java.en.*;\r\nimport org.testng.annotations.BeforeClass;\r\nimport org.testng.annotations.BeforeMethod;\r\nimport org.testng.annotations.Parameters;\r\nimport pom.loginPage;\r\n\r\npublic class LoginTests {\r\n\t\r\n\t@BeforeClass(alwaysRun = true)\r\n\tpublic void setUpCucumber() {\r\n\t\t//this part is not executed\r\n\t}\r\n\r\n\t@BeforeMethod(alwaysRun = true)\r\n\t@Parameters({ &quot;browser&quot; })\r\n    \tpublic void setUp(String browser) {\r\n\t\t//this part is not executed\r\n\t}\r\n\r\n\t@Given(&quot;this is part of feature file&quot;)\r\n\tpublic void this_is_part_of_feature_file() {\r\n\t\t//this part is executed twice per TestNG.XML\r\n\t}\r\n}\r\n```\r\n\r\nI am fairly new to Java and TestNG. I tried to simplify the above code. Please forgive me if it’s not well formatted.\r\n\r\nWhen running the TestNG.XML as TestNG in eclipse, the parameters are passed in and the @Given part is executed twice =&gt; the XML is calling the definition file =&gt; the runner file is correctly written.\r\n\r\nMy problem is that @BeforeClass and @BeforeMethod are not executed. If I move these 2 to the Runner, then it’s executed; however, then my cucumber JSON is somehow empty. \r\n\r\nCan someone assist to let me know why the @BeforeClass and @BeforeMethod are not executed even though I specify *alwaysRun=true*?","title":"TESTNG - @BeforeClass and @BeforeMethod does not execute","body":"<p><strong>TestNG.XML</strong></p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;!DOCTYPE suite SYSTEM &quot;http://testng.org/testng-1.0.dtd&quot;&gt;\n&lt;suite name=&quot;BDD Test Suite&quot; verbose=&quot;1&quot; parallel=&quot;tests&quot; thread-count=&quot;3&quot; &gt;\n    &lt;test name=&quot;Chrome&quot; annotations=&quot;JDK&quot; preserve-order=&quot;true&quot;&gt;\n        &lt;parameter name=&quot;browser&quot; value=&quot;chrome&quot;/&gt;\n        &lt;classes&gt;\n            &lt;class name=&quot;runner.TestRunner&quot; /&gt;\n        &lt;/classes&gt;\n    &lt;/test&gt;\n\n    &lt;test name=&quot;Safari&quot; annotations=&quot;JDK&quot; preserve-order=&quot;true&quot;&gt;\n        &lt;parameter name=&quot;browser&quot; value=&quot;safari&quot;/&gt;\n        &lt;classes&gt;\n          &lt;class name=&quot;runner.TestRunner&quot; /&gt;\n        &lt;/classes&gt;\n    &lt;/test&gt; \n&lt;/suite&gt;\n</code></pre>\n<p><strong>Runner</strong></p>\n<pre><code>package runner;\n\nimport io.cucumber.testng.AbstractTestNGCucumberTests;\nimport io.cucumber.testng.CucumberOptions;\n\n@CucumberOptions(features = &quot;something.feature&quot;, glue = {&quot;definitions&quot; })\n\npublic class TestRunner extends AbstractTestNGCucumberTests {\n\n}\n</code></pre>\n<p><strong>definitions</strong></p>\n<pre><code>package definitions;\n\nimport io.cucumber.java.en.*;\nimport org.testng.annotations.BeforeClass;\nimport org.testng.annotations.BeforeMethod;\nimport org.testng.annotations.Parameters;\nimport pom.loginPage;\n\npublic class LoginTests {\n    \n    @BeforeClass(alwaysRun = true)\n    public void setUpCucumber() {\n        //this part is not executed\n    }\n\n    @BeforeMethod(alwaysRun = true)\n    @Parameters({ &quot;browser&quot; })\n        public void setUp(String browser) {\n        //this part is not executed\n    }\n\n    @Given(&quot;this is part of feature file&quot;)\n    public void this_is_part_of_feature_file() {\n        //this part is executed twice per TestNG.XML\n    }\n}\n</code></pre>\n<p>I am fairly new to Java and TestNG. I tried to simplify the above code. Please forgive me if it’s not well formatted.</p>\n<p>When running the TestNG.XML as TestNG in eclipse, the parameters are passed in and the @Given part is executed twice =&gt; the XML is calling the definition file =&gt; the runner file is correctly written.</p>\n<p>My problem is that @BeforeClass and @BeforeMethod are not executed. If I move these 2 to the Runner, then it’s executed; however, then my cucumber JSON is somehow empty.</p>\n<p>Can someone assist to let me know why the @BeforeClass and @BeforeMethod are not executed even though I specify <em>alwaysRun=true</em>?</p>\n"},{"tags":["java","android"],"owner":{"account_id":26050686,"reputation":35,"user_id":19753966,"display_name":"user787878"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":99,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1661432718,"creation_date":1661432718,"question_id":73488048,"body_markdown":"While on wifi although precise location permission given to app (confirmed from settings), I was unable to get ssid while location service is turned off in latest android.\r\n\r\nAlso manifest permissions looks like:\r\n```\r\n&lt;uses-permission android:name=&quot;android.permission.ACCESS_NETWORK_STATE&quot; /&gt;\r\n&lt;uses-permission android:name=&quot;android.permission.ACCESS_WIFI_STATE&quot; /&gt;\r\n&lt;uses-permission android:name=&quot;android.permission.CHANGE_WIFI_STATE&quot; /&gt;\r\n&lt;uses-permission android:name=&quot;android.permission.ACCESS_FINE_LOCATION&quot; /&gt;\r\n&lt;uses-permission android:name=&quot;android.permission.ACCESS_COARSE_LOCATION&quot; /&gt;\r\n```\r\n\r\nThanks.","title":"Is there a way to get ssid while location is turned off although correct permissions are given in latest android","body":"<p>While on wifi although precise location permission given to app (confirmed from settings), I was unable to get ssid while location service is turned off in latest android.</p>\n<p>Also manifest permissions looks like:</p>\n<pre><code>&lt;uses-permission android:name=&quot;android.permission.ACCESS_NETWORK_STATE&quot; /&gt;\n&lt;uses-permission android:name=&quot;android.permission.ACCESS_WIFI_STATE&quot; /&gt;\n&lt;uses-permission android:name=&quot;android.permission.CHANGE_WIFI_STATE&quot; /&gt;\n&lt;uses-permission android:name=&quot;android.permission.ACCESS_FINE_LOCATION&quot; /&gt;\n&lt;uses-permission android:name=&quot;android.permission.ACCESS_COARSE_LOCATION&quot; /&gt;\n</code></pre>\n<p>Thanks.</p>\n"},{"tags":["java","static","initialization","static-block","initialization-block"],"comments":[{"owner":{"account_id":402964,"reputation":22541,"user_id":770452,"accept_rate":49,"display_name":"David T."},"score":6,"creation_date":1387147959,"post_id":2420389,"comment_id":30824856,"body_markdown":"Minor feedback, but it would help if you could please state your assumptions clearly, and hence clarify which answer is correct. when i first read your question, i mis-understood and thought you knew the difference between `{...}` vs `static {...}`. (in which case Jon Skeet definitely answered your question way better)","body":"Minor feedback, but it would help if you could please state your assumptions clearly, and hence clarify which answer is correct. when i first read your question, i mis-understood and thought you knew the difference between <code>{...}</code> vs <code>static {...}</code>. (in which case Jon Skeet definitely answered your question way better)"},{"owner":{"account_id":2490315,"reputation":5131,"user_id":2552290,"accept_rate":68,"display_name":"Don Hatch"},"score":1,"creation_date":1511666579,"post_id":2420389,"comment_id":81940636,"body_markdown":"This question is very unclear; you have the answerers scrambling and making lots of long-winded conjectures about what you meant.  How about explicitly writing out the example static initialization block you have in mind and your alternative, so that people have something clear to answer?","body":"This question is very unclear; you have the answerers scrambling and making lots of long-winded conjectures about what you meant.  How about explicitly writing out the example static initialization block you have in mind and your alternative, so that people have something clear to answer?"}],"answers":[{"tags":[],"owner":{"account_id":45868,"reputation":24272,"user_id":135360,"accept_rate":100,"display_name":"Pierre-Antoine LaFayette"},"down_vote_count":0,"up_vote_count":9,"is_accepted":false,"score":9,"last_activity_date":1268253960,"creation_date":1268253627,"answer_id":2420403,"question_id":2420389,"body_markdown":"You can execute bits of code once for a class before an object is constructed in the static blocks.\r\n\r\nE.g.\r\n\r\n    class A {\r\n      static int var1 = 6;\r\n      static int var2 = 9;\r\n      static int var3;\r\n      static long var4;\r\n    \r\n      static Date date1;\r\n      static Date date2;\r\n    \r\n      static {\r\n        date1 = new Date();\r\n    \r\n        for(int cnt = 0; cnt &lt; var2; cnt++){\r\n          var3 += var1;\r\n        }\r\n    \r\n        System.out.println(&quot;End first static init: &quot; + new Date());\r\n      }\r\n    }","title":"Static Initialization Blocks","body":"<p>You can execute bits of code once for a class before an object is constructed in the static blocks.</p>\n\n<p>E.g.</p>\n\n<pre><code>class A {\n  static int var1 = 6;\n  static int var2 = 9;\n  static int var3;\n  static long var4;\n\n  static Date date1;\n  static Date date2;\n\n  static {\n    date1 = new Date();\n\n    for(int cnt = 0; cnt &lt; var2; cnt++){\n      var3 += var1;\n    }\n\n    System.out.println(\"End first static init: \" + new Date());\n  }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":61252,"reputation":407488,"user_id":182668,"accept_rate":68,"display_name":"Pointy"},"down_vote_count":0,"up_vote_count":108,"is_accepted":false,"score":108,"last_activity_date":1268254133,"creation_date":1268253627,"answer_id":2420404,"question_id":2420389,"body_markdown":"Here&#39;s an example:\r\n\r\n      private static final HashMap&lt;String, String&gt; MAP = new HashMap&lt;String, String&gt;();\r\n      static {\r\n        MAP.put(&quot;banana&quot;, &quot;honey&quot;);\r\n        MAP.put(&quot;peanut butter&quot;, &quot;jelly&quot;);\r\n        MAP.put(&quot;rice&quot;, &quot;beans&quot;);\r\n      }\r\n\r\nThe code in the &quot;static&quot; section(s) will be executed at class load time, before any instances of the class are constructed (and before any static methods are called from elsewhere). That way you can make sure that the class resources are all ready to use.\r\n\r\nIt&#39;s also possible to have non-static initializer blocks.  Those act like extensions to the set of constructor methods defined for the class. They look just like static initializer blocks, except the keyword &quot;static&quot; is left off.","title":"Static Initialization Blocks","body":"<p>Here's an example:</p>\n\n<pre><code>  private static final HashMap&lt;String, String&gt; MAP = new HashMap&lt;String, String&gt;();\n  static {\n    MAP.put(\"banana\", \"honey\");\n    MAP.put(\"peanut butter\", \"jelly\");\n    MAP.put(\"rice\", \"beans\");\n  }\n</code></pre>\n\n<p>The code in the \"static\" section(s) will be executed at class load time, before any instances of the class are constructed (and before any static methods are called from elsewhere). That way you can make sure that the class resources are all ready to use.</p>\n\n<p>It's also possible to have non-static initializer blocks.  Those act like extensions to the set of constructor methods defined for the class. They look just like static initializer blocks, except the keyword \"static\" is left off.</p>\n"},{"tags":[],"owner":{"account_id":11683,"reputation":1438179,"user_id":22656,"accept_rate":86,"display_name":"Jon Skeet"},"down_vote_count":0,"up_vote_count":145,"is_accepted":false,"score":145,"last_activity_date":1552976509,"creation_date":1268253649,"answer_id":2420405,"question_id":2420389,"body_markdown":"If they weren&#39;t in a static initialization block, where would they be? How would you declare a variable which was only meant to be local for the purposes of initialization, and distinguish it from a field? For example, how would *you* want to write:\r\n\r\n    public class Foo {\r\n        private static final int widgets;\r\n\r\n        static {\r\n            int first = Widgets.getFirstCount();\r\n            int second = Widgets.getSecondCount();\r\n            // Imagine more complex logic here which really used first/second\r\n            widgets = first + second;\r\n        }\r\n    }\r\n\r\nIf `first` and `second` weren&#39;t in a block, they&#39;d look like fields. If they were in a block without `static` in front of it, that would count as an instance initialization block instead of a static initialization block, so it would be executed once **per** constructed instance rather than once in total.\r\n\r\nNow in this particular case, you could use a static method instead:\r\n\r\n    public class Foo {\r\n        private static final int widgets = getWidgets();\r\n\r\n        static int getWidgets() {\r\n            int first = Widgets.getFirstCount();\r\n            int second = Widgets.getSecondCount();\r\n            // Imagine more complex logic here which really used first/second\r\n            return first + second;\r\n        }\r\n    }\r\n\r\n... but that doesn&#39;t work when there are multiple variables you wish to assign within the same block, or none (e.g. if you just want to log something - or maybe initialize a native library).","title":"Static Initialization Blocks","body":"<p>If they weren't in a static initialization block, where would they be? How would you declare a variable which was only meant to be local for the purposes of initialization, and distinguish it from a field? For example, how would <em>you</em> want to write:</p>\n\n<pre><code>public class Foo {\n    private static final int widgets;\n\n    static {\n        int first = Widgets.getFirstCount();\n        int second = Widgets.getSecondCount();\n        // Imagine more complex logic here which really used first/second\n        widgets = first + second;\n    }\n}\n</code></pre>\n\n<p>If <code>first</code> and <code>second</code> weren't in a block, they'd look like fields. If they were in a block without <code>static</code> in front of it, that would count as an instance initialization block instead of a static initialization block, so it would be executed once <strong>per</strong> constructed instance rather than once in total.</p>\n\n<p>Now in this particular case, you could use a static method instead:</p>\n\n<pre><code>public class Foo {\n    private static final int widgets = getWidgets();\n\n    static int getWidgets() {\n        int first = Widgets.getFirstCount();\n        int second = Widgets.getSecondCount();\n        // Imagine more complex logic here which really used first/second\n        return first + second;\n    }\n}\n</code></pre>\n\n<p>... but that doesn't work when there are multiple variables you wish to assign within the same block, or none (e.g. if you just want to log something - or maybe initialize a native library).</p>\n"},{"tags":[],"owner":{"account_id":19971,"reputation":55479,"user_id":47281,"accept_rate":83,"display_name":"Marcus Leon"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1268253651,"creation_date":1268253651,"answer_id":2420406,"question_id":2420389,"body_markdown":"If your static variables need to be set at runtime then a `static {...}` block is very helpful.  \r\n\r\nFor example, if you need to set the static member to a value which is stored in a config file or database.\r\n\r\nAlso useful when you want to add values to a static `Map` member as you can&#39;t add these values in the initial member declaration.","title":"Static Initialization Blocks","body":"<p>If your static variables need to be set at runtime then a <code>static {...}</code> block is very helpful.  </p>\n\n<p>For example, if you need to set the static member to a value which is stored in a config file or database.</p>\n\n<p>Also useful when you want to add values to a static <code>Map</code> member as you can't add these values in the initial member declaration.</p>\n"},{"tags":[],"owner":{"account_id":98479,"reputation":10061,"user_id":266541,"accept_rate":79,"display_name":"Frederik Wordenskjold"},"down_vote_count":10,"up_vote_count":518,"is_accepted":true,"score":508,"last_activity_date":1458771010,"creation_date":1268254119,"answer_id":2420466,"question_id":2420389,"body_markdown":"The *non-static block:*\r\n\r\n    {\r\n        // Do Something...\r\n    }\r\n\r\nGets called **every time** an instance of the class is constructed. The *static block* only gets called **once**, when the class itself is initialized, no matter how many objects of that type you create.\r\n\r\nExample:\r\n\r\n\r\n\r\n    public class Test {\r\n\r\n        static{\r\n            System.out.println(&quot;Static&quot;);\r\n        }\r\n\t\r\n        {\r\n            System.out.println(&quot;Non-static block&quot;);\r\n        }\r\n\t\r\n        public static void main(String[] args) {\r\n            Test t = new Test();\r\n            Test t2 = new Test();\r\n        }\r\n    }\r\n\r\nThis prints:\r\n\r\n\r\n    Static\r\n    Non-static block\r\n    Non-static block\r\n","title":"Static Initialization Blocks","body":"<p>The <em>non-static block:</em></p>\n\n<pre><code>{\n    // Do Something...\n}\n</code></pre>\n\n<p>Gets called <strong>every time</strong> an instance of the class is constructed. The <em>static block</em> only gets called <strong>once</strong>, when the class itself is initialized, no matter how many objects of that type you create.</p>\n\n<p>Example:</p>\n\n<pre><code>public class Test {\n\n    static{\n        System.out.println(\"Static\");\n    }\n\n    {\n        System.out.println(\"Non-static block\");\n    }\n\n    public static void main(String[] args) {\n        Test t = new Test();\n        Test t2 = new Test();\n    }\n}\n</code></pre>\n\n<p>This prints:</p>\n\n<pre><code>Static\nNon-static block\nNon-static block\n</code></pre>\n"},{"tags":[],"owner":{"account_id":52822,"reputation":1088970,"user_id":157882,"accept_rate":93,"display_name":"BalusC"},"down_vote_count":0,"up_vote_count":51,"is_accepted":false,"score":51,"last_activity_date":1268256016,"creation_date":1268256016,"answer_id":2420682,"question_id":2420389,"body_markdown":"It&#39;s also useful when you actually don&#39;t want to assign the value to anything, such as loading some class *only once* during runtime.\r\n\r\nE.g.\r\n\r\n    static {\r\n        try {\r\n            Class.forName(&quot;com.example.jdbc.Driver&quot;);\r\n        } catch (ClassNotFoundException e) {\r\n            throw new ExceptionInInitializerError(&quot;Cannot load JDBC driver.&quot;, e);\r\n        }\r\n    }\r\n\r\nHey, there&#39;s another benefit, you can use it to handle exceptions. Imagine that `getStuff()` here throws an `Exception` which *really* belongs in a catch block:\r\n\r\n    private static Object stuff = getStuff(); // Won&#39;t compile: unhandled exception.\r\n\r\nthen a `static` initializer is useful here. You can handle the exception there.\r\n\r\nAnother example is to do stuff afterwards which can&#39;t be done during assigning:\r\n\r\n    private static Properties config = new Properties();\r\n\r\n    static {\r\n        try { \r\n            config.load(Thread.currentThread().getClassLoader().getResourceAsStream(&quot;config.properties&quot;);\r\n        } catch (IOException e) {\r\n            throw new ExceptionInInitializerError(&quot;Cannot load properties file.&quot;, e);\r\n        }\r\n    }\r\n\r\nTo come back to the JDBC driver example, any decent JDBC driver itself also makes use of the `static` initializer to register itself in the `DriverManager`. Also see [this][1] and [this][2] answer.\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/1893274/doubt-in-java-basics\r\n  [2]: https://stackoverflow.com/questions/2092659/what-is-difference-between-class-forname-and-class-forname-newinstance/2093236#2093236","title":"Static Initialization Blocks","body":"<p>It's also useful when you actually don't want to assign the value to anything, such as loading some class <em>only once</em> during runtime.</p>\n\n<p>E.g.</p>\n\n<pre><code>static {\n    try {\n        Class.forName(\"com.example.jdbc.Driver\");\n    } catch (ClassNotFoundException e) {\n        throw new ExceptionInInitializerError(\"Cannot load JDBC driver.\", e);\n    }\n}\n</code></pre>\n\n<p>Hey, there's another benefit, you can use it to handle exceptions. Imagine that <code>getStuff()</code> here throws an <code>Exception</code> which <em>really</em> belongs in a catch block:</p>\n\n<pre><code>private static Object stuff = getStuff(); // Won't compile: unhandled exception.\n</code></pre>\n\n<p>then a <code>static</code> initializer is useful here. You can handle the exception there.</p>\n\n<p>Another example is to do stuff afterwards which can't be done during assigning:</p>\n\n<pre><code>private static Properties config = new Properties();\n\nstatic {\n    try { \n        config.load(Thread.currentThread().getClassLoader().getResourceAsStream(\"config.properties\");\n    } catch (IOException e) {\n        throw new ExceptionInInitializerError(\"Cannot load properties file.\", e);\n    }\n}\n</code></pre>\n\n<p>To come back to the JDBC driver example, any decent JDBC driver itself also makes use of the <code>static</code> initializer to register itself in the <code>DriverManager</code>. Also see <a href=\"https://stackoverflow.com/questions/1893274/doubt-in-java-basics\">this</a> and <a href=\"https://stackoverflow.com/questions/2092659/what-is-difference-between-class-forname-and-class-forname-newinstance/2093236#2093236\">this</a> answer.</p>\n"},{"tags":[],"owner":{"account_id":18279,"reputation":58451,"user_id":41747,"display_name":"D.Shawley"},"down_vote_count":0,"up_vote_count":11,"is_accepted":false,"score":11,"last_activity_date":1347018219,"creation_date":1347018219,"answer_id":12317473,"question_id":2420389,"body_markdown":"There are a few actual reasons that it is required to exist:\r\n\r\n1. initializing `static final` members whose initialization might throw an exception\r\n2. initializing `static final` members with calculated values\r\n\r\nPeople tend to use `static {}` blocks as a convenient way to initialize things that the class depends on within the runtime as well - such as ensuring that particular class is loaded (e.g., JDBC drivers).  That can be done in other ways; however, the two things that I mention above can only be done with a construct like the `static {}` block.","title":"Static Initialization Blocks","body":"<p>There are a few actual reasons that it is required to exist:</p>\n\n<ol>\n<li>initializing <code>static final</code> members whose initialization might throw an exception</li>\n<li>initializing <code>static final</code> members with calculated values</li>\n</ol>\n\n<p>People tend to use <code>static {}</code> blocks as a convenient way to initialize things that the class depends on within the runtime as well - such as ensuring that particular class is loaded (e.g., JDBC drivers).  That can be done in other ways; however, the two things that I mention above can only be done with a construct like the <code>static {}</code> block.</p>\n"},{"tags":[],"owner":{"account_id":1895433,"reputation":1038,"user_id":1712517,"accept_rate":61,"display_name":"Arun"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1350233121,"creation_date":1350233121,"answer_id":12884339,"question_id":2420389,"body_markdown":"static block is used for any technology to initialize  static data member in dynamic way,or we can say for the dynamic initialization of static data member static block is being used..Because for non static data member initialization we have constructor but we do not have any place where we can dynamically initialize static data member\r\n\r\n    Eg:-class Solution{\r\n             // static int x=10;\r\n               static int x;\r\n           static{\r\n            try{\r\n              x=System.out.println();\r\n              }\r\n             catch(Exception e){}\r\n            }\r\n           }\r\n    \r\n         class Solution1{\r\n          public static void main(String a[]){\r\n          System.out.println(Solution.x);\r\n            }\r\n            }\r\n\r\n\r\n Now my static int x will initialize dynamically ..Bcoz when compiler will go to Solution.x it will load Solution Class and static block load at class loading time..So we can able to dynamically initialize that static data member..   \r\n\r\n}","title":"Static Initialization Blocks","body":"<p>static block is used for any technology to initialize  static data member in dynamic way,or we can say for the dynamic initialization of static data member static block is being used..Because for non static data member initialization we have constructor but we do not have any place where we can dynamically initialize static data member</p>\n\n<pre><code>Eg:-class Solution{\n         // static int x=10;\n           static int x;\n       static{\n        try{\n          x=System.out.println();\n          }\n         catch(Exception e){}\n        }\n       }\n\n     class Solution1{\n      public static void main(String a[]){\n      System.out.println(Solution.x);\n        }\n        }\n</code></pre>\n\n<p>Now my static int x will initialize dynamically ..Bcoz when compiler will go to Solution.x it will load Solution Class and static block load at class loading time..So we can able to dynamically initialize that static data member..   </p>\n\n<p>}</p>\n"},{"tags":[],"owner":{"account_id":1635203,"reputation":9343,"user_id":1508893,"accept_rate":74,"display_name":"user1508893"},"down_vote_count":1,"up_vote_count":13,"is_accepted":false,"score":12,"last_activity_date":1362028849,"creation_date":1362028849,"answer_id":15128069,"question_id":2420389,"body_markdown":"I would say `static block` is just syntactic sugar. There is nothing you could do with `static` block and not with anything else.\r\n\r\nTo re-use some examples posted here.\r\n\r\nThis piece of code could be re-written without using `static` initialiser.\r\n\r\nMethod #1: With `static`\r\n\r\n    private static final HashMap&lt;String, String&gt; MAP;\r\n    static {\r\n        MAP.put(&quot;banana&quot;, &quot;honey&quot;);\r\n        MAP.put(&quot;peanut butter&quot;, &quot;jelly&quot;);\r\n        MAP.put(&quot;rice&quot;, &quot;beans&quot;);\r\n      }\r\n\r\nMethod #2: Without `static`\r\n\r\n    private static final HashMap&lt;String, String&gt; MAP = getMap();\r\n    private static HashMap&lt;String, String&gt; getMap()\r\n    {\r\n        HashMap&lt;String, String&gt; ret = new HashMap&lt;&gt;();\r\n        ret.put(&quot;banana&quot;, &quot;honey&quot;);\r\n        ret.put(&quot;peanut butter&quot;, &quot;jelly&quot;);\r\n        ret.put(&quot;rice&quot;, &quot;beans&quot;);\r\n        return ret;\r\n    }","title":"Static Initialization Blocks","body":"<p>I would say <code>static block</code> is just syntactic sugar. There is nothing you could do with <code>static</code> block and not with anything else.</p>\n\n<p>To re-use some examples posted here.</p>\n\n<p>This piece of code could be re-written without using <code>static</code> initialiser.</p>\n\n<p>Method #1: With <code>static</code></p>\n\n<pre><code>private static final HashMap&lt;String, String&gt; MAP;\nstatic {\n    MAP.put(\"banana\", \"honey\");\n    MAP.put(\"peanut butter\", \"jelly\");\n    MAP.put(\"rice\", \"beans\");\n  }\n</code></pre>\n\n<p>Method #2: Without <code>static</code></p>\n\n<pre><code>private static final HashMap&lt;String, String&gt; MAP = getMap();\nprivate static HashMap&lt;String, String&gt; getMap()\n{\n    HashMap&lt;String, String&gt; ret = new HashMap&lt;&gt;();\n    ret.put(\"banana\", \"honey\");\n    ret.put(\"peanut butter\", \"jelly\");\n    ret.put(\"rice\", \"beans\");\n    return ret;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":694376,"reputation":370,"user_id":571975,"display_name":"Randa Sbeity"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1375069875,"creation_date":1375069875,"answer_id":17915789,"question_id":2420389,"body_markdown":"So you have a static field (it&#39;s also called &quot;class variable&quot; because it belongs to the class rather than to an instance of the class; in other words it&#39;s associated with the class rather than with any object) and you want to initialize it. So if you do NOT want to create an instance of this class and you want to manipulate this static field, you can do it in three ways:\r\n\r\n1- Just initialize it when you declare the variable:\r\n\r\n    static int x = 3;\r\n\r\n2- Have a static initializing block:\r\n\r\n    static int x;\r\n    \r\n    static {\r\n     x=3;\r\n    }\r\n\r\n3- Have a class method (static method) that accesses the class variable and initializes it:\r\nthis is the alternative to the above static block; you can write a private static method:\r\n\r\n    public static int x=initializeX();\r\n    \r\n    private static int initializeX(){\r\n     return 3;\r\n    }\r\n\r\nNow why would you use static initializing block instead of static methods?\r\n\r\nIt&#39;s really up to what you need in your program. But you have to know that static initializing block is called once and the only advantage of the class method is that they can be reused later if you need to reinitialize the class variable.\r\n\r\nlet&#39;s say you have a complex array in your program. You initialize it (using *for* loop for example) and then the values in this array will change throughout the program but then at some point you want to reinitialize it (go back to the initial value). In this case you can call the private static method. In case you do not need in your program to reinitialize the values, you can just use the static block and no need for a static method since you&#39;re not gonna use it later in the program.\r\n\r\nNote: the static blocks are called in the order they appear in the code. \r\n\r\nExample 1:\r\n\r\n    class A{\r\n     public static int a =f();\r\n    \r\n    // this is a static method\r\n     private static int f(){\r\n      return 3;\r\n     }\r\n    \r\n    // this is a static block\r\n     static {\r\n      a=5;\r\n     }\r\n     \r\n     public static void main(String args[]) {\r\n    // As I mentioned, you do not need to create an instance of the class to use the class variable\r\n      System.out.print(A.a); // this will print 5\r\n     }\r\n    \r\n    }\r\n\r\nExample 2:\r\n\r\n    class A{\r\n     static {\r\n      a=5;\r\n     }\r\n     public static int a =f();\r\n    \r\n     private static int f(){\r\n      return 3;\r\n     }\r\n     \r\n     public static void main(String args[]) {\r\n      System.out.print(A.a); // this will print 3\r\n     }\r\n    \r\n    }","title":"Static Initialization Blocks","body":"<p>So you have a static field (it's also called \"class variable\" because it belongs to the class rather than to an instance of the class; in other words it's associated with the class rather than with any object) and you want to initialize it. So if you do NOT want to create an instance of this class and you want to manipulate this static field, you can do it in three ways:</p>\n\n<p>1- Just initialize it when you declare the variable:</p>\n\n<pre><code>static int x = 3;\n</code></pre>\n\n<p>2- Have a static initializing block:</p>\n\n<pre><code>static int x;\n\nstatic {\n x=3;\n}\n</code></pre>\n\n<p>3- Have a class method (static method) that accesses the class variable and initializes it:\nthis is the alternative to the above static block; you can write a private static method:</p>\n\n<pre><code>public static int x=initializeX();\n\nprivate static int initializeX(){\n return 3;\n}\n</code></pre>\n\n<p>Now why would you use static initializing block instead of static methods?</p>\n\n<p>It's really up to what you need in your program. But you have to know that static initializing block is called once and the only advantage of the class method is that they can be reused later if you need to reinitialize the class variable.</p>\n\n<p>let's say you have a complex array in your program. You initialize it (using <em>for</em> loop for example) and then the values in this array will change throughout the program but then at some point you want to reinitialize it (go back to the initial value). In this case you can call the private static method. In case you do not need in your program to reinitialize the values, you can just use the static block and no need for a static method since you're not gonna use it later in the program.</p>\n\n<p>Note: the static blocks are called in the order they appear in the code. </p>\n\n<p>Example 1:</p>\n\n<pre><code>class A{\n public static int a =f();\n\n// this is a static method\n private static int f(){\n  return 3;\n }\n\n// this is a static block\n static {\n  a=5;\n }\n\n public static void main(String args[]) {\n// As I mentioned, you do not need to create an instance of the class to use the class variable\n  System.out.print(A.a); // this will print 5\n }\n\n}\n</code></pre>\n\n<p>Example 2:</p>\n\n<pre><code>class A{\n static {\n  a=5;\n }\n public static int a =f();\n\n private static int f(){\n  return 3;\n }\n\n public static void main(String args[]) {\n  System.out.print(A.a); // this will print 3\n }\n\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":386394,"reputation":9197,"user_id":744133,"accept_rate":57,"display_name":"YoYo"},"down_vote_count":1,"up_vote_count":8,"is_accepted":false,"score":7,"last_activity_date":1517951613,"creation_date":1434342706,"answer_id":30837385,"question_id":2420389,"body_markdown":"It is a common misconception to think that a static block has only access to static fields. For this I would like to show below piece of code that I quite often use in real-life projects (copied partially from [another answer][1] in a slightly different context):\r\n\r\n    public enum Language { \r\n      ENGLISH(&quot;eng&quot;, &quot;en&quot;, &quot;en_GB&quot;, &quot;en_US&quot;),   \r\n      GERMAN(&quot;de&quot;, &quot;ge&quot;),   \r\n      CROATIAN(&quot;hr&quot;, &quot;cro&quot;),   \r\n      RUSSIAN(&quot;ru&quot;),\r\n      BELGIAN(&quot;be&quot;,&quot;;-)&quot;);\r\n \r\n      static final private Map&lt;String,Language&gt; ALIAS_MAP = new HashMap&lt;String,Language&gt;(); \r\n      static { \r\n        for (Language l:Language.values()) { \r\n          // ignoring the case by normalizing to uppercase\r\n          ALIAS_MAP.put(l.name().toUpperCase(),l); \r\n          for (String alias:l.aliases) ALIAS_MAP.put(alias.toUpperCase(),l); \r\n        } \r\n      } \r\n \r\n      static public boolean has(String value) { \r\n        // ignoring the case by normalizing to uppercase\r\n        return ALIAS_MAP.containsKey(value.toUpper()); \r\n      } \r\n \r\n      static public Language fromString(String value) { \r\n        if (value == null) throw new NullPointerException(&quot;alias null&quot;); \r\n        Language l = ALIAS_MAP.get(value); \r\n        if (l == null) throw new IllegalArgumentException(&quot;Not an alias: &quot;+value); \r\n        return l; \r\n      } \r\n \r\n      private List&lt;String&gt; aliases; \r\n      private Language(String... aliases) { \r\n        this.aliases = Arrays.asList(aliases); \r\n      } \r\n    } \r\n\r\nHere the initializer is used to maintain an index (`ALIAS_MAP`), to map a set of aliases back to the original enum type. It is intended as an extension to the built-in valueOf method provided by the `Enum` itself.\r\n\r\nAs you can see, the static initializer accesses even the `private` field `aliases`. It is important to understand that the `static` block already has access to the `Enum` value instances (e.g. `ENGLISH`). This is because the [order of initialization and execution in the case of `Enum` types][2], just as if the `static private` fields have been initialized with instances before the `static` blocks have been called:\r\n\r\n1. The `Enum` constants which are implicit static fields. This requires the Enum constructor and instance blocks, and instance initialization to occur first as well.\r\n2. `static` block and initialization of static fields in the order of occurrence.\r\n\r\nThis out-of-order initialization (constructor before `static` block) is important to note. It also happens when we initialize static fields with the instances similarly to a Singleton (simplifications made):\r\n\r\n    public class Foo {\r\n      static { System.out.println(&quot;Static Block 1&quot;); }\r\n      public static final Foo FOO = new Foo();\r\n      static { System.out.println(&quot;Static Block 2&quot;); }\r\n      public Foo() { System.out.println(&quot;Constructor&quot;); }\r\n      static public void main(String p[]) {\r\n        System.out.println(&quot;In Main&quot;);\r\n        new Foo();\r\n      }\r\n    }\r\n\r\nWhat we see is the following output:\r\n\r\n&lt;!-- language: lang-none --&gt;\r\n\r\n    Static Block 1\r\n    Constructor\r\n    Static Block 2\r\n    In Main\r\n    Constructor\r\n\r\nClear is that the static initialization actually can happen *before* the constructor, and even after:\r\n\r\nSimply accessing Foo in the main method, causes the class to be loaded and the static initialization to start. But as part of the Static initialization we again call the constructors for the static fields, after which it resumes static initialization, and completes the constructor called from within the main method. Rather complex situation for which I hope that in normal coding we would not have to deal with.\r\n\r\nFor more info on this see the book &quot;[Effective Java][3]&quot;.\r\n\r\n\r\n  [1]: https://stackoverflow.com/a/12659023/744133\r\n  [2]: https://stackoverflow.com/a/12664200/744133\r\n  [3]: https://books.google.com/books?id=ka2VUBqHiWkC&amp;lpg=PA154&amp;ots=yYGoIhoZMY&amp;dq=effective%20java%20static%20enum%20block&amp;pg=PA154#v=onepage&amp;q=effective%20java%20static%20enum%20block&amp;f=false &quot;Effective Java. - Joshua Bloch&quot;\r\n\r\n\r\n\r\n","title":"Static Initialization Blocks","body":"<p>It is a common misconception to think that a static block has only access to static fields. For this I would like to show below piece of code that I quite often use in real-life projects (copied partially from <a href=\"https://stackoverflow.com/a/12659023/744133\">another answer</a> in a slightly different context):</p>\n\n<pre><code>public enum Language { \n  ENGLISH(\"eng\", \"en\", \"en_GB\", \"en_US\"),   \n  GERMAN(\"de\", \"ge\"),   \n  CROATIAN(\"hr\", \"cro\"),   \n  RUSSIAN(\"ru\"),\n  BELGIAN(\"be\",\";-)\");\n\n  static final private Map&lt;String,Language&gt; ALIAS_MAP = new HashMap&lt;String,Language&gt;(); \n  static { \n    for (Language l:Language.values()) { \n      // ignoring the case by normalizing to uppercase\n      ALIAS_MAP.put(l.name().toUpperCase(),l); \n      for (String alias:l.aliases) ALIAS_MAP.put(alias.toUpperCase(),l); \n    } \n  } \n\n  static public boolean has(String value) { \n    // ignoring the case by normalizing to uppercase\n    return ALIAS_MAP.containsKey(value.toUpper()); \n  } \n\n  static public Language fromString(String value) { \n    if (value == null) throw new NullPointerException(\"alias null\"); \n    Language l = ALIAS_MAP.get(value); \n    if (l == null) throw new IllegalArgumentException(\"Not an alias: \"+value); \n    return l; \n  } \n\n  private List&lt;String&gt; aliases; \n  private Language(String... aliases) { \n    this.aliases = Arrays.asList(aliases); \n  } \n} \n</code></pre>\n\n<p>Here the initializer is used to maintain an index (<code>ALIAS_MAP</code>), to map a set of aliases back to the original enum type. It is intended as an extension to the built-in valueOf method provided by the <code>Enum</code> itself.</p>\n\n<p>As you can see, the static initializer accesses even the <code>private</code> field <code>aliases</code>. It is important to understand that the <code>static</code> block already has access to the <code>Enum</code> value instances (e.g. <code>ENGLISH</code>). This is because the <a href=\"https://stackoverflow.com/a/12664200/744133\">order of initialization and execution in the case of <code>Enum</code> types</a>, just as if the <code>static private</code> fields have been initialized with instances before the <code>static</code> blocks have been called:</p>\n\n<ol>\n<li>The <code>Enum</code> constants which are implicit static fields. This requires the Enum constructor and instance blocks, and instance initialization to occur first as well.</li>\n<li><code>static</code> block and initialization of static fields in the order of occurrence.</li>\n</ol>\n\n<p>This out-of-order initialization (constructor before <code>static</code> block) is important to note. It also happens when we initialize static fields with the instances similarly to a Singleton (simplifications made):</p>\n\n<pre><code>public class Foo {\n  static { System.out.println(\"Static Block 1\"); }\n  public static final Foo FOO = new Foo();\n  static { System.out.println(\"Static Block 2\"); }\n  public Foo() { System.out.println(\"Constructor\"); }\n  static public void main(String p[]) {\n    System.out.println(\"In Main\");\n    new Foo();\n  }\n}\n</code></pre>\n\n<p>What we see is the following output:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>Static Block 1\nConstructor\nStatic Block 2\nIn Main\nConstructor\n</code></pre>\n\n<p>Clear is that the static initialization actually can happen <em>before</em> the constructor, and even after:</p>\n\n<p>Simply accessing Foo in the main method, causes the class to be loaded and the static initialization to start. But as part of the Static initialization we again call the constructors for the static fields, after which it resumes static initialization, and completes the constructor called from within the main method. Rather complex situation for which I hope that in normal coding we would not have to deal with.</p>\n\n<p>For more info on this see the book \"<a href=\"https://books.google.com/books?id=ka2VUBqHiWkC&amp;lpg=PA154&amp;ots=yYGoIhoZMY&amp;dq=effective%20java%20static%20enum%20block&amp;pg=PA154#v=onepage&amp;q=effective%20java%20static%20enum%20block&amp;f=false\" rel=\"nofollow noreferrer\" title=\"Effective Java. - Joshua Bloch\">Effective Java</a>\".</p>\n"},{"tags":[],"owner":{"account_id":4116853,"reputation":10757,"user_id":3378204,"accept_rate":91,"display_name":"Eugene"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1470233931,"creation_date":1470233931,"answer_id":38746224,"question_id":2420389,"body_markdown":"As supplementary, like @Pointy said\r\n\r\n&gt; The code in the &quot;static&quot; section(s) will be executed at class load\r\n&gt; time, before any instances of the class are constructed (and before\r\n&gt; any static methods are called from elsewhere).\r\n\r\nIt&#39;s supposed to add `System.loadLibrary(&quot;I_am_native_library&quot;)` into static block.\r\n\r\n\tstatic{\r\n\t\tSystem.loadLibrary(&quot;I_am_a_library&quot;);\r\n\t}\r\n \r\nIt will guarantee no native method be called before the related library is loaded into memory.\r\n\r\nAccording to [loadLibrary from oracle][1]:\r\n\r\n&gt; If this method is called more than once with the same library name,\r\n&gt; the second and subsequent calls are ignored.\r\n\r\nSo quite unexpectedly, putting System.loadLibrary is not used to avoid library be loaded multi-times.\r\n\r\n  [1]: http://docs.oracle.com/javase/6/docs/api/java/lang/Runtime.html#loadLibrary%28java.lang.String%29","title":"Static Initialization Blocks","body":"<p>As supplementary, like @Pointy said</p>\n\n<blockquote>\n  <p>The code in the \"static\" section(s) will be executed at class load\n  time, before any instances of the class are constructed (and before\n  any static methods are called from elsewhere).</p>\n</blockquote>\n\n<p>It's supposed to add <code>System.loadLibrary(\"I_am_native_library\")</code> into static block.</p>\n\n<pre><code>static{\n    System.loadLibrary(\"I_am_a_library\");\n}\n</code></pre>\n\n<p>It will guarantee no native method be called before the related library is loaded into memory.</p>\n\n<p>According to <a href=\"http://docs.oracle.com/javase/6/docs/api/java/lang/Runtime.html#loadLibrary%28java.lang.String%29\" rel=\"nofollow\">loadLibrary from oracle</a>:</p>\n\n<blockquote>\n  <p>If this method is called more than once with the same library name,\n  the second and subsequent calls are ignored.</p>\n</blockquote>\n\n<p>So quite unexpectedly, putting System.loadLibrary is not used to avoid library be loaded multi-times.</p>\n"},{"tags":[],"owner":{"account_id":5071035,"reputation":5785,"user_id":4069782,"accept_rate":75,"display_name":"Emmanuel Osimosu"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1661432313,"creation_date":1476979350,"answer_id":40159303,"question_id":2420389,"body_markdown":"It is important to understand that classes are instantiated from `java.class.Class` during runtime. That is when static blocks are executed, which allows you to execute code **without instantiating a class**:\r\n\r\n\r\n    public class Main {\r\n\r\n        private static int myInt;\r\n    \r\n        static {\r\n            myInt = 1;\r\n            System.out.println(&quot;myInt is 1&quot;);\r\n        }\r\n        \r\n        //  needed only to run this class\r\n        public static void main(String[] args) {\r\n        }\r\n       \r\n    }\r\n\r\nThe result is `myInt is 1` printed to the console.","title":"Static Initialization Blocks","body":"<p>It is important to understand that classes are instantiated from <code>java.class.Class</code> during runtime. That is when static blocks are executed, which allows you to execute code <strong>without instantiating a class</strong>:</p>\n<pre><code>public class Main {\n\n    private static int myInt;\n\n    static {\n        myInt = 1;\n        System.out.println(&quot;myInt is 1&quot;);\n    }\n    \n    //  needed only to run this class\n    public static void main(String[] args) {\n    }\n   \n}\n</code></pre>\n<p>The result is <code>myInt is 1</code> printed to the console.</p>\n"},{"tags":[],"owner":{"account_id":6958292,"reputation":5,"user_id":5338636,"display_name":"Vid"},"down_vote_count":2,"up_vote_count":0,"is_accepted":false,"score":-2,"last_activity_date":1557465778,"creation_date":1557465778,"answer_id":56071140,"question_id":2420389,"body_markdown":"\r\n    static int B,H;\r\n    static boolean flag = true;\r\n    static{\r\n        Scanner scan = new Scanner(System.in);\r\n        B = scan.nextInt();\r\n        scan.nextLine();\r\n        H = scan.nextInt();\r\n\r\n        if(B &lt; 0 || H &lt; 0){\r\n            flag = false;\r\n            System.out.println(&quot;java.lang.Exception: Breadth and height must be positive&quot;);\r\n        } \r\n    }","title":"Static Initialization Blocks","body":"<pre><code>static int B,H;\nstatic boolean flag = true;\nstatic{\n    Scanner scan = new Scanner(System.in);\n    B = scan.nextInt();\n    scan.nextLine();\n    H = scan.nextInt();\n\n    if(B &lt; 0 || H &lt; 0){\n        flag = false;\n        System.out.println(\"java.lang.Exception: Breadth and height must be positive\");\n    } \n}\n</code></pre>\n"}],"owner":{"account_id":88863,"reputation":126149,"user_id":245549,"accept_rate":66,"display_name":"Roman"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":258471,"favorite_count":0,"down_vote_count":3,"up_vote_count":311,"accepted_answer_id":2420466,"answer_count":14,"score":308,"last_activity_date":1661432313,"creation_date":1268253455,"question_id":2420389,"body_markdown":"As far as I understood the &quot;static initialization block&quot; is used to set values of static field if it cannot be done in one line. \r\n\r\nBut I do not understand why we need a special block for that. For example we declare a field as static (without a value assignment). And then write several lines of the code which generate and assign a value to the above declared static field.\r\n\r\nWhy do we need this lines in a special block like: `static {...}`? ","title":"Static Initialization Blocks","body":"<p>As far as I understood the \"static initialization block\" is used to set values of static field if it cannot be done in one line. </p>\n\n<p>But I do not understand why we need a special block for that. For example we declare a field as static (without a value assignment). And then write several lines of the code which generate and assign a value to the above declared static field.</p>\n\n<p>Why do we need this lines in a special block like: <code>static {...}</code>? </p>\n"},{"tags":["java","spring","rest","spring-restcontroller","request-mapping"],"comments":[{"owner":{"account_id":264830,"reputation":70811,"user_id":551406,"accept_rate":95,"display_name":"Michael Berry"},"score":0,"creation_date":1543406512,"post_id":53519006,"comment_id":93906547,"body_markdown":"How would you know which method you want to call if the endpoints and methods are identical?","body":"How would you know which method you want to call if the endpoints and methods are identical?"},{"owner":{"account_id":3597514,"reputation":117144,"user_id":3001761,"display_name":"jonrsharpe"},"score":1,"creation_date":1543406650,"post_id":53519006,"comment_id":93906649,"body_markdown":"It might be helpful to give some context, this seems like an http://xyproblem.info","body":"It might be helpful to give some context, this seems like an <a href=\"http://xyproblem.info\" rel=\"nofollow noreferrer\">xyproblem.info</a>"},{"owner":{"account_id":8146898,"reputation":453,"user_id":6135309,"display_name":"Ravikumar"},"score":0,"creation_date":1543406746,"post_id":53519006,"comment_id":93906699,"body_markdown":"parameters in request body is different in each method","body":"parameters in request body is different in each method"},{"owner":{"account_id":3597514,"reputation":117144,"user_id":3001761,"display_name":"jonrsharpe"},"score":0,"creation_date":1543421940,"post_id":53519006,"comment_id":93916532,"body_markdown":"That&#39;s the same context again. *Why* is it different, why do you post different resources to the same endpoint?","body":"That&#39;s the same context again. <i>Why</i> is it different, why do you post different resources to the same endpoint?"}],"answers":[{"tags":[],"owner":{"account_id":12972203,"reputation":469,"user_id":9377527,"display_name":"mwdev"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1543409683,"creation_date":1543409683,"answer_id":53519969,"question_id":53519006,"body_markdown":"Yes you can do that but you need to specify unique parameters signature in RequestMapping annotation:\r\n\r\n    public class MyController {\r\n\r\n    @RequestMapping(method = RequestMethod.POST, params = {&quot;!name&quot;, &quot;!name2&quot;})\r\n    public String action(HttpServletRequest request, HttpServletResponse response){\r\n        // body\r\n    }\r\n\r\n    @RequestMapping(method = RequestMethod.POST, params = &quot;name&quot;)\r\n    public String action(HttpServletRequest request, HttpServletResponse response,\r\n                            @RequestParam(value = &quot;name&quot;, required = true) String name) {\r\n        // body\r\n    }\r\n    \r\n    }\r\n`","title":"Spring - is it possible to give same url (path) in request mapping for two different post methods?","body":"<p>Yes you can do that but you need to specify unique parameters signature in RequestMapping annotation:</p>\n\n<pre><code>public class MyController {\n\n@RequestMapping(method = RequestMethod.POST, params = {\"!name\", \"!name2\"})\npublic String action(HttpServletRequest request, HttpServletResponse response){\n    // body\n}\n\n@RequestMapping(method = RequestMethod.POST, params = \"name\")\npublic String action(HttpServletRequest request, HttpServletResponse response,\n                        @RequestParam(value = \"name\", required = true) String name) {\n    // body\n}\n\n}\n</code></pre>\n\n<p>`</p>\n"},{"tags":[],"owner":{"account_id":12836302,"reputation":2160,"user_id":9285802,"display_name":"Sukhpal Singh"},"down_vote_count":1,"up_vote_count":19,"is_accepted":true,"score":18,"last_activity_date":1543410158,"creation_date":1543410158,"answer_id":53520114,"question_id":53519006,"body_markdown":"No, you can&#39;t give same url in request mapping of post method having different request body type but same media type. Below won&#39;t work:\r\n\r\n      @PostMapping(path = &quot;/hello&quot;, consumes = MediaType.APPLICATION_JSON_VALUE)\r\n      public String hello(@RequestBody Pojo1 val) {\r\n        return &quot;Hello&quot;;\r\n      }\r\n\r\n      @PostMapping(path = &quot;/hello&quot;, consumes = MediaType.APPLICATION_JSON_VALUE)\r\n      public String hello(@RequestBody Pojo2 val) {\r\n        return &quot;Hello&quot;;\r\n      }\r\n  \r\nIf you have different media type, then it will. Below will work:\r\n\r\n      @PostMapping(path = &quot;/hello&quot;, consumes = MediaType.APPLICATION_JSON_VALUE)\r\n      public String hello(@RequestBody Pojo val) {\r\n        return &quot;Hello&quot;;\r\n      }\r\n\r\n      @PostMapping(path = &quot;/hello&quot;, consumes = MediaType.TEXT_PLAIN_VALUE)\r\n      public String hello(@RequestBody String val) {\r\n        return &quot;Hello&quot;;\r\n      }\r\n  \r\nYour `RequestMapping` should differ on at least one of the conditions; `path,method,params,headers,consumes,produces`\r\n\r\n","title":"Spring - is it possible to give same url (path) in request mapping for two different post methods?","body":"<p>No, you can't give same url in request mapping of post method having different request body type but same media type. Below won't work:</p>\n\n<pre><code>  @PostMapping(path = \"/hello\", consumes = MediaType.APPLICATION_JSON_VALUE)\n  public String hello(@RequestBody Pojo1 val) {\n    return \"Hello\";\n  }\n\n  @PostMapping(path = \"/hello\", consumes = MediaType.APPLICATION_JSON_VALUE)\n  public String hello(@RequestBody Pojo2 val) {\n    return \"Hello\";\n  }\n</code></pre>\n\n<p>If you have different media type, then it will. Below will work:</p>\n\n<pre><code>  @PostMapping(path = \"/hello\", consumes = MediaType.APPLICATION_JSON_VALUE)\n  public String hello(@RequestBody Pojo val) {\n    return \"Hello\";\n  }\n\n  @PostMapping(path = \"/hello\", consumes = MediaType.TEXT_PLAIN_VALUE)\n  public String hello(@RequestBody String val) {\n    return \"Hello\";\n  }\n</code></pre>\n\n<p>Your <code>RequestMapping</code> should differ on at least one of the conditions; <code>path,method,params,headers,consumes,produces</code></p>\n"},{"tags":[],"owner":{"account_id":18583394,"reputation":526,"user_id":13542384,"display_name":"Sumedh Deshpande"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1661432304,"creation_date":1604400395,"answer_id":64661314,"question_id":53519006,"body_markdown":"I needed the same url post mapping but it was giving me an error so I added different params and it worked for me\r\n \r\n```\r\n//url1 post mapping\r\n@PostMapping(value = &quot;/applicant/{step}&quot;, params = &quot;validatedata&quot;)\r\n\r\n//url2 post mapping\r\n@PostMapping(value = &quot;/applicant/{step}&quot;, params = &quot;data&quot;)\r\n```\r\n\r\nif any of the below is different(as mentioned by the above answers)then you can have the same URL post mapping\r\n**path,method,params,headers,consumes,produces**\r\n\r\nIn my case params was diffrent","title":"Spring - is it possible to give same url (path) in request mapping for two different post methods?","body":"<p>I needed the same url post mapping but it was giving me an error so I added different params and it worked for me</p>\n<pre><code>//url1 post mapping\n@PostMapping(value = &quot;/applicant/{step}&quot;, params = &quot;validatedata&quot;)\n\n//url2 post mapping\n@PostMapping(value = &quot;/applicant/{step}&quot;, params = &quot;data&quot;)\n</code></pre>\n<p>if any of the below is different(as mentioned by the above answers)then you can have the same URL post mapping\n<strong>path,method,params,headers,consumes,produces</strong></p>\n<p>In my case params was diffrent</p>\n"}],"owner":{"account_id":8146898,"reputation":453,"user_id":6135309,"display_name":"Ravikumar"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":24058,"favorite_count":0,"down_vote_count":2,"up_vote_count":11,"accepted_answer_id":53520114,"answer_count":3,"score":9,"last_activity_date":1661432304,"creation_date":1543406423,"question_id":53519006,"body_markdown":"Is it possible to map same path (uri) in request mapping for two different post methods, only difference is request body.\r\n\r\n**Example** \r\n\r\n      @RequestMapping(value = &quot;/hello&quot;, method = RequestMethod.POST)\r\n      public String helloEmployee(@RequestBody Employee employee) {\r\n        return &quot;Hello Employee&quot;;\r\n      }\r\n    \r\n      @RequestMapping(value = &quot;/hello&quot;, method = RequestMethod.POST)\r\n      public String helloStudent(@RequestBody Student student) {\r\n        return &quot;Hello Student&quot;;\r\n      }","title":"Spring - is it possible to give same url (path) in request mapping for two different post methods?","body":"<p>Is it possible to map same path (uri) in request mapping for two different post methods, only difference is request body.</p>\n<p><strong>Example</strong></p>\n<pre><code>  @RequestMapping(value = &quot;/hello&quot;, method = RequestMethod.POST)\n  public String helloEmployee(@RequestBody Employee employee) {\n    return &quot;Hello Employee&quot;;\n  }\n\n  @RequestMapping(value = &quot;/hello&quot;, method = RequestMethod.POST)\n  public String helloStudent(@RequestBody Student student) {\n    return &quot;Hello Student&quot;;\n  }\n</code></pre>\n"},{"tags":["java","visual-studio","selenium-webdriver","selenium-chromedriver"],"answers":[{"tags":[],"owner":{"account_id":19605851,"reputation":1,"user_id":14349556,"display_name":"Vin&#237;cius Ribeiro"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1661166595,"creation_date":1661166595,"answer_id":73444132,"question_id":73443842,"body_markdown":"This [exception][1] can happen when:\r\n\r\n 1. Element is not visible.\r\n 2. Element is present in off screen (after scroll down it will display).\r\n 3. Element is present behind any other element.\r\n 4. Element is disabled.\r\n\r\nYou can try to use Wait and ExpectedConditions:\r\n\r\n    Wait&lt;WebDriver&gt; = new FluentWait&lt;&gt;(webDriver)\r\n                    .withTimeout(Duration.ofSeconds(TIMEOUT))\r\n                    .pollingEvery(Duration.ofSeconds(POLLING))\r\n                    .ignoring(NoSuchElementException.class); \r\n       \r\n    wait.until(ExpectedConditions.elementToBeClickable(By.id(&quot;password&quot;))).click();\r\n\r\nor\r\n\r\n    wait.until(ExpectedConditions.visibilityOfElementLocated(By.id(&quot;password&quot;))).click();\r\n\r\n\r\n  [1]: https://www.selenium.dev/selenium/docs/api/java/org/openqa/selenium/ElementNotInteractableException.html","title":"org.openqa.selenium.ElementNotInteractableException: element not interactable","body":"<p>This <a href=\"https://www.selenium.dev/selenium/docs/api/java/org/openqa/selenium/ElementNotInteractableException.html\" rel=\"nofollow noreferrer\">exception</a> can happen when:</p>\n<ol>\n<li>Element is not visible.</li>\n<li>Element is present in off screen (after scroll down it will display).</li>\n<li>Element is present behind any other element.</li>\n<li>Element is disabled.</li>\n</ol>\n<p>You can try to use Wait and ExpectedConditions:</p>\n<pre><code>Wait&lt;WebDriver&gt; = new FluentWait&lt;&gt;(webDriver)\n                .withTimeout(Duration.ofSeconds(TIMEOUT))\n                .pollingEvery(Duration.ofSeconds(POLLING))\n                .ignoring(NoSuchElementException.class); \n   \nwait.until(ExpectedConditions.elementToBeClickable(By.id(&quot;password&quot;))).click();\n</code></pre>\n<p>or</p>\n<pre><code>wait.until(ExpectedConditions.visibilityOfElementLocated(By.id(&quot;password&quot;))).click();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":26137991,"reputation":11,"user_id":19827757,"display_name":"SELVA K"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1661432273,"creation_date":1661432273,"answer_id":73487958,"question_id":73443842,"body_markdown":"1.Now only use Thread.sleep(5000); it may be work otherwise use selenium waits like implicit,explicit and fluent waits","title":"org.openqa.selenium.ElementNotInteractableException: element not interactable","body":"<p>1.Now only use Thread.sleep(5000); it may be work otherwise use selenium waits like implicit,explicit and fluent waits</p>\n"}],"owner":{"account_id":26128545,"reputation":1,"user_id":19819620,"display_name":"Nyaradzo Moyo"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":845,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":2,"score":-1,"last_activity_date":1661432273,"creation_date":1661165030,"question_id":73443842,"body_markdown":"My test is failing when it reaches the line below:\r\n\r\n**driver.findElement(By.id(&quot;password&quot;)).sendKeys(&quot;myPass&quot;);**\r\n\r\nI have tried the solutions given but it still not interactable ","title":"org.openqa.selenium.ElementNotInteractableException: element not interactable","body":"<p>My test is failing when it reaches the line below:</p>\n<p><strong>driver.findElement(By.id(&quot;password&quot;)).sendKeys(&quot;myPass&quot;);</strong></p>\n<p>I have tried the solutions given but it still not interactable</p>\n"}],"has_more":true,"quota_max":10000,"quota_remaining":8909,"page":1083,"page_size":100}
